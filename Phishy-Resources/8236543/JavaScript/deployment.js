(function(){function Ba(t){switch(t){case"'":return"&#39;";case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"Â©":return"&copy;";case"\u2028":return"<br>";case"\u2029":return"<p>";default:return t}}function h(){}function t(){}function ka(t){h.prototype.init.call(this,t,h.TYPE.STANDARD)}function la(t){return m[t]||(m[t]=new ka(t)),m[t]}function S(t,e){h.prototype.init.call(this,e+"_"+t,h.TYPE.AGENT)}function K(t,e){var n=e+"_"+t;return m[n]||(m[n]=new S(t,e)),m[n]}function T(e,n){t.prototype.init.call(this,e,n)}function U(e,n){t.prototype.init.call(this,e,n)}function p(t){h.prototype.init.call(this,t,h.TYPE.INVITE),this.active=!1,this.filterLogic=null,this.rules={},this.autoRejectTimeout=this.inviteTimeout=this.inviteDelay=this.ruleTree=null}function u(t){return m[t]||(m[t]=new p(t)),m[t]}function z(e,n,i,o,r,a,s,l){t.prototype.init.call(this,e,n),this.hasInviteAfterAccept=a,this.hasInviteAfterReject=s,this.rejectTime=l,null!==f.getCssAnimation(n)||"Custom"==i?this.renderer=new p.RENDERER[i].renderClass(e,n,p.START_POSITION[o],p.END_POSITION[r]):this.renderer=new p.RENDERER.Appear.renderClass(e,n,p.START_POSITION[o],p.END_POSITION[r])}function C(t){return u(t)?u(t).getTracker():null}function r(){}function I(t,e,n,i){r.prototype.init.call(this,t,e,n,i)}function J(t,e,n,i){r.prototype.init.call(this,t,e,null,i)}function L(t,e,n,i){r.prototype.init.call(this,t,e,null,i)}function D(t,e,n,i){D.prototype.init.call(this,t,e,null,null)}function n(){}function M(t,e,i,o,r){n.prototype.init.call(this,t,e,i,o,r)}function N(t,e,i,o,r){n.prototype.init.call(this,t,e,i,o,r)}function V(t,e,i,o,r){n.prototype.init.call(this,t,e,i,o,r)}function E(t){if(1e3<++ma)throw Error("Error processing rule filter logic, preventing recursion");for(var e=0,n=0,i=0;i<t.length;i++)"("==t.charAt(i)?n++:")"==t.charAt(i)&&n--,","==t.charAt(i)&&1==n&&(e=i);if(0==t.indexOf("AND("))return new W(n=E(t.substring(4,e)),t=E(t.substring(e+1,t.length-1)));if(0==t.indexOf("OR("))return new X(n=E(t.substring(3,e)),t=E(t.substring(e+1,t.length-1)));if(0==t.indexOf("NOT("))return new Y(n=E(t.substring(4,t.length-1)));if(!isNaN(parseInt(t,10)))return new Z(parseInt(t,10));throw Error("Encountered unexpected character in filter logic")}function y(){}function Z(t){this.ruleId=t,y.prototype.init.call(this,null,null)}function W(t,e){y.prototype.init.call(this,t,e)}function X(t,e){y.prototype.init.call(this,t,e)}function Y(t){y.prototype.init.call(this,t,null)}function Ca(t,e,n,i){var o=document.createElement("div");o.id="liveagent_invite_button_"+t;var r=document.createElement("img");return r.style.cursor="pointer",r.style.position="absolute",r.style.right="-20px",r.style.top="-20px",r.src=f.addPrefixToURL(k.contentServerUrl,k.urlPrefix,!0)+"/images/x.png",f.addEventListener(r,"click",(function(){l.rejectChat(t)})),o.appendChild(r),(r=document.createElement("img")).style.cursor="pointer",r.style.clear="right",r.src=e,r.width=n,r.height=i,f.addEventListener(r,"click",(function(){l.startChat(t)})),o.appendChild(r),document.body.appendChild(o),o}function na(t,e,n){void 0===n&&(n=!0),this.getLabel=function(){return t},this.getValue=function(){return e},this.getDisplayToAgent=function(){return n};var i=new aa;this.getMapper=function(){return i},this.doKnowledgeSearch=!1,this.getDoKnowledgeSearch=function(){return this.doKnowledgeSearch},this.setDoKnowledgeSearch=function(){this.doKnowledgeSearch=!0}}function aa(){var t=[],e=[];this.getEntityMaps=function(){return t},this.getTranscriptFields=function(){return e}}function oa(t,e,n,i,o){this.getEntityName=function(){return t},this.getFieldName=function(){return e},this.getFastFill=function(){return n},this.getAutoQuery=function(){return i},this.getExactMatch=function(){return o}}function pa(t){this.saveToTranscript="",this.showOnCreate=!1,this.linkToEntityField=this.linkToEntityName="";var e=new qa;this.getEntityName=function(){return t},this.getSaveTranscript=function(){return this.saveTranscript},this.getShowOnCreate=function(){return this.showOnCreate},this.getLinkToEntityName=function(){return this.linkToEntityName},this.getLinkToEntityField=function(){return this.linkToEntityField},this.getEntityMapper=function(){return e},this.setSaveTranscript=function(t){this.saveTranscript=t},this.setShowOnCreate=function(t){this.showOnCreate=t},this.setLinkToEntityName=function(t){this.linkToEntityName=t},this.setLinkToEntityField=function(t){this.linkToEntityField=t}}function qa(){var t=[];this.getEntityFieldsMaps=function(){return t}}function ra(t,e,n,i,o){this.getFieldName=function(){return t},this.getLabel=function(){return e},this.getDoFind=function(){return n},this.getIsExactMatch=function(){return i},this.getDoCreate=function(){return o}}function O(){if(!sa){if(sa=!0,f.log("DOM is ready. Setting up environment."),null==v.getOref()&&v.setOref(document.referrer),null==v.getVisitCount()&&v.setVisitCount(1),window._laq)for(var t=0;t<window._laq.length;t++)window._laq[t].call(window);q.connection.setCallback("liveagent._.handlePing"),ta()}}function ta(){var t=[],e={};ba&&(e.chatted=1),w?(e.sid=w,f.log("Reusing existing session.")):(t.push(new q.Noun("VisitorId")),f.log("Requesting new session."));var n={buttonIds:"["+ua()+"]",updateBreadcrumb:1,urlPrefix:k.urlPrefix};k.needEstimatedWaitTime&&(n.needEstimatedWaitTime=1),t.push(new q.Noun("Settings",n)),q.connection.send(t,e)}function va(){null!==P&&clearTimeout(P),P=window.setTimeout(Da,Q?0:k.pingRate)}function wa(t,e){e.endpointUrl&&t.setEndpoint(e.endpointUrl),e.prechatUrl&&t.setPrechat(e.prechatUrl),e.language&&t.setLanguage(e.language),t.setOnlineState(e.isAvailable),e.estimatedWaitTime&&t.setEstimatedWaitTime(e.estimatedWaitTime)}function Da(){if(q.connection.isRunning())if(null==w||Q)Q=!1,ta();else{f.log("Pinging server to keep presence"),P=null;var t={};t.sid=w,ba&&(t.chatted=1),t.r=(new Date).getMilliseconds();var e={ids:"["+ua()+"]"};k.needEstimatedWaitTime&&(e.needEstimatedWaitTime=1),e=[new q.Noun("Availability",e)],q.connection.send(e,t)}}function ca(){for(var t in f.log("Disconnecting from Live Agent"),q.connection.setIsRunning(!1),m)m.hasOwnProperty(t)&&m[t].setOnlineState(!1)}function ua(){var t,e=[],n={};for(t in m)m.hasOwnProperty(t)&&m[t].getType()==h.TYPE.STANDARD&&(n[t]=m[t]);for(var i in n)e.push(i);var o;n={};for(o in m)m.hasOwnProperty(o)&&m[o].getType()==h.TYPE.AGENT&&(n[o]=m[o]);for(i in n)e.push(i);for(var r in o={},m)m.hasOwnProperty(r)&&m[r].getType()==h.TYPE.INVITE&&(o[r]=m[r]);for(i in o)e.push(i);for(i="",r=0;r<e.length;r++)i+=e[r],r<e.length-1&&(i+=",");return i}function xa(t,e,n,i){var o;f.setCookie("liveagent_chatted",1,!1),ba=!0,o=(o="deployment_id="+k.deploymentId)+"&org_id="+k.orgId,o+="&button_id=",o+=t,n&&(o+="&agent_id=",o+=n),i&&(o+="&do_fallback=1"),o+="&session_id=",o+=w,t=n?m[n+"_"+t].getEndpoint(o):m[t].getEndpoint(o),n=(n="height="+k.chatWindowHeight)+",width="+k.chatWindowWidth,n+=",menubar=no",n+=",toolbar=no",n+=",location=no",n+=",personalbar=no",n+=",scrollbars=yes",n+=",resizable=yes",window.open("",e,n),Ea(e,t)}function Ea(t,e){function n(t,e,n){var i=document.createElement("input");i.name=e,i.value=n,t.appendChild(i)}var i=v.getVisitCount();null==i&&(i="0");var o=document.createElement("form");o.style.display="none",n(o,"deploymentId",k.deploymentId),n(o,"orgId",k.orgId),n(o,"vc",i),n(o,"sid",w),n(o,"ptid",v.getPermanentId()),n(o,"det",f.jsonEncode(ya)),n(o,"oref",v.getOref()),n(o,"pages",f.jsonEncode(A.getPages())),n(o,"sessionStart",(new Date).getTime()-A.getSessionStart()),n(o,"ent",f.jsonEncode(za)),da&&n(o,"visitorName",da),o.method="POST",o.action=e,o.target=t,document.body.appendChild(o),o.submit()}function ea(t){t?f.log("Server Warning: "+t):f.log("Server sent an anoymous warning.")}function Aa(t){t?f.log("Server Error: "+t):f.log("Server responded with an error.")}if(!window.liveAgentDeployment){window.liveAgentDeployment=!0;var l={};window.liveagent&&(l=window.liveagent),window.liveagent=l;var f={getCookie:function(t){var e=document.cookie,n=e.indexOf(t+"=");return-1==n?null:(n+=(t+"=").length,-1==(t=e.indexOf(";",n))&&(t=e.length),e.substring(n,t))},setCookie:function(t,e,n){t=t+"="+e+";",void 0===k.optionalCookieEnabled&&(k.optionalCookieEnabled=!0),k.secureCookiesEnabled=void 0!==k.secureCookiesEnabled&&k.secureCookiesEnabled,0===t.indexOf("liveagent_invite_rejected_")||k.optionalCookieEnabled?n&&((n=new Date).setFullYear(n.getFullYear()+1),t+="expires="+n.toGMTString()+";"):((n=new Date).setFullYear(n.getFullYear()-1),t+="expires="+n.toGMTString()+";"),t=t+"path=/;"+(k.secureCookiesEnabled?"secure":""),document.cookie=t},addEventListener:function(t,e,n){if(t.addEventListener)t.addEventListener(e,n,!1);else{if(!t.attachEvent)throw Error("Could not add event listener");t.attachEvent("on"+e,n,!1)}},log:function(t){R&&window.console&&window.console.log&&window.console.log("LIVE AGENT: "+t)},logGroupStart:function(t){R&&window.console&&(window.console.group?window.console.groupCollapsed("LIVE AGENT: "+t):f.log(t))},logGroupEnd:function(){R&&window.console&&window.console.group&&window.console.groupEnd()},getLanguage:function(){return void 0!==window.navigator.language?window.navigator.language:void 0!==window.navigator.userLanguage?window.navigator.userLanguage:""},arrayHasItem:function(t,e){if(Array.prototype.indexOf)return-1<t.indexOf(e);for(var n=0;n<t.length;n++)if(t[n]==e)return!0},jsonEncode:function(t,e,n){function i(t){return r.lastIndex=0,r.test(t)?'"'+t.replace(r,(function(t){var e=a[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+t+'"'}if(void 0!==window.JSON)return window.JSON.stringify(t,e,n);if(null==t)return"null";var o,r=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,a={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},s="",l="",u=e;if("number"==typeof n)for(o=0;o<n;o+=1)l+=" ";else"string"==typeof n&&(l=n);if(e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw Error("Error during JSON.stringify");return function t(e,n){var o,r,a,c,f,h=s,d=n[e];switch(d&&"object"==typeof d&&"function"==typeof d.toJSON&&(d=d.toJSON(e)),"function"==typeof u&&(d=u.call(n,e,d)),typeof d){case"string":return i(d);case"number":return isFinite(d)?String(d):"null";case"boolean":case"null":return String(d);case"object":if(!d)return"null";if(s+=l,f=[],"[object Array]"===Object.prototype.toString.apply(d)){for(c=d.length,o=0;o<c;o+=1)f[o]=t(o,d)||"null";return a=0===f.length?"[]":s?"[\n"+s+f.join(",\n"+s)+"\n"+h+"]":"["+f.join(",")+"]",s=h,a}if(u&&"object"==typeof u)for(c=u.length,o=0;o<c;o+=1)"string"==typeof u[o]&&((a=t(r=u[o],d))&&f.push(i(r)+(s?": ":":")+a));else for(r in d)Object.prototype.hasOwnProperty.call(Object(d),r)&&(a=t(r,d))&&f.push(i(r)+(s?": ":":")+a);return a=0===f.length?"{}":s?"{\n"+s+f.join(",\n"+s)+"\n"+h+"}":"{"+f.join(",")+"}",s=h,a}}("",{"":t})},jsonDecode:function(a){if(a=String(a),void 0!==window.JSON)return window.JSON.parse(a);var b=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;if(b.lastIndex=0,b.test(a)&&(a=a.replace(b,(function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)}))),/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return eval("("+a+")");throw Error("Error during JSON.parse")},getCssAnimation:function(t){var e=["Webkit","Moz","O","ms","Khtml"];if(void 0!==t.style.animationName)return"";for(var n=0;n<e.length;n++)if(void 0!==t.style[e[n]+"AnimationName"])return e[n].toLowerCase();return null},addPrefixToURL:function(t,e,n){if(!f.isEmpty(t)&&!f.isEmpty(e)&&0!==t.indexOf(e)){n&&(e=f.escapeToHtml(e));var i=/(https?:\/\/)(.*)/i;n=t.replace(i,"$1"),t=t.replace(i,"$2"),t=n+(e=e.replace(i,"$2"))+"/"+t}return t},getDomainFromUrl:function(t){return f.isEmpty(t)?"":(fa||(fa=document.createElement("a")),(e=fa).href=t,t=t.match(/:(\d+)/g),e=e.protocol+"//"+e.hostname||window.location.protocol+"//"+window.location.hostname,t?e+t[0]:e);var e},isEmpty:function(t){return null==t||""===t},escapeToHtml:function(t){return null==t||""===t?"":t=t.replace(/[&<>"'\u00a9\u2028\u2029]/g,Ba)},isValidEntityId:function(t){return t&&"string"==typeof t&&(18===t.length||15===t.length)},getKeyPrefix:function(t){return this.isValidEntityId(t)?t.substr(0,3):null},isOrganizationId:function(t){return"00D"===this.getKeyPrefix(t)},isDeploymentId:function(t){return"572"===this.getKeyPrefix(t)},trim:function(t){return t&&t.replace(/^[\s\u0000-\u0020]*|[\s\u0000-\u0020]*$/g,"")||""}},fa,v={getVisitCount:function(){var t=parseInt(f.getCookie("liveagent_vc"),10);return isNaN(t)?null:t},getOref:function(){return f.getCookie("liveagent_oref")},getPermanentId:function(){var t=f.getCookie("liveagent_ptid");return null!=t?t:""},hasCookieConsent:function(t){return 0>["liveagent_ptid","liveagent_oref"].indexOf(t)||0>[].indexOf(window.location.host)},setVisitCount:function(t){f.setCookie("liveagent_vc",t,!0)},setOref:function(t){if(this.hasCookieConsent("liveagent_oref"))return f.setCookie("liveagent_oref",t,!0)},setPermanentId:function(t){this.hasCookieConsent("liveagent_ptid")&&f.setCookie("liveagent_ptid",t,!0)}},A=new function(){function t(){return window.localStorage?window.localStorage:window.sessionStorage}function e(){var t=document.createElement("div");return t.style.display="none",document.body.appendChild(t),t.id="liveagent_userdata_provider",t.addBehavior("#default#userData"),t.load("liveagent"),{getItem:function(e){return t.getAttribute(e)},setItem:function(e,n){t.setAttribute(e,n),t.save("liveagent")},removeItem:function(e){t.removeAttribute(e),t.save("liveagent")}}}function n(){i.setItem(o.SESSION_ID,w),i.setItem(o.PAGE_COUNT,"0"),i.setItem(o.SESSION_START,(new Date).getTime().toString())}var i,o={SESSION_ID:"liveAgentSid",PAGE_COUNT:"liveAgentPc",SESSION_START:"liveAgentStart",PAGE:"liveAgentPage_",PAGE_TIME:"liveAgentPageTime_"};t.isSupported=function(){try{if(window.localStorage||window.sessionStorage){var t=window.localStorage?window.localStorage:window.sessionStorage;return t.setItem("liveAgentTestKey","1"),t.removeItem("liveAgentTestKey"),!0}return!1}catch(t){return!1}},e.isSupported=function(){return document.createElement("div").addBehavior},i=t.isSupported()?t():e.isSupported()?e():function(){var t={};return{getItem:function(e){return t[e]},setItem:function(e,n){t[e]=n},removeItem:function(e){delete t[e]}}}(),this.init=function(){if(i.getItem(o.SESSION_ID)){if(i.getItem(o.SESSION_ID)!=w){i.removeItem(o.SESSION_START);for(var t=i.getItem(o.PAGE_COUNT),e=25>t?0:t-25;e<t;e++)i.removeItem(o.PAGE+e),i.removeItem(o.PAGE_TIME+e);n()}}else n();25<=(t=parseInt(i.getItem(o.PAGE_COUNT),10))&&(i.removeItem(o.PAGE+(t-25)),i.removeItem(o.PAGE_TIME+(t-25))),i.setItem(o.PAGE_COUNT,(t+1).toString()),i.setItem(o.PAGE+t.toString(),window.location.href),i.setItem(o.PAGE_TIME+t.toString(),(new Date).getTime())},this.getPageCount=function(){return parseInt(i.getItem(o.PAGE_COUNT),10)},this.getSessionStart=function(){return i.getItem(o.SESSION_START)},this.getPages=function(){for(var t=[],e=this.getPageCount(),n=25>e?0:e-25;n<e;n++)t.unshift({location:i.getItem(o.PAGE+n.toString()),time:((new Date).getTime()-parseInt(i.getItem(o.PAGE_TIME+n.toString()),10)).toString()});return t},this.getCurrentPage=function(){return i.getItem(o.PAGE+(this.getPageCount()-1).toString())},this.clear=function(){i.clear()}};h.TYPE={STANDARD:"STANDARD",INVITE:"INVITE",AGENT:"AGENT"},h.EVENT={BUTTON_AVAILABLE:"BUTTON_AVAILABLE",BUTTON_UNAVAILABLE:"BUTTON_UNAVAILABLE",BUTTON_ACCEPTED:"BUTTON_ACCEPTED",BUTTON_REJECTED:"BUTTON_REJECTED"},h.prototype.init=function(t,e){this.buttonId=t,this.type=e,this.onlineState=null,this.estimatedWaitTime=-1,this.trackers=[],this.language=this.prechat=this.endpoint=null},h.prototype.getType=function(){return this.type},h.prototype.getOnlineState=function(){return this.onlineState},h.prototype.setOnlineState=function(t){this.onlineState=t;for(var e=0;e<this.trackers.length;e++)this.trackers[e].setState(t)},h.prototype.getEstimatedWaitTime=function(){return this.estimatedWaitTime},h.prototype.setEstimatedWaitTime=function(t){this.estimatedWaitTime=t},h.prototype.addTracker=function(t){this.trackers.push(t)},h.prototype.setPrechat=function(t){this.prechat=t},h.prototype.setEndpoint=function(t){this.endpoint=t},h.prototype.getEndpoint=function(t){function e(){var e=k.contentServerUrl,n=k.urlPrefix;if(null==e)throw Error("You cannot call liveagent.startChat until the asynchronous call to liveagent.init has completed!");return k.contentServerUrl=f.addPrefixToURL(e,n,!0),e=this.endpoint,e=!f.isEmpty(e)&&-1<f.getDomainFromUrl(e).indexOf("force")?f.addPrefixToURL(e,n,!0):e,this.endpoint=e,e=(null!=this.endpoint?this.endpoint:k.contentServerUrl+k.chatPage)+"?language="+(this.language?this.language:""),f.isEmpty(n)||(e+="&proxy="+n+"&proxyKey="+k.prefixKey),e+="&org_id="+k.orgId,e+="&deployment_id="+k.deploymentId,(e+="&sid="+w)+"#"+t}var n=null==this.prechat?e.call(this):this.prechat+"?endpoint="+encodeURIComponent(e.call(this));return k.contentServerUrl+k.prechatHandler+"?endpoint="+encodeURIComponent(n)},h.prototype.setLanguage=function(t){this.language=t},h.prototype.startChat=function(t){return!!this.dispatchEvent(h.EVENT.BUTTON_ACCEPTED)&&(xa(this.buttonId,t),!0)},h.prototype.rejectChat=function(){return!!this.dispatchEvent(h.EVENT.BUTTON_REJECTED)},h.prototype.dispatchEvent=function(t){return!ga.hasOwnProperty(this.buttonId)||!1!==ga[this.buttonId].call(this,t)},t.prototype.init=function(t,e){this.buttonId=t,this.element=e},t.prototype.getId=function(){return this.buttonId},t.prototype.setState=function(t){return f.log("Setting state for button "+this.buttonId+" to "+(t?"online":"offline")),!!m[this.buttonId].dispatchEvent(t?h.EVENT.BUTTON_AVAILABLE:h.EVENT.BUTTON_UNAVAILABLE)},ka.prototype=new h,S.prototype=new h,S.prototype.startChat=function(t,e){if(this.dispatchEvent(h.EVENT.BUTTON_ACCEPTED)){var n=this.buttonId.split("_");return xa(n[1],t,n[0],e),!0}return!1},T.prototype=new t,T.prototype.setState=function(e){t.prototype.setState.call(this,e)&&(this.element.style.display=e?"":"none")},U.prototype=new t,U.prototype.setState=function(e){t.prototype.setState.call(this,e)&&(this.element.style.display=e?"none":"")};var ha=!1,F=null,ia={},G={};p.prototype=new h,p.RENDERER={Slide:{renderClass:I},Fade:{renderClass:J},Appear:{renderClass:L},Custom:{renderClass:D}},p.START_POSITION={TopLeft:{xPercent:0,xPosition:-1,xOffset:-1,yPercent:0,yPosition:-1,yOffset:-1},TopLeftTop:{xPercent:0,xPosition:0,xOffset:1,yPercent:0,yPosition:-1,yOffset:-1},Top:{xPercent:.5,xPosition:-.5,xOffset:0,yPercent:0,yPosition:-1,yOffset:-1},TopRightTop:{xPercent:1,xPosition:-1,xOffset:-1,yPercent:0,yPosition:-1,yOffset:-1},TopRight:{xPercent:1,xPosition:0,xOffset:1,yPercent:0,yPosition:-1,yOffset:-1},TopRightRight:{xPercent:1,xPosition:0,xOffset:1,yPercent:0,yPosition:0,yOffset:1},Right:{xPercent:1,xPosition:0,xOffset:1,yPercent:.5,yPosition:-.5,yOffset:0},BottomRightRight:{xPercent:1,xPosition:0,xOffset:1,yPercent:1,yPosition:-1,yOffset:-1},BottomRight:{xPercent:1,xPosition:0,xOffset:1,yPercent:1,yPosition:0,yOffset:1},BottomRightBottom:{xPercent:1,xPosition:-1,xOffset:-1,yPercent:1,yPosition:0,yOffset:1},Bottom:{xPercent:.5,xPosition:-.5,xOffset:0,yPercent:1,yPosition:0,yOffset:1},BottomLeftBottom:{xPercent:0,xPosition:0,xOffset:1,yPercent:1,yPosition:0,yOffset:1},BottomLeft:{xPercent:0,xPosition:-1,xOffset:-1,yPercent:1,yPosition:0,yOffset:1},BottomLeftLeft:{xPercent:0,xPosition:-1,xOffset:-1,yPercent:1,yPosition:-1,yOffset:-1},Left:{xPercent:0,xPosition:-1,xOffset:-1,yPercent:.5,yPosition:-.5,yOffset:0},TopLeftLeft:{xPercent:0,xPosition:-1,xOffset:-1,yPercent:0,yPosition:0,yOffset:1}},p.END_POSITION={TopLeft:{xPercent:0,xOffset:1,yPercent:0,yOffset:1},Top:{xPercent:.5,xOffset:0,yPercent:0,yOffset:1},TopRight:{xPercent:1,xOffset:-1,yPercent:0,yOffset:1},Left:{xPercent:0,xOffset:1,yPercent:.5,yOffset:0},Center:{xPercent:.5,xOffset:0,yPercent:.5,yOffset:0},Right:{xPercent:1,xOffset:-1,yPercent:.5,yOffset:0},BottomLeft:{xPercent:0,xOffset:1,yPercent:1,yOffset:-1},Bottom:{xPercent:.5,xOffset:0,yPercent:1,yOffset:-1},BottomRight:{xPercent:1,xOffset:-1,yPercent:1,yOffset:-1}},p.prototype.setRules=function(t,e){if(t&&e){for(var i in t){var o=t[i],r=null;switch(o.type){case n.TYPE.NUMBER_OF_PAGE_VIEWS:r=new M(o.order,this.buttonId,A.getPageCount(),o.operator,parseInt(o.value,10));break;case n.TYPE.URL_MATCH:r=new M(o.order,this.buttonId,A.getCurrentPage(),o.operator,o.value);break;case n.TYPE.SECONDS_ON_PAGE:r=new N(o.order,this.buttonId,(new Date).getTime(),o.operator,1e3*parseInt(o.value,10));break;case n.TYPE.SECONDS_ON_SITE:r=new N(o.order,this.buttonId,parseInt(A.getSessionStart(),10),o.operator,1e3*parseInt(o.value,10));break;case n.TYPE.CUSTOM_VARIABLE:r=new V(o.order,this.buttonId,o.name,o.operator,o.value),G.hasOwnProperty(o.name)||(G[o.name]=[]),G[o.name].push(this.buttonId)}null!=r&&this.addRule(r)}this.filterLogic=e,this.ruleTree=E(e)}},p.prototype.setOnlineState=function(t){t||null===this.inviteTimeout||(clearTimeout(this.inviteTimeout),this.inviteTimeout=null),t||null===this.autoRejectTimeout||(clearTimeout(this.autoRejectTimeout),this.autoRejectTimeout=null),h.prototype.setOnlineState.call(this,t)},p.prototype.isActive=function(){return this.active},p.prototype.setActive=function(t){this.active=t},p.prototype.addTracker=function(t){this.trackers=[],h.prototype.addTracker.call(this,t)},p.prototype.getTracker=function(){if(1!=this.trackers.length)throw Error("InviteButtons should have exactly 1 tracker");return this.trackers[0]},p.prototype.startChat=function(t){return!(!this.active||!h.prototype.startChat.call(this,t))&&(this.getTracker().accept(),!0)},p.prototype.rejectChat=function(){return!(!this.active||!h.prototype.rejectChat.call(this))&&(this.getTracker().reject(),!0)},p.prototype.trigger=function(){if(f.getCookie("liveagent_invite_rejected_"+this.buttonId))return!1;var t=!0;if(null!=this.ruleTree&&(f.logGroupStart("Invite "+this.buttonId+" Rule Evaluation"),f.log("Filter Logic: "+this.filterLogic),t=this.ruleTree.evaluate(this),f.logGroupEnd()),!t&&null!=this.inviteDelay){var e=this;this.inviteTimeout=window.setTimeout((function(){e.setOnlineState(!0)}),this.inviteDelay),this.inviteDelay=null}return t},p.prototype.addRule=function(t){this.rules[t.getId()]=t},p.prototype.getRule=function(t){return this.rules[t]},p.prototype.getInviteDelay=function(){return this.inviteDelay},p.prototype.setInviteDelay=function(t){f.log("Setting invite delay to: "+t),this.inviteDelay=t},p.prototype.setAutoRejectTimeout=function(t){this.autoRejectTimeout=t},z.prototype=new t,z.prototype.setState=function(e){e&&!ha&&u(this.buttonId).trigger()&&t.prototype.setState.call(this,!0)?(ha=!0,F=this.buttonId,this.renderer.render()):!e&&u(this.buttonId).isActive()&&t.prototype.setState.call(this,!1)&&(ha=!1,this.remove(!0))},z.prototype.renderFinish=function(){if(u(this.buttonId).setActive(!0),-1!=this.rejectTime){var t=this.buttonId;u(this.buttonId).setAutoRejectTimeout(window.setTimeout((function(){u(t).rejectChat()}),1e3*this.rejectTime))}this.renderer.renderFinish()},z.prototype.accept=function(){this.hasInviteAfterAccept||f.setCookie("liveagent_invite_rejected_"+this.buttonId,!0,!1),this.remove(!1)},z.prototype.reject=function(){this.hasInviteAfterReject||f.setCookie("liveagent_invite_rejected_"+this.buttonId,!0,!1),this.remove(!0)},z.prototype.remove=function(t){u(this.buttonId).setActive(!1),this.renderer.remove(t)},z.prototype.removeFinish=function(){this.renderer.remove(!1)},r.prototype.init=function(t,e,n,i){window.innerWidth?this.realWidth=window.innerWidth:document.documentElement&&document.documentElement.clientWidth?this.realWidth=document.documentElement.clientWidth:document.body&&(this.realWidth=document.body.clientWidth),window.innerHeight?this.realHeight=window.innerHeight:document.documentElement&&document.documentElement.clientHeight?this.realHeight=document.documentElement.clientHeight:document.body&&(this.realHeight=document.body.clientHeight),this.offset=25,this.buttonId=t,this.animationPrefix=f.getCssAnimation(e),this.element=e,this.element.style.position=null!==this.animationPrefix?"fixed":"absolute",this.element.style.left="-1000px",this.element.style.top="-1000px",this.element.style.zIndex="10000",this.element.style.display="",this.width=this.element.offsetWidth,this.height=this.element.offsetHeight,this.startPosition=n,this.endPosition=i},r.prototype.render=function(){this.element.style.display=""},r.prototype.renderFinish=function(){},r.prototype.remove=function(t){this.element.style.left="-1000px",this.element.style.top="-1000px"},r.prototype.addRenderListeners=function(){var t=this.buttonId,e="AnimationIteration",n="AnimationEnd";""==this.animationPrefix?(e=e.toLowerCase(),n=n.toLowerCase()):(e=this.animationPrefix+e,n=this.animationPrefix+n),f.addEventListener(this.element,e,(function(){C(t).renderFinish()})),f.addEventListener(this.element,n,(function(){C(t).removeFinish()}))},I.prototype=new r,I.prototype.render=function(){r.prototype.addRenderListeners.call(this);var t=this.width*this.startPosition.xPosition+this.offset*this.startPosition.xOffset,e=this.height*this.startPosition.yPosition+this.offset*this.startPosition.yOffset,n=this.width*this.endPosition.xPercent*-1+this.offset*this.endPosition.xOffset,i=this.height*this.endPosition.yPercent*-1+this.offset*this.endPosition.yOffset,o="";""!==this.animationPrefix&&(o="-"+this.animationPrefix+"-");var a=document.createElement("style");a.innerHTML="@"+o+"keyframes slide"+this.buttonId+"{from { margin-left: "+t+"px; margin-top: "+e+"px; left: "+100*this.startPosition.xPercent+"%; top: "+100*this.startPosition.yPercent+"%; }to { margin-left: "+n+"px; margin-top: "+i+"px; left: "+100*this.endPosition.xPercent+"%; top: "+100*this.endPosition.yPercent+"%; }}",document.getElementsByTagName("head")[0].appendChild(a),this.element.style[o+"animation-name"]="slide"+this.buttonId,this.element.style[o+"animation-duration"]="1s",this.element.style[o+"animation-iteration-count"]="2",this.element.style[o+"animation-direction"]="alternate",this.element.style[o+"animation-timing-function"]="ease-in-out",this.element.style.setProperty(o+"animation-name","slide"+this.buttonId,""),this.element.style.setProperty(o+"animation-duration","1s",""),this.element.style.setProperty(o+"animation-iteration-count","2",""),this.element.style.setProperty(o+"animation-direction","alternate",""),this.element.style.setProperty(o+"animation-timing-function","ease-in-out",""),r.prototype.render.call(this)},I.prototype.renderFinish=function(){var t="";""!==this.animationPrefix&&(t="-"+this.animationPrefix+"-"),this.element.style[t+"animation-play-state"]="paused",this.element.style.setProperty(t+"animation-play-state","paused","")},I.prototype.remove=function(t){var e="";""!==this.animationPrefix&&(e="-"+this.animationPrefix+"-"),t?(this.element.style[e+"animation-play-state"]="running",this.element.style.setProperty(e+"animation-play-state","running","")):(this.element.style[e+"animation-name"]="",this.element.style.setProperty(e+"animation-name","",""),r.prototype.remove.call(this,t))},J.prototype=new r,J.prototype.render=function(){r.prototype.addRenderListeners.call(this);var t="";""!==this.animationPrefix&&(t="-"+this.animationPrefix+"-");var e=document.createElement("style");e.innerHTML="@"+t+"keyframes fade"+this.buttonId+"{from { opacity: 0; }to { opacity: 1; }}",document.getElementsByTagName("head")[0].appendChild(e),this.element.style[t+"animation-name"]="fade"+this.buttonId,this.element.style[t+"animation-duration"]="1s",this.element.style[t+"animation-iteration-count"]="2",this.element.style[t+"animation-direction"]="alternate",this.element.style[t+"animation-timing-function"]="ease-in-out",this.element.style.setProperty(t+"animation-name","fade"+this.buttonId,""),this.element.style.setProperty(t+"animation-duration","1s",""),this.element.style.setProperty(t+"animation-iteration-count","2",""),this.element.style.setProperty(t+"animation-direction","alternate",""),this.element.style.setProperty(t+"animation-timing-function","ease-in-out",""),this.element.style.marginLeft=this.width*this.endPosition.xPercent*-1+this.offset*this.endPosition.xOffset+"px",this.element.style.left=100*this.endPosition.xPercent+"%",this.element.style.marginTop=this.height*this.endPosition.yPercent*-1+this.offset*this.endPosition.yOffset+"px",this.element.style.top=100*this.endPosition.yPercent+"%",r.prototype.render.call(this)},J.prototype.renderFinish=function(){var t="";""!==this.animationPrefix&&(t="-"+this.animationPrefix+"-"),this.element.style[t+"animation-play-state"]="paused",this.element.style.setProperty(t+"animation-play-state","paused","")},J.prototype.remove=function(t){var e="";""!==this.animationPrefix&&(e="-"+this.animationPrefix+"-"),t?(this.element.style[e+"animation-play-state"]="running",this.element.style.setProperty(e+"animation-play-state","running",""),this.element.style.opacity=0):(this.element.style[e+"animation-name"]="",this.element.style.setProperty(e+"animation-name","",""),r.prototype.remove.call(this,t))},L.prototype=new r,L.prototype.render=function(){this.element.style.marginLeft=this.width*this.endPosition.xPercent*-1+this.offset*this.endPosition.xOffset+"px",this.element.style.left=100*this.endPosition.xPercent+"%",this.element.style.marginTop=this.height*this.endPosition.yPercent*-1+this.offset*this.endPosition.yOffset+"px",this.element.style.top=100*this.endPosition.yPercent+"%",r.prototype.render.call(this),C(this.buttonId).renderFinish()},L.prototype.remove=function(t){t?C(this.buttonId).removeFinish():r.prototype.remove.call(this,t)},D.prototype=new r,D.prototype.render=function(){C(this.buttonId).renderFinish()},D.prototype.renderFinish=function(){},D.prototype.remove=function(t){t&&C(this.buttonId).removeFinish()},n.TYPE={NUMBER_OF_PAGE_VIEWS:"NUMBER_OF_PAGE_VIEWS",URL_MATCH:"URL_MATCH",SECONDS_ON_PAGE:"SECONDS_ON_PAGE",SECONDS_ON_SITE:"SECONDS_ON_SITE",CUSTOM_VARIABLE:"CUSTOM_VARIABLE"},n.OPERATOR={EQUALS:"EQUALS",NOT_EQUAL:"NOT_EQUAL",START_WITH:"START_WITH",CONTAINS:"CONTAINS",NOT_CONTAIN:"NOT_CONTAIN",LESS_THAN:"LESS_THAN",GREATER_THAN:"GREATER_THAN",LESS_OR_EQUAL:"LESS_OR_EQUAL",GREATER_OR_EQUAL:"GREATER_OR_EQUAL"},n.prototype.init=function(t,e,n,i,o){this.ruleId=t,this.buttonId=e,this.compareFrom=n,this.operator=i,this.compareTo=o},n.prototype.getId=function(){return this.ruleId},n.prototype.evaluate=function(t,e){switch(this.operator){case n.OPERATOR.EQUALS:return f.log("Evaluate: "+t+" == "+e),t==e;case n.OPERATOR.NOT_EQUAL:return f.log("Evaluate: "+t+" != "+e),t!=e;case n.OPERATOR.START_WITH:return f.log("Evaluate: "+t+" indexOf "+e+" == 0"),0==t.indexOf(e);case n.OPERATOR.CONTAINS:return f.log("Evaluate: "+t+" indexOf "+e+" != -1"),-1!=t.indexOf(e);case n.OPERATOR.NOT_CONTAIN:return f.log("Evaluate: "+t+" indexOf "+e+" == -1"),-1==t.indexOf(e);case n.OPERATOR.LESS_THAN:return f.log("Evaluate: "+parseFloat(t)+" < "+parseFloat(e)),parseFloat(t)<parseFloat(e);case n.OPERATOR.GREATER_THAN:return f.log("Evaluate: "+parseFloat(t)+" > "+parseFloat(e)),parseFloat(t)>parseFloat(e);case n.OPERATOR.LESS_OR_EQUAL:return f.log("Evaluate: "+parseFloat(t)+" <= "+parseFloat(e)),parseFloat(t)<=parseFloat(e);case n.OPERATOR.GREATER_OR_EQUAL:return f.log("Evaluate: "+parseFloat(t)+" >= "+parseFloat(e)),parseFloat(t)>=parseFloat(e)}},M.prototype=new n,M.prototype.evaluate=function(){return f.log("Evaluating StandardInviteRule"),n.prototype.evaluate.call(this,this.compareFrom,this.compareTo)},N.prototype=new n,N.prototype.evaluate=function(){f.log("Evaluating TimerInviteRule");var t=(new Date).getTime()-this.compareFrom,e=n.prototype.evaluate.call(this,t,this.compareTo);return!e&&t<=this.compareTo&&(t=this.compareTo-t,(null==u(this.buttonId).getInviteDelay()||t<u(this.buttonId).getInviteDelay())&&u(this.buttonId).setInviteDelay(t)),e},V.prototype=new n,V.prototype.evaluate=function(){return ia.hasOwnProperty(this.compareFrom)?(f.log("Evaluating CustomInviteRule"),n.prototype.evaluate.call(this,ia[this.compareFrom].toString(),this.compareTo)):(f.log("CustomInviteRule evaluation failed due to missing custom variable"),!1)};var ma=0;y.prototype.init=function(t,e){this.left=t,this.right=e},y.prototype.evaluate=function(t){return!1},Z.prototype=new y,Z.prototype.evaluate=function(t){return f.log("Evaluating Atom Node: "+this.ruleId),t.getRule(this.ruleId).evaluate()},W.prototype=new y,W.prototype.evaluate=function(t){return f.logGroupStart("Evaluating And Node"),t=this.left.evaluate(t)&&this.right.evaluate(t),f.logGroupEnd(),t},X.prototype=new y,X.prototype.evaluate=function(t){return f.logGroupStart("Evaluating Or Node"),t=this.left.evaluate(t)||this.right.evaluate(t),f.logGroupEnd(),t},Y.prototype=new y,Y.prototype.evaluate=function(t){return f.logGroupStart("Evaluating Not Node"),t=!this.left.evaluate(t),f.logGroupEnd(),t},na.prototype.toJSON=function(){return{label:this.getLabel(),value:this.getValue(),displayToAgent:this.getDisplayToAgent(),entityMaps:this.getMapper().getEntityMaps(),transcriptFields:this.getMapper().getTranscriptFields(),doKnowledgeSearch:this.getDoKnowledgeSearch()}},aa.prototype.map=function(t,e,n,i,o){void 0===n&&(n=!0),void 0===i&&(i=!0),void 0===o&&(o=!0),this.getEntityMaps().push(new oa(t,e,n,i,o))},aa.prototype.saveToTranscript=function(t){this.getTranscriptFields().push(t)},oa.prototype.toJSON=function(){return{entityName:this.getEntityName(),fieldName:this.getFieldName(),fastFill:this.getFastFill(),autoQuery:this.getAutoQuery(),exactMatch:this.getExactMatch()}};var H={};l._=H,H.handlePing=function(t){q.connection.handlePing(t)},H.error=function(t){t?f.log("Server Error: "+t):f.log("Server responded with an error."),ca()},H.warning=function(t){t?f.log("Server Warning: "+t):f.log("Server sent an anoymous warning.")},H.setNewPtid=function(t){v.setPermanentId(t)},H.clearStorage=function(){A.clear()},l.init=function(t,e,n,i,o){if("string"!=typeof t)throw Error("The url to init must be strings");if(!f.isOrganizationId(n))throw Error("Invalid OrganizationId Parameter Value: "+n);if(!f.isDeploymentId(e))throw Error("Invalid DeploymentId Parameter Value: "+e);void 0===i||i||l.disableOptionalCookies(),k.secureCookiesEnabled=void 0!==o&&o,k.url=t,k.deploymentId=e,k.orgId=n,f.log("System Initialized. Waiting for the DOM to be ready"),"complete"===document.readyState?setTimeout(O,1):document.addEventListener?(document.addEventListener("DOMContentLoaded",O,!1),window.addEventListener("load",O,!1)):window.attachEvent?window.attachEvent("onload",O):f.log("No available event model. Exiting.")},l.getSid=function(){return w},l.enableLogging=function(){R=!0},l.disableOptionalCookies=function(){k.optionalCookieEnabled=!1,f.setCookie("liveagent_vc","",!1),f.setCookie("liveagent_oref","",!1),f.setCookie("liveagent_ptid","",!1),f.setCookie("liveagent_chatted","",!1)},l.setLocation=function(t){},l.setChatWindowWidth=function(t){k.chatWindowWidth=t},l.setChatWindowHeight=function(t){k.chatWindowHeight=t},l.disconnect=function(){ca()},l.startChat=function(t,e,n){(e?K(t,e):m[t]).startChat("liveagent"+Math.round(1e5*Math.random())+(new Date).getTime(),n)},l.startChatWithWindow=function(t,e,n,i){(n?K(t,n):m[t]).startChat(e,i)},l.rejectChat=function(t){m[t].rejectChat()},l.showWhenOnline=function(t,e,n){if(q.connection.isRunning())throw Error("You cannot add a button after page initialization.");(t=n?K(t,n):la(t)).addTracker(new T(t.buttonId,e))},l.showWhenOffline=function(t,e,n){if(q.connection.isRunning())throw Error("You cannot add a button after page initialization.");(t=n?K(t,n):la(t)).addTracker(new U(t.buttonId,e))},l.addCustomDetail=function(t,e,n){if(q.connection.isRunning())throw Error("You cannot add a detail after page initialization.");if(void 0===t||void 0===e||null===t||null===e)throw Error("CustomDetail contains null value");var i=new na(t,e,n);ya.push(i);var o={map:function(t,e,n,r,a){if(null==t||null==e||null===n||null===r||null===a)throw Error("CustomDetail.map contains null value");return i.getMapper().map(t,e,n,r,a),o},saveToTranscript:function(t){if(null==t)throw Error("CustomDetail.saveToTranscript contains null value");return i.getMapper().saveToTranscript(t),o},doKnowledgeSearch:function(){return i.setDoKnowledgeSearch(),o}};return o},l.setName=function(t){if(q.connection.isRunning())throw Error("You cannot set the name after page initialization.");da=t},l.addButtonEventHandler=function(t,e){"function"==typeof e&&(ga[t]=e)},l.BUTTON_EVENT=h.EVENT,l.setCustomVariable=function(t,e){if(ia[t]=e,G.hasOwnProperty(t))for(var n=0;n<G[t].length;n++){var i=u(G[t][n]);i.getOnlineState()&&i.setOnlineState(!0)}},l.findOrCreate=function(t){if(q.connection.isRunning())throw Error("You cannot find or create after page initialization.");var e=new pa(t);za.push(e);var n={map:function(t,i,o,r,a){return e.getEntityMapper().map(t,i,o,r,a),n},saveToTranscript:function(t){return e.setSaveTranscript(t),n},showOnCreate:function(){return e.setShowOnCreate(!0),n},linkToEntity:function(t,i){return ja.hasOwnProperty(t)&&ja[t]==e.getEntityName()?(ea("Warning: Recursive links detected, skip link "+e.getEntityName()+" to "+t),n):(e.setLinkToEntityName(t),e.setLinkToEntityField(i),ja[e.getEntityName()]=t,n)}};return n},l.addURLPrefix=function(t){if(q.connection.isRunning())throw Error("You cannot set a URL Prefix after page initialization.");if("string"!=typeof t)throw Error("The parameter to addURLPrefix must be a string");k.url=f.addPrefixToURL(k.url,t,!0),k.urlPrefix=t},l.enableEstimatedWaitTime=function(){k.needEstimatedWaitTime=!0},l.getEstimatedWaitTime=function(t){return(t=m[t])?t.estimatedWaitTime:-1};var q={VisitorMessage:{ERROR:"Error",WARNING:"Warning"},SystemMessage:{ASYNC_RESULT:"AsyncResult",SWITCH_SERVER:"SwitchServer"}};a=null,b=!1,c=null,e=null,d={send:function(t,n){if(null!==c)d.onError.call(window,"Did not handle response before sending another message");else{void 0===n&&(n={});var i="Visitor",o="",r=!1;for(1<t.length?(i="System",o="MultiNoun",n.nouns="",r=!0):o=t[0].getName(),i=k.url+"/rest/"+i+"/"+o+".jsonp?",o=0;o<t.length;o++)for(var s in r&&(n.nouns+=t[o].getName()+","),n[t[o].getName()+".prefix"]="Visitor",t[o].getData())t[o].getData().hasOwnProperty(s)&&(n[t[o].getName()+"."+s]=t[o].getData()[s]);for(var l in r&&(n.nouns=n.nouns.substr(0,n.nouns.length-1)),n)n.hasOwnProperty(l)&&(i+=l+"="+n[l]+"&");i+="callback="+a,i+="&deployment_id="+k.deploymentId,i+="&org_id="+k.orgId,i+="&version=57",(r=document.createElement("script")).type="text/javascript",r.src=i,c=document.body.appendChild(r),e=window.setTimeout((function(){d.onError.call(window,"Server failed to respond.")}),k.pingTimeout)}},handlePing:function(t){e&&(clearTimeout(e),e=null),b=!0,t=t.messages;for(var n=0;n<t.length;n++)d.messageHandler.call(window,t[n].type,t[n].message);d.onSuccess.call(window),d.removePingScript()},messageHandler:function(t,e){},onSuccess:function(){},onError:function(t){},isRunning:function(){return b},setIsRunning:function(t){b=t},setCallback:function(t){a=t},removePingScript:function(){null!==c&&(document.body.removeChild(c),c=null)}},q.connection=d,q.Noun=function(t,e){this.getName=function(){return t},this.getData=function(){return e}},pa.prototype.toJSON=function(){return{entityName:this.getEntityName(),saveToTranscript:this.getSaveTranscript(),showOnCreate:this.getShowOnCreate(),linkToEntityName:this.getLinkToEntityName(),linkToEntityField:this.getLinkToEntityField(),entityFieldsMaps:this.getEntityMapper().getEntityFieldsMaps()}},qa.prototype.map=function(t,e,n,i,o){void 0===n&&(n=!0),void 0===i&&(i=!0),void 0===o&&(o=!0),this.getEntityFieldsMaps().push(new ra(t,e,n,i,o))},ra.prototype.toJSON=function(){return{fieldName:this.getFieldName(),label:this.getLabel(),doFind:this.getDoFind(),isExactMatch:this.getIsExactMatch(),doCreate:this.getDoCreate()}};var w=f.getCookie("liveagent_sid"),ba=f.getCookie("liveagent_chatted"),sa=!1,R=!1,m={},ya=[],za=[],da=null,ga={},P=null,ja={},Q=!1,k={url:null,deploymentId:null,orgId:null,pingRate:5e4,pingTimeout:5e3,chatWindowWidth:482,chatWindowHeight:450,contentServerUrl:null,chatPage:"/s/chat",prechatHandler:"/s/prechatVisitor",needEstimatedWaitTime:!1,optionalCookieEnabled:!0,secureCookiesEnabled:!1};q.connection.messageHandler=function(t,e){switch(t){case"VisitorId":e.sessionId&&(f.log("Received new session ID"),w=e.sessionId,f.setCookie("liveagent_sid",encodeURIComponent(w),!1),null!=v.getVisitCount()&&v.setVisitCount(v.getVisitCount()+1),v.getPermanentId()||v.setPermanentId(w));break;case"Settings":A.init(),f.log("Ping rate set to "+e.pingRate+"ms"),k.pingRate=e.pingRate,k.contentServerUrl=e.contentServerUrl,k.prefixKey=e.prefixKey;for(var n=0;n<e.buttons.length;n++)switch(e.buttons[n].type){case"ToAgent":case"Standard":var i=e.buttons[n],o=m[i.id];o&&wa(o,i);break;case"Invite":var r=null;null==(r=(i=e.buttons[n]).inviteImageUrl?Ca(i.id,i.inviteImageUrl,i.inviteImageWidth,i.inviteImageHeight):document.getElementById("liveagent_invite_button_"+i.id))?ea("Warning: Button "+i.id+" disabled because HTML element was not found"):((o=u(i.id)).addTracker(new z(i.id,r,i.inviteRenderer,i.inviteStartPosition,i.inviteEndPosition,i.hasInviteAfterAccept,i.hasInviteAfterReject,i.inviteRejectTime)),r=f.jsonDecode(i.inviteRules),o.setRules(r.rules,r.filter),wa(o,i))}break;case"Availability":for(n={},i=0;i<e.results.length;i++)(o=m[e.results[i].id])&&(n[e.results[i].id]={button:o,isAvailable:e.results[i].isAvailable,estimatedWaitTime:e.results[i].estimatedWaitTime});for(r in null!=F&&n.hasOwnProperty(F)&&(n[F].button.setOnlineState(n[F].isAvailable),delete n[F]),n)n.hasOwnProperty(r)&&(n[r].button.setOnlineState(n[r].isAvailable),n[r].button.setEstimatedWaitTime(n[r].estimatedWaitTime));break;case q.VisitorMessage.WARNING:ea(e.text);break;case q.VisitorMessage.ERROR:Aa(e.text),ca();break;case q.SystemMessage.SWITCH_SERVER:if("string"!=typeof(n=e.newUrl))throw Error("Trying to set invalid LiveAgent server url: "+n);k.url=n,f.log("Received updated LiveAgent server url: "+n+"! Consider updating this site's deployment code."),Q=!0}},q.connection.onSuccess=function(){va()},q.connection.onError=function(t){Aa(t),q.connection.removePingScript(),va()}}var a,b,c,e,d})();