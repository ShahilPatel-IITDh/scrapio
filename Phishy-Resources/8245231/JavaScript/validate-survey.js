var qp_validateSurvey=(function(){var requiredValidation=1;var matrixRowValidation=0;var matrixColumnValidation=1;var matrixRowAndColumnValidation=2;var sectionDiv;var npsPlusSectionDivSubTypeNps;var npsPlusSectionDivSubTypeTags;var npsPlusSectionDivSubTypeComment;var validatedSection;var questionType;var questionID;var firstQuestionID;var questionSubType;var validationErrorArray;var isRequestValidationEnabled;var canDisplayRequestValidationErrors;var matrixValidationType;var VALIDATE_CARD_SORTING_ATLEAST=2;var VALIDATE_CARD_SORTING_ATMOST=1;var VALIDATE_CARD_SORTING_EXACTLY=0;var VALIDATE_EXACTLY_PER_CATEGORY=3;var VALIDATE_ATMOST_PER_CATEGORY=4;var VALIDATE_ATLEAST_PER_CATEGORY=5;var CATEGORY_CUSTOM_VALIDATION=6;var COMPARISON_TYPE_EQUALS=2;var COMPARISON_TYPE_EQUALS_CASE_SENSITIVE=3;var COMPARISON_TYPE_CONTAINS=4;var COMPARISON_TYPE_CONTAINS_CASE_SENSITIVE=5;var COMPARISON_TYPE_DOESNOT_CONTAIN=6;var COMPARISON_TYPE_STARTS_WITH=7;var COMPARISON_TYPE_ENDS_WITH=8;var inputSeparator;var INPUT_ELEMENT_WITH_ALL_TYPE="input[type=text], input[type=email], input[type=number], input[type=tel], input[type=date]";function execute(sections,onContinueWithoutAnswering){resetAndHideErrors();validationErrorArray=[];canDisplayRequestValidationErrors=false;validateMinRequirementByQuestionType(sections);checkAndSetHiddenValueIfMobileForSBS();var minRequirementErrors=getMinimumRequirementsErrors();validateForcedResponseSections(sections);var forcedValidationErrors=getForcedValidationErrors();forcedValidationErrors=forcedValidationErrors.concat(minRequirementErrors);if(forcedValidationErrors.length&&forcedValidationErrors.length>0){displayValidation(forcedValidationErrors,true);if(question_type.isElectronicSignature(questionType)){postProcessElectronicSignatureValidation()}
return 1;}
canDisplayRequestValidationErrors=true;validateRequestResponseSections(sections);var requestValidationErrors=getRequestValidationErrors();if(requestValidationErrors.length&&requestValidationErrors.length>0){populateQuestionErrors(requestValidationErrors);displayRequestValidation(requestValidationErrors,onContinueWithoutAnswering);return 2;}
return 0;}
function checkAndSetHiddenValueIfMobileForSBS(){if($('div.matrix-sidebyside-question').length){$('[name="isMobile"]').val($('.matrix-sidebyside-question .table-wrapper').is(':hidden'));}}
function validateMinRequirementByQuestionType(sections){for(var i=0;i<sections.length;i++){setSectionDiv(sections[i]);validateMinRequirements();}}
function validateForcedResponseSections(sections){for(var i=0;i<sections.length;i++){setSectionDiv(sections[i]);validateAndAddEventToSection(!isRequestValidationEnabled);}}
function validateRequestResponseSections(sections){for(var i=0;i<sections.length;i++){setSectionDiv(sections[i]);validateAndAddEventToSection(isRequestValidationEnabled);}}
function validateAndAddEventToSection(canValidateSection){if(isSectionVisible()&&canValidateSection){validateSection();addLiveValidationEventToSection();}}
function validateMinRequirements(){if(isSectionVisible()){validateMinRequirementsForSection();}}
function executeOnUpdate(section){resetAndHideErrors();setSectionDiv(section);validateSection();var forcedValidationErrors=getForcedValidationErrors();if(forcedValidationErrors.length&&forcedValidationErrors.length>0){canDisplayRequestValidationErrors=false;displayValidation(forcedValidationErrors,false);return;}
var requestValidationErrors=getRequestValidationErrors();if(requestValidationErrors.length&&requestValidationErrors.length>0&&canDisplayRequestValidationErrors){populateQuestionErrors(requestValidationErrors);}}
function addLiveValidationEventToSection(){if(question_type.isUniChoice(questionType)){return single_select.addLiveValidationEvent();}
if(question_type.isNPS(questionType)){return nps.addLiveValidationEvent();}
if(question_type.isMultiChoice(questionType)&&multiChoice_type.isLookUpTable(questionSubType)){return multichoiceLookup.addLiveValidationEvent();}
if(question_type.isMultiChoice(questionType)){return multi_select.addLiveValidationEvent();}
if(question_type.isText(questionType)||question_type.isContactInfo(questionType)||question_type.isPanelRecruitment(questionType)){return text.addLiveValidationEvent();}
if(question_type.isMatrix(questionType)){return matrix.addLiveValidationEvent();}
if(question_type.isOldVanWestenDrop(questionType)){return oldVanWestenDrop.addLiveValidationEvent();}
if(question_type.isVanWestendorp(questionType)){return vanWestendorp.addLiveValidationEvent();}
if(question_type.isRankOrder(questionType)){return rankOrder.addLiveValidationEvent();}
if(question_type.isDate(questionType)){return date.addLiveValidationEvent();}
if(question_type.isConstantSum(questionType)){return constantSum.addLiveValidationEvent();}
if(question_type.isBudget(questionType)){return budget.addLiveValidationEvent();}
if(question_type.isHeatMap(questionType)){return heatMap.addLiveValidationEvent();}
if(question_type.isReferenceData(questionType)){return referenceData.addLiveValidationEvent();}
if(question_type.isSideBySideMatrix(questionType)){return sideBySideMatrix.addLiveValidationEvent();}
if(question_type.isHotSpot(questionType)){return hotSpot.addLiveValidationEvent();}
if(question_type.isHotSpotNew(questionType)){return hotSpotNew.addLiveValidationEvent();}
if(question_type.isMaxDiff(questionType)){maxDiff.addLiveValidationEvent();}
if(question_type.isUnichoiceLookup(questionType)){return unichoiceLookup.addLiveValidationEvent();}
if(question_type.isCustomNumericValidator(questionType)){return customNumericValidator.addLiveValidationEvent();}
if(question_type.isMultiTierLookup(questionType)){return multiTierLookup.addLiveValidationEvent();}
if(question_type.isStoreLocator(questionType)){}
if(question_type.isFileUpload(questionType)){return fileUpload.addLiveValidationEvent();}
if(question_type.isTubePulse(questionType)){return tubePulse.addLiveValidationEvent();}
if(question_type.isFlexMatrix(questionType)){return flexMatrix.addLiveValidationEvent();}
if(question_type.isNPSPlus(questionType)){return NpsPLus.addLiveValidationEvent();}
if(question_type.isCardSortingType(questionType)){return cardSorting.addLiveValidationEvent();}
if(question_type.isTextHighlighter(questionType)){return text_highlighter.addLiveValidationEvent();}
if(question_type.isCSAT(questionType)){return csat.addLiveValidationEvent();}
if(question_type.isGaborGranger(questionType)){return gabor_granger.addLiveValidationEvent();}}
function addEventToDynamicExplode(){if(sectionDiv.find('.dynamic-explode').length){var dynamicExplodeDiv=sectionDiv.find('.dynamic-explode');dynamicExplodeDiv.each(function(){addEventToElement($(this).find('.form-input'),'change');});}}
function addEventToOtherAndDynamicExplode(hasOther,hasDynamicExplode){var otherElement=sectionDiv.find('.other-input');if(otherElement.length>0&&hasOther){addEventToElement(otherElement,'change blur');}
if(hasDynamicExplode){addEventToDynamicExplode();}}
function validateCurrentSection(currentSection){for(var i=0;i<qp_sections.length;i++){if(qp_sections[i].firstQuestionID==currentSection||(isQuestionTypeIsNotUndefined()&&question_type.isNPSPlus(qp_sections[i].type))){executeOnUpdate(qp_sections[i]);break;}}}
function addEventToElement(eventElement,event){$(eventElement).on(event,function(){var currentSection=$(this).closest("div[id^='QuestionSection_']").attr('id').split('_')[1];validateCurrentSection(currentSection);});}
function addSliderEventToFlexMatrixElement(eventElement){$(eventElement).on("slidestop",function(event,ui){var textElement=$(this).parent().closest('tr').find('input');textElement.val(ui.value);var currentSection=$(this).closest("div[id^='QuestionSection_']").attr('id').split('_')[1];validateCurrentSection(currentSection);});}
function addSliderEventToElement(eventElement){$(eventElement).on("slidestop",function(event,ui){var textElement=$(this).find("input[type=hidden]");textElement.val(ui.value);var currentSection=$(this).closest("div[id^='QuestionSection_']").attr('id').split('_')[1];validateCurrentSection(currentSection);});}
function addSliderEventToConstantSumElement(eventElement){$(eventElement).on("slidestop",function(event,ui){var textElement=$("#s_"+$(this).attr('id').split('_')[1]);textElement.val(ui.value);var currentSection=$(this).closest("div[id^='QuestionSection_']").attr('id').split('_')[1];validateCurrentSection(currentSection);});}
var StringUtil={removeTextFromEnd:function(value,textToBeRemoved){if(value&&textToBeRemoved&&value.lastIndexOf(textToBeRemoved)==value.length-textToBeRemoved.length){value=value.replace(new RegExp(textToBeRemoved+'$'),'');}
return value;},isEmpty:function(value){return typeof value!='undefined'&&value.trim().length==0;},getLength:function(value){if(typeof value!='undefined'){return value.trim().length;}
return 0;},isNumeric:function(value){return /^-?\d+$/.test(value);}};function isSectionVisible(){var sectionVisibleValue=getSectionVisible().find('#V_QuestionSection_'+validatedSection.sectionID).val();return sectionVisibleValue==='visible';}
function getSectionVisible(){if(isQuestionTypeIsNotUndefined()&&question_type.isNPSPlus(questionType)){return npsPlusSectionDivSubTypeNps;}else{return sectionDiv;}}
function setSectionDiv(currentSection){validatedSection=currentSection;questionType=validatedSection.type;questionID=validatedSection.firstQuestionID;firstQuestionID=validatedSection.firstQuestionID;questionSubType=validatedSection.subType;setSection(validatedSection,questionType);isRequestValidationEnabled=validatedSection.requiredValidationType===requiredValidation;matrixValidationType=validatedSection.matrixValidationType?validatedSection.matrixValidationType:0;inputSeparator=validatedSection.inputSeparator;}
function setSection(validatedSection,questionType){if(isQuestionTypeIsNotUndefined()&&question_type.isNPSPlus(questionType)){npsPlusSectionDivSubTypeNps=$('#QuestionSection_'+validatedSection['columns'][0]['ID']);npsPlusSectionDivSubTypeTags=$('#QuestionSection_'+validatedSection['columns'][1]['ID']);npsPlusSectionDivSubTypeComment=$('#QuestionSection_'+validatedSection['columns'][2]['ID']);}else{sectionDiv=$('#QuestionSection_'+validatedSection.firstQuestionID);}}
function isQuestionTypeIsNotUndefined(){return typeof question_type!="undefined"&&typeof question_type!=undefined;}
function displayValidation(forcedValidationErrors,canScrollToError){populateQuestionErrors(forcedValidationErrors);scrollToErrorMessage(forcedValidationErrors,canScrollToError)}
function scrollToErrorMessage(forcedValidationErrors,canScrollToError){if(forcedValidationErrors.length>0){if(canScrollToError){scrollPageToError();}}}
function getMinimumRequirementsErrors(){var minRequirementsErrors=[];var counter=0;for(var i=0;i<validationErrorArray.length;i++){if(!('requestValidation'in validationErrorArray[i])){minRequirementsErrors[counter++]=validationErrorArray[i];}else if(!validationErrorArray[i].requestValidation){minRequirementsErrors[counter++]=validationErrorArray[i];}}
return minRequirementsErrors;}
function getForcedValidationErrors(){var forcedValidationErrors=[];var counter=0;for(var i=0;i<validationErrorArray.length;i++){if(!('requestValidation'in validationErrorArray[i])){forcedValidationErrors[counter++]=validationErrorArray[i];}else if(!validationErrorArray[i].requestValidation){forcedValidationErrors[counter++]=validationErrorArray[i];}}
return forcedValidationErrors;}
function getRequestValidationErrors(){var requestValidationErrors=[];var counter=0;for(var i=0;i<validationErrorArray.length;i++){if('requestValidation'in validationErrorArray[i]&&validationErrorArray[i].requestValidation){requestValidationErrors[counter++]=validationErrorArray[i];}}
return requestValidationErrors;}
function getTranslatedValidationMessage(messageKey,replacements){var message=translatedValidationMessages['systemValidations'][messageKey];message=replaceValues(message,replacements);return message;}
function displayRequestValidation(requestValidationErrors,onContinueWithoutAnswering){var messageKey=requestValidationErrors.length===1?'application.takesurvey.single.validation.error.message':'application.takesurvey.multiple.validation.errors.message';var isFromSaveAndContinue=$("input[name='SAVE_AND_CONTINUE']").length>0;qp_sectionDisplayScript.requestResponseFromUser(getTranslatedValidationMessage(messageKey,[requestValidationErrors.length]),onContinueWithoutAnswering,false,translatedValidationMessages['systemValidations']['application.takesurvey.request.validation.header'],isFromSaveAndContinue);if(!InteractiveMode.isFocusMode()){scrollToErrorMessage(requestValidationErrors,true);}}
function populateQuestionErrors(questionValidationErrors){for(var i=0;i<questionValidationErrors.length;i++){var validationError=questionValidationErrors[i];highlightErredInputTextAndTextArea(validationError.questionID);addErrorMessageToErrorSpans(validationError);}}
function addErrorMessageToErrorSpans(validationError){var message=getQuestionErrorMessage(validationError);if(validationError.messageKey==='application.takesurvey.mdm.required'){$('*[id*=errorSpan_'+validationError.questionID+']').each(function(i){$(this).html(message?message:validationError.messageKey);if(typeof message!='undefined'&&message!=''){$(this).removeClass('hidden vhidden');}});}else{$('#errorSpan_'+validationError.questionID).html(message?message:validationError.messageKey);if(typeof message!='undefined'&&message!=''){$('#errorSpan_'+validationError.questionID).removeClass('hidden vhidden');}}}
function getQuestionErrorMessage(validationError){var message=getCustomValidationErrorMessage(getCustomValidationQuestionID(validationError),validationError.messageKey,validationError.replacements);if(message===null||message===undefined){message=getTranslatedValidationMessage(validationError.messageKey,validationError.replacements);}
return message;}
function getCustomValidationErrorMessage(questionID,messageKey,replacements){var questionValidationErrorObj=translatedValidationMessages['customValidations'][questionID];if(questionValidationErrorObj){var message=questionValidationErrorObj[messageKey];if(message!==null||typeof message!=='undefined'){return replaceValues(message,replacements);}}
return null;}
function getCustomValidationQuestionID(validationError){if(validationError.messageKey==='application.takesurvey.validation.text.regex.validation.failure'||validationError.messageKey==='application.takesurvey.validation.contact.info.custom.field.regex.validation.failure'){return validationError.questionID;}
return validationError.firstQuestionID;}
function highlightErredInputTextAndTextArea(questionID){var $this=$('#errorSpan_'+questionID);function errorForMultiRowAnswerFields(){return $this.parent().is(".answer-options");}
if($this.length==1){if(errorForOtherInChoiceQuestion()){$this.parent().find('.other-input').addClass('error-line');}
else if(errorForMultiRowAnswerFields()){if(errorForPushToSocialDynamicExplode()){$this.parents('.answer-container').find('.answer-options.dynamic-explode:not(".hidden") .input-wrapper').addClass('error-line');}else{$this.parent().find('.input-wrapper').addClass('error-line');}}
else if(errorForMultiRowTextField()){$this.parent().find('.answer-container .answer-options .input-wrapper').addClass('error-line');}
else if(errorForSpecifRowOfQuestion()){$this.parent().find('.answer-options .input-wrapper').addClass('error-line');}
else if(errorForReferenceQuestion()){$this.parents('.answer-options:not(".hidden")').find('.input-wrapper').addClass('error-line');}
else if(dynamicExplodeExistForSection()){highlightDynamicExplodeText();}
else if(otherFieldForDropdownExists()){highlightOtherForDropdown();}
else if(errorForMatrixQuestion()){highlightDynamicExplodeTextForMatrix();}
else if(errorForTextSliderQuestion()){highlightDynamicExplodeText();}
else if(errorForMatrixDropdownDynamicExplode()){highlightDynamicExplodeForMatrixDropdown();}}
function errorForMatrixDropdownDynamicExplode(){return $this.closest('.answer-container.matrix-dropdown-question').find('.dynamic-explode').not('.hidden').length>0;}
function errorForTextSliderQuestion(){return $this.parent().is(".text-slider-question")&&$this.parent().find('.answer-options.dynamic-explode:not(".hidden")').length>0&&$this.parent().find('.answer-options.dynamic-explode:not(".hidden")').prop('value')!=undefined&&$this.parent().find('.answer-options.dynamic-explode:not(".hidden")').prop('value').trim().length===0;}
function errorForOtherInChoiceQuestion(){return $this.parent().is(".answer-options")&&$this.parent().is(".other-option")&&$this.parent().find('.other-input:not(".hidden")').length>0&&$this.parent().find('.other-input:not(".hidden")').prop('value')!=undefined&&$this.parent().find('.other-input:not(".hidden")').prop('value').trim().length===0;}
function highlightDynamicExplodeText(){if($this.parent().find('.answer-options.dynamic-explode:not(".hidden")').each(function(index,item){if($(item).find('.form-input').prop('value').trim().length===0){$(item).find('.form-input').parents('.input-wrapper').addClass("error-line");}}));}
function highlightOtherForDropdown(){if($this.parent().find('.answer-options.other-option:not(".hidden")').each(function(index,item){if($(item).find('.form-input').prop('value').trim().length===0){$(item).find('.form-input').parents('.input-wrapper').addClass("error-line");}}));}
function errorForPushToSocialDynamicExplode(){return $this.parents('.answer-container').is('.pushto-social-question.has-dynamic-explode-radio')&&$this.parents('.answer-container').find('.answer-options.dynamic-explode:not(".hidden") .input-wrapper').length>0&&$this.parents('.answer-container').find('.answer-options.dynamic-explode:not(".hidden") .input-wrapper .form-input[name^=de_]').prop('value').trim().length>0;}
function highlightDynamicExplodeTextForMatrix(){if($this.parents('.error-tr').prev().is("[id^=questionRow]")&&$this.parents('.answer-container').is('.matrix-spreadsheet-question')){$this.parents('.error-tr').prev().find('td .input-wrapper').each(function(index,item){if($(item).find('.form-input').prop('value').trim().length===0){$(item).addClass('error-line');}});}else if($this.parents('.error-tr').prev().find('.dynamic-explode').not('.hidden').length>0){$this.parents('.error-tr').prev().find('.dynamic-explode').not('.hidden').each(function(index,item){if($(item).find('.form-input').prop('value').trim().length===0){$(item).find('.input-wrapper').addClass('error-line');}});}}
function highlightDynamicExplodeForMatrixDropdown(){$this.closest('.answer-container.matrix-dropdown-question').find('.dynamic-explode').not('.hidden').each(function(index,item){if($(item).find('.form-input').val().trim().length===0){$(item).find('.input-wrapper').addClass('error-line');}});}
function dynamicExplodeExistForSection(){return $this.parent().is(".survey-question-wrapper")&&$this.parent().find('.answer-options').length>1&&$this.parent().find('.answer-options.dynamic-explode:not(".hidden")').length>0;}
function otherFieldForDropdownExists(){return $this.parent().is(".survey-question-wrapper")&&$this.parent().find('.answer-options').length>1&&$this.parent().find('.answer-options.other-option:not(".hidden")').length>0;}
function errorForSpecifRowOfQuestion(){return $this.parent().is(".survey-question-wrapper")&&$this.parent().find('.answer-options:not(".hidden")').length==1;}
function errorForReferenceQuestion(){return $this.parent().is(".referenceData")&&$this.parents('.answer-options:not(".hidden")').length==1;}
function errorForMultiRowTextField(){return $this.parent().is(".loop-wrapper");}
function errorForMatrixQuestion(){return $this.parent().is("td")&&$this.parent().parent().is("tr.error-tr");}}
function getScrollValue(){var questionWrapper=$($('[id^=errorSpan].error:not(.hidden,.vhidden)')[0]).parents('.survey-question-wrapper');if(typeof questionWrapper=='undefined'||questionWrapper.length==0){var questionWrapper=$($('.ajaxServiceResponse .error')[0]).parents('.survey-question-wrapper');return 0;}
if(!$('.survey-inside-wrapper').is('.has-interactive-mode')){return questionWrapper.offset().top;}else{return questionWrapper.offset().top
-(parseInt($(window).height())/2)
+questionWrapper.outerHeight()/2;}}
function scrollPageToError(){$('html, body').animate({scrollTop:getScrollValue()},500);}
var getSelectedValuesForNps=function(ID){var element=npsPlusSectionDivSubTypeNps.find("input[name='u_"+ID+"']");for(var i=0;i<element.length;i++){if(element[i].checked){return true;}}
return false};var NpsPLus={validate:function(){for(var i=0;i<validatedSection.columns.length;i++){var questionJSON=validatedSection.columns[i];removeErrorsByQuestionIDFromValidationArray(questionJSON.ID);this.ifNpsPlusHasErrors(questionJSON);this.ifNpsPlusTagsHasErrors(questionJSON);this.ifNpsPlusCommentBoxHasErrors(questionJSON);}},addLiveValidationEvent:function(){for(var i=0;i<validatedSection.columns.length;i++){var questionJSON=validatedSection.columns[i];this.addEventToNpsPlus(questionJSON);this.addEventToNpsPlusTags(questionJSON);this.addEventToNpsPlusCommentBox(questionJSON);}},addEventToNpsPlus:function(questionJSON){if(nps_plus.isNps(questionJSON.subType)){var eventElement="input[name='u_"+questionJSON.ID+"']";addEventToElement(eventElement,'change');}},addEventToNpsPlusCommentBox:function(questionJSON){if(nps_plus.isCommentBox(questionJSON.subType)){var eventElement=npsPlusSectionDivSubTypeComment.find(".answer-container").find("div[id=\"questionDiv"+questionJSON.ID+"\"]").find('textarea');addEventToElement(eventElement,'change');}},addEventToNpsPlusTags:function(questionJSON){if(nps_plus.isMultiSelect(questionJSON.subType)){addEventToElement(this.getEventForNpsPlusTags(questionJSON),'change');}},getEventForNpsPlusTags:function(questionJSON){var eventElement=npsPlusSectionDivSubTypeTags.find(".answer-container").find('input[type=\'radio\'][name^=\'u_'+questionJSON.ID+'\']');if(eventElement.length==0){eventElement=npsPlusSectionDivSubTypeTags.find(".answer-container").find('input[type=\'checkbox\'][name^=\'m_'+questionJSON.ID+'\']');}
return eventElement;},ifNpsPlusCommentBoxHasErrors:function(questionJSON){if(nps_plus.isCommentBox(questionJSON.subType)){removeErrorsByQuestionIDFromValidationArray(questionID+'_'+questionJSON.ID);var textArea=npsPlusSectionDivSubTypeComment.find(".answer-container").find("div[id=\"questionDiv"+questionJSON.ID+"\"]").find('textarea');if(textArea.length>0&&StringUtil.isEmpty(textArea.val())){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionJSON.ID,messageKey:'application.takesurvey.validation.text.required.failure',replacements:[],requestValidation:isRequestValidationEnabled});return true;}}
return false;},ifNpsPlusTagsHasErrors:function(questionJSON){if(nps_plus.isMultiSelect(questionJSON.subType)){var checkedElements=this.getCheckedElementsForNpsPlusTags(questionJSON);if(!checkedElements.length){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionJSON.ID,messageKey:'application.takesurvey.multi.select.none.selected',replacements:[],requestValidation:isRequestValidationEnabled});return true;}}
return false;},getCheckedElementsForNpsPlusTags:function(questionJSON){var checkedElements=npsPlusSectionDivSubTypeTags.find(".answer-container").find('input[type=\'radio\'][name^=\'u_'+questionJSON.ID+'\']:checked');if(checkedElements.length==0){checkedElements=npsPlusSectionDivSubTypeTags.find(".answer-container").find('input[type=\'checkbox\'][name^=\'m_'+questionJSON.ID+'\']:checked');}
return checkedElements;},ifNpsPlusHasErrors:function(questionJSON){if(nps_plus.isNps(questionJSON.subType)){var checkedElements=getSelectedValuesForNps(questionJSON.ID);if(!checkedElements){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionJSON.ID,messageKey:'application.takesurvey.nps.required',replacements:[],requestValidation:isRequestValidationEnabled});return true;}}
return false;}};var flexMatrix={validate:function(){for(var i=0;i<validatedSection.columns.length;i++){var questionJSON=validatedSection.columns[i];removeErrorsByQuestionIDFromValidationArray(questionID+'_'+questionJSON.ID);this.ifCommentBoxHasErrors(questionJSON);this.ifVerticalChoiceHasErrors(questionJSON);this.ifVerticalMultiSelectHasErrors(questionJSON);this.ifNumericInputHasErrors(questionJSON);this.ifRankOrderHasErrors(questionJSON);this.ifDropDownMenuHasErrors(questionJSON);this.ifRatingScaleHasErrors(questionJSON);this.ifNumericSliderHasErrors(questionJSON);}},addLiveValidationEvent:function(){for(var i=0;i<validatedSection.columns.length;i++){var questionJSON=validatedSection.columns[i];this.addEventToCommentBoxAndNumericInput(questionJSON);this.addEventToVerticalChoice(questionJSON);this.addEventToVerticalMultiSelect(questionJSON);this.addEventToRankOrder(questionJSON);this.addEventToDropDownMenu(questionJSON);this.addEventToRatingScale(questionJSON);this.addEventToNumericSlider(questionJSON);}},addEventToCommentBoxAndNumericInput:function(questionJSON){if(flex_matrix.isCommentBox(questionJSON.subType)||flex_matrix.isNumericInput(questionJSON.subType)){var textAreas=sectionDiv.find(".answer-container").find(INPUT_ELEMENT_WITH_ALL_TYPE+"[name^='t_']");$(textAreas).each(function(){addEventToElement($(this),'change');});}},addEventToVerticalChoice:function(questionJSON){if(flex_matrix.isVerticalChoice(questionJSON.subType)){var checkedElements=sectionDiv.find(".answer-container").find('input[type=\'radio\'][name^=\'u_\']');$(checkedElements).each(function(){addEventToElement($(this),'change');});}},addEventToVerticalMultiSelect:function(questionJSON){if(flex_matrix.isVerticalMultiSelect(questionJSON.subType)){var checkedElements=sectionDiv.find(".answer-container").find('input[type=\'checkbox\'][name^=\'m_\']');$(checkedElements).each(function(){addEventToElement($(this),'change');});}},addEventToRankOrder:function(questionJSON){if(flex_matrix.isRankOrder(questionJSON.subType)){var selectedBoxList=sectionDiv.find(".answer-container").find('select[name^=\'r_\']');$(selectedBoxList).each(function(){addEventToElement($(this),'change');});}},addEventToDropDownMenu:function(questionJSON){if(flex_matrix.isDropDownMenu(questionJSON.subType)){var selectedBoxList=sectionDiv.find(".answer-container").find('select[name^=\'u_\']');$(selectedBoxList).each(function(){addEventToElement($(this),'change');});}},addEventToRatingScale:function(questionJSON){if(flex_matrix.isRatingScale(questionJSON.subType)){var ratingScaleControlElementsTable=sectionDiv.find(".answer-container").find('.ratingScaleTable');for(var i=0;i<$(ratingScaleControlElementsTable).find("tr").length;i++){var tableRow=$(ratingScaleControlElementsTable).find("tr")[i];var checkedElements=$(tableRow).find('input[type=\'radio\'][name^=\'u_\']');$(checkedElements).each(function(){addEventToElement($(this),'change');});}}},addEventToNumericSlider:function(questionJSON){if(flex_matrix.isNumericSlider(questionJSON.subType)){var sliderElements=sectionDiv.find("div[id^=\"slide_\"]");$(sliderElements).each(function(){addSliderEventToFlexMatrixElement($(this),'change');});}},ifNumericSliderHasErrors:function(questionJSON){if(flex_matrix.isNumericSlider(questionJSON.subType)){var hiddenFieldList=sectionDiv.find(".answer-container").find('input[type=\'hidden\'][name^=\'t_\']');for(var i=0;i<hiddenFieldList.length;i++){var textValue=$(hiddenFieldList[i]).val().trim();if(textValue==0||textValue.length===0){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID+'_'+questionJSON.ID,messageKey:'application.takesurvey.flexmatrix.js.menu.all.required',replacements:[questionJSON.questionText],requestValidation:isRequestValidationEnabled});return true;}}}
return false;},ifRatingScaleHasErrors:function(questionJSON){if(flex_matrix.isRatingScale(questionJSON.subType)){var ratingScaleControlElementsTable=sectionDiv.find(".answer-container").find('.ratingScaleTable');for(var i=0;i<$(ratingScaleControlElementsTable).find("tr").length;i++){var tableRow=$(ratingScaleControlElementsTable).find("tr")[i];var checkedElements=$(tableRow).find('input[type=\'radio\'][name^=\'u_\']:checked');if(!checkedElements.length){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID+'_'+questionJSON.ID,messageKey:'application.takesurvey.flexmatrix.js.menu.all.required',replacements:[questionJSON.questionText],requestValidation:isRequestValidationEnabled});return true;}}}
return false;},ifDropDownMenuHasErrors:function(questionJSON){if(flex_matrix.isDropDownMenu(questionJSON.subType)){var selectedBoxList=sectionDiv.find(".answer-container").find('select[name^=\'u_\']');for(var i=0;i<selectedBoxList.length;i++){var selectedValue=$(selectedBoxList[i]).val();if(selectedValue==-1){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID+'_'+questionJSON.ID,messageKey:'application.takesurvey.flexmatrix.js.menu.all.required',replacements:[questionJSON.questionText],requestValidation:isRequestValidationEnabled});return true;}}}
return false;},ifRankOrderHasErrors:function(questionJSON){if(flex_matrix.isRankOrder(questionJSON.subType)){var selectedBoxList=sectionDiv.find(".answer-container").find('[data-id="'+questionJSON.ID+'"] select[name^=\'r_\']');for(var i=0;i<selectedBoxList.length;i++){var selectedValue=$(selectedBoxList[i]).val();if(selectedValue===""){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID+'_'+questionJSON.ID,messageKey:'application.takesurvey.validation.js.rank.failure',replacements:[questionJSON.questionText],requestValidation:isRequestValidationEnabled});return true;}}
return this.isRankOrderDuplicateAnswer(questionJSON);}
return false;},isRankOrderDuplicateAnswer:function(questionJSON){var selectElements=sectionDiv.find(".answer-container").find('[data-id="'+questionJSON.ID+'"] select[name^=\'r_\']');for(var i=0;i<$(selectElements).length-1;i++){var selectBox=$(selectElements);for(var j=i+1;j<$(selectElements).length;j++){if(!StringUtil.isEmpty($(selectBox[i]).val().trim())){if($(selectBox[i]).val().trim()==$(selectBox[j]).val().trim()){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID+'_'+questionJSON.ID,messageKey:"application.takesurvey.validation.js.rank.duplicate.failure",replacements:[questionJSON.questionText]});return true;}}}}
return false;},ifNumericInputHasErrors:function(questionJSON){if(flex_matrix.isNumericInput(questionJSON.subType)){var textBoxList=sectionDiv.find(".answer-container").find('input[type=\'text\'][name^=\'t_\'][inputmode=\'numeric\']');for(var i=0;i<textBoxList.length;i++){var textValue=$(textBoxList[i]).val().trim();if(textValue.length===0){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID+'_'+questionJSON.ID,messageKey:'application.takesurvey.flexmatrix.js.numeric.required',replacements:[questionJSON.questionText],requestValidation:isRequestValidationEnabled});return true;}
if(isNaN(textValue)){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID+'_'+questionJSON.ID,messageKey:'application.takesurvey.flexmatrix.js.numeric.failure',replacements:[questionJSON.questionText],requestValidation:isRequestValidationEnabled});return true;}}}
return false;},ifVerticalChoiceHasErrors:function(questionJSON){if(flex_matrix.isVerticalChoice(questionJSON.subType)){var checkedElements=sectionDiv.find(".answer-container").find('input[type=\'radio\'][name^=\'u_'+questionJSON.ID+'\']:checked');if(!checkedElements.length){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID+'_'+questionJSON.ID,messageKey:'application.takesurvey.flexmatrix.js.vertical.required',replacements:[questionJSON.questionText],requestValidation:isRequestValidationEnabled});return true;}}
return false;},ifVerticalMultiSelectHasErrors:function(questionJSON){if(flex_matrix.isVerticalMultiSelect(questionJSON.subType)){var checkedElements=sectionDiv.find(".answer-container").find('input[type=\'checkbox\'][name^=\'m_'+questionJSON.ID+'\']:checked');if(!checkedElements.length){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID+'_'+questionJSON.ID,messageKey:'application.takesurvey.flexmatrix.js.vertical.required',replacements:[questionJSON.questionText],requestValidation:isRequestValidationEnabled});return true;}}
return false;},ifCommentBoxHasErrors:function(questionJSON){if(flex_matrix.isCommentBox(questionJSON.subType)){var textAreas=sectionDiv.find(".answer-container").find("input[type='text'][name^='t_']:not(.number-input)");for(var i=0;i<textAreas.length;i++){var textValue=$(textAreas[i]).val().trim();if(textValue.length===0){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID+'_'+questionJSON.ID,messageKey:'application.takesurvey.flexmatrix.js.text.required',replacements:[questionJSON.questionText],requestValidation:isRequestValidationEnabled});return true;}}}
return false;}};var conjoint={validate:function(){removeErrorsByQuestionIDFromValidationArray(questionID);var checkedElements=sectionDiv.find(".answer-container").find('input[type=\'radio\'][name^=\'task_\']:checked');if(!checkedElements.length){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.cbc.choose.required',replacements:[]});}}};var tubePulse={validate:function(){removeErrorsByQuestionIDFromValidationArray(questionID);var textAreaValue=sectionDiv.find(".answer-container").find("textarea[name^='p_']").val();if(StringUtil.isEmpty(textAreaValue)){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.tubepulse.required',replacements:[],requestValidation:isRequestValidationEnabled});}},addLiveValidationEvent:function(){var eventElement=sectionDiv.find('.answer-container').find("div[id^=slide_]");addSliderEventToElement(eventElement);}};var fileUpload={validate:function(){removeErrorsByQuestionIDFromValidationArray(questionID);var hiddenFieldValue=this.getHiddenInputValue();if(StringUtil.isEmpty(hiddenFieldValue)){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:this.getValidationMessage(),replacements:[],requestValidation:isRequestValidationEnabled});}},addLiveValidationEvent:function(){if(file_upload.isLiveCast(questionSubType)){var eventElement=sectionDiv.find(".answer-container").find("input[type=hidden][name^='lc_"+questionID+"']");addEventToElement(eventElement,'change');}else if(file_upload.isSignature(questionSubType)){var eventElement=sectionDiv.find(".answer-container").find('canvas');addEventToElement(eventElement,'click');}else{var eventElement=sectionDiv.find(".answer-container").find("input[type=hidden][name^='l_"+questionID+"']");addEventToElement(eventElement,'change');}},getHiddenInputValue:function(){if(file_upload.isSignature(questionSubType)){return sectionDiv.find(".answer-container").find("input[type=hidden][name^='signImage']").val();}else if(file_upload.isLiveCast(questionSubType)){return sectionDiv.find(".answer-container").find("input[type=hidden][name^='lc_']").val();}
return sectionDiv.find(".answer-container").find("input[type=hidden][name^='l_']").val();},getValidationMessage:function(){if(file_upload.isSignature(questionSubType)){return "application.takesurvey.signature.required";}else if(file_upload.isLiveCast(questionSubType)){return "application.takesurvey.livecast.required";}
return "application.takesurvey.fileupload.required";}};var maxDiff={handleAnchorMultiSelectValidation:function(){var choiceID=validatedSection.columns[2];var checkedElements=sectionDiv.find(".answer-container.multiple-choice-question").find('input[type=\'checkbox\'][name$=\''+choiceID+'\']:checked');if(!checkedElements.length){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.hs.response.required',replacements:[],requestValidation:isRequestValidationEnabled});return;}},handleAnchorRankOrderValidation:function(){var answerCount=sectionDiv.find('.answer-container.rank-order-question').find('select').length;if(this.getTotalAnswerGivenCountForRankOrder()!=answerCount){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.validation.rank.ranktopn.failure',replacements:[answerCount],requestValidation:isRequestValidationEnabled});return;}},handleAnchorConstantSumValidation:function(){var textBoxes=sectionDiv.find('.answer-container.constant-sum-question').find(INPUT_ELEMENT_WITH_ALL_TYPE);var inValidated=false;var total=0;$(textBoxes).each(function(){var textValue=$(this).val().trim();if(!StringUtil.isNumeric(textValue)){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.validation.csum.row.empty',replacements:[],requestValidation:isRequestValidationEnabled});inValidated=true;return;}else{total+=parseFloat(textValue);}});if(!inValidated&&total<100.00){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.validation.csum.total.failure',replacements:[100],requestValidation:isRequestValidationEnabled});return;}},handleAnchoredMaxDIffValidation:function(){var ANCHOR_MAX_DIFF_MULTI_SELECT=0;var ANCHOR_MAX_DIFF_RANK_ORDER=1;var anchorAnswerSelectionType=$(".answer-container").find('#anchorAnswerSelection').val();if(anchorAnswerSelectionType==ANCHOR_MAX_DIFF_MULTI_SELECT){this.handleAnchorMultiSelectValidation();}else if(anchorAnswerSelectionType==ANCHOR_MAX_DIFF_RANK_ORDER){this.handleAnchorRankOrderValidation();}else{this.handleAnchorConstantSumValidation();}},handleMaxDiffValidation:function(){for(var i=0;i<validatedSection.columns.length;i++){var choiceID=validatedSection.columns[i];var checkedElements=sectionDiv.find(".answer-container").find('input[type=\'radio\'][name$=\''+choiceID+'\']:checked');if(i<2&&!checkedElements.length){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.hs.response.required',replacements:[],requestValidation:isRequestValidationEnabled});return;}}},validate:function(){removeErrorsByQuestionIDFromValidationArray(questionID);if($(".answer-container").find('#anchoringDone').length>0){this.handleAnchoredMaxDIffValidation();}else{this.handleMaxDiffValidation();}},addLiveValidationEvent:function(){for(var i=0;i<validatedSection.columns.length;i++){var choiceID=validatedSection.columns[i];var inputElement=sectionDiv.find(".answer-container").find("input[name$='"+choiceID+"']");addEventToElement(inputElement,'change');}},getTotalAnswerGivenCountForRankOrder:function(){var answerPresentCounter=0;var selectElements=sectionDiv.find('.answer-container').find('select');$(selectElements).each(function(){if($(this).val().trim().length!==0&&$(this).val().trim()!=="0"){answerPresentCounter++;}});return answerPresentCounter;}};var hotSpot={validate:function(){removeErrorsByQuestionIDFromValidationArray(questionID);var hiddenFields=sectionDiv.find(".answer-container").find("input[type=hidden][id$='ID1']");$(hiddenFields).each(function(){var textValue=$(this).val().trim();if(textValue==0||textValue.length===0){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.hs.response.required',replacements:[],requestValidation:isRequestValidationEnabled});}});},addLiveValidationEvent:function(){var eventElements=sectionDiv.find(".answer-container").find(".hot-spot-like, .hot-spot-unlike, .hot-spot-reset");$(eventElements).each(function(){addEventToElement($(this),'click');});}};var hotSpotNew={validate:function(){removeErrorsByQuestionIDFromValidationArray(questionID);var answerPresentCounter=this.getTotalAnswerGivenCount(validatedSection.subType);var totalAnswers=validatedSection.answerCount;if(answerPresentCounter===0&&isRequestValidationEnabled){this.addErrorForRequestValidation();}
if(this.isValidateExactly()&&!isRequestValidationEnabled&&this.validateExactly(answerPresentCounter,validatedSection.numberOfAnswersLimit,totalAnswers)){return;}
if(this.isValidateAtMost()&&!isRequestValidationEnabled&&this.validateAtMost(answerPresentCounter,validatedSection.numberOfAnswersLimit,totalAnswers)){return;}
if(this.isValidateAtLeast()&&!isRequestValidationEnabled&&this.validateAtLeast(answerPresentCounter,validatedSection.numberOfAnswersLimit,totalAnswers)){return;}},addLiveValidationEvent:function(){var eventElements=sectionDiv.find(".answer-container");$(eventElements).each(function(){addEventToElement($(this),'click');});},addErrorForRequestValidation:function(){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.hs.response.required',replacements:[validatedSection.numberOfAnswersLimit],requestValidation:isRequestValidationEnabled});},getTotalAnswerGivenCount:function(questionSubType){var answerPresentCounter=0;var hiddenInputs;if(hot_Spot.isNewSubType(questionSubType)){hiddenInputs=sectionDiv.find(".answer-container").find("input[type=hidden][id^='answerOrdNum_']");}else{hiddenInputs=sectionDiv.find(".answer-container").find("input[type=hidden][id$='ID1']");}
$(hiddenInputs).each(function(){if($(this).val()!='0'){answerPresentCounter++;}});return answerPresentCounter;},isValidationOn:function(){return this.isValidateExactly()||this.isValidateAtMost()||this.isValidateAtLeast();},validateAtLeast:function(answerPresentCounter,atLeastAnswerSize,totalAnswers){if(answerPresentCounter<atLeastAnswerSize){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:this.getValidateAtLeastErrorMessageKey(),replacements:[atLeastAnswerSize,totalAnswers,answerPresentCounter]});return true;}
return false;},getValidateAtLeastErrorMessageKey:function(){return 'application.takesurvey.hotspot.atleast.validation.failure';},validateAtMost:function(answerPresentCounter,atTheMostAnswerSize,totalAnswers){if(answerPresentCounter>atTheMostAnswerSize){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:this.getValidateAtMostErrorMessageKey(),replacements:[atTheMostAnswerSize,totalAnswers,answerPresentCounter]});return true;}
return false;},getValidateAtMostErrorMessageKey:function(){return 'application.takesurvey.hotspot.atmost.validation.failure';},validateExactly:function(answerPresentCounter,exactAnswerSize,totalAnswers){if(answerPresentCounter!==exactAnswerSize){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:this.getValidateExactlyErrorMessageKey(),replacements:[exactAnswerSize,totalAnswers,answerPresentCounter]});return true;}
return false;},getValidateExactlyErrorMessageKey:function(){return 'application.takesurvey.hotspot.exact.validation.failure';},isValidateExactly:function(){return validatedSection.validationType===0;},isValidateAtMost:function(){return validatedSection.validationType===1;},isValidateAtLeast:function(){return validatedSection.validationType===2;}};var sideBySideMatrix={validate:function(){for(var i=0;i<validatedSection.rows.length;i++){var rowQuestion=validatedSection.rows[i];questionID=rowQuestion.ID;removeErrorsByQuestionIDFromValidationArray(questionID);this.validateColumns(rowQuestion);}},addLiveValidationEvent:function(){var eventElement;for(var i=0;i<validatedSection.rows.length;i++){var question=validatedSection.rows[i];questionID=question.ID;for(var j=0;j<question.columns.length;j++){var columnQuestion=question.columns[j];if(side_by_side_matrix_type.isDropDown(questionSubType)||validatedSection.isMobileView){var selectRow=sectionDiv.find('div[id=\'questionRow'+columnQuestion.ID+'\']');var dropdownElements=$(selectRow).find('select[name=u_'+columnQuestion.ID+']');for(var k=0;k<dropdownElements.length;k++){if($(dropdownElements[k]).is(':visible')){eventElement=dropdownElements[k];}}}else if(side_by_side_matrix_type.isRadio(questionSubType)||side_by_side_matrix_type.isDivideByAttribute(questionSubType)){eventElement="input[name='u_"+columnQuestion.ID+"']";}
addEventToElement(eventElement,'change');}}},validateColumns:function(rowQuestion){for(var i=0;i<rowQuestion.columns.length;i++){var columnQuestion=rowQuestion.columns[i];if($(".table-wrapper").is(':hidden')||isRenderedInMobileView(validatedSection)){if(this.validateIfDropDownOrMobile(columnQuestion)){break;}}else{if(this.validateIfRadio(columnQuestion)){break;}
if(this.validateIfDropDownOrMobile(columnQuestion)){break;}}}},validateIfDropDownOrMobile:function(columnQuestion){if(side_by_side_matrix_type.isDropDown(questionSubType)||isRenderedInMobileView(validatedSection)||$(".table-wrapper").is(':hidden')){var self=this;var selectRow=sectionDiv.find('div[id=\'questionRow'+columnQuestion.ID+'\']');var questionDropdowns=$(selectRow).find('select[name=u_'+columnQuestion.ID+']');var selectedValue=-1;questionDropdowns.each(function(i){if($(this).is(':visible')){selectedValue=$(this).val();}});if(selectedValue==-1){self.setValidationMessage();return true;}
return false;}},validateIfRadio:function(columnQuestion){if(side_by_side_matrix_type.isRadio(questionSubType)||side_by_side_matrix_type.isDivideByAttribute(questionSubType)){var self=this;var radioRow=sectionDiv.find('tr[id=\'questionRow'+columnQuestion.ID+'\']');var checkedElements=$(radioRow).find('input[type=\'radio\']:checked');if(!checkedElements.length){self.setValidationMessage();return true;}
return false;}},setValidationMessage:function(){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.mdm.required',replacements:[],requestValidation:isRequestValidationEnabled});}};var heatMap={validate:function(){removeErrorsByQuestionIDFromValidationArray(questionID);var hiddenFields=sectionDiv.find(".answer-container").find("input[type=hidden]");var total=0;var ishighLightClickOn=sectionDiv.find(".high-light-click").length>0;var totalInput=4;if(ishighLightClickOn){totalInput=2;}
$(hiddenFields).each(function(){var textValue=$(this).val().trim();if(textValue.length>0){total++;}});if(total===0&&isRequestValidationEnabled){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.hm.required',replacements:[1],requestValidation:isRequestValidationEnabled});}
if((total/totalInput)<validatedSection.minVal&&!isRequestValidationEnabled){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.hm.required',replacements:[validatedSection.minVal],});}},addLiveValidationEvent:function(){var eventElement=sectionDiv.find('a.photo-tagger-deleteLink');addEventToElement(eventElement,'click');eventElement=sectionDiv.find('div#cordVal');addEventToElement(eventElement,'click');}};var budget={validate:function(){for(var i=0;i<validatedSection.rows.length;i++){var question=validatedSection.rows[i];questionID=question.ID;removeErrorsByQuestionIDFromValidationArray(questionID);var textElement=sectionDiv.find("div[id=\"questionDiv"+questionID+"\"]").find("input[type=hidden]");if(StringUtil.isEmpty(textElement.val())){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.validation.text.required.failure',replacements:[],requestValidation:isRequestValidationEnabled});}}},addLiveValidationEvent:function(){for(var i=0;i<validatedSection.rows.length;i++){var question=validatedSection.rows[i];questionID=question.ID;var containerElement=sectionDiv.find("div[id=\"questionDiv"+questionID+"\"]");addSliderEventToElement(containerElement);}}};function addErorrToValidatiionArrayForTotal(total){if(total===0||total>validatedSection.max||total<validatedSection.max){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.validation.csum.total.failure',replacements:[validatedSection.max],requestValidation:isRequestValidationEnabled});}}
var constantSum={validate:function(){if(this.isNoSumSetWithNoValidation()){return;}
removeErrorsByQuestionIDFromValidationArray(questionID);Number.isInteger=Number.isInteger||function(value){return typeof value==="number"&&isFinite(value)&&Math.floor(value)===value;};var textBoxes=sectionDiv.find('.answer-container').find(INPUT_ELEMENT_WITH_ALL_TYPE);var inValidated=false;var total=0;var isSingleValuePresent=false;$(textBoxes).each(function(){var textValue=$(this).val().trim();var isNoSumBlankValue=textValue.length==0&&validatedSection.customValidatorValue==1;if(isNoSumBlankValue){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.validation.csum.row.empty',replacements:[],requestValidation:isRequestValidationEnabled});inValidated=true;return false;}
if(textValue.length!=0){isSingleValuePresent=true;if(!isNaN(textValue)&&!validatedSection.allowWholeNumber){var floatValue=parseFloat(textValue);if(floatValue>=0){total+=parseFloat(textValue);}else{addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.validation.csum.value.negative.failure',replacements:[],requestValidation:isRequestValidationEnabled});inValidated=true;return false;}}else if(!isNaN(textValue)&&Number.isInteger(Number(textValue))){var intValue=parseInt(textValue,10);if(intValue>=0){total+=intValue;}else{addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.validation.csum.value.negative.failure',replacements:[],requestValidation:isRequestValidationEnabled});inValidated=true;return false;}}else{addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.validation.csum.wholenumber.failure',replacements:[],requestValidation:isRequestValidationEnabled});inValidated=true;return false;}}});if(!inValidated&&validatedSection.customValidatorValue!=1){if(this.isBlankDataWithoutRequiredValidation(isSingleValuePresent)){return;}
addErorrToValidatiionArrayForTotal(total);}},isNoSumSetWithNoValidation:function(){return validatedSection.requiredValidationType==0&&validatedSection.customValidatorValue==1;},isBlankDataWithoutRequiredValidation:function(isSingleValuePresent){return!validatedSection.required&&!isSingleValuePresent;},addLiveValidationEvent:function(){var textBoxes=sectionDiv.find('.answer-container').find(INPUT_ELEMENT_WITH_ALL_TYPE);$(textBoxes).each(function(){addEventToElement($(this),'change');});var sliderDiv=sectionDiv.find('.answer-container').find("div[id^=slider_]");$(sliderDiv).each(function(){addSliderEventToConstantSumElement($(this));});}};var staticContent={validate:function(){removeErrorsByQuestionIDFromValidationArray(questionID);if(static_content_type.isTermsCheckbox(questionSubType)){var checkedElement=sectionDiv.find('#iagree:checked');if(!checkedElement.length){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.textonly.terms.required',replacements:[]});}}}};var rankOrder={validate:function(){removeErrorsByQuestionIDFromValidationArray(questionID);if(validatedSection.validationType>-1){var answerPresentCounter=this.getTotalAnswerGivenCount();if(answerPresentCounter===0&&isRequestValidationEnabled){this.addErrorForRequestValidation(validatedSection.numberOfAnswersLimit,answerPresentCounter);}
if(this.isValidateExactly()&&!isRequestValidationEnabled&&this.validateExactly(answerPresentCounter,validatedSection.numberOfAnswersLimit)){return;}else if(this.isValidateAtMost()&&!isRequestValidationEnabled&&this.validateAtMost(answerPresentCounter,validatedSection.numberOfAnswersLimit)){return;}else if(this.isValidateAtLeast()&&!isRequestValidationEnabled&&this.validateAtLeast(answerPresentCounter,validatedSection.numberOfAnswersLimit)){return;}
if(this.isValidationOn()&&sectionDiv.find('.dynamic-explode:not(".hidden")').length>0&&hasValidationErrorForDynamicExplodeForRankOrder()){}}
this.isDuplicateAnswer();},addLiveValidationEvent:function(){var selectElements=sectionDiv.find('.answer-container').find('input[type=hidden], select');$(selectElements).each(function(){addEventToElement($(this),'change');});},isValidationOn:function(){return this.isValidateExactly()||this.isValidateAtMost()||this.isValidateAtLeast();},addErrorForRequestValidation:function(atTheMostAnswerSize,answerPresentCounter){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:this.getRequestValidationErrorMessageKey(),replacements:[atTheMostAnswerSize,answerPresentCounter],requestValidation:isRequestValidationEnabled});},getRequestValidationErrorMessageKey:function(){if(rank_order_type.isDropDown(validatedSection.subType)){return 'application.takesurvey.validation.rank.ranktopn.failure';}else{return 'application.takesurvey.dragndrop.atmost.validation.failure';}},getTotalAnswerGivenCount:function(){var answerPresentCounter=0;var selectElements=sectionDiv.find('.answer-container').find('input[type=hidden], select');$(selectElements).each(function(){if($(this).val().trim().length!==0&&$(this).val().trim()!=="0"){answerPresentCounter++;}});return answerPresentCounter;},isDuplicateAnswer:function(){var selectElements=sectionDiv.find('.answer-container').find('input[type=hidden], select');for(var i=0;i<$(selectElements).length-1;i++){var selectBox=$(selectElements);for(var j=i+1;j<$(selectElements).length;j++){if(!StringUtil.isEmpty($(selectBox[i]).val().trim())&&$(selectBox[i]).val().trim()!=="0"){if($(selectBox[i]).val().trim()==$(selectBox[j]).val().trim()){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:"application.takesurvey.validation.rank.duplicate.failure",replacements:[],requestValidation:isRequestValidationEnabled});return;}}}}},validateAtLeast:function(answerPresentCounter,atLeastAnswerSize){if(answerPresentCounter<atLeastAnswerSize){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:this.getValidateAtLeastErrorMessageKey(),replacements:[atLeastAnswerSize,answerPresentCounter]});return true;}
return false;},getValidateAtLeastErrorMessageKey:function(){if(rank_order_type.isDropDown(validatedSection.subType)){return 'application.takesurvey.validation.rank.atleast.failure';}else{return 'application.takesurvey.dragndrop.atleast.validation.failure';}},validateAtMost:function(answerPresentCounter,atTheMostAnswerSize){if(answerPresentCounter===0){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:this.getValidateAtMostErrorMessageKey(),replacements:[atTheMostAnswerSize,answerPresentCounter]});return true;}
if(answerPresentCounter>atTheMostAnswerSize){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:this.getValidateAtMostErrorMessageKey(),replacements:[atTheMostAnswerSize,answerPresentCounter]});return true;}
return false;},getValidateAtMostErrorMessageKey:function(){if(rank_order_type.isDropDown(validatedSection.subType)){return 'application.takesurvey.validation.rank.asmanyas.failure';}else{return 'application.takesurvey.dragndrop.atmost.validation.failure';}},validateExactly:function(answerPresentCounter,exactAnswerSize){if(answerPresentCounter!==exactAnswerSize){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:this.getValidateExactlyErrorMessageKey(),replacements:[exactAnswerSize,answerPresentCounter]});return true;}
return false;},getValidateExactlyErrorMessageKey:function(){if(rank_order_type.isDropDown(validatedSection.subType)){return 'application.takesurvey.validation.rank.ranktopn.failure';}else{return 'application.takesurvey.dragndrop.exact.validation.failure';}},isValidateExactly:function(){if(validatedSection.validationType===0){return true;}
return false;},isValidateAtMost:function(){if(validatedSection.validationType===1){return true;}
return false;},isValidateAtLeast:function(){if(validatedSection.validationType===2){return true;}
return false;}};var date={validate:function(){removeErrorsByQuestionIDFromValidationArray(questionID);var selectedValue=this.getSelectedValue();if(StringUtil.isEmpty(selectedValue)||selectedValue.indexOf('-1')>=0){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:this.getValidationErrorMessage(),replacements:[],requestValidation:isRequestValidationEnabled});return;}
if(!isRequestValidationEnabled&&validatedSection.dateTimeValidationType>-1&&(date_type.isCalendar(questionSubType)||validatedSection.isDateApplicable)){var selectedDate=this.getFormattedDateFromString(selectedValue,validatedSection.dateFormat,validatedSection.languageCode);switch(validatedSection.dateTimeValidationType){case 0:this.validateDateGreaterThan(selectedDate);return;case 1:this.validateDateGreaterThanEquals(selectedDate);return;case 2:this.validateDateLessThan(selectedDate);return;case 3:this.validateDateLessThanEquals(selectedDate);return;case 4:case 5:this.validateDateRange(selectedDate);return;}}
this.validateDateFormat(selectedValue);},addLiveValidationEvent:function(){if(date_type.isCalendar(questionSubType)){var eventElement=sectionDiv.find('input[type="text"][name^=dt_cal].form-input.hasDatepicker');addEventToElement(eventElement,'change');}else{var dayDropDown=sectionDiv.find('select[name^=dt_day_]');addEventToElement(dayDropDown,'change');var monthDropDown=sectionDiv.find('select[name^=dt_month_]');addEventToElement(monthDropDown,'change');var yearDropDown=sectionDiv.find('select[name^=dt_year_]');addEventToElement(yearDropDown,'change');var hrDropDown=sectionDiv.find('select[name^=dt_hr_]');addEventToElement(hrDropDown,'change');var minDropDown=sectionDiv.find('select[name^=dt_min_]');addEventToElement(minDropDown,'change');var amPmValue=sectionDiv.find('select[name^=dt_ampm_]');addEventToElement(amPmValue,'change');}},getSelectedValue:function(){if(date_type.isCalendar(questionSubType)){return sectionDiv.find('input[type="text"][name^=dt_cal].form-input.hasDatepicker').prop('value');}
return this.computeDateTimeSelectedValue();},computeDateTimeSelectedValue:function(){var dayValue=sectionDiv.find('select[name^=dt_day_]').val();var monthValue=sectionDiv.find('select[name^=dt_month_]').val();var yearValue=sectionDiv.find('select[name^=dt_year_]').val();var selectedValue="";if(validatedSection.dateFormat.split(' ').length>0&&'MM/DD/YYYY'===validatedSection.dateFormat.split(' ')[0]){selectedValue=monthValue+"/"+dayValue+"/"+yearValue;}else if(validatedSection.dateFormat.split(' ').length>0&&'MM/YYYY'===validatedSection.dateFormat.split(' ')[0]){selectedValue=monthValue+"/"+yearValue;}else if(validatedSection.dateFormat.split(' ').length>0&&'YYYY'===validatedSection.dateFormat.split(' ')[0]){selectedValue=yearValue;}else{selectedValue=dayValue+"/"+monthValue+"/"+yearValue;}
if(validatedSection.isTimeApplicable){var hrValue=sectionDiv.find('select[name^=dt_hr_]').val();var minValue=sectionDiv.find('select[name^=dt_min_]').val();selectedValue+=" "+hrValue+":"+minValue;if(!validatedSection.is24Hours){var amPmValue=sectionDiv.find('select[name^=dt_ampm_]').val();selectedValue+=" "+amPmValue;}}
return selectedValue;},validateDateFormat:function(selectedValue){var parsedDate=this.getFormattedDateFromString(selectedValue,validatedSection.dateFormat,validatedSection.languageCode);if(!parsedDate.isValid()){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:this.getFormatValidationErrorMessage(),replacements:[],requestValidation:isRequestValidationEnabled});}
if(parsedDate.year()<validatedSection.minYear||parsedDate.year()>validatedSection.maxYear){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:"application.takesurvey.year.in.range",replacements:[validatedSection.minYear,validatedSection.maxYear],requestValidation:isRequestValidationEnabled});}},getFormattedDateFromString:function(selectedValue,dateFormat,languageCode){if(languageCode&&date_type.isCalendar(questionSubType)){return moment(selectedValue,dateFormat,languageCode,true);}
return moment(selectedValue,dateFormat,true);},getFormattedValidationDate:function(date,dateFormat){return moment(this.getFormattedDateFromString(date,"MM/DD/YYYY")).format(dateFormat);},getValidationErrorMessage:function(){if(date_type.isCalendar(questionSubType)){return 'application.takesurvey.calendar.required';}
return 'application.takesurvey.date.required';},getFormatValidationErrorMessage:function(){if(date_type.isCalendar(questionSubType)){return 'application.takesurvey.calendar.required';}
return 'application.takesurvey.datetime.numberofdaysinmonth.error';},validateDateGreaterThan:function(selectedDate){var startDate=validatedSection.dateType===0?new Date().toLocaleDateString('en-US',{month:'2-digit',day:'2-digit',year:'numeric',}):validatedSection.dateTimeValidationStartDate;if(moment(selectedDate).isSameOrBefore(this.getFormattedDateFromString(startDate,"MM/DD/YYYY"),'day')){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.date.greater.than',replacements:[this.getFormattedValidationDate(startDate,"LL")],requestValidation:isRequestValidationEnabled});}},validateDateGreaterThanEquals:function(selectedDate){var startDate=validatedSection.dateType===0?new Date().toLocaleDateString('en-US',{month:'2-digit',day:'2-digit',year:'numeric',}):validatedSection.dateTimeValidationStartDate;if(moment(selectedDate).isBefore(this.getFormattedDateFromString(startDate,"MM/DD/YYYY"),'day')){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.date.greater.than.equals',replacements:[this.getFormattedValidationDate(startDate,"LL")],requestValidation:isRequestValidationEnabled});}},validateDateLessThan:function(selectedDate){var endDate=validatedSection.dateType===0?new Date().toLocaleDateString('en-US',{month:'2-digit',day:'2-digit',year:'numeric',}):validatedSection.dateTimeValidationEndDate;if(moment(selectedDate).isSameOrAfter(this.getFormattedDateFromString(endDate,"MM/DD/YYYY"),'day')){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.date.less.than',replacements:[this.getFormattedValidationDate(endDate,"LL")],requestValidation:isRequestValidationEnabled});}},validateDateLessThanEquals:function(selectedDate){var endDate=validatedSection.dateType===0?new Date().toLocaleDateString('en-US',{month:'2-digit',day:'2-digit',year:'numeric',}):validatedSection.dateTimeValidationEndDate;if(moment(selectedDate).isAfter(this.getFormattedDateFromString(endDate,"MM/DD/YYYY"),'day')){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.date.less.than.equals',replacements:[this.getFormattedValidationDate(endDate,"LL")],requestValidation:isRequestValidationEnabled});}},validateDateRange:function(selectedDate){var startDay=new Date();startDay.setDate(startDay.getDate()-validatedSection.daysWithin);var endDay=new Date();endDay.setDate(endDay.getDate()+validatedSection.daysWithin);var startDateFormattedString=validatedSection.dateType===0?startDay.toLocaleDateString('en-US',{month:'2-digit',day:'2-digit',year:'numeric'}):validatedSection.dateTimeValidationStartDate;var endDateFormattedString=validatedSection.dateType===0?endDay.toLocaleDateString('en-US',{month:'2-digit',day:'2-digit',year:'numeric'}):validatedSection.dateTimeValidationEndDate;if(!(moment(selectedDate).isBetween(this.getFormattedDateFromString(startDateFormattedString,"MM/DD/YYYY"),this.getFormattedDateFromString(endDateFormattedString,"MM/DD/YYYY"),'day','[]'))){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.date.in.range',replacements:[this.getFormattedValidationDate(startDateFormattedString,"LL"),this.getFormattedValidationDate(endDateFormattedString,"LL")],requestValidation:isRequestValidationEnabled});}}};var oldVanWestenDrop={validate:function(){for(var i=0;i<validatedSection.rows.length;i++){var question=validatedSection.rows[i];questionSubType=question.subType;questionID=question.ID;removeErrorsByQuestionIDFromValidationArray(questionID);var radioElement=sectionDiv.find("div[id=\"questionDiv"+question.ID+"\"]").find("input[type=radio]");if(StringUtil.isEmpty(radioElement.val())){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.unichoice.required',replacements:[],requestValidation:isRequestValidationEnabled});}}},addLiveValidationEvent:function(){if(question_type.isOldVanWestenDrop(questionType)){for(var i=0;i<validatedSection.rows.length;i++){var question=validatedSection.rows[i];questionID=question.ID;var eventElement=sectionDiv.find("div[id=\"questionDiv"+questionID+"\"]").find("input[type=radio]");addEventToElement(eventElement,'change');}}}};var vanWestendorp={validateRequired:function(inputElement){if(StringUtil.isEmpty(inputElement.val())){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.validation.vanwestendorp.required.failure',replacements:[],requestValidation:false});return true;}
return false;},validateNumericInput:function(inputElement){if(this.isErrorInValidation(inputElement)){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:this.getValidationMessage(inputElement),replacements:[],requestValidation:false});return true;}
return false;},getValidationMessage:function(inputElement){if(StringUtil.isEmpty(inputElement.val())){return 'application.takesurvey.validation.text.numeric.failure';}
if(this.isValidInputForDotInputSeparator(inputElement.val())){return 'application.takesurvey.validation.text.input.separator.dot.failure';}
if(this.isValidCommaInputSeparator(inputElement.val())){return 'application.takesurvey.validation.text.input.separator.comma.failure';}},isErrorInValidation:function(inputElement){return StringUtil.isEmpty(inputElement.val())||(this.validateInputSeparator(inputElement.val()));},validateInputSeparator:function(inputElement){if(this.isInputSeparatorDot()){return this.isValidInputForDotInputSeparator(inputElement);}
if(this.isInputSeparatorComma()){return this.isValidCommaInputSeparator(inputElement);}
return false;},isValidInputForDotInputSeparator:function(inputElement){var numericInputValidateRegexForDot=/^\d*[,\d]+\.?\d*$/;if(this.isInputSeparatorDot()&&!numericInputValidateRegexForDot.test(inputElement)){return true;}
return false;},isValidCommaInputSeparator:function(inputElement){var numericInputValidateRegexForComma=/^\d*[.\d]+\,?\d*$/;if(this.isInputSeparatorComma()&&!numericInputValidateRegexForComma.test(inputElement)){return true;}
return false;},isInputSeparatorDot:function(){return validatedSection.inputSeparator===0;},isInputSeparatorComma:function(){return validatedSection.inputSeparator===1;},validateNumericInputInRange:function(inputElement){if(this.isErrorInRangeValidation(inputElement)){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.validation.text.numeric.range.failure',replacements:[validatedSection.minValue,validatedSection.maxValue],requestValidation:false});return true;}},isErrorInRangeValidation:function(inputElement){return!StringUtil.isEmpty(inputElement.val())&&(this.replaceInputSeparator(inputElement.val())>validatedSection.maxValue||this.replaceInputSeparator(inputElement.val())<validatedSection.minValue)},replaceInputSeparator:function(inputElement){if(this.isInputSeparatorComma()){inputElement=inputElement.replace('.','');inputElement=inputElement.replace(',','.');return Number(inputElement);}
if(this.isInputSeparatorDot()){inputElement=inputElement.replace(',','');return Number(inputElement);}},isAllZeroInput:function(inputValues){for(var i=0;i<inputValues.length;++i){if(inputValues[i]!==0){return false;}}
return true;},populateInputValuesArray:function(inputValues){for(var j=0;j<validatedSection.rows.length;j++){var answerID=validatedSection.rows[j].answerID;inputValues[j]=vanWestendorp.replaceInputSeparator(vanWestendorp.getInputValue(answerID).val());}},validate:function(){if(isRequestValidationEnabled){this.validateAllZeroInputs();return;}
for(var index=0;index<validatedSection.rows.length;index++){var question=validatedSection.rows[index];questionSubType=question.subType;questionID=question.ID;var answerID=question.answerID;removeErrorsByQuestionIDFromValidationArray(questionID);var inputElement=this.getInputValue(answerID);if(this.isValidateMinimumRequirement()){this.validateMinimumRequirement(index,inputElement,question.priceCategory);continue;}
if(this.validateRequired(inputElement)){continue;}
if(this.validateNumericInput(inputElement)){continue;}
if(this.validateNumericInputInRange(inputElement)){continue;}
if(this.validateCategoryWiseInput(index,question.priceCategory)){continue;}}},validateAllZeroInputs:function(){var inputValues=[];this.populateInputValuesArray(inputValues);for(var index=0;index<validatedSection.rows.length;index++){var question=validatedSection.rows[index];questionID=question.ID;removeErrorsByQuestionIDFromValidationArray(questionID);if(this.isAllZeroInput(inputValues)){this.validateRequiredForAllZeroInput();}}},validateRequiredForAllZeroInput:function(){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.validation.vanwestendorp.required.failure',replacements:[],requestValidation:true});return true;},addLiveValidationEvent:function(){for(var i=0;i<validatedSection.rows.length;i++){var question=validatedSection.rows[i];questionID=question.ID;var answerID=question.answerID;var eventElement=this.getInputValue(answerID);addEventToElement(eventElement,'change');}},removeErrorsFromValidationArrayForAllZeroInputs:function(inputValues){if(this.isAllZeroInput(inputValues)){removeErrorsByQuestionIDFromValidationArray(questionID);}},validateNumericInputs:function(inputElement,questionIndex,priceCategory){return this.validateNumericInput(inputElement)||this.validateNumericInputInRange(inputElement)||this.validateCategoryWiseInput(questionIndex,priceCategory);},isInputNotEmptyAndValid:function(inputElement,questionIndex,priceCategory){return!StringUtil.isEmpty(inputElement.val())&&this.validateNumericInputs(inputElement,questionIndex,priceCategory);},validateMinimumRequirement:function(questionIndex,inputElement,priceCategory){var inputValues=[];this.populateInputValuesArray(inputValues);this.removeErrorsFromValidationArrayForAllZeroInputs(inputValues);if(!this.isAllZeroInput(inputValues)){if(this.isInputNotEmptyAndValid(inputElement,questionIndex,priceCategory)){return;}else{this.validateRequired(inputElement);}}},isValidateMinimumRequirement:function(){return validatedSection.validationType===-1;},getInputValue:function(answerID){return sectionDiv.find("input[name=\"t_"+answerID+"\"]");},validateTooExpensiveInputValue:function(inputValues,indexOfQuestionToBeCompared){if(inputValues[indexOfQuestionToBeCompared]<=inputValues[1]||inputValues[indexOfQuestionToBeCompared]<=inputValues[2]||inputValues[indexOfQuestionToBeCompared]<=inputValues[3]){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.validation.vanwestendorp.too.expensive.input.failure',replacements:[],requestValidation:false});}},validateExpensiveNumericInputValue:function(inputValues,indexOfQuestionToBeCompared,priceCategory){if(inputValues[indexOfQuestionToBeCompared]>=inputValues[0]||inputValues[indexOfQuestionToBeCompared]<=inputValues[2]||inputValues[indexOfQuestionToBeCompared]<=inputValues[3]){var replacementArgs=this.getReplacementArgs(priceCategory);addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.validation.vanwestendorp.expensive.input.failure',replacements:[replacementArgs.optionIndex1,replacementArgs.optionIndex2,replacementArgs.optionIndex3],requestValidation:false});}},validateCheapInputValue:function(inputValues,indexOfQuestionToBeCompared,priceCategory){if(inputValues[indexOfQuestionToBeCompared]>=inputValues[0]||inputValues[indexOfQuestionToBeCompared]>=inputValues[1]||inputValues[indexOfQuestionToBeCompared]<=inputValues[3]){var replacementArgs=this.getReplacementArgs(priceCategory);addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.validation.vanwestendorp.cheap.input.failure',replacements:[replacementArgs.optionIndex1,replacementArgs.optionIndex2,replacementArgs.optionIndex3],requestValidation:false});}},validateTooCheapNumericInputValue:function(inputValues,indexOfQuestionToBeCompared){if(inputValues[indexOfQuestionToBeCompared]>=inputValues[0]||inputValues[indexOfQuestionToBeCompared]>=inputValues[1]||inputValues[indexOfQuestionToBeCompared]>=inputValues[2]){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.validation.vanwestendorp.too.cheap.input.failure',replacements:[],requestValidation:false});}},validateCategoryWiseInput:function(indexOfQuestionToBeCompared,priceCategory){var inputValues=[];for(var j=0;j<validatedSection.rows.length;j++){var answerID=validatedSection.rows[j].answerID;inputValues[j]=this.replaceInputSeparator(this.getInputValue(answerID).val());}
switch(indexOfQuestionToBeCompared){case 0:this.validateTooExpensiveInputValue(inputValues,indexOfQuestionToBeCompared);return true;case 1:this.validateExpensiveNumericInputValue(inputValues,indexOfQuestionToBeCompared,priceCategory);return true;case 2:this.validateCheapInputValue(inputValues,indexOfQuestionToBeCompared,priceCategory);return true;case 3:this.validateTooCheapNumericInputValue(inputValues,indexOfQuestionToBeCompared);return true;}},getReplacementArgs:function(category){if((!validatedSection.positiveToNegativeOrder&&category===2)||(validatedSection.positiveToNegativeOrder&&category===3)){return{optionIndex1:3,optionIndex2:4,optionIndex3:1};}else{return{optionIndex1:1,optionIndex2:2,optionIndex3:4};}}};var referenceData={validate:function(){questionID=validatedSection.firstQuestionID;removeErrorsByQuestionIDFromValidationArray(questionID);isRequired=validatedSection.required;var textElement=this.getElement();this.validateAjaxValidation(textElement,isRequired);},addLiveValidationEvent:function(){var textElement=sectionDiv.find(INPUT_ELEMENT_WITH_ALL_TYPE);addEventToElement(textElement,'change');},validateAjaxValidation:function(textElement,isRequired){var textValue=textElement.prop('value');if(!isRequired&&textValue.trim().length===0){return false;}
if(this.getAJAXValidationMessageContainer().length==1){var html=this.getAJAXValidationMessageContainer().html();if(StringUtil.isEmpty(html)){this.pushValidationErrorForReferenceData();textElement.prop('value','');return true;}
if(html.indexOf("Error ")>-1){this.pushInvalidValidationErrorForReferenceData();return true;}}
return false;},pushValidationErrorForReferenceData:function(messageKey){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.referencedata.required',replacements:[],requestValidation:isRequestValidationEnabled});},pushInvalidValidationErrorForReferenceData:function(messageKey){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.zipcode.invalid',replacements:[],requestValidation:isRequestValidationEnabled});},getAJAXValidationMessageContainer:function(){return sectionDiv.find('.ajaxServiceResponse')},getElement:function(){return sectionDiv.find(INPUT_ELEMENT_WITH_ALL_TYPE)}};var matrix={validate:function(){if(matrixValidationType==matrixRowValidation||matrixValidationType==matrixRowAndColumnValidation){this.validateRow();}
if(matrixValidationType==matrixColumnValidation||matrixValidationType==matrixRowAndColumnValidation){this.validateColumn();}},validateRow:function(){for(var i=0;i<validatedSection.rows.length;i++){var firstQuestion=validatedSection.rows[0];var question=validatedSection.rows[i];questionSubType=question.subType;questionID=question.ID;removeErrorsByQuestionIDFromValidationArray(questionID);this.removeRowValidationClass(questionID);this.validateIfSingleSelect(question,matrixValidationType,firstQuestion);this.validateIfMultiSelect(question,matrixValidationType,firstQuestion);this.validateIfText(question,validatedSection.customValidation);this.validateIfDropDown(question);this.validateIfSelectList(question);this.validateIfNumericSlider(question);this.validateIfTextSlider(question);this.validateIfStarRating();this.validateIfVideoRating();}},validateColumn:function(){questionID=validatedSection.rows[0].ID;removeErrorsByQuestionIDFromValidationArray('question_'+questionID);this.removeColumnValidationClass();this.validateColumnIfSingleSelect(validatedSection.rows[0],matrixValidationType);this.validateColumnIfMultiSelect(validatedSection.rows[0],matrixValidationType);},addLiveValidationEvent:function(){for(var i=0;i<validatedSection.rows.length;i++){var question=validatedSection.rows[i];var questionID=question.ID;this.addEventToSingleSelect(questionID);this.addEventToMultiSelect(questionID);this.addEventToDropDownAndImageRating(questionID);this.addEventToSelectList(questionID);this.addEventToTextBox(questionID);this.addEventToNumericSlider(questionID);this.addEventToTextSlider(questionID);this.addEventToStarRatingAndPushToSocial(questionID);this.addEventToVideoRating(questionID);}},addEventToSingleSelect:function(questionID){if(matrix_type.isSingleSelect(questionSubType)){var eventElement="input[name='u_"+questionID+"']";addEventToElement(eventElement,'change');addEventToDynamicExplode();}},addEventToMultiSelect:function(questionID){if(matrix_type.isMultiSelect(questionSubType)){var eventElement="input[name='m_"+questionID+"']";addEventToElement(eventElement,'change');addEventToDynamicExplode();}},addEventToDropDownAndImageRating:function(questionID){if(matrix_type.isDropDown(questionSubType)||matrix_type.isImageRating(questionSubType)){var eventElement="select[name='u_"+questionID+"']";addEventToElement(eventElement,'change');addEventToDynamicExplode();}},addEventToSelectList:function(questionID){if(matrix_type.isSelectList(questionSubType)){var eventElement="select[name='m_"+questionID+"']";addEventToElement(eventElement,'change');addEventToDynamicExplode();}},addEventToNumericSlider:function(questionID){if(matrix_type.isNumericSlider(questionSubType)){var eventElement=sectionDiv.find("div[id=\"questionDiv"+questionID+"\"]").find("input[type=hidden]");addEventToElement(eventElement,'change');}},addEventToTextBox:function(questionID){if(matrix_type.isText(questionSubType)){var eventElement=sectionDiv.find('tr[id=\'questionRow'+questionID+'\']').find('input[type=\'text\'], '+
"input[type=email], "+
"input[type=number], "+
"input[type=tel], "+
"input[type=date]");$(eventElement).each(function(){addEventToElement($(this),'change');});}},addEventToTextSlider:function(questionID){if(matrix_type.isTextSlider(questionSubType)){var eventElement=sectionDiv.find("div[id=\"questionDiv"+questionID+"\"]").find("input[type=radio]");addEventToElement(eventElement,'change');addEventToDynamicExplode();}},addEventToStarRatingAndPushToSocial:function(questionID){if(matrix_type.isStarRating(questionSubType)||matrix_type.isPushToSocial(questionSubType)){var eventElement="input[name='u_"+questionID+"']";addEventToElement(eventElement,'change');addEventToDynamicExplode();}},addEventToVideoRating:function(questionID){if(matrix_type.isVideoRating(questionSubType)){var eventElement="input[name='u_"+questionID+"']";addEventToElement(eventElement,'change');eventElement=sectionDiv.find("textarea");addEventToElement(eventElement,'change');}},validateIfDropDown:function(question){if(matrix_type.isDropDown(questionSubType)||matrix_type.isImageRating(questionSubType)){var checkedElement=sectionDiv.find('select[name=u_'+questionID+'] option:selected');if($(checkedElement).val()==='-1'){this.setValidationMessage();}
if(sectionDiv.find('.dynamic-explode:visible').length){hasValidationErrorForDynamicExplode(checkedElement);}}},validateIfSelectList:function(){if(matrix_type.isSelectList(questionSubType)){var checkedElements=sectionDiv.find('select[name=m_'+questionID+'] option:selected');if(!checkedElements.length){this.setValidationMessage();return;}
if(sectionDiv.find('.dynamic-explode:visible').length){hasValidationErrorForDynamicExplode(checkedElements);}}},validateIfText:function(question,validation){if(matrix_type.isText(questionSubType)){var self=this;var textBoxElements=sectionDiv.find('tr[id=\'questionRow'+question.ID+'\']').find('input[type=\'text\'], '+
"input[type=email], "+
"input[type=number], "+
"input[type=tel], "+
"input[type=date]");sectionDiv.find('tr[id=\'questionRow'+question.ID+'\']').find("input[type=radio]").each(function(){if($(this).closest('tr').find('.input-wrapper').length==0&&!$(this).is(':checked')){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.batteryunichoice.text.required',replacements:[],requestValidation:isRequestValidationEnabled});return false;}});$(textBoxElements).each(function(){var value=$(this).val();if(!$(this).closest('tr').find('.matrix-exclusive-option>input').is(':checked')){if(StringUtil.isEmpty(value)){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.batteryunichoice.text.required',replacements:[],requestValidation:isRequestValidationEnabled});return false;}else if(validation&&!StringUtil.isEmpty(validation.customValidatorClass)){var className=validation.customValidatorClass;var argValue=validation.customValidatorArgs;return checkCustomValidation(className,argValue,textBoxElements,value);}else if($(this).hasClass('number-input')&&isNaN(value)){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.validation.text.numeric.failure',replacements:[],requestValidation:isRequestValidationEnabled});return false;}}});}},validateIfMultiSelect:function(question,matrixValidationType,firstQuestion){if(matrix_type.isMultiSelect(questionSubType)){this.validateMatrixRow('checkbox',question,matrixValidationType,firstQuestion);}},validateColumnIfMultiSelect:function(question,matrixValidationType){if(matrix_type.isMultiSelect(questionSubType)){this.validateMatrixColumn('checkbox',question,matrixValidationType);}},validateIfSingleSelect:function(question,matrixValidationType,firstQuestion){if(matrix_type.isSingleSelect(questionSubType)){this.validateMatrixRow('radio',question,matrixValidationType,firstQuestion);}},validateColumnIfSingleSelect:function(question,matrixValidationType){if(matrix_type.isSingleSelect(questionSubType)){this.validateMatrixColumn('radio',question,matrixValidationType);}},validateMatrixRow:function(type,question,matrixValidationType,firstQuestion){var checkedElements=sectionDiv.find('tr[id=\'questionRow'+question.ID+'\']').find('input[type=\''+type+'\']:checked');if(this.isInvalidRowInput(question,type,checkedElements)){this.setValidationMessageBasedOnType(matrixValidationType,firstQuestion.ID);this.setRowValidationClass(question.ID);return;}
if(sectionDiv.find('.dynamic-explode:visible').length){hasValidationErrorForDynamicExplode(checkedElements);}},validateMatrixColumn:function(type,question,matrixValidationType){var allColumnLength=sectionDiv.find('tr[id=\'questionRow'+question.ID+'\']').children().length-1;var columnLength=this.getColumnLengthToValidate(question,allColumnLength);for(var colIndex=0;colIndex<columnLength;colIndex++){var isValidationErrorToBeAdded=true;for(var rowIndex=0;rowIndex<validatedSection.rows.length;rowIndex++){var row=validatedSection.rows[rowIndex];var columnCheckElements=this.getNACheckedElementCount(row,allColumnLength,question.isInputTypeRadio,type)+this.getNonNACheckedElementCount(row,colIndex,type);if(columnCheckElements>0){isValidationErrorToBeAdded=false;break;}}
if(isValidationErrorToBeAdded){if(matrixValidationType===2){this.setRowAndColumnValidationMessage('question_'+question.ID);}else{this.setColumnValidationMessage('question_'+question.ID);}
this.setColumnValidationClass(colIndex+2);}}
this.validateColumnDynamicExplode(type)},validateColumnDynamicExplode:function(type){for(var i=0;i<validatedSection.rows.length;i++){var question=validatedSection.rows[i];var questionID=question.ID;removeErrorsByQuestionIDFromValidationArray(questionID);var checkedElements=sectionDiv.find('tr[id=\'questionRow'+questionID+'\']').find('input[type=\''+type+'\']:checked');if(sectionDiv.find('.dynamic-explode').not('.hidden').length){sectionDiv.find(".error-tr").removeClass('hidden');sectionDiv.find('.dynamic-explode').not('.hidden').closest('.dynamic-tr').removeClass('hidden');hasColumnValidationErrorForDynamicExplode(checkedElements,questionID);}}},validateIfNumericSlider:function(question){if(matrix_type.isNumericSlider(questionSubType)){var textElement=sectionDiv.find("div[id=\"questionDiv"+question.ID+"\"]").find("input[type=hidden]");if(StringUtil.isEmpty(textElement.val())){this.setValidationMessageForNumericQuestion();}}},validateIfTextSlider:function(question){if(matrix_type.isTextSlider(questionSubType)){var radioElement=sectionDiv.find("div[id=\"questionDiv"+question.ID+"\"]").find("input[type=radio]");if(StringUtil.isEmpty(radioElement.val())){this.setValidationMessageForNumericQuestion();}
if(sectionDiv.find('.dynamic-explode:visible').length){hasValidationErrorForDynamicExplode(radioElement);}}},validateIfStarRating:function(){if(matrix_type.isStarRating(questionSubType)||matrix_type.isPushToSocial(questionSubType)){var checkedElements=sectionDiv.find('input[name=\'u_'+questionID+'\']:checked');this.validateRating();if(sectionDiv.find('.dynamic-explode:visible').length){hasValidationErrorForDynamicExplode(checkedElements);}}},validateIfVideoRating:function(){if(matrix_type.isVideoRating(questionSubType)){this.validateRating();this.validateCommentBox();}},validateRating:function(){var checkedElement=sectionDiv.find('input[name=\'u_'+questionID+'\']:checked');if(!checkedElement.length){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.validation.star.rating.required.failure',replacements:[],requestValidation:isRequestValidationEnabled});}},validateCommentBox:function(){removeErrorsByQuestionIDFromValidationArray(questionID+'_c');var textArea=sectionDiv.find("textarea");if(textArea.length>0&&StringUtil.isEmpty(textArea.val())){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID+'_c',messageKey:'application.takesurvey.validation.text.required.failure',replacements:[],requestValidation:isRequestValidationEnabled});}},setValidationMessage:function(){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.batteryunichoice.required',replacements:[],requestValidation:isRequestValidationEnabled});},setValidationMessageForNumericQuestion:function(){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.slider.required',replacements:[],requestValidation:isRequestValidationEnabled});},setColumnValidationMessage:function(questionID){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.batteryunichoice.column.required',replacements:[],requestValidation:isRequestValidationEnabled});},setRowAndColumnValidationMessage:function(questionID){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.batteryunichoice.row.column.required',replacements:[],requestValidation:isRequestValidationEnabled});},setRowValidationClass:function(questionId){sectionDiv.find('tr[id=\'questionRow'+questionId+'\']').addClass('has-error');},removeRowValidationClass:function(questionId){sectionDiv.find('tr[id=\'questionRow'+questionId+'\']').removeClass('has-error');},setColumnValidationClass:function(index){sectionDiv.find("thead td:nth-child("+index+")").addClass('has-error');sectionDiv.find("tr[id^='questionRow'] td:nth-child("+index+")").addClass('has-error');sectionDiv.find(".dynamic-tr").addClass('hidden');sectionDiv.find('span[id^="errorSpan"]').addClass('hidden');},removeColumnValidationClass:function(){sectionDiv.find("tr[id^='questionRow'] td").removeClass('has-error');sectionDiv.find("thead td").removeClass('has-error');},getColumnLengthToValidate:function(question,allColumnLength){var hasNAColumn=sectionDiv.find('tr[id=\'questionRow'+question.ID+'\']').find('.has-na').length>0;return hasNAColumn?allColumnLength-1:allColumnLength;},getNACheckedElementCount:function(row,allColumnLength,isNAInputTypeRadio,type){var naElementLength=sectionDiv.find('tr[id=\'questionRow'+row.ID+'\']').find('.has-na').length;if(naElementLength>0){var naElementType=isNAInputTypeRadio?"radio":type;return sectionDiv.find('tr[id=\'questionRow'+row.ID+'\']').find("td:eq("+(allColumnLength)+")").find('input[type=\''+naElementType+'\']:checked').length;}
return 0;},getNonNACheckedElementCount:function(row,colIndex,type){var tdElement=sectionDiv.find('tr[id=\'questionRow'+row.ID+'\']').find("td:eq("+(colIndex+1)+")");return tdElement.find('input[type=\''+type+'\']:checked').length;},setValidationMessageBasedOnType:function(matrixValidationType,questionId){if(matrixValidationType===2){this.setRowAndColumnValidationMessage('question_'+questionId);}else{this.setValidationMessage();}},isInvalidRowInput:function(question,type,checkedElements){if(type==='checkbox'&&question.isInputTypeRadio){var checkedNARadioElement=sectionDiv.find('tr[id=\'questionRow'+question.ID+'\']').find('input[type=\'radio\']:checked');}
return!checkedElements.length&&(typeof checkedNARadioElement==='undefined'||!checkedNARadioElement.length);}};var storeLocator={validate:function(){removeErrorsByQuestionIDFromValidationArray(questionID);if(store_locator.isStore(questionSubType)){this.validateStoreFields();}else{this.validateAddressFields();}},validateStoreFields:function(){if(document.getElementsByName('storeLocator_'+questionID+"_selected").length==0){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.validation.multitier.required.failure',replacements:[],requestValidation:isRequestValidationEnabled});}},validateAddressFields:function(){if((document.getElementById('sl_formatted_adrs_'+questionID)==null)||(document.getElementById('sl_latitude_'+questionID)==null)||(!document.getElementById('sl_formatted_adrs_'+questionID).value)||(!document.getElementById('sl_latitude_'+questionID).value)){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.validation.multitier.required.failure',replacements:[],requestValidation:isRequestValidationEnabled});}}};var multiTierLookup={validate:function(){removeErrorsByQuestionIDFromValidationArray(questionID);for(var i=0;i<validatedSection.fields.length;i++){var currentQuestionID=validatedSection.fields[i];var controlElement=sectionDiv.find("#u_"+currentQuestionID);if(controlElement.length>0&&(StringUtil.isEmpty(controlElement.val())||controlElement.val()=="-1")){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.validation.multitier.required.failure',replacements:[],requestValidation:isRequestValidationEnabled});}}},addLiveValidationEvent:function(){for(var i=0;i<validatedSection.fields.length;i++){var eventElement=sectionDiv.find("#u_"+validatedSection.fields[i]);addEventToElement(eventElement,'change');}}};var customNumericValidator={validate:function(){var sectionInvalidated=false;removeErrorsByQuestionIDFromValidationArray(questionID);for(var i=0;i<validatedSection.fields.length;i++){var answerID=validatedSection.fields[i];removeErrorsByQuestionIDFromValidationArray(questionID+"_"+answerID);var textElement=sectionDiv.find("#"+answerID+"ID");if(textElement.length>0){var textValue=textElement.val();if(this.validateRequired(textValue,answerID)){sectionInvalidated=true;continue;}
if(this.validateNumeric(textValue,answerID)){sectionInvalidated=true;}}}
if(sectionInvalidated){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.validation.customnumeric.failure',replacements:[],requestValidation:isRequestValidationEnabled});}},addLiveValidationEvent:function(){for(var i=0;i<validatedSection.fields.length;i++){var textElement=sectionDiv.find("#"+validatedSection.fields[i]+"ID");addEventToElement(textElement,'change');}},validateRequired:function(textValue,answerID){if(StringUtil.isEmpty(textValue)){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID+'_'+answerID,messageKey:'application.takesurvey.validation.customnumeric.required.failure',replacements:[],requestValidation:isRequestValidationEnabled});return true;}
return false;},validateNumeric:function(textValue,answerID){if(!this.isNormalInteger(textValue)){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID+'_'+answerID,messageKey:'application.takesurvey.validation.rank.parse.failure',replacements:[],requestValidation:isRequestValidationEnabled});return true;}else if(Number(textValue)<0){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID+'_'+answerID,messageKey:'application.takesurvey.validation.customnumeric.negative.failure',replacements:[],requestValidation:isRequestValidationEnabled});return true;}},isNormalInteger:function(str){var n=Math.floor(Number(str));return n!==Infinity&&String(n)===str&&n<=2147483647;}};var text={validate:function(){for(var i=0;i<validatedSection.rows.length;i++){var question=validatedSection.rows[i];questionSubType=question.subType;questionID=question.ID;var isRequired=question.required;isRequestValidationEnabled=question.requiredValidationType===requiredValidation;removeErrorsByQuestionIDFromValidationArray(questionID);var textElement=this.getElementByType();if(isRequired){var textValue="";if(question_type.isPanelRecruitment(questionType)&&text_type.isPhone(questionSubType)){textValue=this.getMobileNumberValue();}else{textValue=textElement.length>1?textElement.filter(':visible').val():textElement.val();}
if(typeof textValue==='undefined'){textValue="";}
if(!text_type.isCaptcha(questionType)&&this.validateRequired(textValue)){continue;}
if(this.validateRegexPattern(question,textValue)){continue;}
if(this.validateByTextComparison(question,textValue)){continue;}
if(this.validateCharLimit(question,textValue)){continue;}
if(this.validateMinimumCharLimit(question,textValue)){continue;}
if(this.validateNumeric(question,textValue)){continue;}
if(this.validateEmail(textValue)){continue;}
if(this.validatePhone(question,textValue)){continue;}
if(this.validateUsername(question,textValue)){continue;}
if(this.validatePassword(question,textValue)){continue;}}
this.validateEmbedDataAjaxValidation(question,textElement);}},addLiveValidationEvent:function(){var eventElement;for(var i=0;i<validatedSection.rows.length;i++){var question=validatedSection.rows[i];if(this.isCommentOrVoterComment(question.subType)){eventElement=sectionDiv.find("div[id=\"questionDiv"+question.ID+"\"]").find("textarea");}else{eventElement=sectionDiv.find("div[id=\"questionDiv"+question.ID+"\"]").find("input:text, input:password, select");}
if(text_type.isNumeric(questionSubType)){$(eventElement).off('change');}
addEventToElement(eventElement,'change');}},validateEmbedDataAjaxValidation:function(question,textElement){if(!question.embedList||question.embedList==0){return false;}
var textValue=textElement.prop('value');if(textValue.trim().length===0){return false;}
if(this.getAJAXValidationMessageContainer().length==1){var html=this.getAJAXValidationMessageContainer().html();if(html.indexOf(this.getValidationMessage())>-1){this.pushInvalidValidationErrorForTextEmbedData();return true;}}
return false;},getValidationMessage:function(){return getTranslatedValidationMessage('application.takesurvey.text.key.invalid',[]);},pushInvalidValidationErrorForTextEmbedData:function(){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'',replacements:[],requestValidation:isRequestValidationEnabled});},pushInvalidValidationErrorForReferenceData:function(messageKey){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'',replacements:[],requestValidation:isRequestValidationEnabled});},getAJAXValidationMessageContainer:function(){return sectionDiv.find('.ajaxServiceResponse')},validatePhone:function(question,textValue){if(question.type=='C'&&text_type.isPhone(questionSubType)){if(question.phoneType==='US'){this.validateUSPhone(textValue);}else if(question.phoneType==='UK'){this.validateUKPhone(textValue);}else if(question.phoneType==='INTERNATIONAL'){this.validateInternationalPhone(textValue);}else{this.validateIndianPhone(textValue);}}
if(question.type=='K'&&text_type.isPhone(questionSubType)){this.validateMobile(textValue)}},validatePassword:function(question,password){if(!(question_type.isPanelRecruitment(question.type)&&text_type.isPassword(question.subType))){return;}
if(password.length===0){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.validation.text.required.failure',replacements:[],requestValidation:isRequestValidationEnabled});return;}
if(question.isStrongPasswordEnabled&&!new RegExp(question.regexPattern).test(password)){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.micropanel.member.strong.password.error',replacements:[],requestValidation:isRequestValidationEnabled});}},validateUsername:function(question,username){if(!(question_type.isPanelRecruitment(question.type)&&text_type.isUsername(question.subType))){return;}
if(username.length<question.min||username.length>question.max||!new RegExp(question.regexPattern).test(username)){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.micropanel.lang.invalid.username',replacements:[question.min,question.max],requestValidation:isRequestValidationEnabled});}},validateMobile:function(textValue){textValue=textValue.trim();if(textValue.indexOf("+")!=0){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.validation.text.international.phone.failure',replacements:[],requestValidation:isRequestValidationEnabled});}
textValue=textValue.replace(" ","");textValue=textValue.replace("-","");textValue=textValue.replace(".","");textValue=textValue.replace("/","");textValue=textValue.replace("+","");textValue=textValue.replace("(","");textValue=textValue.replace(")","");if(!textValue.match("^\\d{7,16}")){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.validation.text.international.phone.failure',replacements:[],requestValidation:isRequestValidationEnabled});}},validateIndianPhone:function(textValue){var regx=new RegExp("^(?:(?:\\+|0{0,2})91(\\s*[\\-]\\s*)?|[0]?)?[6789]\\d{9}$");if(!regx.test(textValue)){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.validation.text.international.phone.failure',replacements:[],requestValidation:isRequestValidationEnabled});}},validateUKPhone:function(textValue){var regx=new RegExp("^\\(?(?:(?:0(?:0|11)\\)?[\\s-]?\\(?|\\+)44\\)?[\\s-]?\\(?(?:0\\)?[\\s-]?\\"+
"(?)?|0)(?:\\d{2}\\)?[\\s-]?\\d{4}[\\s-]?\\d{4}|\\d{3}\\)?[\\s-]?\\d{3}[\\s-]?\\d{3,4}|\\d{4}\\)?"+
"[\\s-]?(?:\\d{5}|\\d{3}[\\s-]?\\"+
"d{3})|\\d{5}\\)?[\\s-]?\\d{4,5}|8(?:00[\\s-]?11[\\s-]?11|45[\\s-]?46[\\s-]?4\\d))"+
"(?:(?:[\\s-]?(?:x|ext\\.?\\s?|\\#)\\d+)?)$");if(!regx.test(textValue)){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.validation.text.uk.phone.failure',replacements:[],requestValidation:isRequestValidationEnabled});}},validateInternationalPhone:function(textValue){textValue=textValue.replace(" ","").replace("-","").replace(".","").replace("/","");if(!this.isValidInternationalNumber(textValue)){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.validation.text.international.phone.failure',replacements:[],requestValidation:isRequestValidationEnabled});return;}
textValue=textValue.replace("+","");if(!this.isBalancedParenthesis(textValue)){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.validation.text.international.phone.failure',replacements:[],requestValidation:isRequestValidationEnabled});return;}
textValue=textValue.replace("(","").replace(")","");if(!this.isValidPhoneNumberLength(textValue)){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.validation.text.international.phone.failure',replacements:[],requestValidation:isRequestValidationEnabled});return;}
if(!this.isValidDigit(textValue)){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.validation.text.international.phone.failure',replacements:[],requestValidation:isRequestValidationEnabled});}},isValidDigit:function(textValue){var regx=new RegExp("^\\d{7,16}");if(!regx.test(textValue)){return false;}
return true;},isValidPhoneNumberLength:function(textValue){if(textValue.length<7||textValue.length>16){return false;}
return true;},isValidInternationalNumber:function(textValue){if(textValue.lastIndexOf("+")>0){return false;}
return true;},isBalancedParenthesis:function(textValue){var stringBuffer;for(var i=0;i<textValue.length;i++){var temp=textValue.charAt(i);if(temp===')'){var lastIndex=stringBuffer.lastIndexOf("(");if(lastIndex==stringBuffer.length-1){return false;}
if(lastIndex!=-1){stringBuffer=stringBuffer.substring(0,lastIndex);}
continue;}
stringBuffer+=temp;}
return stringBuffer.indexOf("(")<0;},validateUSPhone:function(textValue){var regx=new RegExp("[0-9]{3}-[0-9]{3}-[0-9]{4}");if(!regx.test(textValue)){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.validation.text.us.phone.failure',replacements:[],requestValidation:isRequestValidationEnabled});return true;}
return false;},validateEmail:function(textValue){if(text_type.isEmail(questionSubType)&&!validateEmail(textValue)){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.validation.text.email.failure',replacements:[],requestValidation:isRequestValidationEnabled});return true;}
return false;},isRegexSupportedQuestion:function(){return(text_type.isCommentBox(questionSubType)||text_type.isSingleRowCommentWide(questionSubType));},isValidationByComparisonSupported:function(){return(text_type.isCommentBox(questionSubType)||text_type.isSingleRowCommentWide(questionSubType)||text_type.isEmail(questionSubType));},validateRegex:function(question,textValue){var regex=new RegExp(question.regexPattern);return regex.test(textValue);},validateRegexPattern:function(question,textValue){if(this.isRegexSupportedQuestion()&&'regexPattern'in question&&!this.validateRegex(question,textValue)){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.validation.text.regex.validation.failure',replacements:[],requestValidation:isRequestValidationEnabled});return true;}
return false;},validateByTextComparison:function(question,textValue){if(this.isValidationByComparisonSupported()&&'textComparisonValue'in question&&(StringUtil.isEmpty(question.textComparisonValue)||!this.matchText(question,textValue))){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.validation.text.failure',replacements:[],requestValidation:isRequestValidationEnabled});return true;}
return false;},matchText:function(question,textValue){switch(question.textValidationType){case COMPARISON_TYPE_EQUALS:return textValue.toUpperCase()===question.textComparisonValue.toUpperCase();case COMPARISON_TYPE_EQUALS_CASE_SENSITIVE:return textValue===question.textComparisonValue;case COMPARISON_TYPE_CONTAINS:return textValue.toUpperCase().includes(question.textComparisonValue.toUpperCase());case COMPARISON_TYPE_CONTAINS_CASE_SENSITIVE:return textValue.includes(question.textComparisonValue);case COMPARISON_TYPE_DOESNOT_CONTAIN:return!textValue.includes(question.textComparisonValue);case COMPARISON_TYPE_STARTS_WITH:return textValue.startsWith(question.textComparisonValue);case COMPARISON_TYPE_ENDS_WITH:return textValue.endsWith(question.textComparisonValue);default:return false;}},validateNumeric:function(question,textValue){if(text_type.isNumeric(questionSubType)||text_type.isStopWatch(questionSubType)){if(('allowSpecialCharacters'in question)&&(question.allowSpecialCharacters)){var specialCharacters=['$','#','%','+','-','\''];var length=specialCharacters.length;for(var i=0;i<length;i++){var specialCharacterPosition=textValue.indexOf(specialCharacters[i]);if(specialCharacterPosition>=0){textValue=textValue.substr(0,specialCharacterPosition)+textValue.substr(specialCharacterPosition+1);}}
var commaIndex=textValue.indexOf(",");var hasCommas=(commaIndex>=0);while(hasCommas){textValue=textValue.substring(0,commaIndex)+textValue.substring(commaIndex+1);commaIndex=textValue.indexOf(",");hasCommas=(commaIndex>=0);}}
if((textValue===''||isNaN(textValue))&&!isRequestValidationEnabled){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.validation.text.numeric.failure',replacements:[]});return true;}
Number.isInteger=Number.isInteger||function(value){return typeof value==="number"&&isFinite(value)&&Math.floor(value)===value;};if(('allowWholeNumber'in question)&&(question.allowWholeNumber)&&(!Number.isInteger(Number(textValue)))){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.validation.text.numeric.whole.number.failure',replacements:[],requestValidation:isRequestValidationEnabled});return true;}
if(('max'in question)&&('min'in question)&&((Number(textValue)>question.max)||(Number(textValue)<question.min))){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.validation.text.numeric.range.failure',replacements:[question.min,question.max],requestValidation:isRequestValidationEnabled});return true;}}
return false;},validateCharLimit:function(question,textValue){if('charLimit'in question){if(StringUtil.getLength(textValue)>question.charLimit){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.validation.text.charlimit.failure',replacements:[question.charLimit],requestValidation:isRequestValidationEnabled});return true;}}
return false;},validateMinimumCharLimit:function(question,textValue){if('minCharacterLimit'in question){if(textValue!=undefined&&!StringUtil.isEmpty(textValue)&&StringUtil.getLength(textValue)<question.minCharacterLimit){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.validation.text.mincharlimit.failure',replacements:[question.minCharacterLimit],requestValidation:isRequestValidationEnabled});return true;}}
return false;},validateRequired:function(textValue){if(StringUtil.isEmpty(textValue)){addErrorToValidationArray(this.getRequiredFieldValidationMessageBasedOnSubType());return true;}
return false;},getElementByType:function(){if(this.isCommentOrVoterComment(questionSubType)&&!question_type.isElectronicSignature(questionType)){return sectionDiv.find("div[id=\"questionDiv"+questionID+"\"]").find("textarea");}
return sectionDiv.find("div[id=\"questionDiv"+questionID+"\"]").find("input:text, "+
"input[type=email], "+
"input[type=number], "+
"input[type=tel], "+
"input[type=date], "+
"input:password, "+
"select");},isCommentOrVoterComment:function(questionSubType){return text_type.isCommentBox(questionSubType)||text_type.isVoterComment(questionSubType);},getMobileNumberValue:function(){var countryCode=sectionDiv.find("div[id=\"questionDiv"+questionID+"_cc\"]").find("input:text");var phoneNumber=sectionDiv.find("div[id=\"questionDiv"+questionID+"\"]").find("input:text");return countryCode.val()+"-"+phoneNumber.val();},getRequiredFieldValidationMessageBasedOnSubType:function(){if(text_type.isEmail(questionSubType)){return{questionID:questionID,firstQuestionID:firstQuestionID,messageKey:'application.takesurvey.validation.text.email.failure',replacements:[],requestValidation:isRequestValidationEnabled};}else if(text_type.isNumeric(questionSubType)||text_type.isStopWatch(questionSubType)||text_type.isPhone(questionSubType)){return{questionID:questionID,firstQuestionID:firstQuestionID,messageKey:'application.takesurvey.validation.text.numeric.failure',replacements:[],requestValidation:isRequestValidationEnabled};}
return{questionID:questionID,firstQuestionID:firstQuestionID,messageKey:'application.takesurvey.validation.text.required.failure',replacements:[],requestValidation:isRequestValidationEnabled};},validateMinimumRequirements:function(){if(question_type.isContactInfo(questionType)){this.validateMinimumRequirementForContactInfo();}else if(question_type.isText(questionType)){this.validateMinimumRequirementForTextQuestion();}},validateMinimumRequirementForContactInfo:function(){for(var i=0;i<validatedSection.rows.length;i++){var question=validatedSection.rows[i];removeErrorsByQuestionIDFromValidationArray(question.ID);var textInputElement=sectionDiv.find("div[id=\"questionDiv"+question.ID+"\"]").find("input:text");question.isCustomField&&this.validateCustomFieldsForContactInfo(textInputElement.val(),question);}},validateCustomFieldsForContactInfo:function(textValue,question){if(StringUtil.isEmpty(textValue)){return false;}
if(this.isCustomFieldRegExFormatApplied(question)&&!RegExp(question.customFieldRegExPattern).test(textValue)){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:question.ID,messageKey:'application.takesurvey.validation.contact.info.custom.field.regex.validation.failure',replacements:[],requestValidation:isRequestValidationEnabled});return true;}
return false;},isCustomFieldRegExFormatApplied:function(question){return question_type.isContactInfo(questionType)&&typeof question!=='undefined'&&question!==null&&typeof question.customFieldRegExPattern!=='undefined'&&question.customFieldRegExPattern!==null&&question.customFieldRegExPattern.length>0;},validateMinimumRequirementForTextQuestion:function(){for(var i=0;i<validatedSection.rows.length;i++){var question=validatedSection.rows[i];removeErrorsByQuestionIDFromValidationArray(question.ID);questionSubType=question.subType;questionID=question.ID;if(text_type.isCaptcha(questionSubType)){this.validateCaptchaMinRequirement();return;}else if(text_type.isCommentBox(questionSubType)){var textInputElement=sectionDiv.find("div[id=\"questionDiv"+question.ID+"\"]").find("textarea");}else{var textInputElement=sectionDiv.find("div[id=\"questionDiv"+question.ID+"\"]").find("input:text, "+
"input[type=email], "+
"input[type=number], "+
"input[type=tel], "+
"input[type=date]");}
this.validateMinimumCharLimit(question,textInputElement.val());}},validateCaptchaMinRequirement:function(){if(StringUtil.isEmpty(grecaptcha.getResponse())){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'ui.user.captcha.invalid',replacements:[],requestValidation:isRequestValidationEnabled});return;}}};var multichoiceLookup={validate:function(){removeErrorsByQuestionIDFromValidationArray(questionID);var checkedElements=getSelectedValues();if(!checkedElements||!checkedElements.length){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.referencedata.required',replacements:[],requestValidation:isRequestValidationEnabled});return;}
if(validatedSection.validationType==='exactly'&&!isRequestValidationEnabled){if(checkedElements.length!=validatedSection.numberOfAnswersLimit){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:"application.takesurvey.multichoice.exact.minanswers.failure",replacements:[validatedSection.numberOfAnswersLimit,checkedElements.length]});return;}}else if(validatedSection.validationType==='as-many-as'&&!isRequestValidationEnabled){if(checkedElements.length>validatedSection.numberOfAnswersLimit){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:"application.takesurvey.multichoice.asmanyas.minanswers.failure",replacements:[validatedSection.numberOfAnswersLimit,checkedElements.length]});return;}}else if(validatedSection.validationType==='at-least'&&!isRequestValidationEnabled){if(checkedElements.length<validatedSection.numberOfAnswersLimit){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:"application.takesurvey.multichoice.atleast.minanswers.failure",replacements:[validatedSection.numberOfAnswersLimit,checkedElements.length]});return;}}
if((sectionDiv.find('.has-other').length>0&&sectionDiv.find('.answer-options.other-option.hidden').length<1)&&hasValidationErrorForOtherOption()){}},addLiveValidationEvent:function(){var eventElement="input[name='m_"+questionID+"']";addEventToElement(eventElement,'change');addEventToOtherAndDynamicExplode(true,false);}};var unichoiceLookup={validate:function(){removeErrorsByQuestionIDFromValidationArray(questionID);var checkedElements=getSelectedValues();if(!checkedElements.length){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.referencedata.required',replacements:[],requestValidation:isRequestValidationEnabled});return;}
if(!this.enteredTextInSyncWithSelectedAnswer()){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.referencedata.required',replacements:[],requestValidation:isRequestValidationEnabled});return;}
if((checkedElements.parents('select.has-other').length>0&&!sectionDiv.find('.answer-options.other-option.hidden').length>0)&&hasValidationErrorForOtherOption()){}},addLiveValidationEvent:function(){var eventElement="select[name='u_"+questionID+"']";addEventToElement(eventElement,'change');addEventToOtherAndDynamicExplode(true,false);},enteredTextInSyncWithSelectedAnswer:function(){return(sectionDiv.find('.answer-options .input-wrapper '+INPUT_ELEMENT_WITH_ALL_TYPE+'[id^=autocompleteu_]').length>0&&sectionDiv.find('.select-wrapper.lookup-select select[id^=u_] option:selected').length>0&&sectionDiv.find('.answer-options .input-wrapper '+INPUT_ELEMENT_WITH_ALL_TYPE+'[id^=autocompleteu_]').val().trim()===sectionDiv.find('.select-wrapper.lookup-select select.form-select[id^=u_] option:selected').text().trim());}};var single_select={validate:function(){removeErrorsByQuestionIDFromValidationArray(questionID);removeErrorsByQuestionIDFromValidationArray(getErrorSpanIDSuffixForOtherError());var checkedElements=getSelectedValues();if(!checkedElements.length){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.unichoice'
+(uniChoice_type.isDropdown(questionSubType)?'.dropdown':'')
+'.required',replacements:[],requestValidation:isRequestValidationEnabled});return;}
if($(checkedElements).parents('.other-option').length>0){if(hasValidationErrorForOtherOption()){return;}}
if(checkedElements.parents('select.has-other.has-na').length>0){if(sectionDiv.find('select option:nth-last-child(2)').is(':selected')){if(hasValidationErrorForOtherOption()){return;}}}else if(checkedElements.parents('select.has-other').length>0){if(sectionDiv.find('select option:last').is(':selected')){if(hasValidationErrorForOtherOption()){return;}}}
if(sectionDiv.find('.dynamic-explode:visible').length&&hasValidationErrorForDynamicExplode(checkedElements)){}},addLiveValidationEvent:function(){var eventElement;if(uniChoice_type.isDropdown(questionSubType)){eventElement="select[name='u_"+questionID+"']";}else{eventElement="input[name='u_"+questionID+"']";}
addEventToElement(eventElement,'change');addEventToOtherAndDynamicExplode(true,true);}};var nps={validate:function(){removeErrorsByQuestionIDFromValidationArray(questionID);var checkedElements=getSelectedValues();if(!checkedElements.length){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.nps.required',replacements:[],requestValidation:isRequestValidationEnabled});}},addLiveValidationEvent:function(){var eventElement="input[name='u_"+questionID+"']";addEventToElement(eventElement,'change');}};var csat={validate:function(){removeErrorsByQuestionIDFromValidationArray(questionID);var checkedElements=getSelectedValues();if(!checkedElements.length||checkedElements.val()==='-1'){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.nps.required',replacements:[],requestValidation:isRequestValidationEnabled});}
if(sectionDiv.find('.dynamic-explode:visible').length&&hasValidationErrorForDynamicExplode(checkedElements)){}},addLiveValidationEvent:function(){var eventElement="input[name='u_"+questionID+"']";addEventToElement(eventElement,'change');addEventToOtherAndDynamicExplode(false,true);}};function getSelectedValues(){if(question_type.isUniChoice(questionType)&&uniChoice_type.isDropdown(questionSubType)||question_type.isMultiChoice(questionType)&&multiChoice_type.isDropdown(questionSubType)||question_type.isUnichoiceLookup(questionType)){return sectionDiv.find('select').val()==-1?'':sectionDiv.find('select option:selected');}else if(question_type.isMultiChoice(questionType)&&multiChoice_type.isLookUpTable(questionSubType)){return sectionDiv.find('.lookup-text input:hidden').length>0?getArraySplitOnDelimeter(sectionDiv.find('.lookup-text input:hidden').val(),'_'):[];}
return sectionDiv.find('input:checked');}
getArraySplitOnDelimeter=function(stringWithDelimeter,delimeter){var array=stringWithDelimeter.split(delimeter);if(array[0]==''&&array.length==1){return[];}else{return array.filter(function(element){return element!='';});}};function hasValidationErrorForOtherOption(){var otherElement=sectionDiv.find('.other-input');if(otherElement&&!(otherElement.val().trim())){enableErrorLineForOtherOption(otherElement);addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:getErrorSpanIDSuffixForOtherError(),messageKey:'application.takesurvey.other.required',replacements:[],requestValidation:isRequestValidationEnabled});return true;}
return false;}
function enableErrorLineForOtherOption(otherElement){$(otherElement).siblings('.control-label').hide();$(otherElement).addClass('error-line');$(otherElement).removeClass('hidden');sectionDiv.find('.control-selection').addClass('edit-other');sectionDiv.find('[id^=errorSpan].error').removeClass('hidden vhidden');}
function getErrorSpanIDSuffixForOtherError(){if(question_type.isUniChoice(questionType)&&uniChoice_type.isRadio(questionSubType)||question_type.isMultiChoice(questionType)&&multiChoice_type.isCheckbox(questionSubType)){return ''+questionID+'_o';}
return questionID;}
function hasColumnValidationErrorForDynamicExplode(checkedElements,questionID){var validationMessage='';for(var i=0;i<checkedElements.length;i++){var dynamicExplodeDiv=sectionDiv.find('[id^=de][id$=_'
+$(checkedElements[i]).val()+']');if(dynamicExplodeDiv.length>0&&dynamicExplodeDiv.find('.form-input').length>0&&!(dynamicExplodeDiv.find('.form-input').val().trim())){validationMessage+=dynamicExplodeDiv.find('.form-label')[0].innerHTML+", ";}}
validationMessage=StringUtil.removeTextFromEnd(validationMessage,", ");if(validationMessage){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.de.required',replacements:[validationMessage],requestValidation:isRequestValidationEnabled});return true;}
return false;}
function hasValidationErrorForDynamicExplode(checkedElements){var validationMessage='';for(var i=0;i<checkedElements.length;i++){var dynamicExplodeDiv=sectionDiv.find('.dynamic-explode:visible[id^=de][id$=_'
+$(checkedElements[i]).val()+']');if(dynamicExplodeDiv.length>0&&dynamicExplodeDiv.find('.form-input').length>0&&!(dynamicExplodeDiv.find('.form-input').val().trim())){validationMessage+=dynamicExplodeDiv.find('.form-label:visible')[0].innerHTML+", ";}}
validationMessage=StringUtil.removeTextFromEnd(validationMessage,", ");if(validationMessage){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.de.required',replacements:[validationMessage],requestValidation:isRequestValidationEnabled});return true;}
return false;}
function hasValidationErrorForDynamicExplodeForRankOrder(){var validationMessage='';var dynamicExplodeDiv=sectionDiv.find('.dynamic-explode:visible[id^=de]');if(dynamicExplodeDiv.length>0&&dynamicExplodeDiv.find('.form-input').length>0&&!(dynamicExplodeDiv.find('.form-input').val().trim())){validationMessage+=dynamicExplodeDiv.find('.form-label:visible')[0].innerHTML+", ";}
validationMessage=StringUtil.removeTextFromEnd(validationMessage,", ");if(validationMessage){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.de.required',replacements:[validationMessage],requestValidation:isRequestValidationEnabled});return true;}
return false;}
var multi_select={validate:function(){removeErrorsByQuestionIDFromValidationArray(questionID);removeErrorsByQuestionIDFromValidationArray(getErrorSpanIDSuffixForOtherError());var checkedElements=getSelectedValues();if(!checkedElements.length){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.multichoice.required',replacements:[],requestValidation:isRequestValidationEnabled});return;}
if(validatedSection.exclusiveAnswers){var selectedExclusiveAnswer=this.getSelectedExclusiveAnswer(checkedElements);if(selectedExclusiveAnswer&&this.hasExclusiveError(checkedElements,selectedExclusiveAnswer)){if($(checkedElements).parents('.other-option').length>0&&hasValidationErrorForOtherOption()){return;}
return;}}
if(validatedSection.validationType==='exactly'&&!isRequestValidationEnabled){if(checkedElements.length!=validatedSection.numberOfAnswersLimit){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:"application.takesurvey.multichoice.exact.minanswers.failure",replacements:[validatedSection.numberOfAnswersLimit,checkedElements.length]});return;}}else if(validatedSection.validationType==='as-many-as'&&!isRequestValidationEnabled){if(checkedElements.length>validatedSection.numberOfAnswersLimit){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:"application.takesurvey.multichoice.asmanyas.minanswers.failure",replacements:[validatedSection.numberOfAnswersLimit,checkedElements.length]});return;}}else if(validatedSection.validationType==='at-least'&&!isRequestValidationEnabled){if(checkedElements.length<validatedSection.numberOfAnswersLimit){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:"application.takesurvey.multichoice.atleast.minanswers.failure",replacements:[validatedSection.numberOfAnswersLimit,checkedElements.length]});return;}}
if($(checkedElements).parents('.other-option').length>0){if(hasValidationErrorForOtherOption()){return;}}
if(this.hasValidationErrorForOtherAndNA(checkedElements)){return;}else if(this.hasValidationErrorForOnlyOther(checkedElements)){return;}
if(sectionDiv.find('.dynamic-explode:visible').length&&hasValidationErrorForDynamicExplode(checkedElements)){}},hasValidationErrorForOtherAndNA:function(checkedElements){return checkedElements.parents('select.has-other.has-na').length>0&&sectionDiv.find('select option:nth-last-child(2)').is(':selected')&&hasValidationErrorForOtherOption();},hasValidationErrorForOnlyOther:function(checkedElements){return checkedElements.parents('select.has-other').length>0&&sectionDiv.find('select option:last').is(':selected')&&hasValidationErrorForOtherOption();},addLiveValidationEvent:function(){var eventElement;if(multiChoice_type.isCheckbox(questionSubType)||multiChoice_type.isImage(questionSubType)){eventElement="input[name='m_"+questionID+"']";}
if(multiChoice_type.isDropdown(questionSubType)){eventElement="select[name='m_"+questionID+"']";}
addEventToElement(eventElement,'change');addEventToOtherAndDynamicExplode(true,true);},getSelectedExclusiveAnswer:function(checkedElements){for(var i=0;i<checkedElements.length;i++){if(validatedSection.exclusiveAnswers.indexOf($(checkedElements[i]).val())>-1){return $(checkedElements[i]);}}},hasExclusiveError:function(checkedElements,selectedExclusiveAnswer){if(checkedElements.length>1){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.multichoice.exclusive.failure',replacements:[this.getExclusiveAnswerText(selectedExclusiveAnswer)],requestValidation:isRequestValidationEnabled});return false;}
return true;},getExclusiveAnswerText:function(selectedExclusiveAnswer){if(multiChoice_type.isDropdown(questionSubType)){return $(selectedExclusiveAnswer).text();}
return $(selectedExclusiveAnswer).siblings('.control-label').html();}};var cardSorting={validate:function(){removeErrorsByQuestionIDFromValidationArray(questionID);var categoryMetadata={"nonEmptyCategoryCount":0,"categoryCountMap":{}}
var answeredCount=this.getTotalAnswerGivenCount();this.populateCategoryMetaData(categoryMetadata);var total=0;var hiddenFields=sectionDiv.find(".answer-container").find("input[type=hidden]");$(hiddenFields).each(function(){total++;});if(validatedSection.validationType>-1){if(answeredCount===0&&!this.isAtMostValidation(validatedSection.validationType)){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:this.getValidationMessage(),replacements:[],requestValidation:isRequestValidationEnabled});return;}
if(this.isValidateExactly(validatedSection.validationType)&&!isRequestValidationEnabled&&this.validateExactly(answeredCount,validatedSection.numberOfAnswersLimit)){return;}else if(this.isValidateAtMost(validatedSection.validationType)&&!isRequestValidationEnabled&&this.validateAtMost(answeredCount,validatedSection.numberOfAnswersLimit)){return;}else if(this.isValidateAtLeast(validatedSection.validationType)&&!isRequestValidationEnabled&&this.validateAtLeast(answeredCount,validatedSection.numberOfAnswersLimit)){return;}else if(this.isValidateExactlyPerCategory()&&!isRequestValidationEnabled&&this.validateExactlyPerCategory(categoryMetadata,validatedSection.numberOfAnswersLimit,validatedSection.numberOfClosedSortingCategories)){return;}else if(this.isValidateAtMostPerCategory()&&!isRequestValidationEnabled&&this.validateAtMostPerCategory(categoryMetadata,validatedSection.numberOfAnswersLimit,validatedSection.numberOfClosedSortingCategories)){return;}else if(this.isValidateAtLeastPerCategory()&&!isRequestValidationEnabled&&this.validateAtLeastPerCategory(categoryMetadata,validatedSection.numberOfAnswersLimit,validatedSection.numberOfClosedSortingCategories)){return;}else if(this.isCustomValidation()&&this.applyCustomValidation(validatedSection,categoryMetadata)){return;}}},isAtMostValidation:function(validationType){return this.isValidateAtMost(validationType)||this.isValidateAtMostPerCategory()},applyCustomValidation:function(validatedSection,categoryMetadata){var categoryValidationObject=validatedSection.customValidtion;for(var categoryID in categoryValidationObject){var categoryValidationDetails=categoryValidationObject[categoryID];if(this.isValidateExactly(categoryValidationDetails.validationType)&&!isRequestValidationEnabled&&this.validateCustomExactly(categoryMetadata,categoryID,categoryValidationDetails)){return;}else if(this.isValidateAtMost(categoryValidationDetails.validationType)&&!isRequestValidationEnabled&&this.validateCustomAtMost(categoryMetadata,categoryID,categoryValidationDetails)){return;}else if(this.isValidateAtLeast(categoryValidationDetails.validationType)&&!isRequestValidationEnabled&&this.validateCustomAtLeast(categoryMetadata,categoryID,categoryValidationDetails)){return;}}
return false;},validateCustomExactly:function(categoryMetadata,categoryID,categoryValidationDetails){var exactAnswerSize=categoryValidationDetails.numberOfAnswersLimit;var hasExactCount=function(){if(!categoryMetadata.categoryCountMap[categoryID]||exactAnswerSize!==categoryMetadata.categoryCountMap[categoryID]){return false;}
return true;};if(!hasExactCount()){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.cardsorting.exact.custom.validation.failure',replacements:[exactAnswerSize,categoryValidationDetails.name]});return true;}
return false;},validateCustomAtMost:function(categoryMetadata,categoryID,categoryValidationDetails){var atMostAnswerSize=categoryValidationDetails.numberOfAnswersLimit;var hasAtMostCount=function(){if(categoryMetadata.categoryCountMap[categoryID]>atMostAnswerSize){return false;}
return true;};if(!hasAtMostCount()){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.cardsorting.atmost.custom.validation.failure',replacements:[atMostAnswerSize,categoryValidationDetails.name]});return true;}
return false;},validateCustomAtLeast:function(categoryMetadata,categoryID,categoryValidationDetails){var atLeastAnswerSize=categoryValidationDetails.numberOfAnswersLimit;var hasAtLeastCount=function(){if(!categoryMetadata.categoryCountMap[categoryID]||categoryMetadata.categoryCountMap[categoryID]<atLeastAnswerSize){return false;}
return true;};if(!hasAtLeastCount()){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.cardsorting.atleast.custom.validation.failure',replacements:[atLeastAnswerSize,categoryValidationDetails.name]});return true;}
return false;},isValidateAtLeast:function(validationType){return validationType===VALIDATE_CARD_SORTING_ATLEAST;},isValidateExactlyPerCategory:function(){return validatedSection.validationType===VALIDATE_EXACTLY_PER_CATEGORY;},isValidateAtMostPerCategory:function(){return validatedSection.validationType===VALIDATE_ATMOST_PER_CATEGORY;},isValidateAtLeastPerCategory:function(){return validatedSection.validationType===VALIDATE_ATLEAST_PER_CATEGORY;},isCustomValidation:function(){return validatedSection.validationType===CATEGORY_CUSTOM_VALIDATION;},validateAtLeast:function(answerPresentCounter,atLeastAnswerSize){if(answerPresentCounter<atLeastAnswerSize){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:this.getValidateAtLeastErrorMessageKey(),replacements:[atLeastAnswerSize,answerPresentCounter]});return true;}
return false;},getValidateAtLeastErrorMessageKey:function(){return 'application.takesurvey.cardsorting.atleast.validation.failure';},isValidateAtMost:function(validationType){return validationType===VALIDATE_CARD_SORTING_ATMOST;},validateAtMost:function(answerPresentCounter,atTheMostAnswerSize){if(answerPresentCounter>atTheMostAnswerSize){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:this.getValidateAtMostErrorMessageKey(),replacements:[atTheMostAnswerSize,answerPresentCounter]});return true;}
return false;},getValidateAtMostErrorMessageKey:function(){return 'application.takesurvey.cardsorting.atmost.validation.failure';},isValidateExactly:function(validationType){return validationType===VALIDATE_CARD_SORTING_EXACTLY},validateExactly:function(answerPresentCounter,exactAnswerSize){if(answerPresentCounter!==exactAnswerSize){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:this.getValidateExactlyErrorMessageKey(),replacements:[exactAnswerSize,answerPresentCounter]});return true;}
return false;},getValidateExactlyErrorMessageKey:function(){return 'application.takesurvey.cardsorting.exact.validation.failure';},isValidNonEmptyCategoryCount:function(numberOfClosedSortingCategories,categoryMetadata){return numberOfClosedSortingCategories>0?categoryMetadata.nonEmptyCategoryCount===numberOfClosedSortingCategories:true;},validateExactlyPerCategory:function(categoryMetadata,exactAnswerSize,numberOfClosedSortingCategories){var hasExactCount=function(){for(var key in categoryMetadata.categoryCountMap){if(categoryMetadata.categoryCountMap[key]!==exactAnswerSize){return false;}}
return true;};if(!this.isValidNonEmptyCategoryCount(numberOfClosedSortingCategories,categoryMetadata)||!hasExactCount()){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:this.getValidateExactlyPerCategoryErrorMessageKey(),replacements:[exactAnswerSize]});return true;}
return false;},getValidateExactlyPerCategoryErrorMessageKey:function(){return 'application.takesurvey.cardsorting.exact.per.category.validation.failure';},validateAtMostPerCategory:function(categoryMetadata,atMostAnswerSize,numberOfClosedSortingCategories){var hasAtMostCount=function(){for(var key in categoryMetadata.categoryCountMap){if(categoryMetadata.categoryCountMap[key]>atMostAnswerSize){return false;}}
return true;};if(!hasAtMostCount()){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:this.getValidateAtMostPerCategoryErrorMessageKey(),replacements:[atMostAnswerSize]});return true;}
return false;},getValidateAtMostPerCategoryErrorMessageKey:function(){return 'application.takesurvey.cardsorting.atmost.per.category.validation.failure';},validateAtLeastPerCategory:function(categoryMetadata,atLeastAnswerSize,numberOfClosedSortingCategories){var hasAtLeastCount=function(){for(var key in categoryMetadata.categoryCountMap){if(categoryMetadata.categoryCountMap[key]<atLeastAnswerSize){return false;}}
return true;};if(!this.isValidNonEmptyCategoryCount(numberOfClosedSortingCategories,categoryMetadata)||!hasAtLeastCount()){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:this.getValidateAtLeastPerCategoryErrorMessageKey(),replacements:[atLeastAnswerSize]});return true;}
return false;},getValidateAtLeastPerCategoryErrorMessageKey:function(){return 'application.takesurvey.cardsorting.atleast.per.category.validation.failure';},addLiveValidationEvent:function(){var eventElement=sectionDiv.find(".answer-container").find("input[type=hidden][name^='l_"+questionID+"']");addEventToElement(eventElement,'change');},getTotalAnswerGivenCount:function(){var answerPresentCounter=0;var selectElements=sectionDiv.find('.answer-container').find('input[type=hidden], select');$(selectElements).each(function(){if($(this).val().trim().length!==0&&$(this).val().trim()!==''){answerPresentCounter++;}});return answerPresentCounter;},getElements:function(){return sectionDiv.find('.answer-container').find('input[type=hidden], select');},getValidationMessage:function(){return "application.takesurvey.cardsorting.required";},populateCategoryMetaData:function(categoryMetadata){var selectElements=sectionDiv.find('.answer-container').find('input[type=hidden], select');var isCardCategorized=function(){return $(this).val().trim().length!==0&&$(this).val().trim()!=='';}
var populateMetadataProperties=function(values){if(values&&values.length===2&&values[1].length!==0){var category=values[1];if(category in categoryMetadata.categoryCountMap){categoryMetadata.categoryCountMap[category]+=1;}else{categoryMetadata.categoryCountMap[category]=1;categoryMetadata.nonEmptyCategoryCount++;}}}
$(selectElements).each(function(){if(isCardCategorized.call(this)){var values=$(this).val().split("-",2);populateMetadataProperties(values);}});}};var text_highlighter={validate:function(){removeErrorsByQuestionIDFromValidationArray(questionID);var checkedElements=$("#color-option-popup-hidden-question-"+questionID).find("input[type='hidden']");if(!checkedElements.length){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.texthighlighter.required',replacements:[],requestValidation:isRequestValidationEnabled});return;}},addLiveValidationEvent:function(){var eventElement=sectionDiv.find(".ts-btn-wrapper > .primary-btn");console.log(eventElement.html());addEventToElement(eventElement,'click');}};var gabor_granger={validate:function(){removeErrorsByQuestionIDFromValidationArray(questionID);var checkedElements=sectionDiv.find('input:checked');if(!checkedElements.length){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.unichoice.required',replacements:[],requestValidation:isRequestValidationEnabled});return;}},addLiveValidationEvent:function(){var eventElement="input[name='u_"+questionID+"']";addEventToElement(eventElement,'change');}};function validateMinRequirementsForSection(){if(card_sorting.isOpenCardSorting(questionSubType)){cardSortingMinRequirement.validate()}else if(question_type.isText(questionType)||question_type.isContactInfo(questionType)){text.validateMinimumRequirements();}else if(question_type.isVanWestendorp(questionType)){vanWestendorpMinRequirement.validate();}}
var vanWestendorpMinRequirement={validateNumericInputsMinRequirement:function(inputElement,i,question){return vanWestendorp.validateNumericInput(inputElement)||vanWestendorp.validateNumericInputInRange(inputElement)||vanWestendorp.validateCategoryWiseInput(i,question.priceCategory);},removeZeroInputsError:function(inputValues){if(vanWestendorp.isAllZeroInput(inputValues)){removeErrorsByQuestionIDFromValidationArray(questionID);}},isInputNotEmptyAndValidMinRequirements:function(inputElement,i,question){return!StringUtil.isEmpty(inputElement.val())&&this.validateNumericInputsMinRequirement(inputElement,i,question);},validate:function(){var inputValues=[];vanWestendorp.populateInputValuesArray(inputValues);this.removeZeroInputsError(inputValues);if(!vanWestendorp.isAllZeroInput(inputValues)){for(var i=0;i<validatedSection.rows.length;i++){var question=validatedSection.rows[i];questionSubType=question.subType;questionID=question.ID;var answerID=question.answerID;removeErrorsByQuestionIDFromValidationArray(questionID);var inputElement=vanWestendorp.getInputValue(answerID);if(this.isInputNotEmptyAndValidMinRequirements(inputElement,i,question)){continue;}else{vanWestendorp.validateRequired(inputElement);}}}}};var cardSortingMinRequirement={validate:function(){removeErrorsByQuestionIDFromValidationArray(questionID);var elements=this.getElements();$(elements).each(function(){var values=$(this).val().split("-",2);if(values&&values.length==2&&values[1].length==0){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.cardsorting.category.non.empty',replacements:[],requestValidation:false});return;}else if(values&&values.length==2&&values[1].length>100){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.cardsorting.category.max.length',replacements:[values[1].length],requestValidation:false});return;}});},getElements:function(){return sectionDiv.find('.answer-container').find('input[type=hidden], select');}};function validateSection(){if(question_type.isUniChoice(questionType)){return single_select.validate();}
if(question_type.isNPS(questionType)){return nps.validate();}
if(question_type.isCSAT(questionType)){return csat.validate();}
if(question_type.isMultiChoice(questionType)&&multiChoice_type.isLookUpTable(questionSubType)){return multichoiceLookup.validate();}
if(question_type.isMultiChoice(questionType)){return multi_select.validate();}
if(question_type.isText(questionType)||question_type.isContactInfo(questionType)||question_type.isElectronicSignature(questionType)||question_type.isPanelRecruitment(questionType)){return text.validate();}
if(question_type.isMatrix(questionType)){return matrix.validate();}
if(question_type.isOldVanWestenDrop(questionType)){return oldVanWestenDrop.validate();}
if(question_type.isVanWestendorp(questionType)){return vanWestendorp.validate();}
if(question_type.isRankOrder(questionType)){return rankOrder.validate();}
if(question_type.isDate(questionType)){return date.validate();}
if(question_type.isStaticContent(questionType)){return staticContent.validate();}
if(question_type.isConstantSum(questionType)){return constantSum.validate();}
if(question_type.isBudget(questionType)){return budget.validate();}
if(question_type.isHeatMap(questionType)){return heatMap.validate();}
if(question_type.isReferenceData(questionType)){return referenceData.validate();}
if(question_type.isSideBySideMatrix(questionType)){return sideBySideMatrix.validate();}
if(question_type.isHotSpot(questionType)){return hotSpot.validate();}
if(question_type.isMaxDiff(questionType)){maxDiff.validate();}
if(question_type.isUnichoiceLookup(questionType)){return unichoiceLookup.validate();}
if(question_type.isCustomNumericValidator(questionType)){return customNumericValidator.validate();}
if(question_type.isMultiTierLookup(questionType)){return multiTierLookup.validate();}
if(question_type.isStoreLocator(questionType)){return storeLocator.validate();}
if(question_type.isFileUpload(questionType)){return fileUpload.validate();}
if(question_type.isTubePulse(questionType)){return tubePulse.validate();}
if(question_type.isConjoint(questionType)){return conjoint.validate();}
if(question_type.isFlexMatrix(questionType)){return flexMatrix.validate();}
if(question_type.isNPSPlus(questionType)){return NpsPLus.validate();}
if(question_type.isCardSortingType(questionType)){return cardSorting.validate();}
if(question_type.isTextHighlighter(questionType)){return text_highlighter.validate();}
if(question_type.isHotSpotNew(questionType)){return hotSpotNew.validate();}
if(question_type.isGaborGranger(questionType)){return gabor_granger.validate();}}
function removeErrorsByQuestionIDFromValidationArray(questionID){validationErrorArray=$.grep(validationErrorArray,function(error){return error.questionID!=questionID;});}
function allowOnlyNumericValues(textBoxValue){if(isNaN(textBoxValue)){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.battery.custom.SpreadSheetSumCustomValidator.format',replacements:[],requestValidation:isRequestValidationEnabled});return false;}
return true;}
function checkCustomValidation(className,argValue,textBoxElements,textBoxValue){return allowOnlyNumericValues(textBoxValue)&&customValidate(className,argValue,textBoxElements);}
function customValidate(className,argValue,textBoxElements){if(className==="com.surveyconsole.infra.customvalidator.SpreadSheetSumCustomValidator"){return sumOfRowsValidation(textBoxElements,argValue);}else if(className==="com.surveyconsole.infra.customvalidator.SpreadSheetSumColumnValidator"){return sumOfColsValidation(argValue,textBoxElements);}else if(className==="com.surveyconsole.infra.customvalidator.SpreadSheetTotalSumCustomValidator"){return sumAcrossAllRowsValidation(argValue);}}
function sumOfRowsValidation(textBoxElements,argValue){var total=0;$(textBoxElements).each(function(){total=!StringUtil.isEmpty($(this).val())?total+parseFloat($(this).val()):total;});if(total!==parseFloat(argValue)){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.battery.custom.SpreadSheetSumCustomValidator.total',replacements:[parseFloat(argValue)],requestValidation:isRequestValidationEnabled});return false;}
return true;}
function sumOfColsValidation(argValue,textBoxElements){for(var colVal=0;colVal<textBoxElements.length;colVal++){var total=0;for(var j=0;j<validatedSection.rows.length;j++){var question=validatedSection.rows[j];var rowElements=sectionDiv.find('tr[id=\'questionRow'+
question.ID+'\']').find('input[type=\'text\'], '+
"input[type=email], "+
"input[type=number], "+
"input[type=tel], "+
"input[type=date]");total=!StringUtil.isEmpty($(rowElements[colVal]).val())?total+parseFloat($(rowElements[colVal]).val()):total;}
if(total!==parseFloat(argValue)){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.battery.custom.SpreadSheetSumColumnValidator.total',replacements:[parseFloat(argValue)],requestValidation:isRequestValidationEnabled});return false;}}
return true;}
function sumAcrossAllRowsValidation(argValue){var total=0;for(var j=0;j<validatedSection.rows.length;j++){var question=validatedSection.rows[j];var rowElements=sectionDiv.find('tr[id=\'questionRow'+
question.ID+'\']').find('input[type=\'text\'], '+
"input[type=email], "+
"input[type=number], "+
"input[type=tel], "+
"input[type=date]");for(var k=0;k<rowElements.length;k++){total=!StringUtil.isEmpty($(rowElements[k]).val())?total+parseFloat($(rowElements[k]).val()):total;}}
if(total!==parseFloat(argValue)){addErrorToValidationArray({firstQuestionID:firstQuestionID,questionID:questionID,messageKey:'application.takesurvey.battery.custom.SpreadSheetTotalSumCustomValidator.total',replacements:[parseFloat(argValue)],requestValidation:isRequestValidationEnabled});return false;}
return true;}
function addErrorToValidationArray(errorJSON){removeClassHiddenFromErrorSpan(sectionDiv);var found=validationErrorArray.some(function(existingError){return existingError===errorJSON;});if(!found){validationErrorArray.push(errorJSON);}}
return execute;})();var qp_validateSaveAndContinue=(function(){var validationErrorArray;function execute(){resetAndHideErrors();var emailFieldValue=$('[name="emailAddress"]').val();var confirmEmailFieldValue=$('[name="emailAddressConfirm"]').val();validationErrorArray=[];addEventToElement();if(emailFieldValue===''||!validateEmail(emailFieldValue)){validationErrorArray.push({errorKey:'Email',messageKey:'application.takesurvey.validation.text.email.failure',replacements:[]});}
if(confirmEmailFieldValue===''||confirmEmailFieldValue!==emailFieldValue){validationErrorArray.push({errorKey:'ConfirmEmail',messageKey:'application.takesurvey.validation.confirm.email.not.same',replacements:[]});}
if(validationErrorArray.length){populateErrors(validationErrorArray);return false;}
return true;}
function addEventToElement(){$('input[name=emailAddress],input[name=emailAddressConfirm]').on('change',function(){qp_validateSaveAndContinue();});}
return execute;})();var qp_validateSignupForFree=(function(){var validationErrorArray;function execute(){resetAndHideErrors();var emailFieldValue=$('[name="email"]').val();validationErrorArray=[];addEventToElement();if(emailFieldValue!==''&&!validateEmail(emailFieldValue)){validationErrorArray.push({errorKey:'Email',messageKey:'application.takesurvey.validation.text.email.failure',replacements:[]});}
if(validationErrorArray.length){populateErrors(validationErrorArray);return false;}
return true;}
function addEventToElement(){$('input[name="email"]').on('change',function(){qp_validateSignupForFree();});}
return execute;})();function populateErrors(validationErrorArray){for(var i=0;i<validationErrorArray.length;i++){var validationError=validationErrorArray[i];var message=translatedValidationMessages['systemValidations'][validationError.messageKey];message=replaceValues(message,validationError.replacements);$('#errorSpan_'+validationError.errorKey).html(message?message:validationError.messageKey);$('#errorSpan_'+validationError.errorKey).removeClass('hidden vhidden');}}
function validateEmail(textValue){var regx=new RegExp(EMAIL_REGEX_PATTERN);return regx.test(textValue&&textValue.trim());}
function replaceValues(message,replacements){if(message){for(var i=0;i<5;i++){message=message.replace(new RegExp('[$]?[{]'+i+'[}]','gi'),replacements[i]);}}
return message;}
function resetAndHideErrors(){$('[id^=errorSpan_]').html('');$('[id^=errorSpan_], .error-wrapper').addClass('vhidden');$('.error-line').removeClass('error-line');}
function removeClassHiddenFromErrorSpan(sectionDiv){$(sectionDiv).find('span[id^=errorSpan_]').removeClass('vhidden');}
function isRenderedInMobileView(validatedSection){return validatedSection.isMobileView&&$('[name="isMobile"]').val()=="true";}
function postProcessElectronicSignatureValidation(){$(".els-verify-email").hide();$(".els-signature-sec").show();}