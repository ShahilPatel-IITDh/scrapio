"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[36745],{93304:function(e,n,t){t.d(n,{T:function(){return v}});var i=t(21154),o=t(10860),l=t(8605),r=t(88689),a=t(66331);t(62814);var s=t(19278);function d(){let e=(0,i.Z)(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]);return d=function(){return e},e}function u(){let e=(0,i.Z)(["\n  .spin {\n    width: 24px;\n    height: 24px;\n    animation: "," 1.8s linear infinite;\n    ","\n  }\n"]);return u=function(){return e},e}let c=(0,s.F4)(d()),m=s.ZP.div.withConfig({componentId:"sc-164b0f4c-0"})(u(),c,r.bK),v=e=>(0,o.tZ)(m,{...e,children:(0,o.tZ)(l.E,{src:e.iconSrc||a.lY7,className:"spin"})})},70722:function(e,n,t){t.d(n,{R:function(){return I}});var i=t(98356),o=t(2177);let l={[o.CZ.OWNER]:i.C.OWNER,[o.CZ.CREATOR]:i.C.CREATOR,[o.CZ.EDITOR]:i.C.EDITOR,[o.CZ.VIEWER]:i.C.VIEWER};var r=t(27080),a=t(58279),s=t(84802),d=t(70797),u=t(1286),c=t(85001),m=t(84790),v=t(15597),p=t(63971);let _=async e=>{try{var n,t,i,o;let l=await (0,v.l3)(m.Sn,{subdomainIds:[e]}),r=null===(n=l.redirectSubdomainPermissions)||void 0===n?void 0:n[0];if(!r||(null==r?void 0:null===(t=r.result)||void 0===t?void 0:t.error))throw Error(null!==(o=null==r?void 0:null===(i=r.result)||void 0===i?void 0:i.error)&&void 0!==o?o:"error fetching permissions");return r}catch(e){console.error(e),(0,p._p)("Error fetching permissions for this subdomain",e)}},f=async e=>{try{var n,t,i;let o=await (0,v.N9)(c.qy,{assetIds:[e],assetType:u.W3.WhiteLabel}),l=null===(n=o.getAssetDetails)||void 0===n?void 0:n[0];if(!l||(null==l?void 0:l.result.error))throw Error(null!==(i=null==l?void 0:null===(t=l.result)||void 0===t?void 0:t.error)&&void 0!==i?i:"error fetching permissions");return l}catch(e){console.error(e),(0,p._p)("Error fetching permissions for this subdomain",e)}};var h=t(57778),C=t(23627),b=t(92777),y=t(62814),g=t(11186),R=t(82637),E=t(27531);let S=e=>e?e.map(e=>{let n=e.permissionName;return{name:e.entityName,entityId:e.entityId,entityType:e.entityType,icon:(0,d.h0)(),access:C.PK[n],initials:(0,d.Jt)(e.entityName)}}):[];function I(e){var n,t,u;let{batchId:c,directoryId:m,isBatch:v,pageId:p,shouldFetch:C=!0,subdomainId:I,pageTemplateId:D}=e,[k,w]=(0,y.useState)([]),[x,O]=(0,y.useState)(!1),[T,P]=(0,y.useState)(),Z=(0,E.t)(),[N,M]=(0,y.useState)(),[A,B]=(0,y.useState)(!0),{token:W}=(0,b.F)(),[V,F]=(0,y.useState)(Boolean(p&&p===r.nd)),[{isOwner:L,ownerEntityId:z,ownerFullName:H,entityPermissions:U},X]=(0,y.useState)({ownerFullName:"",ownerEntityId:"",isOwner:!1,entityPermissions:[]}),{jwt:G}=(0,b.F)(),Y=null==G?void 0:G.ithacaId,q=(0,R.B8)(),K=(0,g.Wo)(p),j=(0,y.useCallback)(async()=>{let e=[],n=[],t=!1,i="",o="";try{var l,u,C,b,y,g,R,E,k,x,T,N,A,V,L,z,H,U,G,j,J,Q,$,ee,en,et,ei,eo,el,er,ea,es,ed;if(B(!0),M(""),p&&!q){if(p===r.nd)t=!0,F(!0);else{F(!1);let{getAllSharedPagePermissions:r}=await (0,d.SE)({pageId:p});n=r,e=[...S(r)],t=await (0,s.x)({pageId:p}),i=null!==(g=(null!==(y=null==K?void 0:null===(l=K.owner)||void 0===l?void 0:l.displayName)&&void 0!==y?y:"").length>0?null==K?void 0:null===(u=K.owner)||void 0===u?void 0:u.displayName:null==K?void 0:null===(C=K.owner)||void 0===C?void 0:C.email)&&void 0!==g?g:"",o=null!==(R=null==K?void 0:null===(b=K.owner)||void 0===b?void 0:b.ithacaId)&&void 0!==R?R:""}}else if(v&&c&&!q){let l=await (0,d.D)({batchId:c,scopePermissions:!1},null!=W?W:"");n=null==l?void 0:null===(E=l.batch)||void 0===E?void 0:E.entityPermissions,e=[...S(null==l?void 0:null===(k=l.batch)||void 0===k?void 0:k.entityPermissions)],t=null==l?void 0:null===(x=l.batch)||void 0===x?void 0:x.batchOwner.isOwner,i=null!==(A=null==l?void 0:null===(T=l.batch)||void 0===T?void 0:T.batchOwner.user.fullName)&&void 0!==A?A:"",o=null!==(V=null==l?void 0:null===(N=l.batch)||void 0===N?void 0:N.batchOwner.user.ithacaId)&&void 0!==V?V:""}else if(m){let l=await (0,d.MW)({directoryId:m,scopePermissions:!1});n=null===(L=l.directory)||void 0===L?void 0:L.entityPermissions,e=[...S(null===(z=l.directory)||void 0===z?void 0:z.entityPermissions)],i=null===(H=l.directory)||void 0===H?void 0:H.user.fullName,t=Boolean(null===(U=l.directory)||void 0===U?void 0:U.isOwner),o=null!==(j=null==l?void 0:null===(G=l.directory)||void 0===G?void 0:G.user.ithacaId)&&void 0!==j?j:""}else if(D){let{getAssetDetails:l,template:r}=await (0,h.Pv)(D,null!=W?W:"");n=null!==(eo=null==l?void 0:null===(J=l[0])||void 0===J?void 0:null===(Q=J.entityPermissions)||void 0===Q?void 0:Q.map(e=>({...e,entityName:null!==(ei=e.entityName)&&void 0!==ei?ei:""})))&&void 0!==eo?eo:[],e=[...S(n)],i=null!==(el=(null==r?void 0:null===($=r.owner)||void 0===$?void 0:$.displayName)||(null==r?void 0:null===(ee=r.owner)||void 0===ee?void 0:ee.email))&&void 0!==el?el:"",er=Y===(null==r?void 0:null===(en=r.owner)||void 0===en?void 0:en.ithacaId),t=void 0!==er?er:"",o=null!==(ea=null==r?void 0:null===(et=r.owner)||void 0===et?void 0:et.ithacaId)&&void 0!==ea?ea:""}else if(I){if(v){let i=await _(null!=I?I:"");n=(null!==(es=null==i?void 0:i.entityPermissions)&&void 0!==es?es:[]).map(e=>{if(e)return{...e,entityType:Number(e.entityType)}}),e=[...S(n)],t=!0}else{let i=await f(null!=I?I:"");n=(null!==(ed=null==i?void 0:i.entityPermissions)&&void 0!==ed?ed:[]).map(e=>{if(e)return{...e,entityType:Number(e.entityType)}}),e=[...S(i.entityPermissions)],t=!0}}let eu=e.find(e=>Number(e.entityType)===a.DC.ORG);Z()&&(O(Boolean(eu)),P(null==eu?void 0:eu.access),w([...e]),X({ownerEntityId:o,ownerFullName:i,isOwner:t,entityPermissions:n}))}catch(e){console.error(e),Z()&&M(e.message)}finally{Z()&&B(!1)}},[c,m,v,q,Z,p,null==K?void 0:null===(n=K.owner)||void 0===n?void 0:n.displayName,null==K?void 0:null===(t=K.owner)||void 0===t?void 0:t.email,null==K?void 0:null===(u=K.owner)||void 0===u?void 0:u.ithacaId,W,D,Y,I]);(0,y.useEffect)(()=>{let e=Boolean(c||m||p||I||D);C&&Z()&&e&&j()},[c,m,v,Z,p,Y,q,j,C,D,I]);let J=(0,y.useMemo)(()=>L?o.CZ.CREATOR:(0,d.vK)(L,U),[L,U]),Q=p?!(L||J===o.CZ.EDITOR):!L,$=(0,y.useMemo)(()=>{let e={entityId:z,entityName:H,entityType:a.DC.USER,permissionName:i.C.OWNER};return[e,...k.map(e=>({entityId:e.entityId,entityName:e.name,entityType:"string"==typeof e.entityType?parseInt(e.entityType):e.entityType,permissionName:l[e.access]}))]},[k,z,H]);return{allPermissions:$,existingCollaborators:k,hasOrgEntity:x,orgEntityAccess:T,permissionName:J,ownerEntityId:z,ownerFullName:H,viewOnly:Q,isOwner:L,loading:A,error:N,entityPermissions:U,fetchPermissions:j,isPageUnpublished:V}}},82637:function(e,n,t){t.d(n,{B8:function(){return l}});var i=t(45455),o=t(37113);function l(){var e;let n=(0,o.useRouter)(),t=(0,i.RL)();return Boolean(t||(null==n?void 0:null===(e=n.query)||void 0===e?void 0:e.demo)==="true")}t(62814)},46453:function(e,n,t){t.d(n,{Au:function(){return f},KD:function(){return b},t7:function(){return h},y2:function(){return C}});var i=t(60796),o=t(10876),l=t(68592),r=t(92777),a=t(62814),s=t(48267),d=t(39959),u=t(71639),c=t(9965),m=t.n(c),v=t(87702),p=t.n(v),_=t(77591);function f(e,n){return(0,a.useMemo)(()=>p()(e,m()(e,null!=n?n:"",{insideWords:!0})),[e,n])}let h=(e,n)=>{var t,i,l,d,u;let c=(0,s.wh)(),{jwt:m}=(0,r.F)(),v=null!==(l=null==m?void 0:null===(t=m.org)||void 0===t?void 0:t.orgId)&&void 0!==l?l:"",p=(0,o.oq)({orgId:v,teamId:e,orderBy:n}),{mutate:f}=(0,_.kY)(),{data:h,isValidating:C}=(0,_.ZP)(p,v?c:async()=>void 0,{revalidateOnMount:!0,revalidateOnFocus:!0,revalidateOnReconnect:!0}),b=(0,o.eo)(null==h?void 0:null===(i=h.teams)||void 0===i?void 0:i[0]),[y,g]=(0,a.useState)(null);(0,a.useEffect)(()=>{(null==b?void 0:b.directChildren)&&!y&&g(null==b?void 0:b.directChildren)},[b,y]);let R=null!==(u=null!==(d=null==b?void 0:b.directChildren)&&void 0!==d?d:y)&&void 0!==u?u:[];return{team:b,subteams:R,subteamsLoading:!y&&C,refreshTeam:()=>f(p)}},C=e=>{var n,t;let{limit:o=i.gT,offset:d=0,orderBy:u=i.q.NameAsc,searchTerm:c,paginate:m=!0,teamId:v,directChildren:p=!1,topLevel:f=!1,members:h=!1}=e,{jwt:C}=(0,r.F)(),b=null!==(t=null==C?void 0:null===(n=C.org)||void 0===n?void 0:n.orgId)&&void 0!==t?t:"",y={orderBy:u};m&&(y.limit=o.toString(),y.offset=d.toString()),c&&(y.searchTerm=c),v&&(y.teamId=v);let g=new URLSearchParams(y).toString();p&&(g+="&directChildren"),f&&(g+="&topLevel"),h&&(g+="&members");let R=b?"".concat(l.vb.teams,"/").concat(b,"?").concat(g):null,E=(0,s.wh)(),{mutate:S}=(0,_.kY)(),{data:I,isValidating:D}=(0,_.ZP)(R,b?E:async()=>void 0,{revalidateOnMount:!0,revalidateOnFocus:!0,revalidateOnReconnect:!0}),[k,w]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{(null==I?void 0:I.teams)&&w(!0)},[I]),{loading:!k&&D,teams:null==I?void 0:I.teams,refreshTeams:()=>S(R)}};function b(){let e=(0,u.Z)();return(0,d.Z)(e.breakpoints.down("md"))}},22613:function(e,n,t){t.d(n,{C:function(){return C},Q:function(){return b}});var i=t(10860),o=t(98356),l=t(62398),r=t(4599),a=t(87946),s=t(18119),d=t(29548),u=t(33226),c=t(7136),m=t(62814);let v=e=>{let{assetId:n,isWhitelabel:t,isCodeSubdomain:o,trackingClickShareWithEveryone:a,trackingClickPermission:m}=e,v=(0,c.G)({assetId:n,isWhitelabel:Boolean(t),isCodeSubdomain:o,trackingClickShareWithEveryone:a});return(0,i.BX)(l.x,{display:"flex",pl:"8px",width:"100%",justifyContent:"space-between",alignItems:"center",children:[(0,i.tZ)(s.Z,{control:(0,i.tZ)(d.Z,{checked:v.checkboxChecked,disableRipple:!0,sx:{color:r.r.colors.primary.flowBlue,"&.Mui-checked":{color:r.r.colors.primary.flowBlue}},onChange:v.onChangeCheckbox}),label:v.label}),v.checkboxChecked&&(0,i.tZ)(u.zr,{disabled:!1,assetId:n,isWhitelabel:!0,isCodeSubdomain:o,permission:v.organizationPermission,trackingClickPermission:m,hideRemoveItem:!0})]})};var p=t(96845),_=t(42747),f=t(92777),h=t(91890);let C=e=>{let{assetId:n,isWhitelabel:t,isCodeSubdomain:o,subdomainName:a,trackingClickPermission:s,trackingClickPermissionDropdown:d,trackingClickShareWithEveryone:u}=e,{permissionsDisplayed:c,showShareWithEveryoneControls:m}=b(n,t,o);return(0,i.BX)(i.HY,{children:[(0,i.tZ)(y,{isWhitelabel:t}),(0,i.tZ)(l.x,{display:"flex",flexDirection:"column",width:"100%",children:null==c?void 0:c.map(e=>(0,i.tZ)(p.S,{assetId:n,permission:e,isWhitelabel:t,isCodeSubdomain:o,trackingClickPermission:s,trackingClickPermissionDropdown:d},e.entityId))}),m&&(0,i.tZ)(l.x,{width:"100%",height:"1px",backgroundColor:r.r.colors.secondary.border,mb:"16px"}),m&&(0,i.tZ)(v,{assetId:n,subdomainName:a,isWhitelabel:t,isCodeSubdomain:o,trackingClickShareWithEveryone:u,trackingClickPermission:s,trackingClickPermissionDropdown:d})]})};function b(e,n,t){var i;let l=(0,_.N)(e,n,t),r=(0,h.S)(e,n,t),a=null==l?void 0:l.draftPermissions,{jwt:s,hasOperation:d}=(0,f.F)(),u=d("hide:share_asset_orgwide"),c=(0,m.useMemo)(()=>null!==(i=null==a?void 0:a.filter((e,t)=>{var i;return e.entityId!==(null==s?void 0:null===(i=s.org)||void 0===i?void 0:i.orgId)&&(!n||0!==t)}))&&void 0!==i?i:[],[s,a,n]);return{permissionsDisplayed:c,showShareWithEveryoneControls:!u&&r!==o.C.VIEWER,currentUserAssetPermissions:r}}let y=e=>{let{isWhitelabel:n}=e;return(0,i.BX)(i.HY,{children:[(0,i.BX)(l.x,{justifyContent:"space-between",pb:"8px",pr:"16px",children:[(0,i.tZ)(a.xv,{fontSize:"12px",color:"primary.grey",children:"Member/Team"}),(0,i.tZ)(a.xv,{fontSize:"12px",color:"primary.grey",children:n?"Permissions":"Permission"})]}),(0,i.tZ)(l.x,{width:"100%",height:"1px",backgroundColor:r.r.colors.secondary.border,mb:"16px"})]})}},33226:function(e,n,t){t.d(n,{UF:function(){return x},OF:function(){return O},sV:function(){return T},F9:function(){return N},zr:function(){return E},R2:function(){return P},Au:function(){return Z}});var i=t(10860),o=t(98356),l=t(73063),r=t(23477),a=t(3462),s=t(64141),d=t(29492),u=t(95569),c=t(62814);let m=e=>{let n=function(e){let{dropdownState:n,item:t,subdomainItem:i}=e,o=i?i===n.whiteLabelItemSelected:t===n.itemSelected,l=(0,c.useRef)(null);return(0,c.useEffect)(()=>{o&&l.current&&l.current.focus()},[o,l]),{item:t,selected:t===n.itemSelected,onClick:()=>n.onNewItemSelected(null!=i?i:t),itemRef:l,isRemovePermissionItem:t===r.hP.REMOVE||i===r.Ik.REMOVE,subdomainItem:i}}(e);return(0,i.BX)(a.hP,{sx:{color:n.isRemovePermissionItem?"red":"black"},selected:n.selected,onClick:n.onClick,key:n.item,value:n.item,ref:n.itemRef,children:[(0,i.tZ)(d.Z,{children:(0,i.tZ)(s.J,{src:n.subdomainItem?_[n.subdomainItem]:p[n.item]})}),(0,i.tZ)(a.wo,{children:n.subdomainItem?r.Sy[n.subdomainItem]:r.b9[n.item]}),(0,i.tZ)(d.Z,{children:n.selected?(0,i.tZ)(v,{}):null})]})},v=()=>(0,i.tZ)(u.Z,{color:"primary",fontSize:"small"}),p={[r.hP.CREATOR]:"/icons/profile.svg",[r.hP.EDITOR]:"/icons/pencil-outline.svg",[r.hP.VIEWER]:"/icons/eye.svg",[r.hP.REMOVE]:"/icons/close.svg"},_={[r.Ik.SHARED]:"/icons/eye.svg",[r.Ik.REMOVE]:"/icons/close.svg"};var f=t(37714),h=t(4599),C=t(42747),b=t(58071),y=t(46453),g=t(43590),R=t(91379);let E=e=>{let n=function(e){var n,t;let{assetId:i,permission:o,isWhitelabel:l,isCodeSubdomain:a}=e,s=null==e?void 0:e.trackingClickPermission,d=(0,b.x)({menuId:"permissions-role-dropdown-".concat(null!==(n=o.entityId)&&void 0!==n?n:""),buttonId:"permissions-role-dropdown-button-".concat(null!==(t=o.entityId)&&void 0!==t?t:""),disabled:e.disabled}),{closeDropdown:u,isOpen:m,hasOpened:v}=d,p=(0,y.KD)(),_=(0,C.N)(i,l,a),f=(0,c.useCallback)(n=>{l?n===r.Ik.REMOVE?null==_||_.removeDraftPermission(e.permission):null==_||_.updateDraftPermission({...e.permission,permissionName:N[n]}):n===r.hP.REMOVE?null==_||_.removeDraftPermission(e.permission):null==_||_.updateDraftPermission({...e.permission,permissionName:T[n]}),null==s||s(T[n],e.assetId),u()},[l,s,e.assetId,e.permission,u,_]),h=(0,c.useRef)(null);(0,c.useEffect)(()=>{!m&&v&&h.current&&h.current.focus()},[v,m,h]);let g=O[o.permissionName],R=Z[o.permissionName];return{showMobileStyles:p,onNewItemSelected:f,itemSelected:g,itemsShown:x.filter(e=>e!==r.hP.CREATOR&&e!==r.hP.OWNER).filter(n=>!e.hideRemoveItem||n!==r.hP.REMOVE),...d,whiteLabelItemSelected:R,whiteLabelItemsShown:P,assetId:i,trackingClickPermissionDropdown:e.trackingClickPermissionDropdown}}(e);return n.showMobileStyles&&!e.disabled?(0,i.tZ)(S,{dropdownState:n,isWhitelabel:e.isWhitelabel}):(0,i.tZ)(D,{dropdownState:n,isWhitelabel:e.isWhitelabel})},S=e=>{let{dropdownState:n,isWhitelabel:t}=e;return t?(0,i.BX)(i.HY,{children:[(0,i.tZ)(a.RR,{...(0,f.m)(n)}),(0,i.tZ)(a.h_,{...(0,f.a)(n),children:n.whiteLabelItemsShown.map(e=>(0,i.tZ)(m,{item:r.hP.CREATOR,subdomainItem:e,dropdownState:n},e))})]}):(0,i.BX)(i.HY,{children:[(0,i.tZ)(a.RR,{...(0,f.m)(n)}),(0,i.tZ)(a.h_,{...(0,f.a)(n),children:n.itemsShown.map(e=>(0,i.tZ)(m,{item:e,dropdownState:n},e))})]})},I=e=>{let{dropdownIsOpen:n}=e;return(0,i.tZ)(i.HY,{children:n?(0,i.tZ)(R.Z,{fontSize:"large"}):(0,i.tZ)(g.Z,{fontSize:"large"})})},D=e=>{let{dropdownState:n,focusButtonOnNextRender:t,isWhitelabel:o}=e,{buttonRef:{current:s}}=n;return(0,c.useEffect)(()=>{t&&s&&(null==s||s.focus())},[t,s]),(0,i.BX)(i.HY,{children:[(0,i.tZ)(l.Z,{ref:n.buttonRef,id:w,"aria-controls":n.isOpen?k:void 0,"aria-haspopup":"true","aria-expanded":n.isOpen?"true":void 0,color:"primary",tabIndex:n.disabled?-1:0,disableRipple:!0,sx:{fontSize:"14px",textTransform:"none",border:"none","&:hover":{border:"none",cursor:n.disabled?"auto":"pointer",backgroundColor:n.disabled?"white":"inherit"},"&:focus":{backgroundColor:n.disabled?"white":h.r.colors.secondary.border}},onClick:e=>{var t;n.toggleDropdown(e.currentTarget),null===(t=n.trackingClickPermissionDropdown)||void 0===t||t.call(n,n.assetId)},variant:"outlined",endIcon:n.disabled?null:(0,i.tZ)(I,{dropdownIsOpen:n.isOpen}),children:o?r.Sy[n.whiteLabelItemSelected]:r.b9[n.itemSelected]}),(0,i.BX)(a.h_,{...(0,f.a)(n),children:[o&&n.whiteLabelItemsShown.map(e=>(0,i.tZ)(m,{item:r.hP.CREATOR,subdomainItem:e,dropdownState:n},e)),!o&&n.itemsShown.map(e=>(0,i.tZ)(m,{item:e,dropdownState:n},e))]})]})},k="permissions-dropdown-menu",w="permissions-dropdown-button",x=[r.hP.CREATOR,r.hP.EDITOR,r.hP.VIEWER,r.hP.REMOVE],O={[o.C.CREATOR]:r.hP.CREATOR,[o.C.OWNER]:r.hP.CREATOR,[o.C.EDITOR]:r.hP.EDITOR,[o.C.VIEWER]:r.hP.VIEWER},T={[r.hP.CREATOR]:o.C.CREATOR,[r.hP.OWNER]:o.C.CREATOR,[r.hP.EDITOR]:o.C.EDITOR,[r.hP.VIEWER]:o.C.VIEWER,[r.hP.REMOVE]:o.C.CREATOR},P=[r.Ik.SHARED,r.Ik.REMOVE],Z={[o.C.CREATOR]:r.Ik.SHARED,[o.C.OWNER]:r.Ik.SHARED,[o.C.EDITOR]:r.Ik.SHARED,[o.C.VIEWER]:r.Ik.SHARED},N={[r.Ik.SHARED]:o.C.VIEWER,[r.Ik.REMOVE]:o.C.CREATOR}},23477:function(e,n,t){var i,o,l,r;t.d(n,{Ik:function(){return o},Sy:function(){return s},b9:function(){return a},hP:function(){return i}}),(l=i||(i={})).OWNER="OWNER",l.CREATOR="CREATOR",l.EDITOR="EDITOR",l.VIEWER="VIEWER",l.REMOVE="REMOVE";let a={[i.OWNER]:"Owner",[i.CREATOR]:"Owner",[i.EDITOR]:"Editor",[i.VIEWER]:"Viewer",[i.REMOVE]:"Remove"};(r=o||(o={})).SHARED="SHARED",r.REMOVE="REMOVE";let s={[o.SHARED]:"Shared",[o.REMOVE]:"Remove"}},96845:function(e,n,t){t.d(n,{B:function(){return p},S:function(){return m}});var i=t(10860),o=t(98356),l=t(35941),r=t(62398),a=t(87946),s=t(33226),d=t(92777),u=t(91890),c=t(46453);t(62814);let m=e=>{let{showMobileStyles:n,editable:t,showRemoveItem:o}=p(e);return(0,i.BX)(r.x,{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",mb:"16px",children:[(0,i.tZ)(v,{permission:e.permission}),(0,i.tZ)(r.x,{minWidth:n?"10px":"150px",justifyContent:"flex-end",children:(0,i.tZ)(s.zr,{...e,trackingClickPermission:e.trackingClickPermission,disabled:!t,hideRemoveItem:!o,isWhitelabel:e.isWhitelabel,isCodeSubdomain:e.isCodeSubdomain})})]})},v=e=>{let{permission:n}=e;return(0,i.BX)(r.x,{display:"flex",width:"90%",alignItems:"center",style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[(0,i.tZ)(l.qE,{alt:n.entityName}),(0,i.tZ)(r.x,{display:"flex",flexDirection:"column",ml:"8px",children:(0,i.tZ)(r.x,{width:"100%",display:"table",style:{tableLayout:"fixed"},children:(0,i.tZ)(a.xv,{display:"table-cell",style:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},fontWeight:"bold",fontSize:"14px",color:"primary.black",children:n.entityName})})})]})};function p(e){var n;let{jwt:t}=(0,d.F)(),i=(0,u.S)(e.assetId,e.isWhitelabel,e.isCodeSubdomain),l=i===o.C.VIEWER,r=i===o.C.OWNER,a=e.permission.entityId===(null==t?void 0:t.ithacaId),s=e.permission.permissionName===o.C.CREATOR,m=(0,c.KD)(),v=r||a||null!==(n=e.isWhitelabel)&&void 0!==n&&n;return{editable:!l&&!s,showMobileStyles:m,showRemoveItem:v}}},7136:function(e,n,t){t.d(n,{G:function(){return u}});var i=t(98356),o=t(58279),l=t(76301),r=t(42747),a=t(92777),s=t(62814),d=t(70976);function u(e){var n,t,u,c;let{assetId:m,isWhitelabel:v,isCodeSubdomain:p,trackingClickShareWithEveryone:_,pastTenseLabel:f}=e,{jwt:h}=(0,a.F)(),C=null!==(u=null==h?void 0:null===(n=h.org)||void 0===n?void 0:n.orgId)&&void 0!==u?u:"",b=null!==(c=null==h?void 0:null===(t=h.org)||void 0===t?void 0:t.name)&&void 0!==c?c:"",y=(0,r.N)(m,v,p),g=null==y?void 0:y.currentPermissions,R=null==y?void 0:y.draftPermissions,E=(0,s.useMemo)(()=>null==g?void 0:g.find(e=>e.entityId===C),[g,C]),S=(0,s.useMemo)(()=>null==R?void 0:R.find(e=>e.entityId===C),[R,C]),I=(0,s.useMemo)(()=>({entityId:C,entityName:b,entityType:o.DC.ORG,permissionName:i.C.EDITOR}),[b,C]),D=(0,s.useMemo)(()=>{var e;return null!==(e=null!=S?S:E)&&void 0!==e?e:I},[S,E,I]),k=Boolean(S),w=null==y?void 0:y.addDraftPermission,x=null==y?void 0:y.removeDraftPermission,O=(0,s.useCallback)(()=>{let{Core_Domain_Settings_Clicked_Share_with_Everyone_Box:e}=d.Z;S?null==x||x(S):null==w||w(I),v&&(0,l.bR)(e,{action:S?"deselect":"select"}),null==_||_(m,!S)},[S,v,_,m,w,I,x]),T="Share".concat(f?"d":""," with everyone in ").concat(b||"your organization");return{checkboxChecked:k,label:T,organizationPermission:D,onChangeCheckbox:O}}},3462:function(e,n,t){t.d(n,{RR:function(){return v},hP:function(){return c},h_:function(){return u},wo:function(){return m}});var i=t(10860),o=t(61578),l=t(5571),r=t(89819),a=t(69020),s=t(11992),d=t(62814);let u=e=>{var n;let t=null===(n=null==e?void 0:e.sx)||void 0===n?void 0:n["& .MuiMenu-paper"];return(0,i.tZ)(o.Z,{...e,anchorOrigin:{vertical:"bottom",horizontal:"right",...null==e?void 0:e.anchorOrigin},transformOrigin:{vertical:"top",horizontal:"right",...null==e?void 0:e.transformOrigin},sx:{...null==e?void 0:e.sx,"& .MuiMenu-paper":{...t,borderRadius:"12px",boxShadow:"3px 3px 30px rgba(17, 17, 17, 0.1)"}},children:e.children})},c=d.forwardRef((e,n)=>(0,i.tZ)(l.Z,{...e,ref:n,disableRipple:!0,sx:{...null==e?void 0:e.sx,"&.Mui-selected":{backgroundColor:"white","&:focus":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},"&:focus":{backgroundColor:"rgba(0, 0, 0, 0.04)"}}}));c.displayName="DropdownItem";let m=e=>{let{children:n,sx:t}=e,o=null==t?void 0:t["& .MuiListItemText-primary"];return(0,i.tZ)(r.Z,{sx:{...t,"& .MuiListItemText-primary":{fontWeight:"bold",fontSize:"16px",...o}},children:n})},v=d.forwardRef((e,n)=>(0,i.tZ)(a.Z,{ref:n,...e,sx:{width:"50px",height:"50px"},children:(0,i.tZ)(s.Z,{})}));v.displayName="MobileDropdownButton"},58071:function(e,n,t){t.d(n,{x:function(){return o}});var i=t(62814);function o(e){let{disabled:n,buttonId:t,menuId:o}=e,[l,r]=(0,i.useState)(null),a=Boolean(l),[s,d]=(0,i.useState)(!1);(0,i.useEffect)(()=>{a&&d(!0)},[a,s,d]);let u=(0,i.useCallback)(e=>{a?r(null):n||r(e)},[n,a,r]),c=(0,i.useCallback)(()=>{r(null)},[r]),m=(0,i.useRef)(null);return(0,i.useEffect)(()=>{!a&&s&&m.current&&m.current.focus()},[s,a,m]),{menuId:o,buttonId:t,hasOpened:s,disabled:null!=n&&n,isOpen:a,toggleDropdown:u,closeDropdown:c,dropdownAnchorElement:l,buttonRef:m}}},37714:function(e,n,t){function i(e){let{buttonId:n,menuId:t,dropdownAnchorElement:i,isOpen:o,closeDropdown:l}=e;return{id:n,"aria-labelledby":t,anchorEl:i,open:o,onClose:l}}function o(e){return{ref:e.buttonRef,id:e.buttonId,tabIndex:e.disabled?-1:0,"aria-controls":e.isOpen?e.menuId:void 0,"aria-haspopup":"true","aria-expanded":e.isOpen?"true":void 0,onClick:n=>e.toggleDropdown(n.currentTarget)}}t.d(n,{a:function(){return i},m:function(){return o}})},91357:function(e,n,t){t.d(n,{Ex:function(){return c},HT:function(){return u}});var i=t(10860),o=t(35941),l=t(62398),r=t(87946),a=t(46453),s=t(62814);let d=e=>{let{nameParts:n}=e;return(0,i.tZ)(i.HY,{children:n.map((e,n)=>(0,i.tZ)("span",{style:{fontWeight:(null==e?void 0:e.highlight)?"bold":"normal"},children:e.text},n))})},u=e=>{let{member:n,boldSubstring:t}=e,u=!n.hasBeenInvited||!n.hasJoinedOrg,c=(0,s.useMemo)(()=>(null==n?void 0:n.name)?null==n?void 0:n.name:(null==n?void 0:n.email)?null==n?void 0:n.email:"",[n]),m=(0,a.Au)(c,t);return(0,i.BX)(l.x,{display:"flex",width:"90%",alignItems:"center",style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[(0,i.tZ)(o.qE,{alt:n.name||n.email||"avatar",disabled:u,src:null==n?void 0:n.profilePictureUrl,"data-testid":"initials-container"}),(0,i.BX)(l.x,{display:"flex",flexDirection:"column",ml:"8px",children:[(0,i.tZ)(l.x,{width:"100%",display:"table",style:{tableLayout:"fixed"},children:(0,i.tZ)(r.xv,{"data-testid":"name",display:"table-cell",style:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},fontSize:"14px",color:u?"secondary.disabled":"primary.black",children:(0,i.tZ)(d,{nameParts:m})})}),n.name&&n.email&&(0,i.tZ)(r.xv,{"data-testid":"member-email",color:"primary.grey",fontSize:"12px",children:n.email})]})]})},c=e=>{var n;let{team:t,boldSubstring:s}=e,u=(0,a.Au)(null!==(n=null==t?void 0:t.name)&&void 0!==n?n:"",s);return(0,i.BX)(l.x,{display:"flex",width:"100%",alignItems:"center",children:[(0,i.tZ)(o.qE,{alt:t.name||"team-avatar",src:null==t?void 0:t.profilePictureUrl,"data-testId":"initials-container"}),(0,i.tZ)(l.x,{display:"flex",flexDirection:"column",ml:"8px",children:(0,i.tZ)(r.xv,{"data-testid":"name",fontSize:"14px",children:(0,i.tZ)(d,{nameParts:u})})})]})}},45982:function(e,n,t){t.d(n,{L:function(){return m},f:function(){return v}});var i=t(2512),o=t(84965),l=t(92777),r=t(42652),a=t(62814),s=t(48267),d=t(58042),u=t.n(d),c=t(77591);function m(e){let[n,t]=(0,a.useState)([]),i=(0,s.wh)(),r=function(e,n,t){let{jwt:i}=(0,l.F)(),r=(0,o.$6)(e,n),s=(0,a.useMemo)(()=>{var n;let l=t||(null==i?void 0:null===(n=i.org)||void 0===n?void 0:n.orgId)||"";switch(e){case"members":return(0,o.rI)(r,l);case"teams":return(0,o.my)(r,l);case"membersAndTeams":return(0,o.Jw)(r,l);default:return""}},[i,r,e,t]);return s}(e.searchFor,e.searchTerm,e.orgId),{data:d,error:u,isValidating:m}=(0,c.ZP)(e.disableFetch?null:r,i),v=(0,a.useMemo)(()=>!d||m,[d,m]),p=null==e?void 0:e.setLoading;return(0,a.useEffect)(()=>{null==p||p(v)},[v,p]),(0,a.useEffect)(()=>{if(u||(null==d?void 0:d.status)!==200)v||t([]);else if(d){var e,n,i;let l=null!==(i=null!==(n=null!==(e=null==d?void 0:d.collaborators)&&void 0!==e?e:null==d?void 0:d.orgMembers)&&void 0!==n?n:null==d?void 0:d.teams)&&void 0!==i?i:[];t((0,o.hm)(l))}},[v,d,u]),n}function v(e){let{showInvitationPrompt:n,searchFor:t,removeFromResults:l}=e,[s,d]=(0,a.useState)(""),[c]=(0,r.Nr)(s,500),[v,p]=(0,a.useState)(!1),_=m({searchTerm:c,setLoading:p,searchFor:t,disableFetch:e.disableFetch,orgId:e.orgId}),f=(0,a.useMemo)(()=>0===_.length&&u()(s)&&n?[{type:i.Bk.INVITATION_PROMPT,email:s}]:l?_.filter(e=>{let n=l.some(n=>(0,o.OG)(e,n));return!n}):_,[_,s,n,l]);return{searchResults:f,searchTerm:s,setSearchTerm:d,loading:v}}},41011:function(e,n,t){t.d(n,{I:function(){return g}});var i=t(10860),o=t(62814),l=t(4599);let r="".concat(204,"px"),a={width:"100%","& label":{color:l.r.colors.primary.grey,fontSize:"12px"},"& input":{mt:"8px",padding:"12px",paddingLeft:"44px",borderRadius:"4px",width:"100%",boxSizing:"border-box",border:"1px solid ".concat(l.r.colors.secondary.border),"&:focus":{border:"1px solid black",outline:0}}},s={display:"flex",position:"absolute",top:"8px",height:"44px",width:"44px",alignItems:"center",justifyContent:"center"};var d=t(79237),u=t(31810),c=t(64141),m=t(87946),v=t(93304),p=t(91357),_=t(84965),f=t(84195);let h=e=>{let{label:n,loading:t,placeholder:l,results:c,inputValue:m,setInputValue:p,onResultClicked:h,onRefInitialized:y,searchFor:g,onFocus:R,fromInternalAdmin:E,inputType:S}=e,I=(0,o.useRef)(null);return(0,o.useEffect)(()=>{if(I.current){let e=I.current.getElementsByTagName("input")[0];null==y||y(e)}},[I,y]),(0,i.tZ)(d.Z,{sx:a,id:"org-member-team-search",noOptionsText:"No results",ListboxProps:{style:{maxHeight:r}},options:c,filterOptions:e=>e,filterSelectedOptions:!0,getOptionLabel:_.Jn,renderTags:()=>null,inputValue:m,onChange:(e,n,t)=>{"selectOption"===t&&h(n)},onInputChange:e=>{e&&p(e.target.value)},onFocus:()=>{null==R||R()},onClose:()=>p(""),autoSelect:!1,renderOption:(e,n,t)=>{let{inputValue:l}=t;return(0,o.createElement)("li",{...e,key:(0,_.jw)(n),"data-testid":"search-result"},(0,i.tZ)(u.Z,{sx:{py:"4px"},children:(0,i.tZ)(b,{searchResult:n,searchString:l})}))},renderInput:e=>(0,i.BX)(u.Z,{ref:I,children:["v2"!==S&&(0,i.tZ)("label",{children:n}),(0,i.BX)(u.Z,{sx:{"&:hover":{"& input":{borderColor:"black"}},"& input":{fontSize:"16px"}},ref:e.InputProps.ref,position:"relative",children:[(0,i.tZ)(u.Z,{sx:s,children:t?(0,i.tZ)(v.T,{...E&&{iconSrc:"/internal-admin/icons/spinner.svg"}}):(0,i.tZ)(i.HY,{children:"v2"===S?(0,i.tZ)(f.Z,{}):(0,i.tZ)(C,{searchFor:g,fromInternalAdmin:E})})}),(0,i.tZ)("input",{placeholder:"v2"===S?n:l,type:"text",...e.inputProps})]})]})})},C=e=>{let{searchFor:n,fromInternalAdmin:t}=e;return(0,i.tZ)(c.J,{color:"black",src:t?"/internal-admin/icons/add-user.svg":"teams"===n?"/icons/search.svg":"/icons/add-user.svg",alt:"",width:"24px",height:"24px"})},b=e=>{let{searchResult:n,searchString:t}=e;if((0,_.Dy)(n))return(0,i.tZ)(p.HT,{member:n,boldSubstring:t});if((0,_.ef)(n))return(0,i.tZ)(p.Ex,{team:n,boldSubstring:t});if((0,_.BA)(n)){let e=(0,_.LJ)(n);return(0,i.BX)(u.Z,{"data-testid":"invitation-prompt",display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,i.tZ)(p.HT,{member:e}),(0,i.tZ)(m.xv,{fontSize:"14px",minWidth:"25px",maxWidth:"25px",px:"8px",color:"primary.flowBlue",children:"Invite"})]})}return(0,i.tZ)(i.HY,{})};var y=t(45982);let g=e=>{var n,t;let{loading:o,searchResults:l,searchTerm:r,setSearchTerm:a}=(0,y.f)(e);return(0,i.tZ)(h,{onRefInitialized:e.onRefInitialized,placeholder:null!==(n=e.placeholder)&&void 0!==n?n:"",label:null!==(t=e.label)&&void 0!==t?t:"",loading:o,onFocus:e.onFocus,results:l,inputValue:r,setInputValue:a,onResultClicked:e.onSearchResultClicked,searchFor:e.searchFor,fromInternalAdmin:e.fromInternalAdmin,inputType:e.searchInputType})}},35447:function(e,n,t){t.d(n,{l:function(){return v}});var i=t(10860),o=t(98356),l=t(58279),r=t(41011),a=t(2512),s=t(68110),d=t(76301),u=t(42747),c=t(62814),m=t(70976);let v=e=>{let{assetId:n,isWhitelabel:t,isCodeSubdomain:v,trackingCall:p,label:_,searchFieldType:f}=e,h=function(e,n,t){var i;let r=(0,u.N)(e,n,t),v=function(e){let n=e.map(e=>e.entityType===l.DC.USER?{type:a.Bk.TEAM_MEMBER,id:e.entityId,name:e.entityName,role:s.k_.MEMBER,hasBeenInvited:!0,hasJoinedOrg:!0}:e.entityType===l.DC.TEAM?{type:a.Bk.TEAM,teamId:e.entityId,name:e.entityName,memberCount:0,directChildrenCount:0}:null);return n.filter(e=>null!==e)}(null!==(i=null==r?void 0:r.draftPermissions)&&void 0!==i?i:[]),p=(0,c.useCallback)(e=>{var t,i;let s=e.type===a.Bk.TEAM_MEMBER?{entityId:null==e?void 0:e.id,entityName:(null==e?void 0:e.name)?null==e?void 0:e.name:null!==(t=null==e?void 0:e.email)&&void 0!==t?t:"",entityType:l.DC.USER,permissionName:o.C.EDITOR}:e.type===a.Bk.TEAM?{entityId:null==e?void 0:e.teamId,entityName:null!==(i=null==e?void 0:e.name)&&void 0!==i?i:"",entityType:l.DC.TEAM,permissionName:o.C.EDITOR}:null;if(s&&(null==r||r.addDraftPermission(s)),n){let{Core_Domain_Settings_Selected_Team:e}=m.Z;(0,d.bR)(e)}},[r,n]);return{resultsToRemove:v,onClickSearchResult:p}}(n,t,v);return(0,i.tZ)(r.I,{removeFromResults:h.resultsToRemove,searchFor:"membersAndTeams",showInvitationPrompt:!0,onSearchResultClicked:h.onClickSearchResult,label:_||"Enter the team name, member name or email below",placeholder:"",onFocus:p,onRefInitialized:()=>void 0,searchInputType:f})}},60796:function(e,n,t){var i,o,l,r,a,s;t.d(n,{BR:function(){return l},gT:function(){return d},q:function(){return o}});let d=25;(r=i||(i={})).VIEWER="team_role:viewer",r.MEMBER="team_role:member",r.ADMIN="team_role:admin",(a=o||(o={})).NameAsc="teamName",a.NameDsc="-teamName",a.MemberCountAsc="memberCount",a.MemberCountDsc="-memberCount",a.SubteamCountAsc="directChildrenCount",a.SubteamCountDsc="-directChildrenCount",(s=l||(l={})).NameAsc="name",s.NameDsc="-name",s.RoleAsc="role",s.RoleDsc="-role"},42747:function(e,n,t){t.d(n,{N:function(){return v}});var i=t(64150),o=t(62814),l=t(53336),r=t(77896),a=t(91693),s=t.n(a),d=t(28986),u=t.n(d),c=t(79013),m=t.n(c);function v(e,n,t){(0,r.f)(e,n,t);let a=(0,l.v9)(n=>n.flowteamsReducer.assetPermissions[e]),d=(0,l.I0)(),c=(0,o.useCallback)(()=>{d((0,i.Gf)({assetId:e}))},[d,e]),v=(0,o.useCallback)(e=>{d((0,i.Mk)({assetId:e}))},[d]),p=(0,o.useCallback)(n=>{d((0,i.Mb)({newDraftPermission:n,assetId:e}))},[d,e]),_=(0,o.useCallback)(n=>{d((0,i.v8)({entityId:n.entityId,assetId:e}))},[d,e]),f=(0,o.useCallback)(n=>{d((0,i.$y)({updatedPermission:n,entityId:n.entityId,assetId:e}))},[d,e]),h=s()(m()(null==a?void 0:a.currentPermissions,null==a?void 0:a.draftPermissions,u())),C=(0,o.useMemo)(()=>({...a,resetDraftPermissions:c,addDraftPermission:p,removeDraftPermission:_,updateDraftPermission:f,deleteAssetPermissions:v,draftPermissionsAreDifferentFromCurrentPermissions:h}),[a,c,p,_,f,v,h]);return a?C:null}},91890:function(e,n,t){t.d(n,{S:function(){return a}});var i=t(98356),o=t(42747),l=t(92777),r=t(62814);function a(e,n,t){let a=(0,o.N)(e,n,t),{jwt:s}=(0,l.F)(),d=(0,r.useMemo)(()=>{if(!a||!(null==a?void 0:a.currentPermissions))return null;let e=a.currentPermissions.filter(e=>{var n,t,i;return e.entityId===(null==s?void 0:s.ithacaId)||e.entityId===(null==s?void 0:null===(n=s.org)||void 0===n?void 0:n.orgId)||(null==s?void 0:null===(t=s.org)||void 0===t?void 0:null===(i=t.teams)||void 0===i?void 0:i.some(n=>n.teamId===e.entityId))}),n=e.some(e=>e.permissionName===i.C.OWNER),t=e.some(e=>e.permissionName===i.C.EDITOR),o=e.some(e=>e.permissionName===i.C.VIEWER);return n?i.C.OWNER:t?i.C.EDITOR:o?i.C.VIEWER:null},[a,s]);return d}},77896:function(e,n,t){t.d(n,{d:function(){return m},f:function(){return v}});var i=t(98356),o=t(27080),l=t(58279),r=t(9541),a=t(64150),s=t(92777),d=t(53336),u=t(62814),c=t(70722);let m="batch:NEW";function v(e,n,t){var v,p,_,f;let h=(0,r.v)(e,n,t),C=(0,d.v9)(e=>e.flowteamsReducer.assetPermissions),b=e?C[e]:null,y=n?Boolean(null==b?void 0:null===(v=b.currentPermissions)||void 0===v?void 0:v[0]):(null==b?void 0:null===(p=b.currentPermissions)||void 0===p?void 0:null===(_=p[0])||void 0===_?void 0:_.entityId)!=="",g=Boolean(b&&y),{allPermissions:R,loading:E}=(0,c.R)({...h,shouldFetch:e!==m&&Boolean(!g&&h)}),S=(0,d.I0)(),{jwt:I}=(0,s.F)(),D=(0,u.useMemo)(()=>I?{entityId:null==I?void 0:I.ithacaId,entityName:(null==I?void 0:I.firstName)&&(null==I?void 0:I.lastName)?"".concat(null==I?void 0:I.firstName," ").concat(null==I?void 0:I.lastName):null!==(f=null==I?void 0:I.email)&&void 0!==f?f:"",entityType:l.DC.USER,permissionName:i.C.CREATOR}:null,[I]);(0,u.useEffect)(()=>{let n=e!==m&&e!==o.nd;!g&&!E&&e&&n&&S((0,a.ag)({assetId:e,currentPermissions:R})),g||n||!D||S((0,a.ag)({assetId:e,currentPermissions:[D]}))},[g,E,R,e,S,D])}},9541:function(e,n,t){t.d(n,{c:function(){return o},v:function(){return l}});var i=t(98356);function o(e){let{isBatch:n,batchId:t,directoryId:o}=e,l=n?t:o,r=n?i.h.BATCH:i.h.DIRECTORY;return l?"".concat(r,":").concat(l):null}function l(e,n,t){if(n)return{subdomainId:e,isBatch:null!=t&&t};if(!(null==e?void 0:e.includes(":")))return{pageId:e,isBatch:!1};let o=null==e?void 0:e.split(":"),l=null==o?void 0:o[0],r=null==o?void 0:o[1];return l&&r?"directory"===l?{directoryId:r,isBatch:!1}:l===i.h.PAGE_TEMPLATE?{pageTemplateId:r,isBatch:!1}:{batchId:r,isBatch:!0}:{isBatch:!1}}},68592:function(e,n,t){t.d(n,{mg:function(){return u},vb:function(){return s},wb:function(){return d}});var i=t(6249),o=t(68110),l=t(49341),r=t(51481);let a=i.tj,s={profiles:a+"/profiles",members:a+"/org-members",memberships:a+"/org-memberships",orgExtras:a+"/org-extras",orgCollaborators:a+"/collaborators",teams:a+"/teams",teamMembers:a+"/team-members",invitations:a+"/invitations",acceptInvitation:a+"/accept-invitations",assetPermissions:a+"/asset-permissions",org:a+"/org",getInviteDataV2:a+"/v2/invitations",acceptInvitationV2:a+"/v2/accept-invitation",invitationLink:a+"/invitation-link",acceptInvitationLinkV2:a+"/v2/accept-invitation-link"},d=25,u=25;(0,r.Wg)(l.k.PRO_PLUS_ORG),o.oz.PRO_PLUS,(0,r.Wg)(l.k.PRO_FLEX),o.oz.PRO_FLEX,(0,r.Wg)(l.k.ENTERPRISE),o.oz.ENTERPRISE},48267:function(e,n,t){t.d(n,{LR:function(){return m},NP:function(){return v},TM:function(){return h},Th:function(){return f},fh:function(){return C},lU:function(){return _},q:function(){return r},q4:function(){return l},wh:function(){return c},y2:function(){return p}});var i,o,l,r,a=t(53288),s=t(68592),d=t(92777),u=t(77591);let c=()=>{let{jwt:e}=(0,d.F)(),n=async n=>n?await fetch(n,{method:"GET",credentials:"include",headers:await (0,a.ve)(null==e?void 0:e.token)}).then(e=>e.json()):[];return n};(i=l||(l={})).NameAsc="name",i.NameDsc="-name",i.RoleAsc="role",i.RoleDsc="-role",i.LastLoginAsc="lastLogin",i.LastLoginDesc="-lastLogin";let m=e=>{let{orgId:n,limit:t=s.wb,offset:i=0,orderBy:o=l.NameAsc,searchTerm:r,paginate:a=!0,invitationsOnly:d=!1,teams:m=!1}=e,v={orderBy:o};d?(v.limit="0",v.offset="0"):a&&(v.limit=t.toString(),v.offset=i.toString()),r&&(v.searchTerm=r);let p=new URLSearchParams(v).toString(),_=n?"".concat(s.vb.members,"/").concat(n,"?").concat(m?p+"&teams":p):null,f=c(),{data:h,error:C}=(0,u.ZP)(_,f,{revalidateOnMount:!0,revalidateOnFocus:!0,revalidateOnReconnect:!1});return C||(null==h?void 0:h.status)!==200||!n?{members:void 0}:{members:d?(null==h?void 0:h.invitations)||[]:(null==h?void 0:h.orgMembers)||[],path:_||"".concat(s.vb.members,"/").concat(n)}},v=(e,n)=>{let{cache:t}=(0,u.kY)(),i=e&&(null==n?void 0:n.toLowerCase().includes("flowcode"))?"".concat(s.vb.orgExtras,"/").concat(e):"",o={revalidateOnMount:void 0!==t.get(i),revalidateOnFocus:!1,revalidateOnReconnect:!1},l=c(),{data:r,error:a}=(0,u.ZP)(i,l,o);return!a&&r&&(null==r?void 0:r.status)===200&&e&&(null==r?void 0:r.orgExtras)||[]};(o=r||(r={})).NameAsc="teamName",o.NameDsc="-teamName",o.CountAsc="memberCount",o.CountDsc="-memberCount";let p=e=>{let{orgId:n,limit:t=s.mg,offset:i=0,orderBy:o=r.NameAsc,searchTerm:l,paginate:d=!0,teamId:m,directChildren:v=!1,me:p=!1}=e,_={orderBy:o};d&&(_.limit=t.toString(),_.offset=i.toString()),l&&(_.searchTerm=l),m&&(_.teamId=m);let f=new URLSearchParams(_).toString();v&&(f+="&directChildren"),p&&(f+="&me");let h=n?"".concat(s.vb.teams,"/").concat(n,"?").concat(f):null,C=c(),{data:b,error:y,mutate:g}=(0,u.ZP)(h,C,{revalidateOnMount:!0,revalidateOnFocus:!0,revalidateOnReconnect:!0});if(y||!b||(null==b?void 0:b.status)!==200||!n)return;let R=(0,a.aF)(b.teams);return{teams:R,mutate:g}},_=e=>{let n=e?"".concat(s.vb.teamMembers,"/").concat(e):null,t=c(),{data:i,error:o}=(0,u.ZP)(n,t);if(o||!i||(null==i?void 0:i.status)!==200||!e)return[];let l=(null==i?void 0:i.teamMembers)||[];return l},f=e=>{let{orgId:n}=e,t=n?"".concat(s.vb.invitations,"?orgId=").concat(n):null,i=c(),{data:o,error:l}=(0,u.ZP)(t,i,{revalidateOnMount:!0,revalidateOnFocus:!1,revalidateOnReconnect:!0});if(!l&&o&&(null==o?void 0:o.status)===200)return null==o?void 0:o.invitations},h=e=>{let n=s.vb.invitationLink+"/"+e,t=c(),{data:i,error:o}=(0,u.ZP)(n,t);return(null==i?void 0:i.status)===404?{orgName:void 0,teamName:void 0}:!o&&i&&(null==i?void 0:i.status)===200?{orgName:null==i?void 0:i.orgName,teamName:null==i?void 0:i.teamName}:void 0},C=e=>{let n=s.vb.getInviteDataV2+"/"+e,t=c(),{data:i,error:o}=(0,u.ZP)(n,t);return(null==i?void 0:i.status)===404?{email:void 0,orgName:void 0,teamNames:void 0,inviter:void 0}:!o&&i&&(null==i?void 0:i.status)===200?{email:null==i?void 0:i.email,orgName:null==i?void 0:i.orgName,teamNames:null==i?void 0:i.teamNames,inviter:null==i?void 0:i.inviter}:void 0}},70976:function(e,n){n.Z={Core_Domain_Settings_Clicked_Add_Domain:"Core_Domain_Settings_Clicked_Add_Domain",Core_Domain_Settings_Clicked_Kebab_Menu:"Core_Domain_Settings_Clicked_Kebab_Menu",Core_Domain_Settings_Clicked_Setup_Box:"Core_Domain_Settings_Clicked_Setup_Box",Core_Domain_Settings_Typed_Domain:"Core_Domain_Settings_Typed_Domain",Core_Domain_Settings_Received_Domain_Confirmation_Error:"Core_Domain_Settings_Received_Domain_Confirmation_Error",Core_Domain_Settings_Clicked_Add_Domain_Confirmation_Button:"Core_Domain_Settings_Clicked_Add_Domain_Confirmation_Button",Core_Domain_Settings_Clicked_Add_Domain_Confirmation:"Core_Domain_Settings_Clicked_Add_Domain_Confirmation",Core_Domain_Settings_Clicked_Setup_Domain:"Core_Domain_Settings_Clicked_Setup_Domain",Core_Domain_Setup_Modal_Typed_SubDomain:"Core_Domain_Setup_Modal_Typed_SubDomain",Core_Domain_Setup_Modal_Clicked_Save_Domain:"Core_Domain_Setup_Modal_Clicked_Save_Domain",Core_Domain_Setup_Modal_Clicked_Exit_Popup_Modal:"Core_Domain_Setup_Modal_Clicked_Exit_Popup_Modal",Core_Domain_Setup_Modal_Clicked_Check_DNS_Configuration:"Core_Domain_Setup_Modal_Clicked_Check_DNS_Configuration",Core_Domain_Setup_Modal_Clicked_Closed_DNS_Configuration:"Core_Domain_Setup_Modal_Clicked_Closed_DNS_Configuration",Core_Domain_Settings_Clicked_Pop_Up_Modal_Cancel_Button:"Core_Domain_Settings_Clicked_Pop_Up_Modal_Cancel_Button",Core_Domain_Settings_Clicked_Pop_Up_Modal_Confirm_Button:"Core_Domain_Settings_Clicked_Pop_Up_Modal_Confirm_Button",Core_Domain_Settings_Typed_Subdomain:"Core_Domain_Settings_Typed_Subdomain",Core_Domain_Settings_Subdomain_Type:"Core_Domain_Settings_Subdomain_Type",Core_Domain_Settings_Clicked_Create_Subdomain_Button:"Core_Domain_Settings_Clicked_Create_Subdomain_Button",Core_Domain_Settings_Clicked_Cancel_Subdomain_Button:"Core_Domain_Settings_Clicked_Cancel_Subdomain_Button",Core_Domain_Settings_Clicked_Restore_Domain:"Core_Domain_Settings_Clicked_Restore_Domain",Core_Domain_Settings_Selected_Team:"Core_Domain_Settings_Selected_Team",Core_Domain_Settings_Clicked_Save_Team_Selection_Button:"Core_Domain_Settings_Clicked_Save_Team_Selection_Button",Core_Domain_Settings_Clicked_Share_with_Everyone_Box:"Core_Domain_Settings_Clicked_Share_with_Everyone_Box",Core_Global_Selected_Subdomain:"Core_Global_Selected_Subdomain",Core_Global_Clicked_Save_Domain:"Core_Global_Clicked_Save_Domain",Core_Global_Confirm_Subdomain_Change_Button:"Core_Global_Confirm_Subdomain_Change_Button",Core_Global_Clicked_Cancel_Subdomain_Change_Button:"Core_Global_Clicked_Cancel_Subdomain_Change_Button",Core_Domain_Settings_Clicked_FAQ:"Core_Domain_Settings_Clicked_FAQ",Core_Domain_Settings_Clicked_Add_Subdomain:"Core_Domain_Settings_Clicked_Add_Subdomain"}},84802:function(e,n,t){t.d(n,{K:function(){return l},x:function(){return r}});var i=t(85001),o=t(15597);async function l(e){let{pageId:n}=e,t=null;try{t=await (0,o.N9)(i.v,{id:n})}catch(e){console.error(e)}let l=null==t?void 0:t.Page;return l||null}async function r(e){let{pageId:n}=e,t=null;try{t=await (0,o.N9)(i.JQ,{pageId:n})}catch(e){console.error(e)}return Boolean(null==t?void 0:t.checkPageOwnership)}},57778:function(e,n,t){t.d(n,{Pv:function(){return s},tK:function(){return d}});var i=t(1286),o=t(85001),l=t(6413),r=t(15597),a=t(62814);let s=async(e,n)=>(0,r.N9)(o.cG,{assetIds:[e],assetType:i.W3.Template,entityTypes:[i.py.Org,i.py.Team,i.py.User],templateId:e},n);function d(){return(0,a.useCallback)(async e=>{let{permissionsToRemove:n,permissionsToUpsert:t,assetId:o,token:l}=e,r=[];t.length&&r.push(u({assetIds:[o],assetType:i.W3.Template,entityPermissions:t.map(e=>({entityId:e.entityId,entityType:e.entityType,permissionName:e.permissionName}))},l)),n.length&&r.push(c({assetIds:[o],assetType:i.W3.Template,entityIds:n.map(e=>e.entityId)},l)),await Promise.all(r)},[])}let u=async(e,n)=>(0,r.N9)(l.Ux,e,n),c=async(e,n)=>(0,r.N9)(l.L1,e,n)}}]);