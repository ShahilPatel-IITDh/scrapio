function initSessionCookie(){return{pd:0,ga:0,go:0,ps:0,rv:0,svt:0,nst:0,hp:0,nso:0,svo:0,pu:0,si:"",fv:"",ui:"",bid:"",vpp:""}}function isValidDate(n){return Object.prototype.toString.call(n)!=="[object Date]"?!1:!isNaN(n.getTime())}function checkSessCookie(n){var t=!1;return n==null?(n=initSessionCookie(),t=!0):(n.pd==undefined&&(n.pd=0,t=!0),n.ga==undefined&&(n.ga=0,t=!0),n.go==undefined&&(n.go=0,t=!0),n.ps==undefined&&(n.ps=0,t=!0),n.rv==undefined&&(n.rv=0,t=!0),n.nst==undefined&&(n.nst=0,t=!0),n.svt==undefined&&(n.svt=0,t=!0),n.hp==undefined&&(n.hp=0,t=!0),n.nso==undefined&&(n.nso=0,t=!0),n.svo==undefined&&(n.svo=0,t=!0),n.pu==undefined&&(n.pu=0,t=!0),n.si==undefined&&(n.si="",t=!0),n.fv==undefined&&(n.fv="",t=!0),n.ui==undefined&&(n.ui="",t=!0),n.bid==undefined&&(n.bid="",t=!0),n.vpp==undefined&&(n.vpp="",t=!0)),t&&SaveSessCookie(n),n}function GetSessCookie(){return checkSessCookie($.cookies.get(vrcCookies.temp))}function SaveSessCookie(n){$.cookies.set(vrcCookies.temp,n)}function initPermCookie(){return{ts:0,ss:0,ns:0,nso:0,sv:0,svo:0,nsd:DateToCookieString(null),nsod:DateToCookieString(null),svd:DateToCookieString(null),svod:DateToCookieString(null),rvo:0,cnl:0,cnld:DateToCookieString(null),pi:"",mv:"",sl:"",vnd:DateToCookieString(null),pkey:""}}function checkPermCookie(n){var t=!1;return n==null?(n=initPermCookie(),t=!0):(n.ts==undefined&&(n.ts=0,t=!0),n.ss==undefined&&(n.ss=0,t=!0),n.ns==undefined&&(n.ns=0,t=!0),n.nso==undefined&&(n.nso=0,t=!0),n.sv==undefined&&(n.sv=0,t=!0),n.svo==undefined&&(n.svo=0,t=!0),n.nsd==undefined&&(n.nsd=DateToCookieString(null),t=!0),n.nsod==undefined&&(n.nsod=DateToCookieString(null),t=!0),n.svd==undefined&&(n.svd=DateToCookieString(null),t=!0),n.svod==undefined&&(n.svod=DateToCookieString(null),t=!0),n.rvo==undefined&&(n.rvo=0,t=!0),n.cnl==undefined&&(n.cnl=0,t=!0),n.cnld==undefined&&(n.cnld=DateToCookieString(null),t=!0),n.pi==undefined&&(n.pi="",t=!0),n.mv==undefined&&(n.mv="",t=!0),n.sl==undefined&&(n.sl="",t=!0),n.vnd==undefined&&(n.vnd=DateToCookieString(null),t=!0),n.pkey==undefined&&(n.pkey="",t=!0)),t&&SavePermCookie(n),n}function GetPermCookie(){return checkPermCookie($.cookies.get(vrcCookies.perm))}function SavePermCookie(n){$.cookies.set(vrcCookies.perm,n,{expiresAt:initDateOffset(permCookieExpire.AddYear,permCookieExpire.AddMonth,permCookieExpire.AddDay)})}function initTrafficCookie(){return{cnl:0,sl:"",pkey:""}}function checkTrafficCookie(n){var t=!1;return n==null?(n=initTrafficCookie(),t=!0):(n.cnl==undefined&&(n.cnl=0,t=!0),n.pkey==undefined&&(n.pkey="",t=!0),n.sl==undefined&&(n.sl="",t=!0)),t&&SaveTrafficCookie(n),n}function GetTrafficCookie(){return checkTrafficCookie($.cookies.get(vrcCookies.traffic))}function SaveTrafficCookie(n){$.cookies.set(vrcCookies.traffic,n)}function IncrementPageDepth(){VTealiumConsentMangager.isCategoryEnabled(5)&&(vrcCookies.sessCookie=GetSessCookie(),vrcCookies.sessCookie!=null&&(vrcCookies.sessCookie.pd=vrcCookies.sessCookie.pd+1,SaveSessCookie(vrcCookies.sessCookie),typeof CreatePDepthMbox!="undefined"&&CreatePDepthMbox(vrcCookies.sessCookie.pd)))}function initDateOffset(n,t,i){var r=new Date,u=r.getFullYear()+n,f=r.getMonth()+t,e=r.getDate()+i;return new Date(u,f,e)}function IsIE8OrLower(){return parseFloat((navigator.userAgent.match(/MSIE ([0-9]+[\.0-9]*)/)||[0,9])[1])>=9?!1:!0}function DateToCookieString(n){return n!=null&&n!=undefined?(n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate()).toString():dataDefaults.defDate}function CookieStringToDate(n){if(n!=null&&n!=undefined)try{var t=n.split("-");return t.length==3?new Date(parseInt(t[0]),parseInt(t[1])-1,parseInt(t[2])):GetDefaultDate()}catch(i){return GetDefaultDate()}else return GetDefaultDate()}function GetDefaultDate(){return new Date(dataDefaults.defYear,dataDefaults.defMonth-1,dataDefaults.defDay)}function SetDomainPrefix(){var n=window.location.pathname.split("/");n.length>1&&n[1].toLowerCase()=="oceans"&&(siteDomain.pathPrefix="/oceans");n.length>1&&n[1].toLowerCase()=="expeditions"&&(siteDomain.pathPrefix="/expeditions")}function SendAjax(n,t,i,r,u){ajaxManager.addRequest({type:"POST",url:n+"?v=11",data:typeof u!="undefined"?u:"{ }",contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){t!=null&&t(n)},error:function(n){i!=null&&i(n)},complete:function(n){r!=null&&r(n)}})}function SendAjaxGet(n,t,i,r){ajaxManager.addRequest({type:"GET",url:n+"?v=11",contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){t!=null&&t(n)},error:function(n){i!=null&&i(n)},complete:function(n){r!=null&&r(n)}})}function SendAjax2(n,t,i,r,u,f,e){ajaxManager.addRequest({type:"POST",url:n+"?v=11",data:typeof u!="undefined"?u:"{ }",contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){t!=null&&t(n,f,e)},error:function(n){i!=null&&i(n,f)},complete:function(n){r!=null&&r(n,f)}})}function GetAjaxHtml(n,t,i,r,u){ajaxManager.addRequest({type:"GET",url:n,data:typeof u!="undefined"?u:"{ }",contentType:"application/x-www-form-urlencoded; charset=UTF-8",dataType:"html",success:function(n){t!=null&&t(n)},error:function(n){i!=null&&i(n)},complete:function(n){r!=null&&r(n)}})}function vrcLoadSvg(n,t){var i=$("#"+n);i.size()!=0&&$.ajax({url:t+"?ord=BC"+Math.floor(1e5+Math.random()*9e5),type:"GET",dataType:"html",success:function(n){vrcPostProcessSvg(i,n)},error:function(n){console.log(n)}})}function vrcPostProcessSvg(n,t){var i=t.replace('<svg width="1210" height="787"',"<svg ");n.html(i)}function SubNavScroll(){var f=document.documentElement,r=window,t=r.scrollY||f.scrollTop,n,i="",u="",e=r.innerWidth,o=function(){e>1199||(n=r.scrollY||f.scrollTop,n>t&&t>0?i="down":n<t&&n>0&&(i="up"),i!==u&&s(i),t=n)},s=function(n){var t=document.getElementById("cruise-hdr"),i=document.getElementById("trd-header"),f=document.getElementById("cruise-hdr-back"),e=f&&f.offsetHeight||0,s=i&&i.offsetHeight||0,o=e===0,r;t&&i&&(n==="down"?(r=parseInt(e)+parseInt(s),t.style.transform="translate3d(0, -"+r+"px, 0)",i.style.transform="translate3d(0, -"+r+"px, 0)",o&&t.classList.add("cruise-hdr-scrolled"),u=n):n==="up"&&(t.style.transform="none",i.style.transform="none",o&&t.classList.remove("cruise-hdr-scrolled"),u=n))};window.addEventListener("scroll",o)}function SetSubMenuActiveUrl(){var u=$("#cruise-list-inline"),t=$(".cruise-sub-header li a.active"),n=window.innerWidth,i,r,f;n>767||!u.length||!t.length||(i=t.innerWidth(),r=t.offset().left+i,n<=Math.ceil(r)&&(f=r-n+(n-i)/2,u.scrollLeft(f)))}function initSessionCookie(){return{pd:0,ga:0,go:0,ps:0,rv:0,svt:0,nst:0,hp:0,nso:0,svo:0,pu:0,si:"",fv:"",ui:"",bid:"",vpp:""}}function isValidDate(n){return Object.prototype.toString.call(n)!=="[object Date]"?!1:!isNaN(n.getTime())}function checkSessCookie(n){var t=!1;return n==null?(n=initSessionCookie(),t=!0):(n.pd==undefined&&(n.pd=0,t=!0),n.ga==undefined&&(n.ga=0,t=!0),n.go==undefined&&(n.go=0,t=!0),n.ps==undefined&&(n.ps=0,t=!0),n.rv==undefined&&(n.rv=0,t=!0),n.nst==undefined&&(n.nst=0,t=!0),n.svt==undefined&&(n.svt=0,t=!0),n.hp==undefined&&(n.hp=0,t=!0),n.nso==undefined&&(n.nso=0,t=!0),n.svo==undefined&&(n.svo=0,t=!0),n.pu==undefined&&(n.pu=0,t=!0),n.si==undefined&&(n.si="",t=!0),n.fv==undefined&&(n.fv="",t=!0),n.ui==undefined&&(n.ui="",t=!0),n.bid==undefined&&(n.bid="",t=!0),n.vpp==undefined&&(n.vpp="",t=!0)),t&&SaveSessCookie(n),n}function GetSessCookie(){return checkSessCookie($.cookies.get(vrcCookies.temp))}function SaveSessCookie(n){$.cookies.set(vrcCookies.temp,n)}function initPermCookie(){return{ts:0,ss:0,ns:0,nso:0,sv:0,svo:0,nsd:DateToCookieString(null),nsod:DateToCookieString(null),svd:DateToCookieString(null),svod:DateToCookieString(null),rvo:0,cnl:0,cnld:DateToCookieString(null),pi:"",mv:"",sl:"",vnd:DateToCookieString(null)}}function checkPermCookie(n){var t=!1;return n==null?(n=initPermCookie(),t=!0):(n.ts==undefined&&(n.ts=0,t=!0),n.ss==undefined&&(n.ss=0,t=!0),n.ns==undefined&&(n.ns=0,t=!0),n.nso==undefined&&(n.nso=0,t=!0),n.sv==undefined&&(n.sv=0,t=!0),n.svo==undefined&&(n.svo=0,t=!0),n.nsd==undefined&&(n.nsd=DateToCookieString(null),t=!0),n.nsod==undefined&&(n.nsod=DateToCookieString(null),t=!0),n.svd==undefined&&(n.svd=DateToCookieString(null),t=!0),n.svod==undefined&&(n.svod=DateToCookieString(null),t=!0),n.rvo==undefined&&(n.rvo=0,t=!0),n.cnl==undefined&&(n.cnl=0,t=!0),n.cnld==undefined&&(n.cnld=DateToCookieString(null),t=!0),n.pi==undefined&&(n.pi="",t=!0),n.mv==undefined&&(n.mv="",t=!0),n.sl==undefined&&(n.sl="",t=!0),n.vnd==undefined&&(n.vnd=DateToCookieString(null),t=!0)),t&&SavePermCookie(n),n}function GetPermCookie(){return checkPermCookie($.cookies.get(vrcCookies.perm))}function SavePermCookie(n){$.cookies.set(vrcCookies.perm,n,{expiresAt:initDateOffset(permCookieExpire.AddYear,permCookieExpire.AddMonth,permCookieExpire.AddDay)})}function initTrafficCookie(){return{cnl:0,sl:"",pkey:""}}function checkTrafficCookie(n){var t=!1;return n==null?(n=initTrafficCookie(),t=!0):(n.cnl==undefined&&(n.cnl=0,t=!0),n.pkey==undefined&&(n.pkey="",t=!0),n.sl==undefined&&(n.sl="",t=!0)),t&&SaveTrafficCookie(n),n}function GetTrafficCookie(){return checkTrafficCookie($.cookies.get(vrcCookies.traffic))}function SaveTrafficCookie(n){$.cookies.set(vrcCookies.traffic,n)}function initDateOffset(n,t,i){var r=new Date,u=r.getFullYear()+n,f=r.getMonth()+t,e=r.getDate()+i;return new Date(u,f,e)}function DateToCookieString(n){return n!=null&&n!=undefined?(n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate()).toString():dataDefaults.defDate}function CookieStringToDate(n){if(n!=null&&n!=undefined)try{var t=n.split("-");return t.length==3?new Date(parseInt(t[0]),parseInt(t[1])-1,parseInt(t[2])):GetDefaultDate()}catch(i){return GetDefaultDate()}else return GetDefaultDate()}function vrcSynchFormFields(n){$(n).trigger("vrc.synch")}function InitUtils(){jQuery.ajaxSetup({timeout:18e4});jQuery.validator.setDefaults({ignore:":hidden:not(select)"});jQuery.validator.addMethod("ccnumber",function(value,element,params){var ret=!1,cctype=eval(params.ccType),ccnum=value;if(!isNaN(parseFloat(ccnum))&&isFinite(ccnum))switch(cctype){case"MC":ret=ccnum.indexOf("5")==0&&ccnum.length==16;break;case"VI":ret=ccnum.indexOf("4")==0&&(ccnum.length==16||ccnum.length==13);break;case"DS":ret=ccnum.indexOf("6")==0&&ccnum.length==16;break;case"AX":ret=ccnum.indexOf("3")==0&&ccnum.length==15}return ret},jQuery.validator.format("Invalid credit card number. Please enter only numbers."));jQuery.validator.addMethod("checkEmail",function(n){var t=!0;return jQuery.ajax({type:"GET",url:"/Forms/GetApiRequest",data:"request="+encodeURIComponent("{ 'RequestType':[2],'RequestArgs':{'EmailValidation':{'email': '"+n+"'}}}"),contentType:"application/json; charset=utf-8",success:function(n){t=n[0].Data.FINDING==="V"||n[0].Data.FINDING==="CE"?!0:!1},error:function(){t=!0},async:!1}),t},jQuery.validator.format("Invalid email address."));jQuery.validator.addMethod("checkFriendEmail",function(n){var t=!0;return jQuery.ajax({type:"GET",url:"/Forms/GetApiRequest",data:"request="+encodeURIComponent("{ 'RequestType':[2],'RequestArgs':{'EmailValidation':{'email': '"+n+"'}}}"),contentType:"application/json; charset=utf-8",success:function(n){t=n[0].Data.FINDING==="V"||n[0].Data.FINDING==="CE"?!0:!1},error:function(){t=!0},async:!1}),t},jQuery.validator.format("Invalid email address."));jQuery.validator.addMethod("checkbrochure",function(){var n=$(".linked_brochure:checked").length>0;return n?($("#linked_brochures_error").removeClass("field-validation-error"),$("#linked_brochures_error").addClass("field-validation-valid")):($("#linked_brochures_error").removeClass("field-validation-valid"),$("#linked_brochures_error").addClass("field-validation-error")),n},jQuery.validator.format("Please select at least one brochure."));jQuery.validator.addMethod("inputMustHaveValueNotZero",function(n,t,i){var r=!1;return $.each($(i),function(n,t){typeof t!="undefined"&&typeof t.value!="undefined"&&t.value!=""&&t.value!="0"&&t.value!="00"&&(r=!0)}),r},"Please enter a value");jQuery.validator.addMethod("fdate",function(n,t,i){return this.optional(t)||!/Invalid|NaN/.test(Date.fromFormattedString(n,i.format).toString())},"Please enter a  valid date");jQuery.validator.addMethod("mustbetrue",function(n,t,i){return this.depend(i,t)?t.checked:"dependency-mismatch"},"Please accept terms and conditions")}function vrcSendAjax(n,t,i,r){var u="";typeof viking!="undefined"&&typeof viking.utils!="undefined"&&typeof viking.utils.applicationPath!="undefined"&&(u=viking.utils.applicationPath);ajaxManager.addRequest({type:"POST",url:u+n+"?v=11",data:typeof i!="undefined"?i:"{ }",contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){n.hasOwnProperty("d")?(checkIfRedirect(n.d),t(n.d)):(checkIfRedirect(n),t(n))},error:function(){r&&r()}})}function vrcPostSerializedDataAjax(n,t,i,r){var u="";typeof viking!="undefined"&&typeof viking.utils!="undefined"&&typeof viking.utils.applicationPath!="undefined"&&(u=viking.utils.applicationPath);ajaxManager.addRequest({type:"POST",url:u+n+"?v=11",data:typeof i!="undefined"?i.serialize():"{ }",contentType:"application/x-www-form-urlencoded; charset=UTF-8",dataType:"json",success:function(n){n.hasOwnProperty("d")?(checkIfRedirect(n.d),t(n.d)):(checkIfRedirect(n),t(n))},error:function(){vFrmMgr.handleException;r&&r()}})}function checkIfRedirect(n){typeof n!="undefined"&&typeof n.RedirectUrl!="undefined"&&n.RedirectUrl!=null&&n.RedirectUrl.length&&vFrmMgr.redirectToUrl(n.RedirectUrl)}function clearBookingCookieIfDocumented(n){typeof n.RedirectIfDocumented!="undefined"&&typeof n.IsDocumentsPrinted()!="undefined"&&n.RedirectIfDocumented==!0&&n.IsDocumentsPrinted()==!0&&vFrmMgr.clearBookingCookie()}function sendBookingInvoiceByEmail(){vFrmMgr.blockScreen();vFrmMgr.getCurrentStep().errors=[];vrcSendAjax("/ECommerce/SendBookingInvoiceByEmail",parseSendBookingInvoicebyEmail,'{ "dto": '+ko.toJSON(vFrmMgr.getStateBagValue("bookinginfo"))+" }")}function parseSendBookingInvoicebyEmail(n){if(vFrmMgr.getCurrentStep().errors=n.errors,n.errors.length<=0){var t=$(".invoice-email-success");t.length&&t.show()}vFrmMgr.doneLoading()}function openPDFInvoiceByGuid(n,t){n!=null&&t.length?window.open(t+n,"_blank","toolbar=no,scrollbars=yes,location=no,statusbar=yes,menubar=no,resizable=1,width=500,height=500"):(self.errors=[],self.errors.push("Booking GUID was null."),vFrmMgr.doneLoading())}function vrcAjaxHtml(n,t){var i="";typeof viking!="undefined"&&typeof viking.utils!="undefined"&&typeof viking.utils.applicationPath!="undefined"&&(i=viking.utils.applicationPath);ajaxManager.addRequest({type:"GET",url:i+n+"?v=12",data:"{ }",contentType:"application/x-www-form-urlencoded; charset=UTF-8",dataType:"html",success:function(n){n.hasOwnProperty("d")?t(n.d):t(n)},error:vFrmMgr.handleException})}function vrcAjaxHtmlPost(n,t,i,r,u,f){var e="",o;typeof viking!="undefined"&&typeof viking.utils!="undefined"&&typeof viking.utils.applicationPath!="undefined"&&(e=viking.utils.applicationPath);o=t?t+i:e+i;ajaxManager.addRequest({type:"POST",url:o,data:JSON.stringify(n),contentType:"application/json; charset=utf-8",dataType:"html",success:function(n){typeof u=="function"&&(n.hasOwnProperty("d")?u(i,n.d,r,t):u(i,n,r,t))},error:function(n){retSuccess=!1;typeof f=="function"&&f(i,n,r,t)}})}function ArrayHasElements(n){return n.join(", ").length>1?!0:!1}function formatDate(n,t){if(typeof n=="undefined"||n===null)return"";var i=new Date(n),r=t||Date.format;return i.asString(r)}function RSIStringToDate(n){var t=null;return typeof n!="undefined"&&n!==null&&n!=="000101"&&n!=="00010101"&&parseInt(n)!==0&&(n.length===6?t=new Date(parseInt(n.substr(0,4)),parseInt(n.substr(4,2))-1):n.length===8&&(t=new Date(parseInt(n.substr(0,4)),parseInt(n.substr(4,2))-1,parseInt(n.substr(6,2))))),t}function getFullYear(n){if(typeof n=="undefined"||n==null)return"";if(n instanceof Date)return n.getFullYear();var t=Date.parse(n.toString());return isNaN(t)?"":new Date(t).getFullYear()}function isValidDate(n){if(typeof n=="undefined"||n==null)return!1;if(n instanceof Date)return!0;var t=Date.parse(n.toString());return isNaN(t)?!1:!0}function isDate(n){return n instanceof Date}function DateToRSIString(n){if(!isValidDate(n))return null;isDate(n)||(n=new Date(n));var i=n.getFullYear().toString(),r=(n.getMonth()+1).toString(),u=n.getDate().toString(),t="00000000";return t.substr(0,4-i.length)+i+t.substr(4,2-r.length)+r+t.substr(6,2-u.length)+u}function formatCurrency(n,t,i,r){var u=r||"$";return t?'(<span class="negValue">'+u+window.format("#,##0.00",n)+"<\/span>)":(i?"":u)+window.format("#,##0.00",n)}function initShortPayValidation(){var n=$("#txtShortPay");n.length&&n.valid()}function tryCloseBookingSession(n){vFrmMgr.getCurrentStep().errors=[];n==!0&&vFrmMgr.blockScreen();var t=vFrmMgr.getStateBagValue("bookinginfo"),i="",r="";t.hasOwnProperty("BookingNumber")&&(i=typeof t.BookingNumber=="function"?t.BookingNumber():t.BookingNumber);t.hasOwnProperty("SessionID")&&(r=typeof t.SessionID=="function"?t.SessionID():t.SessionID);i!=""&&r!=""?vrcSendAjax("/ECommerce/TryCloseBookingSession",parseTryCloseBookingSession,'{ "dto": { "SessionID": "'+r+'", "BookingNumber": '+i+" } }"):vFrmMgr.doneLoading()}function parseTryCloseBookingSession(n){vFrmMgr.ajaxTryCloseBookingSessionSuccess.Trigger();vFrmMgr.getCurrentStep().errors=n.errors;vFrmMgr.displayErrors()}function IsPhoneNANP(n){switch(n){case"US":case"CA":case"AI":case"AG":case"AS":case"BB":case"BM":case"BS":case"DM":case"DO":case"GD":case"GU":case"JM":case"KN":case"KY":case"LC":case"MP":case"MS":case"PR":case"TC":case"TT":case"VC":case"VG":case"VI":return!0;default:return!1}}function PreFormatPhoneNumber(n){for(var i="",t=0;t<n.length;t++)n.charCodeAt(t)>=48&&n.charCodeAt(t)<=57&&(i+=n.charAt(t));return i}function FormatPhoneNumber(n,t){var i=PreFormatPhoneNumber(n);return IsPhoneNANP(t)&&i.length==10&&(i=i.replace(/(\d{3})(\d{3})(\d{4})/,"($1)$2-$3")),i}function FormatPhoneField(n,t){n.value!=""&&(n.value=FormatPhone(n.value,t))}function GetPhoneNumberFromDTO(n){var t="";return n!=null&&(t=n.IntlAreaCode+n.CountryCode+n.AreaCode+n.Prefix+n.BaseNumber),t}function GetPaxPhoneObj(n,t){switch(t){case n.PassengerPhoneNum1.DescriptionCode:return n.PassengerPhoneNum1;case n.PassengerPhoneNum2.DescriptionCode:return n.PassengerPhoneNum2;case n.PassengerPhoneNum3.DescriptionCode:return n.PassengerPhoneNum3;case n.PassengerPhoneNum4.DescriptionCode:return n.PassengerPhoneNum4;default:return null}}function GetPaxEmPhoneObj(n,t){switch(t){case n.PassengerEmergencyContactPhone1.DescriptionCode:return n.PassengerEmergencyContactPhone1;case n.PassengerEmergencyContactPhone2.DescriptionCode:return n.PassengerEmergencyContactPhone2;default:return null}}function ECommercePollSuccessCallback(n){vFrmMgr.ajaxPollECommerceSessionSuccess.Trigger();typeof bookingInfoVM!="undefined"&&(bookingInfoVM=MapSessionDTO(bookingInfoVM,n,!1))}function ECommercePollPreEventCallback(){vFrmMgr.getCurrentStep().errors=[]}function StartECommercePolling(){typeof bookingInfoVM!="undefined"&&PollECommerceSession!=null&&PollECommerceSession.Start(vFrmMgr.getStateBagValue("bookinginfo"),ECommercePollSuccessCallback)}function bankCheckPop(){$.colorbox({href:"/content/images/RoutingTransitNumberExample.jpg",transition:"none",slideshow:!1,opacity:.5})}function formInit(n){var t,i,r;if($("form").unbind("submit.vrc_form_init").bind("submit.vrc_form_init",function(){if(!$(this).hasClass("react-form")&&("placeholder"in document.createElement("input")||n.find("input[type='text'][placeholder],input[type='password'][placeholder]").each(function(){var n=$(this),t=n.attr("placeholder");t==$(this).val()&&$(this).val("")}),$(this).valid())){var t=$(this).find(":submit,.psuedo-submit");DisableElement(t)}}),$("form").each(function(){var t,n;$(this).hasClass("react-form")||(t=$(this).find(":submit,.psuedo-submit"),EnableElement(t),n=$(this).data("validator"),n&&(n.settings.ignore=":hidden:not(select), :hidden>select"))}),$("<br/>").insertBefore("#best-time input:eq(2)"),typeof StylePlaceholderIfUnsupported=="function"&&StylePlaceholderIfUnsupported(n),n.find(".scroll-to-contact").click(function(){$(this).parents("body, html").animate({scrollTop:n.find(".insertPanel").offset().top-dataDefaults.hashBuffer})}),n.find("label.take-space").each(function(){var n=$("input[id="+$(this).attr("for")+"]:not(:focus)");$(this).css("position")=="absolute"?n.val()==""?$(this).removeAttr("style"):$(this).css("display","none"):$(this).removeAttr("style")}),$("select").not(".no-chosen").not("select.no-chzn").each(function(){$(this).chosen()}),$(".formArea .chzn-single").addClass("chzn-default"),n.find("input.placehold-label").focus(function(){var n=$("label[for="+$(this).attr("id")+"]");n.css("position")=="absolute"&&n.css("display","none")}).blur(function(){var n=$("label[for="+$(this).attr("id")+"]");$(this).val()==""&&n.removeAttr("style")}),n.find("label.take-space").click(function(){var n=$("input[id="+$(this).attr("for")+"]");$(this).css("position")=="absolute"&&n.focus()}),isTouch()||n.find(".formArea .phone input[type='text']").attr("data-old-length","-1").keyup(function(){$(this).attr("maxlength")&&($(this).val().length==parseFloat($(this).attr("maxlength"))&&$(this).nextAll("input[type='text']:first").focus(),$(this).val().length==parseFloat($(this).attr("data-old-length"))&&$(this).val().length==0&&$(this).prevAll("input[type='text']:first").focus(),$(this).attr("data-old-length",$(this).val().length))}),n.find("#form_special_offers").find("#address_toggle_check").each(function(){n.find("#postalFields").addClass("hide")}),n.find("#form_special_offers").find("#address_toggle_check").click(function(){$("#address_toggle_check:checked").length>0?$("#postalFields").removeClass("hide"):$("#postalFields").addClass("hide")}),n.find("#form_order_brochures").find(".country, .address, .city-state-zip").addClass("hide"),n.find("#oceans_mail_check:checked, #rivers_print_check:checked").each(function(){n.find(".country, .address, .city-state-zip").removeClass("hide")}),n.find("#SendToFriend:checked").each(function(){n.find("#send_to_friend_form").addClass("show_friend")}),n.find("#form_order_brochures input[type='checkbox']").click(function(){var i=$(this).is(":checked"),t=$(this).attr("id");t=="SendToFriend"?i==!0?$("#send_to_friend_form").addClass("show_friend"):$("#send_to_friend_form").removeClass("show_friend"):t=="oceans_mail_check"||t=="rivers_print_check"?($("#oceans_mail_check:checked").length>0?($("#oceans_mail_check").attr("value","true"),$("#oceans_mail_check").attr("checked","checked")):($("#oceans_mail_check").attr("value","false"),$("#oceans_mail_check").removeAttr("checked")),$("#oceans_mail_check:checked, #rivers_print_check:checked").length>0?$("#form_order_brochures").find(".country, .address, .city-state-zip").removeClass("hide"):$("#form_order_brochures").find(".country, .address, .city-state-zip").addClass("hide")):(t=="oceans_online_check"||t=="rivers_online_check")&&($("#oceans_online_check:checked").length>0?($("#oceans_online_check").attr("value","true"),$("#oceans_online_check").attr("checked","checked")):($("#oceans_online_check").attr("value","false"),$("#oceans_online_check").removeAttr("checked")));isTouch()&&n.find("#form_order_brochures").css({display:"none"}).css({display:"block"})}),$("#brochure_form input[type='checkbox']").each(function(){var t=$(this).is(":checked"),n=$(this).attr("id"),i,r;(n=="Online"||n=="online_check")&&t==!0&&$("#oceans_online_check:not(:checked), #rivers_online_check:not(:checked)").trigger("click");(n=="Mail"||n=="mail_check")&&t==!0&&$("#oceans_mail_check:not(:checked), #rivers_print_check:not(:checked)").trigger("click");$(this).hasClass("loaded")||(i=$("#brochure_form a"),r=$("#brochure_form a").attr("href"),$(this).change(function(){var n="";n+=$("#brochure_form #Online").is(":checked")||$("#brochure_form #online_check").is(":checked")?"?online_brochure=true":"?online_brochure=false";n+=$("#brochure_form #Mail").is(":checked")||$("#brochure_form #mail_check").is(":checked")?"&print_brochure=true":"&print_brochure=false";i.attr("href",r+n)}),$(this).addClass("loaded"))}),getQueryVariable(window.location.href,"online_brochure")=="true"&&($("#oceans_online_check").prop("checked",!0),$("#rivers_online_check").prop("checked",!0)),getQueryVariable(window.location.href,"print_brochure")=="true"&&($("#oceans_mail_check").prop("checked",!0),$("#rivers_print_check").prop("checked",!0)),n.find("input.reset").click(function(){$("select").val("").trigger("liszt:updated");$(".quick_buttons a.selected").trigger("click")}),t=n.find('input[name="PreferredMethodofContact"]'),t.length&&(setFieldsByPrefferedMethodOfContact(n),t.click(function(){setFieldsByPrefferedMethodOfContact(n)}),$("#ContactNumber").rules("add",{required:function(){return n.find('input[value="Phone"]').prop("checked")?!0:!1}}),$("#EmailAddress").rules("add",{required:function(){return n.find('input[value="Email"]').prop("checked")?!0:!1}})),i=n.find('select[name="PreferredContactMethod"]'),i.length){$("#PreferredContactMethod").on("change",function(){var n=$(this).val();n!=="";n!=="Email"?($(".phone .form-control-placeholder span").text(""),$("#ContactNumber").attr("aria-label","Enter Phone Number - Required")):($(".phone .form-control-placeholder span").text("(Optional)"),$("#ContactNumber").attr("aria-label","Enter Phone Number - Optional"))});$("#ContactNumber").rules("add",{required:function(){var n=$("#PreferredContactMethod").val();return n!==""&&n!=="Email"?!0:!1}})}if(r=n.find('select[name="ReasonForContact"]'),r.length)$("#ReasonForContact").on("change",function(){var n=$(this).val();n!=="Other"?$(".contact-us-booking-number").show():($("#BookingNumber").val(""),$(".contactus-form").validate().element("#BookingNumber"),$(".contact-us-booking-number").hide())})}function setFieldsByPrefferedMethodOfContact(n){n.find('input[value="Phone"]').prop("checked")?($(".phone .red").show(),$("#ContactNumber.form-control").attr("aria-required","true"),$(".EmailAddressDiv .input-validation-error").removeClass("input-validation-error"),$(".EmailAddressDiv .field-validation-error").addClass("field-validation-valid"),$(".EmailAddressDiv .field-validation-error").removeClass("field-validation-error"),$(".EmailAddressDiv .red").hide(),$("#EmailAddress.form-control").removeAttr("aria-required"),$("#EmailConfirmation.form-control").removeAttr("aria-required"),$("#contact-me").parent().hide()):($(".EmailAddressDiv .red").show(),$("#contact-me").parent().show(),$("#EmailAddress.form-control").attr("aria-required","true"),$("#EmailConfirmation.form-control").attr("aria-required","true"),$(".phone .input-validation-error").removeClass("input-validation-error"),$(".phone .field-validation-error").addClass("field-validation-valid"),$(".phone .field-validation-error").removeClass("field-validation-error"),$(".phone .red").hide(),$("#ContactNumber.form-control").removeAttr("aria-required"))}function trackTealiumView(n){typeof n!="undefined"&&tealium_handler.view(n)}function trackTealiumLink(n){typeof n!="undefined"&&tealium_handler.view(n)}function SetFocusLink(){var n=this;n._onClick=function(){n.$target.focus()};n.bind=function(t){n.$button=$(t.element);n.$target=$(t.target);n.$button.on("click",function(){n._onClick()});return n};n.embed=function(t){var i=document.createElement("a"),r;return i.setAttribute("href","javascript:void()"),"id"in t&&i.setAttribute("id",t.id),"class"in t&&i.setAttribute("class",t.class),r=document.createTextNode(t.text),i.appendChild(r),t.addToTop?$(t.container).prepend(i):$(t.container).append(i),n.bind({element:i,target:t.target}),n}}function lpForceDesktopCheck(){window.console&&console.log("*** LP Check Desktop");var n=lpTag.device.familyName();/Tablet/.test(n)&&lpForceDesktopForTablet()}function lpForceDesktopForTablet(){var t=$("#lpChat"),n;t.size()>0&&(n=t.parent(),n.size()>0&&n.hasClass("lp_tablet")&&(window.console&&console.log("*** LP Force Desktop"),n.removeClass("lpdv lp_tablet lp_portrait"),n.addClass("lp_desktop lp_landscape"),t.find(".lp_icon-white img").attr("src","https://lpcdn.lpsnmedia.net/le_unified_window/8.10.1.3-release_1525/resources/icons/desktop/sprites_v1.png")))}function addStateClasses(){document.documentElement.className+=isTouch()?" is-touch":" no-touch"}function isSkipToContentButtonembeddable(){var n=$("#mainContentTop").length===1;return typeof SetFocusLink!==undefined&&n}function setMainContentTop(){var n,i,r,t;if(!($("#mainContentTop").size()>0)){for(n=null,i=[".trd-body-wrapper",".contentWrapper","#cruise-main-content","#contentWrapper"],idx=0;idx<i.length;idx++)if(r=$(i[idx]),r.length>0){n=r.first();break}n!=null&&(t=document.createElement("a"),t.setAttribute("id","mainContentTop"),t.setAttribute("tabindex","-1"),n.prepend(t))}}function embedSkipToContentButton(){if(setMainContentTop(),isSkipToContentButtonembeddable()){var n=new SetFocusLink;n.embed({container:"#trd-header","class":"skip-to-main-content-button",text:"Skip to Main Content",target:"#mainContentTop",addToTop:!0})}else console.error("Skip to Main Content button could not be embedded. Make sure all dependencies are included and a content top anchor exists in the DOM.")}function viewport(){var n=window,t="inner";return"innerWidth"in window||(t="client",n=document.documentElement||document.body),{width:n[t+"Width"],height:n[t+"Height"]}}function videoBoxInit(){$(".columnWrapper").each(function(){var n=$(this),t,i;n.hasClass("loaded")||(t=n.find(".cruiseslides"),t.size()>0&&t.flexslider({animation:"fade",controlNav:"thumbnails",animationLoop:!1,slideshow:!1,directionNav:!1}),n.addClass("loaded"),i=$(this).find(".videoBox"),i.length&&i.show())})}function modulesInit(){$("#fac, #order_brochure ").each(function(){var n=$(this);n.hasClass("loaded")||(n.find(".module_title").click(function(){isMobile()?n.hasClass("module_open")?n.removeClass("module_open"):n.addClass("module_open"):n.hasClass("module_open")?$("#fac, #order_brochure").removeClass("module_open"):$("#fac, #order_brochure").addClass("module_open")}),n.addClass("loaded"))});$("#fac, #fac_nav").each(function(){var n=$(this);n.find(".quick_buttons a").click(function(n){n.preventDefault();$(this).hasClass("selected")||$(this).hasClass("disabled")?$(this).removeClass("selected"):$(this).addClass("selected")})})}function getQueryVariable(n,t){var f=n.split("?")[1],r,i,u;if(!f)return null;for(r=f.split("&"),i=0;i<r.length;i++)if(u=r[i].split("="),decodeURIComponent(u[0])==t)return decodeURIComponent(u[1]);return null}function accordions(){$(".accordion:not(.loaded)").find(".stateroom_feature, .accordion_list").each(function(){$(this).find(".drawer a").click(function(n){n.stopPropagation()});$(this).click(function(n){var i,t,r;n.preventDefault();i=$(this);t=i.find(".drawer");i.hasClass("open")?(t.stop().css({"max-height":t.height()}),t.animate({"max-height":0,opacity:0}),i.removeClass("open")):(r=0,t.children().each(function(){r+=$(this).outerHeight()}),t.stop().css({opacity:0}).animate({"max-height":r,opacity:1},function(){t.css({"max-height":""})}),i.addClass("open"))})});$(".accordion").addClass("loaded")}function setMaxHeight(n){var i=$(".container-fluid").not("#featurette"),u;n&&(i=$(n));i.hasClass("use-natural-height")||i.each(function(){var n=$(this),t,r;if(!n.hasClass("set-tallest-height")){var t=0,h=n.height()-16,u=".excluded, .drawer";(screenXs.matches||screenSm.matches||screenLg.matches)&&(u+=", .thumbnail-flagship");(screenLg.matches||screenSm.matches)&&n.find(".thumbnail-flagship").css("height","");screenXXs.matches||(n.find(".thumbnail").not(u).css("height",""),n.find(".thumbnail").not(u).each(function(){var i=$(this),n=i.outerHeight();n>t&&(t=n)}),n.find(".thumbnail").not(u).css({height:t}));n.find(".drawer").each(function(){$caption=$(this).find(".caption");var n=$caption.find("div:first").outerHeight()+$caption.find(".drawer-action").outerHeight()+16;$(this).data({minHeight:200,maxHeight:h,captionHeight:n});n-$(".drawer-action").outerHeight()>200&&$(this).find(".drawer-action").css("display","block")})}if(n.hasClass("set-tallest-height")&&(t=0,n.children(".row").children("div").css("height",""),screenXs.matches||(n.children(".row").children("div").each(function(){var n=$(this).height();n>t&&(t=n)}),n.children(".row").children("div").css("height",t+16))),n.hasClass("set-tallest-on-row")){var i=[],f=[],e=0,o=0,s=n.children(".row").children("div");if(s.css("height",""),!screenXs.matches)for($(s).each(function(n){var t=$(this),s=t.offset(),u=s.top,r;n==0&&(o=u);t.css("height","");o==u||e||(e=n);r=0;e&&(r=Math.floor(n/e));i.length<r+1&&i.push(0);f.push({y:r,toResize:t,h:t.outerHeight()});t.outerHeight()>i[r]&&(i[r]=t.outerHeight())}),r=0;r<f.length;r++)f[r].toResize.css("height",i[f[r].y])}});var t=$("#cruise-sidebar:not(.sticky-sidebar)"),r=$("#cruise-main-content"),f=window.matchMedia("(min-width:768px)");t.length&&r.length&&(t.css("height",""),u=t.offset().top+t.height(),setTimeout(function(){return u>viewport().height&&t.addClass("more-dates-visible"),t.height()>r.height()&&f.matches&&t.css("height",r.height()),moreDatesSetMaxPos()},50))}function moreDatesSetMaxPos(){var n=$("#cruise-sidebar:not(.sticky-sidebar)"),u=$("#cruise-main-content");if(n.length&&u.length){var i=n.offset().top+n.height(),r=$(window).scrollTop(),t=$("#see-more-dates-tag");i-r-t.height()-viewport().height<=0?(t.css({top:i-r-48}),n.removeClass("more-dates-visible")):(t.css({top:""}),n.addClass("more-dates-visible"))}}function setWhyVikingComponentItems(){$(".why-viking-fullscreen-carousel-template, .why-viking-card-template").length>0&&$(".why-viking-fullscreen-carousel-template .flexslider, .why-viking-card-template .flexslider").each(function(){screenSm.matches&&$(this).parent(".why-viking-card-template").length>0?$(this).find(".custom-numbered-controls").css({top:"auto"}):$(this).find(".custom-numbered-controls").css("top",$(this).find("img").height()-$(this).find(".custom-numbered-controls").height())})}function isMobile(n){return n==undefined&&(n=viewport().width),n<=responsiveThreshold&&screen.width<=responsiveThreshold||n<=oldResponsiveThreshold?!0:!1}function isTouch(){return"ontouchstart"in document.documentElement}function getIndex(n){return n.parent().children().index(n)}function resizeFixes(){$("#cboxOverlay").css({width:$(window).width(),height:$("html").height()});$("#colorbox").css({left:($(window).width()-$("#colorbox").outerWidth())/2})}function mapZoom(){isMobile()||$(".overviewMap").hover(function(){$(".map_zoom").stop().fadeIn()},function(){$(".map_zoom").stop().fadeOut()})}function dropdownList(){$(".select_list").click(function(){var t=$(this),n=$(this).parent().siblings(".select_option");$(this).hasClass("open")?(n!=null&&n.hide(),$(this).removeClass("open")):($(this).addClass("open"),n.show(),$("body").click(function(i){i.target!=n&&i.target!=t[0]&&(n.hide(),t.removeClass("open"))}))});$(".select_option a").click(function(){var n=$(this).parent().parent().siblings(".select_list");n.removeClass("open");$(this).parent().parent().hide()})}function navTabsSelectChange(){$("#navTabsSelect").change(function(){window.location=$("#navTabsSelect option:selected").val()})}function setPageState(){setHashSegments();typeof setPageStateByHashValues=="function"&&setPageStateByHashValues(hashSegments);typeof modals.openVideoModalByHashValues=="function"&&modals.openVideoModalByHashValues(hashSegments);typeof openDynamicModalByHashValues=="function"&&openDynamicModalByHashValues(hashSegments)}function setHashSegments(){var t=getHashValuesAsArray(),n,i;if(clearHashSegments(),t!=null)for(n=0,i=t.length-1;n<i;n+=1)n!=t.length&&typeof hashSegments[t[n]]!="undefined"&&(hashSegments[t[n]]=t[n+1])}function refreshHashSegments(n){var t="",i,r,u,f;for(i in hashSegments)hashSegments.hasOwnProperty(i)&&(r=hashSegments[i],r!=null&&r.length>0&&(u=t.length>0?"/":"",t+=u+i+"/"+r));t.length===0&&(typeof n!="undefined"&&n!==null?(f=$(n.target).attr("data-set-hash"),f==="false"?window.replaceHash(""):t="noscroll"):t="noscroll");vikingHelpers.isSetHash(n)&&window.replaceHash(t)}function clearHashSegments(){for(var n in hashSegments)hashSegments.hasOwnProperty(n)&&(hashSegments[n]=null)}function getHashValuesAsArray(){var n=window.location.hash;return(n=n.split("?")[0],n=="#")?null:(n=n.substring(1,n.length),n.split("/"))}function SetBrowserHashValue(n){var t="";n!=undefined&&n.length>0&&(t=n.replace("#",""));clearHashSegments();refreshHashSegments();window.replaceHash(t)}function SetActiveMstfShareElement(n){var t=$(activeMstfElementId);t&&t.attr("data-id",n)}function GetActiveMstfShareElement(){var n=$(activeMstfElementId);return n&&n.attr("data-id")?n.attr("data-id"):null}function DisableElement(n){n.length&&(n.attr("disabled","disabled"),n.hasClass("with-spinner")?(n.text(""),n.after("<div class='submit-spinner'><img class='spinner' src='/Content/images/spinner.svg' /><\/div>")):n.after("<div class='submit-busy'><img alt='' src='/content/images/busy.gif'><\/div>"))}function EnableElement(n){var t;n.length&&(n.removeAttr("disabled"),t=n.hasClass("with-spinner")?n.next(".submit-spinner"):n.next(".submit-busy"),t.length&&(t.remove(),n.hasClass("with-spinner")&&n.text("Submit")))}function StylePlaceholderIfUnsupported(n){n.jquery&&("placeholder"in document.createElement("input")||(n.find("input[type='text'][placeholder]").each(function(){var n=$(this),t=n.attr("placeholder");t.length>0&&(n.val()==""&&n.val(t).addClass("placeheld"),n.focus(function(){n.val()==t&&n.val("").removeClass("placeheld")}),n.focus(function(){$(this).prev("em").css("display","none")}),n.blur(function(){n.val().length<1&&$(this).prev("em").css("display","")}),n.blur(function(){n.val().length<1&&n.val(t).addClass("placeheld")}))}),n.find("input[type='password'][placeholder]").each(function(){var n=document.createElement("input");n.type="text";$(n).val($(this).attr("placeholder"));$(n).addClass("placeheld");$(n).insertAfter($(this));$(n).show();$(n).prev().hide();$(n).focus(function(){$(this).hide();$(n).prev().show();$(n).prev().focus()});$(n).prev().blur(function(){$(this).val().length==0&&($(this).hide(),$(n).show())});$(this).focus(function(){$(this).prev("em").css("display","none")});$(this).blur(function(){$(this).val().length<1&&$(this).prev("em").css("display","")});$(this).blur(function(){$(this).val().length<1&&$(this).val(_default).addClass("placeheld")})})))}function runOnce(){clearTimeout(resizeCheck);resizeCheck=setTimeout(resizeMethods,500)}function colorboxResize(){$("#colorbox.video_modal_content, #colorbox.modal-video, #colorbox.modal-gallery").length&&$.colorbox.resize({width:"100%"})}function setVideoSliderScroll(){var t=-1,n=0,i;$("#colorbox .video-playlist-mover li").length>0&&($(".video-playlist-mover li").each(function(i){n+=$(this).width();$(this).hasClass("playing")&&(t=i)}),n=n/$(".video-playlist-mover li").length,$(".video-playlist-mover").scrollLeft(n*t-n));i=$("#feature .feature_page_mover ul").children().length;!isMobile()&&i>3?$("#feature .feature_page_mover ul li").css({width:"25%"}):$("#feature .feature_page_mover ul li").css({width:""})}function setVideoSliderScroll(){var t=-1,n=0,i;$("#colorbox .video-playlist-mover li").length>0&&($(".video-playlist-mover li").each(function(i){n+=$(this).width();$(this).hasClass("playing")&&(t=i)}),n=n/$(".video-playlist-mover li").length,$(".video-playlist-mover").scrollLeft(n*t-n));i=$("#feature .feature_page_mover ul").children().length;!isMobile()&&i>3?$("#feature .feature_page_mover ul li").css({width:"25%"}):$("#feature .feature_page_mover ul li").css({width:""})}function closeThumbnailDrawers(){var n=$(".drawer"),t=$(".cruise-change-date-drawer");n.length>0&&n.each(function(){n.removeClass("extend");screenLg?n.find(".caption").css("height",n.data("minHeight")):setTimeout(function(){n.find(".caption").css("height","")},150)});t.length>0&&t.removeClass("expanded")}function resizeFixThumbnailDrawers(){var n=$(".drawer");n.length>0&&n.each(function(){n.hasClass("extend")&&n.find(".caption").css("height",n.data("captionHeight"))})}function VCPrintPage(){window.print()}function refreshBodyDimensions(){setMaxHeight();$("#videoModal, #photoModal").on("shown.bs.tab",function(){setMaxHeight()})}function resizeMethods(){resizeFixes();setMaxHeight();colorboxResize();resizeFixThumbnailDrawers();setWhyVikingComponentItems()}function goToLink(n,t){var i=n.type;(i==="click"||i==="keydown"&&n.keyCode===13)&&(window.location.href=t,n.preventDefault())}function getInternetExplorerVersion(){var n=-1;return navigator.appName==="Microsoft Internet Explorer"?function(){var t=navigator.userAgent,i=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");i.exec(t)!=null&&(n=parseFloat(RegExp.$1))}():navigator.appName==="Netscape"&&function(){var t=navigator.userAgent,i=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})");i.exec(t)!=null&&(n=parseFloat(RegExp.$1))}(),n}function getParameter(n){for(var u=window.location.search.substring(1),i,r=u.split("&"),t=0;t<r.length;t++)if(i=r[t].split("="),i[0]==n)return i[1];return null}function LaunchTackingPricingForm(n){var i="tacticalpricing",r=getParameter(i),t;r?(t="/contact/tacticalpricingform.html?"+i+"="+r,vFrmBeaconMgr.init(t,null,RenderPopUpInBSModal,!1,!0)):n&&(t="/contact/tacticalpricingform.html",vFrmBeaconMgr.init(t,null,RenderPopUpInBSModal,!1,!0))}function RenderPopUpInBSModal(n){var t=$("#bsModal .modal-dialog");t.length<=0?$("body").append('<div id="bsModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="modal-content"><div class="modal-dialog modal-lg modal-static-content raq-modal" role="document"><\/div><!-- /.modal-dialog --><\/div><!-- /.modal -->'):t.removeClass("modal-video modal-sm modal-lg modal-md").addClass("modal-lg modal-static-content raq-modal");PopEmailSubSuccess(!1);BSModalManager.BSModallaunch(n)}function RenderSweepsPopUpInBSModal(n){var t=$("#bsModal .modal-dialog");t.length<=0?$("body").append('<div id="bsModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="modal-content"><div class="modal-dialog modal-lg modal-static-content raq-modal" role="document"><\/div><!-- /.modal-dialog --><\/div><!-- /.modal -->'):t.removeClass("modal-video modal-sm modal-lg modal-md").addClass("modal-lg modal-static-content sweeps-popup");PopEmailSubSuccess(!1);BSModalManager.BSModallaunch(n)}function LaunchBPop(){for(var t,n=0;n<bpoppages.length;n++)if(location.pathname.indexOf(bpoppages[n].targetpage)>-1&&(bpoppages[n].domain.indexOf(location.host)>-1||location.host.indexOf(".ninerealms.tech")>-1||location.host.indexOf("uk.dev")>-1||location.host.indexOf("localhost")>-1)&&(t=bpoppages[n],!HasSeenBounce(t.key)))return SetBounce(t.key),vFrmBeaconMgr.init(t.bpop,null,RenderBouncePop,!1),!0;return!1}function LaunchPopups(){if(VTealiumConsentMangager.isCategoryEnabled(5)&&vrcCookies.sessCookie!=null&&vrcCookies.permCookie!=null){var n;n=!1;!n&&vrcCookies.sessCookie.rv==0&&IsIE8OrLower()&&(n=!0,vrcCookies.sessCookie.rv=1,vFrmBeaconMgr.init("/accounts/ie8alert.html",null,RenderIE8Popup,!1));!n&&IsOkToPop()&&vrcCookies.sessCookie.pd>=popupSubscribe.pageLoads&&vrcCookies.sessCookie.pd<=popupSubscribe.pageLoads+popupSubscribe.maxPageLoads&&(n=!0,LaunchPopEmailSubForm());!n&&IsOkToPopSurvey()&&vrcCookies.sessCookie.pd>=popupSurvey.pageLoads&&vrcCookies.sessCookie.pd<=popupSurvey.pageLoads+popupSurvey.maxPageLoads&&(n=!0,LaunchSurvey());SaveSessCookie(vrcCookies.sessCookie)}}function HasSeenBounce(n){var t="bpb"+n;return $.cookies.get(t)!=null?!0:!1}function SetBounce(n){var t="bpb"+n;$.cookies.set(t,"1")}function IsCobrandedSite(){var n=!1;return $.cookies.get(vrcCookies.cobranded)!=null&&(n=!0),n}function isPopOnLeave(){return popupSurvey.popOnLeave&&window.location.href!==document.referrer&&window.location.href.indexOf("pricing.html")<=0}function LaunchSurvey(){var n="/forms/SurveyURL",t;isPopOnLeave()&&(t=encodeURIComponent(document.referrer),n="/forms/SurveyUrlByReferrer?referrerUrl="+t);$.ajax({url:n,type:"GET",data:"",dataType:"json",contentType:"application/json; charset=utf-8",success:function(n){RenderPopSurvey(n.redirect)},error:function(){}})}function LaunchPopEmailSubForm(){dataDefaults.colorBoxOpen||$.ajax({url:"/forms/EmailSubscribeURL/",type:"POST",data:"",dataType:"json",contentType:"application/json; charset=utf-8",success:function(n){CheckEmailPopResult(n.redirect)},error:function(){}})}function LaunchPopBestDealsForm(n){vFrmBeaconMgr.init(n,null,RenderPopUpInBSModal,!1)}function CheckEmailPopResult(n){var i,t;n.length>0&&IsOkToPop()&&(n.indexOf("tacticalpricing")>-1?(i=GetPermCookie(),vrcCookies.permCookie.vnd=i.vnd,vFrmBeaconMgr.init(n,null,RenderPopUpInBSModal,!1)):n.indexOf("-modal-sweepstakes")>-1?(t=$.cookies.get("vrc_GDPR"),(t==null||t!==!0)&&vFrmBeaconMgr.init(n,null,RenderSweepsPopUpInBSModal,!1)):vFrmBeaconMgr.init(n,null,RenderPopEmailSubfunction,!1))}function IsOkToPop(){var n=$.cookies.get("vrc_ts");return vrcCookies.sessCookie!=null&&vrcCookies.permCookie!=null&&!dataDefaults.colorBoxOpen&&popupSubscribe.enabled==1&&!IsCobrandedSite()&&vrcCookies.permCookie.ns==0&&vrcCookies.permCookie.nso==0&&vrcCookies.permCookie.cnl!=9&&vrcCookies.sessCookie.nso==0&&vrcCookies.sessCookie.nst==0&&(n==null||n=="_default")?!0:!1}function IsOkToPopSurvey(){return vrcCookies.sessCookie!=null&&popupSurvey.enabled==1&&!IsCobrandedSite()&&vrcCookies.sessCookie.svo==0&&vrcCookies.sessCookie.svt==0?!0:!1}function RenderBouncePop(n){$("#modal_loader").size()<1&&$("#modals").html('<div id="modal_loader"><\/div>');$("#modal_loader").html($(n).find(".contentWrapper"));$.colorbox({inline:!0,href:"#modal_loader",width:GetColorboxWidth(),className:"subpage_loaded"})}function RenderPopEmailSubfunction(n){if(IsOkToPop())$("#modal_loader").size()<1&&$("#modals").html('<div id="modal_loader"><\/div>'),$("#modal_loader").html($(n).find(".contentWrapper")),$.colorbox({inline:!0,href:"#modal_loader",width:GetColorboxWidth(),className:"subpage_loaded",onComplete:function(){PopEmailSubSuccess(!1);popformloaded=!0;setTimeout(function(){formInit($("#cboxContent"))},300)},onClosed:function(){popformloaded=!1;PopEmailSubOptOut(!1)}});else vrcCookies.sessCookie!=null&&(vrcCookies.sessCookie.nst=1,SaveSessCookie(vrcCookies.sessCookie))}function GetColorboxWidth(){return screenXs.matches?"100%":screenSm.matches?"100%":screenMd.matches?"80%":screenLg.matches?"920":"100%"}function ResizeColobox(){$.colorbox.resize({width:GetColorboxWidth()})}function RenderIE8Popup(n){$("#modal_loader").size()<1&&$("#modals").html('<div id="modal_loader"><\/div>');$("#modal_loader").html($(n).find(".contentWrapper"));window.setTimeout(function(){$.colorbox({inline:!0,href:"#modal_loader",width:GetColorboxWidth()})},150)}function popSurvey(n){var t=window.open(n,"pSurveyW","toolbar=no,scrollbars=yes,location=yes,statusbar=yes,menubar=no,resizable=1,width=500,height=500");if(t)try{t.focus()}catch(i){}}function RenderPopSurvey(n){n.length<=0||$(document).ready(function(){function r(){getInternetExplorerVersion()>0?$(document).bind(t,function(){popSurvey(n);$(document).unbind(t);popSurveyLoaded(null,!0,t)}):(popSurvey(n),popSurveyLoaded(i,u,t))}var i=null,u=!1,t="click.survey";isPopOnLeave()?r():i=window.setInterval(r,popupSurvey.waitTimeDelay)})}function popSurveyLoaded(n,t,i){vrcCookies.sessCookie!=null&&(vrcCookies.sessCookie.svo=1,vrcCookies.sessCookie.svt=1,SaveSessCookie(vrcCookies.sessCookie));vrcCookies.permCookie!=null&&(vrcCookies.permCookie.sv=1,vrcCookies.permCookie.svo=1,SavePermCookie(vrcCookies.permCookie));n!=null&&window.clearInterval(n);t&&$(document).unbind(i)}function PopEmailSubSuccess(n){n&&$.colorbox.close();vrcCookies.sessCookie!=null&&vrcCookies.permCookie!=null&&(vrcCookies.permCookie.ns=1,vrcCookies.permCookie.svd=DateToCookieString(new Date),SavePermCookie(vrcCookies.permCookie),vrcCookies.sessCookie.nso=1,SaveSessCookie(vrcCookies.sessCookie))}function PopEmailSubClose(n){n&&$.colorbox.close();vrcCookies.sessCookie!=null&&vrcCookies.permCookie!=null&&(vrcCookies.sessCookie.nso=1,SaveSessCookie(vrcCookies.sessCookie),vrcCookies.permCookie.nsd=DateToCookieString(initDateOffset(0,0,5)),SavePermCookie(vrcCookies.permCookie))}function PopEmailSubOptOut(n){n&&$.colorbox.close();vrcCookies.sessCookie!=null&&vrcCookies.permCookie!=null&&(vrcCookies.sessCookie.nso=1,SaveSessCookie(vrcCookies.sessCookie),vrcCookies.permCookie.nso=1,vrcCookies.permCookie.nsod=DateToCookieString(new Date),SavePermCookie(vrcCookies.permCookie))}function openCloseWindow(){var n=window.open("about:blank");n.focus();n.close()}function openCloseTab(){var n=document.createElement("a"),t;n.href="data:text/html,<script>window.close();<\/script>";document.getElementsByTagName("body")[0].appendChild(n);t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!0,!1,!1,!0,0,null);n.dispatchEvent(t);n.parentNode.removeChild(n)}function initialiseAccordions(){$(".search .accordion .select").click(function(){$(this).parent().find("input[type = 'checkbox']").prop("checked",!0)});$(".search .accordion .clear").click(function(){$(this).parent().find("input[type = 'checkbox']").prop("checked",!1)});var n={header:"collapsed-icon",activeHeader:"expanded-icon"};$("#cta-accordion").accordion({collapsible:!0,active:"none",icons:n,heightStyle:"content"});$("#countries").accordion({collapsible:!0,active:"none",icons:n,heightStyle:"content"});$("#cities").accordion({collapsible:!0,active:"none",icons:n,heightStyle:"content"});$("#waterways").accordion({collapsible:!0,active:"none",icons:n,heightStyle:"content"});$("#cruises").accordion({collapsible:!0,active:"none",icons:n,heightStyle:"content"});$("#ships").accordion({collapsible:!0,active:"none",icons:n,heightStyle:"content"});$(".accordion-grey").accordion({collapsible:!0,active:"none",icons:n,heightStyle:"content"});$(".expand-accordion").click(function(){$(".ui-accordion").accordion("option","active",0);$(document).find(".ui-accordion").each(function(){$(this).addClass("open")})});$(".collapse-accordion").click(function(){$(".ui-accordion").accordion("option","active",1);$(document).find(".ui-accordion").each(function(){$(this).removeClass("open")})});$(".ui-accordion-header").click(function(){$(this).parent().hasClass("open")?$(this).parent().removeClass("open"):($(this).parent().is("#cta-accordion")||$(this).parent().parents("body, html").animate({scrollTop:$(this).offset().top-dataDefaults.hashBuffer}),$(this).parent().addClass("open"))})}function youtubeAPIReadyEvent(){YtInfo.stored_videos=[];$("#video_columns .contentColumn").length>1&&(YtInfo.context=$("#video_columns"),$("#video_columns .contentColumn").each(function(n){$(this).find(".playlist-video-title").css({cursor:"pointer"}).click(function(){$(this).parent().find("a").trigger("click")});YtInfo.addVideoInfo(n);YtInfo.setVideoInfoPropertiesFromElement($(this).find("a:first"),n)}));$(".video-expander-container").length>1&&(YtInfo.context=$(".video-expander-container").parent(),$(".video-expander-container").each(function(n){$(this).find(".playlist-video-title").css({cursor:"pointer"}).click(function(){$(this).parent().find("a").trigger("click")});YtInfo.addVideoInfo(n);YtInfo.setVideoInfoPropertiesFromElement($(this).find("a:first"),n)}));YtInfo.setVideoInfoPropertiesFromApi("contentDetails",YtInfo.setVideoDescriptionForAll,null)}function onYouTubeIframeAPIReady(){YtInfo.apiLoaded=!0}function IsPlayerInited(){return typeof player!="undefined"&&player!==null}function SetIsMediaCapable(){typeof s!="undefined"&&player!=null&&typeof s.Media!="undefined"&&typeof s.Media.open=="function"&&typeof s.Media.play=="function"&&typeof s.Media.stop=="function"&&typeof s.Media.close=="function"&&(playerTrackingIsMediaCapable=!0)}function SetHashValueOfVideo(n){if(setHashSegments(),typeof SetBrowserHashValue=="function"&&typeof n.attr("data-video-hash-value")!="undefined"&&vikingHelpers.isSetHash(n)){var t=n.attr("data-video-hash-value").replace("#video/","");t!=null&&(hashSegments.video=t,hashSegments.image=null,hashSegments.modal=null,refreshHashSegments())}}function ClearHashValueOfVideo(){typeof SetBrowserHashValue=="function"&&SetBrowserHashValue("_")}function DynamicModal_SuccessHandler(n){DynamicModalsData.Data=n;AssociativeArray.Push(DynamicModalsData.Collections,DynamicModalsData.ModalId,n)}function getScrollBarWidth(){var t=document.createElement("p"),n,r,i;return t.style.width="100%",t.style.height="200px",n=document.createElement("div"),n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style.visibility="hidden",n.style.width="200px",n.style.height="150px",n.style.overflow="hidden",n.appendChild(t),document.body.appendChild(n),r=t.offsetWidth,n.style.overflow="scroll",i=t.offsetWidth,r===i&&(i=n.clientWidth),document.body.removeChild(n),r-i}function adjustHeader(){$("#trd-header").css("paddingRight",getScrollBarWidth);window.innerWidth>=1400+getScrollBarWidth()?$("#cruise-hdr").css("right",getScrollBarWidth):window.innerWidth<1400+getScrollBarWidth()&&window.innerWidth>1400?($("#cruise-hdr").css("maxWidth","100%"),$("#cruise-hdr").css("paddingRight",getScrollBarWidth)):$("#cruise-hdr").css("paddingRight",getScrollBarWidth)}function resetHeader(){$("#trd-header").css("paddingRight","");$("#cruise-hdr").css("right","");$("#cruise-hdr").css("paddingRight","")}function DynamicModal_CompleteHandler(){var n,t;DynamicModalsData!=null&&DynamicModalsData.TemplateName!=null&&DynamicModalsData.TemplateName.indexOf("voyage-days-template")>-1&&SubPageManager.clearModalLoader();$("#bsModal .modal-dialog").length<=0&&$("body").append('<div id="bsModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="modal-content"><div class="modal-dialog modal-lg" role="document"><\/div><!-- /.modal-dialog --><\/div><!-- /.modal -->');$("#bsModal").length>0&&typeof DynamicModalsData.setHash!="undefined"&&DynamicModalsData.setHash===!1&&$("#bsModal").attr("data-set-hash",!1);$("#bsModal").length>0&&DynamicModalsData.ignoreScroll&&$("#bsModal").attr("data-ignore-scroll",!0);n=$("#bsModal .modal-dialog");n.removeClass("modal-video modal-sm modal-lg modal-md");DynamicModalsData.ClassName.indexOf("modal-sm")==-1&&DynamicModalsData.ClassName.indexOf("modal-md")==-1&&DynamicModalsData.ClassName.indexOf("modal-lg")==-1&&DynamicModalsData.ClassName.indexOf("modal-video")==-1&&n.addClass("modal-lg");n.html(DynamicModalsData.Data).addClass(DynamicModalsData.ClassName);adjustHeader();$("#bsModal").modal("show");t=function(n){var t=n.attr("data-modal-id"),i=n.attr("data-class-name"),r=n.attr("data-item-id"),u=n.attr("data-template-name"),f=encodeURIComponent(DynamicModalsData.TemplateName),e=n.attr("data-template-id"),o=vikingHelpers.getHash(n.attr("data-set-hash")),s=vikingHelpers.getIgnoreScroll(n.attr("data-ignore-scroll"));return{modalId:t,className:i,itemId:r,templateName:u,templateNameEncoded:f,templateId:e,setHash:o,ignoreScroll:s}}($(".dynamicModal"));t.setHash&&DynamicModalsData.ClassName!="modal-video"&&DynamicModalsData.ClassName!="modal-map"&&SetHashValueOfModal(DynamicModalsData.ModalId)}function DynamicModal_SetDynamicModalProperties(n){var t,i;DynamicModalsData.ModalId=n.attr("data-modal-id");DynamicModalsData.ClassName=n.attr("data-class-name");DynamicModalsData.ItemId=n.attr("data-item-id");DynamicModalsData.TemplateName=n.attr("data-template-name");DynamicModalsData.TemplateNameEncoded=encodeURIComponent(DynamicModalsData.TemplateName);DynamicModalsData.TemplateId=n.attr("data-template-id");DynamicModalsData.TileCaptionTitle=n.find("div.caption> h3").text().toLowerCase();DynamicModalsData.IsIncluded=n.find("div.thumbnail-action .included-excursion").text().toLowerCase();t=vikingHelpers.getHash(n.attr("data-set-hash"));DynamicModalsData.setHash=t;i=vikingHelpers.getIgnoreScroll(n.attr("data-ignore-scroll"));DynamicModalsData.ignoreScroll=i}function stopVideo(){player&&player.stopVideo&&player.stopVideo()}function pauseVideo(){player&&player.pauseVideo&&player.pauseVideo()}function closeVideo(){stopVideo()}function createVideoPlayer(n,t,i){player_interaction=!1;player=new YT.Player(n,{height:"100%",width:"100%",host:"https://www.youtube-nocookie.com",type:"movie",videoId:t,playerVars:{showinfo:1,modestbranding:1,rel:0,wmode:"opaque",autoplay:1,origin:"//"+document.domain},events:{onReady:function(){SetIsMediaCapable();playerHasStarted=!1;playerTrackingInfo.VideoPlayedPage=i;playerTrackingInfo.MediaName=i},onStateChange:onPlayerStateChange}})}function onPlayerStateChange(n){var t,i;if(n.data===YT.PlayerState.ENDED&&n.target.playVideo(),n.data===YT.PlayerState.UNSTARTED&&playerHasStarted&&playerTrackingIsMediaCapable&&IsPlayerInited()&&typeof player.getCurrentTime=="function"&&(playerHasStarted=!1,s.Media.stop(playerTrackingInfo.MediaName,player.getCurrentTime()),modalsLogger.log("GA EVENT: STOP"),typeof ga!="undefined"&&ga("send","event","Video","stop",playerTrackingInfo.MediaName),isPaused=!0),previousPlayed=playerTrackingInfo.MediaName,n.data===YT.PlayerState.PLAYING&&(player_interaction=!0),n.data!==!YT.PlayerState.PLAYING||done||(stopVideo(),modalsLogger.log("GA EVENT: STOP"),typeof ga!="undefined"&&ga("send","event","Video","stop",playerTrackingInfo.MediaName)),n.data===YT.PlayerState.CUED&&(modalsLogger.log("GA EVENT: OPEN"),typeof ga!="undefined"&&ga("send","event","Video","open",playerTrackingInfo.MediaName)),n.data===YT.PlayerState.PLAYING){if(playerTrackingIsMediaCapable===!1||IsPlayerInited()===!1||typeof player.getCurrentTime!="function"||typeof player.getDuration!="function")return null;playerHasStarted===!1?(t=player.getDuration(),t>0&&(SetOmniture(playerTrackingInfo.MediaName,"from playing 2"),s.Media.open(playerTrackingInfo.MediaName,t,playerTrackingInfo.MediaPlayerName),modalsLogger.log("GA EVENT: OPEN"),typeof ga!="undefined"&&ga("send","event","Video","open",playerTrackingInfo.MediaName),typeof ga!="undefined"&&ga("set","dimension5",playerTrackingInfo.MediaName),s.Media.play(playerTrackingInfo.MediaName,0),playerHasStarted=!0)):(i=player.getCurrentTime(),s.Media.play(playerTrackingInfo.MediaName,i),modalsLogger.log("GA EVENT: PLAY"),typeof ga!="undefined"&&ga("send","event","Video","play",playerTrackingInfo.MediaName,Math.round(i)),isPaused=!1)}return n.data===YT.PlayerState.BUFFERING,n.data===YT.PlayerState.PAUSED&&playerHasStarted&&playerTrackingIsMediaCapable&&IsPlayerInited()&&typeof player.getCurrentTime=="function"&&(s.Media.stop(playerTrackingInfo.MediaName,player.getCurrentTime()),modalsLogger.log("GA EVENT: PAUSE"),typeof ga!="undefined"&&ga("send","event","Video","pause",playerTrackingInfo.MediaName,Math.round(player.getCurrentTime())),isPaused=!0),n.data===YT.PlayerState.ENDED&&playerHasStarted&&playerTrackingIsMediaCapable&&IsPlayerInited()&&(typeof player.getCurrentTime=="function"&&(s.Media.stop(playerTrackingInfo.MediaName,player.getCurrentTime()),typeof ga!="undefined"&&ga("send","event","Video","end",playerTrackingInfo.MediaName),modalsLogger.log("GA EVENT: END"),typeof ga!="undefined"&&ga("send","event","Video","watchedtime",playerTrackingInfo.MediaName,Math.round(player.getCurrentTime())),s.Media.close(playerTrackingInfo.MediaName)),playerHasStarted=!1),!1}function resetYTModalPlayer(){$("#yt_modal_player").remove();$("#yt_modal_player_sizer").append("<div id='yt_modal_player'><\/div>")}function loadYTModalPlayerByElement(n){var t=n.attr("data-video-id"),i=n.attr("data-video-title");createVideoPlayer("yt_modal_player",t,i);intervalDaemon(playerTrackingInfo,player).trackVideoProgress()}function ToggleVideo(n){n?($("#modal-header-content").show(),$("#modal-related-content").hide()):($("#modal-header-content").hide(),$("#modal-related-content").show());typeof player!="undefined"&&player!==null&&typeof player.stopVideo=="function"&&player.stopVideo()}function initVideoContainerModals(n){var t=0;return n.find(".video-container").each(function(){var i="videoModalGroup"+t.toString(),n;t++;n=$(this).find("a.video_modal");n.each(function(){$(this).click(modals.onVideoClickEvent)})}),t}function initModals(n){function t(n){var i=$(n.currentTarget),f=i.attr("href"),u=i.attr("data-href"),e=i.attr("role")=="button"?!0:!1,t=f||u,r;t.indexOf("tl-link_type")<0&&(r="link",(u||e)&&(r="button"),t=updateQueryStringParamForUrl(t,"tl-link_type",r));n.preventDefault();MinimizeTRDFlyoutMenu();SubPageManager.clearModalLoader();SubPageManager.showLoading();DynamicModalsData.ClassName=t.indexOf("contact/index.html")>-1||t.indexOf("contact/contact-us.html")>-1?"form-modal-contact-us modal-md modal-static-content":t.indexOf("contact/sweeps.html")>0?"modal-md modal-static-content":t.indexOf("thank-you.html")>0?"form-modal-thank-you modal-md modal-static-content":t.indexOf("request-quote.html")>0?"raq-modal modal-static-content modal-md":"modal-static-content";vFrmBeaconMgr.init(t,i,SubPageBootstrapModalCallBack,!1)}$('[data-toggle="tooltip"]').tooltip({html:!0});$("body").off("click.fare").on("click.fare",".fare-info-link.ship-cta",function(){$(document).on("show.bs.modal","#modal-atii",function(){adjustHeader()})});$(document).on("hidden.bs.modal",".modal",function(){resetHeader()});$(document).on("hidden.bs.modal",".dynamicModal",function(){resetHeader()});$("body").off("click.dynamic").on("click.dynamic",".dynamicModal",function(n){n.preventDefault();DynamicModal_SetDynamicModalProperties($(this));var t=AssociativeArray.Get(DynamicModalsData.Collections,DynamicModalsData.ModalId);DynamicModalsData!=null&&DynamicModalsData.TemplateName!=null&&DynamicModalsData.TemplateName.indexOf("voyage-days-template")>-1&&(SubPageManager.clearModalLoader(),SubPageManager.showLoading());t!=null?(DynamicModalsData.Data=t,DynamicModal_CompleteHandler()):GetAjaxHtml(siteDomain.pathPrefix+"/data/dcpAsHtml/?itemId="+DynamicModalsData.ItemId+"&templateId="+DynamicModalsData.TemplateId+"&templateTitle="+DynamicModalsData.TemplateNameEncoded,DynamicModal_SuccessHandler,null,DynamicModal_CompleteHandler,null)});$("body").off("click.inline").on("click",".inlineModal",function(n){n.preventDefault();DynamicModal_SetDynamicModalProperties($(this));var t=$("#"+DynamicModalsData.ItemId).contents().clone();DynamicModalsData.Data=t;DynamicModalsData.ClassName=$(this).hasClass("modal-map")?"modal-map":"modal-md";DynamicModal_CompleteHandler()});n.find("a.slideshow_modal").each(function(){$(this).colorbox({inline:!0,width:744,onComplete:function(){}})});n.find("a.ship_gallery_slideshow").each(function(){$(this).click(function(n){var t,i;n.preventDefault();t=$(this);shipGalleryStartSlideNumber=$(this).attr("data-slide-num");SubPageManager.clearModalLoader();SubPageManager.showLoading();i=$(".embedded-ship-gallery").html();SubPageBootstrapModalCallBack(i,t)})});n.find(".staterooms_details_link").click(function(n){n.preventDefault();var t=$(this),i=$(this).attr("href");SubPageManager.clearModalLoader();SubPageManager.showLoading();vFrmBeaconMgr.init(i,t,SubPageBootstrapModalCallBack,!1)});n.find(".overview_modal").colorbox({inline:!0,width:"748"});n.find(".image_modal").colorbox();n.on("click","button.subpage_modal",function(n){$("#bsModal .modal-dialog").removeClass().addClass("modal-dialog");DynamicModalsData.ClassName="";t(n)});n.on("click","a.subpage_modal",function(n){$("#bsModal .modal-dialog").removeClass().addClass("modal-dialog");DynamicModalsData.ClassName="";t(n)});n.find("a.subpage_modal_ship_deckplans").each(function(){$(this).click(function(n){n.preventDefault();var t=$(this),i=t.attr("href")||t.attr("data-href");SubPageManager.clearModalLoader();SubPageManager.showLoading();vFrmBeaconMgr.init(i,t,SubPageBootstrapModalCallBack,!1,!0)})});n.find(".hotel-offerings-row .flexslider").flexslider({animation:"slide",controlNav:!1,animationLoop:!0});n.find(".modal:not(#bsModal):not([role=dialog])").each(function(){var t=$(this),n=$(t.data("modal-content")),i={html:n,width:"744px",maxWidth:"744px",onComplete:function(){initModals(n);n.find(".custom-modal-close-button").on("click",function(){$.colorbox.close()});if(t.hasClass("gallery-modal")){var i=n.find(".flexslider-slides"),r=n.find(".flexslider-carousel");r.flexslider({animation:"slide",controlNav:!1,animationLoop:!1,slideshow:!1,itemWidth:150,itemMargin:16,asNavFor:i});i.flexslider({animation:"slide",controlNav:!1,animationLoop:!1,slideshow:!1,sync:r})}}};t.hasClass("static-modal")&&(i.className="static-modal-content",i.width="600px",i.maxWidth="600px");t.colorbox(i)});return videoModalsGroupCount=initVideoContainerModals(n),{fireEvent:t}}function SetOmniture(n){typeof s!="undefined"&&(n?(typeof s.channel!="undefined"&&(s.pageName=s.channel+":"+n),s.eVar16=n,s.prop36=n,s.eVar51=n):s.eVar16="[No MediaName Set]")}function initFlexsliderInModal(){$("#bsModal .bx-viewport").flexslider({animation:"fade",controlNav:"thumbnails",animationLoop:!1,slideshow:!1,directionNav:!1,touch:!0})}function initShipGalleryFlexInModal(){$("#bsModal .ship-gallery-flex-container").flexslider({animation:"slide",controlNav:!1,animationLoop:!1,slideshow:!1,directionNav:!0,touch:!0,startAt:shipGalleryStartSlideNumber,start:function(){$(window).trigger("resize")}})}function SubPageBootstrapModal(n,t){SubPageManager.launch(n,t)}function SubPageBootstrapModalCallBack(n,t){$("#bsModal .modal-dialog").removeClass("modal-lg modal-sm");t.hasClass("icon-email")&&$("#bsModal .modal-dialog").addClass("modal-md");SubPageManager.launch(n,t,SubPageManager.subPageShowDefault)}function SubPageModalCallBack(n,t){SubPageManager.launch(n,t,SubPageManager)}function openDynamicModalByHashValues(n){if(n.modal!=null){var i=n.modal,t=$('a[data-modal-id="'+i+'"]');t.length!=0&&t.eq(0).click()}}function SetHashValueOfModal(n){typeof SetBrowserHashValue=="function"&&(n!=null?(setHashSegments(),hashSegments.modal=n,refreshHashSegments()):(setHashSegments(),hashSegments.modal=null,refreshHashSegments()))}function GetUrlForModalId(n){GetModalUrl(window.location.href,n)}function GetModalUrl(n,t){var i=n,r;return n!=undefined&&n.length>0&&t!=undefined&&t.length>0&&(r=i.indexOf("#"),r===0?i="":r>=0&&(i=i.substring(0,r)),i=i+"#modal/"+t),i}function ModifyClassOnColorBox(n,t){var i=$("#colorbox"),r=$("#cboxOverlay");t=="add"&&(r.length&&r.addClass(n),i.length&&i.addClass(n));t=="remove"&&(r.length&&r.removeClass(n),i.length&&i.removeClass(n))}function trackVideoModal(){}function MinimizeTRDFlyoutMenu(){$("#trd-flyout-backing").css("display")=="block"&&typeof objTRDFlyout!="undefined"&&objTRDFlyout.fncHide()}function setOmniturePageEvent(){DynamicModalsData.TemplateNameEncoded!=""&&DynamicModalsData.TemplateNameEncoded!=null&&(DynamicModalsData.TemplateNameEncoded=="itinerary-quick-view-template"||DynamicModalsData.TemplateName=="City Modal"||DynamicModalsData.TemplateName=="Extension Modal"||DynamicModalsData.TemplateName=="Excursion Modal")}function getUrlParameter(n){n=n.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+n+"=([^&#]*)"),t=i.exec(location.search);return t===null?"":decodeURIComponent(t[1].replace(/\+/g," "))}function initialiseFormSubmission(n){var t=typeof n!="undefined"?n:"#manage_booking_step_six, #manage_booking_step_seven, #manage_booking_step_eight, #form_TAP_manage_password, #search_criteria, #select_stateroom, #tap_check_payment, #branded_website, #form_tap_payment_1, #form_tap_pif_1, #form_TAP_agency_info, #passenger_information_form, #form_make_payment_4, #form_make_payment_3, #form_make_payment_2, #form_make_payment_1, #form_TAP_change_password, #form_TAP_verify_email, #form_TAP_agent_info, #form_TAP_verify_agency, #form_TAP_enter_agency_id, #form_order_brochures, #request_quote_form, #form_special_offers, #form_sweepstakes, #connect_and_share, #cruise_search_popup, #cruise_search_page, #river_cruise_search_page, #river_cruise_search_popup, #form_rewards,#request_brochure_sweeps_form, #form_my_viking_login, #form_my_viking_forgot_password, #form_my_viking_change_password, #form_my_viking_forgot_password_login, #form_my_viking_verification, #form_my_viking_temp_change_password, #contactusform, #cobrandcontactusform";$(t).unbind("submit.vrc_modal_submit").bind("submit.vrc_modal_submit",function(n){vrcRecaptchaValidateForm($(this),n)})}function vrcRecaptchaValidateForm(n,t,r){var e,u,f;if(!(n.size()<1)){if(t.preventDefault(),e=n.find(":submit,.psuedo-submit"),n.attr("id")=="form_order_brochures"){for(u=$("input[name^='OrderOptions']").length/2,i=0;i<u;i++)orderOptionKey=$("input[name='OrderOptions["+i+"].key']"),orderOptionValue=$("input[name='OrderOptions["+i+"].value']"),orderOptionValue.is(":checked")||(orderOptionKey.attr("name",""),orderOptionValue.remove("name",""),f=i);f==0&&($("input[name='OrderOptions[1].key']").attr("name","OrderOptions[0].key"),$("input[name='OrderOptions[1].value']").attr("name","OrderOptions[0].value"))}n.valid()?typeof r!="undefined"&&r!=null?grecaptcha.execute(grecappublickey,{action:VRCCaptcha.codify(n.attr("id"))}).then(function(t){n.find(".g-recaptcha-response").val(t);vrcRecaptchaSubmitForm(n)}):vrcRecaptchaSubmitForm(n):typeof StylePlaceholderIfUnsupported=="function"&&StylePlaceholderIfUnsupported($("body"))}}function vrcRecaptchaSubmitForm(n){if(!(n.size()<1)){var i=n.find(":submit,.psuedo-submit"),t=n.attr("id");$(".login-spinner").length!==0&&$(".login-spinner").show();$.post($(n).attr("action"),$(n).serialize(),function(n){var u,r,f;$(".login-spinner").length!==0&&$(".login-spinner").fadeOut();$(n).find(t).length>=1?($("#colorbox").css("display")=="block"?($("#cboxLoadedContent .contentWrapper").html($(n).find(".contentWrapper").html()),formInit($("#cboxContent")),modulesInit(),$.colorbox.resize({width:GetColorboxWidth()})):($("#bodyMover .contentWrapper, #trd-body-mover .contentWrapper").html($(n).find(".contentWrapper").html()),formInit($("#bodyMover, #trd-body-mover")),modulesInit(),$.colorbox.resize({width:GetColorboxWidth()})),IsRequestQuote()&&displayRequestQuoteAvailability("true")):n.status!=null&&(n.status==0?$("#colorbox").css("display")=="block"?(u=GetColorboxWidth(),r=n.redirect,vFrmBeaconMgr.init(r,u,ThankyouCallBack,!0)):$("#bsModal").css("display")=="block"?(u=GetColorboxWidth(),r=n.redirect,r.indexOf("thank-you.html")>0&&(DynamicModalsData.ClassName="form-modal-thank-you modal-md modal-static-content"),vFrmBeaconMgr.init(r,u,ThankyouCallBackBS,!0)):IsLoginForm(t)?OmnitureTagLogin(n.redirect):IsGDPRForm(t)?ShowSuccessMessage():window.location=n.redirect:(EnableElement(i),$(".form_error_detail").html(n.message),$(".form_error").show(),f=$(".form_error").length>0?$(".form_error").offset().top-dataDefaults.hashBuffer:0,f<$(document).scrollTop()&&$(document).scrollTop(f)))}).fail(function(){$(".login-spinner").length!==0&&$(".login-spinner").hide();EnableElement(i)})}}function IsRequestQuote(){return $(".requestQuote").length>0?!0:!1}function IsLoginForm(n){return n.indexOf("form_my_viking_login")>-1?!0:!1}function IsGDPRForm(n){return n.indexOf("gdpr-form")>-1?!0:!1}function ShowSuccessMessage(){$("#gdpr-form, #gdpr-form-intro").hide();$("#success-message").show()}function OmnitureTagLogin(n){setTimeout(function(){window.location=n},1e3)}function ThankyouCallBack(n,t){var i;i=$("<div><\/div>");i.html($(n).find(".contentWrapper"));$.colorbox({html:i.html(),width:t,className:"subpage_loaded",onComplete:function(){initModals($("#cboxContent"))}})}function ThankyouCallBackBS(n){SubPageManager.launch(n,null,null)}function fncLoadSocialIcons(){var n="";if($(".trd-share-facebook").html()==""&&(n=$(".trd-share-facebook-content").html(),n!=""))try{$(".trd-share-facebook").html(n.replace("<!--","").replace("-->","").replace(/\t/g,"").replace(/\n/g,"").replace(/\r/g,""))}catch(t){}if($(".trd-share-twitter").html()==""&&(n=$(".trd-share-twitter-content").html(),n!=""))try{$(".trd-share-twitter").html(n.replace("<!--","").replace("-->","").replace(/\t/g,"").replace(/\n/g,"").replace(/\r/g,""))}catch(t){}if($(".trd-share-google-plus").html()==""&&(n=$(".trd-share-google-plus-content").html(),n!=""))try{$(".trd-share-google-plus").html(n.replace("<!--","").replace("-->","").replace(/\t/g,"").replace(/\n/g,"").replace(/\r/g,""))}catch(t){}}function fncDontPropagateEvent(n){n.stopPropagation()}function fncTRDLog(n){if(window.console&&window.console.log){var t=new Date;console.log(""+t.getSeconds()+"."+t.getMilliseconds()+": "+n)}}function fncComplete1x1RedBarPromo(n){var t;n.attr("data-image")&&!1&&(n.append("<img src='"+n.attr("data-image")+"' alt=''><\/img>"),n.append("<div class='spancontainer'>"+i+"<\/div>"));n.append("<div class='redbar'><\/div>");var i="",r="",u="";for(t=1;t<=3;t++)r="data-text"+t,n.attr(r)&&(u="text-"+(n.attr("data-size"+t)?n.attr("data-size"+t):"medium"),i+=(t>1?"<br>":"")+"<span class='trd-story-1x1.redbarpromo "+u+"'>"+n.attr(r)+"<\/span>");i&&n.append("<div class='spancontainer'>"+i+"<\/div>");fncCompleteCell(n)}function fncCompleteCell(n){if(n.attr("data-href")){n.css("cursor","pointer");n.on("click",function(){document.location.href=$(this).attr("data-href")})}}function initLegalFieldToggles(n){n=n?n:"body";var i=n+" .legal-field-toggle",t=n+" .legal-field",r=t+" .legal-field-content";$(i).on("click",function(){var n=$(this).attr("data-toggle-legal-field-content"),u;$(this).toggleClass("active");u=$(this).hasClass("active");$(i).removeClass("active");$(i).each(function(){$(this)[0].innerText=$(this)[0].innerText.replace("Close ","")});u&&$(this).addClass("active");$(this).hasClass("active")?($(r).hide(),$(n).show(),$(this)[0].innerText="Close "+$(this)[0].innerText,$(t).hasClass("expanded")||($(t).addClass("expanded"),$(t).animate({height:150},function(){$(n).focus();$(t).scrollTop=0}))):$(t).hasClass("expanded")&&$(t).animate({height:0},{complete:function(){$(t).removeClass("expanded");$(r).hide()}})})}var siteDomain={cookieDomain:window.location.hostname,pathPrefix:""},vrcCookies={temp:"VRCSESS2",perm:"VRCPERM2",traffic:"VRCTRF2",cobranded:"agentUrlId2",sessCookie:null,permCookie:null,trafficCookie:null},popupSubscribe={enabled:1,pageLoads:2,maxPageLoads:3,waitTimeDelay:0},popupSurvey={enabled:1,pageLoads:1,pageLoadsHome:5,maxPageLoads:1e4,waitTimeDelay:6e4,popOnLeave:!0},permCookieExpire={AddYear:1,AddMonth:0,AddDay:0},dataDefaults={hashBuffer:200,defDate:"1901-3-1",defYear:1901,defMonth:3,defDay:1,colorBoxOpen:!1,redirectLocation:"",redirectNewWindow:!1,videoPlaying:!1,isMobileScroller:!1,enableVideoToolbar:!0,ShareSelector:"",isIE7OrLower:!1,isIE:!1},emailPrep={type:"",header:"",body:"",Image:"",Link:"",Orig:""},vrcIsMobile,mboxManager,d,yall,ajaxManager,vSiteInfoMgr,eventQuantitySelector,tealium_handler,VTCMDisableBacking,VTealiumConsentMangager,VOneTrustConsentMangager,oldResponsiveThreshold,responsiveThreshold,vikingHelpers,activeMstfElementId,AssociativeArray,Viewport,bpoppages,BSModalManager,popformloaded,ytag,YtInfo,vFrmBeaconMgr,vrcMap,ModalHandlers,intervalDaemon,SocialShare,SubPageManager,modals,checkIfVariableIsSet,AjaxDataTypes,Poll,s_helpers,trdMM,trdCM,objTRDFlyout,trdAutoCompleteSettings,objTRDSearch;(navigator.platform=="iPad"||navigator.platform=="iPhone"||navigator.platform=="iPod")&&(dataDefaults.isMobileScroller=!0);document.all&&!document.querySelector&&(dataDefaults.isIE7OrLower=!0);/MSIE (\d+\.\d+);/.test(navigator.userAgent)&&(dataDefaults.isIE=!0);vrcIsMobile={Android:function(){return navigator.userAgent.match(/Android/i)?!0:!1},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)?!0:!1},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)?!0:!1},Windows:function(){return navigator.userAgent.match(/IEMobile/i)?!0:!1},any:function(){return vrcIsMobile.Android()||vrcIsMobile.BlackBerry()||vrcIsMobile.iOS()||vrcIsMobile.Windows()}};$(document).bind("cbox_open",function(){dataDefaults.colorBoxOpen=!0});$(document).bind("cbox_closed",function(){dataDefaults.colorBoxOpen=!1});var viking=viking||{},prodHostNames=["www.vikingrivercruises.com","www.vikingcruises.com","www.vikingrivercruisescanada.com","www.vikingcruisescanada.com","www.vikingrivercruises.co.uk","www.vikingcruises.co.uk","www.vikingrivercruises.com.au","www.vikingcruises.com.au","www.viking.com","reservations.viking.com","www.myvikingjourney.com"],vrcIsPhone={Android:function(){return navigator.userAgent.match(/Android/i)&&navigator.userAgent.match(/Mobile/i)?!0:!1},iOS:function(){return navigator.userAgent.match(/iPhone/i)?!0:!1},Windows:function(){return navigator.userAgent.match(/Windows Phone/i)?!0:!1},any:function(){return vrcIsPhone.Android()||vrcIsPhone.iOS()||vrcIsPhone.Windows()}},updateQueryStringParamForUrl=function(n,t,i){return n+(n.indexOf("?")>-1?"&":"?")+encodeURIComponent(t)+"="+encodeURIComponent(i)};viking.utilities=function(){var n=function(n,t){return n.length>t?n.substr(0,t-1)+"&hellip;":n},t=function(n){var t,r;try{return t=window[n],r="__storage_test__",t.setItem(r,r),t.removeItem(r),!0}catch(i){return i instanceof DOMException&&(i.code===22||i.code===1014||i.name==="QuotaExceededError"||i.name==="NS_ERROR_DOM_QUOTA_REACHED")&&t&&t.length!==0}},i=function(n){return typeof n=="undefined"||n===null},r=function(n){return typeof n=="undefined"||n===null?!0:n===""},u=function(){return["January","February","March","April","May","June","July","August","September","October","November","December"]};return{isUndefinedNullOrEmpty:r,isUndefinedOrNull:i,getFullMonths:u,storageAvailable:t,truncateStr:n}}();vikingHelpers=function(){function n(n){return typeof n=="undefined"||n==null?!0:n==="false"?!1:!0}function t(t){if(typeof t=="undefined"||t==null)return!0;var i=$(t.target).attr("data-set-hash");return n(i)}function i(n){return typeof n=="undefined"||n==null?!1:n==="true"?!0:!1}return{isSetHash:t,getHash:n,getIgnoreScroll:i}}(),function(){String.prototype.format||(String.prototype.format=function(){var n=arguments;return this.replace(/{(\d+)}/g,function(t,i){return typeof n[i]!="undefined"?n[i]:t})})}();mboxManager=new function(){var n=this;n.checkForMbox=function(){return!1};n.trackBox=function(){};n.mboxIsDefined=function(){return!1};n.createMboxDiv=function(){};n.pingMbox=function(){}};$(window).on("load",function(){document.body.addEventListener("mousedown",function(){document.body.classList.add("using-mouse")});document.body.addEventListener("keydown",function(){document.body.classList.remove("using-mouse")});try{$('[data-toggle="tooltip"]').tooltip()}catch(n){console.log(n)}});d=Object.assign||function(n){for(var i,r,t=1;t<arguments.length;t++){i=arguments[t];for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n};yall=function(n){var u=function(n){var u,r;"IMG"===n.tagName&&(u=n.parentNode,("PICTURE"===u.tagName&&[].slice.call(u.querySelectorAll("source")).forEach(function(n){return f(n)}),!0===i.asyncDecodeSupport&&!0===i.replaceWithSupport)?(r=new Image,f(r,n),r.decode().then(function(){for(var u,f,t=0;t<n.attributes.length;t++)u=n.attributes[t].name,f=n.attributes[t].value,-1===i.ignoredImgAttributes.indexOf(u)&&r.setAttribute(u,f);n.replaceWith(r)})):f(n));"VIDEO"===n.tagName&&([].slice.call(n.querySelectorAll("source")).forEach(function(n){return f(n)}),n.load());"IFRAME"===n.tagName&&(n.src=n.dataset.src,n.removeAttribute("data-src"));n.classList.contains(t.lazyBackgroundClass)&&(n.classList.remove(t.lazyBackgroundClass),n.classList.add(t.lazyBackgroundLoaded))},f=function(n){var r=(1<arguments.length&&void 0!==arguments[1]&&arguments[1]).dataset||n.dataset;for(var t in r)-1!==i.acceptedDataAttributes.indexOf("data-"+t)&&(n.setAttribute(t,r[t]),n.removeAttribute("data-"+t))},e=function l(){var n=!1;!1===n&&0<r.length&&(n=!0,setTimeout(function(){r.forEach(function(n){n.getBoundingClientRect().top<=window.innerHeight+t.threshold&&n.getBoundingClientRect().bottom>=-t.threshold&&"none"!==getComputedStyle(n).display&&(!0===t.idlyLoad&&!0===i.idleCallbackSupport?requestIdleCallback(function(){u(n)},c):u(n),n.classList.remove(t.lazyClass),r=r.filter(function(t){return t!==n}))});n=!1;0===r.length&&!1===t.observeChanges&&i.eventsToBind.forEach(function(n){return n[0].removeEventListener(n[1],l)})},t.throttleTime))},s=new Image,i={intersectionObserverSupport:"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype,mutationObserverSupport:"MutationObserver"in window,idleCallbackSupport:"requestIdleCallback"in window,asyncDecodeSupport:"decode"in s,replaceWithSupport:"replaceWith"in s,ignoredImgAttributes:["data-src","data-sizes","data-media","data-srcset","src","srcset"],acceptedDataAttributes:["data-src","data-sizes","data-media","data-srcset"],eventsToBind:[[document,"scroll"],[document,"touchmove"],[window,"resize"],[window,"orientationchange"]]},t=d({lazyClass:"lazy",lazyBackgroundClass:"lazy-bg",lazyBackgroundLoaded:"lazy-bg-loaded",throttleTime:200,idlyLoad:!1,idleLoadTimeout:100,threshold:200,observeChanges:!1,observeRootSelector:"body",mutationObserverOptions:{childList:!0}},n),h="img."+t.lazyClass+",video."+t.lazyClass+",iframe."+t.lazyClass+",."+t.lazyBackgroundClass,c={timeout:t.idleLoadTimeout},r=[].slice.call(document.querySelectorAll(h)),o;!0===i.intersectionObserverSupport?(o=new IntersectionObserver(function(n,f){n.forEach(function(n){if(!0===n.isIntersecting||0<n.intersectionRatio){var e=n.target;!0===t.idlyLoad&&!0===i.idleCallbackSupport?requestIdleCallback(function(){u(e)},c):u(e);e.classList.remove(t.lazyClass);f.unobserve(e);r=r.filter(function(n){return n!==e})}})},{rootMargin:t.threshold+"px 0%"}),r.forEach(function(n){return o.observe(n)})):(i.eventsToBind.forEach(function(n){return n[0].addEventListener(n[1],e)}),e());!0===i.mutationObserverSupport&&!0===t.observeChanges&&new MutationObserver(function(n){n.forEach(function(){[].slice.call(document.querySelectorAll(h)).forEach(function(n){-1===r.indexOf(n)&&(r.push(n),!0===i.intersectionObserverSupport?o.observe(n):e())})})}).observe(document.querySelector(t.observeRootSelector),t.mutationObserverOptions)};document.addEventListener("DOMContentLoaded",yall),function(n,t,i){function e(i,r,u){var f=t.createElement(i);return r&&(f.id=h+r),u&&(f.style.cssText=u),n(f)}function gt(){return i.innerHeight?i.innerHeight:n(i).height()}function vt(n){var i=c.length,t=(a+n)%i;return 0>t?i+t:t}function v(n,t){return Math.round((/%/.test(n)?("x"===t?k.width():gt())/100:1)*parseInt(n,10))}function vi(n,t){return n.photo||n.photoRegex.test(t)}function yi(n,t){return n.retinaUrl&&i.devicePixelRatio>1?t.replace(n.photoRegex,n.retinaSuffix):t}function pi(n){"contains"in u[0]&&!u[0].contains(n.target)&&(n.stopPropagation(),u.focus())}function wi(){var t,i=n.data(y,tt);null==i?(r=n.extend({},hi),console&&console.log&&console.log("Error: cboxElement missing settings object")):r=n.extend({},i);for(t in r)n.isFunction(r[t])&&"on"!==t.slice(0,2)&&(r[t]=r[t].call(y));r.rel=r.rel||y.rel||n(y).data("rel")||"nofollow";r.href=r.href||n(y).attr("href");r.title=r.title||y.title;"string"==typeof r.href&&(r.href=n.trim(r.href))}function ut(i,r){n(t).trigger(i);w.triggerHandler(i);n.isFunction(r)&&r.call(y)}function yt(i){at||(y=i,wi(),c=n(y),a=0,"nofollow"!==r.rel&&(c=n("."+ot).filter(function(){var t,i=n.data(this,tt);return i&&(t=n(this).data("rel")||i.rel||this.rel),t===r.rel}),a=c.index(y),-1===a&&(c=c.add(y),a=c.length-1)),b.css({opacity:parseFloat(r.opacity),cursor:r.overlayClose?"pointer":"auto",visibility:"visible"}).show(),oi&&u.add(b).removeClass(oi),r.className&&u.add(b).addClass(r.className),oi=r.className,r.closeButton?wt.html(r.close).appendTo(p):wt.appendTo("<div/>"),nt||(nt=lt=!0,u.css({visibility:"hidden",display:"block"}),l=e(o,"LoadedContent","width:0; height:0; overflow:hidden"),p.css({width:"",height:""}).append(l),d=ni.height()+ri.height()+p.outerHeight(!0)-p.height(),g=ti.width()+ii.width()+p.outerWidth(!0)-p.width(),it=l.outerHeight(!0),rt=l.outerWidth(!0),r.w=v(r.initialWidth,"x"),r.h=v(r.initialHeight,"y"),l.css({width:"",height:r.h}),s.position(),ut(tr,r.onOpen),ei.add(ui).hide(),u.focus(),r.trapFocus&&t.addEventListener&&(t.addEventListener("focus",pi,!0),w.one(li,function(){t.removeEventListener("focus",pi,!0)})),r.returnFocus&&w.one(li,function(){n(y).focus()})),nr())}function bi(){!u&&t.body&&(si=!1,k=n(i),u=e(o).attr({id:tt,"class":n.support.opacity===!1?h+"IE":"",role:"dialog",tabindex:"-1"}).hide(),b=e(o,"Overlay").hide(),pt=n([e(o,"LoadingOverlay")[0],e(o,"LoadingGraphic")[0]]),ft=e(o,"Wrapper"),p=e(o,"Content").append(ui=e(o,"Title"),fi=e(o,"Current"),ct=n('<button type="button"/>').attr({id:h+"Previous"}),ht=n('<button type="button"/>').attr({id:h+"Next"}),et=e("button","Slideshow"),pt),wt=n('<button type="button"/>').attr({id:h+"Close"}),ft.append(e(o).append(e(o,"TopLeft"),ni=e(o,"TopCenter"),e(o,"TopRight")),e(o,!1,"clear:left").append(ti=e(o,"MiddleLeft"),p,ii=e(o,"MiddleRight")),e(o,!1,"clear:left").append(e(o,"BottomLeft"),ri=e(o,"BottomCenter"),e(o,"BottomRight"))).find("div div").css({float:"left"}),st=e(o,!1,"position:absolute; width:9999px; visibility:hidden; display:none; max-width:none;"),ei=ht.add(ct).add(fi).add(et),n(t.body).append(b,u.append(ft,st)))}function gi(){function i(n){n.which>1||n.shiftKey||n.altKey||n.metaKey||n.ctrlKey||(n.preventDefault(),yt(this))}return u?(si||(si=!0,ht.click(function(){s.next()}),ct.click(function(){s.prev()}),wt.click(function(){s.close()}),b.click(function(){r.overlayClose&&s.close()}),n(t).bind("keydown."+h,function(n){var t=n.keyCode;nt&&r.escKey&&27===t&&(n.preventDefault(),s.close());nt&&r.arrowKey&&c[1]&&!n.altKey&&(37===t?(n.preventDefault(),ct.click()):39===t&&(n.preventDefault(),ht.click()))}),n.isFunction(n.fn.on)?n(t).on("click."+h,"."+ot,i):n("."+ot).live("click."+h,i)),!0):!1}function nr(){var u,b,k,p=s.prep,nt=++ai;lt=!0;f=!1;y=c[a];wi();ut(dt);ut(bt,r.onLoad);r.h=r.height?v(r.height,"y")-it-d:r.innerHeight&&v(r.innerHeight,"y");r.w=r.width?v(r.width,"x")-rt-g:r.innerWidth&&v(r.innerWidth,"x");r.mw=r.w;r.mh=r.h;r.maxWidth&&(r.mw=v(r.maxWidth,"x")-rt-g,r.mw=r.w&&r.w<r.mw?r.w:r.mw);r.maxHeight&&(r.mh=v(r.maxHeight,"y")-it-d,r.mh=r.h&&r.h<r.mh?r.h:r.mh);u=r.href;ki=setTimeout(function(){pt.show()},100);r.inline?(k=e(o).hide().insertBefore(n(u)[0]),w.one(dt,function(){k.replaceWith(l.children())}),p(n(u))):r.iframe?p(" "):r.html?p(r.html):vi(r,u)?(u=yi(r,u),f=t.createElement("img"),n(f).addClass(h+"Photo").bind("error",function(){r.title=!1;p(e(o,"Error").html(r.imgError))}).one("load",function(){var t;nt===ai&&(n.each(["alt","longdesc","aria-describedby"],function(t,i){var r=n(y).attr(i)||n(y).attr("data-"+i);r&&f.setAttribute(i,r)}),r.retinaImage&&i.devicePixelRatio>1&&(f.height=f.height/i.devicePixelRatio,f.width=f.width/i.devicePixelRatio),r.scalePhotos&&(b=function(){f.height-=f.height*t;f.width-=f.width*t},r.mw&&f.width>r.mw&&(t=(f.width-r.mw)/f.width,b()),r.mh&&f.height>r.mh&&(t=(f.height-r.mh)/f.height,b())),r.h&&(f.style.marginTop=Math.max(r.mh-f.height,0)/2+"px"),c[1]&&(r.loop||c[a+1])&&(f.style.cursor="pointer",f.onclick=function(){s.next()}),f.style.width=f.width+"px",f.style.height=f.height+"px",setTimeout(function(){p(f)},1))}),setTimeout(function(){f.src=u},1)):u&&st.load(u,r.data,function(t,i){nt===ai&&p("error"===i?e(o,"Error").html(r.xhrError):n(this).contents())})}var b,u,ft,p,ni,ti,ii,ri,c,k,l,st,pt,ui,fi,et,ht,ct,wt,ei,r,d,g,it,rt,y,a,f,nt,lt,at,ki,s,oi,si,hi={html:!1,photo:!1,iframe:!1,inline:!1,transition:"elastic",speed:300,fadeOut:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,href:!1,title:!1,rel:!1,opacity:.9,preloading:!0,className:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:void 0,closeButton:!0,fastIframe:!0,open:!1,reposition:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",photoRegex:/\.(gif|png|jp(e|g|eg)|bmp|ico|webp)((#|\?).*)?$/i,retinaImage:!1,retinaUrl:!1,retinaSuffix:"@2x.$1",current:"image {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",returnFocus:!0,trapFocus:!0,onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1},tt="colorbox",h="cbox",ot=h+"Element",tr=h+"_open",bt=h+"_load",kt=h+"_complete",ci=h+"_cleanup",li=h+"_closed",dt=h+"_purge",w=n("<a/>"),o="div",ai=0,di={},ir=function(){function n(){clearTimeout(y)}function f(){(r.loop||c[a+1])&&(n(),y=setTimeout(s.next,r.slideshowSpeed))}function l(){et.html(r.slideshowStop).unbind(i).one(i,v);w.bind(kt,f).bind(bt,n);u.removeClass(t+"off").addClass(t+"on")}function v(){n();w.unbind(kt,f).unbind(bt,n);et.html(r.slideshowStart).unbind(i).one(i,function(){s.next();l()});u.removeClass(t+"on").addClass(t+"off")}function e(){o=!1;et.hide();n();w.unbind(kt,f).unbind(bt,n);u.removeClass(t+"off "+t+"on")}var o,y,t=h+"Slideshow_",i="click."+h;return function(){o?r.slideshow||(w.unbind(ci,e),e()):r.slideshow&&c[1]&&(o=!0,w.one(ci,e),r.slideshowAuto?l():v(),et.show())}}();n.colorbox||(n(bi),s=n.fn[tt]=n[tt]=function(t,i){var r=this;if(t=t||{},bi(),gi()){if(n.isFunction(r))r=n("<a/>"),t.open=!0;else if(!r[0])return r;i&&(t.onComplete=i);r.each(function(){n.data(this,tt,n.extend({},n.data(this,tt)||hi,t))}).addClass(ot);(n.isFunction(t.open)&&t.open.call(r)||t.open)&&yt(r[0])}return r},s.position=function(t,i){function w(){ni[0].style.width=ri[0].style.width=p[0].style.width=parseInt(u[0].style.width,10)-g+"px";p[0].style.height=ti[0].style.height=ii[0].style.height=parseInt(u[0].style.height,10)-d+"px"}var f,o,c,l=0,a=0,e=u.offset(),y;(k.unbind("resize."+h),u.css({top:-9e4,left:-9e4}),o=k.scrollTop(),c=k.scrollLeft(),r.fixed?(e.top-=o,e.left-=c,u.css({position:"fixed"})):(l=o,a=c,u.css({position:"absolute"})),a+=r.right!==!1?Math.max(k.width()-r.w-rt-g-v(r.right,"x"),0):r.left!==!1?v(r.left,"x"):Math.round(Math.max(k.width()-r.w-rt-g,0)/2),l+=r.bottom!==!1?Math.max(gt()-r.h-it-d-v(r.bottom,"y"),0):r.top!==!1?v(r.top,"y"):Math.round(Math.max(gt()-r.h-it-d,0)/2),u.css({top:e.top,left:e.left,visibility:"visible"}),ft[0].style.width=ft[0].style.height="9999px",f={width:r.w+rt+g,height:r.h+it+d,top:l,left:a},t)&&(y=0,n.each(f,function(n){if(f[n]!==di[n])return(y=t,void 0)}),t=y);di=f;t||u.css(f);u.dequeue().animate(f,{duration:t||0,complete:function(){w();lt=!1;ft[0].style.width=r.w+rt+g+"px";ft[0].style.height=r.h+it+d+"px";r.reposition&&setTimeout(function(){k.bind("resize."+h,s.position)},1);i&&i()},step:w})},s.resize=function(n){var t;nt&&(n=n||{},n.width&&(r.w=v(n.width,"x")-rt-g),n.innerWidth&&(r.w=v(n.innerWidth,"x")),l.css({width:r.w}),n.height&&(r.h=v(n.height,"y")-it-d),n.innerHeight&&(r.h=v(n.innerHeight,"y")),n.innerHeight||n.height||(t=l.scrollTop(),l.css({height:"auto"}),r.h=l.height()),l.css({height:r.h}),t&&l.scrollTop(t),s.position("none"===r.transition?0:r.speed))},s.prep=function(i){function b(){return r.w=r.w||l.width(),r.w=r.mw&&r.mw<r.w?r.mw:r.w,r.w}function k(){return r.h=r.h||l.height(),r.h=r.mh&&r.mh<r.h?r.mh:r.h,r.h}if(nt){var v,y="none"===r.transition?0:r.speed;l.empty().remove();l=e(o,"LoadedContent").append(i);l.hide().appendTo(st.show()).css({width:b(),overflow:r.scrolling?"auto":"hidden"}).css({height:k()}).prependTo(p);st.hide();n(f).css({float:"none"});v=function(){function s(){n.support.opacity===!1&&u[0].style.removeAttribute("filter")}var i,f,o=c.length,v="frameBorder",p="allowTransparency";nt&&(f=function(){clearTimeout(ki);pt.hide();ut(kt,r.onComplete)},ui.html(r.title).add(l).show(),o>1?("string"==typeof r.current&&fi.html(r.current.replace("{current}",a+1).replace("{total}",o)).show(),ht[r.loop||o-1>a?"show":"hide"]().html(r.next),ct[r.loop||a?"show":"hide"]().html(r.previous),ir(),r.preloading&&n.each([vt(-1),vt(1)],function(){var i,f,u=c[this],r=n.data(u,tt);r&&r.href?(i=r.href,n.isFunction(i)&&(i=i.call(u))):i=n(u).attr("href");i&&vi(r,i)&&(i=yi(r,i),f=t.createElement("img"),f.src=i)})):ei.hide(),r.iframe?(i=e("iframe")[0],v in i&&(i[v]=0),p in i&&(i[p]="true"),r.scrolling||(i.scrolling="no"),n(i).attr({src:r.href,name:(new Date).getTime(),"class":h+"Iframe",allowFullScreen:!0,webkitAllowFullScreen:!0,mozallowfullscreen:!0}).one("load",f).appendTo(l),w.one(dt,function(){i.src="//about:blank"}),r.fastIframe&&n(i).trigger("load")):f(),"fade"===r.transition?u.fadeTo(y,1,s):s())};"fade"===r.transition?u.fadeTo(y,0,function(){s.position(0,v)}):s.position(y,v)}},s.next=function(){!lt&&c[1]&&(r.loop||c[a+1])&&(a=vt(1),yt(c[a]))},s.prev=function(){!lt&&c[1]&&(r.loop||a)&&(a=vt(-1),yt(c[a]))},s.close=function(){nt&&!at&&(at=!0,nt=!1,ut(ci,r.onCleanup),k.unbind("."+h),b.fadeTo(r.fadeOut||0,0),u.stop().fadeTo(r.fadeOut||0,0,function(){u.add(b).css({opacity:1,cursor:"auto"}).hide();ut(dt);l.empty().remove();setTimeout(function(){at=!1;ut(li,r.onClosed)},1)}))},s.remove=function(){u&&(u.stop(),n.colorbox.close(),u.stop().remove(),b.remove(),at=!1,u=null,n("."+ot).removeData(tt).removeClass(ot),n(t).unbind("click."+h))},s.element=function(){return n(y)},s.settings=hi)}(jQuery,document,window);+function(n){"use strict";function t(){var i=document.createElement("bootstrap"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var t in n)if(i.style[t]!==undefined)return{end:n[t]};return!1}n.fn.emulateTransitionEnd=function(t){var i=!1,u=this,r;n(this).one("bsTransitionEnd",function(){i=!0});return r=function(){i||n(u).trigger(n.support.transition.end)},setTimeout(r,t),this};n(function(){(n.support.transition=t(),n.support.transition)&&(n.event.special.bsTransitionEnd={bindType:n.support.transition.end,delegateType:n.support.transition.end,handle:function(t){if(n(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})})}(jQuery);+function(n){"use strict";function r(i){return this.each(function(){var u=n(this),r=u.data("bs.tab");r||u.data("bs.tab",r=new t(this));typeof i=="string"&&r[i]()})}var t=function(t){this.element=n(t)},u,i;t.VERSION="3.3.4";t.TRANSITION_DURATION=150;t.prototype.show=function(){var t=this.element,f=t.closest("ul:not(.dropdown-menu)"),i=t.data("target"),u;if(i||(i=t.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var r=f.find(".active:last a"),e=n.Event("hide.bs.tab",{relatedTarget:t[0]}),o=n.Event("show.bs.tab",{relatedTarget:r[0]});(r.trigger(e),t.trigger(o),o.isDefaultPrevented()||e.isDefaultPrevented())||(u=n(i),this.activate(t.closest("li"),f),this.activate(u,u.parent(),function(){r.trigger({type:"hidden.bs.tab",relatedTarget:t[0]});t.trigger({type:"shown.bs.tab",relatedTarget:r[0]})}))}};t.prototype.activate=function(i,r,u){function o(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1);i.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0);e?(i[0].offsetWidth,i.addClass("in")):i.removeClass("fade");i.parent(".dropdown-menu").length&&i.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0);u&&u()}var f=r.find("> .active"),e=u&&n.support.transition&&(f.length&&f.hasClass("fade")||!!r.find("> .fade").length);f.length&&e?f.one("bsTransitionEnd",o).emulateTransitionEnd(t.TRANSITION_DURATION):o();f.removeClass("in")};u=n.fn.tab;n.fn.tab=r;n.fn.tab.Constructor=t;n.fn.tab.noConflict=function(){return n.fn.tab=u,this};i=function(t){t.preventDefault();r.call(n(this),"show")};n(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',i).on("click.bs.tab.data-api",'[data-toggle="pill"]',i)}(jQuery);+function(n){"use strict";function i(i,r){return this.each(function(){var f=n(this),u=f.data("bs.modal"),e=n.extend({},t.DEFAULTS,f.data(),typeof i=="object"&&i);u||f.data("bs.modal",u=new t(this,e));typeof i=="string"?u[i](r):e.show&&u.show(r)})}var t=function(t,i){this.options=i;this.$body=n(document.body);this.$element=n(t);this.$dialog=this.$element.find(".modal-dialog");this.$backdrop=null;this.isShown=null;this.originalBodyPad=null;this.scrollbarWidth=0;this.ignoreBackdropClick=!1;this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,n.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))},r;t.VERSION="3.3.7";t.TRANSITION_DURATION=300;t.BACKDROP_TRANSITION_DURATION=150;t.DEFAULTS={backdrop:!0,keyboard:!0,show:!0};t.prototype.toggle=function(n){return this.isShown?this.hide():this.show(n)};t.prototype.show=function(i){var r=this,u=n.Event("show.bs.modal",{relatedTarget:i});if(this.$element.trigger(u),!this.isShown&&!u.isDefaultPrevented()){this.isShown=!0;this.checkScrollbar();this.setScrollbar();this.$body.addClass("modal-open");this.escape();this.resize();this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',n.proxy(this.hide,this));this.$dialog.on("mousedown.dismiss.bs.modal",function(){r.$element.one("mouseup.dismiss.bs.modal",function(t){n(t.target).is(r.$element)&&(r.ignoreBackdropClick=!0)})});this.backdrop(function(){var f=n.support.transition&&r.$element.hasClass("fade"),u;r.$element.parent().length||r.$element.appendTo(r.$body);r.$element.show().scrollTop(0);r.adjustDialog();f&&r.$element[0].offsetWidth;r.$element.addClass("in").attr("aria-hidden",!1);r.enforceFocus();u=n.Event("shown.bs.modal",{relatedTarget:i});f?r.$dialog.one("bsTransitionEnd",function(){r.$element.trigger("focus").trigger(u)}).emulateTransitionEnd(t.TRANSITION_DURATION):r.$element.trigger("focus").trigger(u)})}};t.prototype.hide=function(i){(i&&i.preventDefault(),i=n.Event("hide.bs.modal"),this.$element.trigger(i),this.isShown&&!i.isDefaultPrevented())&&(this.isShown=!1,this.escape(),this.resize(),n(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),n.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",n.proxy(this.hideModal,this)).emulateTransitionEnd(t.TRANSITION_DURATION):this.hideModal())};t.prototype.enforceFocus=function(){n(document).off("focusin.bs.modal").on("focusin.bs.modal",n.proxy(function(n){document===n.target||this.$element[0]===n.target||this.$element.has(n.target).length||this.$element.trigger("focus")},this))};t.prototype.escape=function(){if(this.isShown&&this.options.keyboard)this.$element.on("keydown.dismiss.bs.modal",n.proxy(function(n){n.which==27&&this.hide()},this));else this.isShown||this.$element.off("keydown.dismiss.bs.modal")};t.prototype.resize=function(){if(this.isShown)n(window).on("resize.bs.modal",n.proxy(this.handleUpdate,this));else n(window).off("resize.bs.modal")};t.prototype.hideModal=function(){var n=this;this.$element.hide();this.backdrop(function(){n.$body.removeClass("modal-open");n.resetAdjustments();n.resetScrollbar();n.$element.trigger("hidden.bs.modal")})};t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};t.prototype.backdrop=function(i){var e=this,f=this.$element.hasClass("fade")?"fade":"",r,u;if(this.isShown&&this.options.backdrop){r=n.support.transition&&f;this.$backdrop=n(document.createElement("div")).addClass("modal-backdrop "+f).appendTo(this.$body);this.$element.on("click.dismiss.bs.modal",n.proxy(function(n){if(this.ignoreBackdropClick){this.ignoreBackdropClick=!1;return}n.target===n.currentTarget&&(this.options.backdrop=="static"?this.$element[0].focus():this.hide())},this));if(r&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!i)return;r?this.$backdrop.one("bsTransitionEnd",i).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):i()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),u=function(){e.removeBackdrop();i&&i()},n.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",u).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):u()):i&&i()};t.prototype.handleUpdate=function(){this.adjustDialog()};t.prototype.adjustDialog=function(){var n=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&n?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!n?this.scrollbarWidth:""})};t.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})};t.prototype.checkScrollbar=function(){var n=window.innerWidth,t;n||(t=document.documentElement.getBoundingClientRect(),n=t.right-Math.abs(t.left));this.bodyIsOverflowing=document.body.clientWidth<n;this.scrollbarWidth=this.measureScrollbar()};t.prototype.setScrollbar=function(){var n=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"";this.bodyIsOverflowing&&this.$body.css("padding-right",n+this.scrollbarWidth)};t.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)};t.prototype.measureScrollbar=function(){var n=document.createElement("div"),t;return n.className="modal-scrollbar-measure",this.$body.append(n),t=n.offsetWidth-n.clientWidth,this.$body[0].removeChild(n),t};r=n.fn.modal;n.fn.modal=i;n.fn.modal.Constructor=t;n.fn.modal.noConflict=function(){return n.fn.modal=r,this};n(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var r=n(this),f=r.attr("href"),u=n(r.attr("data-target")||f&&f.replace(/.*(?=#[^\s]+$)/,"")),e=u.data("bs.modal")?"toggle":n.extend({remote:!/#/.test(f)&&f},u.data(),r.data());r.is("a")&&t.preventDefault();u.one("show.bs.modal",function(n){if(!n.isDefaultPrevented())u.one("hidden.bs.modal",function(){r.is(":visible")&&r.trigger("focus")})});i.call(u,e,this)})}(jQuery);+function(n){"use strict";function r(i){return this.each(function(){var u=n(this),r=u.data("bs.tooltip"),f=typeof i=="object"&&i;(r||!/destroy|hide/.test(i))&&(r||u.data("bs.tooltip",r=new t(this,f)),typeof i=="string"&&r[i]())})}var t=function(n,t){this.type=null;this.options=null;this.enabled=null;this.timeout=null;this.hoverState=null;this.$element=null;this.init("tooltip",n,t)},i;t.VERSION="3.3.4";t.TRANSITION_DURATION=150;t.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"><\/div><div class="tooltip-inner"><\/div><\/div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}};t.prototype.init=function(t,i,r){var f,e,u,o,s;if(this.enabled=!0,this.type=t,this.$element=n(i),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&n(this.options.viewport.selector||this.options.viewport),this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(f=this.options.trigger.split(" "),e=f.length;e--;)if(u=f[e],u=="click")this.$element.on("click."+this.type,this.options.selector,n.proxy(this.toggle,this));else if(u!="manual"){o=u=="hover"?"mouseenter":"focusin";s=u=="hover"?"mouseleave":"focusout";this.$element.on(o+"."+this.type,this.options.selector,n.proxy(this.enter,this));this.$element.on(s+"."+this.type,this.options.selector,n.proxy(this.leave,this))}this.options.selector?this._options=n.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()};t.prototype.getDefaults=function(){return t.DEFAULTS};t.prototype.getOptions=function(t){return t=n.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),t};t.prototype.getDelegateOptions=function(){var t={},i=this.getDefaults();return this._options&&n.each(this._options,function(n,r){i[n]!=r&&(t[n]=r)}),t};t.prototype.enter=function(t){var i=t instanceof this.constructor?t:n(t.currentTarget).data("bs."+this.type);if(i&&i.$tip&&i.$tip.is(":visible")){i.hoverState="in";return}if(i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),n(t.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="in",!i.options.delay||!i.options.delay.show)return i.show();i.timeout=setTimeout(function(){i.hoverState=="in"&&i.show()},i.options.delay.show)};t.prototype.leave=function(t){var i=t instanceof this.constructor?t:n(t.currentTarget).data("bs."+this.type);if(i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),n(t.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="out",!i.options.delay||!i.options.delay.hide)return i.hide();i.timeout=setTimeout(function(){i.hoverState=="out"&&i.hide()},i.options.delay.hide)};t.prototype.show=function(){var c=n.Event("show.bs."+this.type),l,p,h;if(this.hasContent()&&this.enabled){if(this.$element.trigger(c),l=n.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]),c.isDefaultPrevented()||!l)return;var u=this,r=this.tip(),a=this.getUID(this.type);this.setContent();r.attr("id",a);this.$element.attr("aria-describedby",a);this.options.animation&&r.addClass("fade");var i=typeof this.options.placement=="function"?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement,v=/\s?auto?\s?/i,y=v.test(i);y&&(i=i.replace(v,"")||"top");r.detach().css({top:0,left:0,display:"block"}).addClass(i).data("bs."+this.type,this);this.options.container?r.appendTo(this.options.container):r.insertAfter(this.$element);var f=this.getPosition(),o=r[0].offsetWidth,s=r[0].offsetHeight;if(y){var w=i,b=this.options.container?n(this.options.container):this.$element.parent(),e=this.getPosition(b);i=i=="bottom"&&f.bottom+s>e.bottom?"top":i=="top"&&f.top-s<e.top?"bottom":i=="right"&&f.right+o>e.width?"left":i=="left"&&f.left-o<e.left?"right":i;r.removeClass(w).addClass(i)}p=this.getCalculatedOffset(i,f,o,s);this.applyPlacement(p,i);h=function(){var n=u.hoverState;u.$element.trigger("shown.bs."+u.type);u.hoverState=null;n=="out"&&u.leave(u)};n.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",h).emulateTransitionEnd(t.TRANSITION_DURATION):h()}};t.prototype.applyPlacement=function(t,i){var r=this.tip(),l=r[0].offsetWidth,e=r[0].offsetHeight,o=parseInt(r.css("margin-top"),10),s=parseInt(r.css("margin-left"),10),h,f,u;isNaN(o)&&(o=0);isNaN(s)&&(s=0);t.top=t.top+o;t.left=t.left+s;n.offset.setOffset(r[0],n.extend({using:function(n){r.css({top:Math.round(n.top),left:Math.round(n.left)})}},t),0);r.addClass("in");h=r[0].offsetWidth;f=r[0].offsetHeight;i=="top"&&f!=e&&(t.top=t.top+e-f);u=this.getViewportAdjustedDelta(i,t,h,f);u.left?t.left+=u.left:t.top+=u.top;var c=/top|bottom/.test(i),a=c?u.left*2-l+h:u.top*2-e+f,v=c?"offsetWidth":"offsetHeight";r.offset(t);this.replaceArrow(a,r[0][v],c)};t.prototype.replaceArrow=function(n,t,i){this.arrow().css(i?"left":"top",50*(1-n/t)+"%").css(i?"top":"left","")};t.prototype.setContent=function(){var n=this.tip(),t=this.getTitle();n.find(".tooltip-inner")[this.options.html?"html":"text"](t);n.removeClass("fade in top bottom left right")};t.prototype.hide=function(i){function e(){u.hoverState!="in"&&r.detach();u.$element.removeAttr("aria-describedby").trigger("hidden.bs."+u.type);i&&i()}var u=this,r=n(this.$tip),f=n.Event("hide.bs."+this.type);if(this.$element.trigger(f),!f.isDefaultPrevented())return r.removeClass("in"),n.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",e).emulateTransitionEnd(t.TRANSITION_DURATION):e(),this.hoverState=null,this};t.prototype.fixTitle=function(){var n=this.$element;(n.attr("title")||typeof n.attr("data-original-title")!="string")&&n.attr("data-original-title",n.attr("title")||"").attr("title","")};t.prototype.hasContent=function(){return this.getTitle()};t.prototype.getPosition=function(t){t=t||this.$element;var u=t[0],r=u.tagName=="BODY",i=u.getBoundingClientRect();i.width==null&&(i=n.extend({},i,{width:i.right-i.left,height:i.bottom-i.top}));var f=r?{top:0,left:0}:t.offset(),e={scroll:r?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},o=r?{width:n(window).width(),height:n(window).height()}:null;return n.extend({},i,e,o,f)};t.prototype.getCalculatedOffset=function(n,t,i,r){return n=="bottom"?{top:t.top+t.height,left:t.left+t.width/2-i/2}:n=="top"?{top:t.top-r,left:t.left+t.width/2-i/2}:n=="left"?{top:t.top+t.height/2-r/2,left:t.left-i}:{top:t.top+t.height/2-r/2,left:t.left+t.width}};t.prototype.getViewportAdjustedDelta=function(n,t,i,r){var f={top:0,left:0},e,u,o,s,h,c;return this.$viewport?(e=this.options.viewport&&this.options.viewport.padding||0,u=this.getPosition(this.$viewport),/right|left/.test(n)?(o=t.top-e-u.scroll,s=t.top+e-u.scroll+r,o<u.top?f.top=u.top-o:s>u.top+u.height&&(f.top=u.top+u.height-s)):(h=t.left-e,c=t.left+e+i,h<u.left?f.left=u.left-h:c>u.width&&(f.left=u.left+u.width-c)),f):f};t.prototype.getTitle=function(){var t=this.$element,n=this.options;return t.attr("data-original-title")||(typeof n.title=="function"?n.title.call(t[0]):n.title)};t.prototype.getUID=function(n){do n+=~~(Math.random()*1e6);while(document.getElementById(n));return n};t.prototype.tip=function(){return this.$tip=this.$tip||n(this.options.template)};t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")};t.prototype.enable=function(){this.enabled=!0};t.prototype.disable=function(){this.enabled=!1};t.prototype.toggleEnabled=function(){this.enabled=!this.enabled};t.prototype.toggle=function(t){var i=this;t&&(i=n(t.currentTarget).data("bs."+this.type),i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),n(t.currentTarget).data("bs."+this.type,i)));i.tip().hasClass("in")?i.leave(i):i.enter(i)};t.prototype.destroy=function(){var n=this;clearTimeout(this.timeout);this.hide(function(){n.$element.off("."+n.type).removeData("bs."+n.type)})};i=n.fn.tooltip;n.fn.tooltip=r;n.fn.tooltip.Constructor=t;n.fn.tooltip.noConflict=function(){return n.fn.tooltip=i,this}}(jQuery);+function(n){"use strict";function r(t){var i,r=t.attr("data-target")||(i=t.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return n(r)}function i(i){return this.each(function(){var u=n(this),r=u.data("bs.collapse"),f=n.extend({},t.DEFAULTS,u.data(),typeof i=="object"&&i);!r&&f.toggle&&/show|hide/.test(i)&&(f.toggle=!1);r||u.data("bs.collapse",r=new t(this,f));typeof i=="string"&&r[i]()})}var t=function(i,r){this.$element=n(i);this.options=n.extend({},t.DEFAULTS,r);this.$trigger=n('[data-toggle="collapse"][href="#'+i.id+'"],[data-toggle="collapse"][data-target="#'+i.id+'"]');this.transitioning=null;this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger);this.options.toggle&&this.toggle()},u;t.VERSION="3.3.4";t.TRANSITION_DURATION=350;t.DEFAULTS={toggle:!0};t.prototype.dimension=function(){var n=this.$element.hasClass("width");return n?"width":"height"};t.prototype.show=function(){var f,r,e,u,o,s;if(!this.transitioning&&!this.$element.hasClass("in")&&(r=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing"),!r||!r.length||(f=r.data("bs.collapse"),!f||!f.transitioning))&&(e=n.Event("show.bs.collapse"),this.$element.trigger(e),!e.isDefaultPrevented())){if(r&&r.length&&(i.call(r,"hide"),f||r.data("bs.collapse",null)),u=this.dimension(),this.$element.removeClass("collapse").addClass("collapsing")[u](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1,o=function(){this.$element.removeClass("collapsing").addClass("collapse in")[u]("");this.transitioning=0;this.$element.trigger("shown.bs.collapse")},!n.support.transition)return o.call(this);s=n.camelCase(["scroll",u].join("-"));this.$element.one("bsTransitionEnd",n.proxy(o,this)).emulateTransitionEnd(t.TRANSITION_DURATION)[u](this.$element[0][s])}};t.prototype.hide=function(){var r,i,u;if(!this.transitioning&&this.$element.hasClass("in")&&(r=n.Event("hide.bs.collapse"),this.$element.trigger(r),!r.isDefaultPrevented())){if(i=this.dimension(),this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1,u=function(){this.transitioning=0;this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")},!n.support.transition)return u.call(this);this.$element[i](0).one("bsTransitionEnd",n.proxy(u,this)).emulateTransitionEnd(t.TRANSITION_DURATION)}};t.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};t.prototype.getParent=function(){return n(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(n.proxy(function(t,i){var u=n(i);this.addAriaAndCollapsedClass(r(u),u)},this)).end()};t.prototype.addAriaAndCollapsedClass=function(n,t){var i=n.hasClass("in");n.attr("aria-expanded",i);t.toggleClass("collapsed",!i).attr("aria-expanded",i)};u=n.fn.collapse;n.fn.collapse=i;n.fn.collapse.Constructor=t;n.fn.collapse.noConflict=function(){return n.fn.collapse=u,this};n(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(t){var u=n(this);u.attr("data-target")||t.preventDefault();var f=r(u),e=f.data("bs.collapse"),o=e?"toggle":u.data();i.call(f,o)})}(jQuery);+function(n){"use strict";function r(t){t&&t.which===3||(n(e).remove(),n(i).each(function(){var r=n(this),i=u(r),f={relatedTarget:this};i.hasClass("open")&&((i.trigger(t=n.Event("hide.bs.dropdown",f)),t.isDefaultPrevented())||(r.attr("aria-expanded","false"),i.removeClass("open").trigger("hidden.bs.dropdown",f)))}))}function u(t){var i=t.attr("data-target"),r;return i||(i=t.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,"")),r=i&&n(i),r&&r.length?r:t.parent()}function o(i){return this.each(function(){var r=n(this),u=r.data("bs.dropdown");u||r.data("bs.dropdown",u=new t(this));typeof i=="string"&&u[i].call(r)})}var e=".dropdown-backdrop",i='[data-toggle="dropdown"]',t=function(t){n(t).on("click.bs.dropdown",this.toggle)},f;t.VERSION="3.3.4";t.prototype.toggle=function(t){var f=n(this),i,o,e;if(!f.is(".disabled, :disabled")){if(i=u(f),o=i.hasClass("open"),r(),!o){if("ontouchstart"in document.documentElement&&!i.closest(".navbar-nav").length)n('<div class="dropdown-backdrop"/>').insertAfter(n(this)).on("click",r);if(e={relatedTarget:this},i.trigger(t=n.Event("show.bs.dropdown",e)),t.isDefaultPrevented())return;f.trigger("focus").attr("aria-expanded","true");i.toggleClass("open").trigger("shown.bs.dropdown",e)}return!1}};t.prototype.keydown=function(t){var e,o,s,h,f,r;if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)&&(e=n(this),t.preventDefault(),t.stopPropagation(),!e.is(".disabled, :disabled"))){if(o=u(e),s=o.hasClass("open"),!s&&t.which!=27||s&&t.which==27)return t.which==27&&o.find(i).trigger("focus"),e.trigger("click");(h=" li:not(.disabled):visible a",f=o.find('[role="menu"]'+h+', [role="listbox"]'+h),f.length)&&(r=f.index(t.target),t.which==38&&r>0&&r--,t.which==40&&r<f.length-1&&r++,~r||(r=0),f.eq(r).trigger("focus"))}};f=n.fn.dropdown;n.fn.dropdown=o;n.fn.dropdown.Constructor=t;n.fn.dropdown.noConflict=function(){return n.fn.dropdown=f,this};n(document).on("click.bs.dropdown.data-api",r).on("click.bs.dropdown.data-api",".dropdown form",function(n){n.stopPropagation()}).on("click.bs.dropdown.data-api",i,t.prototype.toggle).on("keydown.bs.dropdown.data-api",i,t.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',t.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',t.prototype.keydown)}(jQuery),function(n){n.fn.hoverIntent=function(t,i,r){var u={interval:100,sensitivity:7,timeout:0};u=typeof t=="object"?n.extend(u,t):n.isFunction(i)?n.extend(u,{over:t,out:i,selector:r}):n.extend(u,{over:t,out:t,selector:i});var f,e,o,s,h=function(n){f=n.pageX;e=n.pageY},c=function(t,i){if(i.hoverIntent_t=clearTimeout(i.hoverIntent_t),Math.abs(o-f)+Math.abs(s-e)<u.sensitivity)return n(i).off("mousemove.hoverIntent",h),i.hoverIntent_s=1,u.over.apply(i,[t]);o=f;s=e;i.hoverIntent_t=setTimeout(function(){c(t,i)},u.interval)},a=function(n,t){return t.hoverIntent_t=clearTimeout(t.hoverIntent_t),t.hoverIntent_s=0,u.out.apply(t,[n])},l=function(t){var r=jQuery.extend({},t),i=this;if(i.hoverIntent_t&&(i.hoverIntent_t=clearTimeout(i.hoverIntent_t)),t.type=="mouseenter"){o=r.pageX;s=r.pageY;n(i).on("mousemove.hoverIntent",h);i.hoverIntent_s!=1&&(i.hoverIntent_t=setTimeout(function(){c(r,i)},u.interval))}else n(i).off("mousemove.hoverIntent",h),i.hoverIntent_s==1&&(i.hoverIntent_t=setTimeout(function(){a(r,i)},u.timeout))};return this.on({"mouseenter.hoverIntent":l,"mouseleave.hoverIntent":l},u.selector)}}(jQuery),function(){var n=!0;(function(t){var r=this||eval("this"),u=r.document,e=r.navigator,i=r.jQuery,f=r.JSON;(function(n){typeof define=="function"&&define.amd?define(["exports","require"],n):typeof require=="function"&&typeof exports=="object"&&typeof module=="object"?n(module.exports||exports):n(r.ko={})})(function(o,s){function w(n,t){var i=n===null||typeof n in tt;return i?n===t:!1}function it(n,i){var r;return function(){r||(r=setTimeout(function(){r=t;n()},i))}}function rt(n,t){var i;return function(){clearTimeout(i);i=setTimeout(n,t)}}function ut(n){var t=this;return n&&h.utils.objectForEach(n,function(n,i){var r=h.extenders[n];typeof r=="function"&&(t=r(t,i)||t)}),t}function ft(n){h.bindingHandlers[n]={init:function(t,i,r,u,f){var e=function(){var t={};return t[n]=i(),t};return h.bindingHandlers.event.init.call(this,t,e,r,u,f)}}}function nt(n,t,i,r){h.bindingHandlers[n]={init:function(n,u,f,e,o){var c,s;return h.computed(function(){var l=h.utils.unwrapObservable(u()),f=!i!=!l,e=!s,a=e||t||f!==c;a&&(e&&h.computedContext.getDependenciesCount()&&(s=h.utils.cloneNodes(h.virtualElements.childNodes(n),!0)),f?(e||h.virtualElements.setDomNodeChildren(n,h.utils.cloneNodes(s)),h.applyBindingsToDescendants(r?r(o,l):o,n)):h.virtualElements.emptyNode(n),c=f)},null,{disposeWhenNodeIsRemoved:n}),{controlsDescendantBindings:!0}}};h.expressionRewriting.bindingRewriteValidators[n]=!1;h.virtualElements.allowedBindings[n]=!0}var h=typeof o!="undefined"?o:{},tt,a,c,l,v,b,k,d,y,g,p;h.exportSymbol=function(n,t){for(var i=n.split("."),r=h,u=0;u<i.length-1;u++)r=r[i[u]];r[i[i.length-1]]=t};h.exportProperty=function(n,t,i){n[t]=i};h.version="3.3.0";h.exportSymbol("version",h.version);h.utils=function(){function s(n,t){for(var i in n)n.hasOwnProperty(i)&&t(i,n[i])}function l(n,t){if(t)for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n}function a(n,t){return n.__proto__=t,n}function g(n,t){if(h.utils.tagNameLower(n)!=="input"||!n.type||t.toLowerCase()!="click")return!1;var i=n.type;return i=="checkbox"||i=="radio"}function nt(n,t,i){var r;t&&(typeof n.classList=="object"?(r=n.classList[i?"add":"remove"],h.utils.arrayForEach(t.match(o),function(t){r.call(n.classList,t)})):typeof n.className.baseVal=="string"?p(n.className,"baseVal",t,i):p(n,"className",t,i))}function p(n,t,i,r){var u=n[t].match(o)||[];h.utils.arrayForEach(i.match(o),function(n){h.utils.addOrRemoveItem(u,n,r)});n[t]=u.join(" ")}var v={__proto__:[]}instanceof Array,c={},y={},w=e&&/Firefox\/2/i.test(e.userAgent)?"KeyboardEvent":"UIEvents",o;c[w]=["keyup","keydown","keypress"];c.MouseEvents=["click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave"];s(c,function(n,t){if(t.length)for(var i=0,r=t.length;i<r;i++)y[t[i]]=n});var b={propertychange:!0},n=u&&function(){for(var n=3,i=u.createElement("div"),r=i.getElementsByTagName("i");i.innerHTML="<!--[if gt IE "+ ++n+"]><i><\/i><![endif]-->",r[0];);return n>4?n:t}(),k=n===6,d=n===7;return o=/\S+/g,{fieldsIncludedWithJsonPost:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],arrayForEach:function(n,t){for(var i=0,r=n.length;i<r;i++)t(n[i],i)},arrayIndexOf:function(n,t){if(typeof Array.prototype.indexOf=="function")return Array.prototype.indexOf.call(n,t);for(var i=0,r=n.length;i<r;i++)if(n[i]===t)return i;return-1},arrayFirst:function(n,t,i){for(var r=0,u=n.length;r<u;r++)if(t.call(i,n[r],r))return n[r];return null},arrayRemoveItem:function(n,t){var i=h.utils.arrayIndexOf(n,t);i>0?n.splice(i,1):i===0&&n.shift()},arrayGetDistinctValues:function(n){var i,t,r;for(n=n||[],i=[],t=0,r=n.length;t<r;t++)h.utils.arrayIndexOf(i,n[t])<0&&i.push(n[t]);return i},arrayMap:function(n,t){var r,i,u;for(n=n||[],r=[],i=0,u=n.length;i<u;i++)r.push(t(n[i],i));return r},arrayFilter:function(n,t){var r,i,u;for(n=n||[],r=[],i=0,u=n.length;i<u;i++)t(n[i],i)&&r.push(n[i]);return r},arrayPushAll:function(n,t){if(t instanceof Array)n.push.apply(n,t);else for(var i=0,r=t.length;i<r;i++)n.push(t[i]);return n},addOrRemoveItem:function(n,t,i){var r=h.utils.arrayIndexOf(h.utils.peekObservable(n),t);r<0?i&&n.push(t):i||n.splice(r,1)},canSetPrototype:v,extend:l,setPrototypeOf:a,setPrototypeOfOrExtend:v?a:l,objectForEach:s,objectMap:function(n,t){var r,i;if(!n)return n;r={};for(i in n)n.hasOwnProperty(i)&&(r[i]=t(n[i],i,n));return r},emptyDomNode:function(n){while(n.firstChild)h.removeNode(n.firstChild)},moveCleanedNodesToContainerElement:function(n){for(var t=h.utils.makeArray(n),f=t[0]&&t[0].ownerDocument||u,r=f.createElement("div"),i=0,e=t.length;i<e;i++)r.appendChild(h.cleanNode(t[i]));return r},cloneNodes:function(n,t){for(var r,i=0,f=n.length,u=[];i<f;i++)r=n[i].cloneNode(!0),u.push(t?h.cleanNode(r):r);return u},setDomNodeChildren:function(n,t){if(h.utils.emptyDomNode(n),t)for(var i=0,r=t.length;i<r;i++)n.appendChild(t[i])},replaceDomNodes:function(n,t){var r=n.nodeType?[n]:n,f,e,i,u;if(r.length>0){for(f=r[0],e=f.parentNode,i=0,u=t.length;i<u;i++)e.insertBefore(t[i],f);for(i=0,u=r.length;i<u;i++)h.removeNode(r[i])}},fixUpContinuousNodeArray:function(n,t){if(n.length){for(t=t.nodeType===8&&t.parentNode||t;n.length&&n[0].parentNode!==t;)n.splice(0,1);if(n.length>1){var i=n[0],r=n[n.length-1];for(n.length=0;i!==r;)if(n.push(i),i=i.nextSibling,!i)return;n.push(r)}}return n},setOptionNodeSelectionState:function(t,i){n<7?t.setAttribute("selected",i):t.selected=i},stringTrim:function(n){return n===null||n===t?"":n.trim?n.trim():n.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},stringStartsWith:function(n,t){return(n=n||"",t.length>n.length)?!1:n.substring(0,t.length)===t},domNodeIsContainedBy:function(n,t){if(n===t)return!0;if(n.nodeType===11)return!1;if(t.contains)return t.contains(n.nodeType===3?n.parentNode:n);if(t.compareDocumentPosition)return(t.compareDocumentPosition(n)&16)==16;while(n&&n!=t)n=n.parentNode;return!!n},domNodeIsAttachedToDocument:function(n){return h.utils.domNodeIsContainedBy(n,n.ownerDocument.documentElement)},anyDomNodeIsAttachedToDocument:function(n){return!!h.utils.arrayFirst(n,h.utils.domNodeIsAttachedToDocument)},tagNameLower:function(n){return n&&n.tagName&&n.tagName.toLowerCase()},registerEventHandler:function(t,r,u){var o=n&&b[r],f,e;if(!o&&i)i(t).bind(r,u);else if(o||typeof t.addEventListener!="function")if(typeof t.attachEvent!="undefined")f=function(n){u.call(t,n)},e="on"+r,t.attachEvent(e,f),h.utils.domNodeDisposal.addDisposeCallback(t,function(){t.detachEvent(e,f)});else throw new Error("Browser doesn't support addEventListener or attachEvent");else t.addEventListener(r,u,!1)},triggerEvent:function(n,t){var f,o,e;if(!(n&&n.nodeType))throw new Error("element must be a DOM node when calling triggerEvent");if(f=g(n,t),i&&!f)i(n).trigger(t);else if(typeof u.createEvent=="function")if(typeof n.dispatchEvent=="function")o=y[t]||"HTMLEvents",e=u.createEvent(o),e.initEvent(t,!0,!0,r,0,0,0,0,0,!1,!1,!1,!1,0,n),n.dispatchEvent(e);else throw new Error("The supplied element doesn't support dispatchEvent");else if(f&&n.click)n.click();else if(typeof n.fireEvent!="undefined")n.fireEvent("on"+t);else throw new Error("Browser doesn't support triggering events");},unwrapObservable:function(n){return h.isObservable(n)?n():n},peekObservable:function(n){return h.isObservable(n)?n.peek():n},toggleDomNodeCssClass:nt,setTextContent:function(n,i){var r=h.utils.unwrapObservable(i),u;(r===null||r===t)&&(r="");u=h.virtualElements.firstChild(n);!u||u.nodeType!=3||h.virtualElements.nextSibling(u)?h.virtualElements.setDomNodeChildren(n,[n.ownerDocument.createTextNode(r)]):u.data=r;h.utils.forceRefresh(n)},setElementName:function(t,i){if(t.name=i,n<=7)try{t.mergeAttributes(u.createElement("<input name='"+t.name+"'/>"),!1)}catch(r){}},forceRefresh:function(t){if(n>=9){var i=t.nodeType==1?t:t.parentNode;i.style&&(i.style.zoom=i.style.zoom)}},ensureSelectElementIsRenderedCorrectly:function(t){if(n){var i=t.style.width;t.style.width=0;t.style.width=i}},range:function(n,t){var r,i;for(n=h.utils.unwrapObservable(n),t=h.utils.unwrapObservable(t),r=[],i=n;i<=t;i++)r.push(i);return r},makeArray:function(n){for(var i=[],t=0,r=n.length;t<r;t++)i.push(n[t]);return i},isIe6:k,isIe7:d,ieVersion:n,getFormFields:function(n,t){for(var r=h.utils.makeArray(n.getElementsByTagName("input")).concat(h.utils.makeArray(n.getElementsByTagName("textarea"))),f=typeof t=="string"?function(n){return n.name===t}:function(n){return t.test(n.name)},u=[],i=r.length-1;i>=0;i--)f(r[i])&&u.push(r[i]);return u},parseJson:function(n){return typeof n=="string"&&(n=h.utils.stringTrim(n),n)?f&&f.parse?f.parse(n):new Function("return "+n)():null},stringifyJson:function(n,t,i){if(!f||!f.stringify)throw new Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return f.stringify(h.utils.unwrapObservable(n),t,i)},postJson:function(n,t,i){var l,o,c,f,r,a,e;i=i||{};var v=i.params||{},y=i.includeFields||this.fieldsIncludedWithJsonPost,p=n;if(typeof n=="object"&&h.utils.tagNameLower(n)==="form")for(l=n,p=l.action,o=y.length-1;o>=0;o--)for(c=h.utils.getFormFields(l,y[o]),f=c.length-1;f>=0;f--)v[c[f].name]=c[f].value;t=h.utils.unwrapObservable(t);r=u.createElement("form");r.style.display="none";r.action=p;r.method="post";for(a in t)e=u.createElement("input"),e.type="hidden",e.name=a,e.value=h.utils.stringifyJson(h.utils.unwrapObservable(t[a])),r.appendChild(e);s(v,function(n,t){var i=u.createElement("input");i.type="hidden";i.name=n;i.value=t;r.appendChild(i)});u.body.appendChild(r);i.submitter?i.submitter(r):r.submit();setTimeout(function(){r.parentNode.removeChild(r)},0)}}}();h.exportSymbol("utils",h.utils);h.exportSymbol("utils.arrayForEach",h.utils.arrayForEach);h.exportSymbol("utils.arrayFirst",h.utils.arrayFirst);h.exportSymbol("utils.arrayFilter",h.utils.arrayFilter);h.exportSymbol("utils.arrayGetDistinctValues",h.utils.arrayGetDistinctValues);h.exportSymbol("utils.arrayIndexOf",h.utils.arrayIndexOf);h.exportSymbol("utils.arrayMap",h.utils.arrayMap);h.exportSymbol("utils.arrayPushAll",h.utils.arrayPushAll);h.exportSymbol("utils.arrayRemoveItem",h.utils.arrayRemoveItem);h.exportSymbol("utils.extend",h.utils.extend);h.exportSymbol("utils.fieldsIncludedWithJsonPost",h.utils.fieldsIncludedWithJsonPost);h.exportSymbol("utils.getFormFields",h.utils.getFormFields);h.exportSymbol("utils.peekObservable",h.utils.peekObservable);h.exportSymbol("utils.postJson",h.utils.postJson);h.exportSymbol("utils.parseJson",h.utils.parseJson);h.exportSymbol("utils.registerEventHandler",h.utils.registerEventHandler);h.exportSymbol("utils.stringifyJson",h.utils.stringifyJson);h.exportSymbol("utils.range",h.utils.range);h.exportSymbol("utils.toggleDomNodeCssClass",h.utils.toggleDomNodeCssClass);h.exportSymbol("utils.triggerEvent",h.utils.triggerEvent);h.exportSymbol("utils.unwrapObservable",h.utils.unwrapObservable);h.exportSymbol("utils.objectForEach",h.utils.objectForEach);h.exportSymbol("utils.addOrRemoveItem",h.utils.addOrRemoveItem);h.exportSymbol("utils.setTextContent",h.utils.setTextContent);h.exportSymbol("unwrap",h.utils.unwrapObservable);Function.prototype.bind||(Function.prototype.bind=function(n){var t=this,i;return arguments.length===1?function(){return t.apply(n,arguments)}:(i=Array.prototype.slice.call(arguments,1),function(){var r=i.slice(0);return r.push.apply(r,arguments),t.apply(n,r)})});h.utils.domData=new function(){function r(r,f){var e=r[n],o=e&&e!=="null"&&i[e];if(!o){if(!f)return t;e=r[n]="ko"+u++;i[e]={}}return i[e]}var u=0,n="__ko__"+(new Date).getTime(),i={};return{get:function(n,i){var u=r(n,!1);return u===t?t:u[i]},set:function(n,i,u){if(u!==t||r(n,!1)!==t){var f=r(n,!0);f[i]=u}},clear:function(t){var r=t[n];return r?(delete i[r],t[n]=null,!0):!1},nextKey:function(){return u+++n}}};h.exportSymbol("utils.domData",h.utils.domData);h.exportSymbol("utils.domData.clear",h.utils.domData.clear);h.utils.domNodeDisposal=new function(){function r(i,r){var u=h.utils.domData.get(i,n);return u===t&&r&&(u=[],h.utils.domData.set(i,n,u)),u}function o(i){h.utils.domData.set(i,n,t)}function u(n){var t=r(n,!1),i;if(t)for(t=t.slice(0),i=0;i<t.length;i++)t[i](n);h.utils.domData.clear(n);h.utils.domNodeDisposal.cleanExternalData(n);f[n.nodeType]&&s(n)}function s(n){for(var t,i=n.firstChild;t=i;)i=t.nextSibling,t.nodeType===8&&u(t)}var n=h.utils.domData.nextKey(),e={1:!0,8:!0,9:!0},f={1:!0,9:!0};return{addDisposeCallback:function(n,t){if(typeof t!="function")throw new Error("Callback must be a function");r(n,!0).push(t)},removeDisposeCallback:function(n,t){var i=r(n,!1);i&&(h.utils.arrayRemoveItem(i,t),i.length==0&&o(n))},cleanNode:function(n){var t,i,r;if(e[n.nodeType]&&(u(n),f[n.nodeType]))for(t=[],h.utils.arrayPushAll(t,n.getElementsByTagName("*")),i=0,r=t.length;i<r;i++)u(t[i]);return n},removeNode:function(n){h.cleanNode(n);n.parentNode&&n.parentNode.removeChild(n)},cleanExternalData:function(n){i&&typeof i.cleanData=="function"&&i.cleanData([n])}}};h.cleanNode=h.utils.domNodeDisposal.cleanNode;h.removeNode=h.utils.domNodeDisposal.removeNode;h.exportSymbol("cleanNode",h.cleanNode);h.exportSymbol("removeNode",h.removeNode);h.exportSymbol("utils.domNodeDisposal",h.utils.domNodeDisposal);h.exportSymbol("utils.domNodeDisposal.addDisposeCallback",h.utils.domNodeDisposal.addDisposeCallback);h.exportSymbol("utils.domNodeDisposal.removeDisposeCallback",h.utils.domNodeDisposal.removeDisposeCallback),function(){function n(n,t){t||(t=u);var o=t.parentWindow||t.defaultView||r,f=h.utils.stringTrim(n).toLowerCase(),i=t.createElement("div"),e=f.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","<\/table>"]||!f.indexOf("<tr")&&[2,"<table><tbody>","<\/tbody><\/table>"]||(!f.indexOf("<td")||!f.indexOf("<th"))&&[3,"<table><tbody><tr>","<\/tr><\/tbody><\/table>"]||[0,"",""],s="ignored<div>"+e[1]+n+e[2]+"<\/div>";for(typeof o.innerShiv=="function"?i.appendChild(o.innerShiv(s)):i.innerHTML=s;e[0]--;)i=i.lastChild;return h.utils.makeArray(i.lastChild.childNodes)}function f(n,t){var u,r;if(i.parseHTML)return i.parseHTML(n,t)||[];if(u=i.clean([n],t),u&&u[0]){for(r=u[0];r.parentNode&&r.parentNode.nodeType!==11;)r=r.parentNode;r.parentNode&&r.parentNode.removeChild(r)}return u}h.utils.parseHtmlFragment=function(t,r){return i?f(t,r):n(t,r)};h.utils.setHtml=function(n,r){var f,u;if(h.utils.emptyDomNode(n),r=h.utils.unwrapObservable(r),r!==null&&r!==t)if(typeof r!="string"&&(r=r.toString()),i)i(n).html(r);else for(f=h.utils.parseHtmlFragment(r,n.ownerDocument),u=0;u<f.length;u++)n.appendChild(f[u])}}();h.exportSymbol("utils.parseHtmlFragment",h.utils.parseHtmlFragment);h.exportSymbol("utils.setHtml",h.utils.setHtml);h.memoization=function(){function i(){return((1+Math.random())*4294967296|0).toString(16).substring(1)}function u(){return i()+i()}function r(n,t){var i;if(n)if(n.nodeType==8)i=h.memoization.parseMemoText(n.nodeValue),i!=null&&t.push({domNode:n,memoId:i});else if(n.nodeType==1)for(var u=0,f=n.childNodes,e=f.length;u<e;u++)r(f[u],t)}var n={};return{memoize:function(t){if(typeof t!="function")throw new Error("You can only pass a function to ko.memoization.memoize()");var i=u();return n[i]=t,"<!--[ko_memo:"+i+"]-->"},unmemoize:function(i,r){var u=n[i];if(u===t)throw new Error("Couldn't find any memo with ID "+i+". Perhaps it's already been unmemoized.");try{return u.apply(null,r||[]),!0}finally{delete n[i]}},unmemoizeDomNodeAndDescendants:function(n,t){var f=[],u,o,i,e;for(r(n,f),u=0,o=f.length;u<o;u++)i=f[u].domNode,e=[i],t&&h.utils.arrayPushAll(e,t),h.memoization.unmemoize(f[u].memoId,e),i.nodeValue="",i.parentNode&&i.parentNode.removeChild(i)},parseMemoText:function(n){var t=n.match(/^\[ko_memo\:(.*?)\]$/);return t?t[1]:null}}}();h.exportSymbol("memoization",h.memoization);h.exportSymbol("memoization.memoize",h.memoization.memoize);h.exportSymbol("memoization.unmemoize",h.memoization.unmemoize);h.exportSymbol("memoization.parseMemoText",h.memoization.parseMemoText);h.exportSymbol("memoization.unmemoizeDomNodeAndDescendants",h.memoization.unmemoizeDomNodeAndDescendants);h.extenders={throttle:function(n,t){n.throttleEvaluation=t;var i=null;return h.dependentObservable({read:n,write:function(r){clearTimeout(i);i=setTimeout(function(){n(r)},t)}})},rateLimit:function(n,t){var i,r,u;typeof t=="number"?i=t:(i=t.timeout,r=t.method);u=r=="notifyWhenChangesStop"?rt:it;n.limit(function(n){return u(n,i)})},notify:function(n,t){n.equalityComparer=t=="always"?null:w}};tt={undefined:1,boolean:1,number:1,string:1};h.exportSymbol("extenders",h.extenders);h.subscription=function(n,t,i){this._target=n;this.callback=t;this.disposeCallback=i;this.isDisposed=!1;h.exportProperty(this,"dispose",this.dispose)};h.subscription.prototype.dispose=function(){this.isDisposed=!0;this.disposeCallback()};h.subscribable=function(){h.utils.setPrototypeOfOrExtend(this,h.subscribable.fn);this._subscriptions={};this._versionNumber=1};a="change";c={subscribe:function(n,t,i){var r=this,f,u;return i=i||a,f=t?n.bind(t):n,u=new h.subscription(r,f,function(){h.utils.arrayRemoveItem(r._subscriptions[i],u);r.afterSubscriptionRemove&&r.afterSubscriptionRemove(i)}),r.beforeSubscriptionAdd&&r.beforeSubscriptionAdd(i),r._subscriptions[i]||(r._subscriptions[i]=[]),r._subscriptions[i].push(u),u},notifySubscribers:function(n,t){if(t=t||a,t===a&&this.updateVersion(),this.hasSubscriptionsForEvent(t))try{h.dependencyDetection.begin();for(var u=this._subscriptions[t].slice(0),r=0,i;i=u[r];++r)i.isDisposed||i.callback(n)}finally{h.dependencyDetection.end()}},getVersion:function(){return this._versionNumber},hasChanged:function(n){return this.getVersion()!==n},updateVersion:function(){++this._versionNumber},limit:function(n){var t=this,o=h.isObservable(t),r,u,i,f="beforeChange",e;t._origNotifySubscribers||(t._origNotifySubscribers=t.notifySubscribers,t.notifySubscribers=function(n,i){i&&i!==a?i===f?t._rateLimitedBeforeChange(n):t._origNotifySubscribers(n,i):t._rateLimitedChange(n)});e=n(function(){o&&i===t&&(i=t());r=!1;t.isDifferent(u,i)&&t._origNotifySubscribers(u=i)});t._rateLimitedChange=function(n){r=!0;i=n;e()};t._rateLimitedBeforeChange=function(n){r||(u=n,t._origNotifySubscribers(n,f))}},hasSubscriptionsForEvent:function(n){return this._subscriptions[n]&&this._subscriptions[n].length},getSubscriptionsCount:function(n){if(n)return this._subscriptions[n]&&this._subscriptions[n].length||0;var t=0;return h.utils.objectForEach(this._subscriptions,function(n,i){t+=i.length}),t},isDifferent:function(n,t){return!this.equalityComparer||!this.equalityComparer(n,t)},extend:ut};h.exportProperty(c,"subscribe",c.subscribe);h.exportProperty(c,"extend",c.extend);h.exportProperty(c,"getSubscriptionsCount",c.getSubscriptionsCount);h.utils.canSetPrototype&&h.utils.setPrototypeOf(c,Function.prototype);h.subscribable.fn=c;h.isSubscribable=function(n){return n!=null&&typeof n.subscribe=="function"&&typeof n.notifySubscribers=="function"};h.exportSymbol("subscribable",h.subscribable);h.exportSymbol("isSubscribable",h.isSubscribable);h.computedContext=h.dependencyDetection=function(){function f(){return++u}function i(i){t.push(n);n=i}function r(){n=t.pop()}var t=[],n,u=0;return{begin:i,end:r,registerDependency:function(t){if(n){if(!h.isSubscribable(t))throw new Error("Only subscribable things can act as dependencies");n.callback(t,t._id||(t._id=f()))}},ignore:function(n,t,u){try{return i(),n.apply(t,u||[])}finally{r()}},getDependenciesCount:function(){if(n)return n.computed.getDependenciesCount()},isInitial:function(){if(n)return n.isInitial}}}();h.exportSymbol("computedContext",h.computedContext);h.exportSymbol("computedContext.getDependenciesCount",h.computedContext.getDependenciesCount);h.exportSymbol("computedContext.isInitial",h.computedContext.isInitial);h.exportSymbol("computedContext.isSleeping",h.computedContext.isSleeping);h.exportSymbol("ignoreDependencies",h.ignoreDependencies=h.dependencyDetection.ignore);h.observable=function(t){function i(){return arguments.length>0?(i.isDifferent(r,arguments[0])&&(i.valueWillMutate(),r=arguments[0],n&&(i._latestValue=r),i.valueHasMutated()),this):(h.dependencyDetection.registerDependency(i),r)}var r=t;return h.subscribable.call(i),h.utils.setPrototypeOfOrExtend(i,h.observable.fn),n&&(i._latestValue=r),i.peek=function(){return r},i.valueHasMutated=function(){i.notifySubscribers(r)},i.valueWillMutate=function(){i.notifySubscribers(r,"beforeChange")},h.exportProperty(i,"peek",i.peek),h.exportProperty(i,"valueHasMutated",i.valueHasMutated),h.exportProperty(i,"valueWillMutate",i.valueWillMutate),i};h.observable.fn={equalityComparer:w};l=h.observable.protoProperty="__ko_proto__";h.observable.fn[l]=h.observable;h.utils.canSetPrototype&&h.utils.setPrototypeOf(h.observable.fn,h.subscribable.fn);h.hasPrototype=function(n,i){return n===null||n===t||n[l]===t?!1:n[l]===i?!0:h.hasPrototype(n[l],i)};h.isObservable=function(n){return h.hasPrototype(n,h.observable)};h.isWriteableObservable=function(n){return typeof n=="function"&&n[l]===h.observable?!0:typeof n=="function"&&n[l]===h.dependentObservable&&n.hasWriteFunction?!0:!1};h.exportSymbol("observable",h.observable);h.exportSymbol("isObservable",h.isObservable);h.exportSymbol("isWriteableObservable",h.isWriteableObservable);h.exportSymbol("isWritableObservable",h.isWriteableObservable);h.observableArray=function(n){if(n=n||[],typeof n!="object"||!("length"in n))throw new Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");var t=h.observable(n);return h.utils.setPrototypeOfOrExtend(t,h.observableArray.fn),t.extend({trackArrayChanges:!0})};h.observableArray.fn={remove:function(n){for(var u,r=this.peek(),i=[],f=typeof n=="function"&&!h.isObservable(n)?n:function(t){return t===n},t=0;t<r.length;t++)u=r[t],f(u)&&(i.length===0&&this.valueWillMutate(),i.push(u),r.splice(t,1),t--);return i.length&&this.valueHasMutated(),i},removeAll:function(n){if(n===t){var i=this.peek(),r=i.slice(0);return this.valueWillMutate(),i.splice(0,i.length),this.valueHasMutated(),r}return n?this.remove(function(t){return h.utils.arrayIndexOf(n,t)>=0}):[]},destroy:function(n){var i=this.peek(),u=typeof n=="function"&&!h.isObservable(n)?n:function(t){return t===n},t,r;for(this.valueWillMutate(),t=i.length-1;t>=0;t--)r=i[t],u(r)&&(i[t]._destroy=!0);this.valueHasMutated()},destroyAll:function(n){return n===t?this.destroy(function(){return!0}):n?this.destroy(function(t){return h.utils.arrayIndexOf(n,t)>=0}):[]},indexOf:function(n){var t=this();return h.utils.arrayIndexOf(t,n)},replace:function(n,t){var i=this.indexOf(n);i>=0&&(this.valueWillMutate(),this.peek()[i]=t,this.valueHasMutated())}};h.utils.arrayForEach(["pop","push","reverse","shift","sort","splice","unshift"],function(n){h.observableArray.fn[n]=function(){var t=this.peek(),i;return this.valueWillMutate(),this.cacheDiffForKnownOperation(t,n,arguments),i=t[n].apply(t,arguments),this.valueHasMutated(),i}});h.utils.arrayForEach(["slice"],function(n){h.observableArray.fn[n]=function(){var t=this();return t[n].apply(t,arguments)}});h.utils.canSetPrototype&&h.utils.setPrototypeOf(h.observableArray.fn,h.observable.fn);h.exportSymbol("observableArray",h.observableArray);v="arrayChange";h.extenders.trackArrayChanges=function(n){function o(){var e,f;i||(i=!0,e=n.notifySubscribers,n.notifySubscribers=function(n,t){return t&&t!==a||++r,e.apply(this,arguments)},f=[].concat(n.peek()||[]),t=null,u=n.subscribe(function(i){if(i=[].concat(i||[]),n.hasSubscriptionsForEvent(v))var u=s(f,i);f=i;t=null;r=0;u&&u.length&&n.notifySubscribers(u,v)}))}function s(n,i){return(!t||r>1)&&(t=h.utils.compareArrays(n,i,{sparse:!0})),t}if(!n.cacheDiffForKnownOperation){var i=!1,t=null,u,r=0,f=n.beforeSubscriptionAdd,e=n.afterSubscriptionRemove;n.beforeSubscriptionAdd=function(t){f&&f.call(n,t);t===v&&o()};n.afterSubscriptionRemove=function(t){e&&e.call(n,t);t!==v||n.hasSubscriptionsForEvent(v)||(u.dispose(),i=!1)};n.cacheDiffForKnownOperation=function(n,u,f){function c(n,t,i){return l[l.length]={status:n,value:t,index:i}}var e,y;if(i&&!r){var l=[],o=n.length,a=f.length,s=0;switch(u){case"push":s=o;case"unshift":for(e=0;e<a;e++)c("added",f[e],s+e);break;case"pop":s=o-1;case"shift":o&&c("deleted",n[s],s);break;case"splice":var v=Math.min(Math.max(0,f[0]<0?o+f[0]:f[0]),o),p=a===1?o:Math.min(v+(f[1]||0),o),w=v+a-2,d=Math.max(p,w),b=[],k=[];for(e=v,y=2;e<d;++e,++y)e<p&&k.push(c("deleted",n[e],e)),e<w&&b.push(c("added",f[y],e));h.utils.findMovesInArrayComparison(k,b);break;default:return}t=l}}}};h.computed=h.dependentObservable=function(i,r,u){function ut(n,t,i){if(nt&&t===f)throw Error("A 'pure' computed must not be called recursively");e[n]=i;i._order=c++;i._version=t.getVersion()}function k(){var n,t;for(n in e)if(e.hasOwnProperty(n)&&(t=e[n],t._target.hasChanged(t._version)))return!0}function ft(){!o&&e&&h.utils.objectForEach(e,function(n,t){t.dispose&&t.dispose()});e=null;c=0;p=!0;l=!1;o=!1}function et(){var n=f.throttleEvaluation;n&&n>=0?(clearTimeout(ht),ht=setTimeout(function(){v(!0)},n)):f._evalRateLimited?f._evalRateLimited():v(!0)}function v(i){var y;if(!d&&!p){if(rt&&rt()){if(!g){w();return}}else g=!1;d=!0;try{var u=e,v=c,k=nt?t:!c;h.dependencyDetection.begin({callback:function(n,t){p||(v&&u[t]?(ut(t,n,u[t]),delete u[t],--v):e[t]||ut(t,n,o?{_target:n}:n.subscribe(et)))},computed:f,isInitial:k});e={};c=0;try{y=r?a.call(r):a()}finally{h.dependencyDetection.end();v&&!o&&h.utils.objectForEach(u,function(n,t){t.dispose&&t.dispose()});l=!1}f.isDifferent(s,y)&&(o||b(s,"beforeChange"),s=y,n&&(f._latestValue=s),o?f.updateVersion():i&&b(s));k&&b(s,"awake")}finally{d=!1}c||w()}}function f(){if(arguments.length>0){if(typeof tt=="function")tt.apply(r,arguments);else throw new Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return this}return h.dependencyDetection.registerDependency(f),(l||o&&k())&&v(),s}function ot(){return(l&&!c||o&&k())&&v(),s}function st(){return l||c>0}function b(n,t){f.notifySubscribers(n,t)}var s,l=!0,d=!1,g=!1,p=!1,a=i,nt=!1,o=!1,ct;if(a&&typeof a=="object"?(u=a,a=u.read):(u=u||{},a||(a=u.read)),typeof a!="function")throw new Error("Pass a function that returns the value of the ko.computed");var tt=u.write,y=u.disposeWhenNodeIsRemoved||u.disposeWhenNodeIsRemoved||null,it=u.disposeWhen||u.disposeWhen,rt=it,w=ft,e={},c=0,ht=null;return r||(r=u.owner),h.subscribable.call(f),h.utils.setPrototypeOfOrExtend(f,h.dependentObservable.fn),f.peek=ot,f.getDependenciesCount=function(){return c},f.hasWriteFunction=typeof tt=="function",f.dispose=function(){w()},f.isActive=st,ct=f.limit,f.limit=function(n){ct.call(f,n);f._evalRateLimited=function(){f._rateLimitedBeforeChange(s);l=!0;f._rateLimitedChange(f)}},u.pure?(nt=!0,o=!0,f.beforeSubscriptionAdd=function(n){if(!p&&o&&n=="change"){if(o=!1,l||k())e=null,c=0,l=!0,v();else{var t=[];h.utils.objectForEach(e,function(n,i){t[i._order]=n});h.utils.arrayForEach(t,function(n,t){var r=e[n],i=r._target.subscribe(et);i._order=t;i._version=r._version;e[n]=i})}p||b(s,"awake")}},f.afterSubscriptionRemove=function(n){p||n!="change"||f.hasSubscriptionsForEvent("change")||(h.utils.objectForEach(e,function(n,t){t.dispose&&(e[n]={_target:t._target,_order:t._order,_version:t._version},t.dispose())}),o=!0,b(t,"asleep"))},f._originalGetVersion=f.getVersion,f.getVersion=function(){return o&&(l||k())&&v(),f._originalGetVersion()}):u.deferEvaluation&&(f.beforeSubscriptionAdd=function(n){(n=="change"||n=="beforeChange")&&ot()}),h.exportProperty(f,"peek",f.peek),h.exportProperty(f,"dispose",f.dispose),h.exportProperty(f,"isActive",f.isActive),h.exportProperty(f,"getDependenciesCount",f.getDependenciesCount),y&&(g=!0,y.nodeType&&(rt=function(){return!h.utils.domNodeIsAttachedToDocument(y)||it&&it()})),o||u.deferEvaluation||v(),y&&st()&&y.nodeType&&(w=function(){h.utils.domNodeDisposal.removeDisposeCallback(y,w);ft()},h.utils.domNodeDisposal.addDisposeCallback(y,w)),f};h.isComputed=function(n){return h.hasPrototype(n,h.dependentObservable)};b=h.observable.protoProperty;h.dependentObservable[b]=h.observable;h.dependentObservable.fn={equalityComparer:w};h.dependentObservable.fn[b]=h.dependentObservable;h.utils.canSetPrototype&&h.utils.setPrototypeOf(h.dependentObservable.fn,h.subscribable.fn);h.exportSymbol("dependentObservable",h.dependentObservable);h.exportSymbol("computed",h.dependentObservable);h.exportSymbol("isComputed",h.isComputed);h.pureComputed=function(n,t){return typeof n=="function"?h.computed(n,t,{pure:!0}):(n=h.utils.extend({},n),n.pure=!0,h.computed(n,t))};h.exportSymbol("pureComputed",h.pureComputed),function(){function i(r,f,e){var s,o;return(e=e||new n,r=f(r),s=typeof r=="object"&&r!==null&&r!==t&&!(r instanceof Date)&&!(r instanceof String)&&!(r instanceof Number)&&!(r instanceof Boolean),!s)?r:(o=r instanceof Array?[]:{},e.save(r,o),u(r,function(n){var u=f(r[n]),s;switch(typeof u){case"boolean":case"number":case"string":case"function":o[n]=u;break;case"object":case"undefined":s=e.get(u);o[n]=s!==t?s:i(u,f,e)}}),o)}function u(n,t){var i,r;if(n instanceof Array){for(i=0;i<n.length;i++)t(i);typeof n.toJSON=="function"&&t("toJSON")}else for(r in n)t(r)}function n(){this.keys=[];this.values=[]}var r=10;h.toJS=function(n){if(arguments.length==0)throw new Error("When calling ko.toJS, pass the object you want to convert.");return i(n,function(n){for(var t=0;h.isObservable(n)&&t<r;t++)n=n();return n})};h.toJSON=function(n,t,i){var r=h.toJS(n);return h.utils.stringifyJson(r,t,i)};n.prototype={constructor:n,save:function(n,t){var i=h.utils.arrayIndexOf(this.keys,n);i>=0?this.values[i]=t:(this.keys.push(n),this.values.push(t))},get:function(n){var i=h.utils.arrayIndexOf(this.keys,n);return i>=0?this.values[i]:t}}}();h.exportSymbol("toJS",h.toJS);h.exportSymbol("toJSON",h.toJSON),function(){var n="__ko__hasDomDataOptionValue__";h.selectExtensions={readValue:function(i){switch(h.utils.tagNameLower(i)){case"option":return i[n]===!0?h.utils.domData.get(i,h.bindingHandlers.options.optionValueDomDataKey):h.utils.ieVersion<=7?i.getAttributeNode("value")&&i.getAttributeNode("value").specified?i.value:i.text:i.value;case"select":return i.selectedIndex>=0?h.selectExtensions.readValue(i.options[i.selectedIndex]):t;default:return i.value}},writeValue:function(i,r,u){var e,f,s,o;switch(h.utils.tagNameLower(i)){case"option":switch(typeof r){case"string":h.utils.domData.set(i,h.bindingHandlers.options.optionValueDomDataKey,t);n in i&&delete i[n];i.value=r;break;default:h.utils.domData.set(i,h.bindingHandlers.options.optionValueDomDataKey,r);i[n]=!0;i.value=typeof r=="number"?r:""}break;case"select":for((r===""||r===null)&&(r=t),e=-1,f=0,s=i.options.length;f<s;++f)if(o=h.selectExtensions.readValue(i.options[f]),o==r||o==""&&r===t){e=f;break}(u||e>=0||r===t&&i.size>1)&&(i.selectedIndex=e);break;default:(r===null||r===t)&&(r="");i.value=r}}}}();h.exportSymbol("selectExtensions",h.selectExtensions);h.exportSymbol("selectExtensions.readValue",h.selectExtensions.readValue);h.exportSymbol("selectExtensions.writeValue",h.selectExtensions.writeValue);h.expressionRewriting=function(){function e(n){if(h.utils.arrayIndexOf(u,n)>=0)return!1;var t=n.match(f);return t===null?!1:t[1]?"Object("+t[1]+")"+t[2]:n}function i(n){var r=h.utils.stringTrim(n),l,f,i,v;r.charCodeAt(0)===123&&(r=r.slice(1,-1));var y=[],o=r.match(t),e,u=[],a=0;if(o)for(o.push(","),l=0;f=o[l];++l){if(i=f.charCodeAt(0),i===44){if(a<=0){y.push(e&&u.length?{key:e,value:u.join("")}:{unknown:e||u.join("")});e=a=0;u=[];continue}}else if(i===58){if(!a&&!e&&u.length===1){e=u.pop();continue}}else i===47&&l&&f.length>1?(v=o[l-1].match(s),v&&!c[v[0]]&&(r=r.substr(r.indexOf(f)+1),o=r.match(t),o.push(","),l=-1,f="/")):i===40||i===123||i===91?++a:i===41||i===125||i===93?--a:e||u.length||i!==34&&i!==39||(f=f.slice(1,-1));u.push(f)}return y}function l(n,t){function u(n,t){function l(i){return i&&i.preprocess?t=i.preprocess(t,n,u):!0}var i;if(!c){if(!l(h.getBindingHandler(n)))return;r[n]&&(i=e(t))&&f.push("'"+n+"':function(_z){"+i+"=_z}")}s&&(t="function(){return "+t+" }");o.push("'"+n+"':"+t)}t=t||{};var o=[],f=[],s=t.valueAccessors,c=t.bindingParams,l=typeof n=="string"?i(n):n;return h.utils.arrayForEach(l,function(n){u(n.key||n.unknown,n.value)}),f.length&&u("_ko_property_writers","{"+f.join(",")+" }"),o.join(",")}var u=["true","false","null","undefined"],f=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,n=",\"'{}()/:[\\]",o="[^\\s:,/][^"+n+"]*[^\\s"+n+"]",t=RegExp("\"(?:[^\"\\\\]|\\\\.)*\"|'(?:[^'\\\\]|\\\\.)*'|/(?:[^/\\\\]|\\\\.)*/w*|"+o+"|[^\\s]","g"),s=/[\])"'A-Za-z0-9_$]+$/,c={"in":1,"return":1,"typeof":1},r={};return{bindingRewriteValidators:[],twoWayBindings:r,parseObjectLiteral:i,preProcessBindings:l,keyValueArrayContainsKey:function(n,t){for(var i=0;i<n.length;i++)if(n[i].key==t)return!0;return!1},writeValueToProperty:function(n,t,i,r,u){if(n&&h.isObservable(n))h.isWriteableObservable(n)&&(!u||n.peek()!==r)&&n(r);else{var f=t.get("_ko_property_writers");f&&f[i]&&f[i](r)}}}}();h.exportSymbol("expressionRewriting",h.expressionRewriting);h.exportSymbol("expressionRewriting.bindingRewriteValidators",h.expressionRewriting.bindingRewriteValidators);h.exportSymbol("expressionRewriting.parseObjectLiteral",h.expressionRewriting.parseObjectLiteral);h.exportSymbol("expressionRewriting.preProcessBindings",h.expressionRewriting.preProcessBindings);h.exportSymbol("expressionRewriting._twoWayBindings",h.expressionRewriting.twoWayBindings);h.exportSymbol("jsonExpressionRewriting",h.expressionRewriting);h.exportSymbol("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",h.expressionRewriting.preProcessBindings),function(){function n(n){return n.nodeType==8&&r.test(t?n.text:n.nodeValue)}function i(n){return n.nodeType==8&&o.test(t?n.text:n.nodeValue)}function f(t,r){for(var u=t,f=1,e=[];u=u.nextSibling;){if(i(u)&&(f--,f===0))return e;e.push(u);n(u)&&f++}if(!r)throw new Error("Cannot find closing comment tag to match: "+t.nodeValue);return null}function e(n,t){var i=f(n,t);return i?i.length>0?i[i.length-1].nextSibling:n.nextSibling:null}function c(t){var r=t.firstChild,u=null,f;if(r)do u?u.push(r):n(r)?(f=e(r,!0),f?r=f:u=[r]):i(r)&&(u=[r]);while(r=r.nextSibling);return u}var t=u&&u.createComment("test").text==="<!--test-->",r=t?/^<!--\s*ko(?:\s+([\s\S]+))?\s*-->$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,o=t?/^<!--\s*\/ko\s*-->$/:/^\s*\/ko\s*$/,s={ul:!0,ol:!0};h.virtualElements={allowedBindings:{},childNodes:function(t){return n(t)?f(t):t.childNodes},emptyNode:function(t){var r,i,u;if(n(t))for(r=h.virtualElements.childNodes(t),i=0,u=r.length;i<u;i++)h.removeNode(r[i]);else h.utils.emptyDomNode(t)},setDomNodeChildren:function(t,i){var u,r,f;if(n(t))for(h.virtualElements.emptyNode(t),u=t.nextSibling,r=0,f=i.length;r<f;r++)u.parentNode.insertBefore(i[r],u);else h.utils.setDomNodeChildren(t,i)},prepend:function(t,i){n(t)?t.parentNode.insertBefore(i,t.nextSibling):t.firstChild?t.insertBefore(i,t.firstChild):t.appendChild(i)},insertAfter:function(t,i,r){r?n(t)?t.parentNode.insertBefore(i,r.nextSibling):r.nextSibling?t.insertBefore(i,r.nextSibling):t.appendChild(i):h.virtualElements.prepend(t,i)},firstChild:function(t){return n(t)?!t.nextSibling||i(t.nextSibling)?null:t.nextSibling:t.firstChild},nextSibling:function(t){return(n(t)&&(t=e(t)),t.nextSibling&&i(t.nextSibling))?null:t.nextSibling},hasBindingValue:n,virtualNodeBindingValue:function(n){var i=(t?n.text:n.nodeValue).match(r);return i?i[1]:null},normaliseVirtualElementDomStructure:function(n){var t,i,u,r;if(s[h.utils.tagNameLower(n)]&&(t=n.firstChild,t))do if(t.nodeType===1&&(i=c(t),i))for(u=t.nextSibling,r=0;r<i.length;r++)u?n.insertBefore(i[r],u):n.appendChild(i[r]);while(t=t.nextSibling)}}}();h.exportSymbol("virtualElements",h.virtualElements);h.exportSymbol("virtualElements.allowedBindings",h.virtualElements.allowedBindings);h.exportSymbol("virtualElements.emptyNode",h.virtualElements.emptyNode);h.exportSymbol("virtualElements.insertAfter",h.virtualElements.insertAfter);h.exportSymbol("virtualElements.prepend",h.virtualElements.prepend);h.exportSymbol("virtualElements.setDomNodeChildren",h.virtualElements.setDomNodeChildren),function(){function t(n,t,r){var u=n+(r&&r.valueAccessors||"");return t[u]||(t[u]=i(n,r))}function i(n,t){var i=h.expressionRewriting.preProcessBindings(n,t),r="with($context){with($data||{}){return{"+i+"}}}";return new Function("$context","$element",r)}var n="data-bind";h.bindingProvider=function(){this.bindingCache={}};h.utils.extend(h.bindingProvider.prototype,{nodeHasBindings:function(t){switch(t.nodeType){case 1:return t.getAttribute(n)!=null||h.components.getComponentNameForNode(t);case 8:return h.virtualElements.hasBindingValue(t);default:return!1}},getBindings:function(n,t){var i=this.getBindingsString(n,t),r=i?this.parseBindingsString(i,t,n):null;return h.components.addBindingsForCustomElement(r,n,t,!1)},getBindingAccessors:function(n,t){var i=this.getBindingsString(n,t),r=i?this.parseBindingsString(i,t,n,{valueAccessors:!0}):null;return h.components.addBindingsForCustomElement(r,n,t,!0)},getBindingsString:function(t){switch(t.nodeType){case 1:return t.getAttribute(n);case 8:return h.virtualElements.virtualNodeBindingValue(t);default:return null}},parseBindingsString:function(n,i,r,u){try{var e=t(n,this.bindingCache,u);return e(i,r)}catch(f){f.message="Unable to parse bindings.\nBindings value: "+n+"\nMessage: "+f.message;throw f;}}});h.bindingProvider.instance=new h.bindingProvider}();h.exportSymbol("bindingProvider",h.bindingProvider),function(){function v(n){return function(){return n}}function u(n){return n()}function s(n){return h.utils.objectMap(h.dependencyDetection.ignore(n),function(t,i){return function(){return n()[i]}})}function y(n,t,i){return typeof n=="function"?s(n.bind(null,t,i)):h.utils.objectMap(n,v)}function p(n,t){return s(this.getBindings.bind(this,n,t))}function w(n){var t=h.virtualElements.allowedBindings[n];if(!t)throw new Error("The binding '"+n+"' cannot be used with virtual elements");}function c(n,t,i){var r,u=h.virtualElements.firstChild(t),f=h.bindingProvider.instance,e=f.preprocessNode;if(e){while(r=u)u=h.virtualElements.nextSibling(r),e.call(f,r);u=h.virtualElements.firstChild(t)}while(r=u)u=h.virtualElements.nextSibling(r),l(n,r,i)}function l(n,t,i){var u=!0,r=t.nodeType===1,f;r&&h.virtualElements.normaliseVirtualElementDomStructure(t);f=r&&i||h.bindingProvider.instance.nodeHasBindings(t);f&&(u=a(t,null,n,i).shouldBindDescendants);u&&!o[h.utils.tagNameLower(t)]&&c(n,t,!r)}function b(n){var i=[],r={},t=[];return h.utils.objectForEach(n,function u(f){if(!r[f]){var e=h.getBindingHandler(f);e&&(e.after&&(t.push(f),h.utils.arrayForEach(e.after,function(i){if(n[i])if(h.utils.arrayIndexOf(t,i)!==-1)throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+t.join(", "));else u(i)}),t.length--),i.push({key:f,handler:e}));r[f]=!0}}),i}function a(n,i,r,e){var a=h.utils.domData.get(n,f),o,c,l,y;if(!i){if(a)throw Error("You cannot apply bindings multiple times to the same element.");h.utils.domData.set(n,f,!0)}if(!a&&e&&h.storedBindingContextForNode(n,r),i&&typeof i!="function")o=i;else{var v=h.bindingProvider.instance,k=v.getBindingAccessors||p,s=h.dependentObservable(function(){return o=i?i(r,n):k.call(v,n,r),o&&r._subscribable&&r._subscribable(),o},null,{disposeWhenNodeIsRemoved:n});o&&s.isActive()||(s=null)}if(o){l=s?function(n){return function(){return u(s()[n])}}:function(n){return o[n]};function i(){return h.utils.objectMap(s?s():o,u)}i.get=function(n){return o[n]&&u(l(n))};i.has=function(n){return n in o};y=b(o);h.utils.arrayForEach(y,function(u){var s=u.handler.init,a=u.handler.update,f=u.key;n.nodeType===8&&w(f);try{typeof s=="function"&&h.dependencyDetection.ignore(function(){var u=s(n,l(f),i,r.$data,r);if(u&&u.controlsDescendantBindings){if(c!==t)throw new Error("Multiple bindings ("+c+" and "+f+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");c=f}});typeof a=="function"&&h.dependentObservable(function(){a(n,l(f),i,r.$data,r)},null,{disposeWhenNodeIsRemoved:n})}catch(e){e.message='Unable to process binding "'+f+": "+o[f]+'"\nMessage: '+e.message;throw e;}})}return{shouldBindDescendants:c===t}}function n(n){return n&&n instanceof h.bindingContext?n:new h.bindingContext(n)}var o,f,e;h.bindingHandlers={};o={script:!0,textarea:!0};h.getBindingHandler=function(n){return h.bindingHandlers[n]};h.bindingContext=function(n,i,r,u){function s(){var o=l?n():n,t=h.utils.unwrapObservable(o);return i?(i._subscribable&&i._subscribable(),h.utils.extend(f,i),e&&(f._subscribable=e)):(f.$parents=[],f.$root=t,f.ko=h),f.$rawData=o,f.$data=t,r&&(f[r]=t),u&&u(f,i,t),f.$data}function c(){return o&&!h.utils.anyDomNodeIsAttachedToDocument(o)}var f=this,l=typeof n=="function"&&!h.isObservable(n),o,e=h.dependentObservable(s,null,{disposeWhen:c,disposeWhenNodeIsRemoved:!0});e.isActive()&&(f._subscribable=e,e.equalityComparer=null,o=[],e._addNode=function(n){o.push(n);h.utils.domNodeDisposal.addDisposeCallback(n,function(n){h.utils.arrayRemoveItem(o,n);o.length||(e.dispose(),f._subscribable=e=t)})})};h.bindingContext.prototype.createChildContext=function(n,t,i){return new h.bindingContext(n,this,t,function(n,t){n.$parentContext=t;n.$parent=t.$data;n.$parents=(t.$parents||[]).slice(0);n.$parents.unshift(n.$parent);i&&i(n)})};h.bindingContext.prototype.extend=function(n){return new h.bindingContext(this._subscribable||this.$data,this,null,function(t,i){t.$rawData=i.$rawData;h.utils.extend(t,typeof n=="function"?n():n)})};f=h.utils.domData.nextKey();e=h.utils.domData.nextKey();h.storedBindingContextForNode=function(n,t){if(arguments.length==2)h.utils.domData.set(n,e,t),t._subscribable&&t._subscribable._addNode(n);else return h.utils.domData.get(n,e)};h.applyBindingAccessorsToNode=function(t,i,r){return t.nodeType===1&&h.virtualElements.normaliseVirtualElementDomStructure(t),a(t,i,n(r),!0)};h.applyBindingsToNode=function(t,i,r){var u=n(r);return h.applyBindingAccessorsToNode(t,y(i,u,t),u)};h.applyBindingsToDescendants=function(t,i){(i.nodeType===1||i.nodeType===8)&&c(n(t),i,!0)};h.applyBindings=function(t,u){if(!i&&r.jQuery&&(i=r.jQuery),u&&u.nodeType!==1&&u.nodeType!==8)throw new Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");u=u||r.document.body;l(n(t),u,!0)};h.contextFor=function(n){switch(n.nodeType){case 1:case 8:var i=h.storedBindingContextForNode(n);if(i)return i;if(n.parentNode)return h.contextFor(n.parentNode)}return t};h.dataFor=function(n){var i=h.contextFor(n);return i?i.$data:t};h.exportSymbol("bindingHandlers",h.bindingHandlers);h.exportSymbol("applyBindings",h.applyBindings);h.exportSymbol("applyBindingsToDescendants",h.applyBindingsToDescendants);h.exportSymbol("applyBindingAccessorsToNode",h.applyBindingAccessorsToNode);h.exportSymbol("applyBindingsToNode",h.applyBindingsToNode);h.exportSymbol("contextFor",h.contextFor);h.exportSymbol("dataFor",h.dataFor)}(),function(n){function u(t,i){return t.hasOwnProperty(i)?t[i]:n}function f(n,t){var f=u(i,n),o;f?f.subscribe(t):(f=i[n]=new h.subscribable,f.subscribe(t),e(n,function(t,u){var e=!!(u&&u.synchronous);r[n]={definition:t,isSynchronousComponent:e};delete i[n];o||e?f.notifySubscribers(t):setTimeout(function(){f.notifySubscribers(t)},0)}),o=!0)}function e(n,i){t("getConfig",[n],function(r){r?t("loadComponent",[n,r],function(n){i(n,r)}):i(null,null)})}function t(i,r,u,f){var e,o,s,c;if(f||(f=h.components.loaders.slice(0)),e=f.shift(),e)if(o=e[i],o){if(s=!1,c=o.apply(e,r.concat(function(n){s?u(null):n!==null?u(n):t(i,r,u,f)})),c!==n&&(s=!0,!e.suppressLoaderExceptions))throw new Error("Component loaders must supply values by invoking the callback, not by returning values synchronously.");}else t(i,r,u,f);else u(null)}var i={},r={};h.components={get:function(n,t){var i=u(r,n);i?i.isSynchronousComponent?h.dependencyDetection.ignore(function(){t(i.definition)}):setTimeout(function(){t(i.definition)},0):f(n,t)},clearCachedDefinition:function(n){delete r[n]},_getFirstResultFromLoaders:t};h.components.loaders=[];h.exportSymbol("components",h.components);h.exportSymbol("components.get",h.components.get);h.exportSymbol("components.clearCachedDefinition",h.components.clearCachedDefinition)}(),function(){function l(n,r,u,f){var o={},l=2,e=function(){--l==0&&f(o)},s=u.template,c=u.viewModel;s?i(r,s,function(t){h.components._getFirstResultFromLoaders("loadTemplate",[n,t],function(n){o.template=n;e()})}):e();c?i(r,c,function(i){h.components._getFirstResultFromLoaders("loadViewModel",[n,i],function(n){o[t]=n;e()})}):e()}function a(n,t,i){var r,f;typeof t=="string"?i(h.utils.parseHtmlFragment(t)):t instanceof Array?i(t):c(t)?i(h.utils.makeArray(t.childNodes)):t.element?(r=t.element,v(r)?i(o(r)):typeof r=="string"?(f=u.getElementById(r),f?i(o(f)):n("Cannot find element with ID "+r)):n("Unknown element type: "+r)):n("Unknown template value: "+t)}function e(n,i,r){if(typeof i=="function")r(function(n){return new i(n)});else if(typeof i[t]=="function")r(i[t]);else if("instance"in i){var u=i.instance;r(function(){return u})}else"viewModel"in i?e(n,i.viewModel,r):n("Unknown viewModel value: "+i)}function o(n){switch(h.utils.tagNameLower(n)){case"script":return h.utils.parseHtmlFragment(n.text);case"textarea":return h.utils.parseHtmlFragment(n.value);case"template":if(c(n.content))return h.utils.cloneNodes(n.content.childNodes)}return h.utils.cloneNodes(n.childNodes)}function v(n){return r.HTMLElement?n instanceof HTMLElement:n&&n.tagName&&n.nodeType===1}function c(n){return r.DocumentFragment?n instanceof DocumentFragment:n&&n.nodeType===11}function i(n,t,i){typeof t.require=="string"?s||r.require?(s||r.require)([t.require],i):n("Uses require, but no AMD loader is present"):i(t)}function f(n){return function(t){throw new Error("Component '"+n+"': "+t);}}var n={},t;h.components.register=function(t,i){if(!i)throw new Error("Invalid configuration for "+t);if(h.components.isRegistered(t))throw new Error("Component "+t+" is already registered");n[t]=i};h.components.isRegistered=function(t){return t in n};h.components.unregister=function(t){delete n[t];h.components.clearCachedDefinition(t)};h.components.defaultLoader={getConfig:function(t,i){var r=n.hasOwnProperty(t)?n[t]:null;i(r)},loadComponent:function(n,t,r){var u=f(n);i(u,t,function(t){l(n,u,t,r)})},loadTemplate:function(n,t,i){a(f(n),t,i)},loadViewModel:function(n,t,i){e(f(n),t,i)}};t="createViewModel";h.exportSymbol("components.register",h.components.register);h.exportSymbol("components.isRegistered",h.components.isRegistered);h.exportSymbol("components.unregister",h.components.unregister);h.exportSymbol("components.defaultLoader",h.components.defaultLoader);h.components.loaders.push(h.components.defaultLoader);h.components._allRegisteredComponents=n}(),function(){function t(t,i){var u=t.getAttribute("params");if(u){var e=n.parseBindingsString(u,i,t,{valueAccessors:!0,bindingParams:!0}),f=h.utils.objectMap(e,function(n){return h.computed(n,null,{disposeWhenNodeIsRemoved:t})}),r=h.utils.objectMap(f,function(n){var i=n.peek();return n.isActive()?h.computed({read:function(){return h.utils.unwrapObservable(n())},write:h.isWriteableObservable(i)&&function(t){n()(t)},disposeWhenNodeIsRemoved:t}):i});return r.hasOwnProperty("$raw")||(r.$raw=f),r}return{$raw:{}}}h.components.getComponentNameForNode=function(n){var t=h.utils.tagNameLower(n);return h.components.isRegistered(t)&&t};h.components.addBindingsForCustomElement=function(n,i,r,u){var f,e;if(i.nodeType===1&&(f=h.components.getComponentNameForNode(i),f)){if(n=n||{},n.component)throw new Error('Cannot use the "component" binding on a custom element matching a component');e={name:f,params:t(i,r)};n.component=u?function(){return e}:e}return n};var n=new h.bindingProvider;h.utils.ieVersion<9&&(h.components.register=function(n){return function(t){return u.createElement(t),n.apply(this,arguments)}}(h.components.register),u.createDocumentFragment=function(n){return function(){var t=n(),i=h.components._allRegisteredComponents;for(var r in i)i.hasOwnProperty(r)&&t.createElement(r);return t}}(u.createDocumentFragment))}(),function(n){function i(n,t,i){var r=t.template,u;if(!r)throw new Error("Component '"+n+"' has no template");u=h.utils.cloneNodes(r);h.virtualElements.setDomNodeChildren(i,u)}function r(n,t,i,r){var u=n.createViewModel;return u?u.call(n,r,{element:t,templateNodes:i}):r}var t=0;h.bindingHandlers.component={init:function(u,f,e,o,s){var c,l,a=function(){var n=c&&c.dispose;typeof n=="function"&&n.call(c);l=null},v=h.utils.makeArray(h.virtualElements.childNodes(u));return h.utils.domNodeDisposal.addDisposeCallback(u,a),h.computed(function(){var o=h.utils.unwrapObservable(f()),e,y,p;if(typeof o=="string"?e=o:(e=h.utils.unwrapObservable(o.name),y=h.utils.unwrapObservable(o.params)),!e)throw new Error("No component name specified");p=l=++t;h.components.get(e,function(t){if(l===p){if(a(),!t)throw new Error("Unknown component '"+e+"'");i(e,t,u);var f=r(t,u,v,y),o=s.createChildContext(f,n,function(n){n.$component=f;n.$componentTemplateNodes=v});c=f;h.applyBindingsToDescendants(o,u)}})},null,{disposeWhenNodeIsRemoved:u}),{controlsDescendantBindings:!0}}};h.virtualElements.allowedBindings.component=!0}();k={"class":"className","for":"htmlFor"};h.bindingHandlers.attr={update:function(n,i){var r=h.utils.unwrapObservable(i())||{};h.utils.objectForEach(r,function(i,r){r=h.utils.unwrapObservable(r);var u=r===!1||r===null||r===t;u&&n.removeAttribute(i);h.utils.ieVersion<=8&&i in k?(i=k[i],u?n.removeAttribute(i):n[i]=r):u||n.setAttribute(i,r.toString());i==="name"&&h.utils.setElementName(n,u?"":r.toString())})}},function(){h.bindingHandlers.checked={after:["value","attr"],init:function(n,i,r){function c(){var c=n.checked,t=a?u():c,o;h.computedContext.isInitial()||(!f||c)&&(o=h.dependencyDetection.ignore(i),e?s!==t?(c&&(h.utils.addOrRemoveItem(o,t,!0),h.utils.addOrRemoveItem(o,s,!1)),s=t):h.utils.addOrRemoveItem(o,t,c):h.expressionRewriting.writeValueToProperty(o,r,"checked",t,!0))}function l(){var t=h.utils.unwrapObservable(i());n.checked=e?h.utils.arrayIndexOf(t,u())>=0:o?t:u()===t}var u=h.pureComputed(function(){return r.has("checkedValue")?h.utils.unwrapObservable(r.get("checkedValue")):r.has("value")?h.utils.unwrapObservable(r.get("value")):n.value}),o=n.type=="checkbox",f=n.type=="radio";if(o||f){var e=o&&h.utils.unwrapObservable(i())instanceof Array,s=e?u():t,a=f||e;f&&!n.name&&h.bindingHandlers.uniqueName.init(n,function(){return!0});h.computed(c,null,{disposeWhenNodeIsRemoved:n});h.utils.registerEventHandler(n,"click",c);h.computed(l,null,{disposeWhenNodeIsRemoved:n})}}};h.expressionRewriting.twoWayBindings.checked=!0;h.bindingHandlers.checkedValue={update:function(n,t){n.value=h.utils.unwrapObservable(t())}}}();d="__ko__cssValue";h.bindingHandlers.css={update:function(n,t){var i=h.utils.unwrapObservable(t());i!==null&&typeof i=="object"?h.utils.objectForEach(i,function(t,i){i=h.utils.unwrapObservable(i);h.utils.toggleDomNodeCssClass(n,t,i)}):(i=String(i||""),h.utils.toggleDomNodeCssClass(n,n[d],!1),n[d]=i,h.utils.toggleDomNodeCssClass(n,i,!0))}};h.bindingHandlers.enable={update:function(n,t){var i=h.utils.unwrapObservable(t());i&&n.disabled?n.removeAttribute("disabled"):i||n.disabled||(n.disabled=!0)}};h.bindingHandlers.disable={update:function(n,t){h.bindingHandlers.enable.update(n,function(){return!h.utils.unwrapObservable(t())})}};h.bindingHandlers.event={init:function(n,t,i,r,u){var f=t()||{};h.utils.objectForEach(f,function(f){typeof f=="string"&&h.utils.registerEventHandler(n,f,function(n){var o,s=t()[f],e,c;if(s){try{e=h.utils.makeArray(arguments);r=u.$data;e.unshift(r);o=s.apply(r,e)}finally{o!==!0&&(n.preventDefault?n.preventDefault():n.returnValue=!1)}c=i.get(f+"Bubble")!==!1;c||(n.cancelBubble=!0,n.stopPropagation&&n.stopPropagation())}})})}};h.bindingHandlers.foreach={makeTemplateValueAccessor:function(n){return function(){var i=n(),t=h.utils.peekObservable(i);return!t||typeof t.length=="number"?{foreach:i,templateEngine:h.nativeTemplateEngine.instance}:(h.utils.unwrapObservable(i),{foreach:t.data,as:t.as,includeDestroyed:t.includeDestroyed,afterAdd:t.afterAdd,beforeRemove:t.beforeRemove,afterRender:t.afterRender,beforeMove:t.beforeMove,afterMove:t.afterMove,templateEngine:h.nativeTemplateEngine.instance})}},init:function(n,t){return h.bindingHandlers.template.init(n,h.bindingHandlers.foreach.makeTemplateValueAccessor(t))},update:function(n,t,i,r,u){return h.bindingHandlers.template.update(n,h.bindingHandlers.foreach.makeTemplateValueAccessor(t),i,r,u)}};h.expressionRewriting.bindingRewriteValidators.foreach=!1;h.virtualElements.allowedBindings.foreach=!0;y="__ko_hasfocusUpdating";g="__ko_hasfocusLastValue";h.bindingHandlers.hasfocus={init:function(n,t,i){var r=function(r){var u,f,e;if(n[y]=!0,u=n.ownerDocument,"activeElement"in u){try{f=u.activeElement}catch(o){f=u.body}r=f===n}e=t();h.expressionRewriting.writeValueToProperty(e,i,"hasfocus",r,!0);n[g]=r;n[y]=!1},u=r.bind(null,!0),f=r.bind(null,!1);h.utils.registerEventHandler(n,"focus",u);h.utils.registerEventHandler(n,"focusin",u);h.utils.registerEventHandler(n,"blur",f);h.utils.registerEventHandler(n,"focusout",f)},update:function(n,t){var i=!!h.utils.unwrapObservable(t());n[y]||n[g]===i||(i?n.focus():n.blur(),h.dependencyDetection.ignore(h.utils.triggerEvent,null,[n,i?"focusin":"focusout"]))}};h.expressionRewriting.twoWayBindings.hasfocus=!0;h.bindingHandlers.hasFocus=h.bindingHandlers.hasfocus;h.expressionRewriting.twoWayBindings.hasFocus=!0;h.bindingHandlers.html={init:function(){return{controlsDescendantBindings:!0}},update:function(n,t){h.utils.setHtml(n,t())}};nt("if");nt("ifnot",!1,!0);nt("with",!0,!1,function(n,t){return n.createChildContext(t)});p={};h.bindingHandlers.options={init:function(n){if(h.utils.tagNameLower(n)!=="select")throw new Error("options binding applies only to SELECT elements");while(n.length>0)n.remove(0);return{controlsDescendantBindings:!0}},update:function(n,i,r){function y(){return h.utils.arrayFilter(n.options,function(n){return n.selected})}function b(n,t,i){var r=typeof t;return r=="function"?t(n):r=="string"?n[t]:i}function nt(i,f,s){var c,l,a;return s.length&&(u=!e&&s[0].selected?[h.selectExtensions.readValue(s[0])]:[],o=!0),c=n.ownerDocument.createElement("option"),i===p?(h.utils.setTextContent(c,r.get("optionsCaption")),h.selectExtensions.writeValue(c,t)):(l=b(i,r.get("optionsValue"),i),h.selectExtensions.writeValue(c,h.utils.unwrapObservable(l)),a=b(i,r.get("optionsText"),l),h.utils.setTextContent(c,a)),[c]}function k(t,i){if(o&&e)h.selectExtensions.writeValue(n,h.utils.unwrapObservable(r.get("value")),!0);else if(u.length){var f=h.utils.arrayIndexOf(u,h.selectExtensions.readValue(i[0]))>=0;h.utils.setOptionNodeSelectionState(i[0],f);o&&!f&&h.dependencyDetection.ignore(h.utils.triggerEvent,null,[n,"change"])}}var d=n.length==0,s=n.multiple,c=!d&&s?n.scrollTop:null,f=h.utils.unwrapObservable(i()),e=r.get("valueAllowUnset")&&r.has("value"),g=r.get("optionsIncludeDestroyed"),w={},l,a,u=[],o,v;e||(s?u=h.utils.arrayMap(y(),h.selectExtensions.readValue):n.selectedIndex>=0&&u.push(h.selectExtensions.readValue(n.options[n.selectedIndex])));f&&(typeof f.length=="undefined"&&(f=[f]),a=h.utils.arrayFilter(f,function(n){return g||n===t||n===null||!h.utils.unwrapObservable(n._destroy)}),r.has("optionsCaption")&&(l=h.utils.unwrapObservable(r.get("optionsCaption")),l!==null&&l!==t&&a.unshift(p)));o=!1;w.beforeRemove=function(t){n.removeChild(t)};v=k;r.has("optionsAfterRender")&&typeof r.get("optionsAfterRender")=="function"&&(v=function(n,i){k(n,i);h.dependencyDetection.ignore(r.get("optionsAfterRender"),null,[i[0],n!==p?n:t])});h.utils.setDomNodeChildrenFromArrayMapping(n,a,nt,w,v);h.dependencyDetection.ignore(function(){if(e)h.selectExtensions.writeValue(n,h.utils.unwrapObservable(r.get("value")),!0);else{var t;t=s?u.length&&y().length<u.length:u.length&&n.selectedIndex>=0?h.selectExtensions.readValue(n.options[n.selectedIndex])!==u[0]:u.length||n.selectedIndex>=0;t&&h.utils.triggerEvent(n,"change")}});h.utils.ensureSelectElementIsRenderedCorrectly(n);c&&Math.abs(c-n.scrollTop)>20&&(n.scrollTop=c)}};h.bindingHandlers.options.optionValueDomDataKey=h.utils.domData.nextKey();h.bindingHandlers.selectedOptions={after:["options","foreach"],init:function(n,t,i){h.utils.registerEventHandler(n,"change",function(){var u=t(),r=[];h.utils.arrayForEach(n.getElementsByTagName("option"),function(n){n.selected&&r.push(h.selectExtensions.readValue(n))});h.expressionRewriting.writeValueToProperty(u,i,"selectedOptions",r)})},update:function(n,t){if(h.utils.tagNameLower(n)!="select")throw new Error("values binding applies only to SELECT elements");var i=h.utils.unwrapObservable(t());i&&typeof i.length=="number"&&h.utils.arrayForEach(n.getElementsByTagName("option"),function(n){var t=h.utils.arrayIndexOf(i,h.selectExtensions.readValue(n))>=0;h.utils.setOptionNodeSelectionState(n,t)})}};h.expressionRewriting.twoWayBindings.selectedOptions=!0;h.bindingHandlers.style={update:function(n,i){var r=h.utils.unwrapObservable(i()||{});h.utils.objectForEach(r,function(i,r){r=h.utils.unwrapObservable(r);(r===null||r===t||r===!1)&&(r="");n.style[i]=r})}};h.bindingHandlers.submit={init:function(n,t,i,r,u){if(typeof t()!="function")throw new Error("The value for a submit binding must be a function");h.utils.registerEventHandler(n,"submit",function(i){var r,f=t();try{r=f.call(u.$data,n)}finally{r!==!0&&(i.preventDefault?i.preventDefault():i.returnValue=!1)}})}};h.bindingHandlers.text={init:function(){return{controlsDescendantBindings:!0}},update:function(n,t){h.utils.setTextContent(n,t())}};h.virtualElements.allowedBindings.text=!0,function(){if(r&&r.navigator)var i=function(n){if(n)return parseFloat(n[1])},o=r.opera&&r.opera.version&&parseInt(r.opera.version()),u=r.navigator.userAgent,s=i(u.match(/^(?:(?!chrome).)*version\/([^ ]*) safari/i)),c=i(u.match(/Firefox\/([^ ]*)/));if(h.utils.ieVersion<10)var f=h.utils.domData.nextKey(),e=h.utils.domData.nextKey(),l=function(n){var t=this.activeElement,i=t&&h.utils.domData.get(t,e);i&&i(n)},a=function(n,t){var i=n.ownerDocument;h.utils.domData.get(i,f)||(h.utils.domData.set(i,f,!0),h.utils.registerEventHandler(i,"selectionchange",l));h.utils.domData.set(n,e,t)};h.bindingHandlers.textInput={init:function(i,r,u){var p=i.value,v,y,e=function(f){clearTimeout(v);y=v=t;var e=i.value;p!==e&&(n&&f&&(i._ko_textInputProcessedEvent=f.type),p=e,h.expressionRewriting.writeValueToProperty(r(),u,"textInput",e))},l=function(t){if(!v){y=i.value;var r=n?e.bind(i,{type:t.type}):e;v=setTimeout(r,4)}},w=function(){var n=h.utils.unwrapObservable(r());if((n===null||n===t)&&(n=""),y!==t&&n===y){setTimeout(w,4);return}i.value!==n&&(p=n,i.value=n)},f=function(n,t){h.utils.registerEventHandler(i,n,t)};n&&h.bindingHandlers.textInput._forceUpdateOn?h.utils.arrayForEach(h.bindingHandlers.textInput._forceUpdateOn,function(n){n.slice(0,5)=="after"?f(n.slice(5),l):f(n,e)}):h.utils.ieVersion<10?(f("propertychange",function(n){n.propertyName==="value"&&e(n)}),h.utils.ieVersion==8&&(f("keyup",e),f("keydown",e)),h.utils.ieVersion>=8&&(a(i,e),f("dragend",l))):(f("input",e),s<5&&h.utils.tagNameLower(i)==="textarea"?(f("keydown",l),f("paste",l),f("cut",l)):o<11?f("keydown",l):c<4&&(f("DOMAutoComplete",e),f("dragdrop",e),f("drop",e)));f("change",e);h.computed(w,null,{disposeWhenNodeIsRemoved:i})}};h.expressionRewriting.twoWayBindings.textInput=!0;h.bindingHandlers.textinput={preprocess:function(n,t,i){i("textInput",n)}}}();h.bindingHandlers.uniqueName={init:function(n,t){if(t()){var i="ko_unique_"+ ++h.bindingHandlers.uniqueName.currentIndex;h.utils.setElementName(n,i)}}};h.bindingHandlers.uniqueName.currentIndex=0;h.bindingHandlers.value={after:["options","foreach"],init:function(n,t,i){var o,c,s;if(n.tagName.toLowerCase()=="input"&&(n.type=="checkbox"||n.type=="radio")){h.applyBindingAccessorsToNode(n,{checkedValue:t});return}var r=["change"],u=i.get("valueUpdate"),f=!1,e=null;u&&(typeof u=="string"&&(u=[u]),h.utils.arrayPushAll(r,u),r=h.utils.arrayGetDistinctValues(r));o=function(){e=null;f=!1;var r=t(),u=h.selectExtensions.readValue(n);h.expressionRewriting.writeValueToProperty(r,i,"value",u)};c=h.utils.ieVersion&&n.tagName.toLowerCase()=="input"&&n.type=="text"&&n.autocomplete!="off"&&(!n.form||n.form.autocomplete!="off");c&&h.utils.arrayIndexOf(r,"propertychange")==-1&&(h.utils.registerEventHandler(n,"propertychange",function(){f=!0}),h.utils.registerEventHandler(n,"focus",function(){f=!1}),h.utils.registerEventHandler(n,"blur",function(){f&&o()}));h.utils.arrayForEach(r,function(t){var i=o;h.utils.stringStartsWith(t,"after")&&(i=function(){e=h.selectExtensions.readValue(n);setTimeout(o,0)},t=t.substring(5));h.utils.registerEventHandler(n,t,i)});s=function(){var r=h.utils.unwrapObservable(t()),c=h.selectExtensions.readValue(n),o,u,f;if(e!==null&&r===e){setTimeout(s,0);return}o=r!==c;o&&(h.utils.tagNameLower(n)==="select"?(u=i.get("valueAllowUnset"),f=function(){h.selectExtensions.writeValue(n,r,u)},f(),u||r===h.selectExtensions.readValue(n)?setTimeout(f,0):h.dependencyDetection.ignore(h.utils.triggerEvent,null,[n,"change"])):h.selectExtensions.writeValue(n,r))};h.computed(s,null,{disposeWhenNodeIsRemoved:n})},update:function(){}};h.expressionRewriting.twoWayBindings.value=!0;h.bindingHandlers.visible={update:function(n,t){var i=h.utils.unwrapObservable(t()),r=!(n.style.display=="none");i&&!r?n.style.display="":!i&&r&&(n.style.display="none")}};ft("click");h.templateEngine=function(){};h.templateEngine.prototype.renderTemplateSource=function(){throw new Error("Override renderTemplateSource");};h.templateEngine.prototype.createJavaScriptEvaluatorBlock=function(){throw new Error("Override createJavaScriptEvaluatorBlock");};h.templateEngine.prototype.makeTemplateSource=function(n,t){if(typeof n=="string"){t=t||u;var i=t.getElementById(n);if(!i)throw new Error("Cannot find template with ID "+n);return new h.templateSources.domElement(i)}if(n.nodeType==1||n.nodeType==8)return new h.templateSources.anonymousTemplate(n);throw new Error("Unknown template type: "+n);};h.templateEngine.prototype.renderTemplate=function(n,t,i,r){var u=this.makeTemplateSource(n,r);return this.renderTemplateSource(u,t,i,r)};h.templateEngine.prototype.isTemplateRewritten=function(n,t){return this.allowTemplateRewriting===!1?!0:this.makeTemplateSource(n,t).data("isRewritten")};h.templateEngine.prototype.rewriteTemplate=function(n,t,i){var r=this.makeTemplateSource(n,i),u=t(r.text());r.text(u);r.data("isRewritten",!0)};h.exportSymbol("templateEngine",h.templateEngine);h.templateRewriting=function(){function r(n){for(var i,r,u,f=h.expressionRewriting.bindingRewriteValidators,t=0;t<n.length;t++)if(i=n[t].key,f.hasOwnProperty(i))if(r=f[i],typeof r=="function"){if(u=r(n[t].value),u)throw new Error(u);}else if(!r)throw new Error("This template engine does not support the '"+i+"' binding within its templates");}function n(n,t,i,u){var f=h.expressionRewriting.parseObjectLiteral(n),e,o;return r(f),e=h.expressionRewriting.preProcessBindings(f,{valueAccessors:!0}),o="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+e+" } })()},'"+i.toLowerCase()+"')",u.createJavaScriptEvaluatorBlock(o)+t}var t=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'|[^>]*))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,i=/<!--\s*ko\b\s*([\s\S]*?)\s*-->/g;return{ensureTemplateIsRewritten:function(n,t,i){t.isTemplateRewritten(n,i)||t.rewriteTemplate(n,function(n){return h.templateRewriting.memoizeBindingAttributeSyntax(n,t)},i)},memoizeBindingAttributeSyntax:function(r,u){return r.replace(t,function(){return n(arguments[4],arguments[1],arguments[2],u)}).replace(i,function(){return n(arguments[1],"<!-- ko -->","#comment",u)})},applyMemoizedBindingsToNextSibling:function(n,t){return h.memoization.memoize(function(i,r){var u=i.nextSibling;u&&u.nodeName.toLowerCase()===t&&h.applyBindingAccessorsToNode(u,n,r)})}}}();h.exportSymbol("__tr_ambtns",h.templateRewriting.applyMemoizedBindingsToNextSibling),function(){var i,n;h.templateSources={};h.templateSources.domElement=function(n){this.domElement=n};h.templateSources.domElement.prototype.text=function(){var i=h.utils.tagNameLower(this.domElement),n=i==="script"?"text":i==="textarea"?"value":"innerHTML",t;if(arguments.length==0)return this.domElement[n];t=arguments[0];n==="innerHTML"?h.utils.setHtml(this.domElement,t):this.domElement[n]=t};i=h.utils.domData.nextKey()+"_";h.templateSources.domElement.prototype.data=function(n){if(arguments.length===1)return h.utils.domData.get(this.domElement,i+n);h.utils.domData.set(this.domElement,i+n,arguments[1])};n=h.utils.domData.nextKey();h.templateSources.anonymousTemplate=function(n){this.domElement=n};h.templateSources.anonymousTemplate.prototype=new h.templateSources.domElement;h.templateSources.anonymousTemplate.prototype.constructor=h.templateSources.anonymousTemplate;h.templateSources.anonymousTemplate.prototype.text=function(){var i,r;if(arguments.length==0)return i=h.utils.domData.get(this.domElement,n)||{},i.textData===t&&i.containerData&&(i.textData=i.containerData.innerHTML),i.textData;r=arguments[0];h.utils.domData.set(this.domElement,n,{textData:r})};h.templateSources.domElement.prototype.nodes=function(){var t,i;if(arguments.length==0)return t=h.utils.domData.get(this.domElement,n)||{},t.containerData;i=arguments[0];h.utils.domData.set(this.domElement,n,{containerData:i})};h.exportSymbol("templateSources",h.templateSources);h.exportSymbol("templateSources.domElement",h.templateSources.domElement);h.exportSymbol("templateSources.anonymousTemplate",h.templateSources.anonymousTemplate)}(),function(){function i(n,t,i){for(var u,r=n,f=h.virtualElements.nextSibling(t);r&&(u=r)!==f;)r=h.virtualElements.nextSibling(u),i(u,r)}function f(n,t){if(n.length){var r=n[0],u=n[n.length-1],f=r.parentNode,e=h.bindingProvider.instance,o=e.preprocessNode;if(o){if(i(r,u,function(n,t){var f=n.previousSibling,i=o.call(e,n);i&&(n===r&&(r=i[0]||t),n===u&&(u=i[i.length-1]||f))}),n.length=0,!r)return;r===u?n.push(r):(n.push(r,u),h.utils.fixUpContinuousNodeArray(n,f))}i(r,u,function(n){(n.nodeType===1||n.nodeType===8)&&h.applyBindings(t,n)});i(r,u,function(n){(n.nodeType===1||n.nodeType===8)&&h.memoization.unmemoizeDomNodeAndDescendants(n,[t])});h.utils.fixUpContinuousNodeArray(n,f)}}function r(n){return n.nodeType?n:n.length>0?n[0]:null}function e(t,i,u,e,o){var s,c;o=o||{};var v=t&&r(t),l=(v||u||{}).ownerDocument,a=o.templateEngine||n;if(h.templateRewriting.ensureTemplateIsRewritten(u,a,l),s=a.renderTemplate(u,e,o,l),typeof s.length!="number"||s.length>0&&typeof s[0].nodeType!="number")throw new Error("Template engine must return an array of DOM nodes");c=!1;switch(i){case"replaceChildren":h.virtualElements.setDomNodeChildren(t,s);c=!0;break;case"replaceNode":h.utils.replaceDomNodes(t,s);c=!0;break;case"ignoreTargetNode":break;default:throw new Error("Unknown renderMode: "+i);}return c&&(f(s,e),o.afterRender&&h.dependencyDetection.ignore(o.afterRender,null,[s,e.$data])),s}function o(n,t,i){return h.isObservable(n)?n():typeof n=="function"?n(t,i):n}function s(n,i){var r=h.utils.domData.get(n,u);r&&typeof r.dispose=="function"&&r.dispose();h.utils.domData.set(n,u,i&&i.isActive()?i:t)}var n,u;h.setTemplateEngine=function(i){if(i!=t&&!(i instanceof h.templateEngine))throw new Error("templateEngine must inherit from ko.templateEngine");n=i};h.renderTemplate=function(i,u,f,s,c){if(f=f||{},(f.templateEngine||n)==t)throw new Error("Set a template engine before calling renderTemplate");if(c=c||"replaceChildren",s){var l=r(s),a=function(){return!l||!h.utils.domNodeIsAttachedToDocument(l)},v=l&&c=="replaceNode"?l.parentNode:l;return h.dependentObservable(function(){var n=u&&u instanceof h.bindingContext?u:new h.bindingContext(h.utils.unwrapObservable(u)),t=o(i,n.$data,n),a=e(s,c,t,n,f);c=="replaceNode"&&(s=a,l=r(s))},null,{disposeWhen:a,disposeWhenNodeIsRemoved:v})}return h.memoization.memoize(function(n){h.renderTemplate(i,u,f,n,"replaceNode")})};h.renderTemplateForEach=function(n,i,r,u,s){var c,l=function(t,i){c=s.createChildContext(t,r.as,function(n){n.$index=i});var u=o(n,t,c);return e(null,"ignoreTargetNode",u,c,r)},a=function(n,t){f(t,c);r.afterRender&&r.afterRender(t,n);c=null};return h.dependentObservable(function(){var n=h.utils.unwrapObservable(i)||[],f;typeof n.length=="undefined"&&(n=[n]);f=h.utils.arrayFilter(n,function(n){return r.includeDestroyed||n===t||n===null||!h.utils.unwrapObservable(n._destroy)});h.dependencyDetection.ignore(h.utils.setDomNodeChildrenFromArrayMapping,null,[u,f,l,r,a])},null,{disposeWhenNodeIsRemoved:u})};u=h.utils.domData.nextKey();h.bindingHandlers.template={init:function(n,t){var i=h.utils.unwrapObservable(t()),u,f,r;if(typeof i=="string"||i.name)h.virtualElements.emptyNode(n);else if("nodes"in i){if(u=i.nodes||[],h.isObservable(u))throw new Error('The "nodes" option must be a plain, non-observable array.');r=h.utils.moveCleanedNodesToContainerElement(u);new h.templateSources.anonymousTemplate(n).nodes(r)}else f=h.virtualElements.childNodes(n),r=h.utils.moveCleanedNodesToContainerElement(f),new h.templateSources.anonymousTemplate(n).nodes(r);return{controlsDescendantBindings:!0}},update:function(n,t,i,r,u){var l=t(),a,f=h.utils.unwrapObservable(l),e=!0,c=null,o,v,y;typeof f=="string"?(o=l,f={}):(o=f.name,"if"in f&&(e=h.utils.unwrapObservable(f["if"])),e&&"ifnot"in f&&(e=!h.utils.unwrapObservable(f.ifnot)),a=h.utils.unwrapObservable(f.data));"foreach"in f?(v=e&&f.foreach||[],c=h.renderTemplateForEach(o||n,v,f,n,u)):e?(y="data"in f?u.createChildContext(a,f.as):u,c=h.renderTemplate(o||n,y,f,n)):h.virtualElements.emptyNode(n);s(n,c)}};h.expressionRewriting.bindingRewriteValidators.template=function(n){var t=h.expressionRewriting.parseObjectLiteral(n);return t.length==1&&t[0].unknown?null:h.expressionRewriting.keyValueArrayContainsKey(t,"name")?null:"This template engine does not support anonymous templates nested within its templates"};h.virtualElements.allowedBindings.template=!0}();h.exportSymbol("setTemplateEngine",h.setTemplateEngine);h.exportSymbol("renderTemplate",h.renderTemplate);h.utils.findMovesInArrayComparison=function(n,t,i){if(n.length&&t.length)for(var o,r,f,e,u=o=0;(!i||u<i)&&(f=n[o]);++o){for(r=0;e=t[r];++r)if(f.value===e.value){f.moved=e.index;e.moved=f.index;t.splice(r,1);u=r=0;break}u+=r}};h.utils.compareArrays=function(){function r(r,u,f){return f=typeof f=="boolean"?{dontLimitMoves:f}:f||{},r=r||[],u=u||[],r.length<=u.length?i(r,u,n,t,f):i(u,r,t,n,f)}function i(n,t,i,r,u){for(var p=Math.min,it=Math.max,l=[],c=n.length,f,a=t.length,rt=a-c||1,w=c+a+1,o,v,b,k,d,g,e=0;e<=c;e++)for(v=o,l.push(o=[]),b=p(a,e+rt),k=it(0,e-1),f=k;f<=b;f++)f?e?n[e-1]===t[f-1]?o[f]=v[f-1]:(d=v[f]||w,g=o[f-1]||w,o[f]=p(d,g)+1):o[f]=f+1:o[f]=e+1;var s=[],y,nt=[],tt=[];for(e=c,f=a;e||f;)y=l[e][f]-1,f&&y===l[e][f-1]?nt.push(s[s.length]={status:i,value:t[--f],index:f}):e&&y===l[e-1][f]?tt.push(s[s.length]={status:r,value:n[--e],index:e}):(--f,--e,u.sparse||s.push({status:"retained",value:t[f]}));return h.utils.findMovesInArrayComparison(nt,tt,c*10),s.reverse()}var n="added",t="deleted";return r}();h.exportSymbol("utils.compareArrays",h.utils.compareArrays),function(){function i(n,i,r,u,f){var e=[],o=h.dependentObservable(function(){var t=i(r,f,h.utils.fixUpContinuousNodeArray(e,n))||[];e.length>0&&(h.utils.replaceDomNodes(e,t),u&&h.dependencyDetection.ignore(u,null,[r,t,f]));e.length=0;h.utils.arrayPushAll(e,t)},null,{disposeWhenNodeIsRemoved:n,disposeWhen:function(){return!h.utils.anyDomNodeIsAttachedToDocument(e)}});return{mappedNodes:e,dependentObservable:o.isActive()?o:t}}var n=h.utils.domData.nextKey();h.utils.setDomNodeChildrenFromArrayMapping=function(r,u,f,e,o){function ft(n,t){s=w[t];d!==t&&(nt[n]=s);s.indexObservable(d++);h.utils.fixUpContinuousNodeArray(s.mappedNodes,r);b.push(s);a.push(s)}function v(n,t){if(n)for(var i=0,r=t.length;i<r;i++)t[i]&&h.utils.arrayForEach(t[i].mappedNodes,function(r){n(r,i,t[i].arrayEntry)})}var y,p,c,tt,et,l,it;u=u||[];e=e||{};var ot=h.utils.domData.get(r,n)===t,w=h.utils.domData.get(r,n)||[],st=h.utils.arrayMap(w,function(n){return n.arrayEntry}),ht=h.utils.compareArrays(st,u,e.dontLimitMoves),b=[],k=0,d=0,g=[],a=[],rt=[],nt=[],ut=[],s;for(c=0;y=ht[c];c++){p=y.moved;switch(y.status){case"deleted":p===t&&(s=w[k],s.dependentObservable&&s.dependentObservable.dispose(),g.push.apply(g,h.utils.fixUpContinuousNodeArray(s.mappedNodes,r)),e.beforeRemove&&(rt[c]=s,a.push(s)));k++;break;case"retained":ft(c,k++);break;case"added":p!==t?ft(c,p):(s={arrayEntry:y.value,indexObservable:h.observable(d++)},b.push(s),a.push(s),ot||(ut[c]=s))}}for(v(e.beforeMove,nt),h.utils.arrayForEach(g,e.beforeRemove?h.cleanNode:h.removeNode),c=0,tt=h.virtualElements.firstChild(r);s=a[c];c++){for(s.mappedNodes||h.utils.extend(s,i(r,f,s.arrayEntry,o,s.indexObservable)),it=0;l=s.mappedNodes[it];tt=l.nextSibling,et=l,it++)l!==tt&&h.virtualElements.insertAfter(r,l,et);!s.initialized&&o&&(o(s.arrayEntry,s.mappedNodes,s.indexObservable),s.initialized=!0)}v(e.beforeRemove,rt);v(e.afterMove,nt);v(e.afterAdd,ut);h.utils.domData.set(r,n,b)}}();h.exportSymbol("utils.setDomNodeChildrenFromArrayMapping",h.utils.setDomNodeChildrenFromArrayMapping);h.nativeTemplateEngine=function(){this.allowTemplateRewriting=!1};h.nativeTemplateEngine.prototype=new h.templateEngine;h.nativeTemplateEngine.prototype.constructor=h.nativeTemplateEngine;h.nativeTemplateEngine.prototype.renderTemplateSource=function(n,t,i,r){var e=!(h.utils.ieVersion<9),o=e?n.nodes:null,u=o?n.nodes():null,f;return u?h.utils.makeArray(u.cloneNode(!0).childNodes):(f=n.text(),h.utils.parseHtmlFragment(f,r))};h.nativeTemplateEngine.instance=new h.nativeTemplateEngine;h.setTemplateEngine(h.nativeTemplateEngine.instance);h.exportSymbol("nativeTemplateEngine",h.nativeTemplateEngine),function(){h.jqueryTmplTemplateEngine=function(){function t(){if(n<2)throw new Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");}function r(n,t,r){return i.tmpl(n,t,r)}var n=this.jQueryTmplVersion=function(){if(!i||!i.tmpl)return 0;try{if(i.tmpl.tag.tmpl.open.toString().indexOf("__")>=0)return 2}catch(n){}return 1}();this.renderTemplateSource=function(n,f,e,o){var s,h;o=o||u;e=e||{};t();s=n.data("precompiled");s||(h=n.text()||"",h="{{ko_with $item.koBindingContext}}"+h+"{{/ko_with}}",s=i.template(null,h),n.data("precompiled",s));var l=[f.$data],a=i.extend({koBindingContext:f},e.templateOptions),c=r(s,l,a);return c.appendTo(o.createElement("div")),i.fragments={},c};this.createJavaScriptEvaluatorBlock=function(n){return"{{ko_code ((function() { return "+n+" })()) }}"};this.addTemplate=function(n,t){u.write("<script type='text/html' id='"+n+"'>"+t+"<\/script>")};n>0&&(i.tmpl.tag.ko_code={open:"__.push($1 || '');"},i.tmpl.tag.ko_with={open:"with($1) {",close:"} "})};h.jqueryTmplTemplateEngine.prototype=new h.templateEngine;h.jqueryTmplTemplateEngine.prototype.constructor=h.jqueryTmplTemplateEngine;var n=new h.jqueryTmplTemplateEngine;n.jQueryTmplVersion>0&&h.setTemplateEngine(n);h.exportSymbol("jqueryTmplTemplateEngine",h.jqueryTmplTemplateEngine)}()})})()}();$(function(){ko.dirtyFlag=function(n,t){var i=function(){},r=ko.observable(ko.toJSON(n)),u=ko.observable(t);return i.isDirty=ko.dependentObservable(function(){return u()||r()!==ko.toJSON(n)}),i.reset=function(){r(ko.toJSON(n));u(!1)},i};ko.bindingHandlers.fadeVisible={init:function(n,t){var i=t();$(n).toggle(ko.unwrap(i))},update:function(n,t){var i=t();ko.unwrap(i)?$(n).fadeIn():$(n).fadeOut()}};ko.bindingHandlers.snkValue={init:function(n,t,i,r,u){var f=$(n);f.bind("vrc.synch",function(){var i=ko.utils.unwrapObservable(t()),r=f.val(),n;i!=r&&(n=t(),n(f.val()))});ko.bindingHandlers.value.init(n,t,i,r,u)},update:function(n,t,i,r,u){ko.bindingHandlers.value.update(n,t,i,r,u)}};ko.bindingHandlers.datetimeFormat={update:function(n,t){var r=ko.unwrap(t()),i=new Date(parseInt(r.substr(6)));return ko.bindingHandlers.html.update(n,function(){return'<time datetime="'+encodeURIComponent(i)+'">'+i.toLocaleDateString()+"<\/time>"})}};ko.bindingHandlers.uppercase={update:function(n,t){var i=ko.unwrap(t());return ko.bindingHandlers.html.update(n,function(){return i!=null?i.toUpperCase():i})}};ko.bindingHandlers.momentDate={update:function(n,t,i){var f=t();if(typeof f!="undefined"){var e=i(),r=ko.utils.unwrapObservable(f),o=e.format||"DD/MM/YYYY",u="-";r!==null&&r!==undefined&&(u=moment(r).format(o));$(n).is("input")===!0?$(n).val(u):$(n).text(u)}}};ko.bindingHandlers.intValue={init:function(n,t,i){var r=t(),u=ko.computed({read:r,write:function(n){typeof n!="undefined"&&n.length>0&&!isNaN(n)&&r(parseInt(n))}});ko.bindingHandlers.value.init(n,function(){return u},i)},update:ko.bindingHandlers.value.update};ko.bindingHandlers.chosen={init:function(n){$(n).addClass("chzn-select");$(n).chosen()},update:function(n){$(n).trigger("liszt:updated")}};ko.bindingHandlers.datePickerValue={init:function(n,t,i){var r=i().datepickerOptions||{};r.onSelect=function(){var i=t();i($(n).datepicker("getDate"))};$(n).datepicker(r);ko.utils.registerEventHandler(n,"change",function(){var i=t();$(n).datepicker("option","minDate")==null||$(n).datepicker("getDate")>=$(n).datepicker("option","minDate")?i($(n).datepicker("getDate")):(i(null),$(n).val(""))});ko.utils.domNodeDisposal.addDisposeCallback(n,function(){$(n).datepicker("destroy")})},update:function(n,t){var i=ko.utils.unwrapObservable(t());$(n).datepicker("setDate",i)}}});window.format=function(n,t){var f;if(!n||isNaN(+t))return t;var t=n.charAt(0)=="-"?-t:+t,h=t<0?t=-t:0,u=n.match(/[^\d\-\+#]/g),o=u&&u[u.length-1]||".",u=u&&u[1]&&u[0]||",",n=n.split(o),t=t.toFixed(n[1]&&n[1].length),t=+t+"",r=n[1]&&n[1].lastIndexOf("0"),i=t.split(".");if((!i[1]||i[1]&&i[1].length<=r)&&(t=(+t).toFixed(r+1)),r=n[0].split(u),n[0]=r.join(""),f=n[0]&&n[0].indexOf("0"),f>-1)for(;i[0].length<n[0].length-f;)i[0]="0"+i[0];else+i[0]==0&&(i[0]="");if(t=t.split("."),t[0]=i[0],i=r[1]&&r[r.length-1].length){for(var r=t[0],f="",c=r.length%i,e=0,s=r.length;e<s;e++)f+=r.charAt(e),!((e-c+1)%i)&&e<s-i&&(f+=u);t[0]=f}return t[1]=n[1]&&t[1]?o+t[1]:"",(h?"-":"")+t[0]+t[1]};ajaxManager=new function(){var n=this;return n.requests=[],{addRequest:function(t){n.requests.push(t)},removeRequest:function(t){$.inArray(t,n.requests)>-1&&n.requests.splice($.inArray(t,n.requests),1)},processRequest:function(){var t=this,i;n.requests.length?(i=n.requests[0].complete,n.requests[0].complete=function(){typeof i=="function"&&i();n.requests.shift();t.processRequest.apply(t,[])},$.ajax(n.requests[0])):t.tid=setTimeout(function(){t.processRequest.apply(t,[])},1e3)},clearAndStop:function(){n.requests=[];clearTimeout(this.tid)}}};ajaxManager.processRequest();String.format=function(){for(var i,t=arguments[0],n=0;n<arguments.length-1;n++)i=new RegExp("\\{"+n+"\\}","gm"),t=t.replace(i,arguments[n+1]);return t};String.prototype.endsWith=function(n){return this.substr(this.length-n.length)===n};String.prototype.startsWith=function(n){return this.substr(0,n.length)===n};var DateUtility=function(){var n,t,i;return i=/^\/Date\(-?\d+\)\/$/,n={GetPseudoJsonDate:function(n){if(typeof n=="string")return new Date(parseInt(n.substring(6)));throw new Error("GetPseudoJsonDate expects a string parameter.");},FixPseudoDates:function(n){if(typeof n=="object")t(n);else throw new Error("FixPseudoDates expects an object");}},t=function(r){for(var u in r)typeof r[u]=="string"&&r[u].match(i)?r[u]=n.GetPseudoJsonDate(r[u]):typeof r[u]=="object"&&t(r[u])},n}(),vErrorItems=null,PollECommerceSession=null,IdleSession=null;$(document).ready(function(){InitUtils();var n=document.getElementById("errorsAlerts");n&&n!=null&&(vErrorItems=ko.observableArray(),ko.applyBindings(vErrorItems,document.getElementById("errorsAlerts")));typeof Poll=="function"&&(PollECommerceSession=new Poll,PollECommerceSession.PollingUrl="/ECommerce/RenewSession",PollECommerceSession.Interval=24e4,PollECommerceSession.AjaxDataType=AjaxDataTypes.KnockoutToJson,PollECommerceSession.PrePollCallback=ECommercePollPreEventCallback);IdleSession=new function(){var n=this;n.IdleDuration=18e4;n.MessageDuration=12e4;n.IdleSessionMessageElementId="#IdleSessionMessage";n.IdleSessionWarningElementId="#IdleSessionWarning";n.IdleSessionExpiredElementId="#IdleSessionExpired";n.IdleSessionContinueButtonElementId="#lnkIdleSessionContinue";n.HasTriedCloseSession=!1;n.IdleTimer;n.MessageTimer;n.StartIdleTimer=function(){n.IdleTimer=window.setTimeout(n.IdleTimerExpireEvent,n.IdleDuration);$(document).bind("keydown",n.ResetIdleTimerHandler);$(document).bind("mousemove",n.ResetIdleTimerHandler)};n.StopIdleTimer=function(){$(document).unbind("keydown",n.ResetIdleTimerHandler);$(document).unbind("mousemove",n.ResetIdleTimerHandler);window.clearTimeout(n.IdleTimer)};n.ResetIdleTimer=function(){n.StopIdleTimer();n.StartIdleTimer()};n.ResetIdleTimerHandler=function(){n.ResetIdleTimer()};n.IdleTimerExpireEvent=function(){n.StopIdleTimer();n.StartMessageTimer();$.colorbox({closeButton:!1,escKey:!1,scrolling:!1,innerWidth:"600px",innerHeight:"160px",overlayClose:!1,transition:"none",opacity:.65,inline:!0,href:n.IdleSessionMessageElementId,onLoad:function(){$("#cboxClose").remove()}})};n.IdleSessionContinueClick=function(){n.StopMessageTimer();n.ResetIdleTimer();vFrmMgr.unBlockScreen()};n.IdleSessionResetClick=function(){n.StopMessageTimer();n.TryCloseSession(!0);vFrmMgr.unBlockScreen()};n.StopMessageTimer=function(){window.clearTimeout(n.MessageTimer)};n.StartMessageTimer=function(){n.MessageTimer=window.setTimeout(n.MessageTimerExpireEvent,n.MessageDuration)};n.MessageTimerExpireEvent=function(){n.StopMessageTimer();n.TryCloseSession(!1);$(n.IdleSessionWarningElementId).remove();$(n.IdleSessionExpiredElementId).show();$(n.IdleSessionContinueButtonElementId).remove()};n.TryCloseSession=function(t){n.HasTriedCloseSession==!1?(PollECommerceSession!=null&&PollECommerceSession.Stop(),t&&vFrmMgr.ajaxTryCloseBookingSessionSuccess.Bind(function(){vFrmMgr.resetForm()}),tryCloseBookingSession(!1),n.HasTriedCloseSession=!0):t==!0&&vFrmMgr.resetForm()}}});jQuery.validator&&jQuery.validator.unobtrusive&&(jQuery.validator.unobtrusive.adapters.addBool("checkEmail"),jQuery.validator.unobtrusive.adapters.addBool("checkbrochure"),jQuery.validator.unobtrusive.adapters.addBool("checkFriendEmail"),jQuery.validator.unobtrusive.adapters.addBool("mustbetrue")),function(){function n(n,t,i){return typeof i=="undefined"||+i==0?Math[n](t):(t=+t,i=+i,isNaN(t)||!(typeof i=="number"&&i%1==0))?NaN:(t=t.toString().split("e"),t=Math[n](+(t[0]+"e"+(t[1]?+t[1]-i:-i))),t=t.toString().split("e"),+(t[0]+"e"+(t[1]?+t[1]+i:i)))}Math.round10||(Math.round10=function(t,i){return n("round",t,i)});Math.floor10||(Math.floor10=function(t,i){return n("floor",t,i)});Math.ceil10||(Math.ceil10=function(t,i){return n("ceil",t,i)})}();vSiteInfoMgr=new function(){var n=this;n.SiteLocalization={Any:-1,US:0,AU:1,EU:2,UK:3,CA:4};n.SiteType={Tours:0,RiverCruises:1,TravelAgents:2,LandingPages:3,AURiverCruises:4,EURiverCruises:5,UKRiverCruises:6,TravelAgentsUK:7,OceanCruises:8,OceanCruisesAgents:9,PortalCruises:10,Expeditions:11};n.RSICurrencyCode={ATS:0,AUD:1,BEF:2,CAD:3,CHF:4,CNY:5,CZK:6,DEM:7,DKK:8,EEK:9,EGP:10,ESP:11,EUR:12,FIM:13,FRF:14,GBP:15,HKD:16,HUF:17,IEP:18,INR:19,ITL:20,JPY:21,LUF:22,LVL:23,NLG:24,NOK:25,NZD:26,PLZ:27,PTE:28,RO:29,RUB:30,SEK:31,SSK:32,UKH:33,USD:34};n.getDefaultCountry=function(t){var i="";switch(t){case n.SiteLocalization.US:i="US";break;case n.SiteLocalization.AU:i="AU";break;case n.SiteLocalization.UK:i="UK";break;case n.SiteLocalization.CA:i="CA"}return i};n.getDefaultCountryName=function(t){var i="";switch(t){case n.SiteLocalization.US:i="United States";break;case n.SiteLocalization.AU:i="Australia";break;case n.SiteLocalization.UK:i="United Kingdom";break;case n.SiteLocalization.CA:i="Canada"}return i};n.getDateFormat=function(t){var i="";switch(t){case n.SiteLocalization.US:i="mm/dd/yy";break;case n.SiteLocalization.AU:i="dd/mm/yy";break;case n.SiteLocalization.UK:i="dd/mm/yy";break;case n.SiteLocalization.CA:i="mm/dd/yy"}return i};n.getDateFormat2=function(t){var i="";switch(t){case n.SiteLocalization.US:i="mm/dd/yyyy";break;case n.SiteLocalization.AU:i="dd/mm/yyyy";break;case n.SiteLocalization.UK:i="dd/mm/yyyy";break;case n.SiteLocalization.CA:i="mm/dd/yyyy"}return i};n.getCurrency=function(t){var i="$";switch(t){case n.RSICurrencyCode.USD:i="$";break;case n.RSICurrencyCode.GBP:i="";break;case n.RSICurrencyCode.AUD:i="AU$"}return i};n.getSiteType=function(t){var i="";switch(t){case n.SiteType.OceanCruises:i="oceans";break;case n.SiteType.Expeditions:i="expeditions";break;case n.SiteType.PortalCruises:i="portal";break;default:i="rivers"}return i}};eventQuantitySelector=".event-quantity";Date.dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];Date.abbrDayNames=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];Date.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];Date.abbrMonthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];Date.firstDayOfWeek=1;Date.format="mm/dd/yyyy";Date.fullYearStart="20",function(){function n(n,t){Date.prototype[n]||(Date.prototype[n]=t)}Date.prototype.asString||(Date.prototype.asString=function(n){var i=n||Date.format;return i.split("yyyy").join(this.getFullYear()).split("yy").join((this.getFullYear()+"").substring(2)).split("mmmm").join(this.getMonthName(!1)).split("mmm").join(this.getMonthName(!0)).split("mm").join(t(this.getMonth()+1)).split("dd").join(t(this.getDate()))});n("isLeapYear",function(){var n=this.getFullYear();return n%4==0&&n%100!=0||n%400==0});n("isWeekend",function(){return this.getDay()==0||this.getDay()==6});n("isWeekDay",function(){return!this.isWeekend()});n("getDaysInMonth",function(){return[31,this.isLeapYear()?29:28,31,30,31,30,31,31,30,31,30,31][this.getMonth()]});n("getDayName",function(n){return n?Date.abbrDayNames[this.getDay()]:Date.dayNames[this.getDay()]});n("getMonthName",function(n){return n?Date.abbrMonthNames[this.getMonth()]:Date.monthNames[this.getMonth()]});n("getDayOfYear",function(){var n=new Date("1/1/"+this.getFullYear());return Math.floor((this.getTime()-n.getTime())/864e5)});n("getWeekOfYear",function(){return Math.ceil(this.getDayOfYear()/7)});n("setDayOfYear",function(n){return this.setMonth(0),this.setDate(n),this});n("addYears",function(n){return this.setFullYear(this.getFullYear()+n),this});n("addMonths",function(n){var t=this.getDate();return this.setMonth(this.getMonth()+n),t>this.getDate()&&this.addDays(-this.getDate()),this});n("addDays",function(n){return this.setDate(this.getDate()+n),this});n("addHours",function(n){return this.setHours(this.getHours()+n),this});n("addMinutes",function(n){return this.setMinutes(this.getMinutes()+n),this});n("addSeconds",function(n){return this.setSeconds(this.getSeconds()+n),this});n("zeroTime",function(){return this.setMilliseconds(0),this.setSeconds(0),this.setMinutes(0),this.setHours(0),this});Date.fromString=function(n){var f=Date.format,i=new Date("01/01/1977"),e=0,r=f.indexOf("mmmm"),o,t,u,s;if(r>-1){for(t=0;t<Date.monthNames.length;t++)if(o=n.substr(r,Date.monthNames[t].length),Date.monthNames[t]==o){e=Date.monthNames[t].length-4;break}i.setMonth(t)}else if(r=f.indexOf("mmm"),r>-1){for(o=n.substr(r,3),t=0;t<Date.abbrMonthNames.length;t++)if(Date.abbrMonthNames[t]==o)break;i.setMonth(t)}else i.setMonth(Number(n.substr(f.indexOf("mm"),2))-1);return(u=f.indexOf("yyyy"),u>-1?(r<u&&(u+=e),i.setFullYear(Number(n.substr(u,4)))):(r<u&&(u+=e),i.setFullYear(Number(Date.fullYearStart+n.substr(f.indexOf("yy"),2)))),s=f.indexOf("dd"),r<s&&(s+=e),i.setDate(Number(n.substr(s,2))),isNaN(i.getTime()))?!1:i};Date.fromFormattedString=function(n,t){var e=t,r=new Date("01/01/1977"),o=0,u=e.indexOf("mmmm"),s,i,f,h;if(u>-1){for(i=0;i<Date.monthNames.length;i++)if(s=n.substr(u,Date.monthNames[i].length),Date.monthNames[i]==s){o=Date.monthNames[i].length-4;break}r.setMonth(i)}else if(u=e.indexOf("mmm"),u>-1){for(s=n.substr(u,3),i=0;i<Date.abbrMonthNames.length;i++)if(Date.abbrMonthNames[i]==s)break;r.setMonth(i)}else r.setMonth(Number(n.substr(e.indexOf("mm"),2))-1);return(f=e.indexOf("yyyy"),f>-1?(u<f&&(f+=o),r.setFullYear(Number(n.substr(f,4)))):(u<f&&(f+=o),r.setFullYear(Number(Date.fullYearStart+n.substr(e.indexOf("yy"),2)))),h=e.indexOf("dd"),u<h&&(h+=o),r.setDate(Number(n.substr(h,2))),isNaN(r.getTime()))?!1:r};var t=function(n){var t="0"+n;return t.substring(t.length-2)};n("daysDiff",function(n){return(this-n)/864e5})}(),function(n,t){function o(n){return!!(""===n||n&&n.charCodeAt&&n.substr)}function u(n){return v?v(n):"[object Array]"===y.call(n)}function s(n){return"[object Object]"===y.call(n)}function h(n,t){var i,n=n||{},t=t||{};for(i in t)t.hasOwnProperty(i)&&null==n[i]&&(n[i]=t[i]);return n}function r(n,t,i){var u=[],r,f;if(!n)return u;if(a&&n.map===a)return n.map(t,i);for(r=0,f=n.length;r<f;r++)u[r]=t.call(i,n[r],r,n);return u}function f(n,t){return n=Math.round(Math.abs(n)),isNaN(n)?t:n}function l(n){var t=i.settings.currency.format;return"function"==typeof n&&(n=n()),o(n)&&n.match("%v")?{pos:n,neg:n.replace("-","").replace("%v","-%v"),zero:n}:!n||!n.pos||!n.pos.match("%v")?o(t)?i.settings.currency.format={pos:t,neg:t.replace("%v","-%v"),zero:t}:t:n}var i={version:"0.4.1",settings:{currency:{symbol:"$",format:"%s%v",decimal:".",thousand:",",precision:2,grouping:3},number:{precision:0,grouping:3,thousand:",",decimal:"."}}},a=Array.prototype.map,v=Array.isArray,y=Object.prototype.toString,e=i.unformat=i.parse=function(n,t){if(u(n))return r(n,function(n){return e(n,t)});if(n=n||0,"number"==typeof n)return n;var t=t||".",i=RegExp("[^0-9-"+t+"]",["g"]),i=parseFloat((""+n).replace(/\((.*)\)/,"-$1").replace(i,"").replace(t,"."));return isNaN(i)?0:i},p=i.toFixed=function(n,t){var t=f(t,i.settings.number.precision),r=Math.pow(10,t);return(Math.round(i.unformat(n)*r)/r).toFixed(t)},c=i.formatNumber=i.format=function(n,t,o,l){if(u(n))return r(n,function(n){return c(n,t,o,l)});var n=e(n),a=h(s(t)?t:{precision:t,thousand:o,decimal:l},i.settings.number),y=f(a.precision),b=0>n?"-":"",v=parseInt(p(Math.abs(n||0),y),10)+"",w=3<v.length?v.length%3:0;return b+(w?v.substr(0,w)+a.thousand:"")+v.substr(w).replace(/(\d{3})(?=\d)/g,"$1"+a.thousand)+(y?a.decimal+p(Math.abs(n),y).split(".")[1]:"")},w=i.formatMoney=function(n,t,o,a,v,y){if(u(n))return r(n,function(n){return w(n,t,o,a,v,y)});var n=e(n),p=h(s(t)?t:{symbol:t,precision:o,thousand:a,decimal:v,format:y},i.settings.currency),b=l(p.format);return(0<n?b.pos:0>n?b.neg:b.zero).replace("%s",p.symbol).replace("%v",c(Math.abs(n),f(p.precision),p.thousand,p.decimal))};i.formatColumn=function(n,t,a,v,y,p){if(!n)return[];var w=h(s(t)?t:{symbol:t,precision:a,thousand:v,decimal:y,format:p},i.settings.currency),b=l(w.format),d=b.pos.indexOf("%s")<b.pos.indexOf("%v")?!0:!1,k=0,n=r(n,function(n){return u(n)?i.formatColumn(n,w):(n=e(n),n=(0<n?b.pos:0>n?b.neg:b.zero).replace("%s",w.symbol).replace("%v",c(Math.abs(n),f(w.precision),w.thousand,w.decimal)),n.length>k&&(k=n.length),n)});return r(n,function(n){return o(n)&&n.length<k?d?n.replace(w.symbol,w.symbol+Array(k-n.length+1).join(" ")):Array(k-n.length+1).join(" ")+n:n})};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=i),exports.accounting=i):"function"==typeof define&&define.amd?define([],function(){return i}):(i.noConflict=function(r){return function(){return n.accounting=r,i.noConflict=t,i}}(n.accounting),n.accounting=i)}(this);$(document).ready(function(){formInit($("body"));$(window).resize(function(){$("label.take-space").each(function(){var n=$("input[id="+$(this).attr("for")+"]:not(:focus)");$(this).css("position")=="absolute"?n.val()==""?$(this).removeAttr("style"):$(this).css("display","none"):$(this).removeAttr("style")})})});tealium_handler=tealium_handler||{};tealium_handler.view=function(n){typeof utag!="undefined"&&utag.view(n);typeof adobeDataLayer!="undefined"&&(n.event="page_view",adobeDataLayer.push(n))};tealium_handler.link=function(n){typeof utag!="undefined"?utag.link(n)&&typeof adobeDataLayer=="object"&&adobeDataLayer.push(n):(console.log("utag is undefined"),console.log(n.page_name))};document.addEventListener("DOMContentLoaded",function(){typeof tlHelpers!="undefined"&&tlHelpers.init()});var tlHelpers={pattern:new RegExp("^tl-"),init:function(){tlHelpers.startCapturingClickEvents()},startCapturingClickEvents:function(){$(document.body).on("mousedown.tealium","a, button, input[button], input[submit], tr.dynamicDay, i.icon-camera-icon, i.icon-map-icon, .thumbnail-anchor>img",function(){var n=$(this),t;n!=null&&n.size()>0&&(t=tlHelpers.collectTlAttributes(n.get(0)),t.hasValues&&tlHelpers.sendAttribsObject(t.tealiumProps))});$(document.body).on("mousedown.tealium","form[tll-enabled='true']",function(){var n=$(this),t;(n.size()==0||n.prop("tagName")!="FORM")&&(n=n.closest("form"));n.size()>0&&n.attr("tll-enabled")=="true"&&(n.attr("tll-enabled","false").unbind("mousedown.tealium"),t=tlHelpers.collectTlAttributes(n.get(0)),t.hasValues&&(t.tealiumProps.event_name="form_interaction",tlHelpers.sendAttribsObject(t.tealiumProps)))});$(document.body).on("keydown.tealium",function(n){if(n.which==13){var t=tlHelpers.collectTlAttributes(n.target);t.hasValues&&tlHelpers.sendAttribsObject(t.tealiumProps)}})},collectTlAttributes:function(n){var i={hasValues:!1,tealiumProps:null},r,t,u,f;if(i.tealiumProps={},typeof n=="undefined"||n==null||typeof n.attributes=="undefined"||n.attributes==null)return i;for(r=0;r<n.attributes.length;r++)t=n.attributes[r],t.specified&&t.name.match(tlHelpers.pattern)&&typeof t.value!="undefined"&&t.value!=""&&(u=t.name.replace("tl-","").replace(/-/g,"_"),f=t.value,i.tealiumProps[u]=f,i.hasValues=!0);return i},sendAttribsObject:function(n){tealium.fireLinkEvent(n)}},ChatPageLoadedDateTime=null,tealium=function(){function v(t){n=t}function y(){return n}function p(){return ChatPageLoadedDateTime}function e(){return Date.parse($.cookies.get("chat_time_step_1"))}function w(n){$.cookies.set("chat_time_step_1",n)}function o(n){$.cookies.set("chat_time_step_2",n)}function s(n){$.cookies.set("chat_time_exit",n)}function b(n){$.cookies.set("chat_conid",n)}function k(){return $.cookies.get("chat_conid")}function f(n,t){if(n===null||t===null)return 0;var i=n-t;return i/=1e3,Math.round(i)}function h(){var i,t;if(r!="chatopen"){r="chatopen";window.console&&console.log("*** liveperson Fire Chat Window Open Event - ");try{typeof utag!="undefined"&&typeof utag_data!="undefined"&&(o(null),s(null),i=new Date,w(i),t=jQuery.extend({},n),t.event_name="chat_step_1",t.chat_page=utag_data.page_name,t.chat_time_steps_0_to_1=f(i,p()),utag.link(t)&&typeof adobeDataLayer=="object"&&adobeDataLayer.push(t))}catch(u){}try{typeof viking_utag_data!="undefined"&&typeof lpTag!="undefined"&&typeof window.lpTag.sdes!="undefined"&&typeof window.lpTag.sdes.push!="undefined"&&lpTag.sdes.push({type:"prodView",products:[{product:{name:viking_utag_data.site_code,category:typeof viking_utag_data.cruise_name!="undefined"?viking_utag_data.cruise_name:"",sku:typeof viking_utag_data.itinerary_name!="undefined"?viking_utag_data.itinerary_name:""}}]})}catch(u){}}}function c(t){var u,i;if(r!="startchat"){r="startchat";window.console&&console.log("*** liveperson Start Chat Event - "+t);try{typeof utag!="undefined"&&typeof utag_data!="undefined"&&(u=new Date,o(u),i=jQuery.extend({},n),i.event_name="chat_step_2",i.chat_page=utag_data.page_name,i.transaction_id=t,i.chat_time_steps_1_to_2=f(u,e()),utag.link(i)&&typeof adobeDataLayer=="object"&&adobeDataLayer.push(i))}catch(s){}}}function d(){var i,t;if(r!="chatclose"){r="chatclose";window.console&&console.log("*** liveperson Close Chat Event - ");try{typeof utag!="undefined"&&typeof utag_data!="undefined"&&(i=new Date,s(i),t=jQuery.extend({},n),t.event_name="chat_exit",t.chat_page=utag_data.page_name,t.chat_time_steps_2_to_exit=f(i,e()),utag.link(t)&&typeof adobeDataLayer=="object"&&adobeDataLayer.push(t))}catch(u){}}}function g(n){n!=null&&typeof n.conversationId!="undefined"&&n.conversationId!=k()&&(b(n.conversationId),c(n.conversationId))}function nt(n){n&&n.state&&n.state=="init"&&h()}function tt(t,i){window.console&&console.log("*** liveperson fireTileClick ");try{if(typeof utag!="undefined"&&typeof utag_data!="undefined"){var r=jQuery.extend({},n);r.event_name="tile_clicked";r.tile_click=t;r.tile_name=i;utag.link(r)&&typeof adobeDataLayer=="object"&&adobeDataLayer.push(r)}}catch(u){window.console&&console.log("*** liveperson fireTileClick - error - "+u)}}function it(n,t){tealium.fireLinkEvent({tealium_event:"link",event_name:t,link_type:n})}function rt(t,i){try{typeof utag!="undefined"&&utag.link({event_name:"cruise_view",events:"event9,event10",product_type:n.product_type,cruise_id:n.cruise_id,cruise_name:n.cruise_name,cruise_region:n.cruise_region,itinerary_id:t,itinerary_name:i,site_code:n.site_code,domain_country_code:n.domain_country_code,origin_country_code:n.origin_country_code,environment_code:n.environment_code,promotional:n.promotional,cruise_city_ids:n.cruise_city_ids});typeof adobeDataLayer!="undefined"&&adobeDataLayer.push({event:"cruise_view",events:"event9,event10",product_type:n.product_type,cruise_id:n.cruise_id,cruise_name:n.cruise_name,cruise_region:n.cruise_region,itinerary_id:t,itinerary_name:i,site_code:n.site_code,domain_country_code:n.domain_country_code,origin_country_code:n.origin_country_code,environment_code:n.environment_code,promotional:n.promotional,cruise_city_ids:n.cruise_city_ids})}catch(r){}}function ut(t,i,r,u){try{typeof utag!="undefined"&&utag.link({event_name:"form_fail",form_id:typeof t=="undefined"?n.form_id:t,form_name:typeof i=="undefined"?n.form_name:i,form_type:typeof r=="undefined"?n.form_type:r,link_type:typeof u=="undefined"?n.link_type:u,site_code:n.site_code,domain_country_code:n.domain_country_code,origin_country_code:n.origin_country_code,environment_code:n.environment_code,promotional:n.promotional});typeof adobeDataLayer!="undefined"&&adobeDataLayer.push({event:"form_fail",form_id:typeof t=="undefined"?n.form_id:t,form_name:typeof i=="undefined"?n.form_name:i,form_type:typeof r=="undefined"?n.form_type:r,link_type:typeof u=="undefined"?n.link_type:u,site_code:n.site_code,domain_country_code:n.domain_country_code,origin_country_code:n.origin_country_code,environment_code:n.environment_code,promotional:n.promotional})}catch(f){}}function ft(i,r,u,f,e,o){try{if(typeof utag!="undefined"){var s={event_name:"form_completion",events:"event6,event7",form_id:typeof i=="undefined"?n.form_id:i,form_name:typeof r=="undefined"?n.form_name:r,form_type:typeof u=="undefined"?n.form_type:u,link_type:typeof f=="undefined"?n.link_type:f};t(s);t(s,["cruise_id","cruise_name","cruise_start","itinerary_id","itinerary_name","ship_id","ship_name","voyage_id"]);e&&o&&l(s,o,e);s.form_name!==undefined&&s.form_name!==null&&s.form_name.length>0&&utag.link(s)&&typeof adobeDataLayer=="object"&&(s.event="form_completion")&&adobeDataLayer.push(s)}}catch(h){}}function et(i,r,u,f,e,o){try{if(typeof utag!="undefined"){var s={event_name:"form_interaction",form_id:typeof i=="undefined"?n.form_id:i,form_name:typeof r=="undefined"?n.form_name:r,form_type:typeof u=="undefined"?n.form_type:u,link_type:typeof f=="undefined"?n.link_type:f};t(s);t(s,["cruise_id","cruise_name","cruise_start","itinerary_id","itinerary_name","ship_id","ship_name","voyage_id"]);e&&o&&l(s,o,e);utag.link(s)&&typeof adobeDataLayer=="object"&&adobeDataLayer.push(s)}}catch(h){}}function ot(t,i,r,u,f){try{typeof utag!="undefined"&&utag.link({event_name:"form_completion",events:"event6,event7",form_id:typeof i=="undefined"?n.form_id:i,form_name:typeof r=="undefined"?n.form_name:r,form_type:typeof u=="undefined"?n.form_type:u,link_type:typeof f=="undefined"?n.link_type:f,site_code:n.site_code,domain_country_code:n.domain_country_code,origin_country_code:n.origin_country_code,environment_code:n.environment_code,promotional:n.promotional,cch_contact_id:[t]});typeof adobeDataLayer!="undefined"&&adobeDataLayer.push({event:"form_completion",events:"event6,event7",form_id:typeof i=="undefined"?n.form_id:i,form_name:typeof r=="undefined"?n.form_name:r,form_type:typeof u=="undefined"?n.form_type:u,link_type:typeof f=="undefined"?n.link_type:f,site_code:n.site_code,domain_country_code:n.domain_country_code,origin_country_code:n.origin_country_code,environment_code:n.environment_code,promotional:n.promotional,cch_contact_id:[t]})}catch(e){}}function st(i,r,u,f){try{if(typeof utag!="undefined"){var e={event_name:"form_view",events:"event4,event5",form_id:typeof i=="undefined"?n.form_id:i,form_name:typeof r=="undefined"?n.form_name:r,form_type:typeof u=="undefined"?n.form_type:u,link_type:typeof f=="undefined"?n.link_type:f};t(e);t(e,["cruise_id","cruise_name","cruise_start","itinerary_id","itinerary_name","ship_id","ship_name","voyage_id"]);utag.link(e)&&typeof adobeDataLayer=="object"&&adobeDataLayer.push(e)}}catch(o){}}function ht(t,i,r,u,f){try{typeof t!="undefined"&&(n.form_id=t);typeof i!="undefined"&&(n.form_name=i);typeof r!="undefined"&&(n.form_type=r);typeof u!="undefined"&&(n.link_type=u);typeof f!="undefined"&&f!=null&&f.size()>0&&(f.attr("tll-enabled","true"),typeof t!="undefined"&&f.attr("tl-form_id",t),typeof i!="undefined"&&f.attr("tl-form_name",i),typeof r!="undefined"&&f.attr("tl-form_type",r),typeof u!="undefined"&&f.attr("tl-link_type",u));typeof utag!="undefined"&&utag.link({event_name:"form_view",events:"event4,event5",form_id:n.form_id,form_name:n.form_name,form_type:n.form_type,link_type:n.link_type,site_code:n.site_code,domain_country_code:n.domain_country_code,origin_country_code:n.origin_country_code,environment_code:n.environment_code,promotional:n.promotional});typeof adobeDataLayer!="undefined"&&adobeDataLayer.push({event:"form_view",events:"event4,event5",form_id:n.form_id,form_name:n.form_name,form_type:n.form_type,link_type:n.link_type,site_code:n.site_code,domain_country_code:n.domain_country_code,origin_country_code:n.origin_country_code,environment_code:n.environment_code,promotional:n.promotional})}catch(e){}}function ct(t,i,r,u){try{typeof utag!="undefined"&&utag.link({event_name:"itinerary_view",events:"event11,event12",product_type:n.product_type,cruise_departing_city:r,cruise_departing_country:u,cruise_id:n.cruise_id,cruise_name:n.cruise_name,cruise_region:n.cruise_region,itinerary_id:t,itinerary_name:i,site_code:n.site_code,domain_country_code:n.domain_country_code,origin_country_code:n.origin_country_code,environment_code:n.environment_code,promotional:n.promotional});typeof adobeDataLayer!="undefined"&&adobeDataLayer.push({event:"itinerary_view",events:"event11,event12",product_type:n.product_type,cruise_departing_city:r,cruise_departing_country:u,cruise_id:n.cruise_id,cruise_name:n.cruise_name,cruise_region:n.cruise_region,itinerary_id:t,itinerary_name:i,site_code:n.site_code,domain_country_code:n.domain_country_code,origin_country_code:n.origin_country_code,environment_code:n.environment_code,promotional:n.promotional})}catch(f){}}function lt(n){try{typeof utag!="undefined"&&(t(n),utag.link(n)&&typeof adobeDataLayer=="object"&&adobeDataLayer.push(n))}catch(i){}}function t(t,i){if(typeof t!="undefined"&&t!=null&&typeof n!="undefined"&&n!=null&&((typeof i=="undefined"||i==null)&&(i=a),typeof i!="undefined"&&i!=null))for(var r=0;r<i.length;r++)viking.utilities.isUndefinedNullOrEmpty(t[i[r]])&&!viking.utilities.isUndefinedNullOrEmpty(n[i[r]])&&(t[i[r]]=n[i[r]])}function l(n,t,i){if(typeof n!="undefined"&&n!=null&&typeof i!="undefined"&&i!=null&&typeof t!="undefined"&&t!=null)for(var r=0;r<t.length;r++)viking.utilities.isUndefinedNullOrEmpty(n[t[r]])&&!viking.utilities.isUndefinedNullOrEmpty(i[t[r]])&&(n[t[r]]=i[t[r]])}function at(t,i,r,u){try{typeof utag!="undefined"&&utag.link({event_name:"pricing_view",events:"event15,event16",product_type:n.product_type,cruise_departing_city:r,cruise_departing_country:u,cruise_id:n.cruise_id,cruise_name:n.cruise_name,cruise_region:n.cruise_region,itinerary_id:t,itinerary_name:i,site_code:n.site_code,domain_country_code:n.domain_country_code,origin_country_code:n.origin_country_code,environment_code:n.environment_code,promotional:n.promotional});typeof adobeDataLayer!="undefined"&&adobeDataLayer.push({event:"pricing_view",events:"event15,event16",product_type:n.product_type,cruise_departing_city:r,cruise_departing_country:u,cruise_id:n.cruise_id,cruise_name:n.cruise_name,cruise_region:n.cruise_region,itinerary_id:t,itinerary_name:i,site_code:n.site_code,domain_country_code:n.domain_country_code,origin_country_code:n.origin_country_code,environment_code:n.environment_code,promotional:n.promotional})}catch(f){}}function vt(){try{typeof utag!="undefined"&&utag.view({domain_country_code:n.domain_country_code,origin_country_code:n.origin_country_code,environment_code:n.environment_code,page_id:n.page_id,page_type:n.page_type,product_line:n.product_line,site_code:n.site_code,promotional:n.promotional,require_explicit_consent:n.require_explicit_consent,promo_code_value:n.promo_code_value});typeof adobeDataLayer!="undefined"&&adobeDataLayer.push({event:"page_view",domain_country_code:n.domain_country_code,origin_country_code:n.origin_country_code,environment_code:n.environment_code,page_id:n.page_id,page_type:n.page_type,product_line:n.product_line,site_code:n.site_code,promotional:n.promotional,require_explicit_consent:n.require_explicit_consent,promo_code_value:n.promo_code_value})}catch(t){}}function yt(){try{typeof utag!="undefined"&&utag.link({event_name:"ship_view",events:"event17,event18",ship_id:n.ship_id,ship_name:n.ship_name,site_code:n.site_code,domain_country_code:n.domain_country_code,origin_country_code:n.origin_country_code,environment_code:n.environment_code,promotional:n.promotional});typeof adobeDataLayer!="undefined"&&adobeDataLayer.push({event:"ship_view",events:"event17,event18",ship_id:n.ship_id,ship_name:n.ship_name,site_code:n.site_code,domain_country_code:n.domain_country_code,origin_country_code:n.origin_country_code,environment_code:n.environment_code,promotional:n.promotional})}catch(t){}}function pt(t){try{var r=t.DepartureDateString.substring(0,4),u=t.DepartureDateString.substring(4,6),f=t.DepartureDateString.substring(6,8),i=r+u+f;typeof utag!="undefined"&&utag.link({event_name:"voyage_view",events:"event13,event14",product_type:n.product_type,cruise_start:t.DepartureDateString,cruise_end:t.ReturnDateString,cruise_direction:tealium.codify(t.cruiseDirection),cruise_from_price:t.lowestPrice.toString(),air_from_price:t.lowestAirPrice.toString(),cruise_id:n.cruise_id,cruise_name:n.cruise_name,cruise_region:n.cruise_region,itinerary_id:tealium.getItemId(t.itineraryTcm),itinerary_name:tealium.codify(t.itineraryName),voyage_id:t.PackageCode,voyage_name:n.cruise_name+":"+t.cruiseDirectionCode+":"+t.shipType+":"+i,site_code:n.site_code,domain_country_code:n.domain_country_code,origin_country_code:n.origin_country_code,environment_code:n.environment_code,promotional:n.promotional});typeof adobeDataLayer!="undefined"&&adobeDataLayer.push({event:"voyage_view",events:"event13,event14",product_type:n.product_type,cruise_start:t.DepartureDateString,cruise_end:t.ReturnDateString,cruise_direction:tealium.codify(t.cruiseDirection),cruise_from_price:t.lowestPrice.toString(),air_from_price:t.lowestAirPrice.toString(),cruise_id:n.cruise_id,cruise_name:n.cruise_name,cruise_region:n.cruise_region,itinerary_id:tealium.getItemId(t.itineraryTcm),itinerary_name:tealium.codify(t.itineraryName),voyage_id:t.PackageCode,voyage_name:n.cruise_name+":"+t.cruiseDirectionCode+":"+t.shipType+":"+i,site_code:n.site_code,domain_country_code:n.domain_country_code,origin_country_code:n.origin_country_code,environment_code:n.environment_code,promotional:n.promotional})}catch(e){}}function wt(t){try{if(typeof t!="string"||t==null||t.length<1||typeof n=="undefined"||n==null)return t;for(i=0;i<u.length;i++)viking.utilities.isUndefinedNullOrEmpty(n[u[i]])||(t=updateQueryStringParamForUrl(t,"tl-"&u[i],n[u[i]]))}catch(r){}return t}function bt(n){return typeof n=="undefined"?"":n==null?"":n.replace(/[^a-zA-Z0-9--\d\s]/gi,"").replace(/[^a-zA-Z0-9--\d]/gi,"_").replace("__","_").toLowerCase()}function kt(n){return typeof n=="undefined"?"":n==null?"":n.replace(/.*-/g,"")}var n,r="",a=["site_code","domain_country_code","environment_code","page_id","page_type","promotional","cruise_name","cruise_id","itinerary_id","itinerary_name","cruise_direction","ship_name","ship_id","ship_type","ship_category","cruise_city_ids","require_explicit_consent","origin_country_code","promo_code_value"],u=["form_name","form_type","form_id"];return{data:y,fireChatOpenEvent:h,fireStartChatEvent:c,fireChatCloseEvent:d,fireChatStateEvent:g,fireWindowStateEvent:nt,fireCruiseViewEvent:rt,fireFormCompletionEvent:ft,fireFormCompletionEventWithId:ot,fireFormInteractionEvent:et,fireFormViewEventGeneral:ht,fireFormViewEvent:st,fireFormErrorEvent:ut,fireItineraryViewEvent:ct,fireLinkEvent:lt,fireButtonClick:it,firePageView:vt,firePricingViewEvent:at,fireShipViewEvent:yt,fireVoyageViewEvent:pt,fireTileClick:tt,setData:v,codify:bt,getItemId:kt,appendFormParams:wt}}();$(document).ready(function(){ChatPageLoadedDateTime=new Date,function(n){var t=!1,i=setInterval(function(){var r,u,f,e,o;if(t){clearInterval(i);return}try{if(typeof utag!="undefined"&&!viking.utilities.isUndefinedOrNull(viking_utag_data)){n.setData(viking_utag_data);t=!0;typeof window.location.hash!="undefined"&&window.location.hash!=null;r=n.data();switch(r.page_type){case"landing_page":r.is_cruise_view&&n.fireCruiseViewEvent(r.itinerary_id,r.itinerary_name);r.is_itinerary_view&&n.fireItineraryViewEvent(r.itinerary_id,r.itinerary_name,r.cruise_departing_city,r.cruise_departing_country);r.is_pricing_view&&n.firePricingViewEvent(r.itinerary_id,r.itinerary_name,r.cruise_departing_city,r.cruise_departing_country);break;case"product_detail":if(viking.utilities.isUndefinedOrNull(r.itinerary_id)||(n.fireCruiseViewEvent(r.itinerary_id,r.itinerary_name),n.fireItineraryViewEvent(r.itinerary_id,r.itinerary_name,r.cruise_departing_city,r.cruise_departing_country)),typeof r.itineraries!="undefined"&&r.itineraries!==null)for(u=0;u<r.itineraries.length;u++)n.fireCruiseViewEvent(r.itineraries[u].itinerary_id,r.itineraries[u].itinerary_name),n.fireItineraryViewEvent(r.itineraries[u].itinerary_id,r.itineraries[u].itinerary_name,r.itineraries[u].cruise_departing_city,r.itineraries[u].cruise_departing_country),n.firePricingViewEvent(r.itineraries[u].itinerary_id,r.itineraries[u].itinerary_name,r.itineraries[u].cruise_departing_city,r.itineraries[u].cruise_departing_country);break;case"product_pricing":viking.utilities.isUndefinedOrNull(r.itinerary_id)||(n.fireCruiseViewEvent(r.itinerary_id,r.itinerary_name),n.firePricingViewEvent(r.itinerary_id,r.itinerary_name,r.cruise_departing_city,r.cruise_departing_country));break;case"product_resources":n.fireCruiseViewEvent(r.itinerary_id,r.itinerary_name);break;case"form_input":n.fireFormViewEvent();break;case"form_completion":f=getParameter("brochure_version_opt_in");f&&f!=null?(e={brochure_version_opt_in:decodeURIComponent(f),brochure_site_opt_in:null},o=["brochure_version_opt_in","brochure_site_opt_in"],tealium.fireFormCompletionEvent(undefined,undefined,undefined,undefined,e,o)):n.fireFormCompletionEvent();break;case"ship_detail":n.fireShipViewEvent()}$("body").trigger("tealium:loaded")}}catch(s){}},250)}(tealium);typeof lpTag!="undefined"&&typeof lpTag.events!="undefined"&&typeof lpTag.events.bind!="undefined"&&(lpTag.events.bind({eventName:"conversationInfo",appName:"lpUnifiedWindow",func:tealium.fireChatStateEvent,async:!0,triggerOnce:!1}),lpTag.events.bind({eventName:"OFFER_CLICK",appName:"LP_OFFERS",func:tealium.fireChatOpenEvent,async:!0,triggerOnce:!1}),lpTag.events.bind({eventName:"windowClosed",appName:"lpUnifiedWindow",func:tealium.fireChatCloseEvent,async:!0,triggerOnce:!1}),lpTag.events.bind({eventName:"state",appName:"lpUnifiedWindow",func:lpForceDesktopCheck,async:!0,triggerOnce:!1}))});try{window.vcInvocaDebounce=function(n,t,i){var r;return function(){var u=this,f=arguments,e=function(){r=null;i||n.apply(u,f)},o=i&&!r;clearTimeout(r);r=setTimeout(e,t);o&&n.apply(u,f)}};window.vcInvocaObserver=function(){var n=this;n.target=null;n.debounceDelay=600;n.observerReInitDelay=300;n.observerOptions={childList:!0,subtree:!0,attributes:!1};n.observer=new MutationObserver(function(t){var i=n.observerOptions.attributes?!0:!1;for(let r=0;r<t.length;r++){if(t[r].addedNodes&&t[r].addedNodes.length>0){n.debounceInvoca();break}if(i&&t[r].type=="attributes"){n.debounceInvoca();break}}});n.debounceInvoca=vcInvocaDebounce(function(){this.applyInvoca()},n.debounceDelay,!1);n.applyInvoca=function(){console&&console.log("***** Invoca Called *****");typeof Invoca!="undefined"&&typeof Invoca.PNAPI!="undefined"&&typeof Invoca.PNAPI.run!="undefined"&&(this.observer.disconnect(),Invoca.PNAPI.run(),window.setTimeout(function(){n.observer.observe(n.target,n.observerOptions)},n.observerReInitDelay))};n.init=function(t,i,r,u){t&&t!=null&&(n.target=t,i&&(n.debounceDelay=i),r&&(n.observerReInitDelay=r),u&&(n.observerOptions=u),n.observer.observe(n.target,n.observerOptions))}};$(document).ready(function(){window.setTimeout(function(){if(getParameter("modal")==null){var n=new vcInvocaObserver;n.init(document.getElementById("bsModal"),1e3,500,{childList:!1,subtree:!1,attributes:!0})}},500)})}catch(e){console&&console.log("***** Invoca Mutation script failed: "+e)}VTCMDisableBacking=!1;$(document).ready(function(){try{VTealiumConsentMangager.initLoad()}catch(n){}});window.cookieInitPreventFocus=function(){};window.cookieDisablePreventFocus=function(){};VTealiumConsentMangager=new function(){var n=this;n.ViewModel=function(){var n=this;n.enabled=!1;n.siteKey="";n.siteData=null;n.usersConsent=null;n.showBanner=ko.observable(!1);n.showBacking=ko.observable(!1);n.disableBacking=!1;n.prefencesAreSet=ko.observable(!1);n.consentState=null;n.cancel=function(){};n.save=function(){};n.toggleCategory=function(){};n.manage=function(){};n.globalAccept=function(){};n.refreshCategoryChoices=function(){}};n.viewModel=null;n.isInitializationComplete=!1;n.modalOpenEvent=null;n.waitModalDisplayedFlag=!1;n.initLoad=function(){n.viewModel=new n.ViewModel;return};n.launchModal=function(){return};n.closeModal=function(){return};n.onModalHidden=function(){return};n.checkGdprLoaded=function(){return!1};n.getSiteConsentData=function(){return};n.getSiteConsentDataError=function(){return};n.getSiteConsentDataSuccessLaunchModal=function(){return};n.displayModal=function(){return};n.getSiteConsentDataSuccess=function(){return};n.prefencesAreSet=function(){return!1};n.isCategoryEnabled=function(){return!0};n.setImageCtaCookie=function(n,t){$.cookies.set(n,t)}};VOneTrustConsentMangager=new function(){var n=this;n.isFunctionalCategoryEnabled=function(){return n.isCategoryEnabled("C0003")};n.isCategoryEnabled=function(n){return typeof OnetrustActiveGroups!="string"?!1:OnetrustActiveGroups.indexOf(n+",")>-1?!0:!1};n.onManagerLoad=function(){}};!function(n){"function"==typeof define&&define.amd?define(["jquery"],n):"object"==typeof module&&module.exports?module.exports=function(t,i){return void 0===i&&(i="undefined"!=typeof window?require("jquery"):require("jquery")(t)),n(i),i}:n(jQuery)}(function(n){var t=function(){function u(n,t){return d.call(n,t)}function l(n,t){var e,o,s,f,h,y,c,p,i,l,b,u=t&&t.split("/"),a=r.map,v=a&&a["*"]||{};if(n){for(h=(n=n.split("/")).length-1,r.nodeIdCompat&&w.test(n[h])&&(n[h]=n[h].replace(w,"")),"."===n[0].charAt(0)&&u&&(n=u.slice(0,u.length-1).concat(n)),i=0;i<n.length;i++)if("."===(b=n[i]))n.splice(i,1),--i;else if(".."===b){if(0===i||1===i&&".."===n[2]||".."===n[i-1])continue;0<i&&(n.splice(i-1,2),i-=2)}n=n.join("/")}if((u||v)&&a){for(i=(e=n.split("/")).length;0<i;--i){if(o=e.slice(0,i).join("/"),u)for(l=u.length;0<l;--l)if(s=(s=a[u.slice(0,l).join("/")])&&s[o]){f=s;y=i;break}if(f)break;!c&&v&&v[o]&&(c=v[o],p=i)}!f&&c&&(f=c,y=p);f&&(e.splice(0,y,f),n=e.join("/"))}return n}function nt(n,t){return function(){var i=g.call(arguments,0);return"string"!=typeof i[0]&&1===i.length&&i.push(null),o.apply(f,i.concat([n,t]))}}function it(n){return function(t){i[n]=t}}function a(n){if(u(e,n)){var t=e[n];delete e[n];c[n]=!0;h.apply(f,t)}if(!u(i,n)&&!u(c,n))throw new Error("No "+n);return i[n]}function b(n){var i,t=n?n.indexOf("!"):-1;return-1<t&&(i=n.substring(0,t),n=n.substring(t+1,n.length)),[i,n]}function tt(n){return n?b(n):[]}var t,v,y,k,f,h,o,p,s,i,e,r,c,d,g,w;return n&&n.fn&&n.fn.select2&&n.fn.select2.amd&&(t=n.fn.select2.amd),t&&t.requirejs||(t?y=t:t={},i={},e={},r={},c={},d=Object.prototype.hasOwnProperty,g=[].slice,w=/\.js$/,p=function(n,t){var r,e,u=b(n),i=u[0],f=t[1];return n=u[1],i&&(r=a(i=l(i,f))),i?n=r&&r.normalize?r.normalize(n,(e=f,function(n){return l(n,e)})):l(n,f):(i=(u=b(n=l(n,f)))[0],n=u[1],i&&(r=a(i))),{f:i?i+"!"+n:n,n:n,pr:i,p:r}},s={require:function(n){return nt(n)},exports:function(n){var t=i[n];return void 0!==t?t:i[n]={}},module:function(n){return{id:n,uri:"",exports:i[n],config:(t=n,function(){return r&&r.config&&r.config[t]||{}})};var t}},h=function(n,t,r,o){var y,h,b,w,l,k,d,v=[],g=typeof r;if(k=tt(o=o||n),"undefined"==g||"function"==g){for(t=!t.length&&r.length?["require","exports","module"]:t,l=0;l<t.length;l+=1)if("require"===(h=(w=p(t[l],k)).f))v[l]=s.require(n);else if("exports"===h)v[l]=s.exports(n),d=!0;else if("module"===h)y=v[l]=s.module(n);else if(u(i,h)||u(e,h)||u(c,h))v[l]=a(h);else{if(!w.p)throw new Error(n+" missing "+h);w.p.load(w.n,nt(o,!0),it(h),{});v[l]=i[h]}b=r?r.apply(i[n],v):void 0;n&&(y&&y.exports!==f&&y.exports!==i[n]?i[n]=y.exports:b===f&&d||(i[n]=b))}else n&&(i[n]=r)},v=y=o=function(n,t,i,u,e){if("string"==typeof n)return s[n]?s[n](t):a(p(n,tt(t)).f);if(!n.splice){if((r=n).deps&&o(r.deps,r.callback),!t)return;t.splice?(n=t,t=i,i=null):n=f}return t=t||function(){},"function"==typeof i&&(i=u,u=e),u?h(f,n,t,i):setTimeout(function(){h(f,n,t,i)},4),o},o.config=function(n){return o(n)},v._defined=i,(k=function(n,t,r){if("string"!=typeof n)throw new Error("See almond README: incorrect module build, no module name");t.splice||(r=t,t=[]);u(i,n)||u(e,n)||(e[n]=[n,t,r])}).amd={jQuery:!0},t.requirejs=v,t.require=y,t.define=k),t.define("almond",function(){}),t.define("jquery",[],function(){var t=n||$;return null==t&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),t}),t.define("select2/utils",["jquery"],function(n){function r(n){var i=n.prototype,r=[];for(var t in i)"function"==typeof i[t]&&"constructor"!==t&&r.push(t);return r}function i(){this.listeners={}}var t={},u;return t.Extend=function(n,t){function r(){this.constructor=n}var u={}.hasOwnProperty;for(var i in t)u.call(t,i)&&(n[i]=t[i]);return r.prototype=t.prototype,n.prototype=new r,n.__super__=t.prototype,n},t.Decorate=function(n,t){function i(){var r=Array.prototype.unshift,u=t.prototype.constructor.length,i=n.prototype.constructor;0<u&&(r.call(arguments,n.prototype.constructor),i=t.prototype.constructor);i.apply(this,arguments)}function c(n){var r=function(){},u;return n in i.prototype&&(r=i.prototype[n]),u=t.prototype[n],function(){return Array.prototype.unshift.call(arguments,r),u.apply(this,arguments)}}var s=r(t),h=r(n),u,e,f,o;for(t.displayName=n.displayName,i.prototype=new function(){this.constructor=i},u=0;u<h.length;u++)e=h[u],i.prototype[e]=n.prototype[e];for(f=0;f<s.length;f++)o=s[f],i.prototype[o]=c(o);return i},i.prototype.on=function(n,t){this.listeners=this.listeners||{};n in this.listeners?this.listeners[n].push(t):this.listeners[n]=[t]},i.prototype.trigger=function(n){var i=Array.prototype.slice,t=i.call(arguments,1);this.listeners=this.listeners||{};null==t&&(t=[]);0===t.length&&t.push({});(t[0]._type=n)in this.listeners&&this.invoke(this.listeners[n],i.call(arguments,1));"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},i.prototype.invoke=function(n,t){for(var i=0,r=n.length;i<r;i++)n[i].apply(this,t)},t.Observable=i,t.generateChars=function(n){for(var t="",i=0;i<n;i++)t+=Math.floor(36*Math.random()).toString(36);return t},t.bind=function(n,t){return function(){n.apply(t,arguments)}},t._convertData=function(n){var f,r,i,u,t;for(f in n)if(r=f.split("-"),i=n,1!==r.length){for(u=0;u<r.length;u++)t=r[u],(t=t.substring(0,1).toLowerCase()+t.substring(1))in i||(i[t]={}),u==r.length-1&&(i[t]=n[f]),i=i[t];delete n[f]}return n},t.hasScroll=function(t,i){var u=n(i),f=i.style.overflowX,r=i.style.overflowY;return(f!==r||"hidden"!==r&&"visible"!==r)&&("scroll"===f||"scroll"===r||u.innerHeight()<i.scrollHeight||u.innerWidth()<i.scrollWidth)},t.escapeMarkup=function(n){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof n?n:String(n).replace(/[&<>"'\/\\]/g,function(n){return t[n]})},t.__cache={},u=0,t.GetUniqueElementId=function(n){var i=n.getAttribute("data-select2-id");return null!=i||(i=n.id?"select2-data-"+n.id:"select2-data-"+(++u).toString()+"-"+t.generateChars(4),n.setAttribute("data-select2-id",i)),i},t.StoreData=function(n,i,r){var u=t.GetUniqueElementId(n);t.__cache[u]||(t.__cache[u]={});t.__cache[u][i]=r},t.GetData=function(i,r){var u=t.GetUniqueElementId(i);return r?t.__cache[u]&&null!=t.__cache[u][r]?t.__cache[u][r]:n(i).data(r):t.__cache[u]},t.RemoveData=function(n){var i=t.GetUniqueElementId(n);null!=t.__cache[i]&&delete t.__cache[i];n.removeAttribute("data-select2-id")},t.copyNonInternalCssClasses=function(n,t){var r=n.getAttribute("class").trim().split(/\s+/),i,u;r=r.filter(function(n){return 0===n.indexOf("select2-")});i=t.getAttribute("class").trim().split(/\s+/);i=i.filter(function(n){return 0!==n.indexOf("select2-")});u=r.concat(i);n.setAttribute("class",u.join(" "))},t}),t.define("select2/results",["jquery","./utils"],function(n,t){function i(n,t,r){this.$element=n;this.data=r;this.options=t;i.__super__.constructor.call(this)}return t.Extend(i,t.Observable),i.prototype.render=function(){var t=n('<ul class="select2-results__options" role="listbox"><\/ul>');return this.options.get("multiple")&&t.attr("aria-multiselectable","true"),this.$results=t},i.prototype.clear=function(){this.$results.empty()},i.prototype.displayMessage=function(t){var u=this.options.get("escapeMarkup"),i,r;this.clear();this.hideLoading();i=n('<li role="alert" aria-live="assertive" class="select2-results__option"><\/li>');r=this.options.get("translations").get(t.message);i.append(u(r(t.args)));i[0].className+=" select2-results__message";this.$results.append(i)},i.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},i.prototype.append=function(n){var i,t,r,u;if(this.hideLoading(),i=[],null!=n.results&&0!==n.results.length){for(n.results=this.sort(n.results),t=0;t<n.results.length;t++)r=n.results[t],u=this.option(r),i.push(u);this.$results.append(i)}else 0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"})},i.prototype.position=function(n,t){t.find(".select2-results").append(n)},i.prototype.sort=function(n){return this.options.get("sorter")(n)},i.prototype.highlightFirstItem=function(){var n=this.$results.find(".select2-results__option--selectable"),t=n.filter(".select2-results__option--selected");0<t.length?t.first().trigger("mouseenter"):n.first().trigger("mouseenter");this.ensureHighlightVisible()},i.prototype.setClasses=function(){var i=this;this.data.current(function(r){var u=r.map(function(n){return n.id.toString()});i.$results.find(".select2-results__option--selectable").each(function(){var r=n(this),i=t.GetData(this,"data"),f=""+i.id;null!=i.element&&i.element.selected||null==i.element&&-1<u.indexOf(f)?(this.classList.add("select2-results__option--selected"),r.attr("aria-selected","true")):(this.classList.remove("select2-results__option--selected"),r.attr("aria-selected","false"))})})},i.prototype.showLoading=function(n){this.hideLoading();var i={disabled:!0,loading:!0,text:this.options.get("translations").get("searching")(n)},t=this.option(i);t.className+=" loading-results";this.$results.prepend(t)},i.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},i.prototype.option=function(i){var r=document.createElement("li"),u,l,o,a,s,f,h,e,v,y,c;r.classList.add("select2-results__option");r.classList.add("select2-results__option--selectable");u={role:"option"};l=window.Element.prototype.matches||window.Element.prototype.msMatchesSelector||window.Element.prototype.webkitMatchesSelector;for(o in(null!=i.element&&l.call(i.element,":disabled")||null==i.element&&i.disabled)&&(u["aria-disabled"]="true",r.classList.remove("select2-results__option--selectable"),r.classList.add("select2-results__option--disabled")),null==i.id&&r.classList.remove("select2-results__option--selectable"),null!=i._resultId&&(r.id=i._resultId),i.title&&(r.title=i.title),i.children&&(u.role="group",u["aria-label"]=i.text,r.classList.remove("select2-results__option--selectable"),r.classList.add("select2-results__option--group")),u)a=u[o],r.setAttribute(o,a);if(i.children){for(s=n(r),f=document.createElement("strong"),f.className="select2-results__group",this.template(i,f),h=[],e=0;e<i.children.length;e++)v=i.children[e],y=this.option(v),h.push(y);c=n("<ul><\/ul>",{"class":"select2-results__options select2-results__options--nested"});c.append(h);s.append(f);s.append(c)}else this.template(i,r);return t.StoreData(r,"data",i),r},i.prototype.bind=function(i){var r=this,u=i.id+"-results";this.$results.attr("id",u);i.on("results:all",function(n){r.clear();r.append(n.data);i.isOpen()&&(r.setClasses(),r.highlightFirstItem())});i.on("results:append",function(n){r.append(n.data);i.isOpen()&&r.setClasses()});i.on("query",function(n){r.hideMessages();r.showLoading(n)});i.on("select",function(){i.isOpen()&&(r.setClasses(),r.options.get("scrollAfterSelect")&&r.highlightFirstItem())});i.on("unselect",function(){i.isOpen()&&(r.setClasses(),r.options.get("scrollAfterSelect")&&r.highlightFirstItem())});i.on("open",function(){r.$results.attr("aria-expanded","true");r.$results.attr("aria-hidden","false");r.setClasses();r.ensureHighlightVisible()});i.on("close",function(){r.$results.attr("aria-expanded","false");r.$results.attr("aria-hidden","true");r.$results.removeAttr("aria-activedescendant")});i.on("results:toggle",function(){var n=r.getHighlightedResults();0!==n.length&&n.trigger("mouseup")});i.on("results:select",function(){var n=r.getHighlightedResults(),i;0!==n.length&&(i=t.GetData(n[0],"data"),n.hasClass("select2-results__option--selected")?r.trigger("close",{}):r.trigger("select",{data:i}))});i.on("results:previous",function(){var i=r.getHighlightedResults(),u=r.$results.find(".select2-results__option--selectable"),f=u.index(i),n,t;if(!(f<=0)){n=f-1;0===i.length&&(n=0);t=u.eq(n);t.trigger("mouseenter");var e=r.$results.offset().top,o=t.offset().top,s=r.$results.scrollTop()+(o-e);0===n?r.$results.scrollTop(0):o-e<0&&r.$results.scrollTop(s)}});i.on("results:next",function(){var e=r.getHighlightedResults(),t=r.$results.find(".select2-results__option--selectable"),i=t.index(e)+1,n;if(!(i>=t.length)){n=t.eq(i);n.trigger("mouseenter");var u=r.$results.offset().top+r.$results.outerHeight(!1),f=n.offset().top+n.outerHeight(!1),o=r.$results.scrollTop()+f-u;0===i?r.$results.scrollTop(0):u<f&&r.$results.scrollTop(o)}});i.on("results:focus",function(n){n.element[0].classList.add("select2-results__option--highlighted");n.element[0].setAttribute("aria-selected","true")});i.on("results:message",function(n){r.displayMessage(n)});n.fn.mousewheel&&this.$results.on("mousewheel",function(n){var t=r.$results.scrollTop(),i=r.$results.get(0).scrollHeight-t+n.deltaY,u=0<n.deltaY&&t-n.deltaY<=0,f=n.deltaY<0&&i<=r.$results.height();u?(r.$results.scrollTop(0),n.preventDefault(),n.stopPropagation()):f&&(r.$results.scrollTop(r.$results.get(0).scrollHeight-r.$results.height()),n.preventDefault(),n.stopPropagation())});this.$results.on("mouseup",".select2-results__option--selectable",function(i){var f=n(this),u=t.GetData(this,"data");f.hasClass("select2-results__option--selected")?r.options.get("multiple")?r.trigger("unselect",{originalEvent:i,data:u}):r.trigger("close",{}):r.trigger("select",{originalEvent:i,data:u})});this.$results.on("mouseenter",".select2-results__option--selectable",function(){var i=t.GetData(this,"data");r.getHighlightedResults().removeClass("select2-results__option--highlighted").attr("aria-selected","false");r.trigger("results:focus",{data:i,element:n(this)})})},i.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},i.prototype.destroy=function(){this.$results.remove()},i.prototype.ensureHighlightVisible=function(){var n=this.getHighlightedResults();if(0!==n.length){var f=this.$results.find(".select2-results__option--selectable").index(n),t=this.$results.offset().top,i=n.offset().top,r=this.$results.scrollTop()+(i-t),u=i-t;r-=2*n.outerHeight(!1);f<=2?this.$results.scrollTop(0):(u>this.$results.outerHeight()||u<0)&&this.$results.scrollTop(r)}},i.prototype.template=function(t,i){var u=this.options.get("templateResult"),f=this.options.get("escapeMarkup"),r=u(t,i);null==r?i.style.display="none":"string"==typeof r?i.innerHTML=f(r):n(i).append(r)},i}),t.define("select2/keys",[],function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}}),t.define("select2/selection/base",["jquery","../utils","../keys"],function(n,t,i){function r(n,t){this.$element=n;this.options=t;r.__super__.constructor.call(this)}return t.Extend(r,t.Observable),r.prototype.render=function(){var i=n('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"><\/span>');return this._tabindex=0,null!=t.GetData(this.$element[0],"old-tabindex")?this._tabindex=t.GetData(this.$element[0],"old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),i.attr("title",this.$element.attr("title")),i.attr("tabindex",this._tabindex),i.attr("aria-disabled","false"),this.$selection=i},r.prototype.bind=function(n){var t=this,r=n.id+"-results";this.container=n;this.$selection.on("focus",function(n){t.trigger("focus",n)});this.$selection.on("blur",function(n){t._handleBlur(n)});this.$selection.on("keydown",function(n){t.trigger("keypress",n);n.which===i.SPACE&&n.preventDefault()});n.on("results:focus",function(n){t.$selection.attr("aria-activedescendant",n.data._resultId)});n.on("selection:update",function(n){t.update(n.data)});n.on("open",function(){t.$selection.attr("aria-expanded","true");t.$selection.attr("aria-owns",r);t._attachCloseHandler(n)});n.on("close",function(){t.$selection.attr("aria-expanded","false");t.$selection.removeAttr("aria-activedescendant");t.$selection.removeAttr("aria-owns");t.$selection.trigger("focus");t._detachCloseHandler(n)});n.on("enable",function(){t.$selection.attr("tabindex",t._tabindex);t.$selection.attr("aria-disabled","false")});n.on("disable",function(){t.$selection.attr("tabindex","-1");t.$selection.attr("aria-disabled","true")})},r.prototype._handleBlur=function(t){var i=this;window.setTimeout(function(){document.activeElement==i.$selection[0]||n.contains(i.$selection[0],document.activeElement)||i.trigger("blur",t)},1)},r.prototype._attachCloseHandler=function(i){n(document.body).on("mousedown.select2."+i.id,function(i){var r=n(i.target).closest(".select2");n(".select2.select2-container--open").each(function(){this!=r[0]&&t.GetData(this,"element").select2("close")})})},r.prototype._detachCloseHandler=function(t){n(document.body).off("mousedown.select2."+t.id)},r.prototype.position=function(n,t){t.find(".selection").append(n)},r.prototype.destroy=function(){this._detachCloseHandler(this.container)},r.prototype.update=function(){throw new Error("The `update` method must be defined in child classes.");},r.prototype.isEnabled=function(){return!this.isDisabled()},r.prototype.isDisabled=function(){return this.options.get("disabled")},r}),t.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(n,t,i){function r(){r.__super__.constructor.apply(this,arguments)}return i.Extend(r,t),r.prototype.render=function(){var n=r.__super__.render.call(this);return n[0].classList.add("select2-selection--single"),n.html('<span class="select2-selection__rendered"><\/span><span class="select2-selection__arrow" role="presentation"><b role="presentation"><\/b><\/span>'),n},r.prototype.bind=function(n){var i=this,t;r.__super__.bind.apply(this,arguments);t=n.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",t).attr("role","textbox").attr("aria-readonly","true");this.$selection.attr("aria-labelledby",t);this.$selection.on("mousedown",function(n){1===n.which&&i.trigger("toggle",{originalEvent:n})});this.$selection.on("focus",function(){});this.$selection.on("blur",function(){});n.on("focus",function(){n.isOpen()||i.$selection.trigger("focus")})},r.prototype.clear=function(){var n=this.$selection.find(".select2-selection__rendered");n.empty();n.removeAttr("title")},r.prototype.display=function(n,t){var i=this.options.get("templateSelection");return this.options.get("escapeMarkup")(i(n,t))},r.prototype.selectionContainer=function(){return n("<span><\/span>")},r.prototype.update=function(n){var r;if(0!==n.length){var i=n[0],t=this.$selection.find(".select2-selection__rendered"),u=this.display(i,t);t.empty().append(u);r=i.title||i.text;r?t.attr("title",r):t.removeAttr("title")}else this.clear()},r}),t.define("select2/selection/multiple",["jquery","./base","../utils"],function(n,t,i){function r(){r.__super__.constructor.apply(this,arguments)}return i.Extend(r,t),r.prototype.render=function(){var n=r.__super__.render.call(this);return n[0].classList.add("select2-selection--multiple"),n.html('<ul class="select2-selection__rendered"><\/ul>'),n},r.prototype.bind=function(t){var u=this,f;r.__super__.bind.apply(this,arguments);f=t.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",f);this.$selection.on("click",function(n){u.trigger("toggle",{originalEvent:n})});this.$selection.on("click",".select2-selection__choice__remove",function(t){if(!u.isDisabled()){var r=n(this).parent(),f=i.GetData(r[0],"data");u.trigger("unselect",{originalEvent:t,data:f})}});this.$selection.on("keydown",".select2-selection__choice__remove",function(n){u.isDisabled()||n.stopPropagation()})},r.prototype.clear=function(){var n=this.$selection.find(".select2-selection__rendered");n.empty();n.removeAttr("title")},r.prototype.display=function(n,t){var i=this.options.get("templateSelection");return this.options.get("escapeMarkup")(i(n,t))},r.prototype.selectionContainer=function(){return n('<li class="select2-selection__choice"><button type="button" class="select2-selection__choice__remove" tabindex="-1"><span aria-hidden="true">&times;<\/span><\/button><span class="select2-selection__choice__display"><\/span><\/li>')},r.prototype.update=function(n){var o,s,u;if(this.clear(),0!==n.length){for(var h=[],c=this.$selection.find(".select2-selection__rendered").attr("id")+"-choice-",f=0;f<n.length;f++){var t=n[f],r=this.selectionContainer(),l=this.display(t,r),e=c+i.generateChars(4)+"-";e+=t.id?t.id:i.generateChars(4);r.find(".select2-selection__choice__display").append(l).attr("id",e);o=t.title||t.text;o&&r.attr("title",o);s=this.options.get("translations").get("removeItem");u=r.find(".select2-selection__choice__remove");u.attr("title",s());u.attr("aria-label",s());u.attr("aria-describedby",e);i.StoreData(r[0],"data",t);h.push(r)}this.$selection.find(".select2-selection__rendered").append(h)}},r}),t.define("select2/selection/placeholder",[],function(){function n(n,t,i){this.placeholder=this.normalizePlaceholder(i.get("placeholder"));n.call(this,t,i)}return n.prototype.normalizePlaceholder=function(n,t){return"string"==typeof t&&(t={id:"",text:t}),t},n.prototype.createPlaceholder=function(n,t){var i=this.selectionContainer();return i.html(this.display(t)),i[0].classList.add("select2-selection__placeholder"),i[0].classList.remove("select2-selection__choice"),i},n.prototype.update=function(n,t){var r=1==t.length&&t[0].id!=this.placeholder.id,i;if(1<t.length||r)return n.call(this,t);this.clear();i=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(i)},n}),t.define("select2/selection/allowClear",["jquery","../keys","../utils"],function(n,t,i){function r(){}return r.prototype.bind=function(n,t,i){var r=this;n.call(this,t,i);null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option.");this.$selection.on("mousedown",".select2-selection__clear",function(n){r._handleClear(n)});t.on("keypress",function(n){r._handleKeyboardClear(n,t)})},r.prototype._handleClear=function(n,t){var e,u,o,r,f;if(!this.isDisabled()&&(e=this.$selection.find(".select2-selection__clear"),0!==e.length))if(t.stopPropagation(),u=i.GetData(e[0],"data"),o=this.$element.val(),this.$element.val(this.placeholder.id),r={data:u},this.trigger("clear",r),r.prevented)this.$element.val(o);else{for(f=0;f<u.length;f++)if(r={data:u[f]},this.trigger("unselect",r),r.prevented)return void this.$element.val(o);this.$element.trigger("input").trigger("change");this.trigger("toggle",{})}},r.prototype._handleKeyboardClear=function(n,i,r){r.isOpen()||i.which!=t.DELETE&&i.which!=t.BACKSPACE||this._handleClear(i)},r.prototype.update=function(t,r){if(t.call(this,r),this.$selection.find(".select2-selection__clear").remove(),!(0<this.$selection.find(".select2-selection__placeholder").length||0===r.length)){var e=this.$selection.find(".select2-selection__rendered").attr("id"),f=this.options.get("translations").get("removeAllItems"),u=n('<button type="button" class="select2-selection__clear" tabindex="-1"><span aria-hidden="true">&times;<\/span><\/button>');u.attr("title",f());u.attr("aria-label",f());u.attr("aria-describedby",e);i.StoreData(u[0],"data",r);this.$selection.prepend(u)}},r}),t.define("select2/selection/search",["jquery","../utils","../keys"],function(n,t,i){function r(n,t,i){n.call(this,t,i)}return r.prototype.render=function(t){var r=n('<span class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" /><\/span>'),i;return this.$searchContainer=r,this.$search=r.find("input"),this.$search.prop("autocomplete",this.options.get("autocomplete")),i=t.call(this),this._transferTabIndex(),i.append(this.$searchContainer),i},r.prototype.bind=function(n,r,u){var f=this,s=r.id+"-results",h=r.id+"-container",e,o;n.call(this,r,u);f.$search.attr("aria-describedby",h);r.on("open",function(){f.$search.attr("aria-controls",s);f.$search.trigger("focus")});r.on("close",function(){f.$search.val("");f.resizeSearch();f.$search.removeAttr("aria-controls");f.$search.removeAttr("aria-activedescendant");f.$search.trigger("focus")});r.on("enable",function(){f.$search.prop("disabled",!1);f._transferTabIndex()});r.on("disable",function(){f.$search.prop("disabled",!0)});r.on("focus",function(){f.$search.trigger("focus")});r.on("results:focus",function(n){n.data._resultId?f.$search.attr("aria-activedescendant",n.data._resultId):f.$search.removeAttr("aria-activedescendant")});this.$selection.on("focusin",".select2-search--inline",function(n){f.trigger("focus",n)});this.$selection.on("focusout",".select2-search--inline",function(n){f._handleBlur(n)});this.$selection.on("keydown",".select2-search--inline",function(n){var r,u;(n.stopPropagation(),f.trigger("keypress",n),f._keyUpPrevented=n.isDefaultPrevented(),n.which===i.BACKSPACE&&""===f.$search.val())&&(r=f.$selection.find(".select2-selection__choice").last(),0<r.length&&(u=t.GetData(r[0],"data"),f.searchRemoveChoice(u),n.preventDefault()))});this.$selection.on("click",".select2-search--inline",function(n){f.$search.val()&&n.stopPropagation()});e=document.documentMode;o=e&&e<=11;this.$selection.on("input.searchcheck",".select2-search--inline",function(){o?f.$selection.off("input.search input.searchcheck"):f.$selection.off("keyup.search")});this.$selection.on("keyup.search input.search",".select2-search--inline",function(n){if(o&&"input"===n.type)f.$selection.off("input.search input.searchcheck");else{var t=n.which;t!=i.SHIFT&&t!=i.CTRL&&t!=i.ALT&&t!=i.TAB&&f.handleSearch(n)}})},r.prototype._transferTabIndex=function(){this.$search.attr("tabindex",this.$selection.attr("tabindex"));this.$selection.attr("tabindex","-1")},r.prototype.createPlaceholder=function(n,t){this.$search.attr("placeholder",t.text)},r.prototype.update=function(n,t){var i=this.$search[0]==document.activeElement;this.$search.attr("placeholder","");n.call(this,t);this.resizeSearch();i&&this.$search.trigger("focus")},r.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var n=this.$search.val();this.trigger("query",{term:n})}this._keyUpPrevented=!1},r.prototype.searchRemoveChoice=function(n,t){this.trigger("unselect",{data:t});this.$search.val(t.text);this.handleSearch()},r.prototype.resizeSearch=function(){this.$search.css("width","25px");var n="100%";""===this.$search.attr("placeholder")&&(n=.75*(this.$search.val().length+1)+"em");this.$search.css("width",n)},r}),t.define("select2/selection/selectionCss",["../utils"],function(n){function t(){}return t.prototype.render=function(t){var r=t.call(this),i=this.options.get("selectionCssClass")||"";return-1!==i.indexOf(":all:")&&(i=i.replace(":all:",""),n.copyNonInternalCssClasses(r[0],this.$element[0])),r.addClass(i),r},t}),t.define("select2/selection/eventRelay",["jquery"],function(n){function t(){}return t.prototype.bind=function(t,i,r){var u=this,f=["open","opening","close","closing","select","selecting","unselect","unselecting","clear","clearing"],e=["opening","closing","selecting","unselecting","clearing"];t.call(this,i,r);i.on("*",function(t,i){if(-1!==f.indexOf(t)){i=i||{};var r=n.Event("select2:"+t,{params:i});u.$element.trigger(r);-1!==e.indexOf(t)&&(i.prevented=r.isDefaultPrevented())}})},t}),t.define("select2/translation",["jquery","require"],function(n,t){function i(n){this.dict=n||{}}return i.prototype.all=function(){return this.dict},i.prototype.get=function(n){return this.dict[n]},i.prototype.extend=function(t){this.dict=n.extend({},t.all(),this.dict)},i._cache={},i.loadPath=function(n){if(!(n in i._cache)){var r=t(n);i._cache[n]=r}return new i(i._cache[n])},i}),t.define("select2/diacritics",[],function(){return{"":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"AA","":"AE","":"AE","":"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"DZ","":"DZ","":"Dz","":"Dz","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"F","":"F","":"F","":"F","":"F","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"J","":"J","":"J","":"J","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"LJ","":"Lj","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"NJ","":"Nj","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"OE","":"OI","":"OO","":"OU","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"Q","":"Q","":"Q","":"Q","":"Q","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"TZ","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"VY","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"aa","":"ae","":"ae","":"ae","":"ao","":"au","":"av","":"av","":"ay","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"dz","":"dz","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"f","":"f","":"f","":"f","":"f","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"hv","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"j","":"j","":"j","":"j","":"j","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"lj","":"m","":"m","":"m","":"m","":"m","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"nj","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"oe","":"oi","":"ou","":"oo","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"q","":"q","":"q","":"q","":"q","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"tz","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"vy","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"'"}}),t.define("select2/data/base",["../utils"],function(n){function t(){t.__super__.constructor.call(this)}return n.Extend(t,n.Observable),t.prototype.current=function(){throw new Error("The `current` method must be defined in child classes.");},t.prototype.query=function(){throw new Error("The `query` method must be defined in child classes.");},t.prototype.bind=function(){},t.prototype.destroy=function(){},t.prototype.generateResultId=function(t,i){var r=t.id+"-result-";return r+=n.generateChars(4),r+=null!=i.id?"-"+i.id.toString():"-"+n.generateChars(4),r},t}),t.define("select2/data/select",["./base","../utils","jquery"],function(n,t,i){function r(n,t){this.$element=n;this.options=t;r.__super__.constructor.call(this)}return t.Extend(r,n),r.prototype.current=function(n){var t=this;n(Array.prototype.map.call(this.$element[0].querySelectorAll(":checked"),function(n){return t.item(i(n))}))},r.prototype.select=function(n){var t=this,i;if(n.selected=!0,null!=n.element&&"option"===n.element.tagName.toLowerCase())return n.element.selected=!0,void this.$element.trigger("input").trigger("change");this.$element.prop("multiple")?this.current(function(i){var u=[],r,f;for((n=[n]).push.apply(n,i),r=0;r<n.length;r++)f=n[r].id,-1===u.indexOf(f)&&u.push(f);t.$element.val(u);t.$element.trigger("input").trigger("change")}):(i=n.id,this.$element.val(i),this.$element.trigger("input").trigger("change"))},r.prototype.unselect=function(n){var t=this;if(this.$element.prop("multiple")){if(n.selected=!1,null!=n.element&&"option"===n.element.tagName.toLowerCase())return n.element.selected=!1,void this.$element.trigger("input").trigger("change");this.current(function(i){for(var f,r=[],u=0;u<i.length;u++)f=i[u].id,f!==n.id&&-1===r.indexOf(f)&&r.push(f);t.$element.val(r);t.$element.trigger("input").trigger("change")})}},r.prototype.bind=function(n){var t=this;(this.container=n).on("select",function(n){t.select(n.data)});n.on("unselect",function(n){t.unselect(n.data)})},r.prototype.destroy=function(){this.$element.find("*").each(function(){t.RemoveData(this)})},r.prototype.query=function(n,t){var r=[],u=this;this.$element.children().each(function(){if("option"===this.tagName.toLowerCase()||"optgroup"===this.tagName.toLowerCase()){var f=i(this),e=u.item(f),t=u.matches(n,e);null!==t&&r.push(t)}});t({results:r})},r.prototype.addOptions=function(n){this.$element.append(n)},r.prototype.option=function(n){var r,u;return n.children?(r=document.createElement("optgroup")).label=n.text:void 0!==(r=document.createElement("option")).textContent?r.textContent=n.text:r.innerText=n.text,void 0!==n.id&&(r.value=n.id),n.disabled&&(r.disabled=!0),n.selected&&(r.selected=!0),n.title&&(r.title=n.title),u=this._normalizeItem(n),u.element=r,t.StoreData(r,"data",u),i(r)},r.prototype.item=function(n){var r={},u,s,h;if(null!=(r=t.GetData(n[0],"data")))return r;if(u=n[0],"option"===u.tagName.toLowerCase())r={id:n.val(),text:n.text(),disabled:n.prop("disabled"),selected:n.prop("selected"),title:n.prop("title")};else if("optgroup"===u.tagName.toLowerCase()){r={text:n.prop("label"),children:[],title:n.prop("title")};for(var e=n.children("option"),o=[],f=0;f<e.length;f++)s=i(e[f]),h=this.item(s),o.push(h);r.children=o}return(r=this._normalizeItem(r)).element=n[0],t.StoreData(n[0],"data",r),r},r.prototype._normalizeItem=function(n){return n!==Object(n)&&(n={id:n,text:n}),null!=(n=i.extend({},{text:""},n)).id&&(n.id=n.id.toString()),null!=n.text&&(n.text=n.text.toString()),null==n._resultId&&n.id&&null!=this.container&&(n._resultId=this.generateResultId(this.container,n)),i.extend({},{selected:!1,disabled:!1},n)},r.prototype.matches=function(n,t){return this.options.get("matcher")(n,t)},r}),t.define("select2/data/array",["./select","../utils","jquery"],function(n,t,i){function r(n,t){this._dataToConvert=t.get("data")||[];r.__super__.constructor.call(this,n,t)}return t.Extend(r,n),r.prototype.bind=function(n,t){r.__super__.bind.call(this,n,t);this.addOptions(this.convertToOptions(this._dataToConvert))},r.prototype.select=function(n){var t=this.$element.find("option").filter(function(t,i){return i.value==n.id.toString()});0===t.length&&(t=this.option(n),this.addOptions(t));r.__super__.select.call(this,n)},r.prototype.convertToOptions=function(n){function l(n){return function(){return i(this).val()==n.id}}for(var t,u,s,h=this,f=this.$element.find("option"),c=f.map(function(){return h.item(i(this)).id}).get(),e=[],r=0;r<n.length;r++)if(t=this._normalizeItem(n[r]),0<=c.indexOf(t.id)){var o=f.filter(l(t)),a=this.item(o),v=i.extend(!0,{},t,a),y=this.option(v);o.replaceWith(y)}else u=this.option(t),t.children&&(s=this.convertToOptions(t.children),u.append(s)),e.push(u);return e},r}),t.define("select2/data/ajax",["./array","../utils","jquery"],function(n,t,i){function r(n,t){this.ajaxOptions=this._applyDefaults(t.get("ajax"));null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults);r.__super__.constructor.call(this,n,t)}return t.Extend(r,n),r.prototype._applyDefaults=function(n){var t={data:function(n){return i.extend({},n,{q:n.term})},transport:function(n,t,r){var u=i.ajax(n);return u.then(t),u.fail(r),u}};return i.extend({},t,n,!0)},r.prototype.processResults=function(n){return n},r.prototype.query=function(n,t){function f(){var i=r.transport(r,function(i){var r=u.processResults(i,n);u.options.get("debug")&&window.console&&console.error&&(r&&r.results&&Array.isArray(r.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response."));t(r)},function(){"status"in i&&(0===i.status||"0"===i.status)||u.trigger("results:message",{message:"errorLoading"})});u._request=i}var u=this,r;null!=this._request&&(i.isFunction(this._request.abort)&&this._request.abort(),this._request=null);r=i.extend({type:"GET"},this.ajaxOptions);"function"==typeof r.url&&(r.url=r.url.call(this.$element,n));"function"==typeof r.data&&(r.data=r.data.call(this.$element,n));this.ajaxOptions.delay&&null!=n.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(f,this.ajaxOptions.delay)):f()},r}),t.define("select2/data/tags",["jquery"],function(n){function t(n,t,i){var u=i.get("tags"),e=i.get("createTag"),f,r;if(void 0!==e&&(this.createTag=e),f=i.get("insertTag"),void 0!==f&&(this.insertTag=f),n.call(this,t,i),Array.isArray(u))for(r=0;r<u.length;r++){var o=u[r],s=this._normalizeItem(o),h=this.option(s);this.$element.append(h)}}return t.prototype.query=function(n,t,i){var r=this;this._removeOldTags();null!=t.term&&null==t.page?n.call(this,t,function n(u,f){for(var s,l,h,c,e=u.results,o=0;o<e.length;o++)if(s=e[o],l=null!=s.children&&!n({results:s.children},!0),(s.text||"").toUpperCase()===(t.term||"").toUpperCase()||l)return!f&&(u.data=e,void i(u));if(f)return!0;h=r.createTag(t);null!=h&&(c=r.option(h),c.attr("data-select2-tag",!0),r.addOptions([c]),r.insertTag(e,h));u.results=e;i(u)}):n.call(this,t,i)},t.prototype.createTag=function(n,t){if(null==t.term)return null;var i=t.term.trim();return""===i?null:{id:i,text:i}},t.prototype.insertTag=function(n,t,i){t.unshift(i)},t.prototype._removeOldTags=function(){this.$element.find("option[data-select2-tag]").each(function(){this.selected||n(this).remove()})},t}),t.define("select2/data/tokenizer",["jquery"],function(n){function t(n,t,i){var r=i.get("tokenizer");void 0!==r&&(this.tokenizer=r);n.call(this,t,i)}return t.prototype.bind=function(n,t,i){n.call(this,t,i);this.$search=t.dropdown.$search||t.selection.$search||i.find(".select2-search__field")},t.prototype.query=function(t,i,r){var u=this,f;i.term=i.term||"";f=this.tokenizer(i,this.options,function(t){var f,i=u._normalizeItem(t),r;u.$element.find("option").filter(function(){return n(this).val()===i.id}).length||(r=u.option(i),r.attr("data-select2-tag",!0),u._removeOldTags(),u.addOptions([r]));f=i;u.trigger("select",{data:f})});f.term!==i.term&&(this.$search.length&&(this.$search.val(f.term),this.$search.trigger("focus")),i.term=f.term);t.call(this,i,r)},t.prototype.tokenizer=function(t,i,r,u){for(var s,h,o,c=r.get("tokenSeparators")||[],e=i.term,f=0,l=this.createTag||function(n){return{id:n.term,text:n.term}};f<e.length;)s=e[f],-1!==c.indexOf(s)?(h=e.substr(0,f),o=l(n.extend({},i,{term:h})),null!=o?(u(o),e=e.substr(f+1)||"",f=0):f++):f++;return{term:e}},t}),t.define("select2/data/minimumInputLength",[],function(){function n(n,t,i){this.minimumInputLength=i.get("minimumInputLength");n.call(this,t,i)}return n.prototype.query=function(n,t,i){t.term=t.term||"";t.term.length<this.minimumInputLength?this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:t.term,params:t}}):n.call(this,t,i)},n}),t.define("select2/data/maximumInputLength",[],function(){function n(n,t,i){this.maximumInputLength=i.get("maximumInputLength");n.call(this,t,i)}return n.prototype.query=function(n,t,i){t.term=t.term||"";0<this.maximumInputLength&&t.term.length>this.maximumInputLength?this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:t.term,params:t}}):n.call(this,t,i)},n}),t.define("select2/data/maximumSelectionLength",[],function(){function n(n,t,i){this.maximumSelectionLength=i.get("maximumSelectionLength");n.call(this,t,i)}return n.prototype.bind=function(n,t,i){var r=this;n.call(this,t,i);t.on("select",function(){r._checkIfMaximumSelected()})},n.prototype.query=function(n,t,i){var r=this;this._checkIfMaximumSelected(function(){n.call(r,t,i)})},n.prototype._checkIfMaximumSelected=function(n,t){var i=this;this.current(function(n){var r=null!=n?n.length:0;0<i.maximumSelectionLength&&r>=i.maximumSelectionLength?i.trigger("results:message",{message:"maximumSelected",args:{maximum:i.maximumSelectionLength}}):t&&t()})},n}),t.define("select2/dropdown",["jquery","./utils"],function(n,t){function i(n,t){this.$element=n;this.options=t;i.__super__.constructor.call(this)}return t.Extend(i,t.Observable),i.prototype.render=function(){var t=n('<span class="select2-dropdown"><span class="select2-results"><\/span><\/span>');return t.attr("dir",this.options.get("dir")),this.$dropdown=t},i.prototype.bind=function(){},i.prototype.position=function(){},i.prototype.destroy=function(){this.$dropdown.remove()},i}),t.define("select2/dropdown/search",["jquery"],function(n){function t(){}return t.prototype.render=function(t){var r=t.call(this),i=n('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" /><\/span>');return this.$searchContainer=i,this.$search=i.find("input"),this.$search.prop("autocomplete",this.options.get("autocomplete")),r.prepend(i),r},t.prototype.bind=function(t,i,r){var u=this,f=i.id+"-results";t.call(this,i,r);this.$search.on("keydown",function(n){u.trigger("keypress",n);u._keyUpPrevented=n.isDefaultPrevented()});this.$search.on("input",function(){n(this).off("keyup")});this.$search.on("keyup input",function(n){u.handleSearch(n)});i.on("open",function(){u.$search.attr("tabindex",0);u.$search.attr("aria-controls",f);u.$search.trigger("focus");window.setTimeout(function(){u.$search.trigger("focus")},0)});i.on("close",function(){u.$search.attr("tabindex",-1);u.$search.removeAttr("aria-controls");u.$search.removeAttr("aria-activedescendant");u.$search.val("");u.$search.trigger("blur")});i.on("focus",function(){i.isOpen()||u.$search.trigger("focus")});i.on("results:all",function(n){null!=n.query.term&&""!==n.query.term||(u.showSearch(n)?u.$searchContainer[0].classList.remove("select2-search--hide"):u.$searchContainer[0].classList.add("select2-search--hide"))});i.on("results:focus",function(n){n.data._resultId?u.$search.attr("aria-activedescendant",n.data._resultId):u.$search.removeAttr("aria-activedescendant")})},t.prototype.handleSearch=function(){if(!this._keyUpPrevented){var n=this.$search.val();this.trigger("query",{term:n})}this._keyUpPrevented=!1},t.prototype.showSearch=function(){return!0},t}),t.define("select2/dropdown/hidePlaceholder",[],function(){function n(n,t,i,r){this.placeholder=this.normalizePlaceholder(i.get("placeholder"));n.call(this,t,i,r)}return n.prototype.append=function(n,t){t.results=this.removePlaceholder(t.results);n.call(this,t)},n.prototype.normalizePlaceholder=function(n,t){return"string"==typeof t&&(t={id:"",text:t}),t},n.prototype.removePlaceholder=function(n,t){for(var u,r=t.slice(0),i=t.length-1;0<=i;i--)u=t[i],this.placeholder.id===u.id&&r.splice(i,1);return r},n}),t.define("select2/dropdown/infiniteScroll",["jquery"],function(n){function t(n,t,i,r){this.lastParams={};n.call(this,t,i,r);this.$loadingMore=this.createLoadingMore();this.loading=!1}return t.prototype.append=function(n,t){this.$loadingMore.remove();this.loading=!1;n.call(this,t);this.showLoadingMore(t)&&(this.$results.append(this.$loadingMore),this.loadMoreIfNeeded())},t.prototype.bind=function(n,t,i){var r=this;n.call(this,t,i);t.on("query",function(n){r.lastParams=n;r.loading=!0});t.on("query:append",function(n){r.lastParams=n;r.loading=!0});this.$results.on("scroll",this.loadMoreIfNeeded.bind(this))},t.prototype.loadMoreIfNeeded=function(){var i=n.contains(document.documentElement,this.$loadingMore[0]),t;!this.loading&&i&&(t=this.$results.offset().top+this.$results.outerHeight(!1),this.$loadingMore.offset().top+this.$loadingMore.outerHeight(!1)<=t+50&&this.loadMore())},t.prototype.loadMore=function(){this.loading=!0;var t=n.extend({},{page:1},this.lastParams);t.page++;this.trigger("query:append",t)},t.prototype.showLoadingMore=function(n,t){return t.pagination&&t.pagination.more},t.prototype.createLoadingMore=function(){var t=n('<li class="select2-results__option select2-results__option--load-more"role="option" aria-disabled="true"><\/li>'),i=this.options.get("translations").get("loadingMore");return t.html(i(this.lastParams)),t},t}),t.define("select2/dropdown/attachBody",["jquery","../utils"],function(n,t){function i(t,i,r){this.$dropdownParent=n(r.get("dropdownParent")||document.body);t.call(this,i,r)}return i.prototype.bind=function(n,t,i){var r=this;n.call(this,t,i);t.on("open",function(){r._showDropdown();r._attachPositioningHandler(t);r._bindContainerResultHandlers(t)});t.on("close",function(){r._hideDropdown();r._detachPositioningHandler(t)});this.$dropdownContainer.on("mousedown",function(n){n.stopPropagation()})},i.prototype.destroy=function(n){n.call(this);this.$dropdownContainer.remove()},i.prototype.position=function(n,t,i){t.attr("class",i.attr("class"));t[0].classList.remove("select2");t[0].classList.add("select2-container--open");t.css({position:"absolute",top:-999999});this.$container=i},i.prototype.render=function(t){var i=n("<span><\/span>"),r=t.call(this);return i.append(r),this.$dropdownContainer=i},i.prototype._hideDropdown=function(){this.$dropdownContainer.detach()},i.prototype._bindContainerResultHandlers=function(n,t){if(!this._containerResultsHandlersBound){var i=this;t.on("results:all",function(){i._positionDropdown();i._resizeDropdown()});t.on("results:append",function(){i._positionDropdown();i._resizeDropdown()});t.on("results:message",function(){i._positionDropdown();i._resizeDropdown()});t.on("select",function(){i._positionDropdown();i._resizeDropdown()});t.on("unselect",function(){i._positionDropdown();i._resizeDropdown()});this._containerResultsHandlersBound=!0}},i.prototype._attachPositioningHandler=function(i,r){var u=this,f="scroll.select2."+r.id,o="resize.select2."+r.id,s="orientationchange.select2."+r.id,e=this.$container.parents().filter(t.hasScroll);e.each(function(){t.StoreData(this,"select2-scroll-position",{x:n(this).scrollLeft(),y:n(this).scrollTop()})});e.on(f,function(){var i=t.GetData(this,"select2-scroll-position");n(this).scrollTop(i.y)});n(window).on(f+" "+o+" "+s,function(){u._positionDropdown();u._resizeDropdown()})},i.prototype._detachPositioningHandler=function(i,r){var u="scroll.select2."+r.id,f="resize.select2."+r.id,e="orientationchange.select2."+r.id;this.$container.parents().filter(t.hasScroll).off(u);n(window).off(u+" "+f+" "+e)},i.prototype._positionDropdown=function(){var s=n(window),e=this.$dropdown[0].classList.contains("select2-dropdown--above"),a=this.$dropdown[0].classList.contains("select2-dropdown--below"),t=null,i=this.$container.offset(),r,f;i.bottom=i.top+this.$container.outerHeight(!1);r={height:this.$container.outerHeight(!1)};r.top=i.top;r.bottom=i.top+r.height;var h=this.$dropdown.outerHeight(!1),v=s.scrollTop(),y=s.scrollTop()+s.height(),c=v<i.top-h,l=y>i.bottom+h,o={left:i.left,top:r.bottom},u=this.$dropdownParent;"static"===u.css("position")&&(u=u.offsetParent());f={top:0,left:0};(n.contains(document.body,u[0])||u[0].isConnected)&&(f=u.offset());o.top-=f.top;o.left-=f.left;e||a||(t="below");l||!c||e?!c&&l&&e&&(t="below"):t="above";("above"==t||e&&"below"!==t)&&(o.top=r.top-f.top-h);null!=t&&(this.$dropdown[0].classList.remove("select2-dropdown--below"),this.$dropdown[0].classList.remove("select2-dropdown--above"),this.$dropdown[0].classList.add("select2-dropdown--"+t),this.$container[0].classList.remove("select2-container--below"),this.$container[0].classList.remove("select2-container--above"),this.$container[0].classList.add("select2-container--"+t));this.$dropdownContainer.css(o)},i.prototype._resizeDropdown=function(){var n={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(n.minWidth=n.width,n.position="relative",n.width="auto");this.$dropdown.css(n)},i.prototype._showDropdown=function(){this.$dropdownContainer.appendTo(this.$dropdownParent);this._positionDropdown();this._resizeDropdown()},i}),t.define("select2/dropdown/minimumResultsForSearch",[],function(){function n(n,t,i,r){this.minimumResultsForSearch=i.get("minimumResultsForSearch");this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0);n.call(this,t,i,r)}return n.prototype.showSearch=function(n,t){return!(function n(t){for(var u,i=0,r=0;r<t.length;r++)u=t[r],u.children?i+=n(u.children):i++;return i}(t.data.results)<this.minimumResultsForSearch)&&n.call(this,t)},n}),t.define("select2/dropdown/selectOnClose",["../utils"],function(n){function t(){}return t.prototype.bind=function(n,t,i){var r=this;n.call(this,t,i);t.on("close",function(n){r._handleSelectOnClose(n)})},t.prototype._handleSelectOnClose=function(t,i){var u,f,r;i&&null!=i.originalSelect2Event&&(u=i.originalSelect2Event,"select"===u._type||"unselect"===u._type)||(f=this.getHighlightedResults(),f.length<1||(r=n.GetData(f[0],"data"),null!=r.element&&r.element.selected||null==r.element&&r.selected||this.trigger("select",{data:r})))},t}),t.define("select2/dropdown/closeOnSelect",[],function(){function n(){}return n.prototype.bind=function(n,t,i){var r=this;n.call(this,t,i);t.on("select",function(n){r._selectTriggered(n)});t.on("unselect",function(n){r._selectTriggered(n)})},n.prototype._selectTriggered=function(n,t){var i=t.originalEvent;i&&(i.ctrlKey||i.metaKey)||this.trigger("close",{originalEvent:i,originalSelect2Event:t})},n}),t.define("select2/dropdown/dropdownCss",["../utils"],function(n){function t(){}return t.prototype.render=function(t){var r=t.call(this),i=this.options.get("dropdownCssClass")||"";return-1!==i.indexOf(":all:")&&(i=i.replace(":all:",""),n.copyNonInternalCssClasses(r[0],this.$element[0])),r.addClass(i),r},t}),t.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(n){var t=n.input.length-n.maximum,i="Please delete "+t+" character";return 1!=t&&(i+="s"),i},inputTooShort:function(n){return"Please enter "+(n.minimum-n.input.length)+" or more characters"},loadingMore:function(){return"Loading more results"},maximumSelected:function(n){var t="You can only select "+n.maximum+" item";return 1!=n.maximum&&(t+="s"),t},noResults:function(){return"No results found"},searching:function(){return"Searching"},removeAllItems:function(){return"Remove all items"},removeItem:function(){return"Remove item"}}}),t.define("select2/defaults",["jquery","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/selectionCss","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./dropdown/dropdownCss","./i18n/en"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot){function st(){this.reset()}return st.prototype.apply=function(c){var ct,l,st,ht;for((null==(c=n.extend(!0,{},this.defaults,c)).dataAdapter&&(c.dataAdapter=null!=c.ajax?y:null!=c.data?v:a,0<c.minimumInputLength&&(c.dataAdapter=h.Decorate(c.dataAdapter,b)),0<c.maximumInputLength&&(c.dataAdapter=h.Decorate(c.dataAdapter,k)),0<c.maximumSelectionLength&&(c.dataAdapter=h.Decorate(c.dataAdapter,d)),c.tags&&(c.dataAdapter=h.Decorate(c.dataAdapter,p)),null==c.tokenSeparators&&null==c.tokenizer||(c.dataAdapter=h.Decorate(c.dataAdapter,w))),null==c.resultsAdapter&&(c.resultsAdapter=t,null!=c.ajax&&(c.resultsAdapter=h.Decorate(c.resultsAdapter,it)),null!=c.placeholder&&(c.resultsAdapter=h.Decorate(c.resultsAdapter,tt)),c.selectOnClose&&(c.resultsAdapter=h.Decorate(c.resultsAdapter,ft))),null==c.dropdownAdapter)&&(c.multiple?c.dropdownAdapter=g:(ct=h.Decorate(g,nt),c.dropdownAdapter=ct),0!==c.minimumResultsForSearch&&(c.dropdownAdapter=h.Decorate(c.dropdownAdapter,ut)),c.closeOnSelect&&(c.dropdownAdapter=h.Decorate(c.dropdownAdapter,et)),null!=c.dropdownCssClass&&(c.dropdownAdapter=h.Decorate(c.dropdownAdapter,ot)),c.dropdownAdapter=h.Decorate(c.dropdownAdapter,rt)),null==c.selectionAdapter&&(c.selectionAdapter=c.multiple?r:i,null!=c.placeholder&&(c.selectionAdapter=h.Decorate(c.selectionAdapter,u)),c.allowClear&&(c.selectionAdapter=h.Decorate(c.selectionAdapter,f)),c.multiple&&(c.selectionAdapter=h.Decorate(c.selectionAdapter,e)),null!=c.selectionCssClass&&(c.selectionAdapter=h.Decorate(c.selectionAdapter,o)),c.selectionAdapter=h.Decorate(c.selectionAdapter,s)),c.language=this._resolveLanguage(c.language),c.language.push("en"),l=[],st=0;st<c.language.length;st++)ht=c.language[st],-1===l.indexOf(ht)&&l.push(ht);return c.language=l,c.translations=this._processTranslations(c.language,c.debug),c},st.prototype.reset=function(){function t(n){return n.replace(/[^\u0000-\u007E]/g,function(n){return l[n]||n})}this.defaults={amdLanguageBase:"./i18n/",autocomplete:"off",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:h.escapeMarkup,language:{},matcher:function i(r,u){var f,e,o,s;if(null==r.term||""===r.term.trim())return u;if(u.children&&0<u.children.length){for(f=n.extend(!0,{},u),e=u.children.length-1;0<=e;e--)null==i(r,u.children[e])&&f.children.splice(e,1);return 0<f.children.length?f:i(r,f)}return o=t(u.text).toUpperCase(),s=t(r.term).toUpperCase(),-1<o.indexOf(s)?u:null},minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,scrollAfterSelect:!1,sorter:function(n){return n},templateResult:function(n){return n.text},templateSelection:function(n){return n.text},theme:"default",width:"resolve"}},st.prototype.applyFromElement=function(n,t){var i=n.language,r=this.defaults.language,u=t.prop("lang"),f=t.closest("[lang]").prop("lang"),e=Array.prototype.concat.call(this._resolveLanguage(u),this._resolveLanguage(i),this._resolveLanguage(r),this._resolveLanguage(f));return n.language=e,n},st.prototype._resolveLanguage=function(t){var r,u,i,f;if(!t)return[];if(n.isEmptyObject(t))return[];if(n.isPlainObject(t))return[t];for(r=Array.isArray(t)?t:[t],u=[],i=0;i<r.length;i++)(u.push(r[i]),"string"==typeof r[i]&&0<r[i].indexOf("-"))&&(f=r[i].split("-")[0],u.push(f));return u},st.prototype._processTranslations=function(t,i){for(var u,r,e=new c,f=0;f<t.length;f++){if(u=new c,r=t[f],"string"==typeof r)try{u=c.loadPath(r)}catch(t){try{r=this.defaults.amdLanguageBase+r;u=c.loadPath(r)}catch(t){i&&window.console&&console.warn&&console.warn('Select2: The language file for "'+r+'" could not be automatically loaded. A fallback will be used instead.')}}else u=n.isPlainObject(r)?new c(r):r;e.extend(u)}return e},st.prototype.set=function(t,i){var r={},u;r[n.camelCase(t)]=i;u=h._convertData(r);n.extend(!0,this.defaults,u)},new st}),t.define("select2/options",["jquery","./defaults","./utils"],function(n,t,i){function r(n,i){this.options=n;null!=i&&this.fromElement(i);null!=i&&(this.options=t.applyFromElement(this.options,i));this.options=t.apply(this.options)}return r.prototype.fromElement=function(t){function a(n,t){return t.toUpperCase()}var l=["select2"],u,e,s,o,h,c,f,r;for(null==this.options.multiple&&(this.options.multiple=t.prop("multiple")),null==this.options.disabled&&(this.options.disabled=t.prop("disabled")),null==this.options.autocomplete&&t.prop("autocomplete")&&(this.options.autocomplete=t.prop("autocomplete")),null==this.options.dir&&(this.options.dir=t.prop("dir")?t.prop("dir"):t.closest("[dir]").prop("dir")?t.closest("[dir]").prop("dir"):"ltr"),t.prop("disabled",this.options.disabled),t.prop("multiple",this.options.multiple),i.GetData(t[0],"select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),i.StoreData(t[0],"data",i.GetData(t[0],"select2Tags")),i.StoreData(t[0],"tags",!0)),i.GetData(t[0],"ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),t.attr("ajax--url",i.GetData(t[0],"ajaxUrl")),i.StoreData(t[0],"ajax-Url",i.GetData(t[0],"ajaxUrl"))),u={},e=0;e<t[0].attributes.length;e++)s=t[0].attributes[e].name,o="data-",s.substr(0,o.length)==o&&(h=s.substring(o.length),c=i.GetData(t[0],h),u[h.replace(/-([a-z])/g,a)]=c);n.fn.jquery&&"1."==n.fn.jquery.substr(0,2)&&t[0].dataset&&(u=n.extend(!0,{},t[0].dataset,u));f=n.extend(!0,{},i.GetData(t[0]),u);for(r in f=i._convertData(f))-1<l.indexOf(r)||(n.isPlainObject(this.options[r])?n.extend(this.options[r],f[r]):this.options[r]=f[r]);return this},r.prototype.get=function(n){return this.options[n]},r.prototype.set=function(n,t){this.options[n]=t},r}),t.define("select2/core",["jquery","./options","./utils","./keys"],function(n,t,i,r){var u=function(n,r){var e,o,f,s,h,c,l;null!=i.GetData(n[0],"select2")&&i.GetData(n[0],"select2").destroy();this.$element=n;this.id=this._generateId(n);r=r||{};this.options=new t(r,n);u.__super__.constructor.call(this);e=n.attr("tabindex")||0;i.StoreData(n[0],"old-tabindex",e);n.attr("tabindex","-1");o=this.options.get("dataAdapter");this.dataAdapter=new o(n,this.options);f=this.render();this._placeContainer(f);s=this.options.get("selectionAdapter");this.selection=new s(n,this.options);this.$selection=this.selection.render();this.selection.position(this.$selection,f);h=this.options.get("dropdownAdapter");this.dropdown=new h(n,this.options);this.$dropdown=this.dropdown.render();this.dropdown.position(this.$dropdown,f);c=this.options.get("resultsAdapter");this.results=new c(n,this.options,this.dataAdapter);this.$results=this.results.render();this.results.position(this.$results,this.$dropdown);l=this;this._bindAdapters();this._registerDomEvents();this._registerDataEvents();this._registerSelectionEvents();this._registerDropdownEvents();this._registerResultsEvents();this._registerEvents();this.dataAdapter.current(function(n){l.trigger("selection:update",{data:n})});n[0].classList.add("select2-hidden-accessible");n.attr("aria-hidden","true");this._syncAttributes();i.StoreData(n[0],"select2",this);n.data("select2",this)};return i.Extend(u,i.Observable),u.prototype._generateId=function(n){return"select2-"+(null!=n.attr("id")?n.attr("id"):null!=n.attr("name")?n.attr("name")+"-"+i.generateChars(2):i.generateChars(4)).replace(/(:|\.|\[|\]|,)/g,"")},u.prototype._placeContainer=function(n){n.insertAfter(this.$element);var t=this._resolveWidth(this.$element,this.options.get("width"));null!=t&&n.css("width",t)},u.prototype._resolveWidth=function(n,t){var r,u,f,i;if("resolve"==t)return r=this._resolveWidth(n,"style"),null!=r?r:this._resolveWidth(n,"element");if("element"==t)return u=n.outerWidth(!1),u<=0?"auto":u+"px";if("style"!=t)return"computedstyle"!=t?t:window.getComputedStyle(n[0]).width;if(f=n.attr("style"),"string"!=typeof f)return null;for(var o=f.split(";"),e=0,s=o.length;e<s;e+=1)if(i=o[e].replace(/\s/g,"").match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==i&&1<=i.length)return i[1];return null},u.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container);this.selection.bind(this,this.$container);this.dropdown.bind(this,this.$container);this.results.bind(this,this.$container)},u.prototype._registerDomEvents=function(){var n=this;this.$element.on("change.select2",function(){n.dataAdapter.current(function(t){n.trigger("selection:update",{data:t})})});this.$element.on("focus.select2",function(t){n.trigger("focus",t)});this._syncA=i.bind(this._syncAttributes,this);this._syncS=i.bind(this._syncSubtree,this);this._observer=new window.MutationObserver(function(t){n._syncA();n._syncS(t)});this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})},u.prototype._registerDataEvents=function(){var n=this;this.dataAdapter.on("*",function(t,i){n.trigger(t,i)})},u.prototype._registerSelectionEvents=function(){var n=this,t=["toggle","focus"];this.selection.on("toggle",function(){n.toggleDropdown()});this.selection.on("focus",function(t){n.focus(t)});this.selection.on("*",function(i,r){-1===t.indexOf(i)&&n.trigger(i,r)})},u.prototype._registerDropdownEvents=function(){var n=this;this.dropdown.on("*",function(t,i){n.trigger(t,i)})},u.prototype._registerResultsEvents=function(){var n=this;this.results.on("*",function(t,i){n.trigger(t,i)})},u.prototype._registerEvents=function(){var n=this;this.on("open",function(){n.$container[0].classList.add("select2-container--open")});this.on("close",function(){n.$container[0].classList.remove("select2-container--open")});this.on("enable",function(){n.$container[0].classList.remove("select2-container--disabled")});this.on("disable",function(){n.$container[0].classList.add("select2-container--disabled")});this.on("blur",function(){n.$container[0].classList.remove("select2-container--focus")});this.on("query",function(t){n.isOpen()||n.trigger("open",{});this.dataAdapter.query(t,function(i){n.trigger("results:all",{data:i,query:t})})});this.on("query:append",function(t){this.dataAdapter.query(t,function(i){n.trigger("results:append",{data:i,query:t})})});this.on("keypress",function(t){var i=t.which;n.isOpen()?i===r.ESC||i===r.TAB||i===r.UP&&t.altKey?(n.close(t),t.preventDefault()):i===r.ENTER?(n.trigger("results:select",{}),t.preventDefault()):i===r.SPACE&&t.ctrlKey?(n.trigger("results:toggle",{}),t.preventDefault()):i===r.UP?(n.trigger("results:previous",{}),t.preventDefault()):i===r.DOWN&&(n.trigger("results:next",{}),t.preventDefault()):(i===r.ENTER||i===r.SPACE||i===r.DOWN&&t.altKey)&&(n.open(),t.preventDefault())})},u.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled"));this.isDisabled()?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},u.prototype._isChangeMutation=function(n){var i=this,t;if(n.addedNodes&&0<n.addedNodes.length){for(t=0;t<n.addedNodes.length;t++)if(n.addedNodes[t].selected)return!0}else{if(n.removedNodes&&0<n.removedNodes.length)return!0;if(Array.isArray(n))return n.some(function(n){return i._isChangeMutation(n)})}return!1},u.prototype._syncSubtree=function(n){var t=this._isChangeMutation(n),i=this;t&&this.dataAdapter.current(function(n){i.trigger("selection:update",{data:n})})},u.prototype.trigger=function(n,t){var r=u.__super__.trigger,f={open:"opening",close:"closing",select:"selecting",unselect:"unselecting",clear:"clearing"},e,i;if((void 0===t&&(t={}),n in f)&&(e=f[n],i={prevented:!1,name:n,args:t},r.call(this,e,i),i.prevented))return void(t.prevented=!0);r.call(this,n,t)},u.prototype.toggleDropdown=function(){this.isDisabled()||(this.isOpen()?this.close():this.open())},u.prototype.open=function(){this.isOpen()||this.isDisabled()||this.trigger("query",{})},u.prototype.close=function(n){this.isOpen()&&this.trigger("close",{originalEvent:n})},u.prototype.isEnabled=function(){return!this.isDisabled()},u.prototype.isDisabled=function(){return this.options.get("disabled")},u.prototype.isOpen=function(){return this.$container[0].classList.contains("select2-container--open")},u.prototype.hasFocus=function(){return this.$container[0].classList.contains("select2-container--focus")},u.prototype.focus=function(){this.hasFocus()||(this.$container[0].classList.add("select2-container--focus"),this.trigger("focus",{}))},u.prototype.enable=function(n){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.');null!=n&&0!==n.length||(n=[!0]);var t=!n[0];this.$element.prop("disabled",t)},u.prototype.data=function(){this.options.get("debug")&&0<arguments.length&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var n=[];return this.dataAdapter.current(function(t){n=t}),n},u.prototype.val=function(n){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==n||0===n.length)return this.$element.val();var t=n[0];Array.isArray(t)&&(t=t.map(function(n){return n.toString()}));this.$element.val(t).trigger("input").trigger("change")},u.prototype.destroy=function(){this.$container.remove();this._observer.disconnect();this._observer=null;this._syncA=null;this._syncS=null;this.$element.off(".select2");this.$element.attr("tabindex",i.GetData(this.$element[0],"old-tabindex"));this.$element[0].classList.remove("select2-hidden-accessible");this.$element.attr("aria-hidden","false");i.RemoveData(this.$element[0]);this.$element.removeData("select2");this.dataAdapter.destroy();this.selection.destroy();this.dropdown.destroy();this.results.destroy();this.dataAdapter=null;this.selection=null;this.dropdown=null;this.results=null},u.prototype.render=function(){var t=n('<span class="select2 select2-container"><span class="selection"><\/span><span class="dropdown-wrapper" aria-hidden="true"><\/span><\/span>');return t.attr("dir",this.options.get("dir")),this.$container=t,this.$container[0].classList.add("select2-container--"+this.options.get("theme")),i.StoreData(t[0],"element",this.$element),t},u}),t.define("jquery-mousewheel",["jquery"],function(n){return n}),t.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults","./select2/utils"],function(n,t,i,r,u){if(null==n.fn.select2){var f=["open","close","destroy"];n.fn.select2=function(t){if("object"==typeof(t=t||{}))return this.each(function(){var r=n.extend(!0,{},t);new i(n(this),r)}),this;if("string"!=typeof t)throw new Error("Invalid arguments for Select2: "+t);var r,e=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=u.GetData(this,"select2");null==n&&window.console&&console.error&&console.error("The select2('"+t+"') method was called on an element that is not using Select2.");r=n[t].apply(n,e)}),-1<f.indexOf(t)?this:r}}return null==n.fn.select2.defaults&&(n.fn.select2.defaults=r),i}),{define:t.define,require:t.require}}(),i=t.require("jquery.select2");return n.fn.select2.amd=t,i}),function(n){if(n){var i={autocomplete:!0,sayt:!1,account:"",inputElement:"",inputFormElement:"",delay:150,minLength:3,maxResults:10,browserAutocomplete:!1,submitOnSelect:!0,queryCaseSensitive:!1,startsWith:!1,highlightWords:!0,highlightWordsBegin:!1,zindex:0,header:"",footer:""};n.fn.AdobeAutocomplete=function(r){r=n.extend(!0,i,r);n.extend(n.ui.autocomplete.prototype,{highlightMatches:function(n,t){if(r.highlightWords||r.highlightWordsBegin){var i=r.highlightWordsBegin?"^":"",u=new RegExp("("+i+n+")","i");t=t.replace(u,"<b>$1<\/b>")}return t}});var u={getAutocompleteRequest:function(t,i){for(var o=n("#sp_staged")?n("sp_staged").val():0,s=document.location.protocol=="https:"?"https:":"http:",h=o?"-stage/":"/",u=t.account.split(""),f="",e=0,r=0;r<u.length;r++)r>=2?(e++,e==2?(e=0,f+=r!=u.length-1?u[r]+"/":u[r]):f+=u[r]):f+=u[r];return"/Seo/AutoSuggest?query="+i+"&callback=?"},source:function(t,i){var u,f;t.term||(t.term="");u=this.options.getAutocompleteRequest(r,t.term);r.browserAutocomplete||n(r.inputFormElement).attr("autocomplete","off");t.term&&(f=this,n.getJSON(u,function(u){var e=null,o=r&&r.queryCaseSensitive?"":"i",s=0,h=r.maxResults?r.maxResults:1e4;e=r.startsWith?new RegExp("^"+n.ui.autocomplete.escapeRegex(t.term),o):new RegExp(n.ui.autocomplete.escapeRegex(t.term),o);u=u.filter(function(n){return!n.endsWith("excursion")&&!n.endsWith("extension")});i(n.map(u,function(n){if(e.test(n)&&s<h)return s++,{label:f.highlightMatches(t.term,n),value:n}}));r.maxResults&&(u.length=r.maxResults)}))},open:function(i){if(i.keyCode!=40&&i.keyCode!=38){var u=".ui-autocomplete.ui-menu.ui-widget.ui-widget-content.ui-corner-all";n(u+" > li:first").prepend(r.header);n(u+" > li:last").append(r.footer);n(u+" li").each(function(){t=n(this).find("a").html();t=t.replace(/\&lt;b\&gt;/g,"<b>");t=t.replace(/\&lt;\/b\&gt;/g,"<\/b>");n(this).find("a").html(t)});r.zindex&&jQuery(u).css("z-index",r.zindex)}},select:function(t,i){if(n(r.inputElement).val(i.item.value),typeof r.onSelect=="function")r.onSelect(t,i);r.submitOnSelect&&n(r.inputFormElement).submit()},search:function(n,t){if(typeof r.onSearch=="function")r.onSearch("","",n,t);return r.sayt?!1:r.autocomplete}};return u=n.extend(!0,u,r),n.extend(n.ui.autocomplete.prototype.options,u),this.autocomplete(r)};n(document).ready(function(){n(document).on("keydown",".ui-autocomplete-input",function(t){var r=function(t){for(var i,f,u=n(".ui-menu li"),r=0;r<u.length;r++)i=n(u[r]),f=i.text(),t===f?(i.css("background-color","gainsboro"),i.css("color","white")):(i.css("background-color",""),i.css("color",""))},i;if(t.keyCode===40||t.keyCode===38){if(i=t.target.value,i==="")return;r(i)}})})}}(jQuery),function(){function u(){r=t+i;e=n-r;$(".trd-eyebrow-canvas:visible").length&&(f=$(".trd-eyebrow-canvas:visible").height());$("#trd-header:visible").length&&(n=$("#trd-header:visible").height());$(".trd-tablet-header-base:visible").length&&($("body").addClass("with-tablet-header"),i=$(".trd-tablet-header-base:visible").height());$(".trd-desktop-header-base:visible").length&&($("body").removeClass("with-tablet-header"),t=$(".trd-desktop-header-base:visible").height())}var f,n,e=0,t=0,i=0,r;$(function(){u();$(window).on("resize",function(){u()})});$(function(){SubNavScroll();SetSubMenuActiveUrl()})}(),function(n){if("replaceState"in history)n.replaceHash=function(n){(""+n).charAt(0)!=="#"&&(n="#"+n);history.replaceState("","",n)};else{var t=location.hash;n.replaceHash=function(n){location.hash!==t&&history.back();location.hash=n}}}(window),function(n){var t=0;n.fn.scrolled=function(i,r){typeof i=="function"&&(r=i,i=500);var u="scrollTimer"+t++;this.scroll(function(){var t=n(this),f=t.data(u);f&&clearTimeout(f);f=setTimeout(function(){t.removeData(u);r.call(t[0])},i);t.data(u,f)})}}(jQuery);var hashSegments={video:null,image:null,modal:null,itineraryday:null,search:null},resizeCheck,Classes={Selectors:{Active:"active",ActiveOld:"active-old",ActiveLatest:"active-latest"}},_old_window_width=$("body").width();var screenXXs=window.matchMedia("(max-width:479px)"),screenXs=window.matchMedia("(max-width:767px)"),screenSm=window.matchMedia("(min-width:768px) and (max-width:1023px)"),screenMd=window.matchMedia("(min-width:1024px) and (max-width:1365px)"),screenLg=window.matchMedia("(min-width:1366px)");Array.prototype.indexOf||(Array.prototype.indexOf=function(n,t){for(var i=t||0,r=this.length;i<r;i++)if(this[i]===n)return i;return-1});oldResponsiveThreshold=960;responsiveThreshold=1136;vikingHelpers=function(){function n(n){return typeof n=="undefined"||n==null?!0:n==="false"?!1:!0}function t(t){if(typeof t=="undefined"||t==null)return!0;var i=$(t.target).attr("data-set-hash");return n(i)}function i(t){if(typeof t=="undefined"||t==null)return!0;var i=t.attr("data-set-hash");return n(i)}function r(n){return typeof n=="undefined"||n==null?!1:n==="true"?!0:!1}return{isSetHash:t,isSetHashVideo:i,getHash:n,getIgnoreScroll:r}}();activeMstfElementId="#activeMstfShare",function(n){n.fn.inputAsPriceOnly=function(){n(this).on("keypress",function(t){var i=t.keyCode||t.which,r=String.fromCharCode(i);return i==8?!0:/^[0-9]+\.?[0-9]*$/.test(n(this).val()+r)==!1?!1:void 0});return this};n.fn.inputDigitsOnly=function(){n(this).on("keypress",function(t){var i=t.keyCode||t.which,r=String.fromCharCode(i);return i==8?!0:/^\d+$/.test(n(this).val()+r)==!1?!1:void 0});return this}}(jQuery);AssociativeArray={Get:function(n,t){return typeof n=="object"&&typeof n[t]!="undefined"?n[t]:null},Push:function(n,t,i){typeof n=="object"&&(n[t]=i)}};Viewport={ByWidth:function(n,t,i,r,u){screenWidth=0;window.innerWidth>0?screenWidth=window.innerWidth:screen.width>0&&(screenWidth=screen.width);screenWidth<=n&&document.getElementById("viewport").setAttribute("content","initial-scale="+u+",width="+t+",maximum-scale="+i+",minimum-scale="+r)}};vrcIsMobile.iOS()&&$("html").addClass("ios");$(document).ready(function(){SetDomainPrefix();$.easing.def="easeInOutQuart";$(document).bind("cbox_complete",function(){resizeFixes()});$(window).focus(function(){$("body").addClass("w_focus")});$(window).blur(function(){$("body").removeClass("w_focus")});isTouch()&&$("body").addClass("touch");vrcIsPhone.any()&&$("body").addClass("mobile");modulesInit();$(".mobile_collapse h4").click(function(){if(isMobile()){var n=$(this).parent();n.hasClass("expanded")?n.removeClass("expanded"):n.addClass("expanded")}});var n=$(".datepicker");typeof n!="undefined"&&n!=null&&n.has&&typeof n.datepicker=="function"&&n.datepicker();mapZoom();videoBoxInit();accordions();dropdownList();navTabsSelectChange();addStateClasses();embedSkipToContentButton()});$(window).on("load",function(){refreshBodyDimensions();$(".section-thumbnail-header .thumbnail").removeClass("height-not-set");setPageState()});$(window).on("scroll",function(){moreDatesSetMaxPos()});$(window).on("resize",function(){runOnce();var n="#colorbox #inline_map, #colorbox .slider_inline_content, #colorbox.video_modal_content, #colorbox.static-modal-content";isMobile()&&!isMobile(_old_window_width)&&($("#form_order_brochures").find(".country, .address, .city-state-zip, #send_to_friend_form").css({display:"none"}),$(n).length<1&&$.colorbox.resize({width:modals_mobile_width}),setVideoSliderScroll(),$("#form_order_brochures").find(".country, .address, .city-state-zip, #send_to_friend_form").css({display:""}));!isMobile()&&isMobile(_old_window_width)&&($("#form_order_brochures").find(".country, .address, .city-state-zip, #send_to_friend_form").css({display:"none"}),$("#fac, #order_brochure").hasClass("module_open")&&$("#fac, #order_brochure").addClass("module_open"),$(n).length<1&&($("#yt_modal_player_sizer").length>0?$.colorbox.resize({width:responsiveThreshold}):$.colorbox.resize({width:modals_desktop_width})),setVideoSliderScroll(),$("#form_order_brochures").find(".country, .address, .city-state-zip, #send_to_friend_form").css({display:""}));_old_window_width=$("body").width()});$(window).on("load",function(){if($("body.destinations").length){var n=window.location.hash;n=n.substring(1,n.length);$(".hero-content .raq-link").length&&n.length&&n==="raq"&&$(".hero-content .raq-link button").trigger("click")}});$(document).ready(function(){function n(){var n=document.getElementById("lpChat");n&&setTimeout(function(){var n=document.querySelector(".lp_select_field");n&&n.parentNode.classList.add("arrowDown")},100)}function t(n,t){window.console&&window.JSON&&console.log("lpp "+JSON.stringify(n)+" triggered by: "+JSON.stringify(t))}(setInterval(function(){$("body > .LPMcontainer.LPMoverlay > .animate-from-right").addClass("open")},1e3),window.lpTag!==undefined&&lpTag.events!==undefined&&lpTag.events.bind!==undefined)&&(window.fakeChatButton=null,lpTag.events.bind({eventName:"conversationInfo",appName:"lpUnifiedWindow",func:n,async:!0,triggerOnce:!1}),lpTag.events.bind({eventName:"state",appName:"lpUnifiedWindow",func:t,async:!0,triggerOnce:!1}))});bpoppages=[];$(document).ready(function(){var n=GetSessCookie(),t=GetTrafficCookie(),i=GetPermCookie();vrcCookies.sessCookie=n;vrcCookies.trafficCookie=t;vrcCookies.permCookie=i;$("body").on("tealium:loaded",function(){window.setTimeout(function(){VTealiumConsentMangager.isCategoryEnabled(5)&&(vrcCookies.sessCookie.pd=vrcCookies.sessCookie.pd+1,SaveSessCookie(vrcCookies.sessCookie),LaunchPopups(),LaunchTackingPricingForm())},200)});$(document.body).on("mousedown.traffic","a",function(){var t=$(this),f,r,i,n,u;if(t!=null&&t.size()>0)try{if(n=t.attr("href"),viking.utilities.isUndefinedNullOrEmpty(n))return;if(n.indexOf(window.location.hostname)>-1)return;for(f=!1,r=0;r<prodHostNames.length;r++)if(n.toLowerCase().indexOf(prodHostNames[r].toLowerCase())>-1){f=!0;break}if(!f)return;if(i=$.cookies.get("CID"),viking.utilities.isUndefinedNullOrEmpty(i)&&(i=getParameter("CID")),n=t.attr("href"),viking.utilities.isUndefinedNullOrEmpty(i)||(n=updateQueryStringParamForUrl(n,"CID",i),t.attr("href",n)),u=$.cookies.get("vrc_ts"),viking.utilities.isUndefinedNullOrEmpty(u)||u=="_default")return;n=t.attr("href");n=updateQueryStringParamForUrl(n,"vrc_ts",u);t.attr("href",n)}catch(e){console&&console.log&&console.log(e)}})});BSModalManager=new function(){var n=this;n.content="";n.bsModalprefix="";n.bsModalsuffix="";n.BSModallaunch=function(t){n.content=$.trim(t);n.bsModalprefix="";n.bsModalprefix+='<div class="modal-content">';n.bsModalprefix+='    <div class="modal-header">';n.bsModalprefix+='        <div class="hidden-print custom-modal-close-button">';n.bsModalprefix+='            <button aria-label="close opened modal, and go back to main page content." type="button" data-dismiss="modal" class="close">';n.bsModalprefix+='                <span class="icon icon-close" aria-hidden="true"><\/span>';n.bsModalprefix+="                &nbsp;";n.bsModalprefix+='                <span class="close-txt">CLOSE<\/span>';n.bsModalprefix+="            <\/button>";n.bsModalprefix+="        <\/div>";n.bsModalprefix+="    <\/div>";n.bsModalprefix+='    <div class="modal-body">';n.bsModalsuffix="";n.bsModalsuffix+="    <\/div>";n.bsModalsuffix+="<\/div>";n.dropContentInModalAndShow("#bsModal .modal-dialog",n.bsModalprefix,n.bsModalsuffix,n.content)};n.dropContentInModalAndShow=function(n,t,i,r){var u=$(r).find(".contentWrapper").html();typeof u=="undefined"&&(u=$(r).find(".container-fluid").parent().html());$(n).html(t+u+i);$("#bsModal").modal("show")}};popformloaded=!1;$(window).resize(function(){popformloaded&&$.colorbox.resize({width:GetColorboxWidth()})});window.vrcGetFixedMinHeaderOffset=function(){return alertOffset=$(".page-alert").is(":visible")?$(".page-alert").outerHeight(!0):0,headerOffset=$("#trd-header").outerHeight()+alertOffset};window.vrcGetFixedTotalHeaderOffset=function(){return alertOffset=$(".page-alert").is(":visible")?$(".page-alert").outerHeight(!0):0,headerOffset=$("#cruise-hdr").length?$("#trd-header").outerHeight()+$("#cruise-hdr").outerHeight()+alertOffset:$("#trd-header").outerHeight()+alertOffset};window.vcDebounce=function(n,t,i){var r;return function(){var u=this,f=arguments,e=function(){r=null;i||n.apply(u,f)},o=i&&!r;clearTimeout(r);r=setTimeout(e,t);o&&n.apply(u,f)}};window.vrcSetBufferHeight=vcDebounce(function(){$("#cruise-hdr").css("top",vrcGetFixedMinHeaderOffset()+"px");var n=vrcGetFixedTotalHeaderOffset()+"px";$(".hdr-canvas").css("height",n);$("#trd-body-mover").css("top",n)},250,!1);$(function(){vrcSetBufferHeight();$(window).on("load resize",function(){vrcSetBufferHeight()})});String.prototype.toHHMMSS=function(){sec_numb=parseInt(this,10);var t=Math.floor(sec_numb/3600),i=Math.floor((sec_numb-t*3600)/60),n=sec_numb-t*3600-i*60;return n<10&&(n="0"+n),i+":"+n};YtInfo={apiLoaded:!1,currentVideo:-1,context:null,stored_videos:[],videoInfo:[],addVideoInfo:function(n){YtInfo.videoInfo[n]={}},setVideoInfoPropertiesFromElement:function(n,t){YtInfo.videoInfo[t].videoID=n.attr("data-video-id");YtInfo.videoInfo[t].title=n.attr("data-video-title");YtInfo.videoInfo[t].description=n.attr("data-video-subtitle");YtInfo.videoInfo[t].imageElement=n.find("img")[0].outerHTML},setVideoInfoPropertiesFromApi:function(n,t){var f=arguments[2],i,r,u;if(typeof gapi!="undefined"&&typeof gapi.client!="undefined"&&typeof gapi.client.youtube!="undefined"&&typeof n!="undefined"){if(i=[],typeof YtInfo.videoInfo!="undefined")for(r=0;r<YtInfo.videoInfo.length;r++)currentVideoId=YtInfo.videoInfo[r].videoID,typeof currentVideoId!="undefined"&&i.push(currentVideoId);i.length>0&&(u=gapi.client.youtube.videos.list({id:i.join(","),part:n}),u.execute(function(n){typeof n.error=="undefined"&&($.each(n.items,function(){matchingYtObjectOrdinal=YtInfo.getVideoInfoOrdinalById(this.id);matchingYtObjectOrdinal!=null&&(YtInfo.videoInfo[matchingYtObjectOrdinal].data=this)}),t(f))}))}},setVideoDescription:function(n){var t=YtInfo.formatDuration(YtInfo.videoInfo[n].data.contentDetails.duration);YtInfo.context.find(".video-playlist-slide li[data-playlist-id="+n+"] .video-duration").text(" ("+t+")");YtInfo.context.find(".video-playlist-tile li:eq("+n+") .video-duration").text(" ("+t+")");YtInfo.context.find(".contentColumn:eq("+n+") .video-duration").text(" ("+t+")");YtInfo.context.find(".video-expander-container:eq("+n+") .video-duration").text(" ("+t+")");YtInfo.stored_videos[n]="";YtInfo.stored_videos[n]+='<li><a href="#" class="" data-video-id="'+YtInfo.videoInfo[n].videoID+'" ';YtInfo.stored_videos[n]+='data-video-title="'+YtInfo.videoInfo[n].title+'" ';YtInfo.stored_videos[n]+='data-video-subtitle="'+YtInfo.videoInfo[n].description+'" ><span class="mobile-play-button"><\/span>';YtInfo.stored_videos[n]+=YtInfo.videoInfo[n].imageElement;YtInfo.stored_videos[n]+='<span class="playlist-video-title">'+YtInfo.videoInfo[n].title;YtInfo.stored_videos[n]+='<span class="video-duration"> ('+t+")<\/span><\/span><\/a><\/li> "},setVideoDescriptionForAll:function(){if(typeof YtInfo.videoInfo!="undefined")for(var n=0;n<YtInfo.videoInfo.length;n++)YtInfo.setVideoDescription(n)},getVideoInfoOrdinalById:function(n){if(typeof YtInfo.videoInfo!="undefined")for(var t=0;t<YtInfo.videoInfo.length;t++)if(currentVideoId=YtInfo.videoInfo[t].videoID,typeof currentVideoId!="undefined"&&currentVideoId==n)return t;return null},formatDuration:function(n){var t=n.match(/\d+/g);return n.indexOf("M")>=0&&n.indexOf("H")==-1&&n.indexOf("S")==-1&&(t=[0,t[0],0]),n.indexOf("H")>=0&&n.indexOf("M")==-1&&(t=[t[0],0,t[1]]),n.indexOf("H")>=0&&n.indexOf("M")==-1&&n.indexOf("S")==-1&&(t=[t[0],0,0]),seconds=0,t.length==3&&(seconds=seconds+parseInt(t[0])*3600,seconds=seconds+parseInt(t[1])*60,seconds=seconds+parseInt(t[2])),t.length==2&&(seconds=seconds+parseInt(t[0])*60,seconds=seconds+parseInt(t[1])),t.length==1&&(seconds=seconds+parseInt(t[0])),seconds.toString().toHHMMSS()},addListeners:function(){YtInfo.scrollSlider()},scrollSlider:function(){var t,n,i;YtInfo.scollInterval;YtInfo.scrollButton=!1;YtInfo.mouseX=0;t=$(".video-playlist-slide ul li").length*30;t>400&&(t=400);$(".scrolldot").css({width:500-t});n=0;$(".video-playlist-mover ul>li").each(function(){n+=$(this).width()});i=n-$(".video-playlist-mover").width();i<20&&($(".video-playlist-slide").addClass("video-playlist-noscroll"),$(".scrollslide").css({display:"none"}));$(".video-playlist-mover").scroll(function(){YtInfo.scrollButton||(n=0,$(".video-playlist-mover ul>li").each(function(){n+=$(this).width()}),i=n-$(".video-playlist-mover").width(),$(".scrolldot").css({left:$(".video-playlist-mover").scrollLeft()/i*($(".video-playlist-mover").width()-$(".scrolldot").width())}))});isTouch()?($(".video-scroll-next").mousedown(function(n){n.preventDefault();var t=0;$(".video-playlist-mover li").each(function(){t+=$(this).width()});t=t/$(".video-playlist-mover li").length;$(".video-playlist-mover").animate({scrollLeft:$(".video-playlist-mover").scrollLeft()+t},400)}),$(".video-scroll-prev").mousedown(function(n){n.preventDefault();var t=0;$(".video-playlist-mover li").each(function(){t+=$(this).width()});t=t/$(".video-playlist-mover li").length;$(".video-playlist-mover").animate({scrollLeft:$(".video-playlist-mover").scrollLeft()-t},400)}),$(".video-scroll-next, .video-scroll-prev").mouseup(function(){clearInterval(YtInfo.scollInterval)})):($(".video-scroll-next").mouseenter(function(n){n.preventDefault();YtInfo.scollInterval=setInterval("$('.video-playlist-mover').scrollLeft($('.video-playlist-mover').scrollLeft() +10)",10)}),$(".video-scroll-prev").mouseenter(function(n){n.preventDefault();YtInfo.scollInterval=setInterval("$('.video-playlist-mover').scrollLeft($('.video-playlist-mover').scrollLeft() - 10)",10)}),$(".video-scroll-next, .video-scroll-prev").mouseleave(function(){clearInterval(YtInfo.scollInterval)}),$(".video-scroll-next, .video-scroll-prev").addClass("enabled").click(function(n){n.preventDefault()}))},init:function(n){if(YtInfo.context=$(n),n=="#bodyMover,#trd-body-mover"&&typeof ytag=="undefined"){ytag=document.createElement("script");ytag.src="//www.youtube.com/iframe_api";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(ytag,t)}YtInfo.addListeners()}};$(document).ready(function(){YtInfo.init("#bodyMover,#trd-body-mover")});var playerTrackingInfo={MediaName:"",MediaPlayerName:"YouTubePlayer",VideoPlayedPage:""},playerHasStarted=!1,playerTrackingIsMediaCapable=!1;vFrmBeaconMgr=new function(){var n=this,i=null,t="",r="",u=!1,f=!1;n.init=function(e,o,s,h,c){t=e;r=o;i=s;u=h;c&&(f=c);n.getHTML()};n.getHTML=function(){var e=t;u&&(e+=(t.indexOf("?")>0?"&":"?")+"extendTempData=1");$.get(e,function(t){i!=null&&(i.call(this,t,r),f||n.createBeacon())},"html")};n.createBeacon=function(){var n=$("#iTBW"),i=Math.random()+"",r=Math.floor(i*1e13),u=t.indexOf("?")>0?"&":"?";successHtml=$("<div><\/div>");successHtml.html('<iframe src="'+t+u+"ord="+r+'" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:90px; height:0px" allowtransparency="true"> <\/iframe>');n.empty().append(successHtml)}};$(document).ready(function(){$.colorbox.settings.speed=500;$.colorbox.settings.initialWidth=200;$.colorbox.settings.initialHeight=200;$.colorbox.settings.transition="elastic";$.colorbox.settings.reposition=!1;$.colorbox.settings.current="{current}/{total}";$.colorbox.settings.photo=!1;$.colorbox.settings.trapFocus=!1;$(document).bind("cbox_cleanup",function(){$("#cboxBack").remove();$("#modal_loader").remove()});$(document).bind("cbox_closed",function(){$(".inception_modal").removeClass("inception_modal");$("#cboxBack").remove()});$("#modals").length<1&&$("body").append('<div id="modals"><\/div>');$("body").on("click","a.initialise-yt-video",function(n){var t,i;SetHashValueOfVideo($(this));n.preventDefault();resetYTModalPlayer();loadYTModalPlayerByElement($(this));t=$(this).next(".hidden-content-block");$("#modal-header-content").html(t.find(".modal-header-content").html());$(".modal-social #modal-share-content").html(t.find(".modal-share-content").html());i=$(".modal-video .video-toggle li:visible a");i.attr("href")=="#cbox-mainVideo"&&i.trigger("click");initModals($("#cboxLoadedContent"))});initModals($("body"));$("a.recipe_details_link, a.connect_form_link").click(function(n){n.preventDefault();var t=$(this),i=t.attr("href")||t.attr("data-href");SubPageManager.clearModalLoader();SubPageManager.showLoading();vFrmBeaconMgr.init(i,t,SubPageBootstrapModalCallBack,!1)});$("#bsModal").on("keydown",".modal-video .icon-email",function(n){(n.key==="Tab"||n.keyCode===KEYCODE_TAB)&&(n.preventDefault(),$(n.target).closest(".modal-header").next(".modal-body").find("iframe").focus())})});var modalsLogger=function(){var n=!1,t=function(t){n&&console.log(t)};return{log:t}}(),player_interaction=!1,player,modals_mobile_width="100%",modals_desktop_width=920,playerHasStarted=!1,isPaused=!1,isFirstRun=!0,videoModalGroupsCount=0,shipGalleryStartSlideNumber=0,DynamicModalsData={ModalId:null,Data:null,ClassName:null,ItemId:null,TemplateName:null,TemplateNameEncoded:null,TemplateId:null,TileCaptionTitle:null,IsIncluded:null,Collections:{}};vrcMap=new function(){var n=this;n.centerPosition=null;n.libraryLoaded=!1;n.mapObject=null;n.mapSettings=null;n.infoWindow=null;n.markers=[];n.loaded=function(){n.libraryLoaded=!0};n.addMarker=function(t,i,r,u){if(n.libraryLoaded){var f=new google.maps.Marker({position:new google.maps.LatLng(i,r),map:n.mapObject,label:t});n.markers.push(f);u!=null&&u.length>0&&(n.infoWindow==null&&(n.infoWindow=new google.maps.InfoWindow),f.addListener("click",function(){n.infoWindow!=null&&(n.infoWindow.setContent(u),n.infoWindow.open(n.mapObject,f))}))}};n.setMapOnAll=function(t){for(var i=0;i<n.markers.length;i++)n.markers[i].setMap(t)};n.clearMarkers=function(){n.setMapOnAll(null)};n.showMarkers=function(){n.setMapOnAll(n.mapObject)};n.deleteMarkers=function(){n.clearMarkers();n.markers=[]};n.createMap=function(){if(n.libraryLoaded&&n.mapSettings!=null){$(".map-placeholder").first().append($("#googleMap"));n.mapObject==null&&(n.mapObject=new google.maps.Map(document.getElementById("googleMap"),n.mapSettings));n.showMarkers();var t=new google.maps.LatLngBounds;for(i=0;i<n.markers.length;i++)t.extend(n.markers[i].position);n.mapObject.setCenter(t.getCenter());n.markers.length>1?n.mapObject.setZoom(15):n.mapObject.setZoom(11);n.mapObject.fitBounds(t);n.mapObject.panToBounds(t)}};n.hideMap=function(){n.deleteMarkers();$("#mapWrapper").append($("#googleMap"))}};$(document).on("shown.bs.modal","#bsModal",function(){switch(DynamicModalsData.ClassName){case"modal-video":ModalHandlers.VideoModal();break;case"modal-gallery":ModalHandlers.ModalGallery();break;case"raq-modal modal-static-content":ModalHandlers.RaqPageShown()}initModals($("#bsModal"));setMaxHeight();vrcMap.createMap();$(window).trigger("resize")});$(document).on("shown.bs.modal","#bsModal, #filtersModal, #modal-calendar, #modal-atii, #modal-ccc, #modal-cruise-map-0, .modal.fade.in",function(){$(this).find(".close").length>0&&$(this).find(".close")[0].focus();var t=document.querySelector("#"+$(this)[0].id),n=t.querySelectorAll('a[href], a[role="button"], button, textarea, input[type="text"], input[type="radio"], input[type="checkbox"], select'),i=n[0],r=n[n.length-1],u=9;t.addEventListener("keydown",function(n){(n.key==="Tab"||n.keyCode===u)&&(n.shiftKey?document.activeElement===i&&(r.focus(),n.preventDefault()):document.activeElement===r&&(i.focus(),n.preventDefault()))})});$(document).on("hidden.bs.modal","#bsModal",function(n){resetHeader();hashSegments.video=null;hashSegments.image=null;hashSegments.modal=null;refreshHashSegments(n);closeVideo();vrcMap.hideMap();switch(DynamicModalsData.ClassName){case"raq-modal modal-static-content":ModalHandlers.RaqPageHidden()}$("#bsModal .modal-dialog").removeClass(DynamicModalsData.ClassName).html("");DynamicModalsData.ClassName="";$(window).trigger("resize")});ModalHandlers={VideoModal:function(){var t,i,n;$(".modal-video").on("shown.bs.tab",function(){setMaxHeight()});t=!1;hashSegments.video!=null&&hashSegments.video!=""&&(i=$('a.initialise-yt-video[data-video-lookup-id="'+hashSegments.video+'"]'),i.length!==0&&(i.eq(0).click(),t=!0));t===!1&&(n=$("body").find("span.initialise-yt-video"),n.length>0&&(loadYTModalPlayerByElement(n.eq(0)),SetHashValueOfVideo(n.eq(0))))},ModalGallery:function(){var n=$("#bsModal .modal-gallery .flexslider-slides"),t=$("#bsModal .modal-gallery .flexslider-carousel");t.flexslider({animation:"slide",controlNav:!1,animationLoop:!1,slideshow:!1,itemWidth:129,itemMargin:16,asNavFor:n});n.flexslider({animation:"fade",controlNav:!1,animationLoop:!1,slideshow:!1,sync:t,start:function(){if(setHashSegments(),hashSegments.image!=null&&hashSegments.image!="null"){var n=$('.slides-item[data-lookup-id="'+hashSegments.image+'"]');n.length!=0&&n.eq(0).click()}},after:function(n){var t=null,r=n.data("flexslider").currentSlide,i;r>=0&&(t=n.slides.eq(r));t!=null&&(i=t.find(".hidden-content-block"),$("#modal-header-content").html(i.find(".modal-header-content").html()),$(".modal-social #modal-share-content").html(i.find(".modal-share-content").html()),initModals($("#cboxLoadedContent")))}});$("#bsModal .modal-gallery .icon-expand").parent().on("click",function(){var n=$(this).data("img-url");$("#bsModal").addClass("cbox-fullsize-img");$("#bsModal .modal-content").prepend('<div class="modal-img-fullsize"><a class="close" href="javascript:void(0);"><span class="icon icon-close"><\/span><\/a><img src="'+n+'" /><\/div>');$("#bsModal .modal-img-fullsize .close").on("click",function(){$("#bsModal").removeClass("cbox-fullsize-img");$(".modal-img-fullsize").remove()})})},SubPageShow:function(){},SubPageShown:function(){},RaqPageShown:function(){$("#bsModal .modal-dialog").removeClass("modal-lg");var n={};n.divId="vrcraqrecaptcha";n.formId="request_quote_form";VRCCaptcha.render(n);typeof bt_showChatHTML!="undefined"&&typeof bt_chatAvailable!="undefined"&&bt_chatAvailable&&$("#request_quote_form .live-chat").removeClass("hide");$("#EmailAddress").keyup(function(){return!1})},RaqPageHidden:function(){$("#bsModal .modal-dialog").addClass("modal-lg")}};intervalDaemon=function(n,t){function o(n){return n&&{}.toString.call(n)==="[object Function]"}var r=0,u=0,f,i=[];i.push(75);i.push(50);i.push(25);i.push(10);var s=function(n){return n/u*100},e=function(){r!==0&&(modalsLogger.log("Interval Cleared"),window.clearInterval(r))},h=function(){var h,c;if(typeof t!="undefined"&&t!==null&&o(t.getPlayerState)){var l=n.MediaName,a=t.getPlayerState(),r=t.getCurrentTime();(u=t.getDuration(),a===YT.PlayerState.PLAYING)&&(r===f&&e(),f=r,h=s(r),modalsLogger.log(h),h>=i[i.length-1]&&(c=i.pop(),modalsLogger.log("GA PROGRESS EVENT: "+c),typeof ga!="undefined"&&ga("send","event","Video","video_progress_"+c+"perc",l,Math.round(r))))}},c=function(){e();r=window.setInterval(h,2e3)};return{trackVideoProgress:c}};SocialShare={Facebook:function(){var n="https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(location.href);window.open(n,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600")},Twitter:function(n){var t="https://twitter.com/share?original_referer=https%3A%2F%2Fabout.twitter.com%2Fresources%2Fbuttons&text="+encodeURIComponent(n)+"&tw_p=tweetbutton&url="+encodeURIComponent(location.href);window.open(t,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600")},GooglePlus:function(){var n="https://plus.google.com/share?url={"+encodeURIComponent(location.href)+"}";window.open(n,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600")}};SubPageManager=new function(){var n=this;n.content="";n.link=null;n.launch=function(t,i,r){var u,f,e;n.content=$.trim(t);n.link=i;u="";u+='<div class="modal-content">';u+='    <div class="modal-header">';u+='        <div class="hidden-print custom-modal-close-button">';u+='            <button aria-label="close opened modal, and go back to main page content." type="button" data-dismiss="modal" class="close">';u+='                <span class="icon icon-close" aria-hidden="true"><\/span>';u+="                &nbsp;";u+='                <span class="close-txt">CLOSE<\/span>';u+="            <\/button>";u+="        <\/div>";u+="    <\/div>";u+='    <div class="modal-body">';f="";f+="    <\/div>";f+="<\/div>";n.content.indexOf('class="modal-content"')>-1&&(u="",f="");n.dropInModalContent("#bsModal .modal-dialog",u,f);e=vikingHelpers.getHash($(i).attr("data-set-hash"));i==null&&$("#bsModal").attr("data-set-hash")==="false"&&(e=!1);n.setShareContext(e);e||$("#bsModal").attr("data-set-hash",!1);r!=null&&r.call(n)};n.dropInModalContent=function(t,i,r){var u="";n.link!=null?n.link.hasClass("room_details_link")||n.link.hasClass("featured_room_details_link")||n.link.hasClass("room__detailslink")||n.link.hasClass("sub_room_details_link")||n.link.hasClass("stateroom_type_link")||n.link.hasClass("staterooms_details_link")||n.link.hasClass("ship_gallery_slideshow")||n.link.hasClass("fare-info-link")||n.link.hasClass("recipe_details_link")||n.link.hasClass("connect_form_link")?u=n.content:n.link.hasClass("enlarge_image_link")?u=$(n.content).find(".enlarge-image").html():n.link.hasClass("deckplan_modal_rivers")?(u=$(n.content).find(".deckplans_widget"),$(u).find(".deck_map").addClass("img-responsive").attr("style","width:100%;"),u=$(u).html()):u=n.link.hasClass("deckplan_modal")?$(n.content).find(".deckplans").parent().parent().parent().parent().parent().html():n.content.indexOf("transport-wrapper")>-1?$(n.content).find(".transport-wrapper").html():$(n.content).find(".contentWrapper").html():u=n.content.indexOf("transport-wrapper")>-1?$(n.content).find(".transport-wrapper").html():$(n.content).find(".contentWrapper").html();typeof u=="undefined"&&(u=$(n.content).find(".container-fluid").first().wrapAll("<div>").parent().html());$(t).html(i+u+r).addClass(DynamicModalsData.ClassName)};n.subPageShowDefault=function(){$("#bsModal").modal("show");SetHashValueOfModal(DynamicModalsData.ModalId);n.link.hasClass("form_modal")&&setTimeout(function(){$.validator.unobtrusive.parse("form");formInit($("#bsModal .modal-dialog"));modulesInit();$("#bsModal").modal("handleUpdate")},100);var t=n.link.attr("href");n.link.hasClass("explore_more")&&($(".inception_modal").removeClass("inception_modal"),n.link.addClass("inception_modal"),YtInfo.context=$("#colorbox"),YtInfo.stored_videos=[],$("#inline_packages .video-playlist-tile a").each(function(n){YtInfo.addVideoInfo(n);YtInfo.setVideoInfoPropertiesFromElement($(this).attr("data-video-id"),n);YtInfo.setVideoInfoPropertiesFromApi("contentDetails",YtInfo.setVideoDescription,n)}));$(n.content).find(".dates_and_pricing").length>0&&room_scrolling_init($("#bsModal .modal-dialog"));$(n.content).find(".requestQuote").length>0&&($("#ModalPreloadCountry").val(t),preselectRequestQuoteCountry(t));setTimeout(function(){if(initModals($("#bsModal .modal-dialog")),videoBoxInit(),accordions(),typeof n.link.attr("data-room-type")!="undefined"&&typeof n.link.attr("data-room-type")!=!1)var t=parseFloat(n.link.attr("data-room-type"))},100)};n.clearModalLoader=function(){$("#bsModal .modal-dialog").removeClass("modal-lg modal-sm");$("#modal_loader").length<1&&$("#modals").append('<div id="modal_loader"><\/div>')};n.showLoading=function(){$("#bsModal .modal-dialog").addClass("modal-sm");$("#bsModal .modal-dialog").html('<div class="modal-content"><div class="modal-body"><div class="container-fluid"><div class="row"><div class="col-md-offset-4 col-md-4" style="text-align:center"><img alt="" style="margin-top:30px" src="/content/images/busy.gif"/><\/div><div class="col-md-12" style="text-align:center"><div class="modal-processing__text">Please wait...<\/div><\/div><\/div><\/div><\/div><\/div>');adjustHeader();$("#bsModal").modal("show")};n.colorboxShow=function(){$.colorbox({inline:!0,href:"#modal_loader",width:isMobile()?"100%":920,className:"subpage_loaded",onComplete:function(){n.link.hasClass("form_modal")&&setTimeout(function(){formInit($("#cboxContent"));modulesInit();$.fn.colorbox.resize()},100);var t=n.link.attr("href");n.link.hasClass("explore_more")&&($(".inception_modal").removeClass("inception_modal"),n.link.addClass("inception_modal"),YtInfo.context=$("#colorbox"),YtInfo.stored_videos=[],$("#inline_packages .video-playlist-tile a").each(function(n){YtInfo.addVideoInfo(n);YtInfo.setVideoInfoPropertiesFromElement($(this).attr("data-video-id"),n);YtInfo.setVideoInfoPropertiesFromApi("contentDetails",YtInfo.setVideoDescription,n)}));$(n.content).find(".dates_and_pricing").length>0&&room_scrolling_init($("#cboxContent"));$(n.content).find(".requestQuote").length>0&&($("#ModalPreloadCountry").val(t),preselectRequestQuoteCountry(t));setTimeout(function(){if(initModals($("#cboxContent")),videoBoxInit(),accordions(),typeof n.link.attr("data-room-type")!="undefined"&&typeof n.link.attr("data-room-type")!=!1){var t=parseFloat(n.link.attr("data-room-type"));$("#colorbox").addClass("overlay_"+t)}},100)}})};n.setShareContext=function(n){var r=GetActiveMstfShareElement(),e=$(".microSendTF"),t=null;if(r!=null&&(t=$(".microSendTF[data-id='"+r+"']"),t!=null&&t.length>1&&(t=t.eq(0))),t!=null){var i=t.find(".mstfHeader"),u=t.find(".mstfBody"),f=t.find(".mstfImage");i.length&&($("#ContextHeader").length&&$("#ContextHeader").val(i.text()),$("#referring_header").length&&$("#referring_header").text(i.text()));$("#ContextBody").length&&u.length&&$("#ContextBody").val(u.text());$("#ContextImage").length&&f.length&&$("#ContextImage").val(f.text());$("#ContextUrl").length&&$("#ContextUrl").val(window.location.href)}n&&typeof ClearHashValueOfVideo=="function"&&ClearHashValueOfVideo()}};$(document).bind("cbox_open",function(){$("body").addClass("modalOpen")}).bind("cbox_closed",function(){$("body").removeClass("modalOpen")});modals=function(n){function t(n,t,i,r,u,f){var e="";return typeof n!="undefined"&&n!==null&&(e+='  <ul class="list-inline social-links">',e+='      <li><a aria-label="Share on Facebook" class="background-icon icon-facebook" href="#" onclick="SocialShare.Facebook();return false;" data-toggle="tooltip" data-placement="top" data-original-title="Share on Facebook"><\/a><\/li>',n.length>0&&(e+='  <span class="microSendTF" data-id="'+n+'">',e+='       <span class="mstfType">Video<\/span>',e+='\t    <span class="mstfHeader">'+t+"<\/span>",e+='       <span class="mstfBody">'+i+"<\/span>",e+='\t    <span class="mstfImage">'+r+"<\/span>",e+="   <\/span>"),typeof f!="undefined"&&(e+='  <li><a aria-label="Send over Email" rel="nofollow" class="subpage_modal form_modal background-icon icon-email dimension-30x30" href="'+f+'" onclick="SetActiveMstfShareElement(\''+u+'\')" data-toggle="tooltip" data-placement="top" data-original-title="Send over Email"><\/a><\/li>'),e+="  <\/ul>"),e}function u(n,i){var r="",u=n.attr("data-playlist-title-text");return i.length>1&&(r+='  <div role="tabpanel" class="tab-pane fade" id="cbox-relatedVideos">',r+='      <div class="container-fluid">',typeof u!="undefined"&&(r+='      <div class="row">',r+='          <div class="col-xs-12">',r+="              <h4>MAIN VIDEO<\/h4>",r+="          <\/div>",r+="      <\/div>"),r+='           <div class="row">',$.each(i,function(n){var e=$(this).attr("data-video-id"),i=$(this).attr("data-video-title"),f=$(this).attr("data-video-image-url"),u=$(this).attr("data-video-subtitle"),o=$(this).attr("data-video-lookup-id"),s=$(this).attr("data-video-hash-value"),h=n==0?"active":"";r+='          <div class="col-xs-6 col-sm-4">';r+='               <a class="initialise-yt-video '+h+'" data-video-id="'+e+'" data-video-title="'+i+'"  data-video-lookup-id="'+o+'" data-video-hash-value="'+s+'">';r+='                   <div class="thumbnail" style="height: 0px;">';typeof f!="undefined"&&(r+='                  <div class="thumbnail-img">',r+='                      <img src="'+f+'">',r+='                      <div class="video-thumb-play-lg"><\/div>',r+="                  <\/div>");r+='                        <div class="caption">';typeof i!="undefined"&&(r+="                      <h3>"+i+"<\/h3>");typeof u!="undefined"&&(r+="                        <p>"+u+"<\/p>");r+="                      <\/div>";r+="                  <\/div>";r+="              <\/a>";r+='              <div class="hidden-content-block">';r+='                  <div class="modal-header-content">';typeof i!="undefined"&&(r+='                  <h2 class="modal-title">'+i+"<\/h2>");r+='                      <div class="modal-description">';typeof u!="undefined"&&(r+="                      <p>"+u+"<\/p>");r+="                      <\/div>";r+="                  <\/div>";r+='                  <div class="modal-share-content">';r+=t($(this).attr("data-video-id"),$(this).attr("data-mstf-header"),$(this).attr("data-mstf-body"),$(this).attr("data-mstf-image"),$(this).attr("data-mstf-share-id"),$(this).attr("data-connect-and-share-href"),$(this).attr("data-twitter-text"));r+="                  <\/div>";r+="              <\/div>   ";r+="          <\/div>   "}),r+="          <\/div>",r+="      <\/div>",r+="  <\/div>"),r}function f(n,i,r){var u="",f=n.attr("data-video-title"),e=n.attr("data-video-subtitle"),o=n.attr("data-playlist-title-text");return u+='<div class="row">',u+='    <div class="col-xs-12">',u+='        <div id="modal-header-content">',typeof f!="undefined"&&(u+='        <h2 id="modal-label-by" class="text-uppercase modal-title">'+f+"<\/h2>"),u+='            <div class="modal-description">',typeof e!="undefined"&&(u+="            <p>"+e+"<\/p>"),u+="            <\/div>",u+="        <\/div>",u+='        <div id="modal-related-content" style="display:none">',u+='            <h2 class="text-uppercase modal-title">Related videos for '+r+"<\/h2>",u+="        <\/div>",u+="   <\/div>",i.length>1&&(u+='<div class="col-xs-12 text-right">',u+='    <div class="video-toggle">',u+='        <ul class="list-inline" role="tablist">',u+='            <li role="presentation" class="active"><a onclick="ToggleVideo(true);" href="#cbox-mainVideo" aria-controls="mainVideo" role="tab" data-toggle="tab" aria-expanded="true">CURRENT VIDEO&nbsp;&nbsp;<span class="icon icon-main-video"><\/span><\/a><\/li>',u+='            <li role="presentation" class="">',u+='                <a onclick="pauseVideo();ToggleVideo(false);" href="#cbox-relatedVideos" aria-controls="relatedVideos" role="tab" data-toggle="tab" aria-expanded="false">',typeof o!="undefined"&&(u+="                    "+o),u+='                    &nbsp;&nbsp;<span class="icon icon-related-videos"><\/span>',u+="                <\/a>",u+="            <\/li>",u+="        <\/ul>",u+="    <\/div>",u+="<\/div>"),u+='    <div class="col-xs-12 hidden-print">',u+='        <div class="modal-social pull-right">',u+='            <div id="modal-share-content">',u+=t(n.attr("data-video-id"),n.attr("data-mstf-header"),n.attr("data-mstf-body"),n.attr("data-mstf-image"),n.attr("data-mstf-share-id"),n.attr("data-connect-and-share-href"),n.attr("data-twitter-text")),u+="            <\/div>",u+="        <\/div>",u+="    <\/div>",u+"<\/div>"}function e(n,t){var r=n.attr("data-video-title"),f=n.attr("data-video-id"),e=n.attr("data-video-lookup-id"),o=n.attr("data-video-hash-value"),i=n.attr("embed-code");return i!=null&&i.length>0?'<div class="tab-content">    <div role="tabpanel" class="tab-pane fade active in">'+i+"    <\/div><\/div>":'<div class="tab-content">    <div role="tabpanel" class="tab-pane fade active in" id="cbox-mainVideo">        <div class="video-wrapper">            <div id="yt_modal_player_container">                <div id="yt_modal_player_sizer">                    <div id="yt_modal_player"><\/div>                <\/div>            <\/div>            <span class="initialise-yt-video" data-video-id="'+f+'" data-video-title="'+r+'" data-video-lookup-id="'+e+'" data-video-hash-value="'+o+'"><\/span>        <\/div>    <\/div>'+u(n,t)+"<\/div>"}var i=$("a.video_modal"),r=function(n){var u=n.attr("data-video-title"),r=n.attr("embed-code"),t="";t+='<div class="modal-content">';t+='    <div class="modal-header">';t+='        <div class="hidden-print custom-modal-close-button">';t+='            <button aria-label="close opened modal, and go back to main page content." type="button" data-dismiss="modal" class="close">';t+='                <span class="icon icon-close" aria-hidden="true"><\/span>';t+="                &nbsp;";t+='                <span class="close-txt">CLOSE<\/span>';t+="            <\/button>";t+="        <\/div>";t+=f(n,i,u);t+="    <\/div>";t+='    <div class="modal-body">';t+=e(n,i);t+="    <\/div>";t+="<\/div>";DynamicModalsData.ClassName=r!=null&&r.length>0?"modal-gallery":"modal-video";DynamicModalsData.Data=t},o=function(t){t.preventDefault();r($(this));trackVideoModal($(this));n(!0);$('[data-toggle="tooltip"]').tooltip({html:!0})},s=function(t){if(t.video!==null){var u=t.video,i=$('a[data-video-lookup-id="'+u+'"]');i.length<=0||(r(i),trackVideoModal(i),n(!1),$('[data-toggle="tooltip"]').tooltip({html:!0}))}};return{openVideoModalByHashValues:s,onVideoClickEvent:o}}(DynamicModal_CompleteHandler);$(window).load(function(){var n=getParameter("extensionId"),i,t;n!=null&&($(".extension-thumbnail-col a.dynamicModal").each(function(){$(this).attr("data-item-id")===n&&$(this).trigger("click")}),$("#extensions-carousel a.dynamicModal").each(function(){$(this).attr("data-item-id")===n&&$(this).trigger("click")}));i=getParameter("itineraryday");i!=null&&(t=getParameter("excursionId"),t!=null&&$("a.dynamicModal").each(function(){$(this).attr("data-item-id")===t&&$(this).trigger("click")}))});var VRCCaptcha=new function(){var n=this;n.scriptResourceAddedToDom=!1;n.loaded=!1;n.callbacks=[];n.refreshIntervalId=null;n.codify=function(n){return typeof n=="undefined"?"":n==null?"":n.replace(/[\W_]+/g,"").toLowerCase()};n.addScriptToPage=function(){var i,t;(n.scriptResourceAddedToDom=!0,i=grecappublickey,$("#grecaptres").size()>0)||(t=document.createElement("script"),t.setAttribute("id","grecaptres"),t.src="https://www.google.com/recaptcha/api.js?onload=captchaOnloadCallback&render="+i,document.body.appendChild(t))};n.init=function(n){var t,i,r;try{t=$("#"+n.divId);i=t.data("captchaset");typeof i=="undefined"&&(t.data("captchaset",!0),r=grecappublickey,n.widgetid=grecaptcha.render(n.divId,{sitekey:r,size:"invisible",badge:"inline"}),$("#"+n.formId).unbind("submit.vrc_modal_submit").bind("submit.vrc_modal_submit",function(t){t.preventDefault();typeof n.validationFormBindCallback=="function"?n.validationFormBindCallback.call(this,t,n):vrcRecaptchaValidateForm($(this),t,n.widgetid)}))}catch(u){console.error(u)}};n.render=function(t){window.self===window.top&&typeof t!="undefined"&&typeof grecappublickey!="undefined"&&(n.scriptResourceAddedToDom||n.addScriptToPage(),n.loaded?n.init(t):(n.callbacks.push(t),n.refreshIntervalId=setInterval(n.checkIfLoaded,300)))};n.checkIfLoaded=function(){if(n.loaded){if(clearInterval(n.refreshIntervalId),n.callbacks.length>0)for(var t=0;t<n.callbacks.length;t++)n.init(n.callbacks[t]);n.callbacks=[]}}},captchaOnloadCallback=function(){VRCCaptcha.loaded=!0},refreshIntervalId=null;refreshIntervalId=setInterval(checkIfVariableIsSet,1e3);checkIfVariableIsSet=function(){typeof someVariable!="undefined"&&($("a.play").trigger("click"),clearInterval(refreshIntervalId))};AjaxDataTypes={KnockoutToJson:{value:0},JSONStringify:{value:1}};Poll=function(){var n=this;n.Execute=!1;n.PollingUrl=null;n.Timer=null;n.Interval=6e4;n.Data=null;n.AjaxDataType=AjaxDataTypes.JSONStringify;n.Start=function(t,i){n.Execute||(typeof t!="undefined"&&(n.Data=t),typeof i=="function"&&(n.OnPollSuccess=i),n.Execute=!0,n.MakeAjaxRequest())};n.Stop=function(){clearTimeout(n.Timer);n.Execute=!1};n.MakeAjaxRequest=function(){if(n.Execute){typeof n.PrePollCallback=="function"&&n.PrePollCallback();var t=null;switch(n.AjaxDataType){case AjaxDataTypes.KnockoutToJson:t=ko.toJSON(n.Data);break;case AjaxDataTypes.JSONStringify:default:t=JSON.stringify(n.Data)}t!=null&&SendAjax(n.PollingUrl,n.OnPollSuccess,n.OnPollError,n.OnPollComplete,t)}};n.PrePollCallback=null;n.OnPollSuccess=function(){};n.OnPollError=function(){};n.OnPollComplete=function(){n.Timer=setTimeout(n.MakeAjaxRequest,n.Interval)}},function(){String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});String.prototype.trimforOmniture||(String.prototype.trimforOmniture=function(){return this.replace(/(\r\n|\n|\r)/gm,"").replace(/\s{2,}/gm," ")})}();s_helpers=s_helpers||{};s_helpers.util=function(){var n=function(n){return typeof n=="undefined"||n===null?!0:n===""},t=function(t){return n(t)?!1:(t=t.toLowerCase(),t==="1"||t==="true")},i=function(i){if(n(i.data("site-category")))return"";var r=i.data("site-category"),u=!1;if(n(i.data("is-corporate"))||(u=t(i.data("is-corporate"))),n(r))return"";switch(r){case"rivercruises":case"rivercruisesagents":case"landingPages":return"rivers";case"oceancruises":case"oceancruisesagents":return u?"corporate":"oceans";case"oceancruisesmycruise":return"mvj"}return""},r=function(n){return typeof n=="undefined"||n===null?!1:typeof n!="string"||n.length<=0?!1:!0},u=function(t){if(!n(t)){var r=i(t);if(!n(r))return r}return typeof utag!="undefined"&&typeof utag.data!="undefined"&&typeof utag.data.product_line!="undefined"?utag.data.product_line:window.location.href.indexOf("vikingrivercruises")>-1?"rivers":window.location.href.indexOf("/oceans")>-1?"oceans":"unknown"},f=function(){var n,t;return window.location.hash.indexOf("itineraryday/")>-1?(n=window.location.hash.split("itineraryday/"),n.length>1?n[1].indexOf("/")>-1?(t=hasArray[1].split("/"),t[0].toString()):n[1].toString():n[1].toString()):0};return{checkEventText:r,getOrigin:u,isUndefinedNullOrEmpty:n,findItinerarydayNumber:f}}();$(window).load(function(){fncLoadSocialIcons()});$(window).load(function(){});trdMM={Css:{Selected:"selected"},Selectors:{LI:"#header-nav .v-nav__item--t1",LIT2:"#header-nav .v-nav__item--t2",A:"#header-nav .v-nav__link-t1",A2:"#header-nav .v-nav__link--t2"},MenuState:{MenuIsOpen:!1},Init:function(){var t={upArrow:38,downArrow:40,enter:13,tab:9,esc:27},n={selectors:{menu:"#header-nav",menuitem:"#header-nav .v-nav__item--t1",menuitemAnchor:"#header-nav .v-nav__link-t1",liveUpdateID:"mmLiveUpdate",submenuitem:"#header-nav .v-nav__sub--t2"}},r=$(n.selectors.menuitemAnchor),i;r.each(function(){var i=$(this).parent().find(".v-nav__sub--t2 .v-nav__link--t2"),r=$(this),u=i[i.length-1],f=i[0];r.on("click",function(){window.innerWidth<1024||(window.location=$(this).data("href"))});r.on("keydown",function(i){var e=i.keyCode||i.which,r=!1;switch(e){case t.downArrow:if(window.innerWidth<1024)return;$(n.selectors.menuitem).removeClass("selected");$(n.selectors.menuitemAnchor).attr("aria-expanded","false");$(this).attr("aria-expanded","true").parent().addClass("selected").find(".v-nav__sub--t2 .v-nav__link--t2:first").focus();r=!0;break;case t.upArrow:if(window.innerWidth<1024)return;$(this).attr("aria-expanded","false").focus().parent().removeClass("selected");r=!0;break;case t.enter:r=!0;window.location=$(this).data("href");break;case t.tab:(i.shiftKey&&f===i.target||u===i.target)&&$(this).attr("aria-expanded","false").parent().removeClass("selected")}r&&(i.preventDefault(),i.stopPropagation())})});i=document.querySelector(n.selectors.menu);i&&i.addEventListener("keydown",function(i){window.innerWidth<1024||i.keyCode===t.esc&&($(n.selectors.menuitem).removeClass("selected"),$(n.selectors.menuitemAnchor).attr("aria-expanded","false"))});$(trdMM.Selectors.LI).hoverIntent({over:function(){window.innerWidth<1024||($(trdMM.Selectors.LI).each(function(){$(this).children("a").trigger("blur");$(this).is("."+trdMM.Css.Selected)&&$(this).removeClass(trdMM.Css.Selected)}),$(this).addClass(trdMM.Css.Selected).children(".v-nav__link-t1").attr("aria-expanded","true"))},out:function(){window.innerWidth<1024||($(this).removeClass(trdMM.Css.Selected).children(".v-nav__link-t1").attr("aria-expanded","false"),$(trdMM.Selectors.LIT2).removeClass(trdMM.Css.Selected))},timeout:1});$(trdMM.Selectors.LIT2).hoverIntent({over:function(){window.innerWidth<1024||($(trdMM.Selectors.LIT2).removeClass(trdMM.Css.Selected),$(this).addClass(trdMM.Css.Selected))},out:function(){},timeout:1});$("body").bind("touchstart",function(n){if(!(window.innerWidth<1024)){var t=null,i=!1;if(typeof n!="undefined")try{t=$(n.target)}catch(r){}t!=null&&t.parents("#header-nav").size()>0&&(i=!0);i||trdMM.MenuState.MenuIsOpen&&(trdMM.MenuState.MenuIsOpen=!1,$(trdMM.Selectors.A).removeClass(trdMM.Css.Selected).attr("aria-expanded","false").data("touchcount",0),$(trdMM.Selectors.LIT2).removeClass(trdMM.Css.Selected),$(trdMM.Selectors.A2).data("touchcount",0))}});$(trdMM.Selectors.A).bind("touchstart",function(n){if(!(window.innerWidth<1024)){trdMM.MenuState.MenuIsOpen=!0;$(trdMM.Selectors.A).attr("aria-expanded","false");$(trdMM.Selectors.LI).removeClass(trdMM.Css.Selected);var i=$(this),t=i.data("touchcount");typeof t!="undefined"&&t!=null&&t>0?t++:t=1;$(trdMM.Selectors.A).data("touchcount",0);i.data("touchcount",t).attr("aria-expanded","true").closest("li").addClass(trdMM.Css.Selected);n.stopPropagation();t<2?n.preventDefault():window.location=i.data("href")}});$(trdMM.Selectors.A2).bind("touchstart",function(n){var r,i,t;window.innerWidth<1024||(r=$(this),r.hasClass("v-nav__link--multi"))&&(trdMM.MenuState.MenuIsOpen=!0,$(trdMM.Selectors.LIT2).removeClass(trdMM.Css.Selected),i=$(this),t=i.data("touchcount"),typeof t!="undefined"&&t!=null&&t>0?t++:t=1,$(trdMM.Selectors.A2).data("touchcount",0),i.data("touchcount",t).closest("li").addClass(trdMM.Css.Selected),n.stopPropagation(),t<2&&n.preventDefault())})}};trdCM={Css:{Selected:"selected"},Selectors:{LI:".cruiseNavTabs > ul > li",A:".cruiseNavTabs > ul > li > a"},MenuState:{MenuIsOpen:!1},Init:function(){$(trdCM.Selectors.LI).each(function(){var n=$(this),t=n.children(".dropdown").length>0;t&&n.hoverIntent({over:function(){$(trdCM.Selectors.LI).removeClass(trdCM.Css.Selected);n.addClass(trdCM.Css.Selected)},out:function(){n.removeClass(trdCM.Css.Selected)},timeout:1})});$("body").bind("touchstart",function(n){var t=null,i=!1;if(typeof n!="undefined")try{t=$(n.target)}catch(r){}t!=null&&t.parents(".cruiseNavWrapper").length>0&&(i=!0);i||trdCM.MenuState.MenuIsOpen&&(trdCM.MenuState.MenuIsOpen=!1,$(trdCM.Selectors.LI).removeClass(trdCM.Css.Selected),$(trdCM.Selectors.A).data("touchcount",0))});$(trdCM.Selectors.A).each(function(){var n=$(this),t=n.siblings(".dropdown").length>0;t&&n.bind("touchstart",function(t){trdCM.MenuState.MenuIsOpen=!0;$(trdCM.Selectors.LI).removeClass(trdCM.Css.Selected);var i=n.data("touchcount");typeof i!="undefined"&&i!=null&&i>0?i++:i=1;$(trdCM.Selectors.A).data("touchcount",0);n.data("touchcount",i).closest("li").addClass(trdCM.Css.Selected);t.stopPropagation();i<2&&t.preventDefault()})})}};$(document).ready(function(){trdMM.Init();trdCM.Init()});window.vrcRefreshMainMenu=vcDebounce(function(){window.innerWidth<1024||($("#header-menu .v-nav__sub--t2, #header-menu .v-menu__secondary").removeAttr("style"),$("#header-menu .v-nav__item--t1").removeClass("v-nav__item--open"),$("#header-menu .v-nav__link-t1").attr("aria-expanded","false"),$("body").removeClass("v-menu--open"))},200,!1);window.vrcToggleMainMenuTablet=function(n,t,i,r){window.innerWidth>1023||t&&(n&&n.preventDefault(),buttonObj=t.children(".v-nav__link-t1"),r?(t.toggleClass("v-nav__item--open"),buttonObj.attr("aria-expanded")==="true"?buttonObj.attr("aria-expanded","false"):buttonObj.attr("aria-expanded","true"),t.find(".v-nav__sub--t2").slideToggle()):i?(t.addClass("v-nav__item--open"),buttonObj.attr("aria-expanded","true"),t.find(".v-nav__sub--t2").slideDown(),window.setTimeout(function(){t.find(".v-nav__sub--t2 .v-nav__link--t2:first").focus()},250)):(t.removeClass("v-nav__item--open"),t.find(".v-nav__sub--t2").slideUp(),buttonObj.attr("aria-expanded","false")))};window.vrcToggleProductMenuTablet=function(n,t,i,r){window.innerWidth>1023||t&&(n&&n.preventDefault(),r?($("#header-menu").toggleClass("v-menu__product-container--open"),t.parent().find(".v-menu__products").slideToggle(200),t.attr("aria-expanded")==="true"?t.attr("aria-expanded","false"):t.attr("aria-expanded","true")):i?($("#header-menu").addClass("v-menu__product-container--open"),t.parent().find(".v-menu__products").slideDown(200),t.attr("aria-expanded","true")):($("#header-menu").removeClass("v-menu__product-container--open"),t.parent().find(".v-menu__products").slideUp(200),t.attr("aria-expanded","false")))};$(function(){$("#header-burger").click(function(){$("body").toggleClass("v-menu--open");$("#header-menu .v-menu__secondary").slideToggle();$("body").hasClass("v-menu--open")?($("#header-burger").attr("aria-expanded","true").attr("aria-label","Close the main navigation menu."),window.vrcRefreshHeaderTrap()):$("#header-burger").attr("aria-expanded","false").attr("aria-label","Open the main navigation menu.")});$("#header-menu .v-nav__link-t1").on("click",function(n){vrcToggleMainMenuTablet(n,$(this).parent(),!1,!0)});$("#header-menu .v-nav__link-t1").keydown(function(n){switch(event.keyCode){case 38:vrcToggleMainMenuTablet(n,$(this).parent(),!1);break;case 40:vrcToggleMainMenuTablet(n,$(this).parent(),!0)}});$("#header-menu .v-menu__product-dropdown").click(function(n){vrcToggleProductMenuTablet(n,$(this),!1,!0)});$("#header-menu .v-menu__product-dropdown").keydown(function(n){switch(event.keyCode){case 38:vrcToggleProductMenuTablet(n,$(this),!1);break;case 40:vrcToggleProductMenuTablet(n,$(this),!0)}});$("#header-menu .v-nav__item--children.v-nav__item--t2").keydown(function(n){var i,t;if(!(window.innerWidth<1024)){i=window.event?window.event:n;switch(i.keyCode){case 39:t=$(this);t.parent().find(".v-nav__item--t2.v-nav__item--children").removeClass("selected");t.addClass("selected");t.attr("aria-expanded","true");t.find(".v-nav__sub--t3 .v-nav__link:first").focus();break;case 37:t=$(this);t.removeClass("selected");t.attr("aria-expanded","false");t.focus()}}});$(window).on("load resize",function(){vrcRefreshMainMenu()})});objTRDFlyout=new function(){var n=this;n.KEYCODE_TAB=9;n.fncContainer=null;n.HeaderFirstFocusableEl=null;n.HeaderLastFocusableEl=null;n.fncInit=function(){n.fncFocusTrap();n.ddlFocusTrap()};n.fncFocusTrap=function(){(n.fncContainer=document.querySelector("#header-menu"),n.fncContainer!=null)&&(n.fncSetVisibleElements(),n.fncContainer.addEventListener("keydown",function(t){window.innerWidth>1023||(t.key==="Tab"||t.keyCode===n.KEYCODE_TAB)&&(t.shiftKey?document.activeElement===n.HeaderFirstFocusableEl&&(n.HeaderLastFocusableEl.focus(),t.preventDefault()):document.activeElement===n.HeaderLastFocusableEl&&(n.HeaderFirstFocusableEl.focus(),t.preventDefault()))}))};n.fncSetVisibleElements=function(){if(n.fncContainer!=null){var i=n.fncContainer.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),t=[].filter.call(i,function(n){return $(n).is(":visible")});n.HeaderFirstFocusableEl=t[0];n.HeaderLastFocusableEl=t[t.length-1]}};n.ddlFocusTrap=function(){var n=document.querySelector("#header-menu .v-menu__product-dropdown-container");if(n!=null){var u=n.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),t=[].filter.call(u,function(n){var t=window.getComputedStyle(n);return t.getPropertyValue("display")!=="none"}),i=t[0],r=t[t.length-1],f=9;n.addEventListener("keydown",function(n){window.innerWidth>1023||(n.key==="Tab"||n.keyCode===f)&&(n.shiftKey?document.activeElement===i&&(r.focus(),n.preventDefault()):document.activeElement===r&&(i.focus(),n.preventDefault()))})}}};window.vrcRefreshHeaderTrap=vcDebounce(function(){objTRDFlyout.fncSetVisibleElements()},200,!1);$(document).ready(function(){objTRDFlyout.fncInit()});$(window).on("resize",function(){window.vrcRefreshHeaderTrap()});trdAutoCompleteSettings={account:"sp10050d9f",searchDomain:"https://sp10050d9f.guided.ss-omtrdc.net/",inputElement:"input[name=q]",inputFormElement:"form[name=search]",delay:300,minLength:3,maxResults:6,browserAutocomplete:!1,queryCaseSensitive:!1,startsWith:!1,submitOnSelect:!0,zindex:5001};$(document).ready(function(){$(trdAutoCompleteSettings.inputElement).AdobeAutocomplete(trdAutoCompleteSettings);$("#trd-header .v-menu__search-button").click(function(){objTRDSearch.fncButtonClick($(this))});$("#trd-header .v-menu__search-input").keypress(function(){objTRDSearch.fncInputChange($(this),"keypress")}).keyup(function(){objTRDSearch.fncInputChange($(this),"keyup")});$("#trd-header .v-menu__search-input").val("").blur()});$(window).load(function(){$(window).resize(function(){objTRDSearch.fncResizeDesktopSearch()})});objTRDSearch={objInputTimer:!1,objInputControl:!1,fncSetZIndex:function(){},fncButtonClick:function(n){n.parent().find(".v-menu__search-input").val()!=""?n.parent().find("form").submit():n.parent().find(".v-menu__search-input").focus()},fncInputChange:function(n){objTRDSearch.objInputControl=n;clearTimeout(objTRDSearch.objInputTimer);objTRDSearch.objInputTimer=setTimeout(function(){objTRDSearch.fncInputChangeTimer()},100)},fncInputChangeTimer:function(){objTRDSearch.objInputControl.val()==""?($("#trd-header .v-menu__search").removeClass("v-menu__search--populated"),objTRDSearch.objInputControl.removeClass("v-menu__search-input--hasValue")):($("#trd-header .v-menu__search").addClass("v-menu__search--populated"),objTRDSearch.objInputControl.addClass("v-menu__search-input--hasValue"))},fncResizeDesktopSearch:function(){}}