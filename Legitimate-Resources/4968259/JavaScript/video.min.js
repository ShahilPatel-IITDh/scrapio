/*! Thrive Architect - 2021-10-21
* http://www.thrivethemes.com/
* Copyright (c) 2021 Thrive Themes */

"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var o=0;o<e.length;o++){var a=e[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,e,o){return e&&_defineProperties(t.prototype,e),o&&_defineProperties(t,o),t}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(s){var f,v,n,p,y,i={".js":[],".json":[],".css":[],".html":[]},c="function"==typeof require?require:null;return p=function(t){var e=new Error("Could not find module '"+t+"'");return e.code="MODULE_NOT_FOUND",e},y=function(t,e,o){var a,n;if("function"==typeof t[e+o])return e+o;for(a=0;n=i[o][a];++a)if("function"==typeof t[e+n])return e+n;return null},f=function(t,e,o,a,n,i){var r,l,s,c,d,u;for("."!==(r=(o=o.split("/")).pop())&&".."!==r||(o.push(r),r="");null!=(l=o.shift());)if(l&&"."!==l&&(".."===l?(t=e.pop(),i=i.slice(0,i.lastIndexOf("/"))):(e.push(t),t=t[l],i+="/"+l),!t))throw p(a);if(r&&"function"!=typeof t[r]&&((u=(u=(u=(u=y(t,r,".js"))||y(t,r,".json"))||y(t,r,".css"))||y(t,r,".html"))?r=u:2!==n&&"object"===_typeof(t[r])&&(e.push(t),t=t[r],i+="/"+r,r="")),!r)return 1!==n&&t[":mainpath:"]?f(t,e,t[":mainpath:"],a,1,i):f(t,e,"index",a,2,i);if(!(d=t[r]))throw p(a);return d.hasOwnProperty("module")?d.module.exports:(s={},d.module=c={exports:s,id:i+"/"+r},d.call(s,s,c,v(t,e,i)),c.exports)},n=function(t,e,o,a){var n,i=o,r=o.charAt(0),l=0;if("/"===r){if(i=i.slice(1),!(t=s["/"])){if(c)return c(o);throw p(o)}a="/",e=[]}else if("."!==r){if(n=i.split("/",1)[0],!(t=s[n])){if(c)return c(o);throw p(o)}a=n,e=[],(i=i.slice(n.length+1))||(l=(i=t[":mainpath:"])?1:(i="index",2))}return f(t,e,i,o,l,a)},(v=function(e,o,a){return function(t){return n(e,[].concat(o),t,a)}})(s,[],"")}({workspace:{editor:{js:{frontend:{modules:{video:{"floating.js":function(t,e,o){function y(t,e){var o=e?t.parents(".safari-ios-decoration-fix"):t.parents(".safari-ios-decoration-fix-none");t.toggleClass("tcb-no-perspective",e),o.toggleClass("safari-ios-decoration-fix",!e).toggleClass("safari-ios-decoration-fix-none",e)}var h,a,n,b;h=ThriveGlobal.$j,b=!(n={}),n.init=function(){var o=this;a=n.videoScrolled.bind(this),document.addEventListener("scroll",a),h(".tcb-float-close-button").each(function(t,e){e.addEventListener("click",n.closeFloatVideo.bind(o,e),!1)})},n.destroyFloating=function(){var o=this;document.removeEventListener("scroll",a),h(".tcb-float-close-button").each(function(t,e){e.removeEventListener("click",n.closeFloatVideo.bind(o,e))})},n.closeFloatVideo=function(t){h(t).parent(".tcb-video-float-container").addClass("tcb-float-closed"),n.videoScrolled()},n.videoScrolled=function(){h('.thrv_responsive_video[data-float="true"] .tcb-video-float-container iframe, .thrv_responsive_video[data-float="true"] .tcb-video-float-container video, .thrv_responsive_video[data-float="true"] .tcb-video-float-container .tve_responsive_video-no_video').each(function(t,e){var o=h(e),a=o.parents(".tcb-video-float-container"),n=o.parents(".thrv_responsive_video"),i=n.attr("data-float-position"),r=n.find(".video_overlay_image").attr("style")||"",l=TCB_Front.getDisplayType()[0],s=parseInt(h("#wpadminbar").height());if(a.hasClass("tcb-float-closed")||!function(t){var e="true"===t.attr("data-float"),o=t.attr("data-float-visibility"),a=TCB_Front.getDisplayType();return!t.parents(".tcb-post-list").length&&(e&&!o||-1===o.indexOf(a))}(n)||TCB_Front.isInViewport(o.parents(".thrv_responsive_video"),parseInt(o.width))){if(a.removeClass(i).css({width:"",height:"","margin-top":""}).parents(".tcb-col,.thrv-content-box,.thrv-page-section,#content,.theme-section").css("z-index",""),n.find(".video_overlay_image").removeClass(i).css({cssText:r,height:"",width:""}),!b){var c=n.position().left,d={left:c,right:c+n.width()};i.includes("top")||i.includes("keep")?(d.top=-parseInt(n.attr("data-float-width-".concat(l))),a.css(d)):i.includes("bottom")&&(d.bottom=parseInt(TCB_Front.Utils.windowWidth()),a.css(d)),n.find(".video_overlay_image").css({top:"",left:"",bottom:"",right:"","margin-top":""}),b=!0}y(n,!1)}else{void 0===n.attr("data-float-width-".concat(l))&&("m"===l&&(n.attr("data-float-width-m",TCB_Front.$window.width()+"px;"),n.attr("data-float-padding1-m",0),n.attr("data-float-padding2-m",0),s=0),"t"===l&&(l="d"));var u="height: "+function(t){var e=parseFloat(t.height()/t.width()).toFixed(2),o=TCB_Front.getDisplayType()[0],a=t.attr("data-float-width-".concat(o))||t.attr("data-float-width-d"),n=parseInt(a)*e;return a.includes("px")?n+"px":n*TCB_Front.$body.width()/100+"px"}(n)+" !important;",f="width: "+n.attr("data-float-width-".concat(l))+" !important;",v="";if(i.includes("keep-original")){var p=n.attr("data-float-padding1-".concat(l));TCB_Front.Utils.hasAdminBar()&&s&&(v+="margin-top: ".concat(s,"px;")),v+="top: ".concat(p," !important; ")}else i.split("-").forEach(function(t,e){var o=n.attr("data-float-padding".concat(e+1,"-").concat(l));TCB_Front.Utils.hasAdminBar()&&t.includes("top")&&s&&(v+="margin-top: ".concat(s,"px;")),v+="".concat(t,": ").concat(o," !important; ")});i&&(a.addClass(i).css({cssText:f+u+v}).parents(".tcb-col,.thrv-content-box,.thrv-page-section,#content,.theme-section").css("z-index",(TCB_Front.highestZIndex||0)+10),o.css("height",""),n.find("video").length&&function(t){t.find("video").css({"object-fit":"cover",height:"100%"})}(n),n.find(".video_overlay_image").addClass(i).css({cssText:r+f+u+"z-index:100000 !important; top:inherit; left:inherit; bottom:inherit; right: inherit; margin-top: inherit;"}),y(n,!0),b=!1)}})},n.restoreFloatingVideos=function(){h(".thrv_responsive_video").each(function(t,e){var o=h(e),a=o.find(".tcb-video-float-container"),n=o.attr("data-float-position"),i=o.find(".video_overlay_image").attr("style")||"";a.removeClass(n).css({width:"",height:""}),o.find(".video_overlay_image").removeClass(n).css({cssText:i,height:"",width:"",top:"",left:"",bottom:"",right:"","margin-top":""})})},e.exports=n},"lazy-load.js":function(t,e,o){var c,n;c=ThriveGlobal.$j,n='.tcb-video-cover:not([data-preload="1"]) .tcb-video-cover-image',e.exports=function(){function s(){_classCallCheck(this,s)}return _createClass(s,null,[{key:"initVideoLazyLoad",value:function(t){var e=t.find(".thrv_responsive_video.tcb-lazy-load");0!==e.length&&(TCB_Front.add_scroll_callback(function(t){0<t&&e.each(function(t,e){var o=c(e);if(s.hasVideoCover(o)){var a=o.find(n);0<a.length&&s.lazyLoadThumbnail(a)}else s.lazyLoadVideo(o,"external"===e.dataset.type)})}),e.each(function(t,e){var o=c(e);o.on("mouseenter touchstart",function(){return s.lazyLoadVideo(o,"external"===e.dataset.type,!0)})}))}},{key:"preventIframeLoad",value:function(t,e,o){var a=c(e).closest(".thrv_responsive_video");return o&&!TCB_Front.Utils.isEditorPage()&&s.shouldLazyLoad(a)&&(t=!0),t}},{key:"shouldLazyLoad",value:function(t){return t.hasClass("tcb-lazy-load")&&(s.hasVideoCover(t)||!TCB_Front.isInViewport(t,-150)||s.isInsideScreenFiller(t))}},{key:"isInsideScreenFiller",value:function(t){return"hidden"===t.closest(".tve-leads-screen-filler").css("visibility")}},{key:"hasVideoCover",value:function(t){return 0<t.find(".video_overlay_image, .tcb-video-cover").length}},{key:"lazyLoadVideo",value:function(t,e,o){var a=1<arguments.length&&void 0!==e&&e,n=2<arguments.length&&void 0!==o&&o,i=t.find(a?"source":"iframe"),r=i.attr("src");if(!(i.hasClass("tcb-video-lazy-loaded")||r&&0<r.length||!t.is(":visible")||s.isInsideScreenFiller(i)||!TCB_Front.isInViewport(t,-150)&&!n)){i.hasClass("vooplayer")&&!TCB_Front.vooplayerScriptsLoaded&&(c.getScript("https://s3.spotlightr.com/assets/vooplayer.js"),TCB_Front.vooplayerScriptsLoaded=1);var l=i.attr("data-src");l&&"null"!==l&&(l=TCB_Front.Hooks.applyFilters("tcb.video.lazy_load.src",l,t),i.attr("src",l),a&&i.closest("video")[0].load()),i.removeAttr("data-src").addClass("tcb-dr-done tcb-video-lazy-loaded")}}},{key:"lazyLoadThumbnails",value:function(t){t.find(n).each(function(t,e){var o=c(e);0<o.closest(".tcb-lazy-load").length&&s.lazyLoadThumbnail(o)})}},{key:"lazyLoadThumbnail",value:function(t){if(TCB_Front.Utils.isEditorPage()||!t.hasClass("tcb-src-loaded")&&t.is(":visible")&&TCB_Front.isInViewport(t.closest(".thrv_responsive_video"),-250)){var e=t.attr("data-src");e&&"null"!==e&&t.attr("src",e),t.removeAttr("data-src"),TCB_Front.Utils.isEditorPage()||t.addClass("tcb-src-loaded")}}}]),s}()},"main.js":function(t,e,o){e.exports=function(f,v){var r=o("./utils"),p=o("./youtube"),e=o("./vooplayer"),n=o("./lazy-load"),t=function(){function a(){_classCallCheck(this,a)}return _createClass(a,null,[{key:"init",value:function(){a.initHooks()}},{key:"initHooks",value:function(){f(v).on("tcb_after_dom_ready",function(){return a.onDOMReady()}).on("tcb_after_lightbox_open",function(t,e){f(e).find("".concat(a.identifier,':not([data-type="dynamic"])')).each(function(t,e){return a.autoplayVideo(f(e))})}).on("tcb_before_lightbox_close",function(t,e){return a.pauseVideos(f(e))}).on("tcb_on_content_hide",function(t,e){return a.pauseVideos(f(e))}).on("tve-content-revealed",function(t,e){return a.maybeAutoplayVideo(f(e))}).on("tcb_toggle_open",function(t,e){return a.maybeAutoplayVideo(f(e))}).on("tcb_toggle_close",function(t,e){return a.pauseVideos(f(e))}).on("tcb_on_content_show",function(t,e){return a.maybeAutoplayVideo(f(e))}).on("tve_after_content_toggle",function(t,e,o){o&&n.lazyLoadThumbnails(e)}),TCB_Front.Hooks.addFilter("tcb.is_iframe_load_prevented",n.preventIframeLoad)}},{key:"onDOMReady",value:function(){var t=f("body");a.pauseVideos(f(".tve_p_lb_content")),a.pauseVideos(f("".concat(a.identifier,":hidden"))),TCB_Front.Utils.isEditorPage()||(p.initHooks(),a.maybeAutoplayVideo(t),a.initOnClickEvent(),n.initVideoLazyLoad(t)),p.playBackgroundYoutube(f("div.tcb-yt-bg:visible")),e.onDOMReady(),f(".tcb-video-background-el").each(function(t,e){return e.parentNode.classList.add("tcb-video-background-parent")})}},{key:"initOnClickEvent",value:function(){f(a.identifier).off().on("click",function(t){return a.onClick(f(t.currentTarget),t)})}},{key:"onClick",value:function(t,e){var o,a,n=t.find(".video_overlay_image, .tcb-video-cover"),i=t.attr("data-controls"),r=t.attr("data-overlay"),l=t.find(".tcb-video-float-container.tcb-float-closed"),s=t.find(".tcb-responsive-video").attr("data-provider");switch(s=s||t.attr("data-type")){case"youtube":if(0===l.length)return p.playYoutubeVideo(t,v);break;case"vimeo":o="&muted=1&autoplay=1";break;case"wistia":o="&autoPlay=true"}if("vooplayer"===s&&t.find(".video-skin-player").css("z-index",""),0===l.length&&["vimeo","wistia"].includes(s)){var c=t.find("iframe"),d=c.attr("src");0!==d.length&&c.attr("src",d+o)}else if((!TCB_Front.browser.safari||0===parseInt(i)&&1===parseInt(r))&&e&&0===f(e.target).closest(".tcb-float-close-button").length&&["custom","self","external"].includes(s)){var u=t.find("video").get(0);a=u.paused?"play":"pause",setTimeout(function(){u[a]()})}0<n.length&&n.fadeOut()}},{key:"maybeAutoplayVideo",value:function(t){(void 0===t?f("".concat(a.identifier,':not([data-type="dynamic"])')):t.find("".concat(a.identifier,':not([data-type="dynamic"])'))).each(function(t,e){var o=f(e);0===o.parents(".tve_p_lb_content").length&&a.autoplayVideo(o)})}},{key:"autoplayVideo",value:function(t){if(1===parseInt(t.attr("data-autoplay"))){var e,o=t.attr("data-type"),a="";switch(o){case"youtube":a="&autoplay=1&mute=1";break;case"vimeo":a="&autoplay=1&muted=1";break;case"wistia":a="&autoPlay=true&muted=true"}if(r.isCustomProvider(o)){var n=t.find("iframe");(e=n.attr("src")||n.attr("data-src"))&&0!==e.length&&-1===e.indexOf(a)&&(e.includes("?")?"?"===e.slice(-1)&&(a=a.substring(1)):a="?".concat(a.substring(1)),e+=a,n.attr("src",e),n.attr("data-src",e))}else if(r.isSelfHosted(o)){var i=t.find("video").get(0);i&&(i.muted=!0,i.paused&&i.play())}}}},{key:"pauseVideos",value:function(t){t.find("video").each(function(t,e){return e.pause()})}},{key:"identifier",get:function(){return".thrv_responsive_video"}}]),a}();return window.TCB_Front.playBackgroundYoutube=p.playBackgroundYoutube,window.TCB_Front.refreshBackgroundYoutube=p.refreshBackgroundYoutube,window.TCB_Front.onVideoClick=t.onClick,window.TCB_Front.changeAutoplayVideo=t.maybeAutoplayVideo,window.TCB_Front.makeAutoplayVideo=t.autoplayVideo,window.TCB_Front.floating=o("./floating"),t}},"utils.js":function(t,e,o){var a=["youtube","vimeo","wistia"],n=["self","external","custom"];e.exports=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"isCustomProvider",value:function(t){return a.includes(t)}},{key:"isSelfHosted",value:function(t){return n.includes(t)}}]),t}()},"vooplayer.js":function(t,e,o){var i,a;i=ThriveGlobal.$j,a=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"onDOMReady",value:function(){document.addEventListener("vooPlayerReady",t.playBackgroundVoo,!1),document.addEventListener("vooPlayerReady",t.changeVooOnPlay,!1),TCB_Front.Utils.isEditorPage()?i(".tcb-video-background-el iframe.tcb-voo-bg").each(function(){var t=TVE.inner_$(this),e=t.attr("src");t.attr("src",e)}):(i('.thrv_responsive_video[data-type="vooplayer"]').each(function(t,e){var o=i(e),a=o.find(".tcb-video-cover,.video_overlay_image"),n=o.find("iframe");0<a.length&&0<n.length&&(o.find(".video-skin-player").css("z-index","-1"),n.before(a.css("height",n.height())))}),TCB_Front.floating.init())}},{key:"playBackgroundVoo",value:function(){i("iframe.tcb-voo-bg").each(function(t,e){!function t(){vooAPI(e.dataset.playerid,"onEnded",null,t),vooAPI(e.dataset.playerid,"play"),vooAPI(e.dataset.playerid,"volume",[0])}()})}},{key:"changeVooOnPlay",value:function(t){var e=0<arguments.length&&void 0!==t?t:TCB_Front.$body;e&&e.jquery||(e=TCB_Front.$body),e.find("iframe.video-player-container").each(function(t,e){function o(){i(e).css("pointer-events",""),i(e).parent().find("#theImg").remove()}e.src?o():vooAPI(e.dataset.playerid,"onPlay",null,function(){o()})})}}]),t}(),e.exports=a,window.TCB_Front.changeVooOnPlay=a.changeVooOnPlay},"youtube.js":function(t,e,o){var a;a=ThriveGlobal.$j,e.exports=function(){function l(){_classCallCheck(this,l)}return _createClass(l,null,[{key:"initHooks",value:function(){TCB_Front.Hooks.addFilter("tcb.video.lazy_load.src",function(t,e){return t.includes("&enablejsapi=1")||"youtube"!==e.attr("data-type")||(t+="&enablejsapi=1"),t})}},{key:"playYoutubeVideo",value:function(t,e){void 0!==e.YT&&e.YT.Player?l.play(t):(e.onYouTubeIframeAPIReady=function(){return l.play(t)},l.fetchIframeAPI())}},{key:"play",value:function(t){function e(){return new YT.Player(n,{videoId:a,playerVars:l.getDefaultPlayerParameters(a),events:{onReady:function(t){t.target.mute(),t.target.playVideo()},onError:function(t){return console.warn(t)}}})}var o=t.find("iframe"),a=o.attr("data-code"),n="tcb-".concat(a,"-").concat(Math.floor(1e3*Math.random())),i=o.attr("src");o.attr("id",n);var r=t.find(".video_overlay_image, .tcb-video-cover");0<r.length&&r.fadeOut(),i.includes("enablejsapi=1")?e():o.one("load",e).attr("src","".concat(i,"&enablejsapi=1"))}},{key:"playBackgroundYoutube",value:function(t){t.length&&(void 0!==window.YT&&window.YT.Player?l._playYTBackground(t):(window.onYouTubeIframeAPIReady=function(){l._playYTBackground(t)},l.fetchIframeAPI()))}},{key:"_playYTBackground",value:function(t){t.each(function(){var t,e=this.getAttribute("data-yt-id");t=34===e.length?new YT.Player(this.id,{playerVars:l.getDefaultPlayerParameters(e,!0),events:{onReady:function(t){t.target.mute()},onStateChange:function(t){t.target.mute()}}}):new YT.Player(this.id,{videoId:e,playerVars:l.getDefaultPlayerParameters(e),events:{onReady:function(t){t.target.mute(),t.target.playVideo()},onStateChange:function(t){t.target&&t.target.mute&&t.target.mute(),t.data===(YT.PlayerState.ENDED||0)&&t.target.playVideo()}}}),a(t.getIframe()).data("tcb-yt-player",t)})}},{key:"refreshBackgroundYoutube",value:function(){window.YT&&window.YT.Player&&a("iframe.tcb-yt-bg").each(function(t,e){var o=a(e);o.data("tcb-yt-player")||l._playYTBackground(o)})}},{key:"fetchIframeAPI",value:function(){a.ajax({url:"https://www.youtube.com/iframe_api",type:"get",crossDomain:!0,cache:!0,dataType:"script"})}},{key:"getDefaultPlayerParameters",value:function(t,e){var o={autoplay:1,cc_load_policy:0,controls:0,disablekb:1,fs:0,iv_load_policy:0,modestbranding:1,playsinline:1,rel:0,showinfo:0,playlist:t};return 1<arguments.length&&void 0!==e&&e&&(o.loop=1,o.listType="playlist"),o}}]),l}()}},"video.js":function(t,e,o){void 0===TCB_Front.js_modules.video&&TCB_Front.setModuleLoadedStatus("video",!1),function(){if(!TCB_Front.isModuleLoaded("video")){var t=o("./video/main")(ThriveGlobal.$j,window);t.init(),window.TCB_Front.video=t,TCB_Front.setModuleLoadedStatus("video",!0)}}(ThriveGlobal.$j)}}}}}}})("workspace/editor/js/frontend/modules/video");