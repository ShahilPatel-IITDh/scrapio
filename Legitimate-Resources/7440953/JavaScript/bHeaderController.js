portalOccidenteApp.controller('bHeaderController', function($scope, $window, $location, bHeaderFactory, bHeaderService){ 	$scope.cajaBusqHeader=''; 	$scope.cajaBusquedaSql=false; 	$scope.caracterNoValido=""; 	$scope.config = {}; 	var protocol = $location.protocol(); 	var host = location.host; 	console.log(protocol+"://"+host); 	bHeaderService.obtenerParametros().then(function(data){ 		$scope.config.parametros = data; 	}); $scope.$watch('cajaBusqHeader', function() { 	if(bHeaderFactory.validaSql($scope.cajaBusqHeader+" ")){ 				$scope.cajaBusquedaSql=true; 				$scope.caracterNoValido=$scope.config.parametros.caracterNoValido; 			} 		else { 			$scope.cajaBusquedaSql=false; 			$scope.caracterNoValido=""; 		} }); $scope.search = function(){ if($scope.cajaBusquedaSql!=true){ if (typeof(Storage) !== "undefined") { sessionStorage.searchValue= $scope.cajaBusqHeader; $window.location.href = protocol+"://"+host+'/wps/portal/banco-de-occidente/bancodeoccidente/buscador'; } else { } } } }); 