(function(a){"use strict";function b(a,b,c,d){this.el=a,this.type=b,this.resizeVideoToCover=c,this.fullWidthContentColumns=d,this.flickityEl=null,this.createTestimonialControls()}b.prototype.createTestimonialControls=function(){var g=a('body.vc_editor').length>0?'> div':'blockquote',b,e,d,i,f,c,h,j,k,l,m,n,o;if(this.type!='multiple_visible'&&this.type!='multiple_visible_minimal')if(this.el.animate({opacity:'1'},800),this.el.find('blockquote').length>1){this.el.find('.controls, .testimonial-next-prev').remove(),this.el.append('<div class="controls"><ul></ul></div>'),i=this.el.find('blockquote').length,b=this.el;for(f=0;f<i;f++)this.el.is('[data-style="minimal"]')?b.find('.controls ul').append('<li>'+(f+1)+'</li>'):b.find('.controls ul').append('<li><span class="pagination-switch"></span></li>');this.el.is('[data-style="minimal"]')&&(this.el.append('<div class="testimonial-next-prev"><a href="#" class="prev fa fa-angle-left"></a><a href="#" class="next fa fa-angle-right"></a></div>'),this.el.find('.testimonial-next-prev a').on('click',this.minimalNextPrevSelect),this.el.find('.active').length==0&&(this.el.find('.slides '+g+':first-child').addClass('active').css({opacity:'1',transform:'translateX(0px)'}).css('z-index','20'),this.el.hasClass('disable-height-animation')||this.el.find('.slides').css({height:this.el.find('.slides '+g+':first-child').height()+40+'px'})),this.el.attr('data-autorotate').length>0&&(b=this.el,e=parseInt(this.el.attr('data-autorotate'))<100?4e3:parseInt(this.el.attr('data-autorotate')),d=this,c=setInterval(function(){d.testimonialRotate(b)},e)),this.el.find('.testimonial-next-prev a').on('click',function(a){typeof a.clientX!='undefined'&&clearInterval(c)}),this.el.find('.controls ul').wrap('<div class="control-wrap" />'),this.el.find('.controls ul').css('width',this.el.find('.controls ul li').length*20+1+'px'),this.el.find('.controls').append('<span class="out-of">/</span><span class="total">'+this.el.find('blockquote').length+'</span>'),this.el.swipe({swipeLeft:function(a){return b.find('.testimonial-next-prev .next').trigger('click'),a.stopImmediatePropagation(),clearInterval(c),!1},swipeRight:function(a){return b.find('.testimonial-next-prev .prev').trigger('click'),a.stopImmediatePropagation(),clearInterval(c),!1}})),this.el.is('[data-style="minimal"]')||(this.el.find('.controls ul li').on('click',this.defaultPaginationSelect),this.el.find('.controls ul li').first().trigger('click'),this.el.attr('data-autorotate').length>0&&(e=parseInt(this.el.attr('data-autorotate'))<100?4e3:parseInt(this.el.attr('data-autorotate')),b=this.el,d=this,c=setInterval(function(){d.testimonialRotate(b)},e)),this.el.find('.controls li').on('click',function(a){typeof a.clientX!='undefined'&&clearInterval(c)}),this.el.swipe({swipeLeft:function(a){return b.find('.controls ul li span.active').parent().next('li').find('span').trigger('click'),a.stopImmediatePropagation(),clearInterval(c),!1},swipeRight:function(a){return b.find('.controls ul li span.active').parent().prev('li').find('span').trigger('click'),a.stopImmediatePropagation(),clearInterval(c),!1}}))}else this.el.find('.controls').length==0&&(h=this.el.find('.slides blockquote').height(),this.el.find('.slides blockquote').css({opacity:'0',transform:'translateX(-25px)','z-index':'1'}),this.el.find('.slides blockquote').css({opacity:'1',transform:'translateX(0px)'}).css('z-index','20'),this.el.find('.slides').stop(!0,!0).animate({height:h+20+'px'},450,'easeOutCubic'));(this.type=='multiple_visible'||this.type=='multiple_visible_minimal')&&(d=this,b=this.el,j=b,k=!!(b.attr('data-autorotate').length>1&&parseInt(b.attr('data-autorotate'))>100)&&parseInt(b.attr('data-autorotate')),b.find('img').length==0&&(j=a('body')),this.el.attr('data-style')!='multiple_visible_minimal'?this.el.find('blockquote').each(function(){a(this).find('.image-icon').insertAfter(a(this).find('p'))}):this.el.find('blockquote').length>4&&this.el.addClass('has-alf'),l=this.el.attr('data-style')=='multiple_visible_minimal',m=!(a('body.vc_editor').length>0),n=a('body.vc_editor').length>0,this.flickityEl=b.find('.slides').flickity({contain:!0,draggable:m,groupCells:l,lazyLoad:!1,imagesLoaded:!0,percentPosition:!0,prevNextButtons:!1,pageDots:!0,resize:!0,setGallerySize:!0,wrapAround:!0,autoPlay:k,pauseAutoPlayOnHover:n,accessibility:!1}),this.flickityEl.find('.vc_element.is-selected > blockquote').length>0&&(this.flickityEl.find('.vc_element.is-selected > blockquote').addClass('is-selected'),this.flickityEl.on('select.flickity',function(){d.flickityEl.find('.vc_element > blockquote').removeClass('is-selected'),d.flickityEl.find('.vc_element.is-selected > blockquote').addClass('is-selected')})),b.css('opacity','1')),o=this,a('body').on('click','.testimonial_slider:not([data-style*="multiple_visible"]):not([data-style="minimal"]) .controls li, .testimonial_slider[data-style="minimal"] .testimonial-next-prev a',function(){return o.resizeVideoToCover(),!1})},b.prototype.defaultPaginationSelect=function(e){var b=a(e.currentTarget),c,d,f;if(b.find('span').hasClass('active'))return!1;c=a('body.vc_editor').length>0?'> div':'blockquote',d=b.index(),f=b.parents('.testimonial_slider').find('.slides blockquote').eq(d).height(),b.parents('.testimonial_slider').find('li span').removeClass('active'),b.find('span').addClass('active'),b.parents('.testimonial_slider').find('.slides '+c).addClass('no-trans'),b.parents('.testimonial_slider').find('.slides '+c).css({opacity:'0',transform:'translateX(-25px)','z-index':'1'}),b.parents('.testimonial_slider').find('.slides '+c).eq(d).removeClass('no-trans').css({opacity:'1',transform:'translateX(0px)'}).css('z-index','20'),b.parents('.testimonial_slider:not(.disable-height-animation)').find('.slides').stop(!0,!0).animate({height:f+40+'px'},450,'easeOutCubic')},b.prototype.minimalNextPrevSelect=function(g){var b=a(g.currentTarget),c=a('body.vc_editor').length>0?'> div':'blockquote',d=b.parents('.testimonial_slider').find('.slides '+c+'.active').index(),e=d,f;return b.parents('.testimonial_slider').find('.slides '+c).addClass('no-trans'),b.parents('.testimonial_slider').find('.slides '+c).css({opacity:'0',transform:'translateX(-25px)','z-index':'1'}),b.parents('.testimonial_slider').find('.slides '+c).eq(d).removeClass('active'),b.hasClass('next')?(d+1>=b.parents('.testimonial_slider').find('.slides '+c).length?e=0:e=d+1,f=b.parents('.testimonial_slider').find('.slides '+c).eq(e).height(),b.parents('.testimonial_slider').find('.slides '+c).eq(e).addClass('active').removeClass('no-trans').css({opacity:'1',transform:'translateX(0px)'}).css('z-index','20'),b.parents('.testimonial_slider').find('.control-wrap ul').css({transform:'translateX(-'+20*e+'px)'})):(d-1==-1?e=b.parents('.testimonial_slider').find('.slides '+c).length-1:e=d-1,f=b.parents('.testimonial_slider').find('.slides '+c).eq(d-1).height(),b.parents('.testimonial_slider').find('.slides '+c).eq(d-1).addClass('active').removeClass('no-trans').css({opacity:'1',transform:'translateX(0px)'}).css('z-index','20'),b.parents('.testimonial_slider').find('.control-wrap ul').css({transform:'translateX(-'+20*e+'px)'})),b.parents('.testimonial_slider:not(.disable-height-animation)').find('.slides').stop(!0,!0).animate({height:f+40+'px'},450,'easeOutCubic'),!1},b.prototype.testimonialRotate=function(){var a=this.el.find('li').length,b=this.el.find('.pagination-switch.active').parent().index();this.el.parents('.toggle').length>0&&this.el.parents('.toggle').hasClass('open')?this.el.is('[data-style="minimal"]')?this.el.find('.testimonial-next-prev .next').trigger('click'):b+1==a?this.el.find('ul li:first-child').trigger('click'):this.el.find('.pagination-switch.active').parent().next('li').trigger('click'):this.el.is('[data-style="minimal"]')?this.el.find('.testimonial-next-prev .next').trigger('click'):b+1==a?this.el.find('ul li:first-child').trigger('click'):this.el.find('.pagination-switch.active').parent().next('li').trigger('click')},b.prototype.testimonialHeightResize=function(){var c,b,d;!this.el.is('.disable-height-animation')&&!this.el.is('[data-style*="multiple_visible"]')&&(c=a('body.vc_editor').length>0?'.slides > div':'.slides blockquote',this.el.is('[data-style="minimal"]')?b=this.el.find(c+'.active').index():b=this.el.find('.controls ul li span.active').parent().index(),d=this.el.find(c).eq(b).height(),this.el.find('.slides').stop(!0,!0).css({height:d+40+'px'}))},b.prototype.testimonialSliderHeight=function(){if(this.el.is('.disable-height-animation')&&!this.el.is('[data-style*="multiple_visible"]')){var b=0;this.el.find('blockquote').each(function(){a(this).height()>b?b=a(this).height():b=b}),b==0&&(b=100),this.el.find('.slides').css('height',b+40+'px'),this.el.animate({opacity:'1'}),this.fullWidthContentColumns()}},b.prototype.testimonialSliderHeightMinimalMult=function(){if(this.type=='multiple_visible_minimal'){var b=0;this.el.find('blockquote > .inner p').css('height','auto'),this.el.find('blockquote > .inner p').each(function(){a(this).height()>b?b=a(this).height():b=b}),b==0&&(b=200),this.el.find('blockquote > .inner p').css('height',b+'px')}},window.NectarTestimonialSlider=b})(jQuery)