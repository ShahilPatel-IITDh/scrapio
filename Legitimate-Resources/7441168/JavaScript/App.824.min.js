/*
     D Loja Virtual
 @link          http://www.dlojavirtual.com
 @package       app.FrontEnd.Js
 @since         v 1.0
 @author        Bruno Lehnen Simões
  @description   Revealing modules responsaveis pelo roteamento e pelas requisições aos Web Services
*/
var AppWidgets=function(){function a(c,d){d&&($.isArray(d)?$.each(d,function(g,h){c.addClass(h)}):c.addClass(d))}function b(c,d){var g=$("<"+c+" />",d.options);g.append(d.child);a(g,d.classes);return g}function e(c,d,g){return b("div",{classes:["grid-"+c,"alpha","omega"],child:d,options:g})}function f(c,d){return b("div",{classes:"row",child:c})}return{row:f,grid:e,button:function(c,d,g){g=g?g:[];var h=[];h.push('<span class="btn-icon"></span>');h.push('<span class="btn-text">'+c+"</span>");g.unshift("btn");
return b("button",{child:h,options:d,classes:g})},gridRow:function(c,d,g){var h=[];$.each(d,function(l,k){h.push(f(k))});return e(c,h,g)},customElement:b}}(),App={loaded:[],current:null,currentId:"cart-products",loadImage:null,getLoadImage:function(){var a=$("<div />");a.addClass("loading-cart");return a},refreshApp:function(){$.each($(document.head).children("script"),function(a,b){$("<script />",{type:b.type,src:b.src});$(b).remove();$(document.head).append(b)})},initJSON:function(a){window.JSON?
a.call(this):App.include("json",a)},init:function(){App.initJSON(function(){$(".one-step-checkout-item").show();App.Slider=$("#one-step-checkout-main").bxSlider({mode:"horizontal",captions:!1,responsive:!0,auto:!1,pager:!1,controls:!1,touchEnabled:!1,pagerSelector:null,infiniteLoop:!1,useCSS:!1,onSlideAfter:App.afterSlideCallback,onSlideBefore:App.beforeSlideCallback});App.beforeSlideCallback(document.getElementById("cart-products"),function(){$(document.body).on("click",".cart-slider-submit",function(a){"function"===
typeof App.current.submit&&App.current.submit.call(this,"click")});$(document.body).on("keyup",null,function(a){13==a.which&&"cart-products"!=App.currentId&&typeof App.isValidCallback(App.current.submit)&&App.current.submit("key")})})})},beforeSlideCallback:function(a,b){App.currentId=$(a).attr("id");App.include("carrinho/"+App.currentId,null,function(){App.current=window[App.currentId.toCamel()];App.loadComponents(App.current,null,function(){App.current.box=$(a);App.current.loading=$(a).children(".box-loading");
App.current.loadingStart=function(){App.current.loading.show()};App.current.loadingComplete=function(){App.current.loading.hide()};App.current.init(b)})})},afterSlideCallback:function(a){"undefined"!==typeof App.current.focusObj&&App.current.focusObj.focus()},loadComponents:function(a,b,e){a.components&&a.components.length?(App.initCallback(b),function c(){if(a.components.length){var d=a.components.shift(),g=d.toCamel()+"Component";App.include(g,null,function(h){a[d]=window[g];c()})}else App.initCallback(e)}()):
App.initCallback(e)},include:function(a,b,e){"carrinho/cart-products"==a?a="carrinho/cart-products.min.8565":"carrinho/cart-email"==a?a="carrinho/cart-email.min.8543":"carrinho/cart-final"==a?a="carrinho/cart-final.min.799":"ShippingComponent"==a?a="ShippingComponent.min.7801":"PaymentComponent"==a&&(a="PaymentComponent.min.526");var f=base_url+"frontend/js/"+a+".js";a=App.loaded.length;for(var c=0;c<a;c++)if(App.loaded[c]==f)return App.initCallback(e),!0;App.initCallback(b);$.getScript(f,function(){App.loaded.push(f);
App.initCallback(e)})},objLen:function(a){var b=0;$.each(a,function(e,f){"object"===typeof f&&null!==f&&b++});return b},initCallback:function(a,b,e){"function"==typeof a&&a.call(e?e:this,b)},isValidCallback:function(a){return"function"==typeof a},emptyCartIcon:function(){$(".list-products-shopping-cart ul").children("li").remove();$(".shopping-cart-total-products").html("0");$(".shopping-cart-total-price, .total-price-shopping-cart").each(function(a,b){$(b).html("Seu carrinho est\u00e1 vazio")});
$(".cart-action-buttons").hide()},deleteProductIcon:function(a){comb=$(".cart-comb-"+a.CatalogoCarrinho.estoque_id).remove();App.refreshCartIcon(a)},refreshCartIcon:function(a){var b=$(".shopping-cart-total-products"),e=$(".list-products-shopping-cart").first().children("ul").children("li").length;del="undefined"===typeof del?!1:del;a.CatalogoCarrinho&&(a.total_carrinho=a.CatalogoCarrinho.valor_total_produtos,a.estoque_id=a.CatalogoCarrinho.estoque_id);a.count_itens=e?e:"";a.count_itens?b.html(a.count_itens):
b.html("");$(".shopping-cart-total-price,.total-price-shopping-cart").each(function(f,c){$(c).html(a.total_carrinho)});$(".cart-action-buttons").show()},addProductIcon:function(a,b){$(b[0]).parent().hasClass("noimage")&&(b=$(b[0]).parent());a.CatalogoCarrinho&&(a={nome_produto:a.CatalogoCarrinhoProduto.nome_produto,total_produto:a.CatalogoCarrinhoProduto.valor_total,quantidade_produto:a.CatalogoCarrinhoProduto.quantidade_produto,estoque_id:a.CatalogoCarrinhoProduto.estoque_id,total_carrinho:a.CatalogoCarrinho.valor_total_produtos,
combinacoes:a.CatalogoCarrinhoProduto.combinacoes});var e=$(".cart-comb-"+a.estoque_id);b=$(b).clone();if(e.length)c=$.parseJSON(a.combinacoes),0<c.length?(d=a.nome_produto+" ("+a.quantidade_produto+")",$.each(c,function(g,h){d+="<br/><span>"+h.Combinacao.combinacao+": "+h.Combinacao.atributo+"</span>"}),d+="</span>",e.children(".name-product-shopping-cart").html(d)):e.children(".name-product-shopping-cart").html(a.nome_produto+" ("+a.quantidade_produto+")"),e.children(".price-product-shopping-cart").html(a.total_produto);
else{e=$(".list-products-shopping-cart").children("ul");var f=document.createElement("li");tot=$(".total-price-shopping-cart-wrapper");f.className="cart-comb-"+a.estoque_id;c=document.createElement("div");c.className="img-product-shopping-cart";$(c).append(b);$(f).append(c);var c=$.parseJSON(a.combinacoes);if(0<c.length){var d='<span class="name-product-shopping-cart">'+a.nome_produto+(1<a.quantidade_produto?" ("+a.quantidade_produto+")":"");$.each(c,function(g,h){d+="<br/><span>"+h.Combinacao.combinacao+
": "+h.Combinacao.atributo+"</span>"});d+="</span>";f.innerHTML+=d}else f.innerHTML+='<span class="name-product-shopping-cart">'+a.nome_produto+(1<a.quantidade_produto?" ("+a.quantidade_produto+")":"")+"</span>";f.innerHTML+='<span class="price-product-shopping-cart">'+a.total_produto+"</span>";e.append(f)}App.refreshCartIcon(a)}};