!function(i){"use strict";var t,e,o=0,n=0,s=(t=document.title,e=document.title,{update:function(i){document.title!==e&&(t=document.title),e=i?"("+i+") "+t:t,document.title=e}}),l=function(i,t,e){this.timeout=i,this._onClose=t,this._onClick=e};l.prototype={_getPermission:function(i){window.webkitNotifications.checkPermission()>0?window.webkitNotifications.requestPermission(i):i()},_setupNotification:function(i){var t=this;this._notification=i,i.show(),i.onclose=function(){t.hide()},i.onclick=t._onClick,this.timeout&&(this._hideTimeout=setTimeout((function(){t.hide()}),this.timeout))},hide:function(){this._cancelled||(this._cancelled=!0,this._hideTimeout&&clearTimeout(this._hideTimeout),this._notification.cancel(),this._onClose())},show:function(i,t,e){var o=this;this._getPermission((function(){try{o._setupNotification(window.webkitNotifications.createNotification(i,t,e))}catch(i){}}))},showUrl:function(i){var t=this;this._getPermission((function(){try{t._setupNotification(window.webkitNotifications.createHTMLNotification(i))}catch(i){}}))}};var c,a,h=(c=[],a=0,{add:function(i){var t;t=i,c.some((function(i){return i.messageId===t.messageId}))||(c.push(i),a+=10,i.element.appendTo(document.getElementsByClassName("alert-target")[0]),i.height=i.element.height(),i.element.css("top",-i.height+"px"),i.element.animate({top:a},"fast"),a+=i.height,o++)},remove:function(t){var e,o,n=t.height+10;if(a-=n,!((e=i.inArray(t,c))<0))for(t.element.remove(),c.splice(e,1),o=e;o<c.length;o++)c[o].element.animate({top:"-="+n})},moveItemsBellow:function(t,e){var o,n=t.height+10;if("up"!==e&&"down"!==e)throw new Error("direction can be only up or down");var s="up"===e?"-":"+";for("up"===e?a-=n:a+=n,o=i.inArray(t,c);o<c.length;o++)c[o].element.animate({top:s+"="+n})}}),u=function(i,t,e){this.timeout=i,this._onClose=t,this._onClick=e};u.prototype={_setupNotification:function(){var t=this;t.hidden=!1,i(".js-alert-close",this.element).click((function(){t.hide()})),i(".notification-content",this.element).click(t._onClick),i("iframe",this.element).on("load",(function(){i(this).contents().click(t._onClick)})),h.add(this),this.timeout&&(this._hideTimeout=setTimeout((function(){t.hide()}),this.timeout))},hide:function(){this._hideTimeout&&clearTimeout(this._hideTimeout),h.remove(this),this._onClose()},show:function(t){this.messageId=t.id,this.element=i('<div class="alert l-flex l-flex-nowrap alert-info t-alert '+t.className+'"><div class="l-flex-item alert-bell"><i class="glyphicon glyphicon-bell"></i></div> <div class="l-flex-item alert-message t-alert-message">'+t.message+'</div> <div class="l-flex-item alert-close"><button type="button" class="close js-alert-close t-alert-close" aria-label="Close"> <i class="glyphicon glyphicon-delete-1 small"></i></button></div>'+t.additionalMessage+"</div>"),t.icon&&i(".notification-icon",this.element).show().css("background-image","url("+t.icon+")"),this._setupNotification()},showUrl:function(t){this.element=i("<div class='notification-outer'><div class='notification-close'></div><iframe src='"+t+"'></iframe></div>"),this._setupNotification()},setVisibility:function(i){if(!(i&&!this.hidden||!i&&this.hidden)){var t=i?"visible":"hide",e=i?10001:-1,o=i?"down":"up";this.element.css({visibility:t,zIndex:e}),h.moveItemsBellow(this,o),this.hidden=!i}}},i.notify=function(t,e){var c,a=++n,h=e||function(){},r={icon:"",className:"",title:"Notification",message:"",additionalMessage:"",url:"",useFallback:!window.webkitNotifications,timeout:0,showCountInTitle:!window.webkitNotifications,onClose:h,onClick:function(){},closeOnClick:!0,obj:null};if("string"==typeof t)t={message:t};else if(!t)throw new Error("You need to pass an object specifying some options.");t=t||{},i.extend(r,t);var d=r.useFallback?u:l;return c=new d(r.timeout,(function(){r.onClose(a,r.obj,r.id),o--,r.showCountInTitle&&s.update(o),r.personalMessageId&&clickMessageButton(t.personalMessageId)}),(function(){r.onClick(a,r.obj),r.closeOnClick&&c.hide()})),r.url?c.showUrl(r.url):c.show(r),r.showCountInTitle&&s.update(o),c}}(jQuery);