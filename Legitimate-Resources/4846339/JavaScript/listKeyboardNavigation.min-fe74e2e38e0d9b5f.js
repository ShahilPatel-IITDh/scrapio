"use strict";var dla=window.dla||{};class ListKeyBoardNavigation{constructor(e){this._parent=document.querySelector(e),this._listSelector=".js-navigationList-list",this._listTriggerSelector=".js-navigationList-trigger",this._listItemSelector=".js-navigationList-list-item",this._listElement=this._parent.querySelector(this._listSelector),this._listTriggerElement=this._parent.querySelector(this._listTriggerSelector),this._listItemHandler=this.listItemListener.bind(this),this._listHandler=this.listListener.bind(this),this._navTriggerHandler=this.navigationTriggerListener.bind(this),this.init()}init(){this.setUpListeners()}setUpListeners(){this._listElement.addEventListener("keydown",this._listItemHandler),this._listElement.addEventListener("click",this._listHandler),this._listTriggerElement.addEventListener("keydown",this._navTriggerHandler)}removeListeners(){this._listElement.removeEventListener("keydown",this._listItemHandler),this._listElement.removeEventListener("click",this._listHandler),this._listTriggerElement.removeEventListener("keydown",this._navTriggerHandler)}listItemListener(e){if(!/(13|35|36|37|38|39|40)/.test(e.which))return;const t=this._listElement.querySelectorAll(this._listItemSelector),i=t.length;if(i<1)return;if(37===e.which)return this.focusEndTriggerElement(),void e.preventDefault();let s;for(s=0;s<i&&t[s]!==e.target;s++);switch(e.which){case 13:case 39:e.target.click();break;case 35:this._listElement.scrollTop=999999999,s=i-1;break;case 36:this._listElement.scrollTop=0,s=0;break;case 38:s--;break;case 40:s=s<i-1?s+1:s;break;default:s=0}s<0?this.focusEndTriggerElement():(t[s].focus(),e.preventDefault())}listListener(e){null===this._listTriggerElement||e.target.classList.contains(this._listItemSelector)||this.focusEndTriggerElement()}navigationTriggerListener(e){if(40!==e.which)return;const t=this._listElement.querySelectorAll(this._listItemSelector);t.length<1||(t[0].focus(),e.preventDefault())}focusEndTriggerElement(){this._listElement.scrollTop=0,this._listTriggerElement.focus();let e=2*this._listTriggerElement.value.length;this._listTriggerElement.setSelectionRange&&this._listTriggerElement.setSelectionRange(e,e)}}dla.listKeyBoardNavigation=ListKeyBoardNavigation,$(window).trigger("available","listKeyBoardNavigation");