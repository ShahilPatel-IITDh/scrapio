dla.helper.createNamespace("dla.payment.view"),dla.payment.view=function(e){var t,a,n,i,r,s,o,d,l,c,u,h,p,f,m,y,v,g,b,w,P,C,k,I,j,T=[],M=[],A=!1,x=!1,S=!0,E=[],R=!1,D=!1;const _={sofortueberweisung:{width:1060,height:860},paysafecard:{width:600,height:480},dotpay:{width:800,height:940},moneybookers:{width:800,height:800},boleto_bancario:{width:780,height:900},tbl:{width:780,height:900},trustpay:{width:1e3,height:700},sporopay:{width:980,height:455},bpay:{width:400,height:750},comgate:{width:1e3,height:730},china_union_pay:{width:1e3,height:730},visa:{width:1e3,height:730},gift_card:{width:1e3,height:730},sid_eft:{width:1e3,height:730},cash_to_code:{width:800,height:1080},cash_to_code_e_voucher:{width:800,height:1080},payr:{width:400,height:750},trustly:{width:600,height:600},sparkpay:{width:600,height:750},zapper:{width:768,height:542},sepaexpress:{width:1060,height:860},snapscan:{width:768,height:542},onlinebanking:{width:768,height:565},d24_bank_transfer:{width:500,height:640},d24_voucher:{width:500,height:490}};function L(e){if(0!==arguments.length){var t=$(e).data();this.id=t.id,this.el=$(e).add(O(this.id)),this.selected=!1,this.available=!0}}function O(e){return me().find('[data-id="'+e+'"]')}function F(e){this.parent.constructor.call(this,e);var t=me().find('.paymentSelectors [data-id="'+this.id+'"], .js-paymentSelectors [data-id="'+this.id+'"]');this.el=$(e).add(t)}function q(e){var t=new L(e);return fe().on("availableMethod",function(e,t){t.id===this.id&&this.enable()}.bind(t)),fe().on("unavailableMethod",function(e,t){t.id===this.id&&this.disable()}.bind(t)),fe().on("selectedMethod",function(e,t){t.id!==this.id||this.selected||(r&&(Q(),h.show()),this.select())}.bind(t)),fe().on("deselectedMethod",function(e,t){t.id===this.id&&this.deselect()}.bind(t)),O(t.id).on("click",function(){t.selected||(R=!1,C.selectMethod(t.id),V())}.bind(t)),t}function V(){const e=C.getSelectedPayment();e&&e.name&&(localStorage.setItem("ll-payment-method-change",e.name),document.dispatchEvent(new CustomEvent("ll-payment-method-change",{detail:{methodName:e.name}})))}function N(e,t){t?($(e).find(".js-verification-code").addClass("hide"),$(e).find(".cvcInput").removeClass("validate")):($(e).find(".js-verification-code").removeClass("hide"),$(e).find(".cvcInput").addClass("validate"))}function U(e,t){return!e.getEnableBonusFundsInWeb()||dla.skin.isMobile&&!llMobile.user.isLoggedIn||dla.skin.isMobile&&llMobile.user.isLoggedIn&&function(e,t){return t.price<=0||e.getBonusFunds()<=0}(e,t)}function W(){if(G())return a.removeClass("on"),void n.removeClass("on");z()&&R||(S||A||!x?S&&A?be():!S&&A&&(M.forEach((function(e){if(e.selected)return!0})),1)&&K():we(),C.getSelectedPaymentId()||B(),J())}function B(){R=!1,A?be():we()}function K(){var e=!1;return M.forEach((function(t){!e&&t.available&&(C.selectInstrument(t.id),e=!0,V())})),J(),e}function z(){var e=C.getSelectedPaymentId();if(!e)return!1;var t=!1;return T.forEach((function(a){a.id===e&&(t=a)})),M.forEach((function(a){a.id===e&&(t=a)})),!!t&&t.available}function H(e){var a=me().find(".jsRecurringReference");if("fulfilled"===t)return a.val(""),!0;(e=$(e)).prop("checked")&&a.val(e.val());const n=$(e).parents(".recurring-payment-methods"),i=n.find(".recurring-payment-method input[type='radio']:checked + label + payments-payment-method-monolith"),r=n.find(".recurring-payment-method input[type='radio']:not(:checked) + label + payments-payment-method-monolith");i.removeAttr("paybuttonhidden"),r.each((e,t)=>{const a=$(t);a.attr("paybuttonhidden")||a.attr("paybuttonhidden",!0)})}function G(){var e=0!==$(".payInOnOtherPageRedirectButton").length,t=0!==$(".game-ticket").length,a=0!==$(".js-shopping-cart").length;return e&&(t||a)}function J(){var e="undefined"!=typeof llMobile&&void 0!==llMobile.user&&!llMobile.user.isLoggedIn;s=$(".discount").add(".current-promotion").add(".bonuspromotionTermsAndConditions").add(".bonuspromotionTermsAndConditionsLink"),"empty"===t?s.hide():s.show(),c.addClass("hide"),w.addClass("hide"),d.addClass("hide"),l.addClass("hide"),m.addClass("hide"),g.addClass("hide"),b.addClass("hide"),v.addClass("hide"),u.addClass("hide"),o.addClass("hide"),e?y.addClass("has-error"):"enteredPriceAboveAvailableLimits"===t?o.removeClass("hide"):"impossible"===t?(y.removeClass("has-error"),l.removeClass("hide")):"subscriptionImpossible"===t?(c.removeClass("hide"),y.removeClass("has-error")):"possible"===t||"empty"===t?(y.removeClass("has-error"),G()?w.removeClass("hide"):d.removeClass("hide")):"undercut"===t?(m.removeClass("hide"),y.addClass("has-error")):"limitReached"===t?v.removeClass("hide"):"betLimitReached"===t?g.removeClass("hide"):"netLossLimitReached"===t?b.removeClass("hide"):u.removeClass("hide"),f.prop("disabled",!A||!!function(){var e=C.getSelectedPayment();if(e&&e.isThreeDSecure){var t=ye().find("input.cvcInput");if(t)return!k.validate.bind(t).call()}return!1}()),function(){var e=$(".js-pay-button");if("quickPayInSelectionForm"===fe().attr("id")){0===e.filter(":visible").length&&e.each((function(){$(this).removeClass("hidden")}))}else{var t=e.filter("[disabled]"),a=e.filter(":not([disabled])").length;t.length&&a&&t.addClass("hidden");let n=t.filter('[id*="-pay-button"]');!a&&n.length>1&&n.first().removeClass("hidden"),e.filter(":visible").length||$(".js-paymentSelector:not(.disabled)").click()}}(),$(".recurringSpinner").addClass("hide")}function X(){if(!ie()){var e,t;dla.helper.cookie.set("lastPaymentProcessId",P),e="payment_module_checking_"+C.getSelectedPaymentName(),(t=dla.messages.get(e))!=="!"+e+"!"&&$("#checking").text(t);var a=me().find(".jsPaymentChecker");0===a.length&&(a=p),me().parents(".payIn, .js-header-item-funds").addClass("forceOpen"),a.find("span").show(),a.show(),D&&$("#deactivateAll").show(),dla.skin&&dla.skin.isMobile&&!$("ll-checkout").length&&$(".payment-processing-overlay").length&&$(".payment-processing-overlay").offset()&&window.scrollTo(0,$(".payment-processing-overlay").offset().top-($(".mobile-app").length?70:14)),void 0!==dla.layout.disableExitPopup&&dla.layout.disableExitPopup()}}function Y(e){const t=e.form;return $(e).data("fixAmount")&&$("#"+$(t).attr("id")+"-fixPriceToPay").val($(e).data("amount")),(r=r||Z(e)).focus(),function(e){h&&h.closest("form").find(".submitPayment").show();e.closest("form").find(".submitPayment").hide(),h=e}($(e)),function e(){if(!r)return;r.closed?(r=null,te()):window.setTimeout(e,50)}(),!0}function Z(e){const t=e.form,a=t.method.value,{width:n,height:i}=_[a]||{width:400,height:500};return t.target="LottolandPayment",function(e){const t=e?e.document:null;if(!t)return;const{origin:a}=window.location,{resources:{requestPrefix:n}={}}=window.dla||{},{src:i}=window.document.querySelector('script[src*="one-styleguide"]')||{src:`${a}/${n}/skins/lottoland/js/core/@lottoland/one-styleguide.js`},r=t.createElement("script");r.src=i,r.type="module",r.crossorigin="use-credentials",t.head.appendChild(r),t.write(`\n            <div style="align-items: center; justify-content: center; height: 90vh; display: flex; margin: 0 auto; flex-direction: column;">\n                <ll-spinner\n                    size="49"\n                    strokeWidth="1"\n                    style="--color: #69A507"\n                ></ll-spinner>\n                <ll-typography size="p" style="margin-top: 32px;">\n                    ${window.dla.messages.aurumHosted_redirect_loading_||""}\n                </ll-typography>\n            </div>\n        `)}(r=window.open("",t.target,`width=${n},height=${i},menubar=no,resizable=yes,scrollbars=yes,status=no,titlebar=no,toolbar=no`)),r}function Q(e=!0){if(r){var t=r;r=null,t.close(),e&&dla.messages.showConfirm(dla.messages.get("common_payment_changeMethodMessage"),(function(){jsf.ajax.render("page")}),!1,"noClose")}}L.prototype.enable=function(){this.el.removeClass("disabled"),this.el.find("input[type=radio]").prop("disabled",!1);var e=this.el.filter("[data-type]").data(),t=this.el.find(".js-terms-conditions-input");if(!t.length||t.is(":checked")){var a=this.el.find(".js-pay-button");if(a.prop("disabled",!1),a.removeClass("hidden"),"quickPayInSelectionForm"===fe().attr("id")&&e.hasOwnProperty("forcedCvvEntry")&&e.forcedCvvEntry){a.prop("disabled",!0);var n=a.filter((function(){return"true"===$(this).attr("cvvValid")}));"true"===n.attr("cvvValid")?n.prop("disabled",!1):n.prop("disabled",!0)}}this.available=!0,this.hideMessages()},L.prototype.disable=function(){var e=this.el.find(".js-pay-button").not(":visible");this.el.addClass("disabled"),this.el.find("input[type=radio]").prop("disabled",!0),this.el.find(".js-pay-button").prop("disabled",!0),this.available=!1,this.showDisabledMessage(),this.deselect(),e.addClass("hidden")},L.prototype.showDisabledMessage=function(){var e=this.el.filter("[data-type]").data();this.hideMessages(),this.el.find(".js-hide-for-message").hide(),e.blocked?this.el.find(".blocked").show():e.expired?this.el.find(".expired").show():e.maxLimit<C.getPrice()?this.el.find(".limit").show():e.availableForSubscriptionWithinBacs?e.withinSavedInstrumentsLimit||this.el.find(".limit-number-saved-instruments-reached").show():this.el.find(".bacs-subscription").show()},L.prototype.hideMessages=function(){this.el.find(".message").hide(),this.el.find(".message-grey").hide(),this.el.find(".js-hide-for-message").show()},L.prototype.select=function(){this.selected=!0,this.el.addClass("selected"),this.el.find("input[type=radio]").prop("checked",!0)},L.prototype.deselect=function(){this.selected=!1,this.el.removeClass("selected"),this.el.find("input[type=radio]").prop("checked",!1)},F.inheritsFrom(L);var ee=$(window);function te(){if(dla.skin.isMobile){const e=t=>setTimeout(()=>!llMobile.growlMessages.hasMessages()||t--<0?window.location.reload():e(t),300);e(5)}else jsf.ajax.render("pageDynamicContent topNavigation front deactivateAll")}function ae(e){var t=function(e){var t=e.substring(0,e.indexOf("://")).toUpperCase();return"GET"===t?t:"POST"}(e);e=function(e){return e=(e=e.replace("post://","https://")).replace("get://","https://")}(e);var a=dla.helper.getUrlParameter(e),n=document.createElement("form");for(var i in n.target=r?"LottolandPayment":"_parent",n.method=t,n.action=-1===e.indexOf("?")?e:e.substring(0,e.indexOf("?")),n.style.display="none",a)if(a.hasOwnProperty(i)){var s=document.createElement("input");s.type="hidden",s.name=decodeURIComponent(i),s.value=decodeURIComponent(a[i]).replace(/\^\^\^/g," "),n.appendChild(s)}document.body.appendChild(n),n.submit(),r&&document.body.removeChild(n)}function ne(e){if(!e)return Q(),void te();(function(e){if(ie()){const t=document.querySelector(`[data-payment-url='${e}']`).dataset.compoundId,a=e.replace("get://","https://"),n={type:"processing",transactionId:t,url:a};return top.postMessage(n,"*"),!0}return!1})(e)||(!function(e){return e.startsWith("post://")||e.startsWith("get://")}(e)?r?r.location.replace(e):window.location.replace(e):ae(e))}function ie(){const e=window.location.href;return"keno"===dla.helper.getUrlParameter(e).site}function re(e){var t,a=(e=$(e)).attr("data-check-id"),n=e.attr("data-payment-additional-redirect-type"),i=e.attr("data-payment-additional-redirect-url");if(a&&(e.removeAttr("data-check-id"),ue(a,500)),"PAY_R"!==n||((t=$("#payrPaymentFallback")).is(":visible")||t.hasClass("in"))||dla.frontContent.show("payrPaymentFallback",{transactionId:a,merchantReference:a}),"THREE_D_SECURE"===n){var r=dla.helper.storage.get("3DSecureRedirectCheckId");if(a&&r!==a){var s=e.attr("data-payment-iframe-width"),o=e.attr("data-payment-iframe-height");dla.helper.storage.setForSession("3DSecureRedirectCheckId",a),dla.helper.storage.setForSession("3DSecureWidth",s),dla.helper.storage.setForSession("3DSecureHeight",o),dla.skin.isMobile?i.startsWith("get://")?ne(i=i.replace("get://","https://")):ae(i):(dla.frontContent.show("threeDSecure",{myUrl:i}),D=!0)}}}function se(){dla.helper.cookie.remove("payInAmount")}function oe(e,t){var a=$(e.elements[t]),n=a.attr("data-ott-name");n&&(a.attr("name",n),"AcctNumber"===n&&a.val(a.val().replace(/\s+/g,"")))}function de(e){k.isAmount(e)&&C.setPrice(function(e){e=dla.helper.getCleanAmountValue(e);var t=parseFloat(e);if(dla.resources.currencyDecimals>0)for(var a=0;a<dla.resources.currencyDecimals;a++)t*=10;return parseInt(Math.round(t))}(e))}ee.on("beforeunload",(function(){Q()})),ee.on("statechange",(function(){"partnerPayIn"!==ve()&&Q()}));var le=function(e,t){if(se(),"SELF_MANAGED"!==t)switch(ce(),r=null,fe().find("[data-type=merchantReference]").val(e),t){case"AUTHORIZED":case"APPROVED":case"DECLINED":a($(".js-payment-finished-button").get(0)),D=!1;break;case"CANCELLED":case"CANCELED":case"REFUSED":case"ERROR":case"FAILURE":case"OPEN":a($(".js-payment-canceled-button").get(0)),D=!1;break;default:ue(e)}function a(e){jsf.ajax.request(e,"action",{"javax.faces.behavior.event":"action","javax.faces.partial.event":"click",execute:"@form",render:"navigate page deactivateAll front topNavigation",paymentType:j})}};function ce(){for(;E.length;)window.clearTimeout(E.pop())}function ue(e,t){if(ie()&&top.postMessage({type:"processing",transactionId:e},"*"),dla.helper.cookie.set("lastPaymentProcessId",P),pe(),ce(),t)E.push(window.setTimeout((function(){ue(e)}),t));else{var a=me().find(".jsPaymentCheckButton")[0];jsf.ajax.request(a,"click",{"javax.faces.behavior.event":"action","javax.faces.partial.render":"none",onevent:function(e){if("success"===e.status){var t=$("#"+e.source.id);if(t.attr("data-failed"))return ge(function(e){return e.attr("data-etid")?e.data():fe().data()}(t)),t.removeAttr("data-failed"),void(t.attr("data-hosted-failed")&&(t.removeAttr("data-hosted-failed"),window.location.replace(window.location.href.split("?")[0])));re(t),se()}},paymentType:j,transactionId:e})}}function he(e){return(3!==fe().find(".jsPayInSelectedPacket").val()||""!==fe().find(".js-pay-in-manual-amount").val())&&(fe().find(e).hasClass("disabled")||!fe().find(e).is(":visible")&&"quickPayInSelectionForm"!==fe().attr("id")?(fe().find(".newPaymentMethod").hide(),!1):!!k.isShoppingCartConsistent(fe().find(e))&&!k.confirmEqualPayOutAmount($(e.form)))}function pe(){k.isRequiredPlayerDataMissing()||(fe().find('[data-in-process="hidden"]').hide(),X())}function fe(){return $.contains(document.documentElement,p[0])||(p=$("#"+P)),p}function me(){var e=fe().closest(".js-payment-wrapper");return e.length?e:fe()}function ye(){return $('form[data-payment-method="'+C.getSelectedPaymentName()+'"]')}function ve(){return j}function ge(e){$("input[name$=etid]").val(e.etid),dla.helper.onAvailability(["universalTracking"],(function(){dla.universalTracking.trackDeposit(dla.universalTracking.action.DEPOSIT_FAIL)})),me().parents(".payIn.forceOpen").removeClass("forceOpen"),sessionStorage.removeItem("tejs_aboutToBuy")}function be(){if(G())return a.removeClass("on"),void n.removeClass("on");S=!1,K(),a.removeClass("on"),n.addClass("on")}function we(){if(G())return a.removeClass("on"),void n.removeClass("on");var e;S=!0,e=!1,T.forEach((function(t){!e&&t.available&&(C.selectMethod(t.id),e=!0,V())})),J(),a.addClass("on"),n.removeClass("on")}function Pe(){return C}var Ce={init:function(e,r){ce(),P=e,j=r,!1;var s=$("#"+e);0===s.length&&(s=$("body")),p=s,fe().on("priceUpdate",(function(e,t){var a=dla.skin.isMobile?$("#paymentMethods"):$("#"+P);a.find("payments-bacs-payment-method").prop("amount",t.price),a.find("payments-redirect-payment-method").prop("payableAmount",t.price);var n,i=Pe();for(n in dla.skin.isMobile&&!U(i,t)||($('.total [data-display-type="price"]').html(dla.helper.formatPrice(t.price)),$('.stake [data-display-type="price"]').html(dla.helper.formatPrice(t.totalPrice))),me().find(".jsDisplayedPriceToPay").val(t.price),t.pricePerPaymentMethod){var r,s,o=n.replace(/_/g,""),d="payIn"===j?t.totalPricePerPaymentMethod[n]:t.pricePerPaymentMethod[n],l="payIn"===j?t.totalPrice:t.price;if(isNaN(d))d=l,r=void 0;else{r=t.currencyPerPaymentMethod[n];var c=t.providerCurrencyDecimalsPerPaymentMethod[n];c>dla.resources.currencyDecimals&&(s=dla.resources.currencyDecimals,dla.resources.currencyDecimals=c)}a.find("div[class*='method-"+o+"']").find(".payButton .amount").text(dla.helper.formatPricePlain(d,r)),s&&(dla.resources.currencyDecimals=s)}(!R||R&&!z())&&B()})),fe().on("availablePaymentChanged",(function(){z()&&R||B(),J()})),fe().on("paymentStateChanged",(function(e,a){t=a})),fe().on("paymentInstrumentsAvailable",(function(e,t){A=t,W()})),fe().on("paymentMethodsAvailable",(function(e,t){x=t,W()})),me().on("keyup",(function(){R=!0})),$(window).on("subscriptionChanged",(function(e,t){Pe().setSubscription(t)})),a=me().find('[data-payment-group="methods"]'),n=me().find('[data-payment-group="instruments"]'),i=me().find('[data-type="paymentGroupSwitch"]'),d=me().find(".canPay"),o=me().find(".priceAboveAvailableLimits"),l=me().find(".canNotPay"),c=me().find(".subscriptionImpossible"),u=me().find(".noPaymentRequired"),f=me().find('[data-type="payRecurringButton"]'),m=me().find(".undercutMessage, .js-header-overlay-funds-undercut"),y=me().find(".js-header-overlay-funds-custom"),me().find(".jsPaymentInstrumentsSubmitElement"),v=me().find(".limitReached"),g=me().find(".betLimitReached"),b=me().find(".netLossLimitReached"),w=me().find(".payInOnOtherPageRedirectButton"),T=[];var h=a.find('[data-type="PaymentMethod"]'),S=n.find('[data-type="PaymentInstrument"]'),E=[];h.each((function(e,t){T.push(q(t)),E.push($(t).data())})),S.each((function(e,t){M.push(function(e){var t=new F(e);return fe().on("availableInstrument",function(e,t){t.id===this.id&&this.enable()}.bind(t)),fe().on("unavailableInstrument",function(e,t){t.id===this.id&&this.disable()}.bind(t)),fe().on("selectedInstrument",function(e,t){t.id===this.id&&(this.select(),H(this.el.find("input")),N(this.el,!1))}.bind(t)),fe().on("deselectedInstrument",function(e,t){t.id===this.id&&(this.deselect(),N(this.el,!0))}.bind(t)),fe().on("finishedInstrumentSelection, availablePaymentChanged",function(e){k.validate.bind(this.el.find("input.cvcInput")).call(e)}.bind(t)),O(t.id).on("click",function(e){t.selected||(R=!1,C.selectInstrument(t.id),k.validate.bind(this.el.find("input.cvcInput")).call(e),V())}.bind(t)),t}(t)),E.push($(t).data())})),(k=new dla.payment.validator).init(me(),j,P),(C=new dla.payment.model).init(p.data(),E,p,j),"payIn"===j&&dla.payment.packetList&&(I=new dla.payment.packetList).init(p),S.length?i.removeClass("hide"):i.addClass("hide"),B(),dla.helper.onAvailability(["universalTracking"],(function(){dla.universalTracking.pseudoPageView("pay1")})),function(){var e=window.location;"partnerPayIn"!==ve()&&top!==self&&top.location.replace(location);var t=e.search;if(t&&0===t.indexOf("?paymentCheck=")){var a=t.substring("?paymentCheck=".length),n=a.indexOf("&");n&&(a=a.substring(0,n));var i=$("#paymentCheckForm-button");if(i.attr("data-get-me-out-of-the-loop"))return i.removeAttr("data-get-me-out-of-the-loop"),void window.location.replace(window.location.href.split("?")[0]);ue(a,1500)}}(),$(window).trigger("available",P+"-paymentInitFinished")},getModel:Pe,getValidator:function(){return k},initPaymentWindow:Z,openPaymentWindow:function(e){if(dla.helper.cookie.set("lastPaymentProcessId",P),dla.payment.helper.initClientInfo(),!k.isShoppingCartConsistent(e))return!1;var t=e.form;return!k.confirmEqualPayOutAmount($(t))&&(!!k.validatePaymentKyc($(t).closest(".js-payment-gateway").attr("data-kyc"))&&setTimeout(()=>Y(e),800))},openPaymentWindowWithoutChecks:Y,forwardToProvider:ne,handleCreditCardAjaxEvent:function(e){if(dla.helper.preventDoubleClick(e),e.paymentType=j,"success"===e.status){se(),re(e.source);var t=e.source.form;if("true"===$(t).attr("data-use-client-side-encryption")||"true"===$(t).attr("data-gateway-allowed"))return;X();for(var a=0;a<t.elements.length;a++)oe(t,a);var n=$(t).find("iframe[name=ottFrame]");t.elements.OTT.value=n.attr("data-ott-id"),t.action=n.attr("data-ott-url"),t.target=n.attr("name"),t.submit()}},handleRecurringCreditCardAjaxEvent:function(e){dla.helper.preventDoubleClick(e),e.paymentType=j,"success"===e.status&&(se(),re(e.source))},showPaymentProcess:pe,getSelectedPaymentForm:ye,showPaymentChecker:X,setRecurringReference:H,paymentFailed:ge,finished:le,payMobile:function(e,t,a){k.isRequiredPlayerDataMissing()?k.showAddAvsPlayerData(e):k.validatePaymentKyc($(".recurring-payment-method.js-payment-gateway.selected").attr("data-kyc"))&&(!0,dla.payment.helper.initClientInfo(),jsf.ajax.request(e,t,{"javax.faces.behavior.event":"action","javax.faces.partial.event":"click","javax.faces.partial.execute":e.id+" "+e.form.id,"javax.faces.partial.render":a,paymentType:j,onevent:function(e){const t=dla.payment.getInstance(e.source);t&&(t.getValidator().handleValidationResponse(e),"success"!==e.status||e.responseXML.querySelector("[id$='quickPayRecurring'],[id$='payInModule']")||t.getValidator().showInconstancyMessage())}}),"undefined"!=typeof ticket&&dla.helper.onAvailability(["universalTracking"],(function(){dla.universalTracking.trackUniversal([dla.universalTracking.action.SUBMIT_TICKET,ticket.name,dla.universalTracking.action.CLICK])})))},payMobile3dSecure:function(e){if(k.isRequiredPlayerDataMissing())k.showAddAvsPlayerData(e);else if(k.validatePaymentKyc($(".recurring-payment-method.js-payment-gateway.selected").attr("data-kyc"))){!0,dla.payment.helper.initClientInfo(),"undefined"!=typeof ticket&&dla.helper.onAvailability(["universalTracking"],(function(){dla.universalTracking.trackUniversal([dla.universalTracking.action.SUBMIT_TICKET,ticket.name,dla.universalTracking.action.CLICK])}));var t=$("li.selected"),a=t.data("recurring-reference");t.closest("form").find("input[id$=cseRecurringReference]").val(a),t.find("[id$=threeDSecurePayButton]").click()}},payDesktop:function(e,t,a,n,i,r){if(!(E.length>0)&&k.validatePaymentKyc($(e).closest(".js-payment-gateway").attr("data-kyc"))){dla.payment.helper.initClientInfo(),Q();var s=n?n+"Recurring":t;dla.helper.onAvailability(["universalTracking"],(function(){dla.universalTracking.trackEvent("pay",s),dla.universalTracking.pseudoPageView("pay2")})),me().find(".jsPaymentSelection .recurring").css("display","none");var o={"javax.faces.behavior.event":"action","javax.faces.partial.render":"quickCheck realCheck deactivateAll",onevent:function(e){dla.payment.getInstance(e.source).getValidator().handleValidationResponse(e)},paymentMethod:t,etid:i,idempotencyToken:r,recurring:n,paymentType:j},d=$(e).closest(".submitPayment, .js-payment-gateway").find(".termsAndConditions input, .js-terms-conditions-input");o.execute=o.execute||"",d.length&&(o.execute+=" "+d.attr("id")),"buy"!==j&&(o.execute+=" "+e.id+" "+e.form.id),o.execute+=" "+$(e.form).find(".jsDisplayedPriceToPay").attr("id"),pe(),jsf.ajax.request(e,"click",o)}},payDesktop3dSecure:function(e,t,a,n){if(!(E.length>0)&&he(e)&&k.validatePaymentKyc($(e).closest(".js-payment-gateway").attr("data-kyc"))){dla.payment.helper.initClientInfo(),Q(),pe();var i=n?n+"Recurring":t;dla.helper.onAvailability(["universalTracking"],(function(){dla.universalTracking.trackEvent("pay",i),dla.universalTracking.pseudoPageView("pay2")})),me().find(".jsPaymentSelection .recurring").css("display","none"),$("input[id *= recurringReference]").val(n),$(".js-3dsecure-recurring-paybutton").click()}},payDesktopWithCvv:function(e,t,a,n,i,r){if(!(E.length>0)&&he(e)&&k.validatePaymentKyc($(e).closest(".js-payment-gateway").attr("data-kyc"))){dla.payment.helper.initClientInfo(),Q(),pe();var s=n?n+"Recurring":a,o={"javax.faces.behavior.event":"action","javax.faces.partial.event":"click",onevent:function(e){dla.payment.getInstance(e.source).getValidator().handleValidationResponse(e)},paymentMethod:a,etid:i,idempotencyToken:r,recurring:n,paymentType:j};o.execute=o.execute||"","buy"!==j&&(o.execute+=" "+e.id+" "+e.form.id),dla.helper.onAvailability(["universalTracking"],(function(){dla.universalTracking.trackEvent("pay",s),dla.universalTracking.pseudoPageView("pay2")})),me().find(".jsPaymentSelection .recurring").css("display","none"),$("input[id *= recurringReference]").val(n),jsf.ajax.request(e,"click",o)}},check:ue,showNewPayments:we,showRecurringPayments:be,closePaymentWindow:Q,setPayInAmount:function(e,t){return t.stopPropagation(),k.validateAmountElement(e)?de(e.value):C.setPrice(0)},setPriceInCurrency:de,setFirstPayInOption:function(){if(I)return I.setFirstPayInOption()},getPaymentType:ve,selectedPaymentAvailable:z,renderPageContent:te,initPayPal:function(e,t,a,n,i,r){var s={desktopValidation:he,requiredPlayerDataMissing:k.isRequiredPlayerDataMissing,check:ue,model:Pe(),finish:le,currency:n},o={client:e,payPal:t,vaultRequired:"true"===i,vaultActive:"true"===r};dla.payment.braintree.initPayPal(s,o,a)},unblockView:function(){for(var e=!1,t=$(".modal-dialog").toArray(),a=0;a<t.length;a++){var n=t[a];n&&null!==n.offsetParent&&(e=!0)}e&&($("#realCheck").hide(),$("#deactivateAll").hide()),D=!1}};if(e&&e.test){var ke={selectedPaymentAvailable:z};$.extend(ke,Ce),C=e.model,T=e.paymentMethodViews,M=e.paymentInstrumentViews}return Ce},$(window).trigger("available","paymentViewJsLoaded");