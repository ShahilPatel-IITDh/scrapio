import{css as t,property as e,object as s,customElement as i,LitElement as r,html as a}from"/de_DE/skins/lottoland/js/core/@lottoland/core/lit-element-c16c867bd604ce25.js";import"/de_DE/skins/lottoland/js/core/@lottoland/one-styleguide-8c4d78c467d1e167.js";import{resources as n,messages as o}from"/de_DE/skins/lottoland/js/core/@lottoland/lsl-89f9ba0900100572.js";import{subscribe as l,unsubscribe as c}from"/de_DE/skins/lottoland/js/cms/@lottoland/client-side-message-bus-caa0c9677398cddd.js";function h(t,e){return e||(e=t.slice(0)),t.raw=e,t}function u(t,e,s,i){var r,a=arguments.length,n=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,s,i);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(n=(a<3?r(n):a>3?r(e,s,n):r(e,s))||n);return a>3&&n&&Object.defineProperty(e,s,n),n}var p=t`:host .recurrent-deposit-limit-container{display:flex;flex-direction:column;align-items:center;gap:24px}:host .recurrent-deposit-limit-container ll-cta-group{width:100%}:host .recurrent-deposit-limit-container ll-cta-group ll-button{margin-bottom:calc(var(--ll-base-unit)*3);padding-left:0;width:100%}:host .recurrent-deposit-limit-logo{margin-bottom:calc(var(--ll-base-unit)*3);height:64px}:host .recurrent-deposit-limit-logo img{width:64px}:host .recurrent-deposit-limit-text2{text-align:center}`;const d={apiKey:"AABB139",Authorization:"",apiBase:"/api/client/v2",url:window.location.origin};class g{constructor(t){this.defaultError=500,this.url=d.url,this.createWithBody=(t,e,s,i)=>{let r={method:t,body:JSON.stringify(e),headers:this.getHeader(!0,s,i)};return s||(r=Object.assign({},r,{credentials:"include"})),r},this.createWithoutBody=(t,e)=>{let s={method:t,headers:this.getHeader(!1,e)};return e||(s=Object.assign({},s,{credentials:"include"})),s},this.apiBase=d.apiBase,this.url=d.url,this.servicePath=t?"/"+t:""}joinParam(t,e){return Array.isArray(e)?e.map(e=>t+"="+e).join("&"):t+"="+e}prepareQuery(t){return t?Object.keys(t).reduce((e,s)=>e?e+"&"+this.joinParam(s,t[s]):"?"+this.joinParam(s,t[s]),""):""}async fetch(t){try{const e=this.prepareQuery(t),s=this.createWithoutBody("GET",!1),i=""+this.getUrl(this.url)+this.apiBase+this.servicePath+(e||""),r=await fetch(i,s),a=await r.json();return this.parseSuccess(r.status,a)}catch(t){return this.parseFailure(this.defaultError,[t.message])}}async get(t,e){try{const s=this.createWithoutBody("GET",!1),i=""+this.getUrl(this.url)+this.apiBase+this.servicePath+"/"+t+(e||""),r=await fetch(i,s),a=await r.json();return this.parseSuccess(r.status,a)}catch(t){return this.parseFailure(this.defaultError,[t.message])}}async post(t,e="",s=""){try{const i=this.createWithBody("POST",t,!1,{}),r=""+this.getUrl(this.url)+this.apiBase+this.servicePath+"/"+e+(s||""),a=await fetch(r,i),n=await a.json();return a.ok?this.parseSuccess(a.status,n):this.parseFailure(a.status,n.exceptionMessages)}catch(t){return this.parseFailure(this.defaultError,[t.message])}}async update(t){try{const{id:e}=t,s=this.createWithBody("PUT",t,!1,{}),i=""+this.getUrl(this.url)+this.apiBase+this.servicePath+"/"+e,r=await fetch(i,s),a=await r.json();return r.ok?this.parseSuccess(r.status,a):this.parseFailure(r.status,a.exceptionMessages)}catch(t){return this.parseFailure(this.defaultError,[t.message])}}async delete(t){try{const e=this.createWithoutBody("DELETE",!1),s=""+this.getUrl(this.url)+this.apiBase+this.servicePath+"/"+t,i=await fetch(s,e);if(204===i.status)return this.parseSuccess(i.status);const r=await i.json();return this.parseFailure(i.status,r.exceptionMessages)}catch(t){return this.parseFailure(this.defaultError,[t.message])}}async saveOrUpdate(t){const{id:e}=t;return e?this.update(t):this.post(t)}parseSuccess(t,e){return{ok:!0,data:e,status:t}}parseFailure(t,e){return{ok:!1,messages:e,status:t}}getUrl(t){return t.includes("localhost")&&(t="http://localhost:8081"),t}encodeQueryData(t){const e=[];for(const s in t)e.push(encodeURIComponent(s)+"="+encodeURIComponent(t[s]));return"?"+e.join("&")}getHeader(t,e,s){let i={Accept:"application/json"};return t&&(i=Object.assign({},i,{"Content-Type":"application/json"})),e||(i=Object.assign({},i,{"X-API-KEY":n.apiKey,Authorization:d.Authorization})),!s||0===Object.keys(s).length&&s.constructor===Object||(i=Object.assign({},i,s)),i}}const y=new class extends g{constructor(t){super(),this.apiBase="/api/client/v1/players/me/refresh",this.url=t||""}getUrl(t){return t.includes("localhost")&&(t="http://localhost:8080"),t}};class m extends g{constructor(){super(),this.refreshAuthenticationToken=async()=>{var t,e,s;const i={grant_type:"password",scope:"Lottoland",refresh_token:(null===(t=this.authToken)||void 0===t?void 0:t.refreshToken)||"",client_id:this.apiKey||""},r=await y.post(i);(null===(e=null==r?void 0:r.data)||void 0===e?void 0:e.access_token)&&(null===(s=null==r?void 0:r.data)||void 0===s?void 0:s.refresh_token)&&this.setAuthToken({accessToken:r.data.access_token,refreshToken:r.data.refresh_token})},this.timeUntilCall=500,this.numberOfAttempts=10,this.attempts=0,this.attemptsTimer=null}getHeader(t,e,s){var i;let r=super.getHeader(t,e,s);return this.apiKey&&(r=Object.assign({},r,{"X-API-KEY":this.apiKey})),(null===(i=this.authToken)||void 0===i?void 0:i.accessToken)&&(r=Object.assign({},r,{Authorization:"Bearer "+this.authToken.accessToken})),r}getUrl(t){return this.domain||t}setDomainUrl(t){this.domain=t}setAuthToken(t){this.authToken=t}setApiKey(t){this.apiKey=t}async performOperationWithRetry(t){try{return await t()}catch(e){return await this.refreshAuthenticationToken(),await t()}}async callWithRetry(t){const e=await t();return![200,403].includes(null==e?void 0:e.status)&&(this.attempts+=1,this.attempts<this.numberOfAttempts)?new Promise(e=>{this.attemptsTimer=setTimeout(async()=>{const s=await this.callWithRetry(t);e(s)},this.timeUntilCall)}):(this.attemptsTimer&&clearTimeout(this.attemptsTimer),e)}checkExpiredToken(t){var e,s;if(401===t.status&&"INVALID_TOKEN"===(null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.message))throw new Error(null===(s=null==t?void 0:t.data)||void 0===s?void 0:s.message)}async safeGet(t,e){return this.performOperationWithRetry(async()=>{const s=await this.get(t,e);return this.checkExpiredToken(s),s})}async getWithRetry(t,e){return this.callWithRetry(()=>this.safeGet(t,e))}async safePost(t,e,s){return this.performOperationWithRetry(async()=>{const i=await this.post(t,e,s);return this.checkExpiredToken(i),i})}async postWithRetry(t,e,s){return this.callWithRetry(()=>this.safePost(t,e,s))}}new m;const w=new class extends m{constructor(){super(),this.buildUrl=()=>{const t=this.localePrefix?""+this.localePrefix:"";this.servicePath=t+"/api/client/v1/messages"},this.apiBase=""}async loadTranslations(t,e,s,i){this.setApiKey(t),this.setLocalePrefix(e?"/"+e:"");const r=s||"lottoland",a=await w.loadTranslationsByPrefixsAndSkin(i,r);return a.ok&&a.data||{}}setLocalePrefix(t){this.localePrefix=t,this.buildUrl()}async loadTranslationsByPrefixsAndSkin(t=[],e){let s={};return await Promise.all(t.map(async t=>{const i=await this.get(t,"?skin="+e);s=Object.assign({},s,i.data)})),this.parseSuccess(200,s)}},k={getRequestOptions({headers:t={},includeXApiKey:e=!1}){let s=t;return e&&(s=Object.assign({},s,{"X-API-KEY":n.apiKey})),{credentials:"include",headers:s}},getResponse:(t,e=!0)=>t.then(t=>e?t.json():t.text()),getStatusCode:t=>t.then(t=>t.status),composeRequestUrl:t=>""+n.requestPrefix+t},T="/accounts/activity/recurrentDepositLimitPopUpWaitingTimeExpiration",v={showModal(t=""){return k.getResponse(fetch(""+t+T,Object.assign({},k.getRequestOptions({headers:{countryCode:(e=n.countryLocale,e.indexOf("_")>0?e.split("_")[1]:e.toUpperCase())}}),{method:"POST"})),!0);var e}};var A,O,f,x;const b="recurrent_deposit_limit";let P=class extends r{constructor(){super(...arguments),this.visible=!1,this.baseURI="",this.subscribeToTopics=()=>{l("PlayerLoggedIn",async(t,e)=>{const{playerId:s}=e.payload;if(s){const{waitingTimeExpired:t}=await v.showModal(this.baseURI);t&&(this.visible=!0)}})},this.renderLogo=()=>a(A||(A=h([' <div class="recurrent-deposit-limit-logo"><img src="','"</div> '])),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIYAAACACAYAAADOIBGMAAALD0lEQVR4Xu2dPY8cxxGG+/YcOBAgRk7k4IDjrAhHJwlwsAcDCiwoMeAzlNEgwMCSQtLObMPwBbICBz5mxJ1oHA0oNpkqOgEOBEgkB/oF+xPuJ6zn7dm563m7ej52PnZmtop4QGC357Perq6u6Z0zRk1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTW2odtd8aA5/8sREs9hEe9fJ/ytlSMAne1fWR/BV5/bu7JEKYYTMZ0sTmYfszuZ2zxxYBfIBlbFxlnjyDrt3M4MorOK8gyjjJG4ujjJR4Lv57NKOZfPZqTIAbF6x98LM98N+ayyO4PCRfN5LUqPWyOCjsEDOuHk1Q7Li72xl7s4ec1O1gRsiCfvR+nKTzi0NISqK8drhDOUFEkcS+WsZlMQ7QS5Rwc5ic+ciNg+f/mBOL16bS2UY/PNb88IsjB81auUa89lzfwc/PeBmriWCOPgqNlcXb8xKGSaffCEIo9YoEO3FtIOYm7h28aN5xCehDI8n//OF8bPfmPjpd0ncqGTRLF/dnO+95CaZ/ftH83c+AWW43Pl1XhzvnNjPl9XEQaqyWa1gKorx8c5vRWGskrwwRn7IPs5bBWEgp+CDKsMnKIwETBjYz3mrIIzzN+Y5H1QZPkXCSLgujholwtBoMV5KhLE6f20KZiklwjiPzQkfUBkHZcJAycH1dd5KhGGLV8JBleFTJoyEpevrvJUIQ/OL8VJBGCvX13lTYUyWdoWBZ/woia/52wvz8stvzEoZH+0KQ5ksKgxFRIWhiKgwFJGGwti/checfvCZiT/+i1kp44MX6zQThk5XJ0O7sxIVxmRQYSgiKgxFRIWhiKgwFBEVhiKiwlBEVBiKiApDEVFhDAz8Cuyv/zWr331hVr96ZFbz+yYtT1OJ2pJ89vZHqRPRFtv88Wt/n5ugwhgAEAOcap1xRPd0Q7Cv35+Z1T++8Y9XBRXGlsiJge9jy2Qi4XMogs9LhdExEMTHf24vMtRikR67ShRRYfRELUEcm9X7n6YR5fPzNOfAOkzeJz7Dd2iDR+U3+Qjvj1kLhPfnsnVh4MKQMI0BPveqYNsyh+HGQwiSAOqCiIChA/vk4+RIzumzc397sFVh8MEHzyLt+XwdIdAWswVvPxlJ9EBPr7PPukAkiD5FwsQ58jmwb3oTBsKft/0IQK/ma5GAQ4LO6EEQTJbsBs9pkc89tiYMhDpv+xEAh/K1MHboCOQSx0Lv7JObCCKcG845G1q2Jgz7Op+QeocK9SoJ8f1V622b5CltUxTRpGl0b8LIwJCC6DEGynq6nXXwPYnqRwm0hYjgoA/+kFY3RScu0u8wG0GegN5eJlw+TjAHoojXuzCmQihSVM1J4CR0kjaqnxALHF5VJHZVuLAfFxXGBqCnevci4cGZ35apVd/YgKpVT5wrb5vbjwqjHnasFpyK+gy3delaEB6LcM0iA+fsbbdGhVGDUAJdFilshCkTRPK9W/1E4YvzFHyW5SJltYoM5CxFQ0wocqgwaiAlbkXT2cJkD6zrG01mL+j1pSJZpO142wxb76Bt3vrIb+f6Om98wB0ShlSgw+yD22Wgl9rZBd8z0FHBC7lFkUCKEmNJwCxY19d544PtkDC8G74IO7aoZtCFIJjQrOO9T9PvcXweXsRhkq7R9XXe+GA7IgypXsE3NiMoipJw3jZ8Hlm0wOeog3B7YCu4dN7uUPn0h9DfMeGL3QFh8A0GGNO5XagtQE/tOkpIZDlOJsgH/0qHt5CogTekJMOec+5L+UWwOygML1os5BsrhuKoODntk8zhWY3DFYyLvQ6aQVHUyPk8tYbCwA3FQZoiXVBXsLNDCZzX0wYiCjcJzs7nRuwLOZKhXe5a8lFDeH10A2GECkObwhlzF9gs3z1u4EZ67RLm9/12feM+9YU48BkXtSBo3k6KGm6H8KMGXXwdYYSeLWxKaJxvE37iKB1TzCsCAuqT3BC4uB3++JqA1Mk4amA753uKGrTDOsKQMt4mhEJ6W1iH0zGl3MLLQQLt+gKCZOe7Qy9HDEBOv9kPt3PFnn/pPDWsIwzAKtwUlGu77pE8PEglYkk828wrrNMpeknnI/lBihosMLcz5l86TzurK4wxwTdFemKJ5xC5+7Hw2/SFNFRLQx+QcggpavA+uc3tcEIHnrIw+Fql4YF7pySeroGT32OBgpI8R4oaPNvzImJ+duIMJ3zwiQrDy4eESOD1OqFN14iJ79qBkpBdvPOP5OGE9++K53Y44ROYqDA4hIamnvapJG7ukXxTuwRVTHZsRtXE/CYnWT/U4+8BLySmfa9nJ3wSExUGF6tCN21b8Pm5FD3x3QTuJN7+vzdHOyMMTjzLVkL1hVvFFOlgOOPlBhw90zyDT2SiwuA/TstJ2TYo/dnjQn6G0xSv7sHie22e7Iww2AFt/L60CRzOJbrKcbyZCQvjlXm5O8Kg6+Tv+6Qon8joOgfi49H3SxVGz1QRRaiI1SZ8TPpehdEnXgiXWBQXsdqCj+t9zw1UGN0hVSZzVChitQUf2/ueG0xWGANIPssSzr6m0F7k4uTzzQ4LYxvTVeuQQGWz62TThaerb4m/N4lm1ySMyykK4979/M3oq3cy9ldijkjx6L+raWkILnAJyw+S5HM+W+aEEc3iKQqDZwNVnz10AZJLiGEbwxngXMcriccmhjCekzBW5iD5NzFh8Pjex5RwqHD05E7y7I25Muau+dAThjOcTEUYPK5KCdeuwPmWN5TZkviBuWM4zwCH+ydTEoa0VmFboXybeDOSyJ+q3i7WwUyEhQGxJOKYijAAP2HlELoLVFn3mv/Z4nx/KYhj9YsH5rqvokvXcJ7B6x13Ae4c0tLFW1HA7iWDijSkODcR2Sx6Gb/wbCxI74zoo/w8FKRhhDt9mniyReaoSBxTpM/C0rbhFfDSMJJMVR+yLFJD5AgMK5OEVklPFZt802wEUZTbXX53W6rwDTMVOSGdJLsQNTi/kqbr8jAimc07ktAS7V2ZKQ8xE48a0k8SxM4QHEYKDFMY3DzM/ceOLXZRTUP6hfhU4NwisJZ0yT6vbFAUH3Ss8PMC4FUAJ4A0E5Gihf8ahJp2GZuDZEdL3vHYkJKxvlZP9UXoGrldwrI46axhNnq8MrFwkNHg/WwxmtaQwk+UgbTcoHG0kAw/Z0P+cR6bEyuWkWF+6T9dnkKpXHrHh/d4PWXz3GLSZqfm+0u+iVhQI9zEUWB/A0vXExomn70y9mGpmmSBxwHbWP7XFG95AQgtMraP19WKTVqXEo0rcoiRIpLziovg+z3VfLs7e8w3FZT9fdMh4FU21wTypevWZiE7Y4FHAcjwpTF62+CcpNmHFbRQrwCaV2xqgcgRqBhujaJfywciBb2ZT62+HSa9SkhIQdkfkumaoihR9CagTuoVO2lFSxAW6cKfPocXHKvwT20VRDSNFG0b6hyHsyeeExxndB1BSgURFf75z+vwn55Qa24YWkLRYw2WP2LxSxsiwVNgRCReo+mxKPwlW3vPQNRKDLOWEoFkDsO7rTAzQB0BhSc4m52XLQNAGwjBPiIPJJQ51m/lC0QJW7zSOkXfZnOPigJpmzJBJFFCh44B2M9PzOn+8d7Sc2DLYOFuSbKLXOJUo8SADGtU/vQfc/rJl2YJB7JTN+KokhhUEGMxPMrHolokhHAq6g1wsH2X57EgGnx2nOYjaIttkHOUiMEu3D2PzWMVxMjMrnRbi4SduiHXKoYJ2nox02PMFqxYXpn4mbBEEp/Zz1+bF2hrt/neHPUthv8DL02YVBYvCF8AAAAASUVORK5CYII="),this.renderText=(t,e)=>a(O||(O=h(['\n      <div class="recurrent-deposit-limit-','">\n        <ll-typography size="p">',"</ll-typography>\n      </div>\n    "])),t,o.getMessage(this.translations,e)),this.closeHandler=()=>{this.visible=!1},this.renderButtons=()=>a(f||(f=h(['\n      <ll-cta-group stacked>\n        <ll-button\n          size="regular"\n          type="primary"\n          href="','"\n          trackName="','_submit"\n        >\n          ','\n        </ll-button>\n        <ll-link @click="','" trackName="','_later"\n          >',"</ll-link\n        >\n      </ll-cta-group>\n    "])),o.getMessage(this.translations,"recurrent_deposit_limit_btn_accept_link"),b,o.getMessage(this.translations,"recurrent_deposit_limit_btn_accept"),this.closeHandler,b,o.getMessage(this.translations,"recurrent_deposit_limit_btn_close"))}async connectedCallback(){super.connectedCallback(),this.subscribeToTopics(),!this.translations&&(this.translations=await w.loadTranslations(n.apiKey,null,null,["recurrent_deposit_limit"]))}disconnectedCallback(){super.disconnectedCallback(),c("PlayerLoggedIn")}render(){return a(x||(x=h(['\n      <ll-modal trackname="','" ?visible="','" hideClose="true">\n        <div slot="title">\n          ','<ll-typography size="h4" style="--ll-typography-text-transform:capitalize;"\n            >','</ll-typography\n          >\n        </div>\n        <section class="recurrent-deposit-limit-container">\n          '," "," ","\n        </section>\n      </ll-modal>\n    "])),b,this.visible,this.renderLogo(),o.getMessage(this.translations,"recurrent_deposit_limit_title"),this.renderText("text1","recurrent_deposit_limit_text1"),this.renderText("text2","recurrent_deposit_limit_text2"),this.renderButtons())}};P.styles=p,u([e({type:Boolean})],P.prototype,"visible",void 0),u([e({type:Object,converter:s})],P.prototype,"translations",void 0),u([e({type:String})],P.prototype,"baseURI",void 0),P=u([i("ll-recurrent-deposit-limit")],P);
