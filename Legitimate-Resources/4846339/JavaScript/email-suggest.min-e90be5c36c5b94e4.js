"use strict";!function(t){var i={suggClass:"",domains:[]};function s(s,e){this.$field=t(s),this.options=t.extend(!0,{},i,e),this._defaults=i,this._domains=this.options.domains,this.init()}s.prototype={init:function(){Array.prototype.indexOf||this.doIndexOf(),this.fieldLeftOffset=parseInt(this.$field.css("padding-left").replace("px","")),this.$field.on("focus touchstart",t.proxy(this.displaySuggestion,this)),this.$cval=t("<span class='jsSuggestContainer' />").css({visibility:"hidden",fontFamily:this.$field.css("fontFamily"),fontWeight:this.$field.css("fontWeight"),letterSpacing:this.$field.css("letterSpacing")}).insertAfter(this.$field),this.$suggOverlay=t("<span class='jsSuggestOverlay "+this.options.suggClass+"' />").css({lineHeight:this.$field.css("lineHeight"),fontFamily:this.$field.css("fontFamily"),fontWeight:this.$field.css("fontWeight"),letterSpacing:this.$field.css("letterSpacing")}).insertAfter(this.$field),t(document).on("keyup",this.$field,t.proxy(this.displaySuggestion,this)),this.$field.on("keydown",t.proxy((function(t){39!==t.which&&9!==t.which||this.autocomplete()}),this)),this.$suggOverlay.on("mousedown touchstart",t.proxy(this.autocomplete,this))},suggest:function(t){var i=t.split("@");return i.length>1&&(t=i.pop()).length?(this._domains.filter((function(i){return 0===i.indexOf(t)})).shift()||"").replace(t,""):""},autocomplete:function(){if(void 0===this.suggestion||this.suggestion.length<1)return!1;this.$field.val(this.val+this.suggestion),this.$suggOverlay.text(""),this.$cval.text("")},displaySuggestion:function(t){this.val=this.$field.val(),this.suggestion=this.suggest(this.val),this.suggestion.length?t.preventDefault():this.$suggOverlay.text(""),this.$suggOverlay.text(this.suggestion),this.$cval.text(this.val);var i=this.$cval.width();this.$suggOverlay.css("left",this.fieldLeftOffset+i+"px")},doIndexOf:function(){Array.prototype.indexOf=function(t,i){if(null==this)throw new TypeError('"this" is null or not defined');var s=this.length>>>0;for(i=+i||0,Math.abs(i)===1/0&&(i=0),i<0&&(i+=s)<0&&(i=0);i<s;i++)if(this[i]===t)return i;return-1}}},t.fn.emailSuggest=function(t){return this.each((function(){new s(this,t)}))}}(jQuery||Zepto),$(window).trigger("available","emailSuggestLoaded");