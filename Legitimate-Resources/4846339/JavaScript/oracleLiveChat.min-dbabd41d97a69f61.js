"use strict";var dla=window.dla||{};dla.oracleLiveChat={getQuerystring:()=>window.location.search.split("?")[1],encodeData:t=>encodeURIComponent(JSON.stringify(t)),decodeData:t=>JSON.parse(decodeURIComponent(t)),getEmailAndFirstnameFromUrl(t){const e=this.getQuerystring()&&this.getQuerystring().split("&")||[];let a="";return e.forEach(e=>{const i=e.split("=")[0],n=e.split("=")[1];if("data"===i){const e=this.decodeData(n);e[t]&&(a=e[t])}}),a},getData(t){let e=$("#refreshOracleChatCommonFields").data(t)||"";return!e&&["email","firstname"].indexOf(t)>-1&&(e=this.getEmailAndFirstnameFromUrl(t)),e},enable(t={}){const e={container_element_id:"myChatLinkContainer",info_element_id:"myChatLinkInfo",link_element_id:"myChatLink",instance_id:"oracleConditionalChatLink",module:"ConditionalChatLink",type:7,common_fields:JSON.stringify({"contacts.email":this.getData("email"),"contacts.first_name":this.getData("firstname")})};t.comingFromNativeApp&&(e.open_in_new_window=!1,$(window).on("oracleLiveChatAvailable",this.checkAndOpenLiveChat)),RightNow.Client.Controller.addComponent(e,"//".concat(this.getData("chatUrlPrefix"),".widget.custhelp.com/ci/ws/get")),setInterval(this.checkAvailability,1e3)},getVipAskLink:()=>$("#refreshOracleChatCommonFields").data("chatAskUrl"),isChatAgentAvailable:()=>$(".rn_ChatAvailable").length>0,checkAvailability(){$&&(dla.oracleLiveChat.isChatAgentAvailable()?($("#oracleChatLink").show(),$(window).trigger("oracleLiveChatAvailable",!0)):dla.oracleLiveChat.getVipAskLink()?$("#oracleChatLink").show():($("#oracleChatLink").hide(),$(window).trigger("oracleLiveChatAvailable",!1)))},checkAndOpenLiveChat(t,e){!0===e&&(oracleConditionalChatLink.chatLinkClicked(),$(window).off("oracleLiveChatAvailable",this.checkAndOpenLiveChat))},update(){if(RightNow.Client&&RightNow.Client.Event&&RightNow.Client.Event.evt_updateWidgetData){const t={commonFields:{"contacts.email":this.getData("email"),"contacts.first_name":this.getData("firstname")}};RightNow.Client.Event.evt_updateWidgetData.fire({data:t,id:"oracleConditionalChatLink"})}},click(){if($("#refreshOracleChatCommonFields").data("nativeIosApp")){const t={email:this.getData("email"),firstname:this.getData("firstname")};window.location.href="".concat(dla.oracleLiveChat.getData("localePrefix"),"/open-oracle-live-chat?flca=true&data=").concat(this.encodeData(t))}else this.getVipAskLink()&&!this.isChatAgentAvailable()?window.open(this.getVipAskLink(),"_blank"):$("#myChatLink a").click()}},$(window).trigger("available","oracleLiveChat");