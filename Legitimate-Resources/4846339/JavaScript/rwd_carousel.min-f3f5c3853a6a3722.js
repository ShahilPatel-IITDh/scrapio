!function(t){"use strict";t.llCarousel=function(e,s){this.$element=t(e),this.data=this.$element.data(),this.defaults={step:1,targetSelector:".js-carousel-allPodContainer",moverSelector:".js-carousel-allPodContainer-mover",contentSelector:".js-carousel-allPodContainer-content",backButtonSelector:".js-control-back",forwardButtonSelector:".js-control-forward",elementsSelector:".js-carousel-pod",actionsContainerSelector:".js-pod-actions",baseScrollTime:200,enableFilters:!1,autoscroll:!1},this.nextPressed=!1,this.backPressed=!1,this.settings=t.extend({},this.defaults,s,this.data)};t.llCarousel.prototype={loopCheck:function(){window.requestAnimationFrame(this.loopCheck);var t=this.$targetElement.scrollLeft();this.nextPressed&&this.$targetElement.scrollLeft(t+10),this.backPressed&&this.$targetElement.scrollLeft(t-10)},getItemWidth:function(){return this.$element.find(this.settings.elementsSelector).outerWidth()},calculateNumberOfVisibleItems:function(){return this.$targetElement.width()/this.$elementsList.outerWidth()>>0},checkArrowVisibility:function(){0===this.$targetElement.scrollLeft()?(this.$backButton.addClass("inactive"),this.backPressed=!1):this.$backButton.removeClass("inactive"),this.$targetElement.get(0)&&this.$targetElement.get(0).scrollLeft===this.$targetElement.get(0).scrollWidth-this.$targetElement.get(0).clientWidth?(this.$forwardButton.addClass("inactive"),this.nextPressed=!1):this.$forwardButton.removeClass("inactive"),this.maxMovement<0&&(this.$forwardButton.addClass("inactive"),this.$backButton.addClass("inactive"))},scroll:function(t){var e=this.getItemWidth();this.$targetElement.stop().animate({scrollLeft:e*t},this.settings.baseScrollTime),this.currentPosition=t,this.checkArrowVisibility()},updateCurrentStep:function(){var t=this.getItemWidth();this.currentStep=Math.round(this.$targetElement.get(0).scrollLeft/t)},getStepValue:function(){return isNaN(+this.settings.step)&&"fullsize"===this.settings.step?this.calculateNumberOfVisibleItems():this.settings.step},next:function(){this.currentStep+=this.getStepValue(),this.currentStep>this.maxMovement&&(this.currentStep=this.maxMovement),this.scroll(this.currentStep)},back:function(){this.currentStep-=this.getStepValue(),this.currentStep<0&&(this.currentStep=0),this.scroll(this.currentStep)},sortElements:function(e){return function(e){var s=e;return function(e,i){return t(e).data(s)<t(i).data(s)?-1:t(e).data(s)>t(i).data(s)?1:0}}.bind(this,e)()},createFiltersFunctions:function(){var e={};this.$elementsList.map((function(){t.extend(e,t(this).data())}));for(var s=Object.keys(e).filter((function(t){return/^filter/.test(t)})),i=0,n=s.length;i<n;i++)this.filtersFunctions[s[i]]=function(){return this.sortElements(s[i])}.bind(this)()},updateMaxMovement:function(){this.maxMovement=this.podEqualWidth?Math.floor((this.podSize*this.$elementsList.length+7)/this.podSize-this.$targetElement.width()/this.podSize)+1:Math.floor(this.$targetElement.width()/this.$elementsList.length)+1},onResize:function(){this.podSize=this.$elementsList.outerWidth(),this.settings.autoscroll||this.updateMaxMovement(),this.checkArrowVisibility()},checkPodEqualWidth:function(){for(var t=0;t<this.$elementsList.length;t++)if(this.podSize!==this.$elementsList[t].offsetWidth)return!1;return!0},init:function(){var e;isNaN(+this.settings.step)&&"fullsize"!==this.settings.step&&(this.settings.step="fullsize",this.$element.attr("data-step","fullsize")),this.$backButton=this.$element.find(this.settings.backButtonSelector),this.$forwardButton=this.$element.find(this.settings.forwardButtonSelector),this.$targetElement=this.$element.find(this.settings.targetSelector),this.$elementsList=this.$element.find(this.settings.elementsSelector),this.$content=this.$element.find(this.settings.contentSelector),this.$actionsList=this.$element.find(this.settings.actionsContainerSelector).children(),this.podSize=this.$elementsList.outerWidth(),this.podEqualWidth=this.checkPodEqualWidth(),this.currentStep=0,this.maxMovement=this.settings.autoscroll?0:this.updateMaxMovement(),this.filtersFunctions={},this.updateCurrentStep=this.updateCurrentStep.bind(this),this.loopCheck=this.loopCheck.bind(this),(e=this).$targetElement.on("scroll",(function(){e.updateCurrentStep(),e.checkArrowVisibility()})),e.$targetElement.on("swipeleft",e.back),e.$targetElement.on("swiperight",e.next),e.settings.autoscroll?(e.$backButton.on("mousedown touchstart",(function(){e.nextPressed=!1,e.backPressed=!0})),e.$forwardButton.on("mousedown touchstart",(function(){e.backPressed=!1,e.nextPressed=!0})),e.$backButton.on("mouseup touchend",(function(){e.backPressed=!1,e.nextPressed=!1})),e.$forwardButton.on("mouseup touchend",(function(){e.backPressed=!1,e.nextPressed=!1})),window.requestAnimationFrame(e.loopCheck)):(e.$backButton.on("click",(function(){t(e).triggerHandler("back")})),e.$forwardButton.on("click",(function(){t(e).triggerHandler("next")})),t(e).on("back",e.back),t(e).on("next",e.next)),e.settings.enableFilters&&(e.createFiltersFunctions(),e.$actionsList.each((function(s,i){t(i).on("click",(function(){var s="filter"+(t(i).data().callFilter[0].toUpperCase()+t(i).data().callFilter.slice(1));e.$elementsList.sort(e.filtersFunctions[s]).detach().appendTo(e.$content)}))}))),t(window).on("resize orientationchange",(function(){e.onResize()})),this.checkArrowVisibility()}},t.fn.llCarousel=function(e){return t(this).each((function(){if(void 0===t(this).data("llCarousel")){var s=new t.llCarousel(this,e);s.init(),s.onResize(),t(this).data("llCarousel",s)}}))},t(document).ready((function(){dla.InjectionObserver.register({SELECTOR:".js-carousel",init:function(e){t(e).llCarousel()}})}))}(jQuery),$(window).trigger("available","rwdCarouselJsLoaded");