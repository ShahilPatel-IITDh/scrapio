dla.helper.createNamespace("dla.combiTip"),dla.combiTip=function(){var e={widget:null,baseURL:null,lotteries:{},winometer:$.noop,currency:dla.resources.currency};function i(){var i=e.widget,t=1,a=0,n=0,r=$("#combiTipDoubleJackpot",i).is(":checked"),o=r?2:1,c=[],s=$("#combiTip_field",i).is(":checked")?"single":"full",l=["powerBall","megaMillions","superEnalotto","megaMillionsIndex","powerBallIndex","elGordo","summerGordo","keno247","keNow","multiMulti","germanKeno"],d=e.lotteries;for(var m in d)if(d.hasOwnProperty(m)){var p=d[m],u=$(".lottery."+m,i);$("input",u).is(":checked")?(t*=p.chances[s],a+=y(m,p),n+=r?p.prices[s+"Double"]:p.prices[s],c.push(r?p.quickTips[s+"Double"]:p.quickTips[s]),u.removeClass("fade")):u.addClass("fade");var k=u.find(".jackpot"),g=d[m].showAsterisk?"*":"",h=!l.includes(m)?"":'<span class="asterisk-info asterisk-info--comby-tip">'+g+"</span>";k.html(dla.helper.formatJackpot(y(m,e.lotteries[m]),k.data("displayCurrency"))+h)}dla.Winometer&&e.winometer.setPercentage(100*(1-t));var b=$(".main .stake",i),f=$(".main .jackpot",i),T=e.currency,w=dla.helper.formatPrice(n,T),v=dla.helper.formatJackpot(a,T);b.html(w),f.html(v),$(window).trigger("combiTip:stakeChanged",[w,a]);var E="mc=rocket&tickets="+c.join(",");function y(e,i){var t=i.jackpot;return"german6aus49"===e?(t.marketingJPgerman6aus49+t.marketingJPspiel77)*o+t.marketingJPGK2german6aus49+t.marketingJPGK2spiel77:t*o}$(".submitTicket",i).attr({href:e.baseURL+"?"+E,"data-query":E})}function t(e,t){var a;if(e.is("input"))a=e.is(":checked")?dla.universalTracking.action.SELECT:dla.universalTracking.action.DESELECT;else{var n=$(this).find("input");n.is(":checked")?(n.prop("checked",!1),a=dla.universalTracking.action.DESELECT):(n.prop("checked",!0),a=dla.universalTracking.action.SELECT)}dla.universalTracking.trackUniversal([t,a],"GoldenBasket"),i()}return{settings:e,init:function(i){if(e.widget=$(".combiTip .widget"),i&&$.extend(!0,e,i),!e.widget)throw Error("You have to define the combiTip widget element!");return e.baseURL=$(".submitTicket",e.widget).attr("href"),this.initWinometer(),this.bindEvents(),this.buildCombiTip(),this},initWinometer:function(){dla.Winometer&&(e.winometer=new dla.Winometer($(".winometer_flex",e.widget)),e.winometer.setPercentage(0))},bindEvents:function(){var i=e.lotteries,a=e.widget;$(".lottery",a).on("click",(function(e){dla.helper.onAvailability("universalTracking",(function(){t.call(this,$(e.target),$(this).data("combiTipLottery"))}))})),$("#combiTip_field, #combiTip_ticket",a).on("click",this.buildCombiTip),$("#combiTipDoubleJackpot",a).on("change",this.buildCombiTip),$(".submitTicket",a).on("click",(function(e){for(var t in i)if(i.hasOwnProperty(t)&&$("#combiTip_"+t,a).is(":checked"))return!0;dla.messages.showConfirm(dla.messages.get("combiTip_select_at_least_one")),e.preventDefault(),e.stopPropagation()}))},buildCombiTip:i}}(),$(window).trigger("available","combiTipLoaded");