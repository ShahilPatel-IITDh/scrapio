(function($){"use strict";function createSimpleSlider(element,options){var slider=$(element);var container=$('<div class="ss-container"/>');var viewport=$('<div class="ss-viewport"/>');var slides=slider.children();var count=slides.length;var width=slider.width();var slideWidth=width;var pager=null;var pagerBtns=null;var current=0;var intervalId=null;var paused=false;var sliding=false;var swiping=false;var touchStart=null;var touchDelta=null;var delay=0;var responsiveDefaults={gap:0,move:1,view:1,speed:300};var defaults={auto:true,autoInterval:5e3,autoPause:true,autoReverse:false,lazy:true,loop:true,nav:true,pager:true,touch:true};var optBase=$.extend({},defaults,responsiveDefaults,options);var opt=$.extend({},optBase);function lazyload(slide){if(opt.lazy&&!slide.data("lazyloaded")){slide.find("img").each(function(index,img){var $img=$(img);var src=$img.attr("data-src");if(src){$img.attr("src",src)}});slide.data("lazyloaded",true)}}function slide(forward){if(count>opt.view){var index=current+(forward?1:-1)*opt.move;if(opt.loop||index>=0&&index<count){sliding=true;var x=(slideWidth+opt.gap)*opt.move*(forward?-1:1);var pos=forward?opt.view*(slideWidth+opt.gap):-(slideWidth+opt.gap);var n=(current+(forward?opt.view:-1))%count;for(var i=0;i<opt.move;i++){n=n<0?count-1:n==count?0:n;var slide=slides.eq(n);lazyload(slide);slide.css({left:pos,display:"block"});n+=forward?1:-1;pos+=(slideWidth+opt.gap)*(forward?1:-1)}current=index>=count?index-count:index<0?count+index:index;viewport.css({transform:"translateX("+x+"px)","transition-duration":opt.speed+"ms"})}}}function goto(index){if(count>1&&index>=0&&index<count){current=index;var hi=current+opt.view;var lo=0;if(hi>=count){lo=hi%count;hi=count}viewport.css({transform:"","transition-duration":""});slides.each(function(i){var slide=$(this);var pos=null;if(i>=current&&i<hi){pos=(i-current)*(slideWidth+opt.gap)}else if(i>=0&&i<lo){pos=(count-current+i)*(slideWidth+opt.gap)}if(pos!==null){lazyload(slide);slide.css({left:pos,display:"block"})}else{slide.css("display","none")}if(pagerBtns){if(i===current){pagerBtns.eq(i).addClass("ss-active")}else{pagerBtns.eq(i).removeClass("ss-active")}}});sliding=false}}function next(){delay=1;slide(true)}function prev(){delay=1;slide(false)}function play(){paused=false;if(!intervalId){intervalId=setInterval(function(){if(!paused&&!sliding&&!swiping&&!delay){slide(!opt.autoReverse);if(!opt.loop&&(!opt.autoReverse&&current===count-1||opt.autoReverse&&current===0)){pause()}}delay=delay>0?delay-1:0},opt.autoInterval)}}function pause(){paused=true;if(intervalId){clearInterval(intervalId);intervalId=null}}function resize(){if(opt.responsive){opt=$.extend({},optBase);var windowWidth=$(window).width();var key=null;for(var w in opt.responsive){w=parseInt(w);if(w<=windowWidth&&(key===null||w>key)){key=w}}if(key!==null){var r=opt.responsive[key];for(var o in responsiveDefaults){if(o in r){opt[o]=r[o]}}}}opt.view=Math.max(opt.view,1);opt.gap=opt.view>1?Math.max(opt.gap,0):0;opt.move=Math.min(Math.max(opt.move,1),opt.view);width=slider.width();slideWidth=opt.view>1?(width-(opt.view-1)*opt.gap)/opt.view:width;container.css("height",slides.eq(current).outerHeight());slides.css("width",slideWidth);goto(current)}function build(){container.css({position:"relative",overflow:"hidden"}).append(viewport).appendTo(slider);slides.detach().appendTo(viewport);slides.css({position:"absolute",top:0,left:0});viewport.on("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",function(){if(sliding)goto(current)});if(opt.pager){pager=$('<div class="ss-pager"></div>');var html="";for(var i=0;i<count;i++){html+='<button class="ss-pager-btn'+(i===current?" ss-active":"")+'">'+(i+1)+"</button>"}pager.on("click",function(e){delay=1;goto($(e.target).index())});pager.append(html);pagerBtns=pager.children();container.after(pager)}if(opt.nav){var prevBtn=$('<button class="ss-nav-prev">prev</button>');var nextBtn=$('<button class="ss-nav-next">next</button>');container.after(nextBtn);container.after(prevBtn);prevBtn.on("click",function(){prev()});nextBtn.on("click",function(){next()})}if(opt.touch&&typeof TouchEvent!=="undefined"){viewport.on("touchstart",function(e){if(count>1&&!swiping&&e.touches.length===1){if(sliding){sliding=false;goto(current)}var touch=e.touches[0];swiping=true;touchStart={x:touch.pageX,y:touch.pageY};touchDelta=null}});viewport.on("touchmove",function(e){if(swiping&&e.touches.length===1){var touch=e.touches[0];var dx=touch.pageX-touchStart.x;var dy=touch.pageY-touchStart.y;if(Math.abs(dx)>Math.abs(dy)){touchDelta={x:dx,y:dy};var index=current+(dx<0?opt.view:-1);if(opt.loop||index>=0&&index<count){index=(count+index%count)%count;var slide=slides.eq(index);var w=dx<0?width+opt.gap:-(slideWidth+opt.gap);lazyload(slide);slide.css({left:w,display:"block"});viewport.css("transform","translateX("+dx+"px)")}}}});viewport.on("touchend",function(e){if(swiping&&touchDelta){if(Math.abs(touchDelta.x)>30){slide(touchDelta.x<0)}else{goto(current)}delay=1;swiping=false}})}if(opt.auto&&count>1){play();if(opt.autoPause){viewport.on("mouseenter mouseleave",function(e){switch(e.type){case"mouseenter":case"mouseover":pause();break;case"mouseleave":case"mouseout":pause();play();break}})}}$(window).on("resize",resize);resize()}build();function simpleSlider(){}simpleSlider.prototype={get count(){return count},get index(){return current}};simpleSlider.prototype.next=next;simpleSlider.prototype.play=play;simpleSlider.prototype.pause=pause;simpleSlider.prototype.prev=prev;return new simpleSlider}$.fn.simpleSlider=function(options){var sliders=[];this.each(function(){if(!this.simpleSlider){this.simpleSlider=createSimpleSlider(this,options);sliders.push(this.simpleSlider)}});return sliders.length===1?sliders[0]:sliders}})(window.jQuery||window.cash);
