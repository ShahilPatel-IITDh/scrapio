"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5790],{12184:function(e,n,i){i.d(n,{z:function(){return d}});var t=i(47568),r=i(70655),o=i(55833),s=i(9669),a=i.n(s),l=i(67294),c=i(4596),u=function(e){return{username:e.email,password:e.password,redirect:e.redirect||null}},d=function(){var e=(0,c.o)((function(e){return e})),n=e.setUser,i=e.user,s=(0,l.useState)(!1),d=s[0],p=s[1],m=(0,l.useState)(void 0),x=m[0],f=m[1],h=function(){p(!1)},g=function(){var e=(0,t.Z)((function(e){var t;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return p(!0),i?(t={},[4,a().post("/proxy/v2/sequencing/public/user/logout",t).catch((function(){localStorage.removeItem("token"),localStorage.removeItem("userId"),n(null),o.av(null),window.location.reload()}))]):[3,2];case 1:r.sent(),r.label=2;case 2:return[4,a().post("/proxy/v2/v1/member/login",u(e)).then((function(e){var i=e.data;if(!0===i.tfa)return{success:!0,require2FA:!0};var t=i.token,r=i.user;return n(r),localStorage.setItem("token",t),localStorage.setItem("userId",null===r||void 0===r?void 0:r.uid),o.av({id:null===r||void 0===r?void 0:r.uid,email:(null===r||void 0===r?void 0:r.mail.default)||(null===r||void 0===r?void 0:r.mail)}),{success:!0,require2FA:!1}})).catch((function(e){var n;return(null===(n=e.response)||void 0===n?void 0:n.data[0])&&"string"===typeof e.response.data[0]?f(e.response.data[0]):f("Something went wrong"),{success:!1}})).finally(h)];case 3:return[2,r.sent()]}}))}));return function(n){return e.apply(this,arguments)}}();return[g,{loading:d,error:x}]}},85790:function(e,n,i){i.r(n),i.d(n,{default:function(){return V},useShowSignInModal:function(){return N}});var t=i(26042),r=i(69396),o=i(99534),s=i(10253),a=i(85893),l=i(60193),c=i(12184),u=i(47568),d=i(70655),p=i(9669),m=i.n(p),x=i(67294),f=i(4596),h=function(e){return{verification:e.code}},g=function(){var e=(0,f.o)((function(e){return e.setUser})),n=(0,x.useState)(!1),i=n[0],t=n[1],r=(0,x.useState)(void 0),o=r[0],s=r[1],a=function(){t(!1)},l=function(){var n=(0,u.Z)((function(n){return(0,d.__generator)(this,(function(i){switch(i.label){case 0:return t(!0),[4,m().post("/proxy/v2/sequencing/public/tfa/verification",h(n)).then((function(n){var i=n.data,t=(i.sessid,i.session_name,i.token),r=i.user;return e(r),localStorage.setItem("token",t),localStorage.setItem("userId",r.uid),{success:!0}})).catch((function(e){var n;return(null===(n=e.response)||void 0===n?void 0:n.data[0])&&"string"===typeof e.response.data[0]?s(e.response.data[0]):s("Something went wrong"),{success:!1}})).finally(a)];case 1:return[2,i.sent()]}}))}));return function(e){return n.apply(this,arguments)}}();return[l,{loading:i,error:o}]},v=i(58442),b=i(61953),j=i(75084),S=i(31470),y=i(68346),w=i(9144),Z=i(85200),k=i(59266),I=i(5152),P=i.n(I),C=i(41664),F=i.n(C),q=i(11163),z=i(74904),R=i(62097),W=function(e){var n=e.onClose,i=e.onForgotPasswordSuccess,s=(0,o.Z)(e,["onClose","onForgotPasswordSuccess"]),c=(0,z.a)(),u=c.resetPassword,d=c.error,p=(0,R.Z)();(0,x.useEffect)((function(){document.querySelector(".MuiModal-root").style.display="none"}),[]);var m=function(){document.querySelector(".MuiModal-root").style.display="block",n()};return(0,a.jsx)(S.Z,(0,r.Z)((0,t.Z)({},s),{maxWidth:"xs",fullWidth:!0,sx:{"& > .MuiPaper-root .MuiDialog-paper":{borderRadius:"20px"}},children:(0,a.jsxs)(b.Z,{px:"45px",py:"40px",position:"relative",children:[(0,a.jsx)("img",{onClick:m,style:{position:"absolute",top:" 20px",right:"20px",cursor:"pointer"},src:"/v3/img/close.svg",alt:"close icon"}),(0,a.jsx)(l.Z,{variant:"h4",children:"Reset Password"}),(0,a.jsx)(w.Z,{justifyContent:"center",alignItems:"center",mt:"30px",mb:"20px",children:(0,a.jsx)("img",{src:"/v3/img/Sequencing.com-logo-512x512.webp",width:"100px",height:"100px",alt:"sequencing logo"})}),(0,a.jsx)(l.Z,{mb:"30px",fontSize:"16px!important",children:"Please enter your email address and we\u2019ll send you a link to reset your password."}),(0,a.jsx)(Z.J9,{initialValues:{email:""},onSubmit:function(e){u(e.email).then((function(){i(e.email)}))},validate:function(e){var n={};return e.email||(n.email="Required"),n},children:function(e){var n=e.submitForm;return(0,a.jsxs)(Z.l0,{children:[(0,a.jsx)(Z.gN,{component:k.n,name:"email",type:"email",label:"Email",fullWidth:!0}),d&&(0,a.jsx)(l.Z,{variant:"h4",fontSize:"14px!important",mt:2,color:p.palette.error.main,children:d}),(0,a.jsxs)(w.Z,{spacing:2,children:[(0,a.jsx)(j.Z,{onClick:n,fullWidth:!0,sx:{marginTop:"50px"},children:"Reset Password"}),(0,a.jsx)(j.Z,{onClick:m,variant:"text",children:"Back to Sign In"})]})]})}})]})}))},_=i(56566),M=P()((function(){return i.e(4475).then(i.bind(i,74475))}),{loadableGenerated:{webpack:function(){return[74475]}},ssr:!1}),A=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(i,o){for(var s=arguments.length,l=new Array(s>2?s-2:0),c=2;c<s;c++)l[c-2]=arguments[c];return(0,a.jsx)(k.n,(0,r.Z)((0,t.Z)({},i,l),{autoFocus:n,inputProps:{tabIndex:e}}))}},E=A(4,!0),B=A(5),J=function(e){var n=e.onClose,i=e.onForgotPassword,u=e.onLoginSuccessful,d=e.enabledRedirect,p=(0,o.Z)(e,["onClose","onForgotPassword","onLoginSuccessful","enabledRedirect"]),m=(0,s.Z)((0,c.z)(),2),f=m[0],h=m[1].error,I=(0,s.Z)(g(),2),P=I[0],C=I[1].error,z=(0,x.useState)(!0),R=z[0],W=z[1],_=(0,q.useRouter)();return(0,a.jsxs)(S.Z,(0,r.Z)((0,t.Z)({},p),{maxWidth:"xs",fullWidth:!0,sx:{"& > .MuiPaper-root .MuiDialog-paper":{borderRadius:"20px"}},children:[(0,a.jsx)("img",{onClick:function(){return null===n||void 0===n?void 0:n()},style:{position:"absolute",right:"20px",top:"20px",cursor:"pointer"},src:"/v3/img/i/icon-close.svg",width:20,height:20,alt:"close icon"}),(0,a.jsxs)(b.Z,{py:"40px",px:"45px",children:[p.isSuccess&&p.email?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(w.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,a.jsx)(v.Z,{htmlColor:"#77B255",fontSize:"large"}),(0,a.jsx)(l.Z,{variant:"h4",children:"Password Reset Link Sent"})]}),(0,a.jsxs)(l.Z,{mb:"23px",mt:"16px",fontSize:"16px!important",children:["If ",(0,a.jsx)("b",{children:p.email})," is a valid account, an email will be sent with instructions to reset your password."]})]}):(0,a.jsx)(l.Z,{mb:"23px",variant:"h4",tabIndex:1,children:"Sign In to Sequencing.com"}),R?p.toActivateKit?(0,a.jsxs)(l.Z,{sx:{fontFamily:"PlusJakarta",fontSize:"16px",lineHeight:"24px",mb:"25px"},children:["To activate your Sequencing kit, first sign in or"," ",(0,a.jsx)(F(),{href:"/auth",passHref:!0,children:(0,a.jsx)(y.Z,{sx:{fontFamily:"PlusJakartaSemiBold",fontSize:"16px",lineHeight:"24px",color:"#5EB0F3 !important",display:"inline-flex"},children:"Sign Up"})})," ","for an account."]}):(0,a.jsxs)(w.Z,{display:p.email&&p.isSuccess?"none":"flex",mb:"30px",overflow:"hidden",direction:{xs:"column",md:"row"},alignItems:"baseline",children:[(0,a.jsx)(l.Z,{mr:"5px",fontSize:"16px!important",tabIndex:2,children:"Don't have an account?"}),(0,a.jsx)(F(),{passHref:!0,href:"/auth",children:(0,a.jsx)(y.Z,{sx:{fontFamily:"PlusJakartaSemiBold",color:"secondary.main",fontSize:"16px"},tabIndex:3,children:"Sign Up Now"})})]}):(0,a.jsxs)("div",{children:[(0,a.jsx)(w.Z,{display:"block",mb:"30px",overflow:"hidden",direction:"row",textAlign:"center",children:(0,a.jsx)("img",{src:"/v3/img/logocode.svg",width:100,height:100,style:{right:"20px"},alt:"protected authorization by sequencing"})}),(0,a.jsx)(w.Z,{display:"flex",mb:"30px",overflow:"hidden",direction:"row",textAlign:"center",children:(0,a.jsx)(l.Z,{mr:"5px",fontSize:"16px!important",textAlign:"center",children:"Enter your verification code. This code is application-generated and is 6 digits long."})})]}),R?(0,a.jsx)(Z.J9,{initialValues:{mail:"",pass:"",remember_me:!1},validate:function(e){var n={};return e.mail||(n.mail="Required"),e.pass||(n.pass="Required"),n},onSubmit:function(e,i){var t=i.setSubmitting;f({email:e.mail,password:e.pass,redirect:p.redirect}).then((function(e){var i=e.success,t=e.require2FA;if(i)if(t)W(!1);else if(null===u||void 0===u||u(),null===n||void 0===n||n(),d){("/"===_.asPath||/^\/our-difference($|\/.*)/.test(_.asPath))&&_.push("/data/my-genomes")}})).finally((function(){t(!1)}))},children:function(e){var n=e.submitForm,t=e.isSubmitting;return(0,a.jsxs)(Z.l0,{children:[(0,a.jsxs)(w.Z,{mb:"7px",spacing:4,children:[(0,a.jsx)(Z.gN,{component:E,name:"mail",type:"email",label:"Enter Email",variant:"filled",fullWidth:!0}),(0,a.jsx)(Z.gN,{component:B,name:"pass",type:"password",label:"Enter Password",variant:"filled",fullWidth:!0})]}),(0,a.jsxs)(w.Z,{mb:"40px",direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,a.jsx)("div",{}),i&&(0,a.jsx)(y.Z,{onClick:function(){return i()},sx:{fontSize:"14px",color:"secondary.main",fontFamily:"PlusJakartaSemiBold"},tabIndex:6,children:"Forgot Password"})]}),h&&h.includes("Wrong")&&(0,a.jsx)(l.Z,{mb:"20px",color:"danger.main",children:h}),h&&h.includes("locked")&&(0,a.jsx)(l.Z,{mb:"20px",color:"danger.main",children:h}),h&&h.includes("exist")&&(0,a.jsx)(l.Z,{mb:"20px",color:"danger.main",children:"Sorry, you are not allowed to login. Please, create a new account."}),(0,a.jsx)(j.Z,{onClick:n,disabled:t,variant:"contained",color:"primary",size:"medium",fullWidth:!0,tabIndex:7,children:"Sign In"})]})}}):(0,a.jsx)(Z.J9,{initialValues:{code:"1234",remember_me:!1},validate:function(e){var n={};return e.code||(n.code="Required"),n},onSubmit:function(e,i){var t=i.setSubmitting;P({code:e.code}).then((function(e){e.success&&(null===u||void 0===u||u(),null===n||void 0===n||n())})).finally((function(){t(!1)}))},children:function(e){var n=e.submitForm,i=e.isSubmitting,t=e.setFieldValue;return(0,a.jsx)(Z.l0,{children:(0,a.jsxs)(w.Z,{mb:"7px",spacing:4,children:[(0,a.jsx)(Z.gN,{fullWidth:!0,name:"code",type:"text",onChange:function(e){return t("code",e.target.value.replace(/[^0-9]/g,""),!0)},component:k.n,label:"Verification Code"}),C&&C.includes("Invalid")&&(0,a.jsx)(l.Z,{mb:"20px",color:"danger.main",children:C}),(0,a.jsx)(j.Z,{onClick:n,disabled:i,variant:"contained",color:"primary",size:"medium",fullWidth:!0,children:"Verify"}),(0,a.jsx)(w.Z,{mb:"40px",direction:"row",alignItems:"center",alignSelf:"center",children:(0,a.jsx)(F(),{href:"/support",passHref:!0,children:(0,a.jsx)(y.Z,{sx:{fontFamily:"PlusJakartaSemiBold",color:"secondary.main",fontSize:"14px"},children:"Contact Support"})})})]})})}}),(0,a.jsx)(l.Z,{my:"25px",textAlign:"center",children:"or"}),(0,a.jsx)(w.Z,{spacing:3,children:(0,a.jsx)(M,{onClose:function(){return null===n||void 0===n?void 0:n()},googleButtonProps:{tabIndex:8}})})]})]}))},N=function(){var e=(0,_.d)().showModal;return(0,x.useCallback)((function(n){var i=e(J,(0,t.Z)({onForgotPassword:function(){var n=e(W,{onForgotPasswordSuccess:function(t){i.hide(),e(J,{isSuccess:!0,email:t,enabledRedirect:!0,onClose:function(){return n.hide()}}),n.hide()},onClose:function(){n.hide()}})},enabledRedirect:!0},n))}),[e])},V=J}}]);