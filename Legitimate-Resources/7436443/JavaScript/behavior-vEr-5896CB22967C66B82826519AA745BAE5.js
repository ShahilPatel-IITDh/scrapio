var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var c=0;return function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var c="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return c?c.call(a):$jscomp.arrayIterator(a)};
(function(a){function c(b){var d=b.type;b=a(b.target);var c=b.data("stage");if(void 0!==c&&phx.stage[c.id])phx.stage[c.id](c,b,d)}function b(d){var c=a("#mail-head"),f=c.height();0<f||!d?(d=f+parseInt(c.parent().css("padding-top"),10),a(".mail-body").css("top")!==d&&(a(".mail-body").css("top",d),a(".widget-mail-compose-body").show())):setTimeout(function(){b(!0)},20)}function d(d){b(d);"none"===a("#mail-instant-reply").css("display")?a(".panel-mail-display-table-mail-horizontal .is-mail-quick-replyable.mail-display-wrapper,.mail-list__preview.is-mail-quick-replyable,.panel-mail-display-table-mail-default .is-mail-quick-replyable.mail-display-wrapper").removeClass("is-mail-quick-replyable"):
a(".panel-mail-display-table-mail-horizontal .mail-display-wrapper,.mail-list__preview,.panel-mail-display-table-mail-default .mail-display-wrapper").addClass("is-mail-quick-replyable")}function f(){var d=a("#mail-head").find(".smart-service.gui-toggle");d.length&&d.parent().outerHeight()>a("#mail-detail").height()&&(d.addClass("minimized"),b())}function e(){50<a(".menubar").outerHeight()?a("#panel-mail-table").addClass("is-toolbar-two-line"):a("#panel-mail-table").removeClass("is-toolbar-two-line")}
phx.event.subscribe(phx.events.DOM_NODE_ADDED,c);phx.event.subscribe(phx.events.DOM_NODE_REMOVING,c);phx.stage={"navigation-drafts":function(a,b,d){d===phx.events.DOM_NODE_REMOVING?b.parent().removeClass(a.id+"-"+a.val):b.parent().addClass(a.id+"-"+a.val)}};phx.event.subscribe(phx.events.COLLAPSED_QUICK_REPLY,function(){a(".mail-display-wrapper").removeClass("is-quick-reply-expanded");a(".mail-list__preview").removeClass("is-quick-reply-expanded")});phx.event.subscribe(phx.events.EXPANDED_QUICK_REPLY,
function(){a(".mail-display-wrapper").addClass("is-quick-reply-expanded");a(".mail-list__preview").addClass("is-quick-reply-expanded")});phx.event.subscribe(phx.events.MAIL_SHOWN,function(){d(!0);f()});phx.event.subscribe(phx.events.SPAM_PROTECTION_REMOVED,function(){d(!0)});phx.event.subscribe(phx.events.LAST_ATTACHMENT_REMOVED,function(){d(!0)});phx.event.subscribe(phx.events.GUI_TOGGLE_TOGGLED,function(d){0<a(d.target).closest("#mail-head").length&&b()});phx.event.subscribe(phx.events.PGP_TEASER_SHOWN,
function(){b(!0)});phx.event.subscribe(phx.events.EDITOR_BAR_TOGGLED,function(){var b=a(".cke_contents"),d=a(".widget-mail-compose-body");b.hasClass("is-initial")?b.removeClass("is-initial"):(b.toggleClass("is-collapsed"),d.toggleClass("is-editor-toolbar-collapsed"))});a(document).on("advertisement.resize",function(){b()});a(document).on(phx.events.RESIZE_HANDLED,function(){b();f();var d=a("html"),c=a(".editor_header").outerHeight();250<c?(d.addClass("is-bigger-mail-head"),d.removeClass("is-big-mail-head")):
210<c?(d.addClass("is-big-mail-head"),d.removeClass("is-bigger-mail-head")):d.removeClass("is-big-mail-head is-bigger-mail-head")});0<a("#panel-mail-display").length&&d();e();phx.event.subscribe(phx.events.RESIZE_HANDLED,e);phx.event.subscribe("domchange",e)})(jQuery);
(function(a){if(phx.util.userAgent.is("ios")&&a("html").hasClass("page-htmleditorpage")){var c={};var b=[["mailHead",".widget-mail-compose-head"],["toolbar","#cke_top_editor"],["composeNav",".widget-mail-compose-nav"],["ckIframe","#cke_contents_editor iframe"]];c.page=a(".page");var d=function(){var d=0,e;var g=0;for(e=b.length;g<e;g++){if(!c[b[g][0]]||1>c[b[g][0]].length)c[b[g][0]]=a(b[g][1]);d+=c[b[g][0]].outerHeight()}return d};d();window.setInterval(function(){c.page.css("min-height",d()+"px")},
100)}})(jQuery);(function(a){a.Drag.prototype.limit=function(b,d){var c=b.css("borderTopWidth"),e=b.css("paddingTop"),g=b.css("borderLeftWidth"),h=b.css("paddingLeft");c=new a.Vector(parseInt(g,10)+parseInt(h,10)||0,parseInt(c,10)+parseInt(e,10)||0);this._limit={offset:b.offsetv().plus(c),size:b.dimensionsv(),center:!0===d?"both":d};return this};var c=a.Drag.prototype.position;a.Drag.prototype.position=function(a){if(this._limit){var b=this._limit,f=b.center&&b.center.toLowerCase(),e=this.movingElement.dimensionsv("outer"),
g=f&&"x"!=f?e.height()/2:0;f=f&&"y"!=f?e.width()/2:0;var h=b.offset.top(),k=b.offset.left(),l=b.size.height();b=b.size.width();a.top()+g<h&&a.top(h-g);a.top()+e.height()-g>h+l&&a.top(h+l-e.height()+g);a.left()+f<k&&a.left(k-f);a.left()+e.width()-f>k+b&&a.left(k+b-e.left()+f)}c.call(this,a)}})(jQuery);
(function(a){a.Drag.prototype.scrolls=function(c,b){c=a(c);for(var d=0;d<c.length;d++)this.constructor.responder._elements.push(c.eq(d).data("_dropData",new a.Scrollable(c[d],b))[0])};a.Scrollable=function(c,b){this.element=jQuery(c);this.options=a.extend({distance:30,delta:function(a,b){return(b-a)/2},direction:"xy"},b);this.x=-1!=this.options.direction.indexOf("x");this.y=-1!=this.options.direction.indexOf("y")};a.extend(a.Scrollable.prototype,{init:function(a){this.element=jQuery(a)},callHandlers:function(a,
b,d,f){this[a](b||this.element[0],d,this,f)},dropover:function(){},dropon:function(){this.clear_timeout()},dropout:function(){this.clear_timeout()},dropinit:function(){},dropend:function(){},clear_timeout:function(){this.interval&&(clearTimeout(this.interval),this.interval=null)},distance:function(a){return(30-a)/2},dropmove:function(c,b,d,f){this.clear_timeout();var e=b.vector();d=a(c==document.documentElement?window:c);var g=d.dimensionsv("outer"),h=d.offsetv();d=h.y()+g.y()-e.y();var k=e.y()-h.y();
g=h.x()+g.x()-e.x();e=e.x()-h.x();var l=0,m=0;h=this.options.distance;d<h&&this.y?m=this.options.delta(d,h):k<h&&this.y&&(m=-this.options.delta(k,h));g<h&&this.options&&this.x?l=this.options.delta(g,h):e<h&&this.x&&(l=-this.options.delta(e,h));if(l||m){var q=this;this.interval=setTimeout(function(){q.move(a(c),f.movingElement,l,m,b,b.clientX,b.clientY,b.screenX,b.screenY)},15)}},move:function(c,b,d,f,e){c.scrollTop(c.scrollTop()+f);c.scrollLeft(c.scrollLeft()+d);b.trigger(a.event.fix({type:"mousemove",
clientX:e.clientX,clientY:e.clientY,screenX:e.screenX,screenY:e.screenY,pageX:e.pageX,pageY:e.pageY}))}})})(jQuery);(function(a){a(document).on("keydown",".noSubmitOnEnter input:text",function(a){a.keyCode===phx.util.KEYS.ENTER&&a.preventDefault()})})(jQuery);(function(a){phx.event.subscribe(phx.events.MODAL_DIALOG_OPEN,function(){a("iframe").not(".adframe, .abiframe").filter(":visible").attr("data-hidden","true").css("visibility","hidden")});phx.event.subscribe(phx.events.MODAL_DIALOG_CLOSE,function(){a("iframe[data-hidden=true]").css("visibility","").removeAttr("data-hidden")})})(jQuery);
phx.isMailPreviewVisible=function(){return jQuery(".widget-mail-mail").is(":visible")};(function(a){a.fn.extend({prependClick:function(c){return this.each(function(){var b=this.onclick,d=this.href;a.data(this,"lastCallback")!==c&&("undefined"===typeof d||d.match(/^#[\w\d]/)||(this.href="#"),this.onclick=function(f){f=f||window.event;c(f,function(){b&&b.apply(this,[f]);d&&"#"!==d&&(location.href=d)});a.event.fix(f).preventDefault();return!1},a.data(this,"lastCallback",c))})}})})(jQuery);(function(a,c){function b(a,b,d){d.forEach(function(d){a.bind(b,d.eventData,d.callback)})}function d(a,b,d,e){if(!e||!1===e)if("function"===typeof d)e=d,d=c;else return;a in f||(f[a]={});a=f[a];b in a||(a[b]=[]);var g=a[b];b=0;for(a=g.length;b<a;b++){var h=g[b];if(h.eventData===d&&h.callback===e)return}g.push({eventData:d,callback:e})}var f={},e=[],g=Wicket.Event,h=g.Topic;g.subscribe(h.DOM_NODE_ADDED,function(a,b){b&&e.push(b)});g.subscribe(h.AJAX_CALL_COMPLETE,function(){var d;var c=a(e).find("*").addBack();
if(c.length)for(d in f){var g=void 0,h=c,t=f[d];h=h.filter(d);if(0!==h.length)for(g in t)b(h,g,t[g])}e=[]});a.fn.wicketLive=function(a,b,c){this.bind.apply(this,arguments);var f=this.selector,e=a,g=b,h=c,m;if("object"===typeof e)for(m in e)d(f,m,g,e[m]);else d(f,e,g,h);return this}})(jQuery);(function(a,c){a.fn.marginToViewport=function(a,d,f){var b=c.documentElement,g=b.clientWidth;b=b.clientHeight;var h=c.body,k=h.scrollLeft;h=h.scrollTop;var l=this.offset();f=f||0;a="number"!==typeof a||isNaN(a)?k+g:Math.min(a,k+g);d="number"!==typeof d||isNaN(d)?h+b:Math.min(d,h+b);return{top:l.top-h-f,right:a-(l.left+this.outerWidth())-f,bottom:d-(l.top+this.outerHeight())-f,left:l.left-k-f}}})(jQuery,document);(function(a){a.fn.inlineEdit=function(c){return this.each(function(){a.inlineEdit.getInstance(this,c).initValue()}).on("click",function(b){var d=a.inlineEdit.getInstance(this,c),f=d.element.find(d.options.control),e=!!f.length;if(b.target!==f[0])d[e?"mutate":"init"]()})};a.inlineEdit=function(c,b){this.options=a.extend(!0,{},a.inlineEdit.defaults,b);this.element=a(c)};a.inlineEdit.getInstance=function(c,b){return a.inlineEdit.initialised(c)?a(c).data("widget.inlineedit"):new a.inlineEdit(c,b)};a.inlineEdit.initialised=
function(c){return a(c).data("init.inlineedit")?!0:!1};a.inlineEdit.defaults={value:"",save:"",placeholder:"Click to edit",control:"input",cancelOnBlur:!1,saveOnBlur:!0,labelMarkup:'<a class="label"><svg class="navigation-function-icon" xmlns="http://www.w3.org/2000/svg">\n<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#add_24"></use>\n</svg><span class="text link"></span></a>',inputMarkup:'<span class="label"><svg class="navigation-function-icon" xmlns="http://www.w3.org/2000/svg">\n<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#add_24"></use>\n</svg><span class="form-input-type-text focused"><input type="text" value=""></span></span>',
textAreaMarkup:"<textarea></textarea>"};a.inlineEdit.prototype={init:function(){this.element.data("init.inlineedit",!0);this.initValue();this.mutate();this.element.data("widget.inlineedit",this)},initValue:function(){this.value(a.trim(this.element.text())||this.options.value);var c=jQuery(this.options.labelMarkup),b=c.find(".link");this.value()?this.options.value&&b.html(this.options.value):b.html(this.options.placeholder);this.element.empty().append(c)},mutate:function(){var a=this;return a.element.empty().append(a.mutatedHtml(a.value())).find(a.options.control).bind("blur",
function(b){!0===a.options.cancelOnBlur?a.change(a.element,b):!0===a.options.saveOnBlur&&a.save(a.element,b)}).bind("keydown",function(b){switch(b.keyCode){case 13:"textarea"!==a.options.control&&a.save(a.element,b);b.preventDefault();break;case 27:a.change(a.element,b)}}).focus().end()},value:function(c){if(arguments.length){var b=c===this.options.placeholder?"":c;this.element.data("value.inlineedit",a(".folder-add-link",this).length?"":b&&this.encodeHtml(b.replace(/\n/g,"<br />")))}return this.element.data("value.inlineedit")},
mutatedHtml:function(a){return this.controls[this.options.control].call(this,a)},save:function(a,b){var d=this.element.find(this.options.control),c={value:this.encodeHtml(d.val())};d.val(c.value);!1===this.options.save.call(this.element[0],b,c)&&(d=jQuery(this).data("value.inlineedit"),this.value(d),this.change(a,b))},change:function(){var a=jQuery(this.options.labelMarkup),b=this.value()||this.options.placeholder;a.find(".link").html(b);this.element.empty().append(a)},controls:{textarea:function(){return jQuery(this.options.textAreaMarkup)},
input:function(){return jQuery(this.options.inputMarkup)}},encodeHtml:function(c){var b=c;a.each([{key:/</g,value:"&lt;"},{key:/>/g,value:"&gt;"},{key:/"/g,value:"&quot;"}],function(a,c){b=b.replace(c.key,c.value)});return b}}})(jQuery);(function(a){a.fn.countdown=function(c){c=c||{timer:10};this.each(function(){var b=function(){d.text(f);f--};var d=a(this);d.trigger("countdownStart");var f="function"===typeof c.timer?c.timer.call(this):c.timer;b();var e=setInterval(function(){0===f&&(clearInterval(e),d.trigger("countdownFinish"));b()},1E3);d.on("countdownCancel",function(){clearInterval(e)})});return this}})(jQuery);"object"!==typeof phx.statistics&&(phx.statistics={});
(function(a){function c(a,g,q){if(g){q=e(a,q);g=f(g);var m=d(a,g,q);b(m);phx.iac?phx.iac.notify("tracking_track",m):h||(h=!0,window.setTimeout(function(){c(a,g,q);h=!1},1E3))}}function b(b){"function"==typeof a.cookie&&a.cookie("phx.statistics.debug")&&console.log("pixel tracking: ",b)}function d(a,b,d){b={section:b};"event"===a?b.type="event":(b.modifier="tif",b.tif_options={has_ads:!0});d.labels&&(b.label=JSON.parse(d.labels));return b}function f(a){"/"===a.charAt(0)&&(a=a.substring(1));return a.replace(/\./gi,
"/")}function e(a,b){a=phx.getVar("usertest");b||(b={labels:""});if(a){var d={};b.labels&&(d=JSON.parse(b.labels));d.testgroup=a;b.labels=JSON.stringify(d)}return b}function g(a,b){k={section:a,data:b};c("pi",a,b)}var h=!1,k;phx.statistics.trackPageImpression=g;phx.statistics.trackLastPageImpressionAgain=function(){k&&g(k.section,k.data)};phx.statistics.trackEvent=function(a,b){window.setTimeout(function(){c("event",a,b)},50)}})(jQuery);(function(a){function c(){var a=Array.prototype.slice.call(arguments),b=[],c;"string"==typeof a[0]&&(c=a.shift());e(a[0])&&(b=a.shift());a=a.shift();d[c]=[b,a]}function b(a){var c;if("undefined"==typeof f[a]&&(c=d[a])){var e=c[0];c=c[1];f[a]=c.apply(void 0,g(e,function(d){var c=a.split("/");d=d.split("/");var f=!1;for(c.pop();".."==d[0]&&c.length;)c.pop(),d.shift(),f=!0;"."==d[0]&&(d.shift(),f=!0);f&&(d=c.concat(d));c=d.join("/");return b(c)}))}return f[a]}var d={},f={},e=Array.isArray||function(a){return a.constructor==
Array},g=Array.map||function(a,b,d){for(var c=0,f=a.length,e=[];c<f;c++)e.push(b.call(d,a[c]));return e};c("lib/utils",[],function(){var a=[];return{isDomObj:function(a){return!!a.nodeType||a===window},toArray:function(b,d){return a.slice.call(b,d)},merge:function(){for(var a=arguments.length,b=0,d=Array(a+1);b<a;b++)d[b+1]=arguments[b];return 0===a?{}:(d[0]={},!0===d[d.length-1]&&(d.pop(),d.unshift(!0)),$.extend.apply(void 0,d))},push:function(a,b,d){return a&&Object.keys(b||{}).forEach(function(c){if(a[c]&&
d)throw Error("utils.push attempted to overwrite '"+c+"' while running in protected mode");"object"==typeof a[c]&&"object"==typeof b[c]?this.push(a[c],b[c]):a[c]=b[c]},this),a},isEnumerable:function(a,b){return-1<Object.keys(a).indexOf(b)},compose:function(){var a=arguments;return function(){for(var b=arguments,d=a.length-1;0<=d;d--)b=[a[d].apply(this,b)];return b[0]}},uniqueArray:function(a){for(var b={},d=[],c=0,f=a.length;c<f;++c)b.hasOwnProperty(a[c])||(d.push(a[c]),b[a[c]]=1);return d},debounce:function(a,
b,d){"number"!=typeof b&&(b=100);var c,f;return function(){var e=this,g=arguments,h=d&&!c;return clearTimeout(c),c=setTimeout(function(){c=null;d||(f=a.apply(e,g))},b),h&&(f=a.apply(e,g)),f}},throttle:function(a,b){"number"!=typeof b&&(b=100);var d,c,f,e,g,h,k=this.debounce(function(){g=e=!1},b);return function(){d=this;c=arguments;return f||(f=setTimeout(function(){f=null;g&&(h=a.apply(d,c));k()},b)),e?g=!0:(e=!0,h=a.apply(d,c)),k(),h}},countThen:function(a,b){return function(){if(!--a)return b.apply(this,
arguments)}},delegate:function(a){return function(b,d){var c=$(b.target),f;Object.keys(a).forEach(function(e){if((f=c.closest(e)).length)return d=d||{},d.el=f[0],a[e].apply(this,[b,d])},this)}}}});c("lib/registry",["./utils"],function(a){function b(a,b){var d,c,f,e=b.length;return"function"==typeof b[e-1]&&(--e,f=b[e]),"object"==typeof b[e-1]&&--e,2==e?(d=b[0],c=b[1]):(d=a.node,c=b[0]),{element:d,type:c,callback:f}}return new function(){function a(a){this.component=a;this.attachedTo=[];this.instances=
{};this.addInstance=function(a){var b=new d(a);return this.instances[a.identity]=b,this.attachedTo.push(a.node),b};this.removeInstance=function(a){delete this.instances[a.identity];a=this.attachedTo.indexOf(a.node);-1<a&&this.attachedTo.splice(a,1);this.instances.length||c.removeComponentInfo(this)};this.isAttachedTo=function(a){return-1<this.attachedTo.indexOf(a)}}function d(a){this.instance=a;this.events=[];this.addBind=function(a){this.events.push(a);c.events.push(a)};this.removeBind=function(a){for(var b=
0,d;d=this.events[b];b++)d.element!=a.element||d.type!=a.type||null!=a.callback&&d.callback!=a.callback||this.events.splice(b,1)}}var c=this;(this.reset=function(){this.components=[];this.allInstances={};this.events=[]}).call(this);this.addInstance=function(b){var d=this.findComponentInfo(b);d||(d=new a(b.constructor),this.components.push(d));var c=d.addInstance(b);return this.allInstances[b.identity]=c,d};this.removeInstance=function(a){this.findInstanceInfo(a);var b=this.findComponentInfo(a);b&&
b.removeInstance(a);delete this.allInstances[a.identity]};this.removeComponentInfo=function(a){a=this.components.indexOf(a);-1<a&&this.components.splice(a,1)};this.findComponentInfo=function(a){a=a.attachTo?a:a.constructor;for(var b=0,d;d=this.components[b];b++)if(d.component===a)return d;return null};this.findInstanceInfo=function(a){return this.allInstances[a.identity]||null};this.findInstanceInfoByNode=function(a){var b=[];return Object.keys(this.allInstances).forEach(function(d){d=this.allInstances[d];
d.instance.node===a&&b.push(d)},this),b};this.on=function(a){var d=c.findInstanceInfo(this);var f=arguments.length;for(var e=1,g=Array(f-1);e<f;e++)g[e-1]=arguments[e];d&&((f=a.apply(null,g))&&(g[g.length-1]=f),g=b(this,g),d.addBind(g))};this.off=function(a,d,f){var e=b(this,arguments),g=c.findInstanceInfo(this);g&&g.removeBind(e)};window.DEBUG&&DEBUG.enabled&&(c.trigger=new Function);this.teardown=function(){c.removeInstance(this)};this.withRegistration=function(){this.before("initialize",function(){c.addInstance(this)});
this.around("on",c.on);this.after("off",c.off);window.DEBUG&&DEBUG.enabled&&this.after("trigger",c.trigger);this.after("teardown",{obj:c,fnName:"teardown"})}}});c("lib/compose",["./utils"],function(a){function b(a,b){if(d){var f=Object.create(null);Object.keys(a).forEach(function(d){if(0>c.indexOf(d)){var e=Object.getOwnPropertyDescriptor(a,d);e.writable=b;f[d]=e}});Object.defineProperties(a,f)}}var d=!1,c=["mixedIn"];if(d)try{Object.getOwnPropertyDescriptor(Object,"keys")}catch(q){d=!1}return{mixin:function(a,
d){a.mixedIn=a.hasOwnProperty("mixedIn")?a.mixedIn:[];d.forEach(function(d){-1==a.mixedIn.indexOf(d)&&(b(a,!1),d.call(a),a.mixedIn.push(d))});b(a,!0)},unlockProperty:function(a,b,c){if(d&&a.hasOwnProperty(b)){var f=Object.getOwnPropertyDescriptor(a,b).writable;Object.defineProperty(a,b,{writable:!0});c.call(a);Object.defineProperty(a,b,{writable:f})}else c.call(a)}}});c("lib/advice",["./utils","./compose"],function(a,b){var d={around:function(a,b){return function(){var d=0,c=arguments.length,f=Array(c+
1);for(f[0]=a.bind(this);d<c;d++)f[d+1]=arguments[d];return b.apply(this,f)}},before:function(a,b){var d="function"==typeof b?b:b.obj[b.fnName];return function(){return d.apply(this,arguments),a.apply(this,arguments)}},after:function(a,b){var d="function"==typeof b?b:b.obj[b.fnName];return function(){var b=(a.unbound||a).apply(this,arguments);return d.apply(this,arguments),b}},withAdvice:function(){["before","after","around"].forEach(function(a){this[a]=function(c,f){b.unlockProperty(this,c,function(){return"function"==
typeof this[c]?this[c]=d[a](this[c],f):this[c]=f})}},this)}};return d});c("lib/component",["./advice","./utils","./compose","./registry"],function(a,b,d,c){function f(a){a.events.slice().forEach(function(a){var b=[a.type];a.element&&b.unshift(a.element);"function"==typeof a.callback&&b.push(a.callback);this.off.apply(this,b)},a.instance)}function e(){f(c.findInstanceInfo(this))}function g(){var a=c.findComponentInfo(this);a&&Object.keys(a.instances).forEach(function(b){a.instances[b].instance.teardown()})}
function h(){this.trigger=function(){var a,b,d,c;var f=arguments.length-1;var e=arguments[f];!("string"==typeof e||e&&e.defaultBehavior)&&(f--,b=e);1==f?(a=$(arguments[0]),d=arguments[1]):(a=this.$node,d=arguments[0]);d.defaultBehavior&&(c=d.defaultBehavior,d=$.Event(d.type));f=d.type||d;if(window.DEBUG&&window.DEBUG.enabled&&window.postMessage){e=b;try{window.postMessage(e,"*")}catch(D){throw console.log("unserializable data for event",f,":",e),Error(["The event",f,"on component",this.toString(),
"was triggered with non-serializable data"].join(" "));}}return"object"==typeof this.attr.eventData&&(b=$.extend(!0,{},this.attr.eventData,b)),a.trigger(d||f,b),c&&!d.isDefaultPrevented()&&(this[c]||c).call(this),a};this.on=function(){var a,d,c,f,e=arguments.length-1,g=arguments[e];"object"==typeof g?f=b.delegate(this.resolveDelegateRules(g)):f=g;2==e?(a=$(arguments[0]),d=arguments[1]):(a=this.$node,d=arguments[0]);if("function"!=typeof f&&"object"!=typeof f)throw Error("Unable to bind to '"+d+"' because the given callback is not a function or an object");
return c=f.bind(this),c.target=f,f.guid&&(c.guid=f.guid),a.on(d,c),f.guid=c.guid,c};this.off=function(){var a,b,d,c=arguments.length-1;return"function"==typeof arguments[c]&&(d=arguments[c],--c),1==c?(a=$(arguments[0]),b=arguments[1]):(a=this.$node,b=arguments[0]),a.off(b,d)};this.resolveDelegateRules=function(a){var b={};return Object.keys(a).forEach(function(d){if(!d in this.attr)throw Error('Component "'+this.toString()+'" wants to listen on "'+d+'" but no such attribute was defined.');b[this.attr[d]]=
a[d]},this),b};this.defaultAttrs=function(a){b.push(this.defaults,a,!0)||(this.defaults=a)};this.select=function(a){return this.$node.find(this.attr[a])};this.initialize=$.noop;this.teardown=e}function k(a){for(var d=arguments.length,f=Array(d-1),e=1;e<d;e++)f[e-1]=arguments[e];if(!a)throw Error("Component needs to be attachTo'd a jQuery object, native node or selector string");var g=b.merge.apply(b,f);$(a).each(function(a,b){a=b.jQuery?b[0]:b;var d=c.findComponentInfo(this);d&&d.isAttachedTo(a)||
new this(b,g)}.bind(this))}function m(){function b(a,d){d=d||{};this.identity=v++;if(!a)throw Error("Component needs a node");a.jquery?(this.node=a[0],this.$node=a):(this.node=a,this.$node=$(a));this.toString=b.toString;window.DEBUG&&window.DEBUG.enabled&&(this.describe=this.toString());a=Object.create(d);for(var c in this.defaults)d.hasOwnProperty(c)||(a[c]=this.defaults[c]);this.attr=a;Object.keys(this.defaults||{}).forEach(function(a){if(null===this.defaults[a]&&null===this.attr[a])throw Error('Required attribute "'+
a+'" not specified in attachTo for component "'+this.toString()+'".');},this);this.initialize.call(this,d)}for(var f=arguments.length,e=Array(f),y=0;y<f;y++)e[y]=arguments[y];return b.toString=function(){return e.map(function(a){return null==a.name?(a=a.toString().match(l))&&a[1]?a[1]:"":"withBaseComponent"!=a.name?a.name:""}).filter(Boolean).join(", ")},window.DEBUG&&window.DEBUG.enabled&&(b.describe=b.toString()),b.attachTo=k,b.teardownAll=g,e.unshift(h,a.withAdvice,c.withRegistration),d.mixin(b.prototype,
e),b}var l=/function (.*?)\s?\(/,v=0;return m.teardownAll=function(){c.components.slice().forEach(function(a){a.component.teardownAll()});c.reset()},m});c("lib/logger",["./compose","./utils"],function(a,b){function d(a){var b=(a.tagName?a.tagName.toLowerCase():a.toString())+(a.className?"."+a.className:"");return a.tagName?["'","'"].join(b):b}function c(a,b,c){var e,g,h,m,k,n,A,y;"function"==typeof c[c.length-1]&&(h=c.pop(),h=h.unbound||h);"object"==typeof c[c.length-1]&&c.pop();2==c.length?(g=c[0],
e=c[1]):(g=b.$node[0],e=c[0]);window.DEBUG&&window.DEBUG.enabled&&(k=DEBUG.events.logFilter,A="all"==k.actions||-1<k.actions.indexOf(a),n=function(a){return a.test?a:new RegExp("^"+a.replace(/\*/g,".*")+"$")},y="all"==k.eventNames||k.eventNames.some(function(a){return n(a).test(e)}),A&&y&&console.info(f[a],a,"["+e+"]",d(g),b.constructor.toString(),h&&(m=h.name||h.displayName)&&"->  "+m))}var f={on:"<-",trigger:"->",off:"x "};return function(){this.before("trigger",function(){c("trigger",this,b.toArray(arguments))});
this.before("on",function(){c("on",this,b.toArray(arguments))});this.before("off",function(a){c("off",this,b.toArray(arguments))})}});c("lib/index","./advice ./component ./compose ./logger ./registry ./utils".split(" "),function(a,b,d,c,f,e){return{advice:a,component:b,compose:d,logger:c,registry:f,utils:e}});a.flight=b("lib/index")})(this);var WicketFlightManager=function(a,c){function b(a){a=c(a);return a.find(".js-component").add(a.filter(".js-component"))}function d(a){a=c(a).data();var b,d={};for(b in a)if(0===b.indexOf("component")&&9<b.length){var f=b.charAt(9).toLowerCase()+b.substring(10);d[f]=a[b]}return d}function f(){var a=this.getAttribute("data-component");g.hasOwnProperty(a)&&g[a].attachTo(this,d(this))}function e(a){b(a).each(f)}var g={},h=!1;a=a.Event;var k=a.Topic;a.subscribe(k.DOM_NODE_REMOVING,function(a,d){b(d).trigger("teardown")});
a.subscribe(k.DOM_NODE_ADDED,function(a,b){e(b)});c(function(){e(document.body);h=!0});c(window).on("unload",function(){for(var a in g)g[a].teardownAll()});return{registerComponent:function(a,b){g[a]=b},getComponent:function(a){return g[a]||null},attachElements:e,isInitialized:function(){return h}}}(Wicket,jQuery);var defineComponent=function(a,c){function b(){this.after("initialize",function(){this.on("teardown",function(a,b){this.teardown();b||a.stopPropagation()})})}function d(){this.getNameSpacedEventName=function(a){return a+"."+this.name}}return function(f){var e=f.mixins,g=f.name;f=f.parent;"function"===typeof e&&(e=[e]);f?(f=f.prototype.mixedIn.slice(3),e=f.concat(e)):(e.unshift(b),e.unshift(d));e.push(function(){this.name=g});e=c.component.apply(null,e);g&&a.registerComponent(g,e);return e}}(WicketFlightManager,
flight);var mixinFlyout=function(a){return function(){this.hasOpenFlyout=function(){return this.$node.hasClass(a.HAS_OPEN_FLYOUT)};this.toggleHasOpenFlyoutClass=function(c){"ftd"===c.namespace&&("open"===c.type?this.$node.addClass(a.HAS_OPEN_FLYOUT):this.$node.removeClass(a.HAS_OPEN_FLYOUT))};this.addClientSideFlyoutBehavior=function(a){a.options&&a.trigger&&(a.trigger.attr(a.options),this.trigger(document,"addFlyoutHandlerWithoutAjax",a.trigger));if(a.onOpen)this.on(a.trigger,"open.ftd",a.onOpen);if(a.onClose)this.on(a.trigger,
"close.ftd",a.onClose)};this.after("initialize",function(){this.on("open.ftd close.ftd",this.toggleHasOpenFlyoutClass)})}}(CssUtils.modifier);var mixinTemplate=function(a,c){return function(){this.defaultAttrs({templateSelector:".js-template"});this.templates=null;this.getTemplate=function(b){return this.templates[b]||a()};this.isScriptTagTemplate=function(a){return(a=this.getTemplate(a).prop("tagName"))?"SCRIPT"===a.toUpperCase():!1};this.getTemplateContent=function(b){b=this.isScriptTagTemplate(b)?a(this.getTemplateContentAsHtmlString(b)):this.getTemplate(b).children();c.attachElements(b);return b};this.getTemplateContentAsHtmlString=
function(b){return(b=this.getTemplate(b).html())?a.trim(b):""};this.checkAndDetachTemplate=function(b){b.each(function(b,c){c=a(c);c.data("templatePreventDetach")||c.detach()}.bind(this))};this.addTemplate=function(b){b.each(function(b,c){c=a(c);b=c.data("templateName");this.templates[b]=c}.bind(this))};this.initializeTemplates=function(){var a=this.select("templateSelector");this.templates={};this.addTemplate(a);this.checkAndDetachTemplate(a)};this.after("initialize",function(){this.initializeTemplates()})}}(jQuery,
WicketFlightManager);var mixinKeypress=function(a,c){return function(){this.defaultAttrs({keySupportWhiteList:"input, textarea, select",keySupportBlackList:":checkbox"});this.keyBindings={};this.hasActiveKeyController=!1;this.keyController=function(a){var b=this.getKey(a.which);!b||this.isSystemKeyCombo(a)||this.hasGallery()||b.preventIFrameKeys&&this.isIFrame(a.target)||b.preventInputKeys&&this.isInputElementWithKeySupport(a.target)||b.callback.call(this,a)};this.isSystemKeyCombo=function(a){return!!this.isKeyCombinationWithDelete(a)};
this.isKeyCombinationWithDelete=function(a){return!(!this.isMetaKey(a)||!this.isDeleteKey(a))};this.isMetaKey=function(a){return!!(a.metaKey||a.ctrlKey||a.shiftKey||a.altKey)};this.isDeleteKey=function(a){return a.keyCode===c.DELETE};this.isIFrame=function(b){return a(b).is("iframe")?!0:!1};this.hasGallery=function(){return a("html").hasClass("slideshow-visible")?!0:!1};this.isInputElementWithKeySupport=function(b){return a(b).is(this.attr.keySupportWhiteList)&&!a(b).is(this.attr.keySupportBlackList)?
!0:!1};this.startKeyListener=function(){this.hasActiveKeyController||(this.on(document,"keydown",this.keyController),this.hasActiveKeyController=!0)};this.stopKeyListener=function(){this.off(document,"keydown",this.keyController);this.hasActiveKeyController=!1};this.addKey=function(b,d,c){this.keyBindings[b]=a.extend({preventInputKeys:!0,preventIFrameKeys:!1,callback:d},c)};this.removeKey=function(a){delete this.keyBindings[a]};this.getKey=function(a){return this.keyBindings.hasOwnProperty(a)?this.keyBindings[a]:
null}}}(jQuery,phx.util.KEYS);(function(a,c){function b(b){if("ftd"===b.namespace){var d=a(b.target);"open"===b.type?d.addClass(c.HAS_OPEN_FLYOUT):d.removeClass(c.HAS_OPEN_FLYOUT)}}phx.flyout={initFlyoutComponent:function(d){a(d).off("open.ftd close.ftd",b);a(d).on("open.ftd close.ftd",b)},addClientSideFlyoutBehavior:function(b){b.options&&b.trigger&&(b.trigger.attr(b.options),a(document).trigger("addFlyoutHandlerWithoutAjax",b.trigger));if(b.onOpen)b.trigger.on("open.ftd",b.onOpen);if(b.onClose)b.trigger.on("open.ftd",b.onClose)},
hasOpenFlyout:function(a){return a.hasClass(c.HAS_OPEN_FLYOUT)}}})(jQuery,CssUtils.modifier);(function(a){function c(b){return a(b).closest(".ftd-box, .stage-wrapper, body")}function b(a,b){var d=a.split(/\s+/).map(Math.floor);a={x:d[0]||0,y:d[1]||0};1===d.length&&/^(?:right|left)$/.test(b)&&(a.y=-14);return a}function d(a){var d={};"trigger behavior cache target position offset centerstem".split(" ").forEach(function(b){var c=a.getAttribute("data-ftd-"+b);c?d[b]=c:b in x&&(d[b]=x[b])});d.offset=b(d.offset,d.position);d.cache="false"!==d.cache;d.centerstem="false"!==d.centerstem;return d}
function f(a){return a.getAttribute("data-ftd-trigger")||"flyoutTopLevel"}function e(b){var d;if(b){if("string"!==typeof b&&(b=b.getAttribute("data-ftd-trigger")?f(b):this.id),(d=p[b])&&d.open){var c=a("#"+b);r(c);c.off(".ftd");c.hide();d.open=!1;d=a("#"+d.trigger);b=a.Event("close.ftd",{ftdId:b});d.trigger(b)}}else for(d in p)(b=p[d])&&b.open&&(c=a("#"+d),c.off(".ftd"),c.hide(),b.open=!1,b=a("#"+b.trigger),c=a.Event("close.ftd",{ftdId:d}),b.trigger(c))}function g(a){(a=p[a.data.ftdId])&&a.loading&&
(a.aborted=!0)}function h(a){e(a.data.ftdId)}function k(b){var d={ftdId:b};a("iframe").not(".adframe, .abiframe").each(function(){try{a(this.contentWindow.document).one("click",d,h)}catch(y){}})}function l(b,d){var f=a(b);var e=a(".dialog-container");b=c(b);0<f.closest(e).length&&(b=e);return(+b.css("z-index")||0)+("tooltip"===d?1E3:100)}function m(b){"string"===typeof b&&(b={target:document.getElementById(b)});var c=b.target;var e=f(c);var n=p[e];n.trigger!==c.id&&(c=document.getElementById(n.trigger));
var g=d(c);var h=g.target?document.getElementById(g.target):c;e=a("#"+e);var k=a(c);e.css("z-index",l(c,g.behavior));phx.placeFtd(e,a(h),k,g);n.open=!0;n.timestamp=Date.now();w[g.behavior].close(b.target);k.trigger("open.ftd")}function q(){var a=this.getAttribute("data-ftd-trigger");return!(!a||!document.getElementById(a))}function t(){var b,c;var e=a(this);var g=d(this);this.id||(this.id="ftd"+f._id++);e.on("tooltip"===g.behavior?"mouseenter":"click",function(){phx.startAjax(this.id)&&phx.ajaxDone(this.id)});
e.on({"preopen.ftd":function(){var d=a("#"+f(this));b=d.prev();c=d.parent();a("body").append(d)},"close.ftd":function(){var d=a("#"+f(this));b&&0<b.length?b.after(d):c&&c.append(d)}})}function u(){window.setTimeout(function(){var a;for(a in p){var b=p[a];b.open&&m(b.trigger)}},0)}var p={};var x={behavior:"flyout",cache:!0,offset:"0",position:"bottom"};var r=function(a){var b,d,c=0;var f={};for(b in p)(d=p[b])&&d.open&&(f[d.trigger]=b,c++);0!==c&&a.find("[data-ftd-trigger]").each(function(){this.id in
f&&(e(f[this.id]),delete f[this.id])})};var w={tooltip:{close:function(b){var d=f(b);b=a(b);d={ftdId:d};b.one("mouseleave.ftd",d,h);a(document).one("click.ftd",d,h);b.closest(".js-scroll-pane").one("scroll.ftd",d,h)},abort:function(b){var d=f(b);a(b).one("mouseleave.ftd",{ftdId:d},g)}},flyout:{close:function(b){var d=f(b);var c={ftdId:d};a("#"+d).on("click.ftd",function(a){a.stopPropagation()});a(document).one("click.ftd",c,h);a(b).closest(".js-scroll-pane").one("scroll.ftd",c,h);k(d)},abort:function(b){b=
f(b);a(document).one("click.ftd",{ftdId:b},g)}},dropdown:{close:function(b){var d=f(b),c={ftdId:d};a(document).one("click.ftd",c,h);a(b).closest(".js-scroll-pane").one("scroll.ftd",c,h);k(d)}},script:{close:function(a){a=f(a);k(a)}}};w.script.abort=w.dropdown.abort=w.flyout.abort;f._id=0;var v=a(document);v.on("startAjax","[data-ftd-trigger]",function(a){var b;(b=this.getAttribute("data-ftd-trigger"))&&(b=p[b])&&b.loading&&(b.trigger=this.id,a.preventDefault(),a.stopImmediatePropagation())});v.on("startAjax",
"[data-ftd-trigger]",function(b){0<a(this).closest("[disabled], .inactive, .disabled").length&&(b.preventDefault(),b.stopImmediatePropagation())});v.on("startAjax","[data-ftd-trigger]",function(b){var d;var c=f(this);(d=p[c])&&d.open&&(d.trigger===this.id?(b.preventDefault(),b.stopImmediatePropagation(),300<Date.now()-d.timestamp&&e(c)):d.cache&&(b.preventDefault(),b.stopImmediatePropagation(),a("#"+d.trigger).trigger("close.ftd"),d.trigger=this.id,m({target:this})))});v.on("startAjax","[data-ftd-trigger]",
function(a){var b;(b=this.getAttribute("data-ftd-trigger"))&&(b=p[b])&&b.loaded&&(a.preventDefault(),a.stopImmediatePropagation(),a=c(this),r(a),b.trigger=this.id,m({target:this}))});v.on("startAjax","[data-ftd-trigger]",function(){var a=d(this);r(c(this));var b=a.trigger;b||(a.cache?(b="ftd"+f._id++,this.setAttribute("data-ftd-trigger",b)):b="flyoutTopLevel");p[b]={aborted:!1,loaded:!1,loading:!0,open:!1,trigger:this.id};w[a.behavior].abort(this)});var z=a("[data-ftd-trigger]");z.wicketLive({click:function(a){"tooltip"!==
this.getAttribute("data-ftd-behavior")&&a.stopPropagation()}});v.on("ajaxDone","[data-ftd-trigger]",function(a){var b=d(this);if(b.cache){var c=document.getElementById(b.trigger);c||(c=document.getElementById("flyoutTopLevel"),c.id=b.trigger,b=document.createElement("div"),b.id="flyoutTopLevel",c.parentNode.appendChild(b))}c=f(this);c=p[c];c.loading=!1;c.loaded=!0;c.aborted||m(a)});z.filter(q).each(t);phx.event.subscribe(phx.events.WICKET_AJAX_DONE,function(b){a(b.added).find("[data-ftd-trigger]").addBack("[data-ftd-trigger]").filter(q).each(t)});
a(document).on("addFlyoutHandlerWithoutAjax",function(b,d){a(d).each(t)});a(document).on(phx.events.RESIZE_HANDLED,u);phx.event.subscribe(phx.events.RESIZE_HANDLED,u);phx.ftd={open:m,close:e,closeAllWithin:r,isOpen:function(a){var b;var d=!1;if(a)a in p||(d=document.getElementById(a))&&(a=f(d)),a=p[a],d=!(!a||!a.open);else for(b in p)if(p[b].open){d=!0;break}return d},getFtdId:f}})(jQuery);
(function(a){var c={top:{left:function(a){var b=a.ftd;var c=a.target;var e=b.offset.x;return c.left+e-Math.max(0,b.width-c.width+e-a.marginToViewport.right)},top:function(a){return Math.max(0,a.target.top-a.ftd.height+a.ftd.offset.y)},stem:function(a){var b=a.target.width;var c=a.target.left;var e=a.stem.width;c-=a.ftd.left;a.stem.element.css({left:Math.max(6,Math.min(a.stem.center?c+Math.max(6,b/2)-e/2:c+Math.max(6,Math.min(30,b/2))-e/2,a.ftd.width-e-6))})}},"top-right":{left:function(a){var b=a.ftd;
var c=a.target;var e=b.width;var g=c.width;b=b.offset.x;return c.left+g+b-e+Math.max(0,e-b-g-a.marginToViewport.left)},stem:function(a){var b=a.target;var c=a.ftd;var e=b.width;var g=a.stem.width;a.stem.element.css({right:Math.max(6,Math.min(c.left+c.width-(b.left+e)+Math.max(6,Math.min(30,e/2))-g/2,c.width-g-6)),left:"auto"})}},bottom:{top:function(a){return Math.max(0,a.target.top+a.target.height+a.ftd.offset.y)}},"bottom-right":{},left:{left:function(a){return a.target.left-a.ftd.width+a.ftd.offset.x},
top:function(a){var b=a.ftd;var c=a.target;var e=b.height;var g=c.height;b=b.offset.y;return Math.max(0,c.top+b-Math.max(0,e-g+b-a.marginToViewport.bottom))},stem:function(a){var b=a.ftd;var c=a.target;var e=c.top-b.top;c=c.height;var g=a.stem.height;a.stem.element.css({top:Math.max(6,Math.min(e+Math.max(6,Math.min(30,c/2))-g/2,b.height-g-6))})}},right:{left:function(a){return a.target.left+a.target.width+a.ftd.offset.x}}};c.bottom.left=c.top.left;c.bottom.stem=c.top.stem;c.right.top=c.left.top;c.right.stem=
c.left.stem;c["top-left"]=c.top;c["bottom-left"]=c.bottom;c["top-right"].top=c.top.top;c["bottom-right"].top=c.bottom.top;c["bottom-right"].left=c["top-right"].left;c["bottom-right"].stem=c["top-right"].stem;phx.placeFtd=function(b,d,f,e){b.children(".ftd-box-stem").css({top:"",right:"",bottom:"",left:""});b.find(".body").css("max-height","");b.css({top:0,left:0,display:"block",visibility:"hidden"});var g=a.Event("preopen.ftd",{ftdId:b.attr("id")});f.trigger(g);f=b.children(".ftd-box-stem");g=e.offset;
var h=e.centerstem;f={ftd:{element:b,width:b.outerWidth(!0),height:b.outerHeight(!0),offset:g},target:{element:d,width:d.outerWidth(),height:d.outerHeight()},stem:{element:f,width:f.outerWidth(),height:f.outerHeight(),has:b.is(".stem-north, .stem-east, .stem-south, .stem-west"),center:h}};a.extend(f.target,d.offset());h=a(".section-1 .section-container");var k=h.offset();g=k.left+h.outerWidth()+10;h=k.top+h.outerHeight()+10;d=d.marginToViewport(g,h,5);f.marginToViewport=d;e=e.position.split("-");
g=e[0];d=f.marginToViewport;h=f.ftd;k=h.offset;d={top:d.top-10>=h.height+k.y,right:d.right-10>=h.width+k.x,bottom:d.bottom-10>=h.height+k.y,left:d.left-10>=h.width+k.x};if(!d[g]){h={top:"bottom",right:"left",bottom:"top",left:"right"}[g];k=f.marginToViewport;var l=f.ftd.offset;if(d[h]||k[h]>k[g])g=h,"top"===g||"bottom"===g?l.y=-l.y:l.x=-l.x;e[0]=g}g=e[0];d=f.ftd;h=f.marginToViewport;k=h[g];if("left"===g||"right"===g)k=h.top+h.bottom;g=d.height+d.offset.y-k;0<g&&(h=d.element.find(".body").filter(":not(.js-ftd-scroll-prevention)"),
h.css("max-height",h.height()-g-5),d.height=d.height-g-5);e=e.join("-");f.stem.has&&(d=e.split("-")[0],g={top:"stem-south",bottom:"stem-north",left:"stem-east",right:"stem-west"},b.hasClass(g[d])||b.removeClass("stem-north stem-east stem-south stem-west").addClass(g[d]));f.ftd.left=c[e].left(f);f.ftd.top=c[e].top(f);c[e].stem(f);b.css({left:f.ftd.left,top:f.ftd.top,visibility:"visible"})}})(jQuery);(function(a){function c(b){var d=a(b.target);d.closest(".gui-toggle").toggleClass("minimized");"hidden"===d.data("trigger-visibility")&&d.closest(".gui-toggle-trigger-container").remove();phx.event.publish(phx.events.GUI_TOGGLE_TOGGLED,{target:b.target,causedBy:b})}a("[data-ftd-trigger]").wicketLive({"preopen.ftd":function(b){a("#"+b.ftdId).on("click",".gui-toggle-trigger",c)},"close.ftd":function(b){a("#"+b.ftdId).off("click",".gui-toggle-trigger",c)}});a("body").on("click",".gui-toggle-trigger",
c)})(jQuery);(function(){phx.isToggleControlMinimized=function(a){if(a)return!a.closest(".gui-toggle").hasClass("minimized")}})();
(function(a){function c(b){var d;var f=a(b.target).closest(".js-focusable");var e=f.outerHeight(!0);if("focusin"===b.type||"focus"===b.type)f.addClass("focused");else{if(d=+f.attr("data-focus-delay")){f.attr("data-focus-delay","0");window.setTimeout(function(){c(b);f.attr("data-focus-delay",d)},d);return}f.removeClass("focused")}var g=f.outerHeight(!0);g<e?phx.event.publish(phx.events.COLLAPSED_QUICK_REPLY,{type:phx.events.COLLAPSED_QUICK_REPLY,target:f}):g>e&&phx.event.publish(phx.events.EXPANDED_QUICK_REPLY,
{type:phx.events.EXPANDED_QUICK_REPLY,target:f})}a(".js-focusable textarea, .js-focusable input:password, .js-focusable input:text").wicketLive({focus:c,blur:c})})(jQuery);(function(a){phx.util.userAgent.is("ie","opera")||a(".panel-search .form-input input").keypress(function(c){13===c.which&&a(".panel-search .form-input input").blur()});a(".panel-search form").on("submit",function(c){""===a(".panel-search input.input-text").val()&&(a(".panel-search .form-input input").blur(),c.preventDefault())})})(jQuery);
(function(a){function c(){var b=a(this.form||this);var d=b.find("input:checked");b=b.find(".filter tfoot li");0===d.length?b.addClass("inactive"):1===d.length?b.removeClass("inactive"):b.filter(".no-multiple").addClass("inactive")}a("div.panel-setting input:checkbox").wicketLive({click:c}).closest("form").each(c)})(jQuery);
(function(a){function c(){a(document).trigger("closeLayer");a(".layer-overlay, .layer-root, .dialog-container").hide();phx.event.publish(phx.events.MODAL_DIALOG_CLOSE)}function b(a){a.css({"margin-left":-1*a.outerWidth()/2,"margin-top":-1*a.outerHeight()/2})}function d(d){var c=a(".layer-overlay"),e=a('<div class="spinner-icon"/>');a(".spinner-icon").remove();b(e);c.append(e);c.show();d?c.addClass("dark"):c.removeClass("dark")}function f(d){var e=a(".layer-root"),f=a("#"+d+" .layer-root");d=a("#"+
d+".dialog-container");a(document).trigger("openLayer");phx.event.publish(phx.events.MODAL_DIALOG_OPEN);d.show();e.hide();b(f);f.show();a(".layer-close").click(c)}phx.showLayerOverlay=d;phx.showLayerRoot=f;phx.closeLayer=c;phx.isLayerVisible=function(){return"none"!==a(".layer-root").css("display")||"none"!==a(".layer-overlay").css("display")};phx.showLayerOverlayWithCountdown=function(b,c,h){var e=a("#"+b+" .layer-dialog"),g=e.find(".layer-countdown");d(c);f(b);g.on("countdownFinish",function(){a("#immediatelySubmitButton").trigger("click");
e.removeClass("countdown");e.addClass("spinner");e.find(".layer-footer").slideUp(200)});phx.event.subscribe(phx.events.CANCEL_LAYER_COUNTDOWN,function(){g.trigger("countdownCancel")});g.countdown({timer:h})}})(jQuery);(function(a){function c(b){a(b.target).closest(".form-composite-list_item, .m-form-item, .form-item").find(":checkbox, :radio").each(function(){this.checked||(this.checked=!0,a(this).trigger("click",b))})}0===a(".panel-setting iframe").length&&a(".js-autoselect-formpart input[type=text], .js-autoselect-formpart select").wicketLive({focus:c})})(jQuery);
(function(a){function c(a){if(a||!phx.editor||phx.editor.isReady())h.hide(),g.css("cursor","auto"),d=window.clearTimeout(d),f=window.clearTimeout(f)}function b(){e||(h.show(),window.clearTimeout(d),d=window.setTimeout(function(){c(!0)},5E3),window.clearTimeout(f),f=window.setTimeout(function(){g.css("cursor","wait")},200));e=!1}var d,f,e=!1,g=a("body"),h=a("#blocker");a=Wicket.Event;var k=a.Topic;phx.event.subscribe(phx.events.SHOW_BLOCKER,b);phx.event.subscribe(phx.events.HIDE_BLOCKER,c);phx.event.subscribe(phx.events.DISABLE_BLOCKER_ONCE,
function(){e=!0});a.subscribe(k.AJAX_CALL_BEFORE_SEND,b);a.subscribe(k.AJAX_CALL_COMPLETE,c)})(jQuery);(function(a){a(".ftd-box input:text, .js-prevent-submit input:text").wicketLive({keydown:function(a){13===a.keyCode&&a.preventDefault()}})})(jQuery);
(function(a){phx.toggleButtonState=function(c,b){if("string"===typeof c){var d=c;c=a("#"+c);0<a("#"+d+"MenuTrigger").length&&phx.toggleButtonState(d+"MenuTrigger",b)}else c=a(c);d=c.is("input, button");"boolean"!==typeof b&&(b=d?!c.prop("disabled"):"true"!==c.attr("data-disabled"));d?c.prop("disabled",b):c.attr("data-disabled",b);c.closest("li")[b?"addClass":"removeClass"]("inactive");return!b}})(jQuery);(function(a,c){var b;var d={};var f=c.IS_HIDDEN;var e=function(a){"string"===typeof a&&(this.id=a,this.updateObjectReference())};phx.navigation||(phx.navigation={getFolder:function(a){return"string"===typeof a?a in d?d[a]:d[a]=new e(a):null}});a.extend(e.prototype,{isSystemFolder:function(){return this.element.hasClass("system")},isPresetFolder:function(){return this.element.hasClass("preset")},isCustomFolder:function(){return this.element.hasClass("custom")},isMailCollectorFolder:function(){return this.element.hasClass("mailcollector")},
isOpen:function(){return this.element.hasClass("open")},isClose:function(){return!this.isOpen()},hasParent:function(){return this._hasParent=this._hasParent||!this.element.closest("ul").hasClass("lvl1")},hasSubfolders:function(){return 0<this.element.siblings("ul").length},data:function(a,b){if("undefined"===typeof b)return this.element.data(a)||0;this.element.data(a,b)},unreadCount:function(a){return this.data("unread-count",a)},unreadTotal:function(a){return this.data("unread-total",a)},folderTotal:function(a){return this.data("folder-total",
a)},getLabelText:function(){return a.trim(this.element.find(".label").text())},open:function(){this.hasSubfolders()&&(this.element.addClass("open"),this.updateUnreadCountNumber(),this.saveFolderOpenState(),phx.event.publish(phx.events.FOLDER_OPEN,this))},close:function(){this.isOpen()&&(this.element.removeClass("open"),this.updateUnreadCountNumber(),this.deleteFolderOpenState(),phx.event.publish(phx.events.FOLDER_CLOSE,this))},hideUnreadCount:function(){this.element.find(".unread-count").addClass(f)},
showUnreadCount:function(){this.element.find(".unread-count").removeClass(f)},updateObjectReference:function(){this.element=a("div.folder[data-folderid="+this.id+"]")},updateUnreadCountNumber:function(){var a=this.hasSubfolders()?this.isOpen()?this.unreadCount():this.unreadTotal():this.unreadCount();0<a?this.showUnreadCount():this.hideUnreadCount();this.element.find(".unread-count > .badge").text(a)},updateLabelTitle:function(a){a=a||"string"===typeof a?a:this.getLabelText()+" ("+this.unreadCount()+
"/"+this.folderTotal()+")";this.element.find(".label").attr("title",a)},saveFolderOpenState:function(){var a=g();this.id in a||(a[this.id]=!0,h(a))},deleteFolderOpenState:function(){var a=g();delete a[this.id];h(a)}});var g=function(){try{return JSON.parse(localStorage.getItem("phx.navigation.openfolders"))||{}}catch(x){return null}};var h=function(a){try{localStorage.setItem("phx.navigation.openfolders",JSON.stringify(a))}catch(r){}};var k=function(b){if("object"===typeof b){var d=a(b.target);var c=
d.closest("a");d=d.closest("div.folder");d=phx.navigation.getFolder(d.data("folderid"));(c.hasClass("label")||c.hasClass("unread-count"))&&d.isClose()?d.saveFolderOpenState():c.hasClass("toggle")&&(d.isOpen()?d.close():d.open());phx.event.publish("domchange",{target:b.target})}};var l=function(b){"object"===typeof b.folders&&b.folders&&jQuery.each(b.folders,function(a,b){a=phx.navigation.getFolder(a);a.unreadCount(b.unreadCount);a.hasSubfolders()&&a.unreadTotal(b.unreadTotal);a.folderTotal(b.folderTotal);
a.updateLabelTitle();a.updateUnreadCountNumber()});"object"===typeof b.specials&&jQuery.each(b.specials,function(b,d){var c=a("#navigation [data-folderid="+b+"] span.badge");d=d.unreadCount;0<d?c.removeClass(f):c.addClass(f);a("#navigation [data-folderid="+b+"] span.badge").text(d)})};var m=function(){var b=g();"object"===typeof b&&a.each(b,function(a){phx.navigation.getFolder(a).open()})};var q=function(b){"object"===typeof b&&a.isArray(b.folders)?a.each(b.folders,function(a,b){d[b]&&d[b].updateObjectReference()}):
a.each(d,function(a,b){b.updateObjectReference()})};var t=function(a){q(a);m()};var u=function(){var b=[];a("#navigation .folder.open").each(function(){var d=a(this).data("folderid");b.push(d)});return b};var p=function(b){a.isArray(b)&&a.each(b,function(a,b){phx.navigation.getFolder(b).saveFolderOpenState()})};(function(){var d=u();m();p(d);b=["div.folder a.toggle","div.folder a.label","div.folder a.unread-count"];a("#navigation").on("click",b.join(","),k);phx.event.subscribe(phx.events.NAVIGATION_UPDATE_DATA,
l);phx.event.subscribe(phx.events.NAVIGATION_UPDATE,t)})()})(jQuery,CssUtils.modifier);(function(a,c){a("#navigation [data-ftd-trigger]").wicketLive({"close.ftd":function(){a(this).closest(".nav-item").removeClass(c.HAS_OPEN_FLYOUT)},startAjax:function(){a(this).closest(".nav-item").addClass(c.HAS_OPEN_FLYOUT)}})})(jQuery,CssUtils.modifier);
(function(a){function c(){a(".folder .tools .refresh").removeClass("animate")}var b;phx.event.subscribe(phx.events.REFRESH_ANIMATION_START,function(){b=Date.now();a(".folder .tools .refresh").addClass("animate")});phx.event.subscribe(phx.events.REFRESH_ANIMATION_STOP,function(){var a=Date.now()-b;1500<a?c():window.setTimeout(c,1500-a)})})(jQuery);
(function(a){function c(){var b=a(".folder.active")[0];if(b){var d=b.getBoundingClientRect().bottom,c=a(b).closest(".js-scroll-pane")[0].getBoundingClientRect().bottom;d>c&&b.scrollIntoView(!1)}}c();phx.scrollFolderIntoView=c})(jQuery);(function(a){function c(a){this.init(a)}c.prototype={drag:{container:null,selector:null,options:null},drop:{container:null,selector:null,options:null},iconClass:"",init:function(b){b.dragContainer&&(this.drag.container=a(b.dragContainer),this.drag.selector=b.dragSelector,this.drag.options=b.dragOptions||{},this.setupDrag());b.dropSelector&&(this.drop.container=a(b.dropContainer),this.drop.selector=b.dropSelector,this.drop.options=b.dropOptions||{},this.setupDrop())},setupDrag:function(){var b=this.drag.options,
d=this.drag.container,c=this.drag.selector,e={limit:a("body"),opacity:.95,cursor:"move",defaultHelper:!0,distance:15,iframeFix:"body"},g=a("body"),h=a.extend({},e,b),k=this,l;d.off("draginit dragdown dragmove dragover dragout dragend");for(l in h)if("dragdown"===l||"dragmove"===l||"dragend"===l||"dragover"===l||"dragout"===l)d.on(l,c,h[l]);d.on("draginit",c,function(b,d){d.dndInstance=k;h.draginit&&h.draginit(b,d);h.iframeFix&&a(!0===h.iframeFix?"iframe":h.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+
"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:9999}).css(a(this).offset()).appendTo("body")});h.defaultHelper&&(b=a('<div class="ftd-box"><div class="ftd-box-content"><div class="dnd"><span class="icon-dnd"></span></div></div></div>'),b.find("span.icon-dnd").after(d.movingElement),b.appendTo(".page"),d.representative(b,-15,-5));g.addClass("dnd-"+h.cursor);h.limit&&d.limit(h.limit)});d.on("dragend",c,function(b,d){g.removeClass("dnd-"+h.cursor);d.movingElement.remove();
!1!==h.iframeFix&&a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)})});if(h.opacity)d.on("draginit",c,function(a,b){b.movingElement.css("opacity",h.opacity)});d.on("dragdown",c,function(a,b){b.distance(h.distance);a=b.element.get(0);"undefined"!==typeof a.onselectstart?a.onselectstart=function(){return!1}:"undefined"!==typeof a.style.MozUserSelect?a.style.MozUserSelect="none":a.onmousedown=function(){return!1}})},setupDrop:function(){var a=this.drop.options,d=this.drop.container,
c=this.drop.selector,e=this,g;d.off("dropinit dropover dropmove dropon dropout dropend");for(g in a)if("dropinit"===g||"dropover"===g||"dropout"===g||"dropmove"===g||"dropon"===g||"dropend"===g)d.on(g,c,a[g]);d.on("dropinit",c,function(a,b){b.dndInstance=e});d.on("dropover",c,function(a,b){b.element.addClass("dropover")});d.on("dropout dropend",c,function(a,b){b.element.removeClass("dropover")});this.drag.options.defaultHelper||(d.on("dropover",c,function(a,b,d){d.movingElement.find(".icon-dnd").attr("class",
"").addClass("icon-dnd "+e.icon())}),d.on("dropout",c,function(a,b,d){d.movingElement.find(".icon-dnd").attr("class","").addClass("icon-dnd "+e.icon())}))},icon:function(a){a&&(this.iconClass=a);return this.iconClass}};phx.dnd=phx.dnd||{};phx.dnd.create=function(a){return new c(a)};if(phx.util.userAgent.is("ios")||0<navigator.maxTouchPoints&&256!==navigator.maxTouchPoints)phx.dnd.create=function(){}})(jQuery);(function(a,c){function b(){this.keySupportWhiteList="input, textarea, select";this.keySupportBlackList=":checkbox";this.keyBindings={};this.isActive=!1;this.keydownHandler=function(a){var b=this.getKeyBinding(a.which);!b||this.isSystemKeyCombo(a)||this.hasGallery()||b.preventIFrameKeys&&this.isIFrame(a.target)||b.preventInputKeys&&this.isInputElementWithKeySupport(a.target)||b.callback.call()};this.boundKeydownHandler=this.keydownHandler.bind(this);this.isSystemKeyCombo=function(a){return!!this.isKeyCombinationWithDelete(a)};
this.isKeyCombinationWithDelete=function(a){return!(!this.isMetaKey(a)||!this.isDeleteKey(a))};this.isMetaKey=function(a){return!!(a.metaKey||a.ctrlKey||a.shiftKey||a.altKey)};this.isDeleteKey=function(a){return a.keyCode===c.DELETE};this.isIFrame=function(b){return!!a(b).is("iframe")};this.hasGallery=function(){return!!a("html").hasClass("slideshow-visible")};this.isInputElementWithKeySupport=function(b){return a(b).is(this.keySupportWhiteList)&&!a(b).is(this.keySupportBlackList)};this.startKeyListener=
function(){this.isActive||(a(document).on("keydown",this.boundKeydownHandler),this.isActive=!0)};this.stopKeyListener=function(){a(document).off("keydown",this.boundKeydownHandler);this.isActive=!1};this.addKey=function(b,c,e){this.keyBindings[b]=a.extend({preventInputKeys:!0,preventIFrameKeys:!1,callback:c},e)};this.removeKey=function(a){delete this.keyBindings[a]};this.getKeyBinding=function(a){return this.keyBindings.hasOwnProperty(a)?this.keyBindings[a]:null}}phx.KeyListener=phx.KeyListener||
{};phx.KeyListener.create=function(){return new b}})(jQuery,phx.util.KEYS);(function(a){function c(b){return a(b).is(".menu-item")}function b(a,b){b||(b={});b.hasOwnProperty("type")||(b.type=a);phx.event.publish(a,b)}function d(){a("#checkbox-select-all").on("click",function(){b("mailSelectionRequest",{items:this.checked?"all":"none"})})}phx.event.subscribe(phx.events.FOLDER_SWITCH,d);phx.event.subscribe(phx.events.FULLSCREEN_CLOSE,d);d();var f=Wicket.Event,e=f.Topic;f.subscribeFor(e.AJAX_CALL_BEFORE_SEND,"toolbarButtonDelete",function(){b("mailDeleteRequest",{})});f.subscribeFor(e.AJAX_CALL_BEFORE_SEND,
"toolbarButtonSpam",function(){b("mailSpamRequest",{})});f.subscribeFor(e.AJAX_CALL_BEFORE_SEND,"toolbarButtonNoSpam",function(){b("mailMoveRequest",{targetFolderId:"spam"})});a("#toolbarButtonReply").wicketLive("click",function(){b("mailReplyRequest",{})});a("#toolbarButtonForward").wicketLive("click",function(){b("mailForwardRequest",{})});a("#toolbarButtonSendAgain").wicketLive("click",function(){b("mailResendRequest",{})});a("#selectDropdown").wicketLive("click",function(a){c(a.target)&&(a=a.target.parentNode.getAttribute("data-filter"))&&
(phx.statistics.trackEvent("/mail/toolbar/select"+a),b("mailSelectionRequest",{items:a}))});a("#replyDropdown").wicketLive("click",function(a){c(a.target)&&b("mailReplyRequest",{})});a("#moveToDropdown").wicketLive("click",function(a){c(a.target)&&b("mailMoveRequest",{targetFolderId:a.target.getAttribute("data-folderid")})});a("#changeViewDropdown").wicketLive("click",function(a){c(a.target)&&phx.ftd.close()})})(jQuery);
(function(a){function c(a){a.addClass("inactive").find("button").prop("disabled",!0)}function b(b){var d=document.getElementById("checkbox-select-all");d&&(d.checked=b.areAllSelected);if(!0!==phx.getVar("iac.open_mail")){d=b.length;var f=a(".widget.menubar ul.button > li");var h=f.filter(".prev, .next");f=f.not(h);f.removeClass("inactive").find("button").prop("disabled",!1);0===d?c(f.filter(":not(.no-disable)")):1<d?c(f.filter(".no-multiple")):b.isEncrypted&&(c(f.filter(".forward.split-right")),c(f.filter(".send-again")));
1===d||0===d?a("#selectDropdown").find(".no-multiple").show():a("#selectDropdown").find(".no-multiple").hide();b.showMail||c(h);a(".mail-display-wrapper").is(":visible")||h.hide()}}function d(a,d,c){b({length:a?0:1,areAllSelected:!1,isFirstSelected:!1,isLastSelected:!1,showMail:d,isEncrypted:c})}phx.event.subscribe(phx.events.TOGGLE_TOOLBAR_DISABLED,function(a){d(!!a.disable,!!a.showMail,!!a.isEncrypted)});phx.event.subscribe(phx.events.MAIL_SELECTION_CHANGED,b);phx.event.subscribe(phx.events.FOLDER_SWITCH,
function(){d(!0)})})(jQuery);
(function(a){function c(b){var d=a(".menubar .upsell-link");!0!==b||phx.util.userAgent.is("ios")?d.removeClass("shown"):d.addClass("shown")}function b(){var b=a(".menubar");var f=b.children(".upsell-link");var e=b.children(".button-container.left");var g=b.children(".button-container.right");e=e.outerWidth();g=g.outerWidth();b=b.outerWidth();f=f.outerWidth();c(b-e-g-30>f)}a(".menubar .upsell-link").length&&(phx.event.subscribe(phx.events.RESIZE_HANDLED,b),phx.event.subscribe(phx.events.RESIZE_STARTED,c),
phx.event.subscribe(phx.events.FOLDER_SWITCH,b),phx.event.subscribe("domchange",b),b())})(jQuery);(function(a){function c(){}function b(a){a.hide();a.find("iframe").attr("src",phx.vars.blankUrl)}document.getElementById("mail-list")||["select","selectSection","updateToolbarEnabled"].forEach(function(a){phx[a]=c});var d,f;0===a(".mail-display-wrapper").children(":visible").length&&a(".mail-display-wrapper").hide();phx.event.subscribe(phx.events.MAIL_MOVED,function(a){1===a.mailData.length&&a.mailData[0].mailId===d&&(f=!0)});phx.event.subscribe(phx.events.MAIL_SHOWN,function(b){var c=a(".mail-display-wrapper");
d=b.mailId;f=!0;c.is(":visible")||(c.show(),phx.event.publish("domchange",{target:c}))});phx.event.subscribe(phx.events.MAIL_SELECTION_CHANGED,function(){if(!0!==phx.getVar("iac.open_mail"))if(f)f=!1;else{var d=a(".mail-display-wrapper");0!==d.length&&"none"!==d[0].style.display&&(b(d),phx.event.publish("domchange",{type:"domchange",target:d}))}});phx.event.subscribe(phx.events.FOLDER_SWITCH,function(){var d=a(".mail-display-wrapper");d.is(":visible")&&b(d)});phx.event.subscribe(phx.events.DOM_NODE_REMOVING,
function(b){a(b.target).hasClass("widget-mail-mail")&&a(".widget-mail-reply-quick").css({visibility:"hidden"})})})(jQuery);(function(a,c){var b=null;phx.eicAdapter={connectEIC:function(){return(b=window.com&&com.unitedinternet&&com.unitedinternet.eic||null)?(b.isListen||(b.listen(),b.isListen=!0),!0):!1},eicRegisterCommand:function(a,c){return a&&"function"===typeof c?(b.commands[a]=c,!0):!1},eicRegisterFrame:function(a){var d=-1;b&&"iframe"===a.tagName.toLowerCase()&&(d=b.frames.length,b.frames.push(a));return d},getEicParams:function(a){return b.params({url:c.getEicClientUrl(),id:a})}}})(jQuery,phx.util.eic);(function(a,c,b,d){function f(a){if(a&&a.url){var d=l(),e=a.url;a="nma"===a.type&&q?b.generateUrl(e,c.getEicParams(t)):e;d.src=a;g(l().src)}}function e(){return!("safari"!==phx.util.userAgent.browser.family||!phx.util.userAgent.is("ios")||!phx.vars.iOSDisplayMailTimeout)}function g(b){var c=1,f=window.setInterval(function(){50<=c&&clearInterval(f);c++;try{if(b===l().contentWindow.location.href)a("#mail-detail").contents().on("keydown",h);else if(void 0===l().contentWindow.location.href)clearInterval(f),
e()?d.Log.info("Mailbody URL === undefined: Mail (or NMA) has been called after iOS timeout, which lasted "+phx.vars.iOSDisplayMailTimeout+"ms"):d.Log.info("Mailbody URL === undefined: Mail (or NMA) has been called without timeout");else return}catch(r){}clearInterval(f)},100)}function h(b){b.target=l();a(document).trigger(b)}function k(a){e()?window.setTimeout(function(){f(a)},phx.vars.iOSDisplayMailTimeout):f(a)}function l(){return document.getElementById("mail-detail")}var m=!1,q=!1,t=-1;phx.onMailDisplaySourceChange=
function(a){m||(m=c.connectEIC());q||(t=c.eicRegisterFrame(l()),nx&&nx.eicJumpTo&&c.eicRegisterCommand("jumpto",nx.eicJumpTo),q=-1<t);k(a)}})(jQuery,phx.eicAdapter,phx.util.eic,Wicket);(function(a){function c(b){if(b)b={length:1,isNma:!0};else{b=a(m.allSelectable);var d=b.filter(":checked");var c=a(m.encrypted);b={areAllSelected:0<b.length&&b.length===d.length,length:d.length,isFirstSelected:b.first().is(":checked"),isLastSelected:b.last().is(":checked"),isNma:!1,isEncrypted:0<c.length}}d=phx.events.MAIL_SELECTION_CHANGED;b.type=d;phx.event.publish(d,b)}function b(){var b=a(".iba, .iba-acceptable, .iba-arm");b.removeClass("was-marked").filter(".marked").addClass("was-marked");b.removeClass("selected marked")}
function d(){a("#mail-list tr.lastSelection").removeClass("lastSelection")}function f(b,d,c,e){var f=a(b),g=f.closest("tr[data-oao-mailid]");0!==g.length&&(b.checked||!e&&f.hasClass("selected")?(g.addClass("marked"),d&&d.checked?g.removeClass("marked-first"):g.addClass("marked-first"),c&&c.checked?g.removeClass("marked-last"):g.addClass("marked-last")):g.removeClass("marked marked-first marked-last"))}function e(b){var d=a(m.allSelectable);d.closest("tr").removeClass("marked marked-first marked-last");
b=b.isNma?a(".iba.selected,.iba-acceptable.selected,.iba-arm.selected").get(0):a(m.selected).get(0);d=d.filter(":visible");var c=a.inArray(b,d);f(b,d[c-1],d[c+1],!1)}function g(b){if(1===b.length)e(b);else{var d=a(m.all).filter(":visible");d.each(function(a){f(this,d[a-1],d[a+1],!0)})}}function h(b,d){var c=[],e;b.each(function(){var b=a(this).closest("tr");e={unread:b.hasClass("new"),important:b.hasClass("starred"),mailId:b.attr("data-oao-mailid"),folderId:b.attr("data-folderid")};e.targetFolderId=
d;c.push(e)});return c}function k(b){var d=a(m.selected).closest("tr");if(1!==d.size()||"newsletter"!==d.first().attr("data-oao-category"))b.targetFolderId="spam",l(b)}function l(b){if(b&&b.hasOwnProperty("mailId")){var d=a("#mail-list tr[data-oao-mailid="+b.mailId+"]");var e=d.hasClass("marked")}else b&&b.hasOwnProperty("mailIds")?(e=b.mailIds.map(function(a){return"#mail-list tr[data-oao-mailid="+a+"]"}),d=a(e.join(",")),e=d.hasClass("marked")):(d=a(m.selected).closest("tr"),e=!0);b=h(d,b&&b.targetFolderId);
d.hide();phx.event.publish(phx.events.MAIL_MOVED,{type:phx.events.MAIL_MOVED,mailData:b});b=a(m.selected).filter(":visible");d=a(m.allSelectable).filter(":visible");(e||d.length===b.length)&&c()}var m={all:"#mail-list tbody input:checkbox",allSelectable:"#mail-list tbody td input:checkbox",unread:"#mail-list tr.new td input:checkbox",read:"#mail-list tr:not(.new) td input:checkbox",selected:"#mail-list tbody td input:checked",unselected:"#mail-list tbody td input:checkbox:not(:checked)",encrypted:"#mail-list tr.encrypted td input:checkbox:checked"};
phx.event.subscribe(phx.events.TRIGGER_MAIL_SELECTION_CHANGED,function(){b()});document.getElementById("mail-list")&&(phx.event.subscribe(phx.events.TRIGGER_MAIL_SELECTION_CHANGED,c),phx.event.subscribe(phx.events.MAIL_SELECTION_CHANGED,g),phx.event.subscribe(phx.events.MAIL_MOVE_REQUEST,l),phx.event.subscribe(phx.events.MAIL_DELETE_REQUEST,l),phx.event.subscribe(phx.events.MAIL_SPAM_REQUEST,k),phx.event.subscribe(phx.events.MAIL_SHOWN,function(e){var f=a("[data-oao-mailid="+e.mailId+"]");e=f.is(".iba, .iba-acceptable, .iba-arm");
a(m.all).filter(":checkbox").prop("checked",!1);b();if(e)f.addClass("selected");else{var g=f.find("input:checkbox").first();g.prop("checked",!0);d();f.addClass("lastSelection")}f.removeClass("new");g=f[0];var h=g.getBoundingClientRect();f=f.closest(".js-scroll-pane")[0].getBoundingClientRect();h.top<f.top||0===f.height?g.scrollIntoView():h.bottom>f.bottom&&g.scrollIntoView(!1);c(e)}),phx.event.subscribe(phx.events.MAIL_SELECTION_REQUEST,b),c());phx.select=function(b){if(b in m||"none"===b)"all"!==
b&&a(m.all).prop("checked",!1),"none"!==b&&a(m[b]).prop("checked",!0),d(),c()};phx.selectSection=function(a,b){b=b.find("tr[data-oao-mailid] input:checkbox");a.checked?b.prop("checked",!0):b.prop("checked",!1)}})(jQuery);(function(a){var c;var b=a("#panel-mail-table");if(0<b.find("th input.checkbox-select-section").length)b.on("click","th input.checkbox-select-section",function(b){c=a(this).closest("tbody");phx.selectSection(b.target,c);phx.event.publish(phx.events.TRIGGER_MAIL_SELECTION_CHANGED)})})(jQuery);
(function(a){phx.event.subscribe(phx.events.MAIL_SELECTION_CHANGED,function(){a("#mail-list tbody").each(function(){var c=a(this);var b=c.find("th input:checkbox");c=c.find("td input:checkbox");1===b.length&&0<c.length&&b.prop("checked",c.length===c.filter(":checked").length)})})})(jQuery);(function(a){phx.isClickableMailListColumn=function(c){return 0===a(c.target).closest(".slct, .folder-section, tfoot, tr.drag").length&&!c.shiftKey&&!c.ctrlKey}})(jQuery);
(function(a){phx.MailRow=function(c){this.$row=a(c).eq(0);this.selector=c;(this.selected=this._selected=this.$row.hasClass("marked"))?(this.isFirst=this._isFirst=this.$row.hasClass("marked-first"),this.isLast=this._isLast=this.$row.hasClass("marked-last")):this.isLast=this._isLast=this.isFirst=this._isFirst=!1;this.isRead=this._isRead=!this.$row.hasClass("new");this.isImportant=this._isImportant=this.$row.find(".mail-star").hasClass("starred");this.setSelected=function(a,d){this.selected=a;this.selected===
this._selected||d||(this.selected?(0<this.$row.prev().length?(a=new phx.MailRow("#"+this.$row.prev().attr("id")),a.getSelected()?(this.setFirst(!1),a.setLast(!1)):this.setFirst(!0)):this.setFirst(!0),0<this.$row.next().length?(a=new phx.MailRow("#"+this.$row.next().attr("id")),a.getSelected()?(this.setLast(!1),a.setFirst(!1)):this.setLast(!0)):this.setLast(!0),this.$row.addClass("marked"),this.setCheckbox(!0)):(this.setFirst(!1),this.setLast(!1),0<this.$row.prev().length&&(a=new phx.MailRow("#"+this.$row.prev().attr("id")),
a.getSelected()&&a.setLast(!0)),0<this.$row.next().length&&(a=new phx.MailRow("#"+this.$row.next().attr("id")),a.getSelected()&&a.setFirst(!0)),this.$row.removeClass("marked marked-first marked-last"),this.setCheckbox(!1)),this._selected=this.selected)};this.setCheckbox=function(a){this.$row.find(".slct input").prop("checked",a)};this.setFirst=function(a){(this.isFirst=a)?this.$row.addClass("marked-first"):this.$row.removeClass("marked-first")};this.setLast=function(a){(this.isLast=a)?this.$row.addClass("marked-last"):
this.$row.removeClass("marked-last")};this.setRead=function(a,d){this.isRead=a;if(this.isRead!==this._isRead||!0===d)this.isRead?(this.$row.removeClass("new"),this.$row.find(".mail-mark").removeClass("marked")):(this.$row.addClass("new"),this.$row.find(".mail-mark").addClass("marked")),this._isRead=this.isRead};this.setImportant=function(a,d){this.isImportant=a;if(this.isImportant!==this._isImportant||!0===d)this.isImportant?this.$row.find(".mail-star").addClass("starred"):this.$row.find(".mail-star").removeClass("starred")};
this.getSelected=function(){return this.selected};this.getFirst=function(){return this.isFirst};this.getLast=function(){return this.isLast};this.getRead=function(){return this.isRead};this.getImportant=function(){return this.isImportant};this.restoreState=function(b){b&&(this.$row=a(a(this.selector)[0]));this.selected?(this.$row.addClass("marked"),this.setCheckbox(!0),this.setFirst(this.isFirst),this.setLast(this.isLast)):(this.setCheckbox(!1),this.$row.removeClass("marked"),this.setFirst(!1),this.setLast(!1));
this.setRead(this.isRead,!0);this.setImportant(this.isImportant,!0)}}})(jQuery);
(function(a){var c={selectedMails:[],store:function(){var a=c.getSelectedRows();c.resetStore();0<a.length&&a.each(function(){c.selectedMails.push({mailID:this.getAttribute("data-oao-mailid")})})},restore:function(a){a&&a.id&&(c.resetStore(),c.selectedMails.push({mailID:a.id}));c.hasSelection()&&(c.selectReloadedRows(),c.resetCheckboxState(),c.resetStore())},getSelectedRows:function(){return a("#mail-list").find("tr.marked")},getReloadedRows:function(){var b=[],d;var f=0;for(d=c.selectedMails.length;f<
d;f++)b.push('tr[data-oao-mailid="'+c.selectedMails[f].mailID+'"]');return a("#mail-list").find(b.join(","))},selectReloadedRows:function(){var b,d;return c.getReloadedRows().each(function(){d=a(this).attr("id");b=new phx.MailRow("#"+d);b.setSelected(!0)})},resetCheckboxState:function(){return a("#mail-list tr:not(.marked) input:checked").prop("checked",!1)},resetStore:function(){c.selectedMails=[]},hasSelection:function(){return 0<c.selectedMails.length}};phx.event.subscribe(phx.events.STORE_SELECTION,
c.store);phx.event.subscribe(phx.events.RESTORE_SELECTION,c.restore)})(jQuery);
(function(a){function c(b){phx.util.userAgent.is("ios")||a(b).find("#hoverMenu").remove()}var b={r:"reply",o:"open",d:"delete"};if(document.getElementById("hoverMenu")){var d=a("#hoverMenu").parent().html();a("#hoverMenuWrp").hide();a("#hoverMenu").hide().attr("id","hoverMenuOri");a(document).on({mouseenter:function(){var c=a(this),e=a(d);if(!phx.util.userAgent.is("ios")){var g=c.attr("data-hovermenu-hide"),h;if("string"===typeof g)for(g=g.split(""),h=0;h<g.length;h++){var k=b[g[h]];a(e.find('li[data-oao-hover="'+
k+'"]')).hide()}c.find(".tool").prepend(e.css("display","block"))}},mouseleave:function(){c(this)}},"#maillist tr");phx.event.subscribe(phx.events.DOM_NODE_REMOVING,function(a){"TR"===a.target.nodeName&&c(a.target)})}})(jQuery);
(function(a){var c=a("#panel-mail-table");c.on("click","tr[data-oao-mailid] input[type=checkbox]",function(b){b.shiftKey||(a("#mail-list tr.lastSelection").removeClass("lastSelection"),a(this).parents("tr").addClass("lastSelection"),phx.event.publish(phx.events.TRIGGER_MAIL_SELECTION_CHANGED),b.stopPropagation())});c.on("click","tr[data-oao-mailid]",function(b){var d;var c=a(this).find("td:first input[type=checkbox]");b.ctrlKey&&!a(this).hasClass("drag")&&b.target!==c.get(0)&&(c.prop("checked",!c.prop("checked")),
phx.event.publish(phx.events.TRIGGER_MAIL_SELECTION_CHANGED),a("#mail-list tr").removeClass("lastSelection"),a(this).addClass("lastSelection"),b.stopPropagation());if(b.shiftKey){var e=a("#mail-list tr.lastSelection");0===e.length&&(e=a("#mail-list tr:has(td):first"));b.target===c.get(0)&&c.prop("checked",!0);c=a("#mail-list tr[data-oao-mailid]");e=c.index(e.get(0));var g=c.index(b.currentTarget);c.find("td:first input[type=checkbox]").prop("checked",!1);e=e<=g?c.slice(e,g+1):c.slice(g,e+1);g=0;for(d=
e.length;g<d;g++)c=e[g],c=a(c).find("td:first input[type=checkbox]"),c.prop("checked",!0);phx.event.publish(phx.events.TRIGGER_MAIL_SELECTION_CHANGED);b.stopPropagation()}})})(jQuery);(function(a){function c(a,b){b||(b={});b.hasOwnProperty("type")||(b.type=a);phx.event.publish(a,b)}var b=a("#mail-list");phx.event.subscribe(phx.events.MAIL_SELECTION_REQUEST,function(a){a.hasOwnProperty("items")&&phx.select(a.items)});b.on("click","td input[type=checkbox]",function(){var b=a(this).closest("tr");b.hasClass("new");b.hasClass("starred");var f=b.attr("data-oao-mailid");b.attr("data-folderid");c(this.checked?"mailSelectionRequest":"mailDeselectionRequest",{mailIds:[f]})});b.on("click",
"th input[type=checkbox]",function(){c(this.checked?"mailSelectionRequest":"mailDeselectionRequest")})})(jQuery);
(function(a){phx.initMaillistDragDrop=function(){var c=a("#section-0 .js-scroll-pane");phx.dnd.create({dragContainer:"#panel-mail-table",dragSelector:"tr[data-oao-mailid]:not(.iba, .iba-acceptable, .iba-arm)",dragOptions:{draginit:function(b,d){var f=d.element.find("td:first input[type=checkbox]"),e=0,g=[];f.prop("checked")||(b.ctrlKey||phx.event.publish(phx.events.MAIL_SELECTION_REQUEST,{items:"none"}),f.prop("checked",!0),phx.event.publish(phx.events.TRIGGER_MAIL_SELECTION_CHANGED),a(d.element).addClass("lastSelection"));
a("#mail-list tr.marked").each(function(b,d){e++;g.push(a(d).data("oao-mailid"))});d.mails=g;d.movingElement=1!==e?i18n.getString("dragdrop.mail.move.many",[g.length]):i18n.getString("dragdrop.mail.move.one");d.scrolls(c.get(0));d.element.addClass("drag")},dragend:function(a,d){var b=d.element;d.movingElement.remove();phx.util.nextTick(function(){b.removeClass("drag")})}},dropContainer:"#section-0",dropSelector:".folder",dropOptions:{accept:"#mail-list tr[data-oao-mailid]",dropover:function(a,d,f){var b=
d.element;a=b.offset();d=c.offset();a=a.top+b.height()<c.height()+d.top&&a.top>d.top;!b.hasClass("active")&&a&&b.hasClass("droppable")?f.dndInstance.icon("ok"):f.dndInstance.icon("abort");b.data("timeout",setTimeout(function(){phx.navigation.getFolder(b.data("folderid")).open()},750))},dropout:function(a,d,c){c.dndInstance.icon("abort");clearTimeout(d.element.data("timeout"));d.element.removeData("timeout")},dropon:function(a,d,c){a=d.element;if(void 0!==a.data("folderid")&&"ok"===c.dndInstance.icon()){a=
a.data("folderid");var b=c.mails.map(function(a){return{name:"mailid",value:a}});b.unshift({name:"folderid",value:a});Wicket.Ajax.post({u:phx.getVar("maildrop.callbackUrl"),dep:[function(){return b}]})}}}})}})(jQuery);(function(a){a("#panel-mail-table.panel-mail-display-table-mail-vertical").on("click",".paging .area",function(){this.blur()})})(jQuery);(function(a){function c(d){b("fullscreen","preview");a("#fullscreen").text(i18n.getString("detailClose"));"none"===d?(a(".mail-display-wrapper").show(),a(".widget.menubar ul.button > li").filter(".prev, .next").show()):phx.event.publish(phx.events.UPDATE_ADS)}function b(b,c){var d=a(".panel-mail-display-table"),f=a(".widget.menubar");d.addClass(b);f.addClass(b);d.removeClass(c);f.removeClass(c)}phx.mailRead={openFullscreen:c,openFullscreenDirectly:function(b){!0===phx.getVar("iac.open_mail")&&(phx.vars["iac.open_mail"]=
!1,c(b),a(".widget.menubar ul.button > li").filter(".prev, .next").hide())},closeFullscreen:function(c){b("preview","fullscreen");a("#fullscreen").text(i18n.getString("detailView"));"none"===c&&(a(".mail-display-wrapper").hide(),a(".widget.menubar ul.button > li").filter(".prev, .next").hide());phx.event.publish(phx.events.FULLSCREEN_CLOSE);phx.event.publish(phx.events.UPDATE_ADS)}}})(jQuery);(function(a){phx.initAttachmentComponent=function(){var c=a("webmailer-detail-attachments");0<c.length&&(new ResizeObserver(function(){var b=a("webmailer-detail-attachments");0<b.length&&phx.event.publish(phx.events.GUI_TOGGLE_TOGGLED,{target:b.get(0)})})).observe(c.get(0))}})(jQuery);(function(a){function c(a){switch(a){case "success":return"is-success";case "warning":return"is-warning";case "error":return"is-error";case "emig":return"is-emig";default:return"is-info"}}function b(a){switch(a){case "medium":return 4E3;case "long":return 8E3;case "extralong":return 3E5;case "forever":return-1;default:return 2500}}phx.mailComponentShowMessage=function(d){if(d.detail&&d.detail.content){var f=c(d.detail.content.type),e=d.detail.content.summary,g=d.detail.content.detail;d=b(d.detail.content.duration);
var h=a("#system-message");h.addClass("system-message-wrapper");h.html('<div class="system-message '+f+'" data-duration="'+d+'" style="display: none;">\n    <a class="js-system-message_close system-message_icon-close icon-link is-icon-x">\n        <i class="icon-link_icon m-icon"></i>\n    </a>\n    <i class="system-message_icon-type m-icon"></i>\n    <div class="system-message_content">\n        <div class="system-message_collapse-wrapper">\n            <div class="system-message_topmessage headline headline-layout3">'+
e+"</div>\n"+(g?'<p class="system-message_submessage paragraph">'+g+"</p>":"")+"\n</div>\n</div>\n</div>");h.show();a(document).trigger(phx.events.ON_SHOW_SYSTEM_MESSAGE,"#system-message .system-message")}}})(jQuery);(function(a){function c(b){a(".mail-list__preview--selection-count").find(".js-selection-count").text(b)}function b(b){b.detail&&b.detail.content&&c(b.detail.content.length);a("webmailer-mail-detail").removeClass("trusted-internal-mail").removeAttr("data-trusted-dialog-id");document.querySelector("webmailer-mail-detail")&&phx.event.publish(phx.events.UPDATE_ADS);a(".mail-list__preview--mail-display").hide();a("#pibaContent").hide();a(".mail-list__preview--selection-count").show()}function d(b){a(".mail-list__preview--selection-count").hide();
a("#pibaContent").hide();if(document.querySelector("#spa-mail-detail")){a(".mail-list__preview--mail-display").children().hide();if("wmlist_mail-open"===b.type){var c=document.querySelector("webmailer-mail-detail");if(null==c||c.getAttribute("mail-id")!==b.detail.content.mailId){var d=b.detail.content;b=d.mailId;(c=document.querySelector(".mail-list__preview--mail-display").querySelector("webmailer-mail-detail"))||(c=v("#spa-mail-detail","webmailer-mail-detail"));d.contentTrusted?c.classList.add("trusted-internal-mail"):
c.classList.remove("trusted-internal-mail");d.tdId?c.setAttribute("data-trusted-dialog-id",d.tdId):c.removeAttribute("data-trusted-dialog-id");c.setAttribute("mail-id",b);d=w(phx.vars.withExternals,b);c.setAttribute("full-body-src",d);var e=w(phx.vars.withoutExternals,b);c.setAttribute("safe-body-src",e);c.mail={mailId:b,fullBodySrc:d,safeBodySrc:e,printMailUrl:w(phx.vars.printUrl,b),saveMailUrl:w(phx.vars.saveUrl,b)}}a("webmailer-mail-detail").show()}else b=b.detail.content,a("webmailer-mail-detail").removeClass("trusted-internal-mail").removeAttr("data-trusted-dialog-id"),
(c=document.querySelector(".mail-list__preview--mail-display").querySelector("webmailer-ad-detail"))||(c=v("#spa-ad-detail","webmailer-ad-detail")),c.setAttribute("bannerid",b.bannerid),c.setAttribute("content-url",b.contentUrl),c.setAttribute("subject",b.subject),a("webmailer-ad-detail").show();a(".mail-list__preview--mail-display").show();phx.event.publish(phx.events.UPDATE_ADS)}}function f(b){z&&(z=null);var c=b.detail.content;if((b=document.querySelector("webmailer-mail-sidebar"))&&b.initDrag)z=
{content:{dragContainer:c.dragContainer,dragSelector:c.dragSelector,dragOptions:c.dragOptions}},b.initDrag(z);else{var d=a("#section-0 .js-scroll-pane");z=phx.dnd.create({dragContainer:c.dragContainer,dragSelector:c.dragSelector,dragOptions:{draginit:function(b,e){var f=a(c.dragContainer).find(c.dragSelector).index(e.element);-1<f&&(e.elementIndex=f,c.dragOptions.draginit(b,e),e.movingElement=1!==e.mails.length?i18n.getString("dragdrop.mail.move.many",[e.mails.length]):i18n.getString("dragdrop.mail.move.one"),
e.scrolls(d.get(0)),e.element.addClass("drag"))},dragdown:function(a){a.preventDefault()},dragend:function(a,b){var c=b.element;b.movingElement.remove();phx.util.nextTick(function(){c.removeClass("drag")})}},dropContainer:"#section-0",dropSelector:".folder",dropOptions:{dropover:function(a,b,c){a=b.element.offset();var e=d.offset();a=a.top+b.element.height()<d.height()+e.top&&a.top>e.top;!b.element.hasClass("active")&&a&&b.element.hasClass("droppable")?c.dndInstance.icon("ok"):c.dndInstance.icon("abort");
b.element.data("timeout",setTimeout(function(){phx.navigation.getFolder(b.element.data("folderid")).open()},750))},dropout:function(a,b,c){c.dndInstance.icon("abort");clearTimeout(b.element.data("timeout"));b.element.removeData("timeout")},dropon:function(a,b,c){if(void 0!==b.element.data("folderid")&&"ok"===c.dndInstance.icon()){a=b.element.data("folderid");var d=c.mails.map(function(a){return{name:"mailid",value:a}});d.unshift({name:"folderid",value:a});Wicket.Ajax.post({u:phx.getVar("maildrop.callbackUrl"),
dep:[function(){return d}]})}}}})}}function e(b){var c=a('input[name="search"]'),d="";b.detail.content&&"string"===typeof b.detail.content.searchTerm&&(d=b.detail.content.searchTerm);c.val(d)}function g(b){a("webmailer-mail-list, webmailer-mail-search, contracts-app-root").attr("fullscreen-active",b.data)}function h(){return"function"==typeof a.cookie&&a.cookie("phx.maillist.debug")}function k(a){a=void 0===a?!1:a;var b=document.querySelector("webmailer-mail-list");b&&(b.refresh(a),l(b));(a=document.querySelector("webmailer-mail-search"))&&
a.refresh()}function l(b){b.removeAttribute("mail-id");b.setAttribute("fullscreen-active","false");c(0);a(".mail-list__preview--mail-display").hide();a("#pibaContent").hide();a(".mail-list__preview--selection-count").show()}function m(a){var b=document.querySelector("webmailer-mail-detail");b&&"function"===typeof b.markFlagged&&b.markFlagged(a.detail)}function q(b,c,d){var e=a(".spa-content-panel__active");if(e[0]){if(e.hasClass(b))return u(e[0],c);e.removeClass("spa-content-panel__active").addClass("spa-content-panel__hidden");
e=a("."+b);e[0]?(u(e[0],c),e.removeClass("spa-content-panel__hidden").addClass("spa-content-panel__active")):t(b,c,d)}else t(b,c,d);return!0}function t(b,c,d){var e=document.querySelector(".spa-content-panel-container"),f=e.querySelector("#"+b),g=f.content.querySelector("."+b).cloneNode(!0);u(g,c);g.navsid=d;e.insertBefore(g,f);"spa-content-panel-mail-list"===b&&(a(document).off("wmlist_rendered","webmailer-mail-list",r),a(document).on("wmlist_rendered","webmailer-mail-list",r),n=setTimeout(p,1E4))}
function u(a,b){var c=!1;b&&Object.entries(JSON.parse(b)).forEach(function(b){var d=$jscomp.makeIterator(b);b=d.next().value;d=d.next().value;c=c||"fullscreen-active"!==b&&a.getAttribute(b)!==d;null!==d?a.setAttribute(b,d):a.removeAttribute(b)});return c}function p(){var a=document.querySelector(".spa-content-panel-mail-list");if(!(a&&a.shadowRoot&&0<a.shadowRoot.childNodes.length)){a={detail:{content:{type:"error",summary:i18n.getString("technicalError"),detail:i18n.getString("mailListLoadingExpired"),
duration:"extralong"}}};phx.mailComponentShowMessage(a);var b=navigator.connection.effectiveType;fetch(phx.vars.getMailListModuleUrl).then(function(a){return x(b,a.status)}).catch(function(){return x(b,"0")})}}function x(a,b){phx.statistics.trackEvent("/mail/list/error/test/view",{labels:JSON.stringify({errorcode:a+","+b})})}function r(){n&&clearTimeout(n)}function w(a,b){return a.replace("tmai0","tmai"+b)}function v(a,b){var c=document.querySelector(".mail-list__preview--mail-display");a=document.querySelector(a).content.querySelector(b).cloneNode();
c.appendChild(a);return a}var z,n;phx.initMaillistComponent=function(){a(document).off("wmlist_show-message","webmailer-mail-list, webmailer-mail-search, contracts-app-root",phx.mailComponentShowMessage);a(document).on("wmlist_show-message","webmailer-mail-list, webmailer-mail-search, contracts-app-root",phx.mailComponentShowMessage);a(document).off("wmlist_selection-changed","webmailer-mail-list, webmailer-mail-search, contracts-app-root",b);a(document).on("wmlist_selection-changed","webmailer-mail-list, webmailer-mail-search, contracts-app-root",
b);a(document).off("wmlist_mail-open wmlist_ad-open","webmailer-mail-list, webmailer-mail-search, contracts-app-root",d);a(document).on("wmlist_mail-open wmlist_ad-open","webmailer-mail-list, webmailer-mail-search, contracts-app-root",d);a(document).off("wmlist_mail-fullscreen wmlist_ad-fullscreen","webmailer-mail-list, webmailer-mail-search, contracts-app-root",g);a(document).on("wmlist_mail-fullscreen wmlist_ad-fullscreen","webmailer-mail-list, webmailer-mail-search, contracts-app-root",!0,g);a(document).off("wmlist_close-fullscreen",
"webmailer-mail-list, webmailer-mail-search, contracts-app-root",g);a(document).on("wmlist_close-fullscreen","webmailer-mail-list, webmailer-mail-search, contracts-app-root",!1,g);a(document).off("wmlist_mails-marked-flagged","webmailer-mail-list, webmailer-mail-search, contracts-app-root",m);a(document).on("wmlist_mails-marked-flagged","webmailer-mail-list, webmailer-mail-search, contracts-app-root",m);a(document).off("click","#mail-head__button--open-fullscreen",g);a(document).on("click","#mail-head__button--open-fullscreen",
!0,g);a(document).off("click","#mail-head__button--close-fullscreen",g);a(document).on("click","#mail-head__button--close-fullscreen",!1,g);a(document).off("wmlist_init-drag","webmailer-mail-list, webmailer-mail-search, contracts-app-root",f);a(document).on("wmlist_init-drag","webmailer-mail-list, webmailer-mail-search, contracts-app-root",f);a(document).off("wmsearch_search-term-change","webmailer-mail-search",e);a(document).on("wmsearch_search-term-change","webmailer-mail-search",e);h()&&(console.log(Date.now()+
" [maillist]: initialized event handlers in frontend"),a(document).on("wmlist_mail-open","webmailer-mail-list, webmailer-mail-search, contracts-app-root",function(a){console.log(Date.now()+" [maillist]: received event: wmlist_mail-open",a.detail.content.mailId)}),a(document).on("wmlist_mail-fullscreen","webmailer-mail-list, webmailer-mail-search, contracts-app-root",function(){console.log(Date.now()+" [maillist]: received event: wmlist_mail-fullscreen")}),a(document).on("wmlist_close-fullscreen",
"webmailer-mail-list, webmailer-mail-search, contracts-app-root",function(){console.log(Date.now()+" [maillist]: received event: wmlist_close-fullscreen")}))};phx.refreshMaillistComponent=k;phx.logMaillistComponentMessage=function(a){a&&h()&&console.log(Date.now()+" [maillist]: ### Wicket: "+a)};phx.markFlaggedMaillistComponent=function(a,b){a&&(a={content:[{mailId:a,flagged:b}]},(b=document.querySelector("webmailer-mail-list"))&&"function"===typeof b.markFlagged&&b.markFlagged(a),(b=document.querySelector("webmailer-mail-search"))&&
"function"===typeof b.markFlagged&&b.markFlagged(a),(b=document.querySelector("contracts-app-root"))&&"function"===typeof b.markFlagged&&b.markFlagged(a))};phx.switchComponentPanelTo=q;phx.switchFolder=function(b,d){q("spa-content-panel-mail-list",b,d)||k(!0);c(0);a(".mail-list__preview--mail-display").hide();a("#pibaContent").hide();a(".mail-list__preview--selection-count").show()};phx.updateLocalStorageData=function(a,b){try{a="webmailer-mail-list_"+a+"_view-state",null==localStorage.getItem(a)&&
localStorage.setItem(a,b)}catch(B){}};phx.notifyMailListOnDropSuccess=function(a,b){var c=document.querySelector("webmailer-mail-list");a=a&&b?{folderType:a,fullFolderName:b}:void 0;c&&(c.dragAndDropSuccess(a),l(c));(c=document.querySelector("webmailer-mail-search"))&&c.dragAndDropSuccess(a);if(c=document.querySelector("contracts-app-root"))"function"===typeof c.dragAndDropSuccess&&c.dragAndDropSuccess(),l(c)};phx.showMailListGuidedTour=function(){var a=document.querySelector("webmailer-mail-list");
a&&"function"===typeof a.showOnboardingWizard&&a.showOnboardingWizard()}})(jQuery);(function(a){function c(b){b.detail&&b.detail.content&&a("webmailer-mail-list, webmailer-mail-search").attr("fullscreen-active",b.detail.content.fullScreen)}function b(){window.setInterval(function(){document.querySelector("webmailer-mail-list, webmailer-mail-search")&&(a("webmailer-mail-detail").attr("fullscreen-active",a("webmailer-mail-list, webmailer-mail-search").attr("fullscreen-active")),a("webmailer-ad-detail").attr("fullscreen-active",a("webmailer-mail-list, webmailer-mail-search").attr("fullscreen-active")))},
200)}function d(a){if(a.detail&&a.detail.content){var b=document.querySelector("webmailer-mail-list");b&&"function"===typeof b.markFlagged&&b.markFlagged(a.detail);(b=document.querySelector("webmailer-mail-search"))&&"function"===typeof b.markFlagged&&b.markFlagged(a.detail);(b=document.querySelector("contracts-app-root"))&&"function"===typeof b.markFlagged&&b.markFlagged(a.detail)}}phx.initMaildetailComponent=function(){b();a(document).off("wmdetail_show-message","webmailer-mail-detail",phx.mailComponentShowMessage);
a(document).on("wmdetail_show-message","webmailer-mail-detail",phx.mailComponentShowMessage);a(document).off("wmdetail_mail-fullscreen","webmailer-mail-detail",c);a(document).on("wmdetail_mail-fullscreen","webmailer-mail-detail",c);a(document).off("wmdetail_ad-fullscreen","webmailer-ad-detail",c);a(document).on("wmdetail_ad-fullscreen","webmailer-ad-detail",c);a(document).off("wmdetail_mails-marked-flagged","webmailer-mail-detail",d);a(document).on("wmdetail_mails-marked-flagged","webmailer-mail-detail",
d)}})(jQuery);(function(a){function c(a){a.detail&&a.detail.content&&a.detail.content.type&&a.detail.content.fullFolderName?phx.notifyMailListOnDropSuccess(a.detail.content.type,a.detail.content.fullFolderName):phx.notifyMailListOnDropSuccess()}function b(){phx.refreshMaillistComponent()}phx.createMailSidebar=function(d){document.querySelector("webmailer-mail-sidebar").navsid=d;a(document).off("wmsidebar_mails-moved","webmailer-mail-sidebar",c);a(document).on("wmsidebar_mails-moved","webmailer-mail-sidebar",c);
a(document).off("wmsidebar_folder-emptied","webmailer-mail-sidebar",b);a(document).on("wmsidebar_folder-emptied","webmailer-mail-sidebar",b);a(document).off("wmsidebar_show-message","webmailer-mail-sidebar",phx.mailComponentShowMessage);a(document).on("wmsidebar_show-message","webmailer-mail-sidebar",phx.mailComponentShowMessage)};phx.updateMailSidebar=function(){document.querySelector("webmailer-mail-sidebar").refresh()};phx.mailSidebarSelectFolder=function(a,b){b=void 0===b?"":b;document.querySelector("webmailer-mail-sidebar").folder=
{type:a,folderId:b}}})(jQuery);(function(a){phx.createMailCompose=function(c){var b=document.querySelector(".spa-content-panel-container"),d=b.querySelector("#spa-content-panel-mail-compose").content.querySelector("webmailer-mail-compose").cloneNode(!0);d.navsid=c;b.appendChild(d);a(document).off("wmcompose_show-message","webmailer-mail-compose",phx.mailComponentShowMessage);a(document).on("wmcompose_show-message","webmailer-mail-compose",phx.mailComponentShowMessage)};phx.openDraft=function(a){document.querySelector("webmailer-mail-compose").openDraft({content:{mailId:a}})};
phx.newDraft=function(){document.querySelector("webmailer-mail-compose").newDraft()}})(jQuery);(function(a){function c(a,b){a="#"+a;b?history.replaceState({},document.title,a):history.pushState({},document.title,a)}function b(){var a=phx.vars.historyCallbackUrl,b=window.location.hash.replace(/^#/,"");a&&Wicket.Ajax.get({u:phx.vars.historyCallbackUrl+b})}phx.history=phx.history||{};phx.history.changeHash=function(a){c(a,!1)};(function(){var d=phx.vars.initialHistoryState;d&&""!==d&&c(d,!0);a(window).on("popstate",b)})()})(jQuery);(function(a){function c(a){q.find(".js-selection-count").text(a)}function b(a){1===a.mailData.length&&a.mailData[0].mailId===k&&(l=!0)}function d(){a(".pgp-empty-preview-teaser").trigger("pgp-empty-preview-teaser-show");a(".smart-inbox-inbox-empty-preview-teaser").trigger("smart-inbox-inbox-empty-preview-teaser-show");t.hide();u.hide();""!==p.src&&(p.src="");q.show()}function f(a){a=a.length;l?l=!1:(m?(q.hide(),u.hide(),""!==p.src&&(p.src=""),t.show()):(d(),c(a)),m=!1)}function e(){d();c(0)}function g(a){m=
!0;k=a.mailId}function h(){l=!1;f({length:0})}var k,l;var m=!1;var q=a(".system-folder-message");var t=a(".mail-display-wrapper");var u=a("#pibaContent");var p=a("#pibaContent iframe")[0];0<q.length&&(phx.event.subscribe(phx.events.MAIL_MOVED,b),phx.event.subscribe(phx.events.MAIL_SELECTION_CHANGED,f),phx.event.subscribe(phx.events.RESET_MAILLIST_SELECTION,e),phx.event.subscribe(phx.events.MAIL_SHOWN,g),phx.event.subscribe(phx.events.FOLDER_SWITCH,h))})(jQuery);(function(a){function c(b){var c=b.getAttribute("data-address-parts");c||(c="|",a(b).find(".js-filter-by").each(function(){var b=a(this).text().trim().toLowerCase();var d=[b];[" ","@",".","-","_"].forEach(function(a){-1!==b.indexOf(a)&&(d=d.concat(b.split(a)))});c+=d.join("|")+"|"}),b.setAttribute("data-address-parts",c));return c}function b(){var b=a(this);var c=b.find(".email").text().trim();var d=b.find(".name").text().trim();b=b.find(".group-title").text().trim();c={email:c,name:d,groupTitle:b,
address:b?d:c!==d?'"'+d+'" <'+c+">":c};(c.email||c.name)&&a(document).trigger("addresschooser/recipient/add",c)}function d(a,b){var c=a.innerHTML.replace(/<\/?b>/gi,"");b&&(b=new RegExp("\\b"+b.replace(/([.?*+^$[\]\\(){}-])/g,"\\$1"),"gi"),c=c.replace(b,function(a){return"<b>"+a+"</b>"}));a.innerHTML=c}function f(a){var b=a.closest(".js-scroll-pane")[0];a=a[0];a.offsetTop+a.offsetHeight+10>b.clientHeight+b.scrollTop?b.scrollTop=a.offsetTop+a.offsetHeight+10-b.clientHeight:a.offsetTop+10<b.scrollTop&&
(b.scrollTop=a.offsetTop)}function e(){phx.ftd.close("addresschooser")}function g(c){var d=a(".addressbook-suggest li"),g=d.filter(".selected");switch(c){case 38:g.prevAll(":visible").length&&g.removeClass("selected").prevAll(":visible").eq(0).addClass("selected");f(d.filter(".selected"));break;case 40:g.nextAll(":visible").length&&g.removeClass("selected").nextAll(":visible").eq(0).addClass("selected");f(d.filter(".selected"));break;case 27:e();break;case 13:b.call(d.filter(".selected:visible")[0]),
k()}}function h(b){var e=b.keyCode;b=a(".addressbook-suggest").find("li");var f=this.value?this.value.trim().toLowerCase():"";-1!==[13,27,38,40].indexOf(e)?g(e):(b.css("display",f?function(){return 0<=c(this).indexOf("|"+f.toLowerCase())?"":"none"}:""),b.each(function(){a(this).find(".js-filter-display").each(function(){d(this,f)})}),b.removeClass("selected"),b.filter(":visible").eq(0).addClass("selected"))}var k=function(){var b=a("#addresschooser input")[0];b.value="";h.call(b,{keyCode:"fake"})};
a("[data-ftd-trigger=addresschooser]").wicketLive("open.ftd",function(){var c=a("#addresschooser");a(document).trigger("addresschooser/open");c.data("initialized")||(c.on("keyup","input",h),c.on("click","li",b),c.data("initialized",!0));c.data("MailObjectPanelObjectivationLabel",this);k();a(document).on("addresschooser/close",e)})})(jQuery);(function(a){phx.ajaxEditableSubmit={isSave:function(c){var b=!1;if(c=a.event.fix(c))"blur"===c.type?b=!0:"keydown"===c.type&&13===c.keyCode&&(b=!0),a.data(c.target,"handler-deactivated",!0);return b},reactivateHandlers:function(c){c=document.getElementById(c);a.data(c,"handler-deactivated",!1);c.select();c.focus()}}})(jQuery);(function(a){var c=["#editorStartupTimeoutLink","#reopenLastComposeLink"];phx.showDebugTools=function(){var b=a('<div id="debugTestContainer"></div>'),d,f=c.length;for(d=0;d<f;d++){var e=a(c[d]);0<e.length&&(e.removeClass("is-hidden"),b.append(e))}a("body").append(b)}})(jQuery);var Button=function(a,c,b,d){return c({name:"Button",mixins:[b,function(){this.toggle=function(){this.$node.toggleClass(d.IS_DISABLED);this.isDisabled()?this.disableBehavior():this.enableBehavior()};this.disable=function(a){a.stopPropagation();this.isDisabled()&&(this.isAlreadyDisabled=!0);this.$node.addClass(d.IS_DISABLED);this.disableBehavior()};this.enable=function(a){a.stopPropagation();this.isAlreadyDisabled?this.isAlreadyDisabled=!1:(this.$node.removeClass(d.IS_DISABLED),this.enableBehavior())};
this.enableBehavior=function(){this.node.disabled=!1};this.disableBehavior=function(){this.node.disabled=!0};this.isDisabled=function(){return this.$node.hasClass(d.IS_DISABLED)};this.isEnabled=function(){return!this.isDisabled()};this.after("initialize",function(){this.on(this.getNameSpacedEventName("disable"),this.disable);this.on(this.getNameSpacedEventName("enable"),this.enable);this.on(this.getNameSpacedEventName("toggle"),this.toggle)})}]})}(jQuery,defineComponent,mixinFlyout,CssUtils.modifier);(function(a,c){function b(b){a(b.target).toggleClass(c.IS_DISABLED);a(b.target).hasClass(c.IS_DISABLED)?a(b.target).prop("disabled",!0):a(b.target).prop("disabled",!1)}function d(b){b.stopPropagation();a(b.target).addClass(c.IS_DISABLED);a(b.target).prop("disabled",!0)}function f(b){b.stopPropagation();a(b.target).removeClass(c.IS_DISABLED);a(b.target).prop("disabled",!1)}phx.initBaseButton=function(c){a(c).off("disable",d);a(c).off("enable",f);a(c).off("toggle",b);a(c).on("disable",d);a(c).on("enable",
f);a(c).on("toggle",b);phx.flyout.initFlyoutComponent(c)}})(jQuery,CssUtils.modifier);var ButtonGroup=function(a,c){return c({name:"ButtonGroup",mixins:function(){this.defaultAttrs({buttonSelector:".m-button"});this.disable=function(){this.select("buttonSelector").trigger("disable")};this.enable=function(){this.select("buttonSelector").trigger("enable")};this.after("initialize",function(){this.on(this.getNameSpacedEventName("disable"),this.disable);this.on(this.getNameSpacedEventName("enable"),this.enable)})}})}(jQuery,defineComponent);var ButtonLink=function(a,c,b){return c({name:"ButtonLink",parent:b,mixins:function(){this.disableBehavior=function(){this.on("click",this.preventLinkClickHandler)};this.enableBehavior=function(){this.off("click",this.preventLinkClickHandler)};this.preventLinkClickHandler=function(a){a.preventDefault()}}})}(jQuery,defineComponent,Button);var ProgressBar=function(a,c){return c({name:"ProgressBar",mixins:[function(){this.defaultAttrs({value:0,bar:".progressbar_indicator",label:".progressbar_label"});this.createCssPercentValue=function(a){return 0<=a&&100>=a?a+"%":null};this.updateValue=function(a){this.select("label").html(a)};this.updateBarSize=function(a){this.select("bar").css("width",a)};this.onUpdate=function(a,c){if(a=this.createCssPercentValue(c))this.updateBarSize(a),this.updateValue(a)};this.after("initialize",function(){this.on("update.progressbar",
this.onUpdate);this.updateValue(this.createCssPercentValue(this.attr.value))})}]})}(jQuery,defineComponent);var TextareaCounter=function(a,c){return c({name:"TextareaCounter",mixins:function(){this.cache={lineBreaks:void 0,value:void 0};this.defaultAttrs({textarea:".form-element-textarea",charcount:".js-textarea-char-count",maxlength:50});this.onInput=function(){this.resetCache();this.getLength()>this.getMaxLength()?this.cropValue():this.updateCounterValue()};this.resetCache=function(){this.cache.lineBreaks=void 0;this.cache.value=void 0};this.cropValue=function(){var a=this.getValue().substring(0,this.getMaxLength()-
this.getEnterCount());this.setValue(a)};this.countLineBreaksInString=function(a){a=a.match(/\n/g);return null!==a?a.length:0};this.getLength=function(){return this.getValue().length+this.getEnterCount()};this.getEnterCount=function(){void 0===this.cache.lineBreaks&&(this.cache.lineBreaks=this.countLineBreaksInString(this.getValue()));return this.cache.lineBreaks};this.getValue=function(){void 0===this.cache.value&&(this.cache.value=this.textarea.val());return this.cache.value};this.getMaxLength=function(){return this.attr.maxlength};
this.setValue=function(a){this.textarea.val(a)};this.updateCounterValue=function(){this.charcount.text(this.getMaxLength()-this.getLength())};this.hasOnInputSupport=function(){return document.body.hasOwnProperty("oninput")};this.getSupportedEvents=function(){return this.hasOnInputSupport()?"input":"keyup change"};this.after("initialize",function(){this.textarea=this.select("textarea");this.charcount=this.select("charcount");this.on(this.getSupportedEvents(),this.onInput)})}})}(jQuery,defineComponent);var FormElementList=function(a,c){return c({name:"FormElementList",mixins:[function(){this.defaultAttrs({formListItem:".form-composite-list_item",bulletElement:".form-element-radio, .form-element-checkbox"});this.onFormElementClick=function(b,c){c=a(c.el).find(this.attr.bulletElement);!this.hasBulletElement(c)||this.isBulletElement(b.target)||this.hasForRelation(b.target)||(b.preventDefault(),c.prop("checked",!0))};this.hasBulletElement=function(a){return 0<a.length};this.hasForRelation=function(b){return a(b).attr("for")?
!0:!1};this.isBulletElement=function(b){return a(b).is(this.attr.bulletElement)?!0:!1};this.after("initialize",function(){this.on("click",{formListItem:this.onFormElementClick})})}]})}(jQuery,defineComponent);(function(a,c){a.datepicker.setDefaults(a.datepicker.regional[c.locale()]={closeText:c.getString("datePickerCloseText"),prevText:c.getString("datePickerPrevText"),nextText:c.getString("datePickerNextText"),currentText:c.getString("datePickerCurrentText"),monthNames:c.getStringList("dateMonthNames"),monthNamesShort:c.getStringList("dateMonthNamesShort"),dayNames:c.getStringList("dateDayNames"),dayNamesShort:c.getStringList("dateDayNamesShort"),dayNamesMin:c.getStringList("dateDayNamesShort"),weekHeader:c.getString("datePickerWeekHeader"),
firstDay:1})})(jQuery,i18n);var DatePickerPeriod=function(a,c){c({name:"DatePickerPeriod",mixins:[function(){this.defaultAttrs({selectTrigger:"select.date",compositeFromFieldSelector:".form-composite-datepicker-period_from",compositeToFieldSelector:".form-composite-datepicker-period_to",datepickerSelector:".form-composite-datepicker_input",checkableElementSelector:".form-element-checkbox, .form-element-radio"});this.setMinDate=function(a,c){this.getDatepickerInstance(a).datepicker("option","minDate",c)};this.getDatepickerInstance=
function(a){return this.select(a).find(this.attr.datepickerSelector)};this.onFromDateSelect=function(a,c){this.setMinDate("compositeToFieldSelector",c.date)};this.onDateSelect=function(){this.selectCheckableItem()};this.selectCheckableItem=function(){this.select("checkableElementSelector").prop("checked",!0)};this.after("initialize",function(){this.on(this.attr.selectTrigger,this.onDateSelect);this.on(this.attr.selectTrigger,{compositeFromFieldSelector:this.onFromDateSelect})})}]})}(jQuery,defineComponent);(function(a,c){function b(){a(".form-composite-datepicker").removeClass(c.HAS_OPEN_FLYOUT);g=!0}function d(b,d){a(b.parentElement).addClass(c.HAS_OPEN_FLYOUT);e(d)}function f(b,c){a(c).trigger("select.date",{date:b})}function e(a){var b=a.dpDiv,c=a.input;setTimeout(function(){var a=c.offset(),d=b.offset();b.css({marginTop:a.top<d.top?4:-4,zIndex:200})},0)}var g=!0,h=!1;phx.initDatePicker=function(){a(".form-composite-datepicker_icon").css("pointer-events","none");a(".form-composite-datepicker_input").datepicker({position:"bottom-left",
minDate:a(".form-composite-datepicker_input").data("minDate"),maxDate:a(".form-composite-datepicker_input").data("maxDate"),dateFormat:a(".form-composite-datepicker_input").data("dateFormat"),beforeShow:d,onClose:b,onSelect:f});h||(h=!0,a(document).on("click",".form-composite-datepicker_input",function(b){g?(a(b.target).datepicker("show"),g=!1):(a(".form-composite-datepicker_input").datepicker("hide"),a(".form-composite-datepicker_input").removeClass(c.HAS_OPEN_FLYOUT))}))}})(jQuery,CssUtils.modifier);var Objectivation=function(a,c,b){return c({name:"Objectivation",mixins:[b,function(){this.defaultAttrs({actionSelector:".js-action",deleteElement:".objectivation_icon-delete",nameSelector:".objectivation_name"});this.triggerAction=function(a){a.stopPropagation();this.isDeleteTrigger(a.target)&&this.trigger("deleteObject")};this.isDeleteTrigger=function(b){return 0<a(b).closest(this.attr.actionSelector).has(this.attr.deleteElement).length};this.setName=function(a,b){this.select("nameSelector").text(b)};
this.after("initialize",function(){this.on("click",{actionSelector:this.triggerAction});this.on("setName",this.setName)})}]})}(jQuery,defineComponent,mixinFlyout);var ObjectivationAddressButtonWrite=function(a,c,b,d){return c({name:"ObjectivationAddressButtonWrite",parent:b,mixins:[function(){this.onSelect=function(){this.$node.addClass(d.IS_SELECTED);this.$node.focus()};this.onUnselect=function(){this.$node.removeClass(d.IS_SELECTED)};this.setUnselectable=function(){this.$node.attr("unselectable","on");this.$node.addClass("unselectable");this.$node.on("selectstart",!1)};this.after("initialize",function(){this.setUnselectable();this.on("select",this.onSelect);
this.on("unselect",this.onUnselect)})}]})}(jQuery,defineComponent,Objectivation,CssUtils.modifier);(function(a,c,b){function d(a){a.data("tabRemote")?e(a):f(a)}function f(b){b.addClass(c.IS_SELECTED);var d=b.closest(".tabpanel");a('.tabpanel_content[data-tab-index="'+b.data("tabIndex")+'"]',d).addClass(c.IS_VISIBLE)}function e(c){var d=c.closest(".tabpanel");a(document).one(b.AJAX_CALL_COMPLETE+".tabpanel",function(){var b=a('.tabpanel_category[data-tab-index="'+c.data("tabIndex")+'"]',d);f(b)})}function g(e){var f=a(this);e=e.data.componentSelector;a(document).off(b.AJAX_CALL_COMPLETE+".tabpanel");
a(".tabpanel_category."+c.IS_SELECTED,e).removeClass(c.IS_SELECTED);a(".tabpanel_content."+c.IS_VISIBLE,e).removeClass(c.IS_VISIBLE);d(f);a(document).trigger("resizeHandled")}phx.initTabPanel=function(b){b="#"+b;a(b).on("click",".tabpanel_category",{componentSelector:b},g);d(a(".tabpanel_category:first",b))}})(jQuery,CssUtils.modifier,Wicket.Event.Topic);var MailObjectPanelTextfield=function(a,c,b){return c({name:"MailObjectPanelTextfield",mixins:function(){this.defaultAttrs({label:".mailobjectpanel_label",content:".mailobjectpanel_content",textfield:".mailobjectpanel-textfield_input"});this.toggleVisibility=function(){this.isVisible()?this.hide():this.show()};this.isNotVisible=function(){return this.$node.hasClass(b.IS_HIDDEN)};this.isVisible=function(){return!this.isNotVisible()};this.hide=function(){this.$node.addClass(b.IS_HIDDEN)};this.show=
function(){this.$node.removeClass(b.IS_HIDDEN)};this.focusTextfield=function(){this.select("textfield").focus()};this.onLabelClick=function(){this.focusTextfield()};this.onContentClick=function(){this.focusTextfield()};this.addFocusClass=function(){this.$node.addClass(b.HAS_FOCUS)};this.removeFocusClass=function(){this.$node.removeClass(b.HAS_FOCUS)};this.after("initialize",function(){this.on("show",this.show);this.on("hide",this.hide);this.on("toggle",this.toggleVisibility);this.on("click",{content:this.onContentClick,
label:this.onLabelClick});this.addFocusClass=this.addFocusClass.bind(this);this.removeFocusClass=this.removeFocusClass.bind(this);this.$node.on("focus","input",this.addFocusClass);this.$node.on("blur","input",this.removeFocusClass)});this.after("teardown",function(){this.$node.off("focus","input",this.addFocusClass);this.$node.off("blur","input",this.removeFocusClass)})}})}(jQuery,defineComponent,CssUtils.modifier);var MailObjectPanelSubject=function(a,c){return c({name:"MailObjectPanelSubject",parent:MailObjectPanelTextfield,mixins:function(){this.defaultAttrs({defaultText:"Resume E-Mail"});this.getValue=function(){var b=a(this.attr.textfield).val();return 0<b.length?b:this.attr.defaultText};this.triggerActiveDraftSubjectUpdate=function(){var b=this.getValue();a(".panel-composition").trigger("subject.update",{title:b})};this.clearDelay=function(){window.clearTimeout(this.timeout)};this.onInput=function(){this.clearDelay();
this.timeout=setTimeout(this.triggerActiveDraftSubjectUpdate.bind(this),500)};this.onFocus=function(){this.select("textfield").focus()};this.after("initialize",function(){this.on("keyup",this.onInput);this.on("focus",this.onFocus)})}})}(jQuery,defineComponent);var MailObjectPanelObjectivation=function(a,c,b,d){return c({name:"MailObjectPanelObjectivation",parent:b,mixins:[d,function(){this.defaultAttrs({multiObjectTextField:".form-element-multiobjecttextfield",multiObject:".objectivation-address-write"});this.hasComponentHeightChanged=function(){return this.height!==this.getComponentHeight()};this.checkComponentHeight=function(){this.hasComponentHeightChanged()&&(this.height=this.getComponentHeight(),this.$node.trigger("resize"))};this.focusTextfield=function(){this.select("multiObjectTextField").triggerHandler("focus")};
this.isSelect2Element=function(a){return a.hasClass("select2-input")};this.isObjectivationAddressButtonWriteElement=function(a){return 1===a.closest(this.attr.multiObject).length};this.onContentClick=function(b){b=a(b.target);this.isSelect2Element(b)||this.isObjectivationAddressButtonWriteElement(b)||this.focusTextfield()};this.getComponentHeight=function(){return this.$node.height()};this.addRecipient=function(a){this.select("multiObjectTextField").trigger("add",a);this.focusTextfield()};this.onAddRecipientFromAddressChooser=
function(a,b){this.hasOpenFlyout()&&this.addRecipient(b);a.stopPropagation()};this.onAddRecipient=function(a,b){this.addRecipient(b);a.stopPropagation()};this.onFocus=function(){this.focusTextfield()};this.after("initialize",function(){this.height=this.getComponentHeight();this.on("recipient.add",this.onAddRecipient);this.on("resize.select2",this.checkComponentHeight);this.on("focus",this.onFocus);this.on(document,"addresschooser/recipient/add",this.onAddRecipientFromAddressChooser)})}]})}(jQuery,
defineComponent,MailObjectPanelTextfield,mixinFlyout);(function(a){function c(){h=!1}function b(a){g=!0;window.clearTimeout(e);a?(k.stop().css("display","none"),h=!1):k.fadeOut(600,c)}function d(){g||(l=parseInt(k.attr("data-duration"),10)||2500,-1!==l&&(e=window.setTimeout(function(){b(!1)},l)))}function f(c){c=a(c.target);c.hasClass(".js-system-message_close")||0!==c.closest(k).length||k.fadeOut(600,b)}var e,g=!1,h=!1,k,l,m;({init:function(){m=a("body");a(document).on("show.systemMessage.components",this.showSystemMessage)},showSystemMessage:function(c,
l){if(void 0===l)throw"You must pass the dom element or selector for the system message";h&&b(!0);g=!1;h=!0;k=a(l);k.find(".js-system-message_close").on("click",b);m.one("click",f);k.fadeIn(1E3,function(){d()}).on("mouseenter",function(){g=!0;window.clearTimeout(e)}).on("mouseleave",function(){b(!1)})}}).init()})(jQuery);var TableHover=function(a,c,b,d,f){c({name:"TableHover",mixins:[b,function(){this.defaultAttrs({delay:0,rowSelector:".table_body-row",rowDataParam:"rowId"});this.timer=0;this.hoverMenu=void 0;this.after("initialize",function(){this.hoverMenu=this.getTemplateContent("hoverMenu");this.bindEvents();this.on("teardown",this.destroy)});this.bindEvents=function(){var a=this.hoverMenu.find("a").get().map(function(a){return a.id});d.Event.subscribeFor(d.Event.Topic.AJAX_CALL_BEFORE,a,this.bindHoverWicketEventDelegation,
this);this.$node.on("mouseenter",this.attr.rowSelector,this,this.onMouseEnter);this.$node.on("mouseleave",this.attr.rowSelector,this,this.onMouseLeave)};this.removeEvents=function(){this.$node.off("mouseenter",this.attr.rowSelector,this.onMouseEnter);this.$node.off("mouseleave",this.attr.rowSelector,this.onMouseLeave);d.Event.unsubscribe(d.Event.Topic.AJAX_CALL_BEFORE,this.bindHoverWicketEventDelegation,this)};this.bindHoverWicketEventDelegation=function(b,c){b=this.attr.rowDataParam;var d={},e=this.hoverMenu.parent(this.attr.rowSelector);
d[b]=e.data(b);c.dep||(c.dep=[]);c.dep.push(function(){return d});this.trigger("hovermenu-click.table",{$originalTarget:a("#"+c.c),$row:e})};this.onMouseEnter=function(b){var c=b.data,d=c.attr.delay;0<d?c.timer=setTimeout(function(){c.showMenu(b.currentTarget);c.timer=null},d):c.showMenu(b.currentTarget);c.trigger("row-enter.table",a(b.currentTarget))};this.onMouseLeave=function(b){var c=b.data;b=a(b.currentTarget);c.timer&&(clearTimeout(c.timer),c.timer=null);c.hideMenu();c.trigger("row-leave.table",
b)};this.showMenu=function(b){!0!==a(b).data("keepHoverMenu")&&a(b).append(this.hoverMenu.show())};this.hideMenu=function(){this.hoverMenu.detach()};this.destroy=function(){this.removeEvents();this.attr.table=void 0;this.hoverMenu=this.attr.delay=void 0}},function(){this.hasOpenFlyoutClassName=f.HAS_OPEN_FLYOUT;this.defaultAttrs({hoverMenuSelector:".table-hover_menu"});this.$hoveredRow=void 0;this.flyoutOpen=!1;this.after("initialize",function(){this.on("hovermenu-click.table",this.onHoverMenuFlyoutClick);
this.on("row-enter.table",this.onRowEnter);this.on("row-leave.table",this.onRowLeave);a(document).on("close.ftd",this.closeFlyout.bind(this));this.on("teardown",function(){a(document).off("close.ftd",this.closeFlyout);this.flyoutOpen=this.$hoveredRow=void 0})});this.onRowEnter=function(b,c){this.$hoveredRow=a(c)};this.onRowLeave=function(){this.$hoveredRow=void 0};this.onHoverMenuFlyoutClick=function(a,b){b.$originalTarget.is("[data-ftd-trigger]")&&(a=this.hoverMenu.clone(),this.flyoutOpen=!0,b.$row.addClass(this.hasOpenFlyoutClassName),
b.$row.data("keepHover",!0),b.$row.data("keepHoverMenu",!0),this.hideMenu(),b.$row.append(a))};this.closeFlyout=function(){if(this.flyoutOpen){var b=!0;var c=this.select("hoverMenuSelector");if(1<c.length||!this.$hoveredRow)c.each(function(c,e){d=a(e).parent(this.attr.rowSelector);d.is(this.$hoveredRow)?b=!1:(a(e).remove(),d.data("keepHover",!1).data("keepHoverMenu",!1).removeClass(this.hasOpenFlyoutClassName))}.bind(this));else{var d=c.parent(this.attr.rowSelector);d.data("keepHover",!1).data("keepHoverMenu",
!1).removeClass(this.hasOpenFlyoutClassName);this.showMenu(d);a(c).remove()}b&&(this.flyoutOpen=!1)}}}]})}(jQuery,defineComponent,mixinTemplate,Wicket,CssUtils.modifier);(function(a){"undefined"==typeof a.fn.each2&&a.fn.extend({each2:function(c){for(var b=a([0]),d=-1,f=this.length;++d<f&&(b.context=b[0]=this[d])&&!1!==c.call(b[0],d,b););return this}})})(jQuery);
(function(a,c){function b(a,b){var c=0,d=b.length;if("undefined"===typeof a)return-1;if(a.constructor===String)for(;c<d;c+=1){if(0===a.localeCompare(b[c]))return c}else for(;c<d;c+=1){var e=b[c];if(e.constructor===String){if(0===e.localeCompare(a))return c}else if(e===a)return c}return-1}function d(b,c){if(null===b||1>b.length)return[];b=b.split(new RegExp(c.join("|"),"g"));for(c=b.length;c--;)b[c]=a.trim(b[c]);return b}function f(b){b.bind("keydown",function(){a.data(b,"keyup-change-value")===c&&
a.data(b,"keyup-change-value",b.val())});b.bind("keyup",function(){var d=a.data(b,"keyup-change-value");d!==c&&b.val()!==d&&(a.removeData(b,"keyup-change-value"),b.trigger("keyup-change"))})}function e(a,b){var c;return function(){window.clearTimeout(c);c=window.setTimeout(b,a)}}function g(a){var b=!1,c;return function(){!1===b&&(c=a(),b=!0);return c}}function h(a,c){var d=e(a,function(a){c.trigger("scroll-debounced",a)});c.bind("scroll",function(a){0<=b(a.target,c.get())&&d(a)})}function k(a){a.preventDefault();
a.stopPropagation()}function l(a,b,c){var d=a.toUpperCase().indexOf(b.toUpperCase());b=b.length;0>d?c.push(a):(c.push(a.substring(0,d)),c.push("<span class='select2-match'>"),c.push(a.substring(d,d+b)),c.push("</span>"),c.push(a.substring(d+b,a.length)))}function m(b){var c,d=0,e=null,f=b.quietMillis||100;return function(g){window.clearTimeout(c);c=window.setTimeout(function(){var c=d+=1,f=b.data,n=b.transport||a.ajax,h=b.type||"GET";f=f.call(this,g.term,g.page,g.context);null!==e&&e.abort();e=n.call(null,
{url:b.url,dataType:b.dataType,data:f,type:h,contentType:"application/json; charset=UTF-8",success:function(a){c<d||(a=b.results(a,g.page),g.callback(a))}})},f)}}function q(b){var c=b,d=function(a){return""+a.text};if(!a.isArray(c)){d=c.text;if(!a.isFunction(d)){var e=c.text;d=function(a){return a[e]}}c=c.results}return function(b){var e=b.term,f={};""===e?b.callback({results:c}):(f.results=a(c).filter(function(){return b.matcher(e,d(this))}).get(),b.callback(f))}}function t(b){return a.isFunction(b)?
b:function(d){var e=d.term,f={results:[]};a(b).each(function(){var a=this.text!==c,b=a?this.text:this;(""===e||d.matcher(e,b))&&f.results.push(a?this:{id:this,text:this})});d.callback(f)}}function u(b){return a.isFunction(b)?b():b}function p(b,c){var d=function(){};d.prototype=new b;d.prototype.constructor=d;d.prototype.parent=b.prototype;d.prototype=a.extend(d.prototype,c);return d}if(window.Select2===c){var x;var r=phx.util.KEYS;a(function(){a(document).on("click",function(b){var c=b.target;(c=
a(c).closest(".select2-container").data("select2")||a(c).closest(".select2-drop").data("select2")||a(".select2-dropdown-open").data("select2"))&&c.opened()&&c.search.get(0)!==b.target&&(c.close(),c.blur())})});var w=p(Object,{bind:function(a){var b=this;return function(){a.apply(b,arguments)}},init:function(b){var d,e,n=this;this.opts=b=this.prepareOpts(b);this.id=b.id;b.element.data("select2")!==c&&null!==b.element.data("select2")&&this.destroy();this.enabled=!0;this.container=this.createContainer();
this.body=g(function(){return b.element.closest("body")});b.element.attr("class")!==c&&this.container.addClass(b.element.attr("class"));this.container.css(u(b.containerCss));this.container.addClass(u(b.containerCssClass));this.opts.element.data("select2",this).before(this.container);this.container.data("select2",this);this.onDataFinish=function(){0<n.results.find(".select2-result-selectable:not(.select2-disabled)").length&&0<n.search.val().length&&(n.dropdown.addClass("select2-drop-active"),n.container.addClass("select2-dropdown-open").addClass("select2-container-active"),
n.dropdown[0]!==n.body().children().last()[0]&&n.dropdown.detach().appendTo(n.body()),n.dropdown.show(),n.ensureHighlightVisible(),n.positionDropdown())};this.container.on("data-finish",this.onDataFinish);this.dropdown=this.container.find(".select2-drop");this.dropdown.css(u(b.dropdownCss));this.dropdown.addClass(u(b.dropdownCssClass));this.dropdown.data("select2",this);this.results=d=this.container.find(".select2-results");this.search=e=this.container.find("input.select2-input");this.resultsPage=
0;this.context=null;this.initContainer();this.initContainerWidth();this.dropdown.on("mouseover",".select2-results",this.highlightUnderEvent.bind(this));h(80,this.results);this.dropdown.delegate(".select2-results","scroll-debounced",this.bind(this.loadMoreIfNeeded));a.fn.mousewheel&&d.mousewheel(function(a,b,c,e){b=d.scrollTop();0<e&&0>=b-e?(d.scrollTop(0),k(a)):0>e&&d.get(0).scrollHeight-d.scrollTop()+e<=d.height()&&(d.scrollTop(d.get(0).scrollHeight-d.height()),k(a))});f(e);e.bind("keyup-change",
this.bind(this.updateResults));e.bind("focus",function(){e.addClass("select2-focused");" "===e.val()&&e.val("")});e.bind("blur",function(){e.removeClass("select2-focused");this.blur()}.bind(this));this.dropdown.delegate(".select2-results","click",this.bind(function(b){0<a(b.target).closest(".select2-result-selectable:not(.select2-disabled)").length?(this.highlightUnderEvent(b),this.selectHighlighted(b),this.clearSearch()):this.focusSearch()}));this.dropdown.bind("click mouseup mousedown",function(a){a.stopPropagation()});
a.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource());b.element.is(":disabled")&&this.disable()},destroy:function(){var a=this.opts.element.data("select2");a!==c&&(a.container.remove(),a.dropdown.remove(),a.opts.element.removeData("select2").unbind(".select2").show())},prepareOpts:function(b){var e;var f=b.element;"select"===f.get(0).tagName.toLowerCase()&&(this.select=e=b.element);b.separator=b.separator||[","];e&&a.each("id multiple ajax query createSearchChoice initSelection data tags".split(" "),
function(){if(this in b)throw Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.");});b=a.extend({},{populateResults:function(d,e,f){var g=this.opts.id;var h=function(d,e,n){var k;var y=0;for(k=d.length;y<k;y+=1){var A=d[y];var m=g(A)!==c;var B="children"in A&&0<A.children.length;var l=a("<li></li>");l.addClass("select2-results-dept-"+n);l.addClass("select2-result");l.addClass(m?"select2-result-selectable":"select2-result-unselectable");B&&l.addClass("select2-result-with-children");
m=a("<div></div>");m.addClass("select2-result-label");var C=b.formatResult(A,m,f);C!==c&&m.append(a.parseHTML(C));l.append(m);B&&(B=a("<ul></ul>"),B.addClass("select2-result-sub"),h(A.children,B,n+1),l.append(B));l.data("select2-data",A);e.append(l)}};h(e,d,0)}},a.fn.select2.defaults,b);if("function"!==typeof b.id){var g=b.id;b.id=function(a){return a[g]}}e?(b.query=this.bind(function(b){var d={results:[],more:!1},e=b.term;var g=function(a,c){if(a.is("option"))b.matcher(e,a.text(),a)&&c.push({id:a.attr("value"),
text:a.text(),element:a.get()});else if(a.is("optgroup")){var d={text:a.attr("label"),children:[],element:a.get()};a.children().each2(function(a,b){g(b,d.children)});0<d.children.length&&c.push(d)}};var h=f.children();if(this.getPlaceholder()!==c&&0<h.length){var n=h[0];""===a(n).text()&&(h=h.not(n))}h.each2(function(a,b){g(b,d.results)});b.callback(d)}),b.id=function(a){return a.id}):"query"in b||("ajax"in b?b.query=m(b.ajax):"data"in b?b.query=q(b.data):"tags"in b&&(b.query=t(b.tags),b.createSearchChoice=
function(a){return{id:a,text:a}},b.initSelection=function(c,e){var f=[];a(d(c.val(),b.separator)).each(function(){f.push({id:this,text:this})});e(f)}));if("function"!==typeof b.query)throw"query function not defined for Select2 "+b.element.attr("id");return b},monitorSource:function(){this.opts.element.bind("change.select2",this.bind(function(){!0!==this.opts.element.data("select2-change-triggered")&&this.initSelection()}))},triggerChange:function(b){b=b||{};b=a.extend({},b,{type:"change",val:this.val()});
this.opts.element.data("select2-change-triggered",!0);this.opts.element.trigger(b);this.opts.element.data("select2-change-triggered",!1)},enable:function(){this.enabled||(this.enabled=!0,this.container.removeClass("select2-container-disabled"))},disable:function(){this.enabled&&(this.close(),this.enabled=!1,this.container.addClass("select2-container-disabled"))},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var b=this.container.offset(),c=this.search.offset(),
d=this.search.outerHeight(),e=this.container.outerWidth(),f=this.dropdown.outerHeight(),g=this.dropdown.outerWidth(),h=a(window).scrollTop()+document.documentElement.clientHeight,k=a(window).scrollLeft()+document.documentElement.clientWidth;d=c.top+d;var m=c.left;h=d+f<=h;var l=b.top-f>=this.body().scrollTop();c=c.left+g<=k;this.dropdown.hasClass("select2-drop-above")?(k=!0,!l&&h&&(k=!1)):(k=!1,!h&&l&&(k=!0));k?(d=b.top-f,this.container.addClass("select2-drop-above"),this.dropdown.addClass("select2-drop-above")):
(this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above"));c||(m=b.left+e-g);this.dropdown.css({top:d,left:m,width:e})},shouldOpen:function(){if(this.opened())return!1;var a=jQuery.Event("open");this.opts.element.trigger(a);return!a.isDefaultPrevented()},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above");this.dropdown.removeClass("select2-drop-above")},open:function(){if(!this.shouldOpen())return!1;window.setTimeout(this.bind(this.opening),
1);return!0},opening:function(){this.clearDropdownAlignmentPreference();" "===this.search.val()&&this.search.val("");this.updateResults(!0)},close:function(){this.opened()&&(this.clearDropdownAlignmentPreference(),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open"),this.results.empty())},clearSearch:function(){},ensureHighlightVisible:function(){var b=this.results;var c=this.highlight();if(!(0>c))if(0==c)b.scrollTop(0);else{var d=b.find(".select2-result-selectable");var e=a(d[c]);
var f=e.offset().top+e.outerHeight();c===d.length-1&&(d=b.find("li.select2-more-results"),0<d.length&&(f=d.offset().top+d.outerHeight()));d=b.offset().top+b.outerHeight();f>d&&b.scrollTop(b.scrollTop()+(f-d));e=e.offset().top-b.offset().top;0>e&&b.scrollTop(b.scrollTop()+e)}},moveHighlight:function(b){for(var c=this.results.find(".select2-result-selectable"),d=this.highlight();-1<d&&d<c.length;){d+=b;var e=a(c[d]);if(e.hasClass("select2-result-selectable")&&!e.hasClass("select2-disabled")){this.highlight(d);
break}}},highlight:function(c){var d=this.results.find(".select2-result-selectable");if(0===arguments.length)return b(d.filter(".select2-highlighted")[0],d.get());c>=d.length&&(c=d.length-1);0>c&&(c=0);d.removeClass("select2-highlighted");a(d[c]).addClass("select2-highlighted");this.ensureHighlightVisible()},countSelectableResults:function(){return this.results.find(".select2-result-selectable").not(".select2-disabled").length},highlightUnderEvent:function(b){b=a(b.target).closest(".select2-result-selectable");
this.results.find(".select2-highlighted").not(b).removeClass("select2-highlighted");b.addClass("select2-highlighted")},loadMoreIfNeeded:function(){var a=this.results,b=a.find("li.select2-more-results"),c=this.resultsPage+1,d=this,e=this.search.val(),f=this.context;0!==b.length&&0>=b.offset().top-a.offset().top-a.height()&&(b.addClass("select2-active"),this.opts.query({term:e,page:c,context:f,matcher:this.opts.matcher,callback:this.bind(function(g){d.opts.populateResults.call(this,a,g.results,{term:e,
page:c,context:f});!0===g.more?(b.detach().appendTo(a.children(":last")).text(d.opts.formatLoadMore(c+1)),window.setTimeout(function(){d.loadMoreIfNeeded()},10)):b.remove();d.positionDropdown();d.resultsPage=c})}))},updateResults:function(b){function d(){h.scrollTop(0);f.removeClass("select2-active");k.positionDropdown()}function e(a){h.html(a);d()}var f=this.search,g=f.val(),h=this.results,n=this.opts,k=this;if(!0===b||!1!==this.showSearchInput&&this.opened())f.addClass("select2-active"),g.length<
n.minimumInputLength?a.isFunction(n.formatInputTooShort)?e("<li class='select2-no-results'>"+n.formatInputTooShort(g,n.minimumInputLength)+"</li>"):(e(""),this.opened()&&this.dropdown.hide()):(this.resultsPage=1,n.query({term:g,page:this.resultsPage,context:null,matcher:n.matcher,callback:this.bind(function(f){this.context=f.context===c?null:f.context;if(this.opts.createSearchChoice&&""!==g){var m=this.opts.createSearchChoice.call(null,g,f.results);m!==c&&null!==m&&k.id(m)!==c&&null!==k.id(m)&&0===
a(f.results).filter(function(){var a=k.id(this),b=k.id(m);return a===b?!0:a===c||b===c||null===a||null===b?!1:a.constructor===String?0===a.localeCompare(b):b.constructor===String?0===b.localeCompare(a):!1}).length&&f.results.unshift(m)}0===f.results.length?a.isFunction(n.formatNoMatches)?e("<li class='select2-no-results'>"+n.formatNoMatches(g)+"</li>"):(e(""),this.opened()&&(this.container.removeClass("select2-dropdown-open"),this.dropdown.hide())):(h.empty(),k.opts.populateResults.call(this,h,f.results,
{term:g,page:this.resultsPage,context:null}),!0===f.more&&(h.children().filter(":last").append("<li class='select2-more-results'>"+n.formatLoadMore(this.resultsPage)+"</li>"),window.setTimeout(function(){k.loadMoreIfNeeded()},10)),this.postprocessResults(f,b),this.container.trigger("data-finish"),d())})}))},cancel:function(){this.close()},blur:function(){this.close();this.container.removeClass("select2-container-active");this.dropdown.removeClass("select2-drop-active");this.clearSearch();this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus").children().trigger("unselect")},
focusSearch:function(){window.setTimeout(this.bind(function(){var a=this.container.parent();a.scrollTop(a[0].scrollHeight-a.height());this.search.focus();this.search.parent().siblings(".select2-search-choice-focus").removeClass("select2-search-choice-focus").children().trigger("unselect")}),10)},selectHighlighted:function(){var a=this.highlight(),b=this.results.find(".select2-highlighted").not(".select2-disabled"),c=b.closest(".select2-result-selectable").data("select2-data");c&&(b.addClass("select2-disabled"),
this.highlight(a),this.clearSearch(),this.focusSearch(),this.onSelect(c))},getPlaceholder:function(){return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder},initContainerWidth:function(){var b=function(){var b;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth()?"auto":this.opts.element.outerWidth()+"px";if("copy"===this.opts.width||"resolve"===
this.opts.width){var d=this.opts.element.attr("style");if(d!==c){d=d.split(";");var e=0;for(b=d.length;e<b;e+=1){var f=d[e].replace(/\s/g,"").match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/);if(null!==f&&1<=f.length)return f[1]}}return"resolve"===this.opts.width?(d=this.opts.element.css("width"),0<d.indexOf("%")?d:0===this.opts.element.outerWidth()?"auto":this.opts.element.outerWidth()+"px"):null}return a.isFunction(this.opts.width)?this.opts.width():this.opts.width}.call(this);
null!==b&&this.container.attr("style","width: "+b)}});var v=p(w,{});var z=p(w,{createContainer:function(){return a("<div></div>",{"class":"select2-container select2-container-multi"}).html("    <ul class='select2-choices'>  <li class='select2-search-field'>    <input type='text' autocomplete='off' style='width: 25px;' class='select2-input'>  </li></ul><div class='select2-drop select2-drop-multi' style='display:none;'>   <ul class='select2-results'>   </ul></div>")},prepareOpts:function(){var b=this.parent.prepareOpts.apply(this,
arguments);"select"===b.element.get(0).tagName.toLowerCase()&&(b.initSelection=function(b,c){var d=[];b.find(":selected").each2(function(a,b){d.push({id:b.attr("value"),text:b.text()})});a.isFunction(c)&&c(d)});return b},paste:function(){phx.util.nextTick(this.bind(function(){var b;var c=this.search.val();c=c.replace(/(\n|\r)/g,",").replace(/\t/g,"");c=d(c,this.opts.separator);var e=0;for(b=c.length;e<b;e++){var f=a.trim(c[e]);if(0<f.length)this.onSelect({text:f,id:f,toQueue:e!=b-1})}this.clearSearch()}))},
initContainer:function(){var b,c=this;this.searchContainer=this.container.find(".select2-search-field");this.selection=b=this.container.find(".select2-choices");this.search.on("paste",this.bind(this.paste));this.search.bind("keydown",this.bind(function(b){if(this.enabled){if(this.opened())switch(b.which){case r.UP:case r.DOWN:this.moveHighlight(b.which===r.UP?-1:1);k(b);return}b.which===r.ENTER&&k(b);if(b.which===r.TAB){if(0===a.trim(this.search.val()).length)if(this.searchContainer.hasClass("edit-mode")&&
0<this.searchContainer.next().length)this.removeEditMode(),this.abortEdit(),this.focusSearch();else return;k(b)}b.which===r.ESC?(this.searchContainer.hasClass("edit-mode")&&this.abortEdit(),this.cancel(b),k(b)):b.which===r.TAB||r.isControl(b)||r.isFunctionKey(b)||b.which===r.ESC||b.which!==r.PAGE_UP&&b.which!==r.PAGE_DOWN||k(b)}}));this.search.bind("keyup",this.bind(function(d){if(d.which!==r.BACKSPACE||""!==this.search.val()||this.searchContainer.hasClass("edit-mode"))b.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus").children().trigger("unselect");
else{this.close();var e=b.find(".select2-search-choice-focus");if(0<e.length){this.unselect(e.first());this.search.width(10);this.resizeSearch();k(d);return}e=b.find(".select2-search-choice");if(0<e.length){e.last().addClass("select2-search-choice-focus").children().trigger("select");k(d);return}}if(d.which===r.ENTER||d.which===r.TAB||!0===this.isSeparator())if(k(d),this.opened())this.selectHighlighted();else{if(d=a.trim(this.search.val()),this.clearSearch(),this.focusSearch(),0<d.length)this.onSelect({id:d,
text:d})}else c.open(),c.resizeSearch()}));this.container.delegate(".select2-choices","focus",this.bind(function(){this.enabled&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())}));this.clearSearch()},isSeparator:function(){var a=this.opts.separator,b=this.search.val(),c=b.substr(b.length-1,1);return-1!==a.indexOf(c)?(this.search.val(b.substring(0,b.length-1)),!0):!1},enable:function(){this.enabled||(this.parent.enable.apply(this,
arguments),this.search.show())},disable:function(){this.enabled&&(this.parent.disable.apply(this,arguments),this.search.hide())},blur:function(){if(this.opened())return!1;var b=a.trim(this.search.val());if(0<b.length)this.onSelect({id:b,text:b});this.parent.blur.apply(this,arguments)},initSelection:function(){""===this.opts.element.val()&&(this.updateSelection([]),this.close(),this.clearSearch());if(this.select||""!==this.opts.element.val()){var a=this;this.opts.initSelection.call(null,this.opts.element,
function(b){b!==c&&null!==b&&(a.updateSelection(b),a.close(),a.clearSearch())})}},clearSearch:function(){var a=this.getPlaceholder();a!==c&&0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?this.search.val(a).addClass("select2-default"):this.search.val("").width(10);this.resizeSearch()},clearPlaceholder:function(){this.search.hasClass("select2-default")?this.search.val("").removeClass("select2-default"):" "===this.search.val()&&this.search.val("")},opening:function(){this.parent.opening.apply(this,
arguments);this.clearPlaceholder();this.resizeSearch()},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close();this.resizeSearch();this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(c){var d=[],e=[],f=this;a(c).each(function(){0>b(f.id(this),d)&&(d.push(f.id(this)),e.push(this))});c=e;this.selection.find(".select2-search-choice").remove();this.opts.element.val("");a(c).each(function(){f.addSelectedChoice(this)});
f.postprocessResults()},onSelect:function(a){this.addSelectedChoice(a);this.select&&this.postprocessResults();this.opts.closeOnSelect?this.close():0<this.countSelectableResults()?this.positionDropdown():this.close();setTimeout(this.bind(function(){this.resizeSearch()}),10);this.triggerChange({added:a});this.searchContainer.hasClass("edit-mode")&&this.searchContainer.removeClass("edit-mode").data("oldData",null).appendTo(this.selection)},cancel:function(){this.close()},addSelectedChoice:function(b){var d=
a("<li class='select2-search-choice'></li>"),e=this.id(b),f=this.getVal(),g=a(this.opts.formatSelection(b,d));g!==c&&d.append(g);g.on("deleteObject",this.bind(function(b){var c=this;this.enabled&&(d.off(),a(b.target).closest(".select2-search-choice").hide(0,function(){a(b.target)&&(c.unselect(a(b.target)),c.close(),c.search.width(10),c.resizeSearch(),c.focusSearch())}).dequeue(),b.preventDefault(),phx.ftd.close())})).bind("focus",this.bind(function(){this.enabled&&(this.container.addClass("select2-container-active"),
this.dropdown.addClass("select2-drop-active"))}));if(!0===this.opts.edit)d.on("click dblclick",this.bind(function(a){"dblclick"===a.type?(this.searchContainer.hasClass("edit-mode")&&this.abortEdit(),this.edit(d)):(g.trigger("select"),d.addClass("select2-search-choice-focus"))}));d.data("select2-data",b);this.search.width(0);d.insertBefore(this.searchContainer);ObjectivationAddressButtonWrite.attachTo(g);f.push(e);this.setVal(f)},edit:function(b){var c=b.data("select2Data"),d=this.opts.formatEdit(c),
e=b.prev();phx.ftd.close();this.searchContainer.addClass("edit-mode").data("oldData",c);this.unselect(b);0==e.length?this.selection.prepend(this.searchContainer):e.after(this.searchContainer);this.search.val(d);this.resizeSearch();phx.util.setCaretPosition(this.search[0],d.length);a(this.container).trigger("resize.select2")},abortEdit:function(){var a=this.searchContainer.data("oldData");a&&this.addSelectedChoice(a);this.searchContainer.appendTo(this.selection);this.clearSearch();this.removeEditMode()},
removeEditMode:function(){this.searchContainer.removeData("oldData");this.searchContainer.removeClass("edit-mode");a(this.container).trigger("resize.select2")},unselect:function(a){var c=this.getVal();a=a.closest(".select2-search-choice");if(0===a.length)throw"Invalid argument: "+a+". Must be .select2-search-choice";var d=a.data("select2-data");var e=b(this.id(d),c);0<=e&&(c.splice(e,1),this.setVal(c),this.select&&this.postprocessResults());a.find(".objectivation").trigger("teardown");a.remove();
this.triggerChange({removed:d})},postprocessResults:function(){var a=this.getVal(),c=this.results.find(".select2-result-selectable"),d=this;c.each2(function(c,e){c=d.id(e.data("select2-data"));0<=b(c,a)?e.addClass("select2-disabled"):e.removeClass("select2-disabled")});c.each2(function(a,b){if(!b.hasClass("select2-disabled"))return d.highlight(a),!1})},resizeSearch:function(){this.search.width(0);var b=this.search;if(!x){var c=b[0].currentStyle||window.getComputedStyle(b[0],null);x=a("<div></div>").css({position:"absolute",
left:"-10000px",top:"-10000px",display:"none",fontSize:c.fontSize,fontFamily:c.fontFamily,fontStyle:c.fontStyle,fontWeight:c.fontWeight,letterSpacing:c.letterSpacing,textTransform:c.textTransform,whiteSpace:"nowrap"});a("body").append(x)}x.text(b.val());b=x.width();c=this.selection.width();var d=this.selection.offset(),e=this.selection.find(".select2-search-choice").last(),f=this.searchContainer.hasClass("edit-mode"),g;0!==e.length&&(g=f?b+20:c-(e.offset().left-d.left+e.outerWidth()));if(!g||g<b||
0>g-10)g=c;this.search.width(g-10);a(this.container).trigger("resize.select2")},getVal:function(){if(this.select){var a=this.select.val();return null===a?[]:a}a=this.opts.element.val();return d(a,["~`~"])},setVal:function(b){this.select?this.select.val(b):(b=a.isArray(b)&&0<b.length?b.join("~`~"):b||"",this.opts.element.val(b))},val:function(){var b=[],c=this;if(0===arguments.length)return this.getVal();var d=arguments[0];this.select?(this.setVal(d),this.select.find(":selected").each(function(){b.push({id:a(this).attr("value"),
text:a(this).text()})}),this.updateSelection(b)):(d=null===d?[]:d,a(d).each(function(){b.push(c.id(this))}),this.setVal(b),this.updateSelection(d));this.clearSearch()},onSortStart:function(){if(this.select)throw Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0);this.searchContainer.hide()},onSortEnd:function(){var b=[],c=this;this.searchContainer.show();this.searchContainer.appendTo(this.searchContainer.parent());
this.resizeSearch();this.selection.find(".select2-search-choice").each(function(){b.push(c.opts.id(a(this).data("select2-data")))});this.setVal(b);this.triggerChange()},data:function(b){var c=this;if(0===arguments.length)return this.selection.find(".select2-search-choice").map(function(){return a(this).data("select2-data")}).get();var d=a.map(b,function(a){return c.opts.id(a)});this.setVal(d);this.updateSelection(b);this.clearSearch()},removeData:function(b){var c=this;this.selection.children().each(function(d,
e){a(e).data("select2Data")==b&&c.unselect(a(e))})},addData:function(a){this.onSelect(a)}});a.fn.select2=function(){var d=Array.prototype.slice.call(arguments,0),e,f,g,h,k="val destroy open close focus isFocused container onSortStart onSortEnd enable disable positionDropdown data removeData addData edit resizeSearch".split(" ");this.each(function(){if(0===d.length||"object"===typeof d[0])e=0===d.length?{}:a.extend({},d[0]),e.element=a(this),"select"===e.element.get(0).tagName.toLowerCase()?h=e.element.attr("multiple"):
(h=e.multiple||!1,"tags"in e&&(e.multiple=h=!0)),f=h?new z:new v,f.init(e);else if("string"===typeof d[0]){if(0>b(d[0],k))throw"Unknown method: "+d[0];g=c;f=a(this).data("select2");if(f!==c&&(g="container"===d[0]?f.container:f[d[0]].apply(f,d.slice(1)),g!==c))return!1}else throw"Invalid arguments to select2 plugin: "+d;});return g===c?this:g};a.fn.select2.defaults={width:"copy",closeOnSelect:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(a,b,c){b=
[];l(a.text,c.term,b);return b.join("")},formatSelection:function(a){return a.text},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(a,b){return"Please enter "+(b-a.length)+" more characters"},formatLoadMore:function(){return"Loading more results..."},minimumResultsForSearch:0,minimumInputLength:0,id:function(a){return a.id},matcher:function(a,b){return 0<=b.toUpperCase().indexOf(a.toUpperCase())}};window.Select2={query:{ajax:m,local:q,tags:t},util:{debounce:e,markMatch:l},
"class":{"abstract":w,single:v,multi:z}}}})(jQuery);var MultiObjectTextField=function(a,c,b,d,f){return c({name:"MultiObjectTextField",mixins:[d,function(){this.initialized=!1;this.defaultAttrs({objectValidationUrl:"",objects:null,select2InitInput:"input.js-select2",objectivationElements:".select2-choices .select2-search-choice .objectivation",inputSearchField:".select2-input"});this.queue=[];this.setText=function(a,b,c){b.find(".objectivation_name").attr("title",c.id).text(c.personalPart||c.id);!1===c.isValid&&b.addClass("is-invalid");a.data("select2-data",
c)};this.formatSelection=function(b,c){var d=a(this.formatSelectionTemplate);this.addObjectivationBehavior(c,d,b);this.initializeObjectQueue(b,c,d);d.closest(".text-wrapper").scrollTop(1E4);return d};this.addObjectivationBehavior=function(a,b,c){this.setText(a,b,c)};this.updateObjectivationBehavior=function(a,b,c){this.setText(a,b,c)};this.checkDataForQueueRequest=function(a){return void 0===a.isValid};this.initializeObjectQueue=function(a,b,c){this.checkDataForQueueRequest(a)&&(this.queueObjectForRequest(b,
c,a.id),a.toQueue||this.requestObjectInformation())};this.queueObjectForRequest=function(a,b,c){this.queue.push({select2EntryObject:a,objectivationElement:b,id:c})};this.requestObjectInformation=function(){a.ajax({type:"POST",url:this.attr.objectValidationUrl,data:this.getJsonPostData(),success:this.updateObjectivationElementWithNewData.bind(this),dataType:"json"})};this.getJsonPostData=function(){return{idList:JSON.stringify(this.getObjectIdList())}};this.getObjectIdList=function(){var b={};a.each(this.queue,
function(a,c){b[c.id]=this.getIdObjectData(c)}.bind(this));return b};this.getIdObjectData=function(){return{}};this.updateObjectivationElementWithNewData=function(a){var b;var c=0;for(b=a.length;c<b;c++){var d=this.grepObjectAndRemoveFromQueue(a[c]);null!==d?this.updateObjectivationBehavior(d.select2EntryObject,d.objectivationElement,a[c]):f.Log.error("The object with the id "+a[c].id+" doesn't exist in the MultiObjectTextField queue")}this.resize()};this.grepObjectAndRemoveFromQueue=function(a){var b,
c=this.queue;var d=0;for(b=c.length;d<b;d++)if(c[d].id===a.id){var e=d;break}return void 0!==e?c.splice(e,1)[0]:null};this.formatResult=function(a,b,c){b=new RegExp("(&|&l|&g)?("+c.term+")","gi");return a.text.replace("<","&lt;").replace(">","&gt;").replace(b,function(a){return"&lt"===a||"&gt"===a||"&g"===a||"&l"===a?a:'<span class="select2-match">'+a+"</span>"})};this.formatEdit=function(a){return a.id};this.formatSelectionTemplate=a();this.onFocus=function(a){this.select("select2InitInput").select2("focus");
a.stopPropagation()};this.unselectObjectivationElements=function(b,c){b=a(c.el);this.select("objectivationElements").not(b).trigger("unselect")};this.add=function(a,b){a=this.select("select2InitInput");-1===a.select2("val").indexOf(b.address)&&a.select2("addData",{id:b.address,personalPart:0<b.name.length?b.name:b.address,email:b.email})};this.resize=function(){this.select("select2InitInput").select2("resizeSearch")};this.initPredefinedValues=function(){var b=this.attr.objects;a.isArray(b)&&(this.convertObjectsToSelect2Data(b),
this.select("select2InitInput").select2("data",b),this.resize())};this.convertObjectsToSelect2Data=function(a){var b;var c=0;for(b=a.length;c<b;c++){var d=a[c];"string"===typeof d&&(a[c]={id:d})}};this.getSelect2ObjectFromObjectivationElement=function(b){return a(b).parent()};this.deleteSelectedObjectivations=function(a,b){b.select2("removeData",a);b.select2("focus")};this.getSelectedObjectivationElements=function(){return this.select("objectivationElements").filter(".is-selected")};this.onDocumentKeyUp=
function(c){var d=this.getSelectedObjectivationElements();if(0<d.length){var e=this.select("select2InitInput");var f=this.getSelect2ObjectFromObjectivationElement(d);0<d.length&&(c.which===b.KEYS.ENTER?(e.select2("edit",f),c.preventDefault()):c.which!==b.KEYS.BACKSPACE&&c.which!==b.KEYS.DELETE||f.each(function(b,c){this.deleteSelectedObjectivations(a(c).data("select2Data"),e)}.bind(this)))}};this.initializeComponent=function(){this.formatSelectionTemplate=this.getTemplateContentAsHtmlString("addressWrite");
this.on("focus",this.onFocus);this.on("add",this.add);this.on("click",{inputSearchField:this.unselectObjectivationElements});this.on("select",{objectivationElements:this.unselectObjectivationElements});this.on("multiobjecttextfield.resize",this.resize);this.on(document,"keyup",this.onDocumentKeyUp);b.nextTick(function(){var a=this.select("select2InitInput").data("select2").opts;a.formatSelection=this.formatSelection.bind(this);a.formatResult=this.formatResult.bind(this);a.formatEdit=this.formatEdit.bind(this);
this.initPredefinedValues();this.initialized=!0},this)};this.after("initialize",function(){this.initializeComponent()})}]})}(jQuery,defineComponent,phx.util,mixinTemplate,Wicket);var AddressChooser=function(a,c,b,d){return a({name:"AddressChooser",mixins:[c,mixinKeypress,function(){this.defaultAttrs({textfield:".form-composite-addresschooser_textfield",icon:".form-composite-addresschooser_icon"});this.addRecipient=function(a,b){if(this.hasOpenFlyout()){var c=this.select("textfield");c.val(b.email||b.name);c.focus();this.trigger("addresschooser/close");this.triggerSetValue(a,b)}};this.setAlignmentBottomRight=function(){var a=this.select("icon");var b=a.width();a.attr("data-ftd-offset",
b)};this.getFlyoutPosition=function(){return this.select("icon").data("ftd-position")||null};this.positionAlignment=function(){"bottom-right"===this.getFlyoutPosition()&&this.setAlignmentBottomRight()};this.triggerSetValue=function(){var a={email:this.select("textfield").val()};this.trigger("addresschooser/set/value",a)};this.initializeKeyBindings=function(){this.addKey(d.ENTER,this.triggerSetValue,{preventInputKeys:!1});this.startKeyListener()};this.initializeEventBindings=function(){this.on(document,
"addresschooser/recipient/add",this.addRecipient);this.on(document,"addresschooser/open",this.stopKeyListener);this.on(document,"addresschooser/close",this.startKeyListener);this.on("focusout",this.triggerSetValue)};this.after("initialize",function(){this.positionAlignment();this.initializeEventBindings();this.initializeKeyBindings()})}]})}(defineComponent,mixinFlyout,mixinKeypress,phx.util.KEYS);(function(a,c){function b(b){var d=b.detail;b=a('.mailinfolayer[data-visibility-event="'+b.type+'"]');!0===d?b.removeClass(c.IS_HIDDEN):b.addClass(c.IS_HIDDEN);a(document).trigger("resizeHandled")}phx.initMailInfoLayers=function(){a(".mailinfolayer[data-visibility-event]").each(function(){var c=a(this).data("visibilityEvent");c&&(a(document).off(c,b),a(document).on(c,b))})}})(jQuery,CssUtils.modifier);var ContactLink=function(a,c){return c({name:"ContactLink",mixins:[function(){this.defaultAttrs({toAddress:"",toName:""});this.addAddressToRecipient=function(a){a.preventDefault();this.trigger(document,"contact.item.clicked",{address:this.attr.toAddress,name:this.attr.toName})};this.after("initialize",function(){this.on("click",function(a){this.addAddressToRecipient(a)})})}]})}(jQuery,defineComponent);(function(a,c){function b(){h("#toolbarButtonPrev")}function d(){h("#toolbarButtonNext")}function f(){h("#toolbarButtonDelete")}function e(){h("#toolbarButtonSpam")}function g(){h("#toolbarButtonReply")}function h(b){b=a(b);b.prop("disabled")||b.trigger("click")}var k,l=!1;phx.initToolbar=function(){if(!l){l=!0;k=phx.KeyListener.create();k.addKey(c.DELETE,f);k.addKey(c.S,e);k.addKey(c.A,g);k.addKey(c.RIGHT,d,{preventIFrameKeys:!0});k.addKey(c.LEFT,b,{preventIFrameKeys:!0});k.addKey(c.DOWN,d,{preventIFrameKeys:!0});
k.addKey(c.UP,b,{preventIFrameKeys:!0});k.startKeyListener();var h=k.startKeyListener.bind(k),q=k.stopKeyListener.bind(k);a(document).on("close.ftd",h);a(document).on("closeLayer",h);a(document).on("open.ftd",q);a(document).on("openLayer",q)}}})(jQuery,phx.util.KEYS);var MessageListSpecialRow=function(a,c,b){return c({name:b.getVar("rowTrackingComponentName"),mixins:[function(){this.defaultAttrs({pixelurls:null,markasdisplayedcallbackurl:null});this.wasAlreadyDisplayed=!1;this.boundHandleTracking=null;this.getBoundHandleTracking=function(){this.boundHandleTracking||(this.boundHandleTracking=this.handleTracking.bind(this));return this.boundHandleTracking};this.isVisibleToUser=function(){try{var a=this.node.getBoundingClientRect(),b=this.$node.closest(".js-scroll-pane")[0].getBoundingClientRect(),
c=window.innerHeight||document.documentElement.clientHeight,g=b.bottom>=c?c:b.bottom;return a.top>=(0>b.top?0:b.top)&&a.bottom<=g}catch(h){return!1}};this.handleTracking=function(){!this.wasAlreadyDisplayed&&this.attr.pixelurls&&this.isVisibleToUser()&&(this.wasAlreadyDisplayed=!0,this.trackPixels(this.attr.pixelurls,this.attr.markasdisplayedcallbackurl))};this.trackPixels=function(a,b){this.trigger("trackIFramePixel",{pixels:a});b&&Wicket.Ajax.post({u:b})};this.addEventHandlers=function(){a(this.$node.closest(".js-scroll-pane")).on("scroll",
this.getBoundHandleTracking());a(document).on("scroll "+b.events.RESIZE_HANDLED+" "+b.events.MAIL_MOVED,this.getBoundHandleTracking())};this.onReady=function(){this.addEventHandlers();this.handleTracking()};this.after("initialize",function(){this.attr.pixelurls&&a.when(a.ready).then(this.onReady.bind(this))});this.after("teardown",function(){a(document).off("scroll "+b.events.RESIZE_HANDLED+" "+b.events.MAIL_MOVED,this.getBoundHandleTracking());a(this.$node.closest(".js-scroll-pane")).off("scroll",
this.getBoundHandleTracking());this.attr.pixelurls=null;this.attr.markasdisplayedcallbackurl=null})}]})}(jQuery,defineComponent,phx);(function(a,c){phx.pibaRow={init:function(b){if(c.connectEIC()){var d=a(b);b=d.find("iframe").get(0);var f=c.eicRegisterFrame(b);f=c.getEicParams(f);c.eicRegisterCommand("close",function(b){b&&("string"===typeof b||b instanceof String)?a('iframe[name*="tagid='+b+'"].native-content-box-ad__iframe').siblings("button").click():d.find("button").get(0).click()});c.eicRegisterCommand("open_target",function(b){b&&("string"===typeof b||b instanceof String)&&(b=atob(b),a(".panel-mail-display-table-mail-default").length?
window.open(b,"_blank"):(phx.event.publish("mailSelectionRequest",{items:"none"}),a("#selectionCountMessage").hide(),a(".mail-display-wrapper").hide(),a("#pibaContent iframe")[0].src=b,a("#pibaContent").show()))});b.src=[b.src,f].join("#")}}}})(jQuery,phx.eicAdapter);(function(a,c){c.subscribeFor(c.Topic.AJAX_CALL_BEFORE_SEND,"newsletterUnsubscribeSpamButton",function(){a.publish("mailMoveRequest",{targetFolderId:"spam",type:"mailMoveRequest"})})})(phx.event,Wicket.Event);(function(a){phx.updateCustomFilter=function(){!0===a(document).find("[data-scroll-mode]").data("scrollMode")&&a(".customfilter_case-list").animate({scrollTop:1E4},0)}})(jQuery);(function(a,c){function b(b){b&&(a("#fontFamilyButton").find(".button_text").text(a('#fontFamilyDropdown li[data-value="'+b+'"]').text()),document.getElementById("customStylesPreview").style.fontFamily=b,document.getElementById("fontFamilyField").value=b)}function d(b){b&&(a("#fontSizeButton").find(".button_text").text(a('#fontSizeDropdown li[data-value="'+b+'"]').text()),document.getElementById("customStylesPreview").style.fontSize=b,document.getElementById("fontSizeField").value=b)}function f(a){a&&
(document.getElementById("customStylesPreview").style.color=a,document.getElementById("colorField").value=a)}function e(a){a&&(document.getElementById("customStylesPreview").style.backgroundColor=a,document.getElementById("backgroundColorField").value=a)}function g(){a("#fontFamilyDropdown").find("li").each(function(){a(this).css("font-family",a(this).data("value"))})}function h(){a("#fontSizeDropdown").find("li").each(function(){a(this).css("font-size",a(this).data("value"))})}function k(b){var c=
"";a.each("#000 #800000 #8b4513 #2F4F4F #008080 #000080 #4B0082 #696969 #B22222 #A52A2A #DAA520 #006400 #40E0D0 #0000CD #800080 #808080 #F00 #FF8C00 #FFD700 #008000 #0FF #00F #EE82EE #A9A9A9 #FFA07A #FFA500 #FFFF00 #00FF00 #AFEEEE #ADD8E6 #DDA0DD #D3D3D3 #FFF0F5 #FAEBD7 #FFFFE0 #F0FFF0 #F0FFFF #F0F8FF #E6E6FA #FFF".split(" "),function(a,b){c+='<div class="colorPicker__item" data-value="'+b+'"><div class="colorBox" style="background-color:'+b+';"></div></div>'});b.html(c)}function l(){b("Verdana, Geneva, sans-serif");
d("12px");f("#000");e("#FFF")}a("html").hasClass("page-signaturepage")&&(g(),h(),k(a("#textColorPicker")),k(a("#backgroundColorPicker")),b(a("#fontFamilyField").val()),d(a("#fontSizeField").val()),f(a("#colorField").val()),e(a("#backgroundColorField").val()),a("#fontFamilyButton, #fontSizeButton, #textColorButton, #backgroundColorButton").on("open.ftd",function(b){a(b.target).addClass(c.HAS_OPEN_FLYOUT)}),a(document).on("close.ftd",function(){a("#fontFamilyButton, #fontSizeButton, #textColorButton, #backgroundColorButton").removeClass(c.HAS_OPEN_FLYOUT)}),
a("#fontFamilyDropdown").find("li").click(function(a){b(a.target.dataset.value)}),a("#fontSizeDropdown").find("li").click(function(a){d(a.target.dataset.value)}),a("#textColorDropdown").find(".colorPicker__item").click(function(b){f(a(b.target).closest(".colorPicker__item").data("value"))}),a("#backgroundColorDropdown").find(".colorPicker__item").click(function(b){e(a(b.target).closest(".colorPicker__item").data("value"))}),a("#resetCustomStylesButton").click(l))})(jQuery,CssUtils.modifier);var PgpEmptyPreviewTeaser=function(a,c){return c({name:"PgpEmptyPreviewTeaser",mixins:[function(){this.onShowTeaser=function(){phx.statistics.trackEvent("/teaser/encryption/emptypreview/show")};this.after("initialize",function(){this.onShowTeaser();this.on("pgp-empty-preview-teaser-show",this.onShowTeaser)})}]})}(jQuery,defineComponent);(function(a){function c(b){a(".order-list__item-checkbox").prop("checked",b.target.checked);d()}function b(){d();var b=a(".order-list__item-checkbox").length===a(".order-list__item-checkbox:checked").length;a("#checkAllOrders").prop("checked",b)}function d(){0<a(".order-list__item-checkbox:checked").length?a("#deleteSelectedOrders").trigger("enable"):a("#deleteSelectedOrders").trigger("disable")}var f=!1;phx.initOrderListPage=function(){f||(f=!0,a(document).on("change","#checkAllOrders",c),a(document).on("change",
".order-list__item-checkbox",b))}})(jQuery);var PgpDownloadExtensionButton=function(a,c,b,d){return c({name:"PgpDownloadExtensionButton",parent:b,mixins:[function(){this.defaultAttrs({mailvelopeOutdated:!1});this.sourceWindow=null;this.hasActiveEventRegister=!1;this.closeSourceWindow=function(){this.sourceWindow&&(this.sourceWindow.close(),this.sourceWindow=null)};this.onMailvelopeInstall=function(){this.unregisterEvents();this.closeSourceWindow();this.attr.mailvelopeOutdated||phx.pgp.reinitialize().then(function(a){d.message("installed",{version:a.version,
hasKeyPair:a.hasKeyPair})})};this.registerEvents=function(){this.on(window,"mailvelope",this.onMailvelopeInstall);this.on(window,"mailvelope-disconnect",this.onMailvelopeInstall);this.hasActiveEventRegister=!0};this.unregisterEvents=function(){this.off(window,"mailvelope",this.onMailvelopeInstall);this.off(window,"mailvelope-disconnect",this.onMailvelopeInstall);this.hasActiveEventRegister=!1};this.onButtonClick=function(){this.hasActiveEventRegister||this.registerEvents()};this.after("initialize",
function(){this.on("click",this.onButtonClick)})}]})}(jQuery,defineComponent,Button,phx.util.post);var PgpExternalDownloadExtensionButton=function(a,c,b){return c({name:"PgpExternalDownloadExtensionButton",parent:b,mixins:[function(){this.onPostMessage=function(a){if("https://www.mailvelope.com"===a.originalEvent.origin){var b=a.originalEvent.data;"started"===b&&(this.sourceWindow=a.originalEvent.source);if("success"===b||"failure_"===b.slice(0,8))this.sourceWindow=a.originalEvent.source,this.closeSourceWindow()}};this.after("registerEvents",function(){this.on(window,"message",this.onPostMessage)});
this.after("unregisterEvents",function(){this.off(window,"message",this.onPostMessage)})}]})}(jQuery,defineComponent,PgpDownloadExtensionButton);var PgpExtensionNotificationDownloadButton=function(a,c,b,d){return c({name:"PgpExtensionNotificationDownloadButton",parent:b,mixins:[d,function(){this.defaultAttrs({button:".extension-notification-download-button_trigger",blocker:".extension-notification-download-button_container"});this.notificationElement=null;this.createNotificationElement=function(){var b=this.getTemplateContentAsHtmlString("extensionNotificationName");b=a(b);this.on(b,"click",{blocker:this.onBlockerClick});return b};this.after("onButtonClick",
function(){this.showNotificationElement()});this.onBlockerClick=function(){this.hideNotificationElement()};this.hideNotificationElement=function(){this.notificationElement.detach()};this.showNotificationElement=function(){this.getBody().append(this.notificationElement)};this.getBody=function(){return a("body")};this.after("initialize",function(){this.notificationElement=this.createNotificationElement();this.on("click",this.onButtonClick);this.on(window,"mailvelope",this.hideNotificationElement)})}]})}(jQuery,
defineComponent,PgpDownloadExtensionButton,mixinTemplate);var MailListAd=function(a,c,b,d,f){return c({name:"MailListAd",mixins:[function(){this.defaultAttrs({preview:"none"});this.initializeEventHandler=function(){b.subscribe(d.APP_DISABLED,this.hideComponent.bind(this));b.subscribe(d.APP_ENABLED,this.showComponent.bind(this));b.subscribe(d.MODAL_DIALOG_OPEN,this.hideComponent.bind(this));b.subscribe(d.MODAL_DIALOG_CLOSE,this.showComponent.bind(this))};this.hideComponent=function(){this.$node.addClass(f.IS_HIDDEN)};this.showComponent=function(){this.$node.removeClass(f.IS_HIDDEN)};
this.after("initialize",function(){this.initializeEventHandler()})}]})}(jQuery,defineComponent,phx.event,phx.events,CssUtils.modifier);

