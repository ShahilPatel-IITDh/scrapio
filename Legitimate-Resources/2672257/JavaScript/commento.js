!function(e,o){let t,n,i,c,r="commento";const m="commento-main-area",s="commento-login",a="commento-login-box-container",l="commento-login-box",d="commento-login-box-email-subtitle",u="commento-login-box-email-input",p="commento-login-box-password-input",f="commento-login-box-name-input",g="commento-login-box-website-input",h="commento-login-box-email-button",x="commento-login-box-forgot-link-container",b="commento-login-box-login-link-container",v="commento-login-box-sso-pretext",w="commento-login-box-sso-buttton-container",y="commento-login-box-hr1",k="commento-login-box-oauth-pretext",T="commento-login-box-oauth-buttons-container",H="commento-login-box-hr2",M="commento-mod-tools",$="commento-mod-tools-lock-button",C="commento-error",L="commento-logged-container",S="commento-pre-comments-area",N="commento-comments-area",E="commento-textarea-super-container-",D="commento-textarea-",B="commento-anonymous-checkbox-",O="commento-sort-policy-",A="commento-comment-card-",I="commento-comment-text-",R="commento-comment-score-",U="commento-comment-edit-",P="commento-comment-reply-",_="commento-comment-collapse-",q="commento-comment-upvote-",j="commento-comment-downvote-",W="commento-comment-approve-",Y="commento-comment-sticky-",F="commento-comment-children-",J="commento-comment-name-",z="commento-markdown-button-",V="commento-markdown-help-",X="https://comments.adguard.org",G="https://comments.adguard.org";let K=null,Q=parent.location.pathname,Z=!1,ee=[];const oe={};let te={},ne=!0,ie=!1,ce=!1,re=!1,me=!1,se="none",ae={};const le={};let de,ue={},pe=!1,fe="login",ge=!1,he="score-desc",xe=null;function be(e){return o.getElementById(e)}function ve(e,o){e.prepend(o)}function we(e,o){e.appendChild(o)}function ye(e,o){e.parentNode.insertBefore(o,e.nextSibling)}function ke(e,o){e.classList.add(`commento-${o}`)}function Te(e,o){null!==e&&e.classList.remove(`commento-${o}`)}function He(e){return o.createElement(e)}function Me(e){null!==e&&e.parentNode.removeChild(e)}function $e(e,o){const t=e.attributes[o];if(void 0!==t)return t.value}function Ce(e){if(null!==e){const o=e.cloneNode(!0);if(null!==e.parentNode)return e.parentNode.replaceChild(o,e),o}return e}function Le(e,o,t){e.addEventListener("click",(()=>{o(t)}),!1)}function Se(e,o,t){e.setAttribute(o,t)}function Ne(e,o,t){const n=new XMLHttpRequest;n.open("POST",e,!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.onload=function(){t(JSON.parse(n.response))},n.send(JSON.stringify(o))}function Ee(e){"function"==typeof e&&e()}function De(e,t){let n;const i=new Date;i.setTime(i.getTime()+31536e6),n=`; expires=${i.toUTCString()}`,o.cookie=`${e}=${t}${n}; path=/`}function Be(){const e=function(e){const t=`; ${o.cookie}`.split("; commentoCommenterToken=");if(2===t.length)return t.pop().split(";").shift()}();return void 0===e?"anonymous":e}function Oe(){window.open(`${X}/profile?commenterToken=${Be()}`,"_blank")}function Ae(e){window.open(`${X}/unsubscribe?unsubscribeSecretHex=${e}`,"_blank")}function Ie(o,t){let n,i;te[o.commenterHex]=o,de=o.commenterHex;const c=He("div"),r=He("div");n="undefined"!==o.link?He("a"):He("div");const m=He("div"),s=He("div"),a=He("div"),l=Ve(`${o.commenterHex}-${o.name}`);c.id=L,ke(c,"logged-container"),ke(r,"logged-in-as"),ke(n,"name"),ke(m,"profile-button"),ke(s,"profile-button"),ke(a,"profile-button"),n.innerText=o.name,m.innerText="Notification Settings",s.innerText="Edit Profile",a.innerText="Logout",Le(a,e.logout),Le(m,Ae,t.unsubscribeSecretHex),Le(s,Oe),Se(c,"style","display: none"),"undefined"!==o.link&&Se(n,"href",o.link),"undefined"===o.photo?((i=He("div")).style.background=l,i.innerHTML=o.name[0].toUpperCase(),ke(i,"avatar")):(Se(i=He("img"),"src",`${G}/api/commenter/photo?commenterHex=${o.commenterHex}`),Se(i,"loading","lazy"),ke(i,"avatar-img")),we(r,i),we(r,n),we(c,r),we(c,a),"commento"===o.provider&&we(c,s),we(c,m),ve(K,c),Z=!0}function Re(e){if("anonymous"===Be())return Z=!1,void Ee(e);const o={commenterToken:Be()};Ne(`${X}/api/commenter/self`,o,(o=>{if(!o.success)return De("commentoCommenterToken","anonymous"),void Ee(e);Ie(o.commenter,o.email),so(),Ee(e)}))}function Ue(e,t){const n=He("link"),i=o.getElementsByTagName("head")[0];n.type="text/css",Se(n,"href",e),Se(n,"rel","stylesheet"),function(e,o,t){e.addEventListener("load",(()=>{o(undefined)}))}(n,t),we(i,n)}function Pe(e){const o={commenterToken:Be(),domain:parent.COMMENTO_DOMAIN,path:Q};Ne(`${X}/api/comment/list`,o,(o=>{o.success?(qe(),ne=o.requireIdentification,ie=o.isModerator,ce=o.isFrozen,me=o.attributes.isLocked,se=o.attributes.stickyCommentHex,ee=o.comments,te={...te,...o.commenters},ue=o.configuredOauths,he=o.defaultSortPolicy,Ee(e)):_e(o.message)}))}function _e(e){const o=be(C);o.innerText=e,Se(o,"style","display: block;")}function qe(){Se(be(C),"style","display: none;")}function je(e){const o=be(E+e);let t=be(z+e);const n=He("table"),i=He("tr"),c=He("td"),r=He("td"),m=He("tr"),s=He("td"),a=He("td"),l=He("tr"),d=He("td"),u=He("td"),p=He("tr"),f=He("td"),g=He("td"),h=He("tr"),x=He("td"),b=He("td"),v=He("tr"),w=He("td"),y=He("td");n.id=V+e,ke(n,"markdown-help"),s.innerHTML="<b>bold</b>",a.innerHTML="surround text with <pre>**two asterisks**</pre>",c.innerHTML="<i>italics</i>",r.innerHTML="surround text with <pre>*asterisks*</pre>",d.innerHTML="<pre>code</pre>",u.innerHTML="surround text with <pre>`backticks`</pre>",f.innerHTML="<strike>strikethrough</strike>",g.innerHTML="surround text with <pre>~~two tilde characters~~</pre>",x.innerHTML='<a href="https://example.org">hyperlink</a>',b.innerHTML="<pre>[hyperlink](https://example.org)</pre> or just a bare URL",w.innerHTML="<blockquote>quote</blockquote>",y.innerHTML="prefix with <pre>&gt;</pre>",Le(t=Ce(t),We,e),we(i,c),we(i,r),we(n,i),we(m,s),we(m,a),we(n,m),we(h,x),we(h,b),we(n,h),we(l,d),we(l,u),we(n,l),we(p,f),we(p,g),we(n,p),we(v,w),we(v,y),we(n,v),we(o,n)}function We(e){let o=be(z+e);const t=be(V+e);Le(o=Ce(o),je,e),Me(t)}function Ye(e,o){const t=He("div"),n=He("div"),i=He("textarea"),c=He("div"),r=He("input"),m=He("label"),s=He("button"),a=He("a");return t.id=E+e,n.id="commento-textarea-container-"+e,i.id=D+e,r.id=B+e,s.id="commento-submit-button-"+e,a.id=z+e,ke(n,"textarea-container"),ke(c,"round-check"),ke(c,"anonymous-checkbox-container"),ke(s,"button"),ke(s,"submit-button"),ke(a,"markdown-button"),ke(t,"button-margin"),Se(i,"placeholder","Add a comment"),Se(r,"type","checkbox"),Se(m,"for",B+e),m.innerText="Comment anonymously",s.innerText=!0===o?"Save Changes":"Add Comment",a.innerHTML="<b>M &#8595;</b> &nbsp; Markdown",pe&&(r.checked=!0,r.setAttribute("disabled",!0)),i.oninput=function(e){return function(){e.style.height="",e.style.height=`${Math.min(Math.max(e.scrollHeight,75),400)}px`}}(i),Le(s,!0===o?Ze:no,e),Le(a,je,e),we(n,i),we(t,n),we(c,r),we(c,m),we(t,s),ne||!0===o||we(t,c),we(t,a),t}e.logout=function(){De("commentoCommenterToken","anonymous"),ie=Z=!1,de=void 0,io()};const Fe={"score-desc":"Upvotes","creationdate-desc":"Newest","creationdate-asc":"Oldest"};function Je(e){Te(be(O+he),"sort-policy-button-selected");const o=be(N);o.innerHTML="",he=e;const t=Ke(eo(ee),"root");t&&we(o,t),ke(be(O+e),"sort-policy-button-selected")}function ze(e){const o=He("div");return ke(o,"moderation-notice"),o.innerText=e,o}function Ve(e){for(var o=["#396ab1","#da7c30","#3e9651","#cc2529","#922428","#6b4c9a","#535154"],t=0,n=0;n<e.length;n++)t+=e.charCodeAt(n);return o[t%o.length]}function Xe(e){return 1!==e?`${e} points`:`${e} point`}e.commentNew=function(o,t,n){const i=be(E+o),c=be(D+o),r=be(P+o),m=c.value;if(""!==m){Te(c,"red-border");const s={commenterToken:t,domain:parent.COMMENTO_DOMAIN,path:Q,parentHex:o,markdown:m};Ne(`${X}/api/comment/new`,s,(s=>{if(s.success){qe();let a="";"unapproved"===s.state?a="Your comment is under moderation.":"flagged"===s.state&&(a="Your comment was flagged as spam and is under moderation."),""!==a&&ve(be(E+o),ze(a));let l=de;void 0!==l&&"anonymous"!==t||(l="anonymous");const d={commentHex:s.commentHex,commenterHex:l,markdown:m,html:s.html,parentHex:"root",score:0,state:"approved",direction:0,creationDate:new Date},u=Ke({root:[d]},"root");oe[s.commentHex]=d,"root"!==o?(i.replaceWith(u),ae[o]=!1,ke(r,"option-reply"),Te(r,"option-cancel"),r.title="Reply to this comment",Le(r,e.replyShow,o)):(c.value="",ye(be(S),u)),Ee(n)}else _e(s.message)}))}else ke(c,"red-border")};const Ge={"score-desc":function(e,o){return o.score-e.score},"creationdate-desc":function(e,o){return e.creationDate<o.creationDate?1:-1},"creationdate-asc":function(e,o){return e.creationDate<o.creationDate?-1:1}};function Ke(o,t){const n=o[t];if(!n||!n.length)return null;n.sort(((e,o)=>e.deleted||e.commentHex!==se?o.deleted||o.commentHex!==se?Ge[he](e,o):1/0:-1/0));const c=(new Date).getTime(),r=He("div");return n.forEach((n=>{let m,s;const a=te[n.commenterHex],l=He("div"),d=He("div"),u=He("div"),p=He("div"),f=He("div"),g=He("div"),h=He("div"),x=He("div"),b=He("button"),v=He("button"),w=He("button");let y=He("button"),k=He("button");const T=He("button"),H=He("button"),M=He("button"),$=Ke(o,n.commentHex),C=He("div"),L=Ve(`${n.commenterHex}-${a.name}`);if(s="undefined"!==a.link&&"https://undefined"!==a.link&&""!==a.link?He("a"):He("div"),l.id=A+n.commentHex,g.id="commento-comment-body-"+n.commentHex,h.id=I+n.commentHex,u.id="commento-comment-subtitle-"+n.commentHex,p.id="commento-comment-timeago-"+n.commentHex,f.id=R+n.commentHex,x.id="commento-comment-options-"+n.commentHex,b.id=U+n.commentHex,v.id=P+n.commentHex,w.id=_+n.commentHex,y.id=q+n.commentHex,k.id=j+n.commentHex,T.id=W+n.commentHex,H.id="commento-comment-remove-"+n.commentHex,M.id=Y+n.commentHex,$&&($.id=F+n.commentHex),C.id="commento-comment-contents-"+n.commentHex,s.id=J+n.commentHex,w.title="Collapse children",y.title="Upvote",k.title="Downvote",b.title="Edit",v.title="Reply",T.title="Approve",H.title="Remove",se===n.commentHex?M.title=ie?"Unsticky":"This comment has been stickied":M.title="Sticky",p.title=n.creationDate.toString(),l.style.borderLeft=`2px solid ${L}`,n.deleted?s.innerText="[deleted]":s.innerText=a.name,h.innerHTML=n.html,p.innerHTML=function(e,o){const t=e-o;return t<5e3?"just now":t<12e4?`${Math.round(t/1e3)} seconds ago`:t<72e5?`${Math.round(t/6e4)} minutes ago`:t<1728e5?`${Math.round(t/36e5)} hours ago`:t<5184e6?`${Math.round(t/864e5)} days ago`:t<62208e6?`${Math.round(t/2592e6)} months ago`:`${Math.round(t/31104e6)} years ago`}(c,n.creationDate),f.innerText=Xe(n.score),"undefined"===a.photo?((m=He("div")).style.background=L,"anonymous"===n.commenterHex?(m.innerHTML="?",m.style["font-weight"]="bold"):m.innerHTML=a.name[0].toUpperCase(),ke(m,"avatar")):(Se(m=He("img"),"src",`${G}/api/commenter/photo?commenterHex=${a.commenterHex}`),ke(m,"avatar-img")),ke(l,"card"),ie&&"approved"!==n.state&&ke(l,"dark-card"),a.isModerator&&ke(s,"moderator"),"flagged"===n.state&&ke(s,"flagged"),ke(d,"header"),ke(s,"name"),ke(u,"subtitle"),ke(p,"timeago"),ke(f,"score"),ke(g,"body"),ke(x,"options"),xe&&ke(x,"options-mobile"),ke(b,"option-button"),ke(b,"option-edit"),ke(v,"option-button"),ke(v,"option-reply"),ke(w,"option-button"),ke(w,"option-collapse"),ke(y,"option-button"),ke(y,"option-upvote"),ke(k,"option-button"),ke(k,"option-downvote"),ke(T,"option-button"),ke(T,"option-approve"),ke(H,"option-button"),ke(H,"option-remove"),ke(M,"option-button"),se===n.commentHex?ke(M,"option-unsticky"):ke(M,"option-sticky"),Z&&(n.direction>0?ke(y,"upvoted"):n.direction<0&&ke(k,"downvoted")),Le(b,e.editShow,n.commentHex),Le(w,e.commentCollapse,n.commentHex),Le(T,e.commentApprove,n.commentHex),Le(H,e.commentDelete,n.commentHex),Le(M,e.commentSticky,n.commentHex),Z){const e=Qe(y,k,n.commentHex,n.direction);y=e[0],k=e[1]}else Le(y,e.loginBoxShow,null),Le(k,e.loginBoxShow,null);Le(v,e.replyShow,n.commentHex),"undefined"!==a.link&&"https://undefined"!==a.link&&""!==a.link&&Se(s,"href",a.link),we(x,w),n.deleted||(we(x,k),we(x,y)),n.commenterHex===de?we(x,b):n.deleted||we(x,v),!n.deleted&&ie&&"root"===t&&we(x,M),n.deleted||!ie&&n.commenterHex!==de||we(x,H),ie&&"approved"!==n.state&&we(x,T),n.deleted||ie||se!==n.commentHex||we(x,M),Se(x,"style",`width: ${32*(x.childNodes.length+1)}px;`);for(let e=0;e<x.childNodes.length;e++)Se(x.childNodes[e],"style",`right: ${32*e}px;`);if(we(u,f),we(u,p),xe||we(d,x),we(d,m),we(d,s),we(d,u),we(g,h),we(C,g),xe){we(C,x);const e=He("div");ke(e,"options-clearfix"),we(C,e)}$&&(ke($,"body"),we(C,$)),we(l,d),we(l,C),n.deleted&&("true"===i||null===$)||we(r,l)})),0===r.childNodes.length?null:r}function Qe(o,t,n,i){return o=Ce(o),t=Ce(t),i>0?(Le(o,e.vote,[n,[1,0]]),Le(t,e.vote,[n,[1,-1]])):i<0?(Le(o,e.vote,[n,[-1,1]]),Le(t,e.vote,[n,[-1,0]])):(Le(o,e.vote,[n,[0,1]]),Le(t,e.vote,[n,[0,-1]])),[o,t]}function Ze(o){const t=be(D+o),n=t.value;if(""!==n){Te(t,"red-border");const i={commenterToken:Be(),commentHex:o,markdown:n};Ne(`${X}/api/comment/edit`,i,(t=>{if(t.success){qe(),oe[o].markdown=n,oe[o].html=t.html;let i=be(U+o);const c=be(E+o);c.innerHTML=oe[o].html,c.id=I+o,delete le[o],ke(i,"option-edit"),Te(i,"option-cancel"),i.title="Edit comment",Le(i=Ce(i),e.editShow,o);let r="";"unapproved"===t.state?r="Your comment is under moderation.":"flagged"===t.state&&(r="Your comment was flagged as spam and is under moderation."),""!==r&&ve(be(E+o),ze(r))}else _e(t.message)}))}else ke(t,"red-border")}function eo(e){const o={};return e.forEach((e=>{const t=e.parentHex;t in o||(o[t]=[]),e.creationDate=new Date(e.creationDate),o[t].push(e),oe[e.commentHex]={html:e.html,markdown:e.markdown}})),o}function oo(){const e=be(N);e.innerHTML="";const o=Ke(eo(ee),"root");o&&we(e,o)}function to(o){Z?e.commentNew(o,Be()):e.loginBoxShow(o)}function no(o){if(ne)to(o);else{const t=be(B+o),n=be(D+o);if(""!==n.value)return Te(n,"red-border"),t.checked?void function(o){re=!0,e.commentNew(o,"anonymous")}(o):void to(o);ke(n,"red-border")}}function io(o){be(r).innerHTML="",ae={},e.main(o)}function co(o,t,n){Ne(`${X}/api/commenter/login`,{email:o,password:t},(o=>{if(!o.success)return e.loginBoxClose(),void _e(o.message);qe(),De("commentoCommenterToken",o.commenterToken),Ie(o.commenter,o.email),so(),Me(be(s)),null!==n?e.commentNew(n,o.commenterToken,(()=>{e.loginBoxClose(),Pe(oo)})):(e.loginBoxClose(),Pe(oo))}))}function ro(e){const o={isLocked:me,stickyCommentHex:se},t={commenterToken:Be(),domain:parent.COMMENTO_DOMAIN,path:Q,attributes:o};Ne(`${X}/api/page/update`,t,(o=>{o.success?(qe(),Ee(e)):_e(o.message)}))}function mo(){void 0===t?so():Ue(t,so)}function so(){const e=be(m),o=be(M),t=be(L);Se(e,"style",""),ie&&Se(o,"style",""),t&&Se(t,"style","")}e.commentApprove=function(e){const o={commenterToken:Be(),commentHex:e};Ne(`${X}/api/comment/approve`,o,(o=>{if(o.success){qe();const o=be(A+e),t=be(J+e),n=be(W+e);Te(o,"dark-card"),Te(t,"flagged"),Me(n)}else _e(o.message)}))},e.commentDelete=function(e){if(confirm("Are you sure you want to delete this comment?")){const o={commenterToken:Be(),commentHex:e};Ne(`${X}/api/comment/delete`,o,(o=>{o.success?(qe(),be(I+e).innerText="[deleted]"):_e(o.message)}))}},e.vote=function(e){const o=e[0],t=e[1][0],n=e[1][1];let i=be(q+o),c=be(j+o);const r=be(R+o),m={commenterToken:Be(),commentHex:o,direction:n},s=Qe(i,c,o,n);i=s[0],c=s[1],Te(i,"upvoted"),Te(c,"downvoted"),n>0?ke(i,"upvoted"):n<0&&ke(c,"downvoted"),r.innerText=Xe(parseInt(r.innerText.replace(/[^\d-.]/g,""))+n-t),Ne(`${X}/api/comment/vote`,m,(e=>{if(!e.success)return _e(e.message),Te(i,"upvoted"),Te(c,"downvoted"),r.innerText=Xe(parseInt(r.innerText.replace(/[^\d-.]/g,""))-n+t),void Qe(i,c,o,t);qe()}))},e.editShow=function(o){if(!(o in le)||!le[o]){const t=be(I+o);le[o]=!0,t.replaceWith(Ye(o,!0)),be(D+o).value=oe[o].markdown;let n=be(U+o);Te(n,"option-edit"),ke(n,"option-cancel"),n.title="Cancel edit",Le(n=Ce(n),e.editCollapse,o)}},e.editCollapse=function(o){let t=be(U+o);const n=be(E+o);n.innerHTML=oe[o].html,n.id=I+o,delete le[o],ke(t,"option-edit"),Te(t,"option-cancel"),t.title="Edit comment",Le(t=Ce(t),e.editShow,o)},e.replyShow=function(o){if(!(o in ae)||!ae[o]){ye(be(I+o),Ye(o)),ae[o]=!0;let t=be(P+o);Te(t,"option-reply"),ke(t,"option-cancel"),t.title="Cancel reply",Le(t=Ce(t),e.replyCollapse,o)}},e.replyCollapse=function(o){let t=be(P+o);be(E+o).remove(),delete ae[o],ke(t,"option-reply"),Te(t,"option-cancel"),t.title="Reply to this comment",Le(t=Ce(t),e.replyShow,o)},e.commentCollapse=function(o){const t=be(F+o);let n=be(_+o);t&&ke(t,"hidden"),Te(n,"option-collapse"),ke(n,"option-uncollapse"),n.title="Expand children",Le(n=Ce(n),e.commentUncollapse,o)},e.commentUncollapse=function(o){const t=be(F+o);let n=be(_+o);t&&Te(t,"hidden"),Te(n,"option-uncollapse"),ke(n,"option-collapse"),n.title="Collapse children",Le(n=Ce(n),e.commentCollapse,o)},e.commentoAuth=function(o){const t=o.provider,n=o.id,i=window.open("","_blank");!function(e,o){const t=new XMLHttpRequest;t.open("GET",e,!0),t.onload=function(){o(JSON.parse(t.response))},t.send(null)}(`${X}/api/commenter/token/new`,(o=>{if(o.success){qe(),De("commentoCommenterToken",o.commenterToken),i.location=`${X}/api/oauth/${t}/redirect?commenterToken=${o.commenterToken}`;var c=setInterval((()=>{i.closed&&(clearInterval(c),Re((()=>{const t=be(L);t&&Se(t,"style",""),"anonymous"!==Be()&&Me(be(s)),null!==n?e.commentNew(n,o.commenterToken,(()=>{e.loginBoxClose(),Pe(oo)})):(e.loginBoxClose(),Pe(oo))})))}),250)}else _e(o.message)}))},e.popupRender=function(o){const t=be(a),n=He("div"),i=He("div"),c=He("div"),r=He("div"),m=He("hr"),s=He("div"),p=He("div"),f=He("div"),g=He("hr"),M=He("div"),$=He("div"),C=He("div"),L=He("input"),S=He("button"),N=He("div"),E=He("a"),D=He("div"),B=He("a"),O=He("div");n.id=l,M.id=d,L.id=u,S.id=h,N.id=x,D.id=b,c.id=w,i.id=v,m.id=y,s.id=k,p.id=T,g.id=H,ke(t,"login-box-container"),ke(n,"login-box"),ke(M,"login-box-subtitle"),ke($,"email-container"),ke(C,"email"),ke(L,"input"),ke(S,"email-button"),ke(N,"forgot-link-container"),ke(E,"forgot-link"),ke(D,"login-link-container"),ke(B,"login-link"),ke(i,"login-box-subtitle"),ke(c,"oauth-buttons-container"),ke(r,"oauth-buttons"),ke(s,"login-box-subtitle"),ke(p,"oauth-buttons-container"),ke(f,"oauth-buttons"),ke(O,"login-box-close"),ke(K,"root-min-height"),E.innerText="Forgot your password?",B.innerText="Don't have an account? Sign up.",M.innerText="Login with your email address",S.innerText="Continue",s.innerText="Proceed with social login",i.innerText=`Proceed with ${parent.COMMENTO_DOMAIN} authentication`,Le(S,e.passwordAsk,o),Le(E,e.forgotPassword,o),Le(B,e.popupSwitch,o),Le(O,e.loginBoxClose),Se(t,"style","display: none; opacity: 0;"),Se(L,"name","email"),Se(L,"placeholder","Email address"),Se(L,"type","text");let A=0;if(["google","twitter","github","gitlab"].forEach((t=>{if(ue[t]){const n=He("button");ke(n,"button"),ke(n,`${t}-button`),n.innerText=t,Le(n,e.commentoAuth,{provider:t,id:o}),we(f,n),A++}})),ue.sso){const t=He("button");ke(t,"button"),ke(t,"sso-button"),t.innerText="Single Sign-On",Le(t,e.commentoAuth,{provider:"sso",id:o}),we(r,t),we(c,r),we(n,i),we(n,c),(A>0||ue.commento)&&we(n,m)}ge=A>0&&(we(n,s),we(p,f),we(n,p),!0),we(C,L),we(C,S),we($,C),we(N,E),we(D,B),A>0&&ue.commento&&we(n,g),ue.commento&&(we(n,M),we(n,$),we(n,N),we(n,D)),we(n,O),fe="login",t.innerHTML="",we(t,n)},e.forgotPassword=function(){window.open("","_blank").location=`${X}/forgot?commenter=true`,e.loginBoxClose()},e.popupSwitch=function(o){const t=be(d);ge&&(Me(be(T)),Me(be(k)),Me(be(y)),Me(be(H))),ue.sso&&(Me(be(w)),Me(be(v)),Me(be(y)),Me(be(H))),Me(be(b)),Me(be(x)),t.innerText="Create an account",fe="signup",e.passwordAsk(o),be(u).focus()},e.login=function(e){const o=be(u),t=be(p);co(o.value,t.value,e)},e.signup=function(o){const t=be(u),n=be(f),i=be(g),c=be(p),r={email:t.value,name:n.value,website:i.value,password:c.value};Ne(`${X}/api/commenter/new`,r,(n=>{if(!n.success)return e.loginBoxClose(),void _e(n.message);qe(),co(t.value,c.value,o)}))},e.passwordAsk=function(o){let t,n,i,c;const r=be(l),m=be(d);Me(be(h)),Me(be(b)),Me(be(x)),ge&&ue.length>0&&(Me(be(y)),Me(be(H)),Me(be(k)),Me(be(T))),c="signup"===fe?(t=["name","website","password"],n=[f,g,p],i=["text","text","password"],["Real Name","Website (Optional)","Password"]):(t=["password"],n=[p],i=["password"],["Password"]),m.innerText="signup"===fe?"Finish the rest of your profile to complete.":"Enter your password to log in.";for(let m=0;m<t.length;m++){const s=He("div"),a=He("div"),l=He("input");if(l.id=n[m],ke(s,"email-container"),ke(a,"email"),ke(l,"input"),Se(l,"name",t[m]),Se(l,"type",i[m]),Se(l,"placeholder",c[m]),we(a,l),we(s,a),"password"===t[m]){const t=He("button");ke(t,"email-button"),t.innerText=fe,Le(t,"signup"===fe?e.signup:e.login,o),we(a,t)}we(r,s)}"signup"===fe?be(f).focus():be(p).focus()},e.threadLockToggle=function(){const e=be($);me=!me,e.disabled=!0,ro((()=>{e.disabled=!1,io()}))},e.commentSticky=function(e){if("none"!==se){const e=be(Y+se);Te(e,"option-unsticky"),ke(e,"option-sticky")}se=se===e?"none":e,ro((()=>{const o=be(Y+e);se===e?(Te(o,"option-sticky"),ke(o,"option-unsticky")):(Te(o,"option-unsticky"),ke(o,"option-sticky"))}))},e.loginBoxClose=function(){const e=be(m),o=be(a);Te(e,"blurred"),Te(K,"root-min-height"),Se(o,"style","display: none")},e.loginBoxShow=function(o){const t=be(m),n=be(a);e.popupRender(o),ke(t,"blurred"),Se(n,"style",""),window.location.hash=a,be(u).focus()};let ao=!(e.main=function(t){if(null!==(K=be(r))){null===xe&&(xe=K.getBoundingClientRect().width<450),ke(K,"root"),"true"!==n&&ke(K,"root-font"),function(){const e=He("div");e.id=a,we(K,e)}(),function(){const e=He("div");e.id=C,ke(e,"error-box"),Se(e,"style","display: none;"),we(K,e)}(),function(){const e=He("div");e.id=m,ke(e,"main-area"),Se(e,"style","display: none"),we(K,e)}();const i=function(){const e=He("div"),o=He("div"),t=He("a"),n=He("span");return e.id="commento-footer",ke(e,"footer"),ke(o,"logo-container"),ke(t,"logo"),ke(n,"logo-text"),Se(t,"href","https://commento.io"),Se(t,"target","_blank"),n.innerText="Commento",we(t,n),we(o,t),we(e,o),e}();Ue(`${G}/css/commento.css`,mo),Re((()=>{Pe((()=>{!function(){const o=He("div"),t=He("button");o.id=M,t.id=$,ke(o,"mod-tools"),t.innerHTML=me?"Unlock Thread":"Lock Thread",Le(t,e.threadLockToggle),Se(o,"style","display: none"),we(o,t),we(K,o)}(),function(o){const t=He("div"),n=He("div"),i=be(m),c=He("div"),r=He("div");t.id=s,c.id=S,r.id=N,ke(t,"login"),ke(n,"login-text"),ke(r,"comments"),n.innerText="Login",r.innerHTML="",Le(n,e.loginBoxShow,null);let a=0;Object.keys(ue).forEach((e=>{ue[e]&&a++})),a>0?we(t,n):ne||(pe=!0),me||ce?Z||re?(we(i,ze("This thread is locked. You cannot add new comments.")),Me(be(s))):(we(i,t),we(i,Ye("root"))):(Z?Me(be(s)):we(i,t),we(i,Ye("root"))),ee.length>0&&we(i,function(){const e=He("div"),o=He("div");for(const t in ke(e,"sort-policy-buttons-container"),ke(o,"sort-policy-buttons"),Fe){const e=He("a");e.id=O+t,ke(e,"sort-policy-button"),t===he&&ke(e,"sort-policy-button-selected"),e.innerText=Fe[t],Le(e,Je,t),we(o,e)}return we(e,o),e}()),we(i,c),we(i,r),we(K,i),Ee(o)}((()=>{oo(),we(K,i),function(){if(window.location.hash)if(window.location.hash.startsWith("#commento-")){const e=window.location.hash.split("-")[1],o=be(A+e);if(null===o)return 64===e.length&&_e("The comment you're looking for no longer exists or was deleted.");ke(o,"highlighted-card"),o.scrollIntoView(!0)}else window.location.hash.startsWith("#commento")&&K.scrollIntoView(!0)}(),so(),function(){for(let e=o.getElementsByClassName("commento-name"),t=0;t<e.length;t++)Se(e[t],"style",`max-width: ${e[t].getBoundingClientRect().width+20}px;`)}(),Ee(t)}))}))}))}else console.log(`[commento] error: no root element with ID '${r}' found`)});function lo(){ao||(ao=!0,function(){for(let e=o.getElementsByTagName("script"),m=0;m<e.length;m++)if(e[m].src.match(/\/js\/commento\.js$/)){const o=$e(e[m],"data-page-id");void 0!==o&&(Q=o),t=$e(e[m],"data-css-override"),c=$e(e[m],"data-auto-init"),void 0===(r=$e(e[m],"data-id-root"))&&(r="commento"),n=$e(e[m],"data-no-fonts"),i=$e(e[m],"data-hide-deleted")}}(),"true"===c||void 0===c?e.main(void 0):"false"!==c&&console.log("[commento] error: invalid value for data-auto-init; allowed values: true, false"))}var uo=function(){const e=o.readyState;"loading"===e?o.addEventListener("readystatechange",uo):("interactive"===e||"complete"===e)&&lo()};uo()}(window.commento,document);