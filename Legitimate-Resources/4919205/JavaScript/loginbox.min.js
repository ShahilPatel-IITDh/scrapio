function LoginBox(){this.loginBox=document.getElementsByClassName("login-box")[0],this.linksContainer=this.loginBox.getElementsByClassName("links")[0],this.links=this.linksContainer.getElementsByTagName("a"),this.formContainers=this.loginBox.getElementsByClassName("form"),this.cookieName="loginbox",this.start=function(){this.addEventListener()},this.addEventListener=function(){var e=this;[].forEach.call(this.links,function(s){s.addEventListener("click",function(t){var a=null;Helpers.hasClassName(s,"citromail")?a="citromail":Helpers.hasClassName(s,"freemail")&&(a="freemail"),null!==a&&(t.preventDefault(),e.setLinkActive(a),e.setFormActive(a))})})},this.setLinkActive=function(e){var s=this;Helpers.addClass(this.linksContainer,"closed"),[].forEach.call(this.links,function(t){null!==e&&Helpers.hasClassName(t,e)?(Helpers.addClass(t,"active"),Helpers.removeClass(s.linksContainer,"closed")):Helpers.removeClass(t,"active")})},this.setFormActive=function(e){var s=this;[].forEach.call(this.formContainers,function(t){null!==e&&Helpers.hasClassName(t,e)?(Helpers.addClass(t,"active"),s.handleForm(t.getElementsByTagName("form")[0])):Helpers.removeClass(t,"active")})},this.handleForm=function(e){var s=this,t=e.getElementsByClassName("cancel")[0],a=e.getElementsByClassName("submit")[0],l=e.getElementsByClassName("remember")[0],i=null;Helpers.hasClassName(e.parentNode,"citromail")?i="citromail":Helpers.hasClassName(e.parentNode,"freemail")&&(i="freemail"),this.setFromCookie(i,e),t.addEventListener("click",function(t){t.preventDefault(),[].forEach.call(e.getElementsByClassName("form-control"),function(e){e.value=""}),s.setLinkActive(null),s.setFormActive(null)}),a.addEventListener("click",function(t){t.preventDefault(),l.checked?s.setCookie(i,e.getElementsByClassName("username")[0].value,e.getElementsByClassName("password")[0].value):s.deleteFromCookie(i),e.submit()})},this.setFromCookie=function(e,s){var t=this.getCookie();t.hasOwnProperty(e)&&(t[e].hasOwnProperty("username")&&(s.getElementsByClassName("username")[0].value=t[e].username),t[e].hasOwnProperty("password")&&(s.getElementsByClassName("password")[0].value=t[e].password),s.getElementsByClassName("remember")[0].checked=!0)},this.getCookie=function(){var e=Helpers.getCookieValue(this.cookieName);return e=null===e?{}:JSON.parse(e)},this.setCookie=function(e,s,t){var a=this.getCookie();a[e]={username:s,password:t},Helpers.createCookie(this.cookieName,JSON.stringify(a),"1:y",null,null,null)},this.deleteFromCookie=function(e){var s=this.getCookie(),t={};for(var a in s)s.hasOwnProperty(a)&&a!==e&&(t[a]=s[a]);Helpers.createCookie(this.cookieName,JSON.stringify(t),"1:y",null,null,null)},this.start()}new LoginBox;
