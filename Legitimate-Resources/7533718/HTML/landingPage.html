<!DOCTYPE html>
<html>
 <head>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js">
  </script>
  <link href="//fonts.googleapis.com/css?family=Lato:400,400i,700,700i" rel="stylesheet"/>
  <link href="//fonts.googleapis.com/css?family=Roboto+Condensed" rel="stylesheet"/>
  <script>
   jQuery.cookie=function(e,n,i){if("undefined"==typeof n){var o=null;if(document.cookie&&""!=document.cookie)for(var r=document.cookie.split(";"),t=0;t<r.length;t++){var p=jQuery.trim(r[t]);if(p.substring(0,e.length+1)==e+"="){o=decodeURIComponent(unescape(p.substring(e.length+1)));break}}return o}i=i||{},null===n&&(n="",i=$.extend({},i),i.expires=-1);var u="";if(i.expires&&("number"==typeof i.expires||i.expires.toUTCString)){var s;"number"==typeof i.expires?(s=new Date,s.setTime(s.getTime()+24*i.expires*60*60*1e3)):s=i.expires,u="; expires="+s.toUTCString()}var a=i.path?"; path="+i.path:"",c=i.domain?"; domain="+i.domain:"",m=i.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(n),u,a,c,m].join("")};
  </script>
  <link href="//click.deals.shermanstravel.com/assets/interstitial-18b4490c67debd584ae96942f161a42c.css" media="all" rel="stylesheet">
   <link href="//click.deals.shermanstravel.com/assets/interstitial_external-280e77248e226b071b4a84b58d622434.css" media="all" rel="stylesheet">
    <!--landscape_template.js-->
    <script id="sht-landscape" src="//landscape.shermanstravel.com/st_landscape.js?v=20190528" type="text/javascript">
    </script>
    <script type="text/javascript">
     (function(w) {
    if(typeof(UniversalAnalytics) == 'undefined') {
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    }

    var UniversalAnalytics = {trackers: {}};
    UniversalAnalytics.getTracker = function(trackingCode, opts) {
      function createTracker(trackingCode, opts) {
        return new UniversalAnalyticsTracker(trackingCode, opts);
      }

      if(!UniversalAnalytics.trackers[trackingCode]) {
        UniversalAnalytics.trackers[trackingCode] = createTracker(trackingCode, opts);
      }

      return UniversalAnalytics.trackers[trackingCode];
    }

    function UniversalAnalyticsTracker(trackingCode, opts) {
      ga('create', trackingCode, 'auto', opts);
      this.trackingCode = trackingCode;
    }

    UniversalAnalyticsTracker.prototype.trackDimension = function(name, value) {
      ga('set', name, value);
    }

    UniversalAnalyticsTracker.prototype.trackEvent = function(category, action, label, value) {
      ga('send', 'event', category, action, label, value);
    }

    UniversalAnalyticsTracker.prototype.trackTop25Subscription = function(label) {
      this.trackEvent('top 25 newsletter', 'subscribe', label);
    }

    UniversalAnalyticsTracker.prototype.trackTSCategory = function(category) {
      this.trackDimension('dimension5', category);
    }

    UniversalAnalyticsTracker.prototype.trackPageView = function() {
      ga('send', 'pageview');
    }

    UniversalAnalyticsTracker.prototype.trackCheckRates = function(value) {
      this.trackEvent('TravelSearch', 'check rates', '', value);
    }

    UniversalAnalyticsTracker.prototype.trackTiming = function(category, variable, value, label) {
      ga('send', 'timing', category, variable, value, label);
    }

    UniversalAnalyticsTracker.prototype.trackTimeSinceBegin = function(startTime, category, variable, value, label) {
      if(startTime !== undefined){
        var endTime = new Date().getTime();
        var timeSpent = endTime - startTime;

        this.trackTiming(category, variable, value, label);
      }
    }

    w.UniversalAnalytics = UniversalAnalytics;
  })(window);
    </script>
    <script type="text/javascript">
     var analytics = UniversalAnalytics.getTracker('UA-13162027-3');
    </script>
    <!-- Quantcast Header Tag -->
    <script type="text/javascript">
     var _qevents = _qevents || [];

(function() {
var elem = document.createElement('script');
elem.src = (document.location.protocol == "https:" ? "https://secure" : "http://edge") + ".quantserve.com/quant.js";
elem.async = true;
elem.type = "text/javascript";
var scpt = document.getElementsByTagName('script')[0];
scpt.parentNode.insertBefore(elem, scpt);
})();
    </script>
    <!-- End Quantcast Header Tag -->
    <!-- Google Tag Manager -->
    <script>
     (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-KN9BH7X');
    </script>
    <!-- End Google Tag Manager -->
    <!--  PERFORM CLICK EVENT -->
    <script type="text/javascript">
     (function($) {
    var shermanstravel_landscape_pub_key = '33584a0a84085c5867dd169e22b3714fb0fd4e9d';

    /// Lytics Scope
    var getCookie = function(name) {
      var cookieValue = null;
      if (!!$.cookie) {
        cookieValue = $.cookie(name);
      } else {
        var _cookies = document.cookie.split(/;\s*/),
          cookiesLength = _cookies.length,
          pair,
          ix;
        for (ix = 0; ix < cookiesLength; ix++) {
          pair = _cookies[ix].split("=");
          if (pair[0] === name) {
            cookieValue = pair[1];
            break;
          }
        }
      }
      if (name == 'postup_id' && (cookieValue == '' || isNaN(cookieValue))) {
        return null;
      }
      return cookieValue;
    };

    var urlParams = function() {
      var str = window.location.search;
      var objURL = {};
      str.replace(
        new RegExp( "([^?=&]+)(=([^&]*))?", "g" ),
        function( $0, $1, $2, $3 ) {
          objURL[ $1 ] = $3;
        }
      );
      return objURL;
    };

    var urlString = function() {
      var arr = window.location.pathname.split('/');
      if(arr.length > 2 && arr[1] === 'ep') {
        return {
          dealId: arr[2],
          publisherId: arr[3]
        };
      } else if (arr.length > 1) {
        return {
          dealId: arr[1],
          publisherId: arr[2]
        };
      }

      // default values
      return {
        dealId: '',
        publisherId: ''
      };
    };

    // Push the parameter values to the dataLayer so that Lytics can use them
    function pushToDataLayer() {
      var data = urlString();
      var ls_recip_id = window.localStorage.getItem('_purecip');
      if (typeof ls_recip_id === 'string' && ls_recip_id.trim() !== '') {
        ls_recip_id = JSON.parse(atob(ls_recip_id));
      }

      try {
        var usrsess = getCookie('usrsess');
        if (usrsess != null) {
          usrsess = JSON.parse(usrsess);
          if (typeof usrsess.v !== "undefined") {
            data.refer = usrsess.v.refer || null;
            data.subid = usrsess.v.sub_id || null;
          }
        }
      } catch (e) {
        console.error(':: UNABLE TO PARSE usrsess COOKIE ::');
      }

      data.userId = urlParams().recip_id || getCookie('postup_id') || ls_recip_id;

      window.dataLayer = window.dataLayer || [];
      window.dataLayer.push({
        event: 'lytics.data',
        data: data
      });
    }

    try {
      pushToDataLayer();
    } catch(error) {
      console.error(error);
    }
    /// End Lytics Scope

    function renderExternalPage(pageInfo) {
      $(".st-interstitial-title").remove();
      $(".st-interstitial-logos-container").empty();
      $(".st-interstitial-footer-message").remove();
      if (pageInfo.partner_name != "") {
        $(".st-interstitial-logos-container").append(
          "<div class=\"st-interstitial-loading-external\"><div class=\"st-interstitial-in-partnership-external\">In partnership with <img src=\"//click.deals.shermanstravel.com/assets/logos/sht_logo_desktop_external-4d3e24203927fcefe8237d75b0fcc93b.png\" alt=\"ShermansTravel\" title=\"ShermansTravel\"/></div><div class=\"st-interstitial-arrows-external\"></div><div class=\"st-interstitial-partner-text-external\">We are sending you to <span class=\"st-interstitial-partner-name-external\">" + pageInfo.partner_name + "</span>, a trusted travel partner</div></div>"
        );
      } else {
        $(".st-interstitial-logos-container").append(
          "<div class=\"st-interstitial-loading-external\"><div class=\"st-interstitial-in-partnership-external\">In partnership with <img src=\"//click.deals.shermanstravel.com/assets/logos/sht_logo_desktop_external-4d3e24203927fcefe8237d75b0fcc93b.png\" alt=\"ShermansTravel\" title=\"ShermansTravel\"/></div><div class=\"st-interstitial-arrows-external\"></div></div>"
        );
      }
    }

    function renderPage(pageInfo) {
      if (pageInfo.is_external_publisher) {
        renderExternalPage(pageInfo);
      } else {
        if (pageInfo.deal_logo != ""){
          $('.st-interstitial-loading').append("<img src=\"" + pageInfo.deal_logo + "\" alt='' />");
        } else if (pageInfo.partner_logo != "") {
          $('.st-interstitial-loading').append("<img src=\"" + pageInfo.partner_logo + "\" alt='' />");
        } else {
          if (pageInfo.partner_name) {
            $('.st-interstitial-loading').append("<div class=\"st-interstitial-partner-name\">" + pageInfo.partner_name + "</div>");
          }
        }
      }
      $('.st-interstitial-container').show();
    }

    function fireLandScapeDeal(opts) {
      var hostname = location.hostname, publisherKey;
      if (typeof(stLandscape) !== 'undefined') {
        publisherKey = ( hostname.indexOf('shermanscruise.com') != -1 ) ? null : shermanstravel_landscape_pub_key;
        if (publisherKey != null) {
          stLandscape.setPublisherKey(publisherKey);
          stLandscape.trackDeal(opts);
        }
      }
    }
    function fireGoogle(custom_vars, track_event){
      var analytics = UniversalAnalytics.getTracker('UA-13162027-3');
      var analyticsDimensionMap = {
        'deal click price':       'dimension6',
        'deal click travel type': 'dimension7',
        'deal click destination': 'dimension8',
        'endorsement pages':      'dimension9',
        'deal click type':        'dimension10'
      };
      var vars = [[analyticsDimensionMap['deal click price'], custom_vars['price_level_tags'].join(' ')],
                  [analyticsDimensionMap['deal click travel type'], custom_vars['category']]];

      if(custom_vars['places'] != null){
        vars.push([analyticsDimensionMap['deal click destination'], custom_vars['places'].join(', ')]);
      }
      if(custom_vars['click_type'] != null){
        vars.push([analyticsDimensionMap['deal click type'], custom_vars['click_type']]);
      }

      for (var i = 0; i < vars.length; i++) {
        analytics.trackDimension(vars[i][0], vars[i][1]);
      };
      analytics.trackPageView();

      if(track_event['deal_type'] && track_event['deal_click_type']) {
        analytics.trackEvent(track_event['deal_type'], track_event['deal_click_type'], track_event['deal_id'], true);
      }
    }
    $.ajax({
      type: 'POST',
      url: window.location.href,
      data: { referer: document.referrer },
      dataType: 'json'
    }).done(function(result){
      if (result.page_info && !result.hide_interstitial) {
        try{renderPage(result.page_info)}catch(err){}
      }
      if (result.top25_deal) {
        try {
          fireLandScapeDeal({
            deal_id: result.deal_id,
            deal_publisher_id: result.deal_publisher_id,
            deal_image: result.deal_image,
            deal_price: result.deal_price,
            deal_saving: result.deal_saving,
            deal_title: result.deal_title,
            deal_book_by: result.deal_book_by,
            deal_advertiser: result.deal_advertiser,
            deal_url: result.deal_url,
            deal_description: result.deal_description,
            deal_destination: result.deal_destination,
            deal_score_fr: result.deal_score_fr,
            deal_score_cpc: result.deal_score_cpc,
            deal_score_clicks: result.deal_score_clicks,
            deal_related_title: result.deal_related_title,
            deal_related: result.deal_related
          })
        } catch(err) {}
      }
      if (result.custom_vars != null) {
        try{fireGoogle(result.custom_vars, result.track_event)}catch(err){}
      }
      if (result.pixels && result.pixels.length > 0) {
        $('head').append(result.pixels);
      }
      if (window.location.href.indexOf('?stay=1') > 0) {
        return;
      }
        // if it's an endorsement page, we check if the 2nd click is billable or not
        // if it is, we send a param "bill=1" to the EP, so that the flow is correct
        // and the it goes 1st click (not billed) > ep > 2nd click (billed) > deal
        // if not, we check if the param "bypass_ep" is active, and the flow goes
        // 1st click (billed) > ep > 2nd click (not billed) > deal
          var time_to_redirect = result.hide_interstitial ? 0 : 2000;
          redirectTimeout = setTimeout(function() {
            window.location = result.url;
          }, time_to_redirect);
    });
  })(jQuery);
    </script>
    <title>
     Redirecting you to your deal...
    </title>
   </link>
  </link>
 </head>
 <body>
  <!-- Google Tag Manager (noscript) -->
  <noscript>
   <iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-KN9BH7X" style="display:none;visibility:hidden" width="0">
   </iframe>
  </noscript>
  <!-- End Google Tag Manager (noscript) -->
  <!-- Quantcast Body Tag -->
  <script type="text/javascript">
   _qevents.push({
qacct:"p-y7jhK3PrFbS21",
labels:"ShermansTravel Deals Network"
});
  </script>
  <noscript>
   <div style="display:none;">
    <img alt="Quantcast" border="0" height="1" src="//pixel.quantserve.com/pixel/p-y7jhK3PrFbS21.gif?labels=ShermansTravel%20Deals%20Network" width="1"/>
   </div>
  </noscript>
  <!-- End Quantcast Body Tag -->
  <div class="st-interstitial-container">
   <div class="st-interstitial-title">
    We are sending you to our trusted travel partner...
   </div>
   <div class="st-interstitial-logos-container">
    <div class="st-interstitial-loading" id="partners-info">
     <!--shermans logo-->
     <img alt="ShermansTravel" src="//click.deals.shermanstravel.com/assets/logos/sht_logo_desktop-cbea7eafa6612ce39709903a4388d300.png" title="ShermansTravel"/>
     <!--loading arrows-->
     <div class="st-interstitial-arrows">
     </div>
    </div>
   </div>
   <div class="st-interstitial-footer-message">
    You're almost there. Don't miss out on this great offer.
   </div>
  </div>
 </body>
</html>
