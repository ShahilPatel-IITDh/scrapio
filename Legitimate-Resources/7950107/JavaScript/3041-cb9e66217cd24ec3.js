(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3041],{64647:function(e,t,r){var n=r(44239),i=r(37005),l=r(68630);e.exports=function(e){if(!i(e))return!1;var t=n(e);return"[object Error]"==t||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!l(e)}},40659:function(e,t,r){"use strict";r.d(t,{a:function(){return o}});var n=r(59499),i=r(85893),l=r(67294),a=r(47281);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}let o=(0,l.memo)(e=>(0,i.jsx)(a.J,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({_name:"Info",_src:"assets/glyph/Info.svg",_viewBox:"0 0 24 24"},e)))},93041:function(e,t,r){"use strict";r.d(t,{a:function(){return el}});var n=r(59499),i=r(85893),l=r(67294),a=r(36982),s=r(1280);let o=()=>(0,l.useContext)(s.OB);var d=r(81982),u=r(51734),c=r(38996),p=r(69385),v=r(72604),f=r(86990),_=r(4730),y=r(80564),h=r(48245),m=r(45045),g=r(37586),b=r(11163),O=r(5152),S=r.n(O);let C=S()(()=>Promise.all([r.e(2652),r.e(1283),r.e(1956),r.e(6020)]).then(r.bind(r,38622)).then(e=>e.ModalContentChooseOptions),{loadableGenerated:{webpack:()=>[38622]}});C.displayName="ModalContentChooseOptionsDynamic";var w=r(19983),P=r(91238),A=r(2181),E=r(21303),j=r(99093),x=r(39515),T=r(50411),D=r(60217),N=r(8668),I=r(55198),k=r(46879),R=r(80198),L=r(13347),B=r(40659),F=r(44350),$=r(35216),z=r(23451),M=r(47269);let{useMutation:W}=(0,$.F)({name:"@web/domain-item-services/services-builders",mutationFn:async e=>{let{childOrStandaloneProductId:t,serviceOfferingCategory:r,serviceProviderName:n,storeId:i}=null!=e?e:{};if(void 0===t)throw TypeError("childOrStandaloneProductId not defined for item services services builders mutation");if(void 0===r)throw TypeError("serviceOfferingCategory not defined for item services services builders mutation");if(void 0===n)throw TypeError("serviceProviderName not defined for item services services builders mutation");let{apis:{itemServices:l},baseUrl:a,apiKey:s}=(0,F.config)().services.apiPlatform,o=new M.Z(`${a}/${l.endpointPaths.postServicesBuildersV1}`).setQuery({key:s}).toString(),{data:d,ok:u,status:c,statusText:p}=await (0,z.v_)(o,{credentials:"include",timerTag:"item_services_services_builders_api_call",errorTag:"item_services_services_builders_error",body:JSON.stringify({channel:"ONLINE",tcin:t,service_offering_category:r,service_provider:n,store_id:i})});if(u)return d;throw Error(`${c}-${p}`)}});var H=r(7535),U=r(48914),G=r(43430),Z=r(19521);let q=Z.ZP.div.withConfig({displayName:"styles__StyledApplyNowBlock",componentId:"sc-4r5b99-0"})(["display:flex;flex-direction:column;align-items:center;text-align:center;"]),X="There was an issue on our end. Please try again.",V=({storeId:e})=>{var t;let[r,n]=(0,P.O)(!1),{0:a,1:s}=(0,l.useState)(X),o=(0,k.zy)(),d=(0,R.P)(),u=(0,b.useRouter)(),{preferredStoreId:c,queryState:p}=(0,H.lo)(),v=p.status===U.o.Success||p.status===U.o.Error,f=(0,D.Ao)(N.hg),{marketing_info:_,service_offering_category:y,service_provider_name:h}=null!==(t=(0,D.ct)(I.up))&&void 0!==t?t:{},{due_today:m,annual_percentage_rate:g,contract_length:O}=null!=_?_:{},[S]=W(),C=(0,l.useCallback)(t=>async()=>{o?await S({childOrStandaloneProductId:f,serviceOfferingCategory:y,serviceProviderName:h,storeId:c},{onSuccess:r=>{let n=M.Z.buildURLWithParams("/credit-application",{lender:"citizens_one",tcin:f,store_id:null!=e?e:c,services_builders_id:null==r?void 0:r.services_builder_id,guest:t}).toString();u.push(n)},onError:e=>{429===e.status?(n(),s("Weâ€™re experiencing high demand. Sorry for the inconvenience. Please try again.")):(n(),s(X))}}):(0,L.zB)(window.location.href)},[o,S,f,y,h,c,e,u,n]),{trackEvent:w}=(0,G.rS)();return(0,l.useEffect)(()=>{w({guest:{eventType:"componentload"},appState:{globalPage:"credit application",pageName:"product: XAA: application intro",pageType:"product: XAA"}})},[w]),(0,i.jsxs)(q,{children:[(0,i.jsx)(A.t,{alt:"Apply now Xbox All Access",noAnimation:!0,src:"https://target.scene7.com/is/image/Target/XAA_Family_Vertical_keyart_030222_R6divided-220523-1653322058657"}),(0,i.jsxs)("div",{className:"h-text-lg h-margin-t-wide",children:[(0,i.jsxs)("b",{children:["$",m," due today"]})," and ",(0,i.jsxs)("b",{children:[g,"% APR"]})," for ",O," months^"]}),(0,i.jsx)("div",{className:"h-text-md h-margin-t-tiny h-margin-h-default",children:"Apply for a Citizens Pay Line of Credit for Xbox All Access in just one step."}),(0,i.jsx)(E.J,{"data-test":"rate-limit-popover",isOpen:r,placement:"top",role:"tooltip",target:"apply-now",toggle:n,variant:"warning",children:(0,i.jsxs)("span",{className:"h-text-grayDarkest",children:[a," "]})}),(0,i.jsx)(j.D,{className:"h-margin-t-jumbo","data-test":"apply-now",disabled:!d||!v,id:"apply-now",isFullWidth:!0,onClick:C("new"),children:"Apply now with Citizens Pay"}),(0,i.jsx)("div",{className:"h-margin-t-jumbo",children:"Already approved for Xbox All Access at Target?"}),(0,i.jsx)(x.o,{color:"onLight",disabled:!d||!v,onClick:C("returning"),children:"Look up your info"}),(0,i.jsxs)("div",{className:"h-display-flex h-padding-t-jumbo",children:[(0,i.jsx)(B.a,{className:"h-padding-t-tiny",style:{flex:"1 0 24px"},width:24}),(0,i.jsxs)("p",{className:"h-margin-l-default h-text-md h-text-grayMedium h-text-left",children:["If you previously made your Xbox All Access purchase at another retailer and want to upgrade to a new console, please select ",(0,i.jsx)("b",{children:"Apply now with Citizens Pay"})]})]}),(0,i.jsxs)("div",{className:"h-text-grayMedium h-text-sm h-margin-t-jumbo h-text-left",children:["^ With approval of Citizens Pay Line of Credit at 0% APR and 24-month term. Subject to individual credit approval. Taxes, shipping, and other charges are extra and may vary. See Citizens Pay Line of Credit Agreement at"," ",(0,i.jsx)(T.F,{href:"https://www.citizensbank.com/disclosures/XAA.aspx",children:"https://www.citizensbank.com/disclosures/XAA.aspx"})," ","for full terms and conditions. Citizens Pay Line of Credit Account offered by Citizens Bank, N.A."]})]})};V.displayName="XboxAllAccessApplyNowContent";let J=({storeId:e,tcin:t,type:r,shouldDefaultToOnlyInStock:n,closeAddToCartDrawer:l})=>r===v.Fp.FIND_IT_AT_ANOTHER_TARGET_STORE?(0,i.jsx)(w.w,{closeDrawer:l,shouldDefaultToOnlyInStock:n,tcin:t}):r===v.Fp.XBOX_ALL_ACCESS?(0,i.jsx)(V,{storeId:e}):r===v.Fp.CHOOSE_OPTIONS?(0,i.jsx)(C,{productId:t}):null;J.displayName="AddToCartDrawerContent";var Q=r(80900),Y=r(95114);let K=["overlayProps"];function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function et(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let er=({addToCartType:e,buttonPropsFromProvider:t,cartRequestParams:r,childOrStandaloneProduct:n,handleOverridingOrAddingTrackingFieldsToAddToCartClick:a,handleOverridingOrAddingTrackingFieldsToAddToCartSuccess:o,onCartAddSuccess:d,overrideDrawerBehavior:u,isIntentAware:p,renderButton:O,storeId:S,tcin:C})=>{var w;let[P,{open:A,close:E}]=(0,y.I)({type:"drawer",shouldStack:!0}),[j,{open:x}]=(0,h.L)({instance:"AddToCart",shouldStack:!0}),{0:T,1:D}=(0,l.useState)(),N=(0,l.useCallback)(e=>{var r;let{isXboxAllAccessSelected:n}=e;if(n){D(v.cZ.XBOX_ALL_ACCESS),A();return}null==t||null===(r=t.onClick)||void 0===r||r.call(t,e)},[t,A]),I=(0,l.useCallback)(()=>{D(v.cZ.CHECK_STORES),A()},[A]),k=(0,l.useCallback)(()=>{D(v.cZ.SHOW_IN_STOCK_STORES),A()},[A]),{productInformation:R,dispatch:L,cartResponse:B}=(0,Q.J)(),F=(0,l.useMemo)(()=>null==R?void 0:R[C],[R,C]),{trackChooseOptionsClick:$}=(0,Y.Kz)(R),z=(0,l.useCallback)(()=>{D(v.cZ.CHOOSE_OPTIONS),A(),$(C)},[A,C,$]),{push:M}=(0,b.useRouter)(),W=(0,l.useCallback)(()=>{let e=(0,g.Mw)(F);M(null!=e?e:`/p/-/-/A-${C}`)},[F,M,C]),{0:H,1:U}=(0,l.useState)(),G={isAdultBeverage:(0,g.C7)(null==R?void 0:R[null!==(w=null==H?void 0:H.tcin)&&void 0!==w?w:""])},Z=(0,l.useCallback)(async()=>{if(H){var e;null==t||null===(e=t.onClick)||void 0===e||e.call(t,H),U(void 0)}},[H,t]),q=(0,l.useCallback)(e=>{let r=(0,m.d5)(B);if(r){var n;null==t||null===(n=t.onClick)||void 0===n||n.call(t,e)}else L&&(U(e),L((0,f.mu)()),x())},[B,L,t,x]),X=(0,l.useCallback)(()=>D(void 0),[]),V=(0,l.useMemo)(()=>({CHECK_STORES:I,SHOW_IN_STOCK_STORES:k,DEFAULT:p?z:N,ADD_TO_CART:p?z:N,ADD_TO_CART_SECONDARY:z,CHOOSE_OPTIONS:z,PICK_IT_UP:N,PICK_UP_HERE:N,PICK_UP_HERE_FIATS:N,SEND_IT:N,SHIP_IT:N,SHIP_TO_STORE:N,SHIP_TO_STORE_FIATS:N,PREORDER_BUYABLE:N,LEARN_MORE:W,SHOP_COLLECTION:W,VIEW_DETAILS:W,DELIVER_IT:q}),[I,k,p,z,N,W,q]),ee=(0,l.useMemo)(()=>(0,c.Al)({addToCartStates:p?v.EG:v.FS,typeToClickHandlerMap:V,skipWithoutOnClick:!0}),[p,V]),er=(0,l.useMemo)(()=>({addToCartType:e,cartRequestParams:r,childOrStandaloneProduct:n,handleOverridingOrAddingTrackingFieldsToAddToCartClick:a,handleOverridingOrAddingTrackingFieldsToAddToCartSuccess:o,onCartAddSuccess:d,overrideDrawerBehavior:u}),[e,r,n,a,o,d,u]);if(!e)return null;let en=null==ee?void 0:ee[e],ei=O(en),el=null!=T?T:{},{overlayProps:ea}=el,es=(0,_.Z)(el,K);return(0,i.jsxs)(i.Fragment,{children:[ei,(0,i.jsxs)(s.zZ.Provider,{value:er,children:[(0,i.jsx)(P,et(et({},ea),{},{onAfterClose:X,children:(0,i.jsx)(J,et(et({storeId:S,tcin:C},es),{},{closeAddToCartDrawer:E}))})),(0,i.jsx)(j,{addToCartProps:G,onSuccess:Z})]})]})};function en(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ei(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?en(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):en(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}er.displayName="AddToCartButtonWrapper";let el=({"aria-label":e,cartItemId:t,cartRequestParams:r,childOrStandaloneProduct:n,customText:_,fieldGroups:y,handleOverridingOrAddingTrackingFieldsToAddToCartClick:h,handleOverridingOrAddingTrackingFieldsToAddToCartSuccess:m,intent:g,isIntentAware:b=!1,isFullWidth:O=!1,isQuantityPicker:S=!1,onCartAddSuccess:C,overrideBehavior:w,overrideDrawerBehavior:P,placementType:A,shouldPreferChildAddToCartButton:E=!1,size:j,storeId:x,tcin:T})=>{var D,N,I,k,R;let{addToCartOptions:L,dispatch:B,intentAwareAddToCartOptions:F,isGlobalIntentEnabled:$,profileResponse:z,productInformation:M,productMetadata:W,cartResponse:H,onCartAddOverrideCallback:U}=o(),G=(0,a.gz)(z),{cartRequestParams:Z,onCartAddSuccess:q,overrideDrawerBehavior:X}=null!==(D=(0,l.useContext)(s.zZ))&&void 0!==D?D:{},V=null!=C?C:q,J=null!=r?r:Z,Q=null!=P?P:X,Y=(0,c.N9)({tcin:T,productInformation:M}),K=null!=n?n:Y,ee=null!==(N=null==K?void 0:K.tcin)&&void 0!==N?N:null==K?void 0:null===(I=K.fulfillment)||void 0===I?void 0:I.product_id,et=(0,p.Be)(),en=!$||et||g?(0,c._R)({hasRedCard:G,intent:null!=g?g:$?et:void 0,product:K,overrideBehavior:w,shouldPreferChildAddToCartButton:E,productMetadata:null!==(k=null==W?void 0:W[null!=T?T:""])&&void 0!==k?k:{},originalTcin:T,cartResponse:H,isIntentAware:b}):v.VP.CHOOSE_OPTIONS,el=JSON.stringify(n);(0,l.useEffect)(()=>{if(T){if(w===d.TX.ENABLE_CHOOSE_OPTIONS_ONLY_MODE){el&&(null==B||B((0,f.xl)({childOrStandaloneProduct:JSON.parse(el),tcin:T})));return}return el?null==B||B((0,f.xl)({childOrStandaloneProduct:JSON.parse(el),tcin:T})):null==B||B((0,f.oA)(T)),()=>{null==B||B((0,f.Oi)(T,!!el))}}},[el,B,w,T]);let ea=b?F:L,es=null!==(R=null==ea?void 0:ea[en])&&void 0!==R?R:null==ea?void 0:ea[v.VP.DEFAULT],eo=null!=e?e:(0,c.Xf)({product:K,buttonProps:es,customText:_}),ed=(0,l.useCallback)(e=>{var r,n;let l=null!=ee?ee:T;if(!l||!es)return null;let a=null!==(r=null==e?void 0:e.shouldAllowCustomText)&&void 0!==r?r:es.shouldAllowCustomText,s=_&&a?_:null!==(n=null==e?void 0:e.text)&&void 0!==n?n:es.text;return(0,i.jsx)(u.F,ei(ei(ei({},es),e),{},{ariaLabel:eo,cartItemId:t,cartRequestParams:J,childOrStandaloneProduct:K,fieldGroups:y,handleOverridingOrAddingTrackingFieldsToAddToCartClick:h,handleOverridingOrAddingTrackingFieldsToAddToCartSuccess:m,id:`addToCartButtonOrTextIdFor${T}`,isFullWidth:O,isQuantityPicker:S,onCartAddOverrideCallback:U,onCartAddSuccess:V,overrideBehavior:w,overrideDrawerBehavior:Q,placementType:A,product:K,size:j,storeId:x,tcin:l,text:s}))},[eo,es,t,J,_,y,h,m,O,S,U,V,w,Q,A,K,ee,j,x,T]);return es&&T?(0,i.jsx)(er,{addToCartType:en,buttonPropsFromProvider:es,cartRequestParams:J,childOrStandaloneProduct:K,handleOverridingOrAddingTrackingFieldsToAddToCartClick:h,handleOverridingOrAddingTrackingFieldsToAddToCartSuccess:m,isIntentAware:b,onCartAddSuccess:V,overrideDrawerBehavior:Q,renderButton:ed,storeId:x,tcin:null!=ee?ee:T}):null};el.displayName="AddToCartButton"},51734:function(e,t,r){"use strict";r.d(t,{F:function(){return k}});var n=r(85893),i=r(67294),l=r(96722),a=r(22235),s=r(99093),o=r(45045),d=r(95199),u=r(37586),c=r(75074),p=r(60759),v=r(81982),f=r(72604),_=r(95457),y=r(36912),h=r(86990),m=r(69086),g=r(80900),b=r(89175),O=r(18446),S=r.n(O),C=r(41609),w=r.n(C),P=r(23680),A=r(75266),E=r(52415);let j=({addToCartType:e,hasLoadingSpinner:t,isFullWidth:r,onClick:l,size:a,tcin:s})=>{var o;let{0:u,1:c}=(0,i.useState)(),{cartResponse:p}=(0,g.J)(),f=(0,d.Z)(p),_=(0,y.yt)({addToCartType:e,cartItems:f,tcin:s}),h=(0,P.Jx)((0,A.nY)(_)),m=(0,A.DN)(_),b=(0,A.ut)(_);(0,i.useEffect)(()=>{(!w()(u)||w()(_))&&m===(null==u?void 0:u.cart_item_id)&&(m!==(null==u?void 0:u.cart_item_id)||S()(b,null==u?void 0:u.quantity))||c(_)},[u,m,null==u?void 0:u.cart_item_id,b,null==u?void 0:u.quantity,_,s]);let O=(0,A.ut)(u),C=(0,A.DN)(u),j=(0,A.VR)(u)||99,x=null!==(o=(0,A.ny)(u))&&void 0!==o?o:99,T=(0,i.useCallback)(({newQuantity:e,quantityPickerDropdownChangeType:t,quantityPickerDropdownQuantityDifference:r})=>{let n=v.ss.PUT;0===e&&(n=v.ss.DELETE),l({requestMethod:n,quantity:e,cartItemId:C,quantityPickerDropdownChangeType:t,quantityPickerDropdownQuantityDifference:r})},[C,l]);return(0,n.jsx)(E.l,{hasLoadingSpinner:t,isFullWidth:r,maxQuantity:Math.min(j,x),onClick:T,productName:h,quantity:O,size:a,valueSuffix:"in cart"})};j.displayName="QuantityPicker";var x=r(57790),T=r(14785);let D=({text:e,spinnerColor:t})=>{let{0:r,1:l}=(0,i.useState)(!1);return(0,x.K)(()=>{l(!0)},300),(0,n.jsx)(n.Fragment,{children:r?(0,n.jsx)(T.$,{className:"h-margin-h-default","data-test":"add-to-cart-spinner",size:"small",spinnerColor:t}):(0,n.jsx)("span",{children:e})})};D.displayName="AddToCartSpinner";var N=r(46225),I=r(26061);let k=({addToCartType:e,ariaLabel:t,buttonState:r,buttonType:O,cartItemId:S,cartRequestParams:C,childOrStandaloneProduct:w,dataTest:P,"data-test":A,fieldGroups:E,handleOverridingOrAddingTrackingFieldsToAddToCartClick:x,handleOverridingOrAddingTrackingFieldsToAddToCartSuccess:T,id:k,isQuantityDropdownBesideAddToCartButtonContextOverride:R,isQuantityPicker:L,isFullWidth:B,onCartAddSuccess:F,onCartAddOverrideCallback:$,onClick:z,placementType:M,product:W,hasLoaderOnDelay:H,size:U,storeId:G,overrideBehavior:Z,overrideDrawerBehavior:q,tcin:X,text:V})=>{var J,Q,Y,K;let ee=null!=A?A:P,{childPartNumber:et,customGiftCardAmount:er,isXboxAllAccessSelected:en,quantityOverride:ei,setQuantityOverride:el,isQuantityDropdownBesideAddToCartButtonEnabled:ea}=(0,b.S)(),{commonHandlerFunctionForAllAddToCartClicks:es,dispatch:eo,cartResponse:ed,fulfillmentVariables:eu={}}=(0,g.J)(),{store_id:ec}=eu,ep=(0,o.d5)(ed),ev=(0,d.Z)(ed),{isStickyAddToCart:ef}=(0,b.S)(),e_=(0,y.nh)({addToCartType:e,cartItems:ev,tcin:X,storeId:null!=G?G:ec}),ey=null!==(J=null==e_?void 0:e_.quantity)&&void 0!==J?J:0,eh="disabled"===r||Z===v.TX.DISABLE_WITH_CORRECT_BUTTON_TYPE,{0:em,1:eg}=(0,i.useState)(!1),{0:eb,1:eO}=(0,i.useState)(!1),eS=N.B.includes(e);(0,i.useEffect)(()=>{L&&eS&&eO(ey>0)},[ey,L,eS]);let eC=(0,u.GX)((0,c.TQ)(W)&&null!==(Q=null==W?void 0:W.parent)&&void 0!==Q?Q:W),ew=(0,u.GX)(W),eP=(0,I.y)({product:W,fulfillmentType:_.n[e]}),eA=Math.min(null!==(Y=null!=eC?eC:ew)&&void 0!==Y?Y:99,null!=eP?eP:99,99),eE=em?(0,n.jsx)(D,{spinnerColor:O===f.L$.secondary?void 0:"white",text:V}):V,ej=(0,i.useCallback)(e=>t=>{null==el||el(void 0),L&&eS&&eO(e!==v.ss.DELETE),null==F||F(t)},[L,eS,F,eO,el]),ex=(0,i.useCallback)(()=>{eg(!1)},[]),eT=(0,i.useCallback)(({requestMethod:t,quantity:r,cartItemId:n,quantityPickerDropdownChangeType:i,quantityPickerDropdownQuantityDifference:l})=>{let a=e===f.VP.DELIVER_IT&&!ep,s=en||a;if(L&&!s&&(eS?H&&eg(!0):eg(!1)),!em&&(H&&!s&&eg(!0),M&&(null==eo||eo((0,h.J5)(M))),z)){let a,s=q;L&&eb&&(s=v.In.SUPPRESS_CART_SUCCESS_DRAWER),L&&n?a=n:S&&(a=S),null==es||es({addToCartType:e,cartRequestParams:C,childOrStandaloneProduct:w,handleOverridingOrAddingTrackingFieldsToAddToCartClick:x,handleOverridingOrAddingTrackingFieldsToAddToCartSuccess:T,onCartAddSuccess:F,overrideDrawerBehavior:s}),z({onCartAddSuccess:ej(t),cartRequestParams:C,tcin:X,addToCartType:e,cartItemId:a,fieldGroups:E,handleOverridingOrAddingTrackingFieldsToAddToCartClick:x,handleOverridingOrAddingTrackingFieldsToAddToCartSuccess:T,placementType:M,onAfterAddToCartSettled:ex,formattedPrice:er,childPartNumber:et,addToCartRequestMethod:t,cartQuantity:null!=ei?ei:r,storeId:G,quantityPickerDropdownChangeType:i,quantityPickerDropdownQuantityDifference:l,isXboxAllAccessSelected:en,overrideDrawerBehavior:s})}},[e,S,C,ep,w,et,es,er,eo,E,ej,ex,x,T,H,em,L,eS,en,F,z,q,M,ei,eb,G,X]),eD=(0,p.yW)(W),eN=(0,i.useCallback)(async()=>{if($){eg(!0),await $({storeId:G,locationName:eD,tcin:X}),eg(!1);return}eT({})},[eT,eD,$,G,X]),eI=(0,i.useCallback)((e,t)=>{let r=Number.parseInt(t.value,10);null==el||el(r)},[el]),{screenSmMax:ek}=(0,l.l)();if("hidden"===r)return null;if(L&&eb)return(0,n.jsx)(j,{addToCartType:e,hasLoadingSpinner:em,isFullWidth:B,onClick:eT,size:U,tcin:X});if("text"===r)return(0,n.jsx)("div",{"aria-label":t,className:"h-text-orangeDark h-text-lg","data-test":ee,id:k,children:eE});if(O===f.L$.secondary)return(0,n.jsx)(a.P,{"aria-label":t,"data-test":ee,disabled:eh,id:k,isFullWidth:B,onClick:eN,size:U,children:eE});let eR=(0,I.f)(eA),eL=e=>(0,n.jsx)(m.$,{children:e});return(0,n.jsxs)("div",{style:{display:B?"flex":"inline-block"},children:[(void 0===R?ea:R)&&eS&&!eh?(0,n.jsx)(m._L,{boldValue:!0,defaultValue:null==eR?void 0:null===(K=eR[0])||void 0===K?void 0:K.value,isNative:ek,label:"Qty",onChange:eI,options:eR,renderPopoverInline:ef,size:U,valueRenderer:eL}):null,(0,n.jsx)(s.D,{"aria-label":t,"data-test":ee,disabled:eh,id:k,isFullWidth:B,onClick:eN,size:U,children:eE})]})};k.displayName="ButtonInternal"},19983:function(e,t,r){"use strict";r.d(t,{w:function(){return l}});var n=r(5152),i=r.n(n);let l=i()(()=>Promise.all([r.e(2298),r.e(2182),r.e(1765),r.e(2180)]).then(r.bind(r,88757)).then(e=>e.ModalContentFiatsDialog),{loadableGenerated:{webpack:()=>[88757]}});l.displayName="FiatsDialog"},52415:function(e,t,r){"use strict";r.d(t,{l:function(){return g}});var n=r(96026),i=r.n(n),l=r(85893),a=r(67294),s=r(96722),o=r(14785),d=r(65356),u=r(19521),c=r(56947);let p=`
  background-color: ${c.colors.palette.white};
  border-color: ${c.colors.palette.green.default};
  border-width: 2px;
  color: ${c.colors.palette.green.default};
  font-weight: bold;
`,v=`
  background-color: ${c.colors.palette.white};
  border-color: ${c.colors.palette.green.light};
  color: ${c.colors.palette.green.light};
`,f=u.ZP.span.withConfig({displayName:"styles__QuantityButton",componentId:"sc-1jvgdlo-0"})(["button{"," &:hover{","}&:active{","}&:focus{color:",";}}"],p,v,v,c.colors.palette.green.default),_=(0,u.ZP)(d.u).withConfig({displayName:"styles__StyledSelectCustom",componentId:"sc-1jvgdlo-1"})(["label{width:",";}"],e=>e.isFullWidth?"100%":"");var y=r(64335),h=r(89175);let m=e=>i()(e+1).map(e=>({label:e.toString(),value:e.toString()})),g=({hasLoadingSpinner:e,isFullWidth:t,maxQuantity:r,onClick:n,productName:i,quantity:d,size:u,valueSuffix:c})=>{let{0:p,1:v}=(0,a.useState)(),{screenSmMax:g}=(0,s.l)(),b=m(null!=r?r:99),{isStickyAddToCart:O}=(0,h.S)(),S=(0,a.useCallback)(async(e,t)=>{if(!(null!=t&&t.value))return;let r=Number.parseInt(t.value,10);if(d!==r){v(!0);let e=d&&r<d?y.a.DECREASING:y.a.INCREASING;await n({newQuantity:r,quantityPickerDropdownChangeType:e,quantityPickerDropdownQuantityDifference:d?Math.abs(r-d):void 0}),v(!1)}},[n,d]),C=(0,a.useCallback)(r=>(null!=e?e:p)?(0,l.jsx)(o.$,{className:"h-margin-h-default","data-test":"quantity-picker-spinner",spinnerColor:"green",style:t?{width:"28px"}:{width:"24px"}}):(0,l.jsxs)("span",{"aria-label":i?`${r} ${c} for ${i}`:"",children:[r," ",c]}),[p,t,e,i,c]);return(0,l.jsx)(f,{"data-test":"quantity-picker",children:(0,l.jsx)(_,{arrowLabelValue:p?"":void 0,boldLabel:!0,"data-test":"custom-quantity-picker",defaultValue:null==d?void 0:d.toString(),id:"quantityPicker",isFullWidth:t,isNative:g,onChange:S,options:b,renderPopoverInline:O,shouldNotUpdateInternalState:!0,size:u,value:null==d?void 0:d.toString(),valueRenderer:C})})};g.displayName="QuantityPicker"},5941:function(e,t,r){"use strict";r.d(t,{M:function(){return u},Rx:function(){return o},sv:function(){return s},uo:function(){return d}});var n,i,l=r(15568),a=r(68454);let s="sdd_address_picker_hard_open",o="sdd_address_picker_soft_open",d={client_feature:l.H1.ADD_TO_CART,cart_type:"REGULAR",field_groups:[a.NIo.ADDRESSES]},u={address_type:["S","SB"],sdd:"shipt"};(n=i||(i={}))[n.VIEW_ADDRESS_AND_STORE_SCREEN=0]="VIEW_ADDRESS_AND_STORE_SCREEN",n[n.CHANGE_DELIVERY_ADDRESS=1]="CHANGE_DELIVERY_ADDRESS",n[n.CHANGE_DELIVERY_STORE=2]="CHANGE_DELIVERY_STORE",n[n.WARNING_MESSAGE=3]="WARNING_MESSAGE"},28442:function(e,t,r){"use strict";r.d(t,{L:function(){return l},c:function(){return i}});var n=r(67294);let i=(0,n.createContext)({addToCartProps:void 0,stagedDeliveryAddressId:"",stagedDeliveryStoreId:"",updateStagedDeliveryAddressId:void 0,updateStagedDeliveryStoreId:void 0,errorMessages:void 0,setErrorMessages:void 0,clearStagedFields:()=>{}});i.displayName="DeliveryAddressPickerContext";let l=()=>(0,n.useContext)(i)},48245:function(e,t,r){"use strict";r.d(t,{L:function(){return et}});var n=r(59499),i=r(4730),l=r(85893),a=r(67294),s=r(80564),o=r(10410),d=r(99093),u=r(14785),c=r(22235),p=r(15568),v=r(45045),f=r(76153),_=r(74071),y=r(46879),h=r(91560),m=r(5152),g=r.n(m);let b=g()(()=>Promise.all([r.e(2298),r.e(2652),r.e(2182),r.e(8193),r.e(9435)]).then(r.bind(r,26589)).then(e=>e.DeliveryAddressDrawer),{loadableGenerated:{webpack:()=>[26589]}});b.displayName="DeliveryAddressDrawer";var O=r(28442);let S=["DrawerInnerComponent","children"];function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let P=e=>{let{DrawerInnerComponent:t,children:r}=e,n=(0,i.Z)(e,S),{clearStagedFields:a}=(0,O.L)();return(0,l.jsx)(t,w(w({},n),{},{onAfterClose:a,children:r}))};P.displayName="DrawerInner";var A=r(64647),E=r.n(A),j=r(35216),x=r(44350),T=r(23451),D=r(27404),N=r(47269),I=r(78028),k=r(68454),R=r(31178),L=r(51142),B=r(42642),F=r(50472);let $=e=>{let{address:t,profile_address_id:r,cart_address_id:n,cart_subchannel:i,cart_type:l=F.EI.REGULAR,scheduled_delivery_location_id:a,skip_verification:s=!0,save_to_profile:o=!1,selected:d=!1,field_groups:u=[k.NIo.CART,k.NIo.CART_ITEMS,k.NIo.SUMMARY,k.NIo.PROMOTION_CODES,k.NIo.ADDRESSES]}=null!=e?e:{},{baseUrl:c,apis:{webCheckoutsV1:p},apiKey:v}=(0,x.config)().services.carts,f=(0,B.Nv)(),_=N.Z.buildURLWithParams(`${p.endpointPaths.cartShippingAddresses}${n?`/${n}`:""}`,{field_groups:u.join(","),key:v},c);return(0,T.gz)(_,{credentials:"include",headers:{"x-application-name":"web"},body:JSON.stringify({address:t,cart_subchannel:i,cart_type:l,profile_address_id:r,scheduled_delivery_location_id:a,skip_verification:s,save_to_profile:o,selected:d,channel_id:f}),errorTag:a?"update_cart_delivery_address_and_store_error":(0,I.k)(n?R.sq:R.rH),timerTag:a?"update_cart_delivery_address_and_store_call":(0,I.y)(n?R.sq:R.rH),errorFields:e=>e instanceof D.q4?(0,L.W)(e):{}})},{useMutation:z}=(0,j.F)({name:"@web/domain-cart/update-address-in-cart",mutationFn:async e=>{let{data:t}=await $(e);return t}});var M=r(17961),W=r(45057),H=r(59540);let U=(0,H.N)()(e=>{let{requestParams:t}=null!=e?e:{},{baseUrl:r,apis:{guestProfileAddressV1:n},apiKey:i}=(0,x.config)().services.apiPlatform,l=N.Z.buildURLWithParams(new URL(`${n.endpointPaths.addresses}/${t.address_id}`,r),{sdd:t.sdd,key:i});return{fetch:()=>(0,T.r$)(l,{credentials:"include",headers:{Accept:"application/json"},body:JSON.stringify({guest_selected_store:t.guest_selected_store}),timerTag:"delivery_address_patch_guest_preferred_store_call",errorTag:"delivery_address_patch_guest_preferred_store_error"}),url:l,options:e}}),{useMutation:G}=(0,j.F)({name:"@web/domain-guest/patch-guest-profile-address",mutationFn:async e=>{let t=U({requestParams:e}),{data:r,ok:n,statusText:i}=await t.fetch();if(n)return r;throw Error(`${i}`)}});(0,M.t)(G,{minimumAssuranceLevel:W.Jr});let Z={S:"SHIPPING",B:"BILLING",SB:"BOTH"},q=e=>{var t,r;if(!e)return{};let n=null!==(t=e.phone_number)&&void 0!==t?t:"",i=e.address_type?Z[e.address_type]:Z.S;return{address_line1:e.address_line1,address_line2:e.address_line2,address_type:i,city:e.city,country:null!==(r=e.country)&&void 0!==r?r:"US",delivery_instructions:e.delivery_instructions,first_name:e.first_name,last_name:e.last_name,mobile:n?n.replaceAll("-",""):n,save_as_default:!!e.default_address,state:e.state,zip_code:e.zip_code}},X=({stagedDeliveryAddressId:e,stagedDeliveryStoreId:t,onSuccess:r,setErrorMessages:n})=>{var i;let[l]=G(),[s,{isLoading:o}]=z(),[d]=(0,f.G)({address_id:e,sdd:"shipt"},{enabled:!!e}),u=d(_.ip),c=null===(i=(0,_.Oo)(u))||void 0===i?void 0:i.find(e=>(0,_.e7)(e)===t),v=(0,a.useCallback)(async()=>{if(!u){n([{id:"generic-error",label:"An unexpected error occurred. Please try again"}]);return}let e=await s({address:q(u),scheduled_delivery_location_id:t,profile_address_id:null==u?void 0:u.address_id});E()(e)?n([{id:"generic-error",label:"An unexpected error occurred. Please try again"}]):(await (0,h.Dm)(p.CM,{cart_type:"REGULAR"}),null==r||r(),null!=u&&u.address_id&&c&&(0,_.e7)(c)!==(0,_.e7)((0,_.ay)(u))&&l({address_id:null==u?void 0:u.address_id,guest_selected_store:c,sdd:"shipt"}))},[u,s,t,n,r,c,l]);return[v,{isLoading:o}]};var V=r(5941);let J=new Set,Q=({openDrawer:e,instance:t})=>{let r=[V.sv,V.Rx].some(e=>{var r,n;return new URL(null===(r=window)||void 0===r?void 0:null===(n=r.location)||void 0===n?void 0:n.href).searchParams.get(e)===t}),[n,i]=(0,p.CM)(V.uo,{enabled:r}),l=n(v.d5);(0,a.useEffect)(()=>{if(!J.has(t)&&(i.isSuccess||i.isError)&&r){var n,a,s,o,d;(null!==(n=window)&&void 0!==n&&null!==(a=n.location)&&void 0!==a&&null!==(s=a.href)&&void 0!==s&&s.includes(V.sv)||!l)&&(J.add(t),e());let r=new URL(null===(o=window)||void 0===o?void 0:null===(d=o.location)||void 0===d?void 0:d.href);r.searchParams.delete(V.sv),r.searchParams.delete(V.Rx),window.history.replaceState(null,"",r.toString())}},[t,e,l,i.isSuccess,i.isError,r])},Y=["instance"];function K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let et=e=>{let{instance:t}=e,r=(0,i.Z)(e,Y),[n,m]=(0,s.I)(ee(ee({},r),{},{type:"drawer"})),{close:g,open:S}=m;n.displayName="DeliveryAddressOverlay",Q({openDrawer:S,instance:t});let{isShown:C}=m;(0,a.useEffect)(()=>{C&&(0,h.Dm)(p.CM,V.uo)},[C]);let w=({onSuccess:e,addToCartProps:r})=>{let[i]=(0,p.CM)(V.uo),s=i(v.dT),{0:h,1:m}=(0,a.useState)(""),{0:S,1:C}=(0,a.useState)(""),{0:w,1:A}=(0,a.useState)([]),E=(0,y.zy)(),[j,{isLoading:x}]=X({stagedDeliveryAddressId:h,stagedDeliveryStoreId:S,onSuccess:e,setErrorMessages:A}),T=(0,a.useCallback)(()=>{m(""),C("")},[m,C]),D=(0,a.useCallback)(async()=>{await j(),g()},[j]),[N]=(0,f.G)({address_id:h,sdd:"shipt"},{enabled:!!h}),I=N(_.ip),k=(0,_.Jq)(I,null==r?void 0:r.isAdultBeverage),R=(0,a.useMemo)(()=>{var e;return null!==(e=(0,_.Oo)(I,null==r?void 0:r.isAdultBeverage))&&void 0!==e?e:[]},[I,null==r?void 0:r.isAdultBeverage]),L=(0,a.useCallback)(e=>!!(null==R?void 0:R.find(t=>(0,_.e7)(t)===e)),[R]),B=L(S);return(0,l.jsx)(O.c.Provider,{value:{stagedDeliveryAddressId:h,stagedDeliveryStoreId:S,updateStagedDeliveryAddressId:m,updateStagedDeliveryStoreId:C,setErrorMessages:A,errorMessages:w,clearStagedFields:T,addToCartProps:ee(ee({},r),{},{isAdultBeverage:!!(null==r?void 0:r.isAdultBeverage)||s})},children:(0,l.jsx)(P,{DrawerInnerComponent:n,headingText:"Same Day Delivery",renderCellButton:E?(0,l.jsx)(o.q,{className:"h-padding-a-default",children:k&&B?(0,l.jsx)(d.D,{"data-test":"continue-button",isFullWidth:!0,onClick:D,children:x?(0,l.jsx)(u.$,{size:"small",spinnerColor:"white"}):"Continue"}):(0,l.jsx)(c.P,{"data-test":"go-back-button",isFullWidth:!0,onClick:g,children:"Go back"})}):null,scroll:"content",children:(0,l.jsx)(b,{instance:t})})})};w.displayName="DeliveryAddressDrawer";let A=(0,a.useCallback)(w,[n,g,t]);return(0,a.useMemo)(()=>[A,m],[A,m])}},51142:function(e,t,r){"use strict";r.d(t,{W:function(){return i}});let n=e=>{let{alerts:t=[],code:r}=null!=e?e:{};return{alertCodes:null==t?void 0:t.map(({code:e}={})=>e).join(","),code:r}},i=e=>{var t,r,i;let l={},{code:a,alertCodes:s}=n(e.response.data);return a&&(l.error=e,l.tgt={custom:{text:{1:a}}}),s&&(l.tgt={custom:{text:{2:s}}}),(null===(t=e.response)||void 0===t?void 0:t.status)===424&&null!==(r=e.response)&&void 0!==r&&r.data&&!a&&(null===(i=e.response)||void 0===i||delete i.data,l.error=e),l}},31178:function(e,t,r){"use strict";r.d(t,{E5:function(){return n},rH:function(){return i},sq:function(){return l}});let n="checkout_precheckout",i="checkout_add_shipping_address",l="checkout_update_shipping_address"},78028:function(e,t,r){"use strict";r.d(t,{k:function(){return i},y:function(){return n}});let n=(e,t)=>t?`${e}_api_call.${t}`:`${e}_api_call`,i=(e,t)=>t?`${e}_api_error.${t}`:`${e}_api_error`},76153:function(e,t,r){"use strict";r.d(t,{G:function(){return f}});var n=r(25682),i=r(20025),l=r(59499),a=r(44350),s=r(23451),o=r(47269),d=r(59540);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}let c=(0,d.N)()(e=>{let{fetchOptions:t,requestParams:r}=null!=e?e:{},{baseUrl:n,apis:{guestProfileAddressV1:i},apiKey:d}=(0,a.config)().services.apiPlatform,c=o.Z.buildURLWithParams(new URL(`${i.endpointPaths.addresses}/${r.address_id}`,n),{sdd:r.sdd,key:d});return{fetch:()=>(0,s.U2)(c,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach(function(t){(0,l.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},t)),url:c,options:e}}),p="@web/domain-guest/get-guest-profile-address-by-id",{useQuery:v}=(0,n.J)({name:p,disableOnServer:!0,queryFn:async e=>{let t=c({requestParams:e,fetchOptions:{credentials:"include",timerTag:(null==e?void 0:e.sdd)==="shipt"?"delivery_address_with_sdd_params_api_call":p,errorTag:(null==e?void 0:e.sdd)==="shipt"?"delivery_address_with_sdd_params_api_error":p}}),{data:r,ok:n,statusText:i}=await t.fetch();if(n)return null!=r?r:null;throw Error(`${i}`)}}),f=(0,i.H)(v)},55198:function(e,t,r){"use strict";r.d(t,{Bd:function(){return a},Ig:function(){return s},up:function(){return l},ur:function(){return i}});var n=r(75074);let i=e=>(0,n.IX)(e)?void 0:null==e?void 0:e.service_offering_providers,l=e=>{var t;return null===(t=i(e))||void 0===t?void 0:t[0]},a=e=>{var t,r,n;let[l]=null!==(t=i(e))&&void 0!==t?t:[];return(null==l?void 0:null===(r=l.service_offering_category)||void 0===r?void 0:r.toLowerCase())==="subscription"&&(null==l?void 0:null===(n=l.service_provider_name)||void 0===n?void 0:n.toLowerCase())==="microsoft"},s=e=>{var t;let r=l(e);return null==r?void 0:null===(t=r.fulfillment_info)||void 0===t?void 0:t.is_exclusive_fulfillment}},57790:function(e,t,r){"use strict";r.d(t,{K:function(){return a}});var n=r(50308),i=r.n(n),l=r(67294);function a(e,t){let r=(0,l.useRef)(i()),n=(0,l.useRef)();(0,l.useEffect)(()=>{r.current=e},[e]),(0,l.useEffect)(()=>{if(t&&void 0===n.current)return n.current=window.setTimeout(()=>{r.current()},t),()=>{window.clearTimeout(n.current),n.current=void 0}},[t])}},91238:function(e,t,r){"use strict";r.d(t,{O:function(){return i}});var n=r(67294);function i(e=!1){let{0:t,1:r}=(0,n.useState)(e),i=(0,n.useCallback)(()=>r(e=>!e),[]);return[t,i]}},39515:function(e,t,r){"use strict";r.d(t,{o:function(){return o}});var n=r(19521),i=r(56947),l=r(55163),a=r(48717);let s=({size:e="md"})=>{switch(e){case"sm":return`
        font-size: ${i.font.size.text.small};
      `;case"md":return`
        font-size: ${i.font.size.text.medium};
        `;case"lg":return`
        font-size: ${i.font.size.text.base};
      `;default:return`
          font-size: ${i.font.size.text.medium};
        `}},o=(0,n.ZP)(a.Yd).withConfig({displayName:"styles__ButtonTertiary",componentId:"sc-1xye60r-0"})([""," ",";&:hover{","}&:active{","}&:disabled{",";&:hover{",";}}"],l.WU,s,l.A8,l.Pw,l.WU,l.WU)}}]);