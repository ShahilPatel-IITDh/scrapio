"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1728,8832],{36948:function(e,t,i){i.d(t,{qk:function(){return a},vh:function(){return s},yJ:function(){return n}});var n=6e4,s=36e5,a=1e3},23855:function(e,t,i){i.d(t,{Z:function(){return r}});var n=i(36948),s=i(13882),a=i(83946);function r(e,t){(0,s.Z)(1,arguments);var i,r,x,f=(0,a.Z)(null!==(i=null==t?void 0:t.additionalDigits)&&void 0!==i?i:2);if(2!==f&&1!==f&&0!==f)throw RangeError("additionalDigits must be 0, 1 or 2");if(!("string"==typeof e||"[object String]"===Object.prototype.toString.call(e)))return new Date(NaN);var g=function(e){var t,i={},n=e.split(l.dateTimeDelimiter);if(n.length>2)return i;if(/:/.test(n[0])?t=n[0]:(i.date=n[0],t=n[1],l.timeZoneDelimiter.test(i.date)&&(i.date=e.split(l.timeZoneDelimiter)[0],t=e.substr(i.date.length,e.length))),t){var s=l.timezone.exec(t);s?(i.time=t.replace(s[1],""),i.timezone=s[1]):i.time=t}return i}(e);if(g.date){var b=function(e,t){var i=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(i);if(!n)return{year:NaN,restDateString:""};var s=n[1]?parseInt(n[1]):null,a=n[2]?parseInt(n[2]):null;return{year:null===a?s:100*a,restDateString:e.slice((n[1]||n[2]).length)}}(g.date,f);r=function(e,t){if(null===t)return new Date(NaN);var i,n,s=e.match(o);if(!s)return new Date(NaN);var a=!!s[4],r=m(s[1]),l=m(s[2])-1,d=m(s[3]),p=m(s[4]),c=m(s[5])-1;if(a)return p>=1&&p<=53&&c>=0&&c<=6?((i=new Date(0)).setUTCFullYear(t,0,4),n=i.getUTCDay()||7,i.setUTCDate(i.getUTCDate()+((p-1)*7+c+1-n)),i):new Date(NaN);var x=new Date(0);return l>=0&&l<=11&&d>=1&&d<=(u[l]||(h(t)?29:28))&&r>=1&&r<=(h(t)?366:365)?(x.setUTCFullYear(t,l,Math.max(r,d)),x):new Date(NaN)}(b.restDateString,b.year)}if(!r||isNaN(r.getTime()))return new Date(NaN);var v=r.getTime(),y=0;if(g.time&&isNaN(y=function(e){var t=e.match(d);if(!t)return NaN;var i=c(t[1]),s=c(t[2]),a=c(t[3]);return(24===i?0===s&&0===a:a>=0&&a<60&&s>=0&&s<60&&i>=0&&i<25)?i*n.vh+s*n.yJ+1e3*a:NaN}(g.time)))return new Date(NaN);if(g.timezone){if(isNaN(x=function(e){if("Z"===e)return 0;var t=e.match(p);if(!t)return 0;var i="+"===t[1]?-1:1,s=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;return a>=0&&a<=59?i*(s*n.vh+a*n.yJ):NaN}(g.timezone)))return new Date(NaN)}else{var w=new Date(v+y),N=new Date(0);return N.setFullYear(w.getUTCFullYear(),w.getUTCMonth(),w.getUTCDate()),N.setHours(w.getUTCHours(),w.getUTCMinutes(),w.getUTCSeconds(),w.getUTCMilliseconds()),N}return new Date(v+y+x)}var l={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},o=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,d=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,p=/^([+-])(\d{2})(?::?(\d{2}))?$/;function m(e){return e?parseInt(e):1}function c(e){return e&&parseFloat(e.replace(",","."))||0}var u=[31,null,31,30,31,30,31,31,30,31,30,31];function h(e){return e%400==0||e%4==0&&e%100!=0}},22020:function(e,t,i){i.d(t,{o:function(){return o}});var n=i(19521),s=i(56947),a=i(20041),r=i(79087);let l=({size:e="md"})=>{switch(e){case"sm":return`
        font-size: ${s.font.size.text.small};
      `;case"md":return`
        font-size: ${s.font.size.text.medium};
        `;case"lg":return`
        font-size: ${s.font.size.text.base};
      `;default:return`
          font-size: ${s.font.size.text.medium};
        `}},o=(0,n.ZP)(r.Yd).withConfig({displayName:"styles__ButtonTertiary",componentId:"sc-1xye60r-0"})([""," ",";&:hover{","}&:active{","}&:disabled{",";&:hover{",";}}"],a.WU,l,a.A8,a.Pw,a.WU,a.WU)},65197:function(e,t,i){i.d(t,{V:function(){return h}});var n=i(85893),s=i(18079),a=i(19521),r=i(56947),l=i(58310);let o={white:r.colors.palette.gray.light,black:r.colors.palette.black},d={white:r.colors.palette.white,black:r.colors.palette.black},p={white:r.colors.palette.gray.darkest,black:r.colors.palette.white},m={white:r.colors.palette.red.default,black:r.colors.palette.white},c=a.ZP.span.withConfig({displayName:"styles__StyledRibbon",componentId:"sc-1vpmz0u-0"})([""," position:relative;display:inline-flex;align-items:center;overflow:hidden;padding:3px 14px 3px ",";color:",";background:",";border-radius:4px 0 0 4px;border:1px solid ",";border-right:0;font-size:",";clip-path:polygon(0 0,0 100%,100% 100%,calc(100% - 6px) 50%,100% 0);&::after{position:absolute;top:-1px;right:0;height:calc(100% + 2px);width:7px;display:block;background:",";content:'';clip-path:polygon( calc(100% - 1px) 0,100% 0,1px 50%,100% 100%,calc(100% - 1px) 100%,0 50% );}"],(0,l.Bs)(),r.space.generic.x2,e=>p[e.variant],e=>d[e.variant],e=>o[e.variant],r.font.size.text.small,e=>o[e.variant]),u=a.ZP.span.withConfig({displayName:"styles__BullseyeGlyphWrapper",componentId:"sc-1vpmz0u-1"})(["color:",";font-size:",";line-height:1;margin-left:",";"],e=>m[e.variant],r.font.size.text.base,r.space.generic.x1),h=({ariaHidden:e=!1,children:t,className:i,"data-test":a="ribbon",hasBullseye:r=!1,variant:l="white"})=>(0,n.jsxs)(c,{"aria-hidden":e,className:i,"data-test":a,variant:l,children:[t,r&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.uy,{children:" target"}),(0,n.jsx)(u,{"aria-hidden":!0,"data-test":"ribbon-bullseye-glyph",variant:l,children:"\xac"})]})]});h.displayName="Ribbon"},72694:function(e,t,i){i.r(t),i.d(t,{TargetCircleBonusCard:function(){return eh}});var n=i(85893),s=i(67294),a=i(43430),r=i(17619),l=i(22020),o=i(55446),d=i(64334),p=i(23855),m=i(42298),c=i(11163),u=i(97604),h=i(20025),x=i(25682),f=i(44350),g=i(37673),b=i(47269);let{useQuery:v}=(0,x.J)({name:"@circle/domains/get-missions",defaultOptions:{staleTime:1e4},queryFn:async()=>{let{baseUrl:e,apis:{loyaltyMissions:t},apiKey:i}=(0,f.config)().services.apiPlatform,n=b.Z.buildURLWithParams(new URL(t.endpointPaths.v1,e),{client:"web"}),{data:s,ok:a,statusText:r}=await (0,g.U2)(n,{headers:{"x-api-key":i},credentials:"include"});if(a)return null!=s?s:null;throw Error(`${r}`)}}),y=(0,h.H)(v);var w=i(68697);let N=(0,w.P1)(e=>e,e=>{var t,i,n,s,a,r,l;let o=null!=e?e:{missions:[]},d=null!==(t=null==o?void 0:o.missions)&&void 0!==t?t:[],m=d.filter(e=>"INPROGRESS"===e.status||"NOTSTARTED"===e.status);if(m.length>0){let e=null!==(s=null===(a=m)||void 0===a?void 0:a[0])&&void 0!==s?s:[];return e}if((m=d.filter(e=>"COMPLETED"===e.status)).length>0){m.sort((e,t)=>t.date_completed>e.date_completed?1:-1);let e=null!==(r=null===(l=m)||void 0===l?void 0:l[0])&&void 0!==r?r:[],t=new Date,i=(0,p.Z)(e.date_completed);if(t.getTime()-i.getTime()<2592e6)return e;m=[]}let c=null!==(i=null===(n=m)||void 0===n?void 0:n[0])&&void 0!==i?i:void 0;return c});var C=i(19521),S=i(56947);let{x1:j,x2:_,x4:k,x5:O,x6:$}=S.space.generic,{gray:D}=S.colors.palette;S.breakpoints.smMax,S.font.weight.bold,S.font.size.hero.level4;let T=C.ZP.ol.withConfig({displayName:"styles__SmallCardBonusStepsWrapper",componentId:"sc-1gc8cx6-2"})(["display:flex;flex-wrap:wrap;justify-content:",";width:",";min-width:",";"],e=>e.numberOfSteps<=4||e.numberOfSteps>=7?"center":"space-evenly",e=>9===e.numberOfSteps||6===e.numberOfSteps?"280px":"250px",e=>9===e.numberOfSteps||6===e.numberOfSteps?"266px":"250px"),z=C.ZP.li.withConfig({displayName:"styles__SmallCardBonusStep",componentId:"sc-1gc8cx6-3"})(["border:solid 1px ",";background-color:",";border-radius:50%;width:40px;height:40px;margin-top:",";display:flex;align-items:center;justify-content:center;margin-right:",";:nth-child(4n){margin-right:",";}:nth-child(5n){margin-right:",";}&:last-child{margin-right:0;}"],e=>e.isCompleted?"#720000":D.medium,e=>e.isCompleted?"#720000":D.lightest,_,e=>e.numberOfSteps<=4||e.numberOfSteps>=7?`${k}`:"0",e=>8===e.numberOfSteps||7===e.numberOfSteps?"0":void 0,e=>9===e.numberOfSteps||6===e.numberOfSteps?"0":`${k}`),I=C.ZP.ol.withConfig({displayName:"styles__LargeCardBonusStepsWrapper",componentId:"sc-1gc8cx6-4"})(["display:flex;flex-wrap:wrap;"]),P=C.ZP.li.withConfig({displayName:"styles__LargeCardBonusStep",componentId:"sc-1gc8cx6-5"})(["border:solid 1px ",";background-color:",";border-radius:50%;width:40px;height:40px;margin:"," "," 0 0;display:flex;align-items:center;justify-content:center;@media (min-width:","){width:50px;height:50px;}@media (min-width:","){width:60px;height:60px;}"],e=>e.isCompleted?"#720000":D.medium,e=>e.isCompleted?"#720000":D.lightest,k,k,S.breakpoints.md,S.breakpoints.lg);function Z({numberOfSteps:e,stepsCompleted:t,isSmallView:i=!1,isInFlyout:s=!1}){let a=Array.from({length:e}).map((e,i)=>({stepNumber:i+1,isCompleted:i<t}));return(0,n.jsxs)(n.Fragment,{children:[(s||i)&&(0,n.jsx)("div",{className:"h-display-flex h-flex-justify-center","data-test":"bonus-step-circles",children:(0,n.jsx)(T,{numberOfSteps:e,children:a.map(t=>(0,n.jsxs)(z,{"data-test":"bonus-step-circle",isCompleted:t.isCompleted,numberOfSteps:e,children:[(0,n.jsx)("div",{className:"h-sr-only",children:`step ${t.stepNumber} - ${t.isCompleted?"completed":"incomplete"}`},t.stepNumber),(0,n.jsx)("div",{"aria-hidden":!0,className:"h-text-bold",children:t.isCompleted?(0,n.jsx)(u.i,{"aria-label":"",fill:"#fff",size:"24px"}):(0,n.jsx)("p",{children:t.stepNumber})})]},t.stepNumber))})}),!s&&!i&&(0,n.jsx)(I,{"data-test":"bonus-step-circles",children:a.map(t=>(0,n.jsxs)(P,{"data-test":"bonus-step-circle",isCompleted:t.isCompleted,numberOfSteps:e,children:[(0,n.jsx)("div",{className:"h-sr-only",children:`step ${t.stepNumber} - ${t.isCompleted?"completed":"incomplete"}`},t.stepNumber),(0,n.jsx)("div",{"aria-hidden":!0,className:"h-text-bold",children:t.isCompleted?(0,n.jsx)(u.i,{"aria-label":"",fill:"#fff",size:"32px"}):(0,n.jsx)("p",{children:t.stepNumber})})]},t.stepNumber))})]})}S.font.weight.bold,S.font.size.hero.level4,Z.displayName="BonusSteps";let B="COMPLETED",E="EXPIRED",U="ELIGIBLE",F="OPTED-IN",R="/circle/bonus";var W=i(65197);let{x2:M,x3:L,x4:V,x5:A,x6:Y,x10:G}=S.space.generic,{white:J,green:H,gray:q}=S.colors.palette,{text:K}=S.font.size,X=(0,C.F4)(["0%{opacity:1;}50%{opacity:0.3;}100%{opacity:1;}"]),Q=e=>(0,C.iv)(["animation-name:",";animation-duration:",";animation-timing-function:ease-in-out;animation-iteration-count:infinite;"],X,e||"1s"),ee=C.ZP.div.withConfig({displayName:"styles__BonusCardWrapper",componentId:"sc-tuubvx-0"})(["display:flex;flex-direction:row;justify-content:space-between;background-color:",";padding:",";border-radius:",";box-shadow:0 2px 5px rgb(0 0 0 / 10%);margin-bottom:",";margin-top:",";@media (min-width:","){padding:"," ",";}@media (max-width:","){margin:",";width:inherit !important;}"],J,A,S.border.radius.x2,V,V,S.breakpoints.lg,Y,G,S.breakpoints.xl,V),et=C.ZP.div.withConfig({displayName:"styles__BonusCardPlaceholder",componentId:"sc-tuubvx-1"})(["border-radius:",";margin:",";height:155px;background-color:",";",";"],S.border.radius.x2,V,q.lightest,Q("1500ms")),ei=C.ZP.div.withConfig({displayName:"styles__BonusImageContainer",componentId:"sc-tuubvx-2"})(["min-width:80px;position:relative;margin-right:",";@media (min-width:","){min-width:100px;}"],V,S.breakpoints.lg),en=C.ZP.p.withConfig({displayName:"styles__BonusDescriptionText",componentId:"sc-tuubvx-3"})(["max-width:560px;font-size:",";@media (min-width:","){font-size:",";}"],K.medium,S.breakpoints.lg,K.base),es=C.ZP.div.withConfig({displayName:"styles__BonusActivationContainer",componentId:"sc-tuubvx-4"})(["margin:"," 0 0 ",";@media (min-width:","){min-width:140px;margin-top:",";}"],M,V,S.breakpoints.lg,A),ea=C.ZP.div.withConfig({displayName:"styles__LargeProgressWrapper",componentId:"sc-tuubvx-5"})(["max-width:",";width:",";@media (min-width:","){min-width:",";width:",";}@media (min-width:","){min-width:",";width:",";}"],e=>6===e.numberOfSteps?"230px":7===e.numberOfSteps||8===e.numberOfSteps?"305px":"430px",e=>e.numberOfSteps>3?"45%":void 0,S.breakpoints.md,e=>e.numberOfSteps<4||5===e.numberOfSteps||6===e.numberOfSteps||9===e.numberOfSteps?"200px":7===e.numberOfSteps||8===e.numberOfSteps?"265px":void 0,e=>e.numberOfSteps>3?"85%":void 0,S.breakpoints.lg,e=>e.numberOfSteps<4?"230px":7===e.numberOfSteps||8===e.numberOfSteps?"305px":9===e.numberOfSteps?"380px":void 0,e=>e.numberOfSteps>3?"75%":void 0),er=C.ZP.div.withConfig({displayName:"styles__SmallBonusCardPlaceholder",componentId:"sc-tuubvx-6"})(["border-radius:",";height:230px;margin:",";background-color:",";",";"],S.border.radius.x2,V,q.lightest,Q("1500ms")),el=C.ZP.div.withConfig({displayName:"styles__SmallViewBonusCardWrapper",componentId:"sc-tuubvx-7"})(["position:relative;display:flex;flex-direction:column;background-color:",";padding:",";border-radius:",";margin:",";box-shadow:0 3px 4px rgb(0 0 0 / 4%),0 1px 2px rgb(0 0 0 / 4%),0 -1px 2px rgb(0 0 0 / 4%);"],J,V,S.border.radius.x3,V),eo=C.ZP.div.withConfig({displayName:"styles__SmallViewBonusImageContainer",componentId:"sc-tuubvx-8"})(["min-width:60px;"]),ed=C.ZP.div.withConfig({displayName:"styles__SmallViewBonusActivationContainer",componentId:"sc-tuubvx-9"})(["display:flex;align-items:center;color:",";font-size:",";margin-top:",";"],H,K.medium,L),ep=(0,C.ZP)(d.D).withConfig({displayName:"styles__SmallViewBonusActivateButton",componentId:"sc-tuubvx-10"})(["max-width:320px;margin:"," auto 0;"],V),em=(0,C.ZP)(W.V).withConfig({displayName:"styles__BonusCardRibbon",componentId:"sc-tuubvx-11"})(["position:absolute;top:8px;left:-4px;"]),ec=(e,t,i)=>{var n,s,a,r,l;let o=null!==(n=null==t?void 0:null===(s=t.components)||void 0===s?void 0:s[0])&&void 0!==n?n:{};return{guest:{eventType:"componentload"},components:[{name:o.title,position:String(i),component:`${null!==(a=o.id)&&void 0!==a?a:""} || ${null!==(r=o.title)&&void 0!==r?r:""}`,componentType:o.type_name,contentType:o.content_type,linkName:`${null!==(l=o.id)&&void 0!==l?l:""} || ${e}`}]}},eu=(e,t,i)=>{var n,s,r,l,o;let d=null!==(n=null==t?void 0:null===(s=t.components)||void 0===s?void 0:s[0])&&void 0!==n?n:{},p={contentClick:{position:String(i),component:`${null!==(r=d.id)&&void 0!==r?r:""} || ${null!==(l=d.title)&&void 0!==l?l:""}`,componentType:d.type_name,contentType:d.content_type,linkName:`${null!==(o=d.id)&&void 0!==o?o:""} || ${e}`}};return(0,a.OK)(p),{guest:{eventType:"componentload"}}};function eh({metadata:e,order:t}){let[i,{isLoading:h,isSuccess:x,isError:f}]=y(),g=i(N),{screenSmMax:b,screenMdMax:v}=(0,r.l)(),w=(0,c.useRouter)(),C=(0,a.rS)(),S=(0,s.useCallback)(()=>{C.trackEvent(eu("bonus details",e,t)),w.push(`${R}${null!=g&&g.mission_id?`?bonus=${null==g?void 0:g.mission_id}`:""}`)},[C,e,t,w,null==g?void 0:g.mission_id]),j=(0,s.useCallback)(()=>{C.trackEvent(eu("activate bonus",e,t)),w.push(`${R}${null!=g&&g.mission_id?`?bonus=${null==g?void 0:g.mission_id}&activate=true`:""}`)},[C,e,t,w,null==g?void 0:g.mission_id]);if((0,s.useEffect)(()=>{if(x&&g){let i;i=(null==g?void 0:g.user_eligibility_status)===U?"bonus not opted in":(null==g?void 0:g.status)===B?"complete":"opted in",C.trackEvent(ec(i,e,t))}},[x,e,g,t,C]),!g||!h&&f)return null;let{days_left:_,date_completed:k,steps:O={total:0,completed:0},status:$,description:D,name:T,image_url:z,user_eligibility_status:I}=g,{total:P=0,completed:W=0}=O,M=`Great job! You completed this Bonus on ${k?(0,m.Z)((0,p.Z)(k),"MMMM d, yyyy"):"time"}.`,L=$!==B&&$!==E,V=_&&_<=1,A=_&&_<=7,Y=()=>{switch($){case B:return"Completed";case E:return"Expired";default:return V?`Expires today${b?"":":"}`:`${_} days left${b?"":":"}`}},G=(0,n.jsxs)(en,{children:[$===B?M:D," ",(0,n.jsx)(l.o,{"aria-label":"View Target Circle Bonus details",onClick:S,size:v?"md":"lg",children:"View details"})]});return(0,n.jsx)(n.Fragment,{children:b?(0,n.jsxs)(n.Fragment,{children:[h&&(0,n.jsx)(er,{}),x&&(0,n.jsxs)(el,{children:[(!A||!L)&&(0,n.jsxs)("div",{className:"h-display-flex h-flex-justify-space-between h-flex-align-center",children:[(0,n.jsx)(o.w,{className:"h-margin-r-tight",level:3,children:T}),(0,n.jsx)("p",{className:"h-text-grayDark h-text-right h-text-nowrap h-text-bold h-text-md h-padding-b-tight",children:Y()})]}),(0,n.jsxs)("div",{className:"h-display-flex h-margin-t-tiny",children:[(0,n.jsx)(eo,{children:(0,n.jsx)("img",{alt:"",className:L&&A?"h-margin-t-jumbo":"",height:"60",src:z,width:"60"})}),(0,n.jsxs)("div",{className:"h-margin-l-wide h-display-flex h-flex-direction-col",children:[L&&A&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.w,{level:3,children:T}),(0,n.jsx)(em,{"data-test":"bonus-card-ribbon",variant:V?"black":"white",children:V?"expires today":`${_} days left`})]}),(0,n.jsx)("div",{className:"h-margin-b-default",children:G})]})]}),(0,n.jsx)(Z,{isSmallView:!0,numberOfSteps:P,stepsCompleted:W}),I===F&&$!==E&&$!==B&&(0,n.jsx)(ed,{children:(0,n.jsxs)("div",{className:"h-text-green h-display-flex h-flex-align-center",children:[(0,n.jsx)(u.i,{size:"24px"})," ",(0,n.jsx)("p",{children:"Bonus activated"})]})}),I===U&&$!==E&&(0,n.jsx)(ep,{isFullWidth:!0,onClick:j,size:"sm",children:"Activate bonus"})]})]}):(0,n.jsxs)(n.Fragment,{children:[h&&(0,n.jsx)(et,{}),x&&(0,n.jsxs)(ee,{className:"l-container l-container-standard",children:[(0,n.jsx)(ei,{children:(0,n.jsx)("img",{alt:"",src:z,width:v?"80":"100"})}),(0,n.jsxs)("div",{className:"h-margin-h-default",children:[(0,n.jsx)(o.w,{className:"h-margin-b-default",level:3,size:v?4:3,children:T}),G]}),(0,n.jsxs)(ea,{numberOfSteps:P,children:[(0,n.jsx)("p",{className:`h-margin-b-tiny h-text-bold ${v?"h-text-bs":"h-text-lg"}`,children:Y()}),(0,n.jsx)(Z,{numberOfSteps:P,stepsCompleted:W})]}),(0,n.jsx)(es,{children:I&&(I===F?$!==E&&$!==B&&(0,n.jsxs)("div",{className:"h-text-center",children:[(0,n.jsx)(u.i,{size:v?"24px":"32px"}),(0,n.jsx)("p",{className:`h-text-green ${v?"h-text-md":"h-text-base"}`,children:"Bonus activated"})]}):$!==E&&(0,n.jsx)(d.D,{onClick:j,size:"md",children:"Activate bonus"}))})]})]})})}eh.displayName="TargetCircleBonusCard"}}]);