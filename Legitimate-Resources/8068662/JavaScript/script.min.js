function handleHiddenCreditCardName(n,t){n!=undefined&&n!=""&&(n=htmlDecode(n),$("#divCreditCardName").hide(),$("#divCCType").addClass("hidden"),$("#hdCcSelectedCardName").val(n),typeof SELECTEDCREDITCARDPRODUCT!="undefined"&&SELECTEDCREDITCARDPRODUCT!==null?$("#hdCcSelectedCardType").val(SELECTEDCREDITCARDPRODUCT.CreditCardType):$("#hdCcSelectedCardType").val("CREDIT"),t&&($("#divRequestCreditLimit").is(":visible")||$("#pl1 .aq-section .loanpage_ApplicantQuestion").length!=0?$("#pl1").find('div[class~="div-continue"]').show():($('#pl1 div[data-role="content"]').hide(),goToNextPage("#pl2"))))}function hasCNameParameter(){return $("#hdHasCNameParameter").val()=="Y"}function handleHiddenLoanPurpose(){var n=$('.divLoanPurposeList a[data-role="button"]'),t,i;($("#hdIsComboMode").val()=="Y"||n.length==0)&&(t=$("#divCreditCardName"),i=$("#pl1 .div-continue"),t.find("div[data-panel='cc-options']").length>0?(i.hide(),t.show()):(i.show(),t.hide()));n.length==1&&(n.trigger("click"),n.parent().hide())}function showAndHideComboCreditLimit(){var r;if($("#hdIsComboMode").val()=="Y"){var n=$("#txtComboCreditLimit"),t=JSON.parse(LoanPurposeCategory),i=!1;for(r in t)if(t[r].indexOf("LIMIT")!=-1){i=!0;break}i||(n.val(""),n.parent().hide(),n.parent().parent().prev().hide())}}function showAndHideCreditCardPage(){var r=$("#divCreditCardName"),i=r.find("div[data-panel='cc-options']"),n=$('.divLoanPurposeList a[data-role="button"]'),u=$("#hdCcSelectedLoanPurpose").val(),f=getSelectedCategory(u),t=!1;$("#hdIsComboMode").val()=="Y"?(i.length==0&&hiddenCCType()||hasCNameParameter())&&(t=!0):i.length==0&&(n.length==0||(n.length==1&&n.text().toUpperCase().indexOf("LIMIT"))==-1)&&(n.length==1&&n.trigger("click"),t=!0);($("#hdHasZipCodePool").val()=="Y"&&$("#hdIsComboMode").val()=="Y"||$("#hdHasCCZipCodePool").val()=="Y")&&(t=!1);$("#pl1 .aq-section .loanpage_ApplicantQuestion").length>0&&(t=!1);t&&($("#pl1").children().hide(),$('#pl1 div[data-role="footer"]').remove(),$("#pl2 a.div-goback").hide(),$("#pl2 .div-continue span").hide(),window.IST&&$.isEmptyObject(IST.DATA.PrefillData)?IST.FACTORY.loadCarrierIdentification(function(){IST.FACTORY.carrierIdentification()}):$("#hdIs2ndLoanApp").val()=="Y"?(RenderReviewContent(),goToNextPage("#pagesubmit")):goToNextPage("#pl2"))}function pagesubmitInit(){var n;if($("#divCcFundingOptions").find("a[data-value='NOT FUNDING AT THIS TIME']").parent().show(),$("#hdIsComboMode").val()==="Y"){$("#hdCcSelectedCardType").val().toUpperCase()==="SECUREDCREDIT"?(typeof loanProductFactory!="undefined"&&loanProductFactory!==null&&(loanProductFactory.isSecured=!0),$("#divCcFundingOptions").insertBefore("#divSecureCardFundingHolder"),$("#divCcFundingOptions").find("a[data-value='NOT FUNDING AT THIS TIME']").parent().hide(),$("#divCcFundingOptions").show(),$("#txtFundingDeposit").attr("readonly")&&(n=0,$("#hfLenderRef").val().toUpperCase().startsWith("SDFCU")&&(n=251),$("#txtFundingDeposit").val(Common.FormatCurrency(n,!0)),$("#txtFundingDeposit").removeAttr("readonly")),$("label[for='txtFundingDeposit']").hide(),typeof loanProductFactory!="undefined"&&loanProductFactory!==null&&loanProductFactory.removeAllDepositTextFields()):($("#divCcFundingOptions").insertBefore("#ccComboMarker"),$("#divSelectedProductPool").length==1&&loanProductFactory.hasFundedProducts()?(loanProductFactory.isSecured=!1,$("#divCcFundingOptions").show(),$("label[for='txtFundingDeposit']").show(),loanProductFactory.refreshDepositTextFields(),$("#txtFundingDeposit").val(Common.FormatCurrency(getTotalDeposit(),!0)),$("#txtFundingDeposit").attr("readonly")||$("#txtFundingDeposit").attr("readonly","readonly")):$("#divCcFundingOptions").hide(),$("#txtFundingDeposit").off("change").on("change",function(){Common.GetFloatFromMoney($(this).val())===0?$("#divCcFundingOptions").find("a[data-value='NOT FUNDING AT THIS TIME']").parent().show():$("#divCcFundingOptions").find("a[data-value='NOT FUNDING AT THIS TIME']").parent().hide()}).trigger("change"));$("#hfLenderRef").val().toUpperCase().startsWith("SDFCU")&&($("#hdCcSelectedCardType").val().toUpperCase()==="SECUREDCREDIT"?($("#lblMinDepositAmount").show(),n=Common.GetFloatFromMoney($("#txtFundingDeposit").val()),!$("#txtFundingDeposit").attr("readonly")&&n<251&&$("#txtFundingDeposit").val(Common.FormatCurrency(251,!0))):$("#lblMinDepositAmount").hide());var i=$("#divMembershipFee"),r=$("#txtFundingDeposit"),t=$("#divShowFOM div.btn-header-theme[data-fom-question='true'].active").attr("data-fom-name");updateMembershipFeeAndTotalDeposit(i,r,t);$("#divShowFOM div.btn-header-theme[data-fom-question='true']").off("change").on("change",function(){t=$(this).attr("data-fom-name");updateMembershipFeeAndTotalDeposit(i,r,t)})}$("a[data-command='proceed-membership']").off("click").on("click",function(){var n=$(this);$("div[data-section='proceed-membership']").find("a[data-command='proceed-membership']").each(function(){$(this).removeClass("active");handledBtnHeaderTheme($(this))});n.addClass("active");$("#hdProceedMembership").val(n.data("key"));$("div[data-section='proceed-membership']").trigger("change")});pushToPagePaths("pagesubmit")}function handleShowAndHideCreditCardNames(n){var u=$("#pl1 .div-continue"),t=$("#divCreditCardName"),r=$("#divCCType"),e=!1,i,f;n.hasClass("active")&&(t.find("div[data-panel='cc-options']").length>0?(i=n.attr("data-key")!=undefined?n.attr("data-key").toUpperCase():"",f=getSelectedCategory(i)!=null?getSelectedCategory(i).toUpperCase():"",filterCreditCardNames(i,t),e=f.indexOf("NEW")>-1||i.indexOf("NEW")>-1?hasFilterCCName("NEW")?!1:!0:f.indexOf("UPGRADE")>-1||i.indexOf("UPGRADE")>-1?hasFilterCCName("UPGRADE")?!1:!0:!0,e?(r.find("select option").length>0&&(r.find("select option").length<=2?r.addClass("hidden"):r.removeClass("hidden")),t.hide(),u.show()):(r.addClass("hidden"),t.show(),u.hide()),CC.FACTORY.handleShowAndHideContinueButtonForXSellApp(t,u)):(t.hide(),u.show()))}function hasFilterCCName(n){var t=!1;return $("#divCreditCardName").find('div[class~="col-sm-6"]').each(function(){var i=$(this).find("div[data-card-name]").attr("data-card-category");if(i=i!=undefined?i.toUpperCase():"",n=="UPGRADE"){if((i.indexOf(n)>-1||i.indexOf("BOTH")>-1)&&!$(this).hasClass("hidden"))return t=!0,!1}else if(i.indexOf("UPGRADE")==-1&&!$(this).hasClass("hidden"))return t=!0,!1}),t}function filterCreditCardNames(n,t){var r=t.find('div[class~="col-sm-6"]'),i=getSelectedCategory(n);i=i!=null?i.toUpperCase():"";r.each(function(){var t=$(this),r=t.find("div[data-card-name]").attr("data-card-category");r=r!=undefined?r.toUpperCase():"";i.indexOf("NEW")>-1||n.indexOf("NEW")>-1?r=="UPGRADE"?t.addClass("hidden"):t.removeClass("hidden"):i.indexOf("UPGRADE")>-1||n.indexOf("UPGRADE")>-1?r=="UPGRADE"||r=="BOTH"?t.removeClass("hidden"):t.addClass("hidden"):t.removeClass("hidden")})}function pl1Init(){$("#pl1").find("a[data-command='loan-purpose']").off("click").on("click",function(){var n=$(this);$("#pl1").find("a[data-command='loan-purpose']").removeClass("active");n.addClass("active");$("#hdCcSelectedLoanPurpose").val(n.data("key"));handleShowAndHideCreditCardNames(n);showRequestCreditLimit();$("#divLoanPurposeList").trigger("change")});pushToPagePaths("pl1");CC.FACTORY.displayApplyXSellLoanPurposeAndCardName();showAndHideCreditCardPage()}function pageLastInit(){if($("#divXsellSection").length===1)$("a.btn-header-theme",$("#divXsellSection")).on("click",function(){$.mobile.loading("show",{theme:"a",text:"Loading ... please wait",textonly:!0,textVisible:!0})})}function hiddenCCType(){return $("#divCCType").hasClass("hidden")}function showRequestCreditLimit(){var i=$("#hdCcSelectedLoanPurpose").val();if(i==="")return!1;var r=getSelectedCategory(i),t=$("#divRequestCreditLimit"),n=$("#txtRequestCreditLimit"),u=$("#eCreditCardNumber"),f=n.closest('div[data-role="fieldcontain"]'),e=u.closest('div[data-role="fieldcontain"]');f.show();e.show();r!=null?r.toUpperCase().indexOf("INCREASE")>-1?(n.val(Common.FormatCurrency(n.val(),!0)),t.show(),i.toUpperCase().indexOf("LOWER")!=-1&&(n.val("0"),f.hide())):r.toUpperCase().indexOf("LIMIT")!=-1&&r.toUpperCase().indexOf("NEW")!=-1?(n.val(Common.FormatCurrency(n.val(),!0)),t.show(),u.val(""),unMaskedCreditCardNumber="",e.hide()):r.toUpperCase().indexOf("NEW")!=-1?(n.val("0"),u.val(""),unMaskedCreditCardNumber="",t.hide()):r.toUpperCase().indexOf("UPGRADE")!=-1?(t.show(),n.val("0"),f.hide()):(n.val("0"),u.val(""),unMaskedCreditCardNumber="",t.hide()):i.toUpperCase().indexOf("INCREASE")!=-1?(n.val(Common.FormatCurrency(n.val(),!0)),t.show()):i.toUpperCase().indexOf("LOWER")!=-1?(t.show(),n.val("0"),f.hide()):i.toUpperCase().indexOf("UPGRADE")!=-1?(t.show(),n.val("0"),f.hide()):(n.val("0"),u.val(""),unMaskedCreditCardNumber="",t.hide())}function getSelectedCategory(n){var t=JSON.parse(LoanPurposeCategory);for(var i in t)if(n!=undefined&&i.toUpperCase()==n.toUpperCase())return t[i];return null}function onClickReturnToMainPage(n){saveCancelLoanInfo();clearForms();var t=$("#hdRedirectURL").val();t!=""&&(window.location.href=t);n.preventDefault()}function SelectProduct(n,t,i){g_is_silent_ajax=!1;$("#div_system_message .div-continue .div-continue-button").addClass("ui-disabled");$("#div_system_message .div-continue .div-continue-button").attr("tabindex","-1");$("#txtErrorMessage").html("");let r={};r=getPersonalLoanInfo(!1);r.LenderRef=$("#hfLenderRef").val();r.Index=n;r.ProductIdentifier=t;r.RateCode=i;r.Task="SelectProduct";let u=$("#txtLName").val(),f=$("#txtFName").val();return r.FullName=f+" "+u,r=attachGlobalVarialble(r),$.ajax({type:"POST",url:"CallBack.aspx",data:r,dataType:"html",timeout:0,success:function(n){let t=isOneTimePasscode(n),i=isDocV(n),r=isWalletQuestion(n);if(n.toUpperCase().indexOf("MLERRORMESSAGE")>-1)goToDialog(n);else if(r||t||i)if(i){let t=isDocVForCoApp(n);displayDocVPageUC(n,t)}else t?displayOTPPage(n,!1):displayWalletQuestionsForLoans(n,!1);else n=="blockmaxapps"?goToNextPage("#pageMaxAppExceeded"):goToLastDialog(n)},error:function(){$("input.custom").attr("disabled",!1);goToDialog("There was an error when processing your request.  Please try the application again.")}}),!1}function goToDialog(n){$("#divErrorPopup").length>0?($("#txtErrorPopupMessage").html(n),$("#divErrorPopup").popup("open",{positionTo:"window"})):($("#txtErrorMessage").html(n),$("#href_show_dialog_1").trigger("click"))}function submitCreditCardLoanEPayDetails(n){var t=getPersonalLoanInfo(!1),i,r;t.LenderRef=$("#hfLenderRef").val();t.Task="UpdateComboEPayDetails";t.EpayFundingStatus=n;t=attachGlobalVarialble(t);i=new FormData;for(r in t)i.append(r,t[r]);return $.ajax({type:"POST",url:"CallBack.aspx",data:i,enctype:"multipart/form-data",timeout:0,processData:!1,contentType:!1,success:function(t){configureFinalResponseForCombo(t,n)},error:function(){goToDialog("There was an error when processing your request.  Please try the application again.")}}),""}function goToLastDialog(n){var i,u,r;let t=0;if(n&&n.toUpperCase().indexOf("ACCEPT OFFER")<0&&n.indexOf("ifDocuSign")<0&&clearForms(),$("#div_system_message").html(n),t=$("#div_system_message").find("iframe#ifDocuSign").length,t===1)appendDocuSign(),$("#div_docuSignIframe").append($("#div_system_message").find("iframe#ifDocuSign")),i=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,u=$(".divfooter").height(),i=i-u-64,$("#div_docuSignIframe").find("iframe#ifDocuSign").attr("height",i),$.mobile.changePage("#popupDocuSign",{transition:"fade",reverse:!1,changeHash:!1});else{$(".xsell-selection-panel .xsell-item-option .div-continue-button","#div_system_message").on("mouseenter click",function(n){var t=$(this);n.type!="click"?(t.addClass("btnHover"),t.removeClass("btnActive_on"),t.removeClass("btnActive_off")):t.removeClass("btnHover")}).on("mouseleave",function(){handledBtnHeaderTheme($(this))});r=!1;$.mobile.pageContainer.pagecontainer("getActivePage").attr("id")=="cc_last"&&(r=!0);r&&typeof doInitICE=="function"&&doInitICE()}$("#happy-or-not-smiley-digital-embed").find("button[data-test='smiley-button']").removeClass("ui-shadow ui-btn ui-corner-all");n&&n.toUpperCase().indexOf("ACCEPT OFFER")>-1?($("#DivHONMain").hide(),HideHONDivOnacceptOffer=!0):HideHONDivOnacceptOffer&&$("#DivHONMain").show();openConductivScreen(n);$("#hdnFCEnable").val()=="True"&&n&&n.toUpperCase().indexOf("ACCEPT OFFER")<0&&n.indexOf("ifDocuSign")<0?SubmitFCComboResponse(n):(t==0||t==-1)&&$("#href_show_last_dialog").trigger("click")}function saveAndFinishLater(){var n=getPersonalLoanInfo(!1),t,i;n.Task="SaveIncompletedLoan";t=new FormData;for(i in n)t.append(i,n[i]);return $.ajax({type:"POST",url:"CallBack.aspx",data:t,enctype:"multipart/form-data",timeout:0,processData:!1,contentType:!1,success:function(n){n=="ok"?($("#popNotification div[placeholder='content']").text("Current loan has been saved successfully."),$("#popNotification").popup("open",{positionTo:"window"})):n=="blockmaxapps"?goToNextPage("#pageMaxAppExceeded"):goToDialog("There was an error when processing your request.  Please try the application again.")},error:function(){goToDialog("There was an error when processing your request.  Please try the application again.")}}),!1}function saveLoanInfo(){var n,t,i,r;if(submission_in_progress)return!1;submission_in_progress=!0;$("#pagesubmit .div-continue-button").addClass("ui-disabled");n=getPersonalLoanInfo(!1);$instaTouchComment=$("#hdInstaTouchPrefillComment");$instaTouchComment.val()!=undefined&&(n.InstaTouchPrefillComment=$instaTouchComment.val()+Common.GetModifiedInstaTouchMessage(n));(n.MaritalStatus==""||n.MaritalStatus==undefined)&&$("#AppSpouseInfoddlIsMarried").val()!=undefined&&(n.MaritalStatus=$("#AppSpouseInfoddlIsMarried").val());(n.co_MaritalStatus==""||n.co_MaritalStatus==undefined)&&$("#AppSpouseInfoco_ddlIsMarried").val()!=undefined&&(n.co_MaritalStatus=$("#AppSpouseInfoco_ddlIsMarried").val());n=attachGlobalVarialble(n);t=new FormData;for(i in n)t.append(i,n[i]);return r=Date.now(),$.ajax({type:"POST",url:"CallBack.aspx",data:t,enctype:"multipart/form-data",timeout:0,processData:!1,contentType:!1,success:function(n){var i,f;const t=Date.now()-r;i=isOneTimePasscode(n);let u=isDocV(n);if(f=isWalletQuestion(n),$instaTouchComment.val()!=undefined&&$instaTouchComment.val()!=""&&$instaTouchComment.val(""),n.toUpperCase().indexOf("SAVEERROR")>-1)if(submission_in_progress=!1,t>2e3){let i=JSON.parse(n);loginfo("CC Back-end submission return error after"+t+" ms");goToLastDialog(i.Message)}else $("#pagesubmit .div-continue-button").removeClass("ui-disabled"),goToDialog("There was an error when processing your request.  Please try the application again.");else if(n.toUpperCase().indexOf("MLERRORMESSAGE")>-1)submission_in_progress=!1,updatehdIsMLErrorMessage(!0),t>2e3?(loginfo("CC Submission with MLERRORMESSAGE error after"+t+" ms"),goToLastDialog(n)):($("#pagesubmit .div-continue-button").removeClass("ui-disabled"),goToDialog(n));else if(f||i||u)if(u){let t=isDocVForCoApp(n);displayDocVPageUC(n,t)}else i?displayOTPPage(n,!1):displayWalletQuestionsForLoans(n,!1);else n=="blockmaxapps"?(document.getElementById("maxAppExceeded").style.display="block",goToNextPage("#pageMaxAppExceeded")):n=="blockemailapps"?(document.getElementById("emailBannedAccess").style.display="block",goToNextPage("#pageMaxAppExceeded")):n=="blockphoneapps"?(document.getElementById("phoneBannedAccess").style.display="block",goToNextPage("#pageMaxAppExceeded")):$("#hdIsComboMode").val()=="Y"?(comboType=comboTypeEnum.CC_COMBO,handleComboResponse(n)):goToLastDialog(n)},error:function(){const n=Date.now()-r;submission_in_progress=!1;n>2e3?(loginfo("CC Back-end submission return error after"+n+" ms"),goToLastDialog("<div><p id='error-msg'>An error was detected during the submission of your application. Please contact your financial institution for assistance.<\/p><\/div>")):($("#pagesubmit .div-continue-button").removeClass("ui-disabled"),$("input.custom").attr("disabled",!1),goToDialog("There was an error when processing your request.  Please try the application again."))}}),!1}function saveCancelLoanInfo(){var n,t,i;if($("#hdEnableDisagree").val()!="Y"||(n=getPersonalLoanInfo(!0),n.SSN==""||n.DOB==""||n.EmailAddr==""))return!1;n=attachGlobalVarialble(n);t=new FormData;for(i in n)t.append(i,n[i]);return $.ajax({type:"POST",url:"CallBack.aspx",data:t,enctype:"multipart/form-data",timeout:0,processData:!1,contentType:!1,success:function(){clearForms()}}),$.mobile.loading("hide"),!1}function prepareAbrFormValues(n){var i=getPersonalLoanInfo(),t={};return _.forEach(pagePaths,function(r){return collectFormValueData(r.replace("#",""),i,t),n==r.replace("#","")?!1:void 0}),t}function collectFormValueData(n,t,i){var u=$("#hdHasSSO").val()=="Y"?!0:!1,r;i.isSSO=u;switch(n){case"pl1":$("#txtLocationPoolCode").length>0?i.locationPool=ZIPCODEPOOLLIST[$("#txtLocationPoolCode").val()]:$("#cc_txtLocationPoolCode").length>0&&(i.locationPool=CCPRODUCTS.ZipPoolIds[$("#cc_txtLocationPoolCode").val()]);i.creditCardType=[t.CreditCardType];i.creditCardPurpose=[t.LoanPurpose];i.amountRequested=t.RequestAmount;collectCustomQuestionAnswers("Application","LoanPage",null,t,i);collectCustomQuestionAnswers("Applicant","LoanPage",null,t,i);break;case"pl2":$("#txtZip").length>0&&(i.locationPool=CCPRODUCTS.ZipPoolIds[$("#txtZip").val()]);r=moment(t.DOB,"MM-DD-YYYY");Common.IsValidDate(t.DOB)&&(i.age=moment().diff(r,"years",!1));i.citizenship=t.CitizenshipStatus;i.employeeOfLender=t.EmployeeOfLender;i.employmentLength=(parseInt(t.txtEmployedDuration_year)||0)+(parseInt(t.txtEmployedDuration_month)||0)/12;i.employmentStatus=t.EmploymentStatus;i.isJoint=t.HasCoApp=="Y";i.memberNumber=t.MemberNumber;i.occupancyLength=t.LiveMonths/12;i.occupancyStatus=t.OccupyingLocation;collectCustomQuestionAnswers("Applicant","ApplicantPage","",t,i);break;case"pl6":$("#co_txtZip").length>0&&(i.locationPool=CCPRODUCTS.ZipPoolIds[$("#co_txtZip").val()]);r=moment(t.co_DOB,"MM-DD-YYYY");Common.IsValidDate(t.co_DOB)&&(i.age=moment().diff(r,"years",!1));i.citizenship=t.co_CitizenshipStatus;i.employeeOfLender=t.co_EmployeeOfLender;i.employmentLength=(parseInt(t.co_txtEmployedDuration_year)||0)+(parseInt(t.co_txtEmployedDuration_month)||0)/12;i.employmentStatus=t.co_EmploymentStatus;i.memberNumber=t.co_MemberNumber;i.occupancyLength=t.co_LiveMonths/12;i.occupancyStatus=t.co_OccupyingLocation;collectCustomQuestionAnswers("Applicant","ApplicantPage","co_",t,i);break;case"pagesubmit":collectCustomQuestionAnswers("Application","ReviewPage",null,t,i);collectCustomQuestionAnswers("Applicant","ReviewPage",null,t,i);CollectComboFormValueData(t,i)}return i}function getPersonalLoanInfo(n){var t,f,s,e,r,c,i,u;const h=$("#hdIsComboMode").val();t={};t.PlatformSource=$("#hdPlatformSource").val();t.LenderRef=$("#hfLenderRef").val();t.Task="SubmitLoan";t.WorkflowSessionID=$("#hdCCWorkflowSessionID").val();h=="Y"&&(t.AppliedPromoCodes=JSON.stringify(FS1.appliedPromoCodes||[]));t.MerchantId=$("#hfMerchantID").val();t.ClinicId_enc=$("#hfClinicID_enc").val();t.WorkerId_enc=$("#hfWorkerID_enc").val();t.TUSessionID=$("#hdTUSessionID").val();t.ExperianFraudNetJSC=$("#user_prefs").val();t.ExperianFraudNetHDIM=$("#user_prefs2").val();t.SocureSessionID=$("#hdSocureSigmaSessionID").val();t.IsComboMode=h;t.HasSSOIDA=$("#hdHasSSOIDA").val();t.IsSSO=$("#hdHasSSO").val();t.CampaignCode=$("#hdnCampaignCode").val();t.depositAmount=0;t.IsComboMode=="Y"&&(t.XABranchID=getXAComboBranchId(),t.ProceedXAAnyway=$("#hdProceedMembership").val(),$("#divSelectedProductPool").length===1&&$("#divSelectedProductPool").parent().hasClass("hidden")==!1&&(t.SelectedProducts=JSON.stringify(_.map(loanProductFactory.collectProductSelectionData()||[],function(n){return n.productName="",n}))),$("#divCcFundingOptions").length===1&&(t.depositAmount=Common.GetFloatFromMoney($("#txtFundingDeposit").val()),FS1.loadValueToData(),t.rawFundingSource=JSON.stringify(FS1.Data),$("#hdnMicroDepositVerificationStatus").val()=="Manual"?$("#hdnMicroDepositCommentVerification").val()=="true"&&(t.PlaidComments=FS1.Data.fsFundingType==="TRANSFER USING PLAID"||FS1.Data.fsFundingType==="TRANSFER FROM A FINANCIAL INSTITUTION"&&plaidAccountResponse!=null&&plaidAccountAdditionalDetailsResponse!=null?"ACH information specified for account funding was verified using Plaid.":""):t.PlaidComments=FS1.Data.fsFundingType==="TRANSFER USING PLAID"||FS1.Data.fsFundingType==="TRANSFER FROM A FINANCIAL INSTITUTION"&&plaidAccountResponse!=null&&plaidAccountAdditionalDetailsResponse!=null?"ACH information specified for account funding was verified using Plaid.":"",t.MXComments=FS1.Data.fsFundingType==="TRANSFER USING MX"?"ACH information specified for account funding was verified using MX.":""));$("#txtLocationPoolCode").length>0?t.SelectedLocationPool=JSON.stringify(ZIPCODEPOOLLIST[$("#txtLocationPoolCode").val()]):$("#cc_txtLocationPoolCode").length>0&&(t.SelectedLocationPool=JSON.stringify(CCPRODUCTS.ZipPoolIds[$("#cc_txtLocationPoolCode").val()]));window.ASI&&ASI.FACTORY.setApplicantAdditionalInfo(t);t.isDisagreeSelect=n?"Y":"N";parseDisclosures()!=""&&(t.Disclosure=parseDisclosures());t.BranchID=getBranchId();t.LoanOfficerID=$("#hfLoanOfficerID").val();t.ReferralSource=$("#hfReferralSource").val();t.CreditCardName=htmlEncode($.trim($("#hdCcSelectedCardName").val()));f=$.trim($("#hdCcSelectedCardType").val());hasCNameParameter()?(typeof SELECTEDCREDITCARDPRODUCT=="undefined"||SELECTEDCREDITCARDPRODUCT===null)&&(t.CCNameComment="The credit card name (cname URL Parameter), '"+t.CreditCardName+"' is not defined. Credit card type is set to CREDIT by default. "):hiddenCCType()?$("#pl1").find("div[data-panel='cc-options']>div").length==0&&$("#ddlCreditCardType option:selected").length>0&&(f=$("#ddlCreditCardType option:selected").val()):f=$("#ddlCreditCardType option:selected").val();t.CreditCardType=f;t.LoanPurpose=$("#hdCcSelectedLoanPurpose").val();t.RequestAmount=t.IsComboMode=="Y"?Common.GetFloatFromMoney($("#txtComboCreditLimit").val()):Common.GetFloatFromMoney($("#txtRequestCreditLimit").val());const o=unMaskedCreditCardNumber;return o!=undefined&&$.trim(o)!=""&&(t.eCardNumber=o),t.idaMethodType=$("#hdIdaMethodType").val(),t.CustomAnswers=JSON.stringify(loanpage_getAllCustomQuestionAnswers().concat(getAllCustomQuestionAnswers()).concat(co_getAllCustomQuestionAnswers()).concat(reviewpage_getAllCustomQuestionAnswers())),typeof reviewpage_getAllUrlParaCustomQuestionAnswers=="function"&&(s=reviewpage_getAllUrlParaCustomQuestionAnswers(),s.length>0&&(t.IsUrlParaCustomQuestion="Y",t.UrlParaCustomQuestionAndAnswers=JSON.stringify(s))),t.Is2ndLoanApp=$("#hdIs2ndLoanApp").val(),t.Is2ndLoanApp=="Y"&&isApplyXSellFeatureEnabled()&&(t.XSell_LoanNumber=getParaByName("XSell_LoanNumber")),typeof setProtectionInfo!="undefined"&&setProtectionInfo(t,!1),t.Is2ndLoanApp==="Y"?t.SID=$("#hdSID").val():(t.xaXSellComment=$("#hdXACrossSellComment").val(),SetApplicantInfo(t),SetContactInfo(t),SetAssets(t),SetApplicantAddress(t),SetApplicantPreviousAddress(t),SetApplicantMailingAddress(t),CC.DATA.AppIDLogic.SetApplicantID(t),CC.DATA.SecondaryAppIDLogic.SetApplicantID(t),$("#hdIsComboMode").val()==="Y"&&($("#div_fom_section").hasClass("hidden")||setFOM(t)),$("#divDeclarationSection").length>0&&(SetDeclarations(t),t.Declarations=JSON.stringify(t.Declarations),t.AdditionalDeclarations=JSON.stringify(t.AdditionalDeclarations)),$("#hdEnableReferenceInformation").val()=="Y"&&setReferenceInfo(t),SetApplicantFinancialInfo(t),e=$("#hdHasCoApplicant").val().toUpperCase(),e==""&&(e="N"),r={},typeof docUploadObj!="undefined"&&docUploadObj!=null&&docUploadObj.setUploadDocument(r),typeof co_docUploadObj!="undefined"&&co_docUploadObj!=null&&co_docUploadObj.setUploadDocument(r),r.hasOwnProperty("sDocArray")&&r.hasOwnProperty("sDocInfoArray")&&(t.Image=JSON.stringify(r.sDocArray),t.UploadDocInfor=JSON.stringify(r.sDocInfoArray)),t.HasCoApp=e!=="Y"?"N":"Y",t.HasCoApp=="Y"&&(co_SetApplicantInfo(t),co_SetContactInfo(t),co_SetAssets(t),co_SetApplicantAddress(t),co_SetApplicantPreviousAddress(t),co_SetApplicantMailingAddress(t),$("#hdEnableReferenceInformationForCoApp").val()=="Y"&&co_setReferenceInfo(t),CC.DATA.co_AppIDLogic.SetApplicantID(t),CC.DATA.co_SecondaryAppIDLogic.SetApplicantID(t),$("#co_divDeclarationSection").length>0&&(co_SetDeclarations(t),t.co_Declarations=JSON.stringify(t.co_Declarations),t.co_AdditionalDeclarations=JSON.stringify(t.co_AdditionalDeclarations)),co_SetApplicantFinancialInfo(t)),c=IsAuthorizedUserEnabled(),c&&(t.EnableAuthorizedUser="Y",t.AuthorizedUserInfo=JSON.stringify(getAuthorizedUserInfo()))),$("#hdVendorID").val()!=""&&$("#hdUserID").val()!=""&&(t.VendorId=$("#hdVendorID").val(),t.UserId=$("#hdUserID").val(),i=JSON.stringify(t),i=JSON.parse(i),i.SSN="",i.co_SSN="",typeof i.rawFundingSource=="string"&&(u=JSON.parse(i.rawFundingSource),u.cCreditCardNumber="",u.cExpirationDate="",u.cCVNNumber="",u.cCreditCardNumber="",u.cCreditCardNumber="",i.rawFundingSource=JSON.stringify(u)),t.rawData=JSON.stringify(i)),setResubmitAppMessage(t),$("#hdIsCunaMultipleProductsInsuranceEnabled").val()=="True"&&$.each(prodCodeArr,function(n,i){i=="GAP"&&(t.isCUNAMultipleProductGAPInterested=$("#hdIsGAPInterested").val());i=="MRC"&&(t.isCUNAMultipleProductMRCInterested=$("#hdIsMRCInterested").val());i=="CI"&&(t.isCUNAMultipleProductCIInterested=$("#hdIsCIInterested").val());i=="DP"&&(t.isCUNAMultipleProductDPInterested=$("#hdIsDPInterested").val())}),t}function submitVerifyIdentity(){var n={},t,i;n.LenderRef=$("#hfLenderRef").val();n.Task="VerifyIdentity";n.FirstCallIDALoanNumber=$("#hdFirstCallIDALoanNumber").val();n.SecondCallIDALoanNumber=$("#hdSecondCallIDALoanNumber").val();n.VerifyIdStatus=$("#hdDocusignVeriStatus").val();attachGlobalVarialble(n);t=new FormData;for(i in n)t.append(i,n[i]);return $.ajax({type:"POST",url:"CallBack.aspx",data:t,enctype:"multipart/form-data",timeout:0,processData:!1,contentType:!1,success:function(n){$("#hdDocusignVeriStatus").val("");n!=undefined&&n.indexOf("hdSecondCallIDALoanNumber")>-1?$("#div_docuSignIframe").find("iframe#ifDocuSign").remove():n=="blockmaxapps"&&goToNextPage("#pageMaxAppExceeded");goToLastDialog(n)},error:function(){goToDialog("There was an error when processing your request.  Please try the application again.")}}),!1}function clearAllInfo(){$("input[type='text']").val("");$("select").each(function(){$(this).get(0).selectedIndex=0;$(this).parent().find("span.ui-btn-text").html("")})}function checkValidScreen1(){var n="",i=$("#hdCcSelectedLoanPurpose").val().toUpperCase(),t;if($("#pl1").find("a[data-command='loan-purpose']").length>0){if($("#hdCcSelectedLoanPurpose").val()==="")return n+"Please select a purpose<br />";t=getSelectedCategory($("#hdCcSelectedLoanPurpose").val());t!=null?(t.toUpperCase().indexOf("INCREASE")>-1||t.toUpperCase().indexOf("LOWER")>-1)&&(Common.ValidateText($("#eCreditCardNumber").val())||(n+="Credit card number is required<br />")):(i.indexOf("INCREASE")!=-1||i.indexOf("LOWER")!=-1)&&(Common.ValidateText($("#eCreditCardNumber").val())||(n+="Credit card number is required<br />"))}return n}function validateScreen1(n){var i=$(n),e,t,f,r,u;if(i.attr("contenteditable")=="true")return!1;if(e="",t=!0,hiddenCCType()||$.lpqValidate("ValidateCreditCardType")===!1&&(t=!1),$.lpqValidate("ValidateCreditLimit")===!1&&(t=!1),$.lpqValidate("ValidateBranch")===!1&&(t=!1),$.lpqValidate("ValidateLoanPurpose")===!1&&(t=!1),$.lpqValidate("ValidateCreditInfo")===!1&&(t=!1),$("#pl1\t").find("#divDisclosure").length>0&&$.lpqValidate("ValidateDisclosure_disclosures")==!1&&(t=!1),$("#loanpage_divApplicantQuestion").children().length>0&&$.lpqValidate("loanpage_ValidateApplicantQuestionsXA")===!1&&(t=!1),t){if(window.ABR&&(f=getSelectedCategory($("#hdCcSelectedLoanPurpose").val()),r=prepareAbrFormValues("pl1"),r.loanPurposeCategory=f,ABR.FACTORY.evaluateRules("pl1",r)))return!1;u=function(n){var t=$(n);$("#pl1").find("div[data-panel='cc-options']>div").length>0&&(t.hasClass("div-continue-button")?hasCNameParameter()||hiddenCCType()&&$("#ddlCreditCardType option:selected").length>0&&$("#hdCcSelectedCardType").val($("#ddlCreditCardType option:selected").val()):hasCNameParameter()||($("#hdCcSelectedCardType").val(t.find("div[data-card-type]").attr("data-card-type")),$("#hdCcSelectedCardName").val(t.find("div[data-card-type]").attr("data-card-name")),t.closest("div[data-panel='cc-options']").find("div.header_theme2").removeClass("active"),t.find(">div.header_theme2").addClass("active")))};window.IST&&$.isEmptyObject(IST.DATA.PrefillData)?IST.FACTORY.carrierIdentification(u,i):(u(i),$("#hdIs2ndLoanApp").val()=="Y"?(RenderReviewContent(),goToNextPage("#pagesubmit")):goToNextPage("#pl2"))}else Common.ScrollToError()}function goToCunaMultipleProductsIns(){goToNextPage("#cunaMultipleProductsIns")}function goToPageSubmit(){RenderReviewContent();goToNextPage("#pagesubmit")}function validateScreen2(n){var u=$(n),i,t,r;if(u.attr("contenteditable")=="true")return!1;if($("#txtErrorMessage").html(""),i="",t=!0,ValidateApplicantInfo()==!1&&(t=!1),ValidateApplicantContactInfoXA()==!1&&(t=!1),ValidateApplicantAddress()==!1&&(t=!1),ValidateApplicantPreviousAddress()==!1&&(t=!1),ValidateApplicantMailingAddress()==!1&&(t=!1),CC.DATA.AppIDLogic.ValidateApplicantID()==!1&&(t=!1),CC.DATA.SecondaryAppIDLogic.ValidateApplicantID()==!1&&(t=!1),$("#hdEnableReferenceInformation").val()=="Y"&&ValidateReferenceInfo()==!1&&(t=!1),$("#hdEnableReferenceInformation").val()=="Y"&&$("#hdEnableSecondaryReferenceInformation").val()=="Y"&&ValidateSecondaryReferenceInfo()==!1&&(t=!1),ValidateApplicantFinancialInfo()==!1&&(t=!1),typeof docUploadObj!="undefined"&&docUploadObj!=null&&docUploadObj.validateUploadDocument()==!1&&(t=!1),ValidateAssets()==!1&&(t=!1),$("#divApplicantQuestion").children().length>0&&$.lpqValidate("ValidateApplicantQuestionsXA")===!1&&(t=!1),r=validateRequiredDLScan($("#hdRequiredDLScan").val(),!1),r!=""&&(i+=r,t=!1),$("#divDeclarationSection").length>0&&$.lpqValidate("ValidateDeclaration")===!1&&(t=!1),typeof validateHasCoApp=="function"&&validateHasCoApp()==!1&&(t=!1),t===!1)i!==""?$("#divErrorPopup").length>0?($("#txtErrorPopupMessage").html(i),$("#divErrorPopup").popup("open",{positionTo:"window"})):($("#txtErrorMessage").html(i),u.next().trigger("click")):Common.ScrollToError();else{if(window.ABR){var f=prepareAbrFormValues("pl2"),e=ABR.FACTORY.isPrimaryOwnerEnable(),o=Common.GetSSN($("#txtSSN").val()),s=$("#txtMemberNumber").val(),h="CC";if(e&&addPrimaryOwnerRuleToTheList(f,o,s,h),ABR.FACTORY.evaluateRules("pl2",f))return!1}const n=function(n){$("#hdHasCoApplicant").val()==="Y"?goToNextPage("#pl6"):n()},t=function(n){if(window.ASI){var t={};SetApplicantInfo(t);SetApplicantAddress(t);ASI.FACTORY.runNssWf1(t.AddressState,t.MaritalStatus,n,CC.FACTORY.validateFinishLater)}else n()};CC.FACTORY.validateFinishLater=function(){goToDialog("Save and Finish Later for Credit Card is not yet Implemented")};const i=function(n){const t=IsAuthorizedUserEnabled();t?(showApplicantAuthorizedUserNames(),goToNextPage("#authorizedUserInfo")):n()};n(function(){t(function(){i(function(){var n=$("#hdIsCunaMultipleProductsInsuranceEnabled").val();n=="True"?goToNextPage("#cunaMultipleProductsIns"):goToPageSubmit()})})})}}function validateCunaMultipleProducts(){var n=!0;typeof validateCunaMultipleProductsIsInterested=="function"&&validateCunaMultipleProductsIsInterested()==!1&&(n=!1);n===!1?Common.ScrollToError():goToPageSubmit()}function IsAuthorizedUserEnabled(){var n=$("#hdIsAuthorizedUserEnabled").val();return n!=undefined&&n.toUpperCase()=="Y"}function validateAuthorizedUserInfoPage(){var n=!0,t;typeof ValidateAuthorizedUserInfo=="undefined"||ValidateAuthorizedUserInfo()||(n=!1);n?(t=$("#hdIsCunaMultipleProductsInsuranceEnabled").val(),t=="True"?goToCunaMultipleProductsIns():goToPageSubmit()):Common.ScrollToError()}function showApplicantAuthorizedUserNames(){var e="",o="",r=$("#txtFName").val(),u=$("#txtLName").val(),s=$("#spNumOfAutUser"),h=$("#auPrimaryName"),f=$("#auJointName"),n=$("#hdAuthorizedUserMaxNumber").val(),t,i;n=n!=undefined&&n!=""?parseInt(n):3;r=r.charAt(0).toUpperCase()+r.substr(1);u=u.charAt(0).toUpperCase()+u.substr(1);e=r+" "+u;h.html(e+" <em>primary<\/em>");hasCoApplicant()?(n==3&&(n=2),t=$("#co_txtFName").val(),i=$("#co_txtLName").val(),t=t.charAt(0).toUpperCase()+t.substr(1),i=i.charAt(0).toUpperCase()+i.substr(1),o=t+" "+i,f.html(o+" <em>joint<\/em>"),f.removeClass("hidden")):f.addClass("hidden");s.text("Number of additional authorized users you can add: "+n)}function goBackFromAuthorizedUserInfo(){window.ASI?ASI.FACTORY.goBackFromPageAuthorizedUserInfo():hasCoApplicant()?goToNextPage("#pl6"):goToNextPage("#pl2")}function hasCoApplicant(){return $("#hdHasCoApplicant").val()==="Y"}function goBackPageCunaMultipleProductsIns(){if(window.ASI)ASI.FACTORY.goBackFromPageCunaMultipleProductsIns();else{const n=IsAuthorizedUserEnabled();n?goToNextPage("#authorizedUserInfo"):$("#hdHasCoApplicant").val()==="Y"?goToNextPage("#pl6"):goToNextPage("#pl2")}}function goBackPageSubmit(){if(typeof resetFunding=="function"&&resetFunding(),$("#hdIs2ndLoanApp").val()==="Y")goToNextPage("#pl1");else if(window.ASI)ASI.FACTORY.goBackFromPageSubmit();else{var n=IsAuthorizedUserEnabled();$("#hdIsCunaMultipleProductsInsuranceEnabled").val()==="True"?goToNextPage("#cunaMultipleProductsIns"):n?goToNextPage("#authorizedUserInfo"):$("#hdHasCoApplicant").val()==="Y"?goToNextPage("#pl6"):goToNextPage("#pl2")}}function validateScreen6(n){var u=$(n),i,t,r,f;if(u.attr("contenteditable")=="true")return!1;if($("#txtErrorMessage").html(""),i="",t=!0,co_ValidateApplicantInfo()==!1&&(t=!1),co_ValidateApplicantContactInfoXA()==!1&&(t=!1),co_ValidateApplicantAddress()==!1&&(t=!1),co_ValidateApplicantPreviousAddress()==!1&&(t=!1),co_ValidateApplicantMailingAddress()==!1&&(t=!1),CC.DATA.co_AppIDLogic.ValidateApplicantID()==!1&&(t=!1),CC.DATA.co_SecondaryAppIDLogic.ValidateApplicantID()==!1&&(t=!1),$("#hdEnableReferenceInformationForCoApp").val()=="Y"&&co_ValidateReferenceInfo()==!1&&(t=!1),$("#hdEnableReferenceInformationForCoApp").val()=="Y"&&$("#hdEnableSecondaryReferenceInformationForCoApp").val()=="Y"&&co_ValidateSecondaryReferenceInfo()==!1&&(t=!1),co_ValidateApplicantFinancialInfo()==!1&&(t=!1),typeof co_docUploadObj!="undefined"&&co_docUploadObj!=null&&co_docUploadObj.validateUploadDocument()==!1&&(t=!1),co_ValidateAssets()==!1&&(t=!1),$("#co_divApplicantQuestion").children().length>0&&$.lpqValidate("co_ValidateApplicantQuestionsXA")===!1&&(t=!1),$("#co_divDeclarationSection").length>0&&$.lpqValidate("co_ValidateDeclaration")===!1&&(t=!1),r=validateRequiredDLScan($("#hdRequiredDLScan").val(),!0),r!=""&&(i=r,t=!1),t==!1)i!=""?$("#divErrorPopup").length>0?($("#txtErrorPopupMessage").html(i),$("#divErrorPopup").popup("open",{positionTo:"window"})):($("#txtErrorMessage").html(i),u.next().trigger("click")):Common.ScrollToError();else{if(window.ABR&&(f=prepareAbrFormValues("pl6"),ABR.FACTORY.evaluateRules("pl6",f)))return!1;const n=function(n){if(window.ASI){var t={};SetApplicantInfo(t);SetApplicantAddress(t);co_SetApplicantInfo(t);co_SetApplicantAddress(t);ASI.FACTORY.runNssWf2(t.AddressState,t.MaritalStatus,t.co_RelationshipToPrimary,t.co_AddressState,t.co_MaritalStatus,n,CC.FACTORY.validateFinishLater)}else n()},t=function(n){const t=IsAuthorizedUserEnabled();t?(showApplicantAuthorizedUserNames(),goToNextPage("#authorizedUserInfo")):n()};n(function(){t(function(){var n=$("#hdIsCunaMultipleProductsInsuranceEnabled").val();n=="True"?goToCunaMultipleProductsIns():goToPageSubmit()})})}}function validateWalletQuestions(n,t){var o,h,u,s;if($(n).attr("contenteditable")=="true")return!1;for(var i=0,f=0,r="",e=$("#hdNumWalletQuestions").val(),e=parseInt(e,10),i=1;i<=e;i++){for(o=$("input[name=walletquestion-radio-"+i.toString()+"]"),h=o.length,u=0;u<h;u++)$(o[u]).prop("checked")==!0&&f++;if(f==0){r+="Please answer all the questions";break}f=0}return r!=""?($("#divErrorPopup").length>0?($("#txtErrorPopupMessage").html(r),$("#divErrorPopup").popup("open",{positionTo:"window"})):(s=$("#divErrorDialog"),$("#txtErrorMessage").html(r),s.length>0&&$.mobile.changePage(s,{transition:"slide",reverse:!1,changeHash:!0})),!1):(submitWalletAnswers(t,!1),!1)}function submitWalletAnswers(n,t){var u="",i,r,f;return n&&(u="co_"),i=null,r=null,t?(i=$("#"+u+"oneTimePasscode .div-continue-button"),i.addClass("ui-disabled")):(i=$("#"+u+"walletQuestions .div-continue-button"),i.addClass("ui-disabled")),r=getWalletAnswers(n,t),r=attachGlobalVarialble(r),$("#hdIsComboMode").val()=="Y"&&$("#divCcFundingOptions").length===1&&(r.depositAmount=Common.GetFloatFromMoney($("#txtFundingDeposit").val()),FS1.loadValueToData(),r.rawFundingSource=JSON.stringify(FS1.Data)),f=Date.now(),$.ajax({type:"POST",url:"Callback.aspx",data:r,dataType:"html",timeout:0,success:function(n){const r=Date.now()-f;var t=isOneTimePasscode(n),u=isWalletQuestion(n);n.toUpperCase().indexOf("SAVEERROR")>-1?(loginfo("CC Wallet Answer Submission after"+r+" ms"),i.removeClass("ui-disabled"),goToDialog("There was an error when processing your request.  Please try the application again.")):n.toUpperCase().indexOf("MLERRORMESSAGE")>-1?(i.removeClass("ui-disabled"),goToDialog(n)):n.toUpperCase().indexOf("MLNOIDAUTHENTICATION")>-1?(isApplicationCompleted=!0,goToLastDialog(n)):u||t?t?displayOTPPage(n,!0):n.toUpperCase().indexOf("PRIMARYFOLLOWONQUESTIONS")>-1?(i.removeClass("ui-disabled"),displayWalletQuestionsForLoans(n,!1)):(n.toUpperCase().indexOf("COFOLLOWONQUESTIONS")>-1&&$("#co_walletQuestions .div-continue-button").removeClass("ui-disabled"),displayWalletQuestionsForLoans(n,!0)):n=="blockmaxapps"?goToNextPage("#pageMaxAppExceeded"):goToLastDialog(n)},error:function(){i.removeClass("ui-disabled");goToDialog("There was an error when processing your request.  Please try the application again.")}}),!1}function getWalletAnswers(n,t){var i=getPersonalLoanInfo(!1);return getWalletQuestionsAndAnswers(i),i.LenderRef=$("#hfLenderRef").val(),t?(i.Task="oneTimePasscode",i.Passcode=$("#txtcscOTP").val()):i.Task="WalletQuestions",i.idaMethodType=$("#hdIdaMethodType").val(),i.co_FirstName=$("#co_txtFName").val(),i.ProceedXAAnyway=$("#hdProceedMembership").val(),i.IsComboMode=$("#hdIsComboMode").val(),n?(i.hasJointWalletAnswer="Y",$("#hasCoFollowOnQuestions").length>0&&(i.hasJointFollowOnWalletAnswer="Y")):(i.hasJointWalletAnswer="N",$("#hasPrimaryFollowOnQuestions").length>0&&(i.hasPrimaryFollowOnWalletAnswer="Y")),i}function autoFillData(){$("#ddlBranchName option").eq(1).prop("selected",!0);$("#ddlBranchName").selectmenu("refresh").closest("div.ui-btn").addClass("btnActive_on");$("#ddlCreditCardType option").eq(1).prop("selected",!0);$("#ddlCreditCardType").selectmenu("refresh");$("#txtRequestCreditLimit").val("10000").trigger("blur");$("#eCreditCardNumber").val("1234567890123456").trigger("blur");unMaskedCreditCardNumber="1234-5678-9012-3456";$("#txtComboCreditLimit").is(":visible")&&$("#txtComboCreditLimit").val("10000").trigger("blur");$("#divLoanPurposeList a.btn-header-theme[data-role='button']:eq(0)").trigger("click");autoFillData_PersonalInfor();co_autoFillData_PersonalInfor();autoFillData_Address();autoFillData_ContactInfor();co_autoFillData_Address();autoFillData_FinancialInFor();co_autoFillData_FinancialInFor();co_autoFillData_ContactInfor();CC.DATA.AppIDLogic.AutoFillData();CC.DATA.SecondaryAppIDLogic.AutoFillData();CC.DATA.co_AppIDLogic.AutoFillData();CC.DATA.co_SecondaryAppIDLogic.AutoFillData();typeof autofill_Disclosure=="function"&&autofill_Disclosure();$("#divProceedMembership").length>0&&($("a.btn-header-theme[data-command='proceed-membership'][data-key='Y']","#divProceedMembership").addClass("active btnActive_on"),$("#hdProceedMembership").val("Y"));$("#divDeclarationSection").length>0&&autofill_Declarations();$("#co_divDeclarationSection").length>0&&co_autofill_Declarations();($("#hfLenderRef").val().indexOf("rsfcu_")>-1||$("#hfLenderRef").val().indexOf("redstonefcu_test")>-1)&&($("#txtFName").val("NORA"),$("#txtLName").val("ADAMS"),$("#txtDOB").val("01/01/1967"),$("#txtDOB1").val("05"),$("#txtDOB2").val("10"),$("#txtDOB3").val("1967"),$("#txtSSN").val("666-86-8483"),$("#txtSSN1").val("666"),$("#txtSSN2").val("86"),$("#txtSSN3").val("8483"),$("#txtEmail").val("vinh.phan@meridianlink.com"),$("#txtHomePhone").val("7142208873"),$("#txtMobilePhone").val("7142208873"))}function getUserName(){var n=$("#txtFName").val(),t=$("#txtMName").val(),i=$("#txtLName").val(),r;return n=n.replace(n.charAt(0),n.charAt(0).toUpperCase()),t=t.replace(t.charAt(0),t.charAt(0).toUpperCase()),i=i.replace(i.charAt(0),i.charAt(0).toUpperCase()),r="",t!=""?n+" "+t+" "+i:n+" "+i}function ViewCreditCardInfo(){var n="",s=$("#hdCcSelectedLoanPurpose").val(),i,t,r,h,u,f,e,o;if(s!==""){i="";t=CREDITCARDPURPOSES;for(r in t)if(h=t[r].Item1!=undefined?t[r].Item1.toUpperCase():"",s.toUpperCase()==h){i=t[r].Item2;break}i!=""&&(n+='<div class="col-sm-6 col-xs-12"><div class="row"><div class="col-xs-6 text-right row-title"><span class="bold">Purpose<\/span><\/div><div class="col-xs-6 text-left row-data"><span>'+i+"<\/span><\/div><\/div><\/div>");u=$("#txtRequestCreditLimit").val();f=$("#eCreditCardNumber").val();Common.GetFloatFromMoney(u)!=0&&(n+='<div class="col-sm-6 col-xs-12"><div class="row"><div class="col-xs-6 text-right row-title"><span class="bold">Request Credit Limit<\/span><\/div><div class="col-xs-6 text-left row-data"><span>'+u+"<\/span><\/div><\/div><\/div>");Common.ValidateText(f)&&(n+='<div class="col-sm-6 col-xs-12"><div class="row"><div class="col-xs-6 text-right row-title"><span class="bold">Card Number<\/span><\/div><div class="col-xs-6 text-left row-data"><span>'+f+"<\/span><\/div><\/div><\/div>")}if(hasCNameParameter()?n+='<div class="col-sm-6 col-xs-12"><div class="row"><div class="col-xs-6 text-right row-title"><span class="bold">Credit Card Type<\/span><\/div><div class="col-xs-6 text-left row-data"><span>'+$("#hdCcSelectedCardType").val()+"<\/span><\/div><\/div><\/div>":!hiddenCCType()&&$("#ddlCreditCardType option:selected").length>0&&(n+='<div class="col-sm-6 col-xs-12"><div class="row"><div class="col-xs-6 text-right row-title"><span class="bold">Credit Card Type<\/span><\/div><div class="col-xs-6 text-left row-data"><span>'+$("#ddlCreditCardType option:selected").text()+"<\/span><\/div><\/div><\/div>"),$("#hdIsComboMode").val()=="Y"&&(e=$("#txtComboCreditLimit").val(),Common.GetFloatFromMoney(e)!=0&&(n+='<div class="col-sm-6 col-xs-12"><div class="row"><div class="col-xs-6 text-right row-title"><span class="bold">Request Credit Limit<\/span><\/div><div class="col-xs-6 text-left row-data"><span>'+e+"<\/span><\/div><\/div><\/div>")),o=$("#hdCcSelectedCardName").val(),o!==""&&(n+='<div class="col-sm-6 col-xs-12"><div class="row"><div class="col-xs-6 text-right row-title"><span class="bold">Card Name<\/span><\/div><div class="col-xs-6 text-left row-data"><span>'+o+"<\/span><\/div><\/div><\/div>"),$(this).hide(),$(this).prev("div.row").hide(),n!==""&&($(this).show(),$(this).prev("div.row").show()),$("#hdIsCunaMultipleProductsInsuranceEnabled").val()==="True"){const t="Interested",i="Not Interested";$.each(prodCodeArr,function(r,u){if(u=="GAP"){let r=$("#hdIsGAPInterested").val()=="Y"?t:i;n+='<div class="col-sm-6 col-xs-12"><div class="row"><div class="col-xs-6 text-right row-title"><span class="bold">TruStage Guaranteed Asset Protection<\/span><\/div><div class="col-xs-6 text-left row-data"><span>'+r+"<\/span><\/div><\/div><\/div>"}if(u=="MRC"){let r=$("#hdIsMRCInterested").val()=="Y"?t:i;n+='<div class="col-sm-6 col-xs-12"><div class="row"><div class="col-xs-6 text-right row-title"><span class="bold">TruStage Mechanical Repair Coverage<\/span><\/div><div class="col-xs-6 text-left row-data"><span>'+r+"<\/span><\/div><\/div><\/div>"}if(u=="CI"){let r=$("#hdIsCIInterested").val()=="Y"?t:i;n+='<div class="col-sm-6 col-xs-12"><div class="row"><div class="col-xs-6 text-right row-title"><span class="bold">TruStage Credit Insurance<\/span><\/div><div class="col-xs-6 text-left row-data"><span>'+r+"<\/span><\/div><\/div><\/div>"}if(u=="DP"){let r=$("#hdIsDPInterested").val()=="Y"?t:i;n+='<div class="col-sm-6 col-xs-12"><div class="row"><div class="col-xs-6 text-right row-title"><span class="bold">TruStage Debt Protection<\/span><\/div><div class="col-xs-6 text-left row-data"><span>'+r+"<\/span><\/div><\/div><\/div>"}})}return n}function RenderReviewContent(){if(viewSelectedBranch(),$(".ViewCreditCardInfo").html(ViewCreditCardInfo.call($(".ViewCreditCardInfo"))),$(".ViewAdditionalLoanInfo").html(loanpage_ViewApplicantQuestion.call($(".ViewAdditionalLoanInfo"))),$("#hdIs2ndLoanApp").val()=="Y"){var n=!1;$("#divProtectionInfo .ProtectionInfo").each(function(){var t=$(this);if(t.attr("style")!=undefined&&t.attr("style").indexOf("block")>-1)return n=!0,!1});ViewCreditCardInfo()!=""||$("#div_custom_questions .CustomQuestion").length!=0||n||$("#pagesubmit .page_title").hide();return}$(".ViewAcountInfo").html(ViewAccountInfo.call($(".ViewAcountInfo")));$("#hdEnableReferenceInformation").val()=="Y"&&$(".ViewReferenceInfo").html(ViewReferenceInfo.call($(".ViewReferenceInfo")));$("#hdEnableReferenceInformation").val()=="Y"&&$("#hdEnableSecondaryReferenceInformation").val()=="Y"&&$(".ViewSecondaryReferenceInfo").html(ViewSecondaryReferenceInfo.call($(".ViewSecondaryReferenceInfo")));$(".ViewContactInfo").html(ViewContactInfo.call($(".ViewContactInfo")));$(".ViewAddress").html(ViewAddress.call($(".ViewAddress")));$(".ViewApplicantID").html(CC.DATA.AppIDLogic.ViewApplicantID($(".ViewApplicantID")));$(".SecondaryViewApplicantID").html(CC.DATA.SecondaryAppIDLogic.ViewApplicantID($(".SecondaryViewApplicantID")));$(".ViewFinancialInfo").html(ViewFinancialInfo.call($(".ViewFinancialInfo")));IsAuthorizedUserEnabled()&&$(".ViewAuthorizedUserInfo").html(viewAuthorizedUserInfo.call($(".ViewAuthorizedUserInfo")));$(".ViewPrevEmploymentInfo").html(ViewPrevEmploymentInfo.call($(".ViewPrevEmploymentInfo")));$("#divDeclarationSection").length>0&&$(".ViewDeclaration").html(ViewDeclaration.call($(".ViewDeclaration")));$("#divApplicantQuestion").length>0&&$(".ViewApplicantQuestion").html(ViewApplicantQuestion.call($(".ViewApplicantQuestion")));$("#hdHasCoApplicant").val()==="Y"?renderCoJointAppReview(CC.DATA.co_AppIDLogic,CC.DATA.co_SecondaryAppIDLogic):$(".jna-panel").hide();$("div.review-container div.row-title b").each(function(n,t){if(typeof $(t).data("renameid")=="undefined"){var i=getDataId();$(t).attr("data-renameid",i);RENAME_REPOSITORY[i]=htmlEncode($(t).html())}})}function validatePageSubmit(n){var u,i,f;if($(n).attr("contenteditable")=="true")return!1;var t=!0,r="",e=$(n);if($("#hdIsComboMode").val()==="Y"&&(!$("#div_fom_section").hasClass("hidden")&&$("#pagesubmit").find("#divShowFOM").length>0&&$.lpqValidate("ValidateFOM")==!1&&(t=!1),$.lpqValidate("ValidateProceedMembership")==!1&&(t=!1),$("#hdCcSelectedCardType").val().toUpperCase()==="SECUREDCREDIT"&&$("#hfLenderRef").val().toUpperCase().startsWith("SDFCU")&&Common.GetFloatFromMoney($("#txtFundingDeposit").val())<251&&(r+="Minimum deposit amount should be equal or greater than $251.00<br/>"),$.lpqValidate("ValidateProductSelection")===!1&&(t=!1),validateFS1()==!1&&(t=!1)),$("#reviewpage_divApplicantQuestion").children().length>0&&$.lpqValidate("reviewpage_ValidateApplicantQuestionsXA")===!1&&(t=!1),$("#pagesubmit").find("#divDisclosure").length>0&&$.lpqValidate("ValidateDisclosure_disclosures")==!1&&(t=!1),$("#reviewPanel").find(".ViewCreditCardInfo").length>0&&$.lpqValidate("ValidateViewCreditCardInfo")==!1&&(t=!1),r+=validateVerifyCode(),u=r.split("<br/>"),i=[],$.each(u,function(n,t){t=$.trim(t);t!==""&&$.inArray(t,i)===-1&&i.push(t)}),i.length>0&&(t=!1),t===!1)i.length>0?$("#divErrorPopup").length>0?($("#txtErrorPopupMessage").html(i.join("<br/>")),$("#divErrorPopup").popup("open",{positionTo:"window"})):($("#txtErrorMessage").html(i.join("<br/>")),e.next().trigger("click")):Common.ScrollToError();else{if(window.ABR&&(f=prepareAbrFormValues("pagesubmit"),ABR.FACTORY.evaluateRules("pagesubmit",f)))return!1;if($("#reCAPTCHAEnabled").val()==="True")if($("#reCAPTCHAVersion").val()==="enterprise")reCAPTCHAInstance.onSubmitApplication(saveLoanInfo);else saveLoanInfo();else saveLoanInfo()}}function acceptLaserScanResult(n,t){fillLaserScanResult(n,t);$(t).closest(".scan-result-wrapper").removeClass("open");var i="#pl2";n!==""&&(i="#pl6");goToNextPage(i)}function SetSSOEngageFooterText(){$("#hdnLoanDisc").val()!=""&&($("#divCCLoanDisclaimer").removeClass("hidden"),$("#lblLoanDisc").html("<sup>1<\/sup>"+$("#hdnLoanDisc").val()));$("#hdnRateDisc").val()!=""&&($("#divCCRateDisclaimer").removeClass("hidden"),$("#hdnLoanDisc").val()!=""?$("#lblRateDisc").html("<sup>2<\/sup>"+$("#hdnRateDisc").val()):$("#lblRateDisc").html("<sup>1<\/sup>"+$("#hdnRateDisc").val()))}function SetHideShowSSOFields(){setSSOEngageHiddenFieldsValue("CC")}function HideHONDivIfTokenIsEmptyOrInvalid(){$("#DivHONLastPage").length>0&&!$("#happy-or-not-smiley-digital-embed").children().length>0&&$("#DivHONWidgetText").length>0&&$("#DivHONWidgetText").hide()}function bindSavedData(){}function IshideCreditCardPage(){var r=$("#divCreditCardName"),i=r.find("div[data-panel='cc-options']"),t=$('.divLoanPurposeList a[data-role="button"]'),u=$("#hdCcSelectedLoanPurpose").val(),f=getSelectedCategory(u),n=!1;return $("#hdIsComboMode").val()=="Y"?(i.length==0&&hiddenCCType()||hasCNameParameter())&&(n=!0):i.length==0&&(t.length==0||(t.length==1&&t.text().toUpperCase().indexOf("LIMIT"))==-1)&&(n=!0),($("#hdHasZipCodePool").val()=="Y"&&$("#hdIsComboMode").val()=="Y"||$("#hdHasCCZipCodePool").val()=="Y")&&(n=!1),$("#pl1 .aq-section .loanpage_ApplicantQuestion").length>0&&(n=!1),n}function ScanAccept(n){n==""?(docScanObj.scanAccept(),goToNextPage("#pl2")):(co_docScanObj.scanAccept(),goToNextPage("#pl6"))}var isSubmitWalletAnswer=!1,isCoSubmitWalletAnswer=!1,isSubmittingLoan=!1,HideHONDivOnacceptOffer=!1,docScanObj,co_docScanObj;(function(n){n.DATA={}})(window.CC=window.CC||{},jQuery);$(function(){$("#popNotification").enhanceWithin().popup();const n={showEmployerAddress:$("#hdIsComboMode").val()==="Y"};EMPLogicPI=$.extend(!0,{},EMPLogic);EMPLogicPI.init("ddlEmploymentStatus","","pl2","divEmploymentStatusRest","",n);$("#pl2").on("pageshow",function(){EMPLogicPI.refreshHtml()});EMPLogicJN=$.extend(!0,{},EMPLogic);EMPLogicJN.init("co_ddlEmploymentStatus","co_","pl6","co_divEmploymentStatusRest","",n);$("#pl6").on("pageshow",function(){EMPLogicJN.refreshHtml()});EMPLogicPI_PREV=$.extend(!0,{},EMPLogic);EMPLogicPI_PREV.init("prev_ddlEmploymentStatus","prev_","pl2","prev_divEmploymentStatusRest","",n);EMPLogicJN_PREV=$.extend(!0,{},EMPLogic);EMPLogicJN_PREV.init("co_prev_ddlEmploymentStatus","co_prev_","pl6","co_prev_divEmploymentStatusRest","",n);CC.DATA.AppIDLogic=new ApplicantIDControl("",{DefaultToDL:!0});CC.DATA.SecondaryAppIDLogic=new ApplicantIDControl("Secondary");CC.DATA.co_AppIDLogic=new ApplicantIDControl("co_",{DefaultToDL:!0});CC.DATA.co_SecondaryAppIDLogic=new ApplicantIDControl("co_Secondary");$("#divRequestCreditLimit").hide();creditCardFormat();showRequestCreditLimit();pl1Init();$(document).on("pageshow",function(){var n=$.mobile.pageContainer.pagecontainer("getActivePage").attr("id"),t;n!="pagesubmit"&&n!="popupPDFViewer"&&sessionStorage.setItem("scrollPosition",0);switch(n){case"pl1":pl1Init();break;case"pl2":pushToPagePaths("pl2");CC.FACTORY.cc2Init(!1);break;case"pl6":pushToPagePaths("pl6");CC.FACTORY.cc2Init(!0);break;case"pagesubmit":sessionStorage.getItem("scrollPosition")&&window.scrollTo(0,parseInt(sessionStorage.getItem("scrollPosition")));CC.FACTORY.registerViewCreditCardInfoValidator();pagesubmitInit();Common.bindEvent();break;case"cc_last":HideHONDivIfTokenIsEmptyOrInvalid();pageLastInit();break;case"pageMaxAppExceeded":t="";$("#DivHONLastPage").length>0&&$("#happy-or-not-smiley-digital-embed").children().length>0&&(t=$("#DivHONLastPage"),$("#DivHappyOrNotMaxAppExceedPage").append(t))}});$(document).on("click","#divDisagree a",function(n){var t=$("#hdRedirectURL").val();t==""&&onClickReturnToMainPage(n);goToNextPage($("#decisionPage"));n.preventDefault()});$("#hdHasSSO").val()=="Y"&&$("#hdnVendor").val()=="engage"?(goToNextPage("#divSSOCC"),$("#divSSOCC").removeClass("hidden"),$("#pl1").removeClass("hidden"),$("#pl2").removeClass("hidden"),$("#pl2").children().hide(),$('#pl2 div[data-role="footer"]').hide(),$('#pl2 div[data-role="content"]').hide(),$("#pl1").children().hide(),$('#pl1 div[data-role="footer"]').hide(),$('#pl1 div[data-role="content"]').hide(),$(".divfooter").removeClass("hidden")):IshideCreditCardPage()?(goToNextPage("#pl2"),$("#divSSOCC").addClass("hidden"),$("#pl1").removeClass("hidden"),$("#pl2").removeClass("hidden"),$("#pl2").children().show(),$('#pl2 div[data-role="footer"]').show(),$('#pl2 div[data-role="content"]').show(),$("#pl1").children().show(),$("#desiredCreditLimit").addClass("hidden"),$('#pl1 div[data-role="footer"]').show(),$('#pl1 div[data-role="content"]').show(),$(".divfooter").removeClass("hidden")):(goToNextPage("#pl1"),$("#divSSOCC").addClass("hidden"),$("#pl1").removeClass("hidden"),$("#desiredCreditlimit").removeClass("hidden"),$("#pl2").removeClass("hidden"),$("#pl2").children().show(),$('#pl2 div[data-role="footer"]').show(),$('#pl2 div[data-role="content"]').show(),$("#pl1").children().show(),$('#pl1 div[data-role="footer"]').show(),$('#pl1 div[data-role="content"]').show(),$(".divfooter").removeClass("hidden"));$("input.custom").attr("disabled",!1);handledFontWeightOfDivContent();$("div[name='disclosures'] label").on("click",function(){handleDisableDisclosures(this)});$(".divLoanPurposeList").on("click",".btn-header-theme",function(){var n=$(".divLoanPurposeList .btn-header-theme");n.each(function(){var n=$(this);n.hasClass("active")||n.removeClass("btnActive_on")});handledBtnHeaderTheme($(this))});$("#popUpCreditDiff, #popUpSavingAmountGuid").on("popupafteropen",function(){$("#"+this.id+"-screen").height("")});if(handleHiddenLoanPurpose(),showAndHideComboCreditLimit(),handleShowAndHideBranchNames(),$("div[data-section='proceed-membership']").observer({validators:[function(){return $("#hdProceedMembership").val()==""?"Do you wish to continue opening your membership?":""}],validateOnBlur:!0,group:"ValidateProceedMembership",groupType:"complexUI"}),$("#divLoanPurposeList").observer({validators:[function(){if($("#pl1").find("a[data-command='loan-purpose']").length>0){var n=$("#hdCcSelectedLoanPurpose").val().toUpperCase();if(n==="")return"Please select a purpose"}return""}],validateOnBlur:!0,group:"ValidateLoanPurpose",groupType:"complexUI"}),$("#eCreditCardNumber").observer({validators:[function(){var n,t;if($("#pl1").find("a[data-command='loan-purpose']").length>0){if(n=$("#hdCcSelectedLoanPurpose").val().toUpperCase(),n==="")return $.lpqValidate.showValidation("#divLoanPurposeList","Please select a purpose"),"";if(t=getSelectedCategory($("#hdCcSelectedLoanPurpose").val()),t!=null){if((t.toUpperCase().indexOf("INCREASE")>-1||t.toUpperCase().indexOf("LOWER")>-1||t.toUpperCase().indexOf("UPGRADE")>-1)&&!Common.ValidateText($(this).val()))return"Credit card number is required"}else if((n.indexOf("INCREASE")!=-1||n.indexOf("LOWER")!=-1||n.indexOf("UPGRADE")>-1)&&!Common.ValidateText($(this).val()))return"Credit card number is required"}return""}],validateOnBlur:!0,group:"ValidateCreditInfo"}),$("#ddlCreditCardType").observer({validators:[function(){return Common.ValidateText(this.val())==!1?"Please select Credit Card Type":""}],validateOnBlur:!0,group:"ValidateCreditCardType"}),$("#txtRequestCreditLimit").observer({validators:[function(){var t=$("#txtRequestCreditLimit").val(),i=$("#hdHasSSO").val(),r=Common.GetFloatFromMoney($("#hdnLamount").val()),u=Common.GetFloatFromMoney($("#hdnMinLAmount").val()),n;if(i=="Y"&&$("#divRequestCreditLimit").is(":visible")==!0&&$("#divCreditLimit").is(":visible")==!0){if($("#hdnLamount").val()!=""&&Common.GetFloatFromMoney(t)>r)return"The loan amount cannot exceed $"+Common.FormatCurrency($("#hdnLamount").val());if($("#hdnMinLAmount").val()!=""&&Common.GetFloatFromMoney(t)<u)return"The loan amount cannot be less than $"+Common.FormatCurrency($("#hdnMinLAmount").val())}return CC.FACTORY.isSecondLoanApp()&&isApplyXSellFeatureEnabled()&&(n=Common.GetFloatFromMoney(getParaByName("MaxAmountQualified")),n>0&&n<Common.GetFloatFromMoney(t))?"Requested loan amount cannot exceed "+Common.FormatCurrency(n):""}],validateOnBlur:!0,group:"ValidateCreditLimit"}),getParaByName("autofill")=="true"&&(autoFillData(),$("#eCreditCardNumber").val(maskCCNumber())),$("#hdHasZipCodePool").val()=="Y"&&$("#hdIsComboMode").val()=="Y"){var t=$("#txtLocationPoolCode");typeof loanProductFactory!="undefined"&&loanProductFactory!==null&&loanProductFactory.handledLocationPoolProducts(t)}else $("#hdHasCCZipCodePool").val()=="Y"&&CC.FACTORY.handledLocationPoolLoanInfo();docScanObj=new LPQDocScan("");co_docScanObj=new LPQDocScan("co_");window.IST&&IST.FACTORY.loadCarrierIdentification()}),function(n,t,i){n.FACTORY={};n.DATA={};n.FACTORY.getCreditCardInfo=getPersonalLoanInfo;n.FACTORY.cc2Init=function(n){var u="",r=null,f;n?(r=COPREFILLDATA,u="co_"):r=PREFILLDATA;r!=null&&(t.each(r,function(n,i){var r=t("#"+n);r.is("input")&&(r.attr("type")==="text"||r.attr("type")==="tel"||r.attr("type")==="password"||r.attr("type")==="email")?r.val(i):r.is("select")&&(n.indexOf("preferredContactMethod")>-1?(i=mappingPreferredContactValue(i),r.val(i)):r.val(i),r.selectmenu("refresh"),r.trigger("change"))}),f=t("#"+u+"txtMailingAddress").val(),f!=i&&f!=""&&(t("#"+u+"lnkHasMaillingAddress").attr("status","Y"),t("#"+u+"divMailingAddressForm").show()));r=null};n.FACTORY.hasZipCodePoolPurposes=function(r){var u=CREDITCARDPURPOSES,s=n.FACTORY.IsLineIncreasePurposeRespectLocationPool(),h=n.FACTORY.filterProductsByZipCode(r),f,e,o;if(t.isEmptyObject(u))return!1;if(!n.FACTORY.hasCardNames())return s?h.length==0?!1:!0:!0;for(f in u){if(e=u[f].Item1!=i?u[f].Item1.toUpperCase():"",o=u[f].Item3!=i?u[f].Item3.toUpperCase():"",e.indexOf("INCREASE")>-1||o.indexOf("INCREASE")>-1)return!0;if(e.indexOf("NEW_CARD")>-1||o.indexOf("NEW")>-1){if(n.FACTORY.getCurrentCardNames(r,"NEW").length>0)return!0}else if((e.indexOf("UPGRADE")>-1||o.indexOf("UPGRADE")>-1)&&n.FACTORY.getCurrentCardNames(r,"UPGRADE").length>0)return!0}return!1};n.FACTORY.getProductItem=function(n){var i=CCPRODUCTS.ZipPoolProducts,r;if(t.isEmptyObject(i))return null;for(r in i)if(n.toUpperCase()==i[r].CreditCardName.toUpperCase())return i[r];return null};n.FACTORY.getCurrentCardNames=function(r,u){var o=[],f=CREDITCARDNAMES,l,s,e,a,h;if(t.isEmptyObject(f))return o;l=getSelectedZipPoolNames(r,CCPRODUCTS.ZipPoolIds,CCPRODUCTS.ZipPoolNames);for(s in f)if(e=f[s].Item1!=i?f[s].Item1.toUpperCase():"",a=f[s].Item4!=i?f[s].Item4.toUpperCase():"",(e.indexOf(u)>-1||a.indexOf(u)>-1||a.indexOf("BOTH")>-1)&&(h=n.FACTORY.getProductItem(e),h!=null)){var v=h.ZipCodeFilterType,y=h.CreditCardName,c=h.ZipCodePoolName;v=="ALL"?o.push(e):v=="INCLUDE"?c!=""&&t.inArray(c,l)>-1&&o.push(e):v=="EXCLUDE"&&c!=""&&t.inArray(c,l)==-1&&o.push(e)}return o};n.FACTORY.hasCardNames=function(){return t("#divCreditCardName").find("div[data-panel='cc-options']").length>0};n.FACTORY.getCreditCardTypes=function(){var n=[];return t("#ddlCreditCardType option").length==0?n:(t("#ddlCreditCardType option").each(function(){t(this).val()!=i&&t(this).val().trim()!=""&&n.push(t(this).val())}),n)};n.FACTORY.FilteredProductsByCCTypes=function(){var f=n.FACTORY.getCreditCardTypes(),i=CCPRODUCTS.ZipPoolProducts,r=[],u,e;if(t.isEmptyObject(f)||t.isEmptyObject(i))return r;for(u in i)e=i[u].CreditCardType,t.inArray(e.toUpperCase(),f)>-1&&r.push(i[u]);return r};n.FACTORY.getCurrentCardTypes=function(i){var e=[],r=n.FACTORY.FilteredProductsByCCTypes(),h=getSelectedZipPoolNames(i,CCPRODUCTS.ZipPoolIds,CCPRODUCTS.ZipPoolNames);for(var o in r){var c=r[o].CreditCardType,s=r[o].ZipCodeFilterType,u=r[o].ZipCodePoolName,f=!1;s=="ALL"?f=!0:s=="INCLUDE"?u!=""&&t.inArray(u,h)>-1&&(f=!0):s=="EXCLUDE"&&u!=""&&t.inArray(u,h)==-1&&(f=!0);f&&t.inArray(c,e)==-1&&e.push(c)}return e};n.FACTORY.filterProductsByZipCode=function(n){var u=[],i=CCPRODUCTS.ZipPoolProducts,f,r,e,o;if(t.isEmptyObject(i))return u;f=getSelectedZipPoolNames(n,CCPRODUCTS.ZipPoolIds,CCPRODUCTS.ZipPoolNames);for(r in i)e=i[r].ZipCodePoolName,o=i[r].ZipCodeFilterType,t.inArray(e,f)>-1&&o!="EXCLUDE"&&u.push(i[r]);return u};n.FACTORY.IsLineIncreasePurposeRespectLocationPool=function(){return t("#hdLineIncreasePurposeRespectLocationPool").val()=="Y"};n.FACTORY.showAndHideZipPoolPurposes=function(i){var f=n.FACTORY.getCurrentCardNames(i,"NEW"),e=n.FACTORY.getCurrentCardNames(i,"UPGRADE"),o=n.FACTORY.getCurrentCardTypes(i),r=n.FACTORY.hasCardNames(),s=n.FACTORY.filterProductsByZipCode(i),u=n.FACTORY.IsLineIncreasePurposeRespectLocationPool();t('#divLoanPurposeList a[data-command="loan-purpose"]').each(function(){var n=t(this),h=n.attr("data-key").toUpperCase(),i=getSelectedCategory(h),c;i=i!=null?i.toUpperCase():"";r?h.indexOf("NEW")>-1||i.indexOf("NEW")>-1?f.length>0?n.removeClass("hidden"):n.addClass("hidden"):h.indexOf("UPGRADE")>-1||i.indexOf("UPGRADE")>-1?e.length>0?n.removeClass("hidden"):n.addClass("hidden"):n.addClass("hidden"):u&&i.indexOf("INCREASE")>-1?s.length==0?n.addClass("hidden"):n.removeClass("hidden"):(c=n.attr("data-key").toUpperCase().indexOf("SECURE")!=-1?"SECUREDCREDIT":"CREDIT",t.inArray(c,o)>-1?n.removeClass("hidden"):n.addClass("hidden"));u||(h.indexOf("INCREASE")>-1||i.indexOf("INCREASE")>-1)&&n.removeClass("hidden");n.hasClass("active")&&(n.removeClass("active"),n.removeClass("btnActive_on"))});t('#divLoanPurposeList a[data-command="loan-purpose"]').length>t('#divLoanPurposeList a[data-command="loan-purpose"][class~="hidden"]').length?(t("#divLoanPurposeList").show(),t("#divRequestCreditLimit").hide(),r&&t("#divCCType").addClass("hidden")):t("#divLoanPurposeList").hide();t("#hdCcSelectedLoanPurpose").val("")};n.FACTORY.handledLocationPoolLoanInfo=function(){t("#cc_txtLocationPoolCode").on("keyup paste",function(){let e=t(this),u=e.val(),r=t("#divLoanInfo"),f=t("#cc_divNoAvailableProducts");setTimeout(function(){if(/[0-9]{5}/.test(u)){if(n.FACTORY.hasZipCodePoolPurposes(u)&&t("#hdIsComboMode").val()!="Y"){var e=t("#divLoanPurposeList"),o=t("#hdParamLoanPurpose").val();(o==i||o=="")&&n.FACTORY.showAndHideZipPoolPurposes(u);e.find('a[data-command="loan-purpose"]').length>e.find('a[data-command="loan-purpose"].hidden').length?(f.addClass("hidden"),r.removeClass("hidden")):(f.removeClass("hidden"),r.addClass("hidden"));t("#txtZip").val(u);t("#txtZip").attr("disabled","disabled");t("#txtZip").trigger("change");e.find('a[data-command="loan-purpose"]').length==1?(e.find('a[data-command="loan-purpose"]').trigger("click"),e.hide()):e.find('a[data-command="loan-purpose"]').length-e.find('a[data-command="loan-purpose"].hidden').length==1&&(e.find('a[data-command="loan-purpose"]:not([class~="hidden"])').trigger("click"),e.hide())}else t("#hdIsComboMode").val()=="Y"?(f.addClass("hidden"),r.removeClass("hidden")):(f.removeClass("hidden"),r.addClass("hidden"));t("#hdHasSSO").val()=="Y"&&t("#hdnVendor").val()=="engage"?(t("#hdnSSOPreApproval").val().toUpperCase()!=="NO"&&t("#divSSOCCOffer").removeClass("hidden"),t("#divSSOCCFooter").removeClass("hidden"),SetSSOEngageFooterText(),SetHideShowSSOFields()):(t("#divSSOCCOffer").addClass("hidden"),t("#divSSOCCFooter").addClass("hidden"))}else r.addClass("hidden")},400)})};n.FACTORY.registerViewCreditCardInfoValidator=function(){t("#reviewPanel").observer({validators:[function(){if(t("#hdIs2ndLoanApp").val()=="Y"){if(t("#reviewPanel .ViewCreditCardInfo").children().find("div").length==0)return"Please complete all required fields. "}else if(t("#reviewPanel .ViewAcountInfo").children().find("div").length==0)return"Please complete all required fields. ";return""}],validateOnBlur:!1,group:"ValidateViewCreditCardInfo"})};n.FACTORY.filterApplyXsellLoanPurposes=function(){t('#divLoanPurposeList a[data-command="loan-purpose"]').each(function(){var i=t(this),r=i.attr("data-key").toUpperCase(),n=getSelectedCategory(r);n=n!=null?n.toUpperCase():"";n==""&&r.indexOf("NEW")>-1||n.indexOf("NEW")>-1?i.removeClass("hidden"):i.addClass("hidden")})};n.FACTORY.filterApplyXsellCardName=function(n){n!=i&&t.trim(n)!=""&&t("#divCreditCardName div[data-card-name]").each(function(){var i=t(this),r=i.closest("div.header_theme2"),u=i.attr("data-card-name");u!=n?r.addClass("hidden"):r.removeClass("hidden")})};n.FACTORY.hasApplyXSellCardName=function(n){return t('#divCreditCardName div[data-card-name="'+n+'"]').length>0};n.FACTORY.isSecondLoanApp=function(){return t("#hdIs2ndLoanApp").val()=="Y"};n.FACTORY.handleShowAndHideContinueButtonForXSellApp=function(t,i){if(n.FACTORY.isSecondLoanApp()&&isApplyXSellFeatureEnabled()){var r=getParaByName("creditcardname"),u=n.FACTORY.hasApplyXSellCardName(r);u?(t.show(),i.hide()):(t.hide(),i.show())}};n.FACTORY.displayApplyXSellLoanPurposeAndCardName=function(){if(n.FACTORY.isSecondLoanApp()&&isApplyXSellFeatureEnabled()){var t=getParaByName("creditcardname");n.FACTORY.filterApplyXsellLoanPurposes();n.FACTORY.filterApplyXsellCardName(t)}}}(window.CC=window.CC||{},jQuery);$(document).ready(function(){var n,t;const i=$("#reCAPTCHAEnabled").val()==="True";if(i){const n=$("#reCAPTCHAVersion").val();reCAPTCHAInstance=new MLReCAPTCHA[n]("creditCardLoan","#credit-card-submit");reCAPTCHAInstance.init()}n="pl1";window.ABR&&(t=$("#hdHasSSO").val(),ABR.FACTORY.evaluateIsSSORule(n,t));handleIsSSORuleWhenClickingBackButonOnFireFoxBrowswer(n)});