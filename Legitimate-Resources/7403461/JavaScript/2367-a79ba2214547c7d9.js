(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2367],{89567:function(e,t,r){var n=r(40554);e.exports=function(e,t){var r;if("function"!=typeof t)throw TypeError("Expected a function");return e=n(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=void 0),r}}},51463:function(e,t,r){var n=r(89567);e.exports=function(e){return n(2,e)}},20155:function(e,t,r){"use strict";var n=r(4730),c=r(59499),i=r(94184),s=r.n(i),o=r(67294),a=r(74075),l=r.n(a),u=r(85893);let p=["className","children","wrapperId","style","wrapperStyle","isHideIcon","inputClassName","contentClassName"];function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach(function(t){(0,c.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let b=e=>(0,u.jsx)("svg",f(f({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24","data-testid":"svg-checked"},e),{},{children:(0,u.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})})),v=e=>(0,u.jsx)("svg",f(f({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24","data-testid":"svg-unchecked"},e),{},{children:(0,u.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})})),O=e=>(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(b,f(f({},e),{},{className:`fill-current ${e.checked?"block":"hidden"}`})),(0,u.jsx)(v,f(f({},e),{},{className:`fill-current ${e.checked?"hidden":"block"}`}))]}),j=(0,o.forwardRef)((e,t)=>{let{className:r,children:c,wrapperId:i,style:o,wrapperStyle:a,isHideIcon:d,inputClassName:b,contentClassName:v}=e,j=(0,n.Z)(e,p);return(0,u.jsxs)("label",{className:s()("flex",l().Checkbox,r),htmlFor:j.id,id:i,style:a,"data-testid":"Checkbox",children:[(0,u.jsxs)("div",{className:s()("mr-2 text-viridian self-start",v),children:[(0,u.jsx)("input",f(f({ref:t,type:"checkbox"},j),{},{className:s()("absolute opacity-0 z-0 w-1 h-1 overflow-hidden",b)})),!d&&(0,u.jsx)(O,{"aria-hidden":"true",checked:j.checked})]}),c]})});j.displayName="Checkbox",t.Z=j},2367:function(e,t,r){"use strict";r.d(t,{A:function(){return g}});var n=r(59499),c=r(4730),i=r(94184),s=r.n(i),o=r(82580),a=r(67294),l=r(86896),u=r(44012),p=r(20155),d=r(20296),f=r(1163),b=r(85893);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}let O=e=>{let{id:t,className:r,children:c}=e,{submitCount:i}=(0,o.u6)(),[{value:a},{touched:l,error:d},{setValue:O}]=(0,o.U$)(t),j=(i>0||l)&&d,m=`${t}-error`;return(0,b.jsxs)("div",{className:s()("flex flex-col",r),children:[(0,b.jsx)(p.Z,{id:t,name:t,"data-testid":t,className:f.X2,"aria-describedby":j?m:void 0,checked:a,onChange:e=>O(e.currentTarget.checked),children:(0,b.jsx)("span",{className:"mr-2",children:c})}),j&&(0,b.jsx)("div",{id:m,className:"text-alertRed mt-1 ds-font-tiny",children:(0,b.jsx)(u.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},d))})]})};var j=r(72795),m=r(15576);let h=["terms"];function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let g=e=>{let{terms:t}=e,r=(0,c.Z)(e,h),n=(0,l.Z)(),{values:i,setValues:v,setFieldValue:y,getFieldMeta:g}=(0,o.u6)(),w=null==t?void 0:t.every(e=>{let{id:t}=e;return!!i[t]});return(0,a.useEffect)(()=>{null!=t&&t.length&&t.forEach(e=>{let{value:t}=g(e.id);void 0===t&&y(e.id,!1)},{})},[t]),(0,b.jsx)("div",x(x({},r),{},{className:s()(r.className),children:(0,b.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,b.jsxs)("div",{className:"flex flex-row space-x-1",children:[(0,b.jsx)("span",{className:"font-medium",children:(0,b.jsx)(u.Z,x({},j.Z.dataUsageConsentTitle))}),(0,b.jsx)(d.Z,{className:"max-w-[320px]",ariaLabel:n.formatMessage(j.Z.dataUsageConsentHint),toolTipText:(0,b.jsx)(u.Z,x({},j.Z.dataUsageConsentHint)),hasCloseButton:!0,tooltipClassName:"sm:max-w-xs ds-font-small"})]}),(0,b.jsxs)("div",{className:"flex flex-col space-y-3",children:[(0,b.jsx)(p.Z,{id:"accept-all",name:"accept-all","data-testid":"accept-all",className:f.X2,checked:w,onChange:()=>{v(x(x({},i??{}),t.reduce((e,t)=>x(x({},e),{},{[t.id]:!w}),{})))},children:(0,b.jsx)("span",{className:"mr-2",children:(0,b.jsx)(u.Z,x({},j.Z.dataConsentAcceptAll))})}),(0,b.jsx)("hr",{className:"mt-4 border-0 border-b border-gray3"}),null==t?void 0:t.map(e=>{let t=m.WF[null==e?void 0:e.id];return t?(0,b.jsx)(O,{id:e.id,children:(0,b.jsx)(u.Z,x(x({},t.text),{},{values:{LINK:null!=t&&t.linkUrl?(0,b.jsx)("a",{className:"text-viridian",target:"_blank",rel:"noreferrer",href:null==t?void 0:t.linkUrl,children:(0,b.jsx)(u.Z,x({},null==t?void 0:t.linkText))}):void 0}}))},e.id):null})]})]})}))}},42761:function(e,t,r){"use strict";r.d(t,{En:function(){return s},LY:function(){return o},Y0:function(){return p},a$:function(){return l},py:function(){return a},yb:function(){return u}});var n=r(51463),c=r.n(n),i=r(79832);let s="Terms",o="TermsModal",a="TermsSubmit",l=(e,t)=>(0,i.ZP)({event:"gaEvent",eventCategory:s,eventAction:t?"AcceptTermsReg":"AcceptTermsModal",eventLabel:e}),u=c()(()=>{(0,i.ZP)({event:"gaEvent",eventCategory:s,eventLabel:o,eventAction:"shown"})}),p=c()(()=>{(0,i.ZP)({event:"gaEvent",eventCategory:s,eventLabel:"TermsReg",eventAction:"shown"})})},15576:function(e,t,r){"use strict";let n;r.d(t,{WF:function(){return D},YU:function(){return C},e6:function(){return E}});var c=r(59499),i=r(67294),s=r(86896),o=r(76661),a=r(256);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){(0,c.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let p={},d=o.Ps`
  mutation acceptTerms($input: AcceptTermsInput!) {
    acceptTerms(input: $input) {
      errors {
        code
        message
      }
    }
  }
`;var f=r(93633);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach(function(t){(0,c.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let O={},j=o.Ps`
  query termsDueByLocation($input: TermsDueByLocationInput!) {
    termsDueByLocation(input: $input) {
      termsDue {
        id
        kind
        required
      }
    }
  }
`;var m=r(43488),h=r(99847),y=r(590),x=r(95009),g=r(72795),w=r(42761),k=r(1163);function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach(function(t){(0,c.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}(n||(n={})).KISA="kisa";let D={[m.K5.KisaTerms]:{text:g.Z.kisaTerms,linkUrl:(0,x.ziY)(),linkText:g.Z.dataConsentLink},[m.K5.KisaPersonal]:{text:g.Z.kisaPersonal,linkUrl:(0,x.VBv)(),linkText:g.Z.dataConsentLink},[m.K5.KisaDataTransfer]:{text:g.Z.kisaDataTransfer,linkUrl:(0,x.$m8)(),linkText:g.Z.dataConsentLink},[m.K5.KisaOptional]:{text:g.Z.kisaOptional,linkUrl:(0,x.VBv)(),linkText:g.Z.dataConsentLink},[m.K5.KisaEmailMarketing]:{text:g.Z.kisaEmailMarketing}},N=e=>null==e?void 0:e.some(e=>e.kind===n.KISA),C=()=>{var e;let{0:t,1:r}=(0,i.useState)(),{data:n}=function(e){let t=v(v({},O),e);return f.a(j,t)}({variables:{input:{countryCode:t}},skip:!t}),c=null==n?void 0:null===(e=n.termsDueByLocation)||void 0===e?void 0:e.termsDue,s=(0,k.Wp)(c),o=(0,i.useCallback)(e=>{e&&r(e)},[]),a=N(c);return{terms:c,hasDuesTerms:s,hasKISA:a,onCountryChange:o}},E=e=>{var t,r,n;let{user:c}=(0,y.Z)("cache-first",e),[o,{loading:l}]=function(e){let t=u(u({},p),void 0);return a.D(d,t)}(),{0:f,1:b}=(0,i.useState)([]),{sendNotification:v}=(0,h.ZP)(),O=(0,s.Z)(),j=(0,i.useCallback)(async e=>{try{var t,r,n;let c=await o({variables:{input:{terms:null==e?void 0:e.map(e=>({type:e}))}}});if((null==c?void 0:null===(t=c.data)||void 0===t?void 0:null===(r=t.acceptTerms)||void 0===r?void 0:null===(n=r.errors)||void 0===n?void 0:n.length)===0)b(t=>[...t,...e]),(0,w.a$)("success");else throw Error("error")}catch(e){v(O.formatMessage(g.Z.saveError),{id:"terms",type:h.Dy.ERROR}),(0,w.a$)("error")}},[o,O,v]),m=null==c?void 0:null===(t=c.terms)||void 0===t?void 0:null===(r=t.termsDue)||void 0===r?void 0:null===(n=r.map(e=>Z(Z({},e),{},{id:(0,k.Ux)(e.id)})))||void 0===n?void 0:n.filter(e=>!(null!=f&&f.includes(e.id))),x=(0,k.Wp)(m),P=N(m);return{acceptTerms:j,loading:l,terms:m,hasDuesTerms:x,hasKISA:P}}},74075:function(e){e.exports={Checkbox:"Checkbox_Checkbox__zfZJ_"}}}]);