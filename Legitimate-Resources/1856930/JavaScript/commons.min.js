!function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var a;"undefined"!=typeof window?a=window:"undefined"!=typeof global?a=global:"undefined"!=typeof self&&(a=self);a.hull=f()}}(function(){return function d(a,h,e){function b(g,q){if(!h[g]){if(!a[g]){var k="function"==typeof require&&require;if(!q&&k)return k(g,!0);if(c)return c(g,!0);q=Error("Cannot find module '"+g+"'");throw q.code="MODULE_NOT_FOUND",
q;}q=h[g]={exports:{}};a[g][0].call(q.exports,function(c){var d=a[g][1][c];return b(d?d:c)},q,q.exports,d,a,h,e)}return h[g].exports}for(var c="function"==typeof require&&require,g=0;g<e.length;g++)b(e[g]);return b}({1:[function(a,h,e){function d(a,c,d){return(c[0]-a[0])*(d[1]-a[1])-(c[1]-a[1])*(d[0]-a[0])}h.exports=function(a){var b=[];for(var g=0;g<a.length;g++){for(;2<=b.length&&0>=d(b[b.length-2],b[b.length-1],a[g]);)b.pop();b.push(a[g])}b.pop();g=a.reverse();for(var e=[],h=0;h<g.length;h++){for(;2<=
e.length&&0>=d(e[e.length-2],e[e.length-1],g[h]);)e.pop();e.push(g[h])}e.pop();b=e.concat(b);b.push(a[0]);return b}},{}],2:[function(a,h,e){h.exports={toXy:function(a,b){return void 0===b?a.slice():a.map(function(a){return(new Function("pt","return [pt"+b[0]+",pt"+b[1]+"];"))(a)})},fromXy:function(a,b){return void 0===b?a.slice():a.map(function(a){return(new Function("pt","var o \x3d {}; o"+b[0]+"\x3d pt[0]; o"+b[1]+"\x3d pt[1]; return o;"))(a)})}}},{}],3:[function(a,h,e){function d(a,c){this._cells=
[];this._cellSize=c;a.forEach(function(a){var b=this.point2CellXY(a),c=b[0];b=b[1];void 0===this._cells[c]&&(this._cells[c]=[]);void 0===this._cells[c][b]&&(this._cells[c][b]=[]);this._cells[c][b].push(a)},this)}d.prototype={cellPoints:function(a,c){return void 0!==this._cells[a]&&void 0!==this._cells[a][c]?this._cells[a][c]:[]},rangePoints:function(a){var b=this.point2CellXY([a[0],a[1]]);a=this.point2CellXY([a[2],a[3]]);for(var d=[],e=b[0];e<=a[0];e++)for(var h=b[1];h<=a[1];h++)d=d.concat(this.cellPoints(e,
h));return d},removePoint:function(a){var b=this.point2CellXY(a);b=this._cells[b[0]][b[1]];for(var d,e=0;e<b.length;e++)if(b[e][0]===a[0]&&b[e][1]===a[1]){d=e;break}b.splice(d,1);return b},point2CellXY:function(a){var b=parseInt(a[0]/this._cellSize);a=parseInt(a[1]/this._cellSize);return[b,a]},extendBbox:function(a,c){return[a[0]-c*this._cellSize,a[1]-c*this._cellSize,a[2]+c*this._cellSize,a[3]+c*this._cellSize]}};h.exports=function(a,c){return new d(a,c)}},{}],4:[function(a,h,e){function d(a){return a.filter(function(a,
b,c){c=c[b-1];return 0===b||!(c[0]===a[0]&&c[1]===a[1])})}function b(a){return a.sort(function(a,b){return a[0]==b[0]?a[1]-b[1]:a[0]-b[0]})}function c(a,b){return Math.pow(b[0]-a[0],2)+Math.pow(b[1]-a[1],2)}function g(a,b,d){var g=[b[0]-a[0],b[1]-a[1]],e=[d[0]-a[0],d[1]-a[1]];b=c(a,b);a=c(a,d);return(g[0]*e[0]+g[1]*e[1])/Math.sqrt(b*a)}function k(a,b){for(var c=0;c<b.length-1;c++){var d=[b[c],b[c+1]];if(!(a[0][0]===d[0][0]&&a[0][1]===d[0][1]||a[0][0]===d[1][0]&&a[0][1]===d[1][1])&&m(a,d))return!0}return!1}
function q(a){for(var b=Infinity,c=Infinity,d=-Infinity,g=-Infinity,e=a.length-1;0<=e;e--)a[e][0]<b&&(b=a[e][0]),a[e][1]<c&&(c=a[e][1]),a[e][0]>d&&(d=a[e][0]),a[e][1]>g&&(g=a[e][1]);return[d-b,g-c]}function l(a,b,d,e,h){for(var p,q,n,m,w,y,t,A=!1,D=0;D<a.length-1;D++)if(p=[a[D],a[D+1]],q=p[0].join()+","+p[1].join(),!(c(p[0],p[1])<b||!0===h[q])){n=0;w=[Math.min(p[0][0],p[1][0]),Math.min(p[0][1],p[1][1]),Math.max(p[0][0],p[1][0]),Math.max(p[0][1],p[1][1])];do{w=e.extendBbox(w,n);y=w[2]-w[0];t=w[3]-
w[1];for(var u,K=p,J=e.rangePoints(w),Q=a,S=null,T=B,U=B,L=0;L<J.length;L++)u=g(K[0],K[1],J[L]),m=g(K[1],K[0],J[L]),u>T&&m>U&&!k([K[0],J[L]],Q)&&!k([K[1],J[L]],Q)&&(T=u,U=m,S=J[L]);m=S;n++}while(null===m&&(d[0]>y||d[1]>t));y>=d[0]&&t>=d[1]&&(h[q]=!0);null!==m&&(a.splice(D+1,0,m),e.removePoint(m),A=!0)}return A?l(a,b,d,e,h):a}var m=a("./intersect.js"),n=a("./grid.js"),p=a("./format.js"),t=a("./convex.js"),B=Math.cos(90/(180/Math.PI));h.exports=function(a,c,g){c=c||20;if(4>a.length)return a.slice();
var e=d(b(p.toXy(a,g)));var k=q(e);var h=[.6*k[0],.6*k[1]];var m=t(e);a=e.filter(function(a){return 0>m.indexOf(a)});c=l(m,Math.pow(c,2),h,n(a,Math.ceil(1/(e.length/(k[0]*k[1])))),{});return p.fromXy(c,g)}},{"./convex.js":1,"./format.js":2,"./grid.js":3,"./intersect.js":5}],5:[function(a,h,e){function d(a,c,d,e,h,l){a=(l-c)*(d-a)-(e-c)*(h-a);return 0<a?!0:0>a?!1:!0}h.exports=function(a,c){var b=a[0][0],e=a[0][1],h=a[1][0];a=a[1][1];var l=c[0][0],m=c[0][1],n=c[1][0];c=c[1][1];return d(b,e,l,m,n,c)!==
d(h,a,l,m,n,c)&&d(b,e,h,a,l,m)!==d(b,e,h,a,n,c)}},{}]},{},[4])(4)});
var Channel_autocomplete={},getAsyncPromise=function(f){var a=$.Deferred();$.getJSON(f).done(function(f){a.resolve(f)}).fail(function(f){return a.reject(f)});return a.promise()},getChannelListPromise=function(f){return getAsyncPromise("/content/dam/virginmedia/dotcom/static/channel-list/channel-data-vmp.js").then(function(a){return a.channels.map(function(a){f[a.channelName]=a.logoName;return a.channelName})})},markInvalid=function(f){f.markInvalid("Please select a valid channel");f.validator=function(){return!1}},
markValid=function(f){f.clearInvalid();f.validator=function(){return!0}},setChannelLogo=function(f,a,h){a=a.find("name","./channelLogo")[0];$("#"+a.getId()).val("/content/dam/virginmedia/dotcom/static/channel-list/tv-logos/"+f[h])};
Channel_autocomplete.prepareDialog=function(f){var a=f.items.get(0).items.get(0),h=a.find("name","./showChannel")[0],e=$("#"+h.getId()),d={};markValid(h);$(".ui-helper-hidden-accessible").addClass("hide");getChannelListPromise(d).then(function(b){e.autocomplete({source:b,select:function(){$(".ui-helper-hidden-accessible").addClass("hide")},close:function(){d[h.getValue()]?($(".ui-helper-hidden-accessible").addClass("hide"),markValid(h),setChannelLogo(d,a,h.getValue())):($(".ui-helper-hidden-accessible").removeClass("hide"),
markInvalid(h))},open:function(){setTimeout(function(){$(".ui-autocomplete").addClass("autocomplete-section");$(".ui-helper-hidden-accessible").addClass("autocomplete-hint")},0)}});e.on("autocompleteselect",function(b,g){setChannelLogo(d,a,g.item.value)});e.on("autocompleteresponse",function(a,b){b&&b.content&&0!==b.content.length||markInvalid(h)})})};
var VM=function(f,a){f.homeTemplate=function(){return{init:function(){var f=a(".partner-wrap");0===a.trim(f.text()).length&&(f.remove(),a(".content-section").addClass("content-padded"))}}}();return f}(VM||{},jQuery);jQuery(window).load(function(){VM.homeTemplate.init()});
VM=function(f,a){f.header=function(){function f(a){var b=document.createElement("a");b.href=a.attr("href");a=e(b.pathname);return a.lastIndexOf("/",0)?"/"+a:a}function e(a){var b=/\.html$/;return void 0!==a&&a.match(b)?a.replace(".html",""):a}var d,b,c=function(b,c,d,g){function e(){function a(){k=+new Date;d.apply(h,p)}function e(){f=void 0}var h=this,l=+new Date-k,p=arguments;g&&!f&&a();f&&clearTimeout(f);void 0===g&&l>b?a():!0!==c&&(f=setTimeout(g?e:a,void 0===g?b-l:b))}var f,k=0;"boolean"!==typeof c&&
(g=d,d=c,c=void 0);a.guid&&(e.guid=d.guid=d.guid||a.guid++);return e},g=function(){function g(){var b=a(".unified-header-menu-mobile ul").height(),c=a(window).innerHeight(),d=58>a(".unified-header-level-one").outerHeight(!0)?58:a(".unified-header-level-one").outerHeight(!0);b=a(window).height()-b-57;991>=a(window).width()&&(768<=a(window).width()?a(".sub-label").css("max-height",b+"px"):(a(".unified-header-main-menu").css("height",c-d),a(".modal-open.header-modal header").css("height",c)),a("section").css("margin-top",
"58px"))}var e=d.find(".unified-header-menu"),f=d.find(".unified-header-menu-toggle"),k=d.find(".sub-label"),h=d.find(".unified-header-menu-2-level-toggle"),l=d.find(".sublinks-subsection"),q=a("\x3cdiv class\x3d'overlay hidden'\x3e\x3c/div\x3e").insertAfter("#unified-header");f.on("click",function(b){b.preventDefault();d.hasClass("unified-header-menu--open")?(k.find(".level-two-sublinks-dropdown").removeClass("active"),k.find(".sublinks-subsection").removeClass("active"),k.find(".chevron-down").removeClass("rotate"),
a("section").css("margin-top","inherit")):a("section").css("margin-top","58px");a("body").toggleClass("modal-open header-modal");f.find(".menu-icon").toggleClass("hamburger-menu close-menu");q.toggleClass("hidden");e.toggleClass("active");d.toggleClass("unified-header-menu--open");d.hasClass("unified-header-menu--open")?(g(),a(window).resize(c(200,function(){g()}))):a("header").css("height","auto")});q.on("click",function(){d.toggleClass("unified-header-menu--open");f.find(".menu-icon").toggleClass("hamburger-menu close-menu");
q.addClass("hidden");k.find(".level-two-sublinks-dropdown").removeClass("active");k.find(".sublinks-subsection").removeClass("active");k.find(".chevron-down").removeClass("rotate");a("section").css("margin-top","inherit")});h.on("click",function(c){var g=a(this),e=g.parent(),f=d.find(".unified-header-main-menu"),k=f.find(".level-two-sublinks-dropdown"),h=f.find("\x3e ul");c.preventDefault();b?(g.toggleClass("active"),f.toggleClass("active"),h.css("height","auto"),f.hasClass("active")||k.removeClass("active")):
(e.find(".level-two-sublinks-dropdown").hasClass("active")?(e.parent().find(".level-two-sublinks-dropdown").removeClass("active"),e.parent().find(".sublinks-subsection").removeClass("active")):(e.parent().find(".level-two-sublinks-dropdown").removeClass("active"),e.parent().find(".sublinks-subsection").removeClass("active"),e.find(".level-two-sublinks-dropdown").addClass("active")),e.find(".level-two-sublinks-dropdown").hasClass("active")?(e.parent().find(".chevron-down").removeClass("rotate"),e.find(".unified-header-menu-2-level-toggle .chevron-down").addClass("rotate")):
e.parent().find(".chevron-down").removeClass("rotate"))});l.on("click",function(b){b=a(this);var c=b.parent();b.hasClass("active")?c.find(".sublinks-subsection").removeClass("active"):(c.find(".sublinks-subsection").removeClass("active"),b.addClass("active"));b.hasClass("active")?(c.find(".chevron-down").removeClass("rotate"),b.find(".chevron-down").addClass("rotate")):c.find(".chevron-down").removeClass("rotate")})},k=function(){var b=d.find(".unified-header-main-menu"),c=b.find(".fa-arrow-right"),
g=b.find("\x3e ul");c.on("click",function(c){var d=a(this).parent().siblings(".level-two-sublinks-dropdown"),e=d.find(".level-two-sublinks-dropdown-subsection"),f=e.height(),k=b.height();c.preventDefault();d.addClass("active");k>f?e.height(k):g.height(f)});b.find(".back-button").on("click",function(){var b=a(this).parents(".level-two-sublinks-dropdown");b.removeClass("active");b.one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){a(this).hasClass("active")||
g.css("height","auto")})});a(window).on("resize",function(){var c=g.find(".level-two-sublinks-dropdown"),e=g.find(".unified-header-main-menu-item");991>=a(window).width()&&(d.hasClass("unified-header-menu--open")?a("section").css("margin-top","58px"):a("section").css("margin-top","inherit"));991<a(window).width()?(g.css("height","auto"),a("section").css("margin-top","inherit"),c.each(function(){var b=a(this);b.hasClass("active")&&b.removeClass("active")})):b.hasClass("active")&&e.hide().show(0)})},
q=function(){var b=d.find(".unified-header-sign-in");d.find(".signin-link \x3e a").on("click",function(){992>a(window).width()&&b.toggleClass("active")})},l=function(b,c,d){c.each(function(){var c=a(a(this).children("a")[0]);void 0!==c&&(c=f(c),"/"===c||b.lastIndexOf(c,0)||a(this).addClass("current"),d&&m(a(this),b))})},m=function(b,c){b.find(".sublinks-subsection a").each(function(b){f(a(this))===c&&a(this).addClass("current")})},n=function(){var b=a(".unified-header-main-menu");b.find(".menu-link-item").on("touchstart",
function(b){var c=a(this);991<a(window).width()&&!c.siblings(".level-two-sublinks-dropdown").hasClass("active-item")&&(b.preventDefault(),c.parents(".unified-header-main-menu").find(".level-two-sublinks-dropdown").removeClass("active-item"),c.siblings(".level-two-sublinks-dropdown").addClass("active-item"))});if(991<a(window).width())a("body").on("touchstart",function(a){b.find(".level-two-sublinks-dropdown").removeClass("active-item")});b.on("touchstart",function(a){a.stopPropagation()})};return{init:function(){d=
a(".unified-header-content");b=a(".unified-header-old").length;g();k();q();var c=e(window.location.pathname);if(c.match(/^(?:\/content\/virginmedia(?:-qa)?\/dotcom\/en)?\/shop/)){var f=d.find(".unified-header-level-one .unified-header-menu-item"),h=d.find(".unified-header-level-two .unified-header-main-menu-item");l(c,f);l(c,h,!0)}n()}}}();return f}(VM||{},jQuery);jQuery(document).ready(function(){VM.header.init()});
(function(f,a){function h(e,d){var b=a(d),c=document.getElementById("skip-to-content-target");b.on("click",function(){c.scrollIntoView(!0);c.focus()}).on("keyup",function(a){13===a.which&&b.trigger("click")})}f.register({name:"skip-to-content",api:{load:function(a){a.each(h)}},selector:".skip-to-content"})})(VMJS,VMJSjQuery);
(function(f,a){function h(a,b,c){var d=a.filter(".active").index(),g=a.first(),e=b.first();a.removeClass("active");b.removeClass("active");d===c?(g.addClass("active"),e.addClass("active")):(a.eq(d+1).addClass("active"),b.eq(d+1).addClass("active"))}function e(a){var b=a.elem.find(".carousel-main").children(),c=a.elem.find("ol li"),d=b.length-1,g=1E3*a.elem.find(".carousel-indicators").attr("data-autoslide-seconds");clearInterval(m[a.timerId]);m[a.timerId]=setInterval(function(){h(b,c,d)},g)}function d(b){var c=
b.indicators.find("ol li");c.on("click",function(d){d.preventDefault();d=a(this);var g=d.index(),e=d.closest("div").prev().children();clearInterval(m[b.timerId]);e.removeClass("active");c.removeClass("active");d.addClass("active");e.eq(g).addClass("active")});c.find("a p:last").addClass("last-par")}function b(b){var c=b.slides.length-1;b.elem.find(".carousel-main").swipe({swipeLeft:function(){var d=a(this),g=d.children();d=d.parent().find("ol li");clearInterval(m[b.timerId]);h(g,d,c)},swipeRight:function(){var d=
a(this),g=d.children();d=d.parent().find("ol li");clearInterval(m[b.timerId]);var e=g.filter(".active").index();g.removeClass("active");d.removeClass("active");0===e?(g.eq(c).addClass("active"),d.eq(c).addClass("active")):(g.eq(e-1).addClass("active"),d.eq(e-1).addClass("active"))},excludedElements:"",threshold:50,allowPageScroll:"vertical"})}function c(a,b){992<=(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)?100===a?b.hide():b.css("width",a+"%"):b.css("width",
"11px")}function g(b){var d=b.indicators.find("ol").attr("data-slide-count"),g=b.indicators.find("ol li");d=100/d;c(d,g);a(window).resize(function(){c(d,g)})}function k(b){a(this).addClass("js-carousel-"+b)}function q(){var c=a(this),f=c.find(".carousel-content").hasClass("edit-mode"),k=c.attr("class").replace(/ /g,"");c={elem:c,slides:c.find(".carousel-slide"),indicators:c.find(".carousel-indicators"),activeClass:"active",timerId:k};f||(e(c),d(c),g(c),b(c))}var l={},m=[];l.init=function(b){a(".carousel").each(k);
b.each(q);a(document).ready(function(){a(".carousel").addClass("carousel-show")})};f.register({name:"carousel",api:l,selector:".carousel"})})(VMJS,VMJSjQuery);
(function(f,a){function h(){var b=a(".image-gallery-content .owl-carousel"),g=a(".image-gallery-slider-content"),f=a(".image-gallery-slider-4-content"),h=a(".image-gallery-slider-npet-content"),l=a(".image-gallery-content-pagination"),m=h.find(".slide-item").length;h.owlCarousel({loop:!0,margin:20,dots:!1,nav:2<h.find(".slide-item").length,navText:["\x3ci class\x3d'fa fa-angle-left'\x3e\x3c/i\x3e","\x3ci class\x3d'fa fa-angle-right'\x3e\x3c/i\x3e"],responsive:{0:{items:1<m?1.15:1,nav:!1,mouseDrag:1<
m,touchDrag:1<m},768:{items:2,nav:2<m,loop:2<m,mouseDrag:2<m,touchDrag:2<m},900:{items:3,nav:3<m,loop:3<m,mouseDrag:3<m,touchDrag:3<m}},onResized:function(){d(this,!0)},onInitialized:function(){d(this,!0);1===m&&a(".image-gallery-npet:not(.image-gallery)").addClass("single-item")}});f.owlCarousel({loop:!0,margin:10,nav:4<f.find(".slide-item").length,navText:["\x3ci class\x3d'fa fa-angle-left'\x3e\x3c/i\x3e","\x3ci class\x3d'fa fa-angle-right'\x3e\x3c/i\x3e"],responsive:{0:{items:1,nav:!0},768:{items:2,
nav:!0},900:{items:3,nav:!0},1200:{items:4}},onResized:function(){d(this,!0)},onInitialized:function(){d(this,!0)}});g.owlCarousel({margin:40,loop:!0,center:!0,nav:2<g.find(".slide-item").length,responsive:{0:{items:1,nav:!0},768:{items:1.5}},navText:["\x3ci class\x3d'fa fa-angle-left'\x3e\x3c/i\x3e","\x3ci class\x3d'fa fa-angle-right'\x3e\x3c/i\x3e"],onInitialized:function(){var a=this;e(this);var b=setInterval(function(){a&&(d(a,!0,function(b){a.$element.find(".owl-dots").css({top:b+"%"})},!0),
a.onThrottledResize(),clearInterval(b))},50)},onResized:function(){d(this,!0,function(a){this.$element.find(".owl-dots").css({top:a+"%"})},!0)}});b.owlCarousel({items:1,margin:10,nav:!1,mouseDrag:!1,onInitialized:function(){b.next(".gallery-info").children(".current-value").html("1/"+b.find(".owl-item").length)}}).on("changed.owl.carousel",function(a){b.next(".gallery-info").children(".current-value").html(a.item.index+1+"/"+a.item.count)});l.owlCarousel({margin:10,nav:4<l.find(".slide-item").length,
navText:["\x3ci class\x3d'fa fa-angle-left'\x3e\x3c/i\x3e","\x3ci class\x3d'fa fa-angle-right'\x3e\x3c/i\x3e"],responsive:{0:{items:1,nav:!0},480:{items:2,nav:!0},768:{items:3,nav:!0},1200:{items:4}}}).on("click",".owl-item",function(){b.trigger("to.owl.carousel",[a(this).index(),500,!0])})}function e(b){var c=b.items().length,d=b.$element.next(".custom-dots").children();d.length===c&&(b.$element.addClass("custom").find(".owl-dots").html(d.parent().html()).addClass("custom").children(".owl-dot").first().addClass("active"),
b.$element.on("click",".owl-dot",function(c){b.$element.trigger("to.owl.carousel",[a(this).index(),500,!0])}))}function d(b,d,e,f){var c=b.$element.find(".owl-nav"),g=b.$element.find(".owl-item.active:first picture").height();b=b.$element.height();var k=c.find(".owl-prev").height();d=100-(d?(b-g)/b*100:0);c.children().css({top:768>a(window).width()&&f?d+"%":d/2-k/b*d/2+"%"});e&&e(d)}function b(b){a(this).addClass(".image-gallery-content")}f.register({name:"image-gallery",api:{init:function(c){a(".js-image-gallery").each(b);
c.each(h)}},selector:".js-image-gallery"})})(VMJS,VMJSjQuery);
(function(f,a){function h(e,d){a(d).find("span.img-span-hide").show();a(d).find(".img-wrapper").carouFredSel({circular:!0,responsive:!1,infinite:!0,padding:null,items:{height:"100%",visible:"1"},auto:{items:1,easing:"linear",duration:8E4,timeoutDuration:0}});a(d).height(a(d).find(".img-span img").height());a(window).resize(function(){a(d).height(a(d).find(".img-span img").height())})}f.register({name:"panning-image",api:{load:function(a){a.each(h)}},selector:".panning-image .panning-wrapper"})})(VMJS,
VMJSjQuery);
(function(f,a){function h(){""===g.val()?(k.prop("disabled",!0),k.val("")):k.prop("disabled",!1);k.selectpicker("refresh")}function e(a,b){return"media-library"!==a?(t.off("click"),a):"undefined"===typeof b||"media-gallery-event"!==b.type&&"submit_filter_event"!==b.type?"image":t.find("li.active").data("filtertype")}function d(b){u=a("input[name\x3d'type']").val();if("undefined"!==typeof u&&""!==u){if("undefined"===typeof b||"viewmore_event"!==b.type)y=1,n.empty();u=e(u,b);b={type:u,category:q.val(),year:g.val(),
month:k.val(),page:y};a.ajax({url:A,data:a.param(b)}).done(function(a){var b=Handlebars.compile(p);n.append(b(a.items));y=a.page+1;a.items&&a.page>=a.total?m.hide():m.show();a.items&&0<a.items.length?B.hide():B.show()}).error(function(a){throw a;})}}function b(){g=a(".selectpicker[name\x3d'year']");k=a(".selectpicker[name\x3d'month']");q=a(".selectpicker[name\x3d'category']");l=a(".btn-filter-submit");m=a(".view-more-link");p=a("#filterResultItemTemplate").html();n=a(".filter-results .filter-result-wrapper");
t=a(".filter-tabs ul");B=a(".no-result-msg");A="/services/api/page/filter";g.on("change",function(){h()});a(document).on("submit_filter_event viewmore_event media-gallery-event",d);l.on("click",function(){a(document).trigger("submit_filter_event")});m.on("click",function(b){b.preventDefault();a(document).trigger("viewmore_event")});if(t)t.find("li").on("shown.bs.tab",function(){var b=a(".selectpicker");b.val("");b.selectpicker("refresh");h();a(document).trigger("media-gallery-event")});h();d()}var c=
{},g,k,q,l,m,n,p,t,B,u,A,y=1;c.init=function(a){b()};f.register({name:"filter-form",api:c,selector:"div.filter-form"})})(VMJS,VMJSjQuery);
(function(f,a){f.register({name:"tabs",api:{init:function(f){var e=document.location.hash;e&&a(".nav-tabs a[href\x3d"+e+"]").tab("show");f.each(function(d,b){d=document.location.hash;var c=a(".nav-tabs",b).height();a(b).find(".nav-tabs").height(c);if(d&&0<a(b).find(".nav-tabs a[href\x3d"+d+"]").length)return!0;a(b).find(".nav-tabs a:first").tab("show")})}},selector:".vm-tabs"})})(VMJS,VMJSjQuery);
(function(f,a){function h(e,d){var b=a(d).find(".dynamic-tabs-wrapper"),c=b.find(".dyn-tab-content"),g=b.find(".dyn-nav-tabs"),f=g.find(".dyn-tab");e=f.not(".dyn-tab-type-url");d=b.find(".dyn-tab-close button");var h=window.matchMedia("(max-width: 767px)").matches,l=b.data("tab-title-default-colour"),m=b.data("tab-subtitle-default-colour"),n=b.data("tab-default-bg-colour"),p=b.data("tab-hover-bg-colour"),t=b.data("tab-title-hover-colour"),B=b.data("tab-subtitle-hover-colour"),u=b.data("tab-outline-hover-colour"),
A=e.filter('[data-open-by-default\x3d"true"]').first(),y=b.data("scroll-opened-desktop"),D=b.data("scroll-opened-mobile"),w=window.location.hash?window.location.hash.substring(1):null,r=function(b){var d=c.find(".dyn-tab-snippet-content");a.ajax({url:b.attr("href")+".esi.html",headers:{"X-Snippet-Importer":!0},success:function(g){C(b,"hoverColours");d.html(g);b.addClass("active");h&&c.insertAfter(b);(h&&D||!h&&y)&&a("html, body").animate({scrollTop:Math.ceil(b.offset().top)},600);c.slideDown(600)}})},
x=function(){var a=g.find(".active");a.removeClass("active");c.hide();C(a,"defaultColours")},C=function(a,b){var c=a.find(".dyn-tab-title"),d=a.find(".dyn-tab-copy");"hoverColours"===b?(a.css("background-color",p),c.css("color",t),d.css("color",B),u&&a.css("box-shadow","inset 0 0 0 3px "+u)):"defaultColours"===b&&(a.css("background-color",n),c.css("color",l),d.css("color",m),u&&a.css("box-shadow","0px 2px 15px 0px rgba(0, 0, 0, 0.13)"))},E=function(){A.length&&!b.is(":hidden")&&r(A)};if(h){var F=
0;f.each(function(){var b=a(this).outerHeight();F=b>F?b:F});f.each(function(){a(this).css("min-height",F)})}f.on({mouseenter:function(){a(this).hasClass("active")||C(a(this),"hoverColours")},mouseleave:function(){a(this).hasClass("active")||C(a(this),"defaultColours")}});null!==w?(f=e.filter('[data-anchor\x3d"'+w+'"]'),f.length?r(f.first()):E()):E();e.on("click",function(b){b.preventDefault();b=a(this);if(b.hasClass("active"))return!1;x();r(b)});d.on("click",function(){x()})}f.register({name:"dynamic-tabs",
api:{load:function(a){a.each(h)}},selector:".dynamic-tabs"})})(VMJS,VMJSjQuery);
(function(f,a){var h={},e=function(){var b={},c=a(window),g=768<c.width(),f={player:0,mix:0,fun:0,"full-house":0,vip:0},h=function(b,c,d){var g=a(".tvlistings").attr("channel-data-url");return a.getJSON(g,function(g){a("#premium-channels-list").empty();d.empty();a.each(g.channels,function(g,e){g={packageName:e.tvTier,bundleName:e.bundle,channelName:e.channelName,channelGenre:e.genre,tvChannel:e.channel,tvPackage:e.tvPackage,isHD:e.hd,onDemand:e.onDemand,tvAnywhere:e.tvAnywhere,tvaLive:e.tvaLive,tvaOd:e.tvaOd,
movApp:e.skyMoviesApp,spoApp:e.skySportsApp,skyApps:e.skyApps,mostPopular:e.mostPopular,multiRoomStreaming:e.multiRoomStreaming,imageUrl:"/content/dam/virginmedia/dotcom/static/channel-list/tv-logos/"+e.logoName,hyphenatedName:e.tvTier.toLowerCase().replace(/ /g,"-"),hyphenatedChannel:e.channelName.toLowerCase().replace(/ /g,"-"),hyphenatedPackageName:e.tvTier.toLowerCase().replace(/ /g,"-").replace("m+","mplus")};e=e.howToBuy;var f="player mix fun full-house vip premium".split(" ").indexOf(g.hyphenatedPackageName);
f="\x3cli data-channelname\x3d'"+g.channelName+"' data-channelpackage\x3d'"+g.hyphenatedPackageName+"-package' data-genrevalue\x3d'"+f+"' data-addon\x3d'"+e+"' class\x3d'tvlistings-channels-list-channel "+g.hyphenatedPackageName+" "+g.isHD+"'\x3e\x3cdiv class\x3d'tvlistings-channels-list-channel--img'\x3e\x3cimg class\x3d'tvlistings-channels-list-channel--img-img' src\x3d'"+g.imageUrl+"' /\x3e\x3c/div\x3e\x3cspan class\x3d'tvlistings-channels-list-channel--title'\x3e"+g.channelName+"\x3c/span\x3e\x3c/li\x3e";
if("allChannels"===b||g[b]===c)"Premium"===g.packageName||"Subscription"===g.packageName||"Add on"===e?a(f).appendTo("#premium-channels-list"):a(f).appendTo(d)});e.updateTvChannelsDescription()})},l=function(){b.packages.on("click",function(){a(this).not(".is-current")&&(e.updatePackage(a(this)),e.positionReset())})},m=function(){b.filter.on("change",function(){e.updateChannel();e.positionReset()})},n=function(b){b.scroll(function(){e.reposition(a(this))});b.bind("touchmove",function(){e.reposition(a(this))}).bind("scroll",
function(){e.reposition(a(this))});b.resize(function(){e.reposition(a(this))})},p=function(){var b=a("#premium-channels-list"),c=a(".premiumchannels-title");0===b.children(":visible").length?(a(this).hide(),c.hide()):(a(this).show(),c.show())},t=function(){a("#premium-channels-list \x3e li").each(function(){var b=a(this).attr("data-genrevalue"),c=a(this).attr("data-channelname"),d=a("#standard-channels");c=d.find('li[data-channelname\x3d"'+c+'"]');if(!0===tvSettings.hideControls||!0===tvSettings.hidePackage||
!0===tvSettings.hideDropdown){var g="player-package mix-package fun-package full-house-package vip-package premium-package".split(" ").indexOf(tvSettings.dataPackage);g=-1==g?0:g}else g=a(".tvlistings-controls--packages \x3e .is-current").attr("data-packagevalue");"-1"===b?a(this).show():g>=b?(0<c.length?c.show():a(this).clone().appendTo(d),a(this).hide()):(c.hide(),a(this).show())})},B=function(b,c,d,g,e){b=parseInt(b);var f=a("#standard-channels"),h=a(".tv-nochannel-title");b<=c&&d===g?(f.find(e).hide(),
h.removeClass("hidden")):b>c&&d===g&&(f.find(e).show(),h.addClass("hidden"))},u=function(b){var c=b.attr("data-packagename"),d=b.attr("data-packagevalue"),g=a(".tvlistings-controls--filter--list \x3e option:selected").attr("data-genrename"),e=a("#standard-channels"),f=a(".tvlistings-controls--packages \x3e li");e.attr("data-package",c);f.removeClass("is-current");b.addClass("is-current");t();p();B(d,0,g,"tvaOd",'[data-channelname\x3d"Sky News"]')},A=function(){for(var a in f)f[a]=0},y=function(b){var c=
"";a(b).each(function(){c=a(this).attr("data-channelpackage").replace("-package","");"premium"!==c&&f[c]++})},D=function(){var b=a("#premium-channels-list"),c=a("#premium-channels-list").find("li");a(document).ajaxComplete(function(){0<b.children().length&&c.show();t();p()})},w=function(){var b=tvSettings.hidePackage,c=tvSettings.hideDropdown,d=tvSettings.hideLinks;tvSettings.hideControls&&(a(".tvlistings-controls").remove(),a(".tvlistings-channels").addClass("controls-hidden"));b&&(a(".tvlistings-controls--packages").remove(),
a(".tvlistings-controls--links").remove(),a(".tvlistings-controls").addClass("package-hidden"));c&&(a(".tvlistings-controls--filter").remove(),a(".tvlistings-controls").addClass("dropdown-hidden"));d&&a(".tvlistings-controls--links").remove()},r=function(){b.preselectLink.on("click",function(){if(!1===tvSettings.hidePackage){var b=a(".tvlistings-controls--packages"),c=a("#js-accordion").hasClass("opened");u(b);c||a("#js-accordion .tab-link").click()}})},x=function(){a(b.anchorsToPackages).on("click",
function(b){var c=a(this).attr("href").substring(1);c=a(".tvlistings-controls--packages \x3e li .tvlistings-controls--package-subtitle2:contains('"+c+"')");if(0<c.length){b.preventDefault();b=a("#js-accordion .footer-expand");if(b.hasClass("closed")){var g=a("#js-accordion-panel-1").outerHeight();d.expandContent(b,g)}u(c.parents("li"));e.positionReset()}})},C=function(){var b=a("#standard-channels"),c=a(".tvlistings-channels-list"),d=a(".tvlistings-controls--filter"),g=tvSettings.dataPackage,e=tvSettings.dataGenreName,
f=tvSettings.dataGenreValue,k=d.find("option[data-genrename\x3d"+e+"][data-genrevalue\x3d"+f+"]");d=a(".tvlistings-channels");c.attr("data-package",g);a(k).attr("selected","selected");h(e,f,b);D();b=a(".tvlistings-controls--packages");if(!1===tvSettings.hideControls||!1===tvSettings.hidePackage)b.find("li.is-current").removeClass("is-current"),b.find('[data-packagename\x3d"'+g+'"]').addClass("is-current");a('\x3ch3 class\x3d"tv-nochannel-title hidden"\x3eSorry, there are no channels available for these options\x3c/h3\x3e').prependTo(d)},
E=function(){var b=a(".tvlistings-controls--packages");tvSettings.dataPackage=b.find(".is-current").attr("data-packagename")};return{init:function(){var d=a(".tvlistings-controls--packages \x3e li"),e=a(".tvlistings-controls--filter--list"),f=a(".js-tvlistings-preselect-link"),h=a('.richText a[href^\x3d"#"]');"undefined"!==typeof tvSettings&&null!==tvSettings&&(E(),C(),w());b.packages=d;b.filter=e;b.scroll=c;b.preselectLink=f;b.anchorsToPackages=h;l();m();r();x();c.load(function(){n(c)});g&&a(".tvlistings-mobcontrols").remove()},
triggersPackagesEvent:l,triggersFilterEvent:m,triggersLinkPreselect:r,reposition:function(b){var c=a(".tvlistings").offset().top,d=a(".tvlistings-controls"),g=d.outerHeight(),e=a("#js-accordion"),f=a(".tvlistings"),h=f.outerHeight(),k=a(".tvlistings-channels").outerWidth();b=b.scrollTop();var l=2*a(".tvlistings-channels-list-channel").height();h=c+h-l;d.css("width",k);e.hasClass("closed")||(b<c||b>h?b>h?d.removeClass("is-sticky").addClass("is-stuck"):(f.css("padding-top","0"),d.removeClass("is-sticky")):
(d.removeClass("is-stuck").addClass("is-sticky"),f.css("padding-top",g+20)))},updateChannel:function(){var b=1>a(".tvlistings-controls--packages").length?a(".tvlistings").attr("data-packagevalue"):a(".tvlistings-controls--packages \x3e .is-current").attr("data-packagevalue"),c=a(".tvlistings-controls--filter--list \x3e option:selected").attr("data-genrename"),d=a(".tvlistings-controls--filter--list \x3e option:selected").attr("data-genrevalue"),g=a("#standard-channels"),e=g.find("li"),f=a("#premium-channels-list").find("li"),
k=a(".tv-nochannel-title");e.remove();f.remove();k.addClass("hidden");h(c,d,g).then(function(){t();p();B(b,0,c,"tvaOd",'[data-channelname\x3d"Sky News"]')})},updatePackage:u,updateTvChannelsDescription:function(){A();y(a("#standard-channels li"));y(a("#premium-channels-list li"));var b=a("span.filter-option").text(),c=0,d,g;a(a(".tvlistings-controls--packages li")).each(function(){d=a(this).attr("data-packagename").replace("-package","");c+=f[d];g=Handlebars.compile(a("#tv-packages-description-template").html());
g=g({selectedGenre:b,channelsNo:c});a(this).find(".tvlistings-controls--packages-title").html(g)})},positionReset:function(){a("html, body").animate({scrollTop:a("#tvlistings-top").offset().top},300)}}}(),d=function(){var b=function(b,c){var d=b.parents(".tab");b=d.children(".tab-panel");var g=a(".tvlistings-controls"),e=a(".tvlistings"),f=a(".premiumchannels-title");d.hasClass("opened")?(d.removeClass("opened").addClass("closed"),d.hasClass("promo")?(g.removeClass("is-sticky"),f.hide(),b.animate({height:c},
300),e.css("padding-top",0)):b.slideUp(300)):(g.css("width","100%"),d.hasClass("promo")&&(b.css("height","auto"),g.animate({"margin-top":"0"},300)),d.removeClass("closed").addClass("opened"),b.slideDown(300,function(){0<a("#premium-channels-list li:visible").length&&d.hasClass("promo")&&f.show()}))},c=function(c,d){var g=a(".tab-panel");a("#js-accordion").hasClass("closed")&&g.css("display","none");b(c,d);c=a(".footer-expand");d=c.find("h4 span");g=c.find("i");var e=a("#tvlistings-top").offset().top;
c.hasClass("closed")?(c.removeClass("closed").addClass("opened"),d.html("Collapse"),g.removeClass("fa-plus").addClass("fa-minus")):(c.removeClass("opened").addClass("closed"),d.html("Expand"),g.removeClass("fa-minus").addClass("fa-plus"),a("html, body").animate({scrollTop:e},300))};return{init:function(b){var d=a("#js-accordion .tab-link"),g=a("#js-accordion .footer-expand");d.click(function(d){d.preventDefault();c(a(this),b)});g.click(function(d){d.preventDefault();c(a(this),b)})},expandContent:c}}();
h.load=function(b){b&&0!==b.length&&(e.init(),b=a("#js-accordion-panel-1").outerHeight(),d.init(b))};f.register({name:"channel-list",api:h,selector:".tv-channel-list-old"})})(VMJS,VMJSjQuery);
(function(f,a){var h={},e=function(){function d(a,b,c){var d;return function(){var g=this,e=arguments,f=c&&!d;clearTimeout(d);d=setTimeout(function(){d=null;c||a.apply(g,e)},b);f&&a.apply(g,e)}}var b=a(".tvlistings").data();if(b){var c=b.defaultChannelName,g=b.defaultChannelValue,e=a(".tv-channel-list .selectpicker"),f=e.find("option[data-value\x3d'"+g+"'][data-name\x3d'"+c+"']").text(),h=0,m=768>h,n=a(".table-row-wrapper"),p=[],t=0,B,u=b.bundlesArray.replace(/,*$/g,"").split(","),A=u.length;b=a(".tvlistings").attr("channel-data-url");
var y=a(window).width(),D=!1;e.val(f);e.selectpicker("refresh");a.getJSON(b).done(function(a){B=a;w(c,g)});var w=function(a,b,c){var d=c?c.toLowerCase():"",g=d.slice(0,3),e=[],f=0;r(p);r(e);for(var h=function(a,b){for(var c=0;c<A;c++)a[c].bundleLabel===b.bundle&&(a[c].channels.push({logoPath:b.logoName,sortid:b.sortid,channelName:b.channelName}),a[c].channelsNo=a[c].channels.length)},k=0;k<B.channels.length;k++){c=B.channels[k];var l=c.channelName.toLowerCase();if(c[a]===b||"seeAllChannels"===a)l.includes(d)?
h(p,c):l.includes(g)&&h(e,c)}p.forEach(function(a){f+=a.channelsNo});0===f&&(p=e);x();C(p);E()},r=function(a){for(var b=0;b<A;b++)a.push({bundleLabel:u[b],channelsNo:0,channels:[]})},x=function(){for(var b=1;b<A;b++)p[b].channelsNo+=p[b-1].channelsNo;t=p[A-1].channelsNo;h=a(window).width();m=768>h?!0:!1;for(b=0;b<A;b++)p[b].channelsNo=m?"("+p[b].channelsNo+")":p[b].channelsNo+(1===p[b].channelsNo?" channel":" channels")},C=function(a){for(var b=function(a){a.sort(function(a,b){return a.sortid-b.sortid})},
c=0;c<a.length;c++)b(a[c].channels)},E=function(){var b=a("#table-channels-compare-template").html();b=Handlebars.compile(b);D="Show less TV Channels"!==a(".button-show-more-less").text()||n.hasClass("less-content")?!1:!0;b=b({bundles:p});a(".table-channels-content").html(b);D?(n.removeClass("less-content"),a(".table-row-content").removeClass("small"),a(".gradient-opacity").remove(),a(".table-row:nth-child(5)").removeClass("gradient-wrapper"),a(".button-show-more-less").html("Show less TV Channels")):
(a(".table-row:nth-child(5)").addClass("gradient-wrapper"),a("\x3cdiv class\x3d'gradient-opacity'\x3e\x3c/div\x3e").appendTo(".gradient-wrapper"));b=0!==a("#channelSearch").val().length;var c=a(".search-error-message"),d=a(".button-show-more-less-wrapper"),g=a(".tv-channels-table");1>t&&(g.addClass("hidden-content"),b&&c.removeClass("hidden-content"));5>t&&(d.addClass("hidden-content"),a(".gradient-opacity").remove());b=100/(A+1);a(".sticky-left").css("width",b+"%");a(".sticky-left + div").css("margin-left",
b+"%");b=a(".table-header .column-width")[0].getBoundingClientRect().width;a(".table-header").css("width",(A+1)*b);a(".table-body").css("width",(A+1)*b);F();G()},F=function(){var b=80*(A+1),c=a(".table-row-wrapper .horizontal-scroll");h<b?(c.addClass("horizontal-opacity-right"),a(".horizontal-opacity-right").css("left",h-20)):c.removeClass("horizontal-opacity-right");a(".table-row-wrapper").scroll(function(){var d=a(".table-row-wrapper").scrollLeft();a(".table-row-wrapper").css("left",-d);a(".table-row-wrapper .table-header").css("left",
-d);h<b&&0<d?(c.removeClass("horizontal-opacity-right"),c.addClass("horizontal-opacity-left"),a(".horizontal-opacity-left").css("left",a(".table-row .column-width").width()+2)):(c.addClass("horizontal-opacity-right"),c.removeClass("horizontal-opacity-left"),a(".horizontal-opacity-right").css("left",h-20))})},G=function(){a(window).on("scroll swipe tap",function(){var b=a(".table-channels-compare .tv-channels-table")?a(".table-channels-compare .tv-channels-table").offset().top:0,c=a(".table-header"),
d=a(".extra-layer"),g=m?0:a(".serviceability-content").hasClass("fix-top")?a(".serviceability-container").height():0,e=a(".table-row-content").height(),f=a(window).scrollTop()+g;f>=b&&f<=b+e-g?(c.addClass("fixed"),d.addClass("extra-fixed"),a(".extra-fixed").css("top",0),a(".fixed").css("top",g),a(".table-row-content").css("padding-top","72px")):f>b+e-g?(b=g-(f-(b+e-g)),a(".fixed").css("top",b),a(".extra-fixed").css("top",b)):f<b&&(c.removeClass("fixed"),d.removeClass("extra-fixed"),a(".table-row-content").css("padding-top",
"0px"))})};a(".table-channels-compare .searchButton").on("click",function(b){b.preventDefault();m&&(a(".search-input-wrapper").css("left","0"),a(".search-backdrop").addClass("activate"))});a(".table-channels-compare .search-backdrop, .table-channels-compare a.tvlistings-controls--filter--list-item-new").on("click",function(b){b.preventDefault();a(".search-input-wrapper").css("left","calc(-85% + 55px)");a(".search-backdrop").removeClass("activate")});a(document).on("click",".dropdown-backdrop",function(){a(".tvlistings-controls").removeClass("dropDownPadding")});
a(document).on("click",".table-channels-compare ul.dropdown-menu.inner",function(){a(".tvlistings-controls").removeClass("dropDownPadding")});a(document).on("click",".table-channels-compare button.btn.dropdown-toggle.btn-default",function(){a(".tvlistings-controls").addClass("dropDownPadding")});a("#channelSearch").on("input",d(function(){var b=a(".tvlistings-controls--filter--list \x3e option:selected").data();p.length=0;w(b.name,b.value,a("#channelSearch").val())},500));a(".table-channels-compare").on("click",
".table-channels-compare .tvlistings-controls--filter--list-item-new ",function(){p.length=0;var b=a(".tvlistings-controls--filter--list \x3e option:selected").data();w(b.name,b.value);a("#channelSearch").val("")});a(document).on("click",".button-show-more-less ",function(b){var c=m?0:a(".serviceability-content").hasClass("fix-top")?a(".serviceability-container").height():0;c=a(".table-channels-compare .tv-channels-table").offset().top-c;"Show more TV Channels"===b.target.innerHTML?(n.removeClass("less-content"),
a(".table-row-content").removeClass("small"),a(".gradient-opacity").remove(),a(".button-show-more-less").html("Show less TV Channels"),a(".table-row:nth-child(5)").removeClass("gradient-wrapper")):(n.addClass("less-content"),a(".table-row-content").addClass("small"),a(".table-row:nth-child(5)").addClass("gradient-wrapper"),a("\x3cdiv class\x3d'gradient-opacity'\x3e\x3c/div\x3e").appendTo(".gradient-wrapper"),a(".button-show-more-less").html("Show more TV Channels"),a(window).scrollTop(c))});e=d(function(){if(a(window).width()!=
y){h=a(window).width();p.length=0;var b=a(".tvlistings-controls--filter--list \x3e option:selected").data(),c=a("#channelSearch").val();w(b.name,b.value,c);y=a(window).width()}},100);window.addEventListener("resize",e)}};h.load=function(a){a.length&&e()};f.register({name:"table-channels-compare",api:h,selector:".table-channels-compare"})})(VMJS,VMJSjQuery);
(function(f,a){f.register({name:"accordion-group",api:{load:function(f){if(f.length)a:if(f=a.cookie("cms.vm.user.reg.data")||a.cookie("cms.vm.user"),f){try{var e=JSON.parse(f)}catch(d){break a}e.currentAddress&&"40VC"===e.currentAddress.campaign&&a(".is40VillageChallenge").removeClass("hidden")}}},selector:".accordion-group"})})(VMJS,VMJSjQuery);
(function(f,a){function h(){a(".manualAddressForm").find('input[name!\x3d"postcode"]').on("input propertychange",function(){var b=a(this),c=b.val().replace(/[!$%^&*\\+={}\[\];"<>?\/~|]/g,"");b.val(c)})}function e(){var b=a(".manualAddressForm");if(b.length)b.validator({feedback:{success:"fa-check",error:"fa-exclamation-triangle"}}).on("submit",function(b){b.isDefaultPrevented()||(b.preventDefault(),b={currentAddress:{}},b.currentAddress.manualEntry=!0,b.currentAddress.postcode=a(".manual-address-postcode").val().replace(/\s+/g,
""),b.currentAddress.displayAddress=a(".manual-address-building-number-name").val()+","+a(".manual-address-street-name").val()+","+b.currentAddress.postcode,b.currentAddress.premiseId=null,jQuery.cookie("cms.vm.user",JSON.stringify(b),{path:"/"}),window.location.href=a(this).data("redirect")+"?postcode\x3d"+b.currentAddress.postcode)})}function d(){for(var a=decodeURIComponent(window.location.search.substring(1)).split("\x26"),b=0;b<a.length;b++){var d=a[b].split("\x3d");if("postcode"==d[0])return void 0===
d[1]?!0:c.getFormattedPostcode(d[1])}}var b={},c=common.cmsUtils;b.load=function(){a(".manual-address-postcode").val(d());e();h()};f.register({name:"cms-manual-address-form",api:b,selector:".manualAddressForm"})})(VMJS,VMJSjQuery);
(function(f,a){function h(a){var d=!1;a&&a.registered&&a.currentAddress&&a.currentAddress.c40VC&&(d=!0);return d}f.register({name:"timeline",api:{init:function(e){e=a.cookie("cms.vm.user.reg.data");e=JSON.parse(e);if(h(e)&&(e=e.currentAddress.communityId)){var d=window.location.pathname;e=d.substring(0,d.indexOf("postcode-checker"))+"postcode-checker/timelines/"+e+".esi.html";a.ajax({async:!0,url:e,success:function(b){a(".cms-timeline").html(b)}})}}},selector:".vm-timeline"})})(VMJS,VMJSjQuery);
(function(f,a){var h={},e={component:"contact-us-navigation",container:"contact-us-nav",panelContent:"contact-us-nav--panel-content",activePanel:"contact-us-nav--selection-panel-active",topicsPanel:"contact-us-nav--topics-panel",topicsPanelInit:"contact-us-nav--topic-panel-init",categoryPanel:"contact-us-nav--categories-panel",item:"contact-us-nav--item",suggestionsPanel:"contact-us-nav--suggestions-panel",panelTitle:"contact-us-nav--panel-title",panelTitleActive:"contact-us-nav--panel-title-active",
suggestionLinksWrapper:"contact-us-nav--suggestion-links-wrapper",askCommunity:"contact-us-nav--ask-community",askCommunityLink:"contact-us-nav--ask-community-link",askCommunityText:"contact-us-nav--ask-community-text",selected:"contact-us-nav--selected",introPanel:"contact-us-nav--introduction-panel",rstButton:"contact-us-nav--restart",contactOptions:"contact-us-nav--contact-options",contactOption:"contact-us-nav--contact-option",contactChatOnline:"contact-us-nav--web-chat-option",contactOptionActive:"contact-us-nav--contact-option-active",
contactRecommended:"contact-us-nav--recommended",contactIcon:"contact-us-nav--contact-icon",contactText:"contact-us-nav--contact-text",webChatOption:"contact-us-nav--web-chat-option",callUsOption:"contact-us-nav--call-us-option",emailUsOption:"contact-us-nav--email-us-option",writeToUsOption:"contact-us-nav--write-to-us-option",infoPanelWrapper:"contact-us-nav--info-panel-wrapper",infoPanelLinesOpen:"contact-us-nav--info-panel-lines-open",infoPanelInfoContainer:"contact-us-nav--info-container",infoPanelOpen:"contact-us-nav--info-panel-open",
infoTitle:"contact-us-nav--info-panel-title",infoPaneItemHeader:"contact-us-nav--info-panel-item-header",infoText:"contact-us-nav--info-panel-text",infoTextLowercase:"contact-us-nav--info-panel-text-lowercase",infoFootNote:"contact-us-nav--info-panel-footnote",infoPanel:"contact-us-nav--info-panel",infoIcon:"contact-us-nav--info-panel-icon",callUsInfo:"contact-us-nav--call-us-info",writeToInfo:"contact-us-nav--write-to-us-info",header:"contact-us-nav--header",slideIn:"slide-in",closeWrapperMobile:"close-wrapper-button",
modifiableTile:"modifiable-tile",slideOut:"slide-out",categorySlider:"contact-us-nav--categories-slider",suggestionsSlider:"contact-us-nav--suggestions-slider",chatOnline:"calendar",chatOnlineMessage:"availability-message-placeholder",chatOnlineStart:"chat-online--start-chat"},d={animation:"animationend","-o-animation":"oAnimationEnd","-moz-animation":"anomationend","-webkit-animation":"webkitAnimationEnd"},b={transition:"transitionend",OTransition:"otransitionend",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"},
c,g,k=function(){var a=document.createElement("div"),b;for(b in d)if("undefined"!==typeof a.style[b])return a=d[b];return"animationend"},q=function(){var a=document.createElement("div"),c;for(c in b)if("undefined"!==typeof a.style[c])return a=b[c];return"transitionend"},l=function(){var b,d,f,h,l,u,A,y,D,w,r,x,C,E,F={"chat-online-message":{},"chat-online":{},category:{},suggestion:{},getInTouch:{},"call-us":{}},G,z,H={L1:null,L2:null},N=!1,I=!1,K=function(b,c){if(E.hasOwnProperty(b))return b=Handlebars.compile(E[b]),
c.OCSS=c.OCSS||{},a.extend(c.OCSS,e),b(c)},J=function(a){var b=a.parents(".contact-us-nav--contact-options").attr("id"),c=a.attr("data-type"),d=G.articles[b.split("_")[1]].content.communicationMethods,g=function(a){return d.filter(function(b){return b.type===a})[0]},f={"call-us":function(){var a=g("call-us");F["call-us"][b]||(F["call-us"][b]=K("call-us",a));D.html(F["call-us"][b])},"web-chat":function(){var b=g("chat-online");a.attr("data-queue");b={today:{hour:moment().tz("Europe/London").hour(),
day:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ")[moment().tz("Europe/London").day()]},openHours:{Monday:b.day1,Tuesday:b.day2,Wednesday:b.day3,Thursday:b.day4,Friday:b.day5,Saturday:b.day6,Sunday:b.day7},open:!1,available:!1};var c=b.today.hour;b.open=c>=b.openHours[b.today.day].from&&c<=b.openHours[b.today.day].to;F["chat-online"]=K("chat-online",b);D.html(F["chat-online"]);window.lpTag.newPage(window.location.href,{section:["contactus",X()]})},"email-us":function(){var a=
g("email-us");a.openedInNewWindow?window.open(a.url):window.location=a.url},"write-to-us":function(){var a=g("write-to-us");F["write-to-us"]||(F["write-to-us"]=K("write-to-us",a));D.html(F["write-to-us"])}};z=a;z.addClass(e.contactOptionActive);f.hasOwnProperty(c)&&f[c].call(null);D.hasClass(e.infoPanelOpen)||D.addClass(e.infoPanelOpen)},Q=function(){z&&(z.removeClass(e.contactOptionActive),D.removeClass(e.infoPanelOpen),z=null)},S=function(b){var c=a(b.currentTarget);b.preventDefault();z&&z.removeClass(e.contactOptionActive);
J(c)},T=function(){N=!1;w.one(k()+" "+q(),function(){N||(l.addClass("hide").removeClass(e.activePanel).find("."+e.panelTitle).removeClass(e.panelTitleActive),w.removeClass(e.slideIn),f.addClass(e.activePanel).find("."+e.panelTitle).addClass(e.panelTitleActive),A.show(),y.addClass("hide"),w.off(k()+" "+q()))});w.addClass(e.slideOut);C=!1;H.L1=null;f.find(".first-level").addClass(e.topicsPanelInit)},U=function(b){var c=a(b.target),g=c.parents("."+e.topicsPanel).find("."+e.modifiableTile);b.preventDefault();
x?x.is(c)&&(x.removeClass(e.selected),x=!1):x=c;C&&P();x?(x.removeClass(e.selected),x=c,x.addClass(e.selected),g.attr("title",b.currentTarget.innerText),g.next("."+e.closeWrapperMobile).removeClass("hide").show(),c.parents("."+e.panelContent).addClass("hidden-xs hidden-sm"),a("."+e.categoryPanel).find("."+e.closeWrapperMobile).addClass("hide").end().find("."+e.panelContent).removeClass("hidden-xs hidden-sm"),b=c.attr("data-item"),g={topicIndex:b},N=!0,A.hide(),y.removeClass("hide"),G=d[b],H.L1=c.attr("data-journey")||
null,F.category[b]||(a.extend(g,G),F.category[b]=K("category",g)),l.find("."+e.panelContent).html(F.category[b]),f.removeClass(e.activePanel).find("."+e.panelTitle).removeClass(e.panelTitleActive),l.removeClass("hide"),1024>=a(window).width()&&h.get(0).scrollIntoView(),w.removeClass(e.slideOut).addClass(e.slideIn),l.addClass(e.activePanel).find("."+e.panelTitle).addClass(e.panelTitleActive),ba("custom-scrollbar-level-two"),f.find(".first-level").removeClass(e.topicsPanelInit)):(g.attr("title",g.data("title")),
c.parents("."+e.topicsPanel).find("."+e.closeWrapperMobile).addClass("hide"),c.parents("."+e.panelContent).removeClass("hidden-xs hidden-sm"),T())},L=function(b){a(window).on("orientationchange",function(){L(b)});var d=b.attr("data-item"),f=b.attr("data-topic"),h=d+"-"+f,k=(G&&G.articles&&G.articles[d]&&G.articles[d]).content||{};d=f+"_"+d;H.L2=b.attr("data-journey")||null;k.id=d;I=!0;F.suggestion[h]||(F.suggestion[h]=K("suggestion",k));h=F.suggestion[h];k.communicationMethods&&k.communicationMethods.length&&
(k.columnSize=12/k.communicationMethods.length,!F.getInTouch[d]&&k&&(F.getInTouch[d]=K("getInTouch",k)),F.getInTouch[d]&&(h+=F.getInTouch[d]));k=u.find("."+e.panelContent);k.html(h);l.removeClass(e.activePanel).find("."+e.panelTitle).removeClass(e.panelTitleActive);u.removeClass("hide").addClass(e.activePanel).find("."+e.panelTitle).addClass(e.panelTitleActive);r.removeClass(e.slideOut).addClass(e.slideIn);f=k.find(".ask-community").height();h=k.find(".contact-us-nav--ask-community-link").height();
d=k.find(".contact-us-nav--ask-community-text").height();var q=k.find(".contact-us-nav--contact-options").height();f=c-f-q-15;q="landscape-primary"===screen.orientation.type||"landscape-secondary"===screen.orientation.type;if(g&&615>c&&d<h||g&&615<c&&q)f-=20;k.find(".suggested-links").height(f);ba("suggested-links");"object"==typeof lpTag&&"object"==typeof window.lpTag||a("#lpPresent").removeClass("hidden")},P=function(){I=!1;r.one(k()+" "+q(),function(){I||(u.addClass("hide").removeClass(e.activePanel+
" "+e.slideIn).find("."+e.panelTitle).removeClass(e.panelTitleActive),z=null,r.off(k()+" "+q()))});r.addClass(e.slideOut);H.L2=null;Q();a("window").off("orientationchange")},R=function(b){var c=a(b.target),d=c.parents("."+e.categoryPanel).find("."+e.modifiableTile);b.preventDefault();C?C.is(c)&&(C.removeClass(e.selected),l.addClass(e.activePanel).find("."+e.panelTitle).addClass(e.panelTitleActive),C=!1):C=c;C?(C.removeClass(e.selected),C=c,C.addClass(e.selected),d.attr("title",b.currentTarget.innerText),
d.next("."+e.closeWrapperMobile).removeClass("hide"),c.parents("."+e.panelContent).addClass("hidden-xs hidden-sm"),L(c)):(d.attr("title",d.data("title")),c.parents("."+e.categoryPanel).find("."+e.closeWrapperMobile).addClass("hide"),c.parents("."+e.panelContent).removeClass("hidden-xs hidden-sm"),P());Q()},aa=function(){a.ajax({url:eGainCheckAuthURL,dataType:"xml"}).done(function(b){var c=!1;b=a(b).find("saml\\:AttributeStatement saml\\:Attribute, Attribute");for(var d in b)if("vmContactEmailAddress"==
a(b[d]).attr("Name")&&a(b[d]).find("saml\\:AttributeValue, AttributeValue").text()){c=!0;break}c?(c=$j('[data-namespace\x3d"contact-us-nav--chat-online-modal"]').find(".start-chat-modal--continue").attr("href"),c=0>c.indexOf("?")?c+"?isLoggedIn\x3d1":c+"\x26isLoggedIn\x3d1",window.location=c):O()}).fail(O)},O=function(){var a=$j('[data-namespace\x3d"contact-us-nav--chat-online-modal"]'),b={},c={};var d=u.find("."+e.contactOptions+' [data-type\x3d"web-chat"]').attr("data-queue");c.entrypointId=d;b.data=
c;a.length&&a.data&&a.data().open&&a.data().open(b)},X=function(){if("object"!=typeof H||null===H.L1||null===H.L2)throw Error("Invalid LivePerson service journey path");return H.L1+"__"+H.L2},Z=function(){x.trigger("click")},Y=function(b){var c=a(b.target),d=c.parents("."+e.topicsPanel).length?c.parents("."+e.topicsPanel):c.parents("."+e.categoryPanel);b.preventDefault();c.parents("."+e.topicsPanel).length&&a("."+e.categoryPanel).find("."+e.panelContent).removeClass("hidden-xs hidden-sm");c.parent().addClass("hide");
d.find("."+e.panelContent).removeClass("hidden-xs hidden-sm").children().find("."+e.selected).trigger("click")},ba=function(b){a("."+b).customScrollbar({skin:"default-skin",hScroll:!1,updateOnWindowResize:!0})};return{init:function(){b=a("."+e.container);b.length&&(E={"chat-online-message":a("#chat-online-message-template").html(),"chat-online":a("#chat-online-template").html(),category:a("#category-template").html(),suggestion:a("#suggestion-template").html(),getInTouch:a("#getInTouch-template").html(),
"call-us":a("#call-us-template").html(),"write-to-us":a("#write-to-us-template").html()},d=aContactUsNavigationData||[],f=a("."+e.topicsPanel),l=a("."+e.categoryPanel),u=a("."+e.suggestionsPanel),w=a("."+e.categorySlider),r=a("."+e.suggestionsSlider),A=a("."+e.introPanel),y=a("."+e.rstButton+" a"),D=a("."+e.infoPanelWrapper),h=a("."+e.header),b.find("."+e.topicsPanel).on("click","."+e.item,U),b.find("."+e.categoryPanel).on("click","."+e.item,R),b.find("."+e.rstButton).on("click",Z),b.find("."+e.closeWrapperMobile).on("click",
Y),b.find("."+e.suggestionsPanel).on("click","."+e.contactOption,S),b.find("."+e.infoPanelWrapper).on("click","."+e.chatOnlineStart,aa),c=a(".first-level").height()+50,g=a(".first-level ul").find("li").hasClass("fixed")?!0:!1,a(".custom-height").height(c-15),g?(a(".custom-height-scroll").height(c-15-50),615>c&&a(".custom-height-first").height(c-15-50)):(a(".first-level .contact-us-nav--panel-content").removeClass("fixed-padding"),a(".custom-height-scroll").height(c-15)),ba("custom-scrollbar"))}}}();
h.load=function(a){a.length&&l.init()};f.register({name:"contact-us-navigation",api:h,selector:"."+e.component})})(VMJS,VMJSjQuery);
(function(f,a){function h(b){var c={},d=b.serializeArray();c.recaptcha_response_field=b.find("#g-recaptcha-response").val();a.each(d,function(){"recaptcha_response_field"!=this.name&&"g-recaptcha-response"!=this.name&&(c[this.name]=this.value)});return c}function e(){var c=a(".cms-wayleave-form");b();a(".get-in-touch").on("click",function(){c.removeClass("hidden");a(this).hide()});a(".close-form").on("click",function(){c.addClass("hidden");a(".get-in-touch").show()});a(".close-feedback-message").on("click",
function(){a(".form-request-feedback").addClass("hidden");a(".get-in-touch").show()});c.find(".selectpicker").selectpicker("refresh");if(c.length)c.validator({feedback:{success:"fa-check",error:"fa-exclamation-triangle"}}).on("submit",function(b){var g=a(this);b.isDefaultPrevented()||(b.preventDefault(),a.ajax({type:"POST",url:g.prop("action"),cache:!1,dataType:"json",data:JSON.stringify(h(g)),contentType:"application/json",success:function(b){d("success");c.addClass("hidden");b=a(".cms-wayleave-form");
b[0].reset();b.find(".submit-cta button").addClass("disabled");"undefined"!==typeof grecaptcha&&grecaptcha.reset()},error:function(a){d("error");c.addClass("hidden")}}))})}function d(b){var c=a(".cms-wayleave"),d=c.find(".form-request-feedback");d.removeClass("success error").addClass(b);d.find("p").hide().end().find("."+b).show();d.removeClass("hidden");a("html, body").animate({scrollTop:c.offset().top},500)}function b(){window.recaptchaCallback=function(b){var c=a("#recaptcha_response_field");c.prop("checked")!=
!!b&&c.trigger("click")}}f.register({name:"cms-wayleave",api:{load:function(a){a.each(e)}},selector:".cms-wayleave"})})(VMJS,VMJSjQuery);
(function(f,a){function h(b){var c={},d=b.serializeArray();c.uprn=p;c.recaptcha_response_field=b.find("#g-recaptcha-response").val();a.each(d,function(){"recaptcha_response_field"!=this.name&&"g-recaptcha-response"!=this.name&&(c[this.name]=this.value);"consent"==this.name&&"on"==this.value&&(c[this.name]=!0)});return c}function e(){t.find(".selectpicker").selectpicker("refresh");b();B&&c();if(t.length)t.validator({feedback:{success:"fa-check",error:"fa-exclamation-triangle"}}).on("submit",function(b){var c=
a(this);if(!b.isDefaultPrevented()){b.preventDefault();var g=t.find(".cms-horizontal-submit");g.attr("disabled",!0);a.ajax({type:"POST",url:c.prop("action"),cache:!1,dataType:"json",data:JSON.stringify(h(c)),contentType:"application/json",success:function(a){"Wayleave Consent is already given"==a.reason?d("already-registered"):(d("success"),t.find(".form-content").addClass("hidden"),u.addClass("hidden"),t.find(".form-inline").removeClass("separator"))},error:function(){d("backend-error");g.attr("disabled",
!1)}})}})}function d(b){var c=t.find(".form-inline .form-request-feedback"),d=t.find(".form-inline .form-request-thank-you");"success"==b?(c.addClass("hidden"),d.removeClass("hidden")):(c.find("span.error").addClass("hidden"),c.find("."+b).removeClass("hidden"),c.removeClass("hidden"));a("html, body").animate({scrollTop:t.offset().top},500)}function b(){window.recaptchaCallback=function(b){var c=a("#recaptcha_response_field");c.prop("checked")!=!!b&&c.trigger("click")}}function c(){var a=u.find(".select-group-association"),
b=u.find(".select-group-premises"),c=u.find(".select-group-freehold"),d=u.find(".select-group-tenancy"),e=a.find("select"),f=b.find("select"),h=c.find("select"),p=d.find("select");e.on("change",function(){k(u);switch(e.val()){case "freehold":q(b);break;case "leasehold":q(b);break;case "tenant":q(d);break;default:k(u)}});f.on("change",function(){if("freehold"==e.val())switch(f.val()){case "1":l("show");g(c);break;case "2":l("hide");g(c);q(c);break;case "more than 2":l("hide");g(c);q(c);break;default:l("hide"),
g(c)}"leasehold"==e.val()&&(""!==f.val()?l("show"):l("hide"))});h.on("change",function(){switch(h.val()){case "only my premises":l("show");break;case "the entire building":l("show");break;default:l("hide")}});p.on("change",function(){switch(p.val()){case "less than 12 months":l("hide");m("show");break;case "more than 12 months":l("show");m("hide");break;default:l("hide"),m("hide")}})}function g(a){a.find("select").val("");a.find(".selectpicker").selectpicker("refresh");a.addClass("hidden")}function k(a){a.find(".select-group:not(:first)").find("select").val("");
a.find(".selectpicker").selectpicker("refresh");a.find(".select-group:not(:first)").addClass("hidden");l("hide")}function q(a){a.removeClass("hidden")}function l(a){switch(a){case "hide":t.find(".form-inline").addClass("hidden");m("hide");break;case "show":t.find(".form-inline").removeClass("hidden")}}function m(a){switch(a){case "hide":t.find(".consent-customer-type-fields .form-request-feedback").addClass("hidden");break;case "show":t.find(".consent-customer-type-fields .form-request-feedback").removeClass("hidden")}}
var n={},p=common.cmsUtils.getParametersFromUrl().uprn,t=a(".cms-wayleave-consent-form"),B=t.parents(".wayleave-upfront-consent-form").hasClass("wayleave-consent-customer-type"),u=a(".cms-wayleave-consent-form .consent-customer-type-fields");n.load=function(a){a.each(e)};f.register({name:"cms-wayleave-consent",api:n,selector:".cms-wayleave-consent"})})(VMJS,VMJSjQuery);
(function(f,a){var h={},e=function(){this.settings={autoplay:1,autohide:1,modestbranding:0,rel:0,showinfo:0,controls:0,disablekb:1,enablejsapi:0,iv_load_policy:3,startSeconds:0,suggestedQuality:"hd720"};this.tvs={};this.imageContentElement=null;this.videoTagId=0;this.tv=a(".tv");this.mask=this.tv.find(".mask");this.videoBanner=a(".video-banner");this.isDevice=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)};e.prototype={checkIfDevice:function(){this.isDevice&&
this.mask.removeClass("loading").addClass("no-pointer").next(".tv-placeholder").addClass("active")},changeVideoState:function(){if(this.tvs.length&&!this.isDevice){this.imageContentElement.is(":visible");for(var a in this.tvs)this.tvs[a].$change()}},onResize:function(){var d=this;a(window).on("load resize",function(){d.vidRescale();d.changeVideoState()})},createIframe:function(){var a=document.createElement("script");a.src="https://www.youtube.com/player_api";var b=document.getElementsByTagName("script")[0];
b.parentNode.insertBefore(a,b)},onPlayerStateChange:function(d,b){var c=a("#"+b);1===d.data?(c.addClass("active"),this.mask.removeClass("loading")):0===d.data&&this.tvs[b].seekTo(0)},init:function(){var d=this;window.onYouTubeIframeAPIReady=function(){var b=a(".video-tile-wrapper");b.length&&(b.each(function(){var b=a(this),g=b.find(".tv-placeholder"),e="video-tile-"+d.videoTagId,f=g.attr("video-id");g.attr("id",e);d.imageContentElement=b.find(".image-content");d.tvs[e]=new YT.Player(e,{videoId:f,
events:{onReady:function(a){a.target.mute();d.vidRescale();d.changeVideoState()},onStateChange:function(a){d.onPlayerStateChange(a,e)}},playerVars:d.settings});d.videoTagId++}),d.checkIfDevice())}},vidRescale:function(){if(this.videoBanner.length){var d=this,b=a(window).width();this.videoBanner.each(function(){var c=a(this),g=c.height()+200,e=c.find(".screen");c=d.tvs[c.find("iframe").attr("id")];b/g>16/9?(c&&c.setSize(b,b/16*9),e.css({left:"0px"})):(c&&c.setSize(g/9*16,g),e.css({left:-(e.outerWidth()-
b)/2}))})}}};h.init=function(a){a.length&&(a=new e,a.createIframe(),a.init(),a.onResize())};f.register({name:"youtube",api:h,selector:".video-tile-wrapper"})})(VMJS,VMJSjQuery);
(function(f,a){var h={},e=function(){this.regCookie=JSON.parse(a.cookie("cms.vm.user.reg.data"));this.aboutYouForm=a(".cms-tell-us-about-you-form");this.aboutYouButton=a(".tell-us-about-you-button");this.requestFeedback=a(".form-request-feedback");this.aboutYouFormWrapper=a(".cms-tell-us-about-you-form-wrapper");this.submitBtn=a(".submit");this.notNow=a(".not-now");this.closeFeedback=a(".close-feedback-message")};e.prototype={toggle:{show:function(a){a.removeClass("hidden")},hide:function(a){a.addClass("hidden")}},
showRequestFeedback:function(d){var b=this.aboutYouFormWrapper.find(".form-request-feedback");b.removeClass("success error").addClass(d);b.find("p").hide().end().find("."+d).show();b.removeClass("hidden");a("html, body").animate({scrollTop:b.parents(".tell-us-about-you-form").offset().top},500)},setSubmitFormInCookie:function(){this.regCookie.AdditionalInfoSubmitted=!0;var d=new Date;d=new Date(d.getFullYear()+1,d.getMonth(),d.getDate());a.cookie("cms.vm.user.reg.data",JSON.stringify(this.regCookie),
{path:"/",expires:d})},toggleSubmitBtn:function(){var d=!!this.aboutYouForm.find(":input").filter(function(){var b=a(this);return"bbProvider"===b.attr("name")&&""!==b.val()||b.prop("checked")}).length;this.submitBtn[d?"removeClass":"addClass"]("disabled cms-disabled");this.aboutYouForm.validator("update");return d},bindSubmit:function(){var d=this;if(this.aboutYouForm.length)this.aboutYouForm.validator({feedback:{success:"fa-check",error:"fa-exclamation-triangle"}}).on("submit",function(b){if(!b.isDefaultPrevented()){b.preventDefault();
if(!d.toggleSubmitBtn())return!1;a.ajax({type:"POST",url:d.aboutYouForm.prop("action"),cache:!1,dataType:"json",data:JSON.stringify(d.serializeForm(d.aboutYouForm)),contentType:"application/json",success:function(a){a&&"Exception"===a.result?(d.showRequestFeedback("error"),d.toggle.hide(d.aboutYouForm)):(d.showRequestFeedback("success"),d.toggle.hide(d.aboutYouForm),d.setSubmitFormInCookie());d.resetForm()},error:function(){d.showRequestFeedback("error");d.toggle.hide(d.aboutYouForm);d.resetForm()}})}})},
resetForm:function(){this.aboutYouForm.get(0).reset();this.aboutYouForm.find(".other-parent, .other, .date-fields").addClass("hidden");this.limitMonthsByYear();this.aboutYouForm.find(".selectpicker").selectpicker("refresh");this.toggleSubmitBtn()},bindInputChange:function(){var a=this;this.aboutYouForm.find(":input").on("input change",function(){a.toggleSubmitBtn();a.aboutYouForm.find(".selectpicker").selectpicker("refresh")})},bindNotNow:function(){var a=this;this.notNow.on("click",function(){a.toggle.hide(a.aboutYouForm);
a.toggle.show(a.aboutYouButton);a.resetForm()})},bindTellUsAboutYou:function(){var a=this;this.aboutYouButton.on("click",function(){a.toggle.show(a.aboutYouForm);a.toggle.hide(a.aboutYouButton)})},bindCloseFeedback:function(){var a=this;this.closeFeedback.on("click",function(){a.toggle.hide(a.requestFeedback);a.toggle.show(a.aboutYouButton);a.requestFeedback.hasClass("success")&&a.aboutYouFormWrapper.hide()})},limitMonthsByYear:function(){var d=new Date,b=d.getMonth(),c=d.getFullYear(),g=function(d){d=
d||a(".date-fields");var g=d.find("select.datepicker-month"),e=d.find("select.datepicker-year");d.length&&(c!=e.val()?g.find("option").removeClass("hidden").end().val(b).selectpicker("refresh"):g.find("option").each(function(c,d){c=a(this);b>d.value&&c.addClass("hidden")}).end().val(b).selectpicker("refresh"))};g();a(".datepicker-year").on("change",function(){g(a(this).parents(".date-fields"))})},toggleFormFields:function(){a(".toggle-hidden").not("div").on("change",function(){var d=a(this),b=d.parents(".form-group").first(),
c=b.find(".date-fields"),g=b.find(".other");d.is("input")&&(b=b.find(".other-parent"),b.length?b.toggleClass("hidden"):(b=d.prop("checked")||!1,g.find("input").val("").end()[b?"removeClass":"addClass"]("hidden"),g.hasClass("has-feedback")&&g.find("input").focusin().focusout()));d.is("select")&&(g=d.val(),d=d.find("option:selected"),c[g&&!d.data("type")?"removeClass":"addClass"]("hidden"))});this.toggleSubmitBtn()},serializeForm:function(d){var b="endDateMonthBB endDateMonthTV endDateMonthPhone endDateMonthMobile endDateYearBB endDateYearTV endDateYearMobile endDateYearPhone interestedInTV interestedInPhone interestedInMobile customerType otherBBProvider otherTvProvider otherPhoneProvider otherMobileProvider bbProvider tvProvider phoneProvider mobileProvider".split(" "),
c={},g=this,e=d.find("[name\x3dbbProvider]").val();c.interestedInBB=""!==e;c.customerType=d.find("#customerType").prop("checked")?"Business":"Residential";c.addressId=this.regCookie.addressId;d=d.serializeArray();a.each(d,function(){if(-1===a.inArray(this.name,b))void 0!==c[this.name]?(c[this.name].push||(c[this.name]=[c[this.name]]),c[this.name].push(this.value||"")):c[this.name]=("consent"===this.name?!0:this.value)||"";else{!this.name.startsWith("other")&&this.name.endsWith("Provider")&&(c[this.name]=
g.getSelectedService(this.name,this.value));if(-1!==this.name.indexOf("endDateMonth")){var d=this.name.slice(12),e=d?d.toLowerCase()+"ContractEndDate":"bbContractEndDate";c[d.toLowerCase()+"Provider"]?c[e]=g.getContractEndDate(this.value,d):c[e]=""}-1!==this.name.indexOf("interestedIn")&&(c[this.name]=this.value?!0:!1)}});"0"===c.tvProvider&&(c.tvProvider=c.bbProvider);"0"===c.phoneProvider&&(c.phoneProvider=c.bbProvider);return c},getSelectedService:function(a,b){return b||""},getContractEndDate:function(d,
b){d=parseInt(d)+1;return a("[name\x3dendDateYear"+b+"]").val()+"-"+(10>d?"0"+d:d)}};h.load=function(a){if(!a.length)return!1;a=new e;if(!a.regCookie)return!1;a.regCookie.AdditionalInfoSubmitted?a.aboutYouFormWrapper.hide():(a.aboutYouFormWrapper.removeClass("hidden"),a.bindInputChange(),a.bindSubmit(),a.toggleSubmitBtn(),a.bindNotNow(),a.bindTellUsAboutYou(),a.bindCloseFeedback(),a.toggleFormFields(),a.limitMonthsByYear(),a.aboutYouForm.find(".selectpicker").selectpicker("refresh"))};f.register({name:"cms-tell-us-about-you-form",
api:h,selector:".cms-tell-us-about-you-form"})})(VMJS,VMJSjQuery);
(function(f,a,h){var e={},d=localStorage,b=function(a){d.setItem("affiliate-logo-"+a,JSON.stringify(e[a]))},c=function(){return-1!==location.search.indexOf("buspart\x3d")},g=function(c,d){e.affiliates&&9E5>(new Date).getTime()-e.affiliates.date?c():a.get("/services/api/affiliate-logo?currentSite\x3d"+d).success(function(a){a&&(a.date=(new Date).getTime(),e.affiliates=a,b("affiliates"),c())})},k=function(a){e.remaining=a?a:e.remaining-1;b("remaining")},q=function(){return(location.search.split("buspart\x3d")[1]||
"").split("\x26")[0]},l=function(a,b){return h.compile(a)(b)},m=function(b,c){var d=a.Deferred(),g=new Image;g.onload=function(){d.resolve()};g.onerror=function(){d.reject()};g.src=b;d.always(c)},n=function(){if(!(1>e.remaining)){var a=setTimeout(function(){e.content.addClass("affiliate-logo--loading")},300);var b=l(e.templates.content,e.affiliate);m(e.affiliate.imgPathField,function(){e.content.html(b);clearTimeout(a);e.content.removeClass("affiliate-logo--loading")});k()}},p=function(){var b;a:{if(b=
e.affiliates.pages)for(var c=0,d=b.length;c<d;c++)if(b[c].replace(".html","").endsWith(window.location.pathname)||0>b[c].indexOf("/")&&"/"===window.location.pathname){b=!0;break a}b=!1}b||k(0);n();a(e.content).trigger("affiliate-logo-initialized")};e.init=function(f){e.content=a(f[0]).find(".affiliate-logo--content");e.templates={content:a("#affiliateLogo-content-tpl").html()};e.content.length&&e.templates.content&&(f=a(f[0]).find(".affiliate-logo--content").data("node-path").split("/")[2],e.affiliates=
JSON.parse(d.getItem("affiliate-logo-affiliates")),e.affiliate=JSON.parse(d.getItem("affiliate-logo-affiliate")),e.remaining=JSON.parse(d.getItem("affiliate-logo-remaining")),c||e.remaining)&&(!e.affiliate||q()&&e.affiliate.paramValue!==q()?g(function(){a:{var a=q(),c=e.affiliates.partners;if(c)for(var d=0,g=c.length;d<g;d++){var f=c[d];if(f.paramValue===a){e.affiliate=f;b("affiliate");e.remaining=3;break a}}}p()},f):p())};f.register({name:"affiliate-logo",api:e,selector:".affiliate-logo"})})(VMJS,
VMJSjQuery,Handlebars);
(function(f,a){var h={},e=function(){this.loadingInMotion=!1;this.start=null;this.strokeDashOffset=0;this.maxStrokeDashOffset=5181.1875;this.animTimeSecs=2;this.pixPerFrame=this.maxStrokeDashOffset/(60*this.animTimeSecs);this.requestId=this.path=null;this.vendors=["ms","moz","webkit","o"];this.lastTime=0;this.SVGSupport=null;window.$this=this;window.requestAnimFrame=null;window.cancelAnimFrame=null};e.prototype={bindAnimationFrames:function(){this.path=document.getElementById("svgInfinity");window.requestAnimFrame=
window.requestAnimationFrame;window.cancelAnimFrame=window.cancelAnimationFrame;for(var a=0;a<this.vendors.length&&!this.requestAnimFrame;++a)window.requestAnimFrame=window[this.vendors[a]+"RequestAnimationFrame"],window.cancelAnimFrame=window[this.vendors[a]+"CancelRequestAnimationFrame"];window.requestAnimFrame||(window.requestAnimFrame=function(a){var b=(new Date).getTime(),d=Math.max(0,16-(b-window.$this.lastTime)),e=window.setTimeout(function(){a(b+d)},d);window.$this.lastTime=b+d;return e});
window.cancelAnimFrame||(window.cancelAnimFrame=function(a){clearTimeout(a)})},moveStrokeDashOffset:function(a){window.$this.start||(window.$this.start=a);var b=a-window.$this.start,c=window.$this.strokeDashOffset+window.$this.pixPerFrame;window.$this.path.setAttribute("stroke-dashoffset",c);window.$this.strokeDashOffset=c;b<2E3*window.$this.animTimeSecs&&window.$this.loadingInMotion?window.$this.requestId=window.requestAnimFrame(window.$this.moveStrokeDashOffset):(window.$this.strokeDashOffset=0,
window.$this.loadingInMotion?(window.$this.start=a,window.$this.requestId=window.requestAnimFrame(window.$this.moveStrokeDashOffset)):window.$this.resetLoadingAnimation())},startLoadingAnimation:function(){this.resetLoadingAnimation();this.loadingInMotion=!0;this.SVGSupport&&!this.requestId&&(window.request=window.requestAnimFrame(this.moveStrokeDashOffset))},resetLoadingAnimation:function(){this.stopLoadingAnimation();window.cancelAnimFrame(this.requestId);this.requestId=void 0;this.start=null;this.path.setAttribute("stroke-dashoffset",
0)},stopLoadingAnimation:function(){this.loadingInMotion=!1},checkSVGSupport:function(){this.SVGSupport=document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")},init:function(){return"\x3csvg xmlns\x3d'http://www.w3.org/2000/svg' height\x3d'111' width\x3d'182' viewBox\x3d'60 55 900 610'\x3e\x3cpath xmlns\x3d'http://www.w3.org/2000/svg' id\x3d'svgInfinity' fill\x3d'none'stroke\x3d'#ED0000' stroke-width\x3d'40'd\x3d'M654.321,377.922c29.828,40.977,62.912,74.562,96.109,97.498  c33.249,22.988,66.114,35.139,95.036,35.139c27.883,0,51.258-11.501,67.604-33.264c19.812-26.312,30.732-63.699,30.75-105.271  c0-41.571-10.923-78.956-30.753-105.272c-16.338-21.757-39.714-33.257-67.601-33.257l0,0c-28.944,0-61.805,12.149-95.037,35.137  c-33.229,22.947-66.37,56.611-96.267,97.713l-8.808,12.311c-59.42,82.599-125.618,150.242-192.048,196.134  c-65.203,45.084-129.652,68.91-186.372,68.91c-54.679,0-100.52-22.553-132.574-65.23c-38.854-51.602-60.269-124.92-60.301-206.446  c0-81.523,21.415-154.837,60.306-206.446c32.041-42.667,77.881-65.219,132.568-65.219l0,0c56.759,0,121.206,23.826,186.374,68.905  c66.363,45.83,132.546,113.456,192.012,196.087L654.321,377.922z' stroke-dasharray\x3d'2590.59375 2590.59375' stroke-dashoffset\x3d'0'\x3e\x3c/path\x3e\x3c/svg\x3e\x3cspan\x3eLoading...\x3c/span\x3e"},
checkAjax:function(d){var b=setInterval(function(){0===a.active&&(d.addClass("hidden"),clearInterval(b))},1E3)}};h.load=function(a){if(a.length){var b=new e;a.hasClass("cms-spinner-rendered")||a.append(b.init()).addClass("cms-spinner-rendered");b.checkAjax(a);b.checkSVGSupport();b.bindAnimationFrames();b.startLoadingAnimation()}};f.register({name:"cms-spinner",api:h,selector:".cms-spinner"})})(VMJS,VMJSjQuery);
(function(f,a){function h(e,d){function b(){l.currentTheta>p?(h.text(f+"%"),100===f&&h.attr("transform","matrix(1 0 0 1 58 148)"),cancelAnimationFrame(B)):(9<t&&h.attr("transform","matrix(1 0 0 1 61 148)"),h.text(t+"%"),t++,l.attr("transform","rotate("+l.currentTheta/2+" "+n.x+" "+n.y+" )"),m.attr("transform","translate("+(97*Math.cos((l.currentTheta+-180)*Math.PI/180)+97)+","+97*Math.sin((l.currentTheta+-180)*Math.PI/180)+")"),l.currentTheta+=1.8,B=requestAnimationFrame(b))}e=a(d).find(".gauge-testing-data");
d=a(d).find(".gauge-svg");document.documentMode&&d.addClass("gauge-ie");if(e.length){var c=parseFloat(e.data("target"))||0;var g=e.data("addresses-number")||0;e=e.data("registration-number")||0;var f=e/(c/100*g)*100,h=d.find("text"),l=d.find(".svg-plectrum"),m=d.find(".percentage");e=d.find(".plectrum-center")[0].getBBox();var n={x:e.x+e.width/2,y:e.y+e.height/2};switch(!0){case 50>f&&0!==f%1:f=parseInt(f)+1;break;case 50<f&&100>f&&0!==f%1:f=parseInt(f);break;case 100<=f:f=100}var p=f/100*180,t=0;
l.currentTheta=0;var B=requestAnimationFrame(b)}}f.register({name:"gauge-component",api:{load:function(a){a.each(h)}},selector:".gauge-component"})})(VMJS,VMJSjQuery);
(function(f,a){function h(){function e(b,c,d,g){return a({deg:-60}).animate({deg:c},{duration:d,step:function(a){b.css({transform:"rotate("+a+"deg)"})},complete:g||a.noop})}function d(a){var b=a.css("backgroundPosition").split(" ")[1];b=parseFloat(b)+205;0>=b&&a.css("backgroundPosition","0 "+b+"px")}function b(a,b,c,d){var g=0,e=window.setInterval(function(){a();++g===c&&(("function"===typeof d?d:function(){})(),window.clearInterval(e))},b)}var c=a(".selected-media-type"),g=a(".cms-speed-checker-time-virgin"),
f=a(".cms-speed-checker-accelerometer-overlay-user"),h=a(".cms-speed-checker-accelerometer-overlay-vm"),l=a(".virgin-pointer"),m=a(".competitor-pointer"),n=a(".cms-speed-checker-accelerometer-winner"),p=function(){d(f)},t=function(){d(h)};l.stop().css({transform:"rotate(-60deg)"});m.stop().css({transform:"rotate(-60deg)"});var B=function(){n.show().animate({fontSize:"35px"},100).animate({fontSize:"25px"},200)};a(".compare-now").on("click",function(){l.stop().css({transform:"rotate(-60deg)"});m.stop().css({transform:"rotate(-60deg)"});
f.css("background-position","0 -3075px");h.css("background-position","0 -3075px");var d=a(".current-competitor option:selected").text(),k=a(".cms-speed-checker-broadband-speed-select option:selected").val(),q=a("[class$\x3d-selected]").attr("value"),w=a(".cms-speed-checker-accelerometer-time");a(".cms-speed-checker__animation").show();a(".cms-speed-checker-content-types").hide();a(".cms-speed-checker-controls").hide();a(".current-competitor-text").text(d);switch(q){case "movie":c.text("HD movie (4.7GB)");
g.text("3 mins, 2 secs");e(l,180,2052);b(t,137,15,B);switch(k){case "1":w.text("1 hr, 0 mins, 59 secs");e(m,180,41254);b(p,2750,15);break;case "2":w.text("18 mins, 30 secs");e(m,180,12515);b(p,834,15);break;case "3":w.text("9 mins, 22 secs"),e(m,180,6336),b(p,423,15)}break;case "music":c.text("Album (80MB)");g.text("0 mins, 3 secs");e(l,180,912);b(t,61,15,B);switch(k){case "1":w.text("0 mins, 54 secs");e(m,180,16416);b(p,1094,15);break;case "2":w.text("0 mins, 16 secs");e(m,180,4864);b(p,324,15);
break;case "3":w.text("0 mins, 8 secs"),e(m,180,2432),b(p,162,15)}break;case "game":c.text("Game (20GB)");g.text("15 mins, 10 secs");e(l,180,3420);b(t,228,15,B);switch(k){case "1":w.text("5 hrs, 4 mins, 56 secs");e(m,180,68761);b(p,4584,15);break;case "2":w.text("1 hrs, 32 mins, 30 secs");e(m,180,20858);b(p,1391,15);break;case "3":w.text("46 mins, 49 secs"),e(m,180,10557),b(p,704,15)}break;case "tvshow":switch(c.text("TV show (1.3GB)"),g.text("59 secs"),e(l,180,1368),b(t,91,15,B),k){case "1":w.text("19 mins, 39 secs");
e(m,180,27337);b(p,1822,15);break;case "2":w.text("5 mins, 58 secs");e(m,180,8301);b(p,553,15);break;case "3":w.text("3 mins, 1 secs"),e(m,180,4197),b(p,280,15)}}});a(".compare-again").on("click",function(){a(".cms-speed-checker__animation").hide();a(".cms-speed-checker-content-types").show();a(".cms-speed-checker-controls").show();n.hide()});var u=function(){var b=a("[class$\x3d-selected]").not(this);if(b.length){var c=b.attr("class").replace("-selected","-unselected");b.attr("class",c);b.siblings("span").removeClass("core-white")}};
a(".cms-speed-checker__movie div").on("click",function(){u();a(this).toggleClass("movie-selected movie-unselected");a(this).siblings("span").toggleClass("core-white")});a(".cms-speed-checker__album div").on("click",function(){u();a(this).toggleClass("music-selected music-unselected");a(this).siblings("span").toggleClass("core-white")});a(".cms-speed-checker__game div").on("click",function(){u();a(this).toggleClass("game-selected game-unselected");a(this).siblings("span").toggleClass("core-white")});
a(".cms-speed-checker__tv div").on("click",function(){u();a(this).toggleClass("tvShow-selected tvShow-unselected");a(this).siblings("span").toggleClass("core-white")})}f.register({name:"speed-checker",api:{load:function(a){a.each(h)}},selector:".speed-checker"})})(VMJS,VMJSjQuery);
(function(f,a,h){var e={},d=function(a,b){a=a.find(".validation");b?a.removeClass("hidden"):a.addClass("hidden")},b=function(b){if(b.data("variant-id")&&b.data("content-type")){var c="?contentType\x3d"+b.data("content-type")+"\x26variantId\x3d"+b.data("variant-id");c+="\x26currentSite\x3d"+b.data("node-path").split("/")[2]+"\x26timestamp\x3d"+Date.now();a.ajax({url:"/services/api/latestArticles"+c,dataType:"json",success:function(c){var g="blogs"!=b.data("content-type")&&"stories"!=b.data("content-type"),
e=b.find("."+b.data("content-type"));c={articles:c,releaseDateDisplayed:g};g=a("#"+b.data("variant-id")+"_template").html();c=h.compile(g)(c);d(b,!1);e.html(c)},error:function(){d(b,!0)}})}else d(b,!0)};e.init=function(c){c.each(function(){b(a(this))})};f.register({name:"latest-articles-component",api:e,selector:".latest-articles-component"})})(VMJS,VMJSjQuery,Handlebars);
(function(f,a){function h(){var b=function(a,b,c){this.latlng=a;this.args=c;this.setMap(b)};b.prototype=new google.maps.OverlayView;b.prototype.draw=function(){var b=this.div;b||(b=this.div=document.createElement("div"),b.className="plectrum-marker",b.style.position="absolute",b.style.cursor="pointer",b.style.width="66px",b.style.height="75px","undefined"!==typeof this.args.marker_id&&(b.dataset.marker_id=this.args.marker_id),this.getPanes().overlayImage.appendChild(b));var c=this.getProjection().fromLatLngToDivPixel(this.latlng);
c&&(a(".status-map-plectrum").length?(b.style.top=c.y-parseInt(b.style.height)+5+"px",b.style.left=c.x-Math.round(parseInt(b.style.width)/2)+"px"):(b.style.top=c.y-parseInt(b.style.height)+10+"px",b.style.left=c.x-Math.round(parseInt(b.style.width)/2)+6+"px"))};b.prototype.remove=function(){this.div&&(this.div.parentNode.removeChild(this.div),this.div=null)};b.prototype.getPosition=function(){return this.latlng};window.CustomMarker=b}function e(b,c){b=a.cookie("cms.vm.user.reg.data");var g=window.matchMedia("(max-width: 767px)").matches,
e=a(".updates-arrow"),f=function(b,d){a(c).find(".dynamic-content-wrapper").css("display",b);a(c).find(".map-wrapper").css("position",d)};g&&(a(".updates-dropdown").removeClass("hidden"),f("none"),a(".dropdown-text").text("Updates"),e.click(function(){e.toggleClass("updates-animate-open","updates-animate-closed");e.hasClass("updates-animate-open")?(a(".dropdown-text").text("Close"),f("block","absolute"),a(".updates-dropdown").insertAfter(".dynamic-content-wrapper")):(a(".dropdown-text").text("Updates"),
f("none","relative"))}));try{var k=JSON.parse(b);if(k&&k.currentAddress){var l=k.currentAddress,p=l.campaign||"100VC";var q=l.postcode;var m=l.premiseId,n;window.cmsUpdatesMapModel&&(n=B.mapCommsStatus(l.commsStatus));var y=setInterval(function(){if("undefined"!=typeof google){clearInterval(y);h();d(m,l.communityId,q,c,p,n);var b=n,g=window.cmsUpdatesMapModel,e=b.charAt(0).toLowerCase()+b.substr(1);b=a(c);if(g){var f=g[e+"UpdateOne"],k=g[e+"UpdateTwo"];g=g[e+"UpdateThree"];f&&(b.find(".update-message-one").addClass("message-body"),
b.find("#updates-map-template .update-message-one").html(f));k&&(b.find(".update-message-two").addClass("message-body"),b.find("#updates-map-template .update-message-two").html(k));g&&(b.find(".update-message-three").addClass("message-body"),b.find("#updates-map-template .update-message-three").html(g))}b.find(".dynamic-content-wrapper").removeClass("hidden")}},100)}}catch(N){}}function d(d,e,f,h,n,t){m(e,n,function(d){var m=e&&d;(new google.maps.Geocoder).geocode({address:f},function(d,e){if(e==
google.maps.GeocoderStatus.OK){var f=d[0].geometry.location,n=new google.maps.Map(document.getElementById("mapContainer"),{center:f,mapTypeId:google.maps.MapTypeId.ROADMAP,scrollwheel:!1,disableDefaultUI:!0,draggable:!1,disableDoubleClickZoom:!0});new CustomMarker(n.getCenter(),n,{marker_id:"markerId"});n.addListener("idle",function(){a(h).find(".plectrum-marker").addClass("red")});if(m&&0!==m.communityBoundaries.length){d=c(m.communityBoundaries);var w=q(d);google.maps.event.addListenerOnce(n,"projection_changed",
function(){b(n,w,!0)});google.maps.event.addDomListener(window,"resize",function(){google.maps.event.trigger(n,"resize");b(n,w,!0)});e=window.cmsUpdatesMapModel["plectrumColor"+t];g(n,l(d));k(p(e),n)}else google.maps.event.addDomListener(window,"resize",function(){google.maps.event.trigger(n,"resize");n.setCenter(f);b(n,f,!1)}),b(n,f,!1)}})})}function b(b,c,d){var g=0,e=0,f=0,h=a(".dynamic-content-wrapper").width();if(d&&b.getProjection()){window.matchMedia("(max-width: 767px)").matches?(g=35,e=75,
f=35):window.matchMedia("(max-width: 1199px)").matches?(g=h?h+120+35:320,e=75,f=35):window.matchMedia("(min-width: 1200px)").matches&&(g=h?h+120+35:520,e=75,f=35);var k=b.getProjection().fromLatLngToPoint(c.getNorthEast()),l=b.getProjection().fromLatLngToPoint(c.getSouthWest());b.fitBounds(c);g=new google.maps.Point(("number"==typeof g?g:0)/Math.pow(2,b.getZoom())||0,("number"==typeof e?e:0)/Math.pow(2,b.getZoom())||0);e=new google.maps.Point(("number"==typeof f?f:0)/Math.pow(2,b.getZoom())||0,("number"==
typeof e?e:0)/Math.pow(2,b.getZoom())||0);f=b.getProjection().fromPointToLatLng(new google.maps.Point(k.x+g.x,k.y-g.y));k=b.getProjection().fromPointToLatLng(new google.maps.Point(l.x-e.x,k.y-e.y));c.extend(f);c.extend(k);b.fitBounds(c)}d||(b.setZoom(15),b.setCenter(c),window.matchMedia("(max-width: 767px)").matches||b.panBy(h?(h+120)/2:0,0))}function c(b){var c=[];a.each(b,function(a,b){a=parseFloat(b.latitude);b=parseFloat(b.longitude);c.push({lat:a,lng:b})});return c}function g(a,b){u=new google.maps.visualization.HeatmapLayer({data:b});
u.setMap(a)}function k(a,b){var c=[];if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(a)){a=a.substring(1).split("");3===a.length&&(a=[a[0],a[0],a[1],a[1],a[2],a[2]]);a="0x"+a.join("");c.push("rgba("+[a>>16&111,a>>8&255,a&255].join()+",0)");for(var d=0;22>=d;d++)c.push("rgba("+[a>>16&255,a>>8&255,a&255].join()+",1)")}u.set("gradient",u.get("gradient")?null:c);u.set("opacity",u.get("opacity")?null:.5);google.maps.event.addListener(b,"zoom_changed",function(){var a=b.getZoom();switch(!0){case 15==a:a=15;break;case 14==
a:a=10;break;case 13==a:a=7;break;case 12==a:a=3;break;case 12>a:a=1;break;case 15<=a:a=20;break;default:a=20}u.set("radius",a)})}function q(b){var c=new google.maps.LatLngBounds;a.each(b,function(a,b){c.extend(new google.maps.LatLng(b.lat,b.lng))});return c}function l(b){var c=[];a.each(b,function(a,b){c.push(new google.maps.LatLng(b.lat,b.lng))});return c}function m(b,c,d){var g={};b?a(CMS_community_details_obj).length?n(g,CMS_community_details_obj,d):B.makeAjaxCall(B.getCommunityApi(),"application/json",
"json","GET","communityId\x3d"+b+"\x26campaign\x3d"+c,function(a){n(g,a.communityDetails,d)},function(){B.redirectToErrorPage(B.getErrorPage())}):(g.registrationsCount=0,g.communityBoundaries=[],d&&d(g))}function n(a,b,c){b&&null!=b.registeredNo&&(a.registrationsCount=b.registeredNo);b&&b.communityBoundaries&&(a.communityBoundaries=b.communityBoundaries);c&&c(a)}function p(a){for(var b=[{name:"orange",value:"#ff9900"},{name:"grey",value:"#333333"},{name:"purple",value:"#645096"},{name:"blue",value:"#3e55a0"}],
c=0;c<b.length;c++)if(a===b[c].name)return b[c].value}var t={},B=common.cmsUtils,u;t.load=function(a){a.each(e)};f.register({name:"updates-map-container",api:t,selector:".updates-map-container"})})(VMJS,VMJSjQuery);(function(f,a){function h(){var e=a("body").data("commsStatus");e&&(a("body").addClass(e),a(".cms-column-splitter-container:not(."+e+")").remove())}f.register({name:"cms-column-splitter-container",api:{load:function(a){a.each(h)}},selector:".cms-column-splitter-container"})})(VMJS,VMJSjQuery);
(function(f,a){function h(b,c){b=a(c);var g=b.hasClass("edit");if(!d()||g)a(".unsupported-msg",b).show(50,function(){e(c,g)}),g||a(window).resize(function(){e(c,g)})}function e(b,c){b=a(b).height();c||a("#mainPageContent.page").css("top",b)}function d(){var b=window.location,c=null,d="undefined"!==typeof sessionStorage;d&&(c=sessionStorage.getItem("isPCICompliant"));if(null===c||""===c){var e;a.when(a.ajax({type:"HEAD",async:!1,url:b}).done(function(a,b,g){e=g.getResponseHeader("X-Browser-PCI-Compliance");
c=0===parseInt(e)?"no":"yes";d&&sessionStorage.setItem("isPCICompliant",c)}))}return"no"!==c}f.register({name:"global-messages",api:{load:function(a){a.each(h)}},selector:".global-messages"})})(VMJS,jQuery);
(function(f,a){function h(b,c){b=window.matchMedia("(max-width: 767px)").matches;var g=window.matchMedia("(min-width: 768px) and (max-width: 991px)").matches,f=a(c).find(".row[data-mobile-enabled]"),h=a(c).find(".row").hasClass("column-enhancement"),l=a(c).find(".row[data-two-column-enabled]"),m=0<a(c).find(".row[data-infinite-loop-enabled]").length,n=0<a(c).find(".row[data-automatic-scroll-enabled]").length,p=1E3*a(c).find(".row").data("automatic-scroll-speed");l=0<f.length&&0<l.length;m={loop:m,
autoplay:n,autoplayTimeout:p,responsive:{0:{items:l?2:1},768:{items:l?2:3}}};f&&!h&&(b||g)&&(a.extend(m,{dots:!n}),f.addClass("mobile-enabled owl-carousel owl-theme"),a(c).find(".mobile-enabled").owlCarousel(m));f&&h&&b&&(a.extend(m,{dots:!1,stagePadding:20,navContainer:a(c).find(".carousel-nav"),nav:!0,navText:["\x3ci class\x3d'fa fa-angle-left'\x3e\x3c/i\x3e","\x3ci class\x3d'fa fa-angle-right'\x3e\x3c/i\x3e"]}),f.addClass("mobile-enabled owl-carousel owl-theme"),a(c).find(".mobile-enabled").owlCarousel(m));
e(c);a(window).resize(d(function(){e(c)},50))}function e(b){a(b).each(function(){var b=a(this),d=a(this).data("desktop-border"),e=a(this).data("tablet-border"),f=a(this).data("mobile-border"),h=a(this).data("desktop-border-padding"),m=a(this).data("tablet-border-padding"),n=a(this).data("mobile-border-padding"),p=window.matchMedia("(min-width: 992px)").matches,t=window.matchMedia("(min-width: 768px) and (max-width: 991px)").matches,B=window.matchMedia("(max-width: 767px)").matches;p&&b.css({border:d,
padding:h});t&&b.css({border:e,padding:m});B&&b.css({border:f,padding:n})})}function d(a,c,d){var b;return function(){var g=this,e=arguments,f=d&&!b;clearTimeout(b);b=setTimeout(function(){b=null;d||a.apply(g,e)},c);f&&a.apply(g,e)}}f.register({name:"column-splitter-container",api:{load:function(a){a.each(h)}},selector:".column-splitter-container"})})(VMJS,VMJSjQuery);
(function(f,a){function h(b){b.each(function(b,c){e(a(c))})}function e(c){var d=c.find(".thank-you-status-background"),e=d.data("desktop-background"),f=d.data("mobile-background"),h=window.matchMedia("(max-width: 768px)"),m=function(a){var b=c.find(".plectrum-container"),g=c.find(".delimitation-container");a.matches?(b.insertBefore(g),d.css("background-image","url("+f+")")):(b.insertAfter(g),d.css("background-image","url("+e+")"))};a(window).resize(function(){m(h)});m(h);b.backgroundZoom(c)}var d=
{},b=common.cmsUtils;d.load=function(a){a.length&&h(a)};f.register({name:"thank-you-page-status-container",api:d,selector:".thank-you-page-status-container"})})(VMJS,VMJSjQuery);
(function(f,a){function h(e,d){var b=a(d);e=common.cmsUtils;var c;d=b.find(".text-uppercase");b=b.find(".left-side");var g=window.cmsStatusServiceability,f=a("body").data("commsStatus")||"standard";-1<window.location.href.indexOf("results")?c=jQuery.cookie("cms.vm.user"):-1<window.location.href.indexOf("thank-you")&&(c=jQuery.cookie("cms.vm.user.reg.data"));try{var h=JSON.parse(c)}catch(l){return}h&&h.currentAddress&&(c=h.currentAddress.postcode,c=e.getFormattedPostcode(c),f=f.substr(0,1).toUpperCase()+
f.substr(1),d.text(c),b.addClass(g["plectrumColor"+f]))}f.register({name:".cable-my-street-status",api:{load:function(a){a.each(h)}},selector:".cable-my-street-status"})})(VMJS,VMJSjQuery);
(function(f,a){var h={},e={component:"contact-us-navigation-mobile",container:"contact-us-nav-mobile",panelContent:"contact-us-nav-mobile--panel-content",activePanel:"contact-us-nav-mobile--selection-panel-active",topicsPanel:"contact-us-nav-mobile--first-panel",secondPanel:"contact-us-nav-mobile--second-panel",fourthPanel:"contact-us-nav-mobile--fourth-panel",item:"contact-us-nav-mobile--item",thirdPanel:"contact-us-nav-mobile--third-panel",panelTitle:"contact-us-nav-mobile--panel-title",panelTitleActive:"contact-us-nav-mobile--panel-title-active",
suggestionLinksWrapper:"contact-us-nav-mobile--suggestion-links-wrapper",askCommunity:"contact-us-nav-mobile--ask-community",askCommunityLink:"contact-us-nav-mobile--ask-community-link",askCommunityText:"contact-us-nav-mobile--ask-community-text",selected:"contact-us-nav-mobile--selected",introPanel:"contact-us-nav-mobile--introduction-panel",backButton:"contact-us-nav-mobile--back-button",contactOptions:"contact-us-nav-mobile--contact-options",contactOption:"contact-us-nav-mobile--contact-option",
contactChatOnline:"contact-us-nav-mobile--web-chat-option",contactOptionActive:"contact-us-nav-mobile--contact-option-active",contactRecommended:"contact-us-nav-mobile--recommended",contactIcon:"contact-us-nav-mobile--contact-icon",contactText:"contact-us-nav-mobile--contact-text",webChatOption:"contact-us-nav-mobile--web-chat-option",callUsOption:"contact-us-nav-mobile--call-us-option",emailUsOption:"contact-us-nav-mobile--email-us-option",writeToUsOption:"contact-us-nav-mobile--write-to-us-option",
infoPanelWrapper:"contact-us-nav-mobile--info-panel-wrapper",infoPanelLinesOpen:"contact-us-nav-mobile--info-panel-lines-open",infoPanelInfoContainer:"contact-us-nav-mobile--info-container",infoPanelOpen:"contact-us-nav-mobile--info-panel-open",infoTitle:"contact-us-nav-mobile--info-panel-title",infoPaneItemHeader:"contact-us-nav-mobile--info-panel-item-header",infoText:"contact-us-nav-mobile--info-panel-text",infoTextLowercase:"contact-us-nav-mobile--info-panel-text-lowercase",infoFootNote:"contact-us-nav-mobile--info-panel-footnote",
infoPanel:"contact-us-nav-mobile--info-panel",infoIcon:"contact-us-nav-mobile--info-panel-icon",callUsInfo:"contact-us-nav-mobile--call-us-info",callUsInfoButton:"contact-us-nav--call-us-info-button",callUsCallCharges:"contact-us-nav--call-us-call-charges",writeToInfo:"contact-us-nav-mobile--write-to-us-info",header:"contact-us-nav-mobile--header",slideIn:"slide-in",closeWrapperMobile:"close-wrapper-button",modifiableTile:"modifiable-tile",slideOut:"slide-out",categorySlider:"contact-us-nav-mobile--categories-slider",
suggestionsSlider:"contact-us-nav-mobile--suggestions-slider",chatOnline:"calendar",chatOnlineMessage:"availability-message-placeholder",chatOnlineStart:"chat-online--start-chat",label:"contact-us-nav-mobile--label"},d={animation:"animationend","-o-animation":"oAnimationEnd","-moz-animation":"anomationend","-webkit-animation":"webkitAnimationEnd"},b={transition:"transitionend",OTransition:"otransitionend",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"},c=function(){var a=document.createElement("div"),
b;for(b in d)if("undefined"!==typeof a.style[b])return a=d[b];return"animationend"},g=function(){var a=document.createElement("div"),c;for(c in b)if("undefined"!==typeof a.style[c])return a=b[c];return"transitionend"},k=function(){var b,d,f,h,k,t,B,u={},A={},y={},D={},w,r,x=!1,C=!1,E=function(b,c){if(B.hasOwnProperty(b))return b=Handlebars.compile(B[b]),c.OCSS=c.OCSS||{},a.extend(c.OCSS,e),b(c)},F=function(b){var c=a(b.currentTarget);b=c.attr("data-item")||c.parents("a").attr("data-item");c=c.find("."+
e.label).text()||c.parents("a").find("."+e.label).text();c={topicIndex:b,title:c};x=!0;t.removeClass("hide");w=d[b];u[b]||(a.extend(c,w),u[b]=E("secondPanel",c));f.html(u[b]);f.removeClass("hide");f.removeClass(e.slideOut).addClass(e.slideIn);r=e.secondPanel;a(".contact-us-nav-mobile--first-panel").addClass("overflow-hidden")},G=function(){x=!1;f.one(c()+" "+g(),function(){x||(f.addClass("hide").removeClass(e.slideIn).find("."+e.panelTitle).removeClass(e.panelTitleActive),t.addClass("hide"),f.off(c()+
" "+g()))});f.addClass(e.slideOut);r="";a(".contact-us-nav-mobile--first-panel").removeClass("overflow-hidden")},z=function(b){var c=a(b.currentTarget),d=c.attr("data-item"),g=c.attr("data-topic");b=d+"-"+g;var f=w&&w.articles&&w.articles[d]&&w.articles[d];c={title:c.find("."+e.label).text()||c.parents("a").find("."+e.label).text()};f=a.extend(f.content,c)||c;d=g+"_"+d;f.id=d;C=!0;A[b]||(A[b]=E("thirdPanel",f));b=A[b];f.communicationMethods&&f.communicationMethods.length&&f.communicationMethods.filter(function(a){return"call-us"===
a.type})&&(!D[d]&&f&&(D[d]=E("getInTouch",f)),D[d]&&(b+=D[d]));h.html(b);h.removeClass("hide").removeClass(e.slideOut).addClass(e.slideIn);r=e.thirdPanel;a("."+e.secondPanel).addClass("overflow-hidden")},H=function(){C=!1;h.one(c()+" "+g(),function(){C||(h.addClass("hide").removeClass(e.activePanel+" "+e.slideIn).find("."+e.panelTitle).removeClass(e.panelTitleActive),h.off(c()+" "+g()))});h.addClass(e.slideOut);r=e.secondPanel;a("."+e.secondPanel).removeClass("overflow-hidden")},N=function(b){b=a(b.currentTarget).parents("."+
e.contactOptions).attr("id");var c=w.articles[b.split("_")[1]].content.communicationMethods.filter(function(a){return"call-us"===a.type})[0]||{},d;y[b]||(d=y[b]=E("call-us",c));k.html(d);k.removeClass("hide").removeClass(e.slideOut).addClass(e.slideIn);r=e.fourthPanel;a("."+e.thirdPanel).addClass("overflow-hidden");a("."+e.header).addClass("user-header")},I=function(){C=!1;k.one(c()+" "+g(),function(){C||(k.addClass("hide").removeClass(e.activePanel+" "+e.slideIn).find("."+e.panelTitle).removeClass(e.panelTitleActive),
k.off(c()+" "+g()))});k.addClass(e.slideOut);r=e.thirdPanel;a("."+e.thirdPanel).removeClass("overflow-hidden");a("."+e.header).removeClass("user-header")},K=function(a){a.preventDefault();switch(r){case e.secondPanel:G();break;case e.thirdPanel:H();break;case e.fourthPanel:I()}},J=function(){a(document).on("click",".pink-cta",function(){a(".contact-us-nav--call-us-call-charges").toggleClass("hide");a(".call-us-long").toggleClass("full-width")})};return{init:function(){b=a("."+e.container);b.length&&
(B={secondPanel:a("#second-panel-template").html(),thirdPanel:a("#third-panel-template").html(),getInTouch:a("#getInTouch-template").html(),"call-us":a("#call-us-template").html()},d=aContactUsNavigationData||[],a("."+e.topicsPanel),f=a("."+e.secondPanel),h=a("."+e.thirdPanel),k=a("."+e.fourthPanel),t=a("."+e.backButton),b.find("."+e.topicsPanel).on("click","."+e.item,F),b.find("."+e.secondPanel).on("click","."+e.item,z),b.find("."+e.thirdPanel).on("click","."+e.callUsOption+" a",N),b.find("."+e.backButton).on("click",
K),J())}}}();h.load=function(){k.init()};f.register({name:"contact-us-navigation-mobile",api:h,selector:"."+e.component})})(VMJS,VMJSjQuery);
(function(f,a){function h(g,e){if(!a(e).hasClass("author")){d=common.cmsUtils;b=d.getErrorPage();g=a("body").data("40VCRank")||a("body").data("commsStatus")||"unmatched";var f=a.cookie("cms.vm.user");g=g.substr(0,1).toUpperCase()+g.substr(1);try{c=JSON.parse(f)}catch(n){d.redirectToErrorPage(b)}f=g;g={};if(c&&c.currentAddress){var h=c.currentAddress;g.postcode=d.getFormattedPostcode(h.postcode);g.communityName=h.communityName;g.source=a(e).find(".cms-results-template");if(h.manualEntry||!a("#cablemystreet-display-p2s").data("cmsDisplayP2s"))f=
"Standard";if(g.source.length){e=a(e);var k=window.cmsResultsModel;h=k["hero"+f+"Message"]||k.heroUnmatchedMessage;f=k["status"+f+"Message"]||k.statusUnmatchedMessage;e.find(".hero-message").html(h);e.find(".status-message").html(f);g=Handlebars.compile(g.source.html())(g);e.find(".cms-results-content").html(g).removeClass("hidden")}else d.redirectToErrorPage(b)}else d.redirectToErrorPage(b)}}var e={},d,b,c;e.load=function(a){a.each(h)};f.register({name:"cms-results-component",api:e,selector:".cms-results-component"})})(VMJS,
VMJSjQuery);
(function(f,a){function h(b,c){p=common.cmsUtils;B=p.getErrorPage();b=a(c).find(".cms-results-enhanced-form");var d=a.cookie("cms.vm.user");b.find(".selectpicker").selectpicker("refresh");var e=a(".short-registration-form"),f=e.find("#slide-panel");e.hasClass("short-registration-vertical")&&p.isDesktop()&&0===a(".media-body").has("#slide-panel").length&&(f.find(".privacy-box").remove(),f.insertAfter(".media-body").fadeIn(),f.toggleClass("visible"));if(a(c).hasClass("author"))g(b,!0);else{try{u=JSON.parse(d)}catch(C){p.redirectToErrorPage(B)}u||
p.redirectToErrorPage(B);a("body").data("manualaddress")&&(b.find(".extra-fields-noUprnFromApi").removeClass("hidden"),b.find(".extra-fields-noUprnFromApi input").attr("required",""),A=!0);m();g(b);l(b)}}function e(b,c){return a.ajax({type:"POST",url:b,cache:!1,dataType:"json",data:c,contentType:"application/json"})}function d(b){var c=b.find(".results-enhanced-submit"),d=a("\x3cspan /\x3e").addClass("dots"),g=setInterval(function(){3>t?(b.find(".dots").append("."),t++):(b.find(".dots").html(""),
t=0)},300);c.text(c.data("textSwap")).append(d);c.attr("disabled",!0);return g}function b(a,b){a=a.find(".results-enhanced-submit");a.text(a.data("textOriginal"));clearInterval(b)}function c(a){a.find(".already-registered").addClass("hidden");a.find(".backend-error").removeClass("hidden");a.find(".form-request-feedback").removeClass("hidden")}function g(b,c){var d=b.find("#opener"),g=b.find("#slide-panel"),e=a(".short-registration-form"),f=!1,h=b.find(".slide-over"),l=b.find(".bootstrap-select"),
m=b.parent(".status-message-wrapper");e.hasClass("short-registration-vertical")&&(f=!0);var q=function(a){a&&a.preventDefault();a=g.hasClass("visible");var b=p.isMobile(!0);if(f)g.find(".privacy-box").remove(),a?(d.text("Read More"),g.fadeOut()):(d.text("Read Less"),g.insertAfter(".media-body").fadeIn());else{if(a){b?g.fadeOut():(h.animate({"margin-left":"0px"},200,"linear"),g.animate({"margin-right":"-437px"}).hide());d.text("Read More");g.toggleClass("visible");d.toggleClass("closed-privacy open-privacy");
return}b?g.insertAfter(".media-body").fadeIn():(h.animate({"margin-left":"-437px"},200),g.show().animate({"margin-right":"0px"},300));d.text("Read Less")}g.toggleClass("visible");d.toggleClass("closed-privacy open-privacy")};b.find("#opener, .close-results-form").on("click",q);l.on("click",function(){p.isDesktop(!0)&&m.toggleClass("showOverflow")});b.find(".form-group input").on("click",function(){var b=a(".short-registration-form");g.hasClass("visible")&&!b.hasClass("short-registration-vertical")&&
q()});b.length&&k(b,c)}function k(g,f){g.validator({feedback:{success:"fa-check",error:"fa-exclamation-triangle"}}).on("submit",function(h){var k=a(this),l=q(k);if(f)h.preventDefault();else if(!h.isDefaultPrevented()){h.preventDefault();var p=d(g),m=g.find(".results-enhanced-submit");h=k.prop("action");var n=k.data("redirect");k=e(h,JSON.stringify(l));k.fail(function(){c(g);b(g,p)});k.done(function(a){if("Failure"===a.result||"Exception"===a.result)"Premise or Email is already Registered"===a.reason?
(g.find(".already-registered").removeClass("hidden"),g.find(".backend-error").addClass("hidden"),g.find(".form-request-feedback").removeClass("hidden")):c(g),b(g,p),m.attr("disabled",!1),"undefined"!==typeof grecaptcha&&grecaptcha.reset();else{var d={};d.agentId=u.agentId;d.currentAddress=u.currentAddress;d.registered=!0;d.addressId=a.addressId;a=new Date;a=new Date(a.getFullYear()+1,a.getMonth(),a.getDate());jQuery.cookie("cms.vm.user.reg.data",JSON.stringify(d),{path:"/",expires:a});clearInterval(p);
window.location.href=n}})}})}function q(b){var c={},d=b.serializeArray(),g=p.getParametersFromUrl().nex;c.recaptcha_response_field=b.find("#g-recaptcha-response").val();a.each(d,function(){"recaptcha_response_field"==this.name||"g-recaptcha-response"==this.name||"premiseId"===this.name&&!this.value||(c[this.name]=this.value)});c.nex=isNaN(parseInt(g))?null:parseInt(g);c.confirmEmail=c.email;return c}function l(a){var b=u.currentAddress,c=b&&b.displayAddress,d={};if(c){var g=c.split(",");d.buildingNumber=
g[0];d.street=g[1]}d.displayAddress=c;d.manualEntry=b.manualEntry||A;d.premiseId=b.premiseId;d.postcode=p.getFormattedPostcode(b.postcode);Object.keys(d).forEach(function(b){a.find('input[name\x3d"'+b+'"]').val(d[b])})}function m(){window.recaptchaCallback=function(b){var c=a("#recaptcha_response_field");c.prop("checked")!=!!b&&c.trigger("click")}}var n={},p,t=0,B,u,A=!1;n.load=function(a){a.each(h)};f.register({name:"cms-short-registration",api:n,selector:".cms-short-registration"})})(VMJS,VMJSjQuery);
(function(f,a){function h(a,b){e(b)}function e(c){var d=a(c),e=d.find(".results-background"),f=e.data("desktopBackground"),h=e.data("mobileBackground"),m=window.matchMedia("(max-width: 768px)"),n=function(a){var b=d.find(".plectrum-container"),c=d.find(".delimitation-container");a.matches?(b.insertBefore(c),e.css("background-image","url("+h+")")):(b.insertAfter(c),e.css("background-image","url("+f+")"))};a(window).resize(function(){n(m)});n(m);b.backgroundZoom(d)}var d={},b=common.cmsUtils;d.load=
function(a){a.each(h)};f.register({name:"cms-animated-results-content",api:d,selector:".cms-animated-results-content"})})(VMJS,VMJSjQuery);
(function(f,a){function h(b,c){var g=a(c);b=jQuery.cookie("cms.vm.user.reg.data")||jQuery.cookie("cms.vm.user");var e=g.find(".results-background");g=g.find(".results-circular-image");var f=e.data("desktopBackground"),h=e.data("mobileBackground"),m=g.data("circularImageBackground"),n=window.matchMedia("(max-width: 768px)"),p=window.cmsContributionAmountModel;try{d=JSON.parse(b)}catch(B){d={}}var t=function(b){b.matches?e.css("background-image","url("+h+")"):e.css("background-image","url("+f+")");
if(d&&d.currentAddress){b=d.currentAddress.communityName;b=(b=b.substr(0,1).toLowerCase()+b.substr(1))?p[b]:0;var g=a(c).find(".amount-in-pounds");g.text(b?"\u00a3"+b:"");g.removeClass("hidden")}};a(window).resize(function(){t(n)});g.css("background-image","url("+m+")");t(n)}var e={},d;e.load=function(a){a.each(h)};f.register({name:"cms-contribution-amount-content",api:e,selector:".cms-contribution-amount-content"})})(VMJS,VMJSjQuery);
(function(f,a){function h(d,f){b=common.cmsUtils;c=b.getParametersFromUrl();g=a(".cms-display-address").data("cmserrorpage")||"/postcode-checker/error.html";k=a(".cms-display-address").data("getaddressfromcmsurl")||"https://cablemystreet.virginmedia.com/cms/api/getAddressListFromCmS";d=e();d.fail(function(){b.redirectToErrorPage(g)});d.success(function(d){d.faultList&&b.redirectToErrorPage(g);var e=!1;a(d.addressList).each(function(d,g){if(g.uprn===c.uprn){e=!0;d=g.displayAddress.toLowerCase().split(",");
if(3==d.length)a(".cms-display-address .address").html(d[0]);else{g=d[0];for(var f=1;f<d.length-2;f++)g=g+", "+d[f];a(".cms-display-address .address").html(g)}a(".cms-display-address .city").html(d[d.length-2]+", ");d=b.getFormattedPostcode(d[d.length-1]).trim();a(".cms-display-address .postcode").html(d)}});e||b.redirectToErrorPage(g)})}function e(){return a.ajax({dataType:"json",url:k,data:{postcode:c.postcode},xhrFields:{withCredentials:!0},beforeSend:function(a){a.setRequestHeader("X-Requested-With",
"XMLHttpRequest")}})}var d={},b,c,g,k;d.load=function(a){a.each(h)};f.register({name:"cms-display-address",api:d,selector:".cms-display-address"})})(VMJS,VMJSjQuery);var Navigator=function(f,a){return{platform:{isMacintosh:function(){return-1<navigator.platform.indexOf("Mac")}}}}(VMJS,VMJSjQuery);
(function(f,a){function h(){a(".hero-cta").find("a").click(function(a){a.stopPropagation()});a(".video-banner").click(function(e){e=a(this).attr("data-url");var d=a(this).attr("data-new-window");"undefined"!==typeof e&&"undefined"!==typeof d&&window.open(e,"true"===d?"_blank":"_self").focus()})}f.register({name:"hero-banner",api:{init:function(){h()}},selector:".hero-banner"})})(VMJS,VMJSjQuery);
(function(f,a){function h(e,d){var b=a(d);b.find(".select-option").change(function(){b.find(".method-details").addClass("hidden");var a=b.find("#method-select").prop("selectedIndex")-1;-1!==a&&b.find("#method-number-"+a).removeClass("hidden")}).change()}f.register({name:"construction-method-dropdown",api:{load:function(a){a.each(h)}},selector:".construction-method-dropdown"})})(VMJS,VMJSjQuery);
(function(f,a){function h(a,b){a?r.$addrListWrapper.slideDown("250",function(){b&&b()}):r.$addrListWrapper.slideUp("250",function(){b&&b()})}function e(a){a?r.$nextBtn.removeAttr("disabled"):r.$nextBtn.attr("disabled",!0)}function d(){for(var a=arguments[0],b=1;b<arguments.length;b++){var c=arguments[b];a?c.removeClass("hidden"):c.addClass("hidden")}}function b(a){r.selectedAddr={};r.selectedAddr.siteId=a.data("site-id")||null;r.selectedAddr.premiseId=a.data("premise-id")||null;r.selectedAddr.uprn=
a.data("uprn")||null}function c(a){a.click(function(){h(!1,function(){r.$postcodeInput.val("");e(!1)})})}function g(b){b.click(function(){b.addClass("disabled-call").attr("disabled",!0);var c={},g="phone-number-accepted"===r.$phoneNumberField.next().attr("id");r.selectedAddr.premiseId&&(c.identifier="premiseId",c.premiseId=r.selectedAddr.premiseId);r.selectedAddr.uprn&&(c.identifier="uprn",c.uprn=r.selectedAddr.uprn);c.marketingConsent=a("#marketingConsent").is(":checked");g&&(c.phoneNumber=r.$phoneNumberField.val());
x.callAPI(E+F.endpointUrl,F.httpMethod,c,!0,F.xhr,F.isAkanaEndpoint).then(function(a){var b="serv-check-availability"===r.variant;localStorage.setItem("cableServiceability",JSON.stringify(a));x.servRedirectFunction(b,!1,E,H,N,I)}).fail(function(){h(!1);d(!1,r.$postcodeFoundWrapper,r.$postcodeApiErrWrapper,r.$nextBtn);b.removeClass("disabled-call");d(!0,r.$postcodeApiErrWrapper);h(!0)})})}function k(){return x.callAPI(E+z.endpointUrl,z.httpMethod,K,!0,z.xhr,z.isAkanaEndpoint).then(function(){sessionStorage.removeItem("journeyData");
sessionStorage.removeItem("journeyMap")})}function q(a,b){a={postcode:a};b&&(a.addressIdentificationType=b);return x.callAPI(E+G.endpointUrl,G.httpMethod,a,!1,G.xhr,G.isAkanaEndpoint)}function l(b,c,g){c=c.addresses[0].addressIdentificationType;var e=b.data("spotters-form"),f=b.data("cms-manual-form");if(1===c)b.on("click",function(){h(!1,function(){d(!0,r.$postcodeSecondSearchErrWrapper)});t(!0);m(g,2);a(this).off("click");b.attr("data-did-second-search",!0)});else 2===c&&("true"===b.attr("data-did-second-search")?
(b.attr("href",e),window.sessionStorage.setItem("postcode",g)):b.attr("href",f+"?postcode\x3d"+g))}function m(a,b){q(a,b).then(function(b){d(!1,r.$postcodeNotFoundWrapper,r.$postcodeApiErrWrapper);d(!0,r.$nextBtn,r.$postcodeFoundWrapper);var c=r.$postcodeFoundWrapper.find(".serv-addr-list-desktop ul"),g=r.$postcodeFoundWrapper.find(".serv-addr-list-mobile select"),e=c.siblings("script").html(),f=g.siblings("script").html();e=Handlebars.compile(e);f=Handlebars.compile(f);c.html(e(b));g.html(f(b));
t(!1);n(c,g);p();h(!0);l(r.$cantFindAddrCta,b,a)}).fail(function(c){var g=JSON.parse(c.responseText)[0];d(!1,r.$postcodeFoundWrapper,r.$postcodeApiErrWrapper,r.$postcodeSecondSearchErrWrapper,r.$nextBtn);if(404===c.status&&"NO_ADDRESSES"===g.faultCode){if(2===b){c=r.$cantFindAddrCta.data("spotters-form");window.sessionStorage.setItem("postcode",a);window.location.href=c;return}c=r.$postcodeNotFoundWrapper;g=c.data("manual-address-cta");var e=c.data("cms-manual-form");g=Handlebars.compile(c.find("script").html())({manualAddress:'\x3ca href\x3d"'+
e+"?postcode\x3d"+r.$postcodeInput.val().replace(/\s+/g,"")+'"\x3e'+g+"\x3c/a\x3e"});c.find(".serv-postcode-not-found-msg").html(g);d(!0,r.$postcodeNotFoundWrapper)}else d(!0,r.$postcodeApiErrWrapper);h(!0);t(!1)})}function n(c,d){c.find("li").on("click",function(){c.find("li.selected").removeClass("selected");d.find("select option").removeAttr("selected");a(this).addClass("selected");b(a(this));e(!0)});d.on("change",function(){var d=a(this).find("option:selected");c.find("li.selected").removeClass("selected");
d.data("skip")?e(!1):(b(d),e(!0))})}function p(){var b=r.$phoneNumberField.parent().find(".form-control-feedback"),c=/^[0-9]{10,12}$/;r.$phoneNumberField.on("change keyup",function(){""!==a(this).val()?c.test(r.$phoneNumberField.val())?(b.removeClass("fa-exclamation-triangle").addClass("fa-check"),b.attr("id","phone-number-accepted")):(b.removeClass("fa-check").addClass("fa-exclamation-triangle"),b.attr("id","phone-number-invalid")):(b.removeClass("fa-check fa-exclamation-triangle"),b.removeAttr("id"))})}
function t(a){a?(r.$postcodeSearchBtn.removeClass("ready").addClass("loading"),r.$postcodeSearchBtn.attr("disabled","disabled")):(r.$postcodeSearchBtn.removeClass("loading").addClass("ready"),r.$postcodeSearchBtn.removeAttr("disabled"))}function B(a){a.find("form").submit(function(b){b.preventDefault();u(a)})}function u(a){var b=r.$postcodeInput.val().replace(/\s+/g,"");a.removeClass("serv-menu-open");r.$cantFindAddrCta.attr("data-did-second-search",!1);r.$cantFindAddrCta.removeAttr("href");h(!1);
d(!1,r.$nextBtn,r.$postcodeNotFoundWrapper,r.$postcodeApiErrWrapper,r.$postcodeInvalidWrapper,r.$postcodeSecondSearchErrWrapper);b.match(/^[a-zA-Z]{1,2}[0-9R][0-9a-zA-Z]?[0-9](?!.?[CIKMOV])[a-zA-Z]{2}$/i)&&""!==b?(t(!0),k().then(function(){m(b)}).fail(function(){d(!1,r.$postcodeFoundWrapper,r.$postcodeApiErrWrapper,r.$postcodeSecondSearchErrWrapper,r.$nextBtn);d(!0,r.$postcodeApiErrWrapper);h(!0);t(!1)})):(d(!1,r.$postcodeFoundWrapper),d(!0,r.$postcodeInvalidWrapper),h(!0))}function A(b){function c(){var a=
e.find(".serv-m-item-open");a.removeClass("serv-m-item-open");a.find(".serv-m-item-inner").addClass("hidden")}function d(a){var c=a.address&&a.address.postcode,d=a.speed||"";a=(a=p.attr("data-bb-speed-items").match(/\{[^}]+\}|[^,.\s\[\]]+/g).find(function(a){return d===JSON.parse(a).bbSpeedValue}))?JSON.parse(a).bbSpeedText:p.data("bb-speed-not-matched");b.addClass("has-localstorage");p.removeClass("hidden");var g=Handlebars.compile(p.find("script").html());p.find("p").html(g({postcode:c,bbSpeedMsg:a}))}
function g(a){(a.statusDetails&&a.statusDetails.serviceDetails).forEach(function(a){a.saleable&&q.find(".serv-s-icn-"+a.serviceType).addClass("serv-s-icn-tick")})}var e=b.find(".serv-menu"),f=e.find(".serv-m-item-expandable"),h=e.find(".serv-m-item-close"),k=b.find(".serv-home-icn"),l=b.find(".serv-form-no-localstorage"),p=b.find(".serv-form-has-localstorage"),m=b.find(".serv-form-refresh-btn"),q=b.find(".serv-service-icons");h.on("click",function(a){a.stopPropagation();b.removeClass("serv-menu-open");
c()});k.on("click",function(){b.hasClass("serv-menu-open")&&(b.removeClass("serv-menu-open"),c())});f.on("click",function(){var d=a(this),g=d.find(".serv-m-item-inner");d.hasClass("serv-m-item-open")||(c(),b.addClass("serv-menu-open"),d.addClass("serv-m-item-open"),g.removeClass("hidden"))});p.on("click",function(){b.hasClass("serv-menu-open")&&(c(),b.removeClass("serv-menu-open"))});m.on("click",function(){localStorage.removeItem("cableServiceability");sessionStorage.removeItem("journeyServiceability");
a.removeCookie("SJSESSIONID",{path:"/"});p.addClass("hidden");l.removeClass("hidden");b.removeClass("has-localstorage")});a("#inqImgWidgetContainer").bind("DOMSubtreeModified propertychange",function(){var b=a("#inqImgWidgetContainer img").attr("src");"undefined"!=typeof b&&-1<b.indexOf("blank_available")&&a("#serv-widget-chat-now").removeClass("disabled")});null!==localStorage.getItem("cableServiceability")?(f=JSON.parse(localStorage.getItem("cableServiceability")),d(f),g(f)):l.removeClass("hidden");
e.removeClass("hidden")}function y(b){var c=b.offset().top;a(window).on("resize scroll",function(){var d=a(window).scrollTop();c<d?b.addClass("serv-sticky"):b.removeClass("serv-sticky")})}function D(b,d){var e=a(d),f=x.getParametersFromUrl();e.hasClass("serv-default")&&(r.variant="serv-default");e.hasClass("serv-check-availability")&&(r.variant="serv-check-availability");e.hasClass("serv-searchbox-only")&&(r.variant="serv-searchbox-only");r.isSticky=e.find(".serv-wrapper").data("is-sticky");r.$postcodeSearchBtn=
e.find(".serv-btn-search");r.$nextBtn=e.find(".serv-btn-next");r.$cancelBtn=e.find(".serv-btn-cancel");r.$postcodeInput=e.find("input[name\x3dpostcode]");r.$phoneNumberField=e.find(".serv-phone-num-field input");r.$addrListWrapper=e.find(".serv-results-wrapper");r.$cantFindAddrCta=e.find(".serv-cant-find-addr-cta");r.$postcodeFoundWrapper=e.find(".serv-postcode-found");r.$postcodeNotFoundWrapper=e.find(".serv-postcode-err.serv-postcode-not-found");r.$postcodeInvalidWrapper=e.find(".serv-postcode-err.serv-invalid-postcode");
r.$postcodeApiErrWrapper=e.find(".serv-postcode-err.serv-postcode-api-err");r.$postcodeSecondSearchErrWrapper=e.find(".serv-postcode-err.serv-addr-second-search-err");x.getJourneyConfig("apis-section").then(function(a){C=a;F=x.getApiByID(C,"serviceability_post");G=x.getApiByID(C,"addresses_get");z=x.getApiByID(C,"store_put");H=x.getApiByID(C,"prospect_post");N=x.getApiByID(C,"basket_get");I=x.getApiByID(C,"basket_post");x.setStoreDomain(f).always(function(a){"string"===typeof a&&(E=a);B(e);c(r.$cancelBtn);
g(r.$nextBtn);r.isSticky&&y(e);"serv-default"===r.variant&&A(e);"serv-check-availability"===r.variant&&f.postcode&&(r.$postcodeInput.val(f.postcode),u(e))})});if("onpagehide"in window)a(window).on("pagehide",function(){a("body").css("opacity","0")});else a(window).on("beforeunload",function(){a("body").css("opacity","0")});a(window).bind("pageshow",function(a){a.originalEvent.persisted&&window.location.reload()})}var w={},r={},x=common.Utils,C,E,F,G,z,H,N,I,K=x.getStoreCode();w.load=function(a){a.each(D)};
f.register({name:"serviceability",api:w,selector:".serviceability"})})(VMJS,VMJSjQuery);
(function(f,a){function h(b){for(var c in b)if(b.hasOwnProperty(c)){var d=c,g=b[c];!0===g||"yes"===g?a("#serv-widget-"+d).addClass("serv-widget-tick"):"maybe"===g&&a("#serv-widget-"+d).addClass("serv-widget-question")}v.cookieState=!0}function e(a){"error"===a||"reset"===a?"error"===a&&(v.$servOutput.html("error"),v.$servOutputSearchbox.html("error"),v.$servOutputSearchboxBtn.html("error")):sa.hasOwnProperty(a)&&sa[a].tiers&&h(sa[a].tiers)}function d(){a("#serv-widget").addClass("postcode-error");
a(".serviceability-default #serv-output").show().html(qa);v.$servOutputSearchbox.show().html(ma);v.$servOutputSearchboxBtn.show().html(ma);v.$moversServOutputSearchboxBtn.show();v.$postcodeField.blur();767<g().width&&(v.formWidth=416);a(".serviceability-default span#serv-widget-form-title").hide();l(!0);v.$postcodeField.click(function(){b()})}function b(){a("#serv-widget").removeClass("postcode-error");979<a(window).width()&&a(".serviceability-default span#serv-widget-form-title").show();v.$servOutput.hide();
v.$servOutputSearchbox.hide();v.$servOutputSearchboxBtn.hide();v.$moversServOutputSearchboxBtn.hide();v.$servWidget.hasClass("cookie-present")?v.formWidth=590:980>g().width?v.formWidth=244:v.formWidth=416;l(!0)}function c(){v.$postcodeField.click(function(){a(this).val("")})}function g(){var a=window,b="inner";"innerWidth"in window||(b="client",a=document.documentElement||document.body);return{width:a[b+"Width"],height:a[b+"Height"]}}function k(){a("#serv-widget-get-in-touch .serv-widget-icon-open").click(function(){q("open-newcustomers",
"#serv-widget-get-in-touch","tablet-newcustomers")});a("#serv-widget-existing-customer .serv-widget-icon-open").click(function(){q("open-customers","#serv-widget-existing-customer","tablet-customers")});v.$widgetFormOpen.click(function(){l()});v.$servWidgetIconUnitsClose.click(function(){l()});v.$widgetFormRefresh.click(function(){a.removeCookie("cable_serviceability",{path:"/",domain:".virginmedia.com"});a("#serv-widget").removeClass("cookie-present");m();return!1});a(".cookie-present #serv-widget-form-cookie").click(function(){l()});
a("#get-in-touch-sublink4").click(function(){CP_launchCallbackPopup();return!1})}function q(c,d,e){v.$servWidget.removeClass("open-newcustomers").removeClass("open-customers").removeClass("open").removeClass("tablet-newcustomers").removeClass("tablet-customers");b();979<g().width?(v.$servOutput.hide(),v.$servOutputSearchbox.hide(),v.$servOutputSearchboxBtn.hide(),v.$servWidgetIconUnitsHolder.width(v.$servWidget.width()-88),v.$servWidgetIconUnits.attr("style",""),v.$servWidget.addClass(c),a(d).width(v.$servWidget.width()-
88*v.numberOfButtons-v.numberOfButtons),v.$widgetFormRefresh.attr("style","")):v.$servWidget.addClass("open").addClass(e)}function l(a){v.$servWidget.removeClass("open-newcustomers").removeClass("open-customers").removeClass("open").removeClass("tablet-newcustomers").removeClass("tablet-customers");if(768>g().width)v.$servWidgetIconUnitsHolder.attr("style","");else if(979<g().width||!0===a)v.$servWidgetIconUnitsHolder.attr("style",""),v.$servWidgetIconUnits.attr("style",""),a=v.$servWidget.width()-
v.formWidth,v.$servWidgetIconUnitsHolder.width(a)}function m(){v.$widgetHiddenForm.attr("style","");v.$postcodeField.attr("style","");v.$servWidgetIconUnits.attr("style","");if(768>window.innerWidth){v.mode="mobile";var a=v.$servWidget.width()-60,c=a-34-18-20;v.$widgetHiddenFormDefault.width(a);v.$postcodeFieldDefault.width(c)}else 980>window.innerWidth&&(v.mode="tablet",v.$servWidget.hasClass("cookie-present")?v.formWidth=590:v.formWidth=244);b();l()}function n(){var b=a("#inqImgWidgetContainer img").attr("src");
"undefined"!=typeof b&&-1<b.indexOf("blank_available")&&(a("#serv-widget-chat-now").attr("class","serv-widget-icon-unit"),v.$servWidgetIconUnitsHolder.attr("class","icons4"))}function p(){v.$postcodeField.on("focus",function(){l(!0);a("#serv-output").is(":visible")&&(a("#serv-output").hide(),244<a("#serv-widget-form-nocookie").width()&&a(".serviceability-default #serv-widget-form-title").hide(),a("#serv-widget").removeClass("postcode-error"),a("#postcode-field").val(""));979<window.innerWidth&&a(".serviceability-default #serv-widget-form-title").show();
y(M[0]);v.$servOutputSearchbox.hide();v.$servOutputSearchboxBtn.hide()})}function t(){v.$moversForm.on("submit",function(b){b.preventDefault();b=v.$moversForm.find("#next");b.attr("disabled",!0).addClass("disable-element");b.val(b.data("text-swap"));b=v.$moversForm.attr("action");var c=a("#premiseId").val(),d=a("#siteId").val(),g=a("#addrSrc").val(),e=a("#uprn").val(),f=a("#premiseId").val(),h=v.$postcodeField.val().replace(/\s+/g,""),k,l;a.ajax({type:"POST",url:b,cache:!1,crossDomain:!0,data:{siteId:d,
addressIdentifier:c},xhrFields:{withCredentials:!0},beforeSend:function(a){a.setRequestHeader("X-Requested-With","XMLHttpRequest")},success:function(b){b=a.cookie("cable_serviceability");b=O.getCookieObject(b);var c=a("#partialServiceableRedirect").val();"serviceable"===b.status||"active"===b.status?window.location.href=a("#fullyServiceableRedirect").val():(d&&f&&(k=d+f.padStart(7,"0")),l={postcode:h,uid:k,uprn:e,addrSrc:g},c=B(c,!0,l),window.location.href=c)}})})}function B(b,c,d){a.each(d,function(a,
d){d&&(b+=c?"?"+a+"\x3d"+d:"\x26"+a+"\x3d"+d,c=!1)});return b}function u(){v.$widgetForm.submit(function(b){b.preventDefault();L=!0;b=a(".btn-serve");var c=a(".btn-serve \x3e span");R=setInterval(r,300);b.val(b.data("text-swap"));c.html(b.data("text-swap"));w(!0);v.$postcodeField.val().replace(/\s+/g,"").match(X)&&""!==v.$postcodeField.val()?(l(!0),a("input.btn-serve").attr("disabled","disabled"),ea?y(M[1]):aa||(A(),D())):(d(),w(!1),D())})}function A(){v.$addressResults.slideUp();979>window.innerWidth&&
a("#serv-widget").addClass("postcode-error")}function y(b,c){switch(b){case M[0]:if(aa)break;a("input.btn-serve").removeAttr("disabled");aa=!0;ea=!1;a.ajax({type:"GET",url:b,cache:!1,xhrFields:{withCredentials:!0},timeout:2E4,beforeSend:function(a){a.setRequestHeader("X-Requested-With","XMLHttpRequest");a.setRequestHeader("Accept","application/json")},success:function(){ea=!0;aa=!1;L?y(M[1]):a("input.btn-serve").removeAttr("disabled")},error:function(){aa=ea=!1;A();D()},complete:function(){ea||A()}});
break;case M[1]:a("input.btn-serve").attr("disabled","disabled"),c&&(b+="?addrSrc\x3d2"),a.ajax({type:"POST",url:b,cache:!1,dataType:"json",data:{postcode:v.$postcodeField.val().replace(/\s+/g,"")},xhrFields:{withCredentials:!0},beforeSend:function(a){a.setRequestHeader("X-Requested-With","XMLHttpRequest")},success:function(b){P=!0;W=b;for(var d in W)if("faultList"===d){A();break}a("#addrSrc").val(W.addrSrc);W.addrSrc=W.addrSrc||"2";"1"==W.addrSrc&&(E(fa,ka,ra),C(pa,na),pa.find("a").on("click",function(){y(M[1],
!0)}),na.find("a").on("click",function(){y(M[1],!0)}));if("2"==W.addrSrc)if(c)if((b=W.addressList)&&b.length)C(fa,ka,ra),E(pa,na),fa.find("a").on("click",function(){window.location=fa.find("a").data("storeManualEntry")}),ka.find("a").on("click",function(){window.location=ka.find("a").data("storeManualEntry")});else{window.location=fa.find("a").data("storeManualEntry");window.location=ka.find("a").data("storeManualEntry");return}else C(fa,ka),E(pa,na,ra),fa.find("a").on("click",function(){window.location=
fa.find("a").data("cmsManualEntry")+"?postcode\x3d"+v.$postcodeField.val().replace(/\s+/g,"")}),ka.find("a").on("click",function(){window.location=ka.find("a").data("cmsManualEntry")+"?postcode\x3d"+v.$postcodeField.val().replace(/\s+/g,"")});x(W);F()},error:function(){A()},complete:function(){P&&(D(),a(".button-container").removeClass("disabled"))}})}}function D(){var b=a(".btn-serve"),c=a(".btn-serve \x3e span");b.val(b.data("text-original"));c.html(b.data("text-original"));clearInterval(R);w(!1);
L=P=!1;a("input.btn-serve").removeAttr("disabled")}function w(b){b?(a(".btn-serve").removeClass("ready").addClass("loading"),v.$moversLoadingOutputSearchboxBtn.show()):(a(".btn-serve").removeClass("loading").addClass("ready"),v.$moversLoadingOutputSearchboxBtn.hide())}function r(){var b=a(".btn-serve"),c=a(".btn-serve \x3e span");3>U?(b.val(b.val()+"."),c.html(b.val()+"."),U++):(b.val("Please wait"),c.html("Please wait"),U=0)}function x(b){var c={};c.source=oa;c.manualAddress='\x3ca href\x3d"'+fa.find("a").data("cmsManualEntry")+
"?postcode\x3d"+v.$postcodeField.val().replace(/\s+/g,"")+'"\x3eenter your address manually\x3c/a\x3e';c=Handlebars.compile(oa.html())(c);oa.html(c);c=Handlebars.compile(ia);da.html(c(b));c=Handlebars.compile(ja);ca.html(c(b));b=null!==W.addressList&&void 0!==W.addressList?W.addressList.length:0;C(ha,la);E(oa);0===b?(A(),v.$addressResults.slideDown(),C(oa),E(ha,la,fa,ka,pa,na,ra),a(".cancel-address").click(function(){N();v.$widgetHiddenFormSearchbox.removeClass("address-results-open");v.$widgetHiddenFormSearchboxBtn.removeClass("address-results-open");
v.$moversWidgetHiddenFormSearchboxBtn.removeClass("address-results-open")})):(v.$addressResults.slideDown(),v.$servOutputSearchbox.hide(),v.$servOutputSearchboxBtn.hide(),v.$widgetHiddenFormSearchbox.addClass("address-results-open"),v.$widgetHiddenFormSearchboxBtn.addClass("address-results-open"),v.$moversWidgetHiddenFormSearchboxBtn.addClass("address-results-open"),a(".cancel-address").click(function(){N();v.$widgetHiddenFormSearchbox.removeClass("address-results-open");v.$widgetHiddenFormSearchboxBtn.removeClass("address-results-open");
v.$moversWidgetHiddenFormSearchboxBtn.removeClass("address-results-open")}),G(),a("html, body").animate({scrollTop:a("#serviceability-auto-scroll-focus").offset().top},600),I(),K())}function C(){for(var a=0;a<arguments.length;a++)arguments[a].removeClass("hidden")}function E(){for(var a=0;a<arguments.length;a++)arguments[a].addClass("hidden")}function F(){a("ul.address-list li").on("click",function(){var b=a(this);a(b).attr("data-skip")||(a("ul.address-list li").removeClass("selected"),z(),a(b).addClass("selected"),
b=a(b).data(),H(b,!1))});a("select#addressIdentifier").on("change",function(){var b=a("#addressIdentifier option:selected");b.data("skip")?G():(b=b.data(),H(b,!0),z())})}function G(){a("#next").addClass("disable-element").attr("disabled","disabled")}function z(){a("#next").removeClass("disable-element").removeAttr("disabled")}function H(b,c){var d=b.uprn,g=b.siteId;b=b.premiseId;var e=a("#uprn"),f=a("#siteId"),h=a("#premiseId");c||a("select#addressIdentifier option").removeAttr("selected");b&&g?(f.val(g),
h.val(b)):(f.remove(),h.remove());d?e.val(d):(e.remove(),a("#postcode").remove())}function N(){v.$addressResults.height();v.$addressResults.slideUp(function(){v.$postcodeField.val("");a("#next").addClass("disable-element").attr("disabled","disabled")});v.$widgetHiddenFormSearchbox.removeClass("address-results-open");v.$widgetHiddenFormSearchboxBtn.removeClass("address-results-open");v.$moversWidgetHiddenFormSearchboxBtn.removeClass("address-results-open");v.$stickinessPlaceHolder.is(":visible")&&
v.$stickinessPlaceHolder.slideUp()}function I(){var b=a(".phone-number-field"),c=b.find("input"),d=b.find(".form-control-feedback"),g=/^[0-9]{10,12}$/;c.on("change keyup",function(){""!==a(this).val()?g.test(c.val())?(d.removeClass("fa-exclamation-triangle").addClass("fa-check"),d.attr("id","phone-number-accepted")):(d.removeClass("fa-check").addClass("fa-exclamation-triangle"),d.attr("id","phone-number-invalid")):(d.removeClass("fa-check fa-exclamation-triangle"),d.removeAttr("id"))})}function K(){a("#optInCb").on("change",
function(){var b=a(this).prop("checked")?"true":"false";a("#marketingConsent").val(b)})}function J(){if(!a.cookie("cable_serviceability")&&!0===V){var b=v.$contentWrapper;a(window).scroll(function(){var c=window.pageYOffset;0>ta&&(ta=b.offset().top);c=ta-c;767<a(window).width()&&(0>c&&!b.hasClass("fix-top")?(c=a(".serviceability-icoms-dna").width(),b.addClass("fix-top").css({width:c}),v.$stickinessPlaceHolder&&(c=v.$contentWrapper?v.$contentWrapper.height():0,v.$stickinessPlaceHolder.height(c)),v.$stickinessPlaceHolder.show()):
0<=c&&b.hasClass("fix-top")&&(b.removeClass("fix-top"),v.$stickinessPlaceHolder.hide()))})}}function Q(){Z=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);Y=a("#widget-form").data("apiGetToken");ba=a("#widget-form").data("apiCheckAddress");V=a("#widget-form").data("isSticky");M=[Y,ba];qa='\x3cspan class\x3d"serv-output-icon"\x3e\x3c/span\x3e Invalid postcode.';ma='\x3cspan class\x3d"serviceability-searchbox-error fa fa-exclamation-triangle"\x3e\x3c/span\x3eInvalid postcode.';
pa=a(".click-here-col");na=a(".mobile-click-here");fa=a(".manual-address-col");ka=a(".mobile-manual-addr");ra=a(".form-request-feedback");ha=a(".results-col");la=a(".confirmAddressButton");oa=a(".no-postcode-feedback");a("input.btn-serve").attr("disabled","disabled");v.$servWidget=a("#serv-widget");v.$servOutput=a("#serv-output");v.$servOutputSearchbox=a(".serviceability-searchbox #serv-output-searchbox");v.$servOutputSearchboxBtn=a(".serviceability-searchbox-btn #serv-output-searchbox");v.$moversServOutputSearchboxBtn=
a(".movers-serviceability-searchbox-btn #movers-serv-output-searchbox");v.$moversLoadingOutputSearchboxBtn=a(".movers-serviceability-searchbox-btn #movers-loading-output-searchbox");v.$fullyServiceableRedirect=a("#fullyServiceableRedirect");v.$partialServiceableRedirect=a("#partialServiceableRedirect");v.$servCookieOutput=a("#serv-cookie-output");v.$servWidgetIconExpandables=a(".serv-widget-icon-expandable");v.$servWidgetIconUnitsOpen=a(".serv-widget-icon-open");v.$servWidgetIconUnitsClose=a(".serv-widget-icon-close");
v.$servWidgetIconUnitsInner=a(".serv-widget-icon-inner");v.$servWidgetIconUnits=a(".serv-widget-icon-unit");v.$servWidgetIconUnitsHolder=a("#serv-widget-icon-units");v.$widgetForm=a("#widget-form");v.$moversForm=a(".movers-serviceability-searchbox-btn #serviceabilityForm");v.$widgetFormOpen=a("#serv-widget-form-open");v.$widgetFormRefresh=a("#serv-widget-form-refresh");v.$widgetHiddenForm=a("#serv-widget-hidden-form");v.$widgetHiddenFormDefault=a(".serviceability-default #serv-widget-hidden-form");
v.$postcodeField=a("#postcode-field");v.$postcodeFieldDefault=a(".serviceability-default #postcode-field");v.$addressResults=a(".address-results");v.$contentWrapper=a(".serviceability-content");v.$stickinessPlaceHolder=a("#serviceability-stickiness-placeholder");v.$widgetHiddenFormSearchbox=a(".serviceability-searchbox #serv-widget-hidden-form");v.$widgetHiddenFormSearchboxBtn=a(".serviceability-searchbox-btn #serv-widget-hidden-form");v.$moversWidgetHiddenFormSearchboxBtn=a(".movers-serviceability-searchbox-btn #serv-widget-hidden-form");
v.$chatNow=a("#serv-widget-chat-now");v.numberOfButtons=v.$servWidgetIconUnits.length;v.animationSpeed=150;v.mode="desktop";v.cookieState=!1;a("input.btn-serve").attr("disabled","disabled");p();m();ca=a(".serviceability-icoms-dna #addressIdentifier");ja=a("#addressOptionTemplate").html();da=a(".serviceability-icoms-dna .address-container-clip .address-list");ia=a("#addressItemsTemplate").html();var b=a("#get-in-touch-sublink3");if(b.length){var d=b.attr("data-href").split("_")[2];b.attr("href","tel:"+
d)}S();c();b=a.cookie("cable_serviceability");b=O.getCookieObject(b);if(a.cookie("cable_serviceability")){d=a.cookie("cable_serviceability").indexOf(":")+1;var g=a.cookie("cable_serviceability").indexOf("|");d=a.cookie("cable_serviceability").substr(d,g-d);v.$postcodeField.val(d);v.$servCookieOutput.html(v.$servCookieOutput.html()+"\x3cstrong\x3e"+d+' \x3cspan class\x3d"output-dash"\x3e-\x3c/span\x3e \x3c/strong\x3e ');b.bbspeed&&"null"!=b.bbspeed?(d=v.$servCookieOutput.data("bbspeed-before"),g=v.$servCookieOutput.data("bbspeed-after"),
v.$servCookieOutput.html(v.$servCookieOutput.html()+'\x3cspan class\x3d"output-message"\x3e'+d+b.bbspeed+g+"\x3c/span\x3e")):v.$servCookieOutput.html(v.$servCookieOutput.html()+'\x3cspan class\x3d"output-message"\x3eServices available\x3c/span\x3e');a("#serv-widget").addClass("cookie-present")}"National"===b.status||"unserviceable"===b.status?e("national"):"part_serviceable"===b.status?e("maybe"):"serviceable"===b.status?e("serviceable"):h({tv:b.dtv&&"sale"===b.dtv,ph:b.phone&&"sale"===b.phone,bb:b.bb&&
"sale"===b.bb});m();u();t();a("#inqImgWidgetContainer").bind("DOMSubtreeModified propertychange",n);k();b=a(window).width();Z&&768>b&&v.$chatNow.addClass("hidden");J()}function S(){a(window).resize(function(){if(!a("html").hasClass("ie8")){var b=v.$contentWrapper;if(767<a(window).width()&&b.hasClass("fix-top")){var c=a(".serviceability-icoms-dna").width();b.css({width:c})}m()}979<a(window).width()?a(".serviceability-default #serv-widget-form-title").show():a(".serviceability-default #serv-widget-form-title").hide()})}
var T={},U=0,L=!1,P=!1,R,aa=!1,O=common.cmsUtils,X=/^[a-zA-Z]{1,2}[0-9R][0-9a-zA-Z]?[0-9](?!.?[CIKMOV])[a-zA-Z]{2}$/i,Z,Y,ba,V,v={},M,W={},da,ca,ia,ja,ea=!1,qa,ma,ta=-1,pa,na,fa,ka,ra,ha,la,oa,sa={serviceable:{tiers:{tv:"yes",ph:"yes",bb:"yes"}},fibre:{tiers:{tv:"no",ph:"yes",bb:"yes"}},"fibre-referral":{tiers:{tv:"no",ph:"no",bb:"no"}},national:{tiers:{tv:"no",ph:"no",bb:"no"}},"national-referral":{tiers:{tv:"no",ph:"yes",bb:"yes"}},"national-referral-oct":{tiers:{tv:"no",ph:"no",bb:"no"}},maybe:{tiers:{tv:"maybe",
ph:"maybe",bb:"maybe"}}};T.init=function(a){a.each(Q)};f.register({name:"serviceability-icoms-dna",api:T,selector:".serviceability-icoms-dna"})})(VMJS,VMJSjQuery);
(function(f,a){function h(e,d){e=[".registration-circle",".planning-circle",".coming-soon-circle",".serviceable-circle"];for(var b=["#342234","#442a56","#ed0000","#ed0000"],c=0;c<e.length;c++){var g=a(d).find(e[c]),f="url("+g.data("image")+") no-repeat 50% "+b[c];g.css("background",f)}e=window.matchMedia("(max-width: 768px)").matches;b=a(d).find(".area-item");c={items:1,startPosition:0};b&&e&&(b.addClass("mobile-enabled owl-carousel owl-theme"),a(d).find(".mobile-enabled").owlCarousel(c))}f.register({name:"progress-bar-indicator",
api:{load:function(a){a.each(h)}},selector:".progress-bar-indicator"})})(VMJS,VMJSjQuery);
(function(f,a){function h(d,b){d=a(b).find(".lightning-splitter-content");if(!d.hasClass("author")){b=common.cmsUtils;var c=a.cookie("cable_serviceability");if((b=b.getCookieObject(c))&&"true"===b.LPremise){c=!0;if(d.hasClass("contentBasedUserCookieLRDate")){var g=b.LRDate.split("/");g=new Date(g[2],g[1]-1,g[0]);var f=new Date;g.setMonth(g.getMonth()+d.data("monthsavailable"));f.setHours(0,0,0,0);f<g&&(c=!1)}else d.hasClass("contentBasedOnDates")&&(g=moment(d.data("startdate"),"DD-MM-YYYY"),f=moment(d.data("enddate"),
"DD-MM-YYYY"),moment(b.LRDate,"DD-MM-YYYY").isBetween(g,f)||(c=!1));if(d.hasClass("lightning-users")&&c)switch(b.status){case "serviceable":e(d,"fully-serviceable");break;case "part_serviceable":e(d,"part-serviceable");break;case "active":e(d,"active");break;default:d.remove()}}else e(d,"non-lightning-users")}}function e(a,b){a.hasClass(b)?a.removeClass("hidden"):a.remove()}f.register({name:"lightning-on-off-splitter",api:{load:function(a){a.each(h)}},selector:".lightning-on-off-splitter"})})(VMJS,
VMJSjQuery);
(function(f,a,h){var e=Object.freeze({cache:!1,dataType:"json",contentType:"application/x-www-form-urlencoded; charset\x3dUTF-8",method:"GET",headers:[{key:"X-Requested-With",value:"XMLHttpRequest"},{key:"Accept",value:"application/json"}],withCredentials:!0}),d=function(c){a(".basket-wrapper").off("click").on("click",".clear-basket-cta",function(){b("#clear-basket-overlay-template",{productName:c});a("#serv-widget").addClass("hide");a(".basket").addClass("hide-line")});a(".basket-wrapper").on("click",".confirm-clear-basket-cta",
function(){common.AsyncService.ajaxPromise(a.extend(!0,{},e,{url:storeURL+basketClearEndpoint})).then(function(){a.removeCookie("saveBasketCookie",{path:"/"});a.removeCookie("savedBasketDetails",{path:"/"});a.removeCookie("vmBasketItems",{path:"/"});a(".empty-basket-cta, #serv-widget").removeClass("hide");a(".basket").removeClass("hide-line");a(".full-basket-cta").addClass("hide");b("#empty-basket-template",{status:g()})})});a(".basket-wrapper").on("click",".deny-clear-basket-cta",function(){a("#serv-widget").removeClass("hide");
a(".basket").removeClass("hide-line");k()})},b=function(b,c){b=h.compile(a(b).html())(c);a(".basket-wrapper").html(b)},c=function(b,c){if(b=a.cookie(b)){b=b.split("|");var d={},g;for(g in b)if(b.hasOwnProperty(g)){var e=b[g].split(c);d[e[0].replace(/"/g,"")]=e[1].replace(/"/g,"")}return d}},g=function(){var a=c("cable_serviceability",":"),b=a?a.status:void 0;b&&"part_serviceable"===b&&"sale"!==a.bb&&(b="unserviceable");return b},k=function(){common.AsyncService.ajaxPromise(a.extend(!0,{},e,{url:storeURL+
basketDetailsEndpoint})).then(function(e){if(e.basket){var f={bundleName:e.totals.bundle.name,monthlyCost:e.totals.bundle.monthly.discounts[0].priceAfterDiscount,contractDuration:e.totals.bundle.monthly.discounts[0].term,oneOffCost:e.totals.installationActivationCost.priceAfterDiscount};a(".empty-basket-cta").addClass("hide");a(".full-basket-cta").removeClass("hide");b("#full-basket-template",f)}else f=e.serviceability.status||g(),a(".empty-basket-cta").removeClass("hide"),a(".full-basket-cta").addClass("hide"),
b("#empty-basket-template",{status:f});e=e.totals?e.totals.bundle.name:(e=c("savedBasketDetails","\x3d"))?e.bundleName:void 0;d(e)}).fail(function(b){a(".component-error").html("Failed to retrieve basket from api.");a(".component-error").removeClass("hide")})},q=function(){var b=a(".basket-component").data("current-page");return b?aem.QueryBuilder.getSelectiveData({path:b+"/jcr:content",properties:["sling:resourceType","componentVariantId"]}).then(function(a){return 0!==a.filter(function(a){return"onecms/core/components/serviceability"===
a["sling:resourceType"]&&"serviceability-prosecco"===a.componentVariantId}).length}):!1},l=function(){if(a.cookie("agentid"))a(".component-error").html("Found agent id cookie, can't display component."),a(".component-error").removeClass("hide");else{var c=a.cookie("vmBasketItems"),d=a.cookie("saveBasketCookie");c&&1<c||d?q().then(function(b){b?(a(".services-wrapper").removeClass("hide-on-mobile"),a(".services-wrapper").removeClass("small-width-mobile"),k()):(a(".component-error").html("Serviceability component not found on the page, can't display component."),
a(".component-error").removeClass("hide"))}):(a(".empty-basket-cta").removeClass("hide"),a(".full-basket-cta").addClass("hide"),b("#empty-basket-template",{status:g()}))}};f.register({name:"basket-component",api:{init:function(b){b.length&&a.cookie("cable_serviceability")?b.each(l):a(".basket-component-collapsed").addClass("hide")}},selector:".basket-component"})})(VMJS,VMJSjQuery,Handlebars);
(function(f,a){function h(){y=a(".service-wrap-header-container");D=y.attr("data-api-serviceability");w=y.attr("data-api-gettoken");r=common.cmsUtils;x=a(".cms-service-wrap-form");C=x.find("#datepicker");E=x.find("#movingDate");F=x.find(".datepicker-wrap");G=x.attr("data-cmstestemail");z=a.cookie("cable_serviceability");H=r.getCookieObject(z);common.AsyncService.ajaxPromise({method:"GET",dataType:"text",contentType:"application/x-www-form-urlencoded; charset\x3dUTF-8",cache:!1,xhrFields:{withCredentials:!0},
url:w,headers:[{key:"X-Requested-With",value:"XMLHttpRequest"},{key:"Accept",value:"application/json"}]}).then(function(){common.AsyncService.ajaxPromise({dataType:"json",contentType:"application/x-www-form-urlencoded; charset\x3dUTF-8",method:"POST",cache:!1,xhrFields:{withCredentials:!0},url:D,data:{postcode:H.postcode,uprn:H.uprn,addrSrc:H.addrSrc,premiseId:H.saId},headers:[{key:"X-Requested-With",value:"XMLHttpRequest"},{key:"Accept",value:"application/json"}]}).then(function(a){a=a.serviceability||
{};0<x.length&&d(a);0<y.length&&e(a)})})}function e(d){N=y.find(".header-background");y.find(".service-wrap-plectrum");I=N.data("desktopBackground");K=N.data("mobileBackground");J=window.matchMedia("(max-width: 768px)");a("#plectrum-img");c();a(window).resize(function(){c()});b(d.outcomeId);a("\x3cp\x3e"+d.address+"\x3c/p\x3e").appendTo(".address")}function d(b){x.find(".selectpicker").selectpicker("refresh");l();p();t();k();if(x.length)x.validator({feedback:{success:"fa-check",error:"fa-exclamation-triangle"}}).on("submit",
function(c){if(!c.isDefaultPrevented()){c.preventDefault();c=a(this);var d=x.find(".submit-cta button");d.attr("disabled",!0);var e=q(c);e=g(e,b);return common.AsyncService.ajaxPromise({dataType:"json",contentType:"application/json",method:"POST",cache:!1,url:c.prop("action"),data:e}).then(function(){u("success")}).fail(function(a){u("error");d.attr("disabled",!1)})}})}function b(b){a(".title-and-description-"+b).css("display","block");a(".details-"+b).css("display","block")}function c(){J.matches?
N.css("background-image","url("+K+")"):N.css("background-image","url("+I+")")}function g(a,b){function c(a){var b="",c;for(c in a)b=b+c+": "+a[c]+"\x3cbr/\x3e";return b}var d=b.address.split(","),g=2<d.length?d.slice(1,-1).join(","):d[0],e={"Under Construction":"","Agent Name":"N/A","Agent Email":"N/A",Channel:"Online","Rep Number":"N/A","ICOMS Premise Id":b.premise,"ICOMS Site ID":b.siteId,"Customer's Name":a.title+" "+a.firstName+" "+a.lastName,"Customer's Telephone Contact Details":a.telephone,
"Customer's Email Contact Details":a.email,"Address where service is being requested ":"","Plot Number/House Number":d[0],Street:g,Town:b.addressDetails.town,Postcode:b.postcode,"Name of Development":"N/A","Name of Developer":"N/A","Projected Move In Date":a.movingDate,"Services Customer Requested":"",TELCO:"N/A",BB:"N/A",TV:"N/A","Customers Current Address":"","Customers HouseNumber":a.buildingNumber||"N/A","Customers Street":a.street||"N/A","Customers Town":a.town||"N/A","Customers Postcode":a.postcode||
"N/A",Comments:""};d={"[ General Information ]----------------------------------------------":"",generalAgentName:"N/A",generalAgentEmail:"N/A",generalChannel:"Online",generalRepNumber:"N/A",generalIcomsPremiseId:b.premise,generalIcomsSiteId:b.siteId,generalCustomersName:a.title+" "+a.firstName+" "+a.lastName,generalCustomersTelephone:a.telephone,generalCustomersEmail:a.email,generalTelcoRequested:"N/A",generalBBRequested:"N/A",generalTVRequested:"N/A","[ Address where service is being requested ]----------------------------------------------":"",
custHouseNumberName:d[0],custStreet:g,custTown:b.addressDetails.town,custCounty:b.addressDetails.county||"unavailable",custPostcode:b.postcode,custNameOfDevelopment:"N/A",custDeveloper:"N/A",custMoveInDate:a.movingDate||"Already Moved In",serviceabilityOutcomeID:b.outcomeId,"[ Customers Current Address ]----------------------------------------------":"",currentHouseNumber:a.buildingNumber||"N/A",currentStreet:a.street||"N/A",currentTown:a.town||"N/A",currentPostcode:a.postcode||"N/A","[ Comments ]----------------------------------------------":"",
commentsComments:"","Wayleave Form ID":"0"};g={};if(2===b.outcomeId)g={emailHeader:{senderEmailAaddr:"noreply@virginmedia.co.uk",recipientEmailAddr:G||b.salesLeadEmail,emailSubject:"Under Construction - \x26 "+b.postcode+" \x26 - outcome ID: "+b.outcomeId},emailBody:c(e),recaptcha_response_field:a.recaptcha_response_field};else if(3===b.outcomeId||4===b.outcomeId)g={emailHeader:{senderEmailAaddr:"noreply@virginmedia.co.uk",recipientEmailAddr:G||b.salesLeadEmail,emailSubject:"New Home Builders 0 - outcome ID: "+
b.outcomeId},emailBody:c(d),recaptcha_response_field:a.recaptcha_response_field};return JSON.stringify(g)}function k(){window.recaptchaCallback=function(b){var c=a("#recaptcha_response_field");c.prop("checked")!=!!b&&c.trigger("click")}}function q(b){var c={},d=b.serializeArray();c.recaptcha_response_field=b.find("#g-recaptcha-response").val();a.each(d,function(){"recaptcha_response_field"!=this.name&&"g-recaptcha-response"!=this.name&&(c[this.name]=this.value)});return c}function l(){E.parent().on("click",
function(){a(this).find("input").trigger("focusout");C.hasClass("initialized-standard")||C.hasClass("initialized-month")?(F.slideDown("slow"),C.hasClass("initialized-month")&&B()):m("standard")});x.find(".moving-date-bar span").on("click",function(){x.find(".moving-date-bar span").removeClass("active");a(this).addClass("active");m(a(this).data("option"))});C.on("changeDate",function(){E.val(C.datepicker("getFormattedDate"));E.trigger("focusout");F.slideUp("slow")})}function m(a){x.find(".moving-date-bar span").removeClass("active");
C.removeClass();switch(a){case "standard":x.find('.moving-date-bar span[data-option\x3d"standard"]').addClass("active");C.hasClass("initialized-standard")||(E.val(""),C.datepicker("destroy"),C.addClass("initialized-standard"),C.datepicker({minViewMode:0,maxViewMode:0,format:"dd/mm/yyyy",inline:!0,todayHighlight:!0,startDate:new Date,weekStart:1,templates:{leftArrow:'\x3ci class\x3d"fa fa-angle-left vm-red"\x3e\x3c/i\x3e',rightArrow:'\x3ci class\x3d"fa fa-angle-right vm-red"\x3e\x3c/i\x3e'}}));break;
case "month":x.find('.moving-date-bar span[data-option\x3d"month"]').addClass("active"),C.hasClass("initialized-month")||(E.val(""),C.datepicker("destroy"),C.addClass("initialized-month"),C.datepicker({minViewMode:1,maxViewMode:2,format:"dd/mm/yyyy",inline:!0,startDate:new Date,todayHighlight:!0,templates:{leftArrow:'\x3ci class\x3d"fa fa-angle-left vm-red"\x3e\x3c/i\x3e',rightArrow:'\x3ci class\x3d"fa fa-angle-right vm-red"\x3e\x3c/i\x3e'}}).on("changeYear",function(){setTimeout(B,100)}),B())}F.slideDown("slow")}
function n(a,b){switch(b){case "hide":x.find(a).addClass("hidden");x.find(a).find("input").removeAttr("required","");x.find(a).find("input[type\x3dtext]").val("");x.find(a).find("input[type\x3dradio]").prop("checked",!1);x.validator("reset");break;case "show":x.find(a).removeClass("hidden"),x.find(a).find("\x3e .form-group input").attr("required","")}x.validator("update")}function p(){x.find(".already-moved input").change(function(){switch(a(this).val()){case "yes":n(".moving-date-wrap","hide");n(".existing-customer-wrap",
"hide");n(".existing-customer-address","hide");F.slideUp("slow");break;case "no":n(".moving-date-wrap","show"),n(".existing-customer-wrap","show")}});x.find(".existing-customer input").change(function(){switch(a(this).val()){case "yes":n(".existing-customer-address","show");break;case "no":n(".existing-customer-address","hide")}})}function t(){var a=x.find(".privacy-slide-panel");x.find("#privacy-show").click(function(b){b.preventDefault();a.slideToggle("fast")});x.find("#privacy-close").click(function(b){b.preventDefault();
a.slideUp()})}function B(){var a=(new Date).getFullYear(),b=parseInt(C.find(".datepicker-months .datepicker-switch").html());a===b&&C.find(".datepicker-months .month:not(.disabled)").first().addClass("current-month")}function u(b){var c=x.find(".form-request-feedback"),d=x.parent().find(".form-request-success");"success"==b?(x.addClass("hidden"),c.addClass("hidden"),d.removeClass("hidden")):c.removeClass("hidden");a("html, body").animate({scrollTop:x.offset().top},500)}var A={},y,D,w,r,x,C,E,F,G,
z,H,N,I,K,J;A.load=function(a){a.length&&h()};f.register({name:"cms-service-wrap",api:A,selector:".service-wrap-cookie"})})(VMJS,VMJSjQuery);
(function(f,a){function h(c){var g=c.address&&c.address.display;C=A.find(".header-background");A.find(".service-wrap-plectrum");E=C.data("desktopBackground");F=C.data("mobileBackground");G=window.matchMedia("(max-width: 768px)");a("#plectrum-img");b();a(window).resize(function(){b()});d(c.outcomeId);a("\x3cp\x3e"+g+"\x3c/p\x3e").appendTo(".address")}function e(b){y.find(".selectpicker").selectpicker("refresh");q();n();p();g();if(y.length)y.validator({feedback:{success:"fa-check",error:"fa-exclamation-triangle"}}).on("submit",
function(d){if(!d.isDefaultPrevented()){d.preventDefault();d=a(this);var g=y.find(".submit-cta button");g.attr("disabled",!0);var e=k(d);e=c(e,b);return common.AsyncService.ajaxPromise({dataType:"json",contentType:"application/json",method:"POST",cache:!1,url:d.prop("action"),data:e}).then(function(){B("success")}).fail(function(a){B("error");g.attr("disabled",!1)})}})}function d(b){a(".title-and-description-"+b).css("display","block");a(".details-"+b).css("display","block")}function b(){G.matches?
C.css("background-image","url("+F+")"):C.css("background-image","url("+E+")")}function c(a,b){function c(a){var b="",c;for(c in a)b=b+c+": "+a[c]+"\x3cbr/\x3e";return b}var d=b.address||{},g={"Under Construction":"","Agent Name":"N/A","Agent Email":"N/A",Channel:"Online","Rep Number":"N/A","ICOMS Premise Id":d.premiseId,"ICOMS Site ID":d.siteId,"Customer's Name":a.title+" "+a.firstName+" "+a.lastName,"Customer's Telephone Contact Details":a.telephone,"Customer's Email Contact Details":a.email,"Address where service is being requested ":"",
"Plot Number/House Number":d.houseNumberOrName,Street:d.street,Town:d.town,Postcode:d.postcode,"Name of Development":"N/A","Name of Developer":"N/A","Projected Move In Date":a.movingDate,"Services Customer Requested":"",TELCO:"N/A",BB:"N/A",TV:"N/A","Customers Current Address":"","Customers HouseNumber":a.buildingNumber||"N/A","Customers Street":a.street||"N/A","Customers Town":a.town||"N/A","Customers Postcode":a.postcode||"N/A",Comments:""},e={"[ General Information ]----------------------------------------------":"",
generalAgentName:"N/A",generalAgentEmail:"N/A",generalChannel:"Online",generalRepNumber:"N/A",generalIcomsPremiseId:d.premiseId,generalIcomsSiteId:d.siteId,generalCustomersName:a.title+" "+a.firstName+" "+a.lastName,generalCustomersTelephone:a.telephone,generalCustomersEmail:a.email,generalTelcoRequested:"N/A",generalBBRequested:"N/A",generalTVRequested:"N/A","[ Address where service is being requested ]----------------------------------------------":"",custHouseNumberName:d.houseNumberOrName,custStreet:d.street,
custTown:d.town,custCounty:d.county||"unavailable",custPostcode:d.postcode,custNameOfDevelopment:"N/A",custDeveloper:"N/A",custMoveInDate:a.movingDate||"Already Moved In",serviceabilityOutcomeID:b.outcomeId,"[ Customers Current Address ]----------------------------------------------":"",currentHouseNumber:a.buildingNumber||"N/A",currentStreet:a.street||"N/A",currentTown:a.town||"N/A",currentPostcode:a.postcode||"N/A","[ Comments ]----------------------------------------------":"",commentsComments:"",
"Wayleave Form ID":"0"},f={};if(2===b.outcomeId)f={emailHeader:{senderEmailAaddr:"noreply@virginmedia.co.uk",recipientEmailAddr:x||b.salesLeadEmail,emailSubject:"Under Construction - \x26 "+d.postcode+" \x26 - outcome ID: "+b.outcomeId},emailBody:c(g),recaptcha_response_field:a.recaptcha_response_field};else if(3===b.outcomeId||4===b.outcomeId)f={emailHeader:{senderEmailAaddr:"noreply@virginmedia.co.uk",recipientEmailAddr:x||b.salesLeadEmail,emailSubject:"New Home Builders 0 - outcome ID: "+b.outcomeId},
emailBody:c(e),recaptcha_response_field:a.recaptcha_response_field};return JSON.stringify(f)}function g(){window.recaptchaCallback=function(b){var c=a("#recaptcha_response_field");c.prop("checked")!=!!b&&c.trigger("click")}}function k(b){var c={},d=b.serializeArray();c.recaptcha_response_field=b.find("#g-recaptcha-response").val();a.each(d,function(){"recaptcha_response_field"!=this.name&&"g-recaptcha-response"!=this.name&&(c[this.name]=this.value)});return c}function q(){w.parent().on("click",function(){a(this).find("input").trigger("focusout");
D.hasClass("initialized-standard")||D.hasClass("initialized-month")?(r.slideDown("slow"),D.hasClass("initialized-month")&&t()):l("standard")});y.find(".moving-date-bar span").on("click",function(){y.find(".moving-date-bar span").removeClass("active");a(this).addClass("active");l(a(this).data("option"))});D.on("changeDate",function(){w.val(D.datepicker("getFormattedDate"));w.trigger("focusout");r.slideUp("slow")})}function l(a){y.find(".moving-date-bar span").removeClass("active");D.removeClass();
switch(a){case "standard":y.find('.moving-date-bar span[data-option\x3d"standard"]').addClass("active");D.hasClass("initialized-standard")||(w.val(""),D.datepicker("destroy"),D.addClass("initialized-standard"),D.datepicker({minViewMode:0,maxViewMode:0,format:"dd/mm/yyyy",inline:!0,todayHighlight:!0,startDate:new Date,weekStart:1,templates:{leftArrow:'\x3ci class\x3d"fa fa-angle-left vm-red"\x3e\x3c/i\x3e',rightArrow:'\x3ci class\x3d"fa fa-angle-right vm-red"\x3e\x3c/i\x3e'}}));break;case "month":y.find('.moving-date-bar span[data-option\x3d"month"]').addClass("active"),
D.hasClass("initialized-month")||(w.val(""),D.datepicker("destroy"),D.addClass("initialized-month"),D.datepicker({minViewMode:1,maxViewMode:2,format:"dd/mm/yyyy",inline:!0,startDate:new Date,todayHighlight:!0,templates:{leftArrow:'\x3ci class\x3d"fa fa-angle-left vm-red"\x3e\x3c/i\x3e',rightArrow:'\x3ci class\x3d"fa fa-angle-right vm-red"\x3e\x3c/i\x3e'}}).on("changeYear",function(){setTimeout(t,100)}),t())}r.slideDown("slow")}function m(a,b){switch(b){case "hide":y.find(a).addClass("hidden");y.find(a).find("input").removeAttr("required",
"");y.find(a).find("input[type\x3dtext]").val("");y.find(a).find("input[type\x3dradio]").prop("checked",!1);y.validator("reset");break;case "show":y.find(a).removeClass("hidden"),y.find(a).find("\x3e .form-group input").attr("required","")}y.validator("update")}function n(){y.find(".already-moved input").change(function(){switch(a(this).val()){case "yes":m(".moving-date-wrap","hide");m(".existing-customer-wrap","hide");m(".existing-customer-address","hide");r.slideUp("slow");break;case "no":m(".moving-date-wrap",
"show"),m(".existing-customer-wrap","show")}});y.find(".existing-customer input").change(function(){switch(a(this).val()){case "yes":m(".existing-customer-address","show");break;case "no":m(".existing-customer-address","hide")}})}function p(){var a=y.find(".privacy-slide-panel");y.find("#privacy-show").click(function(b){b.preventDefault();a.slideToggle("fast")});y.find("#privacy-close").click(function(b){b.preventDefault();a.slideUp()})}function t(){var a=(new Date).getFullYear(),b=parseInt(D.find(".datepicker-months .datepicker-switch").html());
a===b&&D.find(".datepicker-months .month:not(.disabled)").first().addClass("current-month")}function B(b){var c=y.find(".form-request-feedback"),d=y.parent().find(".form-request-success");"success"==b?(y.addClass("hidden"),c.addClass("hidden"),d.removeClass("hidden")):c.removeClass("hidden");a("html, body").animate({scrollTop:y.offset().top},500)}var u={},A,y,D,w,r,x,C,E,F,G,z=JSON.parse(localStorage.getItem("cableServiceability"));u.load=function(b){b.length&&(A=a(".service-wrap-header-container"),
y=a(".cms-service-wrap-form"),D=y.find("#datepicker"),w=y.find("#movingDate"),r=y.find(".datepicker-wrap"),x=y.attr("data-cmstestemail"),z&&(0<y.length&&e(z),0<A.length&&h(z)))};f.register({name:"service-wrap-no-cookie",api:u,selector:".service-wrap-no-cookie"})})(VMJS,VMJSjQuery);
(function(f,a){var h={},e=function(d){d.find(".mobile-content-dots").on("touchstart",function(){a(".mobile-content-tooltip").toggleClass("show-menu")});a(document).on("touchstart",function(b){var c=a(".mobile-content-tooltip");c.is(b.target)||0!==c.has(b.target).length||a(".mobile-content-tooltip").removeClass("show-menu")})};h.load=function(d){d.each(function(){e(a(this))})};f.register({name:"content-sharing-widget",api:h,selector:".content-sharing-widget"})})(VMJS,VMJSjQuery);
(function(f,a){function h(){G=a(".preference-centre-reg-wrapper");z=a(".preference-centre-email-wrapper");H=common.cmsUtils;L=H.getParametersFromUrl().id;N=G.data("getpcregistrationsurl")||"https://cablemystreet.virginmedia.com/cms/api/registrations";I=z.data("getpcvalidateurl")||"https://cablemystreet.virginmedia.com/cms/api/validateLink";K=G.data("getpcupdatecustomerurl")||"https://cablemystreet.virginmedia.com/cms/api/customer";J=G.data("getpcadditionalinforurl")||"https://cablemystreet.virginmedia.com/cms/api/additionalRegistrationInfo";
Q=z.data("getpcsendemailurllink")||"https://cablemystreet.virginmedia.com/cms/api/PCURLLink";P=z.data("getpcerrorpage")||"/postcode-checker/pc-error.html";L?common.AsyncService.ajaxPromise({method:"GET",dataType:"JSON",contentType:"application/x-www-form-urlencoded; charset\x3dUTF-8",cache:!1,xhrFields:{token:L},url:I,data:{urlId:L},headers:[{key:"X-Requested-With",value:"XMLHttpRequest"},{key:"Accept",value:"application/json"}]}).then(function(a){"LinkValid"===a.result?(z.find(".message").removeClass("hidden"),
z.find("#change-email-form").show(),z.find("#send-email-form").remove(),z.find(".email-details").removeClass("hidden"),z.show(),z.find("#change-email-form .form-fields").attr("data-customerid",a.customerId),S=a.email,d(a.email)):(z.find("#send-email-form #email").val(a.email),z.find(".message").removeClass("hidden"),z.find("#send-email-form").show(),z.find("#change-email-form").remove(),z.find(".pc-email-form").show(),z.find("#link-expired-alert").show());m()},function(){H.redirectToErrorPage(P)}):
(z.find("#send-email-form").show(),z.find("#change-email-form").remove(),z.find(".pc-email-form").show(),z.show(),m())}function e(a,b){return common.AsyncService.ajaxPromise({method:"PUT",dataType:"json",contentType:"application/json",cache:!1,xhrFields:{withCredentials:!0},url:a,data:b,headers:[{key:"X-Requested-With",value:"XMLHttpRequest"},{key:"Accept",value:"application/json"}]})}function d(d){common.AsyncService.ajaxPromise({method:"GET",dataType:"text",contentType:"application/x-www-form-urlencoded; charset\x3dUTF-8",
cache:!1,xhrFields:{withCredentials:!0},url:N,data:{email:d,urlid:L},headers:[{key:"X-Requested-With",value:"XMLHttpRequest"},{key:"Accept",value:"application/json"}]}).then(function(e){var f=a("#pc-registrations-item").html();f=Handlebars.compile(f);var h=JSON.parse(e);z.find(".your-email-value").html(d);a("#pref-centre-content").append(f(h));0===h.registrations.length&&c();g();q();G.find(".selectpicker").selectpicker("refresh");G.removeClass("hidden");l();b();1===JSON.parse(e).registrations.length&&
G.find(".reg-toggle").trigger("click")},function(){H.redirectToErrorPage(P)})}function b(){G.on("click","a.reg-remove",function(){U=a(this).data("customerid");T=G.find("#pref-centre-content .pref-centre-reg-item").length;if(1===T){var b=G.find("#delete_confirmation div.modal-body p.last.hidden"),c=G.find("#delete_confirmation div.modal-body p.default");b.removeClass("hidden");c.addClass("hidden")}});G.on("click","button.confirm-deletion",function(){common.AsyncService.ajaxPromise({method:"DELETE",
cache:!1,xhrFields:{withCredentials:!0},url:K+"/"+U+"?urlId\x3d"+L}).then(function(b){"Success"===b.result?(a("#delete_confirmation").modal("hide"),G.find("#pref-centre-content").empty(),1!==T?d(S):c()):H.redirectToErrorPage(P)},function(){H.redirectToErrorPage(P)})})}function c(){window.location=a("#cablemystreet-home-page").data("cmsHomePage")||"http://www.virginmedia.com/postcode-checker"}function g(){G.find(".pref-centre-reg-item").each(function(){var b=a(this);k(b);B(b);y(b);D(b);E(b)})}function k(a){var b=
a.find("select[name^\x3dtitle]"),c=a.attr("data-title"),d=a.find(".cms-postcode"),g=H.getFormattedPostcode(d.attr("data-postcode")),e={interestedInBroadBand:a.attr("data-interestedinbroadband"),interestedInTV:a.attr("data-interestedintv"),interestedInPhone:a.attr("data-interestedinphone"),interestedInMobile:a.attr("data-interestedinmobile")},f={bbProvider:a.attr("data-bbcurrentprovider"),tvProvider:a.attr("data-tvcurrentprovider"),phoneProvider:a.attr("data-phonecurrentprovider"),mobileProvider:a.attr("data-mobilecurrentprovider")},
h={bbContractEndDate:a.attr("data-bbcontractenddate"),tvContractEndDate:a.attr("data-tvcontractenddate"),phoneContractEndDate:a.attr("data-phonecontractenddate"),mobileContractEndDate:a.attr("data-mobilecontractenddate")},k=a.attr("data-businessname"),l=a.attr("data-customertype"),p=a.attr("data-firstname"),q=a.attr("data-lastname"),m=a.attr("data-mobile"),n=a.attr("data-contactpermitted");a.find("input[name\x3dfirstName]").val(p);a.find("input[name\x3dlastName]").val(q);a.find("input[name\x3dmobile]").val(m);
b.selectpicker();b.selectpicker("val",c);"Y"===n?a.find("input[name^\x3dcontactPermitted]").prop("checked",!0):a.find("input[name^\x3dcontactPermitted]").prop("checked",!1);d.find("span").html(g);a.find(".your-details-postcode").html(g);for(var w in e)b=a.find('input[id^\x3d"'+w+'"]'),!0===JSON.parse(e[w])?(b.prop("checked",!0),b.parents(".form-group").find(".other-parent").removeClass("hidden")):(b.prop("checked",!1),b.parents(".form-group").find(".other-parent").addClass("hidden"));for(var t in f)""!==
f[t]&&(e=a.find('select[name^\x3d"'+t+'"]'),w=e.find('option[value\x3d"'+f[t]+'"]'),w.length?(e.selectpicker(),e.selectpicker("val",f[t])):(e.selectpicker(),e.selectpicker("val","Other"),e.find('option[value\x3d"Other"]').attr("selected","selected"),e.parents(".form-group").find(".other").removeClass("hidden"),e.parents(".form-group").find("input[name^\x3dother]").val(f[t])),e.selectpicker(),"no-date"!==w.data("type")&&""!==w.val()&&e.parents(".form-group").find(".date-fields").removeClass("hidden"));
for(var x in h)""!==h[x]&&(t=a.find("."+x),f=t.find(".datepicker-month"),t=t.find(".datepicker-year"),e=h[x].split("-"),f.selectpicker(),t.selectpicker(),f.selectpicker("val",parseInt(e[1],10)-1),t.selectpicker("val",e[0]));""!==k||"Business"===l?(a.find("input[name^\x3dbusinessName]").val(k),a.find("input[name^\x3dbusinessName]").parents(".other").removeClass("hidden"),a.find("input[id^\x3dcustomerType]").prop("checked",!0)):(a.find("input[name^\x3dcustomerType]").prop("checked",!1),a.find("input[name^\x3dbusinessName]").parents(".other").addClass("hidden"))}
function q(){G.find(".reg-toggle").click(function(){if(!a(this).hasClass("disabled")){var b=a(this).data("close"),c=a(this).data("open"),d=a(this).parents(".pref-centre-reg-item").find(".toggle-wrapper"),g=a(this);g.addClass("disabled");d.slideToggle("slow",function(){g.removeClass("disabled")});d.toggleClass("opened");d.hasClass("opened")?g.html(b):g.html(c)}})}function l(){z.find("a.email-change").click(function(){if(!a(this).hasClass("disabled")){var b=a(".preference-centre-email-wrapper .pc-email-form"),
c=a(this);c.addClass("disabled");b.slideToggle("slow",function(){c.removeClass("disabled")});b.toggleClass("opened");b.hasClass("opened")?c.html("Close"):c.html("Change")}})}function m(){var a=z.find("form"),b=a.attr("id");a.validator({feedback:{success:"fa-check",error:"fa-exclamation-triangle"}});"change-email-form"===b?n(a):(p(a),t())}function n(b){b.find(".form-fields").data("customerid");b.on("submit",function(c){c.isDefaultPrevented()||(c.preventDefault(),a("#change_confirmation").modal("show"),
a("#change_confirmation").on("click","button.confirm-update-email",function(){var c={oldEmail:S,newEmail:b.find("#email").val(),urlId:L};c=JSON.stringify(c);e(K,c).then(function(b){"Success"===b.result?(a("#change_confirmation").modal("hide"),z.find(".row").hide(),z.find(".update-email-thank-you").removeClass("hidden")):H.redirectToErrorPage(P)},function(){H.redirectToErrorPage(P)})}))})}function p(a){a.on("submit",function(b){b.isDefaultPrevented()||(b.preventDefault(),b=x(a),b=JSON.stringify(b),
common.AsyncService.ajaxPromise({method:"POST",dataType:"json",contentType:"application/json",cache:!1,xhrFields:{withCredentials:!0},url:Q,data:b,headers:[{key:"X-Requested-With",value:"XMLHttpRequest"},{key:"Accept",value:"application/json"}]}).then(function(){z.find(".row").hide();z.find(".send-email-thank-you").removeClass("hidden")},function(){H.redirectToErrorPage(P)}))})}function t(){window.recaptchaCallback=function(b){var c=a("#recaptcha_response_field");c.prop("checked")!=!!b&&c.trigger("click")}}
function B(b){var c=b.find(".cms-pc-details-form"),d=b.find(".cms-pc-your-services"),g=w(c),e=r(b,d);c.data("initial-details-form-state",g);d.data("initial-services-form-state",e);c.validator({feedback:{success:"fa-check",error:"fa-exclamation-triangle"}});c.find("input[type\x3dtext]").on("input",function(){R(function(){u(c,b)},1E3)});c.find("select, input[type\x3dcheckbox]").on("change",function(){u(c,b)});d.find("input[type\x3dtext]").on("input",function(){R(function(){u(d,b)},1E3)});d.find("select, input[type\x3dcheckbox]").on("change",
function(){u(d,b)});var f=function(a,b,c){b=!c&&"other"==b||c&&b.prop("checked")||!1;a.find("input").val("").end()[b?"removeClass":"addClass"]("hidden");a.hasClass("has-feedback")&&a.find("input").focusin().focusout()};d.find(".toggle-hidden").not("div").on("change",function(){var b=a(this),c=b.parents(".form-group").first(),d=c.find(".date-fields");c=c.find(".other");if(b.is("input")){var g=c.parents(".other-parent");g.length?g.toggleClass("hidden"):f(c,b,!0)}b.is("select")&&(g=b.val(),b=b.find("option:selected"),
d[g&&!b.data("type")?"removeClass":"addClass"]("hidden"),f(c,b.text().toLowerCase()))})}function u(a,b){var c=b.find(".cms-pc-your-services"),d=b.find(".cms-pc-details-form");switch(a.selector){case ".cms-pc-details-form":c=w(d);a=d.data("initial-details-form-state");JSON.stringify(c)!==JSON.stringify(a)&&0===d.find(".has-error").length?d.addClass("form-changed"):d.removeClass("form-changed");break;case ".cms-pc-your-services":d=r(b,c),a=c.data("initial-services-form-state"),JSON.stringify(d)!==JSON.stringify(a)&&
0===c.find(".has-error").length?c.addClass("form-changed"):c.removeClass("form-changed")}A(b)}function A(a){var b=a.find(".cms-pc-details-form"),c=a.find(".cms-pc-your-services");b.hasClass("form-changed")||c.hasClass("form-changed")?a.find(".cta-contain-save button[disabled]").removeAttr("disabled"):a.find(".cta-contain-save button").attr("disabled","")}function y(a){function b(){a.find(".form-request-feedback").addClass("success").removeClass("hidden");setTimeout(function(){a.find(".form-request-feedback").removeClass("success").addClass("hidden")},
3E3)}var c=a.data("customerid"),d=K+"/"+c,g=a.find(".cms-pc-details-form"),f=a.find(".cms-pc-your-services");a.find(".submit").click(function(){if(g.hasClass("form-changed")){var c=w(g);c.urlId=L;var h=JSON.stringify(c);e(d,h).then(function(d){"Success"===d.result?(b(),a.attr("data-title",c.title),a.attr("data-firstname",c.firstName),a.attr("data-lastname",c.lastName),a.attr("data-mobile",c.mobile),a.attr("data-contactpermitted",c.contactPermitted),g.data("initial-details-form-state",w(g)),u(g,a)):
H.redirectToErrorPage(P)},function(){H.redirectToErrorPage(P)})}if(f.hasClass("form-changed")){var k=r(a,f);h=JSON.stringify(k);common.AsyncService.ajaxPromise({method:"POST",dataType:"json",contentType:"application/json",cache:!1,xhrFields:{withCredentials:!0},url:J,data:h,headers:[{key:"X-Requested-With",value:"XMLHttpRequest"},{key:"Accept",value:"application/json"}]}).then(function(){b();a.attr("data-interestedinbroadband",k.interestedInBB);a.attr("data-interestedintv",k.interestedInTV?k.interestedInTV:
!1);a.attr("data-interestedinphone",k.interestedInPhone?k.interestedInPhone:!1);a.attr("data-interestedinmobile",k.interestedInMobile?k.interestedInMobile:!1);a.attr("data-bbcurrentprovider",k.bbProvider);a.attr("data-tvcurrentprovider",k.tvProvider);a.attr("data-phonecurrentprovider",k.phoneProvider);a.attr("data-mobilecurrentprovider",k.mobileProvider);a.attr("data-bbcontractenddate",k.bbContractEndDate);a.attr("data-tvcontractenddate",k.tvContractEndDate);a.attr("data-phonecontractenddate",k.phoneContractEndDate);
a.attr("data-mobilecontractenddate",k.mobileContractEndDate);a.attr("data-businessname",k.businessName);a.attr("data-customertype",k.customerType);f.data("initial-services-form-state",r(a,f));u(f,a)},function(){H.redirectToErrorPage(P)})}})}function D(a){var b=a.find(".cms-pc-details-form"),c=a.find(".cms-pc-your-services");a.find(".reset").click(function(){k(a);b.removeClass("form-changed");c.removeClass("form-changed");A(a)})}function w(b){var c={},d=b.serializeArray();a.each(d,function(){this.name.startsWith("contactPermitted")||
(c[this.name]=this.value)});c.contactPermitted=b.find("input[name^\x3dcontactPermitted]").prop("checked")?"Y":"N";return c}function r(b,c){var d="endDateMonthBB endDateMonthTV endDateMonthPhone endDateMonthMobile endDateYearBB endDateYearTV endDateYearMobile endDateYearPhone interestedInTV interestedInPhone interestedInMobile customerType otherBBProvider otherTvProvider otherPhoneProvider otherMobileProvider bbProvider tvProvider phoneProvider mobileProvider".split(" "),g={},e=c.find("[name^\x3dbbProvider]").val();
g.interestedInBB=""!==e;g.customerType=c.find("[id^\x3dcustomerType]").prop("checked")?"Business":"Residential";g.addressId=b.data("addressid");b=c.serializeArray();a.each(b,function(){this.name=this.name.split("_")[0];if(-1===a.inArray(this.name,d))void 0!==g[this.name]?(g[this.name].push||(g[this.name]=[g[this.name]]),g[this.name].push(this.value||"")):g[this.name]=("consent"===this.name?!0:this.value)||"";else{if(!this.name.startsWith("other")&&this.name.endsWith("Provider")){var b=this.name;var e=
this.value;"Other"===e?(e=this.name.split("Provider")[0],e=a("[name*\x3dother"+e+"Provider i]").val().trim()):e=e||"";g[b]=e}-1!==this.name.indexOf("endDateMonth")&&(e=(b=this.name.slice(12))?b.toLowerCase()+"ContractEndDate":"bbContractEndDate",g[e]=C(c,this.value,b),g[b.toLowerCase()+"Provider"]?g[e]=C(c,this.value,b):g[e]="");-1!==this.name.indexOf("interestedIn")&&(g[this.name]=this.value?!0:!1)}});"0"===g.tvProvider&&(g.tvProvider=g.bbProvider);"0"===g.phoneProvider&&(g.phoneProvider=g.bbProvider);
return g}function x(a){return{email:a.find("#email").val(),recaptcha_response_field:a.find("#g-recaptcha-response").val(),sendEmail:"Yes"}}function C(a,b,c){b=parseInt(b)+1;return a.find("[name^\x3dendDateYear"+c+"]").val()+"-"+(10>b?"0"+b:b)}function E(a){var b=a.find(".privacy-slide-panel");a.find(".privacy-show").click(function(a){a.preventDefault();b.slideToggle("fast")});a.find(".privacy-close").click(function(a){a.preventDefault();b.slideUp()})}var F={},G,z,H,N,I,K,J,Q,S,T,U,L,P,R=function(){var a=
0;return function(b,c){clearTimeout(a);a=setTimeout(b,c)}}();F.load=function(a){a.length&&h()};f.register({name:"preference-centre-registrations",api:F,selector:".preference-centre-registrations"})})(VMJS,VMJSjQuery);
(function(f,a){function h(){a(".header-steps-wrapper").addClass("part-or-full-serv")}function e(){a(".header-steps-wrapper").addClass("no-serv")}function d(){a(".header-steps-wrapper.part-or-full-serv .calendar .header-step-number").html("1");a(".header-steps-wrapper.part-or-full-serv .mail .header-step-number").html("2")}function b(){a(".contract-lead-user-status .serviceable").removeClass("hidden")}function c(){a(".contract-lead-user-status .part-serviceable").css("display","block")}function g(){a(".contract-lead-user-status .non-serviceable").css("display",
"block")}function k(){var a=common.AsyncService.ajaxPromise({method:"GET",dataType:"text",contentType:"application/x-www-form-urlencoded; charset\x3dUTF-8",url:U,cache:!1,xhrFields:{withCredentials:!0},timeout:2E4,headers:[{key:"X-Requested-With",value:"XMLHttpRequest"},{key:"Accept",value:"application/json"}]});a.done(function(){q()});a.fail(function(){l()})}function q(){var b=common.AsyncService.ajaxPromise({method:"POST",url:L,cache:!1,dataType:"json",data:{postcode:v.postcode.replace(/\s+/g,"")},
contentType:"application/x-www-form-urlencoded; charset\x3dUTF-8",xhrFields:{withCredentials:!0},headers:[{key:"X-Requested-With",value:"XMLHttpRequest"},{key:"Accept",value:"application/json"}]});b.done(function(b){b.faultList||(a.each(b.addressList,function(a,b){if(v.saId===b.premiseId)return ea=b.displayAddress,p(b.displayAddress),!1}),ea||l(),m(!0))});b.fail(function(){l()})}function l(){a(".contract-lead-header .cro-cookie").removeClass("with-cookie");R.addClass("without-cookie");a(".contract-lead-user-status .serviceable").addClass("hidden");
a(".contract-lead-user-status .part-serviceable").addClass("hidden");a(".contract-lead-user-status .non-serviceable").addClass("hidden");B(!1)}function m(b){b?(a(".contract-lead-header .cro-cookie .serviceability-icoms-dna-wrapper").removeClass("hidden"),a(".contract-lead-header .cro-cookie .header-steps-wrapper").removeClass("hidden")):(a(".contract-lead-header .cro-cookie .serviceability-icoms-dna-wrapper").addClass("hidden"),a(".contract-lead-header .cro-cookie .header-steps-wrapper").addClass("hidden"))}
function n(){v?a(".contract-lead-user-status .non-serviceable .middle-text .address-text").text(v.postcode):a(".contract-lead-user-status .non-serviceable .middle-text .address-text").text(ja)}function p(b){a(".contract-lead-user-status .serviceable .middle-text .address-text").text(b);a(".contract-lead-user-status .part-serviceable .middle-text .address-text").text(b)}function t(b){a(".contract-lead-user-status .non-serviceable .middle-text .address-text").text(b)}function B(b){b?a(".cms-contract-lead-main-form").removeClass("hidden"):
a(".cms-contract-lead-main-form").addClass("hidden")}function u(){D();a("#serviceabilityForm").submit(function(d){var f=V[0].action,h=y(V);d.preventDefault();d=common.AsyncService.ajaxPromise({method:"POST",dataType:"json",contentType:"application/x-www-form-urlencoded; charset\x3dUTF-8",url:f,data:h,xhrFields:{withCredentials:!0},headers:[{key:"X-Requested-With",value:"XMLHttpRequest"},{key:"Accept",value:"application/json"}]});A();d.fail(function(){l()});d.done(function(d){da=v?v.status:d.serviceability.redirectURL&&
!d.serviceability.status?"National":d.serviceability.status;ca=d.serviceability.address||ia;w();R.removeClass("without-cookie");R.addClass("with-local-cookie");ja=a("#postcode-field").val();switch(da){case "active":case "serviceable":b();p(ca);B(!0);break;case "part_serviceable":case "ph_part_serviceable":c();p(ca);B(!0);break;case "National":case "unserviceable":e();g();B(!1);t(ca);break;default:"sale"==v.bb&&"sale"==v.dtv&&"sale"==v.phone?(b(),p(ca),B(!0)):"sale"==v.bb&&"sale"==v.dtv&&"sale"!=v.phone?
(c(),p(ca),B(!0)):(e(),g(),B(!1),t(ca))}})})}function A(){for(var b=a(".cro-cookie .address-list")[0].children,c=0;c<b.length;c++)"selected"==b[c].className&&(ia=b[c].innerText)}function y(b){var c={};b=b.serializeArray();a.each(b,function(){c[this.name]=this.value});c.postcode=a("#postcode-field").val();return c}function D(){var b=a("#serviceabilityForm");if(0<b.length){var c=b[0].action.replace("serviceability","api/serviceability");b.attr("action",c)}}function w(){a(".refreshBtn").on("click",function(b){b.preventDefault();
a.removeCookie("cable_serviceability",{path:"/",domain:".virginmedia.com"});location.reload()})}function r(){var b=a(".contract-expiry-panel");ba.click(function(c){c.preventDefault();a(this).hasClass("rotate")?(b.slideUp(),a(this).removeClass("rotate")):(b.slideToggle("fast"),a(this).addClass("rotate"))})}function x(){Z.parent().on("click",function(){var b=a(this).closest("form");Y=b.find(".datepicker-wrap");X=Y.find(".datepicker").first();Z=b.find(".movingDate");b.hasClass("cms-contract-lead-main-form")&&
ba.hasClass("rotate")&&ba.trigger("click");a(this).find("input").trigger("focusout");X.hasClass("initialized")?(Y.slideDown("slow"),X.hasClass("initialized")&&E()):C()});X.on("changeDate",function(){Z.val(X.datepicker("getFormattedDate"));Z.trigger("focusout");Y.slideUp("slow")})}function C(){X.addClass("initialized");X.datepicker({minViewMode:1,maxViewMode:2,format:"mm/yyyy",inline:!0,startDate:new Date,todayHighlight:!0,templates:{leftArrow:'\x3ci class\x3d"fa fa-angle-left vm-red"\x3e\x3c/i\x3e',
rightArrow:'\x3ci class\x3d"fa fa-angle-right vm-red"\x3e\x3c/i\x3e'}}).on("changeYear",function(){setTimeout(E,100)});E();Y.slideDown("slow")}function E(){var a=(new Date).getFullYear(),b=parseInt(X.find(".datepicker-months .datepicker-switch").html());a===b&&X.find(".datepicker-months .month:not(.disabled)").first().addClass("current-month")}function F(a){a.validator({feedback:{success:"fa-check",error:"fa-exclamation-triangle"}})}function G(){window.recaptchaCallback=function(b){var c=a("#recaptcha_response_field");
c.prop("checked")!=!!b&&c.trigger("click")}}function z(){aa.on("submit",function(b){b.isDefaultPrevented()||(b.preventDefault(),b=H(aa),b=JSON.stringify(b),I(b).then(function(b){a(".contract-lead-user-status").hide();aa.hide();a(".contract-lead-main-form .cro-form-request-feedback").show();O.removeClass("hidden");W=b.reason;a(".calendar .icon-2").addClass("opacity-40");a(".calendar .header-step-number").addClass("opacity-40");a(".calendar .header-step-text").addClass("opacity-40")},function(){}))})}
function H(a){var b={};v&&(b.premiseId=v.saId,b.siteId=v.siteId);b.typeName=M;b.displayAddress=ea||ia;b.responseObject=JSON.stringify(N(a)).replace('"/g','\\"');b.recaptcha_response_field=a.find("#g-recaptcha-response").val();return b}function N(b){var c={},d=b.serializeArray();a.each(d,function(){"recaptcha_response_field"!=this.name&&"g-recaptcha-response"!=this.name&&"movingDate"!=this.name&&"MarketingOptIn"!=this.name&&(c[this.name]=this.value)});d=Z.val().split("/");c.CableContractEndMonth=10>
d[0]?d[0].slice(-1):d[0];c.CableContractEndYear=d[1];c.MarketingOptIn="on"==b.find("#privacyPolicy").val()?"true":"false";return c}function I(a){return common.AsyncService.ajaxPromise({method:"POST",dataType:"json",contentType:"application/json",cache:!1,xhrFields:{withCredentials:!0},url:qa,data:a,headers:[{key:"X-Requested-With",value:"XMLHttpRequest"},{key:"Accept",value:"application/json"}]})}function K(){a(".backBrowsing").on("click",function(a){a.preventDefault();window.history.back()})}function J(){O.on("submit",
function(b){b.isDefaultPrevented()||(b.preventDefault(),b=Q(),b=JSON.stringify(b),I(b).then(function(){a(".contract-lead-main-form .continue-browsing").hide();O.hide();a(".contract-lead-mobile-form .cro-form-request-feedback").show()},function(){}))})}function Q(){var a={};a.formInstanceGuid=W;a.typeName=M;var b={},c=Z.val().split("/");b.MobileContractEndMonth=10>c[0]?c[0].slice(-1):c[0];b.MobileContractEndYear=c[1];a.responseObject=JSON.stringify(b).replace('"/g','\\"');return a}var S={},T,U,L,P,
R,aa,O,X,Z,Y,ba,V,v,M,W,da,ca,ia,ja,ea,qa;S.load=function(f){if(f.length){T=common.cmsUtils;U=a("#widget-form").data("apiGetToken");L=a("#widget-form").data("apiCheckAddress");P=a.cookie("cable_serviceability");aa=a(".cms-contract-lead-main-form");O=a(".cms-contract-lead-mobile-form");X=a(".datepicker");Z=a(".movingDate");ba=a("#contract-expiry-display i");V=a("#serviceabilityForm");M=aa.data("getclformname")||"LeadCapture";qa=aa.data("getclpostformurl")||"https://cablemystreet.virginmedia.com/cms/api/postForm";
R=a(".cro-cookie");if(P)if(R.hasClass("author-edit"))R.addClass("without-cookie");else switch(v=T.getCookieObject(P),m(!1),R.addClass("with-cookie check-serviceability"),w(),B(!0),v.status){case "active":case "serviceable":b();h();d();k();break;case "part_serviceable":c();h();d();k();break;case "National":case "unserviceable":e();g();B(!1);n();m(!0);break;default:"sale"==v.bb&&"sale"==v.dtv&&"sale"==v.phone?(b(),h(),d(),k()):"sale"==v.bb&&"sale"==v.dtv&&"sale"!=v.phone?(c(),h(),d(),k()):(e(),g(),
B(!1),n()),m(!0)}else R.addClass("without-cookie"),a(".serviceability-searchbox-serv-widget-form-title").prepend('\x3cdiv class\x3d"nrPrepend"\x3e1\x3c/div\x3e'),u();r();F(aa);G();z();F(O);J();x();K()}};f.register({name:"contract-lead-header-wrapper",api:S,selector:".contract-lead-header-wrapper"})})(VMJS,VMJSjQuery);
(function(f,a){function h(e,d){e=a(d).find("button");var b=a(d).find(".expandBtn"),c=a(d).find(".collapseBtn"),g=a(d).find(".expandable-content");e.click(function(){g.slideToggle("fast",function(){a(this).toggleClass("expanded");a(this).hasClass("expanded")?(b.addClass("hidden"),c.removeClass("hidden")):(b.removeClass("hidden"),c.addClass("hidden"))})})}f.register({name:"expandable-content-area",api:{load:function(a){a.each(h)}},selector:".expandable-content-area"})})(VMJS,VMJSjQuery);
(function(f,a){function h(e,d){e=a(d).find(".postcode-check-banner-wrapper");var b=window.location.href.split("?")[0].replace(/\/$/,""),c=a("#cablemystreet-hub-page").data("cms-hub-page");d="";var g=e.data("desktop-background"),f=e.data("mobile-background");window.matchMedia("(max-width: 767px)").matches?e.css("background-image","url("+f+")"):e.css("background-image","url("+g+")");if(b===c)try{var h=a.cookie("cms.vm.user"),l=JSON.parse(h);d=l.currentAddress.displayAddress;!1===l.currentAddress.manualEntry?
e.find(".status-text").removeClass("hidden"):e.find(".alt-status-text").removeClass("hidden")}catch(m){e.find(".alt-status-text").removeClass("hidden")}else e.find(".status-text").removeClass("hidden");if(h=a("#status-text-hbs").html())h=Handlebars.compile(h),e.find(".status-text").append(h({address:d}))}f.register({name:"postcode-check-banner",api:{load:function(a){a.each(h)}},selector:".postcode-check-banner"})})(VMJS,VMJSjQuery);
(function(f,a){function h(e,d){function b(b){var c=0;f.find(".bundle-wrapper").each(function(){var d=a(this).find(".eq-height").eq(b).outerHeight();c=d>c?d:c});return c}function c(a){var b=a.find(".flash-sales-above-title:visible");a=a.find(".flash-sales-above-title:hidden");0<b.length&&0<a.length&&(a=a.parent().has(".no-emphasized"),0<a.length&&(h=b=b.first().outerHeight(),a.css("margin-top",b)))}function g(b){var c=b.find(".bundle-title.emphasized");b=b.find(".bundle-title.no-emphasized");if(0<
c.length&&0<b.length){var d=c.first().outerHeight();c.css("min-height",d+h);b.parent().has(".flash-sales-above-title:hidden").each(function(){a(this).css("margin-top",h)})}}var f=a(d).find(".compare-bundles-vertical-wrap");e=f.find(".bundle-wrapper");d=e.first();var h=30;window.matchMedia("(min-width: 767px)").matches&&(d.find(".eq-height").each(function(){var c=a(this).index()-1,d=b(c);f.find(".bundle-wrapper").find(".eq-height:eq("+c+")").css("min-height",d)}),c(e),g(e))}f.register({name:"compare-bundles-vertical",
api:{load:function(a){a.each(h)}},selector:".compare-bundles-vertical"})})(VMJS,VMJSjQuery);
(function(f,a){function h(b){return 0<a(b).outerHeight()?Promise.resolve(function(){return!0}):e().then(function(){return h(b)})}function e(){return new Promise(function(a){requestAnimationFrame(a)})}function d(b){var c=a(b.attr("href")).find(".compare-products.component");c.find(".compare-product-item").removeClass("hide-item");0<c.outerHeight()?c.each(q):h(c).then(function(){c.each(q)})}function b(){a(".vm-tabs .nav-tabs a").each(function(b,c){var g=a(c);g.unbind("click");g.on("click",function(){d(g)})})}
function c(b,c){b.addListener(function(){a(c).closest(".compare-products.component").each(q)})}function g(a,b){for(b=b.parentNode;null!=b;){if(b==a)return!0;b=b.parentNode}return!1}function k(b,c){if(0<a(".vm-tabs").length){var d=g(a(".vm-tabs")[0],c),e=g(a(a(".nav-tabs a:first").attr("href"))[0],c);d&&e?q(b,c):d||q(b,c)}else q(b,c)}function q(d,g){function e(){var b=a(g).find(".owl-carousel"),c=a(g).find(".nav-cont").data("nav-color"),d=a(g).find(".nav-cont"),e=a(g).find(".nav-cont .owl-dots");a(g).closest(".tab-content").addClass("custom-owl-tab");
b.owlCarousel({navText:["\x3ci class\x3d'fa fa-chevron-left'\x3e\x3c/i\x3e","\x3ci class\x3d'fa fa-chevron-right'\x3e\x3c/i\x3e"],nav:!0,margin:0,stagePadding:0,responsive:{0:{items:1,stagePadding:30,margin:0}},loop:!0,rewind:!1,autoWidth:!1,items:1,slideBy:1,dotsContainer:e,navContainer:d,onInitialized:function(){f(x,c)},onChanged:function(){f(x,c)}});b.find(".owl-item .compare-product-item").removeClass("hide-item")}function f(b,c){b=b.find(".owl-dot");var d=b.filter(function(){return a(this).hasClass("active")});
b.css({"border-color":c,"background-color":"transparent"});d.css("background-color",c)}function h(a){a=a.find(".pricing-details");var b=p(a);n(b,a)}function k(){a(".bundle-body.collapse").on("show.bs.collapse",function(b){this===b.target&&(a(".mobile-header").removeClass("openned"),a(".bundle-body.collapse").removeClass("in"),a(this).siblings(".mobile-header").addClass("openned"))});a(".bundle-body.collapse").on("hide.bs.collapse",function(b){this===b.target&&a(this).siblings(".mobile-header").removeClass("openned")})}
function l(b){4===b.length?b.each(function(){a(this).addClass("col-xs-12 col-md-3")}):3===b.length?b.each(function(){a(this).addClass("col-xs-12 col-md-4")}):b.each(function(){a(this).addClass("col-xs-12 col-md-6")});b.removeClass("hide-item")}function q(b){b.each(function(){a(this).addClass("col-md-3")})}function p(b){var c=0;a(b).each(function(){var b=a(this).outerHeight();b>c&&(c=b)});return c}function n(b,c){a(c).each(function(){a(this).css("height",b)})}var x=a(g).find(".compare-products-inner"),
C=x.find(".compare-product-item");d=x.find(".bundle-wrapper");var E=a(d[0]).find(".bundle-body"),F=x.find(".clearfix"),G=a(g).find(".row"),z=x.data("carousel-view"),H=C.find(".author");m&&(z&&G.addClass("owl-carousel"),a(g).find(".nav-cont").removeClass("hidden"),e());if(0!==d.length)if(H.length?(q(F),C.removeClass("hide-item")):l(C),F=window.matchMedia("screen and (min-width: 991px)"),function(){a(".tile").on("click",function(b){b.stopPropagation();b.stopImmediatePropagation();var c=a(b.target).closest(".flip-box-top");
b=a(b.target).closest(".flip-box");var d=a(c).outerHeight();a(c).css("top","-"+d+"px");a(b).css("height",d+"px");b=a(this).attr("data-tile-id")+"-content";a(c).find(" ."+b).removeClass("hidden")})}(),function(){a(".close-tile").on("click",function(b){b.stopPropagation();b.stopImmediatePropagation();b=a(b.target).closest(".flip-box-top");var c=a(this).attr("data-tile-id")+"-content";a(b).css("top","0");a(b).find(" ."+c).addClass("hidden")})}(),function(){a(".close-highlights").on("click",function(b){b.stopPropagation();
b.stopImmediatePropagation();var c=a(b.target).closest(".highlight-body");b=a(b.target).closest(".bundle-body").find(".highlight-anchor");a(c).removeClass("in");a(b).addClass("collapsed")})}(),b(),c(F,g),C.each(function(a,b){var c=Date.now()+""+a;b.getElementsByClassName("mobile-header")[0].setAttribute("data-target",".bundle-"+c);b.getElementsByClassName("bundle-body")[0].classList.add("bundle-"+c);a=Date.now()+""+a;b.getElementsByClassName("highlight-anchor").length&&b.getElementsByClassName("highlight-anchor")[0].setAttribute("href",
"#highlights"+a);b.getElementsByClassName("highlight-body")[0].setAttribute("id","highlights"+a)}),F.matches){C=d.find(".header.hidden-sm");E=d.find(".top-icons .tile");F=d.find(".bottom-icons .tile");G=d.find(".aboveHeader");z=d.find(".abovePrices");H=d.find(".aboveTiles");var N=p(C),I=p(G),K=p(z),J=p(H),Q=p(E),S=p(F);n(I,G);n(K,z);n(J,H);n(N,C);n(Q,E);n(S,F);h(d)}else k(),a(g).find(".bundle-body").removeClass("in"),a(g).find(".big-bundle").removeClass("openned"),a(E).closest(".box").find(".mobile-header").addClass("openned"),
a(E).addClass("collapse in").removeAttr("style")}var l={},m=window.matchMedia("(max-width: 767px)").matches;l.load=function(a){a.each(k)};f.register({name:"compare-products",api:l,selector:".compare-products"})})(VMJS,VMJSjQuery);
(function(f,a){function h(c,f){c=window.matchMedia("(max-width: 767px)").matches;f=a(".cv-props-wrapper");f.hasClass("cvp-full-overlay")&&e();f.hasClass("cvp-desktop-accordion")&&(c?d():b())}function e(){a("#cv-props-overlay").on("shown.bs.modal",function(b){b=a(b.relatedTarget).attr("href");"undefined"!==typeof b&&(b=a(b).position(),a("#cv-props-overlay").scrollTop(b.top))})}function d(){var b=a("#cv-props-overlay");a(".cv-props-item a").attr("data-toggle","modal");b.on("show.bs.modal",function(b){var c=
a(b.relatedTarget).attr("href");c=a(c).html();a(b.relatedTarget).addClass("cvp-opened");a(".modal-body .container-fluid").html(c)});b.on("hide.bs.modal",function(){a(".cvp-desktop-accordion").find(".cvp-opened").removeClass()});a(".cvp-footer-close span").click(function(){b.modal("hide")})}function b(){a(".cv-props-item a").click(function(b){b.preventDefault();b=a(".cvp-desktop-accordion").find(a(this).attr("href"));b.hasClass("hidden")&&(c(),b.removeClass("hidden"),a(this).addClass("cvp-opened"),
a(".cvp-accordion-body").slideDown("fast",function(){a(this).addClass("cvp-accordion-opened")}))});a(".cvp-footer-close span, .cvp-footer-close-icon").click(function(){c()})}function c(){var b=a(".cvp-accordion-body.cvp-accordion-opened");b.hide();b.find(".cv-props-content").addClass("hidden");b.removeClass("cvp-accordion-opened");a(".cvp-desktop-accordion").find(".cvp-opened").removeClass()}f.register({name:"cable-value-props-overlay",api:{load:function(a){a.each(h)}},selector:".cable-value-props-overlay"})})(VMJS,
VMJSjQuery);(function(f,a){var h={},e=common.cmsUtils;h.init=function(d){(d=/[?&]postcode=([^&#]*)/.exec(window.location.href))?a(".dyn-postcode").append(e.getFormattedPostcode(d[1])):(d=jQuery.cookie("cms.vm.user")?JSON.parse(jQuery.cookie("cms.vm.user")):null)&&d.currentAddress&&a(".dyn-postcode").append(e.getFormattedPostcode(d.currentAddress.postcode))};f.register({name:"dynamic-postcode",api:h,selector:".dynamic-postcode"})})(VMJS,VMJSjQuery);
(function(f,a){function h(d,b){d=a(b).find(".timer");var c=d.data("expiryDate"),g,f=new Date;void 0!==c&&((g=c.match(/^(\d{2})\/(\d{2})\/(\d{4})$/))?(g=new Date(g[3]+"-"+g[2]+"-"+g[1]),g.setDate(g.getDate()+1),g.setMinutes(g.getMinutes()+g.getTimezoneOffset())):g=void 0);f<g?e(a(b),d,g):0<a(b).find(".author-edit").length&&a(b).css("display","block")}function e(a,b,c){a.css("display","block");a.find(".countdownHolder").countDownAnimate({timestamp:c.getTime(),callback:function(b,c,d,e){var g=a.find(".last-day-text"),
f=a.find(".general-text");1>b?g.is(":visible")||g.show():f.is(":visible")||f.show();0===b&&0===c&&0===d&&0===e&&a.remove()}})}f.register({name:"flash-countdown-clock",api:{load:function(a){a.each(h)}},selector:".flash-countdown-clock"})})(VMJS,VMJSjQuery);
(function(f,a){f.register({name:".page-takeover-gap",api:{load:function(f){!a('meta[property\x3d"og:image"]').attr("content")&&f&&(f=a(a(f[0]).find("img")[0]).attr("src"),a("meta[property\x3d'og:site_name']").after("\x3cmeta property\x3d'og:image' content\x3d'"+f+"'/\x3e"),a("meta[name\x3d'twitter:card']").after("\x3cmeta name\x3d'twitter:image' content\x3d'"+f+"'/\x3e"))}},selector:".page-takeover-gap"})})(VMJS,VMJSjQuery);
(function(f,a){function h(e,d){e=a(d);var b=e.find(".generic-sticky-wrapper");if(!b.hasClass(".author-mode")){a.fn.isInViewport=function(){var b=a(this).offset().top+a(this).outerHeight(),c=a(window).scrollTop();return b>c};var c=e.prev(),g=b.outerHeight();0===c.length&&0<e.parents(".mobile-desktop-only-wrapper").length&&(c=e.parents(".mobile-desktop-only-wrapper").prev());a(window).on("resize scroll",function(){c.isInViewport()?(b.hide(),a("body").css("padding-bottom","")):(b.show(),a("body").css("padding-bottom",
g))})}}f.register({name:"generic-sticky-component",api:{load:function(a){a.each(h)}},selector:".generic-sticky-component"})})(VMJS,VMJSjQuery);
(function(f,a){function h(g,f){function h(a){a=c(a);localStorage.setItem("storedSearchTerm",a);window.location=window.location.origin+D}function k(){""!==p.val()&&(p.val(""),t.hide(),m(p),u.hide())}function m(a){a=c(a.val());3<=a.length&&t.length?e(A,a).then(function(a){0<a.hits.length?(a=Handlebars.compile(B)(a),y.hasClass("hidden")||t.html(a).show()):t.hide()},function(){}):t.hide()}var n=a(f);g=localStorage.getItem("storedSearchTerm");var p=n.find(".helpSearchField"),t=n.find(".search-suggestions"),
B=a("#search-suggestions-hbs").html(),u=n.find(".clear-search"),A=p.data("suggestions-api"),y=n.find(".bg-search-modal");f=n.find(".search-form");var D=f.data("results-page"),w=n.find(".btn-search"),r;p.on("focus",function(){d(!0,n,p)});p.on("keyup change",function(){0<a(this).val().length?u.show():u.hide()});p.on("keyup change",b(function(){var b=c(a(this).val());b!==r&&(r=b,m(p))},350));a(document).keydown(function(a){27===a.which&&(d(!1,n,p),k());9===a.which&&(a=p.val().length,3>a&&0<a&&p.is(":focus")&&
(d(!1,n,p),t.hide(),p.next("label").addClass("hidden")),0===a&&p.is(":focus")&&(d(!1,n,p),k()))});u.on("click",function(){d(!1,n,p);k()});a("body").on("click",".bg-search-modal",function(){d(!1,n,p);k()});p.on("keyup",function(a){13===a.which&&""!==p.val()&&h(p.val())});w.on("click",function(){""!==p.val()&&h(p.val())});f.on("click",".suggested-term",function(){h(a(this).text())});a("body").on("click",".didyoumean-term",function(){h(a(this).text())});g&&-1<window.location.href.indexOf(D)&&(p.val(decodeURIComponent(g).replace(/\+/g,
" ")),p.next("label").addClass("hidden"))}function e(a,b){b=encodeURIComponent(b);return common.AsyncService.ajaxPromise({method:"GET",url:a+"?q\x3d"+b+"\x26track\x3dfalse"})}function d(b,c,d){var g=c.parents(".page-takeover-gap");c=c.find('label[for\x3d"helpSearchField"]');!0===b?(g.addClass("search-modal-visible"),0===a(".bg-search-modal").length&&g.prepend(a('\x3cdiv class\x3d"bg-search-modal"\x3e\x3c/div\x3e')),c.addClass("hidden")):(g.find(".bg-search-modal").remove(),g.removeClass("search-modal-visible"),
d.blur(),c.removeClass("hidden"))}function b(a,b,c){var d;return function(){var g=this,e=arguments,f=c&&!d;clearTimeout(d);d=setTimeout(function(){d=null;c||a.apply(g,e)},b);f&&a.apply(g,e)}}function c(a){var b={"\x3c":"\x26lt;","\x3e":"\x26gt;","%3C":"\x26lt;","%3E":"\x26gt;"};return a.replace(/(<|>|%3C|%3E)/g,function(a){return b[a]})}f.register({name:"search-banner",api:{load:function(a){a.each(h)}},selector:".search-banner"})})(VMJS,VMJSjQuery);
(function(f,a){function h(g,f){var h=a(f),k=common.cmsUtils,m=h.find(".search-results-list"),n=h.find("#search-results-hbs").html();g=a(f).data("results-api");var p=a(f).data("results-per-page"),t=a(f).data("help-error-page"),B=a(f).data("search-results-page"),u=localStorage.getItem("storedSearchTerm");f=k.getParametersFromUrl().page||"1";var A=h.find(".search-results-found"),y=h.find(".search-results-didyoumean"),D=h.find(".search-results-not-found");k=/((\d{6}))/;var w=/@/;if(!u||h.hasClass(".author-mode"))return!1;
if(k.test(u)||w.test(u)){var r=u.split(" ");for(var x=0;x<r.length;x++)if(k.test(r[x])||w.test(r[x])){var C=Array(r[x].length).join("*");r[x]=C}r=r.join(" ")}c(g,u,r,p,f).then(function(a){if(0<a.total){b(u,A);e(A,p,a);A.removeClass("hidden");var c=Handlebars.compile(n)(a);m.html(c);1<a.pagination.numPages&&d(h,a,B,u,p)}if(0===a.total&&a.suggestions&&!0===a.suggestions.didyoumean.assumed){c=Handlebars.compile(n)(a.suggestions.didyoumean.result);u=a.suggestions.didyoumean.text;var g=h.find("#search-didyoumean-term").html(),
f={text:a.suggestions.didyoumean.text,url:B+"?q\x3d"+u};g=Handlebars.compile(g)(f);f=a.suggestions.didyoumean.result;b(u,y);e(y,p,f);m.html(c);y.find(".sr-grey-box").append(g);y.removeClass("hidden");1<f.pagination.numPages&&d(h,f,B,u,p)}0!==a.total||a.suggestions||(b(u,D),D.removeClass("hidden"),h.parents("body").find(".help-no-results-parsys").removeClass("hidden"))},function(){window.location=window.location.origin+t})}function e(a,b,c){var d=c.total;c=c.pagination.current;b={total:d,from:(c-1)*
b+1,to:c*b>d?d:c*b};d=a.find(".showing-results-no script").html();b=Handlebars.compile(d)(b);a.find(".showing-results-no").html(b).removeClass("hidden")}function d(a,b,c,d,e){var g=5;d=b.pagination.current;b=b.pagination.numPages;var f=[];e={next:{url:c+"?page\x3d"+(d+1),disabled:"",results:e},prev:{url:c+"?page\x3d"+(d-1),disabled:""}};var h=Math.floor(g/2),k=d-h+1-g%2;h=d+h;g>b&&(g=b);0>=k&&(k=1,h=g);h>b&&(k=b-g+1,h=b);for(g=k;g<=h;)g===d?f.push({text:g,url:""}):f.push({text:g,url:c+"?page\x3d"+
g}),g++;d===b?(e.next.disabled="disabled",e.next.url=""):1===d&&(e.prev.disabled="disabled",e.prev.url="");c={buttons:e,items:f};d=a.find("#results-pagination-hbs").html();c=Handlebars.compile(d)(c);a.find(".results-pagination").html(c).removeClass("hidden")}function b(a,b){var c=b.find(".sr-title script").html();a=Handlebars.compile(c)(decodeURIComponent(a).replace(/\+/g," "));b.find(".sr-title").html(a).removeClass("hidden")}function c(a,b,c,d,e){"undefined"!==typeof c&&(b=c);return common.AsyncService.ajaxPromise({method:"GET",
url:a+"?q\x3d"+b+"\x26track\x3dfalse\x26size\x3d"+d+"\x26page\x3d"+e})}f.register({name:"search-results",api:{load:function(a){a.each(h)}},selector:".search-results-wrapper"})})(VMJS,VMJSjQuery);
(function(f,a){function h(d,b){function c(a){a.each(function(){var b=h.val();p.addClass("hidden");if(1<b.length){var c=a.filter(':containsLower("'+b+'")');c.addClass("selected-country");g(c,b)}else l.html(a.removeClass("selected-country"));a.filter(':containsLower("'+b+'")').length?p.addClass("hidden"):p.removeClass("hidden")})}function g(b,c){b=b.sort(function(a,b){return a.textContent.toUpperCase()<b.textContent.toUpperCase()?-1:1}).slice(0,5);b.each(function(){var b=a(this).text(),d=b.toLowerCase().indexOf(c.toLowerCase());
d=b.substring(d,c.length+d);b=b.replace(new RegExp(d,"i"),"\x3cb\x3e"+d+"\x3c/b\x3e");d=a(this).children("img");a(this).html("\x3cspan\x3e"+b+"\x3c/span\x3e").append(d)});l.html(b)}function f(){""!==h.val()&&(h.val(""),c(m),n.hide())}d=a(b).find(".roaming-help-search-wrapper");b=d.find(".search-group");var h=d.find(".roaming-search-input"),l=d.find(".roaming-countries"),m=l.find(".country"),n=d.find(".clear-search"),p=d.find(".country-error-message"),t,B;a.expr[":"].containsLower=function(a,b,c){if(""===
c[3])return!1;b=new RegExp("(^"+c[3].toUpperCase()+")");return null!=a.textContent.toUpperCase().trim().match(b)};h.on("focus",function(){e(!0,h)});n.on("click",function(){e(!1,h);f();p.addClass("hidden")});a("body").on("click",".bg-search-modal",function(){e(!1,h);f();p.addClass("hidden")});h.on("keyup",function(b){b=b.which||b.keyCode;37!==b&&38!==b&&39!==b&&40!==b&&(c(m),0<a(this).val().length?n.show():n.hide())});b.on("keyup",function(a){a=a.which||a.keyCode;var b=l.find(".selected-country");
27===a&&(e(!1,h),f(),p.addClass("hidden"));40===a?t?(t.blur(),B=t.next(),t=0<B.length?B.focus():b.eq(0).focus()):t=b.eq(0).focus():38===a&&(t?(t.blur(),B=t.prev(),t=0<B.length?B.focus():b.last().focus()):t=b.last().focus());39===a&&n.focus();37===a&&h.focus()});a(window).bind("pageshow",function(a){a.originalEvent.persisted&&window.location.reload()})}function e(d,b){var c=b.closest(".page-takeover-gap"),g=b.siblings(".search-placeholder");!0===d?(a("body").addClass("search-no-scroll"),c.addClass("search-modal-visible"),
0===a(".bg-search-modal").length&&c.prepend(a('\x3cdiv class\x3d"bg-search-modal"\x3e\x3c/div\x3e')),g.addClass("hidden")):(a("body").removeClass("search-no-scroll"),c.find(".bg-search-modal").remove(),c.removeClass("search-modal-visible"),b.blur(),g.removeClass("hidden"))}f.register({name:"roaming-search-banner",api:{load:function(a){a.each(h)}},selector:".roaming-search-banner"})})(VMJS,VMJSjQuery);
(function(f,a){f.register({name:"usp-banner",api:{init:function(f){f.each(function(){var e=a(this).find(".usp-list-carousel"),d=e.data("show-arrows"),b=e.data("auto-transition"),c=e.data("items-length");e.owlCarousel({navText:["\x3ci class\x3d'fa fa-angle-left'\x3e\x3c/i\x3e","\x3ci class\x3d'fa fa-angle-right'\x3e\x3c/i\x3e"],nav:d,responsive:{0:{items:1,loop:b,autoplay:b,autoplayTimeout:3E3},992:{items:c}},lazyLoad:!0,slideBy:1})})}},selector:".usp-banner-inner"})})(VMJS,VMJSjQuery);
(function(f,a){function h(d,b,c,g,e){d.on("change",function(){c.hide();g.show();d.is(":checked")?g.removeClass("disabled"):g.addClass("disabled");a(this).parent().hasClass("not-a-customer-label")?b.prop("checked",!1):e.prop("checked",!1)})}function e(d,b,c,g,e,f,h,m){d.on("click",function(k){if(b.is(":checked")||c.is(":checked"))g.is(":checked")||(k.preventDefault(),e.show(),m.hide(),a("html, body").animate({scrollTop:"0px"},100));else if(g.is(":checked")||h.is(":checked"))k.preventDefault(),f.show(),
d.hide()})}f.register({name:"customer-eligibility",api:{init:function(d){d.each(function(){var b=a(this),c=b.find(".customer-eligibility-wrapper"),d=b.find(".customer-eligibility-label"),f=d.find("input");d=d.not(".not-a-customer-label").find("input");var q=b.find(".tv-label input"),l=b.find(".broadband-label input"),m=b.find(".mobile-label input"),n=b.find(".not-a-customer-label input"),p=b.closest(".lgi-main-wrapper").find(".tariff-table"),t=b.find(".expandable-box"),B=b.find(".expandable-cta-primary a");
c.hasClass("publish-mode")&&p.hide();f.prop("checked",!1);h(f,d,t,B,n);e(B,q,l,m,p,t,n,b)})}},selector:".customer-eligibility"})})(VMJS,VMJSjQuery);
(function(f,a){var h={},e=function(d){var b=d.find(".items-list-carousel"),c={navText:["\x3ci class\x3d'fa fa-angle-left'\x3e\x3c/i\x3e","\x3ci class\x3d'fa fa-angle-right'\x3e\x3c/i\x3e"],autoplayTimeout:3E3,responsive:{0:{items:1,stagePadding:55},768:{items:2,stagePadding:65}},lazyLoad:!0,slideBy:1};992>a(window).width()?b.owlCarousel(c):b.addClass("off");a(window).resize(function(){992>a(window).width()?b.hasClass("off")&&(b.owlCarousel(c),b.removeClass("off")):b.hasClass("off")||(b.addClass("off").trigger("destroy.owl.carousel"),
b.find(".owl-stage-outer").children(":eq(0)").unwrap())})};h.init=function(d){d.each(function(){e(a(this))})};f.register({name:"icons-banner",api:h,selector:".icons-banner-inner"})})(VMJS,VMJSjQuery);
(function(f,a){function h(e){var d=a(e).find(".rte-content");d.find("table").each(function(b,c){a(c).wrap("\x3cdiv class\x3d'table-wrapper'\x3e\x3cdiv class\x3d'table-wrapper-inner'\x3e\x3c/div\x3e\x3c/div\x3e");b=a(c).parent();a(c).clone(!0).appendTo(b).addClass("clone");d.find(".clone th:first-child, .clone td:first-child").addClass("fixed-side")})}f.register({name:"rte-table-scroll",api:{load:function(a){h(a)}},selector:".rte-table-scroll"})})(VMJS,VMJSjQuery);
(function(f,a){function h(e,d){e=a(d);d=window.location.pathname;var b=e.find(".breadcrumb li.active"),c;e.find(".breadcrumb li a").each(function(){"Category"===a(this).text().trim()&&(c=a(this))});"Category"===b.text().trim()?sessionStorage.setItem("categoriesBrVal",d):c?(e=c.attr("href"),c.attr("href",sessionStorage.getItem("categoriesBrVal")||e)):sessionStorage.removeItem("categoriesBrVal")}f.register({name:"cl-breadcrumbs",api:{load:function(a){a.each(h)}},selector:".cl-breadcrumbs"})})(VMJS,
VMJSjQuery);
(function(f,a){function h(){var e=a(".smart-banner-section"),d=a(".banner-cross"),b=a(".androidCta"),c=a(".iosCta"),g=navigator.userAgent||navigator.vendor,f=/android/i.test(g);g=/iPad|iPhone|iPod/.test(g)&&!window.MSStream;e.hasClass("author-mode")||!f&&!g||(e.removeClass("hidden"),a("body").prepend(a(".smart-banner")),a(d).on("click",function(){e.addClass("hidden")}),g&&(c.removeClass("hidden"),b.addClass("hidden")),f&&(c.addClass("hidden"),b.removeClass("hidden")))}f.register({name:"smart-banner",api:{load:function(a){a.each(h)}},
selector:".smart-banner"})})(VMJS,VMJSjQuery);
(function(f,a){function h(c,d){var f=a(d).find(".ace-calendar-wrapper"),h=f.closest("form");c=f.data("offset-days");d=f.data("last-date");var p=g(d)||f.data("total-days")||60;d=f.data("include-saturdays");var m=f.data("include-sundays"),q=f.data("allow-saturdays-booking"),n=f.data("allow-sundays-booking"),y=f.data("non-working-days-list");if(-1<window.location.href.indexOf("urlUID\x3d")||-1<window.location.href.indexOf("urluid\x3d"))p=l(window.location.href),0<p.length?(c=p[1],p=p[0]):p=0;p=k(p,f);
t=f.data("display-days");B=b(c,p,d,m,y,q,n);u=f.find("input.ace-calendar-appointment-date");A=f.find("input.ace-calendar-appointment-slot");if(h.hasClass("dyn-form-ready"))e(f,h);else h.on("dynFormReady",function(){e(f,h)})}function e(a,b){b.hasClass("dyn-form-ready-repopulated")&&null!==u.val()&&null!==A.val()&&(b=B.map(function(a){return a.value}).indexOf(u.val()),-1!==b&&(n=Math.floor(b/t)*t,p=!0));d(a)}function d(b){var d=b.find(".owl-carousel"),g=d.find("script").html(),e=b.data("has-time-slot2"),
f=b.data("has-time-slot3");g=Handlebars.compile(g)({hasTimeSlot2:e,hasTimeSlot3:f,futureDatesArr:B});switch(parseInt(t)){case 7:e=37;break;case 8:e=25;break;case 9:e=10;break;default:e=20}d.html(g).owlCarousel({mouseDrag:!1,loop:!1,responsiveClass:!0,nav:!0,smartSpeed:100,startPosition:n,slideBy:t,navContainer:d.parent().find(".calendar-carousel-nav"),navText:["\x3ci class\x3d'fa fa-angle-left'\x3e\x3c/i\x3e","\x3ci class\x3d'fa fa-angle-right'\x3e\x3c/i\x3e"],responsive:{0:{items:3,margin:10},768:{items:5,
margin:20},1024:{items:6,margin:20},1200:{items:t,margin:e}},onInitialized:function(a){if(p){var d=u.val()+"_"+A.val();d=b.find('input[value\x3d"'+d+'"]');d.closest(".date-item").find(".date-header").addClass("selected");d.prop("checked",!0)}c(a)},onTranslated:function(a){c(a)},onResized:function(a){c(a)}});d.find("input").on("change",function(){d.find(".date-header.selected").removeClass("selected");a(this).closest(".date-item").find(".date-header").addClass("selected");var b=a(this).val().split("_");
u.val(b[0]).trigger("blur");A.val(b[1]).trigger("blur")})}function b(a,b,c,d,g,e,f){for(var h=[],k=0;k<b;k++){var l=(new moment).add(a+k,"day"),p=l.format("DD/MM/YYYY"),m=l.day();(0===m&&d||6===m&&c||0!==m&&6!==m)&&h.push({date:l.date(),day:l.format("ddd"),value:p,correspondingMonth:l.format("MMMM"),disabled:-1!==g.indexOf(p)||0===m&&!1===f||6===m&&!1===e})}return h}function c(b){var c=a(b.target),d=[];b=c.parents("fieldset").find(".visible-month");c.find(".owl-item.active").each(function(){var b=
a(this).find(".date-item").data("corresponding-month");d.push(b)});c=d.filter(function(a,b,c){return c.indexOf(a)==b});b.html(c.join(" / "))}function g(a){try{var b=a.substring(a.indexOf(",")+2).split("/"),c=moment().format("MM/DD/YYYY"),d=Math.ceil((new Date(b[1]+"/"+b[0]+"/"+b[2])-new Date(c))/864E5)+1;return 0!==d?d:-1}catch(x){}}function k(a,b){return 1>a?(b.find(".dyn-form-calendar-group")[0].style.display="none",b.find(".ace-calendar-error-message")[0].classList.remove("hidden"),0):a}function q(a,
b){var c;var d=0;for(c=a.length;d<c;d++){var g=a.charCodeAt(d);if("alfanumeric"===b){if(!(47<g&&58>g||64<g&&91>g||96<g&&123>g))return!1}else if("numeric"===b){if(!(47<g&&58>g))return!1}else return!1}return!0}function l(a){var b=decodeURI(a).replaceAll("-","");b=-1<a.indexOf("urlUID\x3d")?b.split("urlUID\x3d"):b.split("urluid\x3d");var c=!0,d=b[1].substring(0,10),g=b[1].substring(b[1].length-3,b[1].length);a=b[1].substring(b[1].length-9,b[1].length-3);var e=b[1].substring(b[1].length-11,b[1].length-
9);b=b[1].substring(b[1].length-13,b[1].length-11);return(c=(c=(c=(c=(c=c&&q(d,"alfanumeric"))&&q(g,"numeric"))&&q(a,"numeric"))&&q(b,"numeric"))&&q(e,"numeric"))?(c=parseInt(g)-e+1,b=parseInt(b),a=[a.slice(0,2),a.slice(2,4),a.slice(4,6)],d=moment().format("MM/DD/YYYY"),a=Math.ceil((new Date(a[1]+"/"+a[2]+"/"+a[0])-new Date(d))/864E5),0>a+c?c=0:0>a?c=c+a-b:(c-=b,b=a+b),[c,b]):[]}var m={},n=0,p=!1,t,B,u,A;m.load=function(a){a.each(h)};f.register({name:"ace-calendar",api:m,selector:".ace-calendar"})})(VMJS,
VMJSjQuery);
(function(f,a){function h(e,d){e=a(d).find(".mobile-price-rise-calculator");a(e).submit(function(b){b.preventDefault();var c=a(this).find(".monthly-tariff-value"),d=a(this).find(".monthly-increase-value");b=a(this).find(".monthly-total-value");var e=a(this).find(".currency-icon");c=parseFloat(c.val()).toFixed(2);d=parseFloat(d.text());d=parseFloat(c*d/100);c=Math.floor(100*parseFloat(Number(c)+Number(d)))/100;isNaN(c)||(b.html(parseFloat(c).toFixed(2)),e.addClass("active-value"))})}f.register({name:"price-calculator",api:{load:function(a){a.each(h)}},
selector:".price-calculator"})})(VMJS,VMJSjQuery);
(function(f,a){function h(e,d){function b(a){a.matches&&l.css("padding",p)}function c(a){a.matches&&l.css("padding",n)}function g(a){a.matches&&l.css("padding",m)}e=window.matchMedia("(max-width: 767px)");var f=window.matchMedia("(min-width: 768px) and (max-width: 991px)"),h=window.matchMedia("(min-width: 992px)"),l=a(d).find(".spacer-container-wrapper"),m=l.data("desktoppadding"),n=l.data("tabletpadding"),p=l.data("mobilepadding");b(e);c(f);g(h);e.addListener(b);f.addListener(c);h.addListener(g)}
f.register({name:"spacer-component",api:{load:function(a){a.each(h)}},selector:".spacer-component"})})(VMJS,VMJSjQuery);
(function(f,a){function h(g,e){var f=a(e).find(".address-picker-wrapper"),h=f.find(".dyn-form-field-search"),k=f.find("input[name\x3dPostcode]"),n=f.find(".address-picker-list"),p=n.find("script"),t=f.data("endpoint"),B=f.find(".address-fields"),u=f.find(".enter-manually");c=sessionStorage.getItem("storeDomainServiceability");var A=function(b){n.find("select").on("change",function(){a(this).toggleClass("has-value",""!==a(this).val());var c=a(this).find(":selected").val(),d=B.find("input.ace-form-field");
a(d[0]).val(b[c].streetNumber);a(d[1]).val(b[c].street);a(d[2]).val(b[c].town);a(d).each(function(){a(this).trigger("change").attr("readonly",!0)});B.removeClass("hidden");n.addClass("hidden")})};(function(){k.off("keypress").on("keypress",function(a){13==a.which&&h.trigger("click")});h.off("click").on("click",function(){k.trigger("change");var a={GetAddressRequest:{postcodeSearch:[{postcode:k.val()}],returnFormattedDisplayAddress:"true"}};if(k.parents(".form-group").hasClass("has-error")||""===k.val())return!1;
d.callAPI(c+t.endpointUrl,t.httpMethod,a,!0,t.xhr,t.isAkanaEndpoint).then(function(a){a=a.GetAddressResponse.success.searchResult[0].addresses||[];var c=p.html();c=Handlebars.compile(c)(a);n.html(c);c=n.find(".ace-dropdown");c.select2({placeholder:c.data("placeholder"),theme:"ace form-control",minimumResultsForSearch:Infinity,dropdownParent:c.closest(".form-group"),width:"style"});B.addClass("hidden");n.removeClass("hidden");b.hideBannerMessages();A(a)}).fail(function(a){b.handleApiErrors({apiLabel:t.apiLabel,
xhr:a},f,"error",!1,!0,!1)})})})();(function(){u.on("click",function(){var b=a(this),c=b.data("enter-text"),d=b.data("cancel-text");b.hasClass("enter-manually-cancel")?(b.text(c),B.addClass("hidden"),B.find("input.ace-form-field").each(function(){a(this).val("").attr("readonly",!0)}),h.removeClass("hidden")):(b.text(d),B.removeClass("hidden"),B.find("input.ace-form-field").each(function(){a(this).val("").removeAttr("readonly").removeClass("has-value")}),h.addClass("hidden"),k.val("").removeClass("has-value"));
a(this).toggleClass("enter-manually-cancel");n.addClass("hidden")})})()}var e={},d=common.Utils,b=common.dynFormUtils,c;e.load=function(a){a.each(h)};f.register({name:"address-picker",api:e,selector:".address-picker"})})(VMJS,VMJSjQuery);var VMCSJT={};
(function(f,a){function h(a){var b="";a&&(b+=""+a.page,b+="|"+a.tabID,b+="|"+a.formID,b+="|"+a.section);return b}function e(b,d){var g=a(d),e="undefined"!==typeof CQ&&CQ.WCM&&CQ.WCM.isEditMode();n=g;k=sessionStorage.getItem("storeDomainServiceability");q=sessionStorage.getItem("keyStoreDomain");"true"===sessionStorage.getItem("storeDomainParamExists")&&(a("#store-domain-info").html("env\x3d"+q),a("#store-domain-info").removeClass("hidden"));c.getJourneyConfig("apis-section").then(function(a){l=c.getApiByID(a,
"serviceability_get");m=c.getApiByID(a,"basket_get");VMCSJT.initJourney(g,e)})}function d(b,c){var d=a("body");d.hasClass("csj-tracking-fired")?d.toggleClass("csj-tracking-fired"):e(b,c)}var b={},c=common.Utils,g=common.dynFormUtils,k,q,l,m,n;VMCSJT.journey={map:{tabs:[]},position:{page:null,tabID:null,formID:null},cache:{},flags:{showEditOpen:!1},utils:{}};VMCSJT.journeyMisc={};a.extend(!0,VMCSJT.journey,JSON.parse(window.sessionStorage.getItem("journeyMap"))||{});a.extend(!0,VMCSJT.journeyMisc,
JSON.parse(window.sessionStorage.getItem("journeyMisc"))||{});VMCSJT.journey.utils.trimMap=function(b,c){var d=VMCSJT.journey.map.tabs.indexOf(b);d=-1===d?VMCSJT.journey.map.tabs.length:d+1;VMCSJT.journey.map.tabs.splice(d,VMCSJT.journey.map.tabs.length);a.each(VMCSJT.journey.map,function(a,d){"tabs"!==a&&(-1!==VMCSJT.journey.map.tabs.indexOf(a)?a===b&&(a=d.forms.indexOf(c),a=-1===a?d.forms.length:a+1,d.forms.splice(a,d.forms.length),d.titles.splice(a,d.titles.length)):delete VMCSJT.journey.map[a])});
VMCSJT.journey.utils.updateStoredJourney("map")};VMCSJT.journey.utils.cacheTab=function(a){var b=a.prop("id").substr(10);VMCSJT.journey.cache[b]=a.detach()};VMCSJT.journey.utils.updateMap=function(a){var b=a.closest(".tab-container").prop("id").substr(10),c=a.prop("id");null===VMCSJT.journey.position.tabID&&(VMCSJT.journey.position.tabID=b,VMCSJT.journey.utils.updateStoredJourney("position"));null===VMCSJT.journey.position.formID&&(VMCSJT.journey.position.formID=c,VMCSJT.journey.utils.updateStoredJourney("position"));
-1===VMCSJT.journey.map.tabs.indexOf(b)&&(VMCSJT.journey.map.tabs.push(b),VMCSJT.journey.map[b]={forms:[],titles:[]});-1===VMCSJT.journey.map[b].forms.indexOf(c)&&(VMCSJT.journey.map[b].forms.push(c),VMCSJT.journey.map[b].titles.push(a.data("page-title")));VMCSJT.journey.utils.updateStoredJourney("map")};VMCSJT.journey.utils.repopulateTabForms=function(b,c){var d=window.sessionStorage.getItem("journeyData");g.encryptDecryptStoredData("decryption",d).then(function(d){var e=JSON.parse(d)||[];e.length&&
a.each(b,function(b,c){b=a(c);c=b.prop("id");c=g.getFormDataIndexById(c,e);-1!==c?g.setFormValues(b,e[c].formData):b.addClass("dyn-form-ready").trigger("dynFormReady")});delete VMCSJT.journey.flags.requiresRepopulating;VMCSJT.journey.utils.updateStoredJourney("flags");c()})};VMCSJT.journey.utils.checkFormSkip=function(b,c,d,e,f,h,k){var l=e.data("skip-form-if");l?g.checkSkipElementCriteria(l).then(function(l){l?(l=a.extend({},{aftersubmit:e.data("aftersubmit"),nextformid:e.data("nextformid"),nexttabid:e.data("nexttabid"),
redirecturl:e.data("redirecturl")}),e.closest(".snippet-importer").remove(),g.afterSubmitAction(null,l,!0,d,k)):VMCSJT.journey.utils.finalizeJump(b,c,e,f,h,k)}):VMCSJT.journey.utils.finalizeJump(b,c,e,f,h,k)};VMCSJT.journey.utils.finalizeJump=function(a,b,c,d,g,e){VMCSJT.journey.position.tabID=a;VMCSJT.journey.position.formID=b;VMCSJT.journey.utils.updateStoredJourney("position");VMCSJT.journey.utils.setShowEditState(c);g&&c.addClass("dyn-form-ready").trigger("dynFormReady");c.removeClass("hidden").trigger("dynFormVisible");
VMCSJT.journey.utils.scrollToTop(d);"undefined"!==typeof e&&e()};VMCSJT.journey.utils.jumpToTarget=function(b,c,d,g){var e=d.prop("id").substr(10),h=d.closest(".snippet-tabs-wrapper");if(e===b||null===b){var k=d.find(".dyn-form"),l=c?a("#"+c):k.first();k.not(".hidden").addClass("hidden").trigger("dynFormHidden");b=b?b:e;c=c?c:l.prop("id");Stickyfill.add(a(".sticky-ie"));VMCSJT.journey.flags.requiresRepopulating?VMCSJT.journey.utils.repopulateTabForms(k,function(){VMCSJT.journey.utils.checkFormSkip(b,
c,d,l,h,!1,g)}):VMCSJT.journey.utils.checkFormSkip(b,c,d,l,h,!0,g)}else VMCSJT.journey.utils.getTargetTabData(b).then(function(e){var k=a(e);e=k.find(".dyn-form");e.not(".hidden").addClass("hidden").trigger("dynFormHidden");if(c)var l=e.filter("#"+c);else l=e.first(),c=l.prop("id");VMCSJT.journey.flags.requiresRepopulating?h.empty():VMCSJT.journey.utils.cacheTab(d);h.append(k);f.init();Stickyfill.add(a(".sticky-ie"));VMCSJT.journey.flags.requiresRepopulating?VMCSJT.journey.utils.repopulateTabForms(e,
function(){VMCSJT.journey.utils.checkFormSkip(b,c,k,l,h,!1,g)}):VMCSJT.journey.utils.checkFormSkip(b,c,k,l,h,!0,g)})};VMCSJT.journey.utils.getTargetTabData=function(b){if(VMCSJT.journey.cache[b])return a.Deferred().resolve(VMCSJT.journey.cache[b]);VMCSJT.journey.flags.requiresRepopulating=!0;return a.ajax({url:a("#"+b).data("resource-path")})};VMCSJT.journey.utils.updateStoredJourney=function(b){var c=JSON.parse(window.sessionStorage.getItem("journeyMap"));c||(c={},b="all");if("all"===b||"flags"===
b)c.flags=a.extend(!0,{},VMCSJT.journey.flags);if("all"===b||"position"===b){var d=h(c.position)!==h(VMCSJT.journey.position);c.position&&c.position.section&&d&&c.position.section===VMCSJT.journey.position.section&&(VMCSJT.journey.position.section=null);c.position=a.extend(!0,{},VMCSJT.journey.position);d&&n&&n.trigger("dynPositionChanged")}if("all"===b||"map"===b)c.map=a.extend(!0,{},VMCSJT.journey.map);window.sessionStorage.setItem("journeyMap",JSON.stringify(c))};VMCSJT.journey.utils.setShowEditState=
function(a){a.find(".dyn-form-show-edit-control").toggleClass("open",VMCSJT.journey.flags.showEditOpen)};VMCSJT.journey.utils.scrollToTop=function(b,c){var d=b.offset().top;!c&&window.matchMedia("(max-width: 1199px)").matches&&(d-=b.parent().find(".mini-bs-totals").outerHeight());a("html, body").animate({scrollTop:Math.ceil(d)},"slow")};VMCSJT.getShortUrl=function(a){return a.replace(/content\/virginmedia\/dotcom\/en\//g,"")};VMCSJT.setGlobalData=function(a,b){this[a]=b};VMCSJT.renderBasketSummary=
function(b,c,d,g){function e(b){b.off("click").on("click",".bs-more-less-cta span",function(c){var d=a(this).parent().prev(),g=b.find(".forms-modal");d.slideToggle("fast",function(){g.is(":visible")&&d.is(":visible")&&g.modal("handleUpdate")});d.parent().toggleClass("expanded")})}function f(a){a=a.find('[data-toggle\x3d"popover"]');a.length&&a.popover({html:!0,trigger:"focus",placement:"auto top",container:a.closest(".basket-summary-wrapper")})}var h="undefined"!==typeof CQ&&CQ.WCM&&CQ.WCM.isEditMode();
b&&(VMCSJT.basketSummaryTpl=b);c&&(VMCSJT.basketSummaryDiv=c);b=b?b:VMCSJT.basketSummaryTpl;c=c?c:VMCSJT.basketSummaryDiv;VMCSJT.apiData.isViewOnly=d;d=VMCSJT.apiData;var k=VMCSJT.serviceability,l={isAuthorMode:h};h||(h=d.basket.coreProducts.bb,l.apiData=d,l.serviceability=k,h&&(l.ds_min_speed=h.attributes.ds_min_speed,l.ds_range_lower=h.attributes.ds_range_lower,l.ds_range_upper=h.attributes.ds_range_upper,l.us_range_lower=h.attributes.us_range_lower,l.us_range_upper=h.attributes.us_range_upper));
b&&(h=Handlebars.compile(b)(l),a(c).html(h),e(a(c)),f(a(c)));g&&"function"===typeof g&&g()};VMCSJT.renderMiniBasketBasicInfo=function(a,b){a&&(VMCSJT.miniBasketSummaryTpl=a);a=a?a:VMCSJT.miniBasketSummaryTpl;a=Handlebars.compile(a)(VMCSJT.apiData);b.closest(".csjt-checkout-template").find(".mini-bs-basic-info").html(a)};VMCSJT.journey.utils.updateBasket=function(a){c.callAPI(k+m.endpointUrl,m.httpMethod,null,!1,m.xhr,m.isAkanaEndpoint).done(function(b){VMCSJT.setGlobalData("apiData",VMCSJT.parseBasketApiData(b));
VMCSJT.renderBasketSummary(null,null,!0,null);VMCSJT.renderMiniBasketBasicInfo(null,a)})};VMCSJT.parseBasketApiData=function(b,c){function d(a){var b=n.pricingLabels.genericLabel.genericZeroPriceLabel;n.pricingLabels.alternativeLabels.forEach(function(c){"undefined"!==typeof a&&c.productCode===a.code&&(b=c.alternativeLabel)});return b}function g(a){a.forEach(function(a){var b=0,c=a.priceJsonIndex?a.priceJsonIndex:0;a.price&&a.price.oneOff&&a.price.oneOff.length&&(b=Object.keys(a.price.oneOff[c])[0],
"payLater"===b?a.isPayLater=!0:"payNow"===b&&(a.isPayNow=!0),b=a.price.oneOff[c][b].price);a.displayPrice=0===parseFloat(b)?d(a):b;a.isFree=0===parseFloat(b)});return a}function e(a){var b=function(a){return a.map(function(a,b){delete a.quantity;a.price&&a.price.oneOff&&a.price.oneOff.length&&(a.priceJsonIndex=b);return a})};a.forEach(function(c){if(1<c.quantity){var d=a.indexOf(c),g=c.quantity,e=[];a.splice(d,1);for(d=1;d<=g;d++){var f=JSON.parse(JSON.stringify(c));e.push(f)}e=b(e);a=a.concat(e)}});
return a}function f(a,b){return a.filter(function(a){return a.attributes.service_category_code===b})}function h(b){var c={},d=[],g=1;b.discounts=b.discounts||[];for(var e=b.discounts.length,f=0;f<e;f++)if(d[f]={price:b.discounts[f].priceAfterDiscount},0===f)d[f].termInterval=b.discounts[f].term;else{g+=parseInt(b.discounts[f-1].term);var h=g===parseInt(b.discounts[f].term)+g-1?g:g+" - "+(parseInt(b.discounts[f].term)+g-1);d[f].termInterval=h}0===e?c.priceWithoutDiscounts=b.price:(d.forEach(function(a,
b){c["priceForPeriod"+(b+1)]=a.price;c["termForPeriod"+(b+1)]=a.termInterval}),c.priceAfterAllDiscounts=b.price);a.extend(b,c);return b}function k(a,b){var c=VMCSJT.basketAuthorData.rewardsConfig.groups.find(function(a){return a.rewardGroupIndex===b});return c&&c.rewards?c.rewards.find(function(b){return a.code===b.rewardCode}):null}function l(){var b=[];J.forEach(function(c){b.push(a.extend(!0,c,k(c,"rewards")))});Q.forEach(function(c){b.push(a.extend(!0,c,k(c,"rewards")))});S.forEach(function(c){b.push(a.extend(!0,
c,k(c,"rewards")))});return b}var m=[],n=c||VMCSJT.basketAuthorData;c=function(a){a.forEach(function(a){n.infoIcons.forEach(function(b){b.productCode===a.code&&(a.infoIconText=b.infoIconText)})});return a}(b.basket.items);var q=c.filter(function(a){return a.attributes.product_tier&&""!==a.attributes.product_tier}),p=c.filter(function(a){var b="wireless_option outlets bbu adaptor netflix ebul".split(" ");return!a.attributes.product_tier&&""!==a.name&&"discount"!==a.attributes.product_classification&&
!a.attributes.promo_classification&&!a.attributes.discount_action&&!b.includes(a.attributes.product_category)}),t=p.filter(function(a){return"sim_tariff"===a.attributes.product_category&&"Mobile"===a.attributes.product_platform})[0],z=e(c.filter(function(a){return!a.attributes.product_tier&&""!==a.name&&("wireless_option"===a.attributes.product_category||"bbu"===a.attributes.product_category||"adaptor"===a.attributes.product_category||"ebul"===a.attributes.product_category||"subscription"===a.attributes.product_classification)})),
H=e(c.filter(function(a){return"cableInstall"===a.attributes.product_classification||"setupCost"===a.attributes.product_classification})),N=c.filter(function(a){return"billing_item"===a.attributes.product_category})[0],I=c.filter(function(a){return"rewards"===a.attributes.product_group&&"APPLY_AS_CREDIT"!==a.attributes.discount_action&&"flash_sale"!==a.attributes.promo_classification})[0],K=c.filter(function(a){return"netflix"===a.attributes.product_category}),J=c.filter(function(a){return"flash_sale"===
a.attributes.promo_classification}),Q=c.filter(function(a){return"APPLY_AS_CREDIT"===a.attributes.discount_action&&"flash_sale"!==a.attributes.promo_classification}),S=c.filter(function(a){return"reward_extra"===a.attributes.promo_classification&&"flash_sale"!==a.attributes.promo_classification&&"APPLY_AS_CREDIT"!==a.attributes.discount_action});t&&(m=f(p,"D").filter(function(a){return a.code!==t.code}));I&&a.extend(!0,I,k(I,b.prices.bundle.rewardsGroup));return a.extend(!0,b,{basket:{billingItem:function(a){var b=
0;n.billingLabels.forEach(function(b){b.productCode===a.code?(a.name=b.productLabel,a.productType=b.productType):a.canSwitchTo=b.productCode});a.price&&a.price.monthly&&(b=a.price.monthly.discounts[0]&&a.price.monthly.discounts[0].priceAfterDiscount?a.price.monthly.discounts[0].priceAfterDiscount:a.price.monthly.price);a.displayPrice=0===parseFloat(b)?d(a):b;return a}(N),netflixProds:K,coreProducts:{tv:f(q,"C")[0],bb:f(q,"D")[0],ph:f(q,"T")[0],mobile:t},equipments:g(z),extras:{tv:f(p,"C"),bb:t?m:
f(p,"D"),ph:f(p,"T")},installAndSetup:function(a){function c(a,b){b=b.priceAfterDiscount?b.priceAfterDiscount:b.price;"undefined"!=typeof a&&(a.displayPrice=0===parseFloat(b)?d(a):b,a.isFree=0===parseFloat(b))}var e=a.filter(function(a){return"setupCost"===a.attributes.product_classification});e.length&&g(e);e=a.filter(function(a){return"cableInstall"===a.attributes.product_classification});var f=e.filter(function(a){return a.attributes.appntmnt_classification&&!a.attributes.install_priority})[0];
f&&c(f,b.prices.installationActivationCost);f=e.filter(function(a){return"Standard"===a.attributes.appntmnt_classification&&a.attributes.install_priority})[0];e=e.filter(function(a){return"Priority"===a.attributes.appntmnt_classification&&a.attributes.install_priority})[0];f&&e?(a.splice(a.indexOf(f),1),c(e,b.prices.installationCost)):c(f,b.prices.installationCost);return a}(H),selectedRewardInRewardsChooser:I?I:null,otherRewards:l(),shouldDisplayRewardsSection:I||0<b.basket.appliedCoupons.length||
0<l().length},prices:{bundle:{monthly:h(b.prices.bundle.monthly)},monthlyTotal:h(b.prices.monthlyTotal),oneOffTotal:function(a){a.isPayLater=!1;a.isPayNow=!1;a.isPayNowAndPayLater=!1;var b=a.payLater.priceAfterDiscount?a.payLater.priceAfterDiscount:a.payLater.price,c=a.payNow.priceAfterDiscount?a.payNow.priceAfterDiscount:a.payNow.price;0!==parseFloat(b)&&0!==parseFloat(c)?(a.isPayNowAndPayLater=!0,a.isPayLater=!0,a.isPayNow=!0):0!==parseFloat(b)?a.isPayLater=!0:a.isPayNow=!0;return a}(b.prices.oneOffTotal)}})};
VMCSJT.checkBasketContents=function(b){if("undefined"!==typeof CQ&&CQ.WCM&&CQ.WCM.isEditMode())return!1;var c=VMCSJT.apiData.basket.coreProducts.mobile,d=VMCSJT.apiData.basket.coreProducts.ph,g=VMCSJT.serviceability.phoneOverBB;switch(b){case "PhoneInBasket":return"undefined"!==typeof d;case "PhoneNotPresent":return"undefined"===typeof d;case "PhoneSolus":return"undefined"!==typeof d&&1===Object.keys(VMCSJT.apiData.basket.coreProducts).length;case "21CVpremise":return"undefined"!==typeof g&&!0===
g&&"undefined"!==typeof d&&0!==Object.keys(d).length;case "SIMPresent":return"undefined"!==typeof c&&0!==Object.keys(c).length;case "SIMNotPresent":return"undefined"===typeof c||0===Object.keys(c).length;case "NonIRIRIR":return 0<a.grep(VMCSJT.serviceability.statusDetails.serviceDetails,function(a){return"IR"===a.code}).length;case "irsFaceplatePremise":return!VMCSJT.serviceability.irsNoFaceplatePremise;case "QuickstartUnavailable":var e=a.Deferred();VMCSJT.getAppointments=VMCSJT.getAppointments.always(function(){var a=
VMCSJT.apiData.basket.installAndSetup.some(function(a){return"QuickStartInstallation"===a.attributes.install_type});e.resolve(VMCSJT.journeyMisc.hasAppointments&&!VMCSJT.journeyMisc.qsEligible||!a)});return e.promise();case "RealAppointments":var f=a.Deferred();VMCSJT.getAppointments=VMCSJT.getAppointments.always(function(){f.resolve(VMCSJT.journeyMisc.realAppointments)});return f.promise();case "GeneratedAppointments":var h=a.Deferred();VMCSJT.getAppointments=VMCSJT.getAppointments.always(function(){h.resolve(!VMCSJT.journeyMisc.realAppointments)});
return h.promise()}};VMCSJT.journey.utils.resumePreviousSession=function(b,c,d){var g=a("#cta-snippet-target"),e=VMCSJT.getShortUrl(b.data("page-path"))+"/"+VMCSJT.journey.position.page+"/jcr:content/mainParsys";a.ajax({url:e}).then(function(e){e=a(e);g.empty().append(e);f.init();c&&d?(e=e.find(".tab-container"),VMCSJT.journey.flags.requiresRepopulating=!0,VMCSJT.journey.utils.jumpToTarget(c,d,e,function(){b.height("").removeClass("csjt-checkout-template-empty")})):b.height("").removeClass("csjt-checkout-template-empty")})};
VMCSJT.initJourney=function(b,d){var e=function(a){var b=a.telephonyTechnologyTypes.filter(function(a){return"DOCSIS"===a});a.phoneOverBB=b.length?!0:!1;return a},f=function(){return a.when(common.AsyncService.ajaxPromise({method:"GET",url:"/services/api/csjt-icons-config"}),common.AsyncService.ajaxPromise({method:"GET",url:"/services/api/csjt-pricing-labels-config"}),common.AsyncService.ajaxPromise({method:"GET",url:"/services/api/csjt-billings-config"}),common.AsyncService.ajaxPromise({method:"GET",
url:"/services/api/rewards-config"})).then(function(a,b,c,d){return{infoIcons:a.icons,pricingLabels:b,billingLabels:c.productLabels,rewardsConfig:d}})};d?(VMCSJT.setGlobalData("serviceability",{}),VMCSJT.setGlobalData("apiData",{})):(b.height(window.innerHeight-a("#unified-header").height()-a("#unified-footer").height()),a(window).on("beforeunload",function(a){if("undefined"===typeof VMCSJT.journeyMisc.forceRedirect)return a.preventDefault(),a.returnValue="The information you have entered may be lost if you leave this page."}),
c.callAPI(k+l.endpointUrl,l.httpMethod,null,!1,l.xhr,l.isAkanaEndpoint).then(function(d){VMCSJT.setGlobalData("serviceability",e(d));a.when(c.callAPI(k+m.endpointUrl,m.httpMethod,null,!1,m.xhr,m.isAkanaEndpoint),f()).then(function(a,c){VMCSJT.setGlobalData("basketAuthorData",c);a=VMCSJT.parseBasketApiData(a,c);VMCSJT.setGlobalData("apiData",a);null!==VMCSJT.journey.position.page?VMCSJT.journey.utils.resumePreviousSession(b,VMCSJT.journey.position.tabID,VMCSJT.journey.position.formID):b.height("").removeClass("csjt-checkout-template-empty")})}).fail(function(){g.setJourneyMiscFlag("forceRedirect",
!0,VMCSJT);window.location.href=VMCSJT.getShortUrl(window.location.origin+b.data("redirect-serviceability-fail"))}))};b.load=function(a){a.each(d)};f.register({name:"csjt-checkout-template",api:b,selector:".csjt-checkout-template"})})(VMJS,VMJSjQuery);
(function(f,a,h){function e(a){window.vmStoreJson=a;window.sessionStorage.setItem("vmStoreJson",JSON.stringify(a));a=new CustomEvent("CSJ_PAGE_TRACKING");document.dispatchEvent(a)}function d(c){D.waitForGlobal("VMCSJT","journey",function(){D.waitForGlobal("VMCSJT","analyticsMapping",function(){var d=c.pageName,f="basket"===a.journey.position.section,h="order-complete"===a.journey.position.section||"order-error"===a.journey.position.section;b(c);c.pageName!==d&&0!==c.pageName.length&&(g(c),D.waitForGlobal("VMCSJT",
"apiData",function(){q(c);p(c);if(f)D.waitForGlobal("VMCSJT","serviceability",function(){t(c);B(c);e(c)});else{if(h){var a=JSON.parse(window.sessionStorage.getItem("journeyMisc"))||{};a&&a.order&&(c.customer||B(c),c.customer.orderId=a.order)}e(c)}}))})})}function b(b){var d="";var g=a.journey.position;if(g.section)g=c(a.analyticsMapping["hardcoded-sections"][g.section]);else{var e=a.analyticsMapping[g.page];g.tabID&&e&&(e=e[g.tabID]);g.formID&&e&&(e=e[g.formID]);g=c(e)}g=g.split("{subdomain/}");e=
window.location.hostname.split("www.");e=e[e.length-1];"virginmedia.com"!==e&&2===g.length&&(d="www."+e.split(".virginmedia.com")[0]+"/");g=g[g.length-1];b.pageName=d+g}function c(a){return a&&"string"===typeof a?a:""}function g(a){for(var b=a.pageName.split("/"),c=b.length,d="",g=1,e=0;5>g;g++)e<c&&(0<e&&(d+="/"),d+=b[e]),e++,a["subSection"+g]=d}function k(a){switch(a){case void 0:return"not_mapped";case "D":return"BB";case "C":return"TV";case "T":return"PH";default:return a}}function q(b){b.basket=
{items:[]};if(a.apiData.basket&&(n(b.basket,"numberOfCores",a.apiData.basket.numberOfCores),n(b.basket,"productCodes",l(a.apiData.basket.productCodes)),n(b.basket,"appliedCoupons",a.apiData.basket.appliedCoupons),n(b.basket,"maxCouponsAllowed",a.apiData.basket.maxCouponsAllowed),a.apiData.basket.items))for(var c=a.apiData.basket.items.length-1;-1<c;c--){var d=a.apiData.basket.items[c],g={};n(g,"code",d.code);n(g,"qty",d.quantity);n(g,"name",d.name);n(g,"tier",d.tier);n(g,"rule",d.rule);if(d.attributes){n(g,
"serviceCategory",k(d.attributes.service_category_code));n(g,"productPlatform",d.attributes.product_platform);n(g,"tmi",d.attributes.product_tmi);n(g,"bbSpeed",d.attributes.product_bb_speed);n(g,"outletType",d.attributes.outlet_type);var e=g,f=d.attributes.product_classification,h=[];f&&h.push(f);n(e,"classifications",h);d.attributes.install_type&&(n(g,"installationType",d.attributes.install_type),e=g,d=d.attributes.product_category?void 0:"",n(e,"installationCategory",d))}b.basket.items.push(g)}}
function l(a){a=a.split("|");var b=[],c=[],d=[];h.each(a,function(a,g){switch(m(g)){case "D":b.push(g);break;case "C":c.push(g);break;case "T":d.push(g)}});return b.concat(c,d).join("|")}function m(b){var c=null;h.each(a.apiData.basket.items,function(a,d){d.code===b&&(c=d.attributes.service_category_code)});return c}function n(a,b,c){"undefined"!==typeof c&&(a[b]=c)}function p(b){b.totals={};a.apiData.prices&&(n(b.totals,"bundle",a.apiData.prices.bundle),n(b.totals,"monthly",a.apiData.prices.monthlyTotal),
n(b.totals,"oneoff",a.apiData.prices.oneOffTotal),n(b.totals,"installationCost",a.apiData.prices.installationCost),n(b.totals,"installationActivationCost",a.apiData.prices.installationActivationCost))}function t(b){b.serviceability||(b.serviceability={});n(b.serviceability,"outcomeId",a.serviceability.outcomeId);a.serviceability.address&&(n(b.serviceability,"address",a.serviceability.address.display),n(b.serviceability,"postcode",a.serviceability.address.postcode),n(b.serviceability,"premise",a.serviceability.address.premiseId),
n(b.serviceability,"siteId",a.serviceability.address.siteId),n(b.serviceability,"addressDetails",{}),n(b.serviceability.addressDetails,"town",a.serviceability.address.town));n(b.serviceability,"maxBBspeed",a.serviceability.speed);n(b.serviceability,"spotters",a.serviceability.spotters);n(b.serviceability,"quickStartAOAllowed",a.serviceability.quickStartAOAllowed);n(b.serviceability,"active",a.serviceability.active);n(b.serviceability,"prewired",a.serviceability.prewired);n(b.serviceability,"qsCableEligible",
a.serviceability.qsCableEligible);n(b.serviceability,"qsTelephonyEligible",a.serviceability.qsTelephonyEligible);n(b.serviceability,"qsOutletEligible",a.serviceability.qsOutletEligible);n(b.serviceability,"telephonyTechnologyTypes",a.serviceability.telephonyTechnologyTypes);n(b.serviceability,"networkServiceabilityDetails",a.serviceability.networkServiceabilityDetails);n(b.serviceability,"status",a.serviceability.status);a.serviceability.statusDetails&&(n(b.serviceability,"statusDetails",{}),n(b.serviceability.statusDetails,
"details",a.serviceability.statusDetails.details),a.serviceability.statusDetails.serviceDetails&&a.serviceability.statusDetails.serviceDetails.forEach(function(a){n(b.serviceability,a.serviceType,a.code);n(b.serviceability.statusDetails,a.serviceType,a)}))}function B(a){a.customer||(a.customer={});n(a.customer,"store","ALLYOURS");n(a.customer,"productChannel","cable");n(a.customer,"customerTypeCable","new_customer_cable");n(a.customer,"orderTypeCable","new_cable_order")}function u(){a.analyticsMapping||
h.get("/content/dam/virginmedia/dotcom/static/analyticsMapping.txt").then(function(b){b=b.replace(/\s/g,"");a.setGlobalData("analyticsMapping",JSON.parse(b))})}function A(a,b){u();h(b).on("dynPositionChanged",function(){var a=JSON.parse(window.sessionStorage.getItem("vmStoreJson"))||{};d(a)})}var y={},D=common.Utils;y.load=function(a){a.each(A)};f.register({name:"csjt-vm-store-analytics",api:y,selector:".csjt-vm-store-analytics.publish-mode"})})(VMJS,window.VMCSJT,VMJSjQuery);
(function(f,a,h){function e(b){function c(c){var d=a.basketAuthorData.rewardsConfig.groups.find(function(a){return a.rewardGroupIndex===c}),f=a.apiData.basket.selectedRewardInRewardsChooser&&a.apiData.basket.selectedRewardInRewardsChooser.code;d&&d.rewards&&d.rewards.length&&(d=Handlebars.compile(m)({configArrayRewards:d.rewards,selectedRewardProd:f?f:null}),e.html(d),w.prop("disabled",!0),b.find(".bs-rewards-list").removeClass("hidden"),b.find(".bs-rewards-section").removeClass("hidden"));e.on("click",
".bs-rewards-item",function(b){b.preventDefault();var c=h(this);c.hasClass("selected")||(l.toggleSpinner(),b=c.data("reward-code"),k.callAPI(q+g.endpointUrl,g.httpMethod,{productCode:b},!0,g.xhr,g.isAkanaEndpoint).then(function(b){e.find(".selected").removeClass("selected");c.addClass("selected");c.find("input").prop("checked",!0);w.prop("disabled",!1);a.setGlobalData("apiData",a.parseBasketApiData(b));a.renderBasketSummary(null,null,!1,null);l.hideBannerMessages();l.toggleSpinner()}).fail(function(a){var b=
e.closest(".bs-rewards-section");l.handleApiErrors({apiLabel:g.apiLabel,xhr:a},b,"error",!1,!0,!0)}))})}function d(){var c=Handlebars.compile(y)({otherRewardsArr:a.apiData.basket.otherRewards});f.html(c);b.find(".bs-rewards-section").removeClass("hidden")}var g=b.closest(".csjt-checkout-template").data("rewardsDetailsApi"),e=b.find(".bs-rewards-list"),f=b.find(".bs-other-rewards-list"),m=e.find("script").html(),y=f.find("script").html(),D="undefined"!==typeof CQ&&CQ.WCM&&CQ.WCM.isEditMode(),w=b.closest(".csjt-checkout-template").find(".snippet-toggle button");
D||(a.apiData.prices.bundle.rewardsGroup&&"N/A"!==a.apiData.prices.bundle.rewardsGroup&&c(a.apiData.prices.bundle.rewardsGroup),a.apiData.basket.otherRewards.length&&d("rewards"))}function d(b){function c(a,b,c){a?(y.addClass("hidden"),m.show()):(w.removeClass("has-value"),D[0].reset(),D.validator("destroy").validator(),m.hide(),b<c&&y.removeClass("hidden"))}function d(b){var d=a.apiData.basket.appliedCoupons,g=a.apiData.basket.maxCouponsAllowed;b?a.setGlobalData("promoCodeTpl",b):b=a.promoCodeTpl;
d.length?(b=Handlebars.compile(b)({appliedCoupons:d}),e.html(b),c(!1,d.length,g)):(e.empty(),c(!0,null,null))}function g(){C.html('\x3cul class\x3d"list-unstyled"\x3e\x3cli\x3e'+x+"\x3c/li\x3e\x3c/ul\x3e");r.addClass("has-error has-danger");w.one("input.fail",function(){r.removeClass("has-error has-danger");C.html("");E.removeClass("disabled")})}var e=b.find(".bs-promotions-codes"),f=h("#bs-promotion-codes-template").html(),m=b.find(".bs-promotions-form-wrap"),y=b.find(".bs-promotions-form-control"),
D=b.find(".bs-promotions-form"),w=D.find("input"),r=w.parent(".form-group"),x=w.data("fail-message"),C=D.find(".help-block"),E=b.find(".bs-promotions-form-submit"),F=b.closest(".csjt-checkout-template").data("promosDetailsAddApi"),G=b.closest(".csjt-checkout-template").data("promosDetailsDeleteApi"),z=b.find(".basket-summary-wrapper"),H=z.data("promosAddSuccess");b="undefined"!==typeof CQ&&CQ.WCM&&CQ.WCM.isEditMode();F&&G&&!b&&(y.on("click",function(){c(!0,null,null)}),e.on("click",".bs-promotion-code-remove",
function(){var b=h(this).parent().data("code");l.toggleSpinner();k.callAPI(q+(G.endpointUrl+"/"+b),G.httpMethod,null,!1,G.xhr,G.isAkanaEndpoint).then(function(b){a.setGlobalData("apiData",a.parseBasketApiData(b));a.renderBasketSummary(null,null,!1,null);d();l.hideBannerMessages();l.toggleSpinner()}).fail(function(a){l.toggleSpinner()})}),D.off("submit").on("submit",function(b){b.isDefaultPrevented()||(b.preventDefault(),l.toggleSpinner(),b=w.val(),E.addClass("disabled"),k.callAPI(q+F.endpointUrl,
F.httpMethod,{promoCode:b},!0,F.xhr,F.isAkanaEndpoint).then(function(b){a.setGlobalData("apiData",a.parseBasketApiData(b));a.renderBasketSummary(null,null,!1,null);d();l.toggleSpinner();l.displayBannerMsg(H,z,"success",!0,!0)}).fail(function(a){g(a);l.toggleSpinner()}))}),d(f))}function b(b){var c=b.closest(".csjt-checkout-template").data("basket-billing-api");b.on("click",".bs-action-paper-billing",function(){var b=h(this),d={productCode:b.data("switch-billing-code")};l.toggleSpinner();return k.callAPI(q+
c.endpointUrl,c.httpMethod,d,!0,c.xhr,c.isAkanaEndpoint).then(function(b){a.setGlobalData("apiData",a.parseBasketApiData(b));a.renderBasketSummary(null,null,!1,null);l.hideBannerMessages();l.toggleSpinner()}).fail(function(a){var d=b.closest(".bs-line");l.handleApiErrors({apiLabel:c.apiLabel,xhr:a},d,"error",!1,!0,!0)})})}function c(c,g){var f=h(g),m=h("#bs-costs-table-hbs").html(),n=f.find(".bs-rewards-promos-section"),u=f.find(".basket-summary-wrapper"),A=u.data("bot-redirect-page"),y=u.data("bb-downgraded-alert");
q=sessionStorage.getItem("storeDomainServiceability");k.waitForGlobal("VMCSJT","apiData",function(){if(a.apiData.prices&&a.apiData.prices.bundle&&a.apiData.prices.bundle.invalidBundle)return window.location.href=A,!1;a.apiData.prices&&a.apiData.prices&&a.apiData.prices.bundle.broadbandDowngraded&&l.displayBannerMsg(y,u,"info",!1,!0);a.renderBasketSummary(m,".bs-costs-table",!1,function(){b(f);d(f);e(f);n.removeClass("hidden");a.journey.position.page||(a.journey.position.section="basket",a.journey.utils.updateStoredJourney("position"))});
u.find(".redirectRB").on("click",function(b){l.setJourneyMiscFlag("forceRedirect",!0,a)})})}var g={},k=common.Utils,q,l=common.dynFormUtils;g.load=function(a){a.each(c)};f.register({name:"basket-summary",api:g,selector:".basket-summary"})})(VMJS,window.VMCSJT,VMJSjQuery);
(function(f,a){function h(d,f){var g=a(f),h=g.find(".ace-form"),k=h.find('input[name\x3d"emailAddress"]'),n=h.find('textarea[name\x3d"message"]'),p=h.find(".ace-form-textarea").attr("maxlength"),t=h.find(".ace-form-marker-count-visible"),B=h.find(".btn-primary"),u=g.find(".email-basket-form-wrapper"),A=g.find(".forms-modal"),y=u.data("success-message"),D=u.data("error-message");d=g.find(".close-modal");f=g.find(".trigger-modal-wrapper");var w=g.find(".trigger-modal-hbs").html(),r=g.find(".modal-email-basket-address-hbs").html(),
x=f.data("trigger-title"),C=g.children("div").data("is-publish"),E=g.find(".email-basket-summary");c=sessionStorage.getItem("storeDomainServiceability");C&&(e.waitForGlobal("VMCSJT","apiData",function(){var a=window.VMCSJT.serviceability;r&&(a=Handlebars.compile(r)({prices:window.VMCSJT.apiData.prices.bundle.name,serviceabilityAddress:a.address.display,town:a.address.town}),E.html(a))}),w&&(w=Handlebars.compile(w)({emailBasket:'\x3cspan class\x3d"trigger-modal"\x3e'+x+"\x3c/span\x3e"}),f.html(w)));
g.find(".trigger-modal").on("click",function(){b.modalWithContentOverflow(A);b.hideBannerMessages();h.validator()});A.on("hidden.bs.modal",function(a){k.add(n).removeClass("has-value");h[0].reset();h.validator("destroy").validator();t.text(p+" characters");B.addClass("disabled");u.removeClass("hidden")});d.on("click",function(){A.modal("hide")});h.off("submit").on("submit",function(d){d.preventDefault();var f=a(".csjt-checkout-template").data("emailBasketApi");d={emailAddress:k.val(),message:n.val()};
e.callAPI(c+f.endpointUrl,f.httpMethod,d,!0,f.xhr,f.isAkanaEndpoint).then(function(){b.hideBannerMessages();b.displayBannerMsg(y,g.find(".modal-content"),"success",!1,!0);u.addClass("hidden")}).fail(function(a){b.handleApiErrors({apiLabel:f.apiLabel,xhr:a},g.find(".modal-content"),"error",null,!0,!1,null,function(){b.displayBannerMsg(D,g.find(".modal-content"),"error",!1,!0)});u.addClass("hidden")})})}var e=common.Utils,d={},b=common.dynFormUtils,c;d.load=function(a){a.each(h)};f.register({name:"email-basket",
api:d,selector:".email-basket"})})(VMJS,VMJSjQuery);
(function(f,a,h){function e(b){var c="undefined"!==typeof CQ&&CQ.WCM&&CQ.WCM.isEditMode(),d=h("#mini-bs-basic-info-tpl").html();c?(c=Handlebars.compile(d)({}),b.find(".mini-bs-basic-info").html(c)):g.waitForGlobal("VMCSJT","apiData",function(){a.renderMiniBasketBasicInfo(d,b)})}function d(b){var c=a.basketSummaryTpl,d=b.find(".basket-summary-wrapper");g.waitForGlobal("VMCSJT","apiData",function(){a.renderBasketSummary(c,d,!0,null)})}function b(a){var b=a.find(".forms-modal");a.on("click",".trigger-bs-modal",
function(){q.modalWithContentOverflow(b)})}function c(a,c){a=h(c);e(a);d(a);b(a)}var g=common.Utils,k={},q=common.dynFormUtils;k.load=function(a){a.each(c)};f.register({name:"mini-basket",api:k,selector:".mini-basket"})})(VMJS,window.VMCSJT,VMJSjQuery);
(function(f,a,h){function e(a){var b=a.find('select[name\x3d"country"]'),c,d;common.AsyncService.ajaxPromise({method:"GET",url:"/services/api/csjt-countries-config"}).then(function(a){d=a.countries;for(a=0;a<d.length;a++)void 0!==d[a].country&&(c=d[a].country,h("\x3coption\x3e",{value:c,text:c}).appendTo(b))})}function d(a){function d(a,b,c){this.duration=a;this.address=b;this.status=c}var g=M.find("button[type\x3dsubmit]"),e=M.data("api-endpoints");0<V.residency.length?b(a,g,e,d):c(a,g,e,d)}function b(a,
b,d,g){var e=a.find('select[name\x3d"residentialStatus"]'),f=a.find('select[name\x3d"years"]'),h=a.find('select[name\x3d"months"]'),k=a.find(".installation-address"),l=a.find('input[name\x3d"isCurrentAddressRadio"]').closest(".form-group"),m=a.find(".find-address-list"),n=a.find(".current-previous-address-container"),q=V.residency,t=a.find(".btn-find-address"),u=a.find(".find-address-wrapper .sh-wrapper-component"),x=a.find(".residential-status-wrapper .sh-wrapper-component"),w=a.find('select[name\x3d"country"]'),
r=a.find('input[name\x3d"postcode"]'),y=a.find('input[name\x3d"houseNumberOrName"]'),A=W.html();p(a,k,l,m,n,q,A,0);J([w,r,y],"hide",!1);t.closest(".form-group").addClass("hidden");K([e,f,h],"hide");u.addClass("hidden");x.addClass("hidden");M.validator("update");c(a,b,d,g)}function c(a,b,c,d){b.off("click").on("click",function(e){e.preventDefault();36<=V.totalTimeSpent||3===V.residency.length?Z.callAPI(v+c.endpointUrl,c.httpMethod,V,!0,c.xhr,c.isAkanaEndpoint).then(function(){M.submit()}).fail(function(b){Y.handleApiErrors({apiLabel:c.apiLabel,
xhr:b},a,"error",null,!0,!1)}):g(a,ba,d,b)})}function g(a,b,c,d){var g=w(a),e=a.find('input[name\x3d"flatNumber"]'),f=a.find('input[name\x3d"street"]'),n=a.find('input[name\x3d"town"]'),p=a.find('input[name\x3d"postcode"]'),t=a.find('input[name\x3d"houseNumberOrName"]'),u=a.find('input[name\x3d"county"]'),x=a.find('select[name\x3d"residentialStatus"] option:selected').text();"object"===typeof g&&"function"===typeof g.then?g.then(function(g){g=g.addresses||[];var w=a.find(".address-history-modal"),
r=a.find(".address-list"),y=a.find(".btn-confirm-address"),A=a.find(".equifax-address-list-template script").html();window.matchMedia("(max-width: 768px)");1===g.length?h.each(g,function(g,e){m(a,b,c,{id:e.id,flatNumber:e.flatNumber,houseNumber:e.houseNumberOrName,streetName:e.street,townName:e.town,county:e.county,postcode:e.postcode,country:"UK",status:x,installationIsCurrentAddr:!0,flagCurrentAddress:!0,moveInDate:null});l(M,d);q()}):(r.html(Handlebars.compile(A)({addresses:g})),w.modal({backdrop:"static",
keyboard:!1}),h(window).on("shown.bs.modal",function(){y.addClass("disabled");w.find('input[name\x3d"noAddress"]').prop("checked",!1);w.find("li.selected").removeClass("selected");w.find(".modal-title-equifax, .equifax-text, .equifax-no-address-checkbox").removeClass("hidden");w.find(".modal-title-address-search, .address-search-text").addClass("hidden")}),L(r,e,f,n,u,t,p),y.off("click").on("click",function(g){g.preventDefault();g=r.find("li.selected");var e=r.closest(".address-history-modal").find('input[name\x3d"noAddress"]').is(":checked");
g.length?(g={id:g.data("id"),flatNumber:g.data("flat-number"),houseNumber:g.data("house-number-or-name"),streetName:g.data("street"),townName:g.data("town"),county:g.data("county"),postcode:g.data("postcode"),country:"UK",status:x,installationIsCurrentAddr:!0,flagCurrentAddress:!0,moveInDate:null},m(a,b,c,g),w.modal("hide"),l(M,d),q()):e&&(k(a,b,c,x),w.modal("hide"),l(M,d),q())}))}).fail(function(g){k(a,b,c,x);l(M,d);q()}):(m(a,b,c,g),l(M,d),q())}function k(b,c,d,g){m(b,c,d,{id:null,siteId:a.serviceability.address.siteId,
premiseId:a.serviceability.address.premiseId,townName:a.serviceability.address.town,uprn:a.serviceability.address.uprn,houseNumber:a.serviceability.address.houseNumberOrName,postcode:a.serviceability.address.postcode,streetName:a.serviceability.address.street,country:a.serviceability.address.country,status:g,installationIsCurrentAddr:!0,flagCurrentAddress:!0,flagCantFindAddress:!0,moveInDate:null})}function q(){if(!(36<=V.totalTimeSpent||3===V.residency.length)){var a=h(".mini-bs-basic-info").height();
var b=h(".snippet-tabs-list").height();a=window.matchMedia("(max-width: 1024px)").matches?a+b:b+12;h("html, body").animate({scrollTop:h(".address-history").offset().top-a},1E3)}}function l(a,b){a.data("bs.validator").reset();b.addClass("disabled");a.validator("update")}function m(a,b,c,d){var g={},e={},f=parseInt(a.find(".years-selection").val()),h=parseInt(a.find(".months-selection").val());var k=a.find('select[name\x3d"residentialStatus"] option:selected').val();g.years=f;g.months=h;e.id=d.id;e.flatNumber=
d.flatNumber;e.houseNumberOrName=d.houseNumber;e.street=d.streetName;e.town=d.townName;e.county=d.county;e.postcode=d.postcode;e.country=d.country;e.installationIsCurrentAddr=d.installationIsCurrentAddr;e.moveInDate=d.moveInDate;e.sideId=d.siteId;e.premiseId=d.premiseId;e.uprn=d.uprn;e.statusText=d.status;e.flagCantFindAddress=d.flagCantFindAddress;d=d.flagCurrentAddress;c=new c(g,e,k);b.push(c);n(a,d)}function n(a,b){var c=a.find(".installation-address"),d=a.find('input[name\x3d"isCurrentAddressRadio"]').closest(".form-group"),
g=a.find('input[name\x3d"landlordRadio"]:checked'),e=a.find('select[name\x3d"residentialStatus"]'),f=a.find('select[name\x3d"years"]'),h=a.find('select[name\x3d"months"]'),k=a.find('select[name\x3d"country"]'),l=a.find('input[name\x3d"flatNumber"]'),m=a.find('input[name\x3d"houseNumberOrName"]'),n=a.find('input[name\x3d"street"]'),q=a.find('input[name\x3d"town"]'),u=a.find('input[name\x3d"county"]'),w=a.find('input[name\x3d"postcode"]'),r=a.find(".btn-find-address"),A=a.find(".current-previous-address-container"),
z=a.find(".find-address-list"),C=a.find("input[name\x3daddressHistoryData]"),D=M.data("api-endpoints"),ca=W.html();if(V.residency.length){var R=V.residency,F={};V.totalTimeSpent=B(R,0);36<=V.totalTimeSpent||3===V.residency.length?(F.moveInDate=V.residency["0"].address.moveInDate,Z.callAPI(v+D.endpointUrl,D.httpMethod,V,!0,D.xhr,D.isAkanaEndpoint).then(function(){M.one("dynFormHidden",function(){p(a,c,d,z,A,R,ca,0)});y(a,e,g);null!==F.moveInDate&&E(a,F);C.val(JSON.stringify(V));Y.hideBannerMessages();
M.submit()}).fail(function(b){Y.handleApiErrors({apiLabel:D.apiLabel,xhr:b},a,"error",null,!0,!1)})):(R[0].address.installationIsCurrentAddr&&b&&a.find('input[value\x3d"currentAddressNo"]').attr("checked",!0).trigger("change"),U(k,l,n,q,w,m,u,z,r),k.val("UK").trigger("change"),p(a,c,d,z,A,R,ca,0),y(a),I([e,f,h]),x(a))}t(a)}function p(a,b,c,d,g,e,f,h){b.addClass("hidden");c.addClass("hidden");d.addClass("hidden");g.html(Handlebars.compile(f)({addresses:e}));F(a,e,f,g,h)}function t(a){var b=a.find(".current-address");
a=a.find(".previous-address");V.residency.length?(a.removeClass("hidden"),b.addClass("hidden")):(a.addClass("hidden"),b.removeClass("hidden"))}function B(a,b){h.each(a,function(a,c){b+=12*c.duration.years+c.duration.months});return b}function u(b){var c=b.find('select[name\x3d"residentialStatus"]'),d=b.find(".sh-landlordWrapper"),g=c.closest("form").find('input[value\x3d"currentAddressYes"]'),e=c.closest("form").find('input[value\x3d"currentAddressNo"]'),f=b.find(".residential-status-wrapper");c.on("change",
function(){var b=h(this);g.is(":checked")&&"privatetenant"===b.val().toLowerCase()&&a.serviceability.wayLeave?d.removeClass("hidden"):d.addClass("hidden")});g.change(function(){h(this).is(":checked")&&f.removeClass("hidden")});e.change(function(){h(this).is(":checked")&&f.addClass("hidden")})}function A(a){var b=M.find("button[type\x3dsubmit]"),c=a.find('input[name\x3d"isCurrentAddressRadio"]'),d=a.find('select[name\x3d"residentialStatus"]'),g=a.find('select[name\x3d"years"]'),e=a.find('select[name\x3d"months"]');
c.on("change",function(){I([d,g,e]);l(M,b)})}function y(a){var b=a.find(".landlordWrapper"),c=b.find("input,select"),d=b.find('select[name\x3d"title"]'),g=b.find('input[name\x3d"name"]'),e=b.find('input[name\x3d"company"]'),f=b.find('input[name\x3d"telephoneNumber"]'),h=b.find('input[name\x3d"emailAddress"]'),k=a.data("landlord-api");da=D(c);if(!(da.title&&da.company&&da.telephoneNumber&&da.emailAddress))return!1;Z.callAPI(v+k.endpointUrl,k.httpMethod,da,!0,k.xhr,k.isAkanaEndpoint).then(function(){I([d]);
J([g,e,f,h],"show",!0);Y.hideBannerMessages()}).fail(function(b){Y.handleApiErrors({apiLabel:k.apiLabel,xhr:b},a,"error",null,!0,!1)})}function D(a){var b={};a.each(function(){""!==h(this).val()&&(b[this.name]=h(this).val())});return b}function w(a){var b=a.find(".find-address-list:not(.hidden) .selected");if(a.find('input[value\x3d"currentAddressYes"]').is(":checked")){var c=a.data("equifax-api");return Z.callAPI(v+c.endpointUrl,c.httpMethod,null,!1,c.xhr,c.isAkanaEndpoint)}if(b.length){c=b.data("id");
var d=b.data("flat-number");var g=b.data("house-number-or-name");var e=b.data("street");var f=b.data("town");var h=b.data("county");var k=b.data("postcode")}else c=null,d=a.find('input[name\x3d"flatNumber"]').val(),g=a.find('input[name\x3d"houseNumberOrName"]').val(),e=a.find('input[name\x3d"street"]').val(),f=a.find('input[name\x3d"town"]').val(),h=a.find('input[name\x3d"county"]').val(),k=a.find('input[name\x3d"postcode"]').val();var l=a.find('select[name\x3d"country"]').val();b=a.find('select[name\x3d"residentialStatus"] option:selected').text();
a=C(a);return{id:c,flatNumber:d,houseNumber:g,streetName:e,townName:f,postcode:k,county:h,country:l,installationIsCurrentAddr:!1,flagCurrentAddress:!1,status:b,moveInDate:a}}function r(a){a.find(".years-selection").on("change",function(){function a(){d.select2("destroy").select2({placeholder:d.data("placeholder"),theme:"ace form-control",minimumResultsForSearch:Infinity,dropdownParent:d.closest(".form-group"),width:"style"})}var b=h(this).val(),c=h(this).parent().siblings("span").find(".select2-container"),
d=h(this).parent().siblings("span").find(".months-selection"),g=h(this).parent().siblings("span").find('.months-selection option[value\x3d"0"]');switch(b){case "0":c.show();g.html("\x3c 1 month");a();break;case "1":case "2":c.show();g.html("0 months");a();break;case "3":c.hide(),d.val("0")}})}function x(b){var c=a.serviceability.active,d=b.find(".sh-moveInDateRadio"),g=d.find('input[name\x3d"moveInDateRadio"]'),e=b.find(".move-in-date"),f=e.find("select");b=b.find(".current-previous-address-container .your-address").length;
if(c&&1>b)g.on("change",function(){"moveInDateYes"===h(this).val()?(e.removeClass("hidden"),f.removeClass("ignore")):(e.addClass("hidden"),f.addClass("ignore"),M.validator("update"))});else d.addClass("hidden"),g.addClass("ignore"),e.hasClass("hidden")||e.addClass("hidden"),f.hasClass("ignore")||f.addClass("ignore")}function C(b){var c=a.serviceability.active,d=b.find(".current-previous-address-container .your-address").length,g=b.find('input[value\x3d"moveInDateYes"]').is(":checked");b=b.find(".move-in-date-container").find("select");
return!c||0<d||!g?null:b.map(function(a,b){a=h(b);return a.hasClass("ace-field-month")||a.hasClass("ace-field-day")?(1===h(this).val().length?"0":"")+h(this).val():h(this).val()}).get().reverse().join("-")}function E(a,b){var c=a.data("moveindate-api");Z.callAPI(v+c.endpointUrl,c.httpMethod,b,!0,c.xhr,c.isAkanaEndpoint).then(function(){}).fail(function(b){Y.handleApiErrors({apiLabel:c.apiLabel,xhr:b},a,"error",null,!0,!1)})}function F(a,b,c,d,g){var e=a.find(".edit-address"),f=a.closest("form").find("button[type\x3dsubmit]"),
h=a.find(".residential-status-wrapper"),k=a.find(".find-address-wrapper");G(a,e,f,k,h,b,c,d,g)}function G(a,b,c,d,g,e,f,k,l){var m=[],n=[];b.on("click",function(){var b=h(this).closest(".your-address"),q=b.index(),p=b.find(".your-address-edit"),t=a.find(".your-address-edit"),u=p.find(".your-address-edit-form"),w=a.find('select[name\x3d"residentialStatus"]'),x=a.find('select[name\x3d"years"]'),r=a.find('select[name\x3d"months"]');t.addClass("hidden");p.removeClass("hidden");c.addClass("hidden");m=
d.detach();n=g.detach();u.append(n);g.children().removeClass("hidden");g.removeClass("hidden");K([w,x,r],"show");u=e[q];p=u.status;t=u.duration.years;u=u.duration.months;b.find('select[name\x3d"residentialStatus"]').val(p).attr("selected","selected").trigger("change");b.find('select[name\x3d"years"]').val(t).trigger("change");b.find('select[name\x3d"months"]').val(u).trigger("change");z(a,b,q,e,f,k,l,m,n);H(a,b,q,e,f,k,l,m,n)})}function z(a,b,c,d,g,e,f,h){b=b.find(".btn-address-edit-delete");var k=
a.find(".primary-button"),m=k.find("button[type\x3dsubmit]"),n=a.find('select[name\x3d"residentialStatus"]'),q=a.find('select[name\x3d"years"]'),p=a.find('select[name\x3d"months"]'),u=a.find(".residential-status-wrapper"),w=[];b.off();b.one("click",function(b){b.preventDefault();I([n,q,p]);w=u.detach();d.splice(c,1);e.html(Handlebars.compile(g)({addresses:d}));V.totalTimeSpent=B(d,f);F(a,d,g,e,f);k.before(h);k.before(w);b=a.find(".find-address-wrapper").children();var x=a.find(".btn-find-address"),
r=a.find('select[name\x3d"country"]'),A=a.find('input[name\x3d"postcode"]'),y=a.find('input[name\x3d"houseNumberOrName"]');J([r,A,y],"show",!0);x.closest(".form-group").removeClass("hidden");b.removeClass("hidden");t(a);m.removeClass("hidden");l(M,m)})}function H(a,b,c,d,g,e,f,h){var k=b.find(".btn-address-edit-save"),m=a.find(".primary-button").find("button[type\x3dsubmit]"),n=a.find('select[name\x3d"residentialStatus"]'),q=a.find('select[name\x3d"years"]'),p=a.find('select[name\x3d"months"]'),u,
w,x,r;k.off();k.one("click",function(k){k.preventDefault();u=n.find("option:selected").val();w=n.find("option:selected").text();x=q.val();r=p.val();d[c].status=u;d[c].address.statusText=w;d[c].duration.months=parseInt(r);d[c].duration.years=parseInt(x);var A=a.find(".primary-button"),y=a.find(".residential-status-wrapper");k=a.find('select[name\x3d"residentialStatus"]');var E=a.find('select[name\x3d"years"]'),z=a.find('select[name\x3d"months"]');y=y.detach();A.before(h);A.before(y);A=a.find(".btn-find-address");
y=a.find(".find-address-list");var C=a.find('select[name\x3d"country"]'),D=a.find('input[name\x3d"flatNumber"]'),R=a.find('input[name\x3d"street"]'),v=a.find('input[name\x3d"town"]'),H=a.find('input[name\x3d"postcode"]'),O=a.find('input[name\x3d"houseNumberOrName"]'),G=a.find('input[name\x3d"county"]'),aa=a.find(".find-address-wrapper").children();a.find(".residential-status-wrapper").children();var T=12*d[0].duration.years+d[0].duration.months,L=void 0!==d[1]?12*d[1].duration.years+d[1].duration.months:
"",X=void 0!==d[2]?12*d[2].duration.years+d[2].duration.months:"";if(36===T)d.splice(1,2),N(c,d,D,R,v,G,O,H),J([C,H,O],"hide",!1),A.closest(".form-group").addClass("hidden"),K([k,E,z],"hide"),M.validator("update");else if(""!==L&&36<=T+L)d.splice(2,1),N(c,d,D,R,v,G,O,H),J([C,H,O],"hide",!1),A.closest(".form-group").addClass("hidden"),K([k,E,z],"hide"),M.validator("update");else if(""===L||36>T+L&&""===X)aa.removeClass("hidden"),U(C,D,R,v,H,O,G,y,A),I([k,E,z]),l(M,m);e.html(Handlebars.compile(g)({addresses:d}));
V.totalTimeSpent=B(d,f);F(a,d,g,e,f);b.addClass("hidden");t(a);m.removeClass("hidden")})}function N(a,b,c,d,g,e,f,h){c.val(b[a].address.flatNumber).trigger("change");d.val(b[a].address.street).trigger("change");g.val(b[a].address.town).trigger("change");e.val(b[a].address.county).trigger("change");f.val(b[a].address.houseNumberOrName).trigger("change");h.val(b[a].address.postcode).trigger("change")}function I(a){h(a).each(function(a,b){b.val(null).trigger("change")})}function K(a,b){h(a).each(function(a,
c){a=".sh-"+c.attr("name");"hide"===b?(h(a).length?c.closest(a).addClass("hidden"):c.parent().addClass("hidden"),c.addClass("ignore")):"show"===b&&(h(a).length?c.closest(a).removeClass("hidden"):c.parent().removeClass("hidden"),c.removeClass("ignore"))})}function J(a,b,c){h(a).each(function(a,d){a=".sh-"+d.attr("name");c&&!d.is("select")&&d.val("").removeClass("has-value");d.removeClass("ignore");"hide"===b?d.closest(a).addClass("hidden"):"show"===b&&d.closest(a).removeClass("hidden")})}function Q(a,
b){!0===b?(a.attr("required",!0),a.next().find(".ace-form-info-r").remove()):!1===b&&(b=a.siblings(".ace-form-info").find(".ace-form-marker-optional"),a.removeAttr("required"),b.length||a.next().append('\x3cdiv class\x3d"ace-form-info-r"\x3e\x3cdiv class\x3d"ace-form-marker-optional"\x3eOptional\x3c/div\x3e\x3c/div\x3e'))}function S(a,b,c){b=(new RegExp(b.attr("pattern"))).test(b.val());a="UK"===a.val();b&&a?c.prop("disabled",!1):c.prop("disabled",!0)}function T(a,b,c,d,g,e,f,h,k){var l=M.find(".address-history-wrapper \x3e .residential-status-wrapper");
J([a,b,c,d,g,e,f],"show",!0);h.addClass("hidden");k.closest(".form-group").addClass("hidden");l.removeClass("hidden")}function U(a,b,c,d,g,e,f,h,k){var l=M.find(".address-history-wrapper \x3e .residential-status-wrapper");J([a,b,c,d,g,e,f],"hide",!0);h.addClass("hidden");l.addClass("hidden");J([a,g,e],"show",!0);k.closest(".form-group").removeClass("hidden");S(a,g,k)}function L(a,b,c,d,g,e,f){var k=M.find(".address-history-wrapper \x3e .residential-status-wrapper"),l=a.closest(".address-history-modal").find('input[name\x3d"noAddress"]');
a.find("ul li").on("click",function(){a.find(".selected").removeClass("selected");h(this).addClass("selected");b.val(h(this).data("flat-number")).trigger("change");c.val(h(this).data("street")).trigger("change");d.val(h(this).data("town")).trigger("change");g.val(h(this).data("county")).trigger("change");e.val(h(this).data("house-number-or-name")).trigger("change");f.val(h(this).data("postcode")).trigger("change");k.removeClass("hidden");P(h(this));l.is(":checked")&&l.prop("checked",!1)});l.on("click",
function(){a.find("ul li.selected").removeClass("selected");P(h(this))})}function P(a){a.closest(".address-history-modal").length?a.closest(".address-history-modal").find(".btn-confirm-address").removeClass("disabled"):M.validator("update")}function R(a){function b(a){var b=a.find(".btn-search-again");a=a.find(".btn-enter-manually");b.on("click",function(){U(u,w,x,r,A,y,C,f,e);I([E,z,B]);l(M,D);M.find("#ahModal").modal("hide")});a.on("click",function(){T(u,w,x,r,A,y,C,f,e);I([E,z,B]);l(M,D);M.find("#ahModal").modal("hide")})}
function c(){var b=a.find('input[name\x3d"postcode"]').val().replace(" ",""),c=a.find('input[name\x3d"houseNumberOrName"]').val(),e=n.html(),f=[];Z.callAPI(v+(g.endpointUrl+"?postcode\x3d"+b+"\x26houseNumberOrName\x3d"+c),g.httpMethod,null,!1,g.xhr,g.isAkanaEndpoint).then(function(a){f=a.addresses;d(f,e,b);Y.hideBannerMessages()}).fail(function(c){"NO_ADDRESSES"===c.responseJSON[0].faultCode?d(f,e,b):Y.handleApiErrors({apiLabel:g.apiLabel,xhr:c},a,"error",null,!0,!1)})}function d(a,c,d){a=Handlebars.compile(c)({postcode:'\x3cspan class\x3d"address-search-postcode"\x3e'+
d+"\x3c/span\x3e",enterManuallyCta:'\x3ca class\x3d"btn-enter-manually"\x3e'+q+"\x3c/a\x3e",searchAgainCta:'\x3ca class\x3d"btn-search-again"\x3e'+p+"\x3c/a\x3e",addresses:a});c=window.matchMedia("(max-width: 768px)");J([u,A,y],"hide");e.closest(".form-group").addClass("hidden");if(c.matches){m.html(a);k.modal({backdrop:"static",keyboard:!1});var g=k.find(".btn-confirm-address");a=k.find(".close");c=k.find(".address-search-edit");h(window).on("shown.bs.modal",function(){t(k);g.addClass("disabled");
k.find(".modal-title-equifax, .equifax-text, .equifax-no-address-checkbox").addClass("hidden");k.find(".modal-title-address-search, .address-search-text").removeClass("hidden");k.find(".address-search-edit").removeClass("hidden");k.find(".address-search-options").detach().prependTo(".modal-footer")});h(window).on("hidden.bs.modal",function(){h(".modal-footer").find(".address-search-options").remove()});g.on("click touchend",function(){M.find("#ahModal").modal("hide")});a.add(c).on("click",function(){U(u,
w,x,r,A,y,C,f,e);I([E,z,B]);l(M,D);M.find("#ahModal").modal("hide")});L(m,w,x,r,C,y,A);b(m)}else f.html(a).removeClass("hidden"),L(f,w,x,r,C,y,A),b(f)}var g=a.data("addresses-api"),e=a.find(".btn-find-address"),f=a.find(".find-address-list"),k=a.find(".address-history-modal"),m=k.find(".address-list"),n=a.find(".addresses-list-template").find("script"),q=a.data("enter-manually-cta"),p=a.data("search-again-cta"),u=a.find('select[name\x3d"country"]'),w=a.find('input[name\x3d"flatNumber"]'),x=a.find('input[name\x3d"street"]'),
r=a.find('input[name\x3d"town"]'),A=a.find('input[name\x3d"postcode"]'),y=a.find('input[name\x3d"houseNumberOrName"]'),E=a.find('select[name\x3d"residentialStatus"]'),z=a.find('select[name\x3d"years"]'),B=a.find('select[name\x3d"months"]'),C=a.find('input[name\x3d"county"]'),D=M.find("button[type\x3dsubmit]");u.on("change",function(){"UK"!==h(this).val()?(T(u,w,x,r,A,y,C,f,e),Q(A,!1)):(U(u,w,x,r,A,y,C,f,e),Q(A,!0));S(u,A,e)});A.on("input",function(){S(u,A,e)});A.on("keypress",function(a){13!=a.which||
e.is(":disabled")||(a.preventDefault(),c())});e.on("click",function(){c()})}function aa(a,b){function c(){var a=d.find(".find-address-wrapper .sh-wrapper-component"),b=d.find('input[name\x3d"isCurrentAddressRadio"]').closest(".form-group"),c=d.find(".find-address-list");d.find(".residential-status-wrapper .sh-wrapper-component").addClass("hidden");a.addClass("hidden");b.addClass("hidden");c.addClass("hidden")}var d=h(b).find(".address-history-wrapper"),g=d.find(".addresses-list.current-previous-address-container");
v=sessionStorage.getItem("storeDomainServiceability");M=d.closest(".dyn-form");W=g.find("script");e(d);u(d);A(d);r(d);R(d);x(d);if(M.hasClass("dyn-form-ready"))O(d,M,g);else M.one("dynFormReady",function(){O(d,M,g)});M.on("submit",function(){h(this).on("dynFormHidden",c)})}function O(b,c,g){c.hasClass("dyn-form-ready-repopulated")&&(c=b.find("input[name\x3daddressHistoryData]").val(),c=JSON.parse(c),h.extend(!0,V,c));c=a.serviceability;g=h("#installation-address").html();c=Handlebars.compile(g)(c);
b.find(".installation-address").html(c);d(b)}var X={},Z=common.Utils,Y=common.dynFormUtils,ba,V={residency:ba=[]},v,M,W,da;X.load=function(a){a.each(aa)};f.register({name:"address-history",api:X,selector:".publish-mode .address-history"})})(VMJS,window.VMCSJT,VMJSjQuery);
(function(f,a){function h(b,c){b=a(c);g=sessionStorage.getItem("storeDomainServiceability");e(b)}function e(a){var d=a.closest("form"),e=d.find("button[type\x3dsubmit]"),f=d.find(".memorable-word-wrapper"),h=f.data("customer-preferences-api"),k=f.data("prospect-api");e.off("click").on("click",function(e){e.preventDefault();e={memorableWord:{passwordReminder:d.find('select[name\x3d"passwordReminder"]').val()||void 0,ownQuestion:d.find('input[name\x3d"ownQuestion"]').val()||void 0,password:d.find('input[name\x3d"password"]').val()||
void 0},marketingAndCreditCheckConsent:{marketingOptIn:d.find('input[name\x3d"marketingOptIn"]').is(":checked"),creditCheckConsent:d.find('input[name\x3d"creditCheckConsent"]').is(":checked")}};if("true"===d.find('input[name\x3d"mobileOffers"]:checked').val()){var f=d.find('select[name\x3d"currentProvider"]').val(),l=d.find('input[name\x3d"contractEndDate"]').val();if(""!==f||""!==l)e.mobileOffers={currentProvider:f||void 0,contractEndDate:l.replace(/\//g,"-")||void 0}}b.callAPI(g+h.endpointUrl,h.httpMethod,
e,!0,h.xhr,h.isAkanaEndpoint).done(function(){b.callAPI(g+k.endpointUrl,k.httpMethod,null,!1,k.xhr,k.isAkanaEndpoint);c.hideBannerMessages();d.trigger("submit")}).fail(function(b){c.handleApiErrors({apiLabel:h.apiLabel,xhr:b},a,"error",null,!0,!1)})})}var d={},b=common.Utils,c=common.dynFormUtils,g;d.load=function(a){a.each(h)};f.register({name:"memorable-word",api:d,selector:".publish-mode .memorable-word"})})(VMJS,VMJSjQuery);
(function(f,a,h){function e(d,b){h(b).on("click",function(c){c.preventDefault();var d=a.getShortUrl(h(b).data("href")),e=h("#cta-snippet-target");h.ajax({url:d+"/jcr:content/mainParsys",success:function(b){a.journey.position.page=d.substring(d.lastIndexOf("/")+1);a.journey.utils.updateStoredJourney("position");e.html(b);f.init();"get-ready"===a.journey.position.page&&a.journey.utils.scrollToTop(e,!0);"journey"===a.journey.position.page&&(b=e.find(".tab-container"),a.journey.utils.jumpToTarget(null,
null,b))}})})}f.register({name:"snippet-toggle-cta",api:{load:function(a){a.each(e)}},selector:".snippet-toggle button"})})(VMJS,window.VMCSJT,VMJSjQuery);
(function(f,a){function h(e,d){e=a(d).find(".cta-contain-card a");var b=e.find(".cta-container"),c=b.data("include-border"),g=b.data("border-color-normal"),f=b.data("border-color-hover"),h=b.data("background-color-normal"),l=b.data("background-color-hover"),m=b.data("label-color-normal"),n=b.data("label-color-hover"),p=b.data("description-color-normal"),t=b.data("description-color-hover"),B=b.data("include-divider"),u=b.data("divider-color-normal"),A=b.data("divider-color-hover"),y=b.find(".cta-label"),
D=b.find(".cta-description"),w=b.find(".cta-text-content");d=window.matchMedia("(min-width: 992px)").matches;b.css({"border-color":void 0!==c?g:"transparent","background-color":h});y.css("color",m);D.css("color",p);w.css("border-color",void 0!==B?u:"transparent");d&&(e.on("mouseenter",function(a){b.css({"border-color":void 0!==c?f:"transparent","background-color":l,color:"white"});y.css("color",n);D.css("color",t);w.css("border-color",void 0!==B?A:"transparent")}),e.on("mouseleave",function(a){b.css({"border-color":void 0!==
c?g:"transparent","background-color":h});y.css("color",m);D.css("color",p);w.css("border-color",void 0!==B?u:"transparent")}))}f.register({name:"cta-card",api:{load:function(a){a.each(h)}},selector:".cta-card"})})(VMJS,VMJSjQuery);
(function(f,a){function h(c,d){b.getJourneyConfig("apis-section").then(function(c){c=b.getApiByID(c,"basket_get");e(a(d),c)})}function e(c,d){c.on("click",".cancel-purchase",function(c){c.preventDefault();var g=a(this).attr("href");c=sessionStorage.getItem("storeDomainServiceability");b.callAPI(c+d.endpointUrl,"DELETE",null,!1,d.xhr,d.isAkanaEndpoint).done(function(){sessionStorage.removeItem("formData");window.location=g})})}var d={},b=common.Utils;d.load=function(a){a.each(h)};f.register({name:"something-you-should-know",
api:d,selector:".something-you-should-know"})})(VMJS,VMJSjQuery);
(function(f,a,h){function e(a,b){var c=h(b);a=c.closest("form");C=sessionStorage.getItem("storeDomainServiceability");D=c.find(".store-locator-shop-list");w=c.find(".selected-store-identifier");if(!h(b).find(".store-locator-author-details").length)if(a.hasClass("hidden"))a.on("dynFormVisible",function(){d(c)});else d(c)}function d(d){var e=d.find(".store-locator-search-input"),f=d.find(".dyn-form-field-search"),h=d.find(".store-locator-nearby"),k=d.find(".store-locator-wrapper").data("storeLocatorApi");
b(d,f,e,k);c(d,k);g(d,k);u(d);a.serviceability&&a.serviceability.address.postcode?(e.val(a.serviceability.address.postcode).trigger("input"),f.trigger("click")):h.is(":disabled")||h.trigger("click")}function b(a,b,c,d){function g(b){b.preventDefault();a.find(".selected-store-identifier").val(null).trigger("blur");l(a,d)}b.on("click",function(a){g(a)});c.on("keyup",function(a){"Enter"===a.key&&g(a)})}function c(a,b){var c=a.find(".store-locator-nearby");if(navigator.geolocation)c.on("click",function(c){c.preventDefault();
a.find(".store-locator-search-input").val(null).trigger("input");a.find(".selected-store-identifier").val(null).trigger("blur");q(a,b)});else c.prop("disabled",!0)}function g(a,b){var c=a.closest("form");c.find("button[type\x3dsubmit]").off("click").on("click",function(d){d.preventDefault();d=a.find(".selected-store-identifier").val();r.callAPI(C+b.endpointUrl+"/"+d,"PUT",null,!1,b.xhr,b.isAkanaEndpoint).then(function(){x.hideBannerMessages();k();c.trigger("submit")}).fail(function(c){x.handleApiErrors({apiLabel:b.apiLabel,
xhr:c},a,"error",null,!0,!1)})})}function k(){function a(a){return 1<m[a].length?m[a][0]+" - "+m[a][m[a].length-1]+" "+a.replace("to","-"):m[a][0]+" "+a.replace("to","-")}function b(a){void 0===m[a.openingtime]&&(m[a.openingtime]=[]);m[a.openingtime].push(a.dayofweek.substr(0,3))}var c=JSON.parse(window.sessionStorage.getItem("journeyMisc")),d=h(".selected-store").find(".store-select-cta"),g=d.data("storeName"),e=d.data("storeAddress"),f=d.data("storeCity"),k=d.data("storePostcode"),l=d.data("storeOpeningtimes");
d=d.data("storeDisabledAccess");g={storeName:g,storeAddress:e,storeCity:f,storePostCode:k,storeDisabledAccess:d};var m={};l&&(l.forEach(b),g.storeTimes=g.storeTimes=Object.keys(m).map(a).join(", "));c=c||{};c.selectedStore=g;window.sessionStorage.setItem("journeyMisc",JSON.stringify(c))}function q(a,b){var c=a.find(".store-locator-nearby");c.prop("disabled",!0);navigator.geolocation.getCurrentPosition(function(c){l(a,b,{long:c.coords.longitude,lat:c.coords.latitude})},function(a){1!==a.code&&c.prop("disabled",
!1)},{enableHighAccuracy:!0,timeout:6E4,maximumAge:0})}function l(a,b,c){if("undefined"!==typeof b){var d=[],g={};c?(g.locationtype="longlat",g.longitude=c.long,g.latitude=c.lat):(c=a.find(".store-locator-search-input").val(),/^([A-Za-z][A-Ha-hK-Yk-y]?[0-9][A-Za-z0-9]? ?[0-9][A-Za-z]{2}|[Gg][Ii][Rr] ?0[Aa]{2})$/.test(c)?(g.locationtype="postcode",g.postcode=c):(g.locationtype="address",g.location=c));b.isAkanaEndpoint&&d.push({key:"Authorization",value:"Atmosphere atmosphere_app_id\x3dAEM_UK"});r.callAPI(C+
b.endpointUrl,b.httpMethod,g,!1,b.xhr,b.isAkanaEndpoint).then(function(b){b=b.collectionsites;x.hideBannerMessages();if(b.length){var c={center:new google.maps.LatLng(b[0].latitude,b[0].longitude)};c=new google.maps.Map(document.getElementById("map"),c);var d=new google.maps.InfoWindow({}),g=a.find(".store-locator-wrapper").data("storeIcon"),e=a.find(".store-locator-wrapper").data("storeIconSelected"),f=a.find(".store-locator-map");m(b,c,d,g,e);D.addClass("store-list-show")[0].scrollTop=0;f.addClass("map-show");
B(a,c);p(a,d);a.find(".store-locator-shop-item").first().find(".store-select-cta").trigger("click")}window.matchMedia("(max-width: 767px)").matches&&A(a)}).fail(function(c){x.handleApiErrors({apiLabel:b.apiLabel,xhr:c},a,"error",null,!0,!1)}).always(function(){a.find(".store-locator-nearby").prop("disabled",!1)})}}function m(a,b,c,d,g){var e=[],f=null;D.empty();google.maps.event.addListener(c,"closeclick",function(){f&&(f.setIcon({url:d}),f=null)});h.each(a,function(a,k){"number"!==typeof k.distance&&
(k.distance=parseInt(k.distance.replace(/[^\d.,]/g,"")));k.storeOpeningtimes=JSON.stringify(k.openingtimes);k.distance=k.distance.toFixed(2);k.openingtimes&&(k.openingtimes="Mon - Fri "+k.openingtimes[0].openingtime+",\x3cbr/\x3eSat "+k.openingtimes[5].openingtime+",\x3cbr/\x3eSun "+k.openingtimes[6].openingtime);a=new google.maps.Marker({position:new google.maps.LatLng(k.latitude,k.longitude),icon:d,map:b,title:k.siteName,hdncode:k.hdncode});var l=h("#store-tooltip").html(),m=h("#store-info").html(),
p=Handlebars.compile(l)(k);k=Handlebars.compile(m)(k);google.maps.event.addListener(a,"click",function(a){return function(){f&&f.setIcon({url:d});f!==a?(a.setIcon({url:g}),f=a,c.setContent(p),c.open(b,a),D.find('.store-select-cta[data-hdncode\x3d"'+a.hdncode+'"]').parent()[0].scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})):(f=null,c.setContent(""),c.close())}}(a));e.push(a);D.append(k);n(e,b)})}function n(a,b){var c=new google.maps.LatLngBounds;h.each(a,function(a,b){c.extend(b.getPosition())});
b.fitBounds(c)}function p(a,b){google.maps.event.addListener(b,"domready",function(){var a=w.val(),b=h(".gm-style-iw").find("a.store-tooltip-link"),c=b.data("storeHdncode");if(a===c)t(b);else b.on("click",function(){var a=D.find('.store-select-cta[data-hdncode\x3d"'+c+'"]').parent();D.find('.store-select-cta[data-hdncode\x3d"'+c+'"]').click();a[0].scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"});t(b)})})}function t(a){a.addClass("hidden").siblings("span.store-tooltip-link").removeClass("hidden")}
function B(a,b){a.find(".store-select-cta").on("click",function(){var c=h(this).data("storeName"),d=h(this).data("storeAddress"),g=h(this).data("storeCity"),e=h(this).data("storePostcode"),f=h(this).data("storeHours"),k=h(this).data("storeDisabledAccess");e={name:c,address:d,townCity:g,postcode:e,openingtimes:f,disabledaccess:k};c=parseFloat(h(this).data("storeLat"));d=parseFloat(h(this).data("storeLng"));g=h(this).data("hdncode");f=h("#selected-store-details").html();e=Handlebars.compile(f)(e);f=
a.find(".selected-store-details-container");h(this).parent().siblings(".store-locator-shop-item").removeClass("selected-store");h(this).parent().addClass("selected-store");w.focusin().val(g).focusout();f.html(e);b.setCenter({lat:c,lng:d})})}function u(a){var b=a.find(".store-locator-tab");b.on("click, touchend",function(){b.removeClass("active-tab");h(this).hasClass("list-tab")?(h(this).addClass("active-tab"),h(this).parent().siblings(".store-locator-container").addClass("list-visible").removeClass("map-visible")):
h(this).hasClass("map-tab")&&(h(this).addClass("active-tab"),h(this).parent().siblings(".store-locator-container").removeClass("list-visible").addClass("map-visible"))})}function A(a){var b=a.find(".store-locator-shop-item"),c=a.find(".store-locator-shop-list");2<b.length&&a.find(".store-locator-more-less-wrapper").removeClass("hidden");c.children(".store-locator-shop-item:gt(1)").addClass("hidden-by-default").hide();h(".store-locator-more-less").on("click",function(a){a.stopPropagation();a=h(this).parent().siblings(".store-locator-shop-list").find(".hidden-by-default");
a.is(":hidden")?a.show():a.hide();h(this).toggleClass("store-locator-more-less-open");h(this).text("Less collection points"===h(this).text()?"More collection points":"Less collection points")})}var y={},D,w,r=common.Utils,x=common.dynFormUtils,C;y.load=function(a){a.each(e)};f.register({name:"store-locator",api:y,selector:".store-locator"})})(VMJS,window.VMCSJT,VMJSjQuery);
(function(f,a){function h(b,c){b=a(c);d(b)}var e={},d=function(a){var b=a.find(".simple-accordion-title"),d=a.find(".simple-accordion-content"),e=a.find(".simple-accordion-content-inner");b.on("click",function(){e.animate({opacity:1,height:"toggle"},200,function(){b.toggleClass("open");d.toggleClass("closed")})})};e.init=function(a){a.each(h)};f.register({name:"simple-accordion",api:e,selector:".simple-accordion"})})(VMJS,VMJSjQuery);
(function(f,a,h){function e(a){return a.some(function(a){return"QuickStartInstallation"===a.installationtype})}function d(a){return a.some(function(a){return"MannedInstallation"===a.installationtype})}function b(b,g){var f=b.data("appointments-api");a.journeyMisc.hasAppointments=!1;a.journeyMisc.qsEligible=!1;a.journeyMisc.realAppointments=!1;a.getAppointments=U.callAPI(P+f.endpointUrl,f.httpMethod,null,!1,f.xhr,f.isAkanaEndpoint).then(function(f){a.journeyMisc.hasAppointments=f.appointments&&0<Object.keys(f.appointments).length;
a.journeyMisc.qsEligible=f.appointments&&(f.appointments.quickstartdelivery&&f.appointments.quickstartdelivery.availabledates&&e(f.appointments.quickstartdelivery.availabledates)||f.appointments.quickstartcollection&&f.appointments.quickstartcollection.availabledates&&e(f.appointments.quickstartcollection.availabledates));a.journeyMisc.realAppointments=f.appointments&&f.appointments.engineer&&f.appointments.engineer.availabledates&&d(f.appointments.engineer.availabledates);g.validator("update");c(b,
g);L.hideBannerMessages()}).fail(function(d){L.handleApiErrors({apiLabel:f.apiLabel,xhr:d},b,"error",null,!0,!1);a.apiData.basket.installAndSetup.some(function(a){return"QuickStartInstallation"===a.attributes.install_type})&&(g.validator("update"),c(b,g),L.hideBannerMessages())})}function c(b,c){g(b);b.find(".quickstart-radiogroup .radio input").off("change").on("change",function(){var d=h(this),g=d.closest(".radio").hasClass("self-installation");d.closest(".quickstart-radiogroup").find(".radio").removeClass("active");
g?(d.closest(".radio").addClass("active"),d.closest(".quickstart-radiogroup").siblings(".self-installation-content").removeClass("hidden"),d.closest(".quickstart-radiogroup").siblings(".manned-installation-content").addClass("hidden"),d=a.serviceability.networkServiceabilityDetails.premiseServedByIRS,g=b.find(".sh-irsPremiseNoWrapper"),d?(d=a.serviceability.irsNoFaceplatePremise,g=b.find(".sh-irsPremiseYesWrapper"),d?p(b,c):k(b,c,g,!0)):k(b,c,g,!1)):(d.closest(".radio").addClass("active"),d.closest(".quickstart-radiogroup").siblings(".manned-installation-content").removeClass("hidden"),
d.closest(".quickstart-radiogroup").siblings(".self-installation-content").addClass("hidden"),c.find("button[type\x3dsubmit]").prop("disabled",!1),J(b,c),d=b.find(".self-installation-content").children(),K(d,c),E(b))})}function g(a){h(document).ajaxStop(function(){a.find('.self-installation input[name\x3d"quickstartInstallation"]').click()})}function k(a,b,c,d){var g=c.find('[class^\x3d"sh-"]').find("input"),e=c.find(".sh-damagedSocket"),f=e.find("input");G(c,g);z(e,f,b);d?q(a,b,f):m(a,b,f,c)}function q(a,
b,c){var d=b.find(".irsPremiseYesWrapper");c.on("change",function(){var c=h(this),d=h(this).closest("form").find("button[type\x3dsubmit]");"no"===h(this).val()?(d.prop("disabled",!1),p(a,b)):(d.prop("disabled",!0),I(c,b))});l(d)}function l(a){a=a.find(".column-splitter");1===a.length&&a.addClass("one-column")}function m(b,c,d,g){d.off("change").on("change",function(){var d=h(this);"no"===d.val()?"FTTP"===a.serviceability.networkServiceabilityDetails.deliveryMethod?n(b,c,g):p(b,c):(J(b,c),N(d,c),I(d,
c),E(b))})}function n(a,b,c){c=c.find(".sh-qsPSURequired");var d=c.find("input");z(c,d,b);d.off("change").on("change",function(){p(a,b)})}function p(a,b){switch(t().length){case 0:B(a,b);break;case 1:u(a,b);break;case 2:A(a,b)}}function t(){return a.apiData.basket.equipments.filter(function(a){return"C"===a.attributes.service_category_code})}function B(a,b){var c=a.find(".sh-routerPhoneColocated"),d=c.find("input");z(c,d,b);d.on("change",function(){var c=h(this);"yes"===c.val()?C(a,b):(J(a,b),I(c,
b),E(a))})}function u(a,b){var c=a.find(".sh-quickStartMainBoxColocated"),d=c.find("input");z(c,d,b);d.on("change",function(){var c=h(this);"yes"===c.val()?D(a,b):(J(a,b),I(c,b),E(a))})}function A(a,b){var c=a.find(".sh-quickStartSTBWrapper"),d=c.find('div[class^\x3d"sh-"]').find("input"),g=c.find(".sh-quickStartMainBoxColocated"),e=g.find("input");G(c,d);z(g,e,b);e.on("change",function(){var d=h(this);"yes"===d.val()?y(c,a,b):(J(a,b),N(d,b),I(d,b),E(a))})}function y(a,b,c){a.find(".sh-quickStartAOColocated").find("input").off("change").on("change",
function(){var a=h(this);"yes"===a.val()?D(b,c):(J(b,c),I(a,c),E(b))})}function D(a,b){var c=t();switch(w(c).length){case 0:C(a,b);break;case 1:r(a,b,!1);break;case 2:r(a,b,!0)}}function w(a){return a.filter(function(a){return"leapfrog"===a.attributes.outlet_type})}function r(a,b,c){c=c?a.find(".sh-AOAllowedWrapper"):a.find(".sh-AONotAllowedWrapper");var d=c.find('div[class^\x3d"sh-"]'),g=d.find("input");G(c,g);z(d,g,b);x(a,b,c)}function x(a,b,c){c.find("input").on("change",function(){var c=h(this);
"one"===c.val()||"both"===c.val()||"yes"===c.val()?C(a,b):(J(a,b),I(c,b),E(a))})}function C(b,c){if("paperlessBilling"===a.apiData.basket.billingItem.productType){var d=b.find(".sh-collectionOrDelivery"),g=d.find("input");H(b,"paperlessBilling");z(d,g,c);F(b,c,g);d.find('.click-and-collect input[name\x3d"collectionOrDelivery"]').click()}else H(b,"paperBilling")}function E(a){a.find(".sh-NumberPortingMessagePaperBilling").addClass("hidden")}function F(a,b,c){c.on("change",function(){if("collection"===
h(this).val()){var c=a.data("nextformid-click-and-collect");b.data("nextformid",c);b.attr("data-nextformid",c)}else c=a.data("nextformid-delivery"),b.data("nextformid",c),b.attr("data-nextformid",c)})}function G(a,b){a.removeClass("hidden");b.removeClass("wrapper-ignore")}function z(a,b,c){a.removeClass("hidden");b.removeClass("ignore");c.validator("update")}function H(a,b){"paperBilling"===b?a.find(".sh-NumberPortingMessagePaperBilling").removeClass("hidden"):"paperlessBilling"===b&&a.find(".sh-NumberPortingMessagePaperlessBilling").removeClass("hidden")}
function N(a,b){a=a.closest("div.radio-button").siblings(".radio-button").children("div");var c=a.find("input");a.addClass("hidden");c.addClass("ignore").prop("checked",!1);b.validator("update")}function I(a,b){a=(0<a.closest(".show-hide-wrapper").length?a.closest(".show-hide-wrapper"):a.closest("div.radio-button")).nextAll();K(a,b)}function K(a,b){a.each(function(){var a=h(this);if(a.hasClass("show-hide-wrapper")){var c=a.children(".sh-wrapper-component");var d=c.find('div[class^\x3d"sh-"]');var g=
a=d.find("input");c.addClass("hidden");g.addClass("wrapper-ignore")}else d=a.find('div[class^\x3d"sh-"]'),a=d.find("input");c=d;c.addClass("hidden");c.closest(".show-hide-wrapper").find(".dyn-form-message-banner").addClass("hidden");a.addClass("ignore").prop("checked",!1);a.closest(".form-group").removeData("oldValue");b.validator("update")})}function J(a,b){a=a.data("nextformid-installation");b.data("nextformid",a);b.attr("data-nextformid",a)}function Q(b){var c=b.closest("form"),d=c.find("button[type\x3dsubmit]"),
g=c.data("api-endpoints"),e=b.data("click-and-collect-api"),f=b.data("nextformid-click-and-collect");d.off("click").on("click",function(d){d.preventDefault();d=c.serializeArray();var k,l={qanda:k=[]},m={};h.each(d,function(a,b){"campaignID"!==b.name&&"campaignName"!==b.name&&"campaignType"!==b.name&&"kanaTemplateID"!==b.name&&"recipientEmailAddress"!==b.name&&"subject"!==b.name&&"requestID"!==b.name&&"serviceCode"!==b.name&&("mobilenumber"===b.name?m.mobilenumber=b.value:k.push({questionkey:b.name,
answer:b.value}))});h.when(U.callAPI(P+g.endpointUrl,g.httpMethod,l,!0,g.xhr,g.isAkanaEndpoint)).then(function(d){a.setGlobalData("apiData",a.parseBasketApiData(d));c.data("nextformid")===f?U.callAPI(P+e.endpointUrl,e.httpMethod,m,!0,e.xhr,e.isAkanaEndpoint).then(function(){L.hideBannerMessages();c.submit()}).fail(function(a){L.handleApiErrors({apiLabel:e.apiLabel,xhr:a},b,"error",null,!0,!1,null,function(){L.continueJourney(c)})}):(L.hideBannerMessages(),c.submit())}).fail(function(a){L.handleApiErrors({apiLabel:g.apiLabel,
xhr:a},b,"error",null,!0,!1,null,function(){L.continueJourney(c)})})})}function S(a,c){var d=h(c);a=d.closest(".dyn-form");c=d.data("form-id-auto-populate");var g=d.data("mobile-phone-fieldname"),e=d.find('input[name\x3d"mobilenumber"]');P=sessionStorage.getItem("storeDomainServiceability");L.autopopulateFields(c,g,!1,e);a.on("dynFormVisible",function(){var a=JSON.parse(window.sessionStorage.getItem("journeyMisc"))||{},b=d.find(".sh-NumberPortingMessagePaperBilling .numberPortingMessageWarning"),
c=d.find(".sh-NumberPortingMessagePaperlessBilling .numberPortingMessageWarning");"undefined"!==typeof a.keepMobilePhone&&(!1===a.keepMobilePhone?(b.removeClass("hidden"),c.removeClass("hidden")):(b.addClass("hidden"),c.addClass("hidden")))});b(d,a);Q(d)}var T={},U=common.Utils,L=common.dynFormUtils;U.isLaunchOrPreview();var P;T.load=function(a){a.each(S)};f.register({name:"quickstart-component",api:T,selector:".quickstart-component.publish-mode"})})(VMJS,window.VMCSJT,VMJSjQuery);
(function(f,a){function h(b,c){b=a(c);var g=b.find(".timeout-modal");b.find(".trigger-modal").on("click",function(){d.modalWithContentOverflow(g)})}var e={},d=common.dynFormUtils;e.load=function(a){a.each(h)};f.register({name:"timeout",api:e,selector:".timeout"})})(VMJS,VMJSjQuery);
(function(f,a,h){function e(b,c){var g=h(c).find(".cms-calendar-wrapper"),e=g.data("endpoint-calendar"),f=g.closest(".dyn-form"),k=a.serviceability,l=g.data("calendarType");S=sessionStorage.getItem("storeDomainServiceability");if(g.hasClass("author-mode"))return d(g,f,"templateConfig");switch(l){case "faceplate":case "engineer":var m="MannedInstallation";break;case "quickstartdelivery":m="QuickStartInstallation";break;case "quickstartcollection":m="clickAndCollect"}f.on("dynFormVisible",function(){g.find(".real-time-calendar").addClass("hidden");
g.find(".cms-calendar-config").addClass("hidden");var a=null;"faceplate"!==l&&y()&&(a={startdate:(new moment(y())).add(1,"days").format("YYYY-MM-DD")});E.callAPI(S+e.endpointUrl,e.httpMethod,a,!1,e.xhr,e.isAkanaEndpoint).done(function(a){if(a&&!a.products)return g.find(".cms-calendar-config").removeClass("hidden"),g.find(".real-time-calendar input").addClass("ignore").removeAttr("required"),d(g,f,"templateConfig");r(a,l,m);if(a.appointments&&J){g.find(".real-time-calendar").removeClass("hidden");
g.find(".cms-calendar-config input").addClass("ignore").removeAttr("required");d(g,f,"templateGiada");a=h(c).find(".auto-compensation-text");var b=h(c).find(".lw-auto-compensation-text"),e=h(c).find(".nonlw-auto-compensation-text");k.wayLeave?(a.addClass("hidden"),b.removeClass("hidden")):(a.addClass("hidden"),e.removeClass("hidden"))}else g.find(".cms-calendar-config").removeClass("hidden"),g.find(".real-time-calendar input").addClass("ignore").removeAttr("required"),d(g,f,"templateConfig")}).fail(function(){g.find(".cms-calendar-config").removeClass("hidden");
g.find(".real-time-calendar input").addClass("ignore").removeAttr("required");d(g,f,"templateConfig")})})}function d(a,d,e){var f=a.data("endpoint-submit-slots");b(a,e);c(a,e);k(a,e);x(a,f);D(a);w(a);if(d.hasClass("dyn-form-ready"))g(a,d);else d.on("dynFormReady",function(){g(a,d)});a.find("fieldset").prop("disabled",!1)}function b(b,c){b=b.find(".owl-carousel");a.calendarTpl={};if(sessionStorage.getItem("calendarTpl")){var d=JSON.parse(sessionStorage.getItem("calendarTpl"));a.calendarTpl=d}0<b.find("script").length&&
b.each(function(){h.isArray(a.calendarTpl[c])?a.calendarTpl[c].push(h(this).closest("fieldset").prop("outerHTML")):a.calendarTpl[c]=[h(this).closest("fieldset").prop("outerHTML")]});(!d||d&&!d[c])&&sessionStorage.setItem("calendarTpl",JSON.stringify(a.calendarTpl))}function c(b,c){b=b.find(".owl-carousel");0===b.find("script").length&&b.each(function(b){a.calendarTpl[c]&&a.calendarTpl[c][b]&&h(this).closest("fieldset").replaceWith(a.calendarTpl[c][b])})}function g(a,b){b.hasClass("dyn-form-ready-repopulated")&&
a.find("div:not(.hidden) \x3e div \x3e fieldset \x3e div.owl-carousel").each(function(b,c){c=h(c);var d=c.closest("fieldset").siblings("input.selectedValInfo").val();d&&(c=c.find('input[type\x3d"radio"][value\x3d"'+d+'"]'),c.data("isRepopulate",!0),c.trigger("click"),0===b&&a.find(".dyn-form-carousel-2").length&&a.find(".btn.btn-primary").trigger("click"))})}function k(a,b){var c=a.data("leadtime"),d=a.data("include-saturdays"),g=a.data("include-sundays"),e=a.data("total-working-days"),f=a.data("multi-slots"),
k=a.data("non-working-days-list"),l=a.find(".owl-carousel");l.each(function(){var l=h(this),m=l.find("script").html(),p=a.data("calendarType");if("templateConfig"===b){var q=(new moment).startOf("day");var w=(new moment(q)).add(c,"days");if(y()&&"faceplate"!==p){var x=new moment(y());x.isAfter(w)&&(w=x.add(1,"days"))}q=w.diff(q,"days");w=Handlebars.compile(m);x=[];for(var A=0;x.length<=e;){var r=(new moment).add(q+A,"day"),C="both";if(0===r.day()&&"priority"===g||6===r.day()&&"priority"===d)C="priority";
else if(0===r.day()&&"standard"===g||6===r.day()&&"standard"===d)C="standard";else if(0===r.day()&&"both"===g||6===r.day()&&"both"===d)C="both";else if(0===r.day()&&"none"===g||6===r.day()&&"none"===d)C="disabled";for(var B=0;B<k.length;B++){var D=r.format("DD/MM/YYYY");D===k[B].nonWorkingDay&&"priority"===k[B].nonWorkingDayType?C="disablePriority":D===k[B].nonWorkingDay&&"standard"===k[B].nonWorkingDayType?C="disableStandard":D===k[B].nonWorkingDay&&"both"===k[B].nonWorkingDayType&&(C="disableBoth")}r=
{date:r.date(),day:r.format("ddd"),value:r.format("D-MMM-YYYY"),dateApiFormat:r.format("YYYY-MM-DD"),correspondingMonth:r.format("MMMM"),typeSlot:C};x.length?x.push(r):"disabled"!=C&&"disableBoth"!=C&&x.push(r);A++}q=w({futureDatesArr:x,includeSaturdays:d,includeSundays:g,multiSlots:f,pricePriority:z,priceStandard:G,productCodePriority:N,productCodeStandard:H,displaySlotTime:"quickstartcollection"!==p})}"templateGiada"===b&&(q=Handlebars.compile(m)({futureDatesArr:n(I,K,p)}));l.html(q).owlCarousel({mouseDrag:!1,
loop:!1,responsiveClass:!0,nav:!0,smartSpeed:100,slideBy:7,navContainer:l.parent().find(".calendar-carousel-nav"),navText:["\x3ci class\x3d'fa fa-angle-left'\x3e\x3c/i\x3e","\x3ci class\x3d'fa fa-angle-right'\x3e\x3c/i\x3e"],responsive:{0:{items:3,margin:10},768:{items:5,margin:10},1024:{items:6,margin:10}},onInitialized:t,onRefreshed:t,onTranslated:t,onResized:t});u(a,l);l.trigger("refresh.owl.carousel")});a.find(".dyn-form-carousel-2").length&&l.length&&p(a)}function q(a,b,c){var d=[];h.each(a,
function(a,g){var e=!1;h.each(b,function(a,b){b.slotCode===g.slotcode&&(e=!0)});d.push({slotCode:g.slotcode,productCode:g.installationcode,realtime:g.realtime,slotTime:g.slottime,slotPrice:g.price,slotType:g.installationclassification,disabled:!e,displaySlotTime:"quickstartcollection"!==c})});return d}function l(a){var b=[];h.each(a,function(a,c){0===b.filter(function(a){return a.date===c.date}).length&&b.push({date:c.date,callCode:c.callCode,classification:c.classification,appointmentTypeGroup:c.appointmentTypeGroup})});
return b}function m(a,b,c,d,g){for(var e=1;e<d;e++){var f=c.add(e,"day");a.push({date:f.date(),day:f.format("ddd"),dateFormat:f.format("YYYY-MM-DD"),value:f.format("D-MMM-YYYY"),correspondingMonth:f.format("MMMM"),correspondingTimeSlots:q(b,[],g)})}return a}function n(a,b,c){var d=[],g=[],e=l(a);h.each(e,function(e,f){e=new moment(f.date.toString());var k=[];if(d.length){var l=moment(d[d.length-1].dateFormat),n=e.diff(l,"days");1<n&&(d=m(d,b,l,n,c))}h.each(a,function(a,b){f.date===b.date&&k.push({slotCode:b.slotCode})});
g=q(b,k,c);d.push({date:e.date(),day:e.format("ddd"),dateFormat:e.format("YYYY-MM-DD"),value:e.format("D-MMM-YYYY"),correspondingMonth:e.format("MMMM"),correspondingTimeSlots:g,callCode:f.callCode,classification:f.classification,appointmentTypeGroup:f.appointmentTypeGroup})});return d}function p(a){var b=a.find(".dyn-form-carousel-1"),c=a.find(".dyn-form-carousel-2");b.find("input").on("change",function(){var a=h(this).val(),b=c.find('input[type\x3d"radio"][value\x3d"'+a+'"]'),d=c.closest("fieldset").siblings(".selectedValInfo");
c.find(".cms-calendar-pref-first").removeClass("cms-calendar-pref-first").siblings("input").attr({disabled:!1});b.closest("fieldset").find(".selectedValText").val("");b.attr({disabled:!0,checked:!1});b.siblings("span").addClass("cms-calendar-pref-first");a===d.val()&&d.val(null).trigger("blur")})}function t(a){var b=h(a.target),c=[];a=b.closest("fieldset").find(".visible-month");b.find(".owl-item.active").each(function(){var a=h(this).find(".date-item").data("corresponding-month");c.push(a)});b=c.filter(function(a,
b,c){return c.indexOf(a)==b});a.html(b.join(" / "))}function B(a,b){(a=a[b])&&a.availabledates&&a.availabledates.length?a.timeslots&&a.timeslots.length?(J=!0,Q=a.availabledates,K=a.timeslots,"faceplate"===b&&h.each(K,function(a,b){b.price="0"})):J=!1:J=!1}function u(b,c){c.find("input").on("change",function(){var d=h(this),g={date:d.data("date"),installationcode:d.data("value"),slottime:d.data("slottime"),slotcode:d.data("slotcode"),classification:d.data("classification"),appointmentTypeGroup:d.data("appointment-type-group"),
callcode:d.data("callcode"),realtime:d.data("realtime"),preferredappointment:c.hasClass("dyn-form-carousel-1")},e=d.data("isRepopulate");d.removeData("isRepopulate");if(g)if(e)A(h(this),b,c);else{var f=b.data("endpointSelectedSlots");E.callAPI(S+f.endpointUrl,f.httpMethod,g,!0,f.xhr,f.isAkanaEndpoint).done(function(e){A(d,b,c,this);a.setGlobalData("apiData",a.parseBasketApiData(e));a.renderBasketSummary(null,null,!0,null);a.renderMiniBasketBasicInfo(null,b);if("faceplate"===b.data("calendarType")){e=
g.date;var f=c.hasClass("dyn-form-carousel-1"),h=JSON.parse(window.sessionStorage.getItem("journeyMisc"))||{};f?(a.journeyMisc.faceplateDate1=e,h.faceplateDate1=e):(a.journeyMisc.faceplateDate2=e,h.faceplateDate2=e);window.sessionStorage.setItem("journeyMisc",JSON.stringify(h))}}).fail(function(a){F.handleApiErrors({apiLabel:f.apiLabel,xhr:a},b,"error",null,!0,!1)})}})}function A(a,b,c,d){b=c.closest("fieldset");var g=a.siblings("span").children(".timeSlot").text(),e=a.siblings("span").children(".priceSlot").text();
g=a.parent().siblings(".date-header").find(".day").text()+" "+a.val().split("_")[0].replace(/-/g," ")+": "+g;var f=b.children(".selectedValSection"),h=f.children(".selectedValText");f=f.children(".selectedValPrice");var k={date:a.data("date"),installationcode:a.data("value"),slottime:a.data("slottime"),slotcode:a.data("slotcode"),classification:a.data("classification"),appointmentTypeGroup:a.data("appointment-type-group"),callcode:a.data("callcode"),realtime:a.data("realtime"),preferredappointment:c.hasClass("dyn-form-carousel-1")};
d?c.find('input[type\x3d"radio"].ignore').add(d).toggleClass("ignore"):c.find('input[type\x3d"radio"].ignore').toggleClass("ignore");c.find(".date-header.selected").removeClass("selected");a.closest(".date-item").find(".date-header").addClass("selected");b.find(".selectedValSection").removeClass("hidden");c.data("selection",k);b.siblings(".selectedValInfo").val(a.val()).trigger("blur");h.html(g);f.html(e);c.closest(".cms-calendar").find(".btn-primary").removeAttr("disabled");F.hideBannerMessages()}
function y(){return a.journeyMisc.faceplateDate2?(new moment(a.journeyMisc.faceplateDate2)).isAfter(new moment(a.journeyMisc.faceplateDate1))?a.journeyMisc.faceplateDate2:a.journeyMisc.faceplateDate1:a.journeyMisc.faceplateDate1}function D(a){a.find(".btn.btn-primary").attr("disabled","disabled").on("click",function(){var b=h(this).siblings(".first-preference").find(".selectedValSection"),c=b.find(".selectedValText").text();b=b.find(".selectedValPrice").text();a.find(".cms-cal-first-preference").removeClass("hidden");
a.find(".cms-cal-first-preference .cms-cal-selected-first-preference").html(c);a.find(".cms-cal-first-preference .cms-cal-selected-first-price").html(b);a.find(".second-preference").removeClass("hidden");a.find(".second-preference .owl-carousel").trigger("refresh.owl.carousel");a.find(".btn.btn-primary").addClass("hidden");a.find(".first-preference").addClass("hidden")})}function w(a){a.find(".cms-cal-first-preference-edit").on("click",function(){a.find(".cms-cal-first-preference").addClass("hidden");
a.find(".second-preference").addClass("hidden");a.find(".btn.btn-primary").removeClass("hidden");a.find(".first-preference").removeClass("hidden")})}function r(a,b,c){h.each(a.products,function(a,d){if(!d.category&&d.installationtype===c||d.category===c)"Standard"===d.classification&&(G="faceplate"===b?"0":d.price,H=d.installationcode),"Priority"===d.classification&&(z="faceplate"===b?"0":d.price,N=d.installationcode)});a.appointments&&(B(a.appointments,b),I=[],h.each(Q,function(a,c){0===c.timeslots.length?
I.push({date:c.date,callCode:c.callcode,classification:c.classification,appointmentTypeGroup:c.appointmenttypegroup,realtime:null,productCode:null,slotCode:null,slotTime:null,slotPrice:null,slotType:null}):h.each(c.timeslots,function(a,d){I.push({date:c.date,callCode:c.callcode,classification:c.classification,appointmentTypeGroup:c.appointmenttypegroup,realtime:d.realtime,productCode:d.installationcode,slotCode:d.slotcode,slotTime:d.slottime,slotPrice:"faceplate"===b?"0":d.price,slotType:d.installationclassification})})}))}
function x(a,b){var c=a.closest("form");c.find("button[type\x3dsubmit]").off("click").on("click",function(b){b.preventDefault();a.find("fieldset").prop("disabled",!0);c.trigger("submit")})}var C={},E=common.Utils,F=common.dynFormUtils,G=null,z=null,H,N,I=[],K=[],J=!1,Q=[],S;C.load=function(a){a.each(e)};f.register({name:"cms-calendar",api:C,selector:".cms-calendar"})})(VMJS,window.VMCSJT,VMJSjQuery);
(function(f,a){function h(d,b,c,g){var e=b.find(".button-spinner-active-text"),f=b.find(".button-default-text"),h=d.data().lifecycleEndpoints.find(function(a){return"preAbandonment"===a.lifecycle}).endpointUrl;a(document).ajaxSend(function(a,d,k){k.url!==h&&b.addClass(c).attr("disabled",!0);g&&(e.removeClass("hidden"),f.addClass("invisible"))});a(document).ajaxStop(function(){b.removeClass(c).attr("disabled",!1);g&&(e.addClass("hidden"),f.removeClass("invisible"));d.validator("toggleSubmit")})}function e(d,
b){var c=a(b);d=c.closest("form");b=c.find(".button-primary-default");c=c.find(".btn-primary-spinner-active");0<b.length?h(d,b,"disabled",!1):h(d,c,"disabled-ss-call",!0)}f.register({name:"primary-button",api:{load:function(a){a.each(e)}},selector:".primary-button"})})(VMJS,VMJSjQuery);
(function(f,a,h){function e(b,c){b=h(c);c=b.closest("form");var d=c.find(".emergency-backup-line-wrapper"),e=d.data("form-id-auto-populate"),f=d.data("initial-listing-details-fieldname");d=d.data("name-listing-details-fieldname");var k=b.find('input[name\x3d"InitialForListingDetails"]'),l=b.find('input[name\x3d"NameForListingDetails"]');m=sessionStorage.getItem("storeDomainServiceability");q.autopopulateFields(e,f,!0,k);q.autopopulateFields(e,d,!1,l);a.checkBasketContents("PhoneSolus")?(b.find(".sh-BasketPhoneSolusYes").removeClass("hidden"),
b.find('input[value\x3d"TRDOptionTwo"], input[value\x3d"TRDOptionThree"]').data("shows","PhoneSolus"),b.find('input[value\x3d"TRDOptionTwo"], input[value\x3d"TRDOptionThree"]').data("hides","DirectoryEnquiries")):(b.find(".sh-BasketPhoneSolusNo").removeClass("hidden"),b.find('input[value\x3d"TRDOptionTwo"], input[value\x3d"TRDOptionThree"]').data("shows","PhoneSolus,DirectoryEnquiries,EBLITextRelay"));a.checkBasketContents("21CVpremise")?b.find(".nonCVpremiseInformation").addClass("hidden"):(b.find(".sh-Impairment, .ebulInformation, .accesibilityAccordion").addClass("hidden"),
b.find('input[name\x3d"Impairment"]').addClass("ignore"),b.find(".sh-KeepMobilePhoneNoSelected").removeClass("hidden"),b.find(".sh-KeepMobilePhone").removeClass("hidden"));g(b,c)}function d(a){switch(a){case "TRDOptionTwo":return"LEGACY";case "TRDOptionOne":return"NGTS";case "TRDOptionThree":return"BOTH";case void 0:return"NONE"}}function b(b){b=b.find('input[name\x3d"KeepMobilePhone"]:checked').val();var c=JSON.parse(window.sessionStorage.getItem("journeyMisc"))||{};"undefined"!==b&&"KeepMobilePhoneNo"===
b?(c.keepMobilePhone=!1,a.journeyMisc.keepMobilePhone=!1,window.sessionStorage.setItem("journeyMisc",JSON.stringify(c))):"undefined"!==b&&"KeepMobilePhoneYes"===b&&(c.keepMobilePhone=!0,a.journeyMisc.keepMobilePhone=!0,window.sessionStorage.setItem("journeyMisc",JSON.stringify(c)))}function c(b){b=b.find('input[name\x3d"ConnectionToHomePhone"]:checked').val();var c=JSON.parse(window.sessionStorage.getItem("journeyMisc"))||{};c.connectToHomePhone=b;a.journeyMisc.connectToHomePhone=b;window.sessionStorage.setItem("journeyMisc",
JSON.stringify(c))}function g(g,e){var f=e.find("button[type\x3dsubmit]"),h=e.find(".emergency-backup-line-wrapper"),k=h.data("keep-current-phone-number-api"),n=h.data("vulnerability-check-api"),p=h.data("prospect-api");f.off("click").on("click",function(f){f.preventDefault();switch(e.find('input[name\x3d"ConnectionToHomePhone"]:checked').val()){case "connectionToHomePhoneYES":var h="Yes";break;case "connectionToHomePhoneNO":h="No";break;case "connectionToHomePhoneNS":h="Don't Know";break;default:h=
null}f=e.find('input[name\x3d"TRDConnectedLandline"]:checked').val();var t=e.find('input[name\x3d"KeepMobilePhone"]:checked').val(),x=e.find('input[name\x3d"NumberAtInstallationAddress"]:checked').val(),u=e.find('input[name\x3d"DirectoryEnquiries"]:checked').val(),A=e.find('input[name\x3d"EBLITextRelay"]:checked').val(),y=e.find('input[name\x3d"MobilePhone"]:checked').val();h={keepHomePhoneNumber:"undefined"===t?!1:"KeepMobilePhoneYes"===t,homeNumber:e.find('input[name\x3d"CurrentHomePhoneNumber"]').val()||
void 0,serviceProvider:e.find('input[name\x3d"CurrentServiceProvider"]').val()||void 0,numberUsedAtAddress:"undefined"===x?void 0:"NumberAtInstallationAdressYes"===x,postCode:e.find('input[name\x3d"NAIANoSelected"]').val()||void 0,listInDirectoryEnquiries:"undefined"===u?void 0:"DirectoryEnquiriesYes"===u,initialName:e.find('input[name\x3d"InitialForListingDetails"]').val()||void 0,lastName:e.find('input[name\x3d"NameForListingDetails"]').val()||void 0,telehealthAndAlarm:h};var B={vulnerable:"ImpairmentYes"===
e.find('input[name\x3d"Impairment"]:checked').val()?"vulnerable":"notVulnerable",needsEmergencyBackUpLine:"undefined"===A?void 0:"EmergencyBackupLineInstallationYes"===A,textRelayService:d(f),hasMobilePhone:"undefined"===y?!1:"MobilePhoneYes"===y};b(e);c(e);l.callAPI(m+k.endpointUrl,k.httpMethod,h,!0,k.xhr,k.isAkanaEndpoint).done(function(){q.hideBannerMessages();a.checkBasketContents("21CVpremise")?l.callAPI(m+n.endpointUrl,n.httpMethod,B,!0,n.xhr,n.isAkanaEndpoint).done(function(){l.callAPI(m+p.endpointUrl,
p.httpMethod,null,!1,p.xhr,p.isAkanaEndpoint).fail(function(a){q.handleApiErrors({apiLabel:p.apiLabel,xhr:a},g,"error",null,!0,!1)});q.hideBannerMessages();e.trigger("submit")}).fail(function(a){q.handleApiErrors({apiLabel:n.apiLabel,xhr:a},g,"error",null,!0,!1)}):(l.callAPI(m+p.endpointUrl,p.httpMethod,null,!1,p.xhr,p.isAkanaEndpoint).fail(function(a){q.handleApiErrors({apiLabel:p.apiLabel,xhr:a},g,"error",null,!0,!1)}),e.trigger("submit"))}).fail(function(a){q.handleApiErrors({apiLabel:k.apiLabel,
xhr:a},g,"error",null,!0,!1)})})}var k={},q=common.dynFormUtils,l=common.Utils,m;k.load=function(a){a.each(e)};f.register({name:"emergency-backup-line",api:k,selector:".publish-mode .emergency-backup-line"})})(VMJS,window.VMCSJT,VMJSjQuery);
(function(f,a,h){function e(a,b,c){var d=a.find(".dd-oin-rte-wrapper"),g=d.html();n.callAPI(m+b.endpointUrl+c+"/oin",b.httpMethod,null,!1,b.xhr,b.isAkanaEndpoint).then(function(a){a=Handlebars.compile(g)({oin:a.oin});d.html(a).removeClass("hidden")}).fail(function(c){l.handleApiErrors({apiLabel:b.apiLabel,xhr:c},a,"error",null,!0,!1)})}function d(b,c,d,g,e){c.find("button[type\x3dsubmit]").off("click").on("click",function(f){f.preventDefault();var h={accountDetails:{name:d.name.val(),accountNumber:d.accountNumber.val(),
sortCode:d.sortCode.val(),singleSignatory:d.singleSignatory.is(":checked")},branchAddress:{name:d.bankName.val(),address1:d.address1.val(),address2:d.address2.val(),address3:d.address3.val()}};n.callAPI(m+g.endpointUrl+e,"PUT",h,!0,g.xhr,g.isAkanaEndpoint).then(function(){"cable"===e&&a.checkBasketContents("SIMPresent")&&(a.journeyMisc=a.journeyMisc||{},a.journeyMisc.directDebitCable=h);l.hideBannerMessages();c.trigger("submit")}).fail(function(a){l.handleApiErrors({apiLabel:g.apiLabel,xhr:a},b,"error",
null,!0,!1)})})}function b(b,d,g,e){var f=a.journeyMisc.directDebitCable;if(f){var k=b.find('input[name\x3d"useSameBankInfoRadio"]');b=b.find(".sh-useSameBankInfoWrapper");var l=b.html();l=Handlebars.compile(l)({name:f.accountDetails.name,accountNumber:f.accountDetails.accountNumber,sortCode:f.accountDetails.sortCode});b.html(l);k.on("change",function(){"useSameBankInfoYes"===k.filter(":checked").val()?(h.each(g,function(a,b){var c="bankName"===a||"address1"===a||"address2"===a||"address3"===a?"branchAddress":
"accountDetails";a="branchAddress"===c&&"bankName"===a?"name":a;"singleSignatory"===a?b.prop("checked",f[c][a]):b.val(f[c][a]);b.removeClass("wrapper-ignore").trigger("change")}),d.validator("update"),c(f.branchAddress,e),e.singleSignatoryWrapper.removeClass("hidden")):(h.each(g,function(a,b){b.val(null)}),e.bankLetterWrapper.html(e.bankLetterTemplate).addClass("hidden"),e.singleSignatoryWrapper.addClass("hidden"))})}}function c(a,b){a=Handlebars.compile(b.bankLetterTemplate)({bankName:a.name,address1:a.address1,
address2:a.address2,address3:a.address3});b.bankLetterWrapper.html(a).removeClass("hidden")}function g(a,b,d){function g(){var a=e.data("validate-again-text");e.removeClass("btn-primary").addClass("btn-secondary");e.text(a)}var e=a.find(".dd-validate-bank"),f=a.find(".sh-validateBankError"),k=a.find(".sh-validateBankErrorMaxTries"),q=a.find(".sh-verifyBankDetailsInfo"),p=a.data("dd-bank-api"),x=0,t,B,F;e.click(function(){var u=!0;h.each([b.name,b.accountNumber,b.sortCode],function(){""===h(this).val()&&
(u=!1,h(this).trigger("change"))});u&&("GET"===p.httpMethod?(t=m+p.endpointUrl+"?bankAccountNumber\x3d"+b.accountNumber.val()+"\x26sortCode\x3d"+b.sortCode.val()+"\x26nameOnAccount\x3d"+b.name.val(),B=null,F=!1):"POST"===p.httpMethod&&(t=m+p.endpointUrl,B={bankAccountNumber:b.accountNumber.val(),sortCode:b.sortCode.val(),nameOnAccount:b.name.val()},F=!0),n.callAPI(t,p.httpMethod,B,F,p.xhr,p.isAkanaEndpoint).then(function(a){c(a,d);g();l.hideBannerMessages();f.addClass("hidden");k.addClass("hidden");
d.bankDetailsWrapper.addClass("hidden");q.removeClass("hidden");d.singleSignatoryWrapper.removeClass("hidden");b.bankName.val(a.name).trigger("change");b.address1.val(a.address1).trigger("change");b.address2.val(a.address2).trigger("change");b.address3.val(a.address3).trigger("change")}).fail(function(b){l.hideBannerMessages();x++;q.addClass("hidden");3===x?(e.parent().addClass("hidden"),f.addClass("hidden"),k.removeClass("hidden")):l.handleApiErrors({apiLabel:p.apiLabel,xhr:b},a,"error",null,!0,
!1,null,function(){f.removeClass("hidden")});g();d.bankDetailsWrapper.removeClass("hidden");d.singleSignatoryWrapper.removeClass("hidden")}))})}function k(a,c){if("undefined"===typeof CQ||!CQ.WCM||!CQ.WCM.isEditMode()){var f=h(c).find(".dd-payments-wrapper"),k=f.closest("form.dyn-form");a=f.data("dd-type");c=f.data("dd-api");var l=f.find(".dd-acc-holder-info"),q=l.find('input[name\x3d"name"]'),n=l.find('input[name\x3d"accountNumber"]');l=l.find('input[name\x3d"sortCode"]');var p=f.find(".dd-single-signatory-wrapper"),
r=p.find('input[name\x3d"singleSignatory"]'),x=f.find(".dd-bank-wrapper"),t=f.find(".dd-to-manager-of-wrapper"),E=t.html(),F=x.find('input[name\x3d"bankName"]'),G=x.find('input[name\x3d"address1"]'),z=x.find('input[name\x3d"address2"]'),H=x.find('input[name\x3d"address3"]'),N={name:q,accountNumber:n,sortCode:l,singleSignatory:r,bankName:F,address1:G,address2:z,address3:H},I={singleSignatoryWrapper:p,bankDetailsWrapper:x,bankLetterWrapper:t,bankLetterTemplate:E};m=sessionStorage.getItem("storeDomainServiceability");
if("mobile"===a)k.on("dynFormVisible",function(){b(f,k,N,I)});e(f,c,a);g(f,N,I);d(f,k,N,c,a)}}var q={},l=common.dynFormUtils,m,n=common.Utils;q.load=function(a){a.each(k)};f.register({name:"direct-debit-payments",api:q,selector:".direct-debit-payments"})})(VMJS,window.VMCSJT,VMJSjQuery);
(function(f,a,h){function e(c,g){var e=h(g),f=e.closest("form");c=f.find(".just-a-moment-wrapper");var k=h("#"+f.data("nextformid")),q=c.data("credit-check-api");g=c.data("payment-api");k=k.find(".review-and-confirm-wrapper").data("forward-url");k=window.location.origin+a.getShortUrl(k);var p=window.location.href;k=g.endpointUrl+"?forwardURL\x3d"+encodeURIComponent(k)+"\x26backURL\x3d"+encodeURIComponent(p);n=sessionStorage.getItem("storeDomainServiceability");b(c);"undefined"===typeof a.journeyMisc.payment?
m.callAPI(n+k,g.httpMethod,null,!1,g.xhr,g.isAkanaEndpoint).then(function(b){l.setJourneyMiscFlag("payment",b,a);l.setJourneyMiscFlag("forceRedirect",!0,a)}).always(function(){d(f,e,q)}):d(f,e,q)}function d(a,b,d){m.callAPI(n+d.endpointUrl,d.httpMethod,{},!0,d.xhr,d.isAkanaEndpoint).done(function(){g(a)}).fail(function(b){b=b.status;var d=a.data("nextformid"),g=h("#"+d);400===b?(h(".just-a-moment-section").addClass("hidden"),h(".dob-mismatch-section").removeClass("hidden"),c(d,"dob-mismatch")):404===
b&&(a.addClass("hidden"),g.removeClass("hidden"),c(d,null))});k(b,a)}function b(a){var b=h("header"),c=b.outerHeight();a.find(".just-a-moment-section.just-a-moment-overlay").css("top",c);a.data("is-publish")&&(h("body").css("overflow","hidden"),b.css({position:"fixed",top:"0",width:"100%","z-index":"9999"}))}function c(b,c){h("body").css("overflow","");h("header").css({position:"",top:"",width:"","z-index":""});a.journey.position.formID=b;a.journey.position.section=c;a.journey.utils.updateStoredJourney("position")}
function g(a){var b=a.data("nextformid"),d=h("#"+b);a.addClass("hidden");d.removeClass("hidden");d.trigger("dynFormVisible");c(b,null)}function k(a,c){a=c.find("button[type\x3dsubmit]");var d=c.find(".just-a-moment-wrapper"),e=d.data("credit-check-api");a.off("click").on("click",function(a){a.preventDefault();a={dob:d.find("input.ace-field-date")[0].value};h(".just-a-moment-section").removeClass("hidden");b(d);m.callAPI(n+e.endpointUrl,e.httpMethod,a,!0,e.xhr,e.isAkanaEndpoint).always(function(){g(c)})})}
var q={},l=common.dynFormUtils,m=common.Utils,n;q.load=function(a){a.each(e)};f.register({name:"just-a-moment",api:q,selector:".publish-mode .just-a-moment"})})(VMJS,window.VMCSJT,VMJSjQuery);
(function(f,a,h){function e(b){var c=JSON.parse(window.sessionStorage.getItem("journeyMisc"))||{},d=c.basketSummaryTpl;b=b.find(".basket-summary-wrapper");a.setGlobalData("apiData",c.apiData);a.renderBasketSummary(d,b,!0,null)}function d(a,b){var c=JSON.parse(window.sessionStorage.getItem("journeyMisc"))||{},d=a.find(".order-conf-wrapper").data("payment-api");"undefined"!==typeof b?(b={cFiRemoteRequest:b},"undefined"===typeof c.paymentDone?h.when(A.callAPI(D+d.endpointUrl,d.httpMethod,b,!0,d.xhr,
d.isAkanaEndpoint)).then(function(){m(a,c)}):m(a,c),c.paymentDone=!0,window.sessionStorage.setItem("journeyMisc",JSON.stringify(c))):m(a,c)}function b(a){var b=a.find(".forms-modal");a.find(".order-conf-view-basket").on("click",function(){y.modalWithContentOverflow(b)})}function c(b){if((JSON.parse(window.sessionStorage.getItem("journeyMisc"))||{}).orderDone){b.find(".order-error-section").addClass("hidden");b.find(".order-conf-wrapper").removeClass("hidden");h("body").removeClass("csjt-order-conf-error");
var c="order-complete"}else b.find(".order-conf-wrapper").addClass("hidden"),b.find(".order-error-section").removeClass("hidden"),h("body").addClass("csjt-order-conf-error"),c="order-error";b.find(".cms-spinner").toggleClass("hidden");c={section:c};a.journey?a.journey.position=c:a.setGlobalData("journey",{position:c});b.trigger("dynPositionChanged")}function g(b,d){var g=b.find(".order-error-section").data("order-api");A.callAPI(D+g.endpointUrl,g.httpMethod,null,!1,g.xhr,g.isAkanaEndpoint).done(function(g){var e=
JSON.parse(window.localStorage.getItem("cableServiceability"))||{};y.setJourneyMiscFlag("orderDone",!0,a);y.setJourneyMiscFlag("order",g.orderid,a);y.setJourneyMiscFlag("address",e.address.display,a);k(b);c(b);sessionStorage.removeItem("journeyData");sessionStorage.removeItem("journeyMap");localStorage.removeItem("cableServiceability");d&&d.trigger("submit")}).fail(function(){y.setJourneyMiscFlag("orderDone",!1,a);c(b);d&&d.trigger("submit")})}function k(a){var b=JSON.parse(window.sessionStorage.getItem("journeyMisc"))||
{};a=a.find(".order-conf-header-text");var c=a.html(),d={};d.order=b.order;d.address=b.address;b=Handlebars.compile(c)(d);a.html(b)}function q(a,b){b.find("button[type\x3dsubmit]").off("click").on("click",function(c){c.preventDefault();g(a,b)})}function l(a){a.find(".order-conf-print").on("click",function(){window.print()})}function m(a,b){"undefined"===typeof b.orderDone?g(a):(c(a),k(a))}function n(a){0<a.indexOf("?")&&(a=a.substring(0,a.indexOf("?")),window.history.replaceState({},document.title,
a))}function p(b){var c=!1;h.each(a.apiData.basket.equipments,function(a,b){"outlets"!==b.attributes.product_category||"horizonhdd"!==b.attributes.outlet_type&&"horizonnonhdd"!==b.attributes.outlet_type||(c=!0)});c?b.show():b.hide()}function t(a,c){var g=h(c);a=g.closest("form");c="undefined"!==typeof CQ&&CQ.WCM&&CQ.WCM.isEditMode();JSON.parse(window.sessionStorage.getItem("journeyMisc"));var f=A.getParametersFromUrl().cfiremoterequest,k=window.location.toString(),m=g.find(".order-conf-home-phone-message"),
u=g.find(".vtv-360-message-box");n(k);A.showConnectToHomePhoneSection(m);D=sessionStorage.getItem("storeDomainServiceability");c||e(g);p(u);b(g);q(g,a);l(g);if(a.hasClass("hidden"))a.on("dynFormVisible",function(){d(g,f)});else d(g,f)}function B(a,b){var c=h("body");c.hasClass("csj-tracking-fired")?c.toggleClass("csj-tracking-fired"):t(a,b)}var u={},A=common.Utils,y=common.dynFormUtils,D;u.load=function(a){a.each(B)};f.register({name:"order-confirmation",api:u,selector:".order-confirmation .publish-mode"})})(VMJS,
window.VMCSJT,VMJSjQuery);
(function(f,a,h){function e(c,e){c=h(e);var f=a.basketSummaryTpl,k=JSON.parse(window.sessionStorage.getItem("journeyMisc"))||{},l=c.find(".basket-summary-wrapper"),m="undefined"!==typeof CQ&&CQ.WCM&&CQ.WCM.isEditMode();e=c.closest("form");var u=c.find(".review-and-confirm-connect-to-home-phone-message");q=sessionStorage.getItem("storeDomainServiceability");k.apiData=a.apiData;k.basketSummaryTpl=f;window.sessionStorage.setItem("journeyMisc",JSON.stringify(k));m||a.renderBasketSummary(f,l,!0,null);
f=c.find(".service-charges");k=f.find(".service-charges-virgin-media");l=f.find(".service-charges-virgin-mobile");a.checkBasketContents("PhoneInBasket")&&!a.checkBasketContents("SIMNotPresent")?(k.show(),l.show(),f.show()):a.checkBasketContents("PhoneInBasket")&&a.checkBasketContents("SIMNotPresent")?(k.show(),l.hide(),f.show()):a.checkBasketContents("PhoneInBasket")||a.checkBasketContents("SIMNotPresent")?(l.hide(),k.hide(),f.hide()):(l.show(),k.hide(),f.show());c.closest(".tab-container-wrapper").find(".snippet-tabs-wrapper").addClass("full-width-snippet-tabs");
f=c.find(".review-and-confirm-docsis-message");a.checkBasketContents("PhoneInBasket")&&a.serviceability.phoneOverBB?f.show():f.hide();g.showConnectToHomePhoneSection(u);b(c,e);d(e);e=c.find(".review-and-confirm-docsis-message").detach();u=c.find(".review-and-confirm-connect-to-home-phone-message").detach();c=c.find(".review-and-confirm-checkbox .dyn-form-radio-check-item-desc");c.append(e);c.append(u)}function d(a){a.on("dynFormVisible",function(){var b=a.find(".review-and-confirm-wrapper").find(".btn-primary p"),
c=JSON.parse(window.sessionStorage.getItem("journeyMisc"))||{};c.payment&&"undefined"!==typeof c.payment.required&&!0===c.payment.required?(b.text("Make your one-off payment"),a.data("aftersubmit","redirect"),a.data("redirecturl",c.payment.paymentProviderURL)):b.text("Place my order")})}function b(a,b){var c=b.find("button[type\x3dsubmit]"),d=a.find(".review-and-confirm-wrapper").data("terms-and-conditions-api");c.off("click").on("click",function(c){c.preventDefault();c={termsAndConditionsAccepted:a.find('input[name\x3d"termsAndConditionsAccepted"]')[0].checked};
g.callAPI(q+d.endpointUrl,d.httpMethod,c,!0,d.xhr,d.isAkanaEndpoint).done(function(){k.hideBannerMessages();b.trigger("submit")}).fail(function(b){k.handleApiErrors({apiLabel:d.apiLabel,xhr:b},a,"error",null,!0,!1)})})}var c={},g=common.Utils,k=common.dynFormUtils,q;c.load=function(a){a.each(e)};f.register({name:"review-and-confirm",api:c,selector:".review-and-confirm"})})(VMJS,window.VMCSJT,VMJSjQuery);
(function(f,a){function h(b,c){var g=a(c),f=g.closest(".page-takeover-gap"),h=f.find(".flip-item");e(h);a(window).resize(d(function(){e(h)},200));a(window).on("orientationchange",function(){setTimeout(d(function(){h.height("auto");e(h)},200))});g.on("click",function(b){a(this).find(".flip-item").hasClass("click")&&(f.find(".tile-image-top-progressive-disclosure").not(a(this)).removeClass("clicked"),a(this).toggleClass("clicked"),b.stopPropagation())});a("body").on("click",function(){g.removeClass("clicked")})}
function e(b){var c=Math.max.apply(null,b.map(function(){return a(this).height()}).get());b.height(c)}function d(a,c,d){var b;return function(){var g=this,e=arguments,f=d&&!b;clearTimeout(b);b=setTimeout(function(){b=null;d||a.apply(g,e)},c);f&&a.apply(g,e)}}f.register({name:"flip-tile",api:{load:function(a){a.each(h)}},selector:".tile-image-top-progressive-disclosure"})})(VMJS,VMJSjQuery);
(function(f,a){function h(e,d){e=a(d);d=e.data("redirectUrl");var b=localStorage.getItem("cableServiceability")?JSON.parse(localStorage.getItem("cableServiceability")):null,c=sessionStorage.getItem("postcode")?sessionStorage.getItem("postcode"):null;b&&b.address||c?(b=(b||{address:{postcode:c}}).address,d=e.find(".message-container"),e=e.find(".message-template").html(),e=Handlebars.compile(e)(b),d.html(e)):window.location.replace(d)}f.register({name:"serviceability-rte",api:{load:function(a){a.each(h)}},
selector:".serviceability-rte.publish-mode"})})(VMJS,VMJSjQuery);
(function(f,a){function h(c,g){l.getJourneyConfig("apis-section").then(function(a){D=a;r=l.getApiByID(D,"serviceability_get");x=l.getApiByID(D,"serviceability_post");C=l.getApiByID(D,"addresses_get");E=l.getApiByID(D,"store_put");F=l.getApiByID(D,"prospect_post");G=l.getApiByID(D,"basket_get");z=l.getApiByID(D,"basket_post");l.setStoreDomain(A).always(function(a){"string"===typeof a&&(w=a);b()})});n=window.location.href.match(/(.*)\/(.*?)(?:\..*|\?.*|$)/);B=JSON.parse(sessionStorage.getItem("journeyServiceability"))||
{};u=JSON.parse(localStorage.getItem("cableServiceability"))||{};A=l.getParametersFromUrl();k();"qc"===p.journeyType&&d()&&e();a(window).bind("pageshow",function(a){a.originalEvent.persisted&&window.location.reload()})}function e(){var b=new Date;b.setDate(b.getDate()+30);b="expires\x3d"+b.toUTCString();var c=[];a.each(A,function(a,b){y.includes(a)&&c.push(a+"\x3d"+b)});document.cookie="vmMktData\x3d"+c.join("|")+";"+b+";path\x3d/"}function d(){return y.every(function(a){return A.hasOwnProperty(a)})}
function b(){var b=/^[a-zA-Z]{1,2}[0-9R][0-9a-zA-Z]?[0-9](?!.?[CIKMOV])[a-zA-Z]{2}$/i;sessionStorage.removeItem("journeyData");sessionStorage.removeItem("journeyMap");null!==p.urlParams.postcode&&p.urlParams.postcode.match(b)?(t.postcodeValid=!0,l.callAPI(w+E.endpointUrl,E.httpMethod,m,!0,E.xhr,E.isAkanaEndpoint).then(function(){localStorage.removeItem("cableServiceability");u={};sessionStorage.setItem("journeyServiceability",JSON.stringify(p));B=a.extend({},p);c()})):(t.postcodeValid=!1,a.extend(B,
{urlParams:{products:null!==p.urlParams.products?p.urlParams.products:null,addrSrc:null,uprn:null,saId:null,postcode:null},journeyType:p.journeyType}),sessionStorage.setItem("journeyServiceability",JSON.stringify(B)),l.callAPI(w+r.endpointUrl,r.httpMethod,null,!1,r.xhr,r.isAkanaEndpoint).then(function(a){localStorage.setItem("cableServiceability",JSON.stringify(a));a=sessionStorage.getItem("wasOnActivePage")||!1;l.servRedirectFunction(!0,a,w,F,G,z)}).fail(function(){u.address&&u.address.postcode?
l.callAPI(w+E.endpointUrl,E.httpMethod,m,!0,E.xhr,E.isAkanaEndpoint).then(function(){c()}):g()}))}function c(){if(t.postcodeValid){var b=p.urlParams.addrSrc;var c=p.urlParams.saId||p.urlParams.uprn;var d=p.urlParams.postcode}else b=u.address.addressIdentificationType,c=u.address.id,d=u.address.postcode;c?l.callAPI(w+C.endpointUrl,C.httpMethod,{postcode:d,addressIdentificationType:b},!1,C.xhr,C.isAkanaEndpoint).then(function(b){b=a.grep(b.addresses,function(a){return a.premiseId===c||a.uprn===c});
if(b.length){var e={},f=b[0].premiseId?"premiseId":"uprn";e.identifier=f;e[f]=b[0][f];l.callAPI(w+x.endpointUrl,x.httpMethod,e,!0,x.xhr,x.isAkanaEndpoint).then(function(a){localStorage.setItem("cableServiceability",JSON.stringify(a));l.servRedirectFunction(!0,t.isActive,w,F,G,z)}).fail(function(){g({postcode:d})})}else g({postcode:d})}).fail(function(){g({postcode:d})}):g({postcode:d})}function g(b){var c=n[1]+"/check-availability";if(b){var d="",g=0;a.each(b,function(a,b){b&&""!==b&&(d+=(0===g?"?":
"\x26")+a+"\x3d"+b,g++)});c+=d}window.location.href=c}function k(){var b=n[2],c=[];p.urlParams={products:null,addrSrc:parseInt(A.addrsrc)||null,uprn:A.uprn||null,saId:A.said||null,postcode:A.postcode?decodeURI(A.postcode).replace(/ /g,""):null};t.isActive=!!sessionStorage.getItem("wasOnActivePage")||!1;t.isActive||(p.journeyType="add-to-basket"===b?"atb":"qc");A.productcodes&&A.productcodes.length&&(a.each(decodeURI(A.productcodes).split("|"),function(a,b){a=b.split(",");c.push({productCode:a[0],
quantity:parseInt(a[1]||1)})}),p.urlParams.products=c);sessionStorage.setItem("journeyServiceability",JSON.stringify(p))}var q={},l=common.Utils,m=l.getStoreCode(),n,p={},t={},B,u,A,y="j sfmc_sub l u jb mid convid displayorder linkalias".split(" "),D,w,r,x,C,E,F,G,z;q.load=function(a){a.each(h)};f.register({name:"atb-and-qc-template",api:q,selector:".atb-and-qc-template"})})(VMJS,VMJSjQuery);
(function(f,a){function h(d,b){d=a(b).find(".lightning-splitter-content");if(!d.hasClass("author"))if(null!==localStorage.getItem("cableServiceability")){b=JSON.parse(localStorage.getItem("cableServiceability"));var c=b.networkServiceabilityDetails.lightningPremise;if(b&&!0===c){c=!0;if(d.hasClass("contentBasedUserCookieLRDate")){var g=b.actualReleaseDate.split("/");g=new Date(g[2],g[1]-1,g[0]);var f=new Date;g.setMonth(g.getMonth()+d.data("monthsavailable"));f.setHours(0,0,0,0);f<g&&(c=!1)}else d.hasClass("contentBasedOnDates")&&
(g=moment(d.data("startdate"),"DD-MM-YYYY"),f=moment(d.data("enddate"),"DD-MM-YYYY"),moment(b.actualReleaseDate,"DD-MM-YYYY").isBetween(g,f)||(c=!1));if(d.hasClass("lightning-users")&&c)switch(b.status){case "serviceable":e(d,"fully-serviceable");break;case "part_serviceable":e(d,"part-serviceable");break;case "active":e(d,"active");break;default:d.remove()}}else e(d,"non-lightning-users")}else e(d,"non-lightning-users")}function e(a,b){a.hasClass(b)?a.removeClass("hidden"):a.remove()}f.register({name:"lightning-column-splitter",
api:{load:function(a){a.each(h)}},selector:".lightning-column-splitter"})})(VMJS,VMJSjQuery);
(function(f,a){function h(e,d){e=a(d).find(".serviceability-container-wrappper");var b=localStorage.getItem("cableServiceability");var c=a(e);d=c.data("containertype");var g=c.data("qseligiblecheckbox"),f=c.data("qsinfonotpresent"),h=c.data("bbspeedintervalcheckbox"),l=c.data("minspeed"),m=c.data("maxspeed");c=c.data("bbspeedinfonotpresent");if(null!==b){var n=JSON.parse(b);b=n.qsCableEligible;n=n.speed;"QSEligible"===d&&("boolean"===typeof b&&(!0===g&&!0===b&&a(e).removeClass("hidden"),!1===g&&!1===
b&&a(e).removeClass("hidden")),"boolean"!==typeof b&&!0===f&&a(e).removeClass("hidden"));"BBSpeed"===d&&(n&&!0===h&&l<=n&&n<=m&&a(e).removeClass("hidden"),n||!0!==c||a(e).removeClass("hidden"))}else"QSEligible"===d&&!0===f&&a(e).removeClass("hidden"),"BBSpeed"===d&&!0===c&&a(e).removeClass("hidden")}f.register({name:"serviceability-container",api:{load:function(a){a.each(h)}},selector:".serviceability-container"})})(VMJS,VMJSjQuery);
(function(f,a){function h(b,c){b=a(c);e(b);d(b)}function e(a){c&&a.find(".dyn-form-message-banner").removeClass("hidden")}function d(a){window.addEventListener("popstate",function(b){window.history.go(1);e(a)});window.history.pushState(null,document.title,window.location.pathname);window.history.go(-1);window.history.go(1);c||setTimeout(function(){window.sessionStorage.setItem("apbVisited","yes");c="yes"},100)}var b={},c=window.sessionStorage.getItem("apbVisited");b.load=function(a){a.each(h)};f.register({name:"ace-prevent-browser-back",
api:b,selector:".ace-prevent-browser-back"})})(VMJS,VMJSjQuery);
(function(f,a){function h(b,c,d){b.matches&&d&&a(c).css("padding-bottom",d+"%")}function e(a,c,d,e,f,l,m){try{d.addEventListener("change",function(a){h(a,e,m)}),c.addEventListener("change",function(a){h(a,e,l)}),a.addEventListener("change",function(a){h(a,e,f)})}catch(n){d.addListener(function(a){h(a,e,m)}),c.addListener(function(a){h(a,e,l)}),a.addListener(function(a){h(a,e,f)})}}function d(b,c){var d=a(c);b=d.find(".hero-info").data("pb-percent-desktop");var f=d.find(".hero-info").data("pb-percent-tablet");
d=d.find(".hero-info").data("pb-percent-mobile");var q=window.matchMedia("(min-width: 768px) and (max-width:  991px)"),l=window.matchMedia("(max-width:  767px)"),m=window.matchMedia("(min-width: 992px)");h(l,c,d);h(q,c,f);h(m,c,b);e(l,q,m,c,d,f,b)}f.register({name:"hero-image-custom",api:{load:function(a){a.each(d)}},selector:".hero-image-custom"})})(VMJS,VMJSjQuery);
(function(f,a){function h(b,f){var h=a(f).closest("form"),l=a(f);b=JSON.parse(localStorage.getItem("cableServiceability"));var m=sessionStorage.getItem("postcode")?sessionStorage.getItem("postcode"):null;b=b&&b.address;var B=h.data("api-endpoints"),u=a(f).hasClass("author-mode");f=a(f).data("postcode-checker-page")+"?refresh\x3dtrue";q=sessionStorage.getItem("storeDomainServiceability");u||(b&&b.postcode||m?(f=h.find("button[type\x3dsubmit]"),m&&(u=h.find('input[name\x3d"postcode"]'),d(u,m)),f.off("click").on("click",
function(){var b=h.serializeArray(),d={address:{}};a.each(b,function(){var a=this.name,b=this.value;-1<k.indexOf(a)?d.address[a]=b:d[a]=b});c.callAPI(q+B.endpointUrl,B.httpMethod,d,!0,B.xhr,B.isAkanaEndpoint).then(function(){g.hideBannerMessages();h.trigger("submit");m&&sessionStorage.removeItem("postcode")}).fail(function(a){g.handleApiErrors({apiLabel:B.apiLabel,xhr:a},l,"error",null,!0,!1)})}),e(b,h)):window.location=f)}function e(b,c){var g=c.find(".address-details"),e=b?Object.keys(b).length:
0,f=c.find('input[name\x3d"postcode"]');1<e?(a(g).addClass("hidden"),d(c.find('input[name\x3d"flatNumber"]'),b.flatNumber),d(c.find('input[name\x3d"houseNumberOrName"]'),b.houseNumberOrName),d(c.find('input[name\x3d"street"]'),b.street),d(c.find('input[name\x3d"town"]'),b.town),d(c.find('input[name\x3d"county"]'),b.county),d(f,b.postcode)):(a(g).removeClass("hidden"),f.prop("readonly",!0),f.addClass("readonly"))}function d(b,c){c&&a(b).val(c)}var b={},c=common.Utils,g=common.dynFormUtils,k="flatNumber houseNumberOrName street town county postcode".split(" "),
q;b.load=function(a){a.each(h)};f.register({name:"spotters",api:b,selector:".spotters-wrapper"})})(VMJS,VMJSjQuery);
(function(f,a){function h(b,c){if(!d.restartURL&&(b=sessionStorage.getItem("journeyServiceability"))){var g=JSON.parse(b).urlParams;b=g.postcode;var f=g.addrSrc,h="uprn",l=g.uprn;1===g.addrSrc&&(h="said",l=g.saId);g=g.products.reduce(e,"").slice(0,-1);d.restartURL="/add-to-basket?isActive\x3dtrue\x26postcode\x3d"+b+"\x26productCodes\x3d"+g+"\x26addSrc\x3d"+f+"\x26"+h+"\x3d"+l}a(c).find("a").attr("href",d.restartURL)}function e(a,c){return a+c.productCode+(1<c.quantity?","+c.quantity:"")+"|"}var d=
{load:function(a){a.each(h)}};f.register({name:"restart-csj",api:d,selector:".restart-csj"})})(VMJS,VMJSjQuery);
(function(f,a){function h(b,d){a(d).on("click",function(a){a.preventDefault();sessionStorage.setItem("wasOnActivePage","true");document.referrer===window.location.href.substring(0,window.location.href.lastIndexOf("/"))?e():window.location.href=document.referrer})}function e(){var a=b.getParametersFromUrl();b.getJourneyConfig("apis-section").then(function(c){var d=b.getApiByID(c,"prospect_post"),g=b.getApiByID(c,"basket_get"),e=b.getApiByID(c,"basket_post");b.setStoreDomain(a).always(function(a){"string"===
typeof a&&b.servRedirectFunction(!0,!0,a,d,g,e)})})}var d={},b=common.Utils;d.load=function(a){a.each(h)};f.register({name:"callToAction",api:d,selector:".cta-premise a"})})(VMJS,VMJSjQuery);
(function(f,a){function h(e,d){function b(b){var d=c.find(".conditional-btn");b=a(b).val();d.attr("href",b);d.removeClass("inactive")}var c=a(d);e=c.find("input[type\x3dradio]");e.each(function(){this.checked&&b(this)});e.change(function(){this.checked&&b(this)})}f.register({name:"conditional-cta",api:{load:function(a){a.each(h)}},selector:".conditional-cta"})})(VMJS,VMJSjQuery);
(function(f,a){function h(e,d){e=a(d).find(".html-component-custom-css");if(e.length){d=e.find("code").html();var b=document.createElement("style");b.textContent=d;a("head").append(b);e.remove()}}f.register({name:"html-component",api:{load:function(a){a.each(h)}},selector:".html-component"})})(VMJS,VMJSjQuery);
(function(f,a){function h(e,d){function b(b,d){h.forEach(function(e,h){if(e===b){d.preventDefault();g.find(".snippet-carousel-item").removeClass("hidden");e=g.find(".owl-item.active").offset().top;var k=a(window).scrollTop();e<k&&a("html, body").animate({scrollTop:Math.ceil(c.offset().top)},"fast");g.trigger("to.owl.carousel",[h,l,!0]);e=f.find("li");e.removeClass();for(k=0;k<h;k++)e.eq(k).addClass("visited");f.find("li:eq("+h+")").addClass("active");try{utag.link({"js_page.dataLayer.pageName":utag.data["js_page.dataLayer.pageName"],
event_type:"Carousel-In-interaction",link_name:"Carousel-In-interaction"+c.find(".guide-me-wrapper").data("unique-id"),"js_page.AdobeEventType":"sidebarpopout"})}catch(A){throw Error("utag object undefined.");}}})}var c=a(d);e=c.find(".guide-me-wrapper");var g=c.find(".snippet-carousel"),f=c.find(".guide-me-progress-bar"),h=[],l=e.data("transition-speed")||300,m=e.data("hide-progress-bar");g.owlCarousel({lazyLoad:!1,slideBy:1,items:1,mouseDrag:!1,touchDrag:!1,pullDrag:!1,freeDrag:!1,checkVisible:!1,
onInitialized:function(){m||f.removeClass("hidden");g.find(".owl-item.active \x3e .snippet-carousel-item").removeClass("hidden")}});g.find(".snippet-carousel-item").each(function(){var b=a(this).data("snippet-path").replace("/content/virginmedia/dotcom/en","");h.push(b)});c.find(".component.cta a").click(function(c){var d=a(this).attr("href").replace("/content/virginmedia/dotcom/en","");b(d,c)});f.find("li").click(function(c){var d=a(this).data("snippet-path").replace("/content/virginmedia/dotcom/en",
"");b(d,c)})}f.register({name:"guide-me",api:{load:function(a){a.each(h)}},selector:".guide-me"})})(VMJS,VMJSjQuery);
(function(f,a){function h(d,b){d=a(b);var c=d.find(".generic-carousel-wrapper");d=d.find(".owl-carousel");b=c.data("autoplay-timeout");var g=c.data("equalize-slide-height");b={lazyLoad:!1,slideBy:1,items:1,checkVisible:!1,loop:c.data("loop"),autoplay:0!==b,autoplayTimeout:b?b:5E3,onInitialized:function(){g&&e(c)},onResized:function(){g&&e(c)}};d.owlCarousel(b)}function e(a){a.find(".owl-item").css("height","auto");var b=a.find(".owl-stage").outerHeight();a.find(".owl-item").css("height",b)}f.register({name:"generic-carousel",
api:{load:function(a){a.each(h)}},selector:".generic-carousel"})})(VMJS,VMJSjQuery);
(function(f,a){function h(b){b.find(".need-help-label").on("click",function(){a("#floatinghelp").addClass("expanded")});b.find(".need-help-close").on("click",function(){a("#floatinghelp").removeClass("expanded")})}function e(){var b=!1;a("#floatinghelp").find(".need-help-btn-placeholder").each(function(c,d){a(d).is(":empty")||(b=!0)});b&&a(".need-help-component").removeClass("hidden")}function d(b,c){b=a(c);a("#floatinghelp").bind("DOMSubtreeModified propertychange",e);h(b)}f.register({name:"need-help-component",
api:{load:function(a){a.each(d)}},selector:".need-help-component"})})(VMJS,VMJSjQuery);
(function(f,a){function h(e,d){e=a(d).find(".modal");d=e.data("hidden-mobile");var b=e.data("hidden-tablet"),c=e.data("hidden-desktop"),g=window.matchMedia("(max-width: 767px)").matches,f=window.matchMedia("(min-width: 768px) and (max-width: 1024px)").matches,h=window.matchMedia("(min-width: 992px)").matches,l="lb"+e.data("unique-id"),m=e.data("max-views"),n=JSON.parse(sessionStorage.getItem("lbPopupViews"))||{};if(!(g&&d||f&&b||h&&c)){if(n.hasOwnProperty(l)){if(n[l]===m)return;n[l]++}else n[l]=1;
sessionStorage.setItem("lbPopupViews",JSON.stringify(n));e.modal()}}f.register({name:"lightbox-popup",api:{load:function(a){a.each(h)}},selector:".lightbox-popup"})})(VMJS,VMJSjQuery);
(function(f,a){function h(d,b){var c=a(b).find(".ookla-speedtest-wrapper");a(window).on("message onmessage",function(a){a.originalEvent.origin===c.data("test-url")&&e(c,a.originalEvent.data)})}function e(a,b){if(b.download&&b.upload){var c=a.find(".ookla-speedtest-results-speed-down span"),d=a.find(".ookla-speedtest-results-speed-up span"),e=a.find(".ookla-speedtest-intro"),f=a.find(".ookla-speedtest-subtitle"),h=a.find(".ookla-speedtest-results");c.html((Math.round(b.download/100)/10).toFixed(1));
d.html((Math.round(b.upload/100)/10).toFixed(1));e.length&&e.animate({"padding-bottom":"20px"},"slow");f.length?f.slideUp("slow",function(){h.slideDown("slow")}):h.slideDown("slow")}}f.register({name:"ookla-speedtest",api:{load:function(a){a.each(h)}},selector:".ookla-speedtest"})})(VMJS,VMJSjQuery);
(function(f,a){function h(b,c){b=a(c);e(b)}function e(e){e.on("click",".coverage-checker-question-current button",function(){var g=a(this),f=g.closest(".coverage-checker-question"),h=g.data("answer-action"),m=parseInt(f.data("index"));switch(h){case "redirect":window.location.href=g.data("answer-url");break;case "show_next":h=e.find('.coverage-checker-question[data-index\x3d"'+(m+1)+'"]');d(g,f);h.length&&(h.toggleClass("hidden coverage-checker-question-current"),c(h));break;case "show_4g":d(g,f);
b(e,"4g");break;case "show_5g_disclaimer_cta":e.find(".coverage-checker-cta").removeClass("hidden");case "show_5g_disclaimer":e.find(".coverage-checker-disclaimer").removeClass("hidden");case "show_5g":(h=document.getElementsByClassName("coverage-checker-iframe"))&&0<h.length&&(h=h[0],(m=h.querySelector("iframe").getAttribute("data-checker-id"))&&h.setAttribute("id",m),(m=h.querySelector("iframe").getAttribute("data-checker-script"))&&h.querySelector("iframe").setAttribute("onload",m)),d(g,f),b(e,
"5g")}})}function d(a,b){b.removeClass("coverage-checker-question-current");b.find("button").not(a).toggleClass("btn-primary btn-secondary")}function b(a,b){a=a.find("iframe");a.attr("src",a.data("checker-"+b));a.parent(".coverage-checker-iframe").removeClass("hidden").toggleClass("container-fluid","4g"===b);c(a)}function c(b){a("html, body").animate({scrollTop:b.offset().top},600)}f.register({name:"coverage-checker",api:{load:function(a){a.each(h)}},selector:".coverage-checker"})})(VMJS,VMJSjQuery);
(function(f,a){function h(d,b){var c=a(b);(new (window.MutationObserver||window.WebKitMutationObserver)(function(){e(c)})).observe(b,{subtree:!0,attributes:!0,childList:!0});e(c)}function e(d){var b=d.find(".article-card-full-bleed-inner");d=d.find(".article-card-inner");b.on("click",function(b){if(!a(b.target).closest(".article-card-tag, .article-tag-icon").length){b.stopPropagation();var c=a(this);b=c.data("redirect-url");c=c.data("new-window");window.open(b,c?"_blank":"_self")}});d.on("click",
function(b){if(!a(b.target).closest(".article-card-tag, .article-tag-icon").length){b.stopPropagation();var c=a(this);b=c.data("redirect-url");c=c.data("new-window");window.open(b,c?"_blank":"_self")}})}f.register({name:"cards-display-container",api:{load:function(a){a.each(h)}},selector:".cards-display-container"})})(VMJS,VMJSjQuery);
(function(f,a){function h(d,b){var c=a(b);(new (window.MutationObserver||window.WebKitMutationObserver)(function(){e(c)})).observe(b,{subtree:!0,attributes:!1,childList:!0})}function e(d){d.on("click",function(){var b=a(this).find(".banner-card-cta a").attr("href");window.open(b,"_self")})}f.register({name:"banner-card-display-container",api:{load:function(a){a.each(h)}},selector:".banner-card-display-container"})})(VMJS,VMJSjQuery);
(function(f,a){function h(c,g){c=a(g);g=c.data("lightning");var f=c.data("default-snippet"),h=e("premise_id")||null,l=e("ERD_Days")||null;g=d(g,{premiseId:h,erdDays:l})||f;b(c,g)}function e(a){var b=window.location.search.substring(1).split("\x26"),c;for(c=0;c<b.length;c++){var d=b[c].split("\x3d");if(d[0]===a)return decodeURI(d[1])}}function d(b,d){if(null!==d.premiseId||null!==d.erdDays){null===d.premiseId&&(d.premiseId="null");if(null===d.erdDays)d.erdDays="null";else if(d.erdDays=parseInt(d.erdDays,
10),isNaN(d.erdDays))return;b=a.grep(b,function(a){var b;if((b=a.premiseType===d.premiseId)&&!(b=d.erdDays===a.erdDays)&&(b="null"!==d.erdDays))if(b=d.erdDays,(a=a.erdDays)&&0!==a.length){var c=[],e=a.split("-");2===e.length?c.push(parseInt(e[0],10),parseInt(e[1],10)):(e=a.split("\x3e"),2===e.length?c.push(parseInt(e[1],10)+1,null):(e=a.split("\x3c"),2===e.length&&c.push(null,parseInt(e[1],10)-1)));b=2!==c.length||c[0]&&c[0]>b||c[1]&&c[1]<b?!1:!0}else b=!1;return b});if(0<b.length)return b[0].snippet}}
function b(a,b){void 0!==b&&(b=b.replace("/content/virginmedia/dotcom/en","")+"/jcr:content/mainParsys.html",a.load(window.location.origin+b,function(){f.init()}))}f.register({name:"lightning-sales-main",api:{load:function(a){a.each(h)}},selector:".lightning-sales-main.publish-mode"})})(VMJS,VMJSjQuery);
(function(f,a){function h(e,d){a(d).on("click",function(b){b.preventDefault();a("html, body").animate({scrollTop:0},"300")})}f.register({name:"back-to-top-button",api:{load:function(a){a.each(h)}},selector:".back-to-top-button"})})(VMJS,VMJSjQuery);
(function(f,a){function h(){var a=y.find("div#output_tt"),b=y.find("div#output_fn"),c=y.find("div#output_ln"),d=y.find("div#output_ad");a='\x3ckanaAttribute name\x3d"Title"\x3e##\x3c/kanaAttribute\x3e'.replace("##",a.text());a+='\x3ckanaAttribute name\x3d"First Name"\x3e##\x3c/kanaAttribute\x3e'.replace("##",b.text());a+='\x3ckanaAttribute name\x3d"Surname"\x3e##\x3c/kanaAttribute\x3e'.replace("##",c.text());a+='\x3ckanaAttribute name\x3d"Address 1"\x3e##\x3c/kanaAttribute\x3e'.replace("##",d.text());
a+='\x3ckanaAttribute name\x3d"paymentDDAccountName"\x3e##\x3c/kanaAttribute\x3e'.replace("##",w.val());a+='\x3ckanaAttribute name\x3d"paymentDDBankSortCode"\x3e##\x3c/kanaAttribute\x3e'.replace("##",x.val());a+='\x3ckanaAttribute name\x3d"paymentDDAccountNo"\x3e##\x3c/kanaAttribute\x3e'.replace("##",r.val());I.val(O.encrypt(a))}function e(){var a=Y;-1<K.endpointUrl.indexOf("ms.virginmedia.com/")?(a=Z,a[3].value="uuid:"+t(),a[4].value=(new Date).toISOString()):(a[3].value=t(),a[4].value=t(),a[5].value=
(new Date).toISOString());return a}function d(){w.addClass("ignore");r.addClass("ignore");x.addClass("ignore");w.removeAttr("required");r.removeAttr("required");x.removeAttr("required")}function b(){w.attr("disabled","disabled");r.attr("disabled","disabled");a(C[0]).attr("disabled","disabled");a(C[1]).attr("disabled","disabled");a(C[2]).attr("disabled","disabled")}function c(a,c){if("undefined"===typeof CQ||!CQ.WCM||!CQ.WCM.isEditMode())D.on("dynFormReady",function(){0<I.val().length?(n([F]),d(),
b(),I.trigger("focusout")):(l(),R=0,k([w,r,C]))})}function g(b){H.attr("disabled","disabled");P=!1;var c=E.html();if(b&&b.DirectDebitResponse){if(c=c.replace("{{name}}",b.DirectDebitResponse.name?b.DirectDebitResponse.name:""),b.DirectDebitResponse.bankAddress){b=b.DirectDebitResponse.bankAddress||{};var e="";for(g in b)e+=b[g],e+=" ";0<e.length&&(e=e.slice(0,-1));c=c.replace("{{address}}",e)}}else c=c.replace("{{name}}",""),c=c.replace("{{address}}","");E.html(c);n([E]);d();L?(w.val(""),r.val(""),
x.val(""),a(C[0]).val(""),a(C[1]).val(""),a(C[2]).val("")):(w.addClass("discard-input"),r.addClass("discard-input"),a(C[0]).addClass("discard-input"),a(C[1]).addClass("discard-input"),a(C[2]).addClass("discard-input"));h();if(U){c=A.serializeForm(D,"subject",!0);var g={formID:D.prop("id"),formURL:window.location.href,formSkip:D.data("skipSubmit"),formComponentSubmit:D.data("component-submit"),formData:c};c=window.VMACE.formsData;b=A.getFormDataIndexById(D.prop("id"),c);-1===b?(c.push(g),b=c.length-
1):c[b]=g;c=JSON.stringify(c);A.encryptDecryptStoredData("encryption",c).then(function(a){window.sessionStorage.setItem("journeyData",a)})}}function k(a){a.forEach(function(a){a.on("input",q)});(new (window.MutationObserver||window.WebKitMutationObserver)(q)).observe(N[0],{subtree:!0,attributes:!1,childList:!0})}function q(){0<I.val().length||(P&&w.val()===X.accountHolderName&&r.val()===X.accountNumber&&x.val()===X.sortCode||r.closest(".form-group").hasClass("has-danger")||!r.val()||w.closest(".form-group").hasClass("has-danger")||
!w.val()||x.closest(".form-group").hasClass("has-danger")||!x.val()?H.attr("disabled","disabled"):H.removeAttr("disabled"))}function l(){aa||null!==O||(T&&0<T.length?m(T):u.callAPI(K.endpointUrl,K.httpMethod,null,!0,K.xhr,K.isAkanaEndpoint,e()).then(function(a){m(a.key)}).fail(function(a){O=null;aa=!1}))}function m(a){O=new JSEncrypt;O.setPublicKey(a)}function n(a){a.forEach(function(a){a.removeClass("hidden")})}function p(a){a.forEach(function(a){a.removeClass("hidden").addClass("hidden")})}function t(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,
function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)})}var B={},u=common.Utils,A=common.dynFormUtils,y=a(".dd-payments-wrapper"),D=y.closest("form"),w=a('input[name\x3d"ddp-account-holder-name"]'),r=a('input[name\x3d"ddp-bank-number"]'),x=a('input[name\x3d"sortCode"]'),C=a("input.dyn-form-sortcode"),E=a("#ddp-validation-success-message"),F=a("#ddp-validation-previously-successful-message"),G=a("#ddp-validation-fail-message"),z=a("#ddp-fail-no-retry-message"),H=a("#ddp-validate-bank-button"),
N=a("#ddp-bank-details"),I=a('input[name\x3d"directDebitDetails"]'),K=y.data("encryption-api"),J=y.data("validate-api"),Q=y.data("mule-app"),S=y.data("mule-client"),T=y.data("mule-key"),U=void 0!==y.data("persist-on-success"),L=void 0!==y.data("empty-on-success"),P=!1,R,aa=!1,O=null,X={accountHolderName:null,accountNumber:null,sortCode:null},Z=[{key:"MWH-AppID",value:Q},{key:"MWH-ClientSecret",value:S},{key:"MWH-ChannelID",value:"VM_AEM"},{key:"MWH-RequestID",value:"uuid:f81d4fae-8jan-22e5-a765-00a0c91e7ee7"},
{key:"MWH-RequestTimestamp",value:"2020-10-09T07:25:09Z"},{key:"Content-Type",value:""}],Y=[{key:"DAPI-AppID",value:Q},{key:"DAPI-ClientSecret",value:S},{key:"DAPI-ChannelID",value:"VM_AEM"},{key:"DAPI-RequestID",value:"uuid:f81d4fae-8jan-22e5-a765-00a0c91e7ee7"},{key:"DAPI-CorrelationID",value:"uuid:f81d4fae-8jan-22e5-a765-00a0c91e7ee7"},{key:"DAPI-RequestTimestamp",value:"2020-10-09T07:25:09Z"}];H.on("click",function(c){c.preventDefault();p([G,z]);b();if(3>R){X={accountHolderName:w.val(),accountNumber:r.val(),
sortCode:x.val()};c=J.endpointUrl;var d=r.val()+"|"+x.val();d=O.encrypt(d);c=c.includes("?")?c+"\x26":c+"?";c=c+"validationKey\x3d"+encodeURIComponent(d);u.callAPI(c,J.httpMethod,null,!0,J.xhr,J.isAkanaEndpoint,e()).then(function(a){g(a)}).fail(function(b){H.attr("disabled","disabled");P=!0;R++;3>R?(n([G]),w.removeAttr("disabled"),r.removeAttr("disabled"),a(C[0]).removeAttr("disabled"),a(C[1]).removeAttr("disabled"),a(C[2]).removeAttr("disabled")):n([z])})}else P&&n(z)});B.load=function(a){a.each(c)};
f.register({name:"direct-debit-pink",api:B,selector:".direct-debit-pink"})})(VMJS,VMJSjQuery);
(function(f,a){function h(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)})}function e(){var a=ra;-1<ma.endpointUrl.indexOf("ms.virginmedia.com/")?(a=ka,a[3].value=h(),a[4].value=(new Date).toISOString()):(a[3].value=h(),a[4].value=h(),a[5].value=(new Date).toISOString());return a}function d(){var a=C.serializeForm(F,"subject",!0),b={formID:F.prop("id"),formURL:window.location.href,formSkip:F.data("skipSubmit"),
formComponentSubmit:F.data("component-submit"),formData:a};a=window.VMACE.formsData;var c=C.getFormDataIndexById(F.prop("id"),a);-1===c?(a.push(b),c=a.length-1):a[c]=b;a=JSON.stringify(a);C.encryptDecryptStoredData("encryption",a).then(function(a){window.sessionStorage.setItem("journeyData",a)})}function b(){0!==W.val().length&&(W.val(""),M.val(""),ca.val(""),ia.val(""),ba.click(),ba.prop("checked",!1),z.click(),z.prop("checked",!1),d())}function c(){var b=null;K&&0<K.length&&K.each(function(c,d){c=
a(d);c.is(":checked")&&(b=c.val())});null===b&&window.VMACE&&window.VMACE.formsData&&window.VMACE.formsData.length&&window.VMACE.formsData.forEach(function(a){(a=a.formData[I])&&(b=a)});b&&ja.val(b);return b}function g(a){if(!I||!la)return a;var b=c(),d=null!==b?la[b]:null;if(!d)return a;d.package||(d.package=b);d.description||(d.description=d.code);b=JSON.stringify(a);for(var e in d){var g="\x3c"+e.replace(/([A-Z])/g," $1").split(" ").join("_").toLowerCase()+"_placeholder\x3e";"string"===typeof d[e]||
d[e]instanceof String||(g='"'+g+'"');b=b.replace(new RegExp(g,"g"),d[e])}try{a=JSON.parse(b)}catch(ya){}return a}function k(){sa||la||(I?(sa=!0,a.get(qa).then(function(a){try{la=JSON.parse(a)}catch(wa){la={}}})):la={})}function q(){oa||ha||(oa=!0,a.get(ea).then(function(a){try{(ha=JSON.parse(a))&&ha.serviceMedium&&da.val(ha.serviceMedium)}catch(wa){ha={}}}))}function l(){for(;!ha;);var b=a.extend({},ha),c=JSON.stringify(b);c=c.replace(/<last_name_placeholder>/g,J.val()||E.find("div#output_ln").text()||
"");c=c.replace(/<first_name_placeholder>/g,Q.val()||E.find("div#output_fn").text()||"");c=c.replace(/<title_placeholder>/g,S.val()||E.find("div#output_tt").text()||"");c=c.replace(/<postcode_placeholder>/g,aa.val()||E.find("div#output_pc").text()||"");c=c.replace(/<address_1_placeholder>/g,T.val()||E.find("div#output_al1").text()||"");c=c.replace(/<address_2_placeholder>/g,U.val()||E.find("div#output_al2").text()||"");c=c.replace(/<address_3_placeholder>/g,L.val()||E.find("div#output_al3").text()||
"");c=c.replace(/<address_4_placeholder>/g,P.val()||E.find("div#output_al4").text()||"");c=c.replace(/<address_5_placeholder>/g,R.val()||E.find("div#output_al5").text()||"");try{b=JSON.parse(c)}catch(xa){}return g(b)}function m(){u([X])}function n(){u([Z]);A([G,X,Y]);va=!0;window.utag&&(window.utag.chat_product={product_code:c(),page_path:window.location.pathname})}function p(){if(B())t(),D();else{u([G]);var a=setTimeout(m,pa),b=setTimeout(n,ta);x.callAPI(ma.endpointUrl,ma.httpMethod,l(),!0,ma.xhr,
ma.isAkanaEndpoint,e()).then(function(c){clearTimeout(a);clearTimeout(b);va||(c&&c.contractInfo&&c.contractInfo&&(c.contractInfo.cssRef&&(c.contractInfo.cssRef.docRef&&W.val(c.contractInfo.cssRef.docRef),c.contractInfo.cssRef.creationTime&&c.contractInfo.cssRef.creationTime.milliseconds&&M.val(c.contractInfo.cssRef.creationTime.milliseconds),c.contractInfo.cssRef.pdfUrl&&ca.val(c.contractInfo.cssRef.pdfUrl)),c.contractInfo.cisRef&&c.contractInfo.cisRef.pdfUrl&&ia.val(c.contractInfo.cisRef.pdfUrl)),
d(),t())}).fail(function(){n();clearTimeout(a);clearTimeout(b)})}}function t(){var a=ca.val(),b=ia.val();ua||(ua=O.html());var c=ua;c=b?c.replace("#cis-url",b):c.replace("#cis-url","");c=a?c.replace("#css-url",a):c.replace("#css-url","");O.html(c);A([G,X]);u([O,Y]);N&&u([N]);y([V,v,M,W,da])}function B(){return W.val()&&W.val()&&0<W.val().length+W.val().length}function u(a){a.forEach(function(a){a.removeClass("hidden")})}function A(a){a.forEach(function(a){a.removeClass("hidden").addClass("hidden")})}
function y(a){a.forEach(function(a){a.trigger("focusout")})}function D(){y([V,v,M,W,da,ba])}function w(d,e){if("undefined"===typeof CQ||!CQ.WCM||!CQ.WCM.isEditMode())F.on("dynFormReady",function(){var d=ja.val();d&&d!==c()?(b(),q(),k()):B()?(t(),ha&&ha.serviceMedium&&da.val(ha.serviceMedium),D()):(q(),k());z.change(function(){this.checked?p():A([O,Z,X,Y])});ba.change(function(){a(this).is(":checked")?(V.val("YES"),ba.toggleClass("discard-input",!0)):(V.val("NO"),ba.toggleClass("discard-input",!1));
v.val()||v.val(moment().utc().valueOf());D()});K&&0<K.length&&(q(),k(),K.each(function(c,d){a(d).change(function(){b()})}))})}var r={},x=common.Utils,C=common.dynFormUtils,E=a(".eecc-c1-wrapper"),F=E.closest("form"),G=E.find(".button-spinner-text"),z=F.find('input[name\x3d"'+E.data("checkbox-name")+'"]'),H=E.data("target-checkbox-name"),N=H?F.find(".dyn-form-field.sh-"+H):null,I=E.data("product-field-name"),K=I?F.find('input[name\x3d"'+I+'"]'):null,J=F.find('input[name\x3d"'+E.data("req-last-name")+
'"]'),Q=F.find('input[name\x3d"'+E.data("req-first-name")+'"]'),S=F.find('input[name\x3d"'+E.data("req-title")+'"]'),T=F.find('input[name\x3d"'+E.data("req-address")+'"]'),U=F.find('input[name\x3d"'+E.data("req-address-2")+'"]'),L=F.find('input[name\x3d"'+E.data("req-address-3")+'"]'),P=F.find('input[name\x3d"'+E.data("req-address-4")+'"]'),R=F.find('input[name\x3d"'+E.data("req-address-5")+'"]'),aa=F.find('input[name\x3d"'+E.data("req-postcode")+'"]'),O=a("#success-message"),X=a("#wait-message"),
Z=a("#fail-message"),Y=E.find(".eecc-consent"),ba=Y.find("input"),V=E.find(".css-consent-status").find("input"),v=E.find(".css-consent-timestamp").find("input"),M=E.find(".css-generation-timestamp").find("input"),W=E.find(".css-reference").find("input"),da=E.find(".accessibility-state").find("input"),ca=E.find('input[name\x3d"eecc-css-url"]'),ia=E.find('input[name\x3d"eecc-cis-url"]'),ja=E.find('input[name\x3d"_no_submit_last-used-product"]'),ea=E.data("shared-request-resource"),qa=E.data("product-mapping-resource"),
ma=E.data("references-api"),ta=1E3*E.data("mule-wait"),pa=1E3*E.data("mule-warn");H=E.data("mule-app");var na=E.data("mule-client"),fa=E.data("mule-channel"),ka=[{key:"MWH-AppID",value:H},{key:"MWH-ClientSecret",value:na},{key:"MWH-ChannelID",value:fa},{key:"MWH-RequestID",value:"f81d4fae-8jan-22e5-a765-00a0c91e7ee7"},{key:"MWH-RequestTimestamp",value:"2020-10-09T07:25:09Z"}],ra=[{key:"DAPI-AppID",value:H},{key:"DAPI-ClientSecret",value:na},{key:"DAPI-ChannelID",value:fa},{key:"DAPI-RequestID",value:"f81d4fae-8jan-22e5-a765-00a0c91e7ee7"},
{key:"DAPI-CorrelationID",value:"f81d4fae-8jan-22e5-a765-00a0c91e7ee7"},{key:"DAPI-RequestTimestamp",value:"2020-10-09T07:25:09Z"}],ha=null,la=null,oa=!1,sa=!1,va=!1,ua=null;r.load=function(a){a.each(w)};f.register({name:"eecc-c1",api:r,selector:".eecc-c1"})})(VMJS,VMJSjQuery);
Handlebars.registerPartial("article-cards",Handlebars.template({1:function(f,a,h,e,d){var b;return null!=(b=h["if"].call(null!=a?a:f.nullContext||{},null!=a?a.articleCardType:a,{name:"if",hash:{},fn:f.program(2,d,0),inverse:f.program(14,d,0),data:d}))?b:""},2:function(f,a,h,e,d){var b;return'\x3cdiv class\x3d"article-cards-item"\x3e\n'+(null!=(b=h["if"].call(null!=a?a:f.nullContext||{},null!=a?a.fullbleed:a,{name:"if",hash:{},fn:f.program(3,d,0),inverse:f.program(9,d,0),data:d}))?b:"")+"\x3c/div\x3e\n"},
3:function(f,a,h,e,d){var b,c;e=f.lambda;var g=f.escapeExpression,k=null!=a?a:f.nullContext||{};return'  \x3cdiv class\x3d"article-card-full-bleed-inner"\n                               data-redirect-url\x3d"'+g(e(null!=(b=null!=a?a.articleCardCTA:a)?b.url:b,a))+'"\n                               data-new-window\x3d"'+g(e(null!=(b=null!=a?a.articleCardCTA:a)?b.openedInNewWindow:b,a))+'"\x3e\n    \x3cdiv class\x3d"diagonal-cut"\x3e\x3c/div\x3e\n    \x3cimg class\x3d"article-card-full-bleed-image" src\x3d"'+
g(e(null!=a?a.fullBleedArticleCardDisplayPath:a,a))+'" alt\x3d"Article Image"\x3e\n\n'+(null!=(b=h["if"].call(k,null!=a?a.firstEntertainmentCategoryTagLabel:a,{name:"if",hash:{},fn:f.program(4,d,0),inverse:f.noop,data:d}))?b:"")+'\n    \x3cdiv class\x3d"article-tag-icon"\x3e\n        \x3ca href\x3d"'+g(e(null!=(b=null!=a?a.articleCardTagCTA:a)?b.url:b,a))+'" target\x3d"_blank" \x3e\n            \x3cimg src\x3d"'+g(e(null!=(b=null!=a?a.tagMapping:a)?b.tagIcon:b,a))+'" alt\x3d"Tag Icon"\x3e\n        \x3c/a\x3e\n    \x3c/div\x3e\n\n    \x3cdiv class\x3d"article-card-content"\x3e\n        \x3cdiv class\x3d"article-card-title '+
g(e(null!=a?a.titleKeyline:a,a))+" article-card-font-size-"+g((c=null!=(c=h.articleCardTitleSize||(null!=a?a.articleCardTitleSize:a))?c:h.helperMissing,"function"===typeof c?c.call(k,{name:"articleCardTitleSize",hash:{},data:d}):c))+' hidden-xs" style\x3d"top: '+g(e(null!=a?a.articleCardTitlePosition:a,a))+"%; border-color: "+g(e(null!=(b=null!=a?a.tagMapping:a)?b.tagColor:b,a))+';"\x3e\n         \x3cdiv class\x3d"article-card-keyline"\x3e'+(null!=(b=e(null!=a?a.articleCardTitle:a,a))?b:"")+'\x3c/div\x3e\n        \x3c/div\x3e\n        \x3cdiv class\x3d"article-card-sub-title article-card-font-size-'+
g(e(null!=a?a.articleCardSubTitleSize:a,a))+' hidden-xs" style\x3d"top: '+g(e(null!=a?a.articleCardSubTitlePosition:a,a))+'%;"\x3e'+(null!=(b=e(null!=a?a.articleCardSubTitle:a,a))?b:"")+'\x3c/div\x3e\n        \x3cdiv class\x3d"article-card-snippet hidden-xs" style\x3d"top: '+g(e(null!=a?a.articleCardSnippetPosition:a,a))+'%;"\x3e'+(null!=(b=e(null!=a?a.articleCardSnippet:a,a))?b:"")+'\x3c/div\x3e\n\n        \x3cdiv class\x3d"article-card-title mobile-article-card-title '+g(e(null!=a?a.titleKeyline:
a,a))+" article-card-font-size-"+g(e(null!=a?a.mobileArticleCardTitleSize:a,a))+' visible-xs" style\x3d"top: '+g(e(null!=a?a.mobileArticleCardTitlePosition:a,a))+"%; border-color: "+g(e(null!=(b=null!=a?a.tagMapping:a)?b.tagColor:b,a))+';"\x3e\n         \x3cdiv class\x3d"article-card-keyline"\x3e'+(null!=(b=e(null!=a?a.mobileArticleCardTitle:a,a))?b:"")+'\x3c/div\x3e\n        \x3c/div\x3e\n        \x3cdiv class\x3d"article-card-sub-title mobile-article-card-sub-title article-card-font-size-'+g(e(null!=
a?a.mobileArticleCardSubTitleSize:a,a))+' visible-xs" style\x3d"top: '+g(e(null!=a?a.mobileArticleCardSubTitlePosition:a,a))+'%;"\x3e'+(null!=(b=e(null!=a?a.mobileArticleCardSubTitle:a,a))?b:"")+'\x3c/div\x3e\n        \x3cdiv class\x3d"article-card-snippet visible-xs" style\x3d"top: '+g(e(null!=a?a.mobileArticleCardSnippetPosition:a,a))+'%;"\x3e'+(null!=(b=e(null!=a?a.mobileArticleCardSnippet:a,a))?b:"")+"\x3c/div\x3e\n    \x3c/div\x3e\n\n"+(null!=(b=h["if"].call(k,null!=(b=null!=a?a.articleCardCTA:
a)?b.label:b,{name:"if",hash:{},fn:f.program(6,d,0),inverse:f.noop,data:d}))?b:"")+"\n  \x3c/div\x3e\n"},4:function(f,a,h,e,d){var b,c;e=f.lambda;var g=f.escapeExpression;return'    \x3ca href\x3d"'+g(e(null!=(b=null!=a?a.articleCardTagCTA:a)?b.url:b,a))+'" target\x3d"_blank"\x3e\n      \x3cspan class\x3d"article-card-tag text-uppercase" style\x3d"background: '+g(e(null!=(b=null!=a?a.tagMapping:a)?b.tagColor:b,a))+';"\x3e'+g((c=null!=(c=h.firstEntertainmentCategoryTagLabel||(null!=a?a.firstEntertainmentCategoryTagLabel:
a))?c:h.helperMissing,"function"===typeof c?c.call(null!=a?a:f.nullContext||{},{name:"firstEntertainmentCategoryTagLabel",hash:{},data:d}):c))+"\x3c/span\x3e\n    \x3c/a\x3e\n"},6:function(f,a,h,e,d){var b;e=f.lambda;var c=f.escapeExpression;return'    \x3cdiv class\x3d"article-card-cta"\x3e\n        \x3ca class\x3d"vmp-cta" '+(null!=(b=h["if"].call(null!=a?a:f.nullContext||{},null!=(b=null!=a?a.articleCardCTA:a)?b.openedInNewWindow:b,{name:"if",hash:{},fn:f.program(7,d,0),inverse:f.noop,data:d}))?
b:"")+' href\x3d"'+c(e(null!=(b=null!=a?a.articleCardCTA:a)?b.url:b,a))+'" style\x3d"color: '+c(e(null!=(b=null!=a?a.tagMapping:a)?b.tagColor:b,a))+';"\x3e '+(null!=(b=e(null!=(b=null!=a?a.articleCardCTA:a)?b.label:b,a))?b:"")+"\x3c/a\x3e\n    \x3c/div\x3e\n"},7:function(f,a,h,e,d){return'target\x3d"_blank"'},9:function(f,a,h,e,d){var b;e=f.lambda;var c=f.escapeExpression,g=null!=a?a:f.nullContext||{};return'  \x3cdiv class\x3d"article-card-inner"\n              data-redirect-url\x3d"'+c(e(null!=
(b=null!=a?a.articleCardCTA:a)?b.url:b,a))+'"\n              data-new-window\x3d"'+c(e(null!=(b=null!=a?a.articleCardCTA:a)?b.openedInNewWindow:b,a))+'"\x3e\n    \x3cdiv class\x3d"article-card-image-wrapper"\x3e\n      \x3cdiv class\x3d"article-card-image"\x3e\n          \x3cdiv class\x3d"diagonal-cut"\x3e\x3c/div\x3e\n          \x3cimg src\x3d"'+c(e(null!=a?a.desktopImagePath:a,a))+'" alt\x3d"Article Image"\x3e\n          \x3cdiv class\x3d"bottom-line" style\x3d"background: '+c(e(null!=(b=null!=
a?a.tagMapping:a)?b.tagColor:b,a))+';"\x3e\x26ensp;\x3c/div\x3e\n      \x3c/div\x3e\n\n'+(null!=(b=h["if"].call(g,null!=a?a.firstEntertainmentCategoryTagLabel:a,{name:"if",hash:{},fn:f.program(10,d,0),inverse:f.noop,data:d}))?b:"")+'\n      \x3cdiv class\x3d"article-tag-icon"\x3e\n          \x3ca href\x3d"'+c(e(null!=(b=null!=a?a.articleCardTagCTA:a)?b.url:b,a))+'" target\x3d"_blank" \x3e\n              \x3cimg src\x3d"'+c(e(null!=(b=null!=a?a.tagMapping:a)?b.tagIcon:b,a))+'" alt\x3d"Tag Icon"\x3e\n          \x3c/a\x3e\n      \x3c/div\x3e\n\n      \x3cdiv class\x3d"article-card-content"\x3e\n          \x3cdiv class\x3d"article-card-title"\x3e'+
(null!=(b=e(null!=a?a.articleCardTitle:a,a))?b:"")+'\x3c/div\x3e\n          \x3cdiv class\x3d"article-card-sub-title"\x3e'+(null!=(b=e(null!=a?a.articleCardSubTitle:a,a))?b:"")+'\x3c/div\x3e\n          \x3cdiv class\x3d"article-card-snippet"\x3e'+(null!=(b=e(null!=a?a.articleCardSnippet:a,a))?b:"")+"\x3c/div\x3e\n      \x3c/div\x3e\n    \x3c/div\x3e\n\n"+(null!=(b=h["if"].call(g,null!=(b=null!=a?a.articleCardCTA:a)?b.label:b,{name:"if",hash:{},fn:f.program(12,d,0),inverse:f.noop,data:d}))?b:"")+"  \x3c/div\x3e\n"},
10:function(f,a,h,e,d){var b;h=f.lambda;f=f.escapeExpression;return'      \x3ca href\x3d"'+f(h(null!=(b=null!=a?a.articleCardTagCTA:a)?b.url:b,a))+'" target\x3d"_blank"\x3e\n        \x3cspan class\x3d"article-card-tag text-uppercase" style\x3d"background: '+f(h(null!=(b=null!=a?a.tagMapping:a)?b.tagColor:b,a))+';"\x3e'+f(h(null!=a?a.firstEntertainmentCategoryTagLabel:a,a))+"\x3c/span\x3e\n      \x3c/a\x3e\n"},12:function(f,a,h,e,d){var b;e=f.lambda;var c=f.escapeExpression;return'    \x3cdiv class\x3d"article-card-cta"\x3e\n      \x3ca class\x3d"vmp-cta" '+
(null!=(b=h["if"].call(null!=a?a:f.nullContext||{},null!=(b=null!=a?a.articleCardCTA:a)?b.openedInNewWindow:b,{name:"if",hash:{},fn:f.program(7,d,0),inverse:f.noop,data:d}))?b:"")+' href\x3d"'+c(e(null!=(b=null!=a?a.articleCardCTA:a)?b.url:b,a))+'" style\x3d"color: '+c(e(null!=(b=null!=a?a.tagMapping:a)?b.tagColor:b,a))+';"\x3e '+(null!=(b=e(null!=(b=null!=a?a.articleCardCTA:a)?b.label:b,a))?b:"")+"\x3c/a\x3e\n    \x3c/div\x3e\n"},14:function(f,a,h,e,d){return'\x3cdiv class\x3d"article-cards-item"\x3e\n    \x3cdiv class\x3d"no-article-card-type"\x3e\n        \x3cdiv class\x3d"alert alert-info"\x3e\n            Invalid Article Card.\x3cbr/\x3e\n            Please set Article Card Type property.\n        \x3c/div\x3e\n    \x3c/div\x3e\n\x3c/div\x3e\n'},
compiler:[7,"\x3e\x3d 4.0.0"],main:function(f,a,h,e,d){var b;return null!=(b=h.each.call(null!=a?a:f.nullContext||{},a,{name:"each",hash:{},fn:f.program(1,d,0),inverse:f.noop,data:d}))?b:""},useData:!0}));
Handlebars.registerPartial("calendar-cards",Handlebars.template({1:function(f,a,h,e,d){var b;e=f.lambda;var c=f.escapeExpression,g=null!=a?a:f.nullContext||{};return'    \x3cdiv class\x3d"calendar-cards-item"\x3e\n        \x3cdiv class\x3d"calendar-card"\x3e\n            \x3cdiv class\x3d"calendar-image-wrapper"\x3e\n                \x3cdiv class\x3d"calendar-image"\x3e\x3cimg src\x3d"'+c(e(null!=(b=null!=a?a.cardImage:a)?b.path:b,a))+'"/\x3e\x3c/div\x3e\n                \x3cimg class\x3d"channel-logo" src\x3d"'+
c(e(null!=a?a.channelIconPath:a,a))+'" onerror\x3d"this.src\x3d\'/etc/designs/onecms/clientlibs/commons/components/img/channels/defaultchannelicon.png\'"/\x3e\n\n                 \x3ca href\x3d"http://www.virginmedia.com/virgin-tv-edit/" target\x3d"_blank" \x3e\n                     \x3cspan class\x3d"calendar-card-tag text-uppercase"\x3eYour TV Week\x3c/span\x3e\n                 \x3c/a\x3e\n\n                \x3cdiv class\x3d"calendar-content-wrapper"\x3e\n                    \x3ch3 class\x3d"calendar-card-title"\x3e'+
(null!=(b=e(null!=a?a.showTitle:a,a))?b:"")+'\x3c/h3\x3e\n                    \x3cdiv class\x3d"calendar-card-channel-info"\x3e\n                        \x3cspan\x3e'+c(e(null!=a?a.showChannel:a,a))+" (CH "+c(e(null!=a?a.channelNumber:a,a))+')\x3c/span\x3e\n                    \x3c/div\x3e\n                    \x3cdiv class\x3d"calendar-card-snippet"\x3e'+(null!=(b=e(null!=a?a.snippet:a,a))?b:"")+'\x3c/div\x3e\n                \x3c/div\x3e\n            \x3c/div\x3e\n\n            \x3cdiv class\x3d"calendar-footer"\x3e\n                \x3cdiv class\x3d"calendar-footer-inner clearfix text-center"\x3e\n                    \x3cdiv class\x3d"record-watch-row"\x3e\n                        \x3cdiv class\x3d"vmp-cta-wrapper '+
(null!=(b=h["if"].call(g,null!=a?a.includeDemandCTA:a,{name:"if",hash:{},fn:f.program(2,d,0),inverse:f.noop,data:d}))?b:"")+'"\x3e\n                            \x3cdiv class\x3d"series-number"\x3e\n'+(null!=(b=h["if"].call(g,null!=a?a.includeSeriesAndEpisodes:a,{name:"if",hash:{},fn:f.program(4,d,0),inverse:f.noop,data:d}))?b:"")+"                                \x3cspan\x3e"+c(e(null!=a?a.broadcastFullDay:a,a))+" "+c(e(null!=a?a.startTimeMediterranean:a,a))+"\x3c/span\x3e\n                            \x3c/div\x3e\n"+
(null!=(b=h["if"].call(g,null!=a?a.includeRecordCTA:a,{name:"if",hash:{},fn:f.program(6,d,0),inverse:f.noop,data:d}))?b:"")+"                        \x3c/div\x3e\n"+(null!=(b=h["if"].call(g,null!=a?a.includeDemandCTA:a,{name:"if",hash:{},fn:f.program(8,d,0),inverse:f.noop,data:d}))?b:"")+"                    \x3c/div\x3e\n"+(null!=(b=h["if"].call(g,null!=a?a.includeGetTVCTA:a,{name:"if",hash:{},fn:f.program(11,d,0),inverse:f.program(13,d,0),data:d}))?b:"")+"                \x3c/div\x3e\n            \x3c/div\x3e\n         \x3c/div\x3e\n    \x3c/div\x3e\n"},
2:function(f,a,h,e,d){return"half"},4:function(f,a,h,e,d){h=f.lambda;f=f.escapeExpression;return"                                    S"+f(h(null!=a?a.seriesNumber:a,a))+" E"+f(h(null!=a?a.episodeNumber:a,a))+":\n"},6:function(f,a,h,e,d){return'                            \x3ca href\x3d"'+f.escapeExpression(f.lambda(null!=a?a.recordLink:a,a))+'" class\x3d"vmp-cta" target\x3d"_blank"\x3eRecord\x3c/a\x3e\n'},8:function(f,a,h,e,d){var b;e=null!=a?a:f.nullContext||{};return'                            \x3cdiv class\x3d"vmp-cta-wrapper '+
(null!=(b=h["if"].call(e,null!=a?a.includeRecordCTA:a,{name:"if",hash:{},fn:f.program(2,d,0),inverse:f.noop,data:d}))?b:"")+'"\x3e\n                                \x3cdiv class\x3d"series-number"\x3e\n'+(null!=(b=h["if"].call(e,null!=a?a.includeDemandSeriesAndEpisodes:a,{name:"if",hash:{},fn:f.program(9,d,0),inverse:f.noop,data:d}))?b:"")+'                                    \x3cspan\x3eOn Demand\x3c/span\x3e\n                                \x3c/div\x3e\n                                \x3ca href\x3d"'+
f.escapeExpression(f.lambda(null!=a?a.watchOnDemandLink:a,a))+'" class\x3d"vmp-cta" target\x3d"_blank"\x3eWatch\x3c/a\x3e\n                            \x3c/div\x3e\n'},9:function(f,a,h,e,d){h=f.lambda;f=f.escapeExpression;return"                                        S"+f(h(null!=a?a.seriesDemandNumber:a,a))+" E"+f(h(null!=a?a.episodeDemandNumber:a,a))+":\n"},11:function(f,a,h,e,d){return'                        \x3cdiv class\x3d"vmp-cta-wrapper get-virgin-tv"\x3e\n                             \x3ca href\x3d"'+
f.escapeExpression(f.lambda(null!=a?a.getTVLink:a,a))+'" class\x3d"vmp-cta" target\x3d"_blank"\x3eGet Virgin TV\x3c/a\x3e\n                        \x3c/div\x3e\n'},13:function(f,a,h,e,d){var b;return null!=(b=h["if"].call(null!=a?a:f.nullContext||{},null!=a?a.includeUpgradeCTA:a,{name:"if",hash:{},fn:f.program(14,d,0),inverse:f.noop,data:d}))?b:""},14:function(f,a,h,e,d){return'                            \x3cdiv class\x3d"vmp-cta-wrapper get-virgin-tv"\x3e\n                                \x3ca href\x3d"'+
f.escapeExpression(f.lambda(null!=a?a.getUpgradePackageLink:a,a))+'" class\x3d"vmp-cta" target\x3d"_blank"\x3eUpgrade my package\x3c/a\x3e\n                            \x3c/div\x3e\n'},compiler:[7,"\x3e\x3d 4.0.0"],main:function(f,a,h,e,d){var b;return null!=(b=h.each.call(null!=a?a:f.nullContext||{},a,{name:"each",hash:{},fn:f.program(1,d,0),inverse:f.noop,data:d}))?b:""},useData:!0}));
Handlebars.registerPartial("banner-cards",Handlebars.template({1:function(f,a,h,e,d){var b;e=null!=a?a:f.nullContext||{};return(null!=(b=h["if"].call(e,null!=a?a.tagTipsTricks:a,{name:"if",hash:{},fn:f.program(2,d,0),inverse:f.noop,data:d}))?b:"")+(null!=(b=h["if"].call(e,null!=a?a.tagCustomerExclusive:a,{name:"if",hash:{},fn:f.program(4,d,0),inverse:f.noop,data:d}))?b:"")},2:function(f,a,h,e,d){var b;h=f.lambda;f=f.escapeExpression;return'        \x3ca href\x3d"'+f(h(null!=a?a.tipsAndTricksUrl:a,
a))+'" class\x3d"banner-card-tag text-uppercase" style\x3d"background: '+(null!=(b=h(null!=(b=null!=a?a.article:a)?b.tagColor:b,a))?b:"")+';"\x3e'+f(h(null!=(b=null!=a?a.article:a)?b.firstEntertainmentCategoryTagLabel:b,a))+"\x3c/a\x3e\n"},4:function(f,a,h,e,d){var b;h=f.lambda;f=f.escapeExpression;return'            \x3ca href\x3d"'+f(h(null!=(b=null!=a?a.article:a)?b.currentArticlePath:b,a))+'" class\x3d"banner-card-tag text-uppercase" style\x3d"background: '+(null!=(b=h(null!=(b=null!=a?a.article:
a)?b.tagColor:b,a))?b:"")+';"\x3e'+f(h(null!=(b=null!=a?a.article:a)?b.firstEntertainmentCategoryTagLabel:b,a))+"\x3c/a\x3e\n"},compiler:[7,"\x3e\x3d 4.0.0"],main:function(f,a,h,e,d){var b;e=f.lambda;return'\n\x3cimg class\x3d"img-responsive hidden-xs full-width" src\x3d"'+(null!=(b=e(null!=(b=null!=(b=null!=a?a.article:a)?b.images:b)?b.desktopImagePath:b,a))?b:"")+'" alt\x3d"Article Desktop Image"\x3e\n\x3cimg class\x3d"img-responsive visible-xs full-width" src\x3d"'+(null!=(b=e(null!=(b=null!=(b=
null!=a?a.article:a)?b.images:b)?b.smallDisplayPath:b,a))?b:"")+'" alt\x3d"Article Small Image"\x3e\n\n'+(null!=(b=h["if"].call(null!=a?a:f.nullContext||{},null!=(b=null!=a?a.article:a)?b.firstEntertainmentCategoryTagLabel:b,{name:"if",hash:{},fn:f.program(1,d,0),inverse:f.noop,data:d}))?b:"")+'\x3cdiv class\x3d"banner-card-cta '+(null!=(b=e(null!=(b=null!=(b=null!=a?a.article:a)?b.vmp:b)?b.textSimpleImgAlign:b,a))?b:"")+'"\x3e\n     \x3ca class\x3d"vmp-cta" href\x3d"'+f.escapeExpression(e(null!=
(b=null!=a?a.article:a)?b.currentArticlePath:b,a))+'.html"\x3e'+(null!=(b=e(null!=(b=null!=(b=null!=a?a.article:a)?b.vmp:b)?b.ctaText:b,a))?b:"")+" \x3c/a\x3e\n\x3c/div\x3e\n\n\n\n"},useData:!0}));
Handlebars.registerPartial("highlights-cards",Handlebars.template({1:function(f,a,h,e,d){var b;e=null!=a?a:f.nullContext||{};return'    \x3cdiv class\x3d"highlights highlightsSlider"\x3e\n        \x3cdiv class\x3d"this-week-highlights"\x3eTHIS WEEK\'S HIGHLIGHTS\x3c/div\x3e\n        \x3cdiv class\x3d"highlights-slides-wrapper"\x3e\n'+(null!=(b=h.each.call(e,null!=a?a.highlights:a,{name:"each",hash:{},fn:f.program(2,d,0),inverse:f.noop,data:d}))?b:"")+'        \x3c/div\x3e\n    \x3c/div\x3e\n\n    \x3cdiv class\x3d"top-nav-wrapper"\x3e\n'+
(null!=(b=h.each.call(e,null!=a?a.highlights:a,{name:"each",hash:{},fn:f.program(11,d,0),inverse:f.noop,data:d}))?b:"")+'    \x3c/div\x3e\n    \x3cdiv class\x3d"nav-wrapper"\x3e\n        \x3cdiv class\x3d"nav-bg"\x3e\n            \x3cdiv class\x3d"active-slide-indicator active-nav"\x3e\x3c/div\x3e\n'+(null!=(b=h.each.call(e,null!=a?a.highlights:a,{name:"each",hash:{},fn:f.program(14,d,0),inverse:f.noop,data:d}))?b:"")+'        \x3c/div\x3e\n        \x3cdiv class\x3d"anchor-down visible-xs"\x3e\x3c/div\x3e\n        \x3cdiv class\x3d"white-line-diagonal"\x3e\x3c/div\x3e\n    \x3c/div\x3e\n'},
2:function(f,a,h,e,d){var b,c;e=null!=a?a:f.nullContext||{};var g=f.escapeExpression,k=f.lambda;return'            \x3cdiv data-item\x3d"highlight-'+g((c=null!=(c=h.index||d&&d.index)?c:h.helperMissing,"function"===typeof c?c.call(e,{name:"index",hash:{},data:d}):c))+'" class\x3d"highlight-slides '+(null!=(b=h["if"].call(e,d&&d.first,{name:"if",hash:{},fn:f.program(3,d,0),inverse:f.noop,data:d}))?b:"")+'"\x3e\n                \x3cdiv class\x3d"highlight-preview"\x3e\n                    \x3cdiv class\x3d"highlight-preview-wrapper"\x3e\n                        \x3cdiv class\x3d"highlight-container"\x3e\n                            \x3cdiv class\x3d"details-container"\x3e\n                                \x3cdiv class\x3d"highlight-heading highlight-font-size-'+
(null!=(b=k(null!=a?a.headingTitleFontSize:a,a))?b:"")+'"\x3e\n                                    '+(null!=(b=k(null!=a?a.headingTitle:a,a))?b:"")+'\n                                \x3c/div\x3e\n                                \x3cdiv class\x3d"highlight-snippet highlight-font-size-'+(null!=(b=k(null!=a?a.snippetFontSize:a,a))?b:"")+'"\x3e\n                                    '+(null!=(b=k(null!=a?a.snippet:a,a))?b:"")+'\n                                \x3c/div\x3e\n\n                                \x3cdiv class\x3d"mobile-highlight-heading highlight-font-size-'+
(null!=(b=k(null!=a?a.mobileHeadingTitleFontSize:a,a))?b:"")+'"\x3e\n                                    '+(null!=(b=k(null!=a?a.mobileHeadingTitle:a,a))?b:"")+'\n                                \x3c/div\x3e\n\n                                \x3cdiv class\x3d"mobile-highlight-snippet highlight-font-size-'+(null!=(b=k(null!=a?a.mobileSnippetFontSize:a,a))?b:"")+'"\x3e\n                                    '+(null!=(b=k(null!=a?a.mobileSnippet:a,a))?b:"")+'\n                                \x3c/div\x3e\n\n                                \x3cdiv class\x3d"highlight-feature-cta"\x3e\n'+
(null!=(b=h["if"].call(e,null!=a?a.highlightFeatureCTA:a,{name:"if",hash:{},fn:f.program(5,d,0),inverse:f.noop,data:d}))?b:"")+"\n                                \x3c/div\x3e\n                            \x3c/div\x3e\n\n"+(null!=(b=h["if"].call(e,null!=a?a.isDisplay:a,{name:"if",hash:{},fn:f.program(9,d,0),inverse:f.noop,data:d}))?b:"")+'                            \x3cimg class\x3d"highlight-image" draggable\x3d"false" onmousedown\x3d"if (event.preventDefault) event.preventDefault()"\n                                 src\x3d"'+
(null!=(b=k(null!=(b=null!=a?a.highlightDesktopImage:a)?b.path:b,a))?b:"")+'"\x3e\n                            \x3cimg class\x3d"highlight-image-mobile" draggable\x3d"false" onmousedown\x3d"if (event.preventDefault) event.preventDefault()"\n                                 src\x3d"'+g(k(null!=(b=null!=a?a.fullBleedMobileImage:a)?b.path:b,a))+'"\x3e\n\n                        \x3c/div\x3e\n                    \x3c/div\x3e\n                \x3c/div\x3e\n            \x3c/div\x3e\n'},3:function(f,a,h,
e,d){return" active-highlight "},5:function(f,a,h,e,d){var b;return null!=(b=h["if"].call(null!=a?a:f.nullContext||{},null!=(b=null!=a?a.highlightFeatureCTA:a)?b.label:b,{name:"if",hash:{},fn:f.program(6,d,0),inverse:f.noop,data:d}))?b:""},6:function(f,a,h,e,d){var b,c;e=null!=a?a:f.nullContext||{};var g=f.lambda;return'                                            \x3ca class\x3d"vmp-cta"\n                                               style\x3d"color: '+(null!=(b=(c=null!=(c=h.tagColor||(null!=a?
a.tagColor:a))?c:h.helperMissing,"function"===typeof c?c.call(e,{name:"tagColor",hash:{},data:d}):c))?b:"")+';"\n                                               target\x3d"'+(null!=(b=h["if"].call(e,null!=(b=null!=a?a.highlightFeatureCTA:a)?b.openedInNewWindow:b,{name:"if",hash:{},fn:f.program(7,d,0),inverse:f.noop,data:d}))?b:"")+'"\n                                               href\x3d"'+(null!=(b=g(null!=(b=null!=a?a.highlightFeatureCTA:a)?b.url:b,a))?b:"")+'"\x3e'+(null!=(b=g(null!=(b=null!=
a?a.highlightFeatureCTA:a)?b.label:b,a))?b:"")+"\x3c/a\x3e\n"},7:function(f,a,h,e,d){return"_blank"},9:function(f,a,h,e,d){var b,c;e=f.lambda;return'                                \x3cdiv class\x3d"nav-wrapper"\x3e\n                                    \x3cdiv class\x3d"nav-bg"\x3e\n                                        \x3cdiv class\x3d"navtab-subheading active"\n                                             data-colour\x3d"'+f.escapeExpression(e(null!=a?a.tagColor:a,a))+'"\x3e\n                                            \x3cdiv class\x3d"heading-text"\x3e\n                                                \x3cspan class\x3d"vertical-line" style\x3d"background-color: '+
(null!=(b=(c=null!=(c=h.tagColor||(null!=a?a.tagColor:a))?c:h.helperMissing,"function"===typeof c?c.call(null!=a?a:f.nullContext||{},{name:"tagColor",hash:{},data:d}):c))?b:"")+';"\x3e\x3c/span\x3e\n                                                '+(null!=(b=e(null!=a?a.navigationTabHeadingTitle:a,a))?b:"")+"\n                                                "+(null!=(b=e(null!=a?a.navigationTabSnippet:a,a))?b:"")+'\n                                            \x3c/div\x3e\n                                        \x3c/div\x3e\n                                    \x3c/div\x3e\n                                    \x3cdiv class\x3d"white-line-diagonal"\x3e\x3c/div\x3e\n                                \x3c/div\x3e\n\n'},
11:function(f,a,h,e,d){var b,c;a=null!=a?a:f.nullContext||{};return'            \x3cdiv data-item\x3d"top-highlight-'+f.escapeExpression((c=null!=(c=h.index||d&&d.index)?c:h.helperMissing,"function"===typeof c?c.call(a,{name:"index",hash:{},data:d}):c))+'"\n                 class\x3d"top-navtab '+(null!=(b=h.unless.call(a,d&&d.first,{name:"unless",hash:{},fn:f.program(12,d,0),inverse:f.noop,data:d}))?b:"")+'"\x3e\x3c/div\x3e\n'},12:function(f,a,h,e,d){return" active "},14:function(f,a,h,e,d){var b,
c;e=f.lambda;var g=f.escapeExpression;f=null!=a?a:f.nullContext||{};var k=h.helperMissing;return'                \x3cdiv class\x3d"navtab-subheading"\n                     data-colour\x3d"'+g(e(null!=a?a.tagColor:a,a))+'"\n                     data-target\x3d"highlight-'+g((c=null!=(c=h.index||d&&d.index)?c:k,"function"===typeof c?c.call(f,{name:"index",hash:{},data:d}):c))+'"\n                     data-slide\x3d"'+g((c=null!=(c=h.index||d&&d.index)?c:k,"function"===typeof c?c.call(f,{name:"index",
hash:{},data:d}):c))+'"\x3e\n                    \x3cdiv class\x3d"heading-text"\x3e\n                        \x3cspan class\x3d"vertical-line" style\x3d"background-color: '+(null!=(b=(c=null!=(c=h.tagColor||(null!=a?a.tagColor:a))?c:k,"function"===typeof c?c.call(f,{name:"tagColor",hash:{},data:d}):c))?b:"")+';"\x3e\x3c/span\x3e\n                        '+(null!=(b=e(null!=a?a.navigationTabHeadingTitle:a,a))?b:"")+"\n                        "+(null!=(b=e(null!=a?a.navigationTabSnippet:a,a))?b:"")+
"\n                    \x3c/div\x3e\n                \x3c/div\x3e\n"},16:function(f,a,h,e,d){var b;return(null!=(b=h["if"].call(null!=a?a:f.nullContext||{},null!=a?a.wcmmodeEedit:a,{name:"if",hash:{},fn:f.program(17,d,0),inverse:f.noop,data:d}))?b:"")+"\n"},17:function(f,a,h,e,d){return"        \x3cdiv\x3e\n            No highlights features. Please create highlight features.\n        \x3c/div\x3e\n"},compiler:[7,"\x3e\x3d 4.0.0"],main:function(f,a,h,e,d){var b;return null!=(b=h["if"].call(null!=
a?a:f.nullContext||{},null!=a?a.hasHighLights:a,{name:"if",hash:{},fn:f.program(1,d,0),inverse:f.program(16,d,0),data:d}))?b:""},useData:!0}));
Handlebars.registerPartial("fixture",Handlebars.template({1:function(f,a,h,e,d){var b;e=f.lambda;var c=f.escapeExpression;return'  \x3cdiv class\x3d"fg-date '+c(e(null!=a?a["class"]:a,a))+'"\x3e'+c(e(null!=a?a.dateString:a,a))+'\x3c/div\x3e\n  \x3cdiv class\x3d"fg-games"\x3e\n    \x3cdiv class\x3d"game-item"\x3e\n      \x3cdiv class\x3d"fg-game"\x3e\n        \x3cdiv class\x3d"team left"\x3e'+c(e(null!=a?a.homeTeam:a,a))+'\x3c/div\x3e\n\n        \x3cdiv class\x3d"fg-vs"\x3e\n          \x3cdiv class\x3d"vs"\x3evs\x3c/div\x3e\n          \x3cdiv class\x3d"time"\x3e'+
c(e(null!=a?a.startTime:a,a))+'\x3c/div\x3e\n          \x3cdiv class\x3d"channel"\x3e\n'+(null!=(b=h["if"].call(null!=a?a:f.nullContext||{},null!=a?a.channelLogo:a,{name:"if",hash:{},fn:f.program(2,d,0),inverse:f.program(4,d,0),data:d}))?b:"")+'          \x3c/div\x3e\n        \x3c/div\x3e\n\n        \x3cdiv class\x3d"team right"\x3e'+c(e(null!=a?a.awayTeam:a,a))+'\x3c/div\x3e\n      \x3c/div\x3e\n      \x3cdiv class\x3d"bottom-line"\x3e\x3c/div\x3e\n    \x3c/div\x3e\n  \x3c/div\x3e\n'},2:function(f,
a,h,e,d){h=f.lambda;f=f.escapeExpression;return'              \x3cimg src\x3d"/content/dam/virginmedia/dotcom/static/channel-list/tv-logos/'+f(h(null!=a?a.channelLogo:a,a))+'" title\x3d"'+f(h(null!=a?a.channelName:a,a))+'"/\x3e\n'},4:function(f,a,h,e,d){return"              "+f.escapeExpression(f.lambda(null!=a?a.channelName:a,a))+"\n"},compiler:[7,"\x3e\x3d 4.0.0"],main:function(f,a,h,e,d){var b;return null!=(b=h.each.call(null!=a?a:f.nullContext||{},a,{name:"each",hash:{},fn:f.program(1,d,0),inverse:f.noop,
data:d}))?b:""},useData:!0}));(function(f,a){var h={},e=function(){a(window).scroll(function(){var d=a(window).scrollTop();var b="BackCompat"===document.compatMode?d+document.body.clientHeight:d+document.documentElement.clientHeight;var c=b-200;a(".article-action-box").each(function(){var d=a(this).offset().top,e=1;c<d&&d<b&&(e-=(d-c)/200);a(this).css("opacity",e)})})};h.init=function(a){e()};f.register({name:"articleActionBoxContainer",api:h,selector:".article-action-box-container"})})(VMJS,VMJSjQuery);
(function(f,a){var h={},e=function(){a(window).scroll(function(){var d=a(window).scrollTop();var b="BackCompat"===document.compatMode?d+document.body.clientHeight:d+document.documentElement.clientHeight;var c=b-150;a(".bannerCard").each(function(){var d=a(this).offset().top,e=1;c<d&&d<b&&(e-=(d-c)/150);a(this).css("opacity",e)})})};h.init=function(a){e()};f.register({name:"bannerCardContainer",api:h,selector:".banner-card-container"})})(VMJS,VMJSjQuery);
(function(f,a,h){var e={pageCount:0},d=["player","mix","m_plus","fun","full_house"],b=["Player","Mix","M+","Fun","Full House"],c=["player","mix","m-plus","fun","full-house"],g=["player","mix","m_plus","fun","full_house"],k=function(a,b){b.find(".validation")[a?"removeClass":"addClass"]("hidden")},q=function(a,b){var c=a.find(".owl-carousel");a.find(".owl-carousel").removeClass("row");a.find("."+b+"-cards-item ").removeClass("col-xs-12 col-sm-6 col-lg-4");c.owlCarousel({margin:30,navText:!1,nav:!1,
merge:!0,rewind:!0,responsive:{0:{items:1,dots:!0,dotsEach:!0},768:{items:2.4,dots:!0,dotsEach:!0},992:{items:3,dots:!1,dotsEach:!1},1200:{items:3,dots:!1,dotsEach:!1}}})},l=function(a){a&&0<a.length&&(a=a.trim(),Object.keys(c).forEach(function(b){if(c[b]===a)return a=d[b],!1}));return a},m=function(b){b=a.cookie(b);var c=null,d="",e="";b&&b.split("|").forEach(function(a){var b=a.indexOf("\x3d");if(-1!=b){var g=a.substring(0,b);"package"===g?c=a.substring(b+1):"ss"===g?d=a.substring(b+1):"sk"===g&&
(e=a.substring(b+1))}});return{"package":l(c),ss:d,sk:e}},n=function(a){var b=new Date;b.setTime(b.getTime()+31536E6);b="; expires\x3d"+b.toGMTString();document.cookie=encodeURIComponent("vmez")+"\x3d"+a+b+"; path\x3d/"},p=function(){for(var a=decodeURIComponent(document.cookie).split(";"),b=0;b<a.length;b++){for(var c=a[b];" "===c.charAt(0);)c=c.substring(1);if(0===c.indexOf("vmez\x3d"))return c.substring(5,c.length)}return""},t=function(a){return!(!a.premiums||!0!==a.premiums.sky_cinema&&!0!==a.premiums.sky_sports)},
B=function(c){y(c);var d=c.items[0].cards;d.length<this.limit&&!1===this.component.data("wcmmode")&&this.component.find(".load-more").hide();d.forEach(function(b){!a("#"+c.componentId).data("wcmmode")&&b.articleCardCTA&&b.articleCardCTA.url&&-1<b.articleCardCTA.url.indexOf("/content/virginmedia/dotcom/en")&&(b.articleCardCTA.url=b.articleCardCTA.url.split("/content/virginmedia/dotcom/en")[1])});for(var e in c.loadMoreFlags)u(a("#"+e),!!c.loadMoreFlags[e]);if(d.length){e=this.component.data("cards-type");
var f=this.component.data("display-mode"),l=this.component.find("."+e+"-cards-display");if("calendar"===e){var n=m("vmez");n&&n.package?d.forEach(function(a){var c;if(c=t(a))c=a.premiums?"1"===n.sk&&!0===a.premiums.sky_cinema||"1"===n.ss&&!0===a.premiums.sky_sports:!1,c=!c;if(c||!(t(a)||a.packages&&!0===a.packages[n.package]))a.includeGetTVCTA=!1,a.includeDemandCTA=!1,a.includeRecordCTA=!1,a.includeUpgradeCTA=!0;a.tvTierHD&&g.indexOf(n.package)>=b.indexOf(a.tvTierHD)&&(a.showChannel=a.showChannelHD,
a.channelNumber=a.channelNumberHD,a.channelIconPath=a.channelIconPathHD,a.tvTier=a.tvTierHD);a.recordLink||(a.includeRecordCTA=!1)}):d.forEach(function(a){a.includeGetTVCTA=!0;a.includeRecordCTA=!0;a.recordLink||(a.includeRecordCTA=!1)})}d=h.partials[e+"-cards"](d);l.find("."+e+"-cards").append(d);"carousel"===f&&992>a(window).width()?q(l,e):(l.find(".owl-carousel").removeClass("owl-carousel").addClass("row"),l.find("."+e+"-cards-item ").addClass("col-lg-4 col-sm-6 col-xs-12"))}else k(!d.length,this.component)},
u=function(a,b){a.find(".load-more").toggle(b)},A=function(b,c){var d=b.data("cards-type"),g=b.data("filter-by-tags"),h=b.data("variant"),k=b.data("segment"),l=b.data("load-more"),m=document.location.href,q=b.attr("id");b="?s_n\x3d"+b.data("node-path").split("/")[2]+"\x26l_t\x3dload-more\x26p_c\x3d"+e.pageCount++ +"\x26"+d+"_l_"+q+"\x3d"+c+"\x26"+d+"_p_"+q+"\x3d"+b.data("use-premiums")+"\x26"+d+"_p_f_"+q+"\x3d"+b.data("filter-by-package");0<a(".vmp-article-hero").length&&m&&-1<m.indexOf("/virgin-tv-edit")&&
(b+="\x26a_p\x3d/virgin-tv-edit"+m.split("/virgin-tv-edit")[1].split(".html")[0]);g&&0<g.length&&(b+="\x26"+d+"_t_f_"+q+"\x3d"+g);h&&0<h.length&&(b+="\x26"+d+"_v_"+q+"\x3d"+h);k&&0<k.length&&(b+="\x26"+d+"_s_"+q+"\x3d"+k);l&&(b+="\x26"+d+"_l_m_"+q+"\x3d"+l);f.Cache.vmp.cards&&(d=p(),0<d.length&&(d+="|"),d+="cards\x3d"+f.Cache.vmp.cards,n(d));return common.AsyncService.ajaxPromise({url:"/services/api/allCards"+b,method:"GET",dataType:"json"})},y=function(b){var c=p(),d=c.indexOf("cards\x3d");-1<d&&
(c=c.substring(0,d),"|"===c.slice(-1)&&(c=c.slice(0,-1)),n(c));!b||!b.cards||0<a(".vmp-article-hero").length||(f.Cache.vmp.cards=b.cards)},D=function(a,b){b=b||a.data("limit");A(a,b).then(B.bind({component:a,limit:b})).fail(function(){k(!0,a);!1===a.data("wcmmode")&&a.find(".load-more").hide()})},w=function(b){b.on("click",".load-more",function(){var c=768>a(window).width()?6:12;D(b,c)})},r=function(){a(window).scroll(function(){var b=a(window).scrollTop();var c="BackCompat"===document.compatMode?
b+document.body.clientHeight:b+document.documentElement.clientHeight;var d=c-200;a(".cardsDisplay").each(function(){var b=a(this).offset().top,e=1;d<b&&b<c&&(e-=(b-d)/200);a(this).css("opacity",e)})})};e.init=function(b){e.pageCount=0;b.each(function(b,c){b=a(c);b.attr("id",b.data("unique-id"));w(b)});r()};f.register({name:"cardsDisplayContainer",api:e,selector:".cards-display-container"})})(VMJS,VMJSjQuery,Handlebars);
(function(f,a){var h={},e=function(){a(window).scroll(function(){var d=a(window).scrollTop();var b="BackCompat"===document.compatMode?d+document.body.clientHeight:d+document.documentElement.clientHeight;var c=b-200;a(".rainbow").each(function(){var d=a(this).offset().top,e=1;c<d&&d<b&&(e-=(d-c)/200);a(this).css("opacity",e)})})};h.init=function(a){e()};f.register({name:"entertainmentNavigation",api:h,selector:".rainbow"})})(VMJS,VMJSjQuery);
(function(f){VMJS.register({name:"highlightDisplay",api:{init:function(a){}},selector:".highlights-wrapper"})})(VMJSjQuery);
(function(f,a){var h=/.*\/virgin-tv-edit\/sport\/+[^#?\s]|.*\/virgin-tv-edit\/movies\/+[^#?\s]|.*\/virgin-tv-edit\/tv\/+[^#?\s]|.*\/virgin-tv-edit\/on-demand\/+[^#?\s]|.*\/virgin-tv-edit\/tips-and-tricks\/+[^#?\s]/,e={},d=function(a){a="/services/api/cardsNavigation?page-path\x3d"+a;if(f.Cache.vmp.cards){var b=q();0<b.length&&(b+="|");b+="cards\x3d"+f.Cache.vmp.cards;k(b)}return common.AsyncService.ajaxPromise({url:a,method:"GET",dataType:"json"})},b=function(){var a=document.location.href.split(".html")[0].split("?")[0];
return h.test(a)},c=function(c){var e=function(){d(window.location.pathname.split(".html")[0].split("?")[0]).then(function(b){b&&b.previous&&a(".arrow-left-btn").append(a("\x3ca\x3e").attr("href",b.previous+".html").addClass("arrow-left-btn")).removeClass("arrow-left-btn");b&&b.next&&a(".arrow-right-btn").append(a("\x3ca\x3e").attr("href",b.next+".html").addClass("arrow-right-btn")).removeClass("arrow-right-btn");var c=q(),d=c.indexOf("cards\x3d");-1<d&&(c=c.substring(0,d),"|"===c.slice(-1)&&(c=c.slice(0,
-1)),k(c));b&&b.cards&&(f.Cache.vmp.cards=b.cards);g()})};if(b())e();else var h=setInterval(function(){var a=f.Cache.vmp;a.hasOwnProperty("cards")&&null!==a.cards&&void 0!==a.cards&&(e(),clearInterval(h))},100)},g=function(){f.Cache.vmp.cards&&a(".arrow-right-btn, .arrow-left-btn").each(function(b,c){a(c).on("click",function(a){f.Cache.vmp.cards&&(a=q(),0<a.length&&(a+="|"),-1===a.indexOf("cards\x3d")&&(a+="cards\x3d"+f.Cache.vmp.cards),-1===a.indexOf("keepContent\x3dtrue")&&(a+="|keepContent\x3dtrue"),
k(a))})})},k=function(a){var b=new Date;b.setTime(b.getTime()+31536E6);b="; expires\x3d"+b.toGMTString();document.cookie=encodeURIComponent("vmez")+"\x3d"+a+b+"; path\x3d/"},q=function(){for(var a=decodeURIComponent(document.cookie).split(";"),b=0;b<a.length;b++){for(var c=a[b];" "===c.charAt(0);)c=c.substring(1);if(0===c.indexOf("vmez\x3d"))return c.substring(5,c.length)}return""};e.init=function(b){b.length&&c(a(b[0]))};f.register({name:"chevrone",api:e,selector:".vmp-article-hero"})})(VMJS,jQuery);
(function(f,a,h){var e={},d=[],b={"Sky Sports":"skysports.png","BT Sport":"btsport.png"},c=function(b){b.each(function(){a(this).prev().find(".game-item .bottom-line").hide();a(this).next().find(".game-item:hidden").length===a(this).next().find(".game-item").length?a(this).hide():a(this).show()})},g=function(a){a=a.split(".");var b=a[2];2===b.length&&(b=((new Date).getFullYear()+"").substring(0,2)+b);a=new Date(b+"-"+a[1]+"-"+a[0]);return"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ")[a.getDay()]+
" "+a.getDate()+" "+"January February March April May June July August September October November December".split(" ")[a.getMonth()]},k=function(b){b.find(".fg-footer .load-more").click(function(){var d=b.find(".fg-date"),e=b.find(".game-item").size(),g=b.find(".game-item:visible").length;a(".game-item:lt("+(g+5<=e?g+5:e)+")").show();c(d);0===b.find(".game-item:hidden").length&&b.find(".fg-footer").hide()})},q=function(b){var d=b.find(".fg-date");a(".game-item:lt(6)").show();c(d);0===b.find(".game-item:hidden").length?
b.find(".fg-footer").hide():b.find(".fg-footer").show();b.find(".game-item .bottom-line").last().hide()},l=function(c){var d=c.fixtures,e=a.Deferred();if("undefined"!==typeof this.filters&&("0"!==this.filters.club||"0"!==this.filters.month||"0"!==this.filters.channel)){var f=this.filters;"0"!==f.club&&(d=a(d).filter(function(a,b){return b.awayTeam===f.club||b.homeTeam===f.club}));"0"!==f.month&&(f.month=parseInt(f.month),d=a(d).filter(function(a,b){a=b.date.split(".");return parseInt(a[1])===f.month}));
"0"!==f.channel&&(d=a(d).filter(function(a,b){return b.channelName===f.channel}))}for(var k=d.length,l=[],m=Object.create(null),n=0;n<k;n++){var p=d[n],u={};u[n]=d[n];var t=p.date.split(".");u[n].dateString=g(p.date);u[n].month=t[1];u[n].class=t.join("-");u[n].channelLogo=b[p.channelName];m[p.date]||(m[p.date]=[]);m[p.date]=u[n].class;l.push(u[n])}d=this.component;l=h.partials.fixture(l);var A=d.find(".fg-fixture");A.html(l);A.find(".fg-date").addClass("fixture-remove-date");a.each(m,function(a,b){A.find(".fg-date."+
b+":lt('1')").removeClass("fixture-remove-date")});a("div").remove(".fixture-remove-date");q(d);return e.resolve(c)},m=function(){var b=a.Deferred(),c=sessionStorage.getItem("vm_fixtures_res");return null!==c?b.resolve(JSON.parse(c)):common.AsyncService.ajaxPromise({url:"/content/dam/virginmedia/dotcom/static/channel-list/fixtures.js"}).then(function(a){sessionStorage.setItem("vm_fixtures_res",JSON.stringify(a));return a})},n=function(a,b){return m().then(l.bind({component:a,filters:b}))},p=function(a){var b=
function(){a.find(".game-item").hide();var b=a.find(".filter select.clubs"),c=a.find(".filter select.months"),e=a.find(".filter select.fixture");c=c.val();b=b.val();e=e.val();d.club="0";d.month="0";d.channel="0";b&&(d.club=b);c&&(d.month=c);e&&(d.channel=e);n(a,d)};a.find(".filter").change(b);setTimeout(b,200)},t=function(b){var c=Object.create(null),d=a.Deferred();b.fixtures.forEach(function(a){c[0]="All Clubs";c[a.homeTeam]||(c[a.homeTeam]=[]);c[a.homeTeam]=a.homeTeam;c[a.awayTeam]||(c[a.awayTeam]=
[]);c[a.awayTeam]=a.awayTeam});var e=this.component.find(".filter select.clubs"),g={};Object.keys(c).sort().forEach(function(a){g[a]=c[a]});a.each(g,function(b,c){e.append(a("\x3coption\x3e",{value:b}).text(c))});e.selectpicker("refresh");return d.resolve(b)},B=function(b){var c=Object.create(null);b.fixtures.forEach(function(a){c[0]="All Fixtures";0<a.channelName.length&&(c[a.channelName]||(c[a.channelName]=[]),c[a.channelName]=a.channelName)});var d=this.component.find(".filter select.fixture");
a.each(c,function(b,c){d.append(a("\x3coption\x3e",{value:b}).text(c))});d.selectpicker("refresh")},u=function(){var b=this.component.find(".filter select.months"),c="January February March April May June July August September October November December".split(" "),d=(new Date).getMonth();b.append(a("\x3coption\x3e",{value:"0"}).text("All Months"));for(var e=d;12>e;e++)b.append(a("\x3coption\x3e",{value:e+1}).text(c[e]));for(e=1;e<=d;e++)b.append(a("\x3coption\x3e",{value:e}).text(c[e-1]));b.selectpicker("refresh")};
e.init=function(b){b.length&&(n(b).then(t.bind({component:b})).then(B.bind({component:b})).then(u.bind({component:b})),768>a(window).width()&&b.find(".filter select").removeClass("selectpicker"),p(b),k(b))};f.register({name:"fixtureGenerator",api:e,selector:".fixture-generator"})})(VMJS,VMJSjQuery,Handlebars);
(function(f){var a={},h=function(a){if(a.find(".fixed").length){var d=a.find(".first-hero").height();a.find(".scrolled-content").css("margin-top",d+"px")}};a.init=function(a){a.length&&a.find(".first-hero").length&&(f(window).scroll(function(){var d=a.find(".first-hero"),b=a.find(".scrolled-content"),c=d.height(),e=f("#unified-header").height(),k=e+c+10;e<=f(window).scrollTop()?(d.addClass("fixed"),d.removeClass("relative"),b.css("margin-top",c+"px"),h(a)):(d.addClass("relative"),d.removeClass("fixed"),
b.css("margin-top","0"));k<=f(window).scrollTop()?d.hide():d.show()}),f(window).resize(function(){h(a)}))};VMJS.register({name:"entertainmentTemplate",api:a,selector:".vmp-article-template"})})(VMJSjQuery);
(function(f,a){f.Cache.vmp||(f.Cache.vmp={});a=decodeURIComponent(window.location.search.substring(1));var h=a.split("\x26"),e=decodeURIComponent(window.location.pathname),d="",b=!1;if(/.*\/virgin-tv-edit.*/.test(e)){if(""===a){a:{d=decodeURIComponent(document.cookie).split(";");for(var c=0;c<d.length;c++){for(var g=d[c];" "===g.charAt(0);)g=g.substring(1);if(0===g.indexOf("vmez\x3d")){d=g.substring(5,g.length);break a}}d=""}0<d.length&&(c=d.indexOf("keepContent\x3dtrue"),g=d.indexOf("cards\x3d"),
-1<c?(d=d.substring(0,c),"|"===d.slice(-1)&&(d=d.slice(0,-1)),b=!0,-1<g&&(f.Cache.vmp.cards=d.substring(g+6,d.length),d=d.substring(0,g))):-1===g?d="":(d=d.substring(0,g),b=!0))}else{var k;for(f=0;f<h.length;f++)c||-1===h[f].indexOf("package\x3d")?k||-1===h[f].indexOf("ss\x3d")?g||-1===h[f].indexOf("sk\x3d")||(g=h[f]):k=h[f]:c=h[f];g&&(d=g+"|"+d);k&&(d=k+"|"+d);c&&(d=c+"|"+d)}"|"===d.slice(-1)&&(d=d.slice(0,-1));if(0<d.length||b)f=d,b=new Date,b.setTime(b.getTime()+31536E6),b="; expires\x3d"+b.toGMTString(),
document.cookie=encodeURIComponent("vmez")+"\x3d"+f+b+"; path\x3d/";f="";b=a.indexOf("buspart\x3d");-1!==b&&(f=a.substring(b).split("\x26")[0]);history.pushState&&""!==a&&(0<d.length||0<f.length)&&(a=window.location.protocol+"//"+window.location.host+window.location.pathname,0<f.length&&(a=a+"?"+f),window.history.pushState({path:a},"",a))}})(VMJS,VMJSjQuery);
(function(f,a,h){function e(d,e){function f(a,b){aa?(b=F(a,b),0<Object.keys(b).length&&c.setFormValues(a,b)):c.setFormValues(a,b)}function p(a,b,c){var d=[];W.isAkanaEndpoint&&d.push(n);a=b&&c?"?accountNumber\x3d"+b+"\x26siteReference\x3d"+c+"\x26campaignCode\x3d"+a:Z?"?urlUID\x3d"+Z:"?signedURL\x3d"+encodeURIComponent("campaigncode\x3d"+a);return common.AsyncService.ajaxPromise({method:"GET",headers:d,contentType:"application/json; charset\x3dUTF-8",withCredentials:W.xhr,url:da+a})}function t(a,
b,c){K.addClass("disabled");var d=[];b.isAkanaEndpoint&&d.push(n);T&&d.push({key:"reCaptchaToken",value:T});return common.AsyncService.ajaxPromise({method:b.httpMethod,url:c+b.endpointUrl,headers:d,withCredentials:b.xhr,data:"POST"===b.httpMethod||"PUT"===b.httpMethod?JSON.stringify(a):a})}function y(a,b){var c={},d="CLICK_VISIT"===z.find('[name\x3d"campaignID"]').val(),e=a.subject;d&&(e="Home Visit Request for appointment_date appointment_time_slot - first_name last_name");Object.keys(a).forEach(function(g){if(!g.startsWith("_no_submit_")){var f=
a[g];if(f)if(b?h.extend(!0,c,ea(g,f,b)):c[g]=f,d&&-1<l.indexOf(g.toLowerCase()))e=e.replace(g.toLowerCase(),f);else if(b&&-1<m.indexOf(g))switch(g){case "requestID":e=e.replace("REQUEST_ID",f);break;case "serviceCode":e=e.replace("SERVICE_CODE",f);break;case "CAMPAIGN_CODE":e=e.replace("CAMPAIGN_CODE",f)}}});void 0!==c.CreateCampaignRecordRequest&&void 0!==c.CreateCampaignRecordRequest.paymentSpecification&&void 0===c.CreateCampaignRecordRequest.paymentSpecification.directDebitSingleSignatory&&(c.CreateCampaignRecordRequest.paymentSpecification.directDebitSingleSignatory=
!1);e&&(d||b)&&h.extend(!0,c,ea("subject",e,b));return c}function D(a){S.length&&"undefined"!==typeof grecaptcha?S.data("sitekey")&&grecaptcha.ready(function(){grecaptcha.execute()}):r(a)}function w(){var a=z.data("call-api-after-submit"),b=z.data("api-after-submit");if(a)return a=[],b.isAkanaEndpoint&&a.push(n),common.AsyncService.ajaxPromise({method:b.httpMethod,url:P+b.endpointUrl,withCredentials:b.xhr,headers:a})}function r(a){function b(a){var b=c.getFormDataIndexById(z.prop("id"),f);-1===b?
(f.push(g),b=f.length-1):f[b]=g;e=JSON.stringify(f);c.encryptDecryptStoredData("encryption",e).then(function(d){window.sessionStorage.setItem("journeyData",d);if(H||N||a)ja(a);else{U={};for(d=b+1;0<d--;)if(d===b||f[d].formSkip&&!f[d].formComponentSubmit)U=h.extend({},f[d].formData,U);else if(!f[d].formComponentSubmit)break;a:{if(!0===z.data("resubmit-checkbox")){if("true"===window.sessionStorage.getItem("preventResubmitFlag")){c.showAceMessageBanner(J,Q.genericMsg,z);K.addClass("disabled");d=!1;break a}window.sessionStorage.setItem("preventResubmitFlag",
"true")}d=!0}if(d)x(U);else return!1}})}var d=c.serializeForm(z,"subject"),e,g={formID:z.prop("id"),formURL:window.location.href,formSkip:H,formComponentSubmit:N,formData:d};if(L)d=window.sessionStorage.getItem("journeyData"),c.encryptDecryptStoredData("decryption",d).then(function(c){f=JSON.parse(c)||[];b(a)});else{var f=window.VMACE.formsData;b(a)}}function x(a){var b=z.data("api-endpoints"),d=y(a),e,g=[],f=h.Deferred(),k=0;b=Array.isArray(b)?b:[b];f.always(function(){K.removeClass("disabled")}).then(function(){ja()}).fail(function(a){if(L)c.handleApiErrors(g,
z,"error",null,!0,!1,null,function(){ja()});else{var b=parseInt(a.status)||null;a=a.responseJSON&&a.responseJSON.error||null;400===b&&"Google reCaptchaToken is missing from HTTP Header"===a||403===b&&"Google reCaptchaToken is invalid"===a?c.showAceMessageBanner(J,Q.recaptchaMsg,z):c.showAceMessageBanner(J,Q.genericMsg,z)}});b.forEach(function(c){e=c.endpointSchema?y(a,c.endpointSchema):d;t(e,c,P).then(function(){k++;k===b.length&&(0<g.length?f.reject():f.resolve())}).fail(function(a){L?(g.push({apiLabel:c.apiLabel,
xhr:a}),k++,k===b.length&&f.reject()):f.reject(a)})})}function C(){if(aa){if(!Y)return E(),c.showAceMessageBanner(J,Q.wrongParamsMsg,z);if(ba&&V&&!b.isProd())G(Y,ba,V);else{var a=(window.location.href.split("?")[1].split("\x26campaigncode\x3d")[1]||"").split("\x26seg\x3demail")[0];a&&(Y=a);G(Y)}}}function E(){z.find(".formParsys").addClass("hidden")}function F(a,b,c){var d=a.find(".dyn-form-vace-hidden-data"),e=d.find("script").html(),g=[],f={};Z?h.extend(!0,b,{urlUID:Z}):c&&h.extend(!0,b,{signedURL:c});
Object.keys(b).forEach(function(c){if(0===c.indexOf("ADDITIONAL_FIELD_"))f[c]=b[c];else if("MAIN_ACCOUNT_HOLDER"===c)f[c]=b[c];else if("TERMS_AND_CONDITIONS"===c)f[c]=b[c];else{var d=a.find('input[name\x3d"'+c+'"]');d.length?d.each(function(a,d){a=h(d);a.hasClass("radio-button")?a.val()===b[c]&&(a.attr("readonly",!0).trigger("change"),a.click()):(a.val(b[c]),a.attr("readonly",!0).trigger("change"))}):g.push({key:c,value:b[c]})}});d.html(Handlebars.compile(e)(g));return f}function G(a,b,d){var e=b||
d?null:encodeURIComponent("campaigncode\x3d"+a);p(a,b,d).then(function(a){a.VerifyAccountCampaignEligibilityResponse&&a.VerifyAccountCampaignEligibilityResponse.success&&!0===a.VerifyAccountCampaignEligibilityResponse.success.eligibility?F(z,a.VerifyAccountCampaignEligibilityResponse.success.customerDetailsSourceFormat,e):(E(),c.showAceMessageBanner(J,Q.eligibilityMsg,z))}).fail(function(){E();c.showAceMessageBanner(J,Q.eligibilityMsg,z)})}var z=h(e).find(".ace-form"),H=z.data("skipSubmit");z.data("resubmit-checkbox");
var N=z.data("component-submit"),I=z.find("input.pre-abandonment"),K=z.find("button[type\x3dsubmit]");z.data();d=b.isLaunchOrPreview();var J=z.find(".dyn-form-message-banner-warning"),Q=J.data()||{},S=z.find(".google-captcha2-invisible .g-recaptcha"),T,U;e=z.closest(".csjt-checkout-template");var L=e.length,P=L?sessionStorage.getItem("storeDomainServiceability"):"",R=z.closest(".snippet-tabs-wrapper"),aa=z.data("check-eligibility"),O=b.getParametersFromUrl(),X=O.urluid&&O.urluid.slice(10,-13)||"",
Z=O.urluid&&O.urluid.slice(0,10)||null,Y=O.campaigncode||X,ba=O.accountnumber,V=O.sitereference;O=z.data("lifecycle-endpoints");var v=z.data("redirect-options"),M=z.data("transactional-inputs");if(O){var W=O.filter(function(a){return"checkEligibility"===a.lifecycle})[0];var da=d?W.previewEndpointUrl:W.endpointUrl;var ca=O.filter(function(a){return"preAbandonment"===a.lifecycle})[0];var ia=d?ca.previewEndpointUrl:ca.endpointUrl}L?R.length&&(z.on("dynFormVisible",function(){a.journey.utils.updateBasket(z);
a.journey.utils.updateMap(z)}),d=e.find(".sticky-nav"),d=z.data("csjtSticky")?z.data("csjtSticky").add(d):d,z.data("csjtSticky",d),z.on("focus blur",".dyn-form-input, .dyn-form-textarea",function(a){z.data("csjtSticky").toggleClass("sticky-prevent","focusin"===a.type)})):(window.VMACE=window.VMACE||{utils:{},flags:{}},window.VMACE.formsData||window.VMACE.flags.dataLoading||(window.VMACE.flags.dataLoading=!0,d=window.sessionStorage.getItem("journeyData"),c.encryptDecryptStoredData("decryption",d).then(function(a){window.VMACE.formsData=
JSON.parse(a)||[];delete window.VMACE.flags.dataLoading})),window.VMACE.utils.getFormsDataForPage=function(){for(var a=[],b=0;b<window.VMACE.formsData.length;b++)window.VMACE.formsData[b].formURL===window.location.href&&a.push(window.VMACE.formsData[b]);return a},b.waitForGlobal("VMACE","formsData",function(){if(window.VMACE.formsData.length){var a=h("body").find(".ace-form"),b=z.prop("id");if(b){var d=a.index(z),e=window.VMACE.utils.getFormsDataForPage();b=c.getFormDataIndexById(b,e);z.toggleClass("hidden",
!0);a.length===e.length?-1!==b?(f(z,e[b].formData),d===a.length-1&&z.toggleClass("hidden",!1).trigger("dynFormVisible")):z.toggleClass("hidden",!1).trigger("dynFormVisible").addClass("dyn-form-ready").trigger("dynFormReady"):-1!==b?f(z,e[b].formData):d===e.length&&(z.toggleClass("hidden",!1).trigger("dynFormVisible").addClass("dyn-form-ready").trigger("dynFormReady"),C())}}else z.addClass("dyn-form-ready").trigger("dynFormReady"),z.hasClass("hidden")||z.trigger("dynFormVisible"),C()}));(function(){I.on("blur",
function(){var a=h(this).val(),b=h(this).attr("name"),c=h(this).parent(".form-group"),d=[];if(a.length&&!c.hasClass("has-error has-danger"))return ca.isAkanaEndpoint&&d.push(n),common.AsyncService.ajaxPromise({method:ca.httpMethod,headers:d,withCredentials:ca.xhr,url:P+ia,data:JSON.stringify({fieldname:b,fieldvalue:a})})})})();var ja=function(a){h.when(w()).done(function(){var b=z.closest(".tab-container"),d=a?{aftersubmit:"redirect",redirecturl:a}:h.extend({},{aftersubmit:z.data("aftersubmit"),nextformid:z.data("nextformid"),
nexttabid:z.data("nexttabid"),redirecturl:z.data("redirecturl")});if(!a&&"redirect"===d.aftersubmit&&v){var e=window.VMACE.formsData,g=!1,f=null;v.forEach(function(a){g||e.forEach(function(b){!g&&b.formID===a.formId&&b.formData.hasOwnProperty(a.fieldName)&&b.formData[a.fieldName]===a.fieldValue&&(g=!0,f=a.url)})});g&&(d.redirecturl=f)}c.afterSubmitAction(z,d,L,b)})},ea=function(a,b,c){var d={},e={};e[a]=b;return"CreateCampaignRecord"===c?(d.CreateCampaignRecordRequest={},b=g.indexOf(a),-1<b?(0===
b&&(e.isMobileCampaign="true"===e.isMobileCampaign),d.CreateCampaignRecordRequest=e):-1<k.indexOf(a)?d.CreateCampaignRecordRequest.paymentSpecification=e:-1<q.indexOf(a)?d.CreateCampaignRecordRequest.email=e:-1<M.indexOf(a)?d.CreateCampaignRecordRequest.additionalCampaignData=e:d.CreateCampaignRecordRequest.campaignData=e,d):"SendMobileUnlockCode"===c?(d.SendMobileUnlockCodeRequest={},-1<q.indexOf(a)?d.SendMobileUnlockCodeRequest.email=e:d.SendMobileUnlockCodeRequest=e,d):e};window.handleCaptcha2Valid=
function(a){T=a;r()};window.handleCaptcha2Fail=function(){c.showAceMessageBanner(J,Q.recaptchaMsg,z)};window.handleCaptcha2Expired=function(){c.showAceMessageBanner(J,Q.recaptchaMsg,z)};(function(){0!==z.find(".validate-pattern-textarea").length&&z.validator({custom:{pattern:function(a){var b=a.data("pattern");return a.val().match(b)}}})})();(function(){var a=z.find(".skip-submit-cta");0!==a.length&&a.each(function(a,b){h(b).on("click",function(a){a.isDefaultPrevented()||(a.preventDefault(),D(h(this).attr("href")))})})})();
h.fn.validator.Constructor.INPUT_SELECTOR=':input:not([type\x3d"hidden"], [type\x3d"submit"], [type\x3d"reset"], button, .ignore, .wrapper-ignore, .quickstart-ignore)';z.validator({feedback:{success:"fa-check",error:"fa-exclamation-triangle"},custom:{datevalid:function(a){var b=a.val(),c=2==(b.match(/[-\/]/g)||[]).length,d=L?"YYYY-MM-DD":c?"DD/MM/YYYY":"MM/YYYY";c=L?"(([0-9]){4}-)((0?[1-9]|1[012])-)(0[1-9]|[12][0-9]|3[01])":"^((0?[1-9]|[12][0-9]|3[01])/)?((0?[1-9]|1[012])/){1}([0-9]){4}$";var e=a.data("fromyear"),
g=a.data("toyear");d=moment(b,d);if(b){if(!b.match(c)||!d.isValid())return"Please enter a valid date!";if(0===e&&!d.isAfter(moment(),"day"))return"Please pick a date in the future!";if(0===g&&d.isAfter(moment(),"day"))return"Please pick a date in the past (or today)!";if(b=a.data("year-restriction-direction")){d=a.data("year-restriction");g=a.val().split(/[-/]+/);c=g.length;e=new Date;g=1E4*(L?g[0]:g[c-1])+100*(L?g[1]:g[c-2])+1*(3===c?L?g[2]:g[0]:0);d=e.getFullYear()+d;var f=1+e.getMonth();c=3===
c?e.getDate():0;if(0>(g-(1E4*d+100*f+1*c))*b)return a.data("datevalid-error")}}},maxlength:function(a){var b=a.data("maxlength");return a.val()?a.val().length>b:!1}}}).on("submit",function(a){a.isDefaultPrevented()||(a.preventDefault(),D())})}var d={},b=common.Utils,c=common.dynFormUtils,g="isMobileCampaign campaignID campaignName campaignType signedURL urlUID".split(" "),k=["directDebitDetails","directDebitSingleSignatory"],q=["recipientEmailAddress","kanaTemplateID","subject"],l=["appointment_date",
"appointment_time_slot","first_name","last_name"],m=["requestID","serviceCode","CAMPAIGN_CODE"],n={key:"Authorization",value:"Atmosphere atmosphere_app_id\x3dAEM_UK"};d.load=function(a){a.each(e)};f.register({name:"form-builder",api:d,selector:".form-builder"})})(VMJS,window.VMCSJT,VMJSjQuery);
(function(f,a){function h(b,c){b=a(c);e(b)}function e(a){for(var b=a.find(".message-template").html(),e=/(?:{{)(.+?)(?:}})/gm,g,f=[];g=e.exec(b);)f.push(g[1]);f.length&&c.waitForGlobal("VMACE","formsData",function(){if(window.VMACE.formsData.length){var c={};f.forEach(function(a){var b=a.split("__");if(3===b.length&&0===b[0].length&&0<b[1].length&&0<b[2].length){c[a]=d(window.VMACE.formsData,b[2],b[1]);if(0<c[a].length)return;c[a]=d(window.VMACE.formsData,b[2]);if(0<c[a].length)return}c[a]=d(window.VMACE.formsData,
a)});var e=Handlebars.compile(b)(c);a.find(".message-container").html(e)}})}function d(a,b,c){for(var d=0;d<a.length;d++)if((!c||a[d].formID===c)&&"undefined"!==typeof a[d].formData[b])return a[d].formData[b];return""}var b={},c=common.Utils;b.load=function(a){a.each(h)};f.register({name:"richtext-with-form-values",api:b,selector:".richtext-with-form-values"})})(VMJS,VMJSjQuery);
(function(f,a){function h(d,b){var c=a(b);c.closest("form").on("dynFormVisible",function(){e(c)})}function e(a){for(var b=a.find(".message-template").html(),c=/(?:{{)(.+?)(?:}})/gm,d,e=[];d=c.exec(b);)e.push(d[1]);if(e.length){var f=JSON.parse(window.sessionStorage.getItem("journeyMisc"));if(f&&f.selectedStore){var h={};e.forEach(function(a){var b=f.selectedStore;h[a]=b&&"undefined"!==typeof b[a]?b[a]:""});b=Handlebars.compile(b)(h);a.find(".message-container").html(b)}}else a.find(".message-container").html(b)}
f.register({name:"richtext-with-cc-address",api:{load:function(a){a.each(h)}},selector:".richtext-with-cc-address"})})(VMJS,VMJSjQuery);
(function(f,a){function h(e,d){var b=a(d);b.select2({placeholder:b.data("placeholder"),theme:"ace form-control",minimumResultsForSearch:Infinity,dropdownParent:b.closest(".form-group"),width:"style"}).siblings(".select2").find(".select2-selection").on("focusout",function(){b.trigger("focusout")}).removeAttr("aria-haspopup aria-labelledby").attr("aria-label",b.data("label")+". This element is "+(b.prop("required")?"mandatory":"optional")+".")}f.register({name:"ace-dropdown",api:{load:function(a){a.each(h)}},
selector:".ace-dropdown"})})(VMJS,VMJSjQuery);
(function(f,a){function h(b,c){b=a(c);c=b.find("input");var g=b.closest(".dyn-form");e(c,!0);c.on("change",function(){e(this)});b.hasClass("question-reset")&&d(b,g)}function e(b,c){b=a(b);c||b.closest(".dyn-form-radio").find(".radio").removeClass("selected");b.closest(".radio").toggleClass("selected",b.is(":checked"))}function d(a,c){var d=a.closest(".radio-button").nextAll(".radio-button, .show-hide-wrapper");a.find("input").on("change",function(){b(d,c)})}function b(b,d){b.each(function(){var b=
a(this),e;if(b.hasClass("show-hide-wrapper"))if(0<b.find("input[type\x3dtext]").length||0<b.find("input[type\x3dcheckbox]").length){b=b.children(".sh-wrapper-component");var f=b.find("input");b.addClass("hidden");f.addClass("wrapper-ignore");c(b,f,d)}else{b=b.children(".sh-wrapper-component");f=b.find('div[class^\x3d"sh-"]');var h=e=f.find("input");b.addClass("hidden");h.addClass("wrapper-ignore");g(f,e,d)}else f=b.find('div[class^\x3d"sh-"]'),e=f.find("input"),g(f,e,d)})}function c(b,c,d){b.addClass("hidden");
c.each(function(){a(this).hasClass("ace-form-field")&&a(this).addClass("wrapper-ignore").val("");a(this).hasClass("checkbox")&&a(this).addClass("wrapper-ignore").prop("checked",!1)});c.closest(".form-group").removeData("oldValue");d.validator("update")}function g(a,b,c){a.addClass("hidden");b.addClass("ignore").prop("checked",!1);b.closest(".form-group").removeData("oldValue");c.validator("update")}f.register({name:"dyn-form-radio",api:{load:function(a){a.each(h)}},selector:".dyn-form-radio"})})(VMJS,
VMJSjQuery);
(function(f,a){function h(b,f){b=a(f);var h=b.closest(".dyn-form");b.hasClass("sh-wrapper-component")?e(b,h):a(f).change(function(){var b=k("hides",a(this)),e=k("shows",a(this)),f=d(this),l=f[0];f=f[1];c(h,b,t,!0,l);c(h,e,B,!1,l);f&&f!==l&&(g(h,f,!0),g(h,f,!1));b=a(this);b.hasClass("radio-button")?b.closest(".form-group").data("oldValue",l):b.data("oldValue",l)})}function e(a,b){a.hasClass("hidden")&&m(b,!0,a,!0);if(a.closest(".snippet-tabs-wrapper").length){var c=a.data("show-wrapper-if"),d=a.data("show-wrapper-if-all-true");
if(c)b.on("dynFormVisible",function(){p.checkSkipElementCriteria(c,d).then(function(c){m(b,!c,a,!0)})})}}function d(b){if(a(b).hasClass("checkbox")){var c=b.name;b=a(b).is(":checked")?null:b.name}else a(b).hasClass("radio-button")?(c=b.value,b=a(b).closest(".form-group").data("oldValue")):(c=b.value,b=a(b).data("oldValue"));return[c,b]}function b(a){a=a.replace(/ /g,"-");a=a.replace(/\./g,"-dot");a=a.replace(/!/g,"-exclam");a=a.replace(/@/g,"-atsign");a=a.replace(/\*/g,"-star");a=a.replace(/\$/g,
"-dollar");a=a.replace(/\?/g,"-question");a=a.replace(/&/g,"-and");a=a.replace(/%/g,"-percent");a=a.replace(/'/g,"-single-quote");return a=a.replace(/\//g,"-slash")}function c(e,g,f,h,n){var p=0;a.each(g,function(g,t){g=e.find('option[value\x3d"'+t+'"]');var r=f[t]?f[t].indexOf(n):-1,u=e.find("div.sh-"+b(t)),y=e.find("div.sh-"+b(t)).children("select");g.length?(q(g,h,t),l(g,h,p),p++):m(e,h,t);f[t]=f[t]||[];n&&0>r&&f[t].push(n);if(y.length){var A=k("shows",a(y));var w=d(y[0]);var x=w[0];c(e,A,B,!1,
x)}else u.children(".dyn-form-radio").length&&u.find("input:checked").length?(t=u.find("input:checked"),A=k("shows",t),w=d(t[0]),x=w[0],c(e,A,B,!1,x)):u.hasClass("dyn-form-checkboxes")&&u.find("input:checked").length&&u.find("input:checked").each(function(b,g){A=k("shows",a(g));w=d(g);x=w[0];c(e,A,B,!1,x)})})}function g(c,d,e){var f=e?t:B;a.each(f,function(a,h){var k=h.indexOf(d);if(-1<k&&(h.splice(k,1),f[a]=h,!h.length)){h=c.find('option[value\x3d"'+a+'"]');k=c.find("div.sh-"+b(a));var l=k.children("select");
h.length?(q(h,!e,a),h.parents("select").trigger("change")):(m(c,!e,a),l.length&&l.val()?g(c,l.val(),e):k.children(".dyn-form-radio").length&&k.find("input:checked").length?(h=k.find("input:checked").val(),g(c,h,e)):k.hasClass("dyn-form-checkboxes")&&k.find("input:checked").length&&k.find("input:checked").each(function(a,b){g(c,b.name,e)}));f[a]=[]}})}function k(a,b){if(b.hasClass("radio-button")){var c=b.data("hides")?b.data("hides").split(","):[];var d=b.data("shows")?b.data("shows").split(","):
[]}else b.hasClass("checkbox")?b.is(":checked")?(c=b.data("hides")?b.data("hides").split(","):[],d=b.data("shows")?b.data("shows").split(","):[]):(c=b.data("shows")?b.data("shows").split(","):[],d=[]):b.hasClass("dropdown")&&(b=b.find(":selected"),c=b.data("hides")?b.data("hides").split(","):[],d=b.data("shows")?b.data("shows").split(","):[]);return"hides"===a?c:d}function q(a,b,c){var d=a.parent("select");b&&d.val()===c&&d.val(null).trigger("change");a.prop("disabled",b?"disabled":!1)}function l(a,
b,c){c=a.parent("select").find("option")[c];b||a.insertAfter(c)}function m(c,d,e,g){var f="string"===typeof e?c.find("div.sh-"+b(e)):e;g=(e="undefined"===typeof g?f.hasClass("sh-wrapper-component"):g)?"wrapper-ignore":"ignore";var h=f.find(':input:not([data-validate\x3d"false"])');e&&(h=h.filter(function(){return a(this).closest(".sh-wrapper-component").is(f)}));f.toggleClass("hidden",d);h.toggleClass(g,d);c.validator("update")}var n={},p=common.dynFormUtils,t={},B={};n.load=function(a){a.each(h)};
f.register({name:"sh-field",api:n,selector:".sh-field, .sh-wrapper-component"})})(VMJS,VMJSjQuery);
(function(f,a){function h(e,d){var b=a(d);if(b.attr("maxlength"))b.on("input",function(){var a=b.siblings(".ace-form-info"),d=b.attr("maxlength")-b.val().length;a.find(".ace-form-marker-count-visible").text(d+" characters");50===d&&a.find(".ace-form-marker-count-invisible-accessible").text(d+" characters remaining.");0===d&&a.find(".ace-form-marker-count-invisible-accessible").text("This element is full.")})}f.register({name:"dyn-form-textarea",api:{load:function(a){a.each(h)}},selector:".dyn-form-textarea"})})(VMJS,
VMJSjQuery);
(function(f,a){function h(f,h){var k=a(h);k.hasClass("dyn-form-timepicker")&&e(k);k.hasClass("dyn-form-datepicker")&&d(k);k.hasClass("dyn-form-password")&&b(k);k.hasClass("dyn-form-phone-number")&&c(k);k.hasClass("dyn-form-sortcode")&&g(k);if(k.data("match"))k.on("paste",function(a){a.preventDefault()});k.on("keypress",function(a){13==a.which&&k.closest("form").find("button[type\x3dsubmit]").hasClass("disabled")&&a.preventDefault()})}function e(b){b.on("input blur",function(){var b=a(this).siblings("input.ace-field-time"),c=
b.siblings("input.ace-field-hours").val(),d=b.siblings("input.ace-field-mins").val();c=1===c.length?"0"+c:c;d=1===d.length?"0"+d:d;c=c+":"+d+":00";b.val("00"===c.replace(":","")?"":c).trigger("blur")})}function d(b){b.on("input change blur",function(){var b=a(this).closest("div.ace-form-date-field"),c=b.find("input.ace-field-date"),d=b.find("input.ace-field-day, select.ace-field-day"),e=b.find("input.ace-field-month, select.ace-field-month").val(),g=b.find("input.ace-field-year, select.ace-field-year").val(),
f=b.closest(".csjt-checkout-template").length;b=d.length?1===d.val().length?"0"+d.val():d.val():"";e=1===e.length?"0"+e:e;d=f?g+"-"+e+"-"+(d.length?b:"01"):(d.length?b+"/":"")+e+"/"+g;c.val(""===d.replace(/[-\/]/g,"")?"":d).trigger("blur")})}function b(a){var b=a.siblings(".dyn-form-password-switch");b.on("click",function(){var c="password"===a.prop("type");b.toggleClass("fa-eye",!c).toggleClass("fa-eye-slash",c);a.prop("type",c?"text":"password")})}function c(b){b.on("input",function(){a(this).siblings(".dyn-form-phone-number-hidden").val(a(this).val().replace(/\s/g,
""))})}function g(b){b.on("input",function(){var b=a(this),c=b.val(),d=b.siblings("input.dyn-form-sortcode-field"),e=[d.siblings("input.dyn-form-sortcode-1"),d.siblings("input.dyn-form-sortcode-2"),d.siblings("input.dyn-form-sortcode-3")];b=b.attr("class").match(/dyn-form-sortcode-(\d+)/)[1]-1;2>b&&2===c.length&&e[b+1].trigger("focus");d.val(""+e[0].val()+e[1].val()+e[2].val()).trigger("blur")})}f.register({name:"dyn-form-input",api:{load:function(a){a.each(h)}},selector:".dyn-form-input"})})(VMJS,
VMJSjQuery);
(function(f,a){function h(b,c){b=a(c);c=b.find('[data-toggle\x3d"popover"]');c.length&&c.popover({html:!0,trigger:"focus",placement:"auto top",container:c.closest(".ace-form"),viewport:c.closest(".form-builder")});e(b);d(b)}function e(b){b=b.find(".ace-placeholder");if(b.length)b.toggleClass("has-value",""!==b.val()).on("input change",function(){a(this).toggleClass("has-value",""!==a(this).val())})}function d(a){var b=a.find("input.dyn-form-input"),d=b.data("maxchar");if(d)b.on("keydown paste",function(a){if("keydown"===
a.type){var c=a.which;if(b.val().length>=d)return 8===c||9===c||33<=c&&46>=c||a.ctrlKey||a.metaKey}"paste"===a.type&&setTimeout(function(){var a=b.val();if(a.length>=d)return b.val(a.substr(0,d)).trigger("input"),!0},0)})}f.register({name:"dyn-form-field",api:{load:function(a){a.each(h)}},selector:".dyn-form-field"})})(VMJS,VMJSjQuery);
(function(f,a,h){function e(a,e){a=h(e).addClass("sticky-nav sticky-ie");a.closest(".snippet-tabs-wrapper").length?(e=a.closest(".dyn-form"),e.data("csjtSticky",e.data("csjtSticky")?e.data("csjtSticky").add(a):a),d(a,e),b(a,e)):a.addClass("disabled")}function d(b,d){b=b.find(".csjt-form-previous-link");var c=d.closest(".tab-container"),e=c.prop("id").substr(10),f=d.prop("id");b.on("click",function(){var b={tabId:null,formId:null};var d=a.journey.map[e].forms.indexOf(f);if(d=a.journey.map[e].forms[d-
1])b.tabId=e,b.formId=d;else{d=a.journey.map.tabs.indexOf(e);var g=a.journey.map.tabs[d-1];g?(d=a.journey.map[g].forms.slice(-1)[0])?(b.tabId=g,b.formId=d):b=!1:b=!1}b&&(a.journey.utils.trimMap(b.tabId,b.formId),a.journey.utils.jumpToTarget(b.tabId,b.formId,c))})}function b(a,b){b.on("dynFormVisible",function(){h(window).on("scroll.csjtPrevious",function(){a.toggleClass("sticky-nav-stuck",146<window.scrollY)})}).on("dynFormHidden",function(){h(window).off("scroll.csjtPrevious");a.removeClass("sticky-nav-stuck")})}
f.register({name:"previous",api:{load:function(a){a.each(e)}},selector:".previous"})})(VMJS,window.VMCSJT,VMJSjQuery);
(function(f,a){function h(c,d){c=a(d);var f=c.find(".ace-form-previous-link"),g=c.closest(".dyn-form");b.waitForGlobal("VMACE","formsData",function(){e(f,g)})}function e(b,d){b.on("click",function(){if(window.VMACE.formsData.length){var b=a("body").find(".dyn-form"),e=b.index(d);if(0===e){if(b=c.getFormDataIndexById(d.prop("id"),window.VMACE.formsData),b=window.VMACE.formsData[(-1===b?window.VMACE.formsData.length:b)-1])window.location.href=b.formURL}else d.addClass("hidden"),b.eq(e-1).removeClass("hidden").trigger("dynFormVisible")}})}
var d={},b=common.Utils,c=common.dynFormUtils;d.load=function(a){a.each(h)};f.register({name:"ace-form-previous",api:d,selector:".ace-form-previous"})})(VMJS,VMJSjQuery);
(function(f,a,h){function e(a,e){var f=h(e);if(f.closest(".snippet-tabs-wrapper").length){a=f.closest(".dyn-form");var g=f.find(".dyn-form-show-edit-container");b(f,g);c(f);if(a.hasClass("hidden"))a.on("dynFormVisible",function(){d(f,g)});else d(f,g)}else f.addClass("disabled")}function d(b,c){var d=b.closest(".tab-container").prop("id").substr(10),e=b.closest(".dyn-form").prop("id");b=h("#dyn-form-show-edit-question-template").html();var f=[];a.journey.map.tabs.forEach(function(b,c){c<=a.journey.map.tabs.indexOf(d)&&
a.journey.map[b].forms.forEach(function(c,g){d!==b?f.push({tabId:b,formId:c,title:a.journey.map[b].titles[g]}):g<a.journey.map[b].forms.indexOf(e)&&f.push({tabId:b,formId:c,title:a.journey.map[b].titles[g]})})});b=Handlebars.compile(b)({configArrayQuestions:f});c.html(b)}function b(b,c){var d=b.closest(".dyn-form").closest(".tab-container");c.on("click",".dyn-form-show-edit-item-link",function(){var b=h(this).data("tab"),c=h(this).data("form");a.journey.utils.trimMap(b,c);a.journey.utils.jumpToTarget(b,
c,d)})}function c(b){b.find(".dyn-form-show-edit-toggle").on("click",function(){a.journey.flags.showEditOpen=!a.journey.flags.showEditOpen;a.journey.utils.updateStoredJourney("flags");h(this).parent().toggleClass("open",a.journey.flags.showEditOpen)})}f.register({name:"dyn-form-show-edit-questions",api:{load:function(a){a.each(e)}},selector:".dyn-form-show-edit-questions"})})(VMJS,window.VMCSJT,VMJSjQuery);
(function(f,a){function h(a,b){var c=a.find("input[name\x3dtelephoneNumber]"),d=a.find("input[name\x3dstac]"),e=a.find("input[name\x3dpac]"),f=a.find(".sh-switchingToVm").find("input"),g=a.find(".sh-existingVirginSimAddToBundle").find("input"),h=c.siblings(".form-control-label").text().trim(),k=b.data("alt-phone-number-label").replace("\x26#39;","'"),l=c.attr("aria-label").split(h).pop();a.find("input[name\x3dexistingCustomerRadio]").on("change",function(b){var d=(b="true"===b.target.value)?f:g;a.find("input[name\x3dvirginMobileNumber]").val(null).removeClass("has-value");
c.val(null).removeClass("has-value");g.toggleClass("ignore",!b);f.toggleClass("ignore",!b);d.prop("checked",!1)});g.on("change",function(a){d.val(null).removeClass("has-value");e.val(null).removeClass("has-value");"false"===a.target.value?f.removeClass("ignore"):f.addClass("ignore").prop("checked",!1)});f.on("change",function(a){switch(a.target.value){case "No":c.val(null).removeClass("has-value");e.val(null).removeClass("has-value");d.val(null).removeClass("has-value");break;case "stac":e.val(null).removeClass("has-value");
c.attr("aria-label",k+l).siblings(".form-control-label").html(k);break;case "pac":d.val(null).removeClass("has-value"),c.attr("aria-label",h+l).siblings(".form-control-label").html(h)}})}function e(b,d,e){var f=b.closest("form.dyn-form");f.find("button[type\x3dsubmit]").off("click").on("click",function(h){h.preventDefault();var l=b.find("div.spendingCap select option:selected").val();h=b.find(".sh-switchingToVm input[type\x3dradio]:checked").val();var m=b.find(".sh-existingVirginSimAddToBundle input[type\x3dradio]:checked").val(),
n=b.find(".sh-existingCustomerRadio input[type\x3dradio]:checked").val(),p=b.find("input[name\x3dstac]").val(),q=b.find("input[name\x3dpac]").val(),D=b.find("input[name\x3dvirginMobileNumber]").val(),w=b.find("input[name\x3dtelephoneNumber]").val(),r=a.extend({},{virginMobileNumber:D?D:void 0,existingVirginSimAddToBundle:m?JSON.parse(m):void 0,telephoneNumber:w?w:void 0,pac:q?q:void 0,stac:p?p:void 0,type:q?"pac":p?"stac":"none"});l=a.extend({},{enabled:"Uncapped"===l?"disabled":"enabled",amount:"Uncapped"!==
l?parseInt(l):void 0});e.httpMethod="No"===h&&"false"===n?"DELETE":"PUT";c.callAPI(k+d.endpointUrl,d.httpMethod,l,!0,d.xhr,d.isAkanaEndpoint).then(function(a){g.hideBannerMessages();c.callAPI(k+e.endpointUrl,e.httpMethod,r,!0,e.xhr,e.isAkanaEndpoint).then(function(a){g.hideBannerMessages();f.submit()}).fail(function(a){g.handleApiErrors({apiLabel:e.apiLabel,xhr:a},b,"error",null,!0,!1)})}).fail(function(a){g.handleApiErrors({apiLabel:d.apiLabel,xhr:a},b,"error",null,!0,!1)})})}function d(b,c){b=a(c);
c=b.find(".mobile-sp-cap-wrapper");var d=c.data("spending-cap-api"),f=c.data("number-porting-api");k=sessionStorage.getItem("storeDomainServiceability");if(d||f)h(b,c),e(b,d,f)}var b={},c=common.Utils,g=common.dynFormUtils,k;b.load=function(a){a.each(d)};f.register({name:"mobile-spending-cap",api:b,selector:".mobile-spending-cap"})})(VMJS,VMJSjQuery);
(function(f,a){function h(e,d){a(d).on("change",function(){var b=a(d).find("input[type\x3dcheckbox]"),c=b.filter(":checked").length;b.attr("required")&&(0===c?b.attr("required","required"):b.trigger("focusout"))})}f.register({name:"dyn-form-checkboxes",api:{load:function(a){a.filter("[data-weak-require\x3ddata-weak-require]").each(h)}},selector:".dyn-form-checkboxes"})})(VMJS,VMJSjQuery);
(function(f,a){function h(b,c){var e=a(c),f=e.closest("form");if(f.hasClass("dyn-form-ready"))d(e,f);else f.on("dynFormReady",function(){d(e,f)})}function e(a){return a.filter(function(a){return null!==a&&""!==a}).length}function d(a,c){if(c.hasClass("dyn-form-ready-repopulated")){var b=a.find(".ace-field-date");b=(c=c.closest(".csjt-checkout-template").length)?b.val().split("-"):b.val().split("/");e(b)&&(3===b.length&&a.find(".ace-field-day").val(parseInt(b[b.length-(c?1:3)],10)).trigger("change"),
a.find(".ace-field-month").val(parseInt(b[b.length-2],10)).trigger("change"),a.find(".ace-field-year").val(b[b.length-(c?3:1)]).trigger("change"))}}f.register({name:"ace-form-date-field",api:{load:function(a){a.each(h)}},selector:".ace-form-date-field"})})(VMJS,VMJSjQuery);window.LGI=window.LGI||{};LGI.PEMobile=LGI.PEMobile||{};LGI.PEMobile.Components=LGI.PEMobile.Components||{};LGI.PEMobile.Utils=LGI.PEMobile.Utils||{};
LGI.PEMobile.Utils=function(f){var a={createNamespace:function(a){a=a.split(".");for(var e=window,d,b=a.length,c=0;c<b;c++)d=a[c],e[d]=e[d]||{},e=e[d];return e},debounce:function(a,e,d){var b;return function(){var c=this,f=arguments,h=d&&!b;clearTimeout(b);b=setTimeout(function(){b=null;d||a.apply(c,f)},e);h&&a.apply(c,f)}},throttle:function(a,e,d){var b;return function(){var c=this,f=arguments,h=d&&!b;clearTimeout(b);b=setTimeout(function(){b=null;d||a.apply(c,f)},e);h&&a.apply(c,f)}},getUrlParams:function(a){if(a)return a=
a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),a=(new RegExp("[\\?\x26]"+a+"\x3d([^\x26#]*)")).exec(location.href),null===a?void 0:decodeURIComponent(a[1]);a={};var e=location.search;if(1<e.length){for(var d=e.substr(1).split("\x26"),b=0;b<d.length;b++)e=d[b].split("\x3d"),a[decodeURIComponent(e[0])]=1<e.length?decodeURIComponent(e[1]):"";return a}},getKeyValues:function(f,e){return f.reduce(function(d,b){Object.keys(b).forEach(function(c){Array.isArray(b[c])&&(d=d.concat(a.getKeyValues(b[c],e)));
c===e&&b[c]&&(d=d.concat(b[c]))});return d},[])},insertParam:function(a,e,d){if(a&&a){var b=this.getUrlParams();b||(b={});f.isArray(a)||"object"===typeof a?b=a:b[a]=e;"replaceState"==d?history.replaceState(null,document.title,location.pathname+"?"+this.stringEncodingObject(b)):history.pushState(null,document.title,location.pathname+"?"+this.stringEncodingObject(b))}},removeParam:function(a){var e=document.location.href,d=e.split("?");if(2<=d.length){e=d.shift();d=d.join("?");a=encodeURIComponent(a)+
"\x3d";d=d.split(/[&;]/g);for(var b=d.length;0<b--;)-1!==d[b].lastIndexOf(a,0)&&d.splice(b,1);e+=d.length?"?"+d.join("\x26"):"";window.history.pushState("",document.title,e)}},stringEncodingObject:function(a,e){var d=[],b;for(b in a)if(a.hasOwnProperty(b)){var c=e?e+"["+b+"]":b,f=a[b];d.push(null!==f&&"object"===typeof f?serialize(f,c):encodeURIComponent(c)+"\x3d"+encodeURIComponent(f))}return d.join("\x26")},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},moveEventToStartOfQueue:function(a,
e,d){if(a&&(a=f._data(a).events)&&a.hasOwnProperty(e))return a[e].sort(function(a,c){return a.namespace===d?-1:1})},formatNumber:function(a){if(!a)return a;var e=a.toString();if(-1!==e.indexOf(".")){var d=e.split(".");if(d[1]&&2>d[1].length)return e+"0"}return a},limitEventsToNamespace:function(a,e,d,b,c){var g;if(a){if((a=f._data(a).events)&&a.hasOwnProperty(e)){a=a[e];e=a.length;for(var h=0;h<=e&&h!==e;h++)if(d.handleObj.guid===a[h].guid){var q=h;break}isNaN(q)||c||a[q+1].namespace!==b||(g=!0)}g||
d.stopImmediatePropagation()}}};return a}(VMJSjQuery);var Utils=LGI.PEMobile.Utils;Utils.createNamespace("LGI.PEMobile.Const");
LGI.PEMobile.Const=function(){return{CUSTOM_SORT_BREADCRUMB:"custom-sort",FILTERS_BREADCRUMB:"filters",FILTER_CATEGORIES:{BRANDS:"brands",TOP_MODELS:"topModels",COLORS:"baseColors",STORAGE:"storage",PROMOTIONS:"promotions",PRICE_RANGE:"price-range",DATA_PLAN:"data-plan",NETWORK_TYPE:"networkType"},DEVICE_TYPE:{TABLET:"tablet",DESKTOP:"desktop",MOBILE:"mobile"},CQ_ELEMENT_XTYPE:{PANEL:"panel",MULTIFIELD:"multifield",SELECTION:"selection"}}}();Utils=LGI.PEMobile.Utils;Utils.createNamespace("LGI.PEMobile.OwlCarousel");
LGI.PEMobile.OwlCarousel=function(){!function(f,a,h,e){function d(a,c){this.settings=null;this.options=f.extend({},d.Defaults,c);this.$element=f(a);this._handlers={};this._plugins={};this._supress={};this._speed=this._current=null;this._coordinates=[];this._width=this._breakpoint=null;this._items=[];this._clones=[];this._mergers=[];this._widths=[];this._invalidated={};this._pipe=[];this._drag={time:null,target:null,pointer:null,stage:{start:null,current:null},direction:null};this._states={current:{},
tags:{initializing:["busy"],animating:["busy"],dragging:["interacting"]}};f.each(["onResize","onThrottledResize"],f.proxy(function(a,b){this._handlers[b]=f.proxy(this[b],this)},this));f.each(d.Plugins,f.proxy(function(a,b){this._plugins[a.charAt(0).toLowerCase()+a.slice(1)]=new b(this)},this));f.each(d.Workers,f.proxy(function(a,b){this._pipe.push({filter:b.filter,run:f.proxy(b.run,this)})},this));this.setup();this.initialize()}d.Defaults={items:3,loop:!1,center:!1,rewind:!1,mouseDrag:!0,touchDrag:!0,
pullDrag:!0,freeDrag:!1,margin:0,stagePadding:0,merge:!1,mergeFit:!0,autoWidth:!1,startPosition:0,rtl:!1,smartSpeed:250,fluidSpeed:!1,dragEndSpeed:!1,responsive:{},responsiveRefreshRate:200,responsiveBaseElement:a,fallbackEasing:"swing",info:!1,nestedItemSelector:!1,itemElement:"div",stageElement:"div",refreshClass:"owl-refresh",loadedClass:"owl-loaded",loadingClass:"owl-loading",rtlClass:"owl-rtl",responsiveClass:"owl-responsive",dragClass:"owl-drag",itemClass:"owl-item",stageClass:"owl-stage",stageOuterClass:"owl-stage-outer",
grabClass:"owl-grab"};d.Width={Default:"default",Inner:"inner",Outer:"outer"};d.Type={Event:"event",State:"state"};d.Plugins={};d.Workers=[{filter:["width","settings"],run:function(){this._width=this.$element.width()}},{filter:["width","items","settings"],run:function(a){a.current=this._items&&this._items[this.relative(this._current)]}},{filter:["items","settings"],run:function(){this.$stage.children(".cloned").remove()}},{filter:["width","items","settings"],run:function(a){var b=this.settings.margin||
"",d=this.settings.rtl;b={width:"auto","margin-left":d?b:"","margin-right":d?"":b};this.settings.autoWidth&&this.$stage.children().css(b);a.css=b}},{filter:["width","items","settings"],run:function(a){var b=(this.width()/this.settings.items).toFixed(3)-this.settings.margin,d=this._items.length,e=!this.settings.autoWidth,f=[];for(a.items={merge:!1,width:b};d--;){var h=this._mergers[d];h=this.settings.mergeFit&&Math.min(h,this.settings.items)||h;a.items.merge=1<h||a.items.merge;f[d]=e?b*h:this._items[d].width()}this._widths=
f}},{filter:["items","settings"],run:function(){var a=[],c=this._items,d=this.settings,e=Math.max(2*d.items,4),h=2*Math.ceil(c.length/2);d=d.loop&&c.length?d.rewind?e:Math.max(e,h):0;h=e="";for(d/=2;d--;)a.push(this.normalize(a.length/2,!0)),e+=c[a[a.length-1]][0].outerHTML,a.push(this.normalize(c.length-1-(a.length-1)/2,!0)),h=c[a[a.length-1]][0].outerHTML+h;this._clones=a;f(e).addClass("cloned").appendTo(this.$stage);f(h).addClass("cloned").prependTo(this.$stage)}},{filter:["width","items","settings"],
run:function(){for(var a=this.settings.rtl?1:-1,c=this._clones.length+this._items.length,d=-1,e,f,h=[];++d<c;)e=h[d-1]||0,f=this._widths[this.relative(d)]+this.settings.margin,h.push(e+f*a);this._coordinates=h}},{filter:["width","items","settings"],run:function(){var a=this.settings.stagePadding,c=this._coordinates;this.$stage.css({width:Math.ceil(Math.abs(c[c.length-1]))+2*a,"padding-left":a||"","padding-right":a||""})}},{filter:["width","items","settings"],run:function(a){var b=this._coordinates.length,
d=!this.settings.autoWidth,e=this.$stage.children();if(d&&a.items.merge)for(;b--;)a.css.width=this._widths[this.relative(b)],e.eq(b).css(a.css);else d&&(a.css.width=a.items.width,e.css(a.css))}},{filter:["items"],run:function(){1>this._coordinates.length&&this.$stage.removeAttr("style")}},{filter:["width","items","settings"],run:function(a){a.current=a.current?this.$stage.children().index(a.current):0;a.current=Math.max(this.minimum(),Math.min(this.maximum(),a.current));this.reset(a.current)}},{filter:["position"],
run:function(){this.animate(this.coordinates(this._current))}},{filter:["width","position","items","settings"],run:function(){var a,c=this.settings.rtl?1:-1,d=2*this.settings.stagePadding,e=this.coordinates(this.current())+d,f=e+this.width()*c,h=[];var m=0;for(a=this._coordinates.length;a>m;m++){var n=this._coordinates[m-1]||0;var p=Math.abs(this._coordinates[m])+d*c;(this.op(n,"\x3c\x3d",e)&&this.op(n,"\x3e",f)||this.op(p,"\x3c",e)&&this.op(p,"\x3e",f))&&h.push(m)}this.$stage.children(".active").removeClass("active");
this.$stage.children(":eq("+h.join("), :eq(")+")").addClass("active");this.settings.center&&(this.$stage.children(".center").removeClass("center"),this.$stage.children().eq(this.current()).addClass("center"))}}];d.prototype.initialize=function(){if(this.enter("initializing"),this.trigger("initialize"),this.$element.toggleClass(this.settings.rtlClass,this.settings.rtl),this.settings.autoWidth&&!this.is("pre-loading")){var a=this.$element.find("img");var c=this.$element.children(this.settings.nestedItemSelector?
"."+this.settings.nestedItemSelector:e).width();a.length&&0>=c&&this.preloadAutoWidthImages(a)}this.$element.addClass(this.options.loadingClass);this.$stage=f("\x3c"+this.settings.stageElement+' class\x3d"'+this.settings.stageClass+'"/\x3e').wrap('\x3cdiv class\x3d"'+this.settings.stageOuterClass+'"/\x3e');this.$element.append(this.$stage.parent());this.replace(this.$element.children().not(this.$stage.parent()));this.$element.is(":visible")?this.refresh():this.invalidate("width");this.$element.removeClass(this.options.loadingClass).addClass(this.options.loadedClass);
this.registerEventHandlers();this.leave("initializing");this.trigger("initialized")};d.prototype.setup=function(){var a=this.viewport(),c=this.options.responsive,d=-1,e=null;c?(f.each(c,function(b){a>=b&&b>d&&(d=Number(b))}),e=f.extend({},this.options,c[d]),"function"==typeof e.stagePadding&&(e.stagePadding=e.stagePadding()),delete e.responsive,e.responsiveClass&&this.$element.attr("class",this.$element.attr("class").replace(new RegExp("("+this.options.responsiveClass+"-)\\S+\\s","g"),"$1"+d))):e=
f.extend({},this.options);this.trigger("change",{property:{name:"settings",value:e}});this._breakpoint=d;this.settings=e;this.invalidate("settings");this.trigger("changed",{property:{name:"settings",value:this.settings}})};d.prototype.optionsLogic=function(){this.settings.autoWidth&&(this.settings.stagePadding=!1,this.settings.merge=!1)};d.prototype.prepare=function(a){var b=this.trigger("prepare",{content:a});return b.data||(b.data=f("\x3c"+this.settings.itemElement+"/\x3e").addClass(this.options.itemClass).append(a)),
this.trigger("prepared",{content:b.data}),b.data};d.prototype.update=function(){for(var a=0,c=this._pipe.length,d=f.proxy(function(a){return this[a]},this._invalidated),e={};c>a;)(this._invalidated.all||0<f.grep(this._pipe[a].filter,d).length)&&this._pipe[a].run(e),a++;this._invalidated={};!this.is("valid")&&this.enter("valid")};d.prototype.width=function(a){switch(a||d.Width.Default){case d.Width.Inner:case d.Width.Outer:return this._width;default:return this._width-2*this.settings.stagePadding+
this.settings.margin}};d.prototype.refresh=function(){this.enter("refreshing");this.trigger("refresh");this.setup();this.optionsLogic();this.$element.addClass(this.options.refreshClass);this.update();this.$element.removeClass(this.options.refreshClass);this.leave("refreshing");this.trigger("refreshed")};d.prototype.onThrottledResize=function(){a.clearTimeout(this.resizeTimer);this.resizeTimer=a.setTimeout(this._handlers.onResize,this.settings.responsiveRefreshRate)};d.prototype.onResize=function(){return this._items.length?
this._width===this.$element.width()?!1:this.$element.is(":visible")?(this.enter("resizing"),this.trigger("resize").isDefaultPrevented()?(this.leave("resizing"),!1):(this.invalidate("width"),this.refresh(),this.leave("resizing"),void this.trigger("resized"))):!1:!1};d.prototype.registerEventHandlers=function(){f.support.transition&&this.$stage.on(f.support.transition.end+".owl.core",f.proxy(this.onTransitionEnd,this));!1!==this.settings.responsive&&this.on(a,"resize",this._handlers.onThrottledResize);
this.settings.mouseDrag&&(this.$element.addClass(this.options.dragClass),this.$stage.on("mousedown.owl.core",f.proxy(this.onDragStart,this)),this.$stage.on("dragstart.owl.core selectstart.owl.core",function(){return!1}));this.settings.touchDrag&&(this.$stage.on("touchstart.owl.core",f.proxy(this.onDragStart,this)),this.$stage.on("touchcancel.owl.core",f.proxy(this.onDragEnd,this)))};d.prototype.onDragStart=function(a){var b=null;3!==a.which&&(f.support.transform?(b=this.$stage.css("transform").replace(/.*\(|\)| /g,
"").split(","),b={x:b[16===b.length?12:4],y:b[16===b.length?13:5]}):(b=this.$stage.position(),b={x:this.settings.rtl?b.left+this.$stage.width()-this.width()+this.settings.margin:b.left,y:b.top}),this.is("animating")&&(f.support.transform?this.animate(b.x):this.$stage.stop(),this.invalidate("position")),this.$element.toggleClass(this.options.grabClass,"mousedown"===a.type),this.speed(0),this._drag.time=(new Date).getTime(),this._drag.target=f(a.target),this._drag.stage.start=b,this._drag.stage.current=
b,this._drag.pointer=this.pointer(a),f(h).on("mouseup.owl.core touchend.owl.core",f.proxy(this.onDragEnd,this)),f(h).one("mousemove.owl.core touchmove.owl.core",f.proxy(function(a){var b=this.difference(this._drag.pointer,this.pointer(a));f(h).on("mousemove.owl.core touchmove.owl.core",f.proxy(this.onDragMove,this));Math.abs(b.x)<Math.abs(b.y)&&this.is("valid")||(a.preventDefault(),this.enter("dragging"),this.trigger("drag"))},this)))};d.prototype.onDragMove=function(a){var b=null,d=null,e=null,f=
this.difference(this._drag.pointer,this.pointer(a)),h=this.difference(this._drag.stage.start,f);this.is("dragging")&&(a.preventDefault(),this.settings.loop?(b=this.coordinates(this.minimum()),d=this.coordinates(this.maximum()+1)-b,h.x=((h.x-b)%d+d)%d+b):(b=this.settings.rtl?this.coordinates(this.maximum()):this.coordinates(this.minimum()),d=this.settings.rtl?this.coordinates(this.minimum()):this.coordinates(this.maximum()),e=this.settings.pullDrag?-1*f.x/5:0,h.x=Math.max(Math.min(h.x,b+e),d+e)),this._drag.stage.current=
h,this.animate(h.x))};d.prototype.onDragEnd=function(a){a=this.difference(this._drag.pointer,this.pointer(a));var b=this._drag.stage.current,d=0<a.x^this.settings.rtl?"left":"right";f(h).off(".owl.core");this.$element.removeClass(this.options.grabClass);(0!==a.x&&this.is("dragging")||!this.is("valid"))&&(this.speed(this.settings.dragEndSpeed||this.settings.smartSpeed),this.current(this.closest(b.x,0!==a.x?d:this._drag.direction)),this.invalidate("position"),this.update(),this._drag.direction=d,(3<
Math.abs(a.x)||300<(new Date).getTime()-this._drag.time)&&this._drag.target.one("click.owl.core",function(){return!1}));this.is("dragging")&&(this.leave("dragging"),this.trigger("dragged"))};d.prototype.closest=function(a,c){var b=-1,d=this.width(),e=this.coordinates();return this.settings.freeDrag||f.each(e,f.proxy(function(f,g){return"left"===c&&a>g-30&&g+30>a?b=f:"right"===c&&a>g-d-30&&g-d+30>a?b=f+1:this.op(a,"\x3c",g)&&this.op(a,"\x3e",e[f+1]||g-d)&&(b="left"===c?f+1:f),-1===b},this)),this.settings.loop||
(this.op(a,"\x3e",e[this.minimum()])?b=a=this.minimum():this.op(a,"\x3c",e[this.maximum()])&&(b=a=this.maximum())),b};d.prototype.animate=function(a){var b=0<this.speed();this.is("animating")&&this.onTransitionEnd();b&&(this.enter("animating"),this.trigger("translate"));f.support.transform3d&&f.support.transition?this.$stage.css({transform:"translate3d("+a+"px,0px,0px)",transition:this.speed()/1E3+"s"}):b?this.$stage.animate({left:a+"px"},this.speed(),this.settings.fallbackEasing,f.proxy(this.onTransitionEnd,
this)):this.$stage.css({left:a+"px"})};d.prototype.is=function(a){return this._states.current[a]&&0<this._states.current[a]};d.prototype.current=function(a){if(a===e)return this._current;if(0===this._items.length)return e;if(a=this.normalize(a),this._current!==a){var b=this.trigger("change",{property:{name:"position",value:a}});b.data!==e&&(a=this.normalize(b.data));this._current=a;this.invalidate("position");this.trigger("changed",{property:{name:"position",value:this._current}})}return this._current};
d.prototype.invalidate=function(a){return"string"===f.type(a)&&(this._invalidated[a]=!0,this.is("valid")&&this.leave("valid")),f.map(this._invalidated,function(a,b){return b})};d.prototype.reset=function(a){a=this.normalize(a);a!==e&&(this._speed=0,this._current=a,this.suppress(["translate","translated"]),this.animate(this.coordinates(a)),this.release(["translate","translated"]))};d.prototype.normalize=function(a,c){var b=this._items.length;c=c?0:this._clones.length;return!this.isNumeric(a)||1>b?
a=e:(0>a||a>=b+c)&&(a=((a-c/2)%b+b)%b+c/2),a};d.prototype.relative=function(a){return a-=this._clones.length/2,this.normalize(a,!0)};d.prototype.maximum=function(a){var b;var d=this.settings;if(d.loop)d=this._clones.length/2+this._items.length-1;else if(d.autoWidth||d.merge){d=this._items.length;var e=this._items[--d].width();for(b=this.$element.width();d--&&(e+=this._items[d].width()+this.settings.margin,!(e>b)););d+=1}else d=d.center?this._items.length-1:this._items.length-d.items;return a&&(d-=
this._clones.length/2),Math.max(d,0)};d.prototype.minimum=function(a){return a?0:this._clones.length/2};d.prototype.items=function(a){return a===e?this._items.slice():(a=this.normalize(a,!0),this._items[a])};d.prototype.mergers=function(a){return a===e?this._mergers.slice():(a=this.normalize(a,!0),this._mergers[a])};d.prototype.clones=function(a){var b=this._clones.length/2,d=b+this._items.length;return a===e?f.map(this._clones,function(a,c){return 0===c%2?d+c/2:b-(c+1)/2}):f.map(this._clones,function(c,
e){return c===a?0===e%2?d+e/2:b-(e+1)/2:null})};d.prototype.speed=function(a){return a!==e&&(this._speed=a),this._speed};d.prototype.coordinates=function(a){var b,d=1,h=a-1;return a===e?f.map(this._coordinates,f.proxy(function(a,b){return this.coordinates(b)},this)):(this.settings.center?(this.settings.rtl&&(d=-1,h=a+1),b=this._coordinates[a],b+=(this.width()-b+(this._coordinates[h]||0))/2*d):b=this._coordinates[h]||0,b=Math.ceil(b))};d.prototype.duration=function(a,c,d){return 0===d?0:Math.min(Math.max(Math.abs(c-
a),1),6)*Math.abs(d||this.settings.smartSpeed)};d.prototype.to=function(a,c){var b=this.current(),d=null,e=a-this.relative(b),f=(0<e)-(0>e),h=this._items.length,n=this.minimum(),p=this.maximum();this.settings.loop?(!this.settings.rewind&&Math.abs(e)>h/2&&(e+=-1*f*h),a=b+e,d=((a-n)%h+h)%h+n,d!==a&&p>=d-e&&0<d-e&&(b=d-e,a=d,this.reset(b))):this.settings.rewind?(p+=1,a=(a%p+p)%p):a=Math.max(n,Math.min(p,a));this.speed(this.duration(b,a,c));this.current(a);this.$element.is(":visible")&&this.update()};
d.prototype.next=function(a){a=a||!1;this.to(this.relative(this.current())+1,a)};d.prototype.prev=function(a){a=a||!1;this.to(this.relative(this.current())-1,a)};d.prototype.onTransitionEnd=function(a){return a!==e&&(a.stopPropagation(),(a.target||a.srcElement||a.originalTarget)!==this.$stage.get(0))?!1:(this.leave("animating"),void this.trigger("translated"))};d.prototype.viewport=function(){if(this.options.responsiveBaseElement!==a)var b=f(this.options.responsiveBaseElement).width();else if(a.innerWidth)b=
a.innerWidth;else{if(!h.documentElement||!h.documentElement.clientWidth)throw"Can not detect viewport width.";b=h.documentElement.clientWidth}return b};d.prototype.replace=function(a){this.$stage.empty();this._items=[];a&&(a=a instanceof jQuery?a:f(a));this.settings.nestedItemSelector&&(a=a.find("."+this.settings.nestedItemSelector));a.filter(function(){return 1===this.nodeType}).each(f.proxy(function(a,b){b=this.prepare(b);this.$stage.append(b);this._items.push(b);this._mergers.push(1*b.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||
1)},this));this.reset(this.isNumeric(this.settings.startPosition)?this.settings.startPosition:0);this.invalidate("items")};d.prototype.add=function(a,c){var b=this.relative(this._current);c=c===e?this._items.length:this.normalize(c,!0);a=a instanceof jQuery?a:f(a);this.trigger("add",{content:a,position:c});a=this.prepare(a);0===this._items.length||c===this._items.length?(0===this._items.length&&this.$stage.append(a),0!==this._items.length&&this._items[c-1].after(a),this._items.push(a),this._mergers.push(1*
a.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)):(this._items[c].before(a),this._items.splice(c,0,a),this._mergers.splice(c,0,1*a.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1));this._items[b]&&this.reset(this._items[b].index());this.invalidate("items");this.trigger("added",{content:a,position:c})};d.prototype.remove=function(a){a=this.normalize(a,!0);a!==e&&(this.trigger("remove",{content:this._items[a],position:a}),this._items[a].remove(),this._items.splice(a,
1),this._mergers.splice(a,1),this.invalidate("items"),this.trigger("removed",{content:null,position:a}))};d.prototype.preloadAutoWidthImages=function(a){a.each(f.proxy(function(a,b){this.enter("pre-loading");b=f(b);f(new Image).one("load",f.proxy(function(a){b.attr("src",a.target.src);b.css("opacity",1);this.leave("pre-loading");this.is("pre-loading")||this.is("initializing")||this.refresh()},this)).attr("src",b.attr("src")||b.attr("data-src")||b.attr("data-src-retina"))},this))};d.prototype.destroy=
function(){this.$element.off(".owl.core");this.$stage.off(".owl.core");f(h).off(".owl.core");!1!==this.settings.responsive&&(a.clearTimeout(this.resizeTimer),this.off(a,"resize",this._handlers.onThrottledResize));for(var b in this._plugins)this._plugins[b].destroy();this.$stage.children(".cloned").remove();this.$stage.unwrap();this.$stage.children().contents().unwrap();this.$stage.children().unwrap();this.$element.removeClass(this.options.refreshClass).removeClass(this.options.loadingClass).removeClass(this.options.loadedClass).removeClass(this.options.rtlClass).removeClass(this.options.dragClass).removeClass(this.options.grabClass).attr("class",
this.$element.attr("class").replace(new RegExp(this.options.responsiveClass+"-\\S+\\s","g"),"")).removeData("owl.carousel")};d.prototype.op=function(a,c,d){var b=this.settings.rtl;switch(c){case "\x3c":return b?a>d:d>a;case "\x3e":return b?d>a:a>d;case "\x3e\x3d":return b?d>=a:a>=d;case "\x3c\x3d":return b?a>=d:d>=a}};d.prototype.on=function(a,c,d,e){a.addEventListener?a.addEventListener(c,d,e):a.attachEvent&&a.attachEvent("on"+c,d)};d.prototype.off=function(a,c,d,e){a.removeEventListener?a.removeEventListener(c,
d,e):a.detachEvent&&a.detachEvent("on"+c,d)};d.prototype.trigger=function(a,c,e,h,q){h={item:{count:this._items.length,index:this.current()}};q=f.camelCase(f.grep(["on",a,e],function(a){return a}).join("-").toLowerCase());var b=f.Event([a,"owl",e||"carousel"].join(".").toLowerCase(),f.extend({relatedTarget:this},h,c));return this._supress[a]||(f.each(this._plugins,function(a,c){c.onTrigger&&c.onTrigger(b)}),this.register({type:d.Type.Event,name:a}),this.$element.trigger(b),this.settings&&"function"==
typeof this.settings[q]&&this.settings[q].call(this,b)),b};d.prototype.enter=function(a){f.each([a].concat(this._states.tags[a]||[]),f.proxy(function(a,b){this._states.current[b]===e&&(this._states.current[b]=0);this._states.current[b]++},this))};d.prototype.leave=function(a){f.each([a].concat(this._states.tags[a]||[]),f.proxy(function(a,b){this._states.current[b]--},this))};d.prototype.register=function(a){if(a.type===d.Type.Event){if(f.event.special[a.name]||(f.event.special[a.name]={}),!f.event.special[a.name].owl){var b=
f.event.special[a.name]._default;f.event.special[a.name]._default=function(a){return!b||!b.apply||a.namespace&&-1!==a.namespace.indexOf("owl")?a.namespace&&-1<a.namespace.indexOf("owl"):b.apply(this,arguments)};f.event.special[a.name].owl=!0}}else a.type===d.Type.State&&(this._states.tags[a.name]?this._states.tags[a.name]=this._states.tags[a.name].concat(a.tags):this._states.tags[a.name]=a.tags,this._states.tags[a.name]=f.grep(this._states.tags[a.name],f.proxy(function(b,c){return f.inArray(b,this._states.tags[a.name])===
c},this)))};d.prototype.suppress=function(a){f.each(a,f.proxy(function(a,b){this._supress[b]=!0},this))};d.prototype.release=function(a){f.each(a,f.proxy(function(a,b){delete this._supress[b]},this))};d.prototype.pointer=function(b){var c={x:null,y:null};return b=b.originalEvent||b||a.event,b=b.touches&&b.touches.length?b.touches[0]:b.changedTouches&&b.changedTouches.length?b.changedTouches[0]:b,b.pageX?(c.x=b.pageX,c.y=b.pageY):(c.x=b.clientX,c.y=b.clientY),c};d.prototype.isNumeric=function(a){return!isNaN(parseFloat(a))};
d.prototype.difference=function(a,c){return{x:a.x-c.x,y:a.y-c.y}};f.fn.owlCarousel=function(a){var b=Array.prototype.slice.call(arguments,1);return this.each(function(){var c=f(this),e=c.data("owl.carousel");e||(e=new d(this,"object"==typeof a&&a),c.data("owl.carousel",e),f.each("next prev to destroy refresh replace add remove".split(" "),function(a,b){e.register({type:d.Type.Event,name:b});e.$element.on(b+".owl.carousel.core",f.proxy(function(a){a.namespace&&a.relatedTarget!==this&&(this.suppress([b]),
e[b].apply(this,[].slice.call(arguments,1)),this.release([b]))},e))}));"string"==typeof a&&"_"!==a.charAt(0)&&e[a].apply(e,b)})};f.fn.owlCarousel.Constructor=d}(window.Zepto||window.jQuery,window,document);(function(f,a,h,e){var d=function(a){this._core=a;this._visible=this._interval=null;this._handlers={"initialized.owl.carousel":f.proxy(function(a){a.namespace&&this._core.settings.autoRefresh&&this.watch()},this)};this._core.options=f.extend({},d.Defaults,this._core.options);this._core.$element.on(this._handlers)};
d.Defaults={autoRefresh:!0,autoRefreshInterval:500};d.prototype.watch=function(){this._interval||(this._visible=this._core.$element.is(":visible"),this._interval=a.setInterval(f.proxy(this.refresh,this),this._core.settings.autoRefreshInterval))};d.prototype.refresh=function(){this._core.$element.is(":visible")!==this._visible&&(this._visible=!this._visible,this._core.$element.toggleClass("owl-hidden",!this._visible),this._visible&&this._core.invalidate("width")&&this._core.refresh())};d.prototype.destroy=
function(){var b,c;a.clearInterval(this._interval);for(b in this._handlers)this._core.$element.off(b,this._handlers[b]);for(c in Object.getOwnPropertyNames(this))"function"!=typeof this[c]&&(this[c]=null)};f.fn.owlCarousel.Constructor.Plugins.AutoRefresh=d})(window.Zepto||window.jQuery,window,document);(function(f,a,h,e){var d=function(a){this._core=a;this._loaded=[];this._handlers={"initialized.owl.carousel change.owl.carousel resized.owl.carousel":f.proxy(function(a){if(a.namespace&&this._core.settings&&
this._core.settings.lazyLoad&&(a.property&&"position"==a.property.name||"initialized"==a.type)){var b=this._core.settings,c=b.center&&Math.ceil(b.items/2)||b.items;b=b.center&&-1*c||0;a=(a.property&&a.property.value!==e?a.property.value:this._core.current())+b;for(var d=this._core.clones().length,h=f.proxy(function(a,b){this.load(b)},this);b++<c;)this.load(d/2+this._core.relative(a)),d&&f.each(this._core.clones(this._core.relative(a)),h),a++}},this)};this._core.options=f.extend({},d.Defaults,this._core.options);
this._core.$element.on(this._handlers)};d.Defaults={lazyLoad:!1};d.prototype.load=function(b){var c=(b=this._core.$stage.children().eq(b))&&b.find(".owl-lazy");!c||-1<f.inArray(b.get(0),this._loaded)||(c.each(f.proxy(function(b,c){var d,e=f(c),g=1<a.devicePixelRatio&&e.attr("data-src-retina")||e.attr("data-src");this._core.trigger("load",{element:e,url:g},"lazy");e.is("img")?e.one("load.owl.lazy",f.proxy(function(){e.css("opacity",1);this._core.trigger("loaded",{element:e,url:g},"lazy")},this)).attr("src",
g):(d=new Image,d.onload=f.proxy(function(){e.css({"background-image":"url("+g+")",opacity:"1"});this._core.trigger("loaded",{element:e,url:g},"lazy")},this),d.src=g)},this)),this._loaded.push(b.get(0)))};d.prototype.destroy=function(){var a,c;for(a in this.handlers)this._core.$element.off(a,this.handlers[a]);for(c in Object.getOwnPropertyNames(this))"function"!=typeof this[c]&&(this[c]=null)};f.fn.owlCarousel.Constructor.Plugins.Lazy=d})(window.Zepto||window.jQuery,window,document);(function(f,a,
h,e){var d=function(a){this._core=a;this._handlers={"initialized.owl.carousel refreshed.owl.carousel":f.proxy(function(a){a.namespace&&this._core.settings.autoHeight&&this.update()},this),"changed.owl.carousel":f.proxy(function(a){a.namespace&&this._core.settings.autoHeight&&"position"==a.property.name&&this.update()},this),"loaded.owl.lazy":f.proxy(function(a){a.namespace&&this._core.settings.autoHeight&&a.element.closest("."+this._core.settings.itemClass).index()===this._core.current()&&this.update()},
this)};this._core.options=f.extend({},d.Defaults,this._core.options);this._core.$element.on(this._handlers)};d.Defaults={autoHeight:!1,autoHeightClass:"owl-height"};d.prototype.update=function(){var a=this._core._current,c=a+this._core.settings.items;a=this._core.$stage.children().toArray().slice(a,c);var d=[];c=0;f.each(a,function(a,b){d.push(f(b).height())});c=Math.max.apply(null,d);this._core.$stage.parent().height(c).addClass(this._core.settings.autoHeightClass)};d.prototype.destroy=function(){var a,
c;for(a in this._handlers)this._core.$element.off(a,this._handlers[a]);for(c in Object.getOwnPropertyNames(this))"function"!=typeof this[c]&&(this[c]=null)};f.fn.owlCarousel.Constructor.Plugins.AutoHeight=d})(window.Zepto||window.jQuery,window,document);(function(f,a,h,e){var d=function(a){this._core=a;this._videos={};this._playing=null;this._handlers={"initialized.owl.carousel":f.proxy(function(a){a.namespace&&this._core.register({type:"state",name:"playing",tags:["interacting"]})},this),"resize.owl.carousel":f.proxy(function(a){a.namespace&&
this._core.settings.video&&this.isInFullScreen()&&a.preventDefault()},this),"refreshed.owl.carousel":f.proxy(function(a){a.namespace&&this._core.is("resizing")&&this._core.$stage.find(".cloned .owl-video-frame").remove()},this),"changed.owl.carousel":f.proxy(function(a){a.namespace&&"position"===a.property.name&&this._playing&&this.stop()},this),"prepared.owl.carousel":f.proxy(function(a){if(a.namespace){var b=f(a.content).find(".owl-video");b.length&&(b.css("display","none"),this.fetch(b,f(a.content)))}},
this)};this._core.options=f.extend({},d.Defaults,this._core.options);this._core.$element.on(this._handlers);this._core.$element.on("click.owl.video",".owl-video-play-icon",f.proxy(function(a){this.play(a)},this))};d.Defaults={video:!1,videoHeight:!1,videoWidth:!1};d.prototype.fetch=function(a,c){a.attr("data-vimeo-id")||a.attr("data-vzaar-id");var b=a.attr("data-vimeo-id")||a.attr("data-youtube-id")||a.attr("data-vzaar-id"),d=a.attr("data-width")||this._core.settings.videoWidth,e=a.attr("data-height")||
this._core.settings.videoHeight,f=a.attr("href");if(!f)throw Error("Missing video URL.");if(b=f.match(/(http:|https:|)\/\/(player.|www.|app.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com)|vzaar\.com)\/(video\/|videos\/|embed\/|channels\/.+\/|groups\/.+\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(&\S+)?/),-1<b[3].indexOf("youtu"))var h="youtube";else if(-1<b[3].indexOf("vimeo"))h="vimeo";else{if(!(-1<b[3].indexOf("vzaar")))throw Error("Video URL not supported.");h="vzaar"}b=b[6];this._videos[f]={type:h,
id:b,width:d,height:e};c.attr("data-video",f);this.thumbnail(a,this._videos[f])};d.prototype.thumbnail=function(a,c){var b,d,e=c.width&&c.height?'style\x3d"width:'+c.width+"px;height:"+c.height+'px;"':"",h=a.find("img"),m="src",n="",p=this._core.settings,t=function(c){b=p.lazyLoad?'\x3cdiv class\x3d"owl-video-tn '+n+'" '+m+'\x3d"'+c+'"\x3e\x3c/div\x3e':'\x3cdiv class\x3d"owl-video-tn" style\x3d"opacity:1;background-image:url('+c+')"\x3e\x3c/div\x3e';a.after(b);a.after('\x3cdiv class\x3d"owl-video-play-icon"\x3e\x3c/div\x3e')};
return a.wrap('\x3cdiv class\x3d"owl-video-wrapper"'+e+"\x3e\x3c/div\x3e"),this._core.settings.lazyLoad&&(m="data-src",n="owl-lazy"),h.length?(t(h.attr(m)),h.remove(),!1):void("youtube"===c.type?(d="//img.youtube.com/vi/"+c.id+"/hqdefault.jpg",t(d)):"vimeo"===c.type?f.ajax({type:"GET",url:"//vimeo.com/api/v2/video/"+c.id+".json",jsonp:"callback",dataType:"jsonp",success:function(a){d=a[0].thumbnail_large;t(d)}}):"vzaar"===c.type&&f.ajax({type:"GET",url:"//vzaar.com/api/videos/"+c.id+".json",jsonp:"callback",
dataType:"jsonp",success:function(a){d=a.framegrab_url;t(d)}}))};d.prototype.stop=function(){this._core.trigger("stop",null,"video");this._playing.find(".owl-video-frame").remove();this._playing.removeClass("owl-video-playing");this._playing=null;this._core.leave("playing");this._core.trigger("stopped",null,"video")};d.prototype.play=function(a){var b;a=f(a.target).closest("."+this._core.settings.itemClass);var d=this._videos[a.attr("data-video")],e=d.width||"100%",h=d.height||this._core.$stage.height();
this._playing||(this._core.enter("playing"),this._core.trigger("play",null,"video"),a=this._core.items(this._core.relative(a.index())),this._core.reset(a.index()),"youtube"===d.type?b='\x3ciframe width\x3d"'+e+'" height\x3d"'+h+'" src\x3d"//www.youtube.com/embed/'+d.id+"?autoplay\x3d1\x26v\x3d"+d.id+'" frameborder\x3d"0" allowfullscreen\x3e\x3c/iframe\x3e':"vimeo"===d.type?b='\x3ciframe src\x3d"//player.vimeo.com/video/'+d.id+'?autoplay\x3d1" width\x3d"'+e+'" height\x3d"'+h+'" frameborder\x3d"0" webkitallowfullscreen mozallowfullscreen allowfullscreen\x3e\x3c/iframe\x3e':
"vzaar"===d.type&&(b='\x3ciframe frameborder\x3d"0"height\x3d"'+h+'"width\x3d"'+e+'" allowfullscreen mozallowfullscreen webkitAllowFullScreen src\x3d"//view.vzaar.com/'+d.id+'/player?autoplay\x3dtrue"\x3e\x3c/iframe\x3e'),f('\x3cdiv class\x3d"owl-video-frame"\x3e'+b+"\x3c/div\x3e").insertAfter(a.find(".owl-video")),this._playing=a.addClass("owl-video-playing"))};d.prototype.isInFullScreen=function(){var a=h.fullscreenElement||h.mozFullScreenElement||h.webkitFullscreenElement;return a&&f(a).parent().hasClass("owl-video-frame")};
d.prototype.destroy=function(){var a,c;this._core.$element.off("click.owl.video");for(a in this._handlers)this._core.$element.off(a,this._handlers[a]);for(c in Object.getOwnPropertyNames(this))"function"!=typeof this[c]&&(this[c]=null)};f.fn.owlCarousel.Constructor.Plugins.Video=d})(window.Zepto||window.jQuery,window,document);(function(f,a,h,e){var d=function(a){this.core=a;this.core.options=f.extend({},d.Defaults,this.core.options);this.swapping=!0;this.next=this.previous=e;this.handlers={"change.owl.carousel":f.proxy(function(a){a.namespace&&
"position"==a.property.name&&(this.previous=this.core.current(),this.next=a.property.value)},this),"drag.owl.carousel dragged.owl.carousel translated.owl.carousel":f.proxy(function(a){a.namespace&&(this.swapping="translated"==a.type)},this),"translate.owl.carousel":f.proxy(function(a){a.namespace&&this.swapping&&(this.core.options.animateOut||this.core.options.animateIn)&&this.swap()},this)};this.core.$element.on(this.handlers)};d.Defaults={animateOut:!1,animateIn:!1};d.prototype.swap=function(){if(1===
this.core.settings.items&&f.support.animation&&f.support.transition){this.core.speed(0);var a,c=f.proxy(this.clear,this),d=this.core.$stage.children().eq(this.previous),e=this.core.$stage.children().eq(this.next),h=this.core.settings.animateIn,l=this.core.settings.animateOut;this.core.current()!==this.previous&&(l&&(a=this.core.coordinates(this.previous)-this.core.coordinates(this.next),d.one(f.support.animation.end,c).css({left:a+"px"}).addClass("animated owl-animated-out").addClass(l)),h&&e.one(f.support.animation.end,
c).addClass("animated owl-animated-in").addClass(h))}};d.prototype.clear=function(a){f(a.target).css({left:""}).removeClass("animated owl-animated-out owl-animated-in").removeClass(this.core.settings.animateIn).removeClass(this.core.settings.animateOut);this.core.onTransitionEnd()};d.prototype.destroy=function(){var a,c;for(a in this.handlers)this.core.$element.off(a,this.handlers[a]);for(c in Object.getOwnPropertyNames(this))"function"!=typeof this[c]&&(this[c]=null)};f.fn.owlCarousel.Constructor.Plugins.Animate=
d})(window.Zepto||window.jQuery,window,document);(function(f,a,h,e){var d=function(a){this._core=a;this._timeout=null;this._paused=!1;this._handlers={"changed.owl.carousel":f.proxy(function(a){a.namespace&&"settings"===a.property.name?this._core.settings.autoplay?this.play():this.stop():a.namespace&&"position"===a.property.name&&this._core.settings.autoplay&&this._setAutoPlayInterval()},this),"initialized.owl.carousel":f.proxy(function(a){a.namespace&&this._core.settings.autoplay&&this.play()},this),
"play.owl.autoplay":f.proxy(function(a,b,d){a.namespace&&this.play(b,d)},this),"stop.owl.autoplay":f.proxy(function(a){a.namespace&&this.stop()},this),"mouseover.owl.autoplay":f.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.pause()},this),"mouseleave.owl.autoplay":f.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.play()},this),"touchstart.owl.core":f.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&
this.pause()},this),"touchend.owl.core":f.proxy(function(){this._core.settings.autoplayHoverPause&&this.play()},this)};this._core.$element.on(this._handlers);this._core.options=f.extend({},d.Defaults,this._core.options)};d.Defaults={autoplay:!1,autoplayTimeout:5E3,autoplayHoverPause:!1,autoplaySpeed:!1};d.prototype.play=function(a,c){this._paused=!1;this._core.is("rotating")||(this._core.enter("rotating"),this._setAutoPlayInterval())};d.prototype._getNextTimeout=function(b,c){return this._timeout&&
a.clearTimeout(this._timeout),a.setTimeout(f.proxy(function(){this._paused||this._core.is("busy")||this._core.is("interacting")||h.hidden||this._core.next(c||this._core.settings.autoplaySpeed)},this),b||this._core.settings.autoplayTimeout)};d.prototype._setAutoPlayInterval=function(){this._timeout=this._getNextTimeout()};d.prototype.stop=function(){this._core.is("rotating")&&(a.clearTimeout(this._timeout),this._core.leave("rotating"))};d.prototype.pause=function(){this._core.is("rotating")&&(this._paused=
!0)};d.prototype.destroy=function(){var a,c;this.stop();for(a in this._handlers)this._core.$element.off(a,this._handlers[a]);for(c in Object.getOwnPropertyNames(this))"function"!=typeof this[c]&&(this[c]=null)};f.fn.owlCarousel.Constructor.Plugins.autoplay=d})(window.Zepto||window.jQuery,window,document);(function(f,a,h,e){var d=function(a){this._core=a;this._initialized=!1;this._pages=[];this._controls={};this._templates=[];this.$element=this._core.$element;this._overrides={next:this._core.next,
prev:this._core.prev,to:this._core.to};this._handlers={"prepared.owl.carousel":f.proxy(function(a){a.namespace&&this._core.settings.dotsData&&this._templates.push('\x3cdiv class\x3d"'+this._core.settings.dotClass+'"\x3e'+f(a.content).find("[data-dot]").addBack("[data-dot]").attr("data-dot")+"\x3c/div\x3e")},this),"added.owl.carousel":f.proxy(function(a){a.namespace&&this._core.settings.dotsData&&this._templates.splice(a.position,0,this._templates.pop())},this),"remove.owl.carousel":f.proxy(function(a){a.namespace&&
this._core.settings.dotsData&&this._templates.splice(a.position,1)},this),"changed.owl.carousel":f.proxy(function(a){a.namespace&&"position"==a.property.name&&this.draw()},this),"initialized.owl.carousel":f.proxy(function(a){a.namespace&&!this._initialized&&(this._core.trigger("initialize",null,"navigation"),this.initialize(),this.update(),this.draw(),this._initialized=!0,this._core.trigger("initialized",null,"navigation"))},this),"refreshed.owl.carousel":f.proxy(function(a){a.namespace&&this._initialized&&
(this._core.trigger("refresh",null,"navigation"),this.update(),this.draw(),this._core.trigger("refreshed",null,"navigation"))},this)};this._core.options=f.extend({},d.Defaults,this._core.options);this.$element.on(this._handlers)};d.Defaults={nav:!1,navText:["prev","next"],navSpeed:!1,navElement:"div",navContainer:!1,navContainerClass:"owl-nav",navClass:["owl-prev","owl-next"],slideBy:1,dotClass:"owl-dot",dotsClass:"owl-dots",dots:!0,dotsEach:!1,dotsData:!1,dotsSpeed:!1,dotsContainer:!1};d.prototype.initialize=
function(){var a,c=this._core.settings;this._controls.$relative=(c.navContainer?f(c.navContainer):f("\x3cdiv\x3e").addClass(c.navContainerClass).appendTo(this.$element)).addClass("disabled");this._controls.$previous=f("\x3c"+c.navElement+"\x3e").addClass(c.navClass[0]).html(c.navText[0]).prependTo(this._controls.$relative).on("click",f.proxy(function(a){this.prev(c.navSpeed)},this));this._controls.$next=f("\x3c"+c.navElement+"\x3e").addClass(c.navClass[1]).html(c.navText[1]).appendTo(this._controls.$relative).on("click",
f.proxy(function(a){this.next(c.navSpeed)},this));c.dotsData||(this._templates=[f("\x3cdiv\x3e").addClass(c.dotClass).append(f("\x3cspan\x3e")).prop("outerHTML")]);this._controls.$absolute=(c.dotsContainer?f(c.dotsContainer):f("\x3cdiv\x3e").addClass(c.dotsClass).appendTo(this.$element)).addClass("disabled");this._controls.$absolute.on("click","div",f.proxy(function(a){var b=f(a.target).parent().is(this._controls.$absolute)?f(a.target).index():f(a.target).parent().index();a.preventDefault();this.to(b,
c.dotsSpeed)},this));for(a in this._overrides)this._core[a]=f.proxy(this[a],this)};d.prototype.destroy=function(){var a,c,d,e;for(a in this._handlers)this.$element.off(a,this._handlers[a]);for(c in this._controls)this._controls[c].remove();for(e in this.overides)this._core[e]=this._overrides[e];for(d in Object.getOwnPropertyNames(this))"function"!=typeof this[d]&&(this[d]=null)};d.prototype.update=function(){var a,c,d=this._core.clones().length/2,e=d+this._core.items().length,f=this._core.maximum(!0);
var h=this._core.settings;var m=h.center||h.autoWidth||h.dotsData?1:h.dotsEach||h.items;if("page"!==h.slideBy&&(h.slideBy=Math.min(h.slideBy,h.items)),h.dots||"page"==h.slideBy)for(this._pages=[],h=d,c=a=0;e>h;h++){if(a>=m||0===a){if(this._pages.push({start:Math.min(f,h-d),end:h-d+m-1}),Math.min(f,h-d)===f)break;a=0;++c}a+=this._core.mergers(this._core.relative(h))}};d.prototype.draw=function(){var a,c=this._core.settings,d=this._core.items().length<=c.items,e=this._core.relative(this._core.current()),
h=c.loop||c.rewind;this._controls.$relative.toggleClass("disabled",!c.nav||d);c.nav&&(this._controls.$previous.toggleClass("disabled",!h&&e<=this._core.minimum(!0)),this._controls.$next.toggleClass("disabled",!h&&e>=this._core.maximum(!0)));this._controls.$absolute.toggleClass("disabled",!c.dots||d);c.dots&&(a=this._pages.length-this._controls.$absolute.children().length,c.dotsData&&0!==a?this._controls.$absolute.html(this._templates.join("")):0<a?this._controls.$absolute.append(Array(a+1).join(this._templates[0])):
0>a&&this._controls.$absolute.children().slice(a).remove(),this._controls.$absolute.find(".active").removeClass("active"),this._controls.$absolute.children().eq(f.inArray(this.current(),this._pages)).addClass("active"))};d.prototype.onTrigger=function(a){var b=this._core.settings;a.page={index:f.inArray(this.current(),this._pages),count:this._pages.length,size:b&&(b.center||b.autoWidth||b.dotsData?1:b.dotsEach||b.items)}};d.prototype.current=function(){var a=this._core.relative(this._core.current());
return f.grep(this._pages,f.proxy(function(b,d){return b.start<=a&&b.end>=a},this)).pop()};d.prototype.getPosition=function(a){var b,d,e=this._core.settings;return"page"==e.slideBy?(b=f.inArray(this.current(),this._pages),d=this._pages.length,a?++b:--b,b=this._pages[(b%d+d)%d].start):(b=this._core.relative(this._core.current()),this._core.items(),a?b+=e.slideBy:b-=e.slideBy),b};d.prototype.next=function(a){f.proxy(this._overrides.to,this._core)(this.getPosition(!0),a)};d.prototype.prev=function(a){f.proxy(this._overrides.to,
this._core)(this.getPosition(!1),a)};d.prototype.to=function(a,c,d){var b;!d&&this._pages.length?(b=this._pages.length,f.proxy(this._overrides.to,this._core)(this._pages[(a%b+b)%b].start,c)):f.proxy(this._overrides.to,this._core)(a,c)};f.fn.owlCarousel.Constructor.Plugins.Navigation=d})(window.Zepto||window.jQuery,window,document);(function(f,a,h,e){var d=function(b){this._core=b;this._hashes={};this.$element=this._core.$element;this._handlers={"initialized.owl.carousel":f.proxy(function(b){b.namespace&&
"URLHash"===this._core.settings.startPosition&&f(a).trigger("hashchange.owl.navigation")},this),"prepared.owl.carousel":f.proxy(function(a){if(a.namespace){var b=f(a.content).find("[data-hash]").addBack("[data-hash]").attr("data-hash");b&&(this._hashes[b]=a.content)}},this),"changed.owl.carousel":f.proxy(function(b){if(b.namespace&&"position"===b.property.name){var c=this._core.items(this._core.relative(this._core.current()));(b=f.map(this._hashes,function(a,b){return a===c?b:null}).join())&&a.location.hash.slice(1)!==
b&&(a.location.hash=b)}},this)};this._core.options=f.extend({},d.Defaults,this._core.options);this.$element.on(this._handlers);f(a).on("hashchange.owl.navigation",f.proxy(function(b){b=a.location.hash.substring(1);var c=this._core.$stage.children();b=this._hashes[b]&&c.index(this._hashes[b]);b!==e&&b!==this._core.current()&&this._core.to(this._core.relative(b),!1,!0)},this))};d.Defaults={URLhashListener:!1};d.prototype.destroy=function(){var b,c;f(a).off("hashchange.owl.navigation");for(b in this._handlers)this._core.$element.off(b,
this._handlers[b]);for(c in Object.getOwnPropertyNames(this))"function"!=typeof this[c]&&(this[c]=null)};f.fn.owlCarousel.Constructor.Plugins.Hash=d})(window.Zepto||window.jQuery,window,document);(function(f,a,h,e){function d(a,d){var g=!1,h=a.charAt(0).toUpperCase()+a.slice(1);return f.each((a+" "+c.join(h+" ")+h).split(" "),function(a,c){return b[c]!==e?(g=d?c:!0,!1):void 0}),g}var b=f("\x3csupport\x3e").get(0).style,c=["Webkit","Moz","O","ms"];a={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",
OTransition:"oTransitionEnd",transition:"transitionend"};h={WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd",animation:"animationend"};var g={csstransforms:function(){return!!d("transform")},csstransforms3d:function(){return!!d("perspective")},csstransitions:function(){return!!d("transition")},cssanimations:function(){return!!d("animation")}};g.csstransitions()&&(f.support.transition=new String(d("transition",!0)),f.support.transition.end=a[f.support.transition]);
g.cssanimations()&&(f.support.animation=new String(d("animation",!0)),f.support.animation.end=h[f.support.animation]);g.csstransforms()&&(f.support.transform=new String(d("transform",!0)),f.support.transform3d=g.csstransforms3d())})(window.Zepto||window.jQuery,window,document)}(VMJSjQuery);Utils=LGI.PEMobile.Utils;Utils.createNamespace("LGI.PEMobile.Components.Carousel");
LGI.PEMobile.Components.Carousel=function(f){var a=Utils.getUrlParams("slide-id"),h={},e=function(d,b){function c(a,b){a=f("#"+a+" .owl-dot");var c=a.filter(function(){return f(this).hasClass("active")});a.css({"border-color":b,"background-color":"transparent"});c.css("background-color",b)}var e=d.find(".owl-carousel-container"),h=e.find(".carouselItems"),q=e.data("speed-time");b=d=!1;var l=5E3,m=0;f(".owl-carousel-container").find(".carousel-item-wrapper-outer").each(function(b){f(this).data("url-param")===
a&&(m=b)});e.is(".auto-scroll")&&(b=d=!0,l=1E3*q);h.addClass("owl-carousel");var n=h.parent().attr("id");e="#"+n+" .nav-cont";q=f(e);var p=q.data("custom-color");q.css("color",p);h.owlCarousel({stagePadding:0,items:1,margin:0,loop:!1,rewind:d,autoplay:b,autoplayTimeout:l,singleItem:!0,nav:!0,startPosition:m,callbacks:!0,navText:["\x3ci class\x3d'fa fa-chevron-left'\x3e\x3c/i\x3e","\x3ci class\x3d'fa fa-chevron-right'\x3e\x3c/i\x3e"],dotsContainer:"#"+n+" .owl-dots",navContainer:e,onInitialized:function(a){c(n,
p);setTimeout(function(){h.data("owl.carousel").onThrottledResize()},0)},onChanged:function(b){b=b.relatedTarget.current();(b=h.find(".owl-item").eq(b).find(".carousel-item-wrapper-outer").data("url-param"))?(a=b,Utils.insertParam("slide-id",a,"replaceState")):a&&Utils.removeParam("slide-id");c(n,p)}})};h.init=function(a){a.each(function(){e(f(this))})};f(document).ready(function(){h.init(f(".carousel-mb"))});return h}(VMJSjQuery);
LGI.PEMobile.Components.Tabs=function(f){function a(a){this.root=f(a);this.navigator=this.root.find(".tabs-navigator");this.stickyElement=this.root.find("[data-is-sticky]");this.initialize();this.setNavigation();this.setPosition();this.initializeStickyTabs();this.catchUrlChange()}var h=LGI.PEMobile.Utils;h.createNamespace("LGI.PEMobile.Components.Tabs");var e=LGI.PEMobile.Components.Sticky;f.fn.tabsmb=function(){return this.each(function(d,b){f.data(b,"tabs-mobile-browse")||f.data(b,"tabs-mobile-browse",
new a(b))})};a.prototype={catchUrlChange:function(){var a=this;f(window).on("popstate.mobileBrowse",function(b){h.limitEventsToNamespace(window,"popstate",b,"mobileBrowse");a.initialize(!0)});h.moveEventToStartOfQueue(window,"popstate","mobileBrowse")},initialize:function(a){var b=this.root.find(".tab-item"),c=this.root.find(".content-item").first(),d=h.getUrlParams("tab");d?this.setActiveTab(this.root.find("#"+d)):-1===location.href.indexOf("/sim-only")&&(b.removeClass("active").first().addClass("active"),
c.addClass("active"));a||(f(window).resize(h.throttle(this.setPosition.bind(this),50)),this.setClickEvent(b),this.setVisibleSize())},setVisibleSize:function(){var a=f(".tabs-navigator li:visible").length;f(".tabs-navigator").attr("data-items-count",a)},setClickEvent:function(a){var b=this.navigator.data("type-tab"),c=this;a.off("click").on("click",function(){var a=f(this);if("sling-action"===b){a=a.get(0).id;var d=window.location.pathname.split("/").reverse();d[0]||d.splice(0,1);d[0]=-1!==d[0].indexOf("sim-only")?
"sim-only/"+a:a;window.location.href=d.reverse().join("/")}else c.setActiveTab(a),h.insertParam("tab",a.get(0).id),c.animateAfterOffset(a)})},animateAfterOffset:function(a){a&&this.navigator.animate({scrollLeft:a.get(0).offsetLeft})},setActiveTab:function(a){var b=this;if(a.length){var c=this.root.find(".content-tab-"+a.data("id"));a.addClass("active").siblings().removeClass("active")}else a=this.root.find(".tab-item").first().addClass("active"),c=this.root.find(".content-tab-"+a.data("id"));if(c.length){c.addClass("active").siblings().removeClass("active");
var d=a.get(0).getBoundingClientRect().top;c.get(0).getBoundingClientRect().top<d&&f("html, body").stop().animate({scrollTop:this.initializedSticky[0].initialPosition-f(".lgi-main-navigation-bgpanel").height()},500)}setTimeout(function(){b.animateAfterOffset(a)},0);f(".tariff-chevron i").css("visibility","hidden")},setNavigation:function(){var a=h.getUrlParams("tab");"sling-action"===this.navigator.data("type-tab")&&(a=this.navigator.data("active-tab"));(a=a?this.root.find("#"+a):null)&&this.setActiveTab(a)},
setPosition:function(){var a=this.navigator.width(),b=this.root.find(".tab-item"),c=b.find(".tab-item-text"),e=0;f.each(c,function(a,b){e+=f(b).outerWidth()+15});b.removeClass("scroller").parent().removeClass("scroll-wrapper");c="items-count-"+this.navigator.data("items-count");e>a?(b.addClass("scroller").parent().addClass("scroll-wrapper").removeClass(c),this.setClickEvent(b)):this.navigator.addClass(c)},initializeStickyTabs:function(){this.stickyElement.length&&(this.initializedSticky=e.init(this.stickyElement))}};
return{create:function(a){f(a).tabsmb()}}}(VMJSjQuery);