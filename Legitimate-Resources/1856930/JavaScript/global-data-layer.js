!function(a){"use strict";a.console=a.console||{};for(var b,c,d=a.console,e={},f=function(){},g="memory".split(","),h="assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(",");b=g.pop();)d[b]||(d[b]=e);for(;c=h.pop();)d[c]||(d[c]=f)}("undefined"==typeof window?this:window),Array.prototype.concatAll||(Array.prototype.concatAll=function(){"use strict";var a=[];return this.forEach(function(b){a.push.apply(a,b)}),a}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){"use strict";var c;if(null===this)throw new TypeError('"this" is null or not defined');var d=Object(this),e=d.length>>>0;if(0===e)return-1;var f=+b||0;if(Math.abs(f)===1/0&&(f=0),f>=e)return-1;for(c=Math.max(f>=0?f:e-Math.abs(f),0);e>c;){if(c in d&&d[c]===a)return c;c++}return-1}),Array.isArray||(Array.isArray=function(a){"use strict";return"[object Array]"===Object.prototype.toString.call(a)}),Array.prototype.forEach||(Array.prototype.forEach=function(a,b){"use strict";var c,d;if(null===this)throw new TypeError(" this is null or not defined");var e=Object(this),f=e.length>>>0;if("function"!=typeof a)throw new TypeError(a+" is not a function");for(arguments.length>1&&(c=b),d=0;f>d;){var g;d in e&&(g=e[d],a.call(c,g,d,e)),d++}}),Array.prototype.map||(Array.prototype.map=function(a,b){"use strict";var c,d,e;if(null===this)throw new TypeError(" this is null or not defined");var f=Object(this),g=f.length>>>0;if("function"!=typeof a)throw new TypeError(a+" is not a function");for(arguments.length>1&&(c=b),d=new Array(g),e=0;g>e;){var h,i;e in f&&(h=f[e],i=a.call(c,h,e,f),d[e]=i),e++}return d}),Array.prototype.reduce||(Array.prototype.reduce=function(a){"use strict";if(null===this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof a)throw new TypeError(a+" is not a function");var b,c=Object(this),d=c.length>>>0,e=0;if(2==arguments.length)b=arguments[1];else{for(;d>e&&!(e in c);)e++;if(e>=d)throw new TypeError("Reduce of empty array with no initial value");b=c[e++]}for(;d>e;e++)e in c&&(b=a(b,c[e],e,c));return b}),Array.prototype.filter||(Array.prototype.filter=function(a){"use strict";if(void 0===this||null===this)throw new TypeError;var b=Object(this),c=b.length>>>0;if("function"!=typeof a)throw new TypeError;for(var d=[],e=arguments.length>=2?arguments[1]:void 0,f=0;c>f;f++)if(f in b){var g=b[f];a.call(e,g,f,b)&&d.push(g)}return d}),!function(a){if("function"==typeof define&&define.amd)define(a);else if("object"==typeof exports)module.exports=a();else{var b=window.Cookies,c=window.Cookies=a();c.noConflict=function(){return window.Cookies=b,c}}}(function(){function a(){for(var a=0,b={};a<arguments.length;a++){var c=arguments[a];for(var d in c)b[d]=c[d]}return b}function b(c){function d(b,e,f){var g;if(arguments.length>1){if(f=a({path:"/"},d.defaults,f),"number"==typeof f.expires){var h=new Date;h.setMilliseconds(h.getMilliseconds()+864e5*f.expires),f.expires=h}try{g=JSON.stringify(e),/^[\{\[]/.test(g)&&(e=g)}catch(i){}return e=c.write?c.write(e,b):encodeURIComponent(String(e)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),b=encodeURIComponent(String(b)),b=b.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),b=b.replace(/[\(\)]/g,escape),document.cookie=[b,"=",e,f.expires&&"; expires="+f.expires.toUTCString(),f.path&&"; path="+f.path,f.domain&&"; domain="+f.domain,f.secure?"; secure":""].join("")}b||(g={});for(var j=document.cookie?document.cookie.split("; "):[],k=/(%[0-9A-Z]{2})+/g,l=0;l<j.length;l++){var m=j[l].split("="),n=m[0].replace(k,decodeURIComponent),o=m.slice(1).join("=");'"'===o.charAt(0)&&(o=o.slice(1,-1));try{if(o=c.read?c.read(o,n):c(o,n)||o.replace(k,decodeURIComponent),this.json)try{o=JSON.parse(o)}catch(i){}if(b===n){g=o;break}b||(g[n]=o)}catch(i){}}return g}return d.get=d.set=d,d.getJSON=function(){return d.apply({json:!0},[].slice.call(arguments))},d.defaults={},d.remove=function(b,c){d(b,"",a(c,{expires:-1}))},d.withConverter=b,d}return b(function(){})});var timeOut,timeOut2=0,decomposedDomain=[];(decomposedDomain=window.location.href.match(/https?:\/\/(.*?)\..*/))&&(timeOut="mobile"===decomposedDomain[1]?500:0),function(a,b,c){"use strict";function d(b){var c={},d={hostnames:["localvm.com","virginmedia.com","systems.private","ebillweb-kn-t1","keepup"],urlObjectSettings:{url:a.location.href,unescape:!0,convert_num:!0},platformData:c};this.options=this._extend({},d,b),this._init()}d.prototype.getBreadcrumbsPath=function(a){var b=this.breadcrumbs;if(b&&!Array.isArray(b))throw new Error("getBreadcrumbsPath fn: Breadcrumbs expected as an Array of strings.");return a&&a>0&&(b=b.slice(0,a)),b.length<2?b.toString():b.join(this.breadcrumbsDelimiter)},d.prototype.getUrl=function(a){var b=this.urlObject;if("object"!=typeof b)throw new Error("_getUrl fn: Provide urlObject.");var c=b.protocol+"//"+b.host+b.pathname;return("undefined"==typeof a||null===a||a!==!0)&&(c+=b.search),c},d.prototype.getUrlParameters=function(){return this.urlObject.search?this.urlObject.search:!1},d.prototype.getDateTime=function(){var a=new Date,b=a.getFullYear(),c=this._makeZeroPaddedTwoCharString(a.getMonth(),!0),d=this._makeZeroPaddedTwoCharString(a.getDate()),e=this._makeZeroPaddedTwoCharString(a.getHours()),f=this._makeZeroPaddedTwoCharString(a.getMinutes());return b+"/"+c+"/"+d+" "+e+":"+f},d.prototype.getProductCodes=function(){return this._getCartProducts().map(function(a){return a.sku}).join(",")},d.prototype.getExtendedProductCodes=function(){return this._getCartProducts("add-on").reduce(function(a,b){return a+="|"+b.sku},this._getBundleCode())},d.prototype.getBundleName=function(){var a=this._getCartData(),b="";if(!a.bundleName)return"";var c=this._getCartProducts("add-on").filter(function(a){return"undefined"!=typeof a.productName&&a.productName.length>0}).map(function(a){return a.productName}).join(",");return b+=a.bundleName,b+=","+c},d.prototype.getCoreProductsQty=function(){var a=this._getCartProducts("core");return a.length>0?a.length.toString():""},d.prototype.getPromoCode=function(){var a=this._getCartProducts("add-on");return a.length<1?"":a.filter(function(a){return"discount"===a.classification}).map(function(a){return a.sku}).join(",")},d.prototype.getBundleType=function(){var a=this.getCoreProductsQty(),b="";return"1"===a?b="solus":"2"===a?b="dual":"3"===a?b="triple":"4"===a&&(b="quad"),b},d.prototype.getServiceAbilityPostcode=function(){return Object(this.serviceAbilityData).hasOwnProperty("postcode")?this.serviceAbilityData.postcode:""},d.prototype.getServiceAbilityResult=function(){return Object(this.serviceAbilityData).hasOwnProperty("status")?this.serviceAbilityData.status:""},d.prototype.getPremiseUid=function(){var a=this.serviceAbilityData;if(!a.hasOwnProperty("siteId")||!a.hasOwnProperty("saId"))return"";if(a.siteId.length<1||a.siteId.length>2)throw new Error("getPremiseUid fn - siteId is too long/short.");if(7!==a.saId.length)throw new Error("getPremiseUid fn - siteId needs to be 7 characters long.");return a.siteId+a.saId},d.prototype.getProspectData=function(){var a=this.serviceAbilityData;return a.pd?a.pd:""},d.prototype.getSearchTerm=function(){var b=a.pageOptions;return b&&b.query?b.query:""},d.prototype._init=function(){if("function"!=typeof a.Cookies)throw new Error("DataLayer depends on the GitHub js-cookie/js-cookie library.");a.VM=a.VM||{},a.VM.dataLayer=a.VM.dataLayer||{},this.externalSettings=a.VM.dataLayer.externalSettings,this.urlObject=this._getUrlObject(this.options.urlObjectSettings),this.baseHostname=this._getHostnameWithoutSubdomain(),this.subdomain=this._getSubdomain(this.urlObject.hostname),this.breadcrumbsDelimiter="/",this.breadcrumbs=this._getBreadcrumbs(this.subdomain,this.urlObject.pathname),this.coreProductIdentifiers=["bb","tv","ph","mo"],this.serviceAbilityData=this._getServiceAbilityData()},d.prototype._extend=function(a){a=a||{};for(var b=1;b<arguments.length;b++)if(arguments[b])for(var c in arguments[b])arguments[b].hasOwnProperty(c)&&(a[c]=arguments[b][c]);return a},d.prototype._getUrlObject=function(d){var e,f,g,h,i,j,k,l,m={},n=b.createElement("a"),o={url:a.location.href,unescape:!0,convert_num:!0};if("object"!=typeof d)d=o;else for(f in o)o.hasOwnProperty(f)&&d[f]===c&&(d[f]=o[f]);if(n.href=d.url,l=n.search.substring(1),e=l.split("&"),e[0].length>1)for(g=0;g<e.length;g+=1)i=e[g].split("="),d.unescape?(j=decodeURI(i[0]),k=decodeURI(i[1])):(j=i[0],k=i[1]),d.convert_num&&(k.match(/^\d+$/)?k=parseInt(k,10):k.match(/^\d+\.\d+$/)&&(k=parseFloat(k))),m[j]===c?m[j]=k:"string"==typeof m[j]?m[j]=[m[j],k]:m[j].push(k),i=[];h={protocol:n.protocol,hostname:n.hostname,host:n.host,port:n.port,hash:n.hash.substr(1),pathname:n.pathname,search:n.search,parameters:m},0!==h.pathname.indexOf("/")&&h.pathname.length>1&&(h.pathname="/"+h.pathname);var p=[];return(p=h.host.match(/(.*):(.*)/))&&(h.host=p[1]),""!==h.port&&(h.port=""),h},d.prototype._pad=function(a,b,c){return"undefined"==typeof b?a:c?(a+b).slice(-a.length):(b+a).substring(0,a.length)},d.prototype._makeZeroPaddedTwoCharString=function(a,b){var c=b?1:0;return this._pad("00",String(a+c),!0)},d.prototype._getHostnameWithoutSubdomain=function(){if(!Array.isArray(this.options.hostnames))throw new Error("_getHostnameWithoutSubdomain fn: Settings hostnames input needs to be an array.");var a=this.urlObject.hostname,b=this.options.hostnames.filter(function(b){return a.indexOf(b)>=0});if(b.length<1)throw new Error("_getHostnameWithoutSubdomain fn: None of the supplied hostnames match the browser's URL.");return b[0]},d.prototype._getSubdomain=function(b){var c="",d=b.indexOf(this.baseHostname);return d>0&&(c=b.slice(0,d-1)),"www"===c&&(/^www\..*/i.test(a.location.hostname)&&/^\/$|^$/.test(a.location.pathname)||(c="")),c},d.prototype._getBreadcrumbsTransforms=function(){function a(a){return"/"!==e.urlObject.pathname?a:(e.externalSettings&&e.externalSettings.hasOwnProperty("pageName")&&(a=[e.externalSettings.pageName]),a)}function b(a){return"help"!==e.subdomain?a:(e.urlObject.parameters.hasOwnProperty("CMD")&&a.push(e.urlObject.parameters.CMD),a)}function c(a){return a.map(function(a){return a.toLowerCase().replace("_","-").replace(".html","").replace(".xhtml","").replace(".jsf","").replace(".php","").replace(/PHPSESSID=.*/,"")})}function d(a){if(!e.externalSettings||!e.externalSettings.pageNameAppendix)return a;var b=a.pop()||"";return b.length>0&&(b+=e.breadcrumbsDelimiter),b+=e.externalSettings.pageNameAppendix,a.push(b),a}var e=this;return[a,b,c,d]},d.prototype._getBreadcrumbs=function(a,b){var c=a+b,d=[];return"/"===c[0]&&(c=c.slice(1)),d=c.split("/").filter(function(a){return a.length}),this._getBreadcrumbsTransforms().forEach(function(a){d=a(d)}),d},d.prototype._getCartData=function(){var b=a.cartSummary,c={bundleName:"",products:[]};if("undefined"==typeof b)return c;if("object"!=typeof b)throw new Error("_getCartData fn: cartSummary needs to be an object.");if("undefined"==typeof b.bundleName)throw new Error("getBundleName fn: bundleName needed.");if("string"!=typeof b.bundleName)throw new Error("getBundleName fn: bundleName needs to be a string.");if("undefined"!=typeof b.cartItems&&!Array.isArray(b.cartItems))throw new Error("_getCartData fn: cartItems needs to be an array.");if(b.cartItems.length>0&&"undefined"==typeof b.cartItems[0].sku)throw new Error('_getCartData fn: cartItems element needs to have a "sku" property.');if(b.cartItems.length>0&&"string"!=typeof b.cartItems[0].sku)throw new Error('_getCartData fn: cartItems element "sku" needs to be a string.');if(b.cartItems.length>0&&"undefined"==typeof b.cartItems[0].tier)throw new Error('_getCartData fn: cartItems element needs to have a "tier" property.');if(b.cartItems.length>0&&"undefined"==typeof b.cartItems[0].serviceCategory)throw new Error('_getCartData fn: cartItems element needs to have a "serviceCategory" property.');return c.bundleName=b.bundleName,c.products=this._decorateCartProducts(b.cartItems),c},d.prototype._decorateCartProducts=function(a){return a.map(function(a){return"mo"===a.serviceCategory||a.tier.length>0&&a.serviceCategory.length>0?a._productType="core":a._productType="add-on",a})},d.prototype._getCartProducts=function(a){var b=this._getCartData().products;return a&&(b=b.filter(function(b){return b._productType===a})),b},d.prototype._getBundleCode=function(){var a=this._getCartProducts("core"),b=this._getStringInitials(this._getCartData().bundleName).toUpperCase();return a.length<1?"":this.coreProductIdentifiers.map(function(b){return a.filter(function(a){return a.serviceCategory===b})}).concatAll().reduce(function(a,b){return a+=b.serviceCategory+""+b.tier},"").concat("-",b).toUpperCase()},d.prototype._getStringInitials=function(a){return a.split(" ").map(function(a){return a.charAt(0)}).join("")},d.prototype._getServiceAbilityData=function(){var b=a.Cookies.get("cable_serviceability");return"undefined"==typeof b?{}:b.split("|").map(function(a){return a.split(":")}).reduce(function(a,b){return"siteId"===b[0]&&"0"===b[1].charAt(0)&&(b[1]=b[1].slice(1)),a[b[0]]=b[1],a},{})},d.prototype.validate=function(a){return"undefined"!=typeof a&&""!==a?a:void 0},d.prototype.add=function(a){if("undefined"!=typeof a&&""!==a){var b=0,c=0,d=[],e=0,f=0;for(c in a)if(a[c].toString().match(/\|/))for(d=a[c].split("|"),e=0;f=d[e];e+=1)b+=parseFloat(f);else b+=parseFloat(a[c]);return b}return""},d.prototype.addItemsInArray=function(a,b){if("undefined"!=typeof a&&""!==a){var c=0;return a.map(function(a){b.map(function(b){c+=parseFloat(a[b])})}),c}return""},d.prototype.multiply=function(a){if("undefined"!=typeof a&&""!==a){var b=1,c=0,d=1;for(c=0;d=a[c];c+=1)b*=parseFloat(d);return c>0?b:""}return""},d.prototype.mtpHoldings=function(a,b){var c=["mobile_"+a.handsetCode,a.tariffMinutes?a.tariffMinutes:"0 minutes",a.tariffTexts?a.tariffTexts:"0 texts",a.tariffData?a.tariffData:"0 data"].join(",");return b&&(c=c+","+[a.addOn?a.addOn:"no_addons",a.insurance?a.insurance:"no_insurance"].join(",")),c},d.prototype.storeCustomerUpgradeData=function(a,b){if("undefined"!=typeof a&&""!==a){var c=0,d=a.map(function(a){return c++,"offerid"+("00"+c).slice(-3)+"|"+a.offerCodes.replace(/,/g,"|")}).join(",");return d}return""};var e="";d.prototype.constructBundleNameFromCoreProducts=function(a,b){var c="";return c=a.map(function(a){return a.serviceCategory&&a.tier?a.name+(b||"|"):void 0}).join(""),c=b?c.slice(0,-1*b.length):c.slice(0,-1),e=c,c},d.prototype.isXsusMyOffersPage=function(a){return this.validate(a.customer.customerUpgradeData)?!0:"myOffers"===b.getElementsByTagName("BODY")[0].getAttribute("class")?!0:!1},d.prototype.getStoreBundleName=function(a){var b="";return b=this.isXsusMyOffersPage(a)?"undefined"!=typeof a.customer.customerExistingHoldings.bundleName&&""!==a.customer.customerExistingHoldings.bundleName?a.customer.customerExistingHoldings.bundleName:this.constructBundleNameFromCoreProducts(a.customer.customerExistingHoldings.items," & "):"undefined"!=typeof a.totals.bundle.name&&""!==a.totals.bundle.name?a.totals.bundle.name:this.constructBundleNameFromCoreProducts(a.basket.items," & ")},d.prototype.storeProductCodes=function(a,b,c){var d=2,e=a.map(function(a){return a.serviceCategory&&a.tier?a.serviceCategory+a.tier:void 0}).join("")+"-"+b.split(/\s|\./).map(function(a){return a.length>d?a.slice(0,d+1):a}).join("")+a.map(function(a){return a.code.match(/^A.*/)?"|"+a.code:void 0}).join("");return c&&(e+=a.map(function(a){return a.code.match(/^P.*/)?"|"+a.code:void 0}).join("")),e.toUpperCase()},d.prototype.storeProductCodesFullList=function(a){return"undefined"!=typeof a&&""!==a?a.map(function(a){return a.code?a.code:void 0}).join(","):""},d.prototype.storePromoCodes=function(a){console.log("in DataLayer.prototype.storePromoCodes");return"undefined"!=typeof a&&""!==a?a.join(","):""},d.prototype.storeProductType=function(a){var b={1:"solus",2:"dual",3:"triple",4:"quad"};return"undefined"!=typeof a&&""!==a?b[a]:""},d.prototype.myvm_create_vector1=function(a){var b=["ceg","cet","chhm","cio","cayp","cg","chc","ca","ci","cch","chs","co","cht","cht2","cnac","cnag","cnat"],c="",d=0,e="";for(d=0;e=b[d];d+=1)c+=a[e]?a[e]+",":"0,";return c.substring(0,c.length-1)},d.prototype.myvm_create_vector2=function(a){a=a.replace(/\s/g,"");var b={bb:"bb_none",tv:"tv_none",ph:"ph_none"};a.split("+").map(function(a){/bb/i.test(a)?b.bb="bb_unknowntier":/tv/i.test(a)?b.tv="tv_unknowntier":/tel|ph/i.test(a)&&(b.ph="ph_unknowntier")});var c=b.bb+","+b.tv+","+b.ph;return c},a.VM=a.VM||{},a.VM.dataLayer=a.VM.dataLayer||{},a.VM.DataLayer=d}(window,document,void 0),function(a,b,c){"use strict";function d(){a.Cookies.get("cable_serviceability");return"undefined"!=typeof h.options.platformData.mtp.mobileOrderVmCustomer&&Cookies.set("dataLayer_existingCustomerSelector",h.options.platformData.mtp.mobileOrderVmCustomer,{expires:m,path:n,domain:k}),"order-complete"===h.options.platformData.mtp.uniquePageIdentifier?a.Cookies.get("dataLayer_existingCustomerSelector"):""}function e(){var b={addToBasket:["basket","basket-empty","out-of-stock","order-already-in-progress","validation-error","your-add-ons"],checkout:["product-out-of-stock","credit-check","customer-identification","delivery-details","eligibility-check/media-customer","eligibility-check/non-media-customer","account-number","check-name-address-details","order-complete","order-parked","order-stopped","payments","confirm-order","your-details","your-details/lock-down","your-details/previous-addresses","your-details/select-an-address","your-details/security-credit-check","your-details/select-an-address"]},c="";for(var d in b)c+=b[d].map(function(a){return"^"+a+"$"}).join("|");c=c.replace(/\//g,"\\/"),console.log("mobileUniquePageIdentifiersRegexStr: "+c);var e=new RegExp(c);return e.test(h.options.platformData.mtp.uniquePageIdentifier)?a.Cookies.get("dataLayer_productType"):""}var f="2.21",g="BUILD TIME: Wed Aug 09 2017 11:11:39 GMT+0100 (GMT Daylight Time)";g=g,console.log("BUILD_TIME: "+g);var h=new VM.DataLayer;a.VM=a.VM||{},a.VM.dataLayer=a.VM.dataLayer||{},a.VM.dataLayer.data={};var i=a.VM.dataLayer.data;i.dataLayerVersion="data-layer-version:"+f;var j="DATA LAYER WARNING -> ",k=null;try{k="."+a.location.hostname.match(/.*?\.(.*)$/)[1]}catch(l){k=a.location.hostname}var m="",n="/",o="",p=function(){var c=h.getBreadcrumbsPath();c&&(o=c);var d=h.getBreadcrumbsPath(1);d&&(i.subSection1=d);var e=h.getBreadcrumbsPath(2);e&&(i.subSection2=e);var f=h.getBreadcrumbsPath(3);f&&(i.subSection3=f);var g=h.getBreadcrumbsPath(4);g&&(i.subSection4=g);var j=h.getUrl();j&&(i.urlBase=j);var k=h.getUrlParameters();k&&(i.urlParameters=k,k.match(/(PHPSESSID|JSESSIONID)=.*?&/)?(i.urlBase=i.urlBase.replace(/(PHPSESSID|JSESSIONID)=.*?&/i,""),i.urlParameters=i.urlParameters.replace(/\??(PHPSESSID|JSESSIONID)=.*?&/i,"")):k.match(/\??(PHPSESSID|JSESSIONID)=.*$/)&&(i.urlBase=i.urlBase.replace(/\??(PHPSESSID|JSESSIONID)=.*/i,""),i.urlParameters=i.urlParameters.replace(/\??(PHPSESSID|JSESSIONID)=.*/i,"")));var l=h.getUrl(!0);l&&(i.urlExcludingParameters=l);var m=h.getDateTime();m&&(i.dateTime=m);var n=h.getUrl();if(n){var p=b.getElementById("errorDetected");null===p?localStorage.setItem("urlError",n):localStorage.getItem("urlError")&&(i.errorRefPage=localStorage.getItem("urlError"))}b.getElementById("errorDetected")&&(/\/\d*\.html/.test(a.location.pathname)||(i.errorReqPage=h.getUrl()))},q=function(){var b="";try{(b=h.validate(h.options.platformData.mtp.uniquePageIdentifier))&&(i.pageName=o+"/"+h.options.platformData.mtp.uniquePageIdentifier)}catch(c){console.warn(j+c)}finally{}try{(b=h.validate(h.options.platformData.mtp.customerIDMobile))&&(i.customerIDMobile=b)}catch(c){console.warn(j+c)}finally{}try{(b=h.mtpHoldings(h.options.platformData.mtp.productCodes,!1))&&(i.productCodes=b.replace(/,/g,"|"),Cookies.set("dataLayer_productCodes",b.replace(/,/g,"|"),{expires:m,path:n,domain:k}))}catch(c){console.warn(j+c),"undefined"!=typeof a.Cookies.get("dataLayer_productCodes")&&(i.productCodes=a.Cookies.get("dataLayer_productCodes"))}finally{}try{(b=h.mtpHoldings(h.options.platformData.mtp.productCodes,!0))&&(i.productCodeFullList=b,Cookies.set("dataLayer_productCodeFullList",b,{expires:m,path:n,domain:k}))}catch(c){console.warn(j+c),"undefined"!=typeof a.Cookies.get("dataLayer_productCodeFullList")&&(i.productCodeFullList=a.Cookies.get("dataLayer_productCodeFullList"))}finally{}i.productQty=0;try{(h.validate(h.options.platformData.mtp.productCodes.tariffMinutes)||h.validate(h.options.platformData.mtp.productCodes.tariffTexts)||h.validate(h.options.platformData.mtp.productCodes.tariffData))&&(i.productQty=1,Cookies.set("dataLayer_productQty",1,{expires:m,path:n,domain:k}))}catch(c){console.warn(j+c),"undefined"!=typeof a.Cookies.get("dataLayer_productQty")&&(i.productQty=a.Cookies.get("dataLayer_productQty"))}finally{}try{(b=h.validate(h.options.platformData.mtp.productChannel))&&(i.productChannel=b,Cookies.set("dataLayer_productChannel",b,{expires:m,path:n,domain:k}))}catch(c){console.warn(j+c),i.dataLayer_productChannel=a.Cookies.get("dataLayer_productChannel")}finally{}b=h.validate(h.options.platformData.mtp.productChannel),""!==b?(i.productChannel=b,Cookies.set("dataLayer_productChannel",b,{expires:m,path:n,domain:k})):i.productChannel=a.Cookies.get("dataLayer_productChannel");try{(b=h.mtpHoldings(h.options.platformData.mtp.customerExistingHolding,!1))&&(i.customerExistingHolding=b)}catch(c){console.warn(j+c)}finally{}try{(b=h.validate(h.options.platformData.mtp.monthlyCost.totalMonthlyCost))&&(i.monthlyCost=parseFloat(b).toFixed(2))}catch(c){console.warn(j+c)}finally{}try{(b=h.validate(h.options.platformData.mtp.oneOffPayment.totalOneOffCost))&&(i.oneOffPayment=parseFloat(b).toFixed(2))}catch(c){console.warn(j+c)}finally{}try{(b=h.validate(h.options.platformData.mtp.orderId))&&(i.orderId=b)}catch(c){console.warn(j+c)}finally{}try{(b=h.validate(h.options.platformData.mtp.customerTypeMobile))&&(i.customerTypeMobile=b)}catch(c){console.warn(j+c)}finally{}try{(b=h.validate(h.options.platformData.mtp.connectionTypeMobile))&&(i.connectionTypeMobile=b)}catch(c){console.warn(j+c)}finally{}try{i.customerTypeMobile&&i.connectionTypeMobile&&(i.orderDescriptionMobile=[i.customerTypeMobile,i.connectionTypeMobile].join(":"))}catch(c){console.warn(j+c)}finally{}try{(b=h.multiply([i.monthlyCost,h.options.platformData.mtp.contractLengthMobile]))&&(i.contractValueMobile=parseFloat(b).toFixed(2))}catch(c){console.warn(j+c)}finally{}try{(b=h.validate(h.options.platformData.mtp.contractLengthMobile))&&(i.contractLengthMobile=b)}catch(c){console.warn(j+c)}finally{}try{(b=h.validate(h.options.platformData.mtp.tariffMinutes))&&(i.tariffMinutes=b)}catch(c){console.warn(j+c)}finally{}try{(b=h.validate(h.options.platformData.mtp.tariffTexts))&&(i.tariffTexts=b)}catch(c){console.warn(j+c)}finally{}try{(b=h.validate(h.options.platformData.mtp.tariffData))&&(i.tariffData=b)}catch(c){console.warn(j+c)}finally{}try{(b=h.validate(h.options.platformData.mtp.handsetCost.handsetOneOffCost))&&(i.handsetCost="one-off:"+parseFloat(b).toFixed(2))}catch(c){console.warn(j+c)}finally{}try{(b=h.validate(h.options.platformData.mtp.handsetCost.handsetMonthlyCost))&&(i.handsetCost="monthly:"+parseFloat(b).toFixed(2))}catch(c){console.warn(j+c)}finally{}try{(b=d())&&(i.mobileOrderVmCustomer=b)}catch(c){console.warn(j+c)}finally{}try{(b=e())&&(i.productType=b)}catch(c){console.warn(j+c)}finally{}try{loginJS.loggedIn===!0?i.signInStatus="signed-in":loginJS.loggedIn===!1?i.signInStatus="signed-out":i.signInStatus=""}catch(c){console.warn(j+" data.signInStatus: "+c),i.signInStatus=""}finally{}"order-complete"===h.options.platformData.mtp.uniquePageIdentifier&&(Cookies.set("dataLayer_existingCustomerSelector",1,{expires:-1,path:n,domain:k}),Cookies.set("dataLayer_productCodes",1,{expires:-1,path:n,domain:k}),Cookies.set("dataLayer_productCodeFullList",1,{expires:-1,path:n,domain:k}),Cookies.set("dataLayer_productQty",1,{expires:-1,path:n,domain:k}),Cookies.set("dataLayer_productChannel",1,{expires:-1,path:n,domain:k}),Cookies.set("dataLayer_productType",1,{expires:-1,path:n,domain:k})),("order-parked"===h.options.platformData.mtp.uniquePageIdentifier||"order-stopped"===h.options.platformData.mtp.uniquePageIdentifier)&&Cookies.set("dataLayer_productType",1,{expires:-1,path:n,domain:k})},r=function(){var a="";try{(a=h.validate(h.options.platformData.myvm.uniquePageIdentifier))&&(i.pageName=o+"/"+h.options.platformData.myvm.uniquePageIdentifier)}catch(c){console.warn(j+c)}finally{}try{(a=h.validate(h.options.platformData.myvm.customerBbStatus))&&(i.customerBbStatus=a)}catch(c){console.warn(j+c)}finally{}try{(a=h.validate(h.options.platformData.myvm.customerIDCable))&&(i.customerIDCable=a)}catch(c){console.warn(j+c)}finally{}try{/signedIn/i.test(b.getElementById("global").getAttribute("class"))?i.signInStatus="signed-in":/signedOut/i.test(b.getElementById("global").getAttribute("class"))?i.signInStatus="signed-out":i.signInStatus=""}catch(c){console.warn(j+" data.signInStatus: "+c),i.signInStatus=""}finally{}if("undefined"!=typeof h.options.platformData.myvm.vector){i.vector={},Object.keys(h.options.platformData.myvm.vector).map(function(a){i.vector[a]=h.options.platformData.myvm.vector[a].match(/(.*?)\s*?$/)[1]});try{(a=h.myvm_create_vector1(i.vector))&&(i.vector1=a)}catch(c){console.warn(j+c)}finally{}try{(a=h.myvm_create_vector2(i.vector.cph))&&(i.vector2=a)}catch(c){console.warn(j+c)}finally{}try{(a=i.vector.hs)&&(i.vector3=a)}catch(c){console.warn(j+c)}finally{}try{(a=i.vector.vs)&&(i.vector4=a)}catch(c){console.warn(j+c)}finally{}try{(a=i.vector.ctt)&&(i.vector5=a)}catch(c){console.warn(j+c)}finally{}try{(a=i.vector.cr)&&(i.vector6=a)}catch(c){console.warn(j+c)}finally{}try{(a=i.vector.cls)&&(i.vector7=a)}catch(c){console.warn(j+c)}finally{}}},s=function(){var b="";try{(b=h.validate(h.options.platformData.store.uniquePageIdentifier))&&(i.pageName=o+"/"+h.options.platformData.store.uniquePageIdentifier)}catch(c){console.warn(j+" data.pageName: "+c)}finally{}try{(b=h.getStoreBundleName(h.options.platformData.store))&&(i.bundleName=b)}catch(c){console.warn(j+" data.bundleName: "+c)}finally{}try{(b=h.validate(h.options.platformData.store.customer.productChannel))&&(i.productChannel=b)}catch(c){console.warn(j+" data.productChannel: "+c)}finally{}try{(b=h.validate(h.options.platformData.store.customer.customerTypeCable))&&(i.customerTypeCable=b)}catch(c){console.warn(j+" data.customerTypeCable: "+c)}finally{}try{(b=h.addItemsInArray(h.options.platformData.store.totals.monthly.discounts,["priceAfterDiscount"]))&&(i.firstMonthCost=b.toFixed(2))}catch(c){console.warn(j+" data.firstMonthCost: "+c)}finally{}try{(b=h.validate(h.options.platformData.store.totals.monthly.price))&&(i.monthlyCost=b)}catch(c){console.warn(j+" data.monthlyCost: "+c)}finally{}try{(b=h.validate(h.options.platformData.store.totals.oneoff.priceAfterDiscount))?i.oneOffPayment=b:(b=h.validate(h.options.platformData.store.totals.oneoff.price))&&(i.oneOffPayment=b)}catch(c){console.warn(j+" data.oneOffPayment: "+c)}finally{}try{(b=h.validate(h.options.platformData.store.installation.daysUntilInstallation))&&(i.daysUntilInstallation=b)}catch(c){console.warn(j+" data.daysUntilInstallation: "+c)}finally{}try{(b=h.validate(h.options.platformData.store.customer.orderId))&&(i.orderId=b)}catch(c){console.warn(j+" data.orderId: "+c)}finally{}try{(b=h.validate(h.options.platformData.store.customer.orderTypeCable))&&(i.orderTypeCable=b)}catch(c){console.warn(j+" data.orderTypeCable: "+c)}finally{}try{(b=h.validate(h.options.platformData.store.totals.bundle.contractLengthCable))&&(i.contractLengthCable=b)}catch(c){console.warn(j+" data.contractLengthCable: "+c)}finally{}try{(b=h.validate(h.options.platformData.store.totals.installationCost.priceAfterDiscount))&&(i.installationCost=b)}catch(c){console.warn(j+" data.installationCost: "+c)}finally{}try{(b=h.storeProductCodes(h.options.platformData.store.basket.items,i.bundleName))&&(i.productCodes=b)}catch(c){console.warn(j+" data.productCodes: "+c)}finally{}try{(b=h.storeProductCodesFullList(h.options.platformData.store.basket.items))&&(i.productCodeFullList=b)}catch(c){console.warn(j+" data.productCodeFullList: "+c)}finally{}try{(b=h.validate(h.options.platformData.store.basket.numberOfCores))&&(i.productQty=b)}catch(c){console.warn(j+" data.productQty: "+c)}finally{}try{(b=h.storePromoCodes(h.options.platformData.store.basket.promoCodes))&&(i.promoCode=b)}catch(c){console.warn(j+" data.promoCode: "+c)}finally{}try{(b=h.storeProductType(h.options.platformData.store.basket.numberOfCores))&&(i.productType=b)}catch(c){console.warn(j+" data.productType: "+c)}finally{}try{h.validate(h.options.platformData.store.customer.customerTypeCable)&&h.validate(h.options.platformData.store.customer.orderTypeCable)&&(i.orderDescriptionCable=h.options.platformData.store.customer.customerTypeCable+":"+h.options.platformData.store.customer.orderTypeCable)}catch(c){console.warn(j+" data.orderDescriptionCable: "+c)}finally{}try{(b=h.validate(h.options.platformData.store.totals.bundle.contractValueCable))&&(i.contractValueCable=b)}catch(c){console.warn(j+" data.contractValueCable: "+c)}finally{}try{(b=h.validate(h.options.platformData.store.serviceability.postcode))&&(i.serviceabilityPostcode=b)}catch(c){console.warn(j+" data.serviceabilityPostcode: "+c)}finally{}try{(b=h.validate(h.options.platformData.store.serviceability.status))&&(i.serviceabilityResult=b)}catch(c){console.warn(j+" data.serviceabilityResult: "+c)}finally{}try{h.validate(h.options.platformData.store.serviceability.siteId)&&h.validate(h.options.platformData.store.serviceability.premise)&&(i.premiseUID=h.options.platformData.store.serviceability.siteId+h.options.platformData.store.serviceability.premise)}catch(c){console.warn(j+" data.premiseUID: "+c)}finally{}try{(b=h.validate(h.options.platformData.store.serviceability.pd))&&(i.prospectData=b)}catch(c){console.warn(j+" data.prospectData: "+c)}finally{}try{(b=h.validate(h.options.platformData.store.customer.vmHouseholdId))&&(i.customerIDCable=b)}catch(c){console.warn(j+" data.customerIDCable: "+c)}finally{}try{(b=h.storeProductCodes(h.options.platformData.store.customer.customerExistingHoldings.items,i.bundleName,!0))&&(i.customerExistingHolding=b,Cookies.set("dataLayer_customerExistingHolding",b,{expires:365,path:"/",domain:k}))}catch(c){console.warn(j+" data.customerExistingHolding: "+c+" , now reading cookie if it exists"),(b=h.validate(a.Cookies.get("dataLayer_customerExistingHolding")))&&(i.customerExistingHolding=b)}finally{}try{(b=h.storeCustomerUpgradeData(h.options.platformData.store.customer.customerExistingOffers,!1))&&(i.customerUpgradeData=b)}catch(c){console.warn(j+" data.customerUpgradeData: "+c)}finally{}try{"EXISTING-OFFERS"===h.options.platformData.store.customer.store?i.signInStatus="signed-in":i.signInStatus="signed-out"}catch(c){console.warn(j+" data.signInStatus: "+c),i.signInStatus="signed-out"}finally{}},t=function(){var b="";console.log("processData_anyPlatform, data.pageName: "+i.pageName);try{(b=h.validate(a.uniquePageIdentifier))&&(i.pageName=o+"/"+a.uniquePageIdentifier)}catch(c){console.warn(j+c)}finally{}/^\//.test(i.pageName)&&(i.pageName=i.pageName.match(/^\/(.*)/)[1]),/^\/virgin-media-mobile\/pay-as-you-go-phones/i.test(a.location.pathname)?a.Cookies.set("dataLayer_productType","mobile_prepay",{expires:m,path:n,domain:k}):/^\/virgin-media-mobile\/pay-monthly-phones/i.test(a.location.pathname)&&a.Cookies.set("dataLayer_productType","mobile_pay_monthly",{expires:m,path:n,domain:k})};a.addEventListener("load",function(b){if(p(),"undefined"!=typeof mtp_platformData)try{h.options.platformData.mtp=mtp_platformData,q()}catch(c){console.log("An error has occurred running processData_mtp(): "+c)}if("undefined"!=typeof myvm_platformData)try{h.options.platformData.myvm=myvm_platformData,
r()}catch(c){console.log("An error has occurred running processData_myvm(): "+c)}if("undefined"!=typeof vmStoreJson)try{h.options.platformData.store=vmStoreJson,s()}catch(c){console.log("An error has occurred running processData_store(): "+c)}else if("store"===i.subSection1){var d="";(d=h.validate(a.Cookies.get("dataLayer_customerExistingHolding")))&&(i.customerExistingHolding=d)}if("undefined"==typeof mtp_platformData&&"undefined"==typeof myvm_platformData&&"undefined"==typeof vmStoreJson)try{t()}catch(c){console.log("An error has occurred running processData_anyPlatform(): "+c)}try{h.validate(i.pageName)||(i.pageName=o)}catch(e){console.warn(j+e)}finally{}},!1)}(window,document,void 0);var dataLayer=window.VM.dataLayer.data;