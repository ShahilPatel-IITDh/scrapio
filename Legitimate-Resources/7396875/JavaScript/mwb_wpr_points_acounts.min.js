(function(a){var b,d,c;a(document).ready(function(){var g,h,e,d,f;a('.mwb_wpr_common_table').css('display','none'),a('.mwb_wpr_custom_coupon').click(function(){var e=a(this).data('id'),b=a('#mwb_custom_point_num').val(),d='',c='',f;a("#mwb_wpr_points_notification").html(""),b=parseFloat(b),b>0&&a.isNumeric(b)?(jQuery("#mwb_wpr_loader").show(),f={action:'mwb_wpr_generate_custom_coupon',points:b,user_id:e,mwb_nonce:mwb_wpr.mwb_wpr_nonce},a.ajax({url:mwb_wpr.ajaxurl,type:"POST",data:f,dataType:'json',success:function(b){if(jQuery("#mwb_wpr_loader").hide(),b.result==!0){a('.points_log').css('display','block'),a('.points_log').html(b.html),a('#mwb_wpr_points_only').html(b.points),d=b.message,c='<b style="color:green;">'+d+'</b>',a('.mwb_current_points').html(b.points);var e=mwb_wpr.minimum_points;b.points<e&&a('#points_form').html(mwb_wpr.minimum_points_text)}else d=b.message,c='<b style="color:red;">'+d+'</b>';a("#mwb_wpr_points_notification").html(c)}})):(c='<b style="color:red;">'+mwb_wpr.message+'</b>',a("#mwb_wpr_points_notification").html(c))}),a('.mwb_wpr_generate_coupon').click(function(){var d=a(this).data('id'),b='',c='',e;a("#mwb_wpr_points_notification").html(""),jQuery("#mwb_wpr_loader").show(),e={action:'mwb_wpr_generate_original_coupon',user_id:d,mwb_nonce:mwb_wpr.mwb_wpr_nonce},a.ajax({url:mwb_wpr.ajaxurl,type:"POST",data:e,dataType:'json',success:function(d){if(jQuery("#mwb_wpr_loader").hide(),d.result==!0){a('.points_log').css('display','block'),a('.points_log').html(d.html),a('#mwb_wpr_points_only').html(d.points),b=d.message,c='<b style="color:green;">'+b+'</b>',a('.mwb_current_points').html(d.points);var e=mwb_wpr.minimum_points;d.points<e&&a('#points_form').hide()}else b=d.message,c='<b style="color:red;">'+b+'</b>';a("#mwb_wpr_points_notification").html(c)}})}),a('#mwb_wpr_upgrade_level').click(function(){var b=a('#mwb_wpr_membership_roles').val();return!!confirm(mwb_wpr.confirmation_msg)}),a('.mwb_wpr_level_benefits').click(function(){var b=a(this).data('id');jQuery('#mwb_wpr_popup_wrapper_'+b).css('display','block'),jQuery('.mwb_wpr_close').click(function(){jQuery('#mwb_wpr_popup_wrapper_'+b).css('display','none')})}),g=document.querySelectorAll('button'),h=new Clipboard(g),e='',d='',a('#mwb_wpr_share_point').click(function(){var c=a(this).data('id'),b=a('#mwb_wpr_enter_point').val(),f=a('#mwb_wpr_enter_email').val(),g;a("#mwb_wpr_shared_points_notification").html(""),b>0?(jQuery("#mwb_wpr_loader").show(),g={action:'mwb_wpr_sharing_point_to_other',shared_point:b,user_id:c,email_id:f,mwb_nonce:mwb_wpr.mwb_wpr_nonce},a.ajax({url:mwb_wpr.ajaxurl,type:"POST",data:g,dataType:'json',success:function(b){jQuery("#mwb_wpr_loader").hide(),b!==null&&b.result==!0?(a('#mwb_wpr_points_only').html(b.available_points),e=b.message,d='<b style="color:green;">'+e+'</b>'):(e=b.message,d='<b style="color:red;">'+e+'</b>'),a("#mwb_wpr_shared_points_notification").html(d)}})):(d='<b style="color:red;">'+mwb_wpr.message+'</b>',a("#mwb_wpr_shared_points_notification").html(d))}),a(document).on('change','#mwb_wpr_pro_cost_to_points',function(){if(mwb_wpr.make_readonly==1&&a('#mwb_wpr_some_custom_points').attr('readonly',!0),a(this).prop("checked")==!0){var b=a('#mwb_wpr_some_custom_points').val();a('.mwb_wpr_enter_some_points').css("display","block")}else a('.mwb_wpr_enter_some_points').css("display","none")}),a(document).on('change','#mwb_wpr_some_custom_points',function(){var b=a('#mwb_wpr_some_custom_points').val(),c,d;mwb_wpr_pro_cost_to_points!=null?(c=a('.mwb_wpr_hidden_points').val(),b>c&&(d='<b style="color:red">'+mwb_wpr.mwb_wpr_custom_notice+'</b>'),a('#mwb_wpr_pro_cost_to_points').val(b)):a('#mwb_wpr_pro_cost_to_points').val('')}),f='',a(document).on('change','.variation_id',function(g){var d,e;g.preventDefault(),d=a(this).val(),d!=null&&d>0&&f!=d?(f=d,b(a('.summary.entry-summary')),e={action:'mwb_wpr_append_variable_point',variation_id:f,mwb_nonce:mwb_wpr.mwb_wpr_nonce},a.ajax({url:mwb_wpr.ajaxurl,type:"POST",data:e,dataType:'json',success:function(b){b.result==!0&&b.variable_points>0&&(a('.mwb_wpr_variable_points').html(b.variable_points),a('.mwb_wpr_product_point').css('display','block')),b.result_price=="html"&&b.variable_price_html!=null&&a('.woocommerce-variation-price').html(b.variable_price_html),b.result_point=="product_purchased_using_point"&&b.variable_points_cal_html!=null&&(a('.mwb_wpr_variable_pro_pur_using_point').html(b.variable_points_cal_html),a('.mwb_wpr_variable_pro_pur_using_point').css('display','block')),b.purchase_pro_pnts_only=="purchased_pro_points"&&b.price_html!=null&&a('.woocommerce-variation-price').html(b.price_html+" Points")},complete:function(){c(a('.summary.entry-summary'))}})):d!=null&&d>0&&(b(a('.summary.entry-summary')),e={action:'mwb_pro_purchase_points_only',variation_id:d,mwb_nonce:mwb_wpr.mwb_wpr_nonce},a.ajax({url:mwb_wpr.ajaxurl,type:"POST",data:e,dataType:'json',success:function(b){b.purchase_pro_pnts_only=="purchased_pro_points"&&b.price_html!=null&&a('.woocommerce-variation-price').html(b.price_html+" Points")},complete:function(){c(a('.summary.entry-summary'))}}))}),a('input[id="mwb_wpr_pro_cost_to_points"]').prop("checked")==!0?a('.mwb_wpr_enter_some_points').css("display","block"):a('.mwb_wpr_enter_some_points').css("display","none"),a(document).on('change','#mwb_wgm_price',function(){var b=a(this).val();b!=null&&(a('.mwb_wpr_when_variable_pro').html(b),a('#mwb_wpr_some_custom_points').val(b),a('#mwb_wpr_pro_cost_to_points').val(b))}),a(document).on('click','.mwb_wpr_common_slider',function(){a(this).siblings('.mwb_wpr_common_table').slideToggle("fast"),a(this).children('.mwb_wpr_open_toggle').toggleClass('mwb_wpr_plus_icon')}),a(document).on('click','#mwb_cart_points_apply',function(){var h=a(this).data('id'),g=a(this).data('point'),d='',e='',j=mwb_wpr.mwb_wpr_cart_points_rate,k=mwb_wpr.mwb_wpr_cart_price_rate,f=a('#mwb_cart_points').val(),i;a("#mwb_wpr_cart_points_notice").html(""),a("mwb_wpr_cart_points_success").html(""),f!=='undefined'&&f!==''&&f!==null&&f>0?g!==null&&g>0&&g>=f?(b(a('.woocommerce-cart-form')),b(a('.woocommerce-checkout')),i={action:'mwb_wpr_apply_fee_on_cart_subtotal',user_id:h,mwb_cart_points:f,mwb_nonce:mwb_wpr.mwb_wpr_nonce},a.ajax({url:mwb_wpr.ajaxurl,type:"POST",data:i,dataType:'json',success:function(b){b.result==!0?(d=b.message,e=d,a("#mwb_wpr_cart_points_success").html(e),a("#mwb_wpr_cart_points_success").show()):(d=b.message,e=d,a("#mwb_wpr_cart_points_notice").html(e),a("#mwb_wpr_cart_points_notice").show())},complete:function(){c(a('.woocommerce-cart-form')),c(a('.woocommerce-cart-form')),location.reload()}})):(d=mwb_wpr.not_allowed,e=d,a("#mwb_wpr_cart_points_notice").html(e),a("#mwb_wpr_cart_points_notice").show()):(d=mwb_wpr.not_allowed,e=d,a("#mwb_wpr_cart_points_notice").html(e),a("#mwb_wpr_cart_points_notice").show())}),a(document).on('click','#mwb_wpr_remove_cart_point',function(){b(a('.woocommerce-cart-form'));var d={action:'mwb_wpr_remove_cart_point',mwb_nonce:mwb_wpr.mwb_wpr_nonce};a.ajax({url:mwb_wpr.ajaxurl,type:"POST",data:d,dataType:'json',success:function(b){b.result==!0&&a('#mwb_cart_points').val('')},complete:function(){c(a('.woocommerce-cart-form')),location.reload()}})})}),b=function(a){d(a)||a.addClass('processing').block({message:null,overlayCSS:{background:'#fff',opacity:.6}})},d=function(a){return a.is('.processing')||a.parents('.processing').length},c=function(a){a.removeClass('processing').unblock()}})(jQuery)