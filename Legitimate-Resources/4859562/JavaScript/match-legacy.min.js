function MatchChatAddConvo(e){var t=Cortado.Helpers.querystring(e),n=t.get("idto");return!n||(Match.Chat.Controller.initiateConversationWith(n),!0)}(function($){var _autoInit,self;$.isArray||($.isArray=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}),$.url=function(){function e(e){for(var t="",n=0,r=0,o=0;n<e.length;)r=e.charCodeAt(n),r<128?(t+=String.fromCharCode(r),n++):r>191&&r<224?(o=e.charCodeAt(n+1),t+=String.fromCharCode((31&r)<<6|63&o),n+=2):(o=e.charCodeAt(n+1),c3=e.charCodeAt(n+2),t+=String.fromCharCode((15&r)<<12|(63&o)<<6|63&c3),n+=3);return t}function t(e,t){var n={},r={true:!0,false:!1,null:null};return $.each(e.replace(/\+/g," ").split("&"),function(e,o){var a=o.split("=");e=i(a[0]),o=n;var s=0,u=e.split("]["),c=u.length-1;if(/\[/.test(u[0])&&/\]$/.test(u[c])?(u[c]=u[c].replace(/\]$/,""),u=u.shift().split("[").concat(u),c=u.length-1):c=0,2===a.length)if(a=i(a[1]),t&&(a=a&&!isNaN(a)?+a:"undefined"===a?void 0:void 0!==r[a]?r[a]:a),c)for(;s<=c;s++)e=""===u[s]?o.length:u[s],o=o[e]=s<c?o[e]||(u[s+1]&&isNaN(u[s+1])?{}:[]):a;else $.isArray(n[e])?n[e].push(a):n[e]=void 0!==n[e]?[n[e],a]:a;else e&&(n[e]=t?void 0:"")}),n}function n(e){e=e||window.location;var n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);for(var r={},o=n.length;o--;)r[n[o]]=e[o]||"";return r.query&&(r.params=t(r.query,!0)),r}function r(e){if(e.source)return encodeURI(e.source);var t=[];return e.protocol&&("file"==e.protocol?t.push("file:///"):"mailto"==e.protocol?t.push("mailto:"):t.push(e.protocol+"://")),e.authority?t.push(e.authority):(e.userInfo?t.push(e.userInfo+"@"):e.user&&(t.push(e.user),e.password&&t.push(":"+e.password),t.push("@")),e.host&&(t.push(e.host),e.port&&t.push(":"+e.port))),e.path?t.push(e.path):(e.directory&&t.push(e.directory),e.file&&t.push(e.file)),e.query?t.push("?"+e.query):e.params&&t.push("?"+$.param(e.params,!0)),e.anchor&&t.push("#"+e.anchor),t.join("")}function o(e){return encodeURIComponent(e)}function i(t){return t=t||window.location.toString(),e(unescape(t.replace(/\+/g," ")))}return{encode:o,decode:i,parse:n,build:r}}(),$.fn.msg=function(e){try{if(e){var t=Array.prototype.slice.call(arguments).slice(1);this.each(function(){var n=this,r=Cortado.Behaviors.allFrom(n);for(behavior in r)r.hasOwnProperty(behavior)&&r[behavior].getInstance(function(r){e in r&&$.isFunction(r[e])&&r[e].apply(n,t)})})}}catch(e){Cortado.Helpers.log(e.name+": "+e.message)}return this},$.fn.broadcast=function(e){var t=Array.prototype.slice.call(arguments);return this.each(function(){$("*[data-behavior]",this).andSelf().each(function(){$.fn.msg.apply($(this),t)})}),this},$.fn.replaceClass=function(e,t){return this.removeClass(e).addClass(t),this},$.initBehaviorsFor=function(e){Cortado.Behaviors.parse(e)},$.fn.replaceClass=function(e,t){return this.removeClass(e).addClass(t),this},$.ns=$.namespace=function(e){for(var t=e.split("."),n=window,r=0;r<t.length;r++)n[t[r]]||(n[t[r]]={}),n=n[t[r]];return n},$.ns("Cortado"),Cortado.Promise=function(){var e="pending",t=null,n=null,r=null,o=function(){"resolved"==e&&t&&t.call(this,r),"rejected"==e&&n&&n.call(this,r)},i={then:function(r,i){t=r,n=i,"pending"!=e&&o()},resolve:function(t){"pending"==e&&(r=t,e="resolved",o())},reject:function(t){"pending"==e&&(e="rejected",r=t,o())}};return i},Cortado.Uri=function(e){var t=$.url.parse(e);return{pieces:function(){return t},params:function(e,n){return t.params||(t.params={}),0==arguments.length?t.params:arguments.length>1?void(t.params[e]=n):t.params[e]},toString:function(){return t.source=null,$.url.build(t)}}},Cortado.ScriptUri=function(e){var t=new Cortado.Uri(e);return{seedValue:function(){return t.params("v")}}},Cortado.Behaviors=(_autoInit=!1,self={parse:function(e){var t=$(e).attr("data-behavior");if(t)for(var n=t.split(" "),r=0;r<n.length;r++){var o=n[r],i=new Cortado.Behaviors.BehaviorWrapper(o,e);e.behaviors||(e.behaviors=[]),e.behaviors[o]=i,("true"==$(e).attr("data-init")||_autoInit)&&i.touch()}},wireupEvents:function(){!(window.opera||/webkit/i.test(navigator.userAgent)||/Firefox/i.test(navigator.userAgent))&&$.browser.msie&&$.browser.version<9||(document.addEventListener("DOMContentLoaded",function(e){$(".extend").each(function(){Cortado.Behaviors.parse(this)})},!0),document.addEventListener("DOMNodeInserted",function(e){$(".extend",e.target).andSelf().each(function(){if(/MSIE 10.0/i.test(navigator.userAgent)||/Trident\/7.0/i.test(navigator.userAgent)){var e=$(this);"true"!==e.attr("data-inserted")&&e.hasClass("extend")&&(Cortado.Behaviors.parse(this),e.attr("data-inserted","true"))}else Cortado.Behaviors.parse(this)})},!0))},allFrom:function(e){return self.ensure(e),e.behaviors?e.behaviors:[]},ensure:function(e){!e.behaviors&&$(e).attr("data-behavior")&&self.parse(e)},autoInit:function(e){e!=_autoInit&&e&&$("BODY").broadcast("wakeUp"),_autoInit=e}},self),Cortado.Behaviors.BehaviorWrapper=function(typeName,container){var _typeName=typeName,_container=container,_instance=null,_awake=!1,wakeUp=function(onInstantiate){Cortado.Bootloader.requireByType(_typeName,function(){_instance=eval("new "+_typeName+"()"),"wakeFrom"in _instance&&$.isFunction(_instance.wakeFrom)&&_instance.wakeFrom(_container),_awake=!0,$.isFunction(onInstantiate)&&onInstantiate(_instance)})};return{getInstance:function(e){_awake?e(_instance):wakeUp(e)},touch:function(){_awake||wakeUp()}}},Cortado.Behaviors.wireupEvents(),Cortado.ErrorManager=function(){function e(){c=[],window.onerror=function(e,t,n){s(e,"Unhandled script error at line "+n+"("+t+")")}}function t(){setTimeout(n,9950),window.onbeforeunload=function(){n()}}function n(){c&&c.length>0&&($jq.ajax({type:"POST",url:"/Site/LogError",contentType:"application/json; charset=UTF-8",data:JSON.stringify({errorSummary:r()})}),c=[])}function r(){var e={Errors:c,Path:location.pathname+location.hash};return e}function o(e){u.push(e)}function i(e){for(var t=0;t<u.length;t++)if(-1!==e.indexOf(u[t]))return!0;return!1}function a(e,t){for(var n=0;n<c.length;n++)if(e==c[n].message)return c[n].errorCount++,!0;return!1}function s(e,n){Cortado.Helpers.error(e+"\n"+n),i(e)||a(e,n)||(0===c.length&&t(),c.push({message:e,details:n,errorCount:1}))}var u=[],c=[];return{init:e,flushErrors:n,addToIgnoreList:o,logError:s}}(),Cortado.Bootloader=function(){var e=[],t=!0,n={},r={},o=function(){if(!t)return(new Date).getTime().toString();var e=null;return $("script").each(function(){if($(this).attr("src")&&$(this).attr("src").toLowerCase().indexOf("/cortado/bootstrap")>=0){var t=new Cortado.ScriptUri($(this).attr("src"));e=t.seedValue()}}),e},i=function(e){return 0==e.indexOf("~")?e.substring(1):e},a=function(e){e=i(e);var t=new Cortado.Uri(e);return t.params("v",o()),t.toString()},s=function(e){var t=i(e).toLowerCase(),n=!1;return $("script").each(function(){this.src&&this.src.toLowerCase().indexOf(t)>=0&&(n=!0)}),n},u=function(t,n){null==e[t]&&(e[t]=[]),e[t][e[t].length]=n},c=function(t){if(t in e)for(var n=0;n<e[t].length;n++)$.isFunction(e[t][n])&&e[t][n]();e[t]=[]},l=function(e){for(var t=e.split("."),n=window,r=0;r<t.length;r++){if(!n[t[r]])return null;n=n[t[r]]}return n},f={init:function(){t="0"!=Cortado.Helpers.querystring().get("caching")},requireByType:function(e,t){if(null!=l(e))t();else{var n="/scripts/"+e.replace(".","/")+".js";f.require(n,t)}},require:function(e,t){if($.isFunction(t)&&u(e,t),s(e))n[e]&&!r[e]||c(e);else{n[e]=!0;var o=document.createElement("script");o.src=a(e),o.async=!0,o.type="text/javascript";var i=document.getElementsByTagName("head")[0];i||(i=document.body.parentNode.appendChild(document.createElement("head"))),o.readyState?o.onreadystatechange=function(){"complete"!=o.readyState&&"loaded"!=o.readyState||(r[e]=!0,c(e))}:o.onload=function(){r[e]=!0,c(e)},i.appendChild(o)}},caching:function(e){t=e}};return f}(),Cortado.Helpers=(window.console||function(){var e,t=["log","debug","info","warn","error","assert","dir","dirxml","group","groupEnd","time","timeEnd","count","trace","profile","profileEnd"],n=t.length;for(window.console={},e=0;e<n;e++)window.console[t[e]]=function(){}}(),"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),{safeInvoke:function(e,t){$.isFunction(e)&&e()},log:function(e){console.log(e)},info:function(e){console.info(e)},warn:function(e){console.warn(e)},error:function(e){console.error(e)},array:{any:function(e){if(e.length)return e.length>0;for(var t in e)if(e.hasOwnProperty(t))return!0;return!1}},querystring:function(e){var t="";if(arguments.length>0){var n=e.indexOf("?");n>=0&&(t=e.substring(n))}else t=window.location.search;return{get:function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n="[\\?&]"+e+"=([^&#]*)",r=new RegExp(n),o=r.exec(t);return null==o?"":decodeURIComponent(o[1].replace(/\+/g," "))}}},scaleImage:function(e,t){var n=null==t.width?80:t.width,r=null==t.height?100:t.height,o=Math.min(e.width/n,e.height/r);return"object"==typeof t&&"IMG"==t.nodeName?(t.width=Math.round(o*n),t.height=Math.round(o*r),t):{width:Math.round(o*n),height:Math.round(o*r)}},serializeObject:function(e){for(var t={},n=e.serializeArray(),r=0;r<n.length;r++)t[n[r].name]=n[r].value;return t},isScrolledIntoView:function(e){var t=$(window).scrollTop(),n=t+$(window).height(),r=$(e).offset().top;return $(e).height(),r<=n&&r>=t},localStorage:function(){return!!window.localStorage&&{add:function(e,t){localStorage[e]=JSON.stringify(t)},remove:function(e){localStorage.removeItem(e)},getItemByKey:function(e){return!!localStorage[e]&&JSON.parse(localStorage[e])}}}}),Cortado.ServiceProxy=function(){var e=null,t=null;return{invoke:function(n){t=new Cortado.Promise,null!==e&&(e.abort(),e=null);var r={url:"",type:"json",method:"get",data:{}};return $.extend(r,n),e=$.ajax({url:r.url,dataType:r.type,type:r.method,data:r.data,success:function(e){t.resolve(e)},error:function(e,n,r){t.reject(e)}}),t},abort:function(){null!==e&&(e.abort(),e=null,t.reject())}}},Cortado.ChunkLoader={load:function(e){$.ajax({type:"GET",cache:!1,url:e.url,beforeSend:function(t){if(t.setRequestHeader("X-Cortado-ChunkLoad","true"),t.setRequestHeader("X-Requested-By","legacy"),e.requestHeaders)for(var n in e.requestHeaders)e.requestHeaders.hasOwnProperty(n)&&t.setRequestHeader(n,e.requestHeaders[n])},success:function(t,n,r){e.success(t,n,r)},error:function(t,n,r){401==t.status?window.location.href="/login/login.aspx":e.error(t,n,r)}})}},Cortado.Session=function(){var e=new Cortado.ServiceProxy,t=new Cortado.Promise,n=null,r=!1,o=null,i=function(){var e=o.serialize(),i=$(".errors",o);r||(r=!0,o.msg("busy",!0),i.hide(),$.ajax({type:"GET",url:"/Membership/EnsureSession/",success:function(){$.ajax({url:"/Membership/Login/",type:"POST",data:e,dataType:"json",success:function(e){if(e.hasOwnProperty("success")){if(!e.success){var a=e.reason;return i.html(a).show(),o.msg("busy",!1),r=!1,!1}if(void 0!==e.uid){var s=$("#cuid"),u=s.val().length>0?parseInt(s.val()):0;if(parseInt(e.uid)!=u)return window.location.reload(!0),!1}t.resolve(),null!==n&&n.msg("dismiss")}t.reject()},error:function(){console.log("Failed to login via /membership/login/"),t.reject()}})}}))},a=function(){return e.invoke({url:"/Membership/IsLoggedIn/",type:"",method:"GET"})},s=function(e){Cortado.ChunkLoader.load({url:"/Membership/LoginPanel/",success:function(t){e(t)},error:function(){console.log("failed to get login panel")}})},u=function(e){o=$("form",e),o.msg("busy",!1).get(0).reset(),$(".errors",e).hide()},c=function(e){u(e),e.off().on("click",".login_confirm",function(e){e.preventDefault(),i()}).on("keypress","form",function(e){13==e.which&&i()}).on("click",".prompt_dismiss",function(){n.msg("dismiss"),t.reject({Success:!1,Reason:"UserAbandon"})})},l=function(){var e='<div class="dialog dialog-login extend" id="sessionLogin" data-behavior="Cortado.dialog Cortado.refreshable" data-refresh="/Membership/LoginPanel/" data-init="true" data-autoload="true"></div>',t=5,r=new Cortado.Promise,o=window.setInterval(function(){n=$("#sessionLogin"),n.length<1&&$("body").append(e),n.length>0&&(clearInterval(o),"none"==n[0].style.display&&n.msg("show"),r.resolve()),0==n.length&&0==t&&(clearInterval(o),r.reject()),t--},500);return r};return{ensureLoggedIn:function(){return a()},loginBy:{dialog:function(){return l().then(function(){c(n)}),t},panel:function(e){return s(function(t){e.html(t),c(e)}),t}}}},Cortado.Facebook=($.ns("Facebook"),{connect:function(e){Cortado.Bootloader.require("/scripts/facebook/connect.js",function(){e?Facebook.Controller.Connect(e):Facebook.Controller.Load()})}}),Cortado.Advertising=function(){function e(e){var t=document.location.protocol;Cortado.Bootloader.require(t+"//ox-d.match.servedbyopenx.com/w/1.0/jstag?nc=7214-Match",function(){Cortado.Bootloader.require(t+"//c.amazon-adsystem.com/aax2/amzn_ads.js",function(){Cortado.Bootloader.require(t+"//www.googletagservices.com/tag/js/gpt.js",function(){var t,n,a=new Date,s=a.getFullYear().toString(),u=(a.getMonth()+1).toString(),c=a.getDate().toString(),l=a.getHours(),f=((l-l%4)/4).toString(),d=u.split(""),h=c.split(""),p=f.split(""),g=s+"-"+(d[1]?u:"0"+d[0])+"-"+(h[1]?c:"0"+h[0])+"-"+(p[1]?f:"0"+p[0]);Cortado.Bootloader.require("https://securecp.match.com/scripts/site/adtag_v2.js?atver="+g,function(){var a=e.targeting.ehashxsell;rpo_adtag_ns.hash=a||"",googletag.cmd.push(function(){var a;if(o[e.id])return 0==i&&(amznads.getAdsCallback("3121",function(){try{amznads.setTargetingForGPTAsync("amznslots")}catch(e){}}),i=!0),void googletag.pubads().refresh([o[e.id]]);for(key in e.isOutOfPageSlot?(o[e.id]=googletag.defineOutOfPageSlot(e.path,e.id),a=o[e.id].addService(googletag.pubads())):(o[e.id]=googletag.defineSlot(e.path,e.adSize,e.id),a=o[e.id].addService(googletag.pubads())),e.targeting)t=e.targeting[key],n=t.split(","),n.length>1?a.setTargeting(key,n):a.setTargeting(key,t);!1===r&&(r=!0,rpo_adtag_ns.hash&&rpo_adtag_ns.loadTargeting(),googletag.pubads().enableAsyncRendering(),googletag.enableServices()),0==i?(amznads.getAdsCallback("3121",function(){try{amznads.setTargetingForGPTAsync("amznslots")}catch(e){}i=!1}),i=!0,googletag.display(e.id)):googletag.display(e.id)})})})})})}function t(e){var t=e.scriptSrc(),n=document.getElementById(e.id);null!=n&&(n.innerHTML="",EAS_load_fif(e.id,"/ads/matchAdsIframe.htm",t,e.adwidth,e.adheight))}var n=[],r=!1,o={},i=!1,a=function(n){Cortado.Bootloader.require("/scripts/EAS_Tag.1.0.js",function(){try{"function"==typeof EAS_load_fif&&(n.version&&2===n.version?e(n):t(n))}catch(e){console.log(n.id+" failed to load"),console.log(e)}})};return{add:function(e){var t=e.id;return n[t]=e,!0===e.autoLoad&&a(e),this},load:function(e){if($.isArray(e))for(var t=0;t<e.length;t++)n[e[t]]&&a(n[e[t]]);else n[e]&&a(n[e])},loadAll:function(e){for(var t in n)e?n[t].adzone===e&&a(n[t]):a(n[t])},info:function(){return n},allowAmznCall:function(){i=!1}}}(),Cortado.Bootloader.init(),$.browser.msie&&"1.2.6"!==$.fn.jquery&&($(document).on("click","label>img",function(e){e.preventDefault();var t=$(this).parent();t.attr("for")?$("#"+t.attr("for")).click():t.find("input,select,button").first().click()}),Date.prototype.toISOString||function(){function e(e){return e<10?"0"+e:e}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}())})(jQuery),function(e){e.ns("Notifications"),Notifications.Controller=function(){function t(){return{url:"/alert/GetAllAlerts/",data:{}}}var n=null,r=new Cortado.ServiceProxy,o=0,i=1e4,a=new t,s=!1,u=null,c={TopSpot:function(t){e("#topspot-dash").msg("onMessageRecieved",t)},IM:function(t){t.Count>0&&!0===Match.Chat.PollManager.enabled()&&e("#globalChatAlertList").msg("refresh")}},l=function(e){return u=new Cortado.Promise,o>=3?(u.reject({HttpStatusCode:408}),h.Poller.Stop(),u):(r.invoke(a).then(function(t){if(401===t.StatusCode)return h.Poller.Stop(),u.reject({HttpStatusCode:t.StatusCode}),u;a.url="/alert/TopSpotPoller/",a.data.lastImpressionDt=(new Date).getTime(),a.data.skipIM=s,a.data.pollCt>=0?a.data.pollCt++:a.data.pollCt=0,e&&f(t.Notifications),o=0,u.resolve(t.Notifications)},function(e){o++,console.log("Failed to return notifications. Attempts "+o+". Reason : "+e.statusText),u.reject({HttpStatusCode:408})}),u)},f=function(e){for(var t in e)c.hasOwnProperty(t)&&c[t](e[t])},d=function(){null===n&&(n=setInterval(function(){l(!0)},i))},h={Poller:{Status:n,Stop:function(){return r.abort(),u.reject({HttpStatusCode:409}),r=new Cortado.ServiceProxy,clearInterval(n),n=null,h},Start:function(e){s=e,l(!0).then(function(){d()})},Resume:function(){d()},Timeout:i},GetAllNotifications:function(e,t){var n=new Date;n.setSeconds(n.getSeconds()+20),o=0,a.data.lastImpressionDt=n.toISOString(),l(!1).then(function(n){var r=n;e&&r.hasOwnProperty(e)&&(r=n[e]),t&&t(r)})}};return h}(),e(document).ready(function(){var e=document.getElementById("cuid"),t=!1;if(document.getElementById("rtnLongPoll")&&(t=!0),null!==e){var n="0"!==e.value;n&&Notifications.Controller.Poller.Start(t)}})}(jQuery),$.ajaxSetup({jsonp:!1});var $jq=jQuery.noConflict();jQuery.fn.containsOption=function(e){var t=!1;return this.each(function(){if("select"!=this.nodeName.toLowerCase())return this;for(var n=0;n<this.options.length&&(e.value?t=e.value.constructor==RegExp?this.options[n].value.match(e.value):this.options[n].value==e.value:e.text&&(t=e.text.constructor==RegExp?this.options[n].text.match(e.text):this.options[n].text==e.text),!t);n++);}),t},jQuery.fn.addOption=function(e){var t=e;return this.each(function(){if("select"!=this.nodeName.toLowerCase())return this;var e=document.createElement("OPTION");e.value=t.value,e.text=t.text,t.selected&&(e.selected=t.selected),this.options[this.options.length]=e}),this},jQuery.fn.clearOptions=function(){this.each(function(){"select"==this.nodeName.toLowerCase()&&(this.options.length=0)})},jQuery.fn.removeOption=function(e){return this.each(function(){if("select"!=this.nodeName.toLowerCase())return this;for(var t=0;t<this.options.length;t++)this.options[t].value==e&&(this.options[t]=null)}),this},jQuery.fn.selectOptionByValue=function(e){return this.each(function(){if("select"!=this.nodeName.toLowerCase())return this;for(var t=0;t<this.options.length;t++)this.options[t].value==e?this.options[t].selected=!0:this.options[t].selected=!1}),this},jQuery.fn.radioSelectByValue=function(e){return this.each(function(){if("input"!=this.nodeName.toLowerCase()||"radio"!=jQuery(this).attr("type").toLowerCase())return this;jQuery(this).val()==e?this.checked=!0:this.checked=!1}),this},jQuery.fn.radioSelectedValue=function(){var e=null;return this.each(function(){null==e&&"input"==this.nodeName.toLowerCase()&&"radio"==jQuery(this).attr("type").toLowerCase()&&this.checked&&(e=jQuery(this).val())}),e},jQuery.createCookie=function(e,t,n,r){if(n){var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3);var i="; expires="+o.toGMTString()}else i="";arguments.length>3&&r&&(t=jQuery.serializeKeyValues(t)),document.cookie=e+"="+t+i+"; path=/"},jQuery.readCookie=function(e,t){for(var n=e+"=",r=document.cookie.split(";"),o=0;o<r.length;o++){for(var i=r[o];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(n)){var a=i.substring(n.length,i.length);return a.indexOf("&")?jQuery.parseKeyValueString(a):a}}return 0==t?"":null},jQuery.updateCookie=function(e,t){for(var n=e+"=",r=document.cookie.split(";"),o=0;o<r.length;o++){for(var i=r[o];" "==i.charAt(0);)i=i.substring(1,i.length);0==i.indexOf(n)&&(i=i+"&"+t,jQuery.createCookie(e,"",-1),document.cookie=i)}},jQuery.eraseCookie=function(e){jQuery.createCookie(e,"",-1)},jQuery.parseKeyValueString=function(e){for(var t=[],n=e.split("&"),r=0;r<n.length;r++){var o=n[r].split("=");t[o[0]]=o[1]}return t},jQuery.serializeKeyValues=function(e){if(null!=e){var t=[];for(var n in e)t.push(n+"="+e[n]);return t.join("&")}return null},jQuery.namespace=function(e){for(var t=e.split("."),n=window,r=0;r<t.length;r++)n[t[r]]||(n[t[r]]={}),n=n[t[r]];return n},jQuery.logException=function(e){try{navigator.userAgent.match(/msie/i)||null!=typeof debugging&&null!=typeof window.console&&console.log(e.stack)}catch(e){}return this},jQuery.queryString=function(){var e=[],t=!1,n=function(){if(!t){var n=window.location.search.length>0?window.location.search.substring(1):"",r=n.split("&");for(i=0;i<r.length;i++){var o=r[i].split("=");e[o[0]]=o[1]}t=!0}};return{get:function(r){for(var o in t||n(),e)if(o.toLowerCase()==r.toLowerCase())return e[o];return null}}}(),jQuery.fn.addBehavior=function(e,t){return this.each(function(){this.behaviors||(this.behaviors=[]),this.behaviors[e]=t}),this},jQuery.initBehavior=function(container,behaviorName,meta){try{var ctl=eval("new "+behaviorName+"()");return ctl.init({container:container,meta:meta}),jQuery(container).addBehavior(behaviorName,ctl),ctl}catch(e){$jq.logException(e)}return null},jQuery.fn.parseBehavior=function(){return this.each(function(){try{var e=$jq(this).attr("behavior");if(null!=e&&""!=e){var t=null;try{t=jQuery(this).metadata({type:"attr",name:"meta"})}catch(e){$jq.logException(e)}for(var n=e.split(","),r=0;r<n.length;r++)jQuery.initBehavior(this,n[r],t)}}catch(e){$jq.logException(e)}}),this},jQuery.getBehavior=function(e,t){if(e.behaviors)return e.behaviors[t]},jQuery.fn.behavior=function(e,t){return this.each(function(){var n=jQuery.getBehavior(this,e);null!=n&&t(n)}),this},jQuery.behaviorAction=function(e,t){if(e.behaviors)for(var n in e.behaviors){var r=e.behaviors[n];null!=r&&jQuery.isFunction(r[t.action])&&("behavior"in t&&t.behavior==n||!t.behavior)&&r[t.action]()}},eval(function(e,t,n,r,o,i){if(o=function(e){return(e<t?"":o(parseInt(e/t)))+((e%=t)>35?String.fromCharCode(e+29):e.toString(36))},!"".replace(/^/,String)){for(;n--;)i[o(n)]=r[n]||o(n);r=[function(e){return i[e]}],o=function(){return"\\w+"},n=1}for(;n--;)r[n]&&(e=e.replace(new RegExp("\\b"+o(n)+"\\b","g"),r[n]));return e}('(9($){$.r({3:{7:{8:\'l\',h:\'3\',q:/({.*})/,4:\'3\'},w:9(a,b){g.7.8=a;g.7.h=b},j:9(b,c){5 d=$.r({},g.7,c);2(!d.4.o)d.4=\'3\';5 a=$.n(b,d.4);2(a)6 a;a="{}";2(d.8=="l"){5 m=d.q.v(b.u);2(m)a=m[1]}k 2(d.8=="t"){2(!b.i)6;5 e=b.i(d.h);2(e.o)a=$.s(e[0].C)}k 2(b.p!=A){5 f=b.p(d.h);2(f)a=f}2(a.z(\'{\')<0)a="{"+a+"}";a=y("("+a+")");$.n(b,d.4,a);6 a}}});$.x.3=9(a){6 $.3.j(g[0],a)}})(B);',39,39,"||if|metadata|single|var|return|defaults|type|function|||||||this|name|getElementsByTagName|get|else|class||data|length|getAttribute|cre|extend|trim|elem|className|exec|setType|fn|eval|indexOf|undefined|jQuery|innerHTML".split("|"),0,{})),$jq.namespace("MatchCore"),$jq.namespace("MatchCore.Types"),MatchCore.Session=function(){var e={SID:function(){if(null!=$jq.readCookie("SECU"))return $jq.readCookie("SECU").ESID},ServerId:function(){if(null!=$jq.readCookie("SECU"))return $jq.readCookie("SECU").THEME},UserId:function(){if(null!=$jq.readCookie("Match"))return $jq.readCookie("Match").uid},isTimedOut:function(){var t=e.SID(),n=e.ServerId();return!(null!=t&&null!=t&&t.length>0&&null!=n&&null!=n&&n.length>0)}};return e}(),MatchCore.Delegate=function(){var e=[];return{add:function(t){e.push(t)},fire:function(){for(var t=0;t<e.length;t++)e[t](arguments);e=[]},fireAndPreserve:function(){for(var t=0;t<e.length;t++)e[t](arguments)},count:function(){return e.length}}},MatchCore.DelegateEnhanced=function(){var e=[];return{add:function(t){e.push(t)},fire:function(){for(var t=0;t<e.length;t++)e[t].apply(this,arguments);e=[]},fireAndPreserve:function(){for(var t=0;t<e.length;t++)e[t].apply(this,arguments)},count:function(){return e.length}}},MatchCore.ServiceProxy=function(e){var t;return e&&(t=e),{invoke:function(n){if(n){var r=n.verb?n.verb:"GET",o=n.dataType?n.dataType:"json";if(n.method)var i="json"==o.toLowerCase()?t+"/"+n.method:t+"/"+n.method+"/"+o;else i=e}var a=!("async"in n)||n.async;$jq.ajax({type:r,url:i,data:n.data,dataType:o,success:function(e){n.success&&n.success(e)},error:function(e,t,r){n.failure&&n.failure(e,t,r),n.error&&n.error(e,t,r)},async:a})}}},MatchCore.templateProxy=function(e){var t;return t=e,{invoke:function(e){var n=e.verb?e.verb:"GET",r="html";$jq.ajax({type:n,url:t,dataType:r,success:function(t){e.success&&e.success(t)},error:function(t,n,r){e.failure&&e.failure(t,n,r),e.error&&e.error(t,n,r)}})}}},MatchCore.APIProxy=function(e){var t;return e&&(t=e),{invoke:function(e){var n=e.verb?e.verb:"GET",r=e.dataType?e.dataType:"json",o="json"==r.toLowerCase()?JSON.stringify(e.data):e.data,i=e.subLink?"/"+e.subLink:"",a=t+i,s=e.contentType?e.contentType:"application/json; charset=utf-8",u=!("async"in e)||e.async,c=MatchCore.CP.Mauth();-1==a.indexOf("?")?a+="?Authorization="+c:a+="&Authorization="+c,$jq.ajax({type:n,url:a,data:o,dataType:r,contentType:s,success:function(t){e.success&&e.success(t)},error:function(t,n,r){e.failure&&e.failure(t,n,r),e.error&&e.error(t,n,r)},async:u})}}},MatchCore.Messaging=function(){var e=null,t=function(){return n().length>0},n=function(){return $jq(".userMessageSummary")};return{reset:function(){if(t&&(n().html(""),n().hide()),e)for(var r=0;r<e.length;r++){var o=$jq('INPUT[name="'+e[r].field+'"]')[0],i=$jq('LABEL[for="'+e[r].field+'"]')[0];$jq(i).removeClass("invalidFieldLabel"),$jq(o).removeClass("invalidField")}e=null},show:function(r){this.reset(),e=r,t()&&(n().html("<ul></ul>"),n().show());for(var o=0;o<r.length;o++){if(r[o].Field){var i=$jq('INPUT[name="'+r[o].Field+'"]'),a=$jq('LABEL[for="'+r[o].Field+'"]');a.addClass("invalidFieldLabel"),i.addClass("invalidField"),0==o&&i.length>0&&i[0].focus()}t()&&$jq("UL",n()[0]).append("<li>"+r[o].Text+"</li>")}}}}(),MatchCore.Query=function(e){var t=e;return{filter:function(e){if(null!=e){for(var n=[],r=0;r<t.length;r++){var o=t[r];e(o)&&n.push(o)}return new MatchCore.Query(n)}return this},sort:function(e){return new MatchCore.Query(t.sort(e))},data:function(e){if(!e)return t;t=e}}},MatchCore.PhotoConfig={Ids:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]},MatchCore.Photo=function(e,t){var n=e,r=t,o=function(e){var t=MatchCore.PhotoConfig.Ids[r-1],o=n.toString().substring(n.toString().length-4),i=o.substring(0,2),a=o.substring(2);return"http://"+e+".match.com/"+e+"/"+i+"/"+a+"/"+n.toString()+t+".jpeg"},i={smallThumbnail:function(){return i.isValid()?o("sthumbnails"):""},thumbnail:function(){return i.isValid()?o("thumbnails"):""},fullSize:function(){return i.isValid()?o("pictures"):""},isValid:function(){return n>0&&r>0&&r<=MatchCore.PhotoConfig.Ids.length}};return i},MatchCore.UI={busy:function(){$jq("BODY").addClass("ui_busy")},done:function(){$jq("BODY").removeClass("ui_busy")}},MatchCore.UI.PopupWindow=function(){var e,t={height:220,width:400},n={left:0,top:0},r="about:blank",o={init:function(e){null!=e&&null!=e.container&&(e.container,null!=e.meta&&(null!=e.meta.url&&(r=e.meta.url),null!=e.meta.height&&(t.height=parseInt(e.meta.height)),null!=e.meta.width&&(t.width=parseInt(e.meta.width)),null!=e.meta.top&&(n.top=parseInt(e.meta.top)),null!=e.meta.left&&(n.left=parseInt(e.meta.left)),null!=e.meta.timeout&&setTimeout(function(){o.show()},e.meta.timeout)))},show:function(){e=window.open(r,"popupWindow","toolbar=0,titlebar=0,scrollbars=0,resizable=0,menubar=0,Height="+t.height.toString()+",Width="+t.width.toString()+",top="+n.top+",left="+n.left),e&&e.focus&&e.focus()},dismiss:function(){e.close()}};return o},MatchCore.Page=function(){var e=new MatchCore.Delegate,t=new MatchCore.Delegate,n=new MatchCore.Delegate,r=!1,o=function(){$jq("*[behavior]").parseBehavior(),i()},i=function(){r=!0,e.fire()},a={init:function(){o()},onInitComplete:function(t){e.add(t),r&&e.fire()},onBeginFormSubmit:function(e){t.add(e)},beginSubmitForm:function(){t.fire(),n.fire()},onReadyToSubmitForm:function(e){n.add(e)}};return a}(),MatchCore.Types.Byte=function(e){var t=e,n={isValid:function(){if(t&&t-0==t){var e=parseInt(t);return e>=0&&e<=255}return!1},value:function(){return n.isValid()?parseInt(t):null},getValueOrDefault:function(e){return n.isValid()?n.value():e}};return n},MatchCore.UI.Navigation={redirectNonLoggedIn:function(){var e=$jq.readCookie("IsRegistered");window.location.href=e?"/login/login.aspx":"/registration/registration.aspx"}},MatchCore.HtmlString=function(e){var t=e,n={html:function(){var e=t.replace(/&lt;/g,"<").replace(/&gt;/g,">");return e}};return n},MatchCore.Mask=function(e){var t=e,n={asString:function(){return null==t?"":t},asHtml:function(){return new MatchCore.HtmlString(n.asString()).html()},asBoolean:function(){return"boolean"==typeof t?t?"true":"false":""}};return n},MatchCore.UniversalTemplate=function(){var e=function(e){var t=e,n=/{@((.*?):(.*?)|(.*?))}/g,r=function(e,t,n){var r=e.split("."),o=null;if(null!=r){o=t[r[0]];for(var i=1;i<r.length;i++)o=o[r[i]]}else o=t[e];if(arguments.length>2&&null!=n&&null!=n){var a=new MatchCore.Mask(o);try{o=a[n]()}catch(e){}}return o},o={bindTo:function(e){var o=t;return o=o.replace(n,function(t,n,o,i,a){return null!=i&&""!=i&&null!=i?r(o,e,i):r(a,e)}),o}};return o},t={processElement:function(t,n){var r=e($jq(t).html());$jq(t).html(r.bindTo(n))},processTemplate:function(t,n){var r=e(t);return r.bindTo(n)}};return t}(),MatchCore.UI.form=function(){var e,t,n,r,o,i,a={},s=function(){r=$jq(":input:not(button)",n),$jq(r).each(function(e,t){a[t.name]=$jq(t).val()})},u=function(e){var t=!1;if($jq(".field-validation-error",n).remove(),$jq(".input-validation-error",n).removeClass("input-validation-error"),e.Messages)for(var r=0;r<e.Messages.length;r++)e.Messages[r].Code&&401==e.Messages[r].Code?MatchCore.UI.Elements.loginPrompt({success:function(){t=!0}}):e.Messages[r].Field&&""!=e.Messages[r].Field&&($jq('[name="'+e.Messages[r].Field+'"]',n).addClass("input-validation-error"),$jq("<span class='field-validation-error'>"+e.Messages[r].Text+"</span>").insertAfter($jq('[name="'+e.Messages[r].Field+'"]',n)[0]),t=!0);0==t&&i&&i(e,n),$jq(n).removeClass("submitting").addClass("failure").removeClass("success")},c=function(e){o&&o(e,n),$jq(n).removeClass("submitting").removeClass("failure").addClass("success")},l=function(){var r;r="post"!=t.toLowerCase()||a.noStringify?a:JSON.stringify(a),$jq(".field-validation-error",n).remove(),$jq(".input-validation-error",n).removeClass("input-validation-error"),$jq.ajax({type:t,url:e,data:r,dataType:"json",success:function(e){0!=e.Success?c(e):u(e)},error:function(e,t,n){200!=e.status?u(response):c(e)}})},f={submit:function(r,a,u){"FORM"==r.tagName?(n=r,o=a,i=u,e=$jq(n).attr("action"),t=$jq(n).attr("method"),$jq(n).addClass("submitting").removeClass("failure").removeClass("success"),s(),l()):$jq.logException("this is not a form tag")}};return f},MatchCore.UI.FormCollection=function(){var e,t=function(t,n,r,o){e[t]={form:n}},n=function(t,n,r){e[t]&&(e[t].onSuccess=n,e[t].onFailure=r)},r=function(){$jq('a[type="submit"]').unbind(),$jq('a[type="submit"]').click(function(e){$jq(e.target).parents("form").submit(),e.preventDefault()})},o=function(){$jq('form[ajaxify="1"]').unbind("submit")},i={getForm:function(t){return e[t]},addForm:function(e){var n=new MatchCore.UI.form;t(e.id,n),$jq(e).submit(function(e){return $jq(e.target).submitForm(function(){},function(){}),e.preventDefault(),!1})},loadForms:function(){e=[],o(),r(),$jq('form[ajaxify="1"]').each(function(e,n){var r=new MatchCore.UI.form;t(n.id,r),$jq(n).submit(function(e){return $jq(e.target).submitForm(function(){},function(){}),e.preventDefault(),!1})})},addCallbacks:function(e,t,r){n(e,t,r)}};return i}(),jQuery.fn.submitForm=function(e,t){return this.each(function(){var e=MatchCore.UI.FormCollection.getForm(this.id);e.form.submit(this,e.onSuccess,e.onFailure)})},
jQuery.fn.registerCallbacks=function(e,t){return this.each(function(){MatchCore.UI.FormCollection.addCallbacks(this.id,e,t)})},$jq(document).ready(function(){MatchCore.UI.FormCollection.loadForms();var btn=$jq(".defaultButton");btn.parents(".defaultForm").keydown(function(e){if(13==e.which&&"textarea"!=e.target.type)return"submit"==btn[0].type||"image"==btn[0].type||"button"==btn[0].type?$jq(btn[0]).click():eval(btn[0].href),!1}),MatchCore.Page.init()}),this.JSON||(JSON=function(){function f(e){return e<10?"0"+e:e}function stringify(e,t){var n,r,o,i,a,s=/["\\\x00-\x1f\x7f-\x9f]/g;switch(typeof e){case"string":return s.test(e)?'"'+e.replace(s,function(e){var t=m[e];return t||(t=e.charCodeAt(),"\\u00"+Math.floor(t/16).toString(16)+(t%16).toString(16))})+'"':'"'+e+'"';case"number":return isFinite(e)?String(e):"null";case"boolean":case"null":return String(e);case"object":if(!e)return"null";if("function"==typeof e.toJSON)return stringify(e.toJSON());if(n=[],"number"==typeof e.length&&!e.propertyIsEnumerable("length")){for(i=e.length,r=0;r<i;r+=1)n.push(stringify(e[r],t)||"null");return"["+n.join(",")+"]"}if(t)for(i=t.length,r=0;r<i;r+=1)o=t[r],"string"==typeof o&&(a=stringify(e[o],t),a&&n.push(stringify(o)+":"+a));else for(o in e)"string"==typeof o&&(a=stringify(e[o],t),a&&n.push(stringify(o)+":"+a));return"{"+n.join(",")+"}"}}Date.prototype.toJSON=function(){return this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z"};var m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return{stringify:stringify,parse:function(text,filter){function walk(e,t){var n,r;if(t&&"object"==typeof t)for(n in t)Object.prototype.hasOwnProperty.apply(t,[n])&&(r=walk(n,t[n]),void 0!==r&&(t[n]=r));return filter(e,t)}var j;if(/^[\],:{}\s]*$/.test(text.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(:?[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof filter?walk("",j):j;throw new SyntaxError("parseJSON")}}}()),$jq.namespace("MatchCore.UI.Site"),$jq.namespace("MatchCore.UI.Site.Modal"),MatchCore.UI.Site.ModalDialog=function(){var e,t=new MatchCore.Delegate,n=new MatchCore.Delegate,r=new MatchCore.UI.Site.Modal.templateManager,o=($jq(document),!1),i=!1,a={fadeIn:null,fadeOut:null},s={autoShow:!1,autoCenter:!1,enableScroll:{}},u=function(){$jq(".modal_dismiss",e).bind("click",function(e){g.dismiss(),e.preventDefault()}),s.autoCenter&&($jq(window).resize(function(){g.center()}),$jq(document).ready(function(){g.center()}))},c=function(){var t,n,r,a,u,c,l,d,h=e;r="number"==typeof window.innerWidth?window.innerWidth:document.documentElement.clientWidth,t=document.documentElement&&document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft,a="number"==typeof window.innerHeight?window.innerHeight:document.documentElement.clientHeight,n=document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop;var p=$jq(h).height(),g=$jq(h).width();c=a,u=r>1024?1024:r,d=r<g?0:u/2-g/2+t+"px",l=a<p?0:c/2-p/2+n+"px",s.enableScroll.isEnabled&&i&&(a<p||r<g?o=!0:o&&(f(),dismissed=!1)),$jq(h).css("top",l),$jq(h).css("left",d)},l=function(){$jq(".obscureFromModal").each(function(){-1==$jq(this).parents(".modal_dialog").length&&$jq(this).addClass("obscuredFromModal")}),$jq("object").each(function(){-1==$jq(this).parents(".modal_dialog").length&&($jq(this).attr("modal_obscured","1"),$jq(this).css("visibility","hidden"))}),navigator.userAgent.match(/msie/i)&&$jq("SELECT").each(function(){-1==$jq(this).parents(".modal_dialog").length&&($jq(this).attr("modal_obscured","1"),$jq(this).css("visibility","hidden"))})},f=function(){i=!0},d=function(){$jq('*[modal_obscured="1"]').css("visibility","visible"),$jq(".obscuredFromModal").removeClass("obscuredFromModal"),i=!1},h=function(t){e=t.container,$jq(e).addClass("client_modal"),$jq(e).hide(),p(t.meta),u()},p=function(t){t&&(t.onShow&&g.onShow(opts.meta.onShow),t.onDismiss&&g.onDismiss(opts.meta.onDismiss),t.moveOutHierarchy&&(t.moveOutHierarchy=!1,$jq(e).attr("meta",JSON.stringify(t)),$jq(e).remove(),t.appendToElement?$jq(t.appendToElement).append(e):$jq("body").append(e)),t.fadeIn&&(a.fadeIn=t.fadeIn),t.fadeOut&&(a.fadeOut=t.fadeOut),t.autoShow&&(s.autoShow=t.autoShow),t.autoCenter&&(s.autoCenter=t.autoCenter),t.enableScroll&&(s.enableScroll={elem:e,isEnabled:t.enableScroll}))},g={init:function(e){if(!e)return!1;e.meta&&e.meta.templateUrl?r.createModalFromTemplate(e,h):h(e),MatchCore.UI.Site.ModalMaster.addModal(this),s.autoShow&&g.show()},dismiss:function(){n.fireAndPreserve(),d(),$jq("#dialog-overlay").hide(),null!=a.fadeOut?$jq(e).fadeOut(a.fadeOut):$jq(e).hide()},show:function(){t.fireAndPreserve(),$jq("#dialog-overlay").show(),$jq("#bodyWrapper").addClass("hasModal"),f(),l(),s.autoCenter&&c(),null!=a.fadeIn?$jq(e).fadeIn(a.fadeIn):$jq(e).show()},center:function(){c()},id:function(){return $jq(e).attr("id")},onShow:function(e){t.add(e)},onDismiss:function(e){n.add(e)}};return g},MatchCore.UI.Site.Modal.templateManager=function(){var e,t,n=function(n){e.meta.data?($jq(e.container).setTemplate(n),$jq(e.container).processTemplate(e.meta.data)):$jq(e.container).html(n),t(e)};return{createModalFromTemplate:function(r,o){e=r,t=o;var i=new MatchCore.templateProxy(e.meta.templateUrl);i.invoke({success:n})}}},MatchCore.UI.Site.ModalMaster=function(){var e=[],t=function(t){for(var n in e)try{n!=t&&e[n].dismiss()}catch(e){}},n={addModal:function(n){var r=n.id();n.onShow(function(){t(r)}),e[n.id()]=n},getModal:function(t){return e[t]},hideAll:function(){t()}};return n}(),jQuery.fn.showClientModal=function(){return this.each(function(){jQuery(this).behavior("MatchCore.UI.Site.ModalDialog",function(e){e.show()})})},jQuery.fn.dismissClientModal=function(){return this.each(function(){jQuery(this).behavior("MatchCore.UI.Site.ModalDialog",function(e){e.dismiss()})})},$jq.namespace("MatchCore.UI.Site"),MatchCore.UI.Site.StillThere=function(){return!0},$jq.namespace("MatchCore.Header"),$jq.namespace("MatchCore.UI.Site.Header"),MatchCore.UI.Site.Header.ReactivateSubscription=function(){var e,t=new MatchCore.Header.Subscription,n=function(){$jq(".view1").hide(),$jq(".view2").show(),setTimeout(function(){$jq(e).fadeOut()},3e3)},r=function(){$jq(e).bind("mouseenter",function(){$jq(".prompt",e).show()}).bind("mouseleave",function(){$jq(".tooltip",e).hasClass("prompt")&&$jq(".prompt",e).hide()}),$jq(".resubBtn",e).click(function(){$jq(".tooltip",e).removeClass("prompt");var r={};r.success=n,t.reactivateSubscription(r)})},o={init:function(t){t&&t.container&&(e=t.container),r()}};return o},MatchCore.Header.Subscription=function(){var e=new MatchCore.ServiceProxy("/rest/MainService.ashx"),t={reactivateSubscription:function(t){e.invoke({method:"ReactivateSubscription",data:{sid:MatchCore.Session.SID(),theme:MatchCore.Session.ServerId()},failure:function(e,n,r){t.failure&&t.failure(e,n,r)},success:function(e){t.success&&t.success(e)}})}};return t},MatchCore.Header.ShowProfile=function(){var e=new MatchCore.ServiceProxy("/rest/MainService.ashx"),t={init:function(t){t.container&&$jq(t.container).click(function(){e.invoke({method:"UnhideProfile",data:{sid:MatchCore.Session.SID(),theme:MatchCore.Session.ServerId()},failure:function(e,t,n){},success:function(e){e.Success&&$jq("#SharkFinModal").behavior("MatchCore.UI.Site.ModalDialog",function(e){e.show()})}})})}};return t},MatchCore.Header.Navigation=function(){var e=null,t=$jq("body").hasClass("ie6")?"width":"minWidth",n=function(){$jq(e).children("li").bind("mouseenter touchstart pointerdown",function(e){$jq(this).children("a").hasClass("navItemHighlight")||$jq(this).hasClass("noMenu")||e.preventDefault(),$jq(".menuItem").hide(),$jq(".navItem").removeClass("navItemHighlight"),$jq(".menuItem",this).show().css(t,$jq(this).outerWidth()),$jq(".navItem",this).addClass("navItemHighlight")}).bind("mouseleave",function(){$jq(".menuItem",this).hide(),$jq(".navItem",this).removeClass("navItemHighlight")})},r={init:function(t){t.container&&(e=t.container,n())}};return r},MatchCore.UI.StandardPrompt=function(){var e=null,t=null,n=null,r={autoShow:null,autoDismissIn:null,fadeIn:null,fadeOut:null},o=function(){$jq(e).wrapInner('<div class="promptContent"/>').prepend('<div class="close prompt_dismiss"><span>x</span></div>').addClass("standardPrompt"),$jq.initBehavior(e,"MatchCore.UI.Site.ModalDialog",{autoShow:r.autoShow,autoCenter:!0,fadeIn:r.fadeIn,fadeOut:r.fadeOut})},i=function(t){t&&(t.moveOutOfHierarchy&&(t.moveOutOfHierarchy=!1,$jq(e).attr("meta",JSON.stringify(t)),$jq(e).remove(),$jq("body").append(e)),t.fadeIn&&(r.fadeIn=t.fadeIn),t.fadeOut&&(r.fadeOut=t.fadeOut),t.autoDismissIn&&(r.autoDismissIn=t.autoDismissIn),t.autoShow&&(r.autoShow=t.autoShow))},a=function(){$jq(".prompt_dismiss",e).click(function(t){$jq(".handle, .password",e).val(""),$jq.browser.msie?t.cancelBubble=!0:t.stopPropagation(),t.preventDefault(),s.dismiss()}),$jq(".prompt_confirm",e).click(function(e){$jq.browser.msie?e.cancelBubble=!0:e.stopPropagation(),e.preventDefault(),s.confirm()})},s={init:function(t){e=t.container,null!=t.meta&&i(t.meta),$jq(".promptContent",e).length<1&&o(),a()},invoke:function(o){o?(t=o.confirm?o.confirm:null,n=o.dismiss?o.dismiss:null):(t=null,n=null),r.autoDismissIn&&setTimeout(function(){$jq(e).dismissClientModal()},r.autoDismissIn),$jq(e).showClientModal()},dismiss:function(){$jq(e).dismissClientModal(),null!=n&&n()},confirm:function(){$jq(e).dismissClientModal(),null!=t&&t()}};return s},MatchCore.UI.Site.LoginPrompt=function(){var e=null,t=null,n=null,r={fadeIn:null,fadeOut:null},o=function(){$jq.initBehavior(e,"MatchCore.UI.StandardPrompt",{fadeIn:r.fadeIn,fadeOut:r.fadeOut})},i=function(){$jq(".login_confirm",e).click(function(e){$jq.browser.msie?e.cancelBubble=!0:e.stopPropagation(),e.preventDefault(),c.confirm()})},a=function(t){$jq(".errors",e).html(t),$jq(".errors",e).show()},s=function(r,o){u(function(){var i="/Membership/Login/";$jq.ajax({type:"POST",url:i,data:{handle:r,password:o},dataType:"json",success:function(r){if(null==r.success)a(MatchCore.UI.Site.Translate.getTranslation("MatchContent.Account.AccountSettings.LoginFailed")),n(r);else{if(!r.success){var o=r.reason;return"undefined"!=typeof displayErrorMessage&&(o=displayErrorMessage(o)),void a(o)}if($jq(e).behavior("MatchCore.UI.StandardPrompt",function(e){e.dismiss()}),null!=r.uid){var i=$jq("#cuid").val().length>0?parseInt($jq("#cuid").val()):0;if(parseInt(r.uid)!=i)return void window.location.reload(!0)}t&&t(r)}},error:function(e){a(MatchCore.UI.Site.Translate.getTranslation("MatchContent.Account.AccountSettings.LoginFailed")),n(e)}})})},u=function(e){$jq.ajax({type:"GET",url:"/Membership/EnsureSession/",success:function(t){e()}})},c={init:function(t){e=t.container,o(),i()},invoke:function(r){$jq(".errors",e).hide(),r?(t=r.success?r.success:null,n=r.fail?r.fail:null):(t=null,n=null),$jq(e).prompt()},confirm:function(){$jq(".errors",e).hide();var t=$jq('*[name="handle"]',e),n=$jq('*[name="password"]',e),r=t.val(),o=n.val();return null==r||r.length<=0?("undefined"==typeof handleNullErrorMsg&&(handleNullErrorMsg=MatchCore.UI.Site.Translate.getTranslation("MatchContent.Account.AccountSettings.EnterUserName")),a(handleNullErrorMsg),!1):null==o||o.length<=0?("undefined"==typeof passwordNullErrorMsg&&(passwordNullErrorMsg=MatchCore.UI.Site.Translate.getTranslation("MatchContent.Error.ErrorMessages.ErrorPasswordMissing")),a(passwordNullErrorMsg),!1):void s(r,o)}};return c},MatchCore.UI.Site.MessageSummary=function(){var e={init:function(e){e.container},clear:function(){},yield:function(e){}};return e},MatchCore.UI.Elements=function(){var e=!1,t=function(t){if(e)t();else{var n="/Membership/LoginPanel/";$jq.ajax({type:"GET",url:n,success:function(n){$jq("BODY").append('<div id="globalLogin"></div>'),$jq("#globalLogin").hide(),$jq("#globalLogin").append(n),$jq.initBehavior($jq("#globalLogin"),"MatchCore.UI.Site.LoginPrompt",null),e=!0,t()}})}},n={loginPrompt:function(e){t(function(){$jq("#globalLogin").behavior("MatchCore.UI.Site.LoginPrompt",function(t){t.invoke(e)})})},ensureLoggedInBefore:function(e){$jq.ajax({type:"GET",url:MatchCore.Application.resolveUrl("~/Membership/IsLoggedIn/"),success:function(t){"true"==t||1==t?e():n.loginPrompt({success:e})}})}};return n}(),jQuery.fn.prompt=function(e){return this.each(function(){jQuery(this).behavior("MatchCore.UI.StandardPrompt",function(t){t.invoke(e)})})},$jq.namespace("MatchCore.UI.Site"),MatchCore.UI.Site.Translate=function(){var e,t=!1,n={getTranslation:function(n){if(!embeddedTranslations&&!1===t){var r="/ClientResource/GetTranslations/";MatchCore.Application&&(r="/ClientResource/GetTranslations/?cc="+MatchCore.Application.CultureCode),$jq.ajax({type:"GET",url:r,async:!1,cache:!0,success:function(r){e=JSON.parse(r),cb(e[n]),t=!0},failure:function(){return""}})}return!e&&embeddedTranslations&&(e=embeddedTranslations),e?(!e[n]&&console&&console.log&&console.log(n),e[n]):(console.log(n),"")},stringFormat:function(e,t){var n=new RegExp("{-?[0-9]+}","g");return e.replace(n,function(e){var n,r=parseInt(e.substring(1,e.length-1));return n=r>=0?t[r]:-1===r?"{":-2===r?"}":"",n})}};return n}();