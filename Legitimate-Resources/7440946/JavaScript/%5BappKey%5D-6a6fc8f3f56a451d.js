(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[792],{9070:function(e,a,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/marketplace/[appKey]",function(){return i(1197)}])},1197:function(e,a,i){"use strict";i.r(a),i.d(a,{__N_SSP:function(){return ye},default:function(){return ke}});var t=i(5893),s=i(7294),n=i(6042),r=i(2962),l=i(4184),p=i.n(l),o=i(6074),c=i(5877),d=i(7568),u=i(9396),_=i(414),m=i(6573),h=i(6616),v=i(1163),f=i(5152),x=i.n(f),j=i(706),g=i(1459),N=i(8360),y=i(6254),k=i(5422),D=i(875),A=i(6529),C=(i(9245),"appMediaCarousel__item"),I="appMediaCarousel__nextButton",w="appMediaCarousel__prevButton",b={mainView:{breakpoint:{max:1/0,min:320},items:1}},P=function(e){var a=e.next,i=e.previous,s=e.carouselState,n=s&&0===s.currentSlide,r=s&&s.currentSlide==s.totalItems-1;return(0,t.jsxs)("div",{className:"appMediaCarousel__buttonsContainer",children:[(0,t.jsx)("button",{className:p()("appMediaCarousel__button",{appMediaCarousel__button_hidden:n}),onClick:function(){return i&&i()},"data-testid":w,children:(0,t.jsx)("span",{className:"sr-only",children:"Previous slide"})}),(0,t.jsx)("button",{className:p()("appMediaCarousel__button",{appMediaCarousel__button_hidden:r}),onClick:function(){return a&&a()},"data-testid":I,children:(0,t.jsx)("span",{className:"sr-only",children:"Next slide"})})]})};function T(e){var a=e.images,i=e.appName,n=(0,s.useRef)(null);return(0,s.useEffect)((function(){var e=n.current;e&&e.goToSlide(0)}),[a]),(0,t.jsx)(A.default,{ref:n,renderButtonGroupOutside:!0,customButtonGroup:(0,t.jsx)(P,{}),responsive:b,deviceType:"mainView",ssr:!0,swipeable:!0,autoPlay:!1,arrows:!1,customTransition:"300ms ease",shouldResetAutoplay:!1,showDots:!0,keyBoardControl:!0,containerClass:"appMediaCarousel__container",dotListClass:"appMediaCarousel__dots",itemClass:"appMediaCarousel__item",children:a.map((function(e,a){return e.includes("youtube.com")?(0,t.jsx)("iframe",{className:"appMediaCarousel__iframe",src:"".concat(e,"?rel=0&showinfo=0&enablejsapi=1"),frameBorder:"0",allow:"encrypted-media",allowFullScreen:!0,"data-testid":C,title:"".concat(i," app demo video")},a):(0,t.jsx)("div",{className:"appMediaCarousel__image","aria-hidden":"true",style:{backgroundImage:'url("'.concat(e,'")')},"data-testid":C},a)}))})}var L=i(3944),S=i(2339),M=i(6439),R=i(4978),Z=i(280),B=i(6483),E=i(6493),K=i(1755),U="appDetails__infoGetApp",G="appDetails__infoRunApp";function F(e,a){return function(e){return e.startsWith("/oauth/")||e.startsWith("/app-install")}(e)?(0,L.G7)(e,{backUrl:a}):e}function H(e){var a,i,n=e.selectedApp,r=e.userProfile,l=e.account,p=(0,M.t)(),o=(0,L.YT)(),c=n.id||n.appKey,d=!!l&&(0,B.cy)(l,c),u=!!l&&(0,B.Wk)(l,c),_=d?"/app-install/completed":"/app-install/submit-app-install/",m=d?"GET":"POST",h=(0,s.useState)(!1),v=h[0],f=h[1],x=(null===(a=n.installLink)||void 0===a?void 0:a.url)&&F(o(null===(i=n.installLink)||void 0===i?void 0:i.url),o(n.infoLink.url));return(0,t.jsxs)("form",{action:_,method:m,className:"appDetails__infoGetApp",name:"app-installation-form",children:[(0,t.jsx)("input",{type:"hidden",name:"client_id",value:n.appKey}),(0,t.jsx)("input",{type:"hidden",name:"account_id",value:null===l||void 0===l?void 0:l.id}),(0,t.jsx)("input",{type:"hidden",name:"app_install_link",value:x}),(0,t.jsx)("input",{type:"hidden",name:"utm_source",value:p.utm_source}),(0,t.jsx)("input",{type:"hidden",name:"run_installed_app",value:"1"}),(0,t.jsxs)(Z.z,{"data-testid":G,onClick:function(){f(!0),(0,R._1)({appId:c,accountId:null===l||void 0===l?void 0:l.id,userId:null===r||void 0===r?void 0:r.id,isAuthorized:d,isInstalled:u,utm:p})},radius:"circle",loading:v,children:["Run ",(0,t.jsx)("span",{"aria-hidden":"true",children:" \u2192"})]})]})}function O(e){var a,i,s,n=e.selectedApp,r=e.appAccountStatus,l=e.workspace,p=e.userProfile,o=e.account,c=B.Du.NOT_AVAILABLE_IN_CURRENT_PLAN,d=(0,L.YT)(),u=(0,M.t)(),_=(0,E.CJ)(),m=n.id||n.appKey,h=(0,t.jsxs)(t.Fragment,{children:[(null===(a=n.installLink)||void 0===a?void 0:a.caption)&&"Get app"!==n.installLink.caption&&(0,t.jsxs)(t.Fragment,{children:[n.installLink.caption," ",(0,t.jsx)("span",{"aria-hidden":"true",children:" \u2192"})]}),(null===(i=n.installLink)||void 0===i?void 0:i.caption)&&"Get app"===n.installLink.caption&&(0,t.jsxs)(t.Fragment,{children:["Get ",(0,t.jsx)("span",{className:"sr-only",children:n.name})," app",(0,t.jsx)("span",{"aria-hidden":"true",children:" \u2192"})]})]}),v=n.installLink?F(null===(s=n.installLink)||void 0===s?void 0:s.url,d(n.infoLink.url)):void 0;if(r===c&&(h=(0,t.jsxs)(t.Fragment,{children:["Upgrade",(0,t.jsxs)("span",{className:"sr-only",children:[" ",n.name]})]}),v="/app/dashboard/?inAppPricing.visible=true",l&&(v=(0,K.Xm)(l,v))),!v)return null;return(0,t.jsx)(Z.Q,{className:"appDetails__infoGetApp",href:d(v),openInNewTab:function(){var e;return r===c?_:null===(e=n.installLink)||void 0===e?void 0:e.openInNewTab}(),"data-testid":U,onClick:function(){r===c?(0,R.oE)({clickFrom:"app_listing_page",appId:m,appName:n.name,accountId:null===o||void 0===o?void 0:o.id,userId:null===p||void 0===p?void 0:p.id,plan:null===o||void 0===o?void 0:o.type}):(0,R.So)({appId:m,accountId:null===o||void 0===o?void 0:o.id,userId:null===p||void 0===p?void 0:p.id,utm:u})},forceRefresh:!0,radius:"circle",children:h})}var V=i(9584),W=i(9291),X=i(1984),Y=i(5682),J=i(7496),q=i(4444),Q=i(542),z=x()((function(){return Promise.all([i.e(777),i.e(418)]).then(i.bind(i,2418)).then((function(e){return e.AppRatingForm}))}),{loadableGenerated:{webpack:function(){return[2418]}},ssr:!1}),$="appDetails",ee="appDetails__title",ae="appDetails__info",ie="appDetails__infoHeader",te="appDetails__description",se="appDetails__appScopes",ne="appDetails__categories",re="appDetails__categoryToken",le="appDetails__backLink",pe="appDetails__notAvailableMessage",oe="appDetails__externalLinksSection",ce="appDetails__privateAppHeader",de="appDetails__images",ue="appDetails__similarApps";function _e(e){var a=e.app,i=e.account,n=e.userProfile,r=(0,s.useState)(!1),l=r[0],o=r[1],c="https://miro.com".concat(a.infoLink.url);(0,s.useEffect)((function(){var e;return l&&(e=window.setTimeout((function(){return o(!1)}),2e3)),function(){return clearTimeout(e)}}),[l]);var u=function(){var e=(0,d.Z)((function(){return(0,_.__generator)(this,(function(e){switch(e.label){case 0:return navigator.clipboard&&navigator.clipboard.writeText?[4,navigator.clipboard.writeText(c)]:[3,2];case 1:return e.sent(),[3,3];case 2:!function(e){var a=document.createElement("textarea");a.value=e,document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a)}(c),e.label=3;case 3:return o(!0),v(W.o2.COPY_LINK),[2]}}))}));return function(){return e.apply(this,arguments)}}(),v=function(e){(0,R.BQ)({userId:null===n||void 0===n?void 0:n.id,appId:a.id||a.appKey,accountId:null===i||void 0===i?void 0:i.id,type:e})};return(0,t.jsxs)(g.h,{children:[(0,t.jsx)(g.h.Trigger,{onClick:function(){(0,R.Vr)({userId:null===n||void 0===n?void 0:n.id,appId:a.id||a.appKey,accountId:null===i||void 0===i?void 0:i.id})},children:(0,t.jsx)("div",{tabIndex:0,className:"appDetails__infoShare",children:(0,t.jsx)("span",{className:p()("appDetails__copiedMessage",{appDetails__copiedMessage_visible:l}),children:"Copied"})})}),(0,t.jsxs)(g.h.Content,{css:{width:250},onClick:function(e){return e.stopPropagation()},children:[(0,t.jsx)(g.h.Item,{onSelect:u,children:(0,t.jsxs)(N.r,{className:"appDetails__shareMenuItem",children:[(0,t.jsx)("div",{className:"appDetails__shareIcon appDetails__shareIcon_copy","aria-hidden":"true"}),"Copy Link"]})}),(0,t.jsx)(g.h.Item,{children:(0,t.jsxs)(m.Z,{onClick:function(){return v(W.o2.FACEBOOK)},url:c,className:"appDetails__shareMenuItem",children:[(0,t.jsx)("div",{className:"appDetails__shareIcon appDetails__shareIcon_facebook","aria-hidden":"true"}),"Facebook"]})}),(0,t.jsx)(g.h.Item,{children:(0,t.jsxs)(h.Z,{onClick:function(){return v(W.o2.TWITTER)},url:c,className:"appDetails__shareMenuItem",children:[(0,t.jsx)("div",{className:"appDetails__shareIcon appDetails__shareIcon_twitter","aria-hidden":"true"}),"Twitter"]})})]})]})}function me(e){var a=e.category,i=(0,L.YT)(),s=a.categoryViewCaption||a.caption,n=i("/marketplace/category/".concat(a.key,"/"));return(0,t.jsx)(N.r,{title:s,className:"appDetails__categoryToken",href:n,shallow:!0,"data-testid":re,forceRefresh:!0,children:s})}function he(e){var a,i,r,l,o,c,m,h=e.selectedApp,f=e.account,x=e.platformApps,g=e.userProfile,A=e.workspace,C=(0,s.useState)({averageRating:(null===(a=h.stats)||void 0===a?void 0:a.averageRating)||0,ratingCount:(null===(i=h.stats)||void 0===i?void 0:i.ratingCount)||0,usageCount:(null===(r=h.stats)||void 0===r?void 0:r.usageCount)||0}),I=C[0],w=C[1],b=(0,s.useState)(!1),P=b[0],M=b[1],Z=x?x.find((function(e){return e.id===h.id||e.appKey===h.appKey})):void 0,K=(0,s.useMemo)((function(){return h.categories.filter((function(e){return e.key!==y.S.ALL_APPS}))}),[h]),U=null===Z||void 0===Z?void 0:Z.scopes;if(Z&&f){var G=B.Du.NOT_AVAILABLE_IN_CURRENT_PLAN;o=(0,B.xb)(f,Z,{}),m=(0,B.Qv)(f)&&!(0,B.XX)(Z),o===G&&(c=(0,V.r)(Z,f))}var F=function(){var e=(0,d.Z)((function(){var e;return(0,_.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,(0,Y.PC)(h.appKey)];case 1:return(e=a.sent().stats)?(w(e),[3,3]):[2,null];case 2:return a.sent(),[3,3];case 3:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),W=(0,v.useRouter)().query.previous_category,re="string"===typeof W?W:void 0,he=function(e){var a=(0,L.YT)(),i=e?"category/".concat(e,"/"):"";return{url:a("/marketplace/".concat(i)),text:e?"Back":"Marketplace"}}(re),ve=(0,E.CJ)(),fe=(0,J.a)(q.y.APP_STATS),xe=(null===(l=h.installLink)||void 0===l?void 0:l.url)||"",je=ve&&(Z?(0,B.sS)(o):!h.isPublished)&&(!Z||!m)&&(0,L.m1)(xe);return(0,t.jsxs)("div",{className:"appDetails","data-testid":$,children:[he?(0,t.jsxs)(N.r,{className:"appDetails__backLink",linkStyle:"dashed",href:he.url,"data-testid":le,shallow:!0,forceRefresh:!0,children:[(0,t.jsx)("span",{"aria-hidden":"true",children:"\u2190"})," ",he.text]}):null,h.isPublished&&(0,t.jsx)("h1",{className:"appDetails__title","data-testid":ee,children:h.name}),!h.isPublished&&(0,t.jsxs)("div",{className:"appDetails__privateAppHeader","data-testid":ce,children:[(0,t.jsxs)("div",{className:"appDetails__privateAppHeaderTitle",children:[h.iconUrl?(0,t.jsx)("img",{className:"appDetails__privateAppHeaderIco",src:h.iconUrl,alt:h.name}):(0,t.jsx)(X.Z,{className:"appDetails__privateAppHeaderIco"}),(0,t.jsx)("h1",{className:"appDetails__privateAppHeaderName",children:h.name})]}),(0,t.jsxs)("div",{className:"appDetails__privateAppHeaderButtons",children:[je&&(0,t.jsx)(H,{appAccountStatus:o,selectedApp:h,workspace:A,account:f,userProfile:g}),!je&&!m&&(0,t.jsx)(O,{appAccountStatus:o,selectedApp:h,workspace:A,account:f,userProfile:g})]})]}),h.images&&h.images.length>0&&(0,t.jsx)("div",{className:"appDetails__media","data-testid":de,children:(0,t.jsx)(T,{images:h.images,appName:h.name})}),h.isPublished&&(0,t.jsxs)("div",{className:"appDetails__info","data-testid":ae,children:[(0,t.jsxs)("div",{className:"appDetails__infoHeader","data-testid":ie,children:[h.iconUrl?(0,t.jsx)("img",{className:"appDetails__infoIco",src:h.iconUrl,alt:h.name}):(0,t.jsx)(X.Z,{className:"appDetails__infoIco"}),(0,t.jsxs)("div",{className:"appDetails__infoBody",children:[(0,t.jsx)("h3",{className:"appDetails__infoTitle",children:h.name}),h.developer&&(0,t.jsxs)("div",{className:"appDetails__infoDeveloper",children:["by ",h.developer.name]}),(0,t.jsxs)("div",{className:"appDetails__rating",children:[(0,t.jsx)(Q.c,(0,u.Z)((0,n.Z)({},I),{appName:h.name,variant:"medium",usageCount:fe?I.usageCount:0})),(0,t.jsx)("div",{className:p()("appDetails__ratingLink",{appDetails__ratingLink_hidden:P}),children:Boolean(g)?(0,t.jsx)(j.r,{onClick:function(){M(!0),(0,R.Zp)({appId:h.id||h.appKey,userId:null===g||void 0===g?void 0:g.id,accountId:null===f||void 0===f?void 0:f.id})},children:"Leave a rating"}):(0,t.jsx)(j.r,{onClick:function(){return window.location.href=(0,L.NS)()},children:"Log in to rate"})})]})]})]}),(0,t.jsxs)("div",{className:"appDetails__infoButtons",children:[(0,t.jsx)(_e,{app:h,account:f,userProfile:g}),je&&(0,t.jsx)(H,{appAccountStatus:o,selectedApp:h,workspace:A,account:f,userProfile:g}),!je&&!m&&(0,t.jsx)(O,{appAccountStatus:o,selectedApp:h,workspace:A,account:f,userProfile:g})]})]}),c&&(0,t.jsx)("div",{className:"appDetails__notAvailableMessage","data-testid":pe,children:c}),P&&(0,t.jsx)(z,{className:"appDetails__appRatingForm",app:h,onClose:function(){M(!1),(0,R.lt)({appId:h.id||h.appKey,userId:null===g||void 0===g?void 0:g.id,accountId:null===f||void 0===f?void 0:f.id})},onSubmit:function(){(0,R.oF)({appId:h.id||h.appKey,userId:null===g||void 0===g?void 0:g.id,accountId:null===f||void 0===f?void 0:f.id}),F()},onChangeRating:function(){return(0,R.cG)({appId:h.id||h.appKey,userId:null===g||void 0===g?void 0:g.id,accountId:null===f||void 0===f?void 0:f.id})}}),h.fullDescription&&(0,t.jsx)("div",{className:"appDetails__description","data-testid":te,dangerouslySetInnerHTML:{__html:h.fullDescription}}),(h.supportUrl||h.privacyPolicyUrl)&&(0,t.jsxs)("div",{className:"appDetails__externalLinksSection","data-testid":oe,children:[h.supportUrl&&(0,t.jsx)("div",{className:"appDetails__externalLinkWrapper",children:(0,t.jsx)(j.r,{href:h.supportUrl,target:"_blank",children:"Support"})}),h.privacyPolicyUrl&&(0,t.jsx)("div",{className:"appDetails__externalLinkWrapper",children:(0,t.jsx)(j.r,{href:h.privacyPolicyUrl,target:"_blank",children:"Privacy policy"})})]}),U&&U.length>0&&(0,t.jsxs)("section",{className:"appDetails__appScopes","data-testid":se,children:[(0,t.jsx)("h2",{className:"appDetails__categoriesTitle",children:"Required permissions"}),(0,t.jsx)(D.C,{scopes:U,appDetailsView:!0})]}),K.length>0&&(0,t.jsxs)("section",{className:"appDetails__categories","data-testid":ne,children:[(0,t.jsx)("h2",{className:"appDetails__categoriesTitle",children:"Categories"}),K.map((function(e){return(0,t.jsx)(me,{category:e},e.key)}))]}),h.similarApps&&h.similarApps.length>0&&(0,t.jsxs)("section",{className:"appDetails__similarApps","data-testid":ue,children:[(0,t.jsx)("h2",{className:"appDetails__similarAppsTitle",children:"Other apps"}),h.similarApps.map((function(e){return(0,t.jsx)(k.C,{app:e,type:"small",account:f,platformApps:x,userProfile:g,previousCategoryKey:re},e.appKey)}))]}),f&&(0,t.jsx)(S.p,{account:f,className:"appDetails__teamBlock"})]})}var ve=i(3155),fe=i(8374),xe=i(3877);i(6356);function je(e){var a=new URL((0,ve.cU)(),"https://miro.com").toString(),i={title:"Team Collaboration Apps | Miro Apps Marketplace",description:"Add your favourite apps to Miro. Improve your team collaboration experience inside Miro.",canonical:a,additionalMetaTags:[{name:"viewport",content:"width=device-width, initial-scale=1"}],twitter:{cardType:"summary_large_image",site:a},openGraph:{url:a,type:"website",site_name:"Miro",images:[{url:xe.Z.src,width:xe.Z.width,height:xe.Z.height}]}};if("selectedApp"in e&&e.selectedApp.seo){var t=e.selectedApp.seo,s=t.key,n=t.metaTitle,r=t.metaDescription,l=new URL((0,ve.FG)(s),"https://miro.com").toString();i.title=n,i.description=r,i.canonical=l,i.openGraph={url:l,type:"website",site_name:"Miro",images:[{url:xe.Z.src,width:xe.Z.width,height:xe.Z.height}]}}else"failedView"in e&&(delete i.twitter,delete i.openGraph,delete i.description,delete i.canonical,i.title="Not Found | Miro Apps Marketplace",i.noindex=!0,i.nofollow=!0);return i}function ge(e){var a=(0,E.CJ)(),i="userProfile"in e?e.userProfile:void 0,s="failedView"in e;return(0,t.jsxs)("div",{className:"marketplaceContainer",children:[(0,t.jsx)(r.PB,(0,n.Z)({},je(e))),(0,t.jsxs)("div",{className:p()("marketplace",{marketplace_iframeModal:a}),children:[!a&&(0,t.jsx)(o.L,{userProfile:i,showHeaderNavigation:!s}),"selectedApp"in e&&(0,t.jsx)(he,(0,n.Z)({},e)),s&&(0,t.jsx)(fe.T,(0,n.Z)({},e))]}),!a&&(0,t.jsx)(c.q,{})]})}var Ne=i(5321),ye=!0;function ke(e){var a,i=e.selectedApp,n=e.account,r=e.platformApps,l=e.userProfile,p=e.experiments,o=(0,E.CJ)();return(0,s.useEffect)((function(){(0,R._f)({accountId:null===n||void 0===n?void 0:n.id,userId:null===l||void 0===l?void 0:l.id,source:o?"board":"site"})}),[o,l,n]),a=i?(0,t.jsx)(J.V,{experiments:p,children:(0,t.jsx)(ge,{selectedApp:i,account:n,platformApps:r,userProfile:l})}):(0,t.jsx)(ge,{failedView:"app-details"}),o&&(a=(0,t.jsx)(Ne.O,{children:a})),a}}},function(e){e.O(0,[89,846,581,937,463,834,817,697,774,888,179],(function(){return a=9070,e(e.s=a);var a}));var a=e.O();_N_E=a}]);