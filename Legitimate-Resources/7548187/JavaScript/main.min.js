function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function userInteractionGMT(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,a={event:"user_interaction"};null!==e&&(a.event_name=e),null!==t&&(a.event_label=t),dataLayer.push({event:null,event_name:null,event_label:null,ecommerce:null}),dataLayer.push(a)}function ecommerceGMT(){var e={event:0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,ecommerce:1<arguments.length&&void 0!==arguments[1]?arguments[1]:null};dataLayer.push({ecommerce:null,event:null,event_name:null,event_label:null}),dataLayer.push(e)}function productImpression(){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,r={currencyCode:"BRL",impressions:[]};(0<arguments.length&&void 0!==arguments[0]?arguments[0]:null).map(function(e,t){var a={name:e.name.replace(" - "+e.brand,""),id:e.id,price:e.providers[0].prices.price,brand:e.brand,category:e.category,variant:"Múltiplo de "+e.providers[0].prices[0].minimum_quantity,list:o};r.impressions.push(a)}),ecommerceGMT("products_impressions",r)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,o=new Array(t);a<t;a++)o[a]=e[a];return o}!function(e,t){var a,o;"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("underscore",t):(e=e||self,a=e._,(o=e._=t()).noConflict=function(){return e._=a,o})}(this,function(){var e="1.11.0",t="object"==("undefined"==typeof self?"undefined":_typeof(self))&&self.self===self&&self||"object"==("undefined"==typeof global?"undefined":_typeof(global))&&global.global===global&&global||Function("return this")()||{},o=Array.prototype,i=Object.prototype,f="undefined"!=typeof Symbol?Symbol.prototype:null,r=o.push,c=o.slice,h=i.toString,n=i.hasOwnProperty,a="undefined"!=typeof ArrayBuffer,s=Array.isArray,l=Object.keys,d=Object.create,u=a&&ArrayBuffer.isView,p=isNaN,m=isFinite,g=!{toString:null}.propertyIsEnumerable("toString"),v=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],b=Math.pow(2,53)-1;function y(r,n){return n=null==n?r.length-1:+n,function(){for(var e=Math.max(arguments.length-n,0),t=Array(e),a=0;a<e;a++)t[a]=arguments[a+n];switch(n){case 0:return r.call(this,t);case 1:return r.call(this,arguments[0],t);case 2:return r.call(this,arguments[0],arguments[1],t)}for(var o=Array(n+1),a=0;a<n;a++)o[a]=arguments[a];return o[n]=t,r.apply(this,o)}}function _(e){var t=_typeof(e);return"function"===t||"object"===t&&!!e}function $(e){return!0===e||!1===e||"[object Boolean]"===h.call(e)}function C(t){return function(e){return h.call(e)==="[object "+t+"]"}}var k=C("String"),x=C("Number"),j=C("Date"),w=C("RegExp"),A=C("Error"),S=C("Symbol"),T=C("Map"),E=C("WeakMap"),P=C("Set"),F=C("WeakSet"),R=C("ArrayBuffer"),I=C("DataView"),O=s||C("Array"),L=C("Function"),M=t.document&&t.document.childNodes;"function"!=typeof/./&&"object"!=("undefined"==typeof Int8Array?"undefined":_typeof(Int8Array))&&"function"!=typeof M&&(L=function(e){return"function"==typeof e||!1});var q=L;function G(e,t){return null!=e&&n.call(e,t)}var N=C("Arguments");!function(){N(arguments)||(N=function(e){return G(e,"callee")})}();var D=N;function U(e){return x(e)&&p(e)}function B(e){return function(){return e}}function V(a){return function(e){var t=a(e);return"number"==typeof t&&0<=t&&t<=b}}function z(t){return function(e){return null==e?void 0:e[t]}}var Q=z("byteLength"),H=V(Q),K=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/,J=a?function(e){return u?u(e)&&!I(e):H(e)&&K.test(h.call(e))}:B(!1),Y=z("length"),W=V(Y);function X(e,t){t=function(t){for(var a={},e=t.length,o=0;o<e;++o)a[t[o]]=!0;return{contains:function(e){return a[e]},push:function(e){return a[e]=!0,t.push(e)}}}(t);var a=v.length,o=e.constructor,r=q(o)&&o.prototype||i,n="constructor";for(G(e,n)&&!t.contains(n)&&t.push(n);a--;)(n=v[a])in e&&e[n]!==r[n]&&!t.contains(n)&&t.push(n)}function Z(e){if(!_(e))return[];if(l)return l(e);var t=[];for(var a in e)G(e,a)&&t.push(a);return g&&X(e,t),t}function ee(e,t){var a=Z(t),o=a.length;if(null==e)return!o;for(var r=Object(e),n=0;n<o;n++){var i=a[n];if(t[i]!==r[i]||!(i in r))return!1}return!0}function te(e){return e instanceof te?e:this instanceof te?void(this._wrapped=e):new te(e)}function ae(e){if(!_(e))return[];var t=[];for(var a in e)t.push(a);return g&&X(e,t),t}function oe(e){for(var t=Z(e),a=t.length,o=Array(a),r=0;r<a;r++)o[r]=e[t[r]];return o}function re(e){for(var t={},a=Z(e),o=0,r=a.length;o<r;o++)t[e[a[o]]]=a[o];return t}function ne(e){var t=[];for(var a in e)q(e[a])&&t.push(a);return t.sort()}function ie(c,l){return function(e){var t=arguments.length;if(l&&(e=Object(e)),t<2||null==e)return e;for(var a=1;a<t;a++)for(var o=arguments[a],r=c(o),n=r.length,i=0;i<n;i++){var s=r[i];l&&void 0!==e[s]||(e[s]=o[s])}return e}}te.VERSION=e,te.prototype.valueOf=te.prototype.toJSON=te.prototype.value=function(){return this._wrapped},te.prototype.toString=function(){return String(this._wrapped)};var se=ie(ae),ce=ie(Z),le=ie(ae,!0);function de(e){if(!_(e))return{};if(d)return d(e);function t(){}t.prototype=e;var a=new t;return t.prototype=null,a}function ue(e){return _(e)?O(e)?e.slice():se({},e):e}function pe(e){return e}function me(t){return t=ce({},t),function(e){return ee(e,t)}}function fe(e,t){for(var a=t.length,o=0;o<a;o++){if(null==e)return;e=e[t[o]]}return a?e:void 0}function he(t){return O(t)?function(e){return fe(e,t)}:z(t)}function ge(r,n,e){if(void 0===n)return r;switch(null==e?3:e){case 1:return function(e){return r.call(n,e)};case 3:return function(e,t,a){return r.call(n,e,t,a)};case 4:return function(e,t,a,o){return r.call(n,e,t,a,o)}}return function(){return r.apply(n,arguments)}}function ve(e,t,a){return null==e?pe:q(e)?ge(e,t,a):(_(e)&&!O(e)?me:he)(e)}function be(e,t){return ve(e,t,1/0)}function ye(e,t,a){return te.iteratee!==be?te.iteratee(e,t):ve(e,t,a)}function _e(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}te.iteratee=be;var $e=Date.now||function(){return(new Date).getTime()};function Ce(t){function a(e){return t[e]}var e="(?:"+Z(t).join("|")+")",o=RegExp(e),r=RegExp(e,"g");return function(e){return e=null==e?"":""+e,o.test(e)?e.replace(r,a):e}}var ke={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},xe=Ce(ke),je=Ce(re(ke)),we=te.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},Ae=/(.)^/,Se={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Te=/\\|'|\r|\n|\u2028|\u2029/g;function Ee(e){return"\\"+Se[e]}var Pe=0;function Fe(e,t,a,o,r){if(!(o instanceof t))return e.apply(a,r);var n=de(e.prototype),i=e.apply(n,r);return _(i)?i:n}var Re=y(function(n,i){var s=Re.placeholder;return function e(){for(var t=0,a=i.length,o=Array(a),r=0;r<a;r++)o[r]=i[r]===s?arguments[t++]:i[r];for(;t<arguments.length;)o.push(arguments[t++]);return Fe(n,e,this,this,o)}});Re.placeholder=te;var Ie=y(function(t,a,o){if(!q(t))throw new TypeError("Bind must be called on a function");var r=y(function(e){return Fe(t,r,a,this,o.concat(e))});return r});function Oe(e,t,a,o){if(o=o||[],t||0===t){if(t<=0)return o.concat(e)}else t=1/0;for(var r=o.length,n=0,i=Y(e);n<i;n++){var s=e[n];if(W(s)&&(O(s)||D(s)))if(1<t)Oe(s,t-1,a,o),r=o.length;else for(var c=0,l=s.length;c<l;)o[r++]=s[c++];else a||(o[r++]=s)}return o}var Le=y(function(e,t){var a=(t=Oe(t,!1,!1)).length;if(a<1)throw new Error("bindAll must be passed function names");for(;a--;){var o=t[a];e[o]=Ie(e[o],e)}return e}),Me=y(function(e,t,a){return setTimeout(function(){return e.apply(null,a)},t)}),qe=Re(Me,te,1);function Ge(e){return function(){return!e.apply(this,arguments)}}function Ne(e,t){var a;return function(){return 0<--e&&(a=t.apply(this,arguments)),e<=1&&(t=null),a}}var De=Re(Ne,2);function Ue(e,t,a){t=ye(t,a);for(var o,r=Z(e),n=0,i=r.length;n<i;n++)if(t(e[o=r[n]],o,e))return o}function Be(n){return function(e,t,a){t=ye(t,a);for(var o=Y(e),r=0<n?0:o-1;0<=r&&r<o;r+=n)if(t(e[r],r,e))return r;return-1}}var Ve=Be(1),ze=Be(-1);function Qe(e,t,a,o){for(var r=(a=ye(a,o,1))(t),n=0,i=Y(e);n<i;){var s=Math.floor((n+i)/2);a(e[s])<r?n=s+1:i=s}return n}function He(n,i,s){return function(e,t,a){var o=0,r=Y(e);if("number"==typeof a)0<n?o=0<=a?a:Math.max(a+r,o):r=0<=a?Math.min(a+1,r):a+r+1;else if(s&&a&&r)return e[a=s(e,t)]===t?a:-1;if(t!=t)return 0<=(a=i(c.call(e,o,r),U))?a+o:-1;for(a=0<n?o:r-1;0<=a&&a<r;a+=n)if(e[a]===t)return a;return-1}}var Ke=He(1,Ve,Qe),Je=He(-1,ze);function Ye(e,t,a){var o=(W(e)?Ve:Ue)(e,t,a);if(void 0!==o&&-1!==o)return e[o]}function We(e,t,a){if(t=ge(t,a),W(e))for(r=0,n=e.length;r<n;r++)t(e[r],r,e);else for(var o=Z(e),r=0,n=o.length;r<n;r++)t(e[o[r]],o[r],e);return e}function Xe(e,t,a){t=ye(t,a);for(var o=!W(e)&&Z(e),r=(o||e).length,n=Array(r),i=0;i<r;i++){var s=o?o[i]:i;n[i]=t(e[s],s,e)}return n}function Ze(c){return function(e,t,a,o){var r=3<=arguments.length;return function(e,t,a,o){var r=!W(e)&&Z(e),n=(r||e).length,i=0<c?0:n-1;for(o||(a=e[r?r[i]:i],i+=c);0<=i&&i<n;i+=c){var s=r?r[i]:i;a=t(a,e[s],s,e)}return a}(e,ge(t,o,4),a,r)}}var et=Ze(1),tt=Ze(-1);function at(e,o,t){var r=[];return o=ye(o,t),We(e,function(e,t,a){o(e,t,a)&&r.push(e)}),r}function ot(e,t,a){t=ye(t,a);for(var o=!W(e)&&Z(e),r=(o||e).length,n=0;n<r;n++){var i=o?o[n]:n;if(!t(e[i],i,e))return!1}return!0}function rt(e,t,a){t=ye(t,a);for(var o=!W(e)&&Z(e),r=(o||e).length,n=0;n<r;n++){var i=o?o[n]:n;if(t(e[i],i,e))return!0}return!1}function nt(e,t,a,o){return W(e)||(e=oe(e)),"number"==typeof a&&!o||(a=0),0<=Ke(e,t,a)}var it=y(function(e,a,o){var r,n;return q(a)?n=a:O(a)&&(r=a.slice(0,-1),a=a[a.length-1]),Xe(e,function(e){var t=n;if(!t){if(r&&r.length&&(e=fe(e,r)),null==e)return;t=e[a]}return null==t?t:t.apply(e,o)})});function st(e,t){return Xe(e,he(t))}function ct(e,o,t){var a,r,n=-1/0,i=-1/0;if(null==o||"number"==typeof o&&"object"!=_typeof(e[0])&&null!=e)for(var s=0,c=(e=W(e)?e:oe(e)).length;s<c;s++)null!=(a=e[s])&&n<a&&(n=a);else o=ye(o,t),We(e,function(e,t,a){((r=o(e,t,a))>i||r===-1/0&&n===-1/0)&&(n=e,i=r)});return n}function lt(e,t,a){if(null==t||a)return W(e)||(e=oe(e)),e[_e(e.length-1)];var o=(W(e)?ue:oe)(e),r=Y(o);t=Math.max(Math.min(t,r),0);for(var n=r-1,i=0;i<t;i++){var s=_e(i,n),c=o[i];o[i]=o[s],o[s]=c}return o.slice(0,t)}function dt(i,t){return function(o,r,e){var n=t?[[],[]]:{};return r=ye(r,e),We(o,function(e,t){var a=r(e,t,o);i(n,e,a)}),n}}var ut=dt(function(e,t,a){G(e,a)?e[a].push(t):e[a]=[t]}),pt=dt(function(e,t,a){e[a]=t}),mt=dt(function(e,t,a){G(e,a)?e[a]++:e[a]=1}),ft=dt(function(e,t,a){e[a?0:1].push(t)},!0),ht=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function gt(e,t,a){return t in a}var vt=y(function(e,t){var a={},o=t[0];if(null==e)return a;q(o)?(1<t.length&&(o=ge(o,t[1])),t=ae(e)):(o=gt,t=Oe(t,!1,!1),e=Object(e));for(var r=0,n=t.length;r<n;r++){var i=t[r],s=e[i];o(s,i,e)&&(a[i]=s)}return a}),bt=y(function(e,a){var t,o=a[0];return q(o)?(o=Ge(o),1<a.length&&(t=a[1])):(a=Xe(Oe(a,!1,!1),String),o=function(e,t){return!nt(a,t)}),vt(e,o,t)});function yt(e,t,a){return c.call(e,0,Math.max(0,e.length-(null==t||a?1:t)))}function _t(e,t,a){return null==e||e.length<1?null==t||a?void 0:[]:null==t||a?e[0]:yt(e,e.length-t)}function $t(e,t,a){return c.call(e,null==t||a?1:t)}var Ct=y(function(e,t){return t=Oe(t,!0,!0),at(e,function(e){return!nt(t,e)})}),kt=y(function(e,t){return Ct(e,t)});function xt(e,t,a,o){$(t)||(o=a,a=t,t=!1),null!=a&&(a=ye(a,o));for(var r=[],n=[],i=0,s=Y(e);i<s;i++){var c=e[i],l=a?a(c,i,e):c;t&&!a?(i&&n===l||r.push(c),n=l):a?nt(n,l)||(n.push(l),r.push(c)):nt(r,c)||r.push(c)}return r}var jt=y(function(e){return xt(Oe(e,!0,!0))});function wt(e){for(var t=e&&ct(e,Y).length||0,a=Array(t),o=0;o<t;o++)a[o]=st(e,o);return a}var At=y(wt);function St(e,t){return e._chain?te(t).chain():t}function Tt(a){return We(ne(a),function(e){var t=te[e]=a[e];te.prototype[e]=function(){var e=[this._wrapped];return r.apply(e,arguments),St(this,t.apply(te,e))}}),te}We(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var a=o[t];te.prototype[t]=function(){var e=this._wrapped;return null!=e&&(a.apply(e,arguments),"shift"!==t&&"splice"!==t||0!==e.length||delete e[0]),St(this,e)}}),We(["concat","join","slice"],function(e){var t=o[e];te.prototype[e]=function(){var e=this._wrapped;return null!=e&&(e=t.apply(e,arguments)),St(this,e)}});var Et=Tt({__proto__:null,VERSION:e,restArguments:y,isObject:_,isNull:function(e){return null===e},isUndefined:function(e){return void 0===e},isBoolean:$,isElement:function(e){return!(!e||1!==e.nodeType)},isString:k,isNumber:x,isDate:j,isRegExp:w,isError:A,isSymbol:S,isMap:T,isWeakMap:E,isSet:P,isWeakSet:F,isArrayBuffer:R,isDataView:I,isArray:O,isFunction:q,isArguments:D,isFinite:function(e){return!S(e)&&m(e)&&!isNaN(parseFloat(e))},isNaN:U,isTypedArray:J,isEmpty:function(e){return null==e||(W(e)&&(O(e)||k(e)||D(e))?0===e.length:0===Z(e).length)},isMatch:ee,isEqual:function(e,t){return function m(e,t,a,o){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var r=_typeof(e);return("function"===r||"object"===r||"object"==_typeof(t))&&function e(t,a,o,r){t instanceof te&&(t=t._wrapped),a instanceof te&&(a=a._wrapped);var n=h.call(t);if(n!==h.call(a))return!1;switch(n){case"[object RegExp]":case"[object String]":return""+t==""+a;case"[object Number]":return+t!=+t?+a!=+a:0==+t?1/t==1/a:+t==+a;case"[object Date]":case"[object Boolean]":return+t==+a;case"[object Symbol]":return f.valueOf.call(t)===f.valueOf.call(a);case"[object ArrayBuffer]":return e(new DataView(t),new DataView(a),o,r);case"[object DataView]":var i=Q(t);if(i!==Q(a))return!1;for(;i--;)if(t.getUint8(i)!==a.getUint8(i))return!1;return!0}if(J(t))return e(new DataView(t.buffer),new DataView(a.buffer),o,r);var s="[object Array]"===n;if(!s){if("object"!=_typeof(t)||"object"!=_typeof(a))return!1;var c=t.constructor,l=a.constructor;if(c!==l&&!(q(c)&&c instanceof c&&q(l)&&l instanceof l)&&"constructor"in t&&"constructor"in a)return!1}r=r||[];for(var d=(o=o||[]).length;d--;)if(o[d]===t)return r[d]===a;if(o.push(t),r.push(a),s){if((d=t.length)!==a.length)return!1;for(;d--;)if(!m(t[d],a[d],o,r))return!1}else{var u,p=Z(t),d=p.length;if(Z(a).length!==d)return!1;for(;d--;)if(!G(a,u=p[d])||!m(t[u],a[u],o,r))return!1}return o.pop(),r.pop(),!0}(e,t,a,o)}(e,t)},keys:Z,allKeys:ae,values:oe,pairs:function(e){for(var t=Z(e),a=t.length,o=Array(a),r=0;r<a;r++)o[r]=[t[r],e[t[r]]];return o},invert:re,functions:ne,methods:ne,extend:se,extendOwn:ce,assign:ce,defaults:le,create:function(e,t){var a=de(e);return t&&ce(a,t),a},clone:ue,tap:function(e,t){return t(e),e},has:function(e,t){if(!O(t))return G(e,t);for(var a=t.length,o=0;o<a;o++){var r=t[o];if(null==e||!n.call(e,r))return!1;e=e[r]}return!!a},mapObject:function(e,t,a){t=ye(t,a);for(var o=Z(e),r=o.length,n={},i=0;i<r;i++){var s=o[i];n[s]=t(e[s],s,e)}return n},identity:pe,constant:B,noop:function(){},property:he,propertyOf:function(t){return null==t?function(){}:function(e){return O(e)?fe(t,e):t[e]}},matcher:me,matches:me,times:function(e,t,a){var o=Array(Math.max(0,e));t=ge(t,a,1);for(var r=0;r<e;r++)o[r]=t(r);return o},random:_e,now:$e,escape:xe,unescape:je,templateSettings:we,template:function(n,e,t){!e&&t&&(e=t),e=le({},e,te.templateSettings);var a,o=RegExp([(e.escape||Ae).source,(e.interpolate||Ae).source,(e.evaluate||Ae).source].join("|")+"|$","g"),i=0,s="__p+='";n.replace(o,function(e,t,a,o,r){return s+=n.slice(i,r).replace(Te,Ee),i=r+e.length,t?s+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'":a?s+="'+\n((__t=("+a+"))==null?'':__t)+\n'":o&&(s+="';\n"+o+"\n__p+='"),e}),s+="';\n",e.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{a=new Function(e.variable||"obj","_",s)}catch(n){throw n.source=s,n}function r(e){return a.call(this,e,te)}var c=e.variable||"obj";return r.source="function("+c+"){\n"+s+"}",r},result:function(e,t,a){O(t)||(t=[t]);var o=t.length;if(!o)return q(a)?a.call(e):a;for(var r=0;r<o;r++){var n=null==e?void 0:e[t[r]];void 0===n&&(n=a,r=o),e=q(n)?n.call(e):n}return e},uniqueId:function(e){var t=++Pe+"";return e?e+t:t},chain:function(e){var t=te(e);return t._chain=!0,t},iteratee:be,partial:Re,bind:Ie,bindAll:Le,memoize:function(o,r){function n(e){var t=n.cache,a=""+(r?r.apply(this,arguments):e);return G(t,a)||(t[a]=o.apply(this,arguments)),t[a]}return n.cache={},n},delay:Me,defer:qe,throttle:function(a,o,r){var n,i,s,c,l=0;r=r||{};function d(){l=!1===r.leading?0:$e(),n=null,c=a.apply(i,s),n||(i=s=null)}function e(){var e=$e();l||!1!==r.leading||(l=e);var t=o-(e-l);return i=this,s=arguments,t<=0||o<t?(n&&(clearTimeout(n),n=null),l=e,c=a.apply(i,s),n||(i=s=null)):n||!1===r.trailing||(n=setTimeout(d,t)),c}return e.cancel=function(){clearTimeout(n),l=0,n=i=s=null},e},debounce:function(a,o,r){function n(e,t){i=null,t&&(s=a.apply(e,t))}var i,s,e=y(function(e){var t;return i&&clearTimeout(i),r?(t=!i,i=setTimeout(n,o),t&&(s=a.apply(this,e))):i=Me(n,o,this,e),s});return e.cancel=function(){clearTimeout(i),i=null},e},wrap:function(e,t){return Re(t,e)},negate:Ge,compose:function(){var a=arguments,o=a.length-1;return function(){for(var e=o,t=a[o].apply(this,arguments);e--;)t=a[e].call(this,t);return t}},after:function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},before:Ne,once:De,findKey:Ue,findIndex:Ve,findLastIndex:ze,sortedIndex:Qe,indexOf:Ke,lastIndexOf:Je,find:Ye,detect:Ye,findWhere:function(e,t){return Ye(e,me(t))},each:We,forEach:We,map:Xe,collect:Xe,reduce:et,foldl:et,inject:et,reduceRight:tt,foldr:tt,filter:at,select:at,reject:function(e,t,a){return at(e,Ge(ye(t)),a)},every:ot,all:ot,some:rt,any:rt,contains:nt,includes:nt,include:nt,invoke:it,pluck:st,where:function(e,t){return at(e,me(t))},max:ct,min:function(e,o,t){var a,r,n=1/0,i=1/0;if(null==o||"number"==typeof o&&"object"!=_typeof(e[0])&&null!=e)for(var s=0,c=(e=W(e)?e:oe(e)).length;s<c;s++)null!=(a=e[s])&&a<n&&(n=a);else o=ye(o,t),We(e,function(e,t,a){((r=o(e,t,a))<i||r===1/0&&n===1/0)&&(n=e,i=r)});return n},shuffle:function(e){return lt(e,1/0)},sample:lt,sortBy:function(e,o,t){var r=0;return o=ye(o,t),st(Xe(e,function(e,t,a){return{value:e,index:r++,criteria:o(e,t,a)}}).sort(function(e,t){var a=e.criteria,o=t.criteria;if(a!==o){if(o<a||void 0===a)return 1;if(a<o||void 0===o)return-1}return e.index-t.index}),"value")},groupBy:ut,indexBy:pt,countBy:mt,partition:ft,toArray:function(e){return e?O(e)?c.call(e):k(e)?e.match(ht):W(e)?Xe(e,pe):oe(e):[]},size:function(e){return null==e?0:W(e)?e.length:Z(e).length},pick:vt,omit:bt,first:_t,head:_t,take:_t,initial:yt,last:function(e,t,a){return null==e||e.length<1?null==t||a?void 0:[]:null==t||a?e[e.length-1]:$t(e,Math.max(0,e.length-t))},rest:$t,tail:$t,drop:$t,compact:function(e){return at(e,Boolean)},flatten:function(e,t){return Oe(e,t,!1)},without:kt,uniq:xt,unique:xt,union:jt,intersection:function(e){for(var t=[],a=arguments.length,o=0,r=Y(e);o<r;o++){var n=e[o];if(!nt(t,n)){for(var i=1;i<a&&nt(arguments[i],n);i++);i===a&&t.push(n)}}return t},difference:Ct,unzip:wt,transpose:wt,zip:At,object:function(e,t){for(var a={},o=0,r=Y(e);o<r;o++)t?a[e[o]]=t[o]:a[e[o][0]]=e[o][1];return a},range:function(e,t,a){null==t&&(t=e||0,e=0),a=a||(t<e?-1:1);for(var o=Math.max(Math.ceil((t-e)/a),0),r=Array(o),n=0;n<o;n++,e+=a)r[n]=e;return r},chunk:function(e,t){if(null==t||t<1)return[];for(var a=[],o=0,r=e.length;o<r;)a.push(c.call(e,o,o+=t));return a},mixin:Tt,default:te});return Et._=Et}),$("a[href='#modal-city']").click(function(){userInteractionGMT("Abrir modal de seleção região")}),$(".js-modal-city").on("hide.bs.modal",function(){userInteractionGMT("Fechar modal de seleção região")}),$("#input-cnpj-modal").click(function(){userInteractionGMT("Selecionar CNPJ")}),$("#input-cpf-modal").click(function(){userInteractionGMT("Selecionar CPF")}),$(".js-megamenu-content").on("click","a",function(e){var t=$(this).find(".megamenu-category__link-text").text();""==t&&(t=$(this).text()),userInteractionGMT("Clique em categoria do menu",t)}),$(".js-n1-links-highlight").on("click",".megamenu-highlight-link",function(e){userInteractionGMT("Clique em categoria em destaque no menu",$(this).text())}),$(".js-category-owl-carousel").on("click","a",function(e){userInteractionGMT("Clique em categoria da home",$(this).find(".category-carousel__text").text())}),$(".js-suppliers-home-owl-carousel").on("click","a",function(e){userInteractionGMT("Clique em fornecedores da home",$(this).closest(".card--supplier-body").find(".card--supplier__name").text())}),$(".js-reorder-tag").on("click",function(e){userInteractionGMT("Clique em Refazer Pedido em Meus Pedidos")}),$(".js-search-supplier-list").on("click","a",function(e){userInteractionGMT("Seleção de fornecedores no menu",$(this).find(".search-supplier-list__name").text())}),$(".catalogue").on("click",".product-box a",function(e){var t={click:{products:[]}},a={name:$(this).find(".product-box__name").text().replace(" - "+$(this).closest(".product-box").attr("data-product-brand"),""),id:$(this).closest(".product-box").attr("data-pk"),price:$(this).find(".product-box__price--number").text().replace(",","."),brand:$(this).closest(".product-box").attr("data-product-brand"),category:$(this).closest(".product-box").attr("data-product-category"),variant:"Múltiplo de "+$(this).find(".product-box__price--multiple__number").text(),position:$(this).closest(".product-box").index()+1};t.click.products.push(a),ecommerceGMT("productClick",t)}),"undefined"!=typeof PAGE&&"product"==PAGE&&ecommerceGMT("detail",PRODUCT_DL),$(".js-institutional-link").click(function(){userInteractionGMT("Clique em link institucional no modal",$(this).text())});var opeModal=!1,select2Config={de:{minimumResultsForSearch:1/0,placeholder:"De",allowClear:!0},ate:{minimumResultsForSearch:1/0,placeholder:"Até",allowClear:!0}};$(".btn-control-box").click(function(){$(this).find("img").toggleClass("btn-rotate")});var discountCouponsValue={},totalWithDiscount=0,fieldsFilledMessage="Preencha dos dados de pagamento para poder selecionar/aplicar um cupom de desconto",hour=["07:00","07:30","08:00","08:30","09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00","21:30","22:00"];function validateCustomTime(){""!==$(".js-select-hour-init-1").val()&&""!==$(".js-select-hour-end-1").val()&&(""===$(".js-select-hour-init-2").val()||null===$(".js-select-hour-init-2").val()||""!=$(".js-select-hour-end-2").val())?$(".js-btn-custom-time").removeAttr("disabled"):$(".js-btn-custom-time").attr("disabled",!0)}function submitCheckout(){var e;IS_SELECT_DEFAULT_HOUR?$(".form-payment-checkout").submit():IS_SELECT_HOUR?($(this).val("Finalizando...").attr("disabled",!0),sendCustomTime()):(e=is_mobile?560:0,$("html, body").animate({scrollTop:e},500),580<$(document).scrollTop()?setTimeout(function(){$(".js-hour-alert").fadeIn()},500):setTimeout(function(){$(".js-hour-alert").fadeIn()},200))}function sendCustomTime(){$.ajax({url:"/api/update-user-delivery-time/",type:"POST",data:dataTime,success:function(){$(".form-payment-checkout").submit()},error:function(){$(".form-payment-checkout").submit()}})}function showAlertCupom(e){var t=$('<div class="alert alert-danger alert-dismissible fade show" role="alert" style="display:none;"><strong>Atenção!</strong> '.concat(e,' <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>'));$(".feedback-alert").append(t),t.fadeIn("slow")}function closeModalCoupons(){$("#coupons-eligible").modal("hide")}function getPaymentMethodsString(e){var t=[];return e.forEach(function(e){t.push(e.tipo)}),t.join(", ")}function couponListAddRemoveSpinner(e){var t=$(".js-coupon-spinner");"add"==e?(t.addClass("spinner-border"),t.children().addClass("sr-only"),t.parent().addClass("text-center"),t.parent().addClass("p-4")):(t.removeClass("spinner-border"),t.children().removeClass("sr-only"),t.parent().removeClass("text-center"),t.parent().removeClass("p-4"))}function onClickApplyCoupon(e){applyCoupon($(".js-item-coupon-code-".concat(e))[0].id,e)}function applyCoupon(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",i=$(".order-".concat(e)),s=i.find(".js-coupon-input-code"),c=i.find(".js-input-apply-remove-coupon");couponListAddRemoveSpinner("add");var l={order:e,coupon_code:t};$.ajax("/dashboard/payment/checkout/apply_coupon?order=".concat(l.order,"&coupon_code=").concat(l.coupon_code)).done(function(e){var t,a,o,r;e.detail.includes("applied")?(t=(""==(t=$(".valor-conveniencia.valor-conveniencia-".concat(l.order,".conveniencia-ativa")).text())||null==t?"0":t).replace(".","").replace(",","."),a=(parseFloat(e.order.total_with_discount)+parseFloat(t)).toFixed(2).toString().replace(".",","),discountCouponsValue[l.order]=parseFloat(e.order.discount),$(".total-coupom-".concat(l.order)).text(parseFloat(e.order.discount).toFixed(2).toString().replace(".",",")),$(".subtotal-value-".concat(l.order)).text(stringToCurrency(a)),$(i).find(".supplier-total-price-".concat(l.order)).text("R$ ".concat(stringToCurrency(a))),updateTotalValue(),s.val(l.coupon_code),s.prop("readonly",!0),c.attr("aplicado",!0),c.val("Remover"),$(".js-coupon-invalid-label").html("Cupom aplicado com sucesso"),closeModalCoupons(),$(".js-coupon-invalid").show(),setInterval(function(){$(".js-coupon-invalid").hide()},5e3)):e.detail.includes("removed")&&(discountCouponsValue[l.order]=parseFloat(e.order.discount),$(".total-coupom-".concat(l.order)).text(parseFloat(e.order.discount).toFixed(2).toString().replace(".",",")),o=(""==(o=$(".valor-conveniencia.valor-conveniencia-".concat(l.order,".conveniencia-ativa")).text())||null==o?"0":o).replace(".","").replace(",","."),r=0,""===n?r=(parseFloat(e.order.total_with_discount)+parseFloat(o)).toFixed(2).toString().replace(".",","):"boleto"===n&&(r=parseFloat(e.order.total_with_discount).toFixed(2).toString().replace(".",",")),$(".subtotal-value-".concat(l.order)).text(stringToCurrency(r)),$(i).find(".supplier-total-price-".concat(l.order)).text("R$ ".concat(stringToCurrency(r))),updateTotalValue(),s.removeAttr("readonly"),c.attr("aplicado",!1),c.val("Aplicar"),s.val(""),$(".js-coupon-invalid-label").html("Cupom removido com sucesso"),$(".js-coupon-invalid").show(),setInterval(function(){$(".js-coupon-invalid").hide()},5e3)),totalWithDiscount=parseFloat(e.order.total_with_discount),updateCreditCardValue(i.attr("distributor-pk")),couponListAddRemoveSpinner("remove")}).fail(function(e){couponListAddRemoveSpinner("remove"),showAlertCupom(e.responseJSON.__all__)})}function updateTotalValue(){var t,e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],a=0;Object.keys(discountCouponsValue).forEach(function(e){a+=discountCouponsValue[e]}),$(".total-coupom").text(parseFloat(a).toFixed(2).toString().replace(".",",")),e&&(t=0,$(".inicial-value").each(function(){var e=$(this).val().replace(",","."),e=parseFloat(e).toFixed(2);t=Number(t)+Number(e)}),t=parseFloat(t)-parseFloat($(".total-coupom").text()),$(".price-total-order").text(parseFloat(t).toFixed(2).toString().replace(".",",")))}function onEnterTabs(e){var a={},o=$(e).attr("href"),r=$("#".concat($(e).attr("id"))).closest(".distributor-results"),t={order:r.attr("order-pk")},n="0";switch(void 0!==screen.orientation&&o.includes("pix")?n=$("".concat(o)).find(".hidden.pay-item").attr("data-price"):o.includes("boleto")||o.includes("cotapay")?o.includes("boleto")?n=$("#nav-tab-boleto-".concat(r.attr("distributor-pk")," > a")).attr("data-price"):o.includes("cotapay")&&(n=$("#nav-tab-cotapay-".concat(r.attr("distributor-pk")," > a")).attr("data-price")):n=$(e).attr("data-price"),n=((n=parseFloat(n.replace(".","").replace(",",".")))-discountCouponsValue[t.order]).toFixed(2).toString().replace(".",","),$(".supplier-total-price-".concat(t.order)).text("R$ ".concat(stringToCurrency(n))),$(".subtotal-value-".concat(t.order)).text(stringToCurrency(stringToCurrency(n))),!0){case o.includes("cartao"):case o.includes("benefits"):fieldsFilledMessage="Preencha dos dados de pagamento para poder selecionar/aplicar um cupom de desconto",$(".coupon-".concat(t.order)).attr("blocked",!0);break;case o.includes("pix"):fieldsFilledMessage="",$(".coupon-".concat(t.order)).attr("blocked",!1);break;case o.includes("transfer"):fieldsFilledMessage="Preencha dos dados de pagamento para poder selecionar/aplicar um cupom de desconto",$(".coupon-".concat(t.order)).attr("blocked",!0)}fetch("/dashboard/payment/checkout/coupons/".concat(r.attr("order-pk"))).then(function(e){return e.json()}).then(function(e){if(e.items.forEach(function(e){!0===e.aplicado&&(a=e)}),0<Object.keys(a).length){var t=getPaymentMethodsString(a.metodos_pagamentos);switch(!0){case o.includes("boleto"):t.toLowerCase().includes("boleto")||(applyCoupon(r.attr("order-pk"),a.codigo,"boleto"),showAlertCupom("Seu cupom de desconto foi removido pois não é aceito para o método BOLETO."));break;case o.includes("cartao"):t.toLowerCase().includes("crédito")||(applyCoupon(r.attr("order-pk"),a.codigo),showAlertCupom("Seu cupom de desconto foi removido pois não é aceito para o método CARTÃO DE CRÉDITO.")),updateCreditCardValue(r.attr("distributor-pk"));break;case o.includes("benefits"):t.toLowerCase().includes("benefícios")||(applyCoupon(r.attr("order-pk"),a.codigo),showAlertCupom("Seu cupom de desconto foi removido pois não é aceito para o método CARTÃO DE BENEFÍCIOS."));break;case o.includes("pix"):t.toLowerCase().includes("pix")||(applyCoupon(r.attr("order-pk"),a.codigo),showAlertCupom("Seu cupom de desconto foi removido pois não é aceito para o método TRANFERÊNCIA PIX."));break;case o.includes("transfer"):t.toLowerCase().includes("bancária")||(applyCoupon(r.attr("order-pk"),a.codigo),showAlertCupom("Seu cupom de desconto foi removido pois não é aceito para o método TRANSFERÊNCIA BANCÁRIA."))}}}).catch(function(e){console.error(e)})}function updateCreditCardValue(e){0<totalWithDiscount&&$(".parcelas-cartao-".concat(e," > option")).each(function(){var e=Number($(this).attr("data-total-days")),t=(parseFloat(totalWithDiscount)+parseFloat($(this).attr("data-amount").replace(".","").replace(",","."))).toFixed(2),a=(t/e).toFixed(2).toString().replace(".",",");$(this).attr("data-total-price",t.toString().replace(".",",")),1==e?$(this).text("Não parcelar (1x de R$ ".concat(a," / Total: R$ ").concat(t.replace(".",","),")")):$(this).text("".concat($(this).attr("data-total-days"),"x de R$ ").concat(a," (Total: R$ ").concat(t.replace(".",","),")"))})}function showLoadingMsg(){$(".loading-msg").removeClass("hidden")}function backLoadingFixer(){document.querySelector(".js-total-products")&&parseInt(document.querySelector(".js-total-products").textContent.trim())<=0&&document.querySelector(".loading-msg").classList.add("hidden"),setTimeout(function(){document.querySelector(".loading-msg")&&!document.querySelector(".loading-msg").classList.contains("hidden")&&document.querySelector(".loading-msg").classList.add("hidden")},3e3)}function yearsLoading(e){for(var t=(new Date).getFullYear(),a="",o=t;o<t+e;o++)a=a+"<option value='"+o+"'>"+o+"</option>";return a}function validaData(e,t){var a=new Date;return t>a.getFullYear()||!!(t==a.getFullYear()&e>=a.getMonth()+1)}function verifyOrderValue(e,t){t<e?($(".js-order-error-msg").removeClass("d-none"),$(".js-btn-send-order").attr("disabled",!0)):($(".js-order-error-msg").addClass("d-none"),$(".js-btn-send-order").removeAttr("disabled"))}function floatFormat(e){var t=(t=e.replace(".","")).replace(",",".");return parseFloat(t)}function get_mask(e,t,a,o){return e.replace(/\D+/g,"").length<=11?"000.000.000-000":"00.000.000/0000-00"}$("#custom-time").on("shown.bs.modal",function(e){$(".js-hour-alert").fadeOut();var t={init:"",end:""},a={init:"",end:""};IS_SELECT_DEFAULT_HOUR&&!opeModal?(SELECTED_DATE.morning&&SELECTED_DATE.afternoon&&SELECTED_DATE.evening?(t.init="08:00",t.end="22:00"):SELECTED_DATE.morning&&SELECTED_DATE.afternoon?(t.init="08:00",t.end="18:00"):SELECTED_DATE.morning&&SELECTED_DATE.evening?(t.init="08:00",t.end="12:00",a.init="18:00",a.end="22:00"):SELECTED_DATE.afternoon&&SELECTED_DATE.evening?(t.init="12:00",t.end="22:00"):SELECTED_DATE.afternoon?(t.init="12:00",t.end="18:00"):SELECTED_DATE.morning?(t.init="08:00",t.end="12:00"):(t.init=SELECTED_DATE.time_start,t.end=SELECTED_DATE.time_end,a.init=SELECTED_DATE.time_start_sec,a.end=SELECTED_DATE.time_end_sec),$(".js-select-hour-init-1").val(t.init).change().select2(select2Config.de),$(".js-select-hour-end-1").val(t.end).change().select2(select2Config.ate),""!=a.init&&($(".js-select-hour-init-2").val(a.init).change().select2(select2Config.de),$(".js-select-hour-end-2").val(a.end).change().select2(select2Config.ate)),opeModal=!0):($(".js-select-hour-init-1, .js-select-hour-init-2").select2(select2Config.de),$(".js-select-hour-end-1, .js-select-hour-end-2").select2(select2Config.ate))}),$(".js-select-hour-init-1").change(function(){$(".js-block-second-hour").addClass("invisible");var e,t,a,o=$(this).val();""==o?$(".js-select-hour-end-1").attr("disabled",!0).select2(select2Config.ate):(e=hour.indexOf(o)+1,t=hour.length,9<=(a=hour.slice(e+7,t)).length&&($(".js-select-hour-end-1").html("<option></option>"),a.map(function(e){$(".js-select-hour-end-1").append('<option value="'+e+'">Até: '+e+"</option>")}),$(".js-select-hour-end-1").removeAttr("disabled").select2(select2Config.ate))),validateCustomTime()}),$(".js-select-hour-end-1").change(function(){$(".js-block-second-hour").addClass("invisible"),$(".js-select-hour-end-2").val("").attr("disabled",!0).select2(select2Config.ate);var e,t,a,o,r,n,i=$(this).val();""==i?$(".js-select-hour-init-2").attr("disabled",!0).select2(select2Config.de):(e=hour.indexOf($(".js-select-hour-init-1").val())+1,t=hour.indexOf(i),a=hour.length,o=hour.slice(0,e),r=hour.slice(t,a),n=[],9<=o.length&&(o=o.slice(0,o.length-8),n=9<=r.length?(r=r.slice(0,r.length-8),o.concat(r)):o),0<n.length?($(".js-select-hour-init-2").html("<option></option>"),n.map(function(e){$(".js-select-hour-init-2").append('<option value="'+e+'">De: '+e+"</option>")}),$(".js-select-hour-init-2").removeAttr("disabled").select2(select2Config.de),$(".js-block-second-hour").removeClass("invisible")):9<=r.length&&(r=r.slice(0,r.length-8),$(".js-select-hour-init-2").html("<option></option>"),r.map(function(e){$(".js-select-hour-init-2").append('<option value="'+e+'">De: '+e+"</option>")}),$(".js-select-hour-init-2").removeAttr("disabled").select2(select2Config.de),$(".js-block-second-hour").removeClass("invisible"))),validateCustomTime()}),$(".js-select-hour-init-2").change(function(){var e,t,a,o,r,n,i=$(this).val();""==i?$(".js-select-hour-end-2").val("").attr("disabled",!0).select2(select2Config.ate):(e=hour.indexOf($(".js-select-hour-init-1").val())+1,t=hour.indexOf(i),a=hour.length,o=hour.slice(0,e),r=hour.slice(t,a),n=[],o.includes(i)?n=o.slice(8,o.length):9<=r.length&&(n=r.slice(8,r.length)),$(".js-select-hour-end-2").html("<option></option>"),n.map(function(e){$(".js-select-hour-end-2").append('<option value="'+e+'">Até: '+e+"</option>")}),$(".js-select-hour-end-2").removeAttr("disabled").select2(select2Config.ate)),validateCustomTime()}),$(".js-select-hour-end-2").change(function(){validateCustomTime()}),$(".js-btn-custom-time").click(function(){var e="De "+$(".js-select-hour-init-1").val()+"h às "+$(".js-select-hour-end-1").val()+"h",t="";dataTime.time_start=$(".js-select-hour-init-1").val(),dataTime.time_end=$(".js-select-hour-end-1").val(),dataTime.time_start_sec=null,dataTime.time_end_sec=null,""!=$(".js-select-hour-init-2").val()&&null!=$(".js-select-hour-init-2").val()&&(t=" ou de "+$(".js-select-hour-init-2").val()+"h às "+$(".js-select-hour-end-2").val()+"h",dataTime.time_start_sec=$(".js-select-hour-init-2").val(),dataTime.time_end_sec=$(".js-select-hour-end-2").val()),dataTime.morning=null,dataTime.afternoon=null,dataTime.evening=null,$(".js-custom-time-text").text(e+t),$(".js-default-time-block").addClass("d-none"),$(".js-custom-time-block").removeClass("d-none"),$("#custom-time").modal("hide"),"profile"==PAGE&&($("#id_time_start").val(dataTime.time_start),$("#id_time_end").val(dataTime.time_end),$("#id_time_start_sec").val(null==dataTime.time_start_sec?"":dataTime.time_start_sec),$("#id_time_end_sec").val(null==dataTime.time_end_sec?"":dataTime.time_end_sec),$("#id_morning").prop("checked",!1),$("#id_afternoon").prop("checked",!1),$("#id_evening").prop("checked",!1)),IS_SELECT_HOUR=!0,IS_SELECT_DEFAULT_HOUR=!1}),$(".js-hour-check").change(function(){$(".js-hour-alert").fadeOut(),$("#hour-8-12").is(":checked")||$("#hour-12-18").is(":checked")?$("#hour-18-22").removeAttr("disabled").closest(".hour-option").removeClass("disabled"):$("#hour-18-22").attr("disabled",!0).closest(".hour-option").addClass("disabled"),dataTime.morning=$("#hour-8-12").is(":checked"),dataTime.afternoon=$("#hour-12-18").is(":checked"),dataTime.evening=$("#hour-18-22").is(":checked"),dataTime.time_start=null,dataTime.time_end=null,dataTime.time_start_sec=null,dataTime.time_end_sec=null,IS_SELECT_HOUR=0<$(".js-hour-check:checked:enabled").length,"profile"==PAGE&&($("#hour-8-12").is(":checked")?$("#id_morning").prop("checked",!0):$("#id_morning").prop("checked",!1),$("#hour-12-18").is(":checked")?$("#id_afternoon").prop("checked",!0):$("#id_afternoon").prop("checked",!1),$("#hour-18-22").is(":checked")?$("#id_evening").prop("checked",!0):$("#id_evening").prop("checked",!1))}),$(".btn-finalizar-pedido").click(function(e){e.preventDefault();var t=0;if(is_mobile){var a=$(".sanfona-cotapay");for(i=0;i<a.length;i++)$(".sanfona-cotapay:eq(".concat(i,")")).parent().hasClass("active")&&(t+=parseFloat($(".sanfona-cotapay:eq(".concat(i,")")).parent().find(".pay-item.active").attr("data-price").replace(",",".")))}else{var a=_toConsumableArray(document.getElementsByClassName("cotapay-tab")),o=[];a.forEach(function(e){e.classList.contains("active")&&o.push(e.getAttribute("href").slice(1))}),o.forEach(function(e){t+=parseFloat($("#nav-tab-".concat(e," .active")).attr("data-price").replace(",","."))})}t>TRADEMASTER_BALANCE?showAlertCupom("O valor das suas compras por crédito pré-aprovado supera o seu saldo disponível."):submitCheckout()}),$(".partner-coupons").on("click",function(){$("#coupons-eligible").modal("show")}),$(".js-hour-alert-btn-close").click(function(){$(".js-hour-alert").fadeOut()}),is_mobile?($(".baloon-reserva").on("click",function(){$(".info-reserva").toggle(),$(this).children(".arrowDown").toggle()}),$(".baloon-conveniencia").on("click",function(){$(".info-conveniencia").toggle(),$(this).children(".arrowDown").toggle()})):$(".info-baloon").on("mouseover",function(){$(this).children("span").css("display","block"),$(this).children(".arrowDown").css("display","block")}).on("mouseout",function(){$(this).children("span").hide(),$(this).children(".arrowDown").hide()}),$(".js-input-apply-remove-coupon").on("click",function(a){var n,i=$(a.target).closest(".distributor-results"),s=i.find(".js-coupon-input-code"),c=i.find(".js-input-apply-remove-coupon");""!==s.val()&&null!==s.val()&&(n={order:i.attr("order-pk"),coupon_code:s.val()?s.val():""},"true"==$(".coupon-".concat(n.order)).attr("blocked")?showAlertCupom(fieldsFilledMessage):$.ajax("/dashboard/payment/checkout/apply_coupon?order=".concat(n.order,"&coupon_code=").concat(n.coupon_code)).fail(function(e){var t="";throw 400===e.status?t=e.responseJSON.__all__:500===e.status&&(t="Erro ao processar a solicitação"),$(a.target).closest(".border-style").addClass("error"),$(".js-coupon-invalid-label").html(t),$(".js-coupon-invalid-label").removeClass("color-green"),$(".js-coupon-invalid").show(),setInterval(function(){$(".js-coupon-invalid").hide(),$(".js-coupon-invalid-label").addClass("color-green")},5e3),s.val(""),new Error}).done(function(e){var t,a,o,r;e.detail.includes("applied")?(discountCouponsValue[n.order]=parseFloat(e.order.discount),$(".total-coupom-".concat(n.order)).text(parseFloat(e.order.discount).toFixed(2).toString().replace(".",",")),t=(""==(t=$(".valor-conveniencia.valor-conveniencia-".concat(n.order,".conveniencia-ativa")).text())||null==t?"0":t).replace(".","").replace(",","."),a=(parseFloat(e.order.total_with_discount)+parseFloat(t)).toFixed(2).toString().replace(".",","),$(".subtotal-value-".concat(n.order)).text(stringToCurrency(a)),$(i).find(".supplier-total-price-".concat(n.order)).text("R$ ".concat(stringToCurrency(a))),updateTotalValue(),s.prop("readonly",!0),c.attr("aplicado",!0),c.val("Remover"),$(".js-coupon-invalid-label").html("Cupom aplicado com sucesso"),$(".js-coupon-invalid").show(),setInterval(function(){$(".js-coupon-invalid").hide()},5e3)):e.detail.includes("removed")&&(discountCouponsValue[n.order]=parseFloat(e.order.discount),$(".total-coupom-".concat(n.order)).text(parseFloat(e.order.discount).toFixed(2).toString().replace(".",",")),o=(""==(o=$(".valor-conveniencia.valor-conveniencia-".concat(n.order,".conveniencia-ativa")).text())||null==o?"0":o).replace(".","").replace(",","."),r=(parseFloat(e.order.total_with_discount)+parseFloat(o)).toFixed(2).toString().replace(".",","),$(".subtotal-value-".concat(n.order)).text(stringToCurrency(r)),$(i).find(".supplier-total-price-".concat(n.order)).text("R$ ".concat(stringToCurrency(r))),updateTotalValue(),s.removeAttr("readonly"),c.attr("aplicado",!1),c.val("Aplicar"),s.val(""),$(".js-coupon-invalid-label").html("Cupom removido com sucesso"),$(".js-coupon-invalid").show(),setInterval(function(){$(".js-coupon-invalid").hide()},5e3)),totalWithDiscount=parseFloat(e.order.total_with_discount),updateCreditCardValue(i.attr("distributor-pk")),updateTotalValue(i.attr("distributor-pk"))}))}),$(".partner-coupons").on("click",function(e){var o="",r=$(e.target).closest(".distributor-results").attr("order-pk");couponListAddRemoveSpinner("add"),fetch("/dashboard/payment/checkout/coupons/".concat(r)).then(function(e){return e.json()}).then(function(e){e.items.forEach(function(e){var t=getPaymentMethodsString(e.metodos_pagamentos);o+='<div class="row border-top mx-0">\n                        <div id="'.concat(r,'" class="col-12 js-item-coupon-code-').concat(e.codigo,'">\n                            <div class="row mt-3">\n                                <div class="col-8">\n                                    <span>Vendedor(a): <strong class="font-weight-bold">').concat(e.fornecedor,'</strong></span>\n                                </div>\n                                <div class="col-4 text-right" ').concat(!1===e.aplicado?'style="display:none"':"",'>\n                                    <span class="badge badge-success">Aplicado</span>\n                                </div>\n                            </div>\n                            <div class="row mt-2">\n                                <div class="col-12">\n                                    <span>Nome: <strong class="font-weight-bold">').concat(e.nome,'</strong></span>\n                                </div>\n                            </div>\n                            <div class="row mt-2 mb-0">\n                                <div class="col-6">\n                                    <span class="font-weight-bold">R$ ').concat(String(parseFloat(e.valor).toFixed(2)).replace(".",","),'</span> de desconto</span>\n                                </div>\n                                <div class="col-6 text-right">\n                                    <a id="').concat(e.codigo,'" class="couponListApply cursor-pointer secondary" onClick="').concat(!1===e.aplicado?"onClickApplyCoupon(event.target.id);":"closeModalCoupons();",'">Aplicar desconto</a>\n                                </div>\n                            </div>\n                            <div class="row mb-3">\n                                <div class="col-12 mt-2">\n                                    <small class="pl-4">Disponível para: ').concat(t,"</small>\n                                </div>\n                            </div>\n                        </div>\n                    </div>")});var t='\n        <div class="row border-top mx-0">\n            <div class="col-12 my-3 text-center">\n                <span>'.concat(fieldsFilledMessage,".</span>\n            </div>\n        </div>\n        "),a=$(".coupon-".concat(r)).attr("blocked");o="true"==a?t:""!==o?o:'\n            <div class="row border-top mx-0">\n                <div class="col-12 my-3 text-center">\n                    <span>Nenhum cupom disponível</span>\n                </div>\n            </div>\n        ',$(".js-list-coupons").empty(),$(".js-list-coupons").append(o),couponListAddRemoveSpinner("remove")}).catch(function(e){console.error(e),couponListAddRemoveSpinner("remove")})}),jQuery(function(){$(".js-input-apply-remove-coupon").each(function(){var r=this,n=$(this).closest(".distributor-results"),i={order:n.attr("order-pk")},e=stringToCurrency($(".supplier-total-price-".concat(i.order)).text().replace("R$ ",""));"NaN"!=e&&$(".supplier-total-price-".concat(i.order)).text(e),discountCouponsValue[i.order]=0,fetch("/dashboard/payment/checkout/coupons/".concat(i.order)).then(function(e){return e.json()}).then(function(e){e.items.forEach(function(e){var t,a,o;!0===e.aplicado&&((t=n.find(".js-coupon-input-code")).val(e.codigo),t.prop("readonly","true"),$(r).val("Remover"),discountCouponsValue[i.order]=parseFloat(e.valor),a=$(".supplier-total-price-".concat(i.order)).text().replace("R$ ","").replace(".","").replace(",","."),o=stringToCurrency((parseFloat(a)-discountCouponsValue[i.order]).toFixed(2).toString()),$(".supplier-total-price-".concat(i.order)).text("R$ ".concat(o)))}),updateTotalValue(!CHANGE_PAYMENT_METHOD_IN_PROGRESS)}).catch(function(e){console.error(e)})})}),$(".js-back-checkout").on("click",function(){$("#coupons-eligible").modal("hide")}),void 0!==screen.orientation&&$(".d-flex.aba-sanfona").on("click",function(e){onEnterTabs(e.currentTarget)}),$('a[data-toggle="tab"]').on("shown.bs.tab",function(e){onEnterTabs(e.target)}),$(".parcelas-cartao").on("change",function(e){var t=$(e.target).closest(".distributor-results"),a=$(this).find("option").filter(":selected").attr("data-total-days"),o=!1,r={};fetch("/dashboard/payment/checkout/coupons/".concat(t.attr("order-pk"))).then(function(e){return e.json()}).then(function(e){e.items.forEach(function(e){!0===e.aplicado&&(r=e)}),0<Object.keys(r).length&&(r.metodos_pagamentos.forEach(function(e){e.tipo.toLowerCase().includes("credito")&&e.total_dias==a&&(o=!0)}),o||(applyCoupon(t.attr("order-pk"),r.codigo),showAlertCupom("Seu cupom de desconto foi removido pois não é aceito para a nova quantidade de parcelas.")))}).catch(function(e){console.error(e)})}),$(document).ready(function(){localStorage.accept_cookies||$(".js-cookies").fadeIn(),$(".js-cookies-alert-btn").click(function(e){e.preventDefault(),localStorage.setItem("accept_cookies",!0),$(".js-cookies").fadeOut()})}),function(e,d){var o,t=e.jQuery||e.Cowboy||(e.Cowboy={});t.throttle=o=function(r,n,i,s){var c,l=0;function e(){var e=this,t=new Date-l,a=arguments;function o(){l=+new Date,i.apply(e,a)}s&&!c&&o(),c&&clearTimeout(c),s===d&&r<t?o():!0!==n&&(c=setTimeout(s?function(){c=d}:o,s===d?r-t:r))}return"boolean"!=typeof n&&(s=i,i=n,n=d),t.guid&&(e.guid=i.guid=i.guid||t.guid++),e},t.debounce=function(e,t,a){return a===d?o(e,t,!1):o(e,a,!1!==t)}}(this),$(".js-show-loading").click(function(){showLoadingMsg()}),backLoadingFixer(),window.onbeforeunload=function(){backLoadingFixer()},$(document).ready(function(){$(".repeat-card").on("change",function(){var e=$(this).closest(".tab-pane").find(".card-cpf"),t=$(this).closest(".tab-pane").find(".card-number"),a=$(this).closest(".tab-pane").find(".card-name"),o=$(this).closest(".tab-pane").find(".card-ccv"),r=$(this).closest(".tab-pane").find(".card-month"),n=$(this).closest(".tab-pane").find(".card-year"),i=$(this).closest(".tab-pane").find(".parcelas-cartao"),s=$(this).closest(".tab-pane").hasClass("js-is-credit")?$(".js-is-credit"):$(".js-is-benefits"),c=!!$(this).closest(".tab-pane").hasClass("js-is-credit");if($(this).is(":checked"))if(validateCPF(e.cleanVal())&15<=t.cleanVal().length&5<=a.val().length&3<=o.val().length&validaData(r.val(),n.val())){s.find(".card-cpf").val(e.val()),s.find(".card-number").val(t.val()),s.find(".card-name").val(a.val()),s.find(".card-month").val(r.val()),s.find(".card-year").val(n.val()),s.find(".card-ccv").val(o.val()),s.find(".parcelas-cartao option[data-total-days='"+i.find("option:selected").attr("data-total-days")+"']").prop("selected",!0),s.find(".repeat-card").attr("checked","checked"),s.find(".repeat-card").prop("checked",!0),s.find(".p-success-card").show();var l=$("#id_form-TOTAL_FORMS").val();if(0<l)for(var d,u=0;u<l;u++){$("input[name='form-"+u+"-distributor_payment_method']").is(":checked")||(d=$("input[name='form-"+u+"-distributor_payment_method']").closest(".payment-method-card-body"),c?d.find(".benefits-card-tab").hasClass("active")||(d.find(".credit-card-tab").click(),d.find(".js-is-credit .parcelas-cartao").change()):d.find(".credit-card-tab").hasClass("active")||(d.find(".benefits-card-tab").click(),d.find(".js-is-benefits .parcelas-cartao").change()))}}else $(this).closest(".tab-pane").find(".repeat-card").removeAttr("checked"),$(this).closest(".tab-pane").find(".repeat-card").prop("checked",!1),$(this).closest(".tab-pane").find(".p-success-card").hide();else{var p=t.val(),m=e.val(),f=a.val(),h=r.val(),g=n.val(),v=o.val();GPlots=i.find("option:selected").attr("data-total-days"),s.find(".card-number").val(""),s.find(".card-cpf").val(""),s.find(".card-name").val(""),s.find(".card-month").val("01"),s.find(".card-year").val("2018"),s.find(".card-ccv").val(""),s.find(".single-method").find(".pay-item input").removeAttr("checked"),s.find(".single-method").find(".pay-item input").prop("checked",!1),s.find(".parcelas-cartao option[data-total-days='1']").prop("selected",!0),t.val(p),e.val(m),a.val(f),r.val(h),n.val(g),o.val(v),$(this).closest(".tab-pane").find(".parcelas-cartao option[data-total-days='"+GPlots+"']").prop("selected",!0),s.find(".repeat-card").removeAttr("checked"),s.find(".repeat-card").prop("checked",!1),s.find(".p-success-card").hide(),$(".payment-method-card-body").each(function(){c?$(this).find(".credit-card-tab").hasClass("active")&&$(this).find(".credit-card-tab").click():$(this).find(".benefits-card-tab").hasClass("active")&&$(this).find(".benefits-card-tab").click()})}}),$(".aba-sanfona").on("click",function(){$(this).hasClass("active")||($(this).parent("li").index(),$(this).closest("ul").find("li").removeClass("active"),$(this).parent("li").addClass("active")),$(this).hasClass("sanfona-boleto")?$(this).closest(".distributor-results").find(".metodo-pagamento").html("Boleto a prazo"):$(this).hasClass("sanfona-credito")?($(this).closest(".distributor-results").find(".metodo-pagamento").html("Cartão de Crédito"),IS_SINGLE_DISTRIBUTOR&&$(this).siblings(".content-payment").children(".pay-item").children(".input-credit-card").click()):$(this).hasClass("sanfona-vr")?$(this).closest(".distributor-results").find(".metodo-pagamento").html("Cartão de Benefícios"):$(this).hasClass("sanfona-pix")?($(this).closest(".distributor-results").find(".metodo-pagamento").html("Transferência via Pix"),$(this).siblings(".content-payment").children(".pay-item").children(".input-pix").click()):$(this).hasClass("sanfona-transfer")&&$(this).closest(".distributor-results").find(".metodo-pagamento").html("Transferência Bancária")}),$(".credit-card-tab, .benefits-card-tab, .pix-tab, .transfer-tab, .boleto-tab, .cotapay-tab").click(function(){var e,t,a,o,r,n,s,c,l,d,u,p,m,f,h,g;$(this).hasClass("credit-card-tab")?(e=".js-is-credit",$(this).closest(".distributor-results").find(".metodo-pagamento").html("Cartão de Crédito")):$(this).hasClass("benefits-card-tab")?($(this).closest(".distributor-results").find(".metodo-pagamento").html("Cartão de Benefícios"),e=".js-is-benefits"):$(this).hasClass("pix-tab")?($(this).closest(".distributor-results").find(".metodo-pagamento").html("Transferência via Pix"),e=".js-is-pix"):$(this).hasClass("transfer-tab")?($(this).closest(".distributor-results").find(".metodo-pagamento").html("Transferência Bancária"),e=".js-is-transfer"):$(this).hasClass("boleto-tab")?$(this).closest(".distributor-results").find(".metodo-pagamento").html("Boleto a prazo"):$(this).hasClass("cotapay-tab")&&$(this).closest(".distributor-results").find(".metodo-pagamento").html("Crédito Pré-aprovado"),$(this).closest(".payment-method-card-body").find(e+" .repeat-card").is(":checked")?$("#"+$(this).closest(".payment-method-card-body").find(e+" .parcelas-cartao").val()).closest(".pay-item").click():($(this).closest(".distributor-results").find(".pay-item").removeClass("active"),$(this).closest(".distributor-results").find(".supplier-total-price").text("R$ "+$(this).attr("data-price")),$(this).closest(".distributor-results").find(".inicial-value").val($(this).attr("data-price")),t=0,$(".inicial-value").each(function(){var e=$(this).val().replace(",","."),e=parseFloat(e).toFixed(2);t=Number(t)+Number(e)}),t=parseFloat(t)-parseFloat($(".total-coupom").text()),$(".price-total-order").text(stringToCurrency(parseFloat(t).toFixed(2).toString())),$(this).hasClass("pix-tab")?$($(this).attr("href")+" .pix-form .pay-item").click():$(this).hasClass("transfer-tab")?(a=$($(this).attr("href")).find(".transfer_bank").val(),o=$($(this).attr("href")).find(".transfer-document").val(),r=$($(this).attr("href")).find(".transfer-agency").val().length,n=$($(this).attr("href")).find(".transfer-account").val().length,""!=a&validateCPF(o)&3<=r&3<=n?$($(this).attr("href")+" .transfer-form .pay-item").click():($(this).closest(".distributor-results").find(":radio").attr("checked","false"),$(this).closest(".distributor-results").find(":radio").prop("checked",!1),$(".btn-finalizar-pedido").attr("disabled","true"),$(this).find(":radio").attr("checked","true"),$(this).find(":radio").prop("checked",!0)),$(this).closest(".single-method").find(".validate-payment").addClass("hidden")):!1===IS_SINGLE_DISTRIBUTOR&&($(this).hasClass("credit-card-tab")||$(this).hasClass("benefits-card-tab"))?(s=$($(this).attr("href")).find(".card-number").cleanVal().length,m=$($(this).attr("href")).find(".card-name").val().length,c=$($(this).attr("href")).find(".card-month").val(),l=$($(this).attr("href")).find(".card-year").val(),d=$($(this).attr("href")).find(".card-ccv").val().length,u=$($(this).attr("href")).find(".card-cpf"),p=$($(this).attr("href")).find(".parcelas-cartao").val(),15<=s&5<=m&3<=d&validaData(c,l)&validateCPF(u.cleanVal())?($("#"+p).closest(".pay-item").click(),$(this).closest(".single-method").find(".validate-payment").removeClass("hidden")):($(this).closest(".distributor-results").find(":radio").attr("checked","false"),$(this).closest(".distributor-results").find(":radio").prop("checked",!1),$(".btn-finalizar-pedido").attr("disabled","true"),$(this).find(":radio").attr("checked","true"),$(this).find(":radio").prop("checked",!0),$(this).closest(".single-method").find(".validate-payment").addClass("hidden"))):!0===IS_SINGLE_DISTRIBUTOR&&$(this).hasClass("credit-card-tab")?(u=$($(this).attr("href")).find(".card-cpf"),p=$($(this).attr("href")).find(".parcelas-cartao").val(),m=$($(this).attr("href")).find(".card-name").val().length,f=$("#paypal_credit_card_nonce").val().length,5<=m&&validateCPF(u.cleanVal())&&5<=f?($("#"+p).closest(".pay-item").click(),$(this).closest(".single-method").find(".validate-payment").removeClass("hidden")):($(this).closest(".distributor-results").find(":radio").attr("checked","false"),$(this).closest(".distributor-results").find(":radio").prop("checked",!1),$(".btn-finalizar-pedido").attr("disabled","true"),$(this).find(":radio").attr("checked","true"),$(this).find(":radio").prop("checked",!0),$(this).closest(".single-method").find(".validate-payment").addClass("hidden")),$("#open-paypal").off("click"),$("#open-paypal").on("click",function(e){e.preventDefault(),$("#paypal-modal").modal("show")}),$("#submit-modal-paypal").off("click"),$("#submit-modal-paypal").on("click",function(){$("#paypal-form").trigger("submit")})):$(this).hasClass("boleto-tab")?(h=$(this).closest(".distributor-results").attr("distributor-pk"),$("#".concat($("#nav-tab-boleto-".concat(h," > a")).attr("id"))).trigger("click")):$(this).hasClass("cotapay-tab")&&(g=$(this).closest(".distributor-results").attr("distributor-pk"),$("#".concat($("#nav-tab-cotapay-".concat(g," > a")).attr("id"))).trigger("click"),$(".remainingBalance").html("R$ ".concat(parseFloat(TRADEMASTER_BALANCE).toFixed(2).replace(".",","))))),$(this).hasClass("cotapay-tab")||($(this).closest(".card-body").find(".valor-conveniencia").removeClass("conveniencia-ativa"),$($(this).attr("href")).find(".valor-conveniencia").addClass("conveniencia-ativa"));var v=$(".conveniencia-ativa"),b=0;for(i=0;i<v.length;i++)b+=parseFloat(v[i].innerText.replace(",","."));$(".total-conveniencia").text(b.toFixed(2).toString().replace(".",",")),$(this).closest(".card-body").find(".valor-reserva").removeClass("reserva-ativa"),$($(this).attr("href")).find(".valor-reserva").addClass("reserva-ativa");var y=$(".reserva-ativa"),_=0;for(i=0;i<y.length;i++)_+=parseFloat(y[i].innerText.replace(",","."));0<_?($(".container-valor-reserva").show(),$(".total-reserva").text(_.toFixed(2).toString().replace(".",","))):$(".container-valor-reserva").hide()}),$(".pay-item").click(function(){var s=this;$(this).parents(".pagtos-mobile").find(".valor-conveniencia").removeClass("conveniencia-ativa"),$(this).parents(".payment-method-content").find(".valor-conveniencia").removeClass("conveniencia-ativa"),$(this).parents(".single-method").find(".valor-conveniencia").addClass("conveniencia-ativa"),$($(this).attr("href")).find(".valor-conveniencia").addClass("conveniencia-ativa"),$($(this).attr("href")).find(".valor-reserva").addClass("reserva-ativa");var e=$(".conveniencia-ativa"),t=0;for(i=0;i<e.length;i++)t+=parseFloat(e[i].innerText.replace(",","."));$(".total-conveniencia").text(t.toFixed(2).toString().replace(".",",")),$(this).parents(".pagtos-mobile").find(".valor-reserva").removeClass("reserva-ativa"),$(this).parents(".payment-method-content").find(".valor-reserva").removeClass("reserva-ativa"),$(this).parents(".single-method").find(".valor-reserva").addClass("reserva-ativa");var a=$(".reserva-ativa"),o=0;for(i=0;i<a.length;i++)o+=parseFloat(a[i].innerText.replace(",","."));0<o?($(".container-valor-reserva").show(),$(".total-reserva").text(o.toFixed(2).toString().replace(".",","))):$(".container-valor-reserva").hide(),$(this).closest(".distributor-results").find(".metodo-pagamento").html($(this).attr("data-payment-name")),$(this).find(":radio").attr("checked","checked"),$(this).find(":radio").prop("checked",!0),new Promise(function(e,t){var a,o;$(s).hasClass("active")||(a=$(s).find(":radio").val(),o=$(s).closest(".distributor-results").find(".js-payment-status-pk").val(),response=setPaymentMethodCheckout(a,o),e(response))}).then(function(e){$("#"+$(s).closest(".tab-pane").attr("aria-labelledby")).find("input").attr("checked","checked").prop("checked",!0);var t=$(s).find(":radio").attr("name");$("input[name='"+t+"']").parent().removeClass("active"),$(s).closest(".distributor-results").find(".supplier-total-price").text().includes("De")&&$(s).closest(".distributor-results").find(".supplier-total-price").text("R$ "+$(s).attr("data-price")),$(s).closest(".distributor-results").find(".inicial-value").val($(s).attr("data-price"));var a=$("#id_form-TOTAL_FORMS").val(),o=0;$(".inicial-value").each(function(){var e=$(this).val().replace(",","."),e=parseFloat(e).toFixed(2);o=Number(o)+Number(e)}),o=parseFloat(o)-parseFloat($(".total-coupom").text()),$(".price-total-order").text(stringToCurrency(parseFloat(o).toFixed(2).toString()));var r=!0;if(0<a)for(var n=0;n<a;n++)$("input[name='form-"+n+"-distributor_payment_method']").is(":checked")||(r=!1);r&&($(".btn-finalizar-pedido").removeAttr("disabled"),$(".msg-oder-error").slideUp())})}),$(".remove-supplier-checkout").click(function(e){return e.preventDefault(),$.ajax({type:"GET",url:$(this).attr("href"),contentType:"application/json",datatype:"html",success:function(e){e.deleted&&window.location.reload()}}),!1}),$.fn.mask&&($(".card-cpf").mask("000.000.000-00"),$("#paypal-cpf").mask("000.000.000-00"),$(".card-number").mask("0000 0000 0000 0000"),$(".card-ccv").mask("0000"),$(".card-year").html(yearsLoading(11)),$(".transfer-agency").mask("0000000"),$(".transfer-account").mask("#-0",{reverse:!0}),$(".transfer-document").mask(get_mask,{onKeyPress:function(e,t,a,o){a.mask(get_mask,o)}})),$(".transfer-document").keyup(function(){var e,t,a;validateCPF($(this).cleanVal())||validateCNPJ($(this).cleanVal())?($(this).popover("dispose"),e=$(this).closest(".single-method").find(".transfer_bank"),t=$(this).closest(".single-method").find(".transfer-agency"),a=$(this).closest(".single-method").find(".transfer-account"),""!=e.val()&3<=t.val().length&t.val().length<=8&3<=a.val().length&a.val().length<=12&&($(this).closest(".single-method").find(".pay-item").click(),$(this).closest(".single-method").find(".validate-payment").removeClass("hidden"))):(11==$(this).cleanVal().length||14==$(this).cleanVal().length?($(this).attr("data-container","body"),$(this).attr("data-toggle","popover"),$(this).attr("data-placement","bottom"),$(this).attr("data-content","Documento inválido"),$(this).popover().popover("show")):$(this).popover("dispose"),$(this).closest(".single-method").find(".pay-item .input-transfer").removeAttr("checked"),$(this).closest(".single-method").find(".pay-item .input-transfer").prop("checked",!1),$(".btn-finalizar-pedido").attr("disabled","true"),$(this).closest(".single-method").find(".validate-payment").addClass("hidden"));var o=$(".js-is-transfer");o.find(".repeat-card").removeAttr("checked"),o.find(".repeat-card").prop("checked",!1),o.find(".p-success-card").hide()}),$(".transfer_bank").change(function(){var e,t,a;""!=$(this).val()?($(this).popover("dispose"),e=$(this).closest(".single-method").find(".transfer-account"),t=$(this).closest(".single-method").find(".transfer-agency"),(validateCPF((a=$(this).closest(".single-method").find(".transfer-document")).cleanVal())||validateCNPJ(a.cleanVal()))&3<=t.val().length&t.val().length<=8&3<=e.val().length&e.val().length<=12&&($(this).closest(".single-method").find(".pay-item").click(),$(this).closest(".single-method").find(".validate-payment").removeClass("hidden"))):($(this).attr("data-container","body"),$(this).attr("data-toggle","popover"),$(this).attr("data-placement","bottom"),$(this).attr("data-content","Selecione um banco"),$(this).popover().popover("show"),$(this).closest(".single-method").find(".pay-item .input-transfer").removeAttr("checked"),$(this).closest(".single-method").find(".pay-item .input-transfer").prop("checked",!1),$(".btn-finalizar-pedido").attr("disabled","true"),$(this).closest(".single-method").find(".validate-payment").addClass("hidden"));var o=$(".js-is-transfer");o.find(".repeat-card").removeAttr("checked"),o.find(".repeat-card").prop("checked",!1),o.find(".p-success-card").hide()}),$(".transfer-agency").keyup(function(){var e,t,a,o;1<=$(this).val().length&$(this).val().length<=8?($(this).popover("dispose"),e=$(this).closest(".single-method").find(".transfer_bank"),t=$(this).closest(".single-method").find(".transfer-account"),o=validateCPF((a=$(this).closest(".single-method").find(".transfer-document")).cleanVal())||validateCNPJ(a.cleanVal()),""!=e.val()&o&3<=t.val().length&t.val().length<=12&&($(this).closest(".single-method").find(".pay-item").click(),$(this).closest(".single-method").find(".validate-payment").removeClass("hidden"))):($(this).attr("data-container","body"),$(this).attr("data-toggle","popover"),$(this).attr("data-placement","bottom"),$(this).attr("data-trigger","manual"),$(this).attr("data-content","Número de agência inválido"),$(this).popover().popover("show"),$(this).closest(".single-method").find(".pay-item .input-transfer").removeAttr("checked"),$(this).closest(".single-method").find(".pay-item .input-transfer").prop("checked",!1),$(".btn-finalizar-pedido").attr("disabled","true"),$(this).closest(".single-method").find(".validate-payment").addClass("hidden"));var r=$(".js-is-transfer");r.find(".repeat-card").removeAttr("checked"),r.find(".repeat-card").prop("checked",!1),r.find(".p-success-card").hide()}),$(".transfer-account").keyup(function(){var e,t,a,o;3<=$(this).val().length&$(this).val().length<=12?($(this).popover("dispose"),e=$(this).closest(".single-method").find(".transfer_bank"),t=$(this).closest(".single-method").find(".transfer-agency"),o=validateCPF((a=$(this).closest(".single-method").find(".transfer-document")).cleanVal())||validateCNPJ(a.cleanVal()),""!=e.val()&o&3<=t.val().length&t.val().length<=12&&($(this).closest(".single-method").find(".pay-item").click(),$(this).closest(".single-method").find(".validate-payment").removeClass("hidden"))):($(this).attr("data-container","body"),$(this).attr("data-toggle","popover"),$(this).attr("data-placement","bottom"),$(this).attr("data-content","Número de conta inválido"),$(this).popover().popover("show"),$(this).closest(".single-method").find(".pay-item .input-transfer").removeAttr("checked"),$(this).closest(".single-method").find(".pay-item .input-transfer").prop("checked",!1),$(".btn-finalizar-pedido").attr("disabled","true"),$(this).closest(".single-method").find(".validate-payment").addClass("hidden"));var r=$(".js-is-transfer");r.find(".repeat-card").removeAttr("checked"),r.find(".repeat-card").prop("checked",!1),r.find(".p-success-card").hide()}),$(".card-cpf").keyup(function(){var e,t,a,o,r,n,i;validateCPF($(this).cleanVal())&&!0===IS_SINGLE_DISTRIBUTOR?(a=$(this).closest(".single-method").find(".card-name"),i=$(this).closest(".single-method").find(".parcelas-cartao"),e=$("#paypal_credit_card_nonce"),5<=a.val().length&&5<=e.val().length&&($("#"+i.val()).closest(".pay-item").click(),$(this).popover("hide"),$(this).closest(".single-method").find(".validate-payment").removeClass("hidden"))):validateCPF($(this).cleanVal())&&!1===IS_SINGLE_DISTRIBUTOR?(t=$(this).closest(".single-method").find(".card-number"),a=$(this).closest(".single-method").find(".card-name"),o=$(this).closest(".single-method").find(".card-ccv"),r=$(this).closest(".single-method").find(".card-month"),n=$(this).closest(".single-method").find(".card-year"),i=$(this).closest(".single-method").find(".parcelas-cartao"),15<=t.cleanVal().length&5<=a.val().length&3<=o.val().length&validaData(r.val(),n.val())&&($("#"+i.val()).closest(".pay-item").click(),$(this).popover("hide"),$(this).closest(".single-method").find(".validate-payment").removeClass("hidden"))):(11==$(this).cleanVal().length?($(this).attr("data-container","body"),$(this).attr("data-toggle","popover"),$(this).attr("data-placement","bottom"),$(this).attr("data-content","CPF inválido"),$(this).popover().popover("show")):$(this).popover("hide"),$(this).closest(".single-method").find(".pay-item .input-credit-card").removeAttr("checked"),$(this).closest(".single-method").find(".pay-item .input-credit-card").prop("checked",!1),$(".btn-finalizar-pedido").attr("disabled","true"),$(this).closest(".single-method").find(".validate-payment").addClass("hidden"));var s=$(this).closest(".tab-pane").hasClass("js-is-credit")?$(".js-is-credit"):$(".js-is-benefits");s.find(".repeat-card").removeAttr("checked"),s.find(".repeat-card").prop("checked",!1),s.find(".p-success-card").hide()}),$("#paypal_credit_card_nonce").change(function(){var e,t,a;5<$(this).val().length?(e=$(this).closest(".single-method").find(".card-name"),t=$(this).closest(".single-method").find(".card-cpf"),a=$(this).closest(".single-method").find(".parcelas-cartao"),validateCPF(t.cleanVal())&&5<=e.val().length&&($("#"+a.val()).closest(".pay-item").click(),$(this).popover("hide"),$(this).closest(".single-method").find(".validate-payment").removeClass("hidden"))):($(this).closest(".single-method").find(".pay-item .input-credit-card").removeAttr("checked"),$(this).closest(".single-method").find(".pay-item .input-credit-card").prop("checked",!1),$(".btn-finalizar-pedido").attr("disabled","true"),$(this).closest(".single-method").find(".validate-payment").addClass("hidden")),($(this).closest(".tab-pane").hasClass("js-is-credit")?$(".js-is-credit"):$(".js-is-benefits")).find(".p-success-card").hide()}),$(".card-number").keyup(function(){var e,t,a,o,r,n;15<=$(this).cleanVal().length?(e=$(this).closest(".single-method").find(".card-cpf"),t=$(this).closest(".single-method").find(".card-name"),a=$(this).closest(".single-method").find(".card-ccv"),o=$(this).closest(".single-method").find(".card-month"),r=$(this).closest(".single-method").find(".card-year"),n=$(this).closest(".single-method").find(".parcelas-cartao"),validateCPF(e.cleanVal())&5<=t.val().length&3<=a.val().length&validaData(o.val(),r.val())&&($("#"+n.val()).closest(".pay-item").click(),$(this).closest(".single-method").find(".validate-payment").removeClass("hidden"))):($(this).closest(".single-method").find(".pay-item .input-credit-card").removeAttr("checked"),$(this).closest(".single-method").find(".pay-item .input-credit-card").prop("checked",!1),$(".btn-finalizar-pedido").attr("disabled","true"),$(this).closest(".single-method").find(".validate-payment").addClass("hidden"));var i=$(this).closest(".tab-pane").hasClass("js-is-credit")?$(".js-is-credit"):$(".js-is-benefits");i.find(".repeat-card").removeAttr("checked"),i.find(".repeat-card").prop("checked",!1),i.find(".p-success-card").hide()}),$(".card-name").keyup(function(){var e,t,a,o,r,n,i;5<=$(this).val().length&&!0===IS_SINGLE_DISTRIBUTOR?(t=$(this).closest(".single-method").find(".card-cpf"),i=$(this).closest(".single-method").find(".parcelas-cartao"),e=$("#paypal_credit_card_nonce"),validateCPF(t.cleanVal())&&5<=e.val().length&&($("#"+i.val()).closest(".pay-item").click(),$(this).popover("hide"),$(this).closest(".single-method").find(".validate-payment").removeClass("hidden"))):5<=$(this).val().length&&!1===IS_SINGLE_DISTRIBUTOR?(t=$(this).closest(".single-method").find(".card-cpf"),a=$(this).closest(".single-method").find(".card-number"),o=$(this).closest(".single-method").find(".card-ccv"),r=$(this).closest(".single-method").find(".card-month"),n=$(this).closest(".single-method").find(".card-year"),i=$(this).closest(".single-method").find(".parcelas-cartao"),validateCPF(t.cleanVal())&15<=a.cleanVal().length&3<=o.val().length&validaData(r.val(),n.val())&&($("#"+i.val()).closest(".pay-item").click(),$(this).closest(".single-method").find(".validate-payment").removeClass("hidden"))):($(this).closest(".single-method").find(".pay-item .input-credit-card").removeAttr("checked"),$(this).closest(".single-method").find(".pay-item .input-credit-card").prop("checked",!1),$(".btn-finalizar-pedido").attr("disabled","true"),$(this).closest(".single-method").find(".validate-payment").addClass("hidden"));var s=$(this).closest(".tab-pane").hasClass("js-is-credit")?$(".js-is-credit"):$(".js-is-benefits");s.find(".repeat-card").removeAttr("checked"),s.find(".repeat-card").prop("checked",!1),s.find(".p-success-card").hide()}),$(".card-ccv").keyup(function(){var e,t,a,o,r,n;3<=$(this).val().length?(e=$(this).closest(".single-method").find(".card-cpf"),t=$(this).closest(".single-method").find(".card-number"),a=$(this).closest(".single-method").find(".card-name"),o=$(this).closest(".single-method").find(".card-month"),r=$(this).closest(".single-method").find(".card-year"),n=$(this).closest(".single-method").find(".parcelas-cartao"),validateCPF(e.cleanVal())&15<=t.cleanVal().length&5<=a.val().length&validaData(o.val(),r.val())&&($("#"+n.val()).closest(".pay-item").click(),$(this).closest(".single-method").find(".validate-payment").removeClass("hidden"))):($(this).closest(".single-method").find(".pay-item .input-credit-card").removeAttr("checked"),$(this).closest(".single-method").find(".pay-item .input-credit-card").prop("checked",!1),$(".btn-finalizar-pedido").attr("disabled","true"),$(this).closest(".single-method").find(".validate-payment").addClass("hidden"));var i=$(this).closest(".tab-pane").hasClass("js-is-credit")?$(".js-is-credit"):$(".js-is-benefits");i.find(".repeat-card").removeAttr("checked"),i.find(".repeat-card").prop("checked",!1),i.find(".p-success-card").hide()}),$(".card-month").change(function(){var e,t,a,o,r;validaData($(this).val(),$(this).siblings(".card-year").val())?(e=$(this).closest(".single-method").find(".card-cpf"),t=$(this).closest(".single-method").find(".card-number"),a=$(this).closest(".single-method").find(".card-name"),o=$(this).closest(".single-method").find(".card-ccv"),r=$(this).closest(".single-method").find(".parcelas-cartao"),validateCPF(e.cleanVal())&15<=t.cleanVal().length&5<=a.val().length&3<=o.val().length&&($("#"+r.val()).closest(".pay-item").click(),$(this).closest(".single-method").find(".validate-payment").removeClass("hidden"))):($(this).closest(".single-method").find(".pay-item .input-credit-card").removeAttr("checked"),$(this).closest(".single-method").find(".pay-item .input-credit-card").prop("checked",!1),$(".btn-finalizar-pedido").attr("disabled","true"),$(this).closest(".single-method").find(".validate-payment").addClass("hidden"));var n=$(this).closest(".tab-pane").hasClass("js-is-credit")?$(".js-is-credit"):$(".js-is-benefits");n.find(".repeat-card").removeAttr("checked"),n.find(".repeat-card").prop("checked",!1),n.find(".p-success-card").hide()}),$(".card-year").change(function(){var e,t,a,o,r;validaData($(this).siblings(".card-month").val(),$(this).val())?(e=$(this).closest(".single-method").find(".card-cpf"),t=$(this).closest(".single-method").find(".card-number"),a=$(this).closest(".single-method").find(".card-name"),o=$(this).closest(".single-method").find(".card-ccv"),r=$(this).closest(".single-method").find(".parcelas-cartao"),validateCPF(e.cleanVal())&15<=t.cleanVal().length&5<=a.val().length&3<=o.val().length&&($("#"+r.val()).closest(".pay-item").click(),$(this).closest(".single-method").find(".validate-payment").removeClass("hidden"))):($(this).closest(".single-method").find(".pay-item .input-credit-card").removeAttr("checked"),$(this).closest(".single-method").find(".pay-item .input-credit-card").prop("checked",!1),$(".btn-finalizar-pedido").attr("disabled","true"),$(this).closest(".single-method").find(".validate-payment").addClass("hidden"));var n=$(this).closest(".tab-pane").hasClass("js-is-credit")?$(".js-is-credit"):$(".js-is-benefits");n.find(".repeat-card").removeAttr("checked"),n.find(".repeat-card").prop("checked",!1),n.find(".p-success-card").hide()}),$(".form-payment-checkout").submit(function(e){FORM_SUBMITTED=!0,$(".card-name").each(function(){var e=$(this).val().trim();e=(e=e.replace("  "," ")).toUpperCase(),$(this).val(e)}),$(".card-number").unmask(),$(".btn-finalizar-pedido").val("Finalizando...").attr("disabled","true"),"undefined"!=typeof grecaptcha&&(e.preventDefault(),grecaptcha.execute())}),"function"==typeof $().tooltip&&$('[data-toggle="tooltip"]').tooltip(),$(".parcelas-cartao").on("change",function(){var e,t,a,o,r,n,i=$(this).closest(".tab-pane").hasClass("js-is-credit")?"credit-card-tab":"benefits-card-tab";!0===IS_SINGLE_DISTRIBUTOR&&"credit-card-tab"==i?(e=$(this).closest(".single-method").find(".card-cpf"),a=$(this).closest(".single-method").find(".card-name"),validateCPF(e.cleanVal())&5<=a.val().length&&$("#"+$(this).val()).closest(".pay-item").click()):(e=$(this).closest(".single-method").find(".card-cpf"),t=$(this).closest(".single-method").find(".card-number"),a=$(this).closest(".single-method").find(".card-name"),o=$(this).closest(".single-method").find(".card-month"),r=$(this).closest(".single-method").find(".card-year"),n=$(this).closest(".single-method").find(".card-ccv"),validateCPF(e.cleanVal())&15<=t.cleanVal().length&5<=a.val().length&3<=n.val().length&validaData(o.val(),r.val())&&$("#"+$(this).val()).closest(".pay-item").click());var s=$(this).find("option:selected"),c=s.attr("data-total-price"),l=s.attr("data-amount");$(this).closest(".single-method").find(".js-cc-valor-total").text(c),$(this).closest(".single-method").find(".valor-conveniencia").text(l),$(this).closest(".distributor-results").find("."+i).attr("data-price",$(this).find("option:selected").attr("data-total-price")).click()}),$(".parcelas-cartao option").each(function(){var e,t,a,o,r=new Object;r.total=$(this).attr("data-total-price"),r.days=$(this).attr("data-total-days"),r.value=(e=r.days,t=r.total,a=Number(e),o=parseFloat(t.replace(",",".")),parseFloat(o/a).toFixed(2)),1==r.days?$(this).text("Não parcelar (1x de R$ "+r.total+" / Total: R$"+r.total+")").attr("selected","true"):$(this).text(r.days+"x de R$ "+r.value.toString().replace(".",",")+" (Total: R$"+r.total+")")}),$(".slideThree").click(function(){var e=$(this).find("input");e.prop("checked",!e.is(":checked")).change()}),$(".payment-method-content .tab-pane").find("input[type='radio']:checked").closest(".pay-item").click(),$(".transfer-tab.active, .credit-card-tab.active, .benefits-card-tab.active").click().closest(".card-body").addClass("show"),is_mobile&&($(".pagtos-mobile li.active .aba-sanfona").click(),$("input[type='radio']:checked").closest(".pay-item").click(),$("input[type='radio']:checked").closest("li").find(".aba-sanfona").click())}),function(){var t;$(".pay-item").on("show.bs.tab",function(){var e=$(this).parent();"auto"==window.getComputedStyle(e[0]).getPropertyValue("overflow-x")&&($(this).next()[0]===$(t)[0]?e.scrollLeft(e.scrollLeft()-$(this).outerWidth()):e.scrollLeft(e.scrollLeft()+$(this).position().left)),t=this})}(),$(".js-input-max-value").keyup(function(){var e=$(this).attr("data-max-value");verifyOrderValue(floatFormat($(this).val()),floatFormat(e))}),$(".js-input-cc-max-value").on("keyup change",$.debounce(350,function(e){var t=floatFormat($(this).attr("data-max-value")),a=floatFormat($(this).val());t<a&&a-t<1?($(".js-order-cc-error-msg").removeClass("d-none"),$(".js-btn-send-order").attr("disabled",!0)):($(".js-order-cc-error-msg").addClass("d-none"),$(".js-btn-send-order").removeAttr("disabled"))}));var statusPK,supplierID,supplierName,setPayElement,supplierPK,tabNavPayments=$(".js-tab-nav-payments"),tabContentPayments=$(".js-tab-content-payments"),paymentMethodTitle=$(".js-payment-methods-title small"),paymentsModal=$("#modal-payment-methods"),paymentsModalAlert=$("#modal-payment-methods-alert");function cleanPaymentMethodModal(){tabNavPayments.html(""),tabContentPayments.html("")}function getPayments(e){$.post(e,function(e){buildPayments(e)})}function getIconName(e){return"À Vista"==e?"icon-a-vista":"Boleto"==e?"icon-boleto":"Cartão de Benefícios"===e?"icon-cartao icon-cartao--vr":"Crédito pré-aprovado"===e?"icon-cotapay":"icon-cartao"}function buildPayments(e){for(var t=0;t<e.available_payment_methods.length;t++){var a=$("<a></a>",{class:"nav-item nav-link",id:"nav-payment-"+t,"data-toggle":"tab",href:"#tab-payment-"+t,role:"tab","aria-controls":"tab-payment-"+t,"aria-selected":"false"});a.html("<div class='custom-control custom-checkbox custom-control-inline'><input type='radio' name='form-distributor_payment_type' class='custom-control-input' ><label class='custom-control-label'><span class='"+getIconName(e.available_payment_methods[t].name)+"'></span><span class='payment-name'>"+e.available_payment_methods[t].name+"</span><span class='price-tab'><strong>"+("string"!=typeof e.available_payment_methods[t].values_range?"De R$"+e.available_payment_methods[t].values_range[0]+" a R$"+e.available_payment_methods[t].values_range[1]:"R$ "+e.available_payment_methods[t].values_range)+"</strong></span></label></div>"),tabNavPayments.append(a);var o=$("<div></div>",{class:"tab-pane fade",id:"tab-payment-"+t,role:"tabpanel","aria-labelledby":"nav-payment-"+t});o.append("<p class='payment-method-text'>Selecione abaixo uma das opções de pagamento "+("Boleto"==e.available_payment_methods[t].name?e.available_payment_methods[t].name+"<strong class='text-blue'>( Sujeito a aprovação )</strong>":e.available_payment_methods[t].name)+":</p>");for(var r,n,i=$("<nav></nav>"),s=$("<div></div>",{class:"nav nav-tabs nav-pills nav-fill",id:"nav-payment-method-tab"+t,role:"tablist"}),c=$("<div></div>",{class:"tab-content",id:"content-payment-method-tab"+t}),l=0;l<e.available_payment_methods[t].options.length;l++){"Cartão de Crédito"==e.available_payment_methods[t].name?(o.html(getPaymentText(e.available_payment_methods[t].name,e.available_payment_methods[t].options[l].name)),s.removeClass("nav-tabs"),c.removeClass("tab-content"),a.addClass("js-btn-set-payment js-set-credt-card").attr("data-pk",e.available_payment_methods[t].options[l].id),e.available_payment_methods[t].options[l].id==e.chosen_payment_method.id&&(o.addClass("active show"),a.addClass("active show"),a.attr("aria-selected","true"),a.find("input").attr("checked","checked").prop("checked",!0))):((r=$("<a></a>",{class:"nav-item nav-link nav-payment-method js-btn-set-payment",id:"nav-payment-method-"+e.available_payment_methods[t].options[l].id,"data-pk":e.available_payment_methods[t].options[l].id,"data-payment-type-selected":"#nav-payment-"+t,"data-toggle":"tab","data-payment-name":"Boleto"==e.available_payment_methods[t].name?e.available_payment_methods[t].options[l].name+" ( Sujeito a aprovação )":e.available_payment_methods[t].options[l].name,href:"#tab-payment-method-"+e.available_payment_methods[t].options[l].id,role:"tab","aria-controls":"tab-payment-method-"+e.available_payment_methods[t].options[l].id,"aria-selected":"false"})).html("<div class='custom-control custom-checkbox custom-control-inline'><input type='radio' name='form-distributor_payment_method' id='pay-id-"+e.available_payment_methods[t].options[l].id+"' value='"+e.available_payment_methods[t].options[l].url+"' class='custom-control-input' "+(e.available_payment_methods[t].options[l].id==e.chosen_payment_method.id?"checked":"")+"><label class='custom-control-label' for='pay-id-"+e.available_payment_methods[t].options[l].id+"'>"+e.available_payment_methods[t].options[l].name.replace("Boleto a prazo, ","")+": R$"+e.available_payment_methods[t].options[l].value.replace(".",",")+"</label></div>"),s.append(r),(n=$("<div></div>",{class:"tab-pane fade",id:"tab-payment-method-"+e.available_payment_methods[t].options[l].id,role:"tabpanel","aria-labelledby":"nav-payment-method-"+e.available_payment_methods[t].options[l].id})).html(getPaymentText(e.available_payment_methods[t].name,e.available_payment_methods[t].options[l].name)),e.available_payment_methods[t].options[l].id==e.chosen_payment_method.id&&(n.addClass("active show"),r.addClass("active show"),r.attr("aria-selected","true"),o.addClass("active show"),a.addClass("active show"),a.attr("aria-selected","true"),a.find("input").attr("checked","checked").prop("checked",!0)),5===e.available_payment_methods[t].type&&a.addClass("js-vr-card-btn"),c.append(n))}i.append(s),o.append(i),o.append(c),tabContentPayments.append(o)}}function setPaymentMethod(e){$.post(CHOOSE_STATUS_PAYMENT_URL,{method_pk:e,status_pk:statusPK},function(e){buildSetPaymentMethod(e)})}function setPaymentMethodCheckout(e,t){return $("#checkout-form .btn-finalizar-pedido").attr("disabled",!0),$.post(CHOOSE_STATUS_PAYMENT_URL,{method_pk:e,status_pk:t},function(e){$(".coupon-".concat(t)).attr("blocked","false"),$("#checkout-form .btn-finalizar-pedido").attr("disabled",!1)})}function buildSetPaymentMethod(e){var t;paymentsModalAlert.is(":visible")&&$(".js-link-open-payment-modal.is-open").closest("tr").remove();for(var a=0;a<e.distributors.length;a++)e.distributors[a].id==supplierPK&&(t=e.distributors[a].values);updateSupplierValue(t),updateCartValue(e.cart_values),updatePaymentTypePrice(e.payment_method_types),updateSummaryOrder(e.distributors),setPayElement.hasClass("js-set-credt-card")?($("#supplier-card-"+supplierID).find(".js-payment-selected-text").text("Cartão de Crédito"),$("#supplier-card-"+supplierID).find(".js-payment-type-selected").text("No Cartão de Crédito"),$(".js-tab-content-payments").find("input").removeAttr("checked").prop("checked",!1),$(".js-tab-content-payments").find(".nav-payment-method").removeClass("active")):($("#supplier-card-"+supplierID).find(".js-payment-selected-text").text(setPayElement.attr("data-payment-name")),$(setPayElement.attr("data-payment-type-selected")).find("input").attr("checked","checked").prop("checked",!0),$("#supplier-card-"+supplierID).find(".js-payment-type-selected").text("Boleto"==$(setPayElement.attr("data-payment-type-selected")).find(".payment-name").text()?"No "+$(setPayElement.attr("data-payment-type-selected")).find(".payment-name").text():$(setPayElement.attr("data-payment-type-selected")).find(".payment-name").text()),$(".js-tab-content-payments").find(".nav-payment-method").removeClass("active"),setPayElement.addClass("active")),setPayElement.find("input").attr("checked","checked").prop("checked",!0)}function updateSupplierValue(e){$("#supplier-card-"+supplierID).find(".js-distributor-subtotal").text("R$ "+stringToCurrency(e.total_value)),$("#supplier-card-"+supplierID).find(".distributor-total-price").text(stringToCurrency(e.total_with_taxes))}function updateCartValue(e){$(".order-total").text(stringToCurrency(e.total_with_taxes)),$(".js-order-subtotal").text("R$"+stringToCurrency(e.total_value))}function getSupplierName(e){return e.closest(".distributor-results").find(".card-header-title b").text()}function buildPaymentTypes(e,t){var a=!1,o="";paymentsModalAlert.find("table tbody").html(o);for(var r=0;r<e.distributors.length;r++){$(".order-total").text(stringToCurrency(e.cart_values.total_with_taxes.replace(",",".")));var n=$(".distributor-results[data-supplier-id='"+e.distributors[r].id+"']");e.distributors[r].chosen_payment_method.type!=t&&($("input[name='form-type-payment-method']").prop("checked",!1),$(".js-btn-set-all-payment").addClass("is-active"),o=o+"<tr> <td>"+n.find(".card-header-title b").text()+"</td> <td><span class='ml-0 mr-1 p-success-card-payment'> <strong>"+e.distributors[r].chosen_payment_method.name+"</strong> </span></td> <td><a href='#' class='js-link-open-payment-modal link link-small' data-link-payment='#open-modal-payments-"+e.distributors[r].id+"' data-payment-id='"+e.distributors[r].chosen_payment_method.id+"' >Ver outras opções</a></td> </tr>",a=!0),n.find(".js-payment-selected-text").text(1==e.distributors[r].chosen_payment_method.type?e.distributors[r].chosen_payment_method.name+" ( Sujeito a aprovação )":e.distributors[r].chosen_payment_method.name);for(var i=0;i<e.distributors[r].available_payment_methods.length;i++)e.distributors[r].available_payment_methods[i].type==e.distributors[r].chosen_payment_method.type&&n.find(".js-payment-type-selected").text(0==e.distributors[r].chosen_payment_method.type?e.distributors[r].available_payment_methods[i].name:"No "+e.distributors[r].available_payment_methods[i].name);n.find(".distributor-total-price").text(stringToCurrency(e.distributors[r].values.total_with_taxes.replace(",",".")))}a&&(paymentsModalAlert.find("table tbody").html(o),1<paymentsModalAlert.find("table tbody tr").length?paymentsModalAlert.find(".js-text-msg").html("Alguns fornecedores não possuem o meio de pagamento escolhido,<br> dessa forma selecionamos as opções que mais se aproximam da sua escolha."):paymentsModalAlert.find(".js-text-msg").html("Um fornecedor não possui o meio de pagamento escolhido,<br> dessa forma selecionamos a opção que mais se aproxima da sua escolha."),paymentsModalAlert.modal("show")),updateSummaryOrder(e.distributors),$(".loading-payment-type").hide()}function showAlert(e){var t="";"menor"==e?t="Cadastro permitido apenas para maiores de 18 anos":"idoso"==e?t="Revise a data de nascimento":"SenhaInvalida"==e&&(t="É necessário atender a todos os critérios de criação e atualização de senha.");var a=$('<div class="alert alert-danger alert-dismissible fade show" role="alert" style="display:none;"><strong>Atenção!</strong> '+(""!=t?t:e+" é obrigatório.")+'<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>');$(".feedback-alert").append(a),a.fadeIn("slow")}function hideAlert(e){setTimeout(function(){$(e).fadeOut(300,function(){$(this).remove()})},2500)}function validaSenha(e){return new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})").test(e)}function asyncGeneratorStep(e,t,a,o,r,n,i){try{var s=e[n](i),c=s.value}catch(e){return void a(e)}s.done?t(c):Promise.resolve(c).then(o,r)}function _asyncToGenerator(s){return function(){var e=this,i=arguments;return new Promise(function(t,a){var o=s.apply(e,i);function r(e){asyncGeneratorStep(o,t,a,r,n,"next",e)}function n(e){asyncGeneratorStep(o,t,a,r,n,"throw",e)}r(void 0)})}}$(".js-btn-show-payment-methods").click(function(e){e.preventDefault();var t=$(this);statusPK=t.attr("data-order-pk"),supplierID=t.attr("data-supplier-id"),supplierName=t.attr("data-supplier-name"),supplierPK=t.closest(".distributor-results").attr("data-supplier-id"),cleanPaymentMethodModal(),paymentMethodTitle.text(getSupplierName(t)),paymentsModal.modal("show"),getPayments(t.attr("data-url")),$(".js-supplier-name-modal-payment").text(supplierName)}),paymentsModal.on("click",".js-btn-set-payment",function(){(setPayElement=$(this)).hasClass("active")||setPaymentMethod(setPayElement.attr("data-pk"))}),paymentsModal.on("click",".js-vr-card-btn",function(){$(this).hasClass("active")||$($(this).attr("href")).find(".js-btn-set-payment").click()}),paymentsModalAlert.on("click",".js-link-open-payment-modal",function(){$(this).addClass("is-open"),$($(this).attr("data-link-payment")).click()}),$("#modal-payment-methods").on("hidden.bs.modal",function(e){paymentsModalAlert.is(":visible")&&($(".js-link-open-payment-modal").removeClass("is-open"),paymentsModalAlert.find("table tbody tr").length<1&&paymentsModalAlert.modal("hide"))}),$(".js-signup-form-1").submit(function(){var e=["0","1"].includes($("input[name='type']").val());return""==$("input[name='full_name']").val()||""==$("input[name='first_name']").val()?(showAlert("Nome"),hideAlert($(".feedback-alert .alert-danger")),!1):""==$("input[name='surname']").val()?(showAlert("Sobrenome"),hideAlert($(".feedback-alert .alert-danger")),!1):""==$("input[name='email']").val()?(showAlert("Email"),hideAlert($(".feedback-alert .alert-danger")),!1):""==$("input[name='password']").val()?(showAlert("Senha"),hideAlert($(".feedback-alert .alert-danger")),!1):0==validaSenha($("input[name='password']").val())?(showAlert("SenhaInvalida"),hideAlert($(".feedback-alert .alert-danger")),!1):e?!!$("input[name='terms']").is(":checked")||(showAlert("Termos de uso"),hideAlert($(".feedback-alert .alert-danger")),!1):(showAlert("Comprar ou vender"),hideAlert($(".feedback-alert .alert-danger")),!1)}),$(document).ready(function(){var t=$("form input, form select"),a={};t.each(function(){a[$(this).attr("name")]=$(this).val()}),$(".js-signup-form-2").submit(function(){if(""==$("input[name='full_name']").val())return showAlert("Nome"),hideAlert($(".feedback-alert .alert-danger")),!1;if(""==$("input[name='first_name']").val())return showAlert("Nome"),hideAlert($(".feedback-alert .alert-danger")),!1;if(""==$("input[name='surname']").val())return showAlert("Sobreome"),hideAlert($(".feedback-alert .alert-danger")),!1;if(""==$("input[name='email']").val())return showAlert("Email"),hideAlert($(".feedback-alert .alert-danger")),!1;if(0<$("input[name='cnpj']").length&&(""==$("input[name='cnpj']").val()||$("input[name='cnpj']").val().length<18||!validateCNPJ($("input[name='cnpj']").val())))return showAlert("CNPJ válido"),hideAlert($(".feedback-alert .alert-danger")),!1;if(0<$("input[name='cpf']").length&&(""==$("input[name='cpf']").val()||$("input[name='cpf']").val().length<14||!validateCPF($("input[name='cpf']").val())))return showAlert("CPF  válido"),hideAlert($(".feedback-alert .alert-danger")),!1;if(0<$("input[name='birthdate']").length){var e=birthDateIsValid($("input[name='birthdate']").val());if("válido"!=e)return showAlert("menor"==e||"idoso"==e?e:"Data de nascimento"),hideAlert($(".feedback-alert .alert-danger")),!1}return 0<$("input[name='social_name']").length&&""==$("input[name='social_name']").val()?(showAlert("Razão social"),hideAlert($(".feedback-alert .alert-danger")),!1):!window.location.pathname.includes("profile-cpf")&&$("input[name='phone']").val().length<10||window.location.pathname.includes("profile-cpf")&&$("input[name='phone']").val().length<10?(showAlert("Telefone"),hideAlert($(".feedback-alert .alert-danger")),!1):""==$("select[name='address_state']").val()?(showAlert("Estado"),hideAlert($(".feedback-alert .alert-danger")),!1):""==$("select[name='address_city']").val()||null==$("select[name='address_city']").val()?(showAlert("Cidade"),hideAlert($(".feedback-alert .alert-danger")),!1):""==$("input[name='address_district']").val()?(showAlert("Bairro"),hideAlert($(".feedback-alert .alert-danger")),!1):""==$("input[name='address_street']").val()?(showAlert("Endereço"),hideAlert($(".feedback-alert .alert-danger")),!1):""==$("input[name='address_number']").val()||isNaN($("input[name='address_number']").val())?(showAlert("Número"),hideAlert($(".feedback-alert .alert-danger")),!1):""==$("input[name='address_cep']").val()||$("input[name='address_cep']").val().length<9?(showAlert("CEP"),hideAlert($(".feedback-alert .alert-danger")),!1):($("#id_address_state, #id_address_city, #id_address_street, #id_address_district").attr("disabled",!1),t.toArray().some(function(e){var t=$(e).attr("name");if(t&&!/\b[A-Z]+\b/.test(t))return $(e).val()!==a[t]})&&dataLayer.push({event:"preenchimento_cadastro"}),!0)}),$(".change-password").submit(function(){return 0!=validaSenha($("#id_new_password").val())||(showAlert("SenhaInvalida"),hideAlert($(".feedback-alert .alert-danger")),!1)}),$(".reset-password").submit(function(){return 0!=validaSenha($("#id_new_password1").val())||(showAlert("SenhaInvalida"),hideAlert($(".feedback-alert .alert-danger")),!1)})});var is_mobile=window.innerWidth<640;function documentOnReady(e){"loading"!=document.readyState?e():document.addEventListener?document.addEventListener("DOMContentLoaded",e):document.attachEvent("onreadystatechange",function(){"complete"==document.readyState&&e()})}function fetchJson(e){return _fetchJson.apply(this,arguments)}function _fetchJson(){return(_fetchJson=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,{mode:"no-cors"});case 3:if(200===(a=e.sent).status)return e.abrupt("return",a.json());e.next=8;break;case 8:$(".js-address").text("Erro ao buscar o endereço");case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),$(".js-address").text("Erro ao buscar o endereço");case 14:case"end":return e.stop()}},e,null,[[0,11]])}))).apply(this,arguments)}function mockDataAddress(){return{public_place:"Clotilde Galesi",public_place_type:"Rua",neighborhood:{id:22231,name:"Vila Osasco"},city:{slug:"osasco-sp",name:"Osasco",uf:"SP",id:"3550308"}}}function buildDataAddress(e){return null===e.public_place_type&&null===e.public_place&&null===e.neighborhood||null===e.public_place_type&&null===e.neighborhood?"".concat(e.city.name," - ").concat(e.city.uf,", ").concat($("#cep").val()):null===e.public_place_type?"".concat(e.public_place,", ").concat(e.neighborhood.name,", ").concat(e.city.name," - ").concat(e.city.uf,", ").concat($("#cep").val()):"".concat(e.public_place_type," ").concat(e.public_place,", ").concat(e.neighborhood.name,", ").concat(e.city.name," - ").concat(e.city.uf,", ").concat($("#cep").val())}function buildUserCity(e){return"".concat(e.city.name," - ").concat(e.city.uf)}function setCookieDataByAddress(e){var t=e.city.name,a=e.city.id,o=e.city.uf,r=e.neighborhood?e.neighborhood.id:0,n=(e.public_place,e.public_place_type,$("#cep").val());currentUserType=-1<$(".tipo-cliente").find("input:checked").parent().text().indexOf("CNPJ")?"CNPJ":"CPF";var i="".concat(textLimiter(t)," - ").concat(o,", ").concat(n," (").concat(currentUserType,")");$(".js-user-region").text(i),setCookie("builded_address_cookie",i,360);var s=new Date;s.setYear(s.getFullYear()+1),setCookie("cb_user_state",o,s),setCookie("cb_user_city_name",t,s),setCookie("cb_user_type",currentUserType,s),setCookie("cb_user_postal_code",n,s),setCookie("cb_user_neighborhood",r,s),setCookie("cb_user_city_id",a,s),localStorage.setItem("old_city_name",t),localStorage.setItem("old_user_state",o),localStorage.setItem("old_user_city_id",a),localStorage.setItem("old_postal_code",n),localStorage.setItem("old_user_type",currentUserType),localStorage.setItem("old_user_neighborhood",r)}function setCookie(e,t,a){var o,r="";a&&((o=new Date).setTime(o.getTime()+24*a*60*60*1e3),r="; expires="+o.toUTCString()),document.cookie=e+"="+(t||"")+r+"; path=/"}function getCookie(e){for(var t=e+"=",a=document.cookie.split(";"),o=0;o<a.length;o++){for(var r=a[o];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return null}function textLimiter(e){return 30<e.length?e.substring(0,27)+"...":e}function validateCNPJ(e){if(""==(e=e.replace(/[^\d]+/g,"")))return!1;if(14!=e.length)return!1;if("00000000000000"==e||"11111111111111"==e||"22222222222222"==e||"33333333333333"==e||"44444444444444"==e||"55555555555555"==e||"66666666666666"==e||"77777777777777"==e||"88888888888888"==e||"99999999999999"==e)return!1;for(tamanho=e.length-2,numeros=e.substring(0,tamanho),digitos=e.substring(tamanho),soma=0,pos=tamanho-7,i=tamanho;1<=i;i--)soma+=numeros.charAt(tamanho-i)*pos--,pos<2&&(pos=9);if(resultado=soma%11<2?0:11-soma%11,resultado!=digitos.charAt(0))return!1;for(tamanho+=1,numeros=e.substring(0,tamanho),soma=0,pos=tamanho-7,i=tamanho;1<=i;i--)soma+=numeros.charAt(tamanho-i)*pos--,pos<2&&(pos=9);return resultado=soma%11<2?0:11-soma%11,resultado==digitos.charAt(1)}function validateCPF(e){if(""==(e=e.replace(/[^\d]+/g,"")))return!1;if(11!=e.length)return!1;if("00000000000"==e||"11111111111"==e||"22222222222"==e||"33333333333"==e||"44444444444"==e||"55555555555"==e||"66666666666"==e||"77777777777"==e||"88888888888"==e||"99999999999"==e)return!1;var t,a=0;for(i=1;i<=9;i++)a+=parseInt(e.substring(i-1,i))*(11-i);if(10!=(t=10*a%11)&&11!=t||(t=0),t!=parseInt(e.substring(9,10)))return!1;for(a=0,i=1;i<=10;i++)a+=parseInt(e.substring(i-1,i))*(12-i);return 10!=(t=10*a%11)&&11!=t||(t=0),t==parseInt(e.substring(10,11))}function dateIsValid(e){var t=e.split("/");return!!new Date(t[1]+"/"+t[0]+"/"+t[2]).getTime()}function birthDateIsValid(e){var t,a,o,r,n="inválido";return dateIsValid(e)&&(n="válido",t=e.split("/"),a=new Date(Date.parse("".concat(t[1],"/").concat(t[0],"/").concat(t[2]))),(o=new Date).setFullYear(o.getFullYear()-18),r=new Date,o<a?n="menor":120<=r.getFullYear()-a.getFullYear()&&(n="idoso")),n}function asyncGeneratorStep(e,t,a,o,r,n,i){try{var s=e[n](i),c=s.value}catch(e){return void a(e)}s.done?t(c):Promise.resolve(c).then(o,r)}function _asyncToGenerator(s){return function(){var e=this,i=arguments;return new Promise(function(t,a){var o=s.apply(e,i);function r(e){asyncGeneratorStep(o,t,a,r,n,"next",e)}function n(e){asyncGeneratorStep(o,t,a,r,n,"throw",e)}r(void 0)})}}function addProductToCartBox(e,t,a,o,r){var n=$(".product-box[data-pk='"+e+"']").first();n.attr("data-distributor-id",a),n.find(".js-product-box__supplier").attr("title",o).text(o),n.find(".product-box__price--multiple__number").text(t.replace(".00","")),n.find(".product-box__price--number").text(r);var i=n.find(".product-box__buttom__add");i.attr("data-multiple",t),i.hasClass(".js-add-product")||(i.addClass("js-add-product"),n.find(".product-box__buttom__quantity").removeClass("d-flex")),i.click()}function buildAddProductModalOf(e){e.text("Adicionado").addClass("btn btn-primary cursor-unset").removeClass("d-block"),$(".js-modal-of_add-cart").html("<img src='"+STATIC_IMAGE+"icons/replace.svg' class='replace  mr-2 mr-md-0'>"+(is_mobile?"":"<br>")+" Substituir").removeClass("cursor-unset").removeClass("btn").removeClass("btn-primary")}function asyncGeneratorStep(e,t,a,o,r,n,i){try{var s=e[n](i),c=s.value}catch(e){return void a(e)}s.done?t(c):Promise.resolve(c).then(o,r)}function _asyncToGenerator(s){return function(){var e=this,i=arguments;return new Promise(function(t,a){var o=s.apply(e,i);function r(e){asyncGeneratorStep(o,t,a,r,n,"next",e)}function n(e){asyncGeneratorStep(o,t,a,r,n,"throw",e)}r(void 0)})}}documentOnReady(_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return reducerOnScroll(),e.next=3,getUserData();case 3:t=e.sent,a=getCookie("cb_user_type")||"CNPJ","true"!==getCookie("invalid_consumer_cep")||location.pathname.includes("/profile")||$("#modal-city").modal("show"),USER_IS_AUTHENTICATED||(REGION=t,buildUserRegion(t),cityCheck(),"true"!==getCookie("modal_city_close")&&($(".js-address").text("".concat(getCookie("cb_user_city_name")," - ").concat(getCookie("cb_user_state"))),$("#modal-city").modal("show"),localStorage.setItem("old_city_name",getCookie("cb_user_city_name")),localStorage.setItem("old_user_state",getCookie("cb_user_state")),localStorage.setItem("old_user_city_id",getCookie("cb_user_city_id")),localStorage.setItem("old_user_type",a),setCookie("modal_city_close",!0,1)),"False"===isLogged&&"true"===getCookie("modal_city_close")&&(localStorage.getItem("old_city_name")&&localStorage.getItem("old_user_state")?localStorage.getItem("old_city_name")&&localStorage.getItem("old_user_state")&&(setCookie("cb_user_city_name",localStorage.getItem("old_city_name"),1),setCookie("cb_user_state",localStorage.getItem("old_user_state"),1),setCookie("cb_user_city_id",localStorage.getItem("old_user_city_id"),1),setCookie("cb_user_type",localStorage.getItem("old_user_type"),1),setCookie("cb_user_postal_code",localStorage.getItem("old_postal_code"),1),setCookie("cb_user_neighborhood",localStorage.getItem("old_user_neighborhood"),1)):(localStorage.setItem("old_city_name",getCookie("cb_user_city_name")),localStorage.setItem("old_user_state",getCookie("cb_user_state")),localStorage.setItem("old_user_city_id",getCookie("cb_user_city_id")),localStorage.setItem("old_user_type",a))),$(".card2").click(function(){$(".card2").addClass("orange-border-left"),$(".card1").removeClass("orange-border-left")}),$(".card1").click(function(){$(".card1").addClass("orange-border-left"),$(".card2").removeClass("orange-border-left")}),$("#input-cnpj-modal").click(function(){setCookie("cb_user_type","CNPJ",360),a="CNPJ",$("#cep").trigger("change")}),$("#input-cpf-modal").click(function(){setCookie("cb_user_type","CPF",360),a="CPF",$("#cep").trigger("change")}),$(".header__city").click(function(){$(".card1").addClass("orange-border-left");var e,t=new Date;t.setYear(t.getFullYear()+1),getCookie("cb_user_type")&&("CNPJ"==getCookie("cb_user_type")?setTimeout(function(){$("#input-cnpj-modal").trigger("click")},100):setTimeout(function(){$("#input-cpf-modal").trigger("click")},100)),localStorage.getItem("respCEP")&&(e=JSON.parse(localStorage.getItem("respCEP")),$(".js-btn-confirm").removeClass("disabled"),$("#cep").val(getCookie("cb_user_postal_code")),setCookieDataByAddress(e),setCookie("mounted_address",buildDataAddress(e),360),$(".js-address").text(buildDataAddress(e))),getCookie("cb_user_postal_code")&&$("#cep").val(getCookie("cb_user_postal_code")),null===getCookie("mounted_address")?$(".js-address").text("".concat(getCookie("cb_user_city_name")," - ").concat(getCookie("cb_user_state"))):($(".js-address").text(getCookie("mounted_address")),$(".js-user-region").text(getCookie("builded_address_cookie"))),$("#modal-city").modal("show")})),GetAndBuildSuppiers(),getAllCategories(),"undefined"!=typeof PAGE&&("home"==PAGE?buildHomePage():"product"==PAGE?""!=PRODUCT_CATEGORY&&getSimilarProducts(PRODUCT_CATEGORY):"catalogo"==PAGE?initCatalogue():"stores"==PAGE?initStore():"flyers"==PAGE?initFlyers():"institutional"==PAGE&&initInstitutional()),$("#cep").mask("00000-000"),$("#btn-confirmar").click(function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var a,o,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""==(a=$("#cep").val()).replace("-","")||8!=a.replace("-","").length){e.next=18;break}if($(".js-close-btn-modal").trigger("click"),$(".js-btn-confirm").addClass("disabled"),!location.pathname.includes("/results")){e.next=9;break}location.href="/quotation/",e.next=18;break;case 9:if($("#modal-city").val())return o=$("button[data-pk=".concat($("#modal-city").val(),"]")),(r=new FormData).append("sku_pk",o.attr("data-pk")),r.append("multiplier",o.attr("data-multiple")),r.append("distributor_pk",o.closest(".product-box").attr("data-distributor-id")),e.next=17,fetch(ADD_CART_ITEM_URL_SUPPLIER,{method:"POST",body:r});e.next=17;break;case 17:location.reload();case 18:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}()),$("#modal-city").keypress(function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var a,o,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=$("#cep").val(),"13"!=(t.keyCode?t.keyCode:t.which)||""==a){e.next=19;break}if(""==a.replace("-","")||8!=a.replace("-","").length){e.next=19;break}if($(".js-close-btn-modal").trigger("click"),$(".js-btn-confirm").addClass("disabled"),!location.pathname.includes("/results")){e.next=10;break}location.href="/quotation/",e.next=19;break;case 10:if($("#modal-city").val())return o=$("button[data-pk=".concat($("#modal-city").val(),"]")),(r=new FormData).append("sku_pk",o.attr("data-pk")),r.append("multiplier",o.attr("data-multiple")),r.append("distributor_pk",o.closest(".product-box").attr("data-distributor-id")),e.next=18,fetch(ADD_CART_ITEM_URL_SUPPLIER,{method:"POST",body:r});e.next=18;break;case 18:location.reload();case 19:t.stopPropagation();case 20:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}()),$("#cep").on("keyup change",$.debounce(200,function(e){currentCEP=$(this).val().replace("-",""),8==currentCEP.length&&($(".js-btn-confirm").removeClass("disabled"),fetch("".concat(API_GATEWAY_BASE_URL,"/logistic/address/").concat(currentCEP)).then(function(e){return e.json()}).then(function(e){e.detail&&"Address Not Found!"==e.detail?$(".error-msg").removeClass("hide-object"):(setCookieDataByAddress(e),$(".error-msg").addClass("hide-object"),setCookie("mounted_address",buildDataAddress(e),360),$(".js-address").text(buildDataAddress(e)),localStorage.setItem("respCEP",JSON.stringify(e)))}))}));case 14:case"end":return e.stop()}},e)}))),$(document).on("click",".js-modal-of_add-cart",function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var a,o,r,n,i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),$(".js-modal-of_table").find(".btn").addClass("js-modal-of_add-cart"),(a=$(this)).removeClass("js-modal-of_add-cart"),o=a.attr("data-sku"),r=a.attr("data-multiplier"),n=a.attr("data-supplier-id"),i=a.attr("data-supplier-name"),s=a.attr("data-product-price"),addProductToCartBox(o,r,n,i,s),buildAddProductModalOf(a);case 7:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}());var addClick=!1;$(".js-select2-modal:not(.normal)").each(function(){$(this).select2({language:"pt-BR",dropdownParent:$(this).parent(),placeholder:"Selecione uma opção",allowClear:!0})}),$("#modal-more-products .js-select2-modal:not(.normal)").on("select2:opening, select2:open",function(e){$("#modal-more-products").off("scroll")}),$(window).width()<=425&&$("#modal-more-products .modal-body").scroll(function(){10<$(this).scrollTop()&&$(".js-select2-modal:not(.normal)").select2("close")});var orderPK,filterOrder=[],filterss=[];function searchProductss(){return _searchProductss.apply(this,arguments)}function _searchProductss(){return(_searchProductss=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return $(".modal-more-products-body").html(""),filterSelected.order_by="-relevance",JSON.stringify(filterSelected),newOBJ={filters:'providerName:"'.concat(filterSelected.providerName,'"')},e.next=6,catalogueFilter.getQuery();case 6:t=e.sent,$.ajax({type:"GET",url:"".concat(CATALOGUE_PRODUCTS_SEARCH_URL,"?").concat(t),success:function(e){var t,a,o,r,n,s,c;e.facets&&0<Object.entries(e.facets).length?(t=[],void 0!==e.facets["sku.brand"]&&Object.entries(e.facets["sku.brand"]).forEach(function(e){t.push(e[0])}),a=[],void 0!==e.facets["sku.type"]&&Object.entries(e.facets["sku.type"]).forEach(function(e){a.push(e[0])}),o=[],void 0!==e.facets["sku.packaging"]&&Object.entries(e.facets["sku.packaging"]).forEach(function(e){o.push(e[0])}),r=[],void 0!==e.facets["sku.weight"]&&Object.entries(e.facets["sku.weight"]).forEach(function(e){r.push(e[0])}),n=[],void 0!==e.facets["sku.providerName"]&&Object.entries(e.facets.providerName).forEach(function(e){n.push(e[0])}),s=[],void 0!==e.facets.category_n1&&Object.entries(e.facets.category_n1).forEach(function(e){s.push(e[0])}),c=[],void 0!==e.facets["sku.name"]&&Object.entries(e.facets["sku.name"]).forEach(function(e){c.push(e[0])}),e.filters={categories:s,products:c,brands:t,types:a,packagings:o,weight_qty:r,available_sellers:n}):e.filters={};var l=[];for(i=0;i<e.pageCount;i++)l.push(i);e.paginator={page_range:l,page_number:newOBJ.page||0,last:"",first:"",previous:1===newOBJ.page?"":newOBJ.page-1,next:newOBJ.page===e.pageCount-1?"":parseInt(newOBJ.page)+1},buildFilterr(e.filters),buildPagination(e.paginator),buildResults(e.results,"cart",e.paginator.page_number),$(".js-select-category, .js-select-name, .js-select-brand, .js-select-weight_qty").removeAttr("disabled"),$("img.lazy").Lazy({effect:"fadeIn",visibleOnly:!0,threshold:200,onError:function(e){e.attr("src",STATIC_IMAGE+"icons/no-photo.svg")}}),$(".modal-body--block-height").off("scroll"),$(".modal-body--block-height").on("scroll",function(){$("img.lazy").Lazy({effect:"fadeIn",visibleOnly:!0,threshold:200,onError:function(e){e.attr("src",STATIC_IMAGE+"icons/no-photo.svg")}})})}});case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function startSearch(){return _startSearch.apply(this,arguments)}function _startSearch(){return(_startSearch=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return loading.show(),$(".js-select-category, .js-select-name, .js-select-brand, .js-select-weight_qty").attr("disabled",!0),e.next=4,searchProductss();case 4:$("#modal-more-products").off("scroll");case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function filterOrderChange(e){var t=filterss.indexOf(e);if(-1<t&&t+1<=filterss.length)for(var a=t;a<filterss.length;a++)"category"==filterss[a]?(delete filterSelected.category,catalogueFilter.removeSelected(catalogueFilter.selectedFilters.categoria[0],"categoria")):"name"==filterss[a]?(delete filterSelected.name,catalogueFilter.removeSelected(catalogueFilter.selectedFilters.produto[0],"produto")):"brand"==filterss[a]?(delete filterSelected.brand,catalogueFilter.removeSelected(catalogueFilter.selectedFilters.marca[0],"marca")):"weight_qty"==filterss[a]&&(delete filterSelected.weight_qty,catalogueFilter.removeSelected(catalogueFilter.selectedFilters["peso-quantidade"][0],"peso-quantidade"));removeFilter(e)}function addFilter(e){-1==filterss.indexOf(e)&&filterss.push(e)}function removeFilter(e){var t,a=filterss.indexOf(e);-1<a&&(t=filterss.length-a,filterss.splice(a,t))}function buildFilterr(e){var t=e.categories,a=e.products,o=e.brands,r=e.weight_qty;if(t.sort(function(e,t){return e.localeCompare(t)}),a.sort(function(e,t){return e.localeCompare(t)}),o.sort(function(e,t){return e.localeCompare(t)}),r.sort(function(e,t){return e.localeCompare(t)}),!filterSelected.category&&"cart"==PAGE){$(".js-select-category").html("<option></option>");for(var n=0;n<t.length;n++)$(".js-select-category").append("<option value='".concat(t[n].replace(/'/,"&#39;"),"'>").concat(t[n],"</option>"))}if(!filterSelected.name){$(".js-select-name").html("<option></option>");for(n=0;n<a.length;n++)$(".js-select-name").append("<option value='".concat(a[n].replace(/'/,"&#39;"),"'>").concat(a[n],"</option>"))}if(!filterSelected.brand){$(".js-select-brand").html("<option></option>");for(n=0;n<o.length;n++)$(".js-select-brand").append("<option value='".concat(o[n].replace(/'/,"&#39;"),"'>").concat(o[n],"</option>"))}if(!filterSelected.weight_qty){$(".js-select-weight_qty").html("<option></option>");for(n=0;n<r.length;n++)$(".js-select-weight_qty").append("<option value='"+r[n]+"'>"+r[n]+"</option>")}}filterSelected={filters:""},$(document).ready(function(){$(".js_add_more_products").click(_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return $(".modal-more-products-title").text($(this).attr("supplier-name")),loading.show(),supplierId=$(this).attr("supplier-name"),filterSelected.providerName=supplierId,catalogueFilter.addDistributor(supplierId),orderPK=$(this).closest(".distributor-results").attr("data-order-pk"),cleanPagination(),e.next=9,searchProductss();case 9:case"end":return e.stop()}},e,this)})))}),$(".js-select-category").on("change",function(){filterOrderChange("category"),""!=$(this).val()?(catalogueFilter.selectedFilters.categoria&&catalogueFilter.removeSelected(catalogueFilter.selectedFilters.categoria[0],"categoria"),catalogueFilter.click($(this).val(),"categoria"),filterSelected.category=$(this).val(),addFilter("category")):catalogueFilter.removeSelected(catalogueFilter.selectedFilters.categoria[0],"categoria"),startSearch()}),$(".js-select-name").on("change",function(){filterOrderChange("name"),""!=$(this).val()?(catalogueFilter.selectedFilters.produto&&catalogueFilter.removeSelected(catalogueFilter.selectedFilters.produto[0],"produto"),catalogueFilter.click($(this).val(),"produto"),filterSelected.name=$(this).val(),addFilter("name")):catalogueFilter.removeSelected(catalogueFilter.selectedFilters.produto[0],"produto"),startSearch()}),$(".js-select-brand").on("change",function(){filterOrderChange("brand"),""!=$(this).val()?(catalogueFilter.selectedFilters.marca&&catalogueFilter.removeSelected(catalogueFilter.selectedFilters.marca[0],"marca"),catalogueFilter.click($(this).val(),"marca"),filterSelected.brand=$(this).val(),addFilter("brand")):catalogueFilter.removeSelected(catalogueFilter.selectedFilters.marca[0],"marca"),startSearch()}),$(".js-select-weight_qty").on("change",function(){filterOrderChange("weight_qty"),""!=$(this).val()?(catalogueFilter.selectedFilters["peso-quantidade"]&&catalogueFilter.removeSelected(catalogueFilter.selectedFilters["peso-quantidade"][0],"peso-quantidade"),catalogueFilter.click($(this).val(),"peso-quantidade"),filterSelected.weight_qty=$(this).val(),addFilter("weight_qty")):catalogueFilter.removeSelected(catalogueFilter.selectedFilters["peso-quantidade"][0],"peso-quantidade"),startSearch()}),$("#modal-more-products").on("hidden.bs.modal",function(e){addClick?window.location.assign($("#d-"+supplierId).attr("href")):$(".js-more-products-remove-filters").click()}),$(".js-more-products-remove-filters").click(function(e){e.preventDefault(),0<filterss.length&&($(".js-select-"+filterss[0]).val("").change(),catalogueFilter.removeSelected(catalogueFilter.selectedFilters.categoria[0],"categoria"),catalogueFilter.removeSelected(catalogueFilter.selectedFilters.produto[0],"produto"),catalogueFilter.removeSelected(catalogueFilter.selectedFilters.marca[0],"marca"),catalogueFilter.removeSelected(catalogueFilter.selectedFilters["peso-quantidade"][0],"peso-quantidade"))});var CART_ITEM_ADD="/catalogue/products/add-cart-item",CART_ITEM_REMOVE="/catalogue/products/remove-cart-item",slugify=function(e){var t=e.toLowerCase();return t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/\s{2,}/g," ")).replace(new RegExp(/\s/g),"-")).replace(new RegExp(/[àáâãäå]/g),"a")).replace(new RegExp(/æ/g),"ae")).replace(new RegExp(/ç/g),"c")).replace(new RegExp(/[èéêë]/g),"e")).replace(new RegExp(/[ìíîï]/g),"i")).replace(new RegExp(/ñ/g),"n")).replace(new RegExp(/[òóôõö]/g),"o")).replace(new RegExp(/œ/g),"oe")).replace(new RegExp(/[ùúûü]/g),"u")).replace(new RegExp(/[ýÿ]/g),"y")};function addToCart(t){var e=t.attr("data-pk"),a=t.attr("data-multiple"),o=t.closest(".product-box__buttom").find(".product-box__buttom__add");o.removeClass("js-add-product"),o.html((t.hasClass("js-multipliers-item")?"Adicio...":"Adicionando...")+" <img src='"+STATIC_IMAGE+"icons/loading-white.svg' />");var r=slugify(supplierId);$.ajax({url:ADD_CART_ITEM_URL,data:{sku_pk:e,multiplier:a,distributor_pk:r},type:"POST",success:function(e){updateCartTotalCont(e.order_products_count),orderQttyProducts.text(e.order_products_count),t.closest(".product-box__buttom").find(".js-multipliers-item").removeClass("dropdown-item--add"),t.closest(".product-box__buttom").find(".js-multipliers-item").addClass("js-add-product"),o.removeClass("js-btn-add-product").removeClass("js-btn-select-multiple").html("Adicionado"),t.hasClass("js-multipliers-item")&&t.addClass("dropdown-item--add"),t.removeClass("js-add-product"),t.closest(".product-box__buttom").find(".js-btn-minus-product").attr("data-multiple",e.order_product.product.multiplier),t.closest(".product-box__buttom").find(".js-btn-plus-product").attr("data-multiple",e.order_product.product.multiplier),t.closest(".product-box__buttom").find(".js-count-product").attr("data-count",e.order_product.count).text(e.order_product.count.replace(".00","")),is_mobile&&t.closest(".product-box__buttom").find(".product-box__buttom__add").addClass("d-none"),t.closest(".product-box__buttom").find(".product-box__buttom__quantity").attr("data-order-produt",e.order_product.pk).addClass("d-flex"),addProductInTable(e),animateCart()}})}function removeFromCart(t){$.ajax({url:CART_ITEM_REMOVE,data:{cart_item_pk:$(t).data("pk")},type:"GET",success:function(e){$(t).data("added",!1).data("pk",e.sku).html('<div class="btn-produtos-catalogo">Adicionar <span class="hide-mobile">ao carrinho</span></div>'),updateCartTotal(e.total_products)}})}function updateCartTotal(e){$(".total-products").html(e)}function redirectToCatalogue(e){window.location.href="/catalogue/?queryString="+e}function addProductInTable(e){var t=$("<tr></tr>",{class:"product-row "+(is_mobile?"border-top":"")}),a=$("<td></td>",{class:"product-title "+(is_mobile?"border-0 pt-3 pb-2":"py-3")});a.html('<div class="d-flex"><div><div class="cart__supplier-box__img product-image mr-3"><img src="'+(e.order_product.sku.photo?e.order_product.sku.photo:+STATIC_IMAGE+"icons/no-photo.svg")+'" class="lazy" alt=""></div></div><div class="product-name cart__supplier-box__product-name">'+e.order_product.sku.full_display+'<br><span class="badge badge-light">'+e.order_product.sku.brand+'</span><br><span class="row-more-options" data-exists="/quotation/'+e.order_product.pk+'/exists-similar/"><a data-pk="'+e.order_product.pk+'" data-name="'+e.order_product.sku.full_display+'" data-brand="'+e.order_product.sku.brand+'" data-price="'+e.order_product.stock_price+"/"+e.order_product.sku.unit_display+'" href="/quotation/'+e.order_product.pk+'/get-similar-same-brand/" get-other-brand="/quotation/'+e.order_product.pk+'/get-similar-different-brand/" class="show-more-options op-active curved-border link link-small link-light text-underline">Ver mais ofertas</a></span></div></div>');var o=$("<td></td>",{class:"product-quantity row-quantidade "+(is_mobile?"border-0 py-2 text-center":"pl-3")});o.html('<div class="cart__supplier-box__count"><input class="product-count mb-1 mb-md-2 cart__supplier-box__count-input" type="number" data-pk="'+e.order_product.pk+'" value="'+e.order_product.count+'" max="'+e.order_product.product.max_stock+'" step="'+e.order_product.product.multiplier+'"><div class="js-input-loading d-none cart__supplier-box__count-loading"><img src="'+STATIC_IMAGE+'icons/loading.svg" class="loading-icon-sm"></div></div><p class="popup popup-error-not-multiple mb-0">Mínimo de '+e.order_product.product.multiplier.replace(".00","")+" "+e.order_product.sku.unit_display+"</p>");var r=$("<td></td>",{class:"product-price-unit unit-value "+(is_mobile?"pt-2 pb-0 border-0 d-flex justify-content-between":"pl-3")});r.html((is_mobile?'<div class="font-weight-bold">Preço unitário</div>':"")+'<div class="'+(is_mobile?"":"h3")+' mb-0 font-weight-normal">R$ <span class="product-stock-price">'+e.order_product.stock_price+"</span></div>");var n=$("<td></td>",{class:"product-price-total row-total-value "+(is_mobile?"pt-2 pb-3 border-0 d-flex justify-content-between":"pl-3")});n.html((is_mobile?'<div class="font-weight-bold">Preço total</div><div>':"")+'<div class="'+(is_mobile?"h4":"h3")+' mb-0">R$ <span class="product-total-price">'+e.order_product.total_value+"</span></div>"+(is_mobile?"":' por <span class="m-product">'+e.order_product.count.replace(".00","")+"</span> "+e.order_product.sku.unit_display)+(is_mobile?"</div>":""));var i=$("<td></td>",{class:"product-action "+(is_mobile?"pt-3 border-0":"pl-3")});i.html('<a class="product-delete-button link link-small" title="Remover produto" data-pk="'+e.order_product.pk+'" href="/quotation/'+orderPK+"/results/"+e.order_product.pk+'/delete/"><img src="'+STATIC_IMAGE+'icons/close.svg"></a>'),t.append(a),t.append(o),t.append(r),t.append(n),t.append(i),$("div[data-supplier-id='"+e.order_status.distributor.id+"']").find("tbody").append(t),t.find(".product-count").stepper({limit:[1],incrementButton:'<img src="'+STATIC_IMAGE+'icons/plus.svg" >',decrementButton:'<img src="'+STATIC_IMAGE+'icons/minus.svg" >',allowWheel:!1,onStep:function(e,t){var a=Math.min.apply(Math,$(this).attr("step").split(","))||1;fixImputCount($(this),e,t,a)}}),addEventProductCount(),t.find(".product-count").trigger("change"),revealSeeMore(t.find(".row-more-options"))}function determineStep(e,t){return result=[],e.forEach(function(e){t%e==0&&result.push(e)}),result[0]}function fixImputCount(e,t,a,o){var r=e.attr("min")||.1,n=parseFloat(e.attr("max"))||1,o=parseFloat(o);(t=parseFloat(t))<r?e.val(formatNumber(o)):n<=t&&a||n<t+o&&a?e.val(o<=n?formatNumber(parseFloat(o*Math.floor(n/o))):o):a?e.val(o<=t?formatNumber(parseFloat(o*Math.ceil(t/o))):o):e.val(o<=t?formatNumber(parseFloat(o*Math.floor(t/o))):o),e.closest("p").find(".popup").removeClass("active"),e.closest("td").find(".popup").removeClass("active"),e.closest("tr").siblings(".stock-count-alert").remove(),e.closest("tr").removeClass("is-greater-than-stock"),e.change()}function formatNumber(e){return e=e.toFixed(2),(parseInt(e)==parseFloat(e)?parseInt:parseFloat)(e)}$(".js-btn-cart").click(function(){showLoadingMsg()}),$(".js-btn-clean-cart").click(function(e){e.preventDefault(),showLoadingMsg(),$.ajax({url:REMOVE_ALL_CART_ITEMS,type:"GET",success:function(e){e.deleted?window.location.href="/catalogue/":window.location.reload()}})}),$(".js-btn-remove-product-not-found").click(function(e){e.preventDefault(),$.ajax({url:$(this).attr("href"),type:"POST",success:function(){showTempAlert("warning","Produto removido do carrinho"),$(this).closest("tr").remove(),$(".products-quotation-not-found table tbody tr").length<1&&$(".products-quotation-not-found").slideUp()}})});var textPayments={boletoAntecipado:"<p>Nos pedidos com pagamento por boleto antecipado, o fornecedor irá lhe enviar o boleto por email com o valor total a ser pago, antes da entrega dos produtos.</p><p>Depois de confirmado o pagamento, o fornecedor irá emitir a NF e entregar o pedido no prazo informado.</p>",depositoEmConta:"<p>Nos pedidos com pagamento por depósito em conta antecipado, o fornecedor irá lhe informar a conta corrente e banco onde o valor total deverá ser depositado, antes da entrega dos produtos.</p><p>Depois de confirmado o pagamento, o fornecedor irá emitir a NF e entregar o pedido no prazo informado.</p>",transferencia:"<p>Nos pedidos com pagamento por transferência online, depois que o fornecedor aprovar o pedido, você deverá fazer a transferência online e, só então ele irá emitir a NF e entregar o pedido.</p><p>O valor final da transação (e faturado na NF) poderá variar para mais ou para menos se o produto for fornecido por Kg ou por eventuais falhas de estoque, mas o preço por Kg não será alterado.</p>",naEntrega:"<p>Nos pedidos com pagamento na entrega da mercadoria, depois que o fornecedor aprovar o pedido, ele irá emitir a NF, entregar o pedido e receber em dinheiro no ato da entrega.</p><p>O fornecedor poderá solicitar que sejam enviados documentos da sua empresa para aprovação de cadastro.</p><p>O valor final faturado na NF poderá variar para mais ou para menos se o produto for fornecido por Kg ou por eventuais falhas de estoque, mas o preço por Kg não será alterado.</p>",boletoAPrazo:"<p>Nos pedidos com pagamento por boleto à prazo, depois que o fornecedor aprovar o pedido, ele irá emitir a NF, entregar o pedido e emitir o boleto para pagamento no prazo acordado.</p><p><strong>Se está for sua primeira compra com este fornecedor, ele irá solicitar que sejam enviados documentos da sua empresa para aprovação de cadastro e crédito, o que poderá levar até 7 dias.</strong></p><p>Caso o fornecedor recuse a forma de pagamento escolhida, ele ainda poderá oferecer formas de pagamento alternativas, como pagamento à vista ou por cartão de crédito.</p><p>O valor final faturado na NF poderá variar para mais ou para menos se o produto for fornecido por Kg ou por eventuais falhas de estoque, mas o preço por Kg não será alterado.</p>",cartaoDeCredito:"<p>Nos pedidos com pagamento por cartão de crédito, depois que o fornecedor aprovar o pedido e for confirmada a transação no cartão, será emitida a NF e entregue o pedido.</p><p>O valor final da transação no cartão (e faturado na NF) poderá variar para mais ou para menos se o produto for fornecido por Kg ou por eventuais falhas de estoque, mas o preço por Kg não será alterado.</p>",cartaoDeBeneficios:"<p>Nos pedidos com pagamento por cartão de benefícios, depois que o fornecedor aprovar o pedido e for confirmada a transação no cartão, será emitida a NF e entregue o pedido.</p><p>O valor final da transação no cartão (e faturado na NF) poderá variar para menos se o produto for fornecido por Kg ou por eventuais falhas de estoque, mas o preço por Kg não será alterado.</p>"};function getPaymentText(e,t){return"À Vista"==e?"Boleto para pagamento antecipado"==t?textPayments.boletoAntecipado:"Depósito em conta antecipado"==t?textPayments.depositoEmConta:"Pagamento na entrega da mercadoria"==t?textPayments.naEntrega:textPayments.transferencia:"Boleto"==e?textPayments.boletoAPrazo:"Cartão de Benefícios"==e?textPayments.cartaoDeBeneficios:textPayments.cartaoDeCredito}function showPopUp(e,t,a){template=$('<p class="popup popup-error-not-multiple active"></p>'),e.length?e.addClass("active").text(a):t.append(template.text(a))}function revealSeeMore(t){var e=t.attr("data-exists");$.get(e,function(e){e&&t.removeClass("hidden")})}function finishButton(){var e,t=!!$(".distributor-results").length,a=!!$(".distributor-minimum-order-error:visible").length,o=$(".order-confirm-button"),r=$(".cart-total-mobile-message"),n=$(".js-cart-msg-error"),i=$(".js-cart-msg-error-mobile");if(r.hide(),n.hide(),o.removeClass("disabled"),i.hide(),!t)return o.addClass("disabled"),!1;e=$(".order-qtty-distributors").length&&"1"===$(".order-qtty-distributors")[0].innerText?"Continuar compra com este fornecedor":"Continuar compra com todos os fornecedores";var s="Nenhum fornecedor atingiu o valor mínimo de pedido.";return"undefined"!=typeof IS_MARKETPLACE&&IS_MARKETPLACE&&(s="Você ainda não atingiu o valor de pedido mínimo em produtos.",e="Prosseguir para pagamento"),$(".distributor-minimum-order-error:visible").length==$(".distributor-results").length?(o.addClass("disabled"),o.attr("data-original-title",s).tooltip("update"),r.attr("data-original-title",s).tooltip("update"),n.show(),!1):(a?(screen.width<768&&(i.show(),r.show()),o.tooltip("update"),r.tooltip("update")):(o.attr("data-original-title",e).attr("title",e).tooltip("update"),r.attr("data-original-title",e).attr("title",e).tooltip("update")),!0)}!function(g){g.fn.ionRangeSlider&&g(".products-quotation [name=delivery_time], .products-quotation [name=payment_time]").ionRangeSlider({type:"double",grid:!0,min:1,max:120,step:1});var l=g(".products-quotation"),c=null;productDistributorsBrandsRequest=null,l.find(".info-shopping-list .close").on("click",function(){g(this).parent().hide()});var d=g(".quotations-box");l.find(".product-quotation-add a").on("click",function(e){e.preventDefault();var t,a=l.find(".management"),o=l.find(".hydra-form").clone();if(!function(){var e=g('.basic-quotation.blank-quotation input[name*="count"]'),p=!0;if(e.each(function(){var e=g(this),t=e.val(),a=e.parent(),o=a.find(".popup"),r=e.attr("data-step"),n=false,i=parseFloat(e.attr("max")).toFixed(2);if(!t||!r){return true}r=r.split(",");for(var s=0,c=r.length;s<c;s++){if(t*100%(r[s]*100)===0){n=true;break}}if(parseFloat(t)>i){max_step=parseFloat(r[0]*Math.floor(i/r[0])).toFixed(2);var l="Estoque máximo deste produto é de "+max_step;showPopUp(o,a,l);p=false}if(!n){var d=r;if(r.length>1){r=r.join(", ");var u=r.lastIndexOf(",");d=r.substring(0,u)+" ou"+r.substring(u+1,r.length)}var l="Este produto é fornecido em múltiplos de "+d+".";showPopUp(o,a,l);p=false}}),p)return!0;var t=g(".popup");{var a;t.length&&(a=g(t[0]).offset().top,g("html, body").scrollTop(a-250))}return!1}()||((t=g(".wrapper-basic-quotation .basic-quotation:not(.hydra-form)")).find(".product-quotation-delete-form").show(),t.find("input[name*=-count]").attr("required","required"),d.prepend(t),d.find("div").removeClass("blank-quotation"),t.find(".popup").removeClass("active"),g(".basic-quotation:not(.hydra-form, .blank-quotation)").each(function(e,t){g(t).find("input, select").each(function(){this.name&&(this.name=this.name.replace(/\d+/gi,e))})})),0===g(".blank-quotation").size()){o.addClass("blank-quotation"),o.find("input").removeAttr("required"),o.find(".product-quotation-delete-form").hide(),g(".wrapper-basic-quotation").prepend(o.removeClass("hydra-form"));var r=l.find(".basic-quotation:not(.hydra-form, .blank-quotation)").length;a.find("[name=form-TOTAL_FORMS]").val(r),o.find("input, select").each(function(){this.value=null,this.name&&(this.name=this.name.replace(/__prefix__/gi,r))}),o.find("input[name*=-count]").stepper({limit:[1],incrementButton:'<img src="'+STATIC_IMAGE+'icons/plus.svg" >',decrementButton:'<img src="'+STATIC_IMAGE+'icons/minus.svg" >',allowWheel:!1,onStep:function(e,t){var a=1;g(this).attr("data-step")&&(a=Math.min.apply(Math,g(this).attr("data-step").split(","))),fixImputCount(g(this),e,t,a)}});var n=g(".wrapper-basic-quotation").find("input[name*=-name]").closest("p"),i=g(".wrapper-basic-quotation").find("select[name*=-sku_choice]").closest("p"),s=g(".wrapper-basic-quotation").find("select[name*=-sku_choice]");s.append(g("<option></option>"));for(var c=0;c<ALL_QUOTATION_PRODUCTS.length;c++)s.append(g("<option>",{value:ALL_QUOTATION_PRODUCTS[c].id,text:ALL_QUOTATION_PRODUCTS[c].name}));n.hide(),i.show(),g(".blank-quotation select[name*=-brand]").trigger("change"),s.chosen({search_contains:!0,allow_single_deselect:!0,placeholder_text_single:"Buscar Produto..."}),o.find("[name*=brand]").chosen({search_contains:!0,allow_single_deselect:!0,placeholder_text_single:"Buscar marcas..."}),o.find("[name*=distributor]").chosen({search_contains:!0,allow_single_deselect:!0,placeholder_text_single:"Buscar distribuidora..."}),g(".quotations-box").trigger("change"),g(".product-quotation-add").hide(),g(".product-quotation-add-off").show()}}),l.find('.product-quotation-add-form input[type="submit"]').on("click",function(e){var t,a,o=g('.basic-quotation:not(.hydra-form, .blank-quotation) input[name*="count"]'),u=!0;o.each(function(){var e=g(this),t=e.val(),a=e.parent(),o=e.closest("p").find(".popup"),r=e.attr("data-step"),n=parseFloat(e.attr("max")).toFixed(2),i=!1;if(t&&r){for(var s,c,l=0,d=(r=r.split(",")).length;l<d;l++)if(100*t%(100*r[l])==0){i=!0;break}parseFloat(t)>n&&(max_step=parseFloat(r[0]*Math.floor(n/r[0])).toFixed(2),showPopUp(o,a,"Estoque máximo deste produto é de "+max_step),u=!1),i||(1<(c=r).length&&(s=(r=r.join(", ")).lastIndexOf(","),c=r.substring(0,s)+" ou"+r.substring(s+1,r.length)),showPopUp(o,a,"Este produto é fornecido em múltiplos de "+c+"."),u=!1)}}),u?g(".basic-quotation:not(.hydra-form, .blank-quotation)").each(function(e,t){var a=g(t).find("select[name*=-brand] option:selected").index(),o=g(t).find("select[name*=-distributor] option:selected").index(),r=g(t).find("select[name*=-sku_choice] option:selected").html();(0==a||0<a)&&0==o&&r?(g(t).find("input[name*=-name]").val(r),g(t).find("select[name*=-sku_choice] option:selected").removeAttr("selected"),g(t).find("select[name*=-sku_choice]").removeAttr("required")):0==a&&0<o&&r&&g(t).find("input[name*=-name]").val("")}):(t=g(".popup"),g(".blank-quotation select[name*=-sku_choice]").attr("required",!0),t.length&&(a=g(t[0]).offset().top,g("html, body").scrollTop(a-150)),e.preventDefault())}),l.on("click",".product-quotation-delete-form a",function(e){e.preventDefault();var t=l.find(".management"),a=l.find(".basic-quotation:not(.hydra-form, .blank-quotation)"),o=a.length-1;a.length;g(this).parentsUntil(".basic-quotation").parent().remove(),t.find("[name=form-TOTAL_FORMS]").val(o),g(".basic-quotation:not(.hydra-form, .blank-quotation)").each(function(e,t){g(t).find("input, select").each(function(){this.name&&(this.name=this.name.replace(/\d+/gi,e))})}),l.find(".not-found-product:not(.hydra-form, .blank-quotation)").length<1&&g(".product-quotation-not-found-products").remove(),g(".quotations-box").trigger("change")});var u=0;l.on("keyup",".basic-quotation [name*=name]",function(e){var t,a,o,r,n,i=g(this).parent().siblings(".product-autocomplete"),s=g(this).val().trim();!s||s.length<3?p(g(this))&&(g(".product-quotation-add-off").show(),g(".product-quotation-add").hide()):(v(g(this)),c&&4!==c.readyState&&c.abort(),t=g(this).parentsUntil("form").parent().offset().left,i.css("left",t),13!==e.keyCode&&37!==e.keyCode&&38!==e.keyCode&&39!==e.keyCode&&40!==e.keyCode&&9!==e.keyCode&&(c=g.post(PRODUCT_QUOTATION_AUTOCOMPLETE_URL,{query:s},function(e){if(u=0,i.find("ul").empty(),e.suggestions.length){i.find("ul").html("");for(var t=g(document.createDocumentFragment()),a=0;a<e.suggestions.length;a++)t.append(g("<li>").text(e.suggestions[a]).addClass(0===a?"selected":null).attr("title",e.suggestions[a]));i.find("ul").append(t),i.show()}else i.hide()})),i.is(":visible")&&(a=i.find("li"),38===e.keyCode?(a.removeClass("selected"),u=0===u?a.length-1:u-1,a.eq(u).length&&a.eq(u).addClass("selected")):40===e.keyCode&&(a.removeClass("selected"),u=u===a.length-1?0:u+1,a.eq(u).length&&a.eq(u).addClass("selected")),38!==e.keyCode&&40!==e.keyCode||(r=(o=a.eq(u)).position().top,n=o.outerHeight(!0),optionsList=i.find("ul"),r<=0?optionsList.scrollTop(n*u):r>=optionsList.outerHeight(!0)&&optionsList.scrollTop(n*u-4*n))))}),l.find("form").on("keydown",function(e){var t,a=g(this).find(".product-autocomplete:visible"),o=g(this).find(".blank-quotation input[name*=-name]");13===e.keyCode&&(p(o)&&g(".product-quotation-add:visible a").trigger("click"),e.preventDefault()),!a.length||13!==e.keyCode&&9!==e.keyCode||(t=a.find(".selected").text())&&(a.parent().find("[name*=name]").val(t).focus().trigger("change"),a.hide())}),l.on("focus",".basic-quotation [name*=name]",function(e){var t=g(this).parent().siblings(".product-autocomplete");t.find("li:not(.loading)").length&&t.show()}),l.on("imput change blur",".basic-quotation [name*=name], .basic-quotation [name*=sku_choice]",function(e,t){var o,a,r,n,i=-1!=this.name.indexOf("brand"),s=g(this).parents(".basic-quotation"),c=s.find("select[name*=-distributor]"),l=s.find("input[name*=-name]"),d=s.find("select[name*=-sku_choice]"),u=s.find("span.unit"),p=s.find("input[name*=-count]"),m=s.find("select[name*=-brand]"),f=g(this).parent().siblings(".product-autocomplete"),h={};"blur"!==e.type&&"focusout"!==e.type?"change"==e.type&&(o=c.find(":selected").val(),a=d.find(":selected").val(),r=l.val()||l.attr("value"),n=m.find(":selected").val(),Boolean(a)?(h.sku_pk=a,v(d)):h.query=r,n&&(h.brand=n),o&&(h.distributor_pk=o),p.add(u).addClass("loading"),productDistributorsBrandsRequest=g.post(PRODUCT_QUOTATION_PRODUCT_DISTRIBUTORS_BRANDS_URL,h,function(e){update_distributors_options(c,e.distributors,o),s.find("[name*=distributor]").trigger("chosen:updated"),i||update_brand_options(m,e.brands,n),s.find("[name*=brand]").trigger("chosen:updated");var t,a=Math.min.apply(Math,e.multipliers);a==1/0&&(a=1),p.attr("min",a),p.attr("data-step",e.multipliers),p.removeClass("loading"),p.val(p.val()||1),null!==e.max_stock&&(t=p.val(),p.attr("max",e.max_stock),0<t.length&&parseInt(t.match(/\d+/))>e.max_stock&&(p.val(e.max_stock),fixImputCount(p,t,!0,a))),u.removeClass("loading"),1<e.units.length?u.html(""):u.html(e.units[0].text)})):setTimeout(function(){f.hide()},300)}),l.on("click",".basic-quotation .product-autocomplete li",function(e){var t=g(this).parentsUntil(".basic-quotation").parent().find("[name*=name]"),a=g(this).text();t.val(a).focus().trigger("change")}),l.on("change",".basic-quotation [name*=-distributor], .basic-quotation [name*=-brand]",function(e,t){var a=g(this).parentsUntil(".basic-quotation").parent(),o=a.find("input[name*=-name]").closest("p"),r=a.find("select[name*=sku_choice]").closest("p"),n=o.find("input"),i=r.find("select"),s=a.find("select[name*=-distributor]").find("option:selected").val(),c=n.val()||n.attr("value"),l=a.find("select[name*=-brand]").find("option:selected").val(),d=i.find("option:selected").html(),u=a.find("input[name*=sku]").attr("value")||c;s||l?(o.hide(),n.attr("required",null).val(null),r.show(),i.attr("required",!0),a.find("[name*=sku_choice]").chosen({search_contains:!0,allow_single_deselect:!0,placeholder_text_single:"Buscar produto..."}),g.post(PRODUCT_QUOTATION_DISTRIBUTOR_PRODUCTS_URL,{distributor:s,brand:l},function(e){i.empty().append(g("<option>"));var t=e.skus;t.length||(t=ALL_QUOTATION_PRODUCTS);for(var a=0;a<t.length;a++)i.append(g("<option>",{value:t[a].id,text:t[a].name}));d?(i.find(':textEquals("'+d+'")').attr("selected",!0),v(i)):u&&i.find(':textEquals("'+u+'")').attr("selected",!0),i.trigger("chosen:updated"),i.trigger("change")})):(d?m(i,ALL_QUOTATION_PRODUCTS,d):u?function(e,t,a,o){e.empty().append(g("<option>"));for(var o=RemoveAccents(o.trim()),r=0;r<t.length;r++){0<=RemoveAccents(t[r].name).indexOf(o)&&e.append(g("<option>",{value:t[r].id,text:t[r].name}))}a&&e.find(':textEquals("'+a+'")').attr("selected",!0)}(i,ALL_QUOTATION_PRODUCTS,u,n.attr("value")):c&&m(i,ALL_QUOTATION_PRODUCTS,c),i.trigger("chosen:updated"),i.trigger("change"))}),l.hasClass("products-quotation-empty")?(l.find(".basic-quotation:not(.hydra-form) [name*=brand]").chosen({search_contains:!0,allow_single_deselect:!0,placeholder_text_single:"Buscar distribuidora..."}),l.find(".basic-quotation:not(.hydra-form) [name*=distributor]").chosen({search_contains:!0,allow_single_deselect:!0,placeholder_text_single:"Buscar distribuidora..."}),l.find(".basic-quotation .blank-quotation").length||l.find(".product-quotation-add a").trigger("click")):l.not(".products-quotation-empty").length&&(l.find(".basic-quotation:not(.hydra-form, .blank-quotation) [name*=distributor]").trigger("change",[!0]),l.find(".basic-quotation:not(.hydra-form .blank-quotation) [name*=name]").closest("p").hide(),l.find(".basic-quotation:not(.hydra-form .blank-quotation) [name*=sku_choice]").closest("p").show(),l.find(".basic-quotation:not(.hydra-form) [name*=brand]").chosen({search_contains:!0,allow_single_deselect:!0,placeholder_text_single:"Buscar marcas..."}),l.find(".basic-quotation:not(.hydra-form) [name*=distributor]").chosen({search_contains:!0,allow_single_deselect:!0,placeholder_text_single:"Buscar distribuidora..."}),l.find(".basic-quotation:not(.hydra-form, .blank-quotation) select[name*=sku_choice]").chosen({search_contains:!0,allow_single_deselect:!0,placeholder_text_single:"Buscar Produtos..."}),l.find(".basic-quotation:not(.hydra-form) [name*=count]").stepper({limit:[1],incrementButton:'<img src="'+STATIC_IMAGE+'icons/plus.svg" >',decrementButton:'<img src="'+STATIC_IMAGE+'icons/minus.svg" >',allowWheel:!1,onStep:function(e,t){var a=1;g(this).attr("data-step")&&(a=Math.min.apply(Math,g(this).attr("data-step").split(","))),fixImputCount(g(this),e,t,a)}}),l.find(".basic-quotation .blank-quotation").length||l.find(".product-quotation-add a").trigger("click"));var e=g(".products-quotation.quotation-edit"),t=e.find("form .basic-quotation:not(.not-found-product .blank-quotation)");function v(e){p(e)&&(g(".product-quotation-add-off").hide(),g(".product-quotation-add").show())}function p(e){return!!e.closest("div").hasClass("blank-quotation")}function m(e,t,a){e.empty().append(g("<option>"));for(var o=0;o<t.length;o++)e.append(g("<option>",{value:t[o].id,text:t[o].name}));a&&e.find(':textEquals("'+a+'")').attr("selected",!0)}g.fn.chosen&&(t.find("[name*=distributor]").chosen({search_contains:!0,allow_single_deselect:!0,placeholder_text_single:"Buscar distribuidora..."}),t.find("[name*=brand]").chosen({search_contains:!0,allow_single_deselect:!0,placeholder_text_single:"Buscar marcas..."})),e.find("form .not-found-product").filter(function(){var e=g(this).find("[name*=name]");g(this).find("[name*=sku_choice]").siblings("label").html("Produto*: "+e.attr("value"))}),t.find("[name*=sku_choice]").filter(function(){g(this).closest("p").show(),g(this).chosen({search_contains:!0,allow_single_deselect:!0,placeholder_text_single:"Buscar Produtos..."})}),t.find("[name*=distributor]:has(:selected), [name*=brand]:has(:selected)").first().trigger("change",[!0]),g(".info-button").click(function(){var e=g(".info-shopping-list");e.toggle(),e.is(":visible")?(localStorage["show-cotation-tips"]=1,g(this).find("span:first-child").html("Ocultar"),g(this).find(".icon").removeClass("collapse_down")):(localStorage["show-cotation-tips"]=0,g(this).find("span:first-child").html("Visualizar"),g(this).find(".icon").addClass("collapse_down"))}),g(".advanced-button").click(function(){var e=g(".advanced-quotation");e.toggle(),e.is(":visible")?(localStorage["show-advanced-form"]=1,g(this).addClass("button-primary")):(localStorage["show-advanced-form"]=0,"1;120"!=g("input[name=delivery_time]").val()&&"1;120"!=g("input[name=delivery_time]").val()||g(this).removeClass("button-primary"))}),g(".quotations-box").on("change",function(e){0<g(this).find("div[class*=basic-quotation]").size()?(g(".false-submit").hide(),g(".true-submit").show()):(g(".false-submit").show(),g(".true-submit").hide())}),0==localStorage["show-cotation-tips"]&&g(".info-button").trigger("click"),g(".quotations-box").trigger("change"),0!=localStorage["show-advanced-form"]&&1==localStorage["show-advanced-form"]?(g(".advanced-quotation").show(),g(".advanced-button").addClass("button-primary")):g(".advanced-quotation").hide(),g("input[name*=-count]").removeClass("loading"),g("select[name*=-unit]").removeClass("loading"),g(".edit-quotation-paginator .pagination-inner a").on("click",function(e){e.preventDefault();var t,a,o=g(this).attr("href");"#"!=o&&(t=o.split("=")[1],(a=g("#edit-quotation-form")).find("input[name=go_to_page]").val(t),a.submit())})}(jQuery),$(".js-btn-redo-list").attr("href",$(".open-modal-redo-list").attr("href")),$(".js-btn-redo-list").on("click",function(){$("#modal-redo-list").modal("hide")}),$(".order-confirm-button").click(function(e){finishButton()||e.preventDefault()}),$(".row-more-options").each(function(){revealSeeMore($(this))}),finishButton();var excludeProductOfCart,productsQuotationSummary,orderTotal,orderQttyDistributors,orderQttyProducts,formAddOtherItems,productsQuotationResults=$(".products-quotation-results");function addEventProductCount(){productsQuotationResults.find(".distributor-results .product-count").each(function(){var t;$(this).on("keyup change",$.debounce(1e3,function(e){t!==$(this).val()?(t=$(this).val(),[9,16,17,18,20,27,33,34,35,36,37,39,91,106,107,111,144].includes(e.keyCode)||setProductQuantity($(this))):parseFloat($(this).val())>=parseFloat($(this).attr("max"))&&showMaxMsg($(this))}))})}function setProductQuantity(t){var e=t.data("pk"),a=parseFloat(t.attr("step")),o=parseFloat(t.val()),r=parseFloat(t.attr("max"));o<=0?t.val(formatNumber(a)):(r<o&&fixImputCount(t,o,!0,a),100*o%(100*a)!=0&&fixImputCount(t,o,!0,a),t.closest(".product-quantity").find(".js-input-loading").removeClass("d-none"),t.closest(".product-row").find(".product-action").addClass("disable-action"),$(".btn-concluir-compra").addClass("disabled"),t.closest(".distributor-results").find(".distributor-confirm-button").addClass("disabled"),$.post(PRODUCT_QUOTATION_UPDATE_COUNT_ENDPOINT,{orderproduct_pk:e,count:t.val()},function(e){updateProductQuantity(t,a,e.order_product),updatePaymentTypePrice(e.order.payment_method_types),updateSupplierValues(t,e.order.distributors,e.order_product),updateCartValues(e.order.cart_values),updateSummaryOrder(e.order.distributors),t.closest(".product-quantity").find(".js-input-loading").addClass("d-none"),t.closest(".product-row").find(".product-action").removeClass("disable-action"),$(".btn-concluir-compra").removeClass("disabled"),t.closest(".distributor-results").find(".distributor-confirm-button").removeClass("disabled"),r<=o||r<o+a?showMaxMsg(t):(t.tooltip("hide").tooltip("disable"),t.removeAttr("title")),$(".product-count-disabled").removeAttr("disabled"),finishButton()}))}function showMaxMsg(e){e.attr("data-toggle","tooltip"),e.attr("data-placement","left"),e.attr("title","Estoque máximo atingido"),e.attr("data-original-title","Estoque máximo atingido"),e.tooltip().tooltip("enable").tooltip("show"),setTimeout(function(){e.tooltip("hide").tooltip("disable"),e.removeAttr("title")},3e3)}function updateProductQuantity(e,t,a){var o=parseFloat(e.attr("max"));a.count>=o?e.val(a.count>=t?formatNumber(t*Math.floor(parseFloat(a.count)/t)):t):e.val(formatNumber(parseFloat(a.count)))}function updatePaymentTypePrice(e){for(var t=0;t<e.length;t++)$(".js-payment-price-for-all-"+e[t].id).text(e[t].value),$("#type-payment-method-"+e[t].id).prop("checked",e[t].selected),e[t].selected?$("#type-payment-method-"+e[t].id).closest(".js-btn-set-all-payment").removeClass("is-active"):$("#type-payment-method-"+e[t].id).closest(".js-btn-set-all-payment").addClass("is-active")}function updateSupplierValues(e,t,a){for(var o,r=e.closest(".distributor-results").attr("data-supplier-id"),n=e.closest(".product-row").find(".m-product"),i=e.closest(".product-row").find(".product-total-price"),s=e.closest(".distributor-results").find(".card-footer .distributor-total-price"),c=e.closest(".distributor-results").find(".card-footer .js-distributor-subtotal"),l=0;l<t.length;l++)t[l].id==r&&(o=t[l]);n.text(a.count.toString().replace(".00","")),i.text(stringToCurrency(a.total_value.replace(",","."))),s.text(stringToCurrency(o.values.total_with_delivery.replace(",","."))),c.text("R$ "+stringToCurrency(o.values.total_value.replace(",","."))),o.has_minimum_order?(hideMinimumOrderError(e.closest(".distributor-results")),hidePaidFreight(e.closest(".distributor-results"))):o.is_deliverable?(hideMinimumOrderError(e.closest(".distributor-results")),showPaidFreight(e.closest(".distributor-results"))):(showMinimumOrderError(e.closest(".distributor-results")),0<e.closest(".distributor-results").find(".js-supplier-freight .js-paid").length?e.closest(".distributor-results").find(".js-supplier-freight .js-paid").show():(e.closest(".distributor-results").find(".js-supplier-freight .js-paid").hide(),e.closest(".distributor-results").find(".js-supplier-freight .js-free").show())),finishButton()}function updateCartValues(e){$(".js-order-subtotal").text("R$ "+stringToCurrency(e.total_value)),$(".box-order-price .order-total").text(stringToCurrency(e.total_with_delivery)),0<parseFloat(e.delivery_price.replace(",","."))?$(".js-freight-price").text("R$ "+e.delivery_price):$(".js-freight-price").text("Grátis")}function updateSummaryOrder(e){for(var t=[],a="",o=0,r=0;r<e.length;r++)-1==t.indexOf(e[r].chosen_payment_method.type)&&t.push(e[r].chosen_payment_method.type),(e[r].is_deliverable||e[r].has_minimum_order)&&(a=a+"<span class='text-overflow'>"+$("div[data-supplier-id='"+e[r].id+"']").find(".js-supplier-name").text()+"</span><span class='float-right'>R$ "+e[r].values.total_with_delivery+"</span><br>",o+=parseFloat(e[r].values.total_with_delivery.replace(",",".")));var n="Sua compra continuará apenas com os fornecedores que atingiram pedido mínimo:<br><br><div class='text-left'>"+(a=a+"<hr><span>TOTAL: </span><span class='float-right'>R$ "+o.toFixed(2).toString().replace(".",",")+"</span><br><br>")+"</div>Os outros permanecerão no carrinho.";"undefined"!=typeof IS_MARKETPLACE&&IS_MARKETPLACE&&(n="Prosseguir para pagamento."),$(".btn-concluir-compra, .mobile-minimum-order-tooltip").attr("data-original-title",n).tooltip("update"),t=t.sort();for(var i="",s=0;s<t.length;s++)0==t[s]||3==t[s]?i+="<li>À Vista</li>":1==t[s]?i+="<li>Boleto a prazo</li>":2==t[s]&&(i+="<li>Cartão de Crédito</li>");$(".js-payment-list").html(i)}function showMinimumOrderError(e){var t=e.find(".card-footer .distributor-confirm-button"),a=e.find(".card-footer .distributor-minimum-order-error"),o=e.find(".card-footer .more-products-link");t.hide(),a.show(),o.text("Adicione outras ofertas para atingir pedido mínimo!"),e.find(".js-minimum-order-alert").removeClass("is-active"),e.find(".js-supplier-total-price").addClass("text-yellow")}function hideMinimumOrderError(e){var t=e.find(".card-footer .distributor-confirm-button"),a=e.find(".card-footer .distributor-minimum-order-error");t.show(),a.hide(),e.find(".js-minimum-order-alert").addClass("is-active"),e.find(".js-supplier-total-price").removeClass("text-yellow")}function hideFreight(e){e.find(".js-supplier-freight").hide()}function hidePaidFreight(e){e.find(".js-supplier-freight").show(),e.find(".js-supplier-freight .js-paid").hide(),e.find(".js-supplier-freight .js-free").show(),e.find(".card-footer .more-products-link").text("Adicione outras ofertas deste fornecedor")}function showPaidFreight(e){e.find(".js-supplier-freight").show(),e.find(".js-supplier-freight .js-paid").show(),e.find(".js-supplier-freight .js-free").hide(),e.find(".card-footer .more-products-link").text("Adicione outras ofertas e garanta frete grátis!")}function supplierInCart(e){var t={inCart:!1,minimumOrder:!1};return $(".js-supplier-name").each(function(){$(this).text().toUpperCase()===e.toUpperCase()&&(t.inCart=!0,$(this).closest(".distributor-results").find(".distributor-confirm-button").is(":visible")&&(t.minimumOrder=!0))}),t}function renderProducts(e){for(var t=[],a=0;a<e.length;a++){var o=(parseFloat(e[a].unit_price)*parseFloat(e[a].multiplier)).toFixed(2).replace(".",","),r="00"===e[a].multiplier.split(".")[1]?e[a].multiplier.split(".").shift():e[a].multiplier,n=$('<tr class="product-row '+(is_mobile?"border-top":"")+'">'),i=supplierInCart(e[a].distributor);n.append($('<td class="product-distributor '+(is_mobile?"pb-2 pt-3 border-0 font-weight-bolder":"")+'">').html('<div><span class="table-supplier-name">'+e[a].distributor+"</span></div>"+(i.inCart?i.minimumOrder?"<span class='badge badge-success' data-toggle='tooltip' data-placement='top' title='Este fornecedor está no carrinho e já atingiu pedido mínimo'>Pedido mínimo atingido</span>":"<span class='badge badge-light' data-toggle='tooltip' data-placement='top' title='Este fornecedor está no carrinho, mas ainda não atingiu pedido mínimo'>No carrinho</span>":""))).attr("title",e[a].distributor),n.append($('<td class="product-title pl-md-3 mp '+(is_mobile?"py-2 border-0":"")+'">').html('<div class="d-flex"> <div> <div class="cart__supplier-box__img product-image mr-3"><img src="'+e[a].photo+'" class="lazy" alt="" /></div></div> <div class="product-name cart__supplier-box__product-name">'+e[a].sku+'<br /><span class="badge badge-light">'+e[a].brand+"</span></div>  </div>")),n.append($('<td class="product-quantity pl-md-3 '+(is_mobile?"py-2 border-0 text-center":"")+'">').html("Mínimo de "+e[a].multiplier.replace(".00","").replace(".",",")+e[a].unit_display)),n.append($('<td class="product-price-unit mb-0 font-weight-normal pl-md-3 '+(is_mobile?"pt-2 pb-0 border-0 d-flex justify-content-between":"h3")+'">').html((is_mobile?'<span class="font-weight-bold">Preço unitário:</span>':"")+'<span class="product-stock-price no-break">R$ '+e[a].unit_price.replace(".",",")+"</span>")),n.append($('<td class="product-price-total pl-md-3 '+(is_mobile?"pt-2 pb-3 border-0 d-flex justify-content-between":"")+'">').html((is_mobile?'<span class="font-weight-bold">Preço total:</span>':"")+'<span class="'+(is_mobile?"":"h3")+' mb-0">R$ '+o+"</span>"+(is_mobile?"":' <br> <small class="m-product">por '+r.replace(".",",")+" "+e[a].unit_display+"</small>"))),n.append($('<td class="product-replace pl-md-3 text-center '+(is_mobile?"pb-2 pt-3 border-0":"")+'">').html('<button class="link link-small js-btn-replace-product border-0 bg-white" data-href="'+e[a].url+'"><img src="'+STATIC_IMAGE+'icons/replace.svg" class="replace">'+(is_mobile?"":"<br>")+" Substituir</button>")),t.push(n)}return t}function addsSubstituteEvent(){$(".js-btn-replace-product").off("click"),$(".js-btn-replace-product").on("click",function(e){var t=$(this).attr("data-href");fetch(t).then(function(e){if(204==e.status)window.location.reload();else{if(400!=e.status)throw new Error("Ocorreu um erro: Código "+e.status+".");$("#modal-more-options").modal("hide"),$("#modal-warning-substitution").modal("show")}}).catch(function(e){console.error(e)})})}function asyncGeneratorStep(e,t,a,o,r,n,i){try{var s=e[n](i),c=s.value}catch(e){return void a(e)}s.done?t(c):Promise.resolve(c).then(o,r)}function _asyncToGenerator(s){return function(){var e=this,i=arguments;return new Promise(function(t,a){var o=s.apply(e,i);function r(e){asyncGeneratorStep(o,t,a,r,n,"next",e)}function n(e){asyncGeneratorStep(o,t,a,r,n,"throw",e)}r(void 0)})}}function buildSearchProductResults(e,t){return _buildSearchProductResults.apply(this,arguments)}function _buildSearchProductResults(){return(_buildSearchProductResults=_asyncToGenerator(regeneratorRuntime.mark(function e(t,a){var o,r,n,i,s,c=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=2<c.length&&void 0!==c[2]?c[2]:0,e.next=3,fetch("/api/app/cart/cart-item");case 3:return n=e.sent,e.next=6,n.json();case 6:for(i=e.sent,!n.ok||i.detail?r={count:0,next:null,previous:null,results:[]}:(r=i,t.html("")),s=0;s<a.length;s++)buildResult(a[s],"home",t,r,s,o);$("img.lazy").Lazy({effect:"fadeIn",visibleOnly:!0,threshold:200,onError:function(e){e.attr("src",STATIC_IMAGE+"icons/no-photo.svg")}});case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function buildProfileType(e){var t=$("#input-cpf-modal").is(":checked");e.city_cnpj&&$(".js-input-cnpj").removeClass("d-none").find("input").prop("checked","CNPJ"==REGION.type),e.city_cpf?$(".js-input-cpf").removeClass("d-none").find("input").prop("checked","CPF"==REGION.type||t):$(".js-input-cnpj").removeClass("d-none").find("input").prop("checked",!0)}function asyncGeneratorStep(e,t,a,o,r,n,i){try{var s=e[n](i),c=s.value}catch(e){return void a(e)}s.done?t(c):Promise.resolve(c).then(o,r)}function _asyncToGenerator(s){return function(){var e=this,i=arguments;return new Promise(function(t,a){var o=s.apply(e,i);function r(e){asyncGeneratorStep(o,t,a,r,n,"next",e)}function n(e){asyncGeneratorStep(o,t,a,r,n,"throw",e)}r(void 0)})}}$(".form-add-other-items button[type=submit]").on("click",function(e){e.preventDefault();for(var t=$(this).closest("form").find("input[name=count]"),a=parseFloat(t.val()),o=t.attr("step").split(","),r=!1,n=t.attr("max"),i=0,s=o.length;i<s;i++)if(100*a%(100*o[i])==0){r=!0;break}var c=t.closest("form").find(".popup");return r&&0!==a?n<a?(max_step=parseFloat(o[0]*Math.floor(n/o[0])).toFixed(2),showPopUp(c,t,"Estoque máximo deste produto é de "+max_step),!1):void $(this).unbind("click").click():(showPopUp(c,t,"Este produto é fornecido em múltiplos de "+o.join(" ou ").replace(".",",")),!1)}),"function"==typeof $().stepper&&productsQuotationResults.find(".product-count").stepper({limit:[0],incrementButton:'<img src="'+STATIC_IMAGE+'icons/plus.svg" >',decrementButton:'<img src="'+STATIC_IMAGE+'icons/minus.svg" >',allowWheel:!1,onStep:function(e,t){var a=$(this).attr("step").split(","),o=determineStep(a,e)||Math.min.apply(Math,a)||1;fixImputCount($(this),e,t,o)}}),$(document).ready(function(){addEventProductCount()}),productsQuotationResults.length&&(excludeProductOfCart=function(e,i,s,c){$.post(e,function(e){for(var t,a=i,o=0;o<e.payment_method_types.length;o++)$(".js-payment-price-for-all-"+e.payment_method_types[o].id).text(e.payment_method_types[o].value);for(var r=!1,n=0;n<e.distributors.length;n++)(e.distributors[n].has_minimum_order||e.distributors[n].is_deliverable)&&(r=!0),e.distributors[n].id==s&&(t=e.distributors[n]);t?(c.parent().siblings(".card-footer").find(".distributor-total-price").text(t.values.total_with_delivery),c.parent().siblings(".card-footer").find(".js-distributor-subtotal").text("R$ "+t.values.total_value),t.has_minimum_order?($(".btn-concluir-compra").removeClass("disabled"),a.find(".distributor-confirm-button").removeClass("disabled")):t.is_deliverable?($(".btn-concluir-compra").removeClass("disabled"),a.find(".distributor-confirm-button").removeClass("disabled"),hideMinimumOrderError(a),showPaidFreight(a)):showMinimumOrderError(a),finishButton()):(a.slideUp(300,function(){a.remove(),finishButton()}),r&&$(".btn-concluir-compra").removeClass("disabled"),e.distributors.length<1&&($(".col-order, .section--divider-line, .cart-total-mobile").addClass("d-none"),$(".cart-line-itens").append('<div class="col-md-12"><div class="text-center py-5 my-5 pt-5"><img src="'+STATIC_IMAGE+'icons/search-cart-orange.svg" class="icon--lg mb-3"><h2 class="h2 mb-3">Seu carrinho está vazio!</h2><p class="p-2 mb-0">Mas você pode continuar suas compras <a href="/catalogue" class="link link-small link-light">acessando o catálogo</a></p></div></div>'))),updateSummaryOrder(e.distributors),orderQttyDistributors.text(e.distributors.length),orderQttyProducts.text(e.products.count),$(".total-products, .js-total-products").text(e.products.count),updateCartValues(e.cart_values),finishButton()}).fail(function(){console.warn("Erro ao tentar excluir produto"),window.location.reload()})},productsQuotationSummary=$(".status-result"),orderTotal=$(".box-order-price .order-total"),orderQttyDistributors=$(".order-qtty-distributors"),orderQttyProducts=$(".order-qtty-products"),formAddOtherItems=$(".form-add-other-items"),productsQuotationResults.on("click",".product-delete-button",function(e){var t=$(this),a=t.closest(".distributor-results").attr("data-supplier-id");tr=t.parents("tr"),tableDist=t.parents("table"),distResults=tableDist.parents(".distributor-results"),ecommerceGMT("removeFromCart",{remove:{products:[{name:tr.find(".product-box-link.text-underline").attr("data-sku-name"),id:tr.attr("data-sku"),price:tr.find(".product-stock-price").text().replace(",","."),brand:tr.find(".product-box-link span").text(),category:tr.attr("data-category"),variant:"Múltiplo de "+tr.find(".product-count").attr("step").replace(".00",""),quantity:tr.find(".product-count").val()}]}}),tr.next(".row-more-options").remove(),$(".btn-concluir-compra").addClass("disabled"),distResults.find(".distributor-confirm-button").addClass("disabled"),tr.find(".product-count").tooltip("hide").tooltip("disable"),tr.find(".product-count").removeAttr("title"),tr.hasClass("has-cheaper-alternative")&&tr.next(".alert-cheaper-alternative").remove(),tr.slideUp(300,function(){tr.remove()}),excludeProductOfCart(t.attr("href"),distResults,a,tableDist),e.preventDefault()}),formAddOtherItems.find("[name=sku]").on("change",function(e,r){var t=$(this),a=t.find(":selected").val(),o=t.attr("data-distributor-pk"),n=t.siblings("[name=brand]"),i=n.find(":selected").val(),s=t.parent().find("input[name=count]"),c=t.siblings("div.unit");r=void 0===r||r,a?$.post(PRODUCT_QUOTATION_PRODUCT_DISTRIBUTORS_BRANDS_URL,{distributor_pk:o,sku_pk:a,brand:i},function(e){if(r){n.empty().append($("<option>"));for(var t=0;t<e.brands.length;t++)n.append($("<option>",{value:e.brands[t],text:e.brands[t]}));n.removeAttr("disabled").trigger("chosen:updated")}var a;null!==e.max_stock&&(0<(a=s.val()).length&&parseInt(a.match(/\d+/))>e.max_stock&&s.val(e.max_stock),s.attr("max",e.max_stock)),s.attr("step",e.multipliers);var o=Math.min.apply(Math,e.multipliers);o==1/0&&(o=1),s.attr("min",o),s.removeAttr("disabled"),1<e.units.length?c.html(""):c.html(e.units[0].text)}):(n.attr("disabled",!0).empty().trigger("chosen:updated"),s.attr("disabled",!0).val(null),c.attr("disabled",!0).empty().trigger("chosen:updated"))}).chosen({search_contains:!0,allow_single_deselect:!0,placeholder_text_single:"Buscar produtos"}),formAddOtherItems.find("[name=brand]").on("change",function(e){var t=$(this),a=t.find(":selected").val(),o=t.siblings("[name=sku]");o.find(":selected").val()&&a&&o.trigger("change",[!1])}).chosen({search_contains:!0,allow_single_deselect:!0,placeholder_text_single:"Qualquer marca"}),formAddOtherItems.find("[name=count]").on("change input",function(e){var t=$(this),a=t.closest("form").find("select[name=sku]").find(":selected").val();t.closest("form").find("[type=submit]").attr("disabled",!a||!t.val()||null)})),$(function(){var e,t;e="#"+window.location.href.split("#")[1],t=140,e.length&0<$(e).length&&(e.split("#add-")[1]&&(t=440),(e.split("#d-")[1]||e.split("#add-")[1])&&$("html, body").animate({duration:600,scrollTop:$(e).offset().top-t},500,function(){history.pushState?history.pushState(null,null,e):location.hash=e}));$(".distributor-results").on("click",".show-more-options",function(e){e.preventDefault();var t=$(this),a=t.parents("tr"),o=$("#table-options");tr_products_other_brand=$("#table-options-other-brand"),o.html(""),tr_products_other_brand.html(""),$("#modal-more-options .modal-title small").text($(this).attr("data-name")),$("#modal-more-options .js-more-options-price").text("R$ "+$(this).attr("data-price")),$(".link-more-options-other-brand").attr("aria-expanded","true"),$("#more-options-other-brand").addClass("collapse"),$(".q-more-options").text("");var r=$(this).attr("data-name"),n=$(this).attr("data-brand");$.post(t.attr("href"),function(e){0<e.length?(1==e.length?$(".q-more-options").html("<span class='font-weight-lighter'>Confira mais uma oferta para: </span>"+r+" - "+n):$(".q-more-options").html("<span class='font-weight-lighter'>Confira outras "+e.length+" ofertas para: </span>"+r+" - "+n),a.data("more-options",!0),o.append(renderProducts(e)),addsSubstituteEvent(),o.find('[data-toggle="tooltip"]').tooltip()):o.append('<tr class="product-row"><td class="product-not-found" colspan="5">Não foram encontradas outras ofertas dessa marca</td></tr>')}),$.post(t.attr("get-other-brand"),function(e){0<e.length?($("#more-options-other-brand").addClass("show"),1==e.length?$(".q-more-options-other-brand").html("<span class='font-weight-lighter'>Confira uma ofertar de outra marca para: </span>"+r):$(".q-more-options-other-brand").html("<span class='font-weight-lighter'>Confira mais "+e.length+" ofertas de outras marcas para: </span>"+r),a.data("more-options",!0),tr_products_other_brand.append(renderProducts(e)),addsSubstituteEvent(),tr_products_other_brand.find('[data-toggle="tooltip"]').tooltip()):(tr_products_other_brand.append('<tr class="row-more-options text-center"><td colspan="5" class="pt-2">Não foram encontradas ofertas de outras marcas</td></tr>'),$("#more-options-other-brand").removeClass("show"))}),$("#modal-more-options").modal("show")}),$("#order-confirmed").length&&$.magnificPopup.open({items:{src:"#order-confirmed"},type:"inline"}),$(".product-count").each(function(e){parseFloat($(this).attr("value"))>parseFloat($(this).attr("max"))&&$(this).trigger("change",[!1])})}),$(".mobile-minimum-order-tooltip").click(function(e){e.preventDefault()}),buildSelectCities=function(e,t,a){var o=$(document.createDocumentFragment());for(var r in o.append($('<option value=""></option>')),e)e[r]==a?o.append($("<option>",{value:r,text:e[r],selected:"true"})):o.append($("<option>",{value:r,text:e[r]}));t.html(o)},$(".js-change-city-form").submit(function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}()),$("input[name='input_region_profile']").change(_asyncToGenerator(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={city_id:REGION.city_id,cnpj:"CNPJ"==$(this).val(),cpf:"CPF"==$(this).val()},e.next=3,changeCity(t).then(function(){"undefined"!=typeof PAGE&&"cart"==PAGE?document.getElementsByClassName("js-cart-link")[0].click():location.reload()}).catch(function(){$("#selectCity").modal("hide")});case 3:case"end":return e.stop()}},e,this)})));var favoriteTable,changeCity=function(a){return new Promise(function(t,e){void 0!==URL.lazyuser_edit?$.post(URL.lazyuser_edit,a,function(e){t(e)}).fail(function(){console.warn("Ocorreu um erro ao tentar editar a cidade"),e()}):(console.warn("URL não declara"),e())})};function asyncGeneratorStep(e,t,a,o,r,n,i){try{var s=e[n](i),c=s.value}catch(e){return void a(e)}s.done?t(c):Promise.resolve(c).then(o,r)}function _asyncToGenerator(s){return function(){var e=this,i=arguments;return new Promise(function(t,a){var o=s.apply(e,i);function r(e){asyncGeneratorStep(o,t,a,r,n,"next",e)}function n(e){asyncGeneratorStep(o,t,a,r,n,"throw",e)}r(void 0)})}}function cityCheck(){var e;"undefined"!=typeof PAGE&&["home","catalogo","cart","product","my-list","suppliers"].includes(PAGE)&&"true"!==getCookie("modal_city_close")&&(getCookie("city_id")||"undefined"==typeof USER_IS_AUTHENTICATED||USER_IS_AUTHENTICATED||(OpenModal(),userInteractionGMT("Modal de região - Primeiro acesso","".concat(REGION.city_name," - ").concat(REGION.state," (").concat(REGION.type,")")),(e=new Date).setYear(e.getFullYear()+1)))}function getSuppliersCityCheck(e){return _getSuppliersCityCheck.apply(this,arguments)}function _getSuppliersCityCheck(){return(_getSuppliersCityCheck=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("atacadao"==MARKETPLACE_NAME){e.next=13;break}a="",i=0;case 3:if(!(i<t.length)){e.next=12;break}if(!(i<10)){e.next=8;break}a+='<li class="bg-white"><img src="'.concat(t[i].logo,'" /></li>'),e.next=9;break;case 8:return e.abrupt("break",12);case 9:i++,e.next=3;break;case 12:$(".lista-avs").html(a);case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function asyncGeneratorStep(e,t,a,o,r,n,i){try{var s=e[n](i),c=s.value}catch(e){return void a(e)}s.done?t(c):Promise.resolve(c).then(o,r)}function _asyncToGenerator(s){return function(){var e=this,i=arguments;return new Promise(function(t,a){var o=s.apply(e,i);function r(e){asyncGeneratorStep(o,t,a,r,n,"next",e)}function n(e){asyncGeneratorStep(o,t,a,r,n,"throw",e)}r(void 0)})}}function changeStatate(e){return _changeStatate.apply(this,arguments)}function _changeStatate(){return(_changeStatate=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=$(".js-select-city"),o=t.val(),t.attr("disabled","true"),a.attr("disabled","true"),e.next=6,getCities(o).then(function(e){buildSelectCities(e,a,REGION.city_name),a.removeAttr("disabled").change()}).catch(function(){a.val("").change()});case 6:t.removeAttr("disabled");case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function OpenModal(){return _OpenModal.apply(this,arguments)}function _OpenModal(){return(_OpenModal=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=$(".js-select-city"),(a=$(".js-select-state")).attr("disabled",!0),t.attr("disabled",!0),o=a.find("option[data-uf='".concat(REGION.state,"']")).val(),a.val(o).trigger("change.select2"),getCities(o).then(function(e){buildSelectCities(e,t,REGION.city_name),t.removeAttr("disabled"),a.removeAttr("disabled")}).catch(function(){t.val(""),a.removeAttr("disabled")}),$(".js-input-cnpj").addClass("d-none"),$(".js-input-cpf").addClass("d-none"),null!=cityLogisticType?buildProfileType(cityLogisticType):getProfileByCity(REGION.city_id).then(function(e){buildProfileType(e)}).catch(function(){console.error("Algo deu errado")});case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function reducerOnScroll(){var i=!1,s=0;"undefined"!=typeof PAGE&&["home","catalogo","product","my-list","suppliers"].includes(PAGE)&&($(".destaqueCupom").addClass("position-fixed"),$(".header").addClass("position-sticky"),is_mobile||$(window).on("scroll",function(){$(".js-header-reducer");var e=$(".js-header-reducer .header__reducer"),t=$(".header__info").height(),a=$(".header").height()+t,o=$(window).scrollTop(),r=o<s,n=s<o;$(".megamenu").is(":visible")||(a<o&&(i||!n||r?r&&!n&&i&&(e.removeClass("is-hidden"),setTimeout(function(){i=!1},600),"undefined"==typeof USER_IS_AUTHENTICATED||USER_IS_AUTHENTICATED||void 0===localStorage.modal_city_close&&document.cookie.indexOf("city_id")<0&&setTimeout(function(){i||$(".js-city-notification").show()},400)):(e.addClass("is-hidden"),setTimeout(function(){i=!0,void 0===localStorage.modal_city_close&&$(".js-city-notification").hide()},600))),s=o)}))}function favoriteBuild(){var a=(favoriteTable=$("#favorite-list").DataTable({language:{search:"Buscar produtos:",processing:"Carregando...",lengthMenu:"Exibir _MENU_ produtos por página",zeroRecords:"Não encontramos nenhum resultado para sua filtragem.<br> Por favor tente novamente usando outro termo ou descrição do produto desejado",info:"Mostrando de _START_ até _END_ de um total de _TOTAL_",infoEmpty:"Nenhum resultado",infoFiltered:"(Filtrado de um total de _MAX_ produtos)",emptyTable:"Não encontramos nenhum resultado",paginate:{first:"&lsaquo; &laquo;",previous:"&laquo;",next:"&raquo;",last:"&raquo; &rsaquo;"}},searching:!1,ordering:!1,bPaginate:!1,fixedHeader:!0,stateSave:!1,columnDefs:[{type:"portugues",targets:[1]}]})).rows().nodes();$("#favorite-list").on("change",".js-favorite-list-product",function(){$(this).is(":checked")?$(this).closest("tr").addClass("bg-light"):$(this).closest("tr").removeClass("bg-light");var e=$(".js-favorite-list-product",a).length,t=$(".js-favorite-list-product:checked",a).length;t<e?$("#input-check-all").prop("checked",!1):$("#input-check-all").prop("checked",!0),0<t?$(".js-favorite-list-submit").removeAttr("disabled"):$(".js-favorite-list-submit").attr("disabled",!0),$(".js-favorite-list-product-count").text(t)})}function deleteFavoriteProduct(e){$.post(LIST_PRODUCT_DELETE_ENDPOINT,{pk:e},function(e){showTempAlert("success","Produto excluido com sucesso!")})}function showTempAlert(e,t){var a=$("<div></div>",{class:"shadow temp-alert temp-alert--"+e,html:t});$(".temp-alert-list").prepend(a),a.fadeIn("slow"),setTimeout(function(){a.slideUp(400,function(){$(this).remove()})},5e3)}function asyncGeneratorStep(e,t,a,o,r,n,i){try{var s=e[n](i),c=s.value}catch(e){return void a(e)}s.done?t(c):Promise.resolve(c).then(o,r)}function _asyncToGenerator(s){return function(){var e=this,i=arguments;return new Promise(function(t,a){var o=s.apply(e,i);function r(e){asyncGeneratorStep(o,t,a,r,n,"next",e)}function n(e){asyncGeneratorStep(o,t,a,r,n,"throw",e)}r(void 0)})}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}$(".js-open-modal-region").click(function(){}),$(".js-select-state").on("change",function(){""==$(this).val()?$(".js-select-city").val("").attr("disabled",!0).change():(changeStatate($(this)),userInteractionGMT("Selecionar estado",$(this).find("option:selected").text()))}),$(".js-select-city").on("change",function(){var e=$(this).val();""!=e&&($(".js-input-cnpj").addClass("d-none"),$(".js-input-cpf").addClass("d-none"),getProfileByCity(e).then(function(e){buildProfileType(e),$(".js-btn-change-city").removeAttr("disabled")}).catch(function(){console.error("Algo deu errado")}),"undefined"!=typeof MARKETPLACE_NAME&&"tsidistribuidora"==MARKETPLACE_NAME&&$(".js-input-cpf").addClass("d-none"),userInteractionGMT("Selecionar cidade",$(this).find("option:selected").text()))}),$(document).ready(function(){"use strict";var e,t,a,o=$(".megamenu"),r=$(".megamenu").find(".container"),n=$(".js-megamenu-btn"),i=$(document).height()-$(".header").height()+"px",s=!1,c=!1,l=!1,d=!1;function u(){s||!c&&!d?!s||c||d||(o.slideUp(400,function(){s=!1}),$(".js-link-category-n1").removeClass("active")):(s=!0,o.slideDown())}o.css("height",i),n.mouseover(function(){l=!1,setTimeout(function(){l||(c=!0,$(".js-n1-links").show(),$(".js-n2-links").addClass("col-md-9").removeClass("col-md-12"),$(".js-link-category-n1, .js-link-category-n2, .js-link-category-n3").removeClass("active"),$(".js-content-category-n1, .js-content-category-n2, .js-content-category-n3").hide(),u())},600)}),n.mouseleave(function(){l=!(c=!1),setTimeout(u,100)}),r.mouseover(function(){d=!0,u()}),r.mouseleave(function(){d=!1,setTimeout(u,800)}),a=t=e=!1,$(".js-n1-links, .js-n1-links-highlight").on("mouseenter",".js-link-category-n1[data-is-menu='true']",function(){c=!0,"true"===$(this).attr("data-is-menu")?setTimeout(u,600):setTimeout(u,100),$(".js-n1-links").hide(),$(".js-n2-links").removeClass("col-md-9").addClass("col-md-12")}),$(".js-n1-links, .js-n1-links-highlight").on("mouseenter",".js-link-category-n1",$.debounce(300,function(){e?e=!1:($(".js-content-category-n1").hide(),$(".js-link-category-n1").removeClass("active"),$("#"+$(this).attr("data-pk")).show(),$(this).addClass("active"))})),$(".js-n1-links, .js-n1-links-highlight").on("mouseleave",".js-link-category-n1",function(){c=!1,setTimeout(function(){u()},300)}),$(".js-n2-links").on("mouseenter",".js-content-category-n1",function(){e=!0,setTimeout(function(){e=!1},300)}),$(".js-n2-links").on("mouseenter",".js-link-category-n2",$.debounce(300,function(){t?t=!1:($(".js-content-category-n2, .js-content-category-n3").hide(),$(".js-link-category-n2").removeClass("active"),$("#"+$(this).attr("data-pk")).show(),$(this).addClass("active"))})),$(".js-n2-links").on("mouseenter",".js-content-category-n2",function(){t=!0,setTimeout(function(){t=!1},300)}),$(".js-n2-links").on("mouseenter",".js-link-category-n3",$.debounce(300,function(){a?a=!1:($(".js-content-category-n3").hide(),$(".js-link-category-n3").removeClass("active"),$("#"+$(this).attr("data-pk")).show(),$(this).addClass("active"))})),$(".js-n2-links").on("mouseenter",".js-content-category-n3",function(){a=!0,setTimeout(function(){a=!1},300)})}),$(document).ready(function(){var a=!1,e=!1;toggleMobileMenu=function(e,t){"show"===e?(t.show().addClass("show"),$("img.lazy-mobile-menu").Lazy({effect:"fadeIn",visibleOnly:!0})):(t.removeClass("show"),setTimeout(function(){t.hide()},250))},$(".js-mobile-menu-btn").click(function(){$(".js-mobile-menu-content, .mobile-menu__categories").hide().removeClass("show"),toggleMobileMenu("show",$(".js-mobile-menu")),toggleMobileMenu("show",$(".js-mobile-menu-content"))}),$(".js-mobile-menu").click(function(){a?a=!1:(toggleMobileMenu("hide",$(".js-mobile-menu-content")),toggleMobileMenu("hide",$(".js-mobile-menu")))}),$(".js-mobile-menu-content").click(function(){a=!0}),$(".js-all-categories-mobile, .js-categories-list").on("click",".js-back-btn-mobile",function(e){e.preventDefault(),a=!0;var t=$(this).closest(".mobile-menu__categories");toggleMobileMenu("hide",t)}),$(".js-all-categories-mobile-btn").click(function(e){e.preventDefault(),toggleMobileMenu("show",$(".js-all-categories-mobile"))}),$(".js-all-categories-mobile, .js-categories-list").on("click",".js-link-category-mobile-n1",function(e){a=!0,"#"===$(this).attr("href").replace("/","")&&(e.preventDefault(),toggleMobileMenu("show",$("#"+$(this).attr("data-pk"))))}),$(".js-btn-filters-toggle").click(function(){toggleMobileMenu("show",$(".js-filters-menu-bg")),toggleMobileMenu("show",$(".js-filters-menu-content"))}),$(".js-filters-menu-bg").click(function(){e?e=!1:(toggleMobileMenu("hide",$(".js-filters-menu-content")),toggleMobileMenu("hide",$(".js-filters-menu-bg")))}),$(".js-btn-filters-menu-close").click(function(e){e.preventDefault(),toggleMobileMenu("hide",$(".js-filters-menu-content")),toggleMobileMenu("hide",$(".js-filters-menu-bg"))}),$(".js-filters-menu-content").click(function(){e=!0})}),$("#favorite-list").on("click",".js-button-remove",function(e){e.preventDefault();var t=$(this).closest("tr");$(".js-btn-add-to-favorite[data-pk='"+t.find(".js-add-product-ml").attr("data-pk")+"']").removeClass("is-active").removeClass("fas").addClass("far"),t.fadeOut(400,function(){favoriteTable.row(t).remove().draw(),allPages=favoriteTable.rows().nodes(),$(".js-favorite-list-product-count").text($(".js-favorite-list-product:checked",allPages).length)}),deleteFavoriteProduct($(this).attr("data-pk"))});var listType,myListName=["Comprados","Pesquisados","Minha Lista"],primaryMultiplierClick=!1,listTable=$("#favorite-list tbody"),page=0,maxPage=null,totalFound=null,isLoadList=!1,listSearchValue="";function getDocumentHeight(){var e=document.body,t=document.documentElement;return Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight)}function getScrollTop(){return void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}function initMyList(){addPageMyList(),window.onscroll=$.throttle(300,function(e){getScrollTop()<$("#add-more-products-my-list").offset().top-(window.innerHeight+900)&&!isLoadList||addPageMyList()})}function addPageMyList(){page=++page;var e=null===maxPage||page<=maxPage&&20*(page-1)<=totalFound?!0:!1;e&&getMyList()}function getMyList(){isLoadList=!0,(null===(listType=$.getUrlParams().type)||listType<0||2<listType||null==listType)&&(listType=2),2==listType?($("#favorite-list thead .btn-add-favorite").addClass("fa-bell"),$(".js-get-notification-card").removeClass("d-none")):$("#favorite-list thead .btn-add-favorite").addClass("fa-heart"),$(".js-favorite-list-name").text(myListName[listType]),$(".js-nav-list-"+listType).addClass("active"),$.get(MY_LIST_PRODUCT_ENDPOINT,{type:listType,page:page,q:listSearchValue},function(e){if(maxPage=e.total_pages,totalFound=e.total_found,0<e.products.length){"object"!=(void 0===favoriteTable?"undefined":_typeof(favoriteTable))&&favoriteBuild();for(var t=0;t<e.products.length;t++)buildMyList(e.products[t]);$("#favorite-list_info").text("Mostrando "+$(".favorite-list-table-row").length+" itens de um total de "+totalFound),listShow()}else""==listSearchValue?($(".js-favorite-adding p").addClass("d-none"),$(".js-favorite-adding  .js-not-found-message-"+listType).removeClass("d-none"),$(".js-favorite-adding").slideDown()):0==$(".favorite-list-table-row").length&&0==maxPage&&($(".js-favorite-not-found").slideDown(),$(".js-favorite-not-found-text").text(listSearchValue)),$(".js-favorite-loading").slideUp();isLoadList=!1})}function listHide(){favoriteTable.clear().draw(),$("#favorite-list").DataTable().draw(),$(".js-favorite-loading").slideDown(),$(".js-my-list").slideUp(),$(".js-favorite-not-found").slideUp(),2==listType?$(".js-add-more-itens-to-list").addClass("d-none"):$(".js-add-more-itens-to-list").removeClass("d-none")}function listShow(){$(".js-favorite-loading").slideUp(),$(".js-favorite-block").slideDown(),$(".js-favorite-adding").slideUp(),$(".js-my-list").slideDown(),2==listType?$(".js-add-more-itens-to-list").removeClass("d-none"):$(".js-add-more-itens-to-list").addClass("d-none")}function buildMyList(e){var t,a,o,r=e.multipliers,n=e.avaliable&&0<r.length,i=$("<tr></tr>",{class:"favorite-list-table-row py-3 py-md-0"+(n?"":" bg-light")+(is_mobile?" border-top":""),"data-pk":e.id}),s=$("<td></td>",{class:"py-2 py-md-3 pl-0 favorite-list-table-row__name",html:'<div class="mb-1">'+e.sku_name+" "+e.sku_type+" "+e.sku_packaging+" "+e.sku_weight_qty+'<span class="d-none"> - '+e.sku_brand+" </span></div> <small>"+(0<Object.keys(e.price_statistics).length&&1<transformNumber(e.price_statistics.discount)?e.price_statistics.quantity_prices+' Ofertas  <span class="badge badge-success p-1">Economia de '+Math.trunc(transformNumber(e.price_statistics.discount))+"%</span></small>":"</small>")}),c=$("<td></td>",{class:"text-primary py-2 py-md-3  pl-md-2 favorite-list-table-row__brand",html:"<div>"+(is_mobile?'<strong class="text-body">Marca:</strong> ':"")+e.sku_brand+"</div>"});0<r.length?(o=$("<td></td>",{class:"py-2 py-md-3 pl-md-2 favorite-list-table-row__quantity",html:'<div class="input-dropdown position-relative product-multipliers"> <div class="stepper-wrap cart__supplier-box__count"> <input class="product-count cart__supplier-box__count-input js-input-dropdown__form-control js-product-count" type="number" data-pk="'+e.sku_id+'" data-multiplier="'+(e.on_cart?e.multiplier_on_cart:e.multipliers[0].multiplier)+'" value="'+(e.on_cart?e.total_itens_on_cart.replace(".00",""):e.multipliers[0].multiplier.toString().replace(".00",""))+'" max="120.00" step="'+(e.on_cart?e.total_itens_on_cart:e.multipliers[0].multiplier)+'" data-toggle="close" '+(e.on_cart?"":"disabled")+'> <a class="stepper-btn-dwn js-stepper-btn-dwn"> <img src="'+STATIC_IMAGE+'icons/minus.svg"> </a> <a class="stepper-btn-up js-stepper-btn-up"> <img src="'+STATIC_IMAGE+'icons/plus.svg"> </a> <div class="js-input-loading cart__supplier-box__count-loading d-none"><img src="'+STATIC_IMAGE+'icons/loading.svg" class="loading-icon-sm"></div></div> </div>'}),1<r.length&&(t=$("<div></div>",{class:"input-dropdown__menu product-multipliers__items"}),a=buildMultipliersList(r,e.unit,e.on_cart&&null!==e.multiplier_on_cart?e.multiplier_on_cart:""),t.append(a),o.find(".input-dropdown").append(t))):o=$("<td></td>",{class:"py-2 py-md-3 pl-md-2 favorite-list-table-row__quantity",colspan:"3",html:"Produto não está disponível"});var l=$("<td></td>",{class:(is_mobile?n?"d-flex":"d-none":"")+" text-left py-0 pt-2 pt-md-2 py-md-3 pl-md-2 favorite-list-table-row__price justify-content-between",html:(is_mobile?"<strong>Preço unitário</strong>":"")+'<div>R$ <span class="js-unit-p-price">'+(e.on_cart?0<Object.keys(e.price_statistics).length?e.price_statistics.cheaper.replace(".",","):"":0<r.length?parseFloat(e.multipliers[0].price).toFixed(2).toString().replace(".",","):"")+"</span>/"+e.unit+"</div>"}),d=$("<td></td>",{class:(is_mobile?n?"d-flex":"d-none":"")+" py-0 pb-2 pb-md-3 py-md-3 pl-md-2 favorite-list-table-row__total-price justify-content-between",html:(is_mobile?"<strong>Preço total</strong>":"")+'<div><span class="link">R$ <span class="js-total-p-price">'+e.total_value.replace(".",",")+'</span></span> <br><small class="d-none d-md-block"> Por <span class="js-total-p-quantity">'+(e.on_cart?e.total_itens_on_cart.replace(".00",""):0<r.length?e.multipliers[0].multiplier.toString().replace(".00",""):"")+"</span> "+e.unit+"</small></div>"}),u=($("<td></td>",{class:"text-center",html:'<i class="'+(2==listType?(e.bell?"fas text-warning is-active ":"far ")+"fa-bell js-btn-add-bell":(e.is_favorite?" is-active fas":" far")+" fa-heart js-btn-add-to-favorite")+' btn-add-favorite" title="'+(2==listType?e.bell?"Desativar notificação para este produto":"Ativar notificação para este produto":e.is_favorite?"Produto adicionado à minha lista":"Adicionar produto à minha lista")+'" data-pk="'+e.sku_id+'"></i> <span class="d-md-none js-set-event-click">'+(2==listType?"Notificar":"Minha Lista")+"</span>"}),$("<td></td>",{class:"text-center py-2 py-md-3 pl-md-2 favorite-list-table-row__cart",html:n?'<button class="'+(is_mobile?"float-right d-flex align-items-center ":"")+"animate-add-btn btn-add-product-ml btn text-primary p-0 shadow-none js-add-product-ml "+(e.on_cart?"is-active":"")+'" type="button" title="'+(e.on_cart?"Adicionado ao carrinho":"Adicionar ao carrinho")+'" data-pk="'+e.sku_id+'" data-multiplier="'+(0<r.length?r[0].multiplier:"")+'" data-product-cart-id="'+e.cart_id+'"><span class="d-md-block mr-2 mr-md-0"><img src="'+STATIC_IMAGE+"icons/"+(e.on_cart?"cart-remove":"cart")+'.svg" alt="carrinho" class="animate-add-btn--icon"></span><span class="text">'+(e.on_cart?"Remover":"Adicionar")+"</span></button>":""})),p=$("<td></td> pl-2",{class:"text-center py-2 py-md-3 pr-0 pl-md-2 favorite-list-table-row__remove",html:'<a href="#" class="js-button-remove link" data-pk="'+e.id+'"> <img src="'+STATIC_IMAGE+'icons/close.svg" class="icon-remove" alt="Excluir" title="Excluir produto desta lista"></a>'});i.append(s),i.append(c),i.append(o),n?addEvent(o.find(".js-product-count")):(l.hide(),d.hide()),i.append(l),i.append(d),i.append(u),i.append(p),"object"!=(void 0===favoriteTable?"undefined":_typeof(favoriteTable))&&favoriteBuild(),favoriteTable.row.add(i).draw()}function buildMultipliersList(e,t,a){for(var o=$("<nav></nav>",{class:"input-dropdown__menu-content nav flex-column shadow"}),r=0;e.length>r;r++)o.append('<a class="input-dropdown__link js-select-multiplier product-multipliers__item p-2 '+(a.toString().replace(".00","")===e[r].multiplier.toString().replace(".00","")?"active":"")+'" href="#" data-multiplier="'+e[r].multiplier.toString().replace(".00","")+'" data-price="'+e[r].price.toString().replace(".",",")+'"><span class="float-left product-multipliers__item-price">R$ '+parseFloat(e[r].price).toFixed(2).toString().replace(".",",")+"/"+t+'</span><span class="float-right product-multipliers__item-multiple">Múltiplos de: '+e[r].multiplier.toString().replace(".00","")+"</span></a>");return o}function removeToCartML(e,t){$.ajax({url:REMOVE_CART_ITEM_URL,data:{cart_item_pk:e},type:"GET",success:function(e){buildBoxRemoveProduct($(".js-btn-add-product[data-pk='"+t.attr("data-pk")+"']")),buildRemoveML(t.closest(".favorite-list-table-row")),updateCartTotalCont(e.total_products),animateCart()}})}function buildRemoveML(e){var t=e.find(".js-add-product-ml");t.removeClass("is-load is-active").find(".text").text("Adicionar"),t.find("img").attr("src",STATIC_IMAGE+"icons/cart.svg"),showTempAlert("warning","Produto removido do carrinho")}function addToCartML(e,t,a,o,r){$.ajax({url:ADD_CART_ITEM_URL,data:{sku_pk:e,multiplier:t,count:a},type:"GET",success:function(e){buildAddML(e,r.closest(".favorite-list-table-row"))}})}function buildAddML(e,t){var a=t.find(".js-add-product-ml"),o=t.find(".js-product-count"),r=t.find(".js-input-loading"),n=t.find(".js-total-p-quantity"),i=t.find(".js-total-p-price");o.attr("max",e.max_stock),o.val(e.count),a.find("img").attr("src",STATIC_IMAGE+"icons/cart-remove.svg"),a.removeClass("is-load").addClass("is-active").attr("data-product-cart-id",e.pk).find(".text").text("Remover"),n.text(e.count),i.text(e.total_price.replace(".",",")),r.addClass("d-none"),buildBoxAddProduct($(".js-btn-add-product[data-pk='"+e.sku_pk+"']"),e),updateCartTotalCont(e.total_products),animateCart()}function buildBoxAddProduct(e,t){e.closest(".box-produtos-catalogo").addClass("add-product-box"),e.closest(".box-produtos-catalogo").find(".js-btn-add-product").removeClass("btn-add-product").addClass("btn-adicionado-produtos"),e.closest(".btn-group--product").find(".dropdown-item").removeClass("dropdown-item--add js-add-product"),e.closest(".btn-group--product").find(".dropdown-item").addClass("js-add-product"),e.closest(".btn-group--product").find(".dropdown-item[data-multiple='"+parseFloat(t.multiplier).toFixed(2)+"']").addClass("dropdown-item--add").removeClass("js-add-product"),e.closest(".box-produtos-catalogo").find(".btn-adicionado-produtos").text("Adicionado"),e.removeClass("js-add-product"),e.closest(".btn-group--product").find(".js-btn-minus-product").attr("data-multiple",parseFloat(t.multiplier).toFixed(2)),e.closest(".btn-group--product").find(".js-btn-plus-product").attr("data-multiple",parseFloat(t.multiplier).toFixed(2)),e.closest(".btn-group--product").find(".js-count-product").attr("data-count",t.count).text(t.count.replace(".00","")),e.closest(".btn-group--product").find(".update-quantity").removeClass("hidden")}function buildBoxRemoveProduct(e){e.closest(".box-produtos-catalogo").removeClass("add-product-box"),e.closest(".box-produtos-catalogo").find(".js-btn-add-product").addClass("btn-add-product").removeClass("btn-adicionado-produtos"),e.closest(".btn-group--product").find(".dropdown-item").removeClass("dropdown-item--add").addClass("js-add-product"),e.text("Adicionar ao carrinho"),e.addClass("js-add-product"),e.closest(".btn-group--product").find(".update-quantity").addClass("hidden")}function addEvent(s){var c=formatNumber(parseFloat(s.val().replace(",",".")));s.on("keyup change",$.debounce(1e3,function(e){var t,a,o,r,n,i;c===formatNumber(parseFloat(s.val().replace(",",".")))&&!primaryMultiplierClick||([9,16,17,18,20,27,33,34,35,36,37,39,91,106,107,111,144].includes(e.keyCode)||(t=s.attr("data-pk"),a=s.attr("data-multiplier"),o=s.val(),r=s.attr("max"),n=s.closest(".stepper-wrap").find(".js-input-loading"),i=formatValuePQ(o,a,r),s.val(i),c=i,n.removeClass("d-none"),addToCartML(t,a,i,"MyList",s)),primaryMultiplierClick=!1)}))}function formatValuePQ(e,t,a){var o=parseFloat(e.replace(",",".")),r=parseFloat(t.replace(",",".")),n=parseFloat(a.replace(",","."));return o<r?formatNumber(r):0<n&&n<=o||0<n&&n<o+r?r<=n?formatNumber(parseFloat(r*Math.floor(n/r))):r:r<=o?formatNumber(parseFloat(r*(o/r))):r}function transformNumber(e){return formatNumber(parseFloat(forceToString(e).replace(",",".")))}function getMoreProductsMyList(){return _getMoreProductsMyList.apply(this,arguments)}function _getMoreProductsMyList(){return(_getMoreProductsMyList=_asyncToGenerator(regeneratorRuntime.mark(function e(){var a,t,o,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/app/cart/cart-item");case 2:return t=e.sent,e.next=5,t.json();case 5:return o=e.sent,a=!t.ok||o.detail?{count:0,next:null,previous:null,results:[]}:o,e.next=9,catalogueFilter.getQuery();case 9:r=e.sent,fetch("".concat(CATALOGUE_PRODUCTS_SEARCH_URL,"?").concat(r)).then(function(e){return e.json()}).then(function(e){for(var t=0;t<e.results.length&&t<20;t++)product=e.results[t],buildResult(product,"myList",null,a,t,0),$(".product-results .col-6").addClass("col-five");$("img.lazy").Lazy({effect:"fadeIn",visibleOnly:!0,threshold:200,onError:function(e){e.attr("src",STATIC_IMAGE+"icons/no-photo.svg")}})});case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function forceToString(e){return"string"==typeof e?e:e.toString()}function animateScroll(e){$("html, body").animate({scrollTop:is_mobile?$(e).offset().top-46:$(e).offset().top},500)}function setNotificationStatus(e){$.ajax({url:SET_NOTIFICATION_STATUS,data:{option:e},type:"GET",success:function(e){e.weekly_mail}})}function setNotificationDay(e,t){$.ajax({url:SET_NOTIFICATION_DAY+e,type:"GET",success:function(e){showTempAlert("success","Você receberá a cotação da sua lista por e-mail "+(5<e.day?"todo ":"toda ")+t)}})}function setProductNotificationStatus(e){$.ajax({url:DELETE_PRODUCT_NOTIFICATION,data:{id:e},type:"GET",success:function(){showTempAlert("warning","Notificação desativada! Você não receberá mais a cotação deste produto!")}})}function asyncGeneratorStep(e,t,a,o,r,n,i){try{var s=e[n](i),c=s.value}catch(e){return void a(e)}s.done?t(c):Promise.resolve(c).then(o,r)}function _asyncToGenerator(s){return function(){var e=this,i=arguments;return new Promise(function(t,a){var o=s.apply(e,i);function r(e){asyncGeneratorStep(o,t,a,r,n,"next",e)}function n(e){asyncGeneratorStep(o,t,a,r,n,"throw",e)}r(void 0)})}}$(document).ready(function(){$(".js-favorite-list-search").on("keyup change",$.debounce(850,function(e){var t=$(this);[9,16,17,18,20,27,33,34,35,36,37,39,91,106,107,111,144].includes(e.keyCode)||(listSearchValue!==t.val()&&3<=t.val().length||0==t.val().length)&&(page=0,totalFound=maxPage=null,isLoadList=!1,listSearchValue=t.val(),listHide(),animateScroll("#list-block"),addPageMyList())}))}),$("body").on("click",".js-btn-add-to-favorite",function(e){var t,a,o;USER_IS_AUTHENTICATED?(t=$(this),a=t.attr("data-pk"),""==(o=t.closest(".product-box").find(".product-box__name").text())&&"undefined"!=typeof PAGE&&"product"==PAGE&&(o=PRODUCT_DL.detail.products[0].name),t.hasClass("is-active")?$.get(MY_LIST_REMOVE_PRODUCT_ENDPOINT,{sku_pk:a},function(e){t.toggleClass("is-active").attr("title","Adicionar produto à minha lista"),"myList"===PAGE&&2==listType&&($(".js-add-product-ml[data-pk='"+a+"']").closest(".favorite-list-table-row").remove(),t.closest(".product-box").find(".js-btn-add-product").removeClass("js-btn-add-product-ml"),t.closest(".product-box").find(".dropdown-item").removeClass("js-btn-add-product-ml")),userInteractionGMT("Desfavoritar produto",o)}):$.get(MY_LIST_ADD_PRODUCT_ENDPOINT+a,{},function(e){t.toggleClass("is-active").attr("title","Produto adicionado à minha lista"),"myList"===PAGE?2==listType&&($(".favorite-list-table-row").length<1&&listShow(),buildMyList(e.product),t.closest(".product-box").find(".js-btn-add-product").addClass("js-btn-add-product-ml"),t.closest(".product-box").find(".dropdown-item").addClass("js-btn-add-product-ml")):($(".my-list-btn__icon i").addClass("animate"),setTimeout(function(){$(".my-list-btn__icon i").removeClass("animate")},600)),userInteractionGMT("Favoritar produto",o)})):$("#modal-add-to-list").modal("show")}),$("body").on("click",".js-add-product-ml",function(){var e,t,a,o,r=$(this),n=r.closest(".favorite-list-table-row").find(".js-product-count"),i=r.closest(".favorite-list-table-row").find(".input-dropdown__menu");r.hasClass("is-load")||(r.addClass("is-load"),r.hasClass("is-active")?(e=r.attr("data-product-cart-id"),n.attr("disabled",!0),i.find(".input-dropdown__menu-content .js-select-multiplier").removeClass("active"),removeToCartML(e,r)):(t=r.attr("data-pk"),a=n.attr("data-multiplier"),o=n.val(),n.removeAttr("disabled"),i.find(".input-dropdown__menu-content .js-select-multiplier[data-multiplier='"+a.replace(".00","")+"']").addClass("active"),addToCartML(t,a,o,"MyList",r)))}),$("body").on("click",".js-select-multiplier",function(e){e.preventDefault(),$(this).hasClass("active")||(primaryMultiplierClick=!0,$(this).closest(".input-dropdown__menu-content").find(".js-select-multiplier").removeClass("active"),$(this).closest(".favorite-list-table-row").find(".js-unit-p-price").text($(this).attr("data-price")),$(this).addClass("active"),$(this).closest(".input-dropdown").find(".js-product-count").removeAttr("disabled").attr("data-multiplier",$(this).attr("data-multiplier")).val(transformNumber($(this).attr("data-multiplier"))).change())}),$("body").on("click",".js-stepper-btn-dwn",function(){var e=$(this).closest(".input-dropdown").find(".js-input-dropdown__form-control"),t=$(this).closest(".input-dropdown").find(".input-dropdown__menu"),a=parseFloat(e.val().replace(",",".").replace(",",".")),o=parseFloat(e.attr("data-multiplier")),r=transformNumber(a-o);r<o&&(r=transformNumber(o)),t.find(".input-dropdown__menu-content .js-select-multiplier[data-multiplier='"+e.attr("data-multiplier")+"']").addClass("active"),e.removeAttr("disabled").val(r).change()}),$("body").on("click",".js-stepper-btn-up",function(){var e=$(this).closest(".input-dropdown").find(".js-input-dropdown__form-control"),t=$(this).closest(".input-dropdown").find(".input-dropdown__menu"),a=parseFloat(e.val().replace(",",".").replace(",",".")),o=parseFloat(e.attr("data-multiplier")),r=parseFloat(e.attr("max")),n=transformNumber(a+o);r<n&&(n=transformNumber(r)),t.find(".input-dropdown__menu-content .js-select-multiplier[data-multiplier='"+e.attr("data-multiplier")+"']").addClass("active"),e.removeAttr("disabled").val(n).change()}),$(".product-results-my-list").on("click",".js-btn-add-product-ml",function(){var e,t=$(this).attr("data-pk");$(this).hasClass("btn-add-product")?$(".js-add-product-ml[data-pk='"+t+"']").click():$(this).hasClass("dropdown-item")&&$(this).hasClass("js-add-product")&&(e=$(this).attr("data-multiple"),$(".js-add-product-ml[data-pk='"+t+"']").closest(".favorite-list-table-row").find(".js-select-multiplier[data-multiplier='"+e.replace(".00","")+"']").click())}),$(".js-add-more-itens-to-list").click(function(e){e.preventDefault(),$(document).scrollTop($($(this).attr("href")).offset().top),$(".search-query").focus()}),$(".js-select-day-get-notification").click(function(){$(this).hasClass("is-active")||($(".js-select-day-get-notification").removeClass("is-active"),$(this).addClass("is-active"),setNotificationDay($(this).attr("data-day-number"),$(this).attr("data-original-title")))}),$(".js-btn-get-notification").change(function(e){e.preventDefault(),$(this).is(":checked")?$(".js-days-get-notification").fadeIn():$(".js-days-get-notification").fadeOut(),setNotificationStatus($(this).is(":checked")?"True":"False")}),$("body").on("click",".js-btn-add-bell",function(e){$(this).hasClass("is-active")&&($(this).toggleClass("is-active fas far text-warning").attr("title","Ativar notificação para este produto"),setProductNotificationStatus($(this).closest(".favorite-list-table-row").attr("data-pk")))}),$("body").on("click",".js-set-event-click",function(){$(this).closest("td").find("i").click()}),$("#add-more-products-my-list .search-query").focus(function(){is_mobile&&$(document).scrollTop($("#add-more-products-my-list").offset().top)}),$("#list-block .js-favorite-list-search").focus(function(){is_mobile&&animateScroll("#list-block")});var suppliersList=[];function getProductsCatalogue(){return _getProductsCatalogue.apply(this,arguments)}function _getProductsCatalogue(){return(_getProductsCatalogue=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,newSearchProducts("",is_mobile?8:30).then(function(e){buildSearchProductResults($(".js-catalogue"),e.results)}).catch(function(e){console.warn(e,"Falha ao tentar buscar os produtos")});case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function buildSuppiersCatalogue(s,e){supplier_name=SUPPLIER_ID.replace("&#39;","'"),e.map(function(e){"catalogo"==PAGE&&e.name.toLowerCase()==supplier_name.toLowerCase()&&($(".js-select-search-in").html("<option value='Todos os Fornecedores'>Todos os Fornecedores</option><option value='"+SUPPLIER_ID+"' selected >"+e.name.toUpperCase()+"</option>"),$(".js-dd-search-in-items").html('<a class="dropdown-item js-dd-search-in-item" data-val="Todos os Fornecedores" href="#">Todos os parceiros</a><a class="dropdown-item js-dd-search-in-item active" data-val="'+e.name+'" href="#">'+e.name.toUpperCase()+"</a>"),$(".js-dd-search-in-name").text(e.name.toUpperCase())),selectSupplierInCatalogue.append('<option value="'+e.name+'" data-slug="'+(null!==e.slug?"/fornecedores/"+e.slug+"/":"")+'" data-logo-url="'+e.logo+'" data-minimum-order="'+e.minimum_order+'" data-delivery-time="'+e.delivery_time+'" '+(e.name==supplier_name?"selected":"")+" >"+e.name.toUpperCase()+"</option>")}),"catalogo"==PAGE&&"None"!=SUPPLIER_ID&&""!=SUPPLIER_ID&&buildSupplierStore(),"catalogo"==PAGE&&(e.filter(function(e){return e.highlight}).map(function(e,t){var a=$("<div></div>",{class:"item"}),o=$("<div></div>",{class:"text-center"}),r=$("<a></a>",{class:"js-supplier-box-link",href:"#","data-id":e.name}),n=$("<div></div>",{class:"border rounded-circle card--supplier-logo m-auto",html:"<img src='"+e.logo+"'>"}),i=$("<div></div>",{class:"mt-3",html:"<span class='text-primary suppliers-catalogue-carousel__name'>"+e.name+"</span>"});r.append(n),r.append(i),o.append(r),a.append(o),s.append(a)}),$(".js-suppliers-catalogue-owl").owlCarousel({loop:7<e.length,stagePadding:50,margin:50,items:7,nav:!0,navText:["",""],dots:!0,dotsContainer:".js-owl-dots-suppliers-catalogue",onChanged:function(e){$(e.target).closest(".js-owl").find(".owl-dots--text").text("Exibindo ".concat(e.page.index<0?"1":e.page.index+1," de ").concat(Math.ceil(e.item.count/e.page.size)))},onInitialized:function(e){$(e.target).children(".owl-stage-outer").children(".owl-stage").children().length<8&&$("#dots-suppliers").hide()},responsive:{0:{loop:!1,items:3,center:!1,margin:20,stagePadding:32,nav:!1},600:{loop:!1,items:3,center:!1,margin:20,stagePadding:32,nav:!1},1e3:{}}}))}function removeHtmlTagChar(e){return e.replace(/(<|>)/gi,"")}function buildSuppiersSearch(t){var e=[],e=""==t?suppliersList.filter(function(e){return e.highlight}):(t=formatString(t.toUpperCase()),suppliersList.filter(function(e){return formatString(e.name.toUpperCase()).includes(t)}));$(".js-search-supplier-list").html(""),e.map(function(e){$(".js-search-supplier-list").append('<a href="/fornecedores/'+e.slug+'/" class="d-block js-search-supplier-list-item" data-pk="'+e.name+'"><div class="search-supplier-list__item align-items-center d-flex"><img class="search-supplier-list__logo" src="'+e.logo+'"><span class="search-supplier-list__name">'+e.name+"</span></div></a>")})}function formatString(e){return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/[ÀÁÂÃÄÅ]/g,"A")).replace(/[ÒÓÔÕ]/g,"O")).replace(/[òóôõ]/g,"o")).replace(/[ÙÚ]/g,"U")).replace(/[ùú]/g,"u")).replace(/[àáâãäå]/g,"a")).replace(/[èéêë]/g,"e")).replace(/[ÈÉÊË]/g,"E")).replace(/[ÌÍ]/g,"I")).replace(/[íì]/g,"i")).replace(/[.,]/g,"")).toLowerCase()}function breadcrumbCategories(){var t,e,a,o,r,n;IS_GEO||(t=window.location.pathname.split("/").filter(function(e){return""!=e}),o=JSON.parse(localStorage.getItem("regions_category")).filter(function(e){return e.city_id==REGION.city_id&&e.profile_type==REGION.type})[0].categories.filter(function(e){if(e.slug==t[0])return!0}),t[1]&&(e=o[0].subcategories.filter(function(e){if(e.slug==t[1])return!0}),t[2]&&(a=e[0].subcategories.filter(function(e){if(e.slug==t[2])return!0}))),r=$(".js-breadcrumb-category").html().split("</li>"),n=a?"\n            ".concat(r[0],'</li>\n            <li class="breadcrumb-item" aria-current="page"><a href="/').concat(o[0].slug,'/" id="js-breadcrumbs-n1">').concat(o[0].name,'</a></li>\n            <li class="breadcrumb-item" aria-current="page"><a href="/').concat(o[0].slug,"/").concat(e[0].slug,'/" id="js-breadcrumbs-n2">').concat(e[0].name,'</a></li>\n            <li class="breadcrumb-item active" aria-current="page">').concat(a[0].name,"</li>\n        "):e&&!a?"\n            ".concat(r[0],'</li>\n            <li class="breadcrumb-item" aria-current="page"><a href="/').concat(o[0].slug,'/" id="js-breadcrumbs-n1">').concat(o[0].name,'</a></li>\n            <li class="breadcrumb-item active" aria-current="page">').concat(e[0].name,"</li>\n        "):"\n            ".concat(r[0],'</li>\n            <li class="breadcrumb-item active" aria-current="page">').concat(o[0].name,"</li>\n        "),$(".js-breadcrumb-category").html(n))}function asyncGeneratorStep(e,t,a,o,r,n,i){try{var s=e[n](i),c=s.value}catch(e){return void a(e)}s.done?t(c):Promise.resolve(c).then(o,r)}function _asyncToGenerator(s){return function(){var e=this,i=arguments;return new Promise(function(t,a){var o=s.apply(e,i);function r(e){asyncGeneratorStep(o,t,a,r,n,"next",e)}function n(e){asyncGeneratorStep(o,t,a,r,n,"throw",e)}r(void 0)})}}function getProductsFinishCheckout(){return _getProductsFinishCheckout.apply(this,arguments)}function _getProductsFinishCheckout(){return(_getProductsFinishCheckout=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,newSearchProducts("",is_mobile?8:10).then(function(e){buildSearchProductResults($(".js-c-offer-finish"),e.results)}).catch(function(e){console.warn(e,"Falha ao tentar buscar os produtos")});case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function asyncGeneratorStep(e,t,a,o,r,n,i){try{var s=e[n](i),c=s.value}catch(e){return void a(e)}s.done?t(c):Promise.resolve(c).then(o,r)}function _asyncToGenerator(s){return function(){var e=this,i=arguments;return new Promise(function(t,a){var o=s.apply(e,i);function r(e){asyncGeneratorStep(o,t,a,r,n,"next",e)}function n(e){asyncGeneratorStep(o,t,a,r,n,"throw",e)}r(void 0)})}}$(document).ready(function(){"catalogo"==PAGE&&$(".form-header").on("submit",function(e){e.preventDefault()})}),$(".form-header").on("submit",function(e){"suppliers"===$(".js-select-search-type").val()&&e.preventDefault()}),$(document).on("change",".js-search-query",function(){$(this).val(removeHtmlTagChar($(this).val()))}),$(document).on("focus",".js-search-query",function(){$(this).val(removeHtmlTagChar($(this).val())),"suppliers"===$(".js-select-search-type").val()&&(buildSuppiersSearch(""),$(".js-search-supplier-list").slideDown(150))}),$(document).on("blur",".js-search-query",function(){$(this).val(removeHtmlTagChar($(this).val())),setTimeout(function(){$(".js-search-supplier-list").slideUp(150)},100)}),$(document).on("keyup",".js-search-query",function(e){if($(this).val(removeHtmlTagChar($(this).val())),"suppliers"===$(".js-select-search-type").val()){invalidKeyCodes=[9,13,16,17,20,27,33,34,37,38,39,40];var t=$(this).val();if(invalidKeyCodes.includes(e.keyCode))return;buildSuppiersSearch(t)}}),$(".js-dd-search-type-item").click(function(e){e.preventDefault(),$(".js-dd-search-type-item").removeClass("active"),$(this).addClass("active"),$(".js-dd-search-type-name").text($(this).text()),$(".js-select-search-type").val($(this).attr("data-val")).change()}),$(".js-select-search-type").change(function(){"products"===$(this).val()?$(".js-search-query").val("").attr("placeholder","Olá, qual produto você quer comprar?"):$(".js-search-query").val("").attr("placeholder","Buscar parceiro")}),$(document).on("click",".js-search-supplier-list-item",function(e){e.preventDefault(),"undefined"!=typeof PAGE&&"catalogo"==PAGE?selectSupplierInCatalogue.val($(this).attr("data-pk")).change():window.location.href=$(this).attr("href")}),$(document).on("click",".js-dd-search-in-item",function(e){e.preventDefault(),$(this).hasClass("active")||$(".js-select-search-in").val($(this).attr("data-val")).change()}),$(document).ready(function(){var c,e,t,r,l,s;"undefined"!=typeof PAGE&&"CADASTRAR_CUPOM"==PAGE&&(c=function(e){return Number(String(e).replace(/[^\d\,]/g,"").replace(",","."))},e=function(e){var t=e.target.value;e.target.value=t?c(t):""},t=function(e){var t=e.target.value;e.target.value=t||0===t?c(t).toLocaleString("pt-BR",{maximumFractionDigits:2,currency:"BRL",style:"currency",currencyDisplay:"symbol"}):""},$(".select2-100").select2({width:"100%"}),fetch("/coupons/inputs/").then(function(e){return e.json()}).then(function(e){var t="";e.coupon_types.forEach(function(e){t+="<option value=".concat(e.value,">").concat(e.name,"</option>")}),$(".select-tipo-cupom").append(t).trigger("change");var a="";e.domains.forEach(function(e){a+="<option value=".concat(e.id,">").concat(e.name,"</option>")}),$(".select-dominio").append(a);var o="";e.payments.forEach(function(e){o+="<option value=".concat(e.id,">").concat(e.description,"</option>")}),$(".select-pagamento").append(o)}).catch(function(e){return console.error(e)}),$(".campos-vigencia").hide(),$(".vigencia").on("change",function(){var e=new Date,t="".concat(e.getFullYear(),"-").concat(e.getMonth(),"-").concat(e.getDate(),"T").concat(e.getHours(),":").concat(e.getMinutes());$(this).is(":checked")?($(".campos-vigencia").show(),$("#inicioVigencia").prop("disabled",!1).prop("required","required"),$("#inicioVigencia").prop("min",t)):($(".campos-vigencia").hide(),$("#inicioVigencia").prop("disabled","disable").prop("required",!1),$("#finalVigencia").prop("disabled","disable").prop("required",!1))}),$("#inicioVigencia").on("change",function(){$("#finalVigencia").prop("disabled",!1).prop("min",$(this).val())}),$("#formCriaCupom").on("submit",function(e){e.preventDefault();var t,a=$(this).serializeArray(),o=new FormData,r="",n="",i="",s=!1;a.forEach(function(e){switch(e.name){case"regions-cnpj":r+="".concat(e.value,","),s=!0;break;case"regions-cpf":r+="".concat(e.value,","),t=!0;break;case"domains":n+="".concat(e.value,",");break;case"payments":i+="".concat(e.value,",");break;case"start_date":case"end_date":o.append("".concat(e.name),e.value.replace(/T/g," "));break;case"min_value":""==e.value?o.append("".concat(e.name),"0"):o.append("".concat(e.name),c(e.value));break;case"campaign_max":case"value":o.append("".concat(e.name),c(e.value));break;default:o.append("".concat(e.name),e.value)}}),o.append("regions",r.slice(0,-1)),o.append("domains",n.slice(0,-1)),o.append("payments",i.slice(0,-1)),o.append("active",!0),o.append("user_type",s&&t?"ALL":s?"PJ":"PF"),fetch("/coupons/",{method:"POST",body:o}).then(function(e){return e.json()}).then(function(t){!0===t.success?window.location.replace(document.referrer):Object.keys(t.errors).forEach(function(e){t.errors[e].forEach(function(e){var t;t=$('<div class="alert alert-danger alert-dismissible fade show" role="alert" style="display:none;"><strong>Atenção!</strong> '.concat(e,' <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>')),$(".feedback-alert").append(t),t.fadeIn("slow")})})}).catch(function(e){return console.error(e)})}),$(".select-fornecedor").select2({allowClear:!0,width:"100%",placeholder:"Digite para buscar um fornecedor",ajax:{url:function(e){return"/coupons/distributors/".concat(e.term,"/")},dataType:"json",data:"",processResults:function(e){return{results:$.map(e,function(e){return{id:e.user_id,text:e.fantasy_name}})}}}}),$(".select-fornecedor").on("change",function(){var e=$(this).val(),t=[],a=[],o="",r="";fetch("/coupons/".concat(e,"/regions/")).then(function(e){return e.json()}).then(function(e){e.forEach(function(e){!0===e.for_natural_person?t.push(e):a.push(e)}),a.forEach(function(e){r+='<option value="'.concat(e.id,'">').concat(e.name,"</option>")}),t.forEach(function(e){o+='<option value="'.concat(e.id,'">').concat(e.name,"</option>")}),$("select[name=regions-cnpj]").html(""),$("select[name=regions-cpf]").html(""),""!=r&&$("select[name=regions-cnpj]").html(r),""!=o&&$("select[name=regions-cpf]").html(o)}).catch(function(e){return console.error(e)})}),$(".js-value-coupon").on("blur",t),$(".js-value-coupon").on("focus",e),$(".js-min-value-coupon").on("blur",t),$(".js-min-value-coupon").on("focus",e),$(".js-max-value-coupon").on("blur",t),$(".js-max-value-coupon").on("focus",e)),"undefined"!=typeof PAGE&&"LISTAR_CUPOM"==PAGE&&(r=function(e,t,a,o,r,n){var i="";e&&(i+="active=".concat(e,"&")),t&&(i+="domain=".concat(t,"&")),a&&(i+="type=".concat(a,"&")),o&&(i+="name=".concat(o,"&")),r&&(i+="code=".concat(r,"&")),n&&(i+="distributor=".concat(n,"&"));var s="/coupons/?".concat(i);fetch(s).then(function(e){return e.json()}).then(function(e){var a="";e.forEach(function(e){var t="";e.domains.forEach(function(e){t+="".concat(e.name,", ")}),a+="\n                    <tr>\n                        <td>".concat(e.type,"</td>\n                        <td>").concat(e.name,"</td>\n                        <td>").concat(e.code,"</td>\n                        <td>").concat(t.slice(0,-2),"</td>\n                        <td>").concat(e.distributor.fantasy_name,'</td>\n                        <td class="item-active-').concat(e.id," ").concat(e.active?"text-info":"text-danger",'">').concat(1==e.active?"Ativo":"Inativo",'</td>\n                        <td class="text-right"><a class="js-coupon-details text-secondary cursor-pointer" id="').concat(e.id,'">Detalhes do Cupom</a></td>\n                    </tr>\n                    ')}),$(".js-coupon-list").html(a),$(".js-coupon-details").on("click",function(e){l(e.target.id,!0)})}).catch(function(e){return console.error(e)})},l=function(n,e){var i=1<arguments.length&&void 0!==e&&e;fetch("/coupons/".concat(n)).then(function(e){return e.json()}).then(function(t){var a="";t.payments.forEach(function(e){a+='<div class="px-3 pt-1 row">\n                                            <span>'.concat(e.description,"</span>\n                                        </div>")}),$(".js-modal-coupon-payment-methods").html(a);var o="";t.regions.forEach(function(e){o+='<div class="px-3 pt-1 row">\n                                            <span>'.concat(e.for_natural_person?"CPF":"CNPJ"," - ").concat(e.name,"</span>\n                                        </div>")}),$(".js-modal-coupon-regions").html(o);var r="";t.domains.forEach(function(e){r+='<div class="badge badge-success mr-3">'.concat(e.name,"</div>")}),$(".js-modal-coupon-domains").html(r),$(".js-btn-details-coupon-active").prop("checked",t.active),$(".js-btn-details-coupon-active").off("change"),$(".js-btn-details-coupon-active").on("change",function(){t.active=!t.active,fetch("/coupons/".concat(n,"/toggle")).then(function(e){return e.json()}).then(function(e){e.success&&$(".item-active-".concat(n)).html(1==t.active?"Ativo":"Inativo").removeClass("text-danger").removeClass("text-info").addClass(t.active?"text-info":"text-danger")})}),$(".js-btn-details-coupon-appear-checkout").prop("checked",t.appear_checkout),$(".js-btn-details-coupon-appear-checkout").off("change"),$(".js-btn-details-coupon-appear-checkout").on("change",function(){t.appear_checkout=!t.appear_checkout,fetch("/coupons/".concat(n,"/toggle-appear-checkout")).then(function(e){return e.json()}).then(function(e){e.success&&$(".item-appear-checkout-".concat(n)).html(1==t.appear_checkout?"Sim":"Não").removeClass("text-danger").removeClass("text-info").addClass(t.appear_checkout?"text-info":"text-danger")})}),$(".js-modal-coupon-name").html(t.name),$(".js-modal-coupon-code").html(t.code),$(".js-modal-coupon-value").html(parseFloat(t.value).toFixed(2)),$(".js-modal-coupon-type").html(t.type),$(".js-modal-coupon-max-value").html(parseFloat(t.campaign_max).toFixed(2)),$(".js-modal-coupon-min-value").html(parseFloat(t.min_value).toFixed(2)),$(".js-modal-coupon-distributor").html(t.distributor.fantasy_name),$(".js-modal-coupon-criate-by").html(t.created_by.full_name),$(".js-modal-coupon-campaign-max").html(t.campaign.campaign_max?parseFloat(t.campaign.campaign_max).toFixed(2):0),$(".js-modal-coupon-campaign-balance").html(parseFloat(t.campaign.campaign_balance_sum).toFixed(2)),$(".js-modal-coupon-start-date").html(s(t.campaign.start_date)),$(".js-modal-coupon-end-date").html(s(t.campaign.end_date)),$(".js-modal-coupon-used").html(t.campaign.used_coupons_count),$(".js-modal-coupon-user-type").html("ALL"==t.campaign.user_type?"CPF e CNPJ":t.campaign.user_type),$(".js-modal-coupon-campaign-value-used").html((Number(t.campaign.used_coupons_count)*parseFloat(t.value)).toFixed(2)),i&&$("#modal-coupon-details").modal("show")})},s=function(e){if(e){var t=new Date(e);return t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()}return""},$(".select2-100").select2({width:"100%"}),$(".js-input-checkbox").on("change",function(){$(".slideThree").hasClass("disabled")?$(".slideThree").removeClass("disabled"):$(".slideThree").addClass("disabled")}),$(".select-fornecedor").select2({allowClear:!0,width:"100%",placeholder:"Digite para buscar um fornecedor",ajax:{url:function(e){return"/coupons/distributors/".concat(e.term,"/")},dataType:"json",data:"",processResults:function(e){return{results:$.map(e,function(e){return{id:e.user_id,text:e.fantasy_name}})}}}}),$("form[name=search-coupon]").on("submit",function(e){e.preventDefault();var t,a,o=(t=$(this).serializeArray(),a={},t.forEach(function(e){a[e.name]=e}),a);r(o.status.value,o.domain.value,o.type.value,o.name.value,o.code.value,o.distributor.value)}),r("","","","","",""),fetch("/coupons/inputs/").then(function(e){return e.json()}).then(function(e){var t="";e.coupon_types.forEach(function(e){t+="<option value=".concat(e.value,">").concat(e.name,"</option>")}),$(".js-tipo-cupom").append(t);var a="";e.domains.forEach(function(e){a+="<option value=".concat(e.id,">").concat(e.name,"</option>")}),$(".js-dominio").append(a)}).catch(function(e){return console.error(e)}))}),$(document).ready(function(){"undefined"!=typeof PAGE&&"finish_checkout"==PAGE&&getProductsFinishCheckout()});var flyers=[],logistics=[];function updateFlyersFilters(e){var a=$(".js-filter-state-flyers").val(),o=$(".js-filter-city-flyers").val(),r=$(".js-filter-store-flyers").val(),n=[];""!=r&&"state"!=e||$(".js-filter-city-flyers, .js-filter-store-flyers").html("<option></option>"),"state"==e&&$(".js-filter-store-flyers").attr("disabled",!0),"store"==e&&""!=r?Object.keys(logistics[a]).map(function(e){var t=Object.values(logistics[a][o]).filter(function(e){return e.id==r})[0];n.push(t.id)}):Object.keys(logistics[a]).map(function(e){$(".js-filter-city-flyers").append("<option ".concat(e==o?"selected":"",' value="').concat(e,'">').concat(e,"</option>")),e==o?Object.values(logistics[a][e]).map(function(e){$(".js-filter-store-flyers").append('<option value="'.concat(e.id,'">').concat(e.name,"</option>")),$(".js-filter-store-flyers").removeAttr("disabled"),n.push(e.id)}):""==o&&Object.values(logistics[a][e]).map(function(e){n.push(e.id)})}),0<flyers.length&&($(".js-flyers-list").html(""),flyers.map(function(e){0<e.stores.filter(function(e){return n.includes(e)}).length&&buildFlyerCard(e)})),""!=o&&$(".js-filter-store-flyers").removeAttr("disabled").trigger("change.select2"),$(".js-filter-city-flyers").removeAttr("disabled").trigger("change.select2")}function initFlyers(){return _initFlyers.apply(this,arguments)}function _initFlyers(){return(_initFlyers=_asyncToGenerator(regeneratorRuntime.mark(function e(){var a,t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,getFlyers().then(function(e){flyers=e.flyers,logistics=e.logistics}).catch(function(e){console.warn(e,"Falha ao tentar buscar id Atacadão")});case 3:0<(t=Object.keys(logistics)).length&&t.sort().map(function(t){$(".js-filter-state-flyers").append("<option ".concat(t==REGION.state?"selected":"",">").concat(t,"</option>")),$(".js-filter-state-flyers").removeAttr("disabled"),t==REGION.state&&Object.keys(logistics[t]).map(function(e){$(".js-filter-city-flyers").append("<option ".concat(e==REGION.city_name?"selected":"",">").concat(e,"</option>")),$(".js-filter-city-flyers").removeAttr("disabled"),e==REGION.city_name?Object.values(logistics[t][e]).map(function(e){$(".js-filter-store-flyers").append('<option value="'.concat(e.id,'">').concat(e.name,"</option>")),$(".js-filter-store-flyers").removeAttr("disabled"),a.push(e.id)}):Object.values(logistics[t][e]).map(function(e){a.push(e.id)})})}),0<flyers.length?($(".js-flyers-list").html(""),flyers.map(function(e){0<e.stores.filter(function(e){return a.includes(e)}).length&&buildFlyerCard(e)})):$(".js-flyers-list .col-12").html("<strong class='text-secondary'>Ops!</strong> Não encontramos nenhum folheto de oferta disponível para a sua cidade.");case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function buildFlyerCard(e){for(var t=$("<div></div>",{class:"col-6 col-md-3 mb-4"}),a=$("<div></div>",{class:"card"}),o=0;o<8;o++)null!=e["image_"+(o+1)]&&a.append('<a href="'.concat(e["image_"+(o+1)],'" data-caption="').concat(e.name,'" data-fancybox="').concat(e.name,'" class="fancybox-flyer-img"><img class="card-flyer-image" src="').concat(e.thumbnail,'" /></a>'));a.append('<div class="card-flyer-description p-4 regular-sm"><p class="title mb-2">'.concat(e.name,'</p><p class="date mb-0">').concat(e.start_date.split("-").reverse().join("/")," - ").concat(e.end_date.split("-").reverse().join("/"),"</p></div>")),t.append(a),$(".js-flyers-list").append(t)}$(document).ready(function(){"undefined"!=typeof PAGE&&"flyers"==PAGE&&($(".js-filter-state-flyers").select2(),$(".js-filter-state-flyers").change(function(){$(".js-filter-city-flyers, js-filter-store-flyers").attr("disabled",!0).val("").trigger("change.select2"),updateFlyersFilters("state")}),$(".js-filter-city-flyers").change(function(){$(".js-filter-store-flyers").val("").attr("disabled",!0).trigger("change.select2"),updateFlyersFilters("city")}),$(".js-filter-store-flyers").change(function(){updateFlyersFilters("store")}))});var getFlyers=function(){return new Promise(function(t,e){"undefined"!=typeof URL_GET_FLYERS?$.get(URL_GET_FLYERS,function(e){t(e)}).fail(function(){console.warn("Ocorreu um erro ao tentar buscar os folhetos"),e()}):(console.warn("URL não declarada"),e())})};function asyncGeneratorStep(e,t,a,o,r,n,i){try{var s=e[n](i),c=s.value}catch(e){return void a(e)}s.done?t(c):Promise.resolve(c).then(o,r)}function _asyncToGenerator(s){return function(){var e=this,i=arguments;return new Promise(function(t,a){var o=s.apply(e,i);function r(e){asyncGeneratorStep(o,t,a,r,n,"next",e)}function n(e){asyncGeneratorStep(o,t,a,r,n,"throw",e)}r(void 0)})}}function buildHomePage(){return _buildHomePage.apply(this,arguments)}function _buildHomePage(){return(_buildHomePage=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GetBanners();case 2:ConstructBannersHome(e.sent),buildFirstBanner(),buildBannersHome(),$(".js-form-newsletter").submit(function(e){e.preventDefault(),setNewsletter()});case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function setNewsletter(){var e=$(".js-form-newsletter").attr("action"),t={email:$(".js-input-email-newsletter").val()};$.post(e,t,function(){$(".js-input-email-newsletter").val(""),$(".js-msg-newsletter").addClass("text-primary").removeClass("d-none").text("Recebemos seu e-mail e em breve você receberá nossas ofertas!")}).fail(function(){$(".js-msg-newsletter").addClass("text-danger").removeClass("d-none").text("Ops! Erro ao tentar cadastrar e-mail."),console.warn("Erro ao tentar registrar e-mail na newsletter")}),userInteractionGMT("Inscrição na newsletter")}function buildSuppiersHome(i,e){var s=$("<div></div>",{class:"item"});e.filter(function(e){return e.highlight}).map(function(e,t){var a,o,r,n;t%2!=0&&!is_mobile||(s=$("<div></div>",{class:"item"})),(t<=9||!is_mobile)&&(a=$("<div></div>",{class:"card shadow border-0 card--supplier "}),o=$("<div></div>",{class:"card-body card--supplier-body d-md-flex"}),r=$("<div></div>",{class:"mr-md-4",html:"<div class='border rounded-circle card--supplier-logo'><a href='/fornecedores/"+e.slug+"/'><img class='owl-lazy' data-src='"+e.logo+"'></a></div>"}),n=$("<div></div>",{class:"text-center text-md-left overflow-hidden text-nowrap",html:"<h3 class='h3 mb-3 overflow-hidden card--supplier__name'>"+e.name+"</h3><a href='/fornecedores/"+e.slug+"/'>Ver produtos</a>"}),o.append(r),o.append(n),a.append(o),s.append(a),i.append(s))})}function getProductsHome(e){return _getProductsHome.apply(this,arguments)}function _getProductsHome(){return(_getProductsHome=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,"atacadao"==MARKETPLACE_NAME&&"CNPJ"==REGION.type&&0<(o=t.filter(function(e){return e.name.toUpperCase().includes("ATACADÃO")})).length&&(a={distributor:o[0].id}),e.next=4,newSearchProducts("",is_mobile?8:10,a).then(function(e){buildSearchProductResults($(".js-c-offer-home"),is_mobile?e.results.slice(0,4):e.results.slice(0,5)),buildSearchProductResults($(".js-c-offer-home-2"),is_mobile?e.results.slice(4,8):e.results.slice(5,10)),productImpression(e.results,"Home")}).catch(function(e){console.warn(e,"Falha ao tentar buscar os produtos")});case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function owlInit(e){"atacadao"==MARKETPLACE_NAME&&$(".banner-home__bottom-style").removeClass("d-none"),setTimeout(function(){$("#top-mobile").css("opacity","1")},2e3)}function onChangedCBHome(e){"atacadao"!=MARKETPLACE_NAME&&!is_mobile||$(e.target).closest(".js-owl").find(".owl-dots--text").text("Exibindo ".concat(e.page.index<0?"1":e.page.index+1," de ").concat(Math.ceil(e.item.count/e.page.size)))}function buildFirstBanner(){$(".banners-owl-carousel").owlCarousel({loop:!0,items:1,margin:0,nav:!0,lazyLoad:!0,dots:"atacadao"==MARKETPLACE_NAME||is_mobile,dotsContainer:".js-owl-dots-banners",navText:["",""],autoplayHoverPause:!0,responsive:{0:{items:1,nav:!1},600:{items:1,nav:!1},1e3:{items:1}},onInitialized:owlInit,onChanged:onChangedCBHome})}function buildBannersHome(){$(".js-offer-owl-carousel").owlCarousel({loop:!0,center:!0,stagePadding:40,margin:12,items:1,nav:!1,lazyLoad:!0,dots:!0,dotsContainer:".js-owl-dots-offer",onChanged:onChangedCBHome}),$(".js-suppliers-home-owl-carousel").owlCarousel({loop:!0,stagePadding:16,margin:20,items:2,nav:!0,lazyLoad:!0,navText:["",""],dots:!0,dotsContainer:".js-owl-dots-suppliers",slideBy:2,onChanged:onChangedCBHome,responsive:{0:{items:1,center:!0,margin:8,stagePadding:32,nav:!1},600:{items:1,margin:8,center:!0,stagePadding:32,nav:!1},1e3:{}}}),$(".js-t-business-home-owl-carousel").owlCarousel({loop:!0,stagePadding:32,margin:8,items:2,nav:!1,dots:!0,dotsContainer:".js-owl-dots-t-business",onChanged:onChangedCBHome})}var GetBanners=function(){return new Promise(function(){var a=_asyncToGenerator(regeneratorRuntime.mark(function e(t,a){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:$.get(GET_BANNERS,function(e){t(e)}).fail(function(){console.warn("Ocorreu um erro ao tentar buscar os banners"),a()});case 1:case"end":return e.stop()}},e)}));return function(e,t){return a.apply(this,arguments)}}())};function sortBanner(e){return e.sort(function(e,t){return e.priority>t.priority?1:e.priority<t.priority?-1:0}),e}function ConstructBannersHome(e){0<e.main_banner_list.length&&BuildMainBanner(e.main_banner_list),0<e.offer_card_list.length&&BuildOfferCardBanner(e.offer_card_list),0<e.main_offer_banner_list.length&&BuildMainOfferBanner(e.main_offer_banner_list),0<e.secondary_offer_banner_list.length&&BuildSecondaryOfferBanner(e.secondary_offer_banner_list)}function BuildMainBanner(e){var a=$(".js-main-banners");(e=sortBanner(e)).map(function(e){var t=$("<div>",{class:"item",html:'<div class="banner-home__item"><a href="'.concat(null!=e.redirect_link?e.redirect_link:"",'"><img class="banner-home__img owl-lazy" data-src="').concat(is_mobile?e.mobile_image:e.desktop_image,'" /></a></div>')});a.append(t)})}function BuildOfferCardBanner(e){var a=$(".js-offer-card-banners");(e=sortBanner(e)).map(function(e){var t=$("<div>",{class:is_mobile?"item":"col-md-3"});is_mobile?t.html('<div class="card border-0 shadow card--highlight-offer mb-2"><a href="'.concat(null!=e.redirect_link?e.redirect_link:"",'" class="d-block w-100 h-100"><div class="card--highlight-offer__item rounded"><img class="card--highlight-offer__img owl-lazy" data-src="').concat(e.mobile_image,'" /></div></a></div>')):t.html('<div class="card border-0 shadow card--highlight-offer" style="background-image:url('.concat(e.desktop_image,')"><a href="').concat(null!=e.redirect_link?e.redirect_link:"",'" class="d-block w-100 h-100"></a></div>')),a.append(t)})}function BuildMainOfferBanner(e){var a=$(".js-main-offer-banners");(e=sortBanner(e)).map(function(e){var t=$("<div>",{class:"col-md-12 mb-4",html:'<div class="card shadow border-0 card--secondary-offer-highlight lazy-img-bg" data-src="'.concat(is_mobile?e.mobile_image:e.desktop_image,'"><a class="w-100 h-100 d-block" href="').concat(null!=e.redirect_link?e.redirect_link:"",'"></a></div>')});a.append(t)})}function BuildSecondaryOfferBanner(e){var a=$(".js-main-offer-banners");(e=sortBanner(e)).map(function(e){var t=$("<div>",{class:"col-md-6 mb-4",html:'<div class="card shadow border-0 card--secondary-offer-highlight lazy-img-bg" data-src="'.concat(is_mobile?e.mobile_image:e.desktop_image,'"><a class="w-100 h-100 d-block" href="').concat(null!=e.redirect_link?e.redirect_link:"",'"></a></div>')});a.append(t)})}function asyncGeneratorStep(e,t,a,o,r,n,i){try{var s=e[n](i),c=s.value}catch(e){return void a(e)}s.done?t(c):Promise.resolve(c).then(o,r)}function _asyncToGenerator(s){return function(){var e=this,i=arguments;return new Promise(function(t,a){var o=s.apply(e,i);function r(e){asyncGeneratorStep(o,t,a,r,n,"next",e)}function n(e){asyncGeneratorStep(o,t,a,r,n,"throw",e)}r(void 0)})}}function initInstitutional(){return _initInstitutional.apply(this,arguments)}function _initInstitutional(){return(_initInstitutional=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GetBanners();case 2:0<(t=e.sent).institutional_banner_list.length&&BuildInstitutionalBanner(t.institutional_banner_list),getPageInstitutional();case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function getPageInstitutional(){$(".js-banner-top-institutional").owlCarousel({items:1,loop:!0,margin:10,autoplay:!0,autoplayTimeout:1e4,autoplayHoverPause:!0,responsive:{0:{nav:!1},600:{nav:!0}}}),$(".opportunities-cards").owlCarousel({loop:!1,margin:10,responsive:{0:{items:1},600:{items:4}}})}function BuildInstitutionalBanner(e){var a=$(".js-banner-top-institutional");(e=sortBanner(e)).map(function(e){var t=$("<a>",{href:null!=e.redirect_link?e.redirect_link:"",html:'<img src="'.concat(e.desktop_image,'" class="banner-desktop d-none d-sm-block" /><img src="').concat(e.mobile_image,'" class="banner-mobile d-block d-sm-none w-100" />')});a.append(t)})}function getPageOurStory(){$(".story-line-carousel").owlCarousel({loop:!1,margin:10,nav:!0,dots:!1,animateOut:"fadeOut",responsive:{0:{items:1},600:{items:1}}}),$(".opportunities-cards").owlCarousel({loop:!1,margin:10,responsive:{0:{items:1},600:{items:4}}})}function asyncGeneratorStep(e,t,a,o,r,n,i){try{var s=e[n](i),c=s.value}catch(e){return void a(e)}s.done?t(c):Promise.resolve(c).then(o,r)}function _asyncToGenerator(s){return function(){var e=this,i=arguments;return new Promise(function(t,a){var o=s.apply(e,i);function r(e){asyncGeneratorStep(o,t,a,r,n,"next",e)}function n(e){asyncGeneratorStep(o,t,a,r,n,"throw",e)}r(void 0)})}}function getSimilarProducts(){return _getSimilarProducts.apply(this,arguments)}function _getSimilarProducts(){return(_getSimilarProducts=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a,o=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=1<(t=0<o.length&&void 0!==o[0]?o[0]:null).split("/").length?t.split("/")[1]:t.split("/")[0],e.next=4,newSearchProducts("",10,null!==t?{"category[]":a}:null).then(function(e){buildSearchProductResults($(".js-similar-products"),e.results),productImpression(e.results,"Página de produto")}).catch(function(e){console.warn(e,"Falha ao tentar buscar os produtos")});case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function asyncGeneratorStep(e,t,a,o,r,n,i){try{var s=e[n](i),c=s.value}catch(e){return void a(e)}s.done?t(c):Promise.resolve(c).then(o,r)}function _asyncToGenerator(s){return function(){var e=this,i=arguments;return new Promise(function(t,a){var o=s.apply(e,i);function r(e){asyncGeneratorStep(o,t,a,r,n,"next",e)}function n(e){asyncGeneratorStep(o,t,a,r,n,"throw",e)}r(void 0)})}}$(document).ready(function(){"undefined"!=typeof PAGE&&"institutional"==PAGE&&($(".cronoLista").owlCarousel({loop:!1,nav:!1,items:1,dots:!1,autoWidth:!0}),$(".btn-avanca-carrossel").on("click",function(){$(".cronoLista").trigger("next.owl.carousel")}),$(".btn-recua-carrossel").on("click",function(){$(".cronoLista").trigger("prev.owl.carousel")}))}),$(document).ready(function(){"undefined"!=typeof PAGE&&"myList"==PAGE&&(initMyList(),getMoreProductsMyList())}),$(document).ready(function(){function e(e,t){var a,o,r=1<arguments.length&&void 0!==t&&t;$(".js-btn-send-order").attr("disabled",!0),a=r?["XML"]:["PNG","JPEG","JPG","PDF"],e[0].files[0]?(e[0].files[0].size/Math.pow(1024,2)<=5?(o=e[0].files[0].name.substring(e[0].files[0].name.lastIndexOf(".")+1),a.includes(o.toUpperCase())?($(".js-msg-error").text(""),$(".js-btn-send-order").removeAttr("disabled"),r&&$(".js-msg-sucess").text("Arquivo selecionado com sucesso")):($(".js-msg-error").text("Tipo de arquivo inválido"),r&&$(".js-msg-sucess").text(""))):($(".js-msg-error").text("O arquivo não pode ser maior do que 5 MB"),r&&$(".js-msg-sucess").text("")),e.closest(".js-custom-file").find(".js-custom-file-label").text(e[0].files[0].name)):(e.closest(".js-custom-file").find(".js-custom-file-label").text("Selecionar arquivo"),$(".js-msg-error").text(""))}$(".btn-back").click(function(e){e.preventDefault(),history.back()}),$("#order_transition_form").submit(function(){return!(0<$(document).find("input[name='payment-method']").length)||(0<$(document).find("input[name='payment-method']:checked").length||($(".msg").html("<div class='alert alert-danger'>Você deve escolher pelo menos um meio de pagamento para continuar</div>"),$("html, body").animate({scrollTop:0},500),!1))}),$(".js-custom-file-input").change(function(){e($(this))}),$(".js-custom-xml-input").change(function(){e($(this),!0)})}),$(document).ready(function(){"undefined"!=typeof PAGE&&"our_story"==PAGE&&getPageOurStory()}),$(document).ready(function(){var t,e,a,o,r,n;"undefined"!=typeof PAGE&&"product"==PAGE&&(t=PRODUCT_CATEGORY.split("/"),o=!1,0<(a=(e=JSON.parse(localStorage.getItem("regions_category")).filter(function(e){if(e.city_id==REGION.city_id&&e.profile_type==REGION.type)return!0})[0].categories.filter(function(e){if(e.slug==t[0])return!0}))[0].subcategories.filter(function(e){if(e.slug==t[1])return!0}))[0].subcategories.length&&(o=a[0].subcategories.filter(function(e){if(e.slug==t[2])return!0})),r=$(".js-breadcrumb-sku").html().split("</li>"),n=o?"\n            ".concat(r[0],'</li>\n            <li class="breadcrumb-item" aria-current="page"><a href="/').concat(e[0].slug,'/" id="js-breadcrumbs-n1">').concat(e[0].name,'</a></li>\n            <li class="breadcrumb-item" aria-current="page"><a href="/').concat(e[0].slug,"/").concat(a[0].slug,'/" id="js-breadcrumbs-n2">').concat(a[0].name,'</a></li>\n            <li class="breadcrumb-item" aria-current="page"><a href="/').concat(e[0].slug,"/").concat(a[0].slug,"/").concat(o[0].slug,'/" id="js-breadcrumbs-n3">').concat(o[0].name,"</a></li>\n            ").concat(r[1],"</li>\n            "):"\n            ".concat(r[0],'</li>\n            <li class="breadcrumb-item" aria-current="page"><a href="/').concat(e[0].slug,'/" id="js-breadcrumbs-n1">').concat(e[0].name,'</a></li>\n            <li class="breadcrumb-item" aria-current="page"><a href="/').concat(e[0].slug,"/").concat(a[0].slug,'/" id="js-breadcrumbs-n2">').concat(a[0].name,"</a></li>\n            ").concat(r[1],"</li>\n            "),$(".js-breadcrumb-sku").html(n))});var productAssociationPage={page:1,lastPage:1,textSearch:""},productAssociationSearch=!1;function listProductsToAssociation(e){e.map(function(e){var t=$("<tr></tr>",{class:"js-products-association-select-product cursor-pointer","data-id":e.code,"data-name":e.product}),a=$("<td></td>",{class:"pl-3",html:e.product}),o=$("<td></td>",{class:"text-right pr-3",html:"<span class='text-primary'>Selecionar</span>"});t.append(a),t.append(o),$(".js-table-products-association tbody").append(t)})}function skuInfoEdit(e){e="boolean"==typeof e&&e;for(var t=document.querySelector("table.sku-info"),a=!1,o=0,r=["name","type","packaging","weight_qty","brand","unit","category","gtin","id"];o<r.length;o++){var n,i=r[o],s=t.querySelector('*[name="'.concat(i,'"]'));"name"===i&&s.value&&(a=!0),!1===e&&!0===a?("id"!==i&&s.classList.remove("input-disable"),"name"===i&&(t.querySelector('input[name="has_new_sku"]').value="true"),"name"!==i&&"weight_qty"!==i&&"brand"!==i&&"unit"!==i||(s.required=!0),"id"===i&&(s.value="",document.getElementById("sku-info-header-".concat(i)).setAttribute("hidden",!0),document.getElementById("sku-info-detail-".concat(i)).setAttribute("hidden",!0)),"gtin"===i&&(document.getElementById("sku-info-header-".concat(i)).classList.add("pl-4"),document.getElementById("sku-info-detail-".concat(i)).classList.add("pl-4")),(n=document.getElementById("button-sku-clone")).hidden=!1,n.classList.add("input-disable"),n.innerText="SKU Criado!"):!0===e&&(s.classList.add("input-disable"),"name"===i&&(t.querySelector('input[name="has_new_sku"]').value="false"),"name"!==i&&"weight_qty"!==i&&"brand"!==i&&"unit"!==i||(s.required=!1),"id"===i&&(document.getElementById("sku-info-header-".concat(i)).removeAttribute("hidden"),document.getElementById("sku-info-detail-".concat(i)).removeAttribute("hidden")),"gtin"===i&&(document.getElementById("sku-info-header-".concat(i)).classList.remove("pl-4"),document.getElementById("sku-info-detail-".concat(i)).classList.remove("pl-4")),(n=document.getElementById("button-sku-clone")).hidden=!1,n.classList.remove("input-disable"),n.innerText="Criar Novo SKU")}}var getProductsToAssociation=function(e,t,a){var r=0<arguments.length&&void 0!==e?e:null,n=1<arguments.length&&void 0!==t?t:1,i=2<arguments.length&&void 0!==a?a:"";return new Promise(function(t,e){var a;localStorage.getItem("queryAssoc")!==i&&(localStorage.setItem("queryAssoc",i),localStorage.setItem("supplierId",r));var o={distributor:r,page:n,q:null!==(a=localStorage.getItem("queryAssoc"))&&void 0!==a?a:i};$.get("",o,function(e){t(e)}).fail(function(){console.warn("Ocorreu um erro ao tentar Buscar os produtos pendentes"),e()})})};function check_price(e){return _check_price.apply(this,arguments)}function _check_price(){return(_check_price=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var a,o,r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id,o=t.product_code,r=parseFloat($(".js-selected-product-price").text().replace(",","."))/parseFloat(t.divider),n=0<$('input[name="alternative_distributors"]').length?"/dashboard/products/check-lower-price-multiple/?product=".concat(o,"&price=").concat(r):"/dashboard/products/check-lower-price/?sku=".concat(a,"&price=").concat(r),e.next=6,fetch(n).then(function(e){if(200==e.status)return e.json()}).then(function(e){e.check_passed?$("#form-associate").trigger("submit"):($("#percentage").text(e.percent_cheaper),$("#lower_price").text(e.lower_price_found),$("#modal-confirm-low-price").modal("show"),$("#confirm-low-price").on("click",function(){$("#form-associate").trigger("submit")}))});case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function initStore(){$(".js-select-state-stores").select2(),$(".js-select-state-stores").on("change",function(){""==$(this).val()?$(".js-select-city-stores").val("").attr("disabled",!0).change():changeStores($(this).val())}),$(".js-select-state-stores").val(REGION.state.toLowerCase()).change(),$(document).on("change",".js-select-cities-stores",function(){""==$(this).val()?$(".js-select-stores").val("").attr("disabled",!0).change():changeStoresCities($(this).val())}),$(document).on("change",".js-select-stores",function(){""==$(this).val()?$(".js-select-city").val("").attr("disabled",!0).change():changeStoresForCities($(this).val())}),$(".js-clear-filters").click(function(){changeStores("")}),$(document).on("click",".js-schedule-special",function(e){$(this).children(".schedule-special-box").toggle()}),$(document).on("click",".js-show-map",function(e){for(var t=this.getAttribute("data-latitude"),a=this.getAttribute("data-longitude"),o=this.getAttribute("data-name"),r=document.querySelector(".popup-map");r.firstChild;)r.removeChild(r.firstChild);var n=document.createElement("div");n.setAttribute("class","close-map-background js-close-popup");var i=document.createElement("div");i.setAttribute("id","mapid");var s=document.createElement("div");s.setAttribute("class","close js-close-popup"),r.appendChild(n),r.appendChild(i),r.appendChild(s),showMapStore(t,a,o)}),$(document).on("click",".js-close-popup",function(e){document.querySelector(".popup-map").classList.remove("showMap")})}$(document).ready(function(){_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.getItem("queryAssoc"))return e.next=3,getProductsToAssociation(localStorage.getItem("supplierId"),productAssociationPage.page,localStorage.getItem("queryAssoc")).then(function(e){e.items.length||localStorage.setItem("queryAssoc","")}).catch(function(){console.error("Erro ao buscar mais produtos")});e.next=3;break;case 3:case"end":return e.stop()}},e)}))();var t=0;$(".js-products-association-scroll").scroll($.debounce(50,_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!($(".js-products-association-scroll").scrollTop()>=$(".js-products-association-scroll .js-table-products-association").height()-$(".js-products-association-scroll").height()-550)){e.next=10;break}if($(".js-products-association-scroll").scrollTop()<t){e.next=10;break}if(!($(".js-products-association-scroll .js-table-products-association").height()+280>$(".js-products-association-scroll").scrollTop())){e.next=10;break}if(productAssociationSearch){e.next=10;break}if(productAssociationSearch=!0,productAssociationPage.page<productAssociationPage.lastPage)return productAssociationPage.page=productAssociationPage.page+1,e.next=10,getProductsToAssociation($(".form-select [name=distributor]").val(),productAssociationPage.page,productAssociationPage.textSearch).then(function(e){productAssociationSearch=!1,listProductsToAssociation(e.items)}).catch(function(){console.error("Erro ao buscar mais produtos")});e.next=10;break;case 10:t=$(".js-products-association-scroll").scrollTop();case 11:case"end":return e.stop()}},e)}))));function o(e,t){var a=new Request("/dashboard/products/pending/".concat(e,"/similars?page=").concat(t));return fetch(a).then(function(e){if(200==e.status)return e.json();throw $("#form-associate").on("submit",function(e){var t;return $("<input />").attr("type","hidden").attr("name","botaoSalvarAssociar").attr("value",!0).appendTo("#form-associate"),$("<input />").attr("type","hidden").attr("name","queryAssoc").attr("value",null!==(t=localStorage.getItem("queryAssoc"))&&void 0!==t?t:"").appendTo("#form-associate"),!0}),check_price($("#form-associate").serializeArray().reduce(function(e,t){return e[t.name]=t.value,e},{})),new Error("Nenhum produto encontrado")})}function r(e){for(i=0;i<e.length;i++){var t='<tr>\n                <td><input type="checkbox" value="'.concat(e[i].distributor_id,'" class="idNumber" name="idNumber" /></td>\n                <td>').concat(e[i].full_name,"</td>\n                <td>").concat(e[i].distributor,"</td>\n            </tr>");$(".js-table-products-association-multiple").children("tbody").append(t)}}$(".js-btn-save-associate").on("click",function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(document.getElementById("form-associate").reportValidity())return t.preventDefault(),a=$("#idProduto").val(),e.next=5,o(a,1).then(function(e){$(".js-table-products-association-multiple tbody").html(""),productAssociationPage.page=1,productAssociationPage.lastPage=Math.ceil(e.total_items/e.items_per_page),r(e.items),$("#modal-products-associate").modal("show")}).catch(function(e){console.error(e)});e.next=7;break;case 5:e.next=8;break;case 7:t.preventDefault();case 8:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}());var a=0;$(".js-products-multiple-scroll").scroll($.debounce(50,_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!($(".js-products-multiple-scroll").scrollTop()>=$(".js-products-multiple-scroll .js-table-products-association-multiple").height()-$(".js-products-multiple-scroll").height()-550)){e.next=8;break}if($(".js-products-multiple-scroll").scrollTop()<a){e.next=8;break}if(!($(".js-products-multiple-scroll .js-table-products-association-multiple").height()+280>$(".js-products-multiple-scroll").scrollTop())){e.next=8;break}if(productAssociationPage.page<productAssociationPage.lastPage)return productAssociationPage.page=productAssociationPage.page+1,e.next=8,o($("#idProduto").val(),productAssociationPage.page).then(function(e){r(e.items)}).catch(function(){console.error("Erro ao buscar mais produtos")});e.next=8;break;case 8:a=$(".js-products-multiple-scroll").scrollTop();case 9:case"end":return e.stop()}},e)})))),$(".js-confirm-association").on("click",function(e){e.preventDefault();var a=[];$(".idNumber:checked").each(function(){a.push(parseInt(this.value))});var t=$("#form-associate").serializeArray().reduce(function(e,t){return e[t.name]=t.value,e},{});$("#form-associate").on("submit",function(e){var t;return $("<input />").attr("type","hidden").attr("name","alternative_distributors").attr("value",a).appendTo("#form-associate"),$("<input />").attr("type","hidden").attr("name","botaoSalvarAssociar").attr("value",!0).appendTo("#form-associate"),$("<input />").attr("type","hidden").attr("name","queryAssoc").attr("value",null!==(t=localStorage.getItem("queryAssoc"))&&void 0!==t?t:"").appendTo("#form-associate"),!0}),$("#modal-products-associate").modal("hide"),check_price(t)});var n=$(".form-select [name=distributor]");function s(){$("input[name='divider']").removeClass("border-danger");var e,t,a,o=parseFloat($("input[name='divider']").val());0<o?($(".js-product-variation-alert").addClass("d-none"),e=parseFloat($(".js-sku-edit-cheaper_price").text().replace(",",".")),a=.3*(t=parseFloat($(".js-selected-product-price").text().replace(",","."))/o),0<e&&(e<t-a||t+a<e)&&$(".js-product-variation-alert").removeClass("d-none")):($("input[name='divider']").addClass("border-danger"),$(".js-product-variation-alert").addClass("d-none"))}$("#search-products-association").length&&new List("search-products-association",{valueNames:["name","type","brand"],fuzzySearch:{searchClass:"search",location:0,distance:100,threshold:.4,multiSearch:!0}}),$("form.form-select-logistic").change(function(){$(this).find(".wait-change-logistic").show(),this.submit()}),$(".sku-suggestions tr").on("click",function(){var o=$(this),r=$(".sku-info");["name","type","packaging","weight_qty","brand","unit","category","id","gtin","cheaper_price"].forEach(function(e){var t,a="[name="+e+"]";"unit"===e||"category"===e?r.find(a).val(o.find(a).data("id")):"cheaper_price"==e?r.find(".js-sku-edit-cheaper_price").text(o.find(a).text()):(t=o.find(a).text(),r.find(a).val(t).closest("div").attr("title",t).attr("data-original-title",t).tooltip("update"))}),s(),skuInfoEdit(!0);var e=$(".select-unit select option").filter(":selected").html();$(".select-unit").attr("title",e).attr("data-original-title",e).tooltip("update");var t=$(".select-category select option").filter(":selected").html();$(".select-category").attr("title",t).attr("data-original-title",t).tooltip("update")}),$("form.form-select-logistic").change(function(){$(this).find(".wait-change-logistic").show(),this.submit()}),$("input[name='divider']").on("keyup change",$.debounce(500,function(){s()}));var e=$(".sku-suggestions tbody tr:first");e.find("td[name='gtin']").text()===$("#product-gtin").text()&&e.trigger("click"),n.on("change",function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=$(this).val(),localStorage.getItem("supplierId")!==a&&localStorage.setItem("queryAssoc",""),""!=a)return productAssociationPage.page=1,productAssociationPage.lastPage=1,$(".js-products-association-search").val(localStorage.getItem("queryAssoc")),productAssociationPage.textSearch=$(".js-products-association-search").val(),$(".js-change-products-association").removeClass("d-none"),$(".js-products-association-brn-submit").removeAttr("disabled"),e.next=11,getProductsToAssociation(a,productAssociationPage.page,productAssociationPage.textSearch).then(function(e){$(".js-table-products-association tbody").html(""),$("#modal-products").modal("show"),productAssociationPage.lastPage=Math.ceil(e.total_items/e.items_per_page),listProductsToAssociation(e.items)}).catch(function(){console.error("Erro na listagem de produtos")});e.next=13;break;case 11:e.next=15;break;case 13:$(".js-change-products-association").addClass("d-none"),$(".js-products-association-brn-submit").attr("disabled",!0);case 15:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()),$(".js-products-association-search").on("keyup change",$.debounce(1e3,function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if([9,16,17,18,20,27,33,34,35,36,37,39,91,106,107,111,144].includes(t.keyCode)){e.next=8;break}return productAssociationPage.page=1,productAssociationPage.lastPage=1,productAssociationPage.textSearch=$(this).val(),productAssociationSearch=!0,e.next=8,getProductsToAssociation($(".form-select [name=distributor]").val(),productAssociationPage.page,productAssociationPage.textSearch).then(function(e){$(".js-table-products-association tbody").html(""),$(".js-products-association-scroll").scrollTop(0),productAssociationPage.lastPage=Math.ceil(e.total_items/e.items_per_page),productAssociationSearch=!1,listProductsToAssociation(e.items)}).catch(function(e){console.error("Erro ao tentar buscar produtos",e)});case 8:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}())),$(".js-change-products-association").click(function(e){e.preventDefault(),n.change()}),$(".js-table-products-association").on("click",".js-products-association-select-product",function(e){e.preventDefault(),$(".js-products-association-id").val($(this).attr("data-id")),$(".js-products-association-name").val($(this).attr("data-name")),$("#modal-products").modal("hide"),$(".js-products-association-form").submit()})});var changeStores=function(a){return new Promise(function(e,t){loadSpinner(),link=URLSTORES+"?uf=",$.get(link+a,function(e){showStoresByCity(e),0!==$(".js-select-cities-stores option[value="+REGION.city_id+"]").length&&$(".js-select-cities-stores").val(REGION.city_id).change()})})},changeStoresCities=function(a){return new Promise(function(e,t){loadSpinner(),link=URLSTORES+"?cidade=",$.get(link+a,function(e){showStoresByCity(e)})})},changeStoresForCities=function(a){return new Promise(function(e,t){loadSpinner(),link=URLSTORES+"?loja=",$.get(link+a,function(e){showStoresByStore(e)})})};function showStoresByCity(e){var t=e,a=t.length-1;t[a].cities&&showSelectCities(t[a].cities),showSelectStores(t),renderStores(e)}function showStoresByStore(e){renderStores(e)}function renderStores(e){for(var t=e,a=document.querySelector(".stores-list");a.firstChild;)a.removeChild(a.firstChild);for(var o=0;o<t.length;o++)if(t[o].name){var r=document.createElement("div");r.setAttribute("class","col-12 col-lg-4 mb-4");var n=document.createElement("div");n.setAttribute("class","card");var i=document.createElement("div");i.setAttribute("class","card-store-description p-4 regular-sm");var s=document.createElement("div");s.setAttribute("class","card-store-image");var c=document.createElement("img");c.setAttribute("class","store-image");var l=document.createElement("h3");l.setAttribute("class","name-store");var d=document.createElement("div");d.setAttribute("class","phone");var u=document.createElement("p");u.textContent=t[o].phone,u.setAttribute("class","font-weight-bold");var p=document.createElement("div");p.setAttribute("class","address");var m=document.createElement("div");m.setAttribute("class","street mb-3");var f=document.createElement("p");f.setAttribute("class","mb-0");var h=document.createElement("p");h.setAttribute("class","mb-0");var g=document.createElement("p");g.setAttribute("class","mb-0");var v=document.createElement("p");v.setAttribute("class","mb-0");var b=document.createElement("a");b.setAttribute("class","js-show-map"),b.setAttribute("data-latitude",t[o].latitude),b.setAttribute("data-longitude",t[o].longitude),b.setAttribute("data-name",t[o].name);var y=document.createElement("div");y.setAttribute("class","schedule");var _=document.createElement("p");_.setAttribute("class","font-weight-bold mb-1");var $=document.createElement("p");$.setAttribute("class","mb-1");var C=document.createElement("p");C.setAttribute("class","mb-1");var k=document.createElement("p");k.setAttribute("class","mb-0");var x=document.createElement("div");x.setAttribute("class","schedule-special mt-3");var j=document.createElement("div");j.setAttribute("class","schedule-special-box");var w=document.createElement("a");w.setAttribute("class","js-schedule-special");var A=document.createElement("div");A.setAttribute("class","here-find mt-3 pt-3 pl-0");var S=document.createElement("p");S.setAttribute("class","font-weight-bold");var T=document.createElement("div");T.setAttribute("class","here-find-itens");var E=document.createElement("div");E.setAttribute("class","payment-methods mt-3 pt-3 pl-0");var P=document.createElement("p");P.setAttribute("class","font-weight-bold");var F=document.createElement("div");F.setAttribute("class","payment-methods-itens");var R=document.createElement("div");R.setAttribute("class","we-collect mt-3 pt-3 pl-0");var I=document.createElement("p");I.setAttribute("class","font-weight-bold");var O=document.createElement("div");O.setAttribute("class","we-collect-itens");var L=document.createElement("a");L.setAttribute("class","link-flyers"),L.setAttribute("href","/lojas/"+t[o].slug),l.textContent=t[o].name,t[o].front_image?c.setAttribute("src",t[o].front_image):(c.setAttribute("src",STATIC_IMG+"stores/photo-store.png"),l.setAttribute("class","name-store no-photo")),f.textContent=t[o].address_street+", "+t[o].address_number,h.textContent=t[o].address_city+"/"+t[o].address_state,g.textContent=t[o].address_cep,v.textContent="Referência: "+t[o].reference_point,_.textContent="Horário de funcionamento",$.textContent="Segunda a Sábado: "+t[o].working_days_start.substr(0,5)+" às "+t[o].working_days_end.substr(0,5),C.textContent="Domingos: "+t[o].sunday_start.substr(0,5)+" às "+t[o].sunday_end.substr(0,5),t[o].holiday_start?k.textContent="Feriados: "+t[o].holiday_start.substr(0,5)+" às "+t[o].holiday_end.substr(0,5):k.textContent="Feriados: Consultar a gerência",w.textContent="Ver horário de atendimento especial",S.textContent="Aqui nessa unidade você encontra:",I.textContent="Aqui nessa unidade coletamos produtos como:",P.textContent="Formas de pagamento:";var M=t[o].special_schedule;if(t[o].special_schedule)for(var q=0;q<M.length;q++){var G=document.createElement("p");M[q].start_time?G.textContent=M[q].title+", "+M[q].start_time.substr(0,5)+" às "+M[q].end_time.substr(0,5):G.textContent=M[q].title,G.setAttribute("class","mb-0"),j.appendChild(G)}var N=t[o].payment_methods;if(t[o].payment_methods){for(var D=[],U=[],B=0;B<N.length;B++)0<N[B].options.length?U.push(N[B]):D.push(N[B]);for(var V=D.concat(U),z=0;z<V.length;z++){var Q=document.createElement("p");if(Q.textContent=V[z].label,Q.setAttribute("class",V[z].slug),0<V[z].options.length){for(var H=document.createElement("ul"),q=0;q<V[z].options.length;q++){var K=document.createElement("li");K.textContent=V[z].options[q],H.appendChild(K)}Q.appendChild(H)}F.appendChild(Q)}}var J=t[o].convenience_services;if(t[o].convenience_services)for(q=0;q<J.length;q++){var Y=document.createElement("p");Y.textContent=J[q].service,Y.setAttribute("class",J[q].service_no_accent),T.appendChild(Y)}var W=t[o].waste_disposal_services;if(t[o].waste_disposal_services)for(z=0;z<W.length;z++){var X=document.createElement("p");X.textContent=W[z].service,X.setAttribute("class",W[z].service_no_accent),O.appendChild(X)}b.textContent="Ver Mapa",L.textContent="Ver os folhetos de ofertas desta loja",r.appendChild(n),n.appendChild(s),s.appendChild(c),s.appendChild(l),n.appendChild(d),d.appendChild(u),n.appendChild(i),i.appendChild(p),p.appendChild(m),m.appendChild(f),m.appendChild(h),m.appendChild(g),m.appendChild(v),p.appendChild(b),i.appendChild(d),d.appendChild(u),i.appendChild(y),y.appendChild(_),y.appendChild($),y.appendChild(C),y.appendChild(k),0<t[o].special_schedule.length&&(i.appendChild(x),x.appendChild(w),w.appendChild(j)),t[o].payment_methods&&(i.appendChild(E),E.appendChild(P),E.appendChild(F)),t[o].convenience_services&&(i.appendChild(A),A.appendChild(S),A.appendChild(T)),t[o].waste_disposal_services&&(i.appendChild(R),R.appendChild(I),R.appendChild(O)),!0===t[o].has_flyer&&n.appendChild(L),a.appendChild(r)}}function showSelectCities(e){for(var t=e,a=document.querySelector(".js-filter-cities");a.firstChild;)a.removeChild(a.firstChild);var o=document.createElement("select");o.setAttribute("class","form-control-block select-filter js-select-cities-stores w-100"),$(o).append($("<option>",{value:"cities[c].city_id",text:"Cidade"}));for(var r=0;r<t.length;r++)$(o).append($("<option>",{value:t[r].city_id,text:t[r].city_name}));a.appendChild(o),$(".js-select-cities-stores").select2()}function showSelectStores(e){for(var t=e,a=document.querySelector(".js-filter-stores");a.firstChild;)a.removeChild(a.firstChild);var o=document.createElement("select");o.setAttribute("class","form-control-block select-filter js-select-stores w-100"),$(o).append($("<option>",{value:"",text:"Loja"}));for(var r=0;r<t.length;r++)$(o).append($("<option>",{value:t[r].pk,text:t[r].name}));a.appendChild(o),$(".js-select-stores").select2()}function showMapStore(e,t,a){document.querySelector(".popup-map").classList.add("showMap");var o=L.map("mapid").setView([e,t],13);L.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw",{maxZoom:18,attribution:'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',id:"mapbox/streets-v11",tileSize:512,zoomOffset:-1}).addTo(o),L.marker([e,t]).addTo(o).bindPopup("<b>"+a+"</b>").openPopup()}function loadSpinner(){var e=document.querySelector(".stores-list"),t=document.createElement("div");t.setAttribute("class","col-12 text-center");var a=document.createElement("div");a.setAttribute("class","spinner-border store-spinner"),$(".store-spinner").length||(e.appendChild(t),t.appendChild(a))}$(document).ready(function(){var e;"undefined"!=typeof PAGE&&"stores_offers"==PAGE&&(e=window.location.pathname.replace(/^.+\/([a-z-]+)\/?$/,"$1"),loadStoreOffers(e),loadFlyerStoreOffers(e),$(document).on("click",".js-close-popup",function(e){document.querySelector(".popup-map").classList.remove("showMap")}),$(document).on("click",".js-show-map",function(e){var t=this.getAttribute("data-latitude"),a=this.getAttribute("data-longitude"),o=this.getAttribute("data-name");showMapStore(t,a,o)}),$(document).on("click",".js-schedule-special",function(e){$(this).children(".schedule-special-box").toggle()}))});var loadStoreOffers=function(o){return new Promise(function(e,t){var a="/lojas/v1/stores/"+o;$.get(a,function(e){loadDataStore(e.data)})})};function loadDataStore(e){document.querySelector(".name-store").innerHTML=e.name,document.querySelector(".address").innerHTML=e.address_street+", nº "+e.address_number+" <br>Referência: "+e.reference_point;var t=document.querySelector(".js-show-map");if(t.setAttribute("data-latitude",e.latitude),t.setAttribute("data-longitude",e.longitude),t.setAttribute("data-name",e.name),document.querySelector(".phone").innerHTML=e.phone,document.querySelector(".working-days-start").innerHTML=e.working_days_start.substr(0,5),document.querySelector(".working-days-end").innerHTML=e.working_days_end.substr(0,5),document.querySelector(".sunday-start").innerHTML=e.sunday_start.substr(0,5),document.querySelector(".sunday-end").innerHTML=e.sunday_end.substr(0,5),0<e.special_schedule.length){var a=e.special_schedule,o=document.querySelector(".schedule-special-box");if(document.querySelector(".schedule-special").setAttribute("class","schedule-special mt-3 d-block"),e.special_schedule)for(var r,n=0;n<a.length;n++){a[n].start_time&&a[n].start_time?(r=document.createElement("p")).textContent=a[n].title+", "+a[n].start_time.substr(0,5)+" as "+a[n].end_time.substr(0,5):(r=document.createElement("p")).textContent=a[n].title,r.setAttribute("class","mb-2"),o.appendChild(r)}}else{document.querySelector(".schedule-special").setAttribute("class","schedule-special mt-3 d-none")}var i=e.payment_methods,s=document.querySelector(".payment-methods-itens");if(e.payment_methods){for(var c=[],l=[],d=0;d<i.length;d++)0<i[d].options.length?l.push(i[d]):c.push(i[d]);for(var u=c.concat(l),p=0;p<u.length;p++){var m=document.createElement("p");if(m.textContent=u[p].label,m.setAttribute("class",u[p].slug),0<u[p].options.length){for(var f=document.createElement("ul"),h=0;h<u[p].options.length;h++){var g=document.createElement("li");g.textContent=u[p].options[h],f.appendChild(g)}m.appendChild(f)}s.appendChild(m)}}var v=e.convenience_services,b=document.querySelector(".here-find-itens");if(e.convenience_services)for(var y=0;y<v.length;y++){var _=document.createElement("p");_.textContent=v[y].service,_.setAttribute("class",v[y].service_no_accent),b.appendChild(_)}var $=e.waste_disposal_services,C=document.querySelector(".we-collect-itens");if(e.waste_disposal_services)for(var k=0;k<$.length;k++){var x=document.createElement("p");x.textContent=$[k].service,x.setAttribute("class",$[k].service_no_accent),C.appendChild(x)}document.querySelector(".spinner-border-load").setAttribute("class","row box-stores p-4 spinner-border-load d-none"),document.querySelector(".data-store-load").setAttribute("class","row box-stores p-4 data-store-load mr-0 ml-0")}var loadFlyerStoreOffers=function(a){return new Promise(function(e,t){link=URLFLYERS+a,$.get(link,function(e){e&&loadFlyerStore(e.data)})})};function loadFlyerStore(e){var t,a,o=e;o.length&&(t=document.querySelector(".offers-title"),(a=document.createElement("h1")).setAttribute("class","mb-4"),a.textContent="Ofertas vigentes",t.appendChild(a));for(var r=0;r<o.length;r++){var n,i,s,c,l,d,u,p,m,f,h,g,v,b,y,_,$,C,k,x,j,w,A,S,T,E,P,F=document.querySelector(".flyer-list");o[r].name&&((n=document.createElement("div")).setAttribute("class","col-6 col-md-3 mb-4"),(i=document.createElement("div")).setAttribute("class","card"),(s=document.createElement("a")).setAttribute("data-fancybox",o[r].start_date+r),s.setAttribute("data-caption",o[r].name),s.setAttribute("href",o[r].image_1),(c=document.createElement("img")).setAttribute("class","card-flyer-image rounded-top w-100"),c.setAttribute("src",o[r].image_1),(l=document.createElement("a")).setAttribute("data-fancybox",o[r].start_date+r),l.setAttribute("data-caption",o[r].name),l.setAttribute("href",o[r].image_2),l.setAttribute("style","display: none"),(d=document.createElement("img")).setAttribute("class","card-flyer-image rounded-top w-100"),d.setAttribute("src",o[r].image_2),(u=document.createElement("a")).setAttribute("data-fancybox",o[r].start_date+r),u.setAttribute("data-caption",o[r].name),u.setAttribute("href",o[r].image_3),u.setAttribute("style","display: none"),(p=document.createElement("img")).setAttribute("class","card-flyer-image rounded-top w-100"),p.setAttribute("src",o[r].image_3),(m=document.createElement("a")).setAttribute("data-fancybox",o[r].start_date+r),m.setAttribute("data-caption",o[r].name),m.setAttribute("href",o[r].image_4),m.setAttribute("style","display: none"),(f=document.createElement("img")).setAttribute("class","card-flyer-image rounded-top w-100"),f.setAttribute("src",o[r].image_4),(h=document.createElement("a")).setAttribute("data-fancybox",o[r].start_date+r),h.setAttribute("data-caption",o[r].name),h.setAttribute("href",o[r].image_5),h.setAttribute("style","display: none"),(g=document.createElement("img")).setAttribute("class","card-flyer-image rounded-top w-100"),g.setAttribute("src",o[r].image_5),(v=document.createElement("a")).setAttribute("data-fancybox",o[r].start_date+r),v.setAttribute("data-caption",o[r].name),v.setAttribute("href",o[r].image_6),v.setAttribute("style","display: none"),(b=document.createElement("img")).setAttribute("class","card-flyer-image rounded-top w-100"),b.setAttribute("src",o[r].image_6),(y=document.createElement("a")).setAttribute("data-fancybox",o[r].start_date+r),y.setAttribute("data-caption",o[r].name),y.setAttribute("href",o[r].image_7),y.setAttribute("style","display: none"),(_=document.createElement("img")).setAttribute("class","card-flyer-image rounded-top w-100"),_.setAttribute("src",o[r].image_7),($=document.createElement("a")).setAttribute("data-fancybox",o[r].start_date+r),$.setAttribute("data-caption",o[r].name),$.setAttribute("href",o[r].image_8),$.setAttribute("style","display: none"),(C=document.createElement("img")).setAttribute("class","card-flyer-image rounded-top w-100"),C.setAttribute("src",o[r].image_8),(k=document.createElement("div")).setAttribute("class","card-flyer-description p-4 regular-sm"),(x=document.createElement("p")).setAttribute("class","title mb-2"),(j=document.createElement("p")).setAttribute("class","date mb-0"),w=o[r].start_date.substr(8,2),A=o[r].start_date.substr(5,2),S=o[r].start_date.substr(0,4),T=o[r].end_date.substr(8,2),E=o[r].end_date.substr(5,2),P=o[r].end_date.substr(0,4),x.textContent=o[r].name,j.textContent=w+"/"+A+"/"+S+" - "+T+"/"+E+"/"+P,n.appendChild(i),i.appendChild(s),s.appendChild(c),o[r].image_2&&(i.appendChild(l),l.appendChild(d)),o[r].image_3&&(i.appendChild(u),u.appendChild(p)),o[r].image_4&&(i.appendChild(m),m.appendChild(f)),o[r].image_5&&(i.appendChild(h),h.appendChild(g)),o[r].image_6&&(i.appendChild(v),v.appendChild(b)),o[r].image_7&&(i.appendChild(y),y.appendChild(_)),o[r].image_8&&(i.appendChild($),$.appendChild(C)),i.appendChild(k),k.appendChild(x),k.appendChild(j),F.appendChild(n))}}function showMapStore(e,t,a){document.querySelector(".popup-map").classList.add("showMap");var o=L.map("mapid").setView([e,t],13);L.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw",{maxZoom:18,attribution:'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',id:"mapbox/streets-v11",tileSize:512,zoomOffset:-1}).addTo(o),L.marker([e,t]).addTo(o).bindPopup("<b>"+a+"</b>").openPopup()}function showModalWantSell(){var e=document.querySelector(".modal-want-sell");$(e).toggleClass("open")}function getPageWorkWithUs(){$(".js-testimonials-carousel").owlCarousel({loop:!1,margin:10,autoHeight:!0,responsive:{0:{items:1},600:{items:3}}})}$(document).ready(function(){"undefined"!=typeof PAGE&&"want_sell"==PAGE&&$(document).on("click",".js-modal-want-sell",function(){showModalWantSell()})}),$(document).ready(function(){"undefined"!=typeof PAGE&&"work_with_us"==PAGE&&getPageWorkWithUs()});var getCities=function(a){return new Promise(function(t,e){void 0!==URL.load_cities?$.get(URL.load_cities,{state_pk:a},function(e){t(e)}).fail(function(){console.warn("Ocorreu um erro ao tentar buscar as ciadades"),e()}):(console.warn("URL não declara"),e())})};function ownKeys(t,e){var a,o=Object.keys(t);return Object.getOwnPropertySymbols&&(a=Object.getOwnPropertySymbols(t),e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,a)),o}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(a),!0).forEach(function(e){_defineProperty(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,o=new Array(t);a<t;a++)o[a]=e[a];return o}function asyncGeneratorStep(e,t,a,o,r,n,i){try{var s=e[n](i),c=s.value}catch(e){return void a(e)}s.done?t(c):Promise.resolve(c).then(o,r)}function _asyncToGenerator(s){return function(){var e=this,i=arguments;return new Promise(function(t,a){var o=s.apply(e,i);function r(e){asyncGeneratorStep(o,t,a,r,n,"next",e)}function n(e){asyncGeneratorStep(o,t,a,r,n,"throw",e)}r(void 0)})}}var getSuppliers=function(){return new Promise(function(){var a=_asyncToGenerator(regeneratorRuntime.mark(function e(r,t){var a,o,n,i,s,c,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===URL.get_suppliers){e.next=19;break}if(o=!(a=[]),n=REGION.city_id,i=REGION.type,s=new Date,document.cookie.split(";").forEach(function(e){e.includes("cb_user_postal_code")&&(c=e.split("=")[1].replace("-",""))}),localStorage.regions_suppliers&&JSON.parse(localStorage.regions_suppliers).map(function(e){var t;e.city_id==n&&(null==e?void 0:e.postal_code)==c&&e.profile_type==i&&(t=new Date(e.created_at),(s-t)/72e5<1&&(o=!0,a=e.suppliers))}),!o){e.next=12;break}r(a),e.next=17;break;case 12:return console.log("updating suppliers"),e.next=15,getUserData();case 15:l=e.sent,$.get(URL.get_suppliers,{type:"CNPJ"==l.type?"PJ":"PF",city_id:l.city_id},function(e){e.sort(function(e,t){return e.relevance>t.relevance?1:e.relevance<t.relevance?-1:0});var t,a,o={city_id:n,postal_code:c,profile_type:i,created_at:s.toJSON(),suppliers:e};localStorage.regions_suppliers&&0<localStorage.regions_suppliers.length?(t=JSON.parse(localStorage.regions_suppliers).filter(function(e){return e.city_id!=n||(null==e?void 0:e.postal_code)!=c||e.profile_type!=i}),t=[].concat(_toConsumableArray(t),[_objectSpread({},o)]),localStorage.setItem("regions_suppliers",JSON.stringify(t))):(a=[o],localStorage.setItem("regions_suppliers",JSON.stringify(a))),r(e)}).fail(function(){console.warn("Ocorreu um erro ao tentar buscar os fornecedores"),t()});case 17:e.next=21;break;case 19:console.warn("URL não declarada"),t();case 21:case"end":return e.stop()}},e)}));return function(e,t){return a.apply(this,arguments)}}())};function asyncGeneratorStep(e,t,a,o,r,n,i){try{var s=e[n](i),c=s.value}catch(e){return void a(e)}s.done?t(c):Promise.resolve(c).then(o,r)}function _asyncToGenerator(s){return function(){var e=this,i=arguments;return new Promise(function(t,a){var o=s.apply(e,i);function r(e){asyncGeneratorStep(o,t,a,r,n,"next",e)}function n(e){asyncGeneratorStep(o,t,a,r,n,"throw",e)}r(void 0)})}}var newSearchProducts=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a,o,r,n,i,s,c,l,d,u,p,m,f,h,g,v,b,y,_,$=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=0<$.length&&void 0!==$[0]?$[0]:"",a=1<$.length&&void 0!==$[1]?$[1]:null,o=3<$.length&&void 0!==$[3]?$[3]:0,r=4<$.length&&void 0!==$[4]?$[4]:"-relevance",n=function(e){var t=e.toLowerCase();return t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(new RegExp(/\s/g),"-")).replace(new RegExp(/[àáâãäå]/g),"a")).replace(new RegExp(/æ/g),"ae")).replace(new RegExp(/ç/g),"c")).replace(new RegExp(/[èéêë]/g),"e")).replace(new RegExp(/[ìíîï]/g),"i")).replace(new RegExp(/ñ/g),"n")).replace(new RegExp(/[òóôõö]/g),"o")).replace(new RegExp(/œ/g),"oe")).replace(new RegExp(/[ùúûü]/g),"u")).replace(new RegExp(/[ýÿ]/g),"y")},d=l=c=i="",u=[],document.cookie.split(";").forEach(function(e){e.includes("cb_user_postal_code")&&(i=e.split("=")[1].replace("-",""))}),document.cookie.split(";").forEach(function(e){e.includes("cb_user_type")&&(d=e.split("=")[1])}),document.cookie.split(";").forEach(function(e){e.includes("cb_user_city_name")&&(l=n(e.split("=")[1]))}),document.cookie.split(";").forEach(function(e){e.includes("cb_user_state")&&(l+="-"+e.split("=")[1].toLowerCase())}),""!==i){e.next=19;break}s="".concat(API_GATEWAY_BASE_URL,"/logistic/logistics/cities/").concat(l,"/").concat("CPF"===d?"PF":"PJ","/available-logistics"),e.next=26;break;case 19:return e.next=21,fetch("".concat(API_GATEWAY_BASE_URL,"/logistic/address/").concat(i));case 21:return p=e.sent,e.next=24,p.json();case 24:m=e.sent,s||(m.neighborhood?(s="".concat(API_GATEWAY_BASE_URL,"/logistic/logistics/neighborhoods/").concat(m.neighborhood.id,"/").concat("CPF"===d?"PF":"PJ","/available-logistics"),(h=new Date).setYear(h.getFullYear()+1),document.cookie="cb_user_neighborhood=".concat(null===(f=m.neighborhood)||void 0===f?void 0:f.id,"; expires=").concat(h,"; path=/")):s=m.city?"".concat(API_GATEWAY_BASE_URL,"/logistic/logistics/cities/").concat(m.city.slug,"/").concat("CPF"===d?"PF":"PJ","/available-logistics"):"".concat(API_GATEWAY_BASE_URL,"/logistic/logistics/cities/").concat(l,"/").concat("CPF"===d?"PF":"PJ","/available-logistics"));case 26:return e.next=28,fetch(s);case 28:return g=e.sent,e.next=31,g.json();case 31:return!(v=e.sent).detail&&v.length?u=v:u.push(-1),u.forEach(function(e,t,a){""!=e&&(c+=0===t?"commaSeparatedRegionIds=".concat(e):",".concat(e))}),b="queryString=".concat(t,"&page=").concat(o,"&order_by=").concat(r).concat(""!=c?"&".concat(c):"").concat(null!=a?"&take=".concat(a):""),e.next=37,fetch("".concat(catalogue_search_url,"?").concat(b));case 37:return y=e.sent,e.next=40,y.json();case 40:return _=e.sent,document.cookie="queryId="+_.queryId+";path=/",e.abrupt("return",_);case 43:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();function simplexCategoryContente(e){var t="atacadao"==MARKETPLACE_NAME?"No Atacadão nós temos os melhores preços de ".concat(e.filters.categories[0],"! Clique para ver nossos descontos e promoções e economize no seu negócio ou na sua casa!"):"A Cotabest traz para você as melhores ofertas de ".concat(e.filters.categories[0],"! Confira nossas promoções e tenha certeza que você está fazendo a compra certa!");$(".js-simplex-text").removeClass("d-none").text(t)}function formatNumber(e){return e=e.toFixed(2),(parseInt(e)==parseFloat(e)?parseInt:parseFloat)(e)}function ownKeys(t,e){var a,o=Object.keys(t);return Object.getOwnPropertySymbols&&(a=Object.getOwnPropertySymbols(t),e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,a)),o}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(a),!0).forEach(function(e){_defineProperty(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,o=new Array(t);a<t;a++)o[a]=e[a];return o}function getAllCategories(){var r,n,i;"undefined"!=typeof GET_ALL_CATEGORIES_MENU&&(r=REGION.city_id,n=REGION.type,i=new Date,localStorage.regions_category&&JSON.parse(localStorage.regions_category).map(function(e){e.city_id==r&&e.profile_type==n&&new Date(e.created_at)}),$.ajax({url:GET_ALL_CATEGORIES_MENU,data:{type:"CNPJ"==REGION.type?"PJ":"PF",city_id:REGION.city_id},type:"GET",success:function(e){buildAllCategories(e);var t,a,o={city_id:r,profile_type:n,created_at:i.toJSON(),categories:e};localStorage.regions_category&&0<localStorage.regions_category.length?(t=JSON.parse(localStorage.regions_category).filter(function(e){return e.city_id!=r||e.profile_type!=n}),t=[].concat(_toConsumableArray(t),[_objectSpread({},o)]),localStorage.setItem("regions_category",JSON.stringify(t))):(a=[o],localStorage.setItem("regions_category",JSON.stringify(a)))}}))}function addCategoriesFooter(e){var t=$(".js-highlight-categories-footer");t&&t[0]?e.map(function(e){var t=e.slug,a=e.name;$(".js-highlight-categories-footer").append('<a class="nav-link text-white pl-md-0" href="/'+t+'/">'+a+"</a>")}):setTimeout(function(){return addCategoriesFooter(e)},100)}function buildAllCategories(e){e.map(function(e){return e.subcategories.map(function(e){e.subcategories.sort(function(e,t){return e.name.localeCompare(t.name)})}),e}),e.map(function(e){return e.subcategories.sort(function(e,t){return e.name.localeCompare(t.name)}),e}),"undefined"!=typeof PAGE&&"home"==PAGE&&buildCategoriesCarousel(e),0<e.length&&buildHighlightCategories(e.slice(0,4)),addCategoriesFooter(e.slice(0,10));for(var t,a,o=0;o<e.length;o++){o<10?($(".js-n1-links ul").append('<li class="nav-item"><a class="nav-link megamenu-category__link d-flex justify-content-between js-link-category-n1" href="/'+e[o].slug+'/" data-pk="'+e[o].id+'" ><span class="megamenu-category__link-text">'+e[o].name+"</span> "+(0<e[o].subcategories.length?'<span class="link-icon-menu float-right"><img src="'+STATIC_IMAGE+'icons/arrow-right.svg"></span>':"")+"</a></li>"),t='<div class="megamenu-category__content js-content-category-n1" id="'+e[o].id+'"><div class="row"><div class="col-md-4 megamenu-category__link-group"></div></div></div>',$(".js-n2-links").append(t)):($(".js-all-categories-content").append('<a class="nav-link megamenu-category__link d-flex justify-content-between js-link-category-n2" href="/'+e[o].slug+'/" data-pk="'+e[o].id+'" ><span class="megamenu-category__link-text">'+e[o].name+'</span> <span class="link-icon-menu float-right"><img src="'+STATIC_IMAGE+'icons/arrow-right.svg"></span></a>'),a='<div class="col-md-4 megamenu-category__content js-content-category-n2"  id="'+e[o].id+'"><div class="megamenu-category__link-group"></div></div>',$("#more-categories .row").append(a)),$(".js-all-categories-mobile .nav").append('<li class="nav-item"><a class="nav-link p-3 megamenu-category__link d-flex justify-content-between js-link-category-mobile-n1" href="'+(0<e[o].subcategories.length?"#":"/"+e[o].slug)+'/" data-pk="mobile-'+e[o].id+'" ><span class="megamenu-category__link-text">'+e[o].name+'</span> <span class="link-icon-menu float-right"><img src="'+STATIC_IMAGE+'icons/arrow-right.svg"></span></a></li>'),$(".js-categories-list").append('<div class="mobile-menu__categories mobile-menu__content position-fixed" id="mobile-'+e[o].id+'"><div class="category-menu-mobile__header"><div class="bg-primary px-3 py-4"><p class="h4 text-white category-menu-mobile__title">'+e[o].name+'</p><a class="'+("atacadao"==MARKETPLACE_NAME?"text-dark":"text-secondary")+'" href="/'+e[o].slug+'/">Ver todas as ofertas</a></div><div class="bg-light mb-3"><a href="#" class="d-block p-3 category-menu-mobile__back-link js-back-btn-mobile text-dark"><img class="mr-2" src="'+STATIC_IMAGE+'icons/arrow-left-dark.svg"/> Voltar</a></div></div><ul class="nav flex-column"></ul></div>');for(var r=0;r<e[o].subcategories.length;r++){o<10?($("#"+e[o].id).find(".megamenu-category__link-group").append('<a href="/'+e[o].slug+"/"+e[o].subcategories[r].slug+'/" class="nav-link megamenu-category__link d-flex justify-content-between js-link-category-n2" data-pk="'+e[o].subcategories[r].id+'"><span class="megamenu-category__link-text">'+e[o].subcategories[r].name+"</span>  "+(0<e[o].subcategories[r].subcategories.length?'<span class="link-icon-menu float-right"><img src="'+STATIC_IMAGE+'icons/arrow-right.svg"></span>':"")+"</a>"),$("#"+e[o].id).find(".row").append('<div class="col-md-8 megamenu-category__content js-content-category-n2 megamenu-category__auto-scroll" id="'+e[o].subcategories[r].id+'"></div>')):($("#"+e[o].id).find(".megamenu-category__link-group").append('<a href="/'+e[o].slug+"/"+e[o].subcategories[r].slug+'/" class="nav-link megamenu-category__link d-flex justify-content-between js-link-category-n3" data-pk="'+e[o].subcategories[r].id+'"><span class="megamenu-category__link-text">'+e[o].subcategories[r].name+"</span>  "+(0<e[o].subcategories[r].subcategories.length?'<span class="link-icon-menu float-right"><img src="'+STATIC_IMAGE+'icons/arrow-right.svg"></span>':"")+"</a>"),$("#more-categories").find(".row").append('<div class="col-md-4 megamenu-category__content js-content-category-n3 megamenu-category__auto-scroll" id="'+e[o].subcategories[r].id+'"></div>')),$("#mobile-"+e[o].id+" ul").append('<li class="nav-item"><a class="nav-link p-3 megamenu-category__link d-flex justify-content-between js-link-category-mobile-n1" href="'+(0<e[o].subcategories[r].subcategories.length?"#":"/"+e[o].slug+"/"+e[o].subcategories[r].slug)+'/" data-pk="mobile-'+e[o].subcategories[r].id+'" > <span class="megamenu-category__link-text">'+e[o].subcategories[r].name+"</span> "+(0<e[o].subcategories[r].subcategories.length?'<span class="link-icon-menu float-right"><img src="'+STATIC_IMAGE+'icons/arrow-right.svg"></span>':"")+"</a></li>"),$(".js-categories-list").append('<div class="mobile-menu__categories mobile-menu__content position-fixed" id="mobile-'+e[o].subcategories[r].id+'"><div class="category-menu-mobile__header"><div class="bg-primary px-3 py-4"><p class="h4 text-white category-menu-mobile__title">'+e[o].subcategories[r].name+'</p><a class="'+("atacadao"==MARKETPLACE_NAME?"text-dark":"text-secondary")+'" href="/'+e[o].slug+"/"+e[o].subcategories[r].slug+'/">Ver todas as ofertas</a></div><div class="bg-light mb-3"><a href="#" class="d-block p-3 category-menu-mobile__back-link js-back-btn-mobile text-dark"><img class="mr-2" src="'+STATIC_IMAGE+'icons/arrow-left-dark.svg"/> Voltar</a></div></div><ul class="nav flex-column"></ul></div>');for(var n=0;n<e[o].subcategories[r].subcategories.length;n++)o<10?$("#"+e[o].subcategories[r].id).append('<a href="/'+e[o].slug+"/"+e[o].subcategories[r].slug+"/"+e[o].subcategories[r].subcategories[n].slug+'/" class="megamenu-category__link--sm">'+e[o].subcategories[r].subcategories[n].name+"</a>"):$("#"+e[o].subcategories[r].id).append('<a href="/'+e[o].slug+"/"+e[o].subcategories[r].slug+"/"+e[o].subcategories[r].subcategories[n].slug+'/" class="megamenu-category__link--sm w-100">'+e[o].subcategories[r].subcategories[n].name+"</a>"),$("#mobile-"+e[o].subcategories[r].id+" ul").append('<li class="nav-item"><a class="nav-link p-3 megamenu-category__link js-link-category-mobile-n2" href="/'+e[o].slug+"/"+e[o].subcategories[r].slug+"/"+e[o].subcategories[r].subcategories[n].slug+'/" >'+e[o].subcategories[r].subcategories[n].name+"</a></li>")}}10<e.length&&$(".js-n1-links ul").append('<li class="nav-item"><a class="nav-link megamenu-category__link d-flex justify-content-between js-link-category-n1" href="#" data-pk="more-categories"><span class="megamenu-category__link-text">Todas as categorias</span> <span class="link-icon-menu float-right"><img src="'+STATIC_IMAGE+'icons/arrow-right.svg"></span></a></li>')}function buildCategoriesCarousel(e){e.map(function(e){var t='<div class="item"><a href="/'+e.slug+'/" class="d-block w-100 text-center"><span class="category-carousel__icon d-flex justify-content-center position-relative"><img class="category-carousel__icon-img position-absolute owl-lazy" data-src="'+STATIC_IMAGE+"categories/"+e.slug+'.png"></span><span class="mt-3 d-block category-carousel__text">'+e.name+"</span></a></div>";$(".js-category-owl-carousel").append(t)}),$(".js-category-owl-carousel").owlCarousel({loop:!0,center:!1,stagePadding:68,margin:70,items:6,nav:!0,dots:!0,lazyLoad:!0,dotsContainer:".js-owl-dots-category",navText:["",""],responsive:{0:{items:2,nav:!1,stagePadding:60,margin:32},600:{items:2,nav:!1,stagePadding:60,margin:32},1e3:{}},onChanged:function(e){$(e.target).closest(".js-owl").find(".owl-dots--text").text("Exibindo ".concat(e.page.index<0?"1":e.page.index+1," de ").concat(Math.ceil(e.item.count/e.page.size)))}})}function buildHighlightCategories(e){e.map(function(e){var t,a,o;is_mobile?(t='<a class="d-flex js-link-category-mobile-n1 justify-content-between nav-link" href="#" data-pk="mobile-'+e.id+'"><span><img class="mobile-menu__link-icon mr-2 lazy-mobile-menu" data-src="'+STATIC_IMAGE+"categories/"+e.slug+'.png" alt="">'+e.name+'</span><img class="" src="'+STATIC_IMAGE+'icons/arrow-right.svg"></a>',$(".js-mobile-menu-highlight-categories").append(t),a='<a class="nav-link '+("atacadao"!=MARKETPLACE_NAME?"text-white":"")+' nav-scroll__link" href="/'+e.slug+'/">'+e.name+"</a>",$(".js-offer-menu-scroll").append(a)):(o='<a class="nav-item nav-link js-link-category-n1 megamenu-highlight-link pb-3" data-pk="'+e.id+'" data-is-menu="true" href="/'+e.slug+'/">'+e.name+"</a>",$(".js-n1-links-highlight").append(o))})}$(document).ready(function(){$(".js-btn-copy-code").click(function(){$(this).closest(".input-group").find(".js-input-copy-code").select(),document.execCommand("copy")})}),function(e){window.CSRF_TOKEN&&e.ajaxSetup({crossDomain:!1,beforeSend:function(e,t){var a;a=t.type,/^(GET|HEAD|OPTIONS|TRACE)$/.test(a)||e.setRequestHeader("X-CSRFToken",CSRF_TOKEN)}})}(jQuery);var banks_imgs=[{code:"BB_TRANSFER",img:"banks/banco-do-brasil.png"},{code:"BRADESCO_TRANSFER",img:"banks/bradesco.png"},{code:"ITAU_TRANSFER_GENERIC",img:"banks/itau.png"},{code:"ITAU_TRANSFER_PF",img:"banks/itau.png"},{code:"ITAU_TRANSFER_PJ",img:"banks/itau.png"},{code:"ITAU_DI",img:"banks/itau.png"},{code:"CEF_TRANSFER",img:"banks/caixa.png"},{code:"ORIGINAL_TRANSFER",img:"banks/original.png"},{code:"SANTANDER_TRANSFER",img:"banks/santander.png"},{code:"SANTANDER_DI",img:"banks/santander.png"},{code:"INTER_TRANSFER",img:"banks/inter.png"},{code:"BS2_TRANSFER",img:"banks/bs2.png"}];$(document).ready(function(){"undefined"==typeof PAGE||"finish_checkout"!=PAGE&&"order_detail"!=PAGE||$(".js-bank-logo").each(function(){var t=$(this).attr("data-code"),e=banks_imgs.filter(function(e){return e.code==t})[0];$(this).attr("src",STATIC_IMAGE+e.img)})}),jQuery.getUrlParams=function(e){var t=e?e.split("?")[1]:window.location.search.slice(1),a={};if(t){t=(t=decodeURI(t)).replace(/</g,"&lt;").replace(/"/g,"&quot;");for(var o=(t=(t=encodeURI(t)).split("#")[0]).split("&"),r=0;r<o.length;r++){var n,i,s=o[r].split("="),c=s[0],l=void 0===s[1]||s[1],c=c.toLowerCase();"string"==typeof l&&(l=l.toLowerCase()),c.match(/\[(\d+)?\]$/)?(a[n=c.replace(/\[(\d+)?\]/,"")]||(a[n]=[]),c.match(/\[\d+\]$/)?(i=/\[(\d+)\]/.exec(c)[1],a[n][i]=l):a[n].push(l)):a[c]?(a[c]&&"string"==typeof a[c]&&(a[c]=[a[c]]),a[c].push(l)):a[c]=l}}return a},function(e,d){var o,t=e.jQuery||e.Cowboy||(e.Cowboy={});t.throttle=o=function(r,n,i,s){var c,l=0;function e(){var e=this,t=new Date-l,a=arguments;function o(){l=+new Date,i.apply(e,a)}s&&!c&&o(),c&&clearTimeout(c),s===d&&r<t?o():!0!==n&&(c=setTimeout(s?function(){c=d}:o,s===d?r-t:r))}return"boolean"!=typeof n&&(s=i,i=n,n=d),t.guid&&(e.guid=i.guid=i.guid||t.guid++),e},t.debounce=function(e,t,a){return a===d?o(e,t,!1):o(e,a,!1!==t)}}(this),$(".lazy-img-bg").Lazy({}),$(window).on("scroll",function(){$(".lazy-img-bg").Lazy({effect:"fadeIn",threshold:200})}),$("img.lazy").Lazy({effect:"fadeIn",visibleOnly:!0,threshold:200,onError:function(e){e.attr("src",STATIC_IMAGE+"icons/no-photo.svg")}});var static_img_url,replaceSpecialChars=function(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/([^\w]+|\s+)/g,"-").replace(/\-\-+/g,"-").replace(/(^-+|-+$)/,"")};function stringToCurrency(e){var t=e;return t.includes(",")&&(t=t.replace(".","").replace(",",".")),parseFloat(t).toLocaleString("pt-BR",{currency:"BRL",style:"currency"}).replace("R$","").trim()}function buildFilters(e){if(0==e.length&&0==Object.keys(e)||0==e.categories.length&&0==e.products.length&&0==e.brands.length&&0==e.types.length&&0==e.packagings.length&&0==e.weight_qty.length&&0==e.available_sellers.length)toggleFilter(0);else{toggleFilter(e.categories.length+e.products.length+e.brands.length+e.types.length+e.packagings.length+e.weight_qty.length+e.available_sellers.length),catalogueFilter.loadProps(e);var t=catalogueFilter.getProperties();for(f in $("#js-category-filter, #js-product-filter, #js-brand-filter, #js-type-filter, #js-packing-filter, #js-quantity-filter, #js-sellers-filter").closest(".filtro").addClass("d-none"),hideCleanFiltersButton(),"Todos os Fornecedores"!=$(".js-select-search-in").val()&&""!=$(".js-select-search-in").val()&&delete t.distribuidores,t)buildFilter(f,t[f])}}function buildFilter(e,t){var a;"categoria"===e?a=$("#js-category-filter"):"produto"===e?a=$("#js-product-filter"):"marca"===e?a=$("#js-brand-filter"):"tipo"===e?a=$("#js-type-filter"):"embalagem"===e?a=$("#js-packing-filter"):"peso-quantidade"===e?a=$("#js-quantity-filter"):"distribuidores"===e&&(a=$("#js-sellers-filter")),a.closest(".filtro").removeClass("d-none"),a.html(""),_.each(t,function(e){buildFilterSubitem(a,e)})}function buildFilterSubitem(e,t){var a,o=Math.floor(1e4*Math.random()),r=e.attr("data-filter-type"),n=catalogueFilter.isFilterSelected(r,t),i=$("<div></div>",{class:"custom-control custom-checkbox my-3 mr-sm-2"}),s=$("<input />",{type:"checkbox",class:"custom-control-input",id:r+"-"+o,value:t});n&&(showCleanFilters(),a=$("<span></span>",{class:"tag-filter badge badges-filter mb-2 mr-2 ","data-id":r+"-"+o,html:"".concat(t," <img class='ml-2 badges-filter__icon' src='").concat(STATIC_IMAGE,"icons/close.svg'>")}),$(".tag-filters").append(a),s.attr("checked",!0));var c=$("<label></label>",{class:"custom-control-label filter__items__label",title:t,for:s.attr("id"),html:"<span class='filter__items__text ".concat("produto"===r||"marca"===r||"distribuidores"===r?"text-capitalize":"","'>").concat(t,"</span>")});i.append(s),i.append(c),e.append(i),s.on("change",function(e){e.preventDefault(),clickFilter(t,r)})}function clickFilter(e,t){loadingProductsResults(),catalogueFilter.click(e,t),filters=catalogueFilter.getSelectedFilters(),_.isEmpty(filters)&&hideCleanFiltersButton(),filterRequest()}function toggleFilter(e){0<e?(expandFilters(),compressProductResults()):(compressFilters(),expandProductResults())}function expandFilters(){$(".tag-filters").removeClass("d-none"),$(".js-show-user-city").addClass("catalogue-header"),$(".catalogue-header-title").removeClass("d-none"),$(".catalogue-filters").removeClass("d-none"),$(".js-top-supplier-list-block, .js-title-for-products").addClass("d-none"),$(".loading-filters").fadeOut()}function compressFilters(){$(".js-show-user-city").removeClass("catalogue-header"),$(".catalogue-header-title").addClass("d-none"),$(".catalogue-filters").addClass("d-none"),$(".js-top-supplier-list-block, .js-title-for-products").removeClass("d-none")}function expandProductResults(){is_mobile||($(".col-catalogue").removeClass("col-md-9").addClass("col-md-12"),productsResults.addClass("c-items-5").removeClass("c-items-4"))}function compressProductResults(){is_mobile||($(".col-catalogue").removeClass("col-md-12").addClass("col-md-9"),productsResults.addClass("c-items-4").removeClass("c-items-5"))}function showCleanFilters(){$("#clean-filters").addClass("clean").removeClass("d-none")}function hideCleanFiltersButton(){$("#clean-filters").addClass("d-none").removeClass("clean"),$(".tag-filter").remove()}function setAlgoliaQueryPositionOnCookie(e,t){Number.isInteger(e)&&Number.isInteger(t)&&(position=e+1+20*t,document.cookie="algoliaQueryPosition=".concat(position,";path=/"))}function buildResult(r,e){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,a=3<arguments.length?arguments[3]:void 0,o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null,n=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;r.cart={},r.cart.cart=!1,r.cart.count="",r.cart.distributor_id=null,r.cart.distributor_name=null,r.cart.distributor_slug=null,r.cart.multiplier="",a.results.length&&a.results.forEach(function(e){e.sku.id==r.id&&(r.cart={},r.cart.cart=!0,r.cart.count=e.count,r.cart.distributor_id=e.distributor.id,r.cart.distributor_name=e.distributor.distributor_profile.fantasy_name,r.cart.distributor_slug=e.distributor.distributor_profile.fantasy_name_slug,r.cart.multiplier=e.multiplier)});var i="/".concat(r.slug),s=MEDIA_URL+r.photo;r.multipliers=[];var c=r.providers[0],l=r.providers[0].prices[0],d=Number(r.providers[0].prices[0].price.toFixed(2));r.providers.forEach(function(o){o.prices.forEach(function(e){var t=Number(e.price.toFixed(2));d<t&&(d=t),(t<Number(l.price.toFixed(2))||t==Number(l.price.toFixed(2))&&e.minimum_quantity<l.minimum_quantity)&&(c=o,l=e);var a={unit_price:e.price,multiplier:e.minimum_quantity,distributor_id:o.providerId};r.multipliers.push(a)})});var u=0;0<l.price&&(u=-100*(l.price/d-1)),r.price={price:l.price,multiplier:l.minimum_quantity,distributor_name:c.name,distributor_id:c.providerId,discount:0<u?Math.trunc(u):0},r.unit=l.unit,r.favorite=!1;var p,m=$("<div></div>",{class:"product-box","data-pk":r.id,"data-distributor-id":r.cart.cart?r.cart.distributor_id:c.providerId,"data-product-brand":r.brand,"data-product-category":r.category}),f=$("<a></a>",{href:"".concat(i,"/ "),title:"Ver detalhes do produto",onclick:"setAlgoliaQueryPositionOnCookie(".concat(o,", ").concat(n,")")}),h=$("<div></div>",{class:"position-relative w-100"}),g=$("<div></div>",{class:"badge badge-success product-box__economy-tag","data-pk":r.id,html:"Economia de "+r.price.discount+"%"}),v=$("<div></div>",{class:"product-box__my-list js-btn-add-to-favorite"+(r.favorite?" is-active":""),title:r.favorite?"Produto adicionado à minha lista":"Adicionar produto à minha lista","data-pk":r.id}),b=$("<div></div>",{class:"product-box__img",html:"<img class='lazy' src='"+STATIC_IMAGE+"icons/loading-gray.svg' alt='"+r.name+"' data-src='"+s+"'/>"}),y=$("<h2></h2>",{class:"product-box__name",html:82<r.name.length?r.name.slice(0,82)+"...":r.name}),_=($("<div></div>",{class:"product-box__offers",html:1<r.multipliers.length?r.multipliers.length+" ofertas a partir de:":"A partir de:"}),r.multipliers.filter(function(e){return e.distributor_id==r.cart.distributor_id&&e.multiplier==r.cart.multiplier})[0]),C=$("<div></div>",{class:"product-box__price",html:"<span class='js-product-box__price'>R$ <span class='product-box__price--number'>"+(r.cart.cart?_?_.unit_price.toFixed(2).toString().replace(".",","):"--":r.price.price.toFixed(2).toString().replace(".",","))+"</span> <span class='product-box__price--unit'>/"+r.unit.toLowerCase()+"</span></span> <span  class='product-box__price--multiple'>Min: <span class='product-box__price--multiple__number'>"+(r.cart.cart?r.cart.multiplier.replace(".00",""):r.price.multiplier.toString().replace(".00",""))+"</span> "+r.unit.toLowerCase()+"</span>"}),k=$("<div></div>",{class:"product-box__supplier overflow-hidden text-nowrap",html:"Vendido por: <span class='js-product-box__supplier text-primary d-inline' title='"+(r.cart.cart?r.cart.distributor_name:r.price.distributor_name)+"'>"+(r.cart.cart?r.cart.distributor_name:r.price.distributor_name)+"</span>"}),x=$("<div></div>",{class:"product-box__buttom position-relative"});p="home"===e&&"atacadao"===MARKETPLACE_NAME&&"true"===MARKETPLACE_RELEASE?$("<a></a>",{class:"btn btn-primary btn-block text-white",href:"produtos".concat(i,"/ "),title:"Aproveitar Oferta",html:"Aproveitar Oferta"}):$("<button></button>",{class:"product-box__buttom__add btn btn-primary btn-block js-btn-add-product"+(r.cart.cart?"":" js-add-product")+(r.cart.cart&&is_mobile?" d-none":"")+(r.cart.cart?" cursor-unset":""),"data-pk":r.id,"data-multiple":l.minimum_quantity,html:r.cart.cart?"Adicionado":"Adicionar"+(is_mobile?"":" ao carrinho")});var j='<div class="product-box__buttom__quantity update-quantity align-items-center justify-content-between '+(r.cart.cart?"d-flex":"")+'" data-order-produt="'+r.pk+'"><span  class="js-btn-minus-product product-box__buttom__quantity-icon" data-pk="'+r.id+'" data-multiple="'+r.cart.multiplier+'"><img src="'+STATIC_IMAGE+'icons/minus.svg"></span> <span data-count="'+r.cart.count+'" class="js-count-product">'+(r.cart.cart?r.cart.count.replace(".00",""):"")+'</span> <span class="js-btn-plus-product product-box__buttom__quantity-icon" data-pk="'+r.id+'" data-multiple="'+r.cart.multiplier+'"><img src="'+STATIC_IMAGE+'icons/plus.svg"></span></div>',w=$("<div></div>",{class:"mt-3 text-center",html:"<span title='Ver todas as ofertas' data-num-offers='"+r.multipliers.length+"' data-pk='"+r.id+"' class='js-product-box__offer-link product-box__offer-link text-primary'>Compare "+(2<r.multipliers.length?"outras "+(r.multipliers.length-1)+" ofertas":"mais 1 oferta")+"</span>"});x.append(p),"home"==e&&"atacadao"==MARKETPLACE_NAME&&"false"!==MARKETPLACE_RELEASE||x.append(j),"atacadao"==MARKETPLACE_NAME&&"CPF"!=REGION.type&&"home"==PAGE&&"false"!==MARKETPLACE_RELEASE||0<r.price.discount&&null==catalogueFilter.distributor&&h.append(g),"home"==e&&"atacadao"==MARKETPLACE_NAME||h.append(v),f.append(b),f.append(y),f.append(k),f.append(C),m.append(h),m.append(f),m.append(x),"atacadao"==MARKETPLACE_NAME&&"CPF"!=REGION.type&&"home"==PAGE&&"false"!==MARKETPLACE_RELEASE||1<r.multipliers.length&&null==catalogueFilter.distributor&&"home"!=e&&m.append(w),"myList"===e?productsResultsMyList.append(m):"undefined"!=typeof PAGE&&"product"==PAGE?PRODUCT_SKU_PK!=r.pk&&(null==t?productsResults.append(m):t.append(m)):(null==catalogueFilter.distributor||!r.cart.cart||catalogueFilter.distributor==r.cart.distributor_id&"cart"!=PAGE)&&(null==t?productsResults.append(m):t.append(m)),hideLoading()}function buildMultiplesList(e,t,a,o,r,n){var i=$("<div></div>",{class:"product-box__buttom__multipliers",html:""});i.append('<div class="bg-light py-2 text-center">Escolha uma das opções:</div>');for(var s=0;s<e.length;s++)i.append($("<a></a>",{class:"p-2 d-flex w-100 justify-content-between js-multipliers-item "+(o&&e[s].multiple==r?"dropdown-item--add":"js-add-product")+(n&&"2"==listType?" js-btn-add-product-ml":""),"data-multiple":e[s].multiple,"data-pk":t,href:"#",html:'<span class="dropdown-item--price font-weight-bold">R$ '+e[s].price.replace(".",",")+"/"+a+'</span><span class="dropdown-item--multiple">'+(is_mobile?"Mín.":"Mínimo")+" de: "+e[s].multiple.replace(".00","")+"</span>"}));return i}function buildMultiple(e){for(var t=[],a=0;a<e.length;a++)if(0<t.length){for(var o=!1,r=0;r<t.length;r++)t[r].multiple==e[a][1]&&(o=!0);o||(n={price:e[a][0],multiple:e[a][1]},t.push(n))}else{var n={price:e[a][0],multiple:e[a][1]};t.push(n)}return t}function asyncGeneratorStep(e,t,a,o,r,n,i){try{var s=e[n](i),c=s.value}catch(e){return void a(e)}s.done?t(c):Promise.resolve(c).then(o,r)}function _asyncToGenerator(s){return function(){var e=this,i=arguments;return new Promise(function(t,a){var o=s.apply(e,i);function r(e){asyncGeneratorStep(o,t,a,r,n,"next",e)}function n(e){asyncGeneratorStep(o,t,a,r,n,"throw",e)}r(void 0)})}}$(document).ready(function(){$("select.select2").select2({allowClear:!0,placeholder:function(){$(this).data("placeholder")}})}),$(".js-star-rating").click(function(){$(this).addClass("star-rating--active"),$(this).closest("div").find("label img").attr("src",STATIC_IMAGE+"icons/star-orange.svg"),$(this).nextUntil().find("img").attr("src",STATIC_IMAGE+"icons/star-line-orange.svg")}),"undefined"==typeof STATIC_IMAGE||""!==(static_img_url=STATIC_IMAGE.substring(0,STATIC_IMAGE.indexOf("?")))&&(STATIC_IMAGE=static_img_url),$(".js-btn-wa").click(function(e){"atacadao"==MARKETPLACE_NAME&&(e.preventDefault(),$(".js-wa-popup").toggleClass("active"))}),$(".js-wa-popup a").click(function(){$(".js-wa-popup").removeClass("active")}),$(".modal-more-products-body").on("click",".js-add-product",function(e){e.preventDefault();var t=$(this);addToCart(t),t.hasClass("js-multipliers-item")&&0<t.closest(".product-box__buttom__multipliers").find(".dropdown-item--add").length&&(addClick=!0)});var searchField=$(".js-search-query"),catalogueRequest=null,productsResults=$(".product-results, .modal-more-products-body, .product-results-my-list"),productsResultsMyList=$(".product-results-my-list"),pageProductsResults=$(".product-results, .modal-more-products-body, .box-product-information"),filtersElem=$(".filters"),loading=$(".js-loading"),linkAdded='<a class="link-adicionar-catalogo"><div class="btn-adicionado-produtos">ADICIONADO</div></a>',cartItem=$(".container-geral-produtos"),itemCartTpl=$(".blank-item-cart div"),textAnyBrand="Qualquer marca",cataloguePathname="/catalogue/",catalogueFilter=new Filter,catalogue=$(".catalogue"),multipliersList=[],is_mobile=window.innerWidth<640,selectSupplierInCatalogue=$("#select-supplier-in-catalogue"),isCategoryPage=!1,BACKSPACE_KEY_CODE=8;function getCategoryFilter(){var e=window.location.pathname.split("/");return"catalogue"===(e=e.filter(function(e){return null!=e&&""!=e}))[e.length-1]||"catalogo"===e[e.length-1]||window.location.pathname.includes("/fornecedores")||window.location.pathname.includes("/especiais")?"":e[e.length-1]}function getCampaignFilter(){var e=window.location.pathname.split("/");return"catalogue"!==(e=e.filter(function(e){return null!=e&&""!=e}))[e.length-1]&&"catalogo"!==e[e.length-1]&&!window.location.pathname.includes("/fornecedores")&&window.location.pathname.includes("/especiais")?e[e.length-1]:""}function getCatalogueFilters(){var e=$.getUrlParams(window.location.href),t=e.q?e.q:null,a=e.category?e.category:null,o=e.product?e.product:null,r=e.brand?e.brand:null,n=e.p?e.p:null,i=null;window.location.pathname.includes("/fornecedores")&&(window.location.pathname.split("/").filter(function(e){return null!=e&&""!=e}),i=SUPPLIER_ID);if(window.location.pathname.includes("/especiais")&&window.location.pathname.split("/").filter(function(e){return null!=e&&""!=e})[1],catalogueFilter.cleanSelectedFilters(),null!==t?catalogueFilter.addSearchQuery(decodeURIComponent(t)):catalogueFilter.cleanSearchQuery(),searchField.val(catalogueFilter.searchQuery.replace("+"," ")),$(".catalogue-search-title").text(0<catalogueFilter.searchQuery.length?catalogueFilter.searchQuery:"Catálogo"),null!==a)if(Array.isArray(a))for(var s=0;s<a.length;s++)catalogueFilter.click(decodeURIComponent(a[s]),"categoria");else catalogueFilter.click(decodeURIComponent(a),"categoria");if(null!==o)if(Array.isArray(o))for(s=0;s<o.length;s++)catalogueFilter.click(decodeURIComponent(o[s]),"produto");else catalogueFilter.click(decodeURIComponent(o),"produto");if(null!==r)if(Array.isArray(r))for(s=0;s<r.length;s++)catalogueFilter.click(decodeURIComponent(r[s]),"marca");else catalogueFilter.click(r,"marca");null===a&&null===o&&null===r&&catalogueFilter.cleanSelectedFilters(),null!==n?catalogueFilter.changePage(n):catalogueFilter.cleanPageNumber(),null!==i?(i=i.replace("&#39;","'"),catalogueFilter.addDistributor(i),selectSupplierInCatalogue.val(i).change(),buildSupplierStore()):(catalogueFilter.cleanDistributor(i),selectSupplierInCatalogue.val("Todos os Fornecedores").select2(),hideSupplierStore());var c=catalogueFilter.getQuery();requestFillCatalogue(c,!0)}function initCatalogue(){var e=getCategoryFilter(),t=getCampaignFilter();""!==e?searchCategory(global_category_id,e):""!==t?searchCampaign(t):(IS_GEO,getCatalogueFilters())}function requestCatalogueHome(e){return _requestCatalogueHome.apply(this,arguments)}function _requestCatalogueHome(){return(_requestCatalogueHome=_asyncToGenerator(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(cleanSearchField(),catalogueFilter.cleanSearch(),t)return t=t.split("+").join(" "),$(".js-search-in").text(t),searchField.val(t),catalogueFilter.addSearchQuery(t),""!==SUPPLIER_ID&&catalogueFilter.addDistributor(SUPPLIER_ID),null!==$.getUrlParams(window.location.href).p&&void 0!==$.getUrlParams(window.location.href).p&&catalogueFilter.changePage($.getUrlParams(window.location.href).p),e.next=11,catalogueFilter.getQuery();e.next=15;break;case 11:t=e.sent,requestFillCatalogue(t,!0),e.next=16;break;case 15:"cart"!=PAGE&&requestFillCatalogue("",!0);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function requestSearchCatalogue(){return _requestSearchCatalogue.apply(this,arguments)}function _requestSearchCatalogue(){return(_requestSearchCatalogue=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a,o=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=0<o.length&&void 0!==o[0]?o[0]:"","Todos os Fornecedores"==$(".js-select-search-in").val()||""==$(".js-select-search-in").val()?requestFillCatalogue(t):(a="",t.split("&").forEach(function(e){e.includes("distributor")||(a+="".concat(e,"&"))}),requestFillCatalogue(a)),setTimeout(function(){$(".catalogue-banner").hide()},300);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}$("form.search").on("submit",function(e){e.preventDefault()});var catalogueQuoteBtn,catalogueProductsBtn,catalogueSortBySelect,catalogueModal,catalogueProductsEmpty,catalogueProductTpl,requestFillCatalogue=$.debounce(800,function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:t=e.sent,isSearch&&loadingProductsResults(),t.split("&").filter(function(e){return e.includes("queryString")||e.includes("filters")}).length&&(t="".concat(t)),catalogueRequest=getAutocompleteRequest(t);case 6:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}());function fixMultipliers(e){return(e=e.split(",")).forEach(function(e,t,a){a[t]=a[t].replace(".00","")}),e=[e.slice(0,-1).join(", "),e.slice(-1)[0]].join(e.length<2?"":" ou ")}catalogue.length&&(catalogueQuoteBtn=catalogue.find(".product .button"),catalogueProductsBtn=$(".btn-products-to-quote"),catalogueSortBySelect=catalogue.find("[name=sort]"),catalogueModal=$("#modal-products-to-quote"),catalogueProductsEmpty=catalogueModal.find(".actions .empty"),catalogueProductTpl=catalogueModal.find(".product-template").eq(0),catalogueSortBySelect.on("change",function(){$(this).parents("form").get(0).submit()}),catalogueQuoteBtn.on("click",function(e){e.preventDefault();var t=$(this).parents(".product");$.post(CATALOGUE_PRODUCTS_URL,{pk:t.attr("data-pk")},function(){modals.showModal("modal-products-to-quote")})}),catalogueModal.on("show",function(e){$.get(CATALOGUE_PRODUCTS_URL,{},function(e){for(var t=e.results,a=$(document.createDocumentFragment()),o=0;o<t.length;o++){var r=catalogueProductTpl.clone();r.removeClass("product-template"),r.find("h5").text(t[o].name),t[o].photo?r.find(".picture").css("background-image","url("+t[o].photo+")"):r.find(".picture").addClass("empty-picture"),r.appendTo(a)}catalogueModal.find("li.product").remove(),catalogueModal.find("li.actions").before(a),catalogueProductsBtn.find("span").text(t.length+" produtos selecionados")})}).trigger("show"),catalogueProductsEmpty.on("click",function(e){e.preventDefault(),catalogueModal.trigger("hide"),$.ajax({url:CATALOGUE_PRODUCTS_URL,type:"DELETE",success:function(){catalogueModal.trigger("show")}})}),$("#modal-products-to-quote form").submit(function(t){$.ajax({url:USER_IS_AUTHENTICATED_URL,type:"GET",async:!1,success:function(e){0==e.authenticated&&(t.preventDefault(),modals.hideModal("modal-products-to-quote"),$("html, body").animate({scrollTop:0},500),$(".dropdown-toggle-login").trigger("click"))}})})),$(".box-product-information, .product-results").on("click",".js-add-product",function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var a,o,r,n,i,s,c,l,d,u=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if($(this).hasClass("js-btn-add-product-ml")){e.next=26;break}if(t.preventDefault(),o=a="",document.cookie.split(";").forEach(function(e){e.includes("cb_user_postal_code")&&(a=e.split("=")[1].replace("-","")),e.includes("cb_user_city_slug")&&(o=e.split("=")[1])}),"True"!==isLogged||"False"!==isLazy){e.next=13;break}if(!1===verificouCEP)return e.next=9,fetch("".concat(API_GATEWAY_BASE_URL,"/logistic/address/").concat(a)).then(function(e){return e.json()}).then(function(e){var t;return e.detail&&"Address Not Found!"==e.detail||(null===(t=e.city)||void 0===t?void 0:t.slug)!=o?($("#modal-city").val($(u).attr("data-pk")),void $("#modal-city").modal("show")):void(verificouCEP=!0)}).catch(function(e){console.error(e)});e.next=9;break;case 9:if(!1===verificouCEP)return e.abrupt("return");e.next=11;break;case 11:e.next=17;break;case 13:if(""===a)return $("#modal-city").val($(this).attr("data-pk")),$("#modal-city").modal("show"),e.abrupt("return");e.next=17;break;case 17:r=$(this),n=r.attr("data-pk"),i=r.attr("data-multiple"),s=r.closest(".product-box").attr("data-distributor-id"),c=ADD_CART_ITEM_URL_SUPPLIER,l={sku_pk:n,multiplier:i,distributor_pk:s},(d=r.closest(".product-box__buttom").find(".product-box__buttom__add")).removeClass("js-add-product"),d.addClass("cursor-unset"),d.html((r.hasClass("js-multipliers-item")?"Adicio...":"Adicionando...")+" <img src='"+STATIC_IMAGE+"icons/loading-white.svg' />"),$.ajax({url:c,data:l,type:"POST",success:function(e){updateCartTotalCont(e.order_products_count),r.closest(".product-box__buttom").find(".js-multipliers-item").removeClass("dropdown-item--add"),r.closest(".product-box__buttom").find(".js-multipliers-item").addClass("js-add-product"),d.removeClass("js-btn-add-product").removeClass("js-btn-select-multiple").html("Adicionado"),r.hasClass("js-multipliers-item")&&r.addClass("dropdown-item--add"),r.removeClass("js-add-product"),r.closest(".product-box__buttom").find(".js-btn-minus-product").attr("data-multiple",e.order_product.product.multiplier),r.closest(".product-box__buttom").find(".js-btn-plus-product").attr("data-multiple",e.order_product.product.multiplier),r.closest(".product-box__buttom").find(".js-count-product").attr("data-count",e.order_product.count).text(e.order_product.count.replace(".00","")),is_mobile&&r.closest(".product-box__buttom").find(".product-box__buttom__add").addClass("d-none"),r.closest(".product-box__buttom").find(".product-box__buttom__quantity").addClass("d-flex"),animateCart();var t={currencyCode:"BRL",add:{products:[]}},a={name:r.closest(".product-box").find(".product-box__name").text().replace(" - "+r.closest(".product-box").attr("data-product-brand"),""),id:r.closest(".product-box").attr("data-pk"),price:stringToCurrency(r.closest(".product-box").find(".product-box__price--number").text()),brand:r.closest(".product-box").attr("data-product-brand"),category:r.closest(".product-box").attr("data-product-category"),variant:"Múltiplo de "+r.closest(".product-box").find(".product-box__price--multiple__number").text(),position:r.closest(".product-box").index()+1,quantity:e.order_product.count};"product"==PAGE&&""==a.name&&(a.name=$(".js-sku-name").attr("data-sku-name"),a.category=$(".js-sku-category").text().trim(),a.brand=$(".js-sku-name").attr("data-sku-brand")),t.add.products.push(a),ecommerceGMT("addToCart",t)}});case 26:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}());var productDistributorsBrandsRequest=null;function update_multipliers(e,t){var a=$(e).find(".product-count"),o=$(a).parent(),r=a.val();a.attr("step",t.multipliers),a.attr("max",t.max_stock),a.change();var n=e.find(".popup"),i="Este produto é fornecido em múltiplos de "+fixMultipliers(t.multipliers.join(","))+".";r!=a.val()&&showPopUp(n,o,i)}function updateCartTotalCont(e){$(".js-total-products").text(e)}function getAutocompleteRequest(){return _getAutocompleteRequest.apply(this,arguments)}function _getAutocompleteRequest(){return(_getAutocompleteRequest=_asyncToGenerator(regeneratorRuntime.mark(function e(){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,catalogueFilter.getQuery();case 2:return r=e.sent,e.abrupt("return",$.ajax({url:CATALOGUE_PRODUCTS_SEARCH_URL,type:"GET",data:r,beforeSend:function(e){e.setRequestHeader("User-Token-Algolia","".concat(USER_TOKEN_ALGOLIA))},success:function(e){var t=e.queryId;document.cookie="queryId="+t+";path=/";var a=(a=r.split("&").filter(function(e){return e.includes("page")})).length?a[0].split("=")[1]:0,o=[];for(i=0;i<e.pageCount;i++)o.push(i);e.paginator={page_range:o,page_number:a,last:"",first:"",previous:0===a?"":a-1,next:a==e.pageCount-1?"":parseInt(a)+1},fillCatalogue(e),"undefined"!=typeof isBackPage&&isBackPage&&$("html, body").animate({scrollTop:0},500)},error:function(){errorLoading()}}));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function errorLoading(){hideLoading(),errorMessage="<h5>Desculpe, um problema inesperado aconteceu </h5> <p> Por favor, refaça sua busca. </p> ",productsResults.html(errorMessage)}function loadingProductsResults(){productsResults.html(""),cleanPagination(),loading.show(),$(".loading-filters").fadeIn(),$(".tag-filters").addClass("d-none"),"myList"===PAGE?$(document).scrollTop($("#add-more-products-my-list").offset().top):$("html, body").animate({scrollTop:0},"fast")}function hideLoading(){loading.hide(),$(".js-simplex-text").addClass("d-none")}"function"==typeof $().stepper&&$(".orderlists input[name$=count]").stepper({limit:[0],incrementButton:'<img src="https://www.cotabest.com.br/static/img/old_layout/spin-btn-plus.png" >',decrementButton:'<img src="https://www.cotabest.com.br/static/img/old_layout/spin-btn-minus.png" >',allowWheel:!1,onStep:function(e,t){var a=$(this).attr("step").split(","),o=$(this).attr("min"),r=determineStep(a,e)||Math.min.apply(Math,a)||1;0!=o&&fixImputCount($(this),e,t,r),$(".orderlists input[name$=-count]").trigger("change")}}),$(".orderlists input[name$=count]").on("mouseleave",function(){var e=$(this).val(),t=$(this).attr("step").split(","),a=$(this).attr("min"),o=determineStep(t,e)||Math.min.apply(Math,t)||1;0!=a&&fixImputCount($(this),e,!0,o)}),$(".orderlists input[name$=-count]").on("change mouseleave",function(){var e=$(this).closest("tr"),t=parseFloat(e.find(".unit-price").html().replace(",",".")).toFixed(2),a=parseFloat($(this).val().replace(",",".")).toFixed(2);e.find(".product-total").html(parseFloat(t*a).toFixed(2));var o=0;$(".product-total").each(function(){o+=parseFloat($(this).text().replace(",","."))}),$(".products-total").html(o.toFixed(2))}),$(".container-geral-produtos").find(".product-count").each(function(){var e,t,a=$(this).attr("step");determineStep(a.split(","),$(this).val())||(e=$(this).closest(".container-produtos-indivi").find(".popup"),t="Este produto é fornecido em múltiplos de "+fixMultipliers(a)+".",1!=a.split(",")[0]&&""!=a.split(",")[0]&&(fixImputCount($(this),$(this).val(),1,a.split(",")[0]),showPopUp(e,$(this).parent(),t),$(this).mouseleave()))});var reSearch=!1;function fillCatalogue(e){var t,a,o,r,n,i,s,c,l;if(e.facets&&0<Object.entries(e.facets).length?(a=[],o=[],r=[],n=[],i=[],s=[],c=[],e.facets["sku.name"]&&Object.entries(e.facets["sku.name"]).forEach(function(e){a.push(e[0])}),e.facets.category_n1&&Object.entries(e.facets.category_n1).forEach(function(e){o.push(e[0])}),e.facets["sku.brand"]&&Object.entries(e.facets["sku.brand"]).forEach(function(e){r.push(e[0])}),e.facets["sku.type"]&&Object.entries(e.facets["sku.type"]).forEach(function(e){n.push(e[0])}),e.facets["sku.packaging"]&&Object.entries(e.facets["sku.packaging"]).forEach(function(e){i.push(e[0])}),e.facets["sku.weight"]&&Object.entries(e.facets["sku.weight"]).forEach(function(e){s.push(e[0])}),e.facets.providerName&&(Object.entries(e.facets.providerName).forEach(function(e){c.push(e[0])}),t=Object.values(e.facets.providerName).reduce(function(e,t){return e+t},0)),e.filters={categories:o,products:a,brands:r,types:n,packagings:i,weight_qty:s,available_sellers:c}):e.filters=[],e.results.length){null==catalogueFilter.campaign&&$(".js-campaign-banner").addClass("d-none"),reSearch||hideMsgSupplierErros(),reSearch=!1,$(".n-products").text(t);try{buildCatalogueResultsHeader(),buildResults(e.results,PAGE,e.paginator.page_number),buildFilters(e.filters),buildPagination(e.paginator),hideLoading(),$("img.lazy").Lazy({effect:"fadeIn",visibleOnly:!0,threshold:200,onError:function(e){e.attr("src",STATIC_IMAGE+"icons/no-photo.svg")}})}catch(e){console.error(e),errorLoading()}isCategoryPage&&(simplexCategoryContente(e),isCategoryPage=!1)}else{reSearch?reSearch=!1:(reSearch=!0,null!==catalogueFilter.distributor?(showMsgSupplierErros(catalogueFilter.distributor,searchField.val()),setCatalogueURL("/catalogue/"+getQueryURL()),hideSupplierStore(),catalogueFilter.cleanDistributor(),catalogueFilter.cleanCampaign(),catalogueFilter.addSearchQuery(searchField.val()),l=catalogueFilter.getQuery(),requestFillCatalogue(l,!0)):hideMsgSupplierErros()),notFoundProductResults()}$(".js-pagination-loading").addClass("d-none"),isSearch=!0}function showMsgSupplierErros(e,t){var a=selectSupplierInCatalogue.find('option[value="'+e+'"], #select-supplier-in-menu option[value="'+e+'"]').text(),o=selectSupplierInCatalogue.find('option[value="'+e+'"], #select-supplier-in-menu option[value="'+e+'"]').attr("data-slug");selectSupplierInCatalogue.val("Todos os Fornecedores").select2(),$(".js-supplier-store-search-error__name").text(a),$(".js-supplier-store-search-error__search").text(t),$(".js-supplier-store-search-error__link").attr("href",o),$(".js-supplier-store-search-error").removeClass("d-none"),$(".js-distributor-content").hide()}function hideMsgSupplierErros(){$(".js-supplier-store-search-error__name").text(""),$(".js-supplier-store-search-error__search").text(""),$(".js-supplier-store-search-error").addClass("d-none")}function buildResults(e,t){return _buildResults.apply(this,arguments)}function _buildResults(){return(_buildResults=_asyncToGenerator(regeneratorRuntime.mark(function e(t,a){var o,r,n,i,s,c,l=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=2<l.length&&void 0!==l[2]?l[2]:0,e.next=3,fetch("/api/app/cart/cart-item");case 3:return n=e.sent,e.next=6,n.json();case 6:for(i=e.sent,r=!n.ok||i.detail?{count:0,next:null,previous:null,results:[]}:i,s=0;s<t.length;s++)product=t[s],buildResult(product,a,null,r,s,o);$("img.lazy").Lazy({effect:"fadeIn",visibleOnly:!0,threshold:200,onError:function(e){e.attr("src",STATIC_IMAGE+"icons/no-photo.svg")}}),c="Catálogo sem busca",catalogueFilter.categoryName?c="Categoria: "+CATEGORY_NAME:catalogueFilter.distributor?c="cart"==a?"Loja exclusiva no carrinho: "+$(".modal-more-products-title").text():"Loja exclusiva: "+$(".js-supplier-store__name").text():catalogueFilter.hasSearchQuery()&&(c="Catálogo com busca"),productImpression(t,c),"catalogue"!==PAGE&&"catalogo"!==PAGE||(3<=$(".js-search-query").val().length?(null!==catalogueFilter.distributor&&selectSupplierInCatalogue.find('option[value="'+catalogueFilter.distributor+'"]').attr("data-slug"),setCatalogueURL(getQueryURL())):null===catalogueFilter.distributor?null===catalogueFilter.categoryName&&setCatalogueURL("/catalogue/"):setCatalogueURL(selectSupplierInCatalogue.find('option[value="'+catalogueFilter.distributor+'"]').attr("data-slug")),catalogueFilter.categoryName&&null!=catalogueFilter.categoryName&&""!=catalogueFilter.categoryName&&breadcrumbCategories());case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function buildCatalogueResultsHeader(){orderBy=buildOrderBy(),$(".products-ordes").html(orderBy),catalogueFilter.showProperties()&&(filteringBy=buildFilteringBy(),"atacadao"===MARKETPLACE_NAME?$(".catalogue-search-title").text("Comprar ".concat(catalogueFilter.getFilteringBy()," no atacado")):$(".catalogue-search-title").text("".concat(catalogueFilter.getFilteringBy()," no atacado das melhores distribuidoras")),IS_GEO&&$(".catalogue-search-title").text(""))}function buildOrderBy(){var e=[{name:"Mais vendidos",value:"-relevance"},{name:"Nome A-Z",value:"full_display.raw"},{name:"Nome Z-A",value:"-full_display.raw"}];catalogueFilter.distributor||e.push({name:"Relevância",value:"_score"});var a=$('<select class="order_by form-control form-control-outline-blue"> </select>');return e.forEach(function(e){var t='<option value="'+e.value+'" '+(catalogueFilter.orderBy==e.value?"selected":"")+">"+e.name+"</option>",e=$(t);a.append(t)}),a.on("change",function(e){e.preventDefault(),selectOrderBy(this.value)}),a}function buildFilteringBy(){return'<li class="breadcrumb-item"><a href=" '+cataloguePathname+'/" class="breadcrumb-item"> Catálogo </a></li>  <li class="breadcrumb-item active">'+catalogueFilter.getFilteringBy()+"</li> "}function notFoundProductResults(){hideLoading(),searchFiltersNotFoundMessage=catalogueFilter.getNotFoundMessage(),productsResults.html(searchFiltersNotFoundMessage),compressFilters(),expandProductResults(),$(".js-top-supplier-list-block").addClass("d-none")}function editSearchField(e){return _editSearchField.apply(this,arguments)}function _editSearchField(){return(_editSearchField=_asyncToGenerator(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(textSearch=catalogueFilter.getTextSearch(),hideCleanFiltersButton(),!(t==BACKSPACE_KEY_CODE&&textSearch.length<3)){e.next=12;break}if($(".catalogue-search-title, .js-search-in").text(""),null===catalogueFilter.distributor){e.next=8;break}catalogueFilter.cleanSearchQuery(),e.next=10;break;case 8:return requestFillCatalogue("",!0),e.abrupt("return");case 10:e.next=15;break;case 12:if(textSearch.length<3)return $(".catalogue-search-title, .js-search-in").text(""),e.abrupt("return");e.next=15;break;case 15:return e.next=17,catalogueFilter.getQuery();case 17:query=e.sent,requestSearchCatalogue(query);case 19:case"end":return e.stop()}},e)}))).apply(this,arguments)}function submitSearch(){var e;inputValue=encodeURIComponent(searchField.val()),"undefined"==typeof IS_CATALOGUE||!IS_CATALOGUE||null===catalogueFilter.distributor?window.location.href=cataloguePathname+"?queryString="+inputValue:(e=selectSupplierInCatalogue.find('option[value="'+catalogueFilter.distributor+'"]').attr("data-slug"),window.location.href=e+"?queryString="+inputValue)}function showCleanFilters(){hasSelectedFilters=catalogueFilter.hasSelectedFilters(),hasSelectedFilters&&0<$(".tag-filter").length&&($("#clean-filters").removeClass("d-none"),$("#clean-filters").addClass("clean"))}function buildPagination(e){var t,a,o;pageNumber=e.page_number,pageRange=e.page_range,first=e.first,previous=e.previous,next=e.next,last=e.last,1!=pageRange.length&&(t=$(".pagination"),a=$('<nav class="pagination-inner">'),first&&(firstElem=$('<a href="#" class="item prev" title="Primeira página"> <span>&#171;</span> </a>'),a.append(firstElem),firstElem.on("click",function(e){e.preventDefault(),clickPaginator(first)})),previous&&(previousElem=$('<a href="#" class="item prev" title="Página Anterior"> <span>&#8249;</span> </a>'),a.append(previousElem),previousElem.on("click",function(e){e.preventDefault(),clickPaginator(previous)})),pageRange.forEach(function(t){o=t==pageNumber?$('<span class="item active"> '+t+"</span>"):$('<a class="item" href="#"> '+t+"</a>"),a.append(o),o.on("click",function(e){e.preventDefault(),clickPaginator(t)})}),next&&(nextElem=$('<a href="#" class="item next" title="Próxima página"> <span>&#8250;</span> </a>'),a.append(nextElem),nextElem.on("click",function(e){e.preventDefault(),clickPaginator(next)})),last&&(nextElem=$('<a href="#" class="item next" title="Última página"> <span>&#187;</span> </a>'),a.append(nextElem),nextElem.on("click",function(e){e.preventDefault(),clickPaginator(last)})),t.append(a))}function cleanPagination(){$(".container-catalogo .pagination").html("")}function clickPaginator(e){return _clickPaginator.apply(this,arguments)}function _clickPaginator(){return(_clickPaginator=_asyncToGenerator(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return catalogueFilter.changePage(t),e.next=3,catalogueFilter.getQuery();case 3:query=e.sent,requestSearchCatalogue(query);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function cleanFilters(){loadingProductsResults(),catalogueFilter.cleanSelectedFilters(),filterRequest()}function filterRequest(){return _filterRequest.apply(this,arguments)}function _filterRequest(){return(_filterRequest=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,catalogueFilter.getQuery();case 2:query=e.sent,requestSearchCatalogue(query);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function removeAllCartItems(e){$.ajax({url:REMOVE_ALL_CART_ITEMS,type:"GET",success:function(e){e.deleted&&(requestCatalogueHome(),updateCartTotalCont(0),hideAlertCollective(),verifyCartSize(),$(".container-geral-produtos .container-produtos-indivi").remove(),$(".empty-cart").removeClass("hide"))}})}function searchCategory(e,t){return _searchCategory.apply(this,arguments)}function _searchCategory(){return(_searchCategory=_asyncToGenerator(regeneratorRuntime.mark(function e(t,a){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return isCategoryPage=!0,loadingProductsResults(),cleanSearchField(),catalogueFilter.clickCategory(t,a),e.next=6,catalogueFilter.getQuery();case 6:query=e.sent,requestSearchCatalogue(query);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function searchSupplier(e){return _searchSupplier.apply(this,arguments)}function _searchSupplier(){return(_searchSupplier=_asyncToGenerator(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return loadingProductsResults(),cleanSearchField(),catalogueFilter.clickSupplier(t),null!==$.getUrlParams(window.location.href).p&&void 0!==$.getUrlParams(window.location.href).p&&catalogueFilter.changePage($.getUrlParams(window.location.href).p),e.next=6,catalogueFilter.getQuery();case 6:query=e.sent,requestSearchCatalogue(query);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function searchCampaign(e){return _searchCampaign.apply(this,arguments)}function _searchCampaign(){return(_searchCampaign=_asyncToGenerator(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return loadingProductsResults(),cleanSearchField(),catalogueFilter.clickCampaign(t),e.next=5,catalogueFilter.getQuery();case 5:query=e.sent,requestSearchCatalogue(query),$(".js-campaign-banner").removeClass("d-none");case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function selectOrderBy(e){return _selectOrderBy.apply(this,arguments)}function _selectOrderBy(){return(_selectOrderBy=_asyncToGenerator(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return loadingProductsResults(),catalogueFilter.selectOrderBy(t),e.next=4,catalogueFilter.getQuery();case 4:query=e.sent,requestSearchCatalogue(query);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function cleanSearchField(){searchField.val("")}function isAuthenticated(){var a=!0;return $.ajax({url:USER_IS_AUTHENTICATED_URL,type:"GET",async:!1,success:function(e){a=e.authenticated;var t=e.address_city;a=!(!a&&""==t)||($("#selectCity").modal("show"),!1)}}),a}function asyncGeneratorStep(e,t,a,o,r,n,i){try{var s=e[n](i),c=s.value}catch(e){return void a(e)}s.done?t(c):Promise.resolve(c).then(o,r)}function _asyncToGenerator(s){return function(){var e=this,i=arguments;return new Promise(function(t,a){var o=s.apply(e,i);function r(e){asyncGeneratorStep(o,t,a,r,n,"next",e)}function n(e){asyncGeneratorStep(o,t,a,r,n,"throw",e)}r(void 0)})}}function Filter(){this.searchQuery="",this.category="",this.categoryName="",this.propertyList=new PropertyList,this.selectedFilters={},this.pageNumber=0,this.distributor=null,this.lastFilterClicked=null,this.orderBy="-relevance",this.campaign=null}function PropertyList(){this.properties={"category[]":[],name:[],brand:[],type:[],packaging:[],weight_qty:[],distributor:[]}}$(".catalogue-search .js-search-query").keypress(function(e){13==e.keyCode&&submitSearch()}),$(".catalogue-search .btn").click(function(){submitSearch()}),$(".icon-search").click(function(){submitSearch()}),"undefined"!=typeof CATALOGUE_PRODUCTS_SEARCH_URL&&searchField.on("keyup",function(e){if("products"===$(".js-select-search-type").val()){if(invalidKeyCodes=[9,16,17,20,27,33,34,37,38,39,40],invalidKeyCodes.includes(e.keyCode))return;inputValue=$(this).val().trim(),$(".js-search-in").text(inputValue),catalogueFilter.addSearchQuery(inputValue),"myList"!==PAGE||$(this).hasClass("form-control--search")?$("html, body").animate({scrollTop:0},"fast"):($(document).scrollTop($("#add-more-products-my-list").offset().top),editSearchField(e.keyCode)),"myList"!==PAGE&&editSearchField(e.keyCode)}}),$(".tag-filters .link-clean").on("click",function(e){e.preventDefault(),hideCleanFiltersButton(),cleanFilters()}),$(".tag-filters").on("click",".tag-filter img",function(){var e=$(this).parent(".tag-filter").attr("data-id");$("#"+e).attr("checked",!1).change()}),$(".btn-filters-toggle").on("click",function(){$(".catalogue-filters").toggleClass("is--open")}),$(".btn-filters-close").on("click",function(){$(".catalogue-filters").toggleClass("is--open")}),pageProductsResults.on("click",".js-btn-select-multiple",function(){$(this).closest(".product-box__buttom").find(".product-box__buttom__multipliers .js-add-product").first().click()}),$(".js-category-content-btn").click(function(e){e.preventDefault(),"true"===$(this).attr("data-show")?($(this).text("Ver mais"),$(this).closest(".category-content").find(".category-content__conatiner").removeClass("show"),$(this).attr("data-show","false")):($(this).text("Ver menos"),$(this).closest(".category-content").find(".category-content__conatiner").addClass("show"),$(this).attr("data-show","true"))}),$(".box-product-information, .product-results").on("click",".product-box-link",function(e){425<window.innerWidth?$(this).closest(".product-box").addClass("product-box-shadow"):$(this).closest(".col-five").addClass("product-box-shadow")}),Filter.prototype.addSearchQuery=function(e){this.cleanSearch(),this.searchQuery=e},Filter.prototype.getProperties=function(){return this.propertyList.getProperties("pt")},Filter.prototype.cleanPageNumber=function(){this.pageNumber=0},Filter.prototype.loadProps=function(e){this.propertyList.load(e)},Filter.prototype.isFilterSelected=function(e,t){return this.selectedFilters.hasOwnProperty(e)&&this.selectedFilters[e].includes(t.toLowerCase())},Filter.prototype.getFilteringBy=function(){var e="";return this.hasCategory()?e=CATEGORY_NAME:this.hasCampaign()?e=CAMPAIGN_NAME:this.hasSearchQuery()&&(e='"'+this.searchQuery+'"'),e},Filter.prototype.click=function(e,t){var a={type:t,name:e.toLowerCase()};"categoria"===t&&$("#categoria").find("input[type='checkbox']:checked").length<1&&""!==getCategoryFilter()&&(delete this.selectedFilters.category,this.category=""),this.isFilterSelected(a.type,a.name)?(this.removeSelected(a.name,a.type),removeFilterURL(a)):(this.addSelected(a.name,a.type),addFilterURL(a)),this.propertyList.click(a.type),this.cleanPageNumber()},Filter.prototype.removeSelected=function(e,t){this.selectedFilters[t]=_.without(this.selectedFilters[t],e)},Filter.prototype.addSelected=function(e,t){var a;filterValues=this.selectedFilters[t],filterValues?(filterValues,a=e.toLowerCase(),this.selectedFilters[t].push(a)):this.selectedFilters[t]=[e.toLowerCase()]},Filter.prototype.hasSearchQuery=function(){return!(this.searchQuery.length<3)},Filter.prototype.hasSelectedFilters=function(){return!_.isEmpty(this.selectedFilters)},Filter.prototype.getSelectedFilters=function(){for(f in filters="",this.selectedFilters)key=this.propertyList.formatPropKey(f,"en"),val=this.selectedFilters[f],formattedValue=this.formatFilterValue(key,val),filters+=formattedValue;return filters},Filter.prototype.formatFilterValue=function(t,e){return val="",e.forEach(function(e){e=encodeURIComponent(e),val+="category"==t?t+"[]="+e+"&":t+"="+e+"&"}),val},Filter.prototype.changePage=function(e){this.pageNumber=e},Filter.prototype.selectOrderBy=function(e){this.orderBy=e},Filter.prototype.cleanOrderBy=function(){this.orderBy="-relevance"},Filter.prototype.getQuery=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a,o,r,n,i,s,c,l,d,u,p,m,f,h,g,v,b,y,_,C,k,x,j,w,A,S,T,E=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=function(e){var o="";return e.forEach(function(e,t,a){t===a.length-1?o+=e:o+=e+" OR "}),1<e.length&&(o="("+o+")"),o},a=function(e){var t=e.toLowerCase();return t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(new RegExp(/\s/g),"-")).replace(new RegExp(/[àáâãäå]/g),"a")).replace(new RegExp(/æ/g),"ae")).replace(new RegExp(/ç/g),"c")).replace(new RegExp(/[èéêë]/g),"e")).replace(new RegExp(/[ìíîï]/g),"i")).replace(new RegExp(/ñ/g),"n")).replace(new RegExp(/[òóôõö]/g),"o")).replace(new RegExp(/œ/g),"oe")).replace(new RegExp(/[ùúûü]/g),"u")).replace(new RegExp(/[ýÿ]/g),"y")},c=s=i=n=o="",l=[],document.cookie.split(";").forEach(function(e){e.includes("cb_user_postal_code")&&(o=e.split("=")[1].replace("-",""))}),document.cookie.split(";").forEach(function(e){e.includes("cb_user_type")&&(c=e.split("=")[1])}),document.cookie.split(";").forEach(function(e){e.includes("cb_user_city_name")&&(s=a(e.split("=")[1]))}),document.cookie.split(";").forEach(function(e){e.includes("cb_user_state")&&(s+="-"+e.split("=")[1].toLowerCase())}),""!==o){e.next=16;break}r="".concat(API_GATEWAY_BASE_URL,"/logistic/logistics/cities/").concat(s,"/").concat("CPF"===c?"PF":"PJ","/available-logistics"),e.next=23;break;case 16:return e.next=18,fetch("".concat(API_GATEWAY_BASE_URL,"/logistic/address/").concat(o));case 18:return d=e.sent,e.next=21,d.json();case 21:u=e.sent,r||(u.neighborhood?(r="".concat(API_GATEWAY_BASE_URL,"/logistic/logistics/neighborhoods/").concat(u.neighborhood.id,"/").concat("CPF"===c?"PF":"PJ","/available-logistics"),(m=new Date).setYear(m.getFullYear()+1),document.cookie="cb_user_neighborhood=".concat(null===(p=u.neighborhood)||void 0===p?void 0:p.id,"; expires=").concat(m,"; path=/")):r=u.city?"".concat(API_GATEWAY_BASE_URL,"/logistic/logistics/cities/").concat(u.city.slug,"/").concat("CPF"===c?"PF":"PJ","/available-logistics"):"".concat(API_GATEWAY_BASE_URL,"/logistic/logistics/cities/").concat(s,"/").concat("CPF"===c?"PF":"PJ","/available-logistics"));case 23:return e.next=25,fetch(r);case 25:return f=e.sent,e.next=28,f.json();case 28:return!(h=e.sent).detail&&h.length?l=h:l.push(-1),l.forEach(function(e,t,a){""!=e&&(n+=0===t?"commaSeparatedRegionIds=".concat(e):",".concat(e))}),"undefined"!=typeof marketing_campaign_skus&&marketing_campaign_skus&&(i="commaSeparatedSkuIds=".concat(marketing_campaign_skus)),g=this.getSelectedFilters().split(/&(?!#)/),v=[],y=!(b=[]),_=[],k=[],x=[],j=[],w=[],A=[],S=C="","Todos os Fornecedores"!=$(".js-select-search-in").val()&&""!=$(".js-select-search-in").val()&&(b.push('providerName:"'.concat($(".js-select-search-in").val(),'"')),y=!0),g.forEach(function(e){0==y&&(E.distributor?b.push('providerName:"'.concat(E.distributor.replace(/-/g," "),'"')):e.includes("distributor")&&b.push(e.replace("distributor=",'providerName:"')+'"')),E.category?C="category=".concat(E.category,"&"):E.categoryName?_.push('category_n1:"'.concat(E.categoryName.replace(/-/g," "),'"')):e.includes("category")&&_.push(e.replace("category[]=",'category_n1:"')+'"'),e.includes("name")&&k.push(e.replace("name=",'sku.name:"')+'"'),e.includes("brand")&&x.push(e.replace("brand=",'sku.brand:"')+'"'),e.includes("type")&&j.push(e.replace("type=",'sku.type:"')+'"'),e.includes("packaging")&&w.push(e.replace("packaging=",'sku.packaging:"')+'"'),e.includes("weight_qty")&&A.push(e.replace("weight_qty=",'sku.weight:"')+'"')}),v.push(t(b)),v.push(t(_)),v.push(t(k)),v.push(t(x)),v.push(t(j)),v.push(t(w)),v.push(t(A)),(v=v.filter(function(e){return""!=e.trim()})).forEach(function(e,t,a){""!=e&&(S+=0===t?e:" AND "+e)}),T=C,this.searchQuery||S?(S=S.replace("&#39;","'"),T+="displayFacets=true&queryString=".concat(this.searchQuery,"&").concat(n).concat(i?"&"+i:"","&").concat(S?"filters="+S+"&":"","page=").concat(this.pageNumber,"&order_by=").concat(this.orderBy)):T+="".concat(C||i?"displayFacets=true&":"").concat(n).concat(i?"&"+i:"","&page=").concat(this.pageNumber,"&order_by=").concat(this.orderBy),e.abrupt("return",T);case 58:case"end":return e.stop()}},e,this)})),Filter.prototype.cleanSearchQuery=function(){this.searchQuery=""},Filter.prototype.cleanSearch=function(){this.cleanCategory(),this.cleanCampaign(),this.cleanSearchQuery(),this.cleanSelectedFilters(),this.cleanDistributor(),this.cleanPageNumber(),this.propertyList.clean(),this.cleanOrderBy()},Filter.prototype.showProperties=function(){return!(!this.hasSearchQuery()&&!this.hasCategory())},Filter.prototype.hasCategory=function(){return""!=this.category},Filter.prototype.cleanCategory=function(){this.category="",this.categoryName=""},Filter.prototype.getTextSearch=function(){return this.searchQuery},Filter.prototype.clickCategory=function(e,t){this.cleanSearch(),this.category=e,this.categoryName=t.trim()},Filter.prototype.clickSupplier=function(e){this.cleanSearch(),this.distributor=e},Filter.prototype.clickCampaign=function(e){this.cleanSearch(),this.campaign=e.trim()},Filter.prototype.cleanSelectedFilters=function(){this.selectedFilters={},clearFilterURL()},Filter.prototype.getNotFoundMessage=function(){var e=USER_IS_AUTHENTICATED?'href="/profile/" class="link"':'href="#modal-city" class="link font-weight-bold" data-toggle="modal" data-target="#modal-city"',t='<div class="text-center py-4 m-auto"><h5 class="mb-4">Não encontramos produtos <span class="text-secondary">para sua cidade </span></h5><p>Verifique se "'+$(".js-user-region").text()+'" é a sua cidade e, se necessário <a '+e+'>troque sua cidade</a></p><p>Caso sua cidade esteja correta, então infelizmente ainda não temos fornecedores que entregam na sua região. :( <br><br> Indique a CotaBest para seus fornecedores também venderem seus produtos aqui! <br> Se preferir, <a class="link" href="https://forms.gle/a8bUSDNFLfvBHuiV8" target="_blank">indique um fornecedor</a> e nós faremos um convite especial! ;)</p></div>';return"undefined"!=typeof IS_MARKETPLACE&&IS_MARKETPLACE&&("atacadao"==MARKETPLACE_NAME?t='<div class="text-center py-4 m-auto"><h5 class="mb-4">Não encontramos produtos <span class="text-secondary">para sua cidade </span></h5><p>Verifique se "'+$(".js-user-region").text()+'" é a sua cidade e, se necessário <a '+e+'>troque sua cidade</a></p><p>Caso sua cidade esteja correta, então infelizmente ainda não atendemos a sua região. :( <br><br> Estamos expandindo rapidamente! <a class="link font-weight-bold" href="/signup/?type=1">Cadastre-se</a> gratuitamente para ser avisado assim que chegarmos a sua Cidade :)<br>Nos vemos em breve! :)</p></div>':"tsidistribuidora"==MARKETPLACE_NAME&&(t='<div class="text-center py-4 m-auto"><h5 class="mb-4">Não encontramos produtos <span class="text-secondary">para sua cidade </span></h5><p>Verifique se "'+$(".js-user-region").text()+'" é a sua cidade e, se necessário <a '+e+">troque sua cidade</a></p><p>Caso sua cidade esteja correta, então infelizmente ainda não atendemos sua região. :(</p></div>")),this.hasSearchQuery()?'<div class="text-center py-4 m-auto"><h5 class="mb-4">Busca por: <span class="text-secondary">"'+this.searchQuery+'"</span></h5><p> Não encontramos nenhum resultado para sua busca.<br> Por favor tente novamente usando outro termo ou descrição do produto desejado ou <a class="link" href="/catalogue/">volte ao catálogo</a>.</p></div>':this.hasCategory()?'<div class="text-center py-4 m-auto"><h5 class="mb-4">Busca na categoria: <span class="text-secondary">'+this.categoryName+' </span></h5><p> Não encontramos nenhum resultado para a categoria selecionada.<br> Por favor tente novamente usando outra categoria, termo/descrição do produto desejado ou <a class="link" href="/catalogue/">volte ao catálogo</a>.</p></div>':t},Filter.prototype.cleanDistributor=function(){this.distributor=null},Filter.prototype.hasDistributor=function(){return null!=this.distributor},Filter.prototype.addDistributor=function(e){this.cleanDistributor(),this.distributor=e},Filter.prototype.cleanCampaign=function(){this.campaign=null},Filter.prototype.hasCampaign=function(){return null!=this.campaign},Filter.prototype.addCampaign=function(e){this.cleanCampaign(),this.campaign=e};var translatePropsPT={name:"produto","category[]":"categoria",type:"tipo",packaging:"embalagem",weight_qty:"peso-quantidade",brand:"marca",distributor:"distribuidores"};PropertyList.prototype.getProperties=function(e){for(p in populatedProperties={},this.properties)isPopulated=this.isPropertyPopulated(p),isPopulated&&(key=this.formatPropKey(p,e),val=this.properties[p],formattedVal=this.formatPropValues(val),"distributor"===p&&window.location.href.includes("atacadao")&&formattedVal.forEach(function(e,t){-1!=e.indexOf("atacadão")&&(formattedVal.splice(t,1),formattedVal.unshift(e))}),populatedProperties[key]=formattedVal);return populatedProperties},PropertyList.prototype.load=function(e){for(var t in e.categories)this.addProperties({"category[]":e.categories[t]});for(var t in e.products)this.addProperties({name:e.products[t]});for(var t in e.brands)this.addProperties({brand:e.brands[t]});for(var t in e.types)this.addProperties({type:e.types[t]});for(var t in e.packagings)this.addProperties({packaging:e.packagings[t]});for(var t in e.weight_qty)this.addProperties({weight_qty:e.weight_qty[t]});for(var t in e.available_sellers)this.addProperties({distributor:e.available_sellers[t].toLowerCase()})},PropertyList.prototype.formatPropValues=function(e){return e.sort(function(e,t){return e.localeCompare(t)})},PropertyList.prototype.formatPropKey=function(e,t){return"pt"==t?translatePropsPT[e]:"en"==t?(translateEng=_.invert(translatePropsPT),translateEng[e]):e},PropertyList.prototype.click=function(e){except=this.formatPropKey(e,"en"),this.clean(except)},PropertyList.prototype.clean=function(a){this.properties=_.mapObject(this.properties,function(e,t){return a&&a==t?e:[]})},PropertyList.prototype.addProperties=function(e){for(var t in e)this.addProperty(t,e)},PropertyList.prototype.addProperty=function(e,t){key=e,value=t[e],add=this.shouldAddProperty(key,value),add&&this.properties[key].push(value)},PropertyList.prototype.shouldAddProperty=function(e,t){return!!this.properties.hasOwnProperty(e)&&(exists=_.contains(this.properties[e],t),validValue=t&&t.length,!exists&&validValue)},PropertyList.prototype.isPropertyPopulated=function(e){return!_.isEmpty(this.properties[e])};var categoryURL=[],productURL=[],brandURL=[],distributorURL=[];function addFilterURL(e){"categoria"===e.type?categoryURL.push(e.name):"produto"===e.type?productURL.push(e.name):"marca"===e.type?brandURL.push(e.name):"distribuidores"===e.type&&distributorURL.push(e.name)}function removeFilterURL(e){var t;"categoria"===e.type?(t=categoryURL.indexOf(e.name),categoryURL.splice(t,1)):"produto"===e.type?(t=productURL.indexOf(e.name),productURL.splice(t,1)):"marca"===e.type?(t=brandURL.indexOf(e.name),brandURL.splice(t,1)):"distribuidores"===e.type&&(t=distributorURL.indexOf(e.name),distributorURL.splice(t,1))}function clearFilterURL(){categoryURL=[],productURL=[],brandURL=[],distributorURL=[]}function getFiltersURL(){var e="";if(0<categoryURL.length)for(var t=0;t<categoryURL.length;t++)e=e+"&category="+categoryURL[t];if(0<productURL.length)for(t=0;t<productURL.length;t++)e=e+"&product="+productURL[t];if(0<brandURL.length)for(t=0;t<brandURL.length;t++)e=e+"&brand="+brandURL[t]+";";if(0<distributorURL.length)for(t=0;t<distributorURL.length;t++)e=e+"&distributor="+distributorURL[t]+";";return e.toLowerCase()}function buildSupplierStore(){var e=selectSupplierInCatalogue.find("option:selected").text(),t=selectSupplierInCatalogue.find("option:selected").attr("data-logo-url"),a=parseFloat(selectSupplierInCatalogue.find("option:selected").attr("data-minimum-order")),o=parseInt(selectSupplierInCatalogue.find("option:selected").attr("data-delivery-time")),r=1<o?o+" dias úteis ":"1 dia útil ",n=1<a?"R$ "+selectSupplierInCatalogue.find("option:selected").attr("data-minimum-order").replace(".",","):"Sem valor mínimo";$(".js-banner-catalogue").addClass("d-none"),$(".js-supplier-store__name").text(e),$(".js-supplier-name-in-search").text(e),$(".js-supplier-store").removeClass("d-none"),$(".js-top-supplier-list-block, .js-title-for-products").addClass("d-none"),$(".js-search-query").attr("placeholder","Buscar produto ou marca"),$(".js-supplier-store__delivery-time").text(r),$(".js-supplier-store__minimum-order").text(n),$(".js-search-in").text(""),""===t?$(".js-supplier-store__logo").attr("src",STATIC_IMAGE+"icons/user.svg"):$(".js-supplier-store__logo").attr("src",t),$(".js-dd-search-in").removeClass("d-none"),$(".js-dd-search-type").addClass("d-none"),is_mobile&&($(".search-by-s").removeClass("hidden"),$(".catalogue-search").addClass("catalogue-search--supplier")),$(".js-select-search-type").val("products"),$(".js-dd-search-type-item").removeClass("active"),$(".js-dd-search-type-item[data-val='products']").addClass("active"),$(".js-dd-search-type-name").text("Produtos")}function hideSupplierStore(){$(".js-banner-catalogue").removeClass("d-none"),$(".js-supplier-store").addClass("d-none"),$(".js-top-supplier-list-block, .js-title-for-products").removeClass("d-none"),$(".js-supplier-store-fixed").css("max-height","0px"),$(".query-search").val(""),$(".catalogue-search-title").text("Catálogo"),$(".js-dd-search-in").addClass("d-none"),$(".js-dd-search-type").removeClass("d-none"),$(".js-search-query").attr("placeholder","Olá, qual produto você quer comprar?"),$(".search-by-s").addClass("hidden"),$(".catalogue-search").removeClass("catalogue-search--supplier"),$(".select-suggestions").slideUp()}function buildSupplierCards(e){if(0<e.length){for(var t=highlight=0;t<e.length;t++){var a=$("<div></div>",{class:"col-6 col-md-3"}),o=$("<a></a>",{href:null==e[t].slug||""==e[t].slug?"/catalogue/":"/fornecedores/"+e[t].slug+"/",class:"supplier-profile__link"}),r=$("<div></div>",{class:"bg-light rounded text-blue text-center supplier-profile mb-4"}),n=$("<div></div>",{class:"supplier-profile__header rounded-top"}),i=$("<div></div>",{class:"supplier-profile__img rounded-circle bg-white shadow-sm",html:"<img src='"+(""!==e[t].logo?e[t].logo:STATIC_IMAGE+"icons/user.svg")+"' />"}),s=$("<div></div>",{class:"supplier-profile__content py-2 px-1 py-md-3 px-md-3"}),c=$("<h3></h3>",{class:"supplier-profile__title text-uppercase my-3 text-orange text-truncate",html:e[t].name}),l=$("<p></p>",{class:"mb-0 supplier-profile__description",html:"<i class='lni-delivery text-orange'></i> Entrega em até "+e[t].delivery_time+" dia"+(1<e[t].delivery_time?"s úteis":" útil")+" <br> <i class='lni-coin text-orange'></i> Pedido mínino de R$ "+e[t].minimum_order.replace(".",",")});s.append(c),s.append(l),n.append(i),r.append(n),r.append(s),o.append(r),a.append(o),e[t].highlight?(highlight++,$(".js-highlight-suppliers-list-page").append(a)):$(".js-suppliers-list-page").append(a)}0==highlight?$(".js-highlight-suppliers-block").addClass("d-none"):highlight==e.length&&$(".js-all-suppliers-block").addClass("d-none")}else $(".js-highlight-suppliers-block, .js-all-suppliers-block").addClass("d-none")}$(document).ready(function(){var r=!1;"undefined"!=typeof IS_CATALOGUE&&IS_CATALOGUE&&(r=!0);var n=$("#select-supplier-in-search");$("#select-supplier-in-menu").on("select2:open",function(){$(".select2-search input").prop("focus",0),$("#select2-select-supplier-in-menu-results>li:first-child").text("Todos os Fornecedores")}),$("#select-supplier-in-search").on("change",function(){"Todos os Fornecedores"==$(this).val()&&$(".js-distributor-content").hide()}),selectSupplierInCatalogue.change(function(){var e,t=$(this).val(),a=$(this).find("option:selected").attr("data-slug"),o=$(this).find("option:selected").text();r?(hideCleanFiltersButton(),""!==t&&"Todos os Fornecedores"!==t&&null!==t?(searchField.val(""),setCatalogueURL(a),searchSupplier(o),"atacadao"===MARKETPLACE_NAME?$(".catalogue-search-title").text("".concat(o,": Os melhores produtos")):$(".catalogue-search-title").text("".concat(o,": Melhores Preços")),n.html('<option value="Todos os Fornecedores">Todos os Fornecedores</option><option value="'+t+'" selected >'+o.toUpperCase()+"</option>"),$(".js-dd-search-in-items").html('<a class="dropdown-item js-dd-search-in-item" data-val="Todos os Fornecedores" href="#">Todos os parceiros</a><a class="dropdown-item js-dd-search-in-item active" data-val="'+t+'" href="#">'+o.toUpperCase()+"</a>"),$(".js-dd-search-in-name").text(o.toUpperCase()),buildSupplierStore()):(hideSupplierStore(),catalogueFilter.cleanDistributor(),catalogueFilter.addSearchQuery(searchField.val()),e=catalogueFilter.getQuery(),requestFillCatalogue(e,!0))):window.location.href=a}),n.change(function(){selectSupplierInCatalogue.val($(this).val()).change()});var e=!1;$(".js-search-query").focus(function(){window.innerWidth<768&&"undefined"!=typeof IS_CATALOGUE&&IS_CATALOGUE&&null!==catalogueFilter.distributor&&(e=!1,$(".select-suggestions").slideDown())}),$(".js-search-query").blur(function(){setTimeout(function(){e||$(".select-suggestions").slideUp()},100)}),$(".select-suggestions__item").click(function(){e=!0,$(".search-by-s").addClass("hidden"),$(".select-suggestions").slideUp(),n.val("Todos os Fornecedores").change()}),$(document).on("click",".js-supplier-box-link",function(e){e.preventDefault(),isBoxDrag||selectSupplierInCatalogue.val($(this).attr("data-id")).change(),isBoxDrag=!1,userInteractionGMT("Clique em fornecedor no catálogo",$(this).find(".suppliers-catalogue-carousel__name").text())})});var isBoxDrag=!1,isSearch=!0;function asyncGeneratorStep(e,t,a,o,r,n,i){try{var s=e[n](i),c=s.value}catch(e){return void a(e)}s.done?t(c):Promise.resolve(c).then(o,r)}function _asyncToGenerator(s){return function(){var e=this,i=arguments;return new Promise(function(t,a){var o=s.apply(e,i);function r(e){asyncGeneratorStep(o,t,a,r,n,"next",e)}function n(e){asyncGeneratorStep(o,t,a,r,n,"throw",e)}r(void 0)})}}function buildPagination(e){var t,a,o;cleanPagination(),pageNumber=e.page_number,pageRange=e.page_range,first=e.first,previous=e.previous,next=""!=e.next&&e.next,last=e.last,1!=pageRange.length&&(t=$(".pagination"),a=$('<nav class="pagination-inner">'),first&&(firstElem=$('<a href="#" class="item prev" title="Primeira página"> <span>&#171;</span> </a>'),a.append(firstElem),firstElem.on("click",function(e){e.preventDefault(),clickPaginator(first)})),previous&&(previousElem=$('<a href="#" class="item prev" title="Página Anterior"> <span>&#8249;</span> </a>'),a.append(previousElem),previousElem.on("click",function(e){e.preventDefault(),clickPaginator(previous)})),pageRange.forEach(function(t){o=t==pageNumber?$('<span class="item active"> '+t+"</span>"):$('<a class="item" href="#"> '+t+"</a>"),a.append(o),o.on("click",function(e){e.preventDefault(),clickPaginator(t)})}),next&&(nextElem=$('<a href="#" class="item next" title="Próxima página"> <span>&#8250;</span> </a>'),a.append(nextElem),nextElem.on("click",function(e){e.preventDefault(),clickPaginator(next)})),last&&(nextElem=$('<a href="#" class="item next" title="Última página"> <span>&#187;</span> </a>'),a.append(nextElem),nextElem.on("click",function(e){e.preventDefault(),clickPaginator(last)})),t.append(a))}function cleanPagination(){$(".pagination").html("")}function clickPaginator(e){return _clickPaginator.apply(this,arguments)}function _clickPaginator(){return(_clickPaginator=_asyncToGenerator(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return isSearch=!1,$(".js-pagination-loading").removeClass("d-none"),catalogueFilter.changePage(t),e.next=5,catalogueFilter.getQuery();case 5:query=e.sent,requestSearchCatalogue(query),"catalogue"!==PAGE&&"catalogo"!==PAGE&&"cart"!=PAGE||setCatalogueURL(getQueryURL());case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function asyncGeneratorStep(e,t,a,o,r,n,i){try{var s=e[n](i),c=s.value}catch(e){return void a(e)}s.done?t(c):Promise.resolve(c).then(o,r)}function _asyncToGenerator(s){return function(){var e=this,i=arguments;return new Promise(function(t,a){var o=s.apply(e,i);function r(e){asyncGeneratorStep(o,t,a,r,n,"next",e)}function n(e){asyncGeneratorStep(o,t,a,r,n,"throw",e)}r(void 0)})}}function clearViewMoreOffers(){$(".js-modal-of_num-offerts, .js-modal-of_product-name, .js-modal-of_product-price, .js-modal-of_supplier").text("---").addClass("skeleton-loading"),$(".js-modal-of_table tbody").html("")}function buildViewMoreOffers(l){var e=l.offers.findIndex(function(e){return l.cart_info.cart&&l.cart_info.distributor_id==e.distributor.id&&l.cart_info.multiplier==e.multiplier});-1!=e&&l.offers.splice(0,0,l.offers.splice(e,1)[0]),l.offers.map(function(e){var t=$("<tr></tr>",{class:is_mobile?"product-row py-2 border-top":""}),a=$("<td></td>",{class:is_mobile?"border-0 py-2 w-100":"",html:"<div class='text-center w-100 d-md-inline-block d-flex align-items-center'><div class='border rounded-circle "+(is_mobile?"":"card--supplier-logo")+" card--supplier-logo--sm mr-2 m-md-auto'><img class='"+(is_mobile?"w-100":"")+"' src='"+e.distributor.logo+"'></div><div class='mt-md-2'><span>"+e.distributor.name+"</span></div></div>"}),o=$("<td></td>",{class:"align-middle "+(is_mobile?" w-50 py-2 border-0 ":" text-primary"),html:(is_mobile?"<strong>Prazo de entrega:</strong> <br>":"")+"Em até "+e.delivery_time+" dias úteis"}),r=$("<td></td>",{class:"align-middle "+(is_mobile?"w-50 py-2 text-right border-0 ":""),html:(is_mobile?"<strong>Quantidade:</strong> <br>":"")+"Mínimo de "+e.multiplier.replace(".00","")+" "+l.unit_display}),n=$("<td></td>",{class:"align-middle "+(is_mobile?"w-50 py-2 border-0 ":""),html:(is_mobile?"<strong>Preço unitário: </strong> <br>":"")+"<h3 class='mb-0 "+(is_mobile?"h5":"h3")+"'>R$ "+e.unit_price.replace(".",",")+"</h3>"}),i=$("<td></td>",{class:"align-middle "+(is_mobile?"w-50 py-2 text-right border-0 ":""),html:(is_mobile?"<strong>Preço total: </strong> <br>":"")+"<h3 class='mb-0 "+(is_mobile?"h5":"h3")+"'>R$ "+e.total_price.replace(".",",")+"</h3>"}),s=$("<td></td>",{class:"align-middle text-center "+(is_mobile?"w-100 border-0 py-2":"")}),c="<a class='"+(is_mobile?"w-100 ":"")+(l.cart_info.cart&&l.cart_info.distributor_id==e.distributor.id&&l.cart_info.multiplier==e.multiplier?"btn btn-primary cursor-unset":l.cart_info.cart?"d-block js-modal-of_add-cart":"btn btn-primary js-modal-of_add-cart")+"' href='#' data-sku='"+l.id+"' data-multiplier='"+e.multiplier+"' data-supplier-id='"+e.distributor.id+"' data-supplier-name='"+e.distributor.name+"' data-product-price='"+e.unit_price.replace(".",",")+"'>"+(l.cart_info.cart&&l.cart_info.distributor_id==e.distributor.id&&l.cart_info.multiplier==e.multiplier?"Adicionado":l.cart_info.cart?" <img src='"+STATIC_IMAGE+"icons/replace.svg' class='replace mr-2 mr-md-0'>"+(is_mobile?"":"<br>")+" Substituir":"Adicionar ao carrinho")+"</a>";s.append(c),t.append(a),t.append(o),t.append(r),t.append(n),t.append(i),t.append(s),$(".js-modal-of_table tbody").append(t)})}function buildViewMoreOffersSku(e){$(".js-modal-of_product-image").attr("src",e.photo),$(".js-modal-of_num-offerts").text(e.offers.length),$(".js-modal-of_product-name").text(e.full_display+" - "+e.brand),$(".js-modal-of_product-price").text("R$ "+e.price.replace(".",",")+"/"+e.unit_display),$(".js-modal-of_supplier").text(e.distributor),$(".js-modal-of_num-offerts, .js-modal-of_product-name, .js-modal-of_product-price, .js-modal-of_supplier").removeClass("skeleton-loading")}$(document).ready(function(){var t;"catalogue"!==PAGE&&"catalogo"!==PAGE||(t=0,$(window).scroll($.debounce(50,function(){var e=0<$(".category-content").length?$(".category-content").height():0;$(window).scrollTop()>=$(document).height()-($("footer").height()+e+30)-$(window).height()-550&&($(window).scrollTop()<t||$(document).height()-($("footer").height()+e+30+280)>$(window).scrollTop()&&isSearch&&$(".pagination .next:first").click()),t=$(window).scrollTop(),500<$(window).scrollTop()?$(".js-btn-back-top").show():$(".js-btn-back-top").hide()}))),"cart"===PAGE&&(t=0,$(".modal-body--block-height").scroll($.debounce(50,function(){$(".modal-body--block-height").scrollTop()>=$(".modal-body--block-height .modal-more-products-body").height()-$(".modal-body--block-height").height()-550&&($(".modal-body--block-height").scrollTop()<t||$(".modal-body--block-height .modal-more-products-body").height()+280>$(".modal-body--block-height").scrollTop()&&isSearch&&$(".pagination .next:first").click()),t=$(".modal-body--block-height").scrollTop()})))}),$(".js-btn-back-top").click(function(e){e.preventDefault(),$("html, body").animate({scrollTop:0},500)}),$(document).on("click",".cursor-unset",function(e){e.preventDefault()}),$(document).on("click",".js-product-box__offer-link",_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return clearViewMoreOffers(),$("#modal-other-offers").modal("show"),t=$(this).attr("data-pk"),e.next=5,getSkuDetail(t,REGION.city_id,REGION.type).then(function(e){buildViewMoreOffersSku(e),buildViewMoreOffers(e)}).catch(function(e){console.warn(e,"Falha ao tentar buscar ofertas")});case 5:""==(a=$(this).closest(".product-box").find(".product-box__name").text())&&"undefined"!=typeof PAGE&&"product"==PAGE&&(a=PRODUCT_DL.detail.products[0].name),userInteractionGMT("Clique em ver mais ofertas",a);case 9:case"end":return e.stop()}},e,this)})));var getSkuDetail=function(a,o,r){return new Promise(function(t,e){$.get(GET_SKU_OFFERS+a+"/",{city_id:o,for_natural_person:"CPF"==r},function(e){t(e)}).fail(function(){e()})})};function quantityUp(t){var a=t.attr("data-pk"),e=t.attr("data-multiple"),o=t.siblings(".js-count-product"),r=o.attr("data-count");t.find("img").attr("src",STATIC_IMAGE+"icons/loading-gray.svg"),$.ajax({url:ADD_CART_ITEM_URL,data:{sku_pk:a,multiplier:e,count:r},type:"GET",success:function(e){o.attr("data-count",e.count).text(e.count.replace(".00","")),t.find("img").attr("src",STATIC_IMAGE+"icons/plus.svg"),animateCart(),"myList"===PAGE&&$(".js-input-dropdown__form-control[data-pk='"+a+"']").val(e.count)}})}function quantityDown(t){var a=t.attr("data-pk"),e=t.attr("data-multiple"),o=t.siblings(".js-count-product"),r=o.attr("data-count");r>=Number(e)&&(t.find("img").attr("src",STATIC_IMAGE+"icons/loading-gray.svg"),$.ajax({url:ADD_CART_ITEM_URL,data:{sku_pk:a,multiplier:e,count:r},type:"GET",success:function(e){o.attr("data-count",e.count).text(e.count.replace(".00","")),t.find("img").attr("src",STATIC_IMAGE+"icons/minus.svg"),animateCart(),"myList"===PAGE&&$(".js-input-dropdown__form-control[data-pk='"+a+"']").val(e.count)}}))}function animateCart(){setTimeout(function(){$(".js-total-products").addClass("animate_cart")}.bind(this),0),setTimeout(function(){$(".js-total-products").removeClass("animate_cart")}.bind(this),400)}function setCatalogueURL(e){var t=localStorage.getItem("searchQuery"),a=(window.location.href,window.location.pathname,window.location.search);(null===t||t!==e&&a!==e)&&(localStorage.setItem("searchQuery",e),window.history.pushState("object or string","Title",e))}function getQueryURL(){var e="";return 2<searchField.val().length&&(e=e+"?queryString="+encodeURIComponent(searchField.val())),catalogueFilter.pageNumber&&catalogueFilter.pageNumber,0<(e+=getFiltersURL()).length?e.replace(e.substring(0,1),"?"):""}$(document).ready(function(){$(".product-results, .modal-more-products-body, .box-product-information").on("click",".js-btn-plus-product",function(){var e=$(this),t=e.attr("data-multiple"),a=e.siblings(".js-count-product"),o=a.attr("data-count"),r=e.closest(".update-quantity"),o=Number(o)+Number(t);a.attr("data-count",formatNumber(o)).text(formatNumber(o).toString().replace(".00","")),0<$(".modal-more-products-body").length&&$("input[data-pk='"+r.attr("data-order-produt")+"']").val(o).trigger("change")}),$(".product-results, .modal-more-products-body, .box-product-information").on("click",".js-btn-minus-product",function(){var e=$(this),t=e.attr("data-multiple"),a=e.siblings(".js-count-product"),o=a.attr("data-count"),r=e.closest(".update-quantity");(o=Number(o)-Number(t))>=Number(t)&&(a.attr("data-count",formatNumber(o)).text(formatNumber(o).toString().replace(".00","")),0<$(".modal-more-products-body").length&&$("input[data-pk='"+r.attr("data-order-produt")+"']").val(o).trigger("change"))}),$(".product-results, .box-product-information").on("click",".js-btn-plus-product",$.debounce(500,function(){quantityUp($(this))})),$(".product-results, .box-product-information").on("click",".js-btn-minus-product",$.debounce(500,function(){quantityDown($(this))}))});