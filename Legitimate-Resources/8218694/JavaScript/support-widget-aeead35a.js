var c=Object.defineProperty;var d=(s,t,e)=>t in s?c(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var n=(s,t,e)=>(d(s,typeof t!="symbol"?t+"":t,e),e);const helper={makeId:function(s){for(var t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=e.length,o=0;o<s;o++)t+=e.charAt(Math.floor(Math.random()*i));return"sw-"+t}};class SWIcon{constructor(t){n(this,"_element");n(this,"_icon");this._element=document.createElement("div"),this._element.style.width=this._element.style.height=t.size+"px",this._element.style.display="inline-flex",this._element.style.justifyItems="center",this._element.style.alignItems="center",this._icon=document.createElement("div"),this._icon.style.width=this._icon.style.height=t.size+"px",this._icon.style.backgroundSize="cover",this._element.appendChild(this._icon)}setIcon(t){this._icon.style.backgroundImage="url('"+t+"')"}getElement(){return this._element}}class SWButton extends SWIcon{constructor(e,i){super(e);n(this,"normalIcon");n(this,"closeIcon");this.normalIcon=e.button.icon,this.closeIcon=e.button.closeIcon,this.getElement().classList.add("sw-button"),this.setIcon(this.normalIcon),this.getElement().addEventListener("click",i)}open(){this.changeIconTo(this.closeIcon)}close(){this.changeIconTo(this.normalIcon)}changeIconTo(e){let i=this.getElement().animate([{opacity:1},{opacity:0}],{duration:150});i.onfinish=()=>{this.setIcon(e),this.getElement().animate([{opacity:0},{opacity:1}],{duration:150})}}}class SWEntry extends SWIcon{constructor(e,i,o,l,a){super(e);n(this,"title");n(this,"_url");this._url=l,this.setIcon(i),this.getElement().classList.add("sw-entry"),this.getElement().setAttribute("title",o),this.getElement().addEventListener("click",r=>{a(this._url)}),this.getElement().style.display="none"}getUrl(){return this._url}hide(){let e=this.getElement().animate([{opacity:1},{opacity:0}],{duration:150});e.onfinish=()=>{this.getElement().style.opacity=0,this.getElement().style.display="none"}}show(e){this.getElement().style.display="inline-block",this.getElement().style.opacity=0;let i=this.getElement().animate([{opacity:0},{opacity:1}],{duration:300});i.onfinish=()=>{this.getElement().style.opacity=1}}}class SWInstance{constructor(t,e){n(this,"_root");n(this,"_config");n(this,"holder");n(this,"container");n(this,"button");n(this,"buttons");n(this,"isOpen");n(this,"isAnimating");n(this,"afterClose");n(this,"animations");n(this,"outerElements");n(this,"states");n(this,"isOver");this._root=t,this._config=e,this.buttons=[],this.animations=[],this.states={},this.isOpen=!1,this.isAnimating=!1,this.afterClose=!1,this.outerElements=[],this.isOver=!1}init(){this.createHolder(),this.createContainer(),this.createButton(),this.createElements(),this.initOuterElements(),this.build(),this.addListeners(),this._config.bounce&&this.startBounce(),this._config.blink&&this.startBlink(),this.mount(this._root)}mount(t){t.after(this.holder)}createHolder(){this.holder=document.createElement("div"),this.holder.style.display="inline-block",this.holder.style.position="relative",this.holder.style.width="auto",this.holder.style.zIndex=1e3}createContainer(){switch(this.container=document.createElement("div"),this.container.classList.add("sw-container"),this.container.style.width="auto",this.container.style.display="inline-flex",this._config.direction){case"right":this.container.style.flexDirection="row";break;case"left":this.container.style.flexDirection="row-reverse";break;case"down":this.container.style.flexDirection="column";break;case"up":this.container.style.flexDirection="column-reverse";break}this.container.style.cursor="pointer",this.container.style.flexWrap="nowrap"}createButton(){this.button=new SWButton(this._config,this.handleBtnClick.bind(this))}createElements(){this._config.elements.forEach(this.createElement.bind(this))}createElement(t,e){let i=new SWEntry(this._config,t.icon,t.label,t.url,this.handleEntryClick.bind(this));switch(this._config.direction){case"right":i.getElement().style.marginLeft=this._config.size/2+"px";break;case"left":i.getElement().style.marginRight=this._config.size/2+"px";break;case"down":i.getElement().style.marginTop=this._config.size/2+"px";break;case"up":i.getElement().style.marginBottom=this._config.size/2+"px";break}this.buttons.push(i)}initOuterElements(){if(!this._config.hide)return;this._config.hide.split(",").forEach(e=>{let i=document.getElementById(e);this.outerElements.push({display:i.style.display,element:i})})}build(){this.holder.appendChild(this.container),this.container.appendChild(this.button.getElement()),this.buttons.forEach(t=>{this.container.appendChild(t.getElement())})}addListeners(){this._config.openOnHover&&(this.holder.addEventListener("mouseenter",t=>{this.toggleOn()}),this.holder.addEventListener("mouseleave",t=>{this.toggleOff()}))}handleBtnClick(t){if(this.isOpen){this.toggleOff();return}this.toggleOn()}toggleOn(){this.isOver=!0,this.stopAnimations(),!this.isOpen&&!this.isAnimating&&!this.afterClose&&this.openWidget()}toggleOff(){this.isOver=!1,this.afterClose=!1,this.isOpen&&!this.isAnimating&&this.closeWidget()}toggle(){if(this.isOpen){this.afterClose=!0,this.closeWidget();return}this.openWidget()}handleEntryClick(t){this.isOpen&&window.open(t)}openWidget(){this.isAnimating=!0,this.hideOuterElements(),this.container.classList.add("sw-container__open"),this.button.open(),this.buttons.forEach((t,e)=>{t.show(e),this.slideIn(t,e,()=>{this.animations.length===0&&(this.isOpen=!0,this.isAnimating=!1)})})}closeWidget(){this.isAnimating=!0,this.button.close(),this.buttons.forEach((t,e)=>{t.hide(e),this.slideOut(t,e,()=>{this.animations.length===0&&(this.container.classList.remove("sw-container__open"),this.isOpen=!1,this.isAnimating=!1,this.showOuterElements(),this._config.bounce&&this.startBounce(),this._config.blink&&this.startBlink())})})}hideOuterElements(){this.outerElements.forEach(t=>{t.element.style.display="none"})}showOuterElements(){this.outerElements.forEach(t=>{t.element.style.display=t.display})}slideIn(t,e,i){let o=-this._config.size*e+this._config.size/2,l=this._config.size/2;this.addAnimation("slide-in-"+e),this.slide(t,e,o,l,a=>{this.removeAnimation("slide-in-"+a),i.call()})}slideOut(t,e,i){let o=this._config.size/2,l=-this._config.size*e+this._config.size/2;this.addAnimation("slide-out-"+e),this.slide(t,e,o,l,a=>{this.removeAnimation("slide-out-"+a),i.call()})}slide(t,e,i,o,l){let a={},r={};switch(this._config.direction){case"right":a.marginLeft=i+"px",r.marginLeft=o+"px";break;case"left":a.marginRight=i+"px",r.marginRight=o+"px";break;case"up":a.marginBottom=i+"px",r.marginBottom=o+"px";break;case"down":a.marginTop=i+"px",r.marginTop=o+"px";break}let h=t.getElement().animate([a,r],{duration:150});h.onfinish=()=>l.call(e)}addAnimation(t){this.animations.push(t)}removeAnimation(t){this.animations.splice(this.animations.indexOf(t),1)}startBounce(){if(this.isOver)return;let t=this.holder.animate([{transform:"translate(0px, 0px)"},{transform:"translate(0px, -5px)"}],{duration:600,ease:"ease-out"});t.onfinish=()=>{let e=this.holder.animate([{transform:"translate(0px, -5px)"},{transform:"translate(0px, 0px)"}],{duration:600,ease:"ease-in"});e.onfinish=()=>this.startBounce()}}startBlink(){if(this.isOver)return;let t=this.holder.animate([{opacity:1},{opacity:.4}],{duration:600,ease:"ease-in"});t.onfinish=()=>{let e=this.holder.animate([{opacity:.4},{opacity:1}],{duration:300,ease:"ease-out"});e.onfinish=()=>this.startBlink()}}stopAnimations(){this.holder.getAnimations().forEach(e=>{if(this._config.blink&&this.holder.animate([{opacity:this.holder.style.opacity},{opacity:1}],{duration:150,ease:"ease-out"}),this._config.bounce){let i=new WebKitCSSMatrix(window.getComputedStyle(this.holder).transform);this.holder.animate([{transform:"translate(0px, "+i.m42+"px)"},{transform:"translate(0px, 0px)"}],{duration:150,ease:"ease-in"})}e.cancel()})}}const supportWidget={_instances:{},init:function(s,t){s.id===""&&(s.id=helper.makeId(8)),this._instances[s.id]=new SWInstance(s,t),this._instances[s.id].init()},toggle:function(s){this._instances[s].toggle()},toggleOn:function(s){this._instances[s].toggleOn()},toggleOff:function(s){this._instances[s].toggleOff()}};window.supportWidget=supportWidget;document.addEventListener("DOMContentLoaded",function(){let elements=document.getElementsByClassName("support-widget");for(let item of elements)window.supportWidget.init(item,{size:parseInt(item.dataset.size)?parseInt(item.dataset.size):24,direction:item.dataset.direction?item.dataset.direction:"right",hide:item.dataset.hide,bounce:eval(item.dataset.bounce),blink:eval(item.dataset.blink),openOnHover:item.dataset.openOnHover?eval(item.dataset.openOnHover):!0,button:{icon:"/img/icons/icon-support.png",closeIcon:"/img/icons/icon-close.png"},elements:[{icon:"/img/social/mail.svg",label:"Email",url:window.support_contacts.email},{icon:"/img/social/facebook.svg",label:"Facebook",url:window.support_contacts.facebook},{icon:"/img/social/telegram.svg",label:"Telegram",url:window.support_contacts.telegram}]})});
