(function(t){var l={type:"html",content:"",url:"",ajax:{},ajax_request:null,closeOnEsc:!0,closeOnOverlayClick:!0,clone:!1,overlay:{block:void 0,tpl:'<div class="arcticmodal-overlay"></div>',css:{backgroundColor:"#000",opacity:.8}},container:{block:void 0,tpl:'<div class="arcticmodal-container"><table class="arcticmodal-container_i"><tr><td class="arcticmodal-container_i2"></td></tr></table></div>'},wrap:void 0,body:void 0,errors:{tpl:'<div class="arcticmodal-error arcticmodal-close"></div>',autoclose_delay:2e3,ajax_unsuccessful_load:"Error"},openEffect:{type:"fade",speed:400},closeEffect:{type:"fade",speed:400},beforeOpen:t.noop,afterOpen:t.noop,beforeClose:t.noop,afterClose:t.noop,afterLoading:t.noop,afterLoadingOnShow:t.noop,errorLoading:t.noop},d=0,a=t([]),p={isEventOut:function(e,r){var o=!0;return t(e).each(function(){t(r.target).get(0)==t(this).get(0)&&(o=!1),t(r.target).closest("HTML",t(this).get(0)).length==0&&(o=!1)}),o}},c={getParentEl:function(e){var r=t(e);return r.data("arcticmodal")||(r=t(e).closest(".arcticmodal-container").data("arcticmodalParentEl"))?r:!1},transition:function(e,r,o,n){switch(n=n??t.noop,o.type){case"fade":r=="show"?e.fadeIn(o.speed,n):e.fadeOut(o.speed,n);break;case"none":r=="show"?e.show():e.hide(),n()}},prepare_body:function(e,r){t(".arcticmodal-close",e.body).unbind("click.arcticmodal").bind("click.arcticmodal",function(){return r.arcticmodal("close"),!1})},init_el:function(e,r){var o=e.data("arcticmodal");if(!o){if(o=r,d++,o.modalID=d,o.overlay.block=t(o.overlay.tpl),o.overlay.block.css(o.overlay.css),o.container.block=t(o.container.tpl),o.body=t(".arcticmodal-container_i2",o.container.block),r.clone?o.body.html(e.clone(!0)):(e.before('<div id="arcticmodalReserve'+o.modalID+'" style="display: none" />'),o.body.html(e)),c.prepare_body(o,e),o.closeOnOverlayClick&&o.overlay.block.add(o.container.block).click(function(i){p.isEventOut(t(">*",o.body),i)&&e.arcticmodal("close")}),o.container.block.data("arcticmodalParentEl",e),e.data("arcticmodal",o),a=t.merge(a,e),t.proxy(s.show,e)(),o.type=="html")return e;if(o.ajax.beforeSend!=null){var n=o.ajax.beforeSend;delete o.ajax.beforeSend}if(o.ajax.success!=null){var f=o.ajax.success;delete o.ajax.success}if(o.ajax.error!=null){var u=o.ajax.error;delete o.ajax.error}var m=t.extend(!0,{url:o.url,beforeSend:function(){n==null?o.body.html('<div class="arcticmodal-loading" />'):n(o,e)},success:function(i){e.trigger("afterLoading"),o.afterLoading(o,e,i),f==null?o.body.html(i):f(o,e,i),c.prepare_body(o,e),e.trigger("afterLoadingOnShow"),o.afterLoadingOnShow(o,e,i)},error:function(){e.trigger("errorLoading"),o.errorLoading(o,e),u==null?(o.body.html(o.errors.tpl),t(".arcticmodal-error",o.body).html(o.errors.ajax_unsuccessful_load),t(".arcticmodal-close",o.body).click(function(){return e.arcticmodal("close"),!1}),o.errors.autoclose_delay&&setTimeout(function(){e.arcticmodal("close")},o.errors.autoclose_delay)):u(o,e)}},o.ajax);o.ajax_request=t.ajax(m),e.data("arcticmodal",o)}},init:function(e){if(e=t.extend(!0,{},l,e),t.isFunction(this))if(e==null)t.error("jquery.arcticmodal: Uncorrect parameters");else if(e.type=="")t.error(`jquery.arcticmodal: Don't set parameter "type"`);else switch(e.type){case"html":if(e.content==""){t.error(`jquery.arcticmodal: Don't set parameter "content"`);break}var r=e.content;return e.content="",c.init_el(t(r),e);case"ajax":if(e.url==""){t.error(`jquery.arcticmodal: Don't set parameter "url"`);break}return c.init_el(t("<div />"),e)}else return this.each(function(){c.init_el(t(this),t.extend(!0,{},e))})}},s={show:function(){var e=c.getParentEl(this);if(e===!1)t.error("jquery.arcticmodal: Uncorrect call");else{var r=e.data("arcticmodal");if(r.overlay.block.hide(),r.container.block.hide(),t("BODY").append(r.overlay.block),t("BODY").append(r.container.block),r.beforeOpen(r,e),e.trigger("beforeOpen"),r.wrap.css("overflow")!="hidden"){r.wrap.data("arcticmodalOverflow",r.wrap.css("overflow"));var o=r.wrap.outerWidth(!0);r.wrap.css("overflow","hidden");var n=r.wrap.outerWidth(!0);n!=o&&r.wrap.css("marginRight",n-o+"px")}return a.not(e).each(function(){t(this).data("arcticmodal").overlay.block.hide()}),c.transition(r.overlay.block,"show",1<a.length?{type:"none"}:r.openEffect),c.transition(r.container.block,"show",1<a.length?{type:"none"}:r.openEffect,function(){r.afterOpen(r,e),e.trigger("afterOpen")}),e}},close:function(){if(t.isFunction(this))a.each(function(){t(this).arcticmodal("close")});else return this.each(function(){var e=c.getParentEl(this);if(e===!1)t.error("jquery.arcticmodal: Uncorrect call");else{var r=e.data("arcticmodal");r.beforeClose(r,e)!==!1&&(e.trigger("beforeClose"),a.not(e).last().each(function(){t(this).data("arcticmodal").overlay.block.show()}),c.transition(r.overlay.block,"hide",1<a.length?{type:"none"}:r.closeEffect),c.transition(r.container.block,"hide",1<a.length?{type:"none"}:r.closeEffect,function(){r.afterClose(r,e),e.trigger("afterClose"),r.clone||t("#arcticmodalReserve"+r.modalID).replaceWith(r.body.find(">*")),r.overlay.block.remove(),r.container.block.remove(),e.data("arcticmodal",null),t(".arcticmodal-container").length||(r.wrap.data("arcticmodalOverflow")&&r.wrap.css("overflow",r.wrap.data("arcticmodalOverflow")),r.wrap.css("marginRight",0))}),r.type=="ajax"&&r.ajax_request.abort(),a=a.not(e))}})},setDefault:function(e){t.extend(!0,l,e)}};t(function(){l.wrap=t(document.all&&!document.querySelector?"html":"body")}),t(document).bind("keyup.arcticmodal",function(e){var r=a.last();r.length&&r.data("arcticmodal").closeOnEsc&&e.keyCode===27&&r.arcticmodal("close")}),t.arcticmodal=t.fn.arcticmodal=function(e){if(s[e])return s[e].apply(this,Array.prototype.slice.call(arguments,1));if(typeof e=="object"||!e)return c.init.apply(this,arguments);t.error("jquery.arcticmodal: Method "+e+" does not exist")}})(jQuery);
