var _exhaust=_exhaust||{trigger:function(){window._exhaust_init_queue.push(arguments)
}};
window._exhaust_init_queue=window._exhaust_init_queue||[];
window.emitToExhaust=function(c,b){var a=arguments;
if(typeof window._exhaust=="object"){window._exhaust.trigger.apply(window._exhaust,a);
return true
}else{window._exhaust_init_queue.push(a);
return false
}};
window.digitalData=window.digitalData||{};
var tempTitle=document.createElement("div");
var title=dataLayerPageTitle;
if(title.length<=0){title=dataLayerJcrTitle
}tempTitle.innerHTML=title;
var pattern="/en/";
var categories={broadband:"Broadband","bt-sport":"Sport",email:"Email",tv:"TV","account-and-billing":"Billing",landline:"Landline",mobile:"Mobile","bt-plus":"Broadband",security:"Security","bt-halo":"Halo","user-guides":"Userguides",mybtapp:"mybtapp","fix-your-bt-error-code-problem":"Error Codes"};
var currentPage=(window.location.pathname).indexOf("/content")===0?(window.location.pathname).substring((window.location.pathname).indexOf(pattern)+pattern.length):(window.location.pathname).replace("/help/","");
var category;
if(currentPage.indexOf("/")!==-1){category=categories[currentPage.substring(0,currentPage.indexOf("/"))]
}else{if(currentPage.indexOf(".html")!==-1){category=categories[currentPage.substring(0,currentPage.indexOf(".html"))]
}else{category=categories[currentPage]
}}var primaryCategory=dataLayerPrimaryCategory;
if(primaryCategory){var tempCategory=document.createElement("div");
tempCategory.innerHTML=primaryCategory;
category=tempCategory.textContent
}var categoryForDigitalData=category?category+":":"";
var legacyArticleID=dataLayerLegacyArticleID||""?dataLayerLegacyArticleID+":":"";
var resourceType=dataLayerTemplate;
resourceType=resourceType?resourceType.substring(resourceType.lastIndexOf("/")+1):"";
var pageLabelTags=[];
if(dataLayerPageLabels){var pageLabels=dataLayerPageLabels.substring(0,dataLayerPageLabels.length-1);
pageLabelTags=pageLabels.split("|,")
}var squadTag=dataLayerTags||""?dataLayerTags:"";
var squadTagItems=squadTag.split(","),setupTag="bt:help/SetUp",manageTag="bt:help/Manage",fixTag="bt:help/Fix",contentTag="bt:help/Content";
var pageName="";
var pageType="Full:";
var articlePage="";
var templateTypes={articleFullWidth:"help-article-full-width",articlePage:"help-article-page",basicPage:"help-basic-page",billExplainer:"help-bill-explainer-page"};
switch(resourceType){case templateTypes.articleFullWidth:if(currentPage.startsWith("contact-bt")){var oracleId=dataLayerLegacyArticleID?dataLayerLegacyArticleID:"",pageHirarchy;
pageType="Full:";
articlePage=true;
window.digitalData.application={name:"helparticles",is_spa:false,environment:dataLayerRunMode,attributes:{}};
if(currentPage.indexOf(".html")>=0){pageHirarchy=currentPage.slice(0,currentPage.indexOf(".html")).replace(/\//g,":")
}else{pageHirarchy=currentPage.replace(/\//g,":")
}pageName="Con:SandA:"+pageType+categoryForDigitalData+legacyArticleID+pageHirarchy;
break
}case templateTypes.articlePage:pageType="Full:";
var oracleId=dataLayerLegacyArticleID?dataLayerLegacyArticleID:"";
articlePage=true;
window.digitalData.application={name:"helparticles",is_spa:false,environment:dataLayerRunMode,attributes:{}};
pageName="Con:SandA:"+pageType+categoryForDigitalData+legacyArticleID+tempTitle.textContent;
break;
case templateTypes.billExplainer:var pageType="Full:";
var oracleId=dataLayerLegacyArticleID?dataLayerLegacyArticleID:"";
articlePage=true;
window.digitalData.application={name:"helparticles",is_spa:false,environment:dataLayerRunMode,attributes:{}};
pageName="Con:SandA:"+pageType+categoryForDigitalData+tempTitle.textContent;
break;
case templateTypes.basicPage:var pagePath=dataLayerCurrentPagePath||"";
if(pagePath==="/content/bt/help/en"){pageName="BT.com|Con|SandA|Help Home"
}pageType="Hub:";
window.digitalData.application={name:"helphubs",is_spa:false,environment:dataLayerRunMode,attributes:{}};
var hubPath=pagePath.replace("/content/bt/help/en/","").replace(/\//g,":").replace(/-/g," ");
pageName=pageName?pageName:"Con:SandA:"+pageType+hubPath;
break;
default:break
}window.digitalData.application=window.digitalData.application||{};
if(projectVersion){window.digitalData.application.version=projectVersion
}if(applicationPublishDate){window.digitalData.application.published=applicationPublishDate
}squadTagItems.forEach(setSquadTagValue);
function setSquadTagValue(a){switch(a){case setupTag:squadTag="Set Up";
break;
case manageTag:squadTag="Manage";
break;
case fixTag:squadTag="Fix";
break;
case contentTag:squadTag="Content";
break;
default:squadTag=""
}}window.digitalData.event=[];
if(squadTag){window.digitalData.article={id:oracleId,title:tempTitle.textContent,category_name:category||"",attributes:{help_team_category:squadTag}}
}else{if(articlePage){window.digitalData.article={id:oracleId,title:tempTitle.textContent,category_name:category||""}
}}window.digitalData.vendor={adobe:{analytics:{pageName:pageName}}},window.digitalData.page={labels:pageLabelTags,category:{primary_category:"Customer",channel:"Consumer",type:"Service",area:"Help"},purpose:"Help",attributes:{hub_name:dataLayerPageTitle,bb_connection:dataLayerGenericDataAttribute}},window.digitalData.system=[];
window.lpTag=window.lpTag||{};
lpTag.autoStart=false;
lpTag.section=[dataLayerLpTagSection];
if(dataLayerLpTagSection){let lpTagArray=dataLayerLpTagSection.split(",");
if(lpTagArray.length>1){lpTagArray.forEach(function(a){lpTag.section.push(a)
})
}}if(pageLastUpdateTime){window.digitalData.page.last_updated_date_time=pageLastUpdateTime
}(function(){var c=true,d;
var b=function(){clearInterval(d)
};
var a=function(){if(lpTag.start){lpTag.isDom=true;
lpTag.start();
b()
}else{if(c){c=false;
d=setInterval(a,100)
}}};
a()
})();