fourSq.ui.PaginationControl=function(a){};
fourSq.ui.PaginationControl=fourSq.ui.View.extend({initialize:function(a){fourSq.ui.PaginationControl.__super__.initialize.call(this,a);this.maxPages_=a.maxPages;this.currentPage_=1;this.pageRangePadding_=2;fourSq.isDefinedAndNotNull(a.pageRangePadding)&&(this.pageRangePadding_=a.pageRangePadding);this.$pagesEl_=this.$nextButtonEl_=this.$prevButtonEl_=null},decorate:function(){this.$pagesEl_=this.$el.find(".pages");this.$prevButtonEl_=this.$el.find(".prev");this.$prevButtonEl_.click(fourSq.bind(function(){this.setPage(this.currentPage_-
1)},this));this.$nextButtonEl_=this.$el.find(".next");this.$nextButtonEl_.click(fourSq.bind(function(){this.setPage(this.currentPage_+1)},this));this.updateButtons_();return this},show:function(){this.$el.show()},hide:function(){this.$el.hide()},reset:function(){this.currentPage_=1;this.updateButtons_()},setPage:function(a,b){1>a?a=1:a>this.maxPages_&&(a=this.maxPages_);this.currentPage_=a;this.updateButtons_();b||this.trigger(fourSq.ui.PaginationControl.Events.JUMP_TO_PAGE,a)},getPage:function(){return this.currentPage_},
setMaxPages:function(a){this.maxPages_=a;this.updateButtons_()},showNextButton_:function(){this.$nextButtonEl_.show()},hideNextButton_:function(){this.$nextButtonEl_.hide()},showPrevButton_:function(){this.$prevButtonEl_.show()},hidePrevButton_:function(){this.$prevButtonEl_.hide()},updateButtons_:function(){this.$pagesEl_.empty();var a=Math.max(this.currentPage_-this.pageRangePadding_,1),b=Math.min(this.currentPage_+this.pageRangePadding_,this.maxPages_);this.renderFirstPageButtonAndEllipsis_(a);
this.renderMainPageRange_(a,b);this.renderLastPageButtonAndEllipsis_(b);this.updatePreviousAndNextButtonVisibility_();this.$el.find(".page.page"+this.currentPage_).addClass("active");1>=this.maxPages_?this.hide():this.show()},renderFirstPageButtonAndEllipsis_:function(a){1<a&&(this.renderPaginationPageButton_(1),2<a&&this.renderPaginationEllipsis_())},renderMainPageRange_:function(a,b){for(var c=a;c<=b;c++)this.renderPaginationPageButton_(c)},renderLastPageButtonAndEllipsis_:function(a){a<this.maxPages_&&
(a<this.maxPages_-1&&this.renderPaginationEllipsis_(),this.renderPaginationPageButton_(this.maxPages_))},updatePreviousAndNextButtonVisibility_:function(){1===this.currentPage_?this.hidePrevButton_():this.showPrevButton_();this.currentPage_===this.maxPages_?this.hideNextButton_():this.showNextButton_()},renderPaginationPageButton_:function(a){var b=$(templates.fourSq.ui.pagination.paginationNumber({num:a}));b.click(fourSq.curry(this.setPage,this,a,!1));this.$pagesEl_.append(b)},renderPaginationEllipsis_:function(){this.$pagesEl_.append(templates.fourSq.ui.pagination.paginationEllipsis())}});
fourSq.ui.PaginationControl.Events={JUMP_TO_PAGE:"PaginationControl:JUMP_TO_PAGE"};fourSq.ui.PaginationControl.CalculateMaxPages=function(a,b){return Math.ceil(a/b)};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.ui&&(templates.fourSq.ui={});"undefined"==typeof templates.fourSq.ui.pagination&&(templates.fourSq.ui.pagination={});
templates.fourSq.ui.pagination.paginationControl=function(a,b){a=a||{};var c='\x3cdiv class\x3d"paginationContainer"\x3e\x3cul class\x3d"pages"\x3e';if(a.maxPage&&a.currentPage)for(var d=a.maxPage+1,e=1;e<d;e++)c+=templates.fourSq.ui.pagination.paginationNumber({num:e,isActive:e==a.currentPage,path:a.path,queryString:a.queryString});return c+"\x3c/ul\x3e\x3c/div\x3e"};
templates.fourSq.ui.pagination.paginationNumber=function(a,b){return'\x3cli class\x3d"paginationComponent page page'+soy.$$escapeHtml(a.num)+" "+(a.isActive?"active":"")+'"\x3e'+(a.path?1==a.num?'\x3ca href\x3d"'+soy.$$escapeHtml(a.path)+soy.$$escapeHtml(null!=a.queryString?a.queryString:"")+'"\x3e'+soy.$$escapeHtml(a.num)+"\x3c/a\x3e":'\x3ca href\x3d"'+soy.$$escapeHtml(a.path)+"?page\x3d"+soy.$$escapeHtml(a.num)+soy.$$escapeHtml(null!=a.queryString?a.queryString:"")+'"\x3e'+soy.$$escapeHtml(a.num)+
"\x3c/a\x3e":soy.$$escapeHtml(a.num))+"\x3c/li\x3e"};templates.fourSq.ui.pagination.paginationEllipsis=function(a,b){return'\x3cli class\x3d"paginationComponent"\x3e...\x3c/li\x3e'};fourSq.userprofile2.common.SectionView=function(a,b){};fourSq.userprofile2.common.SectionView=fourSq.ui.View.extend({initialize:function(a){fourSq.userprofile2.common.SectionView.__super__.initialize.call(this,a)},hide:function(){this.$el.hide()},show:function(){this.$el.show()}});fourSq.userprofile2.desktop.UserProfile2Page=function(a){};
fourSq.userprofile2.desktop.UserProfile2Page=fourSq.views.Page.extend({initialize:function(a){fourSq.userprofile2.desktop.UserProfile2Page.__super__.initialize.call(this,a);this.user_=a.user;this.tips_=a.tips;this.useTipUpvotes_=a.useTipUpvotes;this.moreInfoFlyout_=this.$moreInfoLink_=this.locationsView_=this.tipsView_=this.listsView_=this.citiesView_=this.followingView_=this.followersView_=this.userInfoView_=null;this.history_=new fourSq.util.History;this.createSubViews_();this.attachEvents_();this.queryString_=
new fourSq.net.QueryString({query:window.location.search});a={all:this.queryString_.get("all"),geoId:this.queryString_.get("geoId")};this.updateUrl_(a,!0);this.refreshCurrentState_(a);fourSq.api.models.companion.user.UserUtil.isLoggedIn()||fourSq.signup.setupPrompt(!0)},createSubViews_:function(){this.userInfoView_=(new fourSq.userprofile2.desktop.UserInfoView({el:this.$el.find(".userInfo"),user:this.user_})).decorate();this.followersView_=(new fourSq.userprofile2.desktop.FollowersView({el:this.$el.find(".userFollowers"),
user:this.user_})).decorate();this.followingView_=(new fourSq.userprofile2.desktop.FollowingView({el:this.$el.find(".userFollowing"),user:this.user_})).decorate();this.citiesView_=(new fourSq.userprofile2.desktop.CitiesView({el:this.$el.find(".userCities"),user:this.user_})).decorate();this.listsView_=(new fourSq.userprofile2.desktop.ListsView({el:this.$el.find(".userLists"),listBar:this.$el.find(".listsBar"),user:this.user_})).decorate();this.tipsView_=(new fourSq.userprofile2.desktop.TipsView({el:this.$el.find(".userTips"),
user:this.user_,tips:this.tips_,useTipUpvotes:this.useTipUpvotes_})).decorate();this.user_.pageInfo&&0<this.user_.pageInfo.locationsCount&&(this.locationsView_=new fourSq.userprofile2.desktop.LocationsView({el:this.$el.find(".chainLocations"),user:this.user_}));this.$moreInfoLink_=this.$el.find(".userMoreInfoLink")[0]},attachEvents_:function(){this.history_.onChange(fourSq.bind(this.refreshCurrentState_,this));this.userInfoView_.on(fourSq.userprofile2.desktop.UserInfoView.Events.TIPS_CLICK,fourSq.curry(this.showAllTips_,
this,!0));this.userInfoView_.on(fourSq.userprofile2.desktop.UserInfoView.Events.LISTS_CLICK,fourSq.curry(this.showAllCity_,this,void 0,!0));this.userInfoView_.on(fourSq.userprofile2.desktop.UserInfoView.Events.FOLLOWERS_CLICK,fourSq.curry(this.showFollowers_,this,!0));this.userInfoView_.on(fourSq.userprofile2.desktop.UserInfoView.Events.FOLLOWING_CLICK,fourSq.curry(this.showFollowing_,this,!0));this.userInfoView_.on(fourSq.userprofile2.desktop.UserInfoView.Events.LOCATIONS_CLICK,fourSq.curry(this.showLocations_,
this,!0));this.listsView_.on(fourSq.userprofile2.desktop.ListsView.Events.SEE_ALL_LISTS_CLICK,fourSq.curry(this.showAllCity_,this,void 0,!0));this.tipsView_.on(fourSq.userprofile2.desktop.TipsView.Events.SEE_ALL_TIPS_CLICK,fourSq.curry(this.showAllTips_,this,!0));this.citiesView_.on(fourSq.userprofile2.desktop.CitiesView.Events.SEE_ALL_CITY_CLICK,fourSq.bind(function(a){this.showAllCity_(a,!0)},this));this.listsView_.on(fourSq.userprofile2.desktop.ListsView.Events.SEE_ALL_CITY_CLICK,fourSq.bind(function(a){this.showAllCity_(a,
!0)},this));this.$el.find(".userStatsTitle .name, .listsBar .listCityUser").click(fourSq.bind(this.toDefaultView_,this));fourSq.isDefinedAndNotNull(this.$moreInfoLink_)&&(this.moreInfoFlyout_=new fourSq.userprofile2.desktop.UserProfileMoreInfoFlyout({anchor:this.$moreInfoLink_,user:this.user_}))},showFollowers_:function(a){this.hideAll_();this.followersView_.showAll();a&&this.updateUrl_({all:"followers"})},showFollowing_:function(a){this.hideAll_();this.followingView_.showAll();a&&this.updateUrl_({all:"following"})},
showAllTips_:function(a){this.hideAll_();this.tipsView_.showAll();a&&this.updateUrl_({all:"tips"})},showAllCity_:function(a,b){this.hideAll_();this.listsView_.showAll(a);b&&(a?this.updateUrl_({all:"lists",geoId:a}):this.updateUrl_({all:"lists"}))},showLocations_:function(a){this.hideAll_();this.locationsView_.showMap();a&&this.updateUrl_({all:"locations"})},showDefaultView_:function(){this.hideAll_();this.citiesView_.show();this.tipsView_.showDefault();this.listsView_.showDefault()},hideAll_:function(){this.citiesView_.hide();
this.listsView_.hide();this.tipsView_.hide();this.followingView_.hide();this.followersView_.hide();this.locationsView_&&this.locationsView_.hide()},toDefaultView_:function(){if(this.queryString_.get("all")||this.queryString_.get("geoId"))this.updateUrl_(),this.showDefaultView_()},updateUrl_:function(a,b){a=a||{};this.queryString_.setAll(a);a.all||this.queryString_.remove("all");a.geoId||this.queryString_.remove("geoId");var c=window.location.pathname,d=this.queryString_.toDisplayString(),c=d?c+"?"+
d:c;b?this.history_.replace(c,a):this.history_.push(c,a)},refreshCurrentState_:function(a){a=a||{};if(a.all)switch(a.all){case "followers":this.showFollowers_();break;case "following":this.showFollowing_();break;case "lists":this.showAllCity_(a.geoId);break;case "tips":this.showAllTips_();break;case "locations":this.showLocations_()}else this.showDefaultView_()},pageViewName:function(){return fourSq.stats.action.View.USER_PROFILE_2}});fourSq.userprofile2.desktop.UserProfileMoreInfoFlyout=function(a){};fourSq.userprofile2.desktop.UserProfileMoreInfoFlyout=fourSq.views.GenericFlyout.extend({initialize:function(a){a.direction=fourSq.ui.Flyout.Directions.BELOWLEFT;a.forceDirection=!0;fourSq.userprofile2.desktop.UserProfileMoreInfoFlyout.__super__.initialize.call(this,a);this.user_=a.user;this.flyoutExtraClass="userProfileMoreInfoFlyout"},getRenderedContentsHtml:function(){return helpers.user.userProfileMoreInfo({user:this.user_})}});fourSq.userprofile2.desktop.UserInfoView=function(a){};
fourSq.userprofile2.desktop.UserInfoView=fourSq.ui.View.extend({initialize:function(a){fourSq.userprofile2.desktop.UserInfoView.__super__.initialize.call(this,a);this.user_=a.user;this.$userPic_=this.$followerCountStat_=this.$locations_=this.$lists_=this.$following_=this.$followers_=this.$tips_=null;this.followerCount_=this.user_.followers.count;this.followButtonView_=(new fourSq.userprofile2.desktop.FollowButtonView({el:this.$el.find(".followButtonContainer"),userId:this.user_.id})).decorate()},
decorate:function(){this.$tips_=this.$el.find(".stats .tips");this.$followers_=this.$el.find(".stats .followers");this.$following_=this.$el.find(".stats .following");this.$lists_=this.$el.find(".stats .lists");this.$locations_=this.$el.find(".stats .locations");this.$followerCountStat_=this.$el.find(".stats .followers");this.$userPic_=this.$el.find(".userPic img");this.attachEvents_();this.setupReportUserLink_();return this},attachEvents_:function(){this.$tips_.click(fourSq.curry(this.trigger,this,
fourSq.userprofile2.desktop.UserInfoView.Events.TIPS_CLICK));this.$followers_.click(fourSq.curry(this.trigger,this,fourSq.userprofile2.desktop.UserInfoView.Events.FOLLOWERS_CLICK));this.$following_.click(fourSq.curry(this.trigger,this,fourSq.userprofile2.desktop.UserInfoView.Events.FOLLOWING_CLICK));this.$lists_.click(fourSq.curry(this.trigger,this,fourSq.userprofile2.desktop.UserInfoView.Events.LISTS_CLICK));this.$locations_.click(fourSq.curry(this.trigger,this,fourSq.userprofile2.desktop.UserInfoView.Events.LOCATIONS_CLICK));
this.$userPic_.click(fourSq.bind(this.openPhotoViewer_,this));this.followButtonView_.on(fourSq.userprofile2.desktop.FollowButtonView.Events.FOLLOW,function(){this.followerCount_++;this.rerenderFollowerCount_()},this);this.followButtonView_.on(fourSq.userprofile2.desktop.FollowButtonView.Events.UNFOLLOW,function(){this.followerCount_--;this.rerenderFollowerCount_()},this)},openPhotoViewer_:function(){fourSq.views.PhotoViewer.openSinglePhoto(this.user_.photo,!1,!1)},setupReportUserLink_:function(){this.reportUserView_=
(new fourSq.userprofile2.desktop.ReportUserView({el:this.$el.find(".flagUser"),user:this.user_})).decorate()},rerenderFollowerCount_:function(){var a=templates.fourSq.newdrag.page.userprofile2.desktop.users.followersCount({count:this.followerCount_});this.$followerCountStat_.find(".stat").replaceWith(a)}},{Events:{TIPS_CLICK:"TIPS_CLICK",FOLLOWERS_CLICK:"FOLLOWERS_CLICK",FOLLOWING_CLICK:"FOLLOWING_CLICK",LISTS_CLICK:"LISTS_CLICK",LOCATIONS_CLICK:"LOCATIONS_CLICK"}});fourSq.userprofile2.desktop.UserListView=function(a){};
fourSq.userprofile2.desktop.UserListView=fourSq.userprofile2.common.SectionView.extend({fetchService:null,initialize:function(a){fourSq.userprofile2.desktop.UserListView.__super__.initialize.call(this,a);this.user_=a.user;this.$loadMore_=this.$loadingSpinner_=this.$usersContainer=null;this.afterMarker_="";this.initialLoad_=!0},decorate:function(){this.$usersContainer=this.$el.find(".usersContainer");this.$loadingSpinner_=this.$el.find(".loadingSpinner");this.$loadMore_=this.$el.find(".loadMore");
this.attachEvents_();return this},attachEvents_:function(){this.$loadMore_.click(fourSq.bind(this.fetchUsers_,this))},fetchUsers_:function(){var a={id:this.user_.id,limit:fourSq.userprofile2.desktop.UserListView.USERS_TO_LOAD_PER_REQUEST,afterMarker:this.afterMarker_,m:"foursquare"},b=fourSq.bind(function(a){this.afterMarker_=a.trailingMarker;this.$loadingSpinner_.hide();this.refreshUsersList_(a);this.$loadMore_.toggle(a.moreData)},this),c=fourSq.bind(function(){fourSq.debug.error("Failed to load user list page ");
this.$loadingSpinner_.hide()},this);this.$loadingSpinner_.show();this.fetchService(a,b,c)},refreshUsersList_:function(a){_.each((a.followers||a.following).items,function(a){this.$usersContainer.append(templates.fourSq.newdrag.page.userprofile2.desktop.users.userCard(a))},this)},showAll:function(){this.show();this.initialLoad_&&(this.fetchUsers_(),this.initialLoad_=!1)}},{USERS_TO_LOAD_PER_REQUEST:197});fourSq.userprofile2.desktop.FollowersView=function(a,b){};fourSq.userprofile2.desktop.FollowersView=fourSq.userprofile2.desktop.UserListView.extend({fetchService:fourSq.api.services.User.followersB});fourSq.userprofile2.desktop.FollowingView=function(a,b){};fourSq.userprofile2.desktop.FollowingView=fourSq.userprofile2.desktop.UserListView.extend({fetchService:fourSq.api.services.User.following});fourSq.userprofile2.desktop.CitiesView=function(a){};fourSq.userprofile2.desktop.CitiesView=fourSq.userprofile2.common.SectionView.extend({initialize:function(a){fourSq.userprofile2.desktop.CitiesView.__super__.initialize.call(this,a)},decorate:function(){this.$el.on("click",".cityCard",fourSq.bind(this.onSeeAllCity_,this));return this},onSeeAllCity_:function(a){a=$(a.target).closest(".cityCard").attr("data-id");this.trigger(fourSq.userprofile2.desktop.CitiesView.Events.SEE_ALL_CITY_CLICK,a)}},{Events:{SEE_ALL_CITY_CLICK:"SEE_ALL_CITY_CLICK"}});fourSq.userprofile2.desktop.ListsView=function(a){};
fourSq.userprofile2.desktop.ListsView=fourSq.userprofile2.common.SectionView.extend({initialize:function(a){fourSq.userprofile2.desktop.ListsView.__super__.initialize.call(this,a);this.user_=a.user;this.$paginationContainer=this.$listsYoursContainer_=this.$listsFollowedContainer_=this.$listsCreatedContainer_=null;this.$listBar_=a.listBar;this.listsFilterView_=(new fourSq.userprofile2.desktop.ListsFilterView({el:this.$el.find(".listsFilterSection"),user:this.user_})).decorate();this.cityPickerView_=
(new fourSq.userprofile2.desktop.CityPickerView({el:this.$listBar_.find(".listCityLabel")})).decorate();this.createListDialogView_=new fourSq.userprofile2.desktop.CreateListDialogView;this.paginationControl_=null},decorate:function(){this.$listsCreatedContainer_=this.$el.find(".listsContainerCreated");this.$listsFollowedContainer_=this.$el.find(".listsContainerFollowed");this.$listsYoursContainer_=this.$el.find(".listsContainerYours");this.$paginationContainer=this.$el.find(".paginationContainer");
this.groupMetaData_={};this.groupMetaData_[fourSq.userprofile2.desktop.ListsFilterView.Group.CREATED]={container:this.$listsCreatedContainer_};this.groupMetaData_[fourSq.userprofile2.desktop.ListsFilterView.Group.FOLLOWED]={container:this.$listsFollowedContainer_};this.groupMetaData_[fourSq.userprofile2.desktop.ListsFilterView.Group.YOURS]={container:this.$listsYoursContainer_};this.attachEvents_();this.setUpInitialLists_();return this},attachEvents_:function(){var a=fourSq.userprofile2.desktop.ListsView.Events.SEE_ALL_LISTS_CLICK;
this.$el.find(".seeAll, .userListsHeader .sectionHeader").click(fourSq.curry(this.trigger,this,a));this.listsFilterView_.on(fourSq.userprofile2.desktop.ListsFilterView.Events.BEFORE_FILTER_LISTS,fourSq.bind(this.beforeFilterLists_,this));this.listsFilterView_.on(fourSq.userprofile2.desktop.ListsFilterView.Events.FILTER_CREATED_LISTS,fourSq.curry(this.filterLists_,this,fourSq.userprofile2.desktop.ListsFilterView.Group.CREATED));this.listsFilterView_.on(fourSq.userprofile2.desktop.ListsFilterView.Events.FILTER_FOLLOWED_LISTS,
fourSq.curry(this.filterLists_,this,fourSq.userprofile2.desktop.ListsFilterView.Group.FOLLOWED));this.listsFilterView_.on(fourSq.userprofile2.desktop.ListsFilterView.Events.FILTER_YOURS_LISTS,fourSq.curry(this.filterLists_,this,fourSq.userprofile2.desktop.ListsFilterView.Group.YOURS));this.cityPickerView_.on(fourSq.userprofile2.desktop.CityPickerView.Events.SELECT,fourSq.curry(this.trigger,this,fourSq.userprofile2.desktop.ListsView.Events.SEE_ALL_CITY_CLICK));this.$listBar_.find(".createListBtn").click(fourSq.bind(this.createListDialogView_.show,
this.createListDialogView_))},setUpInitialLists_:function(){_.each(this.user_.lists.items,function(a){(new fourSq.userprofile2.desktop.ListCardView({el:this.$el.find('.listCard[data-id\x3d"'+a.id+'"]'),user:this.user_,list:a})).decorate()},this)},fetchLists_:function(a,b,c){var d=$.Deferred();a={id:this.user_.id,geoId:c,group:b,limit:fourSq.userprofile2.desktop.ListsView.LISTS_TO_LOAD_PER_REQUEST,offset:a};var e=fourSq.bind(function(a){d.resolve(a);this.refreshList_(a,b,c)},this),f=fourSq.bind(function(){d.reject();
fourSq.debug.error("Failed to load lists page ")},this);fourSq.api.services.User.lists(a,e,f);return d.promise()},refreshList_:function(a,b,c){this.groupMetaData_[b].container.empty();_.each(a.items,function(a){a=(new fourSq.userprofile2.desktop.ListCardView({user:a.user,list:a,geoId:c,group:b})).decorate();this.groupMetaData_[b].container.append(a.$el)},this);b===fourSq.userprofile2.desktop.ListsFilterView.Group.CREATED?this.listsFilterView_.renderCreatedLists(a):b===fourSq.userprofile2.desktop.ListsFilterView.Group.FOLLOWED?
this.listsFilterView_.renderFollowedLists(a):b===fourSq.userprofile2.desktop.ListsFilterView.Group.YOURS&&this.listsFilterView_.renderYoursLists(a)},beforeFilterLists_:function(){var a=this.listsFilterView_.getCurrentFilter(),b=this.paginationControl_.getPage();this.groupMetaData_[a].page=b},filterLists_:function(a){a=this.groupMetaData_[a];_.each(this.groupMetaData_,function(a){a.container.hide()});a.container.show();this.paginationControl_.setMaxPages(this.getMaxPages_(a.count));this.paginationControl_.setPage(a.page||
0,!0)},setupListsPaginationView_:function(a){a=this.getMaxPages_(a);this.paginationControl_?this.paginationControl_.setMaxPages(a):(this.paginationControl_=(new fourSq.ui.PaginationControl({el:this.$paginationContainer,maxPages:a})).decorate(),this.paginationControl_.on(fourSq.ui.PaginationControl.Events.JUMP_TO_PAGE,fourSq.bind(function(a){var c=this.listsFilterView_.getCurrentFilter();a=(a-1)*fourSq.userprofile2.desktop.ListsView.LISTS_TO_LOAD_PER_REQUEST;c&&(this.groupMetaData_[c].container.empty(),
this.$el.addClass("loading"),this.fetchLists_(a,c,this.currentGeoId_).then(fourSq.bind(function(){this.$el.removeClass("loading")},this)))},this)))},showAll:function(a){this.currentGeoId_=a;this.show();this.$el.addClass("all");this.$listBar_.show();this.cityPickerView_.set(a);this.paginationControl_&&this.paginationControl_.reset();_.each(this.groupMetaData_,function(a){a.container.hide();a.page=0});this.$el.addClass("loading");this.$paginationContainer.hide();var b=this.fetchLists_(0,fourSq.userprofile2.desktop.ListsFilterView.Group.YOURS,
a),c=this.fetchLists_(0,fourSq.userprofile2.desktop.ListsFilterView.Group.CREATED,a);a=this.fetchLists_(0,fourSq.userprofile2.desktop.ListsFilterView.Group.FOLLOWED,a);$.when(b,c,a).then(fourSq.bind(function(a,b,c){this.$el.removeClass("loading");$(window).scrollTop(0);b.count?(this.setupListsPaginationView_(b.count),this.listsFilterView_.setFilter(fourSq.userprofile2.desktop.ListsFilterView.Group.CREATED),this.$listsCreatedContainer_.show()):a.count?(this.setupListsPaginationView_(a.count),this.listsFilterView_.setFilter(fourSq.userprofile2.desktop.ListsFilterView.Group.YOURS),
this.$listsYoursContainer_.show()):c.count&&(this.setupListsPaginationView_(c.count),this.listsFilterView_.setFilter(fourSq.userprofile2.desktop.ListsFilterView.Group.FOLLOWED),this.$listsFollowedContainer_.show());this.groupMetaData_[fourSq.userprofile2.desktop.ListsFilterView.Group.CREATED].count=b.count;this.groupMetaData_[fourSq.userprofile2.desktop.ListsFilterView.Group.FOLLOWED].count=c.count;this.groupMetaData_[fourSq.userprofile2.desktop.ListsFilterView.Group.YOURS].count=a.count},this))},
showDefault:function(){this.show();this.$el.removeClass("all");_.each(this.groupMetaData_,function(a){a.container.hide()});this.$listBar_.hide();this.$paginationContainer.hide()},hide:function(){fourSq.userprofile2.common.SectionView.prototype.hide.apply(this,arguments);this.$listBar_.hide()},getMaxPages_:function(a){return Math.ceil(a/fourSq.userprofile2.desktop.ListsView.LISTS_TO_LOAD_PER_REQUEST)}},{LISTS_TO_LOAD_PER_REQUEST:18,Events:{SEE_ALL_LISTS_CLICK:"SEE_ALL_LISTS_CLICK",SEE_ALL_CITY_CLICK:"SEE_ALL_CITY_CLICK"}});fourSq.userprofile2.desktop.TipsView=function(a){};
fourSq.userprofile2.desktop.TipsView=fourSq.userprofile2.common.SectionView.extend({initialize:function(a){fourSq.userprofile2.desktop.TipsView.__super__.initialize.call(this,a);this.user_=a.user;this.tips_=a.tips;this.useTipUpvotes_=a.useTipUpvotes;this.paginationControl_=this.$paginationContainer=this.$loadingSpinner_=this.$allTipsContainer_=null;this.tipCards_=[]},decorate:function(){this.$allTipsContainer_=this.$el.find(".tipsContainerAll");this.$loadingSpinner_=this.$el.find(".loadingSpinner");
this.$paginationContainer=this.$el.find(".paginationContainer");this.attachEvents_();this.setUpInitialTips_();return this},attachEvents_:function(){var a=fourSq.userprofile2.desktop.TipsView.Events.SEE_ALL_TIPS_CLICK;this.$el.find(".seeAll, .sectionHeader").click(fourSq.curry(this.trigger,this,a))},setupTipPaginationView_:function(){if(!this.paginationControl_){var a=fourSq.userprofile2.desktop.TipsView.TIPS_TO_LOAD_PER_REQUEST;this.paginationControl_=(new fourSq.ui.PaginationControl({el:this.$paginationContainer,
maxPages:Math.ceil(this.tips_.count/a)})).decorate();this.paginationControl_.on(fourSq.ui.PaginationControl.Events.JUMP_TO_PAGE,function(b){fourSq.debug.debug("jumping to page "+b);this.fetchTips_((b-1)*a)},this)}},setUpInitialTips_:function(){_.each(this.tips_.items,function(a){(new fourSq.userprofile2.desktop.TipCardView({el:this.$el.find('.tipCard[data-id\x3d"'+a.id+'"]'),user:this.user_,tip:a,useTipUpvotes:this.useTipUpvotes_})).decorate()},this)},fetchTips_:function(a){a={id:this.user_.id,limit:fourSq.userprofile2.desktop.TipsView.TIPS_TO_LOAD_PER_REQUEST,
offset:a,sort:"recent",m:"foursquare"};var b=fourSq.bind(function(a){this.$loadingSpinner_.hide();this.refreshTipList_(a);$(window).scrollTop(0)},this),c=fourSq.bind(function(){fourSq.debug.error("Failed to load tips page ");this.$loadingSpinner_.hide()},this);this.$loadingSpinner_.show();$(window).scrollTop(0);fourSq.api.services.User.tips(a,b,c)},refreshTipList_:function(a){_.invoke(this.tipCards_,"destroy");this.tipCards_=[];_.each(a.items,function(a){a=(new fourSq.userprofile2.desktop.TipCardView({user:this.user_,
tip:a,useTipUpvotes:this.useTipUpvotes_})).decorate();this.tipCards_.push(a);this.$allTipsContainer_.append(a.$el)},this)},showAll:function(){this.show();this.$el.addClass("all");this.$paginationContainer.show();this.setupTipPaginationView_();this.paginationControl_.setPage(0)},showDefault:function(){this.show();this.$el.removeClass("all");this.$paginationContainer.hide()}},{TIPS_TO_LOAD_PER_REQUEST:18,Events:{SEE_ALL_TIPS_CLICK:"SEE_ALL_TIPS_CLICK"}});fourSq.userprofile2.desktop.FollowButtonView=function(a){};
fourSq.userprofile2.desktop.FollowButtonView=fourSq.ui.View.extend({initialize:function(a){fourSq.userprofile2.desktop.FollowButtonView.__super__.initialize.call(this,a);this.userId_=a.userId;this.$unfollowButton_=this.$followButton_=null},decorate:function(){this.$followButton_=this.$el.find("button.follow");this.$unfollowButton_=this.$el.find("button.unfollow");this.$followButton_.click(fourSq.bind(this.follow_,this));this.$unfollowButton_.click(fourSq.bind(this.unfollow_,this));this.$el.mouseleave(fourSq.curry(this.setRecentlyFollowed_,
this,!1));return this},follow_:function(){var a=fourSq.bind(function(){return{element:fourSq.stats.action.Element.FOLLOW,ids:{targetUserId:this.userId_}}},this),b=fourSq.bind(function(){var b=fourSq.stats.Action.build(fourSq.stats.action.Action.ADD,a());fourSq.stats.logActions(b);fourSq.debug.debug("Successfully followed user.")},this),c=fourSq.bind(function(){this.showFollowButton_();this.hideUnfollowButton_();this.trigger(fourSq.userprofile2.desktop.FollowButtonView.Events.UNFOLLOW)},this);this.hideFollowButton_();
this.showUnfollowButton_();this.trigger(fourSq.userprofile2.desktop.FollowButtonView.Events.FOLLOW);fourSq.api.services.User.createFollow({userId:this.userId_,m:"batman"},b,c);this.setRecentlyFollowed_(!0)},unfollow_:function(){var a=fourSq.bind(function(){this.hideFollowButton_();this.showUnfollowButton_();this.trigger(fourSq.userprofile2.desktop.FollowButtonView.Events.FOLLOW)},this);this.hideUnfollowButton_();this.showFollowButton_();this.trigger(fourSq.userprofile2.desktop.FollowButtonView.Events.UNFOLLOW);
fourSq.api.services.User.unfollow({userId:this.userId_,m:"batman"},function(){fourSq.debug.debug("Successfully unfollowed user.")},a)},showFollowButton_:function(){this.$el.addClass("follow")},hideFollowButton_:function(){this.$el.removeClass("follow")},showUnfollowButton_:function(){this.$el.addClass("unfollow")},setRecentlyFollowed_:function(a){this.$el.toggleClass("recentlyFollowed",a)},hideUnfollowButton_:function(){this.$el.removeClass("unfollow")}},{Events:{FOLLOW:"FollowButtonView:FOLLOW",
UNFOLLOW:"FollowButtonView:UNFOLLOW"}});fourSq.userprofile2.desktop.TipCardView=function(a){};
fourSq.userprofile2.desktop.TipCardView=fourSq.ui.View.extend({initialize:function(a){fourSq.userprofile2.desktop.TipCardView.__super__.initialize.call(this,a);this.user_=a.user;this.tip_=a.tip;this.useTipUpvotes_=a.useTipUpvotes;this.likeButton_=this.saveButton_=null;this.tipPhotos_=this.getTipPhotos_();this.tipPhotos_.length&&(this.photoViewer_=new fourSq.views.PhotoViewer({photos:this.tipPhotos_}))},decorate:function(){this.$el.children().length||this.createElement_();this.createButtons_();this.setupTipDateLink_();
this.setupPhotoViewer_();return this},createElement_:function(){var a=templates.fourSq.newdrag.page.userprofile2.desktop.tips.tipCard({user:this.user_,tip:this.tip_,useTipUpvotes:this.useTipUpvotes_});this.setEl_($(a))},getTipPhotos_:function(){return this.tip_.photo?[this.tip_.photo]:this.tip_.venue.photos&&this.tip_.venue.photos.groups&&this.tip_.venue.photos.groups[0]?this.tip_.venue.photos.groups[0].items:[]},createButtons_:function(){this.tip_.venue&&(this.saveButton_=(new fourSq.ui.save.SaveButton({venue:this.tip_.venue,
tip:this.tip_,savedStateIsOnTip:!0,el:this.$el.find(".saveButton"),listService:new fourSq.ui.save.ListServiceProxy})).decorate(),this.useTipUpvotes_||(this.likeButton_=(new fourSq.ui.liking.LikeButtonWithFallback({el:this.$el.find(".likeButton"),isLiked:this.tip_.like,likes:this.tip_.likes,controller:new fourSq.api.controllers.TipFeedbackController(this.tip_.id),template:templates.fourSq.ui.liking.likeButton})).render()))},setupTipDateLink_:function(){this.$el.find(".tipDate").click(fourSq.bind(function(a){var b=
$(a.currentTarget),c="/item/"+this.tip_.id;fourSq.util.clickOpensInNewTab(a,b)?window.open(c,"tips-page"):fourSq.util.redirect(c)},this))},setupPhotoViewer_:function(){1===this.tipPhotos_.length?this.$el.find(".tipPhoto").click(fourSq.bind(function(){this.photoViewer_.open(0)},this)):1<this.tipPhotos_.length&&this.$el.find(".tipSubPhoto").click(fourSq.bind(function(a){a=$(a.target).index();this.photoViewer_.open(a)},this))},destroy:function(){this.$el.remove()}});fourSq.userprofile2.desktop.ListCardView=function(a){};
fourSq.userprofile2.desktop.ListCardView=fourSq.ui.View.extend({initialize:function(a){fourSq.userprofile2.desktop.ListCardView.__super__.initialize.call(this,a);this.user_=a.user;this.list_=a.list;this.geoId_=a.geoId},decorate:function(){this.$el.children().length||this.createElement_();this.maybeCreateFollowButton_();return this},createElement_:function(){var a=templates.fourSq.newdrag.page.userprofile2.desktop.lists.listCard({user:this.user_,list:this.list_,geoId:this.geoId_});this.setEl_($(a))},
maybeCreateFollowButton_:function(){var a=fourSq.api.models.companion.user.UserUtil.currentUser(),b=!_.contains(["todos","liked"],this.list_.type),a=!a||a.id!==this.user_.id,c="billboard"===this.list_.guideType;b&&a&&!c&&(this.followButton_=new fourSq.ui.list.FollowButton({tipList:this.list_}),this.$el.find(".listHeader").append(this.followButton_.$el))},destroy:function(){this.$el.remove()}});fourSq.userprofile2.desktop.ReportUserView=function(a){};
fourSq.userprofile2.desktop.ReportUserView=fourSq.ui.View.extend({initialize:function(a){this.user_=a.user;this.flagDialog_=this.$submitButton_=this.$dialogContents_=null},decorate:function(){this.createDialogContents_();this.decorateDialogContents_();this.$el.find(".flagUserModalLauncher").click(fourSq.bind(this.showDialog_,this));return this},createDialogContents_:function(){var a=0;fourSq.api.models.companion.user.UserUtil.isLoggedIn()&&fourSq.api.models.companion.user.UserUtil.currentUser().superuser&&
(a=fourSq.api.models.companion.user.UserUtil.currentUser().superuser);this.$dialogContents_=$(templates.fourSq.newdrag.page.userprofile2.desktop.users.flagUserDialog({firstName:this.user_.firstName,superuser:a}))},decorateDialogContents_:function(){this.$submitButton_=this.$dialogContents_.find(".flagUserSubmit");this.$submitButton_.click(fourSq.bind(this.handleSubmit_,this));this.$dialogContents_.find(".woeTypeRadio").click(fourSq.bind(this.radioButtonClick_,this))},handleSubmit_:function(){var a=
this.$dialogContents_.find('input[name\x3d"woeType"]:checked').val();if(fourSq.isDefinedAndNotNull(a)){var b=this.$dialogContents_.find(".commentBox").val();fourSq.api.services.User.flag(this.user_.id,a,b,fourSq.bind(this.processFlag_,this),fourSq.bind(this.onError_,this))}},radioButtonClick_:function(){this.$submitButton_.removeClass("disabled")},processFlag_:function(){this.flagDialog_.close();this.$el.empty();this.$el.append(templates.fourSq.newdrag.page.userprofile2.desktop.users.flaggedBox())},
onError_:function(){this.flagDialog_.close();this.$el.empty();this.$el.append(templates.fourSq.newdrag.page.userprofile2.desktop.users.actionErrorBox())},showDialog_:function(){this.flagDialog_=(new fourSq.ui.dialog.Dialog({contentElement:this.$dialogContents_})).show()}});fourSq.userprofile2.desktop.ListsFilterView=function(a){};
fourSq.userprofile2.desktop.ListsFilterView=fourSq.ui.View.extend({initialize:function(a){fourSq.userprofile2.desktop.ListsFilterView.__super__.initialize.call(this,a);this.user_=a.user;this.activeFilter_=null},decorate:function(){var a=templates.fourSq.newdrag.page.userprofile2.desktop.lists.listsFilter({user:this.user_});this.$el.empty().append($(a));this.$el.on("click",".createdFilter:not(.active)",fourSq.bind(this.filterCreatedlists_,this));this.$el.on("click",".followFilter:not(.active)",fourSq.bind(this.filterFollowedlists_,
this));this.$el.on("click",".yoursFilter:not(.active)",fourSq.bind(this.filterYourslists_,this));return this},filterCreatedlists_:function(a){this.trigger(fourSq.userprofile2.desktop.ListsFilterView.Events.BEFORE_FILTER_LISTS);this.activeFilter_=fourSq.userprofile2.desktop.ListsFilterView.Group.CREATED;this.$el.find(".active").removeClass("active");$(a.target).addClass("active");this.trigger(fourSq.userprofile2.desktop.ListsFilterView.Events.FILTER_CREATED_LISTS)},filterFollowedlists_:function(a){this.trigger(fourSq.userprofile2.desktop.ListsFilterView.Events.BEFORE_FILTER_LISTS);
this.activeFilter_=fourSq.userprofile2.desktop.ListsFilterView.Group.FOLLOWED;this.$el.find(".active").removeClass("active");$(a.target).addClass("active");this.trigger(fourSq.userprofile2.desktop.ListsFilterView.Events.FILTER_FOLLOWED_LISTS)},filterYourslists_:function(a){this.trigger(fourSq.userprofile2.desktop.ListsFilterView.Events.BEFORE_FILTER_LISTS);this.activeFilter_=fourSq.userprofile2.desktop.ListsFilterView.Group.YOURS;this.$el.find(".active").removeClass("active");$(a.target).addClass("active");
this.trigger(fourSq.userprofile2.desktop.ListsFilterView.Events.FILTER_YOURS_LISTS)},getCurrentFilter:function(){return this.activeFilter_},setFilter:function(a){var b;if(a===fourSq.userprofile2.desktop.ListsFilterView.Group.CREATED)b=".createdFilter";else if(a===fourSq.userprofile2.desktop.ListsFilterView.Group.FOLLOWED)b=".followedFilter";else if(a===fourSq.userprofile2.desktop.ListsFilterView.Group.YOURS)b=".yoursFilter";else return;this.$el.find(".active").removeClass("active");this.$el.find(b).addClass("active");
this.activeFilter_=a},renderCreatedLists:function(a){var b=this.$el.find(".createdFilter");a=templates.fourSq.newdrag.page.userprofile2.desktop.lists.listsFilterCreated({user:this.user_,lists:a,active:b.hasClass("active")});b.replaceWith($(a)).remove()},renderFollowedLists:function(a){var b=this.$el.find(".followFilter");a=templates.fourSq.newdrag.page.userprofile2.desktop.lists.listsFilterFollowed({user:this.user_,lists:a,active:b.hasClass("active")});b.replaceWith($(a)).remove()},renderYoursLists:function(a){var b=
this.$el.find(".yoursFilter");a=templates.fourSq.newdrag.page.userprofile2.desktop.lists.listsFilterYours({user:this.user_,lists:a,active:b.hasClass("active")});b.replaceWith($(a)).remove()}},{Events:{BEFORE_FILTER_LISTS:"BEFORE_FILTER_LISTS",FILTER_CREATED_LISTS:"FILTER_CREATED_LISTS",FILTER_FOLLOWED_LISTS:"FILTER_FOLLOWED_LISTS",FILTER_YOURS_LISTS:"FILTER_YOURS_LISTS"}});fourSq.userprofile2.desktop.ListsFilterView.Group={CREATED:"created",FOLLOWED:"followed",YOURS:"yours"};fourSq.userprofile2.desktop.CityPickerView=function(a){};
fourSq.userprofile2.desktop.CityPickerView=fourSq.ui.View.extend({initialize:function(a){fourSq.userprofile2.desktop.CityPickerView.__super__.initialize.call(this,a);this.isOpened_=!1;this.$handle=this.$el.find(".listsCity");this.$dropdown_=this.$el.find("ul")},decorate:function(){this.$handle.click(fourSq.bind(this.toggle,this)).blur(fourSq.bind(this.close,this));this.$dropdown_.find("li").on("mousedown",fourSq.bind(this.onSelect_,this));return this},toggle:function(){this.isOpened_?this.close():
this.open()},onSelect_:function(a){a=$(a.target);var b=a.attr("data-id");this.$handle.text(a.text());this.trigger(fourSq.userprofile2.desktop.CityPickerView.Events.SELECT,b)},set:function(a){a=a?this.$dropdown_.find('[data-id\x3d"'+a+'"]'):this.$dropdown_.find(":not([data-id])");this.$handle.text(a.text())},open:function(){this.$dropdown_.show();this.isOpened_=!0},close:function(){this.$dropdown_.hide();this.isOpened_=!1}},{Events:{SELECT:"SELECT"}});fourSq.userprofile2.desktop.CreateListDialogView=function(a,b){};
fourSq.userprofile2.desktop.CreateListDialogView=fourSq.ui.dialog.Dialog.extend({initialize:function(a){a=a||{};a.contentElement=$(templates.fourSq.newdrag.page.userprofile2.desktop.lists.createListDialog());fourSq.userprofile2.desktop.CreateListDialogView.__super__.initialize.call(this,a)},attachEvents_:function(){this.$input_=this.$el.find(".createListName");this.$createButton_=this.$el.find(".createListButton");this.$spinner_=this.$el.find(".loadingSpinner");this.$input_.keyup(fourSq.bind(this.onKeyUp_,
this));this.$createButton_.click(fourSq.bind(this.createList_,this));return this},onKeyUp_:function(a){13===a.keyCode?this.createList_():this.$createButton_.toggleClass("disabledButton",!this.$input_.val().length)},createList_:function(){var a=$.trim(this.$input_.val());a.length&&(this.$createButton_.addClass("disabledButton"),this.$spinner_.show(),fourSq.api.services.List.add({name:a},fourSq.bind(this.onListCreateSuccess_,this),fourSq.bind(this.onListCreateFail_,this)))},onListCreateSuccess_:function(a){fourSq.util.redirect(a.canonicalPath+
"/edit")},onListCreateFail_:function(){this.$createButton_.removeClass("disabledButton");this.$spinner_.hide()},show:function(){fourSq.ui.dialog.Dialog.prototype.show.apply(this,arguments);this.eventsAttached_||(this.attachEvents_(),this.eventsAttached_=!0);this.$input_.focus();return this}});fourSq.userprofile2.desktop.LocationsView=function(a){};fourSq.userprofile2.desktop.LocationsView=fourSq.userprofile2.common.SectionView.extend({initialize:function(a){fourSq.userprofile2.desktop.LocationsView.__super__.initialize.call(this,a);this.user_=a.user},showMap:function(){this.show();this.chainMap_||(this.chainMap_=new fourSq.views.ChainMap({id:this.user_.id,serviceCall:fourSq.api.services.Page.venues,numVenues:this.user_.pageInfo.locationsCount}),this.chainMap_.initLoad())}});"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.newdrag&&(templates.fourSq.newdrag={});"undefined"==typeof templates.fourSq.newdrag.page&&(templates.fourSq.newdrag.page={});"undefined"==typeof templates.fourSq.newdrag.page.userprofile2&&(templates.fourSq.newdrag.page.userprofile2={});"undefined"==typeof templates.fourSq.newdrag.page.userprofile2.desktop&&(templates.fourSq.newdrag.page.userprofile2.desktop={});
"undefined"==typeof templates.fourSq.newdrag.page.userprofile2.desktop.tips&&(templates.fourSq.newdrag.page.userprofile2.desktop.tips={});templates.fourSq.newdrag.page.userprofile2.desktop.tips.tipHeaderButtons_=function(a,b){return'\x3cdiv class\x3d"tipHeader"\x3e'+templates.fourSq.ui.save.doubleSaveButton(null)+(a.useTipUpvotes?"":'\x3cdiv class\x3d"likeButton"\x3e\x3c/div\x3e')+"\x3c/div\x3e"};
templates.fourSq.newdrag.page.userprofile2.desktop.tips.tipCard=function(a,b){var c="",d=a.tip.photo?helpers.photo.nearestBiggerPhoto({photo:a.tip.photo,targetWidth:340,targetHeight:170}):"",e=(null==a.tip.venue?0:null==a.tip.venue.photos?0:null==a.tip.venue.photos.groups?0:null==a.tip.venue.photos.groups[0]?0:null==a.tip.venue.photos.groups[0].items?0:a.tip.venue.photos.groups[0].items[0])?helpers.photo.nearestBiggerPhoto({photo:a.tip.venue.photos.groups[0].items[0],targetWidth:113,targetHeight:170}):
"",f=(null==a.tip.venue?0:null==a.tip.venue.photos?0:null==a.tip.venue.photos.groups?0:null==a.tip.venue.photos.groups[0]?0:null==a.tip.venue.photos.groups[0].items?0:a.tip.venue.photos.groups[0].items[1])?helpers.photo.nearestBiggerPhoto({photo:a.tip.venue.photos.groups[0].items[1],targetWidth:113,targetHeight:170}):"",g=(null==a.tip.venue?0:null==a.tip.venue.photos?0:null==a.tip.venue.photos.groups?0:null==a.tip.venue.photos.groups[0]?0:null==a.tip.venue.photos.groups[0].items?0:a.tip.venue.photos.groups[0].items[2])?
helpers.photo.nearestBiggerPhoto({photo:a.tip.venue.photos.groups[0].items[2],targetWidth:114,targetHeight:170}):"",c=c+('\x3cdiv class\x3d"tipCard" data-id\x3d"'+soy.$$escapeHtml(a.tip.id)+'"\x3e');d?c+='\x3cdiv class\x3d"tipPhoto" style\x3d"background-image: url(\''+soy.$$escapeHtml(d)+"')\"\x3e"+templates.fourSq.newdrag.page.userprofile2.desktop.tips.tipHeaderButtons_(a)+"\x3c/div\x3e":e&&f&&g?c+='\x3cdiv class\x3d"tipPhoto"\x3e\x3cdiv class\x3d"tipSubPhoto" style\x3d"background-image: url(\''+
soy.$$escapeHtml(e)+'\')"\x3e\x3c/div\x3e\x3cdiv class\x3d"tipSubPhoto" style\x3d"background-image: url(\''+soy.$$escapeHtml(f)+'\')"\x3e\x3c/div\x3e\x3cdiv class\x3d"tipSubPhoto" style\x3d"background-image: url(\''+soy.$$escapeHtml(g)+"')\"\x3e\x3c/div\x3e"+templates.fourSq.newdrag.page.userprofile2.desktop.tips.tipHeaderButtons_(a)+"\x3c/div\x3e":e?(d=helpers.photo.nearestBiggerPhoto({photo:a.tip.venue.photos.groups[0].items[0],targetWidth:340,targetHeight:170}),c+='\x3cdiv class\x3d"tipPhoto" style\x3d"background-image: url(\''+
soy.$$escapeHtml(d)+"')\"\x3e"+templates.fourSq.newdrag.page.userprofile2.desktop.tips.tipHeaderButtons_(a)+"\x3c/div\x3e"):c+='\x3cdiv class\x3d"tipPhoto noPhoto"\x3e'+templates.fourSq.newdrag.page.userprofile2.desktop.tips.tipHeaderButtons_(a)+"\x3c/div\x3e";return c+='\x3cdiv class\x3d"tipContent"\x3e"'+helpers.tip.textWithReadMoreLink(a)+'"\x3c/div\x3e\x3cdiv class\x3d"tipUser"\x3e'+helpers.user.imageWLink(soy.$$augmentMap(a.user,{size:32,alt:helpers.user.fullName(a.user),useColoredSquircleIfBlank:!0}))+
'\x3cspan class\x3d"tipUserName"\x3e'+helpers.user.fullNameWLink(a.user)+'\x3c/span\x3e \x26middot; \x3cspan class\x3d"tipDate link"\x3e'+helpers.util.createdAtSmartDate(a.tip)+'\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"tipVenue"\x3e\x3cdiv class\x3d"tipVenueDetails"\x3e\x3cdiv class\x3d"tipVenueInfo"\x3e'+helpers.venue.nameWithLink({venue:a.tip.venue})+"\x3c/div\x3e"+helpers.venue.venueCategory(a.tip)+" \x26middot; "+soy.$$escapeHtml(null!=(null==a.tip?null:null==a.tip.venue?null:null==a.tip.venue.location?
null:a.tip.venue.location.contextLine)?null==a.tip?null:null==a.tip.venue?null:null==a.tip.venue.location?null:a.tip.venue.location.contextLine:"")+"\x3c/div\x3e"+(a.tip.venue.rating?helpers.venue.compactRating(soy.$$augmentMap(a.tip.venue,{hideDenom:!0})):"")+"\x3c/div\x3e\x3c/div\x3e"};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.newdrag&&(templates.fourSq.newdrag={});"undefined"==typeof templates.fourSq.newdrag.page&&(templates.fourSq.newdrag.page={});"undefined"==typeof templates.fourSq.newdrag.page.userprofile2&&(templates.fourSq.newdrag.page.userprofile2={});"undefined"==typeof templates.fourSq.newdrag.page.userprofile2.desktop&&(templates.fourSq.newdrag.page.userprofile2.desktop={});
"undefined"==typeof templates.fourSq.newdrag.page.userprofile2.desktop.lists&&(templates.fourSq.newdrag.page.userprofile2.desktop.lists={});templates.fourSq.newdrag.page.userprofile2.desktop.lists.listsFilter=function(a,b){return templates.fourSq.newdrag.page.userprofile2.desktop.lists.listsFilterYours(a)+templates.fourSq.newdrag.page.userprofile2.desktop.lists.listsFilterCreated(a)+templates.fourSq.newdrag.page.userprofile2.desktop.lists.listsFilterFollowed(a)};
templates.fourSq.newdrag.page.userprofile2.desktop.lists.listsFilterCreated=function(a,b){return'\x3cspan class\x3d"createdFilter listFilter '+(0<(null==a.lists?null:a.lists.count)?"hasLists":"")+" "+(a.active?"active":"")+'"\x3e'+((null==a.lists?0:a.lists.count)?"Lists "+soy.$$escapeHtml(a.user.firstName)+" Created ("+soy.$$escapeHtml(null==a.lists?null:a.lists.count)+")":"Lists "+soy.$$escapeHtml(a.user.firstName)+" Created")+"\x3c/span\x3e"};
templates.fourSq.newdrag.page.userprofile2.desktop.lists.listsFilterFollowed=function(a,b){return'\x3cspan class\x3d"followFilter listFilter '+(0<(null==a.lists?null:a.lists.count)?"hasLists":"")+" "+(a.active?"active":"")+'"\x3e'+((null==a.lists?0:a.lists.count)?"Lists "+soy.$$escapeHtml(a.user.firstName)+" Followed ("+soy.$$escapeHtml(null==a.lists?null:a.lists.count)+")":"Lists "+soy.$$escapeHtml(a.user.firstName)+" Followed")+"\x3c/span\x3e"};
templates.fourSq.newdrag.page.userprofile2.desktop.lists.listsFilterYours=function(a,b){return'\x3cspan class\x3d"yoursFilter listFilter '+(0<(null==a.lists?null:a.lists.count)?"hasLists":"")+" "+(a.active?"active":"")+'"\x3e'+((null==a.lists?0:a.lists.count)?soy.$$escapeHtml(a.user.firstName)+"'s Lists ("+soy.$$escapeHtml(null==a.lists?null:a.lists.count)+")":soy.$$escapeHtml(a.user.firstName)+"'s Lists")+"\x3c/span\x3e"};
templates.fourSq.newdrag.page.userprofile2.desktop.lists.createListDialog=function(a,b){return'\x3cdiv class\x3d"createListDialog"\x3e\x3ch2 class\x3d"dialogTitle"\x3eCreate a new list\x3c/h2\x3e\x3cinput class\x3d"createListName" class\x3d"newFormStyle" placeholder\x3d\'Enter a name, like: Favorite date spots\'/\x3e\x3cdiv class\x3d"loadingSpinner"\x3e\x3cimg width\x3d"16" height\x3d"16" src\x3d"'+soy.$$escapeHtml("https://ss0.4sqi.net/img/ajax_spinner-a51c5608d01acf32df728f299767f82b.gif")+'" /\x3e\x3c/div\x3e\x3cbutton class\x3d"createListButton greenButton disabledButton"\x3eCreate\x3c/button\x3e\x3c/div\x3e'};
templates.fourSq.newdrag.page.userprofile2.desktop.lists.listCard=function(a,b){var c="",d=a.list.photo?helpers.photo.nearestBiggerPhoto({photo:a.list.photo,targetWidth:340,targetHeight:300}):(null==a.list.photos?0:null==a.list.photos.groups?0:null==a.list.photos.groups[0]?0:null==a.list.photos.groups[0].items?0:a.list.photos.groups[0].items[0])?helpers.photo.nearestBiggerPhoto({photo:a.list.photos.groups[0].items[0],targetWidth:340,targetHeight:300}):"",e=-1!=a.list.canonicalPath.indexOf("list/todos")||
-1!=a.list.canonicalPath.indexOf("list/venuelikes"),f=e||-1!=a.list.canonicalPath.indexOf("list/tips"),g=f?helpers.list.href({canonicalPath:a.list.canonicalPath,geoId:a.geoId}):helpers.list.href({canonicalPath:a.list.canonicalPath}),h=a.list.venueCount?a.list.venueCount:a.list.listItems.count?a.list.listItems.count:0;return c+='\x3cdiv class\x3d"listCard" data-id\x3d"'+soy.$$escapeHtml(a.list.id)+'"\x3e\x3ca href\x3d"'+soy.$$escapeHtml(g)+'" class\x3d"listPhoto" '+(d?"style\x3d\"background-image: url('"+
soy.$$escapeHtml(d)+"')\"":"")+" "+(e?'rel\x3d"nofollow"':"")+' aria-label\x3d"Recent location photo"\x3e\x3cdiv class\x3d"listHeader"\x3e\x3c/div\x3e\x3c/a\x3e\x3cdiv class\x3d"listUser"\x3e'+helpers.user.imageWLink(soy.$$augmentMap(a.user,{size:32,alt:helpers.user.fullName(a.user),useColoredSquircleIfBlank:!0}))+'\x3c/div\x3e\x3cdiv class\x3d"listName"\x3e'+(f?helpers.list.nameWithLink({list:a.list,title:!0,geoId:a.geoId}):helpers.list.nameWithLink({list:a.list,title:!0}))+'\x3c/div\x3e\x3cdiv class\x3d"listInfo"\x3e'+
soy.$$escapeHtml(h)+" places updated "+(a.list.updatedAt?helpers.util.dateAtTime({when:a.list.updatedAt}):"")+'\x3c/div\x3e\x3cdiv class\x3d"listDescription"\x3e'+(a.list.description?soy.$$escapeHtml(a.list.description):"\x3cstrong\x3e"+(0==h?"0 places":1==h?"1 place":fourSq.i18n.formatNumber(h,"decimal",void 0,"")+" places")+"\x3c/strong\x3e"+(a.list.placesSummary?" including "+soy.$$escapeHtml(a.list.placesSummary):""))+'\x3c/div\x3e\x3cdiv class\x3d"listFacepiles"\x3e'+((null==a.list.followers?
0:a.list.followers.items)?(0<a.list.followers.items.length?'\x3cspan class\x3d"facepilesLabel"\x3eFollowed by:\x3c/span\x3e':"")+templates.fourSq.newdrag.ui.users.facepiles({users:a.list.followers}):"")+"\x3c/div\x3e\x3c/div\x3e"};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.newdrag&&(templates.fourSq.newdrag={});"undefined"==typeof templates.fourSq.newdrag.page&&(templates.fourSq.newdrag.page={});"undefined"==typeof templates.fourSq.newdrag.page.userprofile2&&(templates.fourSq.newdrag.page.userprofile2={});"undefined"==typeof templates.fourSq.newdrag.page.userprofile2.desktop&&(templates.fourSq.newdrag.page.userprofile2.desktop={});
"undefined"==typeof templates.fourSq.newdrag.page.userprofile2.desktop.users&&(templates.fourSq.newdrag.page.userprofile2.desktop.users={});
templates.fourSq.newdrag.page.userprofile2.desktop.users.userCard=function(a,b){var c='\x3cdiv class\x3d"userCard"\x3e\x3cdiv class\x3d"avatar"\x3e'+helpers.user.imageWLink(soy.$$augmentMap(a.user,{size:64,useColoredSquircleIfBlank:!0}))+'\x3c/div\x3e\x3cdiv class\x3d"info"\x3e\x3cdiv class\x3d"name"\x3e'+helpers.user.fullNameWLink(a.user)+"\x3c/div\x3e"+(a.user.homeCity?'\x3cdiv class\x3d"homeTown"\x3e'+soy.$$escapeHtml(a.user.homeCity)+"\x3c/div\x3e":""),d=null!=(null==a.user?null:null==a.user.tips?
null:a.user.tips.count)?null==a.user?null:null==a.user.tips?null:a.user.tips.count:0;return c+=(0<d?'\x3cdiv class\x3d"tipCount"\x3e'+(0==d?"":1==d?"1 Tip":fourSq.i18n.formatNumber(d,"decimal",void 0,"")+" Tips")+"\x3c/div\x3e":"")+'\x3cdiv class\x3d"justification"\x3e'+(a.justification?helpers.entities.textWithEntitiesLinks(a.justification):"")+"\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e"};
templates.fourSq.newdrag.page.userprofile2.desktop.users.followersCount=function(a,b){return'\x3cspan class\x3d"stat"\x3e\x3cstrong\x3e'+fourSq.i18n.formatNumber(a.count,"decimal",void 0,"")+"\x3c/strong\x3e Followers\x3c/span\x3e"};
templates.fourSq.newdrag.page.userprofile2.desktop.users.flagUserDialog=function(a,b){return'\x3cdiv class\x3d"flagUserDialog"\x3e\x3ch2\x3eReport '+soy.$$escapeHtml(a.firstName)+'\x3c/h2\x3eI think...\x3cdiv class\x3d"reportUserRow"\x3e\x3clabel\x3e\x3cinput type\x3d"radio" name\x3d"woeType" class\x3d"woeTypeRadio" value\x3d"spam"\x3eThis person is using their account for spam.\x3c/label\x3e\x3c/div\x3e\x3cdiv class\x3d"reportUserRow"\x3e\x3clabel\x3e\x3cinput type\x3d"radio" name\x3d"woeType" class\x3d"woeTypeRadio" value\x3d"inappropriate"\x3eThis person is posting inappropriate or vulgar content.\x3c/label\x3e\x3c/div\x3e\x3cdiv class\x3d"reportUserRow"\x3e\x3clabel\x3e\x3cinput type\x3d"radio" name\x3d"woeType" class\x3d"woeTypeRadio" value\x3d"abusive"\x3eThis person is being abusive towards or threatening other users.\x3c/label\x3e\x3c/div\x3e\x3cdiv class\x3d"reportUserRow"\x3e\x3clabel\x3e\x3cinput type\x3d"radio" name\x3d"woeType" class\x3d"woeTypeRadio" value\x3d"cheater"\x3eThis person is cheating.\x3c/label\x3e\x3c/div\x3e'+(0<
a.superuser?'\x3cdiv class\x3d"reportUserRow"\x3e\x3clabel\x3e\x3cinput type\x3d"radio" name\x3d"woeType" class\x3d"woeTypeRadio" value\x3d"bad_editor"\x3eThis person is suggesting bad edits to places.\x3c/label\x3e\x3c/div\x3e':"")+'\x3cdiv class\x3d"flagUserComments"\x3e\x3cdiv\x3eComments:\x3c/div\x3e\x3ctextarea rows\x3d"3" cols\x3d"30" class\x3d"commentBox" placeholder\x3d"Be more specific about why you are reporting this user"\x3e\x3c/textarea\x3e\x3c/div\x3e\x3cdiv class\x3d"flagUserSubmit disabled blueButton"\x3eSubmit\x3c/div\x3e\x3c/div\x3e'};
templates.fourSq.newdrag.page.userprofile2.desktop.users.actionErrorBox=function(a,b){return'\x3cdiv class\x3d"actionError" class\x3d"friendStatus"\x3e\x3cp class\x3d"friendActionDescription"\x3eUh-oh! Something went wrong there...\x3cbr /\x3eRefresh and try again?\x3c/p\x3e\x3c/div\x3e'};templates.fourSq.newdrag.page.userprofile2.desktop.users.flaggedBox=function(a,b){return'\x3cdiv class\x3d"friendStatus"\x3eThanks, we got it!\x3c/div\x3e'};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.newdrag&&(templates.fourSq.newdrag={});"undefined"==typeof templates.fourSq.newdrag.ui&&(templates.fourSq.newdrag.ui={});"undefined"==typeof templates.fourSq.newdrag.ui.users&&(templates.fourSq.newdrag.ui.users={});
templates.fourSq.newdrag.ui.users.facepiles=function(a,b){for(var c='\x3cspan class\x3d"userFacepiles"\x3e',d=null!=a.users.items?a.users.items:[],e=d.length,f=0;f<e;f++){var g=d[f];if(null==g?0:g.photo)var c=c+'\x3cspan class\x3d"userFacepile"\x3e',h=helpers.user.fullName({firstName:g.firstName,lastName:g.lastName}),c=c+(helpers.user.imageWLink({id:g.id,size:32,altText:h,photo:g.photo,userColoredSquircleIfBlank:!0})+"\x3c/span\x3e")}return c+=(a.users.count&&a.users.items&&0<a.users.count-a.users.items.length?
'\x3cspan class\x3d"userFacepilesCount"\x3e+'+soy.$$escapeHtml(a.users.count-a.users.items.length)+"\x3c/span\x3e":"")+"\x3c/span\x3e"};