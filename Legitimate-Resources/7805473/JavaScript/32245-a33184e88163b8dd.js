(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[32245],{30552:function(e,n,o){"use strict";o.d(n,{ZP:function(){return ue},ZK:function(){return ce},f0:function(){return ae}});var i=o(57611),t=o(67597),r=o(9134),l=o.n(r),s=o(1997),a=o(57044),c=o(16946),d=o(99097),u=o(51726),_=o(15129),m=o(81987),g=o.n(m),v=o(68721),f=o(11896),h=o(72809),p=o(35169),I=o(86257),b=o(83999),w=o(61395),L=o(35121),E=o(97579),N=o(81547),x=o(60552),R=o(51273),O=o(49880),j=o(86633),S=o(27558),y=o(4426),C=o(60445),T=o(84204),F=o(82136),k=o(3265),G=o(56304),Z=o(84916),M=o(56503),B=o(99911),q=o.n(B),D=o(32245),P="mxc_login_type";function V(){var e=(0,_.useRouter)(),n=e.locale,o=(0,d.Z)(v.l0.useForm(),1)[0],r=ae(),m=r.setLoginData,B=r.setLoginType,V=r.setMobileCode,W=r.loginLayoutType,U=r.setLoginLayoutType,A=r.isModal,z=r.setModalType,H=(0,D.le)(),K=H.otherLoginBindInfo,Q=H.otherLoginAuthSuccess,J=(0,t.useState)(!1),X=J[0],Y=J[1],$=(0,t.useState)(),ee=$[0],ne=$[1],oe=(0,t.useState)("email"),ie=oe[0],te=oe[1],re=(0,t.useState)(!1),le=re[0],se=re[1],ce=(0,w.Z)("auth").t,de=(0,N.Z)().data,ue=(0,t.useState)(!0),_e=ue[0],me=ue[1],ge=(0,t.useState)(!1),ve=ge[0],fe=ge[1],he=(0,t.useRef)(),pe=(0,d.Z)((0,T.my)({actions:{setData:ne,onFail:function(){},onClose:function(){return Y(!1)}},language:n,params:{type:"LOGIN",serviceType:K?"login_with_third_login":"login_second_auth"}}),3),Ie=pe[0],be=pe[1],we=pe[2],Le=(0,F.Z)(),Ee=Le.isReady,Ne=Le.doCheck,xe=(0,t.useState)(!1),Re=xe[0],Oe=xe[1],je=(0,t.useState)(""),Se=je[0],ye=je[1],Ce=(0,t.useCallback)((0,I.Z)((function(){setTimeout((function(){var e=o.getFieldsValue(["account","mobileObject","password"]),n=e.account,i=e.mobileObject,t=e.password,r=(i||{}).mobile;if(ie===G.u8.EMAIL){if(n&&o.validateFields(),n&&(null===f.m0||void 0===f.m0?void 0:f.m0.test(n))&&t)return void me(!1);me(!0)}else{if(r&&o.validateFields(),r&&f.OX.test(r)&&t)return void me(!1);me(!0)}}),20)}),{wait:100,leading:!0}),[ie]),Te=Ce.run,Fe=function(e,n){Q(e,n,(function(){B(G.u8[e]||G.u8.GOOGLE),n.bind&&(U("secondAuth"),m(n),V(n.mobileCountry))}))};(0,t.useEffect)((function(){var e=window.localStorage.getItem(P)===(null===G.u8||void 0===G.u8?void 0:G.u8.MOBILE)?null===G.u8||void 0===G.u8?void 0:G.u8.MOBILE:null===G.u8||void 0===G.u8?void 0:G.u8.EMAIL,n=null===sessionStorage||void 0===sessionStorage?void 0:sessionStorage.getItem(S.X);n&&(e=n.type===(null===G.u8||void 0===G.u8?void 0:G.u8.MOBILE)?null===G.u8||void 0===G.u8?void 0:G.u8.MOBILE:null===G.u8||void 0===G.u8?void 0:G.u8.EMAIL);te(e),B(e),Oe(!0)}),[]),(0,t.useEffect)((function(){var e=null===sessionStorage||void 0===sessionStorage?void 0:sessionStorage.getItem(S.X);if(e)try{var n=(e=JSON.parse(e)).mobileInfo,i=e.email;o.setFieldsValue({mobileObject:n,account:i}),ye(i),Te(),sessionStorage.setItem(S.X,"")}catch(t){o.resetFields()}}),[]),(0,t.useEffect)((function(){o.setFieldsValue({password:""})}),[ie]);var ke=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];window.localStorage.setItem(P,e),te(e),B&&!n&&B(e)};(0,t.useEffect)((function(){var e=function(n){clearTimeout(null===he||void 0===he?void 0:he.current),he.current=setTimeout((function(){if(!ve&&n>0){var o=document.getElementById("accountInput"),i=document.getElementById("passwordInput"),t=window.getComputedStyle(o,null).getPropertyValue("box-shadow")===G.Bb,r=window.getComputedStyle(i,null).getPropertyValue("box-shadow")===G.Bb;if(t&&r&&!ve)me(!1);else e(n-1)}}),200)};return e(10),function(){(null===he||void 0===he?void 0:he.current)&&clearTimeout(he.current)}}),[ve]),(0,t.useEffect)((function(){var e=function(){fe(!0)};return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}}),[]);var Ge=function(){var e=(0,s.Z)((function(){var e,i,t,r,l,s,c,d,_,p;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:return Y(!0),i=o.getFieldsValue(["account","password","mobileObject"]),t="email"===ie?null===i||void 0===i?void 0:i.account:null===i||void 0===i||null===(e=i.mobileObject)||void 0===e?void 0:e.mobile,r=E.Z.encrypt("".concat(g()(i.password),"|").concat(Date.now()),g()(t).substring(8,24)),l={account:t,locale:n,password:r},s={"captcha-token":ee},"mobile"===ie&&(l.country=(null===i||void 0===i||null===(c=i.mobileObject)||void 0===c?void 0:c.mobileCode)||void 0),(0,f.X1)("login",{method:ie}),K?(l.thirdpartyType=K.type,l.bindToken=K.bindToken,[4,(0,h.FKE)(l,s)]):[3,2];case 1:return 0===(null===(d=u.sent())||void 0===d?void 0:d.code)&&(v.yw.success(ce("mc_auth_other_login_link_success")),window.sessionStorage.removeItem(G.LM)),[3,4];case 2:return[4,(0,h.NUr)(l,s)];case 3:d=u.sent(),u.label=4;case 4:return 0!==d.code?((0,f.Wr)("User_loginResult",{login_method:(0,G.Dj)(ie),is_success:null!==(_=null===d||void 0===d?void 0:d.success)&&void 0!==_&&_,fail_code:(null===d||void 0===d?void 0:d.success)?null:(null===d||void 0===d?void 0:d.code)||500,fail_reason:(null===d||void 0===d?void 0:d.success)?null:(null===d||void 0===d?void 0:d.msg)||"",jira_id:"user-2543"}),ne(null),Y(!1),we&&be(),[2]):(U("secondAuth"),m((0,a.Z)({},d.data)),"mobile"===ie&&V(null===i||void 0===i||null===(p=i.mobileObject)||void 0===p?void 0:p.mobileCode),Y(!1),ne(null),[2])}}))}));return function(){return e.apply(this,arguments)}}();(0,t.useEffect)((function(){ee&&Ge()}),[ee]);(0,t.useEffect)((function(){Te()}),[ie]);var Ze=(0,t.useCallback)((function(e,n){("mobile"===ie&&(null===e||void 0===e?void 0:e.mobile)&&(null===e||void 0===e?void 0:e.mobileCode)||"email"===ie&&e)&&setTimeout((function(){var e,i,t=K?K.type:ie;(0,M.$k)({is_dropitem:Boolean(n),account_type:null===t||void 0===t?void 0:t.toLocaleLowerCase().replace(/^\S/,(function(e){return e.toUpperCase()})),service_type:K?"\u7ed1\u5b9a\u767b\u5f55":"\u767b\u5f55",is_success:!(null===(e=o.getFieldError("mobile"===ie?"mobileObject":"account"))||void 0===e?void 0:e.length),fail_reason:null===(i=o.getFieldError("mobile"===ie?"mobileObject":"account"))||void 0===i?void 0:i[0]})}),0)}),[ie,K,o]);return(0,i.jsxs)("div",{className:l()(q().wrapper,Re&&q().wrapperShow),children:["bind"===W?(0,i.jsxs)("div",{className:q().bindTabs,children:[(0,i.jsx)("div",{className:l()("bindTab","email"===ie&&"active"),onClick:function(){return ke("email",!0)},children:ce("common:mc_common_currency_email")}),(0,i.jsx)("div",{className:l()("bindTab","mobile"===ie&&"active"),onClick:function(){return ke("mobile",!0)},children:ce("common:mc_common_mobile")})]}):(0,i.jsxs)("div",{className:l()(q().tabs,"login_form_tabs"),children:[(0,i.jsx)("div",{className:l()(q().tab,"email"===ie&&"active"),onClick:function(){return ke("email")},children:ce("common:mc_common_currency_email")}),(0,i.jsx)("div",{className:l()(q().tab,"mobile"===ie&&"active"),onClick:function(){return ke("mobile")},children:ce("common:mc_common_mobile")})]}),(0,i.jsxs)(v.l0,{form:o,name:"login",requiredMark:!1,className:q().loginForm,layout:"vertical",children:["mobile"===ie&&(0,i.jsx)("div",{className:l()(q().item),children:(0,i.jsx)(v.l0.Item,{label:ce("common:mc_common_phone"),name:"mobileObject",validateFirst:!0,validateTrigger:"onBlur",initialValue:{mobile:""},rules:[function(){return{validator:function(e,n){return n.mobileCode?n.mobile?f.OX.test(n.mobile)?Promise.resolve():Promise.reject(ce("common:mc_common_phone_reg")):Promise.reject(ce("common:mc_common_phone_require")):Promise.reject(ce("common:mc_common_country_select_please"))}}}],getValueFromEvent:function(e){var n;return(0,c.Z)((0,a.Z)({},e),{mobile:null===e||void 0===e||null===(n=e.mobile)||void 0===n?void 0:n.trim()})},children:(0,i.jsx)(b.Z,{inputProps:{allowClear:!0,id:"accountInput"},onChange:Te,onBlur:function(e){return Ze(e)}})})}),"email"===ie&&(0,i.jsx)("div",{className:l()(q().item),children:(0,i.jsx)(v.l0.Item,{label:ce("mc_auth_login_email"),name:"account",rules:[{pattern:f.m0,message:ce("mc_auth_login_account_reg")}],getValueFromEvent:function(e){return null===e||void 0===e?void 0:e.trim()},children:(0,i.jsx)(Z.Z,{id:"accountInput",allowClear:!0,onChange:Te,className:"ant-input-lg",placeholder:ce("mc_auth_login_account"),onBlur:Ze,initialValue:Se})})}),(0,i.jsx)("div",{className:l()(q().item),children:(0,i.jsx)(v.l0.Item,{label:ce("common:mc_common_password"),name:"password",children:(0,i.jsx)(v.II.Password,{id:"passwordInput",allowClear:!0,className:"ant-input-lg",placeholder:ce("common:mc_common_password"),bordered:!0,onChange:Te,onBlur:function(e){e.target.value&&setTimeout((function(){var e,n;(0,f.Wr)("User_fillPassword",{service_type:K?"\u7ed1\u5b9a\u767b\u5f55":"\u767b\u5f55",is_success:!(null===(e=o.getFieldError("password"))||void 0===e?void 0:e.length),fail_reason:null===(n=o.getFieldError("password"))||void 0===n?void 0:n[0]})}),0)}})})}),(0,i.jsx)(v.zx,{disabled:_e,size:"large",onClick:function(){Ee&&Ne(K?"robot.login.oauth.".concat(ie):"robot.login.".concat(ie)),de&&de.limitLogin?se(!0):setTimeout((function(){o.validateFields().then((function(){var e;!function(){var e,n,i=o.getFieldsValue(["account","mobileObject"]);window.sessionStorage.setItem(p.Gm,JSON.stringify({country_number:"email"===ie?"":null===i||void 0===i||null===(e=i.mobileObject)||void 0===e?void 0:e.mobileCode,phone_number:"email"===ie?"":null===i||void 0===i||null===(n=i.mobileObject)||void 0===n?void 0:n.mobile,email:"email"===ie?null===i||void 0===i?void 0:i.account:""}))}(),null===Ie||void 0===Ie||null===(e=Ie.showCaptcha)||void 0===e||e.call(Ie)}))}),100)},type:"primary",htmlType:"submit",loading:X,children:ce(K?"mc_auth_user_log_in_and_link":"common:mc_common_nav_login")}),(0,i.jsxs)("div",{className:q().links,children:[(0,i.jsx)("a",{onClick:function(){var n=o.getFieldsValue(["account","mobileObject"]);n&&window.sessionStorage.setItem(G.XU,JSON.stringify((0,a.Z)({type:ie},n))),e.push("/forget-password")},style:{color:"var(--primary-base)"},children:ce("mc_auth_login_forget_pwd")}),K?(0,i.jsx)(i.Fragment,{}):(0,i.jsx)("a",{onClick:function(){var n=o.getFieldsValue(["account","mobileObject"]);n&&window.sessionStorage.setItem(G.XU,JSON.stringify((0,a.Z)({type:ie},n))),K&&window.sessionStorage.setItem(G.LM,JSON.stringify(K)),A?z("register"):e.push("/register")},style:{color:"var(--primary-base)"},children:ce("mc_auth_login_register")})]}),!K&&(0,i.jsxs)("div",{className:q().otherLogin,children:[(0,i.jsx)("div",{className:q().otherLoginTitle,children:(0,i.jsx)("div",{className:q().otherLoginTitleText,children:ce("mc_auth_other_login_title")})}),(0,i.jsxs)("div",{className:q().otherLoginHandle,children:[(0,i.jsx)(R.Z,{onSuccess:function(e){return Fe("GOOGLE",e)},children:(0,i.jsxs)("div",{className:q().otherLoginItem,children:[(0,i.jsx)("div",{className:q().itemIconWrapper,children:(0,i.jsx)(k.FZO,{className:q().itemIcon,"aria-hidden":"true"})}),"Google"]})}),(0,i.jsx)(O.Z,{onSuccess:function(e){return Fe("APPLE",e)},children:(0,i.jsxs)("div",{className:q().otherLoginItem,children:[(0,i.jsx)("div",{className:q().itemIconWrapper,children:(0,i.jsx)(y.Z,{className:q().itemAppleIcon,"aria-hidden":"true"})}),"Apple"]})}),(0,i.jsx)(j.ZP,{onSuccess:function(e){return Fe("METAMASK",e)},children:(0,i.jsxs)("div",{className:q().otherLoginItem,children:[(0,i.jsx)("div",{className:q().itemIconWrapper,children:(0,i.jsx)(k.BPK,{className:q().itemAppleIcon,"aria-hidden":"true"})}),G.bV.METAMASK]})}),(0,i.jsx)(x.Z,{onSuccess:function(e){return Fe("TELEGRAM",e)},children:(0,i.jsxs)("div",{className:q().otherLoginItem,children:[(0,i.jsx)("div",{className:q().itemIconWrapper,children:(0,i.jsx)(C.Z,{className:l()(q().itemTelegramIcon)})}),"Telegram"]})})]})]})]}),le&&(0,i.jsx)(L.Z,{flag:le,close:function(){return se(!1)}})]})}var W=o(33770),U=o.n(W),A=o(62049),z=o.n(A),H=o(65698),K=o.n(H),Q=o(67385),J=o(83920),X=o(95376),Y=o(98121),$=o.n(Y),ee=o(19969);var ne=function(){var e=(0,w.Z)("auth").t,n=(0,_.useRouter)(),o=n.locale,r=n.query,a=n.locales,c=r.previous,d=r.redirect,m=ae().isModal,g=(0,t.useState)(!1),p=g[0],I=g[1],b=(0,t.useState)(!1),L=b[0],E=b[1],N=(0,t.useState)(),x=N[0],R=N[1],O=(0,J.ZP)().data,j=function(e){(0,h.$$q)({deviceId:(null===e||void 0===e?void 0:e.visitorId)?e.visitorId:"unknowndeviceid",requestId:null===e||void 0===e?void 0:e.requestId,timeZoneOffset:(new Date).getTimezoneOffset()}).then((function(e){var n;0===(null===e||void 0===e?void 0:e.code)?(R(e.data),setTimeout((function(){I(!0),E(!1)}),1e3*(null===(n=e.data)||void 0===n?void 0:n.timeout))):I(!0)}))};(0,t.useEffect)((function(){var e=window.localStorage.getItem("mexc_local_fingerprint_visitorId");O?j(O):e?j({visitorId:e}):X.ZP.load().then((function(e){return e.get()})).then((function(e){e&&j(e)}))}),[]),(0,t.useEffect)((function(){O&&x&&(0,h.l7l)({qrCode:x.qrCode,deviceId:O.visitorId,requestId:O.requestId}).then((function(e){null===e||void 0===e||e.code}))}),[null===O||void 0===O?void 0:O.visitorId,x]);var S=function(){I(!1),E(!1),j(O)},y=(0,t.useRef)(),C=function(){var e=(0,s.Z)((function(e){var n,i,t,r,l;return(0,u.__generator)(this,(function(s){return e?m?window.location.reload():((n=(n=c||d)?decodeURIComponent(n):"/user").startsWith("/")||(i=window.location.hostname.split(".").slice(-2).join("."),t=new URL(n),r=t.hostname||"",l=r.split(".").slice(-2).join("."),n=i===l?n:"/user"),n.startsWith("/")&&(n=(0,f.Ze)(n)?"/user":n,n=function(e,n){return e.find((function(e){return n.startsWith("/"+e)}))}(a,n)?n:"/".concat(o).concat(n)),setTimeout((function(){window.location.replace(n)}),2e3)):S(),[2]}))}));return function(n){return e.apply(this,arguments)}}();return(0,t.useEffect)((function(){return x&&!p&&(y.current=setInterval((function(){var e;e=x.qrCode,(0,h.jbT)({qrCode:e}).then((function(e){if(0===(null===e||void 0===e?void 0:e.code)){var n=e.data;"SCAN"===(null===n||void 0===n?void 0:n.state)&&E(!0),"CONFIRM"===(null===n||void 0===n?void 0:n.state)&&((0,f.Wr)("User_loginResult",{login_method:G.u8.QR_CODE,is_success:!0,fail_reason:null,jira_id:"user-2543"}),clearInterval(y.current),y.current=null,C(n.token))}else L&&(0,f.Wr)("User_loginResult",{login_method:G.u8.QR_CODE,is_success:!1,fail_reason:"QR code expired",jira_id:"user-2543"}),I(!0),E(!1)}))}),2e3)),function(){y.current&&(clearInterval(y.current),y.current=null)}}),[x,p,L]),(0,i.jsxs)("div",{className:l()($().wrapper,$().component_qr_code),children:[(0,i.jsxs)("div",{className:l()($().qrcodeWrapper,(p||L)&&$().qrcodeWrapperDisabled),children:[x&&(0,i.jsx)("div",{className:$().qrcode,children:(0,i.jsx)(K(),{size:140,value:JSON.stringify({scheme:"qr_code_login",qrCode:x.qrCode})})}),(p||L)&&(0,i.jsx)("div",{className:$().disabledMaskContent,children:(0,i.jsxs)("div",{children:[p&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{className:$().disabledMaskText,children:e("mc_login_qrcode_expired")}),(0,i.jsx)(v.zx,{className:$().disabledMaskButton,type:"primary",size:"small",onClick:S,children:e("common:mc_common_refresh")})]}),!p&&L&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ee.Z,{className:l()($().confirmIcon,"iconfont icondone")}),(0,i.jsx)("p",{className:$().disabledMaskText,children:e("mc_login_qrcode_confirm")})]})]})})]}),(0,i.jsx)("h4",{className:$().title,children:e("mc_login_qrcode_title")}),(0,i.jsx)("p",{className:$().desc,children:(0,i.jsx)(Q.Z,{i18nKey:"auth:mc_login_qrcode_desc",components:{a:(0,i.jsx)(z(),{href:"/download",children:(0,i.jsx)("a",{})})}})}),(0,i.jsx)("div",{className:$().download,children:(0,i.jsx)(v.zx,{children:(0,i.jsx)(z(),{href:"/download",children:e("common:mc_common_download_app")})})})]})},oe=o(52908),ie=o(64657),te=o(27037),re=o.n(te),le=U()(Promise.all([o.e(94463),o.e(42646)]).then(o.bind(o,59114)),{loadableGenerated:{webpack:function(){return[59114]}},ssr:!1}),se=(0,t.createContext)({}),ae=function(){return(0,t.useContext)(se)},ce=function(e){var n=e.isModal,o=e.previous,i=e.redirect,t=e.message,r=e.locales,l=e.locale;if(v.yw.success(t),n)window.location.reload();else{var s=o||i;if(!(s=s?decodeURIComponent(s):"/user").startsWith("/"))s=window.location.hostname.split(".").slice(-2).join(".")===(new URL(s).hostname||"").split(".").slice(-2).join(".")?s:"/user";s.startsWith("/")&&(s=function(e,n){return e.find((function(e){return n.startsWith("/"+e)}))}(r,s=(0,f.Ze)(s)?"/user":s)?s:"/".concat(l).concat(s)),window.location.replace(s)}};function de(e,n){var o=e.loginLayoutTypeChangeHandle,r=e.setModalType,s=(0,t.useState)({}),a=s[0],c=s[1],d=(0,t.useState)("mobile"),u=d[0],m=d[1],g=(0,t.useState)(),v=g[0],h=g[1],p=(0,t.useState)("qrcodeLogin"),I=p[0],b=p[1],w=(0,_.useRouter)(),L=w.asPath,E=w.locale,N=w.query,x=w.defaultLocale,R=w.replace,O=(0,D.le)(),j=O.isModal,S=O.title,y=O.loginRegisterBindModalVisible,C=O.setLoginRegisterBindModalVisible,T=O.otherLoginBindInfo,F=O.setOtherLoginBindInfo,k=O.onChooseLoginOrRegisterBind,Z=O.setOnPreStep,M=O.loginOrRegisterStep,B=function(){c({})};(0,t.useImperativeHandle)(n,(function(){return{resetInitialHandle:B}}));var q=function(e){e&&(0,f.IL)(),Z()};(0,t.useEffect)((function(){N.lang&&N.lang!==E&&(N.lang!==x?R("/".concat(N.lang).concat(L)):window.location.href=L)}),[E,N.lang]),(0,t.useEffect)((function(){"function"===typeof o&&o({title:S,loginLayoutType:I})}),[S,I]);return(0,t.useEffect)((function(){switch(M){case D.PK.LOGIN_OR_REGISTER:b("qrcodeLogin");break;case D.PK.CHOOSE_LOGIN_OR_REGISTER_BIND:case D.PK.BIND_LOGIN_OR_REGISTER:b("bind")}}),[M]),(0,t.useEffect)((function(){var e,n=null===window||void 0===window||null===(e=window.sessionStorage)||void 0===e?void 0:e.getItem(G.Wl);if(n)try{var o=JSON.parse(n);b("secondAuth"),c(o),h(o.mobileCountry)}catch(t){}finally{var i;null===window||void 0===window||null===(i=window.sessionStorage)||void 0===i||i.removeItem(G.Wl)}}),[]),(0,i.jsx)(se.Provider,{value:{loginData:a,setLoginData:c,loginType:u,setLoginType:m,mobileCode:v,setMobileCode:h,loginLayoutType:I,setLoginLayoutType:b,setModalType:r,isModal:j,setLoginRegisterBindModalVisible:C,otherLoginBindInfo:T,setOtherLoginBindInfo:F},children:(0,i.jsx)("div",{className:l()(re().loginFormContent,j&&re().loginFormContentModal,(a.memberId||"bind"===I)&&re().noWidth,"bind"===I&&re().bindForm,"qrcodeLogin"===I&&re().hasQrcodeLogin,y&&re().loginRegisterBindModalVisible),children:y?(0,i.jsx)(oe.Z,{isModal:j,callback:function(e){k(e,(function(){r("register")}))},onBack:q}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:l()(re().left,a.memberId&&re().authCodeLeft),children:[!a.memberId&&(0,i.jsxs)(i.Fragment,{children:[!j&&(0,i.jsxs)("h1",{className:"h1",children:[T?(0,i.jsx)("span",{className:"anticon anticon-arrow-right icon-dir-rtl",onClick:function(){q(!0)},children:(0,i.jsx)(ie.Z,{className:"iconfont iconicon_back svg-icon"})}):(0,i.jsx)(i.Fragment,{}),S]}),(0,i.jsx)(V,{})]}),a.memberId&&(0,i.jsx)(le,{isModal:j})]}),"qrcodeLogin"===I&&(0,i.jsx)(ne,{})]})})})}var ue=(0,t.forwardRef)(de)},32245:function(e,n,o){"use strict";o.d(n,{PK:function(){return I},hQ:function(){return p},le:function(){return h},p_:function(){return L}});var i,t,r=o(45361),l=o(57044),s=o(16946),a=o(57611),c=o(61395),d=o(15129),u=o(67597),_=o(56304),m=o(11896),g=o(90469),v=o(30552),f=(0,u.createContext)({}),h=function(){return(0,u.useContext)(f)},p={LOGIN:"login",REGISTER:"register"},I={LOGIN_OR_REGISTER:1,CHOOSE_LOGIN_OR_REGISTER_BIND:2,BIND_LOGIN_OR_REGISTER:3,VERIFICATION:4},b=(i={},(0,r.Z)(i,I.LOGIN_OR_REGISTER,"mc_auth_register_title"),(0,r.Z)(i,I.CHOOSE_LOGIN_OR_REGISTER_BIND,"mc_auth_user_link_your_mexc_account"),(0,r.Z)(i,I.BIND_LOGIN_OR_REGISTER,"mc_auth_other_register"),(0,r.Z)(i,I.VERIFICATION,"common:mc_common_security_title"),i),w=(t={},(0,r.Z)(t,I.LOGIN_OR_REGISTER,"mc_auth_login_title"),(0,r.Z)(t,I.CHOOSE_LOGIN_OR_REGISTER_BIND,"mc_auth_user_link_your_mexc_account"),(0,r.Z)(t,I.BIND_LOGIN_OR_REGISTER,""),(0,r.Z)(t,I.VERIFICATION,"common:mc_common_security_title"),t),L=function(e){var n=e.isModal,o=void 0!==n&&n,i=e.type,t=e.children,r=(0,c.Z)("auth").t,h=(0,d.useRouter)(),L=h.locale,E=h.query,N=h.locales,x=E.previous,R=E.redirect,O=(0,u.useState)(i),j=O[0],S=O[1],y=(0,u.useState)(I.LOGIN_OR_REGISTER),C=y[0],T=y[1],F=(0,u.useState)(!1),k=F[0],G=F[1],Z=(0,u.useRef)(I.LOGIN_OR_REGISTER),M=(0,u.useState)(),B=M[0],q=M[1],D=(0,u.useState)(!1),P=D[0],V=D[1],W=(0,u.useState)(""),U=W[0],A=W[1],z=function(e){q(e)},H=(0,u.useCallback)((function(e){"function"===typeof e&&(null===e||void 0===e||e(null===Z||void 0===Z?void 0:Z.current)),T(B?function(e){return e-1}:I.LOGIN_OR_REGISTER),(null===Z||void 0===Z?void 0:Z.current)===I.CHOOSE_LOGIN_OR_REGISTER_BIND&&z(void 0)}),[C,B]),K=function(e){A(e)},Q=function(e){var n;e&&(null===window||void 0===window||null===(n=window.sessionStorage)||void 0===n||n.setItem(_.LM,JSON.stringify(e)))},J=(0,u.useCallback)((function(e,n){p.LOGIN===j?_.gz.LOGIN_BIND===e?T(I.BIND_LOGIN_OR_REGISTER):_.gz.REGISTER_BIND===e&&(Q(B),o?"function"===typeof n&&(null===n||void 0===n||n()):h.push("/register")):p.REGISTER===j&&(_.gz.LOGIN_BIND===e?(Q(B),o?"function"===typeof n&&(null===n||void 0===n||n()):h.push("/login")):_.gz.REGISTER_BIND===e&&T(I.BIND_LOGIN_OR_REGISTER))}),[B,j,o]),X=(0,u.useCallback)((function(e,n,o){"GOOGLE"!==e&&"APPLE"!==e||!n.token?n.bind?j===p.LOGIN?"function"===typeof o&&(null===o||void 0===o||o()):j===p.REGISTER&&"function"===typeof o&&(null===o||void 0===o||o()):(T(I.CHOOSE_LOGIN_OR_REGISTER_BIND),q({type:e,bindToken:n.bindToken}),null===o||void 0===o||o()):((0,m.fE)(n.memberId),(0,m.Wr)("User_loginResult",{login_method:(0,_.Dj)(e),is_success:!0,fail_code:null,fail_reason:null,jira_id:"user-3434"}),V(!0))}),[j]);return(0,u.useEffect)((function(){switch(C){case I.LOGIN_OR_REGISTER:G(!1);break;case I.CHOOSE_LOGIN_OR_REGISTER_BIND:G(!0);break;case I.BIND_LOGIN_OR_REGISTER:G(!1)}}),[C]),(0,u.useEffect)((function(){if(Z.current=C,C){if(C===I.BIND_LOGIN_OR_REGISTER&&j===p.LOGIN){var e=(null===B||void 0===B?void 0:B.type)||"APPLE",n=_.bV[null===e||void 0===e?void 0:e.toUpperCase()]||e;return void K(r("mc_auth_third_login_title",{thirdType:n}))}var o=j===p.REGISTER?b[C]:w[C];K(o?r(o):"")}}),[C,j,B,L]),(0,u.useEffect)((function(){var e,n=null===window||void 0===window||null===(e=window.sessionStorage)||void 0===e?void 0:e.getItem(_.LM);if(n)try{var o,i=JSON.parse(n);z((0,s.Z)((0,l.Z)({},i),{from:void 0})),(null===i||void 0===i?void 0:i.from)&&(null===i||void 0===i?void 0:i.from)===_.N9?T(I.CHOOSE_LOGIN_OR_REGISTER_BIND):T(I.BIND_LOGIN_OR_REGISTER),null===window||void 0===window||null===(o=window.sessionStorage)||void 0===o||o.removeItem(_.LM)}catch(t){z(void 0)}}),[]),(0,a.jsx)(f.Provider,{value:{loginOrRegisterStep:C,setLoginOrRegisterStep:T,setOnPreStep:H,loginRegisterBindModalVisible:k,setLoginRegisterBindModalVisible:G,otherLoginBindInfo:B,setOtherLoginBindInfo:z,title:U,setTitle:K,isModal:o,onChooseLoginOrRegisterBind:J,otherLoginAuthSuccess:X,loginOrRegisterType:j,setLoginOrRegisterType:S,setWarningVisible:V},children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.Z,{visible:P,afterClose:function(){return(0,v.ZK)({isModal:o,previous:x,redirect:R,message:r("mc_auth_login_success"),locales:N,locale:L})}}),t]})})}},90469:function(e,n,o){"use strict";var i=o(1997),t=o(51726),r=o(57611),l=o(67597),s=o(68763),a=o(32150),c=o(81547),d=o(51662),u=o(72809),_=o(11896),m=o(61395),g=o(30762),v=o(305),f=o.n(v),h="cn",p="en";n.Z=function(e){var n=e.visible,o=e.afterClose,v=(0,m.Z)("auth").t,I=(0,c.Z)(),b=I.data,w=I.mutate,L=(0,l.useState)(!1),E=L[0],N=L[1],x=(0,l.useState)(5),R=x[0],O=x[1],j=(0,l.useState)(),S=j[0],y=j[1],C=(0,l.useState)(!1),T=C[0],F=C[1],k=(0,l.useRef)(),G=(0,g.aF)().refresh,Z=(0,l.useState)(p),M=Z[0],B=Z[1],q=function(){var e=(0,i.Z)((function(){return(0,t.__generator)(this,(function(e){switch(e.label){case 0:return F(!0),[4,(0,u.Kv_)()];case 1:return e.sent(),F(!1),G(),window.location.reload(),[2]}}))}));return function(){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){(0,d.T)().then((function(e){y(e)}));var e=function(){window.sessionStorage.removeItem("mexc_login_cn_warning_modal")};return window.addEventListener("beforeunload",e),function(){window.sessionStorage.removeItem("mexc_login_cn_warning_modal"),window.removeEventListener("beforeunload",e)}}),[]),(0,l.useEffect)((function(){n&&w().then((function(e){(null===e||void 0===e?void 0:e.popUpCode)||(null===e||void 0===e?void 0:e.popUpText)||(null===e||void 0===e?void 0:e.needChoosePopUpCode)?((0,_.PS)("\u91cd\u8981\u901a\u77e5"),N(!0),window.sessionStorage.setItem("mexc_login_cn_warning_modal",1)):"function"===typeof o&&o()}))}),[n,w,S]),(0,l.useEffect)((function(){if(E){var e=5;k.current=setInterval((function(){0===--e&&(clearInterval(k.current),k.current=null),O(e)}),1e3)}else clearInterval(k.current);return function(){clearInterval(k.current),O(5)}}),[E]);var D,P,V=function(){(0,_.JD)("\u91cd\u8981\u901a\u77e5","Approve"),M===p?(0,u.cfV)({userDeclareNotLimited:!0}).then((function(){return N(!1)})):N(!1)};return(0,l.useEffect)((function(){b&&B((null===b||void 0===b?void 0:b.needChoosePopUpCode)?p:h)}),[b]),(0,r.jsxs)(s.Z,{wrapClassName:f().wrapper,visible:E,header:null,footer:null,width:420,closable:!1,maskClosable:!1,centered:!0,afterClose:function(){O(5),"function"===typeof o&&o(),window.sessionStorage.removeItem("mexc_login_cn_warning_modal")},children:[M===h?(0,r.jsx)("div",{className:f().icon,children:(0,r.jsx)("img",{src:"/images/user/cn-warning-modal-icon.png",alt:"mexc"})}):(0,r.jsx)("div",{className:f().iconEn,children:(0,r.jsx)("img",{src:"/static/images/user/en-warning-modal-icon.png",alt:"mexc"})}),(0,r.jsx)("h4",{className:f().title,children:v("mc_user_notification_warning")}),M===h?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{className:f().desc,children:null!==(D=null===S||void 0===S?void 0:S[null===b||void 0===b?void 0:b.popUpCode])&&void 0!==D?D:null===b||void 0===b?void 0:b.popUpText}),(0,r.jsx)("div",{className:f().handle,children:(0,r.jsxs)(a.Z,{disabled:R>0,onClick:V,block:!0,type:"primary",size:"large",children:[v("common:mc_common_sure"),R>0?" ".concat(R,"S"):""]})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{className:f().descEn,children:null!==(P=null===S||void 0===S?void 0:S[null===b||void 0===b?void 0:b.needChoosePopUpCode])&&void 0!==P?P:null===b||void 0===b?void 0:b.needChoosePopUpText}),(0,r.jsxs)("div",{className:f().enHandle,children:[(0,r.jsx)(a.Z,{loading:T,onClick:V,size:"middle",children:v("common:mc_common_warning_modal_no")}),(0,r.jsx)(a.Z,{loading:T,onClick:q,size:"middle",children:v("common:mc_common_warning_modal_yes")})]})]})]})}},52908:function(e,n,o){"use strict";var i=o(57611),t=o(32150),r=o(9134),l=o.n(r),s=o(61395),a=o(30016),c=o.n(a),d=o(64657),u=o(32245),_=o(67597),m=o(11896),g=o(56304);n.Z=function(e){var n=e.isModal,o=e.callback,r=e.onBack,a=(0,s.Z)("auth").t,v=(0,u.le)().otherLoginBindInfo,f=(null===v||void 0===v?void 0:v.type)||"APPLE",h=g.bV[null===f||void 0===f?void 0:f.toUpperCase()]||f,p=function(e){(0,m.t9)(e),null===o||void 0===o||o(e)};return(0,_.useEffect)((function(){(0,m._C)(h)}),[h]),(0,i.jsx)("div",{className:l()(c().registerLoginBindModal,n&&c().inModal),children:(0,i.jsxs)("div",{className:"content",children:[!n&&(0,i.jsxs)("h3",{className:"title",children:[(0,i.jsx)("span",{className:"anticon anticon-arrow-right icon-dir-rtl",onClick:function(){(0,m.TY)(),null===r||void 0===r||r()},children:(0,i.jsx)(d.Z,{className:"iconfont iconicon_back svg-icon"})}),a("mc_auth_user_link_your_mexc_account")]}),(0,i.jsx)("div",{className:"info",children:a("mc_auth_user_has_one_mexc_account",{thirdType:h})}),(0,i.jsx)(t.Z,{className:"choose-btn",size:"large",type:"primary",onClick:function(){p(g.gz.REGISTER_BIND)},children:a("mc_auth_user_register_new_account")}),(0,i.jsx)(t.Z,{className:"choose-btn",size:"large",onClick:function(){p(g.gz.LOGIN_BIND)},children:a("mc_auth_user_link_to_existing_account")})]})})}},82136:function(e,n,o){"use strict";o.d(n,{Z:function(){return a}});var i=o(1997),t=o(51726),r=o(67597),l=(o(5491),o(72809)),s=o(98303);function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.actions,o=void 0===n?{}:n,a=e.language,c=void 0===a?"en-US":a,d=(0,r.useState)(),u=d[0],_=d[1],m=(0,r.useState)(!1),g=m[0],v=m[1],f=(0,r.useState)(),h=f[0],p=f[1],I=(0,r.useRef)();(0,r.useEffect)((function(){(0,l.xNh)({action:"robot."}).then((function(e){0===(null===e||void 0===e?void 0:e.code)&&_(null===e||void 0===e?void 0:e.data)}))}),[]),(0,r.useEffect)((function(){if(u){var e=u.geetestV4;if(window.initGeetest4&&e&&e.captchaId){var n=s._P[c]||s._P["en-US"],r=e.captchaId;window.initGeetest4({captchaId:r,product:"bind",language:n,onError:function(e){o.onError&&o.onError(e)}},(function(e){e.onReady((function(){v(!0)})),e.onSuccess((0,i.Z)((function(){var n,i,r,s,a,c;return(0,t.__generator)(this,(function(t){return(i=e.getValidate())&&(r="geetest ".concat(window.btoa(JSON.stringify({lotNumber:i.lot_number,captchaOutput:i.captcha_output,passToken:i.pass_token,genTime:i.gen_time}))),o.setData&&o.setData(r),I.current&&(s=I.current,a=s.action,c=s.params,(0,l.Uwu)(a,c,r))),null===e||void 0===e||null===(n=e.reset)||void 0===n||n.call(e),[2]}))}))),e.onError(function(){var e=(0,i.Z)((function(e){return(0,t.__generator)(this,(function(n){return o.onError&&o.onError(e),[2]}))}));return function(n){return e.apply(this,arguments)}}()),p(e)}))}else console.error("initGeetest4 probe error")}}),[u]);var b=function(e,n){var o;g&&e&&(null===h||void 0===h||null===(o=h.showCaptcha)||void 0===o||o.call(h),I.current={action:e,params:n})};return{isReady:g,doCheck:b}}},99911:function(e){e.exports={tabs:"LoginForm_tabs__Wd3c3",tab:"LoginForm_tab__vMJHq",active:"LoginForm_active__d6Muz",tips:"LoginForm_tips__wdpKI",links:"LoginForm_links__1E0Ex",toRight:"LoginForm_toRight__6_eqR",center:"LoginForm_center__rjRAI",loginFormContent:"LoginForm_loginFormContent__eOah4",hasQrcodeLogin:"LoginForm_hasQrcodeLogin__1KtZy",left:"LoginForm_left__qk6ER",bindForm:"LoginForm_bindForm__MtfS9",loginFormContentModal:"LoginForm_loginFormContentModal__UncR_",authCodeLeft:"LoginForm_authCodeLeft__ZkVJj",loginRegisterBindModalVisible:"LoginForm_loginRegisterBindModalVisible__7N6v6",noWidth:"LoginForm_noWidth__fIDWN",wrapper:"LoginForm_wrapper__PVQ3l",wrapperShow:"LoginForm_wrapperShow__oNd6t",item:"LoginForm_item__Z0EbW",itemFocused:"LoginForm_itemFocused__fzmsB",otherLogin:"LoginForm_otherLogin__NA0qO",otherLoginTitle:"LoginForm_otherLoginTitle__8OyRa",otherLoginTitleText:"LoginForm_otherLoginTitleText__mIMFm",otherLoginHandle:"LoginForm_otherLoginHandle__2rQVc",otherLoginItem:"LoginForm_otherLoginItem__8zZOl",itemIconWrapper:"LoginForm_itemIconWrapper__ZmtNm",itemIcon:"LoginForm_itemIcon__pbkge",itemAppleIcon:"LoginForm_itemAppleIcon__0LbN2",itemTelegramIcon:"LoginForm_itemTelegramIcon__UF5RD",kakaoLoginItem:"LoginForm_kakaoLoginItem__FZVVh",bindTabs:"LoginForm_bindTabs__yUL8Y",know_links:"LoginForm_know_links__ZIQPT"}},98121:function(e){e.exports={wrapper:"qrcode-login_wrapper__agi1J",qrcodeWrapper:"qrcode-login_qrcodeWrapper__sOsyE",qrcodeWrapperDisabled:"qrcode-login_qrcodeWrapperDisabled__PGni9",qrcode:"qrcode-login_qrcode__ri_hu",disabledMaskContent:"qrcode-login_disabledMaskContent__MLOdx",disabledMaskText:"qrcode-login_disabledMaskText__CL_Di",disabledMaskButton:"qrcode-login_disabledMaskButton__d0X0d",confirmIcon:"qrcode-login_confirmIcon__Qo5Uo",title:"qrcode-login_title__dKE_y",desc:"qrcode-login_desc__kw2Ov",download:"qrcode-login_download__s3zbd",component_qr_code:"qrcode-login_component_qr_code__cVz9c"}},305:function(e){e.exports={wrapper:"cn-warning-modal_wrapper__shm8_",icon:"cn-warning-modal_icon__xS_HC",iconEn:"cn-warning-modal_iconEn__5q02U",title:"cn-warning-modal_title__cn1gO",desc:"cn-warning-modal_desc__MqsNa",descEn:"cn-warning-modal_descEn__Vlm7B",handle:"cn-warning-modal_handle__2y6VU",enHandle:"cn-warning-modal_enHandle__QqLE3"}},30016:function(e){e.exports={registerLoginBindModal:"register-login-bind-modal_registerLoginBindModal__avOs9",inModal:"register-login-bind-modal_inModal__Afz_E"}},27037:function(e){e.exports={tabs:"login_tabs__wA1Ky",tab:"login_tab__DiwbR",active:"login_active__z2byL",tips:"login_tips__pisry",links:"login_links__QsJzG",toRight:"login_toRight__MZQ7h",center:"login_center__IWF0Z",loginFormContent:"login_loginFormContent__unYSk",hasQrcodeLogin:"login_hasQrcodeLogin__7X1tV",left:"login_left__f0lLE",bindForm:"login_bindForm__Kan9y",loginFormContentModal:"login_loginFormContentModal___6wHu",authCodeLeft:"login_authCodeLeft__hcmjm",loginRegisterBindModalVisible:"login_loginRegisterBindModalVisible__WCmd5",noWidth:"login_noWidth__x2_5h"}}}]);