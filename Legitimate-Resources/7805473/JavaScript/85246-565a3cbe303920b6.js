(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[85246],{85738:function(e,t,n){"use strict";var i=n(17043),o=n(91677),r=n(22713),a=n(57044),s=n(16946),u=n(58489),l=n(57611),c=n(67597),d=n(71037),p=n.n(d),f=n(9134),h=n.n(f),v=function(e){(0,r.Z)(n,e);var t=(0,u.Z)(n);function n(e){var o;(0,i.Z)(this,n),o=t.call(this,e);var r=e.fields,a=e.type,s=e.isValid,u=e.disabled,l=e.filterKeyCodes,c=e.forceUppercase,d=e.value;c&&(d=d.toUpperCase()),o.state={focusIndex:0,value:d,fields:r,type:a,input:[],isValid:s,disabled:u,filterKeyCodes:l,defaultInputStyle:{fontFamily:"monospace",MozAppearance:"textfield",borderRadius:"6px",border:"1px solid",boxShadow:"0px 0px 10px 0px rgba(0,0,0,.10)",margin:"4px",paddingLeft:"8px",paddingRight:0,width:"36px",height:"42px",fontSize:"32px",boxSizing:"border-box"}};for(var p=0;p<Number(o.state.fields);p+=1)if(p<32){var f=o.state.value[p]||"";o.state.input.push(f)}return o.textInput=[],o.uuid=o.uuidv4(),o}return(0,o.Z)(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t={isValid:e.isValid,value:e.value,disabled:e.disabled};if(!e.value&&this.props.value){for(var n=[],i=0;i<Number(this.state.fields);i+=1)if(i<32){var o=e.value[i]||"";n.push(o)}t.input=n,t.focusIndex=0,this.textInput[0].focus()}this.setState(t)}},{key:"handleBlur",value:function(e){this.handleTouch(e.target.value)}},{key:"uuidv4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}},{key:"handleTouch",value:function(e){var t=this.props,n=t.touch,i=t.untouch,o=t.name;"function"===typeof n&&"function"===typeof i&&(""===e?n(o):i(o))}},{key:"handleChange",value:function(e){var t=this,n=this.props,i=n.filterChars,o=n.filterCharsIsWhitelist,r=String(e.target.value);this.props.forceUppercase&&(r=r.toUpperCase()),"number"!==this.state.type&&"tel"!==this.state.type||(r=r.replace(/[^\d]/g,""));var a=r=r.split("").filter((function(e){return o?i.includes(e):!i.includes(e)})).join("");if(""!==r){var s=this.state.input.slice();r.length>1?r.split("").map((function(n,i){return Number(e.target.dataset.id)+i<t.props.fields&&(s[Number(e.target.dataset.id)+i]=n),!1})):s[Number(e.target.dataset.id)]=r,s.map((function(e,n){return t.textInput[n]&&(t.textInput[n].value=e),!1}));var u=this.textInput[e.target.dataset.id<s.length?Number(e.target.dataset.id)+1:e.target.dataset.id];u&&(u.focus(),u.select()),a=s.join(""),this.setState({value:s.join(""),input:s})}this.props.onChange&&a&&this.props.onChange(a),this.handleTouch(a)}},{key:"handleKeyDown",value:function(e){var t,n,i=Number(e.target.dataset.id),o=this.textInput[i+1],r=this.textInput[i-1];switch(this.state.filterKeyCodes.length>0&&this.state.filterKeyCodes.map((function(t){if(t===e.keyCode)return e.preventDefault(),!0})),e.keyCode){case 8:e.preventDefault(),this.textInput[i].value="",(t=this.state.input.slice())[i]="",n=t.join(""),this.setState({value:n,input:t}),""===this.textInput[i].value&&r&&(r.focus(),r.select()),this.props.onChange&&this.props.onChange(n);break;case 37:e.preventDefault(),r&&(r.focus(),r.select());break;case 39:e.preventDefault(),o&&(o.focus(),o.select());break;case 38:case 40:e.preventDefault();break;case 69:if("number"===e.target.type){e.preventDefault();break}}this.handleTouch(n)}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,i=t.style,o=void 0===i?{}:i,r=t.inputStyle,u=void 0===r?{}:r,c=t.inputStyleInvalid,d=void 0===c?{}:c,p=t.type,f=t.autoFocus,v=t.autoComplete,m=t.pattern,b=t.inputMode,_=t.placeholder,y=this.state,g=y.focusIndex,x=y.disabled,C=y.input,I=y.isValid,j=y.defaultInputStyle,k={container:(0,a.Z)({display:"inline-block"},o),input:I?u:d};return n||0!==Object.keys(u).length||Object.assign(u,(0,s.Z)((0,a.Z)({},j),{color:"black",backgroundColor:"white",borderColor:"lightgrey"})),n||0!==Object.keys(d).length||Object.assign(d,(0,s.Z)((0,a.Z)({},j),{color:"#b94a48",backgroundColor:"#f2dede",borderColor:"#eed3d7"})),x&&Object.assign(k.input,{cursor:"not-allowed",color:"lightgrey",borderColor:"lightgrey",backgroundColor:"#efeff1"}),(0,l.jsx)("div",{className:h()(n,"react-code-input"),style:k.container,children:C.map((function(t,n){return(0,l.jsx)("input",{ref:function(t){e.textInput[n]=t},className:g===n?"active":"",id:"".concat(e.uuid,"-").concat(n),"data-id":n,autoFocus:f&&0===n?"autoFocus":"",value:t,type:p,min:0,max:9,maxLength:C.length===n+1?1:C.length,style:k.input,autoComplete:v,onFocus:function(t){t.target.select(t),e.setState({focusIndex:n})},onBlur:function(t){e.handleBlur(t),e.setState({focusIndex:void 0})},onChange:function(t){return e.handleChange(t)},onKeyDown:function(t){return e.handleKeyDown(t)},disabled:x,"data-valid":I,pattern:m,inputMode:b,placeholder:_},"input_".concat(n))}))})}}]),n}(c.Component);v.defaultProps={autoComplete:"off",autoFocus:!0,isValid:!0,disabled:!1,forceUppercase:!1,fields:4,value:"",type:"text",filterKeyCodes:[189,190],filterChars:["-","."],filterCharsIsWhitelist:!1},v.propTypes={type:p().oneOf(["text","number","password","tel"]),fields:p().number,placeholder:p().string,value:p().string,onChange:p().func,name:p().string,touch:p().func,untouch:p().func,className:p().string,isValid:p().bool,disabled:p().bool,style:p().object,inputStyle:p().object,inputStyleInvalid:p().object,autoComplete:p().string,autoFocus:p().bool,forceUppercase:p().bool,filterKeyCodes:p().array,filterChars:p().array,filterCharsIsWhitelist:p().bool,pattern:p().string,inputMode:p().oneOf(["verbatim","latin","latin-name","latin-prose","full-width-latin","kana","kana-name","katakana","numeric","tel","email","url"])},t.Z=v},85246:function(e,t,n){"use strict";var i=n(1997),o=n(45361),r=n(99097),a=n(51726),s=n(57611),u=n(67597),l=n(85738),c=n(94463),d=n(68721),p=n(61395),f=n(15129),h=n(83920),v=n(32689),m=n(72809),b=n(41698),_=n.n(b),y=n(67385),g=n(9134),x=n.n(g),C=n(90469),I=n(56304),j=n(89849),k=n.n(j),S=n(1553),w="/futures-activity/bonus";t.Z=function(e){var t=e.registerData,n=void 0===t?{}:t,b=e.registerLayoutTypeChangeHandle,g=e.isModal,j=e.setRegisterData,Z=(0,p.Z)("auth").t,R=(0,f.useRouter)(),T=R.locale,N=R.query,O=R.locales,D=N.previous,U=N.redirect,M=(0,r.Z)(d.l0.useForm(),1)[0],E=M.validateFields,W=M.isFieldTouched,F=M.getFieldValue,P=M.setFields,K=(0,u.useState)(),B=K[0],L=K[1],V=(0,h.ZP)().data,z=(0,u.useState)(!1),q=z[0],H=z[1],G=(0,u.useRef)(!1),Y=n.mobileCode,A=n.mobile,X=n.email,J=n.token,$=n.type,Q=n.inviteCode,ee=(0,u.useState)(),te=ee[0],ne=ee[1],ie=(0,u.useState)(!1),oe=ie[0],re=ie[1];(0,u.useEffect)((function(){var e=window.sessionStorage.getItem(I.LM);e&&L(JSON.parse(e)),ne(Z("mobile"===$?"mc_auth_verification_mobile":"mc_auth_verification_email"))}),[]),(0,u.useEffect)((function(){"function"===typeof b&&b({title:te})}),[te]);var ae=function(){var e=(0,i.Z)((function(){var e,t,n,i,o;return(0,a.__generator)(this,(function(r){return(0,v.Wr)("User_loginResult",{login_method:(null===B||void 0===B?void 0:B.type)&&(0,I.Dj)(null===B||void 0===B?void 0:B.type)||(0,I.Dj)($),is_success:!0,fail_code:null,fail_reason:null,jira_id:"user-2543"}),g?window.location.reload():((e=(e=D||U)?decodeURIComponent(e):w).startsWith("/")||(t=window.location.hostname.split(".").slice(-2).join("."),n=new URL(e),i=n.hostname||"",o=i.split(".").slice(-2).join("."),e=t===o?e:w),e.startsWith("/")&&(e=(0,v.Ze)(e)?w:e,e=function(e,t){return e.find((function(e){return t.startsWith("/"+e)}))}(O,e)?e:"/".concat(T).concat(e)),setTimeout((function(){window.location.replace(e)}),2e3)),[2]}))}));return function(){return e.apply(this,arguments)}}(),se=function(e){11237===(null===e||void 0===e?void 0:e.code)&&(g?j(null):(window.sessionStorage.removeItem("mexc_register_data"),R.replace({pathname:"/register",query:N})))},ue=function(){var e=(0,i.Z)((function(){return(0,a.__generator)(this,(function(e){return!0===G.current||(G.current=!0,E().then(function(){var e=(0,i.Z)((function(e){var t,n,i,o,r;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return H(!0),i={code:e.code,token:J,deviceId:(null===V||void 0===V?void 0:V.visitorId)?V.visitorId:"unknowndeviceid",requestId:null===V||void 0===V?void 0:V.requestId},(0,v.X1)("sign_up",{method:$}),B?(i.thirdpartyType=B.type,i.bindToken=B.bindToken,[4,(0,m.D0)(i)]):[3,2];case 1:return 0===(o=a.sent()).code&&window.sessionStorage.removeItem(I.LM),[3,4];case 2:return[4,(0,m.N$)(i)];case 3:o=a.sent(),a.label=4;case 4:return(0,c.C6)({email:i.email||null,country:i.country||null,mobile:i.mobile||null,type:B?"\u7ed1\u5b9a\u6ce8\u518c":"REGISTER",sendType:(0,c.jW)({},{},i.email?"email":"mobile"),is_success:0===(null===o||void 0===o?void 0:o.code),fail_code:null===o||void 0===o?void 0:o.code,fail_reason:0===(null===o||void 0===o?void 0:o.code)?"":null===o||void 0===o?void 0:o.msg}),(null===o||void 0===o||null===(t=o.data)||void 0===t?void 0:t.memberId)&&(0,v.fE)(o.data.memberId),(0,v.Wr)("User_registerResult",{requirement_id:140,track_sign:"amochaWeb.b3310.result.User_registerResult",register_method:(0,I.Dj)($),referral_code:Q||"",is_success:null!==(r=null===o||void 0===o?void 0:o.success)&&void 0!==r&&r,fail_reason:(null===o||void 0===o?void 0:o.success)?null:(null===o||void 0===o?void 0:o.msg)||"",fail_code:(null===o||void 0===o?void 0:o.success)?null:(null===o||void 0===o?void 0:o.code)||500,error_code:(null===o||void 0===o?void 0:o.success)?null:(null===o||void 0===o?void 0:o.code)||500,jira_id:"user-2756",member_id:null===o||void 0===o||null===(n=o.data)||void 0===n?void 0:n.memberId,third_name:(null===i||void 0===i?void 0:i.thirdpartyType)&&(0,I.Dj)(null===i||void 0===i?void 0:i.thirdpartyType)}),(0,v.Zz)({register_time:_()().format("YYYY-MM-DD HH:mm:ss")}),0===(null===o||void 0===o?void 0:o.code)?(window.sessionStorage.removeItem("mexc_register_data"),window.sessionStorage.setItem("mexc_index_first_page_view",1),d.yw.success(Z(B?"mc_auth_other_register_success":"mc_auth_register_success"),2),re(!0)):(G.current=!1,se(o),d.yw.error(o.handledMsg,10),setTimeout((function(){P([{name:"code",value:""}]),H(!1)}),1e3)),[2]}}))}));return function(t){return e.apply(this,arguments)}}())),[2]}))}));return function(){return e.apply(this,arguments)}}();return(0,s.jsxs)("div",{className:x()(k().wrapper,g&&k().modalWrapper),children:[!g&&(0,s.jsx)("h4",{className:k().title,children:te}),(0,s.jsx)("p",{className:k().desc,children:(0,s.jsx)(y.Z,{i18nKey:"mobile"===$?"auth:mc_auth_verification_mobile_desc":"auth:mc_auth_verification_email_desc",components:{span:(0,s.jsx)("span",{})},values:{account:"mobile"===$?"+".concat(null!==Y&&void 0!==Y?Y:"--"," ").concat(null!==A&&void 0!==A?A:"--"):null!==X&&void 0!==X?X:"--"}})}),(0,s.jsxs)(d.l0,{className:k().form,form:M,layout:"vertical",requiredMark:!1,children:[(0,s.jsx)(d.l0.Item,{name:"code",noStyle:!0,children:(0,s.jsx)(l.Z,{fields:6,type:"number",className:x()(k().codeInput,(0,o.Z)({},k().disabled,q)),onChange:function(e){6===e.length&&ue()}})}),(0,s.jsxs)("div",{className:k().captchaSend,children:["email"===$&&(0,s.jsx)(c.ZP,{buttonType:"link",sendType:"email",autoSend:!0,sendParams:{type:"REGISTER_SUBMIT",registerSubmitToken:J},sendResultCallback:se}),"mobile"===$&&(0,s.jsx)(c.ZP,{buttonType:"link",sendType:"mobile",autoSend:!0,mobileCode:Y,sendParams:{type:"REGISTER_SUBMIT",registerSubmitToken:J},sendResultCallback:se})]}),(0,s.jsx)(d.l0.Item,{className:k().submit,shouldUpdate:!0,children:function(){return(0,s.jsx)(d.zx,{size:"large",block:!0,type:"primary",loading:q,disabled:!W("code")||6!==F("code").length,onClick:ue,children:Z("common:mc_common_sure")})}}),(0,s.jsx)("div",{className:k().captchaHelp,children:(0,s.jsx)(S.Z,{supportLanguages:"mobile"===$?["en-US","zh-CN"]:["en-US","zh-CN","ko-KR"],articleId:"mobile"===$?"360059827912":"360029388132",rel:"nofollow noopener noreferrer",children:Z("mc_auth_captcha_unreceived")})})]}),(0,s.jsx)(C.Z,{visible:oe,afterClose:ae})]})}},89849:function(e){e.exports={wrapper:"verification_wrapper__8OvM0",modalWrapper:"verification_modalWrapper__4cnOE",title:"verification_title__L1DdX",desc:"verification_desc__MooBB",codeInput:"verification_codeInput__b6bl9",disabled:"verification_disabled__yp4q_",captchaSend:"verification_captchaSend__LGBSP",submit:"verification_submit__5Ie00",captchaHelp:"verification_captchaHelp__RjfV_"}},24751:function(e,t,n){"use strict";function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Z:function(){return i}})},58489:function(e,t,n){"use strict";function i(e){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},i(e)}function o(e){return i(e)}n.d(t,{Z:function(){return u}});var r=n(24751),a=n(56902);function s(e,t){return!t||"object"!==(0,a.Z)(t)&&"function"!==typeof t?(0,r.Z)(e):t}function u(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=o(e);if(t){var r=o(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return s(this,n)}}},22713:function(e,t,n){"use strict";function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}n.d(t,{Z:function(){return o}})},56902:function(e,t,n){"use strict";function i(e){return e&&e.constructor===Symbol?"symbol":typeof e}n.d(t,{Z:function(){return i}})}}]);