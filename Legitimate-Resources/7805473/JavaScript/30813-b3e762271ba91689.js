(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[30813],{76956:function(e,i,o){"use strict";o.d(i,{Z:function(){return U}});var n=o(57044),t=o(96151),r=o(57611),a=o(9134),s=o.n(a),l=o(16946),c=o(99097),m=o(67597),d=o(72809),_=o(11896),u=o(15129),v=o(61395),p=o(68721),g=o(83999),h=o(2595),f=o(67385),b=o(77521),x=o(81547),j=o(35121),w=o(64657),C=o(44657),I=o(4426),L=o(60445),N=o(81987),y=o.n(N),k=o(83920),T=o(97579),Z=o(84204),O=o(82136),E=o(60552),S=o(51273),A=o(49880),M=o(86633),R=o(3265),F=o(84916),B=o(56503),P=o(51688),W=o.n(P),z=o(32245),H=o(56304);var V=function(e){var i=e.preRegister,o=e.type,t=e.setType,a=e.setModalType,N=e.setRegisterData,P=(0,v.Z)("auth").t,V=(0,u.useRouter)(),D=V.locale,K=V.query,G=(0,x.Z)().data,U=(0,c.Z)(p.l0.useForm(),1)[0],q=U.validateFields,J=U.getFieldError,X=U.getFieldValue,Q=U.setFields,Y=U.setFieldsValue,$=_.OX.test(i),ee=_.m0.test(i),ie=(0,m.useState)([]),oe=ie[0],ne=ie[1],te=(0,m.useState)(),re=te[0],ae=te[1],se=(0,m.useState)(!1),le=se[0],ce=se[1],me=(0,m.useState)(!1),de=me[0],_e=me[1],ue=(0,m.useState)(!1),ve=ue[0],pe=ue[1],ge=(0,k.ZP)().data,he=(0,m.useState)(),fe=he[0],be=he[1],xe=(0,m.useState)(),je=xe[0],we=xe[1],Ce=(0,z.le)(),Ie=Ce.isModal,Le=Ce.setLoginOrRegisterStep,Ne=Ce.otherLoginBindInfo,ye=Ce.otherLoginAuthSuccess,ke=Ce.setOnPreStep,Te=(0,c.Z)((0,Z.my)({actions:{setData:be},language:D,params:{type:"REGISTER_CHECK",serviceType:Ne?"register_with_third_login":"register"}}),3),Ze=Te[0],Oe=Te[1],Ee=Te[2],Se=(0,O.Z)(),Ae=Se.isReady,Me=Se.doCheck;(0,m.useEffect)((function(){(0,d.LLM)().then((function(e){0===(null===e||void 0===e?void 0:e.code)&&ne(e.data)}))}),[]);var Re=function(){var e;Ae&&Me(Ne?"robot.register.oauth.".concat(o):"robot.register.".concat(o)),G&&G.limitReg?_e(!0):null===Ze||void 0===Ze||null===(e=Ze.showCaptcha)||void 0===e||e.call(Ze)},Fe=(0,b.debounce)((function(e){e?(0,d.wfh)(e).then((function(e){0===(null===e||void 0===e?void 0:e.code)?Q([{name:"inviteCode",errors:[]}]):(Q([{name:"inviteCode",errors:[P("mc_auth_invite_code_error")]}]),window._setCookie("mexc_invite_code","",-1))})):Q([{name:"inviteCode",errors:[]}])}),300),Be=function(){Ie?a("login"):window.location.href="/".concat(D,"/login")},Pe=function(){var e,i,n,t,r,a=!X("agreed")||!X("password")||(null===(e=J("password"))||void 0===e?void 0:e.length);X("inviteCode")&&(a=a||(null===(i=J("inviteCode"))||void 0===i?void 0:i.length));"mobile"===o&&(a=a||!(null===(n=X("mobileObject"))||void 0===n?void 0:n.mobile)||!(null===(t=X("mobileObject"))||void 0===t?void 0:t.mobileCode)||!_.OX.test(null===(r=X("mobileObject"))||void 0===r?void 0:r.mobile));if("email"===o&&(a=a||!X("email")||!_.m0.test(X("email")),_.m0.test(X("email")))){var s=X("email").match(/@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/)[0];a=a||oe.includes(s.substring(1))}return a},We=(0,m.useCallback)((function(e,i){("mobile"===o&&(null===e||void 0===e?void 0:e.mobile)&&(null===e||void 0===e?void 0:e.mobileCode)||"email"===o&&e)&&setTimeout((function(){var e,n,t=Ne?Ne.type:o;(0,B.$k)({is_dropitem:Boolean(i),account_type:null===t||void 0===t?void 0:t.toLocaleLowerCase().replace(/^\S/,(function(e){return e.toUpperCase()})),service_type:Ne?"\u7ed1\u5b9a\u6ce8\u518c":"\u6ce8\u518c",is_success:!(null===(e=J("mobile"===o?"mobileObject":"email"))||void 0===e?void 0:e.length),fail_reason:null===(n=J("mobile"===o?"mobileObject":"email"))||void 0===n?void 0:n[0]})}),0)}),[o,Ne,J]),ze=function(e){e.target.value&&setTimeout((function(){var e,i;(0,_.Wr)("User_fillPassword",{service_type:Ne?"\u7ed1\u5b9a\u6ce8\u518c":"\u6ce8\u518c",is_success:!(null===(e=J("password"))||void 0===e?void 0:e.length),fail_reason:null===(i=J("password"))||void 0===i?void 0:i[0]})}),0),pe(!1)},He=function(){var e;return X("password")?ve?"":(null===(e=J("password"))||void 0===e?void 0:e.length)?J("password"):null:null},Ve=function(){q().then((function(e){we(!0);var i={type:"REGISTER_CHECK",inviteCode:e.inviteCode,deviceId:(null===ge||void 0===ge?void 0:ge.visitorId)?ge.visitorId:"unknowndeviceid",requestId:null===ge||void 0===ge?void 0:ge.requestId},n={"captcha-token":fe};"mobile"===o?(i.mobile=e.mobileObject.mobile,i.country=e.mobileObject.mobileCode,i.password=T.Z.encrypt("".concat(y()(e.password),"|").concat(Date.now()),y()(e.mobileObject.mobile).substring(8,24))):"email"===o&&(i.email=e.email,i.password=T.Z.encrypt("".concat(y()(e.password),"|").concat(Date.now()),y()(e.email).substring(8,24))),(0,d.fM9)(i,n).then((function(i){if(0===(null===i||void 0===i?void 0:i.code)){var n,t;Le(z.PK.VERIFICATION),we(!1);var r={type:o,email:e.email,mobile:null===(n=e.mobileObject)||void 0===n?void 0:n.mobile,mobileCode:null===(t=e.mobileObject)||void 0===t?void 0:t.mobileCode,token:i.data,inviteCode:e.inviteCode};Ne&&window.sessionStorage.setItem(H.LM,JSON.stringify(Ne)),Ie?N(r):(window.sessionStorage.setItem("mexc_register_data",JSON.stringify(r)),V.push({pathname:"/register-verification",query:K}))}else!function(e){var i,o=e.code,n=e.handledMsg;switch(o){case 10014:case 11204:case 10022:i="email";break;case 10044:case 10027:i="mobileObject";break;case 40008:i="password";break;case 10043:i="inviteCode";break;default:i=""}i?Q([{name:i,errors:[n]}]):p.yw.error(n,5)}(i),setTimeout((function(){we(!1)}),1e3),Ee&&Oe();be(null)}))}))},De=function(e,i){ye(e,i,(function(){if(null===i||void 0===i?void 0:i.bind){var e,o=JSON.stringify(i);null===window||void 0===window||null===(e=window.sessionStorage)||void 0===e||e.setItem(H.Wl,o),Ie?a("login"):V.push("login")}}))};return(0,m.useEffect)((function(){var e=K.inviteCode||window._getCookie("mexc_invite_code")||"";e&&(Fe(e),ae(e),Y({inviteCode:e}),ce(!0))}),[K.inviteCode]),(0,m.useEffect)((function(){($||ee)&&q([$?"mobile":"email"])}),[oe]),(0,m.useEffect)((function(){fe&&Ve()}),[fe]),(0,r.jsxs)("div",{className:s()(W().wrapper,Ie&&W().modalWrapper),children:[!Ie&&(0,r.jsxs)("h3",{className:W().title,children:[Ne?(0,r.jsx)("span",{className:"anticon anticon-arrow-right icon-dir-rtl",onClick:function(){(0,_.Hu)(),ke()},children:(0,r.jsx)(w.Z,{className:"iconfont iconicon_back svg-icon"})}):(0,r.jsx)(r.Fragment,{}),P(Ne?"mc_auth_other_register":"mc_auth_register_title")]}),(0,r.jsxs)("div",{className:W().tabs,children:[(0,r.jsx)("div",{className:s()(W().tab,"email"===o&&W().active),onClick:function(){return t("email")},children:P("common:mc_common_currency_email")}),(0,r.jsx)("div",{className:s()(W().tab,"mobile"===o&&W().active),onClick:function(){return t("mobile")},children:P("common:mc_common_mobile")})]}),(0,r.jsxs)(p.l0,{className:W().form,form:U,layout:"vertical",name:"register",requiredMark:!1,children:["mobile"===o&&(0,r.jsx)(p.l0.Item,{label:P("common:mc_common_phone"),name:"mobileObject",validateFirst:!0,initialValue:{mobile:$?i:""},rules:[function(){return{validator:function(e,i){return i.mobile&&!_.OX.test(i.mobile)?Promise.reject(P("common:mc_common_phone_reg")):Promise.resolve()}}}],getValueFromEvent:function(e){var i;return(0,l.Z)((0,n.Z)({},e),{mobile:null===e||void 0===e||null===(i=e.mobile)||void 0===i?void 0:i.trim()})},children:(0,r.jsx)(g.Z,{businessType:"REGISTER",inputProps:{autoComplete:"new-password",allowClear:!0},onBlur:function(e){return We(e)}})}),"email"===o&&(0,r.jsx)(p.l0.Item,{label:P("mc_auth_login_email"),name:"email",validateFirst:!0,initialValue:ee?i:"",rules:[{pattern:_.m0,message:P("mc_auth_login_email_reg")},function(){return{validator:function(e,i){if(i){var o=i.match(/@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/)[0];if(oe.includes(o.substring(1)))return Promise.reject(P("mc_auth_register_email_forbid_tip"))}return Promise.resolve()}}}],getValueFromEvent:function(e){return null===e||void 0===e?void 0:e.trim()},children:(0,r.jsx)(F.Z,{initialValue:ee?i:"",allowClear:!0,autoComplete:"new-password",className:"mx-size-lg",placeholder:P("mc_auth_login_email"),onBlur:We})}),(0,r.jsx)(p.l0.Item,{shouldUpdate:!0,noStyle:!0,children:function(){return(0,r.jsx)(p.l0.Item,{label:P("common:mc_common_password"),validateFirst:!0,name:"password",help:He(),rules:[{pattern:_.ir.base,message:P("common:mc_common_password_format_summary")},{pattern:_.ir.length,message:P("common:mc_common_password_format_summary")},{pattern:_.ir.capitals,message:P("common:mc_common_password_format_summary")},{pattern:_.ir.lowerLetters,message:P("common:mc_common_password_format_summary")},{pattern:_.ir.numbers,message:P("common:mc_common_password_format_summary")},{pattern:_.ir.symbols,message:P("common:mc_common_password_format_summary")}],children:(0,r.jsx)(h.Z,{autoComplete:"new-password",className:"mx-size-lg",placeholder:P("common:mc_common_password"),onFocus:function(){return pe(!0)},onBlur:ze})})}}),(0,r.jsx)(p.l0.Item,{className:s()(W().inviteCodeInput,!le&&W().inviteCodeInputHide),label:(0,r.jsxs)("span",{className:W().inviteCodeLabel,onClick:function(){X("inviteCode")||ce(!le)},children:[P("common:mc_common_invite_code"),(0,r.jsx)(C.Z,{className:s()(W().inviteCodeLabelArrow,le&&W().visible)})]}),name:"inviteCode",initialValue:re,getValueFromEvent:function(e){return e.target.value.trim()},children:(0,r.jsx)(p.II,{allowClear:!0,className:"mx-size-lg",disabled:!!re,placeholder:P("common:mc_common_invite_code"),onChange:function(e){var i;return Fe(null===e||void 0===e||null===(i=e.target)||void 0===i?void 0:i.value)}})}),(0,r.jsx)(p.l0.Item,{className:W().agreed,name:"agreed",valuePropName:"checked",children:(0,r.jsx)(p.XZ,{children:(0,r.jsx)(f.Z,{i18nKey:"auth:mc_common_login_privacy_agreed",components:{a:(0,r.jsx)("a",{className:W().agreedLink,target:"_blank",href:"/".concat(D,"/terms"),rel:"noopener noreferrer"})}})})}),(0,r.jsx)(p.l0.Item,{shouldUpdate:!0,children:function(){return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:W().bonus,children:(0,r.jsxs)("div",{className:W().bonusInner,children:[(0,r.jsx)("img",{src:"".concat("https://static.mocortech.com/www/static","/images/auth/bonus.png")}),P("mc_auth_claim_bonus")]})}),(0,r.jsx)(p.zx,{className:W().registerButton,size:"large",block:!0,type:"primary",disabled:Pe(),onClick:Re,loading:je,children:P(Ne?"mc_auth_other_register":"common:mc_common_nav_register")})]})}}),!Ne&&(0,r.jsxs)("div",{className:W().otherLogin,children:[(0,r.jsx)("div",{className:W().otherLoginTitle,children:(0,r.jsx)("div",{className:W().otherLoginTitleText,children:P("mc_auth_other_login_title")})}),(0,r.jsxs)("div",{className:W().otherLoginHandle,children:[(0,r.jsx)(S.Z,{onSuccess:function(e){return De("GOOGLE",e)},children:(0,r.jsxs)("div",{className:W().otherLoginItem,children:[(0,r.jsx)("div",{className:W().itemIconWrapper,children:(0,r.jsx)(R.FZO,{className:W().itemIcon,"aria-hidden":"true"})}),"Google"]})}),(0,r.jsx)(A.Z,{onSuccess:function(e){return De("APPLE",e)},children:(0,r.jsxs)("div",{className:W().otherLoginItem,children:[(0,r.jsx)("div",{className:W().itemIconWrapper,children:(0,r.jsx)(I.Z,{className:W().itemAppleIcon,"aria-hidden":"true"})}),"Apple"]})}),(0,r.jsx)(M.ZP,{onSuccess:function(e){return De("METAMASK",e)},children:(0,r.jsxs)("div",{className:W().otherLoginItem,children:[(0,r.jsx)("div",{className:W().itemIconWrapper,children:(0,r.jsx)(R.BPK,{className:W().itemAppleIcon,"aria-hidden":"true"})}),H.bV.METAMASK]})}),(0,r.jsx)(E.Z,{onSuccess:function(e){return De("TELEGRAM",e)},children:(0,r.jsxs)("div",{className:W().otherLoginItem,children:[(0,r.jsx)("div",{className:W().itemIconWrapper,children:(0,r.jsx)(L.Z,{className:s()(W().itemTelegramIcon)})}),"Telegram"]})})]})]}),!Ne&&(0,r.jsxs)("div",{className:s()(W().footerHandle,Ne&&W().isOtherLoginRegister),children:[Ne&&(0,r.jsx)("div",{children:(0,r.jsx)("a",{onClick:Be,children:P("mc_auth_other_login_back_link")})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{children:P("mc_auth_register_extra")}),D.startsWith("zh-")?"":(0,r.jsx)(r.Fragment,{children:"\xa0"}),(0,r.jsx)("a",{onClick:Be,children:P("common:mc_common_to_login")})]})]})]}),de&&(0,r.jsx)(j.Z,{warningCode:null===G||void 0===G?void 0:G.regLimitCode,warningMsg:null===G||void 0===G?void 0:G.regLimitText,flag:de,close:function(){return _e(!1)}})]})},D=o(52908),K=o(98024),G=o.n(K),U=function(e){var i=e.children,o=e.setModalType,a=(0,t.Z)(e,["children","setModalType"]),l=(0,z.le)(),c=l.isModal,m=l.loginRegisterBindModalVisible,d=l.setOnPreStep,_=l.onChooseLoginOrRegisterBind;return(0,r.jsx)("div",{className:s()(G().formWrapper,G().inModal),children:m?(0,r.jsx)(D.Z,{isModal:c,callback:function(e){_(e,(function(){o("login")}))},onBack:function(){d()}}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(V,(0,n.Z)({onBack:d,isModal:c,setModalType:o},a)),i]})})}},51688:function(e){e.exports={wrapper:"form_wrapper__DY_wp",modalWrapper:"form_modalWrapper__FNfzh",title:"form_title__iFlx_",tabs:"form_tabs__bDvVj",tab:"form_tab__L0HE2",active:"form_active__3Ow5s",form:"form_form__TUF89",inviteCodeLabel:"form_inviteCodeLabel__0eVTZ",inviteCodeLabelArrow:"form_inviteCodeLabelArrow__eN65A",visible:"form_visible__heKxB",inviteCodeInput:"form_inviteCodeInput__RpzQJ",inviteCodeInputHide:"form_inviteCodeInputHide__2TERK",inviteInfo:"form_inviteInfo__N_NBa",agreed:"form_agreed__aQfkQ",agreedLink:"form_agreedLink__8BN9_",footerHandle:"form_footerHandle__mDruD",isOtherLoginRegister:"form_isOtherLoginRegister__zzLDG",otherLogin:"form_otherLogin__4J1k3",otherLoginTitle:"form_otherLoginTitle__HpAbn",otherLoginTitleText:"form_otherLoginTitleText__8w6YD",otherLoginHandle:"form_otherLoginHandle__yLT3M",otherLoginItem:"form_otherLoginItem__6R2_N",itemIconWrapper:"form_itemIconWrapper__vJxEu",itemIcon:"form_itemIcon__fB7U1",itemAppleIcon:"form_itemAppleIcon__48hPn",itemTelegramIcon:"form_itemTelegramIcon__iYkp6",kakaoLoginItem:"form_kakaoLoginItem__65ANS",bonus:"form_bonus__BLiqR",bonusInner:"form_bonusInner__L9_xF",registerButton:"form_registerButton__A_HlZ"}},98024:function(e){e.exports={registerBox:"register_registerBox__EfRyy",registerPage:"register_registerPage__ae6DF",wrapper:"register_wrapper__vyyI5",formWrapper:"register_formWrapper__mslcU",codeWrapper:"register_codeWrapper__qcTlI",inModal:"register_inModal__U9fhz"}}}]);