(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[61092],{76956:function(e,o,i){"use strict";i.d(o,{Z:function(){return G}});var n=i(57044),t=i(96151),r=i(57611),a=i(9134),s=i.n(a),l=i(16946),c=i(99097),m=i(67597),d=i(72809),_=i(32689),u=i(15129),v=i(61395),g=i(68721),p=i(83999),h=i(2595),f=i(67385),b=i(77521),x=i(81547),j=i(35121),w=i(64657),I=i(44657),C=i(44150),L=i(4426),N=i(60445),k=i(81987),y=i.n(k),T=i(83920),Z=i(97579),O=i(84204),S=i(82136),E=i(60552),A=i(51273),R=i(49880),F=i(86633),M=i(91888),B=i(78510),P=i(51688),W=i.n(P),z=i(32245),H=i(56304);var K=function(e){var o=e.preRegister,i=e.type,t=e.setType,a=e.setModalType,k=e.setRegisterData,P=(0,v.Z)("auth").t,K=(0,u.useRouter)(),V=K.locale,D=K.query,U=(0,x.Z)().data,G=(0,c.Z)(g.l0.useForm(),1)[0],q=G.validateFields,J=G.getFieldError,X=G.getFieldValue,Q=G.setFields,Y=G.setFieldsValue,$=_.OX.test(o),ee=_.m0.test(o),oe=(0,m.useState)([]),ie=oe[0],ne=oe[1],te=(0,m.useState)(),re=te[0],ae=te[1],se=(0,m.useState)(!1),le=se[0],ce=se[1],me=(0,m.useState)(!1),de=me[0],_e=me[1],ue=(0,m.useState)(!1),ve=ue[0],ge=ue[1],pe=(0,T.ZP)().data,he=(0,m.useState)(),fe=he[0],be=he[1],xe=(0,m.useState)(),je=xe[0],we=xe[1],Ie=(0,z.le)(),Ce=Ie.isModal,Le=Ie.setLoginOrRegisterStep,Ne=Ie.otherLoginBindInfo,ke=Ie.otherLoginAuthSuccess,ye=Ie.setOnPreStep,Te="ko-KR"===V,Ze=(0,c.Z)((0,O.my)({actions:{setData:be},language:V,params:{type:"REGISTER_CHECK",serviceType:Ne?"register_with_third_login":"register"}}),3),Oe=Ze[0],Se=Ze[1],Ee=Ze[2],Ae=(0,S.Z)(),Re=Ae.isReady,Fe=Ae.doCheck;(0,m.useEffect)((function(){(0,d.LL)().then((function(e){0===(null===e||void 0===e?void 0:e.code)&&ne(e.data)}))}),[]);var Me=function(){var e;Re&&Fe(Ne?"robot.register.oauth.".concat(i):"robot.register.".concat(i)),U&&U.limitReg?_e(!0):null===Oe||void 0===Oe||null===(e=Oe.showCaptcha)||void 0===e||e.call(Oe)},Be=(0,b.debounce)((function(e){e?(0,d.wf)(e).then((function(e){0===(null===e||void 0===e?void 0:e.code)?Q([{name:"inviteCode",errors:[]}]):(Q([{name:"inviteCode",errors:[P("mc_auth_invite_code_error")]}]),window._setCookie("mexc_invite_code","",-1))})):Q([{name:"inviteCode",errors:[]}])}),300),Pe=function(){Ce?a("login"):window.location.href="/".concat(V,"/login")},We=function(){var e,o,n,t,r,a=!X("agreed")||!X("password")||(null===(e=J("password"))||void 0===e?void 0:e.length);X("inviteCode")&&(a=a||(null===(o=J("inviteCode"))||void 0===o?void 0:o.length));"mobile"===i&&(a=a||!(null===(n=X("mobileObject"))||void 0===n?void 0:n.mobile)||!(null===(t=X("mobileObject"))||void 0===t?void 0:t.mobileCode)||!_.OX.test(null===(r=X("mobileObject"))||void 0===r?void 0:r.mobile));if("email"===i&&(a=a||!X("email")||!_.m0.test(X("email")),_.m0.test(X("email")))){var s=X("email").match(/@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/)[0];a=a||ie.includes(s.substring(1))}return a},ze=function(e){("mobile"===i&&(null===e||void 0===e?void 0:e.mobile)&&(null===e||void 0===e?void 0:e.mobileCode)||"email"===i&&e)&&setTimeout((function(){var e,o,n=Ne?Ne.type:i;(0,_.Wr)("User_fillAccount",{account_type:null===n||void 0===n?void 0:n.toLocaleLowerCase().replace(/^\S/,(function(e){return e.toUpperCase()})),service_type:Ne?"\u7ed1\u5b9a\u6ce8\u518c":"\u6ce8\u518c",is_success:!(null===(e=J("mobile"===i?"mobileObject":"email"))||void 0===e?void 0:e.length),fail_reason:null===(o=J("mobile"===i?"mobileObject":"email"))||void 0===o?void 0:o[0]})}),0)},He=function(e){e.target.value&&setTimeout((function(){var e,o;(0,_.Wr)("User_fillPassword",{service_type:Ne?"\u7ed1\u5b9a\u6ce8\u518c":"\u6ce8\u518c",is_success:!(null===(e=J("password"))||void 0===e?void 0:e.length),fail_reason:null===(o=J("password"))||void 0===o?void 0:o[0]})}),0),ge(!1)},Ke=function(){var e;return X("password")?ve?"":(null===(e=J("password"))||void 0===e?void 0:e.length)?J("password"):null:null},Ve=function(){q().then((function(e){we(!0);var o={type:"REGISTER_CHECK",inviteCode:e.inviteCode,deviceId:(null===pe||void 0===pe?void 0:pe.visitorId)?pe.visitorId:"unknowndeviceid",requestId:null===pe||void 0===pe?void 0:pe.requestId},n={"captcha-token":fe};"mobile"===i?(o.mobile=e.mobileObject.mobile,o.country=e.mobileObject.mobileCode,o.password=Z.Z.encrypt("".concat(y()(e.password),"|").concat(Date.now()),y()(e.mobileObject.mobile).substring(8,24))):"email"===i&&(o.email=e.email,o.password=Z.Z.encrypt("".concat(y()(e.password),"|").concat(Date.now()),y()(e.email).substring(8,24))),(0,d.fM)(o,n).then((function(o){if(0===(null===o||void 0===o?void 0:o.code)){var n,t;Le(z.PK.VERIFICATION),we(!1);var r={type:i,email:e.email,mobile:null===(n=e.mobileObject)||void 0===n?void 0:n.mobile,mobileCode:null===(t=e.mobileObject)||void 0===t?void 0:t.mobileCode,token:o.data,inviteCode:e.inviteCode};Ne&&window.sessionStorage.setItem(H.LM,JSON.stringify(Ne)),Ce?k(r):(window.sessionStorage.setItem("mexc_register_data",JSON.stringify(r)),K.push({pathname:"/register-verification",query:D}))}else!function(e){var o,i=e.code,n=e.handledMsg;switch(i){case 10014:case 11204:case 10022:o="email";break;case 10044:case 10027:o="mobileObject";break;case 40008:o="password";break;case 10043:o="inviteCode";break;default:o=""}o?Q([{name:o,errors:[n]}]):g.yw.error(n,5)}(o),setTimeout((function(){we(!1)}),1e3),Ee&&Se();be(null)}))}))},De=function(e,o){ke(e,o,(function(){if(null===o||void 0===o?void 0:o.bind){var e,i=JSON.stringify(o);null===window||void 0===window||null===(e=window.sessionStorage)||void 0===e||e.setItem(H.Wl,i),Ce?a("login"):K.push("login")}}))};return(0,m.useEffect)((function(){var e=D.inviteCode||window._getCookie("mexc_invite_code")||"";e&&(Be(e),ae(e),Y({inviteCode:e}),ce(!0))}),[D.inviteCode]),(0,m.useEffect)((function(){($||ee)&&q([$?"mobile":"email"])}),[ie]),(0,m.useEffect)((function(){fe&&Ve()}),[fe]),(0,r.jsxs)("div",{className:s()(W().wrapper,Ce&&W().modalWrapper),children:[!Ce&&(0,r.jsxs)("h3",{className:W().title,children:[Ne?(0,r.jsx)("span",{className:"anticon anticon-arrow-right icon-dir-rtl",onClick:function(){(0,_.Hu)(),ye()},children:(0,r.jsx)(w.Z,{className:"iconfont iconicon_back svg-icon"})}):(0,r.jsx)(r.Fragment,{}),P(Ne?"mc_auth_other_register":"mc_auth_register_title")]}),(0,r.jsxs)("div",{className:W().tabs,children:[(0,r.jsx)("div",{className:s()(W().tab,"email"===i&&W().active),onClick:function(){return t("email")},children:P("common:mc_common_currency_email")}),(0,r.jsx)("div",{className:s()(W().tab,"mobile"===i&&W().active),onClick:function(){return t("mobile")},children:P("common:mc_common_mobile")})]}),(0,r.jsxs)(g.l0,{className:W().form,form:G,layout:"vertical",name:"register",requiredMark:!1,children:["mobile"===i&&(0,r.jsx)(g.l0.Item,{label:P("common:mc_common_phone"),name:"mobileObject",validateFirst:!0,initialValue:{mobile:$?o:""},rules:[function(){return{validator:function(e,o){return o.mobile&&!_.OX.test(o.mobile)?Promise.reject(P("common:mc_common_phone_reg")):Promise.resolve()}}}],getValueFromEvent:function(e){var o;return(0,l.Z)((0,n.Z)({},e),{mobile:null===e||void 0===e||null===(o=e.mobile)||void 0===o?void 0:o.trim()})},children:(0,r.jsx)(p.Z,{businessType:"REGISTER",inputProps:{autoComplete:"new-password",allowClear:!0},onBlur:function(e){return ze(e)}})}),"email"===i&&(0,r.jsx)(g.l0.Item,{label:P("mc_auth_login_email"),name:"email",validateFirst:!0,initialValue:ee?o:"",rules:[{pattern:_.m0,message:P("mc_auth_login_email_reg")},function(){return{validator:function(e,o){if(o){var i=o.match(/@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/)[0];if(ie.includes(i.substring(1)))return Promise.reject(P("mc_auth_register_email_forbid_tip"))}return Promise.resolve()}}}],getValueFromEvent:function(e){return e.target.value.trim()},children:(0,r.jsx)(g.II,{allowClear:!0,autoComplete:"new-password",className:"mx-size-lg",placeholder:P("mc_auth_login_email"),onBlur:function(e){return ze(e.target.value)}})}),(0,r.jsx)(g.l0.Item,{shouldUpdate:!0,noStyle:!0,children:function(){return(0,r.jsx)(g.l0.Item,{label:P("common:mc_common_password"),validateFirst:!0,name:"password",help:Ke(),rules:[{pattern:_.ir.base,message:P("common:mc_common_password_format_summary")},{pattern:_.ir.length,message:P("common:mc_common_password_format_summary")},{pattern:_.ir.capitals,message:P("common:mc_common_password_format_summary")},{pattern:_.ir.lowerLetters,message:P("common:mc_common_password_format_summary")},{pattern:_.ir.numbers,message:P("common:mc_common_password_format_summary")},{pattern:_.ir.symbols,message:P("common:mc_common_password_format_summary")}],children:(0,r.jsx)(h.Z,{autoComplete:"new-password",className:"mx-size-lg",placeholder:P("common:mc_common_password"),onFocus:function(){return ge(!0)},onBlur:He})})}}),(0,r.jsx)(g.l0.Item,{className:s()(W().inviteCodeInput,!le&&W().inviteCodeInputHide),label:(0,r.jsxs)("span",{className:W().inviteCodeLabel,onClick:function(){X("inviteCode")||ce(!le)},children:[P("common:mc_common_invite_code"),(0,r.jsx)(I.Z,{className:s()(W().inviteCodeLabelArrow,le&&W().visible)})]}),name:"inviteCode",initialValue:re,getValueFromEvent:function(e){return e.target.value.trim()},children:(0,r.jsx)(g.II,{allowClear:!0,className:"mx-size-lg",disabled:!!re,placeholder:P("common:mc_common_invite_code"),onChange:function(e){var o;return Be(null===e||void 0===e||null===(o=e.target)||void 0===o?void 0:o.value)}})}),(0,r.jsx)(g.l0.Item,{className:W().agreed,name:"agreed",valuePropName:"checked",children:(0,r.jsx)(g.XZ,{children:(0,r.jsx)(f.Z,{i18nKey:"auth:mc_common_login_privacy_agreed",components:{a:(0,r.jsx)("a",{className:W().agreedLink,target:"_blank",href:"/".concat(V,"/terms"),rel:"noopener noreferrer"})}})})}),(0,r.jsx)(g.l0.Item,{shouldUpdate:!0,children:function(){return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:W().bonus,children:(0,r.jsxs)("div",{className:W().bonusInner,children:[(0,r.jsx)("img",{src:"".concat("https://static.mocortech.com/www/static","/images/auth/bonus.png")}),P("mc_auth_claim_bonus")]})}),(0,r.jsx)(g.zx,{className:W().registerButton,size:"large",block:!0,type:"primary",disabled:We(),onClick:Me,loading:je,children:P(Ne?"mc_auth_other_register":"common:mc_common_nav_register")})]})}}),!Ne&&(0,r.jsxs)("div",{className:W().otherLogin,children:[(0,r.jsx)("div",{className:W().otherLoginTitle,children:(0,r.jsx)("div",{className:W().otherLoginTitleText,children:P("mc_auth_other_login_title")})}),Te&&(0,r.jsx)(M.Z,{onSuccess:function(e){return De("KAKAO",e)},children:(0,r.jsxs)(g.zx,{type:"primary",size:"large",block:!0,className:W().kakaoLoginItem,children:[(0,r.jsx)(C.Z,{className:"iconfont iconkakao"}),"Kakao"]})}),(0,r.jsxs)("div",{className:W().otherLoginHandle,children:[(0,r.jsx)(A.Z,{onSuccess:function(e){return De("GOOGLE",e)},children:(0,r.jsxs)("div",{className:W().otherLoginItem,children:[(0,r.jsx)("div",{className:W().itemIconWrapper,children:(0,r.jsx)(B.FZO,{className:W().itemIcon,"aria-hidden":"true"})}),"Google"]})}),(0,r.jsx)(R.Z,{onSuccess:function(e){return De("APPLE",e)},children:(0,r.jsxs)("div",{className:W().otherLoginItem,children:[(0,r.jsx)("div",{className:W().itemIconWrapper,children:(0,r.jsx)(L.Z,{className:W().itemAppleIcon,"aria-hidden":"true"})}),"Apple"]})}),(0,r.jsx)(F.ZP,{onSuccess:function(e){return De("METAMASK",e)},children:(0,r.jsxs)("div",{className:W().otherLoginItem,children:[(0,r.jsx)("div",{className:W().itemIconWrapper,children:(0,r.jsx)(B.BPK,{className:W().itemAppleIcon,"aria-hidden":"true"})}),H.bV.METAMASK]})}),(0,r.jsx)(E.Z,{onSuccess:function(e){return De("TELEGRAM",e)},children:(0,r.jsxs)("div",{className:W().otherLoginItem,children:[(0,r.jsx)("div",{className:W().itemIconWrapper,children:(0,r.jsx)(N.Z,{className:s()(W().itemTelegramIcon)})}),"Telegram"]})})]})]}),!Ne&&(0,r.jsxs)("div",{className:s()(W().footerHandle,Ne&&W().isOtherLoginRegister),children:[Ne&&(0,r.jsx)("div",{children:(0,r.jsx)("a",{onClick:Pe,children:P("mc_auth_other_login_back_link")})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{children:P("mc_auth_register_extra")}),V.startsWith("zh-")?"":(0,r.jsx)(r.Fragment,{children:"\xa0"}),(0,r.jsx)("a",{onClick:Pe,children:P("common:mc_common_to_login")})]})]})]}),de&&(0,r.jsx)(j.Z,{warningCode:null===U||void 0===U?void 0:U.regLimitCode,warningMsg:null===U||void 0===U?void 0:U.regLimitText,flag:de,close:function(){return _e(!1)}})]})},V=i(52908),D=i(98024),U=i.n(D),G=function(e){var o=e.children,i=e.setModalType,a=(0,t.Z)(e,["children","setModalType"]),l=(0,z.le)(),c=l.isModal,m=l.loginRegisterBindModalVisible,d=l.setOnPreStep,_=l.onChooseLoginOrRegisterBind;return(0,r.jsx)("div",{className:s()(U().formWrapper,U().inModal),children:m?(0,r.jsx)(V.Z,{isModal:c,callback:function(e){_(e,(function(){i("login")}))},onBack:function(){d()}}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(K,(0,n.Z)({onBack:d,isModal:c,setModalType:i},a)),o]})})}},51688:function(e){e.exports={wrapper:"form_wrapper__DY_wp",modalWrapper:"form_modalWrapper__FNfzh",title:"form_title__iFlx_",tabs:"form_tabs__bDvVj",tab:"form_tab__L0HE2",active:"form_active__3Ow5s",form:"form_form__TUF89",inviteCodeLabel:"form_inviteCodeLabel__0eVTZ",inviteCodeLabelArrow:"form_inviteCodeLabelArrow__eN65A",visible:"form_visible__heKxB",inviteCodeInput:"form_inviteCodeInput__RpzQJ",inviteCodeInputHide:"form_inviteCodeInputHide__2TERK",inviteInfo:"form_inviteInfo__N_NBa",agreed:"form_agreed__aQfkQ",agreedLink:"form_agreedLink__8BN9_",footerHandle:"form_footerHandle__mDruD",isOtherLoginRegister:"form_isOtherLoginRegister__zzLDG",otherLogin:"form_otherLogin__4J1k3",otherLoginTitle:"form_otherLoginTitle__HpAbn",otherLoginTitleText:"form_otherLoginTitleText__8w6YD",otherLoginHandle:"form_otherLoginHandle__yLT3M",otherLoginItem:"form_otherLoginItem__6R2_N",itemIconWrapper:"form_itemIconWrapper__vJxEu",itemIcon:"form_itemIcon__fB7U1",itemAppleIcon:"form_itemAppleIcon__48hPn",itemTelegramIcon:"form_itemTelegramIcon__iYkp6",kakaoLoginItem:"form_kakaoLoginItem__65ANS",bonus:"form_bonus__BLiqR",bonusInner:"form_bonusInner__L9_xF",registerButton:"form_registerButton__A_HlZ"}},98024:function(e){e.exports={registerBox:"register_registerBox__EfRyy",registerPage:"register_registerPage__ae6DF",wrapper:"register_wrapper__vyyI5",formWrapper:"register_formWrapper__mslcU",codeWrapper:"register_codeWrapper__qcTlI",inModal:"register_inModal__U9fhz"}}}]);