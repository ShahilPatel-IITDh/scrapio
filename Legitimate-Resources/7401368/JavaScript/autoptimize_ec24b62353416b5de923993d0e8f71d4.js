/*! jQuery Migrate v3.4.0 | (c) OpenJS Foundation and other contributors | jquery.org/license */
"undefined"==typeof jQuery.migrateMute&&(jQuery.migrateMute=!0),function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e,window)}):"object"==typeof module&&module.exports?module.exports=t(require("jquery"),window):t(jQuery,window)}(function(s,n){"use strict";function e(e){return 0<=function(e,t){for(var r=/^(\d+)\.(\d+)\.(\d+)/,n=r.exec(e)||[],o=r.exec(t)||[],a=1;a<=3;a++){if(+n[a]>+o[a])return 1;if(+n[a]<+o[a])return-1}return 0}(s.fn.jquery,e)}s.migrateVersion="3.4.0";var t=Object.create(null),o=(s.migrateDisablePatches=function(){for(var e=0;e<arguments.length;e++)t[arguments[e]]=!0},s.migrateEnablePatches=function(){for(var e=0;e<arguments.length;e++)delete t[arguments[e]]},s.migrateIsPatchEnabled=function(e){return!t[e]},n.console&&n.console.log&&(s&&e("3.0.0")||n.console.log("JQMIGRATE: jQuery 3.0.0+ REQUIRED"),s.migrateWarnings&&n.console.log("JQMIGRATE: Migrate plugin loaded multiple times"),n.console.log("JQMIGRATE: Migrate is installed"+(s.migrateMute?"":" with logging active")+", version "+s.migrateVersion)),{});function i(e,t){var r=n.console;!s.migrateIsPatchEnabled(e)||s.migrateDeduplicateWarnings&&o[t]||(o[t]=!0,s.migrateWarnings.push(t+" ["+e+"]"),r&&r.warn&&!s.migrateMute&&(r.warn("JQMIGRATE: "+t),s.migrateTrace&&r.trace&&r.trace()))}function r(e,t,r,n,o){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){return i(n,o),r},set:function(e){i(n,o),r=e}})}function a(e,t,r,n,o){var a=e[t];e[t]=function(){return o&&i(n,o),(s.migrateIsPatchEnabled(n)?r:a||s.noop).apply(this,arguments)}}function u(e,t,r,n,o){if(!o)throw new Error("No warning message provided");a(e,t,r,n,o)}function d(e,t,r,n){a(e,t,r,n)}s.migrateDeduplicateWarnings=!0,s.migrateWarnings=[],void 0===s.migrateTrace&&(s.migrateTrace=!0),s.migrateReset=function(){o={},s.migrateWarnings.length=0},"BackCompat"===n.document.compatMode&&i("quirks","jQuery is not compatible with Quirks Mode");var c,l,p,f={},m=s.fn.init,y=s.find,h=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/,g=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/g,v=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;for(c in d(s.fn,"init",function(e){var t=Array.prototype.slice.call(arguments);return s.migrateIsPatchEnabled("selector-empty-id")&&"string"==typeof e&&"#"===e&&(i("selector-empty-id","jQuery( '#' ) is not a valid selector"),t[0]=[]),m.apply(this,t)},"selector-empty-id"),s.fn.init.prototype=s.fn,d(s,"find",function(t){var r=Array.prototype.slice.call(arguments);if("string"==typeof t&&h.test(t))try{n.document.querySelector(t)}catch(e){t=t.replace(g,function(e,t,r,n){return"["+t+r+'"'+n+'"]'});try{n.document.querySelector(t),i("selector-hash","Attribute selector with '#' must be quoted: "+r[0]),r[0]=t}catch(e){i("selector-hash","Attribute selector with '#' was not fixed: "+r[0])}}return y.apply(this,r)},"selector-hash"),y)Object.prototype.hasOwnProperty.call(y,c)&&(s.find[c]=y[c]);u(s.fn,"size",function(){return this.length},"size","jQuery.fn.size() is deprecated and removed; use the .length property"),u(s,"parseJSON",function(){return JSON.parse.apply(null,arguments)},"parseJSON","jQuery.parseJSON is deprecated; use JSON.parse"),u(s,"holdReady",s.holdReady,"holdReady","jQuery.holdReady is deprecated"),u(s,"unique",s.uniqueSort,"unique","jQuery.unique is deprecated; use jQuery.uniqueSort"),r(s.expr,"filters",s.expr.pseudos,"expr-pre-pseudos","jQuery.expr.filters is deprecated; use jQuery.expr.pseudos"),r(s.expr,":",s.expr.pseudos,"expr-pre-pseudos","jQuery.expr[':'] is deprecated; use jQuery.expr.pseudos"),e("3.1.1")&&u(s,"trim",function(e){return null==e?"":(e+"").replace(v,"")},"trim","jQuery.trim is deprecated; use String.prototype.trim"),e("3.2.0")&&(u(s,"nodeName",function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},"nodeName","jQuery.nodeName is deprecated"),u(s,"isArray",Array.isArray,"isArray","jQuery.isArray is deprecated; use Array.isArray")),e("3.3.0")&&(u(s,"isNumeric",function(e){var t=typeof e;return("number"==t||"string"==t)&&!isNaN(e-parseFloat(e))},"isNumeric","jQuery.isNumeric() is deprecated"),s.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){f["[object "+t+"]"]=t.toLowerCase()}),u(s,"type",function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?f[Object.prototype.toString.call(e)]||"object":typeof e},"type","jQuery.type is deprecated"),u(s,"isFunction",function(e){return"function"==typeof e},"isFunction","jQuery.isFunction() is deprecated"),u(s,"isWindow",function(e){return null!=e&&e===e.window},"isWindow","jQuery.isWindow() is deprecated")),s.ajax&&(l=s.ajax,p=/(=)\?(?=&|$)|\?\?/,d(s,"ajax",function(){var e=l.apply(this,arguments);return e.promise&&(u(e,"success",e.done,"jqXHR-methods","jQXHR.success is deprecated and removed"),u(e,"error",e.fail,"jqXHR-methods","jQXHR.error is deprecated and removed"),u(e,"complete",e.always,"jqXHR-methods","jQXHR.complete is deprecated and removed")),e},"jqXHR-methods"),e("4.0.0")||s.ajaxPrefilter("+json",function(e){!1!==e.jsonp&&(p.test(e.url)||"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&p.test(e.data))&&i("jsonp-promotion","JSON-to-JSONP auto-promotion is deprecated")}));var j=s.fn.removeAttr,b=s.fn.toggleClass,w=/\S+/g;function Q(e){return e.replace(/-([a-z])/g,function(e,t){return t.toUpperCase()})}d(s.fn,"removeAttr",function(e){var r=this;return s.each(e.match(w),function(e,t){s.expr.match.bool.test(t)&&(i("removeAttr-bool","jQuery.fn.removeAttr no longer sets boolean properties: "+t),r.prop(t,!1))}),j.apply(this,arguments)},"removeAttr-bool"),d(s.fn,"toggleClass",function(t){return void 0!==t&&"boolean"!=typeof t?b.apply(this,arguments):(i("toggleClass-bool","jQuery.fn.toggleClass( boolean ) is deprecated"),this.each(function(){var e=this.getAttribute&&this.getAttribute("class")||"";e&&s.data(this,"__className__",e),this.setAttribute&&this.setAttribute("class",!e&&!1!==t&&s.data(this,"__className__")||"")}))},"toggleClass-bool");var x,A=!1,R=/^[a-z]/,T=/^(?:Border(?:Top|Right|Bottom|Left)?(?:Width|)|(?:Margin|Padding)?(?:Top|Right|Bottom|Left)?|(?:Min|Max)?(?:Width|Height))$/;s.swap&&s.each(["height","width","reliableMarginRight"],function(e,t){var r=s.cssHooks[t]&&s.cssHooks[t].get;r&&(s.cssHooks[t].get=function(){var e;return A=!0,e=r.apply(this,arguments),A=!1,e})}),d(s,"swap",function(e,t,r,n){var o,a={};for(o in A||i("swap","jQuery.swap() is undocumented and deprecated"),t)a[o]=e.style[o],e.style[o]=t[o];for(o in r=r.apply(e,n||[]),t)e.style[o]=a[o];return r},"swap"),e("3.4.0")&&"undefined"!=typeof Proxy&&(s.cssProps=new Proxy(s.cssProps||{},{set:function(){return i("cssProps","jQuery.cssProps is deprecated"),Reflect.set.apply(this,arguments)}})),e("4.0.0")&&"undefined"!=typeof Proxy&&(s.cssNumber=new Proxy({animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},{get:function(){return i("css-number","jQuery.cssNumber is deprecated"),Reflect.get.apply(this,arguments)},set:function(){return i("css-number","jQuery.cssNumber is deprecated"),Reflect.set.apply(this,arguments)}})),x=s.fn.css,d(s.fn,"css",function(e,t){var r,n=this;return e&&"object"==typeof e&&!Array.isArray(e)?(s.each(e,function(e,t){s.fn.css.call(n,e,t)}),this):("number"==typeof t&&(t=Q(e),r=t,R.test(r)&&T.test(r[0].toUpperCase()+r.slice(1))||s.cssNumber[t]||i("css-number",'Number-typed values are deprecated for jQuery.fn.css( "'+e+'", value )')),x.apply(this,arguments))},"css-number");function C(e){var t=n.document.implementation.createHTMLDocument("");return t.body.innerHTML=e,t.body&&t.body.innerHTML}var S,N,P,k,H,E,M,q=s.data,D=(d(s,"data",function(e,t,r){var n,o,a;if(t&&"object"==typeof t&&2===arguments.length){for(a in n=s.hasData(e)&&q.call(this,e),o={},t)a!==Q(a)?(i("data-camelCase","jQuery.data() always sets/gets camelCased names: "+a),n[a]=t[a]):o[a]=t[a];return q.call(this,e,o),t}return t&&"string"==typeof t&&t!==Q(t)&&(n=s.hasData(e)&&q.call(this,e))&&t in n?(i("data-camelCase","jQuery.data() always sets/gets camelCased names: "+t),2<arguments.length&&(n[t]=r),n[t]):q.apply(this,arguments)},"data-camelCase"),s.fx&&(P=s.Tween.prototype.run,k=function(e){return e},d(s.Tween.prototype,"run",function(){1<s.easing[this.easing].length&&(i("easing-one-arg","'jQuery.easing."+this.easing.toString()+"' should use only one argument"),s.easing[this.easing]=k),P.apply(this,arguments)},"easing-one-arg"),S=s.fx.interval,N="jQuery.fx.interval is deprecated",n.requestAnimationFrame&&Object.defineProperty(s.fx,"interval",{configurable:!0,enumerable:!0,get:function(){return n.document.hidden||i("fx-interval",N),s.migrateIsPatchEnabled("fx-interval")&&void 0===S?13:S},set:function(e){i("fx-interval",N),S=e}})),s.fn.load),F=s.event.add,W=s.event.fix,O=(s.event.props=[],s.event.fixHooks={},r(s.event.props,"concat",s.event.props.concat,"event-old-patch","jQuery.event.props.concat() is deprecated and removed"),d(s.event,"fix",function(e){var t=e.type,r=this.fixHooks[t],n=s.event.props;if(n.length){i("event-old-patch","jQuery.event.props are deprecated and removed: "+n.join());while(n.length)s.event.addProp(n.pop())}if(r&&!r._migrated_&&(r._migrated_=!0,i("event-old-patch","jQuery.event.fixHooks are deprecated and removed: "+t),(n=r.props)&&n.length))while(n.length)s.event.addProp(n.pop());return t=W.call(this,e),r&&r.filter?r.filter(t,e):t},"event-old-patch"),d(s.event,"add",function(e,t){return e===n&&"load"===t&&"complete"===n.document.readyState&&i("load-after-event","jQuery(window).on('load'...) called after load event occurred"),F.apply(this,arguments)},"load-after-event"),s.each(["load","unload","error"],function(e,t){d(s.fn,t,function(){var e=Array.prototype.slice.call(arguments,0);return"load"===t&&"string"==typeof e[0]?D.apply(this,e):(i("shorthand-removed-v3","jQuery.fn."+t+"() is deprecated"),e.splice(0,0,t),arguments.length?this.on.apply(this,e):(this.triggerHandler.apply(this,e),this))},"shorthand-removed-v3")}),s.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,r){u(s.fn,r,function(e,t){return 0<arguments.length?this.on(r,null,e,t):this.trigger(r)},"shorthand-deprecated-v3","jQuery.fn."+r+"() event shorthand is deprecated")}),s(function(){s(n.document).triggerHandler("ready")}),s.event.special.ready={setup:function(){this===n.document&&i("ready-event","'ready' event is deprecated")}},u(s.fn,"bind",function(e,t,r){return this.on(e,null,t,r)},"pre-on-methods","jQuery.fn.bind() is deprecated"),u(s.fn,"unbind",function(e,t){return this.off(e,null,t)},"pre-on-methods","jQuery.fn.unbind() is deprecated"),u(s.fn,"delegate",function(e,t,r,n){return this.on(t,e,r,n)},"pre-on-methods","jQuery.fn.delegate() is deprecated"),u(s.fn,"undelegate",function(e,t,r){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",r)},"pre-on-methods","jQuery.fn.undelegate() is deprecated"),u(s.fn,"hover",function(e,t){return this.on("mouseenter",e).on("mouseleave",t||e)},"pre-on-methods","jQuery.fn.hover() is deprecated"),/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi),_=(s.UNSAFE_restoreLegacyHtmlPrefilter=function(){s.migrateEnablePatches("self-closed-tags")},d(s,"htmlPrefilter",function(e){var t,r;return(r=(t=e).replace(O,"<$1></$2>"))!==t&&C(t)!==C(r)&&i("self-closed-tags","HTML tags must be properly nested and closed: "+t),e.replace(O,"<$1></$2>")},"self-closed-tags"),s.migrateDisablePatches("self-closed-tags"),s.fn.offset);return d(s.fn,"offset",function(){var e=this[0];return!e||e.nodeType&&e.getBoundingClientRect?_.apply(this,arguments):(i("offset-valid-elem","jQuery.fn.offset() requires a valid DOM element"),arguments.length?this:void 0)},"offset-valid-elem"),s.ajax&&(H=s.param,d(s,"param",function(e,t){var r=s.ajaxSettings&&s.ajaxSettings.traditional;return void 0===t&&r&&(i("param-ajax-traditional","jQuery.param() no longer uses jQuery.ajaxSettings.traditional"),t=r),H.call(this,e,t)},"param-ajax-traditional")),u(s.fn,"andSelf",s.fn.addBack,"andSelf","jQuery.fn.andSelf() is deprecated and removed, use jQuery.fn.addBack()"),s.Deferred&&(E=s.Deferred,M=[["resolve","done",s.Callbacks("once memory"),s.Callbacks("once memory"),"resolved"],["reject","fail",s.Callbacks("once memory"),s.Callbacks("once memory"),"rejected"],["notify","progress",s.Callbacks("memory"),s.Callbacks("memory")]],d(s,"Deferred",function(e){var a=E(),i=a.promise();function t(){var o=arguments;return s.Deferred(function(n){s.each(M,function(e,t){var r="function"==typeof o[e]&&o[e];a[t[1]](function(){var e=r&&r.apply(this,arguments);e&&"function"==typeof e.promise?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[t[0]+"With"](this===i?n.promise():this,r?[e]:arguments)})}),o=null}).promise()}return u(a,"pipe",t,"deferred-pipe","deferred.pipe() is deprecated"),u(i,"pipe",t,"deferred-pipe","deferred.pipe() is deprecated"),e&&e.call(a,a),a},"deferred-pipe"),s.Deferred.exceptionHook=E.exceptionHook),s});
"use strict";!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Popper={})}(this,(function(e){function t(e){return null==e?window:"[object Window]"!==e.toString()?(e=e.ownerDocument)&&e.defaultView||window:e}function n(e){return e instanceof t(e).Element||e instanceof Element}function o(e){return e instanceof t(e).HTMLElement||e instanceof HTMLElement}function r(e){return"undefined"!=typeof ShadowRoot&&(e instanceof t(e).ShadowRoot||e instanceof ShadowRoot)}function i(e,t){void 0===t&&(t=!1);var n=e.getBoundingClientRect(),r=1,i=1;return o(e)&&t&&(t=e.offsetHeight,0<(e=e.offsetWidth)&&(r=n.width/e||1),0<t&&(i=n.height/t||1)),{width:N(n.width/r),height:N(n.height/i),top:N(n.top/i),right:N(n.right/r),bottom:N(n.bottom/i),left:N(n.left/r),x:N(n.left/r),y:N(n.top/i)}}function a(e){return{scrollLeft:(e=t(e)).pageXOffset,scrollTop:e.pageYOffset}}function s(e){return e?(e.nodeName||"").toLowerCase():null}function f(e){return((n(e)?e.ownerDocument:e.document)||window.document).documentElement}function p(e){return i(f(e)).left+a(e).scrollLeft}function c(e){return t(e).getComputedStyle(e)}function l(e){return e=c(e),/auto|scroll|overlay|hidden/.test(e.overflow+e.overflowY+e.overflowX)}function u(e,n,r){void 0===r&&(r=!1);var c,u=o(n);if(c=o(n)){var d=(c=n.getBoundingClientRect()).height/n.offsetHeight||1;c=1!==(c.width/n.offsetWidth||1)||1!==d}d=c,c=f(n),e=i(e,d),d={scrollLeft:0,scrollTop:0};var h={x:0,y:0};return(u||!u&&!r)&&(("body"!==s(n)||l(c))&&(d=n!==t(n)&&o(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:a(n)),o(n)?((h=i(n,!0)).x+=n.clientLeft,h.y+=n.clientTop):c&&(h.x=p(c))),{x:e.left+d.scrollLeft-h.x,y:e.top+d.scrollTop-h.y,width:e.width,height:e.height}}function d(e){var t=i(e),n=e.offsetWidth,o=e.offsetHeight;return 1>=Math.abs(t.width-n)&&(n=t.width),1>=Math.abs(t.height-o)&&(o=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:o}}function h(e){return"html"===s(e)?e:e.assignedSlot||e.parentNode||(r(e)?e.host:null)||f(e)}function m(e){return 0<=["html","body","#document"].indexOf(s(e))?e.ownerDocument.body:o(e)&&l(e)?e:m(h(e))}function v(e,n){var o;void 0===n&&(n=[]);var r=m(e);return e=r===(null==(o=e.ownerDocument)?void 0:o.body),o=t(r),r=e?[o].concat(o.visualViewport||[],l(r)?r:[]):r,n=n.concat(r),e?n:n.concat(v(h(r)))}function g(e){return o(e)&&"fixed"!==c(e).position?e.offsetParent:null}function b(e){for(var n=t(e),r=g(e);r&&0<=["table","td","th"].indexOf(s(r))&&"static"===c(r).position;)r=g(r);if(r&&("html"===s(r)||"body"===s(r)&&"static"===c(r).position))return n;if(!r)e:{if(r=-1!==navigator.userAgent.toLowerCase().indexOf("firefox"),-1===navigator.userAgent.indexOf("Trident")||!o(e)||"fixed"!==c(e).position)for(e=h(e);o(e)&&0>["html","body"].indexOf(s(e));){var i=c(e);if("none"!==i.transform||"none"!==i.perspective||"paint"===i.contain||-1!==["transform","perspective"].indexOf(i.willChange)||r&&"filter"===i.willChange||r&&i.filter&&"none"!==i.filter){r=e;break e}e=e.parentNode}r=null}return r||n}function y(e){function t(e){o.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){o.has(e)||(e=n.get(e))&&t(e)})),r.push(e)}var n=new Map,o=new Set,r=[];return e.forEach((function(e){n.set(e.name,e)})),e.forEach((function(e){o.has(e.name)||t(e)})),r}function w(e){var t;return function(){return t||(t=new Promise((function(n){Promise.resolve().then((function(){t=void 0,n(e())}))}))),t}}function x(e){return e.split("-")[0]}function O(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&r(n))do{if(t&&e.isSameNode(t))return!0;t=t.parentNode||t.host}while(t);return!1}function j(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function E(e,n){if("viewport"===n){n=t(e);var r=f(e);n=n.visualViewport;var s=r.clientWidth;r=r.clientHeight;var l=0,u=0;n&&(s=n.width,r=n.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(l=n.offsetLeft,u=n.offsetTop)),e=j(e={width:s,height:r,x:l+p(e),y:u})}else o(n)?((e=i(n)).top+=n.clientTop,e.left+=n.clientLeft,e.bottom=e.top+n.clientHeight,e.right=e.left+n.clientWidth,e.width=n.clientWidth,e.height=n.clientHeight,e.x=e.left,e.y=e.top):(u=f(e),e=f(u),s=a(u),n=null==(r=u.ownerDocument)?void 0:r.body,r=z(e.scrollWidth,e.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),l=z(e.scrollHeight,e.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),u=-s.scrollLeft+p(u),s=-s.scrollTop,"rtl"===c(n||e).direction&&(u+=z(e.clientWidth,n?n.clientWidth:0)-r),e=j({width:r,height:l,x:u,y:s}));return e}function D(e,t,r){return t="clippingParents"===t?function(e){var t=v(h(e)),r=0<=["absolute","fixed"].indexOf(c(e).position)&&o(e)?b(e):e;return n(r)?t.filter((function(e){return n(e)&&O(e,r)&&"body"!==s(e)})):[]}(e):[].concat(t),(r=(r=[].concat(t,[r])).reduce((function(t,n){return n=E(e,n),t.top=z(n.top,t.top),t.right=F(n.right,t.right),t.bottom=F(n.bottom,t.bottom),t.left=z(n.left,t.left),t}),E(e,r[0]))).width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}function L(e){return e.split("-")[1]}function M(e){return 0<=["top","bottom"].indexOf(e)?"x":"y"}function P(e){var t=e.reference,n=e.element,o=(e=e.placement)?x(e):null;e=e?L(e):null;var r=t.x+t.width/2-n.width/2,i=t.y+t.height/2-n.height/2;switch(o){case"top":r={x:r,y:t.y-n.height};break;case"bottom":r={x:r,y:t.y+t.height};break;case"right":r={x:t.x+t.width,y:i};break;case"left":r={x:t.x-n.width,y:i};break;default:r={x:t.x,y:t.y}}if(null!=(o=o?M(o):null))switch(i="y"===o?"height":"width",e){case"start":r[o]-=t[i]/2-n[i]/2;break;case"end":r[o]+=t[i]/2-n[i]/2}return r}function k(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function W(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function A(e,t){void 0===t&&(t={});var o=t;t=void 0===(t=o.placement)?e.placement:t;var r=o.boundary,a=void 0===r?"clippingParents":r,s=void 0===(r=o.rootBoundary)?"viewport":r;r=void 0===(r=o.elementContext)?"popper":r;var p=o.altBoundary,c=void 0!==p&&p;o=k("number"!=typeof(o=void 0===(o=o.padding)?0:o)?o:W(o,V)),p=e.rects.popper,a=D(n(c=e.elements[c?"popper"===r?"reference":"popper":r])?c:c.contextElement||f(e.elements.popper),a,s),c=P({reference:s=i(e.elements.reference),element:p,strategy:"absolute",placement:t}),p=j(Object.assign({},p,c)),s="popper"===r?p:s;var l={top:a.top-s.top+o.top,bottom:s.bottom-a.bottom+o.bottom,left:a.left-s.left+o.left,right:s.right-a.right+o.right};if(e=e.modifiersData.offset,"popper"===r&&e){var u=e[t];Object.keys(l).forEach((function(e){var t=0<=["right","bottom"].indexOf(e)?1:-1,n=0<=["top","bottom"].indexOf(e)?"y":"x";l[e]+=u[n]*t}))}return l}function B(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function H(e){void 0===e&&(e={});var t=e.defaultModifiers,o=void 0===t?[]:t,r=void 0===(e=e.defaultOptions)?Y:e;return function(e,t,i){function a(){f.forEach((function(e){return e()})),f=[]}void 0===i&&(i=r);var s={placement:"bottom",orderedModifiers:[],options:Object.assign({},Y,r),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},f=[],p=!1,c={state:s,setOptions:function(i){return i="function"==typeof i?i(s.options):i,a(),s.options=Object.assign({},r,s.options,i),s.scrollParents={reference:n(e)?v(e):e.contextElement?v(e.contextElement):[],popper:v(t)},i=function(e){var t=y(e);return U.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(o,s.options.modifiers))),s.orderedModifiers=i.filter((function(e){return e.enabled})),s.orderedModifiers.forEach((function(e){var t=e.name,n=e.options;n=void 0===n?{}:n,"function"==typeof(e=e.effect)&&(t=e({state:s,name:t,instance:c,options:n}),f.push(t||function(){}))})),c.update()},forceUpdate:function(){if(!p){var e=s.elements,t=e.reference;if(B(t,e=e.popper))for(s.rects={reference:u(t,b(e),"fixed"===s.options.strategy),popper:d(e)},s.reset=!1,s.placement=s.options.placement,s.orderedModifiers.forEach((function(e){return s.modifiersData[e.name]=Object.assign({},e.data)})),t=0;t<s.orderedModifiers.length;t++)if(!0===s.reset)s.reset=!1,t=-1;else{var n=s.orderedModifiers[t];e=n.fn;var o=n.options;o=void 0===o?{}:o,n=n.name,"function"==typeof e&&(s=e({state:s,options:o,name:n,instance:c})||s)}}},update:w((function(){return new Promise((function(e){c.forceUpdate(),e(s)}))})),destroy:function(){a(),p=!0}};return B(e,t)?(c.setOptions(i).then((function(e){!p&&i.onFirstUpdate&&i.onFirstUpdate(e)})),c):c}}function T(e){var n,o=e.popper,r=e.popperRect,i=e.placement,a=e.variation,s=e.offsets,p=e.position,l=e.gpuAcceleration,u=e.adaptive;if(!0===(e=e.roundOffsets)){e=s.y;var d=window.devicePixelRatio||1;e={x:X(X(s.x*d)/d)||0,y:X(X(e*d)/d)||0}}else e="function"==typeof e?e(s):s;e=void 0===(e=(d=e).x)?0:e,d=void 0===(d=d.y)?0:d;var h=s.hasOwnProperty("x");s=s.hasOwnProperty("y");var m,v="left",g="top",y=window;if(u){var w=b(o),x="clientHeight",O="clientWidth";w===t(o)&&("static"!==c(w=f(o)).position&&"absolute"===p&&(x="scrollHeight",O="scrollWidth")),"top"!==i&&("left"!==i&&"right"!==i||"end"!==a)||(g="bottom",d-=w[x]-r.height,d*=l?1:-1),"left"!==i&&("top"!==i&&"bottom"!==i||"end"!==a)||(v="right",e-=w[O]-r.width,e*=l?1:-1)}return o=Object.assign({position:p},u&&Q),l?Object.assign({},o,((m={})[g]=s?"0":"",m[v]=h?"0":"",m.transform=1>=(y.devicePixelRatio||1)?"translate("+e+"px, "+d+"px)":"translate3d("+e+"px, "+d+"px, 0)",m)):Object.assign({},o,((n={})[g]=s?d+"px":"",n[v]=h?e+"px":"",n.transform="",n))}function R(e){return e.replace(/left|right|bottom|top/g,(function(e){return te[e]}))}function S(e){return e.replace(/start|end/g,(function(e){return ne[e]}))}function C(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function q(e){return["top","right","bottom","left"].some((function(t){return 0<=e[t]}))}var N=Math.round,V=["top","bottom","right","left"],I=V.reduce((function(e,t){return e.concat([t+"-start",t+"-end"])}),[]),_=[].concat(V,["auto"]).reduce((function(e,t){return e.concat([t,t+"-start",t+"-end"])}),[]),U="beforeRead read afterRead beforeMain main afterMain beforeWrite write afterWrite".split(" "),z=Math.max,F=Math.min,X=Math.round,Y={placement:"bottom",modifiers:[],strategy:"absolute"},G={passive:!0},J={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var n=e.state,o=e.instance,r=(e=e.options).scroll,i=void 0===r||r,a=void 0===(e=e.resize)||e,s=t(n.elements.popper),f=[].concat(n.scrollParents.reference,n.scrollParents.popper);return i&&f.forEach((function(e){e.addEventListener("scroll",o.update,G)})),a&&s.addEventListener("resize",o.update,G),function(){i&&f.forEach((function(e){e.removeEventListener("scroll",o.update,G)})),a&&s.removeEventListener("resize",o.update,G)}},data:{}},K={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state;t.modifiersData[e.name]=P({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},Q={top:"auto",right:"auto",bottom:"auto",left:"auto"},Z={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options;e=void 0===(e=n.gpuAcceleration)||e;var o=n.adaptive;o=void 0===o||o,n=void 0===(n=n.roundOffsets)||n,e={placement:x(t.placement),variation:L(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:e},null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,T(Object.assign({},e,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:n})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,T(Object.assign({},e,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:n})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},$={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},i=t.elements[e];o(i)&&s(i)&&(Object.assign(i.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?i.removeAttribute(e):i.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],i=t.attributes[e]||{};e=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{}),o(r)&&s(r)&&(Object.assign(r.style,e),Object.keys(i).forEach((function(e){r.removeAttribute(e)})))}))}},requires:["computeStyles"]},ee={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.name,o=void 0===(e=e.options.offset)?[0,0]:e,r=(e=_.reduce((function(e,n){var r=t.rects,i=x(n),a=0<=["left","top"].indexOf(i)?-1:1,s="function"==typeof o?o(Object.assign({},r,{placement:n})):o;return r=(r=s[0])||0,s=((s=s[1])||0)*a,i=0<=["left","right"].indexOf(i)?{x:s,y:r}:{x:r,y:s},e[n]=i,e}),{}))[t.placement],i=r.x;r=r.y,null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=i,t.modifiersData.popperOffsets.y+=r),t.modifiersData[n]=e}},te={left:"right",right:"left",bottom:"top",top:"bottom"},ne={start:"end",end:"start"},oe={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options;if(e=e.name,!t.modifiersData[e]._skip){var o=n.mainAxis;o=void 0===o||o;var r=n.altAxis;r=void 0===r||r;var i=n.fallbackPlacements,a=n.padding,s=n.boundary,f=n.rootBoundary,p=n.altBoundary,c=n.flipVariations,l=void 0===c||c,u=n.allowedAutoPlacements;c=x(n=t.options.placement),i=i||(c!==n&&l?function(e){if("auto"===x(e))return[];var t=R(e);return[S(e),t,S(t)]}(n):[R(n)]);var d=[n].concat(i).reduce((function(e,n){return e.concat("auto"===x(n)?function(e,t){void 0===t&&(t={});var n=t.boundary,o=t.rootBoundary,r=t.padding,i=t.flipVariations,a=t.allowedAutoPlacements,s=void 0===a?_:a,f=L(t.placement);0===(i=(t=f?i?I:I.filter((function(e){return L(e)===f})):V).filter((function(e){return 0<=s.indexOf(e)}))).length&&(i=t);var p=i.reduce((function(t,i){return t[i]=A(e,{placement:i,boundary:n,rootBoundary:o,padding:r})[x(i)],t}),{});return Object.keys(p).sort((function(e,t){return p[e]-p[t]}))}(t,{placement:n,boundary:s,rootBoundary:f,padding:a,flipVariations:l,allowedAutoPlacements:u}):n)}),[]);n=t.rects.reference,i=t.rects.popper;var h=new Map;c=!0;for(var m=d[0],v=0;v<d.length;v++){var g=d[v],b=x(g),y="start"===L(g),w=0<=["top","bottom"].indexOf(b),O=w?"width":"height",j=A(t,{placement:g,boundary:s,rootBoundary:f,altBoundary:p,padding:a});if(y=w?y?"right":"left":y?"bottom":"top",n[O]>i[O]&&(y=R(y)),O=R(y),w=[],o&&w.push(0>=j[b]),r&&w.push(0>=j[y],0>=j[O]),w.every((function(e){return e}))){m=g,c=!1;break}h.set(g,w)}if(c)for(o=function(e){var t=d.find((function(t){if(t=h.get(t))return t.slice(0,e).every((function(e){return e}))}));if(t)return m=t,"break"},r=l?3:1;0<r&&"break"!==o(r);r--);t.placement!==m&&(t.modifiersData[e]._skip=!0,t.placement=m,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},re={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options;e=e.name;var o=n.mainAxis,r=void 0===o||o,i=void 0!==(o=n.altAxis)&&o;o=void 0===(o=n.tether)||o;var a=n.tetherOffset,s=void 0===a?0:a,f=A(t,{boundary:n.boundary,rootBoundary:n.rootBoundary,padding:n.padding,altBoundary:n.altBoundary});n=x(t.placement);var p=L(t.placement),c=!p,l=M(n);n="x"===l?"y":"x",a=t.modifiersData.popperOffsets;var u=t.rects.reference,h=t.rects.popper,m="function"==typeof s?s(Object.assign({},t.rects,{placement:t.placement})):s;if(s={x:0,y:0},a){if(r||i){var v="y"===l?"top":"left",g="y"===l?"bottom":"right",y="y"===l?"height":"width",w=a[l],O=a[l]+f[v],j=a[l]-f[g],E=o?-h[y]/2:0,D="start"===p?u[y]:h[y];p="start"===p?-h[y]:-u[y],h=t.elements.arrow,h=o&&h?d(h):{width:0,height:0};var P=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0};v=P[v],g=P[g],h=z(0,F(u[y],h[y])),D=c?u[y]/2-E-h-v-m:D-h-v-m,u=c?-u[y]/2+E+h+g+m:p+h+g+m,c=t.elements.arrow&&b(t.elements.arrow),m=t.modifiersData.offset?t.modifiersData.offset[t.placement][l]:0,c=a[l]+D-m-(c?"y"===l?c.clientTop||0:c.clientLeft||0:0),u=a[l]+u-m,r&&(r=o?F(O,c):O,j=o?z(j,u):j,r=z(r,F(w,j)),a[l]=r,s[l]=r-w),i&&(r=(i=a[n])+f["x"===l?"top":"left"],f=i-f["x"===l?"bottom":"right"],r=o?F(r,c):r,o=o?z(f,u):f,o=z(r,F(i,o)),a[n]=o,s[n]=o-i)}t.modifiersData[e]=s}},requiresIfExists:["offset"]},ie={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,o=e.name,r=e.options,i=n.elements.arrow,a=n.modifiersData.popperOffsets,s=x(n.placement);if(e=M(s),s=0<=["left","right"].indexOf(s)?"height":"width",i&&a){r=k("number"!=typeof(r="function"==typeof(r=r.padding)?r(Object.assign({},n.rects,{placement:n.placement})):r)?r:W(r,V));var f=d(i),p="y"===e?"top":"left",c="y"===e?"bottom":"right",l=n.rects.reference[s]+n.rects.reference[e]-a[e]-n.rects.popper[s];a=a[e]-n.rects.reference[e],a=(i=(i=b(i))?"y"===e?i.clientHeight||0:i.clientWidth||0:0)/2-f[s]/2+(l/2-a/2),s=z(r[p],F(a,i-f[s]-r[c])),n.modifiersData[o]=((t={})[e]=s,t.centerOffset=s-a,t)}},effect:function(e){var t=e.state;if(null!=(e=void 0===(e=e.options.element)?"[data-popper-arrow]":e)){if("string"==typeof e&&!(e=t.elements.popper.querySelector(e)))return;O(t.elements.popper,e)&&(t.elements.arrow=e)}},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},ae={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state;e=e.name;var n=t.rects.reference,o=t.rects.popper,r=t.modifiersData.preventOverflow,i=A(t,{elementContext:"reference"}),a=A(t,{altBoundary:!0});n=C(i,n),o=C(a,o,r),r=q(n),a=q(o),t.modifiersData[e]={referenceClippingOffsets:n,popperEscapeOffsets:o,isReferenceHidden:r,hasPopperEscaped:a},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":r,"data-popper-escaped":a})}},se=H({defaultModifiers:[J,K,Z,$]}),fe=[J,K,Z,$,ee,oe,re,ie,ae],pe=H({defaultModifiers:fe});e.applyStyles=$,e.arrow=ie,e.computeStyles=Z,e.createPopper=pe,e.createPopperLite=se,e.defaultModifiers=fe,e.detectOverflow=A,e.eventListeners=J,e.flip=oe,e.hide=ae,e.offset=ee,e.popperGenerator=H,e.popperOffsets=K,e.preventOverflow=re,Object.defineProperty(e,"__esModule",{value:!0})}));
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("@popperjs/core")):"function"==typeof define&&define.amd?define(["@popperjs/core"],e):(t=t||self).tippy=e(t.Popper)}(this,(function(t){"use strict";var e="undefined"!=typeof window&&"undefined"!=typeof document,n=e?navigator.userAgent:"",r=/MSIE |Trident\//.test(n),i={passive:!0,capture:!0};function o(t,e,n){if(Array.isArray(t)){var r=t[e];return null==r?Array.isArray(n)?n[e]:n:r}return t}function a(t,e){var n={}.toString.call(t);return 0===n.indexOf("[object")&&n.indexOf(e+"]")>-1}function s(t,e){return"function"==typeof t?t.apply(void 0,e):t}function p(t,e){return 0===e?t:function(r){clearTimeout(n),n=setTimeout((function(){t(r)}),e)};var n}function u(t,e){var n=Object.assign({},t);return e.forEach((function(t){delete n[t]})),n}function c(t){return[].concat(t)}function f(t,e){-1===t.indexOf(e)&&t.push(e)}function l(t){return t.split("-")[0]}function d(t){return[].slice.call(t)}function v(){return document.createElement("div")}function m(t){return["Element","Fragment"].some((function(e){return a(t,e)}))}function g(t){return a(t,"MouseEvent")}function h(t){return!(!t||!t._tippy||t._tippy.reference!==t)}function b(t){return m(t)?[t]:function(t){return a(t,"NodeList")}(t)?d(t):Array.isArray(t)?t:d(document.querySelectorAll(t))}function y(t,e){t.forEach((function(t){t&&(t.style.transitionDuration=e+"ms")}))}function w(t,e){t.forEach((function(t){t&&t.setAttribute("data-state",e)}))}function x(t){var e,n=c(t)[0];return(null==n||null==(e=n.ownerDocument)?void 0:e.body)?n.ownerDocument:document}function E(t,e,n){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach((function(e){t[r](e,n)}))}var O={isTouch:!1},C=0;function T(){O.isTouch||(O.isTouch=!0,window.performance&&document.addEventListener("mousemove",A))}function A(){var t=performance.now();t-C<20&&(O.isTouch=!1,document.removeEventListener("mousemove",A)),C=t}function L(){var t=document.activeElement;if(h(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}var D=Object.assign({appendTo:function(){return document.body},aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},{animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},{},{allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999}),k=Object.keys(D);function R(t){var e=(t.plugins||[]).reduce((function(e,n){var r=n.name,i=n.defaultValue;return r&&(e[r]=void 0!==t[r]?t[r]:i),e}),{});return Object.assign({},t,{},e)}function j(t,e){var n=Object.assign({},e,{content:s(e.content,[t])},e.ignoreAttributes?{}:function(t,e){return(e?Object.keys(R(Object.assign({},D,{plugins:e}))):k).reduce((function(e,n){var r=(t.getAttribute("data-tippy-"+n)||"").trim();if(!r)return e;if("content"===n)e[n]=r;else try{e[n]=JSON.parse(r)}catch(t){e[n]=r}return e}),{})}(t,e.plugins));return n.aria=Object.assign({},D.aria,{},n.aria),n.aria={expanded:"auto"===n.aria.expanded?e.interactive:n.aria.expanded,content:"auto"===n.aria.content?e.interactive?null:"describedby":n.aria.content},n}function M(t,e){t.innerHTML=e}function P(t){var e=v();return!0===t?e.className="tippy-arrow":(e.className="tippy-svg-arrow",m(t)?e.appendChild(t):M(e,t)),e}function V(t,e){m(e.content)?(M(t,""),t.appendChild(e.content)):"function"!=typeof e.content&&(e.allowHTML?M(t,e.content):t.textContent=e.content)}function I(t){var e=t.firstElementChild,n=d(e.children);return{box:e,content:n.find((function(t){return t.classList.contains("tippy-content")})),arrow:n.find((function(t){return t.classList.contains("tippy-arrow")||t.classList.contains("tippy-svg-arrow")})),backdrop:n.find((function(t){return t.classList.contains("tippy-backdrop")}))}}function S(t){var e=v(),n=v();n.className="tippy-box",n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=v();function i(n,r){var i=I(e),o=i.box,a=i.content,s=i.arrow;r.theme?o.setAttribute("data-theme",r.theme):o.removeAttribute("data-theme"),"string"==typeof r.animation?o.setAttribute("data-animation",r.animation):o.removeAttribute("data-animation"),r.inertia?o.setAttribute("data-inertia",""):o.removeAttribute("data-inertia"),o.style.maxWidth="number"==typeof r.maxWidth?r.maxWidth+"px":r.maxWidth,r.role?o.setAttribute("role",r.role):o.removeAttribute("role"),n.content===r.content&&n.allowHTML===r.allowHTML||V(a,t.props),r.arrow?s?n.arrow!==r.arrow&&(o.removeChild(s),o.appendChild(P(r.arrow))):o.appendChild(P(r.arrow)):s&&o.removeChild(s)}return r.className="tippy-content",r.setAttribute("data-state","hidden"),V(r,t.props),e.appendChild(n),n.appendChild(r),i(t.props,t.props),{popper:e,onUpdate:i}}S.$$tippy=!0;var B=1,H=[],N=[];function U(e,n){var a,u,m,h,b,C,T,A,L,k=j(e,Object.assign({},D,{},R((a=n,Object.keys(a).reduce((function(t,e){return void 0!==a[e]&&(t[e]=a[e]),t}),{}))))),M=!1,P=!1,V=!1,S=!1,U=[],_=p(bt,k.interactiveDebounce),z=B++,F=(L=k.plugins).filter((function(t,e){return L.indexOf(t)===e})),W={id:z,reference:e,popper:v(),popperInstance:null,props:k,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},plugins:F,clearDelayTimeouts:function(){clearTimeout(u),clearTimeout(m),cancelAnimationFrame(h)},setProps:function(t){if(W.state.isDestroyed)return;it("onBeforeUpdate",[W,t]),gt();var n=W.props,r=j(e,Object.assign({},W.props,{},t,{ignoreAttributes:!0}));W.props=r,mt(),n.interactiveDebounce!==r.interactiveDebounce&&(st(),_=p(bt,r.interactiveDebounce));n.triggerTarget&&!r.triggerTarget?c(n.triggerTarget).forEach((function(t){t.removeAttribute("aria-expanded")})):r.triggerTarget&&e.removeAttribute("aria-expanded");at(),rt(),q&&q(n,r);W.popperInstance&&(Et(),Ct().forEach((function(t){requestAnimationFrame(t._tippy.popperInstance.forceUpdate)})));it("onAfterUpdate",[W,t])},setContent:function(t){W.setProps({content:t})},show:function(){var t=W.state.isVisible,e=W.state.isDestroyed,n=!W.state.isEnabled,r=O.isTouch&&!W.props.touch,i=o(W.props.duration,0,D.duration);if(t||e||n||r)return;if(Z().hasAttribute("disabled"))return;if(it("onShow",[W],!1),!1===W.props.onShow(W))return;W.state.isVisible=!0,Q()&&(Y.style.visibility="visible");rt(),ft(),W.state.isMounted||(Y.style.transition="none");if(Q()){var a=et(),p=a.box,u=a.content;y([p,u],0)}T=function(){var t;if(W.state.isVisible&&!S){if(S=!0,Y.offsetHeight,Y.style.transition=W.props.moveTransition,Q()&&W.props.animation){var e=et(),n=e.box,r=e.content;y([n,r],i),w([n,r],"visible")}ot(),at(),f(N,W),null==(t=W.popperInstance)||t.forceUpdate(),W.state.isMounted=!0,it("onMount",[W]),W.props.animation&&Q()&&function(t,e){dt(t,e)}(i,(function(){W.state.isShown=!0,it("onShown",[W])}))}},function(){var t,e=W.props.appendTo,n=Z();t=W.props.interactive&&e===D.appendTo||"parent"===e?n.parentNode:s(e,[n]);t.contains(Y)||t.appendChild(Y);Et()}()},hide:function(){var t=!W.state.isVisible,e=W.state.isDestroyed,n=!W.state.isEnabled,r=o(W.props.duration,1,D.duration);if(t||e||n)return;if(it("onHide",[W],!1),!1===W.props.onHide(W))return;W.state.isVisible=!1,W.state.isShown=!1,S=!1,M=!1,Q()&&(Y.style.visibility="hidden");if(st(),lt(),rt(),Q()){var i=et(),a=i.box,s=i.content;W.props.animation&&(y([a,s],r),w([a,s],"hidden"))}ot(),at(),W.props.animation?Q()&&function(t,e){dt(t,(function(){!W.state.isVisible&&Y.parentNode&&Y.parentNode.contains(Y)&&e()}))}(r,W.unmount):W.unmount()},hideWithInteractivity:function(t){tt().addEventListener("mousemove",_),f(H,_),_(t)},enable:function(){W.state.isEnabled=!0},disable:function(){W.hide(),W.state.isEnabled=!1},unmount:function(){W.state.isVisible&&W.hide();if(!W.state.isMounted)return;Ot(),Ct().forEach((function(t){t._tippy.unmount()})),Y.parentNode&&Y.parentNode.removeChild(Y);N=N.filter((function(t){return t!==W})),W.state.isMounted=!1,it("onHidden",[W])},destroy:function(){if(W.state.isDestroyed)return;W.clearDelayTimeouts(),W.unmount(),gt(),delete e._tippy,W.state.isDestroyed=!0,it("onDestroy",[W])}};if(!k.render)return W;var X=k.render(W),Y=X.popper,q=X.onUpdate;Y.setAttribute("data-tippy-root",""),Y.id="tippy-"+W.id,W.popper=Y,e._tippy=W,Y._tippy=W;var $=F.map((function(t){return t.fn(W)})),J=e.hasAttribute("aria-expanded");return mt(),at(),rt(),it("onCreate",[W]),k.showOnCreate&&Tt(),Y.addEventListener("mouseenter",(function(){W.props.interactive&&W.state.isVisible&&W.clearDelayTimeouts()})),Y.addEventListener("mouseleave",(function(t){W.props.interactive&&W.props.trigger.indexOf("mouseenter")>=0&&(tt().addEventListener("mousemove",_),_(t))})),W;function G(){var t=W.props.touch;return Array.isArray(t)?t:[t,0]}function K(){return"hold"===G()[0]}function Q(){var t;return!!(null==(t=W.props.render)?void 0:t.$$tippy)}function Z(){return A||e}function tt(){var t=Z().parentNode;return t?x(t):document}function et(){return I(Y)}function nt(t){return W.state.isMounted&&!W.state.isVisible||O.isTouch||b&&"focus"===b.type?0:o(W.props.delay,t?0:1,D.delay)}function rt(){Y.style.pointerEvents=W.props.interactive&&W.state.isVisible?"":"none",Y.style.zIndex=""+W.props.zIndex}function it(t,e,n){var r;(void 0===n&&(n=!0),$.forEach((function(n){n[t]&&n[t].apply(void 0,e)})),n)&&(r=W.props)[t].apply(r,e)}function ot(){var t=W.props.aria;if(t.content){var n="aria-"+t.content,r=Y.id;c(W.props.triggerTarget||e).forEach((function(t){var e=t.getAttribute(n);if(W.state.isVisible)t.setAttribute(n,e?e+" "+r:r);else{var i=e&&e.replace(r,"").trim();i?t.setAttribute(n,i):t.removeAttribute(n)}}))}}function at(){!J&&W.props.aria.expanded&&c(W.props.triggerTarget||e).forEach((function(t){W.props.interactive?t.setAttribute("aria-expanded",W.state.isVisible&&t===Z()?"true":"false"):t.removeAttribute("aria-expanded")}))}function st(){tt().removeEventListener("mousemove",_),H=H.filter((function(t){return t!==_}))}function pt(t){if(!(O.isTouch&&(V||"mousedown"===t.type)||W.props.interactive&&Y.contains(t.target))){if(Z().contains(t.target)){if(O.isTouch)return;if(W.state.isVisible&&W.props.trigger.indexOf("click")>=0)return}else it("onClickOutside",[W,t]);!0===W.props.hideOnClick&&(W.clearDelayTimeouts(),W.hide(),P=!0,setTimeout((function(){P=!1})),W.state.isMounted||lt())}}function ut(){V=!0}function ct(){V=!1}function ft(){var t=tt();t.addEventListener("mousedown",pt,!0),t.addEventListener("touchend",pt,i),t.addEventListener("touchstart",ct,i),t.addEventListener("touchmove",ut,i)}function lt(){var t=tt();t.removeEventListener("mousedown",pt,!0),t.removeEventListener("touchend",pt,i),t.removeEventListener("touchstart",ct,i),t.removeEventListener("touchmove",ut,i)}function dt(t,e){var n=et().box;function r(t){t.target===n&&(E(n,"remove",r),e())}if(0===t)return e();E(n,"remove",C),E(n,"add",r),C=r}function vt(t,n,r){void 0===r&&(r=!1),c(W.props.triggerTarget||e).forEach((function(e){e.addEventListener(t,n,r),U.push({node:e,eventType:t,handler:n,options:r})}))}function mt(){var t;K()&&(vt("touchstart",ht,{passive:!0}),vt("touchend",yt,{passive:!0})),(t=W.props.trigger,t.split(/\s+/).filter(Boolean)).forEach((function(t){if("manual"!==t)switch(vt(t,ht),t){case"mouseenter":vt("mouseleave",yt);break;case"focus":vt(r?"focusout":"blur",wt);break;case"focusin":vt("focusout",wt)}}))}function gt(){U.forEach((function(t){var e=t.node,n=t.eventType,r=t.handler,i=t.options;e.removeEventListener(n,r,i)})),U=[]}function ht(t){var e,n=!1;if(W.state.isEnabled&&!xt(t)&&!P){var r="focus"===(null==(e=b)?void 0:e.type);b=t,A=t.currentTarget,at(),!W.state.isVisible&&g(t)&&H.forEach((function(e){return e(t)})),"click"===t.type&&(W.props.trigger.indexOf("mouseenter")<0||M)&&!1!==W.props.hideOnClick&&W.state.isVisible?n=!0:Tt(t),"click"===t.type&&(M=!n),n&&!r&&At(t)}}function bt(t){var e=t.target,n=Z().contains(e)||Y.contains(e);"mousemove"===t.type&&n||function(t,e){var n=e.clientX,r=e.clientY;return t.every((function(t){var e=t.popperRect,i=t.popperState,o=t.props.interactiveBorder,a=l(i.placement),s=i.modifiersData.offset;if(!s)return!0;var p="bottom"===a?s.top.y:0,u="top"===a?s.bottom.y:0,c="right"===a?s.left.x:0,f="left"===a?s.right.x:0,d=e.top-r+p>o,v=r-e.bottom-u>o,m=e.left-n+c>o,g=n-e.right-f>o;return d||v||m||g}))}(Ct().concat(Y).map((function(t){var e,n=null==(e=t._tippy.popperInstance)?void 0:e.state;return n?{popperRect:t.getBoundingClientRect(),popperState:n,props:k}:null})).filter(Boolean),t)&&(st(),At(t))}function yt(t){xt(t)||W.props.trigger.indexOf("click")>=0&&M||(W.props.interactive?W.hideWithInteractivity(t):At(t))}function wt(t){W.props.trigger.indexOf("focusin")<0&&t.target!==Z()||W.props.interactive&&t.relatedTarget&&Y.contains(t.relatedTarget)||At(t)}function xt(t){return!!O.isTouch&&K()!==t.type.indexOf("touch")>=0}function Et(){Ot();var n=W.props,r=n.popperOptions,i=n.placement,o=n.offset,a=n.getReferenceClientRect,s=n.moveTransition,p=Q()?I(Y).arrow:null,u=a?{getBoundingClientRect:a,contextElement:a.contextElement||Z()}:e,c=[{name:"offset",options:{offset:o}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!s}},{name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(t){var e=t.state;if(Q()){var n=et().box;["placement","reference-hidden","escaped"].forEach((function(t){"placement"===t?n.setAttribute("data-placement",e.placement):e.attributes.popper["data-popper-"+t]?n.setAttribute("data-"+t,""):n.removeAttribute("data-"+t)})),e.attributes.popper={}}}}];Q()&&p&&c.push({name:"arrow",options:{element:p,padding:3}}),c.push.apply(c,(null==r?void 0:r.modifiers)||[]),W.popperInstance=t.createPopper(u,Y,Object.assign({},r,{placement:i,onFirstUpdate:T,modifiers:c}))}function Ot(){W.popperInstance&&(W.popperInstance.destroy(),W.popperInstance=null)}function Ct(){return d(Y.querySelectorAll("[data-tippy-root]"))}function Tt(t){W.clearDelayTimeouts(),t&&it("onTrigger",[W,t]),ft();var e=nt(!0),n=G(),r=n[0],i=n[1];O.isTouch&&"hold"===r&&i&&(e=i),e?u=setTimeout((function(){W.show()}),e):W.show()}function At(t){if(W.clearDelayTimeouts(),it("onUntrigger",[W,t]),W.state.isVisible){if(!(W.props.trigger.indexOf("mouseenter")>=0&&W.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(t.type)>=0&&M)){var e=nt(!1);e?m=setTimeout((function(){W.state.isVisible&&W.hide()}),e):h=requestAnimationFrame((function(){W.hide()}))}}else lt()}}function _(t,e){void 0===e&&(e={});var n=D.plugins.concat(e.plugins||[]);document.addEventListener("touchstart",T,i),window.addEventListener("blur",L);var r=Object.assign({},e,{plugins:n}),o=b(t).reduce((function(t,e){var n=e&&U(e,r);return n&&t.push(n),t}),[]);return m(t)?o[0]:o}_.defaultProps=D,_.setDefaultProps=function(t){Object.keys(t).forEach((function(e){D[e]=t[e]}))},_.currentInput=O;var z=Object.assign({},t.applyStyles,{effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow)}}),F={mouseover:"mouseenter",focusin:"focus",click:"click"};var W={name:"animateFill",defaultValue:!1,fn:function(t){var e;if(!(null==(e=t.props.render)?void 0:e.$$tippy))return{};var n=I(t.popper),r=n.box,i=n.content,o=t.props.animateFill?function(){var t=v();return t.className="tippy-backdrop",w([t],"hidden"),t}():null;return{onCreate:function(){o&&(r.insertBefore(o,r.firstElementChild),r.setAttribute("data-animatefill",""),r.style.overflow="hidden",t.setProps({arrow:!1,animation:"shift-away"}))},onMount:function(){if(o){var t=r.style.transitionDuration,e=Number(t.replace("ms",""));i.style.transitionDelay=Math.round(e/10)+"ms",o.style.transitionDuration=t,w([o],"visible")}},onShow:function(){o&&(o.style.transitionDuration="0ms")},onHide:function(){o&&w([o],"hidden")}}}};var X={clientX:0,clientY:0},Y=[];function q(t){var e=t.clientX,n=t.clientY;X={clientX:e,clientY:n}}var $={name:"followCursor",defaultValue:!1,fn:function(t){var e=t.reference,n=x(t.props.triggerTarget||e),r=!1,i=!1,o=!0,a=t.props;function s(){return"initial"===t.props.followCursor&&t.state.isVisible}function p(){n.addEventListener("mousemove",f)}function u(){n.removeEventListener("mousemove",f)}function c(){r=!0,t.setProps({getReferenceClientRect:null}),r=!1}function f(n){var r=!n.target||e.contains(n.target),i=t.props.followCursor,o=n.clientX,a=n.clientY,s=e.getBoundingClientRect(),p=o-s.left,u=a-s.top;!r&&t.props.interactive||t.setProps({getReferenceClientRect:function(){var t=e.getBoundingClientRect(),n=o,r=a;"initial"===i&&(n=t.left+p,r=t.top+u);var s="horizontal"===i?t.top:r,c="vertical"===i?t.right:n,f="horizontal"===i?t.bottom:r,l="vertical"===i?t.left:n;return{width:c-l,height:f-s,top:s,right:c,bottom:f,left:l}}})}function l(){t.props.followCursor&&(Y.push({instance:t,doc:n}),function(t){t.addEventListener("mousemove",q)}(n))}function d(){0===(Y=Y.filter((function(e){return e.instance!==t}))).filter((function(t){return t.doc===n})).length&&function(t){t.removeEventListener("mousemove",q)}(n)}return{onCreate:l,onDestroy:d,onBeforeUpdate:function(){a=t.props},onAfterUpdate:function(e,n){var o=n.followCursor;r||void 0!==o&&a.followCursor!==o&&(d(),o?(l(),!t.state.isMounted||i||s()||p()):(u(),c()))},onMount:function(){t.props.followCursor&&!i&&(o&&(f(X),o=!1),s()||p())},onTrigger:function(t,e){g(e)&&(X={clientX:e.clientX,clientY:e.clientY}),i="focus"===e.type},onHidden:function(){t.props.followCursor&&(c(),u(),o=!0)}}}};var J={name:"inlinePositioning",defaultValue:!1,fn:function(t){var e,n=t.reference;var r=-1,i=!1,o={name:"tippyInlinePositioning",enabled:!0,phase:"afterWrite",fn:function(i){var o=i.state;t.props.inlinePositioning&&(e!==o.placement&&t.setProps({getReferenceClientRect:function(){return function(t){return function(t,e,n,r){if(n.length<2||null===t)return e;if(2===n.length&&r>=0&&n[0].left>n[1].right)return n[r]||e;switch(t){case"top":case"bottom":var i=n[0],o=n[n.length-1],a="top"===t,s=i.top,p=o.bottom,u=a?i.left:o.left,c=a?i.right:o.right;return{top:s,bottom:p,left:u,right:c,width:c-u,height:p-s};case"left":case"right":var f=Math.min.apply(Math,n.map((function(t){return t.left}))),l=Math.max.apply(Math,n.map((function(t){return t.right}))),d=n.filter((function(e){return"left"===t?e.left===f:e.right===l})),v=d[0].top,m=d[d.length-1].bottom;return{top:v,bottom:m,left:f,right:l,width:l-f,height:m-v};default:return e}}(l(t),n.getBoundingClientRect(),d(n.getClientRects()),r)}(o.placement)}}),e=o.placement)}};function a(){var e;i||(e=function(t,e){var n;return{popperOptions:Object.assign({},t.popperOptions,{modifiers:[].concat(((null==(n=t.popperOptions)?void 0:n.modifiers)||[]).filter((function(t){return t.name!==e.name})),[e])})}}(t.props,o),i=!0,t.setProps(e),i=!1)}return{onCreate:a,onAfterUpdate:a,onTrigger:function(e,n){if(g(n)){var i=d(t.reference.getClientRects()),o=i.find((function(t){return t.left-2<=n.clientX&&t.right+2>=n.clientX&&t.top-2<=n.clientY&&t.bottom+2>=n.clientY}));r=i.indexOf(o)}},onUntrigger:function(){r=-1}}}};var G={name:"sticky",defaultValue:!1,fn:function(t){var e=t.reference,n=t.popper;function r(e){return!0===t.props.sticky||t.props.sticky===e}var i=null,o=null;function a(){var s=r("reference")?(t.popperInstance?t.popperInstance.state.elements.reference:e).getBoundingClientRect():null,p=r("popper")?n.getBoundingClientRect():null;(s&&K(i,s)||p&&K(o,p))&&t.popperInstance&&t.popperInstance.update(),i=s,o=p,t.state.isMounted&&requestAnimationFrame(a)}return{onMount:function(){t.props.sticky&&a()}}}};function K(t,e){return!t||!e||(t.top!==e.top||t.right!==e.right||t.bottom!==e.bottom||t.left!==e.left)}return e&&function(t){var e=document.createElement("style");e.textContent=t,e.setAttribute("data-tippy-stylesheet","");var n=document.head,r=document.querySelector("head>style,head>link");r?n.insertBefore(e,r):n.appendChild(e)}('.tippy-box[data-animation=fade][data-state=hidden]{opacity:0}[data-tippy-root]{max-width:calc(100vw - 10px)}.tippy-box{position:relative;background-color:#333;color:#fff;border-radius:4px;font-size:14px;line-height:1.4;outline:0;transition-property:transform,visibility,opacity}.tippy-box[data-placement^=top]>.tippy-arrow{bottom:0}.tippy-box[data-placement^=top]>.tippy-arrow:before{bottom:-7px;left:0;border-width:8px 8px 0;border-top-color:initial;transform-origin:center top}.tippy-box[data-placement^=bottom]>.tippy-arrow{top:0}.tippy-box[data-placement^=bottom]>.tippy-arrow:before{top:-7px;left:0;border-width:0 8px 8px;border-bottom-color:initial;transform-origin:center bottom}.tippy-box[data-placement^=left]>.tippy-arrow{right:0}.tippy-box[data-placement^=left]>.tippy-arrow:before{border-width:8px 0 8px 8px;border-left-color:initial;right:-7px;transform-origin:center left}.tippy-box[data-placement^=right]>.tippy-arrow{left:0}.tippy-box[data-placement^=right]>.tippy-arrow:before{left:-7px;border-width:8px 8px 8px 0;border-right-color:initial;transform-origin:center right}.tippy-box[data-inertia][data-state=visible]{transition-timing-function:cubic-bezier(.54,1.5,.38,1.11)}.tippy-arrow{width:16px;height:16px;color:#333}.tippy-arrow:before{content:"";position:absolute;border-color:transparent;border-style:solid}.tippy-content{position:relative;padding:5px 9px;z-index:1}'),_.setDefaultProps({plugins:[W,$,J,G],render:S}),_.createSingleton=function(t,e){var n;void 0===e&&(e={});var r,i=t,o=[],a=e.overrides,s=[],p=!1;function c(){o=i.map((function(t){return t.reference}))}function f(t){i.forEach((function(e){t?e.enable():e.disable()}))}function l(t){return i.map((function(e){var n=e.setProps;return e.setProps=function(i){n(i),e.reference===r&&t.setProps(i)},function(){e.setProps=n}}))}function d(t,e){var n=o.indexOf(e);if(e!==r){r=e;var s=(a||[]).concat("content").reduce((function(t,e){return t[e]=i[n].props[e],t}),{});t.setProps(Object.assign({},s,{getReferenceClientRect:"function"==typeof s.getReferenceClientRect?s.getReferenceClientRect:function(){return e.getBoundingClientRect()}}))}}f(!1),c();var m={fn:function(){return{onDestroy:function(){f(!0)},onHidden:function(){r=null},onClickOutside:function(t){t.props.showOnCreate&&!p&&(p=!0,r=null)},onShow:function(t){t.props.showOnCreate&&!p&&(p=!0,d(t,o[0]))},onTrigger:function(t,e){d(t,e.currentTarget)}}}},g=_(v(),Object.assign({},u(e,["overrides"]),{plugins:[m].concat(e.plugins||[]),triggerTarget:o,popperOptions:Object.assign({},e.popperOptions,{modifiers:[].concat((null==(n=e.popperOptions)?void 0:n.modifiers)||[],[z])})})),h=g.show;g.show=function(t){if(h(),!r&&null==t)return d(g,o[0]);if(!r||null!=t){if("number"==typeof t)return o[t]&&d(g,o[t]);if(i.includes(t)){var e=t.reference;return d(g,e)}return o.includes(t)?d(g,t):void 0}},g.showNext=function(){var t=o[0];if(!r)return g.show(0);var e=o.indexOf(r);g.show(o[e+1]||t)},g.showPrevious=function(){var t=o[o.length-1];if(!r)return g.show(t);var e=o.indexOf(r),n=o[e-1]||t;g.show(n)};var b=g.setProps;return g.setProps=function(t){a=t.overrides||a,b(t)},g.setInstances=function(t){f(!0),s.forEach((function(t){return t()})),i=t,f(!1),c(),l(g),g.setProps({triggerTarget:o})},s=l(g),g},_.delegate=function(t,e){var n=[],r=[],o=!1,a=e.target,s=u(e,["target"]),p=Object.assign({},s,{trigger:"manual",touch:!1}),f=Object.assign({},s,{showOnCreate:!0}),l=_(t,p);function d(t){if(t.target&&!o){var n=t.target.closest(a);if(n){var i=n.getAttribute("data-tippy-trigger")||e.trigger||D.trigger;if(!n._tippy&&!("touchstart"===t.type&&"boolean"==typeof f.touch||"touchstart"!==t.type&&i.indexOf(F[t.type])<0)){var s=_(n,f);s&&(r=r.concat(s))}}}}function v(t,e,r,i){void 0===i&&(i=!1),t.addEventListener(e,r,i),n.push({node:t,eventType:e,handler:r,options:i})}return c(l).forEach((function(t){var e=t.destroy,a=t.enable,s=t.disable;t.destroy=function(t){void 0===t&&(t=!0),t&&r.forEach((function(t){t.destroy()})),r=[],n.forEach((function(t){var e=t.node,n=t.eventType,r=t.handler,i=t.options;e.removeEventListener(n,r,i)})),n=[],e()},t.enable=function(){a(),r.forEach((function(t){return t.enable()})),o=!1},t.disable=function(){s(),r.forEach((function(t){return t.disable()})),o=!0},function(t){var e=t.reference;v(e,"touchstart",d,i),v(e,"mouseover",d),v(e,"focusin",d),v(e,"click",d)}(t)})),l},_.hideAll=function(t){var e=void 0===t?{}:t,n=e.exclude,r=e.duration;N.forEach((function(t){var e=!1;if(n&&(e=h(n)?t.reference===n:t.popper===n.popper),!e){var i=t.props.duration;t.setProps({duration:r}),t.hide(),t.state.isDestroyed||t.setProps({duration:i})}}))},_.roundArrow='<svg width="16" height="6" xmlns="http://www.w3.org/2000/svg"><path d="M0 6s1.796-.013 4.67-3.615C5.851.9 6.93.006 8 0c1.07-.006 2.148.887 3.343 2.385C14.233 6.005 16 6 16 6H0z"></svg>',_}));
;window.Modernizr=function(a,b,c){function z(a){j.cssText=a}function A(a,b){return z(m.join(a+";")+(b||""))}function B(a,b){return typeof a===b}function C(a,b){return!!~(""+a).indexOf(b)}function D(a,b){for(var d in a){var e=a[d];if(!C(e,"-")&&j[e]!==c)return b=="pfx"?e:!0}return!1}function E(a,b,d){for(var e in a){var f=b[a[e]];if(f!==c)return d===!1?a[e]:B(f,"function")?f.bind(d||b):f}return!1}function F(a,b,c){var d=a.charAt(0).toUpperCase()+a.slice(1),e=(a+" "+o.join(d+" ")+d).split(" ");return B(b,"string")||B(b,"undefined")?D(e,b):(e=(a+" "+p.join(d+" ")+d).split(" "),E(e,b,c))}var d="2.7.1",e={},f=!0,g=b.documentElement,h="modernizr",i=b.createElement(h),j=i.style,k,l={}.toString,m=" -webkit- -moz- -o- -ms- ".split(" "),n="Webkit Moz O ms",o=n.split(" "),p=n.toLowerCase().split(" "),q={},r={},s={},t=[],u=t.slice,v,w=function(a,c,d,e){var f,i,j,k,l=b.createElement("div"),m=b.body,n=m||b.createElement("body");if(parseInt(d,10))while(d--)j=b.createElement("div"),j.id=e?e[d]:h+(d+1),l.appendChild(j);return f=["&#173;",'<style id="s',h,'">',a,"</style>"].join(""),l.id=h,(m?l:n).innerHTML+=f,n.appendChild(l),m||(n.style.background="",n.style.overflow="hidden",k=g.style.overflow,g.style.overflow="hidden",g.appendChild(n)),i=c(l,a),m?l.parentNode.removeChild(l):(n.parentNode.removeChild(n),g.style.overflow=k),!!i},x={}.hasOwnProperty,y;!B(x,"undefined")&&!B(x.call,"undefined")?y=function(a,b){return x.call(a,b)}:y=function(a,b){return b in a&&B(a.constructor.prototype[b],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(b){var c=this;if(typeof c!="function")throw new TypeError;var d=u.call(arguments,1),e=function(){if(this instanceof e){var a=function(){};a.prototype=c.prototype;var f=new a,g=c.apply(f,d.concat(u.call(arguments)));return Object(g)===g?g:f}return c.apply(b,d.concat(u.call(arguments)))};return e}),q.csstransforms3d=function(){var a=!!F("perspective");return a&&"webkitPerspective"in g.style&&w("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(b,c){a=b.offsetLeft===9&&b.offsetHeight===3}),a},q.csstransitions=function(){return F("transition")};for(var G in q)y(q,G)&&(v=G.toLowerCase(),e[v]=q[G](),t.push((e[v]?"":"no-")+v));return e.addTest=function(a,b){if(typeof a=="object")for(var d in a)y(a,d)&&e.addTest(d,a[d]);else{a=a.toLowerCase();if(e[a]!==c)return e;b=typeof b=="function"?b():b,typeof f!="undefined"&&f&&(g.className+=" "+(b?"":"no-")+a),e[a]=b}return e},z(""),i=k=null,function(a,b){function l(a,b){var c=a.createElement("p"),d=a.getElementsByTagName("head")[0]||a.documentElement;return c.innerHTML="x<style>"+b+"</style>",d.insertBefore(c.lastChild,d.firstChild)}function m(){var a=s.elements;return typeof a=="string"?a.split(" "):a}function n(a){var b=j[a[h]];return b||(b={},i++,a[h]=i,j[i]=b),b}function o(a,c,d){c||(c=b);if(k)return c.createElement(a);d||(d=n(c));var g;return d.cache[a]?g=d.cache[a].cloneNode():f.test(a)?g=(d.cache[a]=d.createElem(a)).cloneNode():g=d.createElem(a),g.canHaveChildren&&!e.test(a)&&!g.tagUrn?d.frag.appendChild(g):g}function p(a,c){a||(a=b);if(k)return a.createDocumentFragment();c=c||n(a);var d=c.frag.cloneNode(),e=0,f=m(),g=f.length;for(;e<g;e++)d.createElement(f[e]);return d}function q(a,b){b.cache||(b.cache={},b.createElem=a.createElement,b.createFrag=a.createDocumentFragment,b.frag=b.createFrag()),a.createElement=function(c){return s.shivMethods?o(c,a,b):b.createElem(c)},a.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+m().join().replace(/[\w\-]+/g,function(a){return b.createElem(a),b.frag.createElement(a),'c("'+a+'")'})+");return n}")(s,b.frag)}function r(a){a||(a=b);var c=n(a);return s.shivCSS&&!g&&!c.hasCSS&&(c.hasCSS=!!l(a,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),k||q(a,c),a}var c="3.7.0",d=a.html5||{},e=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,f=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,g,h="_html5shiv",i=0,j={},k;(function(){try{var a=b.createElement("a");a.innerHTML="<xyz></xyz>",g="hidden"in a,k=a.childNodes.length==1||function(){b.createElement("a");var a=b.createDocumentFragment();return typeof a.cloneNode=="undefined"||typeof a.createDocumentFragment=="undefined"||typeof a.createElement=="undefined"}()}catch(c){g=!0,k=!0}})();var s={elements:d.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:c,shivCSS:d.shivCSS!==!1,supportsUnknownElements:k,shivMethods:d.shivMethods!==!1,type:"default",shivDocument:r,createElement:o,createDocumentFragment:p};a.html5=s,r(b)}(this,b),e._version=d,e._prefixes=m,e._domPrefixes=p,e._cssomPrefixes=o,e.testProp=function(a){return D([a])},e.testAllProps=F,e.testStyles=w,e.prefixed=function(a,b,c){return b?F(a,b,c):F(a,"pfx")},g.className=g.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(f?" js "+t.join(" "):""),e}(this,this.document),function(a,b,c){function d(a){return"[object Function]"==o.call(a)}function e(a){return"string"==typeof a}function f(){}function g(a){return!a||"loaded"==a||"complete"==a||"uninitialized"==a}function h(){var a=p.shift();q=1,a?a.t?m(function(){("c"==a.t?B.injectCss:B.injectJs)(a.s,0,a.a,a.x,a.e,1)},0):(a(),h()):q=0}function i(a,c,d,e,f,i,j){function k(b){if(!o&&g(l.readyState)&&(u.r=o=1,!q&&h(),l.onload=l.onreadystatechange=null,b)){"img"!=a&&m(function(){t.removeChild(l)},50);for(var d in y[c])y[c].hasOwnProperty(d)&&y[c][d].onload()}}var j=j||B.errorTimeout,l=b.createElement(a),o=0,r=0,u={t:d,s:c,e:f,a:i,x:j};1===y[c]&&(r=1,y[c]=[]),"object"==a?l.data=c:(l.src=c,l.type=a),l.width=l.height="0",l.onerror=l.onload=l.onreadystatechange=function(){k.call(this,r)},p.splice(e,0,u),"img"!=a&&(r||2===y[c]?(t.insertBefore(l,s?null:n),m(k,j)):y[c].push(l))}function j(a,b,c,d,f){return q=0,b=b||"j",e(a)?i("c"==b?v:u,a,b,this.i++,c,d,f):(p.splice(this.i++,0,a),1==p.length&&h()),this}function k(){var a=B;return a.loader={load:j,i:0},a}var l=b.documentElement,m=a.setTimeout,n=b.getElementsByTagName("script")[0],o={}.toString,p=[],q=0,r="MozAppearance"in l.style,s=r&&!!b.createRange().compareNode,t=s?l:n.parentNode,l=a.opera&&"[object Opera]"==o.call(a.opera),l=!!b.attachEvent&&!l,u=r?"object":l?"script":"img",v=l?"script":u,w=Array.isArray||function(a){return"[object Array]"==o.call(a)},x=[],y={},z={timeout:function(a,b){return b.length&&(a.timeout=b[0]),a}},A,B;B=function(a){function b(a){var a=a.split("!"),b=x.length,c=a.pop(),d=a.length,c={url:c,origUrl:c,prefixes:a},e,f,g;for(f=0;f<d;f++)g=a[f].split("="),(e=z[g.shift()])&&(c=e(c,g));for(f=0;f<b;f++)c=x[f](c);return c}function g(a,e,f,g,h){var i=b(a),j=i.autoCallback;i.url.split(".").pop().split("?").shift(),i.bypass||(e&&(e=d(e)?e:e[a]||e[g]||e[a.split("/").pop().split("?")[0]]),i.instead?i.instead(a,e,f,g,h):(y[i.url]?i.noexec=!0:y[i.url]=1,f.load(i.url,i.forceCSS||!i.forceJS&&"css"==i.url.split(".").pop().split("?").shift()?"c":c,i.noexec,i.attrs,i.timeout),(d(e)||d(j))&&f.load(function(){k(),e&&e(i.origUrl,h,g),j&&j(i.origUrl,h,g),y[i.url]=2})))}function h(a,b){function c(a,c){if(a){if(e(a))c||(j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}),g(a,j,b,0,h);else if(Object(a)===a)for(n in m=function(){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b}(),a)a.hasOwnProperty(n)&&(!c&&!--m&&(d(j)?j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}:j[n]=function(a){return function(){var b=[].slice.call(arguments);a&&a.apply(this,b),l()}}(k[n])),g(a[n],j,b,n,h))}else!c&&l()}var h=!!a.test,i=a.load||a.both,j=a.callback||f,k=j,l=a.complete||f,m,n;c(h?a.yep:a.nope,!!i),i&&c(i)}var i,j,l=this.yepnope.loader;if(e(a))g(a,0,l,0);else if(w(a))for(i=0;i<a.length;i++)j=a[i],e(j)?g(j,0,l,0):w(j)?B(j):Object(j)===j&&h(j,l);else Object(a)===a&&h(a,l)},B.addPrefix=function(a,b){z[a]=b},B.addFilter=function(a){x.push(a)},B.errorTimeout=1e4,null==b.readyState&&b.addEventListener&&(b.readyState="loading",b.addEventListener("DOMContentLoaded",A=function(){b.removeEventListener("DOMContentLoaded",A,0),b.readyState="complete"},0)),a.yepnope=k(),a.yepnope.executeStack=h,a.yepnope.injectJs=function(a,c,d,e,i,j){var k=b.createElement("script"),l,o,e=e||B.errorTimeout;k.src=a;for(o in d)k.setAttribute(o,d[o]);c=j?h:c||f,k.onreadystatechange=k.onload=function(){!l&&g(k.readyState)&&(l=1,c(),k.onload=k.onreadystatechange=null)},m(function(){l||(l=1,c(1))},e),i?k.onload():n.parentNode.insertBefore(k,n)},a.yepnope.injectCss=function(a,c,d,e,g,i){var e=b.createElement("link"),j,c=i?h:c||f;e.href=a,e.rel="stylesheet",e.type="text/css";for(j in d)e.setAttribute(j,d[j]);g||(n.parentNode.insertBefore(e,n),m(c,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};
;(function($){var defaults={mode:'horizontal',slideSelector:'',infiniteLoop:true,hideControlOnEnd:false,speed:500,easing:null,slideMargin:0,startSlide:0,randomStart:false,captions:false,ticker:false,tickerHover:false,adaptiveHeight:false,adaptiveHeightSpeed:500,video:false,useCSS:true,preloadImages:'visible',responsive:true,slideZIndex:50,wrapperClass:'bx-wrapper',touchEnabled:true,swipeThreshold:50,oneToOneTouch:true,preventDefaultSwipeX:true,preventDefaultSwipeY:false,ariaLive:true,ariaHidden:true,keyboardEnabled:false,pager:true,pagerType:'full',pagerShortSeparator:' / ',pagerSelector:null,buildPager:null,pagerCustom:null,controls:true,nextText:'Next',prevText:'Prev',nextSelector:null,prevSelector:null,autoControls:false,startText:'Start',stopText:'Stop',autoControlsCombine:false,autoControlsSelector:null,auto:false,pause:4000,autoStart:true,autoDirection:'next',stopAutoOnClick:false,autoHover:false,autoDelay:0,autoSlideForOnePage:false,minSlides:1,maxSlides:1,moveSlides:0,slideWidth:0,shrinkItems:false,onSliderLoad:function(){return true;},onSlideBefore:function(){return true;},onSlideAfter:function(){return true;},onSlideNext:function(){return true;},onSlidePrev:function(){return true;},onSliderResize:function(){return true;}};$.fn.bxSlider=function(options){if(this.length===0){return this;}
if(this.length>1){this.each(function(){$(this).bxSlider(options);});return this;}
var slider={},el=this,windowWidth=$(window).width(),windowHeight=$(window).height();if($(el).data('bxSlider')){return;}
var init=function(){if($(el).data('bxSlider')){return;}
slider.settings=$.extend({},defaults,options);slider.settings.slideWidth=parseInt(slider.settings.slideWidth);slider.children=el.children(slider.settings.slideSelector);if(slider.children.length<slider.settings.minSlides){slider.settings.minSlides=slider.children.length;}
if(slider.children.length<slider.settings.maxSlides){slider.settings.maxSlides=slider.children.length;}
if(slider.settings.randomStart){slider.settings.startSlide=Math.floor(Math.random()*slider.children.length);}
slider.active={index:slider.settings.startSlide};slider.carousel=slider.settings.minSlides>1||slider.settings.maxSlides>1?true:false;if(slider.carousel){slider.settings.preloadImages='all';}
slider.minThreshold=(slider.settings.minSlides*slider.settings.slideWidth)+((slider.settings.minSlides-1)*slider.settings.slideMargin);slider.maxThreshold=(slider.settings.maxSlides*slider.settings.slideWidth)+((slider.settings.maxSlides-1)*slider.settings.slideMargin);slider.working=false;slider.controls={};slider.interval=null;slider.animProp=slider.settings.mode==='vertical'?'top':'left';slider.usingCSS=slider.settings.useCSS&&slider.settings.mode!=='fade'&&(function(){var div=document.createElement('div'),props=['WebkitPerspective','MozPerspective','OPerspective','msPerspective'];for(var i=0;i<props.length;i++){if(div.style[props[i]]!==undefined){slider.cssPrefix=props[i].replace('Perspective','').toLowerCase();slider.animProp='-'+slider.cssPrefix+'-transform';return true;}}
return false;}());if(slider.settings.mode==='vertical'){slider.settings.maxSlides=slider.settings.minSlides;}
el.data('origStyle',el.attr('style'));el.children(slider.settings.slideSelector).each(function(){$(this).data('origStyle',$(this).attr('style'));});setup();};var setup=function(){var preloadSelector=slider.children.eq(slider.settings.startSlide);el.wrap('<div class="'+slider.settings.wrapperClass+'"><div class="bx-viewport"></div></div>');slider.viewport=el.parent();if(slider.settings.ariaLive&&!slider.settings.ticker){slider.viewport.attr('aria-live','polite');}
slider.loader=$('<div class="bx-loading" />');slider.viewport.prepend(slider.loader);el.css({width:slider.settings.mode==='horizontal'?(slider.children.length*1000+215)+'%':'auto',position:'relative'});if(slider.usingCSS&&slider.settings.easing){el.css('-'+slider.cssPrefix+'-transition-timing-function',slider.settings.easing);}else if(!slider.settings.easing){slider.settings.easing='swing';}
slider.viewport.css({width:'100%',overflow:'hidden',position:'relative'});slider.viewport.parent().css({maxWidth:getViewportMaxWidth()});slider.children.css({float:slider.settings.mode==='horizontal'?'left':'none',listStyle:'none',position:'relative'});slider.children.css('width',getSlideWidth());if(slider.settings.mode==='horizontal'&&slider.settings.slideMargin>0){slider.children.css('marginRight',slider.settings.slideMargin);}
if(slider.settings.mode==='vertical'&&slider.settings.slideMargin>0){slider.children.css('marginBottom',slider.settings.slideMargin);}
if(slider.settings.mode==='fade'){slider.children.css({position:'absolute',zIndex:0,display:'none'});slider.children.eq(slider.settings.startSlide).css({zIndex:slider.settings.slideZIndex,display:'block'});}
slider.controls.el=$('<div class="bx-controls" />');if(slider.settings.captions){appendCaptions();}
slider.active.last=slider.settings.startSlide===getPagerQty()-1;if(slider.settings.video){el.fitVids();}
if(slider.settings.preloadImages==='all'||slider.settings.ticker){preloadSelector=slider.children;}
if(!slider.settings.ticker){if(slider.settings.controls){appendControls();}
if(slider.settings.auto&&slider.settings.autoControls){appendControlsAuto();}
if(slider.settings.pager){appendPager();}
if(slider.settings.controls||slider.settings.autoControls||slider.settings.pager){slider.viewport.after(slider.controls.el);}}else{slider.settings.pager=false;}
loadElements(preloadSelector,start);};var loadElements=function(selector,callback){var total=selector.find('img:not([src=""]), iframe').length,count=0;if(total===0){callback();return;}
selector.find('img:not([src=""]), iframe').each(function(){$(this).one('load error',function(){if(++count===total){callback();}}).each(function(){if(this.complete){$(this).trigger('load');}});});};var start=function(){if(slider.settings.infiniteLoop&&slider.settings.mode!=='fade'&&!slider.settings.ticker){var slice=slider.settings.mode==='vertical'?slider.settings.minSlides:slider.settings.maxSlides,sliceAppend=slider.children.slice(0,slice).clone(true).addClass('bx-clone'),slicePrepend=slider.children.slice(-slice).clone(true).addClass('bx-clone');if(slider.settings.ariaHidden){sliceAppend.attr('aria-hidden',true);slicePrepend.attr('aria-hidden',true);}
el.append(sliceAppend).prepend(slicePrepend);}
slider.loader.remove();setSlidePosition();if(slider.settings.mode==='vertical'){slider.settings.adaptiveHeight=true;}
slider.viewport.height(getViewportHeight());el.redrawSlider();slider.settings.onSliderLoad.call(el,slider.active.index);slider.initialized=true;if(slider.settings.responsive){$(window).bind('resize',resizeWindow);}
if(slider.settings.auto&&slider.settings.autoStart&&(getPagerQty()>1||slider.settings.autoSlideForOnePage)){initAuto();}
if(slider.settings.ticker){initTicker();}
if(slider.settings.pager){updatePagerActive(slider.settings.startSlide);}
if(slider.settings.controls){updateDirectionControls();}
if(slider.settings.touchEnabled&&!slider.settings.ticker){initTouch();}
if(slider.settings.keyboardEnabled&&!slider.settings.ticker){$(document).keydown(keyPress);}};var getViewportHeight=function(){var height=0;var children=$();if(slider.settings.mode!=='vertical'&&!slider.settings.adaptiveHeight){children=slider.children;}else{if(!slider.carousel){children=slider.children.eq(slider.active.index);}else{var currentIndex=slider.settings.moveSlides===1?slider.active.index:slider.active.index*getMoveBy();children=slider.children.eq(currentIndex);for(i=1;i<=slider.settings.maxSlides-1;i++){if(currentIndex+i>=slider.children.length){children=children.add(slider.children.eq(i-1));}else{children=children.add(slider.children.eq(currentIndex+i));}}}}
if(slider.settings.mode==='vertical'){children.each(function(index){height+=$(this).outerHeight();});if(slider.settings.slideMargin>0){height+=slider.settings.slideMargin*(slider.settings.minSlides-1);}}else{height=Math.max.apply(Math,children.map(function(){return $(this).outerHeight(false);}).get());}
if(slider.viewport.css('box-sizing')==='border-box'){height+=parseFloat(slider.viewport.css('padding-top'))+parseFloat(slider.viewport.css('padding-bottom'))+
parseFloat(slider.viewport.css('border-top-width'))+parseFloat(slider.viewport.css('border-bottom-width'));}else if(slider.viewport.css('box-sizing')==='padding-box'){height+=parseFloat(slider.viewport.css('padding-top'))+parseFloat(slider.viewport.css('padding-bottom'));}
return height;};var getViewportMaxWidth=function(){var width='100%';if(slider.settings.slideWidth>0){if(slider.settings.mode==='horizontal'){width=(slider.settings.maxSlides*slider.settings.slideWidth)+((slider.settings.maxSlides-1)*slider.settings.slideMargin);}else{width=slider.settings.slideWidth;}}
return width;};var getSlideWidth=function(){var newElWidth=slider.settings.slideWidth,wrapWidth=slider.viewport.width();if(slider.settings.slideWidth===0||(slider.settings.slideWidth>wrapWidth&&!slider.carousel)||slider.settings.mode==='vertical'){newElWidth=wrapWidth;}else if(slider.settings.maxSlides>1&&slider.settings.mode==='horizontal'){if(wrapWidth>slider.maxThreshold){return newElWidth;}else if(wrapWidth<slider.minThreshold){newElWidth=(wrapWidth-(slider.settings.slideMargin*(slider.settings.minSlides-1)))/slider.settings.minSlides;}else if(slider.settings.shrinkItems){newElWidth=Math.floor((wrapWidth+slider.settings.slideMargin)/(Math.ceil((wrapWidth+slider.settings.slideMargin)/(newElWidth+slider.settings.slideMargin)))-slider.settings.slideMargin);}}
return newElWidth;};var getNumberSlidesShowing=function(){var slidesShowing=1,childWidth=null;if(slider.settings.mode==='horizontal'&&slider.settings.slideWidth>0){if(slider.viewport.width()<slider.minThreshold){slidesShowing=slider.settings.minSlides;}else if(slider.viewport.width()>slider.maxThreshold){slidesShowing=slider.settings.maxSlides;}else{childWidth=slider.children.first().width()+slider.settings.slideMargin;slidesShowing=Math.floor((slider.viewport.width()+
slider.settings.slideMargin)/childWidth);}}else if(slider.settings.mode==='vertical'){slidesShowing=slider.settings.minSlides;}
return slidesShowing;};var getPagerQty=function(){var pagerQty=0,breakPoint=0,counter=0;if(slider.settings.moveSlides>0){if(slider.settings.infiniteLoop){pagerQty=Math.ceil(slider.children.length/getMoveBy());}else{while(breakPoint<slider.children.length){++pagerQty;breakPoint=counter+getNumberSlidesShowing();counter+=slider.settings.moveSlides<=getNumberSlidesShowing()?slider.settings.moveSlides:getNumberSlidesShowing();}}}else{pagerQty=Math.ceil(slider.children.length/getNumberSlidesShowing());}
return pagerQty;};var getMoveBy=function(){if(slider.settings.moveSlides>0&&slider.settings.moveSlides<=getNumberSlidesShowing()){return slider.settings.moveSlides;}
return getNumberSlidesShowing();};var setSlidePosition=function(){var position,lastChild,lastShowingIndex;if(slider.children.length>slider.settings.maxSlides&&slider.active.last&&!slider.settings.infiniteLoop){if(slider.settings.mode==='horizontal'){lastChild=slider.children.last();position=lastChild.position();setPositionProperty(-(position.left-(slider.viewport.width()-lastChild.outerWidth())),'reset',0);}else if(slider.settings.mode==='vertical'){lastShowingIndex=slider.children.length-slider.settings.minSlides;position=slider.children.eq(lastShowingIndex).position();setPositionProperty(-position.top,'reset',0);}}else{position=slider.children.eq(slider.active.index*getMoveBy()).position();if(slider.active.index===getPagerQty()-1){slider.active.last=true;}
if(position!==undefined){if(slider.settings.mode==='horizontal'){setPositionProperty(-position.left,'reset',0);}
else if(slider.settings.mode==='vertical'){setPositionProperty(-position.top,'reset',0);}}}};var setPositionProperty=function(value,type,duration,params){var animateObj,propValue;if(slider.usingCSS){propValue=slider.settings.mode==='vertical'?'translate3d(0, '+value+'px, 0)':'translate3d('+value+'px, 0, 0)';el.css('-'+slider.cssPrefix+'-transition-duration',duration/1000+'s');if(type==='slide'){el.css(slider.animProp,propValue);if(duration!==0){el.bind('transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd',function(e){if(!$(e.target).is(el)){return;}
el.unbind('transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd');updateAfterSlideTransition();});}else{updateAfterSlideTransition();}}else if(type==='reset'){el.css(slider.animProp,propValue);}else if(type==='ticker'){el.css('-'+slider.cssPrefix+'-transition-timing-function','linear');el.css(slider.animProp,propValue);if(duration!==0){el.bind('transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd',function(e){if(!$(e.target).is(el)){return;}
el.unbind('transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd');setPositionProperty(params.resetValue,'reset',0);tickerLoop();});}else{setPositionProperty(params.resetValue,'reset',0);tickerLoop();}}}else{animateObj={};animateObj[slider.animProp]=value;if(type==='slide'){el.animate(animateObj,duration,slider.settings.easing,function(){updateAfterSlideTransition();});}else if(type==='reset'){el.css(slider.animProp,value);}else if(type==='ticker'){el.animate(animateObj,duration,'linear',function(){setPositionProperty(params.resetValue,'reset',0);tickerLoop();});}}};var populatePager=function(){var pagerHtml='',linkContent='',pagerQty=getPagerQty();for(var i=0;i<pagerQty;i++){linkContent='';if(slider.settings.buildPager&&$.isFunction(slider.settings.buildPager)||slider.settings.pagerCustom){linkContent=slider.settings.buildPager(i);slider.pagerEl.addClass('bx-custom-pager');}else{linkContent=i+1;slider.pagerEl.addClass('bx-default-pager');}
pagerHtml+='<div class="bx-pager-item"><a href="" data-slide-index="'+i+'" class="bx-pager-link">'+linkContent+'</a></div>';}
slider.pagerEl.html(pagerHtml);};var appendPager=function(){if(!slider.settings.pagerCustom){slider.pagerEl=$('<div class="bx-pager" />');if(slider.settings.pagerSelector){$(slider.settings.pagerSelector).html(slider.pagerEl);}else{slider.controls.el.addClass('bx-has-pager').append(slider.pagerEl);}
populatePager();}else{slider.pagerEl=$(slider.settings.pagerCustom);}
slider.pagerEl.on('click touchend','a',clickPagerBind);};var appendControls=function(){slider.controls.next=$('<a class="bx-next" href="">'+slider.settings.nextText+'</a>');slider.controls.prev=$('<a class="bx-prev" href="">'+slider.settings.prevText+'</a>');slider.controls.next.bind('click touchend',clickNextBind);slider.controls.prev.bind('click touchend',clickPrevBind);if(slider.settings.nextSelector){$(slider.settings.nextSelector).append(slider.controls.next);}
if(slider.settings.prevSelector){$(slider.settings.prevSelector).append(slider.controls.prev);}
if(!slider.settings.nextSelector&&!slider.settings.prevSelector){slider.controls.directionEl=$('<div class="bx-controls-direction" />');slider.controls.directionEl.append(slider.controls.prev).append(slider.controls.next);slider.controls.el.addClass('bx-has-controls-direction').append(slider.controls.directionEl);}};var appendControlsAuto=function(){slider.controls.start=$('<div class="bx-controls-auto-item"><a class="bx-start" href="">'+slider.settings.startText+'</a></div>');slider.controls.stop=$('<div class="bx-controls-auto-item"><a class="bx-stop" href="">'+slider.settings.stopText+'</a></div>');slider.controls.autoEl=$('<div class="bx-controls-auto" />');slider.controls.autoEl.on('click','.bx-start',clickStartBind);slider.controls.autoEl.on('click','.bx-stop',clickStopBind);if(slider.settings.autoControlsCombine){slider.controls.autoEl.append(slider.controls.start);}else{slider.controls.autoEl.append(slider.controls.start).append(slider.controls.stop);}
if(slider.settings.autoControlsSelector){$(slider.settings.autoControlsSelector).html(slider.controls.autoEl);}else{slider.controls.el.addClass('bx-has-controls-auto').append(slider.controls.autoEl);}
updateAutoControls(slider.settings.autoStart?'stop':'start');};var appendCaptions=function(){slider.children.each(function(index){var title=$(this).find('img:first').attr('title');if(title!==undefined&&(''+title).length){$(this).append('<div class="bx-caption"><span>'+title+'</span></div>');}});};var clickNextBind=function(e){e.preventDefault();if(slider.controls.el.hasClass('disabled')){return;}
if(slider.settings.auto&&slider.settings.stopAutoOnClick){el.stopAuto();}
el.goToNextSlide();};var clickPrevBind=function(e){e.preventDefault();if(slider.controls.el.hasClass('disabled')){return;}
if(slider.settings.auto&&slider.settings.stopAutoOnClick){el.stopAuto();}
el.goToPrevSlide();};var clickStartBind=function(e){el.startAuto();e.preventDefault();};var clickStopBind=function(e){el.stopAuto();e.preventDefault();};var clickPagerBind=function(e){var pagerLink,pagerIndex;e.preventDefault();if(slider.controls.el.hasClass('disabled')){return;}
if(slider.settings.auto&&slider.settings.stopAutoOnClick){el.stopAuto();}
pagerLink=$(e.currentTarget);if(pagerLink.attr('data-slide-index')!==undefined){pagerIndex=parseInt(pagerLink.attr('data-slide-index'));if(pagerIndex!==slider.active.index){el.goToSlide(pagerIndex);}}};var updatePagerActive=function(slideIndex){var len=slider.children.length;if(slider.settings.pagerType==='short'){if(slider.settings.maxSlides>1){len=Math.ceil(slider.children.length/slider.settings.maxSlides);}
slider.pagerEl.html((slideIndex+1)+slider.settings.pagerShortSeparator+len);return;}
slider.pagerEl.find('a').removeClass('active');slider.pagerEl.each(function(i,el){$(el).find('a').eq(slideIndex).addClass('active');});};var updateAfterSlideTransition=function(){if(slider.settings.infiniteLoop){var position='';if(slider.active.index===0){position=slider.children.eq(0).position();}else if(slider.active.index===getPagerQty()-1&&slider.carousel){position=slider.children.eq((getPagerQty()-1)*getMoveBy()).position();}else if(slider.active.index===slider.children.length-1){position=slider.children.eq(slider.children.length-1).position();}
if(position){if(slider.settings.mode==='horizontal'){setPositionProperty(-position.left,'reset',0);}
else if(slider.settings.mode==='vertical'){setPositionProperty(-position.top,'reset',0);}}}
slider.working=false;slider.settings.onSlideAfter.call(el,slider.children.eq(slider.active.index),slider.oldIndex,slider.active.index);};var updateAutoControls=function(state){if(slider.settings.autoControlsCombine){slider.controls.autoEl.html(slider.controls[state]);}else{slider.controls.autoEl.find('a').removeClass('active');slider.controls.autoEl.find('a:not(.bx-'+state+')').addClass('active');}};var updateDirectionControls=function(){if(getPagerQty()===1){slider.controls.prev.addClass('disabled');slider.controls.next.addClass('disabled');}else if(!slider.settings.infiniteLoop&&slider.settings.hideControlOnEnd){if(slider.active.index===0){slider.controls.prev.addClass('disabled');slider.controls.next.removeClass('disabled');}else if(slider.active.index===getPagerQty()-1){slider.controls.next.addClass('disabled');slider.controls.prev.removeClass('disabled');}else{slider.controls.prev.removeClass('disabled');slider.controls.next.removeClass('disabled');}}};var initAuto=function(){if(slider.settings.autoDelay>0){var timeout=setTimeout(el.startAuto,slider.settings.autoDelay);}else{el.startAuto();$(window).focus(function(){el.startAuto();}).blur(function(){el.stopAuto();});}
if(slider.settings.autoHover){el.hover(function(){if(slider.interval){el.stopAuto(true);slider.autoPaused=true;}},function(){if(slider.autoPaused){el.startAuto(true);slider.autoPaused=null;}});}};var initTicker=function(){var startPosition=0,position,transform,value,idx,ratio,property,newSpeed,totalDimens;if(slider.settings.autoDirection==='next'){el.append(slider.children.clone().addClass('bx-clone'));}else{el.prepend(slider.children.clone().addClass('bx-clone'));position=slider.children.first().position();startPosition=slider.settings.mode==='horizontal'?-position.left:-position.top;}
setPositionProperty(startPosition,'reset',0);slider.settings.pager=false;slider.settings.controls=false;slider.settings.autoControls=false;if(slider.settings.tickerHover){if(slider.usingCSS){idx=slider.settings.mode==='horizontal'?4:5;slider.viewport.hover(function(){transform=el.css('-'+slider.cssPrefix+'-transform');value=parseFloat(transform.split(',')[idx]);setPositionProperty(value,'reset',0);},function(){totalDimens=0;slider.children.each(function(index){totalDimens+=slider.settings.mode==='horizontal'?$(this).outerWidth(true):$(this).outerHeight(true);});ratio=slider.settings.speed/totalDimens;property=slider.settings.mode==='horizontal'?'left':'top';newSpeed=ratio*(totalDimens-(Math.abs(parseInt(value))));tickerLoop(newSpeed);});}else{slider.viewport.hover(function(){el.stop();},function(){totalDimens=0;slider.children.each(function(index){totalDimens+=slider.settings.mode==='horizontal'?$(this).outerWidth(true):$(this).outerHeight(true);});ratio=slider.settings.speed/totalDimens;property=slider.settings.mode==='horizontal'?'left':'top';newSpeed=ratio*(totalDimens-(Math.abs(parseInt(el.css(property)))));tickerLoop(newSpeed);});}}
tickerLoop();};var tickerLoop=function(resumeSpeed){var speed=resumeSpeed?resumeSpeed:slider.settings.speed,position={left:0,top:0},reset={left:0,top:0},animateProperty,resetValue,params;if(slider.settings.autoDirection==='next'){position=el.find('.bx-clone').first().position();}else{reset=slider.children.first().position();}
animateProperty=slider.settings.mode==='horizontal'?-position.left:-position.top;resetValue=slider.settings.mode==='horizontal'?-reset.left:-reset.top;params={resetValue:resetValue};setPositionProperty(animateProperty,'ticker',speed,params);};var isOnScreen=function(el){var win=$(window),viewport={top:win.scrollTop(),left:win.scrollLeft()},bounds=el.offset();viewport.right=viewport.left+win.width();viewport.bottom=viewport.top+win.height();bounds.right=bounds.left+el.outerWidth();bounds.bottom=bounds.top+el.outerHeight();return(!(viewport.right<bounds.left||viewport.left>bounds.right||viewport.bottom<bounds.top||viewport.top>bounds.bottom));};var keyPress=function(e){var activeElementTag=document.activeElement.tagName.toLowerCase(),tagFilters='input|textarea',p=new RegExp(activeElementTag,['i']),result=p.exec(tagFilters);if(result==null&&isOnScreen(el)){if(e.keyCode===39){clickNextBind(e);return false;}else if(e.keyCode===37){clickPrevBind(e);return false;}}};var initTouch=function(){slider.touch={start:{x:0,y:0},end:{x:0,y:0}};slider.viewport.bind('touchstart MSPointerDown pointerdown',onTouchStart);slider.viewport.on('click','.bxslider a',function(e){if(slider.viewport.hasClass('click-disabled')){e.preventDefault();slider.viewport.removeClass('click-disabled');}});};var onTouchStart=function(e){slider.controls.el.addClass('disabled');if(slider.working){e.preventDefault();slider.controls.el.removeClass('disabled');}else{slider.touch.originalPos=el.position();var orig=e.originalEvent,touchPoints=(typeof orig.changedTouches!=='undefined')?orig.changedTouches:[orig];slider.touch.start.x=touchPoints[0].pageX;slider.touch.start.y=touchPoints[0].pageY;if(slider.viewport.get(0).setPointerCapture){slider.pointerId=orig.pointerId;slider.viewport.get(0).setPointerCapture(slider.pointerId);}
slider.viewport.bind('touchmove MSPointerMove pointermove',onTouchMove);slider.viewport.bind('touchend MSPointerUp pointerup',onTouchEnd);slider.viewport.bind('MSPointerCancel pointercancel',onPointerCancel);}};var onPointerCancel=function(e){setPositionProperty(slider.touch.originalPos.left,'reset',0);slider.controls.el.removeClass('disabled');slider.viewport.unbind('MSPointerCancel pointercancel',onPointerCancel);slider.viewport.unbind('touchmove MSPointerMove pointermove',onTouchMove);slider.viewport.unbind('touchend MSPointerUp pointerup',onTouchEnd);if(slider.viewport.get(0).releasePointerCapture){slider.viewport.get(0).releasePointerCapture(slider.pointerId);}};var onTouchMove=function(e){var orig=e.originalEvent,touchPoints=(typeof orig.changedTouches!=='undefined')?orig.changedTouches:[orig],xMovement=Math.abs(touchPoints[0].pageX-slider.touch.start.x),yMovement=Math.abs(touchPoints[0].pageY-slider.touch.start.y),value=0,change=0;if((xMovement*3)>yMovement&&slider.settings.preventDefaultSwipeX){e.preventDefault();}else if((yMovement*3)>xMovement&&slider.settings.preventDefaultSwipeY){e.preventDefault();}
if(slider.settings.mode!=='fade'&&slider.settings.oneToOneTouch){if(slider.settings.mode==='horizontal'){change=touchPoints[0].pageX-slider.touch.start.x;value=slider.touch.originalPos.left+change;}else{change=touchPoints[0].pageY-slider.touch.start.y;value=slider.touch.originalPos.top+change;}
setPositionProperty(value,'reset',0);}};var onTouchEnd=function(e){slider.viewport.unbind('touchmove MSPointerMove pointermove',onTouchMove);slider.controls.el.removeClass('disabled');var orig=e.originalEvent,touchPoints=(typeof orig.changedTouches!=='undefined')?orig.changedTouches:[orig],value=0,distance=0;slider.touch.end.x=touchPoints[0].pageX;slider.touch.end.y=touchPoints[0].pageY;if(slider.settings.mode==='fade'){distance=Math.abs(slider.touch.start.x-slider.touch.end.x);if(distance>=slider.settings.swipeThreshold){if(slider.touch.start.x>slider.touch.end.x){el.goToNextSlide();}else{el.goToPrevSlide();}
el.stopAuto();}}else{if(slider.settings.mode==='horizontal'){distance=slider.touch.end.x-slider.touch.start.x;value=slider.touch.originalPos.left;}else{distance=slider.touch.end.y-slider.touch.start.y;value=slider.touch.originalPos.top;}
if(!slider.settings.infiniteLoop&&((slider.active.index===0&&distance>0)||(slider.active.last&&distance<0))){setPositionProperty(value,'reset',200);}else{if(Math.abs(distance)>=slider.settings.swipeThreshold){if(distance<0){el.goToNextSlide();}else{el.goToPrevSlide();}
el.stopAuto();}else{setPositionProperty(value,'reset',200);}}}
slider.viewport.unbind('touchend MSPointerUp pointerup',onTouchEnd);if(slider.viewport.get(0).releasePointerCapture){slider.viewport.get(0).releasePointerCapture(slider.pointerId);}};var resizeWindow=function(e){if(!slider.initialized){return;}
if(slider.working){window.setTimeout(resizeWindow,10);}else{var windowWidthNew=$(window).width(),windowHeightNew=$(window).height();if(windowWidth!==windowWidthNew||windowHeight!==windowHeightNew){windowWidth=windowWidthNew;windowHeight=windowHeightNew;el.redrawSlider();slider.settings.onSliderResize.call(el,slider.active.index);}}};var applyAriaHiddenAttributes=function(startVisibleIndex){var numberOfSlidesShowing=getNumberSlidesShowing();if(slider.settings.ariaHidden&&!slider.settings.ticker){slider.children.attr('aria-hidden','true');slider.children.slice(startVisibleIndex,startVisibleIndex+numberOfSlidesShowing).attr('aria-hidden','false');}};var setSlideIndex=function(slideIndex){if(slideIndex<0){if(slider.settings.infiniteLoop){return getPagerQty()-1;}else{return slider.active.index;}}else if(slideIndex>=getPagerQty()){if(slider.settings.infiniteLoop){return 0;}else{return slider.active.index;}}else{return slideIndex;}};el.goToSlide=function(slideIndex,direction){var performTransition=true,moveBy=0,position={left:0,top:0},lastChild=null,lastShowingIndex,eq,value,requestEl;slider.oldIndex=slider.active.index;slider.active.index=setSlideIndex(slideIndex);if(slider.working||slider.active.index===slider.oldIndex){return;}
slider.working=true;performTransition=slider.settings.onSlideBefore.call(el,slider.children.eq(slider.active.index),slider.oldIndex,slider.active.index);if(typeof(performTransition)!=='undefined'&&!performTransition){slider.active.index=slider.oldIndex;slider.working=false;return;}
if(direction==='next'){if(!slider.settings.onSlideNext.call(el,slider.children.eq(slider.active.index),slider.oldIndex,slider.active.index)){performTransition=false;}}else if(direction==='prev'){if(!slider.settings.onSlidePrev.call(el,slider.children.eq(slider.active.index),slider.oldIndex,slider.active.index)){performTransition=false;}}
slider.active.last=slider.active.index>=getPagerQty()-1;if(slider.settings.pager||slider.settings.pagerCustom){updatePagerActive(slider.active.index);}
if(slider.settings.controls){updateDirectionControls();}
if(slider.settings.mode==='fade'){if(slider.settings.adaptiveHeight&&slider.viewport.height()!==getViewportHeight()){slider.viewport.animate({height:getViewportHeight()},slider.settings.adaptiveHeightSpeed);}
slider.children.filter(':visible').fadeOut(slider.settings.speed).css({zIndex:0});slider.children.eq(slider.active.index).css('zIndex',slider.settings.slideZIndex+1).fadeIn(slider.settings.speed,function(){$(this).css('zIndex',slider.settings.slideZIndex);updateAfterSlideTransition();});}else{if(slider.settings.adaptiveHeight&&slider.viewport.height()!==getViewportHeight()){slider.viewport.animate({height:getViewportHeight()},slider.settings.adaptiveHeightSpeed);}
if(!slider.settings.infiniteLoop&&slider.carousel&&slider.active.last){if(slider.settings.mode==='horizontal'){lastChild=slider.children.eq(slider.children.length-1);position=lastChild.position();moveBy=slider.viewport.width()-lastChild.outerWidth();}else{lastShowingIndex=slider.children.length-slider.settings.minSlides;position=slider.children.eq(lastShowingIndex).position();}}else if(slider.carousel&&slider.active.last&&direction==='prev'){eq=slider.settings.moveSlides===1?slider.settings.maxSlides-getMoveBy():((getPagerQty()-1)*getMoveBy())-(slider.children.length-slider.settings.maxSlides);lastChild=el.children('.bx-clone').eq(eq);position=lastChild.position();}else if(direction==='next'&&slider.active.index===0){position=el.find('> .bx-clone').eq(slider.settings.maxSlides).position();slider.active.last=false;}else if(slideIndex>=0){requestEl=slideIndex*parseInt(getMoveBy());position=slider.children.eq(requestEl).position();}
if(typeof(position)!=='undefined'){value=slider.settings.mode==='horizontal'?-(position.left-moveBy):-position.top;setPositionProperty(value,'slide',slider.settings.speed);}else{slider.working=false;}}
if(slider.settings.ariaHidden){applyAriaHiddenAttributes(slider.active.index*getMoveBy());}};el.goToNextSlide=function(){if(!slider.settings.infiniteLoop&&slider.active.last){return;}
var pagerIndex=parseInt(slider.active.index)+1;el.goToSlide(pagerIndex,'next');};el.goToPrevSlide=function(){if(!slider.settings.infiniteLoop&&slider.active.index===0){return;}
var pagerIndex=parseInt(slider.active.index)-1;el.goToSlide(pagerIndex,'prev');};el.startAuto=function(preventControlUpdate){if(slider.interval){return;}
slider.interval=setInterval(function(){if(slider.settings.autoDirection==='next'){el.goToNextSlide();}else{el.goToPrevSlide();}},slider.settings.pause);if(slider.settings.autoControls&&preventControlUpdate!==true){updateAutoControls('stop');}};el.stopAuto=function(preventControlUpdate){if(!slider.interval){return;}
clearInterval(slider.interval);slider.interval=null;if(slider.settings.autoControls&&preventControlUpdate!==true){updateAutoControls('start');}};el.getCurrentSlide=function(){return slider.active.index;};el.getCurrentSlideElement=function(){return slider.children.eq(slider.active.index);};el.getSlideElement=function(index){return slider.children.eq(index);};el.getSlideCount=function(){return slider.children.length;};el.isWorking=function(){return slider.working;};el.redrawSlider=function(){slider.children.add(el.find('.bx-clone')).outerWidth(getSlideWidth());slider.viewport.css('height',getViewportHeight());if(!slider.settings.ticker){setSlidePosition();}
if(slider.active.last){slider.active.index=getPagerQty()-1;}
if(slider.active.index>=getPagerQty()){slider.active.last=true;}
if(slider.settings.pager&&!slider.settings.pagerCustom){populatePager();updatePagerActive(slider.active.index);}
if(slider.settings.ariaHidden){applyAriaHiddenAttributes(slider.active.index*getMoveBy());}};el.destroySlider=function(){if(!slider.initialized){return;}
slider.initialized=false;$('.bx-clone',this).remove();slider.children.each(function(){if($(this).data('origStyle')!==undefined){$(this).attr('style',$(this).data('origStyle'));}else{$(this).removeAttr('style');}});if($(this).data('origStyle')!==undefined){this.attr('style',$(this).data('origStyle'));}else{$(this).removeAttr('style');}
$(this).unwrap().unwrap();if(slider.controls.el){slider.controls.el.remove();}
if(slider.controls.next){slider.controls.next.remove();}
if(slider.controls.prev){slider.controls.prev.remove();}
if(slider.pagerEl&&slider.settings.controls&&!slider.settings.pagerCustom){slider.pagerEl.remove();}
$('.bx-caption',this).remove();if(slider.controls.autoEl){slider.controls.autoEl.remove();}
clearInterval(slider.interval);if(slider.settings.responsive){$(window).unbind('resize',resizeWindow);}
if(slider.settings.keyboardEnabled){$(document).unbind('keydown',keyPress);}
$(this).removeData('bxSlider');};el.reloadSlider=function(settings){if(settings!==undefined){options=settings;}
el.destroySlider();init();$(el).data('bxSlider',this);};init();$(el).data('bxSlider',this);return this;};})(jQuery);
;(function(jQuery,win){'use strict';var requestFrame=(function(){var raf=win.requestAnimationFrame||win.mozRequestAnimationFrame||win.webkitRequestAnimationFrame||function(fn){return win.setTimeout(fn,20);};return function(fn){return raf(fn);};})();var style=(win.document.body||win.document.documentElement).style;var prop='transition';var supportsTransition=typeof style[prop]=='string';var events={created:'sticky2-created',update:'sticky2-update',top:'sticky2-hit-top',bottom:'sticky2-hit-bottom',frozen:'sticky2-frozen',unfrozen:'sticky2-unfrozen'};var Sticky2=function(elm,par,options){this.element=elm;this.parent=par;this._frozen=false;this._stopped=true;this.options=jQuery.extend({useTransition:true,animate:true,animTime:200,animDelay:300},options);var offset=parseInt(options.offset,10);this.options.offset=isNaN(offset)?0:offset;this.init();};Sticky2.prototype.init=function(){var transition='';if(this.options.useTransition&&supportsTransition){transition='top '+this.options.animTime+'ms ease-in-out';this.options.animate=false;}
this.parent.css({'position':'relative'});this.element.addClass('sticky2-scroll').css({'transition':transition,'position':'relative'});this.element.trigger(events.created);this.update();};Sticky2.prototype.update=function(){this.setBoundaries(0);this.moveIt();this.element.trigger(events.update);};Sticky2.prototype.moveIt=function(){if(p3d.adjust_position!='on')return;if(window.matchMedia('(max-width: 767px)').matches){jQuery('div.images, div.p3d-images').css('top','0px');return;}
else{}
var reviews_height=jQuery('div.woocommerce-tabs').height()||0;var scrollTop=(win.document.documentElement.scrollTop||win.document.body.scrollTop)+this.options.offset;if(p3d.show_reviews=='on')
var height=this.element.outerHeight(true)+reviews_height;else
var height=this.element.outerHeight(true);if(parseFloat(p3d.sticky_menu_offset)>0)height+=parseFloat(p3d.sticky_menu_offset)
var realStop=this._stop-height;if(this._parentHeight-this._offset>height&&!this._frozen){if(scrollTop>=this._start&&scrollTop<=realStop){this.updateOffset(scrollTop-this._start);this._stopped=false;}else{if(scrollTop<this._start){this.updateOffset(0);if(!this._stopped){this.element.trigger(events.top);}
this._stopped=true;}else if(scrollTop>realStop){this.updateOffset(this._parentHeight-height-this._offset);if(!this._stopped){this.element.trigger(events.bottom);}
this._stopped=true;}}}};Sticky2.prototype.setBoundaries=function(offset){this._offset=typeof offset==='undefined'?this.element.position().top:offset;this._start=this.parent.offset().top+this._offset;this._parentHeight=this.parent[0].offsetHeight;this._stop=this._start+this._parentHeight-this._offset;};Sticky2.prototype.setOffset=function(newOffset){newOffset=parseInt(newOffset,10);if(!isNaN(newOffset)){this.options.offset=newOffset;this.moveIt();}};Sticky2.prototype.updateOffset=function(yOffset){if(this._lastPosition!==yOffset){if(this.options.animate){this.element.stop(true,false).delay(this.options.animDelay).animate({'top':yOffset},this.animTime);}else{this.element.css('top',yOffset);}
this._lastPosition=yOffset;}};Sticky2.prototype.toggleFreeze=function(){this._frozen=!this._frozen;this.element.stop(true,false);if(!this._frozen){this.element.trigger(events.unfrozen);this.moveIt();}else{this.element.trigger(events.frozen);}};jQuery.fn.sticky2=function(parentName,options){var method=parentName;var ret=false;this.each(function(){var self=jQuery(this);var instance=self.data('sticky2Instance');if(instance&&(options||method)){if(typeof options==='object'){ret=jQuery.extend(instance.options,options);}else if(options==='options'){ret=instance.options;}else if(typeof instance[method]==='function'){ret=instance[method].call(instance,options);}else{console.error('Sticky2 Element has no option/method named '+method);}}else{var parent=jQuery(parentName);if(parent){parent=self.parent().closest(parent);}else{parent=self.parent();}
instance=new Sticky2(self,parent,options||{});self.data('sticky2Instance',instance);jQuery.fn.sticky2._instances.push(instance);}});return ret||this;};var updateAll=function(){var len=jQuery.fn.sticky2._instances.length;for(var i=0;i<len;i++){jQuery.fn.sticky2._instances[i].update();}};jQuery.fn.sticky2._instances=[];jQuery.fn.sticky2.updateAll=updateAll;jQuery(win).on({'resize':function(){updateAll();},'scroll':function(){var len=jQuery.fn.sticky2._instances.length;for(var i=0;i<len;i++){var element=jQuery.fn.sticky2._instances[i];if(!element._frozen){element.moveIt();}}}});jQuery(win.document).on({'ready':function(){win.setInterval(function(){requestFrame(function(){var len=jQuery.fn.sticky2._instances.length;for(var i=0;i<len;i++){var element=jQuery.fn.sticky2._instances[i];if(element._parentHeight!==element.parent[0].offsetHeight){element.update();}}});},1000);}})}(jQuery,window));
/*!
 * Select2 4.0.3
 * https://select2.github.io
 *
 * Released under the MIT license
 * https://github.com/select2/select2/blob/master/LICENSE.md
 */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?e(require("jquery")):e(jQuery)}(function(t){(e=t&&t.fn&&t.fn.select2&&t.fn.select2.amd?t.fn.select2.amd:e)&&e.requirejs||(e?n=e:e={},f={},g={},m={},y={},i=Object.prototype.hasOwnProperty,s=[].slice,v=/\.js$/,p=function(e,t){var n,i,s=c(e),o=s[0];return e=s[1],o&&(n=b(o=l(o,t))),o?e=n&&n.normalize?n.normalize(e,(i=t,function(e){return l(e,i)})):l(e,t):(o=(s=c(e=l(e,t)))[0],e=s[1],o&&(n=b(o))),{f:o?o+"!"+e:e,n:e,pr:o,p:n}},h={require:function(e){return w(e)},exports:function(e){var t=f[e];return void 0!==t?t:f[e]={}},module:function(e){return{id:e,uri:"",exports:f[e],config:(t=e,function(){return m&&m.config&&m.config[t]||{}})};var t}},o=function(e,t,n,i){var s,o,r,a,l,c=[],u=typeof n;if(i=i||e,"undefined"==u||"function"==u){for(t=!t.length&&n.length?["require","exports","module"]:t,a=0;a<t.length;a+=1)if("require"===(o=(r=p(t[a],i)).f))c[a]=h.require(e);else if("exports"===o)c[a]=h.exports(e),l=!0;else if("module"===o)s=c[a]=h.module(e);else if(_(f,o)||_(g,o)||_(y,o))c[a]=b(o);else{if(!r.p)throw new Error(e+" missing "+o);r.p.load(r.n,w(i,!0),function(t){return function(e){f[t]=e}}(o),{}),c[a]=f[o]}u=n?n.apply(f[e],c):undefined,e&&(s&&s.exports!==d&&s.exports!==f[e]?f[e]=s.exports:u===d&&l||(f[e]=u))}else e&&(f[e]=n)},a=n=r=function(e,t,n,i,s){if("string"==typeof e)return h[e]?h[e](t):b(p(e,t).f);if(!e.splice){if((m=e).deps&&r(m.deps,m.callback),!t)return;t.splice?(e=t,t=n,n=null):e=d}return t=t||function(){},"function"==typeof n&&(n=i,i=s),i?o(d,e,t,n):setTimeout(function(){o(d,e,t,n)},4),r},r.config=function(e){return r(e)},a._defined=f,(u=function(e,t,n){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(n=t,t=[]),_(f,e)||_(g,e)||(g[e]=[e,t,n])}).amd={jQuery:!0},e.requirejs=a,e.require=n,e.define=u),e.define("almond",function(){}),e.define("jquery",[],function(){var e=t||$;return null==e&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),e}),e.define("select2/utils",["jquery"],function(o){var e={};function c(e){var t,n=e.prototype,i=[];for(t in n)"function"==typeof n[t]&&"constructor"!==t&&i.push(t);return i}e.Extend=function(e,t){var n,i={}.hasOwnProperty;function s(){this.constructor=e}for(n in t)i.call(t,n)&&(e[n]=t[n]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},e.Decorate=function(i,s){var e=c(s),t=c(i);function o(){var e=Array.prototype.unshift,t=s.prototype.constructor.length,n=i.prototype.constructor;0<t&&(e.call(arguments,i.prototype.constructor),n=s.prototype.constructor),n.apply(this,arguments)}s.displayName=i.displayName,o.prototype=new function(){this.constructor=o};for(var n=0;n<t.length;n++){var r=t[n];o.prototype[r]=i.prototype[r]}for(var a=0;a<e.length;a++){var l=e[a];o.prototype[l]=function(e){var t=function(){},n=(e in o.prototype&&(t=o.prototype[e]),s.prototype[e]);return function(){return Array.prototype.unshift.call(arguments,t),n.apply(this,arguments)}}(l)}return o};var t=function(){this.listeners={}};return t.prototype.on=function(e,t){this.listeners=this.listeners||{},e in this.listeners?this.listeners[e].push(t):this.listeners[e]=[t]},t.prototype.trigger=function(e){var t=Array.prototype.slice,n=t.call(arguments,1);this.listeners=this.listeners||{},0===(n=null==n?[]:n).length&&n.push({}),(n[0]._type=e)in this.listeners&&this.invoke(this.listeners[e],t.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},t.prototype.invoke=function(e,t){for(var n=0,i=e.length;n<i;n++)e[n].apply(this,t)},e.Observable=t,e.generateChars=function(e){for(var t="",n=0;n<e;n++)t+=Math.floor(36*Math.random()).toString(36);return t},e.bind=function(e,t){return function(){e.apply(t,arguments)}},e._convertData=function(e){for(var t in e){var n=t.split("-"),i=e;if(1!==n.length){for(var s=0;s<n.length;s++){var o=n[s];(o=o.substring(0,1).toLowerCase()+o.substring(1))in i||(i[o]={}),s==n.length-1&&(i[o]=e[t]),i=i[o]}delete e[t]}}return e},e.hasScroll=function(e,t){var n=o(t),i=t.style.overflowX,s=t.style.overflowY;return(i!==s||"hidden"!==s&&"visible"!==s)&&("scroll"===i||"scroll"===s||n.innerHeight()<t.scrollHeight||n.innerWidth()<t.scrollWidth)},e.escapeMarkup=function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof e?e:String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})},e.appendMany=function(e,t){var n;"1.7"===o.fn.jquery.substr(0,3)&&(n=o(),o.map(t,function(e){n=n.add(e)}),t=n),e.append(t)},e}),e.define("select2/results",["jquery","./utils"],function(u,e){function i(e,t,n){this.$element=e,this.data=n,this.options=t,i.__super__.constructor.call(this)}return e.Extend(i,e.Observable),i.prototype.render=function(){var e=u('<ul class="select2-results__options" role="tree"></ul>');return this.options.get("multiple")&&e.attr("aria-multiselectable","true"),this.$results=e},i.prototype.clear=function(){this.$results.empty()},i.prototype.displayMessage=function(e){var t=this.options.get("escapeMarkup"),n=(this.clear(),this.hideLoading(),u('<li role="treeitem" aria-live="assertive" class="select2-results__option"></li>')),i=this.options.get("translations").get(e.message);n.append(t(i(e.args))),n[0].className+=" select2-results__message",this.$results.append(n)},i.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},i.prototype.append=function(e){this.hideLoading();var t=[];if(null==e.results||0===e.results.length)0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"});else{e.results=this.sort(e.results);for(var n=0;n<e.results.length;n++){var i=e.results[n],i=this.option(i);t.push(i)}this.$results.append(t)}},i.prototype.position=function(e,t){t.find(".select2-results").append(e)},i.prototype.sort=function(e){return this.options.get("sorter")(e)},i.prototype.highlightFirstItem=function(){var e=this.$results.find(".select2-results__option[aria-selected]"),t=e.filter("[aria-selected=true]");(0<t.length?t:e).first().trigger("mouseenter"),this.ensureHighlightVisible()},i.prototype.setClasses=function(){var t=this;this.data.current(function(e){var i=u.map(e,function(e){return e.id.toString()});t.$results.find(".select2-results__option[aria-selected]").each(function(){var e=u(this),t=u.data(this,"data"),n=""+t.id;null!=t.element&&t.element.selected||null==t.element&&-1<u.inArray(n,i)?e.attr("aria-selected","true"):e.attr("aria-selected","false")})})},i.prototype.showLoading=function(e){this.hideLoading();e={disabled:!0,loading:!0,text:this.options.get("translations").get("searching")(e)},e=this.option(e);e.className+=" loading-results",this.$results.prepend(e)},i.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},i.prototype.option=function(e){var t,n=document.createElement("li"),i=(n.className="select2-results__option",{role:"treeitem","aria-selected":"false"});for(t in e.disabled&&(delete i["aria-selected"],i["aria-disabled"]="true"),null==e.id&&delete i["aria-selected"],null!=e._resultId&&(n.id=e._resultId),e.title&&(n.title=e.title),e.children&&(i.role="group",i["aria-label"]=e.text,delete i["aria-selected"]),i)n.setAttribute(t,i[t]);if(e.children){for(var s=u(n),o=document.createElement("strong"),r=(o.className="select2-results__group",u(o),this.template(e,o),[]),a=0;a<e.children.length;a++){var l=e.children[a],l=this.option(l);r.push(l)}var c=u("<ul></ul>",{"class":"select2-results__options select2-results__options--nested"});c.append(r),s.append(o),s.append(c)}else this.template(e,n);return u.data(n,"data",e),n},i.prototype.bind=function(t,e){var s=this,n=t.id+"-results";this.$results.attr("id",n),t.on("results:all",function(e){s.clear(),s.append(e.data),t.isOpen()&&(s.setClasses(),s.highlightFirstItem())}),t.on("results:append",function(e){s.append(e.data),t.isOpen()&&s.setClasses()}),t.on("query",function(e){s.hideMessages(),s.showLoading(e)}),t.on("select",function(){t.isOpen()&&(s.setClasses(),s.highlightFirstItem())}),t.on("unselect",function(){t.isOpen()&&(s.setClasses(),s.highlightFirstItem())}),t.on("open",function(){s.$results.attr("aria-expanded","true"),s.$results.attr("aria-hidden","false"),s.setClasses(),s.ensureHighlightVisible()}),t.on("close",function(){s.$results.attr("aria-expanded","false"),s.$results.attr("aria-hidden","true"),s.$results.removeAttr("aria-activedescendant")}),t.on("results:toggle",function(){var e=s.getHighlightedResults();0!==e.length&&e.trigger("mouseup")}),t.on("results:select",function(){var e,t=s.getHighlightedResults();0!==t.length&&(e=t.data("data"),"true"==t.attr("aria-selected")?s.trigger("close",{}):s.trigger("select",{data:e}))}),t.on("results:previous",function(){var e,t=s.getHighlightedResults(),n=s.$results.find("[aria-selected]"),i=n.index(t);0!==i&&(i=i-1,0===t.length&&(i=0),(t=n.eq(i)).trigger("mouseenter"),n=s.$results.offset().top,t=t.offset().top,e=s.$results.scrollTop()+(t-n),0===i?s.$results.scrollTop(0):t-n<0&&s.$results.scrollTop(e))}),t.on("results:next",function(){var e,t,n=s.getHighlightedResults(),i=s.$results.find("[aria-selected]"),n=i.index(n)+1;n>=i.length||((i=i.eq(n)).trigger("mouseenter"),e=s.$results.offset().top+s.$results.outerHeight(!1),i=i.offset().top+i.outerHeight(!1),t=s.$results.scrollTop()+i-e,0===n?s.$results.scrollTop(0):e<i&&s.$results.scrollTop(t))}),t.on("results:focus",function(e){e.element.addClass("select2-results__option--highlighted")}),t.on("results:message",function(e){s.displayMessage(e)}),u.fn.mousewheel&&this.$results.on("mousewheel",function(e){var t=s.$results.scrollTop(),n=s.$results.get(0).scrollHeight-t+e.deltaY,t=0<e.deltaY&&t-e.deltaY<=0,n=e.deltaY<0&&n<=s.$results.height();t?(s.$results.scrollTop(0),e.preventDefault(),e.stopPropagation()):n&&(s.$results.scrollTop(s.$results.get(0).scrollHeight-s.$results.height()),e.preventDefault(),e.stopPropagation())}),this.$results.on("mouseup",".select2-results__option[aria-selected]",function(e){var t=u(this),n=t.data("data");"true"===t.attr("aria-selected")?s.options.get("multiple")?s.trigger("unselect",{originalEvent:e,data:n}):s.trigger("close",{}):s.trigger("select",{originalEvent:e,data:n})}),this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(e){var t=u(this).data("data");s.getHighlightedResults().removeClass("select2-results__option--highlighted"),s.trigger("results:focus",{data:t,element:u(this)})})},i.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},i.prototype.destroy=function(){this.$results.remove()},i.prototype.ensureHighlightVisible=function(){var e,t,n,i,s=this.getHighlightedResults();0!==s.length&&(e=this.$results.find("[aria-selected]").index(s),t=this.$results.offset().top,i=s.offset().top,n=this.$results.scrollTop()+(i-t),i=i-t,n-=2*s.outerHeight(!1),e<=2?this.$results.scrollTop(0):(i>this.$results.outerHeight()||i<0)&&this.$results.scrollTop(n))},i.prototype.template=function(e,t){var n=this.options.get("templateResult"),i=this.options.get("escapeMarkup"),e=n(e,t);null==e?t.style.display="none":"string"==typeof e?t.innerHTML=i(e):u(t).append(e)},i}),e.define("select2/keys",[],function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}}),e.define("select2/selection/base",["jquery","../utils","../keys"],function(n,e,s){function i(e,t){this.$element=e,this.options=t,i.__super__.constructor.call(this)}return e.Extend(i,e.Observable),i.prototype.render=function(){var e=n('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=this.$element.data("old-tabindex")?this._tabindex=this.$element.data("old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),e.attr("title",this.$element.attr("title")),e.attr("tabindex",this._tabindex),this.$selection=e},i.prototype.bind=function(e,t){var n=this,i=(e.id,e.id+"-results");this.container=e,this.$selection.on("focus",function(e){n.trigger("focus",e)}),this.$selection.on("blur",function(e){n._handleBlur(e)}),this.$selection.on("keydown",function(e){n.trigger("keypress",e),e.which===s.SPACE&&e.preventDefault()}),e.on("results:focus",function(e){n.$selection.attr("aria-activedescendant",e.data._resultId)}),e.on("selection:update",function(e){n.update(e.data)}),e.on("open",function(){n.$selection.attr("aria-expanded","true"),n.$selection.attr("aria-owns",i),n._attachCloseHandler(e)}),e.on("close",function(){n.$selection.attr("aria-expanded","false"),n.$selection.removeAttr("aria-activedescendant"),n.$selection.removeAttr("aria-owns"),n.$selection.focus(),n._detachCloseHandler(e)}),e.on("enable",function(){n.$selection.attr("tabindex",n._tabindex)}),e.on("disable",function(){n.$selection.attr("tabindex","-1")})},i.prototype._handleBlur=function(e){var t=this;window.setTimeout(function(){document.activeElement==t.$selection[0]||n.contains(t.$selection[0],document.activeElement)||t.trigger("blur",e)},1)},i.prototype._attachCloseHandler=function(e){n(document.body).on("mousedown.select2."+e.id,function(e){var t=n(e.target).closest(".select2");n(".select2.select2-container--open").each(function(){var e=n(this);this!=t[0]&&e.data("element").select2("close")})})},i.prototype._detachCloseHandler=function(e){n(document.body).off("mousedown.select2."+e.id)},i.prototype.position=function(e,t){t.find(".selection").append(e)},i.prototype.destroy=function(){this._detachCloseHandler(this.container)},i.prototype.update=function(e){throw new Error("The `update` method must be defined in child classes.")},i}),e.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(e,t,n,i){function s(){s.__super__.constructor.apply(this,arguments)}return n.Extend(s,t),s.prototype.render=function(){var e=s.__super__.render.call(this);return e.addClass("select2-selection--single"),e.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),e},s.prototype.bind=function(t,e){var n=this,i=(s.__super__.bind.apply(this,arguments),t.id+"-container");this.$selection.find(".select2-selection__rendered").attr("id",i),this.$selection.attr("aria-labelledby",i),this.$selection.on("mousedown",function(e){1===e.which&&n.trigger("toggle",{originalEvent:e})}),this.$selection.on("focus",function(e){}),this.$selection.on("blur",function(e){}),t.on("focus",function(e){t.isOpen()||n.$selection.focus()}),t.on("selection:update",function(e){n.update(e.data)})},s.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},s.prototype.display=function(e,t){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(e,t))},s.prototype.selectionContainer=function(){return e("<span></span>")},s.prototype.update=function(e){var t,n;0===e.length?this.clear():(e=e[0],t=this.$selection.find(".select2-selection__rendered"),n=this.display(e,t),t.empty().append(n),t.prop("title",e.title||e.text))},s}),e.define("select2/selection/multiple",["jquery","./base","../utils"],function(i,e,a){function s(e,t){s.__super__.constructor.apply(this,arguments)}return a.Extend(s,e),s.prototype.render=function(){var e=s.__super__.render.call(this);return e.addClass("select2-selection--multiple"),e.html('<ul class="select2-selection__rendered"></ul>'),e},s.prototype.bind=function(e,t){var n=this;s.__super__.bind.apply(this,arguments),this.$selection.on("click",function(e){n.trigger("toggle",{originalEvent:e})}),this.$selection.on("click",".select2-selection__choice__remove",function(e){var t;n.options.get("disabled")||(t=i(this).parent().data("data"),n.trigger("unselect",{originalEvent:e,data:t}))})},s.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},s.prototype.display=function(e,t){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(e,t))},s.prototype.selectionContainer=function(){return i('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>')},s.prototype.update=function(e){if(this.clear(),0!==e.length){for(var t=[],n=0;n<e.length;n++){var i=e[n],s=this.selectionContainer(),o=this.display(i,s);s.append(o),s.prop("title",i.title||i.text),s.data("data",i),t.push(s)}var r=this.$selection.find(".select2-selection__rendered");a.appendMany(r,t)}},s}),e.define("select2/selection/placeholder",["../utils"],function(e){function t(e,t,n){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n)}return t.prototype.normalizePlaceholder=function(e,t){return t="string"==typeof t?{id:"",text:t}:t},t.prototype.createPlaceholder=function(e,t){var n=this.selectionContainer();return n.html(this.display(t)),n.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),n},t.prototype.update=function(e,t){var n=1==t.length&&t[0].id!=this.placeholder.id;if(1<t.length||n)return e.call(this,t);this.clear();n=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(n)},t}),e.define("select2/selection/allowClear",["jquery","../keys"],function(n,i){function e(){}return e.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",function(e){i._handleClear(e)}),t.on("keypress",function(e){i._handleKeyboardClear(e,t)})},e.prototype._handleClear=function(e,t){if(!this.options.get("disabled")){var n=this.$selection.find(".select2-selection__clear");if(0!==n.length){t.stopPropagation();for(var i=n.data("data"),s=0;s<i.length;s++){var o={data:i[s]};if(this.trigger("unselect",o),o.prevented)return}this.$element.val(this.placeholder.id).trigger("change"),this.trigger("toggle",{})}}},e.prototype._handleKeyboardClear=function(e,t,n){n.isOpen()||t.which!=i.DELETE&&t.which!=i.BACKSPACE||this._handleClear(t)},e.prototype.update=function(e,t){e.call(this,t),0<this.$selection.find(".select2-selection__placeholder").length||0===t.length||((e=n('<span class="select2-selection__clear">&times;</span>')).data("data",t),this.$selection.find(".select2-selection__rendered").prepend(e))},e}),e.define("select2/selection/search",["jquery","../utils","../keys"],function(n,e,o){function t(e,t,n){e.call(this,t,n)}return t.prototype.render=function(e){var t=n('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" aria-autocomplete="list" /></li>'),t=(this.$searchContainer=t,this.$search=t.find("input"),e.call(this));return this._transferTabIndex(),t},t.prototype.bind=function(e,t,n){var i=this,n=(e.call(this,t,n),t.on("open",function(){i.$search.trigger("focus")}),t.on("close",function(){i.$search.val(""),i.$search.removeAttr("aria-activedescendant"),i.$search.trigger("focus")}),t.on("enable",function(){i.$search.prop("disabled",!1),i._transferTabIndex()}),t.on("disable",function(){i.$search.prop("disabled",!0)}),t.on("focus",function(e){i.$search.trigger("focus")}),t.on("results:focus",function(e){i.$search.attr("aria-activedescendant",e.id)}),this.$selection.on("focusin",".select2-search--inline",function(e){i.trigger("focus",e)}),this.$selection.on("focusout",".select2-search--inline",function(e){i._handleBlur(e)}),this.$selection.on("keydown",".select2-search--inline",function(e){var t;e.stopPropagation(),i.trigger("keypress",e),i._keyUpPrevented=e.isDefaultPrevented(),e.which===o.BACKSPACE&&""===i.$search.val()&&0<(t=i.$searchContainer.prev(".select2-selection__choice")).length&&(t=t.data("data"),i.searchRemoveChoice(t),e.preventDefault())}),document.documentMode),s=n&&n<=11;this.$selection.on("input.searchcheck",".select2-search--inline",function(e){s?i.$selection.off("input.search input.searchcheck"):i.$selection.off("keyup.search")}),this.$selection.on("keyup.search input.search",".select2-search--inline",function(e){var t;s&&"input"===e.type?i.$selection.off("input.search input.searchcheck"):(t=e.which)!=o.SHIFT&&t!=o.CTRL&&t!=o.ALT&&t!=o.TAB&&i.handleSearch(e)})},t.prototype._transferTabIndex=function(e){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},t.prototype.createPlaceholder=function(e,t){this.$search.attr("placeholder",t.text)},t.prototype.update=function(e,t){var n=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),e.call(this,t),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch(),n&&this.$search.focus()},t.prototype.handleSearch=function(){var e;this.resizeSearch(),this._keyUpPrevented||(e=this.$search.val(),this.trigger("query",{term:e})),this._keyUpPrevented=!1},t.prototype.searchRemoveChoice=function(e,t){this.trigger("unselect",{data:t}),this.$search.val(t.text),this.handleSearch()},t.prototype.resizeSearch=function(){this.$search.css("width","25px");var e="";e=""!==this.$search.attr("placeholder")?this.$selection.find(".select2-selection__rendered").innerWidth():.75*(this.$search.val().length+1)+"em",this.$search.css("width",e)},t}),e.define("select2/selection/eventRelay",["jquery"],function(r){function e(){}return e.prototype.bind=function(e,t,n){var i=this,s=["open","opening","close","closing","select","selecting","unselect","unselecting"],o=["opening","closing","selecting","unselecting"];e.call(this,t,n),t.on("*",function(e,t){var n;-1!==r.inArray(e,s)&&(n=r.Event("select2:"+e,{params:t=t||{}}),i.$element.trigger(n),-1!==r.inArray(e,o))&&(t.prevented=n.isDefaultPrevented())})},e}),e.define("select2/translation",["jquery","require"],function(t,n){function i(e){this.dict=e||{}}return i.prototype.all=function(){return this.dict},i.prototype.get=function(e){return this.dict[e]},i.prototype.extend=function(e){this.dict=t.extend({},e.all(),this.dict)},i._cache={},i.loadPath=function(e){var t;return e in i._cache||(t=n(e),i._cache[e]=t),new i(i._cache[e])},i}),e.define("select2/diacritics",[],function(){return{"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"}}),e.define("select2/data/base",["../utils"],function(n){function i(e,t){i.__super__.constructor.call(this)}return n.Extend(i,n.Observable),i.prototype.current=function(e){throw new Error("The `current` method must be defined in child classes.")},i.prototype.query=function(e,t){throw new Error("The `query` method must be defined in child classes.")},i.prototype.bind=function(e,t){},i.prototype.destroy=function(){},i.prototype.generateResultId=function(e,t){e=e.id+"-result-";return e+=n.generateChars(4),null!=t.id?e+="-"+t.id.toString():e+="-"+n.generateChars(4),e},i}),e.define("select2/data/select",["./base","../utils","jquery"],function(e,t,r){function n(e,t){this.$element=e,this.options=t,n.__super__.constructor.call(this)}return t.Extend(n,e),n.prototype.current=function(e){var t=[],n=this;this.$element.find(":selected").each(function(){var e=r(this),e=n.item(e);t.push(e)}),e(t)},n.prototype.select=function(s){var e,o=this;s.selected=!0,r(s.element).is("option")?(s.element.selected=!0,this.$element.trigger("change")):this.$element.prop("multiple")?this.current(function(e){var t=[];(s=[s]).push.apply(s,e);for(var n=0;n<s.length;n++){var i=s[n].id;-1===r.inArray(i,t)&&t.push(i)}o.$element.val(t),o.$element.trigger("change")}):(e=s.id,this.$element.val(e),this.$element.trigger("change"))},n.prototype.unselect=function(s){var o=this;this.$element.prop("multiple")&&(s.selected=!1,r(s.element).is("option")?(s.element.selected=!1,this.$element.trigger("change")):this.current(function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n].id;i!==s.id&&-1===r.inArray(i,t)&&t.push(i)}o.$element.val(t),o.$element.trigger("change")}))},n.prototype.bind=function(e,t){var n=this;(this.container=e).on("select",function(e){n.select(e.data)}),e.on("unselect",function(e){n.unselect(e.data)})},n.prototype.destroy=function(){this.$element.find("*").each(function(){r.removeData(this,"data")})},n.prototype.query=function(t,e){var n=[],i=this;this.$element.children().each(function(){var e=r(this);(e.is("option")||e.is("optgroup"))&&(e=i.item(e),null!==(e=i.matches(t,e)))&&n.push(e)}),e({results:n})},n.prototype.addOptions=function(e){t.appendMany(this.$element,e)},n.prototype.option=function(e){e.children?(t=document.createElement("optgroup")).label=e.text:(t=document.createElement("option")).textContent!==undefined?t.textContent=e.text:t.innerText=e.text,e.id&&(t.value=e.id),e.disabled&&(t.disabled=!0),e.selected&&(t.selected=!0),e.title&&(t.title=e.title);var t,n=r(t),e=this._normalizeItem(e);return e.element=t,r.data(t,"data",e),n},n.prototype.item=function(e){var t={};if(null==(t=r.data(e[0],"data"))){if(e.is("option"))t={id:e.val(),text:e.text(),disabled:e.prop("disabled"),selected:e.prop("selected"),title:e.prop("title")};else if(e.is("optgroup")){for(var t={text:e.prop("label"),children:[],title:e.prop("title")},n=e.children("option"),i=[],s=0;s<n.length;s++){var o=r(n[s]),o=this.item(o);i.push(o)}t.children=i}(t=this._normalizeItem(t)).element=e[0],r.data(e[0],"data",t)}return t},n.prototype._normalizeItem=function(e){r.isPlainObject(e)||(e={id:e,text:e});return null!=(e=r.extend({},{text:""},e)).id&&(e.id=e.id.toString()),null!=e.text&&(e.text=e.text.toString()),null==e._resultId&&e.id&&null!=this.container&&(e._resultId=this.generateResultId(this.container,e)),r.extend({},{selected:!1,disabled:!1},e)},n.prototype.matches=function(e,t){return this.options.get("matcher")(e,t)},n}),e.define("select2/data/array",["./select","../utils","jquery"],function(e,c,u){function i(e,t){var n=t.get("data")||[];i.__super__.constructor.call(this,e,t),this.addOptions(this.convertToOptions(n))}return c.Extend(i,e),i.prototype.select=function(n){var e;0===this.$element.find("option").filter(function(e,t){return t.value==n.id.toString()}).length&&(e=this.option(n),this.addOptions(e)),i.__super__.select.call(this,n)},i.prototype.convertToOptions=function(e){var t=this,n=this.$element.find("option"),i=n.map(function(){return t.item(u(this)).id}).get(),s=[];for(var o=0;o<e.length;o++){var r,a,l=this._normalizeItem(e[o]);0<=u.inArray(l.id,i)?(a=n.filter(function(e){return function(){return u(this).val()==e.id}}(l)),r=this.item(a),r=u.extend(!0,{},l,r),r=this.option(r),a.replaceWith(r)):(r=this.option(l),l.children&&(a=this.convertToOptions(l.children),c.appendMany(r,a)),s.push(r))}return s},i}),e.define("select2/data/ajax",["./array","../utils","jquery"],function(e,t,o){function n(e,t){this.ajaxOptions=this._applyDefaults(t.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),n.__super__.constructor.call(this,e,t)}return t.Extend(n,e),n.prototype._applyDefaults=function(e){return o.extend({},{data:function(e){return o.extend({},e,{q:e.term})},transport:function(e,t,n){e=o.ajax(e);return e.then(t),e.fail(n),e}},e,!0)},n.prototype.processResults=function(e){return e},n.prototype.query=function(t,n){var i=this,s=(null!=this._request&&(o.isFunction(this._request.abort)&&this._request.abort(),this._request=null),o.extend({type:"GET"},this.ajaxOptions));function e(){var e=s.transport(s,function(e){e=i.processResults(e,t);i.options.get("debug")&&window.console&&console.error&&(e&&e.results&&o.isArray(e.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),n(e)},function(){e.status&&"0"===e.status||i.trigger("results:message",{message:"errorLoading"})});i._request=e}"function"==typeof s.url&&(s.url=s.url.call(this.$element,t)),"function"==typeof s.data&&(s.data=s.data.call(this.$element,t)),this.ajaxOptions.delay&&null!=t.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(e,this.ajaxOptions.delay)):e()},n}),e.define("select2/data/tags",["jquery"],function(a){function e(e,t,n){var i=n.get("tags"),s=n.get("createTag"),s=(s!==undefined&&(this.createTag=s),n.get("insertTag"));if(s!==undefined&&(this.insertTag=s),e.call(this,t,n),a.isArray(i))for(var o=0;o<i.length;o++){var r=i[o],r=this._normalizeItem(r),r=this.option(r);this.$element.append(r)}}return e.prototype.query=function(e,l,c){var u=this;this._removeOldTags(),null==l.term||null!=l.page?e.call(this,l,c):e.call(this,l,function d(e,t){for(var n=e.results,i=0;i<n.length;i++){var s=n[i],o=null!=s.children&&!d({results:s.children},!0);if(s.text===l.term||o)return!t&&(e.data=n,void c(e))}if(t)return!0;var r,a=u.createTag(l);null!=a&&((r=u.option(a)).attr("data-select2-tag",!0),u.addOptions([r]),u.insertTag(n,a)),e.results=n,c(e)})},e.prototype.createTag=function(e,t){t=a.trim(t.term);return""===t?null:{id:t,text:t}},e.prototype.insertTag=function(e,t,n){t.unshift(n)},e.prototype._removeOldTags=function(e){this._lastTag;this.$element.find("option[data-select2-tag]").each(function(){this.selected||a(this).remove()})},e}),e.define("select2/data/tokenizer",["jquery"],function(c){function e(e,t,n){var i=n.get("tokenizer");i!==undefined&&(this.tokenizer=i),e.call(this,t,n)}return e.prototype.bind=function(e,t,n){e.call(this,t,n),this.$search=t.dropdown.$search||t.selection.$search||n.find(".select2-search__field")},e.prototype.query=function(e,t,n){var i=this;t.term=t.term||"";var s=this.tokenizer(t,this.options,function(e){var t=i._normalizeItem(e);i.$element.find("option").filter(function(){return c(this).val()===t.id}).length||((e=i.option(t)).attr("data-select2-tag",!0),i._removeOldTags(),i.addOptions([e])),i.trigger("select",{data:t})});s.term!==t.term&&(this.$search.length&&(this.$search.val(s.term),this.$search.focus()),t.term=s.term),e.call(this,t,n)},e.prototype.tokenizer=function(e,t,n,i){for(var s=n.get("tokenSeparators")||[],o=t.term,r=0,a=this.createTag||function(e){return{id:e.term,text:e.term}};r<o.length;){var l=o[r];-1===c.inArray(l,s)?r++:(l=o.substr(0,r),null==(l=a(c.extend({},t,{term:l})))?r++:(i(l),o=o.substr(r+1)||"",r=0))}return{term:o}},e}),e.define("select2/data/minimumInputLength",[],function(){function e(e,t,n){this.minimumInputLength=n.get("minimumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){t.term=t.term||"",t.term.length<this.minimumInputLength?this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:t.term,params:t}}):e.call(this,t,n)},e}),e.define("select2/data/maximumInputLength",[],function(){function e(e,t,n){this.maximumInputLength=n.get("maximumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){t.term=t.term||"",0<this.maximumInputLength&&t.term.length>this.maximumInputLength?this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:t.term,params:t}}):e.call(this,t,n)},e}),e.define("select2/data/maximumSelectionLength",[],function(){function e(e,t,n){this.maximumSelectionLength=n.get("maximumSelectionLength"),e.call(this,t,n)}return e.prototype.query=function(t,n,i){var s=this;this.current(function(e){e=null!=e?e.length:0;0<s.maximumSelectionLength&&e>=s.maximumSelectionLength?s.trigger("results:message",{message:"maximumSelected",args:{maximum:s.maximumSelectionLength}}):t.call(s,n,i)})},e}),e.define("select2/dropdown",["jquery","./utils"],function(t,e){function n(e,t){this.$element=e,this.options=t,n.__super__.constructor.call(this)}return e.Extend(n,e.Observable),n.prototype.render=function(){var e=t('<span class="select2-dropdown"><span class="select2-results"></span></span>');return e.attr("dir",this.options.get("dir")),this.$dropdown=e},n.prototype.bind=function(){},n.prototype.position=function(e,t){},n.prototype.destroy=function(){this.$dropdown.remove()},n}),e.define("select2/dropdown/search",["jquery","../utils"],function(s,e){function t(){}return t.prototype.render=function(e){var e=e.call(this),t=s('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></span>');return this.$searchContainer=t,this.$search=t.find("input"),e.prepend(t),e},t.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),this.$search.on("keydown",function(e){i.trigger("keypress",e),i._keyUpPrevented=e.isDefaultPrevented()}),this.$search.on("input",function(e){s(this).off("keyup")}),this.$search.on("keyup input",function(e){i.handleSearch(e)}),t.on("open",function(){i.$search.attr("tabindex",0),i.$search.focus(),window.setTimeout(function(){i.$search.focus()},0)}),t.on("close",function(){i.$search.attr("tabindex",-1),i.$search.val("")}),t.on("focus",function(){t.isOpen()&&i.$search.focus()}),t.on("results:all",function(e){null!=e.query.term&&""!==e.query.term||(i.showSearch(e)?i.$searchContainer.removeClass("select2-search--hide"):i.$searchContainer.addClass("select2-search--hide"))})},t.prototype.handleSearch=function(e){var t;this._keyUpPrevented||(t=this.$search.val(),this.trigger("query",{term:t})),this._keyUpPrevented=!1},t.prototype.showSearch=function(e,t){return!0},t}),e.define("select2/dropdown/hidePlaceholder",[],function(){function e(e,t,n,i){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n,i)}return e.prototype.append=function(e,t){t.results=this.removePlaceholder(t.results),e.call(this,t)},e.prototype.normalizePlaceholder=function(e,t){return t="string"==typeof t?{id:"",text:t}:t},e.prototype.removePlaceholder=function(e,t){for(var n=t.slice(0),i=t.length-1;0<=i;i--){var s=t[i];this.placeholder.id===s.id&&n.splice(i,1)}return n},e}),e.define("select2/dropdown/infiniteScroll",["jquery"],function(s){function e(e,t,n,i){this.lastParams={},e.call(this,t,n,i),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return e.prototype.append=function(e,t){this.$loadingMore.remove(),this.loading=!1,e.call(this,t),this.showLoadingMore(t)&&this.$results.append(this.$loadingMore)},e.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("query",function(e){i.lastParams=e,i.loading=!0}),t.on("query:append",function(e){i.lastParams=e,i.loading=!0}),this.$results.on("scroll",function(){var e=s.contains(document.documentElement,i.$loadingMore[0]);!i.loading&&e&&(e=i.$results.offset().top+i.$results.outerHeight(!1),i.$loadingMore.offset().top+i.$loadingMore.outerHeight(!1)<=e+50)&&i.loadMore()})},e.prototype.loadMore=function(){this.loading=!0;var e=s.extend({},{page:1},this.lastParams);e.page++,this.trigger("query:append",e)},e.prototype.showLoadingMore=function(e,t){return t.pagination&&t.pagination.more},e.prototype.createLoadingMore=function(){var e=s('<li class="select2-results__option select2-results__option--load-more"role="treeitem" aria-disabled="true"></li>'),t=this.options.get("translations").get("loadingMore");return e.html(t(this.lastParams)),e},e}),e.define("select2/dropdown/attachBody",["jquery","../utils"],function(c,r){function e(e,t,n){this.$dropdownParent=n.get("dropdownParent")||c(document.body),e.call(this,t,n)}return e.prototype.bind=function(e,t,n){var i=this,s=!1;e.call(this,t,n),t.on("open",function(){i._showDropdown(),i._attachPositioningHandler(t),s||(s=!0,t.on("results:all",function(){i._positionDropdown(),i._resizeDropdown()}),t.on("results:append",function(){i._positionDropdown(),i._resizeDropdown()}))}),t.on("close",function(){i._hideDropdown(),i._detachPositioningHandler(t)}),this.$dropdownContainer.on("mousedown",function(e){e.stopPropagation()})},e.prototype.destroy=function(e){e.call(this),this.$dropdownContainer.remove()},e.prototype.position=function(e,t,n){t.attr("class",n.attr("class")),t.removeClass("select2"),t.addClass("select2-container--open"),t.css({position:"absolute",top:-999999}),this.$container=n},e.prototype.render=function(e){var t=c("<span></span>"),e=e.call(this);return t.append(e),this.$dropdownContainer=t},e.prototype._hideDropdown=function(e){this.$dropdownContainer.detach()},e.prototype._attachPositioningHandler=function(e,t){var n=this,i="scroll.select2."+t.id,s="resize.select2."+t.id,t="orientationchange.select2."+t.id,o=this.$container.parents().filter(r.hasScroll);o.each(function(){c(this).data("select2-scroll-position",{x:c(this).scrollLeft(),y:c(this).scrollTop()})}),o.on(i,function(e){var t=c(this).data("select2-scroll-position");c(this).scrollTop(t.y)}),c(window).on(i+" "+s+" "+t,function(e){n._positionDropdown(),n._resizeDropdown()})},e.prototype._detachPositioningHandler=function(e,t){var n="scroll.select2."+t.id,i="resize.select2."+t.id,t="orientationchange.select2."+t.id;this.$container.parents().filter(r.hasScroll).off(n),c(window).off(n+" "+i+" "+t)},e.prototype._positionDropdown=function(){var e=c(window),t=this.$dropdown.hasClass("select2-dropdown--above"),n=this.$dropdown.hasClass("select2-dropdown--below"),i=null,s=this.$container.offset(),o=(s.bottom=s.top+this.$container.outerHeight(!1),{height:this.$container.outerHeight(!1)});o.top=s.top,o.bottom=s.top+o.height;var r=this.$dropdown.outerHeight(!1),a=e.scrollTop(),e=e.scrollTop()+e.height(),a=a<s.top-r,e=e>s.bottom+r,s={left:s.left,top:o.bottom},l=this.$dropdownParent,l=(l="static"===l.css("position")?l.offsetParent():l).offset();s.top-=l.top,s.left-=l.left,t||n||(i="below"),e||!a||t?!a&&e&&t&&(i="below"):i="above",("above"==i||t&&"below"!==i)&&(s.top=o.top-l.top-r),null!=i&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+i),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+i)),this.$dropdownContainer.css(s)},e.prototype._resizeDropdown=function(){var e={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(e.minWidth=e.width,e.position="relative",e.width="auto"),this.$dropdown.css(e)},e.prototype._showDropdown=function(e){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},e}),e.define("select2/dropdown/minimumResultsForSearch",[],function(){function e(e,t,n,i){this.minimumResultsForSearch=n.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=Infinity),e.call(this,t,n,i)}return e.prototype.showSearch=function(e,t){return!(function s(e){for(var t=0,n=0;n<e.length;n++){var i=e[n];i.children?t+=s(i.children):t++}return t}(t.data.results)<this.minimumResultsForSearch)&&e.call(this,t)},e}),e.define("select2/dropdown/selectOnClose",[],function(){function e(){}return e.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("close",function(e){i._handleSelectOnClose(e)})},e.prototype._handleSelectOnClose=function(e,t){if(t&&null!=t.originalSelect2Event){t=t.originalSelect2Event;if("select"===t._type||"unselect"===t._type)return}var t=this.getHighlightedResults();t.length<1||null!=(t=t.data("data")).element&&t.element.selected||null==t.element&&t.selected||this.trigger("select",{data:t})},e}),e.define("select2/dropdown/closeOnSelect",[],function(){function e(){}return e.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("select",function(e){i._selectTriggered(e)}),t.on("unselect",function(e){i._selectTriggered(e)})},e.prototype._selectTriggered=function(e,t){var n=t.originalEvent;n&&n.ctrlKey||this.trigger("close",{originalEvent:n,originalSelect2Event:t})},e}),e.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(e){var e=e.input.length-e.maximum,t="Please delete "+e+" character";return 1!=e&&(t+="s"),t},inputTooShort:function(e){return"Please enter "+(e.minimum-e.input.length)+" or more characters"},loadingMore:function(){return"Loading more results…"},maximumSelected:function(e){var t="You can only select "+e.maximum+" item";return 1!=e.maximum&&(t+="s"),t},noResults:function(){return"No results found"},searching:function(){return"Searching…"}}}),e.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(u,d,p,h,f,g,m,y,v,_,$,t,w,b,A,x,E,C,O,S,T,D,q,L,j,P,k,I,e){function n(){this.reset()}return n.prototype.apply=function(e){if(null==(e=u.extend(!0,{},this.defaults,e)).dataAdapter&&(null!=e.ajax?e.dataAdapter=A:null!=e.data?e.dataAdapter=b:e.dataAdapter=w,0<e.minimumInputLength&&(e.dataAdapter=_.Decorate(e.dataAdapter,C)),0<e.maximumInputLength&&(e.dataAdapter=_.Decorate(e.dataAdapter,O)),0<e.maximumSelectionLength&&(e.dataAdapter=_.Decorate(e.dataAdapter,S)),e.tags&&(e.dataAdapter=_.Decorate(e.dataAdapter,x)),null==e.tokenSeparators&&null==e.tokenizer||(e.dataAdapter=_.Decorate(e.dataAdapter,E)),null!=e.query&&(r=d(e.amdBase+"compat/query"),e.dataAdapter=_.Decorate(e.dataAdapter,r)),null!=e.initSelection)&&(r=d(e.amdBase+"compat/initSelection"),e.dataAdapter=_.Decorate(e.dataAdapter,r)),null==e.resultsAdapter&&(e.resultsAdapter=p,null!=e.ajax&&(e.resultsAdapter=_.Decorate(e.resultsAdapter,L)),null!=e.placeholder&&(e.resultsAdapter=_.Decorate(e.resultsAdapter,q)),e.selectOnClose)&&(e.resultsAdapter=_.Decorate(e.resultsAdapter,k)),null==e.dropdownAdapter&&(e.multiple?e.dropdownAdapter=T:(r=_.Decorate(T,D),e.dropdownAdapter=r),0!==e.minimumResultsForSearch&&(e.dropdownAdapter=_.Decorate(e.dropdownAdapter,P)),e.closeOnSelect&&(e.dropdownAdapter=_.Decorate(e.dropdownAdapter,I)),null==e.dropdownCssClass&&null==e.dropdownCss&&null==e.adaptDropdownCssClass||(r=d(e.amdBase+"compat/dropdownCss"),e.dropdownAdapter=_.Decorate(e.dropdownAdapter,r)),e.dropdownAdapter=_.Decorate(e.dropdownAdapter,j)),null==e.selectionAdapter&&(e.multiple?e.selectionAdapter=f:e.selectionAdapter=h,null!=e.placeholder&&(e.selectionAdapter=_.Decorate(e.selectionAdapter,g)),e.allowClear&&(e.selectionAdapter=_.Decorate(e.selectionAdapter,m)),e.multiple&&(e.selectionAdapter=_.Decorate(e.selectionAdapter,y)),null==e.containerCssClass&&null==e.containerCss&&null==e.adaptContainerCssClass||(r=d(e.amdBase+"compat/containerCss"),e.selectionAdapter=_.Decorate(e.selectionAdapter,r)),e.selectionAdapter=_.Decorate(e.selectionAdapter,v)),"string"==typeof e.language&&(0<e.language.indexOf("-")?(r=e.language.split("-")[0],e.language=[e.language,r]):e.language=[e.language]),u.isArray(e.language)){for(var t=new $,n=(e.language.push("en"),e.language),i=0;i<n.length;i++){var s=n[i],o={};try{o=$.loadPath(s)}catch(l){try{s=this.defaults.amdLanguageBase+s,o=$.loadPath(s)}catch(c){e.debug&&window.console&&console.warn&&console.warn('Select2: The language file for "'+s+'" could not be automatically loaded. A fallback will be used instead.');continue}}t.extend(o)}e.translations=t}else{var r=$.loadPath(this.defaults.amdLanguageBase+"en"),a=new $(e.language);a.extend(r),e.translations=a}return e},n.prototype.reset=function(){function r(e){return e.replace(/[^\u0000-\u007E]/g,function(e){return t[e]||e})}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:_.escapeMarkup,language:e,matcher:function a(e,t){if(""===u.trim(e.term))return t;if(t.children&&0<t.children.length){for(var n=u.extend(!0,{},t),i=t.children.length-1;0<=i;i--)null==a(e,t.children[i])&&n.children.splice(i,1);return 0<n.children.length?n:a(e,n)}var s=r(t.text).toUpperCase(),o=r(e.term).toUpperCase();return-1<s.indexOf(o)?t:null},minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(e){return e},templateResult:function(e){return e.text},templateSelection:function(e){return e.text},theme:"default",width:"resolve"}},n.prototype.set=function(e,t){var n={},e=(n[u.camelCase(e)]=t,_._convertData(n));u.extend(this.defaults,e)},new n}),e.define("select2/options",["require","jquery","./defaults","./utils"],function(n,o,i,r){function e(e,t){this.options=e,null!=t&&this.fromElement(t),this.options=i.apply(this.options),t&&t.is("input")&&(e=n(this.get("amdBase")+"compat/inputData"),this.options.dataAdapter=r.Decorate(this.options.dataAdapter,e))}return e.prototype.fromElement=function(e){var t,n=["select2"],i=(null==this.options.multiple&&(this.options.multiple=e.prop("multiple")),null==this.options.disabled&&(this.options.disabled=e.prop("disabled")),null==this.options.language&&(e.prop("lang")?this.options.language=e.prop("lang").toLowerCase():e.closest("[lang]").prop("lang")&&(this.options.language=e.closest("[lang]").prop("lang"))),null==this.options.dir&&(e.prop("dir")?this.options.dir=e.prop("dir"):e.closest("[dir]").prop("dir")?this.options.dir=e.closest("[dir]").prop("dir"):this.options.dir="ltr"),e.prop("disabled",this.options.disabled),e.prop("multiple",this.options.multiple),e.data("select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),e.data("data",e.data("select2Tags")),e.data("tags",!0)),e.data("ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),e.attr("ajax--url",e.data("ajaxUrl")),e.data("ajax--url",e.data("ajaxUrl"))),{}),i=o.fn.jquery&&"1."==o.fn.jquery.substr(0,2)&&e[0].dataset?o.extend(!0,{},e[0].dataset,e.data()):e.data(),s=o.extend(!0,{},i);for(t in s=r._convertData(s))-1<o.inArray(t,n)||(o.isPlainObject(this.options[t])?o.extend(this.options[t],s[t]):this.options[t]=s[t]);return this},e.prototype.get=function(e){return this.options[e]},e.prototype.set=function(e,t){this.options[e]=t},e}),e.define("select2/core",["jquery","./options","./utils","./keys"],function(s,o,n,i){var r=function(e,t){null!=e.data("select2")&&e.data("select2").destroy(),this.$element=e,this.id=this._generateId(e),this.options=new o(t=t||{},e),r.__super__.constructor.call(this);var t=e.attr("tabindex")||0,t=(e.data("old-tabindex",t),e.attr("tabindex","-1"),this.options.get("dataAdapter")),t=(this.dataAdapter=new t(e,this.options),this.render()),n=(this._placeContainer(t),this.options.get("selectionAdapter")),n=(this.selection=new n(e,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,t),this.options.get("dropdownAdapter")),n=(this.dropdown=new n(e,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,t),this.options.get("resultsAdapter")),i=(this.results=new n(e,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown),this);this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(e){i.trigger("selection:update",{data:e})}),e.addClass("select2-hidden-accessible"),e.attr("aria-hidden","true"),this._syncAttributes(),e.data("select2",this)};return n.Extend(r,n.Observable),r.prototype._generateId=function(e){return"select2-"+(null!=e.attr("id")?e.attr("id"):null!=e.attr("name")?e.attr("name")+"-"+n.generateChars(2):n.generateChars(4)).replace(/(:|\.|\[|\]|,)/g,"")},r.prototype._placeContainer=function(e){e.insertAfter(this.$element);var t=this._resolveWidth(this.$element,this.options.get("width"));null!=t&&e.css("width",t)},r.prototype._resolveWidth=function(e,t){var n=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==t)return null!=(i=this._resolveWidth(e,"style"))?i:this._resolveWidth(e,"element");if("element"==t)return(i=e.outerWidth(!1))<=0?"auto":i+"px";if("style"!=t)return t;var i=e.attr("style");if("string"==typeof i)for(var s=i.split(";"),o=0,r=s.length;o<r;o+=1){var a=s[o].replace(/\s/g,"").match(n);if(null!==a&&1<=a.length)return a[1]}return null},r.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},r.prototype._registerDomEvents=function(){var t=this,e=(this.$element.on("change.select2",function(){t.dataAdapter.current(function(e){t.trigger("selection:update",{data:e})})}),this.$element.on("focus.select2",function(e){t.trigger("focus",e)}),this._syncA=n.bind(this._syncAttributes,this),this._syncS=n.bind(this._syncSubtree,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._syncA),window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver);null!=e?(this._observer=new e(function(e){s.each(e,t._syncA),s.each(e,t._syncS)}),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})):this.$element[0].addEventListener&&(this.$element[0].addEventListener("DOMAttrModified",t._syncA,!1),this.$element[0].addEventListener("DOMNodeInserted",t._syncS,!1),this.$element[0].addEventListener("DOMNodeRemoved",t._syncS,!1))},r.prototype._registerDataEvents=function(){var n=this;this.dataAdapter.on("*",function(e,t){n.trigger(e,t)})},r.prototype._registerSelectionEvents=function(){var n=this,i=["toggle","focus"];this.selection.on("toggle",function(){n.toggleDropdown()}),this.selection.on("focus",function(e){n.focus(e)}),this.selection.on("*",function(e,t){-1===s.inArray(e,i)&&n.trigger(e,t)})},r.prototype._registerDropdownEvents=function(){var n=this;this.dropdown.on("*",function(e,t){n.trigger(e,t)})},r.prototype._registerResultsEvents=function(){var n=this;this.results.on("*",function(e,t){n.trigger(e,t)})},r.prototype._registerEvents=function(){var n=this;this.on("open",function(){n.$container.addClass("select2-container--open")}),this.on("close",function(){n.$container.removeClass("select2-container--open")}),this.on("enable",function(){n.$container.removeClass("select2-container--disabled")}),this.on("disable",function(){n.$container.addClass("select2-container--disabled")}),this.on("blur",function(){n.$container.removeClass("select2-container--focus")}),this.on("query",function(t){n.isOpen()||n.trigger("open",{}),this.dataAdapter.query(t,function(e){n.trigger("results:all",{data:e,query:t})})}),this.on("query:append",function(t){this.dataAdapter.query(t,function(e){n.trigger("results:append",{data:e,query:t})})}),this.on("keypress",function(e){var t=e.which;n.isOpen()?t===i.ESC||t===i.TAB||t===i.UP&&e.altKey?(n.close(),e.preventDefault()):t===i.ENTER?(n.trigger("results:select",{}),e.preventDefault()):t===i.SPACE&&e.ctrlKey?(n.trigger("results:toggle",{}),e.preventDefault()):t===i.UP?(n.trigger("results:previous",{}),e.preventDefault()):t===i.DOWN&&(n.trigger("results:next",{}),e.preventDefault()):(t===i.ENTER||t===i.SPACE||t===i.DOWN&&e.altKey)&&(n.open(),e.preventDefault())})},r.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},r.prototype._syncSubtree=function(e,t){var n=!1,i=this;if(!e||!e.target||"OPTION"===e.target.nodeName||"OPTGROUP"===e.target.nodeName){if(t)if(t.addedNodes&&0<t.addedNodes.length)for(var s=0;s<t.addedNodes.length;s++)t.addedNodes[s].selected&&(n=!0);else t.removedNodes&&0<t.removedNodes.length&&(n=!0);else n=!0;n&&this.dataAdapter.current(function(e){i.trigger("selection:update",{data:e})})}},r.prototype.trigger=function(e,t){var n=r.__super__.trigger,i={open:"opening",close:"closing",select:"selecting",unselect:"unselecting"};if(t===undefined&&(t={}),e in i){var s={prevented:!1,name:e,args:t};if(n.call(this,i[e],s),s.prevented)return void(t.prevented=!0)}n.call(this,e,t)},r.prototype.toggleDropdown=function(){this.options.get("disabled")||(this.isOpen()?this.close():this.open())},r.prototype.open=function(){this.isOpen()||this.trigger("query",{})},r.prototype.close=function(){this.isOpen()&&this.trigger("close",{})},r.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},r.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")},r.prototype.focus=function(e){this.hasFocus()||(this.$container.addClass("select2-container--focus"),this.trigger("focus",{}))},r.prototype.enable=function(e){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.');e=!(e=null!=e&&0!==e.length?e:[!0])[0];this.$element.prop("disabled",e)},r.prototype.data=function(){this.options.get("debug")&&0<arguments.length&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var t=[];return this.dataAdapter.current(function(e){t=e}),t},r.prototype.val=function(e){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==e||0===e.length)return this.$element.val();e=e[0];s.isArray(e)&&(e=s.map(e,function(e){return e.toString()})),this.$element.val(e).trigger("change")},r.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._syncA),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&(this.$element[0].removeEventListener("DOMAttrModified",this._syncA,!1),this.$element[0].removeEventListener("DOMNodeInserted",this._syncS,!1),this.$element[0].removeEventListener("DOMNodeRemoved",this._syncS,!1)),this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",this.$element.data("old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},r.prototype.render=function(){var e=s('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return e.attr("dir",this.options.get("dir")),this.$container=e,this.$container.addClass("select2-container--"+this.options.get("theme")),e.data("element",this.$element),e},r}),e.define("jquery-mousewheel",["jquery"],function(e){return e}),e.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults"],function(s,e,o,t){var r;return null==s.fn.select2&&(r=["open","close","destroy"],s.fn.select2=function(t){if("object"==typeof(t=t||{}))return this.each(function(){var e=s.extend(!0,{},t);new o(s(this),e)}),this;var n,i;if("string"==typeof t)return i=Array.prototype.slice.call(arguments,1),this.each(function(){var e=s(this).data("select2");null==e&&window.console&&console.error&&console.error("The select2('"+t+"') method was called on an element that is not using Select2."),n=e[t].apply(e,i)}),-1<s.inArray(t,r)?this:n;throw new Error("Invalid arguments for Select2: "+t)}),null==s.fn.select2.defaults&&(s.fn.select2.defaults=t),o});var e,n,d,o,r,p,h,f,g,m,y,i,s,v,a={define:e.define,require:e.require};function _(e,t){return i.call(e,t)}function l(e,t){var n,i,s,o,r,a,l,c,u,d,p=t&&t.split("/"),h=m.map,f=h&&h["*"]||{};if(e&&"."===e.charAt(0))if(t){for(t=(e=e.split("/")).length-1,m.nodeIdCompat&&v.test(e[t])&&(e[t]=e[t].replace(v,"")),e=p.slice(0,p.length-1).concat(e),c=0;c<e.length;c+=1)if("."===(d=e[c]))e.splice(c,1),--c;else if(".."===d){if(1===c&&(".."===e[2]||".."===e[0]))break;0<c&&(e.splice(c-1,2),c-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((p||f)&&h){for(c=(n=e.split("/")).length;0<c;--c){if(i=n.slice(0,c).join("/"),p)for(u=p.length;0<u;--u)if(s=(s=h[p.slice(0,u).join("/")])&&s[i]){o=s,r=c;break}if(o)break;!a&&f&&f[i]&&(a=f[i],l=c)}!o&&a&&(o=a,r=l),o&&(n.splice(0,r,o),e=n.join("/"))}return e}function w(t,n){return function(){var e=s.call(arguments,0);return"string"!=typeof e[0]&&1===e.length&&e.push(null),r.apply(d,e.concat([t,n]))}}function b(e){var t;if(_(g,e)&&(t=g[e],delete g[e],y[e]=!0,o.apply(d,t)),_(f,e)||_(y,e))return f[e];throw new Error("No "+e)}function c(e){var t,n=e?e.indexOf("!"):-1;return-1<n&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}var u=a.require("jquery.select2");return t.fn.select2.amd=a,u});
;(function($,window,document,undefined){"use strict";var $steps=[];var pluginName="accWizard",defaults={start:1,mode:"wizard",enableScrolling:true,scrollPadding:5,autoButtons:true,autoButtonsNextClass:null,autoButtonsPrevClass:null,autoButtonsShowSubmit:true,autoButtonsSubmitText:'Submit',autoButtonsEditSubmitText:'Save',stepNumbers:true,stepNumberClass:'',beforeNextStep:function(currentStep){return true;},onSubmit:function(element){return true;}};function Plugin(element,options){this.element=element;this.settings=$.extend({},defaults,options);this._defaults=defaults;this._name=pluginName;this.init();}
$.extend(Plugin.prototype,{init:function(){var mthis=this;this.$steps=$('[data-acc-step]');this.stepHeight=$('[data-acc-step]').eq(0).outerHeight();if(this.settings.stepNumbers){this.$steps.each(function(i,el){$('[data-acc-title]',el).prepend('<span class="acc-step-number '+mthis.settings.stepNumberClass+'">'+(i+1)+'</span> ');})}
if(this.settings.autoButtons){this.$steps.each(function(i,el){var $content=$('[data-acc-content]',el);$content.append('<div class="p3d-button-content"></div>')
if(i>0){$content.find('.p3d-button-content').append('<a href="javascript:void(0)" class="'+mthis.settings.autoButtonsPrevClass+'" data-acc-btn-prev>'+p3d.text_multistep_back+'</a>');}
if(i<(mthis.$steps.length-1)){$content.find('.p3d-button-content').append('<a href="javascript:void(0)" class="'+mthis.settings.autoButtonsNextClass+'" data-acc-btn-next>'+p3d.text_multistep_next+'</a>');}else if(mthis.settings.autoButtonsShowSubmit){var btnText=mthis.settings.mode=='wizard'?mthis.settings.autoButtonsSubmitText:mthis.settings.autoButtonsEditSubmitText;$content.find('.p3d-button-content').append('<input type="submit" class="'+mthis.settings.autoButtonsNextClass+'" value="'+btnText+'">');}})}
this.currentIndex=this.settings.start-1;if(this.settings.mode=='wizard'){this.activateStep(this.currentIndex,true);$('[data-acc-btn-next]').on('click',function(){if(mthis.settings.beforeNextStep(mthis.currentIndex+1)){if(p3d.multistep_model_step1=='on'&&jQuery('#p3d-multistep div[data-acc-step]:first').hasClass('open')){mthis.currentIndex=0;}
mthis.activateStep(mthis.currentIndex+1);}});$('[data-acc-btn-prev]').on('click',function(){mthis.activateStep(mthis.currentIndex-1);});}else if(this.settings.mode=='edit'){this.activateAllSteps();$('[data-acc-btn-next]').hide();$('[data-acc-btn-prev]').hide();}
$(this.element).on('submit',function(e){var resp=mthis.settings.onSubmit();if(!resp)
e.preventDefault();});},deactivateStep:function(index,disableScrollOverride){this.$steps.eq(index).removeClass('active');},activateStep:function(index,disableScrollOverride){this.$steps.removeClass('open');var offset=index>this.currentIndex?this.stepHeight:-this.stepHeight;if(!disableScrollOverride&&this.settings.enableScrolling){$('html').animate({scrollTop:this.$steps.eq(this.currentIndex).offset().top+(offset-this.settings.scrollPadding)},500);}
$('[data-acc-content]',this.element).slideUp(400,function(){p3dReloadSliders();p3dInitSelect2();});this.$steps.eq(index).addClass('open').find('[data-acc-content]').slideDown(400,function(){p3dReloadSliders();p3dInitSelect2();});this.currentIndex=index;},activateNextStep:function(){this.activateStep(this.currentIndex+1);},activateAllSteps:function(){this.$steps.addClass('open');$('[data-acc-content]',this.element).show();}});$.fn[pluginName]=function(options){return this.each(function(){if(!$.data(this,"plugin_"+pluginName)){$.data(this,"plugin_"+
pluginName,new Plugin(this,options));}});};})(jQuery,window,document);
!function(e,a){"object"==typeof exports&&"object"==typeof module?module.exports=a():"function"==typeof define&&define.amd?define([],a):"object"==typeof exports?exports.DxfParser=a():e.DxfParser=a()}("undefined"!=typeof self?self:this,function(){return function(e){var a={};function t(r){if(a[r])return a[r].exports;var n=a[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,t),n.l=!0,n.exports}return t.m=e,t.c=a,t.d=function(e,a,r){t.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,a){if(1&a&&(e=t(e)),8&a)return e;if(4&a&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var n in e)t.d(r,n,function(a){return e[a]}.bind(null,n));return r},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},t.p="",t(t.s=1)}([function(e,a,t){var r,n;!function(o,c){"use strict";void 0===(n="function"==typeof(r=function(){var e=function(){},a="undefined",t=["trace","debug","info","warn","error"];function r(e,a){var t=e[a];if("function"==typeof t.bind)return t.bind(e);try{return Function.prototype.bind.call(t,e)}catch(a){return function(){return Function.prototype.apply.apply(t,[e,arguments])}}}function n(a,r){for(var n=0;n<t.length;n++){var o=t[n];this[o]=n<a?e:this.methodFactory(o,a,r)}this.log=this.debug}function o(t,o,c){return function(t){"debug"===t&&(t="log");return typeof console!==a&&(void 0!==console[t]?r(console,t):void 0!==console.log?r(console,"log"):e)}(t)||function(e,t,r){return function(){typeof console!==a&&(n.call(this,t,r),this[e].apply(this,arguments))}}.apply(this,arguments)}function c(e,r,c){var i,u=this,s="loglevel";function l(){var e;if(typeof window!==a){try{e=window.localStorage[s]}catch(e){}if(typeof e===a)try{var t=window.document.cookie,r=t.indexOf(encodeURIComponent(s)+"=");-1!==r&&(e=/^([^;]+)/.exec(t.slice(r))[1])}catch(e){}return void 0===u.levels[e]&&(e=void 0),e}}e&&(s+=":"+e),u.name=e,u.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},u.methodFactory=c||o,u.getLevel=function(){return i},u.setLevel=function(r,o){if("string"==typeof r&&void 0!==u.levels[r.toUpperCase()]&&(r=u.levels[r.toUpperCase()]),!("number"==typeof r&&r>=0&&r<=u.levels.SILENT))throw"log.setLevel() called with invalid level: "+r;if(i=r,!1!==o&&function(e){var r=(t[e]||"silent").toUpperCase();if(typeof window===a)return;try{return void(window.localStorage[s]=r)}catch(e){}try{window.document.cookie=encodeURIComponent(s)+"="+r+";"}catch(e){}}(r),n.call(u,r,e),typeof console===a&&r<u.levels.SILENT)return"No console available for logging"},u.setDefaultLevel=function(e){l()||u.setLevel(e,!1)},u.enableAll=function(e){u.setLevel(u.levels.TRACE,e)},u.disableAll=function(e){u.setLevel(u.levels.SILENT,e)};var v=l();null==v&&(v=null==r?"WARN":r),u.setLevel(v,!1)}var i=new c,u={};i.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var a=u[e];return a||(a=u[e]=new c(e,i.getLevel(),i.methodFactory)),a};var s=typeof window!==a?window.log:void 0;return i.noConflict=function(){return typeof window!==a&&window.log===i&&(window.log=s),i},i.getLoggers=function(){return u},i})?r.call(a,t,a,e):r)||(e.exports=n)}()},function(e,a,t){"use strict";function r(e){this._pointer=0,this._data=e,this._eof=!1}function n(e,a){return e<=9?a:e>=10&&e<=59?parseFloat(a):e>=60&&e<=99?parseInt(a):e>=100&&e<=109?a:e>=110&&e<=149?parseFloat(a):e>=160&&e<=179?parseInt(a):e>=210&&e<=239?parseFloat(a):e>=270&&e<=289?parseInt(a):e>=290&&e<=299?function(e){if("0"===e)return!1;if("1"===e)return!0;throw TypeError("String '"+e+"' cannot be cast to Boolean type")}(a):e>=300&&e<=369?a:e>=370&&e<=389?parseInt(a):e>=390&&e<=399?a:e>=400&&e<=409?parseInt(a):e>=410&&e<=419?a:e>=420&&e<=429?parseInt(a):e>=430&&e<=439?a:e>=440&&e<=459?parseInt(a):e>=460&&e<=469?parseFloat(a):e>=470&&e<=481?a:999===e?a:e>=1e3&&e<=1009?a:e>=1010&&e<=1059?parseFloat(a):e>=1060&&e<=1071?parseInt(a):(console.log("WARNING: Group code does not have a defined type: %j",{code:e,value:a}),a)}t.r(a),r.prototype.next=function(){var e;if(!this.hasNext())throw this._eof?new Error("Cannot call 'next' after EOF group has been read"):new Error("Unexpected end of input: EOF group not read before end of file. Ended on code "+this._data[this._pointer]);return e={code:parseInt(this._data[this._pointer])},this._pointer++,e.value=n(e.code,this._data[this._pointer].trim()),this._pointer++,0===e.code&&"EOF"===e.value&&(this._eof=!0),this.lastReadGroup=e,e},r.prototype.peek=function(){if(!this.hasNext())throw this._eof?new Error("Cannot call 'next' after EOF group has been read"):new Error("Unexpected end of input: EOF group not read before end of file. Ended on code "+this._data[this._pointer]);var e={code:parseInt(this._data[this._pointer])};return e.value=n(e.code,this._data[this._pointer+1].trim()),e},r.prototype.rewind=function(e){e=e||1,this._pointer=this._pointer-2*e},r.prototype.hasNext=function(){return!this._eof&&!(this._pointer>this._data.length-2)},r.prototype.isEOF=function(){return this._eof};var o=[0,16711680,16776960,65280,65535,255,16711935,16777215,8421504,12632256,16711680,16744319,13369344,13395558,10027008,10046540,8323072,8339263,4980736,4990502,16727808,16752511,13382400,13401958,10036736,10051404,8331008,8343359,4985600,4992806,16744192,16760703,13395456,13408614,10046464,10056268,8339200,8347455,4990464,4995366,16760576,16768895,13408512,13415014,10056192,10061132,8347392,8351551,4995328,4997670,16776960,16777087,13421568,13421670,10000384,10000460,8355584,8355647,5000192,5000230,12582656,14679935,10079232,11717734,7510016,8755276,6258432,7307071,3755008,4344870,8388352,12582783,6736896,10079334,5019648,7510092,4161280,6258495,2509824,3755046,4194048,10485631,3394560,8375398,2529280,6264908,2064128,5209919,1264640,3099686,65280,8388479,52224,6736998,38912,5019724,32512,4161343,19456,2509862,65343,8388511,52275,6737023,38950,5019743,32543,4161359,19475,2509871,65407,8388543,52326,6737049,38988,5019762,32575,4161375,19494,2509881,65471,8388575,52377,6737074,39026,5019781,32607,4161391,19513,2509890,65535,8388607,52428,6737100,39064,5019800,32639,4161407,19532,2509900,49151,8380415,39372,6730444,29336,5014936,24447,4157311,14668,2507340,32767,8372223,26316,6724044,19608,5010072,16255,4153215,9804,2505036,16383,8364031,13260,6717388,9880,5005208,8063,4149119,4940,2502476,255,8355839,204,6710988,152,5000344,127,4145023,76,2500172,4129023,10452991,3342540,8349388,2490520,6245528,2031743,5193599,1245260,3089996,8323327,12550143,6684876,10053324,4980888,7490712,4128895,6242175,2490444,3745356,12517631,14647295,10027212,11691724,7471256,8735896,6226047,7290751,3735628,4335180,16711935,16744447,13369548,13395660,9961624,9981080,8323199,8339327,4980812,4990540,16711871,16744415,13369497,13395634,9961586,9981061,8323167,8339311,4980793,4990530,16711807,16744383,13369446,13395609,9961548,9981042,8323135,8339295,4980774,4990521,16711743,16744351,13369395,13395583,9961510,9981023,8323103,8339279,4980755,4990511,3355443,5987163,8684676,11382189,14079702,16777215];function c(e){var a={};e.rewind();var t=e.next(),r=t.code;if(a.x=t.value,r+=10,(t=e.next()).code!=r)throw new Error("Expected code for point value to be "+r+" but got "+t.code+".");return a.y=t.value,r+=10,(t=e.next()).code!=r?(e.rewind(),a):(a.z=t.value,a)}function i(e,a){switch(a.code){case 0:e.type=a.value;break;case 5:e.handle=a.value;break;case 6:e.lineType=a.value;break;case 8:e.layer=a.value;break;case 48:e.lineTypeScale=a.value;break;case 60:e.visible=0===a.value;break;case 62:e.colorIndex=a.value,e.color=(t=Math.abs(a.value),o[t]);break;case 67:e.inPaperSpace=0!==a.value;break;case 100:break;case 330:e.ownerHandle=a.value;break;case 347:e.materialObjectHandle=a.value;break;case 370:e.lineweight=a.value;break;case 420:e.color=a.value;break;case 1e3:e.extendedData=e.extendedData||{},e.extendedData.customStrings=e.extendedData.customStrings||[],e.extendedData.customStrings.push(a.value);break;case 1001:e.extendedData=e.extendedData||{},e.extendedData.applicationName=a.value;break;default:return!1}var t;return!0}function u(){}function s(e,a){var t,r=[],n=!1,o=!1;for(t=0;t<=4;t++){for(var c={};"EOF"!==a&&0!==a.code&&!o;){switch(a.code){case 10:case 11:case 12:case 13:if(n){o=!0;continue}c.x=a.value,n=!0;break;case 20:case 21:case 22:case 23:c.y=a.value;break;case 30:case 31:case 32:case 33:c.z=a.value;break;default:return r}a=e.next()}r.push(c),n=!1,o=!1}return e.rewind(),r}function l(){}function v(){}function d(){}function b(){}function p(){}function f(){}function k(){}function y(){}function x(e,a){if(!e||e<=0)throw Error("n must be greater than 0 verticies");var t,r=[],n=!1,o=!1,c=a.lastReadGroup;for(t=0;t<e;t++){for(var i={};"EOF"!==c&&0!==c.code&&!o;){switch(c.code){case 10:if(n){o=!0;continue}i.x=c.value,n=!0;break;case 20:i.y=c.value;break;case 30:i.z=c.value;break;case 40:i.startWidth=c.value;break;case 41:i.endWidth=c.value;break;case 42:0!=c.value&&(i.bulge=c.value);break;default:return n&&r.push(i),r}c=a.next()}r.push(i),n=!1,o=!1}return a.rewind(),r}function h(){}function g(){}function E(){}function w(){}function m(e,a){var t={type:a.value};for(a=e.next();"EOF"!=a&&0!=a.code;)i(t,a),a=e.next();return t}function P(){}function F(){}function O(){}u.ForEntityName="3DFACE",u.prototype.parseEntity=function(e,a){var t={type:a.value,vertices:[]};for(a=e.next();"EOF"!==a&&0!==a.code;){switch(a.code){case 70:t.shape=1==(1&a.value),t.hasContinuousLinetypePattern=128==(128&a.value);break;case 10:t.vertices=s(e,a),a=e.lastReadGroup;break;default:i(t,a)}a=e.next()}return t},l.ForEntityName="ARC",l.prototype.parseEntity=function(e,a){var t;for(t={type:a.value},a=e.next();"EOF"!==a&&0!==a.code;){switch(a.code){case 10:t.center=c(e);break;case 40:t.radius=a.value;break;case 50:t.startAngle=Math.PI/180*a.value;break;case 51:t.endAngle=Math.PI/180*a.value,t.angleLength=t.endAngle-t.startAngle;break;default:i(t,a)}a=e.next()}return t},v.ForEntityName="ATTDEF",v.prototype.parseEntity=function(e,a){var t={type:a.value,scale:1,textStyle:"STANDARD"};for(a=e.next();"EOF"!==a&&0!==a.code;){switch(a.code){case 1:t.text=a.value;break;case 2:t.tag=a.value;break;case 3:t.prompt=a.value;break;case 7:t.textStyle=a.value;break;case 10:t.startPoint=c(e);break;case 11:t.endPoint=c(e);break;case 39:t.thickness=a.value;break;case 40:t.textHeight=a.value;break;case 41:t.scale=a.value;break;case 50:t.rotation=a.value;break;case 51:t.obliqueAngle=a.value;break;case 70:t.invisible=!!(1&a.value),t.constant=!!(2&a.value),t.verificationRequired=!!(4&a.value),t.preset=!!(8&a.value);break;case 71:t.backwards=!!(2&a.value),t.mirrored=!!(4&a.value);break;case 72:t.horizontalJustification=a.value;break;case 73:t.fieldLength=a.value;break;case 74:t.verticalJustification=a.value;break;case 100:break;case 210:t.extrusionDirectionX=a.value;break;case 220:t.extrusionDirectionY=a.value;break;case 230:t.extrusionDirectionZ=a.value;break;default:i(t,a)}a=e.next()}return t},d.ForEntityName="CIRCLE",d.prototype.parseEntity=function(e,a){var t,r;for(t={type:a.value},a=e.next();"EOF"!==a&&0!==a.code;){switch(a.code){case 10:t.center=c(e);break;case 40:t.radius=a.value;break;case 50:t.startAngle=Math.PI/180*a.value;break;case 51:(r=Math.PI/180*a.value)<t.startAngle?t.angleLength=r+2*Math.PI-t.startAngle:t.angleLength=r-t.startAngle,t.endAngle=r;break;default:i(t,a)}a=e.next()}return t},b.ForEntityName="DIMENSION",b.prototype.parseEntity=function(e,a){var t;for(t={type:a.value},a=e.next();"EOF"!==a&&0!==a.code;){switch(a.code){case 2:t.block=a.value;break;case 10:t.anchorPoint=c(e);break;case 11:t.middleOfText=c(e);break;case 12:t.insertionPoint=c(e);break;case 13:t.linearOrAngularPoint1=c(e);break;case 14:t.linearOrAngularPoint2=c(e);break;case 15:t.diameterOrRadiusPoint=c(e);break;case 16:t.arcPoint=c(e);break;case 70:t.dimensionType=a.value;break;case 71:t.attachmentPoint=a.value;break;case 42:t.actualMeasurement=a.value;break;case 1:t.text=a.value;break;case 50:t.angle=a.value;break;default:i(t,a)}a=e.next()}return t},p.ForEntityName="ELLIPSE",p.prototype.parseEntity=function(e,a){var t;for(t={type:a.value},a=e.next();"EOF"!==a&&0!==a.code;){switch(a.code){case 10:t.center=c(e);break;case 11:t.majorAxisEndPoint=c(e);break;case 40:t.axisRatio=a.value;break;case 41:t.startAngle=a.value;break;case 42:t.endAngle=a.value;break;case 2:t.name=a.value;break;default:i(t,a)}a=e.next()}return t},f.ForEntityName="INSERT",f.prototype.parseEntity=function(e,a){var t;for(t={type:a.value},a=e.next();"EOF"!==a&&0!==a.code;){switch(a.code){case 2:t.name=a.value;break;case 41:t.xScale=a.value;break;case 42:t.yScale=a.value;break;case 43:t.zScale=a.value;break;case 10:t.position=c(e);break;case 50:t.rotation=a.value;break;case 70:t.columnCount=a.value;break;case 71:t.rowCount=a.value;break;case 44:t.columnSpacing=a.value;break;case 45:t.rowSpacing=a.value;break;case 210:t.extrusionDirection=c(e);break;default:i(t,a)}a=e.next()}return t},k.ForEntityName="LINE",k.prototype.parseEntity=function(e,a){var t={type:a.value,vertices:[]};for(a=e.next();"EOF"!==a&&0!==a.code;){switch(a.code){case 10:t.vertices.unshift(c(e));break;case 11:t.vertices.push(c(e));break;case 210:t.extrusionDirection=c(e);break;case 100:break;default:i(t,a)}a=e.next()}return t},y.ForEntityName="LWPOLYLINE",y.prototype.parseEntity=function(e,a){var t={type:a.value,vertices:[]},r=0;for(a=e.next();"EOF"!==a&&0!==a.code;){switch(a.code){case 38:t.elevation=a.value;break;case 39:t.depth=a.value;break;case 70:t.shape=1==(1&a.value),t.hasContinuousLinetypePattern=128==(128&a.value);break;case 90:r=a.value;break;case 10:t.vertices=x(r,e);break;case 43:0!==a.value&&(t.width=a.value);break;case 210:t.extrusionDirectionX=a.value;break;case 220:t.extrusionDirectionY=a.value;break;case 230:t.extrusionDirectionZ=a.value;break;default:i(t,a)}a=e.next()}return t},h.ForEntityName="MTEXT",h.prototype.parseEntity=function(e,a){var t={type:a.value};for(a=e.next();"EOF"!==a&&0!==a.code;){switch(a.code){case 3:case 1:t.text?t.text+=a.value:t.text=a.value;break;case 10:t.position=c(e);break;case 40:t.height=a.value;break;case 41:t.width=a.value;break;case 50:t.rotation=a.value;break;case 71:t.attachmentPoint=a.value;break;case 72:t.drawingDirection=a.value;break;default:i(t,a)}a=e.next()}return t},g.ForEntityName="POINT",g.prototype.parseEntity=function(e,a){var t;for(t={type:a.value},a=e.next();"EOF"!==a&&0!==a.code;){switch(a.code){case 10:t.position=c(e);break;case 39:t.thickness=a.value;break;case 210:t.extrusionDirection=c(e);break;case 100:break;default:i(t,a)}a=e.next()}return t},E.ForEntityName="VERTEX",E.prototype.parseEntity=function(e,a){var t={type:a.value};for(a=e.next();"EOF"!==a&&0!==a.code;){switch(a.code){case 10:t.x=a.value;break;case 20:t.y=a.value;break;case 30:t.z=a.value;break;case 40:case 41:case 42:0!=a.value&&(t.bulge=a.value);break;case 70:t.curveFittingVertex=0!=(1&a.value),t.curveFitTangent=0!=(2&a.value),t.splineVertex=0!=(8&a.value),t.splineControlPoint=0!=(16&a.value),t.threeDPolylineVertex=0!=(32&a.value),t.threeDPolylineMesh=0!=(64&a.value),t.polyfaceMeshVertex=0!=(128&a.value);break;case 50:case 71:t.faceA=a.value;break;case 72:t.faceB=a.value;break;case 73:t.faceC=a.value;break;case 74:t.faceD=a.value;break;default:i(t,a)}a=e.next()}return t},w.ForEntityName="POLYLINE",w.prototype.parseEntity=function(e,a){var t={type:a.value,vertices:[]};for(a=e.next();"EOF"!==a&&0!==a.code;){switch(a.code){case 10:case 20:case 30:case 39:t.thickness=a.value;break;case 40:case 41:break;case 70:t.shape=0!=(1&a.value),t.includesCurveFitVertices=0!=(2&a.value),t.includesSplineFitVertices=0!=(4&a.value),t.is3dPolyline=0!=(8&a.value),t.is3dPolygonMesh=0!=(16&a.value),t.is3dPolygonMeshClosed=0!=(32&a.value),t.isPolyfaceMesh=0!=(64&a.value),t.hasContinuousLinetypePattern=0!=(128&a.value);break;case 71:case 72:case 73:case 74:case 75:break;case 210:t.extrusionDirection=c(e);break;default:i(t,a)}a=e.next()}return t.vertices=function(e,a){var t=new E,r=[];for(;!e.isEOF();)if(0===a.code)if("VERTEX"===a.value)r.push(t.parseEntity(e,a)),a=e.lastReadGroup;else if("SEQEND"===a.value){m(e,a);break}return r}(e,a),t},P.ForEntityName="SOLID",P.prototype.parseEntity=function(e,a){var t;for((t={type:a.value}).points=[],a=e.next();"EOF"!==a&&0!==a.code;){switch(a.code){case 10:t.points[0]=c(e);break;case 11:t.points[1]=c(e);break;case 12:t.points[2]=c(e);break;case 13:t.points[3]=c(e);break;case 210:t.extrusionDirection=c(e);break;default:i(t,a)}a=e.next()}return t},F.ForEntityName="SPLINE",F.prototype.parseEntity=function(e,a){var t;for(t={type:a.value},a=e.next();"EOF"!==a&&0!==a.code;){switch(a.code){case 10:t.controlPoints||(t.controlPoints=[]),t.controlPoints.push(c(e));break;case 11:t.fitPoints||(t.fitPoints=[]),t.fitPoints.push(c(e));break;case 12:t.startTangent=c(e);break;case 13:t.endTangent=c(e);break;case 40:t.knotValues||(t.knotValues=[]),t.knotValues.push(a.value);break;case 70:0!=(1&a.value)&&(t.closed=!0),0!=(2&a.value)&&(t.periodic=!0),0!=(4&a.value)&&(t.rational=!0),0!=(8&a.value)&&(t.planar=!0),0!=(16&a.value)&&(t.planar=!0,t.linear=!0);break;case 71:t.degreeOfSplineCurve=a.value;break;case 72:t.numberOfKnots=a.value;break;case 73:t.numberOfControlPoints=a.value;break;case 74:t.numberOfFitPoints=a.value;break;case 210:t.normalVector=c(e);break;default:i(t,a)}a=e.next()}return t},O.ForEntityName="TEXT",O.prototype.parseEntity=function(e,a){var t;for(t={type:a.value},a=e.next();"EOF"!==a&&0!==a.code;){switch(a.code){case 10:t.startPoint=c(e);break;case 11:t.endPoint=c(e);break;case 40:t.textHeight=a.value;break;case 41:t.xScale=a.value;break;case 50:t.rotation=a.value;break;case 1:t.text=a.value;break;case 72:t.halign=a.value;break;case 73:t.valign=a.value;break;default:i(t,a)}a=e.next()}return t};var N=t(0);function T(){var e;this._entityHandlers={},(e=this).registerEntityHandler(u),e.registerEntityHandler(l),e.registerEntityHandler(v),e.registerEntityHandler(d),e.registerEntityHandler(b),e.registerEntityHandler(p),e.registerEntityHandler(f),e.registerEntityHandler(k),e.registerEntityHandler(y),e.registerEntityHandler(h),e.registerEntityHandler(g),e.registerEntityHandler(w),e.registerEntityHandler(P),e.registerEntityHandler(F),e.registerEntityHandler(O)}function S(e){N.debug("unhandled group "+L(e))}function L(e){return e.code+":"+e.value}N.setLevel("error"),T.prototype.parse=function(e,a){throw new Error("read() not implemented. Use readSync()")},T.prototype.registerEntityHandler=function(e){var a=new e;this._entityHandlers[e.ForEntityName]=a},T.prototype.parseSync=function(e){return"string"==typeof e?this._parse(e):(console.error("Cannot read dxf source of type `"+typeof e),null)},T.prototype.parseStream=function(e,a){var t="",r=this;e.on("data",function(e){t+=e}),e.on("end",function(){try{var e=r._parse(t)}catch(e){return a(e)}a(null,e)}),e.on("error",function(e){a(e)})},T.prototype._parse=function(e){var a,t,n={},c=0,i=e.split(/\r\n|\r|\n/g);if(!(a=new r(i)).hasNext())throw Error("Empty file");var u=this,s=function(e,a){return t.code===e&&t.value===a},l=function(){var e=null,r=null,n={};for(t=a.next();;){if(s(0,"ENDSEC")){e&&(n[e]=r);break}9===t.code?(e&&(n[e]=r),e=t.value):10===t.code?r={x:t.value}:20===t.code?r.y=t.value:30===t.code?r.z=t.value:r=t.value,t=a.next()}return t=a.next(),n},v=function(){var e,r={};for(t=a.next();"EOF"!==t.value&&!s(0,"ENDSEC");)s(0,"BLOCK")?(N.debug("block {"),e=d(),N.debug("}"),x(e),e.name?r[e.name]=e:N.error('block with handle "'+e.handle+'" is missing a name.')):(S(t),t=a.next());return r},d=function(){var e={};for(t=a.next();"EOF"!==t.value;){switch(t.code){case 1:e.xrefPath=t.value,t=a.next();break;case 2:e.name=t.value,t=a.next();break;case 3:e.name2=t.value,t=a.next();break;case 5:e.handle=t.value,t=a.next();break;case 8:e.layer=t.value,t=a.next();break;case 10:e.position=y(),t=a.next();break;case 67:e.paperSpace=!(!t.value||1!=t.value),t=a.next();break;case 70:0!=t.value&&(e.type=t.value),t=a.next();break;case 100:t=a.next();break;case 330:e.ownerHandle=t.value,t=a.next();break;case 0:if("ENDBLK"==t.value)break;e.entities=k(!0);break;default:S(t),t=a.next()}if(s(0,"ENDBLK")){t=a.next();break}}return e},b=function(){var e={};for(t=a.next();"EOF"!==t.value&&!s(0,"ENDSEC");){s(0,"TABLE")?(t=a.next(),f[t.value]?(N.debug(t.value+" Table {"),e[f[t.value].tableName]=p(),N.debug("}")):N.debug("Unhandled Table "+t.value)):t=a.next()}return t=a.next(),e};var p=function(){var e,r=f[t.value],n={},o=0;for(t=a.next();!s(0,"ENDTAB");)switch(t.code){case 5:n.handle=t.value,t=a.next();break;case 330:n.ownerHandle=t.value,t=a.next();break;case 100:"AcDbSymbolTable"===t.value?t=a.next():(S(t),t=a.next());break;case 70:o=t.value,t=a.next();break;case 0:t.value===r.dxfSymbolName?n[r.tableRecordsProperty]=r.parseTableRecords():(S(t),t=a.next());break;default:S(t),t=a.next()}var c=n[r.tableRecordsProperty];return c&&(c.constructor===Array?e=c.length:"object"==typeof c&&(e=Object.keys(c).length),o!==e&&N.warn("Parsed "+e+" "+r.dxfSymbolName+"'s but expected "+o)),t=a.next(),n},f={VPORT:{tableRecordsProperty:"viewPorts",tableName:"viewPort",dxfSymbolName:"VPORT",parseTableRecords:function(){var e=[],r={};for(N.debug("ViewPort {"),t=a.next();!s(0,"ENDTAB");)switch(t.code){case 2:r.name=t.value,t=a.next();break;case 10:r.lowerLeftCorner=y(),t=a.next();break;case 11:r.upperRightCorner=y(),t=a.next();break;case 12:r.center=y(),t=a.next();break;case 13:r.snapBasePoint=y(),t=a.next();break;case 14:r.snapSpacing=y(),t=a.next();break;case 15:r.gridSpacing=y(),t=a.next();break;case 16:r.viewDirectionFromTarget=y(),t=a.next();break;case 17:r.viewTarget=y(),t=a.next();break;case 42:r.lensLength=t.value,t=a.next();break;case 43:r.frontClippingPlane=t.value,t=a.next();break;case 44:r.backClippingPlane=t.value,t=a.next();break;case 45:r.viewHeight=t.value,t=a.next();break;case 50:r.snapRotationAngle=t.value,t=a.next();break;case 51:r.viewTwistAngle=t.value,t=a.next();break;case 79:r.orthographicType=t.value,t=a.next();break;case 110:r.ucsOrigin=y(),t=a.next();break;case 111:r.ucsXAxis=y(),t=a.next();break;case 112:r.ucsYAxis=y(),t=a.next();break;case 110:r.ucsOrigin=y(),t=a.next();break;case 281:r.renderMode=t.value,t=a.next();break;case 281:r.defaultLightingType=t.value,t=a.next();break;case 292:r.defaultLightingOn=t.value,t=a.next();break;case 330:r.ownerHandle=t.value,t=a.next();break;case 63:case 421:case 431:r.ambientColor=t.value,t=a.next();break;case 0:"VPORT"===t.value&&(N.debug("}"),e.push(r),N.debug("ViewPort {"),r={},t=a.next());break;default:S(t),t=a.next()}return N.debug("}"),e.push(r),e}},LTYPE:{tableRecordsProperty:"lineTypes",tableName:"lineType",dxfSymbolName:"LTYPE",parseTableRecords:function(){var e,r,n={},o={};for(N.debug("LType {"),t=a.next();!s(0,"ENDTAB");)switch(t.code){case 2:o.name=t.value,e=t.value,t=a.next();break;case 3:o.description=t.value,t=a.next();break;case 73:(r=t.value)>0&&(o.pattern=[]),t=a.next();break;case 40:o.patternLength=t.value,t=a.next();break;case 49:o.pattern.push(t.value),t=a.next();break;case 0:N.debug("}"),r>0&&r!==o.pattern.length&&N.warn("lengths do not match on LTYPE pattern"),n[e]=o,o={},N.debug("LType {"),t=a.next();break;default:t=a.next()}return N.debug("}"),n[e]=o,n}},LAYER:{tableRecordsProperty:"layers",tableName:"layer",dxfSymbolName:"LAYER",parseTableRecords:function(){var e,r,n={},c={};for(N.debug("Layer {"),t=a.next();!s(0,"ENDTAB");)switch(t.code){case 2:c.name=t.value,e=t.value,t=a.next();break;case 62:c.visible=t.value>=0,c.colorIndex=Math.abs(t.value),c.color=(r=c.colorIndex,o[r]),t=a.next();break;case 70:c.frozen=0!=(1&t.value)||0!=(2&t.value),t=a.next();break;case 0:"LAYER"===t.value&&(N.debug("}"),n[e]=c,N.debug("Layer {"),c={},e=void 0,t=a.next());break;default:S(t),t=a.next()}return N.debug("}"),n[e]=c,n}}},k=function(e){var r=[],n=e?"ENDBLK":"ENDSEC";for(e||(t=a.next());;)if(0===t.code){if(t.value===n)break;var o,c=u._entityHandlers[t.value];if(null==c){N.warn("Unhandled entity "+t.value),t=a.next();continue}N.debug(t.value+" {"),o=c.parseEntity(a,t),t=a.lastReadGroup,N.debug("}"),x(o),r.push(o)}else t=a.next();return"ENDSEC"==n&&(t=a.next()),r},y=function(){var e={},r=t.code;if(e.x=t.value,r+=10,(t=a.next()).code!=r)throw new Error("Expected code for point value to be "+r+" but got "+t.code+".");return e.y=t.value,r+=10,(t=a.next()).code!=r?(a.rewind(),e):(e.z=t.value,e)},x=function(e){if(!e)throw new TypeError("entity cannot be undefined or null");e.handle||(e.handle=c++)};return function(){for(t=a.next();!a.isEOF();)if(0===t.code&&"SECTION"===t.value){if(2!==(t=a.next()).code){console.error("Unexpected code %s after 0:SECTION",L(t)),t=a.next();continue}"HEADER"===t.value?(N.debug("> HEADER"),n.header=l(),N.debug("<")):"BLOCKS"===t.value?(N.debug("> BLOCKS"),n.blocks=v(),N.debug("<")):"ENTITIES"===t.value?(N.debug("> ENTITIES"),n.entities=k(!1),N.debug("<")):"TABLES"===t.value?(N.debug("> TABLES"),n.tables=b(),N.debug("<")):"EOF"===t.value?N.debug("EOF"):N.warn("Skipping section '%s'",t.value)}else t=a.next()}(),n};a.default=T}]).default});
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).THREE3DP={})}(this,function(t){"use strict";function e(){}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:t>0?1:+t}),"name"in Function.prototype==!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),r=1;r<arguments.length;r++){var n=arguments[r];if(null!=n)for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}),Object.assign(e.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var r=this._listeners;void 0===r[t]&&(r[t]=[]),-1===r[t].indexOf(e)&&r[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var r=this._listeners;return void 0!==r[t]&&-1!==r[t].indexOf(e)},removeEventListener:function(t,e){if(void 0!==this._listeners){var r=this._listeners[t];if(void 0!==r){var n=r.indexOf(e);-1!==n&&r.splice(n,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var r=e.slice(0),n=0,i=r.length;n<i;n++)r[n].call(this,t)}}}});var r,n,i,a,o,s,c,h,l,u,p,d,f="101",m=0,g=1,v=2,y=1,x=2,b=0,w=1,_=2,M=0,E=1,S=2,T=0,A=1,L=2,P=3,R=4,C=5,O=100,I=101,D=102,B=103,N=104,z=200,U=201,G=202,F=203,H=204,V=205,k=206,j=207,W=208,q=209,X=210,Y=0,J=1,Z=2,Q=3,K=4,$=5,tt=6,et=7,rt=0,nt=1,it=2,at=0,ot=1,st=2,ct=3,ht=4,lt=5,ut=301,pt=302,dt=303,ft=304,mt=305,gt=306,vt=307,yt=1e3,xt=1001,bt=1002,wt=1003,_t=1004,Mt=1005,Et=1006,St=1007,Tt=1008,At=1009,Lt=1010,Pt=1011,Rt=1012,Ct=1013,Ot=1014,It=1015,Dt=1016,Bt=1017,Nt=1018,zt=1019,Ut=1020,Gt=1021,Ft=1022,Ht=1023,Vt=1024,kt=1025,jt=Ht,Wt=1026,qt=1027,Xt=1028,Yt=33776,Jt=33777,Zt=33778,Qt=33779,Kt=35840,$t=35841,te=35842,ee=35843,re=36196,ne=37808,ie=37809,ae=37810,oe=37811,se=37812,ce=37813,he=37814,le=37815,ue=37816,pe=37817,de=37818,fe=37819,me=37820,ge=37821,ve=2201,ye=2400,xe=0,be=1,we=2,_e=3e3,Me=3001,Ee=3007,Se=3002,Te=3004,Ae=3005,Le=3006,Pe=3200,Re=3201,Ce=0,Oe=1,Ie={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var t=[],e=0;e<256;e++)t[e]=(e<16?"0":"")+e.toString(16);return function(){var e=4294967295*Math.random()|0,r=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(t[255&e]+t[e>>8&255]+t[e>>16&255]+t[e>>24&255]+"-"+t[255&r]+t[r>>8&255]+"-"+t[r>>16&15|64]+t[r>>24&255]+"-"+t[63&n|128]+t[n>>8&255]+"-"+t[n>>16&255]+t[n>>24&255]+t[255&i]+t[i>>8&255]+t[i>>16&255]+t[i>>24&255]).toUpperCase()}}(),clamp:function(t,e,r){return Math.max(e,Math.min(r,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,r,n,i){return n+(t-e)*(i-n)/(r-e)},lerp:function(t,e,r){return(1-r)*t+r*e},smoothstep:function(t,e,r){return t<=e?0:t>=r?1:(t=(t-e)/(r-e))*t*(3-2*t)},smootherstep:function(t,e,r){return t<=e?0:t>=r?1:(t=(t-e)/(r-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*Ie.DEG2RAD},radToDeg:function(t){return t*Ie.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}};function De(t,e){this.x=t||0,this.y=e||0}function Be(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function Ne(t,e,r,n){this._x=t||0,this._y=e||0,this._z=r||0,this._w=void 0!==n?n:1}function ze(t,e,r){this.x=t||0,this.y=e||0,this.z=r||0}function Ue(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.defineProperties(De.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(De.prototype,{isVector2:!0,set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,r=this.y,n=t.elements;return this.x=n[0]*e+n[3]*r+n[6],this.y=n[1]*e+n[4]*r+n[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:(r=new De,n=new De,function(t,e){return r.set(t,t),n.set(e,e),this.clamp(r,n)}),clampLength:function(t,e){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(e,r)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,r=this.y-t.y;return e*e+r*r},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,r){return this.subVectors(e,t).multiplyScalar(r).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,r){return void 0!==r&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var r=Math.cos(e),n=Math.sin(e),i=this.x-t.x,a=this.y-t.y;return this.x=i*r-a*n+t.x,this.y=i*n+a*r+t.y,this}}),Object.assign(Be.prototype,{isMatrix4:!0,set:function(t,e,r,n,i,a,o,s,c,h,l,u,p,d,f,m){var g=this.elements;return g[0]=t,g[4]=e,g[8]=r,g[12]=n,g[1]=i,g[5]=a,g[9]=o,g[13]=s,g[2]=c,g[6]=h,g[10]=l,g[14]=u,g[3]=p,g[7]=d,g[11]=f,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new Be).fromArray(this.elements)},copy:function(t){var e=this.elements,r=t.elements;return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],this},copyPosition:function(t){var e=this.elements,r=t.elements;return e[12]=r[12],e[13]=r[13],e[14]=r[14],this},extractBasis:function(t,e,r){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,r){return this.set(t.x,e.x,r.x,0,t.y,e.y,r.y,0,t.z,e.z,r.z,0,0,0,0,1),this},extractRotation:(u=new ze,function(t){var e=this.elements,r=t.elements,n=1/u.setFromMatrixColumn(t,0).length(),i=1/u.setFromMatrixColumn(t,1).length(),a=1/u.setFromMatrixColumn(t,2).length();return e[0]=r[0]*n,e[1]=r[1]*n,e[2]=r[2]*n,e[3]=0,e[4]=r[4]*i,e[5]=r[5]*i,e[6]=r[6]*i,e[7]=0,e[8]=r[8]*a,e[9]=r[9]*a,e[10]=r[10]*a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}),makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,r=t.x,n=t.y,i=t.z,a=Math.cos(r),o=Math.sin(r),s=Math.cos(n),c=Math.sin(n),h=Math.cos(i),l=Math.sin(i);if("XYZ"===t.order){var u=a*h,p=a*l,d=o*h,f=o*l;e[0]=s*h,e[4]=-s*l,e[8]=c,e[1]=p+d*c,e[5]=u-f*c,e[9]=-o*s,e[2]=f-u*c,e[6]=d+p*c,e[10]=a*s}else if("YXZ"===t.order){var m=s*h,g=s*l,v=c*h,y=c*l;e[0]=m+y*o,e[4]=v*o-g,e[8]=a*c,e[1]=a*l,e[5]=a*h,e[9]=-o,e[2]=g*o-v,e[6]=y+m*o,e[10]=a*s}else if("ZXY"===t.order){m=s*h,g=s*l,v=c*h,y=c*l;e[0]=m-y*o,e[4]=-a*l,e[8]=v+g*o,e[1]=g+v*o,e[5]=a*h,e[9]=y-m*o,e[2]=-a*c,e[6]=o,e[10]=a*s}else if("ZYX"===t.order){u=a*h,p=a*l,d=o*h,f=o*l;e[0]=s*h,e[4]=d*c-p,e[8]=u*c+f,e[1]=s*l,e[5]=f*c+u,e[9]=p*c-d,e[2]=-c,e[6]=o*s,e[10]=a*s}else if("YZX"===t.order){var x=a*s,b=a*c,w=o*s,_=o*c;e[0]=s*h,e[4]=_-x*l,e[8]=w*l+b,e[1]=l,e[5]=a*h,e[9]=-o*h,e[2]=-c*h,e[6]=b*l+w,e[10]=x-_*l}else if("XZY"===t.order){x=a*s,b=a*c,w=o*s,_=o*c;e[0]=s*h,e[4]=-l,e[8]=c*h,e[1]=x*l+_,e[5]=a*h,e[9]=b*l-w,e[2]=w*l-b,e[6]=o*h,e[10]=_*l+x}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:(h=new ze(0,0,0),l=new ze(1,1,1),function(t){return this.compose(h,t,l)}),lookAt:(o=new ze,s=new ze,c=new ze,function(t,e,r){var n=this.elements;return c.subVectors(t,e),0===c.lengthSq()&&(c.z=1),c.normalize(),o.crossVectors(r,c),0===o.lengthSq()&&(1===Math.abs(r.z)?c.x+=1e-4:c.z+=1e-4,c.normalize(),o.crossVectors(r,c)),o.normalize(),s.crossVectors(c,o),n[0]=o.x,n[4]=s.x,n[8]=c.x,n[1]=o.y,n[5]=s.y,n[9]=c.y,n[2]=o.z,n[6]=s.z,n[10]=c.z,this}),multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var r=t.elements,n=e.elements,i=this.elements,a=r[0],o=r[4],s=r[8],c=r[12],h=r[1],l=r[5],u=r[9],p=r[13],d=r[2],f=r[6],m=r[10],g=r[14],v=r[3],y=r[7],x=r[11],b=r[15],w=n[0],_=n[4],M=n[8],E=n[12],S=n[1],T=n[5],A=n[9],L=n[13],P=n[2],R=n[6],C=n[10],O=n[14],I=n[3],D=n[7],B=n[11],N=n[15];return i[0]=a*w+o*S+s*P+c*I,i[4]=a*_+o*T+s*R+c*D,i[8]=a*M+o*A+s*C+c*B,i[12]=a*E+o*L+s*O+c*N,i[1]=h*w+l*S+u*P+p*I,i[5]=h*_+l*T+u*R+p*D,i[9]=h*M+l*A+u*C+p*B,i[13]=h*E+l*L+u*O+p*N,i[2]=d*w+f*S+m*P+g*I,i[6]=d*_+f*T+m*R+g*D,i[10]=d*M+f*A+m*C+g*B,i[14]=d*E+f*L+m*O+g*N,i[3]=v*w+y*S+x*P+b*I,i[7]=v*_+y*T+x*R+b*D,i[11]=v*M+y*A+x*C+b*B,i[15]=v*E+y*L+x*O+b*N,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToBufferAttribute:function(){var t=new ze;return function(e){for(var r=0,n=e.count;r<n;r++)t.x=e.getX(r),t.y=e.getY(r),t.z=e.getZ(r),t.applyMatrix4(this),e.setXYZ(r,t.x,t.y,t.z);return e}}(),determinant:function(){var t=this.elements,e=t[0],r=t[4],n=t[8],i=t[12],a=t[1],o=t[5],s=t[9],c=t[13],h=t[2],l=t[6],u=t[10],p=t[14];return t[3]*(+i*s*l-n*c*l-i*o*u+r*c*u+n*o*p-r*s*p)+t[7]*(+e*s*p-e*c*u+i*a*u-n*a*p+n*c*h-i*s*h)+t[11]*(+e*c*l-e*o*p-i*a*l+r*a*p+i*o*h-r*c*h)+t[15]*(-n*o*h-e*s*l+e*o*u+n*a*l-r*a*u+r*s*h)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t){var e=this.elements;return e[12]=t.x,e[13]=t.y,e[14]=t.z,this},getInverse:function(t,e){var r=this.elements,n=t.elements,i=n[0],a=n[1],o=n[2],s=n[3],c=n[4],h=n[5],l=n[6],u=n[7],p=n[8],d=n[9],f=n[10],m=n[11],g=n[12],v=n[13],y=n[14],x=n[15],b=d*y*u-v*f*u+v*l*m-h*y*m-d*l*x+h*f*x,w=g*f*u-p*y*u-g*l*m+c*y*m+p*l*x-c*f*x,_=p*v*u-g*d*u+g*h*m-c*v*m-p*h*x+c*d*x,M=g*d*l-p*v*l-g*h*f+c*v*f+p*h*y-c*d*y,E=i*b+a*w+o*_+s*M;if(0===E){var S="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(S);return console.warn(S),this.identity()}var T=1/E;return r[0]=b*T,r[1]=(v*f*s-d*y*s-v*o*m+a*y*m+d*o*x-a*f*x)*T,r[2]=(h*y*s-v*l*s+v*o*u-a*y*u-h*o*x+a*l*x)*T,r[3]=(d*l*s-h*f*s-d*o*u+a*f*u+h*o*m-a*l*m)*T,r[4]=w*T,r[5]=(p*y*s-g*f*s+g*o*m-i*y*m-p*o*x+i*f*x)*T,r[6]=(g*l*s-c*y*s-g*o*u+i*y*u+c*o*x-i*l*x)*T,r[7]=(c*f*s-p*l*s+p*o*u-i*f*u-c*o*m+i*l*m)*T,r[8]=_*T,r[9]=(g*d*s-p*v*s-g*a*m+i*v*m+p*a*x-i*d*x)*T,r[10]=(c*v*s-g*h*s+g*a*u-i*v*u-c*a*x+i*h*x)*T,r[11]=(p*h*s-c*d*s-p*a*u+i*d*u+c*a*m-i*h*m)*T,r[12]=M*T,r[13]=(p*v*o-g*d*o+g*a*f-i*v*f-p*a*y+i*d*y)*T,r[14]=(g*h*o-c*v*o-g*a*l+i*v*l+c*a*y-i*h*y)*T,r[15]=(c*d*o-p*h*o+p*a*l-i*d*l-c*a*f+i*h*f)*T,this},scale:function(t){var e=this.elements,r=t.x,n=t.y,i=t.z;return e[0]*=r,e[4]*=n,e[8]*=i,e[1]*=r,e[5]*=n,e[9]*=i,e[2]*=r,e[6]*=n,e[10]*=i,e[3]*=r,e[7]*=n,e[11]*=i,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],r=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],n=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,r,n))},makeTranslation:function(t,e,r){return this.set(1,0,0,t,0,1,0,e,0,0,1,r,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),r=Math.sin(t);return this.set(1,0,0,0,0,e,-r,0,0,r,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),r=Math.sin(t);return this.set(e,0,r,0,0,1,0,0,-r,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),r=Math.sin(t);return this.set(e,-r,0,0,r,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var r=Math.cos(e),n=Math.sin(e),i=1-r,a=t.x,o=t.y,s=t.z,c=i*a,h=i*o;return this.set(c*a+r,c*o-n*s,c*s+n*o,0,c*o+n*s,h*o+r,h*s-n*a,0,c*s-n*o,h*s+n*a,i*s*s+r,0,0,0,0,1),this},makeScale:function(t,e,r){return this.set(t,0,0,0,0,e,0,0,0,0,r,0,0,0,0,1),this},makeShear:function(t,e,r){return this.set(1,e,r,0,t,1,r,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,r){var n=this.elements,i=e._x,a=e._y,o=e._z,s=e._w,c=i+i,h=a+a,l=o+o,u=i*c,p=i*h,d=i*l,f=a*h,m=a*l,g=o*l,v=s*c,y=s*h,x=s*l,b=r.x,w=r.y,_=r.z;return n[0]=(1-(f+g))*b,n[1]=(p+x)*b,n[2]=(d-y)*b,n[3]=0,n[4]=(p-x)*w,n[5]=(1-(u+g))*w,n[6]=(m+v)*w,n[7]=0,n[8]=(d+y)*_,n[9]=(m-v)*_,n[10]=(1-(u+f))*_,n[11]=0,n[12]=t.x,n[13]=t.y,n[14]=t.z,n[15]=1,this},decompose:(i=new ze,a=new Be,function(t,e,r){var n=this.elements,o=i.set(n[0],n[1],n[2]).length(),s=i.set(n[4],n[5],n[6]).length(),c=i.set(n[8],n[9],n[10]).length();this.determinant()<0&&(o=-o),t.x=n[12],t.y=n[13],t.z=n[14],a.copy(this);var h=1/o,l=1/s,u=1/c;return a.elements[0]*=h,a.elements[1]*=h,a.elements[2]*=h,a.elements[4]*=l,a.elements[5]*=l,a.elements[6]*=l,a.elements[8]*=u,a.elements[9]*=u,a.elements[10]*=u,e.setFromRotationMatrix(a),r.x=o,r.y=s,r.z=c,this}),makePerspective:function(t,e,r,n,i,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,s=2*i/(e-t),c=2*i/(r-n),h=(e+t)/(e-t),l=(r+n)/(r-n),u=-(a+i)/(a-i),p=-2*a*i/(a-i);return o[0]=s,o[4]=0,o[8]=h,o[12]=0,o[1]=0,o[5]=c,o[9]=l,o[13]=0,o[2]=0,o[6]=0,o[10]=u,o[14]=p,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(t,e,r,n,i,a){var o=this.elements,s=1/(e-t),c=1/(r-n),h=1/(a-i),l=(e+t)*s,u=(r+n)*c,p=(a+i)*h;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-l,o[1]=0,o[5]=2*c,o[9]=0,o[13]=-u,o[2]=0,o[6]=0,o[10]=-2*h,o[14]=-p,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(t){for(var e=this.elements,r=t.elements,n=0;n<16;n++)if(e[n]!==r[n])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var r=0;r<16;r++)this.elements[r]=t[r+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var r=this.elements;return t[e]=r[0],t[e+1]=r[1],t[e+2]=r[2],t[e+3]=r[3],t[e+4]=r[4],t[e+5]=r[5],t[e+6]=r[6],t[e+7]=r[7],t[e+8]=r[8],t[e+9]=r[9],t[e+10]=r[10],t[e+11]=r[11],t[e+12]=r[12],t[e+13]=r[13],t[e+14]=r[14],t[e+15]=r[15],t}}),Object.assign(Ne,{slerp:function(t,e,r,n){return r.copy(t).slerp(e,n)},slerpFlat:function(t,e,r,n,i,a,o){var s=r[n+0],c=r[n+1],h=r[n+2],l=r[n+3],u=i[a+0],p=i[a+1],d=i[a+2],f=i[a+3];if(l!==f||s!==u||c!==p||h!==d){var m=1-o,g=s*u+c*p+h*d+l*f,v=g>=0?1:-1,y=1-g*g;if(y>Number.EPSILON){var x=Math.sqrt(y),b=Math.atan2(x,g*v);m=Math.sin(m*b)/x,o=Math.sin(o*b)/x}var w=o*v;if(s=s*m+u*w,c=c*m+p*w,h=h*m+d*w,l=l*m+f*w,m===1-o){var _=1/Math.sqrt(s*s+c*c+h*h+l*l);s*=_,c*=_,h*=_,l*=_}}t[e]=s,t[e+1]=c,t[e+2]=h,t[e+3]=l}}),Object.defineProperties(Ne.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this.onChangeCallback()}}}),Object.assign(Ne.prototype,{isQuaternion:!0,set:function(t,e,r,n){return this._x=t,this._y=e,this._z=r,this._w=n,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var r=t._x,n=t._y,i=t._z,a=t.order,o=Math.cos,s=Math.sin,c=o(r/2),h=o(n/2),l=o(i/2),u=s(r/2),p=s(n/2),d=s(i/2);return"XYZ"===a?(this._x=u*h*l+c*p*d,this._y=c*p*l-u*h*d,this._z=c*h*d+u*p*l,this._w=c*h*l-u*p*d):"YXZ"===a?(this._x=u*h*l+c*p*d,this._y=c*p*l-u*h*d,this._z=c*h*d-u*p*l,this._w=c*h*l+u*p*d):"ZXY"===a?(this._x=u*h*l-c*p*d,this._y=c*p*l+u*h*d,this._z=c*h*d+u*p*l,this._w=c*h*l-u*p*d):"ZYX"===a?(this._x=u*h*l-c*p*d,this._y=c*p*l+u*h*d,this._z=c*h*d-u*p*l,this._w=c*h*l+u*p*d):"YZX"===a?(this._x=u*h*l+c*p*d,this._y=c*p*l+u*h*d,this._z=c*h*d-u*p*l,this._w=c*h*l-u*p*d):"XZY"===a&&(this._x=u*h*l-c*p*d,this._y=c*p*l-u*h*d,this._z=c*h*d+u*p*l,this._w=c*h*l+u*p*d),!1!==e&&this.onChangeCallback(),this},setFromAxisAngle:function(t,e){var r=e/2,n=Math.sin(r);return this._x=t.x*n,this._y=t.y*n,this._z=t.z*n,this._w=Math.cos(r),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var e,r=t.elements,n=r[0],i=r[4],a=r[8],o=r[1],s=r[5],c=r[9],h=r[2],l=r[6],u=r[10],p=n+s+u;return p>0?(e=.5/Math.sqrt(p+1),this._w=.25/e,this._x=(l-c)*e,this._y=(a-h)*e,this._z=(o-i)*e):n>s&&n>u?(e=2*Math.sqrt(1+n-s-u),this._w=(l-c)/e,this._x=.25*e,this._y=(i+o)/e,this._z=(a+h)/e):s>u?(e=2*Math.sqrt(1+s-n-u),this._w=(a-h)/e,this._x=(i+o)/e,this._y=.25*e,this._z=(c+l)/e):(e=2*Math.sqrt(1+u-n-s),this._w=(o-i)/e,this._x=(a+h)/e,this._y=(c+l)/e,this._z=.25*e),this.onChangeCallback(),this},setFromUnitVectors:function(){var t,e=new ze;return function(r,n){return void 0===e&&(e=new ze),(t=r.dot(n)+1)<1e-6?(t=0,Math.abs(r.x)>Math.abs(r.z)?e.set(-r.y,r.x,0):e.set(0,-r.z,r.y)):e.crossVectors(r,n),this._x=e.x,this._y=e.y,this._z=e.z,this._w=t,this.normalize()}}(),angleTo:function(t){return 2*Math.acos(Math.abs(Ie.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,e){var r=this.angleTo(t);if(0===r)return this;var n=Math.min(1,e/r);return this.slerp(t,n),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var r=t._x,n=t._y,i=t._z,a=t._w,o=e._x,s=e._y,c=e._z,h=e._w;return this._x=r*h+a*o+n*c-i*s,this._y=n*h+a*s+i*o-r*c,this._z=i*h+a*c+r*s-n*o,this._w=a*h-r*o-n*s-i*c,this.onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var r=this._x,n=this._y,i=this._z,a=this._w,o=a*t._w+r*t._x+n*t._y+i*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=a,this._x=r,this._y=n,this._z=i,this;var s=1-o*o;if(s<=Number.EPSILON){var c=1-e;return this._w=c*a+e*this._w,this._x=c*r+e*this._x,this._y=c*n+e*this._y,this._z=c*i+e*this._z,this.normalize()}var h=Math.sqrt(s),l=Math.atan2(h,o),u=Math.sin((1-e)*l)/h,p=Math.sin(e*l)/h;return this._w=a*u+this._w*p,this._x=r*u+this._x*p,this._y=n*u+this._y*p,this._z=i*u+this._z*p,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}),Object.assign(ze.prototype,{isVector3:!0,set:function(t,e,r){return this.x=t,this.y=e,this.z=r,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:(p=new Ne,function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(p.setFromEuler(t))}),applyAxisAngle:function(){var t=new Ne;return function(e,r){return this.applyQuaternion(t.setFromAxisAngle(e,r))}}(),applyMatrix3:function(t){var e=this.x,r=this.y,n=this.z,i=t.elements;return this.x=i[0]*e+i[3]*r+i[6]*n,this.y=i[1]*e+i[4]*r+i[7]*n,this.z=i[2]*e+i[5]*r+i[8]*n,this},applyMatrix4:function(t){var e=this.x,r=this.y,n=this.z,i=t.elements,a=1/(i[3]*e+i[7]*r+i[11]*n+i[15]);return this.x=(i[0]*e+i[4]*r+i[8]*n+i[12])*a,this.y=(i[1]*e+i[5]*r+i[9]*n+i[13])*a,this.z=(i[2]*e+i[6]*r+i[10]*n+i[14])*a,this},applyQuaternion:function(t){var e=this.x,r=this.y,n=this.z,i=t.x,a=t.y,o=t.z,s=t.w,c=s*e+a*n-o*r,h=s*r+o*e-i*n,l=s*n+i*r-a*e,u=-i*e-a*r-o*n;return this.x=c*s+u*-i+h*-o-l*-a,this.y=h*s+u*-a+l*-i-c*-o,this.z=l*s+u*-o+c*-a-h*-i,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(){var t=new Be;return function(e){return this.applyMatrix4(t.getInverse(e.projectionMatrix)).applyMatrix4(e.matrixWorld)}}(),transformDirection:function(t){var e=this.x,r=this.y,n=this.z,i=t.elements;return this.x=i[0]*e+i[4]*r+i[8]*n,this.y=i[1]*e+i[5]*r+i[9]*n,this.z=i[2]*e+i[6]*r+i[10]*n,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(){var t=new ze,e=new ze;return function(r,n){return t.set(r,r,r),e.set(n,n,n),this.clamp(t,e)}}(),clampLength:function(t,e){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(e,r)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,r){return this.subVectors(e,t).multiplyScalar(r).add(t)},cross:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)},crossVectors:function(t,e){var r=t.x,n=t.y,i=t.z,a=e.x,o=e.y,s=e.z;return this.x=n*s-i*o,this.y=i*a-r*s,this.z=r*o-n*a,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:function(){var t=new ze;return function(e){return t.copy(this).projectOnVector(e),this.sub(t)}}(),reflect:function(){var t=new ze;return function(e){return this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(t){var e=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq());return Math.acos(Ie.clamp(e,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,r=this.y-t.y,n=this.z-t.z;return e*e+r*r+n*n},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,e,r){var n=Math.sin(e)*t;return this.x=n*Math.sin(r),this.y=Math.cos(e)*t,this.z=n*Math.cos(r),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,e,r){return this.x=t*Math.sin(e),this.y=r,this.z=t*Math.cos(e),this},setFromMatrixPosition:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),r=this.setFromMatrixColumn(t,1).length(),n=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=r,this.z=n,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,r){return void 0!==r&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}}),Object.assign(Ue.prototype,{isMatrix3:!0,set:function(t,e,r,n,i,a,o,s,c){var h=this.elements;return h[0]=t,h[1]=n,h[2]=o,h[3]=e,h[4]=i,h[5]=s,h[6]=r,h[7]=a,h[8]=c,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements,r=t.elements;return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToBufferAttribute:function(){var t=new ze;return function(e){for(var r=0,n=e.count;r<n;r++)t.x=e.getX(r),t.y=e.getY(r),t.z=e.getZ(r),t.applyMatrix3(this),e.setXYZ(r,t.x,t.y,t.z);return e}}(),multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var r=t.elements,n=e.elements,i=this.elements,a=r[0],o=r[3],s=r[6],c=r[1],h=r[4],l=r[7],u=r[2],p=r[5],d=r[8],f=n[0],m=n[3],g=n[6],v=n[1],y=n[4],x=n[7],b=n[2],w=n[5],_=n[8];return i[0]=a*f+o*v+s*b,i[3]=a*m+o*y+s*w,i[6]=a*g+o*x+s*_,i[1]=c*f+h*v+l*b,i[4]=c*m+h*y+l*w,i[7]=c*g+h*x+l*_,i[2]=u*f+p*v+d*b,i[5]=u*m+p*y+d*w,i[8]=u*g+p*x+d*_,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],r=t[1],n=t[2],i=t[3],a=t[4],o=t[5],s=t[6],c=t[7],h=t[8];return e*a*h-e*o*c-r*i*h+r*o*s+n*i*c-n*a*s},getInverse:function(t,e){t&&t.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var r=t.elements,n=this.elements,i=r[0],a=r[1],o=r[2],s=r[3],c=r[4],h=r[5],l=r[6],u=r[7],p=r[8],d=p*c-h*u,f=h*l-p*s,m=u*s-c*l,g=i*d+a*f+o*m;if(0===g){var v="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(v);return console.warn(v),this.identity()}var y=1/g;return n[0]=d*y,n[1]=(o*u-p*a)*y,n[2]=(h*a-o*c)*y,n[3]=f*y,n[4]=(p*i-o*l)*y,n[5]=(o*s-h*i)*y,n[6]=m*y,n[7]=(a*l-u*i)*y,n[8]=(c*i-a*s)*y,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,r,n,i,a,o){var s=Math.cos(i),c=Math.sin(i);this.set(r*s,r*c,-r*(s*a+c*o)+a+t,-n*c,n*s,-n*(-c*a+s*o)+o+e,0,0,1)},scale:function(t,e){var r=this.elements;return r[0]*=t,r[3]*=t,r[6]*=t,r[1]*=e,r[4]*=e,r[7]*=e,this},rotate:function(t){var e=Math.cos(t),r=Math.sin(t),n=this.elements,i=n[0],a=n[3],o=n[6],s=n[1],c=n[4],h=n[7];return n[0]=e*i+r*s,n[3]=e*a+r*c,n[6]=e*o+r*h,n[1]=-r*i+e*s,n[4]=-r*a+e*c,n[7]=-r*o+e*h,this},translate:function(t,e){var r=this.elements;return r[0]+=t*r[2],r[3]+=t*r[5],r[6]+=t*r[8],r[1]+=e*r[2],r[4]+=e*r[5],r[7]+=e*r[8],this},equals:function(t){for(var e=this.elements,r=t.elements,n=0;n<9;n++)if(e[n]!==r[n])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var r=0;r<9;r++)this.elements[r]=t[r+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var r=this.elements;return t[e]=r[0],t[e+1]=r[1],t[e+2]=r[2],t[e+3]=r[3],t[e+4]=r[4],t[e+5]=r[5],t[e+6]=r[6],t[e+7]=r[7],t[e+8]=r[8],t}});var Ge,Fe,He,Ve,ke,je={getDataURL:function(t){var e;if("undefined"==typeof HTMLCanvasElement)return t.src;if(t instanceof HTMLCanvasElement)e=t;else{void 0===d&&(d=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),d.width=t.width,d.height=t.height;var r=d.getContext("2d");t instanceof ImageData?r.putImageData(t,0,0):r.drawImage(t,0,0,t.width,t.height),e=d}return e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}},We=0;function qe(t,e,r,n,i,a,o,s,c,h){Object.defineProperty(this,"id",{value:We++}),this.uuid=Ie.generateUUID(),this.name="",this.image=void 0!==t?t:qe.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:qe.DEFAULT_MAPPING,this.wrapS=void 0!==r?r:xt,this.wrapT=void 0!==n?n:xt,this.magFilter=void 0!==i?i:Et,this.minFilter=void 0!==a?a:Tt,this.anisotropy=void 0!==c?c:1,this.format=void 0!==o?o:Ht,this.type=void 0!==s?s:At,this.offset=new De(0,0),this.repeat=new De(1,1),this.center=new De(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ue,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==h?h:_e,this.version=0,this.onUpdate=null}function Xe(t,e,r,n){this.x=t||0,this.y=e||0,this.z=r||0,this.w=void 0!==n?n:1}function Ye(t,e,r){this.width=t,this.height=e,this.scissor=new Xe(0,0,t,e),this.scissorTest=!1,this.viewport=new Xe(0,0,t,e),r=r||{},this.texture=new qe(void 0,void 0,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.generateMipmaps=void 0!==r.generateMipmaps&&r.generateMipmaps,this.texture.minFilter=void 0!==r.minFilter?r.minFilter:Et,this.depthBuffer=void 0===r.depthBuffer||r.depthBuffer,this.stencilBuffer=void 0===r.stencilBuffer||r.stencilBuffer,this.depthTexture=void 0!==r.depthTexture?r.depthTexture:null}function Je(t,e,r){Ye.call(this,t,e,r),this.samples=4}function Ze(t,e,r){Ye.call(this,t,e,r),this.activeCubeFace=0,this.activeMipMapLevel=0}function Qe(t,e,r,n,i,a,o,s,c,h,l,u){qe.call(this,null,a,o,s,c,h,n,i,l,u),this.image={data:t,width:e,height:r},this.magFilter=void 0!==c?c:wt,this.minFilter=void 0!==h?h:wt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function Ke(t,e){this.min=void 0!==t?t:new ze(1/0,1/0,1/0),this.max=void 0!==e?e:new ze(-1/0,-1/0,-1/0)}function $e(t,e){this.center=void 0!==t?t:new ze,this.radius=void 0!==e?e:0}function tr(t,e){this.normal=void 0!==t?t:new ze(1,0,0),this.constant=void 0!==e?e:0}function er(t,e,r,n,i,a){this.planes=[void 0!==t?t:new tr,void 0!==e?e:new tr,void 0!==r?r:new tr,void 0!==n?n:new tr,void 0!==i?i:new tr,void 0!==a?a:new tr]}qe.DEFAULT_IMAGE=void 0,qe.DEFAULT_MAPPING=300,qe.prototype=Object.assign(Object.create(e.prototype),{constructor:qe,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){var e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var n=this.image;if(void 0===n.uuid&&(n.uuid=Ie.generateUUID()),!e&&void 0===t.images[n.uuid]){var i;if(Array.isArray(n)){i=[];for(var a=0,o=n.length;a<o;a++)i.push(je.getDataURL(n[a]))}else i=je.getDataURL(n);t.images[n.uuid]={uuid:n.uuid,url:i}}r.image=n.uuid}return e||(t.textures[this.uuid]=r),r},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case yt:t.x=t.x-Math.floor(t.x);break;case xt:t.x=t.x<0?0:1;break;case bt:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case yt:t.y=t.y-Math.floor(t.y);break;case xt:t.y=t.y<0?0:1;break;case bt:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}}),Object.defineProperty(qe.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Xe.prototype,{isVector4:!0,set:function(t,e,r,n){return this.x=t,this.y=e,this.z=r,this.w=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,r=this.y,n=this.z,i=this.w,a=t.elements;return this.x=a[0]*e+a[4]*r+a[8]*n+a[12]*i,this.y=a[1]*e+a[5]*r+a[9]*n+a[13]*i,this.z=a[2]*e+a[6]*r+a[10]*n+a[14]*i,this.w=a[3]*e+a[7]*r+a[11]*n+a[15]*i,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,r,n,i,a=t.elements,o=a[0],s=a[4],c=a[8],h=a[1],l=a[5],u=a[9],p=a[2],d=a[6],f=a[10];if(Math.abs(s-h)<.01&&Math.abs(c-p)<.01&&Math.abs(u-d)<.01){if(Math.abs(s+h)<.1&&Math.abs(c+p)<.1&&Math.abs(u+d)<.1&&Math.abs(o+l+f-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;var m=(o+1)/2,g=(l+1)/2,v=(f+1)/2,y=(s+h)/4,x=(c+p)/4,b=(u+d)/4;return m>g&&m>v?m<.01?(r=0,n=.707106781,i=.707106781):(n=y/(r=Math.sqrt(m)),i=x/r):g>v?g<.01?(r=.707106781,n=0,i=.707106781):(r=y/(n=Math.sqrt(g)),i=b/n):v<.01?(r=.707106781,n=.707106781,i=0):(r=x/(i=Math.sqrt(v)),n=b/i),this.set(r,n,i,e),this}var w=Math.sqrt((d-u)*(d-u)+(c-p)*(c-p)+(h-s)*(h-s));return Math.abs(w)<.001&&(w=1),this.x=(d-u)/w,this.y=(c-p)/w,this.z=(h-s)/w,this.w=Math.acos((o+l+f-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(){var t,e;return function(r,n){return void 0===t&&(t=new Xe,e=new Xe),t.set(r,r,r,r),e.set(n,n,n,n),this.clamp(t,e)}}(),clampLength:function(t,e){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(e,r)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,r){return this.subVectors(e,t).multiplyScalar(r).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,r){return void 0!==r&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}}),Ye.prototype=Object.assign(Object.create(e.prototype),{constructor:Ye,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Je.prototype=Object.assign(Object.create(Ye.prototype),{constructor:Je,isWebGLMultisampleRenderTarget:!0,copy:function(t){return Ye.prototype.copy.call(this,t),this.samples=t.samples,this}}),Ze.prototype=Object.create(Ye.prototype),Ze.prototype.constructor=Ze,Ze.prototype.isWebGLRenderTargetCube=!0,Qe.prototype=Object.create(qe.prototype),Qe.prototype.constructor=Qe,Qe.prototype.isDataTexture=!0,Object.assign(Ke.prototype,{isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,r=1/0,n=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,c=t.length;s<c;s+=3){var h=t[s],l=t[s+1],u=t[s+2];h<e&&(e=h),l<r&&(r=l),u<n&&(n=u),h>i&&(i=h),l>a&&(a=l),u>o&&(o=u)}return this.min.set(e,r,n),this.max.set(i,a,o),this},setFromBufferAttribute:function(t){for(var e=1/0,r=1/0,n=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,c=t.count;s<c;s++){var h=t.getX(s),l=t.getY(s),u=t.getZ(s);h<e&&(e=h),l<r&&(r=l),u<n&&(n=u),h>i&&(i=h),l>a&&(a=l),u>o&&(o=u)}return this.min.set(e,r,n),this.max.set(i,a,o),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,r=t.length;e<r;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new ze;return function(e,r){var n=t.copy(r).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}}(),setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new ze),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new ze),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(){var t,e,r,n=new ze;function i(i){var a=i.geometry;if(void 0!==a)if(a.isGeometry){var o=a.vertices;for(e=0,r=o.length;e<r;e++)n.copy(o[e]),n.applyMatrix4(i.matrixWorld),t.expandByPoint(n)}else if(a.isBufferGeometry){var s=a.attributes.position;if(void 0!==s)for(e=0,r=s.count;e<r;e++)n.fromBufferAttribute(s,e).applyMatrix4(i.matrixWorld),t.expandByPoint(n)}}return function(e){return t=this,e.updateMatrixWorld(!0),e.traverse(i),this}}(),containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new ze),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:(Fe=new ze,function(t){return this.clampPoint(t.center,Fe),Fe.distanceToSquared(t.center)<=t.radius*t.radius}),intersectsPlane:function(t){var e,r;return t.normal.x>0?(e=t.normal.x*this.min.x,r=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,r=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,r+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,r+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,r+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,r+=t.normal.z*this.min.z),e<=-t.constant&&r>=-t.constant},intersectsTriangle:function(){var t=new ze,e=new ze,r=new ze,n=new ze,i=new ze,a=new ze,o=new ze,s=new ze,c=new ze,h=new ze;function l(n){var i,a;for(i=0,a=n.length-3;i<=a;i+=3){o.fromArray(n,i);var s=c.x*Math.abs(o.x)+c.y*Math.abs(o.y)+c.z*Math.abs(o.z),h=t.dot(o),l=e.dot(o),u=r.dot(o);if(Math.max(-Math.max(h,l,u),Math.min(h,l,u))>s)return!1}return!0}return function(o){if(this.isEmpty())return!1;this.getCenter(s),c.subVectors(this.max,s),t.subVectors(o.a,s),e.subVectors(o.b,s),r.subVectors(o.c,s),n.subVectors(e,t),i.subVectors(r,e),a.subVectors(t,r);var u=[0,-n.z,n.y,0,-i.z,i.y,0,-a.z,a.y,n.z,0,-n.x,i.z,0,-i.x,a.z,0,-a.x,-n.y,n.x,0,-i.y,i.x,0,-a.y,a.x,0];return!!l(u)&&(!!l(u=[1,0,0,0,1,0,0,0,1])&&(h.crossVectors(n,i),l(u=[h.x,h.y,h.z])))}}(),clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new ze),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new ze;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),getBoundingSphere:function(){var t=new ze;return function(e){return void 0===e&&(console.warn("THREE.Box3: .getBoundingSphere() target is now required"),e=new $e),this.getCenter(e.center),e.radius=.5*this.getSize(t).length(),e}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:(Ge=[new ze,new ze,new ze,new ze,new ze,new ze,new ze,new ze],function(t){return this.isEmpty()?this:(Ge[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Ge[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Ge[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Ge[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Ge[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Ge[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Ge[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Ge[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Ge),this)}),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),Object.assign($e.prototype,{set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:(He=new Ke,function(t,e){var r=this.center;void 0!==e?r.copy(e):He.setFromPoints(t).getCenter(r);for(var n=0,i=0,a=t.length;i<a;i++)n=Math.max(n,r.distanceToSquared(t[i]));return this.radius=Math.sqrt(n),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,e){var r=this.center.distanceToSquared(t);return void 0===e&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new ze),e.copy(t),r>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},getBoundingBox:function(t){return void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new Ke),t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}}),Object.assign(tr.prototype,{set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,r,n){return this.normal.set(t,e,r),this.constant=n,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(){var t=new ze,e=new ze;return function(r,n,i){var a=t.subVectors(i,n).cross(e.subVectors(r,n)).normalize();return this.setFromNormalAndCoplanarPoint(a,r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return void 0===e&&(console.warn("THREE.Plane: .projectPoint() target is now required"),e=new ze),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(){var t=new ze;return function(e,r){void 0===r&&(console.warn("THREE.Plane: .intersectLine() target is now required"),r=new ze);var n=e.delta(t),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(e.start)?r.copy(e.start):void 0;var a=-(e.start.dot(this.normal)+this.constant)/i;return a<0||a>1?void 0:r.copy(n).multiplyScalar(a).add(e.start)}}(),intersectsLine:function(t){var e=this.distanceToPoint(t.start),r=this.distanceToPoint(t.end);return e<0&&r>0||r<0&&e>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new ze),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var t=new ze,e=new Ue;return function(r,n){var i=n||e.getNormalMatrix(r),a=this.coplanarPoint(t).applyMatrix4(r),o=this.normal.applyMatrix3(i).normalize();return this.constant=-a.dot(o),this}}(),translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}}),Object.assign(er.prototype,{set:function(t,e,r,n,i,a){var o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(r),o[3].copy(n),o[4].copy(i),o[5].copy(a),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,r=0;r<6;r++)e[r].copy(t.planes[r]);return this},setFromMatrix:function(t){var e=this.planes,r=t.elements,n=r[0],i=r[1],a=r[2],o=r[3],s=r[4],c=r[5],h=r[6],l=r[7],u=r[8],p=r[9],d=r[10],f=r[11],m=r[12],g=r[13],v=r[14],y=r[15];return e[0].setComponents(o-n,l-s,f-u,y-m).normalize(),e[1].setComponents(o+n,l+s,f+u,y+m).normalize(),e[2].setComponents(o+i,l+c,f+p,y+g).normalize(),e[3].setComponents(o-i,l-c,f-p,y-g).normalize(),e[4].setComponents(o-a,l-h,f-d,y-v).normalize(),e[5].setComponents(o+a,l+h,f+d,y+v).normalize(),this},intersectsObject:(ke=new $e,function(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),ke.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(ke)}),intersectsSprite:function(){var t=new $e;return function(e){return t.center.set(0,0,0),t.radius=.7071067811865476,t.applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSphere:function(t){for(var e=this.planes,r=t.center,n=-t.radius,i=0;i<6;i++){if(e[i].distanceToPoint(r)<n)return!1}return!0},intersectsBox:(Ve=new ze,function(t){for(var e=this.planes,r=0;r<6;r++){var n=e[r];if(Ve.x=n.normal.x>0?t.max.x:t.min.x,Ve.y=n.normal.y>0?t.max.y:t.min.y,Ve.z=n.normal.z>0?t.max.z:t.min.z,n.distanceToPoint(Ve)<0)return!1}return!0}),containsPoint:function(t){for(var e=this.planes,r=0;r<6;r++)if(e[r].distanceToPoint(t)<0)return!1;return!0}});var rr={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick( specularColor, dotNV );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent ));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif",lights_pars_begin:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#endif\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\tfloat clearCoatInv = 1.0 - clearCoatDHR;\n\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec3 singleScattering = vec3( 0.0 );\n\t\tvec3 multiScattering = vec3( 0.0 );\n\t\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\t\tvec3 diffuse = material.diffuseColor;\n\t\treflectedLight.indirectSpecular += clearCoatInv * radiance * singleScattering;\n\t\treflectedLight.indirectDiffuse += multiScattering * cosineWeightedIrradiance;\n\t\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n\t#else\n\t\treflectedLight.indirectSpecular += clearCoatInv * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#endif\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, irradiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t#ifdef FLIP_SIDED\n\t\t\tnormal = - normal;\n\t\t#endif\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\tnormal = normalize( normalMatrix * normal );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tuniform mat3 normalMatrix;\n\t#else\n\t\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\t\tvec2 st0 = dFdx( vUv.st );\n\t\t\tvec2 st1 = dFdy( vUv.st );\n\t\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\t\tvec3 N = normalize( surf_norm );\n\t\t\tmat3 tsn = mat3( S, T, N );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy *= normalScale;\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\treturn normalize( tsn * mapN );\n\t\t}\n\t#endif\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"};function nr(t){var e={};for(var r in t)for(var n in e[r]={},t[r]){var i=t[r][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?e[r][n]=i.clone():Array.isArray(i)?e[r][n]=i.slice():e[r][n]=i}return e}function ir(t){for(var e={},r=0;r<t.length;r++){var n=nr(t[r]);for(var i in n)e[i]=n[i]}return e}var ar,or,sr,cr={clone:nr,merge:ir},hr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function lr(t,e,r){return void 0===e&&void 0===r?this.set(t):this.setRGB(t,e,r)}Object.assign(lr.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,r){return this.r=t,this.g=e,this.b=r,this},setHSL:function(){function t(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+6*(e-t)*(2/3-r):t}return function(e,r,n){if(e=Ie.euclideanModulo(e,1),r=Ie.clamp(r,0,1),n=Ie.clamp(n,0,1),0===r)this.r=this.g=this.b=n;else{var i=n<=.5?n*(1+r):n+r-n*r,a=2*n-i;this.r=t(a,i,e+1/3),this.g=t(a,i,e),this.b=t(a,i,e-1/3)}return this}}(),setStyle:function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var r;if(r=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var n,i=r[1],a=r[2];switch(i){case"rgb":case"rgba":if(n=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,e(n[5]),this;if(n=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,e(n[5]),this;break;case"hsl":case"hsla":if(n=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){var o=parseFloat(n[1])/360,s=parseInt(n[2],10)/100,c=parseInt(n[3],10)/100;return e(n[5]),this.setHSL(o,s,c)}}}else if(r=/^\#([A-Fa-f0-9]+)$/.exec(t)){var h,l=(h=r[1]).length;if(3===l)return this.r=parseInt(h.charAt(0)+h.charAt(0),16)/255,this.g=parseInt(h.charAt(1)+h.charAt(1),16)/255,this.b=parseInt(h.charAt(2)+h.charAt(2),16)/255,this;if(6===l)return this.r=parseInt(h.charAt(0)+h.charAt(1),16)/255,this.g=parseInt(h.charAt(2)+h.charAt(3),16)/255,this.b=parseInt(h.charAt(4)+h.charAt(5),16)/255,this}t&&t.length>0&&(void 0!==(h=hr[t])?this.setHex(h):console.warn("THREE.Color: Unknown color "+t));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var r=e>0?1/e:1;return this.r=Math.pow(t.r,r),this.g=Math.pow(t.g,r),this.b=Math.pow(t.b,r),this},convertGammaToLinear:function(t){return this.copyGammaToLinear(this,t),this},convertLinearToGamma:function(t){return this.copyLinearToGamma(this,t),this},copySRGBToLinear:function(){function t(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}return function(e){return this.r=t(e.r),this.g=t(e.g),this.b=t(e.b),this}}(),copyLinearToSRGB:function(){function t(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}return function(e){return this.r=t(e.r),this.g=t(e.g),this.b=t(e.b),this}}(),convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var e,r,n=this.r,i=this.g,a=this.b,o=Math.max(n,i,a),s=Math.min(n,i,a),c=(s+o)/2;if(s===o)e=0,r=0;else{var h=o-s;switch(r=c<=.5?h/(o+s):h/(2-o-s),o){case n:e=(i-a)/h+(i<a?6:0);break;case i:e=(a-n)/h+2;break;case a:e=(n-i)/h+4}e/=6}return t.h=e,t.s=r,t.l=c,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:(sr={},function(t,e,r){return this.getHSL(sr),sr.h+=t,sr.s+=e,sr.l+=r,this.setHSL(sr.h,sr.s,sr.l),this}),add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},lerpHSL:(ar={h:0,s:0,l:0},or={h:0,s:0,l:0},function(t,e){this.getHSL(ar),t.getHSL(or);var r=Ie.lerp(ar.h,or.h,e),n=Ie.lerp(ar.s,or.s,e),i=Ie.lerp(ar.l,or.l,e);return this.setHSL(r,n,i),this}),equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}});var ur,pr={common:{diffuse:{value:new lr(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Ue},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new De(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new lr(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new lr(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new Ue}},sprite:{diffuse:{value:new lr(15658734)},opacity:{value:1},center:{value:new De(.5,.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new Ue}}},dr={basic:{uniforms:ir([pr.common,pr.specularmap,pr.envmap,pr.aomap,pr.lightmap,pr.fog]),vertexShader:rr.meshbasic_vert,fragmentShader:rr.meshbasic_frag},lambert:{uniforms:ir([pr.common,pr.specularmap,pr.envmap,pr.aomap,pr.lightmap,pr.emissivemap,pr.fog,pr.lights,{emissive:{value:new lr(0)}}]),vertexShader:rr.meshlambert_vert,fragmentShader:rr.meshlambert_frag},phong:{uniforms:ir([pr.common,pr.specularmap,pr.envmap,pr.aomap,pr.lightmap,pr.emissivemap,pr.bumpmap,pr.normalmap,pr.displacementmap,pr.gradientmap,pr.fog,pr.lights,{emissive:{value:new lr(0)},specular:{value:new lr(1118481)},shininess:{value:30}}]),vertexShader:rr.meshphong_vert,fragmentShader:rr.meshphong_frag},standard:{uniforms:ir([pr.common,pr.envmap,pr.aomap,pr.lightmap,pr.emissivemap,pr.bumpmap,pr.normalmap,pr.displacementmap,pr.roughnessmap,pr.metalnessmap,pr.fog,pr.lights,{emissive:{value:new lr(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:rr.meshphysical_vert,fragmentShader:rr.meshphysical_frag},matcap:{uniforms:ir([pr.common,pr.bumpmap,pr.normalmap,pr.displacementmap,pr.fog,{matcap:{value:null}}]),vertexShader:rr.meshmatcap_vert,fragmentShader:rr.meshmatcap_frag},points:{uniforms:ir([pr.points,pr.fog]),vertexShader:rr.points_vert,fragmentShader:rr.points_frag},dashed:{uniforms:ir([pr.common,pr.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:rr.linedashed_vert,fragmentShader:rr.linedashed_frag},depth:{uniforms:ir([pr.common,pr.displacementmap]),vertexShader:rr.depth_vert,fragmentShader:rr.depth_frag},normal:{uniforms:ir([pr.common,pr.bumpmap,pr.normalmap,pr.displacementmap,{opacity:{value:1}}]),vertexShader:rr.normal_vert,fragmentShader:rr.normal_frag},sprite:{uniforms:ir([pr.sprite,pr.fog]),vertexShader:rr.sprite_vert,fragmentShader:rr.sprite_frag},background:{uniforms:{uvTransform:{value:new Ue},t2D:{value:null}},vertexShader:rr.background_vert,fragmentShader:rr.background_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:rr.cube_vert,fragmentShader:rr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:rr.equirect_vert,fragmentShader:rr.equirect_frag},distanceRGBA:{uniforms:ir([pr.common,pr.displacementmap,{referencePosition:{value:new ze},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:rr.distanceRGBA_vert,fragmentShader:rr.distanceRGBA_frag},shadow:{uniforms:ir([pr.lights,pr.fog,{color:{value:new lr(0)},opacity:{value:1}}]),vertexShader:rr.shadow_vert,fragmentShader:rr.shadow_frag}};function fr(){var t=null,e=!1,r=null;function n(i,a){!1!==e&&(r(i,a),t.requestAnimationFrame(n))}return{start:function(){!0!==e&&null!==r&&(t.requestAnimationFrame(n),e=!0)},stop:function(){e=!1},setAnimationLoop:function(t){r=t},setContext:function(e){t=e}}}function mr(t){var e=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),e.get(t)},remove:function(r){r.isInterleavedBufferAttribute&&(r=r.data);var n=e.get(r);n&&(t.deleteBuffer(n.buffer),e.delete(r))},update:function(r,n){r.isInterleavedBufferAttribute&&(r=r.data);var i=e.get(r);void 0===i?e.set(r,function(e,r){var n=e.array,i=e.dynamic?35048:35044,a=t.createBuffer();t.bindBuffer(r,a),t.bufferData(r,n,i),e.onUploadCallback();var o=5126;return n instanceof Float32Array?o=5126:n instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):n instanceof Uint16Array?o=5123:n instanceof Int16Array?o=5122:n instanceof Uint32Array?o=5125:n instanceof Int32Array?o=5124:n instanceof Int8Array?o=5120:n instanceof Uint8Array&&(o=5121),{buffer:a,type:o,bytesPerElement:n.BYTES_PER_ELEMENT,version:e.version}}(r,n)):i.version<r.version&&(function(e,r,n){var i=r.array,a=r.updateRange;t.bindBuffer(n,e),!1===r.dynamic?t.bufferData(n,i,35044):-1===a.count?t.bufferSubData(n,0,i):0===a.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(t.bufferSubData(n,a.offset*i.BYTES_PER_ELEMENT,i.subarray(a.offset,a.offset+a.count)),a.count=-1)}(i.buffer,r,n),i.version=r.version)}}}function gr(t,e,r,n,i,a){this.a=t,this.b=e,this.c=r,this.normal=n&&n.isVector3?n:new ze,this.vertexNormals=Array.isArray(n)?n:[],this.color=i&&i.isColor?i:new lr,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==a?a:0}function vr(t,e,r,n){this._x=t||0,this._y=e||0,this._z=r||0,this._order=n||vr.DefaultOrder}function yr(){this.mask=1}dr.physical={uniforms:ir([dr.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:rr.meshphysical_vert,fragmentShader:rr.meshphysical_frag},Object.assign(gr.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,r=t.vertexNormals.length;e<r;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(e=0,r=t.vertexColors.length;e<r;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}}),vr.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],vr.DefaultOrder="XYZ",Object.defineProperties(vr.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this.onChangeCallback()}}}),Object.assign(vr.prototype,{isEuler:!0,set:function(t,e,r,n){return this._x=t,this._y=e,this._z=r,this._order=n||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,e,r){var n=Ie.clamp,i=t.elements,a=i[0],o=i[4],s=i[8],c=i[1],h=i[5],l=i[9],u=i[2],p=i[6],d=i[10];return"XYZ"===(e=e||this._order)?(this._y=Math.asin(n(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-l,d),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(p,h),this._z=0)):"YXZ"===e?(this._x=Math.asin(-n(l,-1,1)),Math.abs(l)<.99999?(this._y=Math.atan2(s,d),this._z=Math.atan2(c,h)):(this._y=Math.atan2(-u,a),this._z=0)):"ZXY"===e?(this._x=Math.asin(n(p,-1,1)),Math.abs(p)<.99999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-o,h)):(this._y=0,this._z=Math.atan2(c,a))):"ZYX"===e?(this._y=Math.asin(-n(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(p,d),this._z=Math.atan2(c,a)):(this._x=0,this._z=Math.atan2(-o,h))):"YZX"===e?(this._z=Math.asin(n(c,-1,1)),Math.abs(c)<.99999?(this._x=Math.atan2(-l,h),this._y=Math.atan2(-u,a)):(this._x=0,this._y=Math.atan2(s,d))):"XZY"===e?(this._z=Math.asin(-n(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(p,h),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-l,d),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,!1!==r&&this.onChangeCallback(),this},setFromQuaternion:function(){var t=new Be;return function(e,r,n){return t.makeRotationFromQuaternion(e),this.setFromRotationMatrix(t,r,n)}}(),setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:(ur=new Ne,function(t){return ur.setFromEuler(this),this.setFromQuaternion(ur,t)}),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new ze(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}),Object.assign(yr.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask|=1<<t|0},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},test:function(t){return 0!=(this.mask&t.mask)}});var xr,br,wr,_r,Mr=0;function Er(){Object.defineProperty(this,"id",{value:Mr++}),this.uuid=Ie.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Er.DefaultUp.clone();var t=new ze,e=new vr,r=new Ne,n=new ze(1,1,1);e.onChange(function(){r.setFromEuler(e,!1)}),r.onChange(function(){e.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new Be},normalMatrix:{value:new Ue}}),this.matrix=new Be,this.matrixWorld=new Be,this.matrixAutoUpdate=Er.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new yr,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}Er.DefaultUp=new ze(0,1,0),Er.DefaultMatrixAutoUpdate=!0,Er.prototype=Object.assign(Object.create(e.prototype),{constructor:Er,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(t){this.matrix.multiplyMatrices(t,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:(_r=new Ne,function(t,e){return _r.setFromAxisAngle(t,e),this.quaternion.multiply(_r),this}),rotateOnWorldAxis:function(){var t=new Ne;return function(e,r){return t.setFromAxisAngle(e,r),this.quaternion.premultiply(t),this}}(),rotateX:function(){var t=new ze(1,0,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateY:function(){var t=new ze(0,1,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateZ:function(){var t=new ze(0,0,1);return function(e){return this.rotateOnAxis(t,e)}}(),translateOnAxis:function(){var t=new ze;return function(e,r){return t.copy(e).applyQuaternion(this.quaternion),this.position.add(t.multiplyScalar(r)),this}}(),translateX:function(){var t=new ze(1,0,0);return function(e){return this.translateOnAxis(t,e)}}(),translateY:function(){var t=new ze(0,1,0);return function(e){return this.translateOnAxis(t,e)}}(),translateZ:function(){var t=new ze(0,0,1);return function(e){return this.translateOnAxis(t,e)}}(),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:(wr=new Be,function(t){return t.applyMatrix4(wr.getInverse(this.matrixWorld))}),lookAt:function(){var t=new Ne,e=new Be,r=new ze,n=new ze;return function(i,a,o){i.isVector3?r.copy(i):r.set(i,a,o);var s=this.parent;this.updateWorldMatrix(!0,!1),n.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?e.lookAt(n,r,this.up):e.lookAt(r,n,this.up),this.quaternion.setFromRotationMatrix(e),s&&(e.extractRotation(s.matrixWorld),t.setFromRotationMatrix(e),this.quaternion.premultiply(t.inverse()))}}(),add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}var r=this.children.indexOf(t);return-1!==r&&(t.parent=null,t.dispatchEvent({type:"removed"}),this.children.splice(r,1)),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var r=0,n=this.children.length;r<n;r++){var i=this.children[r].getObjectByProperty(t,e);if(void 0!==i)return i}},getWorldPosition:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new ze),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:(xr=new ze,br=new ze,function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),t=new Ne),this.updateMatrixWorld(!0),this.matrixWorld.decompose(xr,t,br),t}),getWorldScale:function(){var t=new ze,e=new Ne;return function(r){return void 0===r&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),r=new ze),this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,e,r),r}}(),getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new ze),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);for(var e=this.children,r=0,n=e.length;r<n;r++)e[r].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,r=0,n=e.length;r<n;r++)e[r].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,r=0,n=e.length;r<n;r++)e[r].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){var r=this.parent;if(!0===t&&null!==r&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e)for(var n=this.children,i=0,a=n.length;i<a;i++)n[i].updateWorldMatrix(!1,!0)},toJSON:function(t){var e=void 0===t||"string"==typeof t,r={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var n={};function i(e,r){return void 0===e[r.uuid]&&(e[r.uuid]=r.toJSON(t)),r.uuid}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),!0===this.castShadow&&(n.castShadow=!0),!0===this.receiveShadow&&(n.receiveShadow=!0),!1===this.visible&&(n.visible=!1),!1===this.frustumCulled&&(n.frustumCulled=!1),0!==this.renderOrder&&(n.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),n.layers=this.layers.mask,n.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(n.matrixAutoUpdate=!1),this.isMesh&&this.drawMode!==xe&&(n.drawMode=this.drawMode),this.isMesh||this.isLine||this.isPoints){n.geometry=i(t.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var o=a.shapes;if(Array.isArray(o))for(var s=0,c=o.length;s<c;s++){var h=o[s];i(t.shapes,h)}else i(t.shapes,o)}}if(void 0!==this.material)if(Array.isArray(this.material)){var l=[];for(s=0,c=this.material.length;s<c;s++)l.push(i(t.materials,this.material[s]));n.material=l}else n.material=i(t.materials,this.material);if(this.children.length>0){n.children=[];for(s=0;s<this.children.length;s++)n.children.push(this.children[s].toJSON(t).object)}if(e){var u=m(t.geometries),p=m(t.materials),d=m(t.textures),f=m(t.images);o=m(t.shapes);u.length>0&&(r.geometries=u),p.length>0&&(r.materials=p),d.length>0&&(r.textures=d),f.length>0&&(r.images=f),o.length>0&&(r.shapes=o)}return r.object=n,r;function m(t){var e=[];for(var r in t){var n=t[r];delete n.metadata,e.push(n)}return e}},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var r=0;r<t.children.length;r++){var n=t.children[r];this.add(n.clone())}return this}});var Sr,Tr,Ar=0;function Lr(){Object.defineProperty(this,"id",{value:Ar+=2}),this.uuid=Ie.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function Pr(t,e,r){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===r,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Rr(t,e,r){Pr.call(this,new Int8Array(t),e,r)}function Cr(t,e,r){Pr.call(this,new Uint8Array(t),e,r)}function Or(t,e,r){Pr.call(this,new Uint8ClampedArray(t),e,r)}function Ir(t,e,r){Pr.call(this,new Int16Array(t),e,r)}function Dr(t,e,r){Pr.call(this,new Uint16Array(t),e,r)}function Br(t,e,r){Pr.call(this,new Int32Array(t),e,r)}function Nr(t,e,r){Pr.call(this,new Uint32Array(t),e,r)}function zr(t,e,r){Pr.call(this,new Float32Array(t),e,r)}function Ur(t,e,r){Pr.call(this,new Float64Array(t),e,r)}function Gr(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Fr(t){if(0===t.length)return-1/0;for(var e=t[0],r=1,n=t.length;r<n;++r)t[r]>e&&(e=t[r]);return e}Lr.prototype=Object.assign(Object.create(e.prototype),{constructor:Lr,isGeometry:!0,applyMatrix:function(t){for(var e=(new Ue).getNormalMatrix(t),r=0,n=this.vertices.length;r<n;r++){this.vertices[r].applyMatrix4(t)}for(r=0,n=this.faces.length;r<n;r++){var i=this.faces[r];i.normal.applyMatrix3(e).normalize();for(var a=0,o=i.vertexNormals.length;a<o;a++)i.vertexNormals[a].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var t=new Be;return function(e){return t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t=new Be;return function(e){return t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t=new Be;return function(e){return t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t=new Be;return function(e,r,n){return t.makeTranslation(e,r,n),this.applyMatrix(t),this}}(),scale:function(){var t=new Be;return function(e,r,n){return t.makeScale(e,r,n),this.applyMatrix(t),this}}(),lookAt:(Tr=new Er,function(t){Tr.lookAt(t),Tr.updateMatrix(),this.applyMatrix(Tr.matrix)}),fromBufferGeometry:function(t){var e=this,r=null!==t.index?t.index.array:void 0,n=t.attributes,i=n.position.array,a=void 0!==n.normal?n.normal.array:void 0,o=void 0!==n.color?n.color.array:void 0,s=void 0!==n.uv?n.uv.array:void 0,c=void 0!==n.uv2?n.uv2.array:void 0;void 0!==c&&(this.faceVertexUvs[1]=[]);for(var h=0,l=0;h<i.length;h+=3,l+=2)e.vertices.push((new ze).fromArray(i,h)),void 0!==o&&e.colors.push((new lr).fromArray(o,h));function u(t,r,n,i){var h=void 0===o?[]:[e.colors[t].clone(),e.colors[r].clone(),e.colors[n].clone()],l=new gr(t,r,n,void 0===a?[]:[(new ze).fromArray(a,3*t),(new ze).fromArray(a,3*r),(new ze).fromArray(a,3*n)],h,i);e.faces.push(l),void 0!==s&&e.faceVertexUvs[0].push([(new De).fromArray(s,2*t),(new De).fromArray(s,2*r),(new De).fromArray(s,2*n)]),void 0!==c&&e.faceVertexUvs[1].push([(new De).fromArray(c,2*t),(new De).fromArray(c,2*r),(new De).fromArray(c,2*n)])}var p=t.groups;if(p.length>0)for(h=0;h<p.length;h++)for(var d=p[h],f=d.start,m=(l=f,f+d.count);l<m;l+=3)void 0!==r?u(r[l],r[l+1],r[l+2],d.materialIndex):u(l,l+1,l+2,d.materialIndex);else if(void 0!==r)for(h=0;h<r.length;h+=3)u(r[h],r[h+1],r[h+2]);else for(h=0;h<i.length/3;h+=3)u(h,h+1,h+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:(Sr=new ze,function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Sr).negate(),this.translate(Sr.x,Sr.y,Sr.z),this}),normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,r=0===e?1:1/e,n=new Be;return n.set(r,0,0,-r*t.x,0,r,0,-r*t.y,0,0,r,-r*t.z,0,0,0,1),this.applyMatrix(n),this},computeFaceNormals:function(){for(var t=new ze,e=new ze,r=0,n=this.faces.length;r<n;r++){var i=this.faces[r],a=this.vertices[i.a],o=this.vertices[i.b],s=this.vertices[i.c];t.subVectors(s,o),e.subVectors(a,o),t.cross(e),t.normalize(),i.normal.copy(t)}},computeVertexNormals:function(t){var e,r,n,i,a,o;for(void 0===t&&(t=!0),o=new Array(this.vertices.length),e=0,r=this.vertices.length;e<r;e++)o[e]=new ze;if(t){var s,c,h,l=new ze,u=new ze;for(n=0,i=this.faces.length;n<i;n++)a=this.faces[n],s=this.vertices[a.a],c=this.vertices[a.b],h=this.vertices[a.c],l.subVectors(h,c),u.subVectors(s,c),l.cross(u),o[a.a].add(l),o[a.b].add(l),o[a.c].add(l)}else for(this.computeFaceNormals(),n=0,i=this.faces.length;n<i;n++)o[(a=this.faces[n]).a].add(a.normal),o[a.b].add(a.normal),o[a.c].add(a.normal);for(e=0,r=this.vertices.length;e<r;e++)o[e].normalize();for(n=0,i=this.faces.length;n<i;n++){var p=(a=this.faces[n]).vertexNormals;3===p.length?(p[0].copy(o[a.a]),p[1].copy(o[a.b]),p[2].copy(o[a.c])):(p[0]=o[a.a].clone(),p[1]=o[a.b].clone(),p[2]=o[a.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var t,e,r;for(this.computeFaceNormals(),t=0,e=this.faces.length;t<e;t++){var n=(r=this.faces[t]).vertexNormals;3===n.length?(n[0].copy(r.normal),n[1].copy(r.normal),n[2].copy(r.normal)):(n[0]=r.normal.clone(),n[1]=r.normal.clone(),n[2]=r.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,r,n,i;for(r=0,n=this.faces.length;r<n;r++)for((i=this.faces[r]).__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),t=0,e=i.vertexNormals.length;t<e;t++)i.__originalVertexNormals[t]?i.__originalVertexNormals[t].copy(i.vertexNormals[t]):i.__originalVertexNormals[t]=i.vertexNormals[t].clone();var a=new Lr;for(a.faces=this.faces,t=0,e=this.morphTargets.length;t<e;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];var o=this.morphNormals[t].faceNormals,s=this.morphNormals[t].vertexNormals;for(r=0,n=this.faces.length;r<n;r++)c=new ze,h={a:new ze,b:new ze,c:new ze},o.push(c),s.push(h)}var c,h,l=this.morphNormals[t];for(a.vertices=this.morphTargets[t].vertices,a.computeFaceNormals(),a.computeVertexNormals(),r=0,n=this.faces.length;r<n;r++)i=this.faces[r],c=l.faceNormals[r],h=l.vertexNormals[r],c.copy(i.normal),h.a.copy(i.vertexNormals[0]),h.b.copy(i.vertexNormals[1]),h.c.copy(i.vertexNormals[2])}for(r=0,n=this.faces.length;r<n;r++)(i=this.faces[r]).normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Ke),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new $e),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,r){if(t&&t.isGeometry){var n,i=this.vertices.length,a=this.vertices,o=t.vertices,s=this.faces,c=t.faces,h=this.faceVertexUvs[0],l=t.faceVertexUvs[0],u=this.colors,p=t.colors;void 0===r&&(r=0),void 0!==e&&(n=(new Ue).getNormalMatrix(e));for(var d=0,f=o.length;d<f;d++){var m=o[d].clone();void 0!==e&&m.applyMatrix4(e),a.push(m)}for(d=0,f=p.length;d<f;d++)u.push(p[d].clone());for(d=0,f=c.length;d<f;d++){var g,v,y,x=c[d],b=x.vertexNormals,w=x.vertexColors;(g=new gr(x.a+i,x.b+i,x.c+i)).normal.copy(x.normal),void 0!==n&&g.normal.applyMatrix3(n).normalize();for(var _=0,M=b.length;_<M;_++)v=b[_].clone(),void 0!==n&&v.applyMatrix3(n).normalize(),g.vertexNormals.push(v);g.color.copy(x.color);for(_=0,M=w.length;_<M;_++)y=w[_],g.vertexColors.push(y.clone());g.materialIndex=x.materialIndex+r,s.push(g)}for(d=0,f=l.length;d<f;d++){var E=l[d],S=[];if(void 0!==E){for(_=0,M=E.length;_<M;_++)S.push(E[_].clone());h.push(S)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t)},mergeMesh:function(t){t&&t.isMesh?(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t)},mergeVertices:function(){var t,e,r,n,i,a,o,s,c={},h=[],l=[],u=Math.pow(10,4);for(r=0,n=this.vertices.length;r<n;r++)t=this.vertices[r],void 0===c[e=Math.round(t.x*u)+"_"+Math.round(t.y*u)+"_"+Math.round(t.z*u)]?(c[e]=r,h.push(this.vertices[r]),l[r]=h.length-1):l[r]=l[c[e]];var p=[];for(r=0,n=this.faces.length;r<n;r++){(i=this.faces[r]).a=l[i.a],i.b=l[i.b],i.c=l[i.c],a=[i.a,i.b,i.c];for(var d=0;d<3;d++)if(a[d]===a[(d+1)%3]){p.push(r);break}}for(r=p.length-1;r>=0;r--){var f=p[r];for(this.faces.splice(f,1),o=0,s=this.faceVertexUvs.length;o<s;o++)this.faceVertexUvs[o].splice(f,1)}var m=this.vertices.length-h.length;return this.vertices=h,m},setFromPoints:function(t){this.vertices=[];for(var e=0,r=t.length;e<r;e++){var n=t[e];this.vertices.push(new ze(n.x,n.y,n.z||0))}return this},sortFacesByMaterialIndex:function(){for(var t=this.faces,e=t.length,r=0;r<e;r++)t[r]._id=r;t.sort(function(t,e){return t.materialIndex-e.materialIndex});var n,i,a=this.faceVertexUvs[0],o=this.faceVertexUvs[1];a&&a.length===e&&(n=[]),o&&o.length===e&&(i=[]);for(r=0;r<e;r++){var s=t[r]._id;n&&n.push(a[s]),i&&i.push(o[s])}n&&(this.faceVertexUvs[0]=n),i&&(this.faceVertexUvs[1]=i)},toJSON:function(){var t={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(var r in e)void 0!==e[r]&&(t[r]=e[r]);return t}for(var n=[],i=0;i<this.vertices.length;i++){var a=this.vertices[i];n.push(a.x,a.y,a.z)}var o=[],s=[],c={},h=[],l={},u=[],p={};for(i=0;i<this.faces.length;i++){var d=this.faces[i],f=void 0!==this.faceVertexUvs[0][i],m=d.normal.length()>0,g=d.vertexNormals.length>0,v=1!==d.color.r||1!==d.color.g||1!==d.color.b,y=d.vertexColors.length>0,x=0;if(x=M(x,0,0),x=M(x,1,!0),x=M(x,2,!1),x=M(x,3,f),x=M(x,4,m),x=M(x,5,g),x=M(x,6,v),x=M(x,7,y),o.push(x),o.push(d.a,d.b,d.c),o.push(d.materialIndex),f){var b=this.faceVertexUvs[0][i];o.push(T(b[0]),T(b[1]),T(b[2]))}if(m&&o.push(E(d.normal)),g){var w=d.vertexNormals;o.push(E(w[0]),E(w[1]),E(w[2]))}if(v&&o.push(S(d.color)),y){var _=d.vertexColors;o.push(S(_[0]),S(_[1]),S(_[2]))}}function M(t,e,r){return r?t|1<<e:t&~(1<<e)}function E(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==c[e]?c[e]:(c[e]=s.length/3,s.push(t.x,t.y,t.z),c[e])}function S(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==l[e]?l[e]:(l[e]=h.length,h.push(t.getHex()),l[e])}function T(t){var e=t.x.toString()+t.y.toString();return void 0!==p[e]?p[e]:(p[e]=u.length/2,u.push(t.x,t.y),p[e])}return t.data={},t.data.vertices=n,t.data.normals=s,h.length>0&&(t.data.colors=h),u.length>0&&(t.data.uvs=[u]),t.data.faces=o,t},clone:function(){return(new Lr).copy(this)},copy:function(t){var e,r,n,i,a,o;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var s=t.vertices;for(e=0,r=s.length;e<r;e++)this.vertices.push(s[e].clone());var c=t.colors;for(e=0,r=c.length;e<r;e++)this.colors.push(c[e].clone());var h=t.faces;for(e=0,r=h.length;e<r;e++)this.faces.push(h[e].clone());for(e=0,r=t.faceVertexUvs.length;e<r;e++){var l=t.faceVertexUvs[e];for(void 0===this.faceVertexUvs[e]&&(this.faceVertexUvs[e]=[]),n=0,i=l.length;n<i;n++){var u=l[n],p=[];for(a=0,o=u.length;a<o;a++){var d=u[a];p.push(d.clone())}this.faceVertexUvs[e].push(p)}}var f=t.morphTargets;for(e=0,r=f.length;e<r;e++){var m={};if(m.name=f[e].name,void 0!==f[e].vertices)for(m.vertices=[],n=0,i=f[e].vertices.length;n<i;n++)m.vertices.push(f[e].vertices[n].clone());if(void 0!==f[e].normals)for(m.normals=[],n=0,i=f[e].normals.length;n<i;n++)m.normals.push(f[e].normals[n].clone());this.morphTargets.push(m)}var g=t.morphNormals;for(e=0,r=g.length;e<r;e++){var v={};if(void 0!==g[e].vertexNormals)for(v.vertexNormals=[],n=0,i=g[e].vertexNormals.length;n<i;n++){var y=g[e].vertexNormals[n],x={};x.a=y.a.clone(),x.b=y.b.clone(),x.c=y.c.clone(),v.vertexNormals.push(x)}if(void 0!==g[e].faceNormals)for(v.faceNormals=[],n=0,i=g[e].faceNormals.length;n<i;n++)v.faceNormals.push(g[e].faceNormals[n].clone());this.morphNormals.push(v)}var b=t.skinWeights;for(e=0,r=b.length;e<r;e++)this.skinWeights.push(b[e].clone());var w=t.skinIndices;for(e=0,r=w.length;e<r;e++)this.skinIndices.push(w[e].clone());var _=t.lineDistances;for(e=0,r=_.length;e<r;e++)this.lineDistances.push(_[e]);var M=t.boundingBox;null!==M&&(this.boundingBox=M.clone());var E=t.boundingSphere;return null!==E&&(this.boundingSphere=E.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(Pr.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Pr.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==t?t.length/this.itemSize:0,this.array=t,this},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.dynamic=t.dynamic,this},copyAt:function(t,e,r){t*=this.itemSize,r*=e.itemSize;for(var n=0,i=this.itemSize;n<i;n++)this.array[t+n]=e.array[r+n];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,r=0,n=0,i=t.length;n<i;n++){var a=t[n];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n),a=new lr),e[r++]=a.r,e[r++]=a.g,e[r++]=a.b}return this},copyVector2sArray:function(t){for(var e=this.array,r=0,n=0,i=t.length;n<i;n++){var a=t[n];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",n),a=new De),e[r++]=a.x,e[r++]=a.y}return this},copyVector3sArray:function(t){for(var e=this.array,r=0,n=0,i=t.length;n<i;n++){var a=t[n];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n),a=new ze),e[r++]=a.x,e[r++]=a.y,e[r++]=a.z}return this},copyVector4sArray:function(t){for(var e=this.array,r=0,n=0,i=t.length;n<i;n++){var a=t[n];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n),a=new Xe),e[r++]=a.x,e[r++]=a.y,e[r++]=a.z,e[r++]=a.w}return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=r,this},setXYZ:function(t,e,r,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=r,this.array[t+2]=n,this},setXYZW:function(t,e,r,n,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=r,this.array[t+2]=n,this.array[t+3]=i,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),Rr.prototype=Object.create(Pr.prototype),Rr.prototype.constructor=Rr,Cr.prototype=Object.create(Pr.prototype),Cr.prototype.constructor=Cr,Or.prototype=Object.create(Pr.prototype),Or.prototype.constructor=Or,Ir.prototype=Object.create(Pr.prototype),Ir.prototype.constructor=Ir,Dr.prototype=Object.create(Pr.prototype),Dr.prototype.constructor=Dr,Br.prototype=Object.create(Pr.prototype),Br.prototype.constructor=Br,Nr.prototype=Object.create(Pr.prototype),Nr.prototype.constructor=Nr,zr.prototype=Object.create(Pr.prototype),zr.prototype.constructor=zr,Ur.prototype=Object.create(Pr.prototype),Ur.prototype.constructor=Ur,Object.assign(Gr.prototype,{computeGroups:function(t){for(var e,r=[],n=void 0,i=t.faces,a=0;a<i.length;a++){var o=i[a];o.materialIndex!==n&&(n=o.materialIndex,void 0!==e&&(e.count=3*a-e.start,r.push(e)),e={start:3*a,materialIndex:n})}void 0!==e&&(e.count=3*a-e.start,r.push(e)),this.groups=r},fromGeometry:function(t){var e,r=t.faces,n=t.vertices,i=t.faceVertexUvs,a=i[0]&&i[0].length>0,o=i[1]&&i[1].length>0,s=t.morphTargets,c=s.length;if(c>0){e=[];for(var h=0;h<c;h++)e[h]={name:s[h].name,data:[]};this.morphTargets.position=e}var l,u=t.morphNormals,p=u.length;if(p>0){l=[];for(h=0;h<p;h++)l[h]={name:u[h].name,data:[]};this.morphTargets.normal=l}var d=t.skinIndices,f=t.skinWeights,m=d.length===n.length,g=f.length===n.length;n.length>0&&0===r.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(h=0;h<r.length;h++){var v=r[h];this.vertices.push(n[v.a],n[v.b],n[v.c]);var y=v.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var x=v.normal;this.normals.push(x,x,x)}var b,w=v.vertexColors;if(3===w.length)this.colors.push(w[0],w[1],w[2]);else{var _=v.color;this.colors.push(_,_,_)}if(!0===a)void 0!==(b=i[0][h])?this.uvs.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",h),this.uvs.push(new De,new De,new De));if(!0===o)void 0!==(b=i[1][h])?this.uvs2.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",h),this.uvs2.push(new De,new De,new De));for(var M=0;M<c;M++){var E=s[M].vertices;e[M].data.push(E[v.a],E[v.b],E[v.c])}for(M=0;M<p;M++){var S=u[M].vertexNormals[h];l[M].data.push(S.a,S.b,S.c)}m&&this.skinIndices.push(d[v.a],d[v.b],d[v.c]),g&&this.skinWeights.push(f[v.a],f[v.b],f[v.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this}});var Hr=1;function Vr(){Object.defineProperty(this,"id",{value:Hr+=2}),this.uuid=Ie.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}function kr(t,e,r,n,i,a){Lr.call(this),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:r,widthSegments:n,heightSegments:i,depthSegments:a},this.fromBufferGeometry(new jr(t,e,r,n,i,a)),this.mergeVertices()}function jr(t,e,r,n,i,a){Vr.call(this),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:r,widthSegments:n,heightSegments:i,depthSegments:a};var o=this;t=t||1,e=e||1,r=r||1,n=Math.floor(n)||1,i=Math.floor(i)||1,a=Math.floor(a)||1;var s=[],c=[],h=[],l=[],u=0,p=0;function d(t,e,r,n,i,a,d,f,m,g,v){var y,x,b=a/m,w=d/g,_=a/2,M=d/2,E=f/2,S=m+1,T=g+1,A=0,L=0,P=new ze;for(x=0;x<T;x++){var R=x*w-M;for(y=0;y<S;y++){var C=y*b-_;P[t]=C*n,P[e]=R*i,P[r]=E,c.push(P.x,P.y,P.z),P[t]=0,P[e]=0,P[r]=f>0?1:-1,h.push(P.x,P.y,P.z),l.push(y/m),l.push(1-x/g),A+=1}}for(x=0;x<g;x++)for(y=0;y<m;y++){var O=u+y+S*x,I=u+y+S*(x+1),D=u+(y+1)+S*(x+1),B=u+(y+1)+S*x;s.push(O,I,B),s.push(I,D,B),L+=6}o.addGroup(p,L,v),p+=L,u+=A}d("z","y","x",-1,-1,r,e,t,a,i,0),d("z","y","x",1,-1,r,e,-t,a,i,1),d("x","z","y",1,1,t,r,e,n,a,2),d("x","z","y",1,-1,t,r,-e,n,a,3),d("x","y","z",1,-1,t,e,r,n,i,4),d("x","y","z",-1,-1,t,e,-r,n,i,5),this.setIndex(s),this.addAttribute("position",new zr(c,3)),this.addAttribute("normal",new zr(h,3)),this.addAttribute("uv",new zr(l,2))}function Wr(t,e,r,n){Lr.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:r,heightSegments:n},this.fromBufferGeometry(new qr(t,e,r,n)),this.mergeVertices()}function qr(t,e,r,n){Vr.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:r,heightSegments:n};var i,a,o=(t=t||1)/2,s=(e=e||1)/2,c=Math.floor(r)||1,h=Math.floor(n)||1,l=c+1,u=h+1,p=t/c,d=e/h,f=[],m=[],g=[],v=[];for(a=0;a<u;a++){var y=a*d-s;for(i=0;i<l;i++){var x=i*p-o;m.push(x,-y,0),g.push(0,0,1),v.push(i/c),v.push(1-a/h)}}for(a=0;a<h;a++)for(i=0;i<c;i++){var b=i+l*a,w=i+l*(a+1),_=i+1+l*(a+1),M=i+1+l*a;f.push(b,w,M),f.push(w,_,M)}this.setIndex(f),this.addAttribute("position",new zr(m,3)),this.addAttribute("normal",new zr(g,3)),this.addAttribute("uv",new zr(v,2))}Vr.prototype=Object.assign(Object.create(e.prototype),{constructor:Vr,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(Fr(t)>65535?Nr:Dr)(t,1):this.index=t},addAttribute:function(t,e){return e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):(this.attributes[t]=e,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(t,new Pr(arguments[1],arguments[2])))},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,r){this.groups.push({start:t,count:e,materialIndex:void 0!==r?r:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix:function(t){var e=this.attributes.position;void 0!==e&&(t.applyToBufferAttribute(e),e.needsUpdate=!0);var r=this.attributes.normal;void 0!==r&&((new Ue).getNormalMatrix(t).applyToBufferAttribute(r),r.needsUpdate=!0);return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var t=new Be;return function(e){return t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t=new Be;return function(e){return t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t=new Be;return function(e){return t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t=new Be;return function(e,r,n){return t.makeTranslation(e,r,n),this.applyMatrix(t),this}}(),scale:function(){var t=new Be;return function(e,r,n){return t.makeScale(e,r,n),this.applyMatrix(t),this}}(),lookAt:function(){var t=new Er;return function(e){t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),center:function(){var t=new ze;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(t).negate(),this.translate(t.x,t.y,t.z),this}}(),setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){var r=new zr(3*e.vertices.length,3),n=new zr(3*e.colors.length,3);if(this.addAttribute("position",r.copyVector3sArray(e.vertices)),this.addAttribute("color",n.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var i=new zr(e.lineDistances.length,1);this.addAttribute("lineDistance",i.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){for(var e=[],r=0,n=t.length;r<n;r++){var i=t[r];e.push(i.x,i.y,i.z||0)}return this.addAttribute("position",new zr(e,3)),this},updateFromObject:function(t){var e,r=t.geometry;if(t.isMesh){var n=r.__directGeometry;if(!0===r.elementsNeedUpdate&&(n=void 0,r.elementsNeedUpdate=!1),void 0===n)return this.fromGeometry(r);n.verticesNeedUpdate=r.verticesNeedUpdate,n.normalsNeedUpdate=r.normalsNeedUpdate,n.colorsNeedUpdate=r.colorsNeedUpdate,n.uvsNeedUpdate=r.uvsNeedUpdate,n.groupsNeedUpdate=r.groupsNeedUpdate,r.verticesNeedUpdate=!1,r.normalsNeedUpdate=!1,r.colorsNeedUpdate=!1,r.uvsNeedUpdate=!1,r.groupsNeedUpdate=!1,r=n}return!0===r.verticesNeedUpdate&&(void 0!==(e=this.attributes.position)&&(e.copyVector3sArray(r.vertices),e.needsUpdate=!0),r.verticesNeedUpdate=!1),!0===r.normalsNeedUpdate&&(void 0!==(e=this.attributes.normal)&&(e.copyVector3sArray(r.normals),e.needsUpdate=!0),r.normalsNeedUpdate=!1),!0===r.colorsNeedUpdate&&(void 0!==(e=this.attributes.color)&&(e.copyColorsArray(r.colors),e.needsUpdate=!0),r.colorsNeedUpdate=!1),r.uvsNeedUpdate&&(void 0!==(e=this.attributes.uv)&&(e.copyVector2sArray(r.uvs),e.needsUpdate=!0),r.uvsNeedUpdate=!1),r.lineDistancesNeedUpdate&&(void 0!==(e=this.attributes.lineDistance)&&(e.copyArray(r.lineDistances),e.needsUpdate=!0),r.lineDistancesNeedUpdate=!1),r.groupsNeedUpdate&&(r.computeGroups(t.geometry),this.groups=r.groups,r.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new Gr).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);if(this.addAttribute("position",new Pr(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){var r=new Float32Array(3*t.normals.length);this.addAttribute("normal",new Pr(r,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var n=new Float32Array(3*t.colors.length);this.addAttribute("color",new Pr(n,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var i=new Float32Array(2*t.uvs.length);this.addAttribute("uv",new Pr(i,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var a=new Float32Array(2*t.uvs2.length);this.addAttribute("uv2",new Pr(a,2).copyVector2sArray(t.uvs2))}for(var o in this.groups=t.groups,t.morphTargets){for(var s=[],c=t.morphTargets[o],h=0,l=c.length;h<l;h++){var u=c[h],p=new zr(3*u.data.length,3);p.name=u.name,s.push(p.copyVector3sArray(u.data))}this.morphAttributes[o]=s}if(t.skinIndices.length>0){var d=new zr(4*t.skinIndices.length,4);this.addAttribute("skinIndex",d.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var f=new zr(4*t.skinWeights.length,4);this.addAttribute("skinWeight",f.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Ke);var t=this.attributes.position;void 0!==t?this.boundingBox.setFromBufferAttribute(t):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var t=new Ke,e=new ze;return function(){null===this.boundingSphere&&(this.boundingSphere=new $e);var r=this.attributes.position;if(r){var n=this.boundingSphere.center;t.setFromBufferAttribute(r),t.getCenter(n);for(var i=0,a=0,o=r.count;a<o;a++)e.x=r.getX(a),e.y=r.getY(a),e.z=r.getZ(a),i=Math.max(i,n.distanceToSquared(e));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes;if(e.position){var r=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new Pr(new Float32Array(r.length),3));else for(var n=e.normal.array,i=0,a=n.length;i<a;i++)n[i]=0;var o,s,c,h=e.normal.array,l=new ze,u=new ze,p=new ze,d=new ze,f=new ze;if(t){var m=t.array;for(i=0,a=t.count;i<a;i+=3)o=3*m[i+0],s=3*m[i+1],c=3*m[i+2],l.fromArray(r,o),u.fromArray(r,s),p.fromArray(r,c),d.subVectors(p,u),f.subVectors(l,u),d.cross(f),h[o]+=d.x,h[o+1]+=d.y,h[o+2]+=d.z,h[s]+=d.x,h[s+1]+=d.y,h[s+2]+=d.z,h[c]+=d.x,h[c+1]+=d.y,h[c+2]+=d.z}else for(i=0,a=r.length;i<a;i+=9)l.fromArray(r,i),u.fromArray(r,i+3),p.fromArray(r,i+6),d.subVectors(p,u),f.subVectors(l,u),d.cross(f),h[i]=d.x,h[i+1]=d.y,h[i+2]=d.z,h[i+3]=d.x,h[i+4]=d.y,h[i+5]=d.z,h[i+6]=d.x,h[i+7]=d.y,h[i+8]=d.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if(t&&t.isBufferGeometry){void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var r=this.attributes;for(var n in r)if(void 0!==t.attributes[n])for(var i=r[n].array,a=t.attributes[n],o=a.array,s=0,c=a.itemSize*e;s<o.length;s++,c++)i[c]=o[s];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t)},normalizeNormals:function(){var t=new ze;return function(){for(var e=this.attributes.normal,r=0,n=e.count;r<n;r++)t.x=e.getX(r),t.y=e.getY(r),t.z=e.getZ(r),t.normalize(),e.setXYZ(r,t.x,t.y,t.z)}}(),toNonIndexed:function(){function t(t,e){for(var r=t.array,n=t.itemSize,i=new r.constructor(e.length*n),a=0,o=0,s=0,c=e.length;s<c;s++){a=e[s]*n;for(var h=0;h<n;h++)i[o++]=r[a++]}return new Pr(i,n)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new Vr,r=this.index.array,n=this.attributes;for(var i in n){var a=t(n[i],r);e.addAttribute(i,a)}var o=this.morphAttributes;for(i in o){for(var s=[],c=o[i],h=0,l=c.length;h<l;h++){a=t(c[h],r);s.push(a)}e.morphAttributes[i]=s}for(var u=this.groups,p=(h=0,u.length);h<p;h++){var d=u[h];e.addGroup(d.start,d.count,d.materialIndex)}return e},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){var e=this.parameters;for(var r in e)void 0!==e[r]&&(t[r]=e[r]);return t}t.data={attributes:{}};var n=this.index;if(null!==n){var i=Array.prototype.slice.call(n.array);t.data.index={type:n.array.constructor.name,array:i}}var a=this.attributes;for(var r in a){var o=a[r];i=Array.prototype.slice.call(o.array);t.data.attributes[r]={itemSize:o.itemSize,type:o.array.constructor.name,array:i,normalized:o.normalized}}var s=this.groups;s.length>0&&(t.data.groups=JSON.parse(JSON.stringify(s)));var c=this.boundingSphere;return null!==c&&(t.data.boundingSphere={center:c.center.toArray(),radius:c.radius}),t},clone:function(){return(new Vr).copy(this)},copy:function(t){var e,r,n;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var i=t.index;null!==i&&this.setIndex(i.clone());var a=t.attributes;for(e in a){var o=a[e];this.addAttribute(e,o.clone())}var s=t.morphAttributes;for(e in s){var c=[],h=s[e];for(r=0,n=h.length;r<n;r++)c.push(h[r].clone());this.morphAttributes[e]=c}var l=t.groups;for(r=0,n=l.length;r<n;r++){var u=l[r];this.addGroup(u.start,u.count,u.materialIndex)}var p=t.boundingBox;null!==p&&(this.boundingBox=p.clone());var d=t.boundingSphere;return null!==d&&(this.boundingSphere=d.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),kr.prototype=Object.create(Lr.prototype),kr.prototype.constructor=kr,jr.prototype=Object.create(Vr.prototype),jr.prototype.constructor=jr,Wr.prototype=Object.create(Lr.prototype),Wr.prototype.constructor=Wr,qr.prototype=Object.create(Vr.prototype),qr.prototype.constructor=qr;var Xr,Yr,Jr,Zr,Qr,Kr,$r,tn,en,rn,nn,an,on=0;function sn(){Object.defineProperty(this,"id",{value:on++}),this.uuid=Ie.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=A,this.side=b,this.flatShading=!1,this.vertexColors=M,this.opacity=1,this.transparent=!1,this.blendSrc=H,this.blendDst=V,this.blendEquation=O,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Q,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.userData={},this.needsUpdate=!0}function cn(t){sn.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function hn(t,e){this.origin=void 0!==t?t:new ze,this.direction=void 0!==e?e:new ze}function ln(t,e,r){this.a=void 0!==t?t:new ze,this.b=void 0!==e?e:new ze,this.c=void 0!==r?r:new ze}function un(t){sn.call(this),this.type="MeshBasicMaterial",this.color=new lr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=rt,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(t)}function pn(t,e){Er.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new Vr,this.material=void 0!==e?e:new un({color:16777215*Math.random()}),this.drawMode=xe,this.updateMorphTargets()}function dn(t,e,r,n){var i,a,o=new lr(0),s=0,c=null,h=0;function l(t,r){e.buffers.color.setClear(t.r,t.g,t.b,r,n)}return{getClearColor:function(){return o},setClearColor:function(t,e){o.set(t),l(o,s=void 0!==e?e:1)},getClearAlpha:function(){return s},setClearAlpha:function(t){l(o,s=t)},render:function(e,n,u,p){var d=n.background;if(null===d?(l(o,s),c=null,h=0):d&&d.isColor&&(l(d,1),p=!0,c=null,h=0),(t.autoClear||p)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),d&&(d.isCubeTexture||d.isWebGLRenderTargetCube)){void 0===a&&((a=new pn(new jr(1,1,1),new cn({type:"BackgroundCubeMaterial",uniforms:nr(dr.cube.uniforms),vertexShader:dr.cube.vertexShader,fragmentShader:dr.cube.fragmentShader,side:w,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),a.geometry.removeAttribute("uv"),a.onBeforeRender=function(t,e,r){this.matrixWorld.copyPosition(r.matrixWorld)},Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.tCube.value}}),r.update(a));var f=d.isWebGLRenderTargetCube?d.texture:d;a.material.uniforms.tCube.value=f,a.material.uniforms.tFlip.value=d.isWebGLRenderTargetCube?1:-1,c===d&&h===f.version||(a.material.needsUpdate=!0,c=d,h=f.version),e.unshift(a,a.geometry,a.material,0,0,null)}else d&&d.isTexture&&(void 0===i&&((i=new pn(new qr(2,2),new cn({type:"BackgroundMaterial",uniforms:nr(dr.background.uniforms),vertexShader:dr.background.vertexShader,fragmentShader:dr.background.fragmentShader,side:b,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),Object.defineProperty(i.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(i)),i.material.uniforms.t2D.value=d,!0===d.matrixAutoUpdate&&d.updateMatrix(),i.material.uniforms.uvTransform.value.copy(d.matrix),c===d&&h===d.version||(i.material.needsUpdate=!0,c=d,h=d.version),e.unshift(i,i.geometry,i.material,0,0,null))}}}function fn(t,e,r,n){var i;this.setMode=function(t){i=t},this.render=function(e,n){t.drawArrays(i,e,n),r.update(n,i)},this.renderInstances=function(a,o,s){var c;if(n.isWebGL2)c=t;else if(null===(c=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[n.isWebGL2?"drawArraysInstanced":"drawArraysInstancedANGLE"](i,o,s,a.maxInstancedCount),r.update(s,i,a.maxInstancedCount)}}function mn(t,e,r){var n;function i(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var a="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext,o=void 0!==r.precision?r.precision:"highp",s=i(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);var c=!0===r.logarithmicDepthBuffer,h=t.getParameter(34930),l=t.getParameter(35660),u=t.getParameter(3379),p=t.getParameter(34076),d=t.getParameter(34921),f=t.getParameter(36347),m=t.getParameter(36348),g=t.getParameter(36349),v=l>0,y=a||!!e.get("OES_texture_float");return{isWebGL2:a,getMaxAnisotropy:function(){if(void 0!==n)return n;var r=e.get("EXT_texture_filter_anisotropic");return n=null!==r?t.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:i,precision:o,logarithmicDepthBuffer:c,maxTextures:h,maxVertexTextures:l,maxTextureSize:u,maxCubemapSize:p,maxAttributes:d,maxVertexUniforms:f,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:v,floatFragmentTextures:y,floatVertexTextures:v&&y,maxSamples:a?t.getParameter(36183):0}}function gn(){var t=this,e=null,r=0,n=!1,i=!1,a=new tr,o=new Ue,s={value:null,needsUpdate:!1};function c(){s.value!==e&&(s.value=e,s.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function h(e,r,n,i){var c=null!==e?e.length:0,h=null;if(0!==c){if(h=s.value,!0!==i||null===h){var l=n+4*c,u=r.matrixWorldInverse;o.getNormalMatrix(u),(null===h||h.length<l)&&(h=new Float32Array(l));for(var p=0,d=n;p!==c;++p,d+=4)a.copy(e[p]).applyMatrix4(u,o),a.normal.toArray(h,d),h[d+3]=a.constant}s.value=h,s.needsUpdate=!0}return t.numPlanes=c,h}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(t,i,a){var o=0!==t.length||i||0!==r||n;return n=i,e=h(t,a,0),r=t.length,o},this.beginShadows=function(){i=!0,h(null)},this.endShadows=function(){i=!1,c()},this.setState=function(t,a,o,l,u,p){if(!n||null===t||0===t.length||i&&!o)i?h(null):c();else{var d=i?0:r,f=4*d,m=u.clippingState||null;s.value=m,m=h(t,l,f,p);for(var g=0;g!==f;++g)m[g]=e[g];u.clippingState=m,this.numIntersection=a?this.numPlanes:0,this.numPlanes+=d}}}function vn(t){var e={};return{get:function(r){if(void 0!==e[r])return e[r];var n;switch(r){case"WEBGL_depth_texture":n=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=t.getExtension(r)}return null===n&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),e[r]=n,n}}}function yn(t,e,r){var n={},i={};function a(t){var o=t.target,s=n[o.id];for(var c in null!==s.index&&e.remove(s.index),s.attributes)e.remove(s.attributes[c]);o.removeEventListener("dispose",a),delete n[o.id];var h=i[s.id];h&&(e.remove(h),delete i[s.id]),r.memory.geometries--}return{get:function(t,e){var i=n[e.id];return i||(e.addEventListener("dispose",a),e.isBufferGeometry?i=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new Vr).setFromObject(t)),i=e._bufferGeometry),n[e.id]=i,r.memory.geometries++,i)},update:function(t){var r=t.index,n=t.attributes;for(var i in null!==r&&e.update(r,34963),n)e.update(n[i],34962);var a=t.morphAttributes;for(var i in a)for(var o=a[i],s=0,c=o.length;s<c;s++)e.update(o[s],34962)},getWireframeAttribute:function(t){var r=i[t.id];if(r)return r;var n,a=[],o=t.index,s=t.attributes;if(null!==o)for(var c=0,h=(n=o.array).length;c<h;c+=3){var l=n[c+0],u=n[c+1],p=n[c+2];a.push(l,u,u,p,p,l)}else for(c=0,h=(n=s.position.array).length/3-1;c<h;c+=3)l=c+0,u=c+1,p=c+2,a.push(l,u,u,p,p,l);return r=new(Fr(a)>65535?Nr:Dr)(a,1),e.update(r,34963),i[t.id]=r,r}}}function xn(t,e,r,n){var i,a,o;this.setMode=function(t){i=t},this.setIndex=function(t){a=t.type,o=t.bytesPerElement},this.render=function(e,n){t.drawElements(i,n,a,e*o),r.update(n,i)},this.renderInstances=function(s,c,h){var l;if(n.isWebGL2)l=t;else if(null===(l=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[n.isWebGL2?"drawElementsInstanced":"drawElementsInstancedANGLE"](i,h,a,c*o,s.maxInstancedCount),r.update(h,i,s.maxInstancedCount)}}function bn(t){var e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,r,n){switch(n=n||1,e.calls++,r){case 4:e.triangles+=n*(t/3);break;case 5:case 6:e.triangles+=n*(t-2);break;case 1:e.lines+=n*(t/2);break;case 3:e.lines+=n*(t-1);break;case 2:e.lines+=n*t;break;case 0:e.points+=n*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}function wn(t,e){return Math.abs(e[1])-Math.abs(t[1])}function _n(t){var e={},r=new Float32Array(8);return{update:function(n,i,a,o){var s=n.morphTargetInfluences,c=s.length,h=e[i.id];if(void 0===h){h=[];for(var l=0;l<c;l++)h[l]=[l,0];e[i.id]=h}var u=a.morphTargets&&i.morphAttributes.position,p=a.morphNormals&&i.morphAttributes.normal;for(l=0;l<c;l++)0!==(d=h[l])[1]&&(u&&i.removeAttribute("morphTarget"+l),p&&i.removeAttribute("morphNormal"+l));for(l=0;l<c;l++)(d=h[l])[0]=l,d[1]=s[l];for(h.sort(wn),l=0;l<8;l++){var d;if(d=h[l]){var f=d[0],m=d[1];if(m){u&&i.addAttribute("morphTarget"+l,u[f]),p&&i.addAttribute("morphNormal"+l,p[f]),r[l]=m;continue}}r[l]=0}o.getUniforms().setValue(t,"morphTargetInfluences",r)}}}function Mn(t,e){var r={};return{update:function(n){var i=e.render.frame,a=n.geometry,o=t.get(n,a);return r[o.id]!==i&&(a.isGeometry&&o.updateFromObject(n),t.update(o),r[o.id]=i),o},dispose:function(){r={}}}}function En(t,e,r,n,i,a,o,s,c,h){t=void 0!==t?t:[],e=void 0!==e?e:ut,qe.call(this,t,e,r,n,i,a,o,s,c,h),this.flipY=!1}function Sn(t,e,r,n){qe.call(this,null),this.image={data:t,width:e,height:r,depth:n},this.magFilter=wt,this.minFilter=wt,this.generateMipmaps=!1,this.flipY=!1}sn.prototype=Object.assign(Object.create(e.prototype),{constructor:sn,isMaterial:!0,onBeforeCompile:function(){},setValues:function(t){if(void 0!==t)for(var e in t){var r=t[e];if(void 0!==r)if("shading"!==e){var n=this[e];void 0!==n?n&&n.isColor?n.set(r):n&&n.isVector3&&r&&r.isVector3?n.copy(r):this[e]=r:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===r;else console.warn("THREE.Material: '"+e+"' parameter is undefined.")}},toJSON:function(t){var e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});var r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function n(t){var e=[];for(var r in t){var n=t[r];delete n.metadata,e.push(n)}return e}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),void 0!==this.roughness&&(r.roughness=this.roughness),void 0!==this.metalness&&(r.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),void 0!==this.clearCoat&&(r.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(r.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(t).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(t).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(t).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(t).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(t).uuid,r.reflectivity=this.reflectivity,void 0!==this.combine&&(r.combine=this.combine),void 0!==this.envMapIntensity&&(r.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(r.size=this.size),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==A&&(r.blending=this.blending),!0===this.flatShading&&(r.flatShading=this.flatShading),this.side!==b&&(r.side=this.side),this.vertexColors!==M&&(r.vertexColors=this.vertexColors),this.opacity<1&&(r.opacity=this.opacity),!0===this.transparent&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,0!==this.rotation&&(r.rotation=this.rotation),!0===this.polygonOffset&&(r.polygonOffset=!0),0!==this.polygonOffsetFactor&&(r.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(r.polygonOffsetUnits=this.polygonOffsetUnits),1!==this.linewidth&&(r.linewidth=this.linewidth),void 0!==this.dashSize&&(r.dashSize=this.dashSize),void 0!==this.gapSize&&(r.gapSize=this.gapSize),void 0!==this.scale&&(r.scale=this.scale),!0===this.dithering&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(r.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(r.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(r.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(r.morphTargets=!0),!0===this.skinning&&(r.skinning=!0),!1===this.visible&&(r.visible=!1),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),e){var i=n(t.textures),a=n(t.images);i.length>0&&(r.textures=i),a.length>0&&(r.images=a)}return r},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.lights=t.lights,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.userData=JSON.parse(JSON.stringify(t.userData)),this.clipShadows=t.clipShadows,this.clipIntersection=t.clipIntersection;var e=t.clippingPlanes,r=null;if(null!==e){var n=e.length;r=new Array(n);for(var i=0;i!==n;++i)r[i]=e[i].clone()}return this.clippingPlanes=r,this.shadowSide=t.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),cn.prototype=Object.create(sn.prototype),cn.prototype.constructor=cn,cn.prototype.isShaderMaterial=!0,cn.prototype.copy=function(t){return sn.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=nr(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},cn.prototype.toJSON=function(t){var e=sn.prototype.toJSON.call(this,t);for(var r in e.uniforms={},this.uniforms){var n=this.uniforms[r].value;n&&n.isTexture?e.uniforms[r]={type:"t",value:n.toJSON(t).uuid}:n&&n.isColor?e.uniforms[r]={type:"c",value:n.getHex()}:n&&n.isVector2?e.uniforms[r]={type:"v2",value:n.toArray()}:n&&n.isVector3?e.uniforms[r]={type:"v3",value:n.toArray()}:n&&n.isVector4?e.uniforms[r]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?e.uniforms[r]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?e.uniforms[r]={type:"m4",value:n.toArray()}:e.uniforms[r]={value:n}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;var i={};for(var a in this.extensions)!0===this.extensions[a]&&(i[a]=!0);return Object.keys(i).length>0&&(e.extensions=i),e},Object.assign(hn.prototype,{set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return void 0===e&&(console.warn("THREE.Ray: .at() target is now required"),e=new ze),e.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(){var t=new ze;return function(e){return this.origin.copy(this.at(e,t)),this}}(),closestPointToPoint:function(t,e){void 0===e&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),e=new ze),e.subVectors(t,this.origin);var r=e.dot(this.direction);return r<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(r).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(){var t=new ze;return function(e){var r=t.subVectors(e,this.origin).dot(this.direction);return r<0?this.origin.distanceToSquared(e):(t.copy(this.direction).multiplyScalar(r).add(this.origin),t.distanceToSquared(e))}}(),distanceSqToSegment:(Yr=new ze,Jr=new ze,Zr=new ze,function(t,e,r,n){Yr.copy(t).add(e).multiplyScalar(.5),Jr.copy(e).sub(t).normalize(),Zr.copy(this.origin).sub(Yr);var i,a,o,s,c=.5*t.distanceTo(e),h=-this.direction.dot(Jr),l=Zr.dot(this.direction),u=-Zr.dot(Jr),p=Zr.lengthSq(),d=Math.abs(1-h*h);if(d>0)if(a=h*l-u,s=c*d,(i=h*u-l)>=0)if(a>=-s)if(a<=s){var f=1/d;o=(i*=f)*(i+h*(a*=f)+2*l)+a*(h*i+a+2*u)+p}else a=c,o=-(i=Math.max(0,-(h*a+l)))*i+a*(a+2*u)+p;else a=-c,o=-(i=Math.max(0,-(h*a+l)))*i+a*(a+2*u)+p;else a<=-s?o=-(i=Math.max(0,-(-h*c+l)))*i+(a=i>0?-c:Math.min(Math.max(-c,-u),c))*(a+2*u)+p:a<=s?(i=0,o=(a=Math.min(Math.max(-c,-u),c))*(a+2*u)+p):o=-(i=Math.max(0,-(h*c+l)))*i+(a=i>0?c:Math.min(Math.max(-c,-u),c))*(a+2*u)+p;else a=h>0?-c:c,o=-(i=Math.max(0,-(h*a+l)))*i+a*(a+2*u)+p;return r&&r.copy(this.direction).multiplyScalar(i).add(this.origin),n&&n.copy(Jr).multiplyScalar(a).add(Yr),o}),intersectSphere:function(){var t=new ze;return function(e,r){t.subVectors(e.center,this.origin);var n=t.dot(this.direction),i=t.dot(t)-n*n,a=e.radius*e.radius;if(i>a)return null;var o=Math.sqrt(a-i),s=n-o,c=n+o;return s<0&&c<0?null:s<0?this.at(c,r):this.at(s,r)}}(),intersectsSphere:function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var r=-(this.origin.dot(t.normal)+t.constant)/e;return r>=0?r:null},intersectPlane:function(t,e){var r=this.distanceToPlane(t);return null===r?null:this.at(r,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0},intersectBox:function(t,e){var r,n,i,a,o,s,c=1/this.direction.x,h=1/this.direction.y,l=1/this.direction.z,u=this.origin;return c>=0?(r=(t.min.x-u.x)*c,n=(t.max.x-u.x)*c):(r=(t.max.x-u.x)*c,n=(t.min.x-u.x)*c),h>=0?(i=(t.min.y-u.y)*h,a=(t.max.y-u.y)*h):(i=(t.max.y-u.y)*h,a=(t.min.y-u.y)*h),r>a||i>n?null:((i>r||r!=r)&&(r=i),(a<n||n!=n)&&(n=a),l>=0?(o=(t.min.z-u.z)*l,s=(t.max.z-u.z)*l):(o=(t.max.z-u.z)*l,s=(t.min.z-u.z)*l),r>s||o>n?null:((o>r||r!=r)&&(r=o),(s<n||n!=n)&&(n=s),n<0?null:this.at(r>=0?r:n,e)))},intersectsBox:(Xr=new ze,function(t){return null!==this.intersectBox(t,Xr)}),intersectTriangle:function(){var t=new ze,e=new ze,r=new ze,n=new ze;return function(i,a,o,s,c){e.subVectors(a,i),r.subVectors(o,i),n.crossVectors(e,r);var h,l=this.direction.dot(n);if(l>0){if(s)return null;h=1}else{if(!(l<0))return null;h=-1,l=-l}t.subVectors(this.origin,i);var u=h*this.direction.dot(r.crossVectors(t,r));if(u<0)return null;var p=h*this.direction.dot(e.cross(t));if(p<0)return null;if(u+p>l)return null;var d=-h*t.dot(n);return d<0?null:this.at(d/l,c)}}(),applyMatrix4:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}}),Object.assign(ln,{getNormal:(Kr=new ze,function(t,e,r,n){void 0===n&&(console.warn("THREE.Triangle: .getNormal() target is now required"),n=new ze),n.subVectors(r,e),Kr.subVectors(t,e),n.cross(Kr);var i=n.lengthSq();return i>0?n.multiplyScalar(1/Math.sqrt(i)):n.set(0,0,0)}),getBarycoord:function(){var t=new ze,e=new ze,r=new ze;return function(n,i,a,o,s){t.subVectors(o,i),e.subVectors(a,i),r.subVectors(n,i);var c=t.dot(t),h=t.dot(e),l=t.dot(r),u=e.dot(e),p=e.dot(r),d=c*u-h*h;if(void 0===s&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),s=new ze),0===d)return s.set(-2,-1,-1);var f=1/d,m=(u*l-h*p)*f,g=(c*p-h*l)*f;return s.set(1-m-g,g,m)}}(),containsPoint:function(){var t=new ze;return function(e,r,n,i){return ln.getBarycoord(e,r,n,i,t),t.x>=0&&t.y>=0&&t.x+t.y<=1}}(),getUV:(Qr=new ze,function(t,e,r,n,i,a,o,s){return this.getBarycoord(t,e,r,n,Qr),s.set(0,0),s.addScaledVector(i,Qr.x),s.addScaledVector(a,Qr.y),s.addScaledVector(o,Qr.z),s})}),Object.assign(ln.prototype,{set:function(t,e,r){return this.a.copy(t),this.b.copy(e),this.c.copy(r),this},setFromPointsAndIndices:function(t,e,r,n){return this.a.copy(t[e]),this.b.copy(t[r]),this.c.copy(t[n]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},getArea:function(){var t=new ze,e=new ze;return function(){return t.subVectors(this.c,this.b),e.subVectors(this.a,this.b),.5*t.cross(e).length()}}(),getMidpoint:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new ze),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(t){return ln.getNormal(this.a,this.b,this.c,t)},getPlane:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new ze),t.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(t,e){return ln.getBarycoord(t,this.a,this.b,this.c,e)},containsPoint:function(t){return ln.containsPoint(t,this.a,this.b,this.c)},getUV:function(t,e,r,n,i){return ln.getUV(t,this.a,this.b,this.c,e,r,n,i)},intersectsBox:function(t){return t.intersectsTriangle(this)},closestPointToPoint:($r=new ze,tn=new ze,en=new ze,rn=new ze,nn=new ze,an=new ze,function(t,e){void 0===e&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),e=new ze);var r,n,i=this.a,a=this.b,o=this.c;$r.subVectors(a,i),tn.subVectors(o,i),rn.subVectors(t,i);var s=$r.dot(rn),c=tn.dot(rn);if(s<=0&&c<=0)return e.copy(i);nn.subVectors(t,a);var h=$r.dot(nn),l=tn.dot(nn);if(h>=0&&l<=h)return e.copy(a);var u=s*l-h*c;if(u<=0&&s>=0&&h<=0)return r=s/(s-h),e.copy(i).addScaledVector($r,r);an.subVectors(t,o);var p=$r.dot(an),d=tn.dot(an);if(d>=0&&p<=d)return e.copy(o);var f=p*c-s*d;if(f<=0&&c>=0&&d<=0)return n=c/(c-d),e.copy(i).addScaledVector(tn,n);var m=h*d-p*l;if(m<=0&&l-h>=0&&p-d>=0)return en.subVectors(o,a),n=(l-h)/(l-h+(p-d)),e.copy(a).addScaledVector(en,n);var g=1/(m+f+u);return r=f*g,n=u*g,e.copy(i).addScaledVector($r,r).addScaledVector(tn,n)}),equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}),un.prototype=Object.create(sn.prototype),un.prototype.constructor=un,un.prototype.isMeshBasicMaterial=!0,un.prototype.copy=function(t){return sn.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this},pn.prototype=Object.assign(Object.create(Er.prototype),{constructor:pn,isMesh:!0,setDrawMode:function(t){this.drawMode=t},copy:function(t){return Er.prototype.copy.call(this,t),this.drawMode=t.drawMode,void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this},updateMorphTargets:function(){var t,e,r,n=this.geometry;if(n.isBufferGeometry){var i=n.morphAttributes,a=Object.keys(i);if(a.length>0){var o=i[a[0]];if(void 0!==o)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=o.length;t<e;t++)r=o[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[r]=t}}else{var s=n.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(){var t=new Be,e=new hn,r=new $e,n=new ze,i=new ze,a=new ze,o=new ze,s=new ze,c=new ze,h=new De,l=new De,u=new De,p=new ze,d=new ze;function f(t,e,r,n,i,a,o,s){if(null===(e.side===w?n.intersectTriangle(o,a,i,!0,s):n.intersectTriangle(i,a,o,e.side!==_,s)))return null;d.copy(s),d.applyMatrix4(t.matrixWorld);var c=r.ray.origin.distanceTo(d);return c<r.near||c>r.far?null:{distance:c,point:d.clone(),object:t}}function m(t,e,r,o,s,c,d,m,g){n.fromBufferAttribute(s,d),i.fromBufferAttribute(s,m),a.fromBufferAttribute(s,g);var v=f(t,e,r,o,n,i,a,p);if(v){c&&(h.fromBufferAttribute(c,d),l.fromBufferAttribute(c,m),u.fromBufferAttribute(c,g),v.uv=ln.getUV(p,n,i,a,h,l,u,new De));var y=new gr(d,m,g);ln.getNormal(n,i,a,y.normal),v.face=y}return v}return function(d,g){var v,y=this.geometry,x=this.material,b=this.matrixWorld;if(void 0!==x&&(null===y.boundingSphere&&y.computeBoundingSphere(),r.copy(y.boundingSphere),r.applyMatrix4(b),!1!==d.ray.intersectsSphere(r)&&(t.getInverse(b),e.copy(d.ray).applyMatrix4(t),null===y.boundingBox||!1!==e.intersectsBox(y.boundingBox))))if(y.isBufferGeometry){var w,_,M,E,S,T,A,L,P,R=y.index,C=y.attributes.position,O=y.attributes.uv,I=y.groups,D=y.drawRange;if(null!==R)if(Array.isArray(x))for(E=0,T=I.length;E<T;E++)for(P=x[(L=I[E]).materialIndex],S=Math.max(L.start,D.start),A=Math.min(L.start+L.count,D.start+D.count);S<A;S+=3)w=R.getX(S),_=R.getX(S+1),M=R.getX(S+2),(v=m(this,P,d,e,C,O,w,_,M))&&(v.faceIndex=Math.floor(S/3),v.face.materialIndex=L.materialIndex,g.push(v));else for(E=Math.max(0,D.start),T=Math.min(R.count,D.start+D.count);E<T;E+=3)w=R.getX(E),_=R.getX(E+1),M=R.getX(E+2),(v=m(this,x,d,e,C,O,w,_,M))&&(v.faceIndex=Math.floor(E/3),g.push(v));else if(void 0!==C)if(Array.isArray(x))for(E=0,T=I.length;E<T;E++)for(P=x[(L=I[E]).materialIndex],S=Math.max(L.start,D.start),A=Math.min(L.start+L.count,D.start+D.count);S<A;S+=3)(v=m(this,P,d,e,C,O,w=S,_=S+1,M=S+2))&&(v.faceIndex=Math.floor(S/3),v.face.materialIndex=L.materialIndex,g.push(v));else for(E=Math.max(0,D.start),T=Math.min(C.count,D.start+D.count);E<T;E+=3)(v=m(this,x,d,e,C,O,w=E,_=E+1,M=E+2))&&(v.faceIndex=Math.floor(E/3),g.push(v))}else if(y.isGeometry){var B,N,z,U,G=Array.isArray(x),F=y.vertices,H=y.faces,V=y.faceVertexUvs[0];V.length>0&&(U=V);for(var k=0,j=H.length;k<j;k++){var W=H[k],q=G?x[W.materialIndex]:x;if(void 0!==q){if(B=F[W.a],N=F[W.b],z=F[W.c],!0===q.morphTargets){var X=y.morphTargets,Y=this.morphTargetInfluences;n.set(0,0,0),i.set(0,0,0),a.set(0,0,0);for(var J=0,Z=X.length;J<Z;J++){var Q=Y[J];if(0!==Q){var K=X[J].vertices;n.addScaledVector(o.subVectors(K[W.a],B),Q),i.addScaledVector(s.subVectors(K[W.b],N),Q),a.addScaledVector(c.subVectors(K[W.c],z),Q)}}n.add(B),i.add(N),a.add(z),B=n,N=i,z=a}if(v=f(this,q,d,e,B,N,z,p)){if(U&&U[k]){var $=U[k];h.copy($[0]),l.copy($[1]),u.copy($[2]),v.uv=ln.getUV(p,B,N,z,h,l,u,new De)}v.face=W,v.faceIndex=k,g.push(v)}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),En.prototype=Object.create(qe.prototype),En.prototype.constructor=En,En.prototype.isCubeTexture=!0,Object.defineProperty(En.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}}),Sn.prototype=Object.create(qe.prototype),Sn.prototype.constructor=Sn,Sn.prototype.isDataTexture3D=!0;var Tn=new qe,An=new Sn,Ln=new En;function Pn(){this.seq=[],this.map={}}var Rn=[],Cn=[],On=new Float32Array(16),In=new Float32Array(9),Dn=new Float32Array(4);function Bn(t,e,r){var n=t[0];if(n<=0||n>0)return t;var i=e*r,a=Rn[i];if(void 0===a&&(a=new Float32Array(i),Rn[i]=a),0!==e){n.toArray(a,0);for(var o=1,s=0;o!==e;++o)s+=r,t[o].toArray(a,s)}return a}function Nn(t,e){if(t.length!==e.length)return!1;for(var r=0,n=t.length;r<n;r++)if(t[r]!==e[r])return!1;return!0}function zn(t,e){for(var r=0,n=e.length;r<n;r++)t[r]=e[r]}function Un(t,e){var r=Cn[e];void 0===r&&(r=new Int32Array(e),Cn[e]=r);for(var n=0;n!==e;++n)r[n]=t.allocTextureUnit();return r}function Gn(t,e){var r=this.cache;r[0]!==e&&(t.uniform1f(this.addr,e),r[0]=e)}function Fn(t,e){var r=this.cache;r[0]!==e&&(t.uniform1i(this.addr,e),r[0]=e)}function Hn(t,e){var r=this.cache;if(void 0!==e.x)r[0]===e.x&&r[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),r[0]=e.x,r[1]=e.y);else{if(Nn(r,e))return;t.uniform2fv(this.addr,e),zn(r,e)}}function Vn(t,e){var r=this.cache;if(void 0!==e.x)r[0]===e.x&&r[1]===e.y&&r[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),r[0]=e.x,r[1]=e.y,r[2]=e.z);else if(void 0!==e.r)r[0]===e.r&&r[1]===e.g&&r[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),r[0]=e.r,r[1]=e.g,r[2]=e.b);else{if(Nn(r,e))return;t.uniform3fv(this.addr,e),zn(r,e)}}function kn(t,e){var r=this.cache;if(void 0!==e.x)r[0]===e.x&&r[1]===e.y&&r[2]===e.z&&r[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),r[0]=e.x,r[1]=e.y,r[2]=e.z,r[3]=e.w);else{if(Nn(r,e))return;t.uniform4fv(this.addr,e),zn(r,e)}}function jn(t,e){var r=this.cache,n=e.elements;if(void 0===n){if(Nn(r,e))return;t.uniformMatrix2fv(this.addr,!1,e),zn(r,e)}else{if(Nn(r,n))return;Dn.set(n),t.uniformMatrix2fv(this.addr,!1,Dn),zn(r,n)}}function Wn(t,e){var r=this.cache,n=e.elements;if(void 0===n){if(Nn(r,e))return;t.uniformMatrix3fv(this.addr,!1,e),zn(r,e)}else{if(Nn(r,n))return;In.set(n),t.uniformMatrix3fv(this.addr,!1,In),zn(r,n)}}function qn(t,e){var r=this.cache,n=e.elements;if(void 0===n){if(Nn(r,e))return;t.uniformMatrix4fv(this.addr,!1,e),zn(r,e)}else{if(Nn(r,n))return;On.set(n),t.uniformMatrix4fv(this.addr,!1,On),zn(r,n)}}function Xn(t,e,r){var n=this.cache,i=r.allocTextureUnit();n[0]!==i&&(t.uniform1i(this.addr,i),n[0]=i),r.setTexture2D(e||Tn,i)}function Yn(t,e,r){var n=this.cache,i=r.allocTextureUnit();n[0]!==i&&(t.uniform1i(this.addr,i),n[0]=i),r.setTexture3D(e||An,i)}function Jn(t,e,r){var n=this.cache,i=r.allocTextureUnit();n[0]!==i&&(t.uniform1i(this.addr,i),n[0]=i),r.setTextureCube(e||Ln,i)}function Zn(t,e){var r=this.cache;Nn(r,e)||(t.uniform2iv(this.addr,e),zn(r,e))}function Qn(t,e){var r=this.cache;Nn(r,e)||(t.uniform3iv(this.addr,e),zn(r,e))}function Kn(t,e){var r=this.cache;Nn(r,e)||(t.uniform4iv(this.addr,e),zn(r,e))}function $n(t,e){var r=this.cache;Nn(r,e)||(t.uniform1fv(this.addr,e),zn(r,e))}function ti(t,e){var r=this.cache;Nn(r,e)||(t.uniform1iv(this.addr,e),zn(r,e))}function ei(t,e){var r=this.cache,n=Bn(e,this.size,2);Nn(r,n)||(t.uniform2fv(this.addr,n),this.updateCache(n))}function ri(t,e){var r=this.cache,n=Bn(e,this.size,3);Nn(r,n)||(t.uniform3fv(this.addr,n),this.updateCache(n))}function ni(t,e){var r=this.cache,n=Bn(e,this.size,4);Nn(r,n)||(t.uniform4fv(this.addr,n),this.updateCache(n))}function ii(t,e){var r=this.cache,n=Bn(e,this.size,4);Nn(r,n)||(t.uniformMatrix2fv(this.addr,!1,n),this.updateCache(n))}function ai(t,e){var r=this.cache,n=Bn(e,this.size,9);Nn(r,n)||(t.uniformMatrix3fv(this.addr,!1,n),this.updateCache(n))}function oi(t,e){var r=this.cache,n=Bn(e,this.size,16);Nn(r,n)||(t.uniformMatrix4fv(this.addr,!1,n),this.updateCache(n))}function si(t,e,r){var n=this.cache,i=e.length,a=Un(r,i);!1===Nn(n,a)&&(t.uniform1iv(this.addr,a),zn(n,a));for(var o=0;o!==i;++o)r.setTexture2D(e[o]||Tn,a[o])}function ci(t,e,r){var n=this.cache,i=e.length,a=Un(r,i);!1===Nn(n,a)&&(t.uniform1iv(this.addr,a),zn(n,a));for(var o=0;o!==i;++o)r.setTextureCube(e[o]||Ln,a[o])}function hi(t,e,r){this.id=t,this.addr=r,this.cache=[],this.setValue=function(t){switch(t){case 5126:return Gn;case 35664:return Hn;case 35665:return Vn;case 35666:return kn;case 35674:return jn;case 35675:return Wn;case 35676:return qn;case 35678:case 36198:return Xn;case 35679:return Yn;case 35680:return Jn;case 5124:case 35670:return Fn;case 35667:case 35671:return Zn;case 35668:case 35672:return Qn;case 35669:case 35673:return Kn}}(e.type)}function li(t,e,r){this.id=t,this.addr=r,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return $n;case 35664:return ei;case 35665:return ri;case 35666:return ni;case 35674:return ii;case 35675:return ai;case 35676:return oi;case 35678:return si;case 35680:return ci;case 5124:case 35670:return ti;case 35667:case 35671:return Zn;case 35668:case 35672:return Qn;case 35669:case 35673:return Kn}}(e.type)}function ui(t){this.id=t,Pn.call(this)}li.prototype.updateCache=function(t){var e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),zn(e,t)},ui.prototype.setValue=function(t,e,r){for(var n=this.seq,i=0,a=n.length;i!==a;++i){var o=n[i];o.setValue(t,e[o.id],r)}};var pi=/([\w\d_]+)(\])?(\[|\.)?/g;function di(t,e){t.seq.push(e),t.map[e.id]=e}function fi(t,e,r){var n=t.name,i=n.length;for(pi.lastIndex=0;;){var a=pi.exec(n),o=pi.lastIndex,s=a[1],c="]"===a[2],h=a[3];if(c&&(s|=0),void 0===h||"["===h&&o+2===i){di(r,void 0===h?new hi(s,t,e):new li(s,t,e));break}var l=r.map[s];void 0===l&&di(r,l=new ui(s)),r=l}}function mi(t,e,r){Pn.call(this),this.renderer=r;for(var n=t.getProgramParameter(e,35718),i=0;i<n;++i){var a=t.getActiveUniform(e,i);fi(a,t.getUniformLocation(e,a.name),this)}}function gi(t,e,r){var n=t.createShader(e);return t.shaderSource(n,r),t.compileShader(n),!1===t.getShaderParameter(n,35713)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==t.getShaderInfoLog(n)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",35633===e?"vertex":"fragment",t.getShaderInfoLog(n),function(t){for(var e=t.split("\n"),r=0;r<e.length;r++)e[r]=r+1+": "+e[r];return e.join("\n")}(r)),n}mi.prototype.setValue=function(t,e,r){var n=this.map[e];void 0!==n&&n.setValue(t,r,this.renderer)},mi.prototype.setOptional=function(t,e,r){var n=e[r];void 0!==n&&this.setValue(t,r,n)},mi.upload=function(t,e,r,n){for(var i=0,a=e.length;i!==a;++i){var o=e[i],s=r[o.id];!1!==s.needsUpdate&&o.setValue(t,s.value,n)}},mi.seqWithValue=function(t,e){for(var r=[],n=0,i=t.length;n!==i;++n){var a=t[n];a.id in e&&r.push(a)}return r};var vi=0;function yi(t){switch(t){case _e:return["Linear","( value )"];case Me:return["sRGB","( value )"];case Se:return["RGBE","( value )"];case Te:return["RGBM","( value, 7.0 )"];case Ae:return["RGBM","( value, 16.0 )"];case Le:return["RGBD","( value, 256.0 )"];case Ee:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+t)}}function xi(t,e){var r=yi(e);return"vec4 "+t+"( vec4 value ) { return "+r[0]+"ToLinear"+r[1]+"; }"}function bi(t,e){var r;switch(e){case ot:r="Linear";break;case st:r="Reinhard";break;case ct:r="Uncharted2";break;case ht:r="OptimizedCineon";break;case lt:r="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+e)}return"vec3 "+t+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}function wi(t){return""!==t}function _i(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights)}function Mi(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}function Ei(t){return t.replace(/^[ \t]*#include +<([\w\d.\/]+)>/gm,function(t,e){var r=rr[e];if(void 0===r)throw new Error("Can not resolve #include <"+e+">");return Ei(r)})}function Si(t){return t.replace(/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(t,e,r,n){for(var i="",a=parseInt(e);a<parseInt(r);a++)i+=n.replace(/\[ i \]/g,"[ "+a+" ]");return i})}function Ti(t,e,r,n,i,a,o){var s=t.context,c=n.defines,h=i.vertexShader,l=i.fragmentShader,u="SHADOWMAP_TYPE_BASIC";a.shadowMapType===y?u="SHADOWMAP_TYPE_PCF":a.shadowMapType===x&&(u="SHADOWMAP_TYPE_PCF_SOFT");var p="ENVMAP_TYPE_CUBE",d="ENVMAP_MODE_REFLECTION",f="ENVMAP_BLENDING_MULTIPLY";if(a.envMap){switch(n.envMap.mapping){case ut:case pt:p="ENVMAP_TYPE_CUBE";break;case gt:case vt:p="ENVMAP_TYPE_CUBE_UV";break;case dt:case ft:p="ENVMAP_TYPE_EQUIREC";break;case mt:p="ENVMAP_TYPE_SPHERE"}switch(n.envMap.mapping){case pt:case ft:d="ENVMAP_MODE_REFRACTION"}switch(n.combine){case rt:f="ENVMAP_BLENDING_MULTIPLY";break;case nt:f="ENVMAP_BLENDING_MIX";break;case it:f="ENVMAP_BLENDING_ADD"}}var m,g,v,b,w,_=t.gammaFactor>0?t.gammaFactor:1,M=o.isWebGL2?"":function(t,e,r){return[(t=t||{}).derivatives||e.envMapCubeUV||e.bumpMap||e.normalMap&&!e.objectSpaceNormalMap||e.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(t.fragDepth||e.logarithmicDepthBuffer)&&r.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",t.drawBuffers&&r.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(t.shaderTextureLOD||e.envMap)&&r.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(wi).join("\n")}(n.extensions,a,e),E=function(t){var e=[];for(var r in t){var n=t[r];!1!==n&&e.push("#define "+r+" "+n)}return e.join("\n")}(c),S=s.createProgram();if(n.isRawShaderMaterial?((m=[E].filter(wi).join("\n")).length>0&&(m+="\n"),(g=[M,E].filter(wi).join("\n")).length>0&&(g+="\n")):(m=["precision "+a.precision+" float;","precision "+a.precision+" int;","#define SHADER_NAME "+i.name,E,a.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+_,"#define MAX_BONES "+a.maxBones,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+d:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.displacementMap&&a.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexColors?"#define USE_COLOR":"",a.flatShading?"#define FLAT_SHADED":"",a.skinning?"#define USE_SKINNING":"",a.useVertexTexture?"#define BONE_TEXTURE":"",a.morphTargets?"#define USE_MORPHTARGETS":"",a.morphNormals&&!1===a.flatShading?"#define USE_MORPHNORMALS":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+u:"",a.sizeAttenuation?"#define USE_SIZEATTENUATION":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&(o.isWebGL2||e.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(wi).join("\n"),g=[M,"precision "+a.precision+" float;","precision "+a.precision+" int;","#define SHADER_NAME "+i.name,E,a.alphaTest?"#define ALPHATEST "+a.alphaTest+(a.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+_,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.matcap?"#define USE_MATCAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+p:"",a.envMap?"#define "+d:"",a.envMap?"#define "+f:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexColors?"#define USE_COLOR":"",a.gradientMap?"#define USE_GRADIENTMAP":"",a.flatShading?"#define FLAT_SHADED":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+u:"",a.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",a.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&(o.isWebGL2||e.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",a.envMap&&(o.isWebGL2||e.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",a.toneMapping!==at?"#define TONE_MAPPING":"",a.toneMapping!==at?rr.tonemapping_pars_fragment:"",a.toneMapping!==at?bi("toneMapping",a.toneMapping):"",a.dithering?"#define DITHERING":"",a.outputEncoding||a.mapEncoding||a.matcapEncoding||a.envMapEncoding||a.emissiveMapEncoding?rr.encodings_pars_fragment:"",a.mapEncoding?xi("mapTexelToLinear",a.mapEncoding):"",a.matcapEncoding?xi("matcapTexelToLinear",a.matcapEncoding):"",a.envMapEncoding?xi("envMapTexelToLinear",a.envMapEncoding):"",a.emissiveMapEncoding?xi("emissiveMapTexelToLinear",a.emissiveMapEncoding):"",a.outputEncoding?(v="linearToOutputTexel",b=a.outputEncoding,w=yi(b),"vec4 "+v+"( vec4 value ) { return LinearTo"+w[0]+w[1]+"; }"):"",a.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(wi).join("\n")),h=Mi(h=_i(h=Ei(h),a),a),l=Mi(l=_i(l=Ei(l),a),a),h=Si(h),l=Si(l),o.isWebGL2&&!n.isRawShaderMaterial){var T=!1,A=/^\s*#version\s+300\s+es\s*\n/;n.isShaderMaterial&&null!==h.match(A)&&null!==l.match(A)&&(T=!0,h=h.replace(A,""),l=l.replace(A,"")),m=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+m,g=["#version 300 es\n","#define varying in",T?"":"out highp vec4 pc_fragColor;",T?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+g}var L=g+l,P=gi(s,35633,m+h),R=gi(s,35632,L);s.attachShader(S,P),s.attachShader(S,R),void 0!==n.index0AttributeName?s.bindAttribLocation(S,0,n.index0AttributeName):!0===a.morphTargets&&s.bindAttribLocation(S,0,"position"),s.linkProgram(S);var C,O,I=s.getProgramInfoLog(S).trim(),D=s.getShaderInfoLog(P).trim(),B=s.getShaderInfoLog(R).trim(),N=!0,z=!0;return!1===s.getProgramParameter(S,35714)?(N=!1,console.error("THREE.WebGLProgram: shader error: ",s.getError(),"35715",s.getProgramParameter(S,35715),"gl.getProgramInfoLog",I,D,B)):""!==I?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",I):""!==D&&""!==B||(z=!1),z&&(this.diagnostics={runnable:N,material:n,programLog:I,vertexShader:{log:D,prefix:m},fragmentShader:{log:B,prefix:g}}),s.deleteShader(P),s.deleteShader(R),this.getUniforms=function(){return void 0===C&&(C=new mi(s,S,t)),C},this.getAttributes=function(){return void 0===O&&(O=function(t,e){for(var r={},n=t.getProgramParameter(e,35721),i=0;i<n;i++){var a=t.getActiveAttrib(e,i).name;r[a]=t.getAttribLocation(e,a)}return r}(s,S)),O},this.destroy=function(){s.deleteProgram(S),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.name=i.name,this.id=vi++,this.code=r,this.usedTimes=1,this.program=S,this.vertexShader=P,this.fragmentShader=R,this}function Ai(t,e,r){var n=[],i={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},a=["precision","supportsVertexTextures","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function o(t,e){var r;return t?t.isTexture?r=t.encoding:t.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),r=t.texture.encoding):r=_e,r===_e&&e&&(r=Ee),r}this.getParameters=function(e,n,a,s,c,h,l){var u=i[e.type],p=l.isSkinnedMesh?function(t){var e=t.skeleton.bones;if(r.floatVertexTextures)return 1024;var n=r.maxVertexUniforms,i=Math.floor((n-20)/4),a=Math.min(i,e.length);return a<e.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+e.length+" bones. This GPU supports "+a+"."),0):a}(l):0,d=r.precision;null!==e.precision&&(d=r.getMaxPrecision(e.precision))!==e.precision&&console.warn("THREE.WebGLProgram.getParameters:",e.precision,"not supported, using",d,"instead.");var f=t.getRenderTarget();return{shaderID:u,precision:d,supportsVertexTextures:r.vertexTextures,outputEncoding:o(f?f.texture:null,t.gammaOutput),map:!!e.map,mapEncoding:o(e.map,t.gammaInput),matcap:!!e.matcap,matcapEncoding:o(e.matcap,t.gammaInput),envMap:!!e.envMap,envMapMode:e.envMap&&e.envMap.mapping,envMapEncoding:o(e.envMap,t.gammaInput),envMapCubeUV:!!e.envMap&&(e.envMap.mapping===gt||e.envMap.mapping===vt),lightMap:!!e.lightMap,aoMap:!!e.aoMap,emissiveMap:!!e.emissiveMap,emissiveMapEncoding:o(e.emissiveMap,t.gammaInput),bumpMap:!!e.bumpMap,normalMap:!!e.normalMap,objectSpaceNormalMap:e.normalMapType===Oe,displacementMap:!!e.displacementMap,roughnessMap:!!e.roughnessMap,metalnessMap:!!e.metalnessMap,specularMap:!!e.specularMap,alphaMap:!!e.alphaMap,gradientMap:!!e.gradientMap,combine:e.combine,vertexColors:e.vertexColors,fog:!!s,useFog:e.fog,fogExp:s&&s.isFogExp2,flatShading:e.flatShading,sizeAttenuation:e.sizeAttenuation,logarithmicDepthBuffer:r.logarithmicDepthBuffer,skinning:e.skinning&&p>0,maxBones:p,useVertexTexture:r.floatVertexTextures,morphTargets:e.morphTargets,morphNormals:e.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:n.directional.length,numPointLights:n.point.length,numSpotLights:n.spot.length,numRectAreaLights:n.rectArea.length,numHemiLights:n.hemi.length,numClippingPlanes:c,numClipIntersection:h,dithering:e.dithering,shadowMapEnabled:t.shadowMap.enabled&&l.receiveShadow&&a.length>0,shadowMapType:t.shadowMap.type,toneMapping:t.toneMapping,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:e.premultipliedAlpha,alphaTest:e.alphaTest,doubleSided:e.side===_,flipSided:e.side===w,depthPacking:void 0!==e.depthPacking&&e.depthPacking}},this.getProgramCode=function(e,r){var n=[];if(r.shaderID?n.push(r.shaderID):(n.push(e.fragmentShader),n.push(e.vertexShader)),void 0!==e.defines)for(var i in e.defines)n.push(i),n.push(e.defines[i]);for(var o=0;o<a.length;o++)n.push(r[a[o]]);return n.push(e.onBeforeCompile.toString()),n.push(t.gammaOutput),n.push(t.gammaFactor),n.join()},this.acquireProgram=function(i,a,o,s){for(var c,h=0,l=n.length;h<l;h++){var u=n[h];if(u.code===s){++(c=u).usedTimes;break}}return void 0===c&&(c=new Ti(t,e,s,i,a,o,r),n.push(c)),c},this.releaseProgram=function(t){if(0==--t.usedTimes){var e=n.indexOf(t);n[e]=n[n.length-1],n.pop(),t.destroy()}},this.programs=n}function Li(){var t=new WeakMap;return{get:function(e){var r=t.get(e);return void 0===r&&(r={},t.set(e,r)),r},remove:function(e){t.delete(e)},update:function(e,r,n){t.get(e)[r]=n},dispose:function(){t=new WeakMap}}}function Pi(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program&&e.program&&t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function Ri(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function Ci(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:e.id-t.id}function Oi(){var t=[],e=0,r=[],n=[],i=[];function a(r,n,i,a,o,s){var c=t[e];return void 0===c?(c={id:r.id,object:r,geometry:n,material:i,program:i.program,groupOrder:a,renderOrder:r.renderOrder,z:o,group:s},t[e]=c):(c.id=r.id,c.object=r,c.geometry=n,c.material=i,c.program=i.program,c.groupOrder=a,c.renderOrder=r.renderOrder,c.z=o,c.group=s),e++,c}return{opaque:r,transparent:n,sprites:i,init:function(){e=0,r.length=0,n.length=0,i.length=0},push:function(t,e,o,s,c,h){var l=a(t,e,o,s,c,h);t.isSprite?i.push(l):(!0===o.transparent?n:r).push(l)},unshift:function(t,e,i,o,s,c){var h=a(t,e,i,o,s,c);(!0===i.transparent?n:r).unshift(h)},sort:function(){r.length>1&&r.sort(Pi),n.length>1&&n.sort(Ri),i.length>1&&i.sort(Ci)}}}function Ii(){var t={};function e(r){var n=r.target;n.removeEventListener("dispose",e),delete t[n.id]}return{get:function(r,n){var i,a=t[r.id];return void 0===a?(i=new Oi,t[r.id]={},t[r.id][n.id]=i,r.addEventListener("dispose",e)):void 0===(i=a[n.id])&&(i=new Oi,a[n.id]=i),i},dispose:function(){t={}}}}function Di(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var r;switch(e.type){case"DirectionalLight":r={direction:new ze,color:new lr,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new De};break;case"SpotLight":r={position:new ze,direction:new ze,color:new lr,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new De};break;case"PointLight":r={position:new ze,color:new lr,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new De,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":r={direction:new ze,skyColor:new lr,groundColor:new lr};break;case"RectAreaLight":r={color:new lr,position:new ze,halfWidth:new ze,halfHeight:new ze}}return t[e.id]=r,r}}}var Bi=0;function Ni(){var t=new Di,e={id:Bi++,hash:{stateID:-1,directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,shadowsLength:-1},ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},r=new ze,n=new Be,i=new Be;return{setup:function(a,o,s){for(var c=0,h=0,l=0,u=0,p=0,d=0,f=0,m=0,g=s.matrixWorldInverse,v=0,y=a.length;v<y;v++){var x=a[v],b=x.color,w=x.intensity,_=x.distance,M=x.shadow&&x.shadow.map?x.shadow.map.texture:null;if(x.isAmbientLight)c+=b.r*w,h+=b.g*w,l+=b.b*w;else if(x.isDirectionalLight){if((S=t.get(x)).color.copy(x.color).multiplyScalar(x.intensity),S.direction.setFromMatrixPosition(x.matrixWorld),r.setFromMatrixPosition(x.target.matrixWorld),S.direction.sub(r),S.direction.transformDirection(g),S.shadow=x.castShadow,x.castShadow){var E=x.shadow;S.shadowBias=E.bias,S.shadowRadius=E.radius,S.shadowMapSize=E.mapSize}e.directionalShadowMap[u]=M,e.directionalShadowMatrix[u]=x.shadow.matrix,e.directional[u]=S,u++}else if(x.isSpotLight)(S=t.get(x)).position.setFromMatrixPosition(x.matrixWorld),S.position.applyMatrix4(g),S.color.copy(b).multiplyScalar(w),S.distance=_,S.direction.setFromMatrixPosition(x.matrixWorld),r.setFromMatrixPosition(x.target.matrixWorld),S.direction.sub(r),S.direction.transformDirection(g),S.coneCos=Math.cos(x.angle),S.penumbraCos=Math.cos(x.angle*(1-x.penumbra)),S.decay=x.decay,S.shadow=x.castShadow,x.castShadow&&(E=x.shadow,S.shadowBias=E.bias,S.shadowRadius=E.radius,S.shadowMapSize=E.mapSize),e.spotShadowMap[d]=M,e.spotShadowMatrix[d]=x.shadow.matrix,e.spot[d]=S,d++;else if(x.isRectAreaLight)(S=t.get(x)).color.copy(b).multiplyScalar(w),S.position.setFromMatrixPosition(x.matrixWorld),S.position.applyMatrix4(g),i.identity(),n.copy(x.matrixWorld),n.premultiply(g),i.extractRotation(n),S.halfWidth.set(.5*x.width,0,0),S.halfHeight.set(0,.5*x.height,0),S.halfWidth.applyMatrix4(i),S.halfHeight.applyMatrix4(i),e.rectArea[f]=S,f++;else if(x.isPointLight)(S=t.get(x)).position.setFromMatrixPosition(x.matrixWorld),S.position.applyMatrix4(g),S.color.copy(x.color).multiplyScalar(x.intensity),S.distance=x.distance,S.decay=x.decay,S.shadow=x.castShadow,x.castShadow&&(E=x.shadow,S.shadowBias=E.bias,S.shadowRadius=E.radius,S.shadowMapSize=E.mapSize,S.shadowCameraNear=E.camera.near,S.shadowCameraFar=E.camera.far),e.pointShadowMap[p]=M,e.pointShadowMatrix[p]=x.shadow.matrix,e.point[p]=S,p++;else if(x.isHemisphereLight){var S;(S=t.get(x)).direction.setFromMatrixPosition(x.matrixWorld),S.direction.transformDirection(g),S.direction.normalize(),S.skyColor.copy(x.color).multiplyScalar(w),S.groundColor.copy(x.groundColor).multiplyScalar(w),e.hemi[m]=S,m++}}e.ambient[0]=c,e.ambient[1]=h,e.ambient[2]=l,e.directional.length=u,e.spot.length=d,e.rectArea.length=f,e.point.length=p,e.hemi.length=m,e.hash.stateID=e.id,e.hash.directionalLength=u,e.hash.pointLength=p,e.hash.spotLength=d,e.hash.rectAreaLength=f,e.hash.hemiLength=m,e.hash.shadowsLength=o.length},state:e}}function zi(){var t=new Ni,e=[],r=[];return{init:function(){e.length=0,r.length=0},state:{lightsArray:e,shadowsArray:r,lights:t},setupLights:function(n){t.setup(e,r,n)},pushLight:function(t){e.push(t)},pushShadow:function(t){r.push(t)}}}function Ui(){var t={};function e(r){var n=r.target;n.removeEventListener("dispose",e),delete t[n.id]}return{get:function(r,n){var i;return void 0===t[r.id]?(i=new zi,t[r.id]={},t[r.id][n.id]=i,r.addEventListener("dispose",e)):void 0===t[r.id][n.id]?(i=new zi,t[r.id][n.id]=i):i=t[r.id][n.id],i},dispose:function(){t={}}}}function Gi(t){sn.call(this),this.type="MeshDepthMaterial",this.depthPacking=Pe,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(t)}function Fi(t){sn.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new ze,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(t)}function Hi(t,e,r){for(var n=new er,i=new Be,a=new De,o=new De(r,r),s=new ze,c=new ze,h=1,l=2,u=1+(h|l),p=new Array(u),d=new Array(u),f={},m={0:w,1:b,2:_},g=[new ze(1,0,0),new ze(-1,0,0),new ze(0,0,1),new ze(0,0,-1),new ze(0,1,0),new ze(0,-1,0)],v=[new ze(0,1,0),new ze(0,1,0),new ze(0,1,0),new ze(0,1,0),new ze(0,0,1),new ze(0,0,-1)],x=[new Xe,new Xe,new Xe,new Xe,new Xe,new Xe],M=0;M!==u;++M){var E=0!=(M&h),S=0!=(M&l),A=new Gi({depthPacking:Re,morphTargets:E,skinning:S});p[M]=A;var L=new Fi({morphTargets:E,skinning:S});d[M]=L}var P=this;function R(e,r,n,i,a,o){var s=e.geometry,c=null,u=p,g=e.customDepthMaterial;if(n&&(u=d,g=e.customDistanceMaterial),g)c=g;else{var v=!1;r.morphTargets&&(s&&s.isBufferGeometry?v=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:s&&s.isGeometry&&(v=s.morphTargets&&s.morphTargets.length>0)),e.isSkinnedMesh&&!1===r.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",e);var y=e.isSkinnedMesh&&r.skinning,x=0;v&&(x|=h),y&&(x|=l),c=u[x]}if(t.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length){var b=c.uuid,w=r.uuid,_=f[b];void 0===_&&(_={},f[b]=_);var M=_[w];void 0===M&&(M=c.clone(),_[w]=M),c=M}return c.visible=r.visible,c.wireframe=r.wireframe,c.side=null!=r.shadowSide?r.shadowSide:m[r.side],c.clipShadows=r.clipShadows,c.clippingPlanes=r.clippingPlanes,c.clipIntersection=r.clipIntersection,c.wireframeLinewidth=r.wireframeLinewidth,c.linewidth=r.linewidth,n&&c.isMeshDistanceMaterial&&(c.referencePosition.copy(i),c.nearDistance=a,c.farDistance=o),c}function C(r,i,a,o){if(!1!==r.visible){if(r.layers.test(i.layers)&&(r.isMesh||r.isLine||r.isPoints)&&r.castShadow&&(!r.frustumCulled||n.intersectsObject(r))){r.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,r.matrixWorld);var s=e.update(r),h=r.material;if(Array.isArray(h))for(var l=s.groups,u=0,p=l.length;u<p;u++){var d=l[u],f=h[d.materialIndex];if(f&&f.visible){var m=R(r,f,o,c,a.near,a.far);t.renderBufferDirect(a,null,s,m,r,d)}}else if(h.visible){m=R(r,h,o,c,a.near,a.far);t.renderBufferDirect(a,null,s,m,r,null)}}for(var g=r.children,v=0,y=g.length;v<y;v++)C(g[v],i,a,o)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=y,this.render=function(e,r,h){if(!1!==P.enabled&&(!1!==P.autoUpdate||!1!==P.needsUpdate)&&0!==e.length){var l,u=t.state;u.setBlending(T),u.buffers.color.setClear(1,1,1,1),u.buffers.depth.setTest(!0),u.setScissorTest(!1);for(var p=0,d=e.length;p<d;p++){var f=e[p],m=f.shadow,y=f&&f.isPointLight;if(void 0!==m){var b=m.camera;if(a.copy(m.mapSize),a.min(o),y){var w=a.x,_=a.y;x[0].set(2*w,_,w,_),x[1].set(0,_,w,_),x[2].set(3*w,_,w,_),x[3].set(w,_,w,_),x[4].set(3*w,0,w,_),x[5].set(w,0,w,_),a.x*=4,a.y*=2}if(null===m.map){var M={minFilter:wt,magFilter:wt,format:Ht};m.map=new Ye(a.x,a.y,M),m.map.texture.name=f.name+".shadowMap",b.updateProjectionMatrix()}m.isSpotLightShadow&&m.update(f);var E=m.map,S=m.matrix;c.setFromMatrixPosition(f.matrixWorld),b.position.copy(c),y?(l=6,S.makeTranslation(-c.x,-c.y,-c.z)):(l=1,s.setFromMatrixPosition(f.target.matrixWorld),b.lookAt(s),b.updateMatrixWorld(),S.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),S.multiply(b.projectionMatrix),S.multiply(b.matrixWorldInverse)),t.setRenderTarget(E),t.clear();for(var A=0;A<l;A++){if(y){s.copy(b.position),s.add(g[A]),b.up.copy(v[A]),b.lookAt(s),b.updateMatrixWorld();var L=x[A];u.viewport(L)}i.multiplyMatrices(b.projectionMatrix,b.matrixWorldInverse),n.setFromMatrix(i),C(r,h,b,y)}}else console.warn("THREE.WebGLShadowMap:",f,"has no shadow.")}P.needsUpdate=!1}}}function Vi(t,e,r,n){var i=new function(){var e=!1,r=new Xe,n=null,i=new Xe(0,0,0,0);return{setMask:function(r){n===r||e||(t.colorMask(r,r,r,r),n=r)},setLocked:function(t){e=t},setClear:function(e,n,a,o,s){!0===s&&(e*=o,n*=o,a*=o),r.set(e,n,a,o),!1===i.equals(r)&&(t.clearColor(e,n,a,o),i.copy(r))},reset:function(){e=!1,n=null,i.set(-1,0,0,0)}}},a=new function(){var e=!1,r=null,n=null,i=null;return{setTest:function(t){t?at(2929):ot(2929)},setMask:function(n){r===n||e||(t.depthMask(n),r=n)},setFunc:function(e){if(n!==e){if(e)switch(e){case Y:t.depthFunc(512);break;case J:t.depthFunc(519);break;case Z:t.depthFunc(513);break;case Q:t.depthFunc(515);break;case K:t.depthFunc(514);break;case $:t.depthFunc(518);break;case tt:t.depthFunc(516);break;case et:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);n=e}},setLocked:function(t){e=t},setClear:function(e){i!==e&&(t.clearDepth(e),i=e)},reset:function(){e=!1,r=null,n=null,i=null}}},o=new function(){var e=!1,r=null,n=null,i=null,a=null,o=null,s=null,c=null,h=null;return{setTest:function(t){t?at(2960):ot(2960)},setMask:function(n){r===n||e||(t.stencilMask(n),r=n)},setFunc:function(e,r,o){n===e&&i===r&&a===o||(t.stencilFunc(e,r,o),n=e,i=r,a=o)},setOp:function(e,r,n){o===e&&s===r&&c===n||(t.stencilOp(e,r,n),o=e,s=r,c=n)},setLocked:function(t){e=t},setClear:function(e){h!==e&&(t.clearStencil(e),h=e)},reset:function(){e=!1,r=null,n=null,i=null,a=null,o=null,s=null,c=null,h=null}}},s=t.getParameter(34921),c=new Uint8Array(s),h=new Uint8Array(s),l=new Uint8Array(s),u={},p=null,d=null,f=null,y=null,x=null,b=null,M=null,E=null,S=null,I=null,D=!1,B=null,N=null,z=null,U=null,G=null,F=t.getParameter(35661),H=!1,V=0,k=t.getParameter(7938);-1!==k.indexOf("WebGL")?(V=parseFloat(/^WebGL\ ([0-9])/.exec(k)[1]),H=V>=1):-1!==k.indexOf("OpenGL ES")&&(V=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(k)[1]),H=V>=2);var j=null,W={},q=new Xe,X=new Xe;function rt(e,r,n){var i=new Uint8Array(4),a=t.createTexture();t.bindTexture(e,a),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(var o=0;o<n;o++)t.texImage2D(r+o,0,6408,1,1,0,6408,5121,i);return a}var nt={};function it(r,i){(c[r]=1,0===h[r]&&(t.enableVertexAttribArray(r),h[r]=1),l[r]!==i)&&((n.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](r,i),l[r]=i)}function at(e){!0!==u[e]&&(t.enable(e),u[e]=!0)}function ot(e){!1!==u[e]&&(t.disable(e),u[e]=!1)}function st(e,n,i,a,o,s,c,h){if(e!==T){if(f||(at(3042),f=!0),e===C)o=o||n,s=s||i,c=c||a,n===x&&o===E||(t.blendEquationSeparate(r.convert(n),r.convert(o)),x=n,E=o),i===b&&a===M&&s===S&&c===I||(t.blendFuncSeparate(r.convert(i),r.convert(a),r.convert(s),r.convert(c)),b=i,M=a,S=s,I=c),y=e,D=null;else if(e!==y||h!==D){if(x===O&&E===O||(t.blendEquation(32774),x=O,E=O),h)switch(e){case A:t.blendFuncSeparate(1,771,1,771);break;case L:t.blendFunc(1,1);break;case P:t.blendFuncSeparate(0,0,769,771);break;case R:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case A:t.blendFuncSeparate(770,771,1,771);break;case L:t.blendFunc(770,1);break;case P:t.blendFunc(0,769);break;case R:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}b=null,M=null,S=null,I=null,y=e,D=h}}else f&&(ot(3042),f=!1)}function ct(e){B!==e&&(e?t.frontFace(2304):t.frontFace(2305),B=e)}function ht(e){e!==m?(at(2884),e!==N&&(e===g?t.cullFace(1029):e===v?t.cullFace(1028):t.cullFace(1032))):ot(2884),N=e}function lt(e,r,n){e?(at(32823),U===r&&G===n||(t.polygonOffset(r,n),U=r,G=n)):ot(32823)}function ut(e){void 0===e&&(e=33984+F-1),j!==e&&(t.activeTexture(e),j=e)}return nt[3553]=rt(3553,3553,1),nt[34067]=rt(34067,34069,6),i.setClear(0,0,0,1),a.setClear(1),o.setClear(0),at(2929),a.setFunc(Q),ct(!1),ht(g),at(2884),st(T),{buffers:{color:i,depth:a,stencil:o},initAttributes:function(){for(var t=0,e=c.length;t<e;t++)c[t]=0},enableAttribute:function(t){it(t,0)},enableAttributeAndDivisor:it,disableUnusedAttributes:function(){for(var e=0,r=h.length;e!==r;++e)h[e]!==c[e]&&(t.disableVertexAttribArray(e),h[e]=0)},enable:at,disable:ot,getCompressedTextureFormats:function(){if(null===p&&(p=[],e.get("WEBGL_compressed_texture_pvrtc")||e.get("WEBGL_compressed_texture_s3tc")||e.get("WEBGL_compressed_texture_etc1")||e.get("WEBGL_compressed_texture_astc")))for(var r=t.getParameter(34467),n=0;n<r.length;n++)p.push(r[n]);return p},useProgram:function(e){return d!==e&&(t.useProgram(e),d=e,!0)},setBlending:st,setMaterial:function(t,e){t.side===_?ot(2884):at(2884);var r=t.side===w;e&&(r=!r),ct(r),t.blending===A&&!1===t.transparent?st(T):st(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),a.setFunc(t.depthFunc),a.setTest(t.depthTest),a.setMask(t.depthWrite),i.setMask(t.colorWrite),lt(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:ct,setCullFace:ht,setLineWidth:function(e){e!==z&&(H&&t.lineWidth(e),z=e)},setPolygonOffset:lt,setScissorTest:function(t){t?at(3089):ot(3089)},activeTexture:ut,bindTexture:function(e,r){null===j&&ut();var n=W[j];void 0===n&&(n={type:void 0,texture:void 0},W[j]=n),n.type===e&&n.texture===r||(t.bindTexture(e,r||nt[e]),n.type=e,n.texture=r)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(e){!1===q.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),q.copy(e))},viewport:function(e){!1===X.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),X.copy(e))},reset:function(){for(var e=0;e<h.length;e++)1===h[e]&&(t.disableVertexAttribArray(e),h[e]=0);u={},p=null,j=null,W={},d=null,y=null,B=null,N=null,i.reset(),a.reset(),o.reset()}}}function ki(t,e,r,n,i,a,o){var s,c={};function h(t,e,r,n){var i=1;if((t.width>n||t.height>n)&&(i=n/Math.max(t.width,t.height)),i<1||!0===e){if(t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof ImageBitmap){void 0===s&&(s=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"));var a=r?document.createElementNS("http://www.w3.org/1999/xhtml","canvas"):s,o=e?Ie.floorPowerOfTwo:Math.floor;return a.width=o(i*t.width),a.height=o(i*t.height),a.getContext("2d").drawImage(t,0,0,a.width,a.height),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+a.width+"x"+a.height+")."),a}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function l(t){return Ie.isPowerOfTwo(t.width)&&Ie.isPowerOfTwo(t.height)}function u(t,e){return t.generateMipmaps&&e&&t.minFilter!==wt&&t.minFilter!==Et}function p(e,r,i,a){t.generateMipmap(e),n.get(r).__maxMipLevel=Math.log(Math.max(i,a))*Math.LOG2E}function d(t,r){if(!i.isWebGL2)return t;var n=t;return 6403===t&&(5126===r&&(n=33326),5131===r&&(n=33325),5121===r&&(n=33321)),6407===t&&(5126===r&&(n=34837),5131===r&&(n=34843),5121===r&&(n=32849)),6408===t&&(5126===r&&(n=34836),5131===r&&(n=34842),5121===r&&(n=32856)),33325===n||33326===n||34842===n||34836===n?e.get("EXT_color_buffer_float"):34843!==n&&34837!==n||console.warn("THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead."),n}function f(t){return t===wt||t===_t||t===Mt?9728:9729}function m(e){var r=e.target;r.removeEventListener("dispose",m),function(e){var r=n.get(e);if(e.image&&r.__image__webglTextureCube)t.deleteTexture(r.__image__webglTextureCube);else{if(void 0===r.__webglInit)return;t.deleteTexture(r.__webglTexture)}n.remove(e)}(r),r.isVideoTexture&&delete c[r.id],o.memory.textures--}function g(e){var r=e.target;r.removeEventListener("dispose",g),function(e){var r=n.get(e),i=n.get(e.texture);if(!e)return;void 0!==i.__webglTexture&&t.deleteTexture(i.__webglTexture);e.depthTexture&&e.depthTexture.dispose();if(e.isWebGLRenderTargetCube)for(var a=0;a<6;a++)t.deleteFramebuffer(r.__webglFramebuffer[a]),r.__webglDepthbuffer&&t.deleteRenderbuffer(r.__webglDepthbuffer[a]);else t.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&t.deleteRenderbuffer(r.__webglDepthbuffer);n.remove(e.texture),n.remove(e)}(r),o.memory.textures--}function v(t,e){var i=n.get(t);if(t.isVideoTexture&&function(t){var e=t.id,r=o.render.frame;c[e]!==r&&(c[e]=r,t.update())}(t),t.version>0&&i.__version!==t.version){var a=t.image;if(void 0===a)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==a.complete)return void x(i,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}r.activeTexture(33984+e),r.bindTexture(3553,i.__webglTexture)}function y(r,o,s){var c;if(s?(t.texParameteri(r,10242,a.convert(o.wrapS)),t.texParameteri(r,10243,a.convert(o.wrapT)),t.texParameteri(r,10240,a.convert(o.magFilter)),t.texParameteri(r,10241,a.convert(o.minFilter))):(t.texParameteri(r,10242,33071),t.texParameteri(r,10243,33071),o.wrapS===xt&&o.wrapT===xt||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(r,10240,f(o.magFilter)),t.texParameteri(r,10241,f(o.minFilter)),o.minFilter!==wt&&o.minFilter!==Et&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),c=e.get("EXT_texture_filter_anisotropic")){if(o.type===It&&null===e.get("OES_texture_float_linear"))return;if(o.type===Dt&&null===(i.isWebGL2||e.get("OES_texture_half_float_linear")))return;(o.anisotropy>1||n.get(o).__currentAnisotropy)&&(t.texParameterf(r,c.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),n.get(o).__currentAnisotropy=o.anisotropy)}}function x(e,n,s){var c;c=n.isDataTexture3D?32879:3553,void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",m),e.__webglTexture=t.createTexture(),o.memory.textures++),r.activeTexture(33984+s),r.bindTexture(c,e.__webglTexture),t.pixelStorei(37440,n.flipY),t.pixelStorei(37441,n.premultiplyAlpha),t.pixelStorei(3317,n.unpackAlignment);var f=function(t){return!i.isWebGL2&&(t.wrapS!==xt||t.wrapT!==xt||t.minFilter!==wt&&t.minFilter!==Et)}(n)&&!1===l(n.image),g=h(n.image,f,!1,i.maxTextureSize),v=l(g)||i.isWebGL2,x=a.convert(n.format),b=a.convert(n.type),w=d(x,b);y(c,n,v);var _,M=n.mipmaps;if(n.isDepthTexture){if(w=6402,n.type===It){if(!i.isWebGL2)throw new Error("Float Depth Texture only supported in WebGL2.0");w=36012}else i.isWebGL2&&(w=33189);n.format===Wt&&6402===w&&n.type!==Rt&&n.type!==Ot&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),n.type=Rt,b=a.convert(n.type)),n.format===qt&&(w=34041,n.type!==Ut&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),n.type=Ut,b=a.convert(n.type))),r.texImage2D(3553,0,w,g.width,g.height,0,x,b,null)}else if(n.isDataTexture)if(M.length>0&&v){for(var E=0,S=M.length;E<S;E++)_=M[E],r.texImage2D(3553,E,w,_.width,_.height,0,x,b,_.data);n.generateMipmaps=!1,e.__maxMipLevel=M.length-1}else r.texImage2D(3553,0,w,g.width,g.height,0,x,b,g.data),e.__maxMipLevel=0;else if(n.isCompressedTexture){for(E=0,S=M.length;E<S;E++)_=M[E],n.format!==Ht&&n.format!==Ft?r.getCompressedTextureFormats().indexOf(x)>-1?r.compressedTexImage2D(3553,E,w,_.width,_.height,0,_.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):r.texImage2D(3553,E,w,_.width,_.height,0,x,b,_.data);e.__maxMipLevel=M.length-1}else if(n.isDataTexture3D)r.texImage3D(32879,0,w,g.width,g.height,g.depth,0,x,b,g.data),e.__maxMipLevel=0;else if(M.length>0&&v){for(E=0,S=M.length;E<S;E++)_=M[E],r.texImage2D(3553,E,w,x,b,_);n.generateMipmaps=!1,e.__maxMipLevel=M.length-1}else r.texImage2D(3553,0,w,x,b,g),e.__maxMipLevel=0;u(n,v)&&p(3553,n,g.width,g.height),e.__version=n.version,n.onUpdate&&n.onUpdate(n)}function b(e,i,o,s){var c=a.convert(i.texture.format),h=a.convert(i.texture.type),l=d(c,h);r.texImage2D(s,0,l,i.width,i.height,0,c,h,null),t.bindFramebuffer(36160,e),t.framebufferTexture2D(36160,o,s,n.get(i.texture).__webglTexture,0),t.bindFramebuffer(36160,null)}function w(e,r,n){if(t.bindRenderbuffer(36161,e),r.depthBuffer&&!r.stencilBuffer){if(n){var i=M(r);t.renderbufferStorageMultisample(36161,i,33189,r.width,r.height)}else t.renderbufferStorage(36161,33189,r.width,r.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(r.depthBuffer&&r.stencilBuffer){if(n){i=M(r);t.renderbufferStorageMultisample(36161,i,34041,r.width,r.height)}else t.renderbufferStorage(36161,34041,r.width,r.height);t.framebufferRenderbuffer(36160,33306,36161,e)}else{var o=d(a.convert(r.texture.format),a.convert(r.texture.type));if(n){i=M(r);t.renderbufferStorageMultisample(36161,i,o,r.width,r.height)}else t.renderbufferStorage(36161,o,r.width,r.height)}t.bindRenderbuffer(36161,null)}function _(e){var r=n.get(e),i=!0===e.isWebGLRenderTargetCube;if(e.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,r){if(r&&r.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,e),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");n.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),v(r.depthTexture,0);var i=n.get(r.depthTexture).__webglTexture;if(r.depthTexture.format===Wt)t.framebufferTexture2D(36160,36096,3553,i,0);else{if(r.depthTexture.format!==qt)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(36160,33306,3553,i,0)}}(r.__webglFramebuffer,e)}else if(i){r.__webglDepthbuffer=[];for(var a=0;a<6;a++)t.bindFramebuffer(36160,r.__webglFramebuffer[a]),r.__webglDepthbuffer[a]=t.createRenderbuffer(),w(r.__webglDepthbuffer[a],e)}else t.bindFramebuffer(36160,r.__webglFramebuffer),r.__webglDepthbuffer=t.createRenderbuffer(),w(r.__webglDepthbuffer,e);t.bindFramebuffer(36160,null)}function M(t){return i.isWebGL2&&t.isWebGLMultisampleRenderTarget?Math.min(i.maxSamples,t.samples):0}this.setTexture2D=v,this.setTexture3D=function(t,e){var i=n.get(t);t.version>0&&i.__version!==t.version?x(i,t,e):(r.activeTexture(33984+e),r.bindTexture(32879,i.__webglTexture))},this.setTextureCube=function(e,s){var c=n.get(e);if(6===e.image.length)if(e.version>0&&c.__version!==e.version){c.__image__webglTextureCube||(e.addEventListener("dispose",m),c.__image__webglTextureCube=t.createTexture(),o.memory.textures++),r.activeTexture(33984+s),r.bindTexture(34067,c.__image__webglTextureCube),t.pixelStorei(37440,e.flipY);for(var f=e&&e.isCompressedTexture,g=e.image[0]&&e.image[0].isDataTexture,v=[],x=0;x<6;x++)v[x]=f||g?g?e.image[x].image:e.image[x]:h(e.image[x],!1,!0,i.maxCubemapSize);var b=v[0],w=l(b)||i.isWebGL2,_=a.convert(e.format),M=a.convert(e.type),E=d(_,M);for(y(34067,e,w),x=0;x<6;x++)if(f)for(var S,T=v[x].mipmaps,A=0,L=T.length;A<L;A++)S=T[A],e.format!==Ht&&e.format!==Ft?r.getCompressedTextureFormats().indexOf(_)>-1?r.compressedTexImage2D(34069+x,A,E,S.width,S.height,0,S.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):r.texImage2D(34069+x,A,E,S.width,S.height,0,_,M,S.data);else g?r.texImage2D(34069+x,0,E,v[x].width,v[x].height,0,_,M,v[x].data):r.texImage2D(34069+x,0,E,_,M,v[x]);c.__maxMipLevel=f?T.length-1:0,u(e,w)&&p(34067,e,b.width,b.height),c.__version=e.version,e.onUpdate&&e.onUpdate(e)}else r.activeTexture(33984+s),r.bindTexture(34067,c.__image__webglTextureCube)},this.setTextureCubeDynamic=function(t,e){r.activeTexture(33984+e),r.bindTexture(34067,n.get(t).__webglTexture)},this.setupRenderTarget=function(e){var s=n.get(e),c=n.get(e.texture);e.addEventListener("dispose",g),c.__webglTexture=t.createTexture(),o.memory.textures++;var h=!0===e.isWebGLRenderTargetCube,f=!0===e.isWebGLMultisampleRenderTarget,m=l(e)||i.isWebGL2;if(h){s.__webglFramebuffer=[];for(var v=0;v<6;v++)s.__webglFramebuffer[v]=t.createFramebuffer()}else if(s.__webglFramebuffer=t.createFramebuffer(),f)if(i.isWebGL2){s.__webglMultisampledFramebuffer=t.createFramebuffer(),s.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,s.__webglColorRenderbuffer);var x=d(a.convert(e.texture.format),a.convert(e.texture.type)),E=M(e);t.renderbufferStorageMultisample(36161,E,x,e.width,e.height),t.bindFramebuffer(36160,s.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,s.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),e.depthBuffer&&(s.__webglDepthRenderbuffer=t.createRenderbuffer(),w(s.__webglDepthRenderbuffer,e,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(h){for(r.bindTexture(34067,c.__webglTexture),y(34067,e.texture,m),v=0;v<6;v++)b(s.__webglFramebuffer[v],e,36064,34069+v);u(e.texture,m)&&p(34067,e.texture,e.width,e.height),r.bindTexture(34067,null)}else r.bindTexture(3553,c.__webglTexture),y(3553,e.texture,m),b(s.__webglFramebuffer,e,36064,3553),u(e.texture,m)&&p(3553,e.texture,e.width,e.height),r.bindTexture(3553,null);e.depthBuffer&&_(e)},this.updateRenderTargetMipmap=function(t){var e=t.texture;if(u(e,l(t)||i.isWebGL2)){var a=t.isWebGLRenderTargetCube?34067:3553,o=n.get(e).__webglTexture;r.bindTexture(a,o),p(a,e,t.width,t.height),r.bindTexture(a,null)}},this.updateMultisampleRenderTarget=function(e){if(e.isWebGLMultisampleRenderTarget)if(i.isWebGL2){var r=n.get(e);t.bindFramebuffer(36008,r.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,r.__webglFramebuffer);var a=e.width,o=e.height,s=16384;e.depthBuffer&&(s|=256),e.stencilBuffer&&(s|=1024),t.blitFramebuffer(0,0,a,o,0,0,a,o,s,9728)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}}function ji(t,e,r){return{convert:function(t){var n;if(t===yt)return 10497;if(t===xt)return 33071;if(t===bt)return 33648;if(t===wt)return 9728;if(t===_t)return 9984;if(t===Mt)return 9986;if(t===Et)return 9729;if(t===St)return 9985;if(t===Tt)return 9987;if(t===At)return 5121;if(t===Bt)return 32819;if(t===Nt)return 32820;if(t===zt)return 33635;if(t===Lt)return 5120;if(t===Pt)return 5122;if(t===Rt)return 5123;if(t===Ct)return 5124;if(t===Ot)return 5125;if(t===It)return 5126;if(t===Dt){if(r.isWebGL2)return 5131;if(null!==(n=e.get("OES_texture_half_float")))return n.HALF_FLOAT_OES}if(t===Gt)return 6406;if(t===Ft)return 6407;if(t===Ht)return 6408;if(t===Vt)return 6409;if(t===kt)return 6410;if(t===Wt)return 6402;if(t===qt)return 34041;if(t===Xt)return 6403;if(t===O)return 32774;if(t===I)return 32778;if(t===D)return 32779;if(t===z)return 0;if(t===U)return 1;if(t===G)return 768;if(t===F)return 769;if(t===H)return 770;if(t===V)return 771;if(t===k)return 772;if(t===j)return 773;if(t===W)return 774;if(t===q)return 775;if(t===X)return 776;if((t===Yt||t===Jt||t===Zt||t===Qt)&&null!==(n=e.get("WEBGL_compressed_texture_s3tc"))){if(t===Yt)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===Jt)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===Zt)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===Qt)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((t===Kt||t===$t||t===te||t===ee)&&null!==(n=e.get("WEBGL_compressed_texture_pvrtc"))){if(t===Kt)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===$t)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===te)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===ee)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(t===re&&null!==(n=e.get("WEBGL_compressed_texture_etc1")))return n.COMPRESSED_RGB_ETC1_WEBGL;if((t===ne||t===ie||t===ae||t===oe||t===se||t===ce||t===he||t===le||t===ue||t===pe||t===de||t===fe||t===me||t===ge)&&null!==(n=e.get("WEBGL_compressed_texture_astc")))return t;if(t===B||t===N){if(r.isWebGL2){if(t===B)return 32775;if(t===N)return 32776}if(null!==(n=e.get("EXT_blend_minmax"))){if(t===B)return n.MIN_EXT;if(t===N)return n.MAX_EXT}}if(t===Ut){if(r.isWebGL2)return 34042;if(null!==(n=e.get("WEBGL_depth_texture")))return n.UNSIGNED_INT_24_8_WEBGL}return 0}}}function Wi(){Er.call(this),this.type="Group"}function qi(){Er.call(this),this.type="Camera",this.matrixWorldInverse=new Be,this.projectionMatrix=new Be,this.projectionMatrixInverse=new Be}function Xi(t,e,r,n){qi.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==r?r:.1,this.far=void 0!==n?n:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Yi(t){Xi.call(this),this.cameras=t||[]}Gi.prototype=Object.create(sn.prototype),Gi.prototype.constructor=Gi,Gi.prototype.isMeshDepthMaterial=!0,Gi.prototype.copy=function(t){return sn.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},Fi.prototype=Object.create(sn.prototype),Fi.prototype.constructor=Fi,Fi.prototype.isMeshDistanceMaterial=!0,Fi.prototype.copy=function(t){return sn.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this},Wi.prototype=Object.assign(Object.create(Er.prototype),{constructor:Wi,isGroup:!0}),qi.prototype=Object.assign(Object.create(Er.prototype),{constructor:qi,isCamera:!0,copy:function(t,e){return Er.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new ze),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(t){Er.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),Xi.prototype=Object.assign(Object.create(qi.prototype),{constructor:Xi,isPerspectiveCamera:!0,copy:function(t,e){return qi.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){var e=.5*this.getFilmHeight()/t;this.fov=2*Ie.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*Ie.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*Ie.RAD2DEG*Math.atan(Math.tan(.5*Ie.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,r,n,i,a){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=r,this.view.offsetY=n,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(.5*Ie.DEG2RAD*this.fov)/this.zoom,r=2*e,n=this.aspect*r,i=-.5*n,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;i+=a.offsetX*n/o,e-=a.offsetY*r/s,n*=a.width/o,r*=a.height/s}var c=this.filmOffset;0!==c&&(i+=t*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+n,e,e-r,t,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var e=Er.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}),Yi.prototype=Object.assign(Object.create(Xi.prototype),{constructor:Yi,isArrayCamera:!0});var Ji,Zi,Qi,Ki,$i,ta,ea=new ze,ra=new ze;function na(t,e,r){ea.setFromMatrixPosition(e.matrixWorld),ra.setFromMatrixPosition(r.matrixWorld);var n=ea.distanceTo(ra),i=e.projectionMatrix.elements,a=r.projectionMatrix.elements,o=i[14]/(i[10]-1),s=i[14]/(i[10]+1),c=(i[9]+1)/i[5],h=(i[9]-1)/i[5],l=(i[8]-1)/i[0],u=(a[8]+1)/a[0],p=o*l,d=o*u,f=n/(-l+u),m=f*-l;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(m),t.translateZ(f),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.getInverse(t.matrixWorld);var g=o+f,v=s+f,y=p-m,x=d+(n-m),b=c*s/v*g,w=h*s/v*g;t.projectionMatrix.makePerspective(y,x,b,w,g,v)}function ia(t){var e=this,r=null,n=null,i=null,a=[],o=new Be,s=new Be,c=1,h="stage";"undefined"!=typeof window&&"VRFrameData"in window&&(n=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",x,!1));var l=new Be,u=new Ne,p=new ze,d=new Xi;d.bounds=new Xe(0,0,.5,1),d.layers.enable(1);var f=new Xi;f.bounds=new Xe(.5,0,.5,1),f.layers.enable(2);var m,g,v=new Yi([d,f]);function y(){return null!==r&&!0===r.isPresenting}function x(){if(y()){var n=r.getEyeParameters("left"),i=n.renderWidth*c,a=n.renderHeight*c;g=t.getPixelRatio(),m=t.getSize(),t.setDrawingBufferSize(2*i,a,1),_.start()}else e.enabled&&t.setDrawingBufferSize(m.width,m.height,g),_.stop()}v.layers.enable(1),v.layers.enable(2);var b=[];function w(t){for(var e=navigator.getGamepads&&navigator.getGamepads(),r=0,n=0,i=e.length;r<i;r++){var a=e[r];if(a&&("Daydream Controller"===a.id||"Gear VR Controller"===a.id||"Oculus Go Controller"===a.id||"OpenVR Gamepad"===a.id||a.id.startsWith("Oculus Touch")||a.id.startsWith("Spatial Controller"))){if(n===t)return a;n++}}}this.enabled=!1,this.getController=function(t){var e=a[t];return void 0===e&&((e=new Wi).matrixAutoUpdate=!1,e.visible=!1,a[t]=e),e},this.getDevice=function(){return r},this.setDevice=function(t){void 0!==t&&(r=t),_.setContext(t)},this.setFramebufferScaleFactor=function(t){c=t},this.setFrameOfReferenceType=function(t){h=t},this.setPoseTarget=function(t){void 0!==t&&(i=t)},this.getCamera=function(t){var e="stage"===h?1.6:0;if(null===r)return t.position.set(0,e,0),t;if(r.depthNear=t.near,r.depthFar=t.far,r.getFrameData(n),"stage"===h){var c=r.stageParameters;c?o.fromArray(c.sittingToStandingTransform):o.makeTranslation(0,e,0)}var m=n.pose,g=null!==i?i:t;if(g.matrix.copy(o),g.matrix.decompose(g.position,g.quaternion,g.scale),null!==m.orientation&&(u.fromArray(m.orientation),g.quaternion.multiply(u)),null!==m.position&&(u.setFromRotationMatrix(o),p.fromArray(m.position),p.applyQuaternion(u),g.position.add(p)),g.updateMatrixWorld(),!1===r.isPresenting)return t;d.near=t.near,f.near=t.near,d.far=t.far,f.far=t.far,d.matrixWorldInverse.fromArray(n.leftViewMatrix),f.matrixWorldInverse.fromArray(n.rightViewMatrix),s.getInverse(o),"stage"===h&&(d.matrixWorldInverse.multiply(s),f.matrixWorldInverse.multiply(s));var y=g.parent;null!==y&&(l.getInverse(y.matrixWorld),d.matrixWorldInverse.multiply(l),f.matrixWorldInverse.multiply(l)),d.matrixWorld.getInverse(d.matrixWorldInverse),f.matrixWorld.getInverse(f.matrixWorldInverse),d.projectionMatrix.fromArray(n.leftProjectionMatrix),f.projectionMatrix.fromArray(n.rightProjectionMatrix),na(v,d,f);var x=r.getLayers();if(x.length){var _=x[0];null!==_.leftBounds&&4===_.leftBounds.length&&d.bounds.fromArray(_.leftBounds),null!==_.rightBounds&&4===_.rightBounds.length&&f.bounds.fromArray(_.rightBounds)}return function(){for(var t=0;t<a.length;t++){var e=a[t],r=w(t);if(void 0!==r&&void 0!==r.pose){if(null===r.pose)return;var n=r.pose;!1===n.hasPosition&&e.position.set(.2,-.6,-.05),null!==n.position&&e.position.fromArray(n.position),null!==n.orientation&&e.quaternion.fromArray(n.orientation),e.matrix.compose(e.position,e.quaternion,e.scale),e.matrix.premultiply(o),e.matrix.decompose(e.position,e.quaternion,e.scale),e.matrixWorldNeedsUpdate=!0,e.visible=!0;var i="Daydream Controller"===r.id?0:1;b[t]!==r.buttons[i].pressed&&(b[t]=r.buttons[i].pressed,!0===b[t]?e.dispatchEvent({type:"selectstart"}):(e.dispatchEvent({type:"selectend"}),e.dispatchEvent({type:"select"})))}else e.visible=!1}}(),v},this.getStandingMatrix=function(){return o},this.isPresenting=y;var _=new fr;this.setAnimationLoop=function(t){_.setAnimationLoop(t)},this.submitFrame=function(){y()&&r.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",x)}}function aa(t){var e=t.context,r=null,n=null,i=1,a=null,o="stage",s=null,c=[],h=[];function l(){return null!==n&&null!==a}var u=new Xi;u.layers.enable(1),u.viewport=new Xe;var p=new Xi;p.layers.enable(2),p.viewport=new Xe;var d=new Yi([u,p]);function f(t){var e=c[h.indexOf(t.inputSource)];e&&e.dispatchEvent({type:t.type})}function m(){t.setFramebuffer(null),y.stop()}function g(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.getInverse(t.matrixWorld)}d.layers.enable(1),d.layers.enable(2),this.enabled=!1,this.getController=function(t){var e=c[t];return void 0===e&&((e=new Wi).matrixAutoUpdate=!1,e.visible=!1,c[t]=e),e},this.getDevice=function(){return r},this.setDevice=function(t){void 0!==t&&(r=t),t instanceof XRDevice&&e.setCompatibleXRDevice(t)},this.setFramebufferScaleFactor=function(t){i=t},this.setFrameOfReferenceType=function(t){o=t},this.setSession=function(r){null!==(n=r)&&(n.addEventListener("select",f),n.addEventListener("selectstart",f),n.addEventListener("selectend",f),n.addEventListener("end",m),n.baseLayer=new XRWebGLLayer(n,e,{framebufferScaleFactor:i}),n.requestFrameOfReference(o).then(function(e){a=e,t.setFramebuffer(n.baseLayer.framebuffer),y.setContext(n),y.start()}),h=n.getInputSources(),n.addEventListener("inputsourceschange",function(){h=n.getInputSources(),console.log(h);for(var t=0;t<c.length;t++){c[t].userData.inputSource=h[t]}}))},this.getCamera=function(t){if(l()){var e=t.parent,r=d.cameras;g(d,e);for(var n=0;n<r.length;n++)g(r[n],e);t.matrixWorld.copy(d.matrixWorld);for(var i=t.children,a=(n=0,i.length);n<a;n++)i[n].updateMatrixWorld(!0);return na(d,u,p),d}return t},this.isPresenting=l;var v=null;var y=new fr;y.setAnimationLoop(function(t,e){if(null!==(s=e.getDevicePose(a)))for(var r=n.baseLayer,i=e.views,o=0;o<i.length;o++){var l=i[o],u=r.getViewport(l),p=s.getViewMatrix(l),f=d.cameras[o];f.matrix.fromArray(p).getInverse(f.matrix),f.projectionMatrix.fromArray(l.projectionMatrix),f.viewport.set(u.x,u.y,u.width,u.height),0===o&&d.matrix.copy(f.matrix)}for(o=0;o<c.length;o++){var m=c[o],g=h[o];if(g){var y=e.getInputPose(g,a);if(null!==y){"targetRay"in y?m.matrix.elements=y.targetRay.transformMatrix:"pointerMatrix"in y&&(m.matrix.elements=y.pointerMatrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.visible=!0;continue}}m.visible=!1}v&&v(t)}),this.setAnimationLoop=function(t){v=t},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new THREE.Matrix4},this.submitFrame=function(){}}function oa(t){console.log("THREE.WebGLRenderer",f);var e=void 0!==(t=t||{}).canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),r=void 0!==t.context?t.context:null,n=void 0!==t.alpha&&t.alpha,i=void 0===t.depth||t.depth,a=void 0===t.stencil||t.stencil,o=void 0!==t.antialias&&t.antialias,s=void 0===t.premultipliedAlpha||t.premultipliedAlpha,c=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,h=void 0!==t.powerPreference?t.powerPreference:"default",l=null,u=null;this.domElement=e,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=ot,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var p,d,m,g,v,y,x,b,_,M,E,S,T,A,L,P,R,C,O=this,I=!1,D=null,B=null,N=null,z=-1,U={geometry:null,program:null,wireframe:!1},G=null,F=null,H=new Xe,V=new Xe,k=null,j=0,W=e.width,q=e.height,X=1,Y=new Xe(0,0,W,q),J=new Xe(0,0,W,q),Z=!1,Q=new er,K=new gn,$=!1,tt=!1,et=new Be,rt=new ze;function nt(){return null===B?X:1}try{var it={alpha:n,depth:i,stencil:a,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:c,powerPreference:h};if(e.addEventListener("webglcontextlost",ht,!1),e.addEventListener("webglcontextrestored",lt,!1),null===(p=r||e.getContext("webgl",it)||e.getContext("experimental-webgl",it)))throw null!==e.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===p.getShaderPrecisionFormat&&(p.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){console.error("THREE.WebGLRenderer: "+t.message)}function at(){d=new vn(p),(m=new mn(p,d,t)).isWebGL2||(d.get("WEBGL_depth_texture"),d.get("OES_texture_float"),d.get("OES_texture_half_float"),d.get("OES_texture_half_float_linear"),d.get("OES_standard_derivatives"),d.get("OES_element_index_uint"),d.get("ANGLE_instanced_arrays")),d.get("OES_texture_float_linear"),C=new ji(p,d,m),(g=new Vi(p,d,C,m)).scissor(V.copy(J).multiplyScalar(X)),g.viewport(H.copy(Y).multiplyScalar(X)),v=new bn(p),y=new Li,x=new ki(p,d,g,y,m,C,v),b=new mr(p),_=new yn(p,b,v),M=new Mn(_,v),L=new _n(p),E=new Ai(O,d,m),S=new Ii,T=new Ui,A=new dn(O,g,M,s),P=new fn(p,d,v,m),R=new xn(p,d,v,m),v.programs=E.programs,O.context=p,O.capabilities=m,O.extensions=d,O.properties=y,O.renderLists=S,O.state=g,O.info=v}at();var st=null;"undefined"!=typeof navigator&&(st="xr"in navigator?new aa(O):new ia(O)),this.vr=st;var ct=new Hi(O,M,m.maxTextureSize);function ht(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),I=!0}function lt(){console.log("THREE.WebGLRenderer: Context Restored."),I=!1,at()}function ut(t){var e=t.target;e.removeEventListener("dispose",ut),function(t){pt(t),y.remove(t)}(e)}function pt(t){var e=y.get(t).program;t.program=void 0,void 0!==e&&E.releaseProgram(e)}this.shadowMap=ct,this.getContext=function(){return p},this.getContextAttributes=function(){return p.getContextAttributes()},this.forceContextLoss=function(){var t=d.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){var t=d.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return X},this.setPixelRatio=function(t){void 0!==t&&(X=t,this.setSize(W,q,!1))},this.getSize=function(){return{width:W,height:q}},this.setSize=function(t,r,n){st.isPresenting()?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(W=t,q=r,e.width=t*X,e.height=r*X,!1!==n&&(e.style.width=t+"px",e.style.height=r+"px"),this.setViewport(0,0,t,r))},this.getDrawingBufferSize=function(){return{width:W*X,height:q*X}},this.setDrawingBufferSize=function(t,r,n){W=t,q=r,X=n,e.width=t*n,e.height=r*n,this.setViewport(0,0,t,r)},this.getCurrentViewport=function(){return H},this.setViewport=function(t,e,r,n){Y.set(t,q-e-n,r,n),g.viewport(H.copy(Y).multiplyScalar(X))},this.setScissor=function(t,e,r,n){J.set(t,q-e-n,r,n),g.scissor(V.copy(J).multiplyScalar(X))},this.setScissorTest=function(t){g.setScissorTest(Z=t)},this.getClearColor=function(){return A.getClearColor()},this.setClearColor=function(){A.setClearColor.apply(A,arguments)},this.getClearAlpha=function(){return A.getClearAlpha()},this.setClearAlpha=function(){A.setClearAlpha.apply(A,arguments)},this.clear=function(t,e,r){var n=0;(void 0===t||t)&&(n|=16384),(void 0===e||e)&&(n|=256),(void 0===r||r)&&(n|=1024),p.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",ht,!1),e.removeEventListener("webglcontextrestored",lt,!1),S.dispose(),T.dispose(),y.dispose(),M.dispose(),st.dispose(),mt.stop()},this.renderBufferImmediate=function(t,e){g.initAttributes();var r=y.get(t);t.hasPositions&&!r.position&&(r.position=p.createBuffer()),t.hasNormals&&!r.normal&&(r.normal=p.createBuffer()),t.hasUvs&&!r.uv&&(r.uv=p.createBuffer()),t.hasColors&&!r.color&&(r.color=p.createBuffer());var n=e.getAttributes();t.hasPositions&&(p.bindBuffer(34962,r.position),p.bufferData(34962,t.positionArray,35048),g.enableAttribute(n.position),p.vertexAttribPointer(n.position,3,5126,!1,0,0)),t.hasNormals&&(p.bindBuffer(34962,r.normal),p.bufferData(34962,t.normalArray,35048),g.enableAttribute(n.normal),p.vertexAttribPointer(n.normal,3,5126,!1,0,0)),t.hasUvs&&(p.bindBuffer(34962,r.uv),p.bufferData(34962,t.uvArray,35048),g.enableAttribute(n.uv),p.vertexAttribPointer(n.uv,2,5126,!1,0,0)),t.hasColors&&(p.bindBuffer(34962,r.color),p.bufferData(34962,t.colorArray,35048),g.enableAttribute(n.color),p.vertexAttribPointer(n.color,3,5126,!1,0,0)),g.disableUnusedAttributes(),p.drawArrays(4,0,t.count),t.count=0},this.renderBufferDirect=function(t,e,r,n,i,a){var o=i.isMesh&&i.normalMatrix.determinant()<0;g.setMaterial(n,o);var s=xt(t,e,n,i),c=!1;U.geometry===r.id&&U.program===s.id&&U.wireframe===(!0===n.wireframe)||(U.geometry=r.id,U.program=s.id,U.wireframe=!0===n.wireframe,c=!0),i.morphTargetInfluences&&(L.update(i,r,n,s),c=!0);var h,l=r.index,u=r.attributes.position,f=1;!0===n.wireframe&&(l=_.getWireframeAttribute(r),f=2);var v=P;null!==l&&(h=b.get(l),(v=R).setIndex(h)),c&&(!function(t,e,r){if(r&&r.isInstancedBufferGeometry&!m.isWebGL2&&null===d.get("ANGLE_instanced_arrays"))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");g.initAttributes();var n=r.attributes,i=e.getAttributes(),a=t.defaultAttributeValues;for(var o in i){var s=i[o];if(s>=0){var c=n[o];if(void 0!==c){var h=c.normalized,l=c.itemSize,u=b.get(c);if(void 0===u)continue;var f=u.buffer,v=u.type,y=u.bytesPerElement;if(c.isInterleavedBufferAttribute){var x=c.data,w=x.stride,_=c.offset;x&&x.isInstancedInterleavedBuffer?(g.enableAttributeAndDivisor(s,x.meshPerAttribute),void 0===r.maxInstancedCount&&(r.maxInstancedCount=x.meshPerAttribute*x.count)):g.enableAttribute(s),p.bindBuffer(34962,f),p.vertexAttribPointer(s,l,v,h,w*y,_*y)}else c.isInstancedBufferAttribute?(g.enableAttributeAndDivisor(s,c.meshPerAttribute),void 0===r.maxInstancedCount&&(r.maxInstancedCount=c.meshPerAttribute*c.count)):g.enableAttribute(s),p.bindBuffer(34962,f),p.vertexAttribPointer(s,l,v,h,0,0)}else if(void 0!==a){var M=a[o];if(void 0!==M)switch(M.length){case 2:p.vertexAttrib2fv(s,M);break;case 3:p.vertexAttrib3fv(s,M);break;case 4:p.vertexAttrib4fv(s,M);break;default:p.vertexAttrib1fv(s,M)}}}}g.disableUnusedAttributes()}(n,s,r),null!==l&&p.bindBuffer(34963,h.buffer));var y=1/0;null!==l?y=l.count:void 0!==u&&(y=u.count);var x=r.drawRange.start*f,w=r.drawRange.count*f,M=null!==a?a.start*f:0,E=null!==a?a.count*f:1/0,S=Math.max(x,M),T=Math.min(y,x+w,M+E)-1,A=Math.max(0,T-S+1);if(0!==A){if(i.isMesh)if(!0===n.wireframe)g.setLineWidth(n.wireframeLinewidth*nt()),v.setMode(1);else switch(i.drawMode){case xe:v.setMode(4);break;case be:v.setMode(5);break;case we:v.setMode(6)}else if(i.isLine){var C=n.linewidth;void 0===C&&(C=1),g.setLineWidth(C*nt()),i.isLineSegments?v.setMode(1):i.isLineLoop?v.setMode(2):v.setMode(3)}else i.isPoints?v.setMode(0):i.isSprite&&v.setMode(4);r&&r.isInstancedBufferGeometry?r.maxInstancedCount>0&&v.renderInstances(r,S,A):v.render(S,A)}},this.compile=function(t,e){(u=T.get(t,e)).init(),t.traverse(function(t){t.isLight&&(u.pushLight(t),t.castShadow&&u.pushShadow(t))}),u.setupLights(e),t.traverse(function(e){if(e.material)if(Array.isArray(e.material))for(var r=0;r<e.material.length;r++)yt(e.material[r],t.fog,e);else yt(e.material,t.fog,e)})};var dt=null;var ft,mt=new fr;function gt(t,e,r,n){for(var i=0,a=t.length;i<a;i++){var o=t[i],s=o.object,c=o.geometry,h=void 0===n?o.material:n,l=o.group;if(r.isArrayCamera){F=r;for(var p=r.cameras,d=0,f=p.length;d<f;d++){var m=p[d];if(s.layers.test(m.layers)){if("viewport"in m)g.viewport(H.copy(m.viewport));else{var v=m.bounds,y=v.x*W,x=v.y*q,b=v.z*W,w=v.w*q;g.viewport(H.set(y,x,b,w).multiplyScalar(X))}u.setupLights(m),vt(s,e,m,c,h,l)}}}else F=null,vt(s,e,r,c,h,l)}}function vt(t,e,r,n,i,a){if(t.onBeforeRender(O,e,r,n,i,a),u=T.get(e,F||r),t.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){g.setMaterial(i);var o=xt(r,e.fog,i,t);U.geometry=null,U.program=null,U.wireframe=!1,function(t,e){t.render(function(t){O.renderBufferImmediate(t,e)})}(t,o)}else O.renderBufferDirect(r,e.fog,n,i,t,a);t.onAfterRender(O,e,r,n,i,a),u=T.get(e,F||r)}function yt(t,e,r){var n=y.get(t),i=u.state.lights,a=u.state.shadowsArray,o=n.lightsHash,s=i.state.hash,c=E.getParameters(t,i.state,a,e,K.numPlanes,K.numIntersection,r),h=E.getProgramCode(t,c),l=n.program,p=!0;if(void 0===l)t.addEventListener("dispose",ut);else if(l.code!==h)pt(t);else if(o.stateID!==s.stateID||o.directionalLength!==s.directionalLength||o.pointLength!==s.pointLength||o.spotLength!==s.spotLength||o.rectAreaLength!==s.rectAreaLength||o.hemiLength!==s.hemiLength||o.shadowsLength!==s.shadowsLength)o.stateID=s.stateID,o.directionalLength=s.directionalLength,o.pointLength=s.pointLength,o.spotLength=s.spotLength,o.rectAreaLength=s.rectAreaLength,o.hemiLength=s.hemiLength,o.shadowsLength=s.shadowsLength,p=!1;else{if(void 0!==c.shaderID)return;p=!1}if(p){if(c.shaderID){var d=dr[c.shaderID];n.shader={name:t.type,uniforms:nr(d.uniforms),vertexShader:d.vertexShader,fragmentShader:d.fragmentShader}}else n.shader={name:t.type,uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader};t.onBeforeCompile(n.shader,O),h=E.getProgramCode(t,c),l=E.acquireProgram(t,n.shader,c,h),n.program=l,t.program=l}var f=l.getAttributes();if(t.morphTargets){t.numSupportedMorphTargets=0;for(var m=0;m<O.maxMorphTargets;m++)f["morphTarget"+m]>=0&&t.numSupportedMorphTargets++}if(t.morphNormals){t.numSupportedMorphNormals=0;for(m=0;m<O.maxMorphNormals;m++)f["morphNormal"+m]>=0&&t.numSupportedMorphNormals++}var g=n.shader.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(n.numClippingPlanes=K.numPlanes,n.numIntersection=K.numIntersection,g.clippingPlanes=K.uniform),n.fog=e,void 0===o&&(n.lightsHash=o={}),o.stateID=s.stateID,o.directionalLength=s.directionalLength,o.pointLength=s.pointLength,o.spotLength=s.spotLength,o.rectAreaLength=s.rectAreaLength,o.hemiLength=s.hemiLength,o.shadowsLength=s.shadowsLength,t.lights&&(g.ambientLightColor.value=i.state.ambient,g.directionalLights.value=i.state.directional,g.spotLights.value=i.state.spot,g.rectAreaLights.value=i.state.rectArea,g.pointLights.value=i.state.point,g.hemisphereLights.value=i.state.hemi,g.directionalShadowMap.value=i.state.directionalShadowMap,g.directionalShadowMatrix.value=i.state.directionalShadowMatrix,g.spotShadowMap.value=i.state.spotShadowMap,g.spotShadowMatrix.value=i.state.spotShadowMatrix,g.pointShadowMap.value=i.state.pointShadowMap,g.pointShadowMatrix.value=i.state.pointShadowMatrix);var v=n.program.getUniforms(),x=mi.seqWithValue(v.seq,g);n.uniformsList=x}function xt(t,e,r,n){j=0;var i=y.get(r),a=u.state.lights,o=i.lightsHash,s=a.state.hash;if($&&(tt||t!==G)){var c=t===G&&r.id===z;K.setState(r.clippingPlanes,r.clipIntersection,r.clipShadows,t,i,c)}!1===r.needsUpdate&&(void 0===i.program?r.needsUpdate=!0:r.fog&&i.fog!==e?r.needsUpdate=!0:(!r.lights||o.stateID===s.stateID&&o.directionalLength===s.directionalLength&&o.pointLength===s.pointLength&&o.spotLength===s.spotLength&&o.rectAreaLength===s.rectAreaLength&&o.hemiLength===s.hemiLength&&o.shadowsLength===s.shadowsLength)&&(void 0===i.numClippingPlanes||i.numClippingPlanes===K.numPlanes&&i.numIntersection===K.numIntersection)||(r.needsUpdate=!0)),r.needsUpdate&&(yt(r,e,n),r.needsUpdate=!1);var h,l,d=!1,f=!1,v=!1,x=i.program,b=x.getUniforms(),_=i.shader.uniforms;if(g.useProgram(x.program)&&(d=!0,f=!0,v=!0),r.id!==z&&(z=r.id,f=!0),d||G!==t){if(b.setValue(p,"projectionMatrix",t.projectionMatrix),m.logarithmicDepthBuffer&&b.setValue(p,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),G!==t&&(G=t,f=!0,v=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshStandardMaterial||r.envMap){var M=b.map.cameraPosition;void 0!==M&&M.setValue(p,rt.setFromMatrixPosition(t.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.skinning)&&b.setValue(p,"viewMatrix",t.matrixWorldInverse)}if(r.skinning){b.setOptional(p,n,"bindMatrix"),b.setOptional(p,n,"bindMatrixInverse");var E=n.skeleton;if(E){var S=E.bones;if(m.floatVertexTextures){if(void 0===E.boneTexture){var T=Math.sqrt(4*S.length);T=Ie.ceilPowerOfTwo(T),T=Math.max(T,4);var A=new Float32Array(T*T*4);A.set(E.boneMatrices);var L=new Qe(A,T,T,Ht,It);L.needsUpdate=!0,E.boneMatrices=A,E.boneTexture=L,E.boneTextureSize=T}b.setValue(p,"boneTexture",E.boneTexture),b.setValue(p,"boneTextureSize",E.boneTextureSize)}else b.setOptional(p,E,"boneMatrices")}}return f&&(b.setValue(p,"toneMappingExposure",O.toneMappingExposure),b.setValue(p,"toneMappingWhitePoint",O.toneMappingWhitePoint),r.lights&&(l=v,(h=_).ambientLightColor.needsUpdate=l,h.directionalLights.needsUpdate=l,h.pointLights.needsUpdate=l,h.spotLights.needsUpdate=l,h.rectAreaLights.needsUpdate=l,h.hemisphereLights.needsUpdate=l),e&&r.fog&&function(t,e){t.fogColor.value=e.color,e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)}(_,e),r.isMeshBasicMaterial?bt(_,r):r.isMeshLambertMaterial?(bt(_,r),function(t,e){e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}(_,r)):r.isMeshPhongMaterial?(bt(_,r),r.isMeshToonMaterial?function(t,e){wt(t,e),e.gradientMap&&(t.gradientMap.value=e.gradientMap)}(_,r):wt(_,r)):r.isMeshStandardMaterial?(bt(_,r),r.isMeshPhysicalMaterial?function(t,e){_t(t,e),t.reflectivity.value=e.reflectivity,t.clearCoat.value=e.clearCoat,t.clearCoatRoughness.value=e.clearCoatRoughness}(_,r):_t(_,r)):r.isMeshMatcapMaterial?(bt(_,r),function(t,e){e.matcap&&(t.matcap.value=e.matcap);e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===w&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===w&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(_,r)):r.isMeshDepthMaterial?(bt(_,r),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(_,r)):r.isMeshDistanceMaterial?(bt(_,r),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias);t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}(_,r)):r.isMeshNormalMaterial?(bt(_,r),function(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===w&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===w&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(_,r)):r.isLineBasicMaterial?(function(t,e){t.diffuse.value=e.color,t.opacity.value=e.opacity}(_,r),r.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(_,r)):r.isPointsMaterial?function(t,e){t.diffuse.value=e.color,t.opacity.value=e.opacity,t.size.value=e.size*X,t.scale.value=.5*q,t.map.value=e.map,null!==e.map&&(!0===e.map.matrixAutoUpdate&&e.map.updateMatrix(),t.uvTransform.value.copy(e.map.matrix))}(_,r):r.isSpriteMaterial?function(t,e){t.diffuse.value=e.color,t.opacity.value=e.opacity,t.rotation.value=e.rotation,t.map.value=e.map,null!==e.map&&(!0===e.map.matrixAutoUpdate&&e.map.updateMatrix(),t.uvTransform.value.copy(e.map.matrix))}(_,r):r.isShadowMaterial&&(_.color.value=r.color,_.opacity.value=r.opacity),void 0!==_.ltc_1&&(_.ltc_1.value=pr.LTC_1),void 0!==_.ltc_2&&(_.ltc_2.value=pr.LTC_2),mi.upload(p,i.uniformsList,_,O)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(mi.upload(p,i.uniformsList,_,O),r.uniformsNeedUpdate=!1),r.isSpriteMaterial&&b.setValue(p,"center",n.center),b.setValue(p,"modelViewMatrix",n.modelViewMatrix),b.setValue(p,"normalMatrix",n.normalMatrix),b.setValue(p,"modelMatrix",n.matrixWorld),x}function bt(t,e){var r;t.opacity.value=e.opacity,e.color&&(t.diffuse.value=e.color),e.emissive&&t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity),e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.specularMap&&(t.specularMap.value=e.specularMap),e.envMap&&(t.envMap.value=e.envMap,t.flipEnvMap.value=e.envMap.isCubeTexture?-1:1,t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio,t.maxMipLevel.value=y.get(e.envMap).__maxMipLevel),e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.aoMap&&(t.aoMap.value=e.aoMap,t.aoMapIntensity.value=e.aoMapIntensity),e.map?r=e.map:e.specularMap?r=e.specularMap:e.displacementMap?r=e.displacementMap:e.normalMap?r=e.normalMap:e.bumpMap?r=e.bumpMap:e.roughnessMap?r=e.roughnessMap:e.metalnessMap?r=e.metalnessMap:e.alphaMap?r=e.alphaMap:e.emissiveMap&&(r=e.emissiveMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),t.uvTransform.value.copy(r.matrix))}function wt(t,e){t.specular.value=e.specular,t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===w&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===w&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function _t(t,e){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===w&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===w&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),e.envMap&&(t.envMapIntensity.value=e.envMapIntensity)}mt.setAnimationLoop(function(t){st.isPresenting()||dt&&dt(t)}),"undefined"!=typeof window&&mt.setContext(window),this.setAnimationLoop=function(t){dt=t,st.setAnimationLoop(t),mt.start()},this.render=function(t,e,r,n){if(e&&e.isCamera){if(!I){U.geometry=null,U.program=null,U.wireframe=!1,z=-1,G=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),st.enabled&&(e=st.getCamera(e)),(u=T.get(t,e)).init(),t.onBeforeRender(O,t,e,r),et.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),Q.setFromMatrix(et),tt=this.localClippingEnabled,$=K.init(this.clippingPlanes,tt,e),(l=S.get(t,e)).init(),function t(e,r,n,i){if(!1===e.visible)return;var a=e.layers.test(r.layers);if(a)if(e.isGroup)n=e.renderOrder;else if(e.isLight)u.pushLight(e),e.castShadow&&u.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||Q.intersectsSprite(e)){i&&rt.setFromMatrixPosition(e.matrixWorld).applyMatrix4(et);var o=M.update(e),s=e.material;l.push(e,o,s,n,rt.z,null)}}else if(e.isImmediateRenderObject)i&&rt.setFromMatrixPosition(e.matrixWorld).applyMatrix4(et),l.push(e,null,e.material,n,rt.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.update(),!e.frustumCulled||Q.intersectsObject(e))){i&&rt.setFromMatrixPosition(e.matrixWorld).applyMatrix4(et);var o=M.update(e),s=e.material;if(Array.isArray(s))for(var c=o.groups,h=0,p=c.length;h<p;h++){var d=c[h],f=s[d.materialIndex];f&&f.visible&&l.push(e,o,f,n,rt.z,d)}else s.visible&&l.push(e,o,s,n,rt.z,null)}var m=e.children;for(var h=0,p=m.length;h<p;h++)t(m[h],r,n,i)}(t,e,0,O.sortObjects),!0===O.sortObjects&&l.sort(),$&&K.beginShadows();var i=u.state.shadowsArray;ct.render(i,t,e),u.setupLights(e),$&&K.endShadows(),this.info.autoReset&&this.info.reset(),void 0===r&&(r=null),this.setRenderTarget(r),A.render(l,t,e,n);var a=l.opaque,o=l.transparent,s=l.sprites;if(t.overrideMaterial){var c=t.overrideMaterial;a.length&&gt(a,t,e,c),o.length&&gt(o,t,e,c),s.length&&gt(s,t,e,c)}else a.length&&gt(a,t,e),o.length&&gt(o,t,e),s.length&&gt(s,t,e);r&&(x.updateRenderTargetMipmap(r),x.updateMultisampleRenderTarget(r)),g.buffers.depth.setTest(!0),g.buffers.depth.setMask(!0),g.buffers.color.setMask(!0),g.setPolygonOffset(!1),t.onAfterRender(O,t,e),st.enabled&&st.submitFrame(),l=null,u=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.allocTextureUnit=function(){var t=j;return t>=m.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+t+" texture units while this GPU supports only "+m.maxTextures),j+=1,t},this.setTexture2D=(ft=!1,function(t,e){t&&t.isWebGLRenderTarget&&(ft||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),ft=!0),t=t.texture),x.setTexture2D(t,e)}),this.setTexture3D=function(t,e){x.setTexture3D(t,e)},this.setTexture=function(){var t=!1;return function(e,r){t||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),t=!0),x.setTexture2D(e,r)}}(),this.setTextureCube=function(){var t=!1;return function(e,r){e&&e.isWebGLRenderTargetCube&&(t||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),t=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?x.setTextureCube(e,r):x.setTextureCubeDynamic(e,r)}}(),this.setFramebuffer=function(t){D=t},this.getRenderTarget=function(){return B},this.setRenderTarget=function(t){B=t,t&&void 0===y.get(t).__webglFramebuffer&&x.setupRenderTarget(t);var e=D,r=!1;if(t){var n=y.get(t).__webglFramebuffer;t.isWebGLRenderTargetCube?(e=n[t.activeCubeFace],r=!0):e=t.isWebGLMultisampleRenderTarget?y.get(t).__webglMultisampledFramebuffer:n,H.copy(t.viewport),V.copy(t.scissor),k=t.scissorTest}else H.copy(Y).multiplyScalar(X),V.copy(J).multiplyScalar(X),k=Z;if(N!==e&&(p.bindFramebuffer(36160,e),N=e),g.viewport(H),g.scissor(V),g.setScissorTest(k),r){var i=y.get(t.texture);p.framebufferTexture2D(36160,36064,34069+t.activeCubeFace,i.__webglTexture,t.activeMipMapLevel)}},this.readRenderTargetPixels=function(t,e,r,n,i,a){if(t&&t.isWebGLRenderTarget){var o=y.get(t).__webglFramebuffer;if(o){var s=!1;o!==N&&(p.bindFramebuffer(36160,o),s=!0);try{var c=t.texture,h=c.format,l=c.type;if(h!==Ht&&C.convert(h)!==p.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(l===At||C.convert(l)===p.getParameter(35738)||l===It&&(m.isWebGL2||d.get("OES_texture_float")||d.get("WEBGL_color_buffer_float"))||l===Dt&&(m.isWebGL2?d.get("EXT_color_buffer_float"):d.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===p.checkFramebufferStatus(36160)?e>=0&&e<=t.width-n&&r>=0&&r<=t.height-i&&p.readPixels(e,r,n,i,C.convert(h),C.convert(l),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&p.bindFramebuffer(36160,N)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(t,e,r){var n=e.image.width,i=e.image.height,a=C.convert(e.format);this.setTexture2D(e,0),p.copyTexImage2D(3553,r||0,a,t.x,t.y,n,i,0)},this.copyTextureToTexture=function(t,e,r,n){var i=e.image.width,a=e.image.height,o=C.convert(r.format),s=C.convert(r.type);this.setTexture2D(r,0),e.isDataTexture?p.texSubImage2D(3553,n||0,t.x,t.y,i,a,o,s,e.image.data):p.texSubImage2D(3553,n||0,t.x,t.y,o,s,e.image)}}function sa(t,e){this.name="",this.color=new lr(t),this.density=void 0!==e?e:25e-5}function ca(t,e,r){this.name="",this.color=new lr(t),this.near=void 0!==e?e:1,this.far=void 0!==r?r:1e3}function ha(){Er.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function la(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function ua(t,e,r,n){this.data=t,this.itemSize=e,this.offset=r,this.normalized=!0===n}function pa(t){sn.call(this),this.type="SpriteMaterial",this.color=new lr(16777215),this.map=null,this.rotation=0,this.sizeAttenuation=!0,this.lights=!1,this.transparent=!0,this.setValues(t)}function da(t){if(Er.call(this),this.type="Sprite",void 0===Ji){Ji=new Vr;var e=new la(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);Ji.setIndex([0,1,2,0,2,3]),Ji.addAttribute("position",new ua(e,3,0,!1)),Ji.addAttribute("uv",new ua(e,2,3,!1))}this.geometry=Ji,this.material=void 0!==t?t:new pa,this.center=new De(.5,.5)}function fa(){Er.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function ma(t,e){t&&t.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),pn.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Be,this.bindMatrixInverse=new Be}function ga(t,e){if(t=t||[],this.bones=t.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var r=0,n=this.bones.length;r<n;r++)this.boneInverses.push(new Be)}}function va(){Er.call(this),this.type="Bone"}function ya(t){sn.call(this),this.type="LineBasicMaterial",this.color=new lr(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(t)}function xa(t,e,r){1===r&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),Er.call(this),this.type="Line",this.geometry=void 0!==t?t:new Vr,this.material=void 0!==e?e:new ya({color:16777215*Math.random()})}function ba(t,e){xa.call(this,t,e),this.type="LineSegments"}function wa(t,e){xa.call(this,t,e),this.type="LineLoop"}function _a(t){sn.call(this),this.type="PointsMaterial",this.color=new lr(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.lights=!1,this.setValues(t)}function Ma(t,e){Er.call(this),this.type="Points",this.geometry=void 0!==t?t:new Vr,this.material=void 0!==e?e:new _a({color:16777215*Math.random()})}function Ea(t,e,r,n,i,a,o,s,c){qe.call(this,t,e,r,n,i,a,o,s,c),this.format=void 0!==o?o:Ft,this.minFilter=void 0!==a?a:Et,this.magFilter=void 0!==i?i:Et,this.generateMipmaps=!1}function Sa(t,e,r,n,i,a,o,s,c,h,l,u){qe.call(this,null,a,o,s,c,h,n,i,l,u),this.image={width:e,height:r},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}function Ta(t,e,r,n,i,a,o,s,c){qe.call(this,t,e,r,n,i,a,o,s,c),this.needsUpdate=!0}function Aa(t,e,r,n,i,a,o,s,c,h){if((h=void 0!==h?h:Wt)!==Wt&&h!==qt)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===r&&h===Wt&&(r=Rt),void 0===r&&h===qt&&(r=Ut),qe.call(this,null,n,i,a,o,s,h,r,c),this.image={width:t,height:e},this.magFilter=void 0!==o?o:wt,this.minFilter=void 0!==s?s:wt,this.flipY=!1,this.generateMipmaps=!1}function La(t){Vr.call(this),this.type="WireframeGeometry";var e,r,n,i,a,o,s,c,h,l,u=[],p=[0,0],d={},f=["a","b","c"];if(t&&t.isGeometry){var m=t.faces;for(e=0,n=m.length;e<n;e++){var g=m[e];for(r=0;r<3;r++)s=g[f[r]],c=g[f[(r+1)%3]],p[0]=Math.min(s,c),p[1]=Math.max(s,c),void 0===d[h=p[0]+","+p[1]]&&(d[h]={index1:p[0],index2:p[1]})}for(h in d)o=d[h],l=t.vertices[o.index1],u.push(l.x,l.y,l.z),l=t.vertices[o.index2],u.push(l.x,l.y,l.z)}else if(t&&t.isBufferGeometry){var v,y,x,b,w,_,M;if(l=new ze,null!==t.index){for(v=t.attributes.position,y=t.index,0===(x=t.groups).length&&(x=[{start:0,count:y.count,materialIndex:0}]),i=0,a=x.length;i<a;++i)for(e=w=(b=x[i]).start,n=w+b.count;e<n;e+=3)for(r=0;r<3;r++)s=y.getX(e+r),c=y.getX(e+(r+1)%3),p[0]=Math.min(s,c),p[1]=Math.max(s,c),void 0===d[h=p[0]+","+p[1]]&&(d[h]={index1:p[0],index2:p[1]});for(h in d)o=d[h],l.fromBufferAttribute(v,o.index1),u.push(l.x,l.y,l.z),l.fromBufferAttribute(v,o.index2),u.push(l.x,l.y,l.z)}else for(e=0,n=(v=t.attributes.position).count/3;e<n;e++)for(r=0;r<3;r++)_=3*e+r,l.fromBufferAttribute(v,_),u.push(l.x,l.y,l.z),M=3*e+(r+1)%3,l.fromBufferAttribute(v,M),u.push(l.x,l.y,l.z)}this.addAttribute("position",new zr(u,3))}function Pa(t,e,r){Lr.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:r},this.fromBufferGeometry(new Ra(t,e,r)),this.mergeVertices()}function Ra(t,e,r){Vr.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:r};var n,i,a=[],o=[],s=[],c=[],h=new ze,l=new ze,u=new ze,p=new ze,d=new ze;t.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var f=e+1;for(n=0;n<=r;n++){var m=n/r;for(i=0;i<=e;i++){var g=i/e;t(g,m,l),o.push(l.x,l.y,l.z),g-1e-5>=0?(t(g-1e-5,m,u),p.subVectors(l,u)):(t(g+1e-5,m,u),p.subVectors(u,l)),m-1e-5>=0?(t(g,m-1e-5,u),d.subVectors(l,u)):(t(g,m+1e-5,u),d.subVectors(u,l)),h.crossVectors(p,d).normalize(),s.push(h.x,h.y,h.z),c.push(g,m)}}for(n=0;n<r;n++)for(i=0;i<e;i++){var v=n*f+i,y=n*f+i+1,x=(n+1)*f+i+1,b=(n+1)*f+i;a.push(v,y,b),a.push(y,x,b)}this.setIndex(a),this.addAttribute("position",new zr(o,3)),this.addAttribute("normal",new zr(s,3)),this.addAttribute("uv",new zr(c,2))}function Ca(t,e,r,n){Lr.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:r,detail:n},this.fromBufferGeometry(new Oa(t,e,r,n)),this.mergeVertices()}function Oa(t,e,r,n){Vr.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:e,radius:r,detail:n},r=r||1;var i=[],a=[];function o(t,e,r,n){var i,a,o=Math.pow(2,n),c=[];for(i=0;i<=o;i++){c[i]=[];var h=t.clone().lerp(r,i/o),l=e.clone().lerp(r,i/o),u=o-i;for(a=0;a<=u;a++)c[i][a]=0===a&&i===o?h:h.clone().lerp(l,a/u)}for(i=0;i<o;i++)for(a=0;a<2*(o-i)-1;a++){var p=Math.floor(a/2);a%2==0?(s(c[i][p+1]),s(c[i+1][p]),s(c[i][p])):(s(c[i][p+1]),s(c[i+1][p+1]),s(c[i+1][p]))}}function s(t){i.push(t.x,t.y,t.z)}function c(e,r){var n=3*e;r.x=t[n+0],r.y=t[n+1],r.z=t[n+2]}function h(t,e,r,n){n<0&&1===t.x&&(a[e]=t.x-1),0===r.x&&0===r.z&&(a[e]=n/2/Math.PI+.5)}function l(t){return Math.atan2(t.z,-t.x)}!function(t){for(var r=new ze,n=new ze,i=new ze,a=0;a<e.length;a+=3)c(e[a+0],r),c(e[a+1],n),c(e[a+2],i),o(r,n,i,t)}(n=n||0),function(t){for(var e=new ze,r=0;r<i.length;r+=3)e.x=i[r+0],e.y=i[r+1],e.z=i[r+2],e.normalize().multiplyScalar(t),i[r+0]=e.x,i[r+1]=e.y,i[r+2]=e.z}(r),function(){for(var t=new ze,e=0;e<i.length;e+=3){t.x=i[e+0],t.y=i[e+1],t.z=i[e+2];var r=l(t)/2/Math.PI+.5,n=(o=t,Math.atan2(-o.y,Math.sqrt(o.x*o.x+o.z*o.z))/Math.PI+.5);a.push(r,1-n)}var o;(function(){for(var t=new ze,e=new ze,r=new ze,n=new ze,o=new De,s=new De,c=new De,u=0,p=0;u<i.length;u+=9,p+=6){t.set(i[u+0],i[u+1],i[u+2]),e.set(i[u+3],i[u+4],i[u+5]),r.set(i[u+6],i[u+7],i[u+8]),o.set(a[p+0],a[p+1]),s.set(a[p+2],a[p+3]),c.set(a[p+4],a[p+5]),n.copy(t).add(e).add(r).divideScalar(3);var d=l(n);h(o,p+0,t,d),h(s,p+2,e,d),h(c,p+4,r,d)}})(),function(){for(var t=0;t<a.length;t+=6){var e=a[t+0],r=a[t+2],n=a[t+4],i=Math.max(e,r,n),o=Math.min(e,r,n);i>.9&&o<.1&&(e<.2&&(a[t+0]+=1),r<.2&&(a[t+2]+=1),n<.2&&(a[t+4]+=1))}}()}(),this.addAttribute("position",new zr(i,3)),this.addAttribute("normal",new zr(i.slice(),3)),this.addAttribute("uv",new zr(a,2)),0===n?this.computeVertexNormals():this.normalizeNormals()}function Ia(t,e){Lr.call(this),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Da(t,e)),this.mergeVertices()}function Da(t,e){Oa.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Ba(t,e){Lr.call(this),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Na(t,e)),this.mergeVertices()}function Na(t,e){Oa.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:e}}function za(t,e){Lr.call(this),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Ua(t,e)),this.mergeVertices()}function Ua(t,e){var r=(1+Math.sqrt(5))/2,n=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1];Oa.call(this,n,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Ga(t,e){Lr.call(this),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Fa(t,e)),this.mergeVertices()}function Fa(t,e){var r=(1+Math.sqrt(5))/2,n=1/r,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-r,0,-n,r,0,n,-r,0,n,r,-n,-r,0,-n,r,0,n,-r,0,n,r,0,-r,0,-n,r,0,-n,-r,0,n,r,0,n];Oa.call(this,i,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Ha(t,e,r,n,i,a){Lr.call(this),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:r,radialSegments:n,closed:i},void 0!==a&&console.warn("THREE.TubeGeometry: taper has been removed.");var o=new Va(t,e,r,n,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals,this.fromBufferGeometry(o),this.mergeVertices()}function Va(t,e,r,n,i){Vr.call(this),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:e,radius:r,radialSegments:n,closed:i},e=e||64,r=r||1,n=n||8,i=i||!1;var a=t.computeFrenetFrames(e,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;var o,s,c=new ze,h=new ze,l=new De,u=new ze,p=[],d=[],f=[],m=[];function g(i){u=t.getPointAt(i/e,u);var o=a.normals[i],l=a.binormals[i];for(s=0;s<=n;s++){var f=s/n*Math.PI*2,m=Math.sin(f),g=-Math.cos(f);h.x=g*o.x+m*l.x,h.y=g*o.y+m*l.y,h.z=g*o.z+m*l.z,h.normalize(),d.push(h.x,h.y,h.z),c.x=u.x+r*h.x,c.y=u.y+r*h.y,c.z=u.z+r*h.z,p.push(c.x,c.y,c.z)}}!function(){for(o=0;o<e;o++)g(o);g(!1===i?e:0),function(){for(o=0;o<=e;o++)for(s=0;s<=n;s++)l.x=o/e,l.y=s/n,f.push(l.x,l.y)}(),function(){for(s=1;s<=e;s++)for(o=1;o<=n;o++){var t=(n+1)*(s-1)+(o-1),r=(n+1)*s+(o-1),i=(n+1)*s+o,a=(n+1)*(s-1)+o;m.push(t,r,a),m.push(r,i,a)}}()}(),this.setIndex(m),this.addAttribute("position",new zr(p,3)),this.addAttribute("normal",new zr(d,3)),this.addAttribute("uv",new zr(f,2))}function ka(t,e,r,n,i,a,o){Lr.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:r,radialSegments:n,p:i,q:a},void 0!==o&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new ja(t,e,r,n,i,a)),this.mergeVertices()}function ja(t,e,r,n,i,a){Vr.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:r,radialSegments:n,p:i,q:a},t=t||1,e=e||.4,r=Math.floor(r)||64,n=Math.floor(n)||8,i=i||2,a=a||3;var o,s,c=[],h=[],l=[],u=[],p=new ze,d=new ze,f=new ze,m=new ze,g=new ze,v=new ze,y=new ze;for(o=0;o<=r;++o){var x=o/r*i*Math.PI*2;for(A(x,i,a,t,f),A(x+.01,i,a,t,m),v.subVectors(m,f),y.addVectors(m,f),g.crossVectors(v,y),y.crossVectors(g,v),g.normalize(),y.normalize(),s=0;s<=n;++s){var b=s/n*Math.PI*2,w=-e*Math.cos(b),_=e*Math.sin(b);p.x=f.x+(w*y.x+_*g.x),p.y=f.y+(w*y.y+_*g.y),p.z=f.z+(w*y.z+_*g.z),h.push(p.x,p.y,p.z),d.subVectors(p,f).normalize(),l.push(d.x,d.y,d.z),u.push(o/r),u.push(s/n)}}for(s=1;s<=r;s++)for(o=1;o<=n;o++){var M=(n+1)*(s-1)+(o-1),E=(n+1)*s+(o-1),S=(n+1)*s+o,T=(n+1)*(s-1)+o;c.push(M,E,T),c.push(E,S,T)}function A(t,e,r,n,i){var a=Math.cos(t),o=Math.sin(t),s=r/e*t,c=Math.cos(s);i.x=n*(2+c)*.5*a,i.y=n*(2+c)*o*.5,i.z=n*Math.sin(s)*.5}this.setIndex(c),this.addAttribute("position",new zr(h,3)),this.addAttribute("normal",new zr(l,3)),this.addAttribute("uv",new zr(u,2))}function Wa(t,e,r,n,i){Lr.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:r,tubularSegments:n,arc:i},this.fromBufferGeometry(new qa(t,e,r,n,i)),this.mergeVertices()}function qa(t,e,r,n,i){Vr.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:r,tubularSegments:n,arc:i},t=t||1,e=e||.4,r=Math.floor(r)||8,n=Math.floor(n)||6,i=i||2*Math.PI;var a,o,s=[],c=[],h=[],l=[],u=new ze,p=new ze,d=new ze;for(a=0;a<=r;a++)for(o=0;o<=n;o++){var f=o/n*i,m=a/r*Math.PI*2;p.x=(t+e*Math.cos(m))*Math.cos(f),p.y=(t+e*Math.cos(m))*Math.sin(f),p.z=e*Math.sin(m),c.push(p.x,p.y,p.z),u.x=t*Math.cos(f),u.y=t*Math.sin(f),d.subVectors(p,u).normalize(),h.push(d.x,d.y,d.z),l.push(o/n),l.push(a/r)}for(a=1;a<=r;a++)for(o=1;o<=n;o++){var g=(n+1)*a+o-1,v=(n+1)*(a-1)+o-1,y=(n+1)*(a-1)+o,x=(n+1)*a+o;s.push(g,v,x),s.push(v,y,x)}this.setIndex(s),this.addAttribute("position",new zr(c,3)),this.addAttribute("normal",new zr(h,3)),this.addAttribute("uv",new zr(l,2))}sa.prototype.isFogExp2=!0,sa.prototype.clone=function(){return new sa(this.color,this.density)},sa.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},ca.prototype.isFog=!0,ca.prototype.clone=function(){return new ca(this.color,this.near,this.far)},ca.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},ha.prototype=Object.assign(Object.create(Er.prototype),{constructor:ha,isScene:!0,copy:function(t,e){return Er.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},toJSON:function(t){var e=Er.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(la.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(la.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==t?t.length/this.stride:0,this.array=t,this},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.dynamic=t.dynamic,this},copyAt:function(t,e,r){t*=this.stride,r*=e.stride;for(var n=0,i=this.stride;n<i;n++)this.array[t+n]=e.array[r+n];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(t){return this.onUploadCallback=t,this}}),Object.defineProperties(ua.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(ua.prototype,{isInterleavedBufferAttribute:!0,setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=r,this},setXYZ:function(t,e,r,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=r,this.data.array[t+2]=n,this},setXYZW:function(t,e,r,n,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=r,this.data.array[t+2]=n,this.data.array[t+3]=i,this}}),pa.prototype=Object.create(sn.prototype),pa.prototype.constructor=pa,pa.prototype.isSpriteMaterial=!0,pa.prototype.copy=function(t){return sn.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this},da.prototype=Object.assign(Object.create(Er.prototype),{constructor:da,isSprite:!0,raycast:function(){var t=new ze,e=new ze,r=new ze,n=new De,i=new De,a=new Be,o=new ze,s=new ze,c=new ze,h=new De,l=new De,u=new De;function p(t,e,r,o,s,c){n.subVectors(t,r).addScalar(.5).multiply(o),void 0!==s?(i.x=c*n.x-s*n.y,i.y=s*n.x+c*n.y):i.copy(n),t.copy(e),t.x+=i.x,t.y+=i.y,t.applyMatrix4(a)}return function(n,i){e.setFromMatrixScale(this.matrixWorld),a.getInverse(this.modelViewMatrix).premultiply(this.matrixWorld),r.setFromMatrixPosition(this.modelViewMatrix);var d,f,m=this.material.rotation;0!==m&&(f=Math.cos(m),d=Math.sin(m));var g=this.center;p(o.set(-.5,-.5,0),r,g,e,d,f),p(s.set(.5,-.5,0),r,g,e,d,f),p(c.set(.5,.5,0),r,g,e,d,f),h.set(0,0),l.set(1,0),u.set(1,1);var v=n.ray.intersectTriangle(o,s,c,!1,t);if(null!==v||(p(s.set(-.5,.5,0),r,g,e,d,f),l.set(0,1),null!==(v=n.ray.intersectTriangle(o,c,s,!1,t)))){var y=n.ray.origin.distanceTo(t);y<n.near||y>n.far||i.push({distance:y,point:t.clone(),uv:ln.getUV(t,o,s,c,h,l,u,new De),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(t){return Er.prototype.copy.call(this,t),void 0!==t.center&&this.center.copy(t.center),this}}),fa.prototype=Object.assign(Object.create(Er.prototype),{constructor:fa,copy:function(t){Er.prototype.copy.call(this,t,!1);for(var e=t.levels,r=0,n=e.length;r<n;r++){var i=e[r];this.addLevel(i.object.clone(),i.distance)}return this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var r=this.levels,n=0;n<r.length&&!(e<r[n].distance);n++);r.splice(n,0,{distance:e,object:t}),this.add(t)},getObjectForDistance:function(t){for(var e=this.levels,r=1,n=e.length;r<n&&!(t<e[r].distance);r++);return e[r-1].object},raycast:(Zi=new ze,function(t,e){Zi.setFromMatrixPosition(this.matrixWorld);var r=t.ray.origin.distanceTo(Zi);this.getObjectForDistance(r).raycast(t,e)}),update:function(){var t=new ze,e=new ze;return function(r){var n=this.levels;if(n.length>1){t.setFromMatrixPosition(r.matrixWorld),e.setFromMatrixPosition(this.matrixWorld);var i=t.distanceTo(e);n[0].object.visible=!0;for(var a=1,o=n.length;a<o&&i>=n[a].distance;a++)n[a-1].object.visible=!1,n[a].object.visible=!0;for(;a<o;a++)n[a].object.visible=!1}}}(),toJSON:function(t){var e=Er.prototype.toJSON.call(this,t);e.object.levels=[];for(var r=this.levels,n=0,i=r.length;n<i;n++){var a=r[n];e.object.levels.push({object:a.object.uuid,distance:a.distance})}return e}}),ma.prototype=Object.assign(Object.create(pn.prototype),{constructor:ma,isSkinnedMesh:!0,bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var t=new Xe,e=this.geometry.attributes.skinWeight,r=0,n=e.count;r<n;r++){t.x=e.getX(r),t.y=e.getY(r),t.z=e.getZ(r),t.w=e.getW(r);var i=1/t.manhattanLength();i!==1/0?t.multiplyScalar(i):t.set(1,0,0,0),e.setXYZW(r,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(t){pn.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Object.assign(ga.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var r=new Be;this.bones[t]&&r.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(r)}},pose:function(){var t,e,r;for(e=0,r=this.bones.length;e<r;e++)(t=this.bones[e])&&t.matrixWorld.getInverse(this.boneInverses[e]);for(e=0,r=this.bones.length;e<r;e++)(t=this.bones[e])&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:(Qi=new Be,Ki=new Be,function(){for(var t=this.bones,e=this.boneInverses,r=this.boneMatrices,n=this.boneTexture,i=0,a=t.length;i<a;i++){var o=t[i]?t[i].matrixWorld:Ki;Qi.multiplyMatrices(o,e[i]),Qi.toArray(r,16*i)}void 0!==n&&(n.needsUpdate=!0)}),clone:function(){return new ga(this.bones,this.boneInverses)},getBoneByName:function(t){for(var e=0,r=this.bones.length;e<r;e++){var n=this.bones[e];if(n.name===t)return n}}}),va.prototype=Object.assign(Object.create(Er.prototype),{constructor:va,isBone:!0}),ya.prototype=Object.create(sn.prototype),ya.prototype.constructor=ya,ya.prototype.isLineBasicMaterial=!0,ya.prototype.copy=function(t){return sn.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this},xa.prototype=Object.assign(Object.create(Er.prototype),{constructor:xa,isLine:!0,computeLineDistances:($i=new ze,ta=new ze,function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,r=[0],n=1,i=e.count;n<i;n++)$i.fromBufferAttribute(e,n-1),ta.fromBufferAttribute(e,n),r[n]=r[n-1],r[n]+=$i.distanceTo(ta);t.addAttribute("lineDistance",new zr(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry){var a=t.vertices;for((r=t.lineDistances)[0]=0,n=1,i=a.length;n<i;n++)r[n]=r[n-1],r[n]+=a[n-1].distanceTo(a[n])}return this}),raycast:function(){var t=new Be,e=new hn,r=new $e;return function(n,i){var a=n.linePrecision,o=this.geometry,s=this.matrixWorld;if(null===o.boundingSphere&&o.computeBoundingSphere(),r.copy(o.boundingSphere),r.applyMatrix4(s),r.radius+=a,!1!==n.ray.intersectsSphere(r)){t.getInverse(s),e.copy(n.ray).applyMatrix4(t);var c=a/((this.scale.x+this.scale.y+this.scale.z)/3),h=c*c,l=new ze,u=new ze,p=new ze,d=new ze,f=this&&this.isLineSegments?2:1;if(o.isBufferGeometry){var m=o.index,g=o.attributes.position.array;if(null!==m)for(var v=m.array,y=0,x=v.length-1;y<x;y+=f){var b=v[y],w=v[y+1];if(l.fromArray(g,3*b),u.fromArray(g,3*w),!(e.distanceSqToSegment(l,u,d,p)>h))d.applyMatrix4(this.matrixWorld),(E=n.ray.origin.distanceTo(d))<n.near||E>n.far||i.push({distance:E,point:p.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}else for(y=0,x=g.length/3-1;y<x;y+=f){if(l.fromArray(g,3*y),u.fromArray(g,3*y+3),!(e.distanceSqToSegment(l,u,d,p)>h))d.applyMatrix4(this.matrixWorld),(E=n.ray.origin.distanceTo(d))<n.near||E>n.far||i.push({distance:E,point:p.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}else if(o.isGeometry){var _=o.vertices,M=_.length;for(y=0;y<M-1;y+=f){var E;if(!(e.distanceSqToSegment(_[y],_[y+1],d,p)>h))d.applyMatrix4(this.matrixWorld),(E=n.ray.origin.distanceTo(d))<n.near||E>n.far||i.push({distance:E,point:p.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}}}}(),copy:function(t){return Er.prototype.copy.call(this,t),this.geometry.copy(t.geometry),this.material.copy(t.material),this},clone:function(){return(new this.constructor).copy(this)}}),ba.prototype=Object.assign(Object.create(xa.prototype),{constructor:ba,isLineSegments:!0,computeLineDistances:function(){var t=new ze,e=new ze;return function(){var r=this.geometry;if(r.isBufferGeometry)if(null===r.index){for(var n=r.attributes.position,i=[],a=0,o=n.count;a<o;a+=2)t.fromBufferAttribute(n,a),e.fromBufferAttribute(n,a+1),i[a]=0===a?0:i[a-1],i[a+1]=i[a]+t.distanceTo(e);r.addAttribute("lineDistance",new zr(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(r.isGeometry){var s=r.vertices;for(i=r.lineDistances,a=0,o=s.length;a<o;a+=2)t.copy(s[a]),e.copy(s[a+1]),i[a]=0===a?0:i[a-1],i[a+1]=i[a]+t.distanceTo(e)}return this}}()}),wa.prototype=Object.assign(Object.create(xa.prototype),{constructor:wa,isLineLoop:!0}),_a.prototype=Object.create(sn.prototype),_a.prototype.constructor=_a,_a.prototype.isPointsMaterial=!0,_a.prototype.copy=function(t){return sn.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this},Ma.prototype=Object.assign(Object.create(Er.prototype),{constructor:Ma,isPoints:!0,raycast:function(){var t=new Be,e=new hn,r=new $e;return function(n,i){var a=this,o=this.geometry,s=this.matrixWorld,c=n.params.Points.threshold;if(null===o.boundingSphere&&o.computeBoundingSphere(),r.copy(o.boundingSphere),r.applyMatrix4(s),r.radius+=c,!1!==n.ray.intersectsSphere(r)){t.getInverse(s),e.copy(n.ray).applyMatrix4(t);var h=c/((this.scale.x+this.scale.y+this.scale.z)/3),l=h*h,u=new ze,p=new ze;if(o.isBufferGeometry){var d=o.index,f=o.attributes.position.array;if(null!==d)for(var m=d.array,g=0,v=m.length;g<v;g++){var y=m[g];u.fromArray(f,3*y),w(u,y)}else{g=0;for(var x=f.length/3;g<x;g++)u.fromArray(f,3*g),w(u,g)}}else{var b=o.vertices;for(g=0,x=b.length;g<x;g++)w(b[g],g)}}function w(t,r){var o=e.distanceSqToPoint(t);if(o<l){e.closestPointToPoint(t,p),p.applyMatrix4(s);var c=n.ray.origin.distanceTo(p);if(c<n.near||c>n.far)return;i.push({distance:c,distanceToRay:Math.sqrt(o),point:p.clone(),index:r,face:null,object:a})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Ea.prototype=Object.assign(Object.create(qe.prototype),{constructor:Ea,isVideoTexture:!0,update:function(){var t=this.image;t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),Sa.prototype=Object.create(qe.prototype),Sa.prototype.constructor=Sa,Sa.prototype.isCompressedTexture=!0,Ta.prototype=Object.create(qe.prototype),Ta.prototype.constructor=Ta,Ta.prototype.isCanvasTexture=!0,Aa.prototype=Object.create(qe.prototype),Aa.prototype.constructor=Aa,Aa.prototype.isDepthTexture=!0,La.prototype=Object.create(Vr.prototype),La.prototype.constructor=La,Pa.prototype=Object.create(Lr.prototype),Pa.prototype.constructor=Pa,Ra.prototype=Object.create(Vr.prototype),Ra.prototype.constructor=Ra,Ca.prototype=Object.create(Lr.prototype),Ca.prototype.constructor=Ca,Oa.prototype=Object.create(Vr.prototype),Oa.prototype.constructor=Oa,Ia.prototype=Object.create(Lr.prototype),Ia.prototype.constructor=Ia,Da.prototype=Object.create(Oa.prototype),Da.prototype.constructor=Da,Ba.prototype=Object.create(Lr.prototype),Ba.prototype.constructor=Ba,Na.prototype=Object.create(Oa.prototype),Na.prototype.constructor=Na,za.prototype=Object.create(Lr.prototype),za.prototype.constructor=za,Ua.prototype=Object.create(Oa.prototype),Ua.prototype.constructor=Ua,Ga.prototype=Object.create(Lr.prototype),Ga.prototype.constructor=Ga,Fa.prototype=Object.create(Oa.prototype),Fa.prototype.constructor=Fa,Ha.prototype=Object.create(Lr.prototype),Ha.prototype.constructor=Ha,Va.prototype=Object.create(Vr.prototype),Va.prototype.constructor=Va,ka.prototype=Object.create(Lr.prototype),ka.prototype.constructor=ka,ja.prototype=Object.create(Vr.prototype),ja.prototype.constructor=ja,Wa.prototype=Object.create(Lr.prototype),Wa.prototype.constructor=Wa,qa.prototype=Object.create(Vr.prototype),qa.prototype.constructor=qa;var Xa=function(t,e,r){r=r||2;var n,i,a,o,s,c,h,l=e&&e.length,u=l?e[0]*r:t.length,p=Ya(t,0,u,r,!0),d=[];if(!p)return d;if(l&&(p=function(t,e,r,n){var i,a,o,s,c,h=[];for(i=0,a=e.length;i<a;i++)o=e[i]*n,s=i<a-1?e[i+1]*n:t.length,(c=Ya(t,o,s,n,!1))===c.next&&(c.steiner=!0),h.push(io(c));for(h.sort(eo),i=0;i<h.length;i++)ro(h[i],r),r=Ja(r,r.next);return r}(t,e,p,r)),t.length>80*r){n=a=t[0],i=o=t[1];for(var f=r;f<u;f+=r)(s=t[f])<n&&(n=s),(c=t[f+1])<i&&(i=c),s>a&&(a=s),c>o&&(o=c);h=0!==(h=Math.max(a-n,o-i))?1/h:0}return Za(p,d,r,n,i,h),d};function Ya(t,e,r,n,i){var a,o;if(i===function(t,e,r,n){for(var i=0,a=e,o=r-n;a<r;a+=n)i+=(t[o]-t[a])*(t[a+1]+t[o+1]),o=a;return i}(t,e,r,n)>0)for(a=e;a<r;a+=n)o=po(a,t[a],t[a+1],o);else for(a=r-n;a>=e;a-=n)o=po(a,t[a],t[a+1],o);return o&&co(o,o.next)&&(fo(o),o=o.next),o}function Ja(t,e){if(!t)return t;e||(e=t);var r,n=t;do{if(r=!1,n.steiner||!co(n,n.next)&&0!==so(n.prev,n,n.next))n=n.next;else{if(fo(n),(n=e=n.prev)===n.next)break;r=!0}}while(r||n!==e);return e}function Za(t,e,r,n,i,a,o){if(t){!o&&a&&function(t,e,r,n){var i=t;do{null===i.z&&(i.z=no(i.x,i.y,e,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,r,n,i,a,o,s,c,h=1;do{for(r=t,t=null,a=null,o=0;r;){for(o++,n=r,s=0,e=0;e<h&&(s++,n=n.nextZ);e++);for(c=h;s>0||c>0&&n;)0!==s&&(0===c||!n||r.z<=n.z)?(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,c--),a?a.nextZ=i:t=i,i.prevZ=a,a=i;r=n}a.nextZ=null,h*=2}while(o>1)}(i)}(t,n,i,a);for(var s,c,h=t;t.prev!==t.next;)if(s=t.prev,c=t.next,a?Ka(t,n,i,a):Qa(t))e.push(s.i/r),e.push(t.i/r),e.push(c.i/r),fo(t),t=c.next,h=c.next;else if((t=c)===h){o?1===o?Za(t=$a(t,e,r),e,r,n,i,a,2):2===o&&to(t,e,r,n,i,a):Za(Ja(t),e,r,n,i,a,1);break}}}function Qa(t){var e=t.prev,r=t,n=t.next;if(so(e,r,n)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(ao(e.x,e.y,r.x,r.y,n.x,n.y,i.x,i.y)&&so(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Ka(t,e,r,n){var i=t.prev,a=t,o=t.next;if(so(i,a,o)>=0)return!1;for(var s=i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,c=i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,h=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,l=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y,u=no(s,c,e,r,n),p=no(h,l,e,r,n),d=t.nextZ;d&&d.z<=p;){if(d!==t.prev&&d!==t.next&&ao(i.x,i.y,a.x,a.y,o.x,o.y,d.x,d.y)&&so(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(d=t.prevZ;d&&d.z>=u;){if(d!==t.prev&&d!==t.next&&ao(i.x,i.y,a.x,a.y,o.x,o.y,d.x,d.y)&&so(d.prev,d,d.next)>=0)return!1;d=d.prevZ}return!0}function $a(t,e,r){var n=t;do{var i=n.prev,a=n.next.next;!co(i,a)&&ho(i,n,n.next,a)&&lo(i,a)&&lo(a,i)&&(e.push(i.i/r),e.push(n.i/r),e.push(a.i/r),fo(n),fo(n.next),n=t=a),n=n.next}while(n!==t);return n}function to(t,e,r,n,i,a){var o=t;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&oo(o,s)){var c=uo(o,s);return o=Ja(o,o.next),c=Ja(c,c.next),Za(o,e,r,n,i,a),void Za(c,e,r,n,i,a)}s=s.next}o=o.next}while(o!==t)}function eo(t,e){return t.x-e.x}function ro(t,e){if(e=function(t,e){var r,n=e,i=t.x,a=t.y,o=-1/0;do{if(a<=n.y&&a>=n.next.y&&n.next.y!==n.y){var s=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=i&&s>o){if(o=s,s===i){if(a===n.y)return n;if(a===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!r)return null;if(i===o)return r.prev;var c,h=r,l=r.x,u=r.y,p=1/0;n=r.next;for(;n!==h;)i>=n.x&&n.x>=l&&i!==n.x&&ao(a<u?i:o,a,l,u,a<u?o:i,a,n.x,n.y)&&((c=Math.abs(a-n.y)/(i-n.x))<p||c===p&&n.x>r.x)&&lo(n,t)&&(r=n,p=c),n=n.next;return r}(t,e)){var r=uo(e,t);Ja(r,r.next)}}function no(t,e,r,n,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function io(t){var e=t,r=t;do{e.x<r.x&&(r=e),e=e.next}while(e!==t);return r}function ao(t,e,r,n,i,a,o,s){return(i-o)*(e-s)-(t-o)*(a-s)>=0&&(t-o)*(n-s)-(r-o)*(e-s)>=0&&(r-o)*(a-s)-(i-o)*(n-s)>=0}function oo(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&ho(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}(t,e)&&lo(t,e)&&lo(e,t)&&function(t,e){var r=t,n=!1,i=(t.x+e.x)/2,a=(t.y+e.y)/2;do{r.y>a!=r.next.y>a&&r.next.y!==r.y&&i<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==t);return n}(t,e)}function so(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function co(t,e){return t.x===e.x&&t.y===e.y}function ho(t,e,r,n){return!!(co(t,e)&&co(r,n)||co(t,n)&&co(r,e))||so(t,e,r)>0!=so(t,e,n)>0&&so(r,n,t)>0!=so(r,n,e)>0}function lo(t,e){return so(t.prev,t,t.next)<0?so(t,e,t.next)>=0&&so(t,t.prev,e)>=0:so(t,e,t.prev)<0||so(t,t.next,e)<0}function uo(t,e){var r=new mo(t.i,t.x,t.y),n=new mo(e.i,e.x,e.y),i=t.next,a=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,n.next=r,r.prev=n,a.next=n,n.prev=a,n}function po(t,e,r,n){var i=new mo(t,e,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function fo(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function mo(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var go={area:function(t){for(var e=t.length,r=0,n=e-1,i=0;i<e;n=i++)r+=t[n].x*t[i].y-t[i].x*t[n].y;return.5*r},isClockWise:function(t){return go.area(t)<0},triangulateShape:function(t,e){var r=[],n=[],i=[];vo(t),yo(r,t);var a=t.length;e.forEach(vo);for(var o=0;o<e.length;o++)n.push(a),a+=e[o].length,yo(r,e[o]);var s=Xa(r,n);for(o=0;o<s.length;o+=3)i.push(s.slice(o,o+3));return i}};function vo(t){var e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function yo(t,e){for(var r=0;r<e.length;r++)t.push(e[r].x),t.push(e[r].y)}function xo(t,e){Lr.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},this.fromBufferGeometry(new bo(t,e)),this.mergeVertices()}function bo(t,e){Vr.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];for(var r=this,n=[],i=[],a=0,o=t.length;a<o;a++){s(t[a])}function s(t){var a=[],o=void 0!==e.curveSegments?e.curveSegments:12,s=void 0!==e.steps?e.steps:1,c=void 0!==e.depth?e.depth:100,h=void 0===e.bevelEnabled||e.bevelEnabled,l=void 0!==e.bevelThickness?e.bevelThickness:6,u=void 0!==e.bevelSize?e.bevelSize:l-2,p=void 0!==e.bevelSegments?e.bevelSegments:3,d=e.extrudePath,f=void 0!==e.UVGenerator?e.UVGenerator:wo;void 0!==e.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),c=e.amount);var m,g,v,y,x,b,w,_,M=!1;d&&(m=d.getSpacedPoints(s),M=!0,h=!1,g=d.computeFrenetFrames(s,!1),v=new ze,y=new ze,x=new ze),h||(p=0,l=0,u=0);var E=t.extractPoints(o),S=E.shape,T=E.holes;if(!go.isClockWise(S))for(S=S.reverse(),w=0,_=T.length;w<_;w++)b=T[w],go.isClockWise(b)&&(T[w]=b.reverse());var A=go.triangulateShape(S,T),L=S;for(w=0,_=T.length;w<_;w++)b=T[w],S=S.concat(b);function P(t,e,r){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(r).add(t)}var R,C,O,I,D,B,N=S.length,z=A.length;function U(t,e,r){var n,i,a,o=t.x-e.x,s=t.y-e.y,c=r.x-t.x,h=r.y-t.y,l=o*o+s*s,u=o*h-s*c;if(Math.abs(u)>Number.EPSILON){var p=Math.sqrt(l),d=Math.sqrt(c*c+h*h),f=e.x-s/p,m=e.y+o/p,g=((r.x-h/d-f)*h-(r.y+c/d-m)*c)/(o*h-s*c),v=(n=f+o*g-t.x)*n+(i=m+s*g-t.y)*i;if(v<=2)return new De(n,i);a=Math.sqrt(v/2)}else{var y=!1;o>Number.EPSILON?c>Number.EPSILON&&(y=!0):o<-Number.EPSILON?c<-Number.EPSILON&&(y=!0):Math.sign(s)===Math.sign(h)&&(y=!0),y?(n=-s,i=o,a=Math.sqrt(l)):(n=o,i=s,a=Math.sqrt(l/2))}return new De(n/a,i/a)}for(var G=[],F=0,H=L.length,V=H-1,k=F+1;F<H;F++,V++,k++)V===H&&(V=0),k===H&&(k=0),G[F]=U(L[F],L[V],L[k]);var j,W,q=[],X=G.concat();for(w=0,_=T.length;w<_;w++){for(b=T[w],j=[],F=0,V=(H=b.length)-1,k=F+1;F<H;F++,V++,k++)V===H&&(V=0),k===H&&(k=0),j[F]=U(b[F],b[V],b[k]);q.push(j),X=X.concat(j)}for(R=0;R<p;R++){for(O=R/p,I=l*Math.cos(O*Math.PI/2),C=u*Math.sin(O*Math.PI/2),F=0,H=L.length;F<H;F++)J((D=P(L[F],G[F],C)).x,D.y,-I);for(w=0,_=T.length;w<_;w++)for(b=T[w],j=q[w],F=0,H=b.length;F<H;F++)J((D=P(b[F],j[F],C)).x,D.y,-I)}for(C=u,F=0;F<N;F++)D=h?P(S[F],X[F],C):S[F],M?(y.copy(g.normals[0]).multiplyScalar(D.x),v.copy(g.binormals[0]).multiplyScalar(D.y),x.copy(m[0]).add(y).add(v),J(x.x,x.y,x.z)):J(D.x,D.y,0);for(W=1;W<=s;W++)for(F=0;F<N;F++)D=h?P(S[F],X[F],C):S[F],M?(y.copy(g.normals[W]).multiplyScalar(D.x),v.copy(g.binormals[W]).multiplyScalar(D.y),x.copy(m[W]).add(y).add(v),J(x.x,x.y,x.z)):J(D.x,D.y,c/s*W);for(R=p-1;R>=0;R--){for(O=R/p,I=l*Math.cos(O*Math.PI/2),C=u*Math.sin(O*Math.PI/2),F=0,H=L.length;F<H;F++)J((D=P(L[F],G[F],C)).x,D.y,c+I);for(w=0,_=T.length;w<_;w++)for(b=T[w],j=q[w],F=0,H=b.length;F<H;F++)D=P(b[F],j[F],C),M?J(D.x,D.y+m[s-1].y,m[s-1].x+I):J(D.x,D.y,c+I)}function Y(t,e){var r,n;for(F=t.length;--F>=0;){r=F,(n=F-1)<0&&(n=t.length-1);var i=0,a=s+2*p;for(i=0;i<a;i++){var o=N*i,c=N*(i+1);Q(e+r+o,e+n+o,e+n+c,e+r+c)}}}function J(t,e,r){a.push(t),a.push(e),a.push(r)}function Z(t,e,i){K(t),K(e),K(i);var a=n.length/3,o=f.generateTopUV(r,n,a-3,a-2,a-1);$(o[0]),$(o[1]),$(o[2])}function Q(t,e,i,a){K(t),K(e),K(a),K(e),K(i),K(a);var o=n.length/3,s=f.generateSideWallUV(r,n,o-6,o-3,o-2,o-1);$(s[0]),$(s[1]),$(s[3]),$(s[1]),$(s[2]),$(s[3])}function K(t){n.push(a[3*t+0]),n.push(a[3*t+1]),n.push(a[3*t+2])}function $(t){i.push(t.x),i.push(t.y)}!function(){var t=n.length/3;if(h){var e=0,i=N*e;for(F=0;F<z;F++)Z((B=A[F])[2]+i,B[1]+i,B[0]+i);for(i=N*(e=s+2*p),F=0;F<z;F++)Z((B=A[F])[0]+i,B[1]+i,B[2]+i)}else{for(F=0;F<z;F++)Z((B=A[F])[2],B[1],B[0]);for(F=0;F<z;F++)Z((B=A[F])[0]+N*s,B[1]+N*s,B[2]+N*s)}r.addGroup(t,n.length/3-t,0)}(),function(){var t=n.length/3,e=0;for(Y(L,e),e+=L.length,w=0,_=T.length;w<_;w++)Y(b=T[w],e),e+=b.length;r.addGroup(t,n.length/3-t,1)}()}this.addAttribute("position",new zr(n,3)),this.addAttribute("uv",new zr(i,2)),this.computeVertexNormals()}xo.prototype=Object.create(Lr.prototype),xo.prototype.constructor=xo,xo.prototype.toJSON=function(){var t=Lr.prototype.toJSON.call(this);return _o(this.parameters.shapes,this.parameters.options,t)},bo.prototype=Object.create(Vr.prototype),bo.prototype.constructor=bo,bo.prototype.toJSON=function(){var t=Vr.prototype.toJSON.call(this);return _o(this.parameters.shapes,this.parameters.options,t)};var wo={generateTopUV:function(t,e,r,n,i){var a=e[3*r],o=e[3*r+1],s=e[3*n],c=e[3*n+1],h=e[3*i],l=e[3*i+1];return[new De(a,o),new De(s,c),new De(h,l)]},generateSideWallUV:function(t,e,r,n,i,a){var o=e[3*r],s=e[3*r+1],c=e[3*r+2],h=e[3*n],l=e[3*n+1],u=e[3*n+2],p=e[3*i],d=e[3*i+1],f=e[3*i+2],m=e[3*a],g=e[3*a+1],v=e[3*a+2];return Math.abs(s-l)<.01?[new De(o,1-c),new De(h,1-u),new De(p,1-f),new De(m,1-v)]:[new De(s,1-c),new De(l,1-u),new De(d,1-f),new De(g,1-v)]}};function _o(t,e,r){if(r.shapes=[],Array.isArray(t))for(var n=0,i=t.length;n<i;n++){var a=t[n];r.shapes.push(a.uuid)}else r.shapes.push(t.uuid);return void 0!==e.extrudePath&&(r.options.extrudePath=e.extrudePath.toJSON()),r}function Mo(t,e){Lr.call(this),this.type="TextGeometry",this.parameters={text:t,parameters:e},this.fromBufferGeometry(new Eo(t,e)),this.mergeVertices()}function Eo(t,e){var r=(e=e||{}).font;if(!r||!r.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Lr;var n=r.generateShapes(t,e.size);e.depth=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),bo.call(this,n,e),this.type="TextBufferGeometry"}function So(t,e,r,n,i,a,o){Lr.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:r,phiStart:n,phiLength:i,thetaStart:a,thetaLength:o},this.fromBufferGeometry(new To(t,e,r,n,i,a,o)),this.mergeVertices()}function To(t,e,r,n,i,a,o){Vr.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:r,phiStart:n,phiLength:i,thetaStart:a,thetaLength:o},t=t||1,e=Math.max(3,Math.floor(e)||8),r=Math.max(2,Math.floor(r)||6),n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI;var s,c,h=(a=void 0!==a?a:0)+(o=void 0!==o?o:Math.PI),l=0,u=[],p=new ze,d=new ze,f=[],m=[],g=[],v=[];for(c=0;c<=r;c++){var y=[],x=c/r;for(s=0;s<=e;s++){var b=s/e;p.x=-t*Math.cos(n+b*i)*Math.sin(a+x*o),p.y=t*Math.cos(a+x*o),p.z=t*Math.sin(n+b*i)*Math.sin(a+x*o),m.push(p.x,p.y,p.z),d.set(p.x,p.y,p.z).normalize(),g.push(d.x,d.y,d.z),v.push(b,1-x),y.push(l++)}u.push(y)}for(c=0;c<r;c++)for(s=0;s<e;s++){var w=u[c][s+1],_=u[c][s],M=u[c+1][s],E=u[c+1][s+1];(0!==c||a>0)&&f.push(w,_,E),(c!==r-1||h<Math.PI)&&f.push(_,M,E)}this.setIndex(f),this.addAttribute("position",new zr(m,3)),this.addAttribute("normal",new zr(g,3)),this.addAttribute("uv",new zr(v,2))}function Ao(t,e,r,n,i,a){Lr.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:r,phiSegments:n,thetaStart:i,thetaLength:a},this.fromBufferGeometry(new Lo(t,e,r,n,i,a)),this.mergeVertices()}function Lo(t,e,r,n,i,a){Vr.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:r,phiSegments:n,thetaStart:i,thetaLength:a},t=t||.5,e=e||1,i=void 0!==i?i:0,a=void 0!==a?a:2*Math.PI,r=void 0!==r?Math.max(3,r):8;var o,s,c,h=[],l=[],u=[],p=[],d=t,f=(e-t)/(n=void 0!==n?Math.max(1,n):1),m=new ze,g=new De;for(s=0;s<=n;s++){for(c=0;c<=r;c++)o=i+c/r*a,m.x=d*Math.cos(o),m.y=d*Math.sin(o),l.push(m.x,m.y,m.z),u.push(0,0,1),g.x=(m.x/e+1)/2,g.y=(m.y/e+1)/2,p.push(g.x,g.y);d+=f}for(s=0;s<n;s++){var v=s*(r+1);for(c=0;c<r;c++){var y=o=c+v,x=o+r+1,b=o+r+2,w=o+1;h.push(y,x,w),h.push(x,b,w)}}this.setIndex(h),this.addAttribute("position",new zr(l,3)),this.addAttribute("normal",new zr(u,3)),this.addAttribute("uv",new zr(p,2))}function Po(t,e,r,n){Lr.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:r,phiLength:n},this.fromBufferGeometry(new Ro(t,e,r,n)),this.mergeVertices()}function Ro(t,e,r,n){Vr.call(this),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:r,phiLength:n},e=Math.floor(e)||12,r=r||0,n=n||2*Math.PI,n=Ie.clamp(n,0,2*Math.PI);var i,a,o,s=[],c=[],h=[],l=1/e,u=new ze,p=new De;for(a=0;a<=e;a++){var d=r+a*l*n,f=Math.sin(d),m=Math.cos(d);for(o=0;o<=t.length-1;o++)u.x=t[o].x*f,u.y=t[o].y,u.z=t[o].x*m,c.push(u.x,u.y,u.z),p.x=a/e,p.y=o/(t.length-1),h.push(p.x,p.y)}for(a=0;a<e;a++)for(o=0;o<t.length-1;o++){var g=i=o+a*t.length,v=i+t.length,y=i+t.length+1,x=i+1;s.push(g,v,x),s.push(v,y,x)}if(this.setIndex(s),this.addAttribute("position",new zr(c,3)),this.addAttribute("uv",new zr(h,2)),this.computeVertexNormals(),n===2*Math.PI){var b=this.attributes.normal.array,w=new ze,_=new ze,M=new ze;for(i=e*t.length*3,a=0,o=0;a<t.length;a++,o+=3)w.x=b[o+0],w.y=b[o+1],w.z=b[o+2],_.x=b[i+o+0],_.y=b[i+o+1],_.z=b[i+o+2],M.addVectors(w,_).normalize(),b[o+0]=b[i+o+0]=M.x,b[o+1]=b[i+o+1]=M.y,b[o+2]=b[i+o+2]=M.z}}function Co(t,e){Lr.call(this),this.type="ShapeGeometry","object"==typeof e&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new Oo(t,e)),this.mergeVertices()}function Oo(t,e){Vr.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:e},e=e||12;var r=[],n=[],i=[],a=[],o=0,s=0;if(!1===Array.isArray(t))h(t);else for(var c=0;c<t.length;c++)h(t[c]),this.addGroup(o,s,c),o+=s,s=0;function h(t){var o,c,h,l=n.length/3,u=t.extractPoints(e),p=u.shape,d=u.holes;for(!1===go.isClockWise(p)&&(p=p.reverse()),o=0,c=d.length;o<c;o++)h=d[o],!0===go.isClockWise(h)&&(d[o]=h.reverse());var f=go.triangulateShape(p,d);for(o=0,c=d.length;o<c;o++)h=d[o],p=p.concat(h);for(o=0,c=p.length;o<c;o++){var m=p[o];n.push(m.x,m.y,0),i.push(0,0,1),a.push(m.x,m.y)}for(o=0,c=f.length;o<c;o++){var g=f[o],v=g[0]+l,y=g[1]+l,x=g[2]+l;r.push(v,y,x),s+=3}}this.setIndex(r),this.addAttribute("position",new zr(n,3)),this.addAttribute("normal",new zr(i,3)),this.addAttribute("uv",new zr(a,2))}function Io(t,e){if(e.shapes=[],Array.isArray(t))for(var r=0,n=t.length;r<n;r++){var i=t[r];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}function Do(t,e){Vr.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:e},e=void 0!==e?e:1;var r,n,i,a,o=[],s=Math.cos(Ie.DEG2RAD*e),c=[0,0],h={},l=["a","b","c"];t.isBufferGeometry?(a=new Lr).fromBufferGeometry(t):a=t.clone(),a.mergeVertices(),a.computeFaceNormals();for(var u=a.vertices,p=a.faces,d=0,f=p.length;d<f;d++)for(var m=p[d],g=0;g<3;g++)r=m[l[g]],n=m[l[(g+1)%3]],c[0]=Math.min(r,n),c[1]=Math.max(r,n),void 0===h[i=c[0]+","+c[1]]?h[i]={index1:c[0],index2:c[1],face1:d,face2:void 0}:h[i].face2=d;for(i in h){var v=h[i];if(void 0===v.face2||p[v.face1].normal.dot(p[v.face2].normal)<=s){var y=u[v.index1];o.push(y.x,y.y,y.z),y=u[v.index2],o.push(y.x,y.y,y.z)}}this.addAttribute("position",new zr(o,3))}function Bo(t,e,r,n,i,a,o,s){Lr.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:r,radialSegments:n,heightSegments:i,openEnded:a,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new No(t,e,r,n,i,a,o,s)),this.mergeVertices()}function No(t,e,r,n,i,a,o,s){Vr.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:r,radialSegments:n,heightSegments:i,openEnded:a,thetaStart:o,thetaLength:s};var c=this;t=void 0!==t?t:1,e=void 0!==e?e:1,r=r||1,n=Math.floor(n)||8,i=Math.floor(i)||1,a=void 0!==a&&a,o=void 0!==o?o:0,s=void 0!==s?s:2*Math.PI;var h=[],l=[],u=[],p=[],d=0,f=[],m=r/2,g=0;function v(r){var i,a,f,v=new De,y=new ze,x=0,b=!0===r?t:e,w=!0===r?1:-1;for(a=d,i=1;i<=n;i++)l.push(0,m*w,0),u.push(0,w,0),p.push(.5,.5),d++;for(f=d,i=0;i<=n;i++){var _=i/n*s+o,M=Math.cos(_),E=Math.sin(_);y.x=b*E,y.y=m*w,y.z=b*M,l.push(y.x,y.y,y.z),u.push(0,w,0),v.x=.5*M+.5,v.y=.5*E*w+.5,p.push(v.x,v.y),d++}for(i=0;i<n;i++){var S=a+i,T=f+i;!0===r?h.push(T,T+1,S):h.push(T+1,T,S),x+=3}c.addGroup(g,x,!0===r?1:2),g+=x}!function(){var a,v,y=new ze,x=new ze,b=0,w=(e-t)/r;for(v=0;v<=i;v++){var _=[],M=v/i,E=M*(e-t)+t;for(a=0;a<=n;a++){var S=a/n,T=S*s+o,A=Math.sin(T),L=Math.cos(T);x.x=E*A,x.y=-M*r+m,x.z=E*L,l.push(x.x,x.y,x.z),y.set(A,w,L).normalize(),u.push(y.x,y.y,y.z),p.push(S,1-M),_.push(d++)}f.push(_)}for(a=0;a<n;a++)for(v=0;v<i;v++){var P=f[v][a],R=f[v+1][a],C=f[v+1][a+1],O=f[v][a+1];h.push(P,R,O),h.push(R,C,O),b+=6}c.addGroup(g,b,0),g+=b}(),!1===a&&(t>0&&v(!0),e>0&&v(!1)),this.setIndex(h),this.addAttribute("position",new zr(l,3)),this.addAttribute("normal",new zr(u,3)),this.addAttribute("uv",new zr(p,2))}function zo(t,e,r,n,i,a,o){Bo.call(this,0,t,e,r,n,i,a,o),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:r,heightSegments:n,openEnded:i,thetaStart:a,thetaLength:o}}function Uo(t,e,r,n,i,a,o){No.call(this,0,t,e,r,n,i,a,o),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:r,heightSegments:n,openEnded:i,thetaStart:a,thetaLength:o}}function Go(t,e,r,n){Lr.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:r,thetaLength:n},this.fromBufferGeometry(new Fo(t,e,r,n)),this.mergeVertices()}function Fo(t,e,r,n){Vr.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:r,thetaLength:n},t=t||1,e=void 0!==e?Math.max(3,e):8,r=void 0!==r?r:0,n=void 0!==n?n:2*Math.PI;var i,a,o=[],s=[],c=[],h=[],l=new ze,u=new De;for(s.push(0,0,0),c.push(0,0,1),h.push(.5,.5),a=0,i=3;a<=e;a++,i+=3){var p=r+a/e*n;l.x=t*Math.cos(p),l.y=t*Math.sin(p),s.push(l.x,l.y,l.z),c.push(0,0,1),u.x=(s[i]/t+1)/2,u.y=(s[i+1]/t+1)/2,h.push(u.x,u.y)}for(i=1;i<=e;i++)o.push(i,i+1,0);this.setIndex(o),this.addAttribute("position",new zr(s,3)),this.addAttribute("normal",new zr(c,3)),this.addAttribute("uv",new zr(h,2))}Mo.prototype=Object.create(Lr.prototype),Mo.prototype.constructor=Mo,Eo.prototype=Object.create(bo.prototype),Eo.prototype.constructor=Eo,So.prototype=Object.create(Lr.prototype),So.prototype.constructor=So,To.prototype=Object.create(Vr.prototype),To.prototype.constructor=To,Ao.prototype=Object.create(Lr.prototype),Ao.prototype.constructor=Ao,Lo.prototype=Object.create(Vr.prototype),Lo.prototype.constructor=Lo,Po.prototype=Object.create(Lr.prototype),Po.prototype.constructor=Po,Ro.prototype=Object.create(Vr.prototype),Ro.prototype.constructor=Ro,Co.prototype=Object.create(Lr.prototype),Co.prototype.constructor=Co,Co.prototype.toJSON=function(){var t=Lr.prototype.toJSON.call(this);return Io(this.parameters.shapes,t)},Oo.prototype=Object.create(Vr.prototype),Oo.prototype.constructor=Oo,Oo.prototype.toJSON=function(){var t=Vr.prototype.toJSON.call(this);return Io(this.parameters.shapes,t)},Do.prototype=Object.create(Vr.prototype),Do.prototype.constructor=Do,Bo.prototype=Object.create(Lr.prototype),Bo.prototype.constructor=Bo,No.prototype=Object.create(Vr.prototype),No.prototype.constructor=No,zo.prototype=Object.create(Bo.prototype),zo.prototype.constructor=zo,Uo.prototype=Object.create(No.prototype),Uo.prototype.constructor=Uo,Go.prototype=Object.create(Lr.prototype),Go.prototype.constructor=Go,Fo.prototype=Object.create(Vr.prototype),Fo.prototype.constructor=Fo;var Ho=Object.freeze({WireframeGeometry:La,ParametricGeometry:Pa,ParametricBufferGeometry:Ra,TetrahedronGeometry:Ia,TetrahedronBufferGeometry:Da,OctahedronGeometry:Ba,OctahedronBufferGeometry:Na,IcosahedronGeometry:za,IcosahedronBufferGeometry:Ua,DodecahedronGeometry:Ga,DodecahedronBufferGeometry:Fa,PolyhedronGeometry:Ca,PolyhedronBufferGeometry:Oa,TubeGeometry:Ha,TubeBufferGeometry:Va,TorusKnotGeometry:ka,TorusKnotBufferGeometry:ja,TorusGeometry:Wa,TorusBufferGeometry:qa,TextGeometry:Mo,TextBufferGeometry:Eo,SphereGeometry:So,SphereBufferGeometry:To,RingGeometry:Ao,RingBufferGeometry:Lo,PlaneGeometry:Wr,PlaneBufferGeometry:qr,LatheGeometry:Po,LatheBufferGeometry:Ro,ShapeGeometry:Co,ShapeBufferGeometry:Oo,ExtrudeGeometry:xo,ExtrudeBufferGeometry:bo,EdgesGeometry:Do,ConeGeometry:zo,ConeBufferGeometry:Uo,CylinderGeometry:Bo,CylinderBufferGeometry:No,CircleGeometry:Go,CircleBufferGeometry:Fo,BoxGeometry:kr,BoxBufferGeometry:jr});function Vo(t){sn.call(this),this.type="ShadowMaterial",this.color=new lr(0),this.transparent=!0,this.setValues(t)}function ko(t){cn.call(this,t),this.type="RawShaderMaterial"}function jo(t){sn.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new lr(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new lr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ce,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Wo(t){jo.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(t)}function qo(t){sn.call(this),this.type="MeshPhongMaterial",this.color=new lr(16777215),this.specular=new lr(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new lr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ce,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=rt,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Xo(t){qo.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(t)}function Yo(t){sn.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ce,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Jo(t){sn.call(this),this.type="MeshLambertMaterial",this.color=new lr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new lr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=rt,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Zo(t){sn.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new lr(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ce,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.lights=!1,this.setValues(t)}function Qo(t){ya.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}Vo.prototype=Object.create(sn.prototype),Vo.prototype.constructor=Vo,Vo.prototype.isShadowMaterial=!0,Vo.prototype.copy=function(t){return sn.prototype.copy.call(this,t),this.color.copy(t.color),this},ko.prototype=Object.create(cn.prototype),ko.prototype.constructor=ko,ko.prototype.isRawShaderMaterial=!0,jo.prototype=Object.create(sn.prototype),jo.prototype.constructor=jo,jo.prototype.isMeshStandardMaterial=!0,jo.prototype.copy=function(t){return sn.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Wo.prototype=Object.create(jo.prototype),Wo.prototype.constructor=Wo,Wo.prototype.isMeshPhysicalMaterial=!0,Wo.prototype.copy=function(t){return jo.prototype.copy.call(this,t),this.defines={PHYSICAL:""},this.reflectivity=t.reflectivity,this.clearCoat=t.clearCoat,this.clearCoatRoughness=t.clearCoatRoughness,this},qo.prototype=Object.create(sn.prototype),qo.prototype.constructor=qo,qo.prototype.isMeshPhongMaterial=!0,qo.prototype.copy=function(t){return sn.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Xo.prototype=Object.create(qo.prototype),Xo.prototype.constructor=Xo,Xo.prototype.isMeshToonMaterial=!0,Xo.prototype.copy=function(t){return qo.prototype.copy.call(this,t),this.gradientMap=t.gradientMap,this},Yo.prototype=Object.create(sn.prototype),Yo.prototype.constructor=Yo,Yo.prototype.isMeshNormalMaterial=!0,Yo.prototype.copy=function(t){return sn.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Jo.prototype=Object.create(sn.prototype),Jo.prototype.constructor=Jo,Jo.prototype.isMeshLambertMaterial=!0,Jo.prototype.copy=function(t){return sn.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Zo.prototype=Object.create(sn.prototype),Zo.prototype.constructor=Zo,Zo.prototype.isMeshMatcapMaterial=!0,Zo.prototype.copy=function(t){return sn.prototype.copy.call(this,t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Qo.prototype=Object.create(ya.prototype),Qo.prototype.constructor=Qo,Qo.prototype.isLineDashedMaterial=!0,Qo.prototype.copy=function(t){return ya.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var Ko=Object.freeze({ShadowMaterial:Vo,SpriteMaterial:pa,RawShaderMaterial:ko,ShaderMaterial:cn,PointsMaterial:_a,MeshPhysicalMaterial:Wo,MeshStandardMaterial:jo,MeshPhongMaterial:qo,MeshToonMaterial:Xo,MeshNormalMaterial:Yo,MeshLambertMaterial:Jo,MeshDepthMaterial:Gi,MeshDistanceMaterial:Fi,MeshBasicMaterial:un,MeshMatcapMaterial:Zo,LineDashedMaterial:Qo,LineBasicMaterial:ya,Material:sn}),$o={arraySlice:function(t,e,r){return $o.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==r?r:t.length)):t.slice(e,r)},convertArray:function(t,e,r){return!t||!r&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){for(var e=t.length,r=new Array(e),n=0;n!==e;++n)r[n]=n;return r.sort(function(e,r){return t[e]-t[r]}),r},sortedArray:function(t,e,r){for(var n=t.length,i=new t.constructor(n),a=0,o=0;o!==n;++a)for(var s=r[a]*e,c=0;c!==e;++c)i[o++]=t[s+c];return i},flattenJSON:function(t,e,r,n){for(var i=1,a=t[0];void 0!==a&&void 0===a[n];)a=t[i++];if(void 0!==a){var o=a[n];if(void 0!==o)if(Array.isArray(o))do{void 0!==(o=a[n])&&(e.push(a.time),r.push.apply(r,o)),a=t[i++]}while(void 0!==a);else if(void 0!==o.toArray)do{void 0!==(o=a[n])&&(e.push(a.time),o.toArray(r,r.length)),a=t[i++]}while(void 0!==a);else do{void 0!==(o=a[n])&&(e.push(a.time),r.push(o)),a=t[i++]}while(void 0!==a)}}};function ts(t,e,r,n){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new e.constructor(r),this.sampleValues=e,this.valueSize=r}function es(t,e,r,n){ts.call(this,t,e,r,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function rs(t,e,r,n){ts.call(this,t,e,r,n)}function ns(t,e,r,n){ts.call(this,t,e,r,n)}function is(t,e,r,n){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=$o.convertArray(e,this.TimeBufferType),this.values=$o.convertArray(r,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}function as(t,e,r){is.call(this,t,e,r)}function os(t,e,r,n){is.call(this,t,e,r,n)}function ss(t,e,r,n){is.call(this,t,e,r,n)}function cs(t,e,r,n){ts.call(this,t,e,r,n)}function hs(t,e,r,n){is.call(this,t,e,r,n)}function ls(t,e,r,n){is.call(this,t,e,r,n)}function us(t,e,r,n){is.call(this,t,e,r,n)}function ps(t,e,r){this.name=t,this.tracks=r,this.duration=void 0!==e?e:-1,this.uuid=Ie.generateUUID(),this.duration<0&&this.resetDuration()}function ds(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ss;case"vector":case"vector2":case"vector3":case"vector4":return us;case"color":return os;case"quaternion":return hs;case"bool":case"boolean":return as;case"string":return ls}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){var r=[],n=[];$o.flattenJSON(t.keys,r,n,"value"),t.times=r,t.values=n}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}Object.assign(ts.prototype,{evaluate:function(t){var e=this.parameterPositions,r=this._cachedIndex,n=e[r],i=e[r-1];t:{e:{var a;r:{n:if(!(t<n)){for(var o=r+2;;){if(void 0===n){if(t<i)break n;return r=e.length,this._cachedIndex=r,this.afterEnd_(r-1,t,i)}if(r===o)break;if(i=n,t<(n=e[++r]))break e}a=e.length;break r}if(t>=i)break t;var s=e[1];t<s&&(r=2,i=s);for(o=r-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,t,n);if(r===o)break;if(n=i,t>=(i=e[--r-1]))break e}a=r,r=0}for(;r<a;){var c=r+a>>>1;t<e[c]?a=c:r=c+1}if(n=e[r],void 0===(i=e[r-1]))return this._cachedIndex=0,this.beforeStart_(0,t,n);if(void 0===n)return r=e.length,this._cachedIndex=r,this.afterEnd_(r-1,i,t)}this._cachedIndex=r,this.intervalChanged_(r,i,n)}return this.interpolate_(r,i,t,n)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){for(var e=this.resultBuffer,r=this.sampleValues,n=this.valueSize,i=t*n,a=0;a!==n;++a)e[a]=r[i+a];return e},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(ts.prototype,{beforeStart_:ts.prototype.copySampleValue_,afterEnd_:ts.prototype.copySampleValue_}),es.prototype=Object.assign(Object.create(ts.prototype),{constructor:es,DefaultSettings_:{endingStart:ye,endingEnd:ye},intervalChanged_:function(t,e,r){var n=this.parameterPositions,i=t-2,a=t+1,o=n[i],s=n[a];if(void 0===o)switch(this.getSettings_().endingStart){case 2401:i=t,o=2*e-r;break;case 2402:o=e+n[i=n.length-2]-n[i+1];break;default:i=t,o=r}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:a=t,s=2*r-e;break;case 2402:a=1,s=r+n[1]-n[0];break;default:a=t-1,s=e}var c=.5*(r-e),h=this.valueSize;this._weightPrev=c/(e-o),this._weightNext=c/(s-r),this._offsetPrev=i*h,this._offsetNext=a*h},interpolate_:function(t,e,r,n){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=t*o,c=s-o,h=this._offsetPrev,l=this._offsetNext,u=this._weightPrev,p=this._weightNext,d=(r-e)/(n-e),f=d*d,m=f*d,g=-u*m+2*u*f-u*d,v=(1+u)*m+(-1.5-2*u)*f+(-.5+u)*d+1,y=(-1-p)*m+(1.5+p)*f+.5*d,x=p*m-p*f,b=0;b!==o;++b)i[b]=g*a[h+b]+v*a[c+b]+y*a[s+b]+x*a[l+b];return i}}),rs.prototype=Object.assign(Object.create(ts.prototype),{constructor:rs,interpolate_:function(t,e,r,n){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=t*o,c=s-o,h=(r-e)/(n-e),l=1-h,u=0;u!==o;++u)i[u]=a[c+u]*l+a[s+u]*h;return i}}),ns.prototype=Object.assign(Object.create(ts.prototype),{constructor:ns,interpolate_:function(t){return this.copySampleValue_(t-1)}}),Object.assign(is,{toJSON:function(t){var e,r=t.constructor;if(void 0!==r.toJSON)e=r.toJSON(t);else{e={name:t.name,times:$o.convertArray(t.times,Array),values:$o.convertArray(t.values,Array)};var n=t.getInterpolation();n!==t.DefaultInterpolation&&(e.interpolation=n)}return e.type=t.ValueTypeName,e}}),Object.assign(is.prototype,{constructor:is,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(t){return new ns(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new rs(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new es(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var e;switch(t){case 2300:e=this.InterpolantFactoryMethodDiscrete;break;case 2301:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){var r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(r);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=e,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,r=0,n=e.length;r!==n;++r)e[r]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,r=0,n=e.length;r!==n;++r)e[r]*=t;return this},trim:function(t,e){for(var r=this.times,n=r.length,i=0,a=n-1;i!==n&&r[i]<t;)++i;for(;-1!==a&&r[a]>e;)--a;if(++a,0!==i||a!==n){i>=a&&(i=(a=Math.max(a,1))-1);var o=this.getValueSize();this.times=$o.arraySlice(r,i,a),this.values=$o.arraySlice(this.values,i*o,a*o)}return this},validate:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var r=this.times,n=this.values,i=r.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var a=null,o=0;o!==i;o++){var s=r[o];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,s),t=!1;break}if(null!==a&&a>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,s,a),t=!1;break}a=s}if(void 0!==n&&$o.isTypedArray(n)){o=0;for(var c=n.length;o!==c;++o){var h=n[o];if(isNaN(h)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,h),t=!1;break}}}return t},optimize:function(){for(var t=this.times,e=this.values,r=this.getValueSize(),n=2302===this.getInterpolation(),i=1,a=t.length-1,o=1;o<a;++o){var s=!1,c=t[o];if(c!==t[o+1]&&(1!==o||c!==c[0]))if(n)s=!0;else for(var h=o*r,l=h-r,u=h+r,p=0;p!==r;++p){var d=e[h+p];if(d!==e[l+p]||d!==e[u+p]){s=!0;break}}if(s){if(o!==i){t[i]=t[o];var f=o*r,m=i*r;for(p=0;p!==r;++p)e[m+p]=e[f+p]}++i}}if(a>0){t[i]=t[a];for(f=a*r,m=i*r,p=0;p!==r;++p)e[m+p]=e[f+p];++i}return i!==t.length&&(this.times=$o.arraySlice(t,0,i),this.values=$o.arraySlice(e,0,i*r)),this},clone:function(){var t=$o.arraySlice(this.times,0),e=$o.arraySlice(this.values,0),r=new(0,this.constructor)(this.name,t,e);return r.createInterpolant=this.createInterpolant,r}}),as.prototype=Object.assign(Object.create(is.prototype),{constructor:as,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),os.prototype=Object.assign(Object.create(is.prototype),{constructor:os,ValueTypeName:"color"}),ss.prototype=Object.assign(Object.create(is.prototype),{constructor:ss,ValueTypeName:"number"}),cs.prototype=Object.assign(Object.create(ts.prototype),{constructor:cs,interpolate_:function(t,e,r,n){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=t*o,c=(r-e)/(n-e),h=s+o;s!==h;s+=4)Ne.slerpFlat(i,0,a,s-o,a,s,c);return i}}),hs.prototype=Object.assign(Object.create(is.prototype),{constructor:hs,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(t){return new cs(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),ls.prototype=Object.assign(Object.create(is.prototype),{constructor:ls,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),us.prototype=Object.assign(Object.create(is.prototype),{constructor:us,ValueTypeName:"vector"}),Object.assign(ps,{parse:function(t){for(var e=[],r=t.tracks,n=1/(t.fps||1),i=0,a=r.length;i!==a;++i)e.push(ds(r[i]).scale(n));return new ps(t.name,t.duration,e)},toJSON:function(t){for(var e=[],r=t.tracks,n={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid},i=0,a=r.length;i!==a;++i)e.push(is.toJSON(r[i]));return n},CreateFromMorphTargetSequence:function(t,e,r,n){for(var i=e.length,a=[],o=0;o<i;o++){var s=[],c=[];s.push((o+i-1)%i,o,(o+1)%i),c.push(0,1,0);var h=$o.getKeyframeOrder(s);s=$o.sortedArray(s,1,h),c=$o.sortedArray(c,1,h),n||0!==s[0]||(s.push(i),c.push(c[0])),a.push(new ss(".morphTargetInfluences["+e[o].name+"]",s,c).scale(1/r))}return new ps(t,-1,a)},findByName:function(t,e){var r=t;if(!Array.isArray(t)){var n=t;r=n.geometry&&n.geometry.animations||n.animations}for(var i=0;i<r.length;i++)if(r[i].name===e)return r[i];return null},CreateClipsFromMorphTargetSequences:function(t,e,r){for(var n={},i=/^([\w-]*?)([\d]+)$/,a=0,o=t.length;a<o;a++){var s=t[a],c=s.name.match(i);if(c&&c.length>1){var h=n[u=c[1]];h||(n[u]=h=[]),h.push(s)}}var l=[];for(var u in n)l.push(ps.CreateFromMorphTargetSequence(u,n[u],e,r));return l},parseAnimation:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var r=function(t,e,r,n,i){if(0!==r.length){var a=[],o=[];$o.flattenJSON(r,a,o,n),0!==a.length&&i.push(new t(e,a,o))}},n=[],i=t.name||"default",a=t.length||-1,o=t.fps||30,s=t.hierarchy||[],c=0;c<s.length;c++){var h=s[c].keys;if(h&&0!==h.length)if(h[0].morphTargets){for(var l={},u=0;u<h.length;u++)if(h[u].morphTargets)for(var p=0;p<h[u].morphTargets.length;p++)l[h[u].morphTargets[p]]=-1;for(var d in l){var f=[],m=[];for(p=0;p!==h[u].morphTargets.length;++p){var g=h[u];f.push(g.time),m.push(g.morphTarget===d?1:0)}n.push(new ss(".morphTargetInfluence["+d+"]",f,m))}a=l.length*(o||1)}else{var v=".bones["+e[c].name+"]";r(us,v+".position",h,"pos",n),r(hs,v+".quaternion",h,"rot",n),r(us,v+".scale",h,"scl",n)}}return 0===n.length?null:new ps(i,a,n)}}),Object.assign(ps.prototype,{resetDuration:function(){for(var t=0,e=0,r=this.tracks.length;e!==r;++e){var n=this.tracks[e];t=Math.max(t,n.times[n.times.length-1])}return this.duration=t,this},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},validate:function(){for(var t=!0,e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this},clone:function(){for(var t=[],e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new ps(this.name,this.duration,t)}});var fs={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};function ms(t,e,r){var n=this,i=!1,a=0,o=0,s=void 0;this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=r,this.itemStart=function(t){o++,!1===i&&void 0!==n.onStart&&n.onStart(t,a,o),i=!0},this.itemEnd=function(t){a++,void 0!==n.onProgress&&n.onProgress(t,a,o),a===o&&(i=!1,void 0!==n.onLoad&&n.onLoad())},this.itemError=function(t){void 0!==n.onError&&n.onError(t)},this.resolveURL=function(t){return s?s(t):t},this.setURLModifier=function(t){return s=t,this}}var gs=new ms,vs={};function ys(t){this.manager=void 0!==t?t:gs}function xs(t){this.manager=void 0!==t?t:gs}function bs(t){this.manager=void 0!==t?t:gs,this._parser=null}function ws(t){this.manager=void 0!==t?t:gs,this._parser=null}function _s(t){this.manager=void 0!==t?t:gs}function Ms(t){this.manager=void 0!==t?t:gs}function Es(t){this.manager=void 0!==t?t:gs}function Ss(){this.type="Curve",this.arcLengthDivisions=200}function Ts(t,e,r,n,i,a,o,s){Ss.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=r||1,this.yRadius=n||1,this.aStartAngle=i||0,this.aEndAngle=a||2*Math.PI,this.aClockwise=o||!1,this.aRotation=s||0}function As(t,e,r,n,i,a){Ts.call(this,t,e,r,r,n,i,a),this.type="ArcCurve"}function Ls(){var t=0,e=0,r=0,n=0;function i(i,a,o,s){t=i,e=o,r=-3*i+3*a-2*o-s,n=2*i-2*a+o+s}return{initCatmullRom:function(t,e,r,n,a){i(e,r,a*(r-t),a*(n-e))},initNonuniformCatmullRom:function(t,e,r,n,a,o,s){var c=(e-t)/a-(r-t)/(a+o)+(r-e)/o,h=(r-e)/o-(n-e)/(o+s)+(n-r)/s;i(e,r,c*=o,h*=o)},calc:function(i){var a=i*i;return t+e*i+r*a+n*(a*i)}}}Object.assign(ys.prototype,{load:function(t,e,r,n){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,a=fs.get(t);if(void 0!==a)return i.manager.itemStart(t),setTimeout(function(){e&&e(a),i.manager.itemEnd(t)},0),a;if(void 0===vs[t]){var o=t.match(/^data:(.*?)(;base64)?,(.*)$/);if(o){var s=o[1],c=!!o[2],h=o[3];h=decodeURIComponent(h),c&&(h=atob(h));try{var l,u=(this.responseType||"").toLowerCase();switch(u){case"arraybuffer":case"blob":for(var p=new Uint8Array(h.length),d=0;d<h.length;d++)p[d]=h.charCodeAt(d);l="blob"===u?new Blob([p.buffer],{type:s}):p.buffer;break;case"document":var f=new DOMParser;l=f.parseFromString(h,s);break;case"json":l=JSON.parse(h);break;default:l=h}setTimeout(function(){e&&e(l),i.manager.itemEnd(t)},0)}catch(e){setTimeout(function(){n&&n(e),i.manager.itemError(t),i.manager.itemEnd(t)},0)}}else{vs[t]=[],vs[t].push({onLoad:e,onProgress:r,onError:n});var m=new XMLHttpRequest;for(var g in m.open("GET",t,!0),m.addEventListener("load",function(e){var r=this.response;fs.add(t,r);var n=vs[t];if(delete vs[t],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var a=0,o=n.length;a<o;a++){(s=n[a]).onLoad&&s.onLoad(r)}i.manager.itemEnd(t)}else{for(a=0,o=n.length;a<o;a++){var s;(s=n[a]).onError&&s.onError(e)}i.manager.itemError(t),i.manager.itemEnd(t)}},!1),m.addEventListener("progress",function(e){for(var r=vs[t],n=0,i=r.length;n<i;n++){var a=r[n];a.onProgress&&a.onProgress(e)}},!1),m.addEventListener("error",function(e){var r=vs[t];delete vs[t];for(var n=0,a=r.length;n<a;n++){var o=r[n];o.onError&&o.onError(e)}i.manager.itemError(t),i.manager.itemEnd(t)},!1),m.addEventListener("abort",function(e){var r=vs[t];delete vs[t];for(var n=0,a=r.length;n<a;n++){var o=r[n];o.onError&&o.onError(e)}i.manager.itemError(t),i.manager.itemEnd(t)},!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)m.setRequestHeader(g,this.requestHeader[g]);m.send(null)}return i.manager.itemStart(t),m}vs[t].push({onLoad:e,onProgress:r,onError:n})},setPath:function(t){return this.path=t,this},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}}),Object.assign(xs.prototype,{load:function(t,e,r,n){var i=this,a=new ys(i.manager);a.setPath(i.path),a.load(t,function(t){e(i.parse(JSON.parse(t)))},r,n)},parse:function(t,e){for(var r=[],n=0;n<t.length;n++){var i=ps.parse(t[n]);r.push(i)}e(r)},setPath:function(t){return this.path=t,this}}),Object.assign(bs.prototype,{load:function(t,e,r,n){var i=this,a=[],o=new Sa;o.image=a;var s=new ys(this.manager);function c(c){s.load(t[c],function(t){var r=i._parser(t,!0);a[c]={width:r.width,height:r.height,format:r.format,mipmaps:r.mipmaps},6===(h+=1)&&(1===r.mipmapCount&&(o.minFilter=Et),o.format=r.format,o.needsUpdate=!0,e&&e(o))},r,n)}if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(t))for(var h=0,l=0,u=t.length;l<u;++l)c(l);else s.load(t,function(t){var r=i._parser(t,!0);if(r.isCubemap)for(var n=r.mipmaps.length/r.mipmapCount,s=0;s<n;s++){a[s]={mipmaps:[]};for(var c=0;c<r.mipmapCount;c++)a[s].mipmaps.push(r.mipmaps[s*r.mipmapCount+c]),a[s].format=r.format,a[s].width=r.width,a[s].height=r.height}else o.image.width=r.width,o.image.height=r.height,o.mipmaps=r.mipmaps;1===r.mipmapCount&&(o.minFilter=Et),o.format=r.format,o.needsUpdate=!0,e&&e(o)},r,n);return o},setPath:function(t){return this.path=t,this}}),Object.assign(ws.prototype,{load:function(t,e,r,n){var i=this,a=new Qe,o=new ys(this.manager);return o.setResponseType("arraybuffer"),o.setPath(this.path),o.load(t,function(t){var r=i._parser(t);r&&(void 0!==r.image?a.image=r.image:void 0!==r.data&&(a.image.width=r.width,a.image.height=r.height,a.image.data=r.data),a.wrapS=void 0!==r.wrapS?r.wrapS:xt,a.wrapT=void 0!==r.wrapT?r.wrapT:xt,a.magFilter=void 0!==r.magFilter?r.magFilter:Et,a.minFilter=void 0!==r.minFilter?r.minFilter:Tt,a.anisotropy=void 0!==r.anisotropy?r.anisotropy:1,void 0!==r.format&&(a.format=r.format),void 0!==r.type&&(a.type=r.type),void 0!==r.mipmaps&&(a.mipmaps=r.mipmaps),1===r.mipmapCount&&(a.minFilter=Et),a.needsUpdate=!0,e&&e(a,r))},r,n),a},setPath:function(t){return this.path=t,this}}),Object.assign(_s.prototype,{crossOrigin:"anonymous",load:function(t,e,r,n){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,a=fs.get(t);if(void 0!==a)return i.manager.itemStart(t),setTimeout(function(){e&&e(a),i.manager.itemEnd(t)},0),a;var o=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){o.removeEventListener("load",s,!1),o.removeEventListener("error",c,!1),fs.add(t,this),e&&e(this),i.manager.itemEnd(t)}function c(e){o.removeEventListener("load",s,!1),o.removeEventListener("error",c,!1),n&&n(e),i.manager.itemError(t),i.manager.itemEnd(t)}return o.addEventListener("load",s,!1),o.addEventListener("error",c,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),i.manager.itemStart(t),o.src=t,o},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(Ms.prototype,{crossOrigin:"anonymous",load:function(t,e,r,n){var i=new En,a=new _s(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);var o=0;function s(r){a.load(t[r],function(t){i.images[r]=t,6===++o&&(i.needsUpdate=!0,e&&e(i))},void 0,n)}for(var c=0;c<t.length;++c)s(c);return i},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(Es.prototype,{crossOrigin:"anonymous",load:function(t,e,r,n){var i=new qe,a=new _s(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(t,function(r){i.image=r;var n=t.search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/);i.format=n?Ft:Ht,i.needsUpdate=!0,void 0!==e&&e(i)},r,n),i},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(Ss.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,e){var r=this.getUtoTmapping(t);return this.getPoint(r,e)},getPoints:function(t){void 0===t&&(t=5);for(var e=[],r=0;r<=t;r++)e.push(this.getPoint(r/t));return e},getSpacedPoints:function(t){void 0===t&&(t=5);for(var e=[],r=0;r<=t;r++)e.push(this.getPointAt(r/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,r,n=[],i=this.getPoint(0),a=0;for(n.push(0),r=1;r<=t;r++)a+=(e=this.getPoint(r/t)).distanceTo(i),n.push(a),i=e;return this.cacheArcLengths=n,n},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var r,n=this.getLengths(),i=0,a=n.length;r=e||t*n[a-1];for(var o,s=0,c=a-1;s<=c;)if((o=n[i=Math.floor(s+(c-s)/2)]-r)<0)s=i+1;else{if(!(o>0)){c=i;break}c=i-1}if(n[i=c]===r)return i/(a-1);var h=n[i];return(i+(r-h)/(n[i+1]-h))/(a-1)},getTangent:function(t){var e=t-1e-4,r=t+1e-4;e<0&&(e=0),r>1&&(r=1);var n=this.getPoint(e);return this.getPoint(r).clone().sub(n).normalize()},getTangentAt:function(t){var e=this.getUtoTmapping(t);return this.getTangent(e)},computeFrenetFrames:function(t,e){var r,n,i,a=new ze,o=[],s=[],c=[],h=new ze,l=new Be;for(r=0;r<=t;r++)n=r/t,o[r]=this.getTangentAt(n),o[r].normalize();s[0]=new ze,c[0]=new ze;var u=Number.MAX_VALUE,p=Math.abs(o[0].x),d=Math.abs(o[0].y),f=Math.abs(o[0].z);for(p<=u&&(u=p,a.set(1,0,0)),d<=u&&(u=d,a.set(0,1,0)),f<=u&&a.set(0,0,1),h.crossVectors(o[0],a).normalize(),s[0].crossVectors(o[0],h),c[0].crossVectors(o[0],s[0]),r=1;r<=t;r++)s[r]=s[r-1].clone(),c[r]=c[r-1].clone(),h.crossVectors(o[r-1],o[r]),h.length()>Number.EPSILON&&(h.normalize(),i=Math.acos(Ie.clamp(o[r-1].dot(o[r]),-1,1)),s[r].applyMatrix4(l.makeRotationAxis(h,i))),c[r].crossVectors(o[r],s[r]);if(!0===e)for(i=Math.acos(Ie.clamp(s[0].dot(s[t]),-1,1)),i/=t,o[0].dot(h.crossVectors(s[0],s[t]))>0&&(i=-i),r=1;r<=t;r++)s[r].applyMatrix4(l.makeRotationAxis(o[r],i*r)),c[r].crossVectors(o[r],s[r]);return{tangents:o,normals:s,binormals:c}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),Ts.prototype=Object.create(Ss.prototype),Ts.prototype.constructor=Ts,Ts.prototype.isEllipseCurve=!0,Ts.prototype.getPoint=function(t,e){for(var r=e||new De,n=2*Math.PI,i=this.aEndAngle-this.aStartAngle,a=Math.abs(i)<Number.EPSILON;i<0;)i+=n;for(;i>n;)i-=n;i<Number.EPSILON&&(i=a?0:n),!0!==this.aClockwise||a||(i===n?i=-n:i-=n);var o=this.aStartAngle+t*i,s=this.aX+this.xRadius*Math.cos(o),c=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var h=Math.cos(this.aRotation),l=Math.sin(this.aRotation),u=s-this.aX,p=c-this.aY;s=u*h-p*l+this.aX,c=u*l+p*h+this.aY}return r.set(s,c)},Ts.prototype.copy=function(t){return Ss.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Ts.prototype.toJSON=function(){var t=Ss.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t},Ts.prototype.fromJSON=function(t){return Ss.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},As.prototype=Object.create(Ts.prototype),As.prototype.constructor=As,As.prototype.isArcCurve=!0;var Ps=new ze,Rs=new Ls,Cs=new Ls,Os=new Ls;function Is(t,e,r,n){Ss.call(this),this.type="CatmullRomCurve3",this.points=t||[],this.closed=e||!1,this.curveType=r||"centripetal",this.tension=n||.5}function Ds(t,e,r,n,i){var a=.5*(n-e),o=.5*(i-r),s=t*t;return(2*r-2*n+a+o)*(t*s)+(-3*r+3*n-2*a-o)*s+a*t+r}function Bs(t,e,r,n){return function(t,e){var r=1-t;return r*r*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,r)+function(t,e){return t*t*e}(t,n)}function Ns(t,e,r,n,i){return function(t,e){var r=1-t;return r*r*r*e}(t,e)+function(t,e){var r=1-t;return 3*r*r*t*e}(t,r)+function(t,e){return 3*(1-t)*t*t*e}(t,n)+function(t,e){return t*t*t*e}(t,i)}function zs(t,e,r,n){Ss.call(this),this.type="CubicBezierCurve",this.v0=t||new De,this.v1=e||new De,this.v2=r||new De,this.v3=n||new De}function Us(t,e,r,n){Ss.call(this),this.type="CubicBezierCurve3",this.v0=t||new ze,this.v1=e||new ze,this.v2=r||new ze,this.v3=n||new ze}function Gs(t,e){Ss.call(this),this.type="LineCurve",this.v1=t||new De,this.v2=e||new De}function Fs(t,e){Ss.call(this),this.type="LineCurve3",this.v1=t||new ze,this.v2=e||new ze}function Hs(t,e,r){Ss.call(this),this.type="QuadraticBezierCurve",this.v0=t||new De,this.v1=e||new De,this.v2=r||new De}function Vs(t,e,r){Ss.call(this),this.type="QuadraticBezierCurve3",this.v0=t||new ze,this.v1=e||new ze,this.v2=r||new ze}function ks(t){Ss.call(this),this.type="SplineCurve",this.points=t||[]}Is.prototype=Object.create(Ss.prototype),Is.prototype.constructor=Is,Is.prototype.isCatmullRomCurve3=!0,Is.prototype.getPoint=function(t,e){var r,n,i,a,o=e||new ze,s=this.points,c=s.length,h=(c-(this.closed?0:1))*t,l=Math.floor(h),u=h-l;if(this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/c)+1)*c:0===u&&l===c-1&&(l=c-2,u=1),this.closed||l>0?r=s[(l-1)%c]:(Ps.subVectors(s[0],s[1]).add(s[0]),r=Ps),n=s[l%c],i=s[(l+1)%c],this.closed||l+2<c?a=s[(l+2)%c]:(Ps.subVectors(s[c-1],s[c-2]).add(s[c-1]),a=Ps),"centripetal"===this.curveType||"chordal"===this.curveType){var p="chordal"===this.curveType?.5:.25,d=Math.pow(r.distanceToSquared(n),p),f=Math.pow(n.distanceToSquared(i),p),m=Math.pow(i.distanceToSquared(a),p);f<1e-4&&(f=1),d<1e-4&&(d=f),m<1e-4&&(m=f),Rs.initNonuniformCatmullRom(r.x,n.x,i.x,a.x,d,f,m),Cs.initNonuniformCatmullRom(r.y,n.y,i.y,a.y,d,f,m),Os.initNonuniformCatmullRom(r.z,n.z,i.z,a.z,d,f,m)}else"catmullrom"===this.curveType&&(Rs.initCatmullRom(r.x,n.x,i.x,a.x,this.tension),Cs.initCatmullRom(r.y,n.y,i.y,a.y,this.tension),Os.initCatmullRom(r.z,n.z,i.z,a.z,this.tension));return o.set(Rs.calc(u),Cs.calc(u),Os.calc(u)),o},Is.prototype.copy=function(t){Ss.prototype.copy.call(this,t),this.points=[];for(var e=0,r=t.points.length;e<r;e++){var n=t.points[e];this.points.push(n.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},Is.prototype.toJSON=function(){var t=Ss.prototype.toJSON.call(this);t.points=[];for(var e=0,r=this.points.length;e<r;e++){var n=this.points[e];t.points.push(n.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},Is.prototype.fromJSON=function(t){Ss.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,r=t.points.length;e<r;e++){var n=t.points[e];this.points.push((new ze).fromArray(n))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},zs.prototype=Object.create(Ss.prototype),zs.prototype.constructor=zs,zs.prototype.isCubicBezierCurve=!0,zs.prototype.getPoint=function(t,e){var r=e||new De,n=this.v0,i=this.v1,a=this.v2,o=this.v3;return r.set(Ns(t,n.x,i.x,a.x,o.x),Ns(t,n.y,i.y,a.y,o.y)),r},zs.prototype.copy=function(t){return Ss.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},zs.prototype.toJSON=function(){var t=Ss.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},zs.prototype.fromJSON=function(t){return Ss.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},Us.prototype=Object.create(Ss.prototype),Us.prototype.constructor=Us,Us.prototype.isCubicBezierCurve3=!0,Us.prototype.getPoint=function(t,e){var r=e||new ze,n=this.v0,i=this.v1,a=this.v2,o=this.v3;return r.set(Ns(t,n.x,i.x,a.x,o.x),Ns(t,n.y,i.y,a.y,o.y),Ns(t,n.z,i.z,a.z,o.z)),r},Us.prototype.copy=function(t){return Ss.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},Us.prototype.toJSON=function(){var t=Ss.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},Us.prototype.fromJSON=function(t){return Ss.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},Gs.prototype=Object.create(Ss.prototype),Gs.prototype.constructor=Gs,Gs.prototype.isLineCurve=!0,Gs.prototype.getPoint=function(t,e){var r=e||new De;return 1===t?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(t).add(this.v1)),r},Gs.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},Gs.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},Gs.prototype.copy=function(t){return Ss.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Gs.prototype.toJSON=function(){var t=Ss.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Gs.prototype.fromJSON=function(t){return Ss.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Fs.prototype=Object.create(Ss.prototype),Fs.prototype.constructor=Fs,Fs.prototype.isLineCurve3=!0,Fs.prototype.getPoint=function(t,e){var r=e||new ze;return 1===t?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(t).add(this.v1)),r},Fs.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},Fs.prototype.copy=function(t){return Ss.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Fs.prototype.toJSON=function(){var t=Ss.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Fs.prototype.fromJSON=function(t){return Ss.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Hs.prototype=Object.create(Ss.prototype),Hs.prototype.constructor=Hs,Hs.prototype.isQuadraticBezierCurve=!0,Hs.prototype.getPoint=function(t,e){var r=e||new De,n=this.v0,i=this.v1,a=this.v2;return r.set(Bs(t,n.x,i.x,a.x),Bs(t,n.y,i.y,a.y)),r},Hs.prototype.copy=function(t){return Ss.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Hs.prototype.toJSON=function(){var t=Ss.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Hs.prototype.fromJSON=function(t){return Ss.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Vs.prototype=Object.create(Ss.prototype),Vs.prototype.constructor=Vs,Vs.prototype.isQuadraticBezierCurve3=!0,Vs.prototype.getPoint=function(t,e){var r=e||new ze,n=this.v0,i=this.v1,a=this.v2;return r.set(Bs(t,n.x,i.x,a.x),Bs(t,n.y,i.y,a.y),Bs(t,n.z,i.z,a.z)),r},Vs.prototype.copy=function(t){return Ss.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Vs.prototype.toJSON=function(){var t=Ss.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Vs.prototype.fromJSON=function(t){return Ss.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},ks.prototype=Object.create(Ss.prototype),ks.prototype.constructor=ks,ks.prototype.isSplineCurve=!0,ks.prototype.getPoint=function(t,e){var r=e||new De,n=this.points,i=(n.length-1)*t,a=Math.floor(i),o=i-a,s=n[0===a?a:a-1],c=n[a],h=n[a>n.length-2?n.length-1:a+1],l=n[a>n.length-3?n.length-1:a+2];return r.set(Ds(o,s.x,c.x,h.x,l.x),Ds(o,s.y,c.y,h.y,l.y)),r},ks.prototype.copy=function(t){Ss.prototype.copy.call(this,t),this.points=[];for(var e=0,r=t.points.length;e<r;e++){var n=t.points[e];this.points.push(n.clone())}return this},ks.prototype.toJSON=function(){var t=Ss.prototype.toJSON.call(this);t.points=[];for(var e=0,r=this.points.length;e<r;e++){var n=this.points[e];t.points.push(n.toArray())}return t},ks.prototype.fromJSON=function(t){Ss.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,r=t.points.length;e<r;e++){var n=t.points[e];this.points.push((new De).fromArray(n))}return this};var js=Object.freeze({ArcCurve:As,CatmullRomCurve3:Is,CubicBezierCurve:zs,CubicBezierCurve3:Us,EllipseCurve:Ts,LineCurve:Gs,LineCurve3:Fs,QuadraticBezierCurve:Hs,QuadraticBezierCurve3:Vs,SplineCurve:ks});function Ws(){Ss.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function qs(t){Ws.call(this),this.type="Path",this.currentPoint=new De,t&&this.setFromPoints(t)}function Xs(t){qs.call(this,t),this.uuid=Ie.generateUUID(),this.type="Shape",this.holes=[]}function Ys(t,e){Er.call(this),this.type="Light",this.color=new lr(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}function Js(t,e,r){Ys.call(this,t,r),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Er.DefaultUp),this.updateMatrix(),this.groundColor=new lr(e)}function Zs(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new De(512,512),this.map=null,this.matrix=new Be}function Qs(){Zs.call(this,new Xi(50,1,.5,500))}function Ks(t,e,r,n,i,a){Ys.call(this,t,e),this.type="SpotLight",this.position.copy(Er.DefaultUp),this.updateMatrix(),this.target=new Er,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==r?r:0,this.angle=void 0!==n?n:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==a?a:1,this.shadow=new Qs}function $s(t,e,r,n){Ys.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==r?r:0,this.decay=void 0!==n?n:1,this.shadow=new Zs(new Xi(90,1,.5,500))}function tc(t,e,r,n,i,a){qi.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==t?t:-1,this.right=void 0!==e?e:1,this.top=void 0!==r?r:1,this.bottom=void 0!==n?n:-1,this.near=void 0!==i?i:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()}function ec(){Zs.call(this,new tc(-5,5,5,-5,.5,500))}function rc(t,e){Ys.call(this,t,e),this.type="DirectionalLight",this.position.copy(Er.DefaultUp),this.updateMatrix(),this.target=new Er,this.shadow=new ec}function nc(t,e){Ys.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}function ic(t,e,r,n){Ys.call(this,t,e),this.type="RectAreaLight",this.width=void 0!==r?r:10,this.height=void 0!==n?n:10}function ac(t){this.manager=void 0!==t?t:gs,this.textures={}}Ws.prototype=Object.assign(Object.create(Ss.prototype),{constructor:Ws,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Gs(e,t))},getPoint:function(t){for(var e=t*this.getLength(),r=this.getCurveLengths(),n=0;n<r.length;){if(r[n]>=e){var i=r[n]-e,a=this.curves[n],o=a.getLength(),s=0===o?0:1-i/o;return a.getPointAt(s)}n++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,r=0,n=this.curves.length;r<n;r++)e+=this.curves[r].getLength(),t.push(e);return this.cacheLengths=t,t},getSpacedPoints:function(t){void 0===t&&(t=40);for(var e=[],r=0;r<=t;r++)e.push(this.getPoint(r/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e,r=[],n=0,i=this.curves;n<i.length;n++)for(var a=i[n],o=a&&a.isEllipseCurve?2*t:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?t*a.points.length:t,s=a.getPoints(o),c=0;c<s.length;c++){var h=s[c];e&&e.equals(h)||(r.push(h),e=h)}return this.autoClose&&r.length>1&&!r[r.length-1].equals(r[0])&&r.push(r[0]),r},copy:function(t){Ss.prototype.copy.call(this,t),this.curves=[];for(var e=0,r=t.curves.length;e<r;e++){var n=t.curves[e];this.curves.push(n.clone())}return this.autoClose=t.autoClose,this},toJSON:function(){var t=Ss.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(var e=0,r=this.curves.length;e<r;e++){var n=this.curves[e];t.curves.push(n.toJSON())}return t},fromJSON:function(t){Ss.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var e=0,r=t.curves.length;e<r;e++){var n=t.curves[e];this.curves.push((new js[n.type]).fromJSON(n))}return this}}),qs.prototype=Object.assign(Object.create(Ws.prototype),{constructor:qs,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,r=t.length;e<r;e++)this.lineTo(t[e].x,t[e].y)},moveTo:function(t,e){this.currentPoint.set(t,e)},lineTo:function(t,e){var r=new Gs(this.currentPoint.clone(),new De(t,e));this.curves.push(r),this.currentPoint.set(t,e)},quadraticCurveTo:function(t,e,r,n){var i=new Hs(this.currentPoint.clone(),new De(t,e),new De(r,n));this.curves.push(i),this.currentPoint.set(r,n)},bezierCurveTo:function(t,e,r,n,i,a){var o=new zs(this.currentPoint.clone(),new De(t,e),new De(r,n),new De(i,a));this.curves.push(o),this.currentPoint.set(i,a)},splineThru:function(t){var e=new ks([this.currentPoint.clone()].concat(t));this.curves.push(e),this.currentPoint.copy(t[t.length-1])},arc:function(t,e,r,n,i,a){var o=this.currentPoint.x,s=this.currentPoint.y;this.absarc(t+o,e+s,r,n,i,a)},absarc:function(t,e,r,n,i,a){this.absellipse(t,e,r,r,n,i,a)},ellipse:function(t,e,r,n,i,a,o,s){var c=this.currentPoint.x,h=this.currentPoint.y;this.absellipse(t+c,e+h,r,n,i,a,o,s)},absellipse:function(t,e,r,n,i,a,o,s){var c=new Ts(t,e,r,n,i,a,o,s);if(this.curves.length>0){var h=c.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(c);var l=c.getPoint(1);this.currentPoint.copy(l)},copy:function(t){return Ws.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){var t=Ws.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return Ws.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}),Xs.prototype=Object.assign(Object.create(qs.prototype),{constructor:Xs,getPointsHoles:function(t){for(var e=[],r=0,n=this.holes.length;r<n;r++)e[r]=this.holes[r].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){qs.prototype.copy.call(this,t),this.holes=[];for(var e=0,r=t.holes.length;e<r;e++){var n=t.holes[e];this.holes.push(n.clone())}return this},toJSON:function(){var t=qs.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(var e=0,r=this.holes.length;e<r;e++){var n=this.holes[e];t.holes.push(n.toJSON())}return t},fromJSON:function(t){qs.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(var e=0,r=t.holes.length;e<r;e++){var n=t.holes[e];this.holes.push((new qs).fromJSON(n))}return this}}),Ys.prototype=Object.assign(Object.create(Er.prototype),{constructor:Ys,isLight:!0,copy:function(t){return Er.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){var e=Er.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),Js.prototype=Object.assign(Object.create(Ys.prototype),{constructor:Js,isHemisphereLight:!0,copy:function(t){return Ys.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(Zs.prototype,{copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),Qs.prototype=Object.assign(Object.create(Zs.prototype),{constructor:Qs,isSpotLightShadow:!0,update:function(t){var e=this.camera,r=2*Ie.RAD2DEG*t.angle,n=this.mapSize.width/this.mapSize.height,i=t.distance||e.far;r===e.fov&&n===e.aspect&&i===e.far||(e.fov=r,e.aspect=n,e.far=i,e.updateProjectionMatrix())}}),Ks.prototype=Object.assign(Object.create(Ys.prototype),{constructor:Ks,isSpotLight:!0,copy:function(t){return Ys.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),$s.prototype=Object.assign(Object.create(Ys.prototype),{constructor:$s,isPointLight:!0,copy:function(t){return Ys.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),tc.prototype=Object.assign(Object.create(qi.prototype),{constructor:tc,isOrthographicCamera:!0,copy:function(t,e){return qi.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,r,n,i,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=r,this.view.offsetY=n,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,n=(this.top+this.bottom)/2,i=r-t,a=r+t,o=n+e,s=n-e;if(null!==this.view&&this.view.enabled){var c=this.zoom/(this.view.width/this.view.fullWidth),h=this.zoom/(this.view.height/this.view.fullHeight),l=(this.right-this.left)/this.view.width,u=(this.top-this.bottom)/this.view.height;a=(i+=l*(this.view.offsetX/c))+l*(this.view.width/c),s=(o-=u*(this.view.offsetY/h))-u*(this.view.height/h)}this.projectionMatrix.makeOrthographic(i,a,o,s,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var e=Er.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}),ec.prototype=Object.assign(Object.create(Zs.prototype),{constructor:ec}),rc.prototype=Object.assign(Object.create(Ys.prototype),{constructor:rc,isDirectionalLight:!0,copy:function(t){return Ys.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),nc.prototype=Object.assign(Object.create(Ys.prototype),{constructor:nc,isAmbientLight:!0}),ic.prototype=Object.assign(Object.create(Ys.prototype),{constructor:ic,isRectAreaLight:!0,copy:function(t){return Ys.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){var e=Ys.prototype.toJSON.call(this,t);return e.object.width=this.width,e.object.height=this.height,e}}),Object.assign(ac.prototype,{load:function(t,e,r,n){var i=this,a=new ys(i.manager);a.setPath(i.path),a.load(t,function(t){e(i.parse(JSON.parse(t)))},r,n)},parse:function(t){var e=this.textures;function r(t){return void 0===e[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),e[t]}var n=new Ko[t.type];if(void 0!==t.uuid&&(n.uuid=t.uuid),void 0!==t.name&&(n.name=t.name),void 0!==t.color&&n.color.setHex(t.color),void 0!==t.roughness&&(n.roughness=t.roughness),void 0!==t.metalness&&(n.metalness=t.metalness),void 0!==t.emissive&&n.emissive.setHex(t.emissive),void 0!==t.specular&&n.specular.setHex(t.specular),void 0!==t.shininess&&(n.shininess=t.shininess),void 0!==t.clearCoat&&(n.clearCoat=t.clearCoat),void 0!==t.clearCoatRoughness&&(n.clearCoatRoughness=t.clearCoatRoughness),void 0!==t.vertexColors&&(n.vertexColors=t.vertexColors),void 0!==t.fog&&(n.fog=t.fog),void 0!==t.flatShading&&(n.flatShading=t.flatShading),void 0!==t.blending&&(n.blending=t.blending),void 0!==t.combine&&(n.combine=t.combine),void 0!==t.side&&(n.side=t.side),void 0!==t.opacity&&(n.opacity=t.opacity),void 0!==t.transparent&&(n.transparent=t.transparent),void 0!==t.alphaTest&&(n.alphaTest=t.alphaTest),void 0!==t.depthTest&&(n.depthTest=t.depthTest),void 0!==t.depthWrite&&(n.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(n.colorWrite=t.colorWrite),void 0!==t.wireframe&&(n.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(n.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(n.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(n.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(n.rotation=t.rotation),1!==t.linewidth&&(n.linewidth=t.linewidth),void 0!==t.dashSize&&(n.dashSize=t.dashSize),void 0!==t.gapSize&&(n.gapSize=t.gapSize),void 0!==t.scale&&(n.scale=t.scale),void 0!==t.polygonOffset&&(n.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(n.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(n.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(n.skinning=t.skinning),void 0!==t.morphTargets&&(n.morphTargets=t.morphTargets),void 0!==t.dithering&&(n.dithering=t.dithering),void 0!==t.visible&&(n.visible=t.visible),void 0!==t.userData&&(n.userData=t.userData),void 0!==t.uniforms)for(var i in t.uniforms){var a=t.uniforms[i];switch(n.uniforms[i]={},a.type){case"t":n.uniforms[i].value=r(a.value);break;case"c":n.uniforms[i].value=(new lr).setHex(a.value);break;case"v2":n.uniforms[i].value=(new De).fromArray(a.value);break;case"v3":n.uniforms[i].value=(new ze).fromArray(a.value);break;case"v4":n.uniforms[i].value=(new Xe).fromArray(a.value);break;case"m3":n.uniforms[i].value=(new Ue).fromArray(a.value);case"m4":n.uniforms[i].value=(new Be).fromArray(a.value);break;default:n.uniforms[i].value=a.value}}if(void 0!==t.defines&&(n.defines=t.defines),void 0!==t.vertexShader&&(n.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(n.fragmentShader=t.fragmentShader),void 0!==t.extensions)for(var o in t.extensions)n.extensions[o]=t.extensions[o];if(void 0!==t.shading&&(n.flatShading=1===t.shading),void 0!==t.size&&(n.size=t.size),void 0!==t.sizeAttenuation&&(n.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(n.map=r(t.map)),void 0!==t.alphaMap&&(n.alphaMap=r(t.alphaMap),n.transparent=!0),void 0!==t.bumpMap&&(n.bumpMap=r(t.bumpMap)),void 0!==t.bumpScale&&(n.bumpScale=t.bumpScale),void 0!==t.normalMap&&(n.normalMap=r(t.normalMap)),void 0!==t.normalMapType&&(n.normalMapType=t.normalMapType),void 0!==t.normalScale){var s=t.normalScale;!1===Array.isArray(s)&&(s=[s,s]),n.normalScale=(new De).fromArray(s)}return void 0!==t.displacementMap&&(n.displacementMap=r(t.displacementMap)),void 0!==t.displacementScale&&(n.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(n.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(n.roughnessMap=r(t.roughnessMap)),void 0!==t.metalnessMap&&(n.metalnessMap=r(t.metalnessMap)),void 0!==t.emissiveMap&&(n.emissiveMap=r(t.emissiveMap)),void 0!==t.emissiveIntensity&&(n.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(n.specularMap=r(t.specularMap)),void 0!==t.envMap&&(n.envMap=r(t.envMap)),void 0!==t.envMapIntensity&&(n.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(n.reflectivity=t.reflectivity),void 0!==t.lightMap&&(n.lightMap=r(t.lightMap)),void 0!==t.lightMapIntensity&&(n.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(n.aoMap=r(t.aoMap)),void 0!==t.aoMapIntensity&&(n.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(n.gradientMap=r(t.gradientMap)),n},setPath:function(t){return this.path=t,this},setTextures:function(t){return this.textures=t,this}});var oc={decodeText:function(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);for(var e="",r=0,n=t.length;r<n;r++)e+=String.fromCharCode(t[r]);return decodeURIComponent(escape(e))},extractUrlBase:function(t){var e=t.lastIndexOf("/");return-1===e?"./":t.substr(0,e+1)}};function sc(t){this.manager=void 0!==t?t:gs}Object.assign(sc.prototype,{load:function(t,e,r,n){var i=this,a=new ys(i.manager);a.setPath(i.path),a.load(t,function(t){e(i.parse(JSON.parse(t)))},r,n)},parse:function(t){var e=new Vr,r=t.data.index;if(void 0!==r){var n=new cc[r.type](r.array);e.setIndex(new Pr(n,1))}var i=t.data.attributes;for(var a in i){var o=i[a];n=new cc[o.type](o.array);e.addAttribute(a,new Pr(n,o.itemSize,o.normalized))}var s=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==s)for(var c=0,h=s.length;c!==h;++c){var l=s[c];e.addGroup(l.start,l.count,l.materialIndex)}var u=t.data.boundingSphere;if(void 0!==u){var p=new ze;void 0!==u.center&&p.fromArray(u.center),e.boundingSphere=new $e(p,u.radius)}return t.name&&(e.name=t.name),t.userData&&(e.userData=t.userData),e},setPath:function(t){return this.path=t,this}});var cc={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function hc(t){this.manager=void 0!==t?t:gs,this.resourcePath=""}Object.assign(hc.prototype,{crossOrigin:"anonymous",load:function(t,e,r,n){var i=this,a=void 0===this.path?oc.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||a;var o=new ys(i.manager);o.setPath(this.path),o.load(t,function(r){var a=null;try{a=JSON.parse(r)}catch(e){return void 0!==n&&n(e),void console.error("THREE:ObjectLoader: Can't parse "+t+".",e.message)}var o=a.metadata;void 0!==o&&void 0!==o.type&&"geometry"!==o.type.toLowerCase()?i.parse(a,e):console.error("THREE.ObjectLoader: Can't load "+t)},r,n)},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this},setCrossOrigin:function(t){return this.crossOrigin=t,this},parse:function(t,e){var r=this.parseShape(t.shapes),n=this.parseGeometries(t.geometries,r),i=this.parseImages(t.images,function(){void 0!==e&&e(s)}),a=this.parseTextures(t.textures,i),o=this.parseMaterials(t.materials,a),s=this.parseObject(t.object,n,o);return t.animations&&(s.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0!==e&&e(s),s},parseShape:function(t){var e={};if(void 0!==t)for(var r=0,n=t.length;r<n;r++){var i=(new Xs).fromJSON(t[r]);e[i.uuid]=i}return e},parseGeometries:function(t,e){var r={};if(void 0!==t)for(var n=new sc,i=0,a=t.length;i<a;i++){var o,s=t[i];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":o=new Ho[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":o=new Ho[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":o=new Ho[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":o=new Ho[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":o=new Ho[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":o=new Ho[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":o=new Ho[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":o=new Ho[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":o=new Ho[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":o=new Ho[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"LatheGeometry":case"LatheBufferGeometry":o=new Ho[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":o=new Ho[s.type](s.vertices,s.indices,s.radius,s.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var c=[],h=0,l=s.shapes.length;h<l;h++){var u=e[s.shapes[h]];c.push(u)}o=new Ho[s.type](c,s.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(c=[],h=0,l=s.shapes.length;h<l;h++){u=e[s.shapes[h]];c.push(u)}var p=s.options.extrudePath;void 0!==p&&(s.options.extrudePath=(new js[p.type]).fromJSON(p)),o=new Ho[s.type](c,s.options);break;case"BufferGeometry":o=n.parse(s);break;case"Geometry":if("THREE"in window&&"LegacyJSONLoader"in THREE)o=(new THREE.LegacyJSONLoader).parse(s,this.resourcePath).geometry;else console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),!0===o.isBufferGeometry&&void 0!==s.userData&&(o.userData=s.userData),r[s.uuid]=o}return r},parseMaterials:function(t,e){var r={},n={};if(void 0!==t){var i=new ac;i.setTextures(e);for(var a=0,o=t.length;a<o;a++){var s=t[a];if("MultiMaterial"===s.type){for(var c=[],h=0;h<s.materials.length;h++){var l=s.materials[h];void 0===r[l.uuid]&&(r[l.uuid]=i.parse(l)),c.push(r[l.uuid])}n[s.uuid]=c}else void 0===r[s.uuid]&&(r[s.uuid]=i.parse(s)),n[s.uuid]=r[s.uuid]}}return n},parseAnimations:function(t){for(var e=[],r=0;r<t.length;r++){var n=t[r],i=ps.parse(n);void 0!==n.uuid&&(i.uuid=n.uuid),e.push(i)}return e},parseImages:function(t,e){var r=this,n={};function i(t){return r.manager.itemStart(t),a.load(t,function(){r.manager.itemEnd(t)},void 0,function(){r.manager.itemError(t),r.manager.itemEnd(t)})}if(void 0!==t&&t.length>0){var a=new _s(new ms(e));a.setCrossOrigin(this.crossOrigin);for(var o=0,s=t.length;o<s;o++){var c=t[o],h=c.url;if(Array.isArray(h)){n[c.uuid]=[];for(var l=0,u=h.length;l<u;l++){var p=h[l],d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p)?p:r.resourcePath+p;n[c.uuid].push(i(d))}}else{d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c.url)?c.url:r.resourcePath+c.url;n[c.uuid]=i(d)}}}return n},parseTextures:function(t,e){function r(t,e){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}var n={};if(void 0!==t)for(var i=0,a=t.length;i<a;i++){var o,s=t[i];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===e[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image),(o=Array.isArray(e[s.image])?new En(e[s.image]):new qe(e[s.image])).needsUpdate=!0,o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),void 0!==s.mapping&&(o.mapping=r(s.mapping,mc)),void 0!==s.offset&&o.offset.fromArray(s.offset),void 0!==s.repeat&&o.repeat.fromArray(s.repeat),void 0!==s.center&&o.center.fromArray(s.center),void 0!==s.rotation&&(o.rotation=s.rotation),void 0!==s.wrap&&(o.wrapS=r(s.wrap[0],gc),o.wrapT=r(s.wrap[1],gc)),void 0!==s.format&&(o.format=s.format),void 0!==s.type&&(o.type=s.type),void 0!==s.encoding&&(o.encoding=s.encoding),void 0!==s.minFilter&&(o.minFilter=r(s.minFilter,vc)),void 0!==s.magFilter&&(o.magFilter=r(s.magFilter,vc)),void 0!==s.anisotropy&&(o.anisotropy=s.anisotropy),void 0!==s.flipY&&(o.flipY=s.flipY),void 0!==s.premultiplyAlpha&&(o.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(o.unpackAlignment=s.unpackAlignment),n[s.uuid]=o}return n},parseObject:function(t,e,r){var n;function i(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function a(t){if(void 0!==t){if(Array.isArray(t)){for(var e=[],n=0,i=t.length;n<i;n++){var a=t[n];void 0===r[a]&&console.warn("THREE.ObjectLoader: Undefined material",a),e.push(r[a])}return e}return void 0===r[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),r[t]}}switch(t.type){case"Scene":n=new ha,void 0!==t.background&&Number.isInteger(t.background)&&(n.background=new lr(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?n.fog=new ca(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(n.fog=new sa(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":n=new Xi(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(n.focus=t.focus),void 0!==t.zoom&&(n.zoom=t.zoom),void 0!==t.filmGauge&&(n.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(n.filmOffset=t.filmOffset),void 0!==t.view&&(n.view=Object.assign({},t.view));break;case"OrthographicCamera":n=new tc(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(n.zoom=t.zoom),void 0!==t.view&&(n.view=Object.assign({},t.view));break;case"AmbientLight":n=new nc(t.color,t.intensity);break;case"DirectionalLight":n=new rc(t.color,t.intensity);break;case"PointLight":n=new $s(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":n=new ic(t.color,t.intensity,t.width,t.height);break;case"SpotLight":n=new Ks(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":n=new Js(t.color,t.groundColor,t.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var o=i(t.geometry),s=a(t.material);n=o.bones&&o.bones.length>0?new ma(o,s):new pn(o,s),void 0!==t.drawMode&&n.setDrawMode(t.drawMode);break;case"LOD":n=new fa;break;case"Line":n=new xa(i(t.geometry),a(t.material),t.mode);break;case"LineLoop":n=new wa(i(t.geometry),a(t.material));break;case"LineSegments":n=new ba(i(t.geometry),a(t.material));break;case"PointCloud":case"Points":n=new Ma(i(t.geometry),a(t.material));break;case"Sprite":n=new da(a(t.material));break;case"Group":n=new Wi;break;default:n=new Er}if(n.uuid=t.uuid,void 0!==t.name&&(n.name=t.name),void 0!==t.matrix?(n.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(n.matrixAutoUpdate=t.matrixAutoUpdate),n.matrixAutoUpdate&&n.matrix.decompose(n.position,n.quaternion,n.scale)):(void 0!==t.position&&n.position.fromArray(t.position),void 0!==t.rotation&&n.rotation.fromArray(t.rotation),void 0!==t.quaternion&&n.quaternion.fromArray(t.quaternion),void 0!==t.scale&&n.scale.fromArray(t.scale)),void 0!==t.castShadow&&(n.castShadow=t.castShadow),void 0!==t.receiveShadow&&(n.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(n.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(n.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&n.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(n.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(n.visible=t.visible),void 0!==t.frustumCulled&&(n.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(n.renderOrder=t.renderOrder),void 0!==t.userData&&(n.userData=t.userData),void 0!==t.layers&&(n.layers.mask=t.layers),void 0!==t.children)for(var c=t.children,h=0;h<c.length;h++)n.add(this.parseObject(c[h],e,r));if("LOD"===t.type)for(var l=t.levels,u=0;u<l.length;u++){var p=l[u],d=n.getObjectByProperty("uuid",p.object);void 0!==d&&n.addLevel(d,p.distance)}return n}});var lc,uc,pc,dc,fc,mc={UVMapping:300,CubeReflectionMapping:ut,CubeRefractionMapping:pt,EquirectangularReflectionMapping:dt,EquirectangularRefractionMapping:ft,SphericalReflectionMapping:mt,CubeUVReflectionMapping:gt,CubeUVRefractionMapping:vt},gc={RepeatWrapping:yt,ClampToEdgeWrapping:xt,MirroredRepeatWrapping:bt},vc={NearestFilter:wt,NearestMipMapNearestFilter:_t,NearestMipMapLinearFilter:Mt,LinearFilter:Et,LinearMipMapNearestFilter:St,LinearMipMapLinearFilter:Tt};function yc(t){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==t?t:gs,this.options=void 0}function xc(){this.type="ShapePath",this.color=new lr,this.subPaths=[],this.currentPath=null}function bc(t){this.type="Font",this.data=t}function wc(t,e,r,n,i){var a=i.glyphs[t]||i.glyphs["?"];if(a){var o,s,c,h,l,u,p,d,f=new xc;if(a.o)for(var m=a._cachedOutline||(a._cachedOutline=a.o.split(" ")),g=0,v=m.length;g<v;){switch(m[g++]){case"m":o=m[g++]*e+r,s=m[g++]*e+n,f.moveTo(o,s);break;case"l":o=m[g++]*e+r,s=m[g++]*e+n,f.lineTo(o,s);break;case"q":c=m[g++]*e+r,h=m[g++]*e+n,l=m[g++]*e+r,u=m[g++]*e+n,f.quadraticCurveTo(l,u,c,h);break;case"b":c=m[g++]*e+r,h=m[g++]*e+n,l=m[g++]*e+r,u=m[g++]*e+n,p=m[g++]*e+r,d=m[g++]*e+n,f.bezierCurveTo(l,u,p,d,c,h)}}return{offsetX:a.ha*e,path:f}}}function _c(t){this.manager=void 0!==t?t:gs}function Mc(){}yc.prototype={constructor:yc,setOptions:function(t){return this.options=t,this},load:function(t,e,r,n){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,a=fs.get(t);if(void 0!==a)return i.manager.itemStart(t),setTimeout(function(){e&&e(a),i.manager.itemEnd(t)},0),a;fetch(t).then(function(t){return t.blob()}).then(function(t){return createImageBitmap(t,i.options)}).then(function(r){fs.add(t,r),e&&e(r),i.manager.itemEnd(t)}).catch(function(e){n&&n(e),i.manager.itemError(t),i.manager.itemEnd(t)})},setCrossOrigin:function(){return this},setPath:function(t){return this.path=t,this}},Object.assign(xc.prototype,{moveTo:function(t,e){this.currentPath=new qs,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e)},lineTo:function(t,e){this.currentPath.lineTo(t,e)},quadraticCurveTo:function(t,e,r,n){this.currentPath.quadraticCurveTo(t,e,r,n)},bezierCurveTo:function(t,e,r,n,i,a){this.currentPath.bezierCurveTo(t,e,r,n,i,a)},splineThru:function(t){this.currentPath.splineThru(t)},toShapes:function(t,e){function r(t){for(var e=[],r=0,n=t.length;r<n;r++){var i=t[r],a=new Xs;a.curves=i.curves,e.push(a)}return e}function n(t,e){for(var r=e.length,n=!1,i=r-1,a=0;a<r;i=a++){var o=e[i],s=e[a],c=s.x-o.x,h=s.y-o.y;if(Math.abs(h)>Number.EPSILON){if(h<0&&(o=e[a],c=-c,s=e[i],h=-h),t.y<o.y||t.y>s.y)continue;if(t.y===o.y){if(t.x===o.x)return!0}else{var l=h*(t.x-o.x)-c*(t.y-o.y);if(0===l)return!0;if(l<0)continue;n=!n}}else{if(t.y!==o.y)continue;if(s.x<=t.x&&t.x<=o.x||o.x<=t.x&&t.x<=s.x)return!0}}return n}var i=go.isClockWise,a=this.subPaths;if(0===a.length)return[];if(!0===e)return r(a);var o,s,c,h=[];if(1===a.length)return s=a[0],(c=new Xs).curves=s.curves,h.push(c),h;var l=!i(a[0].getPoints());l=t?!l:l;var u,p,d=[],f=[],m=[],g=0;f[g]=void 0,m[g]=[];for(var v=0,y=a.length;v<y;v++)o=i(u=(s=a[v]).getPoints()),(o=t?!o:o)?(!l&&f[g]&&g++,f[g]={s:new Xs,p:u},f[g].s.curves=s.curves,l&&g++,m[g]=[]):m[g].push({h:s,p:u[0]});if(!f[0])return r(a);if(f.length>1){for(var x=!1,b=[],w=0,_=f.length;w<_;w++)d[w]=[];for(w=0,_=f.length;w<_;w++)for(var M=m[w],E=0;E<M.length;E++){for(var S=M[E],T=!0,A=0;A<f.length;A++)n(S.p,f[A].p)&&(w!==A&&b.push({froms:w,tos:A,hole:E}),T?(T=!1,d[A].push(S)):x=!0);T&&d[w].push(S)}b.length>0&&(x||(m=d))}v=0;for(var L=f.length;v<L;v++){c=f[v].s,h.push(c);for(var P=0,R=(p=m[v]).length;P<R;P++)c.holes.push(p[P].h)}return h}}),Object.assign(bc.prototype,{isFont:!0,generateShapes:function(t,e){void 0===e&&(e=100);for(var r=[],n=function(t,e,r){for(var n=Array.from?Array.from(t):String(t).split(""),i=e/r.resolution,a=(r.boundingBox.yMax-r.boundingBox.yMin+r.underlineThickness)*i,o=[],s=0,c=0,h=0;h<n.length;h++){var l=n[h];if("\n"===l)s=0,c-=a;else{var u=wc(l,i,s,c,r);s+=u.offsetX,o.push(u.path)}}return o}(t,e,this.data),i=0,a=n.length;i<a;i++)Array.prototype.push.apply(r,n[i].toShapes());return r}}),Object.assign(_c.prototype,{load:function(t,e,r,n){var i=this,a=new ys(this.manager);a.setPath(this.path),a.load(t,function(t){var r;try{r=JSON.parse(t)}catch(e){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),r=JSON.parse(t.substring(65,t.length-2))}var n=i.parse(r);e&&e(n)},r,n)},parse:function(t){return new bc(t)},setPath:function(t){return this.path=t,this}}),Mc.Handlers={handlers:[],add:function(t,e){this.handlers.push(t,e)},get:function(t){for(var e=this.handlers,r=0,n=e.length;r<n;r+=2){var i=e[r],a=e[r+1];if(i.test(t))return a}return null}},Object.assign(Mc.prototype,{crossOrigin:"anonymous",onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(t,e,r){for(var n=[],i=0;i<t.length;++i)n[i]=this.createMaterial(t[i],e,r);return n},createMaterial:(lc={NoBlending:T,NormalBlending:A,AdditiveBlending:L,SubtractiveBlending:P,MultiplyBlending:R,CustomBlending:C},uc=new lr,pc=new Es,dc=new ac,function(t,e,r){var n={};function i(t,i,a,o,s){var c,h=e+t,l=Mc.Handlers.get(h);null!==l?c=l.load(h):(pc.setCrossOrigin(r),c=pc.load(h)),void 0!==i&&(c.repeat.fromArray(i),1!==i[0]&&(c.wrapS=yt),1!==i[1]&&(c.wrapT=yt)),void 0!==a&&c.offset.fromArray(a),void 0!==o&&("repeat"===o[0]&&(c.wrapS=yt),"mirror"===o[0]&&(c.wrapS=bt),"repeat"===o[1]&&(c.wrapT=yt),"mirror"===o[1]&&(c.wrapT=bt)),void 0!==s&&(c.anisotropy=s);var u=Ie.generateUUID();return n[u]=c,u}var a={uuid:Ie.generateUUID(),type:"MeshLambertMaterial"};for(var o in t){var s=t[o];switch(o){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":a.name=s;break;case"blending":a.blending=lc[s];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",o,"is no longer supported.");break;case"colorDiffuse":a.color=uc.fromArray(s).getHex();break;case"colorSpecular":a.specular=uc.fromArray(s).getHex();break;case"colorEmissive":a.emissive=uc.fromArray(s).getHex();break;case"specularCoef":a.shininess=s;break;case"shading":"basic"===s.toLowerCase()&&(a.type="MeshBasicMaterial"),"phong"===s.toLowerCase()&&(a.type="MeshPhongMaterial"),"standard"===s.toLowerCase()&&(a.type="MeshStandardMaterial");break;case"mapDiffuse":a.map=i(s,t.mapDiffuseRepeat,t.mapDiffuseOffset,t.mapDiffuseWrap,t.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":a.emissiveMap=i(s,t.mapEmissiveRepeat,t.mapEmissiveOffset,t.mapEmissiveWrap,t.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":a.lightMap=i(s,t.mapLightRepeat,t.mapLightOffset,t.mapLightWrap,t.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":a.aoMap=i(s,t.mapAORepeat,t.mapAOOffset,t.mapAOWrap,t.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":a.bumpMap=i(s,t.mapBumpRepeat,t.mapBumpOffset,t.mapBumpWrap,t.mapBumpAnisotropy);break;case"mapBumpScale":a.bumpScale=s;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":a.normalMap=i(s,t.mapNormalRepeat,t.mapNormalOffset,t.mapNormalWrap,t.mapNormalAnisotropy);break;case"mapNormalFactor":a.normalScale=s;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":a.specularMap=i(s,t.mapSpecularRepeat,t.mapSpecularOffset,t.mapSpecularWrap,t.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":a.metalnessMap=i(s,t.mapMetalnessRepeat,t.mapMetalnessOffset,t.mapMetalnessWrap,t.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":a.roughnessMap=i(s,t.mapRoughnessRepeat,t.mapRoughnessOffset,t.mapRoughnessWrap,t.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":a.alphaMap=i(s,t.mapAlphaRepeat,t.mapAlphaOffset,t.mapAlphaWrap,t.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":a.side=w;break;case"doubleSided":a.side=_;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),a.opacity=s;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":a[o]=s;break;case"vertexColors":!0===s&&(a.vertexColors=S),"face"===s&&(a.vertexColors=E);break;default:console.error("THREE.Loader.createMaterial: Unsupported",o,s)}}return"MeshBasicMaterial"===a.type&&delete a.emissive,"MeshPhongMaterial"!==a.type&&delete a.specular,a.opacity<1&&(a.transparent=!0),dc.setTextures(n),dc.parse(a)})});var Ec,Sc,Tc,Ac,Lc,Pc,Rc,Cc,Oc,Ic,Dc={getContext:function(){return void 0===fc&&(fc=new(window.AudioContext||window.webkitAudioContext)),fc},setContext:function(t){fc=t}};function Bc(t){this.manager=void 0!==t?t:gs}function Nc(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Xi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Xi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function zc(t,e,r,n){Er.call(this),this.type="CubeCamera";var i=new Xi(90,1,t,e);i.up.set(0,-1,0),i.lookAt(new ze(1,0,0)),this.add(i);var a=new Xi(90,1,t,e);a.up.set(0,-1,0),a.lookAt(new ze(-1,0,0)),this.add(a);var o=new Xi(90,1,t,e);o.up.set(0,0,1),o.lookAt(new ze(0,1,0)),this.add(o);var s=new Xi(90,1,t,e);s.up.set(0,0,-1),s.lookAt(new ze(0,-1,0)),this.add(s);var c=new Xi(90,1,t,e);c.up.set(0,-1,0),c.lookAt(new ze(0,0,1)),this.add(c);var h=new Xi(90,1,t,e);h.up.set(0,-1,0),h.lookAt(new ze(0,0,-1)),this.add(h),n=n||{format:Ft,magFilter:Et,minFilter:Et},this.renderTarget=new Ze(r,r,n),this.renderTarget.texture.name="CubeCamera",this.update=function(t,e){null===this.parent&&this.updateMatrixWorld();var r=t.getRenderTarget(),n=this.renderTarget,l=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,t.render(e,i,n),n.activeCubeFace=1,t.render(e,a,n),n.activeCubeFace=2,t.render(e,o,n),n.activeCubeFace=3,t.render(e,s,n),n.activeCubeFace=4,t.render(e,c,n),n.texture.generateMipmaps=l,n.activeCubeFace=5,t.render(e,h,n),t.setRenderTarget(r)},this.clear=function(t,e,r,n){for(var i=t.getRenderTarget(),a=this.renderTarget,o=0;o<6;o++)a.activeCubeFace=o,t.setRenderTarget(a),t.clear(e,r,n);t.setRenderTarget(i)}}function Uc(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function Gc(){Er.call(this),this.type="AudioListener",this.context=Dc.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0}function Fc(t){Er.call(this),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function Hc(t){Fc.call(this,t),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function Vc(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}function kc(t,e,r){this.binding=t,this.valueSize=r;var n,i=Float64Array;switch(e){case"quaternion":n=this._slerp;break;case"string":case"bool":i=Array,n=this._select;break;default:n=this._lerp}this.buffer=new i(4*r),this._mixBufferRegion=n,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}Object.assign(Bc.prototype,{load:function(t,e,r,n){var i=new ys(this.manager);i.setResponseType("arraybuffer"),i.setPath(this.path),i.load(t,function(t){var r=t.slice(0);Dc.getContext().decodeAudioData(r,function(t){e(t)})},r,n)},setPath:function(t){return this.path=t,this}}),Object.assign(Nc.prototype,{update:(Oc=new Be,Ic=new Be,function(t){if(Ec!==this||Sc!==t.focus||Tc!==t.fov||Ac!==t.aspect*this.aspect||Lc!==t.near||Pc!==t.far||Rc!==t.zoom||Cc!==this.eyeSep){Ec=this,Sc=t.focus,Tc=t.fov,Ac=t.aspect*this.aspect,Lc=t.near,Pc=t.far,Rc=t.zoom;var e,r,n=t.projectionMatrix.clone(),i=(Cc=this.eyeSep/2)*Lc/Sc,a=Lc*Math.tan(Ie.DEG2RAD*Tc*.5)/Rc;Ic.elements[12]=-Cc,Oc.elements[12]=Cc,e=-a*Ac+i,r=a*Ac+i,n.elements[0]=2*Lc/(r-e),n.elements[8]=(r+e)/(r-e),this.cameraL.projectionMatrix.copy(n),e=-a*Ac-i,r=a*Ac-i,n.elements[0]=2*Lc/(r-e),n.elements[8]=(r+e)/(r-e),this.cameraR.projectionMatrix.copy(n)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(Ic),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(Oc)})}),zc.prototype=Object.create(Er.prototype),zc.prototype.constructor=zc,Object.assign(Uc.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var e=("undefined"==typeof performance?Date:performance).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}),Gc.prototype=Object.assign(Object.create(Er.prototype),{constructor:Gc,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this},updateMatrixWorld:function(){var t=new ze,e=new Ne,r=new ze,n=new ze,i=new Uc;return function(a){Er.prototype.updateMatrixWorld.call(this,a);var o=this.context.listener,s=this.up;if(this.timeDelta=i.getDelta(),this.matrixWorld.decompose(t,e,r),n.set(0,0,-1).applyQuaternion(e),o.positionX){var c=this.context.currentTime+this.timeDelta;o.positionX.linearRampToValueAtTime(t.x,c),o.positionY.linearRampToValueAtTime(t.y,c),o.positionZ.linearRampToValueAtTime(t.z,c),o.forwardX.linearRampToValueAtTime(n.x,c),o.forwardY.linearRampToValueAtTime(n.y,c),o.forwardZ.linearRampToValueAtTime(n.z,c),o.upX.linearRampToValueAtTime(s.x,c),o.upY.linearRampToValueAtTime(s.y,c),o.upZ.linearRampToValueAtTime(s.z,c)}else o.setPosition(t.x,t.y,t.z),o.setOrientation(n.x,n.y,n.z,s.x,s.y,s.z)}}()}),Fc.prototype=Object.assign(Object.create(Er.prototype),{constructor:Fc,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},setMediaElementSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this},setBuffer:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.onended=this.onEnded.bind(this),this.startTime=this.context.currentTime,t.start(this.startTime,this.offset),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.source.onended=null,this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.source.onended=null,this.offset=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t||(t=[]),!0===this.isPlaying?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},setDetune:function(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}),Hc.prototype=Object.assign(Object.create(Fc.prototype),{constructor:Hc,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){return this.panner.refDistance=t,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){return this.panner.rolloffFactor=t,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){return this.panner.distanceModel=t,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){return this.panner.maxDistance=t,this},setDirectionalCone:function(t,e,r){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=r,this},updateMatrixWorld:function(){var t=new ze,e=new Ne,r=new ze,n=new ze;return function(i){if(Er.prototype.updateMatrixWorld.call(this,i),!1!==this.isPlaying){this.matrixWorld.decompose(t,e,r),n.set(0,0,1).applyQuaternion(e);var a=this.panner;if(a.positionX){var o=this.context.currentTime+this.listener.timeDelta;a.positionX.linearRampToValueAtTime(t.x,o),a.positionY.linearRampToValueAtTime(t.y,o),a.positionZ.linearRampToValueAtTime(t.z,o),a.orientationX.linearRampToValueAtTime(n.x,o),a.orientationY.linearRampToValueAtTime(n.y,o),a.orientationZ.linearRampToValueAtTime(n.z,o)}else a.setPosition(t.x,t.y,t.z),a.setOrientation(n.x,n.y,n.z)}}}()}),Object.assign(Vc.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,e=this.getFrequencyData(),r=0;r<e.length;r++)t+=e[r];return t/e.length}}),Object.assign(kc.prototype,{accumulate:function(t,e){var r=this.buffer,n=this.valueSize,i=t*n+n,a=this.cumulativeWeight;if(0===a){for(var o=0;o!==n;++o)r[i+o]=r[o];a=e}else{var s=e/(a+=e);this._mixBufferRegion(r,i,0,s,n)}this.cumulativeWeight=a},apply:function(t){var e=this.valueSize,r=this.buffer,n=t*e+e,i=this.cumulativeWeight,a=this.binding;if(this.cumulativeWeight=0,i<1){var o=3*e;this._mixBufferRegion(r,n,o,1-i,e)}for(var s=e,c=e+e;s!==c;++s)if(r[s]!==r[s+e]){a.setValue(r,n);break}},saveOriginalState:function(){var t=this.binding,e=this.buffer,r=this.valueSize,n=3*r;t.getValue(e,n);for(var i=r,a=n;i!==a;++i)e[i]=e[n+i%r];this.cumulativeWeight=0},restoreOriginalState:function(){var t=3*this.valueSize;this.binding.setValue(this.buffer,t)},_select:function(t,e,r,n,i){if(n>=.5)for(var a=0;a!==i;++a)t[e+a]=t[r+a]},_slerp:function(t,e,r,n){Ne.slerpFlat(t,e,t,e,t,r,n)},_lerp:function(t,e,r,n,i){for(var a=1-n,o=0;o!==i;++o){var s=e+o;t[s]=t[s]*a+t[r+o]*n}}});var jc,Wc,qc,Xc,Yc,Jc,Zc,Qc,Kc,$c,th,eh,rh,nh,ih;function ah(t,e,r){var n=r||oh.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,n)}function oh(t,e,r){this.path=e,this.parsedPath=r||oh.parseTrackName(e),this.node=oh.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function sh(){this.uuid=Ie.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var e=0,r=arguments.length;e!==r;++e)t[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}function ch(t,e,r){this._mixer=t,this._clip=e,this._localRoot=r||null;for(var n=e.tracks,i=n.length,a=new Array(i),o={endingStart:ye,endingEnd:ye},s=0;s!==i;++s){var c=n[s].createInterpolant(null);a[s]=c,c.settings=o}this._interpolantSettings=o,this._interpolants=a,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=ve,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function hh(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function lh(t){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}function uh(){Vr.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function ph(t,e,r){la.call(this,t,e),this.meshPerAttribute=r||1}function dh(t,e,r,n){"number"==typeof r&&(n=r,r=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),Pr.call(this,t,e,r),this.meshPerAttribute=n||1}function fh(t,e,r,n){this.ray=new hn(t,e),this.near=r||0,this.far=n||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function mh(t,e){return t.distance-e.distance}function gh(t,e,r,n){if(!1!==t.visible&&(t.raycast(e,r),!0===n))for(var i=t.children,a=0,o=i.length;a<o;a++)gh(i[a],e,r,!0)}function vh(t,e,r){return this.radius=void 0!==t?t:1,this.phi=void 0!==e?e:0,this.theta=void 0!==r?r:0,this}function yh(t,e,r){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==r?r:0,this}function xh(t,e){this.min=void 0!==t?t:new De(1/0,1/0),this.max=void 0!==e?e:new De(-1/0,-1/0)}function bh(t,e){this.start=void 0!==t?t:new ze,this.end=void 0!==e?e:new ze}function wh(t){Er.call(this),this.material=t,this.render=function(){}}function _h(t,e,r,n){this.object=t,this.size=void 0!==e?e:1;var i=void 0!==r?r:16711680,a=void 0!==n?n:1,o=0,s=this.object.geometry;s&&s.isGeometry?o=3*s.faces.length:s&&s.isBufferGeometry&&(o=s.attributes.normal.count);var c=new Vr,h=new zr(2*o*3,3);c.addAttribute("position",h),ba.call(this,c,new ya({color:i,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}function Mh(t,e){Er.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;for(var r=new Vr,n=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],i=0,a=1;i<32;i++,a++){var o=i/32*Math.PI*2,s=a/32*Math.PI*2;n.push(Math.cos(o),Math.sin(o),1,Math.cos(s),Math.sin(s),1)}r.addAttribute("position",new zr(n,3));var c=new ya({fog:!1});this.cone=new ba(r,c),this.add(this.cone),this.update()}function Eh(t){for(var e=function t(e){var r=[];e&&e.isBone&&r.push(e);for(var n=0;n<e.children.length;n++)r.push.apply(r,t(e.children[n]));return r}(t),r=new Vr,n=[],i=[],a=new lr(0,0,1),o=new lr(0,1,0),s=0;s<e.length;s++){var c=e[s];c.parent&&c.parent.isBone&&(n.push(0,0,0),n.push(0,0,0),i.push(a.r,a.g,a.b),i.push(o.r,o.g,o.b))}r.addAttribute("position",new zr(n,3)),r.addAttribute("color",new zr(i,3));var h=new ya({vertexColors:S,depthTest:!1,depthWrite:!1,transparent:!0});ba.call(this,r,h),this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}function Sh(t,e,r){this.light=t,this.light.updateMatrixWorld(),this.color=r;var n=new To(e,4,2),i=new un({wireframe:!0,fog:!1});pn.call(this,n,i),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function Th(t,e){this.type="RectAreaLightHelper",this.light=t,this.color=e;var r=new Vr;r.addAttribute("position",new zr([1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),r.computeBoundingSphere();var n=new ya({fog:!1});xa.call(this,r,n);var i=new Vr;i.addAttribute("position",new zr([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),i.computeBoundingSphere(),this.add(new pn(i,new un({side:w,fog:!1}))),this.update()}function Ah(t,e,r){Er.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=r;var n=new Na(e);n.rotateY(.5*Math.PI),this.material=new un({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=S);var i=n.getAttribute("position"),a=new Float32Array(3*i.count);n.addAttribute("color",new Pr(a,3)),this.add(new pn(n,this.material)),this.update()}function Lh(t,e,r,n){t=t||10,e=e||10,r=new lr(void 0!==r?r:4473924),n=new lr(void 0!==n?n:8947848);for(var i=e/2,a=t/e,o=t/2,s=[],c=[],h=0,l=0,u=-o;h<=e;h++,u+=a){s.push(-o,0,u,o,0,u),s.push(u,0,-o,u,0,o);var p=h===i?r:n;p.toArray(c,l),l+=3,p.toArray(c,l),l+=3,p.toArray(c,l),l+=3,p.toArray(c,l),l+=3}var d=new Vr;d.addAttribute("position",new zr(s,3)),d.addAttribute("color",new zr(c,3));var f=new ya({vertexColors:S});ba.call(this,d,f)}function Ph(t,e,r,n,i,a){t=t||10,e=e||16,r=r||8,n=n||64,i=new lr(void 0!==i?i:4473924),a=new lr(void 0!==a?a:8947848);var o,s,c,h,l,u,p,d=[],f=[];for(h=0;h<=e;h++)c=h/e*(2*Math.PI),o=Math.sin(c)*t,s=Math.cos(c)*t,d.push(0,0,0),d.push(o,0,s),p=1&h?i:a,f.push(p.r,p.g,p.b),f.push(p.r,p.g,p.b);for(h=0;h<=r;h++)for(p=1&h?i:a,u=t-t/r*h,l=0;l<n;l++)c=l/n*(2*Math.PI),o=Math.sin(c)*u,s=Math.cos(c)*u,d.push(o,0,s),f.push(p.r,p.g,p.b),c=(l+1)/n*(2*Math.PI),o=Math.sin(c)*u,s=Math.cos(c)*u,d.push(o,0,s),f.push(p.r,p.g,p.b);var m=new Vr;m.addAttribute("position",new zr(d,3)),m.addAttribute("color",new zr(f,3));var g=new ya({vertexColors:S});ba.call(this,m,g)}function Rh(t,e,r,n){this.object=t,this.size=void 0!==e?e:1;var i=void 0!==r?r:16776960,a=void 0!==n?n:1,o=0,s=this.object.geometry;s&&s.isGeometry?o=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var c=new Vr,h=new zr(2*o*3,3);c.addAttribute("position",h),ba.call(this,c,new ya({color:i,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}function Ch(t,e,r){Er.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,void 0===e&&(e=1);var n=new Vr;n.addAttribute("position",new zr([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));var i=new ya({fog:!1});this.lightPlane=new xa(n,i),this.add(this.lightPlane),(n=new Vr).addAttribute("position",new zr([0,0,0,0,0,1],3)),this.targetLine=new xa(n,i),this.add(this.targetLine),this.update()}function Oh(t){var e=new Vr,r=new ya({color:16777215,vertexColors:E}),n=[],i=[],a={},o=new lr(16755200),s=new lr(16711680),c=new lr(43775),h=new lr(16777215),l=new lr(3355443);function u(t,e,r){p(t,r),p(e,r)}function p(t,e){n.push(0,0,0),i.push(e.r,e.g,e.b),void 0===a[t]&&(a[t]=[]),a[t].push(n.length/3-1)}u("n1","n2",o),u("n2","n4",o),u("n4","n3",o),u("n3","n1",o),u("f1","f2",o),u("f2","f4",o),u("f4","f3",o),u("f3","f1",o),u("n1","f1",o),u("n2","f2",o),u("n3","f3",o),u("n4","f4",o),u("p","n1",s),u("p","n2",s),u("p","n3",s),u("p","n4",s),u("u1","u2",c),u("u2","u3",c),u("u3","u1",c),u("c","t",h),u("p","c",l),u("cn1","cn2",l),u("cn3","cn4",l),u("cf1","cf2",l),u("cf3","cf4",l),e.addAttribute("position",new zr(n,3)),e.addAttribute("color",new zr(i,3)),ba.call(this,e,r),this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}function Ih(t,e){this.object=t,void 0===e&&(e=16776960);var r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Float32Array(24),i=new Vr;i.setIndex(new Pr(r,1)),i.addAttribute("position",new Pr(n,3)),ba.call(this,i,new ya({color:e})),this.matrixAutoUpdate=!1,this.update()}function Dh(t,e){this.type="Box3Helper",this.box=t;var r=void 0!==e?e:16776960,n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Vr;i.setIndex(new Pr(n,1)),i.addAttribute("position",new zr([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),ba.call(this,i,new ya({color:r})),this.geometry.computeBoundingSphere()}function Bh(t,e,r){this.type="PlaneHelper",this.plane=t,this.size=void 0===e?1:e;var n=void 0!==r?r:16776960,i=new Vr;i.addAttribute("position",new zr([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),i.computeBoundingSphere(),xa.call(this,i,new ya({color:n}));var a=new Vr;a.addAttribute("position",new zr([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),a.computeBoundingSphere(),this.add(new pn(a,new un({color:n,opacity:.2,transparent:!0,depthWrite:!1})))}function Nh(t,e,r,n,i,a){Er.call(this),void 0===t&&(t=new ze(0,0,1)),void 0===e&&(e=new ze(0,0,0)),void 0===r&&(r=1),void 0===n&&(n=16776960),void 0===i&&(i=.2*r),void 0===a&&(a=.2*i),void 0===eh&&((eh=new Vr).addAttribute("position",new zr([0,0,0,0,1,0],3)),(rh=new No(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(e),this.line=new xa(eh,new ya({color:n})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new pn(rh,new un({color:n})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(r,i,a)}function zh(t){var e=[0,0,0,t=t||1,0,0,0,0,0,0,t,0,0,0,0,0,0,t],r=new Vr;r.addAttribute("position",new zr(e,3)),r.addAttribute("color",new zr([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var n=new ya({vertexColors:S});ba.call(this,r,n)}Object.assign(ah.prototype,{getValue:function(t,e){this.bind();var r=this._targetGroup.nCachedObjects_,n=this._bindings[r];void 0!==n&&n.getValue(t,e)},setValue:function(t,e){for(var r=this._bindings,n=this._targetGroup.nCachedObjects_,i=r.length;n!==i;++n)r[n].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,r=t.length;e!==r;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,r=t.length;e!==r;++e)t[e].unbind()}}),Object.assign(oh,{Composite:ah,create:function(t,e,r){return t&&t.isAnimationObjectGroup?new oh.Composite(t,e,r):new oh(t,e,r)},sanitizeNodeName:(Kc=new RegExp("[\\[\\]\\.:\\/]","g"),function(t){return t.replace(/\s/g,"_").replace(Kc,"")}),parseTrackName:(jc="[^\\[\\]\\.:\\/]",Wc="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",qc=/((?:WC+[\/:])*)/.source.replace("WC",jc),Xc=/(WCOD+)?/.source.replace("WCOD",Wc),Yc=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",jc),Jc=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",jc),Zc=new RegExp("^"+qc+Xc+Yc+Jc+"$"),Qc=["material","materials","bones"],function(t){var e=Zc.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);var r={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},n=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==n&&-1!==n){var i=r.nodeName.substring(n+1);-1!==Qc.indexOf(i)&&(r.nodeName=r.nodeName.substring(0,n),r.objectName=i)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}),findNode:function(t,e){if(!e||""===e||"root"===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){var r=t.skeleton.getBoneByName(e);if(void 0!==r)return r}if(t.children){var n=function(t){for(var r=0;r<t.length;r++){var i=t[r];if(i.name===e||i.uuid===e)return i;var a=n(i.children);if(a)return a}return null},i=n(t.children);if(i)return i}return null}}),Object.assign(oh.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)t[e++]=r[n]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)r[n]=t[e++]},function(t,e){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)r[n]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)r[n]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,r=e.objectName,n=e.propertyName,i=e.propertyIndex;if(t||(t=oh.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(r){var a=e.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var o=0;o<t.length;o++)if(t[o].name===a){a=o;break}break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==a){if(void 0===t[a])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[a]}}var s=t[n];if(void 0!==s){var c=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?c=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate);var h=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===n){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(o=0;o<this.node.geometry.morphAttributes.position.length;o++)if(t.geometry.morphAttributes.position[o].name===i){i=o;break}}else{if(!t.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(o=0;o<this.node.geometry.morphTargets.length;o++)if(t.geometry.morphTargets[o].name===i){i=o;break}}}h=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(h=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(h=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=n;this.getValue=this.GetterByBindingType[h],this.setValue=this.SetterByBindingTypeAndVersioning[h][c]}else{var l=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+n+" but it wasn't found.",t)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(oh.prototype,{_getValue_unbound:oh.prototype.getValue,_setValue_unbound:oh.prototype.setValue}),Object.assign(sh.prototype,{isAnimationObjectGroup:!0,add:function(){for(var t=this._objects,e=t.length,r=this.nCachedObjects_,n=this._indicesByUUID,i=this._paths,a=this._parsedPaths,o=this._bindings,s=o.length,c=void 0,h=0,l=arguments.length;h!==l;++h){var u=arguments[h],p=u.uuid,d=n[p];if(void 0===d){d=e++,n[p]=d,t.push(u);for(var f=0,m=s;f!==m;++f)o[f].push(new oh(u,i[f],a[f]))}else if(d<r){c=t[d];var g=--r,v=t[g];n[v.uuid]=d,t[d]=v,n[p]=g,t[g]=u;for(f=0,m=s;f!==m;++f){var y=o[f],x=y[g],b=y[d];y[d]=x,void 0===b&&(b=new oh(u,i[f],a[f])),y[g]=b}}else t[d]!==c&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=r},remove:function(){for(var t=this._objects,e=this.nCachedObjects_,r=this._indicesByUUID,n=this._bindings,i=n.length,a=0,o=arguments.length;a!==o;++a){var s=arguments[a],c=s.uuid,h=r[c];if(void 0!==h&&h>=e){var l=e++,u=t[l];r[u.uuid]=h,t[h]=u,r[c]=l,t[l]=s;for(var p=0,d=i;p!==d;++p){var f=n[p],m=f[l],g=f[h];f[h]=m,f[l]=g}}}this.nCachedObjects_=e},uncache:function(){for(var t=this._objects,e=t.length,r=this.nCachedObjects_,n=this._indicesByUUID,i=this._bindings,a=i.length,o=0,s=arguments.length;o!==s;++o){var c=arguments[o].uuid,h=n[c];if(void 0!==h)if(delete n[c],h<r){var l=--r,u=t[l],p=t[v=--e];n[u.uuid]=h,t[h]=u,n[p.uuid]=l,t[l]=p,t.pop();for(var d=0,f=a;d!==f;++d){var m=(y=i[d])[l],g=y[v];y[h]=m,y[l]=g,y.pop()}}else{var v;n[(p=t[v=--e]).uuid]=h,t[h]=p,t.pop();for(d=0,f=a;d!==f;++d){var y;(y=i[d])[h]=y[v],y.pop()}}}this.nCachedObjects_=r},subscribe_:function(t,e){var r=this._bindingsIndicesByPath,n=r[t],i=this._bindings;if(void 0!==n)return i[n];var a=this._paths,o=this._parsedPaths,s=this._objects,c=s.length,h=this.nCachedObjects_,l=new Array(c);n=i.length,r[t]=n,a.push(t),o.push(e),i.push(l);for(var u=h,p=s.length;u!==p;++u){var d=s[u];l[u]=new oh(d,t,e)}return l},unsubscribe_:function(t){var e=this._bindingsIndicesByPath,r=e[t];if(void 0!==r){var n=this._paths,i=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o];e[t[o]]=r,a[r]=s,a.pop(),i[r]=i[o],i.pop(),n[r]=n[o],n.pop()}}}),Object.assign(ch.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,e){return this.loop=t,this.repetitions=e,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,e,r){if(t.fadeOut(e),this.fadeIn(e),r){var n=this._clip.duration,i=t._clip.duration,a=i/n,o=n/i;t.warp(1,a,e),this.warp(o,1,e)}return this},crossFadeTo:function(t,e,r){return t.crossFadeFrom(this,e,r)},stopFading:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,e,r){var n=this._mixer,i=n.time,a=this._timeScaleInterpolant,o=this.timeScale;null===a&&(a=n._lendControlInterpolant(),this._timeScaleInterpolant=a);var s=a.parameterPositions,c=a.sampleValues;return s[0]=i,s[1]=i+r,c[0]=t/o,c[1]=e/o,this},stopWarping:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,e,r,n){if(this.enabled){var i=this._startTime;if(null!==i){var a=(t-i)*r;if(a<0||0===r)return;this._startTime=null,e=r*a}e*=this._updateTimeScale(t);var o=this._updateTime(e),s=this._updateWeight(t);if(s>0)for(var c=this._interpolants,h=this._propertyBindings,l=0,u=c.length;l!==u;++l)c[l].evaluate(o),h[l].accumulate(n,s)}else this._updateWeight(t)},_updateWeight:function(t){var e=0;if(this.enabled){e=this.weight;var r=this._weightInterpolant;if(null!==r){var n=r.evaluate(t)[0];e*=n,t>r.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1))}}return this._effectiveWeight=e,e},_updateTimeScale:function(t){var e=0;if(!this.paused){e=this.timeScale;var r=this._timeScaleInterpolant;if(null!==r)e*=r.evaluate(t)[0],t>r.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}return this._effectiveTimeScale=e,e},_updateTime:function(t){var e=this.time+t,r=this._clip.duration,n=this.loop,i=this._loopCount,a=2202===n;if(0===t)return-1===i?e:a&&1==(1&i)?r-e:e;if(2200===n){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(e>=r)e=r;else{if(!(e<0))break t;e=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===i&&(t>=0?(i=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),e>=r||e<0){var o=Math.floor(e/r);e-=r*o,i+=Math.abs(o);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,e=t>0?r:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===s){var c=t<0;this._setEndings(c,!c,a)}else this._setEndings(!1,!1,a);this._loopCount=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}if(a&&1==(1&i))return this.time=e,r-e}return this.time=e,e},_setEndings:function(t,e,r){var n=this._interpolantSettings;r?(n.endingStart=2401,n.endingEnd=2401):(n.endingStart=t?this.zeroSlopeAtStart?2401:ye:2402,n.endingEnd=e?this.zeroSlopeAtEnd?2401:ye:2402)},_scheduleFading:function(t,e,r){var n=this._mixer,i=n.time,a=this._weightInterpolant;null===a&&(a=n._lendControlInterpolant(),this._weightInterpolant=a);var o=a.parameterPositions,s=a.sampleValues;return o[0]=i,s[0]=e,o[1]=i+t,s[1]=r,this}}),hh.prototype=Object.assign(Object.create(e.prototype),{constructor:hh,_bindAction:function(t,e){var r=t._localRoot||this._root,n=t._clip.tracks,i=n.length,a=t._propertyBindings,o=t._interpolants,s=r.uuid,c=this._bindingsByRootAndName,h=c[s];void 0===h&&(h={},c[s]=h);for(var l=0;l!==i;++l){var u=n[l],p=u.name,d=h[p];if(void 0!==d)a[l]=d;else{if(void 0!==(d=a[l])){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,s,p));continue}var f=e&&e._propertyBindings[l].binding.parsedPath;++(d=new kc(oh.create(r,p,f),u.ValueTypeName,u.getValueSize())).referenceCount,this._addInactiveBinding(d,s,p),a[l]=d}o[l].resultBuffer=d.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,r=t._clip.uuid,n=this._actionsByClip[r];this._bindAction(t,n&&n.knownActions[0]),this._addInactiveAction(t,r,e)}for(var i=t._propertyBindings,a=0,o=i.length;a!==o;++a){var s=i[a];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,r=0,n=e.length;r!==n;++r){var i=e[r];0==--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){var e=t._cacheIndex;return null!==e&&e<this._nActiveActions},_addInactiveAction:function(t,e,r){var n=this._actions,i=this._actionsByClip,a=i[e];if(void 0===a)a={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,i[e]=a;else{var o=a.knownActions;t._byClipCacheIndex=o.length,o.push(t)}t._cacheIndex=n.length,n.push(t),a.actionByRoot[r]=t},_removeInactiveAction:function(t){var e=this._actions,r=e[e.length-1],n=t._cacheIndex;r._cacheIndex=n,e[n]=r,e.pop(),t._cacheIndex=null;var i=t._clip.uuid,a=this._actionsByClip,o=a[i],s=o.knownActions,c=s[s.length-1],h=t._byClipCacheIndex;c._byClipCacheIndex=h,s[h]=c,s.pop(),t._byClipCacheIndex=null,delete o.actionByRoot[(t._localRoot||this._root).uuid],0===s.length&&delete a[i],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var e=t._propertyBindings,r=0,n=e.length;r!==n;++r){var i=e[r];0==--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(t){var e=this._actions,r=t._cacheIndex,n=this._nActiveActions++,i=e[n];t._cacheIndex=n,e[n]=t,i._cacheIndex=r,e[r]=i},_takeBackAction:function(t){var e=this._actions,r=t._cacheIndex,n=--this._nActiveActions,i=e[n];t._cacheIndex=n,e[n]=t,i._cacheIndex=r,e[r]=i},_addInactiveBinding:function(t,e,r){var n=this._bindingsByRootAndName,i=n[e],a=this._bindings;void 0===i&&(i={},n[e]=i),i[r]=t,t._cacheIndex=a.length,a.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,r=t.binding,n=r.rootNode.uuid,i=r.path,a=this._bindingsByRootAndName,o=a[n],s=e[e.length-1],c=t._cacheIndex;s._cacheIndex=c,e[c]=s,e.pop(),delete o[i];t:{for(var h in o)break t;delete a[n]}},_lendBinding:function(t){var e=this._bindings,r=t._cacheIndex,n=this._nActiveBindings++,i=e[n];t._cacheIndex=n,e[n]=t,i._cacheIndex=r,e[r]=i},_takeBackBinding:function(t){var e=this._bindings,r=t._cacheIndex,n=--this._nActiveBindings,i=e[n];t._cacheIndex=n,e[n]=t,i._cacheIndex=r,e[r]=i},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,r=t[e];return void 0===r&&((r=new rs(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=e,t[e]=r),r},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,r=t.__cacheIndex,n=--this._nActiveControlInterpolants,i=e[n];t.__cacheIndex=n,e[n]=t,i.__cacheIndex=r,e[r]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e){var r=e||this._root,n=r.uuid,i="string"==typeof t?ps.findByName(r,t):t,a=null!==i?i.uuid:t,o=this._actionsByClip[a],s=null;if(void 0!==o){var c=o.actionByRoot[n];if(void 0!==c)return c;s=o.knownActions[0],null===i&&(i=s._clip)}if(null===i)return null;var h=new ch(this,i,e);return this._bindAction(h,s),this._addInactiveAction(h,a,n),h},existingAction:function(t,e){var r=e||this._root,n=r.uuid,i="string"==typeof t?ps.findByName(r,t):t,a=i?i.uuid:t,o=this._actionsByClip[a];return void 0!==o&&o.actionByRoot[n]||null},stopAllAction:function(){var t=this._actions,e=this._nActiveActions,r=this._bindings,n=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var i=0;i!==e;++i)t[i].reset();for(i=0;i!==n;++i)r[i].useCount=0;return this},update:function(t){t*=this.timeScale;for(var e=this._actions,r=this._nActiveActions,n=this.time+=t,i=Math.sign(t),a=this._accuIndex^=1,o=0;o!==r;++o){e[o]._update(n,t,i,a)}var s=this._bindings,c=this._nActiveBindings;for(o=0;o!==c;++o)s[o].apply(a);return this},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions,r=t.uuid,n=this._actionsByClip,i=n[r];if(void 0!==i){for(var a=i.knownActions,o=0,s=a.length;o!==s;++o){var c=a[o];this._deactivateAction(c);var h=c._cacheIndex,l=e[e.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,l._cacheIndex=h,e[h]=l,e.pop(),this._removeInactiveBindingsForAction(c)}delete n[r]}},uncacheRoot:function(t){var e=t.uuid,r=this._actionsByClip;for(var n in r){var i=r[n].actionByRoot[e];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var a=this._bindingsByRootAndName[e];if(void 0!==a)for(var o in a){var s=a[o];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(t,e){var r=this.existingAction(t,e);null!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}}),lh.prototype.clone=function(){return new lh(void 0===this.value.clone?this.value:this.value.clone())},uh.prototype=Object.assign(Object.create(Vr.prototype),{constructor:uh,isInstancedBufferGeometry:!0,copy:function(t){return Vr.prototype.copy.call(this,t),this.maxInstancedCount=t.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)}}),ph.prototype=Object.assign(Object.create(la.prototype),{constructor:ph,isInstancedInterleavedBuffer:!0,copy:function(t){return la.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),dh.prototype=Object.assign(Object.create(Pr.prototype),{constructor:dh,isInstancedBufferAttribute:!0,copy:function(t){return Pr.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),Object.assign(fh.prototype,{linePrecision:1,set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize()):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,e,r){var n=r||[];return gh(t,this,n,e),n.sort(mh),n},intersectObjects:function(t,e,r){var n=r||[];if(!1===Array.isArray(t))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),n;for(var i=0,a=t.length;i<a;i++)gh(t[i],this,n,e);return n.sort(mh),n}}),Object.assign(vh.prototype,{set:function(t,e,r){return this.radius=t,this.phi=e,this.theta=r,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,r){return this.radius=Math.sqrt(t*t+e*e+r*r),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,r),this.phi=Math.acos(Ie.clamp(e/this.radius,-1,1))),this}}),Object.assign(yh.prototype,{set:function(t,e,r){return this.radius=t,this.theta=e,this.y=r,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,r){return this.radius=Math.sqrt(t*t+r*r),this.theta=Math.atan2(t,r),this.y=e,this}}),Object.assign(xh.prototype,{set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,r=t.length;e<r;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new De;return function(e,r){var n=t.copy(r).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new De),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new De),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .getParameter() target is now required"),e=new De),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .clampPoint() target is now required"),e=new De),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new De;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),Object.assign(bh.prototype,{set:function(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function(t){return void 0===t&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new ze),t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){return void 0===t&&(console.warn("THREE.Line3: .delta() target is now required"),t=new ze),t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){return void 0===e&&(console.warn("THREE.Line3: .at() target is now required"),e=new ze),this.delta(e).multiplyScalar(t).add(this.start)},closestPointToPointParameter:($c=new ze,th=new ze,function(t,e){$c.subVectors(t,this.start),th.subVectors(this.end,this.start);var r=th.dot(th),n=th.dot($c)/r;return e&&(n=Ie.clamp(n,0,1)),n}),closestPointToPoint:function(t,e,r){var n=this.closestPointToPointParameter(t,e);return void 0===r&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),r=new ze),this.delta(r).multiplyScalar(n).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}}),wh.prototype=Object.create(Er.prototype),wh.prototype.constructor=wh,wh.prototype.isImmediateRenderObject=!0,_h.prototype=Object.create(ba.prototype),_h.prototype.constructor=_h,_h.prototype.update=function(){var t=new ze,e=new ze,r=new Ue;return function(){var n=["a","b","c"];this.object.updateMatrixWorld(!0),r.getNormalMatrix(this.object.matrixWorld);var i=this.object.matrixWorld,a=this.geometry.attributes.position,o=this.object.geometry;if(o&&o.isGeometry)for(var s=o.vertices,c=o.faces,h=0,l=0,u=c.length;l<u;l++)for(var p=c[l],d=0,f=p.vertexNormals.length;d<f;d++){var m=s[p[n[d]]],g=p.vertexNormals[d];t.copy(m).applyMatrix4(i),e.copy(g).applyMatrix3(r).normalize().multiplyScalar(this.size).add(t),a.setXYZ(h,t.x,t.y,t.z),h+=1,a.setXYZ(h,e.x,e.y,e.z),h+=1}else if(o&&o.isBufferGeometry){var v=o.attributes.position,y=o.attributes.normal;for(h=0,d=0,f=v.count;d<f;d++)t.set(v.getX(d),v.getY(d),v.getZ(d)).applyMatrix4(i),e.set(y.getX(d),y.getY(d),y.getZ(d)),e.applyMatrix3(r).normalize().multiplyScalar(this.size).add(t),a.setXYZ(h,t.x,t.y,t.z),h+=1,a.setXYZ(h,e.x,e.y,e.z),h+=1}a.needsUpdate=!0}}(),Mh.prototype=Object.create(Er.prototype),Mh.prototype.constructor=Mh,Mh.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Mh.prototype.update=function(){var t=new ze;return function(){this.light.updateMatrixWorld();var e=this.light.distance?this.light.distance:1e3,r=e*Math.tan(this.light.angle);this.cone.scale.set(r,r,e),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),Eh.prototype=Object.create(ba.prototype),Eh.prototype.constructor=Eh,Eh.prototype.updateMatrixWorld=function(){var t=new ze,e=new Be,r=new Be;return function(n){var i=this.bones,a=this.geometry,o=a.getAttribute("position");r.getInverse(this.root.matrixWorld);for(var s=0,c=0;s<i.length;s++){var h=i[s];h.parent&&h.parent.isBone&&(e.multiplyMatrices(r,h.matrixWorld),t.setFromMatrixPosition(e),o.setXYZ(c,t.x,t.y,t.z),e.multiplyMatrices(r,h.parent.matrixWorld),t.setFromMatrixPosition(e),o.setXYZ(c+1,t.x,t.y,t.z),c+=2)}a.getAttribute("position").needsUpdate=!0,Er.prototype.updateMatrixWorld.call(this,n)}}(),Sh.prototype=Object.create(pn.prototype),Sh.prototype.constructor=Sh,Sh.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Sh.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},Th.prototype=Object.create(xa.prototype),Th.prototype.constructor=Th,Th.prototype.update=function(){if(this.scale.set(.5*this.light.width,.5*this.light.height,1),void 0!==this.color)this.material.color.set(this.color),this.children[0].material.color.set(this.color);else{this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var t=this.material.color,e=Math.max(t.r,t.g,t.b);e>1&&t.multiplyScalar(1/e),this.children[0].material.color.copy(this.material.color)}},Th.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()},Ah.prototype=Object.create(Er.prototype),Ah.prototype.constructor=Ah,Ah.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Ah.prototype.update=function(){var t=new ze,e=new lr,r=new lr;return function(){var n=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var i=n.geometry.getAttribute("color");e.copy(this.light.color),r.copy(this.light.groundColor);for(var a=0,o=i.count;a<o;a++){var s=a<o/2?e:r;i.setXYZ(a,s.r,s.g,s.b)}i.needsUpdate=!0}n.lookAt(t.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),Lh.prototype=Object.create(ba.prototype),Lh.prototype.constructor=Lh,Ph.prototype=Object.create(ba.prototype),Ph.prototype.constructor=Ph,Rh.prototype=Object.create(ba.prototype),Rh.prototype.constructor=Rh,Rh.prototype.update=function(){var t=new ze,e=new ze,r=new Ue;return function(){this.object.updateMatrixWorld(!0),r.getNormalMatrix(this.object.matrixWorld);for(var n=this.object.matrixWorld,i=this.geometry.attributes.position,a=this.object.geometry,o=a.vertices,s=a.faces,c=0,h=0,l=s.length;h<l;h++){var u=s[h],p=u.normal;t.copy(o[u.a]).add(o[u.b]).add(o[u.c]).divideScalar(3).applyMatrix4(n),e.copy(p).applyMatrix3(r).normalize().multiplyScalar(this.size).add(t),i.setXYZ(c,t.x,t.y,t.z),c+=1,i.setXYZ(c,e.x,e.y,e.z),c+=1}i.needsUpdate=!0}}(),Ch.prototype=Object.create(Er.prototype),Ch.prototype.constructor=Ch,Ch.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},Ch.prototype.update=function(){var t=new ze,e=new ze,r=new ze;return function(){t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),r.subVectors(e,t),this.lightPlane.lookAt(e),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(e),this.targetLine.scale.z=r.length()}}(),Oh.prototype=Object.create(ba.prototype),Oh.prototype.constructor=Oh,Oh.prototype.update=function(){var t,e,r=new ze,n=new qi;function i(i,a,o,s){r.set(a,o,s).unproject(n);var c=e[i];if(void 0!==c)for(var h=t.getAttribute("position"),l=0,u=c.length;l<u;l++)h.setXYZ(c[l],r.x,r.y,r.z)}return function(){t=this.geometry,e=this.pointMap;n.projectionMatrix.copy(this.camera.projectionMatrix),i("c",0,0,-1),i("t",0,0,1),i("n1",-1,-1,-1),i("n2",1,-1,-1),i("n3",-1,1,-1),i("n4",1,1,-1),i("f1",-1,-1,1),i("f2",1,-1,1),i("f3",-1,1,1),i("f4",1,1,1),i("u1",.7,1.1,-1),i("u2",-.7,1.1,-1),i("u3",0,2,-1),i("cf1",-1,0,1),i("cf2",1,0,1),i("cf3",0,-1,1),i("cf4",0,1,1),i("cn1",-1,0,-1),i("cn2",1,0,-1),i("cn3",0,-1,-1),i("cn4",0,1,-1),t.getAttribute("position").needsUpdate=!0}}(),Ih.prototype=Object.create(ba.prototype),Ih.prototype.constructor=Ih,Ih.prototype.update=function(){var t=new Ke;return function(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&t.setFromObject(this.object),!t.isEmpty()){var r=t.min,n=t.max,i=this.geometry.attributes.position,a=i.array;a[0]=n.x,a[1]=n.y,a[2]=n.z,a[3]=r.x,a[4]=n.y,a[5]=n.z,a[6]=r.x,a[7]=r.y,a[8]=n.z,a[9]=n.x,a[10]=r.y,a[11]=n.z,a[12]=n.x,a[13]=n.y,a[14]=r.z,a[15]=r.x,a[16]=n.y,a[17]=r.z,a[18]=r.x,a[19]=r.y,a[20]=r.z,a[21]=n.x,a[22]=r.y,a[23]=r.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),Ih.prototype.setFromObject=function(t){return this.object=t,this.update(),this},Ih.prototype.copy=function(t){return ba.prototype.copy.call(this,t),this.object=t.object,this},Ih.prototype.clone=function(){return(new this.constructor).copy(this)},Dh.prototype=Object.create(ba.prototype),Dh.prototype.constructor=Dh,Dh.prototype.updateMatrixWorld=function(t){var e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),Er.prototype.updateMatrixWorld.call(this,t))},Bh.prototype=Object.create(xa.prototype),Bh.prototype.constructor=Bh,Bh.prototype.updateMatrixWorld=function(t){var e=-this.plane.constant;Math.abs(e)<1e-8&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.children[0].material.side=e<0?w:b,this.lookAt(this.plane.normal),Er.prototype.updateMatrixWorld.call(this,t)},Nh.prototype=Object.create(Er.prototype),Nh.prototype.constructor=Nh,Nh.prototype.setDirection=(ih=new ze,function(t){t.y>.99999?this.quaternion.set(0,0,0,1):t.y<-.99999?this.quaternion.set(1,0,0,0):(ih.set(t.z,0,-t.x).normalize(),nh=Math.acos(t.y),this.quaternion.setFromAxisAngle(ih,nh))}),Nh.prototype.setLength=function(t,e,r){void 0===e&&(e=.2*t),void 0===r&&(r=.2*e),this.line.scale.set(1,Math.max(0,t-e),1),this.line.updateMatrix(),this.cone.scale.set(r,e,r),this.cone.position.y=t,this.cone.updateMatrix()},Nh.prototype.setColor=function(t){this.line.material.color.copy(t),this.cone.material.color.copy(t)},Nh.prototype.copy=function(t){return Er.prototype.copy.call(this,t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this},Nh.prototype.clone=function(){return(new this.constructor).copy(this)},zh.prototype=Object.create(ba.prototype),zh.prototype.constructor=zh;function Uh(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Is.call(this,t),this.type="catmullrom",this.closed=!0}function Gh(t){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Is.call(this,t),this.type="catmullrom"}function Fh(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Is.call(this,t),this.type="catmullrom"}Ss.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(Ss.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Object.assign(Ws.prototype,{createPointsGeometry:function(t){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var e=new Lr,r=0,n=t.length;r<n;r++){var i=t[r];e.vertices.push(new ze(i.x,i.y,i.z||0))}return e}}),Object.assign(qs.prototype,{fromPoints:function(t){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)}}),Uh.prototype=Object.create(Is.prototype),Gh.prototype=Object.create(Is.prototype),Fh.prototype=Object.create(Is.prototype),Object.assign(Fh.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),Lh.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Eh.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Mc.prototype,{extractUrlBase:function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),oc.extractUrlBase(t)}}),Object.assign(hc.prototype,{setTexturePath:function(t){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(t)}}),Object.assign(xh.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(Ke.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),bh.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Object.assign(Ie,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(t){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Ie.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Ie.ceilPowerOfTwo(t)}}),Object.assign(Ue.prototype,{flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(Be.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},getPosition:function(){var t;return function(){return void 0===t&&(t=new ze),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),t.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,e,r,n,i,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,n,r,i,a)}}),tr.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},Ne.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},Object.assign(hn.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(ln.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},midpoint:function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},normal:function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},plane:function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)}}),Object.assign(ln,{barycoordFromPoint:function(t,e,r,n,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),ln.getBarycoord(t,e,r,n,i)},normal:function(t,e,r,n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),ln.getNormal(t,e,r,n)}}),Object.assign(Xs.prototype,{extractAllPoints:function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new xo(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Co(this,t)}}),Object.assign(De.prototype,{fromAttribute:function(t,e,r){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,r)},distanceToManhattan:function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(ze.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,e,r){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,r)},distanceToManhattan:function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Xe.prototype,{fromAttribute:function(t,e,r){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,r)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Lr.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(Er.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(Er.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(fa.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(ga.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),ma.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(Ss.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}}),Xi.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(Ys.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(Pr.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(Vr.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addDrawCall:function(t,e,r){void 0!==r&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(Vr.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.assign(bo.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(lh.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(sn.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new lr}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===t}}}),Object.defineProperties(qo.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(cn.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Object.assign(oa.prototype,{clearTarget:function(t,e,r,n){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,r,n)},animate:function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")}}),Object.defineProperties(oa.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Hi.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Ye.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Object.defineProperties(ia.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}},userHeight:{set:function(){console.warn("THREE.WebVRManager: .userHeight has been removed.")}}}),Fc.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var e=this;return(new Bc).load(t,function(t){e.setBuffer(t)}),this},Vc.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},zc.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)};var Hh={merge:function(t,e,r){var n;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),e.isMesh&&(e.matrixAutoUpdate&&e.updateMatrix(),n=e.matrix,e=e.geometry),t.merge(e,n,r)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}};je.crossOrigin=void 0,je.loadTexture=function(t,e,r,n){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new Es;i.setCrossOrigin(this.crossOrigin);var a=i.load(t,r,void 0,n);return e&&(a.mapping=e),a},je.loadTextureCube=function(t,e,r,n){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new Ms;i.setCrossOrigin(this.crossOrigin);var a=i.load(t,r,void 0,n);return e&&(a.mapping=e),a},je.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},je.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};var Vh={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}};t.WebGLMultisampleRenderTarget=Je,t.WebGLRenderTargetCube=Ze,t.WebGLRenderTarget=Ye,t.WebGLRenderer=oa,t.ShaderLib=dr,t.UniformsLib=pr,t.UniformsUtils=cr,t.ShaderChunk=rr,t.FogExp2=sa,t.Fog=ca,t.Scene=ha,t.Sprite=da,t.LOD=fa,t.SkinnedMesh=ma,t.Skeleton=ga,t.Bone=va,t.Mesh=pn,t.LineSegments=ba,t.LineLoop=wa,t.Line=xa,t.Points=Ma,t.Group=Wi,t.VideoTexture=Ea,t.DataTexture=Qe,t.DataTexture3D=Sn,t.CompressedTexture=Sa,t.CubeTexture=En,t.CanvasTexture=Ta,t.DepthTexture=Aa,t.Texture=qe,t.AnimationLoader=xs,t.CompressedTextureLoader=bs,t.DataTextureLoader=ws,t.CubeTextureLoader=Ms,t.TextureLoader=Es,t.ObjectLoader=hc,t.MaterialLoader=ac,t.BufferGeometryLoader=sc,t.DefaultLoadingManager=gs,t.LoadingManager=ms,t.ImageLoader=_s,t.ImageBitmapLoader=yc,t.FontLoader=_c,t.FileLoader=ys,t.Loader=Mc,t.LoaderUtils=oc,t.Cache=fs,t.AudioLoader=Bc,t.SpotLightShadow=Qs,t.SpotLight=Ks,t.PointLight=$s,t.RectAreaLight=ic,t.HemisphereLight=Js,t.DirectionalLightShadow=ec,t.DirectionalLight=rc,t.AmbientLight=nc,t.LightShadow=Zs,t.Light=Ys,t.StereoCamera=Nc,t.PerspectiveCamera=Xi,t.OrthographicCamera=tc,t.CubeCamera=zc,t.ArrayCamera=Yi,t.Camera=qi,t.AudioListener=Gc,t.PositionalAudio=Hc,t.AudioContext=Dc,t.AudioAnalyser=Vc,t.Audio=Fc,t.VectorKeyframeTrack=us,t.StringKeyframeTrack=ls,t.QuaternionKeyframeTrack=hs,t.NumberKeyframeTrack=ss,t.ColorKeyframeTrack=os,t.BooleanKeyframeTrack=as,t.PropertyMixer=kc,t.PropertyBinding=oh,t.KeyframeTrack=is,t.AnimationUtils=$o,t.AnimationObjectGroup=sh,t.AnimationMixer=hh,t.AnimationClip=ps,t.Uniform=lh,t.InstancedBufferGeometry=uh,t.BufferGeometry=Vr,t.Geometry=Lr,t.InterleavedBufferAttribute=ua,t.InstancedInterleavedBuffer=ph,t.InterleavedBuffer=la,t.InstancedBufferAttribute=dh,t.Face3=gr,t.Object3D=Er,t.Raycaster=fh,t.Layers=yr,t.EventDispatcher=e,t.Clock=Uc,t.QuaternionLinearInterpolant=cs,t.LinearInterpolant=rs,t.DiscreteInterpolant=ns,t.CubicInterpolant=es,t.Interpolant=ts,t.Triangle=ln,t.Math=Ie,t.Spherical=vh,t.Cylindrical=yh,t.Plane=tr,t.Frustum=er,t.Sphere=$e,t.Ray=hn,t.Matrix4=Be,t.Matrix3=Ue,t.Box3=Ke,t.Box2=xh,t.Line3=bh,t.Euler=vr,t.Vector4=Xe,t.Vector3=ze,t.Vector2=De,t.Quaternion=Ne,t.Color=lr,t.ImmediateRenderObject=wh,t.VertexNormalsHelper=_h,t.SpotLightHelper=Mh,t.SkeletonHelper=Eh,t.PointLightHelper=Sh,t.RectAreaLightHelper=Th,t.HemisphereLightHelper=Ah,t.GridHelper=Lh,t.PolarGridHelper=Ph,t.FaceNormalsHelper=Rh,t.DirectionalLightHelper=Ch,t.CameraHelper=Oh,t.BoxHelper=Ih,t.Box3Helper=Dh,t.PlaneHelper=Bh,t.ArrowHelper=Nh,t.AxesHelper=zh,t.Shape=Xs,t.Path=qs,t.ShapePath=xc,t.Font=bc,t.CurvePath=Ws,t.Curve=Ss,t.ImageUtils=je,t.ShapeUtils=go,t.WebGLUtils=ji,t.WireframeGeometry=La,t.ParametricGeometry=Pa,t.ParametricBufferGeometry=Ra,t.TetrahedronGeometry=Ia,t.TetrahedronBufferGeometry=Da,t.OctahedronGeometry=Ba,t.OctahedronBufferGeometry=Na,t.IcosahedronGeometry=za,t.IcosahedronBufferGeometry=Ua,t.DodecahedronGeometry=Ga,t.DodecahedronBufferGeometry=Fa,t.PolyhedronGeometry=Ca,t.PolyhedronBufferGeometry=Oa,t.TubeGeometry=Ha,t.TubeBufferGeometry=Va,t.TorusKnotGeometry=ka,t.TorusKnotBufferGeometry=ja,t.TorusGeometry=Wa,t.TorusBufferGeometry=qa,t.TextGeometry=Mo,t.TextBufferGeometry=Eo,t.SphereGeometry=So,t.SphereBufferGeometry=To,t.RingGeometry=Ao,t.RingBufferGeometry=Lo,t.PlaneGeometry=Wr,t.PlaneBufferGeometry=qr,t.LatheGeometry=Po,t.LatheBufferGeometry=Ro,t.ShapeGeometry=Co,t.ShapeBufferGeometry=Oo,t.ExtrudeGeometry=xo,t.ExtrudeBufferGeometry=bo,t.EdgesGeometry=Do,t.ConeGeometry=zo,t.ConeBufferGeometry=Uo,t.CylinderGeometry=Bo,t.CylinderBufferGeometry=No,t.CircleGeometry=Go,t.CircleBufferGeometry=Fo,t.BoxGeometry=kr,t.CubeGeometry=kr,t.BoxBufferGeometry=jr,t.ShadowMaterial=Vo,t.SpriteMaterial=pa,t.RawShaderMaterial=ko,t.ShaderMaterial=cn,t.PointsMaterial=_a,t.MeshPhysicalMaterial=Wo,t.MeshStandardMaterial=jo,t.MeshPhongMaterial=qo,t.MeshToonMaterial=Xo,t.MeshNormalMaterial=Yo,t.MeshLambertMaterial=Jo,t.MeshDepthMaterial=Gi,t.MeshDistanceMaterial=Fi,t.MeshBasicMaterial=un,t.MeshMatcapMaterial=Zo,t.LineDashedMaterial=Qo,t.LineBasicMaterial=ya,t.Material=sn,t.Float64BufferAttribute=Ur,t.Float32BufferAttribute=zr,t.Uint32BufferAttribute=Nr,t.Int32BufferAttribute=Br,t.Uint16BufferAttribute=Dr,t.Int16BufferAttribute=Ir,t.Uint8ClampedBufferAttribute=Or,t.Uint8BufferAttribute=Cr,t.Int8BufferAttribute=Rr,t.BufferAttribute=Pr,t.ArcCurve=As,t.CatmullRomCurve3=Is,t.CubicBezierCurve=zs,t.CubicBezierCurve3=Us,t.EllipseCurve=Ts,t.LineCurve=Gs,t.LineCurve3=Fs,t.QuadraticBezierCurve=Hs,t.QuadraticBezierCurve3=Vs,t.SplineCurve=ks,t.REVISION=f,t.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},t.CullFaceNone=m,t.CullFaceBack=g,t.CullFaceFront=v,t.CullFaceFrontBack=3,t.FrontFaceDirectionCW=0,t.FrontFaceDirectionCCW=1,t.BasicShadowMap=0,t.PCFShadowMap=y,t.PCFSoftShadowMap=x,t.FrontSide=b,t.BackSide=w,t.DoubleSide=_,t.FlatShading=1,t.SmoothShading=2,t.NoColors=M,t.FaceColors=E,t.VertexColors=S,t.NoBlending=T,t.NormalBlending=A,t.AdditiveBlending=L,t.SubtractiveBlending=P,t.MultiplyBlending=R,t.CustomBlending=C,t.AddEquation=O,t.SubtractEquation=I,t.ReverseSubtractEquation=D,t.MinEquation=B,t.MaxEquation=N,t.ZeroFactor=z,t.OneFactor=U,t.SrcColorFactor=G,t.OneMinusSrcColorFactor=F,t.SrcAlphaFactor=H,t.OneMinusSrcAlphaFactor=V,t.DstAlphaFactor=k,t.OneMinusDstAlphaFactor=j,t.DstColorFactor=W,t.OneMinusDstColorFactor=q,t.SrcAlphaSaturateFactor=X,t.NeverDepth=Y,t.AlwaysDepth=J,t.LessDepth=Z,t.LessEqualDepth=Q,t.EqualDepth=K,t.GreaterEqualDepth=$,t.GreaterDepth=tt,t.NotEqualDepth=et,t.MultiplyOperation=rt,t.MixOperation=nt,t.AddOperation=it,t.NoToneMapping=at,t.LinearToneMapping=ot,t.ReinhardToneMapping=st,t.Uncharted2ToneMapping=ct,t.CineonToneMapping=ht,t.ACESFilmicToneMapping=lt,t.UVMapping=300,t.CubeReflectionMapping=ut,t.CubeRefractionMapping=pt,t.EquirectangularReflectionMapping=dt,t.EquirectangularRefractionMapping=ft,t.SphericalReflectionMapping=mt,t.CubeUVReflectionMapping=gt,t.CubeUVRefractionMapping=vt,t.RepeatWrapping=yt,t.ClampToEdgeWrapping=xt,t.MirroredRepeatWrapping=bt,t.NearestFilter=wt,t.NearestMipMapNearestFilter=_t,t.NearestMipMapLinearFilter=Mt,t.LinearFilter=Et,t.LinearMipMapNearestFilter=St,t.LinearMipMapLinearFilter=Tt,t.UnsignedByteType=At,t.ByteType=Lt,t.ShortType=Pt,t.UnsignedShortType=Rt,t.IntType=Ct,t.UnsignedIntType=Ot,t.FloatType=It,t.HalfFloatType=Dt,t.UnsignedShort4444Type=Bt,t.UnsignedShort5551Type=Nt,t.UnsignedShort565Type=zt,t.UnsignedInt248Type=Ut,t.AlphaFormat=Gt,t.RGBFormat=Ft,t.RGBAFormat=Ht,t.LuminanceFormat=Vt,t.LuminanceAlphaFormat=kt,t.RGBEFormat=jt,t.DepthFormat=Wt,t.DepthStencilFormat=qt,t.RedFormat=Xt,t.RGB_S3TC_DXT1_Format=Yt,t.RGBA_S3TC_DXT1_Format=Jt,t.RGBA_S3TC_DXT3_Format=Zt,t.RGBA_S3TC_DXT5_Format=Qt,t.RGB_PVRTC_4BPPV1_Format=Kt,t.RGB_PVRTC_2BPPV1_Format=$t,t.RGBA_PVRTC_4BPPV1_Format=te,t.RGBA_PVRTC_2BPPV1_Format=ee,t.RGB_ETC1_Format=re,t.RGBA_ASTC_4x4_Format=ne,t.RGBA_ASTC_5x4_Format=ie,t.RGBA_ASTC_5x5_Format=ae,t.RGBA_ASTC_6x5_Format=oe,t.RGBA_ASTC_6x6_Format=se,t.RGBA_ASTC_8x5_Format=ce,t.RGBA_ASTC_8x6_Format=he,t.RGBA_ASTC_8x8_Format=le,t.RGBA_ASTC_10x5_Format=ue,t.RGBA_ASTC_10x6_Format=pe,t.RGBA_ASTC_10x8_Format=de,t.RGBA_ASTC_10x10_Format=fe,t.RGBA_ASTC_12x10_Format=me,t.RGBA_ASTC_12x12_Format=ge,t.LoopOnce=2200,t.LoopRepeat=ve,t.LoopPingPong=2202,t.InterpolateDiscrete=2300,t.InterpolateLinear=2301,t.InterpolateSmooth=2302,t.ZeroCurvatureEnding=ye,t.ZeroSlopeEnding=2401,t.WrapAroundEnding=2402,t.TrianglesDrawMode=xe,t.TriangleStripDrawMode=be,t.TriangleFanDrawMode=we,t.LinearEncoding=_e,t.sRGBEncoding=Me,t.GammaEncoding=Ee,t.RGBEEncoding=Se,t.LogLuvEncoding=3003,t.RGBM7Encoding=Te,t.RGBM16Encoding=Ae,t.RGBDEncoding=Le,t.BasicDepthPacking=Pe,t.RGBADepthPacking=Re,t.TangentSpaceNormalMap=Ce,t.ObjectSpaceNormalMap=Oe,t.Face4=function(t,e,r,n,i,a,o){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new gr(t,e,r,i,a,o)},t.LineStrip=0,t.LinePieces=1,t.MeshFaceMaterial=function(t){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),t},t.MultiMaterial=function(t){return void 0===t&&(t=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),t.isMultiMaterial=!0,t.materials=t,t.clone=function(){return t.slice()},t},t.PointCloud=function(t,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Ma(t,e)},t.Particle=function(t){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new da(t)},t.ParticleSystem=function(t,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Ma(t,e)},t.PointCloudMaterial=function(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new _a(t)},t.ParticleBasicMaterial=function(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new _a(t)},t.ParticleSystemMaterial=function(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new _a(t)},t.Vertex=function(t,e,r){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new ze(t,e,r)},t.DynamicBufferAttribute=function(t,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new Pr(t,e).setDynamic(!0)},t.Int8Attribute=function(t,e){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Rr(t,e)},t.Uint8Attribute=function(t,e){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Cr(t,e)},t.Uint8ClampedAttribute=function(t,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Or(t,e)},t.Int16Attribute=function(t,e){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Ir(t,e)},t.Uint16Attribute=function(t,e){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Dr(t,e)},t.Int32Attribute=function(t,e){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Br(t,e)},t.Uint32Attribute=function(t,e){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Nr(t,e)},t.Float32Attribute=function(t,e){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new zr(t,e)},t.Float64Attribute=function(t,e){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Ur(t,e)},t.ClosedSplineCurve3=Uh,t.SplineCurve3=Gh,t.Spline=Fh,t.AxisHelper=function(t){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new zh(t)},t.BoundingBoxHelper=function(t,e){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Ih(t,e)},t.EdgesHelper=function(t,e){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new ba(new Do(t.geometry),new ya({color:void 0!==e?e:16777215}))},t.WireframeHelper=function(t,e){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new ba(new La(t.geometry),new ya({color:void 0!==e?e:16777215}))},t.XHRLoader=function(t){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new ys(t)},t.BinaryTextureLoader=function(t){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new ws(t)},t.GeometryUtils=Hh,t.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(t,e){console.warn("THREE.Projector: .projectVector() is now vector.project()."),t.project(e)},this.unprojectVector=function(t,e){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),t.unproject(e)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}},t.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been removed")},t.JSONLoader=function(){console.error("THREE.JSONLoader has been removed.")},t.SceneUtils=Vh,t.LensFlare=function(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")},Object.defineProperty(t,"__esModule",{value:!0})});
var Detector={canvas:!!window.CanvasRenderingContext2D,webgl:(function(){try{var canvas=document.createElement('canvas');return!!(window.WebGLRenderingContext&&(canvas.getContext('webgl')||canvas.getContext('experimental-webgl')));}catch(e){return false;}})(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var element=document.createElement('div');element.id='webgl-error-message';element.style.fontFamily='monospace';element.style.fontSize='13px';element.style.fontWeight='normal';element.style.textAlign='center';element.style.background='#fff';element.style.color='#000';element.style.padding='1.5em';element.style.width='400px';element.style.margin='5em auto 0';if(!this.webgl){element.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join('\n'):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join('\n');}
return element;},addGetWebGLMessage:function(parameters){var parent,id,element;parameters=parameters||{};parent=parameters.parent!==undefined?parameters.parent:document.body;id=parameters.id!==undefined?parameters.id:'oldie';element=Detector.getWebGLErrorMessage();element.id=id;parent.appendChild(element);}};if(typeof module==='object'){module.exports=Detector;};
THREE3DP.ShaderLib['mirror']={uniforms:{"mirrorColor":{value:new THREE3DP.Color(0x7F7F7F)},"mirrorSampler":{value:null},"textureMatrix":{value:new THREE3DP.Matrix4()}},vertexShader:["uniform mat4 textureMatrix;","varying vec4 mirrorCoord;","void main() {","vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","mirrorCoord = textureMatrix * worldPosition;","gl_Position = projectionMatrix * mvPosition;","}"].join("\n"),fragmentShader:["uniform vec3 mirrorColor;","uniform sampler2D mirrorSampler;","varying vec4 mirrorCoord;","float blendOverlay(float base, float blend) {","return( base < 0.5 ? ( 2.0 * base * blend ) : (1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );","}","void main() {","vec4 color = texture2DProj(mirrorSampler, mirrorCoord);","color = vec4(blendOverlay(mirrorColor.r, color.r), blendOverlay(mirrorColor.g, color.g), blendOverlay(mirrorColor.b, color.b), 1.0);","gl_FragColor = color;","}"].join("\n")};THREE3DP.Mirror=function(renderer,camera,options){THREE3DP.Object3D.call(this);this.name='mirror_'+this.id;options=options||{};this.matrixNeedsUpdate=true;var width=options.textureWidth!==undefined?options.textureWidth:512;var height=options.textureHeight!==undefined?options.textureHeight:512;this.clipBias=options.clipBias!==undefined?options.clipBias:0.0;var mirrorColor=options.color!==undefined?new THREE3DP.Color(options.color):new THREE3DP.Color(0x7F7F7F);this.renderer=renderer;this.mirrorPlane=new THREE3DP.Plane();this.normal=new THREE3DP.Vector3(0,0,1);this.mirrorWorldPosition=new THREE3DP.Vector3();this.cameraWorldPosition=new THREE3DP.Vector3();this.rotationMatrix=new THREE3DP.Matrix4();this.lookAtPosition=new THREE3DP.Vector3(0,0,-1);this.clipPlane=new THREE3DP.Vector4();var debugMode=options.debugMode!==undefined?options.debugMode:false;if(debugMode){var arrow=new THREE3DP.ArrowHelper(new THREE3DP.Vector3(0,0,1),new THREE3DP.Vector3(0,0,0),10,0xffff80);var planeGeometry=new THREE3DP.Geometry();planeGeometry.vertices.push(new THREE3DP.Vector3(-10,-10,0));planeGeometry.vertices.push(new THREE3DP.Vector3(10,-10,0));planeGeometry.vertices.push(new THREE3DP.Vector3(10,10,0));planeGeometry.vertices.push(new THREE3DP.Vector3(-10,10,0));planeGeometry.vertices.push(planeGeometry.vertices[0]);var plane=new THREE3DP.Line(planeGeometry,new THREE3DP.LineBasicMaterial({color:0xffff80}));this.add(arrow);this.add(plane);}
if(camera instanceof THREE3DP.PerspectiveCamera){this.camera=camera;}else{this.camera=new THREE3DP.PerspectiveCamera();console.log(this.name+': camera is not a Perspective Camera!');}
this.textureMatrix=new THREE3DP.Matrix4();this.mirrorCamera=this.camera.clone();this.mirrorCamera.matrixAutoUpdate=true;var parameters={minFilter:THREE3DP.LinearFilter,magFilter:THREE3DP.LinearFilter,format:THREE3DP.RGBFormat,stencilBuffer:false};this.renderTarget=new THREE3DP.WebGLRenderTarget(width,height,parameters);this.renderTarget2=new THREE3DP.WebGLRenderTarget(width,height,parameters);var mirrorShader=THREE3DP.ShaderLib["mirror"];var mirrorUniforms=THREE3DP.UniformsUtils.clone(mirrorShader.uniforms);this.material=new THREE3DP.ShaderMaterial({fragmentShader:mirrorShader.fragmentShader,vertexShader:mirrorShader.vertexShader,uniforms:mirrorUniforms});this.material.uniforms.mirrorSampler.value=this.renderTarget.texture;this.material.uniforms.mirrorColor.value=mirrorColor;this.material.uniforms.textureMatrix.value=this.textureMatrix;if(!THREE3DP.Math.isPowerOfTwo(width)||!THREE3DP.Math.isPowerOfTwo(height)){this.renderTarget.texture.generateMipmaps=false;this.renderTarget2.texture.generateMipmaps=false;}
this.updateTextureMatrix();this.render();};THREE3DP.Mirror.prototype=Object.create(THREE3DP.Object3D.prototype);THREE3DP.Mirror.prototype.constructor=THREE3DP.Mirror;THREE3DP.Mirror.prototype.renderWithMirror=function(otherMirror){this.updateTextureMatrix();this.matrixNeedsUpdate=false;var tempCamera=otherMirror.camera;otherMirror.camera=this.mirrorCamera;otherMirror.renderTemp();otherMirror.material.uniforms.mirrorSampler.value=otherMirror.renderTarget2.texture;this.render();this.matrixNeedsUpdate=true;otherMirror.material.uniforms.mirrorSampler.value=otherMirror.renderTarget.texture;otherMirror.camera=tempCamera;otherMirror.updateTextureMatrix();};THREE3DP.Mirror.prototype.updateTextureMatrix=function(){this.updateMatrixWorld();this.camera.updateMatrixWorld();this.mirrorWorldPosition.setFromMatrixPosition(this.matrixWorld);this.cameraWorldPosition.setFromMatrixPosition(this.camera.matrixWorld);this.rotationMatrix.extractRotation(this.matrixWorld);this.normal.set(0,0,1);this.normal.applyMatrix4(this.rotationMatrix);var view=this.mirrorWorldPosition.clone().sub(this.cameraWorldPosition);view.reflect(this.normal).negate();view.add(this.mirrorWorldPosition);this.rotationMatrix.extractRotation(this.camera.matrixWorld);this.lookAtPosition.set(0,0,-1);this.lookAtPosition.applyMatrix4(this.rotationMatrix);this.lookAtPosition.add(this.cameraWorldPosition);var target=this.mirrorWorldPosition.clone().sub(this.lookAtPosition);target.reflect(this.normal).negate();target.add(this.mirrorWorldPosition);this.up.set(0,-1,0);this.up.applyMatrix4(this.rotationMatrix);this.up.reflect(this.normal).negate();this.mirrorCamera.position.copy(view);this.mirrorCamera.up=this.up;this.mirrorCamera.lookAt(target);this.mirrorCamera.updateProjectionMatrix();this.mirrorCamera.updateMatrixWorld();this.mirrorCamera.matrixWorldInverse.getInverse(this.mirrorCamera.matrixWorld);this.textureMatrix.set(0.5,0.0,0.0,0.5,0.0,0.5,0.0,0.5,0.0,0.0,0.5,0.5,0.0,0.0,0.0,1.0);this.textureMatrix.multiply(this.mirrorCamera.projectionMatrix);this.textureMatrix.multiply(this.mirrorCamera.matrixWorldInverse);this.mirrorPlane.setFromNormalAndCoplanarPoint(this.normal,this.mirrorWorldPosition);this.mirrorPlane.applyMatrix4(this.mirrorCamera.matrixWorldInverse);this.clipPlane.set(this.mirrorPlane.normal.x,this.mirrorPlane.normal.y,this.mirrorPlane.normal.z,this.mirrorPlane.constant);var q=new THREE3DP.Vector4();var projectionMatrix=this.mirrorCamera.projectionMatrix;q.x=(Math.sign(this.clipPlane.x)+projectionMatrix.elements[8])/projectionMatrix.elements[0];q.y=(Math.sign(this.clipPlane.y)+projectionMatrix.elements[9])/projectionMatrix.elements[5];q.z=-1.0;q.w=(1.0+projectionMatrix.elements[10])/projectionMatrix.elements[14];var c=new THREE3DP.Vector4();c=this.clipPlane.multiplyScalar(2.0/this.clipPlane.dot(q));projectionMatrix.elements[2]=c.x;projectionMatrix.elements[6]=c.y;projectionMatrix.elements[10]=c.z+1.0-this.clipBias;projectionMatrix.elements[14]=c.w;};THREE3DP.Mirror.prototype.render=function(){if(this.matrixNeedsUpdate)this.updateTextureMatrix();this.matrixNeedsUpdate=true;var scene=this;while(scene.parent!==null){scene=scene.parent;}
if(scene!==undefined&&scene instanceof THREE3DP.Scene){var visible=this.material.visible;this.material.visible=false;this.renderer.render(scene,this.mirrorCamera,this.renderTarget,true);this.material.visible=visible;}};THREE3DP.Mirror.prototype.renderTemp=function(){if(this.matrixNeedsUpdate)this.updateTextureMatrix();this.matrixNeedsUpdate=true;var scene=this;while(scene.parent!==null){scene=scene.parent;}
if(scene!==undefined&&scene instanceof THREE3DP.Scene){this.renderer.render(scene,this.mirrorCamera,this.renderTarget2,true);}};
THREE3DP.Reflector=function(geometry,options){THREE3DP.Mesh.call(this,geometry);this.type='Reflector';var scope=this;options=options||{};var color=(options.color!==undefined)?new THREE3DP.Color(options.color):new THREE3DP.Color(0x7F7F7F);var textureWidth=options.textureWidth||512;var textureHeight=options.textureHeight||512;var clipBias=options.clipBias||0;var shader=options.shader||THREE3DP.Reflector.ReflectorShader;var recursion=options.recursion!==undefined?options.recursion:0;var reflectorPlane=new THREE3DP.Plane();var normal=new THREE3DP.Vector3();var reflectorWorldPosition=new THREE3DP.Vector3();var cameraWorldPosition=new THREE3DP.Vector3();var rotationMatrix=new THREE3DP.Matrix4();var lookAtPosition=new THREE3DP.Vector3(0,0,-1);var clipPlane=new THREE3DP.Vector4();var viewport=new THREE3DP.Vector4();var view=new THREE3DP.Vector3();var target=new THREE3DP.Vector3();var q=new THREE3DP.Vector4();var textureMatrix=new THREE3DP.Matrix4();var virtualCamera=new THREE3DP.PerspectiveCamera();var parameters={minFilter:THREE3DP.LinearFilter,magFilter:THREE3DP.LinearFilter,format:THREE3DP.RGBFormat,stencilBuffer:false};var renderTarget=new THREE3DP.WebGLRenderTarget(textureWidth,textureHeight,parameters);if(!THREE3DP.Math.isPowerOfTwo(textureWidth)||!THREE3DP.Math.isPowerOfTwo(textureHeight)){renderTarget.texture.generateMipmaps=false;}
var material=new THREE3DP.ShaderMaterial({uniforms:THREE3DP.UniformsUtils.clone(shader.uniforms),fragmentShader:shader.fragmentShader,vertexShader:shader.vertexShader});material.uniforms["tDiffuse"].value=renderTarget.texture;material.uniforms["color"].value=color;material.uniforms["textureMatrix"].value=textureMatrix;this.material=material;this.onBeforeRender=function(renderer,scene,camera){if('recursion'in camera.userData){if(camera.userData.recursion===recursion)return;camera.userData.recursion++;}
reflectorWorldPosition.setFromMatrixPosition(scope.matrixWorld);cameraWorldPosition.setFromMatrixPosition(camera.matrixWorld);rotationMatrix.extractRotation(scope.matrixWorld);normal.set(0,0,1);normal.applyMatrix4(rotationMatrix);view.subVectors(reflectorWorldPosition,cameraWorldPosition);if(view.dot(normal)>0)return;view.reflect(normal).negate();view.add(reflectorWorldPosition);rotationMatrix.extractRotation(camera.matrixWorld);lookAtPosition.set(0,0,-1);lookAtPosition.applyMatrix4(rotationMatrix);lookAtPosition.add(cameraWorldPosition);target.subVectors(reflectorWorldPosition,lookAtPosition);target.reflect(normal).negate();target.add(reflectorWorldPosition);virtualCamera.position.copy(view);virtualCamera.up.set(0,1,0);virtualCamera.up.applyMatrix4(rotationMatrix);virtualCamera.up.reflect(normal);virtualCamera.lookAt(target);virtualCamera.far=camera.far;virtualCamera.updateMatrixWorld();virtualCamera.projectionMatrix.copy(camera.projectionMatrix);virtualCamera.userData.recursion=0;textureMatrix.set(0.5,0.0,0.0,0.5,0.0,0.5,0.0,0.5,0.0,0.0,0.5,0.5,0.0,0.0,0.0,1.0);textureMatrix.multiply(virtualCamera.projectionMatrix);textureMatrix.multiply(virtualCamera.matrixWorldInverse);textureMatrix.multiply(scope.matrixWorld);reflectorPlane.setFromNormalAndCoplanarPoint(normal,reflectorWorldPosition);reflectorPlane.applyMatrix4(virtualCamera.matrixWorldInverse);clipPlane.set(reflectorPlane.normal.x,reflectorPlane.normal.y,reflectorPlane.normal.z,reflectorPlane.constant);var projectionMatrix=virtualCamera.projectionMatrix;q.x=(Math.sign(clipPlane.x)+projectionMatrix.elements[8])/projectionMatrix.elements[0];q.y=(Math.sign(clipPlane.y)+projectionMatrix.elements[9])/projectionMatrix.elements[5];q.z=-1.0;q.w=(1.0+projectionMatrix.elements[10])/projectionMatrix.elements[14];clipPlane.multiplyScalar(2.0/clipPlane.dot(q));projectionMatrix.elements[2]=clipPlane.x;projectionMatrix.elements[6]=clipPlane.y;projectionMatrix.elements[10]=clipPlane.z+1.0-clipBias;projectionMatrix.elements[14]=clipPlane.w;scope.visible=false;var currentRenderTarget=renderer.getRenderTarget();var currentVrEnabled=renderer.vr.enabled;var currentShadowAutoUpdate=renderer.shadowMap.autoUpdate;renderer.vr.enabled=false;renderer.shadowMap.autoUpdate=false;renderer.render(scene,virtualCamera,renderTarget,true);renderer.vr.enabled=currentVrEnabled;renderer.shadowMap.autoUpdate=currentShadowAutoUpdate;renderer.setRenderTarget(currentRenderTarget);var bounds=camera.bounds;if(bounds!==undefined){var size=renderer.getSize();var pixelRatio=renderer.getPixelRatio();viewport.x=bounds.x*size.width*pixelRatio;viewport.y=bounds.y*size.height*pixelRatio;viewport.z=bounds.z*size.width*pixelRatio;viewport.w=bounds.w*size.height*pixelRatio;renderer.state.viewport(viewport);}
scope.visible=true;};this.getRenderTarget=function(){return renderTarget;};};THREE3DP.Reflector.prototype=Object.create(THREE3DP.Mesh.prototype);THREE3DP.Reflector.prototype.constructor=THREE3DP.Reflector;THREE3DP.Reflector.ReflectorShader={uniforms:{'color':{type:'c',value:null},'tDiffuse':{type:'t',value:null},'textureMatrix':{type:'m4',value:null}},vertexShader:['uniform mat4 textureMatrix;','varying vec4 vUv;','void main() {',' vUv = textureMatrix * vec4( position, 1.0 );',' gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );','}'].join('\n'),fragmentShader:['uniform vec3 color;','uniform sampler2D tDiffuse;','varying vec4 vUv;','float blendOverlay( float base, float blend ) {',' return( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );','}','vec3 blendOverlay( vec3 base, vec3 blend ) {',' return vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );','}','void main() {',' vec4 base = texture2DProj( tDiffuse, vUv );',' gl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );','}'].join('\n')};
THREE3DP.OrbitControls=function(object,domElement){this.object=object;this.domElement=(domElement!==undefined)?domElement:document;this.enabled=true;this.target=new THREE3DP.Vector3();this.minDistance=0;this.maxDistance=Infinity;this.minZoom=0;this.maxZoom=Infinity;this.minPolarAngle=0;this.maxPolarAngle=Math.PI;this.minAzimuthAngle=-Infinity;this.maxAzimuthAngle=Infinity;this.enableDamping=false;this.dampingFactor=0.25;this.enableZoom=true;this.zoomSpeed=1.0;this.enableRotate=true;this.rotateSpeed=1.0;this.enablePan=true;this.keyPanSpeed=7.0;this.autoRotate=false;this.autoRotateSpeed=2.0;this.enableKeys=true;this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40};this.mouseButtons={ORBIT:THREE3DP.MOUSE.LEFT,ZOOM:THREE3DP.MOUSE.MIDDLE,PAN:THREE3DP.MOUSE.RIGHT};this.target0=this.target.clone();this.position0=this.object.position.clone();this.zoom0=this.object.zoom;this.getPolarAngle=function(){return spherical.phi;};this.getAzimuthalAngle=function(){return spherical.theta;};this.reset=function(){scope.target.copy(scope.target0);scope.object.position.copy(scope.position0);scope.object.zoom=scope.zoom0;scope.object.updateProjectionMatrix();scope.dispatchEvent(changeEvent);scope.update();state=STATE.NONE;};this.update=function(){var offset=new THREE3DP.Vector3();var quat=new THREE3DP.Quaternion().setFromUnitVectors(object.up,new THREE3DP.Vector3(0,1,0));var quatInverse=quat.clone().inverse();var lastPosition=new THREE3DP.Vector3();var lastQuaternion=new THREE3DP.Quaternion();return function update(){var position=scope.object.position;offset.copy(position).sub(scope.target);offset.applyQuaternion(quat);spherical.setFromVector3(offset);if(scope.autoRotate&&state===STATE.NONE){rotateLeft(getAutoRotationAngle());}
spherical.theta+=sphericalDelta.theta;spherical.phi+=sphericalDelta.phi;spherical.theta=Math.max(scope.minAzimuthAngle,Math.min(scope.maxAzimuthAngle,spherical.theta));spherical.phi=Math.max(scope.minPolarAngle,Math.min(scope.maxPolarAngle,spherical.phi));spherical.makeSafe();spherical.radius*=scale;spherical.radius=Math.max(scope.minDistance,Math.min(scope.maxDistance,spherical.radius));scope.target.add(panOffset);offset.setFromSpherical(spherical);offset.applyQuaternion(quatInverse);position.copy(scope.target).add(offset);scope.object.lookAt(scope.target);if(scope.enableDamping===true){sphericalDelta.theta*=(1-scope.dampingFactor);sphericalDelta.phi*=(1-scope.dampingFactor);}else{sphericalDelta.set(0,0,0);}
scale=1;panOffset.set(0,0,0);if(zoomChanged||lastPosition.distanceToSquared(scope.object.position)>EPS||8*(1-lastQuaternion.dot(scope.object.quaternion))>EPS){scope.dispatchEvent(changeEvent);lastPosition.copy(scope.object.position);lastQuaternion.copy(scope.object.quaternion);zoomChanged=false;return true;}
return false;};}();this.dispose=function(){scope.domElement.removeEventListener('contextmenu',onContextMenu,false);scope.domElement.removeEventListener('mousedown',onMouseDown,false);scope.domElement.removeEventListener('wheel',onMouseWheel,false);scope.domElement.removeEventListener('touchstart',onTouchStart,false);scope.domElement.removeEventListener('touchend',onTouchEnd,false);scope.domElement.removeEventListener('touchmove',onTouchMove,false);document.removeEventListener('mousemove',onMouseMove,false);document.removeEventListener('mouseup',onMouseUp,false);window.removeEventListener('keydown',onKeyDown,false);};var scope=this;var changeEvent={type:'change'};var startEvent={type:'start'};var endEvent={type:'end'};var STATE={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5};var state=STATE.NONE;var EPS=0.000001;var spherical=new THREE3DP.Spherical();var sphericalDelta=new THREE3DP.Spherical();var scale=1;var panOffset=new THREE3DP.Vector3();var zoomChanged=false;var rotateStart=new THREE3DP.Vector2();var rotateEnd=new THREE3DP.Vector2();var rotateDelta=new THREE3DP.Vector2();var panStart=new THREE3DP.Vector2();var panEnd=new THREE3DP.Vector2();var panDelta=new THREE3DP.Vector2();var dollyStart=new THREE3DP.Vector2();var dollyEnd=new THREE3DP.Vector2();var dollyDelta=new THREE3DP.Vector2();function getAutoRotationAngle(){return 2*Math.PI/60/60*scope.autoRotateSpeed;}
function getZoomScale(){return Math.pow(0.95,scope.zoomSpeed);}
function rotateLeft(angle){sphericalDelta.theta-=angle;}
function rotateUp(angle){sphericalDelta.phi-=angle;}
var panLeft=function(){var v=new THREE3DP.Vector3();return function panLeft(distance,objectMatrix){v.setFromMatrixColumn(objectMatrix,0);v.multiplyScalar(-distance);panOffset.add(v);};}();var panUp=function(){var v=new THREE3DP.Vector3();return function panUp(distance,objectMatrix){v.setFromMatrixColumn(objectMatrix,1);v.multiplyScalar(distance);panOffset.add(v);};}();var pan=function(){var offset=new THREE3DP.Vector3();return function pan(deltaX,deltaY){var element=scope.domElement===document?scope.domElement.body:scope.domElement;if(scope.object instanceof THREE3DP.PerspectiveCamera){var position=scope.object.position;offset.copy(position).sub(scope.target);var targetDistance=offset.length();targetDistance*=Math.tan((scope.object.fov/2)*Math.PI/180.0);panLeft(2*deltaX*targetDistance/element.clientHeight,scope.object.matrix);panUp(2*deltaY*targetDistance/element.clientHeight,scope.object.matrix);}else if(scope.object instanceof THREE3DP.OrthographicCamera){panLeft(deltaX*(scope.object.right-scope.object.left)/scope.object.zoom/element.clientWidth,scope.object.matrix);panUp(deltaY*(scope.object.top-scope.object.bottom)/scope.object.zoom/element.clientHeight,scope.object.matrix);}else{console.warn('WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.');scope.enablePan=false;}};}();function dollyIn(dollyScale){if(scope.object instanceof THREE3DP.PerspectiveCamera){scale/=dollyScale;}else if(scope.object instanceof THREE3DP.OrthographicCamera){scope.object.zoom=Math.max(scope.minZoom,Math.min(scope.maxZoom,scope.object.zoom*dollyScale));scope.object.updateProjectionMatrix();zoomChanged=true;}else{console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');scope.enableZoom=false;}}
function dollyOut(dollyScale){if(scope.object instanceof THREE3DP.PerspectiveCamera){scale*=dollyScale;}else if(scope.object instanceof THREE3DP.OrthographicCamera){scope.object.zoom=Math.max(scope.minZoom,Math.min(scope.maxZoom,scope.object.zoom/dollyScale));scope.object.updateProjectionMatrix();zoomChanged=true;}else{console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');scope.enableZoom=false;}}
function handleMouseDownRotate(event){rotateStart.set(event.clientX,event.clientY);}
function handleMouseDownDolly(event){dollyStart.set(event.clientX,event.clientY);}
function handleMouseDownPan(event){panStart.set(event.clientX,event.clientY);}
function handleMouseMoveRotate(event){rotateEnd.set(event.clientX,event.clientY);rotateDelta.subVectors(rotateEnd,rotateStart);var element=scope.domElement===document?scope.domElement.body:scope.domElement;rotateLeft(2*Math.PI*rotateDelta.x/element.clientWidth*scope.rotateSpeed);rotateUp(2*Math.PI*rotateDelta.y/element.clientHeight*scope.rotateSpeed);rotateStart.copy(rotateEnd);scope.update();}
function handleMouseMoveDolly(event){dollyEnd.set(event.clientX,event.clientY);dollyDelta.subVectors(dollyEnd,dollyStart);if(dollyDelta.y>0){dollyIn(getZoomScale());}else if(dollyDelta.y<0){dollyOut(getZoomScale());}
dollyStart.copy(dollyEnd);scope.update();}
function handleMouseMovePan(event){panEnd.set(event.clientX,event.clientY);panDelta.subVectors(panEnd,panStart);pan(panDelta.x,panDelta.y);panStart.copy(panEnd);scope.update();}
function handleMouseUp(event){}
function handleMouseWheel(event){if(event.deltaY<0){dollyOut(getZoomScale());}else if(event.deltaY>0){dollyIn(getZoomScale());}
scope.update();}
function handleKeyDown(event){switch(event.keyCode){case scope.keys.UP:pan(0,scope.keyPanSpeed);scope.update();break;case scope.keys.BOTTOM:pan(0,-scope.keyPanSpeed);scope.update();break;case scope.keys.LEFT:pan(scope.keyPanSpeed,0);scope.update();break;case scope.keys.RIGHT:pan(-scope.keyPanSpeed,0);scope.update();break;}}
function handleTouchStartRotate(event){rotateStart.set(event.touches[0].pageX,event.touches[0].pageY);}
function handleTouchStartDolly(event){var dx=event.touches[0].pageX-event.touches[1].pageX;var dy=event.touches[0].pageY-event.touches[1].pageY;var distance=Math.sqrt(dx*dx+dy*dy);dollyStart.set(0,distance);}
function handleTouchStartPan(event){panStart.set(event.touches[0].pageX,event.touches[0].pageY);}
function handleTouchMoveRotate(event){rotateEnd.set(event.touches[0].pageX,event.touches[0].pageY);rotateDelta.subVectors(rotateEnd,rotateStart);var element=scope.domElement===document?scope.domElement.body:scope.domElement;rotateLeft(2*Math.PI*rotateDelta.x/element.clientWidth*scope.rotateSpeed);rotateUp(2*Math.PI*rotateDelta.y/element.clientHeight*scope.rotateSpeed);rotateStart.copy(rotateEnd);scope.update();}
function handleTouchMoveDolly(event){var dx=event.touches[0].pageX-event.touches[1].pageX;var dy=event.touches[0].pageY-event.touches[1].pageY;var distance=Math.sqrt(dx*dx+dy*dy);dollyEnd.set(0,distance);dollyDelta.subVectors(dollyEnd,dollyStart);if(dollyDelta.y>0){dollyOut(getZoomScale());}else if(dollyDelta.y<0){dollyIn(getZoomScale());}
dollyStart.copy(dollyEnd);scope.update();}
function handleTouchMovePan(event){panEnd.set(event.touches[0].pageX,event.touches[0].pageY);panDelta.subVectors(panEnd,panStart);pan(panDelta.x,panDelta.y);panStart.copy(panEnd);scope.update();}
function handleTouchEnd(event){}
function onMouseDown(event){if(scope.enabled===false)return;event.preventDefault();if(event.button===scope.mouseButtons.ORBIT){if(scope.enableRotate===false)return;handleMouseDownRotate(event);state=STATE.ROTATE;}else if(event.button===scope.mouseButtons.ZOOM){if(scope.enableZoom===false)return;handleMouseDownDolly(event);state=STATE.DOLLY;}else if(event.button===scope.mouseButtons.PAN){if(scope.enablePan===false)return;handleMouseDownPan(event);state=STATE.PAN;}
if(state!==STATE.NONE){document.addEventListener('mousemove',onMouseMove,false);document.addEventListener('mouseup',onMouseUp,false);scope.dispatchEvent(startEvent);}}
function onMouseMove(event){if(scope.enabled===false)return;event.preventDefault();if(state===STATE.ROTATE){if(scope.enableRotate===false)return;handleMouseMoveRotate(event);}else if(state===STATE.DOLLY){if(scope.enableZoom===false)return;handleMouseMoveDolly(event);}else if(state===STATE.PAN){if(scope.enablePan===false)return;handleMouseMovePan(event);}}
function onMouseUp(event){if(scope.enabled===false)return;handleMouseUp(event);document.removeEventListener('mousemove',onMouseMove,false);document.removeEventListener('mouseup',onMouseUp,false);scope.dispatchEvent(endEvent);state=STATE.NONE;}
function onMouseWheel(event){if(scope.enabled===false||scope.enableZoom===false||(state!==STATE.NONE&&state!==STATE.ROTATE))return;event.preventDefault();event.stopPropagation();handleMouseWheel(event);scope.dispatchEvent(startEvent);scope.dispatchEvent(endEvent);}
function onKeyDown(event){if(scope.enabled===false||scope.enableKeys===false||scope.enablePan===false)return;handleKeyDown(event);}
function onTouchStart(event){if(scope.enabled===false)return;switch(event.touches.length){case 1:if(scope.enableRotate===false)return;handleTouchStartRotate(event);state=STATE.TOUCH_ROTATE;break;case 2:if(scope.enableZoom===false)return;handleTouchStartDolly(event);state=STATE.TOUCH_DOLLY;break;case 3:if(scope.enablePan===false)return;handleTouchStartPan(event);state=STATE.TOUCH_PAN;break;default:state=STATE.NONE;}
if(state!==STATE.NONE){scope.dispatchEvent(startEvent);}}
function onTouchMove(event){if(scope.enabled===false)return;event.preventDefault();event.stopPropagation();switch(event.touches.length){case 1:if(scope.enableRotate===false)return;if(state!==STATE.TOUCH_ROTATE)return;handleTouchMoveRotate(event);break;case 2:if(scope.enableZoom===false)return;if(state!==STATE.TOUCH_DOLLY)return;handleTouchMoveDolly(event);break;case 3:if(scope.enablePan===false)return;if(state!==STATE.TOUCH_PAN)return;handleTouchMovePan(event);break;default:state=STATE.NONE;}}
function onTouchEnd(event){if(scope.enabled===false)return;handleTouchEnd(event);scope.dispatchEvent(endEvent);state=STATE.NONE;}
function onContextMenu(event){event.preventDefault();}
scope.domElement.addEventListener('contextmenu',onContextMenu,false);scope.domElement.addEventListener('mousedown',onMouseDown,false);scope.domElement.addEventListener('wheel',onMouseWheel,false);scope.domElement.addEventListener('touchstart',onTouchStart,false);scope.domElement.addEventListener('touchend',onTouchEnd,false);scope.domElement.addEventListener('touchmove',onTouchMove,false);window.addEventListener('keydown',onKeyDown,false);this.update();};THREE3DP.OrbitControls.prototype=Object.create(THREE3DP.EventDispatcher.prototype);THREE3DP.OrbitControls.prototype.constructor=THREE3DP.OrbitControls;Object.defineProperties(THREE3DP.OrbitControls.prototype,{center:{get:function(){console.warn('THREE3DP.OrbitControls: .center has been renamed to .target');return this.target;}},noZoom:{get:function(){console.warn('THREE3DP.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.');return!this.enableZoom;},set:function(value){console.warn('THREE3DP.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.');this.enableZoom=!value;}},noRotate:{get:function(){console.warn('THREE3DP.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.');return!this.enableRotate;},set:function(value){console.warn('THREE3DP.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.');this.enableRotate=!value;}},noPan:{get:function(){console.warn('THREE3DP.OrbitControls: .noPan has been deprecated. Use .enablePan instead.');return!this.enablePan;},set:function(value){console.warn('THREE3DP.OrbitControls: .noPan has been deprecated. Use .enablePan instead.');this.enablePan=!value;}},noKeys:{get:function(){console.warn('THREE3DP.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.');return!this.enableKeys;},set:function(value){console.warn('THREE3DP.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.');this.enableKeys=!value;}},staticMoving:{get:function(){console.warn('THREE3DP.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.');return!this.enableDamping;},set:function(value){console.warn('THREE3DP.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.');this.enableDamping=!value;}},dynamicDampingFactor:{get:function(){console.warn('THREE3DP.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.');return this.dampingFactor;},set:function(value){console.warn('THREE3DP.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.');this.dampingFactor=value;}}});
THREE3DP.SpriteCanvasMaterial=function(parameters){THREE3DP.Material.call(this);this.type='SpriteCanvasMaterial';this.color=new THREE3DP.Color(0xffffff);this.program=function(context,color){};this.setValues(parameters);};THREE3DP.SpriteCanvasMaterial.prototype=Object.create(THREE3DP.Material.prototype);THREE3DP.SpriteCanvasMaterial.prototype.constructor=THREE3DP.SpriteCanvasMaterial;THREE3DP.SpriteCanvasMaterial.prototype.clone=function(){var material=new THREE3DP.SpriteCanvasMaterial();material.copy(this);material.color.copy(this.color);material.program=this.program;return material;};THREE3DP.CanvasRenderer=function(parameters){console.log('THREE3DP.CanvasRenderer',THREE3DP.REVISION);parameters=parameters||{};var _this=this,_renderData,_elements,_lights,_projector=new THREE3DP.Projector(),_canvas=parameters.canvas!==undefined?parameters.canvas:document.createElement('canvas'),_canvasWidth=_canvas.width,_canvasHeight=_canvas.height,_canvasWidthHalf=Math.floor(_canvasWidth/2),_canvasHeightHalf=Math.floor(_canvasHeight/2),_viewportX=0,_viewportY=0,_viewportWidth=_canvasWidth,_viewportHeight=_canvasHeight,_pixelRatio=1,_context=_canvas.getContext('2d',{alpha:parameters.alpha===true}),_clearColor=new THREE3DP.Color(0x000000),_clearAlpha=parameters.alpha===true?0:1,_contextGlobalAlpha=1,_contextGlobalCompositeOperation=0,_contextStrokeStyle=null,_contextFillStyle=null,_contextLineWidth=null,_contextLineCap=null,_contextLineJoin=null,_contextLineDash=[],_camera,_v1,_v2,_v3,_v4,_v5=new THREE3DP.RenderableVertex(),_v6=new THREE3DP.RenderableVertex(),_v1x,_v1y,_v2x,_v2y,_v3x,_v3y,_v4x,_v4y,_v5x,_v5y,_v6x,_v6y,_color=new THREE3DP.Color(),_color1=new THREE3DP.Color(),_color2=new THREE3DP.Color(),_color3=new THREE3DP.Color(),_color4=new THREE3DP.Color(),_diffuseColor=new THREE3DP.Color(),_emissiveColor=new THREE3DP.Color(),_lightColor=new THREE3DP.Color(),_patterns={},_image,_uvs,_uv1x,_uv1y,_uv2x,_uv2y,_uv3x,_uv3y,_clipBox=new THREE3DP.Box2(),_clearBox=new THREE3DP.Box2(),_elemBox=new THREE3DP.Box2(),_ambientLight=new THREE3DP.Color(),_directionalLights=new THREE3DP.Color(),_pointLights=new THREE3DP.Color(),_vector3=new THREE3DP.Vector3(),_centroid=new THREE3DP.Vector3(),_normal=new THREE3DP.Vector3(),_normalViewMatrix=new THREE3DP.Matrix3();if(_context.setLineDash===undefined){_context.setLineDash=function(){};}
this.domElement=_canvas;this.autoClear=true;this.sortObjects=true;this.sortElements=true;this.info={render:{vertices:0,faces:0}};this.supportsVertexTextures=function(){};this.setFaceCulling=function(){};this.getContext=function(){return _context;};this.getContextAttributes=function(){return _context.getContextAttributes();};this.getPixelRatio=function(){return _pixelRatio;};this.setPixelRatio=function(value){if(value!==undefined)_pixelRatio=value;};this.setSize=function(width,height,updateStyle){_canvasWidth=width*_pixelRatio;_canvasHeight=height*_pixelRatio;_canvas.width=_canvasWidth;_canvas.height=_canvasHeight;_canvasWidthHalf=Math.floor(_canvasWidth/2);_canvasHeightHalf=Math.floor(_canvasHeight/2);if(updateStyle!==false){_canvas.style.width=width+'px';_canvas.style.height=height+'px';}
_clipBox.min.set(-_canvasWidthHalf,-_canvasHeightHalf);_clipBox.max.set(_canvasWidthHalf,_canvasHeightHalf);_clearBox.min.set(-_canvasWidthHalf,-_canvasHeightHalf);_clearBox.max.set(_canvasWidthHalf,_canvasHeightHalf);_contextGlobalAlpha=1;_contextGlobalCompositeOperation=0;_contextStrokeStyle=null;_contextFillStyle=null;_contextLineWidth=null;_contextLineCap=null;_contextLineJoin=null;this.setViewport(0,0,width,height);};this.setViewport=function(x,y,width,height){_viewportX=x*_pixelRatio;_viewportY=y*_pixelRatio;_viewportWidth=width*_pixelRatio;_viewportHeight=height*_pixelRatio;};this.setScissor=function(){};this.setScissorTest=function(){};this.setClearColor=function(color,alpha){_clearColor.set(color);_clearAlpha=alpha!==undefined?alpha:1;_clearBox.min.set(-_canvasWidthHalf,-_canvasHeightHalf);_clearBox.max.set(_canvasWidthHalf,_canvasHeightHalf);};this.setClearColorHex=function(hex,alpha){console.warn('THREE3DP.CanvasRenderer: .setClearColorHex() is being removed. Use .setClearColor() instead.');this.setClearColor(hex,alpha);};this.getClearColor=function(){return _clearColor;};this.getClearAlpha=function(){return _clearAlpha;};this.getMaxAnisotropy=function(){return 0;};this.clear=function(){if(_clearBox.isEmpty()===false){_clearBox.intersect(_clipBox);_clearBox.expandByScalar(2);_clearBox.min.x=_clearBox.min.x+_canvasWidthHalf;_clearBox.min.y=-_clearBox.min.y+_canvasHeightHalf;_clearBox.max.x=_clearBox.max.x+_canvasWidthHalf;_clearBox.max.y=-_clearBox.max.y+_canvasHeightHalf;if(_clearAlpha<1){_context.clearRect(_clearBox.min.x|0,_clearBox.max.y|0,(_clearBox.max.x-_clearBox.min.x)|0,(_clearBox.min.y-_clearBox.max.y)|0);}
if(_clearAlpha>0){setBlending(THREE3DP.NormalBlending);setOpacity(1);setFillStyle('rgba('+Math.floor(_clearColor.r*255)+','+Math.floor(_clearColor.g*255)+','+Math.floor(_clearColor.b*255)+','+_clearAlpha+')');_context.fillRect(_clearBox.min.x|0,_clearBox.max.y|0,(_clearBox.max.x-_clearBox.min.x)|0,(_clearBox.min.y-_clearBox.max.y)|0);}
_clearBox.makeEmpty();}};this.clearColor=function(){};this.clearDepth=function(){};this.clearStencil=function(){};this.render=function(scene,camera){if(camera instanceof THREE3DP.Camera===false){console.error('THREE3DP.CanvasRenderer.render: camera is not an instance of THREE3DP.Camera.');return;}
if(this.autoClear===true)this.clear();_this.info.render.vertices=0;_this.info.render.faces=0;_context.setTransform(_viewportWidth/_canvasWidth,0,0,-_viewportHeight/_canvasHeight,_viewportX,_canvasHeight-_viewportY);_context.translate(_canvasWidthHalf,_canvasHeightHalf);_renderData=_projector.projectScene(scene,camera,this.sortObjects,this.sortElements);_elements=_renderData.elements;_lights=_renderData.lights;_camera=camera;_normalViewMatrix.getNormalMatrix(camera.matrixWorldInverse);calculateLights();for(var e=0,el=_elements.length;e<el;e++){var element=_elements[e];var material=element.material;if(material===undefined||material.opacity===0)continue;_elemBox.makeEmpty();if(element instanceof THREE3DP.RenderableSprite){_v1=element;_v1.x*=_canvasWidthHalf;_v1.y*=_canvasHeightHalf;renderSprite(_v1,element,material);}else if(element instanceof THREE3DP.RenderableLine){_v1=element.v1;_v2=element.v2;_v1.positionScreen.x*=_canvasWidthHalf;_v1.positionScreen.y*=_canvasHeightHalf;_v2.positionScreen.x*=_canvasWidthHalf;_v2.positionScreen.y*=_canvasHeightHalf;_elemBox.setFromPoints([_v1.positionScreen,_v2.positionScreen]);if(_clipBox.intersectsBox(_elemBox)===true){renderLine(_v1,_v2,element,material);}}else if(element instanceof THREE3DP.RenderableFace){_v1=element.v1;_v2=element.v2;_v3=element.v3;if(_v1.positionScreen.z<-1||_v1.positionScreen.z>1)continue;if(_v2.positionScreen.z<-1||_v2.positionScreen.z>1)continue;if(_v3.positionScreen.z<-1||_v3.positionScreen.z>1)continue;_v1.positionScreen.x*=_canvasWidthHalf;_v1.positionScreen.y*=_canvasHeightHalf;_v2.positionScreen.x*=_canvasWidthHalf;_v2.positionScreen.y*=_canvasHeightHalf;_v3.positionScreen.x*=_canvasWidthHalf;_v3.positionScreen.y*=_canvasHeightHalf;if(material.overdraw>0){expand(_v1.positionScreen,_v2.positionScreen,material.overdraw);expand(_v2.positionScreen,_v3.positionScreen,material.overdraw);expand(_v3.positionScreen,_v1.positionScreen,material.overdraw);}
_elemBox.setFromPoints([_v1.positionScreen,_v2.positionScreen,_v3.positionScreen]);if(_clipBox.intersectsBox(_elemBox)===true){renderFace3(_v1,_v2,_v3,0,1,2,element,material);}}
_clearBox.union(_elemBox);}
_context.setTransform(1,0,0,1,0,0);};function calculateLights(){_ambientLight.setRGB(0,0,0);_directionalLights.setRGB(0,0,0);_pointLights.setRGB(0,0,0);for(var l=0,ll=_lights.length;l<ll;l++){var light=_lights[l];var lightColor=light.color;if(light instanceof THREE3DP.AmbientLight){_ambientLight.add(lightColor);}else if(light instanceof THREE3DP.DirectionalLight){_directionalLights.add(lightColor);}else if(light instanceof THREE3DP.PointLight){_pointLights.add(lightColor);}}}
function calculateLight(position,normal,color){for(var l=0,ll=_lights.length;l<ll;l++){var light=_lights[l];_lightColor.copy(light.color);if(light instanceof THREE3DP.DirectionalLight){var lightPosition=_vector3.setFromMatrixPosition(light.matrixWorld).normalize();var amount=normal.dot(lightPosition);if(amount<=0)continue;amount*=light.intensity;color.add(_lightColor.multiplyScalar(amount));}else if(light instanceof THREE3DP.PointLight){var lightPosition=_vector3.setFromMatrixPosition(light.matrixWorld);var amount=normal.dot(_vector3.subVectors(lightPosition,position).normalize());if(amount<=0)continue;amount*=light.distance==0?1:1-Math.min(position.distanceTo(lightPosition)/light.distance,1);if(amount==0)continue;amount*=light.intensity;color.add(_lightColor.multiplyScalar(amount));}}}
function renderSprite(v1,element,material){setOpacity(material.opacity);setBlending(material.blending);var scaleX=element.scale.x*_canvasWidthHalf;var scaleY=element.scale.y*_canvasHeightHalf;var dist=0.5*Math.sqrt(scaleX*scaleX+scaleY*scaleY);_elemBox.min.set(v1.x-dist,v1.y-dist);_elemBox.max.set(v1.x+dist,v1.y+dist);if(material instanceof THREE3DP.SpriteMaterial){var texture=material.map;if(texture!==null){var pattern=_patterns[texture.id];if(pattern===undefined||pattern.version!==texture.version){pattern=textureToPattern(texture);_patterns[texture.id]=pattern;}
if(pattern.canvas!==undefined){setFillStyle(pattern.canvas);var bitmap=texture.image;var ox=bitmap.width*texture.offset.x;var oy=bitmap.height*texture.offset.y;var sx=bitmap.width*texture.repeat.x;var sy=bitmap.height*texture.repeat.y;var cx=scaleX/sx;var cy=scaleY/sy;_context.save();_context.translate(v1.x,v1.y);if(material.rotation!==0)_context.rotate(material.rotation);_context.translate(-scaleX/2,-scaleY/2);_context.scale(cx,cy);_context.translate(-ox,-oy);_context.fillRect(ox,oy,sx,sy);_context.restore();}}else{setFillStyle(material.color.getStyle());_context.save();_context.translate(v1.x,v1.y);if(material.rotation!==0)_context.rotate(material.rotation);_context.scale(scaleX,-scaleY);_context.fillRect(-0.5,-0.5,1,1);_context.restore();}}else if(material instanceof THREE3DP.SpriteCanvasMaterial){setStrokeStyle(material.color.getStyle());setFillStyle(material.color.getStyle());_context.save();_context.translate(v1.x,v1.y);if(material.rotation!==0)_context.rotate(material.rotation);_context.scale(scaleX,scaleY);material.program(_context);_context.restore();}}
function renderLine(v1,v2,element,material){setOpacity(material.opacity);setBlending(material.blending);_context.beginPath();_context.moveTo(v1.positionScreen.x,v1.positionScreen.y);_context.lineTo(v2.positionScreen.x,v2.positionScreen.y);if(material instanceof THREE3DP.LineBasicMaterial){setLineWidth(material.linewidth);setLineCap(material.linecap);setLineJoin(material.linejoin);if(material.vertexColors!==THREE3DP.VertexColors){setStrokeStyle(material.color.getStyle());}else{var colorStyle1=element.vertexColors[0].getStyle();var colorStyle2=element.vertexColors[1].getStyle();if(colorStyle1===colorStyle2){setStrokeStyle(colorStyle1);}else{try{var grad=_context.createLinearGradient(v1.positionScreen.x,v1.positionScreen.y,v2.positionScreen.x,v2.positionScreen.y);grad.addColorStop(0,colorStyle1);grad.addColorStop(1,colorStyle2);}catch(exception){grad=colorStyle1;}
setStrokeStyle(grad);}}
_context.stroke();_elemBox.expandByScalar(material.linewidth*2);}else if(material instanceof THREE3DP.LineDashedMaterial){setLineWidth(material.linewidth);setLineCap(material.linecap);setLineJoin(material.linejoin);setStrokeStyle(material.color.getStyle());setLineDash([material.dashSize,material.gapSize]);_context.stroke();_elemBox.expandByScalar(material.linewidth*2);setLineDash([]);}}
function renderFace3(v1,v2,v3,uv1,uv2,uv3,element,material){_this.info.render.vertices+=3;_this.info.render.faces++;setOpacity(material.opacity);setBlending(material.blending);_v1x=v1.positionScreen.x;_v1y=v1.positionScreen.y;_v2x=v2.positionScreen.x;_v2y=v2.positionScreen.y;_v3x=v3.positionScreen.x;_v3y=v3.positionScreen.y;drawTriangle(_v1x,_v1y,_v2x,_v2y,_v3x,_v3y);if((material instanceof THREE3DP.MeshLambertMaterial||material instanceof THREE3DP.MeshPhongMaterial)&&material.map===null){_diffuseColor.copy(material.color);_emissiveColor.copy(material.emissive);if(material.vertexColors===THREE3DP.FaceColors){_diffuseColor.multiply(element.color);}
_color.copy(_ambientLight);_centroid.copy(v1.positionWorld).add(v2.positionWorld).add(v3.positionWorld).divideScalar(3);calculateLight(_centroid,element.normalModel,_color);_color.multiply(_diffuseColor).add(_emissiveColor);material.wireframe===true?strokePath(_color,material.wireframeLinewidth,material.wireframeLinecap,material.wireframeLinejoin):fillPath(_color);}else if(material instanceof THREE3DP.MeshBasicMaterial||material instanceof THREE3DP.MeshLambertMaterial||material instanceof THREE3DP.MeshPhongMaterial){if(material.map!==null){var mapping=material.map.mapping;if(mapping===THREE3DP.UVMapping){_uvs=element.uvs;patternPath(_v1x,_v1y,_v2x,_v2y,_v3x,_v3y,_uvs[uv1].x,_uvs[uv1].y,_uvs[uv2].x,_uvs[uv2].y,_uvs[uv3].x,_uvs[uv3].y,material.map);}}else if(material.envMap!==null){if(material.envMap.mapping===THREE3DP.SphericalReflectionMapping){_normal.copy(element.vertexNormalsModel[uv1]).applyMatrix3(_normalViewMatrix);_uv1x=0.5*_normal.x+0.5;_uv1y=0.5*_normal.y+0.5;_normal.copy(element.vertexNormalsModel[uv2]).applyMatrix3(_normalViewMatrix);_uv2x=0.5*_normal.x+0.5;_uv2y=0.5*_normal.y+0.5;_normal.copy(element.vertexNormalsModel[uv3]).applyMatrix3(_normalViewMatrix);_uv3x=0.5*_normal.x+0.5;_uv3y=0.5*_normal.y+0.5;patternPath(_v1x,_v1y,_v2x,_v2y,_v3x,_v3y,_uv1x,_uv1y,_uv2x,_uv2y,_uv3x,_uv3y,material.envMap);}}else{_color.copy(material.color);if(material.vertexColors===THREE3DP.FaceColors){_color.multiply(element.color);}
material.wireframe===true?strokePath(_color,material.wireframeLinewidth,material.wireframeLinecap,material.wireframeLinejoin):fillPath(_color);}}else if(material instanceof THREE3DP.MeshNormalMaterial){_normal.copy(element.normalModel).applyMatrix3(_normalViewMatrix);_color.setRGB(_normal.x,_normal.y,_normal.z).multiplyScalar(0.5).addScalar(0.5);material.wireframe===true?strokePath(_color,material.wireframeLinewidth,material.wireframeLinecap,material.wireframeLinejoin):fillPath(_color);}else{_color.setRGB(1,1,1);material.wireframe===true?strokePath(_color,material.wireframeLinewidth,material.wireframeLinecap,material.wireframeLinejoin):fillPath(_color);}}
function drawTriangle(x0,y0,x1,y1,x2,y2){_context.beginPath();_context.moveTo(x0,y0);_context.lineTo(x1,y1);_context.lineTo(x2,y2);_context.closePath();}
function strokePath(color,linewidth,linecap,linejoin){setLineWidth(linewidth);setLineCap(linecap);setLineJoin(linejoin);setStrokeStyle(color.getStyle());_context.stroke();_elemBox.expandByScalar(linewidth*2);}
function fillPath(color){setFillStyle(color.getStyle());_context.fill();}
function textureToPattern(texture){if(texture.version===0||texture instanceof THREE3DP.CompressedTexture||texture instanceof THREE3DP.DataTexture){return{canvas:undefined,version:texture.version};}
var image=texture.image;if(image.complete===false){return{canvas:undefined,version:0};}
var canvas=document.createElement('canvas');canvas.width=image.width;canvas.height=image.height;var context=canvas.getContext('2d');context.setTransform(1,0,0,-1,0,image.height);context.drawImage(image,0,0);var repeatX=texture.wrapS===THREE3DP.RepeatWrapping;var repeatY=texture.wrapT===THREE3DP.RepeatWrapping;var repeat='no-repeat';if(repeatX===true&&repeatY===true){repeat='repeat';}else if(repeatX===true){repeat='repeat-x';}else if(repeatY===true){repeat='repeat-y';}
var pattern=_context.createPattern(canvas,repeat);if(texture.onUpdate)texture.onUpdate(texture);return{canvas:pattern,version:texture.version};}
function patternPath(x0,y0,x1,y1,x2,y2,u0,v0,u1,v1,u2,v2,texture){var pattern=_patterns[texture.id];if(pattern===undefined||pattern.version!==texture.version){pattern=textureToPattern(texture);_patterns[texture.id]=pattern;}
if(pattern.canvas!==undefined){setFillStyle(pattern.canvas);}else{setFillStyle('rgba( 0, 0, 0, 1)');_context.fill();return;}
var a,b,c,d,e,f,det,idet,offsetX=texture.offset.x/texture.repeat.x,offsetY=texture.offset.y/texture.repeat.y,width=texture.image.width*texture.repeat.x,height=texture.image.height*texture.repeat.y;u0=(u0+offsetX)*width;v0=(v0+offsetY)*height;u1=(u1+offsetX)*width;v1=(v1+offsetY)*height;u2=(u2+offsetX)*width;v2=(v2+offsetY)*height;x1-=x0;y1-=y0;x2-=x0;y2-=y0;u1-=u0;v1-=v0;u2-=u0;v2-=v0;det=u1*v2-u2*v1;if(det===0)return;idet=1/det;a=(v2*x1-v1*x2)*idet;b=(v2*y1-v1*y2)*idet;c=(u1*x2-u2*x1)*idet;d=(u1*y2-u2*y1)*idet;e=x0-a*u0-c*v0;f=y0-b*u0-d*v0;_context.save();_context.transform(a,b,c,d,e,f);_context.fill();_context.restore();}
function clipImage(x0,y0,x1,y1,x2,y2,u0,v0,u1,v1,u2,v2,image){var a,b,c,d,e,f,det,idet,width=image.width-1,height=image.height-1;u0*=width;v0*=height;u1*=width;v1*=height;u2*=width;v2*=height;x1-=x0;y1-=y0;x2-=x0;y2-=y0;u1-=u0;v1-=v0;u2-=u0;v2-=v0;det=u1*v2-u2*v1;idet=1/det;a=(v2*x1-v1*x2)*idet;b=(v2*y1-v1*y2)*idet;c=(u1*x2-u2*x1)*idet;d=(u1*y2-u2*y1)*idet;e=x0-a*u0-c*v0;f=y0-b*u0-d*v0;_context.save();_context.transform(a,b,c,d,e,f);_context.clip();_context.drawImage(image,0,0);_context.restore();}
function expand(v1,v2,pixels){var x=v2.x-v1.x,y=v2.y-v1.y,det=x*x+y*y,idet;if(det===0)return;idet=pixels/Math.sqrt(det);x*=idet;y*=idet;v2.x+=x;v2.y+=y;v1.x-=x;v1.y-=y;}
function setOpacity(value){if(_contextGlobalAlpha!==value){_context.globalAlpha=value;_contextGlobalAlpha=value;}}
function setBlending(value){if(_contextGlobalCompositeOperation!==value){if(value===THREE3DP.NormalBlending){_context.globalCompositeOperation='source-over';}else if(value===THREE3DP.AdditiveBlending){_context.globalCompositeOperation='lighter';}else if(value===THREE3DP.SubtractiveBlending){_context.globalCompositeOperation='darker';}else if(value===THREE3DP.MultiplyBlending){_context.globalCompositeOperation='multiply';}
_contextGlobalCompositeOperation=value;}}
function setLineWidth(value){if(_contextLineWidth!==value){_context.lineWidth=value;_contextLineWidth=value;}}
function setLineCap(value){if(_contextLineCap!==value){_context.lineCap=value;_contextLineCap=value;}}
function setLineJoin(value){if(_contextLineJoin!==value){_context.lineJoin=value;_contextLineJoin=value;}}
function setStrokeStyle(value){if(_contextStrokeStyle!==value){_context.strokeStyle=value;_contextStrokeStyle=value;}}
function setFillStyle(value){if(_contextFillStyle!==value){_context.fillStyle=value;_contextFillStyle=value;}}
function setLineDash(value){if(_contextLineDash.length!==value.length){_context.setLineDash(value);_contextLineDash=value;}}};
THREE3DP.RenderableObject=function(){this.id=0;this.object=null;this.z=0;this.renderOrder=0;};THREE3DP.RenderableFace=function(){this.id=0;this.v1=new THREE3DP.RenderableVertex();this.v2=new THREE3DP.RenderableVertex();this.v3=new THREE3DP.RenderableVertex();this.normalModel=new THREE3DP.Vector3();this.vertexNormalsModel=[new THREE3DP.Vector3(),new THREE3DP.Vector3(),new THREE3DP.Vector3()];this.vertexNormalsLength=0;this.color=new THREE3DP.Color();this.material=null;this.uvs=[new THREE3DP.Vector2(),new THREE3DP.Vector2(),new THREE3DP.Vector2()];this.z=0;this.renderOrder=0;};THREE3DP.RenderableVertex=function(){this.position=new THREE3DP.Vector3();this.positionWorld=new THREE3DP.Vector3();this.positionScreen=new THREE3DP.Vector4();this.visible=true;};THREE3DP.RenderableVertex.prototype.copy=function(vertex){this.positionWorld.copy(vertex.positionWorld);this.positionScreen.copy(vertex.positionScreen);};THREE3DP.RenderableLine=function(){this.id=0;this.v1=new THREE3DP.RenderableVertex();this.v2=new THREE3DP.RenderableVertex();this.vertexColors=[new THREE3DP.Color(),new THREE3DP.Color()];this.material=null;this.z=0;this.renderOrder=0;};THREE3DP.RenderableSprite=function(){this.id=0;this.object=null;this.x=0;this.y=0;this.z=0;this.rotation=0;this.scale=new THREE3DP.Vector2();this.material=null;this.renderOrder=0;};THREE3DP.Projector=function(){var _object,_objectCount,_objectPool=[],_objectPoolLength=0,_vertex,_vertexCount,_vertexPool=[],_vertexPoolLength=0,_face,_faceCount,_facePool=[],_facePoolLength=0,_line,_lineCount,_linePool=[],_linePoolLength=0,_sprite,_spriteCount,_spritePool=[],_spritePoolLength=0,_renderData={objects:[],lights:[],elements:[]},_vector3=new THREE3DP.Vector3(),_vector4=new THREE3DP.Vector4(),_clipBox=new THREE3DP.Box3(new THREE3DP.Vector3(-1,-1,-1),new THREE3DP.Vector3(1,1,1)),_boundingBox=new THREE3DP.Box3(),_points3=new Array(3),_viewMatrix=new THREE3DP.Matrix4(),_viewProjectionMatrix=new THREE3DP.Matrix4(),_modelMatrix,_modelViewProjectionMatrix=new THREE3DP.Matrix4(),_normalMatrix=new THREE3DP.Matrix3(),_frustum=new THREE3DP.Frustum(),_clippedVertex1PositionScreen=new THREE3DP.Vector4(),_clippedVertex2PositionScreen=new THREE3DP.Vector4();this.projectVector=function(vector,camera){console.warn('THREE3DP.Projector: .projectVector() is now vector.project().');vector.project(camera);};this.unprojectVector=function(vector,camera){console.warn('THREE3DP.Projector: .unprojectVector() is now vector.unproject().');vector.unproject(camera);};this.pickingRay=function(){console.error('THREE3DP.Projector: .pickingRay() is now raycaster.setFromCamera().');};var RenderList=function(){var normals=[];var colors=[];var uvs=[];var object=null;var material=null;var normalMatrix=new THREE3DP.Matrix3();function setObject(value){object=value;material=object.material;normalMatrix.getNormalMatrix(object.matrixWorld);normals.length=0;colors.length=0;uvs.length=0;}
function projectVertex(vertex){var position=vertex.position;var positionWorld=vertex.positionWorld;var positionScreen=vertex.positionScreen;positionWorld.copy(position).applyMatrix4(_modelMatrix);positionScreen.copy(positionWorld).applyMatrix4(_viewProjectionMatrix);var invW=1/positionScreen.w;positionScreen.x*=invW;positionScreen.y*=invW;positionScreen.z*=invW;vertex.visible=positionScreen.x>=-1&&positionScreen.x<=1&&positionScreen.y>=-1&&positionScreen.y<=1&&positionScreen.z>=-1&&positionScreen.z<=1;}
function pushVertex(x,y,z){_vertex=getNextVertexInPool();_vertex.position.set(x,y,z);projectVertex(_vertex);}
function pushNormal(x,y,z){normals.push(x,y,z);}
function pushColor(r,g,b){colors.push(r,g,b);}
function pushUv(x,y){uvs.push(x,y);}
function checkTriangleVisibility(v1,v2,v3){if(v1.visible===true||v2.visible===true||v3.visible===true)return true;_points3[0]=v1.positionScreen;_points3[1]=v2.positionScreen;_points3[2]=v3.positionScreen;return _clipBox.intersectsBox(_boundingBox.setFromPoints(_points3));}
function checkBackfaceCulling(v1,v2,v3){return((v3.positionScreen.x-v1.positionScreen.x)*(v2.positionScreen.y-v1.positionScreen.y)-
(v3.positionScreen.y-v1.positionScreen.y)*(v2.positionScreen.x-v1.positionScreen.x))<0;}
function pushLine(a,b){var v1=_vertexPool[a];var v2=_vertexPool[b];v1.positionScreen.copy(v1.position).applyMatrix4(_modelViewProjectionMatrix);v2.positionScreen.copy(v2.position).applyMatrix4(_modelViewProjectionMatrix);if(clipLine(v1.positionScreen,v2.positionScreen)===true){v1.positionScreen.multiplyScalar(1/v1.positionScreen.w);v2.positionScreen.multiplyScalar(1/v2.positionScreen.w);_line=getNextLineInPool();_line.id=object.id;_line.v1.copy(v1);_line.v2.copy(v2);_line.z=Math.max(v1.positionScreen.z,v2.positionScreen.z);_line.renderOrder=object.renderOrder;_line.material=object.material;if(object.material.vertexColors===THREE3DP.VertexColors){_line.vertexColors[0].fromArray(colors,a*3);_line.vertexColors[1].fromArray(colors,b*3);}
_renderData.elements.push(_line);}}
function pushTriangle(a,b,c,material){var v1=_vertexPool[a];var v2=_vertexPool[b];var v3=_vertexPool[c];if(checkTriangleVisibility(v1,v2,v3)===false)return;if(material.side===THREE3DP.DoubleSide||checkBackfaceCulling(v1,v2,v3)===true){_face=getNextFaceInPool();_face.id=object.id;_face.v1.copy(v1);_face.v2.copy(v2);_face.v3.copy(v3);_face.z=(v1.positionScreen.z+v2.positionScreen.z+v3.positionScreen.z)/3;_face.renderOrder=object.renderOrder;_vector3.subVectors(v3.position,v2.position);_vector4.subVectors(v1.position,v2.position);_vector3.cross(_vector4);_face.normalModel.copy(_vector3);_face.normalModel.applyMatrix3(normalMatrix).normalize();for(var i=0;i<3;i++){var normal=_face.vertexNormalsModel[i];normal.fromArray(normals,arguments[i]*3);normal.applyMatrix3(normalMatrix).normalize();var uv=_face.uvs[i];uv.fromArray(uvs,arguments[i]*2);}
_face.vertexNormalsLength=3;_face.material=material;if(material.vertexColors===THREE3DP.FaceColors||material.vertexColors===THREE3DP.VertexColors){_face.color.fromArray(colors,a*3);}
_renderData.elements.push(_face);}}
return{setObject:setObject,projectVertex:projectVertex,checkTriangleVisibility:checkTriangleVisibility,checkBackfaceCulling:checkBackfaceCulling,pushVertex:pushVertex,pushNormal:pushNormal,pushColor:pushColor,pushUv:pushUv,pushLine:pushLine,pushTriangle:pushTriangle};};var renderList=new RenderList();function projectObject(object){if(object.visible===false)return;if(object instanceof THREE3DP.Light){_renderData.lights.push(object);}else if(object instanceof THREE3DP.Mesh||object instanceof THREE3DP.Line||object instanceof THREE3DP.Points){if(object.material.visible===false)return;if(object.frustumCulled===true&&_frustum.intersectsObject(object)===false)return;addObject(object);}else if(object instanceof THREE3DP.Sprite){if(object.material.visible===false)return;if(object.frustumCulled===true&&_frustum.intersectsSprite(object)===false)return;addObject(object);}
var children=object.children;for(var i=0,l=children.length;i<l;i++){projectObject(children[i]);}}
function addObject(object){_object=getNextObjectInPool();_object.id=object.id;_object.object=object;_vector3.setFromMatrixPosition(object.matrixWorld);_vector3.applyMatrix4(_viewProjectionMatrix);_object.z=_vector3.z;_object.renderOrder=object.renderOrder;_renderData.objects.push(_object);}
this.projectScene=function(scene,camera,sortObjects,sortElements){_faceCount=0;_lineCount=0;_spriteCount=0;_renderData.elements.length=0;if(scene.autoUpdate===true)scene.updateMatrixWorld();if(camera.parent===null)camera.updateMatrixWorld();_viewMatrix.copy(camera.matrixWorldInverse);_viewProjectionMatrix.multiplyMatrices(camera.projectionMatrix,_viewMatrix);_frustum.setFromMatrix(_viewProjectionMatrix);_objectCount=0;_renderData.objects.length=0;_renderData.lights.length=0;projectObject(scene);if(sortObjects===true){_renderData.objects.sort(painterSort);}
var objects=_renderData.objects;for(var o=0,ol=objects.length;o<ol;o++){var object=objects[o].object;var geometry=object.geometry;renderList.setObject(object);_modelMatrix=object.matrixWorld;_vertexCount=0;if(object instanceof THREE3DP.Mesh){if(geometry instanceof THREE3DP.BufferGeometry){var material=object.material;var isMultiMaterial=Array.isArray(material);var attributes=geometry.attributes;var groups=geometry.groups;if(attributes.position===undefined)continue;var positions=attributes.position.array;for(var i=0,l=positions.length;i<l;i+=3){var x=positions[i];var y=positions[i+1];var z=positions[i+2];if(material.morphTargets===true){var morphTargets=geometry.morphAttributes.position;var morphInfluences=object.morphTargetInfluences;for(var t=0,tl=morphTargets.length;t<tl;t++){var influence=morphInfluences[t];if(influence===0)continue;var target=morphTargets[t];x+=(target.getX(i/3)-positions[i])*influence;y+=(target.getY(i/3)-positions[i+1])*influence;z+=(target.getZ(i/3)-positions[i+2])*influence;}}
renderList.pushVertex(x,y,z);}
if(attributes.normal!==undefined){var normals=attributes.normal.array;for(var i=0,l=normals.length;i<l;i+=3){renderList.pushNormal(normals[i],normals[i+1],normals[i+2]);}}
if(attributes.color!==undefined){var colors=attributes.color.array;for(var i=0,l=colors.length;i<l;i+=3){renderList.pushColor(colors[i],colors[i+1],colors[i+2]);}}
if(attributes.uv!==undefined){var uvs=attributes.uv.array;for(var i=0,l=uvs.length;i<l;i+=2){renderList.pushUv(uvs[i],uvs[i+1]);}}
if(geometry.index!==null){var indices=geometry.index.array;if(groups.length>0){for(var g=0;g<groups.length;g++){var group=groups[g];material=isMultiMaterial===true?object.material[group.materialIndex]:object.material;if(material===undefined)continue;for(var i=group.start,l=group.start+group.count;i<l;i+=3){renderList.pushTriangle(indices[i],indices[i+1],indices[i+2],material);}}}else{for(var i=0,l=indices.length;i<l;i+=3){renderList.pushTriangle(indices[i],indices[i+1],indices[i+2],material);}}}else{if(groups.length>0){for(var g=0;g<groups.length;g++){var group=groups[g];material=isMultiMaterial===true?object.material[group.materialIndex]:object.material;if(material===undefined)continue;for(var i=group.start,l=group.start+group.count;i<l;i+=3){renderList.pushTriangle(i,i+1,i+2,material);}}}else{for(var i=0,l=positions.length/3;i<l;i+=3){renderList.pushTriangle(i,i+1,i+2,material);}}}}else if(geometry instanceof THREE3DP.Geometry){var vertices=geometry.vertices;var faces=geometry.faces;var faceVertexUvs=geometry.faceVertexUvs[0];_normalMatrix.getNormalMatrix(_modelMatrix);var material=object.material;var isMultiMaterial=Array.isArray(material);for(var v=0,vl=vertices.length;v<vl;v++){var vertex=vertices[v];_vector3.copy(vertex);if(material.morphTargets===true){var morphTargets=geometry.morphTargets;var morphInfluences=object.morphTargetInfluences;for(var t=0,tl=morphTargets.length;t<tl;t++){var influence=morphInfluences[t];if(influence===0)continue;var target=morphTargets[t];var targetVertex=target.vertices[v];_vector3.x+=(targetVertex.x-vertex.x)*influence;_vector3.y+=(targetVertex.y-vertex.y)*influence;_vector3.z+=(targetVertex.z-vertex.z)*influence;}}
renderList.pushVertex(_vector3.x,_vector3.y,_vector3.z);}
for(var f=0,fl=faces.length;f<fl;f++){var face=faces[f];material=isMultiMaterial===true?object.material[face.materialIndex]:object.material;if(material===undefined)continue;var side=material.side;var v1=_vertexPool[face.a];var v2=_vertexPool[face.b];var v3=_vertexPool[face.c];if(renderList.checkTriangleVisibility(v1,v2,v3)===false)continue;var visible=renderList.checkBackfaceCulling(v1,v2,v3);if(side!==THREE3DP.DoubleSide){if(side===THREE3DP.FrontSide&&visible===false)continue;if(side===THREE3DP.BackSide&&visible===true)continue;}
_face=getNextFaceInPool();_face.id=object.id;_face.v1.copy(v1);_face.v2.copy(v2);_face.v3.copy(v3);_face.normalModel.copy(face.normal);if(visible===false&&(side===THREE3DP.BackSide||side===THREE3DP.DoubleSide)){_face.normalModel.negate();}
_face.normalModel.applyMatrix3(_normalMatrix).normalize();var faceVertexNormals=face.vertexNormals;for(var n=0,nl=Math.min(faceVertexNormals.length,3);n<nl;n++){var normalModel=_face.vertexNormalsModel[n];normalModel.copy(faceVertexNormals[n]);if(visible===false&&(side===THREE3DP.BackSide||side===THREE3DP.DoubleSide)){normalModel.negate();}
normalModel.applyMatrix3(_normalMatrix).normalize();}
_face.vertexNormalsLength=faceVertexNormals.length;var vertexUvs=faceVertexUvs[f];if(vertexUvs!==undefined){for(var u=0;u<3;u++){_face.uvs[u].copy(vertexUvs[u]);}}
_face.color=face.color;_face.material=material;_face.z=(v1.positionScreen.z+v2.positionScreen.z+v3.positionScreen.z)/3;_face.renderOrder=object.renderOrder;_renderData.elements.push(_face);}}}else if(object instanceof THREE3DP.Line){_modelViewProjectionMatrix.multiplyMatrices(_viewProjectionMatrix,_modelMatrix);if(geometry instanceof THREE3DP.BufferGeometry){var attributes=geometry.attributes;if(attributes.position!==undefined){var positions=attributes.position.array;for(var i=0,l=positions.length;i<l;i+=3){renderList.pushVertex(positions[i],positions[i+1],positions[i+2]);}
if(attributes.color!==undefined){var colors=attributes.color.array;for(var i=0,l=colors.length;i<l;i+=3){renderList.pushColor(colors[i],colors[i+1],colors[i+2]);}}
if(geometry.index!==null){var indices=geometry.index.array;for(var i=0,l=indices.length;i<l;i+=2){renderList.pushLine(indices[i],indices[i+1]);}}else{var step=object instanceof THREE3DP.LineSegments?2:1;for(var i=0,l=(positions.length/3)-1;i<l;i+=step){renderList.pushLine(i,i+1);}}}}else if(geometry instanceof THREE3DP.Geometry){var vertices=object.geometry.vertices;if(vertices.length===0)continue;v1=getNextVertexInPool();v1.positionScreen.copy(vertices[0]).applyMatrix4(_modelViewProjectionMatrix);var step=object instanceof THREE3DP.LineSegments?2:1;for(var v=1,vl=vertices.length;v<vl;v++){v1=getNextVertexInPool();v1.positionScreen.copy(vertices[v]).applyMatrix4(_modelViewProjectionMatrix);if((v+1)%step>0)continue;v2=_vertexPool[_vertexCount-2];_clippedVertex1PositionScreen.copy(v1.positionScreen);_clippedVertex2PositionScreen.copy(v2.positionScreen);if(clipLine(_clippedVertex1PositionScreen,_clippedVertex2PositionScreen)===true){_clippedVertex1PositionScreen.multiplyScalar(1/_clippedVertex1PositionScreen.w);_clippedVertex2PositionScreen.multiplyScalar(1/_clippedVertex2PositionScreen.w);_line=getNextLineInPool();_line.id=object.id;_line.v1.positionScreen.copy(_clippedVertex1PositionScreen);_line.v2.positionScreen.copy(_clippedVertex2PositionScreen);_line.z=Math.max(_clippedVertex1PositionScreen.z,_clippedVertex2PositionScreen.z);_line.renderOrder=object.renderOrder;_line.material=object.material;if(object.material.vertexColors===THREE3DP.VertexColors){_line.vertexColors[0].copy(object.geometry.colors[v]);_line.vertexColors[1].copy(object.geometry.colors[v-1]);}
_renderData.elements.push(_line);}}}}else if(object instanceof THREE3DP.Points){_modelViewProjectionMatrix.multiplyMatrices(_viewProjectionMatrix,_modelMatrix);if(geometry instanceof THREE3DP.Geometry){var vertices=object.geometry.vertices;for(var v=0,vl=vertices.length;v<vl;v++){var vertex=vertices[v];_vector4.set(vertex.x,vertex.y,vertex.z,1);_vector4.applyMatrix4(_modelViewProjectionMatrix);pushPoint(_vector4,object,camera);}}else if(geometry instanceof THREE3DP.BufferGeometry){var attributes=geometry.attributes;if(attributes.position!==undefined){var positions=attributes.position.array;for(var i=0,l=positions.length;i<l;i+=3){_vector4.set(positions[i],positions[i+1],positions[i+2],1);_vector4.applyMatrix4(_modelViewProjectionMatrix);pushPoint(_vector4,object,camera);}}}}else if(object instanceof THREE3DP.Sprite){object.modelViewMatrix.multiplyMatrices(camera.matrixWorldInverse,object.matrixWorld);_vector4.set(_modelMatrix.elements[12],_modelMatrix.elements[13],_modelMatrix.elements[14],1);_vector4.applyMatrix4(_viewProjectionMatrix);pushPoint(_vector4,object,camera);}}
if(sortElements===true){_renderData.elements.sort(painterSort);}
return _renderData;};function pushPoint(_vector4,object,camera){var invW=1/_vector4.w;_vector4.z*=invW;if(_vector4.z>=-1&&_vector4.z<=1){_sprite=getNextSpriteInPool();_sprite.id=object.id;_sprite.x=_vector4.x*invW;_sprite.y=_vector4.y*invW;_sprite.z=_vector4.z;_sprite.renderOrder=object.renderOrder;_sprite.object=object;_sprite.rotation=object.rotation;_sprite.scale.x=object.scale.x*Math.abs(_sprite.x-(_vector4.x+camera.projectionMatrix.elements[0])/(_vector4.w+camera.projectionMatrix.elements[12]));_sprite.scale.y=object.scale.y*Math.abs(_sprite.y-(_vector4.y+camera.projectionMatrix.elements[5])/(_vector4.w+camera.projectionMatrix.elements[13]));_sprite.material=object.material;_renderData.elements.push(_sprite);}}
function getNextObjectInPool(){if(_objectCount===_objectPoolLength){var object=new THREE3DP.RenderableObject();_objectPool.push(object);_objectPoolLength++;_objectCount++;return object;}
return _objectPool[_objectCount++];}
function getNextVertexInPool(){if(_vertexCount===_vertexPoolLength){var vertex=new THREE3DP.RenderableVertex();_vertexPool.push(vertex);_vertexPoolLength++;_vertexCount++;return vertex;}
return _vertexPool[_vertexCount++];}
function getNextFaceInPool(){if(_faceCount===_facePoolLength){var face=new THREE3DP.RenderableFace();_facePool.push(face);_facePoolLength++;_faceCount++;return face;}
return _facePool[_faceCount++];}
function getNextLineInPool(){if(_lineCount===_linePoolLength){var line=new THREE3DP.RenderableLine();_linePool.push(line);_linePoolLength++;_lineCount++;return line;}
return _linePool[_lineCount++];}
function getNextSpriteInPool(){if(_spriteCount===_spritePoolLength){var sprite=new THREE3DP.RenderableSprite();_spritePool.push(sprite);_spritePoolLength++;_spriteCount++;return sprite;}
return _spritePool[_spriteCount++];}
function painterSort(a,b){if(a.renderOrder!==b.renderOrder){return a.renderOrder-b.renderOrder;}else if(a.z!==b.z){return b.z-a.z;}else if(a.id!==b.id){return a.id-b.id;}else{return 0;}}
function clipLine(s1,s2){var alpha1=0,alpha2=1,bc1near=s1.z+s1.w,bc2near=s2.z+s2.w,bc1far=-s1.z+s1.w,bc2far=-s2.z+s2.w;if(bc1near>=0&&bc2near>=0&&bc1far>=0&&bc2far>=0){return true;}else if((bc1near<0&&bc2near<0)||(bc1far<0&&bc2far<0)){return false;}else{if(bc1near<0){alpha1=Math.max(alpha1,bc1near/(bc1near-bc2near));}else if(bc2near<0){alpha2=Math.min(alpha2,bc1near/(bc1near-bc2near));}
if(bc1far<0){alpha1=Math.max(alpha1,bc1far/(bc1far-bc2far));}else if(bc2far<0){alpha2=Math.min(alpha2,bc1far/(bc1far-bc2far));}
if(alpha2<alpha1){return false;}else{s1.lerp(s2,alpha1);s2.lerp(s1,1-alpha2);return true;}}}};
THREE3DP.STLLoader=function(manager){this.manager=(manager!==undefined)?manager:THREE3DP.DefaultLoadingManager;};THREE3DP.STLLoader.prototype={constructor:THREE3DP.STLLoader,load:function(url,onLoad,onProgress,onError){var scope=this;var loader=new THREE3DP.FileLoader(scope.manager);loader.setPath(scope.path);loader.setResponseType('arraybuffer');loader.load(url,function(text){try{onLoad(scope.parse(text));}catch(exception){if(onError){onError(exception);}}},onProgress,onError);},setPath:function(value){this.path=value;return this;},parse:function(data){function isBinary(data){var expect,face_size,n_faces,reader;reader=new DataView(data);face_size=(32/8*3)+((32/8*3)*3)+(16/8);n_faces=reader.getUint32(80,true);expect=80+(32/8)+(n_faces*face_size);if(expect===reader.byteLength){return true;}
var solid=[115,111,108,105,100];for(var off=0;off<5;off++){if(matchDataViewAt(solid,reader,off))return false;}
return true;}
function matchDataViewAt(query,reader,offset){for(var i=0,il=query.length;i<il;i++){if(query[i]!==reader.getUint8(offset+i,false))return false;}
return true;}
function parseBinary(data){var reader=new DataView(data);var faces=reader.getUint32(80,true);var r,g,b,hasColors=false,colors;var defaultR,defaultG,defaultB,alpha;p3d.model_total_volume=0;p3d.model_surface_area=0;for(var index=0;index<80-10;index++){if((reader.getUint32(index,false)==0x434F4C4F)&&(reader.getUint8(index+4)==0x52)&&(reader.getUint8(index+5)==0x3D)){hasColors=true;colors=[];defaultR=reader.getUint8(index+6)/255;defaultG=reader.getUint8(index+7)/255;defaultB=reader.getUint8(index+8)/255;alpha=reader.getUint8(index+9)/255;}}
var dataOffset=84;var faceLength=12*4+2;var geometry=new THREE3DP.BufferGeometry();var vertices=[];var normals=[];for(var face=0;face<faces;face++){var start=dataOffset+face*faceLength;var normalX=reader.getFloat32(start,true);var normalY=reader.getFloat32(start+4,true);var normalZ=reader.getFloat32(start+8,true);if(hasColors){var packedColor=reader.getUint16(start+48,true);if((packedColor&0x8000)===0){r=(packedColor&0x1F)/31;g=((packedColor>>5)&0x1F)/31;b=((packedColor>>10)&0x1F)/31;}else{r=defaultR;g=defaultG;b=defaultB;}}
var tetrahedron=new Array();for(var i=1;i<=3;i++){var vertexstart=start+i*12;vertices.push(reader.getFloat32(vertexstart,true));vertices.push(reader.getFloat32(vertexstart+4,true));vertices.push(reader.getFloat32(vertexstart+8,true));tetrahedron[i]=new Array();tetrahedron[i].push(reader.getFloat32(vertexstart,true));tetrahedron[i].push(reader.getFloat32(vertexstart+4,true));tetrahedron[i].push(reader.getFloat32(vertexstart+8,true));normals.push(normalX,normalY,normalZ);if(hasColors){colors.push(r,g,b);}}
p3d.model_total_volume+=p3dSignedVolume(tetrahedron[1],tetrahedron[2],tetrahedron[3]);p3d.model_surface_area+=p3dSurfaceArea(tetrahedron[1],tetrahedron[2],tetrahedron[3]);}
geometry.addAttribute('position',new THREE3DP.BufferAttribute(new Float32Array(vertices),3));geometry.addAttribute('normal',new THREE3DP.BufferAttribute(new Float32Array(normals),3));if(hasColors){geometry.addAttribute('color',new THREE3DP.BufferAttribute(new Float32Array(colors),3));geometry.hasColors=true;geometry.alpha=alpha;}
return geometry;}
function parseASCII(data){var geometry=new THREE3DP.BufferGeometry();var patternFace=/facet([\s\S]*?)endfacet/g;var faceCounter=0;var patternFloat=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source;var patternVertex=new RegExp('vertex'+patternFloat+patternFloat+patternFloat,'g');var patternNormal=new RegExp('normal'+patternFloat+patternFloat+patternFloat,'g');var vertices=[];var normals=[];var normal=new THREE3DP.Vector3();var result;p3d.model_total_volume=0;p3d.model_surface_area=0;while((result=patternFace.exec(data))!==null){var vertexCountPerFace=0;var normalCountPerFace=0;var text=result[0];while((result=patternNormal.exec(text))!==null){normal.x=parseFloat(result[1]);normal.y=parseFloat(result[2]);normal.z=parseFloat(result[3]);normalCountPerFace++;}
tetrahedron=new Array();var i=1;while((result=patternVertex.exec(text))!==null){tetrahedron[i]=new Array();tetrahedron[i].push(parseFloat(result[1]));tetrahedron[i].push(parseFloat(result[2]));tetrahedron[i].push(parseFloat(result[3]));vertices.push(parseFloat(result[1]),parseFloat(result[2]),parseFloat(result[3]));normals.push(normal.x,normal.y,normal.z);vertexCountPerFace++;i++;}
p3d.model_total_volume+=p3dSignedVolume(tetrahedron[1],tetrahedron[2],tetrahedron[3]);p3d.model_surface_area+=p3dSurfaceArea(tetrahedron[1],tetrahedron[2],tetrahedron[3]);if(normalCountPerFace!==1){console.error('THREE3DP.STLLoader: Something isn\'t right with the normal of face number '+faceCounter);}
if(vertexCountPerFace!==3){console.error('THREE3DP.STLLoader: Something isn\'t right with the vertices of face number '+faceCounter);}
faceCounter++;}
geometry.addAttribute('position',new THREE3DP.Float32BufferAttribute(vertices,3));geometry.addAttribute('normal',new THREE3DP.Float32BufferAttribute(normals,3));return geometry;}
function ensureString(buffer){if(typeof buffer!=='string'){return THREE3DP.LoaderUtils.decodeText(new Uint8Array(buffer));}
return buffer;}
function ensureBinary(buffer){if(typeof buffer==='string'){var array_buffer=new Uint8Array(buffer.length);for(var i=0;i<buffer.length;i++){array_buffer[i]=buffer.charCodeAt(i)&0xff;}
return array_buffer.buffer||array_buffer;}else{return buffer;}}
var binData=ensureBinary(data);return isBinary(binData)?parseBinary(binData):parseASCII(ensureString(data));}};
THREE3DP.OBJLoader=function(manager){this.manager=(manager!==undefined)?manager:THREE3DP.DefaultLoadingManager;this.materials=null;this.regexp={vertex_pattern:/^v\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,normal_pattern:/^vn\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,uv_pattern:/^vt\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,face_vertex:/^f\s+(-?\d+)\s+(-?\d+)\s+(-?\d+)(?:\s+(-?\d+))?/,face_vertex_uv:/^f\s+(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)(?:\s+(-?\d+)\/(-?\d+))?/,face_vertex_uv_normal:/^f\s+(-?\d+)\/(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\/(-?\d+)(?:\s+(-?\d+)\/(-?\d+)\/(-?\d+))?/,face_vertex_normal:/^f\s+(-?\d+)\/\/(-?\d+)\s+(-?\d+)\/\/(-?\d+)\s+(-?\d+)\/\/(-?\d+)(?:\s+(-?\d+)\/\/(-?\d+))?/,object_pattern:/^[og]\s*(.+)?/,smoothing_pattern:/^s\s+(\d+|on|off)/,material_library_pattern:/^mtllib /,material_use_pattern:/^usemtl /};};THREE3DP.OBJLoader.prototype={constructor:THREE3DP.OBJLoader,load:function(url,onLoad,onProgress,onError){var scope=this;var loader=new THREE3DP.FileLoader(scope.manager);loader.setPath(this.path);loader.load(url,function(text){onLoad(scope.parse(text));},onProgress,onError);},setPath:function(value){this.path=value;},setMaterials:function(materials){this.materials=materials;},_createParserState:function(){var state={objects:[],object:{},vertices:[],normals:[],uvs:[],materialLibraries:[],startObject:function(name,fromDeclaration){if(this.object&&this.object.fromDeclaration===false){this.object.name=name;this.object.fromDeclaration=(fromDeclaration!==false);return;}
var previousMaterial=(this.object&&typeof this.object.currentMaterial==='function'?this.object.currentMaterial():undefined);if(this.object&&typeof this.object._finalize==='function'){this.object._finalize(true);}
this.object={name:name||'',fromDeclaration:(fromDeclaration!==false),geometry:{vertices:[],normals:[],uvs:[]},materials:[],smooth:true,startMaterial:function(name,libraries){var previous=this._finalize(false);if(previous&&(previous.inherited||previous.groupCount<=0)){this.materials.splice(previous.index,1);}
var material={index:this.materials.length,name:name||'',mtllib:(Array.isArray(libraries)&&libraries.length>0?libraries[libraries.length-1]:''),smooth:(previous!==undefined?previous.smooth:this.smooth),groupStart:(previous!==undefined?previous.groupEnd:0),groupEnd:-1,groupCount:-1,inherited:false,clone:function(index){var cloned={index:(typeof index==='number'?index:this.index),name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:false};cloned.clone=this.clone.bind(cloned);return cloned;}};this.materials.push(material);return material;},currentMaterial:function(){if(this.materials.length>0){return this.materials[this.materials.length-1];}
return undefined;},_finalize:function(end){var lastMultiMaterial=this.currentMaterial();if(lastMultiMaterial&&lastMultiMaterial.groupEnd===-1){lastMultiMaterial.groupEnd=this.geometry.vertices.length/3;lastMultiMaterial.groupCount=lastMultiMaterial.groupEnd-lastMultiMaterial.groupStart;lastMultiMaterial.inherited=false;}
if(end&&this.materials.length>1){for(var mi=this.materials.length-1;mi>=0;mi--){if(this.materials[mi].groupCount<=0){this.materials.splice(mi,1);}}}
if(end&&this.materials.length===0){this.materials.push({name:'',smooth:this.smooth});}
return lastMultiMaterial;}};if(previousMaterial&&previousMaterial.name&&typeof previousMaterial.clone==="function"){var declared=previousMaterial.clone(0);declared.inherited=true;this.object.materials.push(declared);}
this.objects.push(this.object);},finalize:function(){if(this.object&&typeof this.object._finalize==='function'){this.object._finalize(true);}},parseVertexIndex:function(value,len){var index=parseInt(value,10);return(index>=0?index-1:index+len/3)*3;},parseNormalIndex:function(value,len){var index=parseInt(value,10);return(index>=0?index-1:index+len/3)*3;},parseUVIndex:function(value,len){var index=parseInt(value,10);return(index>=0?index-1:index+len/2)*2;},addVertex:function(a,b,c){var src=this.vertices;var dst=this.object.geometry.vertices;dst.push(src[a+0]);dst.push(src[a+1]);dst.push(src[a+2]);dst.push(src[b+0]);dst.push(src[b+1]);dst.push(src[b+2]);dst.push(src[c+0]);dst.push(src[c+1]);dst.push(src[c+2]);},addVertexLine:function(a){var src=this.vertices;var dst=this.object.geometry.vertices;dst.push(src[a+0]);dst.push(src[a+1]);dst.push(src[a+2]);},addNormal:function(a,b,c){var src=this.normals;var dst=this.object.geometry.normals;dst.push(src[a+0]);dst.push(src[a+1]);dst.push(src[a+2]);dst.push(src[b+0]);dst.push(src[b+1]);dst.push(src[b+2]);dst.push(src[c+0]);dst.push(src[c+1]);dst.push(src[c+2]);},addUV:function(a,b,c){var src=this.uvs;var dst=this.object.geometry.uvs;dst.push(src[a+0]);dst.push(src[a+1]);dst.push(src[b+0]);dst.push(src[b+1]);dst.push(src[c+0]);dst.push(src[c+1]);},addUVLine:function(a){var src=this.uvs;var dst=this.object.geometry.uvs;dst.push(src[a+0]);dst.push(src[a+1]);},addFace:function(a,b,c,d,ua,ub,uc,ud,na,nb,nc,nd){var vLen=this.vertices.length;var ia=this.parseVertexIndex(a,vLen);var ib=this.parseVertexIndex(b,vLen);var ic=this.parseVertexIndex(c,vLen);var id;if(d===undefined){this.addVertex(ia,ib,ic);}else{id=this.parseVertexIndex(d,vLen);this.addVertex(ia,ib,id);this.addVertex(ib,ic,id);}
if(ua!==undefined){var uvLen=this.uvs.length;ia=this.parseUVIndex(ua,uvLen);ib=this.parseUVIndex(ub,uvLen);ic=this.parseUVIndex(uc,uvLen);if(d===undefined){this.addUV(ia,ib,ic);}else{id=this.parseUVIndex(ud,uvLen);this.addUV(ia,ib,id);this.addUV(ib,ic,id);}}
if(na!==undefined){var nLen=this.normals.length;ia=this.parseNormalIndex(na,nLen);ib=na===nb?ia:this.parseNormalIndex(nb,nLen);ic=na===nc?ia:this.parseNormalIndex(nc,nLen);if(d===undefined){this.addNormal(ia,ib,ic);}else{id=this.parseNormalIndex(nd,nLen);this.addNormal(ia,ib,id);this.addNormal(ib,ic,id);}}},addLineGeometry:function(vertices,uvs){this.object.geometry.type='Line';var vLen=this.vertices.length;var uvLen=this.uvs.length;for(var vi=0,l=vertices.length;vi<l;vi++){this.addVertexLine(this.parseVertexIndex(vertices[vi],vLen));}
for(var uvi=0,l=uvs.length;uvi<l;uvi++){this.addUVLine(this.parseUVIndex(uvs[uvi],uvLen));}}};state.startObject('',false);return state;},parse:function(text){p3d.model_total_volume=0;p3d.model_surface_area=0;var state=this._createParserState();if(text.indexOf('\r\n')!==-1){text=text.replace(/\r\n/g,'\n');}
if(text.indexOf('\\\n')!==-1){text=text.replace(/\\\n/g,'');}
var lines=text.split('\n');var line='',lineFirstChar='',lineSecondChar='';var lineLength=0;var result=[];var trimLeft=(typeof''.trimLeft==='function');var v=0;var vertexes=new Array();for(var i=0;i<lines.length;i++){var line=lines[i];var tokens=line.split(/[ \t]+/);if(tokens.length>0){var keyword=tokens[0];switch(keyword){case'v':if(tokens.length>3){vertexes[v]=new Array();for(var j=1;j<4;j++){vertexes[v][j-1]=parseFloat(tokens[j]);}
v++;}
break;case'#':default:break;}}}
for(var i=0,l=lines.length;i<l;i++){var tokens=line.split(/[ \t]+/);line=lines[i];line=trimLeft?line.trimLeft():line.trim();lineLength=line.length;if(lineLength===0)continue;lineFirstChar=line.charAt(0);if(lineFirstChar==='#')continue;if(lineFirstChar==='v'){lineSecondChar=line.charAt(1);if(lineSecondChar===' '&&(result=this.regexp.vertex_pattern.exec(line))!==null){state.vertices.push(parseFloat(result[1]),parseFloat(result[2]),parseFloat(result[3]));}else if(lineSecondChar==='n'&&(result=this.regexp.normal_pattern.exec(line))!==null){state.normals.push(parseFloat(result[1]),parseFloat(result[2]),parseFloat(result[3]));}else if(lineSecondChar==='t'&&(result=this.regexp.uv_pattern.exec(line))!==null){state.uvs.push(parseFloat(result[1]),parseFloat(result[2]));}else{throw new Error("Unexpected vertex/normal/uv line: '"+line+"'");}}else if(lineFirstChar==="f"){if(tokens.length>3&&tokens[0]=='f'){var tetrahedron=new Array();for(var j=1;j<tokens.length;j++){var refs=tokens[j].split('/');var index=parseInt(refs[0])-1;var vindex=0;if(index<0)vindex=vertexes.length+index;else vindex=index;tetrahedron[j]=new Array();tetrahedron[j]=vertexes[vindex];if(tokens.length==4&&j==3){var temp_vol=parseFloat(p3dSignedVolume(tetrahedron[1],tetrahedron[2],tetrahedron[3]));var surface_area=parseFloat(p3dSurfaceArea(tetrahedron[1],tetrahedron[2],tetrahedron[3]));if(!isNaN(temp_vol)){p3d.model_total_volume+=temp_vol;}
if(!isNaN(surface_area)){p3d.model_surface_area+=surface_area;}}
else if(tokens.length>4){if(tokens.length==5&&j==4){var temp_vol1=parseFloat(p3dSignedVolume(tetrahedron[1],tetrahedron[2],tetrahedron[3]));var temp_vol2=parseFloat(p3dSignedVolume(tetrahedron[1],tetrahedron[3],tetrahedron[4]));var surface_area1=parseFloat(p3dSurfaceArea(tetrahedron[1],tetrahedron[2],tetrahedron[3]));var surface_area2=parseFloat(p3dSurfaceArea(tetrahedron[1],tetrahedron[3],tetrahedron[4]));if(!isNaN(temp_vol1)){p3d.model_total_volume+=temp_vol1;}
if(!isNaN(temp_vol2)){p3d.model_total_volume+=temp_vol2;}
if(!isNaN(surface_area1)){p3d.model_surface_area+=surface_area1;}
if(!isNaN(surface_area2)){p3d.model_surface_area+=surface_area2;}}
if(p3d.server_triangulation=='on'){p3d.triangulation_required=true;}}}}
if((result=this.regexp.face_vertex_uv_normal.exec(line))!==null){state.addFace(result[1],result[4],result[7],result[10],result[2],result[5],result[8],result[11],result[3],result[6],result[9],result[12]);}else if((result=this.regexp.face_vertex_uv.exec(line))!==null){state.addFace(result[1],result[3],result[5],result[7],result[2],result[4],result[6],result[8]);}else if((result=this.regexp.face_vertex_normal.exec(line))!==null){state.addFace(result[1],result[3],result[5],result[7],undefined,undefined,undefined,undefined,result[2],result[4],result[6],result[8]);}else if((result=this.regexp.face_vertex.exec(line))!==null){state.addFace(result[1],result[2],result[3],result[4]);}else{throw new Error("Unexpected face line: '"+line+"'");}}else if(lineFirstChar==="l"){var lineParts=line.substring(1).trim().split(" ");var lineVertices=[],lineUVs=[];if(line.indexOf("/")===-1){lineVertices=lineParts;}else{for(var li=0,llen=lineParts.length;li<llen;li++){var parts=lineParts[li].split("/");if(parts[0]!=="")lineVertices.push(parts[0]);if(parts[1]!=="")lineUVs.push(parts[1]);}}
state.addLineGeometry(lineVertices,lineUVs);}else if((result=this.regexp.object_pattern.exec(line))!==null){var name=(" "+result[0].substr(1).trim()).substr(1);state.startObject(name);}else if(this.regexp.material_use_pattern.test(line)){state.object.startMaterial(line.substring(7).trim(),state.materialLibraries);}else if(this.regexp.material_library_pattern.test(line)){state.materialLibraries.push(line.substring(7).trim());}else if((result=this.regexp.smoothing_pattern.exec(line))!==null){var value=result[1].trim().toLowerCase();state.object.smooth=(value==='1'||value==='on');var material=state.object.currentMaterial();if(material){material.smooth=state.object.smooth;}}else{if(line==='\0')continue;throw new Error("Unexpected line: '"+line+"'");}}
state.finalize();var container=new THREE3DP.Group();container.materialLibraries=[].concat(state.materialLibraries);for(var i=0,l=state.objects.length;i<l;i++){var object=state.objects[i];var geometry=object.geometry;var materials=object.materials;var isLine=(geometry.type==='Line');if(geometry.vertices.length===0)continue;var buffergeometry=new THREE3DP.BufferGeometry();buffergeometry.addAttribute('position',new THREE3DP.BufferAttribute(new Float32Array(geometry.vertices),3));if(geometry.normals.length>0){buffergeometry.addAttribute('normal',new THREE3DP.BufferAttribute(new Float32Array(geometry.normals),3));}else{buffergeometry.computeVertexNormals();}
if(geometry.uvs.length>0){buffergeometry.addAttribute('uv',new THREE3DP.BufferAttribute(new Float32Array(geometry.uvs),2));}
var createdMaterials=[];for(var mi=0,miLen=materials.length;mi<miLen;mi++){var sourceMaterial=materials[mi];var material=undefined;if(this.materials!==null){material=this.materials.create(sourceMaterial.name);if(isLine&&material&&!(material instanceof THREE3DP.LineBasicMaterial)){var materialLine=new THREE3DP.LineBasicMaterial();materialLine.copy(material);material=materialLine;}}
if(!material){material=(!isLine?new THREE3DP.MeshPhongMaterial():new THREE3DP.LineBasicMaterial());material.name=sourceMaterial.name;}
if(sourceMaterial.smooth)material.flatShading=false;else material.flatShading=true;createdMaterials.push(material);}
var mesh;if(createdMaterials.length>1){for(var mi=0,miLen=materials.length;mi<miLen;mi++){var sourceMaterial=materials[mi];buffergeometry.addGroup(sourceMaterial.groupStart,sourceMaterial.groupCount,mi);}
var multiMaterial=new THREE3DP.MultiMaterial(createdMaterials);mesh=(!isLine?new THREE3DP.Mesh(buffergeometry,multiMaterial):new THREE3DP.LineSegments(buffergeometry,multiMaterial));}else{mesh=(!isLine?new THREE3DP.Mesh(buffergeometry,createdMaterials[0]):new THREE3DP.LineSegments(buffergeometry,createdMaterials[0]));}
mesh.name=object.name;container.add(mesh);}
return container;}};
THREE3DP.MTLLoader=function(manager){this.manager=(manager!==undefined)?manager:THREE3DP.DefaultLoadingManager;};THREE3DP.MTLLoader.prototype={constructor:THREE3DP.MTLLoader,load:function(url,onLoad,onProgress,onError){var scope=this;var path=(this.path===undefined)?THREE3DP.LoaderUtils.extractUrlBase(url):this.path;var loader=new THREE3DP.FileLoader(this.manager);loader.setPath(this.path);loader.load(url,function(text){onLoad(scope.parse(text,path));},onProgress,onError);},setPath:function(path){this.path=path;return this;},setResourcePath:function(path){this.resourcePath=path;return this;},setTexturePath:function(path){console.warn('THREE3DP.MTLLoader: .setTexturePath() has been renamed to .setResourcePath().');return this.setResourcePath(path);},setCrossOrigin:function(value){this.crossOrigin=value;return this;},setMaterialOptions:function(value){this.materialOptions=value;return this;},parse:function(text,path){var lines=text.split('\n');var info={};var delimiter_pattern=/\s+/;var materialsInfo={};for(var i=0;i<lines.length;i++){var line=lines[i];line=line.trim();if(line.length===0||line.charAt(0)==='#'){continue;}
var pos=line.indexOf(' ');var key=(pos>=0)?line.substring(0,pos):line;key=key.toLowerCase();var value=(pos>=0)?line.substring(pos+1):'';value=value.trim();if(key==='newmtl'){info={name:value};materialsInfo[value]=info;}else{if(key==='ka'||key==='kd'||key==='ks'||key==='ke'){var ss=value.split(delimiter_pattern,3);info[key]=[parseFloat(ss[0]),parseFloat(ss[1]),parseFloat(ss[2])];}else{info[key]=value;}}}
var materialCreator=new THREE3DP.MTLLoader.MaterialCreator(this.resourcePath||path,this.materialOptions);materialCreator.setCrossOrigin(this.crossOrigin);materialCreator.setManager(this.manager);materialCreator.setMaterials(materialsInfo);return materialCreator;}};THREE3DP.MTLLoader.MaterialCreator=function(baseUrl,options){this.baseUrl=baseUrl||'';this.options=options;this.materialsInfo={};this.materials={};this.materialsArray=[];this.nameLookup={};this.side=(this.options&&this.options.side)?this.options.side:THREE3DP.FrontSide;this.wrap=(this.options&&this.options.wrap)?this.options.wrap:THREE3DP.RepeatWrapping;};THREE3DP.MTLLoader.MaterialCreator.prototype={constructor:THREE3DP.MTLLoader.MaterialCreator,crossOrigin:'anonymous',setCrossOrigin:function(value){this.crossOrigin=value;return this;},setManager:function(value){this.manager=value;},setMaterials:function(materialsInfo){this.materialsInfo=this.convert(materialsInfo);this.materials={};this.materialsArray=[];this.nameLookup={};},convert:function(materialsInfo){if(!this.options)return materialsInfo;var converted={};for(var mn in materialsInfo){var mat=materialsInfo[mn];var covmat={};converted[mn]=covmat;for(var prop in mat){var save=true;var value=mat[prop];var lprop=prop.toLowerCase();switch(lprop){case'kd':case'ka':case'ks':if(this.options&&this.options.normalizeRGB){value=[value[0]/255,value[1]/255,value[2]/255];}
if(this.options&&this.options.ignoreZeroRGBs){if(value[0]===0&&value[1]===0&&value[2]===0){save=false;}}
break;default:break;}
if(save){covmat[lprop]=value;}}}
return converted;},preload:function(){for(var mn in this.materialsInfo){this.create(mn);}},getIndex:function(materialName){return this.nameLookup[materialName];},getAsArray:function(){var index=0;for(var mn in this.materialsInfo){this.materialsArray[index]=this.create(mn);this.nameLookup[mn]=index;index++;}
return this.materialsArray;},create:function(materialName){if(this.materials[materialName]===undefined){this.createMaterial_(materialName);}
return this.materials[materialName];},createMaterial_:function(materialName){var scope=this;var mat=this.materialsInfo[materialName];var params={name:materialName,side:this.side};function resolveURL(baseUrl,url){if(typeof url!=='string'||url==='')
return'';if(/^https?:\/\//i.test(url))return url;return baseUrl+url;}
function setMapForType(mapType,value){if(params[mapType])return;var texParams=scope.getTextureParams(value,params);var map=scope.loadTexture(resolveURL(scope.baseUrl,texParams.url));map.repeat.copy(texParams.scale);map.offset.copy(texParams.offset);map.wrapS=scope.wrap;map.wrapT=scope.wrap;params[mapType]=map;}
for(var prop in mat){var value=mat[prop];var n;if(value==='')continue;switch(prop.toLowerCase()){case'kd':params.color=new THREE3DP.Color().fromArray(value);break;case'ks':params.specular=new THREE3DP.Color().fromArray(value);break;case'ke':params.emissive=new THREE3DP.Color().fromArray(value);break;case'map_kd':setMapForType("map",value);break;case'map_ks':setMapForType("specularMap",value);break;case'map_ke':setMapForType("emissiveMap",value);break;case'norm':setMapForType("normalMap",value);break;case'map_bump':case'bump':setMapForType("bumpMap",value);break;case'map_d':setMapForType("alphaMap",value);params.transparent=true;break;case'ns':params.shininess=parseFloat(value);break;case'd':n=parseFloat(value);if(n<1){params.opacity=n;params.transparent=true;}
break;case'tr':n=parseFloat(value);if(this.options&&this.options.invertTrProperty)n=1-n;if(n>0){params.opacity=1-n;params.transparent=true;}
break;default:break;}}
params.precision='mediump';this.materials[materialName]=new THREE3DP.MeshPhongMaterial(params);return this.materials[materialName];},getTextureParams:function(value,matParams){var texParams={scale:new THREE3DP.Vector2(1,1),offset:new THREE3DP.Vector2(0,0)};var items=value.split(/\s+/);var pos;pos=items.indexOf('-bm');if(pos>=0){matParams.bumpScale=parseFloat(items[pos+1]);items.splice(pos,2);}
pos=items.indexOf('-s');if(pos>=0){texParams.scale.set(parseFloat(items[pos+1]),parseFloat(items[pos+2]));items.splice(pos,4);}
pos=items.indexOf('-o');if(pos>=0){texParams.offset.set(parseFloat(items[pos+1]),parseFloat(items[pos+2]));items.splice(pos,4);}
texParams.url=items.join(' ').trim();return texParams;},loadTexture:function(url,mapping,onLoad,onProgress,onError){var texture;var loader=THREE3DP.Loader.Handlers.get(url);var manager=(this.manager!==undefined)?this.manager:THREE3DP.DefaultLoadingManager;if(loader===null){loader=new THREE3DP.TextureLoader(manager);}
if(loader.setCrossOrigin)loader.setCrossOrigin(this.crossOrigin);texture=loader.load(url,onLoad,onProgress,onError);if(mapping!==undefined)texture.mapping=mapping;return texture;}};
if(typeof THREE3DP=='undefined'&&typeof require!='undefined')
var THREE3DP=require('THREE3DP');if(typeof DxfParser=='undefined'&&typeof require!='undefined')
var DxfParser=require('dxf-parser');THREE3DP.Math.angle2=function(p1,p2){var v1=new THREE3DP.Vector2(p1.x,p1.y);var v2=new THREE3DP.Vector2(p2.x,p2.y);v2.sub(v1);v2.normalize();if(v2.y<0)return-Math.acos(v2.x);return Math.acos(v2.x);};THREE3DP.Math.polar=function(point,distance,angle){var result={};result.x=point.x+distance*Math.cos(angle);result.y=point.y+distance*Math.sin(angle);return result;};THREE3DP.BulgeGeometry=function(startPoint,endPoint,bulge,segments){var vertex,i,center,p0,p1,angle,radius,startAngle,thetaAngle;THREE3DP.Geometry.call(this);this.startPoint=p0=startPoint?new THREE3DP.Vector2(startPoint.x,startPoint.y):new THREE3DP.Vector2(0,0);this.endPoint=p1=endPoint?new THREE3DP.Vector2(endPoint.x,endPoint.y):new THREE3DP.Vector2(1,0);this.bulge=bulge=bulge||1;angle=4*Math.atan(bulge);radius=p0.distanceTo(p1)/2/Math.sin(angle/2);center=THREE3DP.Math.polar(startPoint,radius,THREE3DP.Math.angle2(p0,p1)+(Math.PI/2-angle/2));this.segments=segments=segments||Math.max(Math.abs(Math.ceil(angle/(Math.PI/18))),6);startAngle=THREE3DP.Math.angle2(center,p0);thetaAngle=angle/segments;this.vertices.push(new THREE3DP.Vector3(p0.x,p0.y,0));for(i=1;i<=segments-1;i++){vertex=THREE3DP.Math.polar(center,Math.abs(radius),startAngle+thetaAngle*i);this.vertices.push(new THREE3DP.Vector3(vertex.x,vertex.y,0));}};THREE3DP.BulgeGeometry.prototype=Object.create(THREE3DP.Geometry.prototype);THREE3DP.DXFLoader=function(manager){this.manager=(manager!==undefined)?manager:THREE3DP.DefaultLoadingManager;};THREE3DP.DXFLoader.prototype={constructor:THREE3DP.DXFLoader,load:function(url,onLoad,onProgress,onError){var scope=this;var loader=new THREE3DP.FileLoader(this.manager);loader.load(url,function(text){onLoad(scope.parse(new DxfParser().parseSync(text)));},onProgress,onError);},parse:function(data){var group=new THREE3DP.Object3D();var i,entity,obj;for(i=0;i<data.entities.length;i++){entity=data.entities[i];if(entity.type==='DIMENSION'){if(entity.block){var block=data.blocks[entity.block];if(!block){console.error('Missing referenced block "'+entity.block+'"');continue;}
for(var j=0;j<block.entities.length;j++){obj=drawEntity(block.entities[j],data);}}else{console.log('WARNING: No block for DIMENSION entity');}}else{obj=drawEntity(entity,data);}
if(obj){obj.matrixAutoUpdate=false;group.add(obj);}
obj=null;}
return group;function drawEntity(entity,data){var mesh;if(entity.type==='CIRCLE'||entity.type==='ARC'){mesh=drawCircle(entity,data);}else if(entity.type==='LWPOLYLINE'||entity.type==='LINE'||entity.type==='POLYLINE'){mesh=drawLine(entity,data);}else if(entity.type==='TEXT'){p3d.dxf_unsupported_entity='TEXT';mesh=drawText(entity,data);}else if(entity.type==='SOLID'){p3d.dxf_unsupported_entity='SOLID';mesh=drawSolid(entity,data);}else if(entity.type==='POINT'){mesh=drawPoint(entity,data);}else if(entity.type==='INSERT'){mesh=drawBlock(entity,data);}else if(entity.type==='SPLINE'){mesh=drawSpline(entity,data);}else if(entity.type==='MTEXT'){mesh=drawMtext(entity,data);}else if(entity.type==='ELLIPSE'){mesh=drawEllipse(entity,data);}else if(entity.type==='DIMENSION'){p3d.dxf_unsupported_entity='DIMENSION';var dimTypeEnum=entity.dimensionType&7;if(dimTypeEnum===0){mesh=drawDimension(entity,data);}else{console.log("Unsupported Dimension type: "+dimTypeEnum);}}
else{p3d.dxf_unsupported_entity=entity.type;console.log("Unsupported Entity Type: "+entity.type);}
return mesh;}
function drawDimension(entity,data){var block=data.blocks[entity.block];if(!block||!block.entities)return null;var group=new THREE3DP.Object3D();for(var i=0;i<block.entities.length;i++){var childEntity=drawEntity(block.entities[i],data,group);if(childEntity)group.add(childEntity);}
return group;}
function drawEllipse(entity,data){var color=getColor(entity,data);var xrad=Math.sqrt(Math.pow(entity.majorAxisEndPoint.x,2)+Math.pow(entity.majorAxisEndPoint.y,2));var yrad=xrad*entity.axisRatio;var rotation=Math.atan2(entity.majorAxisEndPoint.y,entity.majorAxisEndPoint.x);var curve=new THREE3DP.EllipseCurve(entity.center.x,entity.center.y,xrad,yrad,entity.startAngle,entity.endAngle,false,rotation);var points=curve.getPoints(50);var geometry=new THREE3DP.BufferGeometry().setFromPoints(points);var material=new THREE3DP.LineBasicMaterial({linewidth:1,color:color});var ellipse=new THREE3DP.Line(geometry,material);return ellipse;}
function drawSpline(entity,data){var color=getColor(entity,data);var points=entity.controlPoints.map(function(vec){return new THREE3DP.Vector2(vec.x,vec.y);});var interpolatedPoints=[];var curve;if(entity.degreeOfSplineCurve===2||entity.degreeOfSplineCurve===3){for(var i=0;i+2<points.length;i=i+2){if(entity.degreeOfSplineCurve===2){curve=new THREE3DP.QuadraticBezierCurve(points[i],points[i+1],points[i+2]);}else{curve=new THREE3DP.QuadraticBezierCurve3(points[i],points[i+1],points[i+2]);}
interpolatedPoints.push.apply(interpolatedPoints,curve.getPoints(50));}}else{curve=new THREE3DP.SplineCurve(points);interpolatedPoints=curve.getPoints(100);}
var geometry=new THREE3DP.BufferGeometry().setFromPoints(interpolatedPoints);var material=new THREE3DP.LineBasicMaterial({linewidth:1,color:color});var splineObject=new THREE3DP.Line(geometry,material);return splineObject;}
function drawMtext(entity,data){var color=getColor(entity,data);var geometry=new THREE3DP.TextGeometry(entity.text,{font:p3d.font,size:entity.height*(4/5),height:1});var material=new THREE3DP.MeshBasicMaterial({color:color});var text=new THREE3DP.Mesh(geometry,material);var measure=new THREE3DP.Box3();measure.setFromObject(text);var textWidth=measure.max.x-measure.min.x;if(textWidth>entity.width){console.log("Can't render this multiline MTEXT entity, sorry.",entity);return undefined;}
text.position.z=0;switch(entity.attachmentPoint){case 1:text.position.x=entity.position.x;text.position.y=entity.position.y-entity.height;break;case 2:text.position.x=entity.position.x-textWidth/2;text.position.y=entity.position.y-entity.height;break;case 3:text.position.x=entity.position.x-textWidth;text.position.y=entity.position.y-entity.height;break;case 4:text.position.x=entity.position.x;text.position.y=entity.position.y-entity.height/2;break;case 5:text.position.x=entity.position.x-textWidth/2;text.position.y=entity.position.y-entity.height/2;break;case 6:text.position.x=entity.position.x-textWidth;text.position.y=entity.position.y-entity.height/2;break;case 7:text.position.x=entity.position.x;text.position.y=entity.position.y;break;case 8:text.position.x=entity.position.x-textWidth/2;text.position.y=entity.position.y;break;case 9:text.position.x=entity.position.x-textWidth;text.position.y=entity.position.y;break;default:return undefined;};return text;}
function drawLine(entity,data){var geometry=new THREE3DP.Geometry(),color=getColor(entity,data),material,lineType,vertex,startPoint,endPoint,bulgeGeometry,bulge,i,line;for(i=0;i<entity.vertices.length;i++){if(entity.vertices[i].bulge){bulge=entity.vertices[i].bulge;startPoint=entity.vertices[i];endPoint=i+1<entity.vertices.length?entity.vertices[i+1]:geometry.vertices[0];bulgeGeometry=new THREE3DP.BulgeGeometry(startPoint,endPoint,bulge);geometry.vertices.push.apply(geometry.vertices,bulgeGeometry.vertices);}else{vertex=entity.vertices[i];geometry.vertices.push(new THREE3DP.Vector3(vertex.x,vertex.y,vertex.z));}}
if(entity.shape)geometry.vertices.push(geometry.vertices[0]);if(entity.lineType){lineType=data.tables.lineType.lineTypes[entity.lineType];}
if(lineType&&lineType.pattern&&lineType.pattern.length!==0){material=new THREE3DP.LineDashedMaterial({color:color,gapSize:4,dashSize:4});}else{material=new THREE3DP.LineBasicMaterial({linewidth:1,color:color});}
line=new THREE3DP.Line(geometry,material);return line;}
function drawCircle(entity,data){var geometry,material,circle;geometry=new THREE3DP.CircleGeometry(entity.radius,32,entity.startAngle,entity.angleLength);geometry.vertices.shift();material=new THREE3DP.LineBasicMaterial({color:getColor(entity,data)});circle=new THREE3DP.Line(geometry,material);circle.position.x=entity.center.x;circle.position.y=entity.center.y;circle.position.z=entity.center.z;return circle;}
function drawSolid(entity,data){var material,mesh,verts,geometry=new THREE3DP.Geometry();verts=geometry.vertices;verts.push(new THREE3DP.Vector3(entity.points[0].x,entity.points[0].y,entity.points[0].z));verts.push(new THREE3DP.Vector3(entity.points[1].x,entity.points[1].y,entity.points[1].z));verts.push(new THREE3DP.Vector3(entity.points[2].x,entity.points[2].y,entity.points[2].z));verts.push(new THREE3DP.Vector3(entity.points[3].x,entity.points[3].y,entity.points[3].z));var vector1=new THREE3DP.Vector3();var vector2=new THREE3DP.Vector3();vector1.subVectors(verts[1],verts[0]);vector2.subVectors(verts[2],verts[0]);vector1.cross(vector2);if(vector1.z<0){geometry.faces.push(new THREE3DP.Face3(2,1,0));geometry.faces.push(new THREE3DP.Face3(2,3,1));}else{geometry.faces.push(new THREE3DP.Face3(0,1,2));geometry.faces.push(new THREE3DP.Face3(1,3,2));}
material=new THREE3DP.MeshBasicMaterial({color:getColor(entity,data)});return new THREE3DP.Mesh(geometry,material);}
function drawText(entity,data){var geometry,material,text;if(!p3d.font)
return console.warn('Text is not supported without a THREE3DP.js font loaded with THREE3DP.FontLoader! Load a font of your choice and pass this into the constructor. See the sample for this repository or THREE3DP.js examples at http://THREE3DP.js.org/examples/?q=text#webgl_geometry_text for more details.');console.log(p3d.font);geometry=new THREE3DP.TextGeometry(entity.text,{font:p3d.font,height:0,size:entity.textHeight||12});material=new THREE3DP.MeshBasicMaterial({color:getColor(entity,data)});text=new THREE3DP.Mesh(geometry,material);text.position.x=entity.startPoint.x;text.position.y=entity.startPoint.y;text.position.z=entity.startPoint.z;var bbox=new THREE3DP.Box3().setFromObject(text);text.geometry.boundingBox=bbox;return text;}
function drawPoint(entity,data){var geometry,material,point;geometry=new THREE3DP.Geometry();geometry.vertices.push(new THREE3DP.Vector3(entity.position.x,entity.position.y,entity.position.z));var numPoints=1;var color=getColor(entity,data);var colors=new Float32Array(numPoints*3);colors[0]=color.r;colors[1]=color.g;colors[2]=color.b;geometry.colors=colors;geometry.computeBoundingBox();material=new THREE3DP.PointsMaterial({size:0.05,vertexColors:THREE3DP.VertexColors});point=new THREE3DP.Points(geometry,material);return point;}
function drawBlock(entity,data){var block=data.blocks[entity.name];var group=new THREE3DP.Object3D()
if(entity.xScale)group.scale.x=entity.xScale;if(entity.yScale)group.scale.y=entity.yScale;if(entity.rotation){group.rotation.z=entity.rotation*Math.PI/180;}
if(entity.position){group.position.x=entity.position.x;group.position.y=entity.position.y;group.position.z=entity.position.z;}
if(typeof(block.entities)!='undefined'){for(var i=0;i<block.entities.length;i++){var childEntity=drawEntity(block.entities[i],data,group);if(childEntity)group.add(childEntity);}}
else{console.log(entity)}
return group;}
function getColor(entity,data){var color=0x000000;if(entity.color)color=entity.color;else if(data.tables&&data.tables.layer&&data.tables.layer.layers[entity.layer])
color=data.tables.layer.layers[entity.layer].color;if(color==null||color===0xffffff){color=0x000000;}
return color;}
function createLineTypeShaders(data){var ltype,type;if(!data.tables||!data.tables.lineType)return;var ltypes=data.tables.lineType.lineTypes;for(type in ltypes){ltype=ltypes[type];if(!ltype.pattern)continue;ltype.material=createDashedLineShader(ltype.pattern);}}
function createDashedLineShader(pattern){var i,dashedLineShader={},totalLength=0.0;for(i=0;i<pattern.length;i++){totalLength+=Math.abs(pattern[i]);}
dashedLineShader.uniforms=THREE3DP.UniformsUtils.merge([THREE3DP.UniformsLib['common'],THREE3DP.UniformsLib['fog'],{'pattern':{type:'fv1',value:pattern},'patternLength':{type:'f',value:totalLength}}]);dashedLineShader.vertexShader=['attribute float lineDistance;','varying float vLineDistance;',THREE3DP.ShaderChunk['color_pars_vertex'],'void main() {',THREE3DP.ShaderChunk['color_vertex'],'vLineDistance = lineDistance;','gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );','}'].join('\n');dashedLineShader.fragmentShader=['uniform vec3 diffuse;','uniform float opacity;','uniform float pattern['+pattern.length+'];','uniform float patternLength;','varying float vLineDistance;',THREE3DP.ShaderChunk['color_pars_fragment'],THREE3DP.ShaderChunk['fog_pars_fragment'],'void main() {','float pos = mod(vLineDistance, patternLength);','for ( int i = 0; i < '+pattern.length+'; i++ ) {','pos = pos - abs(pattern[i]);','if( pos < 0.0 ) {','if( pattern[i] > 0.0 ) {','gl_FragColor = vec4(1.0, 0.0, 0.0, opacity );','break;','}','discard;','}','}',THREE3DP.ShaderChunk['color_fragment'],THREE3DP.ShaderChunk['fog_fragment'],'}'].join('\n');return dashedLineShader;}}};
function initBulgeGeometry(){THREE3DP.BulgeGeometry=function(startPoint,endPoint,bulge,segments){var vertex,i,center,p0,p1,angle,radius,startAngle,thetaAngle;THREE3DP.Geometry.call(this);this.startPoint=p0=startPoint?new THREE3DP.Vector2(startPoint.x,startPoint.y):new THREE3DP.Vector2(0,0);this.endPoint=p1=endPoint?new THREE3DP.Vector2(endPoint.x,endPoint.y):new THREE3DP.Vector2(1,0);this.bulge=bulge=bulge||1;angle=4*Math.atan(bulge);radius=p0.distanceTo(p1)/2/Math.sin(angle/2);center=THREE3DP.Math.polar(startPoint,radius,THREE3DP.Math.angle2(p0,p1)+(Math.PI/2-angle/2));this.segments=segments=segments||Math.max(Math.abs(Math.ceil(angle/(Math.PI/18))),6);startAngle=THREE3DP.Math.angle2(center,p0);thetaAngle=angle/segments;this.vertices.push(new THREE3DP.Vector3(p0.x,p0.y,0));for(i=1;i<=segments-1;i++){vertex=THREE3DP.Math.polar(center,Math.abs(radius),startAngle+thetaAngle*i);this.vertices.push(new THREE3DP.Vector3(vertex.x,vertex.y,0));}};THREE3DP.BulgeGeometry.prototype=Object.create(THREE3DP.Geometry.prototype);THREE3DP.Math.angle2=function(p1,p2){var v1=new THREE3DP.Vector2(p1.x,p1.y);var v2=new THREE3DP.Vector2(p2.x,p2.y);v2.sub(v1);v2.normalize();if(v2.y<0)return-Math.acos(v2.x);return Math.acos(v2.x);};THREE3DP.Math.polar=function(point,distance,angle){var result={};result.x=point.x+distance*Math.cos(angle);result.y=point.y+distance*Math.sin(angle);return result;};}
initBulgeGeometry();var ThreeDxf;(function(ThreeDxf){ThreeDxf.Viewer=function(data,parent,width,height,font){var parent=jQuery(parent);createLineTypeShaders(data);if(jQuery('#p3d-bulk-uploader').length>0){var bulk_mode=true;}
else{var bulk_mode=false;}
var scene=new THREE3DP.Scene();initBulgeGeometry();var i,entity,obj,min_x,min_y,min_z,max_x,max_y,max_z;var dims={min:{x:false,y:false,z:false},max:{x:false,y:false,z:false}};for(i=0;i<data.entities.length;i++){entity=data.entities[i];if(entity.type==='DIMENSION'){if(entity.block){var block=data.blocks[entity.block];if(!block){console.error('Missing referenced block "'+entity.block+'"');continue;}
for(var j=0;j<block.entities.length;j++){obj=drawEntity(block.entities[j],data);}}else{console.log('WARNING: No block for DIMENSION entity');}}else{obj=drawEntity(entity,data);}
if(obj){var bbox=new THREE3DP.Box3().setFromObject(obj);if(bbox.min.x&&((dims.min.x===false)||(dims.min.x>bbox.min.x)))dims.min.x=bbox.min.x;if(bbox.min.y&&((dims.min.y===false)||(dims.min.y>bbox.min.y)))dims.min.y=bbox.min.y;if(bbox.min.z&&((dims.min.z===false)||(dims.min.z>bbox.min.z)))dims.min.z=bbox.min.z;if(bbox.max.x&&((dims.max.x===false)||(dims.max.x<bbox.max.x)))dims.max.x=bbox.max.x;if(bbox.max.y&&((dims.max.y===false)||(dims.max.y<bbox.max.y)))dims.max.y=bbox.max.y;if(bbox.max.z&&((dims.max.z===false)||(dims.max.z<bbox.max.z)))dims.max.z=bbox.max.z;scene.add(obj);}
obj=null;}
width=width||parent.innerWidth();height=height||parent.innerHeight();var aspectRatio=width/height;var upperRightCorner={x:dims.max.x,y:dims.max.y};var lowerLeftCorner={x:dims.min.x,y:dims.min.y};var vp_width=upperRightCorner.x-lowerLeftCorner.x;var vp_height=upperRightCorner.y-lowerLeftCorner.y;var center=center||{x:vp_width/2+lowerLeftCorner.x,y:vp_height/2+lowerLeftCorner.y};var extentsAspectRatio=Math.abs(vp_width/vp_height);if(aspectRatio>extentsAspectRatio){vp_width=vp_height*aspectRatio;}else{vp_height=vp_width/aspectRatio;}
var viewPort={bottom:-vp_height/2,left:-vp_width/2,top:vp_height/2,right:vp_width/2,center:{x:center.x,y:center.y}};var camera=new THREE3DP.OrthographicCamera(viewPort.left,viewPort.right,viewPort.top,viewPort.bottom,1,19);camera.position.z=10;camera.position.x=viewPort.center.x;camera.position.y=viewPort.center.y;var renderer=this.renderer=new THREE3DP.WebGLRenderer({preserveDrawingBuffer:true});renderer.setSize(width,height);renderer.setClearColor(0xfffffff,1);if(!bulk_mode){parent.prepend(renderer.domElement);parent.show();}
if(p3d.display_mode!='fullscreen'&&!bulk_mode){var controls=new THREE3DP.OrbitControls(camera,parent.get(0));controls.enableRotate=false;controls.target.x=camera.position.x;controls.target.y=camera.position.y;controls.target.z=0;controls.zoomSpeed=3;}
this.render=function(){renderer.render(scene,camera)};if(p3d.display_mode!='fullscreen'&&!bulk_mode){controls.addEventListener('change',this.render);}
this.render();if(p3d.display_mode!='fullscreen'&&!bulk_mode){controls.update();}
for(var child of scene.children){if(typeof(child.geometry)!='undefined'){child.geometry.computeBoundingBox();var bbox=child.geometry.boundingBox;break;}}
var minX=+Infinity,maxX=-Infinity,minY=+Infinity,maxY=-Infinity;for(var child of scene.children){if(typeof(child.geometry)=='undefined')continue;child.geometry.computeBoundingBox();if(bbox.min.x.length==0)bbox.min.x=child.geometry.boundingBox.min.x;if(bbox.min.y.length==0)bbox.min.x=child.geometry.boundingBox.min.y;if(bbox.max.x.length==0)bbox.max.x=child.geometry.boundingBox.max.x;if(bbox.max.y.length==0)bbox.max.x=child.geometry.boundingBox.max.y;if(child.geometry.boundingBox.min.x<bbox.min.x)bbox.min.x=child.geometry.boundingBox.min.x;if(child.geometry.boundingBox.min.y<bbox.min.y)bbox.min.y=child.geometry.boundingBox.min.y;if(child.geometry.boundingBox.max.x>bbox.max.x)bbox.max.x=child.geometry.boundingBox.max.x;if(child.geometry.boundingBox.max.y>bbox.max.y)bbox.max.y=child.geometry.boundingBox.max.y;}
p3d.boundingBox=bbox;jQuery('#p3d-viewer canvas:visible').on('click',function(event){var el=jQuery(renderer.domElement);var vector=new THREE3DP.Vector3(((event.pageX-el.offset().left)/el.innerWidth())*2-1,-((event.pageY-el.offset().top)/el.innerHeight())*2+1,0.5);vector.unproject(camera);var dir=vector.sub(camera.position).normalize();var distance=-camera.position.z/dir.z;var pos=camera.position.clone().add(dir.multiplyScalar(distance));});this.resize=function(width,height){var originalWidth=renderer.domElement.width;var originalHeight=renderer.domElement.height;var hscale=width/originalWidth;var vscale=height/originalHeight;camera.top=(vscale*camera.top);camera.bottom=(vscale*camera.bottom);camera.left=(hscale*camera.left);camera.right=(hscale*camera.right);renderer.setSize(width,height);renderer.setClearColor(0xfffffff,1);this.render();};function drawEntity(entity,data){var mesh;if(entity.type==='CIRCLE'||entity.type==='ARC'){mesh=drawCircle(entity,data);}else if(entity.type==='LWPOLYLINE'||entity.type==='LINE'||entity.type==='POLYLINE'){mesh=drawLine(entity,data);}else if(entity.type==='TEXT'){p3d.dxf_unsupported_entity='TEXT';mesh=drawText(entity,data);}else if(entity.type==='SOLID'){p3d.dxf_unsupported_entity='SOLID';mesh=drawSolid(entity,data);}else if(entity.type==='POINT'){mesh=drawPoint(entity,data);}else if(entity.type==='INSERT'){mesh=drawBlock(entity,data);}else if(entity.type==='SPLINE'){mesh=drawSpline(entity,data);}else if(entity.type==='MTEXT'){mesh=drawMtext(entity,data);}else if(entity.type==='ELLIPSE'){mesh=drawEllipse(entity,data);}
else{p3d.dxf_unsupported_entity=entity.type;console.log("Unsupported Entity Type: "+entity.type);}
return mesh;}
function drawEllipse(entity,data){var color=getColor(entity,data);var xrad=Math.sqrt(Math.pow(entity.majorAxisEndPoint.x,2)+Math.pow(entity.majorAxisEndPoint.y,2));var yrad=xrad*entity.axisRatio;var rotation=Math.atan2(entity.majorAxisEndPoint.y,entity.majorAxisEndPoint.x);var curve=new THREE3DP.EllipseCurve(entity.center.x,entity.center.y,xrad,yrad,entity.startAngle,entity.endAngle,false,rotation);var points=curve.getPoints(50);var geometry=new THREE3DP.BufferGeometry().setFromPoints(points);var material=new THREE3DP.LineBasicMaterial({linewidth:1,color:color});var ellipse=new THREE3DP.Line(geometry,material);return ellipse;}
function drawMtext(entity,data){var color=getColor(entity,data);var geometry=new THREE3DP.TextGeometry(entity.text,{font:font,size:entity.height*(4/5),height:1});var material=new THREE3DP.MeshBasicMaterial({color:color});var text=new THREE3DP.Mesh(geometry,material);var measure=new THREE3DP.Box3();measure.setFromObject(text);var textWidth=measure.max.x-measure.min.x;if(textWidth>entity.width){console.log("Can't render this multipline MTEXT entity, sorry.",entity);return undefined;}
text.position.z=0;switch(entity.attachmentPoint){case 1:text.position.x=entity.position.x;text.position.y=entity.position.y-entity.height;break;case 2:text.position.x=entity.position.x-textWidth/2;text.position.y=entity.position.y-entity.height;break;case 3:text.position.x=entity.position.x-textWidth;text.position.y=entity.position.y-entity.height;break;case 4:text.position.x=entity.position.x;text.position.y=entity.position.y-entity.height/2;break;case 5:text.position.x=entity.position.x-textWidth/2;text.position.y=entity.position.y-entity.height/2;break;case 6:text.position.x=entity.position.x-textWidth;text.position.y=entity.position.y-entity.height/2;break;case 7:text.position.x=entity.position.x;text.position.y=entity.position.y;break;case 8:text.position.x=entity.position.x-textWidth/2;text.position.y=entity.position.y;break;case 9:text.position.x=entity.position.x-textWidth;text.position.y=entity.position.y;break;default:return undefined;};return text;}
function drawSpline(entity,data){var color=getColor(entity,data);var points=entity.controlPoints.map(function(vec){return new THREE3DP.Vector2(vec.x,vec.y);});var interpolatedPoints=[];if(entity.degreeOfSplineCurve==2){for(var i=0;i+2<points.length;i=i+2){curve=new THREE3DP.QuadraticBezierCurve(points[i],points[i+1],points[i+2]);interpolatedPoints.push.apply(interpolatedPoints,curve.getPoints(50));}}else{curve=new THREE3DP.SplineCurve(points);interpolatedPoints=curve.getPoints(100);}
var geometry=new THREE3DP.BufferGeometry().setFromPoints(interpolatedPoints);var material=new THREE3DP.LineBasicMaterial({linewidth:1,color:color});var splineObject=new THREE3DP.Line(geometry,material);return splineObject;}
function drawLine(entity,data){var geometry=new THREE3DP.Geometry(),color=getColor(entity,data),material,lineType,vertex,startPoint,endPoint,bulgeGeometry,bulge,i,line;for(i=0;i<entity.vertices.length;i++){if(entity.vertices[i].bulge){bulge=entity.vertices[i].bulge;startPoint=entity.vertices[i];endPoint=i+1<entity.vertices.length?entity.vertices[i+1]:geometry.vertices[0];bulgeGeometry=new THREE3DP.BulgeGeometry(startPoint,endPoint,bulge);geometry.vertices.push.apply(geometry.vertices,bulgeGeometry.vertices);}else{vertex=entity.vertices[i];geometry.vertices.push(new THREE3DP.Vector3(vertex.x,vertex.y,0));}}
if(entity.shape)geometry.vertices.push(geometry.vertices[0]);if(entity.lineType){lineType=data.tables.lineType.lineTypes[entity.lineType];}
if(lineType&&lineType.pattern&&lineType.pattern.length!==0){material=new THREE3DP.LineDashedMaterial({color:color,gapSize:4,dashSize:4});}else{material=new THREE3DP.LineBasicMaterial({linewidth:1,color:color});}
line=new THREE3DP.Line(geometry,material);return line;}
function drawCircle(entity,data){var geometry,material,circle;geometry=new THREE3DP.CircleGeometry(entity.radius,32,entity.startAngle,entity.angleLength);geometry.vertices.shift();material=new THREE3DP.LineBasicMaterial({color:getColor(entity,data)});circle=new THREE3DP.Line(geometry,material);circle.position.x=entity.center.x;circle.position.y=entity.center.y;circle.position.z=entity.center.z;return circle;}
function drawSolid(entity,data){var material,mesh,verts,geometry=new THREE3DP.Geometry();verts=geometry.vertices;verts.push(new THREE3DP.Vector3(entity.points[0].x,entity.points[0].y,entity.points[0].z));verts.push(new THREE3DP.Vector3(entity.points[1].x,entity.points[1].y,entity.points[1].z));verts.push(new THREE3DP.Vector3(entity.points[2].x,entity.points[2].y,entity.points[2].z));verts.push(new THREE3DP.Vector3(entity.points[3].x,entity.points[3].y,entity.points[3].z));var vector1=new THREE3DP.Vector3();var vector2=new THREE3DP.Vector3();vector1.subVectors(verts[1],verts[0]);vector2.subVectors(verts[2],verts[0]);vector1.cross(vector2);if(vector1.z<0){geometry.faces.push(new THREE3DP.Face3(2,1,0));geometry.faces.push(new THREE3DP.Face3(2,3,1));}else{geometry.faces.push(new THREE3DP.Face3(0,1,2));geometry.faces.push(new THREE3DP.Face3(1,3,2));}
material=new THREE3DP.MeshBasicMaterial({color:getColor(entity,data)});return new THREE3DP.Mesh(geometry,material);}
function drawText(entity,data){var geometry,material,text;if(!font)
return console.warn('Text is not supported without a THREE3DP.js font loaded with THREE3DP.FontLoader! Load a font of your choice and pass this into the constructor. See the sample for this repository or THREE3DP.js examples at http://threejs.org/examples/?q=text#webgl_geometry_text for more details.');geometry=new THREE3DP.TextGeometry(entity.text,{font:font,height:0,size:entity.textHeight||12});material=new THREE3DP.MeshBasicMaterial({color:getColor(entity,data)});text=new THREE3DP.Mesh(geometry,material);text.position.x=entity.startPoint.x;text.position.y=entity.startPoint.y;text.position.z=entity.startPoint.z;return text;}
function drawPoint(entity,data){var geometry,material,point;geometry=new THREE3DP.Geometry();geometry.vertices.push(new THREE3DP.Vector3(entity.position.x,entity.position.y,entity.position.z));var numPoints=1;var color=getColor(entity,data);var colors=new Float32Array(numPoints*3);colors[0]=color.r;colors[1]=color.g;colors[2]=color.b;geometry.colors=colors;geometry.computeBoundingBox();material=new THREE3DP.PointsMaterial({size:0.05,vertexColors:THREE3DP.VertexColors});point=new THREE3DP.Points(geometry,material);scene.add(point);}
function drawBlock(entity,data){var block=data.blocks[entity.name];if(!block.entities)return null;var group=new THREE3DP.Object3D()
if(entity.xScale)group.scale.x=entity.xScale;if(entity.yScale)group.scale.y=entity.yScale;if(entity.rotation){group.rotation.z=entity.rotation*Math.PI/180;}
if(entity.position){group.position.x=entity.position.x;group.position.y=entity.position.y;group.position.z=entity.position.z;}
for(var i=0;i<block.entities.length;i++){var childEntity=drawEntity(block.entities[i],data,group);if(childEntity)group.add(childEntity);}
return group;}
function getColor(entity,data){var color=0x000000;if(entity.color)color=entity.color;else if(data.tables&&data.tables.layer&&data.tables.layer.layers[entity.layer])
color=data.tables.layer.layers[entity.layer].color;if(color==null||color===0xffffff){color=0x000000;}
return color;}
function createLineTypeShaders(data){var ltype,type;if(!data.tables||!data.tables.lineType)return;var ltypes=data.tables.lineType.lineTypes;for(type in ltypes){ltype=ltypes[type];if(!ltype.pattern)continue;ltype.material=createDashedLineShader(ltype.pattern);}}
function createDashedLineShader(pattern){var i,dashedLineShader={},totalLength=0.0;for(i=0;i<pattern.length;i++){totalLength+=Math.abs(pattern[i]);}
dashedLineShader.uniforms=THREE3DP.UniformsUtils.merge([THREE3DP.UniformsLib['common'],THREE3DP.UniformsLib['fog'],{'pattern':{type:'fv1',value:pattern},'patternLength':{type:'f',value:totalLength}}]);dashedLineShader.vertexShader=['attribute float lineDistance;','varying float vLineDistance;',THREE3DP.ShaderChunk['color_pars_vertex'],'void main() {',THREE3DP.ShaderChunk['color_vertex'],'vLineDistance = lineDistance;','gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );','}'].join('\n');dashedLineShader.fragmentShader=['uniform vec3 diffuse;','uniform float opacity;','uniform float pattern['+pattern.length+'];','uniform float patternLength;','varying float vLineDistance;',THREE3DP.ShaderChunk['color_pars_fragment'],THREE3DP.ShaderChunk['fog_pars_fragment'],'void main() {','float pos = mod(vLineDistance, patternLength);','for ( int i = 0; i < '+pattern.length+'; i++ ) {','pos = pos - abs(pattern[i]);','if( pos < 0.0 ) {','if( pattern[i] > 0.0 ) {','gl_FragColor = vec4(1.0, 0.0, 0.0, opacity );','break;','}','discard;','}','}',THREE3DP.ShaderChunk['color_fragment'],THREE3DP.ShaderChunk['fog_fragment'],'}'].join('\n');return dashedLineShader;}
function findExtents(scene){for(var child of scene.children){var minX,maxX,minY,maxY;if(child.position){minX=Math.min(child.position.x,minX);minY=Math.min(child.position.y,minY);maxX=Math.max(child.position.x,maxX);maxY=Math.max(child.position.y,maxY);}}
return{min:{x:minX,y:minY},max:{x:maxX,y:maxY}};}}})(ThreeDxf||(ThreeDxf={}));;
var THREEx=THREEx||{}
THREEx.dilateGeometry=function(geometry,length){var vertexNormals=new Array(geometry.vertices.length);geometry.faces.forEach(function(face){if(face instanceof THREE3DP.Face4){vertexNormals[face.a]=face.vertexNormals[0];vertexNormals[face.b]=face.vertexNormals[1];vertexNormals[face.c]=face.vertexNormals[2];vertexNormals[face.d]=face.vertexNormals[3];}else if(face instanceof THREE3DP.Face3){vertexNormals[face.a]=face.vertexNormals[0];vertexNormals[face.b]=face.vertexNormals[1];vertexNormals[face.c]=face.vertexNormals[2];}else console.assert(false);});geometry.vertices.forEach(function(vertex,idx){var vertexNormal=vertexNormals[idx];vertex.x+=vertexNormal.x*length;vertex.y+=vertexNormal.y*length;vertex.z+=vertexNormal.z*length;});};
var THREEx=THREEx||{}
THREEx.createAtmosphereMaterial=function(){var vertexShader=['varying vec3 vVertexWorldPosition;','varying vec3 vVertexNormal;','varying vec4 vFragColor;','void main(){',' vVertexNormal = normalize(normalMatrix * normal);',' vVertexWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;',' // set gl_Position',' gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);','}',].join('\n')
var fragmentShader=['uniform vec3 glowColor;','uniform float coeficient;','uniform float power;','varying vec3 vVertexNormal;','varying vec3 vVertexWorldPosition;','varying vec4 vFragColor;','void main(){',' vec3 worldCameraToVertex= vVertexWorldPosition - cameraPosition;',' vec3 viewCameraToVertex = (viewMatrix * vec4(worldCameraToVertex, 0.0)).xyz;',' viewCameraToVertex = normalize(viewCameraToVertex);',' float intensity  = pow(coeficient + dot(vVertexNormal, viewCameraToVertex), power);',' gl_FragColor  = vec4(glowColor, intensity);','}',].join('\n')
var material=new THREE3DP.ShaderMaterial({uniforms:{coeficient:{type:"f",value:1.0},power:{type:"f",value:2},glowColor:{type:"c",value:new THREE3DP.Color('pink')},},vertexShader:vertexShader,fragmentShader:fragmentShader,transparent:true,depthWrite:false,});return material};
var THREEx=THREEx||{}
THREEx.GeometricGlowMesh=function(mesh,in_distance,out_distance){var object3d=new THREE3DP.Object3D
var geometry=mesh.geometry.clone()
THREEx.dilateGeometry(geometry,in_distance)
var material=THREEx.createAtmosphereMaterial()
material.uniforms.glowColor.value=new THREE3DP.Color('cyan')
material.uniforms.coeficient.value=1.1
material.uniforms.power.value=1.4
var insideMesh=new THREE3DP.Mesh(geometry,material);object3d.add(insideMesh);var geometry=mesh.geometry.clone()
THREEx.dilateGeometry(geometry,out_distance)
var material=THREEx.createAtmosphereMaterial()
material.uniforms.glowColor.value=new THREE3DP.Color('cyan')
material.uniforms.coeficient.value=0.1
material.uniforms.power.value=1.2
material.side=THREE3DP.BackSide
var outsideMesh=new THREE3DP.Mesh(geometry,material);object3d.add(outsideMesh);this.object3d=object3d
this.insideMesh=insideMesh
this.outsideMesh=outsideMesh};

(function(a){a.fn.hoverIntent=function(k,j){var l={sensitivity:7,interval:100,timeout:0};l=a.extend(l,j?{over:k,out:j}:k);var n,m,h,d;var e=function(f){n=f.pageX;m=f.pageY};var c=function(g,f){f.hoverIntent_t=clearTimeout(f.hoverIntent_t);if((Math.abs(h-n)+Math.abs(d-m))<l.sensitivity){a(f).unbind("mousemove",e);f.hoverIntent_s=1;return l.over.apply(f,[g])}else{h=n;d=m;f.hoverIntent_t=setTimeout(function(){c(g,f)},l.interval)}};var i=function(g,f){f.hoverIntent_t=clearTimeout(f.hoverIntent_t);f.hoverIntent_s=0;return l.out.apply(f,[g])};var b=function(q){var o=(q.type=="mouseover"?q.fromElement:q.toElement)||q.relatedTarget;while(o&&o!=this){try{o=o.parentNode}catch(q){o=this}}if(o==this){return false}var g=jQuery.extend({},q);var f=this;if(f.hoverIntent_t){f.hoverIntent_t=clearTimeout(f.hoverIntent_t)}if(q.type=="mouseover"){h=g.pageX;d=g.pageY;a(f).bind("mousemove",e);if(f.hoverIntent_s!=1){f.hoverIntent_t=setTimeout(function(){c(g,f)},l.interval)}}else{a(f).unbind("mousemove",e);if(f.hoverIntent_s==1){f.hoverIntent_t=setTimeout(function(){i(g,f)},l.timeout)}}};return this.mouseover(b).mouseout(b)}})(jQuery);
var nAgt=navigator.userAgent;if(!jQuery.browser){jQuery.browser={},jQuery.browser.mozilla=!1,jQuery.browser.webkit=!1,jQuery.browser.opera=!1,jQuery.browser.safari=!1,jQuery.browser.chrome=!1,jQuery.browser.androidStock=!1,jQuery.browser.msie=!1,jQuery.browser.ua=nAgt,jQuery.browser.name=navigator.appName,jQuery.browser.fullVersion=""+parseFloat(navigator.appVersion),jQuery.browser.majorVersion=parseInt(navigator.appVersion,10);var nameOffset,verOffset,ix;if(-1!=(verOffset=nAgt.indexOf("Opera")))jQuery.browser.opera=!0,jQuery.browser.name="Opera",jQuery.browser.fullVersion=nAgt.substring(verOffset+6),-1!=(verOffset=nAgt.indexOf("Version"))&&(jQuery.browser.fullVersion=nAgt.substring(verOffset+8));else if(-1!=(verOffset=nAgt.indexOf("OPR")))jQuery.browser.opera=!0,jQuery.browser.name="Opera",jQuery.browser.fullVersion=nAgt.substring(verOffset+4);else if(-1!=(verOffset=nAgt.indexOf("MSIE")))jQuery.browser.msie=!0,jQuery.browser.name="Microsoft Internet Explorer",jQuery.browser.fullVersion=nAgt.substring(verOffset+5);else if(-1!=nAgt.indexOf("Trident")||-1!=nAgt.indexOf("Edge")){jQuery.browser.msie=!0,jQuery.browser.name="Microsoft Internet Explorer";var start=nAgt.indexOf("rv:")+3,end=start+4;jQuery.browser.fullVersion=nAgt.substring(start,end)}else-1!=(verOffset=nAgt.indexOf("Chrome"))?(jQuery.browser.webkit=!0,jQuery.browser.chrome=!0,jQuery.browser.name="Chrome",jQuery.browser.fullVersion=nAgt.substring(verOffset+7)):nAgt.indexOf("mozilla/5.0")>-1&&nAgt.indexOf("android ")>-1&&nAgt.indexOf("applewebkit")>-1&&!(nAgt.indexOf("chrome")>-1)?(verOffset=nAgt.indexOf("Chrome"),jQuery.browser.webkit=!0,jQuery.browser.androidStock=!0,jQuery.browser.name="androidStock",jQuery.browser.fullVersion=nAgt.substring(verOffset+7)):-1!=(verOffset=nAgt.indexOf("Safari"))?(jQuery.browser.webkit=!0,jQuery.browser.safari=!0,jQuery.browser.name="Safari",jQuery.browser.fullVersion=nAgt.substring(verOffset+7),-1!=(verOffset=nAgt.indexOf("Version"))&&(jQuery.browser.fullVersion=nAgt.substring(verOffset+8))):-1!=(verOffset=nAgt.indexOf("AppleWebkit"))?(jQuery.browser.webkit=!0,jQuery.browser.safari=!0,jQuery.browser.name="Safari",jQuery.browser.fullVersion=nAgt.substring(verOffset+7),-1!=(verOffset=nAgt.indexOf("Version"))&&(jQuery.browser.fullVersion=nAgt.substring(verOffset+8))):-1!=(verOffset=nAgt.indexOf("Firefox"))?(jQuery.browser.mozilla=!0,jQuery.browser.name="Firefox",jQuery.browser.fullVersion=nAgt.substring(verOffset+8)):(nameOffset=nAgt.lastIndexOf(" ")+1)<(verOffset=nAgt.lastIndexOf("/"))&&(jQuery.browser.name=nAgt.substring(nameOffset,verOffset),jQuery.browser.fullVersion=nAgt.substring(verOffset+1),jQuery.browser.name.toLowerCase()==jQuery.browser.name.toUpperCase()&&(jQuery.browser.name=navigator.appName));-1!=(ix=jQuery.browser.fullVersion.indexOf(";"))&&(jQuery.browser.fullVersion=jQuery.browser.fullVersion.substring(0,ix)),-1!=(ix=jQuery.browser.fullVersion.indexOf(" "))&&(jQuery.browser.fullVersion=jQuery.browser.fullVersion.substring(0,ix)),jQuery.browser.majorVersion=parseInt(""+jQuery.browser.fullVersion,10),isNaN(jQuery.browser.majorVersion)&&(jQuery.browser.fullVersion=""+parseFloat(navigator.appVersion),jQuery.browser.majorVersion=parseInt(navigator.appVersion,10)),jQuery.browser.version=jQuery.browser.majorVersion}jQuery.browser.android=/Android/i.test(nAgt),jQuery.browser.blackberry=/BlackBerry|BB|PlayBook/i.test(nAgt),jQuery.browser.ios=/iPhone|iPad|iPod|webOS/i.test(nAgt),jQuery.browser.operaMobile=/Opera Mini/i.test(nAgt),jQuery.browser.windowsMobile=/IEMobile|Windows Phone/i.test(nAgt),jQuery.browser.kindle=/Kindle|Silk/i.test(nAgt),jQuery.browser.mobile=jQuery.browser.android||jQuery.browser.blackberry||jQuery.browser.ios||jQuery.browser.windowsMobile||jQuery.browser.operaMobile||jQuery.browser.kindle,jQuery.isMobile=jQuery.browser.mobile,jQuery.isTablet=jQuery.browser.mobile&&jQuery(window).width()>765,jQuery.isAndroidDefault=jQuery.browser.android&&!/chrome/i.test(nAgt);(function($){var isIE=$.browser.msie;jQuery.fn.encHTML=function(){return this.each(function(){var me=$(this);var html=me.text();me.text(html.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/'/g,escape("'")).replace(/"/g,escape('"')));});};$.mbflipText={author:"Matteo Bicocchi",version:"1.1",flipText:function(tb){var UTF8encoded=$("meta[http-equiv=Content-Type]").attr("content")&&$("meta[http-equiv=Content-Type]").attr("content").indexOf("utf-8")>-1;return this.each(function(){var el=$(this);var h="";var w="";var label="";var bgcol=(el.css("background-color")&&el.css("background-color")!="rgba(0, 0, 0, 0)")?el.css("background-color"):"#fff";var fontsize=parseInt(el.css('font-size'))>0?parseInt(el.css('font-size')):14;var fontfamily=el.css('font-family')?el.css('font-family').replace(/\'/g,'').replace(/"/g,''):"Arial";var fontcolor=el.css('color')?el.css('color'):"#000";if($.browser.msie){if(!tb)el.css({'writing-mode':'tb-rl',height:h,filter:'fliph() flipv("") ',whiteSpace:"nowrap",lineHeight:fontsize+2+"px"}).css('font-weight','normal');label=$("<span style='writing-mode: tb-rl; whiteSpace:nowrap; height:"+h+"; width:"+w+"; line-height:"+(fontsize+2)+"px'>"+el.html()+"</span>");}else{var dim=el.getFlipTextDim(false);h=dim[1];w=dim[0];if(!isIE)el.encHTML();var txt=el.text();var rot="-90";var ta="end";var xFix=0;var yFix=$.browser.opera?parseInt(w)-(parseInt(w)/4):$.browser.webkit?5:0;if(tb){yFix=$.browser.opera?20:0;xFix=$.browser.webkit?(fontsize/4):0;rot="90, "+((parseInt(w)/2)-xFix)+", "+parseInt(w)/2;ta="start";}
var onClick=el.attr("onclick")||el.attr("href");var clickScript=onClick?"<div class='pointer' style='position:absolute;top:0;left:0;width:100%;height:100%;background:transparent'/>":"";label=$("<object class='flip_label' style='height:"+h+"px; width:"+w+"px;' type='image/svg+xml' data='data:image/svg+xml; charset=utf-8 ,"+"<svg xmlns=\"http://www.w3.org/2000/svg\">"+"<rect x=\"0\" y=\"0\" width=\""+w+"px\" height=\""+h+"px\" fill=\""+bgcol+"\" stroke=\"none\"/>"+"<text  x=\"-"+xFix+"\" y=\""+yFix+"\" font-family=\""+fontfamily+"\"  fill=\""+fontcolor+"\" font-size=\""+fontsize+"\"  style=\"text-anchor: "+ta+"; "+"dominant-baseline: hanging\" transform=\"rotate("+rot+")\" text-rendering=\"optimizeSpeed\">"+txt+"</text></svg>'></object>"+
clickScript+"");}
var wrapper=onClick?$("<div/>").css("position","relative"):$("");var cssPos=el.wrap(wrapper).css("position")!="absolute"||el.css("position")!="fixed"?"relative":el.css("position");el.html(label).css({position:cssPos,width:w});});},getFlipTextDim:function(enc){var el=$(this);var txt=el.html();var fontsize=parseInt(el.css('font-size'));var fontfamily=el.css('font-family').replace(/'/g,'').replace(/"/g,'');if(fontfamily==undefined)fontfamily="Arial";var placeHolder=$("<span/>").css({position:"absolute",top:-100,whiteSpace:"noWrap",fontSize:fontsize,fontFamily:fontfamily});placeHolder.text(txt);$("body").append(placeHolder);var h=(placeHolder.outerWidth()!=0?placeHolder.outerWidth():(16+txt.length*fontsize*.60));var w=(placeHolder.outerHeight()!=0?placeHolder.outerHeight()+5:50);placeHolder.remove();return[w,h];}};$.fn.mbFlipText=$.mbflipText.flipText;$.fn.getFlipTextDim=$.mbflipText.getFlipTextDim;})(jQuery);
var nAgt=navigator.userAgent;if(!jQuery.browser){jQuery.browser={},jQuery.browser.mozilla=!1,jQuery.browser.webkit=!1,jQuery.browser.opera=!1,jQuery.browser.safari=!1,jQuery.browser.chrome=!1,jQuery.browser.androidStock=!1,jQuery.browser.msie=!1,jQuery.browser.ua=nAgt,jQuery.browser.name=navigator.appName,jQuery.browser.fullVersion=""+parseFloat(navigator.appVersion),jQuery.browser.majorVersion=parseInt(navigator.appVersion,10);var nameOffset,verOffset,ix;if(-1!=(verOffset=nAgt.indexOf("Opera")))jQuery.browser.opera=!0,jQuery.browser.name="Opera",jQuery.browser.fullVersion=nAgt.substring(verOffset+6),-1!=(verOffset=nAgt.indexOf("Version"))&&(jQuery.browser.fullVersion=nAgt.substring(verOffset+8));else if(-1!=(verOffset=nAgt.indexOf("OPR")))jQuery.browser.opera=!0,jQuery.browser.name="Opera",jQuery.browser.fullVersion=nAgt.substring(verOffset+4);else if(-1!=(verOffset=nAgt.indexOf("MSIE")))jQuery.browser.msie=!0,jQuery.browser.name="Microsoft Internet Explorer",jQuery.browser.fullVersion=nAgt.substring(verOffset+5);else if(-1!=nAgt.indexOf("Trident")||-1!=nAgt.indexOf("Edge")){jQuery.browser.msie=!0,jQuery.browser.name="Microsoft Internet Explorer";var start=nAgt.indexOf("rv:")+3,end=start+4;jQuery.browser.fullVersion=nAgt.substring(start,end)}else-1!=(verOffset=nAgt.indexOf("Chrome"))?(jQuery.browser.webkit=!0,jQuery.browser.chrome=!0,jQuery.browser.name="Chrome",jQuery.browser.fullVersion=nAgt.substring(verOffset+7)):nAgt.indexOf("mozilla/5.0")>-1&&nAgt.indexOf("android ")>-1&&nAgt.indexOf("applewebkit")>-1&&!(nAgt.indexOf("chrome")>-1)?(verOffset=nAgt.indexOf("Chrome"),jQuery.browser.webkit=!0,jQuery.browser.androidStock=!0,jQuery.browser.name="androidStock",jQuery.browser.fullVersion=nAgt.substring(verOffset+7)):-1!=(verOffset=nAgt.indexOf("Safari"))?(jQuery.browser.webkit=!0,jQuery.browser.safari=!0,jQuery.browser.name="Safari",jQuery.browser.fullVersion=nAgt.substring(verOffset+7),-1!=(verOffset=nAgt.indexOf("Version"))&&(jQuery.browser.fullVersion=nAgt.substring(verOffset+8))):-1!=(verOffset=nAgt.indexOf("AppleWebkit"))?(jQuery.browser.webkit=!0,jQuery.browser.safari=!0,jQuery.browser.name="Safari",jQuery.browser.fullVersion=nAgt.substring(verOffset+7),-1!=(verOffset=nAgt.indexOf("Version"))&&(jQuery.browser.fullVersion=nAgt.substring(verOffset+8))):-1!=(verOffset=nAgt.indexOf("Firefox"))?(jQuery.browser.mozilla=!0,jQuery.browser.name="Firefox",jQuery.browser.fullVersion=nAgt.substring(verOffset+8)):(nameOffset=nAgt.lastIndexOf(" ")+1)<(verOffset=nAgt.lastIndexOf("/"))&&(jQuery.browser.name=nAgt.substring(nameOffset,verOffset),jQuery.browser.fullVersion=nAgt.substring(verOffset+1),jQuery.browser.name.toLowerCase()==jQuery.browser.name.toUpperCase()&&(jQuery.browser.name=navigator.appName));-1!=(ix=jQuery.browser.fullVersion.indexOf(";"))&&(jQuery.browser.fullVersion=jQuery.browser.fullVersion.substring(0,ix)),-1!=(ix=jQuery.browser.fullVersion.indexOf(" "))&&(jQuery.browser.fullVersion=jQuery.browser.fullVersion.substring(0,ix)),jQuery.browser.majorVersion=parseInt(""+jQuery.browser.fullVersion,10),isNaN(jQuery.browser.majorVersion)&&(jQuery.browser.fullVersion=""+parseFloat(navigator.appVersion),jQuery.browser.majorVersion=parseInt(navigator.appVersion,10)),jQuery.browser.version=jQuery.browser.majorVersion}jQuery.browser.android=/Android/i.test(nAgt),jQuery.browser.blackberry=/BlackBerry|BB|PlayBook/i.test(nAgt),jQuery.browser.ios=/iPhone|iPad|iPod|webOS/i.test(nAgt),jQuery.browser.operaMobile=/Opera Mini/i.test(nAgt),jQuery.browser.windowsMobile=/IEMobile|Windows Phone/i.test(nAgt),jQuery.browser.kindle=/Kindle|Silk/i.test(nAgt),jQuery.browser.mobile=jQuery.browser.android||jQuery.browser.blackberry||jQuery.browser.ios||jQuery.browser.windowsMobile||jQuery.browser.operaMobile||jQuery.browser.kindle,jQuery.isMobile=jQuery.browser.mobile,jQuery.isTablet=jQuery.browser.mobile&&jQuery(window).width()>765,jQuery.isAndroidDefault=jQuery.browser.android&&!/chrome/i.test(nAgt);(function(c){c.extend({metadata:{defaults:{type:"class",name:"metadata",cre:/({.*})/,single:"metadata"},setType:function(b,c){this.defaults.type=b;this.defaults.name=c},get:function(b,f){var d=c.extend({},this.defaults,f);d.single.length||(d.single="metadata");var a=c.data(b,d.single);if(a)return a;a="{}";if("class"==d.type){var e=d.cre.exec(b.className);e&&(a=e[1])}else if("elem"==d.type){if(!b.getElementsByTagName)return;e=b.getElementsByTagName(d.name);e.length&&(a=c.trim(e[0].innerHTML))}else void 0!=b.getAttribute&&(e=b.getAttribute(d.name))&&(a=e);0>a.indexOf("{")&&(a="{"+a+"}");a=eval("("+a+")");c.data(b,d.single,a);return a}}});c.fn.metadata=function(b){return c.metadata.get(this[0],b)}})(jQuery);(function($){document.extruder=new Object();document.extruder.left=0;document.extruder.top=0;document.extruder.bottom=0;document.extruder.right=0;document.extruder.idx=0;var isIE=$.browser.msie;$.mbExtruder={author:"Matteo Bicocchi",version:"2.5.5",defaults:{width:350,positionFixed:true,sensibility:800,position:"top",accordionPanels:true,top:"auto",extruderOpacity:1,flapMargin:35,textOrientation:"bt",onExtOpen:function(){},onExtContentLoad:function(){},onExtClose:function(){},hidePanelsOnClose:true,closeOnClick:true,closeOnExternalClick:true,autoCloseTime:0,autoOpenTime:0,slideTimer:300},buildMbExtruder:function(options){return this.each(function(){this.options={};$.extend(this.options,$.mbExtruder.defaults);$.extend(this.options,options);this.idx=document.extruder.idx;document.extruder.idx++;var extruder,extruderContent,wrapper,extruderStyle,wrapperStyle,txt,closeTimer,openTimer;extruder=$(this);extruderContent=extruder.html();extruder.css("zIndex",100);var isVertical=this.options.position=="left"||this.options.position=="right";var extW=isVertical?1:this.options.width;var c=$("<div/>").addClass("extruder-content").css({overflow:"hidden",width:extW});c.append(extruderContent);extruder.html(c);var position=this.options.positionFixed?"fixed":"absolute";extruder.addClass("extruder");extruder.addClass(this.options.position);var isHorizontal=this.options.position=="top"||this.options.position=="bottom";extruderStyle=this.options.position=="top"?{position:position,top:0,left:"50%",marginLeft:-this.options.width/2,width:this.options.width}:this.options.position=="bottom"?{position:position,bottom:0,left:"50%",marginLeft:-this.options.width/2,width:this.options.width}:this.options.position=="left"?{position:position,top:0,left:0,width:1}:{position:position,top:0,right:0,width:1};extruder.css(extruderStyle);if(!isIE)extruder.css({opacity:this.options.extruderOpacity});extruder.wrapInner("<div class='ext_wrapper'></div>");wrapper=extruder.find(".ext_wrapper");wrapperStyle={position:"absolute",width:isVertical?1:this.options.width};wrapper.css(wrapperStyle);if(isHorizontal){this.options.position=="top"?document.extruder.top++:document.extruder.bottom++;if(document.extruder.top>1||document.extruder.bottom>1){alert("more than 1 mb.extruder on top or bottom is not supported jet... hope soon!");return;}}
if($.metadata){$.metadata.setType("class");if(extruder.metadata().title)extruder.attr("extTitle",extruder.metadata().title);if(extruder.metadata().url)extruder.attr("extUrl",extruder.metadata().url);if(extruder.metadata().data)extruder.attr("extData",extruder.metadata().data);}
var flapFooter=$("<div class='footer'/>");var flap=$("<div class='flap'><span class='flapLabel'/></div>");if(document.extruder.bottom){wrapper.prepend(flapFooter);wrapper.prepend(flap);}else{wrapper.append(flapFooter);wrapper.append(flap);}
txt=extruder.attr("extTitle")?extruder.attr("extTitle"):"";var flapLabel=extruder.find(".flapLabel");flapLabel.text(txt);if(isVertical){flapLabel.html(txt).css({whiteSpace:"noWrap"});var orientation=this.options.textOrientation=="tb";var labelH=extruder.find('.flapLabel').getFlipTextDim()[1];extruder.find('.flapLabel').mbFlipText(orientation);}else{flapLabel.html(txt).css({whiteSpace:"noWrap"});}
if(extruder.attr("extUrl")){extruder.setMbExtruderContent({url:extruder.attr("extUrl"),data:extruder.attr("extData"),callback:function(){if(extruder.get(0).options.onExtContentLoad)extruder.get(0).options.onExtContentLoad();}})}else{var container=$("<div>").addClass("text").css({width:extruder.get(0).options.width-20,overflowY:"auto"});c.wrapInner(container);extruder.setExtruderVoicesAction();}
flap.on("click",function(){if(!extruder.attr("isOpened")){extruder.openMbExtruder();}else{extruder.closeMbExtruder();extruder.removeAttr("isOpened");}}).on("mouseenter",function(){if(extruder.get(0).options.autoOpenTime>0){openTimer=setTimeout(function(){extruder.openMbExtruder();$(document).one("click.extruder"+extruder.get(0).idx,function(){extruder.closeMbExtruder();});},extruder.get(0).options.autoOpenTime);}}).on("mouseleave",function(){clearTimeout(openTimer);});c.on("mouseleave",function(e){if(extruder.get(0).options.closeOnExternalClick){if(!$(e.target).parents().is(".text")&&!$(e.target).is("select"))
$(document).one("click.extruder"+extruder.get(0).idx,function(){extruder.closeMbExtruder();});}
closeTimer=setTimeout(function(){if(extruder.get(0).options.autoCloseTime>0){extruder.closeMbExtruder();}},extruder.get(0).options.autoCloseTime);}).on("mouseenter",function(){clearTimeout(closeTimer);$(document).off("click.extruder"+extruder.get(0).idx);});if(isVertical){c.css({height:"100%"});if(this.options.top=="auto"){flap.css({top:100+(this.options.position=="left"?document.extruder.left:document.extruder.right)});this.options.position=="left"?document.extruder.left+=labelH+this.options.flapMargin:document.extruder.right+=labelH+this.options.flapMargin;}else{flap.css({top:this.options.top});}
var clicDiv=$("<div/>").css({position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"transparent"});flap.append(clicDiv);}
this.originalWidth=this.options.width;$(window).on("resize",function(){extruder.adjustSize();})});},adjustSize:function(){var $extruder=this;var extruder=$extruder.get(0);var isHorizontal=extruder.options.position=="top"||extruder.options.position=="bottom";if(isHorizontal){if($(window).width()<extruder.options.width){$extruder.css({width:$(window).width(),marginLeft:0,left:0});$extruder.find(".ext_wrapper, .extruder-content, .extruder-container").css({width:"100%"});}else{$extruder.css({width:extruder.options.width,left:"50%",marginLeft:-extruder.options.width/2});$extruder.find(".ext_wrapper, .extruder-content, .extruder-container").css({width:"100%"});}}else{if(($(window).width()-80)<extruder.originalWidth){extruder.options.width=$(window).width()-80;}else{extruder.options.width=extruder.originalWidth;}
if($extruder.attr("isOpened")){$extruder.find('.extruder-content').css({width:extruder.options.width});$extruder.find(".ext_wrapper, .extruder-content, .extruder-container").css({width:extruder.options.width});}}},setMbExtruderContent:function(options){this.options={url:false,data:"",callback:function(){}};$.extend(this.options,options);if(!this.options.url||this.options.url.length==0){alert("internal error: no URL to call");return;}
var url=this.options.url;var data=this.options.data;var where=$(this),voice;var cb=this.options.callback;var container=$("<div>").addClass("extruder-container");if(!($.browser.msie&&$.browser.version<=7))
container.css({width:$(this).get(0).options.width});where.find(".extruder-content").wrapInner(container);$.ajax({type:"GET",url:url,data:data,async:true,dataType:"html",success:function(html){where.find(".extruder-container").html(html);voice=where.find(".voice");voice.hover(function(){$(this).addClass("hover");},function(){$(this).removeClass("hover");});where.setExtruderVoicesAction();if(cb){setTimeout(function(){cb();},100);}}});},openMbExtruder:function(c){var extruder=$(this);extruder.adjustSize();extruder.attr("isOpened",true);$(document).off("click.extruder"+extruder.get(0).idx);var opt=extruder.get(0).options;extruder.addClass("isOpened");if(!isIE)extruder.css("opacity",1);var position=opt.position;extruder.mb_bringToFront();if(position=="top"||position=="bottom"){extruder.find('.extruder-content').slideDown(opt.slideTimer);if(opt.onExtOpen)opt.onExtOpen();}else{if(!isIE)$(this).css("opacity",1);extruder.find('.ext_wrapper').css({width:""});extruder.find('.extruder-content').css({overflowX:"hidden",display:"block"});extruder.find('.extruder-content').animate({width:opt.width},opt.slideTimer,function(){extruder.find(".extruder-container").css({width:opt.width});});if(opt.onExtOpen)opt.onExtOpen();}
if(c){setTimeout(function(){$(document).one("click.extruder"+extruder.get(0).idx,function(){extruder.closeMbExtruder();});},100);}},closeMbExtruder:function(){var extruder=$(this);extruder.removeAttr("isOpened");var opt=extruder.get(0).options;extruder.removeClass("isOpened");$(document).off("click.extruder"+extruder.get(0).idx);if(!isIE)extruder.css("opacity",opt.extruderOpacity);if(opt.hidePanelsOnClose)extruder.hidePanelsOnClose();if(opt.position=="top"||opt.position=="bottom"){extruder.find('.extruder-content').slideUp(opt.slideTimer);if(opt.onExtClose)opt.onExtClose();}else if(opt.position=="left"||opt.position=="right"){extruder.find('.extruder-content').css({overflow:"hidden"});extruder.find('.extruder-content').animate({width:1},opt.slideTimer,function(){extruder.find('.ext_wrapper').css({width:1});extruder.find('.extruder-content').css({overflow:"hidden",display:"none"});if(opt.onExtClose)opt.onExtClose();});}}};jQuery.fn.mb_bringToFront=function(){var zi=10;$('*').each(function(){if($(this).css("position")=="absolute"||$(this).css("position")=="fixed"){var cur=parseInt($(this).css('zIndex'));zi=cur>zi?parseInt($(this).css('zIndex')):zi;}});$(this).css('zIndex',zi+=1);return zi;};$.fn.setExtruderVoicesAction=function(){var extruder=$(this);var opt=extruder.get(0).options;var voices=$(this).find(".voice");voices.each(function(){var voice=$(this);if($.metadata){$.metadata.setType("class");if(voice.metadata().panel)voice.attr("panel",voice.metadata().panel);if(voice.metadata().data)voice.attr("data",voice.metadata().data);if(voice.metadata().disabled)voice.attr("setDisabled",voice.metadata().disabled);}
if(voice.attr("setDisabled"))
voice.disableExtruderVoice();if(voice.attr("panel")&&voice.attr("panel")!="false"){voice.append("<span class='settingsBtn'/>");voice.find(".settingsBtn").css({opacity:.5});voice.find(".settingsBtn").hover(function(){$(this).css({opacity:1});},function(){$(this).not(".sel").css({opacity:.5});}).click(function(){if($(this).parents().hasClass("sel")){if(opt.accordionPanels)
extruder.hidePanelsOnClose();else
$(this).closePanel();return;}
if(opt.accordionPanels){extruder.find(".optionsPanel").slideUp(400,function(){$(this).remove();});voices.removeClass("sel");voices.find(".settingsBtn").removeClass("sel").css({opacity:.5});}
var content=$("<div class='optionsPanel'></div>");voice.after(content);$.ajax({type:"GET",url:voice.attr("panel"),data:voice.attr("data"),async:true,dataType:"html",success:function(html){var c=$(html);content.html(c);content.children().not(".text").addClass("panelVoice").click(function(){if(opt.closeOnClick)
extruder.closeMbExtruder();});content.slideDown(400);}});voice.addClass("sel");voice.find(".settingsBtn").addClass("sel").css({opacity:1});});}
if(voice.find("a").length==0&&voice.attr("panel")){voice.find(".label").not(".disabled").css("cursor","pointer").click(function(){voice.find(".settingsBtn").click();});}
if((!voice.attr("panel")||voice.attr("panel")=="false")&&(!voice.attr("setDisabled")||voice.attr("setDisabled")!="true")){voice.find(".label").click(function(){extruder.hidePanelsOnClose();if(opt.closeOnClick)
extruder.closeMbExtruder();});}});};$.fn.disableExtruderVoice=function(){var voice=$(this);var label=voice.find(".label");voice.removeClass("sel");voice.next(".optionsPanel").slideUp(400,function(){$(this).remove();});voice.attr("setDisabled",true);label.css("opacity",.4);voice.hover(function(){$(this).removeClass("hover");},function(){$(this).removeClass("hover");});label.addClass("disabled").css("cursor","default");voice.find(".settingsBtn").hide();voice.on("click",function(event){event.stopPropagation();return false;});};$.fn.enableExtruderVoice=function(){var voice=$(this);voice.attr("setDisabled",false);voice.find(".label").css("opacity",1);voice.find(".label").removeClass("disabled").css("cursor","pointer");voice.off("click");voice.find(".settingsBtn").show();};$.fn.hidePanelsOnClose=function(){var voices=$(this).find(".voice");$(this).find(".optionsPanel").slideUp(400,function(){$(this).remove();});voices.removeClass("sel");voices.find(".settingsBtn").removeClass("sel").css("opacity",.5);};$.fn.openPanel=function(){var voice=$(this).hasClass("voice")?$(this):$(this).find(".voice");voice.each(function(){if($(this).hasClass("sel"))return;$(this).find(".settingsBtn").click();})};$.fn.closePanel=function(){var voice=$(this).hasClass("voice")?$(this):$(this).parent(".voice");voice.next(".optionsPanel").slideUp(400,function(){$(this).remove();});voice.removeClass("sel");$(this).removeClass("sel").css("opacity",.5);};$.fn.buildMbExtruder=$.mbExtruder.buildMbExtruder;$.fn.setMbExtruderContent=$.mbExtruder.setMbExtruderContent;$.fn.closeMbExtruder=$.mbExtruder.closeMbExtruder;$.fn.openMbExtruder=$.mbExtruder.openMbExtruder;$.fn.adjustSize=$.mbExtruder.adjustSize;})(jQuery);
/*!
 * jQuery Magnify Plugin v2.3.3 by T. H. Doan (https://thdoan.github.io/magnify/)
 * Based on http://thecodeplayer.com/walkthrough/magnifying-glass-for-images-using-jquery-and-css3
 *
 * jQuery Magnify by T. H. Doan is licensed under the MIT License.
 * Read a copy of the license in the LICENSE file or at https://choosealicense.com/licenses/mit/
 */
(function($){$.fn.magnify=function(oOptions){oOptions=$.extend({'src':'','speed':100,'timeout':-1,'touchBottomOffset':0,'finalWidth':null,'finalHeight':null,'magnifiedWidth':null,'magnifiedHeight':null,'limitBounds':false,'mobileCloseEvent':'touchstart','afterLoad':function(){}},oOptions);var $that=this,$html=$('html'),init=function(el){var $image=$(el),$anchor=$image.closest('a'),oDataAttr={};for(var i in oOptions){oDataAttr[i]=$image.attr('data-magnify-'+i.toLowerCase());}
var sZoomSrc=oDataAttr['src']||oOptions['src']||$anchor.attr('href')||'';if(!sZoomSrc)return;var $container,$lens,nImageWidth,nImageHeight,nMagnifiedWidth,nMagnifiedHeight,nLensWidth,nLensHeight,nBoundX=0,nBoundY=0,nPosX,nPosY,nX,nY,oContainerOffset,oImageOffset,getOffset=function(){var o=$container.offset();oImageOffset={'top':($image.offset().top-o.top)+parseInt($image.css('border-top-width'))+parseInt($image.css('padding-top')),'left':($image.offset().left-o.left)+parseInt($image.css('border-left-width'))+parseInt($image.css('padding-left'))};o.top+=oImageOffset['top'];o.left+=oImageOffset['left'];return o;},hideLens=function(){if($lens.is(':visible'))$lens.fadeOut(oOptions['speed'],function(){$html.removeClass('magnifying').trigger('magnifyend');});},moveLens=function(e){if(!nImageHeight){refresh();return;}
if(e){e.preventDefault();nPosX=e.pageX||e.originalEvent.touches[0].pageX;nPosY=e.pageY||e.originalEvent.touches[0].pageY;$image.data('lastPos',{'x':nPosX,'y':nPosY});}else{nPosX=$image.data('lastPos').x;nPosY=$image.data('lastPos').y;}
nX=nPosX-oContainerOffset['left'],nY=(nPosY-oContainerOffset['top'])-oOptions['touchBottomOffset'];if(!$lens.is(':animated')){if(nX>nBoundX&&nX<nImageWidth-nBoundX&&nY>nBoundY&&nY<nImageHeight-nBoundY){if($lens.is(':hidden')){$html.addClass('magnifying').trigger('magnifystart');$lens.fadeIn(oOptions['speed']);}}else{hideLens();}}
if($lens.is(':visible')){var sBgPos='';if(nMagnifiedWidth&&nMagnifiedHeight){var nRatioX=-Math.round(nX/nImageWidth*nMagnifiedWidth-nLensWidth/2),nRatioY=-Math.round(nY/nImageHeight*nMagnifiedHeight-nLensHeight/2);if(oOptions['limitBounds']){var nBoundRight=-Math.round((nImageWidth-nBoundX)/nImageWidth*nMagnifiedWidth-nLensWidth/2),nBoundBottom=-Math.round((nImageHeight-nBoundY)/nImageHeight*nMagnifiedHeight-nLensHeight/2);if(nRatioX>0)nRatioX=0;else if(nRatioX<nBoundRight)nRatioX=nBoundRight;if(nRatioY>0)nRatioY=0;else if(nRatioY<nBoundBottom)nRatioY=nBoundBottom;}
sBgPos=nRatioX+'px '+nRatioY+'px';}
$lens.css({'top':Math.round(nY-nLensHeight/2)+oImageOffset['top']+'px','left':Math.round(nX-nLensWidth/2)+oImageOffset['left']+'px','background-position':sBgPos});}};if(!isNaN(+oDataAttr['speed']))oOptions['speed']=+oDataAttr['speed'];if(!isNaN(+oDataAttr['timeout']))oOptions['timeout']=+oDataAttr['timeout'];if(!isNaN(+oDataAttr['finalWidth']))oOptions['finalWidth']=+oDataAttr['finalWidth'];if(!isNaN(+oDataAttr['finalHeight']))oOptions['finalHeight']=+oDataAttr['finalHeight'];if(!isNaN(+oDataAttr['magnifiedWidth']))oOptions['magnifiedWidth']=+oDataAttr['magnifiedWidth'];if(!isNaN(+oDataAttr['magnifiedHeight']))oOptions['magnifiedHeight']=+oDataAttr['magnifiedHeight'];if(oDataAttr['limitBounds']==='true')oOptions['limitBounds']=true;if(typeof window[oDataAttr['afterLoad']]==='function')oOptions.afterLoad=window[oDataAttr['afterLoad']];if(/\b(Android|BlackBerry|IEMobile|iPad|iPhone|Mobile|Opera Mini)\b/.test(navigator.userAgent)){if(!isNaN(+oDataAttr['touchBottomOffset']))oOptions['touchBottomOffset']=+oDataAttr['touchBottomOffset'];}else{oOptions['touchBottomOffset']=0;}
$image.data('originalStyle',$image.attr('style'));var elZoomImage=new Image();$(elZoomImage).on({'load':function(){$image.css('display','block');if(!$image.parent('.magnify').length){$image.wrap('<div class="magnify"></div>');}
$container=$image.parent('.magnify');if($image.prev('.magnify-lens').length){$container.children('.magnify-lens').css('background-image','url(\''+sZoomSrc+'\')');}else{$image.before('<div class="magnify-lens loading" style="background:url(\''+sZoomSrc+'\') 0 0 no-repeat"></div>');}
$lens=$container.children('.magnify-lens');$lens.removeClass('loading');nImageWidth=oOptions['finalWidth']||$image.width();nImageHeight=oOptions['finalHeight']||$image.height();nMagnifiedWidth=oOptions['magnifiedWidth']||elZoomImage.width;nMagnifiedHeight=oOptions['magnifiedHeight']||elZoomImage.height;nLensWidth=$lens.width();nLensHeight=$lens.height();oContainerOffset=getOffset();if(oOptions['limitBounds']){nBoundX=(nLensWidth/2)/(nMagnifiedWidth/nImageWidth);nBoundY=(nLensHeight/2)/(nMagnifiedHeight/nImageHeight);}
if(nMagnifiedWidth!==elZoomImage.width||nMagnifiedHeight!==elZoomImage.height){$lens.css('background-size',nMagnifiedWidth+'px '+nMagnifiedHeight+'px');}
$image.data('zoomSize',{'width':nMagnifiedWidth,'height':nMagnifiedHeight});$container.data('mobileCloseEvent',oDataAttr['mobileCloseEvent']||oOptions['mobileCloseEvent']);elZoomImage=null;oOptions.afterLoad();if($lens.is(':visible'))moveLens();$container.off().on({'mousemove touchmove':moveLens,'mouseenter':function(){oContainerOffset=getOffset();},'mouseleave':hideLens});if(oOptions['timeout']>=0){$container.on('touchend',function(){setTimeout(hideLens,oOptions['timeout']);});}
$('body').not($container).on('touchstart',hideLens);var sUsemap=$image.attr('usemap');if(sUsemap){var $map=$('map[name='+sUsemap.slice(1)+']');$image.after($map);$container.click(function(e){if(e.clientX||e.clientY){$lens.hide();var elPoint=document.elementFromPoint(e.clientX||e.originalEvent.touches[0].clientX,e.clientY||e.originalEvent.touches[0].clientY);if(elPoint.nodeName==='AREA'){elPoint.click();}else{$('area',$map).each(function(){var a=$(this).attr('coords').split(',');if(nX>=a[0]&&nX<=a[2]&&nY>=a[1]&&nY<=a[3]){this.click();return false;}});}}});}
if($anchor.length){$anchor.css('display','inline-block');if($anchor.attr('href')&&!(oDataAttr['src']||oOptions['src'])){$anchor.click(function(e){e.preventDefault();});}}},'error':function(){elZoomImage=null;}});elZoomImage.src=sZoomSrc;},nTimer=0,refresh=function(){clearTimeout(nTimer);nTimer=setTimeout(function(){$that.destroy();$that.magnify(oOptions);},100);};this.destroy=function(){this.each(function(){var $this=$(this),$lens=$this.prev('div.magnify-lens'),sStyle=$this.data('originalStyle');if($this.parent('div.magnify').length&&$lens.length){if(sStyle)$this.attr('style',sStyle);else $this.removeAttr('style');$this.unwrap();$lens.remove();}});$(window).off('resize',refresh);return $that;}
$(window).resize(refresh);return this.each(function(){init(this);});};}(jQuery));
!function(a){function b(){var a=location.href;return hashtag=a.indexOf("#prettyPhoto")!==-1&&decodeURI(a.substring(a.indexOf("#prettyPhoto")+1,a.length)),hashtag&&(hashtag=hashtag.replace(/<|>/g,"")),hashtag}function c(){"undefined"!=typeof theRel&&(location.hash=theRel+"/"+rel_index+"/")}function d(){location.href.indexOf("#prettyPhoto")!==-1&&(location.hash="prettyPhoto")}function e(a,b){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c="[\\?&]"+a+"=([^&#]*)",d=new RegExp(c),e=d.exec(b);return null==e?"":e[1]}a.prettyPhoto={version:"3.1.6"},a.fn.prettyPhoto=function(f){function g(){a(".pp_loaderIcon").hide(),projectedTop=scroll_pos.scrollTop+(A/2-r.containerHeight/2),projectedTop<0&&(projectedTop=0),$ppt.fadeTo(settings.animation_speed,1),$pp_pic_holder.find(".pp_content").animate({height:r.contentHeight,width:r.contentWidth},settings.animation_speed),$pp_pic_holder.animate({top:projectedTop,left:B/2-r.containerWidth/2<0?0:B/2-r.containerWidth/2,width:r.containerWidth},settings.animation_speed,function(){$pp_pic_holder.find(".pp_hoverContainer,#fullResImage").height(r.height).width(r.width),$pp_pic_holder.find(".pp_fade").fadeIn(settings.animation_speed),isSet&&"image"==l(pp_images[set_position])?$pp_pic_holder.find(".pp_hoverContainer").show():$pp_pic_holder.find(".pp_hoverContainer").hide(),settings.allow_expand&&(r.resized?a("a.pp_expand,a.pp_contract").show():a("a.pp_expand").hide()),!settings.autoplay_slideshow||x||s||a.prettyPhoto.startSlideshow(),settings.changepicturecallback(),s=!0}),p(),f.ajaxcallback()}function h(b){$pp_pic_holder.find("#pp_full_res object,#pp_full_res embed").css("visibility","hidden"),$pp_pic_holder.find(".pp_fade").fadeOut(settings.animation_speed,function(){a(".pp_loaderIcon").show(),b()})}function i(b){b>1?a(".pp_nav").show():a(".pp_nav").hide()}function j(a,b){if(resized=!1,k(a,b),imageWidth=a,imageHeight=b,(w>B||v>A)&&doresize&&settings.allow_resize&&!z){for(resized=!0,fitting=!1;!fitting;)w>B?(imageWidth=B-200,imageHeight=b/a*imageWidth):v>A?(imageHeight=A-200,imageWidth=a/b*imageHeight):fitting=!0,v=imageHeight,w=imageWidth;(w>B||v>A)&&j(w,v),k(imageWidth,imageHeight)}return{width:Math.floor(imageWidth),height:Math.floor(imageHeight),containerHeight:Math.floor(v),containerWidth:Math.floor(w)+2*settings.horizontal_padding,contentHeight:Math.floor(t),contentWidth:Math.floor(u),resized:resized}}function k(b,c){b=parseFloat(b),c=parseFloat(c),$pp_details=$pp_pic_holder.find(".pp_details"),$pp_details.width(b),detailsHeight=parseFloat($pp_details.css("marginTop"))+parseFloat($pp_details.css("marginBottom")),$pp_details=$pp_details.clone().addClass(settings.theme).width(b).appendTo(a("body")).css({position:"absolute",top:-1e4}),detailsHeight+=$pp_details.height(),detailsHeight=detailsHeight<=34?36:detailsHeight,$pp_details.remove(),$pp_title=$pp_pic_holder.find(".ppt"),$pp_title.width(b),titleHeight=parseFloat($pp_title.css("marginTop"))+parseFloat($pp_title.css("marginBottom")),$pp_title=$pp_title.clone().appendTo(a("body")).css({position:"absolute",top:-1e4}),titleHeight+=$pp_title.height(),$pp_title.remove(),t=c+detailsHeight,u=b,v=t+titleHeight+$pp_pic_holder.find(".pp_top").height()+$pp_pic_holder.find(".pp_bottom").height(),w=b}function l(a){return a.match(/youtube\.com\/watch/i)||a.match(/youtu\.be/i)?"youtube":a.match(/vimeo\.com/i)?"vimeo":a.match(/\b.mov\b/i)?"quicktime":a.match(/\b.swf\b/i)?"flash":a.match(/\biframe=true\b/i)?"iframe":a.match(/\bajax=true\b/i)?"ajax":a.match(/\bcustom=true\b/i)?"custom":"#"==a.substr(0,1)?"inline":"image"}function m(){if(doresize&&"undefined"!=typeof $pp_pic_holder){if(scroll_pos=n(),contentHeight=$pp_pic_holder.height(),contentwidth=$pp_pic_holder.width(),projectedTop=A/2+scroll_pos.scrollTop-contentHeight/2,projectedTop<0&&(projectedTop=0),contentHeight>A)return;$pp_pic_holder.css({top:projectedTop,left:B/2+scroll_pos.scrollLeft-contentwidth/2})}}function n(){return self.pageYOffset?{scrollTop:self.pageYOffset,scrollLeft:self.pageXOffset}:document.documentElement&&document.documentElement.scrollTop?{scrollTop:document.documentElement.scrollTop,scrollLeft:document.documentElement.scrollLeft}:document.body?{scrollTop:document.body.scrollTop,scrollLeft:document.body.scrollLeft}:void 0}function o(){A=a(window).height(),B=a(window).width(),"undefined"!=typeof $pp_overlay&&$pp_overlay.height(a(document).height()).width(B)}function p(){isSet&&settings.overlay_gallery&&"image"==l(pp_images[set_position])?(itemWidth=57,navWidth="facebook"==settings.theme||"pp_default"==settings.theme?50:30,itemsPerPage=Math.floor((r.containerWidth-100-navWidth)/itemWidth),itemsPerPage=itemsPerPage<pp_images.length?itemsPerPage:pp_images.length,totalPage=Math.ceil(pp_images.length/itemsPerPage)-1,0==totalPage?(navWidth=0,$pp_gallery.find(".pp_arrow_next,.pp_arrow_previous").hide()):$pp_gallery.find(".pp_arrow_next,.pp_arrow_previous").show(),galleryWidth=itemsPerPage*itemWidth,fullGalleryWidth=pp_images.length*itemWidth,$pp_gallery.css("margin-left",-(galleryWidth/2+navWidth/2)).find("div:first").width(galleryWidth+5).find("ul").width(fullGalleryWidth).find("li.selected").removeClass("selected"),goToPage=Math.floor(set_position/itemsPerPage)<totalPage?Math.floor(set_position/itemsPerPage):totalPage,a.prettyPhoto.changeGalleryPage(goToPage),$pp_gallery_li.filter(":eq("+set_position+")").addClass("selected")):$pp_pic_holder.find(".pp_content").unbind("mouseenter mouseleave")}function q(b){if(settings.social_tools&&(facebook_like_link=settings.social_tools.replace("{location_href}",encodeURIComponent(location.href))),settings.markup=settings.markup.replace("{pp_social}",""),a("body").append(settings.markup),$pp_pic_holder=a(".pp_pic_holder"),$ppt=a(".ppt"),$pp_overlay=a("div.pp_overlay"),isSet&&settings.overlay_gallery){currentGalleryPage=0,toInject="";for(var c=0;c<pp_images.length;c++)pp_images[c].match(/\b(jpg|jpeg|png|gif)\b/gi)?(classname="",img_src=pp_images[c]):(classname="default",img_src=""),toInject+="<li class='"+classname+"'><a href='#'><img src='"+img_src+"' width='50' alt='' /></a></li>";toInject=settings.gallery_markup.replace(/{gallery}/g,toInject),$pp_pic_holder.find("#pp_full_res").after(toInject),$pp_gallery=a(".pp_pic_holder .pp_gallery"),$pp_gallery_li=$pp_gallery.find("li"),$pp_gallery.find(".pp_arrow_next").click(function(){return a.prettyPhoto.changeGalleryPage("next"),a.prettyPhoto.stopSlideshow(),!1}),$pp_gallery.find(".pp_arrow_previous").click(function(){return a.prettyPhoto.changeGalleryPage("previous"),a.prettyPhoto.stopSlideshow(),!1}),$pp_pic_holder.find(".pp_content").hover(function(){$pp_pic_holder.find(".pp_gallery:not(.disabled)").fadeIn()},function(){$pp_pic_holder.find(".pp_gallery:not(.disabled)").fadeOut()}),itemWidth=57,$pp_gallery_li.each(function(b){a(this).find("a").click(function(){return a.prettyPhoto.changePage(b),a.prettyPhoto.stopSlideshow(),!1})})}settings.slideshow&&($pp_pic_holder.find(".pp_nav").prepend('<a href="#" class="pp_play">Play</a>'),$pp_pic_holder.find(".pp_nav .pp_play").click(function(){return a.prettyPhoto.startSlideshow(),!1})),$pp_pic_holder.attr("class","pp_pic_holder "+settings.theme),$pp_overlay.css({opacity:0,height:a(document).height(),width:a(window).width()}).bind("click",function(){settings.modal||a.prettyPhoto.close()}),a("a.pp_close").bind("click",function(){return a.prettyPhoto.close(),!1}),settings.allow_expand&&a("a.pp_expand").bind("click",function(b){return a(this).hasClass("pp_expand")?(a(this).removeClass("pp_expand").addClass("pp_contract"),doresize=!1):(a(this).removeClass("pp_contract").addClass("pp_expand"),doresize=!0),h(function(){a.prettyPhoto.open()}),!1}),$pp_pic_holder.find(".pp_previous, .pp_nav .pp_arrow_previous").bind("click",function(){return a.prettyPhoto.changePage("previous"),a.prettyPhoto.stopSlideshow(),!1}),$pp_pic_holder.find(".pp_next, .pp_nav .pp_arrow_next").bind("click",function(){return a.prettyPhoto.changePage("next"),a.prettyPhoto.stopSlideshow(),!1}),m()}f=jQuery.extend({hook:"rel",animation_speed:"fast",ajaxcallback:function(){},slideshow:5e3,autoplay_slideshow:!1,opacity:.8,show_title:!0,allow_resize:!0,allow_expand:!0,default_width:500,default_height:344,counter_separator_label:"/",theme:"pp_default",horizontal_padding:20,hideflash:!1,wmode:"opaque",autoplay:!0,modal:!1,deeplinking:!0,overlay_gallery:!0,overlay_gallery_max:30,keyboard_shortcuts:!0,changepicturecallback:function(){},callback:function(){},ie6_fallback:!0,markup:'<div class="pp_pic_holder"> \t\t\t\t\t\t<div class="ppt">&nbsp;</div> \t\t\t\t\t\t<div class="pp_top"> \t\t\t\t\t\t\t<div class="pp_left"></div> \t\t\t\t\t\t\t<div class="pp_middle"></div> \t\t\t\t\t\t\t<div class="pp_right"></div> \t\t\t\t\t\t</div> \t\t\t\t\t\t<div class="pp_content_container"> \t\t\t\t\t\t\t<div class="pp_left"> \t\t\t\t\t\t\t<div class="pp_right"> \t\t\t\t\t\t\t\t<div class="pp_content"> \t\t\t\t\t\t\t\t\t<div class="pp_loaderIcon"></div> \t\t\t\t\t\t\t\t\t<div class="pp_fade"> \t\t\t\t\t\t\t\t\t\t<a href="#" class="pp_expand" title="Expand the image">Expand</a> \t\t\t\t\t\t\t\t\t\t<div class="pp_hoverContainer"> \t\t\t\t\t\t\t\t\t\t\t<a class="pp_next" href="#">next</a> \t\t\t\t\t\t\t\t\t\t\t<a class="pp_previous" href="#">previous</a> \t\t\t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t\t\t<div id="pp_full_res"></div> \t\t\t\t\t\t\t\t\t\t<div class="pp_details"> \t\t\t\t\t\t\t\t\t\t\t<div class="pp_nav"> \t\t\t\t\t\t\t\t\t\t\t\t<a href="#" class="pp_arrow_previous">Previous</a> \t\t\t\t\t\t\t\t\t\t\t\t<p class="currentTextHolder">0/0</p> \t\t\t\t\t\t\t\t\t\t\t\t<a href="#" class="pp_arrow_next">Next</a> \t\t\t\t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t\t\t\t<p class="pp_description"></p> \t\t\t\t\t\t\t\t\t\t\t<div class="pp_social">{pp_social}</div> \t\t\t\t\t\t\t\t\t\t\t<a class="pp_close" href="#">Close</a> \t\t\t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t</div> \t\t\t\t\t\t</div> \t\t\t\t\t\t<div class="pp_bottom"> \t\t\t\t\t\t\t<div class="pp_left"></div> \t\t\t\t\t\t\t<div class="pp_middle"></div> \t\t\t\t\t\t\t<div class="pp_right"></div> \t\t\t\t\t\t</div> \t\t\t\t\t</div> \t\t\t\t\t<div class="pp_overlay"></div>',gallery_markup:'<div class="pp_gallery"> \t\t\t\t\t\t\t\t<a href="#" class="pp_arrow_previous">Previous</a> \t\t\t\t\t\t\t\t<div> \t\t\t\t\t\t\t\t\t<ul> \t\t\t\t\t\t\t\t\t\t{gallery} \t\t\t\t\t\t\t\t\t</ul> \t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t<a href="#" class="pp_arrow_next">Next</a> \t\t\t\t\t\t\t</div>',image_markup:'<img id="fullResImage" src="{path}" />',flash_markup:'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="{width}" height="{height}"><param name="wmode" value="{wmode}" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="{path}" /><embed src="{path}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="{width}" height="{height}" wmode="{wmode}"></embed></object>',quicktime_markup:'<object classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" codebase="https://www.apple.com/qtactivex/qtplugin.cab" height="{height}" width="{width}"><param name="src" value="{path}"><param name="autoplay" value="{autoplay}"><param name="type" value="video/quicktime"><embed src="{path}" height="{height}" width="{width}" autoplay="{autoplay}" type="video/quicktime" pluginspage="https://www.apple.com/quicktime/download/"></embed></object>',iframe_markup:'<iframe src ="{path}" width="{width}" height="{height}" frameborder="no"></iframe>',inline_markup:'<div class="pp_inline">{content}</div>',custom_markup:"",social_tools:'<div class="twitter"><a href="//twitter.com/share" class="twitter-share-button" data-count="none">Tweet</a><script type="text/javascript" src="//platform.twitter.com/widgets.js"></script></div><div class="facebook"><iframe src="//www.facebook.com/plugins/like.php?locale=en_US&href={location_href}&amp;layout=button_count&amp;show_faces=true&amp;width=500&amp;action=like&amp;font&amp;colorscheme=light&amp;height=23" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:500px; height:23px;" allowTransparency="true"></iframe></div>'},f);var r,s,t,u,v,w,x,y=this,z=!1,A=a(window).height(),B=a(window).width();return doresize=!0,scroll_pos=n(),a(window).unbind("resize.prettyphoto").bind("resize.prettyphoto",function(){m(),o()}),f.keyboard_shortcuts&&a(document).unbind("keydown.prettyphoto").bind("keydown.prettyphoto",function(b){if("undefined"!=typeof $pp_pic_holder&&$pp_pic_holder.is(":visible"))switch(b.keyCode){case 37:a.prettyPhoto.changePage("previous"),b.preventDefault();break;case 39:a.prettyPhoto.changePage("next"),b.preventDefault();break;case 27:settings.modal||a.prettyPhoto.close(),b.preventDefault()}}),a.prettyPhoto.initialize=function(){return settings=f,"pp_default"==settings.theme&&(settings.horizontal_padding=16),theRel=a(this).attr(settings.hook),galleryRegExp=/\[(?:.*)\]/,isSet=!!galleryRegExp.exec(theRel),pp_images=isSet?jQuery.map(y,function(b,c){if(a(b).attr(settings.hook).indexOf(theRel)!=-1)return a(b).attr("href")}):a.makeArray(a(this).attr("href")),pp_titles=isSet?jQuery.map(y,function(b,c){if(a(b).attr(settings.hook).indexOf(theRel)!=-1)return a(b).find("img").attr("alt")?a(b).find("img").attr("alt"):""}):a.makeArray(a(this).find("img").attr("alt")),pp_descriptions=isSet?jQuery.map(y,function(b,c){if(a(b).attr(settings.hook).indexOf(theRel)!=-1)return a(b).attr("title")?a(b).attr("title"):""}):a.makeArray(a(this).attr("title")),pp_images.length>settings.overlay_gallery_max&&(settings.overlay_gallery=!1),set_position=jQuery.inArray(a(this).attr("href"),pp_images),rel_index=isSet?set_position:a("a["+settings.hook+"^='"+theRel+"']").index(a(this)),q(this),settings.allow_resize&&a(window).bind("scroll.prettyphoto",function(){m()}),a.prettyPhoto.open(),!1},a.prettyPhoto.open=function(b){return"undefined"==typeof settings&&(settings=f,pp_images=a.makeArray(arguments[0]),pp_titles=arguments[1]?a.makeArray(arguments[1]):a.makeArray(""),pp_descriptions=arguments[2]?a.makeArray(arguments[2]):a.makeArray(""),isSet=pp_images.length>1,set_position=arguments[3]?arguments[3]:0,q(b.target)),settings.hideflash&&a("object,embed,iframe[src*=youtube],iframe[src*=vimeo]").css("visibility","hidden"),i(a(pp_images).length),a(".pp_loaderIcon").show(),settings.deeplinking&&c(),settings.social_tools&&(facebook_like_link=settings.social_tools.replace("{location_href}",encodeURIComponent(location.href)),$pp_pic_holder.find(".pp_social").html(facebook_like_link)),$ppt.is(":hidden")&&$ppt.css("opacity",0).show(),$pp_overlay.show().fadeTo(settings.animation_speed,settings.opacity),$pp_pic_holder.find(".currentTextHolder").text(set_position+1+settings.counter_separator_label+a(pp_images).length),"undefined"!=typeof pp_descriptions[set_position]&&""!=pp_descriptions[set_position]?$pp_pic_holder.find(".pp_description").show().html(unescape(pp_descriptions[set_position])):$pp_pic_holder.find(".pp_description").hide(),movie_width=parseFloat(e("width",pp_images[set_position]))?e("width",pp_images[set_position]):settings.default_width.toString(),movie_height=parseFloat(e("height",pp_images[set_position]))?e("height",pp_images[set_position]):settings.default_height.toString(),z=!1,movie_height.indexOf("%")!=-1&&(movie_height=parseFloat(a(window).height()*parseFloat(movie_height)/100-150),z=!0),movie_width.indexOf("%")!=-1&&(movie_width=parseFloat(a(window).width()*parseFloat(movie_width)/100-150),z=!0),$pp_pic_holder.fadeIn(function(){switch(settings.show_title&&""!=pp_titles[set_position]&&"undefined"!=typeof pp_titles[set_position]?$ppt.html(unescape(pp_titles[set_position])):$ppt.html("&nbsp;"),imgPreloader="",skipInjection=!1,l(pp_images[set_position])){case"image":imgPreloader=new Image,nextImage=new Image,isSet&&set_position<a(pp_images).length-1&&(nextImage.src=pp_images[set_position+1]),prevImage=new Image,isSet&&pp_images[set_position-1]&&(prevImage.src=pp_images[set_position-1]),$pp_pic_holder.find("#pp_full_res")[0].innerHTML=settings.image_markup.replace(/{path}/g,pp_images[set_position]),imgPreloader.onload=function(){r=j(imgPreloader.width,imgPreloader.height),g()},imgPreloader.onerror=function(){alert("Image cannot be loaded. Make sure the path is correct and image exist."),a.prettyPhoto.close()},imgPreloader.src=pp_images[set_position];break;case"youtube":r=j(movie_width,movie_height),movie_id=e("v",pp_images[set_position]),""==movie_id&&(movie_id=pp_images[set_position].split("youtu.be/"),movie_id=movie_id[1],movie_id.indexOf("?")>0&&(movie_id=movie_id.substr(0,movie_id.indexOf("?"))),movie_id.indexOf("&")>0&&(movie_id=movie_id.substr(0,movie_id.indexOf("&")))),movie="//www.youtube.com/embed/"+movie_id,e("rel",pp_images[set_position])?movie+="?rel="+e("rel",pp_images[set_position]):movie+="?rel=1",settings.autoplay&&(movie+="&autoplay=1"),toInject=settings.iframe_markup.replace(/{width}/g,r.width).replace(/{height}/g,r.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,movie);break;case"vimeo":r=j(movie_width,movie_height),movie_id=pp_images[set_position];var b=/http(s?):\/\/(www\.)?vimeo.com\/(\d+)/,c=movie_id.match(b);movie="//player.vimeo.com/video/"+c[3]+"?title=0&amp;byline=0&amp;portrait=0",settings.autoplay&&(movie+="&autoplay=1;"),vimeo_width=r.width+"/embed/?moog_width="+r.width,toInject=settings.iframe_markup.replace(/{width}/g,vimeo_width).replace(/{height}/g,r.height).replace(/{path}/g,movie);break;case"quicktime":r=j(movie_width,movie_height),r.height+=15,r.contentHeight+=15,r.containerHeight+=15,toInject=settings.quicktime_markup.replace(/{width}/g,r.width).replace(/{height}/g,r.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,pp_images[set_position]).replace(/{autoplay}/g,settings.autoplay);break;case"flash":r=j(movie_width,movie_height),flash_vars=pp_images[set_position],flash_vars=flash_vars.substring(pp_images[set_position].indexOf("flashvars")+10,pp_images[set_position].length),filename=pp_images[set_position],filename=filename.substring(0,filename.indexOf("?")),toInject=settings.flash_markup.replace(/{width}/g,r.width).replace(/{height}/g,r.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,filename+"?"+flash_vars);break;case"iframe":r=j(movie_width,movie_height),frame_url=pp_images[set_position],frame_url=frame_url.substr(0,frame_url.indexOf("iframe")-1),toInject=settings.iframe_markup.replace(/{width}/g,r.width).replace(/{height}/g,r.height).replace(/{path}/g,frame_url);break;case"ajax":doresize=!1,r=j(movie_width,movie_height),doresize=!0,skipInjection=!0,a.get(pp_images[set_position],function(a){toInject=settings.inline_markup.replace(/{content}/g,a),$pp_pic_holder.find("#pp_full_res")[0].innerHTML=toInject,g()});break;case"custom":r=j(movie_width,movie_height),toInject=settings.custom_markup;break;case"inline":myClone=a(pp_images[set_position]).clone().append('<br clear="all" />').css({width:settings.default_width}).wrapInner('<div id="pp_full_res"><div class="pp_inline"></div></div>').appendTo(a("body")).show(),doresize=!1,r=j(a(myClone).width(),a(myClone).height()),doresize=!0,a(myClone).remove(),toInject=settings.inline_markup.replace(/{content}/g,a(pp_images[set_position]).html())}imgPreloader||skipInjection||($pp_pic_holder.find("#pp_full_res")[0].innerHTML=toInject,g())}),!1},a.prettyPhoto.changePage=function(b){currentGalleryPage=0,"previous"==b?(set_position--,set_position<0&&(set_position=a(pp_images).length-1)):"next"==b?(set_position++,set_position>a(pp_images).length-1&&(set_position=0)):set_position=b,rel_index=set_position,doresize||(doresize=!0),settings.allow_expand&&a(".pp_contract").removeClass("pp_contract").addClass("pp_expand"),h(function(){a.prettyPhoto.open()})},a.prettyPhoto.changeGalleryPage=function(a){"next"==a?(currentGalleryPage++,currentGalleryPage>totalPage&&(currentGalleryPage=0)):"previous"==a?(currentGalleryPage--,currentGalleryPage<0&&(currentGalleryPage=totalPage)):currentGalleryPage=a,slide_speed="next"==a||"previous"==a?settings.animation_speed:0,slide_to=currentGalleryPage*(itemsPerPage*itemWidth),$pp_gallery.find("ul").animate({left:-slide_to},slide_speed)},a.prettyPhoto.startSlideshow=function(){"undefined"==typeof x?($pp_pic_holder.find(".pp_play").unbind("click").removeClass("pp_play").addClass("pp_pause").click(function(){return a.prettyPhoto.stopSlideshow(),!1}),x=setInterval(a.prettyPhoto.startSlideshow,settings.slideshow)):a.prettyPhoto.changePage("next")},a.prettyPhoto.stopSlideshow=function(){$pp_pic_holder.find(".pp_pause").unbind("click").removeClass("pp_pause").addClass("pp_play").click(function(){return a.prettyPhoto.startSlideshow(),!1}),clearInterval(x),x=void 0},a.prettyPhoto.close=function(){$pp_overlay.is(":animated")||(a.prettyPhoto.stopSlideshow(),$pp_pic_holder.stop().find("object,embed").css("visibility","hidden"),a("div.pp_pic_holder,div.ppt,.pp_fade").fadeOut(settings.animation_speed,function(){a(this).remove()}),$pp_overlay.fadeOut(settings.animation_speed,function(){settings.hideflash&&a("object,embed,iframe[src*=youtube],iframe[src*=vimeo]").css("visibility","visible"),a(this).remove(),a(window).unbind("scroll.prettyphoto"),d(),settings.callback(),doresize=!0,s=!1,delete settings}))},!pp_alreadyInitialized&&b()&&(pp_alreadyInitialized=!0,hashIndex=b(),hashRel=hashIndex,hashIndex=hashIndex.substring(hashIndex.indexOf("/")+1,hashIndex.length-1),hashRel=hashRel.substring(0,hashRel.indexOf("/")),setTimeout(function(){a("a["+f.hook+"^='"+hashRel+"']:eq("+hashIndex+")").trigger("click")},50)),this.unbind("click.prettyphoto").bind("click.prettyphoto",a.prettyPhoto.initialize)}}(jQuery);var pp_alreadyInitialized=!1;
!function(a){a(function(){a("a.zoom").prettyPhoto({hook:"data-rel",social_tools:!1,theme:"pp_woocommerce",horizontal_padding:20,opacity:.8,deeplinking:!1}),a("a[data-rel^='prettyPhoto']").prettyPhoto({hook:"data-rel",social_tools:!1,theme:"pp_woocommerce",horizontal_padding:20,opacity:.8,deeplinking:!1})})}(jQuery);
;(function($,o){var uploaders={};var analyse_queue={};function _(str){return plupload.translate(str)||str;}
function renderUI(id,target){target.contents().each(function(i,node){node=$(node);if(!node.is('.plupload')){node.remove();}});target.prepend('<div class="plupload_wrapper plupload_scroll">'+'<div id="'+id+'_container" class="plupload_container">'+'<div class="plupload">'+'<div class="plupload_header">'+'<div class="plupload_header_content">'+'<div class="plupload_header_title">'+_('Select files')+'</div>'+'<div class="plupload_header_text">'+p3d.text_bulk_plupload_header_text+'</div>'+'</div>'+'</div>'+'<div class="plupload_content">'+'<div class="plupload_filelist_header">'+'<div class="plupload_file_name">'+_('Filename')+'</div>'+'<div class="plupload_file_price">'+p3d.text_bulk_unit_price+'</div>'+'<div class="plupload_file_qty">'+p3d.text_bulk_qty+'</div>'+'<div class="plupload_file_action">'+_('#')+'</div>'+'<div class="plupload_file_status"><span>'+_('Status')+'</span></div>'+'<div class="plupload_file_size">'+_('Size')+'</div>'+'<div class="plupload_clearer">&nbsp;</div>'+'</div>'+'<ul id="'+id+'_filelist" class="plupload_filelist"></ul>'+'<div class="plupload_filelist_footer">'+'<div class="plupload_file_name">'+'<div class="plupload_buttons">'+'<a href="#" class="plupload_button plupload_add" id="'+id+'_browse">'+_('Add Files')+'</a>'+'<a href="#" style="display:none;" class="plupload_button plupload_start">'+_('Start Upload')+'</a>'+'</div>'+'<span class="plupload_upload_status"></span>'+'</div>'+'<div class="plupload_file_action"></div>'+'<div class="plupload_file_price"><span class="plupload_total_price">&nbsp;</span></div>'+'<div class="plupload_file_status"><span class="plupload_total_status">0%</span></div>'+'<div class="plupload_file_size"><span class="plupload_total_file_size">0 b</span></div>'+'<div class="plupload_progress">'+'<div class="plupload_progress_container">'+'<div class="plupload_progress_bar"></div>'+'</div>'+'</div>'+'<div class="plupload_clearer">&nbsp;</div>'+'</div>'+'</div>'+'</div>'+'</div>'+'<input type="hidden" id="'+id+'_count" name="'+id+'_count" value="0" />'+'</div>');}
$.fn.pluploadQueue=function(settings){if(settings){this.each(function(){var uploader,target,id,contents_bak;target=$(this);id=target.attr('id');if(!id){id=plupload.guid();target.attr('id',id);}
contents_bak=target.html();renderUI(id,target);settings=$.extend({dragdrop:true,browse_button:id+'_browse',container:id},settings);if(settings.dragdrop){settings.drop_element=id+'_filelist';}
uploader=new plupload.Uploader(settings);uploaders[id]=uploader;function handleStatus(file){var actionClass;if(file.status==plupload.DONE){actionClass='plupload_delete';}
if(file.status==plupload.FAILED){actionClass='plupload_failed';}
if(file.status==plupload.QUEUED){actionClass='plupload_delete';}
if(file.status==plupload.UPLOADING){actionClass='plupload_uploading';}
var icon=$('#'+file.id).attr('class',actionClass).find('a').css('display','inline-block');if(file.hint){icon.attr('title',file.hint);}}
function updateTotalProgress(){$('span.plupload_total_status',target).html(uploader.total.percent+'%');$('div.plupload_progress_bar',target).css('width',uploader.total.percent+'%');$('span.plupload_upload_status',target).html(o.sprintf(_('Uploaded %d/%d files'),uploader.total.uploaded,uploader.files.length));}
function updateList(){var fileList=$('ul.plupload_filelist',target).html(''),inputCount=0,inputHTML;var update_html=true;$.each(uploader.files,function(i,file){inputHTML='';if(file.status==plupload.DONE){if(file.target_name){inputHTML+='<input type="hidden" name="'+id+'_'+inputCount+'_tmpname" value="'+plupload.xmlEncode(file.target_name)+'" />';}
inputHTML+='<input type="hidden" name="'+id+'_'+inputCount+'_name" value="'+plupload.xmlEncode(file.name)+'" />';inputHTML+='<input type="hidden" name="'+id+'_'+inputCount+'_status" value="'+(file.status==plupload.DONE?'done':'failed')+'" />';inputCount++;$('#'+id+'_count').val(inputCount);p3d.analyse_queue[file.id].uploaded=true;}
var file_ext=file.name.split('.').pop().toLowerCase();var material_attribute=$('#p3d_materials_bulk_template').html();var printer_attribute=$('#p3d_printers_bulk_template').html();var coating_attribute=$('#p3d_coatings_bulk_template').html();var infill_attribute=$('#p3d_infills_bulk_template').html();var postprocessing_attribute=$('#p3d_postprocessings_bulk_template').html();var custom_attribute=$('#p3d_custom_attributes_bulk_template tbody').html();var unit_attribute=$('#p3d_units_bulk_template').html();var attributes='<table class="p3d-stats-bulk">';if(p3d.selection_order=='materials_printers'){attributes+='<tr style="'+(p3d.show_materials!="on"?"display:none;":"")+'"><td>'+p3d.text_bulk_material+'</td><td>'+material_attribute+'</td></tr>';attributes+='<tr style="'+(p3d.show_printers!="on"?"display:none;":"")+'"><td>'+p3d.text_bulk_printer+'</td><td>'+printer_attribute+'</td></tr>';}
else if(p3d.selection_order=='printers_materials'){attributes+='<tr style="'+(p3d.show_printers!="on"?"display:none;":"")+'"><td>'+p3d.text_bulk_printer+'</td><td>'+printer_attribute+'</td></tr>';attributes+='<tr style="'+(p3d.show_materials!="on"?"display:none;":"")+'"><td>'+p3d.text_bulk_material+'</td><td>'+material_attribute+'</td></tr>';}
attributes+='<tr style="'+(p3d.show_coatings!="on"?"display:none;":"")+'"><td>'+p3d.text_bulk_coating+'</td><td>'+coating_attribute+'</td></tr>';attributes+='<tr style="'+(p3d.show_infills!="on"?"display:none;":"")+'"><td>'+p3d.text_bulk_infill+'</td><td>'+infill_attribute+'</td></tr>';attributes+='<tr style="'+(p3d.show_postprocessings!="on"?"display:none;":"")+'"><td>'+p3d.text_bulk_postprocessing+'</td><td>'+postprocessing_attribute+'</td></tr>';attributes+='<tr style="'+(p3d.show_scale!="on"?"display:none;":"")+'"><td>'+p3d.text_bulk_unit+'</td><td>'+unit_attribute+'</td></tr>';if(file_ext=='dxf'||file_ext=='svg'||file_ext=='eps'||file_ext=='pdf'){var selects_html='';if(typeof(p3d.analyse_queue[file.id])!='undefined'&&typeof(p3d.analyse_queue[file.id].colors)!='undefined'){jQuery.each(p3d.analyse_queue[file.id].colors,function(key,color){if(typeof(color)=='undefined')return;selects_html+='<tr>';selects_html+='<td><div class="p3d-circle" style="color:'+color+';"></div></td>';selects_html+='<td>';selects_html+='<select autocomplete="off" onchange="p3dSelectCuttingInstructionsBulk(\''+file.id+'\', this)" name="p3d_cutting_instructions[\''+color+'\']">';if(p3d.laser_cutting_cut=='on'){selects_html+='<option value="cut">'+p3d.text_cut;}
if(p3d.laser_cutting_engrave=='on'){selects_html+='<option value="engrave">'+p3d.text_engrave;}
if(p3d.laser_cutting_ignore=='on'){selects_html+='<option value="ignore">'+p3d.text_ignore;}
selects_html+='</select>';selects_html+='</td>';selects_html+='</tr>';});if(selects_html.length){attributes+=selects_html;}}}
if(custom_attribute){attributes+=custom_attribute;}
if(p3d.pricing!='checkout')attributes+='<tr><td>Notes</td><td><textarea onchange=p3dSaveComments(this) class="p3d-bulk-comments" rows="2"></textarea></td></tr>';attributes+='</table>';if(typeof(file.price)=='undefined')file.price=0;var html_price=file.price;if(file.percent==99&&file.status==5){file.percent=100;}
var html_status=p3d.text_bulk_uploading+' '+file.percent+'%';var html_stats='Click Calculate button to show stats';var stats_style='';var html_thumb='';if(typeof(p3d.analyse_queue[file.id])!='undefined'){if(typeof(p3d.analyse_queue[file.id].html_price)!='undefined'){html_price=p3d.analyse_queue[file.id].html_price;}
if(typeof(p3d.analyse_queue[file.id].html_status)!='undefined'){html_status=p3d.analyse_queue[file.id].html_status;}
if(typeof(p3d.analyse_queue[file.id].html_stats)!='undefined'){html_stats=p3d.analyse_queue[file.id].html_stats;stats_style='visibility:visible;';}
if(typeof(p3d.analyse_queue[file.id].thumbnail_url)!='undefined'){html_thumb='<a target="_blank" href="'+p3d.analyse_queue[file.id].thumbnail_url+'"><img class="plupload_model_image" src="'+p3d.analyse_queue[file.id].thumbnail_url+'"></a>';}}
fileList.append('<li class="p3d-filelist-item" id="'+file.id+'">'+'<div class="plupload_file_name"><span class="plupload_file_model_name">'+file.name+'&nbsp;<a class="plupload_info_icon" onclick="jQuery(\'.plupload-overlay\').show();" href="#plupload-popup-'+file.id+'" class="plupload-button" style="'+stats_style+'"></a></span><span class="plupload_file_image">'+html_thumb+'</span></div>'+'<div class="plupload_file_price">'+html_price+'</div>'+'<div class="plupload_file_qty">'+'<input name="'+file.id+'_qty" type="number" min="1" step="1" value="1" onchange=p3dSelectQTYBulk(this)>'+'</div>'+'<div class="plupload_file_action"><a class="p3d-file-action" href="#"></a></div>'+'<div class="plupload_file_status">'+html_status+'</div>'+'<div class="plupload_file_size">'+plupload.formatSize(file.size)+'</div>'+'<div class="plupload_clearer">&nbsp;</div>'+
attributes+
inputHTML+'</li>'+'<div id="plupload-popup-'+file.id+'" class="plupload-overlay">'+'<div class="plupload-popup">'+'<h2>Stats</h2>'+'<a class="plupload-close" onclick="jQuery(\'.plupload-overlay\').hide();" href="#p3d-bulk-uploader">&times;</a>'+'<div class="plupload-content">'+
html_stats+'</div>'+'</div>'+'</div>');window.wp.event_manager.doAction('3dprint.fileList_appended');if(typeof(p3d.analyse_queue[file.id])!='undefined'){if(typeof(p3d.analyse_queue[file.id].material_id)!='undefined'){jQuery(fileList).find('.p3d-stats-bulk').last().find('select[name=product_filament]').val(p3d.analyse_queue[file.id].material_id);}}
if(p3d.selection_order=='materials_printers'){p3dSelectFilamentBulk(jQuery(fileList).find('.p3d-stats-bulk').last().find('select[name=product_filament]'));}
else if(p3d.selection_order=='printers_materials'){p3dSelectPrinterBulk(jQuery(fileList).find('.p3d-stats-bulk').last().find('select[name=product_printer]'));}
if(typeof(p3d.analyse_queue[file.id])!='undefined'){if(typeof(p3d.analyse_queue[file.id].printer_id)!='undefined'){console.log('selecting existing printer ',p3d.analyse_queue[file.id].printer_id);jQuery(fileList).find('.p3d-stats-bulk').last().find('select[name=product_printer]').val(p3d.analyse_queue[file.id].printer_id);}}
if(typeof(p3d.analyse_queue[file.id])!='undefined'){if(typeof(p3d.analyse_queue[file.id].coating_id)!='undefined'){console.log('selecting existing coating ',p3d.analyse_queue[file.id].coating_id);jQuery(fileList).find('.p3d-stats-bulk').last().find('select[name=product_coating]').val(p3d.analyse_queue[file.id].coating_id);}}
if(typeof(p3d.analyse_queue[file.id])!='undefined'){if(typeof(p3d.analyse_queue[file.id].infill)!='undefined'){console.log('selecting existing infill ',p3d.analyse_queue[file.id].infill);jQuery(fileList).find('.p3d-stats-bulk').last().find('select[name=product_infill]').val(p3d.analyse_queue[file.id].infill);}}
if(typeof(p3d.analyse_queue[file.id])!='undefined'){if(typeof(p3d.analyse_queue[file.id].postprocessing_id)!='undefined'){console.log('selecting existing postprocessing ',p3d.analyse_queue[file.id].postprocessing_id);jQuery(fileList).find('.p3d-stats-bulk').last().find('select[name=product_postprocessing]').val(p3d.analyse_queue[file.id].postprocessing_id);}
else{if(typeof(p3d.default_postprocessing)!='undefined'&&p3d.default_postprocessing.length){jQuery(fileList).find('.p3d-stats-bulk').last().find('select[name=product_postprocessing]').val(p3d.default_postprocessing);}}}
if(typeof(p3d.analyse_queue[file.id])!='undefined'){if(typeof(p3d.analyse_queue[file.id].unit)!='undefined'){console.log('selecting existing unit ',p3d.analyse_queue[file.id].unit);jQuery(fileList).find('.p3d-stats-bulk').last().find('select[name=product_unit]').val(p3d.analyse_queue[file.id].unit);}}
if(typeof(p3d.analyse_queue[file.id])!='undefined'){if(typeof(p3d.analyse_queue[file.id].qty)!='undefined'){console.log('selecting existing qty ',p3d.analyse_queue[file.id].qty);jQuery(fileList).find('li#'+file.id).find('input[name='+file.id+'_qty]').val(parseInt(p3d.analyse_queue[file.id].qty));}}
if(typeof(p3d.analyse_queue[file.id])!='undefined'){if(typeof(p3d.analyse_queue[file.id].comments)!='undefined'){console.log('setting existing comments ',p3d.analyse_queue[file.id].comments);jQuery(fileList).find('li#'+file.id).find('textarea.p3d-bulk-comments').val(p3d.analyse_queue[file.id].comments);}}
if(typeof(p3d.analyse_queue[file.id])!='undefined'){if(typeof(p3d.analyse_queue[file.id].cutting_instructions)!='undefined'){jQuery(fileList).find('li#'+file.id).find('select[name^=p3d_cutting_instructions]').each(function(i,obj){var cutting_instructions=p3d.analyse_queue[file.id].cutting_instructions.split(',');var start=jQuery(obj).prop('name').indexOf('[')+2;var end=jQuery(obj).prop('name').indexOf(']')-1;var obj_color=jQuery(obj).prop('name').substring(start,end);jQuery.each(cutting_instructions,function(key,value){if(value.length){var color_instruction=value.split('=');var color=color_instruction[0];var instruction=color_instruction[1];if(color==obj_color){jQuery(obj).val(instruction);console.log('setting existing cutting instruction ',color+'='+instruction);}}})})}}
if(typeof(p3d.analyse_queue[file.id])!='undefined'){if(typeof(p3d.analyse_queue[file.id].custom_attributes)!='undefined'){jQuery(fileList).find('li#'+file.id).find('select[name^=attribute_pa]').each(function(i,obj){var attribute_name=jQuery(obj).data('id');var attribute_value=jQuery(obj).val();var custom_attributes=p3d.analyse_queue[file.id].custom_attributes;for(const key in custom_attributes){if(key==attribute_name){console.log('setting existing custom attribute ',custom_attributes[key]);jQuery(obj).val(custom_attributes[key]);}}});}}
if(file.status==plupload.DONE){jQuery(fileList).find('li#'+file.id).find('select').prop('disabled',false);}
handleStatus(file);$('#'+file.id+'.plupload_delete').find('.plupload_file_action a.p3d-file-action').click(function(e){$('#'+file.id).remove();uploader.removeFile(file);e.preventDefault();});});$('span.plupload_total_file_size',target).html(plupload.formatSize(uploader.total.size));if(uploader.total.queued===0){$('span.plupload_add_text',target).html(_('Add Files'));}else{$('span.plupload_add_text',target).html(o.sprintf(_('%d files queued'),uploader.total.queued));}
$('a.plupload_start',target).toggleClass('plupload_disabled',uploader.files.length==(uploader.total.uploaded+uploader.total.failed));fileList[0].scrollTop=fileList[0].scrollHeight;updateTotalProgress();if(!uploader.files.length&&uploader.features.dragdrop&&uploader.settings.dragdrop){$('#'+id+'_filelist').append('<li class="plupload_droptext">'+_("Drag files here.")+'</li>');}}
function addToAnalyseQueue(file){analyse_queue[file.id]=file;}
function destroy(){delete uploaders[id];uploader.destroy();target.html(contents_bak);uploader=target=contents_bak=null;}
uploader.bind("UploadFile",function(up,file){$('#'+file.id).addClass('plupload_current_file');});uploader.bind('Init',function(up,res){if(!settings.unique_names&&settings.rename){target.on('click','#'+id+'_filelist div.plupload_file_name span',function(e){var targetSpan=$(e.target),file,parts,name,ext="";file=up.getFile(targetSpan.parents('li')[0].id);name=file.name;parts=/^(.+)(\.[^.]+)$/.exec(name);if(parts){name=parts[1];ext=parts[2];}
targetSpan.hide().after('<input type="text" />');targetSpan.next().val(name).focus().blur(function(){targetSpan.show().next().remove();}).keydown(function(e){var targetInput=$(this);if(e.keyCode==13){e.preventDefault();file.name=targetInput.val()+ext;targetSpan.html(file.name);targetInput.blur();}});});}
$('a.plupload_start',target).click(function(e){if(!$(this).hasClass('plupload_disabled')){uploader.start();}
e.preventDefault();});$('a.plupload_stop',target).click(function(e){e.preventDefault();uploader.stop();});$('a.plupload_start',target).addClass('plupload_disabled');});uploader.bind("Error",function(up,err){var file=err.file,message;if(file){message=err.message;if(err.details){message+=" ("+err.details+")";}
if(err.code==plupload.FILE_SIZE_ERROR){alert(_("Error: File too large:")+" "+file.name);}
if(err.code==plupload.FILE_EXTENSION_ERROR){alert(_("Error: Invalid file extension:")+" "+file.name);}
file.hint=message;$('#'+file.id).attr('class','plupload_failed').find('a').css('display','inline-block').attr('title',message);}
if(err.code===plupload.INIT_ERROR){setTimeout(function(){destroy();},1);}});uploader.bind("PostInit",function(up){if(up.settings.dragdrop&&up.features.dragdrop){$('#'+id+'_filelist').append('<li class="plupload_droptext">'+_("Drag files here.")+'</li>');}});uploader.init();uploader.bind('StateChanged',function(){if(uploader.state===plupload.STARTED){$('li.plupload_delete a,div.plupload_buttons',target).hide();uploader.disableBrowse(true);$('span.plupload_upload_status,div.plupload_progress,a.plupload_stop',target).css('display','inline-block');$('span.plupload_upload_status',target).html('Uploaded '+uploader.total.uploaded+'/'+uploader.files.length+' files');if(settings.multiple_queues){$('span.plupload_total_status,span.plupload_total_file_size',target).show();}}else{updateList();$('a.plupload_stop,div.plupload_progress',target).hide();$('a.plupload_delete',target).css('display','inline-block');if(settings.multiple_queues&&uploader.total.uploaded+uploader.total.failed==uploader.files.length){$(".plupload_buttons,.plupload_upload_status",target).css("display","inline");uploader.disableBrowse(false);$(".plupload_start",target).addClass("plupload_disabled");$('span.plupload_total_status,span.plupload_total_file_size',target).hide();}}});uploader.bind('FilesAdded',updateList);uploader.bind('FilesRemoved',function(){var scrollTop=$('#'+id+'_filelist').scrollTop();updateList();$('#'+id+'_filelist').scrollTop(scrollTop);});uploader.bind("UploadProgress",function(up,file){if(file.percent==100&&file.status!=5){file.percent=99;}
$('#'+file.id+' div.plupload_file_status',target).html('Uploading '+file.percent+'%');handleStatus(file);updateTotalProgress();});if(settings.setup){settings.setup(uploader);}});return this;}else{return uploaders[$(this[0]).attr('id')];}};})(jQuery,mOxie);
/*!
 * classie - class helper functions
 * from bonzo https://github.com/ded/bonzo
 * 
 * classie.has( elem, 'my-class' ) -> true/false
 * classie.add( elem, 'my-new-class' )
 * classie.remove( elem, 'my-unwanted-class' )
 * classie.toggle( elem, 'my-class' )
 */
(function(window){'use strict';function classReg(className){return new RegExp("(^|\\s+)"+className+"(\\s+|$)");}
var hasClass,addClass,removeClass;if('classList'in document.documentElement){hasClass=function(elem,c){return elem.classList.contains(c);};addClass=function(elem,c){elem.classList.add(c);};removeClass=function(elem,c){elem.classList.remove(c);};}
else{hasClass=function(elem,c){return classReg(c).test(elem.className);};addClass=function(elem,c){if(!hasClass(elem,c)){elem.className=elem.className+' '+c;}};removeClass=function(elem,c){elem.className=elem.className.replace(classReg(c),' ');};}
function toggleClass(elem,c){var fn=hasClass(elem,c)?removeClass:addClass;fn(elem,c);}
var classie={hasClass:hasClass,addClass:addClass,removeClass:removeClass,toggleClass:toggleClass,has:hasClass,add:addClass,remove:removeClass,toggle:toggleClass};if(typeof define==='function'&&define.amd){define(classie);}else{window.classie=classie;}})(window);
;(function(window){'use strict';Modernizr.addTest('csstransformspreserve3d',function(){var prop=Modernizr.prefixed('transformStyle');var val='preserve-3d';var computedStyle;if(!prop)return false;prop=prop.replace(/([A-Z])/g,function(str,m1){return'-'+m1.toLowerCase();}).replace(/^ms-/,'-ms-');Modernizr.testStyles('#modernizr{'+prop+':'+val+';}',function(el,rule){computedStyle=window.getComputedStyle?getComputedStyle(el,null).getPropertyValue(prop):'';});return(computedStyle===val);});function extend(a,b){for(var key in b){if(b.hasOwnProperty(key)){a[key]=b[key];}}
return a;}
var support={transitions:Modernizr.csstransitions,transforms3d:Modernizr.csstransforms3d&&Modernizr.csstransformspreserve3d},transEndEventNames={'WebkitTransition':'webkitTransitionEnd','MozTransition':'transitionend','OTransition':'oTransitionEnd','msTransition':'MSTransitionEnd','transition':'transitionend'},transEndEventName=transEndEventNames[Modernizr.prefixed('transition')];function ProgressButton(el,options){if(!el)return;this.button=el;this.options=extend({},this.options);extend(this.options,options);this._init();}
ProgressButton.prototype.options={statusTime:1500};ProgressButton.prototype._init=function(){this._validate();this._create();this._initEvents();};ProgressButton.prototype._validate=function(){if(this.button.getAttribute('data-style')===null){this.button.setAttribute('data-style','fill');}
if(this.button.getAttribute('data-vertical')===null&&this.button.getAttribute('data-horizontal')===null){this.button.setAttribute('data-horizontal','');}
if(!support.transforms3d&&this.button.getAttribute('data-perspective')!==null){this.button.removeAttribute('data-perspective');this.button.setAttribute('data-style','fill');this.button.removeAttribute('data-vertical');this.button.setAttribute('data-horizontal','');}};ProgressButton.prototype._create=function(){var textEl=document.createElement('span');textEl.className='content';textEl.innerHTML=this.button.innerHTML;var progressEl=document.createElement('span');progressEl.className='progress';var progressInnerEl=document.createElement('span');progressInnerEl.className='progress-inner';progressEl.appendChild(progressInnerEl);this.button.innerHTML='';if(this.button.getAttribute('data-perspective')!==null){var progressWrapEl=document.createElement('span');progressWrapEl.className='progress-wrap';progressWrapEl.appendChild(textEl);progressWrapEl.appendChild(progressEl);this.button.appendChild(progressWrapEl);}
else{this.button.appendChild(textEl);this.button.appendChild(progressEl);}
this.progress=progressInnerEl;if(this.button.getAttribute('data-horizontal')!==null){this.progressProp='width';}
else if(this.button.getAttribute('data-vertical')!==null){this.progressProp='height';}
this._enable();};ProgressButton.prototype._setProgress=function(val){this.progress.style[this.progressProp]=100*val+'%';};ProgressButton.prototype._initEvents=function(){var self=this;this.button.addEventListener('click',function(){self.button.setAttribute('disabled','');classie.remove(self.progress,'notransition');classie.add(this,'state-loading');setTimeout(function(){if(typeof self.options.callback==='function'){self.options.callback(self);}
else{self._setProgress(1);var onEndTransFn=function(ev){if(support.transitions&&ev.propertyName!==self.progressProp)return;this.removeEventListener(transEndEventName,onEndTransFn);self._stop();};if(support.transitions){self.progress.addEventListener(transEndEventName,onEndTransFn);}
else{onEndTransFn.call();}}},self.button.getAttribute('data-style')==='fill'||self.button.getAttribute('data-style')==='top-line'||self.button.getAttribute('data-style')==='lateral-lines'?0:200);});};ProgressButton.prototype._stop=function(status){var self=this;setTimeout(function(){self.progress.style.opacity=0;var onEndTransFn=function(ev){if(support.transitions&&ev.propertyName!=='opacity')return;this.removeEventListener(transEndEventName,onEndTransFn);classie.add(self.progress,'notransition');self.progress.style[self.progressProp]='0%';self.progress.style.opacity=1;};if(support.transitions){self.progress.addEventListener(transEndEventName,onEndTransFn);}
else{onEndTransFn.call();}
if(typeof status==='number'){var statusClass=status>=0?'state-success':'state-error';classie.add(self.button,statusClass);setTimeout(function(){classie.remove(self.button,statusClass);self._enable();},self.options.statusTime);}
else{self._enable();}
classie.remove(self.button,'state-loading');},100);};ProgressButton.prototype._enable=function(){this.button.removeAttribute('disabled');}
window.ProgressButton=ProgressButton;})(window);
(function(window,undefined){'use strict';var EventManager=function(){var slice=Array.prototype.slice;var MethodsAvailable={removeFilter:removeFilter,applyFilters:applyFilters,addFilter:addFilter,removeAction:removeAction,doAction:doAction,addAction:addAction};var STORAGE={actions:{},filters:{}};function addAction(action,callback,priority,context){if(typeof action==='string'&&typeof callback==='function'){priority=parseInt((priority||10),10);_addHook('actions',action,callback,priority,context);}
return MethodsAvailable;}
function doAction(){var args=slice.call(arguments);var action=args.shift();if(typeof action==='string'){_runHook('actions',action,args);}
return MethodsAvailable;}
function removeAction(action,callback){if(typeof action==='string'){_removeHook('actions',action,callback);}
return MethodsAvailable;}
function addFilter(filter,callback,priority,context){if(typeof filter==='string'&&typeof callback==='function'){priority=parseInt((priority||10),10);_addHook('filters',filter,callback,priority,context);}
return MethodsAvailable;}
function applyFilters(){var args=slice.call(arguments);var filter=args.shift();if(typeof filter==='string'){return _runHook('filters',filter,args);}
return MethodsAvailable;}
function removeFilter(filter,callback){if(typeof filter==='string'){_removeHook('filters',filter,callback);}
return MethodsAvailable;}
function _removeHook(type,hook,callback,context){var handlers,handler,i;if(!STORAGE[type][hook]){return;}
if(!callback){STORAGE[type][hook]=[];}else{handlers=STORAGE[type][hook];if(!context){for(i=handlers.length;i--;){if(handlers[i].callback===callback){handlers.splice(i,1);}}}
else{for(i=handlers.length;i--;){handler=handlers[i];if(handler.callback===callback&&handler.context===context){handlers.splice(i,1);}}}}}
function _addHook(type,hook,callback,priority,context){var hookObject={callback:callback,priority:priority,context:context};var hooks=STORAGE[type][hook];if(hooks){hooks.push(hookObject);hooks=_hookInsertSort(hooks);}
else{hooks=[hookObject];}
STORAGE[type][hook]=hooks;}
function _hookInsertSort(hooks){var tmpHook,j,prevHook;for(var i=1,len=hooks.length;i<len;i++){tmpHook=hooks[i];j=i;while((prevHook=hooks[j-1])&&prevHook.priority>tmpHook.priority){hooks[j]=hooks[j-1];--j;}
hooks[j]=tmpHook;}
return hooks;}
function _runHook(type,hook,args){var handlers=STORAGE[type][hook],i,len;if(!handlers){return(type==='filters')?args[0]:false;}
len=handlers.length;if(type==='filters'){for(i=0;i<len;i++){args[0]=handlers[i].callback.apply(handlers[i].context,args);}}else{for(i=0;i<len;i++){handlers[i].callback.apply(handlers[i].context,args);}}
return(type==='filters')?args[0]:true;}
return MethodsAvailable;};window.wp=window.wp||{};window.wp.event_manager=new EventManager();})(window);
/*!
 * accounting.js v0.4.2, copyright 2014 Open Exchange Rates, MIT license, http://openexchangerates.github.io/accounting.js
 */
(function(p,z){function q(a){return!!(""===a||a&&a.charCodeAt&&a.substr)}function m(a){return u?u(a):"[object Array]"===v.call(a)}function r(a){return"[object Object]"===v.call(a)}function s(a,b){var d,a=a||{},b=b||{};for(d in b)b.hasOwnProperty(d)&&null==a[d]&&(a[d]=b[d]);return a}function j(a,b,d){var c=[],e,h;if(!a)return c;if(w&&a.map===w)return a.map(b,d);for(e=0,h=a.length;e<h;e++)c[e]=b.call(d,a[e],e,a);return c}function n(a,b){a=Math.round(Math.abs(a));return isNaN(a)?b:a}function x(a){var b=c.settings.currency.format;"function"===typeof a&&(a=a());return q(a)&&a.match("%v")?{pos:a,neg:a.replace("-","").replace("%v","-%v"),zero:a}:!a||!a.pos||!a.pos.match("%v")?!q(b)?b:c.settings.currency.format={pos:b,neg:b.replace("%v","-%v"),zero:b}:a}var c={version:"0.4.1",settings:{currency:{symbol:"$",format:"%s%v",decimal:".",thousand:",",precision:2,grouping:3},number:{precision:0,grouping:3,thousand:",",decimal:"."}}},w=Array.prototype.map,u=Array.isArray,v=Object.prototype.toString,o=c.unformat=c.parse=function(a,b){if(m(a))return j(a,function(a){return o(a,b)});a=a||0;if("number"===typeof a)return a;var b=b||".",c=RegExp("[^0-9-"+b+"]",["g"]),c=parseFloat((""+a).replace(/\((.*)\)/,"-$1").replace(c,"").replace(b,"."));return!isNaN(c)?c:0},y=c.toFixed=function(a,b){var b=n(b,c.settings.number.precision),d=Math.pow(10,b);return(Math.round(c.unformat(a)*d)/d).toFixed(b)},t=c.formatNumber=c.format=function(a,b,d,i){if(m(a))return j(a,function(a){return t(a,b,d,i)});var a=o(a),e=s(r(b)?b:{precision:b,thousand:d,decimal:i},c.settings.number),h=n(e.precision),f=0>a?"-":"",g=parseInt(y(Math.abs(a||0),h),10)+"",l=3<g.length?g.length%3:0;return f+(l?g.substr(0,l)+e.thousand:"")+g.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+e.thousand)+(h?e.decimal+y(Math.abs(a),h).split(".")[1]:"")},A=c.formatMoney=function(a,b,d,i,e,h){if(m(a))return j(a,function(a){return A(a,b,d,i,e,h)});var a=o(a),f=s(r(b)?b:{symbol:b,precision:d,thousand:i,decimal:e,format:h},c.settings.currency),g=x(f.format);return(0<a?g.pos:0>a?g.neg:g.zero).replace("%s",f.symbol).replace("%v",t(Math.abs(a),n(f.precision),f.thousand,f.decimal))};c.formatColumn=function(a,b,d,i,e,h){if(!a)return[];var f=s(r(b)?b:{symbol:b,precision:d,thousand:i,decimal:e,format:h},c.settings.currency),g=x(f.format),l=g.pos.indexOf("%s")<g.pos.indexOf("%v")?!0:!1,k=0,a=j(a,function(a){if(m(a))return c.formatColumn(a,f);a=o(a);a=(0<a?g.pos:0>a?g.neg:g.zero).replace("%s",f.symbol).replace("%v",t(Math.abs(a),n(f.precision),f.thousand,f.decimal));if(a.length>k)k=a.length;return a});return j(a,function(a){return q(a)&&a.length<k?l?a.replace(f.symbol,f.symbol+Array(k-a.length+1).join(" ")):Array(k-a.length+1).join(" ")+a:a})};if("undefined"!==typeof exports){if("undefined"!==typeof module&&module.exports)exports=module.exports=c;exports.accounting=c}else"function"===typeof define&&define.amd?define([],function(){return c}):(c.noConflict=function(a){return function(){p.accounting=a;c.noConflict=z;return c}}(p.accounting),p.accounting=c)})(this);
/*! nouislider - 8.2.1 - 2015-12-02 21:43:14 */
!function(a){"function"==typeof define&&define.amd?define([],a):"object"==typeof exports?module.exports=a():window.noUiSlider=a()}(function(){"use strict";function a(a){return a.filter(function(a){return this[a]?!1:this[a]=!0},{})}function b(a,b){return Math.round(a/b)*b}function c(a){var b=a.getBoundingClientRect(),c=a.ownerDocument,d=c.documentElement,e=m();return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(e.x=0),{top:b.top+e.y-d.clientTop,left:b.left+e.x-d.clientLeft}}function d(a){return"number"==typeof a&&!isNaN(a)&&isFinite(a)}function e(a){var b=Math.pow(10,7);return Number((Math.round(a*b)/b).toFixed(7))}function f(a,b,c){j(a,b),setTimeout(function(){k(a,b)},c)}function g(a){return Math.max(Math.min(a,100),0)}function h(a){return Array.isArray(a)?a:[a]}function i(a){var b=a.split(".");return b.length>1?b[1].length:0}function j(a,b){a.classList?a.classList.add(b):a.className+=" "+b}function k(a,b){a.classList?a.classList.remove(b):a.className=a.className.replace(new RegExp("(^|\\b)"+b.split(" ").join("|")+"(\\b|$)","gi")," ")}function l(a,b){a.classList?a.classList.contains(b):new RegExp("(^| )"+b+"( |$)","gi").test(a.className)}function m(){var a=void 0!==window.pageXOffset,b="CSS1Compat"===(document.compatMode||""),c=a?window.pageXOffset:b?document.documentElement.scrollLeft:document.body.scrollLeft,d=a?window.pageYOffset:b?document.documentElement.scrollTop:document.body.scrollTop;return{x:c,y:d}}function n(a){a.stopPropagation()}function o(a){return function(b){return a+b}}function p(a,b){return 100/(b-a)}function q(a,b){return 100*b/(a[1]-a[0])}function r(a,b){return q(a,a[0]<0?b+Math.abs(a[0]):b-a[0])}function s(a,b){return b*(a[1]-a[0])/100+a[0]}function t(a,b){for(var c=1;a>=b[c];)c+=1;return c}function u(a,b,c){if(c>=a.slice(-1)[0])return 100;var d,e,f,g,h=t(c,a);return d=a[h-1],e=a[h],f=b[h-1],g=b[h],f+r([d,e],c)/p(f,g)}function v(a,b,c){if(c>=100)return a.slice(-1)[0];var d,e,f,g,h=t(c,b);return d=a[h-1],e=a[h],f=b[h-1],g=b[h],s([d,e],(c-f)*p(f,g))}function w(a,c,d,e){if(100===e)return e;var f,g,h=t(e,a);return d?(f=a[h-1],g=a[h],e-f>(g-f)/2?g:f):c[h-1]?a[h-1]+b(e-a[h-1],c[h-1]):e}function x(a,b,c){var e;if("number"==typeof b&&(b=[b]),"[object Array]"!==Object.prototype.toString.call(b))throw new Error("noUiSlider: 'range' contains invalid value.");if(e="min"===a?0:"max"===a?100:parseFloat(a),!d(e)||!d(b[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");c.xPct.push(e),c.xVal.push(b[0]),e?c.xSteps.push(isNaN(b[1])?!1:b[1]):isNaN(b[1])||(c.xSteps[0]=b[1])}function y(a,b,c){return b?void(c.xSteps[a]=q([c.xVal[a],c.xVal[a+1]],b)/p(c.xPct[a],c.xPct[a+1])):!0}function z(a,b,c,d){this.xPct=[],this.xVal=[],this.xSteps=[d||!1],this.xNumSteps=[!1],this.snap=b,this.direction=c;var e,f=[];for(e in a)a.hasOwnProperty(e)&&f.push([a[e],e]);for(f.length&&"object"==typeof f[0][0]?f.sort(function(a,b){return a[0][0]-b[0][0]}):f.sort(function(a,b){return a[0]-b[0]}),e=0;e<f.length;e++)x(f[e][1],f[e][0],this);for(this.xNumSteps=this.xSteps.slice(0),e=0;e<this.xNumSteps.length;e++)y(e,this.xNumSteps[e],this)}function A(a,b){if(!d(b))throw new Error("noUiSlider: 'step' is not numeric.");a.singleStep=b}function B(a,b){if("object"!=typeof b||Array.isArray(b))throw new Error("noUiSlider: 'range' is not an object.");if(void 0===b.min||void 0===b.max)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");if(b.min===b.max)throw new Error("noUiSlider: 'range' 'min' and 'max' cannot be equal.");a.spectrum=new z(b,a.snap,a.dir,a.singleStep)}function C(a,b){if(b=h(b),!Array.isArray(b)||!b.length||b.length>2)throw new Error("noUiSlider: 'start' option is incorrect.");a.handles=b.length,a.start=b}function D(a,b){if(a.snap=b,"boolean"!=typeof b)throw new Error("noUiSlider: 'snap' option must be a boolean.")}function E(a,b){if(a.animate=b,"boolean"!=typeof b)throw new Error("noUiSlider: 'animate' option must be a boolean.")}function F(a,b){if("lower"===b&&1===a.handles)a.connect=1;else if("upper"===b&&1===a.handles)a.connect=2;else if(b===!0&&2===a.handles)a.connect=3;else{if(b!==!1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");a.connect=0}}function G(a,b){switch(b){case"horizontal":a.ort=0;break;case"vertical":a.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function H(a,b){if(!d(b))throw new Error("noUiSlider: 'margin' option must be numeric.");if(a.margin=a.spectrum.getMargin(b),!a.margin)throw new Error("noUiSlider: 'margin' option is only supported on linear sliders.")}function I(a,b){if(!d(b))throw new Error("noUiSlider: 'limit' option must be numeric.");if(a.limit=a.spectrum.getMargin(b),!a.limit)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders.")}function J(a,b){switch(b){case"ltr":a.dir=0;break;case"rtl":a.dir=1,a.connect=[0,2,1,3][a.connect];break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function K(a,b){if("string"!=typeof b)throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var c=b.indexOf("tap")>=0,d=b.indexOf("drag")>=0,e=b.indexOf("fixed")>=0,f=b.indexOf("snap")>=0,g=b.indexOf("hover")>=0;if(d&&!a.connect)throw new Error("noUiSlider: 'drag' behaviour must be used with 'connect': true.");a.events={tap:c||f,drag:d,fixed:e,snap:f,hover:g}}function L(a,b){var c;if(b!==!1)if(b===!0)for(a.tooltips=[],c=0;c<a.handles;c++)a.tooltips.push(!0);else{if(a.tooltips=h(b),a.tooltips.length!==a.handles)throw new Error("noUiSlider: must pass a formatter for all handles.");a.tooltips.forEach(function(a){if("boolean"!=typeof a&&("object"!=typeof a||"function"!=typeof a.to))throw new Error("noUiSlider: 'tooltips' must be passed a formatter or 'false'.")})}}function M(a,b){if(a.format=b,"function"==typeof b.to&&"function"==typeof b.from)return!0;throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.")}function N(a,b){if(void 0!==b&&"string"!=typeof b)throw new Error("noUiSlider: 'cssPrefix' must be a string.");a.cssPrefix=b}function O(a){var b,c={margin:0,limit:0,animate:!0,format:T};b={step:{r:!1,t:A},start:{r:!0,t:C},connect:{r:!0,t:F},direction:{r:!0,t:J},snap:{r:!1,t:D},animate:{r:!1,t:E},range:{r:!0,t:B},orientation:{r:!1,t:G},margin:{r:!1,t:H},limit:{r:!1,t:I},behaviour:{r:!0,t:K},format:{r:!1,t:M},tooltips:{r:!1,t:L},cssPrefix:{r:!1,t:N}};var d={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal"};return Object.keys(b).forEach(function(e){if(void 0===a[e]&&void 0===d[e]){if(b[e].r)throw new Error("noUiSlider: '"+e+"' is required.");return!0}b[e].t(c,void 0===a[e]?d[e]:a[e])}),c.pips=a.pips,c.style=c.ort?"top":"left",c}function P(b,d){function e(a,b,c){var d=a+b[0],e=a+b[1];return c?(0>d&&(e+=Math.abs(d)),e>100&&(d-=e-100),[g(d),g(e)]):[d,e]}function p(a,b){a.preventDefault();var c,d,e=0===a.type.indexOf("touch"),f=0===a.type.indexOf("mouse"),g=0===a.type.indexOf("pointer"),h=a;return 0===a.type.indexOf("MSPointer")&&(g=!0),e&&(c=a.changedTouches[0].pageX,d=a.changedTouches[0].pageY),b=b||m(),(f||g)&&(c=a.clientX+b.x,d=a.clientY+b.y),h.pageOffset=b,h.points=[c,d],h.cursor=f||g,h}function q(a,b){var c=document.createElement("div"),d=document.createElement("div"),e=["-lower","-upper"];return a&&e.reverse(),j(d,da[3]),j(d,da[3]+e[b]),j(c,da[2]),c.appendChild(d),c}function r(a,b,c){switch(a){case 1:j(b,da[7]),j(c[0],da[6]);break;case 3:j(c[1],da[6]);case 2:j(c[0],da[7]);case 0:j(b,da[6])}}function s(a,b,c){var d,e=[];for(d=0;a>d;d+=1)e.push(c.appendChild(q(b,d)));return e}function t(a,b,c){j(c,da[0]),j(c,da[8+a]),j(c,da[4+b]);var d=document.createElement("div");return j(d,da[1]),c.appendChild(d),d}function u(a,b){if(!d.tooltips[b])return!1;var c=document.createElement("div");return c.className=da[18],a.firstChild.appendChild(c)}function v(){d.dir&&d.tooltips.reverse();var a=Y.map(u);d.dir&&(a.reverse(),d.tooltips.reverse()),U("update",function(b,c,e){a[c]&&(a[c].innerHTML=d.tooltips[c]===!0?b[c]:d.tooltips[c].to(e[c]))})}function w(a,b,c){if("range"===a||"steps"===a)return aa.xVal;if("count"===a){var d,e=100/(b-1),f=0;for(b=[];(d=f++*e)<=100;)b.push(d);a="positions"}return"positions"===a?b.map(function(a){return aa.fromStepping(c?aa.getStep(a):a)}):"values"===a?c?b.map(function(a){return aa.fromStepping(aa.getStep(aa.toStepping(a)))}):b:void 0}function x(b,c,d){function e(a,b){return(a+b).toFixed(7)/1}var f=aa.direction,g={},h=aa.xVal[0],i=aa.xVal[aa.xVal.length-1],j=!1,k=!1,l=0;return aa.direction=0,d=a(d.slice().sort(function(a,b){return a-b})),d[0]!==h&&(d.unshift(h),j=!0),d[d.length-1]!==i&&(d.push(i),k=!0),d.forEach(function(a,f){var h,i,m,n,o,p,q,r,s,t,u=a,v=d[f+1];if("steps"===c&&(h=aa.xNumSteps[f]),h||(h=v-u),u!==!1&&void 0!==v)for(i=u;v>=i;i=e(i,h)){for(n=aa.toStepping(i),o=n-l,r=o/b,s=Math.round(r),t=o/s,m=1;s>=m;m+=1)p=l+m*t,g[p.toFixed(5)]=["x",0];q=d.indexOf(i)>-1?1:"steps"===c?2:0,!f&&j&&(q=0),i===v&&k||(g[n.toFixed(5)]=[i,q]),l=n}}),aa.direction=f,g}function y(a,b,c){function e(a){return["-normal","-large","-sub"][a]}function f(a,b,c){return'class="'+b+" "+b+"-"+h+" "+b+e(c[1])+'" style="'+d.style+": "+a+'%"'}function g(a,d){aa.direction&&(a=100-a),d[1]=d[1]&&b?b(d[0],d[1]):d[1],i.innerHTML+="<div "+f(a,da[21],d)+"></div>",d[1]&&(i.innerHTML+="<div "+f(a,da[22],d)+">"+c.to(d[0])+"</div>")}var h=["horizontal","vertical"][d.ort],i=document.createElement("div");return j(i,da[20]),j(i,da[20]+"-"+h),Object.keys(a).forEach(function(b){g(b,a[b])}),i}function z(a){var b=a.mode,c=a.density||1,d=a.filter||!1,e=a.values||!1,f=a.stepped||!1,g=w(b,e,f),h=x(c,b,g),i=a.format||{to:Math.round};return $.appendChild(y(h,d,i))}function A(){return X["offset"+["Width","Height"][d.ort]]}function B(a,b,c){void 0!==b&&1!==d.handles&&(b=Math.abs(b-d.dir)),Object.keys(ca).forEach(function(d){var e=d.split(".")[0];a===e&&ca[d].forEach(function(a){a.call(Z,h(P()),b,h(C(Array.prototype.slice.call(ba))),c||!1)})})}function C(a){return 1===a.length?a[0]:d.dir?a.reverse():a}function D(a,b,c,e){var f=function(b){return $.hasAttribute("disabled")?!1:l($,da[14])?!1:(b=p(b,e.pageOffset),a===R.start&&void 0!==b.buttons&&b.buttons>1?!1:e.hover&&b.buttons?!1:(b.calcPoint=b.points[d.ort],void c(b,e)))},g=[];return a.split(" ").forEach(function(a){b.addEventListener(a,f,!1),g.push([a,f])}),g}function E(a,b){if(-1===navigator.appVersion.indexOf("MSIE 9")&&0===a.buttons&&0!==b.buttonsProperty)return F(a,b);var c,d,f=b.handles||Y,g=!1,h=100*(a.calcPoint-b.start)/b.baseSize,i=f[0]===Y[0]?0:1;if(c=e(h,b.positions,f.length>1),g=L(f[0],c[i],1===f.length),f.length>1){if(g=L(f[1],c[i?0:1],!1)||g)for(d=0;d<b.handles.length;d++)B("slide",d)}else g&&B("slide",i)}function F(a,b){var c=X.querySelector("."+da[15]),d=b.handles[0]===Y[0]?0:1;null!==c&&k(c,da[15]),a.cursor&&(document.body.style.cursor="",document.body.removeEventListener("selectstart",document.body.noUiListener));var e=document.documentElement;e.noUiListeners.forEach(function(a){e.removeEventListener(a[0],a[1])}),k($,da[12]),B("set",d),B("change",d),void 0!==b.handleNumber&&B("end",b.handleNumber)}function G(a,b){"mouseout"===a.type&&"HTML"===a.target.nodeName&&null===a.relatedTarget&&F(a,b)}function H(a,b){var c=document.documentElement;if(1===b.handles.length&&(j(b.handles[0].children[0],da[15]),b.handles[0].hasAttribute("disabled")))return!1;a.preventDefault(),a.stopPropagation();var d=D(R.move,c,E,{start:a.calcPoint,baseSize:A(),pageOffset:a.pageOffset,handles:b.handles,handleNumber:b.handleNumber,buttonsProperty:a.buttons,positions:[_[0],_[Y.length-1]]}),e=D(R.end,c,F,{handles:b.handles,handleNumber:b.handleNumber}),f=D("mouseout",c,G,{handles:b.handles,handleNumber:b.handleNumber});if(c.noUiListeners=d.concat(e,f),a.cursor){document.body.style.cursor=getComputedStyle(a.target).cursor,Y.length>1&&j($,da[12]);var g=function(){return!1};document.body.noUiListener=g,document.body.addEventListener("selectstart",g,!1)}void 0!==b.handleNumber&&B("start",b.handleNumber)}function I(a){var b,e,g=a.calcPoint,h=0;return a.stopPropagation(),Y.forEach(function(a){h+=c(a)[d.style]}),b=h/2>g||1===Y.length?0:1,g-=c(X)[d.style],e=100*g/A(),d.events.snap||f($,da[14],300),Y[b].hasAttribute("disabled")?!1:(L(Y[b],e),B("slide",b,!0),B("set",b,!0),B("change",b,!0),void(d.events.snap&&H(a,{handles:[Y[b]]})))}function J(a){var b=a.calcPoint-c(X)[d.style],e=aa.getStep(100*b/A()),f=aa.fromStepping(e);Object.keys(ca).forEach(function(a){"hover"===a.split(".")[0]&&ca[a].forEach(function(a){a.call(Z,f)})})}function K(a){var b,c;if(!a.fixed)for(b=0;b<Y.length;b+=1)D(R.start,Y[b].children[0],H,{handles:[Y[b]],handleNumber:b});if(a.tap&&D(R.start,X,I,{handles:Y}),a.hover)for(D(R.move,X,J,{hover:!0}),b=0;b<Y.length;b+=1)["mousemove MSPointerMove pointermove"].forEach(function(a){Y[b].children[0].addEventListener(a,n,!1)});a.drag&&(c=[X.querySelector("."+da[7])],j(c[0],da[10]),a.fixed&&c.push(Y[c[0]===Y[0]?1:0].children[0]),c.forEach(function(a){D(R.start,a,H,{handles:Y})}))}function L(a,b,c){var e=a!==Y[0]?1:0,f=_[0]+d.margin,h=_[1]-d.margin,i=_[0]+d.limit,l=_[1]-d.limit;return Y.length>1&&(b=e?Math.max(b,f):Math.min(b,h)),c!==!1&&d.limit&&Y.length>1&&(b=e?Math.min(b,i):Math.max(b,l)),b=aa.getStep(b),b=g(parseFloat(b.toFixed(7))),b===_[e]?!1:(window.requestAnimationFrame?window.requestAnimationFrame(function(){a.style[d.style]=b+"%"}):a.style[d.style]=b+"%",a.previousSibling||(k(a,da[17]),b>50&&j(a,da[17])),_[e]=b,ba[e]=aa.fromStepping(b),B("update",e),!0)}function M(a,b){var c,e,f;for(d.limit&&(a+=1),c=0;a>c;c+=1)e=c%2,f=b[e],null!==f&&f!==!1&&("number"==typeof f&&(f=String(f)),f=d.format.from(f),(f===!1||isNaN(f)||L(Y[e],aa.toStepping(f),c===3-d.dir)===!1)&&B("update",e))}function N(a){var b,c,e=h(a);for(d.dir&&d.handles>1&&e.reverse(),d.animate&&-1!==_[0]&&f($,da[14],300),b=Y.length>1?3:1,1===e.length&&(b=1),M(b,e),c=0;c<Y.length;c++)B("set",c)}function P(){var a,b=[];for(a=0;a<d.handles;a+=1)b[a]=d.format.to(ba[a]);return C(b)}function Q(){da.forEach(function(a){a&&k($,a)}),$.innerHTML="",delete $.noUiSlider}function T(){var a=_.map(function(a,b){var c=aa.getApplicableStep(a),d=i(String(c[2])),e=ba[b],f=100===a?null:c[2],g=Number((e-c[2]).toFixed(d)),h=0===a?null:g>=c[1]?c[2]:c[0]||!1;return[h,f]});return C(a)}function U(a,b){ca[a]=ca[a]||[],ca[a].push(b),"update"===a.split(".")[0]&&Y.forEach(function(a,b){B("update",b)})}function V(a){var b=a.split(".")[0],c=a.substring(b.length);Object.keys(ca).forEach(function(a){var d=a.split(".")[0],e=a.substring(d.length);b&&b!==d||c&&c!==e||delete ca[a]})}function W(a){var b,c=P(),e=O({start:[0,0],margin:a.margin,limit:a.limit,step:a.step,range:a.range,animate:a.animate,snap:void 0===a.snap?d.snap:a.snap});for(["margin","limit","step","range","animate"].forEach(function(b){void 0!==a[b]&&(d[b]=a[b])}),aa=e.spectrum,_=[-1,-1],N(c),b=0;b<Y.length;b++)B("update",b)}var X,Y,Z,$=b,_=[-1,-1],aa=d.spectrum,ba=[],ca={},da=["target","base","origin","handle","horizontal","vertical","background","connect","ltr","rtl","draggable","","state-drag","","state-tap","active","","stacking","tooltip","","pips","marker","value"].map(o(d.cssPrefix||S));if($.noUiSlider)throw new Error("Slider was already initialized.");return X=t(d.dir,d.ort,$),Y=s(d.handles,d.dir,X),r(d.connect,$,Y),d.pips&&z(d.pips),d.tooltips&&v(),Z={destroy:Q,steps:T,on:U,off:V,get:P,set:N,updateOptions:W},K(d.events),Z}function Q(a,b){if(!a.nodeName)throw new Error("noUiSlider.create requires a single element.");var c=O(b,a),d=P(a,c);return d.set(c.start),a.noUiSlider=d,d}var R=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},S="noUi-";z.prototype.getMargin=function(a){return 2===this.xPct.length?q(this.xVal,a):!1},z.prototype.toStepping=function(a){return a=u(this.xVal,this.xPct,a),this.direction&&(a=100-a),a},z.prototype.fromStepping=function(a){return this.direction&&(a=100-a),e(v(this.xVal,this.xPct,a))},z.prototype.getStep=function(a){return this.direction&&(a=100-a),a=w(this.xPct,this.xSteps,this.snap,a),this.direction&&(a=100-a),a},z.prototype.getApplicableStep=function(a){var b=t(a,this.xPct),c=100===a?2:1;return[this.xNumSteps[b-2],this.xVal[b-c],this.xNumSteps[b-c]]},z.prototype.convert=function(a){return this.getStep(this.toStepping(a))};var T={to:function(a){return void 0!==a&&a.toFixed(2)},from:Number};return{create:Q}});
startList=function(){if(document.all&&document.getElementById){navRoot=document.getElementById("nav");for(i=0;i<navRoot.childNodes.length;i++){node=navRoot.childNodes[i];if(node.nodeName=="LI"){node.onmouseover=function(){this.className+=" over"};node.onmouseout=function(){this.className=this.className.replace(" over","")}}}}};window.onload=startList;(function(e){"use strict";var s=function(){var s={bcClass:"sf-breadcrumb",menuClass:"sf-js-enabled",anchorClass:"sf-with-ul",menuArrowClass:"sf-arrows"},o=function(){var s=/iPhone|iPad|iPod/i.test(navigator.userAgent);return s&&e(window).load(function(){e("body").children().on("click",e.noop)}),s}(),n=function(){var e=document.documentElement.style;return"behavior"in e&&"fill"in e&&/iemobile/i.test(navigator.userAgent)}(),t=function(e,o){var n=s.menuClass;o.cssArrows&&(n+=" "+s.menuArrowClass),e.toggleClass(n)},i=function(o,n){return o.find("li."+n.pathClass).slice(0,n.pathLevels).addClass(n.hoverClass+" "+s.bcClass).filter(function(){return e(this).children(n.popUpSelector).hide().show().length}).removeClass(n.pathClass)},r=function(e){e.children("a").toggleClass(s.anchorClass)},a=function(e){var s=e.css("ms-touch-action");s="pan-y"===s?"auto":"pan-y",e.css("ms-touch-action",s)},l=function(s,t){var i="li:has("+t.popUpSelector+")";e.fn.hoverIntent&&!t.disableHI?s.hoverIntent(u,p,i):s.on("mouseenter.superfish",i,u).on("mouseleave.superfish",i,p);var r="MSPointerDown.superfish";o||(r+=" touchend.superfish"),n&&(r+=" mousedown.superfish"),s.on("focusin.superfish","li",u).on("focusout.superfish","li",p).on(r,"a",t,h)},h=function(s){var o=e(this),n=o.siblings(s.data.popUpSelector);n.length>0&&n.is(":hidden")&&(o.one("click.superfish",!1),"MSPointerDown"===s.type?o.trigger("focus"):e.proxy(u,o.parent("li"))())},u=function(){var s=e(this),o=d(s);clearTimeout(o.sfTimer),s.siblings().superfish("hide").end().superfish("show")},p=function(){var s=e(this),n=d(s);o?e.proxy(f,s,n)():(clearTimeout(n.sfTimer),n.sfTimer=setTimeout(e.proxy(f,s,n),n.delay))},f=function(s){s.retainPath=e.inArray(this[0],s.$path)>-1,this.superfish("hide"),this.parents("."+s.hoverClass).length||(s.onIdle.call(c(this)),s.$path.length&&e.proxy(u,s.$path)())},c=function(e){return e.closest("."+s.menuClass)},d=function(e){return c(e).data("sf-options")};return{hide:function(s){if(this.length){var o=this,n=d(o);if(!n)return this;var t=n.retainPath===!0?n.$path:"",i=o.find("li."+n.hoverClass).add(this).not(t).removeClass(n.hoverClass).children(n.popUpSelector),r=n.speedOut;s&&(i.show(),r=0),n.retainPath=!1,n.onBeforeHide.call(i),i.stop(!0,!0).animate(n.animationOut,r,function(){var s=e(this);n.onHide.call(s)})}return this},show:function(){var e=d(this);if(!e)return this;var s=this.addClass(e.hoverClass),o=s.children(e.popUpSelector);return e.onBeforeShow.call(o),o.stop(!0,!0).animate(e.animation,e.speed,function(){e.onShow.call(o)}),this},destroy:function(){return this.each(function(){var o,n=e(this),i=n.data("sf-options");return i?(o=n.find(i.popUpSelector).parent("li"),clearTimeout(i.sfTimer),t(n,i),r(o),a(n),n.off(".superfish").off(".hoverIntent"),o.children(i.popUpSelector).attr("style",function(e,s){return s.replace(/display[^;]+;?/g,"")}),i.$path.removeClass(i.hoverClass+" "+s.bcClass).addClass(i.pathClass),n.find("."+i.hoverClass).removeClass(i.hoverClass),i.onDestroy.call(n),n.removeData("sf-options"),void 0):!1})},init:function(o){return this.each(function(){var n=e(this);if(n.data("sf-options"))return!1;var h=e.extend({},e.fn.superfish.defaults,o),u=n.find(h.popUpSelector).parent("li");h.$path=i(n,h),n.data("sf-options",h),t(n,h),r(u),a(n),l(n,h),u.not("."+s.bcClass).superfish("hide",!0),h.onInit.call(this)})}}}();e.fn.superfish=function(o){return s[o]?s[o].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof o&&o?e.error("Method "+o+" does not exist on jQuery.fn.superfish"):s.init.apply(this,arguments)},e.fn.superfish.defaults={popUpSelector:"ul,.sf-mega",hoverClass:"sfHover",pathClass:"overrideThisToUse",pathLevels:1,delay:800,animation:{opacity:"show"},animationOut:{opacity:"hide"},speed:"normal",speedOut:"fast",cssArrows:!0,disableHI:!1,onInit:e.noop,onBeforeShow:e.noop,onShow:e.noop,onBeforeHide:e.noop,onHide:e.noop,onIdle:e.noop,onDestroy:e.noop},e.fn.extend({hideSuperfishUl:s.hide,showSuperfishUl:s.show})})(jQuery);(function(e){e.fn.hoverIntent=function(t,n,r){var i={interval:100,sensitivity:7,timeout:0};if(typeof t==="object"){i=e.extend(i,t)}else if(e.isFunction(n)){i=e.extend(i,{over:t,out:n,selector:r})}else{i=e.extend(i,{over:t,out:t,selector:n})}var s,o,u,a;var f=function(e){s=e.pageX;o=e.pageY};var l=function(t,n){n.hoverIntent_t=clearTimeout(n.hoverIntent_t);if(Math.abs(u-s)+Math.abs(a-o)<i.sensitivity){e(n).off("mousemove.hoverIntent",f);n.hoverIntent_s=1;return i.over.apply(n,[t])}else{u=s;a=o;n.hoverIntent_t=setTimeout(function(){l(t,n)},i.interval)}};var c=function(e,t){t.hoverIntent_t=clearTimeout(t.hoverIntent_t);t.hoverIntent_s=0;return i.out.apply(t,[e])};var h=function(t){var n=jQuery.extend({},t);var r=this;if(r.hoverIntent_t){r.hoverIntent_t=clearTimeout(r.hoverIntent_t)}if(t.type=="mouseenter"){u=n.pageX;a=n.pageY;e(r).on("mousemove.hoverIntent",f);if(r.hoverIntent_s!=1){r.hoverIntent_t=setTimeout(function(){l(n,r)},i.interval)}}else{e(r).off("mousemove.hoverIntent",f);if(r.hoverIntent_s==1){r.hoverIntent_t=setTimeout(function(){c(n,r)},i.timeout)}}};return this.on({"mouseenter.hoverIntent":h,"mouseleave.hoverIntent":h},i.selector)}})(jQuery);
(function(jQuery){jQuery.fn.extend({easyPie:function(options){var defaults={icon:"+",navID:"nav",navClass:"applePie",collapseClass:"pieCollapse",slideTop:true}
var options=jQuery.extend(defaults,options);return this.each(function(){var o=options;if(jQuery(window).width()>800&&p3d.display_mode!='fullscreen'){jQuery("."+o.navClass).superfish({delay:0,speed:'fast',});}
if(jQuery(window).width()<=800||p3d.display_mode=='fullscreen'){jQuery("li").find('ul').addClass(o.collapseClass);jQuery("."+o.navClass+"span").remove();jQuery(this).find("ul."+o.collapseClass).before('<span>'+o.icon+'</span>');}
jQuery(window).on('resize',function(){if(jQuery(window).width()<=800||p3d.display_mode=='fullscreen'){jQuery("#"+o.navID).css("display","none");jQuery("."+o.navClass+" li span").unbind('click').click(function(e){e.preventDefault();jQuery(this).next().slideToggle(function(){jQuery(this).parent().toggleClass("menuOpen");});if(o.slideTop==true){navigateTo(jQuery(this));return false;}
else{return false;}});jQuery("."+o.navClass).superfish('destroy');if(jQuery("."+o.navClass+" li span").length<1){jQuery("."+o.navClass+" li > ul").before("<span>"+o.icon+"</span>");}
if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){jQuery("."+o.navClass+" ul ul:first").show();}
jQuery('p3d-info ul.nav').show();}
if(jQuery(window).width()>800&&p3d.display_mode!='fullscreen'){jQuery("."+o.navClass+" ul:first").show();jQuery("."+o.navClass).superfish({delay:0,speed:'fast',});}});jQuery("."+o.navClass+" li span, .menubtn").unbind("click").click(function(e){e.preventDefault();jQuery(this).next("ul").slideToggle(function(e){jQuery(this).parent().toggleClass("menuOpen");});if(jQuery("."+o.navClass+"ul:first").is(":visible")){jQuery(".menubtn").addClass("menuOpen");}
if(jQuery("."+o.navClass+"ul:first").is(":hidden")){jQuery(".menubtn").removeClass("menuOpen");}
if(o.slideTop==true){navigateTo(jQuery(this));return false;}
else{return false;}});function navigateTo(destination){jQuery('html,body').delay(500).animate({scrollTop:jQuery(destination).offset().top-48},'fast');}});}});})(jQuery);jQuery(window).on("hashchange",function(){if(jQuery(window).width()<=800||p3d.display_mode=='fullscreen'){jQuery("nav.applePie").slideToggle();}});
(function($){$.fn.stellarNav=function(options,width,breakpoint){var $nav,$width,$breakpoint,$parentItems;nav=$(this);width=$(window).width();var settings=$.extend({theme:'plain',breakpoint:768,menuLabel:'Menu',sticky:false,position:'static',openingSpeed:250,closingDelay:250,showArrows:true,phoneBtn:'',phoneLabel:'Call Us',locationBtn:'',locationLabel:'Location',closeBtn:false,closeLabel:'Close',mobileMode:false,scrollbarFix:false},options);return this.each(function(){if(settings.theme=='light'||settings.theme=='dark'){nav.addClass(settings.theme);}
if(settings.breakpoint){breakpoint=settings.breakpoint;}
if(settings.menuLabel){menuLabel=settings.menuLabel;}else{menuLabel='';}
if(settings.phoneLabel){phoneLabel=settings.phoneLabel;}else{phoneLabel='';}
if(settings.locationLabel){locationLabel=settings.locationLabel;}else{locationLabel='';}
if(settings.closeLabel){closeLabel=settings.closeLabel;}else{closeLabel='';}
if(settings.phoneBtn&&settings.locationBtn){var cssClass='third';}else if(settings.phoneBtn||settings.locationBtn){var cssClass='half';}else{var cssClass='full';}
if(settings.position=='right'||settings.position=='left'){nav.prepend('<a href="#" class="menu-toggle"><span class="bars"><span></span><span></span><span></span></span> '+menuLabel+'</a>');}else{nav.prepend('<a href="#" class="menu-toggle '+cssClass+'"><span class="bars"><span></span><span></span><span></span></span> '+menuLabel+'</a>');}
if(settings.phoneBtn&&!(settings.position=='right'||settings.position=='left')){var btn='<a href="tel:'+settings.phoneBtn+'" class="call-btn-mobile '+cssClass+'"><svg id="icon-phone"></svg> <span>'+phoneLabel+'</span></a>';nav.find('a.menu-toggle').after(btn);}
if(settings.locationBtn&&!(settings.position=='right'||settings.position=='left')){var btn='<a href="'+settings.locationBtn+'" class="location-btn-mobile '+cssClass+'" target="_blank"><svg id="icon-location"></svg> <span>'+locationLabel+'</span></a>';nav.find('a.menu-toggle').after(btn);}
if(settings.sticky){navPos=nav.offset().top;if(width>=breakpoint){$(window).on('scroll',function(){if($(window).scrollTop()>navPos){nav.addClass('fixed');}
else{nav.removeClass('fixed');}});}}
if(settings.position=='top'){nav.addClass('top');}
if(settings.position=='left'||settings.position=='right'){var closeBtn='<a href="#" class="close-menu '+cssClass+'"><span class="icon-close"></span>'+closeLabel+'</a>';var phoneBtn='<a href="tel:'+settings.phoneBtn+'" class="call-btn-mobile '+cssClass+'"><svg id="icon-phone"></svg></a>';var locationBtn='<a href="'+settings.locationBtn+'" class="location-btn-mobile '+cssClass+'" target="_blank"><svg id="icon-location"></svg></i></a>';nav.find('ul:first').prepend(closeBtn);if(settings.locationBtn){nav.find('ul:first').prepend(locationBtn);}
if(settings.phoneBtn){nav.find('ul:first').prepend(phoneBtn);}}
if(settings.position=='right'){nav.addClass('right');}
if(settings.position=='left'){nav.addClass('left');}
if(!settings.showArrows){nav.addClass('hide-arrows');}
if(settings.closeBtn&&!(settings.position=='right'||settings.position=='left')){nav.find('ul:first').append('<li><a href="#" class="close-menu"><span class="icon-close"></span> '+closeLabel+'</a></li>');}
if(settings.scrollbarFix){$('body').addClass('stellarnav-noscroll-x');}
var phoneIcon=document.getElementById('icon-phone');if(phoneIcon){phoneIcon.setAttribute('viewBox','0 0 480 480');var newPhoneIcon=document.createElementNS("http://www.w3.org/2000/svg",'path');newPhoneIcon.setAttribute('d','M340.273,275.083l-53.755-53.761c-10.707-10.664-28.438-10.34-39.518,0.744l-27.082,27.076 c-1.711-0.943-3.482-1.928-5.344-2.973c-17.102-9.476-40.509-22.464-65.14-47.113c-24.704-24.701-37.704-48.144-47.209-65.257     c-1.003-1.813-1.964-3.561-2.913-5.221l18.176-18.149l8.936-8.947c11.097-11.1,11.403-28.826,0.721-39.521L73.39,8.194 C62.708-2.486,44.969-2.162,33.872,8.938l-15.15,15.237l0.414,0.411c-5.08,6.482-9.325,13.958-12.484,22.02     C3.74,54.28,1.927,61.603,1.098,68.941C-6,127.785,20.89,181.564,93.866,254.541c100.875,100.868,182.167,93.248,185.674,92.876 c7.638-0.913,14.958-2.738,22.397-5.627c7.992-3.122,15.463-7.361,21.941-12.43l0.331,0.294l15.348-15.029     C350.631,303.527,350.95,285.795,340.273,275.083z');phoneIcon.appendChild(newPhoneIcon);}
var locationIcon=document.getElementById('icon-location');if(locationIcon){locationIcon.setAttribute('viewBox','0 0 480 480');var newLocationIcon=document.createElementNS("http://www.w3.org/2000/svg",'path');newLocationIcon.setAttribute('d','M322.621,42.825C294.073,14.272,259.619,0,219.268,0c-40.353,0-74.803,14.275-103.353,42.825 c-28.549,28.549-42.825,63-42.825,103.353c0,20.749,3.14,37.782,9.419,51.106l104.21,220.986   c2.856,6.276,7.283,11.225,13.278,14.838c5.996,3.617,12.419,5.428,19.273,5.428c6.852,0,13.278-1.811,19.273-5.428 c5.996-3.613,10.513-8.562,13.559-14.838l103.918-220.986c6.282-13.324,9.424-30.358,9.424-51.106 C365.449,105.825,351.176,71.378,322.621,42.825z M270.942,197.855c-14.273,14.272-31.497,21.411-51.674,21.411 s-37.401-7.139-51.678-21.411c-14.275-14.277-21.414-31.501-21.414-51.678c0-20.175,7.139-37.402,21.414-51.675 c14.277-14.275,31.504-21.414,51.678-21.414c20.177,0,37.401,7.139,51.674,21.414c14.274,14.272,21.413,31.5,21.413,51.675 C292.355,166.352,285.217,183.575,270.942,197.855z');locationIcon.appendChild(newLocationIcon);}
$('.menu-toggle, .stellarnav-open').on('click',function(e){e.preventDefault();if(settings.position=='left'||settings.position=='right'){nav.find('ul:first').stop(true,true).fadeToggle(settings.openingSpeed);nav.toggleClass('active');if(nav.hasClass('active')&&nav.hasClass('mobile')){$(document).on('click',function(event){if(nav.hasClass('mobile')){if(!$(event.target).closest(nav).length){nav.find('ul:first').stop(true,true).fadeOut(settings.openingSpeed);nav.removeClass('active');}}});}}else{nav.find('ul:first').stop(true,true).slideToggle(settings.openingSpeed);nav.toggleClass('active');}});$('.close-menu, .stellarnav-close').on('click',function(){nav.removeClass('active');if(settings.position=='left'||settings.position=='right'){nav.find('ul:first').stop(true,true).fadeToggle(settings.openingSpeed);}else{nav.find('ul:first').stop(true,true).slideUp(settings.openingSpeed).toggleClass('active');}});nav.find('li a').each(function(){if($(this).next().length>0){$(this).parent('li').addClass('has-sub').append('<a class="dd-toggle" href="#"><span class="icon-plus"></span></a>');}});nav.find('li .dd-title, li .dd-toggle').on('click',function(e){e.preventDefault();$(this).parent('li').children('ul').stop(true,true).slideToggle(settings.openingSpeed);$(this).parent('li').toggleClass('open');});var resetTriggers=function(){nav.find('li').off('mouseenter');nav.find('li').off('mouseleave');}
parentItems=nav.find('> ul > li');var setTriggers=function(){$(parentItems).each(function(){if($(this).hasClass('mega')){$(this).on('mouseenter',function(){$(this).find('ul').first().stop(true,true).slideDown(settings.openingSpeed);});$(this).on('mouseleave',function(){$(this).find('ul').first().stop(true,true).slideUp(settings.openingSpeed);});}else{$(this).on('mouseenter',function(){$(this).children('ul').stop(true,true).slideDown(settings.openingSpeed);});$(this).on('mouseleave',function(){$(this).children('ul').stop(true,true).delay(settings.closingDelay).slideUp(settings.openingSpeed);});$(this).find('li.has-sub').on('mouseenter',function(){$(this).children('ul').stop(true,true).slideDown(settings.openingSpeed);});$(this).find('li.has-sub').on('mouseleave',function(){$(this).children('ul').stop(true,true).delay(settings.closingDelay).slideUp(settings.openingSpeed);});}});}
windowCheck();function windowCheck(){var browserWidth=window.innerWidth;if(browserWidth<=breakpoint||settings.mobileMode){resetTriggers();nav.addClass('mobile');nav.removeClass('desktop');if(!nav.hasClass('active')&&nav.find('ul:first').is(':visible')){nav.find('ul:first').hide();}
nav.find('li.mega').each(function(){$(this).find('ul').first().removeAttr('style');$(this).find('ul').first().children().removeAttr('style');});}else{nav.addClass('desktop');nav.removeClass('mobile');if(nav.hasClass('active')){nav.removeClass('active');}
if(!nav.hasClass('active')&&nav.find('ul:first').is(':hidden')){nav.find('ul:first').show();}
$('li.open').removeClass('open').find('ul:visible').hide();resetTriggers();setTriggers();navWidth=0;$(parentItems).each(function(){navWidth+=$(this)[0].getBoundingClientRect().width;navWidth=Math.round(navWidth);if($(this).hasClass('mega')){$(this).find('ul').first().css({'left':0,'right':0,'margin':'0px auto'});numCols=$(this).attr('data-columns');if(numCols==2){$(this).find('li.has-sub').width('50%');}else if(numCols==3){$(this).find('ul').first().children().width('33.33%');}else if(numCols==4){$(this).find('ul').first().children().width('25%');}else if(numCols==5){$(this).find('ul').first().children().width('20%');}else if(numCols==6){$(this).find('ul').first().children().width('16.66%');}else if(numCols==7){$(this).find('ul').first().children().width('14.28%');}else if(numCols==8){$(this).find('ul').first().children().width('12.5%');}else{$(this).find('ul').first().children().width('25%');}}});if(parentItems.hasClass('mega')){nav.find('li.mega > ul').css({'max-width':navWidth});}}}
$(window).on('resize',function(){windowCheck();});});}}(jQuery));
/*!
 * jQuery Cookie Plugin v1.4.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2013 Klaus Hartl
 * Released under the MIT license
 */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?e(require("jquery")):e(jQuery)}(function(a){var o=/\+/g;function s(e){return x.raw?e:encodeURIComponent(e)}function m(e,n){e=x.raw?e:function(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(o," ")),x.json?JSON.parse(e):e}catch(n){}}(e);return"function"==typeof n?n(e):e}var x=a.cookie=function(e,n,o){var i,t;if(n!==undefined&&"function"!=typeof n)return"number"==typeof(o=a.extend({},x.defaults,o)).expires&&(i=o.expires,(t=o.expires=new Date).setTime(+t+864e5*i)),document.cookie=[s(e),"=",(t=n,s(x.json?JSON.stringify(t):String(t))),o.expires?"; expires="+o.expires.toUTCString():"",o.path?"; path="+o.path:"",o.domain?"; domain="+o.domain:"",o.secure?"; secure":""].join("");for(var r=e?undefined:{},c=document.cookie?document.cookie.split("; "):[],u=0,f=c.length;u<f;u++){var d=c[u].split("="),p=(p=d.shift(),x.raw?p:decodeURIComponent(p)),d=d.join("=");if(e&&e===p){r=m(d,n);break}e||(d=m(d))===undefined||(r[p]=d)}return r};x.defaults={},a.removeCookie=function(e,n){return a.cookie(e)!==undefined&&(a.cookie(e,"",a.extend({},n,{expires:-1})),!a.cookie(e))}});
p3d.bar_progress=0;p3d.xhr1='';p3d.xhr2='';p3d.xhr3='';p3d.filename='';p3d.filereader_supported=true;p3d.file_selected=0;p3d.aabb=new Array();p3d.resize_scale=1;p3d.resize_scale_x=1;p3d.resize_scale_y=1;p3d.resize_scale_z=1;p3d.initial_rotation_x=0;p3d.initial_rotation_y=0;p3d.initial_rotation_z=0;p3d.default_scale=100;p3d.cookie_expire=parseInt(p3d.cookie_expire);p3d.refresh_interval="";p3d.refresh_interval1="";p3d.refresh_interval1_running=false;p3d.refresh_interval_repair="";p3d.uploading=false;p3d.repairing=false;p3d.processing=false;p3d.checking=false;p3d.analyse_requested=false;p3d.analyse_error=false;p3d.model_total_volume=0;p3d.model_surface_area=0;p3d.analysed_volume=0;p3d.analysed_support_volume=0;p3d.support_charges=0;p3d.analysed_surface_area=0;p3d.triangulation_required=false;p3d.triangulated_volume=0;p3d.triangulated_surface_area=0;p3d.is_fullscreen=0;p3d.bed_support_height=8;p3d.image_height=5;p3d.image_map=1;p3d.boundingBox=[];p3d.fatal_error=false;p3d.printer_error=false;p3d.packed=0;p3d.new_pricing='';p3d.print_time=0;p3d.scale_independently=0;p3d.bxsliders=[];p3d.object=[];p3d.font=[];p3d.cut_path=0;p3d.cutting_instructions_default='';p3d.dxf_unsupported_entity=false;p3d.dxf_color_codes=[0,16711680,16776960,65280,65535,255,16711935,16777215,8421504,12632256,16711680,16744319,13369344,13395558,10027008,10046540,8323072,8339263,4980736,4990502,16727808,16752511,13382400,13401958,10036736,10051404,8331008,8343359,4985600,4992806,16744192,16760703,13395456,13408614,10046464,10056268,8339200,8347455,4990464,4995366,16760576,16768895,13408512,13415014,10056192,10061132,8347392,8351551,4995328,4997670,16776960,16777087,13421568,13421670,10000384,10000460,8355584,8355647,5000192,5000230,12582656,14679935,10079232,11717734,7510016,8755276,6258432,7307071,3755008,4344870,8388352,12582783,6736896,10079334,5019648,7510092,4161280,6258495,2509824,3755046,4194048,10485631,3394560,8375398,2529280,6264908,2064128,5209919,1264640,3099686,65280,8388479,52224,6736998,38912,5019724,32512,4161343,19456,2509862,65343,8388511,52275,6737023,38950,5019743,32543,4161359,19475,2509871,65407,8388543,52326,6737049,38988,5019762,32575,4161375,19494,2509881,65471,8388575,52377,6737074,39026,5019781,32607,4161391,19513,2509890,65535,8388607,52428,6737100,39064,5019800,32639,4161407,19532,2509900,49151,8380415,39372,6730444,29336,5014936,24447,4157311,14668,2507340,32767,8372223,26316,6724044,19608,5010072,16255,4153215,9804,2505036,16383,8364031,13260,6717388,9880,5005208,8063,4149119,4940,2502476,255,8355839,204,6710988,152,5000344,127,4145023,76,2500172,4129023,10452991,3342540,8349388,2490520,6245528,2031743,5193599,1245260,3089996,8323327,12550143,6684876,10053324,4980888,7490712,4128895,6242175,2490444,3745356,12517631,14647295,10027212,11691724,7471256,8735896,6226047,7290751,3735628,4335180,16711935,16744447,13369548,13395660,9961624,9981080,8323199,8339327,4980812,4990540,16711871,16744415,13369497,13395634,9961586,9981061,8323167,8339311,4980793,4990530,16711807,16744383,13369446,13395609,9961548,9981042,8323135,8339295,4980774,4990521,16711743,16744351,13369395,13395583,9961510,9981023,8323103,8339279,4980755,4990511,3355443,5987163,8684676,11382189,14079702,16777215];p3d.render_required=false;p3d.font_size=25;p3d.tab_id=sessionStorage.tabID?sessionStorage.tabID:sessionStorage.tabID=Math.random();function p3dInit(){p3d.product_id=jQuery('#p3d_product_id').val();if(jQuery('#p3d_product_pricing').val())
p3d.pricing=jQuery('#p3d_product_pricing').val();if(jQuery('#p3d_product_file_extensions').val())
p3d.file_extensions=jQuery('#p3d_product_file_extensions').val();p3d.upload_url=jQuery('#p3d_upload_url').val();p3d.upload_url_default=jQuery('#p3d_upload_url_default').val();p3d.product_price_type=jQuery('#p3d_product_price_type').val();p3d.product_display_mode=jQuery('#p3d_product_display_mode').val();if(jQuery('#p3d_product_show_printers').val()=='yes'){p3d.show_printers='on';}
else if(jQuery('#p3d_product_show_printers').val()=='no'){p3d.show_printers='0';}
if(jQuery('#p3d_product_show_materials').val()=='yes'){p3d.show_materials='on';}
else if(jQuery('#p3d_product_show_materials').val()=='no'){p3d.show_materials='0';}
if(jQuery('#p3d_product_show_coatings').val()=='yes'){p3d.show_coatings='on';}
else if(jQuery('#p3d_product_show_coatings').val()=='no'){p3d.show_coatings='0';}
if(jQuery('#p3d_product_show_infills').val()=='yes'){p3d.show_infills='on';}
else if(jQuery('#p3d_product_show_infills').val()=='no'){p3d.show_infills='0';}
if(jQuery('#p3d_product_analyse_api').val()=='yes'){p3d.api_analyse='on';}
else if(jQuery('#p3d_product_analyse_api').val()=='no'){p3d.api_analyse='0';}
p3d.file_url=jQuery('#p3d_file_url').val();p3d.min_price=jQuery('#p3d_min_price').val();p3d.currency_rate=jQuery('#p3d_currency_rate').val();jQuery('#rotation_x, #rotation_y, #rotation_z').val('0');if(p3d.product_display_mode.length>0){p3d.display_mode=p3d.product_display_mode;}
if(p3d.display_mode=='fullscreen'){jQuery('body').append('<div id="p3d-fullscreen"></div>');}
p3dBindSubmit();setInterval(function(){jQuery('.single_add_to_cart_button').removeClass('disabled');},200);jQuery('p.price span.amount').html('&nbsp;');jQuery('p.support_price span.amount').html('&nbsp;');window.p3d_canvas=document.getElementById('p3d-cv');p3dCanvasDetails();var logoTimerID=0;p3d.targetRotation=0;p3d.targetRotationOnMouseDown=0;p3d.mouseX=0;p3d.mouseXOnMouseDown=0;p3d.windowHalfX=window.innerWidth/2;p3d.windowHalfY=window.innerHeight/2;if(jQuery('input[name=get_printer_id]').val()){printer=jQuery('input[name=get_printer_id]').val()
jQuery.cookie('p3d_printer',printer,{expires:parseInt(p3d.cookie_expire)});}
else if(jQuery.cookie('p3d_printer')!='undefined'&&jQuery('#p3d_printer_'+jQuery.cookie('p3d_printer')).length>0){printer=jQuery.cookie('p3d_printer');}
else{printer=jQuery('input[name=product_printer]').data('id');}
if(jQuery('input[name=get_material_id]').val()){material=jQuery('input[name=get_material_id]').val()
jQuery.cookie('p3d_material',material,{expires:parseInt(p3d.cookie_expire)});}
else if(jQuery.cookie('p3d_material')!='undefined'&&jQuery('#p3d_material_'+jQuery.cookie('p3d_material')).length>0){material=jQuery.cookie('p3d_material');}
else{material=jQuery('input[name=product_filament]').data('id');}
if(jQuery('input[name=get_coating_id]').val()){coating=jQuery('input[name=get_coating_id]').val()
jQuery.cookie('p3d_coating',coating,{expires:parseInt(p3d.cookie_expire)});}
else if(jQuery.cookie('p3d_coating')!='undefined'&&jQuery('#p3d_coating_'+jQuery.cookie('p3d_coating')).length>0){coating=jQuery.cookie('p3d_coating');}
else{coating=jQuery('input[name=product_coating]').data('id');}
if(jQuery('input[name=get_infill]').val()){infill=jQuery('input[name=get_infill]').val()
jQuery.cookie('p3d_infill',infill,{expires:parseInt(p3d.cookie_expire)});}
else if(jQuery.cookie('p3d_infill')!='undefined'){infill=jQuery.cookie('p3d_infill');}
else{infill=jQuery('input[name=product_infill]').val();}
if(jQuery('input[name=get_postprocessing]').val()){postprocessing=jQuery('input[name=get_postprocessing]').val()
jQuery.cookie('p3d_postprocessing',postprocessing,{expires:parseInt(p3d.cookie_expire)});}
else if(jQuery.cookie('p3d_postprocessing')!='undefined'){postprocessing=jQuery.cookie('p3d_postprocessing');}
if(jQuery('input[name=get_cutting_instructions]').val()){p3d.cutting_instructions_default=jQuery('input[name=get_cutting_instructions]').val()
jQuery.cookie('p3d_cutting_instructions',p3d.cutting_instructions_default,{expires:parseInt(p3d.cookie_expire)});}
else if(jQuery.cookie('p3d_cutting_instructions')!='undefined'){p3d.cutting_instructions_default=jQuery.cookie('p3d_cutting_instructions');}
if(jQuery('input[name=get_filename]').val()){original_filename=jQuery('input[name=get_filename]').val()
jQuery.cookie('p3d_filename',original_filename,{expires:parseInt(p3d.cookie_expire)});}
else if(jQuery.cookie('p3d_filename')!='undefined'){original_filename=jQuery.cookie('p3d_filename');}
if(p3d.file_url){product_file=p3d.file_url.split('/').reverse()[0];}
else if(jQuery('input[name=get_product_model]').val()){product_file=jQuery('input[name=get_product_model]').val();jQuery.cookie('p3d_file',product_file,{expires:parseInt(p3d.cookie_expire)});}
else{product_file=jQuery.cookie('p3d_file');}
p3d.filename=product_file;if(typeof(jQuery.cookie('p3d_mtl'))!='undefined'){product_mtl=jQuery.cookie('p3d_mtl');}
else if(jQuery('#p3d_mtl').val()!=''){product_mtl=jQuery('#p3d_mtl').val();}
else{product_mtl='';}
if(jQuery('input[name=get_product_unit]').val()){product_unit=jQuery('input[name=get_product_unit]').val();jQuery.cookie('p3d_unit',product_unit,{expires:parseInt(p3d.cookie_expire)});}
else if(p3d.default_unit.length){product_unit=p3d.default_unit;}
else if(jQuery.cookie('p3d_unit')!='undefined'){product_unit=jQuery.cookie('p3d_unit');}
else{product_unit='mm';}
p3dSelectDefaults();if(typeof(printer)!='undefined'&&typeof(material)!='undefined'&&typeof(product_file)!='undefined'){p3dGetStats();}
else{p3dDisplayUserDefinedProgressBar(false);p3dDisplayQuoteLoading(false);}
if(typeof(product_file)!='undefined'&&product_file){var model_type=product_file.split('.').pop().toLowerCase();if(typeof(original_filename)!='undefined'){jQuery('#p3d-canvas-filename').html(original_filename).show();}
if(model_type=='dxf'){p3d.render_required='on';p3dRepairModel(product_file);jQuery.ajax({url:p3d.upload_url+encodeURIComponent(product_file),success:function(result){p3dRepairModel();p3dViewerInit2D(result);},fail:function(){alert(p3d.text_file_does_not_exist);}});}
p3dViewerInit(p3d.upload_url+encodeURIComponent(product_file),product_mtl,model_type,false);}
else{p3dViewerInit('');}}
function p3dSelectDefaults(){if(typeof(infill)!='undefined'){p3dSelectInfill(jQuery('#infill-info input[value="'+infill+'"]').data('id'));}
if(typeof(original_filename)!='undefined'){jQuery('#pa_p3d_filename').val(original_filename);}
else{jQuery('#pa_p3d_filename').val('model.stl');}
if(typeof(printer)!='undefined'){p3dSelectPrinter(printer);}
else{jQuery('input[name=product_printer]').first().prop('checked',true)
jQuery('input[name=product_printer]').first().attr('checked','checked')
p3dSelectPrinter(jQuery('input[name=product_printer]').first().data('id')||jQuery('select[name=product_printer]').val());}
if(typeof(material)!='undefined'){p3dSelectFilament(material);}
else{p3dSelectFilament(jQuery('input[name=product_filament]').first().data('id')||jQuery('select[name=product_filament]').val());}
if(typeof(coating)!='undefined'){p3dSelectCoating(coating);}
else if(jQuery('input[name=product_coating]').length>0){p3dSelectCoating(jQuery('input[name=product_coating]').first().data('id')||jQuery('select[name=product_coating]').val());}
if(typeof(postprocessing)!='undefined'&&postprocessing.length>0){if(jQuery('#product_postprocessing_select2').length==0){postprocessing.split(',').forEach(function(postprocessing_id){p3dSelectPostprocessing(postprocessing_id);})}
else{p3dSelectPostprocessing(postprocessing.split(','));}}
if(typeof(product_file)!='undefined'){jQuery('#pa_p3d_model').val(product_file);}
if(typeof(product_unit)!='undefined'){p3dSelectUnit(product_unit);}
else{p3dSelectUnit('mm');}}
function p3dMaterialDropdown(state){if(!state.id){return state.text;}
var color=jQuery('#p3d_material_'+state.id).data('color');var tooltip_content_id=jQuery('#p3d_material_'+state.id).data('tooltip-content');var tooltip_content_description=jQuery(tooltip_content_id).find('.p3d-tooltip-description').html();var tooltip_content_photo=jQuery(tooltip_content_id).find('.p3d-tooltip-image').html();var tooltip_image_block='';if(typeof(tooltip_content_description)=='undefined'){tooltip_content_description='';}
if(typeof(tooltip_content_photo)!=='undefined'&&tooltip_content_photo.length>0){tooltip_image_block='<div class="p3d-dropdown-photo-sample">'+tooltip_content_photo+'</div>';}
var res=jQuery('<div class="p3d-dropdown-searchable-wrap"><div style="background-color:'+color+';" class="p3d-color-sample"></div>'+tooltip_image_block+'<span>'+state.text+'</span><p class="p3d-dropdown-searchable-p"><small>'+tooltip_content_description+'</small></p></div>')
return res;}
function p3dPrinterDropdown(state){if(!state.id){return state.text;}
var tooltip_content_id=jQuery('#p3d_printer_'+state.id).data('tooltip-content');var tooltip_content_description=jQuery(tooltip_content_id).find('.p3d-tooltip-description').html();var tooltip_content_photo=jQuery(tooltip_content_id).find('.p3d-tooltip-image').html();var tooltip_image_block='';if(typeof(tooltip_content_description)=='undefined'){tooltip_content_description='';}
if(typeof(tooltip_content_photo)!=='undefined'&&tooltip_content_photo.length>0){tooltip_image_block='<div class="p3d-dropdown-photo-sample">'+tooltip_content_photo+'</div>';}
var res=jQuery('<div class="p3d-dropdown-searchable-wrap">'+tooltip_image_block+'<span>'+state.text+'</span><p class="p3d-dropdown-searchable-p"><small>'+tooltip_content_description+'</small></p></div>')
return res;}
function p3dCoatingDropdown(state){if(!state.id){return state.text;}
var color=jQuery('#p3d_coating_'+state.id).data('color');var tooltip_content_id=jQuery('#p3d_coating_'+state.id).data('tooltip-content');var tooltip_content_description=jQuery(tooltip_content_id).find('.p3d-tooltip-description').html();var tooltip_content_photo=jQuery(tooltip_content_id).find('.p3d-tooltip-image').html();var tooltip_image_block='';if(typeof(tooltip_content_description)=='undefined'){tooltip_content_description='';}
if(typeof(tooltip_content_photo)!=='undefined'&&tooltip_content_photo.length>0){tooltip_image_block='<div class="p3d-dropdown-photo-sample">'+tooltip_content_photo+'</div>';}
var res=jQuery('<div class="p3d-dropdown-searchable-wrap"><div style="background-color:'+color+';" class="p3d-color-sample"></div>'+tooltip_image_block+'<span>'+state.text+'</span><p class="p3d-dropdown-searchable-p"><small>'+tooltip_content_description+'</small></p></div>')
return res;}
function p3dInfillDropdown(state){if(!state.id){return state.text;}
var tooltip_content_id=jQuery('#p3d_infill_'+state.id).data('tooltip-content');var tooltip_content_description=jQuery(tooltip_content_id).find('.p3d-tooltip-description').html();var tooltip_content_photo=jQuery(tooltip_content_id).find('.p3d-tooltip-image').html();var tooltip_image_block='';if(typeof(tooltip_content_description)=='undefined'){tooltip_content_description='';}
if(typeof(tooltip_content_photo)!=='undefined'&&tooltip_content_photo.length>0){tooltip_image_block='<div class="p3d-dropdown-photo-sample">'+tooltip_content_photo+'</div>';}
var res=jQuery('<div class="p3d-dropdown-searchable-wrap">'+tooltip_image_block+'<span>'+state.text+'</span><p class="p3d-dropdown-searchable-p"><small>'+tooltip_content_description+'</small></p></div>')
return res;}
function p3dPostprocessingDropdown(state){if(!state.id){return state.text;}
var color=jQuery('#p3d_postprocessing_'+state.id).data('color');var tooltip_content_id=jQuery('#p3d_postprocessing_'+state.id).data('tooltip-content');var tooltip_content_description=jQuery(tooltip_content_id).find('.p3d-tooltip-description').html();var tooltip_content_photo=jQuery(tooltip_content_id).find('.p3d-tooltip-image').html();var tooltip_image_block='';if(typeof(tooltip_content_description)=='undefined'){tooltip_content_description='';}
if(typeof(tooltip_content_photo)!=='undefined'&&tooltip_content_photo.length>0){tooltip_image_block='<div class="p3d-dropdown-photo-sample">'+tooltip_content_photo+'</div>';}
var res=jQuery(tooltip_image_block+'<span>'+state.text+'</span><p class="p3d-dropdown-searchable-p"><small>'+tooltip_content_description+'</small></p>')
return res;}
function p3dInitSelect2(){if(p3d.display_mode=='fullscreen'&&p3d.is_fullscreen==0)return;if(jQuery('.p3d-dropdown-searchable').length>0){if(p3d.show_materials=='on')jQuery('select.p3d-dropdown-searchable[name="product_filament"]').select2({templateResult:p3dMaterialDropdown});if(p3d.show_printers=='on')jQuery('select.p3d-dropdown-searchable[name="product_printer"]').select2({templateResult:p3dPrinterDropdown});if(p3d.show_coatings=='on')jQuery('select.p3d-dropdown-searchable[name="product_coating"]').select2({templateResult:p3dCoatingDropdown});if(p3d.show_infills=='on')jQuery('select.p3d-dropdown-searchable[name="product_infill"]').select2({templateResult:p3dInfillDropdown});if(p3d.show_postprocessings=='on'){jQuery('select.p3d-dropdown-searchable[name="product_postprocessing"]').select2({templateResult:p3dPostprocessingDropdown,closeOnSelect:false,allowClear:true,allowHtml:true,dropdownParent:jQuery('.p3d-postprocessing')});}}}
function p3dInitStellarNav(){jQuery('#p3d-stellarnav-printer').stellarNav({theme:'light',position:'static',mobileMode:true});jQuery('#p3d-stellarnav-printer .menu-toggle').click().hide();jQuery('#p3d-stellarnav-material').stellarNav({theme:'light',position:'static',mobileMode:true});jQuery('#p3d-stellarnav-material .menu-toggle').click().hide();jQuery('#p3d-stellarnav-coating').stellarNav({theme:'light',position:'static',mobileMode:true});jQuery('#p3d-stellarnav-coating .menu-toggle').click().hide();jQuery('#infill-info.stellarnav').stellarNav({theme:'light',position:'static',mobileMode:true});jQuery('#infill-info.stellarnav .menu-toggle').click().hide();}
jQuery(document).ready(function(){if(!document.getElementById('p3d-cv'))return;if(!document.getElementById('p3d-container'))return;if(typeof(p3d_multiple_threejs)!='undefined'&&p3d_multiple_threejs){console.error(p3d.text_multiple_threejs);}
jQuery('#stats-material-volume-loading, #stats-support-material-volume-loading, #stats-material-weight-loading, #stats-hours-loading, #stats-total-path-loading, #stats-model-dimensions-loading, #p3d-scale-dimensions-loading').hide();jQuery('.p3d-tooltip-image img').each(function(){jQuery('<img/>')[0].src=this.src;});p3d.analyse_ajax_interval=setInterval(function(){p3dAnalyseModelAJAX();},3000);if(p3d.adjust_position=='on'){if(jQuery('div.p3d-images').length){jQuery('div.p3d-images').sticky2('div.p3d-wrapper');}
else{jQuery('div.images').sticky2('div.product');}}
p3dInitSelect2();if(p3d.display_mode!='fullscreen'){p3dInitStellarNav();}
if(p3d.multistep=='on'){if(p3d.multistep_short_description=='on'){jQuery("div.woocommerce-product-details__short-description").appendTo("#p3d-finalize");}
jQuery("p.price").appendTo("#p3d-finalize");jQuery("p.support_price").appendTo("#p3d-finalize");jQuery("#p3d-before-cart").appendTo("#p3d-finalize");jQuery("#p3d-quote-loading").appendTo("#p3d-finalize");jQuery("#add-cart-wrapper").appendTo("#p3d-finalize");jQuery("table.variations").appendTo("#p3d-finalize");var new_request_form=jQuery("#p3d-request-form").wrap('<p/>').parent().clone();jQuery("#p3d-request-form").remove();jQuery("#p3d-finalize").append(new_request_form.html());window.wp.event_manager.doAction('3dprint.multistepOrder');}
jQuery("#rotation_x").bind('keyup mouseup',function(){p3dRotateModel('x',this.value);});jQuery("#rotation_y").bind('keyup mouseup',function(){p3dRotateModel('y',this.value);});jQuery("#rotation_z").bind('keyup mouseup',function(){p3dRotateModel('z',this.value);});if(p3d.scale_keyup=='on'){jQuery("#scale_x").bind('keyup mouseup',function(){p3dUpdateDimensions(this);});jQuery("#scale_y").bind('keyup mouseup',function(){p3dUpdateDimensions(this);});jQuery("#scale_z").bind('keyup mouseup',function(){p3dUpdateDimensions(this);});}
p3dInit();var is_fixed=jQuery('#p3d-viewer').data('fixed');var drop_element='p3d-viewer';if(is_fixed==1)drop_element='';window.p3d_uploader=new plupload.Uploader({runtimes:'html5,flash,silverlight,browserplus,gears,html4',browse_button:'p3d-pickfiles',dragdrop:true,drop_element:drop_element,multi_selection:false,multiple_queues:false,max_file_count:1,max_file_size:p3d.file_max_size+"mb",container:document.getElementById('p3d-container'),url:p3d.url,chunk_size:p3d.file_chunk_size+'mb',flash_swf_url:p3d.plugin_url+'includes/ext/plupload/Moxie.swf',silverlight_xap_url:p3d.plugin_url+'includes/ext/plupload/Moxie.xap',filters:{mime_types:[{title:p3d.file_extensions+" files",extensions:p3d.file_extensions}]},init:{QueueChanged:function(p3d_uploader){if(p3d_uploader.files.length>1)
{jQuery('#p3d-filelist').html('');jQuery('#p3d-canvas-uploading-status').hide();p3d_uploader.files.splice(0,1);}},PostInit:function(){document.getElementById('p3d-filelist').innerHTML='';document.getElementById('p3d-console').innerHTML='';jQuery('#p3d-canvas-uploading-status').hide();if((navigator.platform.indexOf("iPhone")==-1)&&(navigator.platform.indexOf("iPad")==-1)){jQuery('#p3d-container input[type=file]').prop('accept',p3d.file_extensions.split(',').map(i=>'.'+i).join(','));}},Browse:function(){},FilesAdded:function(up,files){p3d.bar_progress=0;p3d.analysed_volume=0;p3d.analysed_support_volume=0;p3d.support_volume=0;p3d.analysed_surface_area=0;p3d.triangulation_required=false;p3d.triangulated_volume=0;p3d.triangulated_surface_area=0;p3d.new_pricing='';p3d.fatal_error=false;p3d.printer_error=false;p3d.mtl='';p3d.dxf_unsupported_entity=false;p3d.cutting_instructions_default='';if(p3d.multistep=='on'&&p3d.multistep_model_step1=='on'){jQuery('#p3d-multistep div[data-acc-step]').removeClass('open');jQuery('#p3d-multistep div[data-acc-step]:first').addClass('open')
jQuery('#p3d-multistep div[data-acc-content]').hide();jQuery('#p3d-multistep div[data-acc-content]:first').show();}
if(p3d.xhr1&&p3d.xhr1.readyState!=4){p3d.xhr1.abort();p3d.xhr1.readyState=4;}
if(p3d.xhr2&&p3d.xhr2.readyState!=4){p3d.xhr2.abort();p3d.xhr2.readyState=4;}
if(p3d.xhr3&&p3d.xhr3.readyState!=4){p3d.xhr3.abort();p3d.xhr3.readyState=4;}
if(p3d.xhr4&&p3d.xhr4.readyState!=4){p3d.xhr4.abort();p3d.xhr4.readyState=4;}
if(p3d.process&&p3d.process.readyState!=4){p3d.process.abort();}
jQuery.removeCookie("p3d_mtl");jQuery('.p3d-mail-success').hide();jQuery('.p3d-mail-error').hide();jQuery('#p3d-repair-status, #p3d-canvas-repair-status').hide();jQuery('#p3d-process-status, #p3d-canvas-process-status').hide();jQuery('#p3d-analyse-status, #p3d-canvas-analyse-status').hide();jQuery('#stats-material-volume-loading, #stats-support-material-volume-loading, #stats-material-weight-loading, #stats-hours-loading, #stats-total-path-loading').hide();if(p3d.show_upload_button=='on'&&p3d.display_mode!='fullscreen'){jQuery('#p3d-model-message-upload').hide();}
var file=files[0].getNative();var file_ext=file.name.split('.').pop().toLowerCase();var images=['png','jpg','jpeg','gif','bmp'];p3d.filename=file.name;if(file_ext=='dxf'||file_ext=='svg'||file_ext=='eps'||file_ext=='pdf'){p3d.render_required='on';jQuery('#p3d_rendered_image').remove();var printer_type=jQuery('input[name=product_printer]:checked').data('type');if(printer_type!='laser_cutting'){alert(p3d.text_select_laser_cutting);return;}}
jQuery('#pa_p3d_filename').val(file.name);jQuery('#p3d-canvas-filename').html(file.name).show();jQuery.cookie('p3d_filename',file.name,{expires:parseInt(p3d.cookie_expire)});if(jQuery.inArray(file_ext,images)!=-1){p3d.image_height=prompt(p3d.text_image_height,p3d.image_height);p3d.image_map=confirm(p3d.text_image_map)?1:0;}
window.wp.event_manager.doAction('3dprint.filesAdded');if(p3d.filereader_supported){if(jQuery.inArray(file_ext,p3d.files_to_convert)==-1&&!(p3d.api_reduce=='on'&&(p3d.api_reduce_mobile_only!='on'||(p3d.api_reduce_mobile_only=='on'&&jQuery.isMobile))&&(p3d.api_reduce_min_size*1048576<file.size))){p3d.filereader_supported=true;var reader=new FileReader();reader.onload=function(event){var chars=new Uint8Array(event.target.result);var CHUNK_SIZE=0x8000;var index=0;var length=chars.length;var result='';var slice;while(index<length){slice=chars.subarray(index,Math.min(index+CHUNK_SIZE,length));result+=String.fromCharCode.apply(null,slice);index+=CHUNK_SIZE;}
window.wp.event_manager.doAction('3dprint.fileRead');p3dDisplayUserDefinedProgressBar(false);if(file_ext=='dxf'){p3dViewerInit2D(result);}
p3dViewerInit(result,'',file_ext,true);p3dChangeModelColor(p3dGetCurrentColor());p3dGetStats();p3dInitScaling();}
reader.readAsArrayBuffer(file);}
else p3d.filereader_supported=false;}
plupload.each(files,function(file){document.getElementById('p3d-filelist').innerHTML+='<div id="'+file.id+'">'+file.name+' ('+plupload.formatSize(file.size)+') <b></b></div>';jQuery('#p3d-canvas-uploading-status').show();});p3d_uploader.disableBrowse(true);if(p3d.filereader_supported){p3dInitScaling();}
p3dDisplayPrice(false);p3dDisplayAddToCart(false);p3dDisplayConsole(false);p3dDisplayUserDefinedProgressBar(true);p3dDisplayQuoteLoading(true);if((p3d.api_repair=='on'||p3d.api_optimize=='on')&&!p3dIs2DFlow(p3d.object))
jQuery('#p3d-repair-status, #p3d-canvas-repair-status').show();jQuery('#p3d-model-message-arrange').hide();up.start();p3d.uploading=true;if(p3d.xhr3&&p3d.xhr3.readyState!=4){p3d.xhr3.abort();}
jQuery('#p3d-canvas-repair-status').hide()
p3dDisplayQuoteLoading(true);jQuery('#p3d-pickfiles').click();},UploadProgress:function(up,file){p3d.bar_progress=parseFloat(file.percent/100);document.getElementById(file.id).getElementsByTagName('b')[0].innerHTML='<span>'+file.percent+"%</span>";},UploadComplete:function(up,file,response){p3d.uploading=false;p3d_uploader.disableBrowse(false);jQuery('#p3d-canvas-uploading-status').hide();},Error:function(up,err){p3d.uploading=false;p3d_uploader.disableBrowse(false);jQuery('#p3d-canvas-uploading-status').hide();p3dShowError("\nError #"+err.code+": "+err.message);window.p3dProgressButton._stop();p3dDisplayConsole(true);}}});p3d_uploader.bind('BeforeUpload',function(up,file){up.settings.multipart_params={"action":'p3d_handle_upload',"quote_attributes":jQuery('.woo_attribute').serialize(),"product_id":jQuery('#p3d_product_id').val(),"printer_id":jQuery('input[name=product_printer]:checked').data('id'),"material_id":jQuery('input[name=product_filament]:checked').data('id'),"coating_id":jQuery('input[name=product_coating]:checked').data('id'),"unit":jQuery('input[name=p3d_unit]:checked').val(),"image_height":p3d.image_height,"image_map":p3d.image_map,"security":p3d.p3d_nonce}
window.wp.event_manager.doAction('3dprint.beforeUpload');});p3d_uploader.init();p3d_uploader.bind('FileUploaded',function(p3d_uploader,file,response){p3d.uploading=false;p3d.fatal_error=false;p3d.packed=0;jQuery('#p3d-console').hide();jQuery('#checkout-add-to-cart').val(p3d.product_id);jQuery('#p3d-canvas-uploading-status').hide();if(p3d.pricing=='checkout'&&p3d.new_pricing!='request'){p3dDisplayRequestForm(false);}
else if(p3d.pricing=='request'||p3d.pricing=='request_estimate'||p3d.new_pricing=='request'){p3dDisplayRequestForm(true);}
p3dEnableControls();var data=jQuery.parseJSON(response.response);jQuery('p.price span.amount').html('&nbsp;');jQuery('p.support_price span.amount').html('&nbsp;');if(typeof(data.error)!=='undefined'){p3d.fatal_error=true;console.error(data.error.message);p3dShowError(data.error.message);p3dDisplayUserDefinedProgressBar(false);p3dDisplayQuoteLoading(false);return false;}
p3dDisplayQuoteLoading(false);p3dDisplayAddToCart(true);jQuery('.p3d-mail-success').remove();jQuery('.p3d-mail-error').remove();if(!p3d.filereader_supported){p3dDisplayUserDefinedProgressBar(true);p3dDisplayQuoteLoading(true);var model_type=data.filename.split('.').pop().toLowerCase();var mtl='';var printer_full_color=jQuery('input[name=product_printer]:checked').data('full_color');if(typeof(data.material)!=='undefined'){mtl=data.material;p3d.mtl=mtl;jQuery.cookie('p3d_mtl',mtl,{expires:parseInt(p3d.cookie_expire)});}
if(typeof(data.failed_files_count)!=='undefined'&&parseInt(data.failed_files_count)>0){jQuery('#p3d-failed-files-count').html(data.failed_files_count);jQuery('#p3d-model-message-arrange').show();if(p3d.pricing_arrange=='request')p3d.fatal_error=1;p3dNewPricing('',p3d.pricing_arrange);}
if(typeof(data.packed)!=='undefined'&&parseInt(data.packed)>0){p3d.packed=1;}
if(model_type=='dxf'){jQuery.ajax({url:p3d.upload_url+encodeURIComponent(data.filename),success:function(result){p3dViewerInit2D(result);},fail:function(){alert(p3d.text_file_does_not_exist);}});}
p3dViewerInit(p3d.upload_url+encodeURIComponent(data.filename),mtl,model_type,false);}
p3dShowResponse(data);product_file=data.filename;jQuery.cookie('p3d_file',data.filename,{expires:parseInt(p3d.cookie_expire)});jQuery.cookie('p3d_file_original',data.filename_original,{expires:parseInt(p3d.cookie_expire)});jQuery('#p3d-file-original').val(data.filename_original);jQuery('#pa_p3d_model').val(product_file);p3dDisplayStats(true)
p3dGetStats();var x_dim=parseFloat(jQuery('#stats-length').html());var y_dim=parseFloat(jQuery('#stats-width').html());var z_dim=parseFloat(jQuery('#stats-height').html());var printer_width=parseFloat(jQuery('input:radio[name=product_printer]:checked').data('width'));var printer_length=parseFloat(jQuery('input:radio[name=product_printer]:checked').data('length'));var printer_height=parseFloat(jQuery('input:radio[name=product_printer]:checked').data('height'));if(!p3dBoxFitsBox(x_dim*10,y_dim*10,z_dim*10,printer_width,printer_length,printer_height)){p3dInitScaling();}
if(p3dCheckPrintability()){p3dDisplayPrice(true);p3dDisplayAddToCart(true);}
p3dRepairModel(data.filename);p3dAnalyseModel(data.filename);p3dSaveThumbnail(data.filename);window.wp.event_manager.doAction('3dprint.fileUploaded');});jQuery("#p3d-model-message-upload").click(function(){jQuery('div.moxie-shim input[type=file]').trigger('click');});if(p3d.use_ninjaforms=='on'&&typeof(Marionette)!=='undefined'){var p3dController=Marionette.Object.extend({initialize:function(formID){Backbone.Radio.channel('form-'+formID).reply('maybe:submit',this.beforeSubmit,this,formID);},beforeSubmit:function(formID){p3dPrepareNinjaForm();return true;}});new p3dController(p3d.ninjaforms_form_id);}});function p3dSaveThumbnail(filename){if(p3dIs2DFlow())return;var thumbnail_data=jQuery('#p3d-viewer canvas.p3d-cv-3d').get(0).toDataURL().replace('data:image/png;base64,','');jQuery.ajax({method:"POST",type:"POST",url:p3d.url,data:{action:"p3d_save_thumbnail",filename:filename,thumbnail_data:thumbnail_data,product_id:p3d.product_id}}).done(function(msg){})}
function p3dSubmitForm(){var qty=parseInt(jQuery('#p3d-qty').val());jQuery('form.p3d-product-formt input.qty').val(qty);jQuery('form.p3d-product-form').submit();}
function p3dBindSubmit(){jQuery("form.p3d-product-form").on("submit",function(e){jQuery('#p3d-resize-scale').val(p3d.resize_scale);jQuery('#p3d-infill-id').val(jQuery('input[name=product_infill]:checked').data('id'));var model_dim=new Array();model_dim.x=p3d.boundingBox.max.x-p3d.boundingBox.min.x;model_dim.y=p3d.boundingBox.max.y-p3d.boundingBox.min.y;model_dim.z=p3d.boundingBox.max.z-p3d.boundingBox.min.z;jQuery('#p3d-dim-x').val(((model_dim.y*p3d.resize_scale*p3dGetUnitMultiplier())/10));jQuery('#p3d-dim-y').val(((model_dim.x*p3d.resize_scale*p3dGetUnitMultiplier())/10));jQuery('#p3d-dim-z').val(((model_dim.z*p3d.resize_scale*p3dGetUnitMultiplier())/10));if(p3dIs2DFlow(p3d.object)){jQuery('#p3d-dim-z').val(jQuery('input[name=product_filament]:checked').data('laser-cutting-thickness')/10);}
if(p3dIs2DFlow(p3d.object)){}
else{jQuery('#p3d-thumb').val(jQuery('#p3d-viewer canvas.p3d-cv-3d').get(0).toDataURL().replace('data:image/png;base64,',''));}
if(jQuery.cookie('p3d_file_original'))jQuery('#p3d-file-original').val(jQuery.cookie('p3d_file_original'));var cutting_instructions='';jQuery('select[name^=p3d_cutting_instructions]').each(function(i,obj){var start=jQuery(obj).prop('name').indexOf('[')+2;var end=jQuery(obj).prop('name').indexOf(']')-1;var index=jQuery(obj).prop('name').substring(start,end);cutting_instructions+=index+'='+jQuery(obj).val()+',';})
jQuery('#pa_p3d_cutting_instructions').val(cutting_instructions);window.wp.event_manager.doAction('3dprint.productScreenshot');return true;})}
function p3dProcessModel(filename){if(typeof(filename)=='undefined'||filename.length==0)return;if(typeof(p3d_mp)!='undefined'&&p3d_mp.force_repair_on_scale=='on'){p3dRepairModel(filename);return;}
clearInterval(p3d.refresh_interval_process);p3d.processing=true;var rotation_x=jQuery('#rotation_x').val();var rotation_y=jQuery('#rotation_y').val();var rotation_z=jQuery('#rotation_z').val();var unit=jQuery('#pa_p3d_unit').val();var file_ext=filename.split('.').pop().toLowerCase();jQuery('#p3d-analyse-status, #p3d-canvas-analyse-status').hide();if(p3d.xhr1&&p3d.xhr1.readyState!=4){p3d.xhr1.abort();jQuery('#p3d-analyse-status, #p3d-canvas-analyse-status').hide();jQuery('#stats-material-volume-loading, #stats-support-material-volume-loading, #stats-material-weight-loading, #stats-hours-loading, #stats-total-path-loading').hide();jQuery('#stats-material-volume, #stats-support-material-volume, #stats-weight').show();}
if(p3d.xhr2&&p3d.xhr2.readyState!=4){p3d.xhr2.abort();p3d.xhr2.readyState=4;jQuery('#p3d-analyse-status, #p3d-canvas-analyse-status').hide();jQuery('#stats-material-volume-loading, #stats-support-material-volume-loading, #stats-material-weight-loading, #stats-hours-loading, #stats-total-path-loading').hide();jQuery('#stats-material-volume, #stats-support-material-volume, #stats-weight').show();}
if((p3d.xhr3&&p3d.xhr3.readyState!=4)||(p3d.xhr4&&p3d.xhr4.readyState!=4)){p3d.xhr3.abort();p3d.xhr4.abort();jQuery('#p3d-repair-status, #p3d-canvas-repair-status').hide();jQuery('#p3d-repair-image').hide();jQuery('#p3d-canvas-repair-image').hide();}
if(p3d.process&&p3d.process.readyState!=4){p3d.process.abort();}
jQuery('#p3d-process-status, #p3d-canvas-process-status').show();jQuery('#p3d-process-message').html(p3d.text_processing_model);jQuery('#p3d-canvas-process-message').html(p3d.text_processing_model);jQuery('#p3d-process-image').show();jQuery('#p3d-canvas-process-image').show();p3dDisableControls();p3dDisplayAddToCart(false);p3dDisplayPrice(false);p3dDisplayQuoteLoading(true);p3d.process=jQuery.ajax({method:"POST",type:"POST",url:p3d.url,data:{action:"p3d_handle_process",rotation_x:rotation_x,rotation_y:rotation_y,rotation_z:rotation_z,scale_x:p3d.resize_scale_x,scale_y:p3d.resize_scale_y,scale_z:p3d.resize_scale_z,filename:filename,product_id:p3d.product_id,tab_id:p3d.tab_id,security:p3d.p3d_nonce}}).done(function(msg){var data=jQuery.parseJSON(msg);if(data.status=='0'||typeof(data.error)!=='undefined'){jQuery('#p3d-process-message').html(p3d.text_processing_model_failed);jQuery('#p3d-canvas-message').html(p3d.text_processing_model_failed);if(typeof(data.error)!=='undefined'){jQuery('#p3d-process-message').html(p3d.text_processing_model_failed+' : '+data.error.message);jQuery('#p3d-canvas-process-message').html(p3d.text_processing_model_failed+' : '+data.error.message);jQuery('#p3d-process-image').hide();jQuery('#p3d-canvas-process-image').hide();p3dDisplayUserDefinedProgressBar(false);p3dDisplayQuoteLoading(false);}}
else if(data.status=='2'){var server=data.server;p3d.processing=true;p3d.refresh_interval_process=setInterval(function(){p3dProcessCheck(filename,server);},3000);}});}
function p3dProcessCheck(filename,server){if(p3d.xhr_process_check&&p3d.xhr_process_check.readyState!=4){return;}
if(p3d.xhr1&&p3d.xhr1.readyState!=4){p3d.xhr1.abort();jQuery('#p3d-analyse-status, #p3d-canvas-analyse-status').hide();jQuery('#stats-material-volume-loading, #stats-support-material-volume-loading, #stats-material-weight-loading, #stats-hours-loading, #stats-total-path-loading').hide();jQuery('#stats-material-volume, #stats-support-material-volume, #stats-weight').show();}
if(p3d.xhr2&&p3d.xhr2.readyState!=4){p3d.xhr2.abort();p3d.xhr2.readyState=4;jQuery('#p3d-analyse-status, #p3d-canvas-analyse-status').hide();jQuery('#stats-material-volume-loading, #stats-support-material-volume-loading, #stats-material-weight-loading, #stats-hours-loading, #stats-total-path-loading').hide();jQuery('#stats-material-volume, #stats-support-material-volume, #stats-weight').show();}
if((p3d.xhr3&&p3d.xhr3.readyState!=4)||(p3d.xhr4&&p3d.xhr4.readyState!=4)){p3d.xhr3.abort();p3d.xhr4.abort();jQuery('#p3d-repair-status, #p3d-canvas-repair-status').hide();jQuery('#p3d-repair-image').hide();jQuery('#p3d-canvas-repair-image').hide();}
var rotation_x=jQuery('#rotation_x').val();var rotation_y=jQuery('#rotation_y').val();var rotation_z=jQuery('#rotation_z').val();p3d.xhr_process_check=jQuery.ajax({method:"POST",type:"POST",url:p3d.url,data:{action:"p3d_handle_process_check",server:server,rotation_x:rotation_x,rotation_y:rotation_y,rotation_z:rotation_z,scale_x:p3d.resize_scale_x,scale_y:p3d.resize_scale_y,scale_z:p3d.resize_scale_z,filename:filename,product_id:p3d.product_id,tab_id:p3d.tab_id,security:p3d.p3d_nonce}}).done(function(msg){var data=jQuery.parseJSON(msg);if(data.status=='1'){p3d.processing=false;clearInterval(p3d.refresh_interval_process);var data=jQuery.parseJSON(msg);jQuery('#p3d-process-image').hide();jQuery('#p3d-canvas-process-image').hide();p3dEnableControls();if(p3d.api_analyse!='on'){p3dDisplayPrice(true);p3dDisplayAddToCart(true);p3dDisplayQuoteLoading(false);}
if(typeof(data.filename)!=='undefined'&&data.filename.length>0){var model_type=data.filename.split('.').pop().toLowerCase();var mtl='';if(!p3d.mtl||p3d.mtl.length==0){p3dViewerInit(p3d.upload_url+encodeURIComponent(data.filename),mtl,model_type,false);jQuery.cookie('p3d_file',data.filename,{expires:parseInt(p3d.cookie_expire)});jQuery('#pa_p3d_model').val(data.filename);}
jQuery('#p3d-process-message').html(p3d.text_processing_model_done);jQuery('#p3d-canvas-process-message').html(p3d.text_processing_model_done);p3dAnalyseModel(data.filename);}
else{jQuery('#p3d-process-message').hide();jQuery('#p3d-canvas-process-message').hide();p3dDisplayUserDefinedProgressBar(false);}
p3dDisplayUserDefinedProgressBar(false);}
else if(data.status=='0'){p3d.processing=false;clearInterval(p3d.refresh_interval_process);jQuery('#p3d-process-message').html(p3d.text_processing_model_failed);jQuery('#p3d-canvas-message').html(p3d.text_processing_model_failed);if(typeof(data.error)!=='undefined'){jQuery('#stats-material-volume-loading, #stats-support-material-volume-loading, #stats-material-weight-loading, #stats-hours-loading, #stats-total-path-loading').hide();jQuery('#p3d-process-message').html(p3d.text_processing_model_failed+' : '+data.error.message);jQuery('#p3d-canvas-process-message').html(p3d.text_processing_model_failed+' : '+data.error.message);p3dDisplayUserDefinedProgressBar(false);}}
else if(typeof(data.error)!=='undefined'){p3d.processing=false;clearInterval(p3d.refresh_interval_process);p3d.process_error=true;p3dShowError(data.error.message);p3dDisplayQuoteLoading(false);p3dDisplayAddToCart(true);jQuery('#p3d-process-status, #p3d-canvas-process-status').hide();jQuery('#stats-material-volume-loading, #stats-support-material-volume-loading, #stats-material-weight-loading, #stats-hours-loading, #stats-total-path-loading').hide();p3dDisplayUserDefinedProgressBar(false);return false;}});}
function p3dRepairModel(filename){if(jQuery('input[name=product_printer]:checked').data('type')=='laser_cutting'||jQuery('input[name=product_filament]:checked').data('type')=='laser_cutting'){p3d.render_required='on';jQuery('#p3d-viewer canvas').hide();jQuery('#p3d-viewer').css('min-height','300px');p3dDisplayUserDefinedProgressBar(true);jQuery('#stats-model-dimensions').hide();jQuery('#stats-model-dimensions-loading').show();jQuery('#p3d-scale-dimensions').find('span,input').hide();jQuery('#p3d-scale-dimensions-loading').show();}
else p3d.render_required=false;if(typeof(filename)=='undefined'||filename.length==0)return;if(!p3d.render_required&&p3d.api_repair!='on'&&p3d.api_optimize!='on')return;if(p3d.api_pack=='on'&&p3d.packed>0){jQuery('#p3d-repair-status, #p3d-canvas-repair-status').hide();return;}
if(p3d.processing)return;clearInterval(p3d.refresh_interval_repair);p3d.repairing=true;var printer_id=jQuery('input[name=product_printer]:checked').data('id');var file_ext=filename.split('.').pop().toLowerCase();if(p3d.xhr1&&p3d.xhr1.readyState!=4){p3d.xhr1.abort();jQuery('#p3d-analyse-status, #p3d-canvas-analyse-status').hide();jQuery('#stats-material-volume-loading, #stats-support-material-volume-loading, #stats-material-weight-loading, #stats-hours-loading, #stats-total-path-loading').hide();jQuery('#stats-material-volume, #stats-support-material-volume, #stats-weight').show();}
if(p3d.xhr2&&p3d.xhr2.readyState!=4){p3d.xhr2.abort();p3d.xhr2.readyState=4;jQuery('#p3d-analyse-status, #p3d-canvas-analyse-status').hide();jQuery('#stats-material-volume-loading, #stats-support-material-volume-loading, #stats-material-weight-loading, #stats-hours-loading, #stats-total-path-loading').hide();jQuery('#stats-material-volume, #stats-support-material-volume, #stats-weight').show();}
if(p3d.xhr3&&p3d.xhr3.readyState!=4){p3d.xhr3.abort();}
jQuery('#p3d-repair-status, #p3d-canvas-repair-status').show();jQuery('#p3d-repair-message').html(p3d.text_repairing_model);jQuery('#p3d-canvas-repair-message').html(p3d.text_repairing_model);jQuery('#p3d-canvas-repair-percent').html('');jQuery('#p3d-repair-percent').html('');jQuery('#p3d-repair-image').show();jQuery('#p3d-canvas-repair-image').show();p3dDisableControls();p3dDisplayAddToCart(false);p3dDisplayPrice(false);if(p3d.new_pricing!='request'){p3dDisplayQuoteLoading(true);}
p3d.xhr3=jQuery.ajax({method:"POST",type:"POST",url:p3d.url,data:{action:"p3d_handle_repair",repair:p3d.api_repair,printer_id:printer_id,product_id:p3d.product_id,optimize:p3d.api_optimize,render:p3d.render_required,scale_x:p3d.resize_scale_x,scale_y:p3d.resize_scale_y,scale_z:p3d.resize_scale_z,unit:jQuery('#pa_p3d_unit').val(),rotate_x:jQuery('#rotation_x').val(),rotate_y:jQuery('#rotation_y').val(),filename:filename,tab_id:p3d.tab_id,security:p3d.p3d_nonce}}).done(function(msg){var data=jQuery.parseJSON(msg);if(data.status=='0'){jQuery('#p3d-repair-message').html(p3d.text_model_repair_failed);jQuery('#p3d-canvas-message').html(p3d.text_model_repair_failed);if(typeof(data.error)!=='undefined'){jQuery('#p3d-repair-message').html(p3d.text_model_repair_failed+' : '+data.error.message);jQuery('#p3d-canvas-repair-message').html(p3d.text_model_repair_failed+' : '+data.error.message);}
if(p3d.pricing_irrepairable=='request')p3d.fatal_error=1;p3dNewPricing(filename,p3d.pricing_irrepairable);}
else if(data.status=='2'){var server=data.server;p3d.repairing=true;p3d.refresh_interval_repair=setInterval(function(){p3dRepairCheck(filename,server);},3000);}
else if(typeof(data.error)!=='undefined'){p3d.repairing=false;clearInterval(p3d.refresh_interval_repair);p3d.repair_error=true;p3dShowError(data.error.message);p3dDisplayQuoteLoading(false);p3dDisplayAddToCart(true);jQuery('#p3d-repair-status, #p3d-canvas-repair-status').hide();jQuery('#stats-material-volume-loading, #stats-support-material-volume-loading, #stats-material-weight-loading, #stats-hours-loading, #stats-total-path-loading').hide();p3dDisplayUserDefinedProgressBar(false);return false;}});}
function p3dRepairCheck(filename,server){if(p3d.xhr4&&p3d.xhr4.readyState!=4){return;}
var printer_type=jQuery('input[name=product_printer]:checked').data('type')
p3d.xhr4=jQuery.ajax({method:"POST",type:"POST",url:p3d.url,data:{action:"p3d_handle_repair_check",repair:p3d.api_repair,optimize:p3d.api_optimize,render:p3d.render_required,printer_type:printer_type,product_id:p3d.product_id,server:server,filename:filename,tab_id:p3d.tab_id,security:p3d.p3d_nonce}}).done(function(msg){var data=jQuery.parseJSON(msg);if(typeof(data.rendered_file_url)!=='undefined'&&data.rendered_file_url&&data.rendered_file_url.length>0){data.status='1';}
if(data.status=='1'){p3d.repairing=false;if(p3d.render_required){p3d.render_required=false;p3dDisplayUserDefinedProgressBar(false);}
clearInterval(p3d.refresh_interval_repair);var data=jQuery.parseJSON(msg);jQuery('#p3d-repair-image').hide();jQuery('#p3d-canvas-repair-image').hide();p3dEnableControls();if(typeof(data.progress)!='undefined'){jQuery('#p3d-canvas-repair-percent').html(data.progress+'%');jQuery('#p3d-repair-percent').html(data.progress+'%');}
if(p3d.api_analyse!='on'){p3dDisplayPrice(true);p3dDisplayAddToCart(true);p3dDisplayQuoteLoading(false);}
if(typeof(data.rendered_file_url)!=='undefined'&&data.rendered_file_url&&data.rendered_file_url.length>0){jQuery('#p3d_rendered_image').remove();var img=jQuery('<img id="p3d_rendered_image" src="'+data.rendered_file_url+'" data-magnify-src="'+data.rendered_file_url+'">');jQuery.cookie('p3d_rendered_file_url',data.rendered_file_url,{expires:parseInt(p3d.cookie_expire)});img.appendTo('.p3d-canvas-wrapper');jQuery('#p3d_rendered_image').magnify();}
if(typeof(data.page_number)!=='undefined'&&parseInt(data.page_number)>1){alert(p3d.text_multiple_pages);}
if(typeof(data.dxf_bb)!=='undefined'&&data.dxf_bb){if(!(data.dxf_bb.x_min==null||data.dxf_bb.x_max==null||data.dxf_bb.y_min==null||data.dxf_bb.y_max==null)){p3d.boundingBox.min.x=parseFloat(data.dxf_bb.x_min);p3d.boundingBox.max.x=parseFloat(data.dxf_bb.x_max);p3d.boundingBox.min.y=parseFloat(data.dxf_bb.y_min);p3d.boundingBox.max.y=parseFloat(data.dxf_bb.y_max);p3dGetStats();}
jQuery('#stats-model-dimensions-loading').hide();jQuery('#stats-model-dimensions').show();jQuery('#p3d-scale-dimensions').find('span,input').show();jQuery('#p3d-scale-dimensions-loading').hide();}
else{jQuery('#stats-model-dimensions-loading').hide();jQuery('#p3d-scale-dimensions-loading').hide();}
if(typeof(data.filename)!=='undefined'&&data.filename&&data.filename.length>0){p3d.new_pricing='';var model_type=data.filename.split('.').pop().toLowerCase();var mtl='';if(!p3d.mtl||p3d.mtl.length==0){p3dViewerInit(p3d.upload_url_default+encodeURIComponent(data.filename),mtl,model_type,false);jQuery.cookie('p3d_file',data.filename,{expires:parseInt(p3d.cookie_expire)});jQuery('#pa_p3d_model').val(data.filename);}
jQuery('#p3d-repair-message').html(p3d.text_model_repaired);if(typeof(p3d_mp)!='undefined'&&p3d.api_repair=='on'&&data.mp_grade_has_issues){var model_errors='<table class="p3d-model-errors">'+'<tr><td>'+p3d.text_model_repair_nonmanifold_edges+'</td><td>'+data.mp_grade_nonmanifold+'</td></tr>'+'<tr><td>'+p3d.text_model_repair_boundary_edges+'</td><td>'+data.mp_grade_boundary+'</td></tr>'+'<tr><td>'+p3d.text_model_repair_flipped_faces+'</td><td>'+data.mp_grade_flipped+'</td></tr>'+'<tr><td>'+p3d.text_model_repair_inter+'</td><td>'+data.mp_grade_inter+'</td></tr>'+'<tr><td>'+p3d.text_model_repair_thick+'</td><td>'+data.mp_grade_thick+'</td></tr>'+'<tr><td>'+p3d.text_model_repair_clear+'</td><td>'+data.mp_grade_clear+'</td></tr>'+'</table>';jQuery('#p3d-repair-message').html('<b>'+p3d.text_model_repair_report+'</b>'+model_errors);p3d.triangulation_required=false;}
if(p3d.api_repair=='on'&&data.needed_repair=='yes'){var model_errors='<table class="p3d-model-errors">'+'<tr><td>'+p3d.text_model_repair_degenerate_facets+'</td><td>'+data.degenerate_facets+'</td></tr>'+'<tr><td>'+p3d.text_model_repair_edges_fixed+'</td><td>'+data.edges_fixed+'</td></tr>'+'<tr><td>'+p3d.text_model_repair_facets_removed+'</td><td>'+data.facets_removed+'</td></tr>'+'<tr><td>'+p3d.text_model_repair_facets_added+'</td><td>'+data.facets_added+'</td></tr>'+'<tr><td>'+p3d.text_model_repair_facets_reversed+'</td><td>'+data.facets_reversed+'</td></tr>'+'<tr><td>'+p3d.text_model_repair_backwards_edges+'</td><td>'+data.backwards_edges+'</td></tr>'+'</table>';jQuery('#p3d-repair-message').html('<b>'+p3d.text_model_repair_report+'</b>'+model_errors);p3d.triangulation_required=false;}
if(p3d.api_repair=='on'&&data.needed_repair=='no'){jQuery('#p3d-repair-message').html(p3d.text_model_no_repair_needed);jQuery('#p3d-canvas-repair-message').html(p3d.text_model_no_repair_needed);return;}
jQuery('#p3d-canvas-repair-message').html(p3d.text_model_repaired);p3dAnalyseModel(data.filename);}
else if(data.needed_repair=='no'){p3d.new_pricing='';jQuery('#p3d-repair-message').html(p3d.text_model_no_repair_needed);jQuery('#p3d-canvas-repair-message').html(p3d.text_model_no_repair_needed);p3dAnalyseModel(filename);}
else if(typeof(data.rendered_file_url)!=='undefined'&&data.rendered_file_url&&data.rendered_file_url.length>0){p3dAnalyseModel(filename);}
else{jQuery('#p3d-repair-message').hide();jQuery('#p3d-canvas-repair-message').hide();p3dDisplayUserDefinedProgressBar(false);if(p3d.pricing_irrepairable=='request')p3d.fatal_error=1;p3dNewPricing(filename,p3d.pricing_irrepairable);}
p3dDisplayUserDefinedProgressBar(false);}
else if(data.status=='2'){if(typeof(data.progress_phase)!='undefined'){jQuery('#p3d-repair-message').html(data.progress_phase);jQuery('#p3d-canvas-repair-message').html(data.progress_phase);}
if(typeof(data.progress)!='undefined'){jQuery('#p3d-canvas-repair-percent').html(data.progress+'%');jQuery('#p3d-repair-percent').html(data.progress+'%');}}
else if(data.status=='0'){p3d.repairing=false;if(p3d.render_required){p3d.render_required=false;p3dDisplayUserDefinedProgressBar(false);}
clearInterval(p3d.refresh_interval_repair);jQuery('#p3d-repair-message').html(p3d.text_model_repair_failed);jQuery('#p3d-canvas-message').html(p3d.text_model_repair_failed);if(typeof(data.error)!=='undefined'){jQuery('#p3d-repair-message').html(p3d.text_model_repair_failed+' : '+data.error.message);jQuery('#p3d-canvas-repair-message').html(p3d.text_model_repair_failed+' : '+data.error.message);p3dDisplayUserDefinedProgressBar(false);}
if(p3d.pricing_irrepairable=='request')p3d.fatal_error=1;p3dNewPricing(filename,p3d.pricing_irrepairable);}
else if(typeof(data.error)!=='undefined'){p3d.repairing=false;if(p3d.render_required){p3d.render_required=false;p3dDisplayUserDefinedProgressBar(false);}
clearInterval(p3d.refresh_interval_repair);p3d.repair_error=true;p3dShowError(data.error.message);p3dDisplayQuoteLoading(false);p3dDisplayAddToCart(true);jQuery('#p3d-repair-status, #p3d-canvas-repair-status').hide();jQuery('#stats-material-volume-loading, #stats-support-material-volume-loading, #stats-material-weight-loading, #stats-hours-loading, #stats-total-path-loading').hide();p3dDisplayUserDefinedProgressBar(false);if(p3d.pricing_irrepairable=='request')p3d.fatal_error=1;p3dNewPricing(filename,p3d.pricing_irrepairable);return false;}});}
function p3dEnableControls(){if(p3dIs2DFlow())return;var p3dRangeSlider=document.getElementById('p3d-scale');if(typeof(p3dRangeSlider)!=='undefined'&&p3dRangeSlider.noUiSlider){p3dRangeSlider.removeAttribute('disabled');}
jQuery('.p3d-dim-input').prop('disabled',false);jQuery('#p3d-apply-button').prop('disabled',false);jQuery('#unit_mm, #unit_inch').prop('disabled',false);jQuery('#p3d-unlocked-image, #p3d-locked-image').prop('disabled',false);}
function p3dDisableControls(){var p3dRangeSlider=document.getElementById('p3d-scale');if(typeof(p3dRangeSlider)!=='undefined'&&p3dRangeSlider.noUiSlider){p3dRangeSlider.setAttribute('disabled',true);}
jQuery('.p3d-dim-input').prop('disabled',true);jQuery('#p3d-apply-button').prop('disabled',true);jQuery('#unit_mm, #unit_inch').prop('disabled',true);jQuery('#p3d-unlocked-image, #p3d-locked-image').prop('disabled',true);}
function p3dAnalyseModel(filename){if(typeof(filename)=='undefined'||filename.length==0)return;var printer_type=jQuery('input[name=product_printer]:checked').data('type')
var infill=jQuery('input[name=product_infill]:checked').val();p3d.filename=filename;if(p3d.file_url&&p3d.file_url.length>0&&p3d.product_price_type&&p3d.product_price_type=='fixed'){return;}
if(p3d.printer_error==1){return;}
if(p3d.repairing){return;}
if(p3d.processing){return;}
clearInterval(p3d.refresh_interval);clearInterval(p3d.refresh_interval1);p3d.refresh_interval1_running=false;if(p3d.xhr1&&p3d.xhr1.readyState!=4){p3d.xhr1.abort();}
if(p3d.xhr2&&p3d.xhr2.readyState!=4){p3d.xhr2.abort();p3d.xhr2.readyState=4;jQuery('#p3d-analyse-status, #p3d-canvas-analyse-status').hide();jQuery('#stats-material-volume-loading, #stats-support-material-volume-loading, #stats-material-weight-loading, #stats-hours-loading, #stats-total-path-loading').hide();}
if(p3d.render_required){return;}
if(p3d.api_analyse!='on'&&!p3d.triangulation_required)return;if(p3d.uploading||p3d.repairing)return;if(typeof(printer_type)!=='undefined'&&printer_type!='fff'&&printer_type!='dlp'&&printer_type!='laser_cutting'&&!p3d.triangulation_required){p3d.checking=false;p3d.analyse_error=false;p3dDisplayQuoteLoading(false);if(p3d.pricing=='checkout'&&p3d.new_pricing!='request'){p3dDisplayAddToCart(true);p3dDisplayPrice(true);}
if(p3d.pricing!='checkout'||p3d.new_pricing=='request'){p3dDisplayRequestForm(true);}
jQuery('#stats-material-volume, #stats-support-material-volume, #stats-weight, #stats-hours, #stats-total-path').show();jQuery('#p3d-analyse-status, #p3d-canvas-analyse-status, #stats-material-volume-loading, #stats-support-material-volume-loading, #stats-material-weight-loading, #stats-hours-loading, #stats-total-path-loading').hide();p3dGetStats();clearInterval(p3d.refresh_interval);return;}
p3d.analyse_error=false;if(p3d.pricing=='checkout'){jQuery('#p3d-console').html('').hide();jQuery('#add-cart-wrapper .variations_button').show();}
if(p3d.pricing=='checkout'){p3dDisplayAddToCart(false);p3dDisplayQuoteLoading(true);}
p3dDisplayPrice(false);var printer_id=jQuery('input[name=product_printer]:checked').data('id');var material_id=jQuery('input[name=product_filament]:checked').data('id');var unit=jQuery('#pa_p3d_unit').val();if(!p3d.triangulation_required){}
jQuery('#p3d-analyse-status, #p3d-canvas-analyse-status').show();jQuery('#p3d-analyse-message').html(p3d.text_analysing_model);jQuery('#p3d-analyse-image').show().css('display','inline-block');jQuery('#p3d-analyse-percent').html('1%');jQuery('#p3d-canvas-analyse-status').show();jQuery('#p3d-canvas-analyse-message').html(p3d.text_analysing_model);jQuery('#p3d-canvas-analyse-image').show().css('display','inline-block');jQuery('#p3d-canvas-analyse-percent').html('1%');jQuery('#stats-material-volume, #stats-support-material-volume, #stats-weight, #stats-hours, #stats-total-path').hide();jQuery('#stats-material-volume-loading, #stats-support-material-volume-loading, #stats-material-weight-loading, #stats-hours-loading, #stats-total-path-loading').show();if(p3d.pricing=='checkout'){p3dDisplayAddToCart(false);p3dDisplayQuoteLoading(true);}
if(p3d.pricing=='request_estimate'){p3dDisplayQuoteLoading(true);}
p3dDisplayPrice(false);if(p3d.xhr1&&p3d.xhr1.readyState!=4){p3d.xhr1.abort();}
p3d.analyse_requested=true;p3d.analysed_support_volume=0;jQuery('#p3d-warning-message').html('')}
function p3dAnalyseModelAJAX(){var printer_type=jQuery('input[name=product_printer]:checked').data('type')
var infill=jQuery('input[name=product_infill]:checked').val();var infill_id=jQuery('input[name=product_infill]:checked').data('id');var printer_id=jQuery('input[name=product_printer]:checked').data('id');var material_id=jQuery('input[name=product_filament]:checked').data('id');var unit=jQuery('#pa_p3d_unit').val();var cutting_instructions='';jQuery('select[name^=p3d_cutting_instructions]').each(function(i,obj){var start=jQuery(obj).prop('name').indexOf('[')+2;var end=jQuery(obj).prop('name').indexOf(']')-1;var index=jQuery(obj).prop('name').substring(start,end);cutting_instructions+=index+'='+jQuery(obj).val()+',';})
jQuery('#p3d-repair-image').hide();if(p3d.analyse_requested){p3d.xhr1=jQuery.ajax({method:"POST",type:"POST",url:p3d.url,data:{action:"p3d_handle_analyse",product_id:p3d.product_id,printer_id:printer_id,material_id:material_id,filename:p3d.filename,infill:infill,infill_id:infill_id,cutting_instructions:cutting_instructions,scale:p3d.resize_scale,unit:unit,triangulation:p3d.triangulation_required,api_analyse:p3d.api_analyse,tab_id:p3d.tab_id,security:p3d.p3d_nonce}}).done(function(msg){var data=jQuery.parseJSON(msg);if(typeof(data.error)!=='undefined'){p3d.analyse_error=true;p3dShowError(data.error.message);p3dDisplayQuoteLoading(false);jQuery('#p3d-analyse-status, #p3d-canvas-analyse-status').hide();jQuery('#p3d-canvas-analyse-status').hide();jQuery('#stats-material-volume-loading, #stats-support-material-volume-loading, #stats-material-weight-loading, #stats-hours-loading, #stats-total-path-loading').hide();if(p3d.pricing_api_expired=='request')p3d.fatal_error=1;p3dNewPricing('',p3d.pricing_api_expired);return false;}
if(data.status=='2'){var server=data.server;p3d.checking=true;p3dDisplayPrice(false);if(p3d.pricing=='checkout'){p3dDisplayAddToCart(false);p3dDisplayQuoteLoading(true);}
if(p3d.pricing=='request_estimate'){p3dDisplayQuoteLoading(true);}
jQuery('#p3d-analyse-percent').html('10%');jQuery('#p3d-canvas-analyse-percent').html('10%');p3d.refresh_interval=setInterval(function(){p3danalyseCheck(p3d.filename,server);},3000);}
else if(data.status=='1'){p3d.checking=false;p3d.analyse_error=false;jQuery('#stats-material-volume').html((data.material_volume/1000).toFixed(2));if(typeof(data.support_material_volume)!=='undefined'){jQuery('#stats-support-material-volume').html((data.support_material_volume/1000).toFixed(2));}
p3d.triangulated_volume=data.material_volume;p3d.triangulated_surface_area=data.surface_area;jQuery('#p3d-analyse-status, #p3d-canvas-analyse-status').show();jQuery('#p3d-analyse-message').html(p3d.text_model_analysed);jQuery('#p3d-analyse-image').hide();jQuery('#p3d-canvas-analyse-status').show();jQuery('#p3d-canvas-analyse-message').html(p3d.text_model_analysed);jQuery('#p3d-canvas-analyse-image').hide();p3dDisplayAddToCart(false);p3dDisplayQuoteLoading(false);p3dDisplayPrice(true);jQuery('#stats-material-volume, #stats-support-material-volume, #stats-weight, #stats-hours, #stats-total-path').show();jQuery('#stats-material-volume-loading, #stats-support-material-volume-loading, #stats-material-weight-loading, #stats-hours-loading, #stats-total-path-loading').hide();jQuery('#p3d-analyse-percent').html('100%');jQuery('#p3d-canvas-analyse-percent').html('100%');p3d.triangulation_required=false;p3dGetStats();clearInterval(p3d.refresh_interval);}
else if(data.status=='0'){jQuery('#p3d-repair-message').html(p3d.text_model_analyse_failed);p3d.analyse_error=true;if(typeof(data.error)!=='undefined'){jQuery('#p3d-repair-message').html(p3d.text_model_analyse_failed+' : '+data.error.message);}
if(p3d.pricing_api_expired=='request')p3d.fatal_error=1;p3dNewPricing('',p3d.pricing_api_expired);}});}
p3d.analyse_requested=false;}
function p3danalyseCheck(filename,server){if(p3d.file_url&&p3d.file_url.length>0&&p3d.product_price_type&&p3d.product_price_type=='fixed'){return;}
if(p3d.xhr2&&p3d.xhr2.readyState!=4){return;}
if(p3d.processing){return;}
var printer_id=jQuery('input[name=product_printer]:checked').data('id');var material_id=jQuery('input[name=product_filament]:checked').data('id');var printer_type=jQuery('input[name=product_printer]:checked').data('type');var infill=jQuery('input[name=product_infill]:checked').val();var infill_id=jQuery('input[name=product_infill]:checked').data('id');var unit=jQuery('#pa_p3d_unit').val();var cutting_instructions='';jQuery('select[name^=p3d_cutting_instructions]').each(function(i,obj){var start=jQuery(obj).prop('name').indexOf('[')+2;var end=jQuery(obj).prop('name').indexOf(']')-1;var index=jQuery(obj).prop('name').substring(start,end);cutting_instructions+=index+'='+jQuery(obj).val()+',';})
if(p3d.pricing=='checkout'){p3dDisplayAddToCart(false);p3dDisplayQuoteLoading(true);}
if(p3d.pricing=='request_estimate'){p3dDisplayQuoteLoading(true);}
p3dDisplayPrice(false);p3d.xhr2=jQuery.ajax({method:"POST",type:"POST",url:p3d.url,data:{action:"p3d_handle_analyse_check",product_id:p3d.product_id,printer_id:printer_id,material_id:material_id,filename:filename,server:server,infill:infill,infill_id:infill_id,cutting_instructions:cutting_instructions,scale:p3d.resize_scale,unit:unit,triangulation:p3d.triangulation_required,tab_id:p3d.tab_id,security:p3d.p3d_nonce}}).done(function(msg){var data=jQuery.parseJSON(msg);if(typeof(data.error)!=='undefined'){p3d.analyse_error=true;jQuery('#p3d-analyse-status, #p3d-canvas-analyse-status').show();jQuery('#p3d-analyse-message').html(p3d.text_model_analyse_failed);jQuery('#p3d-analyse-image').hide();jQuery('#p3d-canvas-analyse-status').show();jQuery('#p3d-canvas-analyse-message').html(p3d.text_model_analyse_failed);jQuery('#p3d-canvas-analyse-image').hide();p3dShowError(data.error.message);p3dDisplayUserDefinedProgressBar(false);p3dDisplayQuoteLoading(false);jQuery('#stats-material-volume-loading, #stats-support-material-volume-loading, #stats-material-weight-loading, #stats-hours-loading, #stats-total-path-loading').hide();jQuery('#p3d-analyse-percent').html('');jQuery('#p3d-canvas-analyse-percent').html('');if(p3d.pricing_api_expired=='request')p3d.fatal_error=1;p3dNewPricing('',p3d.pricing_api_expired);clearInterval(p3d.refresh_interval);}
if(data.status=='1'){p3d.checking=false;p3d.analyse_error=false;jQuery('#stats-material-volume').html((data.material_volume/1000).toFixed(2));if(typeof(data.support_material_volume)!=='undefined'){jQuery('#stats-support-material-volume').html((data.support_material_volume/1000).toFixed(2));}
p3d.analysed_volume=data.material_volume
if(data.support_material_volume)p3d.analysed_support_volume=data.support_material_volume
if(data.surface_area)p3d.analysed_surface_area=data.surface_area;p3d.print_time=data.print_time;if(p3d.print_time==0&&p3d.api_analyse=='on'){p3dNewPricing('',p3d.pricing_print_time_zero);}
if(typeof(data.cut_path)!='undefined'){p3d.cut_path=data.cut_path;}
else{p3d.cut_path=0;}
if(typeof(data.dxf_bb)!=='undefined'&&data.dxf_bb){if(!(data.dxf_bb.x_min==null||data.dxf_bb.x_max==null||data.dxf_bb.y_min==null||data.dxf_bb.y_max==null)){p3d.boundingBox.min.x=parseFloat(data.dxf_bb.x_min);p3d.boundingBox.max.x=parseFloat(data.dxf_bb.x_max);p3d.boundingBox.min.y=parseFloat(data.dxf_bb.y_min);p3d.boundingBox.max.y=parseFloat(data.dxf_bb.y_max);p3dGetStats();}}
if(typeof(data.shape_number)!=='undefined'&&data.shape_number){jQuery('#stats-shapes').html(data.shape_number);}
if(typeof(data.page_number)!=='undefined'&&data.page_number){if(parseInt(data.page_number)>1){p3dShowError(p3d.text_multiple_pages);}}
if(printer_type=='dlp'){p3d.print_time=p3dCalculateDLPPrintTime();}
jQuery('#p3d-analyse-status, #p3d-canvas-analyse-status').show();jQuery('#p3d-analyse-message').html(p3d.text_model_analysed);jQuery('#p3d-analyse-image').hide();jQuery('#p3d-canvas-analyse-status').show();jQuery('#p3d-canvas-analyse-message').html(p3d.text_model_analysed);jQuery('#p3d-canvas-analyse-image').hide();p3dDisplayAddToCart(true);p3dDisplayQuoteLoading(false);p3dDisplayPrice(true);jQuery('#stats-material-volume, #stats-support-material-volume, #stats-weight, #stats-hours, #stats-total-path').show();jQuery('#stats-material-volume-loading, #stats-support-material-volume-loading, #stats-material-weight-loading, #stats-hours-loading, #stats-total-path-loading').hide();jQuery('#p3d-analyse-percent').html('100%');jQuery('#p3d-canvas-analyse-percent').html('100%');p3dGetStats();clearInterval(p3d.refresh_interval);}
if(data.status=='2'){jQuery('#p3d-analyse-percent').html(data.progress+'%');jQuery('#p3d-canvas-analyse-percent').html(data.progress+'%');}});}
function p3dCalculateDLPPrintTime(){var model_length=p3d.boundingBox.max.x-p3d.boundingBox.min.x;var model_width=p3d.boundingBox.max.y-p3d.boundingBox.min.y;var model_height=p3d.boundingBox.max.z-p3d.boundingBox.min.z;var layer_height=parseFloat(jQuery('input[name=product_printer]:checked').data('layer-height'));var time_per_layer=parseFloat(jQuery('input[name=product_printer]:checked').data('time-per-layer'));var time_per_bottom_layer=parseFloat(jQuery('input[name=product_printer]:checked').data('time-per-bottom-layer'));var time_settle=parseFloat(jQuery('input[name=product_printer]:checked').data('time-settle'));var bottom_layers=parseFloat(jQuery('input[name=product_printer]:checked').data('bottom-layers'));var z_lift_distance=parseFloat(jQuery('input[name=product_printer]:checked').data('z-lift-distance'));var raft_base_thickness=parseFloat(jQuery('input[name=product_printer]:checked').data('raft-base-thickness'));var print_time=(bottom_layers*time_per_bottom_layer*p3d.resize_scale*p3dGetUnitMultiplier())+((model_height+raft_base_thickness+z_lift_distance)/layer_height)*time_per_layer*p3d.resize_scale*p3dGetUnitMultiplier()+((model_height+raft_base_thickness+z_lift_distance)/layer_height)*time_settle*p3d.resize_scale*p3dGetUnitMultiplier();return print_time;}
function p3dViewerInit2D(result){var parser=new window.DxfParser();var dxf=parser.parseSync(result);var loader=new THREE3DP.FontLoader();var colors=new Array();p3dDisableControls();p3d.auto_scale='0';if(typeof(dxf.entities)!='undefined'&&dxf.entities.length>0){for(var i=0;i<dxf.entities.length;i++){if(dxf.tables&&dxf.tables.layer&&dxf.tables.layer.layers[dxf.entities[i].layer]&&dxf.entities[i].colorIndex==0){var color_num=dxf.tables.layer.layers[dxf.entities[i].layer].color;if(color_num>256){if(p3d.dxf_color_codes.indexOf(color_num)!=-1){color_num=p3d.dxf_color_codes.indexOf(color_num);}
else{color_num=7;}}
colors[color_num]='#'+p3dToHex(p3d.dxf_color_codes[color_num],6);}
else if(dxf.entities[i].colorIndex==0){colors[0]='#FFFFFF';}
else if(typeof(dxf.entities[i].colorIndex)!='undefined'&&dxf.entities[i].colorIndex!=0){var color_num=dxf.entities[i].colorIndex;if(color_num>256){if(p3d.dxf_color_codes.indexOf(color_num)!=-1){color_num=p3d.dxf_color_codes.indexOf(color_num);}
else{color_num=7;}}
colors[color_num]='#'+p3dToHex(p3d.dxf_color_codes[color_num],6);}
else{}}}
if(colors.length==0&&dxf.tables&&dxf.tables.layer&&dxf.tables.layer.layers){for(const[key,obj]of Object.entries(dxf.tables.layer.layers)){if(obj.visible){var color_num=obj.colorIndex;colors[color_num]='#'+p3dToHex(p3d.dxf_color_codes[color_num],6);}}}
jQuery('#p3d-cutting-instructions').remove();var cutting_instructions_default=[];var def_ins=[];if(typeof(p3d.cutting_instructions_default)!='undefined'){jQuery.each(p3d.cutting_instructions_default.split(','),function(index,value){if(value.length>0){var col_ins=value.split('=');def_ins[col_ins[0]]=col_ins[1];}})}
var cutting_instructions_html='<div id="p3d-cutting-instructions">'+p3d.text_cutting_instructions;var selects_html='<table id="p3d-cutting-instructions-table">';jQuery.each(colors,function(key,color){if(typeof(color)=='undefined')return;selects_html+='<tr>';selects_html+='<td><div class="p3d-circle" style="color:'+color+';"></div></td>';selects_html+='<td>';selects_html+='<select autocomplete="off" onchange="p3dSelectCuttingInstructions(this)" name="p3d_cutting_instructions[\''+color+'\']">';if(p3d.laser_cutting_cut=='on'){selects_html+='<option '+(typeof(def_ins[color])!='undefined'&&def_ins[color]=='cut'?'selected':'')+' value="cut">'+p3d.text_cut;}
if(p3d.laser_cutting_engrave=='on'){selects_html+='<option '+(typeof(def_ins[color])!='undefined'&&def_ins[color]=='engrave'?'selected':'')+' value="engrave">'+p3d.text_engrave;}
if(p3d.laser_cutting_ignore=='on'){selects_html+='<option '+(typeof(def_ins[color])!='undefined'&&def_ins[color]=='ignore'?'selected':'')+' value="ignore">'+p3d.text_ignore;}
selects_html+='</select>';selects_html+='</td>';selects_html+='</tr>';});selects_html+='</table>';cutting_instructions_html+=selects_html;cutting_instructions_html+='</div>';jQuery('#p3d-viewer canvas').not(document.getElementById('p3d-cv')).remove();loader.load(p3d.plugin_url+'includes/ext/fonts/helvetiker_bold.typeface.json',function(response){p3d.font=response;jQuery('#p3d-cv').hide();p3d.canvas2d=new ThreeDxf.Viewer(dxf,document.getElementById('p3d-viewer'),jQuery('#p3d-cv').width(),jQuery('#p3d-cv').height(),p3d.font);if(p3d.display_mode!='fullscreen'){jQuery('#p3d-model-message').html(p3d.text_2d_instructions);}
if(p3d.laser_cutting_cut=='on'||p3d.laser_cutting_engrave=='on'||p3d.laser_cutting_ignore=='on'){jQuery(cutting_instructions_html).insertBefore('table.variations');}})}
function p3dViewerInit(model,mtl,ext,is_string){var p3d_canvas=document.getElementById('p3d-cv');if(!p3dIs2DFlow(p3d.object)){jQuery('#p3d-viewer canvas').not(document.getElementById('p3d-cv')).remove();jQuery('#p3d-cutting-instructions').remove();jQuery('#p3d-cv').show();}
var p3d_canvas_width=jQuery('#p3d-cv').width()
var p3d_canvas_height=jQuery('#p3d-cv').height()
p3d.mtl=mtl;jQuery('#rotation_x, #rotation_y, #rotation_z').val('0');p3d.renderer=Detector.webgl?new THREE3DP.WebGLRenderer({antialias:true,canvas:p3d_canvas,preserveDrawingBuffer:true}):new THREE3DP.CanvasRenderer({canvas:p3d_canvas});p3d.renderer.setClearColor(parseInt(p3d.background1,16));p3d.renderer.setPixelRatio(window.devicePixelRatio||1);p3d.renderer.setSize(p3d_canvas_width,p3d_canvas_height);if(Detector.webgl){p3d.renderer.gammaInput=true;p3d.renderer.gammaOutput=true;p3d.renderer.shadowMap.enabled=true;p3d.renderer.shadowMap.Type=THREE3DP.PCFSoftShadowMap;}
p3d.camera=new THREE3DP.PerspectiveCamera(35,p3d_canvas_width/p3d_canvas_height,1,1000);p3d.camera.position.set(0,0,0);p3d.cameraTarget=new THREE3DP.Vector3(0,0,0);p3d.scene=new THREE3DP.Scene();if(p3d.group)p3d.scene.remove(p3d.group);if(p3d.model_mesh_rotated)p3d.scene.remove(p3d.model_mesh_rotated);delete(p3d.model_mesh_rotated);p3d.group=new THREE3DP.Group();p3d.group.position.set(0,0,0)
p3d.group.name="group";p3d.scene.add(p3d.group);if(p3d.show_axis=='on'){p3d.axis=new THREE3DP.AxesHelper(300)
p3d.scene.add(p3d.axis);}
ambientLight=new THREE3DP.AmbientLight(0x191919);p3d.scene.add(ambientLight);ambientLight.name="light";if(p3d.show_light_source1=='on')p3d.directionalLight1=p3dMakeLight(1);if(p3d.show_light_source2=='on')p3d.directionalLight2=p3dMakeLight(2);if(p3d.show_light_source3=='on')p3d.directionalLight3=p3dMakeLight(3);if(p3d.show_light_source4=='on')p3d.directionalLight4=p3dMakeLight(4);if(p3d.show_light_source5=='on')p3d.directionalLight5=p3dMakeLight(5);if(p3d.show_light_source6=='on')p3d.directionalLight6=p3dMakeLight(6);if(p3d.show_light_source7=='on')p3d.directionalLight7=p3dMakeLight(7);if(p3d.show_light_source8=='on')p3d.directionalLight8=p3dMakeLight(8);if(p3d.show_light_source9=='on')p3d.directionalLight9=p3dMakeLight(9);if(p3d.show_light_source10=='on')p3d.directionalLight10=p3dMakeLight(10);if(p3d.show_light_source20=='on')p3d.directionalLight20=p3dMakeLight(20);if(p3d.show_light_source30=='on')p3d.directionalLight30=p3dMakeLight(30);if(p3d.show_light_source40=='on')p3d.directionalLight40=p3dMakeLight(40);if(p3d.show_light_source50=='on')p3d.directionalLight50=p3dMakeLight(50);if(p3d.show_light_source60=='on')p3d.directionalLight60=p3dMakeLight(60);if(p3d.show_light_source70=='on')p3d.directionalLight70=p3dMakeLight(70);if(p3d.show_light_source80=='on')p3d.directionalLight80=p3dMakeLight(80);if(p3d.show_light_source90=='on')p3d.directionalLight90=p3dMakeLight(90);p3d.controls=new THREE3DP.OrbitControls(p3d.camera,p3d.renderer.domElement);if(p3d.auto_rotation=='on'){p3d.controls.autoRotate=true;p3d.controls.autoRotateSpeed=(p3d.auto_rotation_direction=='ccw'?-parseInt(p3d.auto_rotation_speed):parseInt(p3d.auto_rotation_speed));}
p3d.controls.addEventListener('start',function(){p3d.controls.autoRotate=false;});if(ext=='stl'){p3d.loader=new THREE3DP.STLLoader();}
else if(ext=='obj'){p3d.loader=new THREE3DP.OBJLoader();}
else if(ext=='dxf'){p3d.loader=new THREE3DP.DXFLoader();}
if(model.length>0&&is_string){if(ext=='dxf'){var parser=new window.DxfParser();model=parser.parseSync(model);var loader=new THREE3DP.FontLoader();loader.load(p3d.plugin_url+'includes/ext/fonts/helvetiker_bold.typeface.json',function(response){p3d.font=response;var model_geometry=p3d.loader.parse(model);p3dModelOnLoad(model_geometry);})}
else{var model_geometry=p3d.loader.parse(model);p3dModelOnLoad(model_geometry);}}
else if(model.length>0&&!is_string){var mtlLoader=new THREE3DP.MTLLoader();mtlLoader.setPath(p3d.upload_url);if(ext=='obj'&&mtl&&mtl.length>0){mtlLoader.load(mtl,function(materials){materials.preload();var objLoader=new THREE3DP.OBJLoader();p3d.loader.setMaterials(materials);p3d.loader.load(model,function(geometry){p3dModelOnLoad(geometry);},function(e){},function(error){p3dShowError(p3d.error_not_found);p3dDisplayQuoteLoading(false);p3dDisplayUserDefinedProgressBar(false);});});}
else{p3d.loader.load(model,function(geometry){p3dModelOnLoad(geometry)},function(e){},function(error){p3dShowError(p3d.error_not_found);p3dDisplayQuoteLoading(false);p3dDisplayUserDefinedProgressBar(false);});}}
if(p3d.display_mode=='fullscreen'){p3dGoFullScreen();jQuery("#rotation_x").bind('keyup mouseup',function(){p3dRotateModel('x',this.value);});jQuery("#rotation_y").bind('keyup mouseup',function(){p3dRotateModel('y',this.value);});jQuery("#rotation_z").bind('keyup mouseup',function(){p3dRotateModel('z',this.value);});if(p3d.scale_keyup=='on'){jQuery("#scale_x").bind('keyup mouseup',function(){p3dUpdateDimensions(this);});jQuery("#scale_y").bind('keyup mouseup',function(){p3dUpdateDimensions(this);});jQuery("#scale_z").bind('keyup mouseup',function(){p3dUpdateDimensions(this);});}}
p3dAnimate();if(p3d.mobile_no_animation=='on'&&jQuery.isMobile){cancelAnimationFrame(p3d.animation_id);}
if(p3dIsDXFFlow())p3d.controls.autoRotate=false;p3dInitGUIElements();window.addEventListener('resize',p3dOnWindowResize,false);}
function p3dInitGUIElements(){p3dInitSelect2();p3d.wizard=jQuery("#p3d-multistep").accWizard({start:1,mode:"wizard",enableScrolling:((p3d.multistep_autoscroll=='yes'||(jQuery.isMobile&&p3d.multistep_autoscroll=='mobile'))?true:false),autoButtons:true,autoButtonsNextClass:'p3d-btn p3d-btn-primary p3d-float-right',autoButtonsPrevClass:'p3d-btn p3d-btn-light',autoButtonsShowSubmit:false,autoButtonsSubmitText:'Submit',autoButtonsEditSubmitText:'Save',stepNumbers:true,stepNumberClass:'p3d-badge p3d-badge-pill p3d-badge-primary p3d-mr-1',beforeNextStep:function(){if(p3d.multistep_model_required=='on'&&typeof(p3d.model_mesh)=='undefined'){alert(p3d.text_multistep_upload_model);return false;}
else return true;}});jQuery('.p3d-bxslider').each(function(i,item){var bxslider=jQuery(this).bxSlider({touchEnabled:false,adaptiveHeight:true});if(typeof(bxslider)!=='undefined')
p3d.bxsliders[i]=bxslider;});if(p3d.tooltip_engine=='tooltipster'){jQuery('.p3d-tooltip').tooltipster({contentAsHTML:true,maxWidth:350,theme:'tooltipster-'+p3d.tooltip_theme});}
else if(p3d.tooltip_engine=='tippy'){jQuery('.p3d-tooltip').each(function(i,item){var tooltip_id=jQuery(this).data('tooltip-content');var template=jQuery(tooltip_id).html();if(typeof(template)!='undefined'){tippy(this,{content:template,allowHTML:true,maxWidth:350,theme:p3d.tooltip_theme});}});}}
function p3dReloadSliders(){var current_material_checked=jQuery('input[name=product_filament]:checked').data('id');var current_printer_checked=jQuery('input[name=product_printer]:checked').data('id');var current_coating_checked=jQuery('input[name=product_coating]:checked').data('id');jQuery(p3d.bxsliders).each(function(){this.reloadSlider();jQuery('#p3d_material_'+current_material_checked).prop('checked',true);jQuery('#p3d_coating_'+current_coating_checked).prop('checked',true);jQuery('#p3d_printer_'+current_printer_checked).prop('checked',true);});}
function p3dMakeTextSprite(message,parameters){if(parameters===undefined)parameters={};var fontface=parameters.hasOwnProperty("fontface")?parameters["fontface"]:"Arial";var fontsize=parameters.hasOwnProperty("fontsize")?parameters["fontsize"]:25;var borderThickness=parameters.hasOwnProperty("borderThickness")?parameters["borderThickness"]:4;var borderColor=parameters.hasOwnProperty("borderColor")?parameters["borderColor"]:{r:0,g:0,b:0,a:1.0};var backgroundColor=parameters.hasOwnProperty("backgroundColor")?parameters["backgroundColor"]:{r:255,g:255,b:255,a:1.0};var textColor=parameters.hasOwnProperty("textColor")?parameters["textColor"]:{r:0,g:0,b:0,a:1.0};var canvas=document.createElement('canvas');var context=canvas.getContext('2d');context.font="Bold "+fontsize+"px "+fontface;var metrics=context.measureText(message);var textWidth=metrics.width;context.fillStyle="rgba("+backgroundColor.r+","+backgroundColor.g+","+backgroundColor.b+","+backgroundColor.a+")";context.strokeStyle="rgba("+borderColor.r+","+borderColor.g+","+borderColor.b+","+borderColor.a+")";context.lineWidth=borderThickness;p3dRoundRect(context,borderThickness/2,borderThickness/2,(textWidth+borderThickness)*1.1,fontsize*1.4+borderThickness,8);context.fillStyle="rgba("+textColor.r+", "+textColor.g+", "+textColor.b+", 1.0)";context.fillText(message,borderThickness,fontsize+borderThickness);var texture=new THREE3DP.Texture(canvas)
texture.needsUpdate=true;var spriteMaterial=new THREE3DP.SpriteMaterial({map:texture});var sprite=new THREE3DP.Sprite(spriteMaterial);sprite.scale.set(0.5*fontsize,0.25*fontsize,0.75*fontsize);return sprite;}
function p3dGetFraction(size){model_dim=[];model_dim.x=p3d.boundingBox.max.x-p3d.boundingBox.min.x;model_dim.y=p3d.boundingBox.max.y-p3d.boundingBox.min.y;model_dim.z=p3d.boundingBox.max.z-p3d.boundingBox.min.z;var max_side=Math.max(model_dim.x,model_dim.y,model_dim.z)
var zero=[];zero.x=zero.y=zero.y=0;var dist=p3dLineLength(p3d.camera.position,zero);var vFOV=p3d.camera.fov*Math.PI/180;var height=2*Math.tan(vFOV/2)*dist;var fraction=height/size;if(fraction<1)fraction=1;return fraction;}
function p3dLineLength(point1,point2){return Math.sqrt(Math.pow((point1.x-point2.x),2)+Math.pow((point1.y-point2.y),2));}
function p3dRoundRect(ctx,x,y,w,h,r)
{ctx.beginPath();ctx.moveTo(x+r,y);ctx.lineTo(x+w-r,y);ctx.quadraticCurveTo(x+w,y,x+w,y+r);ctx.lineTo(x+w,y+h-r);ctx.quadraticCurveTo(x+w,y+h,x+w-r,y+h);ctx.lineTo(x+r,y+h);ctx.quadraticCurveTo(x,y+h,x,y+h-r);ctx.lineTo(x,y+r);ctx.quadraticCurveTo(x,y,x+r,y);ctx.closePath();ctx.fill();ctx.stroke();}
function p3dGetLightIntensity(){var number_of_sources=0;if(p3d.show_light_source1=='on')number_of_sources++;if(p3d.show_light_source2=='on')number_of_sources++;if(p3d.show_light_source3=='on')number_of_sources++;if(p3d.show_light_source4=='on')number_of_sources++;if(p3d.show_light_source5=='on')number_of_sources++;if(p3d.show_light_source6=='on')number_of_sources++;if(p3d.show_light_source7=='on')number_of_sources++;if(p3d.show_light_source8=='on')number_of_sources++;if(p3d.show_light_source9=='on')number_of_sources++;if(p3d.show_light_source10=='on')number_of_sources++;if(p3d.show_light_source20=='on')number_of_sources++;if(p3d.show_light_source30=='on')number_of_sources++;if(p3d.show_light_source40=='on')number_of_sources++;if(p3d.show_light_source50=='on')number_of_sources++;if(p3d.show_light_source60=='on')number_of_sources++;if(p3d.show_light_source70=='on')number_of_sources++;if(p3d.show_light_source80=='on')number_of_sources++;if(p3d.show_light_source90=='on')number_of_sources++;return Math.min((1/number_of_sources)*1.5,1);}
function p3dMakeLight(idx){var intensity=p3dGetLightIntensity();var directionalLight=new THREE3DP.DirectionalLight(0xffffff,intensity);directionalLight.name="light"+idx;return directionalLight;}
function p3dSetupLight(directionalLight,idx){var model_dim=new Array();model_dim.x=p3d.boundingBox.max.x-p3d.boundingBox.min.x;model_dim.y=p3d.boundingBox.max.y-p3d.boundingBox.min.y;model_dim.z=p3d.boundingBox.max.z-p3d.boundingBox.min.z;var max_side=Math.max(model_dim.x,model_dim.y,model_dim.z)
switch(idx){case 1:directionalLight.position.set(max_side*2,max_side*2,0);break;case 2:directionalLight.position.set(max_side*2,max_side*2,max_side*2);break;case 3:directionalLight.position.set(0,max_side*2,max_side*2);break;case 4:directionalLight.position.set(-max_side*2,max_side*2,max_side*2);break;case 5:directionalLight.position.set(-max_side*2,max_side*2,0);break;case 6:directionalLight.position.set(-max_side*2,max_side*2,-max_side*2);break;case 7:directionalLight.position.set(0,max_side*2,-max_side*2);break;case 8:directionalLight.position.set(max_side*2,max_side*2,-max_side*2);break;case 9:directionalLight.position.set(0,max_side*2,0);case 10:directionalLight.position.set(max_side*2,-max_side*2,0);break;case 20:directionalLight.position.set(max_side*2,-max_side*2,max_side*2);break;case 30:directionalLight.position.set(0,-max_side*2,max_side*2);break;case 40:directionalLight.position.set(-max_side*2,-max_side*2,max_side*2);break;case 50:directionalLight.position.set(-max_side*2,-max_side*2,0);break;case 60:directionalLight.position.set(-max_side*2,-max_side*2,-max_side*2);break;case 70:directionalLight.position.set(0,-max_side*2,-max_side*2);break;case 80:directionalLight.position.set(max_side*2,-max_side*2,-max_side*2);break;case 90:directionalLight.position.set(0,-max_side*2,0);break;}
if(Detector.webgl&&p3d.show_shadow=='on'){directionalLight.castShadow=true;p3dMakeShadow(directionalLight);}
p3d.scene.add(directionalLight);}
function p3dModelOnLoad(object){p3d.object=object;geometry=object;if(object.type=='Group'||p3dIs2DFlow(object)){geometry=object.children[0].geometry;}
var postprocessing={enabled:true,onlyAO:false,radius:32,aoClamp:0.25,lumInfluence:0.7};var material=p3dCreateMaterial(p3d.shading);if((object.type=='Group'&&object.children.length>1)||p3dIs2DFlow(object)){p3d.boundingBox=new THREE3DP.Box3().setFromObject(object);}
else{geometry.computeBoundingBox();geometry.computeBoundingSphere();p3d.boundingBox=geometry.boundingBox;geometry.center();}
p3dCreateModel(object,geometry,material,p3d.shading);p3dSetCurrentGlow();var mesh_width=p3d.boundingBox.max.x-p3d.boundingBox.min.x;var mesh_length=p3d.boundingBox.max.y-p3d.boundingBox.min.y;var mesh_height=p3d.boundingBox.max.z-p3d.boundingBox.min.z;var mesh_diagonal=Math.sqrt(mesh_width*mesh_width+mesh_length*mesh_length+mesh_height*mesh_height);if(Detector.webgl){var canvas_width=p3d.renderer.getSize().width;var canvas_height=p3d.renderer.getSize().height;}
else{var canvas_width=jQuery('#p3d-cv').width();var canvas_height=jQuery('#p3d-cv').height();}
var canvas_diagonal=Math.sqrt(canvas_width*canvas_width+canvas_height*canvas_height);var model_dim=new Array();model_dim.x=p3d.boundingBox.max.x-p3d.boundingBox.min.x;model_dim.y=p3d.boundingBox.max.y-p3d.boundingBox.min.y;model_dim.z=p3d.boundingBox.max.z-p3d.boundingBox.min.z;var max_side=Math.max(model_dim.x,model_dim.y,model_dim.z)*1.2
var plane_width=max_side*100;var grid_step=plane_width/100;if(p3d.show_fog=='on'){p3d.scene.background=new THREE3DP.Color(parseInt(p3d.fog_color,16));p3d.scene.fog=new THREE3DP.Fog(parseInt(p3d.fog_color,16),max_side*3,plane_width/2);p3d.scene.fog.oldfar=p3d.scene.fog.far;}
p3d.camera.position.set(max_side*p3d.resize_scale,max_side*p3d.resize_scale,max_side*p3d.resize_scale);p3d.camera.far=plane_width*5;p3d.camera.updateProjectionMatrix();if(Detector.webgl){if(p3d.ground_mirror=='on'){var plane_shininess=2500;var plane_transparent=true;var plane_opacity=0.6;}
else{var plane_shininess=30;var plane_transparent=false;var plane_opacity=1;}
if(jQuery.isMobile){var plane_material=new THREE3DP.MeshLambertMaterial({color:parseInt(p3d.ground_color,16),wireframe:false,flatShading:true,precision:'mediump'});}
else{var plane_material=new THREE3DP.MeshPhongMaterial({color:parseInt(p3d.ground_color,16),transparent:plane_transparent,opacity:plane_opacity,shininess:plane_shininess,precision:'mediump'})}
p3d.plane=new THREE3DP.Mesh(new THREE3DP.PlaneBufferGeometry(plane_width,plane_width),plane_material);p3d.plane.rotation.x=-Math.PI/2;p3d.plane.position.y=p3d.boundingBox.min.z;p3d.plane.receiveShadow=true;p3d.plane.castShadow=true;p3d.plane.name='ground';if(p3d.show_ground=='on'){p3d.scene.add(p3d.plane);}
if(p3d.ground_mirror=='on'){var planeGeo=new THREE3DP.PlaneBufferGeometry(plane_width,plane_width);p3d.mirrorMesh=new THREE3DP.Reflector(planeGeo,{clipBias:0.003,textureWidth:canvas_width,textureHeight:canvas_height,color:0xaaaaaa,recursion:1});p3d.mirrorMesh.position.y=p3d.boundingBox.min.z-1;p3d.mirrorMesh.rotateX(-Math.PI/2);p3d.scene.add(p3d.mirrorMesh);}}
if(p3d.show_grid=='on'&&p3d.plane_color.length>0){var size=plane_width/2,step=grid_step;var grid_geometry=new THREE3DP.Geometry();for(var i=-size;i<=size;i+=step){grid_geometry.vertices.push(new THREE3DP.Vector3(-size,p3d.boundingBox.min.z,i));grid_geometry.vertices.push(new THREE3DP.Vector3(size,p3d.boundingBox.min.z,i));grid_geometry.vertices.push(new THREE3DP.Vector3(i,p3d.boundingBox.min.z,-size));grid_geometry.vertices.push(new THREE3DP.Vector3(i,p3d.boundingBox.min.z,size));}
var grid_material=new THREE3DP.LineBasicMaterial({color:parseInt(p3d.plane_color,16),opacity:0.2});var line=new THREE3DP.LineSegments(grid_geometry,grid_material);line.name="grid";p3d.scene.add(line);p3d.group.add(line);}
if(p3d.show_light_source1=='on')p3dSetupLight(p3d.directionalLight1,1);if(p3d.show_light_source2=='on')p3dSetupLight(p3d.directionalLight2,2);if(p3d.show_light_source3=='on')p3dSetupLight(p3d.directionalLight3,3);if(p3d.show_light_source4=='on')p3dSetupLight(p3d.directionalLight4,4);if(p3d.show_light_source5=='on')p3dSetupLight(p3d.directionalLight5,5);if(p3d.show_light_source6=='on')p3dSetupLight(p3d.directionalLight6,6);if(p3d.show_light_source7=='on')p3dSetupLight(p3d.directionalLight7,7);if(p3d.show_light_source8=='on')p3dSetupLight(p3d.directionalLight8,8);if(p3d.show_light_source9=='on')p3dSetupLight(p3d.directionalLight9,9);if(p3d.show_light_source10=='on')p3dSetupLight(p3d.directionalLight10,1);if(p3d.show_light_source20=='on')p3dSetupLight(p3d.directionalLight20,2);if(p3d.show_light_source30=='on')p3dSetupLight(p3d.directionalLight30,3);if(p3d.show_light_source40=='on')p3dSetupLight(p3d.directionalLight40,4);if(p3d.show_light_source50=='on')p3dSetupLight(p3d.directionalLight50,5);if(p3d.show_light_source60=='on')p3dSetupLight(p3d.directionalLight60,6);if(p3d.show_light_source70=='on')p3dSetupLight(p3d.directionalLight70,7);if(p3d.show_light_source80=='on')p3dSetupLight(p3d.directionalLight80,8);if(p3d.show_light_source90=='on')p3dSetupLight(p3d.directionalLight90,9);var model_dim=new Array();var axis_length=Math.max(mesh_width,mesh_length);var axis_width=Math.min(mesh_width,mesh_length);if(p3d.show_axis=='on'){var materialColor=p3d.model_mesh.material.color.clone();p3d.axis.position.y=p3d.boundingBox.min.z+1
p3d.spritey_x=p3dMakeTextSprite(" X ",{fontsize:p3d.font_size,borderColor:{r:255,g:102,b:0,a:1.0},backgroundColor:{r:255,g:255,b:255,a:0.8}});p3d.spritey_x.position.set((mesh_width/1.5)+10,0,0);p3d.spritey_x.rotation.z=90*Math.PI/180;p3d.spritey_x.rotation.x=-90*Math.PI/180;p3d.scene.add(p3d.spritey_x);p3d.spritey_y=p3dMakeTextSprite(" Y ",{fontsize:p3d.font_size,borderColor:{r:51,g:51,b:255,a:1.0},backgroundColor:{r:255,g:255,b:255,a:0.8}});p3d.spritey_y.position.set(0,0,(mesh_length/1.5)+10);p3d.spritey_y.rotation.z=90*Math.PI/180;p3d.spritey_y.rotation.x=-90*Math.PI/180;p3d.scene.add(p3d.spritey_y);p3d.spritey_z=p3dMakeTextSprite(" Z ",{fontsize:p3d.font_size,borderColor:{r:51,g:204,b:51,a:1.0},backgroundColor:{r:255,g:255,b:255,a:0.8}});p3d.spritey_z.position.set(0,(mesh_height/1.5)+10,0);p3d.spritey_z.rotation.z=90*Math.PI/180;p3d.spritey_z.rotation.x=-90*Math.PI/180;p3d.scene.add(p3d.spritey_z);var fraction=p3d.resize_scale*p3dGetFraction(p3d.font_size);var spritey_scale_x=0.5*p3d.font_size*fraction;var spritey_scale_y=0.25*p3d.font_size*fraction;var spritey_scale_z=0.75*p3d.font_size*fraction;p3d.spritey_x.scale.set(spritey_scale_x,spritey_scale_y,spritey_scale_z);p3d.spritey_y.scale.set(spritey_scale_x,spritey_scale_y,spritey_scale_z);p3d.spritey_z.scale.set(spritey_scale_x,spritey_scale_y,spritey_scale_z);}
if(p3d.pricing=='checkout'&&p3d.new_pricing!='request'){p3dDisplayRequestForm(false);}
else if(p3d.pricing=='request'||p3d.pricing=='request_estimate'){p3dDisplayRequestForm(true);}
p3dDisplayUserDefinedProgressBar(false);p3dInitScaling();p3dDrawPrinterBox();}
function p3dCreateMaterial(model_shading){var model_shininess=p3dGetCurrentShininess()
var model_transparency=p3dGetCurrentTransparency()
var color=new THREE3DP.Color(p3dGetCurrentColor());color.offsetHSL(0,0,-0.1);if(Detector.webgl&&!jQuery.isMobile){if(model_shading=='smooth'){var flat_shading=false;}
else{var flat_shading=true;}
var material=new THREE3DP.MeshPhongMaterial({color:color,specular:model_shininess.specular,shininess:model_shininess.shininess,transparent:true,opacity:model_transparency,wireframe:false,flatShading:flat_shading,precision:'mediump'});}
else{var material=new THREE3DP.MeshLambertMaterial({color:color,transparent:true,opacity:model_transparency,wireframe:false,flatShading:true,precision:'mediump'});}
return material;}
function p3dCreateModel(object,geometry,material,shading){if(!p3dIs2DFlow(object)){var attrib=geometry.getAttribute('position');if(attrib===undefined){throw new Error('a given BufferGeometry object must have a position attribute.');}
var positions=attrib.array;var vertices=[];for(var i=0,n=positions.length;i<n;i+=3){var x=positions[i];var y=positions[i+1];var z=positions[i+2];vertices.push(new THREE3DP.Vector3(x,y,z));}
var faces=[];for(var i=0,n=vertices.length;i<n;i+=3){faces.push(new THREE3DP.Face3(i,i+1,i+2));}
var new_geometry=new THREE3DP.Geometry();new_geometry.vertices=vertices;new_geometry.faces=faces;new_geometry.computeFaceNormals();new_geometry.computeVertexNormals();new_geometry.computeBoundingBox();geometry=new_geometry;geometry.center();if(shading=='smooth'&&Detector.webgl){var smooth_geometry=new THREE3DP.Geometry();smooth_geometry.vertices=vertices;smooth_geometry.faces=faces;smooth_geometry.computeFaceNormals();smooth_geometry.mergeVertices();smooth_geometry.computeVertexNormals();smooth_geometry.computeBoundingBox();geometry=smooth_geometry;p3d.model_mesh=new THREE3DP.Mesh(geometry,material);}
else{p3d.model_mesh=new THREE3DP.Mesh(geometry,material);}}
else{p3d.model_mesh=new THREE3DP.Mesh(geometry,material);}
if(p3d.object.type=='Group'){if(!p3d.mtl||p3d.mtl.length==0){for(var i=0;i<p3d.object.children.length;i++){p3d.object.children[i].material=p3d.model_mesh.material;}}
p3d.object.position.set(0,0,0);p3d.object.rotation.z=90*Math.PI/180;p3d.object.rotation.x=-90*Math.PI/180;p3d.object.name="object";p3d.initial_rotation_x=p3d.object.rotation.x;p3d.initial_rotation_y=p3d.object.rotation.y;p3d.initial_rotation_z=p3d.object.rotation.z;if(Detector.webgl){for(var i=0;i<p3d.object.children.length;i++){p3d.object.children[i].castShadow=true;p3d.object.children[i].receiveShadow=true;}}
p3d.scene.add(p3d.object);p3d.group.add(p3d.object);}
else if(p3dIs2DFlow(p3d.object)){for(var i=0;i<p3d.object.children.length;i++){p3d.object.children[i].material=p3d.model_mesh.material;}
var model_length=p3d.boundingBox.max.x-p3d.boundingBox.min.x;var model_width=p3d.boundingBox.max.y-p3d.boundingBox.min.y;p3d.object.position.set(0,-1,0);p3d.object.rotation.z=90*Math.PI/180;p3d.object.rotation.x=-90*Math.PI/180;p3d.object.name="object2D";p3d.initial_rotation_x=p3d.object.rotation.x;p3d.initial_rotation_y=p3d.object.rotation.y;p3d.initial_rotation_z=p3d.object.rotation.z;if(Detector.webgl){for(var i=0;i<p3d.object.children.length;i++){p3d.object.children[i].castShadow=false;p3d.object.children[i].receiveShadow=false;}}
new THREE3DP.Box3().setFromObject(p3d.object).getCenter(p3d.object.position).multiplyScalar(-1);p3d.scene.add(p3d.object);p3d.group.add(p3d.object);}
else{p3d.model_mesh.position.set(0,0,0);p3d.model_mesh.rotation.z=90*Math.PI/180;p3d.model_mesh.rotation.x=-90*Math.PI/180;p3d.model_mesh.name="model";p3d.initial_rotation_x=p3d.model_mesh.rotation.x;p3d.initial_rotation_y=p3d.model_mesh.rotation.y;p3d.initial_rotation_z=p3d.model_mesh.rotation.z;if(Detector.webgl){p3d.model_mesh.castShadow=true;p3d.model_mesh.receiveShadow=true;}
p3d.scene.add(p3d.model_mesh);p3d.group.add(p3d.model_mesh);}
var p3dRangeSlider=document.getElementById('p3d-scale');if(typeof(p3dRangeSlider)!=='undefined'&&p3dRangeSlider.noUiSlider){p3dRangeSlider.noUiSlider.set(p3d.resize_scale*100);}}
function p3dMakeShadow(directionalLight){if(p3d.object&&typeof(p3d.object.type!=='undefined')&&p3dIs2DFlow(p3d.object)){return;}
if(p3d.show_shadow=='0')return;var model_dim=new Array();model_dim.x=p3d.boundingBox.max.x-p3d.boundingBox.min.x;model_dim.y=p3d.boundingBox.max.y-p3d.boundingBox.min.y;model_dim.z=p3d.boundingBox.max.z-p3d.boundingBox.min.z;var max_side=Math.max(model_dim.x,model_dim.y,model_dim.z)
var bias=-0.00001;var d=max_side*p3d.resize_scale;directionalLight.shadow.camera.left=directionalLight.shadow.camera.left=-d;directionalLight.shadow.camera.right=directionalLight.shadow.camera.right=d;directionalLight.shadow.camera.top=directionalLight.shadow.camera.top=d;directionalLight.shadow.camera.bottom=directionalLight.shadow.camera.bottom=-d;directionalLight.shadow.camera.near=directionalLight.shadow.camera.near=1;directionalLight.shadow.camera.far=directionalLight.shadow.camera.far=p3d.camera.far;directionalLight.shadow.mapSize.width=directionalLight.shadow.mapSize.width=2048;directionalLight.shadow.mapSize.height=directionalLight.shadow.mapSize.height=2048;directionalLight.shadow.bias=directionalLight.shadow.bias=bias;if(directionalLight.shadow.map){directionalLight.shadow.map.dispose();directionalLight.shadow.map=null;}}
function p3dOnWindowResize(){if(p3d.display_mode=='fullscreen'){p3d.camera.aspect=window.innerWidth/window.innerHeight;p3d.camera.updateProjectionMatrix();p3d.renderer.setSize(window.innerWidth,window.innerHeight);}
else{if(jQuery('div.p3d-images').length>0){var p3d_canvas_width=jQuery('div.p3d-images').width()}
else{var p3d_canvas_width=jQuery('div.images').width()}
var p3d_canvas_height=jQuery('#p3d-viewer').width()
p3d.camera.aspect=p3d_canvas_width/p3d_canvas_height;p3d.camera.updateProjectionMatrix();p3d.renderer.setSize(p3d_canvas_width,p3d_canvas_height);}
p3dCanvasDetails();}
function p3dCanvasDetails(){var canvas=jQuery('#p3d-viewer canvas:visible');if(typeof(canvas)=='undefined')return;if(typeof(canvas.position())!='undefined'){jQuery("#canvas-stats").css({top:canvas.position().top,left:canvas.position().left+10});}
if(p3d.display_mode=='fullscreen'){jQuery('#canvas-stats').css('left',(window.innerWidth-200)+'px')}}
function p3dGoFullScreen(){if(p3d.is_fullscreen==1)return;jQuery('#p3d-viewer').appendTo('#p3d-fullscreen');document.body.style.overflow='hidden';window.scrollTo(0,0);jQuery(window).scroll(function(){window.scrollTo(0,0);})
p3d.camera.aspect=window.innerWidth/window.innerHeight;p3d.camera.updateProjectionMatrix();p3d.renderer.setSize(window.innerWidth,window.innerHeight);p3dCanvasDetails();jQuery('#wpadminbar').hide()
var p3dRangeSlider=document.getElementById('p3d-scale');if(typeof(p3dRangeSlider)!=='undefined'&&p3dRangeSlider.noUiSlider){p3dRangeSlider.noUiSlider.destroy();}
jQuery('div.woocommerce-message').appendTo('#p3d-sidepanel-left')
jQuery('div.summary, div.zo-summary, .product-single .col-sm-6:last, div.p3d-details').appendTo('#p3d-sidepanel-left').css('margin-right','10px').css('margin-left','10px')
jQuery('div.p3d-details').css('float','none');jQuery('div.p3d-details').css('width','auto');jQuery('.variations_button button').removeClass('disabled');var left_panel_width=350;jQuery("#p3d-sidepanel-left").buildMbExtruder({position:"left",positionFixed:false,hidePanelsOnClose:false,accordionPanels:false,closeOnExternalClick:false,width:left_panel_width,top:0,extruderOpacity:.8,onExtOpen:function(){},onExtContentLoad:function(){},onExtClose:function(){jQuery("#p3d-sidepanel-left .extruder-content").css('overflow-y','scroll');},slideTimer:1000});jQuery("#p3d-sidepanel-left .extruder-content").css('height','100%');jQuery("#p3d-sidepanel-left .extruder-content").css('overflow-y','scroll');jQuery("#p3d-sidepanel-left .extruder-content").css('overflow-x','hidden');jQuery("#p3d-sidepanel-left .text").css('overflow-x','hidden');jQuery("#p3d-sidepanel-left .flap").css('top',jQuery("#p3d-viewer canvas:visible").position().top+jQuery("#p3d-viewer canvas:visible").height()/2-jQuery("#p3d-sidepanel-left .flap").height());jQuery('#p3d-sidepanel-left .ext_wrapper').css('left','0px');jQuery('#canvas-stats').css('left',(window.innerWidth-300)+'px');jQuery('.p3d-model-message').css('margin-left',left_panel_width+'px');jQuery('.p3d-panel-top').appendTo('#p3d-sidepanel-top')
jQuery("#p3d-sidepanel-top").buildMbExtruder({position:"top",width:350,positionFixed:false,hidePanelsOnClose:false,accordionPanels:false,closeOnExternalClick:false,extruderOpacity:.8,onExtOpen:function(){},onExtContentLoad:function(){},onExtClose:function(){},slideTimer:1000});jQuery('.p3d-panel-right').appendTo('#p3d-sidepanel-right')
jQuery("#p3d-sidepanel-right").buildMbExtruder({position:"right",width:300,top:110,positionFixed:false,hidePanelsOnClose:false,accordionPanels:false,closeOnExternalClick:false,extruderOpacity:.8,onExtOpen:function(){},onExtContentLoad:function(){},onExtClose:function(){},slideTimer:1000});p3dSelectDefaults();jQuery("#p3d-sidepanel-right .extruder-content").css('height','auto');jQuery("#p3d-sidepanel-right .extruder-content").css('min-height','250px');jQuery("#p3d-sidepanel-right .flip_label").css('width','30px');jQuery("#p3d-sidepanel-right").css('top',jQuery("#p3d-viewer canvas:visible").position().top+jQuery("#p3d-viewer canvas:visible").height()/2-jQuery("#p3d-sidepanel-right .extruder-content").height()/2-10);jQuery("#p3d-sidepanel-left").openMbExtruder();jQuery('nav.applePie').easyPie({slideTop:false});jQuery('nav.applePie ul.nav').show();p3dInitStellarNav();p3dInitScaling();p3d.is_fullscreen=1;p3dBindSubmit();}
function p3dAnimate(){if(p3dIsDXFFlow())return;p3d.animation_id=window.requestAnimationFrame(p3dAnimate);p3d.group.rotation.y+=(p3d.targetRotation-p3d.group.rotation.y)*0.05;p3d.controls.update();p3dRender();}
function p3dRender(){if(Detector.webgl&&p3d.ground_mirror=='on'&&typeof(p3d.groundMirror)!=='undefined'){p3d.groundMirror.render();}
p3d.renderer.render(p3d.scene,p3d.camera);}
function p3dBoxFitsBox(dim_x1,dim_y1,dim_z1,dim_x2,dim_y2,dim_z2){var fits=true;var min_dim1=Math.min(dim_x1,dim_y1,dim_z1);var min_dim2=Math.min(dim_x2,dim_y2,dim_z2);var max_dim1=Math.max(dim_x1,dim_y1,dim_z1);var max_dim2=Math.max(dim_x2,dim_y2,dim_z2);var diag1=Math.sqrt(dim_x1+dim_y1+dim_z1);var diag2=Math.sqrt(dim_x2+dim_y2+dim_z2);var median1=(dim_x1+dim_y1+dim_z1)/3;var median2=(dim_x2+dim_y2+dim_z2)/3;if(min_dim1<=min_dim2&&max_dim1<=max_dim2&&diag1<=diag2)
fits=true;else
fits=false;fits=window.wp.event_manager.applyFilters('3dprint.boxFitsBox',fits,dim_x1,dim_y1,dim_z1,dim_x2,dim_y2,dim_z2);return fits;}
function p3dBoxFitsBoxXY(dim_x1,dim_y1,dim_x2,dim_y2){var fits=true;var min_dim1=Math.min(dim_x1,dim_y1);var min_dim2=Math.min(dim_x2,dim_y2);var max_dim1=Math.max(dim_x1,dim_y1);var max_dim2=Math.max(dim_x2,dim_y2);var diag1=Math.sqrt(dim_x1+dim_y1);var diag2=Math.sqrt(dim_x2+dim_y2);if(min_dim1<=min_dim2&&max_dim1<=max_dim2)
fits=true;else
fits=false;fits=window.wp.event_manager.applyFilters('3dprint.boxFitsBoxXY',fits,dim_x1,dim_y1,dim_x2,dim_y2);return fits;}
function p3dShowError(message){var decoded=jQuery('#p3d-console').html(message).text();jQuery('#p3d-console').html(decoded).show();if(p3d.display_mode=='fullscreen'){alert(decoded);}
window.wp.event_manager.doAction('3dprint.showError');}
function p3dInitProgressButton(){if(!p3dDetectIE()){window.p3dProgressButton=new ProgressButton(document.getElementById('p3d-pickfiles'),{callback:function(instance){interval=setInterval(function(){instance._setProgress(p3d.bar_progress);if(parseInt(p3d.bar_progress)===1){instance._stop(1);clearInterval(interval);}},200);}});}}
jQuery(document).ready(function(){p3dInitProgressButton();if(p3d.display_mode!='fullscreen'){jQuery('nav.applePie').easyPie();jQuery('nav.applePie ul.nav').show();}});function p3dChangeModelColor(model_color){if(!p3d.model_mesh)return;p3d.model_mesh.material.color.set(model_color);p3d.model_mesh.material.color.offsetHSL(0,0,-0.1);if(Detector.webgl){var model_shininess=p3dGetCurrentShininess();p3d.model_mesh.material.shininess=model_shininess.shininess;if(typeof(p3d.model_mesh.material.specular)!=='undefined'){p3d.model_mesh.material.specular.set(model_shininess.specular);}
var model_transparency=p3dGetCurrentTransparency();p3d.model_mesh.material.opacity=model_transparency;p3dSetCurrentGlow();if(p3d.object&&(p3d.object.type=='Group'||p3dIs2DFlow(p3d.object))&&!(p3d.mtl&&p3d.mtl.length>0)){for(var i=0;i<p3d.object.children.length;i++){p3d.object.children[i].material=p3d.model_mesh.material;}}}};function p3dGetCurrentColor(){var model_color='#ffffff';if(typeof(jQuery('input[name=product_coating]:checked').data('color'))!=='undefined'&&jQuery('input[name=product_coating]:checked').data('color').length>0){model_color=jQuery('input[name=product_coating]:checked').data('color');}
else if(typeof(jQuery('input[name=product_filament]:checked').data('color'))!=='undefined'){model_color=jQuery('input[name=product_filament]:checked').data('color');}
return model_color;}
function p3dGetCurrentShininess(){var model_shininess='plastic';if(typeof(jQuery('input[name=product_coating]:checked').data('shininess'))!=='undefined'&&jQuery('input[name=product_coating]:checked').data('shininess').length>0&&jQuery('input[name=product_coating]:checked').data('shininess')!='none')
model_shininess=jQuery('input[name=product_coating]:checked').data('shininess');else if(typeof(jQuery('input[name=product_filament]:checked').data('shininess'))!=='undefined'){model_shininess=jQuery('input[name=product_filament]:checked').data('shininess');}
switch(model_shininess){case'plastic':var shininess=150;var specular=0x111111;break;case'wood':var shininess=15;var specular=0x111111;break;case'metal':var shininess=500;var specular=0xc9c9c9;break;default:var shininess=150;var specular=0x111111;}
return{shininess:shininess,specular:specular};}
function p3dGetCurrentTransparency(){var model_transparency='opaque';if(typeof(jQuery('input[name=product_coating]:checked').data('transparency'))!=='undefined'&&jQuery('input[name=product_coating]:checked').data('transparency').length>0&&jQuery('input[name=product_coating]:checked').data('transparency')!='none')
model_transparency=jQuery('input[name=product_coating]:checked').data('transparency');else if(typeof(jQuery('input[name=product_filament]:checked').data('transparency'))!=='undefined'){model_transparency=jQuery('input[name=product_filament]:checked').data('transparency');}
switch(model_transparency){case'opaque':var transparency=1;break;case'resin':var transparency=0.8;break;case'glass':var transparency=0.6;break;default:var transparency=1;}
return transparency;}
function p3dGetCurrentGlowColor(){var model_glow='';if(typeof(jQuery('input[name=product_coating]:checked').data('glow'))!=='undefined'&&jQuery('input[name=product_coating]:checked').data('glow')=='1'){model_glow=jQuery('input[name=product_coating]:checked').data('color');}
else if(jQuery('input[name=product_filament]:checked').data('glow')=='1'){model_glow=jQuery('input[name=product_filament]:checked').data('color');}
else{model_glow='';}
return model_glow;}
function p3dSetCurrentGlow(){if(!Detector.webgl)return;if(p3d.mtl&&p3d.mtl.length>0)return;if(typeof(p3d.glow_mesh)!=='undefined')p3d.model_mesh.remove(p3d.glow_mesh.object3d);var glow_color=p3dGetCurrentGlowColor();if(glow_color.length>0){var model_dim=new Array();model_dim.x=p3d.boundingBox.max.x-p3d.boundingBox.min.x;model_dim.y=p3d.boundingBox.max.y-p3d.boundingBox.min.y;model_dim.z=p3d.boundingBox.max.z-p3d.boundingBox.min.z;var min_side=Math.max(model_dim.x,model_dim.y,model_dim.z)
p3d.glow_mesh=new THREEx.GeometricGlowMesh(p3d.model_mesh,0.01,min_side/20);p3d.model_mesh.add(p3d.glow_mesh.object3d);p3d.glow_mesh.position=p3d.model_mesh.position;var insideUniforms=p3d.glow_mesh.insideMesh.material.uniforms
insideUniforms.glowColor.value.set(glow_color)
var outsideUniforms=p3d.glow_mesh.outsideMesh.material.uniforms
outsideUniforms.glowColor.value.set(glow_color)}
else{}}
function p3dSelectCuttingInstructions(obj){p3dAnalyseModel(p3d.filename);}
function p3dSelectFilament(material_id){var obj=jQuery('#p3d_material_'+material_id)
if(jQuery(obj).prop('disabled')){jQuery(obj).prop('checked',false);jQuery(obj).attr('checked',false);return false;}
var old_material=jQuery('#p3d_material_'+jQuery('#pa_p3d_material').val())
var new_material=jQuery(obj);jQuery('input[name=product_filament]:checked').prop('checked',false);jQuery(obj).prop('checked',true);jQuery('#pa_p3d_material').val(material_id);jQuery('select.p3d-dropdown-searchable[name=product_filament]').val(material_id);p3dInitSelect2();if(jQuery(obj).closest('ul.p3d-bxslider').length>0){jQuery(obj).closest('ul.p3d-bxslider').find('li').removeClass('p3d-selected-li');jQuery(obj).addClass('p3d-selected-li');}
p3dChangeModelColor(p3dGetCurrentColor());jQuery.cookie('p3d_material',material_id,{expires:parseInt(p3d.cookie_expire)});if(p3d.selection_order=='materials_printers'){var compatible_printers=new Array();jQuery('input[name=product_printer]').each(function(){var materials=jQuery(this).data('materials')+'';var materials_array=materials.split(',');if(materials.length>0&&jQuery.inArray(material_id+'',materials_array)==-1){jQuery(this).prop('disabled',true);jQuery(this).prop('checked',false);jQuery(this).css('visibility','hidden');jQuery(this).parent().find('.p3d-dropdown-item').addClass('p3d-inactive-dropdown-item');jQuery(this).parent().find('.p3d-slider-item').addClass('p3d-inactive-slider-item');jQuery('select.p3d-dropdown-searchable[name=product_printer]').find('option[data-id='+jQuery(this).data('id')+']').prop('disabled',true);p3dInitSelect2();}
else{jQuery(this).prop('disabled',false);jQuery(this).css('visibility','visible');jQuery(this).parent().find('.p3d-dropdown-item').removeClass('p3d-inactive-dropdown-item');jQuery(this).parent().find('.p3d-slider-item').removeClass('p3d-inactive-slider-item');jQuery('select.p3d-dropdown-searchable[name=product_printer]').find('option[data-id='+jQuery(this).data('id')+']').prop('disabled',false);p3dInitSelect2();compatible_printers.push(this);}});var selected=false;for(var i=0;i<compatible_printers.length;i++){if(jQuery('#pa_p3d_printer').val()==jQuery(compatible_printers[i]).data('id'))
selected=true;}
if(!selected&&compatible_printers.length>0){jQuery(compatible_printers[0]).prop('checked',true);p3dSelectPrinter(jQuery(compatible_printers[0]).data('id'));}}
var compatible_coatings=new Array();jQuery('input[name=product_coating]').each(function(){var materials=jQuery(this).data('materials')+'';var materials_array=materials.split(',');if(materials.length>0&&jQuery.inArray(material_id+'',materials_array)==-1){jQuery(this).prop('disabled',true);jQuery(this).prop('checked',false);jQuery(this).css('visibility','hidden');jQuery(this).parent().find('.p3d-dropdown-item').addClass('p3d-inactive-dropdown-item');if(jQuery(this).parent().hasClass('p3d-color-item'))jQuery(this).parent().addClass('p3d-inactive-color-item');jQuery(this).parent().find('.p3d-slider-item').addClass('p3d-inactive-slider-item');jQuery('select.p3d-dropdown-searchable[name=product_coating]').find('option[data-id='+jQuery(this).data('id')+']').prop('disabled',true);p3dInitSelect2();}
else{jQuery(this).prop('disabled',false);jQuery(this).css('visibility','visible');jQuery(this).parent().find('.p3d-dropdown-item').removeClass('p3d-inactive-dropdown-item');if(jQuery(this).parent().hasClass('p3d-color-item'))jQuery(this).parent().removeClass('p3d-inactive-color-item');jQuery(this).parent().find('.p3d-slider-item').removeClass('p3d-inactive-slider-item');jQuery('select.p3d-dropdown-searchable[name=product_coating]').find('option[data-id='+jQuery(this).data('id')+']').prop('disabled',false);p3dInitSelect2();compatible_coatings.push(this);}});var selected=false;for(var i=0;i<compatible_coatings.length;i++){if(jQuery('#pa_p3d_coating').val()==jQuery(compatible_coatings[i]).data('id'))
selected=true;}
if(!selected&&compatible_coatings.length>0){jQuery(compatible_coatings[0]).prop('checked',true);p3dSelectCoating(jQuery(compatible_coatings[0]).data('id'));}
var compatible_postprocessings=new Array();jQuery('input[name^=product_postprocessing]').each(function(){var materials=jQuery(this).data('materials')+'';var materials_array=materials.split(',');if(materials.length>0&&jQuery.inArray(material_id+'',materials_array)==-1){jQuery(this).prop('disabled',true);jQuery(this).prop('checked',false);jQuery(this).css('visibility','hidden');jQuery(this).parent().find('.p3d-dropdown-item').addClass('p3d-inactive-dropdown-item');if(jQuery(this).parent().hasClass('p3d-color-item'))jQuery(this).parent().addClass('p3d-inactive-color-item');jQuery(this).parent().find('.p3d-slider-item').addClass('p3d-inactive-slider-item');jQuery('select.p3d-dropdown-searchable[name=product_postprocessing]').find('option[data-id='+jQuery(this).data('id')+']').prop('disabled',true);p3dInitSelect2();}
else{jQuery(this).prop('disabled',false);jQuery(this).css('visibility','visible');jQuery(this).parent().find('.p3d-dropdown-item').removeClass('p3d-inactive-dropdown-item');if(jQuery(this).parent().hasClass('p3d-color-item'))jQuery(this).parent().removeClass('p3d-inactive-color-item');jQuery(this).parent().find('.p3d-slider-item').removeClass('p3d-inactive-slider-item');jQuery('select.p3d-dropdown-searchable[name=product_postprocessing]').find('option[data-id='+jQuery(this).data('id')+']').prop('disabled',false);p3dInitSelect2();compatible_postprocessings.push(this);}});var postprocessing_string='';var postprocessing_name_string='';var postprocessing_array=[];var postprocessing_name_array=[];var postprocessing_color='';jQuery('input[name^=product_postprocessing]').each(function(){if(jQuery(this).prop('checked')){postprocessing_array.push(jQuery(this).data('id'));postprocessing_name_array.push(jQuery(this).data('name'));postprocessing_color=jQuery(obj).data('color');}});postprocessing_string=postprocessing_array.join(',');postprocessing_name_string=postprocessing_name_array.join(', ');var postprocessing_name=postprocessing_name_string;if(typeof(document.getElementById('p3d-postprocessing-name'))!=='undefined'){jQuery('#p3d-postprocessing-name').html(p3d.text_postprocessing+' : <div style="background-color:'+postprocessing_color+';'+(postprocessing_color.length==0?"display:none;":"")+'" class="p3d-color-sample"></div>'+postprocessing_name);}
var material_name=jQuery(obj).data('name');var material_color=jQuery(obj).data('color');if(typeof(document.getElementById('p3d-material-name'))!=='undefined'){jQuery('#p3d-material-name').html(p3d.text_material+' : <div style="background-color:'+material_color+'" class="p3d-color-sample"></div>'+material_name);}
if(jQuery(obj).hasClass('p3d-color-item')){jQuery(obj).closest('.p3d-fieldset').find('.p3d-color-item').removeClass('p3d-active');jQuery(obj).addClass('p3d-active');}
p3dGetStats();if(old_material.length>0&&jQuery('input:radio[name=product_printer]:checked').data('type')=='laser_cutting'){if(new_material.data('laser-cutting-speed')!=old_material.data('laser-cutting-speed')||new_material.data('laser-cutting-piercing-time')!=old_material.data('laser-cutting-piercing-time')){p3dAnalyseModel(jQuery('#pa_p3d_model').val());}}
p3dCheckPrintability();window.wp.event_manager.doAction('3dprint.selectFilament');}
jQuery(document).ready(function(){if(typeof(p3dHideInactiveGroups)=='function'){p3dHideInactiveGroups();if(typeof(window.wp.event_manager)!='undefined'){window.wp.event_manager.addAction('3dprint.selectFilament',p3dHideInactiveGroups,10);}}});if(typeof(p3dHideInactiveGroups)=='undefined'){function p3dHideInactiveGroups(){jQuery('.p3d-group').each(function(){var total_items=jQuery(this).find('li.p3d-color-item').length;var total_inactive_items=jQuery(this).find('li.p3d-color-item.p3d-inactive-color-item').length;if(total_items==total_inactive_items){jQuery(this).hide();}
else{jQuery(this).show();}});}}
function p3dSelectCoating(coating_id){var obj=jQuery('#p3d_coating_'+coating_id);if(jQuery(obj).prop('disabled'))return false;jQuery('input[name=product_coating]:checked').prop('checked',false);if(jQuery(obj).closest('ul.p3d-bxslider').length>0){jQuery(obj).closest('ul.p3d-bxslider').find('li').removeClass('p3d-selected-li');jQuery(obj).addClass('p3d-selected-li');}
jQuery(obj).prop('checked',true);jQuery('#pa_p3d_coating').val(coating_id);if(typeof(jQuery(obj).data('color'))!=='undefined'&&jQuery(obj).data('color').length>0){p3dChangeModelColor(jQuery(obj).data('color'));}
else{p3dChangeModelColor(p3dGetCurrentColor());}
jQuery.cookie('p3d_coating',coating_id,{expires:parseInt(p3d.cookie_expire)});jQuery('select.p3d-dropdown-searchable[name=product_coating]').val(coating_id);p3dInitSelect2();var coating_name=jQuery(obj).data('name');var material_color=jQuery(obj).data('color');if(typeof(document.getElementById('p3d-coating-name'))!=='undefined'){jQuery('#p3d-coating-name').html(p3d.text_coating+' : <div style="background-color:'+material_color+'" class="p3d-color-sample"></div>'+coating_name);}
if(jQuery(obj).hasClass('p3d-color-item')){jQuery(obj).closest('.p3d-fieldset').find('.p3d-color-item').removeClass('p3d-active');jQuery(obj).addClass('p3d-active');}
p3dGetStats();window.wp.event_manager.doAction('3dprint.selectCoating');}
function p3dSelectPostprocessing(postprocessing_id){var postprocessing_string='';var postprocessing_name_string='';var postprocessing_array=[];var postprocessing_name_array=[];var material_color='';if(typeof(postprocessing_id)=='number'||typeof(postprocessing_id)=='string'){var obj=jQuery('#p3d_postprocessing_'+postprocessing_id);if(jQuery(obj).prop('disabled'))return false;if(jQuery(obj).prop('checked')){jQuery(obj).prop('checked',false);}
else{jQuery(obj).prop('checked',true);}}
else if(typeof(postprocessing_id)=='object'){jQuery('input[name^=product_postprocessing]:checked').each(function(){jQuery(this).prop('checked',false)});jQuery.each(postprocessing_id,function(index,value){var obj=jQuery('#p3d_postprocessing_'+value);if(jQuery(obj).prop('disabled'))return;if(jQuery(obj).prop('checked')){jQuery(obj).prop('checked',false);}
else{jQuery(obj).prop('checked',true);}})
jQuery('#product_postprocessing_select2').val(postprocessing_id);if(jQuery('#product_postprocessing_select2').length>0){}}
jQuery('input[name^=product_postprocessing]:checked').each(function(){postprocessing_array.push(jQuery(this).data('id'));postprocessing_name_array.push(jQuery(this).data('name'));});postprocessing_string=postprocessing_array.join(',');postprocessing_name_string=postprocessing_name_array.join(', ');jQuery('#pa_p3d_postprocessing').val(postprocessing_string);if(typeof(jQuery(obj).data('color'))!=='undefined'&&jQuery(obj).data('color').length>0){p3dChangeModelColor(jQuery(obj).data('color'));}
else{p3dChangeModelColor(p3dGetCurrentColor());}
jQuery.cookie('p3d_postprocessing',postprocessing_string,{expires:parseInt(p3d.cookie_expire)});var postprocessing_name=postprocessing_name_string;var material_color=jQuery(obj).data('color');if(typeof(material_color)=='undefined')material_color='';if(jQuery('#p3d-postprocessing-name').length>0){jQuery('#p3d-postprocessing-name').html(p3d.text_postprocessing+' : <div style="background-color:'+material_color+';'+(material_color.length==0?"display:none;":"")+'" class="p3d-color-sample"></div>'+postprocessing_name);}
p3dGetStats();window.wp.event_manager.doAction('3dprint.selectPostprocessing');}
function p3dSelectUnit(product_unit){var obj=jQuery("input[name=p3d_unit][value="+product_unit+"]");jQuery(obj).prop('checked',true);jQuery('#p3d_unit').val(product_unit);jQuery('#pa_p3d_unit').val(product_unit);if(product_unit=='inch'){p3d.resize_scale=2.54*10;}
else{p3d.resize_scale=1;}
if(p3d.model_mesh){p3dResizeModel(p3d.resize_scale);}
jQuery.cookie('p3d_unit',product_unit,{expires:parseInt(p3d.cookie_expire)});p3dGetStats();p3dInitScaling();p3dAnalyseModel(jQuery('#pa_p3d_model').val());window.wp.event_manager.doAction('3dprint.selectUnit');}
function p3dSelectPrinter(printer_id){var obj=jQuery('#p3d_printer_'+printer_id)
if(jQuery(obj).prop('disabled'))return false;p3d.printer_error=false;if(jQuery(obj).closest('ul.p3d-bxslider').length>0){jQuery(obj).closest('ul.p3d-bxslider').find('li').removeClass('p3d-selected-li');jQuery(obj).addClass('p3d-selected-li');}
var old_printer=jQuery('#p3d_printer_'+jQuery('#pa_p3d_printer').val())
var new_printer=jQuery(obj);var materials=jQuery(obj).data('materials')+'';var materials_array=materials.split(',');jQuery(obj).prop('checked',true);jQuery('#pa_p3d_printer').val(printer_id);jQuery.cookie('p3d_printer',printer_id,{expires:parseInt(p3d.cookie_expire)});jQuery('select.p3d-dropdown-searchable[name=product_printer]').val(printer_id);p3dInitSelect2();if(p3d.selection_order=='printers_materials'){var compatible_materials=new Array();jQuery('input[name=product_filament]').each(function(){var material_id=jQuery(this).data('id');if(materials.length>0&&jQuery.inArray(material_id+'',materials_array)==-1){jQuery(this).prop('disabled',true);jQuery(this).prop('checked',false);jQuery(this).css('visibility','hidden');jQuery(this).parent().find('.p3d-dropdown-item').addClass('p3d-inactive-dropdown-item');if(jQuery(this).parent().hasClass('p3d-color-item'))jQuery(this).parent().addClass('p3d-inactive-color-item');jQuery(this).parent().find('.p3d-slider-item').addClass('p3d-inactive-slider-item');jQuery('select.p3d-dropdown-searchable[name=product_filament]').find('option[data-id='+jQuery(this).data('id')+']').prop('disabled',true);p3dInitSelect2();}
else{jQuery(this).prop('disabled',false);jQuery(this).css('visibility','visible');jQuery(this).parent().find('.p3d-dropdown-item').removeClass('p3d-inactive-dropdown-item');if(jQuery(this).parent().hasClass('p3d-color-item'))jQuery(this).parent().removeClass('p3d-inactive-color-item');jQuery(this).parent().find('.p3d-slider-item').removeClass('p3d-inactive-slider-item');jQuery('select.p3d-dropdown-searchable[name=product_filament]').find('option[data-id='+jQuery(this).data('id')+']').prop('disabled',false);p3dInitSelect2();compatible_materials.push(this);}});var selected=false;for(var i=0;i<compatible_materials.length;i++){if(jQuery('#pa_p3d_material').val()==jQuery(compatible_materials[i]).data('id'))
selected=true;}
if(!selected&&compatible_materials.length>0){jQuery(compatible_materials[0]).prop('checked',true);p3dSelectFilament(jQuery(compatible_materials[0]).data('id'));}}
var printer_name=jQuery(obj).data('name');var printer_type=jQuery(obj).data('type')
if(typeof(document.getElementById('p3d-printer-name'))!=='undefined'){jQuery('#p3d-printer-name').html(p3d.text_printer+' : '+printer_name);}
p3dDrawPrinterBox();if(jQuery('#pa_p3d_infill').length>0){var compatible_infills=new Array();jQuery('input[name=product_infill]').each(function(){var infills=jQuery(obj).data('infills')+'';var infills_array=infills.split(',');if(infills.length>0&&jQuery.inArray(jQuery(this).val()+'',infills_array)==-1){jQuery(this).prop('disabled',true);jQuery(this).prop('checked',false);jQuery(this).hide();jQuery(this).parent().find('.p3d-dropdown-item').hide();jQuery('select.p3d-dropdown-searchable[name=product_infill]').find('option[data-id='+jQuery(this).data('id')+']').prop('disabled',true);p3dInitSelect2();}
else{jQuery(this).prop('disabled',false);if(!jQuery(this).hasClass('p3d-infill-dropdown'))
jQuery(this).show();jQuery(this).parent().find('.p3d-dropdown-item').show();jQuery('select.p3d-dropdown-searchable[name=product_infill]').find('option[data-id='+jQuery(this).data('id')+']').prop('disabled',false);p3dInitSelect2();compatible_infills.push(this);}});var selected=false;if(!selected&&compatible_infills.length>0){var default_infill=jQuery(obj).data('default-infill');if(jQuery('input[name=get_infill]').length>0&&jQuery('input[name=get_infill]').val().length>0){var default_infill_compatible=false;for(var i=0;i<compatible_infills.length;i++){if(jQuery(compatible_infills[i]).val()==jQuery('input[name=get_infill]').val()){default_infill_compatible=true;}}
if(default_infill_compatible){default_infill=parseInt(jQuery('input[name=get_infill]').val());}}
for(var i=0;i<compatible_infills.length;i++){if(jQuery(compatible_infills[i]).val()==default_infill){jQuery(compatible_infills[i]).prop('checked',true);p3dSelectInfill(jQuery(compatible_infills[i]).data('id'));}}}}
if(printer_type=='other'){jQuery('#infill-info').css('visibility','hidden');jQuery('#tr-stats-print-time').hide();}
else if(printer_type=='laser_cutting'){jQuery('#infill-info').css('visibility','hidden');}
else{if(p3d.show_infills=='on')jQuery('#infill-info').css('visibility','visible');if(p3d.show_model_stats_model_hours=='on')jQuery('#tr-stats-print-time').show();}
p3dGetStats();if(old_printer.length>0){var old_printer_max_side=Math.max(old_printer.data('length'),old_printer.data('width'))
var new_printer_max_side=Math.max(new_printer.data('length'),new_printer.data('width'))
var old_printer_min_side=Math.min(old_printer.data('length'),old_printer.data('width'))
var new_printer_min_side=Math.min(new_printer.data('length'),new_printer.data('width'))
if(old_printer_max_side!=new_printer_max_side||old_printer_min_side!=new_printer_min_side||old_printer.data('height')!=new_printer.data('height')){p3d.printer_error=false;if(p3d.scale_auto_100=='on'){p3dInitScaling();}
else{p3dInitScaleSlider();var p3dRangeSlider=document.getElementById('p3d-scale');if(typeof(p3dRangeSlider.noUiSlider)!=='undefined'){p3dRangeSlider.noUiSlider.set(p3d.resize_scale*100)}}}}
p3dCheckPrintability();if(p3d.api_optimize=='on'&&typeof(old_printer)!=='undefined'&&new_printer.data('type')!='other'&&new_printer.data('type')!='laser_cutting'&&new_printer.data('type')!=old_printer.data('type')){p3dRepairModel(jQuery('#pa_p3d_model').val());}
p3dAnalyseModel(jQuery('#pa_p3d_model').val());window.wp.event_manager.doAction('3dprint.selectPrinter');}
function p3dSelectInfill(infill_id){var obj=jQuery('#p3d_infill_'+infill_id);var infill=jQuery(obj).val();if(jQuery(obj).prop('disabled'))return false;jQuery(obj).prop('checked',true);jQuery('#pa_p3d_infill').val(infill);if(infill==0)jQuery('#pa_p3d_infill').val('0.01');jQuery('#pa_p3d_infill').trigger('change');jQuery.cookie('p3d_infill',infill,{expires:parseInt(p3d.cookie_expire)});jQuery('select.p3d-dropdown-searchable[name=product_infill]').val(infill);p3dInitSelect2();p3dGetStats();var infill_name=jQuery(obj).data('name');if(typeof(document.getElementById('p3d-infill-name'))!=='undefined'){jQuery('#p3d-infill-name').html(p3d.text_infill+' : '+infill_name);}
p3dAnalyseModel(jQuery('#pa_p3d_model').val());}
function p3dCheckPrintability(){var printable=true;if(p3d.object&&(p3d.object.type=='Group')&&p3d.mtl&&p3d.mtl.length>0&&jQuery('input:radio[name=product_printer]:checked').data('full_color')!='1'){jQuery('#p3d-model-message-fullcolor').show();printable=false;}
else{jQuery('#p3d-model-message-fullcolor').hide();}
if(p3d.object&&(p3d.object.type=='Group')&&p3d.object.children.length>1){jQuery('#p3d-model-message-multiobj').show();if(p3d.pricing=='checkout'){printable=false;p3dNewPricing('',p3d.pricing_multi_mesh);}}
else{jQuery('#p3d-model-message-multiobj').hide();}
if(p3d.object&&p3dIs2DFlow(p3d.object)){if(p3d.dxf_unsupported_entity){jQuery('#p3d-model-message-dxfentity').show();jQuery('#p3d-dxf-unsupported-entity-name').html(p3d.dxf_unsupported_entity);if(p3d.pricing=='checkout'){printable=false;p3dNewPricing('',p3d.pricing_unsupported_dxf_entity);}}
else{jQuery('#p3d-model-message-dxfentity').hide();}}
else{jQuery('#p3d-model-message-dxfentity').hide();}
var x_dim=parseFloat(jQuery('#stats-length').html());var y_dim=parseFloat(jQuery('#stats-width').html());var z_dim=parseFloat(jQuery('#stats-height').html());if(!p3dIs2DFlow(p3d.object)&&(!x_dim||!y_dim||!z_dim))return false;var printer_width=parseFloat(jQuery('input:radio[name=product_printer]:checked').data('width'));var printer_length=parseFloat(jQuery('input:radio[name=product_printer]:checked').data('length'));var printer_height=parseFloat(jQuery('input:radio[name=product_printer]:checked').data('height'));if(!printable){p3dDisplayPrice(false);p3dDisplayAddToCart(false);}
else{jQuery('#printer_fit_error').hide();}
printable=window.wp.event_manager.applyFilters('3dprint.checkPrintability',printable);return printable;}
function p3dPriceDebug(msg,value){if(p3d.price_debug_mode=='on'&&value.toFixed(p3d.price_num_decimals)>0){console.log('PRICE DEBUG '+msg+' '+value.toFixed(p3d.price_num_decimals));}}
function p3dCalculatePrintingCost(product_info){var material=jQuery('input[name=product_filament]:checked');var coating=jQuery('input[name=product_coating]:checked');var printer=jQuery('input[name=product_printer]:checked');var infill=jQuery('input[name=product_infill]:checked');var infill_value=infill.val();var postprocessings=jQuery('input[name^=product_postprocessing]:checked');if(typeof(material)=='undefined')return;if(typeof(printer)=='undefined')return;p3d.support_charges=0;var printer_price_fields=['','1','2','3','4'];var material_price_fields=['','1','2'];var coating_price_fields=['','1'];var infill_price_fields=['','1'];var postprocessing_price_fields=['','1'];var material_cost=0;var coating_cost=0;var printing_cost=0;var infill_cost=0;var postprocessing_cost=0;var material_pct=0;var coating_pct=0;var infill_pct=0;var printing_pct=0;var postprocessing_pct=0;printing_volume=product_info['model']['material_volume'];var removed_material_volume=product_info['model']['box_volume']-printing_volume;var total_path=p3d.cut_path/10;if(p3d.price_debug_mode=='on')console.clear();for(var p=0;p<material_price_fields.length;p++){if(!isNaN(material.data('price'+material_price_fields[p]))){if(material.data('price_type'+material_price_fields[p])=='cm3'){material_cost+=(printing_volume)*material.data('price'+material_price_fields[p]);p3dPriceDebug("Material '"+material.data('name')+"' Price Field "+p+" volume charges:",material.data('price'+material_price_fields[p]));}
else if(material.data('price_type'+material_price_fields[p])=='cm2'){material_cost+=product_info['model']['surface_area']*material.data('price'+material_price_fields[p]);p3dPriceDebug("Material '"+material.data('name')+"' Price Field "+p+" surface area charges:",product_info['model']['surface_area']*material.data('price'+material_price_fields[p]));}
else if(material.data('price_type'+material_price_fields[p])=="box_volume"){material_cost+=product_info['model']['box_volume']*material.data('price'+material_price_fields[p]);p3dPriceDebug("Material '"+material.data('name')+"' Price Field "+p+" box volume charges:",material.data('price'+material_price_fields[p]));}
else if(material.data('price_type'+material_price_fields[p])=="box_xy"){material_cost+=(product_info['model']['x_dim']*product_info['model']['y_dim'])*material.data('price'+material_price_fields[p]);p3dPriceDebug("Material '"+material.data('name')+"' Price Field "+p+" box XY charges:",material.data('price'+material_price_fields[p]));}
else if(material.data('price_type'+material_price_fields[p])=="support_material_volume"&&typeof(product_info['model']['support_material_volume'])!='undefined'){material_cost+=product_info['model']['support_material_volume']*material.data('price'+material_price_fields[p]);p3d.support_charges+=product_info['model']['support_material_volume']*material.data('price'+material_price_fields[p]);p3dPriceDebug("Material '"+material.data('name')+"' Price Field "+p+" support volume charges:",material.data('price'+material_price_fields[p]));}
else if(material.data('price_type'+material_price_fields[p])=="support_material_fixed"&&typeof(product_info['model']['support_material_volume'])!='undefined'&&product_info['model']['support_material_volume']>0){material_cost+=material.data('price'+material_price_fields[p]);p3d.support_charges+=material.data('price'+material_price_fields[p]);p3dPriceDebug("Material '"+material.data('name')+"' Price Field "+p+" support volume charges:",material.data('price'+material_price_fields[p]));}
else if(material.data('price_type'+material_price_fields[p])=="removed_material_volume"){material_cost+=removed_material_volume*material.data('price'+material_price_fields[p]);p3dPriceDebug("Material '"+material.data('name')+"' Price Field "+p+" removed volume charges:",material.data('price'+material_price_fields[p]));}
else if(material.data('price_type'+material_price_fields[p])=="total_path"){material_cost+=total_path*material.data('price'+material_price_fields[p]);p3dPriceDebug("Material '"+material.data('name')+"' Price Field "+p+" total path charges:",material.data('price'+material_price_fields[p]));}
else if(material.data('price_type'+material_price_fields[p])=='gram'){material_cost+=product_info['model']['weight']*material.data('price'+material_price_fields[p]);p3dPriceDebug("Material '"+material.data('name')+"' Price Field "+p+" weight charges:",material.data('price'+material_price_fields[p]));}
else if(material.data('price_type'+material_price_fields[p])=='volumetric_weight'){var volumetric_weight_indicator=material.data('volumetric-weight-indicator');if(volumetric_weight_indicator!=0){var volumetric_weight=product_info['model']['box_volume']/volumetric_weight_indicator;var max_weight=Math.max(volumetric_weight,product_info['model']['weight']);material_cost+=max_weight*material.data('price'+material_price_fields[p]);p3dPriceDebug("Material '"+material.data('name')+"' Price Field "+p+" volumetric weight charges:",(max_weight*material.data('price'+material_price_fields[p])));}}
else if(material.data('price_type'+material_price_fields[p])=='fixed'){material_cost+=material.data('price'+material_price_fields[p]);p3dPriceDebug("Material '"+material.data('name')+"' Price Field "+p+" fixed charges:",material.data('price'+material_price_fields[p]));}
else if(material.data('price_type'+material_price_fields[p])=='hour'){material_cost+=(parseFloat(p3d.print_time)/3600)*material.data('price'+material_price_fields[p]);p3dPriceDebug("Material '"+material.data('name')+"' Price Field "+p+" per hour charges:",(parseFloat(p3d.print_time)/3600)*material.data('price'+material_price_fields[p]));}
else if(material.data('price_type'+material_price_fields[p])=='pct'){material_pct+=material.data('price'+material_price_fields[p]);p3dPriceDebug("Material '"+material.data('name')+"' Price Field "+p+" % charges:",material.data('price'+printer_price_fields[p]));}}
else if(material.data('price'+material_price_fields[p]).indexOf(':')>-1){var material_volume_pricing_array=material.data('price'+material_price_fields[p]).split(';');for(var i=material_volume_pricing_array.length-1;i>=0;i--){var discount_rule=material_volume_pricing_array[i].split(':');if(discount_rule.length==2){var amount=parseFloat(discount_rule[0]);var price=parseFloat(discount_rule[1]);if(material.data('price_type'+material_price_fields[p])=='cm3'){if(printing_volume>=amount){material_cost+=printing_volume*price;p3dPriceDebug("Material '"+material.data('name')+"' Price Field "+p+" volume charges by formula "+material.data('price'+material_price_fields[p])+":",printing_volume*price);break;}}
else if(material.data('price_type'+material_price_fields[p])=='cm2'){if(product_info['model']['surface_area']>=amount){material_cost+=product_info['model']['surface_area']*price;p3dPriceDebug("Material '"+material.data('name')+"' Price Field "+p+" surface area charges by formula "+material.data('price'+material_price_fields[p])+":",product_info['model']['surface_area']*price);break;}}
else if(material.data('price_type'+material_price_fields[p])=='gram'){if(product_info['model']['weight']>=amount){material_cost+=product_info['model']['weight']*price;p3dPriceDebug("Material '"+material.data('name')+"' Price Field "+p+" weight charges by formula "+material.data('price'+material_price_fields[p])+":",product_info['model']['weight']*price);break;}}
else if(material.data('price_type'+material_price_fields[p])=='support_material_volume'&&typeof(product_info['model']['support_material_volume'])!='undefined'){if(product_info['model']['support_material_volume']>=amount){material_cost+=product_info['model']['support_material_volume']*price;p3d.support_charges+=product_info['model']['support_material_volume']*price;p3dPriceDebug("Material '"+material.data('name')+"' Price Field "+p+" support volume charges by formula "+material.data('price'+material_price_fields[p])+":",removed_material_volume*price);break;}}
else if(material.data('price_type'+material_price_fields[p])=='removed_material_volume'){if(removed_material_volume>=amount){material_cost+=removed_material_volume*price;p3dPriceDebug("Material '"+material.data('name')+"' Price Field "+p+" removed volume charges by formula "+material.data('price'+material_price_fields[p])+":",removed_material_volume*price);break;}}
else if(material.data('price_type'+material_price_fields[p])=='total_path'){if(total_path>=amount){material_cost+=total_path*price;p3dPriceDebug("Material '"+material.data('name')+"' Price Field "+p+" total path charges by formula "+material.data('price'+material_price_fields[p])+":",total_path*price);break;}}
else if(material.data('price_type'+material_price_fields[p])=='fixed'){if(printing_volume>=amount){material_cost+=price;p3dPriceDebug("Material '"+material.data('name')+"' Price Field "+p+" fixed charges by formula "+material.data('price'+material_price_fields[p])+":",price);break;}}}}}}
var material_min_price=parseFloat(material.data('min_price'));if(material_cost<material_min_price){material_cost=material_min_price;p3dPriceDebug("Setting minimum material price:",material_min_price);}
p3dPriceDebug("Material Total Cost:",material_cost);for(var p=0;p<printer_price_fields.length;p++){if(!isNaN(printer.data('price'+printer_price_fields[p]))){if(printer.data('price_type'+printer_price_fields[p])=="material_volume"){printing_cost+=printing_volume*printer.data('price'+printer_price_fields[p]);p3dPriceDebug("Printer '"+printer.data('name')+"' Price Field "+p+" volume charges:",printer.data('price'+printer_price_fields[p]));}
else if(printer.data('price_type'+printer_price_fields[p])=="box_volume"){printing_cost+=product_info['model']['box_volume']*printer.data('price'+printer_price_fields[p]);p3dPriceDebug("Printer '"+printer.data('name')+"' Price Field "+p+" box volume charges:",printer.data('price'+printer_price_fields[p]));}
else if(printer.data('price_type'+printer_price_fields[p])=="box_xy"){printing_cost+=(product_info['model']['x_dim']*product_info['model']['y_dim'])*printer.data('price'+printer_price_fields[p]);p3dPriceDebug("Printer '"+printer.data('name')+"' Price Field "+p+" box XY charges:",printer.data('price'+printer_price_fields[p]));}
else if(printer.data('price_type'+printer_price_fields[p])=="support_material_volume"&&typeof(product_info['model']['support_material_volume'])!='undefined'){printing_cost+=product_info['model']['support_material_volume']*printer.data('price'+printer_price_fields[p]);p3d.support_charges+=product_info['model']['support_material_volume']*printer.data('price'+printer_price_fields[p]);p3dPriceDebug("Printer '"+printer.data('name')+"' Price Field "+p+" support volume charges:",printer.data('price'+printer_price_fields[p]));}
else if(printer.data('price_type'+printer_price_fields[p])=="support_material_fixed"&&typeof(product_info['model']['support_material_volume'])!='undefined'&&product_info['model']['support_material_volume']>0){printing_cost+=printer.data('price'+printer_price_fields[p]);p3d.support_charges+=printer.data('price'+printer_price_fields[p]);p3dPriceDebug("Printer '"+printer.data('name')+"' Price Field "+p+" support volume charges:",printer.data('price'+printer_price_fields[p]));}
else if(printer.data('price_type'+printer_price_fields[p])=="removed_material_volume"){printing_cost+=removed_material_volume*printer.data('price'+printer_price_fields[p]);p3dPriceDebug("Printer '"+printer.data('name')+"' Price Field "+p+" removed volume charges:",printer.data('price'+printer_price_fields[p]));}
else if(printer.data('price_type'+printer_price_fields[p])=="total_path"){printing_cost+=total_path*printer.data('price'+printer_price_fields[p]);p3dPriceDebug("Printer '"+printer.data('name')+"' Price Field "+p+" total path charges:",printer.data('price'+printer_price_fields[p]));}
else if(printer.data('price_type'+printer_price_fields[p])=="gram"){printing_cost+=product_info['model']['weight']*printer.data('price'+printer_price_fields[p]);p3dPriceDebug("Printer '"+printer.data('name')+"' Price Field "+p+" weight charges:",printer.data('price'+printer_price_fields[p]));}
else if(printer.data('price_type'+printer_price_fields[p])=="hour"){printing_cost+=(parseFloat(p3d.print_time)/3600)*printer.data('price'+printer_price_fields[p]);p3dPriceDebug("Printer '"+printer.data('name')+"' Price Field "+p+" per hour charges:",(parseFloat(p3d.print_time)/3600)*printer.data('price'+printer_price_fields[p]));}
else if(printer.data('price_type'+printer_price_fields[p])=="fixed"){printing_cost+=printer.data('price'+printer_price_fields[p]);p3dPriceDebug("Printer '"+printer.data('name')+"' Price Field "+p+" fixed charges:",printer.data('price'+printer_price_fields[p]));}
else if(printer.data('price_type'+printer_price_fields[p])=="pct"){printing_pct+=printer.data('price'+printer_price_fields[p]);p3dPriceDebug("Printer '"+printer.data('name')+"' Price Field "+p+" % charges:",printer.data('price'+printer_price_fields[p]));}}
else if(printer.data('price'+printer_price_fields[p]).indexOf(':')>-1){var printer_volume_pricing_array=printer.data('price'+printer_price_fields[p]).split(';');for(var i=printer_volume_pricing_array.length-1;i>=0;i--){var discount_rule=printer_volume_pricing_array[i].split(':');if(discount_rule.length==2){var amount=parseFloat(discount_rule[0]);var price=parseFloat(discount_rule[1]);if(printer.data('price_type'+printer_price_fields[p])=='material_volume'){if(printing_volume>=amount){printing_cost+=printing_volume*price;p3dPriceDebug("Printer '"+printer.data('name')+"' Price Field "+p+" volume charges by formula "+printer.data('price'+material_price_fields[p])+":",printing_volume*price);break;}}
else if(printer.data('price_type'+printer_price_fields[p])=='box_volume'){if(product_info['model']['box_volume']>=amount){printing_cost+=product_info['model']['box_volume']*price;p3dPriceDebug("Printer '"+printer.data('name')+"' Price Field "+p+" box volume charges by formula "+printer.data('price'+printer_price_fields[p])+":",product_info['model']['box_volume']*price);break;}}
else if(printer.data('price_type'+printer_price_fields[p])=='support_material_volume'&&typeof(product_info['model']['support_material_volume'])!='undefined'){if(removed_material_volume>=amount){printing_cost+=product_info['model']['support_material_volume']*price;p3dPriceDebug("Printer '"+printer.data('name')+"' Price Field "+p+" support volume charges by formula "+printer.data('price'+printer_price_fields[p])+":",removed_material_volume*price);break;}}
else if(printer.data('price_type'+printer_price_fields[p])=='removed_material_volume'){if(removed_material_volume>=amount){printing_cost+=removed_material_volume*price;p3dPriceDebug("Printer '"+printer.data('name')+"' Price Field "+p+" removed volume charges by formula "+printer.data('price'+printer_price_fields[p])+":",removed_material_volume*price);break;}}
else if(printer.data('price_type'+printer_price_fields[p])=='total_path'){if(total_path>=amount){printing_cost+=total_path*price;p3dPriceDebug("Printer '"+printer.data('name')+"' Price Field "+p+" total path charges by formula "+printer.data('price'+printer_price_fields[p])+":",removed_material_volume*price);break;}}
else if(printer.data('price_type'+printer_price_fields[p])=='gram'){if(product_info['model']['weight']>=amount){printing_cost+=product_info['model']['weight']*price;p3dPriceDebug("Printer '"+printer.data('name')+"' Price Field "+p+" weight charges by formula "+printer.data('price'+printer_price_fields[p])+":",product_info['model']['weight']*price);break;}}
else if(printer.data('price_type'+printer_price_fields[p])=='fixed'){if(printing_volume>=amount){printing_cost+=price;p3dPriceDebug("Printer '"+printer.data('name')+"' Price Field "+p+" fixed charges by formula "+printer.data('price'+printer_price_fields[p])+":",price);break;}}}}}}
if(p3d.print_time>0){var print_hours=p3d.print_time/3600;var printer_energy_hourly_cost=printer.data('printer_energy_hourly_cost');var printer_depreciation_hourly_cost=printer.data('printer_depreciation_hourly_cost');var printer_repair_hourly_cost=printer.data('printer_repair_hourly_cost');printing_cost+=print_hours*printer_energy_hourly_cost;p3dPriceDebug("Printer Energy Hourly Cost:",print_hours*printer_energy_hourly_cost);printing_cost+=print_hours*printer_depreciation_hourly_cost;p3dPriceDebug("Printer Depreciation Cost:",print_hours*printer_depreciation_hourly_cost);printing_cost+=print_hours*printer_repair_hourly_cost;p3dPriceDebug("Printer Repair Cost:",print_hours*printer_repair_hourly_cost);}
var printer_min_price=parseFloat(printer.data('min_price'));if(printing_cost<printer_min_price){printing_cost=printer_min_price;p3dPriceDebug("Setting minimum printer price:",printer_min_price);}
p3dPriceDebug("Printer Total Cost:",printing_cost);for(var p=0;p<coating_price_fields.length;p++){if(typeof(coating.data('price'+coating_price_fields[p]))!=='undefined'){if(!isNaN(coating.data('price'+coating_price_fields[p]))){if(coating.data('price_type'+coating_price_fields[p])=='cm2'){coating_cost+=product_info['model']['surface_area']*coating.data('price'+coating_price_fields[p]);p3dPriceDebug("Coating '"+coating.data('name')+"' Price Field "+p+" surface area charges:",product_info['model']['surface_area']*coating.data('price'+coating_price_fields[p]));}
else if(coating.data('price_type'+coating_price_fields[p])=='fixed'){coating_cost+=coating.data('price'+coating_price_fields[p]);p3dPriceDebug("Coating '"+coating.data('name')+"' Price Field "+p+" fixed charges:",coating.data('price'+coating_price_fields[p]));}
else if(coating.data('price_type'+coating_price_fields[p])=='pct'){coating_pct+=coating.data('price'+coating_price_fields[p]);p3dPriceDebug("Coating '"+coating.data('name')+"' Price Field "+p+" % charges:",coating.data('price'+coating_price_fields[p]));}}
else if(coating.data('price'+coating_price_fields[p]).indexOf(':')>-1){var surface_area_pricing_array=coating.data('price'+coating_price_fields[p]).split(';');for(var i=surface_area_pricing_array.length-1;i>=0;i--){var discount_rule=surface_area_pricing_array[i].split(':');if(discount_rule.length==2){var amount=parseFloat(discount_rule[0]);var price=parseFloat(discount_rule[1]);if(coating.data('price_type'+coating_price_fields[p])=='cm2'){if(product_info['model']['surface_area']>=amount){coating_cost+=product_info['model']['surface_area']*price;p3dPriceDebug("Coating '"+coating.data('name')+"' Price Field "+p+" surface area charges by formula "+coating.data('price'+coating_price_fields[p])+":",product_info['model']['surface_area']*price);break;}}
else if(coating.data('price_type'+coating_price_fields[p])=='fixed'){if(product_info['model']['surface_area']>=amount){coating_cost+=price;p3dPriceDebug("Coating '"+coating.data('name')+"' Price Field "+p+" fixed charges by formula "+coating.data('price'+coating_price_fields[p])+":",price);break;}}}}}}}
var coating_min_price=parseFloat(coating.data('min_price'));if(coating_cost<coating_min_price){coating_cost=coating_min_price;p3dPriceDebug("Setting minimum coating price:",coating_min_price);}
postprocessings.each(function(){var postprocessing=jQuery(this);for(var p=0;p<postprocessing_price_fields.length;p++){if(typeof(postprocessing.data('price'+postprocessing_price_fields[p]))!=='undefined'){if(!isNaN(postprocessing.data('price'+postprocessing_price_fields[p]))){var is_support=parseInt(postprocessing.data('is_support'));if(is_support&&p3d.analysed_support_volume==0)continue;if(postprocessing.data('price_type'+postprocessing_price_fields[p])=='cm2'){postprocessing_cost+=product_info['model']['surface_area']*postprocessing.data('price'+postprocessing_price_fields[p]);p3dPriceDebug("Postprocessing '"+postprocessing.data('name')+"' Price Field "+p+" surface area charges:",product_info['model']['surface_area']*postprocessing.data('price'+postprocessing_price_fields[p]));}
else if(postprocessing.data('price_type'+postprocessing_price_fields[p])=="material_volume"){postprocessing_cost+=printing_volume*postprocessing.data('price'+postprocessing_price_fields[p]);p3dPriceDebug("Postprocessing '"+postprocessing.data('name')+"' Price Field "+p+" volume charges:",postprocessing.data('price'+postprocessing_price_fields[p]));}
else if(postprocessing.data('price_type'+postprocessing_price_fields[p])=="box_volume"){postprocessing_cost+=product_info['model']['box_volume']*postprocessing.data('price'+postprocessing_price_fields[p]);p3dPriceDebug("Postprocessing '"+postprocessing.data('name')+"' Price Field "+p+" box volume charges:",postprocessing.data('price'+postprocessing_price_fields[p]));}
else if(postprocessing.data('price_type'+postprocessing_price_fields[p])=="box_xy"){postprocessing_cost+=(product_info['model']['x_dim']*product_info['model']['y_dim'])*postprocessing.data('price'+postprocessing_price_fields[p]);p3dPriceDebug("Postprocessing '"+postprocessing.data('name')+"' Price Field "+p+" box XY charges:",postprocessing.data('price'+postprocessing_price_fields[p]));}
else if(postprocessing.data('price_type'+postprocessing_price_fields[p])=="support_material_volume"&&typeof(product_info['model']['support_material_volume'])!='undefined'){postprocessing_cost+=product_info['model']['support_material_volume']*postprocessing.data('price'+postprocessing_price_fields[p]);p3d.support_charges+=product_info['model']['support_material_volume']*postprocessing.data('price'+postprocessing_price_fields[p]);p3dPriceDebug("Postprocessing '"+postprocessing.data('name')+"' Price Field "+p+" support volume charges:",postprocessing.data('price'+postprocessing_price_fields[p]));}
else if(postprocessing.data('price_type'+postprocessing_price_fields[p])=="support_material_fixed"&&typeof(product_info['model']['support_material_volume'])!='undefined'&&product_info['model']['support_material_volume']>0){postprocessing_cost+=postprocessing.data('price'+postprocessing_price_fields[p]);p3d.support_charges+=postprocessing.data('price'+postprocessing_price_fields[p]);p3dPriceDebug("Postprocessing '"+postprocessing.data('name')+"' Price Field "+p+" support volume charges:",postprocessing.data('price'+postprocessing_price_fields[p]));}
else if(postprocessing.data('price_type'+postprocessing_price_fields[p])=="removed_material_volume"){postprocessing_cost+=removed_material_volume*postprocessing.data('price'+postprocessing_price_fields[p]);p3dPriceDebug("Postprocessing '"+postprocessing.data('name')+"' Price Field "+p+" removed volume charges:",postprocessing.data('price'+postprocessing_price_fields[p]));}
else if(postprocessing.data('price_type'+postprocessing_price_fields[p])=="total_path"){postprocessing_cost+=total_path*postprocessing.data('price'+postprocessing_price_fields[p]);p3dPriceDebug("Postprocessing '"+postprocessing.data('name')+"' Price Field "+p+" total path charges:",postprocessing.data('price'+postprocessing_price_fields[p]));}
else if(postprocessing.data('price_type'+postprocessing_price_fields[p])=="gram"){postprocessing_cost+=product_info['model']['weight']*postprocessing.data('price'+postprocessing_price_fields[p]);p3dPriceDebug("Postprocessing '"+postprocessing.data('name')+"' Price Field "+p+" weight charges:",postprocessing.data('price'+postprocessing_price_fields[p]));}
else if(postprocessing.data('price_type'+postprocessing_price_fields[p])=="hour"){postprocessing_cost+=(parseFloat(p3d.print_time)/3600)*postprocessing.data('price'+postprocessing_price_fields[p]);p3dPriceDebug("Postprocessing '"+postprocessing.data('name')+"' Price Field "+p+" per hour charges:",(parseFloat(p3d.print_time)/3600)*postprocessing.data('price'+postprocessing_price_fields[p]));}
else if(postprocessing.data('price_type'+postprocessing_price_fields[p])=='fixed'){postprocessing_cost+=postprocessing.data('price'+postprocessing_price_fields[p]);p3dPriceDebug("Postprocessing '"+postprocessing.data('name')+"' Price Field "+p+" fixed charges:",postprocessing.data('price'+postprocessing_price_fields[p]));}
else if(postprocessing.data('price_type'+postprocessing_price_fields[p])=='pct'){postprocessing_pct+=postprocessing.data('price'+postprocessing_price_fields[p]);p3dPriceDebug("Postprocessing '"+postprocessing.data('name')+"' Price Field "+p+" % charges:",postprocessing.data('price'+postprocessing_price_fields[p]));}}
else if(postprocessing.data('price'+postprocessing_price_fields[p]).indexOf(':')>-1){var surface_area_pricing_array=postprocessing.data('price'+postprocessing_price_fields[p]).split(';');for(var i=surface_area_pricing_array.length-1;i>=0;i--){var discount_rule=surface_area_pricing_array[i].split(':');if(discount_rule.length==2){var amount=parseFloat(discount_rule[0]);var price=parseFloat(discount_rule[1]);if(postprocessing.data('price_type'+postprocessing_price_fields[p])=='cm2'){if(product_info['model']['surface_area']>=amount){postprocessing_cost+=product_info['model']['surface_area']*price;p3dPriceDebug("Postprocessing '"+postprocessing.data('name')+"' Price Field "+p+" surface area charges by formula "+postprocessing.data('price'+postprocessing_price_fields[p])+":",product_info['model']['surface_area']*price);break;}}
else if(postprocessing.data('price_type'+postprocessing_price_fields[p])=='material_volume'){if(printing_volume>=amount){postprocessing_cost+=printing_volume*price;p3dPriceDebug("Postprocessing '"+postprocessing.data('name')+"' Price Field "+p+" volume charges by formula "+postprocessing.data('price'+material_price_fields[p])+":",printing_volume*price);break;}}
else if(postprocessing.data('price_type'+postprocessing_price_fields[p])=='box_volume'){if(product_info['model']['box_volume']>=amount){postprocessing_cost+=product_info['model']['box_volume']*price;p3dPriceDebug("Postprocessing '"+postprocessing.data('name')+"' Price Field "+p+" box volume charges by formula "+postprocessing.data('price'+postprocessing_price_fields[p])+":",product_info['model']['box_volume']*price);break;}}
else if(postprocessing.data('price_type'+postprocessing_price_fields[p])=='support_material_volume'&&typeof(product_info['model']['support_material_volume'])!='undefined'){if(removed_material_volume>=amount){postprocessing_cost+=product_info['model']['support_material_volume']*price;p3dPriceDebug("Postprocessing '"+postprocessing.data('name')+"' Price Field "+p+" support volume charges by formula "+postprocessing.data('price'+postprocessing_price_fields[p])+":",removed_material_volume*price);break;}}
else if(postprocessing.data('price_type'+postprocessing_price_fields[p])=='removed_material_volume'){if(removed_material_volume>=amount){postprocessing_cost+=removed_material_volume*price;p3dPriceDebug("Postprocessing '"+postprocessing.data('name')+"' Price Field "+p+" removed volume charges by formula "+postprocessing.data('price'+postprocessing_price_fields[p])+":",removed_material_volume*price);break;}}
else if(postprocessing.data('price_type'+postprocessing_price_fields[p])=='total_path'){if(total_path>=amount){postprocessing_cost+=total_path*price;p3dPriceDebug("Postprocessing '"+postprocessing.data('name')+"' Price Field "+p+" total path charges by formula "+postprocessing.data('price'+postprocessing_price_fields[p])+":",removed_material_volume*price);break;}}
else if(postprocessing.data('price_type'+postprocessing_price_fields[p])=='gram'){if(product_info['model']['weight']>=amount){postprocessing_cost+=product_info['model']['weight']*price;p3dPriceDebug("Postprocessing '"+postprocessing.data('name')+"' Price Field "+p+" weight charges by formula "+postprocessing.data('price'+postprocessing_price_fields[p])+":",product_info['model']['weight']*price);break;}}
else if(postprocessing.data('price_type'+postprocessing_price_fields[p])=='fixed'){if(product_info['model']['surface_area']>=amount){postprocessing_cost+=price;p3dPriceDebug("Postprocessing '"+postprocessing.data('name')+"' Price Field "+p+" fixed charges by formula "+postprocessing.data('price'+postprocessing_price_fields[p])+":",price);break;}}}}}}}
var postprocessing_min_price=parseFloat(postprocessing.data('min_price'));if(postprocessing_cost<postprocessing_min_price){postprocessing_cost+=postprocessing_min_price;p3dPriceDebug("Setting minimum postprocessing '"+postprocessing.data('name')+"' price:",postprocessing_min_price);}})
for(var p=0;p<infill_price_fields.length;p++){if(typeof(infill.data('price'+infill_price_fields[p]))!=='undefined'){if(!isNaN(infill.data('price'+infill_price_fields[p]))){if(infill.data('price_type'+infill_price_fields[p])=='fixed'){infill_cost+=infill.data('price'+infill_price_fields[p]);p3dPriceDebug("Infill '"+infill.data('name')+"' Price Field "+p+" fixed charges:",infill.data('price'+infill_price_fields[p]));}
else if(infill.data('price_type'+infill_price_fields[p])=='pct'){infill_pct+=infill.data('price'+infill_price_fields[p]);p3dPriceDebug("Infill '"+infill.data('name')+"' Price Field "+p+" total % charges:",infill.data('price'+infill_price_fields[p]));}
else if(infill.data('price_type'+infill_price_fields[p])=='pct_mat'){material_cost+=(material_cost/100)*infill.data('price'+infill_price_fields[p]);p3dPriceDebug("Infill '"+infill.data('name')+"' Price Field "+p+" material charges:",(material_cost/100)*infill.data('price'+infill_price_fields[p]));}}}}
jQuery(".woo_attribute").each(function(){var attr_price=parseFloat(jQuery(this).find('option:selected').data('price'));if(isNaN(attr_price))attr_price=0;var attr_price_type=jQuery(this).find('option:selected').data('price-type');var attr_pct_type=jQuery(this).find('option:selected').data('pct-type');if(typeof(attr_pct_type)!=='undefined'&&attr_price_type=='pct'){if(attr_pct_type=='printer'){printing_cost+=(printing_cost/100)*attr_price
p3dPriceDebug("Custom attribute '"+jQuery(this).val()+"' +% to printer cost:",(printing_cost/100)*attr_price);}
else if(attr_pct_type=='material'){material_cost+=(material_cost/100)*attr_price
p3dPriceDebug("Custom attribute '"+jQuery(this).val()+"' +% to material cost:",(material_cost/100)*attr_price);}
else if(attr_pct_type=='coating'){coating_cost+=(coating_cost/100)*attr_price
p3dPriceDebug("Custom attribute '"+jQuery(this).val()+"' +% to coating cost:",(coating_cost/100)*attr_price);}}})
printing_cost=printing_cost||0;material_cost=material_cost||0;coating_cost=coating_cost||0;infill_cost=infill_cost||0;postprocessing_cost=postprocessing_cost||0;printing_pct=printing_pct||0;material_pct=material_pct||0;coating_pct=coating_pct||0;infill_pct=infill_pct||0;postprocessing_pct=postprocessing_pct||0;var subtotal=printing_cost+material_cost+coating_cost+infill_cost+postprocessing_cost;var total=printing_cost+material_cost+coating_cost+infill_cost+postprocessing_cost;p3dPriceDebug(printing_cost,material_cost,coating_cost,infill_cost,postprocessing_cost);p3dPriceDebug("printing_cost+material_cost+coating_cost+infill_cost+postprocessing_cost = ",total);total+=(total/100)*(printing_pct+material_pct+coating_pct+infill_pct+postprocessing_pct);var attr_total=0;jQuery(".woo_attribute").each(function(){var attr_price=parseFloat(jQuery(this).find('option:selected').data('price'));if(isNaN(attr_price))attr_price=0;var attr_price_type=jQuery(this).find('option:selected').data('price-type');var attr_pct_type=jQuery(this).find('option:selected').data('pct-type');var flat_type=jQuery(this).find('option:selected').data('flat-type');if(attr_price_type=='flat'){if(flat_type=='support_material_amount'&&p3d.analysed_support_volume>0){var support_price=attr_price*(p3d.analysed_support_volume/1000)
total+=support_price;attr_total+=support_price;p3dPriceDebug("Custom attribute '"+jQuery(this).val()+"' support material charges per cm3:",support_price);}
else if(flat_type=='support_material_flat'&&p3d.analysed_support_volume>0){total+=attr_price;p3dPriceDebug("Custom attribute '"+jQuery(this).val()+"' support material fixed charges:",attr_price);attr_total+=attr_price;}
else{total+=attr_price;p3dPriceDebug("Custom attribute '"+jQuery(this).val()+"' fixed charges:",attr_price);attr_total+=attr_price;}}
else if(typeof(attr_pct_type)!=='undefined'&&attr_price_type=='pct'&&attr_pct_type=='total'){total+=(total/100)*attr_price;p3dPriceDebug("Custom attribute '"+jQuery(this).val()+"' % charges:",attr_price);attr_total+=(total/100)*attr_price;}})
p3dPriceDebug("Total Custom Attributes Cost:",attr_total);if(p3d.minimum_price_type=='starting_price'){total=total+parseFloat(p3d.min_price);p3dPriceDebug("Adding Starting Price:",parseFloat(p3d.min_price));}
else if(p3d.minimum_price_type=='minimum_price'){if(total<p3d.min_price){total=parseFloat(p3d.min_price)+attr_total;p3dPriceDebug("Minimum Price:",parseFloat(p3d.min_price));}}
if(p3d.file_url&&p3d.file_url.length>0&&p3d.product_price_type&&p3d.product_price_type=='fixed'){p3dPriceDebug("Minimum Price:",parseFloat(p3d.min_price));total=parseFloat(p3d.min_price)+attr_total;}
total=parseFloat(total);p3dPriceDebug("TOTAL:",total);total=window.wp.event_manager.applyFilters('p3d.calculatePrintingCost',total,product_info);return total;}
window.wp.event_manager.addFilter('p3d.calculatePrintingCost',function(total,product_info){return total;})
function p3dGetStatsClientSide(){var printer_type=jQuery('input[name=product_printer]:checked').data('type');var material_thickness=jQuery('input[name=product_filament]:checked').data('laser-cutting-thickness')/10;var model_x=model_y=model_z=0;model_x=(Math.abs(p3d.boundingBox.max.x-p3d.boundingBox.min.x)/10)*p3d.resize_scale
model_y=(Math.abs(p3d.boundingBox.max.y-p3d.boundingBox.min.y)/10)*p3d.resize_scale
model_z=(Math.abs(p3d.boundingBox.max.z-p3d.boundingBox.min.z)/10)*p3d.resize_scale
if(printer_type=='laser_cutting'){model_z=material_thickness;}
var box_volume=model_x*model_y*model_z;if(p3d.analysed_volume>0&&(printer_type=='fff'||printer_type=='dlp')){var filament_volume=p3d.analysed_volume/1000;}
else if(p3d.triangulated_volume>0){var filament_volume=(p3d.triangulated_volume/1000)*Math.pow(p3d.resize_scale,3);}
else{var filament_volume=Math.abs((p3d.model_total_volume/1000)*Math.pow(p3d.resize_scale,3));}
if(p3d.analysed_support_volume>0&&(printer_type=='fff'||printer_type=='dlp')){var support_volume=p3d.analysed_support_volume/1000;}
else{var support_volume=0;}
if(printer_type=='dlp'){p3d.print_time=p3dCalculateDLPPrintTime();}
if(p3d.analysed_surface_area>0&&(printer_type=='fff'||printer_type=='dlp')){var surface_area=p3d.analysed_surface_area/100;}
else if(p3d.triangulated_surface_area>0){var surface_area=(p3d.triangulated_surface_area/100)*Math.pow(p3d.resize_scale,2);}
else{var surface_area=(p3d.model_surface_area/100)*Math.pow(p3d.resize_scale,2);}
var material_coeff=100;var unit_multiplier=p3dGetUnitMultiplier();jQuery(".woo_attribute").each(function(){var attr_price=parseFloat(jQuery(this).find('option:selected').data('price'));if(isNaN(attr_price))attr_price=0;var attr_price_type=jQuery(this).find('option:selected').data('price-type');var attr_pct_type=jQuery(this).find('option:selected').data('pct-type');if(typeof(attr_pct_type)!=='undefined'&&attr_price_type=='pct'){if(attr_pct_type=='material_amount'){material_coeff+=attr_price}}})
model_x=model_x*unit_multiplier;model_y=model_y*unit_multiplier;if(printer_type!='laser_cutting'){model_z=model_z*unit_multiplier;}
surface_area=surface_area*Math.pow(unit_multiplier,2);box_volume=model_x*model_y*model_z;if(printer_type=='laser_cutting'){var surface_area=model_x*model_y;var filament_volume=box_volume;}
if(printer_type!='laser_cutting'&&(p3d.api_analyse!='on'||(printer_type!='fff'&&printer_type!='dlp'))){filament_volume=filament_volume*Math.pow(unit_multiplier,3);}
var product_info=new Array();product_info['model']=new Array();product_info['model']['x_dim']=parseFloat(model_x);product_info['model']['y_dim']=parseFloat(model_y);product_info['model']['z_dim']=parseFloat(model_z);product_info['model']['material_volume']=parseFloat(filament_volume)*(material_coeff/100);product_info['model']['support_material_volume']=parseFloat(support_volume);product_info['model']['box_volume']=parseFloat(box_volume);product_info['model']['surface_area']=parseFloat(surface_area);product_info['model']['weight']=parseFloat(filament_volume*parseFloat(jQuery('input[name=product_filament]:checked').data('density'))*(material_coeff/100));product_info=window.wp.event_manager.applyFilters('3dprint.getStatsClientSide',product_info);return product_info;}
function p3dPrepareNinjaForm(){var printer_id=jQuery('input:radio[name=product_printer]:checked').data('id');var material_id=jQuery('input:radio[name=product_filament]:checked').data('id');if(typeof(jQuery('input:radio[name=product_coating]:checked').data('id'))!=='undefined')
var coating_id=jQuery('input:radio[name=product_coating]:checked').data('id');else
var coating_id='';var product_id=jQuery('#p3d_product_id').val();var model=jQuery('#pa_p3d_model').val();var model_unit=jQuery("input[name=p3d_unit]:checked").val();var infill=jQuery('input[name=product_infill]:checked').val();var postprocessing=jQuery('#pa_p3d_postprocessing').val();var original_filename=jQuery('#pa_p3d_filename').val();var printer_type=jQuery('input[name=product_printer]:checked').data('type');var material_thickness=jQuery('input[name=product_filament]:checked').data('laser-cutting-thickness')/10;var cutting_instructions='';jQuery('select[name^=p3d_cutting_instructions]').each(function(i,obj){var start=jQuery(obj).prop('name').indexOf('[')+2;var end=jQuery(obj).prop('name').indexOf(']')-1;var index=jQuery(obj).prop('name').substring(start,end);cutting_instructions+=index+'='+jQuery(obj).val()+',';})
var thumbnail_data=window.p3d_canvas.toDataURL().replace('data:image/png;base64,','');if(p3dIs2DFlow(p3d.object)){thumbnail_data='';}
else{var thumbnail_data=jQuery('#p3d-viewer canvas.p3d-cv-3d').get(0).toDataURL().replace('data:image/png;base64,','');}
var model_dim=new Array();model_dim.x=p3d.boundingBox.max.x-p3d.boundingBox.min.x;model_dim.y=p3d.boundingBox.max.y-p3d.boundingBox.min.y;model_dim.z=p3d.boundingBox.max.z-p3d.boundingBox.min.z;var dim_x=((model_dim.y*p3d.resize_scale*p3dGetUnitMultiplier())/10);var dim_y=((model_dim.x*p3d.resize_scale*p3dGetUnitMultiplier())/10);var dim_z=((model_dim.z*p3d.resize_scale*p3dGetUnitMultiplier())/10);if(printer_type=='laser_cutting'){dim_z=material_thickness;}
if(typeof(nfForms)!=='undefined'&&nfForms.length>0){for(var n=0;n<nfForms.length;n++){if(nfForms[n].id!=p3d.ninjaforms_form_id)continue;for(var i=0;i<nfForms[n].fields.length;i++){switch(nfForms[0].fields[i].key){case'nf_p3d_printer':jQuery('#nf-field-'+nfForms[0].fields[i].id).val(printer_id);break;case'nf_p3d_material':jQuery('#nf-field-'+nfForms[0].fields[i].id).val(material_id);break;case'nf_p3d_coating':jQuery('#nf-field-'+nfForms[0].fields[i].id).val(coating_id);break;case'nf_p3d_product_id':jQuery('#nf-field-'+nfForms[0].fields[i].id).val(product_id);break;case'nf_p3d_infill':jQuery('#nf-field-'+nfForms[0].fields[i].id).val(infill);break;case'nf_p3d_postprocessing':jQuery('#nf-field-'+nfForms[0].fields[i].id).val(postprocessing);break;case'nf_p3d_cutting_instructions':jQuery('#nf-field-'+nfForms[0].fields[i].id).val(cutting_instructions);break;case'nf_p3d_resize_scale':jQuery('#nf-field-'+nfForms[0].fields[i].id).val(p3d.resize_scale);break;case'nf_p3d_unit':jQuery('#nf-field-'+nfForms[0].fields[i].id).val(model_unit);break;case'nf_p3d_filename':jQuery('#nf-field-'+nfForms[0].fields[i].id).val(original_filename);break;case'nf_p3d_model':jQuery('#nf-field-'+nfForms[0].fields[i].id).val(model);break;case'nf_p3d_thumbnail':jQuery('#nf-field-'+nfForms[0].fields[i].id).val(thumbnail_data);break;case'nf_p3d_dim_x':jQuery('#nf-field-'+nfForms[0].fields[i].id).val(dim_x);break;case'nf_p3d_dim_y':jQuery('#nf-field-'+nfForms[0].fields[i].id).val(dim_y);break;case'nf_p3d_dim_z':jQuery('#nf-field-'+nfForms[0].fields[i].id).val(dim_z);break;case'nf_p3d_estimated_price':jQuery('#nf-field-'+nfForms[0].fields[i].id).val(jQuery('#p3d_estimated_price').val());break;case'nf_p3d_estimated_price_currency':jQuery('#nf-field-'+nfForms[0].fields[i].id).val(jQuery('#p3d_estimated_price_currency').val());break;}}}}}
function p3dGetStats(){p3dDisplayPrice(false);p3dDisplayAddToCart(false);jQuery('#p3d-console').html('').hide();var printer_id=jQuery('input:radio[name=product_printer]:checked').data('id');var material_id=jQuery('input:radio[name=product_filament]:checked').data('id');if(typeof(jQuery('input:radio[name=product_coating]:checked').data('id'))!=='undefined')
var coating_id=jQuery('input:radio[name=product_coating]:checked').data('id');else
var coating_id='';var product_id=jQuery('#p3d_product_id').val();var model=jQuery('#pa_p3d_model').val();var model_unit=jQuery("input[name=p3d_unit]:checked").val();if(p3d.model_mesh){var product_info=p3dGetStatsClientSide();var product_price=parseFloat(p3dCalculatePrintingCost(product_info));product_price*=p3d.currency_rate;var response=new Array();response.model=new Array();response.model=product_info['model'];if(p3d.price_num_decimals<0)response.price=p3dRoundPrice(product_price);else response.price=product_price.toFixed(p3d.price_num_decimals);if(p3d.currency_position=='left')
accounting.settings.currency.format="%s%v";else if(p3d.currency_position=='left_space')
accounting.settings.currency.format="%s %v";else if(p3d.currency_position=='right')
accounting.settings.currency.format="%v%s";else if(p3d.currency_position=='right_space')
accounting.settings.currency.format="%v %s";if(p3d.price_num_decimals<0)
response.html_price=accounting.formatMoney(p3dRoundPrice(product_price),p3d.currency_symbol,0,p3d.thousand_sep,p3d.decimal_sep);else
response.html_price=accounting.formatMoney(product_price,p3d.currency_symbol,p3d.price_num_decimals,p3d.thousand_sep,p3d.decimal_sep);jQuery('#p3d_estimated_price').val(response.price);if(p3dGetCurrentCurrency()){jQuery('#p3d_estimated_price_currency').val(p3dGetCurrentCurrency());}
p3dShowResponse(response);}
window.wp.event_manager.doAction('3dprint.getStats');}
function p3dGetCurrentCurrency(){return jQuery('#p3d_currency').val()}
function p3dRoundPrice(price){var new_price=(price/(Math.abs(p3d.price_num_decimals)*10)).toFixed()*(Math.abs(p3d.price_num_decimals)*10);if(new_price==0)new_price=Math.pow(10,Math.abs(p3d.price_num_decimals));return new_price;}
function p3dShowResponse(response){if(response.error){p3d.fatal_error=true
p3dDisplayQuoteLoading(false);console.error(response.error);p3dShowError(response.error);return;}
var printer_type=jQuery('input[name=product_printer]:checked').data('type');var material_thickness=jQuery('input[name=product_filament]:checked').data('laser-cutting-thickness')/10;if(!p3d.uploading&&!p3d.checking&&!p3d.repairing&&!((p3d.xhr1&&p3d.xhr1.readyState!=4)||(p3d.xhr2&&p3d.xhr2.readyState!=4))){p3dDisplayQuoteLoading(false);}
if(response.model){if(response.model.error)p3dShowError(response.model.error);if(p3dIs2DFlow(p3d.object)){jQuery('#tr-stats-material-volume').hide();jQuery('#tr-stats-weight').hide();jQuery('#tr-stats-support-volume').hide();jQuery('#tr-stats-polygons').hide();jQuery('#p3d-rotation-controls').hide();jQuery('#p3d-locked-image').hide();jQuery('#p3d-unlocked-image').hide();jQuery('#stats-height').html(material_thickness);jQuery('#scale_z').val(material_thickness);if(p3d.show_model_stats_shape_number=='on'){jQuery('#tr-stats-shapes').show();}
if(p3d.show_model_stats_total_path=='on'){jQuery('#tr-stats-total-path').show();}
for(var i=0;i<p3d.object.children.length;i++){p3d.object.children[i].castShadow=false;p3d.object.children[i].receiveShadow=false;}
if(typeof(p3d.mirrorMesh)!='undefined')
p3d.mirrorMesh.visible=false;}
else{if(p3d.show_model_stats_material_volume=='on'){jQuery('#tr-stats-material-volume').show();}
if(p3d.show_model_stats_support_material_volume=='on'){jQuery('#tr-stats-support-material-volume').show();}
if(p3d.show_model_stats_box_volume=='on'){jQuery('#tr-stats-box-volume').show();}
if(p3d.show_model_stats_surface_area=='on'){jQuery('#tr-stats-surface-area').show();}
if(p3d.show_model_stats_model_weight=='on'){jQuery('#tr-stats-weight').show();}
if(p3d.show_model_stats_polygon_number=='on'){jQuery('#tr-stats-polygons').show();}
if(p3d.show_rotation=='on'){jQuery('#p3d-rotation-controls').show();}
if(p3d.show_scale=='on'){if(!jQuery('#p3d-unlocked-image').is(':visible')){jQuery('#p3d-locked-image').show();}}
jQuery('#tr-stats-shapes').hide();jQuery('#tr-stats-total-path').hide();if(p3d.ground_mirror=='on'){p3d.mirrorMesh.visible=true;}
if(p3d.show_shadow=='on'){if(typeof(p3d.object.children)!='undefined'){for(var i=0;i<p3d.object.children.length;i++){p3d.object.children[i].castShadow=true;p3d.object.children[i].receiveShadow=true;}}}}
jQuery('#stats-material-volume').html(response.model.material_volume.toFixed(2));if(typeof(response.model.support_material_volume)!=='undefined'){jQuery('#stats-support-material-volume').html(response.model.support_material_volume.toFixed(2));}
jQuery('#stats-box-volume').html(response.model.box_volume.toFixed(2));jQuery('#stats-surface-area').html(response.model.surface_area.toFixed(2));jQuery('#stats-width').html(response.model.x_dim.toFixed(2));jQuery('#stats-length').html(response.model.y_dim.toFixed(2));jQuery('#stats-height').html(response.model.z_dim.toFixed(2));jQuery('#stats-weight').html(response.model.weight.toFixed(2));if(typeof(p3d.model_mesh.geometry.faces)!='undefined'){jQuery('#stats-polygons').html(p3d.model_mesh.geometry.faces.length);}
if(typeof(p3d.object.children)!='undefined'){jQuery('#stats-shapes').html(p3d.object.children.length);}
jQuery('#stats-hours').html(p3dConvertToHHMMSS(p3d.print_time));jQuery('#stats-total-path').html((parseFloat(p3d.cut_path)/10).toFixed(2));jQuery('#scale_x').val(response.model.x_dim.toFixed(3));jQuery('#scale_y').val(response.model.y_dim.toFixed(3));jQuery('#scale_z').val(response.model.z_dim.toFixed(3));jQuery('#scale_x').data('real_value',response.model.x_dim);jQuery('#scale_y').data('real_value',response.model.y_dim);jQuery('#scale_z').data('real_value',response.model.z_dim);p3dDisplayStats(true)}
if(p3dCheckPrintability()){if((!p3d.analyse_error&&!((p3d.xhr1&&p3d.xhr1.readyState!=4)||(p3d.xhr2&&p3d.xhr2.readyState!=4))&&!p3d.checking&&!p3d.uploading&&!p3d.repairing)||(printer_type!='fff'&&printer_type!='dlp'&&printer_type!='laser_cutting')){if(p3d.pricing!='request'||(p3d.new_pricing=='request_estimate')){p3dDisplayPrice(true);}
if(!p3d.uploading&&!p3d.repairing){p3dDisplayAddToCart(true);}
if(!p3d.uploading||!p3d.filereader_supported){p3dDisplayAddToCart(true);}
jQuery('p.price span.amount').html(response.html_price);if(p3d.price_num_decimals<0)
var support_charges_html=accounting.formatMoney(p3dRoundPrice(p3d.support_charges),p3d.currency_symbol,0,p3d.thousand_sep,p3d.decimal_sep);else
var support_charges_html=accounting.formatMoney(p3d.support_charges*p3d.currency_rate,p3d.currency_symbol,p3d.price_num_decimals,p3d.thousand_sep,p3d.decimal_sep);jQuery('p.support_price span.amount').html(support_charges_html);if(p3d.show_support_warning=='on'&&p3d.analysed_support_volume>0){jQuery('#p3d-warning-message').html(p3d.text_warning_supports);}}}
window.wp.event_manager.doAction('3dprint.showResponse');}
function p3dConvertToHHMMSS(totalSeconds){var hours=Math.floor(totalSeconds/3600);var minutes=Math.floor((totalSeconds-(hours*3600))/60);var seconds=totalSeconds-(hours*3600)-(minutes*60);seconds=Math.round(seconds*100)/100;var result=(hours<10?"0"+hours:hours);result+=":"+(minutes<10?"0"+minutes:minutes);result+=":"+(seconds<10?"0"+seconds:seconds);return result;}
function p3dCalculateWeight(material_volume){var density=parseFloat(jQuery('input[name=product_filament]:checked').data('density'));var weight=material_volume*density;return weight.toFixed(2);}
function p3dDisplayUserDefinedProgressBar(show){if(show){jQuery('#p3d-file-loading').show();}
else{if(!p3d.repairing){jQuery('#p3d-file-loading').hide();}}}
function p3dDisplayConsole(show){if(show){jQuery('#p3d-console').show();}
else{jQuery('#p3d-console').hide();}}
function p3dDisplayAddToCart(show){jQuery('.single_add_to_cart_button').removeClass('disabled');if(show&&!p3d.fatal_error&&!p3d.printer_error&&p3d.new_pricing!='request'){jQuery('#add-cart-container').css('visibility','visible');}
else{jQuery('#add-cart-container').css('visibility','hidden');}}
function p3dDisplayQuoteLoading(show){if(show){jQuery('#p3d-quote-loading').css('visibility','visible');}
else{jQuery('#p3d-quote-loading').css('visibility','hidden');}}
function p3dDisplayRequestForm(show){if(p3d.uploading)show=false;if(show){jQuery('#p3d-request-form').show();jQuery('#p3d-request-form').css('visibility','visible');jQuery('#p3d-canvas-repair-status').hide();jQuery('#p3d-analyse-status, #p3d-canvas-analyse-status').hide();if(p3d.use_ninjaforms=='on'){jQuery('#add-cart-wrapper div.nf-form-cont').show();}}
else{jQuery('#p3d-request-form').hide();jQuery('#p3d-request-form').css('visibility','hidden');if(p3d.use_ninjaforms=='on'){jQuery('#add-cart-wrapper div.nf-form-cont').hide();}}}
function p3dDisplayPrice(show){if(show&&!p3d.fatal_error&&!p3d.printer_error&&(p3d.pricing!='request'||p3d.new_pricing=='request_estimate')){jQuery('p.price').css('visibility','visible');jQuery('p.price').show();jQuery('p.support_price').css('visibility','visible');jQuery('p.support_price').show();}
else{jQuery('p.price').css('visibility','hidden');jQuery('p.support_price').css('visibility','hidden');}}
function p3dNewPricing(filename,new_pricing){if(p3d.pricing!='checkout'){new_pricing='request';}
if(new_pricing=='checkout'&&filename.length==0&&p3d.fatal_error!=1&&p3d.printer_error!=1){p3d.new_pricing='checkout';jQuery('#checkout-add-to-cart').val(jQuery('#p3d_product_id').val());p3dDisplayAddToCart(true);p3dDisplayRequestForm(false);}
else if(new_pricing=='checkout'&&filename.length>0){p3d.new_pricing='checkout';jQuery('#checkout-add-to-cart').val(jQuery('#p3d_product_id').val());p3dAnalyseModel(filename);}
else if(new_pricing=='request_estimate'){p3d.new_pricing='request_estimate';jQuery('#checkout-add-to-cart').val('');p3dDisplayAddToCart(false);p3dDisplayPrice(true);p3dDisplayRequestForm(true);}
else if(new_pricing=='request'){p3d.new_pricing='request';jQuery('#checkout-add-to-cart').val('');p3dDisplayAddToCart(false);p3dDisplayPrice(false);p3dDisplayRequestForm(true);if(p3dIsDXFFlow())p3dDisplayQuoteLoading(false);}}
function p3dDisplayStats(show){if(show){jQuery('.p3d-stats').show();}
else{jQuery('.p3d-stats').hide();}}
function p3dDetectIE(){var ua=window.navigator.userAgent;var msie=ua.indexOf('MSIE ');if(msie>0){return parseInt(ua.substring(msie+5,ua.indexOf('.',msie)),10);}
var trident=ua.indexOf('Trident/');if(trident>0){var rv=ua.indexOf('rv:');return parseInt(ua.substring(rv+3,ua.indexOf('.',rv)),10);}
var edge=ua.indexOf('Edge/');if(edge>0){return parseInt(ua.substring(edge+5,ua.indexOf('.',edge)),10);}
return false;}
function p3dRemoveGroupObjectByName(name){var o=p3d.group.getObjectByName(name);p3d.group.remove(o)}
function p3dDrawPrinterBox(){if(!p3d.model_mesh)return;p3dRemoveGroupObjectByName('printer');p3dRemoveGroupObjectByName('printer bed');p3dRemoveGroupObjectByName('printer roof');var printer_id=jQuery('input[name=product_printer]:checked').data('id')
var unit=jQuery('input[name=p3d_unit]:checked').val();var platform_shape=jQuery('input[name=product_printer]:checked').data('platform_shape');var printer_radius=parseFloat(jQuery('input[name=product_printer]:checked').data('diameter'))/2;var printer_dim=new Array();printer_dim.x=jQuery('#p3d_printer_'+printer_id).data('length')
printer_dim.y=jQuery('#p3d_printer_'+printer_id).data('width')
printer_dim.z=jQuery('#p3d_printer_'+printer_id).data('height')
var min_z=p3d.boundingBox.min.z;var model_ydim=p3d.boundingBox.max.x-p3d.boundingBox.min.x;var model_xdim=p3d.boundingBox.max.y-p3d.boundingBox.min.y;var model_zdim=p3d.boundingBox.max.z-p3d.boundingBox.min.z;if(platform_shape=='rectangle'||platform_shape.length==0){if(model_xdim>model_ydim&&printer_dim.y>printer_dim.x){tmpvar=printer_dim.x;printer_dim.x=printer_dim.y;printer_dim.y=tmpvar;}
if(model_ydim>model_xdim&&printer_dim.x>printer_dim.y){tmpvar=printer_dim.y;printer_dim.y=printer_dim.x;printer_dim.x=tmpvar;}}
var material=new THREE3DP.LineBasicMaterial({color:parseInt(p3d.printer_color,16)});if(platform_shape=='circle'){var segmentCount=32,radius=printer_radius,geometry=new THREE3DP.Geometry(),material=new THREE3DP.LineBasicMaterial({color:parseInt(p3d.printer_color,16)});for(var i=0;i<=segmentCount;i++){var theta=(i/segmentCount)*Math.PI*2;geometry.vertices.push(new THREE3DP.Vector3(Math.cos(theta)*radius,Math.sin(theta)*radius,0));}
p3d.model_printer_bed=new THREE3DP.Line(geometry,material);p3d.model_printer_bed.position.set(0,min_z,0);p3d.model_printer_bed.rotation.z=90*Math.PI/180;p3d.model_printer_bed.rotation.x=-90*Math.PI/180;p3d.model_printer_bed.name="printer bed";p3d.model_printer_bed.geometry.computeBoundingBox();if(p3d.show_printer_box!='on'||p3d.printer_color==''){p3d.model_printer_bed.visible=false;}
p3d.model_printer_roof=new THREE3DP.Line(geometry,material);p3d.model_printer_roof.position.set(0,min_z+printer_dim.z,0);p3d.model_printer_roof.rotation.z=90*Math.PI/180;p3d.model_printer_roof.rotation.x=-90*Math.PI/180;p3d.model_printer_roof.name="printer roof";p3d.model_printer_roof.geometry.computeBoundingBox();if(p3d.show_printer_box!='on'||p3d.printer_color==''){p3d.model_printer_roof.visible=false;}
p3d.scene.add(p3d.model_printer_bed);p3d.scene.add(p3d.model_printer_roof);p3d.group.add(p3d.model_printer_bed);p3d.group.add(p3d.model_printer_roof);}
else{var geometry=new THREE3DP.Geometry();geometry.vertices.push(new THREE3DP.Vector3(-printer_dim.x/2,min_z,-printer_dim.y/2),new THREE3DP.Vector3(-printer_dim.x/2,min_z,printer_dim.y/2),new THREE3DP.Vector3(printer_dim.x/2,min_z,printer_dim.y/2),new THREE3DP.Vector3(printer_dim.x/2,min_z,-printer_dim.y/2),new THREE3DP.Vector3(-printer_dim.x/2,min_z,-printer_dim.y/2),new THREE3DP.Vector3(-printer_dim.x/2,min_z+printer_dim.z,-printer_dim.y/2),new THREE3DP.Vector3(-printer_dim.x/2,min_z+printer_dim.z,printer_dim.y/2),new THREE3DP.Vector3(printer_dim.x/2,min_z+printer_dim.z,printer_dim.y/2),new THREE3DP.Vector3(printer_dim.x/2,min_z+printer_dim.z,-printer_dim.y/2),new THREE3DP.Vector3(-printer_dim.x/2,min_z+printer_dim.z,-printer_dim.y/2),new THREE3DP.Vector3(printer_dim.x/2,min_z+printer_dim.z,-printer_dim.y/2),new THREE3DP.Vector3(printer_dim.x/2,min_z,-printer_dim.y/2),new THREE3DP.Vector3(printer_dim.x/2,min_z,printer_dim.y/2),new THREE3DP.Vector3(printer_dim.x/2,min_z+printer_dim.z,printer_dim.y/2),new THREE3DP.Vector3(-printer_dim.x/2,min_z+printer_dim.z,printer_dim.y/2),new THREE3DP.Vector3(-printer_dim.x/2,min_z,printer_dim.y/2));p3d.model_printer=new THREE3DP.Line(geometry,material);p3d.model_printer.name="printer";p3d.model_printer.geometry.computeBoundingBox();if(p3d.show_printer_box!='on'||p3d.printer_color==''){p3d.model_printer.visible=false;}
p3d.scene.add(p3d.model_printer);p3d.group.add(p3d.model_printer);}
window.wp.event_manager.doAction('3dprint.drawPrinterBox');}
function p3dSignedVolume(p1,p2,p3){if(p1&&p2&&p3){v321=p3[0]*p2[1]*p1[2];v231=p2[0]*p3[1]*p1[2];v312=p3[0]*p1[1]*p2[2];v132=p1[0]*p3[1]*p2[2];v213=p2[0]*p1[1]*p3[2];v123=p1[0]*p2[1]*p3[2];return(1.0/6.0)*(-v321+v231+v312-v132-v213+v123);}}
function p3dSurfaceArea(p1,p2,p3){if(p1&&p2&&p3){ax=p2[0]-p1[0];ay=p2[1]-p1[1];az=p2[2]-p1[2];bx=p3[0]-p1[0];by=p3[1]-p1[1];bz=p3[2]-p1[2];cx=ay*bz-az*by;cy=az*bx-ax*bz;cz=ax*by-ay*bx;return 0.5*Math.sqrt(cx*cx+cy*cy+cz*cz);}}
function p3dAngleToRadians(angle){return angle*(Math.PI/180);}
function p3dRotateModel(axis,degree){if(p3d.mtl&&p3d.mtl.length>0){p3dShowError(p3d.text_cant_rotate_obj);return;}
if(isNaN(degree))degree=0;jQuery('#p3d-apply-button').show();if((jQuery('#rotation_x').val()+jQuery('#rotation_y').val()+jQuery('#rotation_z').val())==0){p3dEnableControls();}
else{p3dDisableControls();jQuery('#rotation_x, #rotation_y, #rotation_z, #p3d-apply-button').prop('disabled',false);}
if(axis=='x'){jQuery("#rotation_x").focus();p3d.model_mesh.rotation.x=p3d.initial_rotation_x+p3dAngleToRadians(degree);if(p3d.object.type=='Group'||p3dIs2DFlow(p3d.object)){p3d.object.rotation.x=p3d.initial_rotation_x+p3dAngleToRadians(degree);}}
if(axis=='y'){jQuery("#rotation_y").focus();p3d.model_mesh.rotation.y=p3d.initial_rotation_y+p3dAngleToRadians(degree);if(p3d.object.type=='Group'||p3dIs2DFlow(p3d.object)){p3d.object.rotation.y=p3d.initial_rotation_y+p3dAngleToRadians(degree);}}
if(axis=='z'){jQuery("#rotation_z").focus();p3d.model_mesh.rotation.z=p3d.initial_rotation_z+p3dAngleToRadians(degree);if(p3d.object.type=='Group'||p3dIs2DFlow(p3d.object)){p3d.object.rotation.z=p3d.initial_rotation_z+p3dAngleToRadians(degree);}}
if(p3d.object.type=='Group'||p3dIs2DFlow(p3d.object)){var bbox=new THREE3DP.Box3().setFromObject(p3d.object);var mesh_height=bbox.max.y-bbox.min.y;var mesh_width=bbox.max.x-bbox.min.x;var mesh_length=bbox.max.z-bbox.min.z;p3d.object.position.y=p3d.scene.getObjectByName('ground').position.y+(mesh_height/2)}
else{var bbox=new THREE3DP.Box3().setFromObject(p3d.model_mesh);var mesh_height=bbox.max.y-bbox.min.y;var mesh_width=bbox.max.x-bbox.min.x;var mesh_length=bbox.max.z-bbox.min.z;p3d.model_mesh.position.y=p3d.scene.getObjectByName('ground').position.y+(mesh_height/2)}}
function p3dDialogCheck(){if(p3d.file_selected>0)
jQuery('#p3d-container input[type=file]').parent().css('z-index','999')
p3d.file_selected++;}
function p3dGetMaxScale(model_dim,printer_dim,printer_radius,platform_shape){var mesh_diagonal=Math.sqrt(model_dim.x*model_dim.x+model_dim.y*model_dim.y);var model_radius=mesh_diagonal/2;var max_printer_side=Math.max(printer_dim.x,printer_dim.y);var min_printer_side=Math.min(printer_dim.x,printer_dim.y);var max_model_side=Math.max(model_dim.x,model_dim.y);var min_model_side=Math.min(model_dim.x,model_dim.y);if(platform_shape=='circle'){max_model_side=model_radius;min_model_side=min_model_side/2;max_printer_side=printer_radius;min_printer_side=printer_radius;}
var height_diff=printer_dim.z/model_dim.z;var max_side_diff=max_printer_side/max_model_side;var min_side_diff=min_printer_side/min_model_side;var side_diff=Math.min(max_side_diff,min_side_diff,height_diff);var max_scale=(side_diff*100)/p3dGetUnitMultiplier();return max_scale;}
function p3dInitScaleSlider(){window.wp.event_manager.doAction('3dprint.p3dInitScaleSlider_start');if(!p3d.model_mesh)return false;var p3dRangeSlider=document.getElementById('p3d-scale');var printer_dim=new Array();var printer_type=jQuery('input[name=product_printer]:checked').data('type');printer_dim.x=jQuery('input[name=product_printer]:checked').data('length');printer_dim.y=jQuery('input[name=product_printer]:checked').data('width');printer_dim.z=jQuery('input[name=product_printer]:checked').data('height');var platform_shape=jQuery('input[name=product_printer]:checked').data('platform_shape');var printer_radius=parseFloat(jQuery('input[name=product_printer]:checked').data('diameter'))/2;var model_dim=new Array();model_dim.x=p3d.boundingBox.max.x-p3d.boundingBox.min.x;model_dim.y=p3d.boundingBox.max.y-p3d.boundingBox.min.y;model_dim.z=p3d.boundingBox.max.z-p3d.boundingBox.min.z;var max_scale=p3dGetMaxScale(model_dim,printer_dim,printer_radius,platform_shape);var new_printer_id=0;if(p3d.auto_scale=='0'&&max_scale<100){new_printer_id=p3dGetFittingPrinter(model_dim);if(new_printer_id==0){max_scale=100;if(p3d.pricing_too_large=='request')p3d.printer_error=1;p3dNewPricing('',p3d.pricing_too_large);jQuery('#p3d-model-message-toolarge').show();}
else{jQuery('#p3d-model-message-toolarge').hide();}}
else{jQuery('#p3d-model-message-toolarge').hide();}
if(isNaN(max_scale))return false;if(p3d.auto_scale=='on'){if(max_scale<100){new_printer_id=p3dGetFittingPrinter(model_dim);jQuery('#p3d-model-message-scale').show();if(new_printer_id==0){if(p3d.pricing_too_large=='request')p3d.printer_error=1;p3dNewPricing('',p3d.pricing_too_large);}}
else{p3d.printer_error=false;if(p3d.pricing=='checkout'){if(!p3d.fatal_error){p3dNewPricing('','checkout');}}
jQuery('#p3d-model-message-scale').hide();}}
if(typeof(p3dRangeSlider.noUiSlider)=='undefined'){noUiSlider.create(p3dRangeSlider,{start:[100],range:{'min':[0.01],'max':[max_scale]}});var p3dRangeSliderValueElement=document.getElementById('p3d-slider-range-value');p3dRangeSlider.noUiSlider.on('update',function(values,handle){if(!p3dCheckMinSide(values[handle])){values[handle]=p3dGetMinScale()*100;}
var printer_dim=new Array();var printer_type=jQuery('input[name=product_printer]:checked').data('type');printer_dim.x=jQuery('input[name=product_printer]:checked').data('length');printer_dim.y=jQuery('input[name=product_printer]:checked').data('width');printer_dim.z=jQuery('input[name=product_printer]:checked').data('height');var platform_shape=jQuery('input[name=product_printer]:checked').data('platform_shape');var printer_radius=parseFloat(jQuery('input[name=product_printer]:checked').data('diameter'))/2;p3dRangeSliderValueElement.value=values[handle];if((p3d.api_analyse=='on'&&jQuery('.noUi-active').length>0&&(printer_type=='fff'||printer_type=='dlp'||printer_type=='laser_cutting'))||(typeof(p3d_mp)!='undefined'&&p3d_mp.force_repair_on_scale=='on')){if(!p3d.refresh_interval1_running){p3d.refresh_interval1_running=true;p3d.refresh_interval1=setInterval(function(){p3dUpdateScale('');},500);}}
else{p3d.resize_scale=values[handle]/100;var model_dim=new Array();model_dim.x=p3d.boundingBox.max.x-p3d.boundingBox.min.x;model_dim.y=p3d.boundingBox.max.y-p3d.boundingBox.min.y;model_dim.z=p3d.boundingBox.max.z-p3d.boundingBox.min.z;var cur_value_x=jQuery('#scale_x').data('real_value');var cur_value_y=jQuery('#scale_y').data('real_value');var cur_value_z=jQuery('#scale_z').data('real_value');var prev_value_x=model_dim.x;var prev_value_y=model_dim.y;var prev_value_z=model_dim.z;p3d.resize_scale_x=(cur_value_x*10)/prev_value_x/p3dGetUnitMultiplier();p3d.resize_scale_y=(cur_value_y*10)/prev_value_y/p3dGetUnitMultiplier();p3d.resize_scale_z=(cur_value_z*10)/prev_value_z/p3dGetUnitMultiplier();if(p3d.auto_scale=='0'){var model_dim_resized=new Array();model_dim_resized.x=model_dim.x*p3d.resize_scale;model_dim_resized.y=model_dim.y*p3d.resize_scale;model_dim_resized.z=model_dim.z*p3d.resize_scale;var max_scale=p3dGetMaxScale(model_dim_resized,printer_dim,printer_radius,platform_shape);if(max_scale>=100){if(p3d.pricing_too_large=='request')p3d.printer_error=0;p3dNewPricing('',p3d.pricing);jQuery('#p3d-model-message-toolarge').hide();}
else if(max_scale<100){if(p3d.pricing_too_large=='request')p3d.printer_error=1;p3dNewPricing('',p3d.pricing_too_large);jQuery('#p3d-model-message-toolarge').show();}}
jQuery('#p3d-resize-scale').val(p3d.resize_scale);printer_id=jQuery('input:radio[name=product_printer]:checked').data('id');p3dResizeModel(p3d.resize_scale);p3dGetStats();jQuery('#p3d-scale-x').val(jQuery('#scale_x').val());jQuery('#p3d-scale-y').val(jQuery('#scale_y').val());jQuery('#p3d-scale-z').val(jQuery('#scale_z').val());if(typeof(p3d_mp)!='undefined'&&p3d_mp.force_repair_on_scale=='on'&&(parseFloat(p3d.resize_scale_x).toFixed(2)!=1||parseFloat(p3d.resize_scale_y).toFixed(2)!=1||parseFloat(p3d.resize_scale_z).toFixed(2)!=1)){p3dRepairModel(jQuery('#pa_p3d_model').val());}
else{p3dAnalyseModel(jQuery('#pa_p3d_model').val());}}});}
else{p3dRangeSlider.noUiSlider.updateOptions({start:[100],range:{'min':0.01,'max':max_scale}});}
if(new_printer_id>0){p3dSelectPrinter(new_printer_id);jQuery('#p3d-model-message-fitting-priner').show();return;}
else{jQuery('#p3d-model-message-fitting-priner').hide();}
p3dGetStats();window.wp.event_manager.doAction('3dprint.p3dInitScaleSlider_end');}
function p3dGetFittingPrinter(model_dim){var current_material=jQuery('input[name=product_filament]:checked');var current_printer=jQuery('input[name=product_printer]:checked');var material_id=current_material.data('id');var printer_id=current_printer.data('id');var new_printer_id=0;jQuery('input[name=product_printer]').each(function(){var materials=jQuery(this).data('materials')+'';var materials_array=materials.split(',');if(materials.length>0&&jQuery.inArray(material_id+'',materials_array)==-1){}
else{if(jQuery(this).data('id')!=printer_id){var new_printer_dim=new Array();new_printer_dim.x=jQuery(this).data('length');new_printer_dim.y=jQuery(this).data('width');new_printer_dim.z=jQuery(this).data('height');var new_max_scale=p3dGetMaxScale(model_dim,new_printer_dim,parseFloat(jQuery(this).data('diameter'))/2,jQuery(this).data('platform_shape'));if(new_max_scale>=100){new_printer_id=jQuery(this).data('id');}}}});return new_printer_id;}
function p3dInitScaling(){p3d.printer_error=false;p3dInitScaleSlider();var p3dRangeSlider=document.getElementById('p3d-scale');if(typeof(p3dRangeSlider.noUiSlider)!=='undefined'){p3dRangeSlider.noUiSlider.set(p3d.default_scale)}}
function p3dUpdateScale(value){if(jQuery('.noUi-active').length==0){clearInterval(p3d.refresh_interval1);if(value==''){var p3dRangeSlider=document.getElementById('p3d-scale');value=p3dRangeSlider.noUiSlider.get();}
var model_dim=new Array();model_dim.x=p3d.boundingBox.max.x-p3d.boundingBox.min.x;model_dim.y=p3d.boundingBox.max.y-p3d.boundingBox.min.y;model_dim.z=p3d.boundingBox.max.z-p3d.boundingBox.min.z;p3d.refresh_interval1_running=false;p3d.resize_scale=value/100;var cur_value_x=jQuery('#scale_x').data('real_value');var cur_value_y=jQuery('#scale_y').data('real_value');var cur_value_z=jQuery('#scale_z').data('real_value');var prev_value_x=model_dim.x;var prev_value_y=model_dim.y;var prev_value_z=model_dim.z;p3d.resize_scale_x=(cur_value_x*10)/prev_value_x/p3dGetUnitMultiplier();p3d.resize_scale_y=(cur_value_y*10)/prev_value_y/p3dGetUnitMultiplier();p3d.resize_scale_z=(cur_value_z*10)/prev_value_z/p3dGetUnitMultiplier();jQuery('#p3d-resize-scale').val(p3d.resize_scale);printer_id=jQuery('input:radio[name=product_printer]:checked').data('id');p3dResizeModel(p3d.resize_scale);p3dGetStats();if(typeof(p3d_mp)!='undefined'&&p3d_mp.force_repair_on_scale=='on'&&(parseFloat(p3d.resize_scale_x).toFixed(2)!=1||parseFloat(p3d.resize_scale_y).toFixed(2)!=1||parseFloat(p3d.resize_scale_z).toFixed(2)!=1)){p3dRepairModel(jQuery('#pa_p3d_model').val());}
else{p3dAnalyseModel(jQuery('#pa_p3d_model').val());}}}
function p3dIsDXFFlow(){if(p3d.filename&&p3d.filename.split('.').pop().toLowerCase()=='dxf'){return true;}
else return false;}
function p3dIs2DFlow(object){if(p3d.filename&&p3d.filename.split('.').pop().toLowerCase()=='dxf'){return true;}
else return false;}
function p3dUpdateDimensions(obj){window.wp.event_manager.doAction('3dprint.p3dUpdateDimensions_start');var cur_value=jQuery(obj).val();if(isNaN(cur_value))return;if(cur_value==0)return;var model_dim=new Array();model_dim.x=p3d.boundingBox.max.x-p3d.boundingBox.min.x;model_dim.y=p3d.boundingBox.max.y-p3d.boundingBox.min.y;model_dim.z=p3d.boundingBox.max.z-p3d.boundingBox.min.z;var printer_dim=new Array();var printer_type=jQuery('input[name=product_printer]:checked').data('type');printer_dim.x=jQuery('input[name=product_printer]:checked').data('length');printer_dim.y=jQuery('input[name=product_printer]:checked').data('width');printer_dim.z=jQuery('input[name=product_printer]:checked').data('height');var platform_shape=jQuery('input[name=product_printer]:checked').data('platform_shape');var printer_radius=parseFloat(jQuery('input[name=product_printer]:checked').data('diameter'))/2;var max_scale=p3dGetMaxScale(model_dim,printer_dim,printer_radius,platform_shape);if(jQuery(obj).prop('id')=='scale_x'){jQuery('#scale_x').data('real_value',cur_value);prev_value=model_dim.x;}
if(jQuery(obj).prop('id')=='scale_y'){jQuery('#scale_y').data('real_value',cur_value);prev_value=model_dim.y;}
if(jQuery(obj).prop('id')=='scale_z'){if(p3d.object&&typeof(p3d.object.type!=='undefined')&&p3dIs2DFlow(p3d.object)){var material_thickness=jQuery('input[name=product_filament]:checked').data('laser-cutting-thickness')/10;jQuery('#scale_z').val(material_thickness);return;}
jQuery('#scale_z').data('real_value',cur_value);prev_value=model_dim.z;}
var scale=(cur_value*10)/prev_value/p3dGetUnitMultiplier();if(!p3dBoxFitsBox(model_dim.x*scale,model_dim.y*scale,model_dim.z*scale,printer_dim.x,printer_dim.y,printer_dim.z)){var p3dRangeSlider=document.getElementById('p3d-scale');if(typeof(p3dRangeSlider)!=='undefined'&&p3dRangeSlider.noUiSlider){p3dRangeSlider.noUiSlider.set(max_scale);}
return false;}
var cur_value_x=jQuery('#scale_x').data('real_value');var cur_value_y=jQuery('#scale_y').data('real_value');var cur_value_z=jQuery('#scale_z').data('real_value');var prev_value_x=model_dim.x;var prev_value_y=model_dim.y;var prev_value_z=model_dim.z;p3d.resize_scale_x=(cur_value_x*10)/prev_value_x/p3dGetUnitMultiplier();p3d.resize_scale_y=(cur_value_y*10)/prev_value_y/p3dGetUnitMultiplier();p3d.resize_scale_z=(cur_value_z*10)/prev_value_z/p3dGetUnitMultiplier();var p3dRangeSlider=document.getElementById('p3d-scale');if(typeof(p3dRangeSlider.noUiSlider)!=='undefined'){if(p3d.scale_independently==0){p3dRangeSlider.noUiSlider.set(scale*100)
p3d.resize_scale=scale;}
else{p3dResizeModel(scale);}}}
function p3dResizeModel2D(scale){if(p3d.scale_independently==0){p3d.resize_scale_x=p3d.resize_scale_y=p3d.resize_scale_z=p3d.resize_scale;}
if(p3d.resize_on_scale!='on'||p3dIs2DFlow(p3d.object))return;var unit_multiplier=p3dGetUnitMultiplier();var model_length=p3d.boundingBox.max.x-p3d.boundingBox.min.x;var model_width=p3d.boundingBox.max.y-p3d.boundingBox.min.y;var model_height=p3d.boundingBox.max.z-p3d.boundingBox.min.z;var axis_length=Math.max(model_width,model_length);var axis_width=Math.min(model_width,model_length);var z_offset=-(model_height/2-(model_height/2*p3d.resize_scale_z*unit_multiplier));scale*=unit_multiplier;p3d.object.scale.set(p3d.resize_scale_x*unit_multiplier,p3d.resize_scale_y*unit_multiplier,p3d.resize_scale_z*unit_multiplier);if(p3d.object.type=="Object3D"&&typeof(p3d.object.children[0].position)!=='undefined'){p3d.object.scale.set(p3d.resize_scale_x*unit_multiplier,p3d.resize_scale_y*unit_multiplier,p3d.resize_scale_z*unit_multiplier);}
p3d.controls.target.y=z_offset;if(p3d.fit_on_resize=='on'){var model_dim=new Array();var unit_multiplier=p3dGetUnitMultiplier();model_dim.x=p3d.boundingBox.max.x-p3d.boundingBox.min.x;model_dim.y=p3d.boundingBox.max.y-p3d.boundingBox.min.y;model_dim.z=p3d.boundingBox.max.z-p3d.boundingBox.min.z;var max_side=Math.max(model_dim.x*p3d.resize_scale_x*unit_multiplier,model_dim.y*p3d.resize_scale_y*unit_multiplier,model_dim.z*p3d.resize_scale_z*unit_multiplier)
p3d.camera.position.set(max_side*1.5,max_side*1.5,max_side*1.5);}
if(p3d.show_axis=='on'){p3d.axis.position.y=z_offset;p3d.spritey_x.position.set((p3dGetFraction(p3d.font_size)*model_width*p3d.resize_scale_x*unit_multiplier/2)+10,z_offset,0);p3d.spritey_y.position.set(0,z_offset,(p3dGetFraction(p3d.font_size)*model_length*p3d.resize_scale_y*unit_multiplier/2)+10);p3d.spritey_z.position.set(0,(p3dGetFraction(p3d.font_size)*model_height*p3d.resize_scale_z*unit_multiplier/2)+z_offset+9,0);}}
function p3dResizeModel(scale){if(p3d.object&&typeof(p3d.object.type!=='undefined')&&p3dIs2DFlow(p3d.object)){return p3dResizeModel2D(scale);}
if(p3d.scale_independently==0){p3d.resize_scale_x=p3d.resize_scale_y=p3d.resize_scale_z=p3d.resize_scale;}
if(p3d.resize_on_scale!='on')return;var unit_multiplier=p3dGetUnitMultiplier();var model_length=p3d.boundingBox.max.x-p3d.boundingBox.min.x;var model_width=p3d.boundingBox.max.y-p3d.boundingBox.min.y;var model_height=p3d.boundingBox.max.z-p3d.boundingBox.min.z;var axis_length=Math.max(model_width,model_length);var axis_width=Math.min(model_width,model_length);var z_offset=-(model_height/2-(model_height/2*p3d.resize_scale_z*unit_multiplier));scale*=unit_multiplier;p3d.model_mesh.scale.set(p3d.resize_scale_x*unit_multiplier,p3d.resize_scale_y*unit_multiplier,p3d.resize_scale_z*unit_multiplier);p3d.model_mesh.position.set(0,z_offset,0);if(p3d.object.type=="Group"&&typeof(p3d.object.children[0].position)!=='undefined'){p3d.object.scale.set(p3d.resize_scale_x*unit_multiplier,p3d.resize_scale_y*unit_multiplier,p3d.resize_scale_z*unit_multiplier);p3d.object.position.set(0,z_offset,0);}
p3d.controls.target.y=z_offset;if(p3d.fit_on_resize=='on'){var model_dim=new Array();var unit_multiplier=p3dGetUnitMultiplier();model_dim.x=p3d.boundingBox.max.x-p3d.boundingBox.min.x;model_dim.y=p3d.boundingBox.max.y-p3d.boundingBox.min.y;model_dim.z=p3d.boundingBox.max.z-p3d.boundingBox.min.z;var max_side=Math.max(model_dim.x*p3d.resize_scale_x*unit_multiplier,model_dim.y*p3d.resize_scale_y*unit_multiplier,model_dim.z*p3d.resize_scale_z*unit_multiplier)
p3d.camera.position.set(max_side*1.5,max_side*1.5,max_side*1.5);}
if(p3d.show_axis=='on'){p3d.axis.position.y=z_offset;p3d.spritey_x.position.set((model_width*p3d.resize_scale_x*unit_multiplier/2)+10,z_offset,0);p3d.spritey_y.position.set(0,z_offset,(model_length*p3d.resize_scale_y*unit_multiplier/2)+10);p3d.spritey_z.position.set(0,(model_height*p3d.resize_scale_z*unit_multiplier/2)+z_offset+9,0);}
if(p3d.show_light_source1=='on')p3dMakeShadow(p3d.directionalLight1);if(p3d.show_light_source2=='on')p3dMakeShadow(p3d.directionalLight2);if(p3d.show_light_source3=='on')p3dMakeShadow(p3d.directionalLight3);if(p3d.show_light_source4=='on')p3dMakeShadow(p3d.directionalLight4);if(p3d.show_light_source5=='on')p3dMakeShadow(p3d.directionalLight5);if(p3d.show_light_source6=='on')p3dMakeShadow(p3d.directionalLight6);if(p3d.show_light_source7=='on')p3dMakeShadow(p3d.directionalLight7);if(p3d.show_light_source8=='on')p3dMakeShadow(p3d.directionalLight8);if(p3d.show_light_source9=='on')p3dMakeShadow(p3d.directionalLight9);if(p3d.show_light_source10=='on')p3dMakeShadow(p3d.directionalLight10);if(p3d.show_light_source20=='on')p3dMakeShadow(p3d.directionalLight20);if(p3d.show_light_source30=='on')p3dMakeShadow(p3d.directionalLight30);if(p3d.show_light_source40=='on')p3dMakeShadow(p3d.directionalLight40);if(p3d.show_light_source50=='on')p3dMakeShadow(p3d.directionalLight50);if(p3d.show_light_source60=='on')p3dMakeShadow(p3d.directionalLight60);if(p3d.show_light_source70=='on')p3dMakeShadow(p3d.directionalLight70);if(p3d.show_light_source80=='on')p3dMakeShadow(p3d.directionalLight80);if(p3d.show_light_source90=='on')p3dMakeShadow(p3d.directionalLight90);}
function p3dGetMinScale2D(){var printer_min_side=jQuery('input[name=product_printer]:checked').data('min_side');var model_dim=new Array();model_dim.x=p3d.boundingBox.max.x-p3d.boundingBox.min.x;model_dim.y=p3d.boundingBox.max.y-p3d.boundingBox.min.y;var model_min_side=Math.min(model_dim.x,model_dim.y)*p3dGetUnitMultiplier();var side_diff=printer_min_side/model_min_side;return side_diff;}
function p3dGetMinScale(){if(p3d.object&&typeof(p3d.object.type!=='undefined')&&p3dIs2DFlow(p3d.object)){return p3dGetMinScale2D();}
var printer_min_side=jQuery('input[name=product_printer]:checked').data('min_side');var model_dim=new Array();model_dim.x=p3d.boundingBox.max.x-p3d.boundingBox.min.x;model_dim.y=p3d.boundingBox.max.y-p3d.boundingBox.min.y;model_dim.z=p3d.boundingBox.max.z-p3d.boundingBox.min.z;var model_min_side=Math.min(model_dim.x,model_dim.y,model_dim.z)*p3dGetUnitMultiplier();var side_diff=printer_min_side/model_min_side;return side_diff;}
function p3dCheckMinSide2D(requested_scale){var printer_min_side=jQuery('input[name=product_printer]:checked').data('min_side');var model_dim=new Array();model_dim.x=p3d.boundingBox.max.x-p3d.boundingBox.min.x;model_dim.y=p3d.boundingBox.max.y-p3d.boundingBox.min.y;var model_min_side=Math.min(model_dim.x,model_dim.y)*p3dGetUnitMultiplier()*(requested_scale/100);if(model_min_side<printer_min_side){jQuery('#p3d-model-message-minside').show();if(p3d.pricing_too_small=='request')p3d.printer_error=1;p3dNewPricing('',p3d.pricing_too_small);return false;}
else{jQuery('#p3d-model-message-minside').hide();return true;}}
function p3dCheckMinSide(requested_scale){if(p3d.auto_scale=='0')return true;if(p3d.object&&typeof(p3d.object.type!=='undefined')&&p3dIs2DFlow(p3d.object)){return p3dCheckMinSide2D(requested_scale);}
var printer_min_side=jQuery('input[name=product_printer]:checked').data('min_side');var model_dim=new Array();model_dim.x=p3d.boundingBox.max.x-p3d.boundingBox.min.x;model_dim.y=p3d.boundingBox.max.y-p3d.boundingBox.min.y;model_dim.z=p3d.boundingBox.max.z-p3d.boundingBox.min.z;var model_min_side=Math.min(model_dim.x,model_dim.y,model_dim.z)*p3dGetUnitMultiplier()*(requested_scale/100);if(model_min_side<printer_min_side){jQuery('#p3d-model-message-minside').show();if(p3d.pricing_too_small=='request')p3d.printer_error=1;p3dNewPricing('',p3d.pricing_too_small);return false;}
else{jQuery('#p3d-model-message-minside').hide();return true;}}
function p3dGetUnitMultiplier(){var product_unit=jQuery('input[name=p3d_unit]:checked').val();switch(product_unit){case'inch':var unit_multiplier=2.54*10;break;case'mm':var unit_multiplier=1;break;default:var unit_multiplier=1;}
return unit_multiplier;}
function p3dUpdateSliderValue(value){if(isNaN(value))return false;var p3dRangeSlider=document.getElementById('p3d-scale');if(typeof(p3dRangeSlider.noUiSlider)!=='undefined'){p3dRangeSlider.noUiSlider.set(value);}}
function p3dUpdateSliderValue(value){if(isNaN(value))return false;var p3dRangeSlider=document.getElementById('p3d-scale');if(typeof(p3dRangeSlider.noUiSlider)!=='undefined'){p3dRangeSlider.noUiSlider.set(value);}}
function p3dScaleIndependently(val){if(val){jQuery('#p3d-unlocked-image').show();jQuery('#p3d-locked-image').hide();p3d.scale_independently=1;jQuery('#p3d-apply-button').show();}
else{jQuery('#p3d-unlocked-image').hide();jQuery('#p3d-locked-image').show();p3d.scale_independently=0;p3d.resize_scale=p3d.resize_scale_x=p3d.resize_scale_y=p3d.resize_scale_z=1;p3dInitScaling();}}
function p3dToHex(d,padding){var hex=Number(d).toString(16);padding=typeof(padding)==="undefined"||padding===null?padding=2:padding;while(hex.length<padding){hex="0"+hex;}
return hex;}
if(window.FileReader&&window.FileReader.prototype.readAsArrayBuffer){p3d.filereader_supported=true;}else{p3d.filereader_supported=false;};
p3d.analyse_queue=[];p3d.analysing=false;p3d.xhr3='';p3d.xhr4='';p3d.all_finished=false;p3d.image_height=5;p3d.image_map=1;function p3dInitBulk(){if(p3d.tooltip_engine=='tooltipster'){jQuery('.p3d-tooltip').tooltipster({contentAsHTML:true,maxWidth:350,theme:'tooltipster-'+p3d.tooltip_theme});}
else if(p3d.tooltip_engine=='tippy'){jQuery('.p3d-tooltip').each(function(i,item){var tooltip_id=jQuery(this).data('tooltip-content');var template=jQuery(tooltip_id).html();if(typeof(template)!='undefined'){tippy(this,{content:template,allowHTML:true,maxWidth:350,theme:p3d.tooltip_theme});}});}
p3d.currency_rate=jQuery('#p3d_currency_rate').val();}
jQuery(function(){var file_extensions=p3d.file_extensions.replace('zip','')
p3d.plupload_queue=jQuery("#p3d-bulk-uploader").pluploadQueue({runtimes:'html5,flash,silverlight,html4',multi_selection:true,multiple_queues:true,url:p3d.url,max_file_size:p3d.file_max_size+"mb",chunk_size:p3d.file_chunk_size+'mb',rename:true,dragdrop:true,flash_swf_url:p3d.plugin_url+'includes/ext/plupload/Moxie.swf',silverlight_xap_url:p3d.plugin_url+'includes/ext/plupload/Moxie.xap',multipart_params:{"action":"p3d_handle_upload","upload_type":"bulk",},filters:{mime_types:[{title:file_extensions+" files",extensions:file_extensions}]},init:{FilesRemoved:function(p3d_uploader,files){if(files.length>0){for(var i=0;i<files.length;i++){var file_id=files[i].id
if(typeof(p3d.analyse_queue[file_id])!='undefined'){delete p3d.analyse_queue[file_id];}}}},QueueChanged:function(p3d_uploader){if(p3d_uploader.files.length==0){jQuery('#p3d-calculate-price-button').prop('disabled',true);jQuery('#p3d-calculate-loader').hide();jQuery('#p3d-submit-button').prop('disabled',true);}},PostInit:function(){if((navigator.platform.indexOf("iPhone")==-1)&&(navigator.platform.indexOf("iPad")==-1)){jQuery('#p3d-bulk-uploader input[type=file]').prop('accept',p3d.file_extensions.split(',').map(i=>'.'+i).join(','));}},FilesAdded:function(up,files){jQuery('#p3d-calculate-price-button').prop('disabled',true);jQuery('#p3d-calculate-loader').show();jQuery('#p3d-submit-button').prop('disabled',true);if(up.files.length>0){for(var i=0;i<up.files.length;i++){var file_id=up.files[i].id
if(typeof(p3d.analyse_queue[file_id])=='undefined'){p3d.analyse_queue[file_id]=up.files[i]}}}
up.start();},BeforeUpload:function(up,file){if(typeof(p3d.analyse_queue[file.id])=='undefined'){p3d.analyse_queue[file.id]=file;}
var file_ext=file.name.split('.').pop().toLowerCase();var images=['png','jpg','jpeg','gif','bmp'];if(jQuery.inArray(file_ext,images)!=-1){p3d.analyse_queue[file.id].image_height=prompt(file.name+'\n'+p3d.text_image_height,p3d.image_height);p3d.analyse_queue[file.id].image_map=confirm(file.name+'\n'+p3d.text_image_map)?1:0;up.settings.multipart_params.image_height=p3d.analyse_queue[file.id].image_height;up.settings.multipart_params.image_map=p3d.analyse_queue[file.id].image_map;}
if(file_ext=='obj'&&p3d.server_triangulation=='on'){p3d.analyse_queue[file.id].triangulation_required=true;p3d.analyse_queue[file.id].repair_status=0;}
else{p3d.analyse_queue[file.id].triangulation_required=false;}},FileUploaded:function(p3d_uploader,file,response){var data=jQuery.parseJSON(response.response)
file.server_name=data.filename;p3d.analyse_queue[file.id]=file;var file_ext=file.server_name.split('.').pop().toLowerCase();var file_id=file.id;if(file_ext=='dxf'){jQuery.ajax({url:p3d.upload_url+encodeURIComponent(file.server_name),success:function(result){var parser=new window.DxfParser();var dxf=parser.parseSync(result);var colors=new Array();if(typeof(dxf.entities)!='undefined'&&dxf.entities.length>0){for(var i=0;i<dxf.entities.length;i++){if(dxf.tables&&dxf.tables.layer&&dxf.tables.layer.layers[dxf.entities[i].layer]&&dxf.entities[i].colorIndex==0){var color_num=dxf.tables.layer.layers[dxf.entities[i].layer].color;if(color_num>256){if(p3d.dxf_color_codes.indexOf(color_num)!=-1){color_num=p3d.dxf_color_codes.indexOf(color_num);}
else{color_num=7;}}
colors[color_num]='#'+p3dToHex(p3d.dxf_color_codes[color_num],6);}
else if(dxf.entities[i].colorIndex==0){colors[0]='#FFFFFF';}
else if(typeof(dxf.entities[i].colorIndex)!='undefined'&&dxf.entities[i].colorIndex!=0){var color_num=dxf.entities[i].colorIndex;if(color_num>256){if(p3d.dxf_color_codes.indexOf(color_num)!=-1){color_num=p3d.dxf_color_codes.indexOf(color_num);}
else{color_num=7;}}
colors[color_num]='#'+p3dToHex(p3d.dxf_color_codes[color_num],6);}
else{}}}
if(colors.length==0&&dxf.tables&&dxf.tables.layer&&dxf.tables.layer.layers){for(const[key,obj]of Object.entries(dxf.tables.layer.layers)){if(obj.visible){var color_num=obj.colorIndex;colors[color_num]='#'+p3dToHex(p3d.dxf_color_codes[color_num],6);}}}
p3d.analyse_queue[file_id].colors=colors;if(file_ext=='dxf'||jQuery('#'+file_id).find('select[name=product_printer] option:selected').data('type')=='laser_cutting'){var selects_html='';jQuery.each(p3d.analyse_queue[file_id].colors,function(key,color){if(typeof(color)=='undefined')return;selects_html+='<tr>';selects_html+='<td><div class="p3d-circle" style="color:'+color+';"></div></td>';selects_html+='<td>';selects_html+='<select autocomplete="off" onchange="p3dSelectCuttingInstructionsBulk(\''+file_id+'\', this)" name="p3d_cutting_instructions[\''+color+'\']">';if(p3d.laser_cutting_cut=='on'){selects_html+='<option value="cut">'+p3d.text_cut;}
if(p3d.laser_cutting_engrave=='on'){selects_html+='<option value="engrave">'+p3d.text_engrave;}
if(p3d.laser_cutting_ignore=='on'){selects_html+='<option value="ignore">'+p3d.text_ignore;}
selects_html+='</select>';selects_html+='</td>';selects_html+='</tr>';});if(selects_html.length){jQuery('#'+file_id).find('.p3d-stats-bulk').append(selects_html);}}
var loader=new THREE3DP.FontLoader();loader.load(p3d.plugin_url+'includes/ext/fonts/helvetiker_bold.typeface.json',function(response){p3d.font=response;var cvs=new ThreeDxf.Viewer(dxf,document.body,100,100,p3d.font);p3d.analyse_queue[file_id].bb=p3d.boundingBox;p3d.analyse_queue[file_id].dim_x=((p3d.analyse_queue[file_id].bb.max.x-p3d.analyse_queue[file_id].bb.min.x)/10).toFixed(2);p3d.analyse_queue[file_id].dim_y=((p3d.analyse_queue[file_id].bb.max.y-p3d.analyse_queue[file_id].bb.min.y)/10).toFixed(2);p3d.analyse_queue[file_id].dim_z=((jQuery('#'+file_id).find('select[name=product_filament] option:selected').data('laser-cutting-thickness'))/10).toFixed(2);})},fail:function(){alert(p3d.text_file_does_not_exist);}});}
p3dAnalyseModelBulk(file.id);},UploadComplete:function(p3d_uploader,files){if(p3d.api_repair!='on'&&p3d.server_triangulation=='on'){jQuery.each(Object.values(p3d.analyse_queue),function(index,value){var file_id=value.id;if(typeof(p3d.analyse_queue[file_id].triangulation_required)!='undefined'&&p3d.analyse_queue[file_id].triangulation_required==true){p3d.analyse_queue[file_id].repair_status=0;}
if(p3d.api_render=='on'){if(typeof(p3d.analyse_queue[file_id].repair_status)=='undefined'){p3d.analyse_queue[file_id].repair_status=0;}}});p3dRepairModelsBulk();}
else if(p3d.api_repair=='on'||p3d.api_optimize=='on'||p3d.api_render=='on'){jQuery.each(Object.values(p3d.analyse_queue),function(index,value){var status=0;var file_id=value.id;if(typeof(p3d.analyse_queue[file_id].repair_status)=='undefined'){p3d.analyse_queue[file_id].repair_status=0;}});p3dRepairModelsBulk();}
else{jQuery('#p3d-calculate-price-button').prop('disabled',false);jQuery('#p3d-calculate-loader').hide();}}}});});function p3dSelectCuttingInstructionsBulk(file_id,self){if(typeof(p3d.analyse_queue[file_id])!='undefined'){var cutting_instructions='';jQuery(self).closest('.p3d-stats-bulk').find('select[name^=p3d_cutting_instructions]').each(function(i,obj){var start=jQuery(obj).prop('name').indexOf('[')+2;var end=jQuery(obj).prop('name').indexOf(']')-1;var index=jQuery(obj).prop('name').substring(start,end);cutting_instructions+=index+'='+jQuery(obj).val()+',';})
p3d.analyse_queue[file_id].cutting_instructions=cutting_instructions;}
p3dAnalyseModelBulk(file_id);}
function p3dSelectCustomAttribute(obj){var file_id=jQuery(obj).closest('li[class^=plupload]').prop('id');var attribute_name=jQuery(obj).data('id');var attribute_value=jQuery(obj).val();if(typeof(p3d.analyse_queue[file_id].custom_attributes)!='undefined'){var custom_attributes=p3d.analyse_queue[file_id].custom_attributes;}
else{var custom_attributes=[];}
custom_attributes[attribute_name]=attribute_value;p3d.analyse_queue[file_id].custom_attributes=custom_attributes;p3dAnalyseModelBulk(file_id);}
function p3dSelectFilamentBulk(obj){var material_id=jQuery(obj).val();var file_id=jQuery(obj).closest('li[class^=plupload]').prop('id');if(typeof(p3d.analyse_queue[file_id])!='undefined'){p3d.analyse_queue[file_id].material_id=material_id;}
if(p3d.selection_order=='materials_printers'){var compatible_printers=new Array();jQuery(obj).closest('.p3d-stats-bulk').find('select[name=product_printer] option').each(function(){var materials=jQuery(this).data('materials')+'';var materials_array=materials.split(',');var printer_id=jQuery(this).val();if(materials.length>0&&jQuery.inArray(material_id+'',materials_array)==-1){jQuery(this).prop('disabled',true);p3dInitSelect2Bulk();}
else{jQuery(this).prop('disabled',false);p3dInitSelect2Bulk();compatible_printers.push(printer_id);}});var selected=false;for(var i=0;i<compatible_printers.length;i++){if(jQuery(obj).closest('.p3d-stats-bulk').find('select[name=product_printer]').val()==compatible_printers[i])
selected=true;p3dSelectPrinterBulk(jQuery(obj).closest('.p3d-stats-bulk').find('select[name=product_printer]'));}
if(!selected&&compatible_printers.length>0){jQuery(obj).closest('.p3d-stats-bulk').find('select[name=product_printer]').val(compatible_printers[0]);p3dSelectPrinterBulk(jQuery(obj).closest('.p3d-stats-bulk').find('select[name=product_printer]'));}}
var compatible_coatings=new Array();jQuery(obj).closest('.p3d-stats-bulk').find('select[name=product_coating] option').each(function(){var materials=jQuery(this).data('materials')+'';var materials_array=materials.split(',');var coating_id=jQuery(this).val();if(materials.length>0&&jQuery.inArray(material_id+'',materials_array)==-1){jQuery(this).prop('disabled',true);p3dInitSelect2Bulk();}
else{jQuery(this).prop('disabled',false);p3dInitSelect2Bulk();compatible_coatings.push(coating_id);}});var selected=false;for(var i=0;i<compatible_coatings.length;i++){if(jQuery(obj).closest('.p3d-stats-bulk').find('select[name=product_coating]').val()==compatible_coatings[i])
selected=true;}
if(!selected&&compatible_coatings.length>0){jQuery(obj).closest('.p3d-stats-bulk').find('select[name=product_coating]').val(compatible_coatings[0]);p3dSelectCoatingBulk(jQuery(obj).closest('.p3d-stats-bulk').find('select[name=product_coating]'));}
var compatible_postprocessings=new Array();jQuery(obj).closest('.p3d-stats-bulk').find('select[name=product_postprocessing] option').each(function(){var materials=jQuery(this).data('materials')+'';var materials_array=materials.split(',');var postprocessing_id=jQuery(this).val();if(materials.length>0&&jQuery.inArray(material_id+'',materials_array)==-1){jQuery(this).prop('disabled',true);jQuery(this).prop('selected',false);p3dInitSelect2Bulk();}
else{jQuery(this).prop('disabled',false);p3dInitSelect2Bulk();compatible_postprocessings.push(postprocessing_id);}});var material_name=jQuery(obj).data('name');var material_color=jQuery(obj).data('color');p3dGetStatsBulk();p3dCheckPrintabilityBulk();p3dAnalyseModelBulk(file_id);window.wp.event_manager.doAction('3dprint.selectFilament');}
function p3dSelectPrinterBulk(obj){var printer_id=jQuery(obj).val();var file_id=jQuery(obj).closest('li[class^=plupload]').prop('id')
if(typeof(p3d.analyse_queue[file_id])!='undefined'){p3d.analyse_queue[file_id].printer_id=printer_id;}
var materials=jQuery(obj).find('option[data-id='+printer_id+']').data('materials')+'';var materials_array=materials.split(',');var infills=jQuery(obj).find('option[data-id='+printer_id+']').data('infills')+'';var infills_array=infills.split(',');var default_infill=jQuery(obj).find('option[data-id='+printer_id+']').data('default-infill');p3d.printer_error=false;var new_printer=jQuery(obj);p3dInitSelect2Bulk();if(p3d.selection_order=='printers_materials'){var compatible_materials=new Array();jQuery(obj).closest('.p3d-stats-bulk').find('select[name=product_filament] option').each(function(){var material_id=jQuery(this).data('id');if(materials.length>0&&jQuery.inArray(material_id+'',materials_array)==-1){jQuery(this).prop('disabled',true);}
else{jQuery(this).prop('disabled',false);compatible_materials.push(material_id);}});var selected=false;for(var i=0;i<compatible_materials.length;i++){if(jQuery(obj).closest('.p3d-stats-bulk').find('select[name=product_filament]').val()==compatible_materials[i])
selected=true;}
if(!selected&&compatible_materials.length>0){jQuery(obj).closest('.p3d-stats-bulk').find('select[name=product_filament]').val(compatible_materials[0]);p3dSelectFilamentBulk(jQuery(obj).closest('.p3d-stats-bulk').find('select[name=product_filament]'));}}
var printer_name=jQuery(obj).find('option[data-id='+printer_id+']').data('name');var printer_type=jQuery(obj).find('option[data-id='+printer_id+']').data('type');if(jQuery(obj).closest('.p3d-stats-bulk').find('select.p3d-dropdown-searchable-bulk[name=product_infill]').length>0){if(printer_type=='laser_cutting'||printer_type=='other'){jQuery(obj).closest('.p3d-stats-bulk').find('select.p3d-dropdown-searchable-bulk[name=product_infill]').hide()}
else if(p3d.show_infills=='on'){jQuery(obj).closest('.p3d-stats-bulk').find('select.p3d-dropdown-searchable-bulk[name=product_infill]').show()}
var compatible_infills=new Array();jQuery(obj).closest('.p3d-stats-bulk').find('select.p3d-dropdown-searchable-bulk[name=product_infill]').find('option').each(function(){if(infills.length>0&&jQuery.inArray(jQuery(this).data('id')+'',infills_array)==-1){jQuery(this).prop('disabled',true);p3dInitSelect2Bulk();}
else{jQuery(this).prop('disabled',false);p3dInitSelect2Bulk();compatible_infills.push(jQuery(this).data('id'));}});var selected=false;if(!selected&&compatible_infills.length>0){for(var i=0;i<compatible_infills.length;i++){if(compatible_infills[i]==default_infill){jQuery(obj).closest('.p3d-stats-bulk').find('select.p3d-dropdown-searchable-bulk[name=product_infill]').val(compatible_infills[i]);p3dSelectInfillBulk(jQuery(obj).closest('.p3d-stats-bulk').find('select.p3d-dropdown-searchable-bulk[name=product_infill]'));}}}}
if(printer_type=='other'){jQuery('#infill-info').css('visibility','hidden');jQuery('#tr-stats-print-time').hide();}
else if(printer_type=='laser_cutting'){jQuery('#infill-info').css('visibility','hidden');}
else{if(p3d.show_infills=='on')jQuery('#infill-info').css('visibility','visible');if(p3d.show_model_stats_model_hours=='on')jQuery('#tr-stats-print-time').show();}
p3dGetStatsBulk();p3dAnalyseModelBulk(jQuery(obj).closest('li.plupload_delete').prop('id'));window.wp.event_manager.doAction('3dprint.selectPrinterBulk');}
function p3dSelectInfillBulk(obj){var infill=jQuery(obj).val();var file_id=jQuery(obj).closest('li[class^=plupload]').prop('id')
if(typeof(p3d.analyse_queue[file_id])!='undefined'){p3d.analyse_queue[file_id].infill=infill;}
p3dInitSelect2();var infill_name=jQuery(obj).data('name');p3dAnalyseModelBulk(jQuery(obj).closest('li[class^=plupload]').prop('id'));}
function p3dSelectCoatingBulk(obj){var coating_id=jQuery(obj).val();var file_id=jQuery(obj).closest('li[class^=plupload]').prop('id')
if(typeof(p3d.analyse_queue[file_id])!='undefined'){p3d.analyse_queue[file_id].coating_id=coating_id;}
jQuery(obj).val(coating_id);p3dInitSelect2Bulk();var coating_name=jQuery(obj).data('name');var material_color=jQuery(obj).data('color');if(typeof(document.getElementById('p3d-coating-name'))!=='undefined'){jQuery('#p3d-coating-name').html(p3d.text_coating+' : <div style="background-color:'+material_color+'" class="p3d-color-sample"></div>'+coating_name);}
if(jQuery(obj).hasClass('p3d-color-item')){jQuery(obj).closest('.p3d-fieldset').find('.p3d-color-item').removeClass('p3d-active');jQuery(obj).addClass('p3d-active');}
p3dGetStatsBulk();p3dAnalyseModelBulk(file_id);window.wp.event_manager.doAction('3dprint.selectCoating');}
function p3dSelectPostprocessingBulk(obj,e){e.target.selected=!e.target.selected;e.stopPropagation();var postprocessing_id=jQuery(obj).val();var file_id=jQuery(obj).closest('li[class^=plupload]').prop('id')
if(typeof(p3d.analyse_queue[file_id])!='undefined'){p3d.analyse_queue[file_id].postprocessing_id=postprocessing_id;}
jQuery(obj).val(postprocessing_id);p3dInitSelect2Bulk();var postprocessing_name=jQuery(obj).data('name');var material_color=jQuery(obj).data('color');if(typeof(document.getElementById('p3d-postprocessing-name'))!=='undefined'){jQuery('#p3d-postprocessing-name').html(p3d.text_postprocessing+' : <div style="background-color:'+material_color+';" class="p3d-color-sample"></div>'+postprocessing_name);}
if(jQuery(obj).hasClass('p3d-color-item')){jQuery(obj).closest('.p3d-fieldset').find('.p3d-color-item').removeClass('p3d-active');jQuery(obj).addClass('p3d-active');}
p3dGetStatsBulk();p3dAnalyseModelBulk(file_id);window.wp.event_manager.doAction('3dprint.selectPostprocessing');return false;}
function p3dInitSelect2Bulk(){}
function p3dGetStatsBulk(){}
function p3dCheckPrintabilityBulk(){}
function p3dSelectUnitBulk(obj){var unit=jQuery(obj).val();var file_id=jQuery(obj).closest('li[class^=plupload]').prop('id')
if(typeof(p3d.analyse_queue[file_id])!='undefined'){p3d.analyse_queue[file_id].unit=unit;}
if(typeof(p3d_mp)!='undefined'&&p3d_mp.force_repair_on_scale=='on'){jQuery('#p3d-calculate-price-button').prop('disabled',true);jQuery('#p3d-calculate-loader').show();jQuery('#p3d-submit-button').prop('disabled',true);p3d.analyse_queue[file_id].repair_status=0;if(p3d.xhr3&&p3d.xhr3.readyState!=4){p3d.xhr3.abort();p3d.xhr3.readyState=4;}
if(p3d.xhr4&&p3d.xhr4.readyState!=4){p3d.xhr4.abort();p3d.xhr4.readyState=4;}
clearInterval(p3d.refresh_interval_repair);p3d.repairing=false;p3dRepairModelBulk(file_id);}
p3dAnalyseModelBulk(file_id);}
function p3dSelectQTYBulk(obj){var qty=jQuery(obj).val();var file_id=jQuery(obj).closest('li[class^=plupload]').prop('id')
if(typeof(p3d.analyse_queue[file_id])!='undefined'){p3d.analyse_queue[file_id].qty=qty;}}
function p3dSaveComments(obj){var comments=jQuery(obj).val();var file_id=jQuery(obj).closest('li[class^=plupload]').prop('id')
if(typeof(p3d.analyse_queue[file_id])!='undefined'){p3d.analyse_queue[file_id].comments=comments;}}
function p3dRepairModelBulk(file_id){if(typeof(file_id)=='undefined')return;if(typeof(p3d.analyse_queue[file_id])=='undefined')return;if(p3d.repairing)return;var obj=document.getElementById(file_id);var printer_type=jQuery(obj).find('select[name=product_printer] option:checked').data('type')
var printer_id=jQuery(obj).find('select[name=product_printer]').val()
var material_type=jQuery(obj).find('select[name=product_filament] option:checked').data('type')
var unit=jQuery(obj).find('select[name=product_unit]').val()
if((printer_type=='laser_cutting'||material_type=='laser_cutting')&&p3d.api_render!='on')return;var filename=p3d.analyse_queue[file_id].server_name;var file_ext=filename.split('.').pop().toLowerCase();p3d.repairing=true;p3d.analyse_queue[file_id].repair_status=0;if(p3d.analyse_queue[file_id].xhr3&&p3d.analyse_queue[file_id].xhr3.readyState!=4){p3d.analyse_queue[file_id].xhr3.abort();}
var repair=p3d.api_repair;if(typeof(p3d.analyse_queue[file_id].triangulation_required)!='undefined'&&p3d.analyse_queue[file_id].triangulation_required==true){var repair='on';}
jQuery(obj).find('.plupload_file_status').html(p3d.text_repairing_model);p3d.xhr3=jQuery.ajax({method:"POST",type:"POST",url:p3d.url,data:{action:"p3d_handle_repair",repair:repair,printer_id:printer_id,product_id:jQuery('#p3d-product-id').val(),optimize:p3d.api_optimize,render:p3d.api_render,unit:unit,scale_x:1,scale_y:1,scale_z:1,rotate_x:0,rotate_y:0,filename:filename}}).done(function(msg){var data=jQuery.parseJSON(msg);if(data.status=='0'){jQuery(obj).find('.plupload_file_status').html(p3d.text_repairing_model);if(typeof(data.error)!=='undefined'){jQuery(obj).find('.plupload_file_status').html(p3d.text_model_repair_failed+' : '+data.error.message);}
if(p3d.pricing=='checkout'&&p3d.pricing_irrepairable=='request'){p3d.analyse_queue[file_id].fatal_error=1;p3d.analyse_queue[file_id].repair_status=-1;p3d.analyse_queue[file_id].new_pricing='request';}
p3d.analyse_queue[file_id].repair_status=-1;p3d.repairing=false;p3dRepairModelsBulk();}
else if(data.status=='2'){var server=data.server;p3d.repairing=true;p3d.analyse_queue[file_id].repair_status=2;p3d.refresh_interval_repair=setInterval(function(){p3dRepairCheckBulk(filename,server,obj);},3000);}
else if(typeof(data.error)!=='undefined'){p3d.repairing=false;clearInterval(p3d.refresh_interval_repair);p3d.repair_error=true;p3d.analyse_queue[file_id].repair_status=-1;jQuery(obj).find('.plupload_file_status').html(p3d.text_model_repair_failed+' : '+data.error.message);if(p3d.pricing=='checkout'&&p3d.pricing_irrepairable=='request'){p3d.analyse_queue[file_id].fatal_error=1;p3d.analyse_queue[file_id].repair_status=-1;p3d.analyse_queue[file_id].new_pricing='request';}
p3dRepairModelsBulk();return false;}});}
function p3dRepairCheckBulk(filename,server,obj){if(p3d.xhr4&&p3d.xhr4.readyState!=4){return;}
var printer_type=jQuery(obj).find('select[name=product_printer] option:checked').data('type')
var file_id=jQuery(obj).closest('li[class^=plupload]').prop('id')
var repair=p3d.api_repair;if(typeof(p3d.analyse_queue[file_id].triangulation_required)!='undefined'&&p3d.analyse_queue[file_id].triangulation_required==true){var repair='on';}
p3d.xhr4=jQuery.ajax({method:"POST",type:"POST",url:p3d.url,data:{action:"p3d_handle_repair_check",repair:repair,optimize:p3d.api_optimize,render:p3d.api_render,printer_type:printer_type,product_id:jQuery('#p3d-product-id').val(),server:server,filename:filename}}).done(function(msg){var data=jQuery.parseJSON(msg);if(typeof(data.rendered_file_url)!=='undefined'&&data.rendered_file_url.length>0){p3d.analyse_queue[file_id].thumbnail_url=data.rendered_file_url;jQuery(obj).find('.plupload_file_image').html('<a target="_blank" href="'+data.rendered_file_url+'"><img class="plupload_model_image" src="'+data.rendered_file_url+'"></a>');}
if(data.status=='1'){p3d.repairing=false;clearInterval(p3d.refresh_interval_repair);var data=jQuery.parseJSON(msg);p3d.analyse_queue[file_id].repair_status=1;jQuery(obj).find('.plupload_file_status').html('&nbsp;');if(typeof(data.filename)!=='undefined'&&data.filename.length>0){p3d.new_pricing='';p3d.analyse_queue[file_id].server_name=data.filename;var model_type=data.filename.split('.').pop().toLowerCase();jQuery(obj).find('.plupload_file_status').html(p3d.text_model_repaired);if(typeof(p3d_mp)!='undefined'&&p3d.api_repair=='on'&&data.mp_grade_has_issues){var model_errors='<table class="p3d-model-errors">'+'<tr><td>'+p3d.text_model_repair_nonmanifold_edges+'</td><td>'+data.mp_grade_nonmanifold+'</td></tr>'+'<tr><td>'+p3d.text_model_repair_boundary_edges+'</td><td>'+data.mp_grade_boundary+'</td></tr>'+'<tr><td>'+p3d.text_model_repair_flipped_faces+'</td><td>'+data.mp_grade_flipped+'</td></tr>'+'<tr><td>'+p3d.text_model_repair_inter+'</td><td>'+data.mp_grade_inter+'</td></tr>'+'<tr><td>'+p3d.text_model_repair_thick+'</td><td>'+data.mp_grade_thick+'</td></tr>'+'<tr><td>'+p3d.text_model_repair_clear+'</td><td>'+data.mp_grade_clear+'</td></tr>'+'</table>';p3d.analyse_queue[file_id].html_error_report='<b>'+p3d.text_model_repair_report+'</b><br>'+model_errors;}
if(repair=='on'&&data.needed_repair=='yes'){var model_errors='<table class="p3d-model-errors">'+'<tr><td>'+p3d.text_model_repair_degenerate_facets+'</td><td>'+data.degenerate_facets+'</td></tr>'+'<tr><td>'+p3d.text_model_repair_edges_fixed+'</td><td>'+data.edges_fixed+'</td></tr>'+'<tr><td>'+p3d.text_model_repair_facets_removed+'</td><td>'+data.facets_removed+'</td></tr>'+'<tr><td>'+p3d.text_model_repair_facets_added+'</td><td>'+data.facets_added+'</td></tr>'+'<tr><td>'+p3d.text_model_repair_facets_reversed+'</td><td>'+data.facets_reversed+'</td></tr>'+'<tr><td>'+p3d.text_model_repair_backwards_edges+'</td><td>'+data.backwards_edges+'</td></tr>'+'</table>';p3d.analyse_queue[file_id].html_error_report='<b>'+p3d.text_model_repair_report+'</b><br>'+model_errors;}
if(typeof(data.progress_phase)!='undefined'&&typeof(data.progress)!='undefined'){jQuery(obj).find('.plupload_file_status').html(p3d.text_model_repaired+'&nbsp;'+data.progress+'%');}
if(repair=='on'&&data.needed_repair=='no'){jQuery(obj).find('.plupload_file_status').html(p3d.text_model_repaired);p3dRepairModelsBulk();return;}
jQuery(obj).find('.plupload_file_status').html(p3d.text_model_repaired);}
else if(data.needed_repair=='no'){jQuery(obj).find('.plupload_file_status').html(p3d.text_model_no_repair_needed);}
else if(typeof(data.rendered_file_url)!='undefined'&&data.rendered_file_url.length){p3d.analyse_queue[file_id].repair_status=1;}
else{p3d.analyse_queue[file_id].repair_status=-1;}
p3dRepairModelsBulk();}
else if(data.status=='2'){if(typeof(data.progress_phase)!='undefined'&&typeof(data.progress)!='undefined'){jQuery(obj).find('.plupload_file_status').html(data.progress_phase+'&nbsp;'+data.progress+'%');}}
else if(data.status=='0'){p3d.repairing=false;clearInterval(p3d.refresh_interval_repair);jQuery(obj).find('.plupload_file_status').html(p3d.text_model_repair_failed);if(typeof(data.error)!=='undefined'){jQuery(obj).find('.plupload_file_status').html(p3d.text_model_repair_failed+' : '+data.error.message);}
if(p3d.pricing=='checkout'&&p3d.pricing_irrepairable=='request'){p3d.analyse_queue[file_id].fatal_error=1;p3d.analyse_queue[file_id].new_pricing='request';}
p3d.analyse_queue[file_id].repair_status=-1;p3dRepairModelsBulk();}
else if(typeof(data.error)!=='undefined'){p3d.repairing=false;clearInterval(p3d.refresh_interval_repair);p3d.repair_error=true;jQuery(obj).find('.plupload_file_status').html(data.error.message);if(p3d.pricing=='checkout'&&p3d.pricing_irrepairable=='request'){p3d.analyse_queue[file_id].fatal_error=1;p3d.analyse_queue[file_id].new_pricing='request';}
p3d.analyse_queue[file_id].repair_status=-1;p3dRepairModelsBulk();return false;}});}
function p3dRepairModelsBulk(){var any_to_repair=false;jQuery.each(Object.values(p3d.analyse_queue),function(index,value){var status=0;var file_id=value.id;if(p3d.analyse_queue[file_id].repair_status==0){any_to_repair=true;p3dRepairModelBulk(file_id);}});if(!any_to_repair){jQuery('#p3d-calculate-price-button').prop('disabled',false);jQuery('#p3d-calculate-loader').hide();}}
function p3dAnalyseModelBulk(file_id){if(typeof(file_id)=='undefined')return;if(typeof(p3d.analyse_queue[file_id])=='undefined')return;if(typeof(p3d.analyse_queue[file_id].repair_status)!='undefined'&&p3d.analyse_queue[file_id].repair_status==-1){return;}
clearInterval(p3d.refresh_interval);p3d.analyse_queue[file_id].analyse_status=0;p3d.analyse_queue[file_id].new_pricing=false;p3d.analyse_requested=true;jQuery('#p3d-calculate-price-button').show();jQuery('#p3d-submit-button').prop('disabled',true);}
function p3dAnalyseModelsBulk(){jQuery('#p3d-calculate-price-button').hide();p3d.analyse_ajax_interval_bulk=setInterval(function(){jQuery.each(Object.values(p3d.analyse_queue),function(index,value){var status=0;var file_id=value.id;if(typeof(value.analyse_status)!='undefined'){if(value.analyse_status==0&&value.uploaded){status=value.status;obj=document.getElementById(file_id);p3d.analyse_requested=true;p3dAnalyseModelAJAXBulk(obj,status);return false;}
else{p3d.analyse_requested=false;return;}}
else return;});jQuery.each(Object.values(p3d.analyse_queue),function(index,value){if(typeof(value.analyse_status)!='undefined'){if((value.analyse_status==0||value.analyse_status==2)&&value.uploaded){p3d.all_finished=false;return false;}
else{p3d.all_finished=true;return;}}})
if(p3d.all_finished){clearInterval(p3d.analyse_ajax_interval_bulk);}
p3dCheckAllFinished();},1000);}
function p3dAnalyseModelAJAXBulk(obj,status){if(typeof(obj)=='undefined')return;if(status!=5)return;if(p3d.analysing)return;if(Object.keys(p3d.analyse_queue).length==0)return;var file_id=jQuery(obj).prop('id');var dim_x=dim_y=dim_z=0;jQuery(obj).find('.plupload_file_status').html(p3d.text_bulk_analysing+' 1%');if(p3d.analyse_queue[file_id]&&p3d.analyse_queue[file_id].xhr1&&p3d.analyse_queue[file_id].xhr1.readyState!=4){p3d.analyse_queue[file_id].xhr1.abort();p3d.analysing=false;p3d.analyse_queue[file_id].analyse_status=0;}
if(p3d.analyse_queue[file_id]&&p3d.analyse_queue[file_id].xhr2&&p3d.analyse_queue[file_id].xhr2.readyState!=4){p3d.analyse_queue[file_id].xhr2.abort();p3d.analysing=false;p3d.analyse_queue[file_id].analyse_status=0;}
if(typeof(p3d.analyse_queue[file_id].dim_x)!='undefined'){dim_x=p3d.analyse_queue[file_id].dim_x;}
if(typeof(p3d.analyse_queue[file_id].dim_y)!='undefined'){dim_y=p3d.analyse_queue[file_id].dim_y;}
if(typeof(p3d.analyse_queue[file_id].dim_z)!='undefined'){dim_z=((jQuery('#'+file_id).find('select[name=product_filament] option:selected').data('laser-cutting-thickness'))/10).toFixed(2)}
var triangulation_required=false;var printer_type=jQuery(obj).find('select[name=product_printer] option:checked').data('type')
var printer_id=jQuery(obj).find('select[name=product_printer]').val();var infill=jQuery(obj).find('select[name=product_infill]').val();var infill_id=jQuery(obj).find('select[name=product_infill] option:checked').data('infill-id');var printer_id=jQuery(obj).find('select[name=product_printer]').val()
var material_id=jQuery(obj).find('select[name=product_filament]').val();var unit=jQuery(obj).find('select[name=product_unit]').val();var filename=p3d.analyse_queue[file_id].server_name;jQuery('#p3d-repair-image').hide();var price_field=jQuery(obj).find('.plupload_file_status');var cutting_instructions='';var postprocessing=jQuery(obj).find('select[name=product_postprocessing]').val();var custom_attributes={};jQuery(obj).find('select[name^=p3d_cutting_instructions]').each(function(i,select_obj){var start=jQuery(select_obj).prop('name').indexOf('[')+2;var end=jQuery(select_obj).prop('name').indexOf(']')-1;var obj_color=jQuery(select_obj).prop('name').substring(start,end);var obj_instruction=jQuery(select_obj).val();cutting_instructions+=obj_color+'='+obj_instruction+',';});jQuery(obj).find('select[name^=attribute_pa]').each(function(i,select_obj){var attribute_name=jQuery(select_obj).data('id');var attribute_value=jQuery(select_obj).val();custom_attributes[attribute_name]=attribute_value;});if(p3d.analyse_requested){p3d.analysing=true;p3d.analyse_queue[file_id].xhr1=jQuery.ajax({method:"POST",type:"POST",url:p3d.url,data:{action:"p3d_handle_analyse",product_id:jQuery('#p3d-product-id').val(),printer_id:printer_id,material_id:material_id,filename:filename,infill:infill,infill_id:infill_id,cutting_instructions:cutting_instructions,custom_attributes:JSON.stringify(custom_attributes),postprocessing:postprocessing,scale:1,p3d_dim_x:dim_x,p3d_dim_y:dim_y,p3d_dim_z:dim_z,unit:unit,triangulation:triangulation_required,api_analyse:p3d.api_analyse,bulk:true,calculate_price:true}}).done(function(msg){var data=jQuery.parseJSON(msg);if(typeof(data.error)!=='undefined'){p3d.analysing=false;jQuery('#p3d-submit-button').prop('disabled',false);p3d.analyse_queue[file_id].analyse_status=-1;if(data.error.code==120){if(p3d.pricing_too_large=='request'){p3d.analyse_queue[file_id].fatal_error=1;p3d.analyse_queue[file_id].new_pricing='request';}}
else if(data.error.code==121){if(p3d.pricing_too_small=='request'){p3d.analyse_queue[file_id].fatal_error=1;p3d.analyse_queue[file_id].new_pricing='request';}}
else if(p3d.pricing_api_expired=='request'){p3d.analyse_queue[file_id].fatal_error=1;p3d.analyse_queue[file_id].new_pricing='request';}
jQuery(obj).find('.plupload_file_status').html(data.error.message);return false;}
if(data.status=='2'){var server=data.server;p3d.checking=true;p3dDisplayPrice(false);jQuery(obj).find('.plupload_file_status').html(p3d.text_bulk_analysing+' 10%');p3d.analyse_queue[file_id].analyse_status=2;p3d.refresh_interval=setInterval(function(){p3danalyseCheckBulk(filename,server,obj);},3000);}
else if(data.status=='1'){p3d.analysing=false;p3d.checking=false;p3d.analyse_error=false;p3d.triangulated_volume=data.material_volume;p3d.triangulated_surface_area=data.surface_area;p3dShowResponseBulk(obj,data);p3d.analyse_queue[file_id].analyse_status=1;jQuery(obj).find('.plupload_file_status').html(p3d.text_bulk_analysing+' 100%');p3d.analyse_queue[file_id].html_status=jQuery(obj).find('.plupload_file_status').html();p3dCheckAllFinished();price_field.html(p3d.text_bulk_analysing+' 100%')
clearInterval(p3d.refresh_interval);}
else if(data.status=='0'){jQuery(obj).find('.plupload_file_status').html(p3d.text_model_analyse_failed);p3d.analyse_error=true;p3d.analysing=false;p3d.analyse_queue[file_id].analyse_status=-1;if(p3d.pricing_api_expired=='request'){p3d.analyse_queue[file_id].fatal_error=1;p3d.analyse_queue[file_id].new_pricing='request';}}});}
p3d.analyse_requested=false;}
function p3danalyseCheckBulk(filename,server,obj){var file_id=jQuery(obj).closest('li[class^=plupload]').prop('id');if(p3d.analyse_queue[file_id]&&p3d.analyse_queue[file_id].xhr2&&p3d.analyse_queue[file_id].xhr2.readyState!=4){return;}
if(p3d.processing){return;}
var printer_type=jQuery(obj).find('select[name=product_printer] option:checked').data('type')
var printer_id=jQuery(obj).find('select[name=product_printer]').val();var infill=jQuery(obj).find('select[name=product_infill]').val();var infill_id=jQuery(obj).find('select[name=product_infill] option:checked').data('infill-id');var printer_id=jQuery(obj).find('select[name=product_printer]').val()
var material_id=jQuery(obj).find('select[name=product_filament]').val();var unit=jQuery(obj).find('select[name=product_unit]').val();var cutting_instructions='';var postprocessing=jQuery(obj).find('select[name=product_postprocessing]').val();jQuery(obj).find('select[name^=p3d_cutting_instructions]').each(function(i,select_obj){var start=jQuery(select_obj).prop('name').indexOf('[')+2;var end=jQuery(select_obj).prop('name').indexOf(']')-1;var obj_color=jQuery(select_obj).prop('name').substring(start,end);var obj_instruction=jQuery(select_obj).val();cutting_instructions+=obj_color+'='+obj_instruction+',';});var custom_attributes={};jQuery(obj).find('select[name^=attribute_pa]').each(function(i,select_obj){var attribute_name=jQuery(select_obj).data('id');var attribute_value=jQuery(select_obj).val();custom_attributes[attribute_name]=attribute_value;});var dim_x=dim_y=dim_z=0;if(typeof(p3d.analyse_queue[file_id].dim_x)!='undefined'){dim_x=p3d.analyse_queue[file_id].dim_x;}
if(typeof(p3d.analyse_queue[file_id].dim_y)!='undefined'){dim_y=p3d.analyse_queue[file_id].dim_y;}
if(typeof(p3d.analyse_queue[file_id].dim_z)!='undefined'){dim_z=((jQuery('#'+file_id).find('select[name=product_filament] option:selected').data('laser-cutting-thickness'))/10).toFixed(2);}
if(p3d.pricing=='checkout'){p3dDisplayAddToCart(false);p3dDisplayQuoteLoading(true);}
p3dDisplayPrice(false);if(p3d.analyse_queue[file_id].analyse_status==1||p3d.analyse_queue[file_id].analyse_status==-1)return;p3d.analyse_queue[file_id].xhr2=jQuery.ajax({method:"POST",type:"POST",url:p3d.url,data:{action:"p3d_handle_analyse_check",product_id:jQuery('#p3d-product-id').val(),printer_id:printer_id,material_id:material_id,filename:filename,server:server,infill:infill,infill_id:infill_id,scale:1,unit:unit,cutting_instructions:cutting_instructions,custom_attributes:JSON.stringify(custom_attributes),postprocessing:postprocessing,p3d_dim_x:dim_x,p3d_dim_y:dim_y,p3d_dim_z:dim_z,triangulation:false,calculate_price:true,bulk:true}}).done(function(msg){var data=jQuery.parseJSON(msg);if(typeof(data.error)!=='undefined'){p3d.analyse_error=true;p3d.analysing=false;jQuery(obj).find('.plupload_file_status').html(data.error.message);if(p3d.pricing_api_expired=='request')p3d.fatal_error=1;p3d.analyse_queue[file_id].analyse_status=-1;if(p3d.pricing_api_expired=='request'){p3d.analyse_queue[file_id].fatal_error=1;p3d.analyse_queue[file_id].new_pricing='request';}
p3dCheckAllFinished();clearInterval(p3d.refresh_interval);}
if(data.status=='1'){p3d.checking=false;p3d.analyse_error=false;p3d.analysing=false;p3dShowResponseBulk(obj,data);if(typeof(data.print_time)!='undefined'&&data.print_time==0&&p3d.api_analyse=='on'){if(p3d.pricing_print_time_zero=='request'){p3d.analyse_queue[file_id].analyse_status=-1;p3d.analyse_queue[file_id].fatal_error=1;p3d.analyse_queue[file_id].new_pricing='request';}}
p3d.analyse_queue[file_id].analyse_status=1;p3dCheckAllFinished();jQuery(obj).find('.plupload_file_status').html(p3d.text_bulk_analysing+' 100%');p3d.analyse_queue[file_id].html_status=jQuery(obj).find('.plupload_file_status').html();clearInterval(p3d.refresh_interval);}
if(data.status=='2'){p3d.analyse_queue[file_id].analyse_status=2;jQuery(obj).find('.plupload_file_status').html(p3d.text_bulk_analysing+' '+data.progress+'%');}});}
function p3dShowResponseBulk(obj,model_stats){var price=0;var html_price='';var html_thumb='';var file_id=jQuery(obj).closest('li[class^=plupload]').prop('id');if(p3d.price_num_decimals<0)price=p3dRoundPrice(model_stats.price);else price=model_stats.price.toFixed(p3d.price_num_decimals);var filename=p3d.analyse_queue[file_id].server_name;var file_ext=filename.split('.').pop().toLowerCase();var material_thickness=jQuery('#'+file_id).find('select[name=product_filament] option:selected').data('laser-cutting-thickness')/10;if(typeof(p3d.analyse_queue[file_id].bb)!='undefined'){model_stats.x_dim=p3d.analyse_queue[file_id].bb.max.x-p3d.analyse_queue[file_id].bb.min.x;model_stats.y_dim=p3d.analyse_queue[file_id].bb.max.y-p3d.analyse_queue[file_id].bb.min.y;model_stats.z_dim=jQuery('#'+file_id).find('select[name=product_filament] option:selected').data('laser-cutting-thickness')}
jQuery('#p3d-info-bulk .stats-material-volume').html((model_stats.material_volume/1000).toFixed(2));if(typeof(p3d.analyse_queue[file_id].thumbnail_url)!='undefined'){jQuery('#p3d-info-bulk img.stats_plupload_model_image').prop('src',p3d.analyse_queue[file_id].thumbnail_url).show();jQuery('#p3d-info-bulk a.stats_plupload_model_image_link').prop('href',p3d.analyse_queue[file_id].thumbnail_url);jQuery('#p3d-cv-bulk').data('p3dv_model_url',p3d.upload_url+p3d.analyse_queue[file_id].server_name);}
if(file_ext=='dxf'){model_stats.surface_area=model_stats.x_dim*model_stats.y_dim;jQuery('#p3d-info-bulk .tr-stats-material-volume').hide();jQuery('#p3d-info-bulk .tr-stats-weight').hide();jQuery('#p3d-info-bulk .tr-stats-support-volume').hide();jQuery('#p3d-info-bulk .tr-stats-polygons').hide();jQuery('#p3d-info-bulk .stats-height').html(material_thickness);if(p3d.show_model_stats_shape_number=='on'){jQuery('#p3d-info-bulk .tr-stats-shapes').show();}
if(p3d.show_model_stats_total_path=='on'){jQuery('#p3d-info-bulk .tr-stats-total-path').show();}}
else{if(p3d.show_model_stats_material_volume=='on'){jQuery('#p3d-info-bulk .tr-stats-material-volume').show();}
if(p3d.show_model_stats_support_material_volume=='on'){jQuery('#p3d-info-bulk .tr-stats-support-material-volume').show();}
if(p3d.show_model_stats_box_volume=='on'){jQuery('#p3d-info-bulk .tr-stats-box-volume').show();}
if(p3d.show_model_stats_surface_area=='on'){jQuery('#p3d-info-bulk .tr-stats-surface-area').show();}
if(p3d.show_model_stats_model_weight=='on'){jQuery('#p3d-info-bulk .tr-stats-weight').show();}
if(p3d.show_model_stats_polygon_number=='on'){jQuery('#p3d-info-bulk .tr-stats-polygons').show();}
jQuery('#p3d-info-bulk .tr-stats-shapes').hide();jQuery('#p3d-info-bulk .tr-stats-total-path').hide();}
if(typeof(model_stats.support_material_volume)!=='undefined'){jQuery('#p3d-info-bulk .stats-support-material-volume').html((model_stats.support_material_volume/1000).toFixed(2));}
jQuery('#p3d-info-bulk .stats-box-volume').html((model_stats.x_dim/10*model_stats.y_dim/10*model_stats.z_dim/10).toFixed(2));jQuery('#p3d-info-bulk .stats-surface-area').html((model_stats.surface_area/100).toFixed(2));jQuery('#p3d-info-bulk .stats-width').html((model_stats.x_dim/10).toFixed(2));jQuery('#p3d-info-bulk .stats-length').html((model_stats.y_dim/10).toFixed(2));jQuery('#p3d-info-bulk .stats-height').html((model_stats.z_dim/10).toFixed(2));jQuery('#p3d-info-bulk .stats-weight').html((model_stats.weight).toFixed(2));if(typeof(model_stats.print_time)!='undefined'){jQuery('#p3d-info-bulk .stats-hours').html(new Date(model_stats.print_time*1000).toISOString().substr(11,8));}
jQuery('#p3d-info-bulk .stats-total-path').html((parseFloat(model_stats.cut_path)/10).toFixed(2));jQuery('#p3d-info-bulk .stats-shapes').html(model_stats.shape_number);var html_stats=jQuery('#p3d-info-bulk').html();if(typeof(p3d.analyse_queue[file_id].html_error_report)!='undefined'){html_stats+=p3d.analyse_queue[file_id].html_error_report;}
p3d.analyse_queue[file_id].html_stats=html_stats;p3d.analyse_queue[file_id].dim_x=(model_stats.x_dim/10).toFixed(2);p3d.analyse_queue[file_id].dim_y=(model_stats.y_dim/10).toFixed(2);p3d.analyse_queue[file_id].dim_z=(model_stats.z_dim/10).toFixed(2);jQuery(obj).closest('li[class^=plupload]').find('.plupload_info_icon').css('visibility','visible')
jQuery('#plupload-popup-'+file_id).find('.plupload-content').html(html_stats)
price*=p3d.currency_rate;if(p3d.currency_position=='left')
accounting.settings.currency.format="%s%v";else if(p3d.currency_position=='left_space')
accounting.settings.currency.format="%s %v";else if(p3d.currency_position=='right')
accounting.settings.currency.format="%v%s";else if(p3d.currency_position=='right_space')
accounting.settings.currency.format="%v %s";if(p3d.price_num_decimals<0)
html_price=accounting.formatMoney(p3dRoundPrice(price),p3d.currency_symbol,0,p3d.thousand_sep,p3d.decimal_sep);else
html_price=accounting.formatMoney(price,p3d.currency_symbol,p3d.price_num_decimals,p3d.thousand_sep,p3d.decimal_sep);p3d.analyse_queue[file_id].html_price=html_price;p3d.analyse_queue[file_id].price=price;jQuery(obj).find('.plupload_file_price').html(html_price);}
function p3dSubmitFormBulk(){var any_error=false;var email_address=jQuery('#p3d-email-address').val();var the_form='<form action="" method="post">';the_form+='<input type="hidden" name="p3d_action" value="bulk_submit">';jQuery.each(Object.values(p3d.analyse_queue),function(index,value){var file_id=value.id;var obj=jQuery('li#'+file_id);var printer_id=jQuery(obj).find('select[name=product_printer]').val()
var material_id=jQuery(obj).find('select[name=product_filament]').val();var infill=jQuery(obj).find('select[name=product_infill]').val();var infill_id=jQuery(obj).find('select[name=product_infill] option:checked').data('infill-id');var coating_id=jQuery(obj).find('select[name=product_coating]').val();var postprocessing_id=jQuery(obj).find('select[name=product_postprocessing]').val();var unit=jQuery(obj).find('select[name=product_unit]').val();var qty=jQuery(obj).find('.plupload_file_qty input').val();var comments=jQuery(obj).find('textarea.p3d-bulk-comments').val();var cutting_instructions='';jQuery(obj).find('select[name^=p3d_cutting_instructions]').each(function(i,select_obj){var start=jQuery(select_obj).prop('name').indexOf('[')+2;var end=jQuery(select_obj).prop('name').indexOf(']')-1;var obj_color=jQuery(select_obj).prop('name').substring(start,end);var obj_instruction=jQuery(select_obj).val();cutting_instructions+=obj_color+'='+obj_instruction+',';});jQuery(obj).find('select[name^=attribute_pa]').each(function(i,select_obj){var attribute_name=jQuery(select_obj).data('id');var attribute_value=jQuery(select_obj).val();the_form+='<input type="hidden" name="p3d_custom_attributes['+file_id+']['+attribute_name+']" value="'+attribute_value+'">';});if(p3dGetCurrentCurrency()){the_form+='<input type="hidden" name="p3d_estimated_price_currency" value="'+p3dGetCurrentCurrency()+'">';}
else{the_form+='<input type="hidden" name="p3d_estimated_price_currency" value="">';}
the_form+='<input type="hidden" name="p3d_files['+file_id+']" value="'+value.server_name+'">';the_form+='<input type="hidden" name="p3d_original_names['+file_id+']" value="'+value.name+'">';the_form+='<input type="hidden" name="p3d_prices['+file_id+']" value="'+value.price+'">';the_form+='<input type="hidden" name="p3d_printers['+file_id+']" value="'+printer_id+'">';the_form+='<input type="hidden" name="p3d_materials['+file_id+']" value="'+material_id+'">';the_form+='<input type="hidden" name="p3d_coatings['+file_id+']" value="'+coating_id+'">';the_form+='<input type="hidden" name="p3d_infills['+file_id+']" value="'+infill+'">';the_form+='<input type="hidden" name="p3d_infill_ids['+file_id+']" value="'+infill_id+'">';the_form+='<input type="hidden" name="p3d_postprocessings['+file_id+']" value="'+postprocessing_id+'">';the_form+='<input type="hidden" name="p3d_units['+file_id+']" value="'+unit+'">';the_form+='<input type="hidden" name="p3d_quantities['+file_id+']" value="'+qty+'">';the_form+='<input type="hidden" name="p3d_cutting_instructions['+file_id+']" value="'+cutting_instructions+'">';the_form+='<input type="hidden" name="p3d_comments['+file_id+']" value="'+comments+'">';the_form+='<input type="hidden" name="p3d_dims_x['+file_id+']" value="'+p3d.analyse_queue[file_id].dim_x+'">';the_form+='<input type="hidden" name="p3d_dims_y['+file_id+']" value="'+p3d.analyse_queue[file_id].dim_y+'">';the_form+='<input type="hidden" name="p3d_dims_z['+file_id+']" value="'+p3d.analyse_queue[file_id].dim_z+'">';if(typeof(value.new_pricing)!='undefined'&&value.new_pricing){any_error=true;the_form+='<input type="hidden" name="p3d_new_pricings['+file_id+']" value="'+value.new_pricing+'">';}
if(parseFloat(value.price)==0){any_error=true;}});if(any_error||p3d.pricing!='checkout'){if(email_address.length==0){jQuery('#p3d-email-address-wrapper').show();alert(p3d.text_bulk_email);return false;}}
the_form+='<input type="hidden" name="p3d_mode" value="'+p3d.pricing+'">';the_form+='<input type="hidden" name="p3d_product_id" value="'+jQuery('#p3d-product-id').val()+'">';the_form+='<input type="hidden" name="p3d_email_address" value="'+email_address+'">';the_form+='</form>';jQuery(the_form).appendTo('body').submit();}
function p3dCheckAllFinished(){if(p3d.all_finished){jQuery('.p3d-button-loader').hide();jQuery('#p3d-submit-button').prop('disabled',false);jQuery('#p3d-submit-button').show();jQuery('#p3d-bulk-uploader_browse').show();jQuery('.p3d-stats-bulk').find('select').prop('disabled',false);}
else{jQuery('.p3d-button-loader').show();jQuery('#p3d-submit-button').prop('disabled',true);jQuery('#p3d-bulk-uploader_browse').hide();jQuery('.p3d-stats-bulk').find('select').prop('disabled',true);}}
jQuery(document).ready(function(){p3dInitBulk();});
plupload.addI18n({"Stop Upload":"Przerwij transfer.","Upload URL might be wrong or doesn't exist.":"Adres URL moze bys nieprawidlowy lub moze nieistniec","tb":"tb","Size":"Rozmiar","Close":"Zamknij","Init error.":"Błąd inicjalizacji.","Add files to the upload queue and click the start button.":"Dodaj pliki i kliknij 'Rozpocznij transfer'.","Filename":"Nazwa pliku","Image format either wrong or not supported.":"Format zdjecia jest zly lub nieobslugiwany","Status":"Status","HTTP Error.":"Błąd HTTP.","Start Upload":"Wyslij","mb":"mb","kb":"kb","Duplicate file error.":"Blad: duplikacja pliku.","File size error.":"Plik jest zbyt duży.","N/A":"Nie dostępne","gb":"gb","Error: Invalid file extension:":"Blad: Nieprawidlowe rozszerzenie pliku:","Select files":"Wybierz pliki:","%s already present in the queue.":"%s juz wystepuje w kolejce.","File: %s":"Plik: %s","b":"b","Uploaded %d/%d files":"Wysłano %d/%d plików","Upload element accepts only %d file(s) at a time. Extra files were stripped.":"Upload element accepts only %d file(s) at a time. Extra files were stripped.","%d files queued":"%d plików w kolejce.","File: %s, size: %d, max file size: %d":"Plik: %s, rozmiar: %d, maksymalny rozmiar pliku: %d","Drag files here.":"Przeciągnij tu pliki","Runtime ran out of available memory.":"Wyczerpano pamiec RAM.","File count error.":"Blad liczenia pliku.","File extension error.":"Nieobsługiwany format pliku.","Error: File too large:":"Blad: Plik za duzy:","Add Files":"Dodaj pliki"});
!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"undefined"!=typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(_){_.fn.SumoSelect=function(e){var o=_.extend({placeholder:"Select Here",csvDispCount:3,captionFormat:"{0} Selected",captionFormatAllSelected:"{0} all selected!",floatWidth:400,forceCustomRendering:!1,nativeOnDevice:["Android","BlackBerry","iPhone","iPad","iPod","Opera Mini","IEMobile","Silk"],outputAsCSV:!1,csvSepChar:",",okCancelInMulti:!1,isClickAwayOk:!1,triggerChangeCombined:!0,selectAll:!1,search:!1,searchText:"Search...",noMatch:'No matches for "{0}"',prefix:"",locale:["OK","Cancel","Select All"],up:!1,showTitle:!0},e),t=this.each(function(){var r=this;!this.sumo&&_(this).is("select")&&(this.sumo={E:_(r),is_multi:_(r).attr("multiple"),select:"",caption:"",placeholder:"",optDiv:"",CaptionCont:"",ul:"",is_floating:!1,is_opened:!1,mob:!1,Pstate:[],createElems:function(){var e=this;e.E.wrap('<div class="SumoSelect" tabindex="0" role="button" aria-expanded="false">'),e.select=e.E.parent(),e.caption=_("<span>"),e.CaptionCont=_('<p class="CaptionCont SelectBox" ><label><i></i></label></p>').attr("style",e.E.attr("style")).prepend(e.caption),e.select.append(e.CaptionCont),e.is_multi||(o.okCancelInMulti=!1),e.E.attr("disabled")&&e.select.addClass("disabled").removeAttr("tabindex"),o.outputAsCSV&&e.is_multi&&e.E.attr("name")&&(e.select.append(_('<input class="HEMANT123" type="hidden" />').attr("name",e.E.attr("name")).val(e.getSelStr())),e.E.removeAttr("name")),!e.isMobile()||o.forceCustomRendering?(e.E.attr("name")&&e.select.addClass("sumo_"+e.E.attr("name").replace(/\[\]/,"")),e.E.addClass("SumoUnder").attr("tabindex","-1"),e.optDiv=_('<div class="optWrapper '+(o.up?"up":"")+'">'),e.floatingList(),e.ul=_('<ul class="options">'),e.optDiv.append(e.ul),o.selectAll&&e.is_multi&&e.SelAll(),o.search&&e.Search(),e.ul.append(e.prepItems(e.E.children())),e.is_multi&&e.multiSelelect(),e.select.append(e.optDiv),e.basicEvents(),e.selAllState()):e.setNativeMobile()},prepItems:function(e,a){var i=[],r=this;return _(e).each(function(e,t){t=_(t),i.push(t.is("optgroup")?_('<li class="group '+(t[0].disabled?"disabled":"")+'"><label>'+t.attr("label")+"</label><ul></ul></li>").find("ul").append(r.prepItems(t.children(),t[0].disabled)).end():r.createLi(t,a))}),i},createLi:function(e,t){e.attr("value")||e.attr("value",e.val());var a=_('<li class="opt"><label>'+e.text()+"</label></li>");return a.data("opt",e),e.data("li",a),this.is_multi&&a.prepend("<span><i></i></span>"),(e[0].disabled||t)&&(a=a.addClass("disabled")),this.onOptClick(a),e[0].selected&&a.addClass("selected"),e.attr("class")&&a.addClass(e.attr("class")),e.attr("title")&&a.attr("title",e.attr("title")),a},getSelStr:function(){return sopt=[],this.E.find("option:selected").each(function(){sopt.push(_(this).val())}),sopt.join(o.csvSepChar)},multiSelelect:function(){var a=this;a.optDiv.addClass("multiple"),a.okbtn=_('<p tabindex="0" class="btnOk">'+o.locale[0]+"</p>").click(function(){a._okbtn(),a.hideOpts()}),a.cancelBtn=_('<p tabindex="0" class="btnCancel">'+o.locale[1]+"</p>").click(function(){a._cnbtn(),a.hideOpts()});var e=a.okbtn.add(a.cancelBtn);a.optDiv.append(_('<div class="MultiControls">').append(e)),e.on("keydown.sumo",function(e){var t=_(this);switch(e.which){case 32:case 13:t.trigger("click");break;case 9:if(t.hasClass("btnOk"))return;case 27:return a._cnbtn(),void a.hideOpts()}e.stopPropagation(),e.preventDefault()})},_okbtn:function(){var a=this,i=0;o.triggerChangeCombined&&(a.E.find("option:selected").length!=a.Pstate.length?i=1:a.E.find("option").each(function(e,t){t.selected&&a.Pstate.indexOf(e)<0&&(i=1)}),i&&(a.callChange(),a.setText()))},_cnbtn:function(){var e=this;e.E.find("option:selected").each(function(){this.selected=!1}),e.optDiv.find("li.selected").removeClass("selected");for(var t=0;t<e.Pstate.length;t++)e.E.find("option")[e.Pstate[t]].selected=!0,e.ul.find("li.opt").eq(e.Pstate[t]).addClass("selected");e.selAllState()},SelAll:function(){var e=this;e.is_multi&&(e.selAll=_('<p class="select-all"><span><i></i></span><label>'+o.locale[2]+"</label></p>"),e.optDiv.addClass("selall"),e.selAll.on("click",function(){e.selAll.toggleClass("selected"),e.toggSelAll(e.selAll.hasClass("selected"),1)}),e.optDiv.prepend(e.selAll))},Search:function(){var i=this,e=i.CaptionCont.addClass("search"),t=_('<p class="no-match">');i.ftxt=_('<input type="text" class="search-txt" value="" placeholder="'+o.searchText+'">').on("click",function(e){e.stopPropagation()}),e.append(i.ftxt),i.optDiv.children("ul").after(t),i.ftxt.on("keyup.sumo",function(){var e=i.optDiv.find("ul.options li.opt").each(function(e,t){var a=(t=_(t)).data("opt")[0];a.hidden=t.text().toLowerCase().indexOf(i.ftxt.val().toLowerCase())<0,t.toggleClass("hidden",a.hidden)}).not(".hidden");t.html(o.noMatch.replace(/\{0\}/g,"<em></em>")).toggle(!e.length),t.find("em").text(i.ftxt.val()),i.selAllState()})},selAllState:function(){var e=this;if(o.selectAll&&e.is_multi){var a=0,i=0;e.optDiv.find("li.opt").not(".hidden").each(function(e,t){_(t).hasClass("selected")&&a++,_(t).hasClass("disabled")||i++}),a==i?e.selAll.removeClass("partial").addClass("selected"):0==a?e.selAll.removeClass("selected partial"):e.selAll.addClass("partial")}},showOpts:function(){var t=this;t.E.attr("disabled")||(t.E.trigger("sumo:opening",t),t.is_opened=!0,t.select.addClass("open").attr("aria-expanded","true"),t.E.trigger("sumo:opened",t),t.ftxt?t.ftxt.focus():t.select.focus(),_(document).on("click.sumo",function(e){if(!t.select.is(e.target)&&0===t.select.has(e.target).length){if(!t.is_opened)return;t.hideOpts(),o.okCancelInMulti&&(o.isClickAwayOk?t._okbtn():t._cnbtn())}}),t.is_floating&&(H=t.optDiv.children("ul").outerHeight()+2,t.is_multi&&(H+=parseInt(t.optDiv.css("padding-bottom"))),t.optDiv.css("height",H),_("body").addClass("sumoStopScroll")),t.setPstate())},setPstate:function(){var a=this;a.is_multi&&(a.is_floating||o.okCancelInMulti)&&(a.Pstate=[],a.E.find("option").each(function(e,t){t.selected&&a.Pstate.push(e)}))},callChange:function(){this.E.trigger("change").trigger("click")},hideOpts:function(){var e=this;e.is_opened&&(e.E.trigger("sumo:closing",e),e.is_opened=!1,e.select.removeClass("open").attr("aria-expanded","true").find("ul li.sel").removeClass("sel"),e.E.trigger("sumo:closed",e),_(document).off("click.sumo"),e.select.focus(),_("body").removeClass("sumoStopScroll"),o.search&&(e.ftxt.val(""),e.ftxt.trigger("keyup.sumo")))},setOnOpen:function(){var e=this,t=e.optDiv.find("li.opt:not(.hidden)").eq(o.search?0:e.E[0].selectedIndex);t.hasClass("disabled")&&!(t=t.next(":not(disabled)")).length||(e.optDiv.find("li.sel").removeClass("sel"),t.addClass("sel"),e.showOpts())},nav:function(e){var t,a=this,i=a.ul.find("li.opt:not(.disabled, .hidden)"),r=a.ul.find("li.opt.sel:not(.hidden)"),o=i.index(r);if(a.is_opened&&r.length){if(e&&0<o)t=i.eq(o-1);else{if(!(!e&&o<i.length-1&&-1<o))return;t=i.eq(o+1)}r.removeClass("sel"),r=t.addClass("sel");var _=a.ul,s=_.scrollTop(),n=r.position().top+s;n>=s+_.height()-r.outerHeight()&&_.scrollTop(n-_.height()+r.outerHeight()),n<s&&_.scrollTop(n)}else a.setOnOpen()},basicEvents:function(){var t=this;t.CaptionCont.click(function(e){t.E.trigger("click"),t.is_opened?t.hideOpts():t.showOpts(),e.stopPropagation()}),t.select.on("keydown.sumo",function(e){switch(e.which){case 38:t.nav(!0);break;case 40:t.nav(!1);break;case 65:if(t.is_multi&&e.ctrlKey){t.toggSelAll(!e.shiftKey,1);break}return;case 32:if(o.search&&t.ftxt.is(e.target))return;case 13:t.is_opened?t.optDiv.find("ul li.sel").trigger("click"):t.setOnOpen();break;case 9:return void(o.okCancelInMulti||t.hideOpts());case 27:return o.okCancelInMulti&&t._cnbtn(),void t.hideOpts();default:return}e.preventDefault()}),_(window).on("resize.sumo",function(){t.floatingList()})},onOptClick:function(e){var t=this;e.click(function(){var e=_(this);if(!e.hasClass("disabled")){t.is_multi?(e.toggleClass("selected"),e.data("opt")[0].selected=e.hasClass("selected"),t.selAllState()):(e.parent().find("li.selected").removeClass("selected"),e.toggleClass("selected"),e.data("opt")[0].selected=!0),t.is_multi&&o.triggerChangeCombined&&(t.is_floating||o.okCancelInMulti)||(t.setText(),t.callChange()),t.is_multi||t.hideOpts()}})},setText:function(){var e=this;if(e.placeholder="",e.is_multi){for(sels=e.E.find(":selected").not(":disabled"),i=0;i<sels.length;i++){if(i+1>=o.csvDispCount&&o.csvDispCount){sels.length==e.E.find("option").length&&o.captionFormatAllSelected?e.placeholder=o.captionFormatAllSelected.replace(/\{0\}/g,sels.length)+",":e.placeholder=o.captionFormat.replace(/\{0\}/g,sels.length)+",";break}e.placeholder+=_(sels[i]).text()+", "}e.placeholder=e.placeholder.replace(/,([^,]*)$/,"$1")}else e.placeholder=e.E.find(":selected").not(":disabled").text();var t=!1;e.placeholder||(t=!0,e.placeholder=e.E.attr("placeholder"),e.placeholder||(e.placeholder=e.E.find("option:disabled:selected").text())),e.placeholder=e.placeholder?o.prefix+" "+e.placeholder:o.placeholder,e.caption.html(e.placeholder),o.showTitle&&e.CaptionCont.attr("title",e.placeholder);var a=e.select.find("input.HEMANT123");return a.length&&a.val(e.getSelStr()),t?e.caption.addClass("placeholder"):e.caption.removeClass("placeholder"),e.placeholder},isMobile:function(){for(var e=navigator.userAgent||navigator.vendor||window.opera,t=0;t<o.nativeOnDevice.length;t++)if(0<e.toString().toLowerCase().indexOf(o.nativeOnDevice[t].toLowerCase()))return o.nativeOnDevice[t];return!1},setNativeMobile:function(){var e=this;e.E.addClass("SelectClass"),e.mob=!0,e.E.change(function(){e.setText()})},floatingList:function(){var e=this;e.is_floating=_(window).width()<=o.floatWidth,e.optDiv.toggleClass("isFloating",e.is_floating),e.is_floating||e.optDiv.css("height",""),e.optDiv.toggleClass("okCancelInMulti",o.okCancelInMulti&&!e.is_floating)},vRange:function(e){if(this.E.find("option").length<=e||e<0)throw"index out of bounds";return this},toggSel:function(e,t){var a,i=this;(a="number"==typeof t?(i.vRange(t),i.E.find("option")[t]):i.E.find('option[value="'+t+'"]')[0]||0)&&!a.disabled&&a.selected!=e&&(a.selected=e,i.mob||_(a).data("li").toggleClass("selected",e),i.callChange(),i.setPstate(),i.setText(),i.selAllState())},toggDis:function(e,t){var a=this.vRange(t);(a.E.find("option")[t].disabled=e)&&(a.E.find("option")[t].selected=!1),a.mob||a.optDiv.find("ul.options li").eq(t).toggleClass("disabled",e).removeClass("selected"),a.setText()},toggSumo:function(e){var t=this;return t.enabled=e,t.select.toggleClass("disabled",e),e?(t.E.attr("disabled","disabled"),t.select.removeAttr("tabindex")):(t.E.removeAttr("disabled"),t.select.attr("tabindex","0")),t},toggSelAll:function(i,e){var t=this;t.E.find("option:not(:disabled,:hidden)").each(function(e,t){var a=t.selected;(t=_(t).data("li")).hasClass("hidden")||(i?a||t.trigger("click"):a&&t.trigger("click"))}),e||(!t.mob&&t.selAll&&t.selAll.removeClass("partial").toggleClass("selected",!!i),t.callChange(),t.setText(),t.setPstate())},reload:function(){var e=this.unload();return _(e).SumoSelect(o)},unload:function(){var e=this;return e.select.before(e.E),e.E.show(),o.outputAsCSV&&e.is_multi&&e.select.find("input.HEMANT123").length&&e.E.attr("name",e.select.find("input.HEMANT123").attr("name")),e.select.remove(),delete r.sumo,r},add:function(e,t,a){if(void 0===e)throw"No value to add";var i=this;if(opts=i.E.find("option"),"number"==typeof t&&(a=t,t=e),void 0===t&&(t=e),opt=_("<option></option>").val(e).html(t),opts.length<a)throw"index out of bounds";return void 0===a||opts.length==a?(i.E.append(opt),i.mob||i.ul.append(i.createLi(opt))):(opts.eq(a).before(opt),i.mob||i.ul.find("li.opt").eq(a).before(i.createLi(opt))),r},remove:function(e){var t=this.vRange(e);t.E.find("option").eq(e).remove(),t.mob||t.optDiv.find("ul.options li").eq(e).remove(),t.setText()},selectItem:function(e){this.toggSel(!0,e)},unSelectItem:function(e){this.toggSel(!1,e)},selectAll:function(){this.toggSelAll(!0)},unSelectAll:function(){this.toggSelAll(!1)},disableItem:function(e){this.toggDis(!0,e)},enableItem:function(e){this.toggDis(!1,e)},enabled:!0,enable:function(){return this.toggSumo(!1)},disable:function(){return this.toggSumo(!0)},init:function(){return this.createElems(),this.setText(),this}},r.sumo.init())});return 1==t.length?t[0]:t}}),function(t,a,i){"function"==typeof define&&define.amd?define(["jquery"],function(e){return i(e,t,a),e.mobile}):i(t.jQuery,t,a)}(this,document,function(e,t,r,a){var i,o;(function(c,e,t,d){function h(e){for(;e&&void 0!==e.originalEvent;)e=e.originalEvent;return e}function o(e){for(var t,a,i={};e;){for(a in t=c.data(e,j))t[a]&&(i[a]=i.hasVirtualBinding=!0);e=e.parentNode}return i}function r(){M=!0}function _(){M=!1}function s(){n(),k=setTimeout(function(){B=k=0,T.length=0,O=!1,r()},c.vmouse.resetTimerDuration)}function n(){k&&(clearTimeout(k),k=0)}function l(e,t,a){var i;return(a&&a[e]||!a&&function(e,t){for(var a;e;){if((a=c.data(e,j))&&(!t||a[t]))return e;e=e.parentNode}return null}(t.target,e))&&(i=function(e,t){var a,i,r,o,_,s,n,l,g,u=e.type;if((e=c.Event(e)).type=t,a=e.originalEvent,i=c.event.props,-1<u.search(/^(mouse|click)/)&&(i=C),a)for(n=i.length;n;)e[o=i[--n]]=a[o];if(-1<u.search(/mouse(down|up)|click/)&&!e.which&&(e.which=1),-1!==u.search(/^touch/)&&(u=(r=h(a)).touches,_=r.changedTouches,s=u&&u.length?u[0]:_&&_.length?_[0]:d))for(l=0,g=v.length;l<g;l++)e[o=v[l]]=s[o];return e}(t,e),c(t.target).trigger(i)),i}function g(e){var t=c.data(e.target,Q);if(!(O||B&&B===t)){var a=l("v"+e.type,e);a&&(a.isDefaultPrevented()&&e.preventDefault(),a.isPropagationStopped()&&e.stopPropagation(),a.isImmediatePropagationStopped()&&e.stopImmediatePropagation())}}function u(e){var t,a,i=h(e).touches;if(i&&1===i.length&&(a=o(t=e.target)).hasVirtualBinding){B=A++,c.data(t,Q,B),n(),_(),z=!1;var r=h(e).touches[0];E=r.pageX,I=r.pageY,l("vmouseover",e,a),l("vmousedown",e,a)}}function b(e){M||(z||l("vmousecancel",e,o(e.target)),z=!0,s())}function p(e){if(!M){var t=h(e).touches[0],a=z,i=c.vmouse.moveDistanceThreshold,r=o(e.target);(z=z||Math.abs(t.pageX-E)>i||Math.abs(t.pageY-I)>i)&&!a&&l("vmousecancel",e,r),l("vmousemove",e,r),s()}}function m(e){if(!M){r();var t,a=o(e.target);if(l("vmouseup",e,a),!z){var i=l("vclick",e,a);i&&i.isDefaultPrevented()&&(t=h(e).changedTouches[0],T.push({touchID:B,x:t.clientX,y:t.clientY}),O=!0)}l("vmouseout",e,a),z=!1,s()}}function w(e){var t,a=c.data(e,j);if(a)for(t in a)if(a[t])return!0;return!1}function y(){}function a(r){var o=r.substr(1);return{setup:function(e,t){w(this)||c.data(this,j,{}),c.data(this,j)[r]=!0,S[r]=(S[r]||0)+1,1===S[r]&&F.bind(o,g),c(this).bind(o,y),D&&(S.touchstart=(S.touchstart||0)+1,1===S.touchstart&&F.bind("touchstart",u).bind("touchend",m).bind("touchmove",p).bind("scroll",b))},teardown:function(e,t){--S[r],S[r]||F.unbind(o,g),D&&(--S.touchstart,S.touchstart||F.unbind("touchstart",u).unbind("touchmove",p).unbind("touchend",m).unbind("scroll",b));var a=c(this),i=c.data(this,j);i&&(i[r]=!1),a.unbind(o,y),w(this)||a.removeData(j)}}}var f,j="virtualMouseBindings",Q="virtualTouchID",i="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),v="clientX clientY pageX pageY screenX screenY".split(" "),x=c.event.mouseHooks?c.event.mouseHooks.props:[],C=c.event.props.concat(x),S={},k=0,E=0,I=0,z=!1,T=[],O=!1,M=!1,D="addEventListener"in t,F=c(t),A=1,B=0;c.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500};for(var H=0;H<i.length;H++)c.event.special[i[H]]=a(i[H]);D&&t.addEventListener("click",function(e){var t,a,i,r,o,_=T.length,s=e.target;if(_)for(t=e.clientX,a=e.clientY,f=c.vmouse.clickDistanceThreshold,i=s;i;){for(r=0;r<_;r++)if(o=T[r],0,i===s&&Math.abs(o.x-t)<f&&Math.abs(o.y-a)<f||c.data(i,Q)===o.touchID)return e.preventDefault(),void e.stopPropagation();i=i.parentNode}},!0)})(e,0,r),e.mobile={},o={touch:"ontouchend"in r},(i=e).mobile.support=i.mobile.support||{},i.extend(i.support,o),i.extend(i.mobile.support,o),function(n,e,t){function l(e,t,a){var i=a.type;a.type=t,n.event.dispatch.call(e,a),a.type=i}var g=n(r);n.each("touchstart touchmove touchend tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "),function(e,t){n.fn[t]=function(e){return e?this.bind(t,e):this.trigger(t)},n.attrFn&&(n.attrFn[t]=!0)});var a=n.mobile.support.touch,i=a?"touchstart":"mousedown",o=a?"touchend":"mouseup",_=a?"touchmove":"mousemove";n.event.special.scrollstart={enabled:!0,setup:function(){function t(e,t){l(r,(a=t)?"scrollstart":"scrollstop",e)}var a,i,r=this;n(r).bind("touchmove scroll",function(e){n.event.special.scrollstart.enabled&&(a||t(e,!0),clearTimeout(i),i=setTimeout(function(){t(e,!1)},50))})}},n.event.special.tap={tapholdThreshold:750,setup:function(){var _=this,s=n(_);s.bind("vmousedown",function(e){function t(){clearTimeout(r)}function a(){t(),s.unbind("vclick",i).unbind("vmouseup",t),g.unbind("vmousecancel",a)}function i(e){a(),o===e.target&&l(_,"tap",e)}if(e.which&&1!==e.which)return!1;var r,o=e.target;e.originalEvent;s.bind("vmouseup",t).bind("vclick",i),g.bind("vmousecancel",a),r=setTimeout(function(){l(_,"taphold",n.Event("taphold",{target:o}))},n.event.special.tap.tapholdThreshold)})}},n.event.special.swipe={scrollSupressionThreshold:10,durationThreshold:1e3,horizontalDistanceThreshold:10,verticalDistanceThreshold:475,start:function(e){var t=e.originalEvent.touches?e.originalEvent.touches[0]:e;return{time:(new Date).getTime(),coords:[t.pageX,t.pageY],origin:n(e.target)}},stop:function(e){var t=e.originalEvent.touches?e.originalEvent.touches[0]:e;return{time:(new Date).getTime(),coords:[t.pageX,t.pageY]}},handleSwipe:function(e,t){t.time-e.time<n.event.special.swipe.durationThreshold&&Math.abs(e.coords[0]-t.coords[0])>n.event.special.swipe.horizontalDistanceThreshold&&Math.abs(e.coords[1]-t.coords[1])<n.event.special.swipe.verticalDistanceThreshold&&e.origin.trigger("swipe").trigger(e.coords[0]>t.coords[0]?"swipeleft":"swiperight")},setup:function(){var r=n(this);r.bind(i,function(e){function t(e){i&&(a=n.event.special.swipe.stop(e),Math.abs(i.coords[0]-a.coords[0])>n.event.special.swipe.scrollSupressionThreshold&&e.preventDefault())}var a,i=n.event.special.swipe.start(e);r.bind(_,t).one(o,function(){r.unbind(_,t),i&&a&&n.event.special.swipe.handleSwipe(i,a),i=a=void 0})})}},n.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe",swiperight:"swipe"},function(e,t){n.event.special[e]={setup:function(){n(this).bind(t,n.noop)}}})}(e)}),function(_){function t(e){var t=e||window.event,a=[].slice.call(arguments,1),i=0,r=0,o=0;return(e=_.event.fix(t)).type="mousewheel",t.wheelDelta&&(i=t.wheelDelta/120),t.detail&&(i=-t.detail/3),o=i,void 0!==t.axis&&t.axis===t.HORIZONTAL_AXIS&&(o=0,r=-1*i),void 0!==t.wheelDeltaY&&(o=t.wheelDeltaY/120),void 0!==t.wheelDeltaX&&(r=-1*t.wheelDeltaX/120),a.unshift(e,i,r,o),(_.event.dispatch||_.event.handle).apply(this,a)}var a=["DOMMouseScroll","mousewheel"];if(_.event.fixHooks)for(var e=a.length;e;)_.event.fixHooks[a[--e]]=_.event.mouseHooks;_.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=a.length;e;)this.addEventListener(a[--e],t,!1);else this.onmousewheel=t},teardown:function(){if(this.removeEventListener)for(var e=a.length;e;)this.removeEventListener(a[--e],t,!1);else this.onmousewheel=null}},_.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}(jQuery),function(x){var t={init:function(d){d=x.extend(!0,{set_width:!1,set_height:!1,horizontalScroll:!1,scrollInertia:950,mouseWheel:!0,mouseWheelPixels:"auto",autoDraggerLength:!0,autoHideScrollbar:!1,snapAmount:null,snapOffset:0,scrollButtons:{enable:!1,scrollType:"continuous",scrollSpeed:"auto",scrollAmount:40},advanced:{updateOnBrowserResize:!0,updateOnContentResize:!1,autoExpandHorizontalScroll:!1,autoScrollOnFocus:!0,normalizeMouseWheelDelta:!1},contentTouchScroll:!0,callbacks:{onScrollStart:function(){},onScroll:function(){},onTotalScroll:function(){},onTotalScrollBack:function(){},onTotalScrollOffset:0,onTotalScrollBackOffset:0,whileScrolling:function(){}},theme:"light"},d);return this.each(function(){var a=x(this);if(d.set_width&&a.css("width",d.set_width),d.set_height&&a.css("height",d.set_height),x(document).data("mCustomScrollbar-index")){var e=parseInt(x(document).data("mCustomScrollbar-index"));x(document).data("mCustomScrollbar-index",e+1)}else x(document).data("mCustomScrollbar-index","1");a.wrapInner("<div class='mCustomScrollBox mCS-"+d.theme+"' id='mCSB_"+x(document).data("mCustomScrollbar-index")+"' style='position:relative; height:100%; overflow:hidden; max-width:100%;' />").addClass("mCustomScrollbar _mCS_"+x(document).data("mCustomScrollbar-index"));var i=a.children(".mCustomScrollBox");if(d.horizontalScroll){i.addClass("mCSB_horizontal").wrapInner("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />");var t=i.children(".mCSB_h_wrapper");t.wrapInner("<div class='mCSB_container' style='position:absolute; left:0;' />").children(".mCSB_container").css({width:t.children().outerWidth(),position:"relative"}).unwrap()}else i.wrapInner("<div class='mCSB_container' style='position:relative; top:0;' />");var r=i.children(".mCSB_container");x.support.touch&&r.addClass("mCS_touch"),r.after("<div class='mCSB_scrollTools' style='position:absolute;'><div class='mCSB_draggerContainer'><div class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' style='position:relative;'></div></div><div class='mCSB_draggerRail'></div></div></div>");var o=i.children(".mCSB_scrollTools"),_=o.children(".mCSB_draggerContainer").children(".mCSB_dragger");if(d.horizontalScroll?_.data("minDraggerWidth",_.width()):_.data("minDraggerHeight",_.height()),d.scrollButtons.enable&&(d.horizontalScroll?o.prepend("<a class='mCSB_buttonLeft' oncontextmenu='return false;'></a>").append("<a class='mCSB_buttonRight' oncontextmenu='return false;'></a>"):o.prepend("<a class='mCSB_buttonUp' oncontextmenu='return false;'></a>").append("<a class='mCSB_buttonDown' oncontextmenu='return false;'></a>")),i.bind("scroll",function(){a.is(".mCS_disabled")||i.scrollTop(0).scrollLeft(0)}),a.data({mCS_Init:!0,mCustomScrollbarIndex:x(document).data("mCustomScrollbar-index"),horizontalScroll:d.horizontalScroll,scrollInertia:d.scrollInertia,scrollEasing:"mcsEaseOut",mouseWheel:d.mouseWheel,mouseWheelPixels:d.mouseWheelPixels,autoDraggerLength:d.autoDraggerLength,autoHideScrollbar:d.autoHideScrollbar,snapAmount:d.snapAmount,snapOffset:d.snapOffset,scrollButtons_enable:d.scrollButtons.enable,scrollButtons_scrollType:d.scrollButtons.scrollType,scrollButtons_scrollSpeed:d.scrollButtons.scrollSpeed,scrollButtons_scrollAmount:d.scrollButtons.scrollAmount,autoExpandHorizontalScroll:d.advanced.autoExpandHorizontalScroll,autoScrollOnFocus:d.advanced.autoScrollOnFocus,normalizeMouseWheelDelta:d.advanced.normalizeMouseWheelDelta,contentTouchScroll:d.contentTouchScroll,onScrollStart_Callback:d.callbacks.onScrollStart,onScroll_Callback:d.callbacks.onScroll,onTotalScroll_Callback:d.callbacks.onTotalScroll,onTotalScrollBack_Callback:d.callbacks.onTotalScrollBack,onTotalScroll_Offset:d.callbacks.onTotalScrollOffset,onTotalScrollBack_Offset:d.callbacks.onTotalScrollBackOffset,whileScrolling_Callback:d.callbacks.whileScrolling,bindEvent_scrollbar_drag:!1,bindEvent_content_touch:!1,bindEvent_scrollbar_click:!1,bindEvent_mousewheel:!1,bindEvent_buttonsContinuous_y:!1,bindEvent_buttonsContinuous_x:!1,bindEvent_buttonsPixels_y:!1,bindEvent_buttonsPixels_x:!1,bindEvent_focusin:!1,bindEvent_autoHideScrollbar:!1,mCSB_buttonScrollRight:!1,mCSB_buttonScrollLeft:!1,mCSB_buttonScrollDown:!1,mCSB_buttonScrollUp:!1}),d.horizontalScroll)"none"!==a.css("max-width")&&(d.advanced.updateOnContentResize||(d.advanced.updateOnContentResize=!0));else if("none"!==a.css("max-height")){var s=!1,n=parseInt(a.css("max-height"));0<=a.css("max-height").indexOf("%")&&(s=n,n=a.parent().height()*s/100),a.css("overflow","hidden"),i.css("max-height",n)}if(a.mCustomScrollbar("update"),d.advanced.updateOnBrowserResize){var l,g=x(window).width(),u=x(window).height();x(window).bind("resize."+a.data("mCustomScrollbarIndex"),function(){l&&clearTimeout(l),l=setTimeout(function(){if(!a.is(".mCS_disabled")&&!a.is(".mCS_destroyed")){var e=x(window).width(),t=x(window).height();g===e&&u===t||("none"!==a.css("max-height")&&s&&i.css("max-height",a.parent().height()*s/100),a.mCustomScrollbar("update"),g=e,u=t)}},150)})}if(d.advanced.updateOnContentResize){if(d.horizontalScroll)var c=r.outerWidth();else c=r.outerHeight();setInterval(function(){if(d.horizontalScroll){d.advanced.autoExpandHorizontalScroll&&r.css({position:"absolute",width:"auto"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:r.outerWidth(),position:"relative"}).unwrap();var e=r.outerWidth()}else e=r.outerHeight();e!=c&&(a.mCustomScrollbar("update"),c=e)},300)}})},update:function(){var e=x(this),t=e.children(".mCustomScrollBox"),a=t.children(".mCSB_container");a.removeClass("mCS_no_scrollbar"),e.removeClass("mCS_disabled mCS_destroyed"),t.scrollTop(0).scrollLeft(0);var i=t.children(".mCSB_scrollTools"),r=i.children(".mCSB_draggerContainer"),o=r.children(".mCSB_dragger");if(e.data("horizontalScroll")){var _=i.children(".mCSB_buttonLeft"),s=i.children(".mCSB_buttonRight"),n=t.width();e.data("autoExpandHorizontalScroll")&&a.css({position:"absolute",width:"auto"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:a.outerWidth(),position:"relative"}).unwrap();var l=a.outerWidth()}else var g=i.children(".mCSB_buttonUp"),u=i.children(".mCSB_buttonDown"),c=t.height(),d=a.outerHeight();if(c<d&&!e.data("horizontalScroll")){i.css("display","block");var h=r.height();if(e.data("autoDraggerLength")){var b=Math.round(c/d*h),p=o.data("minDraggerHeight");if(b<=p)o.css({height:p});else if(h-10<=b){var m=h-10;o.css({height:m})}else o.css({height:b});o.children(".mCSB_dragger_bar").css({"line-height":o.height()+"px"})}var w=(d-c)/(h-o.height());e.data("scrollAmount",w).mCustomScrollbar("scrolling",t,a,r,o,g,u,_,s);var y=Math.abs(a.position().top);e.mCustomScrollbar("scrollTo",y,{scrollInertia:0,trigger:"internal"})}else if(n<l&&e.data("horizontalScroll")){i.css("display","block");var f=r.width();if(e.data("autoDraggerLength")){var j=Math.round(n/l*f),Q=o.data("minDraggerWidth");if(j<=Q)o.css({width:Q});else if(f-10<=j){var v=f-10;o.css({width:v})}else o.css({width:j})}w=(l-n)/(f-o.width());e.data("scrollAmount",w).mCustomScrollbar("scrolling",t,a,r,o,g,u,_,s);y=Math.abs(a.position().left);e.mCustomScrollbar("scrollTo",y,{scrollInertia:0,trigger:"internal"})}else t.unbind("mousewheel focusin"),e.data("horizontalScroll")?o.add(a).css("left",0):o.add(a).css("top",0),i.css("display","none"),a.addClass("mCS_no_scrollbar"),e.data({bindEvent_mousewheel:!1,bindEvent_focusin:!1})},scrolling:function(r,s,n,l,e,t,a,i){var _,g,o,u,c,d,h,b,p,m=x(this);m.data("bindEvent_scrollbar_drag")||(x.support.msPointer?(l.bind("MSPointerDown",function(e){e.preventDefault(),m.data({on_drag:!0}),l.addClass("mCSB_dragger_onDrag");var t=x(this),a=t.offset(),i=e.originalEvent.pageX-a.left,r=e.originalEvent.pageY-a.top;i<t.width()&&0<i&&r<t.height()&&0<r&&(_=r,g=i)}),x(document).bind("MSPointerMove."+m.data("mCustomScrollbarIndex"),function(e){if(e.preventDefault(),m.data("on_drag")){var t=l.offset(),a=e.originalEvent.pageX-t.left,i=e.originalEvent.pageY-t.top;w(_,g,i,a)}}).bind("MSPointerUp."+m.data("mCustomScrollbarIndex"),function(e){m.data({on_drag:!1}),l.removeClass("mCSB_dragger_onDrag")})):(l.bind("mousedown touchstart",function(e){e.preventDefault(),e.stopImmediatePropagation();var t,a,i=x(this),r=i.offset();if("touchstart"===e.type){var o=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];t=o.pageX-r.left,a=o.pageY-r.top}else m.data({on_drag:!0}),l.addClass("mCSB_dragger_onDrag"),t=e.pageX-r.left,a=e.pageY-r.top;t<i.width()&&0<t&&a<i.height()&&0<a&&(_=a,g=t)}).bind("touchmove",function(e){e.preventDefault(),e.stopImmediatePropagation();var t=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],a=x(this).offset(),i=t.pageX-a.left,r=t.pageY-a.top;w(_,g,r,i)}),x(document).bind("mousemove."+m.data("mCustomScrollbarIndex"),function(e){if(m.data("on_drag")){var t=l.offset(),a=e.pageX-t.left,i=e.pageY-t.top;w(_,g,i,a)}}).bind("mouseup."+m.data("mCustomScrollbarIndex"),function(e){m.data({on_drag:!1}),l.removeClass("mCSB_dragger_onDrag")})),m.data({bindEvent_scrollbar_drag:!0}));function w(e,t,a,i){m.data("horizontalScroll")?m.mCustomScrollbar("scrollTo",l.position().left-t+i,{moveDragger:!0,trigger:"internal"}):m.mCustomScrollbar("scrollTo",l.position().top-e+a,{moveDragger:!0,trigger:"internal"})}x.support.touch&&m.data("contentTouchScroll")&&(m.data("bindEvent_content_touch")||(s.bind("touchstart",function(e){e.stopImmediatePropagation(),o=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],u=x(this),c=u.offset(),h=o.pageX-c.left,d=o.pageY-c.top,b=d,p=h}),s.bind("touchmove",function(e){e.preventDefault(),e.stopImmediatePropagation(),o=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],u=x(this).parent(),c=u.offset(),h=o.pageX-c.left,d=o.pageY-c.top,m.data("horizontalScroll")?m.mCustomScrollbar("scrollTo",p-h,{trigger:"internal"}):m.mCustomScrollbar("scrollTo",b-d,{trigger:"internal"})})));if(m.data("bindEvent_scrollbar_click")||(n.bind("click",function(e){var t=(e.pageY-n.offset().top)*m.data("scrollAmount"),a=x(e.target);m.data("horizontalScroll")&&(t=(e.pageX-n.offset().left)*m.data("scrollAmount")),(a.hasClass("mCSB_draggerContainer")||a.hasClass("mCSB_draggerRail"))&&m.mCustomScrollbar("scrollTo",t,{trigger:"internal",scrollEasing:"draggerRailEase"})}),m.data({bindEvent_scrollbar_click:!0})),m.data("mouseWheel")&&(m.data("bindEvent_mousewheel")||(r.bind("mousewheel",function(e,t){var a,i=m.data("mouseWheelPixels"),r=Math.abs(s.position().top),o=l.position().top,_=n.height()-l.height();m.data("normalizeMouseWheelDelta")&&(t=t<0?-1:1),"auto"===i&&(i=100+Math.round(m.data("scrollAmount")/2)),m.data("horizontalScroll")&&(o=l.position().left,_=n.width()-l.width(),r=Math.abs(s.position().left)),(0<t&&0!==o||t<0&&o!==_)&&(e.preventDefault(),e.stopImmediatePropagation()),a=r-t*i,m.mCustomScrollbar("scrollTo",a,{trigger:"internal"})}),m.data({bindEvent_mousewheel:!0}))),m.data("scrollButtons_enable"))if("pixels"===m.data("scrollButtons_scrollType")){function y(e){l.data("preventAction")||(l.data("preventAction",!0),m.mCustomScrollbar("scrollTo",e,{trigger:"internal"}))}m.data("horizontalScroll")?(i.add(a).unbind("mousedown touchstart MSPointerDown mouseup MSPointerUp mouseout MSPointerOut touchend",f,j),m.data({bindEvent_buttonsContinuous_x:!1}),m.data("bindEvent_buttonsPixels_x")||(i.bind("click",function(e){e.preventDefault(),y(Math.abs(s.position().left)+m.data("scrollButtons_scrollAmount"))}),a.bind("click",function(e){e.preventDefault(),y(Math.abs(s.position().left)-m.data("scrollButtons_scrollAmount"))}),m.data({bindEvent_buttonsPixels_x:!0}))):(t.add(e).unbind("mousedown touchstart MSPointerDown mouseup MSPointerUp mouseout MSPointerOut touchend",f,j),m.data({bindEvent_buttonsContinuous_y:!1}),m.data("bindEvent_buttonsPixels_y")||(t.bind("click",function(e){e.preventDefault(),y(Math.abs(s.position().top)+m.data("scrollButtons_scrollAmount"))}),e.bind("click",function(e){e.preventDefault(),y(Math.abs(s.position().top)-m.data("scrollButtons_scrollAmount"))}),m.data({bindEvent_buttonsPixels_y:!0})))}else{if(m.data("horizontalScroll")){if(i.add(a).unbind("click"),m.data({bindEvent_buttonsPixels_x:!1}),!m.data("bindEvent_buttonsContinuous_x")){i.bind("mousedown touchstart MSPointerDown",function(e){e.preventDefault();var t=Q();m.data({mCSB_buttonScrollRight:setInterval(function(){m.mCustomScrollbar("scrollTo",Math.abs(s.position().left)+t,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})});var f=function(e){e.preventDefault(),clearInterval(m.data("mCSB_buttonScrollRight"))};i.bind("mouseup touchend MSPointerUp mouseout MSPointerOut",f),a.bind("mousedown touchstart MSPointerDown",function(e){e.preventDefault();var t=Q();m.data({mCSB_buttonScrollLeft:setInterval(function(){m.mCustomScrollbar("scrollTo",Math.abs(s.position().left)-t,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})});var j=function(e){e.preventDefault(),clearInterval(m.data("mCSB_buttonScrollLeft"))};a.bind("mouseup touchend MSPointerUp mouseout MSPointerOut",j),m.data({bindEvent_buttonsContinuous_x:!0})}}else if(t.add(e).unbind("click"),m.data({bindEvent_buttonsPixels_y:!1}),!m.data("bindEvent_buttonsContinuous_y")){t.bind("mousedown touchstart MSPointerDown",function(e){e.preventDefault();var t=Q();m.data({mCSB_buttonScrollDown:setInterval(function(){m.mCustomScrollbar("scrollTo",Math.abs(s.position().top)+t,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})});t.bind("mouseup touchend MSPointerUp mouseout MSPointerOut",function(e){e.preventDefault(),clearInterval(m.data("mCSB_buttonScrollDown"))}),e.bind("mousedown touchstart MSPointerDown",function(e){e.preventDefault();var t=Q();m.data({mCSB_buttonScrollUp:setInterval(function(){m.mCustomScrollbar("scrollTo",Math.abs(s.position().top)-t,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})});e.bind("mouseup touchend MSPointerUp mouseout MSPointerOut",function(e){e.preventDefault(),clearInterval(m.data("mCSB_buttonScrollUp"))}),m.data({bindEvent_buttonsContinuous_y:!0})}function Q(){var e=m.data("scrollButtons_scrollSpeed");return"auto"===m.data("scrollButtons_scrollSpeed")&&(e=Math.round((m.data("scrollInertia")+100)/40)),e}}m.data("autoScrollOnFocus")&&(m.data("bindEvent_focusin")||(r.bind("focusin",function(){r.scrollTop(0).scrollLeft(0);var e=x(document.activeElement);if(e.is("input,textarea,select,button,a[tabindex],area,object")){var t=s.position().top,a=e.position().top,i=r.height()-e.outerHeight();m.data("horizontalScroll")&&(t=s.position().left,a=e.position().left,i=r.width()-e.outerWidth()),(t+a<0||i<t+a)&&m.mCustomScrollbar("scrollTo",a,{trigger:"internal"})}}),m.data({bindEvent_focusin:!0}))),m.data("autoHideScrollbar")&&(m.data("bindEvent_autoHideScrollbar")||(r.bind("mouseenter",function(e){r.addClass("mCS-mouse-over"),v.showScrollbar.call(r.children(".mCSB_scrollTools"))}).bind("mouseleave touchend",function(e){r.removeClass("mCS-mouse-over"),"mouseleave"===e.type&&v.hideScrollbar.call(r.children(".mCSB_scrollTools"))}),m.data({bindEvent_autoHideScrollbar:!0})))},scrollTo:function(e,t){var a,i,r,o,_,s=x(this),n={moveDragger:!1,trigger:"external",callbacks:!0,scrollInertia:s.data("scrollInertia"),scrollEasing:s.data("scrollEasing")},l=(t=x.extend(n,t),s.children(".mCustomScrollBox")),g=l.children(".mCSB_container"),u=l.children(".mCSB_scrollTools"),c=u.children(".mCSB_draggerContainer"),d=c.children(".mCSB_dragger"),h=draggerSpeed=t.scrollInertia;if(!g.hasClass("mCS_no_scrollbar")&&(s.data({mCS_trigger:t.trigger}),s.data("mCS_Init")&&(t.callbacks=!1),e||0===e)){var b,p;if("number"==typeof e)t.moveDragger?(a=e,e=s.data("horizontalScroll")?d.position().left*s.data("scrollAmount"):d.position().top*s.data("scrollAmount"),draggerSpeed=0):a=e/s.data("scrollAmount");else if("string"==typeof e)a=1===(b="top"===e?0:"bottom"!==e||s.data("horizontalScroll")?"left"===e?0:"right"===e&&s.data("horizontalScroll")?g.outerWidth()-l.width():"first"===e?s.find(".mCSB_container").find(":first"):"last"===e?s.find(".mCSB_container").find(":last"):s.find(e):g.outerHeight()-l.height()).length?(e=s.data("horizontalScroll")?b.position().left:b.position().top)/s.data("scrollAmount"):e=b;if(s.data("horizontalScroll"))s.data("onTotalScrollBack_Offset")&&(r=-s.data("onTotalScrollBack_Offset")),s.data("onTotalScroll_Offset")&&(_=l.width()-g.outerWidth()+s.data("onTotalScroll_Offset")),a<0?(a=e=0,clearInterval(s.data("mCSB_buttonScrollLeft")),r||(i=!0)):a>=c.width()-d.width()?(a=c.width()-d.width(),e=l.width()-g.outerWidth(),clearInterval(s.data("mCSB_buttonScrollRight")),_||(o=!0)):e=-e,(p=s.data("snapAmount"))&&(e=Math.round(e/p)*p-s.data("snapOffset")),v.mTweenAxis.call(this,d[0],"left",Math.round(a),draggerSpeed,t.scrollEasing),v.mTweenAxis.call(this,g[0],"left",Math.round(e),h,t.scrollEasing,{onStart:function(){t.callbacks&&!s.data("mCS_tweenRunning")&&m("onScrollStart"),s.data("autoHideScrollbar")&&v.showScrollbar.call(u)},onUpdate:function(){t.callbacks&&m("whileScrolling")},onComplete:function(){t.callbacks&&(m("onScroll"),(i||r&&g.position().left>=r)&&m("onTotalScrollBack"),(o||_&&g.position().left<=_)&&m("onTotalScroll")),d.data("preventAction",!1),s.data("mCS_tweenRunning",!1),s.data("autoHideScrollbar")&&(l.hasClass("mCS-mouse-over")||v.hideScrollbar.call(u))}});else s.data("onTotalScrollBack_Offset")&&(r=-s.data("onTotalScrollBack_Offset")),s.data("onTotalScroll_Offset")&&(_=l.height()-g.outerHeight()+s.data("onTotalScroll_Offset")),a<0?(a=e=0,clearInterval(s.data("mCSB_buttonScrollUp")),r||(i=!0)):a>=c.height()-d.height()?(a=c.height()-d.height(),e=l.height()-g.outerHeight(),clearInterval(s.data("mCSB_buttonScrollDown")),_||(o=!0)):e=-e,(p=s.data("snapAmount"))&&(e=Math.round(e/p)*p-s.data("snapOffset")),v.mTweenAxis.call(this,d[0],"top",Math.round(a),draggerSpeed,t.scrollEasing),v.mTweenAxis.call(this,g[0],"top",Math.round(e),h,t.scrollEasing,{onStart:function(){t.callbacks&&!s.data("mCS_tweenRunning")&&m("onScrollStart"),s.data("autoHideScrollbar")&&v.showScrollbar.call(u)},onUpdate:function(){t.callbacks&&m("whileScrolling")},onComplete:function(){t.callbacks&&(m("onScroll"),(i||r&&g.position().top>=r)&&m("onTotalScrollBack"),(o||_&&g.position().top<=_)&&m("onTotalScroll")),d.data("preventAction",!1),s.data("mCS_tweenRunning",!1),s.data("autoHideScrollbar")&&(l.hasClass("mCS-mouse-over")||v.hideScrollbar.call(u))}});s.data("mCS_Init")&&s.data({mCS_Init:!1})}function m(e){switch(this.mcs={top:g.position().top,left:g.position().left,draggerTop:d.position().top,draggerLeft:d.position().left,topPct:Math.round(100*Math.abs(g.position().top)/Math.abs(g.outerHeight()-l.height())),leftPct:Math.round(100*Math.abs(g.position().left)/Math.abs(g.outerWidth()-l.width()))},e){case"onScrollStart":s.data("mCS_tweenRunning",!0).data("onScrollStart_Callback").call(s,this.mcs);break;case"whileScrolling":s.data("whileScrolling_Callback").call(s,this.mcs);break;case"onScroll":s.data("onScroll_Callback").call(s,this.mcs);break;case"onTotalScrollBack":s.data("onTotalScrollBack_Callback").call(s,this.mcs);break;case"onTotalScroll":s.data("onTotalScroll_Callback").call(s,this.mcs)}}},stop:function(){var e=x(this),t=e.children().children(".mCSB_container"),a=e.children().children().children().children(".mCSB_dragger");v.mTweenAxisStop.call(this,t[0]),v.mTweenAxisStop.call(this,a[0])},disable:function(e){var t=x(this),a=t.children(".mCustomScrollBox"),i=a.children(".mCSB_container"),r=a.children(".mCSB_scrollTools"),o=r.children().children(".mCSB_dragger");a.unbind("mousewheel focusin mouseenter mouseleave touchend"),i.unbind("touchstart touchmove"),e&&(t.data("horizontalScroll")?o.add(i).css("left",0):o.add(i).css("top",0)),r.css("display","none"),i.addClass("mCS_no_scrollbar"),t.data({bindEvent_mousewheel:!1,bindEvent_focusin:!1,bindEvent_content_touch:!1,bindEvent_autoHideScrollbar:!1}).addClass("mCS_disabled")},destroy:function(){var e=x(this);e.removeClass("mCustomScrollbar _mCS_"+e.data("mCustomScrollbarIndex")).addClass("mCS_destroyed").children().children(".mCSB_container").unwrap().children().unwrap().siblings(".mCSB_scrollTools").remove(),x(document).unbind("mousemove."+e.data("mCustomScrollbarIndex")+" mouseup."+e.data("mCustomScrollbarIndex")+" MSPointerMove."+e.data("mCustomScrollbarIndex")+" MSPointerUp."+e.data("mCustomScrollbarIndex")),x(window).unbind("resize."+e.data("mCustomScrollbarIndex"))}},v={showScrollbar:function(){this.stop().animate({opacity:1},"fast")},hideScrollbar:function(){this.stop().animate({opacity:0},"fast")},mTweenAxis:function(e,t,a,i,r,o){var _,s=(o=o||{}).onStart||function(){},n=o.onUpdate||function(){},l=o.onComplete||function(){},g=b(),u=0,c=e.offsetTop,d=e.style;"left"===t&&(c=e.offsetLeft);var h=a-c;function b(){return window.performance&&window.performance.now?window.performance.now():window.performance&&window.performance.webkitNow?window.performance.webkitNow():Date.now?Date.now():(new Date).getTime()}function p(){u||s.call(),u=b()-g,m(),u>=e._time&&(e._time=u>e._time?u+_-(u-e._time):u+_-1,e._time<u+1&&(e._time=u+1)),e._time<i?e._id=_request(p):l.call()}function m(){d[t]=0<i?(e.currVal=function(e,t,a,i,r){switch(r){case"linear":return a*e/i+t;case"easeOutQuad":return-a*(e/=i)*(e-2)+t;case"easeInOutQuad":return(e/=i/2)<1?a/2*e*e+t:-a/2*(--e*(e-2)-1)+t;case"easeOutCubic":return e/=i,a*(--e*e*e+1)+t;case"easeOutQuart":return e/=i,-a*(--e*e*e*e-1)+t;case"easeOutQuint":return e/=i,a*(--e*e*e*e*e+1)+t;case"easeOutCirc":return e/=i,e--,a*Math.sqrt(1-e*e)+t;case"easeOutSine":return a*Math.sin(e/i*(Math.PI/2))+t;case"easeOutExpo":return a*(1-Math.pow(2,-10*e/i))+t;case"mcsEaseOut":var o=(e/=i)*e,_=o*e;return t+a*(.499999999999997*_*o+-2.5*o*o+5.5*_+-6.5*o+4*e);case"draggerRailEase":return(e/=i/2)<1?a/2*e*e*e+t:a/2*((e-=2)*e*e+2)+t}}(e._time,c,h,i,r),Math.round(e.currVal)+"px"):a+"px",n.call()}!function(){if(null==e._id)return;window.requestAnimationFrame?window.cancelAnimationFrame(e._id):clearTimeout(e._id);e._id=null}(),_=1e3/60,e._time=u+_,_request=window.requestAnimationFrame?window.requestAnimationFrame:function(e){return m(),setTimeout(e,.01)},e._id=_request(p)},mTweenAxisStop:function(e){null!=e._id&&(window.requestAnimationFrame?window.cancelAnimationFrame(e._id):clearTimeout(e._id),e._id=null)},rafPolyfill:function(){for(var e=["ms","moz","webkit","o"],t=e.length;-1<--t&&!window.requestAnimationFrame;)window.requestAnimationFrame=window[e[t]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[t]+"CancelAnimationFrame"]||window[e[t]+"CancelRequestAnimationFrame"]}};v.rafPolyfill.call(),x.support.touch=!!("ontouchstart"in window),x.support.msPointer=window.navigator.msPointerEnabled;var e="https:"==document.location.protocol?"https:":"http:";x.event.special.mousewheel||document.write('<script src="'+e+'//cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.0.6/jquery.mousewheel.min.js"><\/script>'),x.fn.mCustomScrollbar=function(e){return t[e]?t[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void x.error("Method "+e+" does not exist"):t.init.apply(this,arguments)}}(jQuery),function(r){function o(e){return void 0!==e}function e(e,t,a){var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e,t.prototype.constructor=t,e._super=t.prototype,a&&r.extend(e.prototype,a)}var _=[["",""],["exit","cancel"],["screen","Screen"]],s=["","o","ms","moz","webkit","webkitCurrent"];function a(e,t){var a;"string"==typeof e&&(t=e,e=document);for(var i=0;i<_.length;++i){t=t.replace(_[i][0],_[i][1]);for(var r=0;r<s.length;++r)if(a=s[r],o(e[a+=0===r?t:t.charAt(0).toUpperCase()+t.substr(1)]))return e[a]}}var t=navigator.userAgent,i=a("fullscreenEnabled"),n=!(-1!==t.indexOf("Android")&&-1!==t.indexOf("Chrome"))&&o(a("fullscreenElement"))&&(!o(i)||!0===i),l=r.fn.jquery.split("."),g=parseInt(l[0])<2&&parseInt(l[1])<7,u=function(){this.__options=null,this._fullScreenElement=null,this.__savedStyles={}};u.prototype={_DEFAULT_OPTIONS:{styles:{boxSizing:"border-box",MozBoxSizing:"border-box",WebkitBoxSizing:"border-box"},toggleClass:null},__documentOverflow:"",__htmlOverflow:"",_preventDocumentScroll:function(){this.__documentOverflow=r("body")[0].style.overflow,this.__htmlOverflow=r("html")[0].style.overflow},_allowDocumentScroll:function(){},_fullScreenChange:function(){this.isFullScreen()?(this._preventDocumentScroll(),this._triggerEvents()):(this._allowDocumentScroll(),this._revertStyles(),this._triggerEvents(),this._fullScreenElement=null)},_fullScreenError:function(e){this._revertStyles(),this._fullScreenElement=null,e&&r(document).trigger("fscreenerror",[e])},_triggerEvents:function(){r(this._fullScreenElement).trigger(this.isFullScreen()?"fscreenopen":"fscreenclose"),r(document).trigger("fscreenchange",[this.isFullScreen(),this._fullScreenElement])},_saveAndApplyStyles:function(){var e=r(this._fullScreenElement);for(var t in this.__savedStyles={},this.__options.styles)this.__savedStyles[t]=this._fullScreenElement.style[t],this._fullScreenElement.style[t]=this.__options.styles[t];this.__options.toggleClass&&e.addClass(this.__options.toggleClass)},_revertStyles:function(){var e=r(this._fullScreenElement);for(var t in this.__options.styles)this._fullScreenElement.style[t]=this.__savedStyles[t];this.__options.toggleClass&&e.removeClass(this.__options.toggleClass)},open:function(e,t){e!==this._fullScreenElement&&(this.isFullScreen()&&this.exit(),this._fullScreenElement=e,this.__options=r.extend(!0,{},this._DEFAULT_OPTIONS,t),this._saveAndApplyStyles())},exit:null,isFullScreen:null,isNativelySupported:function(){return n}};var c=function(){c._super.constructor.apply(this,arguments),this.exit=r.proxy(a("exitFullscreen"),document),this._DEFAULT_OPTIONS=r.extend(!0,{},this._DEFAULT_OPTIONS,{styles:{width:"100%",height:"100%"}}),r(document).bind(this._prefixedString("fullscreenchange")+" MSFullscreenChange",r.proxy(this._fullScreenChange,this)).bind(this._prefixedString("fullscreenerror")+" MSFullscreenError",r.proxy(this._fullScreenError,this))};e(c,u,{VENDOR_PREFIXES:["","o","moz","webkit"],_prefixedString:function(t){return r.map(this.VENDOR_PREFIXES,function(e){return e+t}).join(" ")},open:function(e,t){c._super.open.apply(this,arguments),a(e,"requestFullscreen").call(e)},exit:r.noop,isFullScreen:function(){return null!==a("fullscreenElement")},element:function(){return a("fullscreenElement")}});var d=function(){d._super.constructor.apply(this,arguments),this._DEFAULT_OPTIONS=r.extend({},this._DEFAULT_OPTIONS,{styles:{position:"fixed",zIndex:"2147483647",left:0,top:0,bottom:0,right:0}}),this.__delegateKeydownHandler()};e(d,u,{__isFullScreen:!1,__delegateKeydownHandler:function(){var e=r(document);e.delegate("*","keydown.fullscreen",r.proxy(this.__keydownHandler,this));var t=g?e.data("events"):r._data(document).events,a=t.keydown;g?t.live.unshift(t.live.pop()):a.splice(0,0,a.splice(a.delegateCount-1,1)[0])},__keydownHandler:function(e){return!this.isFullScreen()||27!==e.which||(this.exit(),!1)},_revertStyles:function(){d._super._revertStyles.apply(this,arguments),this._fullScreenElement.offsetHeight},open:function(e){d._super.open.apply(this,arguments),this.__isFullScreen=!0,this._fullScreenChange()},exit:function(){this.__isFullScreen=!1,this._fullScreenChange()},isFullScreen:function(){return this.__isFullScreen},element:function(){return this.__isFullScreen?this._fullScreenElement:null}}),r.fullscreen=n?new c:new d,r.fn.fullscreen=function(e){var t=this[0];return(e=r.extend({toggleClass:null},e)).styles={},t&&r.fullscreen.open(t,e),this}}(jQuery);var bwg_current_filmstrip_pos,total_thumbnail_count,key,startPoint,endPoint,bwg_image_info_pos,filmstrip_width,preloadCount,filmstrip_thumbnail_width,filmstrip_thumbnail_height,addthis_share,lightbox_comment_pos,bwg_transition_duration,bwg_playInterval,gallery_box_data,bwg_param,isPopUpOpened=!1,bwg_overflow_initial_value=!1,bwg_overflow_x_initial_value=!1,bwg_overflow_y_initial_value=!1;function gallery_box_ready(){filmstrip_thumbnail_width=jQuery(".bwg_filmstrip_thumbnail").width(),filmstrip_thumbnail_height=jQuery(".bwg_filmstrip_thumbnail").height(),0<jQuery("#gallery_box_data").length&&(gallery_box_data=JSON.parse(jQuery("#gallery_box_data").val()),bwg_param=gallery_box_data),gallery_box_data.open_with_fullscreen?(filmstrip_width=jQuery(window).width(),filmstrip_height=jQuery(window).height()):(filmstrip_width=jQuery(".bwg_filmstrip_container").width(),filmstrip_height=jQuery(".bwg_filmstrip_container").height()),preloadCount="horizontal"==gallery_box_data.filmstrip_direction?parseInt(filmstrip_width/filmstrip_thumbnail_width)+gallery_box_data.preload_images_count:parseInt(filmstrip_height/filmstrip_thumbnail_height)+gallery_box_data.preload_images_count,total_thumbnail_count=jQuery(".bwg_filmstrip_thumbnail").length,key=parseInt(jQuery("#bwg_current_image_key").val()),startPoint=0,endPoint=key+preloadCount,jQuery(document).ready(function(){wds_load_visible_images(key,preloadCount,total_thumbnail_count,startPoint,endPoint),jQuery(".pge_tabs li a").on("click",function(){return jQuery(".pge_tabs_container > div").hide(),jQuery(".pge_tabs li").removeClass("pge_active"),jQuery(jQuery(this).attr("href")).show(),jQuery(this).closest("li").addClass("pge_active"),jQuery("[name=type]").val(jQuery(this).attr("href").substr(1)),!1});var e=jQuery("#bwg_rated").attr("data-params");bwg_rating((e=JSON.parse(e)).current_rate,e.current_rate_count,e.current_avg_rating,e.current_image_key)}),gallery_box_data.is_pro&&gallery_box_data.enable_addthis&&gallery_box_data.addthis_profile_id&&(addthis_share={url:gallery_box_data.share_url}),lightbox_comment_pos=gallery_box_data.lightbox_comment_pos,bwg_image_info_pos=jQuery(".bwg_ctrl_btn_container").length?jQuery(".bwg_ctrl_btn_container").height():0,setTimeout(function(){jQuery(".bwg_image_info_container1").height()<jQuery(".bwg_image_info").height()+jQuery(".bwg_toggle_container").height()+bwg_image_info_pos+2*parseInt(gallery_box_data.lightbox_info_margin)&&("top"==gallery_box_data.lightbox_ctrl_btn_pos&&jQuery(".bwg_image_info").css("top",bwg_image_info_pos+"px"),jQuery(".bwg_image_info").height(jQuery(".bwg_image_info_container1").height()-jQuery(".bwg_toggle_container").height()-bwg_image_info_pos-2*parseInt(gallery_box_data.lightbox_info_margin)))},100),bwg_transition_duration=gallery_box_data.slideshow_interval<4*gallery_box_data.slideshow_effect_duration&&0!=gallery_box_data.slideshow_interval?1e3*gallery_box_data.slideshow_interval/4:1e3*gallery_box_data.slideshow_effect_duration,gallery_box_data.bwg_transition_duration=bwg_transition_duration,gallery_box_data.bwg_trans_in_progress=!1,(jQuery("#spider_popup_wrap").width()>=jQuery(window).width()||jQuery("#spider_popup_wrap").height()>=jQuery(window).height())&&jQuery(".spider_popup_close").attr("class","bwg_ctrl_btn spider_popup_close_fullscreen"),window.clearInterval(bwg_playInterval),bwg_current_filmstrip_pos=gallery_box_data.current_pos,jQuery(document).on("keydown",function(e){jQuery("#bwg_name").is(":focus")||jQuery("#bwg_email").is(":focus")||jQuery("#bwg_comment").is(":focus")||jQuery("#bwg_captcha_input").is(":focus")||(39===e.keyCode?bwg_change_image(parseInt(jQuery("#bwg_current_image_key").val()),parseInt(jQuery("#bwg_current_image_key").val())+1,gallery_box_data.data):37===e.keyCode?bwg_change_image(parseInt(jQuery("#bwg_current_image_key").val()),parseInt(jQuery("#bwg_current_image_key").val())-1,gallery_box_data.data):27===e.keyCode?spider_destroypopup(1e3):32===e.keyCode&&jQuery(".bwg_play_pause").trigger("click"))}),jQuery(window).resize(function(){void 0!==jQuery().fullscreen&&jQuery.isFunction(jQuery().fullscreen)&&(jQuery.fullscreen.isFullScreen()||bwg_popup_resize())});var r=gallery_box_data.image_width,o=gallery_box_data.image_height;if(gallery_box_data.is_pro){gallery_box_data.enable_addthis&&gallery_box_data.addthis_profile_id&&jQuery(".at4-share-outer").show(),spider_set_input_value("rate_ajax_task","save_hit_count"),spider_rate_ajax_save("bwg_rate_form");var e=gallery_box_data.data,t=gallery_box_data.current_image_key;jQuery(".bwg_image_hits span").html(++e[t].hit_count);var a=window.location.hash;a&&"-1"!=a.indexOf("bwg")||(location.replace("#bwg"+gallery_box_data.gallery_id+"/"+gallery_box_data.current_image_id),history.replaceState(void 0,void 0,"#bwg"+gallery_box_data.gallery_id+"/"+gallery_box_data.current_image_id))}gallery_box_data.image_right_click&&(jQuery(".bwg_image_wrap").bind("contextmenu",function(e){return!1}),jQuery(".bwg_image_wrap").css("webkitTouchCallout","none")),jQuery("#spider_popup_wrap").bind("touchmove",function(e){e.preventDefault()}),void 0!==jQuery().swiperight&&jQuery.isFunction(jQuery().swiperight)&&jQuery("#spider_popup_wrap .bwg_image_wrap").swiperight(function(){return bwg_change_image(parseInt(jQuery("#bwg_current_image_key").val()),(parseInt(jQuery("#bwg_current_image_key").val())+gallery_box_data.data.length-1)%gallery_box_data.data.length,gallery_box_data.data),!1}),void 0!==jQuery().swipeleft&&jQuery.isFunction(jQuery().swipeleft)&&jQuery("#spider_popup_wrap .bwg_image_wrap").swipeleft(function(){return bwg_change_image(parseInt(jQuery("#bwg_current_image_key").val()),(parseInt(jQuery("#bwg_current_image_key").val())+1)%gallery_box_data.data.length,gallery_box_data.data),!1}),bwg_reset_zoom();var i=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase())?"touchend":"click";jQuery("#spider_popup_left").on(i,function(){return bwg_change_image(parseInt(jQuery("#bwg_current_image_key").val()),(parseInt(jQuery("#bwg_current_image_key").val())+gallery_box_data.data.length-1)%gallery_box_data.data.length,gallery_box_data.data),!1}),jQuery("#spider_popup_right").on(i,function(){return bwg_change_image(parseInt(jQuery("#bwg_current_image_key").val()),(parseInt(jQuery("#bwg_current_image_key").val())+1)%gallery_box_data.data.length,gallery_box_data.data),!1}),-1!=navigator.appVersion.indexOf("MSIE 10")||-1!=navigator.appVersion.indexOf("MSIE 9")?setTimeout(function(){bwg_popup_resize()},1):bwg_popup_resize(),jQuery(".bwg_watermark").css({display:"none"}),setTimeout(function(){bwg_change_watermark_container()},500),void 0!==jQuery().fullscreen&&jQuery.isFunction(jQuery().fullscreen)&&(jQuery.fullscreen.isNativelySupported()||jQuery(".bwg_fullscreen").hide()),"horizontal"==gallery_box_data.filmstrip_direction?(jQuery(".bwg_image_container").height(jQuery(".bwg_image_wrap").height()-gallery_box_data.image_filmstrip_height),jQuery(".bwg_image_container").width(jQuery(".bwg_image_wrap").width())):(jQuery(".bwg_image_container").height(jQuery(".bwg_image_wrap").height()),jQuery(".bwg_image_container").width(jQuery(".bwg_image_wrap").width()-gallery_box_data.image_filmstrip_width)),void 0!==jQuery().mCustomScrollbar&&jQuery.isFunction(jQuery().mCustomScrollbar)&&(jQuery(".bwg_comments").mCustomScrollbar({scrollInertia:150}),jQuery(".bwg_ecommerce_panel").mCustomScrollbar({scrollInertia:150,advanced:{updateOnContentResize:!0}}));var _=/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel";jQuery(".bwg_filmstrip").on(_,function(e){var t=window.event||e,a=(t=t.originalEvent?t.originalEvent:t).detail?-40*t.detail:t.wheelDelta,i=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase());0<a?jQuery(".bwg_filmstrip_left").trigger(i?"touchend":"click"):jQuery(".bwg_filmstrip_right").trigger(i?"touchend":"click")}),jQuery(".bwg_filmstrip_right").on(i,function(){jQuery(".bwg_filmstrip_thumbnails").stop(!0,!1),"left"==gallery_box_data.left_or_top?"width"==gallery_box_data.width_or_height?(jQuery(".bwg_filmstrip_thumbnails").position().left>=-(jQuery(".bwg_filmstrip_thumbnails").width()-jQuery(".bwg_filmstrip").width())&&(jQuery(".bwg_filmstrip_left").css({opacity:1,filter:"Alpha(opacity=100)"}),jQuery(".bwg_filmstrip_thumbnails").position().left<-(jQuery(".bwg_filmstrip_thumbnails").width()-jQuery(".bwg_filmstrip").width()-(gallery_box_data.filmstrip_thumb_right_left_space+gallery_box_data.image_filmstrip_width+gallery_box_data.all_images_right_left_space))?jQuery(".bwg_filmstrip_thumbnails").animate({left:-(jQuery(".bwg_filmstrip_thumbnails").width()-jQuery(".bwg_filmstrip").width()-gallery_box_data.all_images_right_left_space)},500,"linear"):jQuery(".bwg_filmstrip_thumbnails").animate({left:jQuery(".bwg_filmstrip_thumbnails").position().left-(gallery_box_data.filmstrip_thumb_right_left_space+gallery_box_data.image_filmstrip_width)},500,"linear")),window.setTimeout(function(){jQuery(".bwg_filmstrip_thumbnails").position().left==-(jQuery(".bwg_filmstrip_thumbnails").width()-jQuery(".bwg_filmstrip").width())&&jQuery(".bwg_filmstrip_right").css({opacity:.3,filter:"Alpha(opacity=30)"})},500)):(jQuery(".bwg_filmstrip_thumbnails").position().left>=-(jQuery(".bwg_filmstrip_thumbnails").height()-jQuery(".bwg_filmstrip").height())&&(jQuery(".bwg_filmstrip_left").css({opacity:1,filter:"Alpha(opacity=100)"}),jQuery(".bwg_filmstrip_thumbnails").position().left<-(jQuery(".bwg_filmstrip_thumbnails").height()-jQuery(".bwg_filmstrip").height()-(gallery_box_data.filmstrip_thumb_right_left_space+gallery_box_data.image_filmstrip_width+gallery_box_data.all_images_right_left_space))?jQuery(".bwg_filmstrip_thumbnails").animate({left:-(jQuery(".bwg_filmstrip_thumbnails").height()-jQuery(".bwg_filmstrip").height()-gallery_box_data.all_images_right_left_space)},500,"linear"):jQuery(".bwg_filmstrip_thumbnails").animate({left:jQuery(".bwg_filmstrip_thumbnails").position().left-(gallery_box_data.filmstrip_thumb_right_left_space+gallery_box_data.image_filmstrip_width)},500,"linear")),window.setTimeout(function(){jQuery(".bwg_filmstrip_thumbnails").position().left==-(jQuery(".bwg_filmstrip_thumbnails").height()-jQuery(".bwg_filmstrip").height())&&jQuery(".bwg_filmstrip_right").css({opacity:.3,filter:"Alpha(opacity=30)"})},500)):"width"==gallery_box_data.width_or_height?(jQuery(".bwg_filmstrip_thumbnails").position().top>=-(jQuery(".bwg_filmstrip_thumbnails").width()-jQuery(".bwg_filmstrip").width())&&(jQuery(".bwg_filmstrip_left").css({opacity:1,filter:"Alpha(opacity=100)"}),jQuery(".bwg_filmstrip_thumbnails").position().top<-(jQuery(".bwg_filmstrip_thumbnails").width()-jQuery(".bwg_filmstrip").width()-(gallery_box_data.filmstrip_thumb_right_left_space+gallery_box_data.image_filmstrip_width+gallery_box_data.all_images_right_left_space))?jQuery(".bwg_filmstrip_thumbnails").animate({left:-(jQuery(".bwg_filmstrip_thumbnails").width()-jQuery(".bwg_filmstrip").width()-gallery_box_data.all_images_right_left_space)},500,"linear"):jQuery(".bwg_filmstrip_thumbnails").animate({left:jQuery(".bwg_filmstrip_thumbnails").position().top-(gallery_box_data.filmstrip_thumb_right_left_space+gallery_box_data.image_filmstrip_width)},500,"linear")),window.setTimeout(function(){jQuery(".bwg_filmstrip_thumbnails").position().left==-(jQuery(".bwg_filmstrip_thumbnails").width()-jQuery(".bwg_filmstrip").width())&&jQuery(".bwg_filmstrip_right").css({opacity:.3,filter:"Alpha(opacity=30)"})},500)):(jQuery(".bwg_filmstrip_thumbnails").position().top>=-(jQuery(".bwg_filmstrip_thumbnails").height()-jQuery(".bwg_filmstrip").height())&&(jQuery(".bwg_filmstrip_left").css({opacity:1,filter:"Alpha(opacity=100)"}),jQuery(".bwg_filmstrip_thumbnails").position().top<-(jQuery(".bwg_filmstrip_thumbnails").height()-jQuery(".bwg_filmstrip").height()-(gallery_box_data.filmstrip_thumb_right_left_space+gallery_box_data.image_filmstrip_width+gallery_box_data.all_images_right_left_space))?jQuery(".bwg_filmstrip_thumbnails").animate({top:-(jQuery(".bwg_filmstrip_thumbnails").height()-jQuery(".bwg_filmstrip").height()-gallery_box_data.all_images_right_left_space)},500,"linear"):jQuery(".bwg_filmstrip_thumbnails").animate({top:jQuery(".bwg_filmstrip_thumbnails").position().top-(gallery_box_data.filmstrip_thumb_right_left_space+gallery_box_data.image_filmstrip_width)},500,"linear")),window.setTimeout(function(){jQuery(".bwg_filmstrip_thumbnails").position().left==-(jQuery(".bwg_filmstrip_thumbnails").height()-jQuery(".bwg_filmstrip").height())&&jQuery(".bwg_filmstrip_right").css({opacity:.3,filter:"Alpha(opacity=30)"})},500))}),"left"==gallery_box_data.left_or_top?jQuery(".bwg_filmstrip_left").on(i,function(){jQuery(".bwg_filmstrip_thumbnails").stop(!0,!1),jQuery(".bwg_filmstrip_thumbnails").position().left<0&&(jQuery(".bwg_filmstrip_right").css({opacity:1,filter:"Alpha(opacity=100)"}),jQuery(".bwg_filmstrip_thumbnails").position().left>-(gallery_box_data.filmstrip_thumb_right_left_space+gallery_box_data.image_filmstrip_width)?jQuery(".bwg_filmstrip_thumbnails").animate({left:0},500,"linear"):jQuery(".bwg_filmstrip_thumbnails").animate({left:jQuery(".bwg_filmstrip_thumbnails").position().left+gallery_box_data.image_filmstrip_width+gallery_box_data.filmstrip_thumb_right_left_space},500,"linear")),window.setTimeout(function(){0==jQuery(".bwg_filmstrip_thumbnails").position().left&&jQuery(".bwg_filmstrip_left").css({opacity:.3,filter:"Alpha(opacity=30)"})},500)}):jQuery(".bwg_filmstrip_left").on(i,function(){jQuery(".bwg_filmstrip_thumbnails").stop(!0,!1),jQuery(".bwg_filmstrip_thumbnails").position().top<0&&(jQuery(".bwg_filmstrip_right").css({opacity:1,filter:"Alpha(opacity=100)"}),jQuery(".bwg_filmstrip_thumbnails").position().top>-(gallery_box_data.filmstrip_thumb_right_left_space+gallery_box_data.image_filmstrip_width)?jQuery(".bwg_filmstrip_thumbnails").animate({top:0},500,"linear"):jQuery(".bwg_filmstrip_thumbnails").animate({top:jQuery(".bwg_filmstrip_thumbnails").position().top+gallery_box_data.image_filmstrip_width+gallery_box_data.filmstrip_thumb_right_left_space},500,"linear")),window.setTimeout(function(){0==jQuery(".bwg_filmstrip_thumbnails").position().top&&jQuery(".bwg_filmstrip_left").css({opacity:.3,filter:"Alpha(opacity=30)"})},500)}),"width"==gallery_box_data.width_or_height?bwg_set_filmstrip_pos(jQuery(".bwg_filmstrip").width(),"",gallery_box_data):bwg_set_filmstrip_pos(jQuery(".bwg_filmstrip").height(),"",gallery_box_data),jQuery(".bwg_info").on(i,function(){if("none"==jQuery(".bwg_image_info_container1").css("display")){jQuery(".bwg_image_info_container1").css("display","table-cell"),jQuery(".bwg_info").attr("title",bwg_objectsL10n.bwg_hide_info);var e=jQuery(".bwg_ctrl_btn_container").length?jQuery(".bwg_ctrl_btn_container").height():0;setTimeout(function(){jQuery(".bwg_image_info_container1").height()<jQuery(".bwg_image_info").height()+e+2*parseInt(gallery_box_data.lightbox_info_margin)&&("top"==gallery_box_data.lightbox_ctrl_btn_pos&&jQuery(".bwg_image_info").css("top",e+"px"),jQuery(".bwg_image_info").height(jQuery(".bwg_image_info_container1").height()-e-2*parseInt(gallery_box_data.lightbox_info_margin)))},100)}else jQuery(".bwg_image_info_container1").css("display","none"),jQuery(".bwg_info").attr("title",bwg_objectsL10n.bwg_show_info)}),jQuery(".bwg_rate").on(i,function(){"none"==jQuery(".bwg_image_rate_container1").css("display")?(jQuery(".bwg_image_rate_container1").css("display","table-cell"),jQuery(".bwg_rate").attr("title",bwg_objectsL10n.bwg_hide_rating)):(jQuery(".bwg_image_rate_container1").css("display","none"),jQuery(".bwg_rate").attr("title",bwg_objectsL10n.bwg_show_rating))}),jQuery(".bwg_comment, .bwg_comments_close_btn").on(i,function(){bwg_comment()}),jQuery(".bwg_ecommerce, .bwg_ecommerce_close_btn").on(i,function(){bwg_ecommerce()}),jQuery(".bwg_toggle_container").on(i,function(){var e="top"==gallery_box_data.lightbox_ctrl_btn_pos?"bwg-icon-caret-up":"bwg-icon-caret-down",t="top"==gallery_box_data.lightbox_ctrl_btn_pos?"bwg-icon-caret-down":"bwg-icon-caret-up",a=jQuery(".bwg_image_info_container1").height()-jQuery(".bwg_ctrl_btn_container").height()-2*parseInt(gallery_box_data.lightbox_info_margin),i=jQuery(".bwg_image_description").outerHeight()+jQuery(".bwg_image_title").outerHeight()+2*parseInt(gallery_box_data.lightbox_info_margin);if(jQuery(".bwg_toggle_container i").hasClass(e)){var r=a+jQuery(".bwg_ctrl_btn_container").height(),o=parseInt(jQuery(".bwg_image_info").css("top"))-jQuery(".bwg_ctrl_btn_container").height();jQuery(".bwg_ctrl_btn_container").height();"top"==gallery_box_data.lightbox_ctrl_btn_pos&&"top"==gallery_box_data.lightbox_info_pos?jQuery(".bwg_image_info_container1").height()<i?jQuery(".bwg_image_info").animate({top:o+"px",height:r},500):jQuery(".bwg_image_info").animate({top:o+"px"},500):"bottom"==gallery_box_data.lightbox_ctrl_btn_pos&&(jQuery(".bwg_image_info_container1").height()<i?jQuery(".bwg_image_info").animate({bottom:0,height:r},500):"bottom"==gallery_box_data.lightbox_info_pos?jQuery(".bwg_image_info").animate({top:-o+"px"},500):jQuery(".bwg_image_info").animate({top:0},500)),gallery_box_data.enable_image_filmstrip&&"bottom"==gallery_box_data.lightbox_filmstrip_pos||"bottom"!=gallery_box_data.lightbox_ctrl_btn_pos||"bottom"!=gallery_box_data.lightbox_info_pos?gallery_box_data.enable_image_filmstrip&&"top"==gallery_box_data.lightbox_filmstrip_pos||"top"!=gallery_box_data.lightbox_ctrl_btn_pos||"top"!=gallery_box_data.lightbox_info_pos||jQuery(".bwg_image_info").animate({top:0},500):jQuery(".bwg_image_info").animate({bottom:0},500),gallery_box_data.enable_image_filmstrip&&"bottom"==gallery_box_data.lightbox_filmstrip_pos||"bottom"!=gallery_box_data.lightbox_ctrl_btn_pos||"bottom"!=gallery_box_data.lightbox_rate_pos?gallery_box_data.enable_image_filmstrip&&"top"==gallery_box_data.lightbox_filmstrip_pos||"top"!=gallery_box_data.lightbox_ctrl_btn_pos||"top"!=gallery_box_data.lightbox_rate_pos||jQuery(".bwg_image_rate").animate({top:0},500):jQuery(".bwg_image_rate").animate({bottom:0},500),gallery_box_data.enable_image_filmstrip&&"bottom"==gallery_box_data.lightbox_filmstrip_pos||"bottom"!=gallery_box_data.lightbox_ctrl_btn_pos||"bottom"!=gallery_box_data.lightbox_hit_pos?gallery_box_data.enable_image_filmstrip&&"top"==gallery_box_data.lightbox_filmstrip_pos||"top"!=gallery_box_data.lightbox_ctrl_btn_pos||"top"!=gallery_box_data.lightbox_hit_pos||jQuery(".bwg_image_hit").animate({top:0},500):jQuery(".bwg_image_hit").animate({bottom:0},500),"bottom"==gallery_box_data.lightbox_ctrl_btn_pos?(jQuery(".bwg_ctrl_btn_container").animate({bottom:"-"+jQuery(".bwg_ctrl_btn_container").height()},500),jQuery(".bwg_toggle_container").animate({bottom:0},{duration:500,complete:function(){jQuery(".bwg_toggle_container i").attr("class","bwg_toggle_btn "+t)}})):(jQuery(".bwg_ctrl_btn_container").animate({top:"-"+jQuery(".bwg_ctrl_btn_container").height()},500),jQuery(".bwg_toggle_container").animate({top:0},{duration:500,complete:function(){jQuery(".bwg_toggle_container i").attr("class","bwg_toggle_btn "+t)}}))}else{a=jQuery(".bwg_image_info_container1").height()-2*parseInt(gallery_box_data.lightbox_info_margin)-jQuery(".bwg_toggle_container").height(),i=jQuery(".bwg_image_description").outerHeight()+jQuery(".bwg_image_title").outerHeight()+2*parseInt(gallery_box_data.lightbox_info_margin)+jQuery(".bwg_toggle_container").height(),r=a,o=parseInt(jQuery(".bwg_image_info").css("top"))+jQuery(".bwg_ctrl_btn_container").height();"top"==gallery_box_data.lightbox_ctrl_btn_pos&&"top"==gallery_box_data.lightbox_info_pos?jQuery(".bwg_image_info_container1").height()<i?jQuery(".bwg_image_info").animate({top:o+"px",height:r},500):jQuery(".bwg_image_info").animate({top:o+"px"},500):"bottom"==gallery_box_data.lightbox_ctrl_btn_pos&&(jQuery(".bwg_image_info_container1").height()<i?jQuery(".bwg_image_info").animate({bottom:0,height:r},500):jQuery(".bwg_image_info").animate({top:0},500)),gallery_box_data.enable_image_filmstrip&&"bottom"==gallery_box_data.lightbox_filmstrip_pos||"bottom"!=gallery_box_data.lightbox_ctrl_btn_pos||"bottom"!=gallery_box_data.lightbox_info_pos?gallery_box_data.enable_image_filmstrip&&"top"==gallery_box_data.lightbox_filmstrip_pos||"top"!=gallery_box_data.lightbox_ctrl_btn_pos||"top"!=gallery_box_data.lightbox_info_pos||jQuery(".bwg_image_info").animate({top:jQuery(".bwg_ctrl_btn_container").height()},500):jQuery(".bwg_image_info").animate({bottom:jQuery(".bwg_ctrl_btn_container").height()},500),gallery_box_data.enable_image_filmstrip&&"bottom"==gallery_box_data.lightbox_filmstrip_pos||"bottom"!=gallery_box_data.lightbox_ctrl_btn_pos||"bottom"!=gallery_box_data.lightbox_rate_pos?gallery_box_data.enable_image_filmstrip&&"top"==gallery_box_data.lightbox_filmstrip_pos||"top"!=gallery_box_data.lightbox_ctrl_btn_pos||"top"!=gallery_box_data.lightbox_rate_pos||jQuery(".bwg_image_rate").animate({top:jQuery(".bwg_ctrl_btn_container").height()},500):jQuery(".bwg_image_rate").animate({bottom:jQuery(".bwg_ctrl_btn_container").height()},500),gallery_box_data.enable_image_filmstrip&&"bottom"==gallery_box_data.lightbox_filmstrip_pos||"bottom"!=gallery_box_data.lightbox_ctrl_btn_pos||"bottom"!=gallery_box_data.lightbox_hit_pos?gallery_box_data.enable_image_filmstrip&&"top"==gallery_box_data.lightbox_filmstrip_pos||"top"!=gallery_box_data.lightbox_ctrl_btn_pos||"top"!=gallery_box_data.lightbox_hit_pos||jQuery(".bwg_image_hit").animate({top:jQuery(".bwg_ctrl_btn_container").height()},500):jQuery(".bwg_image_hit").animate({bottom:jQuery(".bwg_ctrl_btn_container").height()},500),"bottom"==gallery_box_data.lightbox_ctrl_btn_pos?(jQuery(".bwg_ctrl_btn_container").animate({bottom:0},500),jQuery(".bwg_toggle_container").animate({bottom:jQuery(".bwg_ctrl_btn_container").height()},{duration:500,complete:function(){jQuery(".bwg_toggle_container i").attr("class","bwg_toggle_btn "+e)}})):(jQuery(".bwg_ctrl_btn_container").animate({top:0},500),jQuery(".bwg_toggle_container").animate({top:jQuery(".bwg_ctrl_btn_container").height()},{duration:500,complete:function(){jQuery(".bwg_toggle_container i").attr("class","bwg_toggle_btn "+e)}}))}});var s=window.innerHeight;jQuery(".bwg_resize-full").on(i,function(){bwg_resize_full()}),jQuery(".bwg_fullscreen").on(i,function(){jQuery(".bwg_watermark").css({display:"none"});var e,t=0;if((jQuery(".bwg_comment_container").hasClass("bwg_open")||jQuery(".bwg_ecommerce_container").hasClass("bwg_open"))&&(t=jQuery(".bwg_comment_container").width()||jQuery(".bwg_ecommerce_container").width()),void 0!==jQuery().fullscreen&&jQuery.isFunction(jQuery().fullscreen))if(jQuery.fullscreen.isFullScreen())jQuery.fullscreen.exit(),e=s,jQuery(window).width()>gallery_box_data.image_width&&(r=gallery_box_data.image_width),window.innerHeight>gallery_box_data.image_height&&(o=gallery_box_data.image_height),gallery_box_data.open_with_fullscreen&&(r=jQuery(window).width(),o=e),jQuery("#spider_popup_wrap").on("fscreenclose",function(){jQuery("#spider_popup_wrap").css({width:r,height:o,left:"50%",top:"50%",marginLeft:-r/2,marginTop:-o/2,zIndex:1e5}),jQuery(".bwg_image_wrap").css({width:r-t}),jQuery(".bwg_image_container").css({height:o-("horizontal"==gallery_box_data.filmstrip_direction?gallery_box_data.image_filmstrip_height:0),width:r-t-("vertical"==gallery_box_data.filmstrip_direction?gallery_box_data.image_filmstrip_width:0)}),jQuery(".bwg_popup_image").css({maxWidth:r-t-("vertical"==gallery_box_data.filmstrip_direction?gallery_box_data.image_filmstrip_width:0),maxHeight:o-("horizontal"==gallery_box_data.filmstrip_direction?gallery_box_data.image_filmstrip_height:0)}),jQuery(".bwg_popup_embed > .bwg_embed_frame > img, .bwg_popup_embed > .bwg_embed_frame > video").css({maxWidth:r-t-("vertical"==gallery_box_data.filmstrip_direction?gallery_box_data.image_filmstrip_width:0),maxHeight:o-("horizontal"==gallery_box_data.filmstrip_direction?gallery_box_data.image_filmstrip_height:0)}),bwg_resize_instagram_post(),bwg_change_watermark_container(),"width"==gallery_box_data.width_or_height?(jQuery(".bwg_filmstrip_container").css({width:r-("horizontal"==gallery_box_data.filmstrip_direction?"comment_container_width":0)}),jQuery(".bwg_filmstrip").css({width:r-("horizontal"==gallery_box_data.filmstrip_direction?"comment_container_width":0)-40}),bwg_set_filmstrip_pos(r-40,"",gallery_box_data)):(jQuery(".bwg_filmstrip_container").css({height:o-("horizontal"==gallery_box_data.filmstrip_direction?"comment_container_width":0)}),jQuery(".bwg_filmstrip").css({height:o-("horizontal"==gallery_box_data.filmstrip_direction?"comment_container_width":0)-40}),bwg_set_filmstrip_pos(o-40,"",gallery_box_data)),jQuery(".bwg_resize-full").show(),jQuery(".bwg_resize-full").attr("class","bwg-icon-expand bwg_ctrl_btn bwg_resize-full"),jQuery(".bwg_resize-full").attr("title",bwg_objectsL10n.bwg_maximize),jQuery(".bwg_fullscreen").attr("class","bwg-icon-arrows-out bwg_ctrl_btn bwg_fullscreen"),jQuery(".bwg_fullscreen").attr("title",bwg_objectsL10n.bwg_fullscreen),jQuery("#spider_popup_wrap").width()<jQuery(window).width()&&jQuery("#spider_popup_wrap").height()<window.innerHeight&&jQuery(".spider_popup_close_fullscreen").attr("class","spider_popup_close")});else{jQuery("#spider_popup_wrap").fullscreen();var a=screen.width,i=screen.height;jQuery("#spider_popup_wrap").css({width:a,height:i,left:0,top:0,margin:0,zIndex:1e5}),jQuery(".bwg_image_wrap").css({width:a-t}),jQuery(".bwg_image_container").css({height:i-("horizontal"==gallery_box_data.filmstrip_direction?gallery_box_data.image_filmstrip_height:0),width:a-t-("vertical"==gallery_box_data.filmstrip_direction?gallery_box_data.image_filmstrip_width:0)}),jQuery(".bwg_popup_image").css({maxWidth:a-t-("vertical"==gallery_box_data.filmstrip_direction?gallery_box_data.image_filmstrip_width:0),maxHeight:i-("horizontal"==gallery_box_data.filmstrip_direction?gallery_box_data.image_filmstrip_height:0)}),jQuery(".bwg_popup_embed > .bwg_embed_frame > img, .bwg_popup_embed > .bwg_embed_frame > video").css({maxWidth:a-t-("vertical"==gallery_box_data.filmstrip_direction?gallery_box_data.image_filmstrip_width:0),maxHeight:i-("horizontal"==gallery_box_data.filmstrip_direction?gallery_box_data.image_filmstrip_height:0)}),bwg_resize_instagram_post(),bwg_change_watermark_container(),"width"==gallery_box_data.width_or_height?(jQuery(".bwg_filmstrip_container").css({width:a-("horizontal"==gallery_box_data.filmstrip_direction)?"comment_container_width":0}),jQuery(".bwg_filmstrip").css({width:a-("horizontal"==gallery_box_data.filmstrip_direction?"comment_container_width":0)-40}),bwg_set_filmstrip_pos(a-("horizontal"==gallery_box_data.filmstrip_direction?"comment_container_width":0)-40,"",gallery_box_data)):(jQuery(".bwg_filmstrip_container").css({height:i-("horizontal"==gallery_box_data.filmstrip_direction)?"comment_container_width":0}),jQuery(".bwg_filmstrip").css({height:a-("horizontal"==gallery_box_data.filmstrip_direction?"comment_container_width":0)-40}),bwg_set_filmstrip_pos(i-("horizontal"==gallery_box_data.filmstrip_direction?"comment_container_width":0)-40,"",gallery_box_data)),jQuery(".bwg_resize-full").hide(),jQuery(".bwg_fullscreen").attr("class","bwg-icon-compress bwg_ctrl_btn bwg_fullscreen"),jQuery(".bwg_fullscreen").attr("title",bwg_objectsL10n.bwg_exit_fullscreen),jQuery(".spider_popup_close").attr("class","bwg_ctrl_btn spider_popup_close_fullscreen")}return!1}),jQuery(".bwg_play_pause, .bwg_popup_image").on(i,function(){jQuery(".bwg_play_pause").length&&jQuery(".bwg_play_pause").hasClass("bwg-icon-play")&&!jQuery(".bwg_comment_container").hasClass("bwg_open")?(bwg_play(gallery_box_data.data),jQuery(".bwg_play_pause").attr("title",bwg_objectsL10n.bwg_pause),jQuery(".bwg_play_pause").attr("class","bwg-icon-pause bwg_ctrl_btn bwg_play_pause")):(window.clearInterval(bwg_playInterval),jQuery(".bwg_play_pause").attr("title",bwg_objectsL10n.bwg_play),jQuery(".bwg_play_pause").attr("class","bwg-icon-play bwg_ctrl_btn bwg_play_pause"))}),gallery_box_data.open_with_autoplay&&(bwg_play(gallery_box_data.data),jQuery(".bwg_play_pause").attr("title",bwg_objectsL10n.bwg_pause),jQuery(".bwg_play_pause").attr("class","bwg-icon-pause bwg_ctrl_btn bwg_play_pause")),gallery_box_data.open_with_fullscreen&&bwg_open_with_fullscreen(),jQuery(".bwg_popup_image").removeAttr("width"),jQuery(".bwg_popup_image").removeAttr("height"),jQuery(window).focus(function(){jQuery(".bwg_play_pause").length&&!jQuery(".bwg_play_pause").hasClass("bwg-icon-play")&&bwg_play(gallery_box_data.data)}),jQuery(window).blur(function(){event_stack=[],window.clearInterval(bwg_playInterval)});gallery_box_data.lightbox_ctrl_btn_pos;1==gallery_box_data.open_ecommerce&&setTimeout(function(){bwg_ecommerce()},400),gallery_box_data.open_comment&&bwg_comment()}function spider_createpopup(e,t,a,i,r,o,_,s){e=e.replace(/&#038;/g,"&"),isPopUpOpened||(isPopUpOpened=!0,spider_hasalreadyreceivedpopup(o)||spider_isunsupporteduseragent()||(bwg_overflow_initial_value=jQuery("html").css("overflow"),bwg_overflow_x_initial_value=jQuery("html").css("overflow-x"),bwg_overflow_y_initial_value=jQuery("html").css("overflow-y"),jQuery("html").attr("style","overflow:hidden !important;"),jQuery("#bwg_spider_popup_loading_"+t).show(),jQuery("#spider_popup_overlay_"+t).css({display:"block"}),jQuery.ajax({type:"GET",url:e,success:function(e){var t=jQuery('<div id="spider_popup_wrap" class="spider_popup_wrap" style=" width:'+a+"px; height:"+i+"px; margin-top:-"+i/2+"px; margin-left: -"+a/2+'px; ">'+e+"</div>").hide().appendTo("body");gallery_box_ready(),spider_showpopup(o,_,t,r,s)},beforeSend:function(){},complete:function(){}})))}function spider_showpopup(e,t,a,i,r){var o=JSON.parse(jQuery("#gallery_box_data").val()).data,_=parseInt(jQuery("#bwg_current_image_key").val());void 0!==o[_]&&(isPopUpOpened=!0,-1<o[_].filetype.indexOf("EMBED_")?bwg_first_image_load(a):jQuery("#spider_popup_wrap .bwg_popup_image_spun img").prop("complete")?bwg_first_image_load(a):jQuery("#spider_popup_wrap .bwg_popup_image_spun img").on("load error",function(){bwg_first_image_load(a)}),spider_receivedpopup(e,t,r))}function bwg_first_image_load(e){e.show(),jQuery(".bwg_spider_popup_loading").hide(),gallery_box_data.preload_images&&bwg_preload_images(parseInt(jQuery("#bwg_current_image_key").val())),bwg_load_filmstrip()}function spider_hasalreadyreceivedpopup(e){return-1<document.cookie.indexOf(e)&&delete document.cookie[document.cookie.indexOf(e)],!1}function spider_receivedpopup(e,t,a){var i=new Date;i.setDate(i.getDate()+t),document.cookie=e+"=true;expires="+i.toUTCString()+";path=/";var r=gallery_box_data.bwg_ctrl_btn_container_height;"bottom"==a?jQuery(".bwg_toggle_container").css("bottom",r+"px"):"top"==a&&jQuery(".bwg_toggle_container").css("top",r+"px")}function spider_isunsupporteduseragent(){return!window.XMLHttpRequest}function spider_destroypopup(e){null!=document.getElementById("spider_popup_wrap")&&(void 0!==jQuery().fullscreen&&jQuery.isFunction(jQuery().fullscreen)&&jQuery.fullscreen.isFullScreen()&&jQuery.fullscreen.exit(),"undefined"!=typeof enable_addthis&&enable_addthis&&jQuery(".at4-share-outer").hide(),setTimeout(function(){jQuery(".spider_popup_wrap").remove(),jQuery(".bwg_spider_popup_loading").css({display:"none"}),jQuery(".spider_popup_overlay").css({display:"none"}),jQuery(document).off("keydown"),!1!==bwg_overflow_initial_value&&jQuery("html").css("overflow",bwg_overflow_initial_value),!1!==bwg_overflow_x_initial_value&&jQuery("html").css("overflow-x",bwg_overflow_x_initial_value),!1!==bwg_overflow_y_initial_value&&jQuery("html").css("overflow-y",bwg_overflow_y_initial_value)},20)),isPopUpOpened=!1;var t=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase()),a=document.querySelector('meta[name="viewport"]');t&&a&&(a.content="width=device-width, initial-scale=1");var i=jQuery(document).scrollTop();bwg_objectsL10n.is_pro&&location.replace("#"),jQuery(document).scrollTop(i),void 0!==gallery_box_data.bwg_playInterval&&clearInterval(gallery_box_data.bwg_playInterval)}function get_ajax_pricelist(){var e={};return jQuery(".add_to_cart_msg").html(""),e.ajax_task="display",e.image_id=jQuery("#bwg_popup_image").attr("image_id"),jQuery("#ecommerce_ajax_loading").css("height",jQuery(".bwg_ecommerce_panel").css("height")),jQuery("#ecommerce_opacity_div").css("width",jQuery(".bwg_ecommerce_panel").css("width")),jQuery("#ecommerce_opacity_div").css("height",jQuery(".bwg_ecommerce_panel").css("height")),jQuery("#ecommerce_loading_div").css("width",jQuery(".bwg_ecommerce_panel").css("width")),jQuery("#ecommerce_loading_div").css("height",jQuery(".bwg_ecommerce_panel").css("height")),document.getElementById("ecommerce_opacity_div").style.display="",document.getElementById("ecommerce_loading_div").style.display="table-cell",jQuery.ajax({type:"POST",url:jQuery("#bwg_ecommerce_form").attr("action"),data:e,success:function(e){jQuery(".pge_tabs li a").on("click",function(){return jQuery(".pge_tabs_container > div").hide(),jQuery(".pge_tabs li").removeClass("pge_active"),jQuery(jQuery(this).attr("href")).show(),jQuery(this).closest("li").addClass("pge_active"),jQuery("[name=type]").val(jQuery(this).attr("href").substr(1)),!1});var t=jQuery(e).find(".manual").html();jQuery(".manual").html(t);var a=jQuery(e).find(".downloads").html();jQuery(".downloads").html(a);var i=jQuery(e).find(".pge_options").html();jQuery(".pge_options").html(i);var r=jQuery(e).find(".pge_add_to_cart").html();jQuery(".pge_add_to_cart").html(r)},beforeSend:function(){},complete:function(){document.getElementById("ecommerce_opacity_div").style.display="none",document.getElementById("ecommerce_loading_div").style.display="none"}}),!1}function spider_ajax_save(e){var t={};return t.bwg_name=jQuery("#bwg_name").val(),t.bwg_comment=jQuery("#bwg_comment").val(),t.bwg_email=jQuery("#bwg_email").val(),t.bwg_captcha_input=jQuery("#bwg_captcha_input").val(),t.ajax_task=jQuery("#ajax_task").val(),t.image_id=jQuery("#image_id").val(),t.comment_id=jQuery("#comment_id").val(),jQuery("#ajax_loading").css("height",jQuery(".bwg_comments").css("height")),jQuery("#opacity_div").css("width",jQuery(".bwg_comments").css("width")),jQuery("#opacity_div").css("height",jQuery(".bwg_comments").css("height")),jQuery("#loading_div").css("width",jQuery(".bwg_comments").css("width")),jQuery("#loading_div").css("height",jQuery(".bwg_comments").css("height")),document.getElementById("opacity_div").style.display="",document.getElementById("loading_div").style.display="table-cell",jQuery.ajax({type:"POST",url:jQuery("#"+e).attr("action"),data:t,success:function(e){var t=jQuery(e).find(".bwg_comments").html();jQuery(".bwg_comments").html(t)},beforeSend:function(){},complete:function(){document.getElementById("opacity_div").style.display="none",document.getElementById("loading_div").style.display="none",jQuery(".bwg_comments").mCustomScrollbar({scrollInertia:150,advanced:{updateOnContentResize:!0}}),jQuery(".bwg_comments_close_btn").click(bwg_comment),bwg_captcha_refresh("bwg_captcha")}}),!1}function spider_rate_ajax_save(a){var e={};return e.image_id=jQuery("#"+a+" input[name='image_id']").val(),e.rate=jQuery("#"+a+" input[name='score']").val(),e.ajax_task=jQuery("#rate_ajax_task").val(),jQuery.ajax({type:"POST",url:jQuery("#"+a).attr("action"),data:e,success:function(e){var t=jQuery(e).find("#"+a).html();jQuery("#"+a).html(t)},beforeSend:function(){},complete:function(){}}),!1}function spider_set_input_value(e,t){document.getElementById(e)&&(document.getElementById(e).value=t)}function spider_form_submit(e,t){document.getElementById(t)&&document.getElementById(t).submit(),e.preventDefault?e.preventDefault():e.returnValue=!1}function spider_check_required(e,t){return""==jQuery("#"+e).val()&&(alert(t+" "+bwg_objectsL10n.bwg_field_required),jQuery("#"+e).attr("style","border-color: #FF0000;"),jQuery("#"+e).focus(),!0)}function comment_check_privacy_policy(){var e=jQuery("#bwg_submit");e.removeClass("bwg-submit-disabled"),e.removeAttr("disabled"),jQuery("#bwg_comment_privacy_policy").is(":checked")||(e.addClass("bwg-submit-disabled"),e.attr("disabled","disabled"))}function spider_check_email(e){if(""!=jQuery("#"+e).val())return-1==jQuery("#"+e).val().replace(/^\s+|\s+$/g,"").search(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/)&&(alert(bwg_objectsL10n.bwg_mail_validation),!0)}function bwg_captcha_refresh(e){document.getElementById(e+"_img")&&document.getElementById(e+"_input")&&(srcArr=document.getElementById(e+"_img").src.split("&r="),document.getElementById(e+"_img").src=srcArr[0]+"&r="+Math.floor(100*Math.random()),document.getElementById(e+"_img").style.display="inline-block",document.getElementById(e+"_input").value="")}function bwg_play_instagram_video(e,t){jQuery(e).parent().find("video").each(function(){jQuery(this).get(0).paused?(jQuery(this).get(0).play(),jQuery(e).children().hide()):(jQuery(this).get(0).pause(),jQuery(e).children().show())})}function bwg_add_comment(){var t=jQuery("#bwg_comment_form"),e=t.attr("action"),a={ajax_task:"add_comment"};return a.comment_name=t.find("#bwg_name").val(),a.comment_email=t.find("#bwg_email").val(),a.comment_text=t.find("#bwg_comment").val(),a.comment_captcha=t.find("#bwg_captcha_input").val(),a.privacy_policy=t.find("#bwg_comment_privacy_policy").is(":checked")?1:0,a.comment_image_id=jQuery("#bwg_popup_image").attr("image_id"),a.comment_moderation=t.find("#bwg_comment_moderation").val(),jQuery(".bwg_spider_ajax_loading").hide(),jQuery.ajax({url:e,type:"POST",dataType:"json",data:a,success:function(e){jQuery(".bwg_comment_error").text(""),1==e.error?jQuery.each(e.error_messages,function(e,t){t&&jQuery(".bwg_comment_"+e+"_error").text(t)}):(t.find("#bwg_comment").val(""),jQuery(".bwg_comment_waiting_message").hide(),0==e.published&&jQuery(".bwg_comment_waiting_message").show(),""!=e.html_comments_block&&jQuery("#bwg_added_comments").html(e.html_comments_block).show())},beforeSend:function(){jQuery(".bwg_spider_ajax_loading").show()},complete:function(){0<t.find("#bwg_comment_privacy_policy").length&&(t.find("#bwg_comment_privacy_policy").prop("checked",!1),comment_check_privacy_policy()),bwg_captcha_refresh("bwg_captcha"),jQuery(".bwg_spider_ajax_loading").hide()},error:function(){}}),!1}function bwg_remove_comment(t){var e=jQuery("#bwg_comment_form").attr("action"),a={ajax_task:"delete_comment"};return a.id_image=jQuery("#bwg_popup_image").attr("image_id"),a.id_comment=t,jQuery.ajax({url:e,type:"POST",dataType:"json",data:a,success:function(e){0==e.error&&jQuery("#bwg_comment_block_"+t).fadeOut("slow").remove()},beforeSend:function(){},complete:function(){},error:function(){}}),!1}function bwg_gallery_box(e,t,a,i){jQuery(".bwg-validate").each(function(){jQuery(this).on("keypress change",function(){jQuery(this).parent().next().find(".bwg_comment_error").html("")})}),void 0===a&&(a=!1);var r,o=t.data("bwg");r=t.find(".bwg-container").data("lightbox-url")?t.find(".bwg-container").data("lightbox-url"):t.data("lightbox-url");var _=jQuery("#bwg_tag_id_"+o).val();_=_||0;var s=1==a?"&open_ecommerce=1":"",n=jQuery("#bwg_search_input_"+o).val(),l=jQuery("#bwg_order_"+o).val()?"&filtersortby="+jQuery("#bwg_order_"+o).val():"";n=n||"",void 0!==i&&(r+="&gallery_id="+i);var g="",u=jQuery("#bwg_blog_style_share_buttons_"+e).attr("data-open-comment");void 0!==u&&!1!==u&&(g="&open_comment=1"),spider_createpopup(r+"&image_id="+e+"&filter_tag="+_+s+g+"&filter_search_name="+n+l,o,t.data("popup-width"),t.data("popup-height"),1,"testpopup",5,t.data("buttons-position"))}function bwg_change_image_lightbox(e,i,r,t){if(bwg_current_key=gallery_box_data.bwg_current_key,jQuery(".bwg_image_info").css("height","auto"),setTimeout(function(){jQuery(".bwg_image_info_container1").height()<jQuery(".bwg_image_info").height()+jQuery(".bwg_toggle_container").height()+bwg_image_info_pos+2*parseInt(gallery_box_data.lightbox_info_margin)&&("top"==gallery_box_data.lightbox_ctrl_btn_pos&&jQuery(".bwg_image_info").css("top",bwg_image_info_pos+"px"),jQuery(".bwg_image_info").height(jQuery(".bwg_image_info_container1").height()-jQuery(".bwg_toggle_container").height()-bwg_image_info_pos-2*parseInt(gallery_box_data.lightbox_info_margin)))},200),jQuery("#spider_popup_left").show(),jQuery("#spider_popup_right").show(),jQuery(".bwg_image_info").hide(),0==gallery_box_data.enable_loop&&(i==parseInt(r.length)-1&&jQuery("#spider_popup_right").hide(),0==i&&jQuery("#spider_popup_left").hide()),1==gallery_box_data.ecommerceACtive&&1==gallery_box_data.enable_image_ecommerce)if(0==gallery_box_data.data[i].pricelist)jQuery(".bwg_ecommerce").hide();else{jQuery(".bwg_ecommerce").show(),jQuery(".pge_tabs li").hide(),jQuery("#downloads").hide(),jQuery("#manual").hide();var a=gallery_box_data.data[i].pricelist_sections.split(",");if(a)if(jQuery("#"+a[0]).show(),jQuery("[name=type]").val(a[0]),1<a.length)for(jQuery(".pge_tabs").show(),k=0;k<a.length;k++)jQuery("#"+a[k]+"_li").show();else jQuery(".pge_tabs").hide();else jQuery("[name=type]").val("")}if(jQuery("#bwg_image_container").find("iframe").each(function(){jQuery(this)[0].contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*"),jQuery(this)[0].contentWindow.postMessage('{ "method": "pause" }',"*"),jQuery(this)[0].contentWindow.postMessage("pause","*")}),jQuery("#bwg_image_container").find("video").each(function(){jQuery(this).trigger("pause")}),void 0===r&&(r=gallery_box_data.data),void 0!==r[i]&&void 0!==r[e]){if(jQuery(".bwg_play_pause").length&&!jQuery(".bwg_play_pause").hasClass("bwg-icon-play")&&bwg_play(r),t||jQuery("#bwg_current_image_key").val(i),gallery_box_data.bwg_trans_in_progress)return void gallery_box_data.event_stack.push(e+"-"+i);var o="right";if(bwg_current_key>i)o="left";else if(bwg_current_key==i)return;jQuery(".bwg_image_count").html(r[i].number),jQuery(".bwg_watermark").css({display:"none"}),"width"==gallery_box_data.width_or_height?bwg_current_filmstrip_pos=i*(jQuery(".bwg_filmstrip_thumbnail").width()+2+2*gallery_box_data.lightbox_filmstrip_thumb_border_width):"height"==gallery_box_data.width_or_height&&(bwg_current_filmstrip_pos=i*(jQuery(".bwg_filmstrip_thumbnail").height()+2+2*gallery_box_data.lightbox_filmstrip_thumb_border_width)),gallery_box_data.bwg_current_key=i,bwg_objectsL10n.is_pro&&(location.replace("#bwg"+gallery_box_data.gallery_id+"/"+r[i].id),history.replaceState(void 0,void 0,"#bwg"+gallery_box_data.gallery_id+"/"+r[i].id)),gallery_box_data.popup_enable_rate&&(jQuery("#bwg_rate_form input[name='image_id']").val(r[i].id),jQuery("#bwg_star").attr("data-score",r[i].avg_rating),jQuery("#bwg_star").removeAttr("title"),r[i].cur_key=i,bwg_rating(r[i].rate,r[i].rate_count,r[i].avg_rating,i)),spider_set_input_value("rate_ajax_task","save_hit_count"),spider_rate_ajax_save("bwg_rate_form"),jQuery(".bwg_image_hits span").html(++r[i].hit_count),jQuery("#bwg_popup_image").attr("image_id",r[i].id),jQuery(".bwg_image_title").html(jQuery('<span style="display: block;" />').html(r[i].alt).text()),jQuery(".bwg_image_description").html(jQuery('<span style="display: block;" />').html(r[i].description).text()),jQuery(".bwg_filmstrip_thumbnail").removeClass("bwg_thumb_active").addClass("bwg_thumb_deactive"),jQuery("#bwg_filmstrip_thumbnail_"+i).removeClass("bwg_thumb_deactive").addClass("bwg_thumb_active"),jQuery(".bwg_image_info").css("opacity",1),""==r[i].alt.trim()&&""==r[i].description.trim()&&jQuery(".bwg_image_info").css("opacity",0),"none"!=jQuery(".bwg_image_info_container1").css("display")?jQuery(".bwg_image_info_container1").css("display","table-cell"):jQuery(".bwg_image_info_container1").css("display","none"),"none"!=jQuery(".bwg_image_rate_container1").css("display")?jQuery(".bwg_image_rate_container1").css("display","table-cell"):jQuery(".bwg_image_rate_container1").css("display","none");var _=2==jQuery(".bwg_popup_image_spun").css("zIndex")?".bwg_popup_image_spun":".bwg_popup_image_second_spun",s=".bwg_popup_image_second_spun"==_?".bwg_popup_image_spun":".bwg_popup_image_second_spun",n=-1<r[i].filetype.indexOf("EMBED_"),l=-1<r[i].filetype.indexOf("INSTAGRAM_POST"),g=-1<r[i].filetype.indexOf("INSTAGRAM_VIDEO"),u=-1!==jQuery.inArray(r[i].filetype,["EMBED_OEMBED_YOUTUBE_VIDEO","EMBED_OEMBED_VIMEO_VIDEO","EMBED_OEMBED_FACEBOOK_VIDEO","EMBED_OEMBED_DAILYMOTION_VIDEO"]),c=jQuery(_).height(),d=jQuery(_).width(),h='<span class="bwg_popup_image_spun1" style="display: '+(n?"block":"table")+'; width: inherit; height: inherit;"><span class="bwg_popup_image_spun2" style="display:'+(n?"block":"table-cell")+'; vertical-align: middle;text-align: center;height: 100%;">';if(n){if(jQuery("#bwg_download").addClass("hidden"),h+='<span class="bwg_popup_embed bwg_popup_watermark" style="display: '+(u?"block":"table")+'; table-layout: fixed; height: 100%;">'+(g?'<div class="bwg_inst_play_btn_cont" onclick="bwg_play_instagram_video(this)" ><div class="bwg_inst_play"></div></div>':" "),l){var b=0,p=0;c<d+88?b=(p=c)-88:p=(b=d)+88,h+=spider_display_embed(r[i].filetype,r[i].image_url,r[i].filename,{class:"bwg_embed_frame","data-width":r[i].image_width,"data-height":r[i].image_height,frameborder:"0",allowfullscreen:"allowfullscreen",style:"width:"+b+"px; height:"+p+"px; vertical-align:middle; display:inline-block; position:relative;"})}else h+=spider_display_embed(r[i].filetype,r[i].image_url,r[i].filename,{class:"bwg_embed_frame",frameborder:"0",allowfullscreen:"allowfullscreen",style:"display:"+(u?"block":"table-cell")+"; width:inherit; height:inherit; vertical-align:middle;"});h+="</span>"}else jQuery(".bwg-loading").removeClass("hidden"),jQuery("#bwg_download").removeClass("hidden"),h+='<img style="max-height: '+c+"px; max-width: "+d+'px;" class="bwg_popup_image bwg_popup_watermark" src="'+gallery_box_data.site_url+jQuery('<span style="display: block;" />').html(r[i].image_url).text()+'" alt="'+r[i].alt+'" />';function m(){gallery_box_data.preload_images&&bwg_preload_images(i),window["bwg_"+gallery_box_data.bwg_image_effect](_,s,o),jQuery(_).find(".bwg_fb_video").each(function(){jQuery(this).attr("src","")}),n?jQuery("#bwg_fullsize_image").attr("href",r[i].image_url):(jQuery("#bwg_fullsize_image").attr("href",gallery_box_data.site_url+r[i].image_url),jQuery("#bwg_download").attr("href",gallery_box_data.site_url+r[i].thumb_url.replace("/thumb/","/.original/")));var e=r[i].image_url.split("/");jQuery("#bwg_download").attr("download",e[e.length-1].replace(/\?bwg=(\d+)$/,""));var t=encodeURIComponent(gallery_box_data.bwg_share_url)+"="+r[i].id+encodeURIComponent("#bwg"+gallery_box_data.gallery_id+"/")+r[i].id;if(n)var a=encodeURIComponent(r[i].thumb_url);else a=gallery_box_data.bwg_share_image_url+encodeURIComponent(encodeURIComponent(r[i].image_url));a=a.replace(/%252F/g,"%2F"),void 0!==addthis_share&&(addthis_share.url=t),jQuery("#bwg_facebook_a").attr("href","https://www.facebook.com/sharer/sharer.php?u="+t),jQuery("#bwg_twitter_a").attr("href","https://twitter.com/share?url="+t),jQuery("#bwg_google_a").attr("href","https://plus.google.com/share?url="+t),jQuery("#bwg_pinterest_a").attr("href","http://pinterest.com/pin/create/button/?s=100&url="+t+"&media="+a+"&description="+r[i].alt+"%0A"+r[i].description),jQuery("#bwg_tumblr_a").attr("href","https://www.tumblr.com/share/photo?source="+a+"&caption="+r[i].alt+"&clickthru="+t),jQuery(".bwg_comment_container").hasClass("bwg_open")&&(0==r[i].comment_count?jQuery("#bwg_added_comments").hide():(jQuery("#bwg_added_comments").show(),spider_set_input_value("ajax_task","display"),spider_set_input_value("image_id",jQuery("#bwg_popup_image").attr("image_id")),spider_ajax_save("bwg_comment_form"))),jQuery(".bwg_ecommerce_container").hasClass("bwg_open")&&(0==r[i].pricelist?(bwg_popup_sidebar_close(jQuery(".bwg_ecommerce_container")),bwg_animate_image_box_for_hide_sidebar(),jQuery(".bwg_ecommerce_container").attr("class","bwg_ecommerce_container bwg_close"),jQuery(".bwg_ecommerce").attr("title",bwg_objectsL10n.bwg_show_ecommerce),jQuery(".spider_popup_close_fullscreen").show()):get_ajax_pricelist()),void 0!==jQuery().mCustomScrollbar&&jQuery.isFunction(jQuery().mCustomScrollbar)&&jQuery(".bwg_comments").mCustomScrollbar({advanced:{updateOnContentResize:!0}}),jQuery(".bwg_comments .mCSB_scrollTools").hide(),gallery_box_data.enable_image_filmstrip&&bwg_move_filmstrip(),bwg_resize_instagram_post()}if(h+="</span></span>",jQuery(s).html(h),jQuery(s).find("img").on("load error",function(){jQuery(".bwg-loading").addClass("hidden")}),jQuery(".bwg_popup_embed > .bwg_embed_frame > img, .bwg_popup_embed > .bwg_embed_frame > video").css({maxWidth:d,maxHeight:c,height:"auto"}),n)m();else jQuery(s).find("img").one("load",function(){m()}).each(function(){this.complete&&jQuery(this).load()})}}function bwg_preload_images_lightbox(e){for(var t=gallery_box_data.data,a=t.length,i=0==gallery_box_data.preload_images_count||gallery_box_data.preload_images_count>=a?a:gallery_box_data.preload_images_count,r=0,o=1;r<i;o++){var _=1;do{var s=(e+o*_+a)%a;if(void 0!==t[s])-1<t[s].filetype.indexOf("EMBED_")||jQuery("<img/>").attr("src",gallery_box_data.site_url+jQuery('<span style="display: block;" />').html(t[s].image_url).text());_*=-1,r++}while(1!=_)}}function bwg_popup_sidebar_open(e){var t=gallery_box_data.lightbox_comment_width,a=gallery_box_data.lightbox_comment_pos;if(t>jQuery(window).width()){if(t=jQuery(window).width(),e.css({width:t}),jQuery(".spider_popup_close_fullscreen").hide(),jQuery(".spider_popup_close").hide(),jQuery(".bwg_ctrl_btn").hasClass("bwg-icon-pause")){var i=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase());jQuery(".bwg_play_pause").trigger(i?"touchend":"click")}}else jQuery(".spider_popup_close_fullscreen").show();"left"==a?e.animate({left:0},100):e.animate({right:0},100)}function bwg_comment(){if(jQuery(".bwg_watermark").css({display:"none"}),jQuery(".bwg_ecommerce_wrap").css("z-index","-1"),jQuery(".bwg_comment_wrap").css("z-index","25"),jQuery(".bwg_ecommerce_container").hasClass("bwg_open")&&(bwg_popup_sidebar_close(jQuery(".bwg_ecommerce_container")),jQuery(".bwg_ecommerce_container").attr("class","bwg_ecommerce_container bwg_close"),jQuery(".bwg_ecommerce").attr("title",bwg_objectsL10n.bwg_show_ecommerce)),jQuery(".bwg_comment_container").hasClass("bwg_open"))"1"==jQuery(".bwg_comment_container").attr("data-play-status")&&jQuery(".bwg_ctrl_btn.bwg_play_pause").removeClass("bwg-icon-play").addClass("bwg-icon-pause").attr("title",bwg_objectsL10n.bwg_pause),bwg_popup_sidebar_close(jQuery(".bwg_comment_container")),bwg_animate_image_box_for_hide_sidebar(),jQuery(".bwg_comment_wrap").css("z-index","-1"),jQuery(".bwg_comment_container").attr("class","bwg_comment_container bwg_close"),jQuery(".bwg_comment").attr("title",bwg_objectsL10n.bwg_show_comments),jQuery(".spider_popup_close_fullscreen").show();else{jQuery(".bwg_play_pause").hasClass("bwg-icon-pause")?jQuery(".bwg_comment_container").attr("data-play-status","1"):jQuery(".bwg_comment_container").attr("data-play-status","0"),jQuery(".bwg_ctrl_btn.bwg_play_pause").removeClass("bwg-icon-pause").addClass("bwg-icon-play").attr("title",bwg_objectsL10n.bwg_play),bwg_popup_sidebar_open(jQuery(".bwg_comment_container")),bwg_animate_image_box_for_show_sidebar(),jQuery(".bwg_comment_container").attr("class","bwg_comment_container bwg_open"),jQuery(".bwg_comment").attr("title",bwg_objectsL10n.bwg_hide_comments);var e=parseInt(jQuery("#bwg_current_image_key").val());void 0!==gallery_box_data[e]&&0!=gallery_box_data[e].comment_count&&(jQuery("#bwg_added_comments").show(),spider_set_input_value("ajax_task","display"),spider_set_input_value("image_id",jQuery("#bwg_popup_image").attr("image_id")),spider_ajax_save("bwg_comment_form"))}jQuery(".bwg_comments").mCustomScrollbar({scrollInertia:150,advanced:{updateOnContentResize:!0}})}function bwg_ecommerce(){jQuery(".bwg_watermark").css({display:"none"}),jQuery(".bwg_ecommerce_wrap").css("z-index","25"),jQuery(".bwg_comment_wrap").css("z-index","-1"),jQuery(".bwg_comment_container").hasClass("bwg_open")&&(bwg_popup_sidebar_close(jQuery(".bwg_comment_container")),jQuery(".bwg_comment_container").attr("class","bwg_comment_container bwg_close"),jQuery(".bwg_comment").attr("title",bwg_objectsL10n.bwg_show_comments)),jQuery(".bwg_ecommerce_container").hasClass("bwg_open")?(bwg_popup_sidebar_close(jQuery(".bwg_ecommerce_container")),bwg_animate_image_box_for_hide_sidebar(),jQuery(".bwg_ecommerce_container").attr("class","bwg_ecommerce_container bwg_close"),jQuery(".bwg_ecommerce").attr("title",bwg_objectsL10n.bwg_show_ecommerce)):(bwg_popup_sidebar_open(jQuery(".bwg_ecommerce_container")),bwg_animate_image_box_for_show_sidebar(),jQuery(".bwg_ecommerce_container").attr("class","bwg_ecommerce_container bwg_open"),jQuery(".bwg_ecommerce").attr("title",bwg_objectsL10n.bwg_hide_ecommerce),get_ajax_pricelist())}function bwg_popup_sidebar_close(e){var t=parseInt(e.css("borderRightWidth"));t||(t=0),"left"==lightbox_comment_pos?e.animate({left:-e.width()-t},100):"right"==lightbox_comment_pos&&e.animate({right:-e.width()-t},100)}function bwg_animate_image_box_for_hide_sidebar(){"left"==lightbox_comment_pos?jQuery(".bwg_image_wrap").animate({left:0,width:jQuery("#spider_popup_wrap").width()},100):"right"==lightbox_comment_pos&&jQuery(".bwg_image_wrap").animate({right:0,width:jQuery("#spider_popup_wrap").width()},100),jQuery(".bwg_image_container").animate({width:jQuery("#spider_popup_wrap").width()-("vertical"==gallery_box_data.filmstrip_direction?gallery_box_data.image_filmstrip_width:0)},100),jQuery(".bwg_popup_image").animate({maxWidth:jQuery("#spider_popup_wrap").width()-("vertical"==gallery_box_data.filmstrip_direction?gallery_box_data.image_filmstrip_width:0)},{duration:100,complete:function(){bwg_change_watermark_container()}}),jQuery(".bwg_popup_embed").animate({width:jQuery("#spider_popup_wrap").width()-("vertical"==gallery_box_data.filmstrip_direction?gallery_box_data.image_filmstrip_width:0)},{duration:100,complete:function(){bwg_resize_instagram_post(),bwg_change_watermark_container()}}),"width"==gallery_box_data.width_or_height?(jQuery(".bwg_filmstrip_container").animate({width:jQuery(".spider_popup_wrap").width()},100),jQuery(".bwg_filmstrip").animate({width:jQuery(".spider_popup_wrap").width()-40},100)):"height"==gallery_box_data.width_or_height&&(jQuery(".bwg_filmstrip_container").animate({height:jQuery(".spider_popup_wrap").width()},100),jQuery(".bwg_filmstrip").animate({height:jQuery(".spider_popup_wrap").width()-40},100)),bwg_set_filmstrip_pos(jQuery(".spider_popup_wrap").width()-40,"",gallery_box_data),jQuery(".spider_popup_close_fullscreen").show(100)}function bwg_animate_image_box_for_show_sidebar(){var e=jQuery(".bwg_comment_container").width()||jQuery(".bwg_ecommerce_container").width();"left"==lightbox_comment_pos?jQuery(".bwg_image_wrap").animate({left:e,width:jQuery("#spider_popup_wrap").width()-e},100):"right"==lightbox_comment_pos&&jQuery(".bwg_image_wrap").animate({right:e,width:jQuery("#spider_popup_wrap").width()-e},100),jQuery(".bwg_image_container").animate({width:jQuery("#spider_popup_wrap").width()-("vertical"==gallery_box_data.filmstrip_direction?gallery_box_data.image_filmstrip_width:0)-e},100),jQuery(".bwg_popup_image").animate({maxWidth:jQuery("#spider_popup_wrap").width()-e-("vertical"==gallery_box_data.filmstrip_direction?gallery_box_data.image_filmstrip_width:0)},{duration:100,complete:function(){bwg_change_watermark_container()}}),jQuery(".bwg_popup_embed > .bwg_embed_frame > img, .bwg_popup_embed > .bwg_embed_frame > video").animate({maxWidth:jQuery("#spider_popup_wrap").width()-e-("vertical"==gallery_box_data.filmstrip_direction?gallery_box_data.image_filmstrip_width:0)},{duration:100,complete:function(){bwg_resize_instagram_post(),bwg_change_watermark_container()}}),"width"==gallery_box_data.width_or_height&&(jQuery(".bwg_filmstrip_container").css({width:jQuery("#spider_popup_wrap").width()-("vertical"==gallery_box_data.filmstrip_direction?0:e)}),jQuery(".bwg_filmstrip").animate({width:jQuery(".bwg_filmstrip_container").width()-40},100),bwg_set_filmstrip_pos(jQuery(".bwg_filmstrip_container").width()-40,"",gallery_box_data))}function bwg_reset_zoom(){var e=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase()),t=document.querySelector('meta[name="viewport"]');e&&t&&(t.content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=0")}function bwg_open_with_fullscreen(){jQuery(".bwg_watermark").css({display:"none"});var e=0;(jQuery(".bwg_comment_container").hasClass("bwg_open")||jQuery(".bwg_ecommerce_container").hasClass("bwg_open"))&&(e=jQuery(".bwg_comment_container").width()||jQuery(".bwg_ecommerce_container").width()),bwg_popup_current_width=jQuery(window).width(),bwg_popup_current_height=window.innerHeight,jQuery("#spider_popup_wrap").css({width:jQuery(window).width(),height:window.innerHeight,left:0,top:0,margin:0,zIndex:100002}),jQuery(".bwg_image_wrap").css({width:jQuery(window).width()-e}),jQuery(".bwg_image_container").css({height:bwg_popup_current_height-("horizontal"==gallery_box_data.filmstrip_direction?gallery_box_data.image_filmstrip_height:0),width:bwg_popup_current_width-e-("vertical"==gallery_box_data.filmstrip_direction?gallery_box_data.image_filmstrip_width:0)}),jQuery(".bwg_popup_image").css({maxWidth:jQuery(window).width()-e-("vertical"==gallery_box_data.filmstrip_direction?gallery_box_data.image_filmstrip_width:0),maxHeight:window.innerHeight-("horizontal"==gallery_box_data.filmstrip_direction?gallery_box_data.image_filmstrip_height:0)},{complete:function(){bwg_change_watermark_container()}}),jQuery(".bwg_popup_video").css({width:jQuery(window).width()-e-("vertical"==gallery_box_data.filmstrip_direction?gallery_box_data.image_filmstrip_width:0),height:window.innerHeight-("horizontal"==gallery_box_data.filmstrip_direction?gallery_box_data.image_filmstrip_height:0)},{complete:function(){bwg_change_watermark_container()}}),jQuery(".bwg_popup_embed > .bwg_embed_frame > img, .bwg_popup_embed > .bwg_embed_frame > video").css({maxWidth:jQuery(window).width()-e-("vertical"==gallery_box_data.filmstrip_direction?gallery_box_data.image_filmstrip_width:0),maxHeight:window.innerHeight-("horizontal"==gallery_box_data.filmstrip_direction?gallery_box_data.image_filmstrip_height:0)},{complete:function(){bwg_resize_instagram_post(),bwg_change_watermark_container()}}),"width"==gallery_box_data.width_or_height?(jQuery(".bwg_filmstrip_container").css({width:jQuery(window).width()-("horizontal"==gallery_box_data.filmstrip_direction?"comment_container_width":0)}),jQuery(".bwg_filmstrip").css({width:jQuery(window).width()-("horizontal"==gallery_box_data.filmstrip_direction?"comment_container_width":0)-40}),bwg_set_filmstrip_pos(jQuery(window).width()-("horizontal"==gallery_box_data.filmstrip_direction?"comment_container_width":0)-40,"",gallery_box_data)):(jQuery(".bwg_filmstrip_container").css({height:window.innerHeight-("horizontal"==gallery_box_data.filmstrip_direction?"comment_container_width":0)}),jQuery(".bwg_filmstrip").css({height:window.innerHeight-("horizontal"==gallery_box_data.filmstrip_direction?"comment_container_width":0)-40}),bwg_set_filmstrip_pos(window.innerHeight-("horizontal"==gallery_box_data.filmstrip_direction?"comment_container_width":0)-40,"",gallery_box_data)),jQuery(".bwg_resize-full").attr("class","bwg-icon-compress bwg_ctrl_btn bwg_resize-full"),jQuery(".bwg_resize-full").attr("title",bwg_objectsL10n.bwg_restore),jQuery(".spider_popup_close").attr("class","bwg_ctrl_btn spider_popup_close_fullscreen")}function bwg_resize_full(){jQuery(".bwg_watermark").css({display:"none"});var e=0;(jQuery(".bwg_comment_container").hasClass("bwg_open")||jQuery(".bwg_ecommerce_container").hasClass("bwg_open"))&&(e=jQuery(".bwg_comment_container").width()||jQuery(".bwg_ecommerce_container").width()),jQuery(".bwg_resize-full").hasClass("bwg-icon-compress")?(jQuery(window).width()>gallery_box_data.image_width&&(bwg_popup_current_width=gallery_box_data.image_width),window.innerHeight>gallery_box_data.image_height&&(bwg_popup_current_height=gallery_box_data.image_height),jQuery("#spider_popup_wrap").animate({width:bwg_popup_current_width,height:bwg_popup_current_height,left:"50%",top:"50%",marginLeft:-bwg_popup_current_width/2,marginTop:-bwg_popup_current_height/2,zIndex:100002},500),jQuery(".bwg_image_wrap").animate({width:bwg_popup_current_width-e},500),jQuery(".bwg_image_container").animate({height:bwg_popup_current_height-("horizontal"==gallery_box_data.filmstrip_direction?gallery_box_data.image_filmstrip_height:0),width:bwg_popup_current_width-e-("vertical"==gallery_box_data.filmstrip_direction?gallery_box_data.image_filmstrip_width:0)},500),jQuery(".bwg_popup_image").animate({maxWidth:bwg_popup_current_width-e-("vertical"==gallery_box_data.filmstrip_direction?gallery_box_data.image_filmstrip_width:0),maxHeight:bwg_popup_current_height-("horizontal"==gallery_box_data.filmstrip_direction?gallery_box_data.image_filmstrip_height:0)},{duration:500,complete:function(){bwg_change_watermark_container(),jQuery("#spider_popup_wrap").width()<jQuery(window).width()&&jQuery("#spider_popup_wrap").height()<window.innerHeight&&jQuery(".spider_popup_close_fullscreen").attr("class","spider_popup_close")}}),jQuery(".bwg_popup_embed > .bwg_embed_frame > img, .bwg_popup_embed > .bwg_embed_frame > video").animate({maxWidth:bwg_popup_current_width-e-("vertical"==gallery_box_data.filmstrip_direction?gallery_box_data.image_filmstrip_width:0),maxHeight:bwg_popup_current_height-("horizontal"==gallery_box_data.filmstrip_direction?gallery_box_data.image_filmstrip_height:0)},{duration:500,complete:function(){bwg_resize_instagram_post(),bwg_change_watermark_container(),jQuery("#spider_popup_wrap").width()<jQuery(window).width()&&jQuery("#spider_popup_wrap").height()<window.innerHeight&&jQuery(".spider_popup_close_fullscreen").attr("class","spider_popup_close")}}),"width"==gallery_box_data.width_or_height?(jQuery(".bwg_filmstrip_container").animate({width:bwg_popup_current_width-("horizontal"==gallery_box_data.filmstrip_direction?e:0)},500),jQuery(".bwg_filmstrip").animate({width:bwg_popup_current_width-("horizontal"==gallery_box_data.filmstrip_direction?e:0)-40},500),bwg_set_filmstrip_pos(bwg_popup_current_width-40,"",gallery_box_data)):(jQuery(".bwg_filmstrip_container").animate({height:bwg_popup_current_height-("horizontal"==gallery_box_data.filmstrip_direction?e:0)},500),jQuery(".bwg_filmstrip").animate({height:bwg_popup_current_height-("horizontal"==gallery_box_data.filmstrip_direction?e:0)-40},500),bwg_set_filmstrip_pos(bwg_popup_current_height-40,"",gallery_box_data)),jQuery(".bwg_resize-full").attr("class","bwg-icon-expand bwg_ctrl_btn bwg_resize-full"),jQuery(".bwg_resize-full").attr("title",bwg_objectsL10n.bwg_maximize)):(bwg_popup_current_width=jQuery(window).width(),bwg_popup_current_height=window.innerHeight,jQuery("#spider_popup_wrap").animate({width:jQuery(window).width(),height:window.innerHeight,left:0,top:0,margin:0,zIndex:100002},500),jQuery(".bwg_image_wrap").animate({width:jQuery(window).width()-e},500),jQuery(".bwg_image_container").animate({height:bwg_popup_current_height-("horizontal"==gallery_box_data.filmstrip_direction?gallery_box_data.image_filmstrip_height:0),width:bwg_popup_current_width-e-("vertical"==gallery_box_data.filmstrip_direction?gallery_box_data.image_filmstrip_width:0)},500),jQuery(".bwg_popup_image").animate({maxWidth:jQuery(window).width()-e-("vertical"==gallery_box_data.filmstrip_direction?gallery_box_data.image_filmstrip_width:0),maxHeight:window.innerHeight-("horizontal"==gallery_box_data.filmstrip_direction?gallery_box_data.image_filmstrip_height:0)},{duration:500,complete:function(){bwg_change_watermark_container()}}),jQuery(".bwg_popup_embed > .bwg_embed_frame > img, .bwg_popup_embed > .bwg_embed_frame > video").animate({maxWidth:jQuery(window).width()-e-("vertical"==gallery_box_data.filmstrip_direction?gallery_box_data.image_filmstrip_width:0),maxHeight:window.innerHeight-("horizontal"==gallery_box_data.filmstrip_direction?gallery_box_data.image_filmstrip_height:0)},{duration:500,complete:function(){bwg_resize_instagram_post(),bwg_change_watermark_container()}}),"width"==gallery_box_data.width_or_height?(jQuery(".bwg_filmstrip_container").animate({width:jQuery(window).width()-("horizontal"==gallery_box_data.filmstrip_direction?e:0)},500),jQuery(".bwg_filmstrip").animate({width:jQuery(window).width()-("horizontal"==gallery_box_data.filmstrip_direction?e:0)-40},500),bwg_set_filmstrip_pos(jQuery(window).width()-("horizontal"==gallery_box_data.filmstrip_direction?e:0)-40,"",gallery_box_data)):(jQuery(".bwg_filmstrip_container").animate({height:window.innerHeight-("horizontal"==gallery_box_data.filmstrip_direction?e:0)},500),jQuery(".bwg_filmstrip").animate({height:window.innerHeight-("horizontal"==gallery_box_data.filmstrip_direction?e:0)-40},500),bwg_set_filmstrip_pos(window.innerHeight-("horizontal"==gallery_box_data.filmstrip_direction?e:0)-40,"",gallery_box_data)),jQuery(".bwg_resize-full").attr("class","bwg-icon-compress bwg_ctrl_btn bwg_resize-full"),jQuery(".bwg_resize-full").attr("title",bwg_objectsL10n.bwg_restore),jQuery(".spider_popup_close").attr("class","bwg_ctrl_btn spider_popup_close_fullscreen"))}function bwg_popup_resize_lightbox(){void 0!==jQuery().fullscreen&&jQuery.isFunction(jQuery().fullscreen)&&(jQuery.fullscreen.isFullScreen()||(jQuery(".bwg_resize-full").show(),jQuery(".bwg_resize-full").hasClass("bwg-icon-compress")||jQuery(".bwg_resize-full").attr("class","bwg-icon-expand bwg_ctrl_btn bwg_resize-full"),jQuery(".bwg_resize-full").attr("title",bwg_objectsL10n.bwg_maximize),jQuery(".bwg_fullscreen").attr("class","bwg-icon-arrows-out bwg_ctrl_btn bwg_fullscreen"),jQuery(".bwg_fullscreen").attr("title",bwg_objectsL10n.fullscreen)));var e=0;(jQuery(".bwg_comment_container").hasClass("bwg_open")||jQuery(".bwg_ecommerce_container").hasClass("bwg_open"))&&(e=gallery_box_data.lightbox_comment_width),e>jQuery(window).width()?(e=jQuery(window).width(),jQuery(".bwg_comment_container").css({width:e}),jQuery(".bwg_ecommerce_container").css({width:e}),jQuery(".spider_popup_close_fullscreen").hide()):jQuery(".spider_popup_close_fullscreen").show(),window.innerHeight>gallery_box_data.image_height&&1!=gallery_box_data.open_with_fullscreen&&!jQuery(".bwg_resize-full").hasClass("bwg-icon-compress")?(jQuery("#spider_popup_wrap").css({height:gallery_box_data.image_height,top:"50%",marginTop:-gallery_box_data.image_height/2,zIndex:100002}),jQuery(".bwg_image_container").css({height:gallery_box_data.image_height-("horizontal"==gallery_box_data.filmstrip_direction?gallery_box_data.image_filmstrip_height:0)}),jQuery(".bwg_popup_image").css({maxHeight:gallery_box_data.image_height-("horizontal"==gallery_box_data.filmstrip_direction?gallery_box_data.image_filmstrip_height:0)}),jQuery(".bwg_popup_embed > .bwg_embed_frame > img, .bwg_popup_embed > .bwg_embed_frame > video").css({maxHeight:gallery_box_data.image_height-("horizontal"==gallery_box_data.filmstrip_direction?gallery_box_data.image_filmstrip_height:0)}),"vertical"==gallery_box_data.filmstrip_direction&&(jQuery(".bwg_filmstrip_container").css({height:gallery_box_data.image_height}),jQuery(".bwg_filmstrip").css({height:gallery_box_data.image_height-40})),bwg_popup_current_height=gallery_box_data.image_height):(jQuery("#spider_popup_wrap").css({height:window.innerHeight,top:0,marginTop:0,zIndex:100002}),jQuery(".bwg_image_container").css({height:window.innerHeight-("horizontal"==gallery_box_data.filmstrip_direction?gallery_box_data.image_filmstrip_height:0)}),jQuery(".bwg_popup_image").css({maxHeight:window.innerHeight-("horizontal"==gallery_box_data.filmstrip_direction?gallery_box_data.image_filmstrip_height:0)}),jQuery(".bwg_popup_embed > .bwg_embed_frame > img, .bwg_popup_embed > .bwg_embed_frame > video").css({maxHeight:window.innerHeight-("horizontal"==gallery_box_data.filmstrip_direction?gallery_box_data.image_filmstrip_height:0)}),"vertical"==gallery_box_data.filmstrip_direction&&(jQuery(".bwg_filmstrip_container").css({height:window.innerHeight}),jQuery(".bwg_filmstrip").css({height:window.innerHeight-40})),bwg_popup_current_height=window.innerHeight),jQuery(window).width()>=gallery_box_data.image_width&&1!=gallery_box_data.open_with_fullscreen?(jQuery("#spider_popup_wrap").css({width:gallery_box_data.image_width,left:"50%",marginLeft:-gallery_box_data.image_width/2,zIndex:100002}),jQuery(".bwg_image_wrap").css({width:gallery_box_data.image_width-e}),jQuery(".bwg_image_container").css({width:gallery_box_data.image_width-("vertical"==gallery_box_data.filmstrip_direction?gallery_box_data.image_filmstrip_width:0)-e}),jQuery(".bwg_popup_image").css({maxWidth:gallery_box_data.image_width-("vertical"==gallery_box_data.filmstrip_direction?gallery_box_data.image_filmstrip_width:0)-e}),jQuery(".bwg_popup_embed > .bwg_embed_frame > img, .bwg_popup_embed > .bwg_embed_frame > video").css({maxWidth:gallery_box_data.image_width-("vertical"==gallery_box_data.filmstrip_direction?gallery_box_data.image_filmstrip_width:0)-e}),"horizontal"==gallery_box_data.filmstrip_direction&&(jQuery(".bwg_filmstrip_container").css({width:gallery_box_data.image_width-e}),jQuery(".bwg_filmstrip").css({width:gallery_box_data.image_width-e-40})),bwg_popup_current_width=gallery_box_data.image_width):(jQuery("#spider_popup_wrap").css({width:jQuery(window).width(),left:0,marginLeft:0,zIndex:100002}),jQuery(".bwg_image_wrap").css({width:jQuery(window).width()-e}),jQuery(".bwg_image_container").css({width:jQuery(window).width()-("vertical"==gallery_box_data.filmstrip_direction?gallery_box_data.image_filmstrip_width:0)-e}),jQuery(".bwg_popup_image").css({maxWidth:jQuery(window).width()-("vertical"==gallery_box_data.filmstrip_direction?gallery_box_data.image_filmstrip_width:0)-e}),jQuery(".bwg_popup_embed > .bwg_embed_frame > img, .bwg_popup_embed > .bwg_embed_frame > video").css({maxWidth:jQuery(window).width()-("vertical"==gallery_box_data.filmstrip_direction?gallery_box_data.image_filmstrip_width:0)-e}),"horizontal"==gallery_box_data.filmstrip_direction&&(jQuery(".bwg_filmstrip_container").css({width:jQuery(window).width()-e}),jQuery(".bwg_filmstrip").css({width:jQuery(window).width()-e-40})),bwg_popup_current_width=jQuery(window).width()),bwg_resize_instagram_post(),bwg_change_watermark_container(),window.innerHeight>gallery_box_data.image_height-2*gallery_box_data.lightbox_close_btn_top&&jQuery(window).width()>=gallery_box_data.image_width-2*gallery_box_data.lightbox_close_btn_right&&1!=gallery_box_data.open_with_fullscreen?jQuery(".spider_popup_close_fullscreen").attr("class","spider_popup_close"):jQuery("#spider_popup_wrap").width()<jQuery(window).width()&&jQuery("#spider_popup_wrap").height()<jQuery(window).height()&&jQuery(".spider_popup_close").attr("class","bwg_ctrl_btn spider_popup_close_fullscreen");var t=gallery_box_data.bwg_ctrl_btn_container_height;"bottom"==gallery_box_data.lightbox_ctrl_btn_pos&&jQuery(".bwg_toggle_container i").hasClass("bwg-icon-caret-down")&&jQuery(".bwg_toggle_container").css("bottom",t+"px"),"top"==gallery_box_data.lightbox_ctrl_btn_pos&&jQuery(".bwg_toggle_container i").hasClass("bwg-icon-caret-up")&&jQuery(".bwg_toggle_container").css("top",t+"px")}function bwg_rating(e,t,a,i){lightbox_rate_stars_count=gallery_box_data.lightbox_rate_stars_count,lightbox_rate_size=gallery_box_data.lightbox_rate_size,lightbox_rate_icon=gallery_box_data.lightbox_rate_icon;var r="Not rated yet.";0!=a&&""!=a&&(r=parseFloat(a).toFixed(1)+"\n Votes: "+t),void 0!==jQuery().raty&&jQuery.isFunction(jQuery().raty)&&jQuery("#bwg_star").raty({score:function(){return jQuery(this).attr("data-score")},starType:"i",number:lightbox_rate_stars_count,size:lightbox_rate_size,readOnly:function(){return!!e},noRatedMsg:"Not rated yet.",click:function(e,t){jQuery("#bwg_star").hide(),jQuery("#bwg_rated").show(),spider_set_input_value("rate_ajax_task","save_rate"),spider_rate_ajax_save("bwg_rate_form"),gallery_box_data.data[i].rate=e,++gallery_box_data.data[i].rate_count;var a=parseFloat(jQuery("#bwg_star").attr("data-score"));gallery_box_data.data[i].avg_rating=a?((a+e)/2).toFixed(1):e.toFixed(1)},starHalf:"bwg-icon-"+lightbox_rate_icon+("star"==lightbox_rate_icon?"-half":"")+"-o",starOff:"bwg-icon-"+lightbox_rate_icon+"-o",starOn:"bwg-icon-"+lightbox_rate_icon,cancelOff:"bwg-icon-minus-square-o",cancelOn:"bwg-icon-minus-square-o",cancel:!1,cancelHint:"Cancel your rating.",hints:[r,r,r,r,r],alreadyRatedMsg:parseFloat(a).toFixed(1)+"\nYou have already rated.\nVotes: "+t})}function changeDownloadsTotal(e){var t=0;0==jQuery("[name=option_show_digital_items_count]").val()?jQuery("[name=selected_download_item]:checked").each(function(){t+=Number(jQuery(this).closest("tr").attr("data-price"))}):jQuery(".digital_image_count").each(function(){0!=Number(jQuery(this).val())&&(t+=Number(jQuery(this).closest("tr").attr("data-price"))*Number(jQuery(this).val()))}),t=t.toFixed(2).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"),jQuery(".product_downloads_price").html(t)}function changeMenualTotal(e){Number(jQuery(e).val())<=0&&jQuery(e).val("1");var t=Number(jQuery(e).val()),a=Number(jQuery(".product_manual_price").attr("data-actual-price"));a=(a*=t).toFixed(2).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"),jQuery(".product_manual_price").html(a)}function onSelectableParametersChange(e){var t=0,a=gallery_box_data[jQuery("#bwg_current_image_key").val()].pricelist_manual_price?gallery_box_data[jQuery("#bwg_current_image_key").val()].pricelist_manual_price:"0";a=parseFloat(a.replace(",",""));var i=jQuery(e).closest(".image_selected_parameter").attr("data-parameter-type"),r=jQuery(e).val();r=r.split("*");var o=parseFloat(r[1]),_=r[0],s=Number(jQuery(e).closest(".image_selected_parameter").find(".already_selected_values").val());if("4"==i||"5"==i){var n=parseFloat(_+o);jQuery(e).closest(".image_selected_parameter").find(".already_selected_values").val(n)}else if("6"==i){if(0==jQuery(e).is(":checked"))var l=s-parseFloat(_+o);else l=s+parseFloat(_+o);jQuery(e).closest(".image_selected_parameter").find(".already_selected_values").val(l)}jQuery(".already_selected_values").each(function(){t+=Number(jQuery(this).val())}),a+=t,jQuery(".product_manual_price").attr("data-actual-price",a),a=(a*=Number(jQuery(".image_count").val())<=0?1:Number(jQuery(".image_count").val())).toFixed(2).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"),jQuery(".product_manual_price").html(a)}function onBtnClickAddToCart(){var e=jQuery("[name=type]").val();if(""!=e){var t={};if("manual"==e){var a=jQuery(".image_count").val(),i={};jQuery(".manual").find(".image_selected_parameter").each(function(){var e=jQuery(this).attr("data-parameter-id"),t="";switch(jQuery(this).attr("data-parameter-type")){case"2":t=jQuery(this).find("input").val();break;case"3":t=jQuery(this).find("textarea").val();break;case"4":t=jQuery(this).find("select :selected").val();break;case"5":t=jQuery(this).find("[type=radio]:checked").val();break;case"6":var a=[];jQuery(this).find("[type=checkbox]:checked").each(function(){a.push(jQuery(this).val())}),t=a}i[e]=t}),t.count=a,t.parameters=i,t.price=jQuery(".product_manual_price").attr("data-price").replace(",","")}else{var r=[];if(0==jQuery("[name=option_show_digital_items_count]").val()){if(0==jQuery("[name=selected_download_item]:checked").length)return void jQuery(".add_to_cart_msg").html("You must select at least one item.");jQuery("[name=selected_download_item]:checked").each(function(){var e={};e.id=jQuery(this).val(),e.count=1,e.price=jQuery(this).closest("tr").attr("data-price"),r.push(e)})}else jQuery(".digital_image_count").each(function(){var e={};0<jQuery(this).val()&&(e.id=jQuery(this).closest("tr").attr("data-id"),e.price=jQuery(this).closest("tr").attr("data-price"),e.count=jQuery(this).val(),r.push(e))});if(0==(t.downloadItems=r).length)return void jQuery(".add_to_cart_msg").html("Please select at least one item")}var o=jQuery("#ajax_url").val(),_={action:"add_cart",task:"add_cart",controller:"checkout",image_id:jQuery("#bwg_popup_image").attr("image_id"),type:e,data:JSON.stringify(t)};jQuery.ajax({type:"POST",url:o,data:_,success:function(e){responseData=JSON.parse(e),jQuery(".add_to_cart_msg").html(responseData.msg),jQuery(".products_in_cart").html(responseData.products_in_cart),1==responseData.redirect&&(window.location.href="<?php echo get_permalink($options->checkout_page);?>")},beforeSend:function(){},complete:function(){}})}else jQuery(".add_to_cart_msg").html("Please select Prints and products or Downloads")}function onBtnViewCart(){var e=jQuery("[name=option_checkout_page]").val();jQuery("#bwg_ecommerce_form").attr("action",e),jQuery("#bwg_ecommerce_form").submit()}function wds_load_visible_images(e,t,a,i,r){0<=e-t&&(i=e-t),a<e+t&&(r=a);for(var o=i;o<=r;o++){var _=jQuery("#bwg_filmstrip_thumbnail_"+o+" img");_.removeClass("hidden"),_.attr("src",_.data("url"))}}function bwg_load_filmstrip(){for(var e=1;e<=total_thumbnail_count;e++){var t;if(leftIndex=startPoint-e,rightIndex=endPoint+e,rightIndex<total_thumbnail_count)(t=jQuery("#bwg_filmstrip_thumbnail_"+rightIndex+" img")).removeClass("hidden"),t.attr("src",t.data("url"));if(0<=leftIndex)(t=jQuery("#bwg_filmstrip_thumbnail_"+leftIndex+" img")).removeClass("hidden"),t.attr("src",t.data("url"))}}function spider_display_embed(e,t,a,i){var r="";switch(e){case"EMBED_OEMBED_YOUTUBE_VIDEO":var o="<iframe ";for(attr in""!=a&&(o+=' src="//www.youtube.com/embed/'+a+'?enablejsapi=1&wmode=transparent"'),i)/src/i.test(attr)||""!=attr&&""!=i[attr]&&(o+=" "+attr+'="'+i[attr]+'"');r+=o+=" ></iframe>";break;case"EMBED_OEMBED_VIMEO_VIDEO":var _="<iframe ";for(attr in""!=a&&(_+=' src="//player.vimeo.com/video/'+a+'?enablejsapi=1"'),i)/src/i.test(attr)||""!=attr&&""!=i[attr]&&(_+=" "+attr+'="'+i[attr]+'"');r+=_+=" ></iframe>";break;case"EMBED_OEMBED_FLICKR_IMAGE":var s="<div ";for(attr in i)/src/i.test(attr)||""!=attr&&""!=i[attr]&&(s+=" "+attr+'="'+i[attr]+'"');s+=" >",""!=a&&(s+='<img src="'+a+'" style="max-width:100% !important; max-height:100% !important; width:auto !important; height:auto !important;">'),r+=s+="</div>";break;case"EMBED_OEMBED_FLICKR_VIDEO":break;case"EMBED_OEMBED_INSTAGRAM_VIDEO":var n="<div ";for(attr in i)/src/i.test(attr)||""!=attr&&""!=i[attr]&&(n+=" "+attr+'="'+i[attr]+'"');n+=" >",""!=a&&(n+='<video style="width:auto !important; height:auto !important; max-width:100% !important; max-height:100% !important; margin:0 !important;" controls><source src="'+a+'" type="video/mp4"> Your browser does not support the video tag. </video>'),r+=n+="</div>";break;case"EMBED_OEMBED_INSTAGRAM_IMAGE":n="<div ";for(attr in i)/src/i.test(attr)||""!=attr&&""!=i[attr]&&(n+=" "+attr+'="'+i[attr]+'"');n+=" >",""!=a&&(n+='<img src="//instagram.com/p/'+a+'/media/?size=l" style=" max-width:100% !important; max-height:100% !important; width:auto; height:auto;">'),r+=n+="</div>";break;case"EMBED_OEMBED_INSTAGRAM_POST":n="<div ";for(attr in i)/src/i.test(attr)||""!=attr&&""!=i[attr]&&(n+=" "+attr+'="'+i[attr]+'"',"CLASS"!=attr&&"class"!=attr&&"Class"!=attr||(obj_class=i[attr]));n+=" >",""!=a&&(n+='<iframe class="inner_instagram_iframe_'+obj_class+'" src="//instagr.am/p/'+a+'/embed/?enablejsapi=1" style="max-width:100% !important; max-height:100% !important; width:100%; height:100%; margin:0; display:table-cell; vertical-align:middle;"frameborder="0" scrolling="no" allowtransparency="false" allowfullscreen></iframe>'),r+=n+="</div>";break;case"EMBED_OEMBED_FACEBOOK_IMAGE":var l="<span ";for(attr in i)/src/i.test(attr)||""!=attr&&""!=i[attr]&&(l+=" "+attr+'="'+i[attr]+'"');l+=" >",""!=a&&(l+='<img src="'+t+'" style=" max-width:100% !important; max-height:100% !important; width:auto; height:100%;">'),r+=l+="</span>";break;case"EMBED_OEMBED_FACEBOOK_VIDEO":var g="<div ";for(attr in i)/src/i.test(attr)||""!=attr&&""!=i[attr]&&(g+=" "+attr+'="'+i[attr]+'"');g+=" >",""!=a&&(g+='<iframe src="//www.facebook.com/video/embed?video_id='+t+'&enablejsapi=1&wmode=transparent" style="max-width:100% !important; max-height:100% !important; width:100%; height:100%; margin:0; display:table-cell; vertical-align:middle;"frameborder="0" class="bwg_fb_video" scrolling="no" allowtransparency="false" allowfullscreen></iframe>'),r+=g+="</div>";break;case"EMBED_OEMBED_DAILYMOTION_VIDEO":var u="<iframe ";for(attr in""!=a&&(u+=' src="//www.dailymotion.com/embed/video/'+a+'?api=postMessage"'),i)/src/i.test(attr)||""!=attr&&""!=i[attr]&&(u+=" "+attr+'="'+i[attr]+'"');r+=u+=" ></iframe>";break;case"EMBED_OEMBED_IMGUR":var c="<div ";for(attr in i)/src/i.test(attr)||""!=attr&&""!=i[attr]&&(n+=" "+attr+'="'+i[attr]+'"');c+=" >",""!=a&&(c+='<img src="'+a+'" style="max-width:100% !important; max-height:100% !important; width:auto; height:auto !important;">'),r+=c+="</div>"}return r}function bwg_add_instagram_gallery(e,_){if(!0===(_=void 0!==_&&_)){if(bwg_check_instagram_gallery_input(e,_))return!1;var t="0";1==jQuery("input[name=popup_instagram_post_gallery]:checked").val()&&(t="1");var a=encodeURI(jQuery("#popup_instagram_gallery_source").val()),i=encodeURI(jQuery("#popup_instagram_image_number").val())}else{if(bwg_check_instagram_gallery_input(e,_))return!1;if(!bwg_check_gallery_empty(!1,!0))return!1;t="0";1==jQuery("input[name=instagram_post_gallery]:checked").val()&&(t="1");a=encodeURI(jQuery("#gallery_source").val());var r=jQuery("input[name=update_flag]:checked").val();i=encodeURI(jQuery("#autogallery_image_number").val())}jQuery("#bulk_embed").hide(),jQuery("#loading_div").show();var s=[],o={action:"addInstagramGallery",instagram_user:a,instagram_access_token:e,whole_post:t,autogallery_image_number:i,update_flag:r,async:!0};jQuery.post(ajax_url,o,function(e){if(0==e)return alert("Error: cannot get response from the server."),jQuery("#loading_div").hide(),_&&jQuery("#bulk_embed").show(),!1;var t=e.indexOf("WD_delimiter_start"),a=e.indexOf("WD_delimiter_end");if(-1==t||-1==a)return jQuery("#loading_div").hide(),_&&jQuery("#bulk_embed").show(),!1;if(e=e.substring(t+18,a),response_JSON=jQuery.parseJSON(e),response_JSON){if("error"==response_JSON[0])return alert("Error: "+jQuery.parseJSON(e)[1]),jQuery("#loading_div").hide(),_&&jQuery("#bulk_embed").show(),!1;for(var i=response_JSON.length,r=1;r<=i;r++)if(0!=response_JSON[i-r]){var o=response_JSON[i-r];s.push(o)}return bwg_add_image(s),_||(bwg_gallery_update_flag(),jQuery("#tr_instagram_gallery_add_button").hide()),jQuery("#loading_div").hide(),_&&jQuery(".opacity_bulk_embed").hide(),"ok"}return alert("There is some error. Cannot add Instagram gallery."),jQuery("#loading_div").hide(),_&&jQuery("#bulk_embed").show(),!1})}!function(_){var s={init:function(i){return this.each(function(){s.destroy.call(this),this.opt=_.extend(!0,{},_.fn.raty.defaults,i);var e=_(this);s._callback.call(this,["number","readOnly","score","scoreName"]),this.opt.precision&&s._adjustPrecision.call(this),this.opt.number=s._between(this.opt.number,0,this.opt.numberMax),this.opt.path=this.opt.path||"",this.opt.path&&"/"!==this.opt.path.slice(this.opt.path.length-1,this.opt.path.length)&&(this.opt.path+="/"),this.stars=s._createStars.call(this),this.score=s._createScore.call(this),s._apply.call(this,this.opt.score);var t=this.opt.space?4:0,a=this.opt.width||this.opt.number*this.opt.size+this.opt.number*t;this.opt.cancel&&(this.cancel=s._createCancel.call(this),a+=this.opt.size+t),this.opt.readOnly?s._lock.call(this):(e.css("cursor","pointer"),s._binds.call(this)),!1!==this.opt.width&&(e.css("width",a),_(".bwg_rate_spun").css("width",a)),s._target.call(this,this.opt.score),e.data({settings:this.opt,raty:!0})})},_adjustPrecision:function(){this.opt.targetType="score",this.opt.half=!0},_apply:function(e){e&&0<e&&(e=s._between(e,0,this.opt.number),this.score.val(e)),s._fill.call(this,e),e&&s._roundStars.call(this,e),_("#bwg_star *").removeClass("bwg_rate_hover")},_between:function(e,t,a){return Math.min(Math.max(parseFloat(e),t),a)},_binds:function(){this.cancel&&s._bindCancel.call(this),s._bindClick.call(this),s._bindOut.call(this),s._bindOver.call(this)},_bindCancel:function(){s._bindClickCancel.call(this),s._bindOutCancel.call(this),s._bindOverCancel.call(this)},_bindClick:function(){var t=this,a=_(t);t.stars.on("click.raty",function(e){t.score.val(t.opt.half||t.opt.precision?a.data("score"):_(this).attr("alt")),t.opt.click&&t.opt.click.call(t,parseFloat(t.score.val()),e)})},_bindClickCancel:function(){var t=this;t.cancel.on("click.raty",function(e){t.score.removeAttr("value"),t.opt.click&&t.opt.click.call(t,null,e)})},_bindOut:function(){var a=this;_(this).on("mouseleave.raty",function(e){var t=parseFloat(a.score.val())||void 0;s._apply.call(a,t),s._target.call(a,t,e),a.opt.mouseout&&a.opt.mouseout.call(a,t,e)})},_bindOutCancel:function(){var t=this;t.cancel.on("mouseleave.raty",function(e){_(this).attr("class",t.opt.cancelOff),t.opt.mouseout&&t.opt.mouseout.call(t,t.score.val()||null,e)})},_bindOverCancel:function(){var t=this;t.cancel.on("mouseover.raty",function(e){_(this).attr("class",t.opt.cancelOn),t.stars.attr("class",t.opt.starOff),s._target.call(t,null,e),t.opt.mouseover&&t.opt.mouseover.call(t,null)})},_bindOver:function(){var r=this,o=_(r),e=r.opt.half?"mousemove.raty":"mouseover.raty";r.stars.on(e,function(e){var t=parseInt(_(this).attr("alt"),10);if(r.opt.half){var a=parseFloat((e.pageX-_(this).offset().left)/r.opt.size),i=.5<a?1:.5;t=t-1+i,s._fill.call(r,t),r.opt.precision&&(t=t-i+a),s._roundStars.call(r,t),o.data("score",t)}else s._fill.call(r,t);s._target.call(r,t,e),r.opt.mouseover&&r.opt.mouseover.call(r,t,e)})},_callback:function(e){for(i in e)"function"==typeof this.opt[e[i]]&&(this.opt[e[i]]=this.opt[e[i]].call(this))},_createCancel:function(){var e=_(this),t=this.opt.cancelOff,a=_("<i />",{class:"raty-cancel "+t,alt:"x",title:this.opt.cancelHint});return"left"==this.opt.cancelPlace?e.prepend("&#160;").prepend(a):e.append("&#160;").append(a),a},_createScore:function(){return _("<input />",{type:"hidden",name:this.opt.scoreName}).appendTo(this)},_createStars:function(){for(var e=_(this),t=1;t<=this.opt.number;t++){var a=s._getHint.call(this,t),i=this.opt.score&&this.opt.score>=t?"starOn":"starOff";i=this.opt[i],_("<i />",{class:i,alt:t,title:a}).appendTo(this),this.opt.space&&e.append(t<this.opt.number?"&#160;":"")}return e.children("i")},_error:function(e){_(this).html(e),_.error(e)},_fill:function(e){for(var t=this,a=0,i=1;i<=t.stars.length;i++){var r=t.stars.eq(i-1),o=t.opt.single?i==e:i<=e;if(t.opt.iconRange&&t.opt.iconRange.length>a){var _=t.opt.iconRange[a],s=_.on||"starOn",n=_.off||"starOff",l=o?s:n;i<=_.range&&(r.attr("class",this.opt[l]),l==s&&r.addClass("bwg_rate_hover")),i==_.range&&a++}else{l=o?"starOn":"starOff";r.attr("class",this.opt[l]),"starOn"==l&&r.addClass("bwg_rate_hover")}}},_getHint:function(e){var t=this.opt.hints[e-1];return""===t?"":t||e},_lock:function(){var e=parseInt(this.score.val(),10);e?s._getHint.call(this,e):this.opt.noRatedMsg;_(this).data("readonly",!0).css("cursor","").attr("title",this.opt.alreadyRatedMsg),this.score.attr("readonly","readonly"),this.stars.attr("title",this.opt.alreadyRatedMsg),this.cancel&&this.cancel.hide()},_roundStars:function(e){var t=(e-Math.floor(e)).toFixed(2);if(t>this.opt.round.down){var a="starOn";this.opt.halfShow&&t<this.opt.round.up?a="starHalf":t<this.opt.round.full&&(a="starOff"),this.stars.eq(Math.ceil(e)-1).attr("class",this.opt[a])}},_target:function(e,t){if(this.opt.target){var a=_(this.opt.target);0===a.length&&s._error.call(this,"Target selector invalid or missing!"),this.opt.targetFormat.indexOf("{score}")<0&&s._error.call(this,'Template "{score}" missing!');var i=t&&"mouseover"==t.type;void 0===e?e=this.opt.targetText:null===e?e=i?this.opt.cancelHint:this.opt.targetText:("hint"==this.opt.targetType?e=s._getHint.call(this,Math.ceil(e)):this.opt.precision&&(e=parseFloat(e).toFixed(1)),i||this.opt.targetKeep||(e=this.opt.targetText)),e&&(e=this.opt.targetFormat.toString().replace("{score}",e)),a.is(":input")?a.val(e):a.html(e)}},_unlock:function(){_(this).data("readonly",!1).css("cursor","pointer").removeAttr("title"),this.score.removeAttr("readonly","readonly");for(var e=0;e<this.opt.number;e++)this.stars.eq(e).attr("title",s._getHint.call(this,e+1));this.cancel&&this.cancel.css("display","")},cancel:function(e){return this.each(function(){!0!==_(this).data("readonly")&&(s[e?"click":"score"].call(this,null),this.score.removeAttr("value"))})},click:function(e){return _(this).each(function(){!0!==_(this).data("readonly")&&(s._apply.call(this,e),this.opt.click||s._error.call(this,'You must add the "click: function(score, evt) { }" callback.'),this.opt.click.call(this,e,{type:"click"}),s._target.call(this,e))})},destroy:function(){return _(this).each(function(){var e=_(this),t=e.data("raw");t?e.off(".raty").empty().css({cursor:t.style.cursor,width:t.style.width}).removeData("readonly"):e.data("raw",e.clone()[0])})},getScore:function(){var e,t=[];return _(this).each(function(){e=this.score.val(),t.push(e?parseFloat(e):void 0)}),1<t.length?t:t[0]},readOnly:function(t){return this.each(function(){var e=_(this);e.data("readonly")!==t&&(t?(e.off(".raty").children("i").off(".raty"),s._lock.call(this)):(s._binds.call(this),s._unlock.call(this)),e.data("readonly",t))})},reload:function(){return s.set.call(this,{})},score:function(){return arguments.length?s.setScore.apply(this,arguments):s.getScore.call(this)},set:function(i){return this.each(function(){var e=_(this),t=e.data("settings"),a=_.extend({},t,i);e.raty(a)})},setScore:function(e){return _(this).each(function(){!0!==_(this).data("readonly")&&(s._apply.call(this,e),s._target.call(this,e))})}};_.fn.raty=function(e){return s[e]?s[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void _.error("Method "+e+" does not exist!"):s.init.apply(this,arguments)},_.fn.raty.defaults={cancel:!1,cancelHint:"Cancel this rating!",cancelOff:"bwg-icon-minus-square-o",cancelOn:"bwg-icon-minus-square",cancelPlace:"left",click:void 0,half:!1,halfShow:!0,hints:["bad","poor","regular","good","gorgeous"],iconRange:void 0,mouseout:void 0,mouseover:void 0,noRatedMsg:"Not rated yet!",alreadyRatedMsg:"Not rated yet!",number:5,numberMax:20,path:"",precision:!1,readOnly:!1,round:{down:.25,full:.6,up:.76},score:void 0,scoreName:"score",single:!1,size:16,space:!0,starHalf:"bwg-icon-star-half-o",starOff:"bwg-icon-star-o",starOn:"bwg-icon-star",target:void 0,targetFormat:"{score}",targetKeep:!1,targetText:"",targetType:"hint",width:void 0}}(jQuery),function(y){y.fn.featureCarousel=function(d){if(1<this.length)return this.each(function(){y(this).featureCarousel(d)}),this;d=y.extend({},y.fn.featureCarousel.defaults,d||{});var h={containerWidth:0,containerHeight:0,largeFeatureWidth:0,largeFeatureHeight:0,smallFeatureHeight:0,smallFeatureWidth:0,totalFeatureCount:y(this).children("div").length,featuresContainer:y(this),featuresArray:[],containerIDTag:"#"+y(this).attr("id"),timeoutVar:null,rotationsRemaining:0,itemsToAnimate:0,borderWidth:0,autoTime:0},_=function(e){return h.featuresArray[e-1]},b=function(e){return e-1==0?h.totalFeatureCount:e-1},p=function(e){return e+1>h.totalFeatureCount?1:e+1},m=function(e){if(clearTimeout(h.timeoutVar),!e&&0!=d.autoPlay){var t=Math.abs(d.autoPlay)<d.carouselSpeed?d.carouselSpeed:Math.abs(d.autoPlay);h.timeoutVar=setTimeout(function(){0<d.autoPlay?a(!0,1):a(!1,1)},t)}},s=function(a,i){var e,t,r,o,_,s,n,l;bwg_params_carousel[d.bwg_number].data[a.attr("image_key")].is_embed_video&&jQuery(".bwg_carousel-feature"+d.bwg_number).find("iframe").each(function(){jQuery(this)[0].contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*"),jQuery(this)[0].contentWindow.postMessage('{ "method": "pause" }',"*"),jQuery(this)[0].contentWindow.postMessage("pause","*")}),bwg_params_carousel[d.bwg_number].data[a.attr("image_key")].is_embed_instagram_post&&jQuery("#bwg_carousel_play_pause_"+d.bwg_number).hide(),a.find(".bwg_video_hide"+d.bwg_number).each(function(){jQuery(this).css({display:""})}),a.find(".bwg_carousel_image_container_"+d.bwg_number).each(function(){jQuery(this).hide()}),a.find(".bwg_carousel_watermark_"+d.bwg_number).each(function(){jQuery(this).hide()});var g,u=a.data("position");if(g=1==i?b(u):p(u),1==u&&d.leavingCenter(a),1==g){var c=bwg_params_carousel[d.bwg_number].data[a.attr("image_key")].alt;""!==(c=c.replace(/^\s+/,"").replace(/\s+$/,""))&&d.enable_image_title?jQuery(".bwg_carousel_title_text_"+d.bwg_number).css({display:""}):jQuery(".bwg_carousel_title_text_"+d.bwg_number).css({display:"none"}),e=h.largeFeatureWidth,t=h.largeFeatureHeight,r=d.containerHeight/2-t/2,_=a.css("z-index"),o=d.containerWidth/2-h.largeFeatureWidth/2-h.borderWidth/2,s=1,n=100,bwg_params_carousel[d.bwg_number].data[a.attr("image_key")].is_embed_video?(jQuery(".bwg_carousel_play_pause_"+d.bwg_number).css({display:"none"}),jQuery(".bwg_carousel_image_container_"+d.bwg_number).css({display:""}),jQuery(".bwg_carousel_watermark_container_"+d.bwg_number).css({display:""}),jQuery(".bwg_carousel_watermark_spun_"+d.bwg_number).css({display:""}),jQuery(".bwg_carousel_watermark_"+d.bwg_number).css({display:""}),a.find(".bwg_video_hide"+d.bwg_number).each(function(){jQuery(this).hide()})):(a.find(".bwg_video_hide"+d.bwg_number).each(function(){jQuery(this).hide()}),jQuery(".bwg_carousel_play_pause_"+d.bwg_number).css({display:""}),a.find(".bwg_carousel_image_container_"+d.bwg_number).each(function(){jQuery(this).css({display:""})}),a.find(".bwg_carousel_watermark_"+d.bwg_number).each(function(){jQuery(this).css({display:""})})),l="grayscale(0%)",bwg_params_carousel[d.bwg_number].data[a.attr("image_key")].is_embed_instagram_post&&(a.find(".bwg_embed_frame_"+d.bwg_number).css("min-height",""),a.find(".bwg_embed_frame_"+d.bwg_number).css("min-width","")),bwg_params_carousel[d.bwg_number].data[a.attr("image_key")].is_embed_video&&a.find(".bwg_embed_frame_"+d.bwg_number).css("display","inline-block"),a.find(".bwg_carousel_image_container_"+d.bwg_number).next().each(function(){jQuery("#"+jQuery(this).attr("id")).css({"pointer-events":""})})}else g<=h.totalFeatureCount&&g>h.totalFeatureCount-d.imagecount/2+1?(e=h.largeFeatureWidth*Math.pow(d.smallFeaturePar,h.totalFeatureCount-g+1),t=h.largeFeatureHeight*Math.pow(d.smallFeaturePar,h.totalFeatureCount-g+1),r=d.containerHeight/2-t/2,s=1,l="grayscale(0%)",n=100,e=h.largeFeatureWidth*Math.pow(d.smallFeaturePar,h.totalFeatureCount-g+1),t=h.largeFeatureHeight*Math.pow(d.smallFeaturePar,h.totalFeatureCount-g+1),r=d.containerHeight/2-t/2,bwg_params_carousel[d.bwg_number].data[a.attr("image_key")].is_embed_instagram_post&&(a.find(".bwg_embed_frame_"+d.bwg_number).css("min-height","100%"),a.find(".bwg_embed_frame_"+d.bwg_number).css("min-width","100%")),o=0==d.fit_containerWidth&&d.smallFeaturePar<1?d.containerWidth/2-h.largeFeatureWidth/2-h.largeFeatureWidth*(1-d.smallFeaturePar)*d.smallFeaturePar*(h.totalFeatureCount-g+1):0==d.fit_containerWidth&&1==d.smallFeaturePar?d.containerWidth/2-h.largeFeatureWidth/2-h.largeFeatureWidth*d.smallFeaturePar*d.smallFeaturePar*(h.totalFeatureCount-g+1):(new_left1=(d.containerWidth/2-h.largeFeatureWidth/2)/(d.imagecount/2-.5),d.containerWidth/2-h.largeFeatureWidth/2-h.borderWidth/2-new_left1*(h.totalFeatureCount-g+1)),a.find(".bwg_carousel_image_container_"+d.bwg_number).next().each(function(){jQuery("#"+jQuery(this).attr("id")).css({"pointer-events":"none"})})):2<=g&&g<=d.imagecount/2+1?(e=h.largeFeatureWidth*Math.pow(d.smallFeaturePar,g-1),t=h.largeFeatureHeight*Math.pow(d.smallFeaturePar,g-1),r=d.containerHeight/2-t/2,s=1,l="grayscale(0%)",n=100,bwg_params_carousel[d.bwg_number].data[a.attr("image_key")].is_embed_instagram_post&&(a.find(".bwg_embed_frame_"+d.bwg_number).css("min-height","100%"),a.find(".bwg_embed_frame_"+d.bwg_number).css("min-width","100%")),o=0==d.fit_containerWidth&&d.smallFeaturePar<1?d.containerWidth/2+h.largeFeatureWidth/2+h.largeFeatureWidth*d.smallFeaturePar*(1-d.smallFeaturePar)*(g-1)-e:0==d.fit_containerWidth&&1==d.smallFeaturePar?d.containerWidth/2+h.largeFeatureWidth/2+h.largeFeatureWidth*d.smallFeaturePar*d.smallFeaturePar*(g-1)-e:(new_left1=(d.containerWidth/2-h.largeFeatureWidth/2)/(d.imagecount/2-.5),d.containerWidth/2+h.largeFeatureWidth/2-e+new_left1*(g-1)),a.find(".bwg_carousel_image_container_"+d.bwg_number).next().each(function(){jQuery("#"+jQuery(this).attr("id")).css({"pointer-events":"none"})})):(o=d.containerWidth/2-h.largeFeatureWidth*d.smallFeaturePar/2-h.borderWidth/2,n=s=0);1==u&&a.find(".bwg_carousel-caption"+d.bwg_number).hide(),a.find("div[class^='bwg_carousel-image']").css({filter:l,"-webkit-filter":l}),a.animate({width:e,height:t,top:r,left:o,opacity:s,filter:n},d.carouselSpeed,d.animationEasing,function(){if(1==g&&(d.captionBelow&&a.css("height","auto"),a.find(".bwg_carousel-caption"+d.bwg_number).fadeTo("fast",.85),d.movedToCenter(a)),h.rotationsRemaining=h.rotationsRemaining-1,a.css("z-index",_),(d.trackerIndividual||d.trackerSummation)&&1==g){var e=h.featuresContainer.find(".bwg_carousel-feature"+d.bwg_number).index(a)+1;(function(e,t){d.trackerIndividual&&((a=h.featuresContainer.find(".tracker-individual-container")).find("#tracker-"+e),a.find("#tracker-"+t));var a;d.trackerSummation&&(a=h.featuresContainer.find(".tracker-summation-container")).find(".tracker-summation-current").text(t)})(0==i?p(e):b(e),e)}var t;h.rotationsRemaining/h.itemsToAnimate%1==0&&(bwg_params_carousel[d.bwg_number].bwg_currentlyMoving=!1,t=i,y.each(h.featuresArray,function(){var e;e=0==t?p(y(this).data().position):b(y(this).data().position),y(this).data("position",e)}),0<h.rotationsRemaining&&w(i)),m(!1)}).end()},w=function(e){var t,a,i,r;if(bwg_params_carousel[d.bwg_number].bwg_currentlyMoving=!0,1==e){t=_(p(bwg_params_carousel[d.bwg_number].bwg_currentCenterNum)),a=[],r=bwg_params_carousel[d.bwg_number].bwg_currentCenterNum;for(var o=1;o<=d.imagecount/2+1;++o)a.push(_(r)),r=b(r);i=[],r=p(bwg_params_carousel[d.bwg_number].bwg_currentCenterNum);for(o=1;o<=d.imagecount/2+1;++o)r=p(r),i.push(_(r));bwg_params_carousel[d.bwg_number].bwg_currentCenterNum=p(bwg_params_carousel[d.bwg_number].bwg_currentCenterNum)}else{t=_(b(bwg_params_carousel[d.bwg_number].bwg_currentCenterNum)),a=[],r=b(bwg_params_carousel[d.bwg_number].bwg_currentCenterNum);for(o=1;o<=d.imagecount/2+1;++o)r=b(r),a.push(_(r));i=[],r=bwg_params_carousel[d.bwg_number].bwg_currentCenterNum;for(o=1;o<=d.imagecount/2+1;++o)i.push(_(r)),r=p(r);bwg_params_carousel[d.bwg_number].bwg_currentCenterNum=b(bwg_params_carousel[d.bwg_number].bwg_currentCenterNum)}for(o=0;o<a.length;o++)e?a[o].css("z-index",a.length-o+3):a.length-2>o&&a[o].css("z-index",a.length-o+3),s(a[o],e,onload);for(t.css("z-index",Math.max(a.length,i.length)+4),s(t,e,onload),o=0;o<i.length;o++)e?a.length-2>o&&i[o].css("z-index",i.length-o+3):i[o].css("z-index",i.length-o+3),s(i[o],e,onload)},a=function(e,t){if(0==bwg_params_carousel[d.bwg_number].bwg_currentlyMoving){var a=t*h.itemsToAnimate;h.rotationsRemaining=a,bwg_carousel_watermark(d.bwg_number),w(e)}};return y(d.leftButtonTag).on("click",function(){a(!1,1)}),y(d.rightButtonTag).on("click",function(){a(!0,1)}),h.featuresContainer.find(".bwg_carousel-feature"+d.bwg_number).mouseover(function(){if(0==bwg_params_carousel[d.bwg_number].bwg_currentlyMoving){var e=y(this).data("position");3!=e&&e!=h.totalFeatureCount||y(this).css("opacity",1)}d.pauseOnHover&&m(!0),d.stopOnHover&&(d.autoPlay=0)}).mouseout(function(){if(0==bwg_params_carousel[d.bwg_number].bwg_currentlyMoving){var e=y(this).data("position");3!=e&&e!=h.totalFeatureCount||y(this).css("opacity",1)}d.pauseOnHover&&m(!1)}),y("a",h.containerIDTag).on("click",function(t){y(this).parentsUntil(h.containerIDTag).each(function(){var e=y(this).data("position");if(null!=e){if(1!=e)return e==h.totalFeatureCount?a(!1,1):2==e&&a(!0,1),t.preventDefault(),!1;d.clickedCenter(y(this))}})}),this.initialize=function(){return function(i){if(1==d.preload){var e=h.featuresContainer.find("img"),r=0,o=e.length;e.each(function(e,t){var a=new Image;y(a).bind("load error",function(){++r==o&&i()}),a.src=t.src})}else i()}(function(){!function(){d.containerWidth=h.featuresContainer.width(),d.containerHeight=h.featuresContainer.height();var e=y(h.containerIDTag).find(".bwg_carousel-image"+d.bwg_number+":first");1<d.largeFeatureWidth?h.largeFeatureWidth=d.largeFeatureWidth:0<d.largeFeatureWidth&&d.largeFeatureWidth<1?h.largeFeatureWidth=e.width()*d.largeFeatureWidth:h.largeFeatureWidth=e.outerWidth(),1<d.largeFeatureHeight?h.largeFeatureHeight=d.largeFeatureHeight:0<d.largeFeatureHeight&&d.largeFeatureHeight<1?h.largeFeatureHeight=e.height()*d.largeFeatureHeight:h.largeFeatureHeight=e.outerHeight(),1<d.smallFeatureWidth?h.smallFeatureWidth=d.smallFeatureWidth:0<d.smallFeatureWidth&&d.smallFeatureWidth<1?h.smallFeatureWidth=e.width()*d.smallFeatureWidth:h.smallFeatureWidth=e.outerWidth()/2}(),0<d.displayCutoff&&d.displayCutoff<h.totalFeatureCount&&(h.totalFeatureCount=d.displayCutoff),h.featuresContainer.find(".bwg_carousel-feature"+d.bwg_number).each(function(e){e<h.totalFeatureCount&&(h.featuresArray[e]=y(this))}),"medium"!=h.featuresContainer.find(".bwg_carousel-feature"+d.bwg_number).first().css("borderLeftWidth")&&(h.borderWidth=parseInt(h.featuresContainer.find(".bwg_carousel-feature"+d.bwg_number).first().css("borderLeftWidth"))),1!=d.imagecount?h.featuresContainer.find(".bwg_carousel-feature"+d.bwg_number).each(function(){y(this).css({left:d.containerWidth/2-d.largeFeatureWidth*d.smallFeaturePar/2-h.borderWidth/2+d.largeFeatureWidth/2,width:d.largeFeatureWidth*d.smallFeaturePar/100,height:d.largeFeatureHeight*d.smallFeaturePar/100,top:d.smallFeatureOffset+d.topPadding+d.largeFeatureHeight/2,opacity:0,filter:"Alpha(opacity=100)"})}):h.featuresContainer.find(".bwg_carousel-feature"+d.bwg_number).each(function(){y(this).css({left:0,width:d.largeFeatureWidth*d.smallFeaturePar,height:d.largeFeatureHeight*d.smallFeaturePar,top:0,opacity:0,filter:"Alpha(opacity=100)"})}),d.captionBelow&&h.featuresContainer.find(".bwg_carousel-caption"+d.bwg_number).css("position","absolute"),h.totalFeatureCount<d.imagecount?h.itemsToAnimate=h.totalFeatureCount:h.itemsToAnimate=parseInt(d.imagecount)+2,h.featuresContainer.find(".bwg_carousel-caption"+d.bwg_number).hide(),0==bwg_params_carousel[d.bwg_number].bwg_currentlyMoving&&(!function(){y.each(h.featuresArray,function(e){y(this).data("setPosition",e+1)});var e=b(d.startingFeature);bwg_params_carousel[d.bwg_number].bwg_currentCenterNum=e;var t=_(e);t.data("position",1),t.prevAll().each(function(e){y(this).data("position",h.totalFeatureCount-e)}),t.nextAll().each(function(e){null!=y(this).data("setPosition")&&y(this).data("position",e+2)}),"caption"==d.counterStyle&&y.each(h.featuresArray,function(){var e=b(y(this).data("position")),t=y("<span></span>");t.addClass("numberTag"),t.html("("+e+" of "+h.totalFeatureCount+") "),y(this).find(".bwg_carousel-caption"+d.bwg_number).prepend(t)})}(),a(!0,1))}),this},this.shift=function(e){var t=y(e).data("position");1!=t&&(t>h.totalFeatureCount/2+1?(bwg_carousel_preload(d.bwg_number,!1),a(!1,h.totalFeatureCount-t+1)):(bwg_carousel_preload(d.bwg_number,!0),a(!0,t-1)),d.carouselSpeed=400,d.animationEasing)},this.next=function(){bwg_carousel_preload(d.bwg_number,!0),a(!0,1)},this.prev=function(){bwg_carousel_preload(d.bwg_number,!1),a(!1,1)},this.pause=function(){d.autoPlay=0,m(!0)},this.start=function(){d.autoPlay=d.interval,m(!1)},this.initialize()},y.fn.featureCarousel.defaults={largeFeatureWidth:0,largeFeatureHeight:0,smallFeatureWidth:.5,smallFeatureHeight:.5,containerWidth:0,containerHeight:0,fit_containerWidth:0,bwg_number:0,topPadding:20,sidePadding:50,smallFeatureOffset:50,smallFeaturePar:0,startingFeature:1,carouselSpeed:300,autoPlay:4e3,imagecount:7,enable_image_title:0,pauseOnHover:!0,stopOnHover:!1,trackerIndividual:!0,trackerSummation:!0,preload:!1,displayCutoff:0,animationEasing:"swing",leftButtonTag:"#bwg_carousel-left",rightButtonTag:"#bwg_carousel-right",captionBelow:!1,movedToCenter:y.noop,leavingCenter:y.noop,clickedCenter:y.noop}}(jQuery);var DisplayObject3D=function(){return this};DisplayObject3D.prototype._x=0,DisplayObject3D.prototype._y=0,DisplayObject3D.prototype.make3DPoint=function(e,t,a){var i={};return i.x=e,i.y=t,i.z=a,i},DisplayObject3D.prototype.make2DPoint=function(e,t,a,i){var r={};return r.x=e,r.y=t,r.depth=a,r.scaleFactor=i,r},DisplayObject3D.prototype.container=void 0,DisplayObject3D.prototype.pointsArray=[],DisplayObject3D.prototype.init=function(e){if(this.container=e,this.containerId=this.container.attr("id"),0===e.has("ul").length)for(i=0;i<this.pointsArray.length;i++)this.container.append('<b id="tags_cloud_item'+i+'">+</b>')};var Camera3D=function(){};Camera3D.prototype.x=0,Camera3D.prototype.y=0,Camera3D.prototype.z=500,Camera3D.prototype.focalLength=1e3,Camera3D.prototype.scaleRatio=function(e){return this.focalLength/(this.focalLength+e.z-this.z)},Camera3D.prototype.init=function(e,t,a,i){this.x=e,this.y=t,this.z=a,this.focalLength=i};var Object3D=function(e){this.container=e};Object3D.prototype.objects=[],Object3D.prototype.addChild=function(e){return this.objects.push(e),e.init(this.container),e};var Scene3D=function(){};Scene3D.prototype.sceneItems=[],Scene3D.prototype.addToScene=function(e){this.sceneItems.push(e)},Scene3D.prototype.Transform3DPointsTo2DPoints=function(e,t,a){for(var i,r,o,_,s,n,l,g,u,c=[],d=Math.sin(t.x),h=Math.cos(t.x),b=Math.sin(t.y),p=Math.cos(t.y),m=Math.sin(t.z),w=Math.cos(t.z),y=e.length;y--;){i=e[y].x,l=p*(s=d*(r=e[y].y)+h*(o=e[y].z))-b*i,g=m*(n=b*s+p*i)+w*(_=h*r-d*o),i=(w*n-m*_)*(u=a.focalLength/(a.focalLength+l)),r=g*u,o=l;var f=new DisplayObject3D;c[y]=f.make2DPoint(i,r,-o,u)}return c},Scene3D.prototype.renderCamera=function(e){for(var t=0;t<this.sceneItems.length;t++){var a=this.sceneItems[t].objects[0],i=this.Transform3DPointsTo2DPoints(a.pointsArray,axisRotation,e),r=0<document.getElementById(a.containerId).getElementsByTagName("ul").length;for(k=0;k<a.pointsArray.length;k++){var o=null;(o=r?document.getElementById(a.containerId).getElementsByTagName("ul")[0].getElementsByTagName("li")[k]:document.getElementById(a.containerId).getElementsByTagName("*")[k])&&(o._x=i[k].x,o._y=i[k].y,o.scale=i[k].scaleFactor,o.style.position="absolute",o.style.top=o._y+.4*jQuery("#"+a.containerId).height()+"px",o.style.left=o._x+.4*jQuery("#"+a.containerId).width()+"px",o.style.fontSize=100*o.scale+"%",jQuery(o).css({opacity:o.scale-.5}),curChild=jQuery(o).find("#imgg"),curChild&&(jQuery(o).css("zIndex",Math.round(100*o.scale)),curChild.css({maxWidth:50*o.scale}),curChild.css({maxHeight:50*o.scale})))}}};var axisRotation=(new DisplayObject3D).make3DPoint(0,0,0),Sphere=function(e,t,a){for(var i=t;0<i;i--)for(var r=a/t;0<r;r--){var o=r*Math.PI/(a/t+1),_=i*Math.PI*2/t,s=Math.sin(_)*Math.sin(o)*e,n=Math.cos(_)*Math.sin(o)*e,l=Math.cos(o)*e;this.pointsArray.push(this.make3DPoint(s,n,l))}};Sphere.prototype=new DisplayObject3D;var bwg=0,isMobile=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase()),bwg_click=isMobile?"touchend":"click",bwg_params=[],bwg_params_ib=[],bwg_params_carousel=[];function bwg_main_ready(){jQuery(".bwg_container").each(function(){0<jQuery(this).find(".wd_error").length&&bwg_container_loaded(jQuery(this).data("bwg"))}),bwg_document_ready(),jQuery(".bwg-thumbnails, .bwg-masonry-thumbnails, .bwg-album-thumbnails").each(function(){bwg_all_thumnails_loaded(this)}),jQuery(".bwg-mosaic-thumbnails").each(function(){bwg_thumbnail_mosaic(this)}),bwg_slideshow_ready(),bwg_carousel_ready(),bwg_carousel_onload(),bwg_image_browser_ready()}function bwg_resize_search_line(){jQuery(".search_line").each(function(){var e=jQuery(this);e.width()<410?e.addClass("bwg-search-line-responsive"):e.removeClass("bwg-search-line-responsive")})}function bwg_slideshow_resize(){jQuery(".bwg_slideshow").each(function(){bwg=jQuery(this).attr("data-bwg"),jQuery("#bwg_slideshow_image_container_"+bwg).length&&(bwg_params[bwg]=JSON.parse(jQuery("#bwg_slideshow_image_container_"+bwg).attr("data-params")),bwg_params[bwg].event_stack=[],bwg_popup_resize(bwg))})}function bwg_blog_style_resize(){jQuery(".bwg_blog_style").each(function(){bwg=jQuery(this).attr("data-bwg"),jQuery(".bwg_embed_frame_16x9_"+bwg).each(function(e){jQuery(this).width(jQuery(this).parent().width()),jQuery(this).height(.5625*jQuery(this).width())}),jQuery(".bwg_embed_frame_instapost_"+bwg).each(function(e){jQuery(this).width(jQuery(this).parent().width()),jQuery(this).height((jQuery(this).width()-16)*jQuery(this).attr("data-height")/jQuery(this).attr("data-width")+96)})})}function bwg_blog_style_onload(){jQuery(".bwg_blog_style").each(function(){bwg=jQuery(this).attr("data-bwg");jQuery("#bwg_blog_style_"+bwg);jQuery(".bwg_embed_frame_16x9_"+bwg).each(function(e){if(jQuery(".bwg_blog_style_image_"+bwg).find(".fluid-width-video-wrapper").length){jQuery(".fluid-width-video-wrapper").removeAttr("style");var t=jQuery(this).parents(".bwg_blog_style_image_"+bwg).find(".fluid-width-video-wrapper").contents();jQuery(this).parents(".fluid-width-video-wrapper").replaceWith(t)}jQuery(this).width(jQuery(this).parents(".bwg_blog_style_image_"+bwg).width()),jQuery(this).height(.5625*jQuery(this).width())}),jQuery(".bwg_embed_frame_instapost_"+bwg).each(function(e){jQuery(this).width(jQuery(this).parents(".bwg_blog_style_image_"+bwg).width()),jQuery(this).height((jQuery(this).width()-16)*jQuery(this).attr("data-height")/jQuery(this).attr("data-width")+96)}),bwg_container_loaded(bwg)})}function bwg_blog_style_ready(){jQuery(".bwg_blog_style").each(function(){var e=jQuery(this).attr("data-bwg");bwg_container_loaded(e);var t=!1;jQuery(this).find(".bwg_lightbox_"+e).on("click",function(){var e=jQuery(this).attr("data-image-id");if(jQuery("#bwg_blog_style_share_buttons_"+e).removeAttr("data-open-comment"),!t)return t=!0,setTimeout(function(){t=!1},100),bwg_gallery_box(e,jQuery(this).closest(".bwg_container")),!1}),jQuery(".bwg_lightbox_"+e+" .bwg_ecommerce").on("click",function(e){if(e.stopPropagation(),!t)return t=!0,setTimeout(function(){t=!1},100),bwg_gallery_box(jQuery(this).attr("data-image-id"),jQuery(this).closest(".bwg_container"),!0),!1});var a=window.location.hash.substring(1);a&&"-1"!=a.indexOf("bwg")&&(bwg_hash_array=a.replace("bwg","").split("/"),"<?php echo $params_array['gallery_id']; ?>"==bwg_hash_array[0]&&bwg_gallery_box(bwg_hash_array[1]))})}function bwg_slideshow_focus(){jQuery(".bwg_slideshow").each(function(){bwg=jQuery(this).attr("data-bwg"),jQuery("#bwg_slideshow_image_container_"+bwg).length&&(bwg_params[bwg]=JSON.parse(jQuery("#bwg_slideshow_image_container_"+bwg).attr("data-params")),bwg_params[bwg].event_stack=[],window.clearInterval(window["bwg_playInterval"+bwg]),jQuery(".bwg_ctrl_btn_"+bwg).hasClass("bwg-icon-play")||bwg_play(bwg_params[bwg].data,bwg))})}function bwg_slideshow_blur(){jQuery(".bwg_slideshow").each(function(){bwg=jQuery(this).attr("data-bwg"),jQuery("#bwg_slideshow_image_container_"+bwg).length&&(bwg_params[bwg]=JSON.parse(jQuery("#bwg_slideshow_image_container_"+bwg).attr("data-params")),bwg_params[bwg].event_stack=[],window.clearInterval(window["bwg_playInterval"+bwg]))})}function bwg_carousel_ready(){jQuery(".bwg-carousel").each(function(){var e=jQuery(this).data("bwg");bwg_params_carousel[e]=[],bwg_params_carousel[e].bwg_currentCenterNum=1,bwg_params_carousel[e].bwg_currentlyMoving=!1,bwg_params_carousel[e].data=[],jQuery("#spider_carousel_left-ico_"+e).on("click",function(){bwg_params_carousel[e].carousel.prev()}),jQuery("#spider_carousel_right-ico_"+e).on("click",function(){bwg_params_carousel[e].carousel.next()}),parseInt(bwg_params_carousel[e].carousel_enable_autoplay)&&(jQuery(".bwg_carousel_play_pause_"+e).attr("title",bwg_objectsL10n.pause),jQuery(".bwg_carousel_play_pause_"+e).attr("class","bwg-icon-pause bwg_ctrl_btn_"+e+" bwg_carousel_play_pause_"+e)),jQuery(".bwg_carousel_play_pause_"+e).on(bwg_click,function(){jQuery(".bwg_ctrl_btn_"+e).hasClass("bwg-icon-play")?(jQuery(".bwg_carousel_play_pause_"+e).attr("title",bwg_objectsL10n.pause),jQuery(".bwg_carousel_play_pause_"+e).attr("class","bwg-icon-pause bwg_ctrl_btn_"+e+" bwg_carousel_play_pause_"+e),bwg_params_carousel[e].carousel.start()):(jQuery(".bwg_carousel_play_pause_"+e).attr("title",bwg_objectsL10n.play),jQuery(".bwg_carousel_play_pause_"+e).attr("class","bwg-icon-play bwg_ctrl_btn_"+e+" bwg_carousel_play_pause_"+e),bwg_params_carousel[e].carousel.pause())}),void 0!==jQuery().swiperight&&jQuery.isFunction(jQuery().swiperight)&&jQuery("#bwg_container1_"+e).swiperight(function(){bwg_params_carousel[e].carousel.prev()}),void 0!==jQuery().swipeleft&&jQuery.isFunction(jQuery().swipeleft)&&jQuery("#bwg_container1_"+e).swipeleft(function(){bwg_params_carousel[e].carousel.next()})})}function bwg_carousel_resize(){jQuery(".bwg-carousel").each(function(){var e=jQuery(this).data("bwg");bwg_carousel_params(e),bwg_params_carousel[e].carousel.pause(),bwg_carousel_watermark(e),jQuery(".bwg_ctrl_btn_"+e).hasClass("bwg-icon-play")||bwg_params_carousel[e].carousel.start()})}function bwg_carousel_onload(){jQuery(".bwg-carousel").each(function(){var e=jQuery(this).data("bwg");bwg_params_carousel[e]=jQuery(this).data("params"),bwg_carousel_watermark(e),bwg_carousel_params(e),bwg_container_loaded(e)})}function bwg_carousel_params(t){var e=jQuery("#bwg_container1_"+t).parent().width(),a=1;e<bwg_params_carousel[t].carousel_r_width?a=e/bwg_params_carousel[t].carousel_r_width:e=bwg_params_carousel[t].carousel_r_width,bwg_params_carousel[t].carousel_image_column_number>bwg_params_carousel[t].count&&(bwg_params_carousel[t].carousel_image_column_number=bwg_params_carousel[t].count),jQuery(".bwg_carousel_play_pause_"+t).css({display:parseInt(bwg_params_carousel[t].carousel_play_pause_butt)?"":"none"}),parseInt(bwg_params_carousel[t].carousel_prev_next_butt)?(jQuery("#bwg_carousel-right"+t).css({display:""}),jQuery("#bwg_carousel-left"+t).css({display:""})):(jQuery("#bwg_carousel-left"+t).css({display:"none"}),jQuery("#bwg_carousel-right"+t).css({display:"none"})),jQuery(".inner_instagram_iframe_bwg_embed_frame_"+t).each(function(){var e=jQuery(this).parent();bwg_params_carousel[t].image_height/(parseInt(e.attr("data-height"))+96)<bwg_params_carousel[t].image_width/parseInt(e.attr("data-width"))?(e.height(bwg_params_carousel[t].image_height*a),e.width((e.height()-96)*e.attr("data-width")/e.attr("data-height")+16)):(e.width(bwg_params_carousel[t].image_width*a),e.height((e.width()-16)*e.attr("data-height")/e.attr("data-width")+96))}),jQuery(".bwg_carousel_image_container_"+t).css({width:bwg_params_carousel[t].image_width*a,height:bwg_params_carousel[t].image_height*a}),jQuery(".bwg_carousel_watermark_text_"+t+", .bwg_carousel_watermark_text_"+t+":hover").css({fontSize:e*(bwg_params_carousel[t].watermark_font_size/bwg_params_carousel[t].image_width)*a}),jQuery(".bwg_carousel-image "+t).css({width:bwg_params_carousel[t].image_width*a,height:bwg_params_carousel[t].image_height*a}),jQuery(".bwg_carousel_watermark_container_"+t).css({width:bwg_params_carousel[t].image_width*a,height:bwg_params_carousel[t].image_height*a}),jQuery(".bwg_carousel_embed_video_"+t).css({width:bwg_params_carousel[t].image_width*a,height:bwg_params_carousel[t].image_height*a}),jQuery(".bwg_carousel_watermark_spun_"+t).css({width:bwg_params_carousel[t].image_width*a,height:bwg_params_carousel[t].image_height*a}),jQuery(".bwg_carousel-container"+t).css({width:e,height:bwg_params_carousel[t].image_height*a}),jQuery(".bwg_video_hide"+t).css({width:bwg_params_carousel[t].image_width*a,height:bwg_params_carousel[t].image_height*a}),bwg_params_carousel[t].carousel=jQuery("#bwg_carousel"+t).featureCarousel({containerWidth:e*a,containerHeight:bwg_params_carousel[t].image_height*a,fit_containerWidth:bwg_params_carousel[t].carousel_fit_containerWidth,largeFeatureWidth:bwg_params_carousel[t].image_width*a,largeFeatureHeight:bwg_params_carousel[t].image_height*a,smallFeaturePar:bwg_params_carousel[t].carousel_image_par,currentlyMoving:!1,startingFeature:bwg_params_carousel[t].bwg_currentCenterNum,featuresArray:[],timeoutVar:null,rotationsRemaining:0,autoPlay:1e3*bwg_params_carousel[t].car_inter,interval:1e3*bwg_params_carousel[t].carousel_interval,imagecount:bwg_params_carousel[t].carousel_image_column_number,bwg_number:t,enable_image_title:bwg_params_carousel[t].enable_image_title,borderWidth:0})}function bwg_carousel_watermark(e){var t=1,a=jQuery("#bwg_container1_"+e).parent().width();if(a<bwg_params_carousel[e].carousel_r_width&&(t=a/bwg_params_carousel[e].carousel_r_width),a>=bwg_params_carousel[e].image_width)bwg_carousel_change_watermark_container(e),jQuery("#bwg_carousel_play_pause-ico_"+e).css({fontSize:bwg_params_carousel[e].carousel_play_pause_btn_size}),jQuery(".bwg_carousel_watermark_image_"+e).css({maxWidth:bwg_params_carousel[e].watermark_width*t,maxHeight:bwg_params_carousel[e].watermark_height*t}),jQuery(".bwg_carousel_watermark_text_"+e+", .bwg_carousel_watermark_text_"+e+":hover").css({fontSize:t*bwg_params_carousel[e].watermark_font_size});else{var i=bwg_params_carousel[e].image_width/t;bwg_carousel_change_watermark_container(e),jQuery("#bwg_carousel_play_pause-ico_"+e).css({fontSize:a*bwg_params_carousel[e].carousel_play_pause_btn_size/i}),jQuery(".bwg_carousel_watermark_image_"+e).css({maxWidth:a*bwg_params_carousel[e].watermark_width/i,maxHeight:a*bwg_params_carousel[e].watermark_height/i}),jQuery(".bwg_carousel_watermark_text_"+e+", .bwg_carousel_watermark_text_"+e+":hover").css({fontSize:a*bwg_params_carousel[e].watermark_font_size/i})}}function bwg_carousel_change_watermark_container(i){jQuery(".bwg_carousel"+i).children().each(function(){if(2==jQuery(this).css("zIndex")){var e=jQuery(this).find("img");e.length||(e=jQuery(this).find("iframe"));var t=e.width(),a=e.height();jQuery(".bwg_carousel_watermark_spun_"+i).width(t),jQuery(".bwg_carousel_watermark_spun_"+i).height(a),jQuery(".bwg_carousel_title_spun_"+i).width(t),jQuery(".bwg_carouel_title_spun_"+i).height(a),jQuery(".bwg_carousel_watermark_"+i).css({display:"none"})}})}function bwg_carousel_preload(e,t){var a=jQuery(".bwg_carousel_preload").get();t||a.reverse();var i=0;jQuery(a).each(function(){if(1<++i)return!1;jQuery(this).parent().hasClass("bwg_carousel_embed_video_"+e)||jQuery(this).parent().hasClass("bwg_embed_frame_"+e)||jQuery(this).parent().hasClass("bwg_carousel_video")?(jQuery(this).attr("src",jQuery(this).attr("data-src")),jQuery(this).on("load",function(){jQuery(this).removeClass("bwg_carousel_preload")}),jQuery(this).parent().hasClass("bwg_carousel_video")&&(jQuery(".bwg_carousel_video")[0].load(),jQuery(this).parent().parent().removeClass("bwg_carousel_preload")),jQuery(this).removeAttr("data-src")):(jQuery(this).css({"background-image":"url('"+jQuery(this).attr("data-background")+"')",height:"100%"}),jQuery(this).removeClass("bwg_carousel_preload"),jQuery(this).removeAttr("data-background"))})}function bwg_slideshow_ready(){jQuery(".bwg_slideshow").each(function(){var a=jQuery(this).data("bwg");if(jQuery("#bwg_slideshow_image_container_"+a).length){bwg_params[a]=JSON.parse(jQuery("#bwg_slideshow_image_container_"+a).attr("data-params")),bwg_params[a].event_stack=[],bwg_container_loaded(a);var e=bwg_params[a].data;void 0!==jQuery().swiperight&&jQuery.isFunction(jQuery().swiperight)&&jQuery("#bwg_container1_"+a).swiperight(function(){return bwg_change_image(parseInt(jQuery("#bwg_current_image_key_"+a).val()),0<=parseInt(jQuery("#bwg_current_image_key_"+a).val())-bwg_iterator(a)?(parseInt(jQuery("#bwg_current_image_key_"+a).val())-bwg_iterator(a))%e.length:e.length-1,e,"",a),!1}),void 0!==jQuery().swipeleft&&jQuery.isFunction(jQuery().swipeleft)&&jQuery("#bwg_container1_"+a).swipeleft(function(){return bwg_change_image(parseInt(jQuery("#bwg_current_image_key_"+a).val()),parseInt(jQuery("#bwg_current_image_key_"+a).val())+bwg_iterator(a)%e.length,e,"",a),!1});var t=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase())?"touchend":"click";bwg_popup_resize(a),jQuery(".bwg_slideshow_watermark_"+a).css({display:"none"}),jQuery(".bwg_slideshow_title_text_"+a).css({display:"none"}),jQuery(".bwg_slideshow_description_text_"+a).css({display:"none"}),setTimeout(function(){bwg_change_watermark_container(a)},500),"horizontal"==bwg_params[a].filmstrip_direction?jQuery(".bwg_slideshow_image_container_"+a).height(jQuery(".bwg_slideshow_image_wrap_"+a).height()-bwg_params[a].slideshow_filmstrip_height):jQuery(".bwg_slideshow_image_container_"+a).width(jQuery(".bwg_slideshow_image_wrap_"+a).width()-bwg_params[a].slideshow_filmstrip_width);var i=/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel";jQuery(".bwg_slideshow_filmstrip_"+a).bind(i,function(e){var t=window.event||e;return 0<((t=t.originalEvent?t.originalEvent:t).detail?-40*t.detail:t.wheelDelta)?jQuery(".bwg_slideshow_filmstrip_left_"+a).trigger("click"):jQuery(".bwg_slideshow_filmstrip_right_"+a).trigger("click"),!1}),jQuery(".bwg_slideshow_filmstrip_right_"+a).on(t,function(){jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).stop(!0,!1),"left"==bwg_params[a].left_or_top?"width"==bwg_params[a].width_or_height?(jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).position().left>=-(jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).width()-jQuery(".bwg_slideshow_filmstrip_"+a).width())&&(jQuery(".bwg_slideshow_filmstrip_left_"+a).css({opacity:1,filter:"Alpha(opacity=100)"}),jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).position().left<-(jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).width()-jQuery(".bwg_slideshow_filmstrip_"+a).width()-(bwg_params[a].filmstrip_thumb_margin_hor+bwg_params[a].slideshow_filmstrip_width))?jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).animate({left:-(jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).width()-jQuery(".bwg_slideshow_filmstrip_"+a).width())},500,"linear"):jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).animate({left:jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).position().left-(bwg_params[a].filmstrip_thumb_margin_hor+bwg_params[a].slideshow_filmstrip_width)},500,"linear")),window.setTimeout(function(){jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).position().left==-(jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).width()-jQuery(".bwg_slideshow_filmstrip_"+a).width())&&jQuery(".bwg_slideshow_filmstrip_right_"+a).css({opacity:.3,filter:"Alpha(opacity=30)"})},500)):(jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).position().left>=-(jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).height()-jQuery(".bwg_slideshow_filmstrip_"+a).height())&&(jQuery(".bwg_slideshow_filmstrip_left_"+a).css({opacity:1,filter:"Alpha(opacity=100)"}),jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).position().left<-(jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).height()-jQuery(".bwg_slideshow_filmstrip_"+a).height()-(bwg_params[a].filmstrip_thumb_margin_hor+bwg_params[a].slideshow_filmstrip_width))?jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).animate({left:-(jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).height()-jQuery(".bwg_slideshow_filmstrip_"+a).width())},500,"linear"):jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).animate({left:jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).position().left-(bwg_params[a].filmstrip_thumb_margin_hor+bwg_params[a].slideshow_filmstrip_width)},500,"linear")),window.setTimeout(function(){jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).position().left==-(jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).height()-jQuery(".bwg_slideshow_filmstrip_"+a).height())&&jQuery(".bwg_slideshow_filmstrip_right_"+a).css({opacity:.3,filter:"Alpha(opacity=30)"})},500)):"width"==bwg_params[a].width_or_height?(jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).position().top>=-(jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).width()-jQuery(".bwg_slideshow_filmstrip_"+a).width())&&(jQuery(".bwg_slideshow_filmstrip_left_"+a).css({opacity:1,filter:"Alpha(opacity=100)"}),jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).position().top<-(jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).width()-jQuery(".bwg_slideshow_filmstrip_"+a).width()-bwg_params[a].filmstrip_thumb_margin_hor+bwg_params[a].slideshow_filmstrip_width)?jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).animate({top:-(jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).width()-jQuery(".bwg_slideshow_filmstrip_"+a).width())},500,"linear"):jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).animate({top:jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).position().top-bwg_params[a].filmstrip_thumb_margin_hor+bwg_params[a].slideshow_filmstrip_width},500,"linear")),window.setTimeout(function(){jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).position().top==-(jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).width()-jQuery(".bwg_slideshow_filmstrip_"+a).width())&&jQuery(".bwg_slideshow_filmstrip_right_"+a).css({opacity:.3,filter:"Alpha(opacity=30)"})},500)):(jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).position().top>=-(jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).height()-jQuery(".bwg_slideshow_filmstrip_"+a).height())&&(jQuery(".bwg_slideshow_filmstrip_left_"+a).css({opacity:1,filter:"Alpha(opacity=100)"}),jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).position().top<-(jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).height()-jQuery(".bwg_slideshow_filmstrip_"+a).height()-(bwg_params[a].filmstrip_thumb_margin_hor+bwg_params[a].slideshow_filmstrip_width))?jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).animate({top:-(jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).height()-jQuery(".bwg_slideshow_filmstrip_"+a).width())},500,"linear"):jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).animate({top:jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).position().top-(bwg_params[a].filmstrip_thumb_margin_hor+bwg_params[a].slideshow_filmstrip_width)},500,"linear")),window.setTimeout(function(){jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).position().top==-(jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).height()-jQuery(".bwg_slideshow_filmstrip_"+a).height())&&jQuery(".bwg_slideshow_filmstrip_right_"+a).css({opacity:.3,filter:"Alpha(opacity=30)"})},500))}),jQuery(".bwg_slideshow_filmstrip_left_"+a).on(t,function(){jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).stop(!0,!1),"left"==bwg_params[a].left_or_top?(jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).position().left<0&&(jQuery(".bwg_slideshow_filmstrip_right_"+a).css({opacity:1,filter:"Alpha(opacity=100)"}),jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).position().left>-(bwg_params[a].filmstrip_thumb_margin_hor+bwg_params[a].slideshow_filmstrip_width)?jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).animate({left:0},500,"linear"):jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).animate({left:jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).position().left+bwg_params[a].filmstrip_thumb_margin_hor+bwg_params[a].slideshow_filmstrip_width},500,"linear")),window.setTimeout(function(){0==jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).position().left&&jQuery(".bwg_slideshow_filmstrip_left_"+a).css({opacity:.3,filter:"Alpha(opacity=30)"})},500)):(jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).position().top<0&&(jQuery(".bwg_slideshow_filmstrip_right_"+a).css({opacity:1,filter:"Alpha(opacity=100)"}),jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).position().top>-(bwg_params[a].filmstrip_thumb_margin_hor+bwg_params[a].slideshow_filmstrip_width)?jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).animate({top:0},500,"linear"):jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).animate({top:jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).position().top+bwg_params[a].filmstrip_thumb_margin_hor+bwg_params[a].slideshow_filmstrip_width},500,"linear")),window.setTimeout(function(){0==jQuery(".bwg_slideshow_filmstrip_thumbnails_"+a).position().top&&jQuery(".bwg_slideshow_filmstrip_left_"+a).css({opacity:.3,filter:"Alpha(opacity=30)"})},500))}),"width"==bwg_params[a].width_or_height?bwg_set_filmstrip_pos(jQuery(".bwg_slideshow_filmstrip_"+a).width(),a):bwg_set_filmstrip_pos(jQuery(".bwg_slideshow_filmstrip_"+a).height(),a),jQuery("#bwg_slideshow_play_pause_"+a).off(t).on(t,function(){jQuery(".bwg_ctrl_btn_"+a).hasClass("bwg-icon-play")?(bwg_play(bwg_params[a].data,a),jQuery(".bwg_slideshow_play_pause_"+a).attr("title",bwg_objectsL10n.pause),jQuery(".bwg_slideshow_play_pause_"+a).attr("class","bwg-icon-pause bwg_ctrl_btn_"+a+" bwg_slideshow_play_pause_"+a),1==bwg_params[a].enable_slideshow_music&&document.getElementById("bwg_audio_"+a).play()):(window.clearInterval(window["bwg_playInterval"+a]),jQuery(".bwg_slideshow_play_pause_"+a).attr("title","Play"),jQuery(".bwg_slideshow_play_pause_"+a).attr("class","bwg-icon-play bwg_ctrl_btn_"+a+" bwg_slideshow_play_pause_"+a),1==bwg_params[a].enable_slideshow_music&&document.getElementById("bwg_audio_"+a).pause())}),0!=bwg_params[a].enable_slideshow_autoplay&&(bwg_play(bwg_params[a].data,a),jQuery(".bwg_slideshow_play_pause_"+a).attr("title",bwg_objectsL10n.pause),jQuery(".bwg_slideshow_play_pause_"+a).attr("class","bwg-icon-pause bwg_ctrl_btn_"+a+" bwg_slideshow_play_pause_"+a),1==bwg_params[a].enable_slideshow_music&&jQuery("#bwg_audio_"+a).length&&document.getElementById("bwg_audio_"+a).play()),bwg_params[a].preload_images&&bwg_preload_images(parseInt(jQuery("#bwg_current_image_key_".$bwg).val()),a),jQuery(".bwg_slideshow_image_"+a).removeAttr("width"),jQuery(".bwg_slideshow_image_"+a).removeAttr("height")}})}function bwg_image_browser_resize(){jQuery(".bwg_image_browser").each(function(){var e=jQuery(this).attr("data-bwg");jQuery(".image_browser_images_conteiner_"+e).length&&(bwg_params_ib[e]=JSON.parse(jQuery("#bwg_container1_"+e+" .image_browser_images_conteiner_"+e).attr("data-params")),bwg_image_browser(e))})}function bwg_image_browser_ready(){jQuery(".bwg_image_browser").each(function(){var e=jQuery(this).attr("data-bwg");bwg_container_loaded(e),jQuery(".image_browser_images_conteiner_"+e).length&&(bwg_params_ib[e]=JSON.parse(jQuery(".image_browser_images_conteiner_"+e).attr("data-params")),setTimeout(function(){bwg_image_browser(e)},3))})}function bwg_search_focus(e){jQuery(e).parent().find(".bwg_search_input").focus(),jQuery(e).hide()}function bwg_key_press(e){jQuery(e).parent().find(".bwg_search_reset_container").removeClass("hidden"),jQuery(e).parent().find(".bwg_search_loupe_container1").removeClass("hidden")}function bwg_all_thumnails_loaded(t){var a=0,i=jQuery(t).find("img").length;return 0==i?bwg_all_thumbnails_loaded_callback(t):jQuery(t).find("img").each(function(){var e=jQuery(this).attr("src");jQuery("<img/>").attr("src",e).on("load error",function(){++a>=i&&bwg_all_thumbnails_loaded_callback(t)})}),0==i}function bwg_all_thumbnails_loaded_callback(e){jQuery(e).hasClass("bwg-thumbnails")&&bwg_thumbnail(e),jQuery(e).hasClass("bwg-masonry-thumbnails")&&bwg_thumbnail_masonry(e),jQuery(e).hasClass("bwg-album-extended")&&bwg_album_extended(e)}function bwg_container_loaded(e){jQuery("#gal_front_form_"+e).removeClass("bwg-hidden"),jQuery("#ajax_loading_"+e).addClass("bwg-hidden")}function bwg_album_thumbnail(e){bwg_container_loaded(jQuery(e).data("bwg"))}function bwg_album_extended(e){var t=jQuery(e).width(),a=jQuery(e).data("thumbnail-width"),i=jQuery(e).data("spacing"),r=jQuery(e).data("max-count"),o=parseInt(t/(2*a));o<1&&(o=1),r<o&&(o=r);var _=100/o,s=jQuery(e).find(".bwg-extended-item"),n=parseInt(s.css("margin-left")),l=parseInt(s.css("margin-right"));s.css({width:"calc("+_+"% - "+(n+l)+"px)"}),s.width()<a?s.find(".bwg-extended-item0, .bwg-extended-item1").css({width:"calc(100% - "+i+"px)"}):s.width()>2*a?(s.find(".bwg-extended-item0").css({width:"calc(50% - "+i+"px)"}),s.find(".bwg-extended-item1").css({width:"calc(100% - "+(a+2*i)+"px)"})):s.find(".bwg-extended-item0, .bwg-extended-item1").css({width:"calc(50% - "+i+"px)"}),jQuery(e).children(".bwg-extended-item").each(function(){var e=jQuery(this).find("img"),t=jQuery(this).find(".bwg-item0"),a=jQuery(this).find(".bwg-item2");a.width()/a.height()>e.width()/e.height()?a.width()>e.width()?e.css({width:"100%"}):e.css({maxWidth:"100%"}):a.height()>e.height()?e.css({height:"100%"}):e.css({maxHeight:"100%"}),jQuery(this).find(".bwg-item2").css({marginLeft:(t.width()-e.width())/2,marginTop:(t.height()-e.height())/2})}),bwg_container_loaded(jQuery(e).data("bwg"))}function bwg_thumbnail(e){var t=jQuery(e).width(),a=jQuery(e).data("thumbnail-width"),i=jQuery(e).data("max-count"),r=parseInt(t/a)+1;i<r&&(r=i);var o=100/r;jQuery(e).find(".bwg-item").css({width:o+"%"}),jQuery(e).children(".bwg-item").each(function(){var e=jQuery(this).find("img"),t=jQuery(this).find(".bwg-item2");t.width()/t.height()>e.width()/e.height()?t.width()>e.width()?e.css({width:"100%"}):e.css({maxWidth:"100%"}):t.height()>e.height()?e.css({height:"100%"}):e.css({maxHeight:"100%"}),jQuery(this).find(".bwg-item2").css({marginLeft:(t.width()-e.width())/2,marginTop:(t.height()-e.height())/2})}),bwg_container_loaded(jQuery(e).data("bwg"))}function bwg_thumbnail_masonry(e){var t=jQuery(e);if(t.find(".bwg-empty-item").remove(),"horizontal"==t.data("masonry-type")){var a=t.data("thumbnail-height"),r=t.data("max-count"),o=[];for(i=0;i<r;i++)o.push(0);t.find(".bwg-item").each(function(){var e=o.indexOf(Math.min.apply(Math,o));jQuery(this).css({height:a,order:e+1}),o[e]+=jQuery(this)[0].getBoundingClientRect().width});var _=Math.max.apply(Math,o);for(t.width(_),i=0;i<r;i++)o[i]<_&&t.append(jQuery('<div class="bwg-item bwg-empty-item"></div>').css({height:a,order:i+1,width:_-o[i]}))}else{t.removeAttr("style");_=t.width();var s=t.data("thumbnail-width"),n=(r=t.data("max-count"),parseInt(_/s)+("0"==t.data("resizable-thumbnails")?0:1));r<n&&(n=r);var l=t.find(".bwg-item").length;l<n&&(n=l);var g=100/n,u=[];for(i=0;i<n;i++)u.push(0);t.find(".bwg-item").each(function(){var e=u.indexOf(Math.min.apply(Math,u));jQuery(this).css({width:g+"%",order:e+1}),u[e]+=jQuery(this)[0].getBoundingClientRect().height});var c=Math.max.apply(Math,u);for(i=0;i<n;i++)u[i]<c&&t.append(jQuery('<div class="bwg-item bwg-empty-item"></div>').css({width:g+"%",order:i+1,height:c-u[i]}));t.outerWidth(n*s),t.height(c)}bwg_container_loaded(t.data("bwg"))}function bwg_thumbnail_mosaic(e){var t=jQuery(e),r=t.attr("data-bwg"),a=t.attr("data-block-id"),i=parseInt(t.attr("data-thumb-padding"))/2,o=parseInt(t.attr("data-thumb-border"))+i;if("horizontal"==t.attr("data-mosaic-direction")){var _=parseInt(t.attr("data-height"));if("1"==t.attr("data-resizable"))if(1920<=jQuery(window).width())var s=(1+jQuery(window).width()/1920)*_;else if(jQuery(window).width()<=640)s=jQuery(window).width()/640*_;else s=_;else s=_;(y=jQuery(".bwg_mosaic_thumb_"+r)).each(function(e){var t=y.get(e).naturalWidth,a=y.get(e).naturalHeight;t=t*s/a,y.eq(e).height(s),y.eq(e).width(t)});var n=jQuery("#bwg_mosaic_thumbnails_div_"+r).width()/100*parseInt(t.attr("data-total-width"));jQuery("#"+a).width(n);var l=s+2*o,g=0,u=[];u[0]=0;var c=[],d=c[0]=0;y.each(function(e){row_cum_width2=d+y.eq(e).width()+2*o,row_cum_width2-n<0?(d=row_cum_width2,u[e]=g,c[g]++):e!==y.length-1?Math.abs(d-n)>Math.abs(row_cum_width2-n)||Math.abs(d-n)<=Math.abs(row_cum_width2-n)&&0==c[g]?e!==y.length-2?(d=row_cum_width2,u[e]=g,c[g]++,c[++g]=0,d=0):(d=row_cum_width2,u[e]=g,c[g]++):(c[++g]=1,u[e]=g,d=row_cum_width2-d):(d=row_cum_width2,u[e]=g,c[g]++)});for(var h=[],b=[],p=0;p<=g;p++)h[p]=1,b[p]=l;for(p=0;p<=g;p++)d=0,y.each(function(e){u[e]==p&&(d+=y.eq(e).width())}),h[p]=k=(n-2*c[p]*o)/d,b[p]=(l-2*o)*h[p]+2*o;(M=[])[0]=0;var m=[],w=[];m[0]=0,w[0]=0;for(p=1;p<=g;p++)m[p]=m[0],w[p]=w[p-1]+b[p-1];y.each(function(e){var t=y.eq(e).width(),a=y.eq(e).height();y.eq(e).width(t*h[u[e]]),y.eq(e).height(a*h[u[e]]),y.eq(e).parent().css({top:w[u[e]],left:m[u[e]]}),m[u[e]]+=t*h[u[e]]+2*o,M[u[e]]=e}),jQuery("#"+a).height(w[g]+b[g]-w[0])}else{var y,f=parseInt(t.attr("data-width"));if("1"==t.attr("data-resizable"))if(1920<=jQuery(window).width())var j=(1+jQuery(window).width()/1920)*f;else if(jQuery(window).width()<=640)j=jQuery(window).width()/640*f;else j=f;else j=f;(y=jQuery(".bwg_mosaic_thumb_"+r)).each(function(e){var t=y.get(e).naturalWidth,a=y.get(e).naturalHeight;y.eq(e).height(a*j/t),y.eq(e).width(j)});n=jQuery("#bwg_mosaic_thumbnails_div_"+r).width()/100*parseInt(t.attr("data-total-width"));jQuery("#"+a).width(n);var Q=j+2*o<n?j:n-2*o,v=Math.floor(n/(Q+2*o)),x=[];x[0]=0;for(var C=[],S=[],k=0;k<v;k++)S[k]=0,C[k]=0;y.each(function(e){for(var t=0,a=S[0],i=0;i<v;i++)a>S[i]&&(a=S[i],t=i);x[e]=t,C[t]++,F=a,D=0+t*(Q+2*o),y.eq(e).parent().css({top:F,left:D}),S[t]+=y.eq(e).height()+2*o}),(h=[])[0]=1;var E=0,I=[],z=0,T=0;for(k=0;k<v;k++)E+=Q,I[k]=0,y.each(function(e){x[e]==k&&(I[k]+=y.eq(e).height())}),0!=I[k]&&(z+=Q/I[k],T+=Q*C[k]*2*o/I[k]);var O=0;0!=z&&(O=(E+T)/z);for(k=0;k<v;k++)0!=I[k]&&(h[k]=(O-2*C[k]*o)/I[k]);var M,D=[];D[0]=0;for(k=1;k<=v;k++)D[k]=D[k-1]+Q*h[k-1]+2*o;var F=[];for(k=0;k<v;k++)F[k]=0;(M=[])[0]=0,y.each(function(e){var t=y.eq(e).width(),a=y.eq(e).height();y.eq(e).width(t*h[x[e]]),y.eq(e).height(a*h[x[e]]),y.eq(e).parent().css({top:F[x[e]],left:D[x[e]]}),F[x[e]]+=a*h[x[e]]+2*o,M[x[e]]=e}),jQuery("#"+a).width(D[v]).height(F[0])}jQuery(".bwg_mosaic_thumbnails_"+r).css({visibility:"visible"}),jQuery(".tablenav-pages_"+r).css({visibility:"visible"}),bwg_container_loaded(r),jQuery(".bwg_mosaic_thumb_"+r).removeClass("bwg-hidden"),jQuery("#bwg_mosaic_thumbnails_div_"+r).removeClass("bwg-hidden"),"hover"==t.attr("data-image-title")&&bwg_mosaic_title_on_hover(r,t,o),"hover"==t.attr("data-ecommerce-icon")&&(jQuery(".bwg_mosaic_thumb_spun_"+r).on("mouseenter",function(){var e=jQuery(this).parents(".bwg-mosaic-thumb-span").children(".bwg_mosaic_thumb_"+r).width(),t=jQuery(this).parents(".bwg-mosaic-thumb-span").children(".bwg_mosaic_thumb_"+r).height();jQuery(this).children(".bwg_ecommerce_spun1_"+r).width(e);var a=jQuery(this).children(".bwg_ecommerce_spun1_"+r).width(),i=jQuery(this).children(".bwg_ecommerce_spun1_"+r).height();jQuery(this).children(".bwg_ecommerce_spun1_"+r).css({top:o+.5*t-.5*i,left:o+.5*e-.5*a,opacity:1,filter:"Alpha(opacity=100)"})}),jQuery(".bwg_mosaic_thumb_spun_"+r).on("mouseleave",function(){jQuery(this).children(".bwg_ecommerce_spun1_"+r).css({top:0,left:-1e4,opacity:0,filter:"Alpha(opacity=0)",padding:t.attr("data-title-margin")})}))}function bwg_mosaic_title_on_hover(r,e,o){jQuery(".bwg-mosaic-thumb-span").on("mouseenter",function(){var e=jQuery(this).children(".bwg_mosaic_thumb_"+r).width(),t=jQuery(this).children(".bwg_mosaic_thumb_"+r).height();jQuery(this).find(".bwg_mosaic_title_spun1_"+r).width(e);var a=jQuery(this).find(".bwg_mosaic_title_spun1_"+r).width(),i=jQuery(this).find(".bwg_mosaic_title_spun1_"+r).height();jQuery(this).find(".bwg_mosaic_title_spun1_"+r).css({top:o+.5*t-.5*i<0?o:o+.5*t-.5*i,left:o+.5*e-.5*a,opacity:1,filter:"Alpha(opacity=100)","max-height":"calc(100% - "+2*o+"px)",overflow:"hidden"})}),jQuery(".bwg-mosaic-thumb-span").on("mouseleave",function(){jQuery(this).find(".bwg_mosaic_title_spun1_"+r).css({top:0,left:-1e4,opacity:0,filter:"Alpha(opacity=0)",padding:e.attr("data-title-margin"),"max-height":"calc(100% - "+2*o+"px)",overflow:"hidden"})})}function bwg_mosaic_ajax(e,t){var a=0;jQuery(".bwg_mosaic_thumb_spun_"+e+" img").on("load",function(){++a>=t&&bwg_thumbnail_mosaic(jQuery(".bwg-mosaic-thumbnails[data-bwg="+e+"]"))}),jQuery(".bwg_mosaic_thumb_spun_"+e+" img").on("error",function(){jQuery(this).height(100),jQuery(this).width(100),++a>=t&&bwg_thumbnail_mosaic(jQuery(".bwg-mosaic-thumbnails[data-bwg="+e+"]"))})}function bwg_add_album(){var t=!1;jQuery(".bwg-album").off("click").on("click",function(){if(!t){var e=jQuery(this).attr("data-bwg");return t=!0,setTimeout(function(){t=!1},100),bwg_ajax("gal_front_form_"+e,e,jQuery(this).attr("data-container_id"),jQuery(this).attr("data-alb_gal_id"),jQuery(this).attr("data-album_gallery_id"),jQuery(this).attr("data-def_type"),"",jQuery(this).attr("data-title")),!1}}),jQuery(".bwg_description_more").on("click",function(){jQuery(this).hasClass("bwg_more")?(jQuery(this).parent().find(".bwg_description_full").show(),jQuery(this).addClass("bwg_hide").removeClass("bwg_more"),jQuery(this).html(jQuery(this).data("hide-msg"))):(jQuery(this).parent().find(".bwg_description_full").hide(),jQuery(this).addClass("bwg_more").removeClass("bwg_hide"),jQuery(this).html(jQuery(this).data("more-msg")))})}function bwg_add_lightbox(){var a=!1;jQuery(".bwg_lightbox .bwg-item0, .bwg_lightbox .bwg_slide, .bwg_lightbox .bwg-carousel-image").on("click",function(e){e.stopPropagation(),e.preventDefault();var t=jQuery(this).parent();if(!a)return a=!0,setTimeout(function(){a=!1},100),bwg_gallery_box(jQuery(t).attr("data-image-id"),jQuery(t).closest(".bwg_container")),!1}),jQuery(".bwg_lightbox .bwg_ecommerce").on("click",function(e){if(e.stopPropagation(),!a)return a=!0,setTimeout(function(){a=!1},100),bwg_gallery_box(jQuery(this).closest(".bwg_lightbox").attr("data-image-id"),jQuery(this).closest(".bwg_container"),!0),!1})}function bwg_filter_by_tag(e){var t="",a=jQuery(e).parent().parent(),i=a.find(".current_view").val(),r=a.find(".form_id").val(),o=a.find(".cur_gal_id").val(),_=a.find(".album_gallery_id").val(),s=a.find(".type").val();jQuery(e).parent().find(".opt.selected").each(function(){t=t+jQuery(e).text()+","}),""==(t=t.slice(0,-1))&&(t=bwg_objectsL10n.bwg_select_tag),jQuery(e).parent().find(".CaptionCont").attr("title",t),jQuery(e).parent().find(".CaptionCont .placeholder").html(t),jQuery("#bwg_tag_id_"+i).val(jQuery("#bwg_tag_id_"+o).val()),bwg_select_tag(i,r,o,_,s,!1)}function bwg_document_ready(){bwg_add_lightbox(),jQuery('div[id^="bwg_container1_"]').each(function(){var e=jQuery(this);e.data("right-click-protection")&&bwg_disable_right_click(e),jQuery(".SumoSelect > .CaptionCont > label > i").addClass("bwg-icon-angle-down closed");var t=e.find(".search_tags");t.length&&(t.SumoSelect({triggerChangeCombined:!0,placeholder:bwg_objectsL10n.bwg_select_tag,search:!0,searchText:bwg_objectsL10n.bwg_search,forceCustomRendering:!0,noMatch:bwg_objectsL10n.bwg_tag_no_match,captionFormatAllSelected:bwg_objectsL10n.bwg_all_tags_selected,captionFormat:"{0} "+bwg_objectsL10n.bwg_tags_selected,okCancelInMulti:!0,locale:[bwg_objectsL10n.ok,bwg_objectsL10n.cancel,bwg_objectsL10n.select_all]}),t.off("change").on("change",function(){bwg_filter_by_tag(this)}));var a=e.find(".bwg_order");a.length&&a.SumoSelect({triggerChangeCombined:!0,forceCustomRendering:!0}),""==jQuery(this).find(".bwg_search_input").val()?jQuery(this).find("search_placeholder_title").show():jQuery(this).find("search_placeholder_title").hide(),jQuery(".bwg_thumbnail .bwg_search_container_2").focusout(function(e){""==jQuery(this).find(".bwg_search_input").val()&&(jQuery(this).find(".search_placeholder_title").show(),jQuery(this).find(".bwg_search_loupe_container1").addClass("hidden"),jQuery(this).find(".bwg_search_reset_container").addClass("hidden"))})}),jQuery(".search_tags").on("sumo:opened",function(){0==jQuery(this).parent().find("ul li").length&&(jQuery(".no-match").html(bwg_objectsL10n.bwg_tag_no_match),jQuery(".no-match").show())}),jQuery(".bwg_thumbnail .SumoSelect").on("sumo:closed",function(){jQuery(this).find("label i").removeClass("bwg-icon-angle-up opened"),jQuery(this).find("label i").addClass("bwg-icon-angle-down closed")}),jQuery(".bwg_thumbnail .SumoSelect").on("sumo:opened",function(){jQuery(this).find("label i").removeClass("bwg-icon-angle-down closed"),jQuery(this).find("label i").addClass("bwg-icon-angle-up opened")}),bwg_add_album();var e=window.location.hash.substring(1);if(e&&"-1"!=e.indexOf("bwg")){bwg_hash_array=e.replace("bwg","").split("/");var t=jQuery(".bwg_container");t&&bwg_gallery_box(bwg_hash_array[1],t,!1,bwg_hash_array[0])}bwg_blog_style_ready(),bwg_image_browser_ready(),bwg_resize_search_line()}function bwg_clear_search_input(e){jQuery("#bwg_search_input_"+e).val(""),jQuery("#bwg_search_container_1_"+e+" .bwg_search_loupe_container1").addClass("hidden"),jQuery("#bwg_search_container_1_"+e+" .bwg_search_reset_container").addClass("hidden")}function bwg_check_search_input_enter(e,t){return 13!=(t.which||t.keyCode)||(jQuery(e).closest(".bwg_search_container_1").find(".bwg_search").trigger("click"),!1)}function bwg_ajax(t,a,i,e,r,o,_,s,n,l,g){jQuery("#ajax_loading_"+a).removeClass("bwg-hidden"),"function"==typeof bwg_scroll_load_action&&jQuery(window).off("scroll",bwg_scroll_load_action),jQuery(".bwg_thumbnail .search_tags").off("sumo:closed");var u=jQuery("#"+t).data("ajax-url"),c=0;if(void 0===l)l=!1;var d=jQuery("#page_number_"+a).val(),h={},b=jQuery("#bwg_album_breadcrumb_"+a).val();if(b&&!0!==l){var p=JSON.parse(b);if("back"==e){p.splice(-1,1);var m=p.slice(-1)[0];e=m.id,d=m.page,h["action_"+a]="back"}else"numeric"===l||_?(p.splice(-1,1),p.push({id:e,page:d})):(p.push({id:e,page:1}),d=1);h["bwg_album_breadcrumb_"+a]=JSON.stringify(p)}if(h.gallery_type=jQuery("#"+t).data("gallery-type"),h.gallery_id=jQuery("#"+t).data("gallery-id"),h.tag=jQuery("#"+t).data("tag"),h.album_id=jQuery("#"+t).data("album-id"),h.theme_id=jQuery("#"+t).data("theme-id"),h.shortcode_id=jQuery("#"+t).data("shortcode-id"),h.bwg=a,_&&(d=1),void 0===s||""==s)s="";if(void 0===g||""==g)g="";if(void 0===n||""==n)n=jQuery(".bwg_order_"+a).val();return h["page_number_"+a]=d,h["bwg_load_more_"+a]=jQuery("#bwg_load_more_"+a).val(),h["album_gallery_id_"+a]=e,h["type_"+a]=o,h["title_"+a]=s,h["description_"+a]=g,h["sortImagesByValue_"+a]=n,0<jQuery("#bwg_search_input_"+a).length&&(h["bwg_search_"+a]=jQuery("#bwg_search_input_"+a).val()),h["bwg_tag_id_"+i]=jQuery("#bwg_tag_id_"+i).val(),jQuery("#gal_front_form_"+a).addClass("bwg-hidden"),jQuery("#ajax_loading_"+a).removeClass("bwg-hidden"),jQuery.ajax({type:"POST",url:u,data:h,success:function(e){jQuery(e).find(".bwg_masonry_thumb_spun_"+a+" img").length,c=jQuery(e).find(".bwg_mosaic_thumb_spun_"+a+" img").length,!0===l?(i=="bwg_thumbnails_mosaic_"+a?jQuery("#"+i).append(jQuery(e).closest(".bwg-container-"+a).find("#"+i).html()):i=="bwg_album_compact_"+a?jQuery("#"+i).append(jQuery(e).closest(".bwg-album-thumbnails").html()):jQuery("#"+i).append(jQuery(e).closest(".bwg-container-"+a).html()),jQuery(".bwg_nav_cont_"+a).html(jQuery(e).closest(".bwg_nav_cont_"+a).html())):jQuery("#bwg_container3_"+a).html(e)},complete:function(){jQuery("div[id^='bwg_container1_'] img").each(function(){null!=jQuery(this).attr("data-lazy-src")&&""!=jQuery(this).attr("data-lazy-src")?jQuery(this).attr("src",jQuery(this).attr("data-lazy-src")):null!=jQuery(this).attr("data-src")&&""!=jQuery(this).attr("data-src")&&jQuery(this).attr("src",jQuery(this).attr("data-src"))}),jQuery(".blog_style_image_buttons_conteiner_"+a).find(jQuery(".bwg_blog_style_img_"+a)).on("load",function(){jQuery(".bwg_blog_style_img_"+a).closest(jQuery(".blog_style_image_buttons_conteiner_"+a)).show()}),jQuery("#bwg_tags_id_"+i).val(jQuery("#bwg_tag_id_"+i).val()),jQuery(".pagination-links_"+a).length&&jQuery("html, body").animate({scrollTop:jQuery("#"+t).offset().top-150},500),bwg_document_ready(),bwg_mosaic_ajax(a,c),bwg_all_thumnails_loaded(".bwg-container-"+a)&&bwg_container_loaded(a),jQuery(".blog_style_images_conteiner_"+a+" .bwg_embed_frame_16x9_"+a).each(function(e){jQuery(this).width(jQuery(this).parent().width()),jQuery(this).height(.5625*jQuery(this).width())}),jQuery(".blog_style_images_conteiner_"+a+" .bwg_embed_frame_instapost_"+a).each(function(e){jQuery(this).width(jQuery(this).parent().width()),jQuery(this).height((jQuery(this).width()-16)*jQuery(this).attr("data-height")/jQuery(this).attr("data-width")+96)}),jQuery("#bwg_embed_frame_16x9_"+a).width(jQuery("#bwg_embed_frame_16x9_"+a).parent().width()),jQuery("#bwg_embed_frame_16x9_"+a).height(.5625*jQuery("#bwg_embed_frame_16x9_"+a).width()),jQuery("#bwg_embed_frame_instapost_"+a).width(jQuery("#bwg_embed_frame_16x9_"+a).parent().width()),jQuery(".bwg_embed_frame_instapost_"+a).height((jQuery(".bwg_embed_frame_instapost_"+a).width()-16)*jQuery(".bwg_embed_frame_instapost_"+a).attr("data-height")/jQuery(".bwg_embed_frame_instapost_"+a).attr("data-width")+96),jQuery("#bwg_search_input_"+a).val(h["bwg_search_"+a]),""!=jQuery("#bwg_search_input_"+a).val()?(jQuery("#bwg_search_input_"+a).parent().find(".search_placeholder_title").hide(),jQuery("#bwg_search_input_"+a).parent().parent().find(".bwg_search_reset_container").show(),jQuery("#bwg_search_input_"+a).parent().parent().find(".bwg_search_loupe_container1").show()):jQuery("#bwg_search_input_"+a).parent().find(".search_placeholder_title").show();var e=jQuery("#bwg_container2_"+a+" .cur_gal_id").val();jQuery("#bwg_tag_id_"+a).val(jQuery("#bwg_tag_id_"+e).val())}}),!1}function bwg_select_tag(e,t,a,i,r,o){o&&jQuery("#bwg_tag_id_"+a).val(""),bwg_ajax(t,e,a,i,"",r,1,"")}function bwg_cube(e,t,a,i,r,o,_,s,n,l,g){var u,c=!1,d="";if(void 0!==g&&""!==g){c=!0,bwg_params[g].bwg_trans_in_progress=!0,d="_"+g,u=bwg_params[g].bwg_transition_duration;bwg_params[g].event_stack}else u=bwg_transition_duration;if(!bwg_testBrowser_cssTransitions(g))return bwg_fallback(s,n,l,g);if(!bwg_testBrowser_cssTransforms3d(g))return bwg_fallback3d(s,n,l,g);function h(){if(jQuery(s).removeAttr("style"),jQuery(n).removeAttr("style"),jQuery(".bwg_slider"+d).removeAttr("style"),jQuery(s).css({opacity:0,filter:"Alpha(opacity=0)","z-index":1}),jQuery(n).css({opacity:1,filter:"Alpha(opacity=100)","z-index":2}),jQuery(".bwg_image_info").show(),jQuery(s).html(""),c){bwg_change_watermark_container(g),bwg_params[g].bwg_trans_in_progress=!1;var e=bwg_params[g].data,t=bwg_params[g].event_stack}else{gallery_box_data.bwg_trans_in_progress=!1;t=gallery_box_data.event_stack}void 0!==t&&0<t.length&&(key=t[0].split("-"),t.shift(),bwg_change_image(key[0],key[1],e,!0,g)),bwg_change_watermark_container()}c?(jQuery(".bwg_slideshow_filmstrip_thumbnail_"+g).removeClass("bwg_slideshow_thumb_active_"+g).addClass("bwg_slideshow_thumb_deactive_"+g),jQuery("#bwg_filmstrip_thumbnail_"+bwg_params[g].bwg_current_key+"_"+g).removeClass("bwg_slideshow_thumb_deactive_"+g).addClass("bwg_slideshow_thumb_active_"+g),jQuery(".bwg_slideshow_dots_"+g).removeClass("bwg_slideshow_dots_active_"+g).addClass("bwg_slideshow_dots_deactive_"+g),jQuery("#bwg_dots_"+bwg_params[g].bwg_current_key+"_"+g).removeClass("bwg_slideshow_dots_deactive_"+g).addClass("bwg_slideshow_dots_active_"+g),jQuery(".bwg_slide_bg_"+g).css("perspective",1e3)):(gallery_box_data.bwg_trans_in_progress=!0,jQuery(".bwg_filmstrip_thumbnail").removeClass("bwg_thumb_active").addClass("bwg_thumb_deactive"),jQuery("#bwg_filmstrip_thumbnail_"+gallery_box_data.bwg_current_key).removeClass("bwg_thumb_deactive").addClass("bwg_thumb_active"),jQuery(".bwg_slide_bg").css("perspective",1e3)),jQuery(s).css({transform:"translateZ("+e+"px)",backfaceVisibility:"hidden"}),jQuery(n).css({opacity:1,filter:"Alpha(opacity=100)",backfaceVisibility:"hidden",transform:"translateY("+a+"px) translateX("+t+"px) rotateY("+r+"deg) rotateX("+i+"deg)"}),jQuery(".bwg_slider"+d).css({transform:"translateZ(-"+e+"px)",transformStyle:"preserve-3d"}),setTimeout(function(){jQuery(".bwg_slider"+d).css({transition:"all "+u+"ms ease-in-out",transform:"translateZ(-"+e+"px) rotateX("+o+"deg) rotateY("+_+"deg)"})},20),jQuery(".bwg_slider"+d).one("webkitTransitionEnd transitionend otransitionend oTransitionEnd mstransitionend",jQuery.proxy(h)),0==u&&h()}function bwg_cubeH(e,t,a,i){var r=jQuery(e).width()/2;"right"==a?bwg_cube(r,r,0,0,90,0,-90,e,t,a,i):"left"==a&&bwg_cube(r,-r,0,0,-90,0,90,e,t,a,i)}function bwg_cubeV(e,t,a,i){var r=jQuery(e).height()/2;"right"==a?bwg_cube(r,0,-r,90,0,-90,0,e,t,a,i):"left"==a&&bwg_cube(r,0,r,-90,0,90,0,e,t,a,i)}function bwg_fade(e,t,a,i){var r,o=!1;function _(){jQuery(".bwg_image_info").show(),bwg_change_watermark_container(i),o?bwg_params[i].bwg_trans_in_progress=!1:gallery_box_data.bwg_trans_in_progress=!1}r=void 0!==i&&""!==i?(o=!0,bwg_params[i].bwg_trans_in_progress=!0,bwg_params[i].bwg_transition_duration):(gallery_box_data.bwg_trans_in_progress=!0,gallery_box_data.bwg_transition_duration),o?(jQuery(".bwg_slideshow_filmstrip_thumbnail_"+i).removeClass("bwg_slideshow_thumb_active_"+i).addClass("bwg_slideshow_thumb_deactive_"+i),jQuery("#bwg_filmstrip_thumbnail_"+bwg_params[i].bwg_current_key+"_"+i).removeClass("bwg_slideshow_thumb_deactive_"+i).addClass("bwg_slideshow_thumb_active_"+i),jQuery(".bwg_slideshow_dots_"+i).removeClass("bwg_slideshow_dots_active_"+i).addClass("bwg_slideshow_dots_deactive_"+i),jQuery("#bwg_dots_"+bwg_params[i].bwg_current_key+"_"+i).removeClass("bwg_slideshow_dots_deactive_"+i).addClass("bwg_slideshow_dots_active_"+i)):(jQuery(".bwg_filmstrip_thumbnail").removeClass("bwg_thumb_active").addClass("bwg_thumb_deactive"),jQuery("#bwg_filmstrip_thumbnail_"+gallery_box_data.bwg_current_key).removeClass("bwg_thumb_deactive").addClass("bwg_thumb_active")),bwg_testBrowser_cssTransitions()?(jQuery(t).css("transition","opacity "+r+"ms linear"),jQuery(e).css({opacity:0,"z-index":1}),jQuery(t).css({opacity:1,"z-index":2}),jQuery(t).one("webkitTransitionEnd transitionend otransitionend oTransitionEnd mstransitionend",jQuery.proxy(_))):(jQuery(e).animate({opacity:0,"z-index":1},r),jQuery(t).animate({opacity:1,"z-index":2},{duration:r,complete:function(){o?bwg_params[i].bwg_trans_in_progress=!1:gallery_box_data.bwg_trans_in_progress=!1,jQuery(e).html(""),_()}}),jQuery(e).fadeTo(r,0),jQuery(t).fadeTo(r,1)),0==r&&_()}function bwg_grid(e,t,a,i,r,o,_,s,n,l,g){var u,c=!1,d="";if(event_stack=void 0!==g&&""!==g?(c=!0,bwg_params[g].bwg_trans_in_progress=!0,d="_"+g,u=bwg_params[g].bwg_transition_duration,data=bwg_params[g].data,bwg_params[g].event_stack):(u=bwg_transition_duration,gallery_box_data.bwg_trans_in_progress=!0,gallery_box_data.event_stack),!bwg_testBrowser_cssTransitions())return bwg_fallback(s,n,l);c?(jQuery(".bwg_slideshow_filmstrip_thumbnail_"+g).removeClass("bwg_slideshow_thumb_active_"+g).addClass("bwg_slideshow_thumb_deactive_"+g),jQuery("#bwg_filmstrip_thumbnail_"+bwg_params[g].bwg_current_key+d).removeClass("bwg_slideshow_thumb_deactive_"+g).addClass("bwg_slideshow_thumb_active_"+g),jQuery(".bwg_slideshow_dots_"+g).removeClass("bwg_slideshow_dots_active_"+g).addClass("bwg_slideshow_dots_deactive_"+g),jQuery("#bwg_dots_"+bwg_params[g].bwg_current_key+d).removeClass("bwg_slideshow_dots_deactive_"+g).addClass("bwg_slideshow_dots_active_"+g)):(jQuery(".bwg_filmstrip_thumbnail").removeClass("bwg_thumb_active").addClass("bwg_thumb_deactive"),jQuery("#bwg_filmstrip_thumbnail_"+gallery_box_data.bwg_current_key).removeClass("bwg_thumb_deactive").addClass("bwg_thumb_active"));var h=u/(e+t);var b=jQuery(s).find("img"),p=(jQuery(s).find("iframe").css("opacity",0),jQuery('<span style="display: block;" />').addClass("bwg_grid"+d));jQuery(s).prepend(p);var m,w,y,f,j,Q,v,x,C,S,k,E=jQuery(".bwg_slide_bg"+d),I=b.width(),z=b.height(),T=E.width(),O=E.height(),M=Math.floor(T/e),D=Math.floor(O/t),F=T-e*M,A=Math.ceil(F/e),B=O-t*D,H=Math.ceil(B/t),P=0,W=Math.ceil((jQuery(".bwg_slide_bg"+d).width()-b.width())/2),L=void 0===b.attr("src")?"":b.attr("src");i="min-auto"===(i="auto"===i?T:i)?-T:i,r="min-auto"===(r="auto"===r?O:r)?-O:r;for(var N=0;N<e;N++){var R=0,q=Math.floor((jQuery(".bwg_slide_bg"+d).height()-b.height())/2),V=M;if(0<F){var U=A<=F?A:F;V+=U,F-=U}for(var Y=0;Y<t;Y++){var X=D,J=B;0<J&&(X+=U=H<=J?H:B,J-=U),p.append((m=V,w=X,y=R,f=q,j=P,Q=W,v=L,x=I,C=z,S=g,void 0,k=(N+Y)*h,jQuery('<span class="bwg_gridlet'+d+'" />').css({display:"block",width:m,height:w,top:y,left:j,backgroundImage:'url("'+v+'")',backgroundColor:c?jQuery(".bwg_slideshow_image_wrap_"+S).css("background-color"):jQuery(".spider_popup_wrap").css("background-color"),backgroundRepeat:"no-repeat",backgroundPosition:Q+"px "+f+"px",backgroundSize:x+"px "+C+"px",transition:"all "+u+"ms ease-in-out "+k+"ms",transform:"none"}))),R+=X,q-=X}W-=V,P+=V}var G=p.children().last();function K(){if(jQuery(s).css({opacity:0,"z-index":1}),jQuery(n).css({opacity:1,"z-index":2}),b.css("opacity",1),p.remove(),c){bwg_params[g].bwg_trans_in_progress=!1;var e=bwg_params[g].event_stack}else{gallery_box_data.bwg_trans_in_progress=!1;e=gallery_box_data.event_stack}jQuery(".bwg_image_info").show(),jQuery(s).html(""),void 0!==e&&0<e.length&&(key=e[0].split("-"),e.shift(),bwg_change_image(key[0],key[1],data,!0,g)),c?bwg_change_watermark_container(g):bwg_change_watermark_container()}p.show(),b.css("opacity",0),p.children().first().addClass("rs-top-left"),p.children().last().addClass("rs-bottom-right"),p.children().eq(t-1).addClass("rs-bottom-left"),p.children().eq(-t).addClass("rs-top-right"),setTimeout(function(){p.children().css({opacity:_,transform:"rotate("+a+"deg) translateX("+i+"px) translateY("+r+"px) scale("+o+")"})},1),jQuery(n).css("opacity",1),jQuery(G).one("webkitTransitionEnd transitionend otransitionend oTransitionEnd mstransitionend",jQuery.proxy(K)),0==u&&K()}function bwg_sliceH(e,t,a,i){if("right"==a)var r="min-auto";else if("left"==a)r="auto";bwg_grid(1,8,0,r,0,1,0,e,t,a,i)}function bwg_sliceV(e,t,a,i){if("right"==a)var r="min-auto";else if("left"==a)r="auto";bwg_grid(10,1,0,0,r,1,0,e,t,a,i)}function bwg_slideV(e,t,a,i){if("right"==a)var r="auto";else if("left"==a)r="min-auto";bwg_grid(1,1,0,0,r,1,1,e,t,a,i)}function bwg_slideH(e,t,a,i){if("right"==a)var r="min-auto";else if("left"==a)r="auto";bwg_grid(1,1,0,r,0,1,1,e,t,a,i)}function bwg_scaleOut(e,t,a,i){bwg_grid(1,1,0,0,0,1.5,0,e,t,a,i)}function bwg_scaleIn(e,t,a,i){bwg_grid(1,1,0,0,0,.5,0,e,t,a,i)}function bwg_blockScale(e,t,a,i){bwg_grid(8,6,0,0,0,.6,0,e,t,a,i)}function bwg_kaleidoscope(e,t,a,i){bwg_grid(10,8,0,0,0,1,0,e,t,a,i)}function bwg_fan(e,t,a,i){if("right"==a)var r=45,o=100;else if("left"==a)r=-45,o=-100;bwg_grid(1,10,r,o,0,1,0,e,t,a,i)}function bwg_blindV(e,t,a,i){bwg_grid(1,8,0,0,0,.7,0,e,t,"",i)}function bwg_blindH(e,t,a,i){bwg_grid(10,1,0,0,0,.7,0,e,t,"",i)}function bwg_random(e,t,a,i){var r=["sliceH","sliceV","slideH","slideV","scaleOut","scaleIn","blockScale","kaleidoscope","fan","blindH","blindV"];this["bwg_"+r[Math.floor(Math.random()*r.length)]](e,t,a,i)}function bwg_change_watermark_container(t){jQuery(".bwg_slider"+(void 0!==t&&""!==t?"_"+t:"")).children().each(function(){if(2==jQuery(this).css("zIndex")){var e=jQuery(this).find("img");if(e.length)if(e.prop("complete"))bwg_change_each_watermark_container(e.width(),e.height(),t);else e.on("load",function(){bwg_change_each_watermark_container(e.width(),e.height(),t)});else(e=jQuery(this).find("iframe")).length||(e=jQuery(this).find("video")),bwg_change_each_watermark_container(e.width(),e.height(),t)}})}function bwg_change_each_watermark_container(e,t,a){var i=void 0!==a&&""!==a?"_"+a:"",r=void 0!==a&&""!==a?"_slideshow":"";if(jQuery(".bwg"+r+"_watermark_spun"+i).width(e),jQuery(".bwg"+r+"_watermark_spun"+i).height(t),jQuery(".bwg"+r+"_watermark"+i).css({display:""}),void 0===a||""===a){var o=0;(jQuery(".bwg_comment_container").hasClass("bwg_open")||jQuery(".bwg_ecommerce_container").hasClass("bwg_open"))&&(o=gallery_box_data.lightbox_comment_width),e<=jQuery(window).width()-o&&(jQuery(".bwg_watermark_image").css({width:(jQuery(".spider_popup_wrap").width()-o)*gallery_box_data.watermark_font_size/gallery_box_data.image_width}),jQuery(".bwg_watermark_text, .bwg_watermark_text:hover").css({fontSize:(jQuery(".spider_popup_wrap").width()-o)*gallery_box_data.watermark_font_size/gallery_box_data.image_width}))}else jQuery(".bwg"+r+"_title_spun"+i).width(e),jQuery(".bwg"+r+"_title_spun"+i).height(t),jQuery(".bwg"+r+"_description_spun"+i).width(e),jQuery(".bwg"+r+"_description_spun"+i).height(t);jQuery.trim(jQuery(".bwg"+r+"_title_text"+i).text())&&jQuery(".bwg_slideshow_title_text"+i).css({display:""}),jQuery.trim(jQuery(".bwg"+r+"_description_text"+i).text())&&jQuery(".bwg"+r+"_description_text"+i).css({display:""})}function bwg_set_filmstrip_pos(e,t,a){var i,r=void 0!==t&&""!==t?"_"+t:"",o=void 0!==t&&""!==t?"_slideshow":"";i=void 0!==t&&""!==t?bwg_params[t].left_or_top:gallery_box_data.left_or_top;var _=parseInt(jQuery(".bwg_filmstrip_thumbnails").attr("data-all-images-top-bottom-space")),s=parseInt(jQuery(".bwg_filmstrip_thumbnails").attr("data-all-images-right-left-space"));if(void 0===t||""===t){if("outerWidth"==gallery_box_data.outerWidth_or_outerHeight)var n=-bwg_current_filmstrip_pos-jQuery(".bwg_filmstrip_thumbnail").outerWidth(!0)/2;else if("outerHeight"==gallery_box_data.outerWidth_or_outerHeight)n=-bwg_current_filmstrip_pos-jQuery(".bwg_filmstrip_thumbnail").outerHeight(!0)/2;if("width"==gallery_box_data.width_or_height)var l=Math.min(0,Math.max(e-jQuery(".bwg_filmstrip_thumbnails").width(),n+e/2));else if("height"==gallery_box_data.width_or_height)l=Math.min(0,Math.max(e-jQuery(".bwg_filmstrip_thumbnails").height(),n+e/2))}else if("width"==bwg_params[t].width_or_height)n=-bwg_params[t].bwg_current_filmstrip_pos-(jQuery(".bwg_slideshow_filmstrip_thumbnail"+r).width()+bwg_params[t].filmstrip_thumb_margin_hor)/2,l=Math.min(0,Math.max(e-jQuery(".bwg_slideshow_filmstrip_thumbnails"+r).width(),n+e/2));else n=-bwg_params[t].bwg_current_filmstrip_pos-(jQuery(".bwg_slideshow_filmstrip_thumbnail"+r).height()+bwg_params[t].filmstrip_thumb_margin_hor)/2,l=Math.min(0,Math.max(e-jQuery(".bwg_slideshow_filmstrip_thumbnails"+r).height(),n+e/2));0<l+s&&(s=0),0<l+_&&(_=0),"left"==i?jQuery(".bwg"+o+"_filmstrip_thumbnails"+r).animate({left:l+s},{duration:500,complete:function(){bwg_filmstrip_arrows(t)}}):jQuery(".bwg"+o+"_filmstrip_thumbnails"+r).animate({top:l+_},{duration:500,complete:function(){bwg_filmstrip_arrows(t)}})}function bwg_filmstrip_arrows(e){var t=void 0!==e&&""!==e?"_"+e:"",a=void 0!==e&&""!==e?"_slideshow":"";if("width"==(void 0!==e&&""!==e?bwg_params[e].width_or_heigh:gallery_box_data.width_or_height))var i=jQuery(".bwg"+a+"_filmstrip_thumbnails"+t).width(),r=jQuery(".bwg"+a+"_filmstrip"+t).width();else i=jQuery(".bwg"+a+"_filmstrip_thumbnails"+t).height(),r=jQuery(".bwg"+a+"_filmstrip"+t).height();i<r?(jQuery(".bwg"+a+"_filmstrip_left"+t).hide(),jQuery(".bwg"+a+"_filmstrip_right"+t).hide()):(jQuery(".bwg"+a+"_filmstrip_left"+t).show(),jQuery(".bwg"+a+"_filmstrip_right"+t).show())}function bwg_move_filmstrip(e){var t,a,i,r,o,_,s=void 0!==e&&""!==e?"_"+e:"",n=void 0!==e&&""!==e?"_slideshow":"",l=void 0!==e&&""!==e?bwg_params[e].outerWidth_or_outerHeight:gallery_box_data.outerWidth_or_outerHeight,g=void 0!==e&&""!==e?bwg_params[e].left_or_top:gallery_box_data.left_or_top;a="outerWidth"==l?(t=jQuery(".bwg"+n+"_filmstrip"+s).outerWidth(!0),jQuery(".bwg"+n+"_filmstrip_thumbnails"+s).outerWidth(!0)):(t=jQuery(".bwg"+n+"_filmstrip"+s).outerHeight(!0),jQuery(".bwg"+n+"_filmstrip_thumbnails"+s).outerHeight(!0)),_="left"==g?(i=jQuery(".bwg"+n+"_thumb_active"+s).position().left,r="outerWidth"==l?jQuery(".bwg"+n+"_thumb_active"+s).position().left+jQuery(".bwg"+n+"_thumb_active"+s).outerWidth(!0):jQuery(".bwg"+n+"_thumb_active"+s).position().left+jQuery(".bwg"+n+"_thumb_active"+s).outerHeight(!0),o=jQuery(".bwg"+n+"_filmstrip_thumbnails"+s).position().left,Math.abs(jQuery(".bwg"+n+"_filmstrip_thumbnails"+s).position().left)+t):(i=jQuery(".bwg"+n+"_thumb_active"+s).position().top,r="outerWidth"==l?jQuery(".bwg"+n+"_thumb_active"+s).position().top+jQuery(".bwg"+n+"_thumb_active"+s).outerWidth(!0):jQuery(".bwg"+n+"_thumb_active"+s).position().top+jQuery(".bwg"+n+"_thumb_active"+s).outerHeight(!0),o=jQuery(".bwg"+n+"_filmstrip_thumbnails"+s).position().top,Math.abs(jQuery(".bwg"+n+"_filmstrip_thumbnails"+s).position().top)+t),a<t||(i<Math.abs(o)?"left"==g?jQuery(".bwg"+n+"_filmstrip_thumbnails"+s).animate({left:-i},{duration:500,complete:function(){bwg_filmstrip_arrows(e)}}):jQuery(".bwg"+n+"_filmstrip_thumbnails"+s).animate({top:-i},{duration:500,complete:function(){bwg_filmstrip_arrows(e)}}):_<r&&("left"==g?jQuery(".bwg"+n+"_filmstrip_thumbnails"+s).animate({left:-(r-t)},{duration:500,complete:function(){bwg_filmstrip_arrows(e)}}):jQuery(".bwg"+n+"_filmstrip_thumbnails"+s).animate({top:-(r-t)},{duration:500,complete:function(){bwg_filmstrip_arrows(e)}})))}function bwg_move_dots(e){var t=jQuery(".bwg_slideshow_dots_active_"+e).position().left,a=jQuery(".bwg_slideshow_dots_active_"+e).position().left+jQuery(".bwg_slideshow_dots_active_"+e).outerWidth(!0),i=jQuery(".bwg_slideshow_dots_container_"+e).outerWidth(!0),r=jQuery(".bwg_slideshow_dots_thumbnails_"+e).outerWidth(!1),o=jQuery(".bwg_slideshow_dots_thumbnails_"+e).position().left,_=Math.abs(jQuery(".bwg_slideshow_dots_thumbnails_"+e).position().left)+i;r<i||(t<Math.abs(o)?jQuery(".bwg_slideshow_dots_thumbnails_"+e).animate({left:-t},{duration:500,complete:function(){}}):_<a&&jQuery(".bwg_slideshow_dots_thumbnails_"+e).animate({left:-(a-i)},{duration:500,complete:function(){}}))}function bwg_testBrowser_cssTransitions(e){return bwg_testDom("Transition",e)}function bwg_testBrowser_cssTransforms3d(e){return bwg_testDom("Perspective",e)}function bwg_testDom(e,t){for(var a=["","Webkit","Moz","ms","O","Khtml"],i=a.length;i--;)if(void 0!==document.body.style[a[i]+e])return!0;return!1}function bwg_fallback(e,t,a,i){bwg_fade(e,t,a,i)}function bwg_fallback3d(e,t,a,i){bwg_sliceV(e,t,a,i)}function bwg_none(e,t,a,i){var r=void 0!==i&&""!==i?"_"+i:"";if(jQuery(e).css({opacity:0,"z-index":1}),jQuery(t).css({opacity:1,"z-index":2}),void 0!==i&&""!==i){var o=bwg_params[i].bwg_current_key;bwg_change_watermark_container(i),jQuery(".bwg_slideshow_filmstrip_thumbnail"+r).removeClass("bwg_slideshow_thumb_active"+r).addClass("bwg_slideshow_thumb_deactive"+r),jQuery("#bwg_filmstrip_thumbnail_"+o+r).removeClass("bwg_slideshow_thumb_deactive"+r).addClass("bwg_slideshow_thumb_active"+r),jQuery(".bwg_slideshow_dots"+r).removeClass("bwg_slideshow_dots_active"+r).addClass("bwg_slideshow_dots_deactive"+r),jQuery("#bwg_dots_"+o+r).removeClass("bwg_slideshow_dots_deactive"+r).addClass("bwg_slideshow_dots_active"+r)}else jQuery(".bwg_image_info").show(),gallery_box_data.bwg_trans_in_progress=!1,jQuery(e).html(""),bwg_change_watermark_container()}function bwg_iterator(e){var t=1;return void 0!==e&&""!==e&&void 0!==bwg_params[e]&&1==bwg_params[e].enable_slideshow_shuffle&&(t=Math.floor((bwg_params[e].data.length-1)*Math.random()+1)),t}function bwg_change_image_slideshow(e,t,a,i,r){a=bwg_params[r].data;if(jQuery("#bwg_slideshow_image_container_"+r).find("iframe").each(function(){jQuery(this)[0].contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*"),jQuery(this)[0].contentWindow.postMessage('{ "method": "pause" }',"*"),jQuery(this)[0].contentWindow.postMessage("pause","*")}),jQuery("#image_id_"+r+"_"+a[e].id).find(".bwg_fb_video").each(function(){jQuery(this).attr("src",jQuery(this).attr("src"))}),a[t]){if(jQuery(".bwg_ctrl_btn_"+r).hasClass("bwg-icon-pause")&&bwg_play(bwg_params[r].data,r),i||(jQuery("#bwg_current_image_key_"+r).val(t),"-1"==e?e=jQuery(".bwg_slideshow_thumb_active_"+r).children("img").attr("image_key"):"-2"==e&&(e=jQuery(".bwg_slideshow_dots_active_"+r).attr("image_key"))),bwg_params[r].bwg_trans_in_progress)return void bwg_params[r].event_stack.push(e+"-"+t);var o="right";if(t<e)o="left";else if(e==t)return;jQuery(".bwg_slideshow_watermark_"+r).css({display:"none"}),jQuery(".bwg_slideshow_title_text_"+r).css({display:"none"}),jQuery(".bwg_slideshow_description_text_"+r).css({display:"none"}),"width"==bwg_params[r].width_or_height?bwg_params[r].bwg_current_filmstrip_pos=t*(jQuery(".bwg_slideshow_filmstrip_thumbnail_"+r).width()+2+2*bwg_params[r].lightbox_filmstrip_thumb_border_width):bwg_params[r].bwg_current_filmstrip_pos=t*(jQuery(".bwg_slideshow_filmstrip_thumbnail_"+r).height()+2+2*bwg_params[r].lightbox_filmstrip_thumb_border_width),e=t,bwg_params[r].bwg_current_key=e,jQuery("#bwg_slideshow_image_"+r).attr("image_id",a[t].id),jQuery(".bwg_slideshow_title_text_"+r).html(jQuery('<span style="display: block;" />').html(a[t].alt).text()),jQuery(".bwg_slideshow_description_text_"+r).html(jQuery('<span style="display: block;" />').html(a[t].description).text());var _=2==jQuery(".bwg_slideshow_image_spun_"+r).css("zIndex")?".bwg_slideshow_image_spun_"+r:".bwg_slideshow_image_second_spun_"+r,s=_==".bwg_slideshow_image_second_spun_"+r?".bwg_slideshow_image_spun_"+r:".bwg_slideshow_image_second_spun_"+r,n=-1<a[t].filetype.indexOf("EMBED_"),l=-1<a[t].filetype.indexOf("INSTAGRAM_POST"),g=-1<a[t].filetype.indexOf("INSTAGRAM_VIDEO"),u=jQuery(_).height(),c=jQuery(_).width(),d='<span class="bwg_slideshow_image_spun1_'+r+'" style="display:  '+(n?"block":"table")+' ;width: inherit; height: inherit;"><span class="bwg_slideshow_image_spun2_'+r+'" style="display: '+(n?"block":"table-cell")+'; vertical-align: middle; text-align: center; ">';if(n){if(d+='<span style="height: '+u+"px; width: "+c+'px;" class="bwg_popup_embed bwg_popup_watermark">',g&&(d+='<span class="bwg_inst_play_btn_cont" onclick="bwg_play_instagram_video(this)"><span class="bwg_inst_play"></span></span>'),l){var h=0,b=0;u<c+88?h=(b=u)-88:b=(h=c)+88,d+=spider_display_embed(a[t].filetype,a[t].image_url,a[t].filename,{class:"bwg_embed_frame","data-width":a[t].image_width,"data-height":a[t].image_height,frameborder:"0",allowfullscreen:"allowfullscreen",style:"width:"+h+"px; height:"+b+"px; vertical-align:middle; display:inline-block; position:relative;"})}else d+=spider_display_embed(a[t].filetype,a[t].image_url,a[t].filename,{class:"bwg_embed_frame",frameborder:"0",allowfullscreen:"allowfullscreen",style:"width:inherit; height:inherit; vertical-align:middle; display:table-cell;"});d+="</span>"}else{if("do_nothing"!=bwg_params[r].thumb_click_action){var p="";"open_lightbox"==bwg_params[r].thumb_click_action?p+=' class="bwg_lightbox" data-image-id="'+a[t].id+'"':"redirect_to_url"==bwg_params[r].thumb_click_action&&a[t].redirect_url&&(p+='href="'+a[t].redirect_url+'"'+(bwg_params[r].thumb_link_target&&1==bwg_params[r].thumb_link_target?' target="_blank"':"")),d+="<a "+p+">"}d+='<img style="max-height: '+u+"px !important; max-width: "+c+'px !important; display:inline-block;" ',d+=' class="bwg_slide bwg_slideshow_image_'+r+'" ',d+=' id="bwg_slideshow_image_'+r+'" ',d+=' src="'+bwg_params[r].upload_url+jQuery("<span style='display: block;' />").html(a[t].image_url).text()+'" alt="'+a[t].alt+'" image_id="'+a[t].id+'" /></a>'}d+="</span></span>",jQuery(s).html(d),bwg_params[r].preload_images&&bwg_preload_images(t,r),window["bwg_"+bwg_params[r].slideshow_effect](_,s,o,r),0<bwg_params[r].enable_slideshow_filmstrip?bwg_move_filmstrip(r):bwg_move_dots(r),a[t].is_embed_video?jQuery("#bwg_slideshow_play_pause_"+r).css({display:"none"}):jQuery("#bwg_slideshow_play_pause_"+r).css({display:""})}bwg_add_lightbox()}function bwg_preload_images_slideshow(e,t){var a=bwg_params[t].data;count=bwg_params[t].preload_images_count/2;var i=a.length;if(i<bwg_params[t].preload_images_count&&(count=0),0!=count)for(var r=e-count;r<e+count;r++){var o=parseInt((r+i)%i),_=-1<a[o].filetype.indexOf("EMBED_");void 0!==a[o]&&(_||jQuery("<img/>").attr("src",bwg_params[t].upload_url+jQuery('<span style="display: block;" />').html(a[o].image_url).text()))}else for(r=0;r<a.length;r++){_=-1<a[r].filetype.indexOf("EMBED_");void 0!==a[r]&&(_||jQuery("<img/>").attr("src",bwg_params[t].upload_url+jQuery('<span style="display: block;" />').html(a[r].image_url).text()))}}function bwg_preload_images(e,t){void 0!==t&&""!==t?bwg_preload_images_slideshow(e,t):bwg_preload_images_lightbox(e)}function bwg_popup_resize_slidshow(e){var t=jQuery(".bwg_slideshow_image_wrap_"+e).parent().width(),a=bwg_params[e].data;if(t>=bwg_params[e].image_width){jQuery(".bwg_slideshow_image_wrap_"+e).css({width:bwg_params[e].image_width}),jQuery(".bwg_slideshow_image_wrap_"+e).css({height:bwg_params[e].image_height}),jQuery(".bwg_slideshow_image_container_"+e).css({width:"horizontal"==bwg_params[e].filmstrip_direction?bwg_params[e].image_width:bwg_params[e].image_width-bwg_params[e].slideshow_filmstrip_width}),jQuery(".bwg_slideshow_image_container_"+e).css({height:"horizontal"==bwg_params[e].filmstrip_direction?bwg_params[e].image_height-bwg_params[e].slideshow_filmstrip_height:bwg_params[e].image_height}),jQuery(".bwg_slideshow_image_"+e).css({cssText:(bwg_params[e].filmstrip_direction,bwg_params[e].image_width)}),jQuery(".bwg_slideshow_embed_"+e).css({cssText:(bwg_params[e].filmstrip_direction,bwg_params[e].image_width)}),bwg_resize_instagram_post(e),bwg_change_watermark_container(e);var i="horizontal"==bwg_params[e].filmstrip_direction?"width: "+bwg_params[e].image_width:"height: "+bwg_params[e].image_height,r="horizontal"==bwg_params[e].filmstrip_direction?"width: "+(bwg_params[e].image_width-40):"height: "+(bwg_params[e].image_height-40);jQuery(".bwg_slideshow_filmstrip_container_"+e).css({cssText:i}),jQuery(".bwg_slideshow_filmstrip_"+e).css({cssText:r}),jQuery(".bwg_slideshow_dots_container_"+e).css({width:bwg_params[e].image_width}),jQuery("#bwg_slideshow_play_pause-ico_"+e).css({fontSize:bwg_params[e].slideshow_play_pause_btn_size}),"image"==bwg_params[e].watermark_type&&jQuery(".bwg_slideshow_watermark_image_"+e).css({maxWidth:bwg_params[e].watermark_width,maxHeight:bwg_params[e].watermark_height}),"text"==bwg_params[e].watermark_type&&jQuery(".bwg_slideshow_watermark_text_"+e+", .bwg_slideshow_watermark_text_"+e+" : hover").css({fontSize:bwg_params[e].watermark_font_size}),jQuery(".bwg_slideshow_title_text_"+e).css({fontSize:2*bwg_params[e].slideshow_title_font_size}),jQuery(".bwg_slideshow_description_text_"+e).css({fontSize:2*bwg_params[e].slideshow_description_font_size})}else jQuery(".bwg_slideshow_image_wrap_"+e).css({width:t}),jQuery(".bwg_slideshow_image_wrap_"+e).css({height:t*bwg_params[e].image_height/bwg_params[e].image_width}),jQuery(".bwg_slideshow_image_container_"+e).css({width:t-("horizontal"==bwg_params[e].filmstrip_direction?0:bwg_params[e].slideshow_filmstrip_width)}),jQuery(".bwg_slideshow_image_container_"+e).css({height:t*bwg_params[e].image_height/bwg_params[e].image_width-("horizontal"==bwg_params[e].filmstrip_direction?bwg_params[e].slideshow_filmstrip_height:0)}),jQuery(".bwg_slideshow_image_"+e).css({cssText:"max-width: "+(t-("horizontal"==bwg_params[e].filmstrip_direction?0:bwg_params[e].slideshow_filmstrip_width))+"px !important; max-height: "+(t*(bwg_params[e].image_height/bwg_params[e].image_width)-("horizontal"==bwg_params[e].filmstrip_direction?bwg_params[e].slideshow_filmstrip_height:0)-1)+"px !important;"}),jQuery(".bwg_slideshow_embed_"+e).css({cssText:"width: "+(t-("horizontal"==bwg_params[e].filmstrip_direction?0:bwg_params[e].slideshow_filmstrip_width))+"px !important; height: "+(t*(bwg_params[e].image_height/bwg_params[e].image_width)-("horizontal"==bwg_params[e].filmstrip_direction?bwg_params[e].slideshow_filmstrip_height:0)-1)+"px !important;"}),bwg_resize_instagram_post(e),bwg_change_watermark_container(e),"horizontal"==bwg_params[e].filmstrip_direction?(jQuery(".bwg_slideshow_filmstrip_container_"+e).css({width:t}),jQuery(".bwg_slideshow_filmstrip_"+e).css({width:t-40})):(jQuery(".bwg_slideshow_filmstrip_container_"+e).css({height:t*bwg_params[e].image_height/bwg_params[e].image_width}),jQuery(".bwg_slideshow_filmstrip_"+e).css({height:t*bwg_params[e].image_height/bwg_params[e].image_width-40})),jQuery(".bwg_slideshow_dots_container_"+e).css({width:t}),jQuery("#bwg_slideshow_play_pause-ico_"+e).css({fontSize:t*bwg_params[e].slideshow_play_pause_btn_size/bwg_params[e].image_width}),jQuery(".bwg_slideshow_watermark_image_"+e).css({maxWidth:t*bwg_params[e].watermark_width/bwg_params[e].image_width,maxHeight:t*bwg_params[e].watermark_height/bwg_params[e].image_width}),jQuery(".bwg_slideshow_watermark_text_"+e+", .bwg_slideshow_watermark_text_"+e+":hover").css({fontSize:t*bwg_params[e].watermark_font_size/bwg_params[e].image_width}),jQuery(".bwg_slideshow_title_text_"+e).css({fontSize:2*t*bwg_params[e].slideshow_title_font_size/bwg_params[e].image_width}),jQuery(".bwg_slideshow_description_text_"+e).css({fontSize:2*t*bwg_params[e].slideshow_description_font_size/bwg_params[e].image_width}),jQuery(".bwg_slideshow_image_"+e).css({display:"inline-block"});a[parseInt(jQuery("#bwg_current_image_key_"+e).val())].is_embed_video?jQuery("#bwg_slideshow_play_pause_"+e).css({display:"none"}):jQuery("#bwg_slideshow_play_pause_"+e).css({display:""})}function bwg_popup_resize(e){void 0!==e&&""!==e?bwg_popup_resize_slidshow(e):bwg_popup_resize_lightbox()}function bwg_change_image(e,t,a,i,r){void 0!==r&&""!==r?bwg_change_image_slideshow(e,t,a,i,r):bwg_change_image_lightbox(e,t,a,i)}function bwg_resize_instagram_post(e){if(void 0!==e&&""!==e){if(jQuery(".inner_instagram_iframe_bwg_embed_frame_"+e).length){var t=jQuery(".bwg_slideshow_embed_"+e).width(),a=jQuery(".bwg_slideshow_embed_").height();jQuery(".inner_instagram_iframe_bwg_embed_frame_"+e).each(function(){var e=jQuery(this).parent();a/(parseInt(e.attr("data-height"))+96)<t/parseInt(e.attr("data-width"))?(e.height(a),e.width((e.height()-96)*e.attr("data-width")/e.attr("data-height")+16)):(e.width(t),e.height((e.width()-16)*e.attr("data-height")/e.attr("data-width")+96))}),bwg_change_watermark_container(e)}}else if(jQuery(".inner_instagram_iframe_bwg_embed_frame").length){t=jQuery(".bwg_image_container").width(),a=jQuery(".bwg_image_container").height();jQuery(".inner_instagram_iframe_bwg_embed_frame").each(function(){var e=jQuery(this).parent();a/(parseInt(e.attr("data-height"))+176)<t/parseInt(e.attr("data-width"))?(e.height(a),e.width((e.height()-176)*e.attr("data-width")/e.attr("data-height")+16)):(e.width(t),e.height((e.width()-16)*e.attr("data-height")/e.attr("data-width")+96)),e.css({top:.5*(a-e.height())})}),bwg_change_watermark_container()}}function bwg_play(t,a){if(void 0!==a&&""!==a)t=bwg_params[a].data;void 0!==a&&""!==a?(window.clearInterval(window["bwg_playInterval"+a]),window["bwg_playInterval"+a]=setInterval(function(){var e=1;1==bwg_params[a].enable_slideshow_shuffle&&(e=Math.floor((t.length-1)*Math.random()+1)),bwg_change_image(parseInt(jQuery("#bwg_current_image_key_"+a).val()),(parseInt(jQuery("#bwg_current_image_key_"+a).val())+e)%t.length,t,"",a)},1e3*bwg_params[a].slideshow_interval)):(window.clearInterval(gallery_box_data.bwg_playInterval),gallery_box_data.bwg_playInterval=setInterval(function(){jQuery(".bwg_comment_container").hasClass("bwg_open")||jQuery(".bwg_play_pause").length&&jQuery(".bwg_play_pause").hasClass("bwg-icon-play")||(void 0===t||void 0!==t[parseInt(jQuery("#bwg_current_image_key").val())+1]?bwg_change_image(parseInt(jQuery("#bwg_current_image_key").val()),parseInt(jQuery("#bwg_current_image_key").val())+1,t):1==gallery_box_data.enable_loop&&bwg_change_image(parseInt(jQuery("#bwg_current_image_key").val()),0,t))},1e3*gallery_box_data.slideshow_interval))}function bwg_image_browser(e){if(jQuery("#bwg_embed_frame_16x9_"+e).width(jQuery("#bwg_embed_frame_16x9_"+e).parents(".image_browser_image_buttons_"+e).width()),jQuery("#bwg_embed_frame_16x9_"+e).height(.5625*jQuery("#bwg_embed_frame_16x9_"+e).width()),jQuery("#bwg_embed_frame_instapost_"+e).width(jQuery("#bwg_embed_frame_16x9_"+e).parents(".image_browser_image_buttons_"+e).width()),jQuery(".image_browser_images_conteiner_"+e).find(".fluid-width-video-wrapper").length){var t=jQuery(".image_browser_images_conteiner_"+e).find(".fluid-width-video-wrapper").contents();jQuery(".image_browser_images_conteiner_"+e).find(".fluid-width-video-wrapper").replaceWith(t)}jQuery(".bwg_embed_frame_instapost_"+e).height((jQuery(".bwg_embed_frame_instapost_"+e).width()-16)*jQuery(".bwg_embed_frame_instapost_"+e).attr("data-height")/jQuery(".bwg_embed_frame_instapost_"+e).attr("data-width")+96);var a=jQuery(".image_browser_images_"+e).width();a<=108?jQuery(".paging-input_"+e).css("display","none"):(a<=200?(jQuery(".paging-input_"+e).css("margin","0% 0% 0% 0%"),jQuery(".paging-input_"+e).css("display","inline")):a<=580?(jQuery(".paging-input_"+e).css("display","inline"),jQuery(".tablenav-pages_"+e+" a").css("font-size","13px"),jQuery(".paging-input_"+e).css("margin","0% 7% 0% 7%")):(jQuery(".tablenav-pages_"+e+" a").css("font-size","15px"),jQuery(".paging-input_"+e).css("margin","0%  14% 0%  14%"),jQuery(".paging-input_"+e).css("display","inline")),jQuery(".tablenav-pages_"+e+" .next-page").css("margin","0% 0% 0% 0%"),jQuery(".tablenav-pages_"+e+" .prev-page").css("margin","0% 0% 0% 0%"))}function bwg_disable_right_click(e){e.bind("contextmenu",function(){return!1}),e.css("webkitTouchCallout","none")}jQuery.fn.extend({hideShow:function(e){return this.checkForVisiblilityChange(e),this},checkForVisiblilityChange:function(e){if(this.length>>>0){for(var t,a,i,r=0;t=this[r++];){var o=jQuery(t).is(":visible");void 0===t.lastVisibility&&(t.lastVisibility=o),o!==t.lastVisibility&&(t.lastVisibility=o,"function"==typeof e&&e.apply(this,[new jQuery.Event("visibilityChanged"),o?"shown":"hidden"]),function(e,t){setTimeout(function(){jQuery(e).trigger("visibilityChanged",[t?"shown":"hidden"])},10)}(t,o))}a=this,i=arguments,setTimeout(function(){a.checkForVisiblilityChange.apply(a,i)},10)}}}),jQuery(document).ajaxComplete(function(){setTimeout(function(){bwg_main_ready()})}),jQuery(document).ready(function(){document.addEventListener("visibilitychange",function(){var e=!1;jQuery(".bwg_container").each(function(){0<jQuery(this).find(".wd_error").length&&(e=!0)}),e||("visible"==document.visibilityState&&bwg_slideshow_focus(),"hidden"==document.visibilityState&&bwg_slideshow_blur())}),bwg_main_ready(),jQuery(this).hideShow(function(e,t){"shown"==t&&bwg_main_ready()})}),jQuery(window).on("resize",function(){var e=!1;jQuery(".bwg_container").each(function(){0<jQuery(this).find(".wd_error").length&&(e=!0)}),e||(jQuery(".bwg-thumbnails, .bwg-masonry-thumbnails, .bwg-album-thumbnails").each(function(){bwg_all_thumnails_loaded(this)}),bwg_slideshow_resize(),bwg_image_browser_resize(),bwg_carousel_resize(),bwg_blog_style_resize(),jQuery(".bwg-mosaic-thumbnails").each(function(){bwg_thumbnail_mosaic(this)})),bwg_resize_search_line()}),jQuery(window).on("load",function(){var e=!1;jQuery(".bwg_container").each(function(){0<jQuery(this).find(".wd_error").length&&(e=!0)}),e||(bwg_blog_style_onload(),jQuery(".bwg-mosaic-thumbnails").each(function(){bwg_thumbnail_mosaic(this)}))}),jQuery(".bwg-masonry-thumb-span img, .bwg-mosaic-thumb-span img").on("error",function(){jQuery(this).height(100),jQuery(this).width(100)});
/*!
 * accounting.js v0.4.2
 * Copyright 2014 Open Exchange Rates
 *
 * Freely distributable under the MIT license.
 * Portions of accounting.js are inspired or borrowed from underscore.js
 *
 * Full details and documentation:
 * http://openexchangerates.github.io/accounting.js/
 */
!function(n){var f={version:"0.4.1",settings:{currency:{symbol:"$",format:"%s%v",decimal:".",thousand:",",precision:2,grouping:3},number:{precision:0,grouping:3,thousand:",",decimal:"."}}},i=Array.prototype.map,r=Array.isArray,e=Object.prototype.toString;function p(n){return""===n||n&&n.charCodeAt&&n.substr}function l(n){return r?r(n):"[object Array]"===e.call(n)}function m(n){return n&&"[object Object]"===e.call(n)}function d(n,r){for(var e in n=n||{},r=r||{})r.hasOwnProperty(e)&&null==n[e]&&(n[e]=r[e]);return n}function g(n,r,e){var t,o,a=[];if(n){if(i&&n.map===i)return n.map(r,e);for(t=0,o=n.length;t<o;t++)a[t]=r.call(e,n[t],t,n)}return a}function h(n,r){return n=Math.round(Math.abs(n)),isNaN(n)?r:n}function y(n){var r=f.settings.currency.format;return p(n="function"==typeof n?n():n)&&n.match("%v")?{pos:n,neg:n.replace("-","").replace("%v","-%v"),zero:n}:n&&n.pos&&n.pos.match("%v")?n:p(r)?f.settings.currency.format={pos:r,neg:r.replace("%v","-%v"),zero:r}:r}var t,b=f.unformat=f.parse=function(n,r){if(l(n))return g(n,function(n){return b(n,r)});if("number"==typeof(n=n||0))return n;r=r||f.settings.number.decimal;var e=new RegExp("[^0-9-"+r+"]",["g"]),n=parseFloat((""+n).replace(/\((.*)\)/,"-$1").replace(e,"").replace(r,"."));return isNaN(n)?0:n},s=f.toFixed=function(n,r){r=h(r,f.settings.number.precision);var e=Math.pow(10,r);return(Math.round(f.unformat(n)*e)/e).toFixed(r)},v=f.formatNumber=f.format=function(n,r,e,t){if(l(n))return g(n,function(n){return v(n,r,e,t)});n=b(n);var o=d(m(r)?r:{precision:r,thousand:e,decimal:t},f.settings.number),a=h(o.precision),i=n<0?"-":"",u=parseInt(s(Math.abs(n||0),a),10)+"",c=3<u.length?u.length%3:0;return i+(c?u.substr(0,c)+o.thousand:"")+u.substr(c).replace(/(\d{3})(?=\d)/g,"$1"+o.thousand)+(a?o.decimal+s(Math.abs(n),a).split(".")[1]:"")},c=f.formatMoney=function(n,r,e,t,o,a){if(l(n))return g(n,function(n){return c(n,r,e,t,o,a)});n=b(n);var i=d(m(r)?r:{symbol:r,precision:e,thousand:t,decimal:o,format:a},f.settings.currency),u=y(i.format);return(0<n?u.pos:n<0?u.neg:u.zero).replace("%s",i.symbol).replace("%v",v(Math.abs(n),h(i.precision),i.thousand,i.decimal))};f.formatColumn=function(n,r,e,t,o,a){var i,u,c,s;return n?(i=d(m(r)?r:{symbol:r,precision:e,thousand:t,decimal:o,format:a},f.settings.currency),u=y(i.format),c=u.pos.indexOf("%s")<u.pos.indexOf("%v"),s=0,r=g(n,function(n,r){return l(n)?f.formatColumn(n,i):((n=(0<(n=b(n))?u.pos:n<0?u.neg:u.zero).replace("%s",i.symbol).replace("%v",v(Math.abs(n),h(i.precision),i.thousand,i.decimal))).length>s&&(s=n.length),n)}),g(r,function(n,r){return p(n)&&n.length<s?c?n.replace(i.symbol,i.symbol+new Array(s-n.length+1).join(" ")):new Array(s-n.length+1).join(" ")+n:n})):[]},"undefined"!=typeof exports?(exports="undefined"!=typeof module&&module.exports?module.exports=f:exports).accounting=f:"function"==typeof define&&define.amd?define([],function(){return f}):(f.noConflict=(t=n.accounting,function(){return n.accounting=t,f.noConflict=void 0,f}),n.accounting=f)}(this);
/*!
 * jQuery blockUI plugin
 * Version 2.70.0-2014.11.23
 * Requires jQuery v1.7 or later
 *
 * Examples at: http://malsup.com/jquery/block/
 * Copyright (c) 2007-2013 M. Alsup
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 * Thanks to Amir-Hossein Sobhi for some excellent contributions!
 */
!function(){"use strict";function e(p){p.fn._fadeIn=p.fn.fadeIn;var b=p.noop||function(){},h=/MSIE/.test(navigator.userAgent),k=/MSIE 6.0/.test(navigator.userAgent)&&!/MSIE 8.0/.test(navigator.userAgent),y=(document.documentMode,"function"==typeof document.createElement("div").style.setExpression&&document.createElement("div").style.setExpression),m=(p.blockUI=function(e){o(window,e)},p.unblockUI=function(e){v(window,e)},p.growlUI=function(e,t,o,n){var i=p('<div class="growlUI"></div>'),s=(e&&i.append("<h1>"+e+"</h1>"),t&&i.append("<h2>"+t+"</h2>"),o===undefined&&(o=3e3),function(e){p.blockUI({message:i,fadeIn:"undefined"!=typeof(e=e||{}).fadeIn?e.fadeIn:700,fadeOut:"undefined"!=typeof e.fadeOut?e.fadeOut:1e3,timeout:"undefined"!=typeof e.timeout?e.timeout:o,centerY:!1,showOverlay:!1,onUnblock:n,css:p.blockUI.defaults.growlCSS})});s(),i.css("opacity");i.on("mouseover",function(){s({fadeIn:0,timeout:3e4});var e=p(".blockMsg");e.stop(),e.fadeTo(300,1)}).on("mouseout",function(){p(".blockMsg").fadeOut(1e3)})},p.fn.block=function(e){var t;return this[0]===window?(p.blockUI(e),this):(t=p.extend({},p.blockUI.defaults,e||{}),this.each(function(){var e=p(this);t.ignoreIfBlocked&&e.data("blockUI.isBlocked")||e.unblock({fadeOut:0})}),this.each(function(){"static"==p.css(this,"position")&&(this.style.position="relative",p(this).data("blockUI.static",!0)),this.style.zoom=1,o(this,e)}))},p.fn.unblock=function(e){return this[0]===window?(p.unblockUI(e),this):this.each(function(){v(this,e)})},p.blockUI.version=2.7,p.blockUI.defaults={message:"<h1>Please wait...</h1>",title:null,draggable:!0,theme:!1,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:.6,cursor:"wait"},cursorReset:"default",growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:!1,baseZ:1e3,centerX:!0,centerY:!0,allowBodyStretch:!0,bindEvents:!0,constrainTabKey:!0,fadeIn:200,fadeOut:400,timeout:0,showOverlay:!0,focusInput:!0,focusableElements:":input:enabled:visible",onBlock:null,onUnblock:null,onOverlayClick:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg",ignoreIfBlocked:!1},null),g=[];function o(e,o){var n=e==window,t=o&&o.message!==undefined?o.message:undefined;if(!(o=p.extend({},p.blockUI.defaults,o||{})).ignoreIfBlocked||!p(e).data("blockUI.isBlocked")){o.overlayCSS=p.extend({},p.blockUI.defaults.overlayCSS,o.overlayCSS||{}),f=p.extend({},p.blockUI.defaults.css,o.css||{}),o.onOverlayClick&&(o.overlayCSS.cursor="pointer"),u=p.extend({},p.blockUI.defaults.themedCSS,o.themedCSS||{}),t=t===undefined?o.message:t,n&&m&&v(window,{fadeOut:0}),t&&"string"!=typeof t&&(t.parentNode||t.jquery)&&(l=t.jquery?t[0]:t,d={},p(e).data("blockUI.history",d),d.el=l,d.parent=l.parentNode,d.display=l.style.display,d.position=l.style.position,d.parent)&&d.parent.removeChild(l),p(e).data("blockUI.onUnblock",o.onUnblock);var i,s,l=o.baseZ,d=h||o.forceIframe?p('<iframe class="blockUI" style="z-index:'+l+++';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+o.iframeSrc+'"></iframe>'):p('<div class="blockUI" style="display:none"></div>'),a=o.theme?p('<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:'+l+++';display:none"></div>'):p('<div class="blockUI blockOverlay" style="z-index:'+l+++';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>'),c=(o.theme&&n?(c='<div class="blockUI '+o.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+(l+10)+';display:none;position:fixed">',o.title&&(c+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(o.title||"&nbsp;")+"</div>"),c+='<div class="ui-widget-content ui-dialog-content"></div></div>'):o.theme?(c='<div class="blockUI '+o.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+(l+10)+';display:none;position:absolute">',o.title&&(c+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(o.title||"&nbsp;")+"</div>"),c+='<div class="ui-widget-content ui-dialog-content"></div></div>'):c=n?'<div class="blockUI '+o.blockMsgClass+' blockPage" style="z-index:'+(l+10)+';display:none;position:fixed"></div>':'<div class="blockUI '+o.blockMsgClass+' blockElement" style="z-index:'+(l+10)+';display:none;position:absolute"></div>',l=p(c),t&&(o.theme?(l.css(u),l.addClass("ui-widget-content")):l.css(f)),o.theme||a.css(o.overlayCSS),a.css("position",n?"fixed":"absolute"),(h||o.forceIframe)&&d.css("opacity",0),[d,a,l]),r=p(n?"body":e),u=(p.each(c,function(){this.appendTo(r)}),o.theme&&o.draggable&&p.fn.draggable&&l.draggable({handle:".ui-dialog-titlebar",cancel:"li"}),y&&(!p.support.boxModel||0<p("object,embed",n?null:e).length));if((k||u)&&(n&&o.allowBodyStretch&&p.support.boxModel&&p("html,body").css("height","100%"),!k&&p.support.boxModel||n||(f=U(e,"borderTopWidth"),u=U(e,"borderLeftWidth"),i=f?"(0 - "+f+")":0,s=u?"(0 - "+u+")":0),p.each(c,function(e,t){t=t[0].style;t.position="absolute",e<2?(n?t.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:"+o.quirksmodeOffsetHack+') + "px"'):t.setExpression("height",'this.parentNode.offsetHeight + "px"'),n?t.setExpression("width",'jQuery.support.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):t.setExpression("width",'this.parentNode.offsetWidth + "px"'),s&&t.setExpression("left",s),i&&t.setExpression("top",i)):o.centerY?(n&&t.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"'),t.marginTop=0):!o.centerY&&n&&(e=o.css&&o.css.top?parseInt(o.css.top,10):0,t.setExpression("top","((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+e+') + "px"'))})),t&&((o.theme?l.find(".ui-widget-content"):l).append(t),t.jquery||t.nodeType)&&p(t).show(),(h||o.forceIframe)&&o.showOverlay&&d.show(),o.fadeIn?(f=o.onBlock||b,u=o.showOverlay&&!t?f:b,c=t?f:b,o.showOverlay&&a._fadeIn(o.fadeIn,u),t&&l._fadeIn(o.fadeIn,c)):(o.showOverlay&&a.show(),t&&l.show(),o.onBlock&&o.onBlock.bind(l)()),I(1,e,o),n)m=l[0],g=p(o.focusableElements,m),o.focusInput&&setTimeout(w,20);else{var d=l[0],f=o.centerX,u=o.centerY,c=d.parentNode,a=d.style,t=(c.offsetWidth-d.offsetWidth)/2-U(c,"borderLeftWidth"),d=(c.offsetHeight-d.offsetHeight)/2-U(c,"borderTopWidth");f&&(a.left=0<t?t+"px":"0"),u&&(a.top=0<d?d+"px":"0")}o.timeout&&(l=setTimeout(function(){n?p.unblockUI(o):p(e).unblock(o)},o.timeout),p(e).data("blockUI.timeout",l))}}function v(e,t){var o,n,i=e==window,s=p(e),l=s.data("blockUI.history"),d=s.data("blockUI.timeout");d&&(clearTimeout(d),s.removeData("blockUI.timeout")),t=p.extend({},p.blockUI.defaults,t||{}),I(0,e,t),null===t.onUnblock&&(t.onUnblock=s.data("blockUI.onUnblock"),s.removeData("blockUI.onUnblock")),n=i?p(document.body).children().filter(".blockUI").add("body > .blockUI"):s.find(">.blockUI"),t.cursorReset&&(1<n.length&&(n[1].style.cursor=t.cursorReset),2<n.length)&&(n[2].style.cursor=t.cursorReset),i&&(m=g=null),t.fadeOut?(o=n.length,n.stop().fadeOut(t.fadeOut,function(){0==--o&&a(n,l,t,e)})):a(n,l,t,e)}function a(e,t,o,n){var i=p(n);i.data("blockUI.isBlocked")||(e.each(function(e,t){this.parentNode&&this.parentNode.removeChild(this)}),t&&t.el&&(t.el.style.display=t.display,t.el.style.position=t.position,t.el.style.cursor="default",t.parent&&t.parent.appendChild(t.el),i.removeData("blockUI.history")),i.data("blockUI.static")&&i.css("position","static"),"function"==typeof o.onUnblock&&o.onUnblock(n,o),t=(e=p(document.body)).width(),i=e[0].style.width,e.width(t-1).width(t),e[0].style.width=i)}function I(e,t,o){var n=t==window,t=p(t);!e&&(n&&!m||!n&&!t.data("blockUI.isBlocked"))||(t.data("blockUI.isBlocked",e),!n)||!o.bindEvents||e&&!o.showOverlay||(t="mousedown mouseup keydown keypress keyup touchstart touchend touchmove",e?p(document).on(t,o,i):p(document).off(t,i))}function i(e){if("keydown"===e.type&&e.keyCode&&9==e.keyCode&&m&&e.data.constrainTabKey){var t=g,o=!e.shiftKey&&e.target===t[t.length-1],n=e.shiftKey&&e.target===t[0];if(o||n)return setTimeout(function(){w(n)},10),!1}t=e.data,o=p(e.target);return o.hasClass("blockOverlay")&&t.onOverlayClick&&t.onOverlayClick(e),0<o.parents("div."+t.blockMsgClass).length||0===o.parents().children().filter("div.blockUI").length}function w(e){g&&(e=g[!0===e?g.length-1:0])&&e.trigger("focus")}function U(e,t){return parseInt(p.css(e,t),10)||0}}"function"==typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],e):e(jQuery)}();
/*! This file is auto-generated */
!function(n,r){var t,e;"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define("underscore",r):(n="undefined"!=typeof globalThis?globalThis:n||self,t=n._,(e=n._=r()).noConflict=function(){return n._=t,e})}(this,function(){var n="1.13.6",r="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},e=Array.prototype,F=Object.prototype,V="undefined"!=typeof Symbol?Symbol.prototype:null,P=e.push,f=e.slice,s=F.toString,q=F.hasOwnProperty,t="undefined"!=typeof ArrayBuffer,u="undefined"!=typeof DataView,U=Array.isArray,W=Object.keys,z=Object.create,L=t&&ArrayBuffer.isView,$=isNaN,C=isFinite,K=!{toString:null}.propertyIsEnumerable("toString"),J=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],G=Math.pow(2,53)-1;function l(u,o){return o=null==o?u.length-1:+o,function(){for(var n=Math.max(arguments.length-o,0),r=Array(n),t=0;t<n;t++)r[t]=arguments[t+o];switch(o){case 0:return u.call(this,r);case 1:return u.call(this,arguments[0],r);case 2:return u.call(this,arguments[0],arguments[1],r)}for(var e=Array(o+1),t=0;t<o;t++)e[t]=arguments[t];return e[o]=r,u.apply(this,e)}}function o(n){var r=typeof n;return"function"==r||"object"==r&&!!n}function H(n){return void 0===n}function Q(n){return!0===n||!1===n||"[object Boolean]"===s.call(n)}function i(n){var r="[object "+n+"]";return function(n){return s.call(n)===r}}var X=i("String"),Y=i("Number"),Z=i("Date"),nn=i("RegExp"),rn=i("Error"),tn=i("Symbol"),en=i("ArrayBuffer"),a=i("Function"),r=r.document&&r.document.childNodes,p=a="function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof r?function(n){return"function"==typeof n||!1}:a,r=i("Object"),un=u&&r(new DataView(new ArrayBuffer(8))),a="undefined"!=typeof Map&&r(new Map),u=i("DataView");var h=un?function(n){return null!=n&&p(n.getInt8)&&en(n.buffer)}:u,v=U||i("Array");function y(n,r){return null!=n&&q.call(n,r)}var on=i("Arguments"),an=(!function(){on(arguments)||(on=function(n){return y(n,"callee")})}(),on);function fn(n){return Y(n)&&$(n)}function cn(n){return function(){return n}}function ln(r){return function(n){n=r(n);return"number"==typeof n&&0<=n&&n<=G}}function sn(r){return function(n){return null==n?void 0:n[r]}}var d=sn("byteLength"),pn=ln(d),hn=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;var vn=t?function(n){return L?L(n)&&!h(n):pn(n)&&hn.test(s.call(n))}:cn(!1),g=sn("length");function yn(n,r){r=function(r){for(var t={},n=r.length,e=0;e<n;++e)t[r[e]]=!0;return{contains:function(n){return!0===t[n]},push:function(n){return t[n]=!0,r.push(n)}}}(r);var t=J.length,e=n.constructor,u=p(e)&&e.prototype||F,o="constructor";for(y(n,o)&&!r.contains(o)&&r.push(o);t--;)(o=J[t])in n&&n[o]!==u[o]&&!r.contains(o)&&r.push(o)}function b(n){if(!o(n))return[];if(W)return W(n);var r,t=[];for(r in n)y(n,r)&&t.push(r);return K&&yn(n,t),t}function dn(n,r){var t=b(r),e=t.length;if(null==n)return!e;for(var u=Object(n),o=0;o<e;o++){var i=t[o];if(r[i]!==u[i]||!(i in u))return!1}return!0}function m(n){return n instanceof m?n:this instanceof m?void(this._wrapped=n):new m(n)}function gn(n){return new Uint8Array(n.buffer||n,n.byteOffset||0,d(n))}m.VERSION=n,m.prototype.valueOf=m.prototype.toJSON=m.prototype.value=function(){return this._wrapped},m.prototype.toString=function(){return String(this._wrapped)};var bn="[object DataView]";function mn(n,r,t,e){var u;return n===r?0!==n||1/n==1/r:null!=n&&null!=r&&(n!=n?r!=r:("function"==(u=typeof n)||"object"==u||"object"==typeof r)&&function n(r,t,e,u){r instanceof m&&(r=r._wrapped);t instanceof m&&(t=t._wrapped);var o=s.call(r);if(o!==s.call(t))return!1;if(un&&"[object Object]"==o&&h(r)){if(!h(t))return!1;o=bn}switch(o){case"[object RegExp]":case"[object String]":return""+r==""+t;case"[object Number]":return+r!=+r?+t!=+t:0==+r?1/+r==1/t:+r==+t;case"[object Date]":case"[object Boolean]":return+r==+t;case"[object Symbol]":return V.valueOf.call(r)===V.valueOf.call(t);case"[object ArrayBuffer]":case bn:return n(gn(r),gn(t),e,u)}o="[object Array]"===o;if(!o&&vn(r)){var i=d(r);if(i!==d(t))return!1;if(r.buffer===t.buffer&&r.byteOffset===t.byteOffset)return!0;o=!0}if(!o){if("object"!=typeof r||"object"!=typeof t)return!1;var i=r.constructor,a=t.constructor;if(i!==a&&!(p(i)&&i instanceof i&&p(a)&&a instanceof a)&&"constructor"in r&&"constructor"in t)return!1}e=e||[];u=u||[];var f=e.length;for(;f--;)if(e[f]===r)return u[f]===t;e.push(r);u.push(t);if(o){if((f=r.length)!==t.length)return!1;for(;f--;)if(!mn(r[f],t[f],e,u))return!1}else{var c,l=b(r);if(f=l.length,b(t).length!==f)return!1;for(;f--;)if(c=l[f],!y(t,c)||!mn(r[c],t[c],e,u))return!1}e.pop();u.pop();return!0}(n,r,t,e))}function c(n){if(!o(n))return[];var r,t=[];for(r in n)t.push(r);return K&&yn(n,t),t}function jn(e){var u=g(e);return function(n){if(null==n)return!1;var r=c(n);if(g(r))return!1;for(var t=0;t<u;t++)if(!p(n[e[t]]))return!1;return e!==wn||!p(n[_n])}}var _n="forEach",r=["clear","delete"],u=["get","has","set"],U=r.concat(_n,u),wn=r.concat(u),t=["add"].concat(r,_n,"has"),u=a?jn(U):i("Map"),r=a?jn(wn):i("WeakMap"),U=a?jn(t):i("Set"),a=i("WeakSet");function j(n){for(var r=b(n),t=r.length,e=Array(t),u=0;u<t;u++)e[u]=n[r[u]];return e}function An(n){for(var r={},t=b(n),e=0,u=t.length;e<u;e++)r[n[t[e]]]=t[e];return r}function xn(n){var r,t=[];for(r in n)p(n[r])&&t.push(r);return t.sort()}function Sn(f,c){return function(n){var r=arguments.length;if(c&&(n=Object(n)),!(r<2||null==n))for(var t=1;t<r;t++)for(var e=arguments[t],u=f(e),o=u.length,i=0;i<o;i++){var a=u[i];c&&void 0!==n[a]||(n[a]=e[a])}return n}}var On=Sn(c),_=Sn(b),Mn=Sn(c,!0);function En(n){var r;return o(n)?z?z(n):((r=function(){}).prototype=n,n=new r,r.prototype=null,n):{}}function Bn(n){return v(n)?n:[n]}function w(n){return m.toPath(n)}function Nn(n,r){for(var t=r.length,e=0;e<t;e++){if(null==n)return;n=n[r[e]]}return t?n:void 0}function In(n,r,t){n=Nn(n,w(r));return H(n)?t:n}function Tn(n){return n}function A(r){return r=_({},r),function(n){return dn(n,r)}}function kn(r){return r=w(r),function(n){return Nn(n,r)}}function x(u,o,n){if(void 0===o)return u;switch(null==n?3:n){case 1:return function(n){return u.call(o,n)};case 3:return function(n,r,t){return u.call(o,n,r,t)};case 4:return function(n,r,t,e){return u.call(o,n,r,t,e)}}return function(){return u.apply(o,arguments)}}function Dn(n,r,t){return null==n?Tn:p(n)?x(n,r,t):(o(n)&&!v(n)?A:kn)(n)}function Rn(n,r){return Dn(n,r,1/0)}function S(n,r,t){return m.iteratee!==Rn?m.iteratee(n,r):Dn(n,r,t)}function Fn(){}function Vn(n,r){return null==r&&(r=n,n=0),n+Math.floor(Math.random()*(r-n+1))}m.toPath=Bn,m.iteratee=Rn;var O=Date.now||function(){return(new Date).getTime()};function Pn(r){function t(n){return r[n]}var n="(?:"+b(r).join("|")+")",e=RegExp(n),u=RegExp(n,"g");return function(n){return e.test(n=null==n?"":""+n)?n.replace(u,t):n}}var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},qn=Pn(t),t=Pn(An(t)),Un=m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},Wn=/(.)^/,zn={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Ln=/\\|'|\r|\n|\u2028|\u2029/g;function $n(n){return"\\"+zn[n]}var Cn=/^\s*(\w|\$)+\s*$/;var Kn=0;function Jn(n,r,t,e,u){return e instanceof r?(e=En(n.prototype),o(r=n.apply(e,u))?r:e):n.apply(t,u)}var M=l(function(u,o){function i(){for(var n=0,r=o.length,t=Array(r),e=0;e<r;e++)t[e]=o[e]===a?arguments[n++]:o[e];for(;n<arguments.length;)t.push(arguments[n++]);return Jn(u,i,this,this,t)}var a=M.placeholder;return i}),Gn=(M.placeholder=m,l(function(r,t,e){var u;if(p(r))return u=l(function(n){return Jn(r,u,t,this,e.concat(n))});throw new TypeError("Bind must be called on a function")})),E=ln(g);function B(n,r,t,e){if(e=e||[],r||0===r){if(r<=0)return e.concat(n)}else r=1/0;for(var u=e.length,o=0,i=g(n);o<i;o++){var a=n[o];if(E(a)&&(v(a)||an(a)))if(1<r)B(a,r-1,t,e),u=e.length;else for(var f=0,c=a.length;f<c;)e[u++]=a[f++];else t||(e[u++]=a)}return e}var Hn=l(function(n,r){var t=(r=B(r,!1,!1)).length;if(t<1)throw new Error("bindAll must be passed function names");for(;t--;){var e=r[t];n[e]=Gn(n[e],n)}return n});var Qn=l(function(n,r,t){return setTimeout(function(){return n.apply(null,t)},r)}),Xn=M(Qn,m,1);function Yn(n){return function(){return!n.apply(this,arguments)}}function Zn(n,r){var t;return function(){return 0<--n&&(t=r.apply(this,arguments)),n<=1&&(r=null),t}}var nr=M(Zn,2);function rr(n,r,t){r=S(r,t);for(var e,u=b(n),o=0,i=u.length;o<i;o++)if(r(n[e=u[o]],e,n))return e}function tr(o){return function(n,r,t){r=S(r,t);for(var e=g(n),u=0<o?0:e-1;0<=u&&u<e;u+=o)if(r(n[u],u,n))return u;return-1}}var er=tr(1),ur=tr(-1);function or(n,r,t,e){for(var u=(t=S(t,e,1))(r),o=0,i=g(n);o<i;){var a=Math.floor((o+i)/2);t(n[a])<u?o=a+1:i=a}return o}function ir(o,i,a){return function(n,r,t){var e=0,u=g(n);if("number"==typeof t)0<o?e=0<=t?t:Math.max(t+u,e):u=0<=t?Math.min(t+1,u):t+u+1;else if(a&&t&&u)return n[t=a(n,r)]===r?t:-1;if(r!=r)return 0<=(t=i(f.call(n,e,u),fn))?t+e:-1;for(t=0<o?e:u-1;0<=t&&t<u;t+=o)if(n[t]===r)return t;return-1}}var ar=ir(1,er,or),fr=ir(-1,ur);function cr(n,r,t){r=(E(n)?er:rr)(n,r,t);if(void 0!==r&&-1!==r)return n[r]}function N(n,r,t){if(r=x(r,t),E(n))for(u=0,o=n.length;u<o;u++)r(n[u],u,n);else for(var e=b(n),u=0,o=e.length;u<o;u++)r(n[e[u]],e[u],n);return n}function I(n,r,t){r=S(r,t);for(var e=!E(n)&&b(n),u=(e||n).length,o=Array(u),i=0;i<u;i++){var a=e?e[i]:i;o[i]=r(n[a],a,n)}return o}function lr(p){return function(n,r,t,e){var u=3<=arguments.length,o=n,i=x(r,e,4),a=t,f=!E(o)&&b(o),c=(f||o).length,l=0<p?0:c-1;for(u||(a=o[f?f[l]:l],l+=p);0<=l&&l<c;l+=p){var s=f?f[l]:l;a=i(a,o[s],s,o)}return a}}var sr=lr(1),pr=lr(-1);function T(n,e,r){var u=[];return e=S(e,r),N(n,function(n,r,t){e(n,r,t)&&u.push(n)}),u}function hr(n,r,t){r=S(r,t);for(var e=!E(n)&&b(n),u=(e||n).length,o=0;o<u;o++){var i=e?e[o]:o;if(!r(n[i],i,n))return!1}return!0}function vr(n,r,t){r=S(r,t);for(var e=!E(n)&&b(n),u=(e||n).length,o=0;o<u;o++){var i=e?e[o]:o;if(r(n[i],i,n))return!0}return!1}function k(n,r,t,e){return E(n)||(n=j(n)),0<=ar(n,r,t="number"==typeof t&&!e?t:0)}var yr=l(function(n,t,e){var u,o;return p(t)?o=t:(t=w(t),u=t.slice(0,-1),t=t[t.length-1]),I(n,function(n){var r=o;if(!r){if(null==(n=u&&u.length?Nn(n,u):n))return;r=n[t]}return null==r?r:r.apply(n,e)})});function dr(n,r){return I(n,kn(r))}function gr(n,e,r){var t,u,o=-1/0,i=-1/0;if(null==e||"number"==typeof e&&"object"!=typeof n[0]&&null!=n)for(var a=0,f=(n=E(n)?n:j(n)).length;a<f;a++)null!=(t=n[a])&&o<t&&(o=t);else e=S(e,r),N(n,function(n,r,t){u=e(n,r,t),(i<u||u===-1/0&&o===-1/0)&&(o=n,i=u)});return o}var br=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function mr(n){return n?v(n)?f.call(n):X(n)?n.match(br):E(n)?I(n,Tn):j(n):[]}function jr(n,r,t){if(null==r||t)return(n=E(n)?n:j(n))[Vn(n.length-1)];for(var e=mr(n),t=g(e),u=(r=Math.max(Math.min(r,t),0),t-1),o=0;o<r;o++){var i=Vn(o,u),a=e[o];e[o]=e[i],e[i]=a}return e.slice(0,r)}function D(o,r){return function(t,e,n){var u=r?[[],[]]:{};return e=S(e,n),N(t,function(n,r){r=e(n,r,t);o(u,n,r)}),u}}var _r=D(function(n,r,t){y(n,t)?n[t].push(r):n[t]=[r]}),wr=D(function(n,r,t){n[t]=r}),Ar=D(function(n,r,t){y(n,t)?n[t]++:n[t]=1}),xr=D(function(n,r,t){n[t?0:1].push(r)},!0);function Sr(n,r,t){return r in t}var Or=l(function(n,r){var t={},e=r[0];if(null!=n){p(e)?(1<r.length&&(e=x(e,r[1])),r=c(n)):(e=Sr,r=B(r,!1,!1),n=Object(n));for(var u=0,o=r.length;u<o;u++){var i=r[u],a=n[i];e(a,i,n)&&(t[i]=a)}}return t}),Mr=l(function(n,t){var r,e=t[0];return p(e)?(e=Yn(e),1<t.length&&(r=t[1])):(t=I(B(t,!1,!1),String),e=function(n,r){return!k(t,r)}),Or(n,e,r)});function Er(n,r,t){return f.call(n,0,Math.max(0,n.length-(null==r||t?1:r)))}function Br(n,r,t){return null==n||n.length<1?null==r||t?void 0:[]:null==r||t?n[0]:Er(n,n.length-r)}function R(n,r,t){return f.call(n,null==r||t?1:r)}var Nr=l(function(n,r){return r=B(r,!0,!0),T(n,function(n){return!k(r,n)})}),Ir=l(function(n,r){return Nr(n,r)});function Tr(n,r,t,e){Q(r)||(e=t,t=r,r=!1),null!=t&&(t=S(t,e));for(var u=[],o=[],i=0,a=g(n);i<a;i++){var f=n[i],c=t?t(f,i,n):f;r&&!t?(i&&o===c||u.push(f),o=c):t?k(o,c)||(o.push(c),u.push(f)):k(u,f)||u.push(f)}return u}var kr=l(function(n){return Tr(B(n,!0,!0))});function Dr(n){for(var r=n&&gr(n,g).length||0,t=Array(r),e=0;e<r;e++)t[e]=dr(n,e);return t}var Rr=l(Dr);function Fr(n,r){return n._chain?m(r).chain():r}function Vr(t){return N(xn(t),function(n){var r=m[n]=t[n];m.prototype[n]=function(){var n=[this._wrapped];return P.apply(n,arguments),Fr(this,r.apply(m,n))}}),m}N(["pop","push","reverse","shift","sort","splice","unshift"],function(r){var t=e[r];m.prototype[r]=function(){var n=this._wrapped;return null!=n&&(t.apply(n,arguments),"shift"!==r&&"splice"!==r||0!==n.length||delete n[0]),Fr(this,n)}}),N(["concat","join","slice"],function(n){var r=e[n];m.prototype[n]=function(){var n=this._wrapped;return Fr(this,n=null!=n?r.apply(n,arguments):n)}});n=Vr({__proto__:null,VERSION:n,restArguments:l,isObject:o,isNull:function(n){return null===n},isUndefined:H,isBoolean:Q,isElement:function(n){return!(!n||1!==n.nodeType)},isString:X,isNumber:Y,isDate:Z,isRegExp:nn,isError:rn,isSymbol:tn,isArrayBuffer:en,isDataView:h,isArray:v,isFunction:p,isArguments:an,isFinite:function(n){return!tn(n)&&C(n)&&!isNaN(parseFloat(n))},isNaN:fn,isTypedArray:vn,isEmpty:function(n){var r;return null==n||("number"==typeof(r=g(n))&&(v(n)||X(n)||an(n))?0===r:0===g(b(n)))},isMatch:dn,isEqual:function(n,r){return mn(n,r)},isMap:u,isWeakMap:r,isSet:U,isWeakSet:a,keys:b,allKeys:c,values:j,pairs:function(n){for(var r=b(n),t=r.length,e=Array(t),u=0;u<t;u++)e[u]=[r[u],n[r[u]]];return e},invert:An,functions:xn,methods:xn,extend:On,extendOwn:_,assign:_,defaults:Mn,create:function(n,r){return n=En(n),r&&_(n,r),n},clone:function(n){return o(n)?v(n)?n.slice():On({},n):n},tap:function(n,r){return r(n),n},get:In,has:function(n,r){for(var t=(r=w(r)).length,e=0;e<t;e++){var u=r[e];if(!y(n,u))return!1;n=n[u]}return!!t},mapObject:function(n,r,t){r=S(r,t);for(var e=b(n),u=e.length,o={},i=0;i<u;i++){var a=e[i];o[a]=r(n[a],a,n)}return o},identity:Tn,constant:cn,noop:Fn,toPath:Bn,property:kn,propertyOf:function(r){return null==r?Fn:function(n){return In(r,n)}},matcher:A,matches:A,times:function(n,r,t){var e=Array(Math.max(0,n));r=x(r,t,1);for(var u=0;u<n;u++)e[u]=r(u);return e},random:Vn,now:O,escape:qn,unescape:t,templateSettings:Un,template:function(o,n,r){n=Mn({},n=!n&&r?r:n,m.templateSettings);var t,r=RegExp([(n.escape||Wn).source,(n.interpolate||Wn).source,(n.evaluate||Wn).source].join("|")+"|$","g"),i=0,a="__p+='";if(o.replace(r,function(n,r,t,e,u){return a+=o.slice(i,u).replace(Ln,$n),i=u+n.length,r?a+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":t?a+="'+\n((__t=("+t+"))==null?'':__t)+\n'":e&&(a+="';\n"+e+"\n__p+='"),n}),a+="';\n",r=n.variable){if(!Cn.test(r))throw new Error("variable is not a bare identifier: "+r)}else a="with(obj||{}){\n"+a+"}\n",r="obj";a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{t=new Function(r,"_",a)}catch(n){throw n.source=a,n}function e(n){return t.call(this,n,m)}return e.source="function("+r+"){\n"+a+"}",e},result:function(n,r,t){var e=(r=w(r)).length;if(!e)return p(t)?t.call(n):t;for(var u=0;u<e;u++){var o=null==n?void 0:n[r[u]];void 0===o&&(o=t,u=e),n=p(o)?o.call(n):o}return n},uniqueId:function(n){var r=++Kn+"";return n?n+r:r},chain:function(n){return(n=m(n))._chain=!0,n},iteratee:Rn,partial:M,bind:Gn,bindAll:Hn,memoize:function(e,u){function o(n){var r=o.cache,t=""+(u?u.apply(this,arguments):n);return y(r,t)||(r[t]=e.apply(this,arguments)),r[t]}return o.cache={},o},delay:Qn,defer:Xn,throttle:function(t,e,u){function o(){l=!1===u.leading?0:O(),i=null,c=t.apply(a,f),i||(a=f=null)}function n(){var n=O(),r=(l||!1!==u.leading||(l=n),e-(n-l));return a=this,f=arguments,r<=0||e<r?(i&&(clearTimeout(i),i=null),l=n,c=t.apply(a,f),i||(a=f=null)):i||!1===u.trailing||(i=setTimeout(o,r)),c}var i,a,f,c,l=0;return u=u||{},n.cancel=function(){clearTimeout(i),l=0,i=a=f=null},n},debounce:function(r,t,e){function u(){var n=O()-i;n<t?o=setTimeout(u,t-n):(o=null,e||(f=r.apply(c,a)),o||(a=c=null))}var o,i,a,f,c,n=l(function(n){return c=this,a=n,i=O(),o||(o=setTimeout(u,t),e&&(f=r.apply(c,a))),f});return n.cancel=function(){clearTimeout(o),o=a=c=null},n},wrap:function(n,r){return M(r,n)},negate:Yn,compose:function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},after:function(n,r){return function(){if(--n<1)return r.apply(this,arguments)}},before:Zn,once:nr,findKey:rr,findIndex:er,findLastIndex:ur,sortedIndex:or,indexOf:ar,lastIndexOf:fr,find:cr,detect:cr,findWhere:function(n,r){return cr(n,A(r))},each:N,forEach:N,map:I,collect:I,reduce:sr,foldl:sr,inject:sr,reduceRight:pr,foldr:pr,filter:T,select:T,reject:function(n,r,t){return T(n,Yn(S(r)),t)},every:hr,all:hr,some:vr,any:vr,contains:k,includes:k,include:k,invoke:yr,pluck:dr,where:function(n,r){return T(n,A(r))},max:gr,min:function(n,e,r){var t,u,o=1/0,i=1/0;if(null==e||"number"==typeof e&&"object"!=typeof n[0]&&null!=n)for(var a=0,f=(n=E(n)?n:j(n)).length;a<f;a++)null!=(t=n[a])&&t<o&&(o=t);else e=S(e,r),N(n,function(n,r,t){((u=e(n,r,t))<i||u===1/0&&o===1/0)&&(o=n,i=u)});return o},shuffle:function(n){return jr(n,1/0)},sample:jr,sortBy:function(n,e,r){var u=0;return e=S(e,r),dr(I(n,function(n,r,t){return{value:n,index:u++,criteria:e(n,r,t)}}).sort(function(n,r){var t=n.criteria,e=r.criteria;if(t!==e){if(e<t||void 0===t)return 1;if(t<e||void 0===e)return-1}return n.index-r.index}),"value")},groupBy:_r,indexBy:wr,countBy:Ar,partition:xr,toArray:mr,size:function(n){return null==n?0:(E(n)?n:b(n)).length},pick:Or,omit:Mr,first:Br,head:Br,take:Br,initial:Er,last:function(n,r,t){return null==n||n.length<1?null==r||t?void 0:[]:null==r||t?n[n.length-1]:R(n,Math.max(0,n.length-r))},rest:R,tail:R,drop:R,compact:function(n){return T(n,Boolean)},flatten:function(n,r){return B(n,r,!1)},without:Ir,uniq:Tr,unique:Tr,union:kr,intersection:function(n){for(var r=[],t=arguments.length,e=0,u=g(n);e<u;e++){var o=n[e];if(!k(r,o)){for(var i=1;i<t&&k(arguments[i],o);i++);i===t&&r.push(o)}}return r},difference:Nr,unzip:Dr,transpose:Dr,zip:Rr,object:function(n,r){for(var t={},e=0,u=g(n);e<u;e++)r?t[n[e]]=r[e]:t[n[e][0]]=n[e][1];return t},range:function(n,r,t){null==r&&(r=n||0,n=0),t=t||(r<n?-1:1);for(var e=Math.max(Math.ceil((r-n)/t),0),u=Array(e),o=0;o<e;o++,n+=t)u[o]=n;return u},chunk:function(n,r){if(null==r||r<1)return[];for(var t=[],e=0,u=n.length;e<u;)t.push(f.call(n,e,e+=r));return t},mixin:Vr,default:m});return n._=n});
/*! This file is auto-generated */
window.wp=window.wp||{},function(s){var t="undefined"==typeof _wpUtilSettings?{}:_wpUtilSettings;wp.template=_.memoize(function(e){var n,a={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g,variable:"data"};return function(t){if(document.getElementById("tmpl-"+e))return(n=n||_.template(s("#tmpl-"+e).html(),a))(t);throw new Error("Template not found: #tmpl-"+e)}}),wp.ajax={settings:t.ajax||{},post:function(t,e){return wp.ajax.send({data:_.isObject(t)?t:_.extend(e||{},{action:t})})},send:function(a,t){var e,n;return _.isObject(a)?t=a:(t=t||{}).data=_.extend(t.data||{},{action:a}),t=_.defaults(t||{},{type:"POST",url:wp.ajax.settings.url,context:this}),(e=(n=s.Deferred(function(n){t.success&&n.done(t.success),t.error&&n.fail(t.error),delete t.success,delete t.error,n.jqXHR=s.ajax(t).done(function(t){var e;"1"!==t&&1!==t||(t={success:!0}),_.isObject(t)&&!_.isUndefined(t.success)?(e=this,n.done(function(){a&&a.data&&"query-attachments"===a.data.action&&n.jqXHR.hasOwnProperty("getResponseHeader")&&n.jqXHR.getResponseHeader("X-WP-Total")?e.totalAttachments=parseInt(n.jqXHR.getResponseHeader("X-WP-Total"),10):e.totalAttachments=0}),n[t.success?"resolveWith":"rejectWith"](this,[t.data])):n.rejectWith(this,[t])}).fail(function(){n.rejectWith(this,arguments)})})).promise()).abort=function(){return n.jqXHR.abort(),this},e}}}(jQuery);
!function($,c,i,n){var t=function(t){var a=this;a.$form=t,a.$attributeFields=t.find(".variations select"),a.$singleVariation=t.find(".single_variation"),a.$singleVariationWrap=t.find(".single_variation_wrap"),a.$resetVariations=t.find(".reset_variations"),a.$product=t.closest(".product"),a.variationData=t.data("product_variations"),a.useAjax=!1===a.variationData,a.xhr=!1,a.loading=!0,a.$singleVariationWrap.show(),a.$form.off(".wc-variation-form"),a.getChosenAttributes=a.getChosenAttributes.bind(a),a.findMatchingVariations=a.findMatchingVariations.bind(a),a.isMatch=a.isMatch.bind(a),a.toggleResetLink=a.toggleResetLink.bind(a),t.on("click.wc-variation-form",".reset_variations",{variationForm:a},a.onReset),t.on("reload_product_variations",{variationForm:a},a.onReload),t.on("hide_variation",{variationForm:a},a.onHide),t.on("show_variation",{variationForm:a},a.onShow),t.on("click",".single_add_to_cart_button",{variationForm:a},a.onAddToCart),t.on("reset_data",{variationForm:a},a.onResetDisplayedVariation),t.on("reset_image",{variationForm:a},a.onResetImage),t.on("change.wc-variation-form",".variations select",{variationForm:a},a.onChange),t.on("found_variation.wc-variation-form",{variationForm:a},a.onFoundVariation),t.on("check_variations.wc-variation-form",{variationForm:a},a.onFindVariation),t.on("update_variation_values.wc-variation-form",{variationForm:a},a.onUpdateAttributes),setTimeout(function(){t.trigger("check_variations"),t.trigger("wc_variation_form",a),a.loading=!1},100)},o=(t.prototype.onReset=function(t){t.preventDefault(),t.data.variationForm.$attributeFields.val("").trigger("change"),t.data.variationForm.$form.trigger("reset_data")},t.prototype.onReload=function(t){t=t.data.variationForm;t.variationData=t.$form.data("product_variations"),t.useAjax=!1===t.variationData,t.$form.trigger("check_variations")},t.prototype.onHide=function(t){t.preventDefault(),t.data.variationForm.$form.find(".single_add_to_cart_button").removeClass("wc-variation-is-unavailable").addClass("disabled wc-variation-selection-needed"),t.data.variationForm.$form.find(".woocommerce-variation-add-to-cart").removeClass("woocommerce-variation-add-to-cart-enabled").addClass("woocommerce-variation-add-to-cart-disabled")},t.prototype.onShow=function(t,a,i){t.preventDefault(),i?(t.data.variationForm.$form.find(".single_add_to_cart_button").removeClass("disabled wc-variation-selection-needed wc-variation-is-unavailable"),t.data.variationForm.$form.find(".woocommerce-variation-add-to-cart").removeClass("woocommerce-variation-add-to-cart-disabled").addClass("woocommerce-variation-add-to-cart-enabled")):(t.data.variationForm.$form.find(".single_add_to_cart_button").removeClass("wc-variation-selection-needed").addClass("disabled wc-variation-is-unavailable"),t.data.variationForm.$form.find(".woocommerce-variation-add-to-cart").removeClass("woocommerce-variation-add-to-cart-enabled").addClass("woocommerce-variation-add-to-cart-disabled")),wp.mediaelement&&t.data.variationForm.$form.find(".wp-audio-shortcode, .wp-video-shortcode").not(".mejs-container").filter(function(){return!$(this).parent().hasClass("mejs-mediaelement")}).mediaelementplayer(wp.mediaelement.settings)},t.prototype.onAddToCart=function(t){$(this).is(".disabled")&&(t.preventDefault(),$(this).is(".wc-variation-is-unavailable")?c.alert(wc_add_to_cart_variation_params.i18n_unavailable_text):$(this).is(".wc-variation-selection-needed")&&c.alert(wc_add_to_cart_variation_params.i18n_make_a_selection_text))},t.prototype.onResetDisplayedVariation=function(t){t=t.data.variationForm;t.$product.find(".product_meta").find(".sku").wc_reset_content(),t.$product.find(".product_weight, .woocommerce-product-attributes-item--weight .woocommerce-product-attributes-item__value").wc_reset_content(),t.$product.find(".product_dimensions, .woocommerce-product-attributes-item--dimensions .woocommerce-product-attributes-item__value").wc_reset_content(),t.$form.trigger("reset_image"),t.$singleVariation.slideUp(200).trigger("hide_variation")},t.prototype.onResetImage=function(t){t.data.variationForm.$form.wc_variations_image_update(!1)},t.prototype.onFindVariation=function(t,a){var i=t.data.variationForm,e=void 0!==a?a:i.getChosenAttributes(),t=e.data;e.count&&e.count===e.chosenCount?i.useAjax?(i.xhr&&i.xhr.abort(),i.$form.block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),t.product_id=parseInt(i.$form.data("product_id"),10),t.custom_data=i.$form.data("custom_data"),i.xhr=$.ajax({url:wc_add_to_cart_variation_params.wc_ajax_url.toString().replace("%%endpoint%%","get_variation"),type:"POST",data:t,success:function(t){t?i.$form.trigger("found_variation",[t]):(i.$form.trigger("reset_data"),e.chosenCount=0,i.loading||(i.$form.find(".single_variation").after('<p class="wc-no-matching-variations woocommerce-info">'+wc_add_to_cart_variation_params.i18n_no_matching_variations_text+"</p>"),i.$form.find(".wc-no-matching-variations").slideDown(200)))},complete:function(){i.$form.unblock()}})):(i.$form.trigger("update_variation_values"),(a=i.findMatchingVariations(i.variationData,t).shift())?i.$form.trigger("found_variation",[a]):(i.$form.trigger("reset_data"),e.chosenCount=0,i.loading||(i.$form.find(".single_variation").after('<p class="wc-no-matching-variations woocommerce-info">'+wc_add_to_cart_variation_params.i18n_no_matching_variations_text+"</p>"),i.$form.find(".wc-no-matching-variations").slideDown(200)))):(i.$form.trigger("update_variation_values"),i.$form.trigger("reset_data")),i.toggleResetLink(0<e.chosenCount)},t.prototype.onFoundVariation=function(t,a){var t=t.data.variationForm,i=t.$product.find(".product_meta").find(".sku"),e=t.$product.find(".product_weight, .woocommerce-product-attributes-item--weight .woocommerce-product-attributes-item__value"),r=t.$product.find(".product_dimensions, .woocommerce-product-attributes-item--dimensions .woocommerce-product-attributes-item__value"),o=t.$singleVariationWrap.find('.quantity input.qty[name="quantity"]'),n=o.closest(".quantity"),s=!0,c=!1,_="";a.sku?i.wc_set_content(a.sku):i.wc_reset_content(),a.weight?e.wc_set_content(a.weight_html):e.wc_reset_content(),a.dimensions?r.wc_set_content($.parseHTML(a.dimensions_html)[0].data):r.wc_reset_content(),t.$form.wc_variations_image_update(a),a.variation_is_visible?(c=d("variation-template"),a.variation_id):c=d("unavailable-variation-template"),_=(_=(_=c({variation:a})).replace("/*<![CDATA[*/","")).replace("/*]]>*/",""),t.$singleVariation.html(_),t.$form.find('input[name="variation_id"], input.variation_id').val(a.variation_id).trigger("change"),"yes"===a.is_sold_individually?(o.val("1").attr("min","1").attr("max","").trigger("change"),n.hide()):(i=parseFloat(o.val()),i=isNaN(i)||(i=i>parseFloat(a.max_qty)?a.max_qty:i)<parseFloat(a.min_qty)?a.min_qty:i,o.attr("min",a.min_qty).attr("max",a.max_qty).val(i).trigger("change"),n.show()),a.is_purchasable&&a.is_in_stock&&a.variation_is_visible||(s=!1),(t.$singleVariation.text().trim()?t.$singleVariation.slideDown(200):t.$singleVariation.show()).trigger("show_variation",[a,s])},t.prototype.onChange=function(t){t=t.data.variationForm;t.$form.find('input[name="variation_id"], input.variation_id').val("").trigger("change"),t.$form.find(".wc-no-matching-variations").remove(),t.useAjax||t.$form.trigger("woocommerce_variation_select_change"),t.$form.trigger("check_variations"),t.$form.trigger("woocommerce_variation_has_changed")},t.prototype.addSlashes=function(t){return t=(t=t.replace(/'/g,"\\'")).replace(/"/g,'\\"')},t.prototype.onUpdateAttributes=function(t){var w=t.data.variationForm,b=w.getChosenAttributes().data;w.useAjax||(w.$attributeFields.each(function(t,a){var i,e=$(a),r=e.data("attribute_name")||e.attr("name"),a=$(a).data("show_option_none"),o=":gt(0)",n=$("<select/>"),s=e.val()||"",c=!0,_=(e.data("attribute_html")||((_=e.clone()).find("option").removeAttr("attached").prop("disabled",!1).prop("selected",!1),e.data("attribute_options",_.find("option"+o).get()),e.data("attribute_html",_.html())),n.html(e.data("attribute_html")),$.extend(!0,{},b)),d=(_[r]="",w.findMatchingVariations(w.variationData,_));for(i in d)if("undefined"!=typeof d[i]){var m,l=d[i].attributes;for(m in l)if(l.hasOwnProperty(m)){var v=l[m],g="";if(m===r)if(d[i].variation_is_active&&(g="enabled"),v){var v=$("<div/>").html(v).text(),u=n.find("option");if(u.length)for(var f=0,h=u.length;f<h;f++){var p=$(u[f]);if(v===p.val()){p.addClass("attached "+g);break}}}else n.find("option:gt(0)").addClass("attached "+g)}}_=n.find("option.attached").length,s&&(c=!1,0!==_)&&n.find("option.attached.enabled").each(function(){var t=$(this).val();if(s===t)return!(c=!0)}),0<_&&s&&c&&"no"===a&&(n.find("option:first").remove(),o=""),n.find("option"+o+":not(.attached)").remove(),e.html(n.html()),e.find("option"+o+":not(.enabled)").prop("disabled",!0),s?c?e.val(s):e.val("").trigger("change"):e.val("")}),w.$form.trigger("woocommerce_update_variation_values"))},t.prototype.getChosenAttributes=function(){var i={},e=0,r=0;return this.$attributeFields.each(function(){var t=$(this).data("attribute_name")||$(this).attr("name"),a=$(this).val()||"";0<a.length&&r++,e++,i[t]=a}),{count:e,chosenCount:r,data:i}},t.prototype.findMatchingVariations=function(t,a){for(var i=[],e=0;e<t.length;e++){var r=t[e];this.isMatch(r.attributes,a)&&i.push(r)}return i},t.prototype.isMatch=function(t,a){var i,e,r,o=!0;for(i in t)t.hasOwnProperty(i)&&(e=t[i],r=a[i],e!==n)&&r!==n&&0!==e.length&&0!==r.length&&e!==r&&(o=!1);return o},t.prototype.toggleResetLink=function(t){t?"hidden"===this.$resetVariations.css("visibility")&&this.$resetVariations.css("visibility","visible").hide().fadeIn():this.$resetVariations.css("visibility","hidden")},$.fn.wc_variation_form=function(){return new t(this),this},$.fn.wc_set_content=function(t){n===this.attr("data-o_content")&&this.attr("data-o_content",this.text()),this.text(t)},$.fn.wc_reset_content=function(){n!==this.attr("data-o_content")&&this.text(this.attr("data-o_content"))},$.fn.wc_set_variation_attr=function(t,a){n===this.attr("data-o_"+t)&&this.attr("data-o_"+t,this.attr(t)?this.attr(t):""),!1===a?this.removeAttr(t):this.attr(t,a)},$.fn.wc_reset_variation_attr=function(t){n!==this.attr("data-o_"+t)&&this.attr(t,this.attr("data-o_"+t))},$.fn.wc_maybe_trigger_slide_position_reset=function(t){var a=$(this),i=a.closest(".product").find(".images"),e=!1,t=t&&t.image_id?t.image_id:"";a.attr("current-image")!==t&&(e=!0),a.attr("current-image",t),e&&i.trigger("woocommerce_gallery_reset_slide_position")},$.fn.wc_variations_image_update=function(t){var a=this,i=a.closest(".product"),e=i.find(".images"),i=i.find(".flex-control-nav"),r=i.find("li:eq(0) img"),o=e.find(".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0),n=o.find(".wp-post-image"),s=o.find("a").eq(0);if(t&&t.image&&t.image.src&&1<t.image.src.length){0<i.find('li img[data-o_src="'+t.image.gallery_thumbnail_src+'"]').length&&a.wc_variations_image_reset();i=i.find('li img[src="'+t.image.gallery_thumbnail_src+'"]');if(0<i.length)return i.trigger("click"),a.attr("current-image",t.image_id),void c.setTimeout(function(){$(c).trigger("resize"),e.trigger("woocommerce_gallery_init_zoom")},20);n.wc_set_variation_attr("src",t.image.src),n.wc_set_variation_attr("height",t.image.src_h),n.wc_set_variation_attr("width",t.image.src_w),n.wc_set_variation_attr("srcset",t.image.srcset),n.wc_set_variation_attr("sizes",t.image.sizes),n.wc_set_variation_attr("title",t.image.title),n.wc_set_variation_attr("data-caption",t.image.caption),n.wc_set_variation_attr("alt",t.image.alt),n.wc_set_variation_attr("data-src",t.image.full_src),n.wc_set_variation_attr("data-large_image",t.image.full_src),n.wc_set_variation_attr("data-large_image_width",t.image.full_src_w),n.wc_set_variation_attr("data-large_image_height",t.image.full_src_h),o.wc_set_variation_attr("data-thumb",t.image.src),r.wc_set_variation_attr("src",t.image.gallery_thumbnail_src),s.wc_set_variation_attr("href",t.image.full_src)}else a.wc_variations_image_reset();c.setTimeout(function(){$(c).trigger("resize"),a.wc_maybe_trigger_slide_position_reset(t),e.trigger("woocommerce_gallery_init_zoom")},20)},$.fn.wc_variations_image_reset=function(){var t=this.closest(".product"),a=t.find(".images"),t=t.find(".flex-control-nav").find("li:eq(0) img"),a=a.find(".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0),i=a.find(".wp-post-image"),e=a.find("a").eq(0);i.wc_reset_variation_attr("src"),i.wc_reset_variation_attr("width"),i.wc_reset_variation_attr("height"),i.wc_reset_variation_attr("srcset"),i.wc_reset_variation_attr("sizes"),i.wc_reset_variation_attr("title"),i.wc_reset_variation_attr("data-caption"),i.wc_reset_variation_attr("alt"),i.wc_reset_variation_attr("data-src"),i.wc_reset_variation_attr("data-large_image"),i.wc_reset_variation_attr("data-large_image_width"),i.wc_reset_variation_attr("data-large_image_height"),a.wc_reset_variation_attr("data-thumb"),t.wc_reset_variation_attr("src"),e.wc_reset_variation_attr("href")},$(function(){"undefined"!=typeof wc_add_to_cart_variation_params&&$(".variations_form").each(function(){$(this).wc_variation_form()})}),{find_matching_variations:function(t,a){for(var i=[],e=0;e<t.length;e++){var r=t[e];o.variations_match(r.attributes,a)&&i.push(r)}return i},variations_match:function(t,a){var i,e,r,o=!0;for(i in t)t.hasOwnProperty(i)&&(e=t[i],r=a[i],e!==n)&&r!==n&&0!==e.length&&0!==r.length&&e!==r&&(o=!1);return o}}),d=function(t){var a=i.getElementById("tmpl-"+t).textContent;return/<#\s?data\./.test(a)||/{{{?\s?data\.(?!variation\.).+}}}?/.test(a)||/{{{?\s?data\.variation\.[\w-]*[^\s}]/.test(a)?wp.template(t):function(t){var r=t.variation||{};return a.replace(/({{{?)\s?data\.variation\.([\w-]*)\s?(}}}?)/g,function(t,a,i,e){return a.length!==e.length?"":(e=r[i]||"",2===a.length?c.escape(e):e)})}}}(jQuery,window,document);
jQuery(document).ready(function(){if(navigator.vendor&&navigator.vendor.indexOf('Apple')>-1&&navigator.userAgent.indexOf("Safari")!=-1&&navigator.userAgent.indexOf("CriOS")==-1){jQuery('#nbd-chat-app').addClass('safari');}
if((jQuery('#triggerDesign').length>0||jQuery('#startDesign').length>0||jQuery('#startUpload').length>0)&&nbds_frontend.hide_cart_button=='yes'){jQuery('button[type="submit"].single_add_to_cart_button').hide();};jQuery('#startUpload').on('click',function(){jQuery('body, html').addClass('nbd-prevent-scroll');jQuery('#container-online-designer').addClass('is-visible');jQuery('.nbd-popup-wrap').addClass('is-hidden');jQuery('#nbd-m-upload-design-wrap').addClass('is-visible');});jQuery('#startDesign').on('click',function(){jQuery('body, html').addClass('nbd-prevent-scroll');jQuery('#container-online-designer').addClass('is-visible');jQuery('.nbd-popup-wrap').addClass('is-hidden');if(!nbd_append_iframe){var iframe_src=jQuery('#container-online-designer').attr('data-iframe');if(jQuery('form input[name="variation_id"]').length){iframe_src=addParameter(iframe_src,'variation_id',jQuery('form input[name="variation_id"]').val(),false);}
jQuery('#nbd-m-custom-design-wrap').prepend('<iframe id="onlinedesigner-designer"  width="100%" height="100%" scrolling="no" frameborder="0" noresize="noresize" allowfullscreen mozallowfullscreen="true" webkitallowfullscreen="true" src="'+iframe_src+'"></iframe>');nbd_append_iframe=true;}
jQuery('#nbd-m-custom-design-wrap').addClass('is-visible');});var width=jQuery(window).innerWidth();var height=jQuery(window).height();var w=-width;var h=-height;var nbd_append_iframe=false,enableAdvancedUpload=false;var showDesignFrame=function(){jQuery('body, html').addClass('nbd-prevent-scroll');if(nbd_layout=='c'){if(!nbd_append_iframe){var iframe_src=jQuery('#container-online-designer').attr('data-iframe');if(jQuery('form input[name="variation_id"]').length){iframe_src=addParameter(iframe_src,'variation_id',jQuery('form input[name="variation_id"]').val(),false);}
jQuery('#nbd-custom-design-wrap').prepend('<iframe id="onlinedesigner-designer"  width="100%" height="100%" scrolling="no" frameborder="0" noresize="noresize" allowfullscreen mozallowfullscreen="true" webkitallowfullscreen="true" src="'+iframe_src+'"></iframe>');nbd_append_iframe=true;}}else{if(is_nbd_upload_without_design){jQuery('#nbd-m-upload-design-wrap').addClass('is-visible');if(nbu_advanced_upload=='1'){enableAdvancedUpload=true;}}else if(is_nbd_upload==0&&use_our_template==0&&hide_us_design_for_you==0){if(!nbd_append_iframe){var iframe_src=jQuery('#container-online-designer').attr('data-iframe');if(jQuery('form input[name="variation_id"]').length){iframe_src=addParameter(iframe_src,'variation_id',jQuery('form input[name="variation_id"]').val(),false);}
jQuery('#nbd-m-custom-design-wrap').prepend('<iframe id="onlinedesigner-designer"  width="100%" height="100%" scrolling="no" frameborder="0" noresize="noresize" allowfullscreen mozallowfullscreen="true" webkitallowfullscreen="true" src="'+iframe_src+'"></iframe>');nbd_append_iframe=true;}
jQuery('#nbd-m-custom-design-wrap').addClass('is-visible');}};jQuery('#container-online-designer').addClass('is-visible');};jQuery('#triggerDesign, #startDesign').on('click',function(){if(jQuery(this).hasClass('nbdesigner_disable')){alert(nbds_frontend.check_invalid_fields);}else{showDesignFrame();var frame=document.getElementById('onlinedesigner-designer');if(frame){frame.contentWindow.postMessage('change_nbo_options',window.location.origin);}}});jQuery('#closeFrameDesign').on('click',function(){if(enableAdvancedUpload){jQuery(document).triggerHandler('close_advanced_upload_popup');return;}
hideDesignFrame();});jQuery('#nbd__content__overlay').on('click',function(event){if(event.target.id=='nbd__content__overlay'){hideDesignFrame();}});jQuery('#open_m-custom-design-wrap').on('click',function(event){jQuery('.nbd-popup-wrap').addClass('is-hidden');if(!nbd_append_iframe){var iframe_src=jQuery('#container-online-designer').attr('data-iframe');if(jQuery('form input[name="variation_id"]').length){iframe_src=addParameter(iframe_src,'variation_id',jQuery('form input[name="variation_id"]').val(),false);}
jQuery('#nbd-m-custom-design-wrap').prepend('<iframe id="onlinedesigner-designer"  width="100%" height="100%" scrolling="no" frameborder="0" noresize="noresize" allowfullscreen mozallowfullscreen="true" webkitallowfullscreen="true" src="'+iframe_src+'"></iframe>');nbd_append_iframe=true;}
jQuery('#nbd-m-custom-design-wrap').addClass('is-visible');});jQuery('#open_m-upload-design-wrap').on('click',function(event){jQuery('.nbd-popup-wrap').addClass('is-hidden');jQuery('#nbd-m-upload-design-wrap').addClass('is-visible');if(nbu_advanced_upload=='1'){enableAdvancedUpload=true;}});backtoOption=function(){jQuery('#nbd-m-upload-design-wrap').removeClass('is-visible');jQuery('#nbd-m-custom-design-wrap').removeClass('is-visible');jQuery('.nbd-popup-wrap').removeClass('is-hidden');};hideDesignFrame=function(mes){jQuery('body, html').removeClass('nbd-prevent-scroll');jQuery('#container-online-designer').removeClass('is-visible');backtoOption();if(mes!=null){setTimeout(function(){alert(mes);},700);}
enableAdvancedUpload=false;NBDESIGNERPRODUCT.scrollToAddToCart();};hideUploadFrame=function(){if(jQuery('.upload-design-preview img').length>0){if(nbds_frontend.auto_add_cart=='yes'&&nbds_frontend.page_design_tool==1&&nbds_frontend.edit_option_mode!=1){var product_id=jQuery('[name="nbd-add-to-cart"]').attr('value');jQuery('.variations_form, form.cart').append('<input name="add-to-cart" type="hidden" value="'+product_id+'" />');jQuery('.variations_form, form.cart').append('<input name="nbd-auto-add-to-cart-in-detail-page" type="hidden" value="1" />');jQuery('.variations_form, form.cart').submit();return;}}
hideDesignFrame();};show_upload_thumb=function(arr){if(arr.length){jQuery('#nbdesigner-upload-title').show();}else{jQuery('#nbdesigner-upload-title').hide();};var html='';var d=new Date();jQuery.each(arr,function(key,val){html+='<div class="img-con" style=\"display: inline-block; margin-right: 15px;\"><img src="'+val.src+'?t='+d.getTime()+'" style=\"width: 100px;\"/><p class="nbd-file-title">'+val.name+'</p></div>'});jQuery('#nbdesigner_upload_preview').html('').append(html);};jQuery('#nbdesign-new-template').on('click',function(){showDesignFrame();});jQuery(window).on('resize',function(){var width=jQuery(window).width(),height=jQuery(window).height();});jQuery('.nbd-order-download-pdf-action').each(function(index){var download_pdf=jQuery(this),loading_src=download_pdf.attr('data-loading-img'),download_action=download_pdf.attr('data-action');download_pdf.prepend('<span class="nbd-loading"><img class="nbd-pdf-loading hide" src="'+loading_src+'"/></span>');download_pdf.on('click',function(e){download_action=='download_pdf_in_order'?NBDESIGNERPRODUCT.download_pdf_in_order(e,jQuery(this)):NBDESIGNERPRODUCT.nbd_download_final_pdf(e,jQuery(this));});});jQuery('.nbd-pdf-options').show();jQuery.each(jQuery('.nbd-order-item-download-section'),function(index,value){var self=jQuery(this),link=self.attr('data-href'),download_title=self.attr('data-title'),type=JSON.parse(self.attr('data-type')),type_len=0
op_el='<select onchange="NBDESIGNERPRODUCT.change_nbd_download_type( this )">';jQuery.each(type,function(index,value){op_el+='<option value="'+index+'">'+value+'</option>';type_len++;});op_el+='</select>';if(type_len){self.append(op_el);self.append('<a class="button nbd-order-download-file" href="'+link+'&type='+Object.keys(type)[0]+'">'+download_title+'</a>');self.show()};});var nbdDropArea=jQuery('label[for="nbd-file-upload"]'),nbdInput=jQuery('#nbd-file-upload');var listFileUpload=[];['dragenter','dragover'].forEach(function(eventName){nbdDropArea.on(eventName,highlight)});['dragleave','drop'].forEach(function(eventName){nbdDropArea.on(eventName,unhighlight)});function highlight(e){e.preventDefault();e.stopPropagation();nbdDropArea.addClass('highlight');};function unhighlight(e){e.preventDefault();e.stopPropagation();nbdDropArea.removeClass('highlight');};nbdDropArea.on('drop',handleDrop);function handleDrop(e){if(jQuery('#accept-term').length&&!jQuery('#accept-term').is(':checked')){alert(NBDESIGNCONFIG.nbdlangs.alert_upload_term);return;}else{if(e.originalEvent.dataTransfer){if(e.originalEvent.dataTransfer.files.length){e.preventDefault();e.stopPropagation();handleFiles(e.originalEvent.dataTransfer.files);}}}};nbdInput.on('click',function(e){e.stopPropagation();});nbdInput.on('change',function(){handleFiles(this.files);});function resetUploadInput(){nbdInput.val('');}
function handleFiles(files){if(files.length>0)uploadFile(files);}
function uploadFile(files){var file=files[0],type=file.type.toLowerCase();if(listFileUpload.length>(nbd_number-1)){alert('Exceed number of upload files!');return;}
type=file.name.substring(file.name.lastIndexOf('.')+1).toLowerCase();type=type=='image/jpeg'?'image/jpg':type;if(nbd_disallow_type!=''){var nbd_disallow_type_arr=nbd_disallow_type.toLowerCase().split(',');var check=false;nbd_disallow_type_arr.forEach(function(value){value=value=='jpeg'?'jpg':value;if(type.indexOf(value)>-1){check=true;}});if(check){resetUploadInput();alert('Disallow extensions: '+nbd_disallow_type);return;}}
if(nbd_allow_type!=''){var nbd_allow_type_arr=nbd_allow_type.toLowerCase().split(',');var check=false;nbd_allow_type_arr.forEach(function(value){value=value=='jpeg'?'jpg':value;if(type.indexOf(value)>-1){check=true;}});if(!check){resetUploadInput();alert('Only support: '+nbd_allow_type);return;}}
if(file.size>nbd_maxsize*1024*1024){alert('Max file size'+nbd_maxsize+" MB");resetUploadInput();return;}else if(file.size<nbd_minsize*1024*1024){alert('Min file size'+nbd_minsize+" MB");resetUploadInput();return;};var formData=new FormData;formData.append('file',file);jQuery('.nbd-upload-loading').addClass('is-visible');jQuery('.upload-zone label').addClass('is-loading');jQuery('.nbd-m-upload-design-wrap').addClass('is-loading');var first_time=listFileUpload.length>0?2:1;var product_id=jQuery('[name="nbd-add-to-cart"]').attr('value');var variation_id=jQuery('[name="variation_id"]').length>0?jQuery('[name="variation_id"]').attr('value'):0;formData.append('first_time',first_time);formData.append('action','nbd_upload_design_file');formData.append('task','new');formData.append('product_id',product_id);formData.append('variation_id',variation_id);formData.append('nonce',nbds_frontend.nonce);jQuery.ajax({url:nbds_frontend.url,method:"POST",dataType:'json',cache:false,contentType:false,processData:false,data:formData,complete:function(){jQuery('.nbd-upload-loading').removeClass('is-visible');jQuery('.upload-zone label').removeClass('is-loading');jQuery('.nbd-m-upload-design-wrap').removeClass('is-loading');},success:function(data){if(data.flag==1){listFileUpload.push({src:data.src,name:data.name});buildPreviewUpload();}else{alert(data.mes);}
resetUploadInput();}});}
window.removeUploadFile=function(index){listFileUpload.splice(index,1);resetUploadInput();buildPreviewUpload();};function buildPreviewUpload(){show_upload_thumb(listFileUpload);NBDESIGNERPRODUCT.update_nbu_value(listFileUpload);jQuery('input[name="nbu-ignore-update"]').remove();jQuery('input[name="nbu-reserve"]').remove();var html='';listFileUpload.forEach(function(file,index){html+='<div class="nbd-upload-items"><div class="nbd-upload-items-inner"><img src="'+file.src+'" class="shadow nbd-upload-item"/><p class="nbd-upload-item-title">'+file.name+'</p><span class="shadow" onclick="removeUploadFile('+index+')" >&times;</span></div></div>';});jQuery('.upload-design-preview').html(html);if(nbds_frontend.hide_cart_button=='yes')jQuery('button[type="submit"].single_add_to_cart_button').show();}
NBDESIGNERPRODUCT.nbdesigner_ready();jQuery('form input[name="variation_id"]').on('change',function(){var _this=jQuery(this);if(_this.val()>0&&_this.parents('form').find('#triggerDesign').length){NBDESIGNERPRODUCT.nbdesigner_ready();}else{_this.parents('form').find('#triggerDesign').addClass('nbdesigner_disable');}});jQuery.fn.showAlert=function(){return this.each(function(){var sefl=this;var $close=jQuery(this).find('.overlay-popup, .close-popup');jQuery('body').addClass('nbd-prevent-scroll');if(!jQuery(this).hasClass('nb-show')){jQuery(this).addClass('nb-show');}
$close.on('click',function(){jQuery(sefl).removeClass('nb-show');jQuery('body').removeClass('nbd-prevent-scroll');});});};jQuery.fn.showNBDPopup=function(){return this.each(function(){var sefl=this;jQuery('body').addClass('nbd-prevent-scroll');if(!jQuery(this).hasClass('nb-show')){jQuery(this).addClass('nb-show');}
jQuery(this).on('click',function(event){var target=jQuery(event.target);if(target.is(jQuery(sefl).find('.popup-inner'))){jQuery(sefl).removeClass('nb-show');jQuery('body').removeClass('nbd-prevent-scroll');}});});};jQuery.fn.nbqShowPopup=function(){return this.each(function(){var sefl=jQuery(this),$close=jQuery(this).find('.overlay-popup, .close-popup'),main_pop=jQuery(this).find('.main-popup');if(!jQuery(this).hasClass('nb-show')){jQuery(this).addClass('nb-show');}
sefl.css({height:jQuery(document).height(),width:jQuery(window).width()});main_pop.css({top:jQuery(document).scrollTop()+100,left:(jQuery(window).width()-main_pop.width())/2});$close.on('click',function(){sefl.removeClass('nb-show').css({height:'auto'});main_pop.css({top:'auto'});});});};var _nbd_stored_design=false,_nbd_prevent_ajax=false;function nbd_form_submit(e,container){var wrapper=(typeof container!='undefined')?container+' ':'';if(window.preventSubmitFormCart&&!_nbd_stored_design){e.preventDefault();jQuery(jQuery(this).parents('form')).addClass('processing').block({message:null,overlayCSS:{background:'#fff',opacity:0.6}});var scope=angular.element(document.getElementById("designer-controller")).scope();scope.saveData();return false;}else if(nbds_frontend.ajax_cart=='yes'&&!_nbd_prevent_ajax){e.preventDefault();var formData=new FormData();cartForm=jQuery(wrapper+'form.cart, '+wrapper+'form.variations_form'),cartFormData=cartForm.serializeArray();jQuery.each(cartFormData,function(i,val){if(val.name){var new_name=val.name=='add-to-cart'?'nbd-add-to-cart':val.name;formData.append(new_name,val.value);}});if(typeof cartFormData['nbd-add-to-cart']=='undefined'){formData.append('nbd-add-to-cart',cartForm.find('[name="add-to-cart"]').val());}
jQuery.each(cartForm.find("input[type='file']"),function(i,tag){jQuery.each(jQuery(tag)[0].files,function(i,file){formData.append(tag.name,file);});});nbo_ajax_cart(formData,function(){cartForm.addClass('processing').block({message:null,overlayCSS:{background:'#fff',opacity:0.6}});},function(){cartForm.removeClass('processing').unblock();});return false;}
return true;};function nbo_ajax_cart(form,beFunc,comFunc){jQuery.ajax({url:nbds_frontend.url+'?action=nbo_ajax_cart',type:'POST',dataType:'json',data:form,contentType:false,processData:false,beforeSend:function(){if(typeof beFunc=='function')beFunc();},complete:function(){if(typeof comFunc=='function')comFunc();},success:function(response){if('success'===response.result){if(typeof response.redirect!='undefined'){window.location.href=response.redirect;}else{jQuery('#nbd-ajax-cart-alert-content').html(response.messages);if(response.result=='success'){jQuery('#nbd-ajax-cart-alert-title .failure').hide();}else{jQuery('#nbd-ajax-cart-alert-title .success').hide();}
if(jQuery('#nbo-quick-view-popup').length){jQuery('#nbo-quick-view-popup').find('.close-popup').triggerHandler('click');}
jQuery('#nbd-ajax-cart-alert').showAlert();if(response.data.fragments){var fragments=response.data.fragments;jQuery.each(fragments,function(key){jQuery(key).addClass('updating').fadeTo('400','0.6').block({message:null,overlayCSS:{opacity:0.6}});});jQuery.each(fragments,function(key,value){jQuery(key).replaceWith(value);jQuery(key).stop(true).css('opacity','1').unblock();});if(nbds_frontend.show_favicon_badge=='yes'&&nbds_frontend.is_mobile!=1){try{var nbd_favicon=nbd_favicon||new Favico({animation:'slide'});if(fragments&&fragments['nbo_cart_item_count']){var badge=parseInt(fragments['nbo_cart_item_count']);nbd_favicon.badge(badge);}}catch(err){console.log(err);}}}}}
if('failure'===response.result){alert(response.messages);}}});};function nbo_quick_view(product_id,beFunc,comFunc){jQuery.ajax({url:nbds_frontend.nbo_qv_url+'&product='+product_id,type:'GET',beforeSend:function(){if(typeof beFunc=='function')beFunc();},complete:function(){if(typeof comFunc=='function')comFunc();},success:function(response){if(response){jQuery('#nbo-quick-view-popup .nbdq-popup-body').html(response);jQuery(document).triggerHandler('quick-view-displayed');jQuery('#nbo-quick-view-popup form .single_add_to_cart_button').on('click',function(e){nbd_form_submit(e,'#nbo-quick-view-popup');});setTimeout(function(){if(jQuery('#nbo-quick-view-popup .variations_form').length){jQuery('#nbo-quick-view-popup .variations_form').wc_variation_form();jQuery('#nbo-quick-view-popup .variations_form').trigger('wc_variation_form');jQuery('#nbo-quick-view-popup .variations_form .variations select').change();}
jQuery('#nbo-quick-view-popup').nbqShowPopup();});}}});};jQuery('form .single_add_to_cart_button').on('click',function(e){nbd_form_submit(e);});jQuery('.variations_form, form.cart').on('submit',function(e){nbd_form_submit(e);});jQuery(document).on('nbd_design_stored',function(e,data){_nbd_stored_design=true;if(data._type!='quote'){if(typeof data.prevent_ajax!='undefined'){_nbd_prevent_ajax=true;}
jQuery('.variations_form, form.cart').submit();}});NBDESIGNERPRODUCT.qty=jQuery('input[name="quantity"]').val();jQuery('input[name="quantity"]').on('change',function(){NBDESIGNERPRODUCT.qty=jQuery('input[name="quantity"]').val();var frame=document.getElementById('onlinedesigner-designer');if(frame){}});jQuery('.nbo_ajax_add_to_cart').on('click',function(e){e.preventDefault();var self=jQuery(this),product_id=self.attr('data-product_id');if(self.hasClass('nbo_need_qv')){nbo_quick_view(product_id,function(){self.addClass('processing').block({message:null,overlayCSS:{background:'#fff',opacity:0.6}});},function(){self.removeClass('processing').unblock();});}else{var formData=new FormData();formData.append('nbd-add-to-cart',product_id);nbo_ajax_cart(formData,function(){self.addClass('processing').block({message:null,overlayCSS:{background:'#fff',opacity:0.6}});},function(){self.removeClass('processing').unblock();});}});jQuery('li.nbd-catalog-option img').on('click',function(e){e.preventDefault();var pid=jQuery(this).parents('.nbd-catalog-option').find('a[data-product_id]').first().attr('data-product_id'),permalink=jQuery(this).parents('.nbd-catalog-option').find('a.woocommerce-LoopProduct-link').first().attr('href');jQuery('.nbco-option-design-link').attr('href',nbds_frontend.create_design_url+'?product_id='+pid);jQuery('.nbco-option-hire-link').attr('href',permalink+'request-design');jQuery('.nbco-option-upload-link').attr('href',permalink+'upload-design');jQuery('#nbd-catalog-option-popup').nbqShowPopup();});jQuery('.nbo-swatch, .nbo-swatch-label-wrap').on('mouseenter',function(){var self=jQuery(this),srcset=self.attr('data-srcset'),src=self.attr('data-src'),wrap=self.parents('.nbo-archive-swatches-wrap');if(typeof srcset!='undefined'&&srcset!==false){var image=self.parents('li.product').find('.woocommerce-LoopProduct-link > img');var wrap_src=wrap.attr('data-origin-src');if(typeof wrap_src=='undefined'||wrap_src==false){wrap.attr('data-origin-src',image.attr('src'));wrap.attr('data-origin-srcset',image.attr('srcset'));}
image.attr('src',src);image.attr('data-lazy-srcset',src);image.attr('srcset',srcset);image.attr('data-lazy-srcset',srcset);}});jQuery('.nbo-archive-swatches-wrap').on('mouseleave',function(){var self=jQuery(this),srcset=self.attr('data-origin-srcset'),src=self.attr('data-origin-src');if(typeof srcset!='undefined'&&srcset!==false){var image=self.parents('li.product').find('.woocommerce-LoopProduct-link > img');image.attr('src',src);image.attr('data-lazy-srcset',src);image.attr('srcset',srcset);image.attr('data-lazy-srcset',srcset);}});jQuery.fn.nbdsSlider=function(){return this.each(function(){var $sefl=jQuery(this),slider=$sefl.find('.studio-product-templates-slider'),totalWidth=$sefl.find('.template-item').length*130,wrapWidth=$sefl.width();if(wrapWidth>totalWidth){$sefl.find('.nav').remove();}
$sefl.find('.next').on('click',function(){var active=parseInt($sefl.attr('data-active'));if((wrapWidth*(active+1))<totalWidth){slider.css({transform:'translateX(-'+(wrapWidth*(active+1))+'px)'});$sefl.attr('data-active',active+1);$sefl.find('.prev').removeClass('nbds-disable');if((wrapWidth*(active+2))>totalWidth){jQuery(this).addClass('nbds-disable');}}else{jQuery(this).addClass('nbds-disable');}});$sefl.find('.prev').on('click',function(){var active=parseInt($sefl.attr('data-active'));if(active>0){slider.css({transform:'translateX(-'+(wrapWidth*(active-1))+'px)'});$sefl.attr('data-active',active-1);$sefl.find('.next').removeClass('nbds-disable');if(active==1){jQuery(this).addClass('nbds-disable');}}else{jQuery(this).addClass('nbds-disable');}});});};jQuery('.studio-product-wrap .product-img').on('click',function(){var self=jQuery(this),product_el=self.parents('.studio-product'),templates_wrap=product_el.find('.studio-product-templates'),templates_inner=templates_wrap.find('.studio-product-templates-inner'),product_id=product_el.attr('data-id'),wraper_el=product_el.parent('.studio-product-wrap');wraper_el.find('.studio-product').removeClass('open-collapse');if(product_el.attr('data-collapse')=='1'){product_el.attr('data-collapse','0');}else{product_el.addClass('open-collapse');wraper_el.find('.studio-product').attr('data-collapse','0');product_el.attr('data-collapse','1');function show_template(){templates_wrap.css({'transform':'translateX(-'+(product_el.offset().left+16)+'px)'});templates_inner.css({'width':wraper_el.width()+'px'});jQuery('html, body').animate({scrollTop:templates_wrap.offset().top-200},300);}
function render_templates(templates){var has_template=false;jQuery.each(templates,function(index,template){var temp_html='<div class="template-item">';temp_html+='<a href="'+template.url+'"><img src="'+template.preview+'"/></a>';temp_html+='</div>';templates_inner.find('.studio-product-templates-slider').append(temp_html);has_template=true;templates_inner.find('.no-template').remove();});templates_wrap.find('.loading-wrap').removeClass('show');setTimeout(function(){if(has_template){jQuery('.nav').show();templates_inner.nbdsSlider();}else{templates_inner.find('.no-template').show();}},300);}
function get_template(callback){jQuery.ajax({url:nbds_frontend.url,method:"POST",data:{action:'nbds_get_product_template',product_id:product_id,nonce:nbds_frontend.nonce}}).done(function(data){if(data.templates){product_el.attr('data-template','1');render_templates(data.templates);}
if(typeof callback=='function'){callback();}});}
if(product_el.attr('data-template')=='0'){templates_wrap.find('.loading-wrap').addClass('show');get_template();}
show_template();}});jQuery('.studio-widget-img-wrap .product-img').on('click',function(){var self=jQuery(this),product_el=self.parents('.studio-widget-product'),product_id=product_el.attr('data-id'),templates_wrap=self.parents('.studio-widget-product-wrap').next('.studio-widget-templates-wrap'),templates_inner=templates_wrap.find('.studio-widget-templates');templates_inner.html('');templates_wrap.show();templates_wrap.find('.loading-wrap').addClass('show');function get_template(callback){jQuery.ajax({url:nbds_frontend.url,method:"POST",data:{action:'nbds_get_product_template',product_id:product_id,nonce:nbds_frontend.nonce}}).done(function(data){if(data.templates){templates_wrap.find('.loading-wrap').removeClass('show');if(data.templates.length==0){templates_wrap.find('.no-template').show();}else{templates_wrap.find('.no-template').hide();}
render_templates(data.templates);}
if(typeof callback=='function'){callback();}});}
function render_templates(templates){jQuery.each(templates,function(index,template){var temp_html='<div class="template-item">';temp_html+='<a href="'+template.url+'"><img src="'+template.preview+'"/></a>';temp_html+='</div>';templates_inner.append(temp_html);});}
get_template();});jQuery(document).on('click','#nbrq_checkout_quote_btn',function(e){jQuery('#nbrq_checkout_quote').val('1');});jQuery('.nbd-tag-list-item, .nbd-color-list-item-inner').on('click',function(e){var val=jQuery(this).data('value')+'',type=jQuery(this).data('type'),url=new URL(window.location.href),current_val=url.searchParams.get(type);if(current_val!==null){current_val_arr=current_val.split(',');if(current_val_arr.includes(val)){val=current_val;}else{val=current_val+','+val;}}
var link=addParameter(window.location.href,type,val,false);link=removeParam('paged',link);window.location=link;e.preventDefault();});jQuery('.nbd-filter-tag-remove').on('click',function(e){type=jQuery(this).data('type'),val=jQuery(this).data('value')+'',url=new URL(window.location.href),current_val=url.searchParams.get(type);if(current_val!==null){current_val_arr=current_val.split(',');var paramIndex=current_val_arr.indexOf(val);if(paramIndex>-1){current_val_arr.splice(paramIndex,1);val=current_val_arr.join(',');}else{val=current_val;}}
var link;if(val==''||type=='search'){link=removeParam(type,window.location.href);if(type=='search'){link=removeParam('search_type',link);}}else{link=addParameter(window.location.href,type,val,false);}
link=removeParam('paged',link);window.location=link;e.preventDefault();});jQuery('.nbd-gallery-filter-clear').on('click',function(e){var link=removeParam('tag',window.location.href);link=removeParam('color',link);link=removeParam('paged',link);link=removeParam('search',link);link=removeParam('search_type',link);window.location=link;e.preventDefault();});jQuery('.nbu_arc_trigger_pop').on('click',function(e){e.preventDefault();jQuery('body, html').addClass('nboo-prevent-scroll');jQuery('#nboo-option-popup').addClass('is-visible');var product_id=jQuery(this).attr('data-product_id'),product_name=jQuery(this).parents('.product').find('.woocommerce-loop-product__title').text(),layout=jQuery(this).attr('data-layout'),linkStartDesign=addParameter(nboo_design_url,'product_id',product_id),linkStartUpload=addParameter(nboo_upload_url,'product_id',product_id);if(layout=='v'){linkStartDesign=jQuery(this).attr('href');};jQuery('#nboo-product-name').text(product_name);jQuery('#nboo-open_m-custom-design-wrap').attr('data-url',linkStartDesign);jQuery('#nboo-open_m-upload-design-wrap').attr('data-url',linkStartUpload);});jQuery('#nboo-option-popup').on('click',function(event){if(event.target.id=='nboo-option-popup-overlay'){jQuery('body, html').removeClass('nboo-prevent-scroll');jQuery('#nboo-option-popup').removeClass('is-visible');}});jQuery('#nboo-open_m-custom-design-wrap, #nboo-open_m-upload-design-wrap').on('click',function(event){window.location=jQuery(this).attr('data-url');});jQuery.fn.nbd_template=function(template,obj){var $template_html=template(obj);$template_html=$template_html.replace('/*<![CDATA[*/','');$template_html=$template_html.replace('/*]]>*/','');return $template_html;}
if(typeof wp=='object'&&typeof wp.template=='function'&&jQuery('script[id="tmpl-nbdl-search-bar"]').length>0){jQuery(jQuery.fn.nbd_template(wp.template('nbdl-search-bar'),{})).insertAfter(jQuery(".nbd-gallery h1.entry-title"));}
function nbdlSearchTemplate(type,value){value=typeof value!='undefined'?value:jQuery('#nbdl-search-content').val();type=typeof type!='undefined'?type:jQuery('#nbdl-search-type li.active').attr('data-value');var url=new URL(window.location.href),query_string=url.search,search_params=new URLSearchParams(query_string);if(value!=''){search_params.set('search',value);if(type!=''){search_params.set('search_type',type);}else{search_params.delete('search_type');}}else{search_params.delete('search');search_params.delete('search_type');}
search_params.delete('paged');url.search=search_params.toString();var link=url.toString();window.location=link;}
setTimeout(function(){jQuery('.nbdl-search-type-selected, .nbdl-search-type-wrap svg').on('click',function(){jQuery('#nbdl-search-type').toggleClass('active');});jQuery('#nbdl-search-type li').on('click',function(){var self=jQuery(this);jQuery('#nbdl-search-type li').removeClass('active');self.addClass('active');jQuery('.nbdl-search-type-selected').html(self.html());jQuery('#nbdl-search-type').removeClass('active');});jQuery('#nbdl-search-content').on("keyup",function(event){if(event.keyCode===13){event.preventDefault();nbdlSearchTemplate();}});jQuery('.nbdl-search-content-wrap svg').on('click',function(){nbdlSearchTemplate();});document.addEventListener("click",function(event){if(event.target.closest('.nbdl-search-type-wrap'))return;jQuery('#nbdl-search-type').removeClass('active');});});if(nbds_frontend.show_favicon_badge=='yes'&&nbds_frontend.is_mobile!=1){var nbd_favicon=nbd_favicon||new Favico({animation:'slide'});jQuery(document.body).on('wc_fragments_refreshed',function(){try{var wc_fragments=jQuery.parseJSON(sessionStorage.getItem(wc_cart_fragments_params.fragment_name));if(wc_fragments&&wc_fragments['nbo_cart_item_count']){var badge=parseInt(wc_fragments['nbo_cart_item_count']);nbd_favicon.badge(badge);}}catch(err){console.log(err);}});}
jQuery('.nbd-faq-head').on('click',function(){jQuery(this).parent('.nbd-faq-wrap').toggleClass('active');});function nbd_remove_design(){jQuery('.nbd-cart-item-remove-design, .nbd-cart-item-remove-file').off('click').on('click',function(e){e.preventDefault();var type=jQuery(this).attr('data-type'),cart_item_key=jQuery(this).attr('data-cart-item');NBDESIGNERPRODUCT.remove_design(type,cart_item_key);});}
nbd_remove_design();jQuery(document.body).on('wc_fragments_refreshed',function(){nbd_remove_design();});jQuery('.woocommerce-form-login, .woocommerce-form-register').on('submit',function(){window.parent.jQuery(window.parent.document).triggerHandler('nbd_redirect_login');return true;});});(function($,window){$.fn.nbdlNav=function(options){var defaults={};var opts=$.extend({},defaults,options);return this.each(function(){var $tabs=$(this).find('.nbdl-toggle'),$panels=$(this).find('.nbdl-toggle-panel');$tabs.on('click',function(e){e.preventDefault();var targetId=$(this).attr('data-target');$tabs.removeClass('active');$panels.removeClass('active');$(this).addClass('active');$('#'+targetId).addClass('active');});$tabs.first().addClass('active');var firstTargetId=$tabs.first().attr('data-target');$('#'+firstTargetId).addClass('active');});}
$(document).ready(function(){$('.nbdl-withdraw-wrap').nbdlNav();});})(jQuery,window);jQuery(document).on('quick-view-displayed',function(){if(jQuery('.nbd-option-in-wqv').length>0){jQuery(".nbd-option-in-wqv").find("script").each(function(i){eval(jQuery(this).text());});}});jQuery(document).on('reset_nbo_options',function(){jQuery('#nbdesigner-preview-title').hide();jQuery('#nbd-actions').hide();jQuery('#nbdesigner_frontend_area').html('');jQuery('#nbdesigner-upload-title').hide();jQuery('#nbdesigner_upload_preview').html('');var product_id=jQuery('[name="nbd-add-to-cart"]').attr('value');var variation_id=jQuery('[name="variation_id"]').length>0?jQuery('[name="variation_id"]').attr('value'):0;jQuery.ajax({url:nbds_frontend.url,method:"POST",data:{action:'nbd_remove_design_and_file',product_id:product_id,variation_id:variation_id,nonce:nbds_frontend.nonce}}).done(function(data){console.log('success!');});});jQuery(document).on('initialed_nbo_options',function(){jQuery('.variations_form input, form.cart input').on('keydown',function(event){if(event.keyCode==13){event.preventDefault();return false;}});});var share_image_url='';var NBDESIGNERPRODUCT={copy_source:function(e){jQuery(e).prev('.nbd-cart-design-url').select();document.execCommand("copy");},hide_loading_iframe:function(){jQuery("#nbd_processing").hide();},update_request_design:function(_this){var self=jQuery(_this);var field_id=self.attr('data-field'),cart_item_key=self.attr('data-cart-item'),request_val=self.is(':checked')?self.attr('data-request'):self.attr('data-no-request');jQuery('form.woocommerce-cart-form').addClass('processing').block({message:null,overlayCSS:{background:'#fff',opacity:0.6}});jQuery.ajax({url:nbds_frontend.url,method:"POST",data:{action:'nbo_update_request_design',field_id:field_id,cart_item_key:cart_item_key,request_val:request_val,nonce:nbds_frontend.nonce}}).done(function(data){jQuery('form.woocommerce-cart-form').removeClass('processing').unblock();if(data.flag==1){jQuery('.woocommerce-cart-form [name="update_cart"]').prop('disabled',false).trigger('click');}});},save_for_later:function(){jQuery('img.nbd-save-loading').removeClass('hide');jQuery.ajax({url:nbds_frontend.url,method:"POST",data:{action:'nbd_save_for_later',product_id:NBDESIGNERPRODUCT.product_id,variation_id:NBDESIGNERPRODUCT.variation_id,folder:NBDESIGNERPRODUCT.folder,nonce:nbds_frontend.nonce}}).done(function(data){if(data.flag==1){jQuery('img.nbd-save-loading').addClass('hide');jQuery('a.nbd-save-for-later').addClass('saved');jQuery('a.nbd-save-for-later svg').show();jQuery.each(jQuery('#nbd-share-group a'),function(){var d=new Date();var href=jQuery(this).attr('data-href');var share_url=nbd_create_own_page+'?product_id='+NBDESIGNERPRODUCT.product_id+'&variation_id='+NBDESIGNERPRODUCT.variation_id+'&reference='+data.folder+'&nbd_share_id='+data.folder+'&t='+d.getTime();var _href=href+encodeURIComponent(share_url);if(jQuery(this).attr('id')=='nbd-pinterest')_href+='&media='+encodeURIComponent(share_image_url)+'&description='+jQuery(this).attr('data-description');if(jQuery(this).attr('data-text')!=undefined)_href+='&text='+jQuery(this).attr('data-text');jQuery(this).attr('href',_href);});jQuery('.saved-design-link').show();}else{alert('Opps! Error while save design!');};});},download_pdf:function(){jQuery('img.nbd-pdf-loading').removeClass('hide');jQuery.ajax({url:nbds_frontend.url,method:"POST",data:{action:'nbd_frontend_download_pdf',nbd_item_key:NBDESIGNERPRODUCT.folder,nonce:nbds_frontend.nonce}}).done(function(data){jQuery('img.nbd-pdf-loading').addClass('hide');var data=JSON.parse(data);var filename='design.pdf',a=document.createElement('a');a.setAttribute('href',data[0].link);a.setAttribute('download',filename);a.click()});},download_pdf_in_order:function(e,el){e.preventDefault();var sefl=el,nbd_item_key=sefl.attr('data-nbd-item'),order_id=sefl.attr('data-order');sefl.find('span').addClass('active');jQuery.ajax({url:nbds_frontend.url,method:"POST",data:{action:'nbd_frontend_download_pdf',nbd_item_key:nbd_item_key,order_id:order_id,nonce:nbds_frontend.nonce}}).done(function(data){sefl.find('span').removeClass('active');var data=JSON.parse(data);var filename='design.pdf',a=document.createElement('a');a.setAttribute('href',data[0].link);a.setAttribute('download',filename);a.click()});},nbd_download_final_pdf:function(e,el){e.preventDefault();var sefl=el,nbd_item_key=sefl.attr('data-nbd-item');sefl.find('span').addClass('active');jQuery.ajax({url:nbds_frontend.url,method:"POST",data:{action:'nbd_download_final_pdf',nbd_item_key:nbd_item_key,nonce:nbds_frontend.nonce}}).done(function(data){sefl.find('span').removeClass('active');var data=JSON.parse(data);if(data.flag==1){data.pdf.forEach(function(item,index){var filename='design_'+index+'.pdf',a=document.createElement('a');a.setAttribute('href',item);a.setAttribute('download',filename);a.click()});}});},insert_customer_design:function(data){},hide_iframe_design:function(){var height=-jQuery(window).height();jQuery('#container-online-designer').removeClass('show');jQuery('#container-online-designer').stop().animate({top:height,opacity:0},500);},show_design_thumbnail:function(arr,task,config){if(jQuery('#triggerDesign').length>0){jQuery('button[type="submit"].single_add_to_cart_button').show();};jQuery('#nbdesigner-preview-title').show();jQuery('#nbd-actions').show();jQuery('#nbdesign-new-template').show();if(task=='create_template'||task=='edit_template'){jQuery('#triggerDesign').text('Edit Template');}
var html='';var d=new Date();var count=1;var has_config=false;var product=[];if(config){has_config=true;product=config.product;}
jQuery.each(arr,function(key,val){if(count==1)share_image_url=val;count++;var p_index=key.slice(6);var data_width=has_config?product[p_index].img_src_width:'500',data_height=has_config?product[p_index].img_src_height:'500',data_title=has_config?product[p_index].orientation_name:'Side '+p_index;html+='<div class="img-con" style="cursor: pointer;" onclick="NBDESIGNERPRODUCT.show_lightbox( this )"><img data-title="'+data_title+'" data-width="'+data_width+'" data-height="'+data_height+'" src="'+val+'?t='+d.getTime()+'" /></div>'});jQuery.each(jQuery('#nbd-share-group a'),function(){var d=new Date();var href=jQuery(this).attr('data-href');var share_url=nbd_create_own_page+'?product_id='+NBDESIGNERPRODUCT.product_id+'&variation_id='+NBDESIGNERPRODUCT.variation_id+'&reference='+NBDESIGNERPRODUCT.folder+'&nbd_share_id='+NBDESIGNERPRODUCT.folder+'&t='+d.getTime();var _href=href+encodeURIComponent(share_url);if(jQuery(this).attr('id')=='nbd-pinterest')_href+='&media='+encodeURIComponent(share_image_url)+'&description='+jQuery(this).attr('data-description');if(jQuery(this).attr('data-text')!=undefined)_href+='&text='+jQuery(this).attr('data-text');jQuery(this).attr('href',_href);});jQuery('#nbdesigner_frontend_area').html('');jQuery('#nbdesigner_frontend_area').append(html);hideDesignFrame();jQuery(document).triggerHandler('after_show_design_thumbnail');jQuery('input[name="nbd-reserve"]').remove();var flipbook=jQuery("[class*=real3dflipbook]:first");if(flipbook.length>0){var _class=flipbook.attr('class'),obj='real3dflipbook_'+_class.substring(_class.length-1);var options=window[obj];var json_str=options.replace(/&quot;/g,'"');json_str=json_str.replace(/“/g,'"');json_str=json_str.replace(/”/g,'"');json_str=json_str.replace(/″/g,'"');json_str=json_str.replace(/„/g,'"');json_str=json_str.replace(/«&nbsp;/g,'"');json_str=json_str.replace(/&nbsp;»/g,'"');options=jQuery.parseJSON(json_str);options.assets={preloader:options.rootFolder+"images/preloader.jpg",left:options.rootFolder+"images/left.png",overlay:options.rootFolder+"images/overlay.jpg",flipMp3:options.rootFolder+"mp3/turnPage.mp3",shadowPng:options.rootFolder+"images/shadow.png"};var pages=[];jQuery.each(arr,function(key,val){pages.push({htmlContent:'',src:val,thumb:val,title:key});});options.pages=pages;options.pdfjsworkerSrc=options.rootFolder+'js/pdf.worker.min.js'
function convertStrings(obj){jQuery.each(obj,function(key,value){if(typeof(value)=='object'||typeof(value)=='array'){convertStrings(value)}else if(!isNaN(value)){if(obj[key]==="")
delete obj[key]
else
obj[key]=Number(value)}else if(value=="true"){obj[key]=true}else if(value=="false"){obj[key]=false}});}
convertStrings(options);for(var i=0;i<options.pages.length;i++){if(typeof(options.pages[i].htmlContent)!='undefined'&&options.pages[i].htmlContent!=""&&options.pages[i].htmlContent!="undefined")
options.pages[i].htmlContent=unescape(options.pages[i].htmlContent)
else
delete options.pages[i].htmlContent}
options.social=[];if(options.facebook=="")
delete options.facebook
if(options.twitter=="")
delete options.twitter
if(options.google_plus=="")
delete options.google_plus
if(options.pinterest=="")
delete options.pinterest
if(options.email=="")
delete options.email
if(options.pageWidth=="")
delete options.pageWidth
if(options.pageHeight=="")
delete options.pageHeight
if(typeof(options.btnShare)=='undefined'||!options.btnShare)
options.btnShare={enabled:false}
if(typeof(options.btnNext)=='undefined'||!options.btnNext)
options.btnNext={enabled:false}
if(typeof(options.btnPrev)=='undefined'||!options.btnPrev)
options.btnPrev={enabled:false}
if(typeof(options.btnZoomIn)=='undefined'||!options.btnZoomIn)
options.btnZoomIn={enabled:false}
if(typeof(options.btnZoomOut)=='undefined'||!options.btnZoomOut)
options.btnZoomOut={enabled:false}
if(typeof(options.btnToc)=='undefined'||!options.btnToc)
options.btnToc={enabled:false}
if(typeof(options.btnThumbs)=='undefined'||!options.btnThumbs)
options.btnThumbs={enabled:false}
if(typeof(options.btnDownloadPages)=='undefined'||!options.btnDownloadPages)
options.btnDownloadPages={enabled:false}
if(typeof(options.btnDownloadPdf)=='undefined'||!options.btnDownloadPdf)
options.btnDownloadPdf={enabled:false}
if(typeof(options.btnExpand)=='undefined'||!options.btnExpand)
options.btnExpand={enabled:false}
if(typeof(options.btnExpandLightbox)=='undefined'||!options.btnExpandLightbox)
options.btnExpandLightbox={enabled:false}
if(typeof(options.btnSound)=='undefined'||!options.btnSound)
options.btnSound={enabled:false}
if(typeof(options.btnShare.icon)=='undefined'||options.btnShare.icon=='')
options.btnShare.icon="fa-share";if(typeof(options.btnShare.title)=='undefined'||options.btnShare.title=='')
options.btnShare.title="Share";if(typeof(options.btnNext.icon)=='undefined'||options.btnNext.icon=='')
options.btnNext.icon="fa-chevron-right";if(typeof(options.btnNext.title)=='undefined'||options.btnNext.title=='')
options.btnNext.title="Next page";if(typeof(options.btnPrev.icon)=='undefined'||options.btnPrev.icon=='')
options.btnPrev.icon="fa-chevron-left";if(typeof(options.btnPrev.title)=='undefined'||options.btnPrev.title=='')
options.btnPrev.title="Previous page";if(typeof(options.btnZoomIn.icon)=='undefined'||options.btnZoomIn.icon=='')
options.btnZoomIn.icon="fa-plus";if(typeof(options.btnZoomIn.title)=='undefined'||options.btnZoomIn.title=='')
options.btnZoomIn.title="Zoom in";if(typeof(options.btnZoomOut.icon)=='undefined'||options.btnZoomOut.icon=='')
options.btnZoomOut.icon="fa-minus";if(typeof(options.btnZoomOut.title)=='undefined'||options.btnZoomOut.title=='')
options.btnZoomOut.title="Zoom out";if(typeof(options.btnToc.icon)=='undefined'||options.btnToc.icon=='')
options.btnToc.icon="fa-list-ol";if(typeof(options.btnToc.title)=='undefined'||options.btnToc.title=='')
options.btnToc.title="Table of content";if(typeof(options.btnThumbs.icon)=='undefined'||options.btnThumbs.icon=='')
options.btnThumbs.icon="fa-th-large";if(typeof(options.btnThumbs.title)=='undefined'||options.btnThumbs.title=='')
options.btnThumbs.title="Pages";if(typeof(options.btnDownloadPages.icon)=='undefined'||options.btnDownloadPages.icon=='')
options.btnDownloadPages.icon="fa-download";if(typeof(options.btnDownloadPages.title)=='undefined'||options.btnDownloadPages.title=='')
options.btnDownloadPages.title="Download pages";if(typeof(options.btnDownloadPdf.icon)=='undefined'||options.btnDownloadPdf.icon=='')
options.btnDownloadPdf.icon="fa-file";if(typeof(options.btnDownloadPdf.title)=='undefined'||options.btnDownloadPdf.title=='')
options.btnDownloadPdf.title="Download PDF";if(typeof(options.btnExpand.icon)=='undefined'||options.btnExpand.icon=='')
options.btnExpand.icon="fa-expand";if(typeof(options.btnExpand.iconAlt)=='undefined'||options.btnExpand.iconAlt=='')
options.btnExpand.iconAlt="fa-compress";if(typeof(options.btnExpand.title)=='undefined'||options.btnExpand.title=='')
options.btnExpand.title="Toggle fullscreen";if(typeof(options.btnExpandLightbox.icon)=='undefined'||options.btnExpandLightbox.icon=='')
options.btnExpandLightbox.icon="fa-expand";if(typeof(options.btnExpandLightbox.iconAlt)=='undefined'||options.btnExpandLightbox.iconAlt=='')
options.btnExpandLightbox.iconAlt="fa-compress";if(typeof(options.btnExpandLightbox.title)=='undefined'||options.btnExpandLightbox.title=='')
options.btnExpandLightbox.title="Toggle fullscreen";if(typeof(options.btnSound.icon)=='undefined'||options.btnSound.icon=='')
options.btnSound.icon="fa-volume-up";if(typeof(options.btnSound.title)=='undefined'||options.btnSound.title=='')
options.btnSound.title="Sound";if(typeof(options.viewMode)=='undefined')
options.viewMode="webgl"
if(options.btnDownloadPages.url){options.btnDownloadPages.url=options.btnDownloadPages.url.replace(/\\/g,'/')
options.btnDownloadPages.enabled=true}else
options.btnDownloadPages.enabled=false
if(options.btnDownloadPdf.url){options.btnDownloadPdf.url=options.btnDownloadPdf.url.replace(/\\/g,'/')
options.btnDownloadPdf.enabled=true}else
options.btnDownloadPdf.enabled=false;var flipcon=jQuery('.real3dflipbook-1');flipcon.flipBook(options);}},scrollToAddToCart:function(){if(jQuery('button[type="submit"].single_add_to_cart_button').length){var top=jQuery('button[type="submit"].single_add_to_cart_button').offset().top-250;jQuery('html,body').animate({scrollTop:top},500);}},get_gallery_items:function(){var $slides=jQuery('.img-con'),items=[];if($slides.length>0){$slides.each(function(i,el){var img=jQuery(el).find('img');if(img.length){var item={src:img.attr('src'),w:parseInt(img.attr('data-width'))*2,h:parseInt(img.attr('data-height'))*2,title:img.attr('data-title')};items.push(item);}});}
return items;},show_lightbox:function(e){if(typeof PhotoSwipe=='undefined')return;var pswpElement=jQuery('.pswp')[0],items=this.get_gallery_items(),eventTarget=jQuery(e.target),clicked;clicked=eventTarget.closest('.img-con');var options=jQuery.extend({index:jQuery(clicked).index()},wc_single_product_params.photoswipe_options);var photoswipe=new PhotoSwipe(pswpElement,PhotoSwipeUI_Default,items,options);photoswipe.init();},nbdesigner_ready:function(){if(jQuery('form input[name="variation_id"]').length>0){var vid=jQuery('form input[name="variation_id"]').val();if(("undefined"!=typeof is_nbd_bulk_variation)||(vid!=''&&parseInt(vid)>0)){jQuery('#triggerDesign').removeClass('nbdesigner_disable');}}else{jQuery('#triggerDesign').removeClass('nbdesigner_disable');}
jQuery('.nbdesigner-img-loading').addClass('hide');},nbdesigner_unready:function(){jQuery('#triggerDesign').addClass('nbdesigner_disable');jQuery('.nbdesigner-img-loading').removeClass('hide');},get_sugget_design:function(product_id,variation_id){if(!jQuery('.nbdesigner-related-product-image').length)return;var products=[];jQuery.each(jQuery('.nbdesigner-related-product-image'),function(){products.push(jQuery(this).attr('data-id'));jQuery(this).parent('.nbdesigner-related-product-item').find('.nbdesigner-overlay').addClass('open');});if(!products.length)return;jQuery.ajax({url:nbds_frontend.url,method:"POST",data:{"action":"nbdesigner_get_suggest_design","products":products,"product_id":product_id,"variation_id":variation_id,"nonce":nbds_frontend.nonce}}).done(function(data){data=JSON.parse(data);jQuery.each(jQuery('.nbdesigner-related-product-image'),function(){if(data['flag']){var href=jQuery(this).attr('href'),data_id=jQuery(this).attr('data-id');jQuery(this).attr('href',addParameter(href,'nbds-ref',data['nbd_item_key'],false));jQuery(this).find('img').attr({'src':data['images'][data_id],'srcset':''});}
jQuery(this).parent('.nbdesigner-related-product-item').find('.nbdesigner-overlay').removeClass('open');});});},update_nbu_value:function(arr){var files='';jQuery.each(arr,function(key,val){files+=key==0?val.name:'|'+val.name;});if(jQuery('#triggerDesign').length>0){jQuery('button[type="submit"].single_add_to_cart_button').show();};jQuery('input[name="nbd-upload-files"]').val(files);},remove_design:function(type,cart_item_key){jQuery('form.woocommerce-cart-form').addClass('processing').block({message:null,overlayCSS:{background:'#fff',opacity:0.6}});jQuery.ajax({url:nbds_frontend.url,method:"POST",data:{"action":"nbd_remove_cart_design","type":type,"cart_item_key":cart_item_key,"nonce":nbds_frontend.nonce}}).done(function(data){jQuery('form.woocommerce-cart-form').removeClass('processing').unblock();if(data=='success'){var designSection=jQuery('#nbd'+cart_item_key),uploadSection=jQuery('#nbu'+cart_item_key),extraPrice=jQuery('#nbx'+cart_item_key);var sections=designSection.length+uploadSection.length;if(type=='custom'){designSection.remove();}else{uploadSection.remove();}
if(sections<2){extraPrice.remove();jQuery('.woocommerce-cart-form [name="update_cart"]').prop('disabled',false).trigger('click');}}});},delete_my_design:function(e){var con=confirm(nbds_frontend.confirm_delete_design);if(con){var sefl=jQuery(e),design_id=sefl.attr('data-design'),tr_con=sefl.parents('tr.order');jQuery('.container-design').addClass('processing').block({message:null,overlayCSS:{background:'#fff',opacity:0.6}});jQuery.ajax({url:nbds_frontend.url,method:"POST",data:{action:'nbd_delete_my_design',design_id:design_id,nonce:nbds_frontend.nonce}}).done(function(data){jQuery('.container-design').removeClass('processing').unblock();if(data.flag==1){tr_con.remove();alert(nbds_frontend.delete_success)}})}},add_design_to_cart:function(e){var sefl=jQuery(e),design_id=sefl.attr('data-design');jQuery('.container-design').addClass('processing').block({message:null,overlayCSS:{background:'#fff',opacity:0.6}});jQuery.ajax({url:nbds_frontend.url,method:"POST",data:{action:'nbd_add_design_to_cart',design_id:design_id,nonce:nbds_frontend.nonce}}).done(function(data){jQuery('.container-design').removeClass('processing').unblock();if(data.flag==1){window.location=nbds_frontend.cart_url;}else{alert('Opp! Try again later')}})},add_variation_bulk_form:function(){var variation_wrap=jQuery('.nbd-variation-wrap').first(),new_variation_wrap=variation_wrap.clone();new_variation_wrap.appendTo('#nbd-variations-wrap');jQuery(new_variation_wrap).find('.nbd-variation-quantity').val(1);this.init_nbd_variation_value();},remove_variation_bulk_form:function(e){var self=jQuery(e),wrap=self.closest('.nbd-variation-wrap');wrap.remove();this.init_nbd_variation_value();},init_nbd_variation_value:function(){var nbd_variation_value='',has_quantity=false;jQuery('.nbd-variation-value').val(nbd_variation_value);jQuery('.nbd-variation-wrap').each(function(index){var variation_id=jQuery(this).find('select').val();var quantity=jQuery(this).find('input').val();if(quantity>0)has_quantity=true;nbd_variation_value+=index>0?'|':'';nbd_variation_value+=variation_id+'_'+quantity;});jQuery('.nbd-variation-value').val(nbd_variation_value);if(has_quantity){jQuery('.single_add_to_cart_button').removeClass('disabled wc-variation-selection-needed');}else{jQuery('.single_add_to_cart_button').addClass('disabled wc-variation-selection-needed');}},change_nbd_dokan_format:function(e){var type=jQuery(e).val(),el_action=jQuery(e).parents('.nbd-dokan-download-wrap').find('a.nbd-dokan-download'),href=el_action.attr('data-href');el_action.attr('href',href+'&type='+type);},change_nbd_download_type:function(e){var type=jQuery(e).val(),parent=jQuery(e).parents('.nbd-order-item-download-section'),el_action=parent.find('a.nbd-order-download-file'),link=parent.attr('data-href');if(type=='pdf'){jQuery('.nbd-pdf-options').removeClass('nbd-hide');}
el_action.attr('href',link+'&type='+type);},change_nbd_download_pdf_type:function(){jQuery.each(jQuery('.nbd-order-item-download-section'),function(){var _bleed=jQuery('#nbd-show-bleed').is(':checked')?'yes':'no';var _multi_file=jQuery('#nbd-multi-file').is(':checked')?'yes':'no';jQuery('.nbd-pdf-options').addClass('nbd-hide');jQuery.each(jQuery('.nbd-order-item-download-section'),function(){var link=jQuery(this).find('.nbd-order-download-file').attr('href');link+='&multi_file='+_multi_file+'&bleed='+_bleed;jQuery(this).find('.nbd-order-download-file').attr('href',link);})});},qty:1,updateQty:function(qty,variations){},searchTemplate:function(tag){var search=jQuery('#ndb_search_template').val();if(search!=''||typeof tag!='undefined'){var url='';if(search!='')url=nbds_frontend.gallery_url+'?search='+search;if(typeof tag!='undefined'){url=nbds_frontend.gallery_url+'?tag='+tag;}
window.location=url}},submitSearchTemplate:function(e){if(e.keyCode==13)this.searchTemplate();}};function addParameter(url,parameterName,parameterValue,atStart){var replaceDuplicates=true;var urlhash='';if(url.indexOf('#')>0){var cl=url.indexOf('#');urlhash=url.substring(url.indexOf('#'),url.length);}else{urlhash='';cl=url.length;}
var sourceUrl=url.substring(0,cl);var urlParts=sourceUrl.split("?");var newQueryString="";if(urlParts.length>1){var parameters=urlParts[1].split("&");for(var i=0;(i<parameters.length);i++)
{var parameterParts=parameters[i].split("=");if(!(replaceDuplicates&&parameterParts[0]==parameterName))
{if(newQueryString=="")
newQueryString="?";else
newQueryString+="&";newQueryString+=parameterParts[0]+"="+(parameterParts[1]?parameterParts[1]:'');}}}
if(newQueryString=="")newQueryString="?";if(atStart){newQueryString='?'+parameterName+"="+parameterValue+(newQueryString.length>1?'&'+newQueryString.substring(1):'');}else{if(newQueryString!==""&&newQueryString!='?')
newQueryString+="&";newQueryString+=parameterName+"="+(parameterValue?parameterValue:'');}
return urlParts[0]+newQueryString+urlhash;};function removeParam(key,sourceURL){var rtn=sourceURL.split("?")[0],param,params_arr=[],queryString=(sourceURL.indexOf("?")!==-1)?sourceURL.split("?")[1]:"";if(queryString!==""){params_arr=queryString.split("&");for(var i=params_arr.length-1;i>=0;i-=1){param=params_arr[i].split("=")[0];if(param===key){params_arr.splice(i,1);}}
rtn=rtn+"?"+params_arr.join("&");}
return rtn;}
/*!
 * imagesLoaded PACKAGED v4.1.4
 * JavaScript is all like "Your images are done yet or what?"
 * MIT License
 */
!function(e,t){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",t):"object"==typeof module&&module.exports?module.exports=t():e.EvEmitter=t()}("undefined"!=typeof window?window:this,function(){function e(){}var t=e.prototype;return t.on=function(e,t){if(e&&t){var i=this._events=this._events||{},n=i[e]=i[e]||[];return n.indexOf(t)==-1&&n.push(t),this}},t.once=function(e,t){if(e&&t){this.on(e,t);var i=this._onceEvents=this._onceEvents||{},n=i[e]=i[e]||{};return n[t]=!0,this}},t.off=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){var n=i.indexOf(t);return n!=-1&&i.splice(n,1),this}},t.emitEvent=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){i=i.slice(0),t=t||[];for(var n=this._onceEvents&&this._onceEvents[e],o=0;o<i.length;o++){var r=i[o],s=n&&n[r];s&&(this.off(e,r),delete n[r]),r.apply(this,t)}return this}},t.allOff=function(){delete this._events,delete this._onceEvents},e}),function(e,t){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(i){return t(e,i)}):"object"==typeof module&&module.exports?module.exports=t(e,require("ev-emitter")):e.imagesLoaded=t(e,e.EvEmitter)}("undefined"!=typeof window?window:this,function(e,t){function i(e,t){for(var i in t)e[i]=t[i];return e}function n(e){if(Array.isArray(e))return e;var t="object"==typeof e&&"number"==typeof e.length;return t?d.call(e):[e]}function o(e,t,r){if(!(this instanceof o))return new o(e,t,r);var s=e;return"string"==typeof e&&(s=document.querySelectorAll(e)),s?(this.elements=n(s),this.options=i({},this.options),"function"==typeof t?r=t:i(this.options,t),r&&this.on("always",r),this.getImages(),h&&(this.jqDeferred=new h.Deferred),void setTimeout(this.check.bind(this))):void a.error("Bad element for imagesLoaded "+(s||e))}function r(e){this.img=e}function s(e,t){this.url=e,this.element=t,this.img=new Image}var h=e.jQuery,a=e.console,d=Array.prototype.slice;o.prototype=Object.create(t.prototype),o.prototype.options={},o.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},o.prototype.addElementImages=function(e){"IMG"==e.nodeName&&this.addImage(e),this.options.background===!0&&this.addElementBackgroundImages(e);var t=e.nodeType;if(t&&u[t]){for(var i=e.querySelectorAll("img"),n=0;n<i.length;n++){var o=i[n];this.addImage(o)}if("string"==typeof this.options.background){var r=e.querySelectorAll(this.options.background);for(n=0;n<r.length;n++){var s=r[n];this.addElementBackgroundImages(s)}}}};var u={1:!0,9:!0,11:!0};return o.prototype.addElementBackgroundImages=function(e){var t=getComputedStyle(e);if(t)for(var i=/url\((['"])?(.*?)\1\)/gi,n=i.exec(t.backgroundImage);null!==n;){var o=n&&n[2];o&&this.addBackground(o,e),n=i.exec(t.backgroundImage)}},o.prototype.addImage=function(e){var t=new r(e);this.images.push(t)},o.prototype.addBackground=function(e,t){var i=new s(e,t);this.images.push(i)},o.prototype.check=function(){function e(e,i,n){setTimeout(function(){t.progress(e,i,n)})}var t=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(t){t.once("progress",e),t.check()}):void this.complete()},o.prototype.progress=function(e,t,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded,this.emitEvent("progress",[this,e,t]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,e),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&a&&a.log("progress: "+i,e,t)},o.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(e,[this]),this.emitEvent("always",[this]),this.jqDeferred){var t=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[t](this)}},r.prototype=Object.create(t.prototype),r.prototype.check=function(){var e=this.getIsImageComplete();return e?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},r.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},r.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.img,t])},r.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},r.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},r.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},r.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype=Object.create(r.prototype),s.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url;var e=this.getIsImageComplete();e&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},s.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.element,t])},o.makeJQueryPlugin=function(t){t=t||e.jQuery,t&&(h=t,h.fn.imagesLoaded=function(e,t){var i=new o(this,e,t);return i.jqDeferred.promise(h(this))})},o.makeJQueryPlugin(),o});
function wpbc_define_var(wpbc_global_var){if(wpbc_global_var===undefined){return null;}
else{return JSON.parse(wpbc_global_var);}}
var wpbc_ajaxurl=wpbc_global1.wpbc_ajaxurl;var wpdev_bk_plugin_url=wpbc_global1.wpdev_bk_plugin_url;var wpbc_today=wpbc_define_var(wpbc_global1.wpbc_today);var visible_booking_id_on_page=wpbc_define_var(wpbc_global1.visible_booking_id_on_page);var booking_max_monthes_in_calendar=wpbc_global1.booking_max_monthes_in_calendar;var user_unavilable_days=wpbc_define_var(wpbc_global1.user_unavilable_days);var wpdev_bk_edit_id_hash=wpbc_global1.wpdev_bk_edit_id_hash;var wpdev_bk_plugin_filename=wpbc_global1.wpdev_bk_plugin_filename;var bk_days_selection_mode=wpbc_global1.bk_days_selection_mode;var wpdev_bk_personal=parseInt(wpbc_global1.wpdev_bk_personal);var block_some_dates_from_today=parseInt(wpbc_global1.block_some_dates_from_today);var message_verif_requred=wpbc_global1.message_verif_requred;var message_verif_requred_for_check_box=wpbc_global1.message_verif_requred_for_check_box;var message_verif_requred_for_radio_box=wpbc_global1.message_verif_requred_for_radio_box;var message_verif_emeil=wpbc_global1.message_verif_emeil;var message_verif_same_emeil=wpbc_global1.message_verif_same_emeil;var message_verif_selectdts=wpbc_global1.message_verif_selectdts;var parent_booking_resources=wpbc_define_var(wpbc_global1.parent_booking_resources);var new_booking_title=wpbc_global1.new_booking_title;var new_booking_title_time=parseInt(wpbc_global1.new_booking_title_time);var type_of_thank_you_message=wpbc_global1.type_of_thank_you_message;var thank_you_page_URL=wpbc_global1.thank_you_page_URL;var is_am_pm_inside_time=(wpbc_global1.is_am_pm_inside_time=="true");var is_booking_used_check_in_out_time=(wpbc_global1.is_booking_used_check_in_out_time=="true");var wpbc_active_locale=wpbc_global1.wpbc_active_locale;var wpbc_message_processing=wpbc_global1.wpbc_message_processing;var wpbc_message_deleting=wpbc_global1.wpbc_message_deleting;var wpbc_message_updating=wpbc_global1.wpbc_message_updating;var wpbc_message_saving=wpbc_global1.wpbc_message_saving;var message_checkinouttime_error=wpbc_global1.message_checkinouttime_error;var message_starttime_error=wpbc_global1.message_starttime_error;var message_endtime_error=wpbc_global1.message_endtime_error;var message_rangetime_error=wpbc_global1.message_rangetime_error;var message_durationtime_error=wpbc_global1.message_durationtime_error;var bk_highlight_timeslot_word=wpbc_global1.bk_highlight_timeslot_word;if(typeof wpbc_global2!=='undefined'){var message_time_error=wpbc_global2.message_time_error;}
if(typeof wpbc_global3!=='undefined'){var bk_1click_mode_days_num=parseInt(wpbc_global3.bk_1click_mode_days_num);var bk_1click_mode_days_start=wpbc_define_var(wpbc_global3.bk_1click_mode_days_start);var bk_2clicks_mode_days_min=parseInt(wpbc_global3.bk_2clicks_mode_days_min);var bk_2clicks_mode_days_max=parseInt(wpbc_global3.bk_2clicks_mode_days_max);var bk_2clicks_mode_days_specific=wpbc_define_var(wpbc_global3.bk_2clicks_mode_days_specific);var bk_2clicks_mode_days_start=wpbc_define_var(wpbc_global3.bk_2clicks_mode_days_start);var is_booking_recurrent_time=(wpbc_global3.is_booking_recurrent_time=="true");is_booking_used_check_in_out_time=(wpbc_global3.is_booking_used_check_in_out_time=="true");var bk_currency_pos=wpbc_global3.bk_currency_pos;}
if(typeof wpbc_global4!=='undefined'){var wpbc_available_days_num_from_today=parseInt(wpbc_global4.wpbc_available_days_num_from_today);var bk_cost_depends_from_selection_line1=wpbc_global4.bk_cost_depends_from_selection_line1;var bk_cost_depends_from_selection_line2=wpbc_global4.bk_cost_depends_from_selection_line2;var bk_cost_depends_from_selection_line3=wpbc_global4.bk_cost_depends_from_selection_line3;var bk_cost_depends_from_selection_line14summ=wpbc_global4.bk_cost_depends_from_selection_line14summ;var bk_cost_depends_from_selection_line24summ=wpbc_global4.bk_cost_depends_from_selection_line24summ;var wpdev_bk_season_filter=wpbc_define_var(wpbc_global4.wpdev_bk_season_filter);var bk_show_info_in_form=(wpbc_global4.bk_show_info_in_form=="true");}
if(typeof wpbc_global5!=='undefined'){var max_visitors_4_bk_res=wpbc_define_var(wpbc_global5.max_visitors_4_bk_res);var message_verif_visitors_more_then_available=wpbc_global5.message_verif_visitors_more_then_available;var is_use_visitors_number_for_availability=(wpbc_global5.is_use_visitors_number_for_availability=="true");var availability_based_on=wpbc_global5.availability_based_on;parent_booking_resources=wpbc_define_var(wpbc_global5.parent_booking_resources);};
(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?factory(exports):typeof define==='function'&&define.amd?define(['exports'],factory):(global=typeof globalThis!=='undefined'?globalThis:global||self,factory(global.wpbc_Popper={}));}(this,(function(exports){'use strict';function getWindow(node){if(node==null){return window;}
if(node.toString()!=='[object Window]'){var ownerDocument=node.ownerDocument;return ownerDocument?ownerDocument.defaultView||window:window;}
return node;}
function isElement(node){var OwnElement=getWindow(node).Element;return node instanceof OwnElement||node instanceof Element;}
function isHTMLElement(node){var OwnElement=getWindow(node).HTMLElement;return node instanceof OwnElement||node instanceof HTMLElement;}
function isShadowRoot(node){if(typeof ShadowRoot==='undefined'){return false;}
var OwnElement=getWindow(node).ShadowRoot;return node instanceof OwnElement||node instanceof ShadowRoot;}
var max=Math.max;var min=Math.min;var round=Math.round;function getBoundingClientRect(element,includeScale){if(includeScale===void 0){includeScale=false;}
var rect=element.getBoundingClientRect();var scaleX=1;var scaleY=1;if(isHTMLElement(element)&&includeScale){var offsetHeight=element.offsetHeight;var offsetWidth=element.offsetWidth;if(offsetWidth>0){scaleX=round(rect.width)/offsetWidth||1;}
if(offsetHeight>0){scaleY=round(rect.height)/offsetHeight||1;}}
return{width:rect.width/scaleX,height:rect.height/scaleY,top:rect.top/scaleY,right:rect.right/scaleX,bottom:rect.bottom/scaleY,left:rect.left/scaleX,x:rect.left/scaleX,y:rect.top/scaleY};}
function getWindowScroll(node){var win=getWindow(node);var scrollLeft=win.pageXOffset;var scrollTop=win.pageYOffset;return{scrollLeft:scrollLeft,scrollTop:scrollTop};}
function getHTMLElementScroll(element){return{scrollLeft:element.scrollLeft,scrollTop:element.scrollTop};}
function getNodeScroll(node){if(node===getWindow(node)||!isHTMLElement(node)){return getWindowScroll(node);}else{return getHTMLElementScroll(node);}}
function getNodeName(element){return element?(element.nodeName||'').toLowerCase():null;}
function getDocumentElement(element){return((isElement(element)?element.ownerDocument:element.document)||window.document).documentElement;}
function getWindowScrollBarX(element){return getBoundingClientRect(getDocumentElement(element)).left+getWindowScroll(element).scrollLeft;}
function getComputedStyle(element){return getWindow(element).getComputedStyle(element);}
function isScrollParent(element){var _getComputedStyle=getComputedStyle(element),overflow=_getComputedStyle.overflow,overflowX=_getComputedStyle.overflowX,overflowY=_getComputedStyle.overflowY;return/auto|scroll|overlay|hidden/.test(overflow+overflowY+overflowX);}
function isElementScaled(element){var rect=element.getBoundingClientRect();var scaleX=round(rect.width)/element.offsetWidth||1;var scaleY=round(rect.height)/element.offsetHeight||1;return scaleX!==1||scaleY!==1;}
function getCompositeRect(elementOrVirtualElement,offsetParent,isFixed){if(isFixed===void 0){isFixed=false;}
var isOffsetParentAnElement=isHTMLElement(offsetParent);var offsetParentIsScaled=isHTMLElement(offsetParent)&&isElementScaled(offsetParent);var documentElement=getDocumentElement(offsetParent);var rect=getBoundingClientRect(elementOrVirtualElement,offsetParentIsScaled);var scroll={scrollLeft:0,scrollTop:0};var offsets={x:0,y:0};if(isOffsetParentAnElement||!isOffsetParentAnElement&&!isFixed){if(getNodeName(offsetParent)!=='body'||isScrollParent(documentElement)){scroll=getNodeScroll(offsetParent);}
if(isHTMLElement(offsetParent)){offsets=getBoundingClientRect(offsetParent,true);offsets.x+=offsetParent.clientLeft;offsets.y+=offsetParent.clientTop;}else if(documentElement){offsets.x=getWindowScrollBarX(documentElement);}}
return{x:rect.left+scroll.scrollLeft-offsets.x,y:rect.top+scroll.scrollTop-offsets.y,width:rect.width,height:rect.height};}
function getLayoutRect(element){var clientRect=getBoundingClientRect(element);var width=element.offsetWidth;var height=element.offsetHeight;if(Math.abs(clientRect.width-width)<=1){width=clientRect.width;}
if(Math.abs(clientRect.height-height)<=1){height=clientRect.height;}
return{x:element.offsetLeft,y:element.offsetTop,width:width,height:height};}
function getParentNode(element){if(getNodeName(element)==='html'){return element;}
return(element.assignedSlot||element.parentNode||(isShadowRoot(element)?element.host:null)||getDocumentElement(element));}
function getScrollParent(node){if(['html','body','#document'].indexOf(getNodeName(node))>=0){return node.ownerDocument.body;}
if(isHTMLElement(node)&&isScrollParent(node)){return node;}
return getScrollParent(getParentNode(node));}
function listScrollParents(element,list){var _element$ownerDocumen;if(list===void 0){list=[];}
var scrollParent=getScrollParent(element);var isBody=scrollParent===((_element$ownerDocumen=element.ownerDocument)==null?void 0:_element$ownerDocumen.body);var win=getWindow(scrollParent);var target=isBody?[win].concat(win.visualViewport||[],isScrollParent(scrollParent)?scrollParent:[]):scrollParent;var updatedList=list.concat(target);return isBody?updatedList:updatedList.concat(listScrollParents(getParentNode(target)));}
function isTableElement(element){return['table','td','th'].indexOf(getNodeName(element))>=0;}
function getTrueOffsetParent(element){if(!isHTMLElement(element)||getComputedStyle(element).position==='fixed'){return null;}
return element.offsetParent;}
function getContainingBlock(element){var isFirefox=navigator.userAgent.toLowerCase().indexOf('firefox')!==-1;var isIE=navigator.userAgent.indexOf('Trident')!==-1;if(isIE&&isHTMLElement(element)){var elementCss=getComputedStyle(element);if(elementCss.position==='fixed'){return null;}}
var currentNode=getParentNode(element);while(isHTMLElement(currentNode)&&['html','body'].indexOf(getNodeName(currentNode))<0){var css=getComputedStyle(currentNode);if(css.transform!=='none'||css.perspective!=='none'||css.contain==='paint'||['transform','perspective'].indexOf(css.willChange)!==-1||isFirefox&&css.willChange==='filter'||isFirefox&&css.filter&&css.filter!=='none'){return currentNode;}else{currentNode=currentNode.parentNode;}}
return null;}
function getOffsetParent(element){var window=getWindow(element);var offsetParent=getTrueOffsetParent(element);while(offsetParent&&isTableElement(offsetParent)&&getComputedStyle(offsetParent).position==='static'){offsetParent=getTrueOffsetParent(offsetParent);}
if(offsetParent&&(getNodeName(offsetParent)==='html'||getNodeName(offsetParent)==='body'&&getComputedStyle(offsetParent).position==='static')){return window;}
return offsetParent||getContainingBlock(element)||window;}
var top='top';var bottom='bottom';var right='right';var left='left';var auto='auto';var basePlacements=[top,bottom,right,left];var start='start';var end='end';var clippingParents='clippingParents';var viewport='viewport';var popper='popper';var reference='reference';var variationPlacements=basePlacements.reduce(function(acc,placement){return acc.concat([placement+"-"+start,placement+"-"+end]);},[]);var placements=[].concat(basePlacements,[auto]).reduce(function(acc,placement){return acc.concat([placement,placement+"-"+start,placement+"-"+end]);},[]);var beforeRead='beforeRead';var read='read';var afterRead='afterRead';var beforeMain='beforeMain';var main='main';var afterMain='afterMain';var beforeWrite='beforeWrite';var write='write';var afterWrite='afterWrite';var modifierPhases=[beforeRead,read,afterRead,beforeMain,main,afterMain,beforeWrite,write,afterWrite];function order(modifiers){var map=new Map();var visited=new Set();var result=[];modifiers.forEach(function(modifier){map.set(modifier.name,modifier);});function sort(modifier){visited.add(modifier.name);var requires=[].concat(modifier.requires||[],modifier.requiresIfExists||[]);requires.forEach(function(dep){if(!visited.has(dep)){var depModifier=map.get(dep);if(depModifier){sort(depModifier);}}});result.push(modifier);}
modifiers.forEach(function(modifier){if(!visited.has(modifier.name)){sort(modifier);}});return result;}
function orderModifiers(modifiers){var orderedModifiers=order(modifiers);return modifierPhases.reduce(function(acc,phase){return acc.concat(orderedModifiers.filter(function(modifier){return modifier.phase===phase;}));},[]);}
function debounce(fn){var pending;return function(){if(!pending){pending=new Promise(function(resolve){Promise.resolve().then(function(){pending=undefined;resolve(fn());});});}
return pending;};}
function format(str){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key];}
return[].concat(args).reduce(function(p,c){return p.replace(/%s/,c);},str);}
var INVALID_MODIFIER_ERROR='Popper: modifier "%s" provided an invalid %s property, expected %s but got %s';var MISSING_DEPENDENCY_ERROR='Popper: modifier "%s" requires "%s", but "%s" modifier is not available';var VALID_PROPERTIES=['name','enabled','phase','fn','effect','requires','options'];function validateModifiers(modifiers){modifiers.forEach(function(modifier){[].concat(Object.keys(modifier),VALID_PROPERTIES).filter(function(value,index,self){return self.indexOf(value)===index;}).forEach(function(key){switch(key){case'name':if(typeof modifier.name!=='string'){console.error(format(INVALID_MODIFIER_ERROR,String(modifier.name),'"name"','"string"',"\""+String(modifier.name)+"\""));}
break;case'enabled':if(typeof modifier.enabled!=='boolean'){console.error(format(INVALID_MODIFIER_ERROR,modifier.name,'"enabled"','"boolean"',"\""+String(modifier.enabled)+"\""));}
break;case'phase':if(modifierPhases.indexOf(modifier.phase)<0){console.error(format(INVALID_MODIFIER_ERROR,modifier.name,'"phase"',"either "+modifierPhases.join(', '),"\""+String(modifier.phase)+"\""));}
break;case'fn':if(typeof modifier.fn!=='function'){console.error(format(INVALID_MODIFIER_ERROR,modifier.name,'"fn"','"function"',"\""+String(modifier.fn)+"\""));}
break;case'effect':if(modifier.effect!=null&&typeof modifier.effect!=='function'){console.error(format(INVALID_MODIFIER_ERROR,modifier.name,'"effect"','"function"',"\""+String(modifier.fn)+"\""));}
break;case'requires':if(modifier.requires!=null&&!Array.isArray(modifier.requires)){console.error(format(INVALID_MODIFIER_ERROR,modifier.name,'"requires"','"array"',"\""+String(modifier.requires)+"\""));}
break;case'requiresIfExists':if(!Array.isArray(modifier.requiresIfExists)){console.error(format(INVALID_MODIFIER_ERROR,modifier.name,'"requiresIfExists"','"array"',"\""+String(modifier.requiresIfExists)+"\""));}
break;case'options':case'data':break;default:console.error("PopperJS: an invalid property has been provided to the \""+modifier.name+"\" modifier, valid properties are "+VALID_PROPERTIES.map(function(s){return"\""+s+"\"";}).join(', ')+"; but \""+key+"\" was provided.");}
modifier.requires&&modifier.requires.forEach(function(requirement){if(modifiers.find(function(mod){return mod.name===requirement;})==null){console.error(format(MISSING_DEPENDENCY_ERROR,String(modifier.name),requirement,requirement));}});});});}
function uniqueBy(arr,fn){var identifiers=new Set();return arr.filter(function(item){var identifier=fn(item);if(!identifiers.has(identifier)){identifiers.add(identifier);return true;}});}
function getBasePlacement(placement){return placement.split('-')[0];}
function mergeByName(modifiers){var merged=modifiers.reduce(function(merged,current){var existing=merged[current.name];merged[current.name]=existing?Object.assign({},existing,current,{options:Object.assign({},existing.options,current.options),data:Object.assign({},existing.data,current.data)}):current;return merged;},{});return Object.keys(merged).map(function(key){return merged[key];});}
function getViewportRect(element){var win=getWindow(element);var html=getDocumentElement(element);var visualViewport=win.visualViewport;var width=html.clientWidth;var height=html.clientHeight;var x=0;var y=0;if(visualViewport){width=visualViewport.width;height=visualViewport.height;if(!/^((?!chrome|android).)*safari/i.test(navigator.userAgent)){x=visualViewport.offsetLeft;y=visualViewport.offsetTop;}}
return{width:width,height:height,x:x+getWindowScrollBarX(element),y:y};}
function getDocumentRect(element){var _element$ownerDocumen;var html=getDocumentElement(element);var winScroll=getWindowScroll(element);var body=(_element$ownerDocumen=element.ownerDocument)==null?void 0:_element$ownerDocumen.body;var width=max(html.scrollWidth,html.clientWidth,body?body.scrollWidth:0,body?body.clientWidth:0);var height=max(html.scrollHeight,html.clientHeight,body?body.scrollHeight:0,body?body.clientHeight:0);var x=-winScroll.scrollLeft+getWindowScrollBarX(element);var y=-winScroll.scrollTop;if(getComputedStyle(body||html).direction==='rtl'){x+=max(html.clientWidth,body?body.clientWidth:0)-width;}
return{width:width,height:height,x:x,y:y};}
function contains(parent,child){var rootNode=child.getRootNode&&child.getRootNode();if(parent.contains(child)){return true;}
else if(rootNode&&isShadowRoot(rootNode)){var next=child;do{if(next&&parent.isSameNode(next)){return true;}
next=next.parentNode||next.host;}while(next);}
return false;}
function rectToClientRect(rect){return Object.assign({},rect,{left:rect.x,top:rect.y,right:rect.x+rect.width,bottom:rect.y+rect.height});}
function getInnerBoundingClientRect(element){var rect=getBoundingClientRect(element);rect.top=rect.top+element.clientTop;rect.left=rect.left+element.clientLeft;rect.bottom=rect.top+element.clientHeight;rect.right=rect.left+element.clientWidth;rect.width=element.clientWidth;rect.height=element.clientHeight;rect.x=rect.left;rect.y=rect.top;return rect;}
function getClientRectFromMixedType(element,clippingParent){return clippingParent===viewport?rectToClientRect(getViewportRect(element)):isElement(clippingParent)?getInnerBoundingClientRect(clippingParent):rectToClientRect(getDocumentRect(getDocumentElement(element)));}
function getClippingParents(element){var clippingParents=listScrollParents(getParentNode(element));var canEscapeClipping=['absolute','fixed'].indexOf(getComputedStyle(element).position)>=0;var clipperElement=canEscapeClipping&&isHTMLElement(element)?getOffsetParent(element):element;if(!isElement(clipperElement)){return[];}
return clippingParents.filter(function(clippingParent){return isElement(clippingParent)&&contains(clippingParent,clipperElement)&&getNodeName(clippingParent)!=='body';});}
function getClippingRect(element,boundary,rootBoundary){var mainClippingParents=boundary==='clippingParents'?getClippingParents(element):[].concat(boundary);var clippingParents=[].concat(mainClippingParents,[rootBoundary]);var firstClippingParent=clippingParents[0];var clippingRect=clippingParents.reduce(function(accRect,clippingParent){var rect=getClientRectFromMixedType(element,clippingParent);accRect.top=max(rect.top,accRect.top);accRect.right=min(rect.right,accRect.right);accRect.bottom=min(rect.bottom,accRect.bottom);accRect.left=max(rect.left,accRect.left);return accRect;},getClientRectFromMixedType(element,firstClippingParent));clippingRect.width=clippingRect.right-clippingRect.left;clippingRect.height=clippingRect.bottom-clippingRect.top;clippingRect.x=clippingRect.left;clippingRect.y=clippingRect.top;return clippingRect;}
function getVariation(placement){return placement.split('-')[1];}
function getMainAxisFromPlacement(placement){return['top','bottom'].indexOf(placement)>=0?'x':'y';}
function computeOffsets(_ref){var reference=_ref.reference,element=_ref.element,placement=_ref.placement;var basePlacement=placement?getBasePlacement(placement):null;var variation=placement?getVariation(placement):null;var commonX=reference.x+reference.width/2-element.width/2;var commonY=reference.y+reference.height/2-element.height/2;var offsets;switch(basePlacement){case top:offsets={x:commonX,y:reference.y-element.height};break;case bottom:offsets={x:commonX,y:reference.y+reference.height};break;case right:offsets={x:reference.x+reference.width,y:commonY};break;case left:offsets={x:reference.x-element.width,y:commonY};break;default:offsets={x:reference.x,y:reference.y};}
var mainAxis=basePlacement?getMainAxisFromPlacement(basePlacement):null;if(mainAxis!=null){var len=mainAxis==='y'?'height':'width';switch(variation){case start:offsets[mainAxis]=offsets[mainAxis]-(reference[len]/2-element[len]/2);break;case end:offsets[mainAxis]=offsets[mainAxis]+(reference[len]/2-element[len]/2);break;}}
return offsets;}
function getFreshSideObject(){return{top:0,right:0,bottom:0,left:0};}
function mergePaddingObject(paddingObject){return Object.assign({},getFreshSideObject(),paddingObject);}
function expandToHashMap(value,keys){return keys.reduce(function(hashMap,key){hashMap[key]=value;return hashMap;},{});}
function detectOverflow(state,options){if(options===void 0){options={};}
var _options=options,_options$placement=_options.placement,placement=_options$placement===void 0?state.placement:_options$placement,_options$boundary=_options.boundary,boundary=_options$boundary===void 0?clippingParents:_options$boundary,_options$rootBoundary=_options.rootBoundary,rootBoundary=_options$rootBoundary===void 0?viewport:_options$rootBoundary,_options$elementConte=_options.elementContext,elementContext=_options$elementConte===void 0?popper:_options$elementConte,_options$altBoundary=_options.altBoundary,altBoundary=_options$altBoundary===void 0?false:_options$altBoundary,_options$padding=_options.padding,padding=_options$padding===void 0?0:_options$padding;var paddingObject=mergePaddingObject(typeof padding!=='number'?padding:expandToHashMap(padding,basePlacements));var altContext=elementContext===popper?reference:popper;var popperRect=state.rects.popper;var element=state.elements[altBoundary?altContext:elementContext];var clippingClientRect=getClippingRect(isElement(element)?element:element.contextElement||getDocumentElement(state.elements.popper),boundary,rootBoundary);var referenceClientRect=getBoundingClientRect(state.elements.reference);var popperOffsets=computeOffsets({reference:referenceClientRect,element:popperRect,strategy:'absolute',placement:placement});var popperClientRect=rectToClientRect(Object.assign({},popperRect,popperOffsets));var elementClientRect=elementContext===popper?popperClientRect:referenceClientRect;var overflowOffsets={top:clippingClientRect.top-elementClientRect.top+paddingObject.top,bottom:elementClientRect.bottom-clippingClientRect.bottom+paddingObject.bottom,left:clippingClientRect.left-elementClientRect.left+paddingObject.left,right:elementClientRect.right-clippingClientRect.right+paddingObject.right};var offsetData=state.modifiersData.offset;if(elementContext===popper&&offsetData){var offset=offsetData[placement];Object.keys(overflowOffsets).forEach(function(key){var multiply=[right,bottom].indexOf(key)>=0?1:-1;var axis=[top,bottom].indexOf(key)>=0?'y':'x';overflowOffsets[key]+=offset[axis]*multiply;});}
return overflowOffsets;}
var INVALID_ELEMENT_ERROR='Popper: Invalid reference or popper argument provided. They must be either a DOM element or virtual element.';var INFINITE_LOOP_ERROR='Popper: An infinite loop in the modifiers cycle has been detected! The cycle has been interrupted to prevent a browser crash.';var DEFAULT_OPTIONS={placement:'bottom',modifiers:[],strategy:'absolute'};function areValidElements(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}
return!args.some(function(element){return!(element&&typeof element.getBoundingClientRect==='function');});}
function popperGenerator(generatorOptions){if(generatorOptions===void 0){generatorOptions={};}
var _generatorOptions=generatorOptions,_generatorOptions$def=_generatorOptions.defaultModifiers,defaultModifiers=_generatorOptions$def===void 0?[]:_generatorOptions$def,_generatorOptions$def2=_generatorOptions.defaultOptions,defaultOptions=_generatorOptions$def2===void 0?DEFAULT_OPTIONS:_generatorOptions$def2;return function createPopper(reference,popper,options){if(options===void 0){options=defaultOptions;}
var state={placement:'bottom',orderedModifiers:[],options:Object.assign({},DEFAULT_OPTIONS,defaultOptions),modifiersData:{},elements:{reference:reference,popper:popper},attributes:{},styles:{}};var effectCleanupFns=[];var isDestroyed=false;var instance={state:state,setOptions:function setOptions(setOptionsAction){var options=typeof setOptionsAction==='function'?setOptionsAction(state.options):setOptionsAction;cleanupModifierEffects();state.options=Object.assign({},defaultOptions,state.options,options);state.scrollParents={reference:isElement(reference)?listScrollParents(reference):reference.contextElement?listScrollParents(reference.contextElement):[],popper:listScrollParents(popper)};var orderedModifiers=orderModifiers(mergeByName([].concat(defaultModifiers,state.options.modifiers)));state.orderedModifiers=orderedModifiers.filter(function(m){return m.enabled;});{var modifiers=uniqueBy([].concat(orderedModifiers,state.options.modifiers),function(_ref){var name=_ref.name;return name;});validateModifiers(modifiers);if(getBasePlacement(state.options.placement)===auto){var flipModifier=state.orderedModifiers.find(function(_ref2){var name=_ref2.name;return name==='flip';});if(!flipModifier){console.error(['Popper: "auto" placements require the "flip" modifier be','present and enabled to work.'].join(' '));}}
var _getComputedStyle=getComputedStyle(popper),marginTop=_getComputedStyle.marginTop,marginRight=_getComputedStyle.marginRight,marginBottom=_getComputedStyle.marginBottom,marginLeft=_getComputedStyle.marginLeft;if([marginTop,marginRight,marginBottom,marginLeft].some(function(margin){return parseFloat(margin);})){console.warn(['Popper: CSS "margin" styles cannot be used to apply padding','between the popper and its reference element or boundary.','To replicate margin, use the `offset` modifier, as well as','the `padding` option in the `preventOverflow` and `flip`','modifiers.'].join(' '));}}
runModifierEffects();return instance.update();},forceUpdate:function forceUpdate(){if(isDestroyed){return;}
var _state$elements=state.elements,reference=_state$elements.reference,popper=_state$elements.popper;if(!areValidElements(reference,popper)){{console.error(INVALID_ELEMENT_ERROR);}
return;}
state.rects={reference:getCompositeRect(reference,getOffsetParent(popper),state.options.strategy==='fixed'),popper:getLayoutRect(popper)};state.reset=false;state.placement=state.options.placement;state.orderedModifiers.forEach(function(modifier){return state.modifiersData[modifier.name]=Object.assign({},modifier.data);});var __debug_loops__=0;for(var index=0;index<state.orderedModifiers.length;index++){{__debug_loops__+=1;if(__debug_loops__>100){console.error(INFINITE_LOOP_ERROR);break;}}
if(state.reset===true){state.reset=false;index=-1;continue;}
var _state$orderedModifie=state.orderedModifiers[index],fn=_state$orderedModifie.fn,_state$orderedModifie2=_state$orderedModifie.options,_options=_state$orderedModifie2===void 0?{}:_state$orderedModifie2,name=_state$orderedModifie.name;if(typeof fn==='function'){state=fn({state:state,options:_options,name:name,instance:instance})||state;}}},update:debounce(function(){return new Promise(function(resolve){instance.forceUpdate();resolve(state);});}),destroy:function destroy(){cleanupModifierEffects();isDestroyed=true;}};if(!areValidElements(reference,popper)){{console.error(INVALID_ELEMENT_ERROR);}
return instance;}
instance.setOptions(options).then(function(state){if(!isDestroyed&&options.onFirstUpdate){options.onFirstUpdate(state);}});function runModifierEffects(){state.orderedModifiers.forEach(function(_ref3){var name=_ref3.name,_ref3$options=_ref3.options,options=_ref3$options===void 0?{}:_ref3$options,effect=_ref3.effect;if(typeof effect==='function'){var cleanupFn=effect({state:state,name:name,instance:instance,options:options});var noopFn=function noopFn(){};effectCleanupFns.push(cleanupFn||noopFn);}});}
function cleanupModifierEffects(){effectCleanupFns.forEach(function(fn){return fn();});effectCleanupFns=[];}
return instance;};}
var passive={passive:true};function effect$2(_ref){var state=_ref.state,instance=_ref.instance,options=_ref.options;var _options$scroll=options.scroll,scroll=_options$scroll===void 0?true:_options$scroll,_options$resize=options.resize,resize=_options$resize===void 0?true:_options$resize;var window=getWindow(state.elements.popper);var scrollParents=[].concat(state.scrollParents.reference,state.scrollParents.popper);if(scroll){scrollParents.forEach(function(scrollParent){scrollParent.addEventListener('scroll',instance.update,passive);});}
if(resize){window.addEventListener('resize',instance.update,passive);}
return function(){if(scroll){scrollParents.forEach(function(scrollParent){scrollParent.removeEventListener('scroll',instance.update,passive);});}
if(resize){window.removeEventListener('resize',instance.update,passive);}};}
var eventListeners={name:'eventListeners',enabled:true,phase:'write',fn:function fn(){},effect:effect$2,data:{}};function popperOffsets(_ref){var state=_ref.state,name=_ref.name;state.modifiersData[name]=computeOffsets({reference:state.rects.reference,element:state.rects.popper,strategy:'absolute',placement:state.placement});}
var popperOffsets$1={name:'popperOffsets',enabled:true,phase:'read',fn:popperOffsets,data:{}};var unsetSides={top:'auto',right:'auto',bottom:'auto',left:'auto'};function roundOffsetsByDPR(_ref){var x=_ref.x,y=_ref.y;var win=window;var dpr=win.devicePixelRatio||1;return{x:round(x*dpr)/dpr||0,y:round(y*dpr)/dpr||0};}
function mapToStyles(_ref2){var _Object$assign2;var popper=_ref2.popper,popperRect=_ref2.popperRect,placement=_ref2.placement,variation=_ref2.variation,offsets=_ref2.offsets,position=_ref2.position,gpuAcceleration=_ref2.gpuAcceleration,adaptive=_ref2.adaptive,roundOffsets=_ref2.roundOffsets,isFixed=_ref2.isFixed;var _offsets$x=offsets.x,x=_offsets$x===void 0?0:_offsets$x,_offsets$y=offsets.y,y=_offsets$y===void 0?0:_offsets$y;var _ref3=typeof roundOffsets==='function'?roundOffsets({x:x,y:y}):{x:x,y:y};x=_ref3.x;y=_ref3.y;var hasX=offsets.hasOwnProperty('x');var hasY=offsets.hasOwnProperty('y');var sideX=left;var sideY=top;var win=window;if(adaptive){var offsetParent=getOffsetParent(popper);var heightProp='clientHeight';var widthProp='clientWidth';if(offsetParent===getWindow(popper)){offsetParent=getDocumentElement(popper);if(getComputedStyle(offsetParent).position!=='static'&&position==='absolute'){heightProp='scrollHeight';widthProp='scrollWidth';}}
offsetParent=offsetParent;if(placement===top||(placement===left||placement===right)&&variation===end){sideY=bottom;var offsetY=isFixed&&win.visualViewport?win.visualViewport.height:offsetParent[heightProp];y-=offsetY-popperRect.height;y*=gpuAcceleration?1:-1;}
if(placement===left||(placement===top||placement===bottom)&&variation===end){sideX=right;var offsetX=isFixed&&win.visualViewport?win.visualViewport.width:offsetParent[widthProp];x-=offsetX-popperRect.width;x*=gpuAcceleration?1:-1;}}
var commonStyles=Object.assign({position:position},adaptive&&unsetSides);var _ref4=roundOffsets===true?roundOffsetsByDPR({x:x,y:y}):{x:x,y:y};x=_ref4.x;y=_ref4.y;if(gpuAcceleration){var _Object$assign;return Object.assign({},commonStyles,(_Object$assign={},_Object$assign[sideY]=hasY?'0':'',_Object$assign[sideX]=hasX?'0':'',_Object$assign.transform=(win.devicePixelRatio||1)<=1?"translate("+x+"px, "+y+"px)":"translate3d("+x+"px, "+y+"px, 0)",_Object$assign));}
return Object.assign({},commonStyles,(_Object$assign2={},_Object$assign2[sideY]=hasY?y+"px":'',_Object$assign2[sideX]=hasX?x+"px":'',_Object$assign2.transform='',_Object$assign2));}
function computeStyles(_ref5){var state=_ref5.state,options=_ref5.options;var _options$gpuAccelerat=options.gpuAcceleration,gpuAcceleration=_options$gpuAccelerat===void 0?true:_options$gpuAccelerat,_options$adaptive=options.adaptive,adaptive=_options$adaptive===void 0?true:_options$adaptive,_options$roundOffsets=options.roundOffsets,roundOffsets=_options$roundOffsets===void 0?true:_options$roundOffsets;{var transitionProperty=getComputedStyle(state.elements.popper).transitionProperty||'';if(adaptive&&['transform','top','right','bottom','left'].some(function(property){return transitionProperty.indexOf(property)>=0;})){console.warn(['Popper: Detected CSS transitions on at least one of the following','CSS properties: "transform", "top", "right", "bottom", "left".','\n\n','Disable the "computeStyles" modifier\'s `adaptive` option to allow','for smooth transitions, or remove these properties from the CSS','transition declaration on the popper element if only transitioning','opacity or background-color for example.','\n\n','We recommend using the popper element as a wrapper around an inner','element that can have any CSS property transitioned for animations.'].join(' '));}}
var commonStyles={placement:getBasePlacement(state.placement),variation:getVariation(state.placement),popper:state.elements.popper,popperRect:state.rects.popper,gpuAcceleration:gpuAcceleration,isFixed:state.options.strategy==='fixed'};if(state.modifiersData.popperOffsets!=null){state.styles.popper=Object.assign({},state.styles.popper,mapToStyles(Object.assign({},commonStyles,{offsets:state.modifiersData.popperOffsets,position:state.options.strategy,adaptive:adaptive,roundOffsets:roundOffsets})));}
if(state.modifiersData.arrow!=null){state.styles.arrow=Object.assign({},state.styles.arrow,mapToStyles(Object.assign({},commonStyles,{offsets:state.modifiersData.arrow,position:'absolute',adaptive:false,roundOffsets:roundOffsets})));}
state.attributes.popper=Object.assign({},state.attributes.popper,{'data-popper-placement':state.placement});}
var computeStyles$1={name:'computeStyles',enabled:true,phase:'beforeWrite',fn:computeStyles,data:{}};function applyStyles(_ref){var state=_ref.state;Object.keys(state.elements).forEach(function(name){var style=state.styles[name]||{};var attributes=state.attributes[name]||{};var element=state.elements[name];if(!isHTMLElement(element)||!getNodeName(element)){return;}
Object.assign(element.style,style);Object.keys(attributes).forEach(function(name){var value=attributes[name];if(value===false){element.removeAttribute(name);}else{element.setAttribute(name,value===true?'':value);}});});}
function effect$1(_ref2){var state=_ref2.state;var initialStyles={popper:{position:state.options.strategy,left:'0',top:'0',margin:'0'},arrow:{position:'absolute'},reference:{}};Object.assign(state.elements.popper.style,initialStyles.popper);state.styles=initialStyles;if(state.elements.arrow){Object.assign(state.elements.arrow.style,initialStyles.arrow);}
return function(){Object.keys(state.elements).forEach(function(name){var element=state.elements[name];var attributes=state.attributes[name]||{};var styleProperties=Object.keys(state.styles.hasOwnProperty(name)?state.styles[name]:initialStyles[name]);var style=styleProperties.reduce(function(style,property){style[property]='';return style;},{});if(!isHTMLElement(element)||!getNodeName(element)){return;}
Object.assign(element.style,style);Object.keys(attributes).forEach(function(attribute){element.removeAttribute(attribute);});});};}
var applyStyles$1={name:'applyStyles',enabled:true,phase:'write',fn:applyStyles,effect:effect$1,requires:['computeStyles']};function distanceAndSkiddingToXY(placement,rects,offset){var basePlacement=getBasePlacement(placement);var invertDistance=[left,top].indexOf(basePlacement)>=0?-1:1;var _ref=typeof offset==='function'?offset(Object.assign({},rects,{placement:placement})):offset,skidding=_ref[0],distance=_ref[1];skidding=skidding||0;distance=(distance||0)*invertDistance;return[left,right].indexOf(basePlacement)>=0?{x:distance,y:skidding}:{x:skidding,y:distance};}
function offset(_ref2){var state=_ref2.state,options=_ref2.options,name=_ref2.name;var _options$offset=options.offset,offset=_options$offset===void 0?[0,0]:_options$offset;var data=placements.reduce(function(acc,placement){acc[placement]=distanceAndSkiddingToXY(placement,state.rects,offset);return acc;},{});var _data$state$placement=data[state.placement],x=_data$state$placement.x,y=_data$state$placement.y;if(state.modifiersData.popperOffsets!=null){state.modifiersData.popperOffsets.x+=x;state.modifiersData.popperOffsets.y+=y;}
state.modifiersData[name]=data;}
var offset$1={name:'offset',enabled:true,phase:'main',requires:['popperOffsets'],fn:offset};var hash$1={left:'right',right:'left',bottom:'top',top:'bottom'};function getOppositePlacement(placement){return placement.replace(/left|right|bottom|top/g,function(matched){return hash$1[matched];});}
var hash={start:'end',end:'start'};function getOppositeVariationPlacement(placement){return placement.replace(/start|end/g,function(matched){return hash[matched];});}
function computeAutoPlacement(state,options){if(options===void 0){options={};}
var _options=options,placement=_options.placement,boundary=_options.boundary,rootBoundary=_options.rootBoundary,padding=_options.padding,flipVariations=_options.flipVariations,_options$allowedAutoP=_options.allowedAutoPlacements,allowedAutoPlacements=_options$allowedAutoP===void 0?placements:_options$allowedAutoP;var variation=getVariation(placement);var placements$1=variation?flipVariations?variationPlacements:variationPlacements.filter(function(placement){return getVariation(placement)===variation;}):basePlacements;var allowedPlacements=placements$1.filter(function(placement){return allowedAutoPlacements.indexOf(placement)>=0;});if(allowedPlacements.length===0){allowedPlacements=placements$1;{console.error(['Popper: The `allowedAutoPlacements` option did not allow any','placements. Ensure the `placement` option matches the variation','of the allowed placements.','For example, "auto" cannot be used to allow "bottom-start".','Use "auto-start" instead.'].join(' '));}}
var overflows=allowedPlacements.reduce(function(acc,placement){acc[placement]=detectOverflow(state,{placement:placement,boundary:boundary,rootBoundary:rootBoundary,padding:padding})[getBasePlacement(placement)];return acc;},{});return Object.keys(overflows).sort(function(a,b){return overflows[a]-overflows[b];});}
function getExpandedFallbackPlacements(placement){if(getBasePlacement(placement)===auto){return[];}
var oppositePlacement=getOppositePlacement(placement);return[getOppositeVariationPlacement(placement),oppositePlacement,getOppositeVariationPlacement(oppositePlacement)];}
function flip(_ref){var state=_ref.state,options=_ref.options,name=_ref.name;if(state.modifiersData[name]._skip){return;}
var _options$mainAxis=options.mainAxis,checkMainAxis=_options$mainAxis===void 0?true:_options$mainAxis,_options$altAxis=options.altAxis,checkAltAxis=_options$altAxis===void 0?true:_options$altAxis,specifiedFallbackPlacements=options.fallbackPlacements,padding=options.padding,boundary=options.boundary,rootBoundary=options.rootBoundary,altBoundary=options.altBoundary,_options$flipVariatio=options.flipVariations,flipVariations=_options$flipVariatio===void 0?true:_options$flipVariatio,allowedAutoPlacements=options.allowedAutoPlacements;var preferredPlacement=state.options.placement;var basePlacement=getBasePlacement(preferredPlacement);var isBasePlacement=basePlacement===preferredPlacement;var fallbackPlacements=specifiedFallbackPlacements||(isBasePlacement||!flipVariations?[getOppositePlacement(preferredPlacement)]:getExpandedFallbackPlacements(preferredPlacement));var placements=[preferredPlacement].concat(fallbackPlacements).reduce(function(acc,placement){return acc.concat(getBasePlacement(placement)===auto?computeAutoPlacement(state,{placement:placement,boundary:boundary,rootBoundary:rootBoundary,padding:padding,flipVariations:flipVariations,allowedAutoPlacements:allowedAutoPlacements}):placement);},[]);var referenceRect=state.rects.reference;var popperRect=state.rects.popper;var checksMap=new Map();var makeFallbackChecks=true;var firstFittingPlacement=placements[0];for(var i=0;i<placements.length;i++){var placement=placements[i];var _basePlacement=getBasePlacement(placement);var isStartVariation=getVariation(placement)===start;var isVertical=[top,bottom].indexOf(_basePlacement)>=0;var len=isVertical?'width':'height';var overflow=detectOverflow(state,{placement:placement,boundary:boundary,rootBoundary:rootBoundary,altBoundary:altBoundary,padding:padding});var mainVariationSide=isVertical?isStartVariation?right:left:isStartVariation?bottom:top;if(referenceRect[len]>popperRect[len]){mainVariationSide=getOppositePlacement(mainVariationSide);}
var altVariationSide=getOppositePlacement(mainVariationSide);var checks=[];if(checkMainAxis){checks.push(overflow[_basePlacement]<=0);}
if(checkAltAxis){checks.push(overflow[mainVariationSide]<=0,overflow[altVariationSide]<=0);}
if(checks.every(function(check){return check;})){firstFittingPlacement=placement;makeFallbackChecks=false;break;}
checksMap.set(placement,checks);}
if(makeFallbackChecks){var numberOfChecks=flipVariations?3:1;var _loop=function _loop(_i){var fittingPlacement=placements.find(function(placement){var checks=checksMap.get(placement);if(checks){return checks.slice(0,_i).every(function(check){return check;});}});if(fittingPlacement){firstFittingPlacement=fittingPlacement;return"break";}};for(var _i=numberOfChecks;_i>0;_i--){var _ret=_loop(_i);if(_ret==="break")break;}}
if(state.placement!==firstFittingPlacement){state.modifiersData[name]._skip=true;state.placement=firstFittingPlacement;state.reset=true;}}
var flip$1={name:'flip',enabled:true,phase:'main',fn:flip,requiresIfExists:['offset'],data:{_skip:false}};function getAltAxis(axis){return axis==='x'?'y':'x';}
function within(min$1,value,max$1){return max(min$1,min(value,max$1));}
function withinMaxClamp(min,value,max){var v=within(min,value,max);return v>max?max:v;}
function preventOverflow(_ref){var state=_ref.state,options=_ref.options,name=_ref.name;var _options$mainAxis=options.mainAxis,checkMainAxis=_options$mainAxis===void 0?true:_options$mainAxis,_options$altAxis=options.altAxis,checkAltAxis=_options$altAxis===void 0?false:_options$altAxis,boundary=options.boundary,rootBoundary=options.rootBoundary,altBoundary=options.altBoundary,padding=options.padding,_options$tether=options.tether,tether=_options$tether===void 0?true:_options$tether,_options$tetherOffset=options.tetherOffset,tetherOffset=_options$tetherOffset===void 0?0:_options$tetherOffset;var overflow=detectOverflow(state,{boundary:boundary,rootBoundary:rootBoundary,padding:padding,altBoundary:altBoundary});var basePlacement=getBasePlacement(state.placement);var variation=getVariation(state.placement);var isBasePlacement=!variation;var mainAxis=getMainAxisFromPlacement(basePlacement);var altAxis=getAltAxis(mainAxis);var popperOffsets=state.modifiersData.popperOffsets;var referenceRect=state.rects.reference;var popperRect=state.rects.popper;var tetherOffsetValue=typeof tetherOffset==='function'?tetherOffset(Object.assign({},state.rects,{placement:state.placement})):tetherOffset;var normalizedTetherOffsetValue=typeof tetherOffsetValue==='number'?{mainAxis:tetherOffsetValue,altAxis:tetherOffsetValue}:Object.assign({mainAxis:0,altAxis:0},tetherOffsetValue);var offsetModifierState=state.modifiersData.offset?state.modifiersData.offset[state.placement]:null;var data={x:0,y:0};if(!popperOffsets){return;}
if(checkMainAxis){var _offsetModifierState$;var mainSide=mainAxis==='y'?top:left;var altSide=mainAxis==='y'?bottom:right;var len=mainAxis==='y'?'height':'width';var offset=popperOffsets[mainAxis];var min$1=offset+overflow[mainSide];var max$1=offset-overflow[altSide];var additive=tether?-popperRect[len]/2:0;var minLen=variation===start?referenceRect[len]:popperRect[len];var maxLen=variation===start?-popperRect[len]:-referenceRect[len];var arrowElement=state.elements.arrow;var arrowRect=tether&&arrowElement?getLayoutRect(arrowElement):{width:0,height:0};var arrowPaddingObject=state.modifiersData['arrow#persistent']?state.modifiersData['arrow#persistent'].padding:getFreshSideObject();var arrowPaddingMin=arrowPaddingObject[mainSide];var arrowPaddingMax=arrowPaddingObject[altSide];var arrowLen=within(0,referenceRect[len],arrowRect[len]);var minOffset=isBasePlacement?referenceRect[len]/2-additive-arrowLen-arrowPaddingMin-normalizedTetherOffsetValue.mainAxis:minLen-arrowLen-arrowPaddingMin-normalizedTetherOffsetValue.mainAxis;var maxOffset=isBasePlacement?-referenceRect[len]/2+additive+arrowLen+arrowPaddingMax+normalizedTetherOffsetValue.mainAxis:maxLen+arrowLen+arrowPaddingMax+normalizedTetherOffsetValue.mainAxis;var arrowOffsetParent=state.elements.arrow&&getOffsetParent(state.elements.arrow);var clientOffset=arrowOffsetParent?mainAxis==='y'?arrowOffsetParent.clientTop||0:arrowOffsetParent.clientLeft||0:0;var offsetModifierValue=(_offsetModifierState$=offsetModifierState==null?void 0:offsetModifierState[mainAxis])!=null?_offsetModifierState$:0;var tetherMin=offset+minOffset-offsetModifierValue-clientOffset;var tetherMax=offset+maxOffset-offsetModifierValue;var preventedOffset=within(tether?min(min$1,tetherMin):min$1,offset,tether?max(max$1,tetherMax):max$1);popperOffsets[mainAxis]=preventedOffset;data[mainAxis]=preventedOffset-offset;}
if(checkAltAxis){var _offsetModifierState$2;var _mainSide=mainAxis==='x'?top:left;var _altSide=mainAxis==='x'?bottom:right;var _offset=popperOffsets[altAxis];var _len=altAxis==='y'?'height':'width';var _min=_offset+overflow[_mainSide];var _max=_offset-overflow[_altSide];var isOriginSide=[top,left].indexOf(basePlacement)!==-1;var _offsetModifierValue=(_offsetModifierState$2=offsetModifierState==null?void 0:offsetModifierState[altAxis])!=null?_offsetModifierState$2:0;var _tetherMin=isOriginSide?_min:_offset-referenceRect[_len]-popperRect[_len]-_offsetModifierValue+normalizedTetherOffsetValue.altAxis;var _tetherMax=isOriginSide?_offset+referenceRect[_len]+popperRect[_len]-_offsetModifierValue-normalizedTetherOffsetValue.altAxis:_max;var _preventedOffset=tether&&isOriginSide?withinMaxClamp(_tetherMin,_offset,_tetherMax):within(tether?_tetherMin:_min,_offset,tether?_tetherMax:_max);popperOffsets[altAxis]=_preventedOffset;data[altAxis]=_preventedOffset-_offset;}
state.modifiersData[name]=data;}
var preventOverflow$1={name:'preventOverflow',enabled:true,phase:'main',fn:preventOverflow,requiresIfExists:['offset']};var toPaddingObject=function toPaddingObject(padding,state){padding=typeof padding==='function'?padding(Object.assign({},state.rects,{placement:state.placement})):padding;return mergePaddingObject(typeof padding!=='number'?padding:expandToHashMap(padding,basePlacements));};function arrow(_ref){var _state$modifiersData$;var state=_ref.state,name=_ref.name,options=_ref.options;var arrowElement=state.elements.arrow;var popperOffsets=state.modifiersData.popperOffsets;var basePlacement=getBasePlacement(state.placement);var axis=getMainAxisFromPlacement(basePlacement);var isVertical=[left,right].indexOf(basePlacement)>=0;var len=isVertical?'height':'width';if(!arrowElement||!popperOffsets){return;}
var paddingObject=toPaddingObject(options.padding,state);var arrowRect=getLayoutRect(arrowElement);var minProp=axis==='y'?top:left;var maxProp=axis==='y'?bottom:right;var endDiff=state.rects.reference[len]+state.rects.reference[axis]-popperOffsets[axis]-state.rects.popper[len];var startDiff=popperOffsets[axis]-state.rects.reference[axis];var arrowOffsetParent=getOffsetParent(arrowElement);var clientSize=arrowOffsetParent?axis==='y'?arrowOffsetParent.clientHeight||0:arrowOffsetParent.clientWidth||0:0;var centerToReference=endDiff/2-startDiff/2;var min=paddingObject[minProp];var max=clientSize-arrowRect[len]-paddingObject[maxProp];var center=clientSize/2-arrowRect[len]/2+centerToReference;var offset=within(min,center,max);var axisProp=axis;state.modifiersData[name]=(_state$modifiersData$={},_state$modifiersData$[axisProp]=offset,_state$modifiersData$.centerOffset=offset-center,_state$modifiersData$);}
function effect(_ref2){var state=_ref2.state,options=_ref2.options;var _options$element=options.element,arrowElement=_options$element===void 0?'[data-popper-arrow]':_options$element;if(arrowElement==null){return;}
if(typeof arrowElement==='string'){arrowElement=state.elements.popper.querySelector(arrowElement);if(!arrowElement){return;}}
{if(!isHTMLElement(arrowElement)){console.error(['Popper: "arrow" element must be an HTMLElement (not an SVGElement).','To use an SVG arrow, wrap it in an HTMLElement that will be used as','the arrow.'].join(' '));}}
if(!contains(state.elements.popper,arrowElement)){{console.error(['Popper: "arrow" modifier\'s `element` must be a child of the popper','element.'].join(' '));}
return;}
state.elements.arrow=arrowElement;}
var arrow$1={name:'arrow',enabled:true,phase:'main',fn:arrow,effect:effect,requires:['popperOffsets'],requiresIfExists:['preventOverflow']};function getSideOffsets(overflow,rect,preventedOffsets){if(preventedOffsets===void 0){preventedOffsets={x:0,y:0};}
return{top:overflow.top-rect.height-preventedOffsets.y,right:overflow.right-rect.width+preventedOffsets.x,bottom:overflow.bottom-rect.height+preventedOffsets.y,left:overflow.left-rect.width-preventedOffsets.x};}
function isAnySideFullyClipped(overflow){return[top,right,bottom,left].some(function(side){return overflow[side]>=0;});}
function hide(_ref){var state=_ref.state,name=_ref.name;var referenceRect=state.rects.reference;var popperRect=state.rects.popper;var preventedOffsets=state.modifiersData.preventOverflow;var referenceOverflow=detectOverflow(state,{elementContext:'reference'});var popperAltOverflow=detectOverflow(state,{altBoundary:true});var referenceClippingOffsets=getSideOffsets(referenceOverflow,referenceRect);var popperEscapeOffsets=getSideOffsets(popperAltOverflow,popperRect,preventedOffsets);var isReferenceHidden=isAnySideFullyClipped(referenceClippingOffsets);var hasPopperEscaped=isAnySideFullyClipped(popperEscapeOffsets);state.modifiersData[name]={referenceClippingOffsets:referenceClippingOffsets,popperEscapeOffsets:popperEscapeOffsets,isReferenceHidden:isReferenceHidden,hasPopperEscaped:hasPopperEscaped};state.attributes.popper=Object.assign({},state.attributes.popper,{'data-popper-reference-hidden':isReferenceHidden,'data-popper-escaped':hasPopperEscaped});}
var hide$1={name:'hide',enabled:true,phase:'main',requiresIfExists:['preventOverflow'],fn:hide};var defaultModifiers$1=[eventListeners,popperOffsets$1,computeStyles$1,applyStyles$1];var createPopper$1=popperGenerator({defaultModifiers:defaultModifiers$1});var defaultModifiers=[eventListeners,popperOffsets$1,computeStyles$1,applyStyles$1,offset$1,flip$1,preventOverflow$1,arrow$1,hide$1];var createPopper=popperGenerator({defaultModifiers:defaultModifiers});exports.applyStyles=applyStyles$1;exports.arrow=arrow$1;exports.computeStyles=computeStyles$1;exports.createPopper=createPopper;exports.createPopperLite=createPopper$1;exports.defaultModifiers=defaultModifiers;exports.detectOverflow=detectOverflow;exports.eventListeners=eventListeners;exports.flip=flip$1;exports.hide=hide$1;exports.offset=offset$1;exports.popperGenerator=popperGenerator;exports.popperOffsets=popperOffsets$1;exports.preventOverflow=preventOverflow$1;Object.defineProperty(exports,'__esModule',{value:true});})));
(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?module.exports=factory(require('@popperjs/core')):typeof define==='function'&&define.amd?define(['@popperjs/core'],factory):(global=global||self,global.wpbc_tippy=factory(global.wpbc_Popper));}(this,(function(core){'use strict';var css=".tippy-box[data-animation=fade][data-state=hidden]{opacity:0}[data-tippy-root]{max-width:calc(100vw - 10px)}.tippy-box{position:relative;background-color:#333;color:#fff;border-radius:4px;font-size:14px;line-height:1.4;white-space:normal;outline:0;transition-property:transform,visibility,opacity}.tippy-box[data-placement^=top]>.tippy-arrow{bottom:0}.tippy-box[data-placement^=top]>.tippy-arrow:before{bottom:-7px;left:0;border-width:8px 8px 0;border-top-color:initial;transform-origin:center top}.tippy-box[data-placement^=bottom]>.tippy-arrow{top:0}.tippy-box[data-placement^=bottom]>.tippy-arrow:before{top:-7px;left:0;border-width:0 8px 8px;border-bottom-color:initial;transform-origin:center bottom}.tippy-box[data-placement^=left]>.tippy-arrow{right:0}.tippy-box[data-placement^=left]>.tippy-arrow:before{border-width:8px 0 8px 8px;border-left-color:initial;right:-7px;transform-origin:center left}.tippy-box[data-placement^=right]>.tippy-arrow{left:0}.tippy-box[data-placement^=right]>.tippy-arrow:before{left:-7px;border-width:8px 8px 8px 0;border-right-color:initial;transform-origin:center right}.tippy-box[data-inertia][data-state=visible]{transition-timing-function:cubic-bezier(.54,1.5,.38,1.11)}.tippy-arrow{width:16px;height:16px;color:#333}.tippy-arrow:before{content:\"\";position:absolute;border-color:transparent;border-style:solid}.tippy-content{position:relative;padding:5px 9px;z-index:1}";function injectCSS(css){var style=document.createElement('style');style.textContent=css;style.setAttribute('data-tippy-stylesheet','');var head=document.head;var firstStyleOrLinkTag=document.querySelector('head>style,head>link');if(firstStyleOrLinkTag){head.insertBefore(style,firstStyleOrLinkTag);}else{head.appendChild(style);}}
var isBrowser=typeof window!=='undefined'&&typeof document!=='undefined';var isIE11=isBrowser?!!window.msCrypto:false;var ROUND_ARROW='<svg width="16" height="6" xmlns="http://www.w3.org/2000/svg"><path d="M0 6s1.796-.013 4.67-3.615C5.851.9 6.93.006 8 0c1.07-.006 2.148.887 3.343 2.385C14.233 6.005 16 6 16 6H0z"></svg>';var BOX_CLASS="tippy-box";var CONTENT_CLASS="tippy-content";var BACKDROP_CLASS="tippy-backdrop";var ARROW_CLASS="tippy-arrow";var SVG_ARROW_CLASS="tippy-svg-arrow";var TOUCH_OPTIONS={passive:true,capture:true};var TIPPY_DEFAULT_APPEND_TO=function TIPPY_DEFAULT_APPEND_TO(){return document.body;};function hasOwnProperty(obj,key){return{}.hasOwnProperty.call(obj,key);}
function getValueAtIndexOrReturn(value,index,defaultValue){if(Array.isArray(value)){var v=value[index];return v==null?Array.isArray(defaultValue)?defaultValue[index]:defaultValue:v;}
return value;}
function isType(value,type){var str={}.toString.call(value);return str.indexOf('[object')===0&&str.indexOf(type+"]")>-1;}
function invokeWithArgsOrReturn(value,args){return typeof value==='function'?value.apply(void 0,args):value;}
function debounce(fn,ms){if(ms===0){return fn;}
var timeout;return function(arg){clearTimeout(timeout);timeout=setTimeout(function(){fn(arg);},ms);};}
function removeProperties(obj,keys){var clone=Object.assign({},obj);keys.forEach(function(key){delete clone[key];});return clone;}
function splitBySpaces(value){return value.split(/\s+/).filter(Boolean);}
function normalizeToArray(value){return[].concat(value);}
function pushIfUnique(arr,value){if(arr.indexOf(value)===-1){arr.push(value);}}
function unique(arr){return arr.filter(function(item,index){return arr.indexOf(item)===index;});}
function getBasePlacement(placement){return placement.split('-')[0];}
function arrayFrom(value){return[].slice.call(value);}
function removeUndefinedProps(obj){return Object.keys(obj).reduce(function(acc,key){if(obj[key]!==undefined){acc[key]=obj[key];}
return acc;},{});}
function div(){return document.createElement('div');}
function isElement(value){return['Element','Fragment'].some(function(type){return isType(value,type);});}
function isNodeList(value){return isType(value,'NodeList');}
function isMouseEvent(value){return isType(value,'MouseEvent');}
function isReferenceElement(value){return!!(value&&value._tippy&&value._tippy.reference===value);}
function getArrayOfElements(value){if(isElement(value)){return[value];}
if(isNodeList(value)){return arrayFrom(value);}
if(Array.isArray(value)){return value;}
return arrayFrom(document.querySelectorAll(value));}
function setTransitionDuration(els,value){els.forEach(function(el){if(el){el.style.transitionDuration=value+"ms";}});}
function setVisibilityState(els,state){els.forEach(function(el){if(el){el.setAttribute('data-state',state);}});}
function getOwnerDocument(elementOrElements){var _element$ownerDocumen;var _normalizeToArray=normalizeToArray(elementOrElements),element=_normalizeToArray[0];return element!=null&&(_element$ownerDocumen=element.ownerDocument)!=null&&_element$ownerDocumen.body?element.ownerDocument:document;}
function isCursorOutsideInteractiveBorder(popperTreeData,event){var clientX=event.clientX,clientY=event.clientY;return popperTreeData.every(function(_ref){var popperRect=_ref.popperRect,popperState=_ref.popperState,props=_ref.props;var interactiveBorder=props.interactiveBorder;var basePlacement=getBasePlacement(popperState.placement);var offsetData=popperState.modifiersData.offset;if(!offsetData){return true;}
var topDistance=basePlacement==='bottom'?offsetData.top.y:0;var bottomDistance=basePlacement==='top'?offsetData.bottom.y:0;var leftDistance=basePlacement==='right'?offsetData.left.x:0;var rightDistance=basePlacement==='left'?offsetData.right.x:0;var exceedsTop=popperRect.top-clientY+topDistance>interactiveBorder;var exceedsBottom=clientY-popperRect.bottom-bottomDistance>interactiveBorder;var exceedsLeft=popperRect.left-clientX+leftDistance>interactiveBorder;var exceedsRight=clientX-popperRect.right-rightDistance>interactiveBorder;return exceedsTop||exceedsBottom||exceedsLeft||exceedsRight;});}
function updateTransitionEndListener(box,action,listener){var method=action+"EventListener";['transitionend','webkitTransitionEnd'].forEach(function(event){box[method](event,listener);});}
function actualContains(parent,child){var target=child;while(target){var _target$getRootNode;if(parent.contains(target)){return true;}
target=target.getRootNode==null?void 0:(_target$getRootNode=target.getRootNode())==null?void 0:_target$getRootNode.host;}
return false;}
var currentInput={isTouch:false};var lastMouseMoveTime=0;function onDocumentTouchStart(){if(currentInput.isTouch){return;}
currentInput.isTouch=true;if(window.performance){document.addEventListener('mousemove',onDocumentMouseMove);}}
function onDocumentMouseMove(){var now=performance.now();if(now-lastMouseMoveTime<20){currentInput.isTouch=false;document.removeEventListener('mousemove',onDocumentMouseMove);}
lastMouseMoveTime=now;}
function onWindowBlur(){var activeElement=document.activeElement;if(isReferenceElement(activeElement)){var instance=activeElement._tippy;if(activeElement.blur&&!instance.state.isVisible){activeElement.blur();}}}
function bindGlobalEventListeners(){document.addEventListener('touchstart',onDocumentTouchStart,TOUCH_OPTIONS);window.addEventListener('blur',onWindowBlur);}
function createMemoryLeakWarning(method){var txt=method==='destroy'?'n already-':' ';return[method+"() was called on a"+txt+"destroyed instance. This is a no-op but",'indicates a potential memory leak.'].join(' ');}
function clean(value){var spacesAndTabs=/[ \t]{2,}/g;var lineStartWithSpaces=/^[ \t]*/gm;return value.replace(spacesAndTabs,' ').replace(lineStartWithSpaces,'').trim();}
function getDevMessage(message){return clean("\n  %ctippy.js\n\n  %c"+clean(message)+"\n\n  %c\uD83D\uDC77\u200D This is a development-only message. It will be removed in production.\n  ");}
function getFormattedMessage(message){return[getDevMessage(message),'color: #00C584; font-size: 1.3em; font-weight: bold;','line-height: 1.5','color: #a6a095;'];}
var visitedMessages;{resetVisitedMessages();}
function resetVisitedMessages(){visitedMessages=new Set();}
function warnWhen(condition,message){if(condition&&!visitedMessages.has(message)){var _console;visitedMessages.add(message);(_console=console).warn.apply(_console,getFormattedMessage(message));}}
function errorWhen(condition,message){if(condition&&!visitedMessages.has(message)){var _console2;visitedMessages.add(message);(_console2=console).error.apply(_console2,getFormattedMessage(message));}}
function validateTargets(targets){var didPassFalsyValue=!targets;var didPassPlainObject=Object.prototype.toString.call(targets)==='[object Object]'&&!targets.addEventListener;errorWhen(didPassFalsyValue,['tippy() was passed','`'+String(targets)+'`','as its targets (first) argument. Valid types are: String, Element,','Element[], or NodeList.'].join(' '));errorWhen(didPassPlainObject,['tippy() was passed a plain object which is not supported as an argument','for virtual positioning. Use props.getReferenceClientRect instead.'].join(' '));}
var pluginProps={animateFill:false,followCursor:false,inlinePositioning:false,sticky:false};var renderProps={allowHTML:false,animation:'fade',arrow:true,content:'',inertia:false,maxWidth:350,role:'tooltip',theme:'',zIndex:9999};var defaultProps=Object.assign({appendTo:TIPPY_DEFAULT_APPEND_TO,aria:{content:'auto',expanded:'auto'},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:true,ignoreAttributes:false,interactive:false,interactiveBorder:2,interactiveDebounce:0,moveTransition:'',offset:[0,10],onAfterUpdate:function onAfterUpdate(){},onBeforeUpdate:function onBeforeUpdate(){},onCreate:function onCreate(){},onDestroy:function onDestroy(){},onHidden:function onHidden(){},onHide:function onHide(){},onMount:function onMount(){},onShow:function onShow(){},onShown:function onShown(){},onTrigger:function onTrigger(){},onUntrigger:function onUntrigger(){},onClickOutside:function onClickOutside(){},placement:'top',plugins:[],popperOptions:{},render:null,showOnCreate:false,touch:true,trigger:'mouseenter focus',triggerTarget:null},pluginProps,renderProps);var defaultKeys=Object.keys(defaultProps);var setDefaultProps=function setDefaultProps(partialProps){{validateProps(partialProps,[]);}
var keys=Object.keys(partialProps);keys.forEach(function(key){defaultProps[key]=partialProps[key];});};function getExtendedPassedProps(passedProps){var plugins=passedProps.plugins||[];var pluginProps=plugins.reduce(function(acc,plugin){var name=plugin.name,defaultValue=plugin.defaultValue;if(name){var _name;acc[name]=passedProps[name]!==undefined?passedProps[name]:(_name=defaultProps[name])!=null?_name:defaultValue;}
return acc;},{});return Object.assign({},passedProps,pluginProps);}
function getDataAttributeProps(reference,plugins){var propKeys=plugins?Object.keys(getExtendedPassedProps(Object.assign({},defaultProps,{plugins:plugins}))):defaultKeys;var props=propKeys.reduce(function(acc,key){var valueAsString=(reference.getAttribute("data-tippy-"+key)||'').trim();if(!valueAsString){return acc;}
if(key==='content'){acc[key]=valueAsString;}else{try{acc[key]=JSON.parse(valueAsString);}catch(e){acc[key]=valueAsString;}}
return acc;},{});return props;}
function evaluateProps(reference,props){var out=Object.assign({},props,{content:invokeWithArgsOrReturn(props.content,[reference])},props.ignoreAttributes?{}:getDataAttributeProps(reference,props.plugins));out.aria=Object.assign({},defaultProps.aria,out.aria);out.aria={expanded:out.aria.expanded==='auto'?props.interactive:out.aria.expanded,content:out.aria.content==='auto'?props.interactive?null:'describedby':out.aria.content};return out;}
function validateProps(partialProps,plugins){if(partialProps===void 0){partialProps={};}
if(plugins===void 0){plugins=[];}
var keys=Object.keys(partialProps);keys.forEach(function(prop){var nonPluginProps=removeProperties(defaultProps,Object.keys(pluginProps));var didPassUnknownProp=!hasOwnProperty(nonPluginProps,prop);if(didPassUnknownProp){didPassUnknownProp=plugins.filter(function(plugin){return plugin.name===prop;}).length===0;}
warnWhen(didPassUnknownProp,["`"+prop+"`","is not a valid prop. You may have spelled it incorrectly, or if it's",'a plugin, forgot to pass it in an array as props.plugins.','\n\n','All props: https://atomiks.github.io/tippyjs/v6/all-props/\n','Plugins: https://atomiks.github.io/tippyjs/v6/plugins/'].join(' '));});}
var innerHTML=function innerHTML(){return'innerHTML';};function dangerouslySetInnerHTML(element,html){element[innerHTML()]=html;}
function createArrowElement(value){var arrow=div();if(value===true){arrow.className=ARROW_CLASS;}else{arrow.className=SVG_ARROW_CLASS;if(isElement(value)){arrow.appendChild(value);}else{dangerouslySetInnerHTML(arrow,value);}}
return arrow;}
function setContent(content,props){if(isElement(props.content)){dangerouslySetInnerHTML(content,'');content.appendChild(props.content);}else if(typeof props.content!=='function'){if(props.allowHTML){dangerouslySetInnerHTML(content,props.content);}else{content.textContent=props.content;}}}
function getChildren(popper){var box=popper.firstElementChild;var boxChildren=arrayFrom(box.children);return{box:box,content:boxChildren.find(function(node){return node.classList.contains(CONTENT_CLASS);}),arrow:boxChildren.find(function(node){return node.classList.contains(ARROW_CLASS)||node.classList.contains(SVG_ARROW_CLASS);}),backdrop:boxChildren.find(function(node){return node.classList.contains(BACKDROP_CLASS);})};}
function render(instance){var popper=div();var box=div();box.className=BOX_CLASS;box.setAttribute('data-state','hidden');box.setAttribute('tabindex','-1');var content=div();content.className=CONTENT_CLASS;content.setAttribute('data-state','hidden');setContent(content,instance.props);popper.appendChild(box);box.appendChild(content);onUpdate(instance.props,instance.props);function onUpdate(prevProps,nextProps){var _getChildren=getChildren(popper),box=_getChildren.box,content=_getChildren.content,arrow=_getChildren.arrow;if(nextProps.theme){box.setAttribute('data-theme',nextProps.theme);}else{box.removeAttribute('data-theme');}
if(typeof nextProps.animation==='string'){box.setAttribute('data-animation',nextProps.animation);}else{box.removeAttribute('data-animation');}
if(nextProps.inertia){box.setAttribute('data-inertia','');}else{box.removeAttribute('data-inertia');}
box.style.maxWidth=typeof nextProps.maxWidth==='number'?nextProps.maxWidth+"px":nextProps.maxWidth;if(nextProps.role){box.setAttribute('role',nextProps.role);}else{box.removeAttribute('role');}
if(prevProps.content!==nextProps.content||prevProps.allowHTML!==nextProps.allowHTML){setContent(content,instance.props);}
if(nextProps.arrow){if(!arrow){box.appendChild(createArrowElement(nextProps.arrow));}else if(prevProps.arrow!==nextProps.arrow){box.removeChild(arrow);box.appendChild(createArrowElement(nextProps.arrow));}}else if(arrow){box.removeChild(arrow);}}
return{popper:popper,onUpdate:onUpdate};}
render.$$tippy=true;var idCounter=1;var mouseMoveListeners=[];var mountedInstances=[];function createTippy(reference,passedProps){var props=evaluateProps(reference,Object.assign({},defaultProps,getExtendedPassedProps(removeUndefinedProps(passedProps))));var showTimeout;var hideTimeout;var scheduleHideAnimationFrame;var isVisibleFromClick=false;var didHideDueToDocumentMouseDown=false;var didTouchMove=false;var ignoreOnFirstUpdate=false;var lastTriggerEvent;var currentTransitionEndListener;var onFirstUpdate;var listeners=[];var debouncedOnMouseMove=debounce(onMouseMove,props.interactiveDebounce);var currentTarget;var id=idCounter++;var popperInstance=null;var plugins=unique(props.plugins);var state={isEnabled:true,isVisible:false,isDestroyed:false,isMounted:false,isShown:false};var instance={id:id,reference:reference,popper:div(),popperInstance:popperInstance,props:props,state:state,plugins:plugins,clearDelayTimeouts:clearDelayTimeouts,setProps:setProps,setContent:setContent,show:show,hide:hide,hideWithInteractivity:hideWithInteractivity,enable:enable,disable:disable,unmount:unmount,destroy:destroy};if(!props.render){{errorWhen(true,'render() function has not been supplied.');}
return instance;}
var _props$render=props.render(instance),popper=_props$render.popper,onUpdate=_props$render.onUpdate;popper.setAttribute('data-tippy-root','');popper.id="tippy-"+instance.id;instance.popper=popper;reference._tippy=instance;popper._tippy=instance;var pluginsHooks=plugins.map(function(plugin){return plugin.fn(instance);});var hasAriaExpanded=reference.hasAttribute('aria-expanded');addListeners();handleAriaExpandedAttribute();handleStyles();invokeHook('onCreate',[instance]);if(props.showOnCreate){scheduleShow();}
popper.addEventListener('mouseenter',function(){if(instance.props.interactive&&instance.state.isVisible){instance.clearDelayTimeouts();}});popper.addEventListener('mouseleave',function(){if(instance.props.interactive&&instance.props.trigger.indexOf('mouseenter')>=0){getDocument().addEventListener('mousemove',debouncedOnMouseMove);}});return instance;function getNormalizedTouchSettings(){var touch=instance.props.touch;return Array.isArray(touch)?touch:[touch,0];}
function getIsCustomTouchBehavior(){return getNormalizedTouchSettings()[0]==='hold';}
function getIsDefaultRenderFn(){var _instance$props$rende;return!!((_instance$props$rende=instance.props.render)!=null&&_instance$props$rende.$$tippy);}
function getCurrentTarget(){return currentTarget||reference;}
function getDocument(){var parent=getCurrentTarget().parentNode;return parent?getOwnerDocument(parent):document;}
function getDefaultTemplateChildren(){return getChildren(popper);}
function getDelay(isShow){if(instance.state.isMounted&&!instance.state.isVisible||currentInput.isTouch||lastTriggerEvent&&lastTriggerEvent.type==='focus'){return 0;}
return getValueAtIndexOrReturn(instance.props.delay,isShow?0:1,defaultProps.delay);}
function handleStyles(fromHide){if(fromHide===void 0){fromHide=false;}
popper.style.pointerEvents=instance.props.interactive&&!fromHide?'':'none';popper.style.zIndex=""+instance.props.zIndex;}
function invokeHook(hook,args,shouldInvokePropsHook){if(shouldInvokePropsHook===void 0){shouldInvokePropsHook=true;}
pluginsHooks.forEach(function(pluginHooks){if(pluginHooks[hook]){pluginHooks[hook].apply(pluginHooks,args);}});if(shouldInvokePropsHook){var _instance$props;(_instance$props=instance.props)[hook].apply(_instance$props,args);}}
function handleAriaContentAttribute(){var aria=instance.props.aria;if(!aria.content){return;}
var attr="aria-"+aria.content;var id=popper.id;var nodes=normalizeToArray(instance.props.triggerTarget||reference);nodes.forEach(function(node){var currentValue=node.getAttribute(attr);if(instance.state.isVisible){node.setAttribute(attr,currentValue?currentValue+" "+id:id);}else{var nextValue=currentValue&&currentValue.replace(id,'').trim();if(nextValue){node.setAttribute(attr,nextValue);}else{node.removeAttribute(attr);}}});}
function handleAriaExpandedAttribute(){if(hasAriaExpanded||!instance.props.aria.expanded){return;}
var nodes=normalizeToArray(instance.props.triggerTarget||reference);nodes.forEach(function(node){if(instance.props.interactive){node.setAttribute('aria-expanded',instance.state.isVisible&&node===getCurrentTarget()?'true':'false');}else{node.removeAttribute('aria-expanded');}});}
function cleanupInteractiveMouseListeners(){getDocument().removeEventListener('mousemove',debouncedOnMouseMove);mouseMoveListeners=mouseMoveListeners.filter(function(listener){return listener!==debouncedOnMouseMove;});}
function onDocumentPress(event){if(currentInput.isTouch){if(didTouchMove||event.type==='mousedown'){return;}}
var actualTarget=event.composedPath&&event.composedPath()[0]||event.target;if(instance.props.interactive&&actualContains(popper,actualTarget)){return;}
if(normalizeToArray(instance.props.triggerTarget||reference).some(function(el){return actualContains(el,actualTarget);})){if(currentInput.isTouch){return;}
if(instance.state.isVisible&&instance.props.trigger.indexOf('click')>=0){return;}}else{invokeHook('onClickOutside',[instance,event]);}
if(instance.props.hideOnClick===true){instance.clearDelayTimeouts();instance.hide();didHideDueToDocumentMouseDown=true;setTimeout(function(){didHideDueToDocumentMouseDown=false;});if(!instance.state.isMounted){removeDocumentPress();}}}
function onTouchMove(){didTouchMove=true;}
function onTouchStart(){didTouchMove=false;}
function addDocumentPress(){var doc=getDocument();doc.addEventListener('mousedown',onDocumentPress,true);doc.addEventListener('touchend',onDocumentPress,TOUCH_OPTIONS);doc.addEventListener('touchstart',onTouchStart,TOUCH_OPTIONS);doc.addEventListener('touchmove',onTouchMove,TOUCH_OPTIONS);}
function removeDocumentPress(){var doc=getDocument();doc.removeEventListener('mousedown',onDocumentPress,true);doc.removeEventListener('touchend',onDocumentPress,TOUCH_OPTIONS);doc.removeEventListener('touchstart',onTouchStart,TOUCH_OPTIONS);doc.removeEventListener('touchmove',onTouchMove,TOUCH_OPTIONS);}
function onTransitionedOut(duration,callback){onTransitionEnd(duration,function(){if(!instance.state.isVisible&&popper.parentNode&&popper.parentNode.contains(popper)){callback();}});}
function onTransitionedIn(duration,callback){onTransitionEnd(duration,callback);}
function onTransitionEnd(duration,callback){var box=getDefaultTemplateChildren().box;function listener(event){if(event.target===box){updateTransitionEndListener(box,'remove',listener);callback();}}
if(duration===0){return callback();}
updateTransitionEndListener(box,'remove',currentTransitionEndListener);updateTransitionEndListener(box,'add',listener);currentTransitionEndListener=listener;}
function on(eventType,handler,options){if(options===void 0){options=false;}
var nodes=normalizeToArray(instance.props.triggerTarget||reference);nodes.forEach(function(node){node.addEventListener(eventType,handler,options);listeners.push({node:node,eventType:eventType,handler:handler,options:options});});}
function addListeners(){if(getIsCustomTouchBehavior()){on('touchstart',onTrigger,{passive:true});on('touchend',onMouseLeave,{passive:true});}
splitBySpaces(instance.props.trigger).forEach(function(eventType){if(eventType==='manual'){return;}
on(eventType,onTrigger);switch(eventType){case'mouseenter':on('mouseleave',onMouseLeave);break;case'focus':on(isIE11?'focusout':'blur',onBlurOrFocusOut);break;case'focusin':on('focusout',onBlurOrFocusOut);break;}});}
function removeListeners(){listeners.forEach(function(_ref){var node=_ref.node,eventType=_ref.eventType,handler=_ref.handler,options=_ref.options;node.removeEventListener(eventType,handler,options);});listeners=[];}
function onTrigger(event){var _lastTriggerEvent;var shouldScheduleClickHide=false;if(!instance.state.isEnabled||isEventListenerStopped(event)||didHideDueToDocumentMouseDown){return;}
var wasFocused=((_lastTriggerEvent=lastTriggerEvent)==null?void 0:_lastTriggerEvent.type)==='focus';lastTriggerEvent=event;currentTarget=event.currentTarget;handleAriaExpandedAttribute();if(!instance.state.isVisible&&isMouseEvent(event)){mouseMoveListeners.forEach(function(listener){return listener(event);});}
if(event.type==='click'&&(instance.props.trigger.indexOf('mouseenter')<0||isVisibleFromClick)&&instance.props.hideOnClick!==false&&instance.state.isVisible){shouldScheduleClickHide=true;}else{scheduleShow(event);}
if(event.type==='click'){isVisibleFromClick=!shouldScheduleClickHide;}
if(shouldScheduleClickHide&&!wasFocused){scheduleHide(event);}}
function onMouseMove(event){var target=event.target;var isCursorOverReferenceOrPopper=getCurrentTarget().contains(target)||popper.contains(target);if(event.type==='mousemove'&&isCursorOverReferenceOrPopper){return;}
var popperTreeData=getNestedPopperTree().concat(popper).map(function(popper){var _instance$popperInsta;var instance=popper._tippy;var state=(_instance$popperInsta=instance.popperInstance)==null?void 0:_instance$popperInsta.state;if(state){return{popperRect:popper.getBoundingClientRect(),popperState:state,props:props};}
return null;}).filter(Boolean);if(isCursorOutsideInteractiveBorder(popperTreeData,event)){cleanupInteractiveMouseListeners();scheduleHide(event);}}
function onMouseLeave(event){var shouldBail=isEventListenerStopped(event)||instance.props.trigger.indexOf('click')>=0&&isVisibleFromClick;if(shouldBail){return;}
if(instance.props.interactive){instance.hideWithInteractivity(event);return;}
scheduleHide(event);}
function onBlurOrFocusOut(event){if(instance.props.trigger.indexOf('focusin')<0&&event.target!==getCurrentTarget()){return;}
if(instance.props.interactive&&event.relatedTarget&&popper.contains(event.relatedTarget)){return;}
scheduleHide(event);}
function isEventListenerStopped(event){return currentInput.isTouch?getIsCustomTouchBehavior()!==event.type.indexOf('touch')>=0:false;}
function createPopperInstance(){destroyPopperInstance();var _instance$props2=instance.props,popperOptions=_instance$props2.popperOptions,placement=_instance$props2.placement,offset=_instance$props2.offset,getReferenceClientRect=_instance$props2.getReferenceClientRect,moveTransition=_instance$props2.moveTransition;var arrow=getIsDefaultRenderFn()?getChildren(popper).arrow:null;var computedReference=getReferenceClientRect?{getBoundingClientRect:getReferenceClientRect,contextElement:getReferenceClientRect.contextElement||getCurrentTarget()}:reference;var tippyModifier={name:'$$tippy',enabled:true,phase:'beforeWrite',requires:['computeStyles'],fn:function fn(_ref2){var state=_ref2.state;if(getIsDefaultRenderFn()){var _getDefaultTemplateCh=getDefaultTemplateChildren(),box=_getDefaultTemplateCh.box;['placement','reference-hidden','escaped'].forEach(function(attr){if(attr==='placement'){box.setAttribute('data-placement',state.placement);}else{if(state.attributes.popper["data-popper-"+attr]){box.setAttribute("data-"+attr,'');}else{box.removeAttribute("data-"+attr);}}});state.attributes.popper={};}}};var modifiers=[{name:'offset',options:{offset:offset}},{name:'preventOverflow',options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:'flip',options:{padding:5}},{name:'computeStyles',options:{adaptive:!moveTransition}},tippyModifier];if(getIsDefaultRenderFn()&&arrow){modifiers.push({name:'arrow',options:{element:arrow,padding:3}});}
modifiers.push.apply(modifiers,(popperOptions==null?void 0:popperOptions.modifiers)||[]);instance.popperInstance=core.createPopper(computedReference,popper,Object.assign({},popperOptions,{placement:placement,onFirstUpdate:onFirstUpdate,modifiers:modifiers}));}
function destroyPopperInstance(){if(instance.popperInstance){instance.popperInstance.destroy();instance.popperInstance=null;}}
function mount(){var appendTo=instance.props.appendTo;var parentNode;var node=getCurrentTarget();if(instance.props.interactive&&appendTo===TIPPY_DEFAULT_APPEND_TO||appendTo==='parent'){parentNode=node.parentNode;}else{parentNode=invokeWithArgsOrReturn(appendTo,[node]);}
if(!parentNode.contains(popper)){parentNode.appendChild(popper);}
instance.state.isMounted=true;createPopperInstance();{warnWhen(instance.props.interactive&&appendTo===defaultProps.appendTo&&node.nextElementSibling!==popper,['Interactive tippy element may not be accessible via keyboard','navigation because it is not directly after the reference element','in the DOM source order.','\n\n','Using a wrapper <div> or <span> tag around the reference element','solves this by creating a new parentNode context.','\n\n','Specifying `appendTo: document.body` silences this warning, but it','assumes you are using a focus management solution to handle','keyboard navigation.','\n\n','See: https://atomiks.github.io/tippyjs/v6/accessibility/#interactivity'].join(' '));}}
function getNestedPopperTree(){return arrayFrom(popper.querySelectorAll('[data-tippy-root]'));}
function scheduleShow(event){instance.clearDelayTimeouts();if(event){invokeHook('onTrigger',[instance,event]);}
addDocumentPress();var delay=getDelay(true);var _getNormalizedTouchSe=getNormalizedTouchSettings(),touchValue=_getNormalizedTouchSe[0],touchDelay=_getNormalizedTouchSe[1];if(currentInput.isTouch&&touchValue==='hold'&&touchDelay){delay=touchDelay;}
if(delay){showTimeout=setTimeout(function(){instance.show();},delay);}else{instance.show();}}
function scheduleHide(event){instance.clearDelayTimeouts();invokeHook('onUntrigger',[instance,event]);if(!instance.state.isVisible){removeDocumentPress();return;}
if(instance.props.trigger.indexOf('mouseenter')>=0&&instance.props.trigger.indexOf('click')>=0&&['mouseleave','mousemove'].indexOf(event.type)>=0&&isVisibleFromClick){return;}
var delay=getDelay(false);if(delay){hideTimeout=setTimeout(function(){if(instance.state.isVisible){instance.hide();}},delay);}else{scheduleHideAnimationFrame=requestAnimationFrame(function(){instance.hide();});}}
function enable(){instance.state.isEnabled=true;}
function disable(){instance.hide();instance.state.isEnabled=false;}
function clearDelayTimeouts(){clearTimeout(showTimeout);clearTimeout(hideTimeout);cancelAnimationFrame(scheduleHideAnimationFrame);}
function setProps(partialProps){{warnWhen(instance.state.isDestroyed,createMemoryLeakWarning('setProps'));}
if(instance.state.isDestroyed){return;}
invokeHook('onBeforeUpdate',[instance,partialProps]);removeListeners();var prevProps=instance.props;var nextProps=evaluateProps(reference,Object.assign({},prevProps,removeUndefinedProps(partialProps),{ignoreAttributes:true}));instance.props=nextProps;addListeners();if(prevProps.interactiveDebounce!==nextProps.interactiveDebounce){cleanupInteractiveMouseListeners();debouncedOnMouseMove=debounce(onMouseMove,nextProps.interactiveDebounce);}
if(prevProps.triggerTarget&&!nextProps.triggerTarget){normalizeToArray(prevProps.triggerTarget).forEach(function(node){node.removeAttribute('aria-expanded');});}else if(nextProps.triggerTarget){reference.removeAttribute('aria-expanded');}
handleAriaExpandedAttribute();handleStyles();if(onUpdate){onUpdate(prevProps,nextProps);}
if(instance.popperInstance){createPopperInstance();getNestedPopperTree().forEach(function(nestedPopper){requestAnimationFrame(nestedPopper._tippy.popperInstance.forceUpdate);});}
invokeHook('onAfterUpdate',[instance,partialProps]);}
function setContent(content){instance.setProps({content:content});}
function show(){{warnWhen(instance.state.isDestroyed,createMemoryLeakWarning('show'));}
var isAlreadyVisible=instance.state.isVisible;var isDestroyed=instance.state.isDestroyed;var isDisabled=!instance.state.isEnabled;var isTouchAndTouchDisabled=currentInput.isTouch&&!instance.props.touch;var duration=getValueAtIndexOrReturn(instance.props.duration,0,defaultProps.duration);if(isAlreadyVisible||isDestroyed||isDisabled||isTouchAndTouchDisabled){return;}
if(getCurrentTarget().hasAttribute('disabled')){return;}
invokeHook('onShow',[instance],false);if(instance.props.onShow(instance)===false){return;}
instance.state.isVisible=true;if(getIsDefaultRenderFn()){popper.style.visibility='visible';}
handleStyles();addDocumentPress();if(!instance.state.isMounted){popper.style.transition='none';}
if(getIsDefaultRenderFn()){var _getDefaultTemplateCh2=getDefaultTemplateChildren(),box=_getDefaultTemplateCh2.box,content=_getDefaultTemplateCh2.content;setTransitionDuration([box,content],0);}
onFirstUpdate=function onFirstUpdate(){var _instance$popperInsta2;if(!instance.state.isVisible||ignoreOnFirstUpdate){return;}
ignoreOnFirstUpdate=true;void popper.offsetHeight;popper.style.transition=instance.props.moveTransition;if(getIsDefaultRenderFn()&&instance.props.animation){var _getDefaultTemplateCh3=getDefaultTemplateChildren(),_box=_getDefaultTemplateCh3.box,_content=_getDefaultTemplateCh3.content;setTransitionDuration([_box,_content],duration);setVisibilityState([_box,_content],'visible');}
handleAriaContentAttribute();handleAriaExpandedAttribute();pushIfUnique(mountedInstances,instance);(_instance$popperInsta2=instance.popperInstance)==null?void 0:_instance$popperInsta2.forceUpdate();invokeHook('onMount',[instance]);if(instance.props.animation&&getIsDefaultRenderFn()){onTransitionedIn(duration,function(){instance.state.isShown=true;invokeHook('onShown',[instance]);});}};mount();}
function hide(){{warnWhen(instance.state.isDestroyed,createMemoryLeakWarning('hide'));}
var isAlreadyHidden=!instance.state.isVisible;var isDestroyed=instance.state.isDestroyed;var isDisabled=!instance.state.isEnabled;var duration=getValueAtIndexOrReturn(instance.props.duration,1,defaultProps.duration);if(isAlreadyHidden||isDestroyed||isDisabled){return;}
invokeHook('onHide',[instance],false);if(instance.props.onHide(instance)===false){return;}
instance.state.isVisible=false;instance.state.isShown=false;ignoreOnFirstUpdate=false;isVisibleFromClick=false;if(getIsDefaultRenderFn()){popper.style.visibility='hidden';}
cleanupInteractiveMouseListeners();removeDocumentPress();handleStyles(true);if(getIsDefaultRenderFn()){var _getDefaultTemplateCh4=getDefaultTemplateChildren(),box=_getDefaultTemplateCh4.box,content=_getDefaultTemplateCh4.content;if(instance.props.animation){setTransitionDuration([box,content],duration);setVisibilityState([box,content],'hidden');}}
handleAriaContentAttribute();handleAriaExpandedAttribute();if(instance.props.animation){if(getIsDefaultRenderFn()){onTransitionedOut(duration,instance.unmount);}}else{instance.unmount();}}
function hideWithInteractivity(event){{warnWhen(instance.state.isDestroyed,createMemoryLeakWarning('hideWithInteractivity'));}
getDocument().addEventListener('mousemove',debouncedOnMouseMove);pushIfUnique(mouseMoveListeners,debouncedOnMouseMove);debouncedOnMouseMove(event);}
function unmount(){{warnWhen(instance.state.isDestroyed,createMemoryLeakWarning('unmount'));}
if(instance.state.isVisible){instance.hide();}
if(!instance.state.isMounted){return;}
destroyPopperInstance();getNestedPopperTree().forEach(function(nestedPopper){nestedPopper._tippy.unmount();});if(popper.parentNode){popper.parentNode.removeChild(popper);}
mountedInstances=mountedInstances.filter(function(i){return i!==instance;});instance.state.isMounted=false;invokeHook('onHidden',[instance]);}
function destroy(){{warnWhen(instance.state.isDestroyed,createMemoryLeakWarning('destroy'));}
if(instance.state.isDestroyed){return;}
instance.clearDelayTimeouts();instance.unmount();removeListeners();delete reference._tippy;instance.state.isDestroyed=true;invokeHook('onDestroy',[instance]);}}
function tippy(targets,optionalProps){if(optionalProps===void 0){optionalProps={};}
var plugins=defaultProps.plugins.concat(optionalProps.plugins||[]);{validateTargets(targets);validateProps(optionalProps,plugins);}
bindGlobalEventListeners();var passedProps=Object.assign({},optionalProps,{plugins:plugins});var elements=getArrayOfElements(targets);{var isSingleContentElement=isElement(passedProps.content);var isMoreThanOneReferenceElement=elements.length>1;warnWhen(isSingleContentElement&&isMoreThanOneReferenceElement,['tippy() was passed an Element as the `content` prop, but more than','one tippy instance was created by this invocation. This means the','content element will only be appended to the last tippy instance.','\n\n','Instead, pass the .innerHTML of the element, or use a function that','returns a cloned version of the element instead.','\n\n','1) content: element.innerHTML\n','2) content: () => element.cloneNode(true)'].join(' '));}
var instances=elements.reduce(function(acc,reference){var instance=reference&&createTippy(reference,passedProps);if(instance){acc.push(instance);}
return acc;},[]);return isElement(targets)?instances[0]:instances;}
tippy.defaultProps=defaultProps;tippy.setDefaultProps=setDefaultProps;tippy.currentInput=currentInput;var hideAll=function hideAll(_temp){var _ref=_temp===void 0?{}:_temp,excludedReferenceOrInstance=_ref.exclude,duration=_ref.duration;mountedInstances.forEach(function(instance){var isExcluded=false;if(excludedReferenceOrInstance){isExcluded=isReferenceElement(excludedReferenceOrInstance)?instance.reference===excludedReferenceOrInstance:instance.popper===excludedReferenceOrInstance.popper;}
if(!isExcluded){var originalDuration=instance.props.duration;instance.setProps({duration:duration});instance.hide();if(!instance.state.isDestroyed){instance.setProps({duration:originalDuration});}}});};var applyStylesModifier=Object.assign({},core.applyStyles,{effect:function effect(_ref){var state=_ref.state;var initialStyles={popper:{position:state.options.strategy,left:'0',top:'0',margin:'0'},arrow:{position:'absolute'},reference:{}};Object.assign(state.elements.popper.style,initialStyles.popper);state.styles=initialStyles;if(state.elements.arrow){Object.assign(state.elements.arrow.style,initialStyles.arrow);}}});var createSingleton=function createSingleton(tippyInstances,optionalProps){var _optionalProps$popper;if(optionalProps===void 0){optionalProps={};}
{errorWhen(!Array.isArray(tippyInstances),['The first argument passed to createSingleton() must be an array of','tippy instances. The passed value was',String(tippyInstances)].join(' '));}
var individualInstances=tippyInstances;var references=[];var triggerTargets=[];var currentTarget;var overrides=optionalProps.overrides;var interceptSetPropsCleanups=[];var shownOnCreate=false;function setTriggerTargets(){triggerTargets=individualInstances.map(function(instance){return normalizeToArray(instance.props.triggerTarget||instance.reference);}).reduce(function(acc,item){return acc.concat(item);},[]);}
function setReferences(){references=individualInstances.map(function(instance){return instance.reference;});}
function enableInstances(isEnabled){individualInstances.forEach(function(instance){if(isEnabled){instance.enable();}else{instance.disable();}});}
function interceptSetProps(singleton){return individualInstances.map(function(instance){var originalSetProps=instance.setProps;instance.setProps=function(props){originalSetProps(props);if(instance.reference===currentTarget){singleton.setProps(props);}};return function(){instance.setProps=originalSetProps;};});}
function prepareInstance(singleton,target){var index=triggerTargets.indexOf(target);if(target===currentTarget){return;}
currentTarget=target;var overrideProps=(overrides||[]).concat('content').reduce(function(acc,prop){acc[prop]=individualInstances[index].props[prop];return acc;},{});singleton.setProps(Object.assign({},overrideProps,{getReferenceClientRect:typeof overrideProps.getReferenceClientRect==='function'?overrideProps.getReferenceClientRect:function(){var _references$index;return(_references$index=references[index])==null?void 0:_references$index.getBoundingClientRect();}}));}
enableInstances(false);setReferences();setTriggerTargets();var plugin={fn:function fn(){return{onDestroy:function onDestroy(){enableInstances(true);},onHidden:function onHidden(){currentTarget=null;},onClickOutside:function onClickOutside(instance){if(instance.props.showOnCreate&&!shownOnCreate){shownOnCreate=true;currentTarget=null;}},onShow:function onShow(instance){if(instance.props.showOnCreate&&!shownOnCreate){shownOnCreate=true;prepareInstance(instance,references[0]);}},onTrigger:function onTrigger(instance,event){prepareInstance(instance,event.currentTarget);}};}};var singleton=tippy(div(),Object.assign({},removeProperties(optionalProps,['overrides']),{plugins:[plugin].concat(optionalProps.plugins||[]),triggerTarget:triggerTargets,popperOptions:Object.assign({},optionalProps.popperOptions,{modifiers:[].concat(((_optionalProps$popper=optionalProps.popperOptions)==null?void 0:_optionalProps$popper.modifiers)||[],[applyStylesModifier])})}));var originalShow=singleton.show;singleton.show=function(target){originalShow();if(!currentTarget&&target==null){return prepareInstance(singleton,references[0]);}
if(currentTarget&&target==null){return;}
if(typeof target==='number'){return references[target]&&prepareInstance(singleton,references[target]);}
if(individualInstances.indexOf(target)>=0){var ref=target.reference;return prepareInstance(singleton,ref);}
if(references.indexOf(target)>=0){return prepareInstance(singleton,target);}};singleton.showNext=function(){var first=references[0];if(!currentTarget){return singleton.show(0);}
var index=references.indexOf(currentTarget);singleton.show(references[index+1]||first);};singleton.showPrevious=function(){var last=references[references.length-1];if(!currentTarget){return singleton.show(last);}
var index=references.indexOf(currentTarget);var target=references[index-1]||last;singleton.show(target);};var originalSetProps=singleton.setProps;singleton.setProps=function(props){overrides=props.overrides||overrides;originalSetProps(props);};singleton.setInstances=function(nextInstances){enableInstances(true);interceptSetPropsCleanups.forEach(function(fn){return fn();});individualInstances=nextInstances;enableInstances(false);setReferences();setTriggerTargets();interceptSetPropsCleanups=interceptSetProps(singleton);singleton.setProps({triggerTarget:triggerTargets});};interceptSetPropsCleanups=interceptSetProps(singleton);return singleton;};var BUBBLING_EVENTS_MAP={mouseover:'mouseenter',focusin:'focus',click:'click'};function delegate(targets,props){{errorWhen(!(props&&props.target),['You must specity a `target` prop indicating a CSS selector string matching','the target elements that should receive a tippy.'].join(' '));}
var listeners=[];var childTippyInstances=[];var disabled=false;var target=props.target;var nativeProps=removeProperties(props,['target']);var parentProps=Object.assign({},nativeProps,{trigger:'manual',touch:false});var childProps=Object.assign({touch:defaultProps.touch},nativeProps,{showOnCreate:true});var returnValue=tippy(targets,parentProps);var normalizedReturnValue=normalizeToArray(returnValue);function onTrigger(event){if(!event.target||disabled){return;}
var targetNode=event.target.closest(target);if(!targetNode){return;}
var trigger=targetNode.getAttribute('data-tippy-trigger')||props.trigger||defaultProps.trigger;if(targetNode._tippy){return;}
if(event.type==='touchstart'&&typeof childProps.touch==='boolean'){return;}
if(event.type!=='touchstart'&&trigger.indexOf(BUBBLING_EVENTS_MAP[event.type])<0){return;}
var instance=tippy(targetNode,childProps);if(instance){childTippyInstances=childTippyInstances.concat(instance);}}
function on(node,eventType,handler,options){if(options===void 0){options=false;}
node.addEventListener(eventType,handler,options);listeners.push({node:node,eventType:eventType,handler:handler,options:options});}
function addEventListeners(instance){var reference=instance.reference;on(reference,'touchstart',onTrigger,TOUCH_OPTIONS);on(reference,'mouseover',onTrigger);on(reference,'focusin',onTrigger);on(reference,'click',onTrigger);}
function removeEventListeners(){listeners.forEach(function(_ref){var node=_ref.node,eventType=_ref.eventType,handler=_ref.handler,options=_ref.options;node.removeEventListener(eventType,handler,options);});listeners=[];}
function applyMutations(instance){var originalDestroy=instance.destroy;var originalEnable=instance.enable;var originalDisable=instance.disable;instance.destroy=function(shouldDestroyChildInstances){if(shouldDestroyChildInstances===void 0){shouldDestroyChildInstances=true;}
if(shouldDestroyChildInstances){childTippyInstances.forEach(function(instance){instance.destroy();});}
childTippyInstances=[];removeEventListeners();originalDestroy();};instance.enable=function(){originalEnable();childTippyInstances.forEach(function(instance){return instance.enable();});disabled=false;};instance.disable=function(){originalDisable();childTippyInstances.forEach(function(instance){return instance.disable();});disabled=true;};addEventListeners(instance);}
normalizedReturnValue.forEach(applyMutations);return returnValue;}
var animateFill={name:'animateFill',defaultValue:false,fn:function fn(instance){var _instance$props$rende;if(!((_instance$props$rende=instance.props.render)!=null&&_instance$props$rende.$$tippy)){{errorWhen(instance.props.animateFill,'The `animateFill` plugin requires the default render function.');}
return{};}
var _getChildren=getChildren(instance.popper),box=_getChildren.box,content=_getChildren.content;var backdrop=instance.props.animateFill?createBackdropElement():null;return{onCreate:function onCreate(){if(backdrop){box.insertBefore(backdrop,box.firstElementChild);box.setAttribute('data-animatefill','');box.style.overflow='hidden';instance.setProps({arrow:false,animation:'shift-away'});}},onMount:function onMount(){if(backdrop){var transitionDuration=box.style.transitionDuration;var duration=Number(transitionDuration.replace('ms',''));content.style.transitionDelay=Math.round(duration/10)+"ms";backdrop.style.transitionDuration=transitionDuration;setVisibilityState([backdrop],'visible');}},onShow:function onShow(){if(backdrop){backdrop.style.transitionDuration='0ms';}},onHide:function onHide(){if(backdrop){setVisibilityState([backdrop],'hidden');}}};}};function createBackdropElement(){var backdrop=div();backdrop.className=BACKDROP_CLASS;setVisibilityState([backdrop],'hidden');return backdrop;}
var mouseCoords={clientX:0,clientY:0};var activeInstances=[];function storeMouseCoords(_ref){var clientX=_ref.clientX,clientY=_ref.clientY;mouseCoords={clientX:clientX,clientY:clientY};}
function addMouseCoordsListener(doc){doc.addEventListener('mousemove',storeMouseCoords);}
function removeMouseCoordsListener(doc){doc.removeEventListener('mousemove',storeMouseCoords);}
var followCursor={name:'followCursor',defaultValue:false,fn:function fn(instance){var reference=instance.reference;var doc=getOwnerDocument(instance.props.triggerTarget||reference);var isInternalUpdate=false;var wasFocusEvent=false;var isUnmounted=true;var prevProps=instance.props;function getIsInitialBehavior(){return instance.props.followCursor==='initial'&&instance.state.isVisible;}
function addListener(){doc.addEventListener('mousemove',onMouseMove);}
function removeListener(){doc.removeEventListener('mousemove',onMouseMove);}
function unsetGetReferenceClientRect(){isInternalUpdate=true;instance.setProps({getReferenceClientRect:null});isInternalUpdate=false;}
function onMouseMove(event){var isCursorOverReference=event.target?reference.contains(event.target):true;var followCursor=instance.props.followCursor;var clientX=event.clientX,clientY=event.clientY;var rect=reference.getBoundingClientRect();var relativeX=clientX-rect.left;var relativeY=clientY-rect.top;if(isCursorOverReference||!instance.props.interactive){instance.setProps({getReferenceClientRect:function getReferenceClientRect(){var rect=reference.getBoundingClientRect();var x=clientX;var y=clientY;if(followCursor==='initial'){x=rect.left+relativeX;y=rect.top+relativeY;}
var top=followCursor==='horizontal'?rect.top:y;var right=followCursor==='vertical'?rect.right:x;var bottom=followCursor==='horizontal'?rect.bottom:y;var left=followCursor==='vertical'?rect.left:x;return{width:right-left,height:bottom-top,top:top,right:right,bottom:bottom,left:left};}});}}
function create(){if(instance.props.followCursor){activeInstances.push({instance:instance,doc:doc});addMouseCoordsListener(doc);}}
function destroy(){activeInstances=activeInstances.filter(function(data){return data.instance!==instance;});if(activeInstances.filter(function(data){return data.doc===doc;}).length===0){removeMouseCoordsListener(doc);}}
return{onCreate:create,onDestroy:destroy,onBeforeUpdate:function onBeforeUpdate(){prevProps=instance.props;},onAfterUpdate:function onAfterUpdate(_,_ref2){var followCursor=_ref2.followCursor;if(isInternalUpdate){return;}
if(followCursor!==undefined&&prevProps.followCursor!==followCursor){destroy();if(followCursor){create();if(instance.state.isMounted&&!wasFocusEvent&&!getIsInitialBehavior()){addListener();}}else{removeListener();unsetGetReferenceClientRect();}}},onMount:function onMount(){if(instance.props.followCursor&&!wasFocusEvent){if(isUnmounted){onMouseMove(mouseCoords);isUnmounted=false;}
if(!getIsInitialBehavior()){addListener();}}},onTrigger:function onTrigger(_,event){if(isMouseEvent(event)){mouseCoords={clientX:event.clientX,clientY:event.clientY};}
wasFocusEvent=event.type==='focus';},onHidden:function onHidden(){if(instance.props.followCursor){unsetGetReferenceClientRect();removeListener();isUnmounted=true;}}};}};function getProps(props,modifier){var _props$popperOptions;return{popperOptions:Object.assign({},props.popperOptions,{modifiers:[].concat((((_props$popperOptions=props.popperOptions)==null?void 0:_props$popperOptions.modifiers)||[]).filter(function(_ref){var name=_ref.name;return name!==modifier.name;}),[modifier])})};}
var inlinePositioning={name:'inlinePositioning',defaultValue:false,fn:function fn(instance){var reference=instance.reference;function isEnabled(){return!!instance.props.inlinePositioning;}
var placement;var cursorRectIndex=-1;var isInternalUpdate=false;var triedPlacements=[];var modifier={name:'tippyInlinePositioning',enabled:true,phase:'afterWrite',fn:function fn(_ref2){var state=_ref2.state;if(isEnabled()){if(triedPlacements.indexOf(state.placement)!==-1){triedPlacements=[];}
if(placement!==state.placement&&triedPlacements.indexOf(state.placement)===-1){triedPlacements.push(state.placement);instance.setProps({getReferenceClientRect:function getReferenceClientRect(){return _getReferenceClientRect(state.placement);}});}
placement=state.placement;}}};function _getReferenceClientRect(placement){return getInlineBoundingClientRect(getBasePlacement(placement),reference.getBoundingClientRect(),arrayFrom(reference.getClientRects()),cursorRectIndex);}
function setInternalProps(partialProps){isInternalUpdate=true;instance.setProps(partialProps);isInternalUpdate=false;}
function addModifier(){if(!isInternalUpdate){setInternalProps(getProps(instance.props,modifier));}}
return{onCreate:addModifier,onAfterUpdate:addModifier,onTrigger:function onTrigger(_,event){if(isMouseEvent(event)){var rects=arrayFrom(instance.reference.getClientRects());var cursorRect=rects.find(function(rect){return rect.left-2<=event.clientX&&rect.right+2>=event.clientX&&rect.top-2<=event.clientY&&rect.bottom+2>=event.clientY;});var index=rects.indexOf(cursorRect);cursorRectIndex=index>-1?index:cursorRectIndex;}},onHidden:function onHidden(){cursorRectIndex=-1;}};}};function getInlineBoundingClientRect(currentBasePlacement,boundingRect,clientRects,cursorRectIndex){if(clientRects.length<2||currentBasePlacement===null){return boundingRect;}
if(clientRects.length===2&&cursorRectIndex>=0&&clientRects[0].left>clientRects[1].right){return clientRects[cursorRectIndex]||boundingRect;}
switch(currentBasePlacement){case'top':case'bottom':{var firstRect=clientRects[0];var lastRect=clientRects[clientRects.length-1];var isTop=currentBasePlacement==='top';var top=firstRect.top;var bottom=lastRect.bottom;var left=isTop?firstRect.left:lastRect.left;var right=isTop?firstRect.right:lastRect.right;var width=right-left;var height=bottom-top;return{top:top,bottom:bottom,left:left,right:right,width:width,height:height};}
case'left':case'right':{var minLeft=Math.min.apply(Math,clientRects.map(function(rects){return rects.left;}));var maxRight=Math.max.apply(Math,clientRects.map(function(rects){return rects.right;}));var measureRects=clientRects.filter(function(rect){return currentBasePlacement==='left'?rect.left===minLeft:rect.right===maxRight;});var _top=measureRects[0].top;var _bottom=measureRects[measureRects.length-1].bottom;var _left=minLeft;var _right=maxRight;var _width=_right-_left;var _height=_bottom-_top;return{top:_top,bottom:_bottom,left:_left,right:_right,width:_width,height:_height};}
default:{return boundingRect;}}}
var sticky={name:'sticky',defaultValue:false,fn:function fn(instance){var reference=instance.reference,popper=instance.popper;function getReference(){return instance.popperInstance?instance.popperInstance.state.elements.reference:reference;}
function shouldCheck(value){return instance.props.sticky===true||instance.props.sticky===value;}
var prevRefRect=null;var prevPopRect=null;function updatePosition(){var currentRefRect=shouldCheck('reference')?getReference().getBoundingClientRect():null;var currentPopRect=shouldCheck('popper')?popper.getBoundingClientRect():null;if(currentRefRect&&areRectsDifferent(prevRefRect,currentRefRect)||currentPopRect&&areRectsDifferent(prevPopRect,currentPopRect)){if(instance.popperInstance){instance.popperInstance.update();}}
prevRefRect=currentRefRect;prevPopRect=currentPopRect;if(instance.state.isMounted){requestAnimationFrame(updatePosition);}}
return{onMount:function onMount(){if(instance.props.sticky){updatePosition();}}};}};function areRectsDifferent(rectA,rectB){if(rectA&&rectB){return rectA.top!==rectB.top||rectA.right!==rectB.right||rectA.bottom!==rectB.bottom||rectA.left!==rectB.left;}
return true;}
if(isBrowser){injectCSS(css);}
tippy.setDefaultProps({plugins:[animateFill,followCursor,inlinePositioning,sticky],render:render});tippy.createSingleton=createSingleton;tippy.delegate=delegate;tippy.hideAll=hideAll;tippy.roundArrow=ROUND_ARROW;return tippy;})));
(function($){var PROP_NAME='datepick';if(!$.browser_is_supported_datepick){var uaMatch=function(ua){ua=ua.toLowerCase();var match=/(chrome)[ \/]([\w.]+)/.exec(ua)||/(webkit)[ \/]([\w.]+)/.exec(ua)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua)||/(msie) ([\w.]+)/.exec(ua)||ua.indexOf('compatible')<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(ua)||[];return match[2]||'0';};$.browser_is_supported_datepick={mozilla:/mozilla/.test(navigator.userAgent.toLowerCase())&&!/webkit/.test(navigator.userAgent.toLowerCase()),webkit:/webkit/.test(navigator.userAgent.toLowerCase()),opera:/opera/.test(navigator.userAgent.toLowerCase()),msie:/msie/.test(navigator.userAgent.toLowerCase()),android:(navigator.userAgent.toLowerCase().indexOf('mozilla/5.0')>-1&&navigator.userAgent.toLowerCase().indexOf('android ')>-1&&navigator.userAgent.toLowerCase().indexOf('applewebkit')>-1),version:uaMatch(navigator.userAgent)};}
function Datepick(){this._uuid=new Date().getTime();this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._datepickerShowing=false;this._inDialog=false;this.regional=[];this.regional['']={clearText:'Clear',clearStatus:'Erase the current date',closeText:'Close',closeStatus:'Close without change',prevText:'&#x3c;Prev',prevStatus:'Show the previous month',prevBigText:'&#x3c;&#x3c;',prevBigStatus:'Show the previous year',nextText:'Next&#x3e;',nextStatus:'Show the next month',nextBigText:'&#x3e;&#x3e;',nextBigStatus:'Show the next year',currentText:'Today',currentStatus:'Show the current month',monthNames:['January','February','March','April','May','June','July','August','September','October','November','December'],monthNamesShort:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],monthStatus:'Show a different month',yearStatus:'Show a different year',weekHeader:'Wk',weekStatus:'Week of the year',dayNames:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],dayNamesShort:['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],dayNamesMin:['Su','Mo','Tu','We','Th','Fr','Sa'],dayStatus:'Set DD as first week day',dateStatus:'Select DD, M d',dateFormat:'mm/dd/yy',firstDay:0,initStatus:'Select a date',isRTL:false,showMonthAfterYear:false,yearSuffix:''};this._defaults={wpbc_resource_id:0,useThemeRoller:false,showOn:'focus',showAnim:'show',showOptions:{},duration:'normal',buttonText:'...',buttonImage:'',buttonImageOnly:false,alignment:'bottom',autoSize:false,defaultDate:null,showDefault:false,appendText:'',closeAtTop:true,mandatory:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,showBigPrevNext:false,stepMonths:1,stepBigMonths:12,gotoCurrent:false,changeMonth:true,changeYear:true,yearRange:'-10:+10',changeFirstDay:false,showOtherMonths:false,selectOtherMonths:false,highlightWeek:false,showWeeks:false,calculateWeek:this.iso8601Week,shortYearCutoff:'+10',showStatus:false,statusForDate:this.dateStatus,minDate:null,maxDate:null,numberOfMonths:1,showCurrentAtPos:0,rangeSelect:false,rangeSeparator:' - ',multiSelect:0,multiSeparator:',',beforeShow:null,beforeShowDay:null,onChangeMonthYear:null,onHover:null,onSelect:null,onClose:null,altField:'',altFormat:'',constrainInput:true};$.extend(this._defaults,this.regional['']);this.dpDiv=$('<div style="display: none;"></div>');}
$.extend(Datepick.prototype,{version:'3.7.0',markerClassName:'hasDatepick',_mainDivId:['datepick-div','ui-datepicker-div'],_mainDivClass:['','ui-datepicker '+'ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'],_inlineClass:['datepick-inline','ui-datepicker-inline ui-datepicker '+'ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'],_multiClass:['datepick-multi','ui-datepicker-multi'],_rtlClass:['datepick-rtl','ui-datepicker-rtl'],_appendClass:['datepick-append','ui-datepicker-append'],_triggerClass:['datepick-trigger','ui-datepicker-trigger'],_dialogClass:['datepick-dialog','ui-datepicker-dialog'],_promptClass:['datepick-prompt','ui-datepicker-prompt'],_disableClass:['datepick-disabled','ui-datepicker-disabled'],_controlClass:['datepick-control','ui-datepicker-header '+'ui-widget-header ui-helper-clearfix ui-corner-all'],_clearClass:['datepick-clear','ui-datepicker-clear'],_closeClass:['datepick-close','ui-datepicker-close'],_linksClass:['datepick-links','ui-datepicker-header '+'ui-widget-header ui-helper-clearfix ui-corner-all'],_prevClass:['datepick-prev','ui-datepicker-prev'],_nextClass:['datepick-next','ui-datepicker-next'],_currentClass:['datepick-current','ui-datepicker-current'],_oneMonthClass:['datepick-one-month','ui-datepicker-group'],_newRowClass:['datepick-new-row','ui-datepicker-row-break'],_monthYearClass:['datepick-header','ui-datepicker-header '+'ui-widget-header ui-helper-clearfix ui-corner-all'],_monthSelectClass:['datepick-new-month','ui-datepicker-month'],_monthClass:['','ui-datepicker-month'],_yearSelectClass:['datepick-new-year','ui-datepicker-year'],_yearClass:['','ui-datepicker-year'],_tableClass:['datepick','ui-datepicker-calendar'],_tableHeaderClass:['datepick-title-row',''],_weekColClass:['datepick-week-col','ui-datepicker-week-col'],_weekRowClass:['datepick-days-row',''],_weekendClass:['datepick-week-end-cell','ui-datepicker-week-end'],_dayClass:['datepick-days-cell',''],_otherMonthClass:['datepick-other-month','ui-datepicker-other-month'],_todayClass:['datepick-today','ui-state-highlight'],_selectableClass:['','ui-state-default'],_unselectableClass:['datepick-unselectable','ui-datepicker-unselectable ui-state-disabled'],_selectedClass:['datepick-current-day','ui-state-active'],_dayOverClass:['datepick-days-cell-over','ui-state-hover'],_weekOverClass:['datepick-week-over','ui-state-hover'],_statusClass:['datepick-status','ui-datepicker-status'],_statusId:['datepick-status-','ui-datepicker-status-'],_coverClass:['datepick-cover','ui-datepicker-cover'],setDefaults:function(settings){extendRemove(this._defaults,settings||{});return this;},_attachDatepick:function(target,settings){if(!target.id)
target.id='dp'+(++this._uuid);var nodeName=target.nodeName.toLowerCase();var inst=this._newInst($(target),(nodeName=='div'||nodeName=='span'));var inlineSettings=($.fn.metadata?$(target).metadata():{});inst.settings=$.extend({},settings||{},inlineSettings||{});if(inst.inline){inst.dpDiv.addClass(this._inlineClass[this._get(inst,'useThemeRoller')?1:0]);this._inlineDatepick(target,inst);}
else
this._connectDatepick(target,inst);},_newInst:function(target,inline){var id=target[0].id.replace(/([:\[\]\.\$])/g,'\\\\$1');return{id:id,input:target,cursorDate:this._daylightSavingAdjust(new Date()),drawMonth:0,drawYear:0,dates:[],inline:inline,dpDiv:(!inline?this.dpDiv:$('<div></div>')),siblings:$([])};},_connectDatepick:function(target,inst){var input=$(target);if(input.hasClass(this.markerClassName))
return;var appendText=this._get(inst,'appendText');var isRTL=this._get(inst,'isRTL');var useTR=this._get(inst,'useThemeRoller')?1:0;if(appendText){var append=$('<span class="'+this._appendClass[useTR]+'">'+appendText+'</span>');input[isRTL?'before':'after'](append);inst.siblings=inst.siblings.add(append);}
var showOn=this._get(inst,'showOn');if(showOn=='focus'||showOn=='both')
input.on('focus',this._showDatepick);if(showOn=='button'||showOn=='both'){var buttonText=this._get(inst,'buttonText');var buttonImage=this._get(inst,'buttonImage');var trigger=$(this._get(inst,'buttonImageOnly')?$('<img/>').addClass(this._triggerClass[useTR]).attr({src:buttonImage,alt:buttonText,title:buttonText}):$('<button type="button"></button>').addClass(this._triggerClass[useTR]).html(buttonImage==''?buttonText:$('<img/>').attr({src:buttonImage,alt:buttonText,title:buttonText})));input[isRTL?'before':'after'](trigger);inst.siblings=inst.siblings.add(trigger);trigger.on('click',function(){if($.datepick._datepickerShowing&&$.datepick._lastInput==target)
$.datepick._hideDatepick();else
$.datepick._showDatepick(target);return false;});}
input.addClass(this.markerClassName).on('keydown',this._doKeyDown).on('keypress',this._doKeyPress).on('keyup',this._doKeyUp);if(this._get(inst,'showDefault')&&!inst.input.val()){inst.dates=[this._getDefaultDate(inst)];this._showDate(inst);}
this._autoSize(inst);$.data(target,PROP_NAME,inst);},_autoSize:function(inst){if(this._get(inst,'autoSize')&&!inst.inline){var date=new Date(2009,12-1,20);var dateFormat=this._get(inst,'dateFormat');if(dateFormat.match(/[DM]/)){var findMax=function(names){var max=0;var maxI=0;for(var i=0;i<names.length;i++){if(names[i].length>max){max=names[i].length;maxI=i;}}
return maxI;};date.setMonth(findMax(this._get(inst,(dateFormat.match(/MM/)?'monthNames':'monthNamesShort'))));date.setDate(findMax(this._get(inst,(dateFormat.match(/DD/)?'dayNames':'dayNamesShort')))+20-date.getDay());}
inst.input.attr('size',this._formatDate(inst,date).length);}},_inlineDatepick:function(target,inst){var divSpan=$(target);if(divSpan.hasClass(this.markerClassName))
return;divSpan.addClass(this.markerClassName);$.data(target,PROP_NAME,inst);inst.drawMonth=inst.cursorDate.getMonth();inst.drawYear=inst.cursorDate.getFullYear();$('body').append(inst.dpDiv);this._updateDatepick(inst);inst.dpDiv.width(this._getNumberOfMonths(inst)[1]*$('.'+this._oneMonthClass[this._get(inst,'useThemeRoller')?1:0],inst.dpDiv)[0].offsetWidth);divSpan.append(inst.dpDiv);this._updateAlternate(inst);var resource_id=parseInt(divSpan.get(0).getAttribute('id').replace('calendar_booking',''));inst.settings.wpbc_resource_id=resource_id;$('body').trigger('wpbc_datepick_inline_calendar_loaded',[divSpan.get(0).getAttribute('id').replace('calendar_booking',''),divSpan,inst]);},_dialogDatepick:function(input,date,onSelect,settings,pos){var inst=this._dialogInst;if(!inst){var id='dp'+(++this._uuid);this._dialogInput=$('<input type="text" id="'+id+'" style="position: absolute; width: 1px; z-index: -1"/>');this._dialogInput.on('keydown',this._doKeyDown);$('body').append(this._dialogInput);inst=this._dialogInst=this._newInst(this._dialogInput,false);inst.settings={};$.data(this._dialogInput[0],PROP_NAME,inst);}
extendRemove(inst.settings,settings||{});date=(date&&date.constructor==Date?this._formatDate(inst,date):date);this._dialogInput.val(date);this._pos=(pos?(isArray(pos)?pos:[pos.pageX,pos.pageY]):null);if(!this._pos){var scrollX=document.documentElement.scrollLeft||document.body.scrollLeft;var scrollY=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[(document.documentElement.clientWidth/2)-100+scrollX,(document.documentElement.clientHeight/2)-150+scrollY];}
this._dialogInput.css('left',(this._pos[0]+20)+'px').css('top',this._pos[1]+'px');inst.settings.onSelect=onSelect;this._inDialog=true;this.dpDiv.addClass(this._dialogClass[this._get(inst,'useThemeRoller')?1:0]);this._showDatepick(this._dialogInput[0]);if($.blockUI)
$.blockUI(this.dpDiv);$.data(this._dialogInput[0],PROP_NAME,inst);},_destroyDatepick:function(target){var $target=$(target);if(!$target.hasClass(this.markerClassName)){return;}
var inst=$.data(target,PROP_NAME);$.removeData(target,PROP_NAME);if(inst.inline)
$target.removeClass(this.markerClassName).empty();else{$(inst.siblings).remove();$target.removeClass(this.markerClassName).unbind('focus',this._showDatepick).unbind('keydown',this._doKeyDown).unbind('keypress',this._doKeyPress).unbind('keyup',this._doKeyUp);}},_enableDatepick:function(target){var $target=$(target);if(!$target.hasClass(this.markerClassName))
return;var inst=$.data(target,PROP_NAME);var useTR=this._get(inst,'useThemeRoller')?1:0;if(inst.inline)
$target.children('.'+this._disableClass[useTR]).remove().end().find('select').attr('disabled','');else{target.disabled=false;inst.siblings.filter('button.'+this._triggerClass[useTR]).each(function(){this.disabled=false;}).end().filter('img.'+this._triggerClass[useTR]).css({opacity:'1.0',cursor:''});}
this._disabledInputs=$.map(this._disabledInputs,function(value){return(value==target?null:value);});},_disableDatepick:function(target){var $target=$(target);if(!$target.hasClass(this.markerClassName))
return;var inst=$.data(target,PROP_NAME);var useTR=this._get(inst,'useThemeRoller')?1:0;if(inst.inline){var inline=$target.children('.'+this._inlineClass[useTR]);var offset=inline.offset();var relOffset={left:0,top:0};inline.parents().each(function(){if($(this).css('position')=='relative'){relOffset=$(this).offset();return false;}});$target.prepend('<div class="'+this._disableClass[useTR]+'" style="'+'width: '+inline.width()+'px; height: '+inline.height()+'px; left: '+(offset.left-relOffset.left)+'px; top: '+(offset.top-relOffset.top)+'px;"></div>').find('select').attr('disabled','disabled');}
else{target.disabled=true;inst.siblings.filter('button.'+this._triggerClass[useTR]).each(function(){this.disabled=true;}).end().filter('img.'+this._triggerClass[useTR]).css({opacity:'0.5',cursor:'default'});}
this._disabledInputs=$.map(this._disabledInputs,function(value){return(value==target?null:value);});this._disabledInputs.push(target);},_isDisabledDatepick:function(target){return(!target?false:$.inArray(target,this._disabledInputs)>-1);},_getInst:function(target){try{return $.data(target,PROP_NAME);}
catch(err){throw'Missing instance data for this datepicker';}},_optionDatepick:function(target,name,value){var inst=this._getInst(target);if(arguments.length==2&&typeof name=='string'){return(name=='defaults'?$.extend({},$.datepick._defaults):(inst?(name=='all'?$.extend({},inst.settings):this._get(inst,name)):null));}
var settings=name||{};if(typeof name=='string'){settings={};settings[name]=value;}
if(inst){if(this._curInst==inst){this._hideDatepick(null);}
var dates=this._getDateDatepick(target);extendRemove(inst.settings,settings);this._autoSize(inst);extendRemove(inst,{dates:[]});var blank=(!dates||isArray(dates));if(isArray(dates))
for(var i=0;i<dates.length;i++)
if(dates[i]){blank=false;break;}
if(!blank)
this._setDateDatepick(target,dates);if(inst.inline)
$(target).children('div').removeClass(this._inlineClass.join(' ')).addClass(this._inlineClass[this._get(inst,'useThemeRoller')?1:0]);this._updateDatepick(inst);}},_changeDatepick:function(target,name,value){this._optionDatepick(target,name,value);},_refreshDatepick:function(target){var inst=this._getInst(target);if(inst){this._updateDatepick(inst);}},_setDateDatepick:function(target,date,endDate){var inst=this._getInst(target);if(inst){this._setDate(inst,date,endDate);this._updateDatepick(inst);this._updateAlternate(inst);}},_getDateDatepick:function(target){var inst=this._getInst(target);if(inst&&!inst.inline)
this._setDateFromField(inst);return(inst?this._getDate(inst):null);},_doKeyDown:function(event){var inst=$.datepick._getInst(event.target);inst.keyEvent=true;var handled=true;var isRTL=$.datepick._get(inst,'isRTL');var useTR=$.datepick._get(inst,'useThemeRoller')?1:0;if($.datepick._datepickerShowing)
switch(event.keyCode){case 9:$.datepick._hideDatepick(null,'');break;case 13:var sel=$('td.'+$.datepick._dayOverClass[useTR],inst.dpDiv);if(sel.length==0)
sel=$('td.'+$.datepick._selectedClass[useTR]+':first',inst.dpDiv);if(sel[0])
$.datepick._selectDay(sel[0],event.target,inst.cursorDate.getTime());else
$.datepick._hideDatepick(null,$.datepick._get(inst,'duration'));break;case 27:$.datepick._hideDatepick(null,$.datepick._get(inst,'duration'));break;case 33:$.datepick._adjustDate(event.target,(event.ctrlKey?-$.datepick._get(inst,'stepBigMonths'):-$.datepick._get(inst,'stepMonths')),'M');break;case 34:$.datepick._adjustDate(event.target,(event.ctrlKey?+$.datepick._get(inst,'stepBigMonths'):+$.datepick._get(inst,'stepMonths')),'M');break;case 35:if(event.ctrlKey||event.metaKey)
$.datepick._clearDate(event.target);handled=event.ctrlKey||event.metaKey;break;case 36:if(event.ctrlKey||event.metaKey)
$.datepick._gotoToday(event.target);handled=event.ctrlKey||event.metaKey;break;case 37:if(event.ctrlKey||event.metaKey)
$.datepick._adjustDate(event.target,(isRTL?+1:-1),'D');handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey)
$.datepick._adjustDate(event.target,(event.ctrlKey?-$.datepick._get(inst,'stepBigMonths'):-$.datepick._get(inst,'stepMonths')),'M');break;case 38:if(event.ctrlKey||event.metaKey)
$.datepick._adjustDate(event.target,-7,'D');handled=event.ctrlKey||event.metaKey;break;case 39:if(event.ctrlKey||event.metaKey)
$.datepick._adjustDate(event.target,(isRTL?-1:+1),'D');handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey)
$.datepick._adjustDate(event.target,(event.ctrlKey?+$.datepick._get(inst,'stepBigMonths'):+$.datepick._get(inst,'stepMonths')),'M');break;case 40:if(event.ctrlKey||event.metaKey)
$.datepick._adjustDate(event.target,+7,'D');handled=event.ctrlKey||event.metaKey;break;default:handled=false;}
else if(event.keyCode==36&&event.ctrlKey)
$.datepick._showDatepick(this);else
handled=false;if(handled){event.preventDefault();event.stopPropagation();}
inst.ctrlKey=(event.keyCode<48);return!handled;},_doKeyPress:function(event){var inst=$.datepick._getInst(event.target);if($.datepick._get(inst,'constrainInput')){var chars=$.datepick._possibleChars(inst);var chr=String.fromCharCode(event.keyCode||event.charCode);return inst.ctrlKey||(chr<' '||!chars||chars.indexOf(chr)>-1);}},_doKeyUp:function(event){var inst=$.datepick._getInst(event.target);if(inst.input.val()!=inst.lastVal){try{var separator=($.datepick._get(inst,'rangeSelect')?$.datepick._get(inst,'rangeSeparator'):($.datepick._get(inst,'multiSelect')?$.datepick._get(inst,'multiSeparator'):''));var dates=(inst.input?inst.input.val():'');dates=(separator?dates.split(separator):[dates]);var ok=true;for(var i=0;i<dates.length;i++){if(!$.datepick.parseDate($.datepick._get(inst,'dateFormat'),dates[i],$.datepick._getFormatConfig(inst))){ok=false;break;}}
if(ok){$.datepick._setDateFromField(inst);$.datepick._updateAlternate(inst);$.datepick._updateDatepick(inst);}}
catch(event){}}
return true;},_possibleChars:function(inst){var dateFormat=$.datepick._get(inst,'dateFormat');var chars=($.datepick._get(inst,'rangeSelect')?$.datepick._get(inst,'rangeSeparator'):($.datepick._get(inst,'multiSelect')?$.datepick._get(inst,'multiSeparator'):''));var literal=false;for(var iFormat=0;iFormat<dateFormat.length;iFormat++)
if(literal)
if(dateFormat.charAt(iFormat)=="'"&&!lookAhead("'"))
literal=false;else
chars+=dateFormat.charAt(iFormat);else
switch(dateFormat.charAt(iFormat)){case'd':case'm':case'y':case'@':chars+='0123456789';break;case'D':case'M':return null;case"'":if(lookAhead("'"))
chars+="'";else
literal=true;break;default:chars+=dateFormat.charAt(iFormat);}
return chars;},_doMouseOver:function(td,id,timestamp){var inst=$.datepick._getInst($('#'+id)[0]);var useTR=$.datepick._get(inst,'useThemeRoller')?1:0;$(td).parents('tbody').find('td').removeClass($.datepick._dayOverClass[useTR]).end().end().addClass($.datepick._dayOverClass[useTR]);if($.datepick._get(inst,'highlightWeek'))
$(td).parent().parent().find('tr').removeClass($.datepick._weekOverClass[useTR]).end().end().addClass($.datepick._weekOverClass[useTR]);if($(td).text()){var date=new Date(timestamp);if($.datepick._get(inst,'showStatus')){var status=($.datepick._get(inst,'statusForDate').apply((inst.input?inst.input[0]:null),[date,inst])||$.datepick._get(inst,'initStatus'));$('#'+$.datepick._statusId[useTR]+id).html(status);}
if($.datepick._get(inst,'onHover'))
$.datepick._doHover(td,'#'+id,date.getFullYear(),date.getMonth());}},_doMouseOut:function(td,id){var inst=$.datepick._getInst($('#'+id)[0]);var useTR=$.datepick._get(inst,'useThemeRoller')?1:0;$(td).removeClass($.datepick._dayOverClass[useTR]).removeClass($.datepick._weekOverClass[useTR]);if($.datepick._get(inst,'showStatus'))
$('#'+$.datepick._statusId[useTR]+id).html($.datepick._get(inst,'initStatus'));if($.datepick._get(inst,'onHover'))
$.datepick._doHover(td,'#'+id);},_doHover:function(td,id,year,month){var inst=this._getInst($(id)[0]);var useTR=$.datepick._get(inst,'useThemeRoller')?1:0;var onHover=this._get(inst,'onHover');var date=(year?this._daylightSavingAdjust(new Date(year,month,$(td).find('a').text())):null);onHover.apply((inst.input?inst.input[0]:null),[(date?this._formatDate(inst,date):''),date,inst]);},_showDatepick:function(input){input=input.target||input;if($.datepick._isDisabledDatepick(input)||$.datepick._lastInput==input)
return;var inst=$.datepick._getInst(input);var beforeShow=$.datepick._get(inst,'beforeShow');var useTR=$.datepick._get(inst,'useThemeRoller')?1:0;extendRemove(inst.settings,(beforeShow?beforeShow.apply(input,[input,inst]):{}));$.datepick._hideDatepick(null,'');$.datepick._lastInput=input;$.datepick._setDateFromField(inst);if($.datepick._inDialog)
input.value='';if(!$.datepick._pos){$.datepick._pos=$.datepick._findPos(input);$.datepick._pos[1]+=input.offsetHeight;}
var isFixed=false;$(input).parents().each(function(){isFixed|=$(this).css('position')=='fixed';return!isFixed;});if(isFixed&&$.browser_is_supported_datepick.opera){$.datepick._pos[0]-=document.documentElement.scrollLeft;$.datepick._pos[1]-=document.documentElement.scrollTop;}
var offset={left:$.datepick._pos[0],top:$.datepick._pos[1]};$.datepick._pos=null;inst.dpDiv.css({position:'absolute',display:'block',top:'-1000px'});$.datepick._updateDatepick(inst);inst.dpDiv.width($.datepick._getNumberOfMonths(inst)[1]*$('.'+$.datepick._oneMonthClass[useTR],inst.dpDiv).width());offset=$.datepick._checkOffset(inst,offset,isFixed);inst.dpDiv.css({position:($.datepick._inDialog&&$.blockUI?'static':(isFixed?'fixed':'absolute')),display:'none',left:offset.left+'px',top:offset.top+'px'});if(!inst.inline){var showAnim=$.datepick._get(inst,'showAnim')||'show';var duration=$.datepick._get(inst,'duration');var postProcess=function(){$.datepick._datepickerShowing=true;var borders=$.datepick._getBorders(inst.dpDiv);inst.dpDiv.find('iframe.'+$.datepick._coverClass[useTR]).css({left:-borders[0],top:-borders[1],width:inst.dpDiv.outerWidth(),height:inst.dpDiv.outerHeight()});};if($.effects&&$.effects[showAnim])
inst.dpDiv.show(showAnim,$.datepick._get(inst,'showOptions'),duration,postProcess);else
inst.dpDiv[showAnim](duration,postProcess);if(duration=='')
postProcess();if(inst.input[0].type!='hidden')
$(inst.input).trigger('focus');$.datepick._curInst=inst;}},_updateDatepick:function(inst){var borders=this._getBorders(inst.dpDiv);var useTR=this._get(inst,'useThemeRoller')?1:0;inst.dpDiv.empty().append(this._generateHTML(inst)).find('iframe.'+this._coverClass[useTR]).css({left:-borders[0],top:-borders[1],width:inst.dpDiv.outerWidth(),height:inst.dpDiv.outerHeight()});var numMonths=this._getNumberOfMonths(inst);if(!inst.inline)
inst.dpDiv.attr('id',this._mainDivId[useTR]);if(!inst.inline)inst.dpDiv.attr('class','datepick-inline');inst.dpDiv.removeClass(this._mainDivClass[1-useTR]).addClass(this._mainDivClass[useTR]).removeClass(this._multiClass.join(' ')).addClass(numMonths[0]!=1||numMonths[1]!=1?this._multiClass[useTR]:'').removeClass(this._rtlClass.join(' ')).addClass(this._get(inst,'isRTL')?this._rtlClass[useTR]:'');if(inst.input&&inst.input[0].type!='hidden'&&inst==$.datepick._curInst)
$(inst.input).trigger('focus');var resource_id=this._get(inst,'wpbc_resource_id');if(resource_id>0){$('body').trigger('wpbc_datepick_inline_calendar_refresh',[resource_id,inst]);}},_getBorders:function(elem){var convert=function(value){var extra=($.browser_is_supported_datepick.msie?1:0);return{thin:1+extra,medium:3+extra,thick:5+extra}[value]||value;};return[parseFloat(convert(elem.css('border-left-width'))),parseFloat(convert(elem.css('border-top-width')))];},_checkOffset:function(inst,offset,isFixed){var alignment=this._get(inst,'alignment');var isRTL=this._get(inst,'isRTL');var pos=inst.input?this._findPos(inst.input[0]):null;var browserWidth=document.documentElement.clientWidth;var browserHeight=document.documentElement.clientHeight;if(browserWidth==0)
return offset;var scrollX=document.documentElement.scrollLeft||document.body.scrollLeft;var scrollY=document.documentElement.scrollTop||document.body.scrollTop;var above=pos[1]-(this._inDialog?0:inst.dpDiv.outerHeight())-
(isFixed&&$.browser_is_supported_datepick.opera?document.documentElement.scrollTop:0);var below=offset.top;var alignL=offset.left;var alignR=pos[0]+(inst.input?inst.input.outerWidth():0)-inst.dpDiv.outerWidth()-
(isFixed&&$.browser_is_supported_datepick.opera?document.documentElement.scrollLeft:0);var tooWide=(offset.left+inst.dpDiv.outerWidth()-scrollX)>browserWidth;var tooHigh=(offset.top+inst.dpDiv.outerHeight()-scrollY)>browserHeight;if(alignment=='topLeft'){offset={left:alignL,top:above};}
else if(alignment=='topRight'){offset={left:alignR,top:above};}
else if(alignment=='bottomLeft'){offset={left:alignL,top:below};}
else if(alignment=='bottomRight'){offset={left:alignR,top:below};}
else if(alignment=='top'){offset={left:(isRTL||tooWide?alignR:alignL),top:above};}
else{offset={left:(isRTL||tooWide?alignR:alignL),top:(tooHigh?above:below)};}
offset.left=Math.max((isFixed?0:scrollX),offset.left-(isFixed?scrollX:0));offset.top=Math.max((isFixed?0:scrollY),offset.top-(isFixed?scrollY:0));return offset;},_findPos:function(elem){while(elem&&(elem.type=='hidden'||elem.nodeType!=1)){elem=elem.nextSibling;}
var position=$(elem).offset();return[position.left,position.top];},_hideDatepick:function(input,duration){var inst=this._curInst;if(!inst||(input&&inst!=$.data(input,PROP_NAME)))
return false;var rangeSelect=this._get(inst,'rangeSelect');if(rangeSelect&&inst.stayOpen)
this._updateInput('#'+inst.id);inst.stayOpen=false;if(this._datepickerShowing){duration=(duration!=null?duration:this._get(inst,'duration'));var showAnim=this._get(inst,'showAnim');var postProcess=function(){$.datepick._tidyDialog(inst);};if(duration!=''&&$.effects&&$.effects[showAnim])
inst.dpDiv.hide(showAnim,$.datepick._get(inst,'showOptions'),duration,postProcess);else
inst.dpDiv[(duration==''?'hide':(showAnim=='slideDown'?'slideUp':(showAnim=='fadeIn'?'fadeOut':'hide')))](duration,postProcess);if(duration=='')
this._tidyDialog(inst);var onClose=this._get(inst,'onClose');if(onClose)
onClose.apply((inst.input?inst.input[0]:null),[(inst.input?inst.input.val():''),this._getDate(inst),inst]);this._datepickerShowing=false;this._lastInput=null;inst.settings.prompt=null;if(this._inDialog){this._dialogInput.css({position:'absolute',left:'0',top:'-100px'});this.dpDiv.removeClass(this._dialogClass[this._get(inst,'useThemeRoller')?1:0]);if($.blockUI){$.unblockUI();$('body').append(this.dpDiv);}}
this._inDialog=false;}
this._curInst=null;return false;},_tidyDialog:function(inst){var useTR=this._get(inst,'useThemeRoller')?1:0;inst.dpDiv.removeClass(this._dialogClass[useTR]).unbind('.datepick');$('.'+this._promptClass[useTR],inst.dpDiv).remove();},_checkExternalClick:function(event){if(!$.datepick._curInst)
return;var $target=$(event.target);var useTR=$.datepick._get($.datepick._curInst,'useThemeRoller')?1:0;if(!$target.parents().andSelf().is('#'+$.datepick._mainDivId[useTR])&&!$target.hasClass($.datepick.markerClassName)&&!$target.parents().andSelf().hasClass($.datepick._triggerClass[useTR])&&$.datepick._datepickerShowing&&!($.datepick._inDialog&&$.blockUI))
$.datepick._hideDatepick(null,'');},_adjustDate:function(id,offset,period){var inst=this._getInst($(id)[0]);this._adjustInstDate(inst,offset+
(period=='M'?this._get(inst,'showCurrentAtPos'):0),period);this._updateDatepick(inst);return false;},_gotoToday:function(id){var target=$(id);var inst=this._getInst(target[0]);if(this._get(inst,'gotoCurrent')&&inst.dates[0])
inst.cursorDate=new Date(inst.dates[0].getTime());else
inst.cursorDate=this._daylightSavingAdjust(new Date());inst.drawMonth=inst.cursorDate.getMonth();inst.drawYear=inst.cursorDate.getFullYear();this._notifyChange(inst);this._adjustDate(target);return false;},_selectMonthYear:function(id,select,period){var target=$(id);var inst=this._getInst(target[0]);inst.selectingMonthYear=false;var value=parseInt(select.options[select.selectedIndex].value,10);inst['selected'+(period=='M'?'Month':'Year')]=inst['draw'+(period=='M'?'Month':'Year')]=value;inst.cursorDate.setDate(Math.min(inst.cursorDate.getDate(),$.datepick._getDaysInMonth(inst.drawYear,inst.drawMonth)));inst.cursorDate['set'+(period=='M'?'Month':'FullYear')](value);this._notifyChange(inst);this._adjustDate(target);},_clickMonthYear:function(id){var inst=this._getInst($(id)[0]);if(inst.input&&inst.selectingMonthYear&&!$.browser_is_supported_datepick.msie)
$(inst.input).trigger('focus');inst.selectingMonthYear=!inst.selectingMonthYear;},_changeFirstDay:function(id,day){var inst=this._getInst($(id)[0]);inst.settings.firstDay=day;this._updateDatepick(inst);return false;},_selectDay:function(td,id,timestamp){var inst=this._getInst($(id)[0]);var useTR=this._get(inst,'useThemeRoller')?1:0;if($(td).hasClass(this._unselectableClass[useTR]))
return false;var rangeSelect=this._get(inst,'rangeSelect');var multiSelect=this._get(inst,'multiSelect');if(rangeSelect)
inst.stayOpen=!inst.stayOpen;else if(multiSelect)
inst.stayOpen=true;if(inst.stayOpen){$('.datepick td',inst.dpDiv).removeClass(this._selectedClass[useTR]);$(td).addClass(this._selectedClass[useTR]);}
inst.cursorDate=this._daylightSavingAdjust(new Date(timestamp));var date=new Date(inst.cursorDate.getTime());if(rangeSelect&&!inst.stayOpen)
inst.dates[1]=date;else if(multiSelect){var pos=-1;for(var i=0;i<inst.dates.length;i++)
if(inst.dates[i]&&date.getTime()==inst.dates[i].getTime()){pos=i;break;}
if(pos>-1)
inst.dates.splice(pos,1);else if(inst.dates.length<multiSelect){if(inst.dates[0])
inst.dates.push(date);else
inst.dates=[date];inst.stayOpen=(inst.dates.length!=multiSelect);}}
else
inst.dates=[date];this._updateInput(id);if(inst.stayOpen)
this._updateDatepick(inst);else if((rangeSelect||multiSelect)&&inst.inline)
this._updateDatepick(inst);return false;},_clearDate:function(id){var target=$(id);var inst=this._getInst(target[0]);if(this._get(inst,'mandatory'))
return false;inst.stayOpen=false;inst.dates=(this._get(inst,'showDefault')?[this._getDefaultDate(inst)]:[]);this._updateInput(target);return false;},_updateInput:function(id){var inst=this._getInst($(id)[0]);var dateStr=this._showDate(inst);this._updateAlternate(inst);var onSelect=this._get(inst,'onSelect');if(onSelect)
onSelect.apply((inst.input?inst.input[0]:null),[dateStr,this._getDate(inst),inst]);else if(inst.input)
inst.input.trigger('change');if(inst.inline)
this._updateDatepick(inst);else if(!inst.stayOpen){this._hideDatepick(null,this._get(inst,'duration'));this._lastInput=inst.input[0];if(typeof(inst.input[0])!='object')
$(inst.input).trigger('focus');this._lastInput=null;}
return false;},_showDate:function(inst){var dateStr='';if(inst.input){dateStr=(inst.dates.length==0?'':this._formatDate(inst,inst.dates[0]));if(dateStr){if(this._get(inst,'rangeSelect'))
dateStr+=this._get(inst,'rangeSeparator')+
this._formatDate(inst,inst.dates[1]||inst.dates[0]);else if(this._get(inst,'multiSelect'))
for(var i=1;i<inst.dates.length;i++)
dateStr+=this._get(inst,'multiSeparator')+
this._formatDate(inst,inst.dates[i]);}
inst.input.val(dateStr);}
return dateStr;},_updateAlternate:function(inst){var altField=this._get(inst,'altField');if(altField){var altFormat=this._get(inst,'altFormat')||this._get(inst,'dateFormat');var settings=this._getFormatConfig(inst);var dateStr=this.formatDate(altFormat,inst.dates[0],settings);if(dateStr&&this._get(inst,'rangeSelect'))
dateStr+=this._get(inst,'rangeSeparator')+this.formatDate(altFormat,inst.dates[1]||inst.dates[0],settings);else if(this._get(inst,'multiSelect'))
for(var i=1;i<inst.dates.length;i++)
dateStr+=this._get(inst,'multiSeparator')+
this.formatDate(altFormat,inst.dates[i],settings);$(altField).val(dateStr);}},noWeekends:function(date){return[(date.getDay()||7)<6,''];},iso8601Week:function(date){var checkDate=new Date(date.getTime());checkDate.setDate(checkDate.getDate()+4-(checkDate.getDay()||7));var time=checkDate.getTime();checkDate.setMonth(0);checkDate.setDate(1);return Math.floor(Math.round((time-checkDate)/86400000)/7)+1;},dateStatus:function(date,inst){return $.datepick.formatDate($.datepick._get(inst,'dateStatus'),date,$.datepick._getFormatConfig(inst));},parseDate:function(format,value,settings){if(format==null||value==null)
throw'Invalid arguments';value=(typeof value=='object'?value.toString():value+'');if(value=='')
return null;settings=settings||{};var shortYearCutoff=settings.shortYearCutoff||this._defaults.shortYearCutoff;shortYearCutoff=(typeof shortYearCutoff!='string'?shortYearCutoff:new Date().getFullYear()%100+parseInt(shortYearCutoff,10));var dayNamesShort=settings.dayNamesShort||this._defaults.dayNamesShort;var dayNames=settings.dayNames||this._defaults.dayNames;var monthNamesShort=settings.monthNamesShort||this._defaults.monthNamesShort;var monthNames=settings.monthNames||this._defaults.monthNames;var year=-1;var month=-1;var day=-1;var doy=-1;var literal=false;var lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)==match);if(matches)
iFormat++;return matches;};var getNumber=function(match){lookAhead(match);var size=(match=='@'?14:(match=='!'?20:(match=='y'?4:(match=='o'?3:2))));var digits=new RegExp('^\\d{1,'+size+'}');var num=value.substring(iValue).match(digits);if(!num)
throw'Missing number at position '+iValue;iValue+=num[0].length;return parseInt(num[0],10);};var getName=function(match,shortNames,longNames){var names=(lookAhead(match)?longNames:shortNames);for(var i=0;i<names.length;i++){if(value.substr(iValue,names[i].length)==names[i]){iValue+=names[i].length;return i+1;}}
throw'Unknown name at position '+iValue;};var checkLiteral=function(){if(value.charAt(iValue)!=format.charAt(iFormat))
throw'Unexpected literal at position '+iValue;iValue++;};var iValue=0;for(var iFormat=0;iFormat<format.length;iFormat++){if(literal)
if(format.charAt(iFormat)=="'"&&!lookAhead("'"))
literal=false;else
checkLiteral();else
switch(format.charAt(iFormat)){case'd':day=getNumber('d');break;case'D':getName('D',dayNamesShort,dayNames);break;case'o':doy=getNumber('o');break;case'w':getNumber('w');break;case'm':month=getNumber('m');break;case'M':month=getName('M',monthNamesShort,monthNames);break;case'y':year=getNumber('y');break;case'@':var date=new Date(getNumber('@'));year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case'!':var date=new Date((getNumber('!')-this._ticksTo1970)/10000);year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case"'":if(lookAhead("'"))
checkLiteral();else
literal=true;break;default:checkLiteral();}}
if(iValue<value.length)
throw'Additional text found at end';if(year==-1)
year=new Date().getFullYear();else if(year<100)
year+=(shortYearCutoff==-1?1900:new Date().getFullYear()-
new Date().getFullYear()%100-(year<=shortYearCutoff?0:100));if(doy>-1){month=1;day=doy;do{var dim=this._getDaysInMonth(year,month-1);if(day<=dim)
break;month++;day-=dim;}while(true);}
var date=this._daylightSavingAdjust(new Date(year,month-1,day));if(date.getFullYear()!=year||date.getMonth()+1!=month||date.getDate()!=day)
throw'Invalid date';return date;},ATOM:'yy-mm-dd',COOKIE:'D, dd M yy',ISO_8601:'yy-mm-dd',RFC_822:'D, d M y',RFC_850:'DD, dd-M-y',RFC_1036:'D, d M y',RFC_1123:'D, d M yy',RFC_2822:'D, d M yy',RSS:'D, d M y',TICKS:'!',TIMESTAMP:'@',W3C:'yy-mm-dd',_ticksTo1970:(((1970-1)*365+Math.floor(1970/4)-Math.floor(1970/100)+
Math.floor(1970/400))*24*60*60*10000000),formatDate:function(format,date,settings){if(!date)
return'';settings=settings||{};var dayNamesShort=settings.dayNamesShort||this._defaults.dayNamesShort;var dayNames=settings.dayNames||this._defaults.dayNames;var monthNamesShort=settings.monthNamesShort||this._defaults.monthNamesShort;var monthNames=settings.monthNames||this._defaults.monthNames;var calculateWeek=settings.calculateWeek||this._defaults.calculateWeek;var lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)==match);if(matches)
iFormat++;return matches;};var formatNumber=function(match,value,len){var num=''+value;if(lookAhead(match))
while(num.length<len)
num='0'+num;return num;};var formatName=function(match,value,shortNames,longNames){return(lookAhead(match)?longNames[value]:shortNames[value]);};var output='';var literal=false;if(date)
for(var iFormat=0;iFormat<format.length;iFormat++){if(literal)
if(format.charAt(iFormat)=="'"&&!lookAhead("'"))
literal=false;else
output+=format.charAt(iFormat);else
switch(format.charAt(iFormat)){case'd':output+=formatNumber('d',date.getDate(),2);break;case'D':output+=formatName('D',date.getDay(),dayNamesShort,dayNames);break;case'o':output+=formatNumber('o',(date.getTime()-new Date(date.getFullYear(),0,0).getTime())/86400000,3);break;case'w':output+=formatNumber('w',calculateWeek(date),2);break;case'm':output+=formatNumber('m',date.getMonth()+1,2);break;case'M':output+=formatName('M',date.getMonth(),monthNamesShort,monthNames);break;case'y':output+=(lookAhead('y')?date.getFullYear():(date.getFullYear()%100<10?'0':'')+date.getFullYear()%100);break;case'@':output+=date.getTime();break;case'!':output+=date.getTime()*10000+this._ticksTo1970;break;case"'":if(lookAhead("'"))
output+="'";else
literal=true;break;default:output+=format.charAt(iFormat);}}
return output;},_get:function(inst,name){return inst.settings[name]!==undefined?inst.settings[name]:this._defaults[name];},_setDateFromField:function(inst){var dateFormat=this._get(inst,'dateFormat');var rangeSelect=this._get(inst,'rangeSelect');var multiSelect=this._get(inst,'multiSelect');inst.lastVal=(inst.input?inst.input.val():'');var dates=inst.lastVal;dates=(rangeSelect?dates.split(this._get(inst,'rangeSeparator')):(multiSelect?dates.split(this._get(inst,'multiSeparator')):[dates]));inst.dates=[];var settings=this._getFormatConfig(inst);for(var i=0;i<dates.length;i++)
try{inst.dates[i]=this.parseDate(dateFormat,dates[i],settings);}
catch(event){inst.dates[i]=null;}
for(var i=inst.dates.length-1;i>=0;i--)
if(!inst.dates[i])
inst.dates.splice(i,1);if(rangeSelect&&inst.dates.length<2)
inst.dates[1]=inst.dates[0];if(multiSelect&&inst.dates.length>multiSelect)
inst.dates.splice(multiSelect,inst.dates.length);inst.cursorDate=new Date((inst.dates[0]||this._getDefaultDate(inst)).getTime());inst.drawMonth=inst.cursorDate.getMonth();inst.drawYear=inst.cursorDate.getFullYear();this._adjustInstDate(inst);},_getDefaultDate:function(inst){return this._restrictMinMax(inst,this._determineDate(inst,this._get(inst,'defaultDate'),new Date()));},_determineDate:function(inst,date,defaultDate){var offsetNumeric=function(offset){var date=new Date();date.setDate(date.getDate()+offset);return date;};var offsetString=function(offset){try{return $.datepick.parseDate($.datepick._get(inst,'dateFormat'),offset,$.datepick._getFormatConfig(inst));}
catch(e){}
var date=(offset.toLowerCase().match(/^c/)?$.datepick._getDate(inst):null)||new Date();var year=date.getFullYear();var month=date.getMonth();var day=date.getDate();var pattern=/([+-]?[0-9]+)\s*(d|w|m|y)?/g;var matches=pattern.exec(offset.toLowerCase());while(matches){switch(matches[2]||'d'){case'd':day+=parseInt(matches[1],10);break;case'w':day+=parseInt(matches[1],10)*7;break;case'm':month+=parseInt(matches[1],10);day=Math.min(day,$.datepick._getDaysInMonth(year,month));break;case'y':year+=parseInt(matches[1],10);day=Math.min(day,$.datepick._getDaysInMonth(year,month));break;}
matches=pattern.exec(offset.toLowerCase());}
return new Date(year,month,day);};date=(date==null?defaultDate:(typeof date=='string'?offsetString(date):(typeof date=='number'?(isNaN(date)||date==Infinity||date==-Infinity?defaultDate:offsetNumeric(date)):date)));date=(date&&(date.toString()=='Invalid Date'||date.toString()=='NaN')?defaultDate:date);if(date){date.setHours(0);date.setMinutes(0);date.setSeconds(0);date.setMilliseconds(0);}
return this._daylightSavingAdjust(date);},_daylightSavingAdjust:function(date){if(!date)return null;date.setHours(date.getHours()>12?date.getHours()+2:0);return date;},_setDate:function(inst,date,endDate){date=(!date?[]:(isArray(date)?date:[date]));if(endDate)
date.push(endDate);var clear=(date.length==0);var origMonth=inst.cursorDate.getMonth();var origYear=inst.cursorDate.getFullYear();inst.dates=[this._restrictMinMax(inst,this._determineDate(inst,date[0],new Date()))];inst.cursorDate=new Date(inst.dates[0].getTime());inst.drawMonth=inst.cursorDate.getMonth();inst.drawYear=inst.cursorDate.getFullYear();if(this._get(inst,'rangeSelect'))
inst.dates[1]=(date.length<1?inst.dates[0]:this._restrictMinMax(inst,this._determineDate(inst,date[1],null)));else if(this._get(inst,'multiSelect'))
for(var i=1;i<date.length;i++)
inst.dates[i]=this._restrictMinMax(inst,this._determineDate(inst,date[i],null));if(origMonth!=inst.cursorDate.getMonth()||origYear!=inst.cursorDate.getFullYear())
this._notifyChange(inst);this._adjustInstDate(inst);this._showDate(inst);},_getDate:function(inst){var startDate=(inst.input&&inst.input.val()==''?null:inst.dates[0]);if(this._get(inst,'rangeSelect'))
return(startDate?[inst.dates[0],inst.dates[1]||inst.dates[0]]:[null,null]);else if(this._get(inst,'multiSelect'))
return inst.dates.slice(0,inst.dates.length);else
return startDate;},_generateHTML:function(inst){var today=new Date();today=this._daylightSavingAdjust(new Date(today.getFullYear(),today.getMonth(),today.getDate()));var showStatus=this._get(inst,'showStatus');var initStatus=this._get(inst,'initStatus')||'&#xa0;';var isRTL=this._get(inst,'isRTL');var useTR=this._get(inst,'useThemeRoller')?1:0;var clear=(this._get(inst,'mandatory')?'':'<div class="'+this._clearClass[useTR]+'"><a href="javascript:void(0)" '+'onclick="jQuery.datepick._clearDate(\'#'+inst.id+'\');"'+
this._addStatus(useTR,showStatus,inst.id,this._get(inst,'clearStatus'),initStatus)+'>'+this._get(inst,'clearText')+'</a></div>');var controls='<div class="'+this._controlClass[useTR]+'">'+(isRTL?'':clear)+'<div class="'+this._closeClass[useTR]+'"><a href="javascript:void(0)" '+'onclick="jQuery.datepick._hideDatepick();"'+
this._addStatus(useTR,showStatus,inst.id,this._get(inst,'closeStatus'),initStatus)+'>'+this._get(inst,'closeText')+'</a></div>'+(isRTL?clear:'')+'</div>';var prompt=this._get(inst,'prompt');var closeAtTop=this._get(inst,'closeAtTop');var hideIfNoPrevNext=this._get(inst,'hideIfNoPrevNext');var navigationAsDateFormat=this._get(inst,'navigationAsDateFormat');var showBigPrevNext=this._get(inst,'showBigPrevNext');var numMonths=this._getNumberOfMonths(inst);var showCurrentAtPos=this._get(inst,'showCurrentAtPos');var stepMonths=this._get(inst,'stepMonths');var stepBigMonths=this._get(inst,'stepBigMonths');var isMultiMonth=(numMonths[0]!=1||numMonths[1]!=1);var minDate=this._getMinMaxDate(inst,'min',true);var maxDate=this._getMinMaxDate(inst,'max');var drawMonth=inst.drawMonth-showCurrentAtPos;var drawYear=inst.drawYear;if(drawMonth<0){drawMonth+=12;drawYear--;}
if(maxDate){var maxDraw=this._daylightSavingAdjust(new Date(maxDate.getFullYear(),maxDate.getMonth()-(numMonths[0]*numMonths[1])+1,maxDate.getDate()));maxDraw=(minDate&&maxDraw<minDate?minDate:maxDraw);while(this._daylightSavingAdjust(new Date(drawYear,drawMonth,1))>maxDraw){drawMonth--;if(drawMonth<0){drawMonth=11;drawYear--;}}}
inst.drawMonth=drawMonth;inst.drawYear=drawYear;var prevText=this._get(inst,'prevText');prevText=(!navigationAsDateFormat?prevText:this.formatDate(prevText,this._daylightSavingAdjust(new Date(drawYear,drawMonth-stepMonths,1)),this._getFormatConfig(inst)));var prevBigText=(showBigPrevNext?this._get(inst,'prevBigText'):'');prevBigText=(!navigationAsDateFormat?prevBigText:this.formatDate(prevBigText,this._daylightSavingAdjust(new Date(drawYear,drawMonth-stepBigMonths,1)),this._getFormatConfig(inst)));var prev='<div class="'+this._prevClass[useTR]+'">'+
(this._canAdjustMonth(inst,-1,drawYear,drawMonth)?(showBigPrevNext?'<a href="javascript:void(0)" onclick="jQuery.datepick._adjustDate(\'#'+
inst.id+'\', -'+stepBigMonths+', \'M\');"'+
this._addStatus(useTR,showStatus,inst.id,this._get(inst,'prevBigStatus'),initStatus)+'>'+prevBigText+'</a>':'')+'<a href="javascript:void(0)" onclick="jQuery.datepick._adjustDate(\'#'+
inst.id+'\', -'+stepMonths+', \'M\');"'+
this._addStatus(useTR,showStatus,inst.id,this._get(inst,'prevStatus'),initStatus)+'>'+prevText+'</a>':(hideIfNoPrevNext?'&#xa0;':(showBigPrevNext?'<label>'+prevBigText+'</label>':'')+'<label>'+prevText+'</label>'))+'</div>';var nextText=this._get(inst,'nextText');nextText=(!navigationAsDateFormat?nextText:this.formatDate(nextText,this._daylightSavingAdjust(new Date(drawYear,drawMonth+stepMonths,1)),this._getFormatConfig(inst)));var nextBigText=(showBigPrevNext?this._get(inst,'nextBigText'):'');nextBigText=(!navigationAsDateFormat?nextBigText:this.formatDate(nextBigText,this._daylightSavingAdjust(new Date(drawYear,drawMonth+stepBigMonths,1)),this._getFormatConfig(inst)));var next='<div class="'+this._nextClass[useTR]+'">'+
(this._canAdjustMonth(inst,+1,drawYear,drawMonth)?'<a href="javascript:void(0)" onclick="jQuery.datepick._adjustDate(\'#'+
inst.id+'\', +'+stepMonths+', \'M\');"'+
this._addStatus(useTR,showStatus,inst.id,this._get(inst,'nextStatus'),initStatus)+'>'+nextText+'</a>'+
(showBigPrevNext?'<a href="javascript:void(0)" onclick="jQuery.datepick._adjustDate(\'#'+
inst.id+'\', +'+stepBigMonths+', \'M\');"'+
this._addStatus(useTR,showStatus,inst.id,this._get(inst,'nextBigStatus'),initStatus)+'>'+nextBigText+'</a>':''):(hideIfNoPrevNext?'&#xa0;':'<label>'+nextText+'</label>'+
(showBigPrevNext?'<label>'+nextBigText+'</label>':'')))+'</div>';var currentText=this._get(inst,'currentText');var gotoDate=(this._get(inst,'gotoCurrent')&&inst.dates[0]?inst.dates[0]:today);currentText=(!navigationAsDateFormat?currentText:this.formatDate(currentText,gotoDate,this._getFormatConfig(inst)));var html=(closeAtTop&&!inst.inline?controls:'');html+='<div class="calendar-links">'+(isRTL?next:prev);html+=(isRTL?prev:next)+'</div>';var firstDay=parseInt(this._get(inst,'firstDay'),10);firstDay=(isNaN(firstDay)?0:firstDay);var changeFirstDay=this._get(inst,'changeFirstDay');var dayNames=this._get(inst,'dayNames');var dayNamesShort=this._get(inst,'dayNamesShort');var dayNamesMin=this._get(inst,'dayNamesMin');var monthNames=this._get(inst,'monthNames');var beforeShowDay=this._get(inst,'beforeShowDay');var showOtherMonths=this._get(inst,'showOtherMonths');var selectOtherMonths=this._get(inst,'selectOtherMonths');var showWeeks=this._get(inst,'showWeeks');var calculateWeek=this._get(inst,'calculateWeek')||this.iso8601Week;var weekStatus=this._get(inst,'weekStatus');var status=(showStatus?this._get(inst,'dayStatus')||initStatus:'');var dateStatus=this._get(inst,'statusForDate')||this.dateStatus;var defaultDate=this._getDefaultDate(inst);for(var row=0;row<numMonths[0];row++){for(var col=0;col<numMonths[1];col++){var cursorDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,inst.cursorDate.getDate()));html+='<div class="'+this._oneMonthClass[useTR]+
(col==0&&!useTR?' '+this._newRowClass[useTR]:'')+'">'+
this._generateMonthYearHeader(inst,drawMonth,drawYear,minDate,maxDate,cursorDate,row>0||col>0,useTR,showStatus,initStatus,monthNames)+'<table class="'+this._tableClass[useTR]+'" cellpadding="0" cellspacing="0"><thead>'+'<tr class="'+this._tableHeaderClass[useTR]+'">'+(showWeeks?'<th'+
this._addStatus(useTR,showStatus,inst.id,weekStatus,initStatus)+'>'+
this._get(inst,'weekHeader')+'</th>':'');for(var dow=0;dow<7;dow++){var day=(dow+firstDay)%7;var dayStatus=(!showStatus||!changeFirstDay?'':status.replace(/DD/,dayNames[day]).replace(/D/,dayNamesShort[day]));html+='<th'+((dow+firstDay+6)%7<5?'':' class="'+this._weekendClass[useTR]+'"')+'>'+
(!changeFirstDay?'<span'+
this._addStatus(useTR,showStatus,inst.id,dayNames[day],initStatus):'<a href="javascript:void(0)" onclick="jQuery.datepick._changeFirstDay(\'#'+
inst.id+'\', '+day+');"'+
this._addStatus(useTR,showStatus,inst.id,dayStatus,initStatus))+' title="'+dayNames[day]+'">'+
dayNamesMin[day]+(changeFirstDay?'</a>':'</span>')+'</th>';}
html+='</tr></thead><tbody>';var daysInMonth=this._getDaysInMonth(drawYear,drawMonth);if(drawYear==inst.cursorDate.getFullYear()&&drawMonth==inst.cursorDate.getMonth())
inst.cursorDate.setDate(Math.min(inst.cursorDate.getDate(),daysInMonth));var leadDays=(this._getFirstDayOfMonth(drawYear,drawMonth)-firstDay+7)%7;var numRows=(isMultiMonth?6:Math.ceil((leadDays+daysInMonth)/7));var printDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,1-leadDays));for(var dRow=0;dRow<numRows;dRow++){html+='<tr class="'+this._weekRowClass[useTR]+'">'+
(showWeeks?'<td class="'+this._weekColClass[useTR]+'"'+
this._addStatus(useTR,showStatus,inst.id,weekStatus,initStatus)+'>'+
calculateWeek(printDate)+'</td>':'');for(var dow=0;dow<7;dow++){var daySettings=(beforeShowDay?beforeShowDay.apply((inst.input?inst.input[0]:null),[printDate]):[true,'']);var otherMonth=(printDate.getMonth()!=drawMonth);var unselectable=(otherMonth&&!selectOtherMonths)||!daySettings[0]||(minDate&&printDate<minDate)||(maxDate&&printDate>maxDate);var selected=(this._get(inst,'rangeSelect')&&inst.dates[0]&&printDate.getTime()>=inst.dates[0].getTime()&&printDate.getTime()<=(inst.dates[1]||inst.dates[0]).getTime());for(var i=0;i<inst.dates.length;i++)
selected=selected||(inst.dates[i]&&printDate.getTime()==inst.dates[i].getTime());var empty=otherMonth&&!showOtherMonths;html+='<td data-content="" class="'+this._dayClass[useTR]+
((dow+firstDay+6)%7>=5?' '+this._weekendClass[useTR]:'')+
(otherMonth?' '+this._otherMonthClass[useTR]:'')+
((printDate.getTime()==cursorDate.getTime()&&drawMonth==inst.cursorDate.getMonth()&&inst.keyEvent)||(defaultDate.getTime()==printDate.getTime()&&defaultDate.getTime()==cursorDate.getTime())?' ':'')+
(unselectable?' '+this._unselectableClass[useTR]:' '+this._selectableClass[useTR])+
(empty?'':' '+daySettings[1]+
(selected?' '+this._selectedClass[useTR]:'')+
(printDate.getTime()==today.getTime()?' '+this._todayClass[useTR]:''))+'"'+
(!empty&&daySettings[2]?' title="'+daySettings[2]+'"':'')+
(unselectable?'':' onmouseover="'+'jQuery.datepick._doMouseOver(this,\''+
inst.id+'\','+printDate.getTime()+')"'+' onmouseout="jQuery.datepick._doMouseOut(this,\''+inst.id+'\')"'+' onclick="jQuery.datepick._selectDay(this,\'#'+
inst.id+'\','+printDate.getTime()+')"')+'>';html+='<div class="wpbc-cell-box">'+'<div class="wpbc-diagonal-el">'+'<div class="wpbc-co-out">'+'<svg height="100%" width="100%" viewBox="0 0 100 100" preserveAspectRatio="none">'+'<polygon points="0,0 0,99 99,0"></polygon>'+'<polygon points="0,0 0,100 49,100 49,0"></polygon>'+'</svg>'+'</div>'+'<div class="wpbc-co-in">'+'<svg height="100%" width="100%" viewBox="0 0 98 98" preserveAspectRatio="none">'+'<polygon points="0,99 99,99 99,0"></polygon>'+'<polygon points="50,98 98,98 98,0 50,0"></polygon>'+'</svg>'+'</div>'+'</div>'+'<div class="date-cell-content">'+'<div class="date-content-top">'+
(unselectable?'':((typeof(wpbc_show_date_info_top)=='function')?wpbc_show_date_info_top(inst.id,printDate.getTime()):''))+'</div>'+
(empty?'&#xa0;':(unselectable?'<span>'+printDate.getDate()+'</span>':'<a>'+printDate.getDate()+'</a>'))+'<div class="date-content-bottom">'+
(unselectable?'':((typeof(wpbc_show_date_info_bottom)=='function')?wpbc_show_date_info_bottom(inst.id,printDate.getTime()):''))+'</div>'+'</div>'+'</div>';html+='</td>';printDate.setDate(printDate.getDate()+1);printDate=this._daylightSavingAdjust(printDate);}
html+='</tr>';}
drawMonth++;if(drawMonth>11){drawMonth=0;drawYear++;}
html+='</tbody></table></div>';}
if(useTR)
html+='<div class="'+this._newRowClass[useTR]+'"></div>';}
html+=(showStatus?'<div style="clear: both;"></div><div id="'+this._statusId[useTR]+
inst.id+'" class="'+this._statusClass[useTR]+'">'+initStatus+'</div>':'')+
(!closeAtTop&&!inst.inline?controls:'')+'<div style="clear: both;"></div>'+
($.browser_is_supported_datepick.msie&&parseInt($.browser_is_supported_datepick.version,10)<7&&!inst.inline?'<iframe src="javascript:false;" class="'+this._coverClass[useTR]+'"></iframe>':'');inst.keyEvent=false;return html;},_generateMonthYearHeader:function(inst,drawMonth,drawYear,minDate,maxDate,cursorDate,secondary,useTR,showStatus,initStatus,monthNames){var minDraw=this._daylightSavingAdjust(new Date(drawYear,drawMonth,1));minDate=(minDate&&minDraw<minDate?minDraw:minDate);var changeMonth=this._get(inst,'changeMonth');var changeYear=this._get(inst,'changeYear');var showMonthAfterYear=this._get(inst,'showMonthAfterYear');var html='<div class="'+this._monthYearClass[useTR]+'">';var monthHtml='';if(secondary||!changeMonth)
monthHtml+='<span class="'+this._monthClass[useTR]+'">'+
monthNames[drawMonth]+'</span>';else{var inMinYear=(minDate&&minDate.getFullYear()==drawYear);var inMaxYear=(maxDate&&maxDate.getFullYear()==drawYear);monthHtml+='<select class="'+this._monthSelectClass[useTR]+'" '+'onchange="jQuery.datepick._selectMonthYear(\'#'+inst.id+'\', this, \'M\');" '+'onclick="jQuery.datepick._clickMonthYear(\'#'+inst.id+'\');"'+
this._addStatus(useTR,showStatus,inst.id,this._get(inst,'monthStatus'),initStatus)+'>';for(var month=0;month<12;month++){if((!inMinYear||month>=minDate.getMonth())&&(!inMaxYear||month<=maxDate.getMonth()))
monthHtml+='<option value="'+month+'"'+
(month==drawMonth?' selected="selected"':'')+'>'+monthNames[month]+'</option>';}
monthHtml+='</select>';}
if(!showMonthAfterYear)
html+=monthHtml+(secondary||!changeMonth||!changeYear?'&#xa0;':'');if(secondary||!changeYear)
html+='<span class="'+this._yearClass[useTR]+'">'+drawYear+'</span>';else{var years=this._get(inst,'yearRange').split(':');var year=0;var endYear=0;if(years.length!=2){year=drawYear-10;endYear=drawYear+10;}else if(years[0].charAt(0)=='+'||years[0].charAt(0)=='-'){year=drawYear+parseInt(years[0],10);endYear=drawYear+parseInt(years[1],10);}else{year=parseInt(years[0],10);endYear=parseInt(years[1],10);}
year=(minDate?Math.max(year,minDate.getFullYear()):year);endYear=(maxDate?Math.min(endYear,maxDate.getFullYear()):endYear);html+='<select class="'+this._yearSelectClass[useTR]+'" '+'onchange="jQuery.datepick._selectMonthYear(\'#'+inst.id+'\', this, \'Y\');" '+'onclick="jQuery.datepick._clickMonthYear(\'#'+inst.id+'\');"'+
this._addStatus(useTR,showStatus,inst.id,this._get(inst,'yearStatus'),initStatus)+'>';for(;year<=endYear;year++){html+='<option value="'+year+'"'+
(year==drawYear?' selected="selected"':'')+'>'+year+'</option>';}
html+='</select>';}
html+=this._get(inst,'yearSuffix');if(showMonthAfterYear)
html+=(secondary||!changeMonth||!changeYear?'&#xa0;':'')+monthHtml;html+='</div>';return html;},_addStatus:function(useTR,showStatus,id,text,initStatus){return(showStatus?' onmouseover="jQuery(\'#'+this._statusId[useTR]+id+'\').html(\''+(text||initStatus)+'\');" '+'onmouseout="jQuery(\'#'+this._statusId[useTR]+id+'\').html(\''+initStatus+'\');"':'');},_adjustInstDate:function(inst,offset,period){var yearMonth=inst.drawYear+'/'+inst.drawMonth;var year=inst.drawYear+(period=='Y'?offset:0);var month=inst.drawMonth+(period=='M'?offset:0);var day=Math.min(inst.cursorDate.getDate(),this._getDaysInMonth(year,month))+
(period=='D'?offset:0);inst.cursorDate=this._restrictMinMax(inst,this._daylightSavingAdjust(new Date(year,month,day)));inst.drawMonth=inst.cursorDate.getMonth();inst.drawYear=inst.cursorDate.getFullYear();if(yearMonth!=inst.drawYear+'/'+inst.drawMonth)
this._notifyChange(inst);},_restrictMinMax:function(inst,date){var minDate=this._getMinMaxDate(inst,'min',true);var maxDate=this._getMinMaxDate(inst,'max');date=(minDate&&date<minDate?new Date(minDate.getTime()):date);date=(maxDate&&date>maxDate?new Date(maxDate.getTime()):date);return date;},_notifyChange:function(inst){var onChange=this._get(inst,'onChangeMonthYear');if(onChange)
onChange.apply((inst.input?inst.input[0]:null),[inst.cursorDate.getFullYear(),inst.cursorDate.getMonth()+1,this._daylightSavingAdjust(new Date(inst.cursorDate.getFullYear(),inst.cursorDate.getMonth(),1)),inst]);},_getNumberOfMonths:function(inst){var numMonths=this._get(inst,'numberOfMonths');return(numMonths==null?[1,1]:(typeof numMonths=='number'?[1,numMonths]:numMonths));},_getMinMaxDate:function(inst,minMax,checkRange){var date=this._determineDate(inst,this._get(inst,minMax+'Date'),null);var rangeMin=this._getRangeMin(inst);return(checkRange&&rangeMin&&(!date||rangeMin>date)?rangeMin:date);},_getRangeMin:function(inst){return(this._get(inst,'rangeSelect')&&inst.dates[0]&&!inst.dates[1]?inst.dates[0]:null);},_getDaysInMonth:function(year,month){return 32-new Date(year,month,32).getDate();},_getFirstDayOfMonth:function(year,month){return new Date(year,month,1).getDay();},_canAdjustMonth:function(inst,offset,curYear,curMonth){var numMonths=this._getNumberOfMonths(inst);var date=this._daylightSavingAdjust(new Date(curYear,curMonth+(offset<0?offset:numMonths[0]*numMonths[1]),1));if(offset<0)
date.setDate(this._getDaysInMonth(date.getFullYear(),date.getMonth()));return this._isInRange(inst,date);},_isInRange:function(inst,date){var minDate=this._getRangeMin(inst)||this._getMinMaxDate(inst,'min');var maxDate=this._getMinMaxDate(inst,'max');return((!minDate||date>=minDate)&&(!maxDate||date<=maxDate));},_getFormatConfig:function(inst){return{shortYearCutoff:this._get(inst,'shortYearCutoff'),dayNamesShort:this._get(inst,'dayNamesShort'),dayNames:this._get(inst,'dayNames'),monthNamesShort:this._get(inst,'monthNamesShort'),monthNames:this._get(inst,'monthNames')};},_formatDate:function(inst,year,month,day){if(!year)
inst.dates[0]=new Date(inst.cursorDate.getTime());var date=(year?(typeof year=='object'?year:this._daylightSavingAdjust(new Date(year,month,day))):inst.dates[0]);return this.formatDate(this._get(inst,'dateFormat'),date,this._getFormatConfig(inst));}});function extendRemove(target,props){$.extend(target,props);for(var name in props)
if(props[name]==null||props[name]==undefined)
target[name]=props[name];return target;};function isArray(a){return(a&&a.constructor==Array);};$.fn.datepick=function(options){var otherArgs=Array.prototype.slice.call(arguments,1);if(typeof options=='string'&&(options=='isDisabled'||options=='getDate'||options=='settings'))
return $.datepick['_'+options+'Datepick'].apply($.datepick,[this[0]].concat(otherArgs));if(options=='option'&&arguments.length==2&&typeof arguments[1]=='string')
return $.datepick['_'+options+'Datepick'].apply($.datepick,[this[0]].concat(otherArgs));return this.each(function(){typeof options=='string'?$.datepick['_'+options+'Datepick'].apply($.datepick,[this].concat(otherArgs)):$.datepick._attachDatepick(this,options);});};$.datepick=new Datepick();$(function(){$(document).on('mousedown',$.datepick._checkExternalClick).find('body').append($.datepick.dpDiv);});})(jQuery);
(function($){$.datepick.regional['pl']={clearText:'Wyczyść',clearStatus:'Wyczyść obecną datę',closeText:'Zamknij',closeStatus:'Zamknij bez zapisywania',prevText:'&#x3c;Poprzedni',prevStatus:'Pokaż poprzedni miesiąc',prevBigText:'&#x3c;&#x3c;',prevBigStatus:'',nextText:'Następny&#x3e;',nextStatus:'Pokaż następny miesiąc',nextBigText:'&#x3e;&#x3e;',nextBigStatus:'',currentText:'Dziś',currentStatus:'Pokaż aktualny miesiąc',monthNames:['Styczeń','Luty','Marzec','Kwiecień','Maj','Czerwiec','Lipiec','Sierpień','Wrzesień','Październik','Listopad','Grudzień'],monthNamesShort:['Sty','Lu','Mar','Kw','Maj','Cze','Lip','Sie','Wrz','Pa','Lis','Gru'],monthStatus:'Pokaż inny miesiąc',yearStatus:'Pokaż inny rok',weekHeader:'Tydz',weekStatus:'Tydzień roku',dayNames:['Niedziela','Poniedzialek','Wtorek','Środa','Czwartek','Piątek','Sobota'],dayNamesShort:['Nie','Pn','Wt','Śr','Czw','Pt','So'],dayNamesMin:['N','Pn','Wt','Śr','Cz','Pt','So'],dayStatus:'Ustaw DD jako pierwszy dzień tygodnia',dateStatus:'\'Wybierz\' D, M d',dateFormat:'yy-mm-dd',firstDay:1,initStatus:'Wybierz datę',isRTL:false,showMonthAfterYear:false,yearSuffix:''};$.datepick.setDefaults($.datepick.regional['pl']);})(jQuery);
var is_booking_without_payment=false;var date_approved=[];var date2approve=[];var date_admin_blank=[];var dates_additional_info=[];var is_all_days_available=[];var avalaibility_filters=[];var wpbc_resource_availability=[];var is_show_cost_in_tooltips=false;var is_show_cost_in_date_cell=false;var is_show_availability_in_tooltips=false;var timeoutID_of_thank_you_page=null;var wpbc_settings=(function(obj,$){var p_options=obj.options=obj.options||[];p_options['pending_days_selectable']=false;obj.get_option=function(item_id){return p_options[item_id];};obj.set_option=function(item_id,item_value){p_options[item_id]=item_value;};return obj;}(wpbc_settings||{},jQuery));function wpbc__inline_booking_calendar__days_css__get_rate(class_day,resource_id){if(('undefined'!==typeof(prices_per_day))&&('undefined'!==typeof(prices_per_day[resource_id]))&&('undefined'!==typeof(prices_per_day[resource_id][class_day]))){return' rate_'+prices_per_day[resource_id][class_day];}
return'';}
function wpbc__inline_booking_calendar__days_css__get_season_names(class_day,resource_id){if(('undefined'!==typeof(wpdev_bk_season_filter))&&('undefined'!==typeof(wpdev_bk_season_filter[class_day]))){return' '+wpdev_bk_season_filter[class_day].join(' ');}
return'';}
function init_datepick_cal(bk_type,date_approved_par,my_num_month,start_day_of_week,start_bk_month){if(jQuery('#calendar_booking'+bk_type).hasClass('hasDatepick')==true){return false;}
var cl=document.getElementById('calendar_booking'+bk_type);if(cl===null)return;date_approved[bk_type]=date_approved_par;var isRangeSelect=false;var bkMultiDaysSelect=365;if(bk_days_selection_mode==='dynamic'){isRangeSelect=true;bkMultiDaysSelect=0;}
if(bk_days_selection_mode==='single')bkMultiDaysSelect=0;var bkMinDate=0;var bkMaxDate=booking_max_monthes_in_calendar;var is_this_admin=false;if((location.href.indexOf('page=wpbc-new')!=-1)&&(location.href.indexOf('booking_hash')!=-1)){is_this_admin=true;bkMinDate=null;bkMaxDate=null;}
function selectDay(date){var is_calendar_booking_unselectable=jQuery('#calendar_booking_unselectable'+bk_type);var is_booking_form_also=jQuery('#booking_form_div'+bk_type);if((is_calendar_booking_unselectable.length>0)&&(is_booking_form_also.length<=0)){wpbc_unselect_all_days(bk_type);jQuery('.wpbc_only_calendar .popover_calendar_hover').remove();return false;}
jQuery('#date_booking'+bk_type).val(date);if(typeof(bkDisableBookedTimeSlots)=='function'){bkDisableBookedTimeSlots(jQuery('#date_booking'+bk_type).val(),bk_type);}
if(typeof(selectDayPro)=='function'){selectDayPro(date,bk_type);}
jQuery(".booking_form_div").trigger("date_selected",[bk_type,date]);}
function hoverDay(value,date){if(typeof(wpbc_prepare_tooltip_content)=='function'){wpbc_prepare_tooltip_content(value,date,bk_type);}
if((location.href.indexOf('page=wpbc')==-1)||(location.href.indexOf('page=wpbc-new')>0)||(location.href.indexOf('page=wpbc-availability')>0)){if(typeof(hoverDayPro)=='function'){hoverDayPro(value,date,bk_type);}}
var is_calendar_booking_unselectable=jQuery('#calendar_booking_unselectable'+bk_type);var is_booking_form_also=jQuery('#booking_form_div'+bk_type);if((is_calendar_booking_unselectable.length==1)&&(is_booking_form_also.length!=1)){jQuery('#calendar_booking'+bk_type+' .datepick-days-cell-over').removeClass('datepick-days-cell-over');jQuery('.wpbc_only_calendar #calendar_booking'+bk_type+' .datepick-days-cell, '+'.wpbc_only_calendar #calendar_booking'+bk_type+' .datepick-days-cell a').css('cursor','default');return false;}}
function applyCSStoDays(date){var class_day=(date.getMonth()+1)+'-'+date.getDate()+'-'+date.getFullYear();var sql_class_day=date.getFullYear()
+'-'
+(((date.getMonth()+1)<10)?('0'+(date.getMonth()+1)):(date.getMonth()+1))
+'-'
+((date.getDate()<10)?('0'+date.getDate()):date.getDate());var additional_class=' wpbc_weekday_'+date.getDay()+'  ';additional_class+=wpbc__inline_booking_calendar__days_css__get_rate(class_day,bk_type);additional_class+=wpbc__inline_booking_calendar__days_css__get_season_names(class_day,bk_type);if(is_this_admin==false){var my_test_date=new Date(wpbc_today[0],(wpbc_today[1]-1),wpbc_today[2],0,0,0);if((days_between(date,my_test_date))<block_some_dates_from_today)
return[false,'cal4date-'+class_day+' date_user_unavailable'];if(typeof(wpbc_available_days_num_from_today)!=='undefined')
if(parseInt('0'+wpbc_available_days_num_from_today)>0)
if((days_between(date,my_test_date))>parseInt('0'+wpbc_available_days_num_from_today))
return[false,'cal4date-'+class_day+' date_user_unavailable'];}
if(typeof(is_this_day_available)=='function'){var is_day_available=is_this_day_available(date,bk_type);var season_filter='';if(is_day_available instanceof Array){season_filter=' season_filter_id_'+is_day_available[1];is_day_available=is_day_available[0];}
if(!is_day_available){return[false,'cal4date-'+class_day+' date_user_unavailable season_unavailable '+season_filter];}}
if(('undefined'!==typeof(wpbc_resource_availability))&&('undefined'!==typeof(wpbc_resource_availability[bk_type]))&&(wpdev_in_array(wpbc_resource_availability[bk_type],sql_class_day))){return[false,'cal4date-'+class_day+' date_user_unavailable resource_unavailable '];}
var blank_admin_class_day='';if(typeof(date_admin_blank[bk_type])!=='undefined')
if(typeof(date_admin_blank[bk_type][class_day])!=='undefined'){blank_admin_class_day=' date_admin_blank ';}
var reserved_days_count=1;if(typeof(availability_per_day)!=='undefined')
if(typeof(availability_per_day[bk_type])!=='undefined')
if(typeof(availability_per_day[bk_type][class_day])!=='undefined'){reserved_days_count=parseInt(availability_per_day[bk_type][class_day]);}
var checkin_days_count=[0,0];if(typeof(wpbc_check_in_dates)!=='undefined')
if(typeof(wpbc_check_in_dates[bk_type])!=='undefined')
if(typeof(wpbc_check_in_dates[bk_type][class_day])!=='undefined'){checkin_days_count=[wpbc_check_in_dates[bk_type][class_day][0],wpbc_check_in_dates[bk_type][class_day][1]];}
var checkout_days_count=[0,0];if(typeof(wpbc_check_out_dates)!=='undefined')
if(typeof(wpbc_check_out_dates[bk_type])!=='undefined')
if(typeof(wpbc_check_out_dates[bk_type][class_day])!=='undefined'){checkout_days_count=[wpbc_check_out_dates[bk_type][class_day][0],wpbc_check_out_dates[bk_type][class_day][1]];}
var both_check_in_out_num=0;if(typeof(getNumberClosedCheckInOutDays)=='function'){both_check_in_out_num=getNumberClosedCheckInOutDays(bk_type,class_day);}
if(wpdev_in_array(parent_booking_resources,bk_type))
if(reserved_days_count<=0){if(typeof(date2approve[bk_type])!=='undefined')
if(typeof(date2approve[bk_type][class_day])!=='undefined')
return[false,'cal4date-'+class_day+' full_day_booking date2approve date_unavailable_for_all_childs '+blank_admin_class_day];return[false,'cal4date-'+class_day+' full_day_booking date_approved date_unavailable_for_all_childs '+blank_admin_class_day];}
var th=0;var tm=0;var ts=0;var time_return_value=false;var is_set_pending_days_selectable=wpbc_settings.get_option('pending_days_selectable');if(typeof(date2approve[bk_type])!=='undefined')
if(typeof(date2approve[bk_type][class_day])!=='undefined'){for(var ia=0;ia<date2approve[bk_type][class_day].length;ia++){th=date2approve[bk_type][class_day][ia][3];tm=date2approve[bk_type][class_day][ia][4];ts=date2approve[bk_type][class_day][ia][5];if((th==0)&&(tm==0)&&(ts==0)){return[is_set_pending_days_selectable,'cal4date-'+class_day+' full_day_booking date2approve'+blank_admin_class_day];}else{if(is_booking_used_check_in_out_time===true){if(ts=='1')additional_class+=' check_in_time'+' check_in_time_date2approve';if(ts=='2')additional_class+=' check_out_time'+' check_out_time_date2approve';}else{additional_class+=' times_clock';}
time_return_value=[true,'date_available cal4date-'+class_day+' date2approve timespartly'+additional_class];if(typeof(isDayFullByTime)=='function'){if(isDayFullByTime(bk_type,class_day)){return[is_set_pending_days_selectable,'cal4date-'+class_day+' full_day_booking date2approve'+blank_admin_class_day];}}}}}
if(typeof(date_approved[bk_type])!=='undefined')
if(typeof(date_approved[bk_type][class_day])!=='undefined'){for(var ia=0;ia<date_approved[bk_type][class_day].length;ia++){th=date_approved[bk_type][class_day][ia][3];tm=date_approved[bk_type][class_day][ia][4];ts=date_approved[bk_type][class_day][ia][5];if((th==0)&&(tm==0)&&(ts==0))
return[false,'cal4date-'+class_day+' full_day_booking date_approved'+blank_admin_class_day];else{if(is_booking_used_check_in_out_time===true){if(ts=='1')additional_class+=' check_in_time'+' check_in_time_date_approved';if(ts=='2')additional_class+=' check_out_time'+' check_out_time_date_approved';}else{additional_class+=' times_clock';}
time_return_value=[true,'date_available cal4date-'+class_day+' date_approved timespartly'+additional_class];if(typeof(isDayFullByTime)=='function'){if(isDayFullByTime(bk_type,class_day))return[false,'cal4date-'+class_day+' full_day_booking date_approved'+blank_admin_class_day];}}}}
for(var i=0;i<user_unavilable_days.length;i++){if(date.getDay()==user_unavilable_days[i])return[false,'cal4date-'+class_day+' date_user_unavailable'];}
var is_datepick_unselectable='';var is_exist_check_in_out_for_parent_resource=Math.max(checkin_days_count[0],checkout_days_count[0]);if(!wpdev_in_array(parent_booking_resources,bk_type)){is_exist_check_in_out_for_parent_resource=0;}
if((time_return_value!==false)&&(is_exist_check_in_out_for_parent_resource==0)){if(is_booking_used_check_in_out_time===true){if((additional_class.indexOf('check_in_time')!=-1)&&(additional_class.indexOf('check_out_time')!=-1)){time_return_value[0]=false;time_return_value[1]=time_return_value[1].replace("date_available","");}}
if((wpdev_in_array(parent_booking_resources,bk_type))&&((reserved_days_count-both_check_in_out_num)<=0)){time_return_value[0]=false;time_return_value[1]=time_return_value[1].replace("check_in_time","");time_return_value[1]=time_return_value[1].replace("check_out_time","");time_return_value[1]=time_return_value[1].replace("timespartly","");time_return_value[1]=time_return_value[1].replace("date_available","");}
return time_return_value;}else{if((is_booking_used_check_in_out_time===true)&&((is_exist_check_in_out_for_parent_resource>0)||((reserved_days_count-both_check_in_out_num)<=0))){if((reserved_days_count-both_check_in_out_num)<=0){if(checkin_days_count[1]==1)additional_class=' full_day_booking date_approved';else additional_class=' full_day_booking date2approve';return[false,'cal4date-'+class_day+additional_class+blank_admin_class_day];}
if((reserved_days_count-both_check_in_out_num-checkin_days_count[0])<=0){if(checkin_days_count[1]==1)additional_class+=' date_approved check_in_time_date_approved';else additional_class+=' date2approve check_in_time_date2approve';additional_class+=' timespartly check_in_time';}
if((reserved_days_count-both_check_in_out_num-checkout_days_count[0])<=0){if(checkout_days_count[1]==1)additional_class+=' date_approved check_out_time_date_approved';else additional_class+=' date2approve check_out_time_date2approve';additional_class+=' timespartly check_out_time';}}
return[true,'date_available cal4date-'+class_day+' reserved_days_count'+reserved_days_count+' '+is_datepick_unselectable+additional_class+' '];}}
function changeMonthYear(year,month){if(typeof(prepare_highlight)=='function'){setTimeout("prepare_highlight();",1000);}}
jQuery('#calendar_booking'+bk_type).text('');jQuery('#calendar_booking'+bk_type).datepick({beforeShowDay:applyCSStoDays,onSelect:selectDay,onHover:hoverDay,onChangeMonthYear:changeMonthYear,showOn:'both',multiSelect:bkMultiDaysSelect,numberOfMonths:my_num_month,stepMonths:1,prevText:'&laquo;',nextText:'&raquo;',dateFormat:'dd.mm.yy',changeMonth:false,changeYear:false,minDate:bkMinDate,maxDate:bkMaxDate,showStatus:false,multiSeparator:', ',closeAtTop:false,firstDay:start_day_of_week,gotoCurrent:false,hideIfNoPrevNext:true,rangeSelect:isRangeSelect,useThemeRoller:false});setTimeout(function(){jQuery('.datepick-days-cell.datepick-today.datepick-days-cell-over').removeClass('datepick-days-cell-over');},500);if(start_bk_month!=false){var inst=jQuery.datepick._getInst(document.getElementById('calendar_booking'+bk_type));inst.cursorDate=new Date();inst.cursorDate.setFullYear(start_bk_month[0],(start_bk_month[1]-1),1);inst.cursorDate.setMonth(parseInt(start_bk_month[1]-1));inst.cursorDate.setDate(1);inst.drawMonth=inst.cursorDate.getMonth();inst.drawYear=inst.cursorDate.getFullYear();jQuery.datepick._notifyChange(inst);jQuery.datepick._adjustInstDate(inst);jQuery.datepick._showDate(inst);jQuery.datepick._updateDatepick(inst);}}
function get_first_day_of_selection(dates){if(dates.indexOf(',')!=-1){var dates_array=dates.split(/,\s*/);var length=dates_array.length;var element=null;var new_dates_array=[];for(var i=0;i<length;i++){element=dates_array[i].split(/\./);new_dates_array[new_dates_array.length]=element[2]+'.'+element[1]+'.'+element[0];}
new_dates_array.sort();element=new_dates_array[0].split(/\./);return element[2]+'.'+element[1]+'.'+element[0];}
if(dates.indexOf(' - ')!=-1){var start_end_date=dates.split(" - ");return start_end_date[0];}
return dates;}
function get_last_day_of_selection(dates){if(dates.indexOf(',')!=-1){var dates_array=dates.split(/,\s*/);var length=dates_array.length;var element=null;var new_dates_array=[];for(var i=0;i<length;i++){element=dates_array[i].split(/\./);new_dates_array[new_dates_array.length]=element[2]+'.'+element[1]+'.'+element[0];}
new_dates_array.sort();element=new_dates_array[(new_dates_array.length-1)].split(/\./);return element[2]+'.'+element[1]+'.'+element[0];}
if(dates.indexOf(' - ')!=-1){var start_end_date=dates.split(" - ");return start_end_date[(start_end_date.length-1)];}
return dates;}
function setUnavailableSelectedDays(bk_type){var sel_dates=jQuery('#calendar_booking'+bk_type).datepick('getDate');var class_day2;for(var i=0;i<sel_dates.length;i++){class_day2=(sel_dates[i].getMonth()+1)+'-'+sel_dates[i].getDate()+'-'+sel_dates[i].getFullYear();date_approved[bk_type][class_day2]=[(sel_dates[i].getMonth()+1),sel_dates[i].getDate(),sel_dates[i].getFullYear(),0,0,0];jQuery('#calendar_booking'+bk_type+' td.cal4date-'+class_day2).html(sel_dates[i].getDate());}}
function setReservedSelectedDates(bk_type){var is_pay_now=false;if(document.getElementById('calendar_booking'+bk_type)===null){jQuery('#submiting'+bk_type).html('');jQuery('#booking_form_div'+bk_type).hide();if(jQuery('#ajax_respond_insert'+bk_type).offset().top>0){}else{makeScroll('#submiting'+bk_type);}
if((document.getElementById('gateway_payment_forms'+bk_type)!=null)&&(document.getElementById('gateway_payment_forms'+bk_type).innerHTML!=''))
is_pay_now=true;if((!is_pay_now)||(is_booking_without_payment==true))
if(type_of_thank_you_message=='page'){timeoutID_of_thank_you_page=setTimeout(function(){location.href=thank_you_page_URL;},1000);}else{document.getElementById('submiting'+bk_type).innerHTML='<div class=\"submiting_content wpdev-help-message alert alert-warning alert-success\" >'+new_booking_title+'</div>';if(parseInt(new_booking_title_time)>0){jQuery('.submiting_content').fadeOut(new_booking_title_time);setTimeout(function(){location.reload(true);},parseInt(1000+new_booking_title_time));}}}else{setUnavailableSelectedDays(bk_type);document.getElementById('date_booking'+bk_type).value='';jQuery('#calendar_booking'+bk_type+', .block_hints').hide();if(location.href.indexOf('admin.php')==-1){jQuery('#calendar_booking'+bk_type).insertBefore("#booking_form_div"+bk_type);document.getElementById("booking_form_div"+bk_type).style.display="none";jQuery('#hided_booking_form'+bk_type).prevAll('select[name="active_booking_form"]').hide();jQuery('#hided_booking_form'+bk_type).prevAll('label[for="calendar_type"]').hide();if((document.getElementById('gateway_payment_forms'+bk_type)!=null)&&(document.getElementById('gateway_payment_forms'+bk_type).innerHTML!=''))
is_pay_now=true;if((!is_pay_now)||(is_booking_without_payment==true)){if(type_of_thank_you_message=='page'){timeoutID_of_thank_you_page=setTimeout(function(){location.href=thank_you_page_URL;},1000);}else{document.getElementById('submiting'+bk_type).innerHTML='<div class=\"submiting_content wpdev-help-message alert alert-warning alert-success\" >'+new_booking_title+'</div>';if(!jQuery('#submiting'+bk_type).is(':visible')){jQuery('#submiting'+bk_type).closest('form.booking_form').before(jQuery('#submiting'+bk_type));jQuery('#submiting'+bk_type).show();jQuery(".wpbc_submit_spinner").hide();}
makeScroll('#submiting'+bk_type);if(parseInt(new_booking_title_time)>0){jQuery('.submiting_content').fadeOut(new_booking_title_time);setTimeout(function(){location.reload(true);},parseInt(1000+new_booking_title_time));}}}}else{setTimeout(function(){location.reload(true);},1000);}}}
function wpbc_get_arr_of_selected_additional_calendars(bk_type){var selected_additionl_calendars=[];if(document.getElementById('additional_calendars'+bk_type)!=null){var id_additional_str=document.getElementById('additional_calendars'+bk_type).value;var id_additional_arr=id_additional_str.split(',');var is_all_additional_days_unselected=true;for(var ia=0;ia<id_additional_arr.length;ia++){if(document.getElementById('date_booking'+id_additional_arr[ia]).value!=''){selected_additionl_calendars.push(id_additional_arr[ia]);}}}
return selected_additionl_calendars;}
function mybooking_submit(submit_form,bk_type,wpdev_active_locale){var target_elm=jQuery(".booking_form_div").trigger("booking_form_submit_click",[bk_type,submit_form,wpdev_active_locale]);if((jQuery(target_elm).find('input[name="booking_form_show_summary"]').length>0)&&('pause_submit'===jQuery(target_elm).find('input[name="booking_form_show_summary"]').val()))
{return false;}
var is_error=wpbc_check_errors_in_booking_form(bk_type);if(is_error){return false;}
if(document.getElementById('date_booking'+bk_type).value==''){var arr_of_selected_additional_calendars=wpbc_get_arr_of_selected_additional_calendars(bk_type);if(arr_of_selected_additional_calendars.length==0){showMessageUnderElement('#date_booking'+bk_type,message_verif_selectdts,'');makeScroll('#calendar_booking'+bk_type);return;}}
var count=submit_form.elements.length;var formdata='';var inp_value;var element;var el_type;for(var i=0;i<count;i++){element=submit_form.elements[i];if(jQuery(element).closest('.booking_form_garbage').length){continue;}
if((element.type!=='button')&&(element.type!=='hidden')&&(element.name!==('date_booking'+bk_type))){if(element.type=='checkbox'){if(element.value==''){inp_value=element.checked;}else{if(element.checked)inp_value=element.value;else inp_value='';}}else if(element.type=='radio'){if(element.checked){inp_value=element.value;}else{if((element.className.indexOf('wpdev-validates-as-required')!==-1)&&(jQuery(element).is(':visible'))&&(!jQuery(':radio[name="'+element.name+'"]',submit_form).is(":checked"))){showErrorMessage(element,message_verif_requred_for_radio_box,false);return;}
continue;}}else{inp_value=element.value;}
if(element.type=='select-multiple'){inp_value=jQuery('[name="'+element.name+'"]').val();if((inp_value==null)||(inp_value.toString()==''))
inp_value='';}
if(jQuery(element).is(':visible')){if(element.name==('visitors'+bk_type)){if(typeof(is_max_visitors_selection_more_than_available)=='function'){if((wpbc_is_time_field_in_booking_form(bk_type,submit_form.elements))&&(!wpdev_in_array(parent_booking_resources,bk_type))){}else{if(is_max_visitors_selection_more_than_available(bk_type,inp_value,element)){return;}}}}
if(element.className.indexOf('wpdev-validates-as-required')!==-1){if((element.type=='checkbox')&&(element.checked===false)){if(!jQuery(':checkbox[name="'+element.name+'"]',submit_form).is(":checked")){showErrorMessage(element,message_verif_requred_for_check_box,false);return;}}
if(element.type=='radio'){if(!jQuery(':radio[name="'+element.name+'"]',submit_form).is(":checked")){showErrorMessage(element,message_verif_requred_for_radio_box,false);return;}}
if((element.type!='checkbox')&&(element.type!='radio')&&(''===wpbc_trim(inp_value))){showErrorMessage(element,message_verif_requred,false);return;}}
if(element.className.indexOf('wpdev-validates-as-email')!==-1){inp_value=inp_value.replace(/^\s+|\s+$/gm,'');var reg=/^([A-Za-z0-9_\-\.\+])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,})$/;if(inp_value!='')
if(reg.test(inp_value)==false){showErrorMessage(element,message_verif_emeil,false);return;}}
if((element.className.indexOf('wpdev-validates-as-email')!==-1)&&(element.className.indexOf('same_as_')!==-1)){var primary_email_name=element.className.match(/same_as_([^\s])+/gi);if(primary_email_name!=null){primary_email_name=primary_email_name[0].substr(8);if(jQuery('[name="'+primary_email_name+bk_type+'"]').length>0){if(jQuery('[name="'+primary_email_name+bk_type+'"]').val()!==inp_value){showErrorMessage(element,message_verif_same_emeil,false);return;}}}
continue;}}
if(element.name!==('captcha_input'+bk_type)){if(formdata!=='')formdata+='~';el_type=element.type;if(element.className.indexOf('wpdev-validates-as-email')!==-1)el_type='email';if(element.className.indexOf('wpdev-validates-as-coupon')!==-1)el_type='coupon';inp_value=inp_value+'';inp_value=inp_value.replace(new RegExp("\\^",'g'),'&#94;');inp_value=inp_value.replace(new RegExp("~",'g'),'&#126;');inp_value=inp_value.replace(/"/g,'&#34;');inp_value=inp_value.replace(/'/g,'&#39;');formdata+=el_type+'^'+element.name+'^'+inp_value;}}}
if(typeof(wpbc_is_this_time_selection_not_available)=='function'){if(document.getElementById('date_booking'+bk_type).value==''){if(document.getElementById('additional_calendars'+bk_type)!=null){var id_additional_str=document.getElementById('additional_calendars'+bk_type).value;var id_additional_arr=id_additional_str.split(',');var is_times_dates_ok=false;for(var ia=0;ia<id_additional_arr.length;ia++){if((document.getElementById('date_booking'+id_additional_arr[ia]).value!='')&&(!wpbc_is_this_time_selection_not_available(id_additional_arr[ia],submit_form.elements))){is_times_dates_ok=true;}}
if(!is_times_dates_ok)return;}}else{if(wpbc_is_this_time_selection_not_available(bk_type,submit_form.elements))
return;}}
if(bk_days_selection_mode=='dynamic'){var selected_dates_cal_id=[];if(document.getElementById('date_booking'+bk_type).value!=''){selected_dates_cal_id[selected_dates_cal_id.length]=bk_type;}
if(document.getElementById('additional_calendars'+bk_type)!=null){var id_additional_str=document.getElementById('additional_calendars'+bk_type).value;var id_additional_arr=id_additional_str.split(',');var is_all_additional_days_unselected=true;for(var ia=0;ia<id_additional_arr.length;ia++){if(document.getElementById('date_booking'+id_additional_arr[ia]).value!=''){selected_dates_cal_id[selected_dates_cal_id.length]=id_additional_arr[ia];}}}
for(var ci=0;ci<selected_dates_cal_id.length;ci++){var abk_type=selected_dates_cal_id[selected_dates_cal_id.length]
if(document.getElementById('calendar_booking'+abk_type)!=null){var inst=jQuery.datepick._getInst(document.getElementById('calendar_booking'+abk_type));if(bk_2clicks_mode_days_min!=undefined){if(typeof(check_conditions_for_range_days_selection_for_check_in)=='function'){var first_date=get_first_day_of_selection(document.getElementById('date_booking'+abk_type).value);var date_sections=first_date.split(".");var selceted_first_day=new Date;selceted_first_day.setFullYear(parseInt(date_sections[2]-0),parseInt(date_sections[1]-1),parseInt(date_sections[0]-0));check_conditions_for_range_days_selection_for_check_in(selceted_first_day,abk_type);}
if(inst.dates.length<bk_2clicks_mode_days_min){showMessageUnderElement('#date_booking'+abk_type,message_verif_selectdts,'');makeScroll('#calendar_booking'+abk_type);return;}}}}}
var captcha=document.getElementById('wpdev_captcha_challenge_'+bk_type);jQuery('#booking_form_div'+bk_type+' input[type="button"]').prop("disabled",true);jQuery('#booking_form_div'+bk_type+' button').prop("disabled",true);if(captcha!=null)form_submit_send(bk_type,formdata,captcha.value,document.getElementById('captcha_input'+bk_type).value,wpdev_active_locale);else form_submit_send(bk_type,formdata,'','',wpdev_active_locale);return;}
function form_submit_send(bk_type,formdata,captcha_chalange,user_captcha,wpdev_active_locale){document.getElementById('submiting'+bk_type).innerHTML='<div style="height:20px;width:100%;text-align:center;margin:15px auto;"><img style="vertical-align:middle;box-shadow:none;width:14px;" src="'+wpdev_bk_plugin_url+'/assets/img/ajax-loader.gif"><//div>';var my_booking_form='';var my_booking_hash='';if(document.getElementById('booking_form_type'+bk_type)!=undefined)
my_booking_form=document.getElementById('booking_form_type'+bk_type).value;if(wpdev_bk_edit_id_hash!='')my_booking_hash=wpdev_bk_edit_id_hash;var is_send_emeils=1;if(jQuery('#is_send_email_for_pending').length){is_send_emeils=jQuery('#is_send_email_for_pending').is(':checked');if(false===is_send_emeils){is_send_emeils=0;}
else{is_send_emeils=1;}}
if(document.getElementById('date_booking'+bk_type).value!='')
send_ajax_submit(bk_type,formdata,captcha_chalange,user_captcha,is_send_emeils,my_booking_hash,my_booking_form,wpdev_active_locale);else{jQuery('#booking_form_div'+bk_type).hide();jQuery('#submiting'+bk_type).hide();}
var formdata_additional_arr;var formdata_additional;var my_form_field;var id_additional;var id_additional_str;var id_additional_arr;if(document.getElementById('additional_calendars'+bk_type)!=null){id_additional_str=document.getElementById('additional_calendars'+bk_type).value;id_additional_arr=id_additional_str.split(',');if(!jQuery('#booking_form_div'+bk_type).is(':visible')){jQuery('#booking_form_div'+bk_type).after('<div class="wpbc_submit_spinner" style="height:20px;width:100%;text-align:center;margin:15px auto;"><img style="vertical-align:middle;box-shadow:none;width:14px;" src="'+wpdev_bk_plugin_url+'/assets/img/ajax-loader.gif"></div>');}
for(var ia=0;ia<id_additional_arr.length;ia++){formdata_additional_arr=formdata;formdata_additional='';id_additional=id_additional_arr[ia];formdata_additional_arr=formdata_additional_arr.split('~');for(var j=0;j<formdata_additional_arr.length;j++){my_form_field=formdata_additional_arr[j].split('^');if(formdata_additional!=='')formdata_additional+='~';if(my_form_field[1].substr((my_form_field[1].length-2),2)=='[]')
my_form_field[1]=my_form_field[1].substr(0,(my_form_field[1].length-(''+bk_type).length)-2)+id_additional+'[]';else
my_form_field[1]=my_form_field[1].substr(0,(my_form_field[1].length-(''+bk_type).length))+id_additional;formdata_additional+=my_form_field[0]+'^'+my_form_field[1]+'^'+my_form_field[2];}
if(jQuery('#gateway_payment_forms'+bk_type).length>0){jQuery('#gateway_payment_forms'+bk_type).after('<div id="gateway_payment_forms'+id_additional+'"></div>');jQuery('#gateway_payment_forms'+bk_type).after('<div id="ajax_respond_insert'+id_additional+'" style="display:none;"></div>');}
send_ajax_submit(id_additional,formdata_additional,captcha_chalange,user_captcha,is_send_emeils,my_booking_hash,my_booking_form,wpdev_active_locale);}}}
function send_ajax_submit(bk_type,formdata,captcha_chalange,user_captcha,is_send_emeils,my_booking_hash,my_booking_form,wpdev_active_locale){var my_bk_res=bk_type;if(document.getElementById('bk_type'+bk_type)!=null)my_bk_res=document.getElementById('bk_type'+bk_type).value;jQuery.ajax({url:wpbc_ajaxurl,type:'POST',success:function(data,textStatus){if(textStatus=='success')jQuery('#ajax_respond_insert'+bk_type).html(data);},error:function(XMLHttpRequest,textStatus,errorThrown){window.status='Ajax sending Error status:'+textStatus;alert(XMLHttpRequest.status+' '+XMLHttpRequest.statusText);if(XMLHttpRequest.status==500){alert('Please check at this page according this error:'+' https://wpbookingcalendar.com/faq/#ajax-sending-error');}},data:{action:'INSERT_INTO_TABLE',bktype:my_bk_res,dates:document.getElementById('date_booking'+bk_type).value,form:formdata,captcha_chalange:captcha_chalange,captcha_user_input:user_captcha,is_send_emeils:is_send_emeils,my_booking_hash:my_booking_hash,booking_form_type:my_booking_form,wpdev_active_locale:wpdev_active_locale,wpbc_nonce:document.getElementById('wpbc_nonce'+bk_type).value}});}
function showErrorMessage(element,errorMessage,isScrollStop){if(!isScrollStop){makeScroll(element);}
if(jQuery("[name='"+element.name+"']").is(':visible')){jQuery("[name='"+element.name+"']").fadeOut(350).fadeIn(300).fadeOut(350).fadeIn(400).fadeOut(350).fadeIn(300).fadeOut(350).fadeIn(400).animate({opacity:1},4000);}
if(jQuery("[name='"+element.name+"']").attr('type')=="radio"){if((!jQuery("[name='"+element.name+"']").parent().parent().parent().next().hasClass('alert-warning'))||((jQuery("[name='"+element.name+"']").parent().parent().parent().next().hasClass('alert-warning'))&&(!jQuery("[name='"+element.name+"']").parent().parent().parent().next().is(':visible')))){jQuery("[name='"+element.name+"']").parent().parent().parent().after('<span class="wpdev-help-message alert alert-warning">'+errorMessage+'</span>');}}else if(jQuery("[name='"+element.name+"']").attr('type')=="checkbox"){if((!jQuery("[name='"+element.name+"']").parent().next().hasClass('alert-warning'))||((jQuery("[name='"+element.name+"']").parent().next().hasClass('alert-warning'))&&(!jQuery("[name='"+element.name+"']").parent().next().is(':visible')))){jQuery("[name='"+element.name+"']").parent().after('<span class="wpdev-help-message alert alert-warning">'+errorMessage+'</span>');}}else{if((!jQuery("[name='"+element.name+"']").next().hasClass('alert-warning'))||((jQuery("[name='"+element.name+"']").next().hasClass('alert-warning'))&&(!jQuery("[name='"+element.name+"']").next().is(':visible')))){jQuery("[name='"+element.name+"']").after('<span class="wpdev-help-message alert alert-warning">'+errorMessage+'</span>');}}
jQuery('.wpdev-help-message').css({'margin':'2px 2px 2px 10px','vertical-align':'top'});jQuery('.wpdev-element-message').css({'margin':'10px 5px 10px 0px','line-height':'32px'});if(element.type=='checkbox')
jQuery(".wpdev-help-message").css({'vertical-align':'middle'});jQuery(".widget_wpdev_booking .booking_form .wpdev-help-message").css({'vertical-align':'sub'});jQuery(".wpdev-help-message").animate({opacity:1},10000).fadeOut(2000);if(!jQuery("[name='"+element.name+"']").is(':visible')){makeScroll(jQuery(".wpdev-help-message"));}
jQuery(element).trigger('focus');return element;}
function showMessageUnderElement(element,errorMessage,message_type){makeScroll(element);if(jQuery(element).attr('type')=="radio"){if((!jQuery(element).parent().parent().parent().next().hasClass('alert-warning'))||((jQuery(element).parent().parent().parent().next().hasClass('alert-warning'))&&(!jQuery(element).parent().parent().parent().next().is(':visible')))){jQuery(element).parent().parent().parent().after('<span class="wpdev-help-message wpdev-element-message alert alert-warning '+message_type+'">'+errorMessage+'</span>');}}else if(jQuery(element).attr('type')=="checkbox"){if((!jQuery(element).parent().next().hasClass('alert-warning'))||((jQuery(element).parent().next().hasClass('alert-warning'))&&(!jQuery(element).parent().next().is(':visible')))){jQuery(element).parent().after('<span class="wpdev-help-message wpdev-element-message alert alert-warning '+message_type+'">'+errorMessage+'</span>');}}else{if((!jQuery(element).next().hasClass('alert-warning'))||((jQuery(element).next().hasClass('alert-warning'))&&(!jQuery(element).next().is(':visible')))){jQuery(element).after('<span class="wpdev-help-message wpdev-element-message alert alert-warning '+message_type+'">'+errorMessage+'</span>');}}
jQuery(".widget_wpdev_booking .booking_form .wpdev-help-message").css({'vertical-align':'sub'});jQuery(".wpdev-help-message").animate({opacity:1},10000).fadeOut(2000);}
jQuery(document).ready(function(){jQuery('div.inside_hint').on('click',function(){jQuery(this).css('visibility','hidden').siblings('.has-inside-hint').trigger('focus');});jQuery('input.has-inside-hint').on('blur',function(){if(this.value=='')
jQuery(this).siblings('.inside_hint').css('visibility','');}).on('focus',function(){jQuery(this).siblings('.inside_hint').css('visibility','hidden');});jQuery('.booking_form_div input[type=button]').prop("disabled",false);});function makeScroll(object_name){var targetOffset=jQuery(object_name).offset().top;if(targetOffset<=0){if(0!=jQuery(object_name).nextAll(':visible').length){targetOffset=jQuery(object_name).nextAll(':visible').first().offset().top;}else if(0!=jQuery(object_name).parent().nextAll(':visible').length){targetOffset=jQuery(object_name).parent().nextAll(':visible').first().offset().top;}}
if(jQuery('#wpadminbar').length>0){targetOffset=targetOffset-50;}else{targetOffset=targetOffset-20;}
jQuery('html,body').animate({scrollTop:targetOffset},500);}
function wpbc_trim(string_to_trim){if(Array.isArray(string_to_trim)){string_to_trim=string_to_trim.join(',');}
if('string'==typeof(string_to_trim)){string_to_trim=string_to_trim.trim();}
return string_to_trim;}
function wpdev_in_array(array_here,p_val){for(var i=0,l=array_here.length;i<l;i++){if(array_here[i]==p_val){return true;}}
return false;}
function days_between(date1,date2){var ONE_DAY=1000*60*60*24;var date1_ms=date1.getTime();var date2_ms=date2.getTime();var difference_ms=date1_ms-date2_ms;return Math.round(difference_ms/ONE_DAY);}
function daysInMonth(month,year){var m=[31,28,31,30,31,30,31,31,30,31,30,31];if(month!=2)return m[month-1];if(year%4!=0)return m[1];if(year%100==0&&year%400!=0)return m[1];return m[1]+1;}
function wpbc_timeline_nav(timeline_obj,nav_step){jQuery(".wpbc_timeline_front_end").trigger("timeline_nav",[timeline_obj,nav_step]);jQuery('#'+timeline_obj.html_client_id+' .wpbc_tl_prev,#'+timeline_obj.html_client_id+' .wpbc_tl_next').remove();jQuery('#'+timeline_obj.html_client_id+' .wpbc_tl_title').html('<span class="glyphicon glyphicon-refresh wpbc_spin"></span> &nbsp Loading...');jQuery.ajax({url:wpbc_ajaxurl,type:'POST',success:function(data,textStatus){if(textStatus=='success'){jQuery('#'+timeline_obj.html_client_id+' .wpbc_timeline_ajax_replace').html(data);return true;}},error:function(XMLHttpRequest,textStatus,errorThrown){window.status='Ajax Error! Status: '+textStatus;alert('Ajax Error! Status: '+XMLHttpRequest.status+' '+XMLHttpRequest.statusText);},data:{action:'WPBC_TIMELINE_NAV',timeline_obj:timeline_obj,nav_step:nav_step,wpdev_active_locale:wpbc_active_locale,wpbc_nonce:document.getElementById('wpbc_nonce_'+timeline_obj.html_client_id).value}});}
function wpbc_unselect_all_days(bk_type){var is_calendar_exist=jQuery('#calendar_booking'+bk_type);if(is_calendar_exist.length>0){var inst=jQuery.datepick._getInst(document.getElementById('calendar_booking'+bk_type));jQuery('#date_booking'+bk_type).val('');inst.stayOpen=false;inst.dates=[];jQuery.datepick._updateDatepick(inst);}}
function wpbc_check_errors_in_booking_form(bk_type){var is_error_in_field=false;var my_form=jQuery('#booking_form'+bk_type);if(my_form.length){var fields_with_errors_arr=[];my_form.find(':input').each(function(index,el){var skip_elements=['hidden','button'];if(-1==skip_elements.indexOf(jQuery(el).attr('type'))){if(('date_booking'+bk_type)==jQuery(el).attr('name')){if(((jQuery('#calendar_booking'+bk_type).is(':visible'))&&(''==jQuery(el).val()))&&(wpbc_get_arr_of_selected_additional_calendars(bk_type).length==0)){showMessageUnderElement('#date_booking'+bk_type,message_verif_selectdts,'');makeScroll('#calendar_booking'+bk_type);is_error_in_field=true;}}
if(jQuery(el).is(':visible')){if(jQuery(el).hasClass('wpdev-validates-as-required')){if('checkbox'==jQuery(el).attr('type')){if((!jQuery(el).is(':checked'))&&(!jQuery(':checkbox[name="'+el.name+'"]',my_form).is(":checked"))){showErrorMessage(el,message_verif_requred_for_check_box,is_error_in_field);fields_with_errors_arr.push(el);is_error_in_field=true;}}else if('radio'==jQuery(el).attr('type')){if(!jQuery(':radio[name="'+jQuery(el).attr('name')+'"]',my_form).is(':checked')){showErrorMessage(el,message_verif_requred_for_radio_box,is_error_in_field);fields_with_errors_arr.push(el);is_error_in_field=true;}}else{var inp_value=jQuery(el).val();if(''===wpbc_trim(inp_value)){showErrorMessage(el,message_verif_requred,is_error_in_field);fields_with_errors_arr.push(el);is_error_in_field=true;}}}
if(jQuery(el).hasClass('wpdev-validates-as-email')){var inp_value=jQuery(el).val();inp_value=inp_value.replace(/^\s+|\s+$/gm,'');var reg=/^([A-Za-z0-9_\-\.\+])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,})$/;if((inp_value!='')&&(reg.test(inp_value)==false)){showErrorMessage(el,message_verif_emeil,is_error_in_field);fields_with_errors_arr.push(el);is_error_in_field=true;}}
var classList=jQuery(el).attr('class');if(classList){classList=classList.split(/\s+/);jQuery.each(classList,function(cl_index,cl_item){if('validate_as_date'===cl_item){var regex=new RegExp('^[0-3]?\\d{1}[\\/\\.\\-]+[0-3]?\\d{1}[\\/\\.\\-]+[0-2]+\\d{3}$');var message_verif_phone='This field must be valid date like this '+'09/25/2018';var inp_value=jQuery(el).val();if((inp_value!='')&&(regex.test(inp_value)==false)){showErrorMessage(el,message_verif_phone,is_error_in_field);fields_with_errors_arr.push(el);is_error_in_field=true;}}
if('validate_as_digit'===cl_item){var regex=new RegExp('^[0-9]+\\.?[0-9]*$');var message_verif_phone='This field must contain only digits';var inp_value=jQuery(el).val();if((inp_value!='')&&(regex.test(inp_value)==false)){showErrorMessage(el,message_verif_phone,is_error_in_field);fields_with_errors_arr.push(el);is_error_in_field=true;}}
var is_validate_digit=cl_item.substring(0,15);if('validate_digit_'===is_validate_digit){var digits_to_check=parseInt(cl_item.substring(15));if(!isNaN(digits_to_check)){var regex=new RegExp('^\\d{'+digits_to_check+'}$');var message_verif_phone='This field must contain '+digits_to_check+' digits';var inp_value=jQuery(el).val();if((inp_value!='')&&(regex.test(inp_value)==false)){showErrorMessage(el,message_verif_phone,is_error_in_field);fields_with_errors_arr.push(el);is_error_in_field=true;}}}});}}}});if(fields_with_errors_arr.length>0){jQuery(fields_with_errors_arr[0]).trigger('focus');}}
return is_error_in_field;}
function bk_calendar_step_click(el){var br_id=jQuery(el).closest('form').find('input[name^="bk_type"]').val();var is_error=wpbc_check_errors_in_booking_form(br_id);if(is_error){return false;}
if(br_id!=undefined){jQuery("#booking_form"+br_id+" .bk_calendar_step").css({"display":"none"});jQuery("#booking_form"+br_id+" .bk_form_step").css({"display":"block"});}else{jQuery(".bk_calendar_step").css({"display":"none"});jQuery(".bk_form_step").css({"display":"block"});}}
function bk_form_step_click(el){var br_id=jQuery(el).closest('form').find('input[name^="bk_type"]').val();var is_error=false;if(is_error){return false;}
if(br_id!=undefined){jQuery("#booking_form"+br_id+" .bk_calendar_step").css({"display":"block"});jQuery("#booking_form"+br_id+" .bk_form_step").css({"display":"none"});makeScroll("#bklnk"+br_id);}else{jQuery(".bk_calendar_step").css({"display":"block"});jQuery(".bk_form_step").css({"display":"none"});}}
function wpbc_wizard_step(el,step_num,step_from){var br_id=jQuery(el).closest('form').find('input[name^="bk_type"]').val();if((undefined==step_from)||(step_num>step_from)){if(1!=step_num){var is_error=wpbc_check_errors_in_booking_form(br_id);if(is_error){return false;}}}
if(wpbc_is_some_elements_visible(br_id,['rangetime','durationtime','starttime','endtime'])){if(wpbc_is_this_time_selection_not_available(br_id,document.getElementById('booking_form'+br_id))){return false;}}
if(br_id!=undefined){jQuery("#booking_form"+br_id+" .wpbc_wizard_step").css({"display":"none"});jQuery("#booking_form"+br_id+" .wpbc_wizard_step"+step_num).css({"display":"block"});}}
function wpbc_is_some_elements_visible(bk_type,elements_names){var is_some_elements_visible=false;var my_form=jQuery('#booking_form'+bk_type);if(my_form.length){my_form.find(':input').each(function(index,el){var skip_elements=['hidden','button'];if(-1==skip_elements.indexOf(jQuery(el).attr('type'))){for(var ei=0;ei<(elements_names.length-1);ei++){if((elements_names[ei]+bk_type)==jQuery(el).attr('name')){if(jQuery(el).is(':visible')){is_some_elements_visible=true;}}}}});}
return is_some_elements_visible;}
function wpbc_select_days_in_calendar(resource_id,selected_dates){clearTimeout(timeout_DSwindow);var inst=jQuery.datepick._getInst(document.getElementById('calendar_booking'+resource_id));inst.dates=[];var original_array=[];var date;var bk_inputing=document.getElementById('date_booking'+resource_id);var bk_distinct_dates=[];if(0){var last_selected_date=new Date();last_selected_date.setFullYear(parseInt(selected_dates[selected_dates.length-1][0]));last_selected_date.setMonth(parseInt(selected_dates[selected_dates.length-1][1]-1));last_selected_date.setDate(parseInt(selected_dates[selected_dates.length-1][2]));last_selected_date.setHours(0);last_selected_date.setMinutes(0);last_selected_date.setSeconds(0);var last_selected_next_date=new Date(last_selected_date.getTime()+1000*60*60*24);selected_dates.push(new Array(last_selected_next_date.getFullYear(),(last_selected_next_date.getMonth()+1),last_selected_next_date.getDate()));}
for(var i=0;i<selected_dates.length;i++){var dta=selected_dates[i];date=new Date();date.setFullYear(dta[0],(dta[1]-1),dta[2]);original_array.push(jQuery.datepick._restrictMinMax(inst,jQuery.datepick._determineDate(inst,date,null)));dta[2]=parseInt(dta[2]);if(dta[2]<10){dta[2]='0'+dta[2];}
dta[1]=parseInt(dta[1]);if(dta[1]<10){dta[1]='0'+dta[1];}
if(!wpdev_in_array(bk_distinct_dates,dta[2]+'.'+dta[1]+'.'+dta[0]))
bk_distinct_dates.push(dta[2]+'.'+dta[1]+'.'+dta[0]);}
for(var j=0;j<original_array.length;j++){if(original_array[j]!=-1)inst.dates.push(original_array[j]);}
var dateStr=(inst.dates.length==0?'':jQuery.datepick._formatDate(inst,inst.dates[0]));for(i=1;i<inst.dates.length;i++)
dateStr+=jQuery.datepick._get(inst,'multiSeparator')+jQuery.datepick._formatDate(inst,inst.dates[i]);jQuery('#date_booking'+resource_id).val(dateStr);if(original_array.length>0){inst.cursorDate=original_array[0];inst.drawMonth=inst.cursorDate.getMonth();inst.drawYear=inst.cursorDate.getFullYear();}
jQuery.datepick._notifyChange(inst);jQuery.datepick._adjustInstDate(inst);jQuery.datepick._showDate(inst);jQuery.datepick._updateDatepick(inst);if(bk_inputing!=null)
bk_inputing.value=bk_distinct_dates.join(', ');if(typeof(check_condition_sections_in_bkform)=='function'){check_condition_sections_in_bkform(jQuery('#date_booking'+resource_id).val(),resource_id);}
if(typeof(bkDisableBookedTimeSlots)=='function'){bkDisableBookedTimeSlots(jQuery('#date_booking'+resource_id).val(),resource_id);}
if(typeof(showCostHintInsideBkForm)=='function'){showCostHintInsideBkForm(resource_id);}};
var time_buffer_value=0;var is_check_start_time_gone=false;var start_time_checking_index;function wpbc_show_date_info_top(param_calendar_id,my_thisDateTime){var resource_id=parseInt(param_calendar_id.replace("calendar_booking",""));var date_obj=new Date(my_thisDateTime);var td_class=(date_obj.getMonth()+1)+'-'+date_obj.getDate()+'-'+date_obj.getFullYear();var times_array=[];var times_array_approved=wpbc_get_times_from_dates_arr(date_approved,resource_id,td_class);for(var i=0;i<times_array_approved.length;i++){times_array[times_array.length]=times_array_approved[i];}
var times_array_pending=wpbc_get_times_from_dates_arr(date2approve,resource_id,td_class);for(i=0;i<times_array_pending.length;i++){times_array[times_array.length]=times_array_pending[i];}
if(('undefined'!==typeof(wpbc_ajx_bookings))&&('undefined'!==typeof(wpbc_ajx_bookings[resource_id]))&&('undefined'!==typeof(wpbc_ajx_bookings[resource_id][td_class]))){_.each(wpbc_ajx_bookings[resource_id][td_class],function(p_val,p_key,p_data){if(p_key!=='sec_0'){times_array[times_array.length]=p_val;}});}
if(times_array.length>0){var dot_content='';for(var i=0;i<(times_array.length/2);i++){dot_content+='&centerdot;';}
return'<div class="wpbc_time_dots">'+dot_content+'</div>';}else{return'';}}
function wpbc_show_date_info_bottom(param_calendar_id,my_thisDateTime){if(typeof(wpbc_show_day_cost_in_date_bottom)=='function'){return wpbc_show_day_cost_in_date_bottom(param_calendar_id,my_thisDateTime);}else{return'';}}
function wpbc_sort_times_array(times_array){var sort_time_arr=[];var sort_time_obj=[];var time_second=0
var is_it_endtime=0;for(var i=0;i<times_array.length;i++){if(times_array[i].length>2){time_second=parseInt(times_array[i][0])*3600+parseInt(times_array[i][1])*60+parseInt(times_array[i][2]);is_it_endtime=time_second%10;if(2===is_it_endtime){time_second=time_second-10;}else{time_second=time_second+10;}
sort_time_obj[sort_time_obj.length]={second:time_second,value:times_array[i]};}}
sort_time_obj.sort(function(a,b){return a.second-b.second;});for(var i=0;i<sort_time_obj.length;i++){sort_time_arr[sort_time_arr.length]=sort_time_obj[i].value;}
return sort_time_arr;}
function wpbc_prepare_tooltip_content(value,date_obj,resource_id){if(date_obj==null)return;var i=0;var h='';var m='';var s='';var td_class;var tooltip_time='';var times_array=[];td_class=(date_obj.getMonth()+1)+'-'+date_obj.getDate()+'-'+date_obj.getFullYear();var times_array_approved=wpbc_get_times_from_dates_arr(date_approved,resource_id,td_class);for(i=0;i<times_array_approved.length;i++){times_array[times_array.length]=times_array_approved[i];}
var times_array_pending=wpbc_get_times_from_dates_arr(date2approve,resource_id,td_class);for(i=0;i<times_array_pending.length;i++){times_array[times_array.length]=times_array_pending[i];}
if(times_array.length>0){times_array=wpbc_sort_times_array(times_array);}
for(i=0;i<times_array.length;i++){s=parseInt(times_array[i][2]);if(s==2){if(tooltip_time=='')tooltip_time='&nbsp;&nbsp;&nbsp;&nbsp;...&nbsp;&nbsp;&nbsp; - ';}
if((tooltip_time=='')&&(times_array[i][0]=='00')&&(times_array[i][1]=='00'))
tooltip_time='&nbsp;&nbsp;&nbsp;&nbsp;...&nbsp;&nbsp;&nbsp;';else if((i==(times_array.length-1))&&(times_array[i][0]=='23')&&(times_array[i][1]=='59'))
tooltip_time+=' &nbsp;&nbsp;&nbsp;&nbsp;... ';else{var hours_show=times_array[i][0];var hours_show_sufix='';if(is_am_pm_inside_time){if(hours_show>=12){hours_show=hours_show-12;if(hours_show==0)hours_show=12;hours_show_sufix=' pm';}else{hours_show_sufix=' am';}}
if(times_array[i][2]=='02'){times_array[i][1]=(times_array[i][1]*1)+time_buffer_value;if(times_array[i][1]>59){times_array[i][1]=times_array[i][1]-60;hours_show=(hours_show*1)+1;}
if(times_array[i][1]<10)times_array[i][1]='0'+times_array[i][1];}
tooltip_time+=hours_show+':'+times_array[i][1]+hours_show_sufix;}
if(s==1){tooltip_time+=' - ';if(i==(times_array.length-1))tooltip_time+=' &nbsp;&nbsp;&nbsp;&nbsp;... ';}
if(s==2){if(typeof(wpbc_get_additional_info_for_tooltip)=='function'){tooltip_time+=wpbc_get_additional_info_for_tooltip(resource_id,td_class,parseInt(times_array[i][0]*60)+parseInt(times_array[i][1]));}
tooltip_time+='<br/>';}}
if('WPBC_DISABLE_TIMES_TOOLTIP'==bk_highlight_timeslot_word){tooltip_time='';}else if(tooltip_time.indexOf("undefined")>-1){tooltip_time='';}else{if((tooltip_time!='')&&(bk_highlight_timeslot_word!='')){if(is_booking_used_check_in_out_time===true)
tooltip_time='';else
tooltip_time='<span class="wpbc_booked_times_word">'+bk_highlight_timeslot_word+' </span><br />'+tooltip_time;}}
if(typeof(getDayPrice4Show)=='function'){tooltip_time=getDayPrice4Show(resource_id,tooltip_time,td_class);}
if(typeof(getDayAvailability4Show)=='function'){tooltip_time=getDayAvailability4Show(resource_id,tooltip_time,td_class);}
jQuery('#calendar_booking'+resource_id+' td.cal4date-'+td_class).attr('data-content',tooltip_time);var td_el=jQuery('#calendar_booking'+resource_id+' td.cal4date-'+td_class).get(0);if((undefined==td_el._tippy)&&(''!=tooltip_time)){wpbc_tippy(td_el,{content(reference){var popover_content=reference.getAttribute('data-content');return'<div class="popover popover_tippy">'
+'<div class="popover-content">'
+popover_content
+'</div>'
+'</div>';},allowHTML:true,trigger:'mouseenter focus',interactive:!true,hideOnClick:true,interactiveBorder:10,maxWidth:550,theme:'wpbc-tippy-times',placement:'top',delay:[400,0],ignoreAttributes:true,touch:true,appendTo:()=>document.body,});}}
jQuery(window).on('scroll',function(event){if('function'===typeof(wpbc_tippy)){wpbc_tippy.hideAll();}});function wpbc_get_times_from_dates_arr(dates_arr,resource_id,td_class){var i;var h='';var m='';var s='';var times_array=[];if((typeof(dates_arr[resource_id])!=='undefined')&&(typeof(dates_arr[resource_id][td_class])!=='undefined')&&((dates_arr[resource_id][td_class][0][3]!=0)||(dates_arr[resource_id][td_class][0][4]!=0))){for(i=0;i<dates_arr[resource_id][td_class].length;i++){h=dates_arr[resource_id][td_class][i][3];if(h<10)h='0'+h;if(h==0)h='00';m=dates_arr[resource_id][td_class][i][4];if(m<10)m='0'+m;if(m==0)m='00';s=dates_arr[resource_id][td_class][i][5];if(s==2)s='02';if(s==1)s='01';if(s==0)s='00';times_array[times_array.length]=[h,m,s];}}
return times_array;}
function wpbc_is_time_field_in_booking_form(resource_id,form_elements){var count=form_elements.length;var start_time=false;var end_time=false;var duration=false;var element;for(var i=0;i<count;i++){element=form_elements[i];if(jQuery(element).closest('.booking_form_garbage').length){continue;}
if((element.name!=undefined)&&(element.name.indexOf('hint')!==-1)){var my_element=element.name;if(my_element.indexOf('rangetime')!==-1){return true;}
if((my_element.indexOf('durationtime')!==-1)){duration=element.value;}
if(my_element.indexOf('starttime')!==-1){start_time=element.value;}
if(my_element.indexOf('endtime')!==-1){end_time=element.value;}}}
if((duration!==false)&&(start_time!==false)){return true;}
if((start_time!==false)&&(end_time!==false)){return true;}
return false;}
function wpbc_is_this_time_selection_not_available(resource_id,form_elements){if(location.href.indexOf('page=wpbc-new')>0){return false;}
var count=form_elements.length;var start_time=false;var end_time=false;var duration=false;var element;var element_start=false;var element_end=false;var element_duration=false;var element_rangetime=false;for(var i=0;i<count;i++){element=form_elements[i];if(jQuery(element).closest('.booking_form_garbage').length){continue;}
if((element.name!=undefined)&&(element.name.indexOf('hint')===-1)){var my_element=element.name;if(my_element.indexOf('rangetime')!==-1){if(element.value==''){showErrorMessage(element,message_verif_requred,false);return true;}
var my_rangetime=element.value.split('-');if(my_rangetime.length>1){start_time=my_rangetime[0].replace(/(^\s+)|(\s+$)/g,"");end_time=my_rangetime[1].replace(/(^\s+)|(\s+$)/g,"");element_rangetime=element;}}
if((my_element.indexOf('durationtime')!==-1)){duration=element.value;element_duration=element;}
if(my_element.indexOf('starttime')!==-1){start_time=element.value;element_start=element;}
if(my_element.indexOf('endtime')!==-1){end_time=element.value;element_end=element;}}}
if((duration!==false)&&(start_time!==false)){var mylocalstarttime=start_time.split(':');var d=new Date(1980,1,1,mylocalstarttime[0],mylocalstarttime[1],0);var my_duration=duration.split(':');my_duration=my_duration[0]*60*60*1000+my_duration[1]*60*1000;d.setTime(d.getTime()+my_duration);var my_hours=d.getHours();if(my_hours<10)my_hours='0'+(my_hours+'');var my_minutes=d.getMinutes();if(my_minutes<10)my_minutes='0'+(my_minutes+'');end_time=(my_hours+'')+':'+(my_minutes+'');if(end_time=='00:00')end_time='23:59';}
if((start_time===false)||(end_time===false)){return false;}else{var valid_time=true;if((start_time=='')||(end_time==''))valid_time=false;if(!isValidTimeTextField(start_time))valid_time=false;if(!isValidTimeTextField(end_time))valid_time=false;if(valid_time===true)
if((typeof(checkRecurentTimeInside)=='function')&&(typeof(is_booking_recurrent_time)!=='undefined')&&(is_booking_recurrent_time==true)){valid_time=checkRecurentTimeInside([start_time,end_time],resource_id);}else{if(typeof(checkTimeInside)=='function'){valid_time=checkTimeInside(start_time,true,resource_id);}
if(valid_time===true){if(typeof(checkTimeInside)=='function'){valid_time=checkTimeInside(end_time,false,resource_id);}}}
if(valid_time!==true){if((is_booking_used_check_in_out_time)&&(element_start!==false)&&(element_end!==false)){showMessageUnderElement('#date_booking'+resource_id,message_checkinouttime_error,'');makeScroll('#calendar_booking'+resource_id);return true;}
if(element_rangetime!==false)showErrorTimeMessage(message_rangetime_error,element_rangetime);if(element_duration!==false)showErrorTimeMessage(message_durationtime_error,element_duration);if(element_start!==false)showErrorTimeMessage(message_starttime_error,element_start);if(element_end!==false)showErrorTimeMessage(message_endtime_error,element_end);return true;}else{return false;}}}
function isTimeTodayGone(myTime,sort_date_array){var date_to_check=sort_date_array[0];if(is_check_start_time_gone==false){date_to_check=sort_date_array[(sort_date_array.length-1)];}
if(parseInt(date_to_check[0])<parseInt(wpbc_today[0]))return true;if((parseInt(date_to_check[0])==parseInt(wpbc_today[0]))&&(parseInt(date_to_check[1])<parseInt(wpbc_today[1])))
return true;if((parseInt(date_to_check[0])==parseInt(wpbc_today[0]))&&(parseInt(date_to_check[1])==parseInt(wpbc_today[1]))&&(parseInt(date_to_check[2])<parseInt(wpbc_today[2])))
return true;if((parseInt(date_to_check[0])==parseInt(wpbc_today[0]))&&(parseInt(date_to_check[1])==parseInt(wpbc_today[1]))&&(parseInt(date_to_check[2])==parseInt(wpbc_today[2]))){var mytime_value=myTime.split(":");mytime_value=mytime_value[0]*60+parseInt(mytime_value[1]);var current_time_value=wpbc_today[3]*60+parseInt(wpbc_today[4]);if(current_time_value>mytime_value)return true;}
return false;}
function checkTimeInside(mytime,is_start_time,bk_type){var my_dates_str=document.getElementById('date_booking'+bk_type).value;return checkTimeInsideProcess(mytime,is_start_time,bk_type,my_dates_str);}
function checkRecurentTimeInside(my_rangetime,bk_type){var valid_time=true;var my_dates_str=document.getElementById('date_booking'+bk_type).value;var date_array=my_dates_str.split(", ");if(date_array.length==2){if(date_array[0]==date_array[1]){date_array=[date_array[0]];}}
var temp_date_str='';for(var i=0;i<date_array.length;i++){temp_date_str=date_array[i];if(checkTimeInsideProcess(my_rangetime[0],true,bk_type,temp_date_str)==false)valid_time=false;if(checkTimeInsideProcess(my_rangetime[1],false,bk_type,temp_date_str)==false)valid_time=false;}
return valid_time;}
function checkTimeInsideProcess(mytime,is_start_time,bk_type,my_dates_str){var i,h,s,m;var date_array=my_dates_str.split(", ");if(date_array.length==2){if(date_array[0]==date_array[1]){date_array=[date_array[0]];}}
var temp_elemnt;var td_class;var sort_date_array=[];var work_date_array=[];var times_array=[];var is_check_for_time;for(var i=0;i<date_array.length;i++){temp_elemnt=date_array[i].split(".");sort_date_array[i]=[temp_elemnt[2],temp_elemnt[1]+'',temp_elemnt[0]+''];}
sort_date_array.sort();for(i=0;i<sort_date_array.length;i++){sort_date_array[i]=[parseInt(sort_date_array[i][0]*1),parseInt(sort_date_array[i][1]*1),parseInt(sort_date_array[i][2]*1)];}
if(((is_check_start_time_gone)&&(is_start_time))||((!is_check_start_time_gone)&&(!is_start_time))){if(isTimeTodayGone(mytime,sort_date_array))return false;}
work_date_array=sort_date_array;for(var j=0;j<work_date_array.length;j++){td_class=work_date_array[j][1]+'-'+work_date_array[j][2]+'-'+work_date_array[j][0];if((j==0)||(j==(work_date_array.length-1)))is_check_for_time=true;else is_check_for_time=false;if(typeof(date2approve[bk_type])!=='undefined'){if((typeof(date2approve[bk_type][td_class])!=='undefined')){if(!is_check_for_time){return false;}
if((date2approve[bk_type][td_class][0][3]!=0)||(date2approve[bk_type][td_class][0][4]!=0)){}else{return false;}}}
if(typeof(date_approved[bk_type])!=='undefined'){if((typeof(date_approved[bk_type][td_class])!=='undefined')){if(!is_check_for_time){return false;}
if((date_approved[bk_type][td_class][0][3]!=0)||(date_approved[bk_type][td_class][0][4]!=0)){}else{return false;}}}}
if(is_start_time)work_date_array=sort_date_array[0];else work_date_array=sort_date_array[sort_date_array.length-1];td_class=work_date_array[1]+'-'+work_date_array[2]+'-'+work_date_array[0];if(typeof(date2approve[bk_type])!=='undefined')
if(typeof(date2approve[bk_type][td_class])!=='undefined')
for(i=0;i<date2approve[bk_type][td_class].length;i++){h=date2approve[bk_type][td_class][i][3];if(h<10)h='0'+h;if(h==0)h='00';m=date2approve[bk_type][td_class][i][4];if(m<10)m='0'+m;if(m==0)m='00';s=date2approve[bk_type][td_class][i][5];if(s=='02'){m=(m*1)+time_buffer_value;if(m>59){m=m-60;h=(h*1)+1;}
if(m<10)m='0'+m;}
times_array[times_array.length]=[h,m,s];}
if(typeof(date_approved[bk_type])!=='undefined')
if(typeof(date_approved[bk_type][td_class])!=='undefined')
for(i=0;i<date_approved[bk_type][td_class].length;i++){h=date_approved[bk_type][td_class][i][3];if(h<10)h='0'+h;if(h==0)h='00';m=date_approved[bk_type][td_class][i][4];if(m<10)m='0'+m;if(m==0)m='00';s=date_approved[bk_type][td_class][i][5];if(s=='02'){m=(m*1)+time_buffer_value;if(m>59){m=m-60;h=(h*1)+1;}
if(m<10)m='0'+m;}
times_array[times_array.length]=[h,m,s];}
times_array.sort();var times_in_day=[];var times_in_day_interval_marks=[];for(i=0;i<times_array.length;i++){s=times_array[i][2];if((s==2)&&(i==0)){times_in_day[times_in_day.length]=0;times_in_day_interval_marks[times_in_day_interval_marks.length]=1;}
times_in_day[times_in_day.length]=times_array[i][0]*60+parseInt(times_array[i][1]);times_in_day_interval_marks[times_in_day_interval_marks.length]=s;if((s==1)&&(i==(times_array.length-1))){times_in_day[times_in_day.length]=(24*60);times_in_day_interval_marks[times_in_day_interval_marks.length]=2;}}
var mytime_value=mytime.split(":");mytime_value=mytime_value[0]*60+parseInt(mytime_value[1]);var start_i=0;if(start_time_checking_index!=undefined)
if(start_time_checking_index[0]!=undefined)
if((!is_start_time)&&(sort_date_array.length==1)){start_i=start_time_checking_index[0];}
i=start_i;for(i=start_i;i<times_in_day.length;i++){times_in_day[i]=parseInt(times_in_day[i]);mytime_value=parseInt(mytime_value);if(is_start_time){if(mytime_value>times_in_day[i]){}else if(mytime_value==times_in_day[i]){if(times_in_day_interval_marks[i]==1){return false;}else{if((i+1)<=(times_in_day.length-1)){if(times_in_day[i+1]<=mytime_value)return false;else{if(sort_date_array.length>1)
if((i+1)<=(times_in_day.length-1))return false;start_time_checking_index=[i,td_class,mytime_value];return true;}}
if(sort_date_array.length>1)
if((i+1)<=(times_in_day.length-1))return false;start_time_checking_index=[i,td_class,mytime_value];return true;}}else if(mytime_value<times_in_day[i]){if(times_in_day_interval_marks[i]==2){return false;}else{if(sort_date_array.length>1)
if((i+1)<=(times_in_day.length-1))return false;start_time_checking_index=[i,td_class,mytime_value];return true;}}}else{if(sort_date_array.length==1){if(start_time_checking_index!=undefined)
if(start_time_checking_index[2]!=undefined)
if((start_time_checking_index[2]==times_in_day[i])&&(times_in_day_interval_marks[i]==2)){}else if(times_in_day[i]<mytime_value)return false;else{if(start_time_checking_index[2]>=mytime_value)return false;return true;}}else{if(times_in_day[i]<mytime_value)return false;else return true;}}}
if(is_start_time)start_time_checking_index=[i,td_class,mytime_value];else{if(start_time_checking_index!=undefined)
if(start_time_checking_index[2]!=undefined)
if((sort_date_array.length==1)&&(start_time_checking_index[2]>=mytime_value))return false;}
return true;}
function showErrorTimeMessage(my_message,element){var element_name=element.name;makeScroll("[name='"+element_name+"']");if(jQuery("[name='"+element_name+"']").is(':visible')){jQuery("[name='"+element_name+"']").css({'border':'1px solid red'}).fadeOut(350).fadeIn(500).animate({opacity:1},4000).animate({border:'1px solid #DFDFDF'},100);}
jQuery("[name='"+element_name+"']").after('<div class="wpdev-help-message alert alert-warning">'+my_message+'</div>');jQuery(".wpdev-help-message").animate({opacity:1},10000).fadeOut(2000);jQuery(element).trigger('focus');return true;}
function isValidTimeTextField(timeStr){var timePat=/^(\d{1,2}):(\d{2})(\s?(AM|am|PM|pm))?$/;var matchArray=timeStr.match(timePat);if(matchArray==null){return false;}
var hour=matchArray[1];var minute=matchArray[2];var ampm=matchArray[4];if(ampm==""){ampm=null}
if(hour<0||hour>24){return false;}
if(hour>12&&ampm!=null){return false;}
if(minute<0||minute>59){return false;}
return true;}
function bkDisableBookedTimeSlots(all_dates,bk_type){var i,h,m,s,j;var td_class;var time_slot_field_name='select[name="rangetime'+bk_type+'"]';var time_slot_field_name2='select[name="rangetime'+bk_type+'[]"]';var start_time_slot_field_name='select[name="starttime'+bk_type+'"]';var start_time_slot_field_name2='select[name="starttime'+bk_type+'[]"]';var end_time_slot_field_name='select[name="endtime'+bk_type+'"]';var end_time_slot_field_name2='select[name="endtime'+bk_type+'[]"]';var check_in_date=get_first_day_of_selection(all_dates);if((check_in_date===all_dates)||((bk_days_selection_mode=='single'))||((bk_days_selection_mode=='multiple')&&(wpbcg.time_disable_modes.indexOf('multiple')>=0))||((bk_days_selection_mode=='dynamic')&&(wpbcg.time_disable_modes.indexOf('dynamic')>=0))||((bk_days_selection_mode=='fixed')&&(wpbcg.time_disable_modes.indexOf('fixed')>=0))){var current_single_day_selections=check_in_date.split('.');td_class=(current_single_day_selections[1]*1)+'-'+(current_single_day_selections[0]*1)+'-'+(current_single_day_selections[2]*1);var times_array=[];jQuery(time_slot_field_name+' option:disabled,'+time_slot_field_name2+' option:disabled,'
+start_time_slot_field_name+' option:disabled,'+start_time_slot_field_name2+' option:disabled,'
+end_time_slot_field_name+' option:disabled,'+end_time_slot_field_name2+' option:disabled').removeClass('booked');jQuery(time_slot_field_name+' option:disabled,'+time_slot_field_name2+' option:disabled,'
+start_time_slot_field_name+' option:disabled,'+start_time_slot_field_name2+' option:disabled,'
+end_time_slot_field_name+' option:disabled,'+end_time_slot_field_name2+' option:disabled').prop('disabled',false);if(jQuery(time_slot_field_name+','+time_slot_field_name2+','+start_time_slot_field_name+','+start_time_slot_field_name2).length==0)return;var range_time_object=jQuery(time_slot_field_name+' option:first,'+time_slot_field_name2+' option:first,'+start_time_slot_field_name+' option:first,'+start_time_slot_field_name2+' option:first');if(range_time_object==undefined)return;if(typeof(date_approved[bk_type])!=='undefined')
if(typeof(date_approved[bk_type][td_class])!=='undefined'){if((date_approved[bk_type][td_class][0][3]!=0)||(date_approved[bk_type][td_class][0][4]!=0)){for(i=0;i<date_approved[bk_type][td_class].length;i++){h=date_approved[bk_type][td_class][i][3];if(h<10)h='0'+h;if(h==0)h='00';m=date_approved[bk_type][td_class][i][4];if(m<10)m='0'+m;if(m==0)m='00';s=date_approved[bk_type][td_class][i][5];if(s==2)s='02';times_array[times_array.length]=[h,m,s];}}}
if(typeof(date2approve[bk_type])!=='undefined')
if(typeof(date2approve[bk_type][td_class])!=='undefined')
if((date2approve[bk_type][td_class][0][3]!=0)||(date2approve[bk_type][td_class][0][4]!=0))
{for(i=0;i<date2approve[bk_type][td_class].length;i++){h=date2approve[bk_type][td_class][i][3];if(h<10)h='0'+h;if(h==0)h='00';m=date2approve[bk_type][td_class][i][4];if(m<10)m='0'+m;if(m==0)m='00';s=date2approve[bk_type][td_class][i][5];if(s==2)s='02';times_array[times_array.length]=[h,m,s];}}
times_array.sort();if(times_array.length>0){s=parseInt(times_array[0][2]);if(s==2){times_array[times_array.length]=['00','00','01'];times_array.sort();}
s=parseInt(times_array[(times_array.length-1)][2]);if(s==1){times_array[times_array.length]=['23','59','02'];times_array.sort();}}
var check_times_fields=[[time_slot_field_name,time_slot_field_name2],[start_time_slot_field_name,start_time_slot_field_name2]];if((bk_days_selection_mode=='single')){check_times_fields.push([end_time_slot_field_name,end_time_slot_field_name2]);}
for(var ctf=0;ctf<check_times_fields.length;ctf++){var time_field_to_check=check_times_fields[ctf];var removed_time_slots=is_time_slot_booked_for_this_time_array(bk_type,times_array,td_class,time_field_to_check);var my_time_value=jQuery(time_field_to_check[0]+' option,'+time_field_to_check[1]+' option');for(j=0;j<my_time_value.length;j++){if(wpdev_in_array(removed_time_slots,j)){jQuery(time_field_to_check[0]+' option:eq('+j+'),'+time_field_to_check[1]+' option:eq('+j+')').attr('disabled','disabled');jQuery(time_field_to_check[0]+' option:eq('+j+'),'+time_field_to_check[1]+' option:eq('+j+')').addClass('booked');if(jQuery(time_field_to_check[0]+' option:eq('+j+'),'+time_field_to_check[1]+' option:eq('+j+')').attr('selected')){jQuery(time_field_to_check[0]+' option:eq('+j+'),'+time_field_to_check[1]+' option:eq('+j+')').removeAttr('selected');}}}}}
if(-1==location.href.indexOf('booking_hash')){jQuery(time_slot_field_name+' option:not([disabled]):first,'
+time_slot_field_name2+' option:not([disabled]):first,'
+start_time_slot_field_name+' option:not([disabled]):first,'
+start_time_slot_field_name2+' option:not([disabled]):first,'
+end_time_slot_field_name+' option:not([disabled]):first,'
+end_time_slot_field_name2+' option:not([disabled]):first').prop('selected',true).trigger("change");}
jQuery(".booking_form_div").trigger('wpbc_hook_timeslots_disabled',[bk_type,check_in_date]);}
function is_time_slot_booked_for_this_time_array(bk_type,times_array,td_class,time_field_to_check){if(typeof(wpbc_get_conditional_section_id_for_weekday)=='function'){var conditional_field_element_id=wpbc_get_conditional_section_id_for_weekday(td_class,bk_type);if(conditional_field_element_id!==false){if(time_field_to_check[0].substr(0,conditional_field_element_id.length)!==conditional_field_element_id){time_field_to_check[0]=conditional_field_element_id+' '+time_field_to_check[0];}
if(time_field_to_check[1].substr(0,conditional_field_element_id.length)!==conditional_field_element_id){time_field_to_check[1]=conditional_field_element_id+' '+time_field_to_check[1];}}}
times_array.sort();var my_time_value='';var j;var bk_time_slot_selection='';var minutes_booked;var minutes_slot;var my_range_time;var removed_time_slots=[];if(times_array.length>0){if(parseInt(times_array[0][2])==2){var new_times_array=[];new_times_array[new_times_array.length]=['00','00','01'];for(var i=0;i<times_array.length;i++){new_times_array[new_times_array.length]=times_array[i];}
times_array=new_times_array;}
if(parseInt(times_array[(times_array.length-1)][2])==1){times_array[times_array.length]=['23','59','02'];}}
for(var i=0;i<times_array.length;i++){var s=(parseInt(times_array[i][2])%10);if(i>0){if(s==2){my_range_time=times_array[i-1][0]+':'+times_array[i-1][1]+' - '+times_array[i][0]+':'+times_array[i][1];my_time_value=jQuery(time_field_to_check[0]+' option,'+time_field_to_check[1]+' option');for(j=0;j<my_time_value.length;j++){if(my_time_value[j].value==my_range_time){removed_time_slots[removed_time_slots.length]=j;}else{bk_time_slot_selection=my_time_value[j].value;var is_time_range=bk_time_slot_selection.indexOf("-");if(is_time_range>-1){bk_time_slot_selection=bk_time_slot_selection.split('-');bk_time_slot_selection[0]=bk_time_slot_selection[0].trim();bk_time_slot_selection[1]=bk_time_slot_selection[1].trim();bk_time_slot_selection[0]=bk_time_slot_selection[0].split(':');bk_time_slot_selection[1]=bk_time_slot_selection[1].split(':');minutes_booked=[(parseInt(times_array[i-1][0]*60)+parseInt(times_array[i-1][1])),(parseInt(times_array[i][0]*60)+parseInt(times_array[i][1]))];minutes_slot=[(parseInt(bk_time_slot_selection[0][0]*60)+parseInt(bk_time_slot_selection[0][1])),(parseInt(bk_time_slot_selection[1][0]*60)+parseInt(bk_time_slot_selection[1][1]))];if(((minutes_booked[0]>=minutes_slot[0])&&(minutes_booked[0]<minutes_slot[1]))||((minutes_booked[1]>minutes_slot[0])&&(minutes_booked[1]<=minutes_slot[1]))||((minutes_slot[0]>=minutes_booked[0])&&(minutes_slot[0]<minutes_booked[1]))||((minutes_slot[1]>minutes_booked[0])&&(minutes_slot[1]<=minutes_booked[1]))){removed_time_slots[removed_time_slots.length]=j;}}else{bk_time_slot_selection=bk_time_slot_selection.split(':');minutes_booked=[(parseInt(times_array[i-1][0]*60)+parseInt(times_array[i-1][1])),(parseInt(times_array[i][0]*60)+parseInt(times_array[i][1]))];minutes_slot=[(parseInt(bk_time_slot_selection[0]*60)+parseInt(bk_time_slot_selection[1]))];var is_end_time=time_field_to_check[0].indexOf("endtime");if(-1!==is_end_time){minutes_booked[0]=minutes_booked[0]*60;minutes_booked[1]=minutes_booked[1]*60;minutes_slot[0]=minutes_slot[0]*60-10;}
if(((minutes_slot[0]>=minutes_booked[0])&&(minutes_slot[0]<minutes_booked[1]))){removed_time_slots[removed_time_slots.length]=j;}}}}}}}
return removed_time_slots;}
function isDayFullByTime(bk_type,td_class){var h,m,s;var times_array=[];var time_slot_field_name='select[name="rangetime'+bk_type+'"]';var time_slot_field_name2='select[name="rangetime'+bk_type+'[]"]';if(typeof(wpbc_get_conditional_section_id_for_weekday)=='function'){var conditional_field_element_id=wpbc_get_conditional_section_id_for_weekday(td_class,bk_type);if(conditional_field_element_id!==false){if(jQuery(conditional_field_element_id+' '+time_slot_field_name).length){time_slot_field_name=conditional_field_element_id+' '+time_slot_field_name;}
if(jQuery(conditional_field_element_id+' '+time_slot_field_name2).length){time_slot_field_name2=conditional_field_element_id+' '+time_slot_field_name2;}}}
if(typeof(wpbc_get_conditional_section_id_for_seasons)=='function'){var conditional_field_element_id2=wpbc_get_conditional_section_id_for_seasons(td_class,bk_type);if(conditional_field_element_id2!==false){if(jQuery(conditional_field_element_id2+' '+time_slot_field_name).length){time_slot_field_name=conditional_field_element_id2+' '+time_slot_field_name;}
if(jQuery(conditional_field_element_id2+' '+time_slot_field_name2).length){time_slot_field_name2=conditional_field_element_id2+' '+time_slot_field_name2;}}}
if(typeof(date_approved[bk_type])!=='undefined')
if(typeof(date_approved[bk_type][td_class])!=='undefined'){for(i=0;i<date_approved[bk_type][td_class].length;i++){if((date_approved[bk_type][td_class][0][3]!=0)||(date_approved[bk_type][td_class][0][4]!=0)){h=date_approved[bk_type][td_class][i][3];if(h<10)h='0'+h;if(h==0)h='00';m=date_approved[bk_type][td_class][i][4];if(m<10)m='0'+m;if(m==0)m='00';s=date_approved[bk_type][td_class][i][5];if(s==2)s='02';times_array[times_array.length]=[h,m,s];}}}
if(typeof(date2approve[bk_type])!=='undefined')
if(typeof(date2approve[bk_type][td_class])!=='undefined')
for(i=0;i<date2approve[bk_type][td_class].length;i++){if((date2approve[bk_type][td_class][0][3]!=0)||(date2approve[bk_type][td_class][0][4]!=0)){h=date2approve[bk_type][td_class][i][3];if(h<10)h='0'+h;if(h==0)h='00';m=date2approve[bk_type][td_class][i][4];if(m<10)m='0'+m;if(m==0)m='00';s=date2approve[bk_type][td_class][i][5];if(s==2)s='02';times_array[times_array.length]=[h,m,s];}}
times_array.sort();var start_time_fields='select[name="starttime'+bk_type+'"]';var start_time_fields2='select[name="starttime'+bk_type+'[]"]';if(typeof(wpbc_get_conditional_section_id_for_weekday)=='function'){var conditional_field_element_id=wpbc_get_conditional_section_id_for_weekday(td_class,bk_type);if(conditional_field_element_id!==false){if(jQuery(conditional_field_element_id+' '+start_time_fields).length){start_time_fields=conditional_field_element_id+' '+start_time_fields;}
if(jQuery(conditional_field_element_id+' '+start_time_fields2).length){start_time_fields2=conditional_field_element_id+' '+start_time_fields2;}}}
if(typeof(wpbc_get_conditional_section_id_for_seasons)=='function'){var conditional_field_element_id2=wpbc_get_conditional_section_id_for_seasons(td_class,bk_type);if(conditional_field_element_id2!==false){if(jQuery(conditional_field_element_id2+' '+start_time_fields).length){start_time_fields=conditional_field_element_id2+' '+start_time_fields;}
if(jQuery(conditional_field_element_id2+' '+start_time_fields2).length){start_time_fields2=conditional_field_element_id2+' '+start_time_fields2;}}}
var is_element_exist=jQuery(time_slot_field_name+','+time_slot_field_name2+','+start_time_fields+','+start_time_fields2).length;if(is_element_exist){var my_timerange_value=jQuery(time_slot_field_name+' option,'+time_slot_field_name2+' option');var my_st_en_times;var my_temp_time;var times_ranges_array=[];for(var j=0;j<my_timerange_value.length;j++){my_st_en_times=my_timerange_value[j].value.split(' - ');my_temp_time=my_st_en_times[0].split(':');times_ranges_array[times_ranges_array.length]=[my_temp_time[0],my_temp_time[1],'01'];my_temp_time=my_st_en_times[1].split(':');times_ranges_array[times_ranges_array.length]=[my_temp_time[0],my_temp_time[1],'02'];}
if(times_array.length==times_ranges_array.length){var is_all_same=true;for(var i=0;i<times_array.length;i++){if((times_array[i][0]!=times_ranges_array[i][0])||(times_array[i][1]!=times_ranges_array[i][1])||(times_array[i][2]!=times_ranges_array[i][2]))
is_all_same=false;}
if(is_all_same)return true;}
var my_start_time_options=jQuery(start_time_fields+' option,'+start_time_fields2+' option');if((my_start_time_options.length>0)&&(((bk_days_selection_mode=='single'))||((bk_days_selection_mode=='multiple')&&(wpbcg.time_disable_modes.indexOf('multiple')>=0))||((bk_days_selection_mode=='dynamic')&&(wpbcg.time_disable_modes.indexOf('dynamic')>=0))||((bk_days_selection_mode=='fixed')&&(wpbcg.time_disable_modes.indexOf('fixed')>=0)))){var removed_time_slots=is_time_slot_booked_for_this_time_array(bk_type,times_array,td_class,[start_time_fields,start_time_fields2]);var some_exist_time_slots=[];var my_time_value=jQuery(start_time_fields+' option,'+start_time_fields2+' option');for(j=0;j<my_time_value.length;j++){if(wpdev_in_array(removed_time_slots,j)){}else{some_exist_time_slots[some_exist_time_slots.length]=j;}}
if(some_exist_time_slots.length==0)return true;}
if((my_timerange_value.length>0)&&(((bk_days_selection_mode=='single'))||((bk_days_selection_mode=='multiple')&&(wpbcg.time_disable_modes.indexOf('multiple')>=0))||((bk_days_selection_mode=='dynamic')&&(wpbcg.time_disable_modes.indexOf('dynamic')>=0))||((bk_days_selection_mode=='fixed')&&(wpbcg.time_disable_modes.indexOf('fixed')>=0)))){var removed_time_slots=is_time_slot_booked_for_this_time_array(bk_type,times_array,td_class,[time_slot_field_name,time_slot_field_name2]);var some_exist_time_slots=[];var my_time_value=jQuery(time_slot_field_name+' option,'+time_slot_field_name2+' option');for(j=0;j<my_time_value.length;j++){if(wpdev_in_array(removed_time_slots,j)){}else{some_exist_time_slots[some_exist_time_slots.length]=j;}}
if(some_exist_time_slots.length==0)return true;}}
for(var i=0;i<times_array.length;i++){s=parseInt(times_array[i][2]);if(i==0)
if(s!==2){return false;}
if(i>0){if(s==1)
if(!((times_array[i-1][0]==times_array[i][0])&&(times_array[i-1][1]==times_array[i][1]))){return false;}}
if(i==(times_array.length-1))
if(s!==1){return false;}}
return true;};
(function($){$.fn.extend({wpbc_timeselector:function(){var times_options=[];this.each(function(){var el=$(this);if(el.parent().find('.wpbc_times_selector').length){el.parent().find('.wpbc_times_selector').remove();}
el.find('option').each(function(ind){times_options.push({title:jQuery(this).text(),value:jQuery(this).val(),disabled:jQuery(this).is(':disabled'),selected:jQuery(this).is(':selected')});});var times_options_html=$.fn.wpbc_timeselector.format(times_options);el.after(times_options_html);el.next('.wpbc_times_selector').find('div').on("click",function(){var selected_value=jQuery(this).attr('data-value');jQuery(this).parent('.wpbc_times_selector').find('.wpbc_time_selected').removeClass('wpbc_time_selected');jQuery(this).addClass('wpbc_time_selected');el.find('option').prop('selected',false);el.find('option[value="'+selected_value+'"]').prop('selected',true);el.trigger('change');});el.hide();times_options=[];});return this;}});$.fn.wpbc_timeselector.format=function(el_arr){var select_div='';var css_class='';$.each(el_arr,function(index,el_item){if(!el_item.disabled){if(el_item.selected){css_class='wpbc_time_selected';}else{css_class='';}
select_div+='<div '
+' data-value="'+el_item.value+'" '
+' class="'+css_class+'" '
+'>'
+el_item.title
+'</div>'}});if(''==select_div){select_div='<span class="wpbc_no_time_pickers">'
+'No available times'
+'</span>'}
return'<div class="wpbc_times_selector">'+select_div+'</div>';}})(jQuery);jQuery(document).ready(function(){jQuery('select[name^="rangetime"]').wpbc_timeselector();jQuery('select[name^="starttime"]').wpbc_timeselector();jQuery('select[name^="endtime"]').wpbc_timeselector();jQuery('select[name^="durationtime"]').wpbc_timeselector();jQuery(".booking_form_div").on('wpbc_hook_timeslots_disabled',function(event,bk_type,all_dates){jQuery('#booking_form_div'+bk_type+' select[name^="rangetime"]').wpbc_timeselector();jQuery('#booking_form_div'+bk_type+' select[name^="starttime"]').wpbc_timeselector();jQuery('#booking_form_div'+bk_type+' select[name^="endtime"]').wpbc_timeselector();jQuery('#booking_form_div'+bk_type+' select[name^="durationtime"]').wpbc_timeselector();});});
"use strict";function wpbc_flextimeline_nav(timeline_obj,nav_step){jQuery(".wpbc_timeline_front_end").trigger("timeline_nav",[timeline_obj,nav_step]);jQuery('#'+timeline_obj.html_client_id+' .flex_tl_prev,#'+timeline_obj.html_client_id+' .flex_tl_next').remove();jQuery('#'+timeline_obj.html_client_id+' .flex_tl_title').html('<span class="glyphicon glyphicon-refresh wpbc_spin"></span> &nbsp Loading...');jQuery.ajax({url:wpbc_ajaxurl,type:'POST',success:function success(data,textStatus){if(textStatus=='success'){jQuery('#'+timeline_obj.html_client_id+' .wpbc_timeline_ajax_replace').html(data);return true;}},error:function error(XMLHttpRequest,textStatus,errorThrown){window.status='Ajax Error! Status: '+textStatus;alert('Ajax Error! Status: '+XMLHttpRequest.status+' '+XMLHttpRequest.statusText);},data:{action:'WPBC_FLEXTIMELINE_NAV',timeline_obj:timeline_obj,nav_step:nav_step,wpdev_active_locale:wpbc_active_locale,wpbc_nonce:document.getElementById('wpbc_nonce_'+timeline_obj.html_client_id).value}});}
(()=>{"use strict";var t={d:(e,s)=>{for(var i in s)t.o(s,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:s[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};function s(t){if(this.formData={},this.tree={},!(t instanceof FormData))return this;this.formData=t;const e=()=>{const t=new Map;return t.largestIndex=0,t.set=function(e,s){""===e?e=t.largestIndex++:/^[0-9]+$/.test(e)&&(e=parseInt(e),t.largestIndex<=e&&(t.largestIndex=e+1)),Map.prototype.set.call(t,e,s)},t};this.tree=e();const s=/^(?<name>[a-z][-a-z0-9_:]*)(?<array>(?:\[(?:[a-z][-a-z0-9_:]*|[0-9]*)\])*)/i;for(const[t,i]of this.formData){const o=t.match(s);if(o)if(""===o.groups.array)this.tree.set(o.groups.name,i);else{const t=[...o.groups.array.matchAll(/\[([a-z][-a-z0-9_:]*|[0-9]*)\]/gi)].map((([t,e])=>e));t.unshift(o.groups.name);const s=t.pop();t.reduce(((t,s)=>{if(/^[0-9]+$/.test(s)&&(s=parseInt(s)),t.get(s)instanceof Map)return t.get(s);const i=e();return t.set(s,i),i}),this.tree).set(s,i)}}}t.r(e),t.d(e,{date:()=>d,email:()=>r,enum:()=>f,file:()=>m,maxdate:()=>b,maxfilesize:()=>z,maxitems:()=>u,maxlength:()=>v,maxnumber:()=>x,mindate:()=>y,minfilesize:()=>A,minitems:()=>h,minlength:()=>g,minnumber:()=>w,number:()=>c,required:()=>n,requiredfile:()=>a,tel:()=>l,url:()=>p}),s.prototype.entries=function(){return this.tree.entries()},s.prototype.get=function(t){return this.tree.get(t)},s.prototype.getAll=function(t){if(!this.has(t))return[];const e=t=>{const s=[];if(t instanceof Map)for(const[i,o]of t)s.push(...e(o));else""!==t&&s.push(t);return s};return e(this.get(t))},s.prototype.has=function(t){return this.tree.has(t)},s.prototype.keys=function(){return this.tree.keys()},s.prototype.values=function(){return this.tree.values()};const i=s;function o({rule:t,field:e,error:s,...i}){this.rule=t,this.field=e,this.error=s,this.properties=i}const n=function(t){if(0===t.getAll(this.field).length)throw new o(this)},a=function(t){if(0===t.getAll(this.field).length)throw new o(this)},r=function(t){if(!t.getAll(this.field).every((t=>{if((t=t.trim()).length<6)return!1;if(-1===t.indexOf("@",1))return!1;if(t.indexOf("@")!==t.lastIndexOf("@"))return!1;const[e,s]=t.split("@",2);if(!/^[a-zA-Z0-9!#$%&\'*+\/=?^_`{|}~\.-]+$/.test(e))return!1;if(/\.{2,}/.test(s))return!1;if(/(?:^[ \t\n\r\0\x0B.]|[ \t\n\r\0\x0B.]$)/.test(s))return!1;const i=s.split(".");if(i.length<2)return!1;for(const t of i){if(/(?:^[ \t\n\r\0\x0B-]|[ \t\n\r\0\x0B-]$)/.test(t))return!1;if(!/^[a-z0-9-]+$/i.test(t))return!1}return!0})))throw new o(this)},p=function(t){const e=t.getAll(this.field);if(!e.every((t=>{if(""===(t=t.trim()))return!1;try{return(t=>-1!==["http","https","ftp","ftps","mailto","news","irc","irc6","ircs","gopher","nntp","feed","telnet","mms","rtsp","sms","svn","tel","fax","xmpp","webcal","urn"].indexOf(t))(new URL(t).protocol.replace(/:$/,""))}catch{return!1}})))throw new o(this)},l=function(t){if(!t.getAll(this.field).every((t=>(t=(t=t.trim()).replaceAll(/[()/.*#\s-]+/g,""),/^[+]?[0-9]+$/.test(t)))))throw new o(this)},c=function(t){if(!t.getAll(this.field).every((t=>(t=t.trim(),!!/^[-]?[0-9]+(?:[eE][+-]?[0-9]+)?$/.test(t)||!!/^[-]?(?:[0-9]+)?[.][0-9]+(?:[eE][+-]?[0-9]+)?$/.test(t)))))throw new o(this)},d=function(t){if(!t.getAll(this.field).every((t=>/^[0-9]{4,}-[0-9]{2}-[0-9]{2}$/.test(t.trim()))))throw new o(this)},m=function(t){if(!t.getAll(this.field).every((t=>t instanceof File&&this.accept?.some((e=>/^\.[a-z0-9]+$/i.test(e)?t.name.toLowerCase().endsWith(e.toLowerCase()):(t=>{const e=[],s=t.match(/^(?<toplevel>[a-z]+)\/(?<sub>[*]|[a-z0-9.+-]+)$/i);if(s){const t=s.groups.toplevel.toLowerCase(),i=s.groups.sub.toLowerCase();for(const[o,n]of(()=>{const t=new Map;return t.set("jpg|jpeg|jpe","image/jpeg"),t.set("gif","image/gif"),t.set("png","image/png"),t.set("bmp","image/bmp"),t.set("tiff|tif","image/tiff"),t.set("webp","image/webp"),t.set("ico","image/x-icon"),t.set("heic","image/heic"),t.set("asf|asx","video/x-ms-asf"),t.set("wmv","video/x-ms-wmv"),t.set("wmx","video/x-ms-wmx"),t.set("wm","video/x-ms-wm"),t.set("avi","video/avi"),t.set("divx","video/divx"),t.set("flv","video/x-flv"),t.set("mov|qt","video/quicktime"),t.set("mpeg|mpg|mpe","video/mpeg"),t.set("mp4|m4v","video/mp4"),t.set("ogv","video/ogg"),t.set("webm","video/webm"),t.set("mkv","video/x-matroska"),t.set("3gp|3gpp","video/3gpp"),t.set("3g2|3gp2","video/3gpp2"),t.set("txt|asc|c|cc|h|srt","text/plain"),t.set("csv","text/csv"),t.set("tsv","text/tab-separated-values"),t.set("ics","text/calendar"),t.set("rtx","text/richtext"),t.set("css","text/css"),t.set("htm|html","text/html"),t.set("vtt","text/vtt"),t.set("dfxp","application/ttaf+xml"),t.set("mp3|m4a|m4b","audio/mpeg"),t.set("aac","audio/aac"),t.set("ra|ram","audio/x-realaudio"),t.set("wav","audio/wav"),t.set("ogg|oga","audio/ogg"),t.set("flac","audio/flac"),t.set("mid|midi","audio/midi"),t.set("wma","audio/x-ms-wma"),t.set("wax","audio/x-ms-wax"),t.set("mka","audio/x-matroska"),t.set("rtf","application/rtf"),t.set("js","application/javascript"),t.set("pdf","application/pdf"),t.set("swf","application/x-shockwave-flash"),t.set("class","application/java"),t.set("tar","application/x-tar"),t.set("zip","application/zip"),t.set("gz|gzip","application/x-gzip"),t.set("rar","application/rar"),t.set("7z","application/x-7z-compressed"),t.set("exe","application/x-msdownload"),t.set("psd","application/octet-stream"),t.set("xcf","application/octet-stream"),t.set("doc","application/msword"),t.set("pot|pps|ppt","application/vnd.ms-powerpoint"),t.set("wri","application/vnd.ms-write"),t.set("xla|xls|xlt|xlw","application/vnd.ms-excel"),t.set("mdb","application/vnd.ms-access"),t.set("mpp","application/vnd.ms-project"),t.set("docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"),t.set("docm","application/vnd.ms-word.document.macroEnabled.12"),t.set("dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"),t.set("dotm","application/vnd.ms-word.template.macroEnabled.12"),t.set("xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"),t.set("xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"),t.set("xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"),t.set("xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"),t.set("xltm","application/vnd.ms-excel.template.macroEnabled.12"),t.set("xlam","application/vnd.ms-excel.addin.macroEnabled.12"),t.set("pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"),t.set("pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"),t.set("ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"),t.set("ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"),t.set("potx","application/vnd.openxmlformats-officedocument.presentationml.template"),t.set("potm","application/vnd.ms-powerpoint.template.macroEnabled.12"),t.set("ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"),t.set("sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"),t.set("sldm","application/vnd.ms-powerpoint.slide.macroEnabled.12"),t.set("onetoc|onetoc2|onetmp|onepkg","application/onenote"),t.set("oxps","application/oxps"),t.set("xps","application/vnd.ms-xpsdocument"),t.set("odt","application/vnd.oasis.opendocument.text"),t.set("odp","application/vnd.oasis.opendocument.presentation"),t.set("ods","application/vnd.oasis.opendocument.spreadsheet"),t.set("odg","application/vnd.oasis.opendocument.graphics"),t.set("odc","application/vnd.oasis.opendocument.chart"),t.set("odb","application/vnd.oasis.opendocument.database"),t.set("odf","application/vnd.oasis.opendocument.formula"),t.set("wp|wpd","application/wordperfect"),t.set("key","application/vnd.apple.keynote"),t.set("numbers","application/vnd.apple.numbers"),t.set("pages","application/vnd.apple.pages"),t})())("*"===i&&n.startsWith(t+"/")||n===s[0])&&e.push(...o.split("|"))}return e})(e).some((e=>(e="."+e.trim(),t.name.toLowerCase().endsWith(e.toLowerCase())))))))))throw new o(this)},f=function(t){if(!t.getAll(this.field).every((t=>this.accept?.some((e=>t===String(e))))))throw new o(this)},h=function(t){if(t.getAll(this.field).length<parseInt(this.threshold))throw new o(this)},u=function(t){const e=t.getAll(this.field);if(parseInt(this.threshold)<e.length)throw new o(this)},g=function(t){const e=t.getAll(this.field);let s=0;if(e.forEach((t=>{"string"==typeof t&&(s+=t.length)})),0!==s&&s<parseInt(this.threshold))throw new o(this)},v=function(t){const e=t.getAll(this.field);let s=0;if(e.forEach((t=>{"string"==typeof t&&(s+=t.length)})),parseInt(this.threshold)<s)throw new o(this)},w=function(t){if(!t.getAll(this.field).every((t=>!(parseFloat(t)<parseFloat(this.threshold)))))throw new o(this)},x=function(t){if(!t.getAll(this.field).every((t=>!(parseFloat(this.threshold)<parseFloat(t)))))throw new o(this)},y=function(t){if(!t.getAll(this.field).every((t=>(t=t.trim(),!(/^[0-9]{4,}-[0-9]{2}-[0-9]{2}$/.test(t)&&/^[0-9]{4,}-[0-9]{2}-[0-9]{2}$/.test(this.threshold)&&t<this.threshold)))))throw new o(this)},b=function(t){if(!t.getAll(this.field).every((t=>(t=t.trim(),!(/^[0-9]{4,}-[0-9]{2}-[0-9]{2}$/.test(t)&&/^[0-9]{4,}-[0-9]{2}-[0-9]{2}$/.test(this.threshold)&&this.threshold<t)))))throw new o(this)},A=function(t){const e=t.getAll(this.field);let s=0;if(e.forEach((t=>{t instanceof File&&(s+=t.size)})),s<parseInt(this.threshold))throw new o(this)},z=function(t){const e=t.getAll(this.field);let s=0;if(e.forEach((t=>{t instanceof File&&(s+=t.size)})),parseInt(this.threshold)<s)throw new o(this)};var $;window.swv={validators:e,validate:(t,s,n={})=>{const a=(t.rules??[]).filter((({rule:t,...s})=>"function"==typeof e[t]&&("function"!=typeof e[t].matches||e[t].matches(s,n))));if(!a.length)return new Map;const r=new i(s),p=a.reduce(((t,s)=>{const{rule:i,...n}=s;if(t.get(n.field)?.error)return t;try{e[i].call({rule:i,...n},r)}catch(e){if(e instanceof o)return t.set(n.field,e)}return t}),new Map);for(const t of r.keys())p.has(t)||p.set(t,{validInputs:r.getAll(t)});return p},...null!==($=window.swv)&&void 0!==$?$:{}}})();
(()=>{"use strict";const e=e=>Math.abs(parseInt(e,10)),t=(e,t)=>{const a=new Map([["init","init"],["validation_failed","invalid"],["acceptance_missing","unaccepted"],["spam","spam"],["aborted","aborted"],["mail_sent","sent"],["mail_failed","failed"],["submitting","submitting"],["resetting","resetting"],["validating","validating"],["payment_required","payment-required"]]);a.has(t)&&(t=a.get(t)),Array.from(a.values()).includes(t)||(t=`custom-${t=(t=t.replace(/[^0-9a-z]+/i," ").trim()).replace(/\s+/,"-")}`);const n=e.getAttribute("data-status");return e.wpcf7.status=t,e.setAttribute("data-status",t),e.classList.add(t),n&&n!==t&&e.classList.remove(n),t},a=(e,t,a)=>{const n=new CustomEvent(`wpcf7${t}`,{bubbles:!0,detail:a});"string"==typeof e&&(e=document.querySelector(e)),e.dispatchEvent(n)},n=e=>{const{root:t,namespace:a="contact-form-7/v1"}=wpcf7.api;return r.reduceRight(((e,t)=>a=>t(a,e)),(e=>{let n,r,{url:o,path:c,endpoint:s,headers:i,body:l,data:d,...p}=e;"string"==typeof s&&(n=a.replace(/^\/|\/$/g,""),r=s.replace(/^\//,""),c=r?n+"/"+r:n),"string"==typeof c&&(-1!==t.indexOf("?")&&(c=c.replace("?","&")),c=c.replace(/^\//,""),o=t+c),i={Accept:"application/json, */*;q=0.1",...i},delete i["X-WP-Nonce"],d&&(l=JSON.stringify(d),i["Content-Type"]="application/json");const u={code:"fetch_error",message:"You are probably offline."},f={code:"invalid_json",message:"The response is not a valid JSON response."};return window.fetch(o||c||window.location.href,{...p,headers:i,body:l}).then((e=>Promise.resolve(e).then((e=>{if(e.status>=200&&e.status<300)return e;throw e})).then((e=>{if(204===e.status)return null;if(e&&e.json)return e.json().catch((()=>{throw f}));throw f}))),(()=>{throw u}))}))(e)},r=[];function o(e){var a,n;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{target:o,scope:l=e,...d}=r;if(void 0===(null===(a=e.wpcf7)||void 0===a?void 0:a.schema))return;const p={...e.wpcf7.schema};if(void 0!==o){if(!e.contains(o))return;if(!o.closest(".wpcf7-form-control-wrap[data-name]"))return;if(o.closest(".novalidate"))return}const u=new FormData,f=[];for(const e of l.querySelectorAll(".wpcf7-form-control-wrap"))if(!e.closest(".novalidate")&&(e.querySelectorAll(":where( input, textarea, select ):enabled").forEach((e=>{if(e.name)switch(e.type){case"button":case"image":case"reset":case"submit":break;case"checkbox":case"radio":e.checked&&u.append(e.name,e.value);break;case"select-multiple":for(const t of e.selectedOptions)u.append(e.name,t.value);break;case"file":for(const t of e.files)u.append(e.name,t);break;default:u.append(e.name,e.value)}})),e.dataset.name&&(f.push(e.dataset.name),e.setAttribute("data-under-validation","1"),e.contains(o))))break;p.rules=(null!==(n=p.rules)&&void 0!==n?n:[]).filter((e=>{let{field:t}=e;return f.includes(t)}));const m=e.getAttribute("data-status");Promise.resolve(t(e,"validating")).then((t=>{if(void 0!==swv){const t=swv.validate(p,u,r);for(const[a,{error:n,validInputs:r}]of t)s(e,a),void 0!==n&&c(e,a,n,{scope:l}),i(e,a,null!=r?r:[])}})).finally((()=>{t(e,m),e.querySelectorAll(".wpcf7-form-control-wrap[data-under-validation]").forEach((e=>{e.removeAttribute("data-under-validation")}))}))}n.use=e=>{r.unshift(e)};const c=(e,t,a,n)=>{var r;const{scope:o=e,...c}=null!=n?n:{},s=`${null===(r=e.wpcf7)||void 0===r?void 0:r.unitTag}-ve-${t}`.replaceAll(/[^0-9a-z_-]+/gi,""),i=e.querySelector(`.wpcf7-form-control-wrap[data-name="${t}"] .wpcf7-form-control`);(()=>{const t=document.createElement("li");t.setAttribute("id",s),i&&i.id?t.insertAdjacentHTML("beforeend",`<a href="#${i.id}">${a}</a>`):t.insertAdjacentText("beforeend",a),e.wpcf7.parent.querySelector(".screen-reader-response ul").appendChild(t)})(),o.querySelectorAll(`.wpcf7-form-control-wrap[data-name="${t}"]`).forEach((t=>{if("validating"===e.getAttribute("data-status")&&!t.dataset.underValidation)return;const n=document.createElement("span");n.classList.add("wpcf7-not-valid-tip"),n.setAttribute("aria-hidden","true"),n.insertAdjacentText("beforeend",a),t.appendChild(n),t.querySelectorAll("[aria-invalid]").forEach((e=>{e.setAttribute("aria-invalid","true")})),t.querySelectorAll(".wpcf7-form-control").forEach((e=>{e.classList.add("wpcf7-not-valid"),e.setAttribute("aria-describedby",s),"function"==typeof e.setCustomValidity&&e.setCustomValidity(a),e.closest(".use-floating-validation-tip")&&(e.addEventListener("focus",(e=>{n.setAttribute("style","display: none")})),n.addEventListener("click",(e=>{n.setAttribute("style","display: none")})))}))}))},s=(e,t)=>{var a,n;const r=`${null===(a=e.wpcf7)||void 0===a?void 0:a.unitTag}-ve-${t}`.replaceAll(/[^0-9a-z_-]+/gi,"");null===(n=e.wpcf7.parent.querySelector(`.screen-reader-response ul li#${r}`))||void 0===n||n.remove(),e.querySelectorAll(`.wpcf7-form-control-wrap[data-name="${t}"]`).forEach((e=>{var t;null===(t=e.querySelector(".wpcf7-not-valid-tip"))||void 0===t||t.remove(),e.querySelectorAll("[aria-invalid]").forEach((e=>{e.setAttribute("aria-invalid","false")})),e.querySelectorAll(".wpcf7-form-control").forEach((e=>{e.removeAttribute("aria-describedby"),e.classList.remove("wpcf7-not-valid"),"function"==typeof e.setCustomValidity&&e.setCustomValidity("")}))}))},i=(e,t,a)=>{e.querySelectorAll(`[data-reflection-of="${t}"]`).forEach((e=>{if("output"===e.tagName.toLowerCase()){const t=e;0===a.length&&a.push(t.dataset.default),a.slice(0,1).forEach((e=>{e instanceof File&&(e=e.name),t.textContent=e}))}else e.querySelectorAll("output").forEach((e=>{e.hasAttribute("data-default")?0===a.length?e.removeAttribute("hidden"):e.setAttribute("hidden","hidden"):e.remove()})),a.forEach((a=>{a instanceof File&&(a=a.name);const n=document.createElement("output");n.setAttribute("name",t),n.textContent=a,e.appendChild(n)}))}))};function l(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(wpcf7.blocked)return d(e),void t(e,"submitting");const o=new FormData(e);r.submitter&&r.submitter.name&&o.append(r.submitter.name,r.submitter.value);const s={contactFormId:e.wpcf7.id,pluginVersion:e.wpcf7.pluginVersion,contactFormLocale:e.wpcf7.locale,unitTag:e.wpcf7.unitTag,containerPostId:e.wpcf7.containerPost,status:e.wpcf7.status,inputs:Array.from(o,(e=>{const t=e[0],a=e[1];return!t.match(/^_/)&&{name:t,value:a}})).filter((e=>!1!==e)),formData:o};n({endpoint:`contact-forms/${e.wpcf7.id}/feedback`,method:"POST",body:o,wpcf7:{endpoint:"feedback",form:e,detail:s}}).then((n=>{const r=t(e,n.status);return s.status=n.status,s.apiResponse=n,["invalid","unaccepted","spam","aborted"].includes(r)?a(e,r,s):["sent","failed"].includes(r)&&a(e,`mail${r}`,s),a(e,"submit",s),n})).then((t=>{t.posted_data_hash&&(e.querySelector('input[name="_wpcf7_posted_data_hash"]').value=t.posted_data_hash),"mail_sent"===t.status&&(e.reset(),e.wpcf7.resetOnMailSent=!0),t.invalid_fields&&t.invalid_fields.forEach((t=>{c(e,t.field,t.message)})),e.wpcf7.parent.querySelector('.screen-reader-response [role="status"]').insertAdjacentText("beforeend",t.message),e.querySelectorAll(".wpcf7-response-output").forEach((e=>{e.innerText=t.message}))})).catch((e=>console.error(e)))}n.use(((e,n)=>{if(e.wpcf7&&"feedback"===e.wpcf7.endpoint){const{form:n,detail:r}=e.wpcf7;d(n),a(n,"beforesubmit",r),t(n,"submitting")}return n(e)}));const d=e=>{e.querySelectorAll(".wpcf7-form-control-wrap").forEach((t=>{t.dataset.name&&s(e,t.dataset.name)})),e.wpcf7.parent.querySelector('.screen-reader-response [role="status"]').innerText="",e.querySelectorAll(".wpcf7-response-output").forEach((e=>{e.innerText=""}))};function p(e){const r=new FormData(e),o={contactFormId:e.wpcf7.id,pluginVersion:e.wpcf7.pluginVersion,contactFormLocale:e.wpcf7.locale,unitTag:e.wpcf7.unitTag,containerPostId:e.wpcf7.containerPost,status:e.wpcf7.status,inputs:Array.from(r,(e=>{const t=e[0],a=e[1];return!t.match(/^_/)&&{name:t,value:a}})).filter((e=>!1!==e)),formData:r};n({endpoint:`contact-forms/${e.wpcf7.id}/refill`,method:"GET",wpcf7:{endpoint:"refill",form:e,detail:o}}).then((n=>{e.wpcf7.resetOnMailSent?(delete e.wpcf7.resetOnMailSent,t(e,"mail_sent")):t(e,"init"),o.apiResponse=n,a(e,"reset",o)})).catch((e=>console.error(e)))}n.use(((e,a)=>{if(e.wpcf7&&"refill"===e.wpcf7.endpoint){const{form:a,detail:n}=e.wpcf7;d(a),t(a,"resetting")}return a(e)}));const u=(e,t)=>{for(const a in t){const n=t[a];e.querySelectorAll(`input[name="${a}"]`).forEach((e=>{e.value=""})),e.querySelectorAll(`img.wpcf7-captcha-${a.replaceAll(":","")}`).forEach((e=>{e.setAttribute("src",n)}));const r=/([0-9]+)\.(png|gif|jpeg)$/.exec(n);r&&e.querySelectorAll(`input[name="_wpcf7_captcha_challenge_${a}"]`).forEach((e=>{e.value=r[1]}))}},f=(e,t)=>{for(const a in t){const n=t[a][0],r=t[a][1];e.querySelectorAll(`.wpcf7-form-control-wrap[data-name="${a}"]`).forEach((e=>{e.querySelector(`input[name="${a}"]`).value="",e.querySelector(".wpcf7-quiz-label").textContent=n,e.querySelector(`input[name="_wpcf7_quiz_answer_${a}"]`).value=r}))}};function m(t){const a=new FormData(t);t.wpcf7={id:e(a.get("_wpcf7")),status:t.getAttribute("data-status"),pluginVersion:a.get("_wpcf7_version"),locale:a.get("_wpcf7_locale"),unitTag:a.get("_wpcf7_unit_tag"),containerPost:e(a.get("_wpcf7_container_post")),parent:t.closest(".wpcf7"),schema:void 0},t.querySelectorAll(".has-spinner").forEach((e=>{e.insertAdjacentHTML("afterend",'<span class="wpcf7-spinner"></span>')})),(e=>{e.querySelectorAll(".wpcf7-exclusive-checkbox").forEach((t=>{t.addEventListener("change",(t=>{const a=t.target.getAttribute("name");e.querySelectorAll(`input[type="checkbox"][name="${a}"]`).forEach((e=>{e!==t.target&&(e.checked=!1)}))}))}))})(t),(e=>{e.querySelectorAll(".has-free-text").forEach((t=>{const a=t.querySelector("input.wpcf7-free-text"),n=t.querySelector('input[type="checkbox"], input[type="radio"]');a.disabled=!n.checked,e.addEventListener("change",(e=>{a.disabled=!n.checked,e.target===n&&n.checked&&a.focus()}))}))})(t),(e=>{e.querySelectorAll(".wpcf7-validates-as-url").forEach((e=>{e.addEventListener("change",(t=>{let a=e.value.trim();a&&!a.match(/^[a-z][a-z0-9.+-]*:/i)&&-1!==a.indexOf(".")&&(a=a.replace(/^\/+/,""),a="http://"+a),e.value=a}))}))})(t),(e=>{if(!e.querySelector(".wpcf7-acceptance")||e.classList.contains("wpcf7-acceptance-as-validation"))return;const t=()=>{let t=!0;e.querySelectorAll(".wpcf7-acceptance").forEach((e=>{if(!t||e.classList.contains("optional"))return;const a=e.querySelector('input[type="checkbox"]');(e.classList.contains("invert")&&a.checked||!e.classList.contains("invert")&&!a.checked)&&(t=!1)})),e.querySelectorAll(".wpcf7-submit").forEach((e=>{e.disabled=!t}))};t(),e.addEventListener("change",(e=>{t()})),e.addEventListener("wpcf7reset",(e=>{t()}))})(t),(t=>{const a=(t,a)=>{const n=e(t.getAttribute("data-starting-value")),r=e(t.getAttribute("data-maximum-value")),o=e(t.getAttribute("data-minimum-value")),c=t.classList.contains("down")?n-a.value.length:a.value.length;t.setAttribute("data-current-value",c),t.innerText=c,r&&r<a.value.length?t.classList.add("too-long"):t.classList.remove("too-long"),o&&a.value.length<o?t.classList.add("too-short"):t.classList.remove("too-short")},n=e=>{e={init:!1,...e},t.querySelectorAll(".wpcf7-character-count").forEach((n=>{const r=n.getAttribute("data-target-name"),o=t.querySelector(`[name="${r}"]`);o&&(o.value=o.defaultValue,a(n,o),e.init&&o.addEventListener("keyup",(e=>{a(n,o)})))}))};n({init:!0}),t.addEventListener("wpcf7reset",(e=>{n()}))})(t),window.addEventListener("load",(e=>{wpcf7.cached&&t.reset()})),t.addEventListener("reset",(e=>{wpcf7.reset(t)})),t.addEventListener("submit",(e=>{wpcf7.submit(t,{submitter:e.submitter}),e.preventDefault()})),t.addEventListener("wpcf7submit",(e=>{e.detail.apiResponse.captcha&&u(t,e.detail.apiResponse.captcha),e.detail.apiResponse.quiz&&f(t,e.detail.apiResponse.quiz)})),t.addEventListener("wpcf7reset",(e=>{e.detail.apiResponse.captcha&&u(t,e.detail.apiResponse.captcha),e.detail.apiResponse.quiz&&f(t,e.detail.apiResponse.quiz)})),n({endpoint:`contact-forms/${t.wpcf7.id}/feedback/schema`,method:"GET"}).then((e=>{t.wpcf7.schema=e})),t.addEventListener("change",(e=>{e.target.closest(".wpcf7-form-control")&&wpcf7.validate(t,{target:e.target})}))}document.addEventListener("DOMContentLoaded",(e=>{var t;"undefined"!=typeof wpcf7?void 0!==wpcf7.api?"function"==typeof window.fetch?"function"==typeof window.FormData?"function"==typeof NodeList.prototype.forEach?"function"==typeof String.prototype.replaceAll?(wpcf7={init:m,submit:l,reset:p,validate:o,...null!==(t=wpcf7)&&void 0!==t?t:{}},document.querySelectorAll(".wpcf7 > form").forEach((e=>{wpcf7.init(e),e.closest(".wpcf7").classList.replace("no-js","js")}))):console.error("Your browser does not support String.replaceAll()."):console.error("Your browser does not support NodeList.forEach()."):console.error("Your browser does not support window.FormData()."):console.error("Your browser does not support window.fetch()."):console.error("wpcf7.api is not defined."):console.error("wpcf7 is not defined.")}))})();

!function(){function g(a){return a?a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):""}function h(a){return a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})}function i(a,c,d,e,f){var g="pxw_callback_"+b;return window[g]=function(b){a(b,c,d,e,f);try{delete window[g]}catch(a){}},b++,g}function j(a,b){for(var c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.msMatchesSelector;a;){if(c.bind(a)(b))return a;a=a.parentElement}}function k(a){for(var b="",c=0,d=a.attributes;c<d.length;c++)"data-attrstr"!=d[c].name&&"data-prefilled"!=d[c].name&&(b+=d[c].name+d[c].value);return b}function l(){for(var b=0,d=document.querySelectorAll("."+c.class_name);b<d.length;b++){var e=d[b];if(k(e)!=e.getAttribute("data-attrstr")){e.setAttribute("data-attrstr",k(e));var f=parseInt(e.getAttribute("data-page"))||1,g=parseInt(e.getAttribute("data-per-page"))||c.per_page,h=e.getAttribute("data-search")||"",j=e.getAttribute("data-user")||"";g=g>100?100:g,j&&(h="user:"+j+" "+h);var l="https://pixabay.com/api/?key="+c.key+"&lang="+(e.getAttribute("data-lang")||c.lang)+"&order="+(e.getAttribute("data-order")||c.order)+"&image_type="+(e.getAttribute("data-image-type")||c.image_type)+"&safesearch="+(e.getAttribute("data-safesearch")||c.safesearch)+"&editors_choice="+(e.getAttribute("data-editors-choice")||c.editors_choice)+"&per_page="+g+"&page="+f+"&q="+encodeURIComponent(h);if(e.getAttribute("data-prefilled"))e.removeAttribute("data-prefilled"),APIResponse(!1,e,f,g,l);else if(l in a)APIResponse(a[l],e,f,g,l);else{var m=document.createElement("script");m.src=l+"&callback="+i(APIResponse,e,f,g,l),document.body.appendChild(m)}}}}var a={},b=0,c={class_name:"pixabay_widget",row_height:170,per_page:20,max_rows:0,truncate:!0,lang:"en",image_type:"all",safesearch:!1,editors_choice:!1,order:"popular",target:"",navpos:"bottom",branding:!0,prev:"◄ PREV",next:"NEXT ►"};if("object"==typeof pixabayWidget)for(var d in pixabayWidget)Object.prototype.hasOwnProperty.call(pixabayWidget,d)&&(c[d]=pixabayWidget[d]);if(!("key"in c))return console.log('API key missing: Your Pixabay API key must be defined as "key" in the pixabayWidget configuration array.'),!1;styles="** .noselect { -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; }** a, ** b { color: #4e99c7; text-decoration: none; font-weight: normal; cursor: pointer; transition: .3s; }** a:hover, ** b:hover { opacity: .7; }** a img { border: 0; }** **_nav { clear: both; padding: 3px 7px; font: normal 12px arial, sans-serif; color: #777; }** **_nav span { color: #ddd; cursor: default; }** .branding { float: right; }**.flex_grid { overflow: hidden; }**.flex_grid .item { float: left; margin: 1px; box-sizing: content-box; overflow: hidden; position: relative;  }**.flex_grid .item img { display: block; width: auto; height: 100%; background: #fff; transition: .3s; }**.flex_grid .item img:hover { opacity: .85; }".replace(/\*\*/g,"."+c.class_name);var e=document.createElement("style");e.type="text/css",e.styleSheet?e.styleSheet.cssText=styles:e.appendChild(document.createTextNode(styles)),document.getElementsByTagName("head")[0].appendChild(e);var f=function(){function a(a){function b(a,c,d,e){function f(a){d.maxRows&&l>d.maxRows||d.truncate&&a&&l>1?n[g][0].style.display="none":(n[g][4]&&(n[g][3].setAttribute("src",n[g][4]),n[g][4]=""),n[g][0].style.width=h+"px",n[g][0].style.height=p+"px",n[g][0].style.display="block")}for(var g,h,i,j,k=1,l=1,m=a.clientWidth-2,n=[],o=0,p=d.rowHeight,q=0;q<c.length;q++)if(n.push(c[q]),o+=c[q][2]+d.margin,o>=m){var r=n.length*d.margin;for(k=(m-r)/(o-r),p=Math.ceil(d.rowHeight*k),i=0,g=0;g<n.length;g++)h=Math.ceil(n[g][2]*k),i+=h+d.margin,i>m&&(h-=i-m),f();n=[],o=0,l++}for(g=0;g<n.length;g++)h=Math.floor(n[g][2]*k),j=Math.floor(d.rowHeight*k),f(!0);e||m==a.clientWidth||b(a,c,d,!0)}if(document.querySelector){var c={selector:0,container:".item",object:"img",rowHeight:180,maxRows:0,truncate:0};for(var d in a)a.hasOwnProperty(d)&&(c[d]=a[d]);for(var e="object"==typeof c.selector?[c.selector]:document.querySelectorAll(c.selector),f=0;f<e.length;f++){var g=e[f],h=g.querySelectorAll(c.container),i=[],j=(new Date).getTime();if(h.length){var k=window.getComputedStyle?getComputedStyle(h[0],null):h[0].currentStyle;c.margin=(parseInt(k.marginLeft)||0)+(parseInt(k.marginRight)||0)+(Math.round(parseFloat(k.borderLeftWidth))||0)+(Math.round(parseFloat(k.borderRightWidth))||0);for(var l=0;l<h.length;l++){var m=h[l],n=parseInt(m.getAttribute("data-w")),o=n*(c.rowHeight/parseInt(m.getAttribute("data-h"))),p=m.querySelector(c.object);i.push([m,n,o,p,p.getAttribute("data-src")])}b(g,i,c);var q=function(){b(g,i,c)};document.addEventListener?(window["flexImages_listener"+j]=q,window.removeEventListener("resize",window["flexImages_listener"+g.getAttribute("data-flex-t")]),delete window["flexImages_listener"+g.getAttribute("data-flex-t")],window.addEventListener("resize",window["flexImages_listener"+j])):g.onresize=q,g.setAttribute("data-flex-t",j)}}}}return a}();!function(){"function"==typeof define&&define.amd?define("flexImages",function(){return f}):"undefined"!=typeof module&&module.exports?module.exports=f:window.flexImages=f}(),APIResponse=function(b,d,e,i,j){var k="",l="",m=parseInt(d.getAttribute("data-row-height"))||c.row_height,n=parseInt(d.getAttribute("data-max-rows"))||c.max_rows,o=d.getAttribute("data-truncate")||c.truncate,p=d.getAttribute("data-target")||c.target,q=d.getAttribute("data-branding")||c.branding,r=d.getAttribute("data-prev")||c.prev,s=d.getAttribute("data-next")||c.next,t=d.getAttribute("data-navpos")||c.navpos;if((m<30||m>180)&&(m=170),"false"==o?o=0:"true"==o&&(o=1),"false"==q?q=0:"true"==q&&(q=1),0!=b){a[j]=b;var u=b.totalHits>i&&r&&s;(u||q)&&(k+='<div class="noselect '+c.class_name+'_nav">',q&&(k+='<div class="branding">Powered by <a href="https://pixabay.com/" target="'+p+'">Pixabay</a></div>'),u&&(k+=e>1?'<b class="'+c.class_name+'_prev">'+r+"&nbsp;</b>":"<span>"+r+"&nbsp;</span>",k+=e*i<b.totalHits?'<b class="'+c.class_name+'_next">&nbsp; '+s+"</b>":"<span>&nbsp; "+s+"</span>"),k+="</div>"),"top"==t&&(l=k);for(var v=0,w=b.hits;v<w.length;v++){var x=w[v].previewWidth,y=w[v].previewHeight,z=w[v].previewURL;m>y-10&&(x*=180/(y+1),y=180,z=z.replace("_150","__180")),l+='<div class="item" data-w="'+x+'" data-h="'+y+'"><a title="'+g(h(w[v].tags))+'" href="'+w[v].pageURL+'" target="'+p+'"><img src="https://pixabay.com/static/img/blank.gif" data-src="'+z+'"></a></div>'}"bottom"==t&&(l+=k),d.innerHTML=l}d.className.indexOf("flex_grid")<0&&(d.className+=" flex_grid"),new f({selector:d,rowHeight:m,maxRows:n,truncate:o})},document.addEventListener?document.addEventListener("click",function(a){var b=0;if(a.target.className==c.class_name+"_prev"?b=-1:a.target.className==c.class_name+"_next"&&(b=1),b){var d=j(a.target,"."+c.class_name),e=(parseInt(d.getAttribute("data-page"))||1)+b;e&&(d.setAttribute("data-page",e),l()),a.preventDefault()}}):(c.prev="",c.next=""),this.initPixabayWidget=l,/bot|crawl|spider/i.test(navigator.userAgent)||("loading"!=document.readyState?l():document.addEventListener?document.addEventListener("DOMContentLoaded",l):document.attachEvent("onreadystatechange",function(){"complete"==document.readyState&&l()}))}();
/*!
 * JavaScript Cookie v2.1.4
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */
!function(e){var n,o,t=!1;"function"==typeof define&&define.amd&&(define(e),t=!0),"object"==typeof exports&&(module.exports=e(),t=!0),t||(n=window.Cookies,(o=window.Cookies=e()).noConflict=function(){return window.Cookies=n,o})}(function(){function m(){for(var e=0,n={};e<arguments.length;e++){var o,t=arguments[e];for(o in t)n[o]=t[o]}return n}return function e(C){function g(e,n,o){var t,r;if("undefined"!=typeof document){if(1<arguments.length){"number"==typeof(o=m({path:"/"},g.defaults,o)).expires&&((r=new Date).setMilliseconds(r.getMilliseconds()+864e5*o.expires),o.expires=r),o.expires=o.expires?o.expires.toUTCString():"";try{t=JSON.stringify(n),/^[\{\[]/.test(t)&&(n=t)}catch(l){}n=C.write?C.write(n,e):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=(e=(e=encodeURIComponent(String(e))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var i,c="";for(i in o)o[i]&&(c+="; "+i,!0!==o[i])&&(c+="="+o[i]);return document.cookie=e+"="+n+c}e||(t={});for(var s=document.cookie?document.cookie.split("; "):[],f=/(%[0-9A-Z]{2})+/g,p=0;p<s.length;p++){var a=s[p].split("=");'"'===(u=a.slice(1).join("=")).charAt(0)&&(u=u.slice(1,-1));try{var d=a[0].replace(f,decodeURIComponent),u=C.read?C.read(u,d):C(u,d)||u.replace(f,decodeURIComponent);if(this.json)try{u=JSON.parse(u)}catch(l){}if(e===d){t=u;break}e||(t[d]=u)}catch(l){}}return t}}return(g.set=g).get=function(e){return g.call(g,e)},g.getJSON=function(){return g.apply({json:!0},[].slice.call(arguments))},g.defaults={},g.remove=function(e,n){g(e,"",m(n,{expires:-1}))},g.withConverter=e,g}(function(){})});
jQuery(function(s){s(".woocommerce-ordering").on("change","select.orderby",function(){s(this).closest("form").trigger("submit")}),s("input.qty:not(.product-quantity input.qty)").each(function(){var o=parseFloat(s(this).attr("min"));0<=o&&parseFloat(s(this).val())<o&&s(this).val(o)});var e="store_notice"+(s(".woocommerce-store-notice").data("noticeId")||"");"hidden"===Cookies.get(e)?s(".woocommerce-store-notice").hide():s(".woocommerce-store-notice").show(),s(".woocommerce-store-notice__dismiss-link").on("click",function(o){Cookies.set(e,"hidden",{path:"/"}),s(".woocommerce-store-notice").hide(),o.preventDefault()}),s(".woocommerce-input-wrapper span.description").length&&s(document.body).on("click",function(){s(".woocommerce-input-wrapper span.description:visible").prop("aria-hidden",!0).slideUp(250)}),s(".woocommerce-input-wrapper").on("click",function(o){o.stopPropagation()}),s(".woocommerce-input-wrapper :input").on("keydown",function(o){var e=s(this).parent().find("span.description");if(27===o.which&&e.length&&e.is(":visible"))return e.prop("aria-hidden",!0).slideUp(250),o.preventDefault(),!1}).on("click focus",function(){var o=s(this).parent(),e=o.find("span.description");o.addClass("currentTarget"),s(".woocommerce-input-wrapper:not(.currentTarget) span.description:visible").prop("aria-hidden",!0).slideUp(250),e.length&&e.is(":hidden")&&e.prop("aria-hidden",!1).slideDown(250),o.removeClass("currentTarget")}),s.scroll_to_notices=function(o){o.length&&s("html, body").animate({scrollTop:o.offset().top-100},1e3)},s('.woocommerce form .woocommerce-Input[type="password"]').wrap('<span class="password-input"></span>'),s(".woocommerce form input").filter(":password").parent("span").addClass("password-input"),s(".password-input").append('<span class="show-password-input"></span>'),s(".show-password-input").on("click",function(){s(this).hasClass("display-password")?s(this).removeClass("display-password"):s(this).addClass("display-password"),s(this).hasClass("display-password")?s(this).siblings(['input[type="password"]']).prop("type","text"):s(this).siblings('input[type="text"]').prop("type","password")})});
/*! For license information please see button.js.LICENSE.txt */
(()=>{var t={9662:(t,e,r)=>{var n=r(614),o=r(6330),i=TypeError;t.exports=function(t){if(n(t))return t;throw i(o(t)+" is not a function")}},9483:(t,e,r)=>{var n=r(4411),o=r(6330),i=TypeError;t.exports=function(t){if(n(t))return t;throw i(o(t)+" is not a constructor")}},6077:(t,e,r)=>{var n=r(614),o=String,i=TypeError;t.exports=function(t){if("object"==typeof t||n(t))return t;throw i("Can't set "+o(t)+" as a prototype")}},1223:(t,e,r)=>{var n=r(5112),o=r(30),i=r(3070).f,a=n("unscopables"),c=Array.prototype;null==c[a]&&i(c,a,{configurable:!0,value:o(null)}),t.exports=function(t){c[a][t]=!0}},1530:(t,e,r)=>{"use strict";var n=r(8710).charAt;t.exports=function(t,e,r){return e+(r?n(t,e).length:1)}},5787:(t,e,r)=>{var n=r(7976),o=TypeError;t.exports=function(t,e){if(n(e,t))return t;throw o("Incorrect invocation")}},9670:(t,e,r)=>{var n=r(111),o=String,i=TypeError;t.exports=function(t){if(n(t))return t;throw i(o(t)+" is not an object")}},7556:(t,e,r)=>{var n=r(7293);t.exports=n((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}}))},8533:(t,e,r)=>{"use strict";var n=r(2092).forEach,o=r(2133)("forEach");t.exports=o?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},8457:(t,e,r)=>{"use strict";var n=r(9974),o=r(6916),i=r(7908),a=r(3411),c=r(7659),u=r(4411),s=r(6244),l=r(6135),f=r(4121),p=r(1246),d=Array;t.exports=function(t){var e=i(t),r=u(this),h=arguments.length,y=h>1?arguments[1]:void 0,v=void 0!==y;v&&(y=n(y,h>2?arguments[2]:void 0));var m,g,b,w,x,S,_=p(e),j=0;if(!_||this===d&&c(_))for(m=s(e),g=r?new this(m):d(m);m>j;j++)S=v?y(e[j],j):e[j],l(g,j,S);else for(x=(w=f(e,_)).next,g=r?new this:[];!(b=o(x,w)).done;j++)S=v?a(w,y,[b.value,j],!0):b.value,l(g,j,S);return g.length=j,g}},1318:(t,e,r)=>{var n=r(5656),o=r(1400),i=r(6244),a=function(t){return function(e,r,a){var c,u=n(e),s=i(u),l=o(a,s);if(t&&r!=r){for(;s>l;)if((c=u[l++])!=c)return!0}else for(;s>l;l++)if((t||l in u)&&u[l]===r)return t||l||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},2092:(t,e,r)=>{var n=r(9974),o=r(1702),i=r(8361),a=r(7908),c=r(6244),u=r(5417),s=o([].push),l=function(t){var e=1==t,r=2==t,o=3==t,l=4==t,f=6==t,p=7==t,d=5==t||f;return function(h,y,v,m){for(var g,b,w=a(h),x=i(w),S=n(y,v),_=c(x),j=0,O=m||u,E=e?O(h,_):r||p?O(h,0):void 0;_>j;j++)if((d||j in x)&&(b=S(g=x[j],j,w),t))if(e)E[j]=b;else if(b)switch(t){case 3:return!0;case 5:return g;case 6:return j;case 2:s(E,g)}else switch(t){case 4:return!1;case 7:s(E,g)}return f?-1:o||l?l:E}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterReject:l(7)}},1194:(t,e,r)=>{var n=r(7293),o=r(5112),i=r(7392),a=o("species");t.exports=function(t){return i>=51||!n((function(){var e=[];return(e.constructor={})[a]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},2133:(t,e,r)=>{"use strict";var n=r(7293);t.exports=function(t,e){var r=[][t];return!!r&&n((function(){r.call(null,e||function(){return 1},1)}))}},3671:(t,e,r)=>{var n=r(9662),o=r(7908),i=r(8361),a=r(6244),c=TypeError,u=function(t){return function(e,r,u,s){n(r);var l=o(e),f=i(l),p=a(l),d=t?p-1:0,h=t?-1:1;if(u<2)for(;;){if(d in f){s=f[d],d+=h;break}if(d+=h,t?d<0:p<=d)throw c("Reduce of empty array with no initial value")}for(;t?d>=0:p>d;d+=h)d in f&&(s=r(s,f[d],d,l));return s}};t.exports={left:u(!1),right:u(!0)}},1589:(t,e,r)=>{var n=r(1400),o=r(6244),i=r(6135),a=Array,c=Math.max;t.exports=function(t,e,r){for(var u=o(t),s=n(e,u),l=n(void 0===r?u:r,u),f=a(c(l-s,0)),p=0;s<l;s++,p++)i(f,p,t[s]);return f.length=p,f}},206:(t,e,r)=>{var n=r(1702);t.exports=n([].slice)},4362:(t,e,r)=>{var n=r(1589),o=Math.floor,i=function(t,e){var r=t.length,u=o(r/2);return r<8?a(t,e):c(t,i(n(t,0,u),e),i(n(t,u),e),e)},a=function(t,e){for(var r,n,o=t.length,i=1;i<o;){for(n=i,r=t[i];n&&e(t[n-1],r)>0;)t[n]=t[--n];n!==i++&&(t[n]=r)}return t},c=function(t,e,r,n){for(var o=e.length,i=r.length,a=0,c=0;a<o||c<i;)t[a+c]=a<o&&c<i?n(e[a],r[c])<=0?e[a++]:r[c++]:a<o?e[a++]:r[c++];return t};t.exports=i},7475:(t,e,r)=>{var n=r(3157),o=r(4411),i=r(111),a=r(5112)("species"),c=Array;t.exports=function(t){var e;return n(t)&&(e=t.constructor,(o(e)&&(e===c||n(e.prototype))||i(e)&&null===(e=e[a]))&&(e=void 0)),void 0===e?c:e}},5417:(t,e,r)=>{var n=r(7475);t.exports=function(t,e){return new(n(t))(0===e?0:e)}},3411:(t,e,r)=>{var n=r(9670),o=r(9212);t.exports=function(t,e,r,i){try{return i?e(n(r)[0],r[1]):e(r)}catch(e){o(t,"throw",e)}}},7072:(t,e,r)=>{var n=r(5112)("iterator"),o=!1;try{var i=0,a={next:function(){return{done:!!i++}},return:function(){o=!0}};a[n]=function(){return this},Array.from(a,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!o)return!1;var r=!1;try{var i={};i[n]=function(){return{next:function(){return{done:r=!0}}}},t(i)}catch(t){}return r}},4326:(t,e,r)=>{var n=r(1702),o=n({}.toString),i=n("".slice);t.exports=function(t){return i(o(t),8,-1)}},648:(t,e,r)=>{var n=r(1694),o=r(614),i=r(4326),a=r(5112)("toStringTag"),c=Object,u="Arguments"==i(function(){return arguments}());t.exports=n?i:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=c(t),a))?r:u?i(e):"Object"==(n=i(e))&&o(e.callee)?"Arguments":n}},5631:(t,e,r)=>{"use strict";var n=r(3070).f,o=r(30),i=r(9190),a=r(9974),c=r(5787),u=r(8554),s=r(408),l=r(1656),f=r(6340),p=r(9781),d=r(2423).fastKey,h=r(9909),y=h.set,v=h.getterFor;t.exports={getConstructor:function(t,e,r,l){var f=t((function(t,n){c(t,h),y(t,{type:e,index:o(null),first:void 0,last:void 0,size:0}),p||(t.size=0),u(n)||s(n,t[l],{that:t,AS_ENTRIES:r})})),h=f.prototype,m=v(e),g=function(t,e,r){var n,o,i=m(t),a=b(t,e);return a?a.value=r:(i.last=a={index:o=d(e,!0),key:e,value:r,previous:n=i.last,next:void 0,removed:!1},i.first||(i.first=a),n&&(n.next=a),p?i.size++:t.size++,"F"!==o&&(i.index[o]=a)),t},b=function(t,e){var r,n=m(t),o=d(e);if("F"!==o)return n.index[o];for(r=n.first;r;r=r.next)if(r.key==e)return r};return i(h,{clear:function(){for(var t=m(this),e=t.index,r=t.first;r;)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete e[r.index],r=r.next;t.first=t.last=void 0,p?t.size=0:this.size=0},delete:function(t){var e=this,r=m(e),n=b(e,t);if(n){var o=n.next,i=n.previous;delete r.index[n.index],n.removed=!0,i&&(i.next=o),o&&(o.previous=i),r.first==n&&(r.first=o),r.last==n&&(r.last=i),p?r.size--:e.size--}return!!n},forEach:function(t){for(var e,r=m(this),n=a(t,arguments.length>1?arguments[1]:void 0);e=e?e.next:r.first;)for(n(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!b(this,t)}}),i(h,r?{get:function(t){var e=b(this,t);return e&&e.value},set:function(t,e){return g(this,0===t?0:t,e)}}:{add:function(t){return g(this,t=0===t?0:t,t)}}),p&&n(h,"size",{get:function(){return m(this).size}}),f},setStrong:function(t,e,r){var n=e+" Iterator",o=v(e),i=v(n);l(t,e,(function(t,e){y(this,{type:n,target:t,state:o(t),kind:e,last:void 0})}),(function(){for(var t=i(this),e=t.kind,r=t.last;r&&r.removed;)r=r.previous;return t.target&&(t.last=r=r?r.next:t.state.first)?"keys"==e?{value:r.key,done:!1}:"values"==e?{value:r.value,done:!1}:{value:[r.key,r.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),r?"entries":"values",!r,!0),f(e)}}},7710:(t,e,r)=>{"use strict";var n=r(2109),o=r(7854),i=r(1702),a=r(4705),c=r(8052),u=r(2423),s=r(408),l=r(5787),f=r(614),p=r(8554),d=r(111),h=r(7293),y=r(7072),v=r(8003),m=r(9587);t.exports=function(t,e,r){var g=-1!==t.indexOf("Map"),b=-1!==t.indexOf("Weak"),w=g?"set":"add",x=o[t],S=x&&x.prototype,_=x,j={},O=function(t){var e=i(S[t]);c(S,t,"add"==t?function(t){return e(this,0===t?0:t),this}:"delete"==t?function(t){return!(b&&!d(t))&&e(this,0===t?0:t)}:"get"==t?function(t){return b&&!d(t)?void 0:e(this,0===t?0:t)}:"has"==t?function(t){return!(b&&!d(t))&&e(this,0===t?0:t)}:function(t,r){return e(this,0===t?0:t,r),this})};if(a(t,!f(x)||!(b||S.forEach&&!h((function(){(new x).entries().next()})))))_=r.getConstructor(e,t,g,w),u.enable();else if(a(t,!0)){var E=new _,P=E[w](b?{}:-0,1)!=E,k=h((function(){E.has(1)})),C=y((function(t){new x(t)})),A=!b&&h((function(){for(var t=new x,e=5;e--;)t[w](e,e);return!t.has(-0)}));C||((_=e((function(t,e){l(t,S);var r=m(new x,t,_);return p(e)||s(e,r[w],{that:r,AS_ENTRIES:g}),r}))).prototype=S,S.constructor=_),(k||A)&&(O("delete"),O("has"),g&&O("get")),(A||P)&&O(w),b&&S.clear&&delete S.clear}return j[t]=_,n({global:!0,constructor:!0,forced:_!=x},j),v(_,t),b||r.setStrong(_,t,g),_}},9920:(t,e,r)=>{var n=r(2597),o=r(3887),i=r(1236),a=r(3070);t.exports=function(t,e,r){for(var c=o(e),u=a.f,s=i.f,l=0;l<c.length;l++){var f=c[l];n(t,f)||r&&n(r,f)||u(t,f,s(e,f))}}},4964:(t,e,r)=>{var n=r(5112)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[n]=!1,"/./"[t](e)}catch(t){}}return!1}},8544:(t,e,r)=>{var n=r(7293);t.exports=!n((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},8880:(t,e,r)=>{var n=r(9781),o=r(3070),i=r(9114);t.exports=n?function(t,e,r){return o.f(t,e,i(1,r))}:function(t,e,r){return t[e]=r,t}},9114:t=>{t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},6135:(t,e,r)=>{"use strict";var n=r(4948),o=r(3070),i=r(9114);t.exports=function(t,e,r){var a=n(e);a in t?o.f(t,a,i(0,r)):t[a]=r}},8052:(t,e,r)=>{var n=r(614),o=r(3070),i=r(6339),a=r(3072);t.exports=function(t,e,r,c){c||(c={});var u=c.enumerable,s=void 0!==c.name?c.name:e;if(n(r)&&i(r,s,c),c.global)u?t[e]=r:a(e,r);else{try{c.unsafe?t[e]&&(u=!0):delete t[e]}catch(t){}u?t[e]=r:o.f(t,e,{value:r,enumerable:!1,configurable:!c.nonConfigurable,writable:!c.nonWritable})}return t}},9190:(t,e,r)=>{var n=r(8052);t.exports=function(t,e,r){for(var o in e)n(t,o,e[o],r);return t}},3072:(t,e,r)=>{var n=r(7854),o=Object.defineProperty;t.exports=function(t,e){try{o(n,t,{value:e,configurable:!0,writable:!0})}catch(r){n[t]=e}return e}},9781:(t,e,r)=>{var n=r(7293);t.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},317:(t,e,r)=>{var n=r(7854),o=r(111),i=n.document,a=o(i)&&o(i.createElement);t.exports=function(t){return a?i.createElement(t):{}}},7207:t=>{var e=TypeError;t.exports=function(t){if(t>9007199254740991)throw e("Maximum allowed index exceeded");return t}},8324:t=>{t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8509:(t,e,r)=>{var n=r(317)("span").classList,o=n&&n.constructor&&n.constructor.prototype;t.exports=o===Object.prototype?void 0:o},7871:(t,e,r)=>{var n=r(3823),o=r(5268);t.exports=!n&&!o&&"object"==typeof window&&"object"==typeof document},3823:t=>{t.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},1528:(t,e,r)=>{var n=r(8113),o=r(7854);t.exports=/ipad|iphone|ipod/i.test(n)&&void 0!==o.Pebble},6833:(t,e,r)=>{var n=r(8113);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(n)},5268:(t,e,r)=>{var n=r(4326),o=r(7854);t.exports="process"==n(o.process)},1036:(t,e,r)=>{var n=r(8113);t.exports=/web0s(?!.*chrome)/i.test(n)},8113:(t,e,r)=>{var n=r(5005);t.exports=n("navigator","userAgent")||""},7392:(t,e,r)=>{var n,o,i=r(7854),a=r(8113),c=i.process,u=i.Deno,s=c&&c.versions||u&&u.version,l=s&&s.v8;l&&(o=(n=l.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!o&&a&&(!(n=a.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/))&&(o=+n[1]),t.exports=o},748:t=>{t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},1060:(t,e,r)=>{var n=r(1702),o=Error,i=n("".replace),a=String(o("zxcasd").stack),c=/\n\s*at [^:]*:[^\n]*/,u=c.test(a);t.exports=function(t,e){if(u&&"string"==typeof t&&!o.prepareStackTrace)for(;e--;)t=i(t,c,"");return t}},2914:(t,e,r)=>{var n=r(7293),o=r(9114);t.exports=!n((function(){var t=Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",o(1,7)),7!==t.stack)}))},2109:(t,e,r)=>{var n=r(7854),o=r(1236).f,i=r(8880),a=r(8052),c=r(3072),u=r(9920),s=r(4705);t.exports=function(t,e){var r,l,f,p,d,h=t.target,y=t.global,v=t.stat;if(r=y?n:v?n[h]||c(h,{}):(n[h]||{}).prototype)for(l in e){if(p=e[l],f=t.dontCallGetSet?(d=o(r,l))&&d.value:r[l],!s(y?l:h+(v?".":"#")+l,t.forced)&&void 0!==f){if(typeof p==typeof f)continue;u(p,f)}(t.sham||f&&f.sham)&&i(p,"sham",!0),a(r,l,p,t)}}},7293:t=>{t.exports=function(t){try{return!!t()}catch(t){return!0}}},7007:(t,e,r)=>{"use strict";r(4916);var n=r(1702),o=r(8052),i=r(2261),a=r(7293),c=r(5112),u=r(8880),s=c("species"),l=RegExp.prototype;t.exports=function(t,e,r,f){var p=c(t),d=!a((function(){var e={};return e[p]=function(){return 7},7!=""[t](e)})),h=d&&!a((function(){var e=!1,r=/a/;return"split"===t&&((r={}).constructor={},r.constructor[s]=function(){return r},r.flags="",r[p]=/./[p]),r.exec=function(){return e=!0,null},r[p](""),!e}));if(!d||!h||r){var y=n(/./[p]),v=e(p,""[t],(function(t,e,r,o,a){var c=n(t),u=e.exec;return u===i||u===l.exec?d&&!a?{done:!0,value:y(e,r,o)}:{done:!0,value:c(r,e,o)}:{done:!1}}));o(String.prototype,t,v[0]),o(l,p,v[1])}f&&u(l[p],"sham",!0)}},6677:(t,e,r)=>{var n=r(7293);t.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},2104:(t,e,r)=>{var n=r(4374),o=Function.prototype,i=o.apply,a=o.call;t.exports="object"==typeof Reflect&&Reflect.apply||(n?a.bind(i):function(){return a.apply(i,arguments)})},9974:(t,e,r)=>{var n=r(1702),o=r(9662),i=r(4374),a=n(n.bind);t.exports=function(t,e){return o(t),void 0===e?t:i?a(t,e):function(){return t.apply(e,arguments)}}},4374:(t,e,r)=>{var n=r(7293);t.exports=!n((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},7065:(t,e,r)=>{"use strict";var n=r(1702),o=r(9662),i=r(111),a=r(2597),c=r(206),u=r(4374),s=Function,l=n([].concat),f=n([].join),p={},d=function(t,e,r){if(!a(p,e)){for(var n=[],o=0;o<e;o++)n[o]="a["+o+"]";p[e]=s("C,a","return new C("+f(n,",")+")")}return p[e](t,r)};t.exports=u?s.bind:function(t){var e=o(this),r=e.prototype,n=c(arguments,1),a=function(){var r=l(n,c(arguments));return this instanceof a?d(e,r.length,r):e.apply(t,r)};return i(r)&&(a.prototype=r),a}},6916:(t,e,r)=>{var n=r(4374),o=Function.prototype.call;t.exports=n?o.bind(o):function(){return o.apply(o,arguments)}},6530:(t,e,r)=>{var n=r(9781),o=r(2597),i=Function.prototype,a=n&&Object.getOwnPropertyDescriptor,c=o(i,"name"),u=c&&"something"===function(){}.name,s=c&&(!n||n&&a(i,"name").configurable);t.exports={EXISTS:c,PROPER:u,CONFIGURABLE:s}},1702:(t,e,r)=>{var n=r(4374),o=Function.prototype,i=o.bind,a=o.call,c=n&&i.bind(a,a);t.exports=n?function(t){return t&&c(t)}:function(t){return t&&function(){return a.apply(t,arguments)}}},5005:(t,e,r)=>{var n=r(7854),o=r(614),i=function(t){return o(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?i(n[t]):n[t]&&n[t][e]}},1246:(t,e,r)=>{var n=r(648),o=r(8173),i=r(8554),a=r(7497),c=r(5112)("iterator");t.exports=function(t){if(!i(t))return o(t,c)||o(t,"@@iterator")||a[n(t)]}},4121:(t,e,r)=>{var n=r(6916),o=r(9662),i=r(9670),a=r(6330),c=r(1246),u=TypeError;t.exports=function(t,e){var r=arguments.length<2?c(t):e;if(o(r))return i(n(r,t));throw u(a(t)+" is not iterable")}},8173:(t,e,r)=>{var n=r(9662),o=r(8554);t.exports=function(t,e){var r=t[e];return o(r)?void 0:n(r)}},647:(t,e,r)=>{var n=r(1702),o=r(7908),i=Math.floor,a=n("".charAt),c=n("".replace),u=n("".slice),s=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,l=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,r,n,f,p){var d=r+t.length,h=n.length,y=l;return void 0!==f&&(f=o(f),y=s),c(p,y,(function(o,c){var s;switch(a(c,0)){case"$":return"$";case"&":return t;case"`":return u(e,0,r);case"'":return u(e,d);case"<":s=f[u(c,1,-1)];break;default:var l=+c;if(0===l)return o;if(l>h){var p=i(l/10);return 0===p?o:p<=h?void 0===n[p-1]?a(c,1):n[p-1]+a(c,1):o}s=n[l-1]}return void 0===s?"":s}))}},7854:(t,e,r)=>{var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||function(){return this}()||Function("return this")()},2597:(t,e,r)=>{var n=r(1702),o=r(7908),i=n({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return i(o(t),e)}},3501:t=>{t.exports={}},842:(t,e,r)=>{var n=r(7854);t.exports=function(t,e){var r=n.console;r&&r.error&&(1==arguments.length?r.error(t):r.error(t,e))}},490:(t,e,r)=>{var n=r(5005);t.exports=n("document","documentElement")},4664:(t,e,r)=>{var n=r(9781),o=r(7293),i=r(317);t.exports=!n&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},8361:(t,e,r)=>{var n=r(1702),o=r(7293),i=r(4326),a=Object,c=n("".split);t.exports=o((function(){return!a("z").propertyIsEnumerable(0)}))?function(t){return"String"==i(t)?c(t,""):a(t)}:a},9587:(t,e,r)=>{var n=r(614),o=r(111),i=r(7674);t.exports=function(t,e,r){var a,c;return i&&n(a=e.constructor)&&a!==r&&o(c=a.prototype)&&c!==r.prototype&&i(t,c),t}},2788:(t,e,r)=>{var n=r(1702),o=r(614),i=r(5465),a=n(Function.toString);o(i.inspectSource)||(i.inspectSource=function(t){return a(t)}),t.exports=i.inspectSource},8340:(t,e,r)=>{var n=r(111),o=r(8880);t.exports=function(t,e){n(e)&&"cause"in e&&o(t,"cause",e.cause)}},2423:(t,e,r)=>{var n=r(2109),o=r(1702),i=r(3501),a=r(111),c=r(2597),u=r(3070).f,s=r(8006),l=r(1156),f=r(2050),p=r(9711),d=r(6677),h=!1,y=p("meta"),v=0,m=function(t){u(t,y,{value:{objectID:"O"+v++,weakData:{}}})},g=t.exports={enable:function(){g.enable=function(){},h=!0;var t=s.f,e=o([].splice),r={};r[y]=1,t(r).length&&(s.f=function(r){for(var n=t(r),o=0,i=n.length;o<i;o++)if(n[o]===y){e(n,o,1);break}return n},n({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:l.f}))},fastKey:function(t,e){if(!a(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!c(t,y)){if(!f(t))return"F";if(!e)return"E";m(t)}return t[y].objectID},getWeakData:function(t,e){if(!c(t,y)){if(!f(t))return!0;if(!e)return!1;m(t)}return t[y].weakData},onFreeze:function(t){return d&&h&&f(t)&&!c(t,y)&&m(t),t}};i[y]=!0},9909:(t,e,r)=>{var n,o,i,a=r(4811),c=r(7854),u=r(1702),s=r(111),l=r(8880),f=r(2597),p=r(5465),d=r(6200),h=r(3501),y="Object already initialized",v=c.TypeError,m=c.WeakMap;if(a||p.state){var g=p.state||(p.state=new m),b=u(g.get),w=u(g.has),x=u(g.set);n=function(t,e){if(w(g,t))throw v(y);return e.facade=t,x(g,t,e),e},o=function(t){return b(g,t)||{}},i=function(t){return w(g,t)}}else{var S=d("state");h[S]=!0,n=function(t,e){if(f(t,S))throw v(y);return e.facade=t,l(t,S,e),e},o=function(t){return f(t,S)?t[S]:{}},i=function(t){return f(t,S)}}t.exports={set:n,get:o,has:i,enforce:function(t){return i(t)?o(t):n(t,{})},getterFor:function(t){return function(e){var r;if(!s(e)||(r=o(e)).type!==t)throw v("Incompatible receiver, "+t+" required");return r}}}},7659:(t,e,r)=>{var n=r(5112),o=r(7497),i=n("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||a[i]===t)}},3157:(t,e,r)=>{var n=r(4326);t.exports=Array.isArray||function(t){return"Array"==n(t)}},614:t=>{t.exports=function(t){return"function"==typeof t}},4411:(t,e,r)=>{var n=r(1702),o=r(7293),i=r(614),a=r(648),c=r(5005),u=r(2788),s=function(){},l=[],f=c("Reflect","construct"),p=/^\s*(?:class|function)\b/,d=n(p.exec),h=!p.exec(s),y=function(t){if(!i(t))return!1;try{return f(s,l,t),!0}catch(t){return!1}},v=function(t){if(!i(t))return!1;switch(a(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return h||!!d(p,u(t))}catch(t){return!0}};v.sham=!0,t.exports=!f||o((function(){var t;return y(y.call)||!y(Object)||!y((function(){t=!0}))||t}))?v:y},5032:(t,e,r)=>{var n=r(2597);t.exports=function(t){return void 0!==t&&(n(t,"value")||n(t,"writable"))}},4705:(t,e,r)=>{var n=r(7293),o=r(614),i=/#|\.prototype\./,a=function(t,e){var r=u[c(t)];return r==l||r!=s&&(o(e)?n(e):!!e)},c=a.normalize=function(t){return String(t).replace(i,".").toLowerCase()},u=a.data={},s=a.NATIVE="N",l=a.POLYFILL="P";t.exports=a},8554:t=>{t.exports=function(t){return null==t}},111:(t,e,r)=>{var n=r(614),o="object"==typeof document&&document.all,i=void 0===o&&void 0!==o;t.exports=i?function(t){return"object"==typeof t?null!==t:n(t)||t===o}:function(t){return"object"==typeof t?null!==t:n(t)}},1913:t=>{t.exports=!1},7850:(t,e,r)=>{var n=r(111),o=r(4326),i=r(5112)("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[i])?!!e:"RegExp"==o(t))}},2190:(t,e,r)=>{var n=r(5005),o=r(614),i=r(7976),a=r(3307),c=Object;t.exports=a?function(t){return"symbol"==typeof t}:function(t){var e=n("Symbol");return o(e)&&i(e.prototype,c(t))}},408:(t,e,r)=>{var n=r(9974),o=r(6916),i=r(9670),a=r(6330),c=r(7659),u=r(6244),s=r(7976),l=r(4121),f=r(1246),p=r(9212),d=TypeError,h=function(t,e){this.stopped=t,this.result=e},y=h.prototype;t.exports=function(t,e,r){var v,m,g,b,w,x,S,_=r&&r.that,j=!(!r||!r.AS_ENTRIES),O=!(!r||!r.IS_RECORD),E=!(!r||!r.IS_ITERATOR),P=!(!r||!r.INTERRUPTED),k=n(e,_),C=function(t){return v&&p(v,"normal",t),new h(!0,t)},A=function(t){return j?(i(t),P?k(t[0],t[1],C):k(t[0],t[1])):P?k(t,C):k(t)};if(O)v=t.iterator;else if(E)v=t;else{if(!(m=f(t)))throw d(a(t)+" is not iterable");if(c(m)){for(g=0,b=u(t);b>g;g++)if((w=A(t[g]))&&s(y,w))return w;return new h(!1)}v=l(t,m)}for(x=O?t.next:v.next;!(S=o(x,v)).done;){try{w=A(S.value)}catch(t){p(v,"throw",t)}if("object"==typeof w&&w&&s(y,w))return w}return new h(!1)}},9212:(t,e,r)=>{var n=r(6916),o=r(9670),i=r(8173);t.exports=function(t,e,r){var a,c;o(t);try{if(!(a=i(t,"return"))){if("throw"===e)throw r;return r}a=n(a,t)}catch(t){c=!0,a=t}if("throw"===e)throw r;if(c)throw a;return o(a),r}},3061:(t,e,r)=>{"use strict";var n=r(3383).IteratorPrototype,o=r(30),i=r(9114),a=r(8003),c=r(7497),u=function(){return this};t.exports=function(t,e,r,s){var l=e+" Iterator";return t.prototype=o(n,{next:i(+!s,r)}),a(t,l,!1,!0),c[l]=u,t}},1656:(t,e,r)=>{"use strict";var n=r(2109),o=r(6916),i=r(1913),a=r(6530),c=r(614),u=r(3061),s=r(9518),l=r(7674),f=r(8003),p=r(8880),d=r(8052),h=r(5112),y=r(7497),v=r(3383),m=a.PROPER,g=a.CONFIGURABLE,b=v.IteratorPrototype,w=v.BUGGY_SAFARI_ITERATORS,x=h("iterator"),S="keys",_="values",j="entries",O=function(){return this};t.exports=function(t,e,r,a,h,v,E){u(r,e,a);var P,k,C,A=function(t){if(t===h&&F)return F;if(!w&&t in I)return I[t];switch(t){case S:case _:case j:return function(){return new r(this,t)}}return function(){return new r(this)}},L=e+" Iterator",T=!1,I=t.prototype,R=I[x]||I["@@iterator"]||h&&I[h],F=!w&&R||A(h),N="Array"==e&&I.entries||R;if(N&&(P=s(N.call(new t)))!==Object.prototype&&P.next&&(i||s(P)===b||(l?l(P,b):c(P[x])||d(P,x,O)),f(P,L,!0,!0),i&&(y[L]=O)),m&&h==_&&R&&R.name!==_&&(!i&&g?p(I,"name",_):(T=!0,F=function(){return o(R,this)})),h)if(k={values:A(_),keys:v?F:A(S),entries:A(j)},E)for(C in k)(w||T||!(C in I))&&d(I,C,k[C]);else n({target:e,proto:!0,forced:w||T},k);return i&&!E||I[x]===F||d(I,x,F,{name:h}),y[e]=F,k}},3383:(t,e,r)=>{"use strict";var n,o,i,a=r(7293),c=r(614),u=r(111),s=r(30),l=r(9518),f=r(8052),p=r(5112),d=r(1913),h=p("iterator"),y=!1;[].keys&&("next"in(i=[].keys())?(o=l(l(i)))!==Object.prototype&&(n=o):y=!0),!u(n)||a((function(){var t={};return n[h].call(t)!==t}))?n={}:d&&(n=s(n)),c(n[h])||f(n,h,(function(){return this})),t.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:y}},7497:t=>{t.exports={}},6244:(t,e,r)=>{var n=r(7466);t.exports=function(t){return n(t.length)}},6339:(t,e,r)=>{var n=r(7293),o=r(614),i=r(2597),a=r(9781),c=r(6530).CONFIGURABLE,u=r(2788),s=r(9909),l=s.enforce,f=s.get,p=Object.defineProperty,d=a&&!n((function(){return 8!==p((function(){}),"length",{value:8}).length})),h=String(String).split("String"),y=t.exports=function(t,e,r){"Symbol("===String(e).slice(0,7)&&(e="["+String(e).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),r&&r.getter&&(e="get "+e),r&&r.setter&&(e="set "+e),(!i(t,"name")||c&&t.name!==e)&&(a?p(t,"name",{value:e,configurable:!0}):t.name=e),d&&r&&i(r,"arity")&&t.length!==r.arity&&p(t,"length",{value:r.arity});try{r&&i(r,"constructor")&&r.constructor?a&&p(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var n=l(t);return i(n,"source")||(n.source=h.join("string"==typeof e?e:"")),t};Function.prototype.toString=y((function(){return o(this)&&f(this).source||u(this)}),"toString")},4758:t=>{var e=Math.ceil,r=Math.floor;t.exports=Math.trunc||function(t){var n=+t;return(n>0?r:e)(n)}},5948:(t,e,r)=>{var n,o,i,a,c,u,s,l,f=r(7854),p=r(9974),d=r(1236).f,h=r(261).set,y=r(6833),v=r(1528),m=r(1036),g=r(5268),b=f.MutationObserver||f.WebKitMutationObserver,w=f.document,x=f.process,S=f.Promise,_=d(f,"queueMicrotask"),j=_&&_.value;j||(n=function(){var t,e;for(g&&(t=x.domain)&&t.exit();o;){e=o.fn,o=o.next;try{e()}catch(t){throw o?a():i=void 0,t}}i=void 0,t&&t.enter()},y||g||m||!b||!w?!v&&S&&S.resolve?((s=S.resolve(void 0)).constructor=S,l=p(s.then,s),a=function(){l(n)}):g?a=function(){x.nextTick(n)}:(h=p(h,f),a=function(){h(n)}):(c=!0,u=w.createTextNode(""),new b(n).observe(u,{characterData:!0}),a=function(){u.data=c=!c})),t.exports=j||function(t){var e={fn:t,next:void 0};i&&(i.next=e),o||(o=e,a()),i=e}},8523:(t,e,r)=>{"use strict";var n=r(9662),o=TypeError,i=function(t){var e,r;this.promise=new t((function(t,n){if(void 0!==e||void 0!==r)throw o("Bad Promise constructor");e=t,r=n})),this.resolve=n(e),this.reject=n(r)};t.exports.f=function(t){return new i(t)}},6277:(t,e,r)=>{var n=r(1340);t.exports=function(t,e){return void 0===t?arguments.length<2?"":e:n(t)}},3929:(t,e,r)=>{var n=r(7850),o=TypeError;t.exports=function(t){if(n(t))throw o("The method doesn't accept regular expressions");return t}},2814:(t,e,r)=>{var n=r(7854),o=r(7293),i=r(1702),a=r(1340),c=r(3111).trim,u=r(1361),s=i("".charAt),l=n.parseFloat,f=n.Symbol,p=f&&f.iterator,d=1/l(u+"-0")!=-1/0||p&&!o((function(){l(Object(p))}));t.exports=d?function(t){var e=c(a(t)),r=l(e);return 0===r&&"-"==s(e,0)?-0:r}:l},3009:(t,e,r)=>{var n=r(7854),o=r(7293),i=r(1702),a=r(1340),c=r(3111).trim,u=r(1361),s=n.parseInt,l=n.Symbol,f=l&&l.iterator,p=/^[+-]?0x/i,d=i(p.exec),h=8!==s(u+"08")||22!==s(u+"0x16")||f&&!o((function(){s(Object(f))}));t.exports=h?function(t,e){var r=c(a(t));return s(r,e>>>0||(d(p,r)?16:10))}:s},30:(t,e,r)=>{var n,o=r(9670),i=r(6048),a=r(748),c=r(3501),u=r(490),s=r(317),l=r(6200)("IE_PROTO"),f=function(){},p=function(t){return"<script>"+t+"<\/script>"},d=function(t){t.write(p("")),t.close();var e=t.parentWindow.Object;return t=null,e},h=function(){try{n=new ActiveXObject("htmlfile")}catch(t){}var t,e;h="undefined"!=typeof document?document.domain&&n?d(n):((e=s("iframe")).style.display="none",u.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(p("document.F=Object")),t.close(),t.F):d(n);for(var r=a.length;r--;)delete h.prototype[a[r]];return h()};c[l]=!0,t.exports=Object.create||function(t,e){var r;return null!==t?(f.prototype=o(t),r=new f,f.prototype=null,r[l]=t):r=h(),void 0===e?r:i.f(r,e)}},6048:(t,e,r)=>{var n=r(9781),o=r(3353),i=r(3070),a=r(9670),c=r(5656),u=r(1956);e.f=n&&!o?Object.defineProperties:function(t,e){a(t);for(var r,n=c(e),o=u(e),s=o.length,l=0;s>l;)i.f(t,r=o[l++],n[r]);return t}},3070:(t,e,r)=>{var n=r(9781),o=r(4664),i=r(3353),a=r(9670),c=r(4948),u=TypeError,s=Object.defineProperty,l=Object.getOwnPropertyDescriptor;e.f=n?i?function(t,e,r){if(a(t),e=c(e),a(r),"function"==typeof t&&"prototype"===e&&"value"in r&&"writable"in r&&!r.writable){var n=l(t,e);n&&n.writable&&(t[e]=r.value,r={configurable:"configurable"in r?r.configurable:n.configurable,enumerable:"enumerable"in r?r.enumerable:n.enumerable,writable:!1})}return s(t,e,r)}:s:function(t,e,r){if(a(t),e=c(e),a(r),o)try{return s(t,e,r)}catch(t){}if("get"in r||"set"in r)throw u("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},1236:(t,e,r)=>{var n=r(9781),o=r(6916),i=r(5296),a=r(9114),c=r(5656),u=r(4948),s=r(2597),l=r(4664),f=Object.getOwnPropertyDescriptor;e.f=n?f:function(t,e){if(t=c(t),e=u(e),l)try{return f(t,e)}catch(t){}if(s(t,e))return a(!o(i.f,t,e),t[e])}},1156:(t,e,r)=>{var n=r(4326),o=r(5656),i=r(8006).f,a=r(1589),c="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return c&&"Window"==n(t)?function(t){try{return i(t)}catch(t){return a(c)}}(t):i(o(t))}},8006:(t,e,r)=>{var n=r(6324),o=r(748).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,o)}},5181:(t,e)=>{e.f=Object.getOwnPropertySymbols},9518:(t,e,r)=>{var n=r(2597),o=r(614),i=r(7908),a=r(6200),c=r(8544),u=a("IE_PROTO"),s=Object,l=s.prototype;t.exports=c?s.getPrototypeOf:function(t){var e=i(t);if(n(e,u))return e[u];var r=e.constructor;return o(r)&&e instanceof r?r.prototype:e instanceof s?l:null}},2050:(t,e,r)=>{var n=r(7293),o=r(111),i=r(4326),a=r(7556),c=Object.isExtensible,u=n((function(){c(1)}));t.exports=u||a?function(t){return!!o(t)&&(!a||"ArrayBuffer"!=i(t))&&(!c||c(t))}:c},7976:(t,e,r)=>{var n=r(1702);t.exports=n({}.isPrototypeOf)},6324:(t,e,r)=>{var n=r(1702),o=r(2597),i=r(5656),a=r(1318).indexOf,c=r(3501),u=n([].push);t.exports=function(t,e){var r,n=i(t),s=0,l=[];for(r in n)!o(c,r)&&o(n,r)&&u(l,r);for(;e.length>s;)o(n,r=e[s++])&&(~a(l,r)||u(l,r));return l}},1956:(t,e,r)=>{var n=r(6324),o=r(748);t.exports=Object.keys||function(t){return n(t,o)}},5296:(t,e)=>{"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,o=n&&!r.call({1:2},1);e.f=o?function(t){var e=n(this,t);return!!e&&e.enumerable}:r},7674:(t,e,r)=>{var n=r(1702),o=r(9670),i=r(6077);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=n(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(r,[]),e=r instanceof Array}catch(t){}return function(r,n){return o(r),i(n),e?t(r,n):r.__proto__=n,r}}():void 0)},4699:(t,e,r)=>{var n=r(9781),o=r(1702),i=r(1956),a=r(5656),c=o(r(5296).f),u=o([].push),s=function(t){return function(e){for(var r,o=a(e),s=i(o),l=s.length,f=0,p=[];l>f;)r=s[f++],n&&!c(o,r)||u(p,t?[r,o[r]]:o[r]);return p}};t.exports={entries:s(!0),values:s(!1)}},288:(t,e,r)=>{"use strict";var n=r(1694),o=r(648);t.exports=n?{}.toString:function(){return"[object "+o(this)+"]"}},2140:(t,e,r)=>{var n=r(6916),o=r(614),i=r(111),a=TypeError;t.exports=function(t,e){var r,c;if("string"===e&&o(r=t.toString)&&!i(c=n(r,t)))return c;if(o(r=t.valueOf)&&!i(c=n(r,t)))return c;if("string"!==e&&o(r=t.toString)&&!i(c=n(r,t)))return c;throw a("Can't convert object to primitive value")}},3887:(t,e,r)=>{var n=r(5005),o=r(1702),i=r(8006),a=r(5181),c=r(9670),u=o([].concat);t.exports=n("Reflect","ownKeys")||function(t){var e=i.f(c(t)),r=a.f;return r?u(e,r(t)):e}},857:(t,e,r)=>{var n=r(7854);t.exports=n},2534:t=>{t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},3702:(t,e,r)=>{var n=r(7854),o=r(2492),i=r(614),a=r(4705),c=r(2788),u=r(5112),s=r(7871),l=r(3823),f=r(1913),p=r(7392),d=o&&o.prototype,h=u("species"),y=!1,v=i(n.PromiseRejectionEvent),m=a("Promise",(function(){var t=c(o),e=t!==String(o);if(!e&&66===p)return!0;if(f&&(!d.catch||!d.finally))return!0;if(!p||p<51||!/native code/.test(t)){var r=new o((function(t){t(1)})),n=function(t){t((function(){}),(function(){}))};if((r.constructor={})[h]=n,!(y=r.then((function(){}))instanceof n))return!0}return!e&&(s||l)&&!v}));t.exports={CONSTRUCTOR:m,REJECTION_EVENT:v,SUBCLASSING:y}},2492:(t,e,r)=>{var n=r(7854);t.exports=n.Promise},9478:(t,e,r)=>{var n=r(9670),o=r(111),i=r(8523);t.exports=function(t,e){if(n(t),o(e)&&e.constructor===t)return e;var r=i.f(t);return(0,r.resolve)(e),r.promise}},612:(t,e,r)=>{var n=r(2492),o=r(7072),i=r(3702).CONSTRUCTOR;t.exports=i||!o((function(t){n.all(t).then(void 0,(function(){}))}))},2626:(t,e,r)=>{var n=r(3070).f;t.exports=function(t,e,r){r in t||n(t,r,{configurable:!0,get:function(){return e[r]},set:function(t){e[r]=t}})}},8572:t=>{var e=function(){this.head=null,this.tail=null};e.prototype={add:function(t){var e={item:t,next:null};this.head?this.tail.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return this.head=t.next,this.tail===t&&(this.tail=null),t.item}},t.exports=e},7651:(t,e,r)=>{var n=r(6916),o=r(9670),i=r(614),a=r(4326),c=r(2261),u=TypeError;t.exports=function(t,e){var r=t.exec;if(i(r)){var s=n(r,t,e);return null!==s&&o(s),s}if("RegExp"===a(t))return n(c,t,e);throw u("RegExp#exec called on incompatible receiver")}},2261:(t,e,r)=>{"use strict";var n,o,i=r(6916),a=r(1702),c=r(1340),u=r(7066),s=r(2999),l=r(2309),f=r(30),p=r(9909).get,d=r(9441),h=r(7168),y=l("native-string-replace",String.prototype.replace),v=RegExp.prototype.exec,m=v,g=a("".charAt),b=a("".indexOf),w=a("".replace),x=a("".slice),S=(o=/b*/g,i(v,n=/a/,"a"),i(v,o,"a"),0!==n.lastIndex||0!==o.lastIndex),_=s.BROKEN_CARET,j=void 0!==/()??/.exec("")[1];(S||j||_||d||h)&&(m=function(t){var e,r,n,o,a,s,l,d=this,h=p(d),O=c(t),E=h.raw;if(E)return E.lastIndex=d.lastIndex,e=i(m,E,O),d.lastIndex=E.lastIndex,e;var P=h.groups,k=_&&d.sticky,C=i(u,d),A=d.source,L=0,T=O;if(k&&(C=w(C,"y",""),-1===b(C,"g")&&(C+="g"),T=x(O,d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==g(O,d.lastIndex-1))&&(A="(?: "+A+")",T=" "+T,L++),r=new RegExp("^(?:"+A+")",C)),j&&(r=new RegExp("^"+A+"$(?!\\s)",C)),S&&(n=d.lastIndex),o=i(v,k?r:d,T),k?o?(o.input=x(o.input,L),o[0]=x(o[0],L),o.index=d.lastIndex,d.lastIndex+=o[0].length):d.lastIndex=0:S&&o&&(d.lastIndex=d.global?o.index+o[0].length:n),j&&o&&o.length>1&&i(y,o[0],r,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(o[a]=void 0)})),o&&P)for(o.groups=s=f(null),a=0;a<P.length;a++)s[(l=P[a])[0]]=o[l[1]];return o}),t.exports=m},7066:(t,e,r)=>{"use strict";var n=r(9670);t.exports=function(){var t=n(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e}},4706:(t,e,r)=>{var n=r(6916),o=r(2597),i=r(7976),a=r(7066),c=RegExp.prototype;t.exports=function(t){var e=t.flags;return void 0!==e||"flags"in c||o(t,"flags")||!i(c,t)?e:n(a,t)}},2999:(t,e,r)=>{var n=r(7293),o=r(7854).RegExp,i=n((function(){var t=o("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),a=i||n((function(){return!o("a","y").sticky})),c=i||n((function(){var t=o("^r","gy");return t.lastIndex=2,null!=t.exec("str")}));t.exports={BROKEN_CARET:c,MISSED_STICKY:a,UNSUPPORTED_Y:i}},9441:(t,e,r)=>{var n=r(7293),o=r(7854).RegExp;t.exports=n((function(){var t=o(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)}))},7168:(t,e,r)=>{var n=r(7293),o=r(7854).RegExp;t.exports=n((function(){var t=o("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}))},4488:(t,e,r)=>{var n=r(8554),o=TypeError;t.exports=function(t){if(n(t))throw o("Can't call method on "+t);return t}},1150:t=>{t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},6340:(t,e,r)=>{"use strict";var n=r(5005),o=r(3070),i=r(5112),a=r(9781),c=i("species");t.exports=function(t){var e=n(t),r=o.f;a&&e&&!e[c]&&r(e,c,{configurable:!0,get:function(){return this}})}},8003:(t,e,r)=>{var n=r(3070).f,o=r(2597),i=r(5112)("toStringTag");t.exports=function(t,e,r){t&&!r&&(t=t.prototype),t&&!o(t,i)&&n(t,i,{configurable:!0,value:e})}},6200:(t,e,r)=>{var n=r(2309),o=r(9711),i=n("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},5465:(t,e,r)=>{var n=r(7854),o=r(3072),i="__core-js_shared__",a=n[i]||o(i,{});t.exports=a},2309:(t,e,r)=>{var n=r(1913),o=r(5465);(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.25.0",mode:n?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.0/LICENSE",source:"https://github.com/zloirock/core-js"})},6707:(t,e,r)=>{var n=r(9670),o=r(9483),i=r(8554),a=r(5112)("species");t.exports=function(t,e){var r,c=n(t).constructor;return void 0===c||i(r=n(c)[a])?e:o(r)}},8710:(t,e,r)=>{var n=r(1702),o=r(9303),i=r(1340),a=r(4488),c=n("".charAt),u=n("".charCodeAt),s=n("".slice),l=function(t){return function(e,r){var n,l,f=i(a(e)),p=o(r),d=f.length;return p<0||p>=d?t?"":void 0:(n=u(f,p))<55296||n>56319||p+1===d||(l=u(f,p+1))<56320||l>57343?t?c(f,p):n:t?s(f,p,p+2):l-56320+(n-55296<<10)+65536}};t.exports={codeAt:l(!1),charAt:l(!0)}},6091:(t,e,r)=>{var n=r(6530).PROPER,o=r(7293),i=r(1361);t.exports=function(t){return o((function(){return!!i[t]()||"​᠎"!=="​᠎"[t]()||n&&i[t].name!==t}))}},3111:(t,e,r)=>{var n=r(1702),o=r(4488),i=r(1340),a=r(1361),c=n("".replace),u="["+a+"]",s=RegExp("^"+u+u+"*"),l=RegExp(u+u+"*$"),f=function(t){return function(e){var r=i(o(e));return 1&t&&(r=c(r,s,"")),2&t&&(r=c(r,l,"")),r}};t.exports={start:f(1),end:f(2),trim:f(3)}},6293:(t,e,r)=>{var n=r(7392),o=r(7293);t.exports=!!Object.getOwnPropertySymbols&&!o((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},6532:(t,e,r)=>{var n=r(6916),o=r(5005),i=r(5112),a=r(8052);t.exports=function(){var t=o("Symbol"),e=t&&t.prototype,r=e&&e.valueOf,c=i("toPrimitive");e&&!e[c]&&a(e,c,(function(t){return n(r,this)}),{arity:1})}},2015:(t,e,r)=>{var n=r(6293);t.exports=n&&!!Symbol.for&&!!Symbol.keyFor},261:(t,e,r)=>{var n,o,i,a,c=r(7854),u=r(2104),s=r(9974),l=r(614),f=r(2597),p=r(7293),d=r(490),h=r(206),y=r(317),v=r(8053),m=r(6833),g=r(5268),b=c.setImmediate,w=c.clearImmediate,x=c.process,S=c.Dispatch,_=c.Function,j=c.MessageChannel,O=c.String,E=0,P={};try{n=c.location}catch(t){}var k=function(t){if(f(P,t)){var e=P[t];delete P[t],e()}},C=function(t){return function(){k(t)}},A=function(t){k(t.data)},L=function(t){c.postMessage(O(t),n.protocol+"//"+n.host)};b&&w||(b=function(t){v(arguments.length,1);var e=l(t)?t:_(t),r=h(arguments,1);return P[++E]=function(){u(e,void 0,r)},o(E),E},w=function(t){delete P[t]},g?o=function(t){x.nextTick(C(t))}:S&&S.now?o=function(t){S.now(C(t))}:j&&!m?(a=(i=new j).port2,i.port1.onmessage=A,o=s(a.postMessage,a)):c.addEventListener&&l(c.postMessage)&&!c.importScripts&&n&&"file:"!==n.protocol&&!p(L)?(o=L,c.addEventListener("message",A,!1)):o="onreadystatechange"in y("script")?function(t){d.appendChild(y("script")).onreadystatechange=function(){d.removeChild(this),k(t)}}:function(t){setTimeout(C(t),0)}),t.exports={set:b,clear:w}},1400:(t,e,r)=>{var n=r(9303),o=Math.max,i=Math.min;t.exports=function(t,e){var r=n(t);return r<0?o(r+e,0):i(r,e)}},5656:(t,e,r)=>{var n=r(8361),o=r(4488);t.exports=function(t){return n(o(t))}},9303:(t,e,r)=>{var n=r(4758);t.exports=function(t){var e=+t;return e!=e||0===e?0:n(e)}},7466:(t,e,r)=>{var n=r(9303),o=Math.min;t.exports=function(t){return t>0?o(n(t),9007199254740991):0}},7908:(t,e,r)=>{var n=r(4488),o=Object;t.exports=function(t){return o(n(t))}},7593:(t,e,r)=>{var n=r(6916),o=r(111),i=r(2190),a=r(8173),c=r(2140),u=r(5112),s=TypeError,l=u("toPrimitive");t.exports=function(t,e){if(!o(t)||i(t))return t;var r,u=a(t,l);if(u){if(void 0===e&&(e="default"),r=n(u,t,e),!o(r)||i(r))return r;throw s("Can't convert object to primitive value")}return void 0===e&&(e="number"),c(t,e)}},4948:(t,e,r)=>{var n=r(7593),o=r(2190);t.exports=function(t){var e=n(t,"string");return o(e)?e:e+""}},1694:(t,e,r)=>{var n={};n[r(5112)("toStringTag")]="z",t.exports="[object z]"===String(n)},1340:(t,e,r)=>{var n=r(648),o=String;t.exports=function(t){if("Symbol"===n(t))throw TypeError("Cannot convert a Symbol value to a string");return o(t)}},6330:t=>{var e=String;t.exports=function(t){try{return e(t)}catch(t){return"Object"}}},9711:(t,e,r)=>{var n=r(1702),o=0,i=Math.random(),a=n(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+a(++o+i,36)}},5143:(t,e,r)=>{var n=r(7293),o=r(5112),i=r(1913),a=o("iterator");t.exports=!n((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,r="";return t.pathname="c%20d",e.forEach((function(t,n){e.delete("b"),r+=n+t})),i&&!t.toJSON||!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==r||"x"!==new URL("http://x",void 0).host}))},3307:(t,e,r)=>{var n=r(6293);t.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:(t,e,r)=>{var n=r(9781),o=r(7293);t.exports=n&&o((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},8053:t=>{var e=TypeError;t.exports=function(t,r){if(t<r)throw e("Not enough arguments");return t}},4811:(t,e,r)=>{var n=r(7854),o=r(614),i=n.WeakMap;t.exports=o(i)&&/native code/.test(String(i))},6800:(t,e,r)=>{var n=r(857),o=r(2597),i=r(6061),a=r(3070).f;t.exports=function(t){var e=n.Symbol||(n.Symbol={});o(e,t)||a(e,t,{value:i.f(t)})}},6061:(t,e,r)=>{var n=r(5112);e.f=n},5112:(t,e,r)=>{var n=r(7854),o=r(2309),i=r(2597),a=r(9711),c=r(6293),u=r(3307),s=o("wks"),l=n.Symbol,f=l&&l.for,p=u?l:l&&l.withoutSetter||a;t.exports=function(t){if(!i(s,t)||!c&&"string"!=typeof s[t]){var e="Symbol."+t;c&&i(l,t)?s[t]=l[t]:s[t]=u&&f?f(e):p(e)}return s[t]}},1361:t=>{t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},9191:(t,e,r)=>{"use strict";var n=r(5005),o=r(2597),i=r(8880),a=r(7976),c=r(7674),u=r(9920),s=r(2626),l=r(9587),f=r(6277),p=r(8340),d=r(1060),h=r(2914),y=r(9781),v=r(1913);t.exports=function(t,e,r,m){var g="stackTraceLimit",b=m?2:1,w=t.split("."),x=w[w.length-1],S=n.apply(null,w);if(S){var _=S.prototype;if(!v&&o(_,"cause")&&delete _.cause,!r)return S;var j=n("Error"),O=e((function(t,e){var r=f(m?e:t,void 0),n=m?new S(t):new S;return void 0!==r&&i(n,"message",r),h&&i(n,"stack",d(n.stack,2)),this&&a(_,this)&&l(n,this,O),arguments.length>b&&p(n,arguments[b]),n}));if(O.prototype=_,"Error"!==x?c?c(O,j):u(O,j,{name:!0}):y&&g in S&&(s(O,S,g),s(O,S,"prepareStackTrace")),u(O,S),!v)try{_.name!==x&&i(_,"name",x),_.constructor=O}catch(t){}return O}}},2222:(t,e,r)=>{"use strict";var n=r(2109),o=r(7293),i=r(3157),a=r(111),c=r(7908),u=r(6244),s=r(7207),l=r(6135),f=r(5417),p=r(1194),d=r(5112),h=r(7392),y=d("isConcatSpreadable"),v=h>=51||!o((function(){var t=[];return t[y]=!1,t.concat()[0]!==t})),m=p("concat"),g=function(t){if(!a(t))return!1;var e=t[y];return void 0!==e?!!e:i(t)};n({target:"Array",proto:!0,arity:1,forced:!v||!m},{concat:function(t){var e,r,n,o,i,a=c(this),p=f(a,0),d=0;for(e=-1,n=arguments.length;e<n;e++)if(g(i=-1===e?a:arguments[e]))for(o=u(i),s(d+o),r=0;r<o;r++,d++)r in i&&l(p,d,i[r]);else s(d+1),l(p,d++,i);return p.length=d,p}})},7327:(t,e,r)=>{"use strict";var n=r(2109),o=r(2092).filter;n({target:"Array",proto:!0,forced:!r(1194)("filter")},{filter:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},9826:(t,e,r)=>{"use strict";var n=r(2109),o=r(2092).find,i=r(1223),a="find",c=!0;a in[]&&Array(1).find((function(){c=!1})),n({target:"Array",proto:!0,forced:c},{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),i(a)},1038:(t,e,r)=>{var n=r(2109),o=r(8457);n({target:"Array",stat:!0,forced:!r(7072)((function(t){Array.from(t)}))},{from:o})},6699:(t,e,r)=>{"use strict";var n=r(2109),o=r(1318).includes,i=r(7293),a=r(1223);n({target:"Array",proto:!0,forced:i((function(){return!Array(1).includes()}))},{includes:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),a("includes")},2772:(t,e,r)=>{"use strict";var n=r(2109),o=r(1702),i=r(1318).indexOf,a=r(2133),c=o([].indexOf),u=!!c&&1/c([1],1,-0)<0,s=a("indexOf");n({target:"Array",proto:!0,forced:u||!s},{indexOf:function(t){var e=arguments.length>1?arguments[1]:void 0;return u?c(this,t,e)||0:i(this,t,e)}})},6992:(t,e,r)=>{"use strict";var n=r(5656),o=r(1223),i=r(7497),a=r(9909),c=r(3070).f,u=r(1656),s=r(1913),l=r(9781),f="Array Iterator",p=a.set,d=a.getterFor(f);t.exports=u(Array,"Array",(function(t,e){p(this,{type:f,target:n(t),index:0,kind:e})}),(function(){var t=d(this),e=t.target,r=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:e[n],done:!1}:{value:[n,e[n]],done:!1}}),"values");var h=i.Arguments=i.Array;if(o("keys"),o("values"),o("entries"),!s&&l&&"values"!==h.name)try{c(h,"name",{value:"values"})}catch(t){}},1249:(t,e,r)=>{"use strict";var n=r(2109),o=r(2092).map;n({target:"Array",proto:!0,forced:!r(1194)("map")},{map:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},5827:(t,e,r)=>{"use strict";var n=r(2109),o=r(3671).left,i=r(2133),a=r(7392),c=r(5268);n({target:"Array",proto:!0,forced:!i("reduce")||!c&&a>79&&a<83},{reduce:function(t){var e=arguments.length;return o(this,t,e,e>1?arguments[1]:void 0)}})},5069:(t,e,r)=>{"use strict";var n=r(2109),o=r(1702),i=r(3157),a=o([].reverse),c=[1,2];n({target:"Array",proto:!0,forced:String(c)===String(c.reverse())},{reverse:function(){return i(this)&&(this.length=this.length),a(this)}})},7042:(t,e,r)=>{"use strict";var n=r(2109),o=r(3157),i=r(4411),a=r(111),c=r(1400),u=r(6244),s=r(5656),l=r(6135),f=r(5112),p=r(1194),d=r(206),h=p("slice"),y=f("species"),v=Array,m=Math.max;n({target:"Array",proto:!0,forced:!h},{slice:function(t,e){var r,n,f,p=s(this),h=u(p),g=c(t,h),b=c(void 0===e?h:e,h);if(o(p)&&(r=p.constructor,(i(r)&&(r===v||o(r.prototype))||a(r)&&null===(r=r[y]))&&(r=void 0),r===v||void 0===r))return d(p,g,b);for(n=new(void 0===r?v:r)(m(b-g,0)),f=0;g<b;g++,f++)g in p&&l(n,f,p[g]);return n.length=f,n}})},1703:(t,e,r)=>{var n=r(2109),o=r(7854),i=r(2104),a=r(9191),c=o.WebAssembly,u=7!==Error("e",{cause:7}).cause,s=function(t,e){var r={};r[t]=a(t,e,u),n({global:!0,constructor:!0,arity:1,forced:u},r)},l=function(t,e){if(c&&c[t]){var r={};r[t]=a("WebAssembly."+t,e,u),n({target:"WebAssembly",stat:!0,constructor:!0,arity:1,forced:u},r)}};s("Error",(function(t){return function(e){return i(t,this,arguments)}})),s("EvalError",(function(t){return function(e){return i(t,this,arguments)}})),s("RangeError",(function(t){return function(e){return i(t,this,arguments)}})),s("ReferenceError",(function(t){return function(e){return i(t,this,arguments)}})),s("SyntaxError",(function(t){return function(e){return i(t,this,arguments)}})),s("TypeError",(function(t){return function(e){return i(t,this,arguments)}})),s("URIError",(function(t){return function(e){return i(t,this,arguments)}})),l("CompileError",(function(t){return function(e){return i(t,this,arguments)}})),l("LinkError",(function(t){return function(e){return i(t,this,arguments)}})),l("RuntimeError",(function(t){return function(e){return i(t,this,arguments)}}))},8862:(t,e,r)=>{var n=r(2109),o=r(5005),i=r(2104),a=r(6916),c=r(1702),u=r(7293),s=r(3157),l=r(614),f=r(111),p=r(2190),d=r(206),h=r(6293),y=o("JSON","stringify"),v=c(/./.exec),m=c("".charAt),g=c("".charCodeAt),b=c("".replace),w=c(1..toString),x=/[\uD800-\uDFFF]/g,S=/^[\uD800-\uDBFF]$/,_=/^[\uDC00-\uDFFF]$/,j=!h||u((function(){var t=o("Symbol")();return"[null]"!=y([t])||"{}"!=y({a:t})||"{}"!=y(Object(t))})),O=u((function(){return'"\\udf06\\ud834"'!==y("\udf06\ud834")||'"\\udead"'!==y("\udead")})),E=function(t,e){var r=d(arguments),n=e;if((f(e)||void 0!==t)&&!p(t))return s(e)||(e=function(t,e){if(l(n)&&(e=a(n,this,t,e)),!p(e))return e}),r[1]=e,i(y,null,r)},P=function(t,e,r){var n=m(r,e-1),o=m(r,e+1);return v(S,t)&&!v(_,o)||v(_,t)&&!v(S,n)?"\\u"+w(g(t,0),16):t};y&&n({target:"JSON",stat:!0,arity:3,forced:j||O},{stringify:function(t,e,r){var n=d(arguments),o=i(j?E:y,null,n);return O&&"string"==typeof o?b(o,x,P):o}})},3706:(t,e,r)=>{var n=r(7854);r(8003)(n.JSON,"JSON",!0)},2703:(t,e,r)=>{r(8003)(Math,"Math",!0)},9720:(t,e,r)=>{var n=r(2109),o=r(4699).entries;n({target:"Object",stat:!0},{entries:function(t){return o(t)}})},8559:(t,e,r)=>{var n=r(2109),o=r(408),i=r(6135);n({target:"Object",stat:!0},{fromEntries:function(t){var e={};return o(t,(function(t,r){i(e,t,r)}),{AS_ENTRIES:!0}),e}})},5003:(t,e,r)=>{var n=r(2109),o=r(7293),i=r(5656),a=r(1236).f,c=r(9781),u=o((function(){a(1)}));n({target:"Object",stat:!0,forced:!c||u,sham:!c},{getOwnPropertyDescriptor:function(t,e){return a(i(t),e)}})},9337:(t,e,r)=>{var n=r(2109),o=r(9781),i=r(3887),a=r(5656),c=r(1236),u=r(6135);n({target:"Object",stat:!0,sham:!o},{getOwnPropertyDescriptors:function(t){for(var e,r,n=a(t),o=c.f,s=i(n),l={},f=0;s.length>f;)void 0!==(r=o(n,e=s[f++]))&&u(l,e,r);return l}})},9660:(t,e,r)=>{var n=r(2109),o=r(6293),i=r(7293),a=r(5181),c=r(7908);n({target:"Object",stat:!0,forced:!o||i((function(){a.f(1)}))},{getOwnPropertySymbols:function(t){var e=a.f;return e?e(c(t)):[]}})},489:(t,e,r)=>{var n=r(2109),o=r(7293),i=r(7908),a=r(9518),c=r(8544);n({target:"Object",stat:!0,forced:o((function(){a(1)})),sham:!c},{getPrototypeOf:function(t){return a(i(t))}})},7941:(t,e,r)=>{var n=r(2109),o=r(7908),i=r(1956);n({target:"Object",stat:!0,forced:r(7293)((function(){i(1)}))},{keys:function(t){return i(o(t))}})},8304:(t,e,r)=>{r(2109)({target:"Object",stat:!0},{setPrototypeOf:r(7674)})},1539:(t,e,r)=>{var n=r(1694),o=r(8052),i=r(288);n||o(Object.prototype,"toString",i,{unsafe:!0})},2479:(t,e,r)=>{var n=r(2109),o=r(4699).values;n({target:"Object",stat:!0},{values:function(t){return o(t)}})},4678:(t,e,r)=>{var n=r(2109),o=r(2814);n({global:!0,forced:parseFloat!=o},{parseFloat:o})},1058:(t,e,r)=>{var n=r(2109),o=r(3009);n({global:!0,forced:parseInt!=o},{parseInt:o})},821:(t,e,r)=>{"use strict";var n=r(2109),o=r(6916),i=r(9662),a=r(8523),c=r(2534),u=r(408);n({target:"Promise",stat:!0,forced:r(612)},{all:function(t){var e=this,r=a.f(e),n=r.resolve,s=r.reject,l=c((function(){var r=i(e.resolve),a=[],c=0,l=1;u(t,(function(t){var i=c++,u=!1;l++,o(r,e,t).then((function(t){u||(u=!0,a[i]=t,--l||n(a))}),s)})),--l||n(a)}));return l.error&&s(l.value),r.promise}})},4164:(t,e,r)=>{"use strict";var n=r(2109),o=r(1913),i=r(3702).CONSTRUCTOR,a=r(2492),c=r(5005),u=r(614),s=r(8052),l=a&&a.prototype;if(n({target:"Promise",proto:!0,forced:i,real:!0},{catch:function(t){return this.then(void 0,t)}}),!o&&u(a)){var f=c("Promise").prototype.catch;l.catch!==f&&s(l,"catch",f,{unsafe:!0})}},3401:(t,e,r)=>{"use strict";var n,o,i,a=r(2109),c=r(1913),u=r(5268),s=r(7854),l=r(6916),f=r(8052),p=r(7674),d=r(8003),h=r(6340),y=r(9662),v=r(614),m=r(111),g=r(5787),b=r(6707),w=r(261).set,x=r(5948),S=r(842),_=r(2534),j=r(8572),O=r(9909),E=r(2492),P=r(3702),k=r(8523),C="Promise",A=P.CONSTRUCTOR,L=P.REJECTION_EVENT,T=P.SUBCLASSING,I=O.getterFor(C),R=O.set,F=E&&E.prototype,N=E,q=F,G=s.TypeError,M=s.document,B=s.process,D=k.f,H=D,U=!!(M&&M.createEvent&&s.dispatchEvent),Q="unhandledrejection",V=function(t){var e;return!(!m(t)||!v(e=t.then))&&e},$=function(t,e){var r,n,o,i=e.value,a=1==e.state,c=a?t.ok:t.fail,u=t.resolve,s=t.reject,f=t.domain;try{c?(a||(2===e.rejection&&X(e),e.rejection=1),!0===c?r=i:(f&&f.enter(),r=c(i),f&&(f.exit(),o=!0)),r===t.promise?s(G("Promise-chain cycle")):(n=V(r))?l(n,r,u,s):u(r)):s(i)}catch(t){f&&!o&&f.exit(),s(t)}},z=function(t,e){t.notified||(t.notified=!0,x((function(){for(var r,n=t.reactions;r=n.get();)$(r,t);t.notified=!1,e&&!t.rejection&&W(t)})))},J=function(t,e,r){var n,o;U?((n=M.createEvent("Event")).promise=e,n.reason=r,n.initEvent(t,!1,!0),s.dispatchEvent(n)):n={promise:e,reason:r},!L&&(o=s["on"+t])?o(n):t===Q&&S("Unhandled promise rejection",r)},W=function(t){l(w,s,(function(){var e,r=t.facade,n=t.value;if(Y(t)&&(e=_((function(){u?B.emit("unhandledRejection",n,r):J(Q,r,n)})),t.rejection=u||Y(t)?2:1,e.error))throw e.value}))},Y=function(t){return 1!==t.rejection&&!t.parent},X=function(t){l(w,s,(function(){var e=t.facade;u?B.emit("rejectionHandled",e):J("rejectionhandled",e,t.value)}))},K=function(t,e,r){return function(n){t(e,n,r)}},Z=function(t,e,r){t.done||(t.done=!0,r&&(t=r),t.value=e,t.state=2,z(t,!0))},tt=function(t,e,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===e)throw G("Promise can't be resolved itself");var n=V(e);n?x((function(){var r={done:!1};try{l(n,e,K(tt,r,t),K(Z,r,t))}catch(e){Z(r,e,t)}})):(t.value=e,t.state=1,z(t,!1))}catch(e){Z({done:!1},e,t)}}};if(A&&(q=(N=function(t){g(this,q),y(t),l(n,this);var e=I(this);try{t(K(tt,e),K(Z,e))}catch(t){Z(e,t)}}).prototype,(n=function(t){R(this,{type:C,done:!1,notified:!1,parent:!1,reactions:new j,rejection:!1,state:0,value:void 0})}).prototype=f(q,"then",(function(t,e){var r=I(this),n=D(b(this,N));return r.parent=!0,n.ok=!v(t)||t,n.fail=v(e)&&e,n.domain=u?B.domain:void 0,0==r.state?r.reactions.add(n):x((function(){$(n,r)})),n.promise})),o=function(){var t=new n,e=I(t);this.promise=t,this.resolve=K(tt,e),this.reject=K(Z,e)},k.f=D=function(t){return t===N||void 0===t?new o(t):H(t)},!c&&v(E)&&F!==Object.prototype)){i=F.then,T||f(F,"then",(function(t,e){var r=this;return new N((function(t,e){l(i,r,t,e)})).then(t,e)}),{unsafe:!0});try{delete F.constructor}catch(t){}p&&p(F,q)}a({global:!0,constructor:!0,wrap:!0,forced:A},{Promise:N}),d(N,C,!1,!0),h(C)},8674:(t,e,r)=>{r(3401),r(821),r(4164),r(6027),r(683),r(6294)},6027:(t,e,r)=>{"use strict";var n=r(2109),o=r(6916),i=r(9662),a=r(8523),c=r(2534),u=r(408);n({target:"Promise",stat:!0,forced:r(612)},{race:function(t){var e=this,r=a.f(e),n=r.reject,s=c((function(){var a=i(e.resolve);u(t,(function(t){o(a,e,t).then(r.resolve,n)}))}));return s.error&&n(s.value),r.promise}})},683:(t,e,r)=>{"use strict";var n=r(2109),o=r(6916),i=r(8523);n({target:"Promise",stat:!0,forced:r(3702).CONSTRUCTOR},{reject:function(t){var e=i.f(this);return o(e.reject,void 0,t),e.promise}})},6294:(t,e,r)=>{"use strict";var n=r(2109),o=r(5005),i=r(1913),a=r(2492),c=r(3702).CONSTRUCTOR,u=r(9478),s=o("Promise"),l=i&&!c;n({target:"Promise",stat:!0,forced:i||c},{resolve:function(t){return u(l&&this===s?a:this,t)}})},2419:(t,e,r)=>{var n=r(2109),o=r(5005),i=r(2104),a=r(7065),c=r(9483),u=r(9670),s=r(111),l=r(30),f=r(7293),p=o("Reflect","construct"),d=Object.prototype,h=[].push,y=f((function(){function t(){}return!(p((function(){}),[],t)instanceof t)})),v=!f((function(){p((function(){}))})),m=y||v;n({target:"Reflect",stat:!0,forced:m,sham:m},{construct:function(t,e){c(t),u(e);var r=arguments.length<3?t:c(arguments[2]);if(v&&!y)return p(t,e,r);if(t==r){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var n=[null];return i(h,n,e),new(i(a,t,n))}var o=r.prototype,f=l(s(o)?o:d),m=i(t,f,e);return s(m)?m:f}})},4819:(t,e,r)=>{var n=r(2109),o=r(6916),i=r(111),a=r(9670),c=r(5032),u=r(1236),s=r(9518);n({target:"Reflect",stat:!0},{get:function t(e,r){var n,l,f=arguments.length<3?e:arguments[2];return a(e)===f?e[r]:(n=u.f(e,r))?c(n)?n.value:void 0===n.get?void 0:o(n.get,f):i(l=s(e))?t(l,r,f):void 0}})},1299:(t,e,r)=>{var n=r(2109),o=r(7854),i=r(8003);n({global:!0},{Reflect:{}}),i(o.Reflect,"Reflect",!0)},4916:(t,e,r)=>{"use strict";var n=r(2109),o=r(2261);n({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},7601:(t,e,r)=>{"use strict";r(4916);var n,o,i=r(2109),a=r(6916),c=r(614),u=r(9670),s=r(1340),l=(n=!1,(o=/[ac]/).exec=function(){return n=!0,/./.exec.apply(this,arguments)},!0===o.test("abc")&&n),f=/./.test;i({target:"RegExp",proto:!0,forced:!l},{test:function(t){var e=u(this),r=s(t),n=e.exec;if(!c(n))return a(f,e,r);var o=a(n,e,r);return null!==o&&(u(o),!0)}})},7227:(t,e,r)=>{"use strict";r(7710)("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),r(5631))},189:(t,e,r)=>{r(7227)},2023:(t,e,r)=>{"use strict";var n=r(2109),o=r(1702),i=r(3929),a=r(4488),c=r(1340),u=r(4964),s=o("".indexOf);n({target:"String",proto:!0,forced:!u("includes")},{includes:function(t){return!!~s(c(a(this)),c(i(t)),arguments.length>1?arguments[1]:void 0)}})},8783:(t,e,r)=>{"use strict";var n=r(8710).charAt,o=r(1340),i=r(9909),a=r(1656),c="String Iterator",u=i.set,s=i.getterFor(c);a(String,"String",(function(t){u(this,{type:c,string:o(t),index:0})}),(function(){var t,e=s(this),r=e.string,o=e.index;return o>=r.length?{value:void 0,done:!0}:(t=n(r,o),e.index+=t.length,{value:t,done:!1})}))},4723:(t,e,r)=>{"use strict";var n=r(6916),o=r(7007),i=r(9670),a=r(8554),c=r(7466),u=r(1340),s=r(4488),l=r(8173),f=r(1530),p=r(7651);o("match",(function(t,e,r){return[function(e){var r=s(this),o=a(e)?void 0:l(e,t);return o?n(o,e,r):new RegExp(e)[t](u(r))},function(t){var n=i(this),o=u(t),a=r(e,n,o);if(a.done)return a.value;if(!n.global)return p(n,o);var s=n.unicode;n.lastIndex=0;for(var l,d=[],h=0;null!==(l=p(n,o));){var y=u(l[0]);d[h]=y,""===y&&(n.lastIndex=f(o,c(n.lastIndex),s)),h++}return 0===h?null:d}]}))},8757:(t,e,r)=>{"use strict";var n=r(2109),o=r(6916),i=r(1702),a=r(4488),c=r(614),u=r(8554),s=r(7850),l=r(1340),f=r(8173),p=r(4706),d=r(647),h=r(5112),y=r(1913),v=h("replace"),m=TypeError,g=i("".indexOf),b=i("".replace),w=i("".slice),x=Math.max,S=function(t,e,r){return r>t.length?-1:""===e?r:g(t,e,r)};n({target:"String",proto:!0},{replaceAll:function(t,e){var r,n,i,h,_,j,O,E,P,k=a(this),C=0,A=0,L="";if(!u(t)){if((r=s(t))&&(n=l(a(p(t))),!~g(n,"g")))throw m("`.replaceAll` does not allow non-global regexes");if(i=f(t,v))return o(i,t,k,e);if(y&&r)return b(l(k),t,e)}for(h=l(k),_=l(t),(j=c(e))||(e=l(e)),O=_.length,E=x(1,O),C=S(h,_,0);-1!==C;)P=j?l(e(_,C,h)):d(_,h,C,[],void 0,e),L+=w(h,A,C)+P,A=C+O,C=S(h,_,C+E);return A<h.length&&(L+=w(h,A)),L}})},5306:(t,e,r)=>{"use strict";var n=r(2104),o=r(6916),i=r(1702),a=r(7007),c=r(7293),u=r(9670),s=r(614),l=r(8554),f=r(9303),p=r(7466),d=r(1340),h=r(4488),y=r(1530),v=r(8173),m=r(647),g=r(7651),b=r(5112)("replace"),w=Math.max,x=Math.min,S=i([].concat),_=i([].push),j=i("".indexOf),O=i("".slice),E="$0"==="a".replace(/./,"$0"),P=!!/./[b]&&""===/./[b]("a","$0");a("replace",(function(t,e,r){var i=P?"$":"$0";return[function(t,r){var n=h(this),i=l(t)?void 0:v(t,b);return i?o(i,t,n,r):o(e,d(n),t,r)},function(t,o){var a=u(this),c=d(t);if("string"==typeof o&&-1===j(o,i)&&-1===j(o,"$<")){var l=r(e,a,c,o);if(l.done)return l.value}var h=s(o);h||(o=d(o));var v=a.global;if(v){var b=a.unicode;a.lastIndex=0}for(var E=[];;){var P=g(a,c);if(null===P)break;if(_(E,P),!v)break;""===d(P[0])&&(a.lastIndex=y(c,p(a.lastIndex),b))}for(var k,C="",A=0,L=0;L<E.length;L++){for(var T=d((P=E[L])[0]),I=w(x(f(P.index),c.length),0),R=[],F=1;F<P.length;F++)_(R,void 0===(k=P[F])?k:String(k));var N=P.groups;if(h){var q=S([T],R,I,c);void 0!==N&&_(q,N);var G=d(n(o,void 0,q))}else G=m(T,c,I,R,N,o);I>=A&&(C+=O(c,A,I)+G,A=I+T.length)}return C+O(c,A)}]}),!!c((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}))||!E||P)},4765:(t,e,r)=>{"use strict";var n=r(6916),o=r(7007),i=r(9670),a=r(8554),c=r(4488),u=r(1150),s=r(1340),l=r(8173),f=r(7651);o("search",(function(t,e,r){return[function(e){var r=c(this),o=a(e)?void 0:l(e,t);return o?n(o,e,r):new RegExp(e)[t](s(r))},function(t){var n=i(this),o=s(t),a=r(e,n,o);if(a.done)return a.value;var c=n.lastIndex;u(c,0)||(n.lastIndex=0);var l=f(n,o);return u(n.lastIndex,c)||(n.lastIndex=c),null===l?-1:l.index}]}))},3210:(t,e,r)=>{"use strict";var n=r(2109),o=r(3111).trim;n({target:"String",proto:!0,forced:r(6091)("trim")},{trim:function(){return o(this)}})},2443:(t,e,r)=>{r(6800)("asyncIterator")},4032:(t,e,r)=>{"use strict";var n=r(2109),o=r(7854),i=r(6916),a=r(1702),c=r(1913),u=r(9781),s=r(6293),l=r(7293),f=r(2597),p=r(7976),d=r(9670),h=r(5656),y=r(4948),v=r(1340),m=r(9114),g=r(30),b=r(1956),w=r(8006),x=r(1156),S=r(5181),_=r(1236),j=r(3070),O=r(6048),E=r(5296),P=r(8052),k=r(2309),C=r(6200),A=r(3501),L=r(9711),T=r(5112),I=r(6061),R=r(6800),F=r(6532),N=r(8003),q=r(9909),G=r(2092).forEach,M=C("hidden"),B="Symbol",D=q.set,H=q.getterFor(B),U=Object.prototype,Q=o.Symbol,V=Q&&Q.prototype,$=o.TypeError,z=o.QObject,J=_.f,W=j.f,Y=x.f,X=E.f,K=a([].push),Z=k("symbols"),tt=k("op-symbols"),et=k("wks"),rt=!z||!z.prototype||!z.prototype.findChild,nt=u&&l((function(){return 7!=g(W({},"a",{get:function(){return W(this,"a",{value:7}).a}})).a}))?function(t,e,r){var n=J(U,e);n&&delete U[e],W(t,e,r),n&&t!==U&&W(U,e,n)}:W,ot=function(t,e){var r=Z[t]=g(V);return D(r,{type:B,tag:t,description:e}),u||(r.description=e),r},it=function(t,e,r){t===U&&it(tt,e,r),d(t);var n=y(e);return d(r),f(Z,n)?(r.enumerable?(f(t,M)&&t[M][n]&&(t[M][n]=!1),r=g(r,{enumerable:m(0,!1)})):(f(t,M)||W(t,M,m(1,{})),t[M][n]=!0),nt(t,n,r)):W(t,n,r)},at=function(t,e){d(t);var r=h(e),n=b(r).concat(lt(r));return G(n,(function(e){u&&!i(ct,r,e)||it(t,e,r[e])})),t},ct=function(t){var e=y(t),r=i(X,this,e);return!(this===U&&f(Z,e)&&!f(tt,e))&&(!(r||!f(this,e)||!f(Z,e)||f(this,M)&&this[M][e])||r)},ut=function(t,e){var r=h(t),n=y(e);if(r!==U||!f(Z,n)||f(tt,n)){var o=J(r,n);return!o||!f(Z,n)||f(r,M)&&r[M][n]||(o.enumerable=!0),o}},st=function(t){var e=Y(h(t)),r=[];return G(e,(function(t){f(Z,t)||f(A,t)||K(r,t)})),r},lt=function(t){var e=t===U,r=Y(e?tt:h(t)),n=[];return G(r,(function(t){!f(Z,t)||e&&!f(U,t)||K(n,Z[t])})),n};s||(P(V=(Q=function(){if(p(V,this))throw $("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?v(arguments[0]):void 0,e=L(t),r=function(t){this===U&&i(r,tt,t),f(this,M)&&f(this[M],e)&&(this[M][e]=!1),nt(this,e,m(1,t))};return u&&rt&&nt(U,e,{configurable:!0,set:r}),ot(e,t)}).prototype,"toString",(function(){return H(this).tag})),P(Q,"withoutSetter",(function(t){return ot(L(t),t)})),E.f=ct,j.f=it,O.f=at,_.f=ut,w.f=x.f=st,S.f=lt,I.f=function(t){return ot(T(t),t)},u&&(W(V,"description",{configurable:!0,get:function(){return H(this).description}}),c||P(U,"propertyIsEnumerable",ct,{unsafe:!0}))),n({global:!0,constructor:!0,wrap:!0,forced:!s,sham:!s},{Symbol:Q}),G(b(et),(function(t){R(t)})),n({target:B,stat:!0,forced:!s},{useSetter:function(){rt=!0},useSimple:function(){rt=!1}}),n({target:"Object",stat:!0,forced:!s,sham:!u},{create:function(t,e){return void 0===e?g(t):at(g(t),e)},defineProperty:it,defineProperties:at,getOwnPropertyDescriptor:ut}),n({target:"Object",stat:!0,forced:!s},{getOwnPropertyNames:st}),F(),N(Q,B),A[M]=!0},1817:(t,e,r)=>{"use strict";var n=r(2109),o=r(9781),i=r(7854),a=r(1702),c=r(2597),u=r(614),s=r(7976),l=r(1340),f=r(3070).f,p=r(9920),d=i.Symbol,h=d&&d.prototype;if(o&&u(d)&&(!("description"in h)||void 0!==d().description)){var y={},v=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:l(arguments[0]),e=s(h,this)?new d(t):void 0===t?d():d(t);return""===t&&(y[e]=!0),e};p(v,d),v.prototype=h,h.constructor=v;var m="Symbol(test)"==String(d("test")),g=a(h.valueOf),b=a(h.toString),w=/^Symbol\((.*)\)[^)]+$/,x=a("".replace),S=a("".slice);f(h,"description",{configurable:!0,get:function(){var t=g(this);if(c(y,t))return"";var e=b(t),r=m?S(e,7,-1):x(e,w,"$1");return""===r?void 0:r}}),n({global:!0,constructor:!0,forced:!0},{Symbol:v})}},763:(t,e,r)=>{var n=r(2109),o=r(5005),i=r(2597),a=r(1340),c=r(2309),u=r(2015),s=c("string-to-symbol-registry"),l=c("symbol-to-string-registry");n({target:"Symbol",stat:!0,forced:!u},{for:function(t){var e=a(t);if(i(s,e))return s[e];var r=o("Symbol")(e);return s[e]=r,l[r]=e,r}})},2165:(t,e,r)=>{r(6800)("iterator")},2526:(t,e,r)=>{r(4032),r(763),r(6620),r(8862),r(9660)},6620:(t,e,r)=>{var n=r(2109),o=r(2597),i=r(2190),a=r(6330),c=r(2309),u=r(2015),s=c("symbol-to-string-registry");n({target:"Symbol",stat:!0,forced:!u},{keyFor:function(t){if(!i(t))throw TypeError(a(t)+" is not a symbol");if(o(s,t))return s[t]}})},9341:(t,e,r)=>{var n=r(5005),o=r(6800),i=r(8003);o("toStringTag"),i(n("Symbol"),"Symbol")},4747:(t,e,r)=>{var n=r(7854),o=r(8324),i=r(8509),a=r(8533),c=r(8880),u=function(t){if(t&&t.forEach!==a)try{c(t,"forEach",a)}catch(e){t.forEach=a}};for(var s in o)o[s]&&u(n[s]&&n[s].prototype);u(i)},3948:(t,e,r)=>{var n=r(7854),o=r(8324),i=r(8509),a=r(6992),c=r(8880),u=r(5112),s=u("iterator"),l=u("toStringTag"),f=a.values,p=function(t,e){if(t){if(t[s]!==f)try{c(t,s,f)}catch(e){t[s]=f}if(t[l]||c(t,l,e),o[e])for(var r in a)if(t[r]!==a[r])try{c(t,r,a[r])}catch(e){t[r]=a[r]}}};for(var d in o)p(n[d]&&n[d].prototype,d);p(i,"DOMTokenList")},5556:(t,e,r)=>{"use strict";r(6992);var n=r(2109),o=r(7854),i=r(6916),a=r(1702),c=r(9781),u=r(5143),s=r(8052),l=r(9190),f=r(8003),p=r(3061),d=r(9909),h=r(5787),y=r(614),v=r(2597),m=r(9974),g=r(648),b=r(9670),w=r(111),x=r(1340),S=r(30),_=r(9114),j=r(4121),O=r(1246),E=r(8053),P=r(5112),k=r(4362),C=P("iterator"),A="URLSearchParams",L="URLSearchParamsIterator",T=d.set,I=d.getterFor(A),R=d.getterFor(L),F=Object.getOwnPropertyDescriptor,N=function(t){if(!c)return o[t];var e=F(o,t);return e&&e.value},q=N("fetch"),G=N("Request"),M=N("Headers"),B=G&&G.prototype,D=M&&M.prototype,H=o.RegExp,U=o.TypeError,Q=o.decodeURIComponent,V=o.encodeURIComponent,$=a("".charAt),z=a([].join),J=a([].push),W=a("".replace),Y=a([].shift),X=a([].splice),K=a("".split),Z=a("".slice),tt=/\+/g,et=Array(4),rt=function(t){return et[t-1]||(et[t-1]=H("((?:%[\\da-f]{2}){"+t+"})","gi"))},nt=function(t){try{return Q(t)}catch(e){return t}},ot=function(t){var e=W(t,tt," "),r=4;try{return Q(e)}catch(t){for(;r;)e=W(e,rt(r--),nt);return e}},it=/[!'()~]|%20/g,at={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},ct=function(t){return at[t]},ut=function(t){return W(V(t),it,ct)},st=p((function(t,e){T(this,{type:L,iterator:j(I(t).entries),kind:e})}),"Iterator",(function(){var t=R(this),e=t.kind,r=t.iterator.next(),n=r.value;return r.done||(r.value="keys"===e?n.key:"values"===e?n.value:[n.key,n.value]),r}),!0),lt=function(t){this.entries=[],this.url=null,void 0!==t&&(w(t)?this.parseObject(t):this.parseQuery("string"==typeof t?"?"===$(t,0)?Z(t,1):t:x(t)))};lt.prototype={type:A,bindURL:function(t){this.url=t,this.update()},parseObject:function(t){var e,r,n,o,a,c,u,s=O(t);if(s)for(r=(e=j(t,s)).next;!(n=i(r,e)).done;){if(a=(o=j(b(n.value))).next,(c=i(a,o)).done||(u=i(a,o)).done||!i(a,o).done)throw U("Expected sequence with length 2");J(this.entries,{key:x(c.value),value:x(u.value)})}else for(var l in t)v(t,l)&&J(this.entries,{key:l,value:x(t[l])})},parseQuery:function(t){if(t)for(var e,r,n=K(t,"&"),o=0;o<n.length;)(e=n[o++]).length&&(r=K(e,"="),J(this.entries,{key:ot(Y(r)),value:ot(z(r,"="))}))},serialize:function(){for(var t,e=this.entries,r=[],n=0;n<e.length;)t=e[n++],J(r,ut(t.key)+"="+ut(t.value));return z(r,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var ft=function(){h(this,pt);var t=arguments.length>0?arguments[0]:void 0;T(this,new lt(t))},pt=ft.prototype;if(l(pt,{append:function(t,e){E(arguments.length,2);var r=I(this);J(r.entries,{key:x(t),value:x(e)}),r.updateURL()},delete:function(t){E(arguments.length,1);for(var e=I(this),r=e.entries,n=x(t),o=0;o<r.length;)r[o].key===n?X(r,o,1):o++;e.updateURL()},get:function(t){E(arguments.length,1);for(var e=I(this).entries,r=x(t),n=0;n<e.length;n++)if(e[n].key===r)return e[n].value;return null},getAll:function(t){E(arguments.length,1);for(var e=I(this).entries,r=x(t),n=[],o=0;o<e.length;o++)e[o].key===r&&J(n,e[o].value);return n},has:function(t){E(arguments.length,1);for(var e=I(this).entries,r=x(t),n=0;n<e.length;)if(e[n++].key===r)return!0;return!1},set:function(t,e){E(arguments.length,1);for(var r,n=I(this),o=n.entries,i=!1,a=x(t),c=x(e),u=0;u<o.length;u++)(r=o[u]).key===a&&(i?X(o,u--,1):(i=!0,r.value=c));i||J(o,{key:a,value:c}),n.updateURL()},sort:function(){var t=I(this);k(t.entries,(function(t,e){return t.key>e.key?1:-1})),t.updateURL()},forEach:function(t){for(var e,r=I(this).entries,n=m(t,arguments.length>1?arguments[1]:void 0),o=0;o<r.length;)n((e=r[o++]).value,e.key,this)},keys:function(){return new st(this,"keys")},values:function(){return new st(this,"values")},entries:function(){return new st(this,"entries")}},{enumerable:!0}),s(pt,C,pt.entries,{name:"entries"}),s(pt,"toString",(function(){return I(this).serialize()}),{enumerable:!0}),f(ft,A),n({global:!0,constructor:!0,forced:!u},{URLSearchParams:ft}),!u&&y(M)){var dt=a(D.has),ht=a(D.set),yt=function(t){if(w(t)){var e,r=t.body;if(g(r)===A)return e=t.headers?new M(t.headers):new M,dt(e,"content-type")||ht(e,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),S(t,{body:_(0,x(r)),headers:_(0,e)})}return t};if(y(q)&&n({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(t){return q(t,arguments.length>1?yt(arguments[1]):{})}}),y(G)){var vt=function(t){return h(this,B),new G(t,arguments.length>1?yt(arguments[1]):{})};B.constructor=vt,vt.prototype=B,n({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:vt})}}t.exports={URLSearchParams:ft,getState:I}},1637:(t,e,r)=>{r(5556)},9996:t=>{"use strict";var e=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||function(t){return t.$$typeof===r}(t)}(t)},r="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function n(t,e){return!1!==e.clone&&e.isMergeableObject(t)?c((r=t,Array.isArray(r)?[]:{}),t,e):t;var r}function o(t,e,r){return t.concat(e).map((function(t){return n(t,r)}))}function i(t){return Object.keys(t).concat(function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter((function(e){return t.propertyIsEnumerable(e)})):[]}(t))}function a(t,e){try{return e in t}catch(t){return!1}}function c(t,r,u){(u=u||{}).arrayMerge=u.arrayMerge||o,u.isMergeableObject=u.isMergeableObject||e,u.cloneUnlessOtherwiseSpecified=n;var s=Array.isArray(r);return s===Array.isArray(t)?s?u.arrayMerge(t,r,u):function(t,e,r){var o={};return r.isMergeableObject(t)&&i(t).forEach((function(e){o[e]=n(t[e],r)})),i(e).forEach((function(i){(function(t,e){return a(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))})(t,i)||(a(t,i)&&r.isMergeableObject(e[i])?o[i]=function(t,e){if(!e.customMerge)return c;var r=e.customMerge(t);return"function"==typeof r?r:c}(i,r)(t[i],e[i],r):o[i]=n(e[i],r))})),o}(t,r,u):n(r,u)}c.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce((function(t,r){return c(t,r,e)}),{})};var u=c;t.exports=u}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";r(6699),r(2023),r(1038),r(8783),r(7327),r(1539),r(1249),r(3210),r(4916),r(5306),r(8757),r(2222),r(9720),r(8674),r(2526),r(1817),r(2165),r(6992),r(3948),r(2443),r(9341),r(3706),r(2703),r(1703),r(489),r(4747),r(8304),r(5069),r(7042),r(7601),r(8862);const t=function(t,e){return function(r,n){return fetch(t.config.ajax.approve_order.endpoint,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({nonce:t.config.ajax.approve_order.nonce,order_id:r.orderID,funding_source:window.ppcpFundingSource})}).then((function(t){return t.json()})).then((function(r){if(!r.success)return e.genericError(),n.restart().catch((function(t){e.genericError()}));location.href=t.config.redirect}))}};var e=function(){var t=PayPalCommerceGateway.payer;if(!t)return null;var e=document.querySelector("#billing_phone")||void 0!==t.phone?{phone_type:"HOME",phone_number:{national_number:document.querySelector("#billing_phone")?document.querySelector("#billing_phone").value:t.phone.phone_number.national_number}}:null,r={email_address:document.querySelector("#billing_email")?document.querySelector("#billing_email").value:t.email_address,name:{surname:document.querySelector("#billing_last_name")?document.querySelector("#billing_last_name").value:t.name.surname,given_name:document.querySelector("#billing_first_name")?document.querySelector("#billing_first_name").value:t.name.given_name},address:{country_code:document.querySelector("#billing_country")?document.querySelector("#billing_country").value:t.address.country_code,address_line_1:document.querySelector("#billing_address_1")?document.querySelector("#billing_address_1").value:t.address.address_line_1,address_line_2:document.querySelector("#billing_address_2")?document.querySelector("#billing_address_2").value:t.address.address_line_2,admin_area_1:document.querySelector("#billing_state")?document.querySelector("#billing_state").value:t.address.admin_area_1,admin_area_2:document.querySelector("#billing_city")?document.querySelector("#billing_city").value:t.address.admin_area_2,postal_code:document.querySelector("#billing_postcode")?document.querySelector("#billing_postcode").value:t.address.postal_code}};return e&&(r.phone=e),r},n={PAYPAL:"ppcp-gateway",CARDS:"ppcp-credit-card-gateway",OXXO:"ppcp-oxxo-gateway",CARD_BUTTON:"ppcp-card-button-gateway"},o="#place_order",i=function(){var t=document.querySelector('input[name="payment_method"]:checked');return t?t.value:null};function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}const c=function(){function r(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.config=t,this.errorHandler=e}var o,i;return o=r,(i=[{key:"subscriptionsConfiguration",value:function(){var t=this;return{createSubscription:function(e,r){return r.subscription.create({plan_id:t.config.subscription_plan_id})},onApprove:function(e,r){fetch(t.config.ajax.approve_subscription.endpoint,{method:"POST",credentials:"same-origin",body:JSON.stringify({nonce:t.config.ajax.approve_subscription.nonce,order_id:e.orderID,subscription_id:e.subscriptionID})}).then((function(t){return t.json()})).then((function(e){if(!e.success)throw console.log(e),Error(e.data.message);location.href=t.config.redirect}))},onError:function(t){console.error(t)}}}},{key:"configuration",value:function(){var r=this;return{createOrder:function(t,o){var i=e(),a=void 0!==r.config.bn_codes[r.config.context]?r.config.bn_codes[r.config.context]:"";return fetch(r.config.ajax.create_order.endpoint,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({nonce:r.config.ajax.create_order.nonce,purchase_units:[],payment_method:n.PAYPAL,funding_source:window.ppcpFundingSource,bn_code:a,payer:i,context:r.config.context})}).then((function(t){return t.json()})).then((function(t){if(!t.success)throw console.error(t),Error(t.data.message);return t.data.id}))},onApprove:t(this,this.errorHandler),onError:function(t){r.errorHandler.genericError()}}}}])&&a(o.prototype,i),Object.defineProperty(o,"prototype",{writable:!1}),r}();r(9826);var u=function(t){return"string"==typeof t?document.querySelector(t):t},s=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=u(t);n&&(e?jQuery(n).css({cursor:"","-webkit-filter":"",filter:""}).off("mouseup").find("> *").css("pointer-events",""):jQuery(n).css({cursor:"not-allowed","-webkit-filter":"grayscale(100%)",filter:"grayscale(100%)"}).on("mouseup",(function(t){if(t.stopImmediatePropagation(),r){var e=jQuery(r);e.find(".single_add_to_cart_button").hasClass("disabled")&&e.find(":submit").trigger("click")}})).find("> *").css("pointer-events","none"))},l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;s(t,!1,e)},f=function(t){s(t,!0)};function p(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var d=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r;return e=t,r=[{key:"handleButtonStatus",value:function(t,e){if((e=e||{}).wrapper=e.wrapper||t.gateway.button.wrapper,e.messagesWrapper=e.messagesWrapper||t.gateway.messages.wrapper,e.skipMessages=e.skipMessages||!1,!t.shouldEnable())return t.renderer.disableSmartButtons(e.wrapper),l(e.wrapper,e.formSelector||null),void(e.skipMessages||l(e.messagesWrapper));t.renderer.enableSmartButtons(e.wrapper),f(e.wrapper),e.skipMessages||f(e.messagesWrapper)}},{key:"shouldEnable",value:function(t,e){return void 0===(e=e||{}).isDisabled&&(e.isDisabled=t.gateway.button.is_disabled),t.shouldRender()&&!0!==e.isDisabled}}],null&&p(e.prototype,null),r&&p(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}const y=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gateway=e,this.renderer=r,this.errorHandler=n,this.actionHandler=null}var e,r;return e=t,(r=[{key:"init",value:function(){var t=this;this.actionHandler=new c(PayPalCommerceGateway,this.errorHandler),this.render(),this.handleButtonStatus(),jQuery(document.body).on("wc_fragments_loaded wc_fragments_refreshed",(function(){t.render(),t.handleButtonStatus()})),this.renderer.onButtonsInit(this.gateway.button.mini_cart_wrapper,(function(){t.handleButtonStatus()}),!0)}},{key:"handleButtonStatus",value:function(){d.handleButtonStatus(this,{wrapper:this.gateway.button.mini_cart_wrapper,skipMessages:!0})}},{key:"shouldRender",value:function(){return null!==document.querySelector(this.gateway.button.mini_cart_wrapper)||null!==document.querySelector(this.gateway.hosted_fields.mini_cart_wrapper)}},{key:"shouldEnable",value:function(){return d.shouldEnable(this,{isDisabled:!!this.gateway.button.is_mini_cart_disabled})}},{key:"render",value:function(){this.shouldRender()&&this.renderer.render(this.actionHandler.configuration(),{button:{wrapper:this.gateway.button.mini_cart_wrapper,style:this.gateway.button.mini_cart_style}})}}])&&h(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function v(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}r(4678);const m=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.quantity=r,this.variations=n}var e,r;return e=t,(r=[{key:"data",value:function(){return{id:this.id,quantity:this.quantity,variations:this.variations}}}])&&v(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function g(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}const b=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.endpoint=e,this.nonce=r}var e,r;return e=t,(r=[{key:"update",value:function(t,e){var r=this;return new Promise((function(n,o){fetch(r.endpoint,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({nonce:r.nonce,products:e})}).then((function(t){return t.json()})).then((function(e){if(e.success){var r=t(e.data);n(r)}else o(e.data)}))}))}}])&&g(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function x(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}r(4723),r(1058);const S=function(){function r(t,e,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.config=t,this.updateCart=e,this.formElement=n,this.errorHandler=o}var o,i;return o=r,(i=[{key:"subscriptionsConfiguration",value:function(){var t=this;return{createSubscription:function(e,r){return r.subscription.create({plan_id:t.config.subscription_plan_id})},onApprove:function(e,r){fetch(t.config.ajax.approve_subscription.endpoint,{method:"POST",credentials:"same-origin",body:JSON.stringify({nonce:t.config.ajax.approve_subscription.nonce,order_id:e.orderID,subscription_id:e.subscriptionID})}).then((function(t){return t.json()})).then((function(){var e=document.querySelector('[name="add-to-cart"]').value,r=[new m(e,1,null)];fetch(t.config.ajax.change_cart.endpoint,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({nonce:t.config.ajax.change_cart.nonce,products:r})}).then((function(t){return t.json()})).then((function(e){if(!e.success)throw console.log(e),Error(e.data.message);location.href=t.config.redirect}))}))},onError:function(t){console.error(t)}}}},{key:"configuration",value:function(){var e=this;return{createOrder:this.createOrder(),onApprove:t(this,this.errorHandler),onError:function(t){e.errorHandler.genericError()}}}},{key:"createOrder",value:function(){var t=this,r=null;r=this.isGroupedProduct()?function(){var e=[];return t.formElement.querySelectorAll('input[type="number"]').forEach((function(t){if(t.value){var r=t.getAttribute("name").match(/quantity\[([\d]*)\]/);if(2===r.length){var n=parseInt(r[1]),o=parseInt(t.value);e.push(new m(n,o,null))}}})),e}:function(){var e=document.querySelector('[name="add-to-cart"]').value,r=document.querySelector('[name="quantity"]').value,n=t.variations();return[new m(e,r,n)]};return function(o,i){t.errorHandler.clear();var a=t.updateCart.update((function(r){var o=e(),i=void 0!==t.config.bn_codes[t.config.context]?t.config.bn_codes[t.config.context]:"";return fetch(t.config.ajax.create_order.endpoint,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({nonce:t.config.ajax.create_order.nonce,purchase_units:r,payer:o,bn_code:i,payment_method:n.PAYPAL,funding_source:window.ppcpFundingSource,context:t.config.context})}).then((function(t){return t.json()})).then((function(t){if(!t.success)throw console.error(t),Error(t.data.message);return t.data.id}))}),r());return a}}},{key:"variations",value:function(){return this.hasVariations()?(t=this.formElement.querySelectorAll("[name^='attribute_']"),function(t){if(Array.isArray(t))return w(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return w(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?w(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map((function(t){return{value:t.value,name:t.name}})):null;var t}},{key:"hasVariations",value:function(){return this.formElement.classList.contains("variations_form")}},{key:"isGroupedProduct",value:function(){return this.formElement.classList.contains("grouped_form")}}])&&x(o.prototype,i),Object.defineProperty(o,"prototype",{writable:!1}),r}();var _=function(t){return"string"==typeof t?document.querySelector(t):t},j=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},O=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=_(t);if(n){var o=n.style.getPropertyValue("display");if(e)"none"===o&&n.style.removeProperty("display"),j(n)||n.style.setProperty("display","block");else{if("none"===o)return;n.style.setProperty("display","none",r?"important":"")}}},E=function(t,e,r){var n=_(t);n&&(e?n.classList.remove(r):n.classList.add(r))},P=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];O(t,!1,e)},k=function(t){O(t,!0)};function C(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}const A=function(){function t(e,r,n,o){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gateway=e,this.renderer=r,this.messages=n,this.errorHandler=o,this.mutationObserver=new MutationObserver(this.handleChange.bind(this)),this.formSelector="form.cart",this.renderer.onButtonsInit(this.gateway.button.wrapper,(function(){i.handleChange()}),!0)}var e,r;return e=t,(r=[{key:"form",value:function(){return document.querySelector(this.formSelector)}},{key:"handleChange",value:function(){if(!this.shouldRender())return this.renderer.disableSmartButtons(this.gateway.button.wrapper),P(this.gateway.button.wrapper,this.formSelector),void P(this.gateway.messages.wrapper);this.render(),this.renderer.enableSmartButtons(this.gateway.button.wrapper),k(this.gateway.button.wrapper),k(this.gateway.messages.wrapper),this.handleButtonStatus()}},{key:"handleButtonStatus",value:function(){d.handleButtonStatus(this,{formSelector:this.formSelector})}},{key:"init",value:function(){var t=this,e=this.form();if(e){e.addEventListener("change",(function(){t.handleChange(),setTimeout((function(){t.messages.renderWithAmount(t.priceAmount())}),100)})),this.mutationObserver.observe(e,{childList:!0,subtree:!0});var r=e.querySelector(".single_add_to_cart_button");r&&new MutationObserver(this.handleButtonStatus.bind(this)).observe(r,{attributes:!0}),this.shouldRender()&&(this.render(),this.handleChange())}}},{key:"shouldRender",value:function(){return null!==this.form()&&!this.isWcsattSubscriptionMode()}},{key:"shouldEnable",value:function(){var t=this.form(),e=t?t.querySelector(".single_add_to_cart_button"):null;return d.shouldEnable(this)&&!this.priceAmountIsZero()&&(null===e||!e.classList.contains("disabled"))}},{key:"priceAmount",value:function(){var t=[function(){var t;return null===(t=document.querySelector("form.cart ins .woocommerce-Price-amount"))||void 0===t?void 0:t.innerText},function(){var t;return null===(t=document.querySelector("form.cart .woocommerce-Price-amount"))||void 0===t?void 0:t.innerText},function(){var t=document.querySelector(".product .woocommerce-Price-amount");return t&&1===Array.from(t.parentElement.querySelectorAll(".woocommerce-Price-amount")).filter((function(t){return!t.parentElement.classList.contains("woocommerce-price-suffix")})).length?t.innerText:null}].map((function(t){return t()})).find((function(t){return t}));return t?parseFloat(t.replace(/,/g,".").replace(/([^\d,\.\s]*)/g,"")):0}},{key:"priceAmountIsZero",value:function(){var t=this.priceAmount();return!t||0===t}},{key:"isWcsattSubscriptionMode",value:function(){return null!==document.querySelector('.wcsatt-options-product:not(.wcsatt-options-product--hidden) .subscription-option input[type="radio"]:checked')||null!==document.querySelector('.wcsatt-options-prompt-label-subscription input[type="radio"]:checked')}},{key:"render",value:function(){var t=new S(this.gateway,new b(this.gateway.ajax.change_cart.endpoint,this.gateway.ajax.change_cart.nonce),this.form(),this.errorHandler);PayPalCommerceGateway.data_client_id.has_subscriptions&&PayPalCommerceGateway.data_client_id.paypal_subscriptions_enabled?this.renderer.render(t.subscriptionsConfiguration()):this.renderer.render(t.configuration())}}])&&C(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function L(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}const T=function(){function t(e,r,n){var o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gateway=e,this.renderer=r,this.errorHandler=n,this.renderer.onButtonsInit(this.gateway.button.wrapper,(function(){o.handleButtonStatus()}),!0)}var e,r;return e=t,(r=[{key:"init",value:function(){var t=this;this.shouldRender()&&(this.render(),this.handleButtonStatus(),jQuery(document.body).on("updated_cart_totals updated_checkout",(function(){t.render(),t.handleButtonStatus(),fetch(t.gateway.ajax.cart_script_params.endpoint,{method:"GET",credentials:"same-origin"}).then((function(t){return t.json()})).then((function(e){if(e.success){var r=e.data,n=t.gateway.url_params.intent!==r.intent;O(t.gateway.button.wrapper,!n)}}))})))}},{key:"handleButtonStatus",value:function(){d.handleButtonStatus(this)}},{key:"shouldRender",value:function(){return null!==document.querySelector(this.gateway.button.wrapper)}},{key:"shouldEnable",value:function(){return d.shouldEnable(this)}},{key:"render",value:function(){var t=new c(PayPalCommerceGateway,this.errorHandler);PayPalCommerceGateway.data_client_id.has_subscriptions&&PayPalCommerceGateway.data_client_id.paypal_subscriptions_enabled?this.renderer.render(t.subscriptionsConfiguration()):this.renderer.render(t.configuration())}}])&&L(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();r(5827),r(7941),r(5003),r(9337),r(8559),function(){var t;function e(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}var r,n="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,r){return t==Array.prototype||t==Object.prototype||(t[e]=r.value),t},o=function(t){t=["object"==typeof globalThis&&globalThis,t,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var e=0;e<t.length;++e){var r=t[e];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}(this);function i(t,e){if(e)t:{var r=o;t=t.split(".");for(var i=0;i<t.length-1;i++){var a=t[i];if(!(a in r))break t;r=r[a]}(e=e(i=r[t=t[t.length-1]]))!=i&&null!=e&&n(r,t,{configurable:!0,writable:!0,value:e})}}function a(t){return(t={next:t})[Symbol.iterator]=function(){return this},t}function c(t){var r="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return r?r.call(t):{next:e(t)}}if(i("Symbol",(function(t){function e(t,e){this.A=t,n(this,"description",{configurable:!0,writable:!0,value:e})}if(t)return t;e.prototype.toString=function(){return this.A};var r="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",o=0;return function t(n){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new e(r+(n||"")+"_"+o++,n)}})),i("Symbol.iterator",(function(t){if(t)return t;t=Symbol("Symbol.iterator");for(var r="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),i=0;i<r.length;i++){var c=o[r[i]];"function"==typeof c&&"function"!=typeof c.prototype[t]&&n(c.prototype,t,{configurable:!0,writable:!0,value:function(){return a(e(this))}})}return t})),"function"==typeof Object.setPrototypeOf)r=Object.setPrototypeOf;else{var u;t:{var s={};try{s.__proto__={a:!0},u=s.a;break t}catch(t){}u=!1}r=u?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var l=r;function f(){this.m=!1,this.j=null,this.v=void 0,this.h=1,this.u=this.C=0,this.l=null}function p(t){if(t.m)throw new TypeError("Generator is already running");t.m=!0}function d(t,e){return t.h=3,{value:e}}function h(t){this.g=new f,this.G=t}function y(t,e,r,n){try{var o=e.call(t.g.j,r);if(!(o instanceof Object))throw new TypeError("Iterator result "+o+" is not an object");if(!o.done)return t.g.m=!1,o;var i=o.value}catch(e){return t.g.j=null,t.g.s(e),v(t)}return t.g.j=null,n.call(t.g,i),v(t)}function v(t){for(;t.g.h;)try{var e=t.G(t.g);if(e)return t.g.m=!1,{value:e.value,done:!1}}catch(e){t.g.v=void 0,t.g.s(e)}if(t.g.m=!1,t.g.l){if(e=t.g.l,t.g.l=null,e.F)throw e.D;return{value:e.return,done:!0}}return{value:void 0,done:!0}}function m(t){this.next=function(e){return t.o(e)},this.throw=function(e){return t.s(e)},this.return=function(e){return function(t,e){p(t.g);var r=t.g.j;return r?y(t,"return"in r?r.return:function(t){return{value:t,done:!0}},e,t.g.return):(t.g.return(e),v(t))}(t,e)},this[Symbol.iterator]=function(){return this}}function g(t,e){return e=new m(new h(e)),l&&t.prototype&&l(e,t.prototype),e}if(f.prototype.o=function(t){this.v=t},f.prototype.s=function(t){this.l={D:t,F:!0},this.h=this.C||this.u},f.prototype.return=function(t){this.l={return:t},this.h=this.u},h.prototype.o=function(t){return p(this.g),this.g.j?y(this,this.g.j.next,t,this.g.o):(this.g.o(t),v(this))},h.prototype.s=function(t){return p(this.g),this.g.j?y(this,this.g.j.throw,t,this.g.o):(this.g.s(t),v(this))},i("Array.prototype.entries",(function(t){return t||function(){return function(t,e){t instanceof String&&(t+="");var r=0,n=!1,o={next:function(){if(!n&&r<t.length){var o=r++;return{value:e(o,t[o]),done:!1}}return n=!0,{done:!0,value:void 0}}};return o[Symbol.iterator]=function(){return o},o}(this,(function(t,e){return[t,e]}))}})),"undefined"!=typeof Blob&&("undefined"==typeof FormData||!FormData.prototype.keys)){var b=function(t,e){for(var r=0;r<t.length;r++)e(t[r])},w=function(t){return t.replace(/\r?\n|\r/g,"\r\n")},x=function(t,e,r){return e instanceof Blob?(r=void 0!==r?String(r+""):"string"==typeof e.name?e.name:"blob",e.name===r&&"[object Blob]"!==Object.prototype.toString.call(e)||(e=new File([e],r)),[String(t),e]):[String(t),String(e)]},S=function(t,e){if(t.length<e)throw new TypeError(e+" argument required, but only "+t.length+" present.")},_="object"==typeof globalThis?globalThis:"object"==typeof window?window:"object"==typeof self?self:this,j=_.FormData,O=_.XMLHttpRequest&&_.XMLHttpRequest.prototype.send,E=_.Request&&_.fetch,P=_.navigator&&_.navigator.sendBeacon,k=_.Element&&_.Element.prototype,C=_.Symbol&&Symbol.toStringTag;C&&(Blob.prototype[C]||(Blob.prototype[C]="Blob"),"File"in _&&!File.prototype[C]&&(File.prototype[C]="File"));try{new File([],"")}catch(t){_.File=function(t,e,r){return t=new Blob(t,r||{}),Object.defineProperties(t,{name:{value:e},lastModified:{value:+(r&&void 0!==r.lastModified?new Date(r.lastModified):new Date)},toString:{value:function(){return"[object File]"}}}),C&&Object.defineProperty(t,C,{value:"File"}),t}}var A=function(t){return t.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22")},L=function(t){this.i=[];var e=this;t&&b(t.elements,(function(t){if(t.name&&!t.disabled&&"submit"!==t.type&&"button"!==t.type&&!t.matches("form fieldset[disabled] *"))if("file"===t.type){var r=t.files&&t.files.length?t.files:[new File([],"",{type:"application/octet-stream"})];b(r,(function(r){e.append(t.name,r)}))}else"select-multiple"===t.type||"select-one"===t.type?b(t.options,(function(r){!r.disabled&&r.selected&&e.append(t.name,r.value)})):"checkbox"===t.type||"radio"===t.type?t.checked&&e.append(t.name,t.value):(r="textarea"===t.type?w(t.value):t.value,e.append(t.name,r))}))};if((t=L.prototype).append=function(t,e,r){S(arguments,2),this.i.push(x(t,e,r))},t.delete=function(t){S(arguments,1);var e=[];t=String(t),b(this.i,(function(r){r[0]!==t&&e.push(r)})),this.i=e},t.entries=function t(){var e,r=this;return g(t,(function(t){if(1==t.h&&(e=0),3!=t.h)return e<r.i.length?t=d(t,r.i[e]):(t.h=0,t=void 0),t;e++,t.h=2}))},t.forEach=function(t,e){S(arguments,1);for(var r=c(this),n=r.next();!n.done;n=r.next()){var o=c(n.value);n=o.next().value,o=o.next().value,t.call(e,o,n,this)}},t.get=function(t){S(arguments,1);var e=this.i;t=String(t);for(var r=0;r<e.length;r++)if(e[r][0]===t)return e[r][1];return null},t.getAll=function(t){S(arguments,1);var e=[];return t=String(t),b(this.i,(function(r){r[0]===t&&e.push(r[1])})),e},t.has=function(t){S(arguments,1),t=String(t);for(var e=0;e<this.i.length;e++)if(this.i[e][0]===t)return!0;return!1},t.keys=function t(){var e,r,n,o=this;return g(t,(function(t){if(1==t.h&&(e=c(o),r=e.next()),3!=t.h)return r.done?void(t.h=0):(n=r.value,d(t,c(n).next().value));r=e.next(),t.h=2}))},t.set=function(t,e,r){S(arguments,2),t=String(t);var n=[],o=x(t,e,r),i=!0;b(this.i,(function(e){e[0]===t?i&&(i=!n.push(o)):n.push(e)})),i&&n.push(o),this.i=n},t.values=function t(){var e,r,n,o,i=this;return g(t,(function(t){if(1==t.h&&(e=c(i),r=e.next()),3!=t.h)return r.done?void(t.h=0):(n=r.value,(o=c(n)).next(),d(t,o.next().value));r=e.next(),t.h=2}))},L.prototype._asNative=function(){for(var t=new j,e=c(this),r=e.next();!r.done;r=e.next()){var n=c(r.value);r=n.next().value,n=n.next().value,t.append(r,n)}return t},L.prototype._blob=function(){var t="----formdata-polyfill-"+Math.random(),e=[],r="--"+t+'\r\nContent-Disposition: form-data; name="';return this.forEach((function(t,n){return"string"==typeof t?e.push(r+A(w(n))+'"\r\n\r\n'+w(t)+"\r\n"):e.push(r+A(w(n))+'"; filename="'+A(t.name)+'"\r\nContent-Type: '+(t.type||"application/octet-stream")+"\r\n\r\n",t,"\r\n")})),e.push("--"+t+"--"),new Blob(e,{type:"multipart/form-data; boundary="+t})},L.prototype[Symbol.iterator]=function(){return this.entries()},L.prototype.toString=function(){return"[object FormData]"},k&&!k.matches&&(k.matches=k.matchesSelector||k.mozMatchesSelector||k.msMatchesSelector||k.oMatchesSelector||k.webkitMatchesSelector||function(t){for(var e=(t=(this.document||this.ownerDocument).querySelectorAll(t)).length;0<=--e&&t.item(e)!==this;);return-1<e}),C&&(L.prototype[C]="FormData"),O){var T=_.XMLHttpRequest.prototype.setRequestHeader;_.XMLHttpRequest.prototype.setRequestHeader=function(t,e){T.call(this,t,e),"content-type"===t.toLowerCase()&&(this.B=!0)},_.XMLHttpRequest.prototype.send=function(t){t instanceof L?(t=t._blob(),this.B||this.setRequestHeader("Content-Type",t.type),O.call(this,t)):O.call(this,t)}}E&&(_.fetch=function(t,e){return e&&e.body&&e.body instanceof L&&(e.body=e.body._blob()),E.call(this,t,e)}),P&&(_.navigator.sendBeacon=function(t,e){return e instanceof L&&(e=e._asNative()),P.call(this,t,e)}),_.FormData=L}}();const I=function(t,e,r){return function(n,o){return r.block(),e.clear(),fetch(t.config.ajax.approve_order.endpoint,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({nonce:t.config.ajax.approve_order.nonce,order_id:n.orderID,funding_source:window.ppcpFundingSource})}).then((function(t){return t.json()})).then((function(t){if(r.unblock(),!t.success){if(100===t.data.code?e.message(t.data.message):e.genericError(),void 0!==o&&void 0!==o.restart)return o.restart();throw new Error(t.data.message)}document.querySelector("#place_order").click()}))}};function R(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}const F=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.config=e,this.errorHandler=r,this.spinner=n}var r,n;return r=t,(n=[{key:"subscriptionsConfiguration",value:function(){var t=this;return{createSubscription:function(e,r){return r.subscription.create({plan_id:t.config.subscription_plan_id})},onApprove:function(e,r){fetch(t.config.ajax.approve_subscription.endpoint,{method:"POST",credentials:"same-origin",body:JSON.stringify({nonce:t.config.ajax.approve_subscription.nonce,order_id:e.orderID,subscription_id:e.subscriptionID})}).then((function(t){return t.json()})).then((function(t){document.querySelector("#place_order").click()}))},onError:function(t){console.error(t)}}}},{key:"configuration",value:function(){var t=this,r=this.spinner;return{createOrder:function(n,o){var a=e(),c=void 0!==t.config.bn_codes[t.config.context]?t.config.bn_codes[t.config.context]:"",u=t.errorHandler,s="checkout"===t.config.context?"form.checkout":"form#order_review",l=new FormData(document.querySelector(s)),f=Object.fromEntries(l.entries()),p=!!jQuery("#createaccount").is(":checked"),d=i(),h=window.ppcpFundingSource;return fetch(t.config.ajax.create_order.endpoint,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({nonce:t.config.ajax.create_order.nonce,payer:a,bn_code:c,context:t.config.context,order_id:t.config.order_id,payment_method:d,funding_source:h,form:f,createaccount:p})}).then((function(t){return t.json()})).then((function(t){if(!t.success){if(r.unblock(),void 0!==t.messages){var e=new DOMParser;u.appendPreparedErrorMessageElement(e.parseFromString(t.messages,"text/html").querySelector("ul"))}else{var n,o;u.clear(),t.data.refresh&&jQuery(document.body).trigger("update_checkout"),(null===(n=t.data.errors)||void 0===n?void 0:n.length)>0?u.messages(t.data.errors):(null===(o=t.data.details)||void 0===o?void 0:o.length)>0?u.message(t.data.details.map((function(t){return"".concat(t.issue," ").concat(t.description)})).join("<br/>")):u.message(t.data.message),jQuery(document.body).trigger("checkout_error",[u.currentHtml()])}throw{type:"create-order-error",data:t.data}}var i=document.createElement("input");return i.setAttribute("type","hidden"),i.setAttribute("name","ppcp-resume-order"),i.setAttribute("value",t.data.custom_id),document.querySelector(s).appendChild(i),t.data.id}))},onApprove:I(this,this.errorHandler,this.spinner),onCancel:function(){r.unblock()},onError:function(e){console.error(e),r.unblock(),e&&"create-order-error"===e.type||t.errorHandler.genericError()}}}}])&&R(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),t}();function N(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return q(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?q(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function G(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function M(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?G(Object(r),!0).forEach((function(e){B(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function B(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function D(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}const H=function(){function t(e,r,n,i,a){var c=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gateway=e,this.renderer=r,this.messages=n,this.spinner=i,this.errorHandler=a,this.standardOrderButtonSelector=o,this.renderer.onButtonsInit(this.gateway.button.wrapper,(function(){c.handleButtonStatus()}),!0)}var e,r;return e=t,(r=[{key:"init",value:function(){var t=this;this.render(),this.handleButtonStatus(),jQuery("#saved-credit-card").val(jQuery("#saved-credit-card option:first").val()),jQuery(document.body).on("updated_checkout",(function(){t.render(),t.handleButtonStatus()})),jQuery(document.body).on("updated_checkout payment_method_selected",(function(){t.updateUi()})),jQuery(document).on("hosted_fields_loaded",(function(){jQuery("#saved-credit-card").on("change",(function(){t.updateUi()}))})),this.updateUi()}},{key:"handleButtonStatus",value:function(){d.handleButtonStatus(this)}},{key:"shouldRender",value:function(){return!document.querySelector(this.gateway.button.cancel_wrapper)&&(null!==document.querySelector(this.gateway.button.wrapper)||null!==document.querySelector(this.gateway.hosted_fields.wrapper))}},{key:"shouldEnable",value:function(){return d.shouldEnable(this)}},{key:"render",value:function(){if(this.shouldRender()){document.querySelector(this.gateway.hosted_fields.wrapper+">div")&&document.querySelector(this.gateway.hosted_fields.wrapper+">div").setAttribute("style","");var t=new F(PayPalCommerceGateway,this.errorHandler,this.spinner);PayPalCommerceGateway.data_client_id.has_subscriptions&&PayPalCommerceGateway.data_client_id.paypal_subscriptions_enabled?this.renderer.render(t.subscriptionsConfiguration(),{},t.configuration()):this.renderer.render(t.configuration(),{},t.configuration())}}},{key:"updateUi",value:function(){var t,e=i(),r=e===n.PAYPAL,o=e===n.CARDS,a=[n.CARD_BUTTON].includes(e),c=o&&(t=document.querySelector("#saved-credit-card"))&&""!==t.value,u=!r&&!o&&!a,s=PayPalCommerceGateway.is_free_trial_cart,l=""!==PayPalCommerceGateway.vaulted_paypal_email,f=M({},Object.entries(PayPalCommerceGateway.separate_buttons).reduce((function(t,e){var r=N(e,2),n=(r[0],r[1]);return M(M({},t),{},B({},n.id,n.wrapper))}),{}));E(this.standardOrderButtonSelector,r&&s&&l||u||c,"ppcp-hidden"),O(".ppcp-vaulted-paypal-details",r),O(this.gateway.button.wrapper,r&&!(s&&l)),O(this.gateway.messages.wrapper,r&&!s),O(this.gateway.hosted_fields.wrapper,o&&!c);for(var p=0,d=Object.entries(f);p<d.length;p++){var h=N(d[p],2),y=h[0],v=h[1];O(v,y===e)}r&&!s&&this.messages.render(),o&&(c?this.disableCreditCardFields():this.enableCreditCardFields())}},{key:"disableCreditCardFields",value:function(){jQuery('label[for="ppcp-credit-card-gateway-card-number"]').addClass("ppcp-credit-card-gateway-form-field-disabled"),jQuery("#ppcp-credit-card-gateway-card-number").addClass("ppcp-credit-card-gateway-form-field-disabled"),jQuery('label[for="ppcp-credit-card-gateway-card-expiry"]').addClass("ppcp-credit-card-gateway-form-field-disabled"),jQuery("#ppcp-credit-card-gateway-card-expiry").addClass("ppcp-credit-card-gateway-form-field-disabled"),jQuery('label[for="ppcp-credit-card-gateway-card-cvc"]').addClass("ppcp-credit-card-gateway-form-field-disabled"),jQuery("#ppcp-credit-card-gateway-card-cvc").addClass("ppcp-credit-card-gateway-form-field-disabled"),jQuery('label[for="vault"]').addClass("ppcp-credit-card-gateway-form-field-disabled"),jQuery("#ppcp-credit-card-vault").addClass("ppcp-credit-card-gateway-form-field-disabled"),jQuery("#ppcp-credit-card-vault").attr("disabled",!0),this.renderer.disableCreditCardFields()}},{key:"enableCreditCardFields",value:function(){jQuery('label[for="ppcp-credit-card-gateway-card-number"]').removeClass("ppcp-credit-card-gateway-form-field-disabled"),jQuery("#ppcp-credit-card-gateway-card-number").removeClass("ppcp-credit-card-gateway-form-field-disabled"),jQuery('label[for="ppcp-credit-card-gateway-card-expiry"]').removeClass("ppcp-credit-card-gateway-form-field-disabled"),jQuery("#ppcp-credit-card-gateway-card-expiry").removeClass("ppcp-credit-card-gateway-form-field-disabled"),jQuery('label[for="ppcp-credit-card-gateway-card-cvc"]').removeClass("ppcp-credit-card-gateway-form-field-disabled"),jQuery("#ppcp-credit-card-gateway-card-cvc").removeClass("ppcp-credit-card-gateway-form-field-disabled"),jQuery('label[for="vault"]').removeClass("ppcp-credit-card-gateway-form-field-disabled"),jQuery("#ppcp-credit-card-vault").removeClass("ppcp-credit-card-gateway-form-field-disabled"),jQuery("#ppcp-credit-card-vault").attr("disabled",!1),this.renderer.enableCreditCardFields()}}])&&D(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();r(1299),r(2419),r(4819),r(1637),r(4765);var U=function(){return new URLSearchParams(window.location.search).has("change_payment_method")};function Q(t){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Q(t)}function V(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function $(){return $="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=z(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},$.apply(this,arguments)}function z(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Y(t)););return t}function J(t,e){return J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},J(t,e)}function W(t,e){if(e&&("object"===Q(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Y(t){return Y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Y(t)}const X=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&J(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Y(n);if(o){var r=Y(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return W(this,t)});function a(t,e,r,n,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,t,e,r,n,o)}return e=a,(r=[{key:"updateUi",value:function(){U()||$(Y(a.prototype),"updateUi",this).call(this)}}])&&V(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(H);r(189);var K=r(9996),Z=r.n(K);function tt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function et(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?tt(Object(r),!0).forEach((function(e){rt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function rt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nt(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=it(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function ot(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||it(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function it(t,e){if(t){if("string"==typeof t)return at(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?at(t,e):void 0}}function at(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ct(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}const ut=function(){function t(e,r,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.defaultSettings=r,this.creditCardRenderer=e,this.onSmartButtonClick=n,this.onSmartButtonsInit=o,this.buttonsOptions={},this.onButtonsInitListeners={},this.renderedSources=new Set}var e,r;return e=t,r=[{key:"render",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},n=Z()(this.defaultSettings,e),o=Object.fromEntries(Object.entries(n.separate_buttons).filter((function(t){var e=ot(t,2),r=(e[0],e[1]);return document.querySelector(r.wrapper)}))),i=0!==Object.keys(o).length;if(i){var a,c=nt(paypal.getFundingSources().filter((function(t){return!(t in o)})));try{for(c.s();!(a=c.n()).done;){var u=a.value,s=n.button.style;"paypal"!==u&&(s={shape:s.shape,color:s.color},"paylater"!==u&&delete s.color),this.renderButtons(n.button.wrapper,s,t,i,u)}}catch(t){c.e(t)}finally{c.f()}}else this.renderButtons(n.button.wrapper,n.button.style,t,i);this.creditCardRenderer&&this.creditCardRenderer.render(n.hosted_fields.wrapper,r);for(var l=0,f=Object.entries(o);l<f.length;l++){var p=ot(f[l],2),d=p[0],h=p[1];this.renderButtons(h.wrapper,h.style,t,i,d)}}},{key:"renderButtons",value:function(t,e,r,n){var o,i=this,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(document.querySelector(t)&&!this.isAlreadyRendered(t,a,n)&&void 0!==paypal.Buttons){a&&(r.fundingSource=a);var c=paypal.Buttons(et(et({style:e},r),{},{onClick:this.onSmartButtonClick,onInit:function(e,r){i.onSmartButtonsInit&&i.onSmartButtonsInit(e,r),i.handleOnButtonsInit(t,e,r)}}));c.isEligible()&&(c.render(t),this.renderedSources.add(null!==(o=t+a)&&void 0!==o?o:""))}}},{key:"isAlreadyRendered",value:function(t,e,r){var n;return r?this.renderedSources.has(null!==(n=t+e)&&void 0!==n?n:""):document.querySelector(t).hasChildNodes()}},{key:"disableCreditCardFields",value:function(){this.creditCardRenderer.disableFields()}},{key:"enableCreditCardFields",value:function(){this.creditCardRenderer.enableFields()}},{key:"onButtonsInit",value:function(t,e,r){this.onButtonsInitListeners[t]=r?[]:this.onButtonsInitListeners[t]||[],this.onButtonsInitListeners[t].push(e)}},{key:"handleOnButtonsInit",value:function(t,e,r){if(this.buttonsOptions[t]={data:e,actions:r},this.onButtonsInitListeners[t]){var n,o=nt(this.onButtonsInitListeners[t]);try{for(o.s();!(n=o.n()).done;){var i=n.value;"function"==typeof i&&i(et({wrapper:t},this.buttonsOptions[t]))}}catch(t){o.e(t)}finally{o.f()}}}},{key:"disableSmartButtons",value:function(t){this.buttonsOptions[t]&&this.buttonsOptions[t].actions.disable()}},{key:"enableSmartButtons",value:function(t){this.buttonsOptions[t]&&this.buttonsOptions[t].actions.enable()}}],r&&ct(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function st(t){return st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},st(t)}function lt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}const ft=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.genericErrorText=e,this.wrapper=r}var e,r;return e=t,(r=[{key:"genericError",value:function(){this.clear(),this.message(this.genericErrorText)}},{key:"appendPreparedErrorMessageElement",value:function(t){this._getMessageContainer().replaceWith(t)}},{key:"message",value:function(t){this._addMessage(t),this._scrollToMessages()}},{key:"messages",value:function(t){var e=this;t.forEach((function(t){return e._addMessage(t)})),this._scrollToMessages()}},{key:"currentHtml",value:function(){return this._getMessageContainer().outerHTML}},{key:"_addMessage",value:function(t){if("undefined"!=typeof String&&!st(String)||0===t.length)throw new Error("A new message text must be a non-empty string.");var e=this._getMessageContainer(),r=this._prepareMessageElement(t);e.appendChild(r)}},{key:"_scrollToMessages",value:function(){jQuery.scroll_to_notices(jQuery(".woocommerce-error"))}},{key:"_getMessageContainer",value:function(){var t=document.querySelector("ul.woocommerce-error");return null===t&&((t=document.createElement("ul")).setAttribute("class","woocommerce-error"),t.setAttribute("role","alert"),jQuery(this.wrapper).prepend(t)),t}},{key:"_prepareMessageElement",value:function(t){var e=document.createElement("li");return e.innerHTML=t,e}},{key:"clear",value:function(){jQuery(".woocommerce-error, .woocommerce-message").remove()}}])&&lt(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();r(2479),r(2772);const pt=function(t){var e=window.getComputedStyle(t),r=document.createElement("span");return r.setAttribute("id",t.id),r.setAttribute("class",t.className),Object.values(e).forEach((function(t){e[t]&&isNaN(t)&&"background-image"!==t&&r.style.setProperty(t,""+e[t])})),r};function dt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}const ht=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.defaultConfig=e,this.errorHandler=r,this.spinner=n,this.cardValid=!1,this.formValid=!1,this.emptyFields=new Set(["number","cvv","expirationDate"]),this.currentHostedFieldsInstance=null}var e,r;return e=t,(r=[{key:"render",value:function(t,e){var r=this;if(("checkout"===this.defaultConfig.context||"pay-now"===this.defaultConfig.context)&&null!==t&&null!==document.querySelector(t))if(void 0!==paypal.HostedFields&&paypal.HostedFields.isEligible()){var n=t+" button";this.currentHostedFieldsInstance&&(this.currentHostedFieldsInstance.teardown().catch((function(t){return console.error("Hosted fields teardown error: ".concat(t))})),this.currentHostedFieldsInstance=null);var o=document.querySelector(".payment_box.payment_method_ppcp-credit-card-gateway");if(o){var i=o.style.display;o.style.display="block";var a=document.querySelector("#ppcp-hide-dcc");a&&a.parentNode.removeChild(a);var c=document.querySelector("#ppcp-credit-card-gateway-card-number"),u=window.getComputedStyle(c),s={};Object.values(u).forEach((function(t){u[t]&&(s[t]=""+u[t])}));var l=pt(c);c.parentNode.replaceChild(l,c);var f=document.querySelector("#ppcp-credit-card-gateway-card-expiry"),p=pt(f);f.parentNode.replaceChild(p,f);var d=document.querySelector("#ppcp-credit-card-gateway-card-cvc"),h=pt(d);d.parentNode.replaceChild(h,d),o.style.display=i;var y=".payment_box payment_method_ppcp-credit-card-gateway";this.defaultConfig.enforce_vault&&document.querySelector(y+" .ppcp-credit-card-vault")&&(document.querySelector(y+" .ppcp-credit-card-vault").checked=!0,document.querySelector(y+" .ppcp-credit-card-vault").setAttribute("disabled",!0)),paypal.HostedFields.render({createOrder:e.createOrder,styles:{input:s},fields:{number:{selector:"#ppcp-credit-card-gateway-card-number",placeholder:this.defaultConfig.hosted_fields.labels.credit_card_number},cvv:{selector:"#ppcp-credit-card-gateway-card-cvc",placeholder:this.defaultConfig.hosted_fields.labels.cvv},expirationDate:{selector:"#ppcp-credit-card-gateway-card-expiry",placeholder:this.defaultConfig.hosted_fields.labels.mm_yy}}}).then((function(o){document.dispatchEvent(new CustomEvent("hosted_fields_loaded")),r.currentHostedFieldsInstance=o,o.on("inputSubmitRequest",(function(){r._submit(e)})),o.on("cardTypeChange",(function(t){if(t.cards.length){var e=r.defaultConfig.hosted_fields.valid_cards;r.cardValid=-1!==e.indexOf(t.cards[0].type);var n=r._cardNumberFiledCLassNameByCardType(t.cards[0].type);r._recreateElementClassAttribute(l,c.className),t.fields.number.isValid&&l.classList.add(n)}else r.cardValid=!1})),o.on("validityChange",(function(t){var e=Object.keys(t.fields).every((function(e){return t.fields[e].isValid})),n=t.cards.length?r._cardNumberFiledCLassNameByCardType(t.cards[0].type):"";t.fields.number.isValid?l.classList.add(n):r._recreateElementClassAttribute(l,c.className),r.formValid=e})),o.on("empty",(function(t){r.emptyFields.add(t.emittedBy)})),o.on("notEmpty",(function(t){r.emptyFields.delete(t.emittedBy)})),k(n),!0!==document.querySelector(t).getAttribute("data-ppcp-subscribed")&&(document.querySelector(n).addEventListener("click",(function(t){t.preventDefault(),r._submit(e)})),document.querySelector(t).setAttribute("data-ppcp-subscribed",!0))})),document.querySelector("#payment_method_ppcp-credit-card-gateway").addEventListener("click",(function(){document.querySelector("label[for=ppcp-credit-card-gateway-card-number]").click()}))}}else{var v=document.querySelector(t);v.parentNode.removeChild(v)}}},{key:"disableFields",value:function(){this.currentHostedFieldsInstance&&(this.currentHostedFieldsInstance.setAttribute({field:"number",attribute:"disabled"}),this.currentHostedFieldsInstance.setAttribute({field:"cvv",attribute:"disabled"}),this.currentHostedFieldsInstance.setAttribute({field:"expirationDate",attribute:"disabled"}))}},{key:"enableFields",value:function(){this.currentHostedFieldsInstance&&(this.currentHostedFieldsInstance.removeAttribute({field:"number",attribute:"disabled"}),this.currentHostedFieldsInstance.removeAttribute({field:"cvv",attribute:"disabled"}),this.currentHostedFieldsInstance.removeAttribute({field:"expirationDate",attribute:"disabled"}))}},{key:"_submit",value:function(t){var e=this;if(this.spinner.block(),this.errorHandler.clear(),this.formValid&&this.cardValid){var r=!!this.defaultConfig.can_save_vault_token,n=document.getElementById("ppcp-credit-card-vault")?document.getElementById("ppcp-credit-card-vault").checked:r;this.defaultConfig.enforce_vault&&(n=!0);var o=this.defaultConfig.hosted_fields.contingency,i={vault:n};if("NO_3D_SECURE"!==o&&(i.contingencies=[o]),this.defaultConfig.payer&&(i.cardholderName=this.defaultConfig.payer.name.given_name+" "+this.defaultConfig.payer.name.surname),!i.cardholderName){var a=document.getElementById("billing_first_name")?document.getElementById("billing_first_name").value:"",c=document.getElementById("billing_last_name")?document.getElementById("billing_last_name").value:"";i.cardholderName=a+" "+c}this.currentHostedFieldsInstance.submit(i).then((function(r){return r.orderID=r.orderId,e.spinner.unblock(),t.onApprove(r)})).catch((function(t){var r,n,o,i,a,c;e.spinner.unblock(),e.errorHandler.clear(),null!==(r=t.data)&&void 0!==r&&null!==(n=r.details)&&void 0!==n&&n.length?e.errorHandler.message(t.data.details.map((function(t){return"".concat(t.issue," ").concat(t.description)})).join("<br/>")):null!==(o=t.details)&&void 0!==o&&o.length?e.errorHandler.message(t.details.map((function(t){return"".concat(t.issue," ").concat(t.description)})).join("<br/>")):(null===(i=t.data)||void 0===i||null===(a=i.errors)||void 0===a?void 0:a.length)>0?e.errorHandler.messages(t.data.errors):null!==(c=t.data)&&void 0!==c&&c.message?e.errorHandler.message(t.data.message):t.message?e.errorHandler.message(t.message):e.errorHandler.genericError()}))}else{this.spinner.unblock();var u=this.defaultConfig.labels.error.generic;this.emptyFields.size>0?u=this.defaultConfig.hosted_fields.labels.fields_empty:this.cardValid?this.formValid||(u=this.defaultConfig.hosted_fields.labels.fields_not_valid):u=this.defaultConfig.hosted_fields.labels.card_not_supported,this.errorHandler.message(u)}}},{key:"_cardNumberFiledCLassNameByCardType",value:function(t){return"american-express"===t?"amex":t.replace("-","")}},{key:"_recreateElementClassAttribute",value:function(t,e){t.removeAttribute("class"),t.setAttribute("class",e)}}])&&dt(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function yt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}const vt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.config=e,this.optionsFingerprint=null}var e,r;return e=t,(r=[{key:"render",value:function(){var t=this;if(this.shouldRender()){var e={amount:this.config.amount,placement:this.config.placement,style:this.config.style};this.optionsEqual(e)||(paypal.Messages(e).render(this.config.wrapper),jQuery(document.body).on("updated_cart_totals",(function(){paypal.Messages(e).render(t.config.wrapper)})))}}},{key:"renderWithAmount",value:function(t){if(this.shouldRender()){var e={amount:t,placement:this.config.placement,style:this.config.style};if(!this.optionsEqual(e)){var r=document.createElement("div");r.setAttribute("id",this.config.wrapper.replace("#",""));var n=document.querySelector(this.config.wrapper),o=n.nextSibling;n.parentElement.removeChild(n),o.parentElement.insertBefore(r,o),paypal.Messages(e).render(this.config.wrapper)}}}},{key:"optionsEqual",value:function(t){var e=JSON.stringify(t);return this.optionsFingerprint===e||(this.optionsFingerprint=e,!1)}},{key:"shouldRender",value:function(){return void 0!==paypal.Messages&&void 0!==this.config.wrapper&&!!document.querySelector(this.config.wrapper)}}])&&yt(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function mt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}const bt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"form.woocommerce-checkout";mt(this,t),this.target=e}var e,r;return e=t,(r=[{key:"setTarget",value:function(t){this.target=t}},{key:"block",value:function(){jQuery(this.target).block({message:null,overlayCSS:{background:"#fff",opacity:.6}})}},{key:"unblock",value:function(){jQuery(this.target).unblock()}}])&&gt(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function wt(t){return wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wt(t)}function xt(){xt=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new _(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function d(){}var h={};c(h,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(h=v);var m=d.prototype=f.prototype=Object.create(h);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==wt(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=d,c(m,"constructor",d),c(d,"constructor",p),p.displayName=c(d,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function St(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function _t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}const jt=function(){function t(e,r,n,o,i,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.config=e,this.formSelector=r,this.formSaver=n,this.formValidator=o,this.spinner=i,this.errorHandler=a}var e,r,n,o;return e=t,r=[{key:"handle",value:(n=xt().mark((function t(){var e,r,n;return xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.spinner.block(),t.prev=1,t.next=4,this.formSaver.save(document.querySelector(this.formSelector));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),console.error(t.t0);case 9:if(t.prev=9,!this.formValidator){t.next=25;break}return t.prev=11,t.next=14,this.formValidator.validate(document.querySelector(this.formSelector));case 14:if(!((e=t.sent).length>0)){t.next=20;break}return this.spinner.unblock(),this.errorHandler.messages(e),jQuery(document.body).trigger("checkout_error",[this.errorHandler.currentHtml()]),t.abrupt("return");case 20:t.next=25;break;case 22:t.prev=22,t.t1=t.catch(11),console.error(t.t1);case 25:return t.next=27,fetch(this.config.ajax.vault_paypal.endpoint,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({nonce:this.config.ajax.vault_paypal.nonce,return_url:location.href})});case 27:return r=t.sent,t.next=30,r.json();case 30:if((n=t.sent).success){t.next=33;break}throw Error(n.data.message);case 33:location.href=n.data.approve_link,t.next=41;break;case 36:t.prev=36,t.t2=t.catch(9),this.spinner.unblock(),console.error(t.t2),this.errorHandler.message(data.data.message);case 41:case"end":return t.stop()}}),t,this,[[1,6],[9,36],[11,22]])})),o=function(){var t=this,e=arguments;return new Promise((function(r,o){var i=n.apply(t,e);function a(t){St(i,r,o,a,c,"next",t)}function c(t){St(i,r,o,a,c,"throw",t)}a(void 0)}))},function(){return o.apply(this,arguments)})}],r&&_t(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ot(t){return Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ot(t)}function Et(){Et=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new _(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function d(){}var h={};c(h,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(h=v);var m=d.prototype=f.prototype=Object.create(h);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Ot(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=d,c(m,"constructor",d),c(d,"constructor",p),p.displayName=c(d,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Pt(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function kt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Ct=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.nonce=r}var e,r,n,o;return e=t,r=[{key:"save",value:(n=Et().mark((function t(e){var r,n,o,i;return Et().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new FormData(e),n=Object.fromEntries(r.entries()),t.next=4,fetch(this.url,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({nonce:this.nonce,form:n})});case 4:return o=t.sent,t.next=7,o.json();case 7:if((i=t.sent).success){t.next=10;break}throw Error(i.data.message);case 10:case"end":return t.stop()}}),t,this)})),o=function(){var t=this,e=arguments;return new Promise((function(r,o){var i=n.apply(t,e);function a(t){Pt(i,r,o,a,c,"next",t)}function c(t){Pt(i,r,o,a,c,"throw",t)}a(void 0)}))},function(t){return o.apply(this,arguments)})}],r&&kt(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function At(t){return At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},At(t)}function Lt(){Lt=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new _(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function d(){}var h={};c(h,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(h=v);var m=d.prototype=f.prototype=Object.create(h);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==At(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=d,c(m,"constructor",d),c(d,"constructor",p),p.displayName=c(d,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Tt(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function It(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Rt=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.nonce=r}var e,r,n,o;return e=t,r=[{key:"validate",value:(n=Lt().mark((function t(e){var r,n,o,i;return Lt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new FormData(e),n=Object.fromEntries(r.entries()),t.next=4,fetch(this.url,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({nonce:this.nonce,form:n})});case 4:return o=t.sent,t.next=7,o.json();case 7:if((i=t.sent).success){t.next=13;break}if(i.data.refresh&&jQuery(document.body).trigger("update_checkout"),!i.data.errors){t.next=12;break}return t.abrupt("return",i.data.errors);case 12:throw Error(i.data.message);case 13:return t.abrupt("return",[]);case 14:case"end":return t.stop()}}),t,this)})),o=function(){var t=this,e=arguments;return new Promise((function(r,o){var i=n.apply(t,e);function a(t){Tt(i,r,o,a,c,"next",t)}function c(t){Tt(i,r,o,a,c,"throw",t)}a(void 0)}))},function(t){return o.apply(this,arguments)})}],r&&It(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();const Ft=function(t,e){fetch(e.endpoint,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({nonce:e.nonce})}).then((function(t){return t.json()})).then((function(r){var n;(function(t,e){return!(!t||t.user!==e||(new Date).getTime()>=1e3*t.expiration)})(r,e.user)&&(n=r,sessionStorage.setItem("ppcp-data-client-id",JSON.stringify(n)),t.setAttribute("data-client-token",r.token),document.body.appendChild(t))}))};function Nt(t,e){if(t){if("string"==typeof t)return qt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?qt(t,e):void 0}}function qt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Gt(t){return Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gt(t)}function Mt(){Mt=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new _(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function d(){}var h={};c(h,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(h=v);var m=d.prototype=f.prototype=Object.create(h);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Gt(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=d,c(m,"constructor",d),c(d,"constructor",p),p.displayName=c(d,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Bt(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}var Dt=new bt(document.querySelector(".ppc-button-wrapper")),Ht=new bt("#ppcp-hosted-fields");document.addEventListener("DOMContentLoaded",(function(){if("undefined"==typeof PayPalCommerceGateway||Gt(PayPalCommerceGateway)){if("checkout"===PayPalCommerceGateway.context||0!==PayPalCommerceGateway.data_client_id.user||!PayPalCommerceGateway.data_client_id.has_subscriptions){var t=[n.PAYPAL].concat(function(t){if(Array.isArray(t))return qt(t)}(a=Object.entries(PayPalCommerceGateway.separate_buttons).map((function(t){var e,r,n=(r=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(e,r)||Nt(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return n[0],n[1].id})))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(a)||Nt(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),e=function(){if(!(!["checkout","pay-now"].includes(PayPalCommerceGateway.context)||U()||PayPalCommerceGateway.is_free_trial_cart&&""!==PayPalCommerceGateway.vaulted_paypal_email)){var e=i(),r=t.includes(e),a=e===n.CARDS;E(o,!r&&!a,"ppcp-hidden"),r?Dt.block():Dt.unblock(),a?Ht.block():Ht.unblock()}};jQuery(document).on("hosted_fields_loaded",(function(){Ht.unblock()}));var r=!1;e(),jQuery(document.body).on("updated_checkout payment_method_selected",(function(){r||e()})),function(t,e){if("undefined"==typeof paypal){var r=document.createElement("script");r.addEventListener("load",e),r.setAttribute("src",t.url),Object.entries(t.script_attributes).forEach((function(t){r.setAttribute(t[0],t[1])})),t.data_client_id.set_attribute?Ft(r,t.data_client_id):document.body.appendChild(r)}else e()}(PayPalCommerceGateway,(function(){r=!0,function(){var t,e="form.woocommerce-checkout",r=PayPalCommerceGateway.context,o=new ft(PayPalCommerceGateway.labels.error.generic,null!==(t=document.querySelector(e))&&void 0!==t?t:document.querySelector(".woocommerce-notices-wrapper")),a=new bt,c=new ht(PayPalCommerceGateway,o,a),u=new Ct(PayPalCommerceGateway.ajax.save_checkout_form.endpoint,PayPalCommerceGateway.ajax.save_checkout_form.nonce),s=PayPalCommerceGateway.early_checkout_validation_enabled?new Rt(PayPalCommerceGateway.ajax.validate_checkout.endpoint,PayPalCommerceGateway.ajax.validate_checkout.nonce):null,l=new jt(PayPalCommerceGateway,e,u,s,a,o);jQuery("form.woocommerce-checkout input").on("keydown",(function(t){"Enter"===t.key&&[n.PAYPAL,n.CARDS,n.CARD_BUTTON].includes(i())&&t.preventDefault()}));var f=function(){var t,n=(t=Mt().mark((function t(n,i){var a,c,s,f,p,d;return Mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(window.ppcpFundingSource=n.fundingSource,jQuery("form.woocommerce-checkout .validate-required:visible :input").each((function(t,e){jQuery(e).trigger("validate")})),!PayPalCommerceGateway.basic_checkout_validation_enabled){t.next=13;break}if(!(a=Array.from(jQuery("form.woocommerce-checkout .validate-required.woocommerce-invalid:visible"))).length){t.next=13;break}return c=document.querySelector(".woocommerce-billing-fields"),s=document.querySelector(".woocommerce-shipping-fields"),f=PayPalCommerceGateway.labels.error.required.elements,p=a.map((function(t){var e,r=null===(e=t.querySelector("[name]"))||void 0===e?void 0:e.getAttribute("name");if(r&&r in f)return f[r];var n=t.querySelector("label").textContent.replaceAll("*","").trim();return null!=c&&c.contains(t)&&(n=PayPalCommerceGateway.labels.billing_field.replace("%s",n)),null!=s&&s.contains(t)&&(n=PayPalCommerceGateway.labels.shipping_field.replace("%s",n)),PayPalCommerceGateway.labels.error.required.field.replace("%s","<strong>".concat(n,"</strong>"))})).filter((function(t){return t.length>2})),o.clear(),p.length?o.messages(p):o.message(PayPalCommerceGateway.labels.error.required.generic),t.abrupt("return",i.reject());case 13:if((d=document.querySelector(e))&&(jQuery("#ppcp-funding-source-form-input").remove(),d.insertAdjacentHTML("beforeend",'<input type="hidden" name="ppcp-funding-source" value="'.concat(n.fundingSource,'" id="ppcp-funding-source-form-input">'))),!PayPalCommerceGateway.is_free_trial_cart||"card"===n.fundingSource){t.next=19;break}return l.handle(),t.abrupt("return",i.reject());case 19:if("checkout"!==r||PayPalCommerceGateway.funding_sources_without_redirect.includes(n.fundingSource)){t.next=28;break}return t.prev=20,t.next=23,u.save(d);case 23:t.next=28;break;case 25:t.prev=25,t.t0=t.catch(20),console.error(t.t0);case 28:case"end":return t.stop()}}),t,null,[[20,25]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Bt(i,n,o,a,c,"next",t)}function c(t){Bt(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t,e){return n.apply(this,arguments)}}(),p=new ut(c,PayPalCommerceGateway,f,(function(){Dt.unblock()})),d=new vt(PayPalCommerceGateway.messages);"mini-cart"!==r&&"product"!==r||"1"===PayPalCommerceGateway.mini_cart_buttons_enabled&&new y(PayPalCommerceGateway,p,o).init(),"product"===r&&"1"===PayPalCommerceGateway.single_product_buttons_enabled&&new A(PayPalCommerceGateway,p,d,o).init(),"cart"===r&&new T(PayPalCommerceGateway,p,o).init(),"checkout"===r&&new H(PayPalCommerceGateway,p,d,a,o).init(),"pay-now"===r&&new X(PayPalCommerceGateway,p,d,a,o).init(),"checkout"!==r&&d.render()}()}))}}else console.error("PayPal button could not be configured.");var a}))})()})();
var mailchimp,mailchimp_cart,mailchimp_billing_email,mailchimp_username_email,mailchimp_registration_email,mailchimp_submitted_email=false,mailchimpReady=function(a){/in/.test(document.readyState)?setTimeout("mailchimpReady("+a+")",9):a()};function mailchimpGetCurrentUserByHash(a){try{if(!mailchimp_public_data.allowed_to_set_cookies)return;var b=mailchimp_public_data.ajax_url+"?action=mailchimp_get_user_by_hash&hash="+a,c=new XMLHttpRequest;c.open("POST",b,!0),c.onload=function(){if(c.status>=200&&c.status<400){var a=JSON.parse(c.responseText);if(!a)return;mailchimp_cart.valueEmail(a.email)&&mailchimp_cart.setEmail(a.email)}};c.onerror=function(){console.log("mailchimp.get_email_by_hash.request.error",c.responseText)};c.setRequestHeader("Content-Type","application/json");c.setRequestHeader("Accept","application/json");c.send()}catch(a){console.log("mailchimp.get_email_by_hash.error",a)}}function mailchimpHandleBillingEmail(selector){try{if(!mailchimp_public_data.allowed_to_set_cookies)return;if(mailchimp_public_data.disable_carts)return;var subscribed=document.querySelector("#mailchimp_woocommerce_newsletter");if(!selector)selector="#billing_email";var a=document.querySelector(selector);var b=void 0!==a?a.value:"";if(!mailchimp_cart.valueEmail(b)||mailchimp_submitted_email===b){return false}mailchimp_cart.setEmail(b);console.log(b);console.log(mailchimp_cart);var c=mailchimp_public_data.ajax_url+"?action=mailchimp_set_user_by_email";var d=new XMLHttpRequest;d.open("POST",c,!0);d.onload=function(){console.log(d);var successful=d.status>=200&&d.status<400;var msg=successful?"mailchimp.handle_billing_email.request.success":"mailchimp.handle_billing_email.request.error";if(successful){mailchimp_submitted_email=b}console.log(msg,d.responseText)};d.onerror=function(){console.log("mailchimp.handle_billing_email.request.error",d.responseText)};d.setRequestHeader("Content-Type","application/x-www-form-urlencoded");d.setRequestHeader("Accept","application/json");d.send("email="+b+"&mc_language="+mailchimp_public_data.language+"&subscribed="+(subscribed&&subscribed.checked?"1":"0"));return true}catch(a){console.log("mailchimp.handle_billing_email.error",a);mailchimp_submitted_email=!1}}!function(){"use strict";function mailchimpCart(){this.email_types="input[type=email]";this.regex_email=/^([A-Za-z0-9_+\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;this.current_email=null;this.previous_email=null;this.expireUser=function(){this.current_email=null;if(!mailchimp_public_data.allowed_to_set_cookies)return;mailchimp.storage.expire("mailchimp.cart.current_email")};this.expireSaved=function(){if(!mailchimp_public_data.allowed_to_set_cookies)return;mailchimp.storage.expire("mailchimp.cart.items")};this.setEmail=function(a){if(!mailchimp_public_data.allowed_to_set_cookies)return;if(!this.valueEmail(a))return false;this.setPreviousEmail(this.getEmail());mailchimp.storage.set("mailchimp.cart.current_email",this.current_email=a)};this.getEmail=function(){if(!mailchimp_public_data.allowed_to_set_cookies)return;if(this.current_email)return this.current_email;var a=mailchimp.storage.get("mailchimp.cart.current_email",!1);if(!a||!this.valueEmail(a))return false;return this.current_email=a};this.setPreviousEmail=function(a){if(!mailchimp_public_data.allowed_to_set_cookies)return;if(!this.valueEmail(a))return false;mailchimp.storage.set("mailchimp.cart.previous_email",this.previous_email=a)};this.valueEmail=function(a){return this.regex_email.test(a)};return this}var g={extend:function(a,b){for(var c in b||{})b.hasOwnProperty(c)&&(a[c]=b[c]);return a},getQueryStringVars:function(){var a=window.location.search||"",b=[],c={};if(a=a.substr(1),a.length){b=a.split("&");for(var d in b){var e=b[d];if("string"==typeof e){var f=e.split("="),g=f[0],h=f[1];g.length&&("undefined"==typeof c[g]&&(c[g]=[]),c[g].push(h))}}}return c},unEscape:function(a){return decodeURIComponent(a)},escape:function(a){return encodeURIComponent(a)},createDate:function(a,b){a||(a=0);var c=new Date,d=b?c.getDate()-a:c.getDate()+a;return c.setDate(d),c},arrayUnique:function(a){for(var b=a.concat(),c=0;c<b.length;++c)for(var d=c+1;d<b.length;++d)b[c]===b[d]&&b.splice(d,1);return b},objectCombineUnique:function(a){for(var b=a[0],c=1;c<a.length;c++){var d=a[c];for(var e in d)b[e]=d[e]}return b}},h=function(a,b){var c=function(a,b,d){return 1===arguments.length?c.get(a):c.set(a,b,d)};return c.get=function(b,d){return a.cookie!==c._cacheString&&c._populateCache(),void 0==c._cache[b]?d:c._cache[b]},c.defaults={path:"/",secure:true,samesite:"strict"},c.set=function(d,e,f){switch(f={path:f&&f.path||c.defaults.path,domain:f&&f.domain||c.defaults.domain,expires:f&&f.expires||c.defaults.expires,secure:f&&f.secure!==b?f.secure:c.defaults.secure,samesite:f&&f.samesite||c.defaults.samesite},e===b&&(f.expires=-1),typeof f.expires){case"number":f.expires=new Date((new Date).getTime()+1e3*f.expires);break;case"string":f.expires=new Date(f.expires)}return d=encodeURIComponent(d)+"="+(e+"").replace(/[^!#-+\--:<-\[\]-~]/g,encodeURIComponent),d+=f.path?";path="+f.path:"",d+=f.domain?";domain="+f.domain:"",d+=f.expires?";expires="+f.expires.toGMTString():"",d+=f.secure?";secure":"",d+=f.samesite?";samesite="+f.samesite:"",a.cookie=d,c},c.expire=function(a,d){return c.set(a,b,d)},c._populateCache=function(){c._cache={};try{c._cacheString=a.cookie;for(var d=c._cacheString.split("; "),e=0;e<d.length;e++){var f=d[e].indexOf("="),g=decodeURIComponent(d[e].substr(0,f)),f=decodeURIComponent(d[e].substr(f+1));c._cache[g]===b&&(c._cache[g]=f)}}catch(a){console.log(a)}},c.enabled=function(){var a="1"===c.set("cookies.js","1").get("cookies.js");return c.expire("cookies.js"),a}(),c}(document);mailchimp={storage:h,utils:g};mailchimp_cart=new mailchimpCart}();mailchimpReady(function(){console.log("mailchimp ready");if(!mailchimp_public_data.allowed_to_set_cookies)return;if(mailchimp_public_data.disable_carts)return;if(void 0===a){var a={site_url:document.location.origin,defaulted:!0,ajax_url:document.location.origin+"/wp-admin?admin-ajax.php"}}try{var b=mailchimp.utils.getQueryStringVars();void 0!==b.mc_cart_id&&mailchimpGetCurrentUserByHash(b.mc_cart_id);var subscribed=document.querySelector("#mailchimp_woocommerce_newsletter");if(subscribed){subscribed.onchange=function(){mailchimp_submitted_email=null;mailchimpHandleBillingEmail("#billing_email")}}mailchimp_username_email=document.querySelector("#username");mailchimp_billing_email=document.querySelector("#billing_email");mailchimp_registration_email=document.querySelector("#reg_email");if(mailchimp_billing_email){mailchimp_billing_email.onblur=function(){mailchimpHandleBillingEmail("#billing_email")};mailchimp_billing_email.onfocus=function(){mailchimpHandleBillingEmail("#billing_email")}}if(mailchimp_username_email){mailchimp_username_email.onblur=function(){mailchimpHandleBillingEmail("#username")};mailchimp_username_email.onfocus=function(){mailchimpHandleBillingEmail("#username")}}if(mailchimp_registration_email){mailchimp_registration_email.onblur=function(){mailchimpHandleBillingEmail("#reg_email")};mailchimp_registration_email.onfocus=function(){mailchimpHandleBillingEmail("#reg_email")}}}catch(e){console.log("mailchimp ready error",e)}});
/*!
 * Isotope PACKAGED v3.0.1
 *
 * Licensed GPLv3 for open source use
 * or Isotope Commercial License for commercial use
 *
 * http://isotope.metafizzy.co
 * Copyright 2016 Metafizzy
 */
!function(t,e){"use strict";"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(i){e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("jquery")):t.jQueryBridget=e(t,t.jQuery)}(window,function(t,e){"use strict";function i(i,s,a){function u(t,e,n){var o,s="$()."+i+'("'+e+'")';return t.each(function(t,u){var h=a.data(u,i);if(!h)return void r(i+" not initialized. Cannot call methods, i.e. "+s);var d=h[e];if(!d||"_"==e.charAt(0))return void r(s+" is not a valid method");var l=d.apply(h,n);o=void 0===o?l:o}),void 0!==o?o:t}function h(t,e){t.each(function(t,n){var o=a.data(n,i);o?(o.option(e),o._init()):(o=new s(n,e),a.data(n,i,o))})}a=a||e||t.jQuery,a&&(s.prototype.option||(s.prototype.option=function(t){a.isPlainObject(t)&&(this.options=a.extend(!0,this.options,t))}),a.fn[i]=function(t){if("string"==typeof t){var e=o.call(arguments,1);return u(this,t,e)}return h(this,t),this},n(a))}function n(t){!t||t&&t.bridget||(t.bridget=i)}var o=Array.prototype.slice,s=t.console,r="undefined"==typeof s?function(){}:function(t){s.error(t)};return n(e||t.jQuery),i}),function(t,e){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",e):"object"==typeof module&&module.exports?module.exports=e():t.EvEmitter=e()}("undefined"!=typeof window?window:this,function(){function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var i=this._events=this._events||{},n=i[t]=i[t]||[];return-1==n.indexOf(e)&&n.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var i=this._onceEvents=this._onceEvents||{},n=i[t]=i[t]||{};return n[e]=!0,this}},e.off=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=i.indexOf(e);return-1!=n&&i.splice(n,1),this}},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=0,o=i[n];e=e||[];for(var s=this._onceEvents&&this._onceEvents[t];o;){var r=s&&s[o];r&&(this.off(t,o),delete s[o]),o.apply(this,e),n+=r?0:1,o=i[n]}return this}},t}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("get-size/get-size",[],function(){return e()}):"object"==typeof module&&module.exports?module.exports=e():t.getSize=e()}(window,function(){"use strict";function t(t){var e=parseFloat(t),i=-1==t.indexOf("%")&&!isNaN(e);return i&&e}function e(){}function i(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0;h>e;e++){var i=u[e];t[i]=0}return t}function n(t){var e=getComputedStyle(t);return e||a("Style returned "+e+". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1"),e}function o(){if(!d){d=!0;var e=document.createElement("div");e.style.width="200px",e.style.padding="1px 2px 3px 4px",e.style.borderStyle="solid",e.style.borderWidth="1px 2px 3px 4px",e.style.boxSizing="border-box";var i=document.body||document.documentElement;i.appendChild(e);var o=n(e);s.isBoxSizeOuter=r=200==t(o.width),i.removeChild(e)}}function s(e){if(o(),"string"==typeof e&&(e=document.querySelector(e)),e&&"object"==typeof e&&e.nodeType){var s=n(e);if("none"==s.display)return i();var a={};a.width=e.offsetWidth,a.height=e.offsetHeight;for(var d=a.isBorderBox="border-box"==s.boxSizing,l=0;h>l;l++){var f=u[l],c=s[f],m=parseFloat(c);a[f]=isNaN(m)?0:m}var p=a.paddingLeft+a.paddingRight,y=a.paddingTop+a.paddingBottom,g=a.marginLeft+a.marginRight,v=a.marginTop+a.marginBottom,_=a.borderLeftWidth+a.borderRightWidth,I=a.borderTopWidth+a.borderBottomWidth,z=d&&r,x=t(s.width);x!==!1&&(a.width=x+(z?0:p+_));var S=t(s.height);return S!==!1&&(a.height=S+(z?0:y+I)),a.innerWidth=a.width-(p+_),a.innerHeight=a.height-(y+I),a.outerWidth=a.width+g,a.outerHeight=a.height+v,a}}var r,a="undefined"==typeof console?e:function(t){console.error(t)},u=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],h=u.length,d=!1;return s}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",e):"object"==typeof module&&module.exports?module.exports=e():t.matchesSelector=e()}(window,function(){"use strict";var t=function(){var t=Element.prototype;if(t.matches)return"matches";if(t.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],i=0;i<e.length;i++){var n=e[i],o=n+"MatchesSelector";if(t[o])return o}}();return function(e,i){return e[t](i)}}),function(t,e){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("desandro-matches-selector")):t.fizzyUIUtils=e(t,t.matchesSelector)}(window,function(t,e){var i={};i.extend=function(t,e){for(var i in e)t[i]=e[i];return t},i.modulo=function(t,e){return(t%e+e)%e},i.makeArray=function(t){var e=[];if(Array.isArray(t))e=t;else if(t&&"number"==typeof t.length)for(var i=0;i<t.length;i++)e.push(t[i]);else e.push(t);return e},i.removeFrom=function(t,e){var i=t.indexOf(e);-1!=i&&t.splice(i,1)},i.getParent=function(t,i){for(;t!=document.body;)if(t=t.parentNode,e(t,i))return t},i.getQueryElement=function(t){return"string"==typeof t?document.querySelector(t):t},i.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},i.filterFindElements=function(t,n){t=i.makeArray(t);var o=[];return t.forEach(function(t){if(t instanceof HTMLElement){if(!n)return void o.push(t);e(t,n)&&o.push(t);for(var i=t.querySelectorAll(n),s=0;s<i.length;s++)o.push(i[s])}}),o},i.debounceMethod=function(t,e,i){var n=t.prototype[e],o=e+"Timeout";t.prototype[e]=function(){var t=this[o];t&&clearTimeout(t);var e=arguments,s=this;this[o]=setTimeout(function(){n.apply(s,e),delete s[o]},i||100)}},i.docReady=function(t){var e=document.readyState;"complete"==e||"interactive"==e?t():document.addEventListener("DOMContentLoaded",t)},i.toDashed=function(t){return t.replace(/(.)([A-Z])/g,function(t,e,i){return e+"-"+i}).toLowerCase()};var n=t.console;return i.htmlInit=function(e,o){i.docReady(function(){var s=i.toDashed(o),r="data-"+s,a=document.querySelectorAll("["+r+"]"),u=document.querySelectorAll(".js-"+s),h=i.makeArray(a).concat(i.makeArray(u)),d=r+"-options",l=t.jQuery;h.forEach(function(t){var i,s=t.getAttribute(r)||t.getAttribute(d);try{i=s&&JSON.parse(s)}catch(a){return void(n&&n.error("Error parsing "+r+" on "+t.className+": "+a))}var u=new e(t,i);l&&l.data(t,o,u)})})},i}),function(t,e){"function"==typeof define&&define.amd?define("outlayer/item",["ev-emitter/ev-emitter","get-size/get-size"],e):"object"==typeof module&&module.exports?module.exports=e(require("ev-emitter"),require("get-size")):(t.Outlayer={},t.Outlayer.Item=e(t.EvEmitter,t.getSize))}(window,function(t,e){"use strict";function i(t){for(var e in t)return!1;return e=null,!0}function n(t,e){t&&(this.element=t,this.layout=e,this.position={x:0,y:0},this._create())}function o(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}var s=document.documentElement.style,r="string"==typeof s.transition?"transition":"WebkitTransition",a="string"==typeof s.transform?"transform":"WebkitTransform",u={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[r],h={transform:a,transition:r,transitionDuration:r+"Duration",transitionProperty:r+"Property",transitionDelay:r+"Delay"},d=n.prototype=Object.create(t.prototype);d.constructor=n,d._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},d.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},d.getSize=function(){this.size=e(this.element)},d.css=function(t){var e=this.element.style;for(var i in t){var n=h[i]||i;e[n]=t[i]}},d.getPosition=function(){var t=getComputedStyle(this.element),e=this.layout._getOption("originLeft"),i=this.layout._getOption("originTop"),n=t[e?"left":"right"],o=t[i?"top":"bottom"],s=this.layout.size,r=-1!=n.indexOf("%")?parseFloat(n)/100*s.width:parseInt(n,10),a=-1!=o.indexOf("%")?parseFloat(o)/100*s.height:parseInt(o,10);r=isNaN(r)?0:r,a=isNaN(a)?0:a,r-=e?s.paddingLeft:s.paddingRight,a-=i?s.paddingTop:s.paddingBottom,this.position.x=r,this.position.y=a},d.layoutPosition=function(){var t=this.layout.size,e={},i=this.layout._getOption("originLeft"),n=this.layout._getOption("originTop"),o=i?"paddingLeft":"paddingRight",s=i?"left":"right",r=i?"right":"left",a=this.position.x+t[o];e[s]=this.getXValue(a),e[r]="";var u=n?"paddingTop":"paddingBottom",h=n?"top":"bottom",d=n?"bottom":"top",l=this.position.y+t[u];e[h]=this.getYValue(l),e[d]="",this.css(e),this.emitEvent("layout",[this])},d.getXValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!e?t/this.layout.size.width*100+"%":t+"px"},d.getYValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&e?t/this.layout.size.height*100+"%":t+"px"},d._transitionTo=function(t,e){this.getPosition();var i=this.position.x,n=this.position.y,o=parseInt(t,10),s=parseInt(e,10),r=o===this.position.x&&s===this.position.y;if(this.setPosition(t,e),r&&!this.isTransitioning)return void this.layoutPosition();var a=t-i,u=e-n,h={};h.transform=this.getTranslate(a,u),this.transition({to:h,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},d.getTranslate=function(t,e){var i=this.layout._getOption("originLeft"),n=this.layout._getOption("originTop");return t=i?t:-t,e=n?e:-e,"translate3d("+t+"px, "+e+"px, 0)"},d.goTo=function(t,e){this.setPosition(t,e),this.layoutPosition()},d.moveTo=d._transitionTo,d.setPosition=function(t,e){this.position.x=parseInt(t,10),this.position.y=parseInt(e,10)},d._nonTransition=function(t){this.css(t.to),t.isCleaning&&this._removeStyles(t.to);for(var e in t.onTransitionEnd)t.onTransitionEnd[e].call(this)},d.transition=function(t){if(!parseFloat(this.layout.options.transitionDuration))return void this._nonTransition(t);var e=this._transn;for(var i in t.onTransitionEnd)e.onEnd[i]=t.onTransitionEnd[i];for(i in t.to)e.ingProperties[i]=!0,t.isCleaning&&(e.clean[i]=!0);if(t.from){this.css(t.from);var n=this.element.offsetHeight;n=null}this.enableTransition(t.to),this.css(t.to),this.isTransitioning=!0};var l="opacity,"+o(a);d.enableTransition=function(){if(!this.isTransitioning){var t=this.layout.options.transitionDuration;t="number"==typeof t?t+"ms":t,this.css({transitionProperty:l,transitionDuration:t,transitionDelay:this.staggerDelay||0}),this.element.addEventListener(u,this,!1)}},d.onwebkitTransitionEnd=function(t){this.ontransitionend(t)},d.onotransitionend=function(t){this.ontransitionend(t)};var f={"-webkit-transform":"transform"};d.ontransitionend=function(t){if(t.target===this.element){var e=this._transn,n=f[t.propertyName]||t.propertyName;if(delete e.ingProperties[n],i(e.ingProperties)&&this.disableTransition(),n in e.clean&&(this.element.style[t.propertyName]="",delete e.clean[n]),n in e.onEnd){var o=e.onEnd[n];o.call(this),delete e.onEnd[n]}this.emitEvent("transitionEnd",[this])}},d.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(u,this,!1),this.isTransitioning=!1},d._removeStyles=function(t){var e={};for(var i in t)e[i]="";this.css(e)};var c={transitionProperty:"",transitionDuration:"",transitionDelay:""};return d.removeTransitionStyles=function(){this.css(c)},d.stagger=function(t){t=isNaN(t)?0:t,this.staggerDelay=t+"ms"},d.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},d.remove=function(){return r&&parseFloat(this.layout.options.transitionDuration)?(this.once("transitionEnd",function(){this.removeElem()}),void this.hide()):void this.removeElem()},d.reveal=function(){delete this.isHidden,this.css({display:""});var t=this.layout.options,e={},i=this.getHideRevealTransitionEndProperty("visibleStyle");e[i]=this.onRevealTransitionEnd,this.transition({from:t.hiddenStyle,to:t.visibleStyle,isCleaning:!0,onTransitionEnd:e})},d.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},d.getHideRevealTransitionEndProperty=function(t){var e=this.layout.options[t];if(e.opacity)return"opacity";for(var i in e)return i},d.hide=function(){this.isHidden=!0,this.css({display:""});var t=this.layout.options,e={},i=this.getHideRevealTransitionEndProperty("hiddenStyle");e[i]=this.onHideTransitionEnd,this.transition({from:t.visibleStyle,to:t.hiddenStyle,isCleaning:!0,onTransitionEnd:e})},d.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},d.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},n}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("outlayer/outlayer",["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(i,n,o,s){return e(t,i,n,o,s)}):"object"==typeof module&&module.exports?module.exports=e(t,require("ev-emitter"),require("get-size"),require("fizzy-ui-utils"),require("./item")):t.Outlayer=e(t,t.EvEmitter,t.getSize,t.fizzyUIUtils,t.Outlayer.Item)}(window,function(t,e,i,n,o){"use strict";function s(t,e){var i=n.getQueryElement(t);if(!i)return void(u&&u.error("Bad element for "+this.constructor.namespace+": "+(i||t)));this.element=i,h&&(this.$element=h(this.element)),this.options=n.extend({},this.constructor.defaults),this.option(e);var o=++l;this.element.outlayerGUID=o,f[o]=this,this._create();var s=this._getOption("initLayout");s&&this.layout()}function r(t){function e(){t.apply(this,arguments)}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e}function a(t){if("number"==typeof t)return t;var e=t.match(/(^\d*\.?\d*)(\w*)/),i=e&&e[1],n=e&&e[2];if(!i.length)return 0;i=parseFloat(i);var o=m[n]||1;return i*o}var u=t.console,h=t.jQuery,d=function(){},l=0,f={};s.namespace="outlayer",s.Item=o,s.defaults={containerStyle:{position:"relative"},initLayout:!0,originLeft:!0,originTop:!0,resize:!0,resizeContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};var c=s.prototype;n.extend(c,e.prototype),c.option=function(t){n.extend(this.options,t)},c._getOption=function(t){var e=this.constructor.compatOptions[t];return e&&void 0!==this.options[e]?this.options[e]:this.options[t]},s.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"},c._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),n.extend(this.element.style,this.options.containerStyle);var t=this._getOption("resize");t&&this.bindResize()},c.reloadItems=function(){this.items=this._itemize(this.element.children)},c._itemize=function(t){for(var e=this._filterFindItemElements(t),i=this.constructor.Item,n=[],o=0;o<e.length;o++){var s=e[o],r=new i(s,this);n.push(r)}return n},c._filterFindItemElements=function(t){return n.filterFindElements(t,this.options.itemSelector)},c.getItemElements=function(){return this.items.map(function(t){return t.element})},c.layout=function(){this._resetLayout(),this._manageStamps();var t=this._getOption("layoutInstant"),e=void 0!==t?t:!this._isLayoutInited;this.layoutItems(this.items,e),this._isLayoutInited=!0},c._init=c.layout,c._resetLayout=function(){this.getSize()},c.getSize=function(){this.size=i(this.element)},c._getMeasurement=function(t,e){var n,o=this.options[t];o?("string"==typeof o?n=this.element.querySelector(o):o instanceof HTMLElement&&(n=o),this[t]=n?i(n)[e]:o):this[t]=0},c.layoutItems=function(t,e){t=this._getItemsForLayout(t),this._layoutItems(t,e),this._postLayout()},c._getItemsForLayout=function(t){return t.filter(function(t){return!t.isIgnored})},c._layoutItems=function(t,e){if(this._emitCompleteOnItems("layout",t),t&&t.length){var i=[];t.forEach(function(t){var n=this._getItemLayoutPosition(t);n.item=t,n.isInstant=e||t.isLayoutInstant,i.push(n)},this),this._processLayoutQueue(i)}},c._getItemLayoutPosition=function(){return{x:0,y:0}},c._processLayoutQueue=function(t){this.updateStagger(),t.forEach(function(t,e){this._positionItem(t.item,t.x,t.y,t.isInstant,e)},this)},c.updateStagger=function(){var t=this.options.stagger;return null===t||void 0===t?void(this.stagger=0):(this.stagger=a(t),this.stagger)},c._positionItem=function(t,e,i,n,o){n?t.goTo(e,i):(t.stagger(o*this.stagger),t.moveTo(e,i))},c._postLayout=function(){this.resizeContainer()},c.resizeContainer=function(){var t=this._getOption("resizeContainer");if(t){var e=this._getContainerSize();e&&(this._setContainerMeasure(e.width,!0),this._setContainerMeasure(e.height,!1))}},c._getContainerSize=d,c._setContainerMeasure=function(t,e){if(void 0!==t){var i=this.size;i.isBorderBox&&(t+=e?i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth:i.paddingBottom+i.paddingTop+i.borderTopWidth+i.borderBottomWidth),t=Math.max(t,0),this.element.style[e?"width":"height"]=t+"px"}},c._emitCompleteOnItems=function(t,e){function i(){o.dispatchEvent(t+"Complete",null,[e])}function n(){r++,r==s&&i()}var o=this,s=e.length;if(!e||!s)return void i();var r=0;e.forEach(function(e){e.once(t,n)})},c.dispatchEvent=function(t,e,i){var n=e?[e].concat(i):i;if(this.emitEvent(t,n),h)if(this.$element=this.$element||h(this.element),e){var o=h.Event(e);o.type=t,this.$element.trigger(o,i)}else this.$element.trigger(t,i)},c.ignore=function(t){var e=this.getItem(t);e&&(e.isIgnored=!0)},c.unignore=function(t){var e=this.getItem(t);e&&delete e.isIgnored},c.stamp=function(t){t=this._find(t),t&&(this.stamps=this.stamps.concat(t),t.forEach(this.ignore,this))},c.unstamp=function(t){t=this._find(t),t&&t.forEach(function(t){n.removeFrom(this.stamps,t),this.unignore(t)},this)},c._find=function(t){return t?("string"==typeof t&&(t=this.element.querySelectorAll(t)),t=n.makeArray(t)):void 0},c._manageStamps=function(){this.stamps&&this.stamps.length&&(this._getBoundingRect(),this.stamps.forEach(this._manageStamp,this))},c._getBoundingRect=function(){var t=this.element.getBoundingClientRect(),e=this.size;this._boundingRect={left:t.left+e.paddingLeft+e.borderLeftWidth,top:t.top+e.paddingTop+e.borderTopWidth,right:t.right-(e.paddingRight+e.borderRightWidth),bottom:t.bottom-(e.paddingBottom+e.borderBottomWidth)}},c._manageStamp=d,c._getElementOffset=function(t){var e=t.getBoundingClientRect(),n=this._boundingRect,o=i(t),s={left:e.left-n.left-o.marginLeft,top:e.top-n.top-o.marginTop,right:n.right-e.right-o.marginRight,bottom:n.bottom-e.bottom-o.marginBottom};return s},c.handleEvent=n.handleEvent,c.bindResize=function(){t.addEventListener("resize",this),this.isResizeBound=!0},c.unbindResize=function(){t.removeEventListener("resize",this),this.isResizeBound=!1},c.onresize=function(){this.resize()},n.debounceMethod(s,"onresize",100),c.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},c.needsResizeLayout=function(){var t=i(this.element),e=this.size&&t;return e&&t.innerWidth!==this.size.innerWidth},c.addItems=function(t){var e=this._itemize(t);return e.length&&(this.items=this.items.concat(e)),e},c.appended=function(t){var e=this.addItems(t);e.length&&(this.layoutItems(e,!0),this.reveal(e))},c.prepended=function(t){var e=this._itemize(t);if(e.length){var i=this.items.slice(0);this.items=e.concat(i),this._resetLayout(),this._manageStamps(),this.layoutItems(e,!0),this.reveal(e),this.layoutItems(i)}},c.reveal=function(t){if(this._emitCompleteOnItems("reveal",t),t&&t.length){var e=this.updateStagger();t.forEach(function(t,i){t.stagger(i*e),t.reveal()})}},c.hide=function(t){if(this._emitCompleteOnItems("hide",t),t&&t.length){var e=this.updateStagger();t.forEach(function(t,i){t.stagger(i*e),t.hide()})}},c.revealItemElements=function(t){var e=this.getItems(t);this.reveal(e)},c.hideItemElements=function(t){var e=this.getItems(t);this.hide(e)},c.getItem=function(t){for(var e=0;e<this.items.length;e++){var i=this.items[e];if(i.element==t)return i}},c.getItems=function(t){t=n.makeArray(t);var e=[];return t.forEach(function(t){var i=this.getItem(t);i&&e.push(i)},this),e},c.remove=function(t){var e=this.getItems(t);this._emitCompleteOnItems("remove",e),e&&e.length&&e.forEach(function(t){t.remove(),n.removeFrom(this.items,t)},this)},c.destroy=function(){var t=this.element.style;t.height="",t.position="",t.width="",this.items.forEach(function(t){t.destroy()}),this.unbindResize();var e=this.element.outlayerGUID;delete f[e],delete this.element.outlayerGUID,h&&h.removeData(this.element,this.constructor.namespace)},s.data=function(t){t=n.getQueryElement(t);var e=t&&t.outlayerGUID;return e&&f[e]},s.create=function(t,e){var i=r(s);return i.defaults=n.extend({},s.defaults),n.extend(i.defaults,e),i.compatOptions=n.extend({},s.compatOptions),i.namespace=t,i.data=s.data,i.Item=r(o),n.htmlInit(i,t),h&&h.bridget&&h.bridget(t,i),i};var m={ms:1,s:1e3};return s.Item=o,s}),function(t,e){"function"==typeof define&&define.amd?define("isotope/js/item",["outlayer/outlayer"],e):"object"==typeof module&&module.exports?module.exports=e(require("outlayer")):(t.Isotope=t.Isotope||{},t.Isotope.Item=e(t.Outlayer))}(window,function(t){"use strict";function e(){t.Item.apply(this,arguments)}var i=e.prototype=Object.create(t.Item.prototype),n=i._create;i._create=function(){this.id=this.layout.itemGUID++,n.call(this),this.sortData={}},i.updateSortData=function(){if(!this.isIgnored){this.sortData.id=this.id,this.sortData["original-order"]=this.id,this.sortData.random=Math.random();var t=this.layout.options.getSortData,e=this.layout._sorters;for(var i in t){var n=e[i];this.sortData[i]=n(this.element,this)}}};var o=i.destroy;return i.destroy=function(){o.apply(this,arguments),this.css({display:""})},e}),function(t,e){"function"==typeof define&&define.amd?define("isotope/js/layout-mode",["get-size/get-size","outlayer/outlayer"],e):"object"==typeof module&&module.exports?module.exports=e(require("get-size"),require("outlayer")):(t.Isotope=t.Isotope||{},t.Isotope.LayoutMode=e(t.getSize,t.Outlayer))}(window,function(t,e){"use strict";function i(t){this.isotope=t,t&&(this.options=t.options[this.namespace],this.element=t.element,this.items=t.filteredItems,this.size=t.size)}var n=i.prototype,o=["_resetLayout","_getItemLayoutPosition","_manageStamp","_getContainerSize","_getElementOffset","needsResizeLayout","_getOption"];return o.forEach(function(t){n[t]=function(){return e.prototype[t].apply(this.isotope,arguments)}}),n.needsVerticalResizeLayout=function(){var e=t(this.isotope.element),i=this.isotope.size&&e;return i&&e.innerHeight!=this.isotope.size.innerHeight},n._getMeasurement=function(){this.isotope._getMeasurement.apply(this,arguments)},n.getColumnWidth=function(){this.getSegmentSize("column","Width")},n.getRowHeight=function(){this.getSegmentSize("row","Height")},n.getSegmentSize=function(t,e){var i=t+e,n="outer"+e;if(this._getMeasurement(i,n),!this[i]){var o=this.getFirstItemSize();this[i]=o&&o[n]||this.isotope.size["inner"+e]}},n.getFirstItemSize=function(){var e=this.isotope.filteredItems[0];return e&&e.element&&t(e.element)},n.layout=function(){this.isotope.layout.apply(this.isotope,arguments)},n.getSize=function(){this.isotope.getSize(),this.size=this.isotope.size},i.modes={},i.create=function(t,e){function o(){i.apply(this,arguments)}return o.prototype=Object.create(n),o.prototype.constructor=o,e&&(o.options=e),o.prototype.namespace=t,i.modes[t]=o,o},i}),function(t,e){"function"==typeof define&&define.amd?define("masonry/masonry",["outlayer/outlayer","get-size/get-size"],e):"object"==typeof module&&module.exports?module.exports=e(require("outlayer"),require("get-size")):t.Masonry=e(t.Outlayer,t.getSize)}(window,function(t,e){var i=t.create("masonry");return i.compatOptions.fitWidth="isFitWidth",i.prototype._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns(),this.colYs=[];for(var t=0;t<this.cols;t++)this.colYs.push(0);this.maxY=0},i.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var t=this.items[0],i=t&&t.element;this.columnWidth=i&&e(i).outerWidth||this.containerWidth}var n=this.columnWidth+=this.gutter,o=this.containerWidth+this.gutter,s=o/n,r=n-o%n,a=r&&1>r?"round":"floor";s=Math[a](s),this.cols=Math.max(s,1)},i.prototype.getContainerWidth=function(){var t=this._getOption("fitWidth"),i=t?this.element.parentNode:this.element,n=e(i);this.containerWidth=n&&n.innerWidth},i.prototype._getItemLayoutPosition=function(t){t.getSize();var e=t.size.outerWidth%this.columnWidth,i=e&&1>e?"round":"ceil",n=Math[i](t.size.outerWidth/this.columnWidth);n=Math.min(n,this.cols);for(var o=this._getColGroup(n),s=Math.min.apply(Math,o),r=o.indexOf(s),a={x:this.columnWidth*r,y:s},u=s+t.size.outerHeight,h=this.cols+1-o.length,d=0;h>d;d++)this.colYs[r+d]=u;return a},i.prototype._getColGroup=function(t){if(2>t)return this.colYs;for(var e=[],i=this.cols+1-t,n=0;i>n;n++){var o=this.colYs.slice(n,n+t);e[n]=Math.max.apply(Math,o)}return e},i.prototype._manageStamp=function(t){var i=e(t),n=this._getElementOffset(t),o=this._getOption("originLeft"),s=o?n.left:n.right,r=s+i.outerWidth,a=Math.floor(s/this.columnWidth);a=Math.max(0,a);var u=Math.floor(r/this.columnWidth);u-=r%this.columnWidth?0:1,u=Math.min(this.cols-1,u);for(var h=this._getOption("originTop"),d=(h?n.top:n.bottom)+i.outerHeight,l=a;u>=l;l++)this.colYs[l]=Math.max(d,this.colYs[l])},i.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var t={height:this.maxY};return this._getOption("fitWidth")&&(t.width=this._getContainerFitWidth()),t},i.prototype._getContainerFitWidth=function(){for(var t=0,e=this.cols;--e&&0===this.colYs[e];)t++;return(this.cols-t)*this.columnWidth-this.gutter},i.prototype.needsResizeLayout=function(){var t=this.containerWidth;return this.getContainerWidth(),t!=this.containerWidth},i}),function(t,e){"function"==typeof define&&define.amd?define("isotope/js/layout-modes/masonry",["../layout-mode","masonry/masonry"],e):"object"==typeof module&&module.exports?module.exports=e(require("../layout-mode"),require("masonry-layout")):e(t.Isotope.LayoutMode,t.Masonry)}(window,function(t,e){"use strict";var i=t.create("masonry"),n=i.prototype,o={_getElementOffset:!0,layout:!0,_getMeasurement:!0};for(var s in e.prototype)o[s]||(n[s]=e.prototype[s]);var r=n.measureColumns;n.measureColumns=function(){this.items=this.isotope.filteredItems,r.call(this)};var a=n._getOption;return n._getOption=function(t){return"fitWidth"==t?void 0!==this.options.isFitWidth?this.options.isFitWidth:this.options.fitWidth:a.apply(this.isotope,arguments)},i}),function(t,e){"function"==typeof define&&define.amd?define("isotope/js/layout-modes/fit-rows",["../layout-mode"],e):"object"==typeof exports?module.exports=e(require("../layout-mode")):e(t.Isotope.LayoutMode)}(window,function(t){"use strict";var e=t.create("fitRows"),i=e.prototype;return i._resetLayout=function(){this.x=0,this.y=0,this.maxY=0,this._getMeasurement("gutter","outerWidth")},i._getItemLayoutPosition=function(t){t.getSize();var e=t.size.outerWidth+this.gutter,i=this.isotope.size.innerWidth+this.gutter;0!==this.x&&e+this.x>i&&(this.x=0,this.y=this.maxY);var n={x:this.x,y:this.y};return this.maxY=Math.max(this.maxY,this.y+t.size.outerHeight),this.x+=e,n},i._getContainerSize=function(){return{height:this.maxY}},e}),function(t,e){"function"==typeof define&&define.amd?define("isotope/js/layout-modes/vertical",["../layout-mode"],e):"object"==typeof module&&module.exports?module.exports=e(require("../layout-mode")):e(t.Isotope.LayoutMode)}(window,function(t){"use strict";var e=t.create("vertical",{horizontalAlignment:0}),i=e.prototype;return i._resetLayout=function(){this.y=0},i._getItemLayoutPosition=function(t){t.getSize();var e=(this.isotope.size.innerWidth-t.size.outerWidth)*this.options.horizontalAlignment,i=this.y;return this.y+=t.size.outerHeight,{x:e,y:i}},i._getContainerSize=function(){return{height:this.y}},e}),function(t,e){"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size","desandro-matches-selector/matches-selector","fizzy-ui-utils/utils","isotope/js/item","isotope/js/layout-mode","isotope/js/layout-modes/masonry","isotope/js/layout-modes/fit-rows","isotope/js/layout-modes/vertical"],function(i,n,o,s,r,a){return e(t,i,n,o,s,r,a)}):"object"==typeof module&&module.exports?module.exports=e(t,require("outlayer"),require("get-size"),require("desandro-matches-selector"),require("fizzy-ui-utils"),require("isotope/js/item"),require("isotope/js/layout-mode"),require("isotope/js/layout-modes/masonry"),require("isotope/js/layout-modes/fit-rows"),require("isotope/js/layout-modes/vertical")):t.Isotope=e(t,t.Outlayer,t.getSize,t.matchesSelector,t.fizzyUIUtils,t.Isotope.Item,t.Isotope.LayoutMode)}(window,function(t,e,i,n,o,s,r){function a(t,e){return function(i,n){for(var o=0;o<t.length;o++){var s=t[o],r=i.sortData[s],a=n.sortData[s];if(r>a||a>r){var u=void 0!==e[s]?e[s]:e,h=u?1:-1;return(r>a?1:-1)*h}}return 0}}var u=t.jQuery,h=String.prototype.trim?function(t){return t.trim()}:function(t){return t.replace(/^\s+|\s+$/g,"")},d=e.create("isotope",{layoutMode:"masonry",isJQueryFiltering:!0,sortAscending:!0});d.Item=s,d.LayoutMode=r;var l=d.prototype;l._create=function(){this.itemGUID=0,this._sorters={},this._getSorters(),e.prototype._create.call(this),this.modes={},this.filteredItems=this.items,this.sortHistory=["original-order"];for(var t in r.modes)this._initLayoutMode(t)},l.reloadItems=function(){this.itemGUID=0,e.prototype.reloadItems.call(this)},l._itemize=function(){for(var t=e.prototype._itemize.apply(this,arguments),i=0;i<t.length;i++){var n=t[i];n.id=this.itemGUID++}return this._updateItemsSortData(t),t},l._initLayoutMode=function(t){var e=r.modes[t],i=this.options[t]||{};this.options[t]=e.options?o.extend(e.options,i):i,this.modes[t]=new e(this)},l.layout=function(){return!this._isLayoutInited&&this._getOption("initLayout")?void this.arrange():void this._layout()},l._layout=function(){var t=this._getIsInstant();this._resetLayout(),this._manageStamps(),this.layoutItems(this.filteredItems,t),this._isLayoutInited=!0},l.arrange=function(t){this.option(t),this._getIsInstant();var e=this._filter(this.items);this.filteredItems=e.matches,this._bindArrangeComplete(),this._isInstant?this._noTransition(this._hideReveal,[e]):this._hideReveal(e),this._sort(),this._layout()},l._init=l.arrange,l._hideReveal=function(t){this.reveal(t.needReveal),this.hide(t.needHide)},l._getIsInstant=function(){var t=this._getOption("layoutInstant"),e=void 0!==t?t:!this._isLayoutInited;return this._isInstant=e,e},l._bindArrangeComplete=function(){function t(){e&&i&&n&&o.dispatchEvent("arrangeComplete",null,[o.filteredItems])}var e,i,n,o=this;this.once("layoutComplete",function(){e=!0,t()}),this.once("hideComplete",function(){i=!0,t()}),this.once("revealComplete",function(){n=!0,t()})},l._filter=function(t){var e=this.options.filter;e=e||"*";for(var i=[],n=[],o=[],s=this._getFilterTest(e),r=0;r<t.length;r++){var a=t[r];if(!a.isIgnored){var u=s(a);u&&i.push(a),u&&a.isHidden?n.push(a):u||a.isHidden||o.push(a)}}return{matches:i,needReveal:n,needHide:o}},l._getFilterTest=function(t){return u&&this.options.isJQueryFiltering?function(e){return u(e.element).is(t)}:"function"==typeof t?function(e){return t(e.element)}:function(e){return n(e.element,t)}},l.updateSortData=function(t){var e;t?(t=o.makeArray(t),e=this.getItems(t)):e=this.items,this._getSorters(),this._updateItemsSortData(e)},l._getSorters=function(){var t=this.options.getSortData;for(var e in t){var i=t[e];this._sorters[e]=f(i)}},l._updateItemsSortData=function(t){for(var e=t&&t.length,i=0;e&&e>i;i++){var n=t[i];n.updateSortData()}};var f=function(){function t(t){if("string"!=typeof t)return t;var i=h(t).split(" "),n=i[0],o=n.match(/^\[(.+)\]$/),s=o&&o[1],r=e(s,n),a=d.sortDataParsers[i[1]];
return t=a?function(t){return t&&a(r(t))}:function(t){return t&&r(t)}}function e(t,e){return t?function(e){return e.getAttribute(t)}:function(t){var i=t.querySelector(e);return i&&i.textContent}}return t}();d.sortDataParsers={parseInt:function(t){return parseInt(t,10)},parseFloat:function(t){return parseFloat(t)}},l._sort=function(){var t=this.options.sortBy;if(t){var e=[].concat.apply(t,this.sortHistory),i=a(e,this.options.sortAscending);this.filteredItems.sort(i),t!=this.sortHistory[0]&&this.sortHistory.unshift(t)}},l._mode=function(){var t=this.options.layoutMode,e=this.modes[t];if(!e)throw new Error("No layout mode: "+t);return e.options=this.options[t],e},l._resetLayout=function(){e.prototype._resetLayout.call(this),this._mode()._resetLayout()},l._getItemLayoutPosition=function(t){return this._mode()._getItemLayoutPosition(t)},l._manageStamp=function(t){this._mode()._manageStamp(t)},l._getContainerSize=function(){return this._mode()._getContainerSize()},l.needsResizeLayout=function(){return this._mode().needsResizeLayout()},l.appended=function(t){var e=this.addItems(t);if(e.length){var i=this._filterRevealAdded(e);this.filteredItems=this.filteredItems.concat(i)}},l.prepended=function(t){var e=this._itemize(t);if(e.length){this._resetLayout(),this._manageStamps();var i=this._filterRevealAdded(e);this.layoutItems(this.filteredItems),this.filteredItems=i.concat(this.filteredItems),this.items=e.concat(this.items)}},l._filterRevealAdded=function(t){var e=this._filter(t);return this.hide(e.needHide),this.reveal(e.matches),this.layoutItems(e.matches,!0),e.matches},l.insert=function(t){var e=this.addItems(t);if(e.length){var i,n,o=e.length;for(i=0;o>i;i++)n=e[i],this.element.appendChild(n.element);var s=this._filter(e).matches;for(i=0;o>i;i++)e[i].isLayoutInstant=!0;for(this.arrange(),i=0;o>i;i++)delete e[i].isLayoutInstant;this.reveal(s)}};var c=l.remove;return l.remove=function(t){t=o.makeArray(t);var e=this.getItems(t);c.call(this,t);for(var i=e&&e.length,n=0;i&&i>n;n++){var s=e[n];o.removeFrom(this.filteredItems,s)}},l.shuffle=function(){for(var t=0;t<this.items.length;t++){var e=this.items[t];e.sortData.random=Math.random()}this.options.sortBy="random",this._sort(),this._layout()},l._noTransition=function(t,e){var i=this.options.transitionDuration;this.options.transitionDuration=0;var n=t.apply(this,e);return this.options.transitionDuration=i,n},l.getFilteredItemElements=function(){return this.filteredItems.map(function(t){return t.element})},d});
if(!function($){"use strict";$.fn.fitVids=function(options){var head,div,settings={customSelector:null,ignore:null};return document.getElementById("fit-vids-style")||(head=document.head||document.getElementsByTagName("head")[0],(div=document.createElement("div")).innerHTML='<p>x</p><style id="fit-vids-style">.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}</style>',head.appendChild(div.childNodes[1])),options&&$.extend(settings,options),this.each(function(){var selectors=['iframe[src*="player.vimeo.com"]','iframe[src*="youtube.com"]','iframe[src*="youtube-nocookie.com"]','iframe[src*="kickstarter.com"][src*="video.html"]',"object","embed"],ignoreList=(settings.customSelector&&selectors.push(settings.customSelector),".fitvidsignore"),selectors=(settings.ignore&&(ignoreList=ignoreList+", "+settings.ignore),$(this).find(selectors.join(",")));(selectors=(selectors=selectors.not("object object")).not(ignoreList)).each(function(){var aspectRatio,videoName,$this=$(this);0<$this.parents(ignoreList).length||"embed"===this.tagName.toLowerCase()&&$this.parent("object").length||$this.parent(".fluid-width-video-wrapper").length||($this.css("height")||$this.css("width")||!isNaN($this.attr("height"))&&!isNaN($this.attr("width"))||($this.attr("height",9),$this.attr("width",16)),aspectRatio=("object"===this.tagName.toLowerCase()||$this.attr("height")&&!isNaN(parseInt($this.attr("height"),10))?parseInt($this.attr("height"),10):$this.height())/(isNaN(parseInt($this.attr("width"),10))?$this.width():parseInt($this.attr("width"),10)),$this.attr("name")||(videoName="fitvid"+$.fn.fitVids._count,$this.attr("name",videoName),$.fn.fitVids._count++),$this.wrap('<div class="fluid-width-video-wrapper"></div>').parent(".fluid-width-video-wrapper").css("padding-top",100*aspectRatio+"%"),$this.removeAttr("height").removeAttr("width"))})})},$.fn.fitVids._count=0}(window.jQuery||window.Zepto),!function(a){"use strict";function b(b,c){this.element=a(b),this.settings=a.extend({},d,c),this._defaults=d,this._init()}var c="Morphext",d={animation:"bounceIn",separator:",",speed:2e3,complete:a.noop};b.prototype={_init:function(){var b=this;this.phrases=[],this.element.addClass("morphext"),a.each(this.element.html().split(this.settings.separator),function(c,d){b.phrases.push(a.trim(d))}),this.index=-1,this.animate(),this.start()},animate:function(){this.index=++this.index%this.phrases.length,this.element[0].innerHTML='<span class="animated '+this.settings.animation+'">'+this.phrases[this.index]+"</span>",a.isFunction(this.settings.complete)&&this.settings.complete.call(this)},start:function(){var a=this;this._interval=setInterval(function(){a.animate()},this.settings.speed)},stop:function(){this._interval=clearInterval(this._interval)}},a.fn[c]=function(d){return this.each(function(){a.data(this,"plugin_"+c)||a.data(this,"plugin_"+c,new b(this,d))})}}(jQuery),!function(a,d,p){a.fn.backstretch=function(c,b){return c!==p&&0!==c.length||a.error("No images were supplied for Backstretch"),0===a(d).scrollTop()&&d.scrollTo(0,0),this.each(function(){var d=a(this),g=d.data("backstretch");if(g){if("string"==typeof c&&"function"==typeof g[c])return void g[c](b);b=a.extend(g.options,b),g.destroy(!0)}g=new q(this,c,b),d.data("backstretch",g)})},a.backstretch=function(c,b){return a("body").backstretch(c,b).data("backstretch")},a.expr[":"].backstretch=function(c){return a(c).data("backstretch")!==p},a.fn.backstretch.defaults={centeredX:!0,centeredY:!0,duration:5e3,fade:0};var r={left:0,top:0,overflow:"hidden",margin:0,padding:0,height:"100%",width:"100%",zIndex:-999999},s={position:"absolute",display:"none",margin:0,padding:0,border:"none",width:"auto",height:"auto",maxHeight:"none",maxWidth:"none",zIndex:-999999},q=function(c,b,e){this.options=a.extend({},a.fn.backstretch.defaults,e||{}),this.images=a.isArray(b)?b:[b],a.each(this.images,function(){a("<img />")[0].src=this}),this.isBody=c===document.body,this.$container=a(c),this.$root=this.isBody?a(l?d:document):this.$container,c=this.$container.children(".backstretch").first(),this.$wrap=c.length?c:a('<div class="backstretch"></div>').css(r).appendTo(this.$container),this.isBody||(c=this.$container.css("position"),b=this.$container.css("zIndex"),this.$container.css({position:"static"===c?"relative":c,zIndex:"auto"===b?0:b,background:"none"}),this.$wrap.css({zIndex:-999998})),this.$wrap.css({position:this.isBody&&l?"fixed":"absolute"}),this.index=0,this.show(this.index),a(d).on("resize.backstretch",a.proxy(this.resize,this)).on("orientationchange.backstretch",a.proxy(function(){this.isBody&&0===d.pageYOffset&&(d.scrollTo(0,1),this.resize())},this))};q.prototype={resize:function(){try{var f,a={left:0,top:0},b=this.isBody?this.$root.width():this.$root.innerWidth(),e=b,g=this.isBody?d.innerHeight||this.$root.height():this.$root.innerHeight(),j=e/this.$img.data("ratio");g<=j?(f=(j-g)/2,this.options.centeredY&&(a.top="-"+f+"px")):(f=((e=(j=g)*this.$img.data("ratio"))-b)/2,this.options.centeredX&&(a.left="-"+f+"px")),this.$wrap.css({width:b,height:g}).find("img:not(.deleteable)").css({width:e,height:j}).css(a)}catch(h){}return this},show:function(c){var b,e,d;if(!(Math.abs(c)>this.images.length-1))return e=(b=this).$wrap.find("img").addClass("deleteable"),d={relatedTarget:b.$container[0]},b.$container.trigger(a.Event("backstretch.before",d),[b,c]),this.index=c,clearInterval(b.interval),b.$img=a("<img />").css(s).bind("load",function(f){var h=this.width||a(f.target).width();f=this.height||a(f.target).height(),a(this).data("ratio",h/f),a(this).fadeIn(b.options.speed||b.options.fade,function(){e.remove(),b.paused||b.cycle(),a(["after","show"]).each(function(){b.$container.trigger(a.Event("backstretch."+this,d),[b,c])})}),b.resize()}).appendTo(b.$wrap),b.$img.attr("src",b.images[c]),b},next:function(){return this.show(this.index<this.images.length-1?this.index+1:0)},prev:function(){return this.show(0===this.index?this.images.length-1:this.index-1)},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this.next(),this},cycle:function(){return 1<this.images.length&&(clearInterval(this.interval),this.interval=setInterval(a.proxy(function(){this.paused||this.next()},this),this.options.duration)),this},destroy:function(c){a(d).off("resize.backstretch orientationchange.backstretch"),clearInterval(this.interval),c||this.$wrap.remove(),this.$container.removeData("backstretch")}};var f=navigator.userAgent,m=navigator.platform,e=!!(e=f.match(/AppleWebKit\/([0-9]+)/))&&e[1],h=!!(h=f.match(/Fennec\/([0-9]+)/))&&h[1],n=f.match(/Opera Mobi\/([0-9]+)/),t=!!n&&n[1],k=!!(k=f.match(/MSIE ([0-9]+)/))&&k[1],l=!((-1<m.indexOf("iPhone")||-1<m.indexOf("iPad")||-1<m.indexOf("iPod"))&&e&&e<534||d.operamini&&"[object OperaMini]"==={}.toString.call(d.operamini)||n&&t<7458||-1<f.indexOf("Android")&&e&&e<533||h&&h<6||"palmGetResource"in d&&e&&e<534||-1<f.indexOf("MeeGo")&&-1<f.indexOf("NokiaBrowser/8.5.0")||k&&k<=6)}(jQuery,window),!function(){function f(a,b){return function(){return a.apply(b,arguments)}}var g=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1},b=function(){function a(){}return a.prototype.extend=function(a,b){var c,d;for(c in b)d=b[c],null==a[c]&&(a[c]=d);return a},a.prototype.isMobile=function(a){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(a)},a.prototype.createEvent=function(a,b,c,d){var e;return null==b&&(b=!1),null==c&&(c=!1),null==d&&(d=null),null!=document.createEvent?(e=document.createEvent("CustomEvent")).initCustomEvent(a,b,c,d):null!=document.createEventObject?(e=document.createEventObject()).eventType=a:e.eventName=a,e},a.prototype.emitEvent=function(a,b){return null!=a.dispatchEvent?a.dispatchEvent(b):b in(null!=a)?a[b]():"on"+b in(null!=a)?a["on"+b]():void 0},a.prototype.addEvent=function(a,b,c){return null!=a.addEventListener?a.addEventListener(b,c,!1):null!=a.attachEvent?a.attachEvent("on"+b,c):a[b]=c},a.prototype.removeEvent=function(a,b,c){return null!=a.removeEventListener?a.removeEventListener(b,c,!1):null!=a.detachEvent?a.detachEvent("on"+b,c):delete a[b]},a.prototype.innerHeight=function(){return"innerHeight"in window?window.innerHeight:document.documentElement.clientHeight},a}(),c=this.WeakMap||this.MozWeakMap||function(){function a(){this.keys=[],this.values=[]}return a.prototype.get=function(a){for(var d,f=this.keys,b=d=0,e=f.length;d<e;b=++d)if(f[b]===a)return this.values[b]},a.prototype.set=function(a,b){for(var e,g=this.keys,c=e=0,f=g.length;e<f;c=++e)if(g[c]===a)return void(this.values[c]=b);return this.keys.push(a),this.values.push(b)},a}(),a=this.MutationObserver||this.WebkitMutationObserver||this.MozMutationObserver||function(){function a(){"undefined"!=typeof console&&null!==console&&console.warn("MutationObserver is not supported by your browser."),"undefined"!=typeof console&&null!==console&&console.warn("WOW.js cannot detect dom mutations, please call .sync() after loading new content.")}return a.notSupported=!0,a.prototype.observe=function(){},a}(),d=this.getComputedStyle||function(a){return this.getPropertyValue=function(b){var c;return e.test(b="float"===b?"styleFloat":b)&&b.replace(e,function(a,b){return b.toUpperCase()}),(null!=(c=a.currentStyle)?c[b]:void 0)||null},this},e=/(\-([a-z]){1})/g;this.WOW=function(){function e(a){null==a&&(a={}),this.scrollCallback=f(this.scrollCallback,this),this.scrollHandler=f(this.scrollHandler,this),this.resetAnimation=f(this.resetAnimation,this),this.start=f(this.start,this),this.scrolled=!0,this.config=this.util().extend(a,this.defaults),null!=a.scrollContainer&&(this.config.scrollContainer=document.querySelector(a.scrollContainer)),this.animationNameCache=new c,this.wowEvent=this.util().createEvent(this.config.boxClass)}return e.prototype.defaults={boxClass:"wow",animateClass:"animated",offset:0,mobile:!0,live:!0,callback:null,scrollContainer:null},e.prototype.init=function(){var a;return this.element=window.document.documentElement,"interactive"===(a=document.readyState)||"complete"===a?this.start():this.util().addEvent(document,"DOMContentLoaded",this.start),this.finished=[]},e.prototype.start=function(){var b,c,d,e;if(this.stopped=!1,this.boxes=function(){for(var d=this.element.querySelectorAll("."+this.config.boxClass),e=[],a=0,c=d.length;a<c;a++)b=d[a],e.push(b);return e}.call(this),this.all=function(){for(var d=this.boxes,e=[],a=0,c=d.length;a<c;a++)b=d[a],e.push(b);return e}.call(this),this.boxes.length)if(this.disabled())this.resetStyle();else for(c=0,d=(e=this.boxes).length;c<d;c++)b=e[c],this.applyStyle(b,!0);return this.disabled()||(this.util().addEvent(this.config.scrollContainer||window,"scroll",this.scrollHandler),this.util().addEvent(window,"resize",this.scrollHandler),this.interval=setInterval(this.scrollCallback,50)),this.config.live?new a(function(a){return function(b){for(var e,f,g=[],c=0,d=b.length;c<d;c++)f=b[c],g.push(function(){for(var c=f.addedNodes||[],d=[],a=0,b=c.length;a<b;a++)e=c[a],d.push(this.doSync(e));return d}.call(a));return g}}(this)).observe(document.body,{childList:!0,subtree:!0}):void 0},e.prototype.stop=function(){return this.stopped=!0,this.util().removeEvent(this.config.scrollContainer||window,"scroll",this.scrollHandler),this.util().removeEvent(window,"resize",this.scrollHandler),null!=this.interval?clearInterval(this.interval):void 0},e.prototype.sync=function(){return a.notSupported?this.doSync(this.element):void 0},e.prototype.doSync=function(a){var b,c,d,e,f;if(1===(a=null==a?this.element:a).nodeType){for(f=[],c=0,d=(e=(a=a.parentNode||a).querySelectorAll("."+this.config.boxClass)).length;c<d;c++)b=e[c],g.call(this.all,b)<0?(this.boxes.push(b),this.all.push(b),this.stopped||this.disabled()?this.resetStyle():this.applyStyle(b,!0),f.push(this.scrolled=!0)):f.push(void 0);return f}},e.prototype.show=function(a){return this.applyStyle(a),a.className=a.className+" "+this.config.animateClass,null!=this.config.callback&&this.config.callback(a),this.util().emitEvent(a,this.wowEvent),this.util().addEvent(a,"animationend",this.resetAnimation),this.util().addEvent(a,"oanimationend",this.resetAnimation),this.util().addEvent(a,"webkitAnimationEnd",this.resetAnimation),this.util().addEvent(a,"MSAnimationEnd",this.resetAnimation),a},e.prototype.applyStyle=function(a,b){var f,d=a.getAttribute("data-wow-duration"),c=a.getAttribute("data-wow-delay"),e=a.getAttribute("data-wow-iteration");return this.animate((f=this,function(){return f.customStyle(a,b,d,c,e)}))},e.prototype.animate="requestAnimationFrame"in window?function(a){return window.requestAnimationFrame(a)}:function(a){return a()},e.prototype.resetStyle=function(){for(var a,d=this.boxes,e=[],b=0,c=d.length;b<c;b++)a=d[b],e.push(a.style.visibility="visible");return e},e.prototype.resetAnimation=function(a){return 0<=a.type.toLowerCase().indexOf("animationend")?(a=a.target||a.srcElement).className=a.className.replace(this.config.animateClass,"").trim():void 0},e.prototype.customStyle=function(a,b,c,d,e){return b&&this.cacheAnimationName(a),a.style.visibility=b?"hidden":"visible",c&&this.vendorSet(a.style,{animationDuration:c}),d&&this.vendorSet(a.style,{animationDelay:d}),e&&this.vendorSet(a.style,{animationIterationCount:e}),this.vendorSet(a.style,{animationName:b?"none":this.cachedAnimationName(a)}),a},e.prototype.vendors=["moz","webkit"],e.prototype.vendorSet=function(a,b){var c,e,f,d=[];for(c in b)e=b[c],a[""+c]=e,d.push(function(){for(var g=this.vendors,h=[],b=0,d=g.length;b<d;b++)f=g[b],h.push(a[""+f+c.charAt(0).toUpperCase()+c.substr(1)]=e);return h}.call(this));return d},e.prototype.vendorCSS=function(a,b){for(var i,h=d(a),g=h.getPropertyCSSValue(b),f=this.vendors,c=0,e=f.length;c<e;c++)i=f[c],g=g||h.getPropertyCSSValue("-"+i+"-"+b);return g},e.prototype.animationName=function(a){var b;try{b=this.vendorCSS(a,"animation-name").cssText}catch(c){b=d(a).getPropertyValue("animation-name")}return"none"===b?"":b},e.prototype.cacheAnimationName=function(a){return this.animationNameCache.set(a,this.animationName(a))},e.prototype.cachedAnimationName=function(a){return this.animationNameCache.get(a)},e.prototype.scrollHandler=function(){return this.scrolled=!0},e.prototype.scrollCallback=function(){var a;return!this.scrolled||(this.scrolled=!1,this.boxes=function(){for(var d=this.boxes,e=[],b=0,c=d.length;b<c;b++)(a=d[b])&&(this.isVisible(a)?this.show(a):e.push(a));return e}.call(this),this.boxes.length)||this.config.live?void 0:this.stop()},e.prototype.offsetTop=function(a){for(var b;void 0===a.offsetTop;)a=a.parentNode;for(b=a.offsetTop;a=a.offsetParent;)b+=a.offsetTop;return b},e.prototype.isVisible=function(a){var c=a.getAttribute("data-wow-offset")||this.config.offset,f=this.config.scrollContainer&&this.config.scrollContainer.scrollTop||window.pageYOffset,c=f+Math.min(this.element.clientHeight,this.util().innerHeight())-c,d=this.offsetTop(a),a=d+a.clientHeight;return d<=c&&f<=a},e.prototype.util=function(){return null!=this._util?this._util:this._util=new b},e.prototype.disabled=function(){return!this.config.mobile&&this.util().isMobile(navigator.userAgent)},e}()}.call(this),!function(){"use strict";function t(o){if(!o)throw new Error("No options passed to Waypoint constructor");if(!o.element)throw new Error("No element option passed to Waypoint constructor");if(!o.handler)throw new Error("No handler option passed to Waypoint constructor");this.key="waypoint-"+e,this.options=t.Adapter.extend({},t.defaults,o),this.element=this.options.element,this.adapter=new t.Adapter(this.element),this.callback=o.handler,this.axis=this.options.horizontal?"horizontal":"vertical",this.enabled=this.options.enabled,this.triggerPoint=null,this.group=t.Group.findOrCreate({name:this.options.group,axis:this.axis}),this.context=t.Context.findOrCreateByElement(this.options.context),t.offsetAliases[this.options.offset]&&(this.options.offset=t.offsetAliases[this.options.offset]),this.group.add(this),this.context.add(this),i[this.key]=this,e+=1}var e=0,i={};t.prototype.queueTrigger=function(t){this.group.queueTrigger(this,t)},t.prototype.trigger=function(t){this.enabled&&this.callback&&this.callback.apply(this,t)},t.prototype.destroy=function(){this.context.remove(this),this.group.remove(this),delete i[this.key]},t.prototype.disable=function(){return this.enabled=!1,this},t.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this},t.prototype.next=function(){return this.group.next(this)},t.prototype.previous=function(){return this.group.previous(this)},t.invokeAll=function(t){var o,e=[];for(o in i)e.push(i[o]);for(var n=0,r=e.length;n<r;n++)e[n][t]()},t.destroyAll=function(){t.invokeAll("destroy")},t.disableAll=function(){t.invokeAll("disable")},t.enableAll=function(){for(var e in t.Context.refreshAll(),i)i[e].enabled=!0;return this},t.refreshAll=function(){t.Context.refreshAll()},t.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight},t.viewportWidth=function(){return document.documentElement.clientWidth},t.adapters=[],t.defaults={context:window,continuous:!0,enabled:!0,group:"default",horizontal:!1,offset:0},t.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}},window.Waypoint=t}(),function(){"use strict";function t(t){window.setTimeout(t,1e3/60)}function e(t){this.element=t,this.Adapter=n.Adapter,this.adapter=new this.Adapter(t),this.key="waypoint-context-"+i,this.didScroll=!1,this.didResize=!1,this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()},this.waypoints={vertical:{},horizontal:{}},t.waypointContextKey=this.key,o[t.waypointContextKey]=this,i+=1,n.windowContext||(n.windowContext=!0,n.windowContext=new e(window)),this.createThrottledScrollHandler(),this.createThrottledResizeHandler()}var i=0,o={},n=window.Waypoint,r=window.onload;e.prototype.add=function(t){var e=t.options.horizontal?"horizontal":"vertical";this.waypoints[e][t.key]=t,this.refresh()},e.prototype.checkEmpty=function(){var t=this.Adapter.isEmptyObject(this.waypoints.horizontal),e=this.Adapter.isEmptyObject(this.waypoints.vertical),i=this.element==this.element.window;t&&e&&!i&&(this.adapter.off(".waypoints"),delete o[this.key])},e.prototype.createThrottledResizeHandler=function(){function t(){e.handleResize(),e.didResize=!1}var e=this;this.adapter.on("resize.waypoints",function(){e.didResize||(e.didResize=!0,n.requestAnimationFrame(t))})},e.prototype.createThrottledScrollHandler=function(){function t(){e.handleScroll(),e.didScroll=!1}var e=this;this.adapter.on("scroll.waypoints",function(){e.didScroll&&!n.isTouch||(e.didScroll=!0,n.requestAnimationFrame(t))})},e.prototype.handleResize=function(){n.Context.refreshAll()},e.prototype.handleScroll=function(){var i,c,t={},e={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};for(i in e){var s,o=e[i],r=o.newScroll>o.oldScroll?o.forward:o.backward;for(s in this.waypoints[i]){var l,h,a=this.waypoints[i][s];null!==a.triggerPoint&&(l=o.oldScroll<a.triggerPoint,h=o.newScroll>=a.triggerPoint,l&&h||!l&&!h)&&(a.queueTrigger(r),t[a.group.id]=a.group)}}for(c in t)t[c].flushTriggers();this.oldScroll={x:e.horizontal.newScroll,y:e.vertical.newScroll}},e.prototype.innerHeight=function(){return this.element==this.element.window?n.viewportHeight():this.adapter.innerHeight()},e.prototype.remove=function(t){delete this.waypoints[t.axis][t.key],this.checkEmpty()},e.prototype.innerWidth=function(){return this.element==this.element.window?n.viewportWidth():this.adapter.innerWidth()},e.prototype.destroy=function(){var e,t=[];for(e in this.waypoints)for(var i in this.waypoints[e])t.push(this.waypoints[e][i]);for(var o=0,n=t.length;o<n;o++)t[o].destroy()},e.prototype.refresh=function(){var t,r,e=this.element==this.element.window,i=e?void 0:this.adapter.offset(),o={};for(r in this.handleScroll(),t={horizontal:{contextOffset:e?0:i.left,contextScroll:e?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:e?0:i.top,contextScroll:e?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}}){var a,s=t[r];for(a in this.waypoints[r]){var l,d=this.waypoints[r][a],f=d.options.offset,w=d.triggerPoint,y=0,g=null==w;d.element!==d.element.window&&(y=d.adapter.offset()[s.offsetProp]),"function"==typeof f?f=f.apply(d):"string"==typeof f&&(f=parseFloat(f),-1<d.options.offset.indexOf("%"))&&(f=Math.ceil(s.contextDimension*f/100)),l=s.contextScroll-s.contextOffset,d.triggerPoint=Math.floor(y+l-f),y=w<s.oldScroll,l=d.triggerPoint>=s.oldScroll,f=!y&&!l,!g&&(y&&l)?(d.queueTrigger(s.backward),o[d.group.id]=d.group):(!g&&f||g&&s.oldScroll>=d.triggerPoint)&&(d.queueTrigger(s.forward),o[d.group.id]=d.group)}}return n.requestAnimationFrame(function(){for(var t in o)o[t].flushTriggers()}),this},e.findOrCreateByElement=function(t){return e.findByElement(t)||new e(t)},e.refreshAll=function(){for(var t in o)o[t].refresh()},e.findByElement=function(t){return o[t.waypointContextKey]},window.onload=function(){r&&r(),e.refreshAll()},n.requestAnimationFrame=function(e){(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||t).call(window,e)},n.Context=e}(),function(){"use strict";function t(t,e){return t.triggerPoint-e.triggerPoint}function e(t,e){return e.triggerPoint-t.triggerPoint}function i(t){this.name=t.name,this.axis=t.axis,this.id=this.name+"-"+this.axis,this.waypoints=[],this.clearTriggerQueues(),o[this.axis][this.name]=this}var o={vertical:{},horizontal:{}},n=window.Waypoint;i.prototype.add=function(t){this.waypoints.push(t)},i.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}},i.prototype.flushTriggers=function(){for(var i in this.triggerQueues){var o=this.triggerQueues[i];o.sort("up"===i||"left"===i?e:t);for(var r=0,s=o.length;r<s;r+=1){var a=o[r];!a.options.continuous&&r!==o.length-1||a.trigger([i])}}this.clearTriggerQueues()},i.prototype.next=function(e){this.waypoints.sort(t);e=n.Adapter.inArray(e,this.waypoints);return e===this.waypoints.length-1?null:this.waypoints[e+1]},i.prototype.previous=function(e){this.waypoints.sort(t);e=n.Adapter.inArray(e,this.waypoints);return e?this.waypoints[e-1]:null},i.prototype.queueTrigger=function(t,e){this.triggerQueues[e].push(t)},i.prototype.remove=function(t){t=n.Adapter.inArray(t,this.waypoints);-1<t&&this.waypoints.splice(t,1)},i.prototype.first=function(){return this.waypoints[0]},i.prototype.last=function(){return this.waypoints[this.waypoints.length-1]},i.findOrCreate=function(t){return o[t.axis][t.name]||new i(t)},n.Group=i}(),function(){"use strict";function t(t){this.$element=e(t)}var e=window.jQuery,i=window.Waypoint;e.each(["innerHeight","innerWidth","off","offset","on","outerHeight","outerWidth","scrollLeft","scrollTop"],function(e,i){t.prototype[i]=function(){var t=Array.prototype.slice.call(arguments);return this.$element[i].apply(this.$element,t)}}),e.each(["extend","inArray","isEmptyObject"],function(i,o){t[o]=e[o]}),i.adapters.push({name:"jquery",Adapter:t}),i.Adapter=t}(),function(){"use strict";function t(t){return function(){var i=[],o=arguments[0];return t.isFunction(arguments[0])&&((o=t.extend({},arguments[1])).handler=arguments[0]),this.each(function(){var n=t.extend({},o,{element:this});"string"==typeof n.context&&(n.context=t(this).closest(n.context)[0]),i.push(new e(n))}),i}}var e=window.Waypoint;window.jQuery&&(window.jQuery.fn.waypoint=t(window.jQuery)),window.Zepto&&(window.Zepto.fn.waypoint=t(window.Zepto))}(),!function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e(require,0,module):t.Tether=e()}(this,function(t,e,o){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t){var i,e=t.getBoundingClientRect(),o={};for(i in e)o[i]=e[i];return t.ownerDocument!==document&&(t=t.ownerDocument.defaultView.frameElement)&&(t=n(t),o.top+=t.top,o.bottom+=t.top,o.left+=t.left,o.right+=t.left),o}function r(t){var o=(getComputedStyle(t)||{}).position,i=[];if("fixed"===o)return[t];for(var n=t;(n=n.parentNode)&&1===n.nodeType;){var r=void 0;try{r=getComputedStyle(n)}catch(s){}if(null==r)return i.push(n),i;var a=r,f=a.overflow,l=a.overflowX,a=a.overflowY;/(auto|scroll|overlay)/.test(f+a+l)&&("absolute"!==o||0<=["relative","absolute","fixed"].indexOf(r.position))&&i.push(n)}return i.push(t.ownerDocument.body),t.ownerDocument!==document&&i.push(t.ownerDocument.defaultView),i}function s(){A&&document.body.removeChild(A),A=null}function a(t){var e=void 0,o=(t===document?t=(e=document).documentElement:e=t.ownerDocument,e.documentElement),t=n(t),r=function(){var t=A,e=(t&&document.body.contains(t)||((t=document.createElement("div")).setAttribute("data-tether-id",T()),h(t.style,{top:0,left:0,position:"absolute"}),document.body.appendChild(t),A=t),t.getAttribute("data-tether-id"));return"undefined"==typeof S[e]&&(S[e]=n(t),k(function(){delete S[e]})),S[e]}();return t.top-=r.top,t.left-=r.left,void 0===t.width&&(t.width=document.body.scrollWidth-t.left-t.right),void 0===t.height&&(t.height=document.body.scrollHeight-t.top-t.bottom),t.top=t.top-o.clientTop,t.left=t.left-o.clientLeft,t.right=e.body.clientWidth-t.width-t.left,t.bottom=e.body.clientHeight-t.height-t.top,t}function f(t){return t.offsetParent||document.documentElement}function l(){var o,t,e;return M||((t=document.createElement("div")).style.width="100%",t.style.height="200px",e=document.createElement("div"),h(e.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),e.appendChild(t),document.body.appendChild(e),o=t.offsetWidth,e.style.overflow="scroll",o===(t=t.offsetWidth)&&(t=e.clientWidth),document.body.removeChild(e),M={width:e=o-t,height:e})}function h(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=[];return Array.prototype.push.apply(e,arguments),e.slice(1).forEach(function(e){if(e)for(var o in e)!{}.hasOwnProperty.call(e,o)||(t[o]=e[o])}),t}function d(t,e){void 0!==t.classList?e.split(" ").forEach(function(e){e.trim()&&t.classList.remove(e)}):(e=new RegExp("(^| )"+e.split(" ").join("|")+"( |$)","gi"),e=c(t).replace(e," "),g(t,e))}function p(t,e){void 0!==t.classList?e.split(" ").forEach(function(e){e.trim()&&t.classList.add(e)}):(d(t,e),e=c(t)+" "+e,g(t,e))}function u(t,e){return void 0!==t.classList?t.classList.contains(e):(t=c(t),new RegExp("(^| )"+e+"( |$)","gi").test(t))}function c(t){return t.className instanceof t.ownerDocument.defaultView.SVGAnimatedString?t.className.baseVal:t.className}function g(t,e){t.setAttribute("class",e)}function m(t,e,o){o.forEach(function(o){-1===e.indexOf(o)&&u(t,o)&&d(t,o)}),e.forEach(function(e){u(t,e)||p(t,e)})}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b(){return performance&&performance.now?performance.now():+new Date}function w(){for(var t={top:0,left:0},e=arguments.length,o=Array(e),i=0;i<e;i++)o[i]=arguments[i];return o.forEach(function(e){var o=e.top,e=e.left;"string"==typeof o&&(o=parseFloat(o,10)),"string"==typeof e&&(e=parseFloat(e,10)),t.top+=o,t.left+=e}),t}function C(t,e){return"string"==typeof t.left&&-1!==t.left.indexOf("%")&&(t.left=parseFloat(t.left,10)/100*e.width),"string"==typeof t.top&&-1!==t.top.indexOf("%")&&(t.top=parseFloat(t.top,10)/100*e.height),t}function O(t,e){return"scrollParent"===e?e=t.scrollParents[0]:"window"===e&&(e=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]),void 0!==(e=e===document?e.documentElement:e).nodeType&&function(){var t=e,o=a(e),i=o,n=getComputedStyle(e);e=[i.left,i.top,o.width+i.left,o.height+i.top],t.ownerDocument!==document&&(o=t.ownerDocument.defaultView,e[0]+=o.pageXOffset,e[1]+=o.pageYOffset,e[2]+=o.pageXOffset,e[3]+=o.pageYOffset),G.forEach(function(t,o){"Top"===(t=t[0].toUpperCase()+t.substr(1))||"Left"===t?e[o]+=parseFloat(n["border"+t+"Width"]):e[o]-=parseFloat(n["border"+t+"Width"])})}(),e}var E=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),x=void 0,A=(void 0===x&&(x={modules:[]}),null),T=function(){var t=0;return function(){return++t}}(),S={},M=null,W=[],k=function(t){W.push(t)},_=function(){for(var t=void 0;t=W.pop();)t()},B=function(){function t(){i(this,t)}return E(t,[{key:"on",value:function(t,e,o){var i=!(arguments.length<=3||void 0===arguments[3])&&arguments[3];void 0===this.bindings&&(this.bindings={}),void 0===this.bindings[t]&&(this.bindings[t]=[]),this.bindings[t].push({handler:e,ctx:o,once:i})}},{key:"once",value:function(t,e,o){this.on(t,e,o,!0)}},{key:"off",value:function(t,e){if(void 0!==this.bindings&&void 0!==this.bindings[t])if(void 0===e)delete this.bindings[t];else for(var o=0;o<this.bindings[t].length;)this.bindings[t][o].handler===e?this.bindings[t].splice(o,1):++o}},{key:"trigger",value:function(t){if(void 0!==this.bindings&&this.bindings[t]){for(var e=0,o=arguments.length,i=Array(1<o?o-1:0),n=1;n<o;n++)i[n-1]=arguments[n];for(;e<this.bindings[t].length;){var r=this.bindings[t][e],s=r.handler,a=r.ctx,r=r.once,a=void 0===a?this:a;s.apply(a,i),r?this.bindings[t].splice(e,1):++e}}}}]),t}(),z=(x.Utils={getActualBoundingClientRect:n,getScrollParents:r,getBounds:a,getOffsetParent:f,extend:h,addClass:p,removeClass:d,hasClass:u,updateClasses:m,defer:k,flush:_,uniqueId:T,Evented:B,getScrollBarSize:l,removeUtilElements:s},function(e,o){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(t,e){var o=[],i=!0,n=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);i=!0);}catch(f){n=!0,r=f}finally{try{!i&&a.return&&a.return()}finally{if(n)throw r}}return o}(e,o);throw new TypeError("Invalid attempt to destructure non-iterable instance")}),E=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}();if(void 0===x)throw new Error("You must include the utils.js file before tether.js");function X(){D.forEach(function(t){t.position(!1)}),_()}function V(t){var e=t.left,o=t.top;return{left:e=void 0!==N[t.left]?N[t.left]:e,top:o=void 0!==N[t.top]?N[t.top]:o}}function R(t){return t=t.split(" "),{top:(t=z(t,2))[0],left:t[1]}}var Y=x.Utils,r=Y.getScrollParents,a=Y.getBounds,f=Y.getOffsetParent,h=Y.extend,p=Y.addClass,d=Y.removeClass,m=Y.updateClasses,k=Y.defer,_=Y.flush,l=Y.getScrollBarSize,s=Y.removeUtilElements,L=function(){if("undefined"==typeof document)return"";for(var t=document.createElement("div"),e=["transform","WebkitTransform","OTransform","MozTransform","msTransform"],o=0;o<e.length;++o){var i=e[o];if(void 0!==t.style[i])return i}}(),D=[],F=(!function(){function i(){return void 0!==e&&16<e?(e=Math.min(e-16,250),void(o=setTimeout(i,250))):void(void 0!==t&&b()-t<10||(null!=o&&(clearTimeout(o),o=null),t=b(),X(),e=b()-t))}var t=null,e=null,o=null;"undefined"!=typeof window&&void 0!==window.addEventListener&&["resize","scroll","touchmove"].forEach(function(t){window.addEventListener(t,i)})}(),{center:"center",left:"right",right:"left"}),H={middle:"middle",top:"bottom",bottom:"top"},N={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"},q=R,I=function(){function e(t){var o=this;i(this,e),function(t,e,o){for(var i=!0;i;){var n=t,r=e,s=o,i=!1,a=(null===n&&(n=Function.prototype),Object.getOwnPropertyDescriptor(n,r));if(void 0!==a)return"value"in a?a.value:void 0===(a=a.get)?void 0:a.call(s);a=Object.getPrototypeOf(n);if(null===a)return;t=a,e=r,o=s,i=!0}}(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.position=this.position.bind(this),D.push(this),this.history=[],this.setOptions(t,!1),x.modules.forEach(function(t){void 0!==t.initialize&&t.initialize.call(o)}),this.position()}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,B),E(e,[{key:"getClass",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0],e=this.options.classes;return void 0!==e&&e[t]?this.options.classes[t]:this.options.classPrefix?this.options.classPrefix+"-"+t:t}},{key:"setOptions",value:function(t){var e=this,o=arguments.length<=1||void 0===arguments[1]||arguments[1],t=(this.options=h({offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"},t),this.options),s=t.element,a=t.target,t=t.targetModifier;if(this.element=s,this.target=a,this.targetModifier=t,"viewport"===this.target?(this.target=document.body,this.targetModifier="visible"):"scroll-handle"===this.target&&(this.target=document.body,this.targetModifier="scroll-handle"),["element","target"].forEach(function(t){if(void 0===e[t])throw new Error("Tether Error: Both element and target must be defined");void 0!==e[t].jquery?e[t]=e[t][0]:"string"==typeof e[t]&&(e[t]=document.querySelector(e[t]))}),p(this.element,this.getClass("element")),!1!==this.options.addTargetClasses&&p(this.target,this.getClass("target")),!this.options.attachment)throw new Error("Tether Error: You must provide an attachment");this.targetAttachment=q(this.options.targetAttachment),this.attachment=q(this.options.attachment),this.offset=R(this.options.offset),this.targetOffset=R(this.options.targetOffset),void 0!==this.scrollParents&&this.disable(),"scroll-handle"===this.targetModifier?this.scrollParents=[this.target]:this.scrollParents=r(this.target),!1!==this.options.enabled&&this.enable(o)}},{key:"getTargetBounds",value:function(){var t,i,r,e,f,o;return void 0===this.targetModifier?a(this.target):"visible"===this.targetModifier?this.target===document.body?{top:pageYOffset,left:pageXOffset,height:innerHeight,width:innerWidth}:((e={height:(t=a(this.target)).height,width:t.width,top:t.top,left:t.left}).height=Math.min(e.height,t.height-(pageYOffset-t.top)),e.height=Math.min(e.height,t.height-(t.top+t.height-(pageYOffset+innerHeight))),e.height=Math.min(innerHeight,e.height),e.height-=2,e.width=Math.min(e.width,t.width-(pageXOffset-t.left)),e.width=Math.min(e.width,t.width-(t.left+t.width-(pageXOffset+innerWidth))),e.width=Math.min(innerWidth,e.width),e.width-=2,e.top<pageYOffset&&(e.top=pageYOffset),e.left<pageXOffset&&(e.left=pageXOffset),e):"scroll-handle"===this.targetModifier?(t=void 0,t=(o=this.target)===document.body?(o=document.documentElement,{left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}):a(o),i=getComputedStyle(o),r=0,(o.scrollWidth>o.clientWidth||0<=[i.overflow,i.overflowX].indexOf("scroll")||this.target!==document.body)&&(r=15),e={width:15,height:.975*(r=t.height-parseFloat(i.borderTopWidth)-parseFloat(i.borderBottomWidth)-r)*(r/o.scrollHeight),left:t.left+t.width-parseFloat(i.borderLeftWidth)-15},f=0,r<408&&this.target===document.body&&(f=-11e-5*Math.pow(r,2)-.00727*r+22.58),this.target!==document.body&&(e.height=Math.max(e.height,24)),o=this.target.scrollTop/(o.scrollHeight-r),e.top=o*(r-e.height-f)+t.top+parseFloat(i.borderTopWidth),this.target===document.body&&(e.height=Math.max(e.height,24)),e):void 0}},{key:"clearCache",value:function(){this._cache={}}},{key:"cache",value:function(t,e){return void 0===this._cache&&(this._cache={}),void 0===this._cache[t]&&(this._cache[t]=e.call(this)),this._cache[t]}},{key:"enable",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]||arguments[0];!1!==this.options.addTargetClasses&&p(this.target,this.getClass("enabled")),p(this.element,this.getClass("enabled")),this.enabled=!0,this.scrollParents.forEach(function(e){e!==t.target.ownerDocument&&e.addEventListener("scroll",t.position)}),e&&this.position()}},{key:"disable",value:function(){var t=this;d(this.target,this.getClass("enabled")),d(this.element,this.getClass("enabled")),this.enabled=!1,void 0!==this.scrollParents&&this.scrollParents.forEach(function(e){e.removeEventListener("scroll",t.position)})}},{key:"destroy",value:function(){var t=this;this.disable(),D.forEach(function(e,o){e===t&&D.splice(o,1)}),0===D.length&&s()}},{key:"updateAttachClasses",value:function(t,e){var o=this,n=(t=t||this.attachment,e=e||this.targetAttachment,void 0!==this._addAttachClasses&&this._addAttachClasses.length&&this._addAttachClasses.splice(0,this._addAttachClasses.length),void 0===this._addAttachClasses&&(this._addAttachClasses=[]),this._addAttachClasses),r=(t.top&&n.push(this.getClass("element-attached")+"-"+t.top),t.left&&n.push(this.getClass("element-attached")+"-"+t.left),e.top&&n.push(this.getClass("target-attached")+"-"+e.top),e.left&&n.push(this.getClass("target-attached")+"-"+e.left),[]);["left","top","bottom","right","middle","center"].forEach(function(t){r.push(o.getClass("element-attached")+"-"+t),r.push(o.getClass("target-attached")+"-"+t)}),k(function(){void 0!==o._addAttachClasses&&(m(o.element,o._addAttachClasses,r),!1!==o.options.addTargetClasses&&m(o.target,o._addAttachClasses,r),delete o._addAttachClasses)})}},{key:"position",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]||arguments[0];if(this.enabled){this.clearCache();for(var o=function(t,e){var o=t.left,t=t.top;return{left:o="auto"===o?F[e.left]:o,top:t="auto"===t?H[e.top]:t}}(this.targetAttachment,this.attachment),i=(this.updateAttachClasses(this.attachment,o),this.cache("element-bounds",function(){return a(t.element)})),n=i.width,r=i.height,h=(0===n&&0===r&&void 0!==this.lastSize?(n=(s=this.lastSize).width,r=s.height):this.lastSize={width:n,height:r},this.cache("target-bounds",function(){return t.getTargetBounds()})),s=h,p=C(V(this.attachment),{width:n,height:r}),u=C(V(o),s),c=C(this.offset,{width:n,height:r}),g=C(this.targetOffset,s),p=w(p,c),u=w(u,g),m=h.left+u.left-p.left,v=h.top+u.top-p.top,y=0;y<x.modules.length;++y){var O=x.modules[y].position.call(this,{left:m,top:v,targetAttachment:o,targetPos:h,elementPos:i,offset:p,targetOffset:u,manualOffset:c,manualTargetOffset:g,scrollbarSize:S,attachment:this.attachment});if(!1===O)return!1;void 0!==O&&"object"==typeof O&&(v=O.top,m=O.left)}var E={page:{top:v,left:m},viewport:{top:v-pageYOffset,bottom:pageYOffset-v-r+innerHeight,left:m-pageXOffset,right:pageXOffset-m-n+innerWidth}},A=this.target.ownerDocument,s=A.defaultView,S=void 0;return s.innerHeight>A.documentElement.clientHeight&&(S=this.cache("scrollbar-size",l),E.viewport.bottom-=S.height),s.innerWidth>A.documentElement.clientWidth&&(S=this.cache("scrollbar-size",l),E.viewport.right-=S.width),-1!==["","static"].indexOf(A.body.style.position)&&-1!==["","static"].indexOf(A.body.parentElement.style.position)||(E.page.bottom=A.body.scrollHeight-v-r,E.page.right=A.body.scrollWidth-m-n),void 0!==this.options.optimizations&&!1!==this.options.optimizations.moveElement&&void 0===this.targetModifier&&function(){var l,e=t.cache("target-offsetparent",function(){return f(t.target)}),o=t.cache("target-offsetparent-bounds",function(){return a(e)}),i=getComputedStyle(e),n=o,r={};["Top","Left","Bottom","Right"].forEach(function(t){r[t.toLowerCase()]=parseFloat(i["border"+t+"Width"])}),o.right=A.body.scrollWidth-o.left-n.width+r.right,o.bottom=A.body.scrollHeight-o.top-n.height+r.bottom,E.page.top>=o.top+r.top&&E.page.bottom>=o.bottom&&E.page.left>=o.left+r.left&&E.page.right>=o.right&&(n=e.scrollTop,l=e.scrollLeft,E.offset={top:E.page.top-o.top+n-r.top,left:E.page.left-o.left+l-r.left})}(),this.move(E),this.history.unshift(E),3<this.history.length&&this.history.pop(),e&&_(),!0}}},{key:"move",value:function(t){var e=this;if(void 0!==this.element.parentNode){var i,o={};for(i in t)for(var n in o[i]={},t[i]){for(var r=!1,s=0;s<this.history.length;++s){var a=this.history[s];if(void 0!==a[i]&&!function(t,e,argument_2){return e<=t+(argument_2=arguments.length<=2||void 0===argument_2?1:argument_2)&&t-argument_2<=e}(a[i][n],t[i][n])){r=!0;break}}r||(o[i][n]=!0)}var l={top:"",left:"",right:"",bottom:""},d=function(t,o){var r,s;!1!==(void 0!==e.options.optimizations?e.options.optimizations.gpu:null)?(s=r=void 0,r=t.top?(l.top=0,o.top):(l.bottom=0,-o.bottom),s=t.left?(l.left=0,o.left):(l.right=0,-o.right),!window.matchMedia||window.matchMedia("only screen and (min-resolution: 1.3dppx)").matches||window.matchMedia("only screen and (-webkit-min-device-pixel-ratio: 1.3)").matches||(s=Math.round(s),r=Math.round(r)),l[L]="translateX("+s+"px) translateY("+r+"px)","msTransform"!==L&&(l[L]+=" translateZ(0)")):(t.top?l.top=o.top+"px":l.bottom=o.bottom+"px",t.left?l.left=o.left+"px":l.right=o.right+"px")},p=!1;if((o.page.top||o.page.bottom)&&(o.page.left||o.page.right)?(l.position="absolute",d(o.page,t.page)):(o.viewport.top||o.viewport.bottom)&&(o.viewport.left||o.viewport.right)?(l.position="fixed",d(o.viewport,t.viewport)):void 0!==o.offset&&o.offset.top&&o.offset.left?function(){l.position="absolute";var i=e.cache("target-offsetparent",function(){return f(e.target)});f(e.element)!==i&&k(function(){e.element.parentNode.removeChild(e.element),i.appendChild(e.element)}),d(o.offset,t.offset),p=!0}():(l.position="absolute",d({top:!0,left:!0},t.page)),!p)if(this.options.bodyElement)this.element.parentNode!==this.options.bodyElement&&this.options.bodyElement.appendChild(this.element);else{for(var u=!0,c=this.element.parentNode;c&&1===c.nodeType&&"BODY"!==c.tagName;){if("static"!==getComputedStyle(c).position){u=!1;break}c=c.parentNode}u||(this.element.parentNode.removeChild(this.element),this.element.ownerDocument.body.appendChild(this.element))}var g={},m=!1;for(n in l){var v=l[n];this.element.style[n]!==v&&(m=!0,g[n]=v)}m&&k(function(){h(e.element.style,g),e.trigger("repositioned")})}}}]),e}(),I=(I.modules=[],x.position=X,h(I,x)),z=function(e,o){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(t,e){var o=[],i=!0,n=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);i=!0);}catch(f){n=!0,r=f}finally{try{!i&&a.return&&a.return()}finally{if(n)throw r}}return o}(e,o);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=(Y=x.Utils).getBounds,h=Y.extend,m=Y.updateClasses,k=Y.defer,G=["left","top","right","bottom"];x.modules.push({position:function(t){var f,s,p,u,c,g,v,y,e=this,o=t.top,i=t.left,n=t.targetAttachment;return!this.options.constraints||(t=this.cache("element-bounds",function(){return a(e.element)}),s=t.height,0===(f=t.width)&&0===s&&void 0!==this.lastSize&&(t=this.lastSize,f=t.width,s=t.height),t=this.cache("target-bounds",function(){return e.getTargetBounds()}),p=t.height,u=t.width,c=[this.getClass("pinned"),this.getClass("out-of-bounds")],this.options.constraints.forEach(function(t){var e=t.outOfBoundsClass,t=t.pinnedClass;e&&c.push(e),t&&c.push(t)}),c.forEach(function(t){["left","top","right","bottom"].forEach(function(e){c.push(t+"-"+e)})}),g=[],v=h({},n),y=h({},this.attachment),this.options.constraints.forEach(function(t){var r=t.to,a=t.attachment,t=t.pin,h=void 0,d=void 0,c=(h=0<=(a=void 0===a?"":a).indexOf(" ")?(c=a.split(" "),d=(c=z(c,2))[0],c[1]):d=a,O(e,r)),w=("target"!==d&&"both"!==d||(o<c[1]&&"top"===v.top&&(o+=p,v.top="bottom"),o+s>c[3]&&"bottom"===v.top&&(o-=p,v.top="top")),"together"===d&&("top"===v.top&&("bottom"===y.top&&o<c[1]?(o+=p,v.top="bottom",o+=s,y.top="top"):"top"===y.top&&o+s>c[3]&&o-(s-p)>=c[1]&&(o-=s-p,v.top="bottom",y.top="bottom")),"bottom"===v.top&&("top"===y.top&&o+s>c[3]?(o-=p,v.top="top",o-=s,y.top="bottom"):"bottom"===y.top&&o<c[1]&&o+(2*s-p)<=c[3]&&(o+=s-p,v.top="top",y.top="top")),"middle"===v.top)&&(o+s>c[3]&&"top"===y.top?(o-=s,y.top="bottom"):o<c[1]&&"bottom"===y.top&&(o+=s,y.top="top")),"target"!==h&&"both"!==h||(i<c[0]&&"left"===v.left&&(i+=u,v.left="right"),i+f>c[2]&&"right"===v.left&&(i-=u,v.left="left")),"together"===h&&(i<c[0]&&"left"===v.left?"right"===y.left?(i+=u,v.left="right",i+=f,y.left="left"):"left"===y.left&&(i+=u,v.left="right",i-=f,y.left="right"):i+f>c[2]&&"right"===v.left?"left"===y.left?(i-=u,v.left="left",i-=f,y.left="right"):"right"===y.left&&(i-=u,v.left="left",i+=f,y.left="left"):"center"===v.left&&(i+f>c[2]&&"left"===y.left?(i-=f,y.left="right"):i<c[0]&&"right"===y.left&&(i+=f,y.left="left"))),"element"!==d&&"both"!==d||(o<c[1]&&"bottom"===y.top&&(o+=s,y.top="top"),o+s>c[3]&&"top"===y.top&&(o-=s,y.top="bottom")),"element"!==h&&"both"!==h||(i<c[0]&&("right"===y.left?(i+=f,y.left="left"):"center"===y.left&&(i+=f/2,y.left="left")),i+f>c[2]&&("left"===y.left?(i-=f,y.left="right"):"center"===y.left&&(i-=f/2,y.left="right"))),"string"==typeof t?t=t.split(",").map(function(t){return t.trim()}):!0===t&&(t=["top","left","right","bottom"]),t=t||[],[]),C=[];o<c[1]&&(0<=t.indexOf("top")?(o=c[1],w):C).push("top"),o+s>c[3]&&(0<=t.indexOf("bottom")?(o=c[3]-s,w):C).push("bottom"),i<c[0]&&(0<=t.indexOf("left")?(i=c[0],w):C).push("left"),i+f>c[2]&&(0<=t.indexOf("right")?(i=c[2]-f,w):C).push("right"),w.length&&function(){var t=void 0!==e.options.pinnedClass?e.options.pinnedClass:e.getClass("pinned");g.push(t),w.forEach(function(e){g.push(t+"-"+e)})}(),C.length&&function(){var t=void 0!==e.options.outOfBoundsClass?e.options.outOfBoundsClass:e.getClass("out-of-bounds");g.push(t),C.forEach(function(e){g.push(t+"-"+e)})}(),(0<=w.indexOf("left")||0<=w.indexOf("right"))&&(y.left=v.left=!1),(0<=w.indexOf("top")||0<=w.indexOf("bottom"))&&(y.top=v.top=!1),v.top===n.top&&v.left===n.left&&y.top===e.attachment.top&&y.left===e.attachment.left||(e.updateAttachClasses(y,v),e.trigger("update",{attachment:y,targetAttachment:v}))}),k(function(){!1!==e.options.addTargetClasses&&m(e.target,g,c),m(e.element,g,c)}),{top:o,left:i})}});var a=(Y=x.Utils).getBounds,m=Y.updateClasses,k=Y.defer,z=(x.modules.push({position:function(t){var e=this,o=t.top,i=t.left,t=this.cache("element-bounds",function(){return a(e.element)}),r=t.height,t=t.width,f=this.getTargetBounds(),l=o+r,h=i+t,d=[],p=(o<=f.bottom&&l>=f.top&&["left","right"].forEach(function(t){var e=f[t];e!==i&&e!==h||d.push(t)}),i<=f.right&&h>=f.left&&["top","bottom"].forEach(function(t){var e=f[t];e!==o&&e!==l||d.push(t)}),[]),u=[];return p.push(this.getClass("abutted")),["left","top","right","bottom"].forEach(function(t){p.push(e.getClass("abutted")+"-"+t)}),d.length&&u.push(this.getClass("abutted")),d.forEach(function(t){u.push(e.getClass("abutted")+"-"+t)}),k(function(){!1!==e.options.addTargetClasses&&m(e.target,u,p),m(e.element,u,p)}),!0}}),function(e,o){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(t,e){var o=[],i=!0,n=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);i=!0);}catch(f){n=!0,r=f}finally{try{!i&&a.return&&a.return()}finally{if(n)throw r}}return o}(e,o);throw new TypeError("Invalid attempt to destructure non-iterable instance")});return x.modules.push({position:function(t){var i,a,n,r,e=t.top,t=t.left;if(this.options.shift)return i=this.options.shift,r=n=void 0,r="string"==typeof(i="function"==typeof this.options.shift?this.options.shift.call(this,{top:e,left:t}):i)?((i=i.split(" "))[1]=i[1]||i[0],n=(a=z(i,2))[0],r=a[1],n=parseFloat(n,10),parseFloat(r,10)):(n=i.top,i.left),{top:e+=n,left:t+=r}}}),I}),!function($){"use strict";$.fn.counterUp=function(options){var s,settings=$.extend({time:400,delay:10,offset:100,beginAt:0,formatter:!1,context:"window",callback:function(){}},options);return this.each(function(){var $this=$(this),counter={time:$(this).data("counterup-time")||settings.time,delay:$(this).data("counterup-delay")||settings.delay,offset:$(this).data("counterup-offset")||settings.offset,beginAt:$(this).data("counterup-beginat")||settings.beginAt,context:$(this).data("counterup-context")||settings.context};$this.waypoint(function(direction){!function(){var nums=[],divisions=counter.time/counter.delay,num=$this.attr("data-num")?$this.attr("data-num"):$this.text(),isComma=/[0-9]+,[0-9]+/.test(num),decimalPlaces=((num=num.replace(/,/g,"")).split(".")[1]||[]).length,isTime=(counter.beginAt>num&&(counter.beginAt=num),/[0-9]+:[0-9]+:[0-9]+/.test(num));if(isTime){var times=num.split(":"),m=1;for(s=0;0<times.length;)s+=m*parseInt(times.pop(),10),m*=60}for(var i=divisions;i>=counter.beginAt/num*divisions;i--){var hours,newNum=parseFloat(num/divisions*i).toFixed(decimalPlaces);if(isTime&&(newNum=parseInt(s/divisions*i),newNum=((hours=parseInt(newNum/3600)%24)<10?"0"+hours:hours)+":"+((hours=parseInt(newNum/60)%60)<10?"0"+hours:hours)+":"+((hours=parseInt(newNum%60,10))<10?"0"+hours:hours)),isComma)for(;/(\d+)(\d{3})/.test(newNum.toString());)newNum=newNum.toString().replace(/(\d+)(\d{3})/,"$1,$2");settings.formatter&&(newNum=settings.formatter.call(this,newNum)),nums.unshift(newNum)}$this.data("counterup-nums",nums),$this.text(counter.beginAt);$this.data("counterup-func",function(){$this.data("counterup-nums")?($this.html($this.data("counterup-nums").shift()),$this.data("counterup-nums").length?setTimeout($this.data("counterup-func"),counter.delay):($this.data("counterup-nums",null),$this.data("counterup-func",null),settings.callback.call(this))):settings.callback.call(this)}),setTimeout($this.data("counterup-func"),counter.delay)}(),this.destroy()},{offset:counter.offset+"%",context:counter.context})})}}(jQuery),!function(t,e){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",e):"object"==typeof module&&module.exports?module.exports=e():t.EvEmitter=e()}("undefined"!=typeof window?window:this,function(){function t(){}var e=t.prototype;return e.on=function(t,e){var i;if(t&&e)return-1==(i=(i=this._events=this._events||{})[t]=i[t]||[]).indexOf(e)&&i.push(e),this},e.once=function(t,e){var i;if(t&&e)return this.on(t,e),((i=this._onceEvents=this._onceEvents||{})[t]=i[t]||{})[e]=!0,this},e.off=function(t,e){t=this._events&&this._events[t];if(t&&t.length)return-1!=(e=t.indexOf(e))&&t.splice(e,1),this},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=0,o=i[n];e=e||[];for(var r=this._onceEvents&&this._onceEvents[t];o;){var s=r&&r[o];s&&(this.off(t,o),delete r[o]),o.apply(this,e),o=i[n+=s?0:1]}return this}},t}),function(t,e){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("ev-emitter")):t.imagesLoaded=e(t,t.EvEmitter)}(window,function(t,e){function i(t,e){for(var i in e)t[i]=e[i];return t}function o(t,e,r){return this instanceof o?("string"==typeof t&&(t=document.querySelectorAll(t)),this.elements=function(t){var e=[];if(Array.isArray(t))e=t;else if("number"==typeof t.length)for(var i=0;i<t.length;i++)e.push(t[i]);else e.push(t);return e}(t),this.options=i({},this.options),"function"==typeof e?r=e:i(this.options,e),r&&this.on("always",r),this.getImages(),h&&(this.jqDeferred=new h.Deferred),void setTimeout(function(){this.check()}.bind(this))):new o(t,e,r)}function r(t){this.img=t}function s(t,e){this.url=t,this.element=e,this.img=new Image}var h=t.jQuery,a=t.console,d=((o.prototype=Object.create(e.prototype)).options={},o.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},o.prototype.addElementImages=function(t){"IMG"==t.nodeName&&this.addImage(t),!0===this.options.background&&this.addElementBackgroundImages(t);var e=t.nodeType;if(e&&d[e]){for(var i=t.querySelectorAll("img"),n=0;n<i.length;n++){var o=i[n];this.addImage(o)}if("string"==typeof this.options.background)for(var r=t.querySelectorAll(this.options.background),n=0;n<r.length;n++){var s=r[n];this.addElementBackgroundImages(s)}}},{1:!0,9:!0,11:!0});return o.prototype.addElementBackgroundImages=function(t){var e=getComputedStyle(t);if(e)for(var i=/url\((['"])?(.*?)\1\)/gi,n=i.exec(e.backgroundImage);null!==n;){var o=n&&n[2];o&&this.addBackground(o,t),n=i.exec(e.backgroundImage)}},o.prototype.addImage=function(t){t=new r(t);this.images.push(t)},o.prototype.addBackground=function(t,e){t=new s(t,e);this.images.push(t)},o.prototype.check=function(){function t(t,i,n){setTimeout(function(){e.progress(t,i,n)})}var e=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(e){e.once("progress",t),e.check()}):void this.complete()},o.prototype.progress=function(t,e,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded,this.emitEvent("progress",[this,t,e]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,t),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&a&&a.log("progress: "+i,t,e)},o.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";this.isComplete=!0,this.emitEvent(t,[this]),this.emitEvent("always",[this]),this.jqDeferred&&(t=this.hasAnyBroken?"reject":"resolve",this.jqDeferred[t](this))},(r.prototype=Object.create(e.prototype)).check=function(){return this.getIsImageComplete()?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},r.prototype.getIsImageComplete=function(){return this.img.complete&&void 0!==this.img.naturalWidth},r.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.img,e])},r.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},r.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},r.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},r.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},(s.prototype=Object.create(r.prototype)).check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},s.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.element,e])},(o.makeJQueryPlugin=function(e){(e=e||t.jQuery)&&((h=e).fn.imagesLoaded=function(t,e){return new o(this,t,e).jqDeferred.promise(h(this))})})(),o}),!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],b):"object"==typeof exports?module.exports=b(require("jquery")):b(a.jQuery)}(this,function(a){!function(){"use strict";function b(b,d){if(this.el=b,this.$el=a(b),this.s=a.extend({},c,d),this.s.dynamic&&"undefined"!==this.s.dynamicEl&&this.s.dynamicEl.constructor===Array&&!this.s.dynamicEl.length)throw"When using dynamic mode, you must also define dynamicEl as an Array.";return this.modules={},this.lGalleryOn=!1,this.lgBusy=!1,this.hideBartimeout=!1,this.isTouch="ontouchstart"in document.documentElement,this.s.slideEndAnimatoin&&(this.s.hideControlOnEnd=!1),this.s.dynamic?this.$items=this.s.dynamicEl:"this"===this.s.selector?this.$items=this.$el:""!==this.s.selector?this.s.selectWithin?this.$items=a(this.s.selectWithin).find(this.s.selector):this.$items=this.$el.find(a(this.s.selector)):this.$items=this.$el.children(),this.$slide="",this.$outer="",this.init(),this}var c={mode:"lg-slide",cssEasing:"ease",easing:"linear",speed:600,height:"100%",width:"100%",addClass:"",startClass:"lg-start-zoom",backdropDuration:150,hideBarsDelay:6e3,useLeft:!1,closable:!0,loop:!0,escKey:!0,keyPress:!0,controls:!0,slideEndAnimatoin:!0,hideControlOnEnd:!1,mousewheel:!0,getCaptionFromTitleOrAlt:!0,appendSubHtmlTo:".lg-sub-html",subHtmlSelectorRelative:!1,preload:1,showAfterLoad:!0,selector:"",selectWithin:"",nextHtml:"",prevHtml:"",index:!1,iframeMaxWidth:"100%",download:!0,counter:!0,appendCounterTo:".lg-toolbar",swipeThreshold:50,enableSwipe:!0,enableDrag:!0,dynamic:!1,dynamicEl:[],galleryId:1};b.prototype.init=function(){var b=this,c=(b.s.preload>b.$items.length&&(b.s.preload=b.$items.length),window.location.hash);0<c.indexOf("lg="+this.s.galleryId)&&(b.index=parseInt(c.split("&slide=")[1],10),a("body").addClass("lg-from-hash"),a("body").hasClass("lg-on")||(setTimeout(function(){b.build(b.index)}),a("body").addClass("lg-on"))),b.s.dynamic?(b.$el.trigger("onBeforeOpen.lg"),b.index=b.s.index||0,a("body").hasClass("lg-on")||setTimeout(function(){b.build(b.index),a("body").addClass("lg-on")})):b.$items.on("click.lgcustom",function(c){try{c.preventDefault(),c.preventDefault()}catch(a){c.returnValue=!1}b.$el.trigger("onBeforeOpen.lg"),b.index=b.s.index||b.$items.index(this),a("body").hasClass("lg-on")||(b.build(b.index),a("body").addClass("lg-on"))})},b.prototype.build=function(b){var c=this;c.structure(),a.each(a.fn.lightGallery.modules,function(b){c.modules[b]=new a.fn.lightGallery.modules[b](c.el)}),c.slide(b,!1,!1,!1),c.s.keyPress&&c.keyPress(),1<c.$items.length&&(c.arrow(),setTimeout(function(){c.enableDrag(),c.enableSwipe()},50),c.s.mousewheel)&&c.mousewheel(),c.counter(),c.closeGallery(),c.$el.trigger("onAfterOpen.lg"),c.$outer.on("mousemove.lg click.lg touchstart.lg",function(){c.$outer.removeClass("lg-hide-items"),clearTimeout(c.hideBartimeout),c.hideBartimeout=setTimeout(function(){c.$outer.addClass("lg-hide-items")},c.s.hideBarsDelay)}),c.$outer.trigger("mousemove.lg")},b.prototype.structure=function(){var c="",d="",e=0,f="",g=this;for(a("body").append('<div class="lg-backdrop"></div>'),a(".lg-backdrop").css("transition-duration",this.s.backdropDuration+"ms"),e=0;e<this.$items.length;e++)c+='<div class="lg-item"></div>';this.s.controls&&1<this.$items.length&&(d='<div class="lg-actions"><div class="lg-prev lg-icon">'+this.s.prevHtml+'</div><div class="lg-next lg-icon">'+this.s.nextHtml+"</div></div>"),".lg-sub-html"===this.s.appendSubHtmlTo&&(f='<div class="lg-sub-html"></div>'),d='<div class="lg-outer '+this.s.addClass+" "+this.s.startClass+'"><div class="lg" style="width:'+this.s.width+"; height:"+this.s.height+'"><div class="lg-inner">'+c+'</div><div class="lg-toolbar lg-group"><span class="lg-close lg-icon"></span></div>'+d+f+"</div></div>",a("body").append(d),this.$outer=a(".lg-outer"),this.$slide=this.$outer.find(".lg-item"),this.s.useLeft?(this.$outer.addClass("lg-use-left"),this.s.mode="lg-slide"):this.$outer.addClass("lg-use-css3"),g.setTop(),a(window).on("resize.lg orientationchange.lg",function(){setTimeout(function(){g.setTop()},100)}),this.$slide.eq(this.index).addClass("lg-current"),this.doCss()?this.$outer.addClass("lg-css3"):(this.$outer.addClass("lg-css"),this.s.speed=0),this.$outer.addClass(this.s.mode),this.s.enableDrag&&1<this.$items.length&&this.$outer.addClass("lg-grab"),this.s.showAfterLoad&&this.$outer.addClass("lg-show-after-load"),this.doCss()&&((f=this.$outer.find(".lg-inner")).css("transition-timing-function",this.s.cssEasing),f.css("transition-duration",this.s.speed+"ms")),setTimeout(function(){a(".lg-backdrop").addClass("in")}),setTimeout(function(){g.$outer.addClass("lg-visible")},this.s.backdropDuration),this.s.download&&this.$outer.find(".lg-toolbar").append('<a id="lg-download" target="_blank" download class="lg-download lg-icon"></a>'),this.prevScrollTop=a(window).scrollTop()},b.prototype.setTop=function(){var b,c,d;"100%"!==this.s.height&&(c=((b=a(window).height())-parseInt(this.s.height,10))/2,d=this.$outer.find(".lg"),b>=parseInt(this.s.height,10)?d.css("top",c+"px"):d.css("top","0px"))},b.prototype.doCss=function(){return!!function(){for(var a=["transition","MozTransition","WebkitTransition","OTransition","msTransition","KhtmlTransition"],b=document.documentElement,c=0,c=0;c<a.length;c++)if(a[c]in b.style)return!0}()},b.prototype.isVideo=function(a,b){var e,f;return b=this.s.dynamic?this.s.dynamicEl[b].html:this.$items.eq(b).attr("data-html"),!a&&b?{html5:!0}:(b=a.match(/\/\/(?:www\.)?youtu(?:\.be|be\.com)\/(?:watch\?v=|embed\/)?([a-z0-9\-\_\%]+)/i),e=a.match(/\/\/(?:www\.)?vimeo.com\/([0-9a-z\-_]+)/i),f=a.match(/\/\/(?:www\.)?dai.ly\/([0-9a-z\-_]+)/i),a=a.match(/\/\/(?:www\.)?(?:vk\.com|vkontakte\.ru)\/(?:video_ext\.php\?)(.*)/i),b?{youtube:b}:e?{vimeo:e}:f?{dailymotion:f}:a?{vk:a}:void 0)},b.prototype.counter=function(){this.s.counter&&a(this.s.appendCounterTo).append('<div id="lg-counter"><span id="lg-counter-current">'+(parseInt(this.index,10)+1)+'</span> / <span id="lg-counter-all">'+this.$items.length+"</span></div>")},b.prototype.addHtml=function(b){var c,d,f,e=null;this.s.dynamic?this.s.dynamicEl[b].subHtmlUrl?c=this.s.dynamicEl[b].subHtmlUrl:e=this.s.dynamicEl[b].subHtml:(d=this.$items.eq(b)).attr("data-sub-html-url")?c=d.attr("data-sub-html-url"):(e=d.attr("data-sub-html"),this.s.getCaptionFromTitleOrAlt&&!e&&(e=d.attr("title")||d.find("img").first().attr("alt"))),c||(null!=e?"."!==(f=e.substring(0,1))&&"#"!==f||(e=(this.s.subHtmlSelectorRelative&&!this.s.dynamic?d.find(e):a(e)).html()):e=""),".lg-sub-html"===this.s.appendSubHtmlTo?c?this.$outer.find(this.s.appendSubHtmlTo).load(c):this.$outer.find(this.s.appendSubHtmlTo).html(e):c?this.$slide.eq(b).load(c):this.$slide.eq(b).append(e),null!=e&&(""===e?this.$outer.find(this.s.appendSubHtmlTo).addClass("lg-empty-html"):this.$outer.find(this.s.appendSubHtmlTo).removeClass("lg-empty-html")),this.$el.trigger("onAfterAppendSubHtml.lg",[b])},b.prototype.preload=function(a){for(var b=1,c=1,b=1;b<=this.s.preload&&!(b>=this.$items.length-a);b++)this.loadContent(a+b,!1,0);for(c=1;c<=this.s.preload&&!(a-c<0);c++)this.loadContent(a-c,!1,0)},b.prototype.loadContent=function(b,c,d){function m(b){for(var c=[],d=[],e=0;e<b.length;e++){var g=b[e].split(" ");""===g[0]&&g.splice(0,1),d.push(g[0]),c.push(g[1])}for(var h=a(window).width(),i=0;i<c.length;i++)if(parseInt(c[i],10)>h){f=d[i];break}}var f,g,h,j,k=this,l=!1,i=k.s.dynamic?(k.s.dynamicEl[b].poster&&(l=!0,g=k.s.dynamicEl[b].poster),j=k.s.dynamicEl[b].html,f=k.s.dynamicEl[b].src,k.s.dynamicEl[b].responsive&&m(k.s.dynamicEl[b].responsive.split(",")),h=k.s.dynamicEl[b].srcset,k.s.dynamicEl[b].sizes):(k.$items.eq(b).attr("data-poster")&&(l=!0,g=k.$items.eq(b).attr("data-poster")),j=k.$items.eq(b).attr("data-html"),f=k.$items.eq(b).attr("href")||k.$items.eq(b).attr("data-src"),k.$items.eq(b).attr("data-responsive")&&m(k.$items.eq(b).attr("data-responsive").split(",")),h=k.$items.eq(b).attr("data-srcset"),k.$items.eq(b).attr("data-sizes")),p=!1,q=(k.s.dynamic?k.s.dynamicEl[b].iframe&&(p=!0):"true"===k.$items.eq(b).attr("data-iframe")&&(p=!0),k.isVideo(f,b));if(!k.$slide.eq(b).hasClass("lg-loaded")){if(p?k.$slide.eq(b).prepend('<div class="lg-video-cont" style="max-width:'+k.s.iframeMaxWidth+'"><div class="lg-video"><iframe class="lg-object" frameborder="0" src="'+f+'"  allowfullscreen="true"></iframe></div></div>'):l?(p="",p=q&&q.youtube?"lg-has-youtube":q&&q.vimeo?"lg-has-vimeo":"lg-has-html5",k.$slide.eq(b).prepend('<div class="lg-video-cont '+p+' "><div class="lg-video"><span class="lg-video-play"></span><img class="lg-object lg-has-poster" src="'+g+'" /></div></div>')):q?(k.$slide.eq(b).prepend('<div class="lg-video-cont "><div class="lg-video"></div></div>'),k.$el.trigger("hasVideo.lg",[b,f,j])):k.$slide.eq(b).prepend('<div class="lg-img-wrap"><img class="lg-object lg-image" src="'+f+'" /></div>'),k.$el.trigger("onAferAppendSlide.lg",[b]),p=k.$slide.eq(b).find(".lg-object"),i&&p.attr("sizes",i),h){p.attr("srcset",h);try{picturefill({elements:[p[0]]})}catch(a){console.error("Make sure you have included Picturefill version 2")}}".lg-sub-html"!==this.s.appendSubHtmlTo&&k.addHtml(b),k.$slide.eq(b).addClass("lg-loaded")}k.$slide.eq(b).find(".lg-object").on("load.lg error.lg",function(){var c=0;d&&!a("body").hasClass("lg-from-hash")&&(c=d),setTimeout(function(){k.$slide.eq(b).addClass("lg-complete"),k.$el.trigger("onSlideItemLoad.lg",[b,d||0])},c)}),q&&q.html5&&!l&&k.$slide.eq(b).addClass("lg-complete"),!0===c&&(k.$slide.eq(b).hasClass("lg-complete")?k.preload(b):k.$slide.eq(b).find(".lg-object").on("load.lg error.lg",function(){k.preload(b)}))},b.prototype.slide=function(b,c,d,e){var h,i,j,k,l,f=this.$outer.find(".lg-current").index(),g=this;g.lGalleryOn&&f===b||(h=this.$slide.length,i=g.lGalleryOn?this.s.speed:0,g.lgBusy)||(this.s.download&&((j=g.s.dynamic?!1!==g.s.dynamicEl[b].downloadUrl&&(g.s.dynamicEl[b].downloadUrl||g.s.dynamicEl[b].src):"false"!==g.$items.eq(b).attr("data-download-url")&&(g.$items.eq(b).attr("data-download-url")||g.$items.eq(b).attr("href")||g.$items.eq(b).attr("data-src")))?(a("#lg-download").attr("href",j),g.$outer.removeClass("lg-hide-download")):g.$outer.addClass("lg-hide-download")),this.$el.trigger("onBeforeSlide.lg",[f,b,c,d]),g.lgBusy=!0,clearTimeout(g.hideBartimeout),".lg-sub-html"===this.s.appendSubHtmlTo&&setTimeout(function(){g.addHtml(b)},i),this.arrowDisable(b),e||(b<f?e="prev":f<b&&(e="next")),c?(this.$slide.removeClass("lg-prev-slide lg-current lg-next-slide"),2<h?(k=b-1,l=b+1,(0===b&&f===h-1||b===h-1&&0===f)&&(l=0,k=h-1)):(k=0,l=1),"prev"===e?g.$slide.eq(l).addClass("lg-next-slide"):g.$slide.eq(k).addClass("lg-prev-slide"),g.$slide.eq(b).addClass("lg-current")):(g.$outer.addClass("lg-no-trans"),this.$slide.removeClass("lg-prev-slide lg-next-slide"),"prev"===e?(this.$slide.eq(b).addClass("lg-prev-slide"),this.$slide.eq(f).addClass("lg-next-slide")):(this.$slide.eq(b).addClass("lg-next-slide"),this.$slide.eq(f).addClass("lg-prev-slide")),setTimeout(function(){g.$slide.removeClass("lg-current"),g.$slide.eq(b).addClass("lg-current"),g.$outer.removeClass("lg-no-trans")},50)),g.lGalleryOn?(setTimeout(function(){g.loadContent(b,!0,0)},this.s.speed+50),setTimeout(function(){g.lgBusy=!1,g.$el.trigger("onAfterSlide.lg",[f,b,c,d])},this.s.speed)):(g.loadContent(b,!0,g.s.backdropDuration),g.lgBusy=!1,g.$el.trigger("onAfterSlide.lg",[f,b,c,d])),g.lGalleryOn=!0,this.s.counter&&a("#lg-counter-current").text(b+1))},b.prototype.goToNextSlide=function(a){var b=this,c=b.s.loop;a&&b.$slide.length<3&&(c=!1),b.lgBusy||(b.index+1<b.$slide.length?(b.index++,b.$el.trigger("onBeforeNextSlide.lg",[b.index]),b.slide(b.index,a,!1,"next")):c?(b.index=0,b.$el.trigger("onBeforeNextSlide.lg",[b.index]),b.slide(b.index,a,!1,"next")):b.s.slideEndAnimatoin&&!a&&(b.$outer.addClass("lg-right-end"),setTimeout(function(){b.$outer.removeClass("lg-right-end")},400)))},b.prototype.goToPrevSlide=function(a){var b=this,c=b.s.loop;a&&b.$slide.length<3&&(c=!1),b.lgBusy||(0<b.index?(b.index--,b.$el.trigger("onBeforePrevSlide.lg",[b.index,a]),b.slide(b.index,a,!1,"prev")):c?(b.index=b.$items.length-1,b.$el.trigger("onBeforePrevSlide.lg",[b.index,a]),b.slide(b.index,a,!1,"prev")):b.s.slideEndAnimatoin&&!a&&(b.$outer.addClass("lg-left-end"),setTimeout(function(){b.$outer.removeClass("lg-left-end")},400)))},b.prototype.keyPress=function(){var b=this;1<this.$items.length&&a(window).on("keyup.lg",function(a){1<b.$items.length&&(37===a.keyCode&&(a.preventDefault(),b.goToPrevSlide()),39===a.keyCode)&&(a.preventDefault(),b.goToNextSlide())}),a(window).on("keydown.lg",function(a){!0===b.s.escKey&&27===a.keyCode&&(a.preventDefault(),b.$outer.hasClass("lg-thumb-open")?b.$outer.removeClass("lg-thumb-open"):b.destroy())})},b.prototype.arrow=function(){var a=this;this.$outer.find(".lg-prev").on("click.lg",function(){a.goToPrevSlide()}),this.$outer.find(".lg-next").on("click.lg",function(){a.goToNextSlide()})},b.prototype.arrowDisable=function(a){!this.s.loop&&this.s.hideControlOnEnd&&(a+1<this.$slide.length?this.$outer.find(".lg-next").removeAttr("disabled").removeClass("disabled"):this.$outer.find(".lg-next").attr("disabled","disabled").addClass("disabled"),0<a?this.$outer.find(".lg-prev").removeAttr("disabled").removeClass("disabled"):this.$outer.find(".lg-prev").attr("disabled","disabled").addClass("disabled"))},b.prototype.setTranslate=function(a,b,c){this.s.useLeft?a.css("left",b):a.css({transform:"translate3d("+b+"px, "+c+"px, 0px)"})},b.prototype.touchMove=function(b,c){c-=b;15<Math.abs(c)&&(this.$outer.addClass("lg-dragging"),this.setTranslate(this.$slide.eq(this.index),c,0),this.setTranslate(a(".lg-prev-slide"),-this.$slide.eq(this.index).width()+c,0),this.setTranslate(a(".lg-next-slide"),this.$slide.eq(this.index).width()+c,0))},b.prototype.touchEnd=function(a){var b=this;"lg-slide"!==b.s.mode&&b.$outer.addClass("lg-slide"),this.$slide.not(".lg-current, .lg-prev-slide, .lg-next-slide").css("opacity","0"),setTimeout(function(){b.$outer.removeClass("lg-dragging"),a<0&&Math.abs(a)>b.s.swipeThreshold?b.goToNextSlide(!0):0<a&&Math.abs(a)>b.s.swipeThreshold?b.goToPrevSlide(!0):Math.abs(a)<5&&b.$el.trigger("onSlideClick.lg"),b.$slide.removeAttr("style")}),setTimeout(function(){b.$outer.hasClass("lg-dragging")||"lg-slide"===b.s.mode||b.$outer.removeClass("lg-slide")},b.s.speed+100)},b.prototype.enableSwipe=function(){var a=this,b=0,c=0,d=!1;a.s.enableSwipe&&a.isTouch&&a.doCss()&&(a.$slide.on("touchstart.lg",function(c){a.$outer.hasClass("lg-zoomed")||a.lgBusy||(c.preventDefault(),a.manageSwipeClass(),b=c.originalEvent.targetTouches[0].pageX)}),a.$slide.on("touchmove.lg",function(e){a.$outer.hasClass("lg-zoomed")||(e.preventDefault(),c=e.originalEvent.targetTouches[0].pageX,a.touchMove(b,c),d=!0)}),a.$slide.on("touchend.lg",function(){a.$outer.hasClass("lg-zoomed")||(d?(d=!1,a.touchEnd(c-b)):a.$el.trigger("onSlideClick.lg"))}))},b.prototype.enableDrag=function(){var b=this,c=0,d=0,e=!1,f=!1;b.s.enableDrag&&!b.isTouch&&b.doCss()&&(b.$slide.on("mousedown.lg",function(d){b.$outer.hasClass("lg-zoomed")||(a(d.target).hasClass("lg-object")||a(d.target).hasClass("lg-video-play"))&&(d.preventDefault(),b.lgBusy||(b.manageSwipeClass(),c=d.pageX,e=!0,b.$outer.scrollLeft+=1,--b.$outer.scrollLeft,b.$outer.removeClass("lg-grab").addClass("lg-grabbing"),b.$el.trigger("onDragstart.lg")))}),a(window).on("mousemove.lg",function(a){e&&(f=!0,d=a.pageX,b.touchMove(c,d),b.$el.trigger("onDragmove.lg"))}),a(window).on("mouseup.lg",function(g){f?(f=!1,b.touchEnd(d-c),b.$el.trigger("onDragend.lg")):(a(g.target).hasClass("lg-object")||a(g.target).hasClass("lg-video-play"))&&b.$el.trigger("onSlideClick.lg"),e&&(e=!1,b.$outer.removeClass("lg-grabbing").addClass("lg-grab"))}))},b.prototype.manageSwipeClass=function(){var a=this.index+1,b=this.index-1;this.s.loop&&2<this.$slide.length&&(0===this.index?b=this.$slide.length-1:this.index===this.$slide.length-1&&(a=0)),this.$slide.removeClass("lg-next-slide lg-prev-slide"),-1<b&&this.$slide.eq(b).addClass("lg-prev-slide"),this.$slide.eq(a).addClass("lg-next-slide")},b.prototype.mousewheel=function(){var a=this;a.$outer.on("mousewheel.lg",function(b){b.deltaY&&(0<b.deltaY?a.goToPrevSlide():a.goToNextSlide(),b.preventDefault())})},b.prototype.closeGallery=function(){var b=this,c=!1;this.$outer.find(".lg-close").on("click.lg",function(){b.destroy()}),b.s.closable&&(b.$outer.on("mousedown.lg",function(b){c=!!(a(b.target).is(".lg-outer")||a(b.target).is(".lg-item ")||a(b.target).is(".lg-img-wrap"))}),b.$outer.on("mouseup.lg",function(d){!(a(d.target).is(".lg-outer")||a(d.target).is(".lg-item ")||a(d.target).is(".lg-img-wrap")&&c)||b.$outer.hasClass("lg-dragging")||b.destroy()}))},b.prototype.destroy=function(b){var c=this;b||(c.$el.trigger("onBeforeClose.lg"),a(window).scrollTop(c.prevScrollTop)),b&&(c.s.dynamic||this.$items.off("click.lg click.lgcustom"),a.removeData(c.el,"lightGallery")),this.$el.off(".lg.tm"),a.each(a.fn.lightGallery.modules,function(a){c.modules[a]&&c.modules[a].destroy()}),this.lGalleryOn=!1,clearTimeout(c.hideBartimeout),this.hideBartimeout=!1,a(window).off(".lg"),a("body").removeClass("lg-on lg-from-hash"),c.$outer&&c.$outer.removeClass("lg-visible"),a(".lg-backdrop").removeClass("in"),setTimeout(function(){c.$outer&&c.$outer.remove(),a(".lg-backdrop").remove(),b||c.$el.trigger("onCloseAfter.lg")},c.s.backdropDuration+50)},a.fn.lightGallery=function(c){return this.each(function(){if(a.data(this,"lightGallery"))try{a(this).data("lightGallery").init()}catch(a){console.error("lightGallery has not initiated properly")}else a.data(this,"lightGallery",new b(this,c))})},a.fn.lightGallery.modules={}}()}),!function($){"use strict";function Video(element){return this.core=$(element).data("lightGallery"),this.$el=$(element),this.core.s=$.extend({},defaults,this.core.s),this.videoLoaded=!1,this.init(),this}var defaults={videoMaxWidth:"855px",youtubePlayerParams:!1,vimeoPlayerParams:!1,dailymotionPlayerParams:!1,vkPlayerParams:!1,videojs:!1,videojsOptions:{}};Video.prototype.init=function(){function loadOnClick($el){if($el.find(".lg-object").hasClass("lg-has-poster")&&$el.find(".lg-object").is(":visible"))if($el.hasClass("lg-has-video")){var youtubePlayer=$el.find(".lg-youtube").get(0),vimeoPlayer=$el.find(".lg-vimeo").get(0),dailymotionPlayer=$el.find(".lg-dailymotion").get(0),html5Player=$el.find(".lg-html5").get(0);if(youtubePlayer)youtubePlayer.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}',"*");else if(vimeoPlayer)try{$f(vimeoPlayer).api("play")}catch(e){console.error("Make sure you have included froogaloop2 js")}else if(dailymotionPlayer)dailymotionPlayer.contentWindow.postMessage("play","*");else if(html5Player)if(_this.core.s.videojs)try{videojs(html5Player).play()}catch(e){console.error("Make sure you have included videojs")}else html5Player.play();$el.addClass("lg-video-playing")}else{$el.addClass("lg-video-playing lg-has-video");youtubePlayer=function(_src,_html){if($el.find(".lg-video").append(_this.loadVideo(_src,"",!1,_this.core.index,_html)),_html)if(_this.core.s.videojs)try{videojs(_this.core.$slide.eq(_this.core.index).find(".lg-html5").get(0),_this.core.s.videojsOptions,function(){this.play()})}catch(e){console.error("Make sure you have included videojs")}else _this.core.$slide.eq(_this.core.index).find(".lg-html5").get(0).play()},vimeoPlayer=(_this.core.s.dynamic?youtubePlayer(_this.core.s.dynamicEl[_this.core.index].src,_this.core.s.dynamicEl[_this.core.index].html):youtubePlayer(_this.core.$items.eq(_this.core.index).attr("href")||_this.core.$items.eq(_this.core.index).attr("data-src"),_this.core.$items.eq(_this.core.index).attr("data-html")),$el.find(".lg-object"));$el.find(".lg-video").append(vimeoPlayer),$el.find(".lg-video-object").hasClass("lg-html5")||($el.removeClass("lg-complete"),$el.find(".lg-video-object").on("load.lg error.lg",function(){$el.addClass("lg-complete")}))}}var _this=this;_this.core.$el.on("hasVideo.lg.tm",function(event,index,src,html){if(_this.core.$slide.eq(index).find(".lg-video").append(_this.loadVideo(src,"lg-object",!0,index,html)),html)if(_this.core.s.videojs)try{videojs(_this.core.$slide.eq(index).find(".lg-html5").get(0),_this.core.s.videojsOptions,function(){_this.videoLoaded||this.play()})}catch(e){console.error("Make sure you have included videojs")}else _this.core.$slide.eq(index).find(".lg-html5").get(0).play()}),_this.core.$el.on("onAferAppendSlide.lg.tm",function(event,index){_this.core.$slide.eq(index).find(".lg-video-cont").css("max-width",_this.core.s.videoMaxWidth),_this.videoLoaded=!0});_this.core.doCss()&&1<_this.core.$items.length&&(_this.core.s.enableSwipe&&_this.core.isTouch||_this.core.s.enableDrag&&!_this.core.isTouch)?_this.core.$el.on("onSlideClick.lg.tm",function(){var $el=_this.core.$slide.eq(_this.core.index);loadOnClick($el)}):_this.core.$slide.on("click.lg",function(){loadOnClick($(this))}),_this.core.$el.on("onBeforeSlide.lg.tm",function(event,prevIndex,index){var prevIndex=_this.core.$slide.eq(prevIndex),youtubePlayer=prevIndex.find(".lg-youtube").get(0),vimeoPlayer=prevIndex.find(".lg-vimeo").get(0),dailymotionPlayer=prevIndex.find(".lg-dailymotion").get(0),vkPlayer=prevIndex.find(".lg-vk").get(0),prevIndex=prevIndex.find(".lg-html5").get(0);if(youtubePlayer)youtubePlayer.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*");else if(vimeoPlayer)try{$f(vimeoPlayer).api("pause")}catch(e){console.error("Make sure you have included froogaloop2 js")}else if(dailymotionPlayer)dailymotionPlayer.contentWindow.postMessage("pause","*");else if(prevIndex)if(_this.core.s.videojs)try{videojs(prevIndex).pause()}catch(e){console.error("Make sure you have included videojs")}else prevIndex.pause();vkPlayer&&$(vkPlayer).attr("src",$(vkPlayer).attr("src").replace("&autoplay","&noplay"));youtubePlayer=_this.core.s.dynamic?_this.core.s.dynamicEl[index].src:_this.core.$items.eq(index).attr("href")||_this.core.$items.eq(index).attr("data-src"),vimeoPlayer=_this.core.isVideo(youtubePlayer,index)||{};(vimeoPlayer.youtube||vimeoPlayer.vimeo||vimeoPlayer.dailymotion||vimeoPlayer.vk)&&_this.core.$outer.addClass("lg-hide-download")}),_this.core.$el.on("onAfterSlide.lg.tm",function(event,prevIndex){_this.core.$slide.eq(prevIndex).removeClass("lg-video-playing")})},Video.prototype.loadVideo=function(src,addClass,noposter,index,html){var video="",autoplay=1,a="",src=this.core.isVideo(src,index)||{};return noposter&&(autoplay=this.videoLoaded?0:1),src.youtube?(a="?wmode=opaque&autoplay="+autoplay+"&enablejsapi=1",this.core.s.youtubePlayerParams&&(a=a+"&"+$.param(this.core.s.youtubePlayerParams)),video='<iframe class="lg-video-object lg-youtube '+addClass+'" width="560" height="315" src="//www.youtube.com/embed/'+src.youtube[1]+a+'" frameborder="0" allowfullscreen></iframe>'):src.vimeo?(a="?autoplay="+autoplay+"&api=1",this.core.s.vimeoPlayerParams&&(a=a+"&"+$.param(this.core.s.vimeoPlayerParams)),video='<iframe class="lg-video-object lg-vimeo '+addClass+'" width="560" height="315"  src="//player.vimeo.com/video/'+src.vimeo[1]+a+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'):src.dailymotion?(a="?wmode=opaque&autoplay="+autoplay+"&api=postMessage",this.core.s.dailymotionPlayerParams&&(a=a+"&"+$.param(this.core.s.dailymotionPlayerParams)),video='<iframe class="lg-video-object lg-dailymotion '+addClass+'" width="560" height="315" src="//www.dailymotion.com/embed/video/'+src.dailymotion[1]+a+'" frameborder="0" allowfullscreen></iframe>'):src.html5?video=html="."!==(index=html.substring(0,1))&&"#"!==index?html:$(html).html():src.vk&&(a="&autoplay="+autoplay,this.core.s.vkPlayerParams&&(a=a+"&"+$.param(this.core.s.vkPlayerParams)),video='<iframe class="lg-video-object lg-vk '+addClass+'" width="560" height="315" src="https://vk.com/video_ext.php?'+src.vk[1]+a+'" frameborder="0" allowfullscreen></iframe>'),video},Video.prototype.destroy=function(){this.videoLoaded=!1},$.fn.lightGallery.modules.video=Video}(jQuery,(window,document)),!function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):"object"==typeof exports?module.exports=factory(require("jquery")):factory(jQuery)}(function($){var viewportSize,viewportOffset,timer,inviewObjects=[],d=document,w=window,documentElement=d.documentElement;function checkInView(){if(inviewObjects.length){var mode,size,i=0,$elements=$.map(inviewObjects,function(inviewObject){var selector=inviewObject.data.selector,inviewObject=inviewObject.$element;return selector?inviewObject.find(selector):inviewObject});for(viewportSize=viewportSize||(size=(size={height:w.innerHeight,width:w.innerWidth}).height||!(mode=d.compatMode)&&$.support.boxModel?size:{height:(mode="CSS1Compat"===mode?documentElement:d.body).clientHeight,width:mode.clientWidth}),viewportOffset=viewportOffset||{top:w.pageYOffset||documentElement.scrollTop||d.body.scrollTop,left:w.pageXOffset||documentElement.scrollLeft||d.body.scrollLeft};i<inviewObjects.length;i++)if($.contains(documentElement,$elements[i][0])){var $element=$($elements[i]),elementSize_height=$element[0].offsetHeight,elementSize_width=$element[0].offsetWidth,elementOffset=$element.offset(),inView=$element.data("inview");if(!viewportOffset||!viewportSize)return;elementOffset.top+elementSize_height>viewportOffset.top&&elementOffset.top<viewportOffset.top+viewportSize.height&&elementOffset.left+elementSize_width>viewportOffset.left&&elementOffset.left<viewportOffset.left+viewportSize.width?inView||$element.data("inview",!0).trigger("inview",[!0]):inView&&$element.data("inview",!1).trigger("inview",[!1])}}}$.event.special.inview={add:function(data){inviewObjects.push({data:data,$element:$(this),element:this}),!timer&&inviewObjects.length&&(timer=setInterval(checkInView,250))},remove:function(data){for(var i=0;i<inviewObjects.length;i++){var inviewObject=inviewObjects[i];if(inviewObject.element===this&&inviewObject.data.guid===data.guid){inviewObjects.splice(i,1);break}}inviewObjects.length||(clearInterval(timer),timer=null)}},$(w).on("scroll resize scrollstop",function(){viewportSize=viewportOffset=null}),!documentElement.addEventListener&&documentElement.attachEvent&&documentElement.attachEvent("onfocusin",function(){viewportOffset=null})}),!function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define(factory):(global="undefined"!=typeof globalThis?globalThis:global||self).jarallax=factory()}(this,function(){"use strict";function ready(callback){"complete"===document.readyState||"interactive"===document.readyState?callback():document.addEventListener("DOMContentLoaded",callback,{capture:!0,once:!0,passive:!0})}let win;var global$1=win="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},defaults={type:"scroll",speed:.5,containerClass:"jarallax-container",imgSrc:null,imgElement:".jarallax-img",imgSize:"cover",imgPosition:"50% 50%",imgRepeat:"no-repeat",keepImg:!1,elementInViewport:null,zIndex:-100,disableParallax:!1,onScroll:null,onInit:null,onDestroy:null,onCoverImage:null,videoClass:"jarallax-video",videoSrc:null,videoStartTime:0,videoEndTime:0,videoVolume:0,videoLoop:!0,videoPlayOnlyVisible:!0,videoLazyLoading:!0,disableVideo:!1,onVideoInsert:null,onVideoWorkerInit:null};var navigator$1=global$1["navigator"];const mobileAgent=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator$1.userAgent);let wndW,wndH,$deviceHelper;function updateWindowHeight(){wndW=global$1.innerWidth||document.documentElement.clientWidth,wndH=mobileAgent?(!$deviceHelper&&document.body&&(($deviceHelper=document.createElement("div")).style.cssText="position: fixed; top: -9999px; left: 0; height: 100vh; width: 0;",document.body.appendChild($deviceHelper)),($deviceHelper?$deviceHelper.clientHeight:0)||global$1.innerHeight||document.documentElement.clientHeight):global$1.innerHeight||document.documentElement.clientHeight}function getWindowSize(){return{width:wndW,height:wndH}}updateWindowHeight(),global$1.addEventListener("resize",updateWindowHeight),global$1.addEventListener("orientationchange",updateWindowHeight),global$1.addEventListener("load",updateWindowHeight),ready(()=>{updateWindowHeight()});const jarallaxList=[];function updateParallax(){if(jarallaxList.length){const{width:wndW,height:wndH}=getWindowSize();jarallaxList.forEach((data,k)=>{var clientRect,isResized,{instance:data,oldData}=data;data.isVisible()&&(clientRect={width:(clientRect=data.$item.getBoundingClientRect()).width,height:clientRect.height,top:clientRect.top,bottom:clientRect.bottom,wndW:wndW,wndH:wndH},oldData=(isResized=!oldData||oldData.wndW!==clientRect.wndW||oldData.wndH!==clientRect.wndH||oldData.width!==clientRect.width||oldData.height!==clientRect.height)||!oldData||oldData.top!==clientRect.top||oldData.bottom!==clientRect.bottom,jarallaxList[k].oldData=clientRect,isResized&&data.onResize(),oldData)&&data.onScroll()}),global$1.requestAnimationFrame(updateParallax)}}const visibilityObserver=new global$1.IntersectionObserver(entries=>{entries.forEach(entry=>{entry.target.jarallax.isElementInViewport=entry.isIntersecting})},{rootMargin:"50px"});const navigator=global$1["navigator"];let instanceID=0;class Jarallax{constructor(item,userOptions){const self=this,dataOptions=(self.instanceID=instanceID,instanceID+=1,self.$item=item,self.defaults={...defaults},self.$item.dataset||{}),pureDataOptions={};if(Object.keys(dataOptions).forEach(key=>{var lowerCaseOption=key.substr(0,1).toLowerCase()+key.substr(1);lowerCaseOption&&void 0!==self.defaults[lowerCaseOption]&&(pureDataOptions[lowerCaseOption]=dataOptions[key])}),self.options=self.extend({},self.defaults,pureDataOptions,userOptions),self.pureOptions=self.extend({},self.options),Object.keys(self.options).forEach(key=>{"true"===self.options[key]?self.options[key]=!0:"false"===self.options[key]&&(self.options[key]=!1)}),self.options.speed=Math.min(2,Math.max(-1,parseFloat(self.options.speed))),"string"==typeof self.options.disableParallax&&(self.options.disableParallax=new RegExp(self.options.disableParallax)),self.options.disableParallax instanceof RegExp){const disableParallaxRegexp=self.options.disableParallax;self.options.disableParallax=()=>disableParallaxRegexp.test(navigator.userAgent)}if("function"!=typeof self.options.disableParallax&&(self.options.disableParallax=()=>!1),"string"==typeof self.options.disableVideo&&(self.options.disableVideo=new RegExp(self.options.disableVideo)),self.options.disableVideo instanceof RegExp){const disableVideoRegexp=self.options.disableVideo;self.options.disableVideo=()=>disableVideoRegexp.test(navigator.userAgent)}"function"!=typeof self.options.disableVideo&&(self.options.disableVideo=()=>!1);let elementInVP=self.options.elementInViewport;elementInVP&&"object"==typeof elementInVP&&void 0!==elementInVP.length&&([elementInVP]=elementInVP),elementInVP instanceof Element||(elementInVP=null),self.options.elementInViewport=elementInVP,self.image={src:self.options.imgSrc||null,$container:null,useImgTag:!1,position:"fixed"},self.initImg()&&self.canInitParallax()&&self.init()}css(el,styles){return"string"==typeof styles?global$1.getComputedStyle(el).getPropertyValue(styles):(Object.keys(styles).forEach(key=>{el.style[key]=styles[key]}),el)}extend(out,...args){return function(out,...args){return out=out||{},Object.keys(args).forEach(i=>{args[i]&&Object.keys(args[i]).forEach(key=>{out[key]=args[i][key]})}),out}(out,...args)}getWindowData(){var{width,height}=getWindowSize();return{width:width,height:height,y:document.documentElement.scrollTop}}initImg(){let $imgElement=this.options.imgElement;return($imgElement=$imgElement&&"string"==typeof $imgElement?this.$item.querySelector($imgElement):$imgElement)instanceof Element||(this.options.imgSrc?($imgElement=new Image).src=this.options.imgSrc:$imgElement=null),$imgElement&&(this.options.keepImg?this.image.$item=$imgElement.cloneNode(!0):(this.image.$item=$imgElement,this.image.$itemParent=$imgElement.parentNode),this.image.useImgTag=!0),!(!this.image.$item&&(null===this.image.src&&(this.image.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",this.image.bgImage=this.css(this.$item,"background-image")),!this.image.bgImage||"none"===this.image.bgImage))}canInitParallax(){return!this.options.disableParallax()}init(){var curStyle,containerStyles={position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"hidden"};let imageStyles={pointerEvents:"none",transformStyle:"preserve-3d",backfaceVisibility:"hidden"};this.options.keepImg||((curStyle=this.$item.getAttribute("style"))&&this.$item.setAttribute("data-jarallax-original-styles",curStyle),this.image.useImgTag&&(curStyle=this.image.$item.getAttribute("style"))&&this.image.$item.setAttribute("data-jarallax-original-styles",curStyle)),"static"===this.css(this.$item,"position")&&this.css(this.$item,{position:"relative"}),"auto"===this.css(this.$item,"z-index")&&this.css(this.$item,{zIndex:0}),this.image.$container=document.createElement("div"),this.css(this.image.$container,containerStyles),this.css(this.image.$container,{"z-index":this.options.zIndex}),"fixed"===this.image.position&&this.css(this.image.$container,{"-webkit-clip-path":"polygon(0 0, 100% 0, 100% 100%, 0 100%)","clip-path":"polygon(0 0, 100% 0, 100% 100%, 0 100%)"}),this.image.$container.setAttribute("id","jarallax-container-"+this.instanceID),this.options.containerClass&&this.image.$container.setAttribute("class",this.options.containerClass),this.$item.appendChild(this.image.$container),this.image.useImgTag?imageStyles=this.extend({"object-fit":this.options.imgSize,"object-position":this.options.imgPosition,"max-width":"none"},containerStyles,imageStyles):(this.image.$item=document.createElement("div"),this.image.src&&(imageStyles=this.extend({"background-position":this.options.imgPosition,"background-size":this.options.imgSize,"background-repeat":this.options.imgRepeat,"background-image":this.image.bgImage||`url("${this.image.src}")`},containerStyles,imageStyles))),"opacity"!==this.options.type&&"scale"!==this.options.type&&"scale-opacity"!==this.options.type&&1!==this.options.speed||(this.image.position="absolute"),"fixed"===this.image.position&&(curStyle=function(elem){for(var parents=[];null!==elem.parentElement;)1===(elem=elem.parentElement).nodeType&&parents.push(elem);return parents}(this.$item).filter(el=>{var el=global$1.getComputedStyle(el),parentTransform=el["-webkit-transform"]||el["-moz-transform"]||el.transform;return parentTransform&&"none"!==parentTransform||/(auto|scroll)/.test(el.overflow+el["overflow-y"]+el["overflow-x"])}),this.image.position=curStyle.length?"absolute":"fixed"),imageStyles.position=this.image.position,this.css(this.image.$item,imageStyles),this.image.$container.appendChild(this.image.$item),this.onResize(),this.onScroll(!0),this.options.onInit&&this.options.onInit.call(this),"none"!==this.css(this.$item,"background-image")&&this.css(this.$item,{"background-image":"none"}),containerStyles=this,jarallaxList.push({instance:containerStyles}),1===jarallaxList.length&&global$1.requestAnimationFrame(updateParallax),visibilityObserver.observe(containerStyles.options.elementInViewport||containerStyles.$item)}destroy(){instance=this,jarallaxList.forEach((data,key)=>{data.instance.instanceID===instance.instanceID&&jarallaxList.splice(key,1)}),visibilityObserver.unobserve(instance.options.elementInViewport||instance.$item);var instance,originalStylesImgTag,originalStylesTag=this.$item.getAttribute("data-jarallax-original-styles");this.$item.removeAttribute("data-jarallax-original-styles"),originalStylesTag?this.$item.setAttribute("style",originalStylesTag):this.$item.removeAttribute("style"),this.image.useImgTag&&(originalStylesImgTag=this.image.$item.getAttribute("data-jarallax-original-styles"),this.image.$item.removeAttribute("data-jarallax-original-styles"),originalStylesImgTag?this.image.$item.setAttribute("style",originalStylesTag):this.image.$item.removeAttribute("style"),this.image.$itemParent)&&this.image.$itemParent.appendChild(this.image.$item),this.image.$container&&this.image.$container.parentNode.removeChild(this.image.$container),this.options.onDestroy&&this.options.onDestroy.call(this),delete this.$item.jarallax}coverImage(){var wndH=getWindowSize()["height"],rect=this.image.$container.getBoundingClientRect(),contH=rect.height,speed=this.options["speed"],isScroll="scroll"===this.options.type||"scroll-opacity"===this.options.type;let scrollDist=0,resultH=contH,resultMT=0;return isScroll&&(speed<0?(scrollDist=speed*Math.max(contH,wndH),wndH<contH&&(scrollDist-=speed*(contH-wndH))):scrollDist=speed*(contH+wndH),1<speed?resultH=Math.abs(scrollDist-wndH):speed<0?resultH=scrollDist/speed+Math.abs(scrollDist):resultH+=(wndH-contH)*(1-speed),scrollDist/=2),this.parallaxScrollDistance=scrollDist,resultMT=isScroll?(wndH-resultH)/2:(contH-resultH)/2,this.css(this.image.$item,{height:resultH+"px",marginTop:resultMT+"px",left:"fixed"===this.image.position?rect.left+"px":"0",width:rect.width+"px"}),this.options.onCoverImage&&this.options.onCoverImage.call(this),{image:{height:resultH,marginTop:resultMT},container:rect}}isVisible(){return this.isElementInViewport||!1}onScroll(force){if(force||this.isVisible()){var force=getWindowSize()["height"],rect=this.$item.getBoundingClientRect(),contT=rect.top,contH=rect.height,styles={},beforeTop=Math.max(0,contT),beforeTopEnd=Math.max(0,contH+contT),afterTop=Math.max(0,-contT),beforeBottom=Math.max(0,contT+contH-force),beforeBottomEnd=Math.max(0,contH-(contT+contH-force)),afterBottom=Math.max(0,-contT+force-contH),fromViewportCenter=1-(force-contT)/(force+contH)*2;let visiblePercent=1;if(contH<force?visiblePercent=1-(afterTop||beforeBottom)/contH:beforeTopEnd<=force?visiblePercent=beforeTopEnd/force:beforeBottomEnd<=force&&(visiblePercent=beforeBottomEnd/force),"opacity"!==this.options.type&&"scale-opacity"!==this.options.type&&"scroll-opacity"!==this.options.type||(styles.transform="translate3d(0,0,0)",styles.opacity=visiblePercent),"scale"===this.options.type||"scale-opacity"===this.options.type){let scale=1;this.options.speed<0?scale-=this.options.speed*visiblePercent:scale+=this.options.speed*(1-visiblePercent),styles.transform=`scale(${scale}) translate3d(0,0,0)`}if("scroll"===this.options.type||"scroll-opacity"===this.options.type){let positionY=this.parallaxScrollDistance*fromViewportCenter;"absolute"===this.image.position&&(positionY-=contT),styles.transform=`translate3d(0,${positionY}px,0)`}this.css(this.image.$item,styles),this.options.onScroll&&this.options.onScroll.call(this,{section:rect,beforeTop:beforeTop,beforeTopEnd:beforeTopEnd,afterTop:afterTop,beforeBottom:beforeBottom,beforeBottomEnd:beforeBottomEnd,afterBottom:afterBottom,visiblePercent:visiblePercent,fromViewportCenter:fromViewportCenter})}}onResize(){this.coverImage()}}function jarallax(items,options,...args){var len=(items=("object"==typeof HTMLElement?items instanceof HTMLElement:items&&"object"==typeof items&&null!==items&&1===items.nodeType&&"string"==typeof items.nodeName)?[items]:items).length;let k=0,ret;for(k;k<len;k+=1)if("object"==typeof options||void 0===options?items[k].jarallax||(items[k].jarallax=new Jarallax(items[k],options)):items[k].jarallax&&(ret=items[k].jarallax[options].apply(items[k].jarallax,args)),void 0!==ret)return ret;return items}jarallax.constructor=Jarallax;const $=global$1.jQuery;if(void 0!==$){navigator$1=function(...args){Array.prototype.unshift.call(args,this);args=jarallax.apply(global$1,args);return"object"!=typeof args?args:this};navigator$1.constructor=jarallax.constructor;const old$Plugin=$.fn.jarallax;$.fn.jarallax=navigator$1,$.fn.jarallax.noConflict=function(){return $.fn.jarallax=old$Plugin,this}}return ready(()=>{jarallax(document.querySelectorAll("[data-jarallax]"))}),jarallax}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript.");!function(){var e=jQuery.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1||4<=e[0])throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")}(),function(){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(t){function r(e){var n=this,i=!1;return t(this).one(c.TRANSITION_END,function(){i=!0}),setTimeout(function(){i||c.triggerTransitionEnd(n)},e),this}var a=!1,h={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},c={TRANSITION_END:"bsTransitionEnd",getUID:function(t){for(;t+=~~(1e6*Math.random()),document.getElementById(t););return t},getSelectorFromElement:function(t){var e=t.getAttribute("data-target");return e||(e=t.getAttribute("href")||"",e=/^#[a-z]/i.test(e)?e:null),e},reflow:function(t){return t.offsetHeight},triggerTransitionEnd:function(e){t(e).trigger(a.end)},supportsTransitionEnd:function(){return Boolean(a)},typeCheckConfig:function(t,i,o){for(var r in o)if(o.hasOwnProperty(r)){var s=o[r],a=i[r],a=a&&function(t){return(t[0]||t).nodeType}(a)?"element":function(t){return{}.toString.call(t).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}(a);if(!new RegExp(s).test(a))throw new Error(t.toUpperCase()+': Option "'+r+'" provided type "'+a+'" but expected type "'+s+'".')}}};return a=function(){if(!window.QUnit){var e,t=document.createElement("bootstrap");for(e in h)if(void 0!==t.style[e])return{end:h[e]}}return!1}(),t.fn.emulateTransitionEnd=r,c.supportsTransitionEnd()&&(t.event.special[c.TRANSITION_END]={bindType:a.end,delegateType:a.end,handle:function(e){if(t(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}}),c}(jQuery),s=(function(t){var e="alert",s="bs.alert",a="."+s,h=t.fn[e],d={CLOSE:"close"+a,CLOSED:"closed"+a,CLICK_DATA_API:"click"+a+".data-api"},f_ALERT="alert",f_FADE="fade",f_SHOW="show",_=function(){function e(t){n(this,e),this._element=t}return e.prototype.close=function(t){t=t||this._element;t=this._getRootElement(t);this._triggerCloseEvent(t).isDefaultPrevented()||this._removeElement(t)},e.prototype.dispose=function(){t.removeData(this._element,s),this._element=null},e.prototype._getRootElement=function(e){var n=r.getSelectorFromElement(e),i=!1;return i=(i=n?t(n)[0]:i)||t(e).closest("."+f_ALERT)[0]},e.prototype._triggerCloseEvent=function(e){var n=t.Event(d.CLOSE);return t(e).trigger(n),n},e.prototype._removeElement=function(e){var n=this;return t(e).removeClass(f_SHOW),r.supportsTransitionEnd()&&t(e).hasClass(f_FADE)?void t(e).one(r.TRANSITION_END,function(t){return n._destroyElement(e,t)}).emulateTransitionEnd(150):void this._destroyElement(e)},e.prototype._destroyElement=function(e){t(e).detach().trigger(d.CLOSED).remove()},e._jQueryInterface=function(n){return this.each(function(){var i=t(this),o=i.data(s);o||(o=new e(this),i.data(s,o)),"close"===n&&o[n](this)})},e._handleDismiss=function(t){return function(e){e&&e.preventDefault(),t.close(this)}},o(e,null,[{key:"VERSION",get:function(){return"4.0.0-alpha.6"}}]),e}();t(document).on(d.CLICK_DATA_API,'[data-dismiss="alert"]',_._handleDismiss(new _)),t.fn[e]=_._jQueryInterface,t.fn[e].Constructor=_,t.fn[e].noConflict=function(){return t.fn[e]=h,_._jQueryInterface}}(jQuery),function(t){var e="button",r="bs.button",s="."+r,a=".data-api",l=t.fn[e],h_ACTIVE="active",h_BUTTON="btn",h_FOCUS="focus",c_DATA_TOGGLE_CARROT='[data-toggle^="button"]',c_DATA_TOGGLE='[data-toggle="buttons"]',c_INPUT="input",c_ACTIVE=".active",c_BUTTON=".btn",s={CLICK_DATA_API:"click"+s+a,FOCUS_BLUR_DATA_API:"focus"+s+a+" blur"+s+a},d=function(){function e(t){n(this,e),this._element=t}return e.prototype.toggle=function(){var i,e=!0,n=t(this._element).closest(c_DATA_TOGGLE)[0];n&&(i=t(this._element).find(c_INPUT)[0])&&("radio"===i.type&&(i.checked&&t(this._element).hasClass(h_ACTIVE)?e=!1:(n=t(n).find(c_ACTIVE)[0])&&t(n).removeClass(h_ACTIVE)),e&&(i.checked=!t(this._element).hasClass(h_ACTIVE),t(i).trigger("change")),i.focus()),this._element.setAttribute("aria-pressed",!t(this._element).hasClass(h_ACTIVE)),e&&t(this._element).toggleClass(h_ACTIVE)},e.prototype.dispose=function(){t.removeData(this._element,r),this._element=null},e._jQueryInterface=function(n){return this.each(function(){var i=t(this).data(r);i||(i=new e(this),t(this).data(r,i)),"toggle"===n&&i[n]()})},o(e,null,[{key:"VERSION",get:function(){return"4.0.0-alpha.6"}}]),e}();t(document).on(s.CLICK_DATA_API,c_DATA_TOGGLE_CARROT,function(e){e.preventDefault();e=e.target;t(e).hasClass(h_BUTTON)||(e=t(e).closest(c_BUTTON)),d._jQueryInterface.call(t(e),"toggle")}).on(s.FOCUS_BLUR_DATA_API,c_DATA_TOGGLE_CARROT,function(e){var n=t(e.target).closest(c_BUTTON)[0];t(n).toggleClass(h_FOCUS,/^focus(in)?$/.test(e.type))}),t.fn[e]=d._jQueryInterface,t.fn[e].Constructor=d,t.fn[e].noConflict=function(){return t.fn[e]=l,d._jQueryInterface}}(jQuery),function(t){var e="carousel",a="bs.carousel",l="."+a,h=".data-api",c=t.fn[e],_={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0},g={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean"},p={NEXT:"next",PREV:"prev",LEFT:"left",RIGHT:"right"},m={SLIDE:"slide"+l,SLID:"slid"+l,KEYDOWN:"keydown"+l,MOUSEENTER:"mouseenter"+l,MOUSELEAVE:"mouseleave"+l,LOAD_DATA_API:"load"+l+h,CLICK_DATA_API:"click"+l+h},E_CAROUSEL="carousel",E_ACTIVE="active",E_SLIDE="slide",E_RIGHT="carousel-item-right",E_LEFT="carousel-item-left",E_NEXT="carousel-item-next",E_PREV="carousel-item-prev",v_ACTIVE=".active",v_ACTIVE_ITEM=".active.carousel-item",v_ITEM=".carousel-item",v_NEXT_PREV=".carousel-item-next, .carousel-item-prev",v_INDICATORS=".carousel-indicators",h="[data-slide], [data-slide-to]",v_DATA_RIDE='[data-ride="carousel"]',T=function(){function h(e,i){n(this,h),this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this._config=this._getConfig(i),this._element=t(e)[0],this._indicatorsElement=t(this._element).find(v_INDICATORS)[0],this._addEventListeners()}return h.prototype.next=function(){if(this._isSliding)throw new Error("Carousel is sliding");this._slide(p.NEXT)},h.prototype.nextWhenVisible=function(){document.hidden||this.next()},h.prototype.prev=function(){if(this._isSliding)throw new Error("Carousel is sliding");this._slide(p.PREVIOUS)},h.prototype.pause=function(e){e||(this._isPaused=!0),t(this._element).find(v_NEXT_PREV)[0]&&r.supportsTransitionEnd()&&(r.triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null},h.prototype.cycle=function(t){t||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))},h.prototype.to=function(e){var n=this,i=(this._activeElement=t(this._element).find(v_ACTIVE_ITEM)[0],this._getItemIndex(this._activeElement));e>this._items.length-1||e<0||(this._isSliding?t(this._element).one(m.SLID,function(){return n.to(e)}):i===e?(this.pause(),this.cycle()):this._slide(i<e?p.NEXT:p.PREVIOUS,this._items[e]))},h.prototype.dispose=function(){t(this._element).off(l),t.removeData(this._element,a),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null},h.prototype._getConfig=function(n){return n=t.extend({},_,n),r.typeCheckConfig(e,n,g),n},h.prototype._addEventListeners=function(){var e=this;this._config.keyboard&&t(this._element).on(m.KEYDOWN,function(t){return e._keydown(t)}),"hover"!==this._config.pause||"ontouchstart"in document.documentElement||t(this._element).on(m.MOUSEENTER,function(t){return e.pause(t)}).on(m.MOUSELEAVE,function(t){return e.cycle(t)})},h.prototype._keydown=function(t){if(!/input|textarea/i.test(t.target.tagName))switch(t.which){case 37:t.preventDefault(),this.prev();break;case 39:t.preventDefault(),this.next();break;default:return}},h.prototype._getItemIndex=function(e){return this._items=t.makeArray(t(e).parent().find(v_ITEM)),this._items.indexOf(e)},h.prototype._getItemByDirection=function(t,e){var n=t===p.NEXT,i=t===p.PREVIOUS,o=this._getItemIndex(e),r=this._items.length-1;return(i&&0===o||n&&o===r)&&!this._config.wrap?e:-1==(i=(o+(t===p.PREVIOUS?-1:1))%this._items.length)?this._items[this._items.length-1]:this._items[i]},h.prototype._triggerSlideEvent=function(e,n){e=t.Event(m.SLIDE,{relatedTarget:e,direction:n});return t(this._element).trigger(e),e},h.prototype._setActiveIndicatorElement=function(e){this._indicatorsElement&&(t(this._indicatorsElement).find(v_ACTIVE).removeClass(E_ACTIVE),e=this._indicatorsElement.children[this._getItemIndex(e)])&&t(e).addClass(E_ACTIVE)},h.prototype._slide=function(e,n){var f,i=this,o=t(this._element).find(v_ACTIVE_ITEM)[0],s=n||o&&this._getItemByDirection(e,o),n=Boolean(this._interval),l=void 0,h=void 0,c=void 0;c=e===p.NEXT?(l=E_LEFT,h=E_NEXT,p.LEFT):(l=E_RIGHT,h=E_PREV,p.RIGHT),s&&t(s).hasClass(E_ACTIVE)?this._isSliding=!1:!this._triggerSlideEvent(s,c).isDefaultPrevented()&&o&&s&&(this._isSliding=!0,n&&this.pause(),this._setActiveIndicatorElement(s),f=t.Event(m.SLID,{relatedTarget:s,direction:c}),r.supportsTransitionEnd()&&t(this._element).hasClass(E_SLIDE)?(t(s).addClass(h),r.reflow(s),t(o).addClass(l),t(s).addClass(l),t(o).one(r.TRANSITION_END,function(){t(s).removeClass(l+" "+h).addClass(E_ACTIVE),t(o).removeClass(E_ACTIVE+" "+h+" "+l),i._isSliding=!1,setTimeout(function(){return t(i._element).trigger(f)},0)}).emulateTransitionEnd(600)):(t(o).removeClass(E_ACTIVE),t(s).addClass(E_ACTIVE),this._isSliding=!1,t(this._element).trigger(f)),n)&&this.cycle()},h._jQueryInterface=function(e){return this.each(function(){var n=t(this).data(a),o=t.extend({},_,t(this).data()),r=("object"===(void 0===e?"undefined":i(e))&&t.extend(o,e),"string"==typeof e?e:o.slide);if(n||(n=new h(this,o),t(this).data(a,n)),"number"==typeof e)n.to(e);else if("string"==typeof r){if(void 0===n[r])throw new Error('No method named "'+r+'"');n[r]()}else o.interval&&(n.pause(),n.cycle())})},h._dataApiClickHandler=function(e){var o,s,n=r.getSelectorFromElement(this);n&&(n=t(n)[0])&&t(n).hasClass(E_CAROUSEL)&&(o=t.extend({},t(n).data(),t(this).data()),(s=this.getAttribute("data-slide-to"))&&(o.interval=!1),h._jQueryInterface.call(t(n),o),s&&t(n).data(a).to(s),e.preventDefault())},o(h,null,[{key:"VERSION",get:function(){return"4.0.0-alpha.6"}},{key:"Default",get:function(){return _}}]),h}();t(document).on(m.CLICK_DATA_API,h,T._dataApiClickHandler),t(window).on(m.LOAD_DATA_API,function(){t(v_DATA_RIDE).each(function(){var e=t(this);T._jQueryInterface.call(e,e.data())})}),t.fn[e]=T._jQueryInterface,t.fn[e].Constructor=T,t.fn[e].noConflict=function(){return t.fn[e]=c,T._jQueryInterface}}(jQuery),function(t){var e="collapse",a="bs.collapse",l="."+a,c=t.fn[e],d={toggle:!0,parent:""},f={toggle:"boolean",parent:"string"},_={SHOW:"show"+l,SHOWN:"shown"+l,HIDE:"hide"+l,HIDDEN:"hidden"+l,CLICK_DATA_API:"click"+l+".data-api"},g_SHOW="show",g_COLLAPSE="collapse",g_COLLAPSING="collapsing",g_COLLAPSED="collapsed",p_WIDTH="width",p_HEIGHT="height",m_ACTIVES=".card > .show, .card > .collapsing",l='[data-toggle="collapse"]',E=function(){function l(e,i){n(this,l),this._isTransitioning=!1,this._element=e,this._config=this._getConfig(i),this._triggerArray=t.makeArray(t('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]')),this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}return l.prototype.toggle=function(){t(this._element).hasClass(g_SHOW)?this.hide():this.show()},l.prototype.show=function(){var n,s,o,i,e=this;if(this._isTransitioning)throw new Error("Collapse is transitioning");t(this._element).hasClass(g_SHOW)||(i=n=void 0,(n=this._parent&&!(n=t.makeArray(t(this._parent).find(m_ACTIVES))).length?null:n)&&(i=t(n).data(a))&&i._isTransitioning)||(o=t.Event(_.SHOW),t(this._element).trigger(o),o.isDefaultPrevented())||(n&&(l._jQueryInterface.call(t(n),"hide"),i||t(n).data(a,null)),s=this._getDimension(),t(this._element).removeClass(g_COLLAPSE).addClass(g_COLLAPSING),this._element.style[s]=0,this._element.setAttribute("aria-expanded",!0),this._triggerArray.length&&t(this._triggerArray).removeClass(g_COLLAPSED).attr("aria-expanded",!0),this.setTransitioning(!0),o=function(){t(e._element).removeClass(g_COLLAPSING).addClass(g_COLLAPSE).addClass(g_SHOW),e._element.style[s]="",e.setTransitioning(!1),t(e._element).trigger(_.SHOWN)},r.supportsTransitionEnd()?(i="scroll"+(s[0].toUpperCase()+s.slice(1)),t(this._element).one(r.TRANSITION_END,o).emulateTransitionEnd(600),this._element.style[s]=this._element[i]+"px"):o())},l.prototype.hide=function(){var e=this;if(this._isTransitioning)throw new Error("Collapse is transitioning");if(t(this._element).hasClass(g_SHOW)){var o,n=t.Event(_.HIDE);if(t(this._element).trigger(n),!n.isDefaultPrevented())return o=(n=this._getDimension())===p_WIDTH?"offsetWidth":"offsetHeight",this._element.style[n]=this._element[o]+"px",r.reflow(this._element),t(this._element).addClass(g_COLLAPSING).removeClass(g_COLLAPSE).removeClass(g_SHOW),this._element.setAttribute("aria-expanded",!1),this._triggerArray.length&&t(this._triggerArray).addClass(g_COLLAPSED).attr("aria-expanded",!1),this.setTransitioning(!0),o=function(){e.setTransitioning(!1),t(e._element).removeClass(g_COLLAPSING).addClass(g_COLLAPSE).trigger(_.HIDDEN)},this._element.style[n]="",r.supportsTransitionEnd()?void t(this._element).one(r.TRANSITION_END,o).emulateTransitionEnd(600):void o()}},l.prototype.setTransitioning=function(t){this._isTransitioning=t},l.prototype.dispose=function(){t.removeData(this._element,a),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null},l.prototype._getConfig=function(n){return(n=t.extend({},d,n)).toggle=Boolean(n.toggle),r.typeCheckConfig(e,n,f),n},l.prototype._getDimension=function(){return t(this._element).hasClass(p_WIDTH)?p_WIDTH:p_HEIGHT},l.prototype._getParent=function(){var e=this,n=t(this._config.parent)[0],i='[data-toggle="collapse"][data-parent="'+this._config.parent+'"]';return t(n).find(i).each(function(t,n){e._addAriaAndCollapsedClass(l._getTargetFromElement(n),[n])}),n},l.prototype._addAriaAndCollapsedClass=function(e,n){var i;e&&(i=t(e).hasClass(g_SHOW),e.setAttribute("aria-expanded",i),n.length)&&t(n).toggleClass(g_COLLAPSED,!i).attr("aria-expanded",i)},l._getTargetFromElement=function(e){e=r.getSelectorFromElement(e);return e?t(e)[0]:null},l._jQueryInterface=function(e){return this.each(function(){var n=t(this),o=n.data(a),r=t.extend({},d,n.data(),"object"===(void 0===e?"undefined":i(e))&&e);if(!o&&r.toggle&&/show|hide/.test(e)&&(r.toggle=!1),o||(o=new l(this,r),n.data(a,o)),"string"==typeof e){if(void 0===o[e])throw new Error('No method named "'+e+'"');o[e]()}})},o(l,null,[{key:"VERSION",get:function(){return"4.0.0-alpha.6"}},{key:"Default",get:function(){return d}}]),l}();t(document).on(_.CLICK_DATA_API,l,function(e){e.preventDefault();var e=E._getTargetFromElement(this),o=t(e).data(a)?"toggle":t(this).data();E._jQueryInterface.call(t(e),o)}),t.fn[e]=E._jQueryInterface,t.fn[e].Constructor=E,t.fn[e].noConflict=function(){return t.fn[e]=c,E._jQueryInterface}}(jQuery),function(t){var e="dropdown",s="bs.dropdown",a="."+s,l=".data-api",h=t.fn[e],_={HIDE:"hide"+a,HIDDEN:"hidden"+a,SHOW:"show"+a,SHOWN:"shown"+a,CLICK:"click"+a,CLICK_DATA_API:"click"+a+l,FOCUSIN_DATA_API:"focusin"+a+l,KEYDOWN_DATA_API:"keydown"+a+l},g_BACKDROP="dropdown-backdrop",g_DISABLED="disabled",g_SHOW="show",p_BACKDROP=".dropdown-backdrop",p_DATA_TOGGLE='[data-toggle="dropdown"]',l=".dropdown form",p_ROLE_MENU='[role="menu"]',p_ROLE_LISTBOX='[role="listbox"]',p_NAVBAR_NAV=".navbar-nav",p_VISIBLE_ITEMS='[role="menu"] li:not(.disabled) a, [role="listbox"] li:not(.disabled) a',m=function(){function e(t){n(this,e),this._element=t,this._addEventListeners()}return e.prototype.toggle=function(){if(this.disabled||t(this).hasClass(g_DISABLED))return!1;var n=e._getParentFromElement(this),i=t(n).hasClass(g_SHOW);if(e._clearMenus(),i)return!1;"ontouchstart"in document.documentElement&&!t(n).closest(p_NAVBAR_NAV).length&&((i=document.createElement("div")).className=g_BACKDROP,t(i).insertBefore(this),t(i).on("click",e._clearMenus));var i={relatedTarget:this},s=t.Event(_.SHOW,i);return t(n).trigger(s),!s.isDefaultPrevented()&&(this.focus(),this.setAttribute("aria-expanded",!0),t(n).toggleClass(g_SHOW),t(n).trigger(t.Event(_.SHOWN,i)),!1)},e.prototype.dispose=function(){t.removeData(this._element,s),t(this._element).off(a),this._element=null},e.prototype._addEventListeners=function(){t(this._element).on(_.CLICK,this.toggle)},e._jQueryInterface=function(n){return this.each(function(){var i=t(this).data(s);if(i||(i=new e(this),t(this).data(s,i)),"string"==typeof n){if(void 0===i[n])throw new Error('No method named "'+n+'"');i[n].call(this)}})},e._clearMenus=function(n){if(!n||3!==n.which){var i=t(p_BACKDROP)[0];i&&i.parentNode.removeChild(i);for(var o=t.makeArray(t(p_DATA_TOGGLE)),r=0;r<o.length;r++){var l,s=e._getParentFromElement(o[r]),a={relatedTarget:o[r]};!t(s).hasClass(g_SHOW)||n&&("click"===n.type&&/input|textarea/i.test(n.target.tagName)||"focusin"===n.type)&&t.contains(s,n.target)||(l=t.Event(_.HIDE,a),t(s).trigger(l),l.isDefaultPrevented())||(o[r].setAttribute("aria-expanded","false"),t(s).removeClass(g_SHOW).trigger(t.Event(_.HIDDEN,a)))}}},e._getParentFromElement=function(e){var n=void 0,i=r.getSelectorFromElement(e);return(n=i?t(i)[0]:n)||e.parentNode},e._dataApiKeydownHandler=function(n){var o,i;!/(38|40|27|32)/.test(n.which)||/input|textarea/i.test(n.target.tagName)||(n.preventDefault(),n.stopPropagation(),this.disabled)||t(this).hasClass(g_DISABLED)||(i=e._getParentFromElement(this),!(o=t(i).hasClass(g_SHOW))&&27!==n.which||o&&27===n.which?(27===n.which&&(o=t(i).find(p_DATA_TOGGLE)[0],t(o).trigger("focus")),t(this).trigger("click")):(o=t(i).find(p_VISIBLE_ITEMS).get()).length&&(i=o.indexOf(n.target),38===n.which&&0<i&&i--,40===n.which&&i<o.length-1&&i++,o[i=i<0?0:i].focus()))},o(e,null,[{key:"VERSION",get:function(){return"4.0.0-alpha.6"}}]),e}();t(document).on(_.KEYDOWN_DATA_API,p_DATA_TOGGLE,m._dataApiKeydownHandler).on(_.KEYDOWN_DATA_API,p_ROLE_MENU,m._dataApiKeydownHandler).on(_.KEYDOWN_DATA_API,p_ROLE_LISTBOX,m._dataApiKeydownHandler).on(_.CLICK_DATA_API+" "+_.FOCUSIN_DATA_API,m._clearMenus).on(_.CLICK_DATA_API,p_DATA_TOGGLE,m.prototype.toggle).on(_.CLICK_DATA_API,l,function(t){t.stopPropagation()}),t.fn[e]=m._jQueryInterface,t.fn[e].Constructor=m,t.fn[e].noConflict=function(){return t.fn[e]=h,m._jQueryInterface}}(jQuery),function(t){var e="modal",a="bs.modal",l="."+a,c=t.fn[e],_={backdrop:!0,keyboard:!0,focus:!0,show:!0},g={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},p={HIDE:"hide"+l,HIDDEN:"hidden"+l,SHOW:"show"+l,SHOWN:"shown"+l,FOCUSIN:"focusin"+l,RESIZE:"resize"+l,CLICK_DISMISS:"click.dismiss"+l,KEYDOWN_DISMISS:"keydown.dismiss"+l,MOUSEUP_DISMISS:"mouseup.dismiss"+l,MOUSEDOWN_DISMISS:"mousedown.dismiss"+l,CLICK_DATA_API:"click"+l+".data-api"},m_SCROLLBAR_MEASURER="modal-scrollbar-measure",m_BACKDROP="modal-backdrop",m_OPEN="modal-open",m_FADE="fade",m_SHOW="show",E_DIALOG=".modal-dialog",E_DATA_TOGGLE='[data-toggle="modal"]',E_DATA_DISMISS='[data-dismiss="modal"]',E_FIXED_CONTENT=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",v=function(){function h(e,i){n(this,h),this._config=this._getConfig(i),this._element=e,this._dialog=t(e).find(E_DIALOG)[0],this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._originalBodyPadding=0,this._scrollbarWidth=0}return h.prototype.toggle=function(t){return this._isShown?this.hide():this.show(t)},h.prototype.show=function(e){var n=this;if(this._isTransitioning)throw new Error("Modal is transitioning");r.supportsTransitionEnd()&&t(this._element).hasClass(m_FADE)&&(this._isTransitioning=!0);var i=t.Event(p.SHOW,{relatedTarget:e});t(this._element).trigger(i),this._isShown||i.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),t(document.body).addClass(m_OPEN),this._setEscapeEvent(),this._setResizeEvent(),t(this._element).on(p.CLICK_DISMISS,E_DATA_DISMISS,function(t){return n.hide(t)}),t(this._dialog).on(p.MOUSEDOWN_DISMISS,function(){t(n._element).one(p.MOUSEUP_DISMISS,function(e){t(e.target).is(n._element)&&(n._ignoreBackdropClick=!0)})}),this._showBackdrop(function(){return n._showElement(e)}))},h.prototype.hide=function(e){var n=this;if(e&&e.preventDefault(),this._isTransitioning)throw new Error("Modal is transitioning");var e=r.supportsTransitionEnd()&&t(this._element).hasClass(m_FADE),o=(e&&(this._isTransitioning=!0),t.Event(p.HIDE));t(this._element).trigger(o),this._isShown&&!o.isDefaultPrevented()&&(this._isShown=!1,this._setEscapeEvent(),this._setResizeEvent(),t(document).off(p.FOCUSIN),t(this._element).removeClass(m_SHOW),t(this._element).off(p.CLICK_DISMISS),t(this._dialog).off(p.MOUSEDOWN_DISMISS),e?t(this._element).one(r.TRANSITION_END,function(t){return n._hideModal(t)}).emulateTransitionEnd(300):this._hideModal())},h.prototype.dispose=function(){t.removeData(this._element,a),t(window,document,this._element,this._backdrop).off(l),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._originalBodyPadding=null,this._scrollbarWidth=null},h.prototype._getConfig=function(n){return n=t.extend({},_,n),r.typeCheckConfig(e,n,g),n},h.prototype._showElement=function(e){function s(){n._config.focus&&n._element.focus(),n._isTransitioning=!1,t(n._element).trigger(o)}var n=this,i=r.supportsTransitionEnd()&&t(this._element).hasClass(m_FADE),o=(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.scrollTop=0,i&&r.reflow(this._element),t(this._element).addClass(m_SHOW),this._config.focus&&this._enforceFocus(),t.Event(p.SHOWN,{relatedTarget:e}));i?t(this._dialog).one(r.TRANSITION_END,s).emulateTransitionEnd(300):s()},h.prototype._enforceFocus=function(){var e=this;t(document).off(p.FOCUSIN).on(p.FOCUSIN,function(n){document===n.target||e._element===n.target||t(e._element).has(n.target).length||e._element.focus()})},h.prototype._setEscapeEvent=function(){var e=this;this._isShown&&this._config.keyboard?t(this._element).on(p.KEYDOWN_DISMISS,function(t){27===t.which&&e.hide()}):this._isShown||t(this._element).off(p.KEYDOWN_DISMISS)},h.prototype._setResizeEvent=function(){var e=this;this._isShown?t(window).on(p.RESIZE,function(t){return e._handleUpdate(t)}):t(window).off(p.RESIZE)},h.prototype._hideModal=function(){var e=this;this._element.style.display="none",this._element.setAttribute("aria-hidden","true"),this._isTransitioning=!1,this._showBackdrop(function(){t(document.body).removeClass(m_OPEN),e._resetAdjustments(),e._resetScrollbar(),t(e._element).trigger(p.HIDDEN)})},h.prototype._removeBackdrop=function(){this._backdrop&&(t(this._backdrop).remove(),this._backdrop=null)},h.prototype._showBackdrop=function(e){var o,n=this,i=t(this._element).hasClass(m_FADE)?m_FADE:"";this._isShown&&this._config.backdrop?(o=r.supportsTransitionEnd()&&i,this._backdrop=document.createElement("div"),this._backdrop.className=m_BACKDROP,i&&t(this._backdrop).addClass(i),t(this._backdrop).appendTo(document.body),t(this._element).on(p.CLICK_DISMISS,function(t){return n._ignoreBackdropClick?void(n._ignoreBackdropClick=!1):void(t.target===t.currentTarget&&("static"===n._config.backdrop?n._element.focus():n.hide()))}),o&&r.reflow(this._backdrop),t(this._backdrop).addClass(m_SHOW),e&&(o?t(this._backdrop).one(r.TRANSITION_END,e).emulateTransitionEnd(150):e())):!this._isShown&&this._backdrop?(t(this._backdrop).removeClass(m_SHOW),i=function(){n._removeBackdrop(),e&&e()},r.supportsTransitionEnd()&&t(this._element).hasClass(m_FADE)?t(this._backdrop).one(r.TRANSITION_END,i).emulateTransitionEnd(150):i()):e&&e()},h.prototype._handleUpdate=function(){this._adjustDialog()},h.prototype._adjustDialog=function(){var t=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&t&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!t&&(this._element.style.paddingRight=this._scrollbarWidth+"px")},h.prototype._resetAdjustments=function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""},h.prototype._checkScrollbar=function(){this._isBodyOverflowing=document.body.clientWidth<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()},h.prototype._setScrollbar=function(){var e=parseInt(t(E_FIXED_CONTENT).css("padding-right")||0,10);this._originalBodyPadding=document.body.style.paddingRight||"",this._isBodyOverflowing&&(document.body.style.paddingRight=e+this._scrollbarWidth+"px")},h.prototype._resetScrollbar=function(){document.body.style.paddingRight=this._originalBodyPadding},h.prototype._getScrollbarWidth=function(){var t=document.createElement("div"),e=(t.className=m_SCROLLBAR_MEASURER,document.body.appendChild(t),t.offsetWidth-t.clientWidth);return document.body.removeChild(t),e},h._jQueryInterface=function(e,n){return this.each(function(){var o=t(this).data(a),r=t.extend({},h.Default,t(this).data(),"object"===(void 0===e?"undefined":i(e))&&e);if(o||(o=new h(this,r),t(this).data(a,o)),"string"==typeof e){if(void 0===o[e])throw new Error('No method named "'+e+'"');o[e](n)}else r.show&&o.show(n)})},o(h,null,[{key:"VERSION",get:function(){return"4.0.0-alpha.6"}},{key:"Default",get:function(){return _}}]),h}();t(document).on(p.CLICK_DATA_API,E_DATA_TOGGLE,function(e){var n=this,i=void 0,o=r.getSelectorFromElement(this),o=(o&&(i=t(o)[0]),t(i).data(a)?"toggle":t.extend({},t(i).data(),t(this).data())),l=("A"!==this.tagName&&"AREA"!==this.tagName||e.preventDefault(),t(i).one(p.SHOW,function(e){e.isDefaultPrevented()||l.one(p.HIDDEN,function(){t(n).is(":visible")&&n.focus()})}));v._jQueryInterface.call(t(i),o,this)}),t.fn[e]=v._jQueryInterface,t.fn[e].Constructor=v,t.fn[e].noConflict=function(){return t.fn[e]=c,v._jQueryInterface}}(jQuery),function(t){var e="scrollspy",a="bs.scrollspy",l="."+a,c=t.fn[e],u={offset:10,method:"auto",target:""},d={offset:"number",method:"string",target:"(string|element)"},f={ACTIVATE:"activate"+l,SCROLL:"scroll"+l,LOAD_DATA_API:"load"+l+".data-api"},__DROPDOWN_ITEM="dropdown-item",__ACTIVE="active",g_DATA_SPY='[data-spy="scroll"]',g_ACTIVE=".active",g_LI="li",g_NAV_LINKS=".nav-link",g_DROPDOWN=".dropdown",g_DROPDOWN_ITEMS=".dropdown-item",g_DROPDOWN_TOGGLE=".dropdown-toggle",p_OFFSET="offset",p_POSITION="position",m=function(){function h(e,i){var o=this;n(this,h),this._element=e,this._scrollElement="BODY"===e.tagName?window:e,this._config=this._getConfig(i),this._selector=this._config.target+" "+g_NAV_LINKS+","+this._config.target+" "+g_DROPDOWN_ITEMS,this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,t(this._scrollElement).on(f.SCROLL,function(t){return o._process(t)}),this.refresh(),this._process()}return h.prototype.refresh=function(){var e=this,n=this._scrollElement!==this._scrollElement.window?p_POSITION:p_OFFSET,i="auto"===this._config.method?n:this._config.method,o=i===p_POSITION?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),t.makeArray(t(this._selector)).map(function(e){var n=void 0,e=r.getSelectorFromElement(e);return(n=e?t(e)[0]:n)&&(n.offsetWidth||n.offsetHeight)?[t(n)[i]().top+o,e]:null}).filter(function(t){return t}).sort(function(t,e){return t[0]-e[0]}).forEach(function(t){e._offsets.push(t[0]),e._targets.push(t[1])})},h.prototype.dispose=function(){t.removeData(this._element,a),t(this._scrollElement).off(l),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null},h.prototype._getConfig=function(n){var i;return"string"!=typeof(n=t.extend({},u,n)).target&&((i=t(n.target).attr("id"))||(i=r.getUID(e),t(n.target).attr("id",i)),n.target="#"+i),r.typeCheckConfig(e,n,d),n},h.prototype._getScrollTop=function(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop},h.prototype._getScrollHeight=function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},h.prototype._getOffsetHeight=function(){return this._scrollElement===window?window.innerHeight:this._scrollElement.offsetHeight},h.prototype._process=function(){var t=this._getScrollTop()+this._config.offset,e=this._getScrollHeight(),n=this._config.offset+e-this._getOffsetHeight();if(this._scrollHeight!==e&&this.refresh(),n<=t)e=this._targets[this._targets.length-1],this._activeTarget!==e&&this._activate(e);else if(this._activeTarget&&t<this._offsets[0]&&0<this._offsets[0])this._activeTarget=null,this._clear();else for(var o=this._offsets.length;o--;)this._activeTarget!==this._targets[o]&&t>=this._offsets[o]&&(void 0===this._offsets[o+1]||t<this._offsets[o+1])&&this._activate(this._targets[o])},h.prototype._activate=function(e){this._activeTarget=e,this._clear();var n=(n=this._selector.split(",")).map(function(t){return t+'[data-target="'+e+'"],'+t+'[href="'+e+'"]'}),n=t(n.join(","));(n.hasClass(__DROPDOWN_ITEM)?(n.closest(g_DROPDOWN).find(g_DROPDOWN_TOGGLE).addClass(__ACTIVE),n):n.parents(g_LI).find("> "+g_NAV_LINKS)).addClass(__ACTIVE),t(this._scrollElement).trigger(f.ACTIVATE,{relatedTarget:e})},h.prototype._clear=function(){t(this._selector).filter(g_ACTIVE).removeClass(__ACTIVE)},h._jQueryInterface=function(e){return this.each(function(){var n=t(this).data(a),o="object"===(void 0===e?"undefined":i(e))&&e;if(n||(n=new h(this,o),t(this).data(a,n)),"string"==typeof e){if(void 0===n[e])throw new Error('No method named "'+e+'"');n[e]()}})},o(h,null,[{key:"VERSION",get:function(){return"4.0.0-alpha.6"}},{key:"Default",get:function(){return u}}]),h}();t(window).on(f.LOAD_DATA_API,function(){for(var e=t.makeArray(t(g_DATA_SPY)),n=e.length;n--;){var i=t(e[n]);m._jQueryInterface.call(i,i.data())}}),t.fn[e]=m._jQueryInterface,t.fn[e].Constructor=m,t.fn[e].noConflict=function(){return t.fn[e]=c,m._jQueryInterface}}(jQuery),function(t){var e="tab",s="bs.tab",a="."+s,h=t.fn[e],u={HIDE:"hide"+a,HIDDEN:"hidden"+a,SHOW:"show"+a,SHOWN:"shown"+a,CLICK_DATA_API:"click"+a+".data-api"},d_DROPDOWN_MENU="dropdown-menu",d_ACTIVE="active",d_DISABLED="disabled",d_FADE="fade",d_SHOW="show",f_DROPDOWN=".dropdown",f_LIST="ul:not(.dropdown-menu), ol:not(.dropdown-menu), nav:not(.dropdown-menu)",f_FADE_CHILD="> .nav-item .fade, > .fade",f_ACTIVE=".active",f_ACTIVE_CHILD="> .nav-item > .active, > .active",a='[data-toggle="tab"], [data-toggle="pill"]',f_DROPDOWN_TOGGLE=".dropdown-toggle",f_DROPDOWN_ACTIVE_CHILD="> .dropdown-menu .active",_=function(){function e(t){n(this,e),this._element=t}return e.prototype.show=function(){var n,i,o,s,a,l,e=this;this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&t(this._element).hasClass(d_ACTIVE)||t(this._element).hasClass(d_DISABLED)||(i=n=void 0,o=t(this._element).closest(f_LIST)[0],s=r.getSelectorFromElement(this._element),o&&(i=(i=t.makeArray(t(o).find(f_ACTIVE)))[i.length-1]),a=t.Event(u.HIDE,{relatedTarget:this._element}),l=t.Event(u.SHOW,{relatedTarget:i}),i&&t(i).trigger(a),t(this._element).trigger(l),l.isDefaultPrevented())||a.isDefaultPrevented()||(s&&(n=t(s)[0]),this._activate(this._element,o),l=function(){var n=t.Event(u.HIDDEN,{relatedTarget:e._element}),o=t.Event(u.SHOWN,{relatedTarget:i});t(i).trigger(n),t(e._element).trigger(o)},n?this._activate(n,n.parentNode,l):l())},e.prototype.dispose=function(){t.removeClass(this._element,s),this._element=null},e.prototype._activate=function(e,n,i){function l(){return o._transitionComplete(e,s,a,i)}var o=this,s=t(n).find(f_ACTIVE_CHILD)[0],a=i&&r.supportsTransitionEnd()&&(s&&t(s).hasClass(d_FADE)||Boolean(t(n).find(f_FADE_CHILD)[0]));s&&a?t(s).one(r.TRANSITION_END,l).emulateTransitionEnd(150):l(),s&&t(s).removeClass(d_SHOW)},e.prototype._transitionComplete=function(e,n,i,o){var s;n&&(t(n).removeClass(d_ACTIVE),(s=t(n.parentNode).find(f_DROPDOWN_ACTIVE_CHILD)[0])&&t(s).removeClass(d_ACTIVE),n.setAttribute("aria-expanded",!1)),t(e).addClass(d_ACTIVE),e.setAttribute("aria-expanded",!0),i?(r.reflow(e),t(e).addClass(d_SHOW)):t(e).removeClass(d_FADE),e.parentNode&&t(e.parentNode).hasClass(d_DROPDOWN_MENU)&&((s=t(e).closest(f_DROPDOWN)[0])&&t(s).find(f_DROPDOWN_TOGGLE).addClass(d_ACTIVE),e.setAttribute("aria-expanded",!0)),o&&o()},e._jQueryInterface=function(n){return this.each(function(){var i=t(this),o=i.data(s);if(o||(o=new e(this),i.data(s,o)),"string"==typeof n){if(void 0===o[n])throw new Error('No method named "'+n+'"');o[n]()}})},o(e,null,[{key:"VERSION",get:function(){return"4.0.0-alpha.6"}}]),e}();t(document).on(u.CLICK_DATA_API,a,function(e){e.preventDefault(),_._jQueryInterface.call(t(this),"show")}),t.fn[e]=_._jQueryInterface,t.fn[e].Constructor=_,t.fn[e].noConflict=function(){return t.fn[e]=h,_._jQueryInterface}}(jQuery),function(t){if("undefined"==typeof Tether)throw new Error("Bootstrap tooltips require Tether (http://tether.io/)");var e="tooltip",a="bs.tooltip",l="."+a,h=t.fn[e],d={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:"0 0",constraints:[],container:!1},f={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"string",constraints:"array",container:"(string|element|boolean)"},_={TOP:"bottom center",RIGHT:"middle left",BOTTOM:"top center",LEFT:"middle right"},g_SHOW="show",g_OUT="out",p={HIDE:"hide"+l,HIDDEN:"hidden"+l,SHOW:"show"+l,SHOWN:"shown"+l,INSERTED:"inserted"+l,CLICK:"click"+l,FOCUSIN:"focusin"+l,FOCUSOUT:"focusout"+l,MOUSEENTER:"mouseenter"+l,MOUSELEAVE:"mouseleave"+l},m_FADE="fade",m_SHOW="show",E_TOOLTIP_INNER=".tooltip-inner",v={element:!1,enabled:!1},T_HOVER="hover",T_FOCUS="focus",T_CLICK="click",T_MANUAL="manual",I=function(){function h(t,e){n(this,h),this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._isTransitioning=!1,this._tether=null,this.element=t,this.config=this._getConfig(e),this.tip=null,this._setListeners()}return h.prototype.enable=function(){this._isEnabled=!0},h.prototype.disable=function(){this._isEnabled=!1},h.prototype.toggleEnabled=function(){this._isEnabled=!this._isEnabled},h.prototype.toggle=function(e){var n,i;e?(n=this.constructor.DATA_KEY,(i=t(e.currentTarget).data(n))||(i=new this.constructor(e.currentTarget,this._getDelegateConfig()),t(e.currentTarget).data(n,i)),i._activeTrigger.click=!i._activeTrigger.click,i._isWithActiveTrigger()?i._enter(null,i):i._leave(null,i)):t(this.getTipElement()).hasClass(m_SHOW)?this._leave(null,this):this._enter(null,this)},h.prototype.dispose=function(){clearTimeout(this._timeout),this.cleanupTether(),t.removeData(this.element,this.constructor.DATA_KEY),t(this.element).off(this.constructor.EVENT_KEY),t(this.element).closest(".modal").off("hide.bs.modal"),this.tip&&t(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,this._activeTrigger=null,this._tether=null,this.element=null,this.config=null,this.tip=null},h.prototype.show=function(){var e=this;if("none"===t(this.element).css("display"))throw new Error("Please use show on visible elements");var n=t.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){if(this._isTransitioning)throw new Error("Tooltip is transitioning");t(this.element).trigger(n);var c,i=t.contains(this.element.ownerDocument.documentElement,this.element);!n.isDefaultPrevented()&&i&&(n=this.getTipElement(),i=r.getUID(this.constructor.NAME),n.setAttribute("id",i),this.element.setAttribute("aria-describedby",i),this.setContent(),this.config.animation&&t(n).addClass(m_FADE),i="function"==typeof this.config.placement?this.config.placement.call(this,n,this.element):this.config.placement,i=this._getAttachment(i),c=!1===this.config.container?document.body:t(this.config.container),t(n).data(this.constructor.DATA_KEY,this).appendTo(c),t(this.element).trigger(this.constructor.Event.INSERTED),this._tether=new Tether({attachment:i,element:n,target:this.element,classes:v,classPrefix:"bs-tether",offset:this.config.offset,constraints:this.config.constraints,addTargetClasses:!1}),r.reflow(n),this._tether.position(),t(n).addClass(m_SHOW),c=function(){var n=e._hoverState;e._hoverState=null,e._isTransitioning=!1,t(e.element).trigger(e.constructor.Event.SHOWN),n===g_OUT&&e._leave(null,e)},r.supportsTransitionEnd()&&t(this.tip).hasClass(m_FADE)?(this._isTransitioning=!0,t(this.tip).one(r.TRANSITION_END,c).emulateTransitionEnd(h._TRANSITION_DURATION)):c())}},h.prototype.hide=function(e){var n=this,i=this.getTipElement(),o=t.Event(this.constructor.Event.HIDE);if(this._isTransitioning)throw new Error("Tooltip is transitioning");function s(){n._hoverState!==g_SHOW&&i.parentNode&&i.parentNode.removeChild(i),n.element.removeAttribute("aria-describedby"),t(n.element).trigger(n.constructor.Event.HIDDEN),n._isTransitioning=!1,n.cleanupTether(),e&&e()}t(this.element).trigger(o),o.isDefaultPrevented()||(t(i).removeClass(m_SHOW),this._activeTrigger[T_CLICK]=!1,this._activeTrigger[T_FOCUS]=!1,this._activeTrigger[T_HOVER]=!1,r.supportsTransitionEnd()&&t(this.tip).hasClass(m_FADE)?(this._isTransitioning=!0,t(i).one(r.TRANSITION_END,s).emulateTransitionEnd(150)):s(),this._hoverState="")},h.prototype.isWithContent=function(){return Boolean(this.getTitle())},h.prototype.getTipElement=function(){return this.tip=this.tip||t(this.config.template)[0]},h.prototype.setContent=function(){var e=t(this.getTipElement());this.setElementContent(e.find(E_TOOLTIP_INNER),this.getTitle()),e.removeClass(m_FADE+" "+m_SHOW),this.cleanupTether()},h.prototype.setElementContent=function(e,n){var o=this.config.html;"object"===(void 0===n?"undefined":i(n))&&(n.nodeType||n.jquery)?o?t(n).parent().is(e)||e.empty().append(n):e.text(t(n).text()):e[o?"html":"text"](n)},h.prototype.getTitle=function(){return this.element.getAttribute("data-original-title")||("function"==typeof this.config.title?this.config.title.call(this.element):this.config.title)},h.prototype.cleanupTether=function(){this._tether&&this._tether.destroy()},h.prototype._getAttachment=function(t){return _[t.toUpperCase()]},h.prototype._setListeners=function(){var e=this;this.config.trigger.split(" ").forEach(function(n){var i;"click"===n?t(e.element).on(e.constructor.Event.CLICK,e.config.selector,function(t){return e.toggle(t)}):n!==T_MANUAL&&(i=n===T_HOVER?e.constructor.Event.MOUSEENTER:e.constructor.Event.FOCUSIN,n=n===T_HOVER?e.constructor.Event.MOUSELEAVE:e.constructor.Event.FOCUSOUT,t(e.element).on(i,e.config.selector,function(t){return e._enter(t)}).on(n,e.config.selector,function(t){return e._leave(t)})),t(e.element).closest(".modal").on("hide.bs.modal",function(){return e.hide()})}),this.config.selector?this.config=t.extend({},this.config,{trigger:"manual",selector:""}):this._fixTitle()},h.prototype._fixTitle=function(){var t=i(this.element.getAttribute("data-original-title"));!this.element.getAttribute("title")&&"string"===t||(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))},h.prototype._enter=function(e,n){var i=this.constructor.DATA_KEY;return(n=n||t(e.currentTarget).data(i))||(n=new this.constructor(e.currentTarget,this._getDelegateConfig()),t(e.currentTarget).data(i,n)),e&&(n._activeTrigger["focusin"===e.type?T_FOCUS:T_HOVER]=!0),t(n.getTipElement()).hasClass(m_SHOW)||n._hoverState===g_SHOW?void(n._hoverState=g_SHOW):(clearTimeout(n._timeout),n._hoverState=g_SHOW,n.config.delay&&n.config.delay.show?void(n._timeout=setTimeout(function(){n._hoverState===g_SHOW&&n.show()},n.config.delay.show)):void n.show())},h.prototype._leave=function(e,n){var i=this.constructor.DATA_KEY;if((n=n||t(e.currentTarget).data(i))||(n=new this.constructor(e.currentTarget,this._getDelegateConfig()),t(e.currentTarget).data(i,n)),e&&(n._activeTrigger["focusout"===e.type?T_FOCUS:T_HOVER]=!1),!n._isWithActiveTrigger())return clearTimeout(n._timeout),n._hoverState=g_OUT,n.config.delay&&n.config.delay.hide?void(n._timeout=setTimeout(function(){n._hoverState===g_OUT&&n.hide()},n.config.delay.hide)):void n.hide()},h.prototype._isWithActiveTrigger=function(){for(var t in this._activeTrigger)if(this._activeTrigger[t])return!0;return!1},h.prototype._getConfig=function(n){return(n=t.extend({},this.constructor.Default,t(this.element).data(),n)).delay&&"number"==typeof n.delay&&(n.delay={show:n.delay,hide:n.delay}),r.typeCheckConfig(e,n,this.constructor.DefaultType),n},h.prototype._getDelegateConfig=function(){var t={};if(this.config)for(var e in this.config)this.constructor.Default[e]!==this.config[e]&&(t[e]=this.config[e]);return t},h._jQueryInterface=function(e){return this.each(function(){var n=t(this).data(a),o="object"===(void 0===e?"undefined":i(e))&&e;if((n||!/dispose|hide/.test(e))&&(n||(n=new h(this,o),t(this).data(a,n)),"string"==typeof e)){if(void 0===n[e])throw new Error('No method named "'+e+'"');n[e]()}})},o(h,null,[{key:"VERSION",get:function(){return"4.0.0-alpha.6"}},{key:"Default",get:function(){return d}},{key:"NAME",get:function(){return e}},{key:"DATA_KEY",get:function(){return a}},{key:"Event",get:function(){return p}},{key:"EVENT_KEY",get:function(){return l}},{key:"DefaultType",get:function(){return f}}]),h}();return t.fn[e]=I._jQueryInterface,t.fn[e].Constructor=I,t.fn[e].noConflict=function(){return t.fn[e]=h,I._jQueryInterface},I}(jQuery));!function(r){var a="popover",h="bs.popover",c="."+h,u=r.fn[a],d=r.extend({},s.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),f=r.extend({},s.DefaultType,{content:"(string|element|function)"}),__FADE="fade",__SHOW="show",g_TITLE=".popover-title",g_CONTENT=".popover-content",p={HIDE:"hide"+c,HIDDEN:"hidden"+c,SHOW:"show"+c,SHOWN:"shown"+c,INSERTED:"inserted"+c,CLICK:"click"+c,FOCUSIN:"focusin"+c,FOCUSOUT:"focusout"+c,MOUSEENTER:"mouseenter"+c,MOUSELEAVE:"mouseleave"+c},m=function(s){function u(){return n(this,u),function(t,e){if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,s.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(u,s),u.prototype.isWithContent=function(){return this.getTitle()||this._getContent()},u.prototype.getTipElement=function(){return this.tip=this.tip||r(this.config.template)[0]},u.prototype.setContent=function(){var t=r(this.getTipElement());this.setElementContent(t.find(g_TITLE),this.getTitle()),this.setElementContent(t.find(g_CONTENT),this._getContent()),t.removeClass(__FADE+" "+__SHOW),this.cleanupTether()},u.prototype._getContent=function(){return this.element.getAttribute("data-content")||("function"==typeof this.config.content?this.config.content.call(this.element):this.config.content)},u._jQueryInterface=function(t){return this.each(function(){var e=r(this).data(h),n="object"===(void 0===t?"undefined":i(t))?t:null;if((e||!/destroy|hide/.test(t))&&(e||(e=new u(this,n),r(this).data(h,e)),"string"==typeof t)){if(void 0===e[t])throw new Error('No method named "'+t+'"');e[t]()}})},o(u,null,[{key:"VERSION",get:function(){return"4.0.0-alpha.6"}},{key:"Default",get:function(){return d}},{key:"NAME",get:function(){return a}},{key:"DATA_KEY",get:function(){return h}},{key:"Event",get:function(){return p}},{key:"EVENT_KEY",get:function(){return c}},{key:"DefaultType",get:function(){return f}}]),u}(s);r.fn[a]=m._jQueryInterface,r.fn[a].Constructor=m,r.fn[a].noConflict=function(){return r.fn[a]=u,m._jQueryInterface}}(jQuery)}();var onepressIsMobile={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return onepressIsMobile.Android()||onepressIsMobile.BlackBerry()||onepressIsMobile.iOS()||onepressIsMobile.Opera()||onepressIsMobile.Windows()}};function preload_images(images,complete_callback){var id;onepress_js_settings.hero_disable_preload?complete_callback&&complete_callback():(id="_img_loading_"+(new Date).getTime(),jQuery("body").append('<div id="'+id+'"></div>'),jQuery.each(images,function(index,src){var img=jQuery("<img>");img.attr("alt",""),img.attr("class","image__preload"),img.css("display","none"),img.attr("src",src),jQuery("#"+id).append(img)}),jQuery("#"+id).imagesLoaded(function(){complete_callback&&complete_callback(),setTimeout(function(){jQuery("#"+id).remove()},5e3)}))}function _to_number(string){return"number"==typeof string?string:(string=string.match(/\d+$/))?parseFloat(string[0]):0}function _to_bool(v){return"boolean"==typeof v?v:"number"==typeof v?0!==v:"string"==typeof v&&("true"===v||"1"===v)}function isElementInViewport(el){el=(el="function"==typeof jQuery&&el instanceof jQuery?el[0]:el).getBoundingClientRect();return 0<=el.top&&0<=el.left&&el.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&el.right<=(window.innerWidth||document.documentElement.clientWidth)}!function(){var is_webkit=-1<navigator.userAgent.toLowerCase().indexOf("webkit"),is_opera=-1<navigator.userAgent.toLowerCase().indexOf("opera"),is_ie=-1<navigator.userAgent.toLowerCase().indexOf("msie");(is_webkit||is_opera||is_ie)&&document.getElementById&&window.addEventListener&&window.addEventListener("hashchange",function(){var id=location.hash.substring(1);/^[A-z0-9_-]+$/.test(id)&&(id=document.getElementById(id))&&(/^(?:a|select|input|button|textarea)$/i.test(id.tagName)||(id.tabIndex=-1),id.focus())},!1)}(),function(){var vh,vw;onepressIsMobile.any()&&(vh=.01*window.innerHeight,vw=.01*window.innerWidth,document.documentElement.style.setProperty("--vh",vh+"px"),document.documentElement.style.setProperty("--vw",vw+"px"),window.addEventListener("resize",function(){var vh=.01*window.innerHeight,vw=.01*window.innerWidth;document.documentElement.style.setProperty("--vh",vh+"px"),document.documentElement.style.setProperty("--vw",vw+"px")}))}(),jQuery(document).ready(function($){var $stickies,$window=$(window),$document=$(document),getAdminBarHeight=($(document).on("mouseenter resize",".sub-menu .menu-item-has-children",function(){var submenuEl=$(this).find(".sub-menu");0<submenuEl.length&&!isElementInViewport(submenuEl)&&submenuEl.css({right:"100%",left:"auto"})}),function(){var h=0;return h=$("#wpadminbar").length&&"fixed"==$("#wpadminbar").css("position")?$("#wpadminbar").height():h}),stickyHeaders={load:function(stickies){"object"==typeof stickies&&stickies instanceof jQuery&&0<stickies.length&&(setData(stickies),$window.scroll(function(){_whenScrolling()}),$window.resize(function(){setData(stickies,!1),stickies.each(function(){$(this).removeClass("fixed").removeAttr("style")}),_whenScrolling()}),$document.on("hero_ready",function(){$(".followWrap").removeAttr("style"),setTimeout(function(){$(".followWrap").removeAttr("style"),setData(stickies,!1),_whenScrolling()},500)}))}};function setData(stickies,addWrap){void 0===addWrap&&(addWrap=!0),$stickies=stickies.each(function(){var $thisSticky=$(this);$thisSticky.parent().hasClass("followWrap")||addWrap&&$thisSticky.wrap('<div class="followWrap" />'),$thisSticky.parent().removeAttr("style"),$thisSticky.parent().height($thisSticky.height())})}function _whenScrolling(){var top=getAdminBarHeight(),scrollTop=$window.scrollTop();$stickies.each(function(i){var $thisSticky=$(this),$stickyPosition=$thisSticky.parent().offset().top;0===scrollTop&&$thisSticky.addClass("no-scroll"),$stickyPosition-top<=scrollTop?(0<scrollTop&&$thisSticky.removeClass("no-scroll"),$thisSticky.addClass("header-fixed"),$thisSticky.css("top",top)):$thisSticky.removeClass("header-fixed").removeAttr("style").addClass("no-scroll")})}stickyHeaders.load($("#masthead.is-sticky")),$document.on("header_view_changed",function(){stickyHeaders.load($("#masthead.is-sticky"))});function getNavHeight(fitWindow){return(fitWindow=void 0===fitWindow?!0:fitWindow)?(fitWindow=header.getBoundingClientRect(),$(window).height()-(fitWindow.x+fitWindow.height)+1):(main_navigation.css("height","auto"),fitWindow=main_navigation[0].getBoundingClientRect(),main_navigation.css("height",0),fitWindow.height)}var noSticky,h,main_navigation=jQuery(".main-navigation .onepress-menu"),header=document.getElementById("masthead");header&&(noSticky=header.classList.contains("no-sticky"));function autoMenuAlign(){const isMobile=$(window).width()<=1140;var header=$("#masthead > .container");const headerRect=header.length?header[0].getBoundingClientRect():{};$("#site-navigation  .onepress-menu > li").each(function(){var liRect,subRect,li=$(this),sub=$("> .sub-menu",li);isMobile?sub.removeAttr("style"):sub.length&&(liRect=li[0].getBoundingClientRect(),subRect=sub[0].getBoundingClientRect(),headerRect.right<liRect.left+subRect.width)&&(li.addClass("sub-li-r"),sub.addClass("sub-ul-r"),subRect=headerRect.right-(liRect.left+liRect.width),sub.css("right",`-${subRect}px`))})}$document.on("click","#nav-toggle",function(event){var h;event.preventDefault(),jQuery("#nav-toggle").toggleClass("nav-is-visible"),jQuery(".header-widget").toggleClass("header-widget-mobile"),main_navigation.stop(),main_navigation.hasClass("onepress-menu-mobile")?(main_navigation.css({height:main_navigation.height(),"min-height":0,overflow:"hidden"}),setTimeout(function(){main_navigation.animate({height:0},300,function(){main_navigation.removeAttr("style"),main_navigation.removeClass("onepress-menu-mobile"),$("body").removeClass("onepress-menu-mobile-opening")})},40)):(main_navigation.addClass("onepress-menu-mobile"),$("body").addClass("onepress-menu-mobile-opening"),event=(event=header.getBoundingClientRect()).x+event.height-1,main_navigation.css({top:event}),h=getNavHeight(!noSticky),isNaN(h)&&(h=$(window).height()),main_navigation.animate({height:h},300,function(){noSticky&&main_navigation.css({"min-height":h,height:"auto"})}))}),!noSticky&&onepressIsMobile.any()&&$(document).on("scroll",function(){var newViewportHeight,offset;main_navigation.hasClass("onepress-menu-mobile")&&(newViewportHeight=Math.max(document.documentElement.clientHeight,window.innerHeight||0),offset=(offset=header.getBoundingClientRect()).x+offset.height-1,main_navigation.css({height:newViewportHeight-offset+1,top:offset}))}),autoMenuAlign();let timeOutResize=!1;function inViewPort($element,offset_top){offset_top=offset_top||0;var view_port_top=jQuery(window).scrollTop(),view_port_h=(0<$("#wpadminbar").length&&(view_port_top-=$("#wpadminbar").outerHeight()-1,offset_top+=$("#wpadminbar").outerHeight()-1),$("body").outerHeight()),el_top=$element.offset().top,$element=el_top+$element.height(),view_port_bot=view_port_top+view_port_h,in_view_port=!1;return $("body")[0].scrollHeight-view_port_h<=view_port_top?(el_top<view_port_top&&view_port_bot<el_top||view_port_top<el_top&&$element<view_port_top)&&(in_view_port=!0):el_top<=view_port_top+offset_top&&view_port_top<$element&&(in_view_port=!0),in_view_port}$(window).resize(function(){timeOutResize&&clearTimeout(timeOutResize),timeOutResize=setTimeout(()=>{main_navigation.hasClass("onepress-menu-mobile")&&$(window).width()<=1140?noSticky||main_navigation.css({height:getNavHeight(),overflow:"auto"}):(main_navigation.removeAttr("style"),main_navigation.removeClass("onepress-menu-mobile"),jQuery("#nav-toggle").removeClass("nav-is-visible")),autoMenuAlign()},500)}),jQuery(".onepress-menu li.menu-item-has-children, .onepress-menu li.page_item_has_children").each(function(){jQuery(this).prepend('<div class="nav-toggle-subarrow"><i class="fa fa-angle-down"></i></div>')}),$document.on("click",".nav-toggle-subarrow, .nav-toggle-subarrow .nav-toggle-subarrow",function(){var p=jQuery(this).parent();p.removeAttr("style"),p.toggleClass("nav-toggle-dropdown")}),window.current_nav_item=!1,h="1"!=onepress_js_settings.onepress_disable_sticky_header?jQuery("#wpadminbar").height()+jQuery(".site-header").height():jQuery("#wpadminbar").height(),jQuery('#site-navigation li a[href*="#"]').on("click",function(event){var $el,url=new URL(this.href);url.origin+url.pathname===window.location.origin+window.location.pathname&&($el=jQuery(this.hash),jQuery(".onepress-menu").hasClass("onepress-menu-mobile")&&jQuery("#nav-toggle").trigger("click"),$el.length)&&(event.preventDefault(),window.history.pushState({},null,url.href),smoothScroll($el))});var _scroll_top=$window.scrollTop();function smoothScroll(element){element.length<=0||jQuery("html, body").animate({scrollTop:jQuery(element).offset().top-h+"px"},{duration:800,easing:"swing",complete:function(){window.current_nav_item=!1}})}jQuery(window).scroll(function(){var currentNode=null;if(window.current_nav_item)currentNode=window.current_nav_item.replace("#","");else{var current_top=$window.scrollTop(),adminBarHeight=0<jQuery("#wpadminbar").length?jQuery("#wpadminbar").height():0;if(h="1"!=onepress_js_settings.onepress_disable_sticky_header?adminBarHeight+jQuery(".site-header").height():adminBarHeight,_scroll_top<current_top)jQuery("section").each(function(index){var section=jQuery(this),currentId=section.attr("id")||"";inViewPort(section,h+10)&&(currentNode=currentId)});else for(var i=jQuery("section").length-1;0<=i;i--){var section=jQuery("section").eq(i),currentId=section.attr("id")||"";inViewPort(section,h+10)&&(currentNode=currentId)}_scroll_top=current_top}!function(currentNode){currentNode&&((currentNode=currentNode.replace("#",""))&&jQuery("#site-navigation li").removeClass("onepress-current-item"),currentNode)&&jQuery("#site-navigation li").find('a[href$="#'+currentNode+'"]').parent().addClass("onepress-current-item")}(currentNode)}),jQuery(window).on("load",function(){var urlCurrent=location.hash;0<jQuery(urlCurrent).length&&smoothScroll(urlCurrent)}),jQuery('.hero-slideshow-wrapper a[href*="#"]:not([href="#"]), .parallax-content a[href*="#"]:not([href="#"]), .back-to-top').on("click",function(event){event.preventDefault(),smoothScroll(jQuery(this.hash))}),onepress_js_settings.is_home&&jQuery(".site-branding .site-brand-inner").on("click",function(e){e.preventDefault(),jQuery("html, body").animate({scrollTop:"0px"},{duration:300,easing:"swing"})}),onepressIsMobile.any()?jQuery("body").addClass("body-mobile").removeClass("body-desktop"):jQuery("body").addClass("body-desktop").removeClass("body-mobile"),"1"!=onepress_js_settings.onepress_disable_animation&&new WOW({offset:50,mobile:!1,live:!1}).init();function text_rotator(){jQuery(".js-rotating").Morphext({animation:onepress_js_settings.hero_animation,separator:"|",speed:parseInt(onepress_js_settings.hero_speed),complete:function(){}})}var header_height;function hero_full_screen(no_trigger){var wh,top,$header;0<$(".hero-slideshow-fullscreen").length&&(wh=$window.height(),top=getAdminBarHeight(),$header=($header=jQuery("#masthead")).hasClass("is-t")?0:$header.height(),$header+=top,jQuery(".hero-slideshow-fullscreen").css("height",wh-$header+1+"px"),void 0!==no_trigger&&no_trigger||$document.trigger("hero_ready"))}text_rotator(),$document.on("header_view_changed",function(){text_rotator()}),jQuery(".site-content").fitVids({ignore:".wp-block-embed iframe, .wp-block-embed object"}),$.fn.lightGallery&&$(".videolightbox-popup").lightGallery({}),$(".counter").counterUp({delay:10,time:1e3}),"1"==onepress_js_settings.onepress_vertical_align_menu&&(header_height=jQuery(".site-header").height(),jQuery(".site-header .onepress-menu").css("line-height",header_height+"px")),$window.on("resize",function(){hero_full_screen()}),hero_full_screen(),$document.on("header_view_changed",function(){hero_full_screen()}),$document.on("hero_ready",function(){hero_full_screen(!0)});function heroSliders(){$("#parallax-hero").length<=0&&jQuery(".hero-slideshow-wrapper").each(function(){var images,hero=$(this);hero.hasClass("video-hero")||((images="string"==typeof(images=hero.data("images")||!1)?jQuery.parseJSON(images):images)?preload_images(images,function(){hero.backstretch(images,{fade:_to_number(onepress_js_settings.hero_fade),duration:_to_number(onepress_js_settings.hero_duration)}),hero.addClass("loaded"),hero.removeClass("loading"),setTimeout(function(){hero.find(".slider-spinner").remove()},600)}):(hero.addClass("loaded"),hero.removeClass("loading"),hero.find(".slider-spinner").remove()))})}function onepress_gallery_init($context){$.fn.justifiedGallery&&$(".gallery-justified",$context).imagesLoaded(function(){$(".gallery-justified",$context).each(function(){var margin=$(this).attr("data-spacing")||20,row_height=$(this).attr("data-row-height")||120,margin=_to_number(margin),row_height=_to_number(row_height);$(this).justifiedGallery({rowHeight:row_height,margins:margin,selector:"a, div:not(.spinner), .inner"})})});var tag_selector,is_rtl=onepress_js_settings.is_rtl;function isotope_init(){$.fn.isotope&&$(".gallery-masonry",$context).each(function(){var m=$(this),gutter=m.attr("data-gutter")||10,columns=m.attr("data-col")||5,columns=(_to_number(gutter),_to_number(columns)),gutter=$(window).width();gutter<=940&&(columns=2<columns?columns-1:columns),gutter<=720&&(columns=3<columns?3:columns),gutter<=576&&(columns=2<columns?2:columns),m.find(".g-item").css({width:100/columns+"%",float:"left",padding:0}),m.isotope({itemSelector:".g-item",percentPosition:!0,masonry:{columnWidth:".inner"}})})}$.fn.owlCarousel&&($(".gallery-slider",$context).owlCarousel({items:1,itemsCustom:!1,itemsDesktop:1,itemsDesktopSmall:1,itemsTablet:1,itemsTabletSmall:!1,itemsMobile:1,singleItem:!0,itemsScaleUp:!1,slideSpeed:200,paginationSpeed:800,rewindSpeed:1e3,autoPlay:4e3,stopOnHover:!0,nav:!0,navText:["<i class='lg-icon'></i>","<i class='lg-icon'></i>"],autoHeight:!0,rtl:0!=is_rtl,dots:!1}),$(".gallery-carousel",$context).each(function(){var n=$(this).attr("data-col")||5;(n=_to_number(n))<=0&&(n=5),$(this).owlCarousel({items:n,responsive:{0:{items:2},768:{items:2<n?2:n},979:{items:3<n?3:n},1199:{items:n}},rtl:0!=is_rtl,navSpeed:800,autoplaySpeed:4e3,autoplayHoverPause:!0,nav:!0,navText:["<i class='lg-icon'></i>","<i class='lg-icon'></i>"],dots:!1})})),$(".gallery-masonry",$context).imagesLoaded(function(){isotope_init()}),$(window).resize(function(){isotope_init()}),$.fn.lightGallery&&(tag_selector="a",$(".enable-lightbox",$context).find(".g-item").first().is("div")&&(tag_selector="div"),$(".enable-lightbox",$context).lightGallery({mode:"lg-fade",selector:tag_selector}))}heroSliders(),$document.on("header_view_changed",function(){heroSliders()}),$(".parallax-hero").each(function(){var hero=$(this),bg=(hero.addClass("loading"),!0);0<hero.find("img").length&&(bg=!1),$(".parallax-bg",hero).imagesLoaded({background:bg},function(){hero.find(".hero-slideshow-wrapper").addClass("loaded"),hero.removeClass("loading"),setTimeout(function(){hero.find(".hero-slideshow-wrapper").find(".slider-spinner").remove()},600)}).fail(function(instance){hero.removeClass("loading"),hero.find(".hero-slideshow-wrapper").addClass("loaded"),hero.find(".hero-slideshow-wrapper").find(".slider-spinner").remove()})}),$(".section-parallax").each(function(){var hero=$(this),bg=!0;0<hero.find("img").length&&(bg=!1),$(".parallax-bg",hero).imagesLoaded({background:bg},function(){}).fail(function(instance){})}),setTimeout(function(){$(window).trigger("scroll")},500),onepress_gallery_init($(".gallery-content")),"undefined"!=typeof jarallax&&jarallax(document.querySelectorAll(".jarallax"),{speed:parseFloat(onepress_js_settings.parallax_speed||.5)}),"undefined"!=typeof wp&&wp.customize&&wp.customize.selectiveRefresh&&wp.customize.selectiveRefresh.bind("partial-content-rendered",function(placement){"section-gallery"==placement.partial.id&&(onepress_gallery_init(placement.container.find(".gallery-content")),$(window).resize())})});
document.addEventListener("DOMContentLoaded",(t=>{var e;wpcf7_recaptcha={...null!==(e=wpcf7_recaptcha)&&void 0!==e?e:{}};const c=wpcf7_recaptcha.sitekey,{homepage:n,contactform:a}=wpcf7_recaptcha.actions,o=t=>{const{action:e,func:n,params:a}=t;grecaptcha.execute(c,{action:e}).then((t=>{const c=new CustomEvent("wpcf7grecaptchaexecuted",{detail:{action:e,token:t}});document.dispatchEvent(c)})).then((()=>{"function"==typeof n&&n(...a)})).catch((t=>console.error(t)))};if(grecaptcha.ready((()=>{o({action:n})})),document.addEventListener("change",(t=>{o({action:a})})),"undefined"!=typeof wpcf7&&"function"==typeof wpcf7.submit){const t=wpcf7.submit;wpcf7.submit=function(e){let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o({action:a,func:t,params:[e,c]})}}document.addEventListener("wpcf7grecaptchaexecuted",(t=>{const e=document.querySelectorAll('form.wpcf7-form input[name="_wpcf7_recaptcha_response"]');for(let c=0;c<e.length;c++)e[c].setAttribute("value",t.detail.token)}))}));
!function(){var e={7090:function(e){!function(t,n){var a=function(e,t,n){"use strict";var a,i;if(function(){var t,n={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",fastLoadedClass:"ls-is-cached",iframeLoadMode:0,srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0,ricTimeout:0,throttleDelay:125};for(t in i=e.lazySizesConfig||e.lazysizesConfig||{},n)t in i||(i[t]=n[t])}(),!t||!t.getElementsByClassName)return{init:function(){},cfg:i,noSupport:!0};var r=t.documentElement,o=e.HTMLPictureElement,s="addEventListener",l="getAttribute",c=e[s].bind(e),d=e.setTimeout,u=e.requestAnimationFrame||d,f=e.requestIdleCallback,m=/^picture$/i,v=["load","error","lazyincluded","_lazyloaded"],y={},h=Array.prototype.forEach,z=function(e,t){return y[t]||(y[t]=new RegExp("(\\s|^)"+t+"(\\s|$)")),y[t].test(e[l]("class")||"")&&y[t]},p=function(e,t){z(e,t)||e.setAttribute("class",(e[l]("class")||"").trim()+" "+t)},g=function(e,t){var n;(n=z(e,t))&&e.setAttribute("class",(e[l]("class")||"").replace(n," "))},C=function(e,t,n){var a=n?s:"removeEventListener";n&&C(e,t),v.forEach((function(n){e[a](n,t)}))},b=function(e,n,i,r,o){var s=t.createEvent("Event");return i||(i={}),i.instance=a,s.initEvent(n,!r,!o),s.detail=i,e.dispatchEvent(s),s},A=function(t,n){var a;!o&&(a=e.picturefill||i.pf)?(n&&n.src&&!t[l]("srcset")&&t.setAttribute("srcset",n.src),a({reevaluate:!0,elements:[t]})):n&&n.src&&(t.src=n.src)},E=function(e,t){return(getComputedStyle(e,null)||{})[t]},_=function(e,t,n){for(n=n||e.offsetWidth;n<i.minSize&&t&&!e._lazysizesWidth;)n=t.offsetWidth,t=t.parentNode;return n},w=(pe=[],ge=[],Ce=pe,be=function(){var e=Ce;for(Ce=pe.length?ge:pe,he=!0,ze=!1;e.length;)e.shift()();he=!1},Ae=function(e,n){he&&!n?e.apply(this,arguments):(Ce.push(e),ze||(ze=!0,(t.hidden?d:u)(be)))},Ae._lsFlush=be,Ae),M=function(e,t){return t?function(){w(e)}:function(){var t=this,n=arguments;w((function(){e.apply(t,n)}))}},N=function(e){var t,a=0,r=i.throttleDelay,o=i.ricTimeout,s=function(){t=!1,a=n.now(),e()},l=f&&o>49?function(){f(s,{timeout:o}),o!==i.ricTimeout&&(o=i.ricTimeout)}:M((function(){d(s)}),!0);return function(e){var i;(e=!0===e)&&(o=33),t||(t=!0,(i=r-(n.now()-a))<0&&(i=0),e||i<9?l():d(l,i))}},x=function(e){var t,a,i=99,r=function(){t=null,e()},o=function(){var e=n.now()-a;e<i?d(o,i-e):(f||r)(r)};return function(){a=n.now(),t||(t=d(o,i))}},L=(K=/^img$/i,Q=/^iframe$/i,V="onscroll"in e&&!/(gle|ing)bot/.test(navigator.userAgent),X=0,Y=0,Z=0,ee=-1,te=function(e){Z--,(!e||Z<0||!e.target)&&(Z=0)},ne=function(e){return null==J&&(J="hidden"==E(t.body,"visibility")),J||!("hidden"==E(e.parentNode,"visibility")&&"hidden"==E(e,"visibility"))},ae=function(e,n){var a,i=e,o=ne(e);for(I-=n,G+=n,j-=n,U+=n;o&&(i=i.offsetParent)&&i!=t.body&&i!=r;)(o=(E(i,"opacity")||1)>0)&&"visible"!=E(i,"overflow")&&(a=i.getBoundingClientRect(),o=U>a.left&&j<a.right&&G>a.top-1&&I<a.bottom+1);return o},ie=function(){var e,n,o,s,c,d,u,f,m,v,y,h,z=a.elements;if((k=i.loadMode)&&Z<8&&(e=z.length)){for(n=0,ee++;n<e;n++)if(z[n]&&!z[n]._lazyRace)if(!V||a.prematureUnveil&&a.prematureUnveil(z[n]))fe(z[n]);else if((f=z[n][l]("data-expand"))&&(d=1*f)||(d=Y),v||(v=!i.expand||i.expand<1?r.clientHeight>500&&r.clientWidth>500?500:370:i.expand,a._defEx=v,y=v*i.expFactor,h=i.hFac,J=null,Y<y&&Z<1&&ee>2&&k>2&&!t.hidden?(Y=y,ee=0):Y=k>1&&ee>1&&Z<6?v:X),m!==d&&($=innerWidth+d*h,q=innerHeight+d,u=-1*d,m=d),o=z[n].getBoundingClientRect(),(G=o.bottom)>=u&&(I=o.top)<=q&&(U=o.right)>=u*h&&(j=o.left)<=$&&(G||U||j||I)&&(i.loadHidden||ne(z[n]))&&(P&&Z<3&&!f&&(k<3||ee<4)||ae(z[n],d))){if(fe(z[n]),c=!0,Z>9)break}else!c&&P&&!s&&Z<4&&ee<4&&k>2&&(R[0]||i.preloadAfterLoad)&&(R[0]||!f&&(G||U||j||I||"auto"!=z[n][l](i.sizesAttr)))&&(s=R[0]||z[n]);s&&!c&&fe(s)}},re=N(ie),oe=function(e){var t=e.target;t._lazyCache?delete t._lazyCache:(te(e),p(t,i.loadedClass),g(t,i.loadingClass),C(t,le),b(t,"lazyloaded"))},se=M(oe),le=function(e){se({target:e.target})},ce=function(e,t){var n=e.getAttribute("data-load-mode")||i.iframeLoadMode;0==n?e.contentWindow.location.replace(t):1==n&&(e.src=t)},de=function(e){var t,n=e[l](i.srcsetAttr);(t=i.customMedia[e[l]("data-media")||e[l]("media")])&&e.setAttribute("media",t),n&&e.setAttribute("srcset",n)},ue=M((function(e,t,n,a,r){var o,s,c,u,f,v;(f=b(e,"lazybeforeunveil",t)).defaultPrevented||(a&&(n?p(e,i.autosizesClass):e.setAttribute("sizes",a)),s=e[l](i.srcsetAttr),o=e[l](i.srcAttr),r&&(u=(c=e.parentNode)&&m.test(c.nodeName||"")),v=t.firesLoad||"src"in e&&(s||o||u),f={target:e},p(e,i.loadingClass),v&&(clearTimeout(D),D=d(te,2500),C(e,le,!0)),u&&h.call(c.getElementsByTagName("source"),de),s?e.setAttribute("srcset",s):o&&!u&&(Q.test(e.nodeName)?ce(e,o):e.src=o),r&&(s||u)&&A(e,{src:o})),e._lazyRace&&delete e._lazyRace,g(e,i.lazyClass),w((function(){var t=e.complete&&e.naturalWidth>1;v&&!t||(t&&p(e,i.fastLoadedClass),oe(f),e._lazyCache=!0,d((function(){"_lazyCache"in e&&delete e._lazyCache}),9)),"lazy"==e.loading&&Z--}),!0)})),fe=function(e){if(!e._lazyRace){var t,n=K.test(e.nodeName),a=n&&(e[l](i.sizesAttr)||e[l]("sizes")),r="auto"==a;(!r&&P||!n||!e[l]("src")&&!e.srcset||e.complete||z(e,i.errorClass)||!z(e,i.lazyClass))&&(t=b(e,"lazyunveilread").detail,r&&W.updateElem(e,!0,e.offsetWidth),e._lazyRace=!0,Z++,ue(e,t,r,a,n))}},me=x((function(){i.loadMode=3,re()})),ve=function(){3==i.loadMode&&(i.loadMode=2),me()},ye=function(){P||(n.now()-H<999?d(ye,999):(P=!0,i.loadMode=3,re(),c("scroll",ve,!0)))},{_:function(){H=n.now(),a.elements=t.getElementsByClassName(i.lazyClass),R=t.getElementsByClassName(i.lazyClass+" "+i.preloadClass),c("scroll",re,!0),c("resize",re,!0),c("pageshow",(function(e){if(e.persisted){var n=t.querySelectorAll("."+i.loadingClass);n.length&&n.forEach&&u((function(){n.forEach((function(e){e.complete&&fe(e)}))}))}})),e.MutationObserver?new MutationObserver(re).observe(r,{childList:!0,subtree:!0,attributes:!0}):(r[s]("DOMNodeInserted",re,!0),r[s]("DOMAttrModified",re,!0),setInterval(re,999)),c("hashchange",re,!0),["focus","mouseover","click","load","transitionend","animationend"].forEach((function(e){t[s](e,re,!0)})),/d$|^c/.test(t.readyState)?ye():(c("load",ye),t[s]("DOMContentLoaded",re),d(ye,2e4)),a.elements.length?(ie(),w._lsFlush()):re()},checkElems:re,unveil:fe,_aLSL:ve}),W=(T=M((function(e,t,n,a){var i,r,o;if(e._lazysizesWidth=a,a+="px",e.setAttribute("sizes",a),m.test(t.nodeName||""))for(r=0,o=(i=t.getElementsByTagName("source")).length;r<o;r++)i[r].setAttribute("sizes",a);n.detail.dataAttr||A(e,n.detail)})),F=function(e,t,n){var a,i=e.parentNode;i&&(n=_(e,i,n),(a=b(e,"lazybeforesizes",{width:n,dataAttr:!!t})).defaultPrevented||(n=a.detail.width)&&n!==e._lazysizesWidth&&T(e,i,a,n))},O=x((function(){var e,t=B.length;if(t)for(e=0;e<t;e++)F(B[e])})),{_:function(){B=t.getElementsByClassName(i.autosizesClass),c("resize",O)},checkElems:O,updateElem:F}),S=function(){!S.i&&t.getElementsByClassName&&(S.i=!0,W._(),L._())};var B,T,F,O;var R,P,D,k,H,$,q,I,j,U,G,J,K,Q,V,X,Y,Z,ee,te,ne,ae,ie,re,oe,se,le,ce,de,ue,fe,me,ve,ye;var he,ze,pe,ge,Ce,be,Ae;return d((function(){i.init&&S()})),a={cfg:i,autoSizer:W,loader:L,init:S,uP:A,aC:p,rC:g,hC:z,fire:b,gW:_,rAF:w}}(t,t.document,Date);t.lazySizes=a,e.exports&&(e.exports=a)}("undefined"!=typeof window?window:{})}},t={};function n(a){var i=t[a];if(void 0!==i)return i.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,n),r.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";var e=n(7090);n.n(e)().init()}()}();
;
/*! jQuery UI - v1.13.2 - 2022-07-14
* http://jqueryui.com
* Includes: widget.js, position.js, data.js, disable-selection.js, effect.js, effects/effect-blind.js, effects/effect-bounce.js, effects/effect-clip.js, effects/effect-drop.js, effects/effect-explode.js, effects/effect-fade.js, effects/effect-fold.js, effects/effect-highlight.js, effects/effect-puff.js, effects/effect-pulsate.js, effects/effect-scale.js, effects/effect-shake.js, effects/effect-size.js, effects/effect-slide.js, effects/effect-transfer.js, focusable.js, form-reset-mixin.js, jquery-patch.js, keycode.js, labels.js, scroll-parent.js, tabbable.js, unique-id.js, widgets/accordion.js, widgets/autocomplete.js, widgets/button.js, widgets/checkboxradio.js, widgets/controlgroup.js, widgets/datepicker.js, widgets/dialog.js, widgets/draggable.js, widgets/droppable.js, widgets/menu.js, widgets/mouse.js, widgets/progressbar.js, widgets/resizable.js, widgets/selectable.js, widgets/selectmenu.js, widgets/slider.js, widgets/sortable.js, widgets/spinner.js, widgets/tabs.js, widgets/tooltip.js
* Copyright jQuery Foundation and other contributors; Licensed MIT */
!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(x){"use strict";var t,e,i,n,W,C,o,s,r,l,a,h,u;function E(t,e,i){return[parseFloat(t[0])*(a.test(t[0])?e/100:1),parseFloat(t[1])*(a.test(t[1])?i/100:1)]}function L(t,e){return parseInt(x.css(t,e),10)||0}function N(t){return null!=t&&t===t.window}x.ui=x.ui||{},x.ui.version="1.13.2",
/*!
 * jQuery UI :data 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
x.extend(x.expr.pseudos,{data:x.expr.createPseudo?x.expr.createPseudo(function(e){return function(t){return!!x.data(t,e)}}):function(t,e,i){return!!x.data(t,i[3])}}),
/*!
 * jQuery UI Disable Selection 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
x.fn.extend({disableSelection:(t="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(t+".ui-disableSelection",function(t){t.preventDefault()})}),enableSelection:function(){return this.off(".ui-disableSelection")}}),
/*!
 * jQuery UI Focusable 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
x.ui.focusable=function(t,e){var i,n,o,s=t.nodeName.toLowerCase();return"area"===s?(o=(i=t.parentNode).name,!(!t.href||!o||"map"!==i.nodeName.toLowerCase())&&0<(i=x("img[usemap='#"+o+"']")).length&&i.is(":visible")):(/^(input|select|textarea|button|object)$/.test(s)?(n=!t.disabled)&&(o=x(t).closest("fieldset")[0])&&(n=!o.disabled):n="a"===s&&t.href||e,n&&x(t).is(":visible")&&function(t){var e=t.css("visibility");for(;"inherit"===e;)t=t.parent(),e=t.css("visibility");return"visible"===e}(x(t)))},x.extend(x.expr.pseudos,{focusable:function(t){return x.ui.focusable(t,null!=x.attr(t,"tabindex"))}}),x.fn._form=function(){return"string"==typeof this[0].form?this.closest("form"):x(this[0].form)},
/*!
 * jQuery UI Form Reset Mixin 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
x.ui.formResetMixin={_formResetHandler:function(){var e=x(this);setTimeout(function(){var t=e.data("ui-form-reset-instances");x.each(t,function(){this.refresh()})})},_bindFormResetHandler:function(){var t;this.form=this.element._form(),this.form.length&&((t=this.form.data("ui-form-reset-instances")||[]).length||this.form.on("reset.ui-form-reset",this._formResetHandler),t.push(this),this.form.data("ui-form-reset-instances",t))},_unbindFormResetHandler:function(){var t;this.form.length&&((t=this.form.data("ui-form-reset-instances")).splice(x.inArray(this,t),1),t.length?this.form.data("ui-form-reset-instances",t):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset"))}},x.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),
/*!
 * jQuery UI Support for jQuery core 1.8.x and newer 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 */
x.expr.pseudos||(x.expr.pseudos=x.expr[":"]),x.uniqueSort||(x.uniqueSort=x.unique),x.escapeSelector||(e=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,i=function(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},x.escapeSelector=function(t){return(t+"").replace(e,i)}),x.fn.even&&x.fn.odd||x.fn.extend({even:function(){return this.filter(function(t){return t%2==0})},odd:function(){return this.filter(function(t){return t%2==1})}}),
/*!
 * jQuery UI Keycode 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
x.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},
/*!
 * jQuery UI Labels 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
x.fn.labels=function(){var t,e,i;return this.length?this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(e=this.eq(0).parents("label"),(t=this.attr("id"))&&(i=(i=this.eq(0).parents().last()).add((i.length?i:this).siblings()),t="label[for='"+x.escapeSelector(t)+"']",e=e.add(i.find(t).addBack(t))),this.pushStack(e)):this.pushStack([])},x.ui.plugin={add:function(t,e,i){var n,o=x.ui[t].prototype;for(n in i)o.plugins[n]=o.plugins[n]||[],o.plugins[n].push([e,i[n]])},call:function(t,e,i,n){var o,s=t.plugins[e];if(s&&(n||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(o=0;o<s.length;o++)t.options[s[o][0]]&&s[o][1].apply(t.element,i)}},
/*!
 * jQuery UI Position 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */
W=Math.max,C=Math.abs,o=/left|center|right/,s=/top|center|bottom/,r=/[\+\-]\d+(\.[\d]+)?%?/,l=/^\w+/,a=/%$/,h=x.fn.position,x.position={scrollbarWidth:function(){var t,e,i;return void 0!==n?n:(i=(e=x("<div style='display:block;position:absolute;width:200px;height:200px;overflow:hidden;'><div style='height:300px;width:auto;'></div></div>")).children()[0],x("body").append(e),t=i.offsetWidth,e.css("overflow","scroll"),t===(i=i.offsetWidth)&&(i=e[0].clientWidth),e.remove(),n=t-i)},getScrollInfo:function(t){var e=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),i=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),e="scroll"===e||"auto"===e&&t.width<t.element[0].scrollWidth;return{width:"scroll"===i||"auto"===i&&t.height<t.element[0].scrollHeight?x.position.scrollbarWidth():0,height:e?x.position.scrollbarWidth():0}},getWithinInfo:function(t){var e=x(t||window),i=N(e[0]),n=!!e[0]&&9===e[0].nodeType;return{element:e,isWindow:i,isDocument:n,offset:!i&&!n?x(t).offset():{left:0,top:0},scrollLeft:e.scrollLeft(),scrollTop:e.scrollTop(),width:e.outerWidth(),height:e.outerHeight()}}},x.fn.position=function(f){var c,d,p,g,m,v,y,w,b,_,t,e;return f&&f.of?(v="string"==typeof(f=x.extend({},f)).of?x(document).find(f.of):x(f.of),y=x.position.getWithinInfo(f.within),w=x.position.getScrollInfo(y),b=(f.collision||"flip").split(" "),_={},e=9===(e=(t=v)[0]).nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:N(e)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:e.preventDefault?{width:0,height:0,offset:{top:e.pageY,left:e.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()},v[0].preventDefault&&(f.at="left top"),d=e.width,p=e.height,m=x.extend({},g=e.offset),x.each(["my","at"],function(){var t,e,i=(f[this]||"").split(" ");(i=1===i.length?o.test(i[0])?i.concat(["center"]):s.test(i[0])?["center"].concat(i):["center","center"]:i)[0]=o.test(i[0])?i[0]:"center",i[1]=s.test(i[1])?i[1]:"center",t=r.exec(i[0]),e=r.exec(i[1]),_[this]=[t?t[0]:0,e?e[0]:0],f[this]=[l.exec(i[0])[0],l.exec(i[1])[0]]}),1===b.length&&(b[1]=b[0]),"right"===f.at[0]?m.left+=d:"center"===f.at[0]&&(m.left+=d/2),"bottom"===f.at[1]?m.top+=p:"center"===f.at[1]&&(m.top+=p/2),c=E(_.at,d,p),m.left+=c[0],m.top+=c[1],this.each(function(){var i,t,r=x(this),l=r.outerWidth(),a=r.outerHeight(),e=L(this,"marginLeft"),n=L(this,"marginTop"),o=l+e+L(this,"marginRight")+w.width,s=a+n+L(this,"marginBottom")+w.height,h=x.extend({},m),u=E(_.my,r.outerWidth(),r.outerHeight());"right"===f.my[0]?h.left-=l:"center"===f.my[0]&&(h.left-=l/2),"bottom"===f.my[1]?h.top-=a:"center"===f.my[1]&&(h.top-=a/2),h.left+=u[0],h.top+=u[1],i={marginLeft:e,marginTop:n},x.each(["left","top"],function(t,e){x.ui.position[b[t]]&&x.ui.position[b[t]][e](h,{targetWidth:d,targetHeight:p,elemWidth:l,elemHeight:a,collisionPosition:i,collisionWidth:o,collisionHeight:s,offset:[c[0]+u[0],c[1]+u[1]],my:f.my,at:f.at,within:y,elem:r})}),f.using&&(t=function(t){var e=g.left-h.left,i=e+d-l,n=g.top-h.top,o=n+p-a,s={target:{element:v,left:g.left,top:g.top,width:d,height:p},element:{element:r,left:h.left,top:h.top,width:l,height:a},horizontal:i<0?"left":0<e?"right":"center",vertical:o<0?"top":0<n?"bottom":"middle"};d<l&&C(e+i)<d&&(s.horizontal="center"),p<a&&C(n+o)<p&&(s.vertical="middle"),W(C(e),C(i))>W(C(n),C(o))?s.important="horizontal":s.important="vertical",f.using.call(this,t,s)}),r.offset(x.extend(h,{using:t}))})):h.apply(this,arguments)},x.ui.position={fit:{left:function(t,e){var i,n=e.within,o=n.isWindow?n.scrollLeft:n.offset.left,n=n.width,s=t.left-e.collisionPosition.marginLeft,r=o-s,l=s+e.collisionWidth-n-o;e.collisionWidth>n?0<r&&l<=0?(i=t.left+r+e.collisionWidth-n-o,t.left+=r-i):t.left=!(0<l&&r<=0)&&l<r?o+n-e.collisionWidth:o:0<r?t.left+=r:0<l?t.left-=l:t.left=W(t.left-s,t.left)},top:function(t,e){var i,n=e.within,n=n.isWindow?n.scrollTop:n.offset.top,o=e.within.height,s=t.top-e.collisionPosition.marginTop,r=n-s,l=s+e.collisionHeight-o-n;e.collisionHeight>o?0<r&&l<=0?(i=t.top+r+e.collisionHeight-o-n,t.top+=r-i):t.top=!(0<l&&r<=0)&&l<r?n+o-e.collisionHeight:n:0<r?t.top+=r:0<l?t.top-=l:t.top=W(t.top-s,t.top)}},flip:{left:function(t,e){var i=e.within,n=i.offset.left+i.scrollLeft,o=i.width,i=i.isWindow?i.scrollLeft:i.offset.left,s=t.left-e.collisionPosition.marginLeft,r=s-i,s=s+e.collisionWidth-o-i,l="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,a="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,h=-2*e.offset[0];r<0?((o=t.left+l+a+h+e.collisionWidth-o-n)<0||o<C(r))&&(t.left+=l+a+h):0<s&&(0<(n=t.left-e.collisionPosition.marginLeft+l+a+h-i)||C(n)<s)&&(t.left+=l+a+h)},top:function(t,e){var i=e.within,n=i.offset.top+i.scrollTop,o=i.height,i=i.isWindow?i.scrollTop:i.offset.top,s=t.top-e.collisionPosition.marginTop,r=s-i,s=s+e.collisionHeight-o-i,l="top"===e.my[1]?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,a="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,h=-2*e.offset[1];r<0?((o=t.top+l+a+h+e.collisionHeight-o-n)<0||o<C(r))&&(t.top+=l+a+h):0<s&&(0<(n=t.top-e.collisionPosition.marginTop+l+a+h-i)||C(n)<s)&&(t.top+=l+a+h)}},flipfit:{left:function(){x.ui.position.flip.left.apply(this,arguments),x.ui.position.fit.left.apply(this,arguments)},top:function(){x.ui.position.flip.top.apply(this,arguments),x.ui.position.fit.top.apply(this,arguments)}}},x.ui.safeActiveElement=function(e){var i;try{i=e.activeElement}catch(t){i=e.body}return i=(i=i||e.body).nodeName?i:e.body},x.ui.safeBlur=function(t){t&&"body"!==t.nodeName.toLowerCase()&&x(t).trigger("blur")},
/*!
 * jQuery UI Scroll Parent 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
x.fn.scrollParent=function(t){var e=this.css("position"),i="absolute"===e,n=t?/(auto|scroll|hidden)/:/(auto|scroll)/,t=this.parents().filter(function(){var t=x(this);return(!i||"static"!==t.css("position"))&&n.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==e&&t.length?t:x(this[0].ownerDocument||document)},
/*!
 * jQuery UI Tabbable 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
x.extend(x.expr.pseudos,{tabbable:function(t){var e=x.attr(t,"tabindex"),i=null!=e;return(!i||0<=e)&&x.ui.focusable(t,i)}}),
/*!
 * jQuery UI Unique ID 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
x.fn.extend({uniqueId:(u=0,function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++u)})}),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&x(this).removeAttr("id")})}});
/*!
 * jQuery UI Widget 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
var f,c=0,d=Array.prototype.hasOwnProperty,p=Array.prototype.slice;x.cleanData=(f=x.cleanData,function(t){for(var e,i,n=0;null!=(i=t[n]);n++)(e=x._data(i,"events"))&&e.remove&&x(i).triggerHandler("remove");f(t)}),x.widget=function(t,i,e){var n,o,s,r={},l=t.split(".")[0],a=l+"-"+(t=t.split(".")[1]);return e||(e=i,i=x.Widget),Array.isArray(e)&&(e=x.extend.apply(null,[{}].concat(e))),x.expr.pseudos[a.toLowerCase()]=function(t){return!!x.data(t,a)},x[l]=x[l]||{},n=x[l][t],o=x[l][t]=function(t,e){if(!this||!this._createWidget)return new o(t,e);arguments.length&&this._createWidget(t,e)},x.extend(o,n,{version:e.version,_proto:x.extend({},e),_childConstructors:[]}),(s=new i).options=x.widget.extend({},s.options),x.each(e,function(e,n){function o(){return i.prototype[e].apply(this,arguments)}function s(t){return i.prototype[e].apply(this,t)}r[e]="function"!=typeof n?n:function(){var t,e=this._super,i=this._superApply;return this._super=o,this._superApply=s,t=n.apply(this,arguments),this._super=e,this._superApply=i,t}}),o.prototype=x.widget.extend(s,{widgetEventPrefix:n&&s.widgetEventPrefix||t},r,{constructor:o,namespace:l,widgetName:t,widgetFullName:a}),n?(x.each(n._childConstructors,function(t,e){var i=e.prototype;x.widget(i.namespace+"."+i.widgetName,o,e._proto)}),delete n._childConstructors):i._childConstructors.push(o),x.widget.bridge(t,o),o},x.widget.extend=function(t){for(var e,i,n=p.call(arguments,1),o=0,s=n.length;o<s;o++)for(e in n[o])i=n[o][e],d.call(n[o],e)&&void 0!==i&&(x.isPlainObject(i)?t[e]=x.isPlainObject(t[e])?x.widget.extend({},t[e],i):x.widget.extend({},i):t[e]=i);return t},x.widget.bridge=function(s,e){var r=e.prototype.widgetFullName||s;x.fn[s]=function(i){var t="string"==typeof i,n=p.call(arguments,1),o=this;return t?this.length||"instance"!==i?this.each(function(){var t,e=x.data(this,r);return"instance"===i?(o=e,!1):e?"function"!=typeof e[i]||"_"===i.charAt(0)?x.error("no such method '"+i+"' for "+s+" widget instance"):(t=e[i].apply(e,n))!==e&&void 0!==t?(o=t&&t.jquery?o.pushStack(t.get()):t,!1):void 0:x.error("cannot call methods on "+s+" prior to initialization; attempted to call method '"+i+"'")}):o=void 0:(n.length&&(i=x.widget.extend.apply(null,[i].concat(n))),this.each(function(){var t=x.data(this,r);t?(t.option(i||{}),t._init&&t._init()):x.data(this,r,new e(i,this))})),o}},x.Widget=function(){},x.Widget._childConstructors=[],x.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(t,e){e=x(e||this.defaultElement||this)[0],this.element=x(e),this.uuid=c++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=x(),this.hoverable=x(),this.focusable=x(),this.classesElementLookup={},e!==this&&(x.data(e,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===e&&this.destroy()}}),this.document=x(e.style?e.ownerDocument:e.document||e),this.window=x(this.document[0].defaultView||this.document[0].parentWindow)),this.options=x.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:x.noop,_create:x.noop,_init:x.noop,destroy:function(){var i=this;this._destroy(),x.each(this.classesElementLookup,function(t,e){i._removeClass(e,t)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:x.noop,widget:function(){return this.element},option:function(t,e){var i,n,o,s=t;if(0===arguments.length)return x.widget.extend({},this.options);if("string"==typeof t)if(s={},t=(i=t.split(".")).shift(),i.length){for(n=s[t]=x.widget.extend({},this.options[t]),o=0;o<i.length-1;o++)n[i[o]]=n[i[o]]||{},n=n[i[o]];if(t=i.pop(),1===arguments.length)return void 0===n[t]?null:n[t];n[t]=e}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];s[t]=e}return this._setOptions(s),this},_setOptions:function(t){for(var e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(t){var e,i,n;for(e in t)n=this.classesElementLookup[e],t[e]!==this.options.classes[e]&&n&&n.length&&(i=x(n.get()),this._removeClass(n,e),i.addClass(this._classes({element:i,keys:e,classes:t,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(o){var s=[],r=this;function t(t,e){for(var i,n=0;n<t.length;n++)i=r.classesElementLookup[t[n]]||x(),i=o.add?(function(){var i=[];o.element.each(function(t,e){x.map(r.classesElementLookup,function(t){return t}).some(function(t){return t.is(e)})||i.push(e)}),r._on(x(i),{remove:"_untrackClassesElement"})}(),x(x.uniqueSort(i.get().concat(o.element.get())))):x(i.not(o.element).get()),r.classesElementLookup[t[n]]=i,s.push(t[n]),e&&o.classes[t[n]]&&s.push(o.classes[t[n]])}return(o=x.extend({element:this.element,classes:this.options.classes||{}},o)).keys&&t(o.keys.match(/\S+/g)||[],!0),o.extra&&t(o.extra.match(/\S+/g)||[]),s.join(" ")},_untrackClassesElement:function(i){var n=this;x.each(n.classesElementLookup,function(t,e){-1!==x.inArray(i.target,e)&&(n.classesElementLookup[t]=x(e.not(i.target).get()))}),this._off(x(i.target))},_removeClass:function(t,e,i){return this._toggleClass(t,e,i,!1)},_addClass:function(t,e,i){return this._toggleClass(t,e,i,!0)},_toggleClass:function(t,e,i,n){var o="string"==typeof t||null===t,e={extra:o?e:i,keys:o?t:e,element:o?this.element:t,add:n="boolean"==typeof n?n:i};return e.element.toggleClass(this._classes(e),n),this},_on:function(o,s,t){var r,l=this;"boolean"!=typeof o&&(t=s,s=o,o=!1),t?(s=r=x(s),this.bindings=this.bindings.add(s)):(t=s,s=this.element,r=this.widget()),x.each(t,function(t,e){function i(){if(o||!0!==l.options.disabled&&!x(this).hasClass("ui-state-disabled"))return("string"==typeof e?l[e]:e).apply(l,arguments)}"string"!=typeof e&&(i.guid=e.guid=e.guid||i.guid||x.guid++);var t=t.match(/^([\w:-]*)\s*(.*)$/),n=t[1]+l.eventNamespace,t=t[2];t?r.on(n,t,i):s.on(n,i)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(e),this.bindings=x(this.bindings.not(t).get()),this.focusable=x(this.focusable.not(t).get()),this.hoverable=x(this.hoverable.not(t).get())},_delay:function(t,e){var i=this;return setTimeout(function(){return("string"==typeof t?i[t]:t).apply(i,arguments)},e||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(x(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(x(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(x(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(x(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,e,i){var n,o,s=this.options[t];if(i=i||{},(e=x.Event(e)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),e.target=this.element[0],o=e.originalEvent)for(n in o)n in e||(e[n]=o[n]);return this.element.trigger(e,i),!("function"==typeof s&&!1===s.apply(this.element[0],[e].concat(i))||e.isDefaultPrevented())}},x.each({show:"fadeIn",hide:"fadeOut"},function(s,r){x.Widget.prototype["_"+s]=function(e,t,i){var n,o=(t="string"==typeof t?{effect:t}:t)?!0!==t&&"number"!=typeof t&&t.effect||r:s;"number"==typeof(t=t||{})?t={duration:t}:!0===t&&(t={}),n=!x.isEmptyObject(t),t.complete=i,t.delay&&e.delay(t.delay),n&&x.effects&&x.effects.effect[o]?e[s](t):o!==s&&e[o]?e[o](t.duration,t.easing,i):e.queue(function(t){x(this)[s](),i&&i.call(e[0]),t()})}})});
/*!
 * jQuery UI Controlgroup 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery","./core"],t):t(jQuery)}(function(r){"use strict";var s=/ui-corner-([a-z]){2,6}/g;r.widget("ui.controlgroup",{version:"1.13.2",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var s=this,l=[];r.each(this.options.items,function(n,t){var e,o={};t&&("controlgroupLabel"===n?((e=s.element.find(t)).each(function(){var t=r(this);t.children(".ui-controlgroup-label-contents").length||t.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")}),s._addClass(e,null,"ui-widget ui-widget-content ui-state-default"),l=l.concat(e.get())):r.fn[n]&&(o=s["_"+n+"Options"]?s["_"+n+"Options"]("middle"):{classes:{}},s.element.find(t).each(function(){var t=r(this),e=t[n]("instance"),i=r.widget.extend({},o);"button"===n&&t.parent(".ui-spinner").length||((e=e||t[n]()[n]("instance"))&&(i.classes=s._resolveClassesValues(i.classes,e)),t[n](i),i=t[n]("widget"),r.data(i[0],"ui-controlgroup-data",e||t[n]("instance")),l.push(i[0]))})))}),this.childWidgets=r(r.uniqueSort(l)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(e){this.childWidgets.each(function(){var t=r(this).data("ui-controlgroup-data");t&&t[e]&&t[e]()})},_updateCornerClass:function(t,e){e=this._buildSimpleOptions(e,"label").classes.label;this._removeClass(t,null,"ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all"),this._addClass(t,null,e)},_buildSimpleOptions:function(t,e){var i="vertical"===this.options.direction,n={classes:{}};return n.classes[e]={middle:"",first:"ui-corner-"+(i?"top":"left"),last:"ui-corner-"+(i?"bottom":"right"),only:"ui-corner-all"}[t],n},_spinnerOptions:function(t){t=this._buildSimpleOptions(t,"ui-spinner");return t.classes["ui-spinner-up"]="",t.classes["ui-spinner-down"]="",t},_buttonOptions:function(t){return this._buildSimpleOptions(t,"ui-button")},_checkboxradioOptions:function(t){return this._buildSimpleOptions(t,"ui-checkboxradio-label")},_selectmenuOptions:function(t){var e="vertical"===this.options.direction;return{width:e&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(e?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(e?"top":"left")},last:{"ui-selectmenu-button-open":e?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(e?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[t]}},_resolveClassesValues:function(i,n){var o={};return r.each(i,function(t){var e=n.options.classes[t]||"",e=String.prototype.trim.call(e.replace(s,""));o[t]=(e+" "+i[t]).replace(/\s+/g," ")}),o},_setOption:function(t,e){"direction"===t&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(t,e),"disabled"===t?this._callChildMethod(e?"disable":"enable"):this.refresh()},refresh:function(){var o,s=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),o=this.childWidgets,(o=this.options.onlyVisible?o.filter(":visible"):o).length&&(r.each(["first","last"],function(t,e){var i,n=o[e]().data("ui-controlgroup-data");n&&s["_"+n.widgetName+"Options"]?((i=s["_"+n.widgetName+"Options"](1===o.length?"only":e)).classes=s._resolveClassesValues(i.classes,n),n.element[n.widgetName](i)):s._updateCornerClass(o[e](),e)}),this._callChildMethod("refresh"))}})});
/*!
 * jQuery UI Checkboxradio 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./core"],e):e(jQuery)}(function(t){"use strict";return t.widget("ui.checkboxradio",[t.ui.formResetMixin,{version:"1.13.2",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var e,i=this._super()||{};return this._readType(),e=this.element.labels(),this.label=t(e[e.length-1]),this.label.length||t.error("No label found for checkboxradio widget"),this.originalLabel="",(e=this.label.contents().not(this.element[0])).length&&(this.originalLabel+=e.clone().wrapAll("<div></div>").parent().html()),this.originalLabel&&(i.label=this.originalLabel),null!=(e=this.element[0].disabled)&&(i.disabled=e),i},_create:function(){var e=this.element[0].checked;this._bindFormResetHandler(),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),"radio"===this.type&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),e&&this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var e=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,"input"===e&&/radio|checkbox/.test(this.type)||t.error("Can't create checkboxradio on element.nodeName="+e+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var e=this.element[0].name,i="input[name='"+t.escapeSelector(e)+"']";return e?(this.form.length?t(this.form[0].elements).filter(i):t(i).filter(function(){return 0===t(this)._form().length})).not(this.element):t([])},_toggleClasses:function(){var e=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",e),this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",e)._toggleClass(this.icon,null,"ui-icon-blank",!e),"radio"===this.type&&this._getRadioGroup().each(function(){var e=t(this).checkboxradio("instance");e&&e._removeClass(e.label,"ui-checkboxradio-checked","ui-state-active")})},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(e,i){"label"===e&&!i||(this._super(e,i),"disabled"===e?(this._toggleClass(this.label,null,"ui-state-disabled",i),this.element[0].disabled=i):this.refresh())},_updateIcon:function(e){var i="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=t("<span>"),this.iconSpace=t("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),"checkbox"===this.type?(i+=e?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,e?"ui-icon-blank":"ui-icon-check")):i+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",i),e||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):void 0!==this.icon&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var e=this.label.contents().not(this.element[0]);this.icon&&(e=e.not(this.icon[0])),(e=this.iconSpace?e.not(this.iconSpace[0]):e).remove(),this.label.append(this.options.label)},refresh:function(){var e=this.element[0].checked,i=this.element[0].disabled;this._updateIcon(e),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",e),null!==this.options.label&&this._updateLabel(),i!==this.options.disabled&&this._setOptions({disabled:i})}}]),t.ui.checkboxradio});
/*!
 * jQuery UI Button 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery","./controlgroup","./checkboxradio","./core"],t):t(jQuery)}(function(e){"use strict";var h;return e.widget("ui.button",{version:"1.13.2",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var t,i=this._super()||{};return this.isInput=this.element.is("input"),null!=(t=this.element[0].disabled)&&(i.disabled=t),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(i.label=this.originalLabel),i},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(t){t.keyCode===e.ui.keyCode.SPACE&&(t.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(t,i){var t="iconPosition"!==t,o=t?this.options.iconPosition:i,s="top"===o||"bottom"===o;this.icon?t&&this._removeClass(this.icon,null,this.options.icon):(this.icon=e("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),t&&this._addClass(this.icon,null,i),this._attachIcon(o),s?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=e("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(o))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(t){this.icon[/^(?:end|bottom)/.test(t)?"before":"after"](this.iconSpace)},_attachIcon:function(t){this.element[/^(?:end|bottom)/.test(t)?"append":"prepend"](this.icon)},_setOptions:function(t){var i=(void 0===t.showLabel?this.options:t).showLabel,o=(void 0===t.icon?this.options:t).icon;i||o||(t.showLabel=!0),this._super(t)},_setOption:function(t,i){"icon"===t&&(i?this._updateIcon(t,i):this.icon&&(this.icon.remove(),this.iconSpace)&&this.iconSpace.remove()),"iconPosition"===t&&this._updateIcon(t,i),"showLabel"===t&&(this._toggleClass("ui-button-icon-only",null,!i),this._updateTooltip()),"label"===t&&(this.isInput?this.element.val(i):(this.element.html(i),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(t,i),"disabled"===t&&(this._toggleClass(null,"ui-state-disabled",i),this.element[0].disabled=i)&&this.element.trigger("blur")},refresh:function(){var t=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOptions({disabled:t}),this._updateTooltip()}}),!1!==e.uiBackCompat&&(e.widget("ui.button",e.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"),this._super()},_setOption:function(t,i){"text"===t?this._super("showLabel",i):("showLabel"===t&&(this.options.text=i),"icon"===t&&(this.options.icons.primary=i),"icons"===t&&(i.primary?(this._super("icon",i.primary),this._super("iconPosition","beginning")):i.secondary&&(this._super("icon",i.secondary),this._super("iconPosition","end"))),this._superApply(arguments))}}),e.fn.button=(h=e.fn.button,function(o){var t="string"==typeof o,s=Array.prototype.slice.call(arguments,1),n=this;return t?this.length||"instance"!==o?this.each(function(){var t,i=e(this).attr("type"),i=e.data(this,"ui-"+("checkbox"!==i&&"radio"!==i?"button":"checkboxradio"));return"instance"===o?(n=i,!1):i?"function"!=typeof i[o]||"_"===o.charAt(0)?e.error("no such method '"+o+"' for button widget instance"):(t=i[o].apply(i,s))!==i&&void 0!==t?(n=t&&t.jquery?n.pushStack(t.get()):t,!1):void 0:e.error("cannot call methods on button prior to initialization; attempted to call method '"+o+"'")}):n=void 0:(s.length&&(o=e.widget.extend.apply(null,[o].concat(s))),this.each(function(){var t=e(this).attr("type"),t="checkbox"!==t&&"radio"!==t?"button":"checkboxradio",i=e.data(this,"ui-"+t);i?(i.option(o||{}),i._init&&i._init()):"button"==t?h.call(e(this),o):e(this).checkboxradio(e.extend({icon:!1},o))})),n}),e.fn.buttonset=function(){return e.ui.controlgroup||e.error("Controlgroup widget missing"),"option"===arguments[0]&&"items"===arguments[1]&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):"option"===arguments[0]&&"items"===arguments[1]?this.controlgroup.apply(this,[arguments[0],"items.button"]):("object"==typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))}),e.ui.button});
/*!
 * jQuery UI Tooltip 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery","./core"],t):t(jQuery)}(function(r){"use strict";return r.widget("ui.tooltip",{version:"1.13.2",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var t=r(this).attr("title");return r("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,track:!1,close:null,open:null},_addDescribedBy:function(t,i){var e=(t.attr("aria-describedby")||"").split(/\s+/);e.push(i),t.data("ui-tooltip-id",i).attr("aria-describedby",String.prototype.trim.call(e.join(" ")))},_removeDescribedBy:function(t){var i=t.data("ui-tooltip-id"),e=(t.attr("aria-describedby")||"").split(/\s+/),i=r.inArray(i,e);-1!==i&&e.splice(i,1),t.removeData("ui-tooltip-id"),(e=String.prototype.trim.call(e.join(" ")))?t.attr("aria-describedby",e):t.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.liveRegion=r("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this.disabledTitles=r([])},_setOption:function(t,i){var e=this;this._super(t,i),"content"===t&&r.each(this.tooltips,function(t,i){e._updateContent(i.element)})},_setOptionDisabled:function(t){this[t?"_disable":"_enable"]()},_disable:function(){var o=this;r.each(this.tooltips,function(t,i){var e=r.Event("blur");e.target=e.currentTarget=i.element[0],o.close(e,!0)}),this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter(function(){var t=r(this);if(t.is("[title]"))return t.data("ui-tooltip-title",t.attr("title")).removeAttr("title")}))},_enable:function(){this.disabledTitles.each(function(){var t=r(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))}),this.disabledTitles=r([])},open:function(t){var e=this,i=r(t?t.target:this.element).closest(this.options.items);i.length&&!i.data("ui-tooltip-id")&&(i.attr("title")&&i.data("ui-tooltip-title",i.attr("title")),i.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&i.parents().each(function(){var t,i=r(this);i.data("ui-tooltip-open")&&((t=r.Event("blur")).target=t.currentTarget=this,e.close(t,!0)),i.attr("title")&&(i.uniqueId(),e.parents[this.id]={element:this,title:i.attr("title")},i.attr("title",""))}),this._registerCloseHandlers(t,i),this._updateContent(i,t))},_updateContent:function(i,e){var t=this.options.content,o=this,n=e?e.type:null;if("string"==typeof t||t.nodeType||t.jquery)return this._open(e,i,t);(t=t.call(i[0],function(t){o._delay(function(){i.data("ui-tooltip-open")&&(e&&(e.type=n),this._open(e,i,t))})}))&&this._open(e,i,t)},_open:function(t,i,e){var o,n,s,l=r.extend({},this.options.position);function a(t){l.of=t,o.is(":hidden")||o.position(l)}e&&((s=this._find(i))?s.tooltip.find(".ui-tooltip-content").html(e):(i.is("[title]")&&(t&&"mouseover"===t.type?i.attr("title",""):i.removeAttr("title")),s=this._tooltip(i),o=s.tooltip,this._addDescribedBy(i,o.attr("id")),o.find(".ui-tooltip-content").html(e),this.liveRegion.children().hide(),(s=r("<div>").html(o.find(".ui-tooltip-content").html())).removeAttr("name").find("[name]").removeAttr("name"),s.removeAttr("id").find("[id]").removeAttr("id"),s.appendTo(this.liveRegion),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:a}),a(t)):o.position(r.extend({of:i},this.options.position)),o.hide(),this._show(o,this.options.show),this.options.track&&this.options.show&&this.options.show.delay&&(n=this.delayedShow=setInterval(function(){o.is(":visible")&&(a(l.of),clearInterval(n))},13)),this._trigger("open",t,{tooltip:o})))},_registerCloseHandlers:function(t,i){var e={keyup:function(t){t.keyCode===r.ui.keyCode.ESCAPE&&((t=r.Event(t)).currentTarget=i[0],this.close(t,!0))}};i[0]!==this.element[0]&&(e.remove=function(){var t=this._find(i);t&&this._removeTooltip(t.tooltip)}),t&&"mouseover"!==t.type||(e.mouseleave="close"),t&&"focusin"!==t.type||(e.focusout="close"),this._on(!0,i,e)},close:function(t){var i,e=this,o=r(t?t.currentTarget:this.element),n=this._find(o);n?(i=n.tooltip,n.closing||(clearInterval(this.delayedShow),o.data("ui-tooltip-title")&&!o.attr("title")&&o.attr("title",o.data("ui-tooltip-title")),this._removeDescribedBy(o),n.hiding=!0,i.stop(!0),this._hide(i,this.options.hide,function(){e._removeTooltip(r(this))}),o.removeData("ui-tooltip-open"),this._off(o,"mouseleave focusout keyup"),o[0]!==this.element[0]&&this._off(o,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&r.each(this.parents,function(t,i){r(i.element).attr("title",i.title),delete e.parents[t]}),n.closing=!0,this._trigger("close",t,{tooltip:i}),n.hiding)||(n.closing=!1)):o.removeData("ui-tooltip-open")},_tooltip:function(t){var i=r("<div>").attr("role","tooltip"),e=r("<div>").appendTo(i),o=i.uniqueId().attr("id");return this._addClass(e,"ui-tooltip-content"),this._addClass(i,"ui-tooltip","ui-widget ui-widget-content"),i.appendTo(this._appendTo(t)),this.tooltips[o]={element:t,tooltip:i}},_find:function(t){t=t.data("ui-tooltip-id");return t?this.tooltips[t]:null},_removeTooltip:function(t){clearInterval(this.delayedShow),t.remove(),delete this.tooltips[t.attr("id")]},_appendTo:function(t){t=t.closest(".ui-front, dialog");return t=t.length?t:this.document[0].body},_destroy:function(){var o=this;r.each(this.tooltips,function(t,i){var e=r.Event("blur"),i=i.element;e.target=e.currentTarget=i[0],o.close(e,!0),r("#"+t).remove(),i.data("ui-tooltip-title")&&(i.attr("title")||i.attr("title",i.data("ui-tooltip-title")),i.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}}),!1!==r.uiBackCompat&&r.widget("ui.tooltip",r.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var t=this._superApply(arguments);return this.options.tooltipClass&&t.tooltip.addClass(this.options.tooltipClass),t}}),r.ui.tooltip});
/*!
 * jQuery UI Datepicker 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./core"],e):e(jQuery)}(function(V){"use strict";var n;function e(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:"",selectMonthLabel:"Select month",selectYearLabel:"Select year"},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,onUpdateDatepicker:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},V.extend(this._defaults,this.regional[""]),this.regional.en=V.extend(!0,{},this.regional[""]),this.regional["en-US"]=V.extend(!0,{},this.regional.en),this.dpDiv=a(V("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function a(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.on("mouseout",t,function(){V(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&V(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&V(this).removeClass("ui-datepicker-next-hover")}).on("mouseover",t,d)}function d(){V.datepicker._isDisabledDatepicker((n.inline?n.dpDiv.parent():n.input)[0])||(V(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),V(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&V(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&V(this).addClass("ui-datepicker-next-hover"))}function c(e,t){for(var a in V.extend(e,t),t)null==t[a]&&(e[a]=t[a])}return V.extend(V.ui,{datepicker:{version:"1.13.2"}}),V.extend(e.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return c(this._defaults,e||{}),this},_attachDatepicker:function(e,t){var a,i=e.nodeName.toLowerCase(),s="div"===i||"span"===i;e.id||(this.uuid+=1,e.id="dp"+this.uuid),(a=this._newInst(V(e),s)).settings=V.extend({},t||{}),"input"===i?this._connectDatepicker(e,a):s&&this._inlineDatepicker(e,a)},_newInst:function(e,t){return{id:e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?a(V("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,t){var a=V(e);t.append=V([]),t.trigger=V([]),a.hasClass(this.markerClassName)||(this._attachments(a,t),a.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(t),V.data(e,"datepicker",t),t.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,t){var a,i=this._get(t,"appendText"),s=this._get(t,"isRTL");t.append&&t.append.remove(),i&&(t.append=V("<span>").addClass(this._appendClass).text(i),e[s?"before":"after"](t.append)),e.off("focus",this._showDatepicker),t.trigger&&t.trigger.remove(),"focus"!==(i=this._get(t,"showOn"))&&"both"!==i||e.on("focus",this._showDatepicker),"button"!==i&&"both"!==i||(i=this._get(t,"buttonText"),a=this._get(t,"buttonImage"),this._get(t,"buttonImageOnly")?t.trigger=V("<img>").addClass(this._triggerClass).attr({src:a,alt:i,title:i}):(t.trigger=V("<button type='button'>").addClass(this._triggerClass),a?t.trigger.html(V("<img>").attr({src:a,alt:i,title:i})):t.trigger.text(i)),e[s?"before":"after"](t.trigger),t.trigger.on("click",function(){return V.datepicker._datepickerShowing&&V.datepicker._lastInput===e[0]?V.datepicker._hideDatepicker():(V.datepicker._datepickerShowing&&V.datepicker._lastInput!==e[0]&&V.datepicker._hideDatepicker(),V.datepicker._showDatepicker(e[0])),!1}))},_autoSize:function(e){var t,a,i,s,r,n;this._get(e,"autoSize")&&!e.inline&&(r=new Date(2009,11,20),(n=this._get(e,"dateFormat")).match(/[DM]/)&&(r.setMonth((t=function(e){for(s=i=a=0;s<e.length;s++)e[s].length>a&&(a=e[s].length,i=s);return i})(this._get(e,n.match(/MM/)?"monthNames":"monthNamesShort"))),r.setDate(t(this._get(e,n.match(/DD/)?"dayNames":"dayNamesShort"))+20-r.getDay())),e.input.attr("size",this._formatDate(e,r).length))},_inlineDatepicker:function(e,t){var a=V(e);a.hasClass(this.markerClassName)||(a.addClass(this.markerClassName).append(t.dpDiv),V.data(e,"datepicker",t),this._setDate(t,this._getDefaultDate(t),!0),this._updateDatepicker(t),this._updateAlternate(t),t.settings.disabled&&this._disableDatepicker(e),t.dpDiv.css("display","block"))},_dialogDatepicker:function(e,t,a,i,s){var r,n=this._dialogInst;return n||(this.uuid+=1,r="dp"+this.uuid,this._dialogInput=V("<input type='text' id='"+r+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),V("body").append(this._dialogInput),(n=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},V.data(this._dialogInput[0],"datepicker",n)),c(n.settings,i||{}),t=t&&t.constructor===Date?this._formatDate(n,t):t,this._dialogInput.val(t),this._pos=s?s.length?s:[s.pageX,s.pageY]:null,this._pos||(r=document.documentElement.clientWidth,i=document.documentElement.clientHeight,t=document.documentElement.scrollLeft||document.body.scrollLeft,s=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[r/2-100+t,i/2-150+s]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),n.settings.onSelect=a,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),V.blockUI&&V.blockUI(this.dpDiv),V.data(this._dialogInput[0],"datepicker",n),this},_destroyDatepicker:function(e){var t,a=V(e),i=V.data(e,"datepicker");a.hasClass(this.markerClassName)&&(t=e.nodeName.toLowerCase(),V.removeData(e,"datepicker"),"input"===t?(i.append.remove(),i.trigger.remove(),a.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):"div"!==t&&"span"!==t||a.removeClass(this.markerClassName).empty(),n===i)&&(n=null,this._curInst=null)},_enableDatepicker:function(t){var e,a=V(t),i=V.data(t,"datepicker");a.hasClass(this.markerClassName)&&("input"===(e=t.nodeName.toLowerCase())?(t.disabled=!1,i.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==e&&"span"!==e||((i=a.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=V.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var e,a=V(t),i=V.data(t,"datepicker");a.hasClass(this.markerClassName)&&("input"===(e=t.nodeName.toLowerCase())?(t.disabled=!0,i.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==e&&"span"!==e||((i=a.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=V.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(e)for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(e){try{return V.data(e,"datepicker")}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,a){var i,s,r=this._getInst(e);if(2===arguments.length&&"string"==typeof t)return"defaults"===t?V.extend({},V.datepicker._defaults):r?"all"===t?V.extend({},r.settings):this._get(r,t):null;i=t||{},"string"==typeof t&&((i={})[t]=a),r&&(this._curInst===r&&this._hideDatepicker(),t=this._getDateDatepicker(e,!0),a=this._getMinMaxDate(r,"min"),s=this._getMinMaxDate(r,"max"),c(r.settings,i),null!==a&&void 0!==i.dateFormat&&void 0===i.minDate&&(r.settings.minDate=this._formatDate(r,a)),null!==s&&void 0!==i.dateFormat&&void 0===i.maxDate&&(r.settings.maxDate=this._formatDate(r,s)),"disabled"in i&&(i.disabled?this._disableDatepicker(e):this._enableDatepicker(e)),this._attachments(V(e),r),this._autoSize(r),this._setDate(r,t),this._updateAlternate(r),this._updateDatepicker(r))},_changeDatepicker:function(e,t,a){this._optionDatepicker(e,t,a)},_refreshDatepicker:function(e){e=this._getInst(e);e&&this._updateDatepicker(e)},_setDateDatepicker:function(e,t){e=this._getInst(e);e&&(this._setDate(e,t),this._updateDatepicker(e),this._updateAlternate(e))},_getDateDatepicker:function(e,t){e=this._getInst(e);return e&&!e.inline&&this._setDateFromField(e,t),e?this._getDate(e):null},_doKeyDown:function(e){var t,a,i=V.datepicker._getInst(e.target),s=!0,r=i.dpDiv.is(".ui-datepicker-rtl");if(i._keyEvent=!0,V.datepicker._datepickerShowing)switch(e.keyCode){case 9:V.datepicker._hideDatepicker(),s=!1;break;case 13:return(a=V("td."+V.datepicker._dayOverClass+":not(."+V.datepicker._currentClass+")",i.dpDiv))[0]&&V.datepicker._selectDay(e.target,i.selectedMonth,i.selectedYear,a[0]),(a=V.datepicker._get(i,"onSelect"))?(t=V.datepicker._formatDate(i),a.apply(i.input?i.input[0]:null,[t,i])):V.datepicker._hideDatepicker(),!1;case 27:V.datepicker._hideDatepicker();break;case 33:V.datepicker._adjustDate(e.target,e.ctrlKey?-V.datepicker._get(i,"stepBigMonths"):-V.datepicker._get(i,"stepMonths"),"M");break;case 34:V.datepicker._adjustDate(e.target,e.ctrlKey?+V.datepicker._get(i,"stepBigMonths"):+V.datepicker._get(i,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&V.datepicker._clearDate(e.target),s=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&V.datepicker._gotoToday(e.target),s=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&V.datepicker._adjustDate(e.target,r?1:-1,"D"),s=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&V.datepicker._adjustDate(e.target,e.ctrlKey?-V.datepicker._get(i,"stepBigMonths"):-V.datepicker._get(i,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&V.datepicker._adjustDate(e.target,-7,"D"),s=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&V.datepicker._adjustDate(e.target,r?-1:1,"D"),s=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&V.datepicker._adjustDate(e.target,e.ctrlKey?+V.datepicker._get(i,"stepBigMonths"):+V.datepicker._get(i,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&V.datepicker._adjustDate(e.target,7,"D"),s=e.ctrlKey||e.metaKey;break;default:s=!1}else 36===e.keyCode&&e.ctrlKey?V.datepicker._showDatepicker(this):s=!1;s&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t,a=V.datepicker._getInst(e.target);if(V.datepicker._get(a,"constrainInput"))return a=V.datepicker._possibleChars(V.datepicker._get(a,"dateFormat")),t=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||t<" "||!a||-1<a.indexOf(t)},_doKeyUp:function(e){e=V.datepicker._getInst(e.target);if(e.input.val()!==e.lastVal)try{V.datepicker.parseDate(V.datepicker._get(e,"dateFormat"),e.input?e.input.val():null,V.datepicker._getFormatConfig(e))&&(V.datepicker._setDateFromField(e),V.datepicker._updateAlternate(e),V.datepicker._updateDatepicker(e))}catch(e){}return!0},_showDatepicker:function(e){var t,a,i,s;"input"!==(e=e.target||e).nodeName.toLowerCase()&&(e=V("input",e.parentNode)[0]),V.datepicker._isDisabledDatepicker(e)||V.datepicker._lastInput===e||(s=V.datepicker._getInst(e),V.datepicker._curInst&&V.datepicker._curInst!==s&&(V.datepicker._curInst.dpDiv.stop(!0,!0),s)&&V.datepicker._datepickerShowing&&V.datepicker._hideDatepicker(V.datepicker._curInst.input[0]),!1===(a=(a=V.datepicker._get(s,"beforeShow"))?a.apply(e,[e,s]):{}))||(c(s.settings,a),s.lastVal=null,V.datepicker._lastInput=e,V.datepicker._setDateFromField(s),V.datepicker._inDialog&&(e.value=""),V.datepicker._pos||(V.datepicker._pos=V.datepicker._findPos(e),V.datepicker._pos[1]+=e.offsetHeight),t=!1,V(e).parents().each(function(){return!(t|="fixed"===V(this).css("position"))}),a={left:V.datepicker._pos[0],top:V.datepicker._pos[1]},V.datepicker._pos=null,s.dpDiv.empty(),s.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),V.datepicker._updateDatepicker(s),a=V.datepicker._checkOffset(s,a,t),s.dpDiv.css({position:V.datepicker._inDialog&&V.blockUI?"static":t?"fixed":"absolute",display:"none",left:a.left+"px",top:a.top+"px"}),s.inline)||(a=V.datepicker._get(s,"showAnim"),i=V.datepicker._get(s,"duration"),s.dpDiv.css("z-index",function(e){for(var t;e.length&&e[0]!==document;){if(("absolute"===(t=e.css("position"))||"relative"===t||"fixed"===t)&&(t=parseInt(e.css("zIndex"),10),!isNaN(t))&&0!==t)return t;e=e.parent()}return 0}(V(e))+1),V.datepicker._datepickerShowing=!0,V.effects&&V.effects.effect[a]?s.dpDiv.show(a,V.datepicker._get(s,"showOptions"),i):s.dpDiv[a||"show"](a?i:null),V.datepicker._shouldFocusInput(s)&&s.input.trigger("focus"),V.datepicker._curInst=s)},_updateDatepicker:function(e){this.maxRows=4,(n=e).dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var t,a=this._getNumberOfMonths(e),i=a[1],s=e.dpDiv.find("."+this._dayOverClass+" a"),r=V.datepicker._get(e,"onUpdateDatepicker");0<s.length&&d.apply(s.get(0)),e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),1<i&&e.dpDiv.addClass("ui-datepicker-multi-"+i).css("width",17*i+"em"),e.dpDiv[(1!==a[0]||1!==a[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===V.datepicker._curInst&&V.datepicker._datepickerShowing&&V.datepicker._shouldFocusInput(e)&&e.input.trigger("focus"),e.yearshtml&&(t=e.yearshtml,setTimeout(function(){t===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year").first().replaceWith(e.yearshtml),t=e.yearshtml=null},0)),r&&r.apply(e.input?e.input[0]:null,[e])},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(e,t,a){var i=e.dpDiv.outerWidth(),s=e.dpDiv.outerHeight(),r=e.input?e.input.outerWidth():0,n=e.input?e.input.outerHeight():0,d=document.documentElement.clientWidth+(a?0:V(document).scrollLeft()),c=document.documentElement.clientHeight+(a?0:V(document).scrollTop());return t.left-=this._get(e,"isRTL")?i-r:0,t.left-=a&&t.left===e.input.offset().left?V(document).scrollLeft():0,t.top-=a&&t.top===e.input.offset().top+n?V(document).scrollTop():0,t.left-=Math.min(t.left,t.left+i>d&&i<d?Math.abs(t.left+i-d):0),t.top-=Math.min(t.top,t.top+s>c&&s<c?Math.abs(s+n):0),t},_findPos:function(e){for(var t=this._getInst(e),a=this._get(t,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||V.expr.pseudos.hidden(e));)e=e[a?"previousSibling":"nextSibling"];return[(t=V(e).offset()).left,t.top]},_hideDatepicker:function(e){var t,a,i=this._curInst;!i||e&&i!==V.data(e,"datepicker")||this._datepickerShowing&&(e=this._get(i,"showAnim"),a=this._get(i,"duration"),t=function(){V.datepicker._tidyDialog(i)},V.effects&&(V.effects.effect[e]||V.effects[e])?i.dpDiv.hide(e,V.datepicker._get(i,"showOptions"),a,t):i.dpDiv["slideDown"===e?"slideUp":"fadeIn"===e?"fadeOut":"hide"](e?a:null,t),e||t(),this._datepickerShowing=!1,(a=this._get(i,"onClose"))&&a.apply(i.input?i.input[0]:null,[i.input?i.input.val():"",i]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),V.blockUI)&&(V.unblockUI(),V("body").append(this.dpDiv)),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(e){var t;V.datepicker._curInst&&(e=V(e.target),t=V.datepicker._getInst(e[0]),!(e[0].id===V.datepicker._mainDivId||0!==e.parents("#"+V.datepicker._mainDivId).length||e.hasClass(V.datepicker.markerClassName)||e.closest("."+V.datepicker._triggerClass).length||!V.datepicker._datepickerShowing||V.datepicker._inDialog&&V.blockUI)||e.hasClass(V.datepicker.markerClassName)&&V.datepicker._curInst!==t)&&V.datepicker._hideDatepicker()},_adjustDate:function(e,t,a){var e=V(e),i=this._getInst(e[0]);this._isDisabledDatepicker(e[0])||(this._adjustInstDate(i,t,a),this._updateDatepicker(i))},_gotoToday:function(e){var t,e=V(e),a=this._getInst(e[0]);this._get(a,"gotoCurrent")&&a.currentDay?(a.selectedDay=a.currentDay,a.drawMonth=a.selectedMonth=a.currentMonth,a.drawYear=a.selectedYear=a.currentYear):(t=new Date,a.selectedDay=t.getDate(),a.drawMonth=a.selectedMonth=t.getMonth(),a.drawYear=a.selectedYear=t.getFullYear()),this._notifyChange(a),this._adjustDate(e)},_selectMonthYear:function(e,t,a){var e=V(e),i=this._getInst(e[0]);i["selected"+("M"===a?"Month":"Year")]=i["draw"+("M"===a?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(i),this._adjustDate(e)},_selectDay:function(e,t,a,i){var s=V(e);V(i).hasClass(this._unselectableClass)||this._isDisabledDatepicker(s[0])||((s=this._getInst(s[0])).selectedDay=s.currentDay=parseInt(V("a",i).attr("data-date")),s.selectedMonth=s.currentMonth=t,s.selectedYear=s.currentYear=a,this._selectDate(e,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear)))},_clearDate:function(e){e=V(e);this._selectDate(e,"")},_selectDate:function(e,t){var a,e=V(e),e=this._getInst(e[0]);t=null!=t?t:this._formatDate(e),e.input&&e.input.val(t),this._updateAlternate(e),(a=this._get(e,"onSelect"))?a.apply(e.input?e.input[0]:null,[t,e]):e.input&&e.input.trigger("change"),e.inline?this._updateDatepicker(e):(this._hideDatepicker(),this._lastInput=e.input[0],"object"!=typeof e.input[0]&&e.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(e){var t,a,i=this._get(e,"altField");i&&(a=this._get(e,"altFormat")||this._get(e,"dateFormat"),t=this._getDate(e),a=this.formatDate(a,t,this._getFormatConfig(e)),V(document).find(i).val(a))},noWeekends:function(e){e=e.getDay();return[0<e&&e<6,""]},iso8601Week:function(e){var t,e=new Date(e.getTime());return e.setDate(e.getDate()+4-(e.getDay()||7)),t=e.getTime(),e.setMonth(0),e.setDate(1),Math.floor(Math.round((t-e)/864e5)/7)+1},parseDate:function(t,s,e){if(null==t||null==s)throw"Invalid arguments";if(""===(s="object"==typeof s?s.toString():s+""))return null;for(var a,i,r=0,n=(e?e.shortYearCutoff:null)||this._defaults.shortYearCutoff,n="string"!=typeof n?n:(new Date).getFullYear()%100+parseInt(n,10),d=(e?e.dayNamesShort:null)||this._defaults.dayNamesShort,c=(e?e.dayNames:null)||this._defaults.dayNames,o=(e?e.monthNamesShort:null)||this._defaults.monthNamesShort,l=(e?e.monthNames:null)||this._defaults.monthNames,h=-1,u=-1,p=-1,g=-1,_=!1,f=function(e){e=y+1<t.length&&t.charAt(y+1)===e;return e&&y++,e},k=function(e){var t=f(e),t="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,e=new RegExp("^\\d{"+("y"===e?t:1)+","+t+"}"),t=s.substring(r).match(e);if(t)return r+=t[0].length,parseInt(t[0],10);throw"Missing number at position "+r},D=function(e,t,a){var i=-1,e=V.map(f(e)?a:t,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(V.each(e,function(e,t){var a=t[1];if(s.substr(r,a.length).toLowerCase()===a.toLowerCase())return i=t[0],r+=a.length,!1}),-1!==i)return i+1;throw"Unknown name at position "+r},m=function(){if(s.charAt(r)!==t.charAt(y))throw"Unexpected literal at position "+r;r++},y=0;y<t.length;y++)if(_)"'"!==t.charAt(y)||f("'")?m():_=!1;else switch(t.charAt(y)){case"d":p=k("d");break;case"D":D("D",d,c);break;case"o":g=k("o");break;case"m":u=k("m");break;case"M":u=D("M",o,l);break;case"y":h=k("y");break;case"@":h=(i=new Date(k("@"))).getFullYear(),u=i.getMonth()+1,p=i.getDate();break;case"!":h=(i=new Date((k("!")-this._ticksTo1970)/1e4)).getFullYear(),u=i.getMonth()+1,p=i.getDate();break;case"'":f("'")?m():_=!0;break;default:m()}if(r<s.length&&(e=s.substr(r),!/^\s+/.test(e)))throw"Extra/unparsed characters found in date: "+e;if(-1===h?h=(new Date).getFullYear():h<100&&(h+=(new Date).getFullYear()-(new Date).getFullYear()%100+(h<=n?0:-100)),-1<g)for(u=1,p=g;;){if(p<=(a=this._getDaysInMonth(h,u-1)))break;u++,p-=a}if((i=this._daylightSavingAdjust(new Date(h,u-1,p))).getFullYear()!==h||i.getMonth()+1!==u||i.getDate()!==p)throw"Invalid date";return i},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(t,e,a){if(!e)return"";function i(e,t,a){var i=""+t;if(l(e))for(;i.length<a;)i="0"+i;return i}function s(e,t,a,i){return(l(e)?i:a)[t]}var r,n=(a?a.dayNamesShort:null)||this._defaults.dayNamesShort,d=(a?a.dayNames:null)||this._defaults.dayNames,c=(a?a.monthNamesShort:null)||this._defaults.monthNamesShort,o=(a?a.monthNames:null)||this._defaults.monthNames,l=function(e){e=r+1<t.length&&t.charAt(r+1)===e;return e&&r++,e},h="",u=!1;if(e)for(r=0;r<t.length;r++)if(u)"'"!==t.charAt(r)||l("'")?h+=t.charAt(r):u=!1;else switch(t.charAt(r)){case"d":h+=i("d",e.getDate(),2);break;case"D":h+=s("D",e.getDay(),n,d);break;case"o":h+=i("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":h+=i("m",e.getMonth()+1,2);break;case"M":h+=s("M",e.getMonth(),c,o);break;case"y":h+=l("y")?e.getFullYear():(e.getFullYear()%100<10?"0":"")+e.getFullYear()%100;break;case"@":h+=e.getTime();break;case"!":h+=1e4*e.getTime()+this._ticksTo1970;break;case"'":l("'")?h+="'":u=!0;break;default:h+=t.charAt(r)}return h},_possibleChars:function(t){for(var e="",a=!1,i=function(e){e=s+1<t.length&&t.charAt(s+1)===e;return e&&s++,e},s=0;s<t.length;s++)if(a)"'"!==t.charAt(s)||i("'")?e+=t.charAt(s):a=!1;else switch(t.charAt(s)){case"d":case"m":case"y":case"@":e+="0123456789";break;case"D":case"M":return null;case"'":i("'")?e+="'":a=!0;break;default:e+=t.charAt(s)}return e},_get:function(e,t){return(void 0!==e.settings[t]?e.settings:this._defaults)[t]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var a=this._get(e,"dateFormat"),i=e.lastVal=e.input?e.input.val():null,s=this._getDefaultDate(e),r=s,n=this._getFormatConfig(e);try{r=this.parseDate(a,i,n)||s}catch(e){i=t?"":i}e.selectedDay=r.getDate(),e.drawMonth=e.selectedMonth=r.getMonth(),e.drawYear=e.selectedYear=r.getFullYear(),e.currentDay=i?r.getDate():0,e.currentMonth=i?r.getMonth():0,e.currentYear=i?r.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(d,e,t){var a,i=null==e||""===e?t:"string"==typeof e?function(e){try{return V.datepicker.parseDate(V.datepicker._get(d,"dateFormat"),e,V.datepicker._getFormatConfig(d))}catch(e){}for(var t=(e.toLowerCase().match(/^c/)?V.datepicker._getDate(d):null)||new Date,a=t.getFullYear(),i=t.getMonth(),s=t.getDate(),r=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,n=r.exec(e);n;){switch(n[2]||"d"){case"d":case"D":s+=parseInt(n[1],10);break;case"w":case"W":s+=7*parseInt(n[1],10);break;case"m":case"M":i+=parseInt(n[1],10),s=Math.min(s,V.datepicker._getDaysInMonth(a,i));break;case"y":case"Y":a+=parseInt(n[1],10),s=Math.min(s,V.datepicker._getDaysInMonth(a,i))}n=r.exec(e)}return new Date(a,i,s)}(e):"number"==typeof e?isNaN(e)?t:(i=e,(a=new Date).setDate(a.getDate()+i),a):new Date(e.getTime());return(i=i&&"Invalid Date"===i.toString()?t:i)&&(i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0)),this._daylightSavingAdjust(i)},_daylightSavingAdjust:function(e){return e?(e.setHours(12<e.getHours()?e.getHours()+2:0),e):null},_setDate:function(e,t,a){var i=!t,s=e.selectedMonth,r=e.selectedYear,t=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=t.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=t.getMonth(),e.drawYear=e.selectedYear=e.currentYear=t.getFullYear(),s===e.selectedMonth&&r===e.selectedYear||a||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(i?"":this._formatDate(e))},_getDate:function(e){return!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay))},_attachHandlers:function(e){var t=this._get(e,"stepMonths"),a="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){V.datepicker._adjustDate(a,-t,"M")},next:function(){V.datepicker._adjustDate(a,+t,"M")},hide:function(){V.datepicker._hideDatepicker()},today:function(){V.datepicker._gotoToday(a)},selectDay:function(){return V.datepicker._selectDay(a,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return V.datepicker._selectMonthYear(a,this,"M"),!1},selectYear:function(){return V.datepicker._selectMonthYear(a,this,"Y"),!1}};V(this).on(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,a,i,s,r,O,L,R,H,n,d,W,c,o,l,h,u,p,g,_,f,k,E,D,m,U,y,P,z,v,M,b,w=new Date,B=this._daylightSavingAdjust(new Date(w.getFullYear(),w.getMonth(),w.getDate())),C=this._get(e,"isRTL"),w=this._get(e,"showButtonPanel"),I=this._get(e,"hideIfNoPrevNext"),x=this._get(e,"navigationAsDateFormat"),Y=this._getNumberOfMonths(e),S=this._get(e,"showCurrentAtPos"),F=this._get(e,"stepMonths"),J=1!==Y[0]||1!==Y[1],N=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),T=this._getMinMaxDate(e,"min"),A=this._getMinMaxDate(e,"max"),K=e.drawMonth-S,j=e.drawYear;if(K<0&&(K+=12,j--),A)for(t=this._daylightSavingAdjust(new Date(A.getFullYear(),A.getMonth()-Y[0]*Y[1]+1,A.getDate())),t=T&&t<T?T:t;this._daylightSavingAdjust(new Date(j,K,1))>t;)--K<0&&(K=11,j--);for(e.drawMonth=K,e.drawYear=j,S=this._get(e,"prevText"),S=x?this.formatDate(S,this._daylightSavingAdjust(new Date(j,K-F,1)),this._getFormatConfig(e)):S,a=this._canAdjustMonth(e,-1,j,K)?V("<a>").attr({class:"ui-datepicker-prev ui-corner-all","data-handler":"prev","data-event":"click",title:S}).append(V("<span>").addClass("ui-icon ui-icon-circle-triangle-"+(C?"e":"w")).text(S))[0].outerHTML:I?"":V("<a>").attr({class:"ui-datepicker-prev ui-corner-all ui-state-disabled",title:S}).append(V("<span>").addClass("ui-icon ui-icon-circle-triangle-"+(C?"e":"w")).text(S))[0].outerHTML,S=this._get(e,"nextText"),S=x?this.formatDate(S,this._daylightSavingAdjust(new Date(j,K+F,1)),this._getFormatConfig(e)):S,i=this._canAdjustMonth(e,1,j,K)?V("<a>").attr({class:"ui-datepicker-next ui-corner-all","data-handler":"next","data-event":"click",title:S}).append(V("<span>").addClass("ui-icon ui-icon-circle-triangle-"+(C?"w":"e")).text(S))[0].outerHTML:I?"":V("<a>").attr({class:"ui-datepicker-next ui-corner-all ui-state-disabled",title:S}).append(V("<span>").attr("class","ui-icon ui-icon-circle-triangle-"+(C?"w":"e")).text(S))[0].outerHTML,F=this._get(e,"currentText"),I=this._get(e,"gotoCurrent")&&e.currentDay?N:B,F=x?this.formatDate(F,I,this._getFormatConfig(e)):F,S="",e.inline||(S=V("<button>").attr({type:"button",class:"ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all","data-handler":"hide","data-event":"click"}).text(this._get(e,"closeText"))[0].outerHTML),x="",w&&(x=V("<div class='ui-datepicker-buttonpane ui-widget-content'>").append(C?S:"").append(this._isInRange(e,I)?V("<button>").attr({type:"button",class:"ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all","data-handler":"today","data-event":"click"}).text(F):"").append(C?"":S)[0].outerHTML),s=parseInt(this._get(e,"firstDay"),10),s=isNaN(s)?0:s,r=this._get(e,"showWeek"),O=this._get(e,"dayNames"),L=this._get(e,"dayNamesMin"),R=this._get(e,"monthNames"),H=this._get(e,"monthNamesShort"),n=this._get(e,"beforeShowDay"),d=this._get(e,"showOtherMonths"),W=this._get(e,"selectOtherMonths"),c=this._getDefaultDate(e),o="",h=0;h<Y[0];h++){for(u="",this.maxRows=4,p=0;p<Y[1];p++){if(g=this._daylightSavingAdjust(new Date(j,K,e.selectedDay)),_=" ui-corner-all",f="",J){if(f+="<div class='ui-datepicker-group",1<Y[1])switch(p){case 0:f+=" ui-datepicker-group-first",_=" ui-corner-"+(C?"right":"left");break;case Y[1]-1:f+=" ui-datepicker-group-last",_=" ui-corner-"+(C?"left":"right");break;default:f+=" ui-datepicker-group-middle",_=""}f+="'>"}for(f+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+_+"'>"+(/all|left/.test(_)&&0===h?C?i:a:"")+(/all|right/.test(_)&&0===h?C?a:i:"")+this._generateMonthYearHeader(e,K,j,T,A,0<h||0<p,R,H)+"</div><table class='ui-datepicker-calendar'><thead><tr>",k=r?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",l=0;l<7;l++)k+="<th scope='col'"+(5<=(l+s+6)%7?" class='ui-datepicker-week-end'":"")+"><span title='"+O[E=(l+s)%7]+"'>"+L[E]+"</span></th>";for(f+=k+"</tr></thead><tbody>",m=this._getDaysInMonth(j,K),j===e.selectedYear&&K===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,m)),D=(this._getFirstDayOfMonth(j,K)-s+7)%7,m=Math.ceil((D+m)/7),U=J&&this.maxRows>m?this.maxRows:m,this.maxRows=U,y=this._daylightSavingAdjust(new Date(j,K,1-D)),P=0;P<U;P++){for(f+="<tr>",z=r?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(y)+"</td>":"",l=0;l<7;l++)v=n?n.apply(e.input?e.input[0]:null,[y]):[!0,""],b=(M=y.getMonth()!==K)&&!W||!v[0]||T&&y<T||A&&A<y,z+="<td class='"+(5<=(l+s+6)%7?" ui-datepicker-week-end":"")+(M?" ui-datepicker-other-month":"")+(y.getTime()===g.getTime()&&K===e.selectedMonth&&e._keyEvent||c.getTime()===y.getTime()&&c.getTime()===g.getTime()?" "+this._dayOverClass:"")+(b?" "+this._unselectableClass+" ui-state-disabled":"")+(M&&!d?"":" "+v[1]+(y.getTime()===N.getTime()?" "+this._currentClass:"")+(y.getTime()===B.getTime()?" ui-datepicker-today":""))+"'"+(M&&!d||!v[2]?"":" title='"+v[2].replace(/'/g,"&#39;")+"'")+(b?"":" data-handler='selectDay' data-event='click' data-month='"+y.getMonth()+"' data-year='"+y.getFullYear()+"'")+">"+(M&&!d?"&#xa0;":b?"<span class='ui-state-default'>"+y.getDate()+"</span>":"<a class='ui-state-default"+(y.getTime()===B.getTime()?" ui-state-highlight":"")+(y.getTime()===N.getTime()?" ui-state-active":"")+(M?" ui-priority-secondary":"")+"' href='#' aria-current='"+(y.getTime()===N.getTime()?"true":"false")+"' data-date='"+y.getDate()+"'>"+y.getDate()+"</a>")+"</td>",y.setDate(y.getDate()+1),y=this._daylightSavingAdjust(y);f+=z+"</tr>"}11<++K&&(K=0,j++),u+=f+="</tbody></table>"+(J?"</div>"+(0<Y[0]&&p===Y[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}o+=u}return o+=x,e._keyEvent=!1,o},_generateMonthYearHeader:function(e,t,a,i,s,r,n,d){var c,o,l,h,u,p,g=this._get(e,"changeMonth"),_=this._get(e,"changeYear"),f=this._get(e,"showMonthAfterYear"),k=this._get(e,"selectMonthLabel"),D=this._get(e,"selectYearLabel"),m="<div class='ui-datepicker-title'>",y="";if(r||!g)y+="<span class='ui-datepicker-month'>"+n[t]+"</span>";else{for(c=i&&i.getFullYear()===a,o=s&&s.getFullYear()===a,y+="<select class='ui-datepicker-month' aria-label='"+k+"' data-handler='selectMonth' data-event='change'>",l=0;l<12;l++)(!c||l>=i.getMonth())&&(!o||l<=s.getMonth())&&(y+="<option value='"+l+"'"+(l===t?" selected='selected'":"")+">"+d[l]+"</option>");y+="</select>"}if(f||(m+=y+(!r&&g&&_?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",r||!_)m+="<span class='ui-datepicker-year'>"+a+"</span>";else{for(n=this._get(e,"yearRange").split(":"),h=(new Date).getFullYear(),u=(k=function(e){e=e.match(/c[+\-].*/)?a+parseInt(e.substring(1),10):e.match(/[+\-].*/)?h+parseInt(e,10):parseInt(e,10);return isNaN(e)?h:e})(n[0]),p=Math.max(u,k(n[1]||"")),u=i?Math.max(u,i.getFullYear()):u,p=s?Math.min(p,s.getFullYear()):p,e.yearshtml+="<select class='ui-datepicker-year' aria-label='"+D+"' data-handler='selectYear' data-event='change'>";u<=p;u++)e.yearshtml+="<option value='"+u+"'"+(u===a?" selected='selected'":"")+">"+u+"</option>";e.yearshtml+="</select>",m+=e.yearshtml,e.yearshtml=null}return m+=this._get(e,"yearSuffix"),f&&(m+=(!r&&g&&_?"":"&#xa0;")+y),m+="</div>"},_adjustInstDate:function(e,t,a){var i=e.selectedYear+("Y"===a?t:0),s=e.selectedMonth+("M"===a?t:0),t=Math.min(e.selectedDay,this._getDaysInMonth(i,s))+("D"===a?t:0),i=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(i,s,t)));e.selectedDay=i.getDate(),e.drawMonth=e.selectedMonth=i.getMonth(),e.drawYear=e.selectedYear=i.getFullYear(),"M"!==a&&"Y"!==a||this._notifyChange(e)},_restrictMinMax:function(e,t){var a=this._getMinMaxDate(e,"min"),e=this._getMinMaxDate(e,"max"),a=a&&t<a?a:t;return e&&e<a?e:a},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){e=this._get(e,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,a,i){var s=this._getNumberOfMonths(e),a=this._daylightSavingAdjust(new Date(a,i+(t<0?t:s[0]*s[1]),1));return t<0&&a.setDate(this._getDaysInMonth(a.getFullYear(),a.getMonth())),this._isInRange(e,a)},_isInRange:function(e,t){var a,i=this._getMinMaxDate(e,"min"),s=this._getMinMaxDate(e,"max"),r=null,n=null,e=this._get(e,"yearRange");return e&&(e=e.split(":"),a=(new Date).getFullYear(),r=parseInt(e[0],10),n=parseInt(e[1],10),e[0].match(/[+\-].*/)&&(r+=a),e[1].match(/[+\-].*/))&&(n+=a),(!i||t.getTime()>=i.getTime())&&(!s||t.getTime()<=s.getTime())&&(!r||t.getFullYear()>=r)&&(!n||t.getFullYear()<=n)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return{shortYearCutoff:"string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,a,i){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);i=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(i,a,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),i,this._getFormatConfig(e))}}),V.fn.datepicker=function(e){if(!this.length)return this;V.datepicker.initialized||(V(document).on("mousedown",V.datepicker._checkExternalClick),V.datepicker.initialized=!0),0===V("#"+V.datepicker._mainDivId).length&&V("body").append(V.datepicker.dpDiv);var t=Array.prototype.slice.call(arguments,1);return"string"==typeof e&&("isDisabled"===e||"getDate"===e||"widget"===e)||"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?V.datepicker["_"+e+"Datepicker"].apply(V.datepicker,[this[0]].concat(t)):this.each(function(){"string"==typeof e?V.datepicker["_"+e+"Datepicker"].apply(V.datepicker,[this].concat(t)):V.datepicker._attachDatepicker(this,e)})},V.datepicker=new e,V.datepicker.initialized=!1,V.datepicker.uuid=(new Date).getTime(),V.datepicker.version="1.13.2",V.datepicker});
/*!
 * jQuery UI Mouse 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./core"],e):e(jQuery)}(function(o){"use strict";var n=!1;return o(document).on("mouseup",function(){n=!1}),o.widget("ui.mouse",{version:"1.13.2",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).on("click."+this.widgetName,function(e){if(!0===o.data(e.target,t.widgetName+".preventClickEvent"))return o.removeData(e.target,t.widgetName+".preventClickEvent"),e.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){var t,s,i;if(!n)return this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),s=1===(this._mouseDownEvent=e).which,i=!("string"!=typeof(t=this).options.cancel||!e.target.nodeName)&&o(e.target).closest(this.options.cancel).length,s&&!i&&this._mouseCapture(e)&&(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){t.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(e),!this._mouseStarted)?e.preventDefault():(!0===o.data(e.target,this.widgetName+".preventClickEvent")&&o.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return t._mouseMove(e)},this._mouseUpDelegate=function(e){return t._mouseUp(e)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),n=!0)),!0},_mouseMove:function(e){if(this._mouseMoved){if(o.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&o.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,n=!1,e.preventDefault()},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})});
/*!
 * jQuery UI Slider 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./mouse","./core"],e):e(jQuery)}(function(o){"use strict";return o.widget("ui.slider",o.ui.mouse,{version:"1.13.2",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,t=this.options,i=this.element.find(".ui-slider-handle"),s=[],a=t.values&&t.values.length||1;for(i.length>a&&(i.slice(a).remove(),i=i.slice(0,a)),e=i.length;e<a;e++)s.push("<span tabindex='0'></span>");this.handles=i.add(o(s.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each(function(e){o(this).data("ui-slider-handle-index",e).attr("tabIndex",0)})},_createRange:function(){var e=this.options;e.range?(!0===e.range&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:Array.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=o("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),"min"!==e.range&&"max"!==e.range||this._addClass(this.range,"ui-slider-range-"+e.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(e){var i,s,a,n,t,h,l=this,u=this.options;return!u.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t),s=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var t=Math.abs(i-l.values(e));(t<s||s===t&&(e===l._lastChangedValue||l.values(e)===u.min))&&(s=t,a=o(this),n=e)}),!1!==this._start(e,n))&&(this._mouseSliding=!0,this._handleIndex=n,this._addClass(a,null,"ui-state-active"),a.trigger("focus"),t=a.offset(),h=!o(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=h?{left:0,top:0}:{left:e.pageX-t.left-a.width()/2,top:e.pageY-t.top-a.height()/2-(parseInt(a.css("borderTopWidth"),10)||0)-(parseInt(a.css("borderBottomWidth"),10)||0)+(parseInt(a.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,n,i),this._animateOff=!0)},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},t=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,t),!1},_mouseStop:function(e){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,e="horizontal"===this.orientation?(t=this.elementSize.width,e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),e=e/t;return(e=1<e?1:e)<0&&(e=0),"vertical"===this.orientation&&(e=1-e),t=this._valueMax()-this._valueMin(),e=this._valueMin()+e*t,this._trimAlignValue(e)},_uiHash:function(e,t,i){var s={handle:this.handles[e],handleIndex:e,value:void 0!==t?t:this.value()};return this._hasMultipleValues()&&(s.value=void 0!==t?t:this.values(e),s.values=i||this.values()),s},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(e,t){return this._trigger("start",e,this._uiHash(t))},_slide:function(e,t,i){var s,a=this.value(),n=this.values();this._hasMultipleValues()&&(s=this.values(t?0:1),a=this.values(t),2===this.options.values.length&&!0===this.options.range&&(i=0===t?Math.min(s,i):Math.max(s,i)),n[t]=i),i!==a&&!1!==this._trigger("slide",e,this._uiHash(t,i,n))&&(this._hasMultipleValues()?this.values(t,i):this.value(i))},_stop:function(e,t){this._trigger("stop",e,this._uiHash(t))},_change:function(e,t){this._keySliding||this._mouseSliding||(this._lastChangedValue=t,this._trigger("change",e,this._uiHash(t)))},value:function(e){if(!arguments.length)return this._value();this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0)},values:function(e,t){var i,s,a;if(1<arguments.length)this.options.values[e]=this._trimAlignValue(t),this._refreshValue(),this._change(null,e);else{if(!arguments.length)return this._values();if(!Array.isArray(e))return this._hasMultipleValues()?this._values(e):this.value();for(i=this.options.values,s=e,a=0;a<i.length;a+=1)i[a]=this._trimAlignValue(s[a]),this._change(null,a);this._refreshValue()}},_setOption:function(e,t){var i,s=0;switch("range"===e&&!0===this.options.range&&("min"===t?(this.options.value=this._values(0),this.options.values=null):"max"===t&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),Array.isArray(this.options.values)&&(s=this.options.values.length),this._super(e,t),e){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(t),this.handles.css("horizontal"===t?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=s-1;0<=i;i--)this._change(null,i);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(e){this._super(e),this._toggleClass(null,"ui-state-disabled",!!e)},_value:function(){var e=this.options.value;return this._trimAlignValue(e)},_values:function(e){var t,i;if(arguments.length)return e=this.options.values[e],this._trimAlignValue(e);if(this._hasMultipleValues()){for(t=this.options.values.slice(),i=0;i<t.length;i+=1)t[i]=this._trimAlignValue(t[i]);return t}return[]},_trimAlignValue:function(e){var t,i;return e<=this._valueMin()?this._valueMin():e>=this._valueMax()?this._valueMax():(t=0<this.options.step?this.options.step:1,i=e-(e=(e-this._valueMin())%t),2*Math.abs(e)>=t&&(i+=0<e?t:-t),parseFloat(i.toFixed(5)))},_calculateNewMax:function(){var e=this.options.max,t=this._valueMin(),i=this.options.step;(e=Math.round((e-t)/i)*i+t)>this.options.max&&(e-=i),this.max=parseFloat(e.toFixed(this._precision()))},_precision:function(){var e=this._precisionOf(this.options.step);return e=null!==this.options.min?Math.max(e,this._precisionOf(this.options.min)):e},_precisionOf:function(e){var e=e.toString(),t=e.indexOf(".");return-1===t?0:e.length-t-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(e){"vertical"===e&&this.range.css({width:"",left:""}),"horizontal"===e&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var t,i,e,s,a,n=this.options.range,h=this.options,l=this,u=!this._animateOff&&h.animate,r={};this._hasMultipleValues()?this.handles.each(function(e){i=(l.values(e)-l._valueMin())/(l._valueMax()-l._valueMin())*100,r["horizontal"===l.orientation?"left":"bottom"]=i+"%",o(this).stop(1,1)[u?"animate":"css"](r,h.animate),!0===l.options.range&&("horizontal"===l.orientation?(0===e&&l.range.stop(1,1)[u?"animate":"css"]({left:i+"%"},h.animate),1===e&&l.range[u?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:h.animate})):(0===e&&l.range.stop(1,1)[u?"animate":"css"]({bottom:i+"%"},h.animate),1===e&&l.range[u?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:h.animate}))),t=i}):(e=this.value(),s=this._valueMin(),a=this._valueMax(),i=a!==s?(e-s)/(a-s)*100:0,r["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[u?"animate":"css"](r,h.animate),"min"===n&&"horizontal"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({width:i+"%"},h.animate),"max"===n&&"horizontal"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({width:100-i+"%"},h.animate),"min"===n&&"vertical"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({height:i+"%"},h.animate),"max"===n&&"vertical"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({height:100-i+"%"},h.animate))},_handleEvents:{keydown:function(e){var t,i,s,a=o(e.target).data("ui-slider-handle-index");switch(e.keyCode){case o.ui.keyCode.HOME:case o.ui.keyCode.END:case o.ui.keyCode.PAGE_UP:case o.ui.keyCode.PAGE_DOWN:case o.ui.keyCode.UP:case o.ui.keyCode.RIGHT:case o.ui.keyCode.DOWN:case o.ui.keyCode.LEFT:if(e.preventDefault(),this._keySliding||(this._keySliding=!0,this._addClass(o(e.target),null,"ui-state-active"),!1!==this._start(e,a)))break;return}switch(s=this.options.step,t=i=this._hasMultipleValues()?this.values(a):this.value(),e.keyCode){case o.ui.keyCode.HOME:i=this._valueMin();break;case o.ui.keyCode.END:i=this._valueMax();break;case o.ui.keyCode.PAGE_UP:i=this._trimAlignValue(t+(this._valueMax()-this._valueMin())/this.numPages);break;case o.ui.keyCode.PAGE_DOWN:i=this._trimAlignValue(t-(this._valueMax()-this._valueMin())/this.numPages);break;case o.ui.keyCode.UP:case o.ui.keyCode.RIGHT:if(t===this._valueMax())return;i=this._trimAlignValue(t+s);break;case o.ui.keyCode.DOWN:case o.ui.keyCode.LEFT:if(t===this._valueMin())return;i=this._trimAlignValue(t-s)}this._slide(e,a,i)},keyup:function(e){var t=o(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,t),this._change(e,t),this._removeClass(o(e.target),null,"ui-state-active"))}}})});
fbuilderjQuery=(typeof fbuilderjQuery!='undefined')?fbuilderjQuery:jQuery;fbuilderjQuery(function(){(function($){$.extend({stringifyXX:function stringifyXX(obj){var enc=function(param){var escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'};escapable.lastIndex=0;return escapable.test(param)?param.replace(escapable,function(a){var c=meta[a];return typeof c==='string'?c:'\\u'+('0000'+a.charCodeAt(0).toString(16)).slice(-4);}):param;};var t=typeof(obj);if(t!="object"||obj===null){if(t=="string")obj='"'+obj+'"';return String(obj);}else{var n,v,json=[],arr=(obj&&obj.constructor==Array);for(n in obj){v=obj[n];t=typeof(v);if(t!="function"&&t!="undefined")
{if(t=="string")v='"'+enc(v)+'"';else if(t=="object"&&v!==null)v=$.stringifyXX(v);json.push((arr?"":'"'+n+'":')+String(v));}}
return(arr?"[":"{")+String(json)+(arr?"]":"}");}}});})(fbuilderjQuery);});
/*!
 * jQuery Validation Plugin v1.17.0
 *
 * Modified by CodePeople on 2019/09/10, as follows:
 * Original code: ,$.validator.messages[rule.method]
 * Modification: ,this.messages&&this.messages[rule.method]||undefined,$.validator.messages[rule.method]
 *
 * https://jqueryvalidation.org/
 *
 * Copyright (c) 2017 Jörn Zaefferer
 * Released under the MIT license
 */
fbuilderjQuery=(typeof fbuilderjQuery!='undefined')?fbuilderjQuery:jQuery;(function(factory){if(typeof define==="function"&&define.amd){define(["fbuilderjQuery"],factory);}else if(typeof module==="object"&&module.exports){module.exports=factory(require("fbuilderjQuery"));}else{factory(fbuilderjQuery);}}(function($){$.extend($.fn,{validate:function(options){if(!this.length){if(options&&options.debug&&window.console){console.warn("Nothing selected, can't validate, returning nothing.");}return;}var validator=$.data(this[0],"validator");if(validator){return validator;}this.attr("novalidate","novalidate");validator=new $.validator(options,this[0]);$.data(this[0],"validator",validator);if(validator.settings.onsubmit){this.on("click.validate",":submit",function(event){validator.submitButton=event.currentTarget;if($(this).hasClass("cancel")){validator.cancelSubmit=true;}if($(this).attr("formnovalidate")!==undefined){validator.cancelSubmit=true;}});this.on("submit.validate",function(event){if(validator.settings.debug){event.preventDefault();}function handle(){var hidden,result;if(validator.submitButton&&(validator.settings.submitHandler||validator.formSubmitted)){hidden=$("<input type='hidden'/>").attr("name",validator.submitButton.name).val($(validator.submitButton).val()).appendTo(validator.currentForm);}if(validator.settings.submitHandler){result=validator.settings.submitHandler.call(validator,validator.currentForm,event);if(hidden){hidden.remove();}if(result!==undefined){return result;}return false;}return true;}if(validator.cancelSubmit){validator.cancelSubmit=false;return handle();}if(validator.form()){if(validator.pendingRequest){validator.formSubmitted=true;return false;}return handle();}else{validator.focusInvalid();return false;}});}return validator;},valid:function(){var valid,validator,errorList;if($(this[0]).is("form")){valid=this.validate().form();}else{errorList=[];valid=true;validator=$(this[0].form).validate();this.each(function(){valid=validator.element(this)&&valid;if(!valid){errorList=errorList.concat(validator.errorList);}});validator.errorList=errorList;}return valid;},rules:function(command,argument){var element=this[0],settings,staticRules,existingRules,data,param,filtered;if(element==null){return;}if(!element.form&&element.hasAttribute("contenteditable")){element.form=this.closest("form")[0];element.name=this.attr("name");}if(element.form==null){return;}if(command){settings=$.data(element.form,"validator").settings;staticRules=settings.rules;existingRules=$.validator.staticRules(element);switch(command){case"add":$.extend(existingRules,$.validator.normalizeRule(argument));delete existingRules.messages;staticRules[element.name]=existingRules;if(argument.messages){settings.messages[element.name]=$.extend(settings.messages[element.name],argument.messages);}break;case"remove":if(!argument){delete staticRules[element.name];return existingRules;}filtered={};$.each(argument.split(/\s/),function(index,method){filtered[method]=existingRules[method];delete existingRules[method];});return filtered;}}data=$.validator.normalizeRules($.extend({},$.validator.classRules(element),$.validator.attributeRules(element),$.validator.dataRules(element),$.validator.staticRules(element)),element);if(data.required){param=data.required;delete data.required;data=$.extend({required:param},data);}if(data.remote){param=data.remote;delete data.remote;data=$.extend(data,{remote:param});}return data;}});$.extend($.expr.pseudos||$.expr[":"],{blank:function(a){return!$.trim(""+$(a).val());},filled:function(a){var val=$(a).val();return val!==null&&!!$.trim(""+val);},unchecked:function(a){return!$(a).prop("checked");}});$.validator=function(options,form){this.settings=$.extend(true,{},$.validator.defaults,options);this.currentForm=form;this.init();};$.validator.format=function(source,params){if(arguments.length===1){return function(){var args=$.makeArray(arguments);args.unshift(source);return $.validator.format.apply(this,args);};}if(params===undefined){return source;}if(arguments.length>2&&params.constructor!==Array){params=$.makeArray(arguments).slice(1);}if(params.constructor!==Array){params=[params];}$.each(params,function(i,n){source=source.replace(new RegExp("\\{"+i+"\\}","g"),function(){return n;});});return source;};$.extend($.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"cpefb_error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:false,focusInvalid:true,errorContainer:$([]),errorLabelContainer:$([]),onsubmit:true,ignore:":hidden",ignoreTitle:false,onfocusin:function(element){this.lastActive=element;if(this.settings.focusCleanup){if(this.settings.unhighlight){this.settings.unhighlight.call(this,element,this.settings.errorClass,this.settings.validClass);}this.hideThese(this.errorsFor(element));}},onfocusout:function(element){if(!this.checkable(element)&&(element.name in this.submitted||!this.optional(element))){this.element(element);}},onkeyup:function(element,event){var excludedKeys=[16,17,18,20,35,36,37,38,39,40,45,144,225];if(event.which===9&&this.elementValue(element)===""||$.inArray(event.keyCode,excludedKeys)!==-1){return;}else if(element.name in this.submitted||element.name in this.invalid){this.element(element);}},onclick:function(element){if(element.name in this.submitted){this.element(element);}else if(element.parentNode.name in this.submitted){this.element(element.parentNode);}},highlight:function(element,errorClass,validClass){if(element.type==="radio"){this.findByName(element.name).addClass(errorClass).removeClass(validClass);}else{$(element).addClass(errorClass).removeClass(validClass);}},unhighlight:function(element,errorClass,validClass){if(element.type==="radio"){this.findByName(element.name).removeClass(errorClass).addClass(validClass);}else{$(element).removeClass(errorClass).addClass(validClass);}}},setDefaults:function(settings){$.extend($.validator.defaults,settings);},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:$.validator.format("Please enter no more than {0} characters."),minlength:$.validator.format("Please enter at least {0} characters."),rangelength:$.validator.format("Please enter a value between {0} and {1} characters long."),range:$.validator.format("Please enter a value between {0} and {1}."),max:$.validator.format("Please enter a value less than or equal to {0}."),min:$.validator.format("Please enter a value greater than or equal to {0}."),step:$.validator.format("Please enter a multiple of {0}.")},autoCreateRanges:false,prototype:{init:function(){this.labelContainer=$(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||$(this.currentForm);this.containers=$(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var groups=(this.groups={}),rules;$.each(this.settings.groups,function(key,value){if(typeof value==="string"){value=value.split(/\s/);}$.each(value,function(index,name){groups[name]=key;});});rules=this.settings.rules;$.each(rules,function(key,value){rules[key]=$.validator.normalizeRule(value);});function delegate(event){if(!this.form&&this.hasAttribute("contenteditable")){this.form=$(this).closest("form")[0];this.name=$(this).attr("name");}var validator=$.data(this.form,"validator"),eventType="on"+event.type.replace(/^validate/,""),settings=validator.settings;if(settings[eventType]&&!$(this).is(settings.ignore)){settings[eventType].call(validator,this,event);}}$(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], "+"[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], "+"[type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], "+"[type='radio'], [type='checkbox'], [contenteditable], [type='button']",delegate).on("click.validate","select, option, [type='radio'], [type='checkbox']",delegate);if(this.settings.invalidHandler){$(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler);}},form:function(){this.checkForm();$.extend(this.submitted,this.errorMap);this.invalid=$.extend({},this.errorMap);if(!this.valid()){$(this.currentForm).triggerHandler("invalid-form",[this]);}this.showErrors();return this.valid();},checkForm:function(){this.prepareForm();for(var i=0,elements=(this.currentElements=this.elements());elements[i];i++){this.check(elements[i]);}return this.valid();},element:function(element){var cleanElement=this.clean(element),checkElement=this.validationTargetFor(cleanElement),v=this,result=true,rs,group;if(checkElement===undefined){delete this.invalid[cleanElement.name];}else{this.prepareElement(checkElement);this.currentElements=$(checkElement);group=this.groups[checkElement.name];if(group){$.each(this.groups,function(name,testgroup){if(testgroup===group&&name!==checkElement.name){cleanElement=v.validationTargetFor(v.clean(v.findByName(name)));if(cleanElement&&cleanElement.name in v.invalid){v.currentElements.push(cleanElement);result=v.check(cleanElement)&&result;}}});}rs=this.check(checkElement)!==false;result=result&&rs;if(rs){this.invalid[checkElement.name]=false;}else{this.invalid[checkElement.name]=true;}if(!this.numberOfInvalids()){this.toHide=this.toHide.add(this.containers);}this.showErrors();$(element).attr("aria-invalid",!rs);}return result;},showErrors:function(errors){if(errors){var validator=this;$.extend(this.errorMap,errors);this.errorList=$.map(this.errorMap,function(message,name){return{message:message,element:validator.findByName(name)[0]};});this.successList=$.grep(this.successList,function(element){return!(element.name in errors);});}if(this.settings.showErrors){this.settings.showErrors.call(this,this.errorMap,this.errorList);}else{this.defaultShowErrors();}},resetForm:function(){if($.fn.resetForm){$(this.currentForm).resetForm();}this.invalid={};this.submitted={};this.prepareForm();this.hideErrors();var elements=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(elements);},resetElements:function(elements){var i;if(this.settings.unhighlight){for(i=0;elements[i];i++){this.settings.unhighlight.call(this,elements[i],this.settings.errorClass,"");this.findByName(elements[i].name).removeClass(this.settings.validClass);}}else{elements.removeClass(this.settings.errorClass).removeClass(this.settings.validClass);}},numberOfInvalids:function(){return this.objectLength(this.invalid);},objectLength:function(obj){var count=0,i;for(i in obj){if(obj[i]!==undefined&&obj[i]!==null&&obj[i]!==false){count++;}}return count;},hideErrors:function(){this.hideThese(this.toHide);},hideThese:function(errors){errors.not(this.containers).text("");this.addWrapper(errors).hide();},valid:function(){return this.size()===0;},size:function(){return this.errorList.length;},focusInvalid:function(){if(this.settings.focusInvalid){try{$(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin");}catch(e){}}},findLastActive:function(){var lastActive=this.lastActive;return lastActive&&$.grep(this.errorList,function(n){return n.element.name===lastActive.name;}).length===1&&lastActive;},elements:function(){var validator=this,rulesCache={};return $(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){var name=this.name||$(this).attr("name");if(!name&&validator.settings.debug&&window.console){console.error("%o has no name assigned",this);}if(this.hasAttribute("contenteditable")){this.form=$(this).closest("form")[0];this.name=name;}if(name in rulesCache||!validator.objectLength($(this).rules())){return false;}rulesCache[name]=true;return true;});},clean:function(selector){return $(selector)[0];},errors:function(){var errorClass=this.settings.errorClass.split(" ").join(".");return $(this.settings.errorElement+"."+errorClass,this.errorContext);},resetInternals:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=$([]);this.toHide=$([]);},reset:function(){this.resetInternals();this.currentElements=$([]);},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers);},prepareElement:function(element){this.reset();this.toHide=this.errorsFor(element);},elementValue:function(element){var $element=$(element),type=element.type,val,idx;if(type==="radio"||type==="checkbox"){return this.findByName(element.name).filter(":checked").val();}else if(type==="number"&&typeof element.validity!=="undefined"){return element.validity.badInput?"NaN":$element.val();}if(element.hasAttribute("contenteditable")){val=$element.text();}else{val=$element.val();}if(type==="file"){if(val.substr(0,12)==="C:\\fakepath\\"){return val.substr(12);}idx=val.lastIndexOf("/");if(idx>=0){return val.substr(idx+1);}idx=val.lastIndexOf("\\");if(idx>=0){return val.substr(idx+1);}return val;}if(typeof val==="string"){return val.replace(/\r/g,"");}return val;},check:function(element){element=this.validationTargetFor(this.clean(element));var rules=$(element).rules(),rulesCount=$.map(rules,function(n,i){return i;}).length,dependencyMismatch=false,val=this.elementValue(element),result,method,rule,normalizer;if(typeof rules.normalizer==="function"){normalizer=rules.normalizer;}else if(typeof this.settings.normalizer==="function"){normalizer=this.settings.normalizer;}if(normalizer){val=normalizer.call(element,val);if(typeof val!=="string"){throw new TypeError("The normalizer should return a string value.");}delete rules.normalizer;}for(method in rules){rule={method:method,parameters:rules[method]};try{result=$.validator.methods[method].call(this,val,element,rule.parameters);if(result==="dependency-mismatch"&&rulesCount===1){dependencyMismatch=true;continue;}dependencyMismatch=false;if(result==="pending"){this.toHide=this.toHide.not(this.errorsFor(element));return;}if(!result){this.formatAndAdd(element,rule);return false;}}catch(e){if(this.settings.debug&&window.console){console.log("Exception occurred when checking element "+element.id+", check the '"+rule.method+"' method.",e);}if(e instanceof TypeError){e.message+=".  Exception occurred when checking element "+element.id+", check the '"+rule.method+"' method.";}throw e;}}if(dependencyMismatch){return;}if(this.objectLength(rules)){this.successList.push(element);}return true;},customDataMessage:function(element,method){return $(element).data("msg"+method.charAt(0).toUpperCase()+method.substring(1).toLowerCase())||$(element).data("msg");},customMessage:function(name,method){var m=this.settings.messages[name];return m&&(m.constructor===String?m:m[method]);},findDefined:function(){for(var i=0;i<arguments.length;i++){if(arguments[i]!==undefined){return arguments[i];}}return undefined;},defaultMessage:function(element,rule){if(typeof rule==="string"){rule={method:rule};}var message=this.findDefined(this.customMessage(element.name,rule.method),this.customDataMessage(element,rule.method),!this.settings.ignoreTitle&&element.title||undefined,this.messages&&this.messages[rule.method]||undefined,$.validator.messages[rule.method],"<strong>Warning: No message defined for "+element.name+"</strong>"),theregex=/\$?\{(\d+)\}/g;if(typeof message==="function"){message=message.call(this,rule.parameters,element);}else if(theregex.test(message)){message=$.validator.format(message.replace(theregex,"{$1}"),rule.parameters);}return message;},formatAndAdd:function(element,rule){var message=this.defaultMessage(element,rule);this.errorList.push({message:message,element:element,method:rule.method});this.errorMap[element.name]=message;this.submitted[element.name]=message;},addWrapper:function(toToggle){if(this.settings.wrapper){toToggle=toToggle.add(toToggle.parent(this.settings.wrapper));}return toToggle;},defaultShowErrors:function(){var i,elements,error;for(i=0;this.errorList[i];i++){error=this.errorList[i];if(this.settings.highlight){this.settings.highlight.call(this,error.element,this.settings.errorClass,this.settings.validClass);}this.showLabel(error.element,error.message);}if(this.errorList.length){this.toShow=this.toShow.add(this.containers);}if(this.settings.success){for(i=0;this.successList[i];i++){this.showLabel(this.successList[i]);}}if(this.settings.unhighlight){for(i=0,elements=this.validElements();elements[i];i++){this.settings.unhighlight.call(this,elements[i],this.settings.errorClass,this.settings.validClass);}}this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show();},validElements:function(){return this.currentElements.not(this.invalidElements());},invalidElements:function(){return $(this.errorList).map(function(){return this.element;});},showLabel:function(element,message){var place,group,errorID,v,error=this.errorsFor(element),elementID=this.idOrName(element),describedBy=$(element).attr("aria-describedby");if(error.length){error.removeClass(this.settings.validClass).addClass(this.settings.errorClass);error.html(message);}else{error=$("<"+this.settings.errorElement+">").attr("id",elementID+"-error").addClass(this.settings.errorClass).html(message||"");place=error;if(this.settings.wrapper){place=error.hide().show().wrap("<"+this.settings.wrapper+"/>").parent();}if(this.labelContainer.length){this.labelContainer.append(place);}else if(this.settings.errorPlacement){this.settings.errorPlacement.call(this,place,$(element));}else{place.insertAfter(element);}if(error.is("label")){error.attr("for",elementID);}else if(error.parents("label[for='"+this.escapeCssMeta(elementID)+"']").length===0){errorID=error.attr("id");if(!describedBy){describedBy=errorID;}else if(!describedBy.match(new RegExp("\\b"+this.escapeCssMeta(errorID)+"\\b"))){describedBy+=" "+errorID;}$(element).attr("aria-describedby",describedBy);group=this.groups[element.name];if(group){v=this;$.each(v.groups,function(name,testgroup){if(testgroup===group){$("[name='"+v.escapeCssMeta(name)+"']",v.currentForm).attr("aria-describedby",error.attr("id"));}});}}}if(!message&&this.settings.success){error.text("");if(typeof this.settings.success==="string"){error.addClass(this.settings.success);}else{this.settings.success(error,element);}}this.toShow=this.toShow.add(error);},errorsFor:function(element){var name=this.escapeCssMeta(this.idOrName(element)),describer=$(element).attr("aria-describedby"),selector="label[for='"+name+"'], label[for='"+name+"'] *";if(describer){selector=selector+", #"+this.escapeCssMeta(describer).replace(/\s+/g,", #");}return this.errors().filter(selector);},escapeCssMeta:function(string){return string.replace(/([\\!"#$%&'()*+,./:;<=>?@\[\]^`{|}~])/g,"\\$1");},idOrName:function(element){return this.groups[element.name]||(this.checkable(element)?element.name:element.id||element.name);},validationTargetFor:function(element){if(this.checkable(element)){element=this.findByName(element.name);}return $(element).not(this.settings.ignore)[0];},checkable:function(element){return(/radio|checkbox/i).test(element.type);},findByName:function(name){return $(this.currentForm).find("[name='"+this.escapeCssMeta(name)+"']");},getLength:function(value,element){switch(element.nodeName.toLowerCase()){case"select":return $("option:selected",element).length;case"input":if(this.checkable(element)){return this.findByName(element.name).filter(":checked").length;}}return value.length;},depend:function(param,element){return this.dependTypes[typeof param]?this.dependTypes[typeof param](param,element):true;},dependTypes:{"boolean":function(param){return param;},"string":function(param,element){return!!$(param,element.form).length;},"function":function(param,element){return param(element);}},optional:function(element){var val=this.elementValue(element);return!$.validator.methods.required.call(this,val,element)&&"dependency-mismatch";},startRequest:function(element){if(!this.pending[element.name]){this.pendingRequest++;$(element).addClass(this.settings.pendingClass);this.pending[element.name]=true;}},stopRequest:function(element,valid){this.pendingRequest--;if(this.pendingRequest<0){this.pendingRequest=0;}delete this.pending[element.name];$(element).removeClass(this.settings.pendingClass);if(valid&&this.pendingRequest===0&&this.formSubmitted&&this.form()){$(this.currentForm).submit();if(this.submitButton){$("input:hidden[name='"+this.submitButton.name+"']",this.currentForm).remove();}this.formSubmitted=false;}else if(!valid&&this.pendingRequest===0&&this.formSubmitted){$(this.currentForm).triggerHandler("invalid-form",[this]);this.formSubmitted=false;}},previousValue:function(element,method){method=typeof method==="string"&&method||"remote";return $.data(element,"previousValue")||$.data(element,"previousValue",{old:null,valid:true,message:this.defaultMessage(element,{method:method})});},destroy:function(){this.resetForm();$(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur");}},classRuleSettings:{required:{required:true},email:{email:true},url:{url:true},date:{date:true},dateISO:{dateISO:true},number:{number:true},digits:{digits:true},creditcard:{creditcard:true}},addClassRules:function(className,rules){if(className.constructor===String){this.classRuleSettings[className]=rules;}else{$.extend(this.classRuleSettings,className);}},classRules:function(element){var rules={},classes=$(element).attr("class");if(classes){$.each(classes.split(" "),function(){if(this in $.validator.classRuleSettings){$.extend(rules,$.validator.classRuleSettings[this]);}});}return rules;},normalizeAttributeRule:function(rules,type,method,value){if(/min|max|step/.test(method)&&(type===null||/number|range|text/.test(type))){if(!/^\s*$/.test(value))value=Number(value);if(isNaN(value)){value=undefined;}}if(value||value===0){rules[method]=value;}else if(type===method&&type!=="range"){rules[method]=true;}},attributeRules:function(element){var rules={},$element=$(element),type=element.getAttribute("type"),method,value;for(method in $.validator.methods){if(method==="required"){value=element.getAttribute(method);if(value===""){value=true;}value=!!value;}else{value=$element.attr(method);}this.normalizeAttributeRule(rules,type,method,value);}if(rules.maxlength&&/-1|2147483647|524288/.test(rules.maxlength)){delete rules.maxlength;}return rules;},dataRules:function(element){var rules={},$element=$(element),type=element.getAttribute("type"),method,value;for(method in $.validator.methods){value=$element.data("rule"+method.charAt(0).toUpperCase()+method.substring(1).toLowerCase());this.normalizeAttributeRule(rules,type,method,value);}return rules;},staticRules:function(element){var rules={},validator=$.data(element.form,"validator");if(validator.settings.rules){rules=$.validator.normalizeRule(validator.settings.rules[element.name])||{};}return rules;},normalizeRules:function(rules,element){$.each(rules,function(prop,val){if(val===false){delete rules[prop];return;}if(val.param||val.depends){var keepRule=true;switch(typeof val.depends){case"string":keepRule=!!$(val.depends,element.form).length;break;case"function":keepRule=val.depends.call(element,element);break;}if(keepRule){rules[prop]=val.param!==undefined?val.param:true;}else{$.data(element.form,"validator").resetElements($(element));delete rules[prop];}}});$.each(rules,function(rule,parameter){rules[rule]=$.isFunction(parameter)&&rule!=="normalizer"?parameter(element):parameter;});$.each(["minlength","maxlength"],function(){if(rules[this]){rules[this]=Number(rules[this]);}});$.each(["rangelength","range"],function(){var parts;if(rules[this]){if($.isArray(rules[this])){rules[this]=[Number(rules[this][0]),Number(rules[this][1])];}else if(typeof rules[this]==="string"){parts=rules[this].replace(/[\[\]]/g,"").split(/[\s,]+/);rules[this]=[Number(parts[0]),Number(parts[1])];}}});if($.validator.autoCreateRanges){if(rules.min!=null&&rules.max!=null){rules.range=[rules.min,rules.max];delete rules.min;delete rules.max;}if(rules.minlength!=null&&rules.maxlength!=null){rules.rangelength=[rules.minlength,rules.maxlength];delete rules.minlength;delete rules.maxlength;}}return rules;},normalizeRule:function(data){if(typeof data==="string"){var transformed={};$.each(data.split(/\s/),function(){transformed[this]=true;});data=transformed;}return data;},addMethod:function(name,method,message){$.validator.methods[name]=method;$.validator.messages[name]=message!==undefined?message:$.validator.messages[name];if(method.length<3){$.validator.addClassRules(name,$.validator.normalizeRule(name));}},methods:{required:function(value,element,param){if(!this.depend(param,element)){return"dependency-mismatch";}if(element.nodeName.toLowerCase()==="select"){var val=$(element).val();return val&&val.length>0;}if(this.checkable(element)){return this.getLength(value,element)>0;}return value.length>0;},email:function(value,element){return this.optional(element)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(value);},url:function(value,element){return this.optional(element)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(value);},date:function(value,element){return this.optional(element)||!/Invalid|NaN/.test(new Date(value).toString());},dateISO:function(value,element){return this.optional(element)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(value);},number:function(value,element){return this.optional(element)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(value);},digits:function(value,element){return this.optional(element)||/^\d+$/.test(value);},minlength:function(value,element,param){var length=$.isArray(value)?value.length:this.getLength(value,element);return this.optional(element)||length>=param;},maxlength:function(value,element,param){var length=$.isArray(value)?value.length:this.getLength(value,element);return this.optional(element)||length<=param;},rangelength:function(value,element,param){var length=$.isArray(value)?value.length:this.getLength(value,element);return this.optional(element)||(length>=param[0]&&length<=param[1]);},min:function(value,element,param){return this.optional(element)||value>=param;},max:function(value,element,param){return this.optional(element)||value<=param;},range:function(value,element,param){return this.optional(element)||(value>=param[0]&&value<=param[1]);},step:function(value,element,param){var type=$(element).attr("type"),errorMessage="Step attribute on input type "+type+" is not supported.",supportedTypes=["text","number","range"],re=new RegExp("\\b"+type+"\\b"),notSupported=type&&!re.test(supportedTypes.join()),decimalPlaces=function(num){var match=(""+num).match(/(?:\.(\d+))?$/);if(!match){return 0;}return match[1]?match[1].length:0;},toInt=function(num){return Math.round(num*Math.pow(10,decimals));},valid=true,decimals;if(notSupported){throw new Error(errorMessage);}decimals=decimalPlaces(param);if(decimalPlaces(value)>decimals||toInt(value)%toInt(param)!==0){valid=false;}return this.optional(element)||valid;},equalTo:function(value,element,param){var target=$(param);if(this.settings.onfocusout&&target.not(".validate-equalTo-blur").length){target.addClass("validate-equalTo-blur").on("blur.validate-equalTo",function(){$(element).valid();});}return value===target.val();},remote:function(value,element,param,method){if(this.optional(element)){return"dependency-mismatch";}method=typeof method==="string"&&method||"remote";var previous=this.previousValue(element,method),validator,data,optionDataString;if(!this.settings.messages[element.name]){this.settings.messages[element.name]={};}previous.originalMessage=previous.originalMessage||this.settings.messages[element.name][method];this.settings.messages[element.name][method]=previous.message;param=typeof param==="string"&&{url:param}||param;optionDataString=$.param($.extend({data:value},param.data));if(previous.old===optionDataString){return previous.valid;}previous.old=optionDataString;validator=this;this.startRequest(element);data={};data[element.name]=value;$.ajax($.extend(true,{mode:"abort",port:"validate"+element.name,dataType:"json",data:data,context:validator.currentForm,success:function(response){var valid=response===true||response==="true",errors,message,submitted;validator.settings.messages[element.name][method]=previous.originalMessage;if(valid){submitted=validator.formSubmitted;validator.resetInternals();validator.toHide=validator.errorsFor(element);validator.formSubmitted=submitted;validator.successList.push(element);validator.invalid[element.name]=false;validator.showErrors();}else{errors={};message=response||validator.defaultMessage(element,{method:method,parameters:value});errors[element.name]=previous.message=message;validator.invalid[element.name]=true;validator.showErrors(errors);}previous.valid=valid;validator.stopRequest(element,valid);}},param));return"pending";}}});var pendingRequests={},ajax;if($.ajaxPrefilter){$.ajaxPrefilter(function(settings,_,xhr){var port=settings.port;if(settings.mode==="abort"){if(pendingRequests[port]){pendingRequests[port].abort();}pendingRequests[port]=xhr;}});}else{ajax=$.ajax;$.ajax=function(settings){var mode=("mode"in settings?settings:$.ajaxSettings).mode,port=("port"in settings?settings:$.ajaxSettings).port;if(mode==="abort"){if(pendingRequests[port]){pendingRequests[port].abort();}pendingRequests[port]=ajax.apply(this,arguments);return pendingRequests[port];}return ajax.apply(this,arguments);};}return $;}));
fbuilderjQuery=(typeof fbuilderjQuery!='undefined')?fbuilderjQuery:jQuery;fbuilderjQuery(window).bind('pageshow',function(event){if(typeof event.originalEvent['persisted']!='undefined'&&event.originalEvent['persisted'])location.reload();});fbuilderjQuery.fbuilderjQueryGenerator=function(){(function($){if(!('fbuilder'in $))
{$.fbuilder=$.fbuilder||{};$.fbuilder['objName']='fbuilderjQuery';;(function(root){var lib={};lib.cf_logical_version='0.1';lib.IF=function(condition,if_true,if_false){if(condition){return(typeof if_true==='undefined')?true:if_true;}else{return(typeof if_false==='undefined')?false:if_false;}};lib.AND=function(){for(var i=0,h=arguments.length;i<h;i++){if(!arguments[i]){return false;}}
return true;};lib.OR=function(){for(var i=0,h=arguments.length;i<h;i++){if(arguments[i]){return true;}}
return false;};lib.NOT=function(_term){return(typeof _term=='undefined')?true:!_term;};lib.IN=function(_term,_values,_case_sensitive){function _reduce(str){var str=String(str).replace(/^\s+/,'').replace(/\s+$/,'').replace(/\s+/,' ');if(typeof _case_sensitive=='undefined'||!_case_sensitive)str=str.toLowerCase()
return str;};_term=_reduce(_term);if(typeof _values=='string')
{if($.isNumeric(_term)&&$.isNumeric(_values))return _term==_values;return _reduce(_values).indexOf(_term)!=-1;}
else if(typeof _values=='object'&&_values.length){for(var i=0,h=_values.length;i<h;i++)if(_reduce(_values[i])==_term)return true;}
return false;};if(window.CFFCOUNTIF==undefined){window['CFFCOUNTIF']=window['cffcountif']=function(){var r=0,l=arguments.length,t,callback;if(l){if(typeof arguments[l-1]=='function'){callback=arguments[l-1];}else{callback=(function(last_item){return function(x){return x==last_item;};})(arguments[l-1]);}
l-=1;for(var i=0;i<l;i++)
{if(Array.isArray(arguments[i]))
r+=CFFCOUNTIF.apply(this,arguments[i].concat(callback));else if(jQuery.isPlainObject(arguments[i]))
r+=CFFCOUNTIF.apply(this,Object.values(arguments[i]).concat(callback));else
r+=callback(arguments[i])?1:0;}}
return r;};}
if(window.CFFFILTER==undefined){window['CFFFILTER']=window['cfffilter']=function(){var r=[],l=arguments.length,t,callback=function(){return true;};if(l){if(typeof arguments[l-1]=='function'){callback=arguments[l-1];l-=1;}
for(var i=0;i<l;i++)
{if(Array.isArray(arguments[i]))
r=r.concat(CFFFILTER.apply(this,arguments[i].concat(callback)));else if(jQuery.isPlainObject(arguments[i]))
r=r.concat(CFFFILTER.apply(this,Object.values(arguments[i]).concat(callback)));else if(callback(arguments[i]))
r.push(arguments[i]);}}
return r;};}
root.CF_LOGICAL=lib;})(this);fbuilderjQuery=(typeof fbuilderjQuery!='undefined')?fbuilderjQuery:jQuery;fbuilderjQuery['fbuilder']=fbuilderjQuery['fbuilder']||{};fbuilderjQuery['fbuilder']['modules']=fbuilderjQuery['fbuilder']['modules']||{};fbuilderjQuery['fbuilder']['modules']['default']={'prefix':'','callback':function()
{var math_prop=["LN10","PI","E","LOG10E","SQRT2","LOG2E","SQRT1_2","LN2","cos","pow","log","tan","sqrt","asin","abs","exp","atan2","atanh","random","acos","atan","sin"];for(var i=0,h=math_prop.length;i<h;i++)
{if(!window[math_prop[i]])
{window[math_prop[i]]=window[math_prop[i].toUpperCase()]=Math[math_prop[i]];}}
if(Number.prototype.LENGTH==undefined)
{Number.prototype.LENGTH=function(){return this.valueOf().toString().length;};}
if(window.REMAINDER==undefined)
{window.REMAINDER=window.remainder=function(a,b){return a%b;};}
function ROUNDx(operation,num,y)
{if(y&&y!=0)
{var r=operation(num/y)*y,p=(new String(y)).split('.');if(p.length==2)r=PREC(r,p[1].length);return r;}
else
{return operation(num);}};if(window.ROUND==undefined)
{window.ROUND=window.round=function(num,y)
{if(y)return ROUNDx(Math.round,num,y);return ROUNDx(Math.round,num);}}
if(window.FLOOR==undefined)
{window.FLOOR=window.floor=function(num,y)
{if(y)return ROUNDx(Math.floor,num,y);return ROUNDx(Math.floor,num);}}
if(window.CEIL==undefined)
{window.CEIL=window.ceil=function(num,y)
{if(y)return ROUNDx(Math.ceil,num,y);return ROUNDx(Math.ceil,num);}}
if(window.PREC==undefined)
{window.PREC=window.prec=function(num,pr,if_not_integer)
{pr=pr||0;if_not_integer=if_not_integer||0;if(/^\d+$/.test(pr)&&$.isNumeric(num))
{if(Math.floor(num)!=num||!if_not_integer)
{var f=Math.pow(10,pr);num=Math.round(num*f)/f;return num.toFixed(pr);}}
return num;};}
if(window.TOBASE==undefined)
{window.TOBASE=window.tobase=window.toBase=window.ToBase=function(num,_from,_to)
{_from=_from||10;_to=_to||10;if(_from!=_to){try{var _decimal=parseInt(num,_from);return _decimal.toString(_to);}catch(err){}}
return num;};}
if(window.CDATE==undefined)
{window.CDATE=window.cdate=function(num,format)
{format=(typeof format!='undefined')?format:((typeof window.DATETIMEFORMAT!='undefined')?window.DATETIMEFORMAT:'dd/mm/yyyy');if(isFinite(num*1))
{var time_only=(Math.abs(num)<1);num=Math.round(num*86400000);if(time_only)num+=(new Date(2021,01,01,0,0,0,0)).valueOf();var date=new Date(num),d=(time_only)?0:date.getDate(),m=(time_only)?0:date.getMonth()+1,y=(time_only)?0:date.getFullYear(),h=date.getHours(),i=date.getMinutes(),s=date.getSeconds(),a='';m=(m<10)?'0'+m:m;d=(d<10)?'0'+d:d;if(/a/.test(format))
{a=(h>=12)?'pm':'am';h=h%12;h=(h==0)?12:h;}
h=(h<10)?'0'+h:h;i=(i<10)?'0'+i:i;s=(s<10)?'0'+s:s;return format.replace(/\by{2}\b/i,y%100).replace(/y+/i,y).replace(/m+/i,m).replace(/d+/i,d).replace(/h+/i,h).replace(/i+/i,i).replace(/s+/i,s).replace(/a+/i,a);}
return num;};}
if(window.SUM==undefined)
{window.SUM=window.sum=function()
{var r=0,l=arguments.length,t,callback=function(x){return x;};if(l){if(typeof arguments[l-1]=='function'){callback=arguments[l-1];l-=1;}
for(var i=0;i<l;i++)
{if(Array.isArray(arguments[i]))
r+=SUM.apply(this,arguments[i].concat(callback));else if(jQuery.isPlainObject(arguments[i]))
r+=SUM.apply(this,Object.values(arguments[i]).concat(callback));else
{t=arguments[i];t=callback(t)*1;if(!isNaN(t))
{r+=t;}}}}
return r;};}
if(window.SIGMA==undefined)
{window.SIGMA=window.sigma=function()
{var r=0,l=arguments.length,n,m,callback,t;if(l==3){n=parseInt(arguments[0]);m=parseInt(arguments[1]);callback=arguments[2];if(!isNaN(n)&&!isNaN(m)&&typeof callback=='function'){for(var i=n;i<=m;i++){t=callback(i);if(!isNaN(t))r+=t;}}}
return r;};}
if(window.CONCATENATE==undefined)
{window.CONCATENATE=window.concatenate=function()
{var r='';for(var i in arguments)
{if(Array.isArray(arguments[i]))
r+=CONCATENATE.apply(this,arguments[i]);else if(jQuery.isPlainObject(arguments[i]))
r+=CONCATENATE.apply(this,Object.values(arguments[i]));else r+=(new String(arguments[i]));}
return r;};}
if(window.AVERAGE==undefined)
{window.AVERAGE=window.average=function()
{var _c=0;function c(v)
{if(Array.isArray(v)&&v.length)for(var i in v)c(v[i]);else _c++;}
for(var i in arguments)c(arguments[i]);return SUM.apply(this,arguments)/_c;};}
if(window.GCD==undefined)
{window.GCD=window.gcd=function(a,b)
{if(!b)return a;return GCD(b,a%b);};}
if(window.LCM==undefined)
{window.LCM=window.lcm=function(a,b)
{return(!a||!b)?0:ABS((a*b)/GCD(a,b));};}
if(window.LOGAB==undefined)
{window.LOGAB=window.logab=function(a,b)
{return LOG(a)/LOG(b);};}
if(window.NTHROOT==undefined)
{window.NTHROOT=window.nthroot=function(a,b)
{var n=(a<0&&b%2==1)?-1:1;return n*POW(Math.abs(a),1/b);};}
if(window.MIN==undefined)
{window.MIN=window.min=function()
{var l=[];for(var i in arguments)
var l=l.concat(arguments[i]);return Math.min.apply(this,l);};}
if(window.MAX==undefined)
{window.MAX=window.max=function()
{var l=[];for(var i in arguments)
var l=l.concat(arguments[i]);return Math.max.apply(this,l);};}
if(window.RADIANS==undefined)
{window.RADIANS=window.radians=function(a){return a*PI/180;};}
if(window.DEGREES==undefined)
{window.DEGREES=window.degrees=function(a){return a*180/PI;};}
if(window.FACTORIAL==undefined)
{window.FACTORIAL=window.factorial=function(a){if(a<0||FLOOR(a)!=a)return null;var r=1;for(var i=1;i<=a;i++)r*=i
return r;};}
if(window.FRACTIONTODECIMAL==undefined)
{window.FRACTIONTODECIMAL=window.fractiontodecimal=window.fractionToDecimal=function(v){try
{var x=v.toString().split('/');return parseInt(x[0],10)/((1 in x)?parseInt(x[1],10):1);}catch(err){return v;}};}
if(window.DECIMALTOFRACTION==undefined)
{window.DECIMALTOFRACTION=window.decimaltofraction=window.decimalToFraction=function(v){try
{if(v*1==parseInt(v,10))return parseInt(v,10);var x=v.toString().split('.'),top=parseInt(x[0]+''+x[1]),bottom=Math.pow(10,x[1].length),y=gcd(Math.abs(top),bottom);return(top/y)+'/'+(bottom/y);}catch(err){return v;}};}
if(window.FRACTIONSUM==undefined)
{window.FRACTIONSUM=window.fractionsum=function(){try
{var _aux=function(a,b){var d1,d2,m,r;a=(a+'/1').split('/');b=(b+'/1').split('/');d1=a[0]*b[1]+a[1]*b[0];d2=a[1]*b[1];if(isNaN(d1)||isNaN(d2))throw'Invalid numbers';m=abs(gcd(d1,d2));r=d1/m+IF(d2/m==1,'','/'+d2/m);return jQuery.isNumeric(r)?r*1:r;};var r=0;for(var i in arguments)r=_aux(r,arguments[i]);return r;}catch(err){}};}
if(window.FRACTIONSUB==undefined)
{window.FRACTIONSUB=window.fractionsub=function(){try
{var _aux=function(a,b){var d1,d2,m,r;a=(a+'/1').split('/');b=(b+'/1').split('/');d1=a[0]*b[1]-a[1]*b[0];d2=a[1]*b[1];if(isNaN(d1)||isNaN(d2))throw'Invalid numbers';m=abs(gcd(d1,d2));r=d1/m+IF(d2/m==1,'','/'+d2/m);return jQuery.isNumeric(r)?r*1:r;};var r=0;for(var i in arguments)
{if(i==0)r=_aux(arguments[i],r);else r=_aux(r,arguments[i]);}
return r;}catch(err){}};}
if(window.FRACTIONMULT==undefined)
{window.FRACTIONMULT=window.fractionmult=function(){try
{var _aux=function(a,b){var d1,d2,m,r;a=(a+'/1').split('/');b=(b+'/1').split('/');d1=a[0]*b[0];d2=a[1]*b[1];if(isNaN(d1)||isNaN(d2))throw'Invalid numbers';m=abs(gcd(d1,d2));r=d1/m+IF(d2/m==1,'','/'+d2/m);return jQuery.isNumeric(r)?r*1:r;};var r=1;for(var i in arguments)r=_aux(r,arguments[i]);return r;}catch(err){}};}
if(window.FRACTIONDIV==undefined)
{window.FRACTIONDIV=window.fractiondiv=function(){try
{var _aux=function(a,b){var d1,d2,m,r;a=(a+'/1').split('/');b=(b+'/1').split('/');d1=a[0]*b[1];d2=a[1]*b[0];if(isNaN(d1)||isNaN(d2))throw'Invalid numbers';m=abs(gcd(d1,d2));r=d1/m+IF(d2/m==1,'','/'+d2/m);return jQuery.isNumeric(r)?r*1:r;};var r=1;for(var i in arguments)
{if(i==0)r=_aux(arguments[i],r);else r=_aux(r,arguments[i]);}
return r;}catch(err){}};}
if(window.SCIENTIFICTODECIMAL==undefined)
{window.SCIENTIFICTODECIMAL=window.scientifictodecimal=function(x){x*=1;if(Math.abs(x)<1.0)
{var e=parseInt(x.toString().split('e-')[1]);if(e)
{x*=Math.pow(10,e-1);x='0.'+(new Array(e)).join('0')+x.toString().substring(2);}}
else
{var e=parseInt(x.toString().split('+')[1]);if(e>20)
{e-=20;x/=Math.pow(10,e);x+=(new Array(e+1)).join('0');}}
return x;};}
if(window.DECIMALTOSCIENTIFIC==undefined)
{window.DECIMALTOSCIENTIFIC=window.decimaltoscientific=function(x){var v=Number(x).toExponential();return(isNaN(v)||x=='')?x:v;};}
if(window.FORMAT==undefined)
{window.FORMAT=window.format=function(x,o){return fbuilderjQuery.fbuilder.calculator.format(x,o);};}
if(window.UNFORMAT==undefined)
{window.UNFORMAT=window.unformat=function(x,o){try
{var s;try
{s=(typeof o!='undefined'&&'decimalsymbol'in o)?o['decimalsymbol']:'.';}catch(err){s='.';}
return(x+'').replace(new RegExp('[^\\-\\d\\'+s+']','gi'),'').replace(new RegExp('\\'+s,'gi'),'.')*1;}
catch(err){return x;}};}
fbuilderjQuery['fbuilder']['extend_window'](fbuilderjQuery['fbuilder']['modules']['default']['prefix'],CF_LOGICAL);},'validator':function(v)
{return(typeof v=='number')?isFinite(v):(typeof v!='undefined');}};;(function(root){var lib={},default_format=(typeof window.DATETIMEFORMAT!='undefined')?window.DATETIMEFORMAT:'yyyy-mm-dd hh:ii:ss a',regExp='';Date.prototype.valid=function(){return isFinite(this);};function _processArguments(date,format,leading_zeros){if(arguments.length==1&&(typeof date=='boolean'||date==0||date==1))
{leading_zeros=date;date=undefined;format=undefined;}
leading_zeros=leading_zeros||0;return{date:date,format:format,leading_zeros:leading_zeros};}
function _leadingZeros(n){return n<10?0+''+n:n;};function _getDateObj(date,format){var d=new Date();format=format||default_format;if(typeof date!='undefined'){if(typeof date=='number'){d=new Date(Math.ceil(date*86400000));}else if(typeof date=='string'){var p;if(null!=(p=/(\d{4})[\/\-\.](\d{1,2})[\/\-\.](\d{1,2})/.exec(date))){if(/y{4}[\/\-\.]m{2}[\/\-\.]d{2}/i.test(format)){d=new Date(p[1],(p[2]-1),p[3]);}else{d=new Date(p[1],(p[3]-1),p[2]);}
date=date.replace(p[0],'');}
if(null!=(p=/(\d{1,2})[\/\-\.](\d{1,2})[\/\-\.](\d{4})/.exec(date))){if(/d{2}[\/\-\.]m{2}[\/\-\.]y{4}/i.test(format)){d=new Date(p[3],(p[2]-1),p[1]);}else{d=new Date(p[3],(p[1]-1),p[2]);}
date=date.replace(p[0],'');}
if(null!=(p=/(\d{1,2})[\/\-\.](\d{1,2})[\/\-\.](\d{2})/.exec(date))){if(/d{2}[\/\-\.]m{2}[\/\-\.]y{2}/i.test(format)){d=new Date(2000+p[3]*1,(p[2]-1),p[1]);}else if(/m{2}[\/\-\.]d{2}[\/\-\.]y{2}/i.test(format)){d=new Date(2000+p[3]*1,(p[1]-1),p[2]);}else if(/y{2}[\/\-\.]d{2}[\/\-\.]m{2}/i.test(format)){d=new Date(2000+p[1]*1,(p[3]-1),p[2]);}else if(/y{2}[\/\-\.]m{2}[\/\-\.]d{2}/i.test(format)){d=new Date(2000+p[1]*1,(p[2]-1),p[3]);}
date=date.replace(p[0],'');}
if(null!=(p=/(\d{1,2})[:\.](\d{1,2})([:\.](\d{1,2}))?\s*([ap]m)?/i.exec(date))){if(/h+/i.test(format)){if(typeof p[5]!='undefined'&&/pm/i.test(p[5]))p[1]=(p[1]*1+12)%24;d.setHours(p[1]);}
if(/i+/i.test(format))d.setMinutes(p[2]);if(/s+/i.test(format)&&(typeof p[4]!='undefined'))d.setSeconds(p[4]);}}else{d=new Date(date);}}
return d;};lib.cf_datetime_version='0.1';lib.DATEOBJ=function(date,format){var d=_getDateObj(date,format);if(d.valid())return d;return false;};lib.YEAR=function(date,format){var d=_getDateObj(date,format);if(d.valid())return d.getFullYear();return false;};lib.MONTH=function(date,format,leading_zeros){var tmp=_processArguments.apply(null,arguments);date=tmp['date'];format=tmp['format'];leading_zeros=tmp['leading_zeros'];var d=_getDateObj(date,format),r=false;if(d.valid()){r=d.getMonth()+1;if(leading_zeros)r=_leadingZeros(r);}
return r;};lib.MONTHNAME=function(date,format,locale){var d=lib.DATEOBJ(date,format),r=false;if(d){locale=locale||'default';try{r=d.toLocaleString(locale,{month:'long'});}catch(err){r=d.toLocaleString('default',{month:'long'});}}
return r;};lib.WEEKDAYNAME=function(date,format,locale){var d=lib.DATEOBJ(date,format),r=false;if(d){locale=locale||'default';try{r=d.toLocaleString(locale,{weekday:'long'});}catch(err){r=d.toLocaleString('default',{weekday:'long'});}}
return r;};lib.DAY=function(date,format,leading_zeros){var tmp=_processArguments.apply(null,arguments);date=tmp['date'];format=tmp['format'];leading_zeros=tmp['leading_zeros'];var d=_getDateObj(date,format),r=false;if(d.valid())
{r=d.getDate();if(leading_zeros)r=_leadingZeros(r);}
return r;};lib.WEEKDAY=function(date,format,leading_zeros){var tmp=_processArguments.apply(null,arguments);date=tmp['date'];format=tmp['format'];leading_zeros=tmp['leading_zeros'];var d=_getDateObj(date,format),r=false;if(d.valid()){r=d.getDay()+1;if(leading_zeros)r=_leadingZeros(r);}
return r;};lib.WEEKNUM=function(date,format,leading_zeros){var tmp=_processArguments.apply(null,arguments);date=tmp['date'];format=tmp['format'];leading_zeros=tmp['leading_zeros'];var d=_getDateObj(date,format),i,n,r=false;if(d.valid()){i=new Date(d.getFullYear(),0,1);n=(d-i)/(24*60*60*1000);r=Math.max(Math.ceil(n/7),1);if(leading_zeros)r=_leadingZeros(r);}
return r;};lib.HOURS=function(date,format,leading_zeros){var tmp=_processArguments.apply(null,arguments);date=tmp['date'];format=tmp['format'];leading_zeros=tmp['leading_zeros'];var d=_getDateObj(date,format),r=false;if(d.valid()){r=d.getHours();if(leading_zeros)r=_leadingZeros(r);}
return r;};lib.MINUTES=function(date,format,leading_zeros){var tmp=_processArguments.apply(null,arguments);date=tmp['date'];format=tmp['format'];leading_zeros=tmp['leading_zeros'];var d=_getDateObj(date,format),r=false;if(d.valid()){r=d.getMinutes();if(leading_zeros)r=_leadingZeros(r);}
return r;};lib.SECONDS=function(date,format,leading_zeros){var tmp=_processArguments.apply(null,arguments);date=tmp['date'];format=tmp['format'];leading_zeros=tmp['leading_zeros'];var d=_getDateObj(date,format),r=false;if(d.valid()){r=d.getSeconds();if(leading_zeros)r=_leadingZeros(r);}
return r;};lib.NOW=function(){return _getDateObj();};lib.TODAY=function(){var d=_getDateObj();d.setHours(0);d.setMinutes(0);d.setSeconds(0);return d;};lib.EOMONTH=function(d,n){n=(n||0)+1;var d1=_getDateObj(d);d1.setDate(1);d1.setMonth(d1.getMonth()+n);d1.setDate(d1.getDate()-1);return d1;};lib.DATEDIFF=function(date_one,date_two,date_format,return_format){var d1=_getDateObj(date_one,date_format),d2=_getDateObj(date_two,date_format),diff,r={'years':-1,'months':-1,'days':-1,'hours':-1,'minutes':-1,'seconds':-1};if(d1.valid()&&d2.valid()){if(d1.valueOf()>d2.valueOf()){d2=_getDateObj(date_one,date_format);d1=_getDateObj(date_two,date_format);}
diff=d2.valueOf()-d1.valueOf();if(typeof return_format=='undefined'||return_format=='d'){r.days=Math.floor(diff/86400000);}else{var months,days,tmp;months=(d2.getFullYear()-d1.getFullYear())*12;months-=d1.getMonth()+1;months+=d2.getMonth()+1;days=d2.getDate()-d1.getDate();if(days<0){months--;tmp=new Date(d1.getFullYear(),d1.getMonth()+1);tmp=tmp.setDate(tmp.getDate()-1);days=(tmp.valueOf()-d1.valueOf())/86400000+d2.getDate();}
r.months=months;r.days=Math.floor(days);if(/y/i.test(return_format)){r.years=Math.floor(months/12);r.months=months%12;}}
r.hours=Math.floor(diff%86400000/3600000);r.minutes=Math.floor(diff%86400000%3600000/60000);r.seconds=Math.floor(diff%86400000%3600000%60000/1000);}
return r;};if(typeof NETWORKDAYS=='undefined'){lib.NETWORKDAYS=lib.NETWORKDAYS=function(start_date,end_date,date_format,holidays,holidays_format){var tmp,result=0,min_date_tmp,max_date_tmp;date_format=date_format||'mm/dd/yyyy';holidays=holidays||[];holidays_format=holidays_format||date_format;start_date=DATEOBJ(start_date,date_format);end_date=DATEOBJ(end_date,date_format);min_date_tmp=Math.min(start_date,end_date);max_date_tmp=Math.max(start_date,end_date);start_date=new Date(min_date_tmp);end_date=new Date(max_date_tmp);if(!Array.isArray(holidays))holidays=[holidays];for(var i=0,h=holidays.length;i<h;i++){holidays[i]=GETDATETIMESTRING(DATEOBJ(holidays[i],holidays_format),'yyyy-mm-dd');}
while(start_date<=end_date){tmp=start_date.getDay();if(0!=tmp&&6!=tmp){tmp=GETDATETIMESTRING(start_date,'yyyy-mm-dd');if(holidays.indexOf(tmp)==-1)result++;}
start_date.setDate(start_date.getDate()+1);}
return result;};}
lib.DATETIMESUM=function(date,format,number,to_increase,ignore_weekend){var d=_getDateObj(date,format);ignore_weekend=ignore_weekend||false;if(d.valid()){if(typeof number!='number'&&isNaN(parseFloat(number)))number=0;else number=parseFloat(number);if(typeof to_increase=='undefined')to_increase='d';if(/y+/i.test(to_increase))d.setFullYear(d.getFullYear()+number);else if(/d+/i.test(to_increase)){if(ignore_weekend)
{var n=number<0?Math.ceil(number):Math.floor(number),s=number<0?-1:1;while(n)
{d.setDate(d.getDate()+s);if(0<d.getDay()&&d.getDay()<6)n-=s;}}
else d.setDate(d.getDate()+number);}
else if(/m+/i.test(to_increase)){var tmp=DAY(d)
d.setDate(1);d.setMonth(d.getMonth()+number);d=EOMONTH(d);d.setDate(MIN(tmp,DAY(d)));}
else if(/h+/i.test(to_increase))d.setHours(d.getHours()+number);else if(/i+/i.test(to_increase))d.setMinutes(d.getMinutes()+number);else d.setSeconds(d.getSeconds()+number);return d;}
return false;};lib.DECIMALTOTIME=lib.decimaltotime=function(value,from_format,to_format){function complete(v,f)
{if(1<f[0].length&&v<10)v='0'+v;return v;};from_format=from_format.toLowerCase();var y=/\by+\b/i.exec(to_format),m=/\bm+\b/i.exec(to_format),d=/\bd+\b/i.exec(to_format),h=/\bh+\b/i.exec(to_format),i=/\bi+\b/i.exec(to_format),s=/\bs+\b/i.exec(to_format),factor=1,components={};switch(from_format)
{case'y':factor=365*24*60*60;break;case'm':factor=30*24*60*60;break;case'd':factor=24*60*60;break;case'h':factor=60*60;break;case'i':factor=60;break;}
value*=factor;if(y){components['y']=FLOOR(value/(365*24*60*60));value=value%(365*24*60*60);}
if(m){components['m']=complete(FLOOR(value/(30*24*60*60)),m);value=value%(30*24*60*60);}
if(d){components['d']=complete(FLOOR(value/(24*60*60)),d);value=value%(24*60*60);}
if(h){components['h']=complete(FLOOR(value/(60*60)),h);value=value%(60*60);}
if(i){components['i']=complete(FLOOR(value/60),i);value=value%60;}
if(s){components['s']=complete(FLOOR(value),s);}
for(var index in components)
{to_format=to_format.replace(new RegExp('\\b'+index+'+\\b','i'),components[index]);}
return to_format;};lib.TIMETODECIMAL=lib.timetodecimal=function(value,from_format,to_format){from_format=from_format.replace(/[^ymdhis\:\s]/ig).replace(/^[\s\:]+/,'').replace(/[\s\:]+$/,'').replace(/[\s\:]+/g,' ');value=(value+'').replace(/^[\s\:]+/,'').replace(/[\s\:]+$/,'').replace(/[\s\:]+/g,' ');to_format=to_format.toLowerCase();var value_components=value.split(/\s+/g),from_components=from_format.split(/\s+/g),factor=1,result=0;for(var j in from_components)
{if(/y/i.test(from_components[j]))factor=365*24*60*60;else if(/m/i.test(from_components[j]))factor=30*24*60*60;else if(/d/i.test(from_components[j]))factor=24*60*60;else if(/h/i.test(from_components[j]))factor=60*60;else if(/i/i.test(from_components[j]))factor=60;else if(/s/i.test(from_components[j]))factor=1;result+=value_components[j]*factor;}
switch(to_format)
{case'y':factor=365*24*60*60;break;case'm':factor=30*24*60*60;break;case'd':factor=24*60*60;break;case'h':factor=60*60;break;case'i':factor=60;break;case's':factor=1;break;}
return result/factor;};lib.GETDATETIMESTRING=function(date,format){if(typeof format=='undefined')format=default_format;if(date.valid()){var m=date.getMonth()+1,d=date.getDate(),h=date.getHours(),i=date.getMinutes(),s=date.getSeconds(),a=(h>=12)?'pm':'am';m=(m<10)?'0'+m:m;d=(d<10)?'0'+d:d;if(/a+/.test(format)){h=h%12;h=(h)?h:12;}
h=(h<10)?'0'+h:h;i=(i<10)?'0'+i:i;s=(s<10)?'0'+s:s;return format.replace(/\by{2}\b/i,date.getFullYear()%100).replace(/y+/i,date.getFullYear()).replace(/m+/i,m).replace(/d+/i,d).replace(/h+/i,h).replace(/i+/i,i).replace(/s+/i,s).replace(/a+/i,a);}
return date;};root.CF_DATETIME=lib;})(this);fbuilderjQuery=(typeof fbuilderjQuery!='undefined')?fbuilderjQuery:jQuery;fbuilderjQuery['fbuilder']=fbuilderjQuery['fbuilder']||{};fbuilderjQuery['fbuilder']['modules']=fbuilderjQuery['fbuilder']['modules']||{};fbuilderjQuery['fbuilder']['modules']['datetime']={'prefix':'','callback':function()
{fbuilderjQuery['fbuilder']['extend_window'](fbuilderjQuery['fbuilder']['modules']['datetime']['prefix'],CF_DATETIME);},'validator':function(v)
{if(/^\s*((\d{4}[\/\-\.]\d{1,2}[\/\-\.]\d{1,2})|(\d{1,2}[\/\-\.]\d{1,2}[\/\-\.]\d{4}))?\s*(\d{1,2}\s*:\s*\d{1,2}(\s*:\s*\d{1,2})?(\s*[ap]m)?)?\s*$/i.test(v))
{return true;}
return false;}};;(function(root){var lib={};lib.cf_finance_version='0.2';var daysDiff=function(d1,d2){var oneDay=24*60*60*1000;d1=new Date(d1);d2=new Date(d2);return Math.round(Math.abs((d1.getTime()-d2.getTime())/oneDay));};lib.settings={format:'number',formats:{USD:{before:'$',after:'',precision:2,decimal:'.',thousand:',',group:3,negative:'-'},GBP:{before:'£',after:'',precision:2,decimal:'.',thousand:',',group:3,negative:'-'},EUR:{before:'€',after:'',precision:2,decimal:'.',thousand:',',group:3,negative:'-'},percent:{before:'',after:'%',precision:0,decimal:'.',thousand:',',group:3,negative:'-'},number:{before:'',after:'',precision:null,decimal:'.',thousand:',',group:3,negative:'-'},defaults:{before:'',after:'',precision:0,decimal:'.',thousand:',',group:3,negative:'-'}}};lib.defaults=function(object,defs){var key;object=object||{};defs=defs||{};for(key in defs){if(defs.hasOwnProperty(key)){if(object[key]==null)object[key]=defs[key];}}
return object;};lib.ADDFORMAT=function(key,options){this.settings.formats[key]=this.defaults(options,this.settings.formats.defaults);return true;};lib.REMOVEFORMAT=function(key){delete this.settings.formats[key];return true;};lib.NUMBERFORMAT=function(num,settings,override){num=parseFloat(num);if(settings===undefined)
settings=this.settings.formats[this.settings.format];else if(typeof settings=='string')
settings=this.settings.formats[settings];else settings=settings;settings=this.defaults(settings,this.settings.formats.defaults);if(override!==undefined)
settings=this.defaults(override,settings);var tmp=num;if(settings.precision!=null)
{tmp=Math.abs(num);tmp=tmp.toFixed(settings.precision);num=num.toFixed(settings.precision);}
var isNeg=num<0,numParts=tmp.toString().split('.'),baseLen=numParts[0].length;numParts[0]=numParts[0].replace(/(\d)/g,function(str,m1,offset,s){return(offset>0&&(baseLen-offset)%settings.group==0)?settings.thousand+m1:m1;});num=numParts.join(settings.decimal);if(isNeg&&settings.negative){num=settings.negative[0]+num;if(settings.negative.length>1)
num+=settings.negative[1];}
return settings.before+num+settings.after;};lib.PRESENTVALUE=lib.PV=function(rate,nper,pmt,fv,type){var type=(typeof type==='undefined')?0:type,fv=(typeof fv==='undefined')?0:fv;if(rate===0)return Math.abs(-pmt*nper-fv);return Math.abs((((1-Math.pow(1+rate,nper))/rate)*pmt*(1+rate*type)-fv)/Math.pow(1+rate,nper));};lib.FUTUREVALUE=lib.FV=function(rate,nper,pmt,pv,type){if(typeof pv=='undefined')pv=0;if(typeof type=='undefined')type=0;rate=rate/100;var pow=Math.pow(1+rate,nper);var fv=0;if(rate){fv=(pmt*(1+rate*type)*(1-pow)/rate)-pv*pow;}else{fv=-1*(pv+pmt*nper);}
return fv;};lib.CALCULATEACCRUEDINTEREST=function(principle,months,rate){var i=rate/1200;return(principle*Math.pow(1+i,months))-principle;};lib.CALCULATEAMOUNT=function(finMonths,finInterest,finPayment){var result=0;if(finInterest==0){result=finPayment*finMonths;}
else{var i=((finInterest/100)/12),i_to_m=Math.pow((i+1),finMonths);result=finPayment/((i*i_to_m)/(i_to_m-1));}
return result;};lib.CALCULATEMONTHS=function(finAmount,finInterest,finPayment){var result=0;if(finInterest==0){result=Math.ceil(finAmount/finPayment);}
else{result=Math.round(((-1/12)*(Math.log(1-(finAmount/finPayment)*((finInterest/100)/12)))/Math.log(1+((finInterest/100)/12)))*12);}
return result;};lib.NPER=function(rate,payment,present,future,type){rate/=100;var type=type||0,future=future||0,num=payment*(1+rate*type)-future*rate,den=(present*rate+payment*(1+rate*type));return Math.log(num/den)/Math.log(1+rate);};lib.CALCULATEINTEREST=function(finAmount,finMonths,finPayment){var result=0;var min_rate=0,max_rate=100;while(min_rate<max_rate-0.0001){var mid_rate=(min_rate+max_rate)/2,j=mid_rate/1200,guessed_pmt=finAmount*(j/(1-Math.pow(1+j,finMonths*-1)));if(guessed_pmt>finPayment){max_rate=mid_rate;}
else{min_rate=mid_rate;}}
return mid_rate;};lib.CALCULATEPAYMENT=function(finAmount,finMonths,finInterest){var result=0;if(finInterest==0){result=finAmount/finMonths;}
else{var i=((finInterest/100)/12),i_to_m=Math.pow((i+1),finMonths);result=finAmount*((i*i_to_m)/(i_to_m-1));}
return result;};lib.CALCULATEAMORTIZATION=function(finAmount,finMonths,finInterest,finDate){var payment=this.CALCULATEPAYMENT(finAmount,finMonths,finInterest),balance=finAmount,interest=0.0,totalInterest=0.0,schedule=[],currInterest=null,currPrinciple=null,currDate=(finDate!==undefined&&finDate.constructor===Date)?finDate:(new Date());for(var i=0;i<finMonths;i++){currInterest=balance*finInterest/1200;totalInterest+=currInterest;currPrinciple=payment-currInterest;balance-=currPrinciple;schedule.push({principle:balance,interest:totalInterest,payment:payment,paymentToPrinciple:currPrinciple,paymentToInterest:currInterest,date:new Date(currDate.getTime())});currDate.setMonth(currDate.getMonth()+1);}
return schedule;};lib.PMT=function(rate,nper,pv,fv,type){if(!fv)fv=0;if(!type)type=0;rate/=100;var result;if(rate===0){result=(pv+fv)/nper;}else{var term=Math.pow(1+rate,nper);if(type===1){result=(fv*rate/(term-1)+pv*rate/(1-1/term))/(1+rate);}else{result=fv*rate/(term-1)+pv*rate/(1-1/term);}}
return-result;};lib.PVIF=function(rate,nper){return 1/Math.pow(1+rate/100,nper);};lib.FVIFA=function(rate,nper){rate=rate/100;return rate==0?nper:(Math.pow(1+rate,nper)-1)/rate;};lib.IPMT=function(rate,per,nper,pv,fv,type){if(!fv)fv=0;if(!type)type=0;var payment=this.PMT(rate,nper,pv,fv,type);var interest;if(per===1){if(type===1){interest=0;}else{interest=-pv;}}else{if(type===1){interest=this.FUTUREVALUE(rate,per-2,payment,pv,1)-payment;}else{interest=this.FUTUREVALUE(rate,per-1,payment,pv,0);}}
return interest*rate/100;};lib.PPMT=function(rate,per,nper,pv,fv,type){if(!fv)fv=0;if(!type)type=0;if(per<1||(per>=nper+1))return null;var pmt=this.PMT(rate,nper,pv,fv,type);var ipmt=this.IPMT(rate,per,nper,pv,fv,type);return pmt-ipmt;};lib.NPV=function(rate,vs){var npv=0;for(var i in vs)npv+=vs[i]/Math.pow(1+rate/100,i*1+1);return npv;};lib.XNPV=function(rate,vs,ds){var xnpv=0,fd=ds[0];for(var i in vs)xnpv+=vs[i]/Math.pow(1+rate/100,daysDiff(fd,ds[i])/365);return xnpv;};lib.IRR=function(vs,guess){var ds=[],d=new Date();for(var i=0,h=vs.length;i<h;i++){ds.push(GETDATETIMESTRING(d,'yyyy-mm-dd'));d.setDate(d.getDate()+365);};return lib.XIRR(vs,ds,guess);};lib.XIRR=function(vs,ds,guess){var fd=ds[0],irrResult=function(r){r++;var rs=vs[0];for(var i=1;i<vs.length;i++){rs+=vs[i]/Math.pow(r,daysDiff(ds[i],fd)/365);}
return rs;},irrResultDeriv=function(r){r++;var rs=0;for(var i=1;i<vs.length;i++){var frac=daysDiff(ds[i],fd)/365;rs-=frac*vs[i]/Math.pow(r,frac+1);}
return rs;},p=false,n=false,resultRate=(typeof guess==='undefined')?0.1:guess/100,epsMax=1e-10,iterMax=50,newRate,epsRate,resultValue,iteration=0,contLoop=true;for(var i=0;i<vs.length;i++){if(vs[i]>0)p=true;if(vs[i]<0)n=true;}
if(!p||!n)return NaN;do{resultValue=irrResult(resultRate);newRate=resultRate-resultValue/irrResultDeriv(resultRate);epsRate=Math.abs(newRate-resultRate);resultRate=newRate;contLoop=(epsRate>epsMax)&&(Math.abs(resultValue)>epsMax);}while(contLoop&&(++iteration<iterMax));if(contLoop)return NaN;return resultRate;};lib.MIRR=function(v,fr,rr){var n=v.length,p=[],i=[],num,den;for(var j=0;j<n;j++)
{if(v[j]<0)p.push(v[j]);else i.push(v[j]);}
num=-1*this.NPV(rr,i)*Math.pow(1+rr/100,n-1);den=this.NPV(fr,p)*(1+fr/100);return(Math.pow(num/den,1/(n-1))-1)*100;};root.CF_FINANCE=lib;})(this);fbuilderjQuery=(typeof fbuilderjQuery!='undefined')?fbuilderjQuery:jQuery;fbuilderjQuery['fbuilder']=fbuilderjQuery['fbuilder']||{};fbuilderjQuery['fbuilder']['modules']=fbuilderjQuery['fbuilder']['modules']||{};fbuilderjQuery['fbuilder']['modules']['financial']={'prefix':'','callback':function()
{fbuilderjQuery['fbuilder']['extend_window'](fbuilderjQuery['fbuilder']['modules']['financial']['prefix'],CF_FINANCE);},'validator':function(v)
{return(typeof v=='number')?isFinite(v):(typeof v!='undefined');}};;(function(root){var lib={},defaultUnitSystem='km',defaultTravelMode='DRIVING',defaultAvoidHighways=false,defaultAvoidTolls=false,defaultAvoidFerries=false,latlngArr={},distanceArr=[],geocodingObj={},travelTimeArr=[],callbacks=[],currentLatLng,cff_timeout_id={};function _runCallbacks()
{var h=callbacks.length;if(h)
{for(var i=0;i<h;i++)
{callbacks[i]();}}
callbacks=[];};function _createScriptTags()
{if(!('loadingGoogleMaps'in fbuilderjQuery))
{fbuilderjQuery.loadingGoogleMaps=true;var script=document.createElement('script');script.type="text/javascript";script.src='//maps.google.com/maps/api/js?'+((typeof google_api_key!='undefined')?'key='+google_api_key+'&':'')+'callback=cff_google_maps_loaded';document.body.appendChild(script);}};function _getValue(attr,val)
{if(typeof google!='undefined'&&typeof google['maps']!='undefined')
{val=String(val).toUpperCase();switch(attr)
{case'unitSystem':val=(val=='MI')?google.maps.UnitSystem.IMPERIAL:google.maps.UnitSystem.METRIC;break;case'travelMode':switch(val)
{case'BICYCLING':val=google.maps.TravelMode.BICYCLING;break;case'TRANSIT':val=google.maps.TravelMode.TRANSIT;break;case'WALKING':val=google.maps.TravelMode.WALKING;break;default:val=google.maps.TravelMode.DRIVING;break;}
break;}}
return val;};function _reCalculate(eq)
{$.fbuilder.calculator.enqueueEquation(eq.identifier,[eq]);if(!(eq.identifier in $.fbuilder.calculator.processing_queue)||!$.fbuilder.calculator.processing_queue[eq.identifier])
{$.fbuilder.calculator.processQueue(eq.identifier);}};lib.cf_distance_version='0.2';lib.currentlatlng=lib.CURRENTLATLNG=function(eq)
{eq=(typeof eq!='undefined')?eq:$.fbuilder['currentEq'];if(typeof currentLatLng!='undefined')return currentLatLng;if('geolocation'in navigator){navigator.geolocation.getCurrentPosition(function(position){currentLatLng=[position.coords.latitude,position.coords.longitude];_reCalculate(eq);});}else{return'FAIL';}};lib.LATLNG=function(address,eq)
{address=''+address;address=address.trim();if(address.length==0)return'';if(address in latlngArr)return latlngArr[address];eq=(typeof eq!='undefined')?eq:$.fbuilder['currentEq'];if(typeof google=='undefined'||google['maps']==null)
{callbacks.push((function(address)
{return function(){LATLNG(address,eq)};})(address,eq));_createScriptTags();return;}
else
{var g=new google.maps.Geocoder();g.geocode({'address':address},(function(address){return function(result,status){try{if(status&&status=="OK"){var lat=result[0]['geometry']['location'].lat(),lng=result[0]['geometry']['location'].lng();latlngArr[address]=[lat,lng];}
else
{latlngArr[address]='FAIL';console.log('GeocoderStatus:'+status);}}catch(err){latlngArr[address]='FAIL';}
_reCalculate(eq);};})(address));}};lib.DISTANCE=function(address_a,address_b,unit_system,travel_mode,eq){function getIndex(a,b,m)
{for(var i in distanceArr)
{if(distanceArr[i]['a']==a&&distanceArr[i]['b']==b&&distanceArr[i]['m']==m)return i;}
return-1;}
function _haversine(eq,addresses)
{var g=new google.maps.Geocoder();for(var i in addresses)
{g.geocode({address:addresses[i]},(function(eq,addresses,i)
{$.fbuilder.calculator.addPending(eq.identifier);return function(result,status){var dist;$.fbuilder.calculator.removePending(eq.identifier);geocodingObj[addresses[i]]=false;if(status&&status=="OK")
{geocodingObj[addresses[i]]={lat:result[0]['geometry']['location'].lat(),lng:result[0]['geometry']['location'].lng()}}
if(addresses[0]in geocodingObj&&addresses[1]in geocodingObj)
{if(geocodingObj[addresses[0]]==false||geocodingObj[addresses[1]]==false)dist='FAIL';else
{var lat1=geocodingObj[addresses[0]]['lat'],lng1=geocodingObj[addresses[0]]['lng'],lat2=geocodingObj[addresses[1]]['lat'],lng2=geocodingObj[addresses[1]]['lng'];if((lat1==lat2)&&(lng1==lng2))dist=0;else
{var a=POW(SIN(RADIANS(lat2-lat1)/2),2)+POW(SIN(RADIANS(lng2-lng1)/2),2)*COS(RADIANS(lat1))*COS(RADIANS(lat2)),c=2*ATAN2(SQRT(a),SQRT(1-a));dist=c*6371000;}}
var j=getIndex(addresses[0],addresses[1],'STRAIGHT');distanceArr[j]['distance']=dist;_reCalculate(eq);}};})(eq,addresses,i));}};if(typeof address_a!='undefined'&&typeof address_b!='undefined')
{address_a=(new String(address_a)).replace(/^\s+/,'').replace(/\s+$/,'');address_b=(new String(address_b)).replace(/^\s+/,'').replace(/\s+$/,'');if(address_a.length>2&&address_b.length>2)
{if(typeof unit_system=='undefined')unit_system=defaultUnitSystem;if(typeof travel_mode=='undefined')travel_mode=defaultTravelMode;eq=(typeof eq!='undefined')?eq:$.fbuilder['currentEq'];var i=getIndex(address_a,address_b,travel_mode);if(i!=-1)
{if(distanceArr[i]['distance']=='pending')return;return(isNaN(distanceArr[i]['distance']))?distanceArr[i]['distance']:distanceArr[i]['distance']/((/mi/i.test(unit_system))?1609.344:1000);}
if(typeof google=='undefined'||google['maps']==null)
{callbacks.push((function(address_a,address_b,unit_system,travel_mode,eq)
{return function(){DISTANCE(address_a,address_b,unit_system,travel_mode,eq)};})(address_a,address_b,unit_system,travel_mode,eq));_createScriptTags();return;}
distanceArr.push({'a':address_a,'b':address_b,'distance':'pending','m':travel_mode});if(travel_mode=='STRAIGHT')
{_haversine(eq,[address_a,address_b]);}
else
{var service=new google.maps.DistanceMatrixService(),request={origins:[address_a],destinations:[address_b],travelMode:_getValue('travelMode',travel_mode),unitSystem:_getValue('unitSystem',unit_system),avoidHighways:(typeof avoid_highways=='boolean')?avoid_highways:defaultAvoidHighways,avoidTolls:(typeof avoid_tolls=='boolean')?avoid_tolls:defaultAvoidTolls,avoidFerries:(typeof avoid_ferries=='boolean')?avoid_ferries:defaultAvoidFerries};service.getDistanceMatrix(request,(function(eq,request,travel_mode)
{$.fbuilder.calculator.addPending(eq.identifier);return function(response,status)
{var r;$.fbuilder.calculator.removePending(eq.identifier);if(status==google.maps.DistanceMatrixStatus.OK)
{try{if(response.rows[0].elements[0].status==google.maps.DistanceMatrixElementStatus.OK)
{r=response.rows[0].elements[0].distance['value'];}
else
{if(typeof console!='undefined')
console.log('DistanceMatrixElementStatus:'+response.rows[0].elements[0].status);r='FAIL';}}catch(err){r='FAIL';}}
else if(status==google.maps.DistanceMatrixStatus.OVER_QUERY_LIMIT)
{if(eq.identifier in cff_timeout_id)clearTimeout(cff_timeout_id[eq.identifier]);cff_timeout_id[eq.identifier]=setTimeout(function(){distanceArr=distanceArr.filter(function(i){return i['distance']!='pending'});_reCalculate(eq);},1000);return;}
else
{if(typeof console!='undefined')
console.log('DistanceMatrixStatus:'+status);r='FAIL';}
var i=getIndex(request.origins[0],request.destinations[0],travel_mode);distanceArr[i]['distance']=r;_reCalculate(eq);};})(eq,request,travel_mode));}}}
return 0;};lib.TRAVELTIME=function(address_a,address_b,as_text,travel_mode,avoid_highways,avoid_tolls,eq){function getIndex(a,b,m,x,h,t)
{for(var i in travelTimeArr)
{if(travelTimeArr[i]['a']==a&&travelTimeArr[i]['b']==b&&travelTimeArr[i]['m']==m&&travelTimeArr[i]['x']==x&&travelTimeArr[i]['h']==h&&travelTimeArr[i]['t']==t)return i;}
return-1;}
if(typeof address_a!='undefined'&&typeof address_b!='undefined')
{address_a=(new String(address_a)).replace(/^\s+/,'').replace(/\s+$/,'');address_b=(new String(address_b)).replace(/^\s+/,'').replace(/\s+$/,'');if(address_a.length>2&&address_b.length>2)
{if(typeof as_text=='undefined')as_text=false;if(typeof travel_mode=='undefined')travel_mode=defaultTravelMode;if(typeof avoid_highways!='boolean')avoid_highways=defaultAvoidHighways;if(typeof avoid_tolls!='boolean')avoid_tolls=defaultAvoidTolls;eq=(typeof eq!='undefined')?eq:$.fbuilder['currentEq'];var i=getIndex(address_a,address_b,travel_mode,as_text,avoid_highways,avoid_tolls);if(i!=-1)
{if(travelTimeArr[i]['time']=='pending')return;return travelTimeArr[i]['time'];}
if(typeof google=='undefined'||google['maps']==null)
{callbacks.push((function(address_a,address_b,as_text,travel_mode,avoid_highways,avoid_tolls,eq)
{return function(){TRAVELTIME(address_a,address_b,as_text,travel_mode,avoid_highways,avoid_tolls,eq)};})(address_a,address_b,as_text,travel_mode,avoid_highways,avoid_tolls,eq));_createScriptTags();return;}
travelTimeArr.push({'a':address_a,'b':address_b,'m':travel_mode,'x':as_text,'h':avoid_highways,'t':avoid_tolls,'time':'pending'});var service=new google.maps.DistanceMatrixService(),request={origins:[address_a],destinations:[address_b],travelMode:_getValue('travelMode',travel_mode),avoidHighways:avoid_highways,avoidTolls:avoid_tolls,avoidFerries:(typeof avoid_ferries=='boolean')?avoid_ferries:defaultAvoidFerries};service.getDistanceMatrix(request,(function(eq,as_text,request,travel_mode,as_text,avoid_highways,avoid_tolls)
{$.fbuilder.calculator.addPending(eq.identifier);return function(response,status)
{var r;$.fbuilder.calculator.removePending(eq.identifier);if(status==google.maps.DistanceMatrixStatus.OK)
{try{r=response.rows[0].elements[0].duration[(as_text)?'text':'value'];}catch(err){r='FAIL';}}
else if(status==google.maps.DistanceMatrixStatus.OVER_QUERY_LIMIT)
{if(eq.identifier in cff_timeout_id)clearTimeout(cff_timeout_id[eq.identifier]);cff_timeout_id[eq.identifier]=setTimeout(function(){travelTimeArr=travelTimeArr.filter(function(i){return i['time']!='pending'});_reCalculate(eq);},1000);return;}
else r='FAIL';var i=getIndex(request.origins[0],request.destinations[0],travel_mode,as_text,avoid_highways,avoid_tolls);travelTimeArr[i]['time']=r;_reCalculate(eq);};})(eq,as_text,request,travel_mode,as_text,avoid_highways,avoid_tolls));}}
return 0;};lib.DMSTODD=lib.dmstodd=lib.DMStoDD=function(v){v=v.replace(/^\s+/g,'').replace(/\s+$/g,'');var p=v.match(/^([\d\.]+)[^\d]+([\d\.]+)[^\d]+([\d\.]+)[^NSEW]+([NSEW])$/i);if(p)return((p[4].match(/[sw]/i))?-1:1)*(p[1]*1+p[2]/60+p[3]/(60*60));return v;};lib.cff_google_maps_loaded=function(){jQuery(document).trigger('cff-google-maps-loaded');};jQuery(document).on('cff-google-maps-loaded',_runCallbacks);root.CF_DISTANCE=lib;})(this);fbuilderjQuery=(typeof fbuilderjQuery!='undefined')?fbuilderjQuery:jQuery;fbuilderjQuery['fbuilder']=fbuilderjQuery['fbuilder']||{};fbuilderjQuery['fbuilder']['modules']=fbuilderjQuery['fbuilder']['modules']||{};fbuilderjQuery['fbuilder']['modules']['distance']={'prefix':'','callback':function()
{fbuilderjQuery['fbuilder']['extend_window'](fbuilderjQuery['fbuilder']['modules']['distance']['prefix'],CF_DISTANCE);}};;(function(root){var lib={formsDependency:{}},elements_equations={};lib.cf_processing_version='0.1';function _getForm(_form)
{if(typeof _form=='undefined'||_form==null){if('currentFormId'in fbuilderjQuery.fbuilder)_form=fbuilderjQuery.fbuilder.currentFormId;else return'_1';}
if(/^_\d*$/.test(_form))return _form;if(/^\d*$/.test(_form))return'_'+_form;return $($(_form).length?_form:'#'+_form).find('[name="cp_calculatedfieldsf_pform_psequence"]').val();}
function _getField(_field,_form)
{try
{if(typeof _field=='undefined')return false;if(typeof _field=='object')
{if('ftype'in _field)return _field;if('jquery'in _field)
{if(_field.length)_field=_field[0];else return false;}
if('getAttribute'in _field)
{_form=$(_field).closest('form');var to_check=_field.getAttribute('class').match(/fieldname\d+/);if(to_check)_field=to_check[0];else{_field=_field.getAttribute('name').match(/fieldname\d+/)[0];}}
else return false;}
if(typeof _form=='undefined'&&typeof _field=='string'&&_field.match(/fieldname\d+(_\d+)/))_form=_field.match(/fieldname\d+(_\d+)/)[1];return $.fbuilder['forms'][_getForm(_form)].getItem(_field);}catch(err){return false;}}
function _fillElementsArray(e){if(!(e in elements_equations)){elements_equations[e]={};$(e).on('change keyup',function(){for(let i in elements_equations[e]){EVALEQUATION(i);}});}
if('currentEq'in $.fbuilder){if(!($.fbuilder['currentEq']['result']in elements_equations[e])){elements_equations[e][$.fbuilder['currentEq']['result']]=1;}}}
lib.ELEMENTINFO=function(selector,to_get){let e=$(selector),r=[];to_get=(new String(to_get||'value')).toLowerCase().replace(/^\s*/,'').replace(/\s*$/,'');to_get=['html','text'].indexOf(to_get)!=-1?to_get:'val';if(e.length){_fillElementsArray(selector);e.each(function(i,e){r.push($(e)[to_get]());});}
return r.length==0?null:(r.length==1?r[0]:r);};lib.getField=function(_field,_form)
{var _fi=_getField(_field,_form),_fo;if(_fi){try{_fo=_fi['form_identifier'];if(_fo&&_fi&&'currentFormId'in $.fbuilder&&'currentEq'in $.fbuilder&&$.fbuilder['currentEq']['identifier']!=_fo){var _eqResultField=$.fbuilder['currentEq']['result'];if(!(_fi.name in lib.formsDependency)){lib.formsDependency[_fi.name]={};$('[name *= "'+_fi.name+'"]').on('change keyup depEvent',function(){var _fname=$(this).attr('name').match(/fieldname\d+_\d+/)[0];if(_fname in lib.formsDependency){for(var i in lib.formsDependency[_fname]){EVALEQUATION(i,lib.formsDependency[_fname][i])}}});}
lib.formsDependency[_fi.name][_eqResultField]=$.fbuilder['currentFormId'];}}catch(err){}}else if(typeof _form!='undefined'){if('currentFormId'in $.fbuilder&&'currentEq'in $.fbuilder){var _eqResultField=$.fbuilder['currentEq']['result'];$(_form).on('change keyup depEvent','[name*="'+_field+'"]',(function(_field){return function(){EVALEQUATION(_field);};})(_eqResultField));}}
return _fi;};lib.validform=lib.VALIDFORM=lib.ValidForm=function(_form,_silent){_silent=_silent||false;var o=_getForm(_form),f;if(o){f=$('[id="'+$.fbuilder.forms[o]['formId']+'"]');if(f.length)return _silent?f.validate().checkForm():f.valid();}
return false;};lib.validfield=lib.VALIDFIELD=lib.ValidField=function(_field,_form,_silent){_silent=_silent||false;var o=_getForm(_form),f=_getField(_field,_form),j;if(f){j=f.jQueryRef().find(':input');if(j.length)
return _silent?j.closest('form').validate().check(j):j.valid();}
return false;};lib.activatefield=lib.ACTIVATEFIELD=function(_field,_form)
{var o=_getForm(_form),f=_getField(_field,_form),j;if(f)
{j=f.jQueryRef();j.removeClass('ignorefield');if(j.find('[id*="'+f.name+'"]').hasClass('ignore'))
{j.add(j.find('.fields')).show();if(f.name in $.fbuilder.forms[o].toHide)delete $.fbuilder.forms[o].toHide[f.name];if(!(f.name in $.fbuilder.forms[o].toShow))$.fbuilder.forms[o].toShow[f.name]={'ref':{}};j.find('[id*="'+f.name+'"]').removeClass('ignore').change();$.fbuilder.showHideDep({'formIdentifier':o,'fieldIdentifier':f.name});}}};lib.ignorefield=lib.IGNOREFIELD=function(_field,_form)
{var o=_getForm(_form),f=_getField(_field,_form),j;if(f)
{j=f.jQueryRef();j.addClass('ignorefield');if(!j.find('[id*="'+f.name+'"]').hasClass('ignore'))
{j.add(j.find('.fields')).hide();if(!(f.name in $.fbuilder.forms[o].toHide))$.fbuilder.forms[o].toHide[f.name]={};if(f.name in $.fbuilder.forms[o].toShow)delete $.fbuilder.forms[o].toShow[f.name];j.find('[id*="'+f.name+'"]').addClass('ignore').change();$.fbuilder.showHideDep({'formIdentifier':o,'fieldIdentifier':f.name});}}};lib.isignored=lib.ISIGNORED=function(_field,_form)
{var o=_getForm(_form),f=_getField(_field,_form),j;if(f)return 0<f.jQueryRef().find('.ignore').length;return false;};lib.showfield=lib.SHOWFIELD=function(_field,_form)
{var f=_getField(_field,_form),j;if(f)
{j=f.jQueryRef();if(!j.find('[id*="'+f.name+'"]').hasClass('ignore'))
j.removeClass('hide-strong').show();}};lib.hidefield=lib.HIDEFIELD=function(_field,_form)
{var f=_getField(_field,_form);if(f)
{j=f.jQueryRef();if(!j.find('[id*="'+f.name+'"]').hasClass('ignore'))
f.jQueryRef().addClass('hide-strong');}};lib.ishidden=lib.ISHIDDEN=function(_field,_form)
{var o=_getForm(_form),f=_getField(_field,_form),j;if(f)return f.jQueryRef().is(':hidden');return true;};lib.disableequations=lib.DISABLEEQUATIONS=function(f)
{jQuery(f||'[id*="cp_calculatedfieldsf_pform_"]').attr('data-evalequations',0);};lib.enableequations=lib.ENABLEEQUATIONS=function(f)
{jQuery(f||'[id*="cp_calculatedfieldsf_pform_"]').attr('data-evalequations',1);};lib.EVALEQUATIONS=lib.evalequations=function(f)
{if(typeof f!='undefined'){fbuilderjQuery.fbuilder.calculator.defaultCalc(f,false,true);}else{for(var i in fbuilderjQuery.fbuilder.forms){fbuilderjQuery.fbuilder.calculator.defaultCalc(jQuery('[id="'+fbuilderjQuery.fbuilder.forms[i].formId+'"]'),false,true);}}};lib.EVALEQUATION=lib.evalequation=function(_field,_form)
{try
{if(typeof _field=='object'&&'tagName'in _field&&_field.tagName=='FORM')
[_field,_form]=[_form,_field];var c=fbuilderjQuery.fbuilder.calculator;if(typeof _field=='undefined')c.defaultCalc(_form);var f=_getField(_field,_form),o=f.jQueryRef().closest('form')[0];for(i in o.equations)
{if(o.equations[i].result==f.name){c.enqueueEquation(f.form_identifier,[o.equations[i]]);c.processQueue(f.form_identifier);return;}}}
catch(err){if('console'in window)console.log(err);}};lib.COPYFIELDVALUE=lib.copyfieldvalue=function(_field,_form)
{var f=_getField(_field,_form),j;if(f)
{j=f.jQueryRef().find(':input:eq(0)');if(j.length)
{try
{if(j.is(':visible')){j.select();document.execCommand('copy');}else navigator.clipboard.writeText(j.val());}catch(err){}}}};lib.gotopage=lib.GOTOPAGE=lib.goToPage=function(p,f)
{try
{var o=$('#'+$.fbuilder['forms'][_getForm(f)].formId),c;if(o.length)
{c=o.find('.pbreak:visible').attr('page');$.fbuilder.goToPage({'form':o,'from':c,'to':p,'forcing':true});}}catch(err){if('console'in window)console.log(err);}};lib.gotofield=lib.GOTOFIELD=lib.goToField=function(e,f)
{try
{var o=$('#'+$.fbuilder['forms'][_getForm(f)].formId),p,c;if(o.length)
{e=o.find('[id*="'+(Number.isInteger(e)?'fieldname'+e:e)+'_"]');if(e.length)
{c=o.find('.pbreak:visible').attr('page');p=e.closest('.pbreak').attr('page');$(document).one('cff-gotopage',function(evt,arg){if(e.is(':visible'))
$('html,body').animate({scrollTop:e.offset().top});});$.fbuilder.goToPage({'form':o,'from':c,'to':p,'forcing':true});}}}catch(err){if('console'in window)console.log(err);}};if(window.PRINTFORM==undefined)
{lib.printform=lib.PRINTFORM=function(show_pages,f)
{f=_getForm(f);function addRemoveClasses(add){var o=$('#'+$.fbuilder['forms'][f].formId),m=add?'addClass':'removeClass';if(o.length)
{o[m]('cff-print');if(!!show_pages)o.find('.pbreak')[m]('cff-print');while(o.length)
{o.siblings()[m]('cff-no-print');o=o.parent();}}};addRemoveClasses(true);window.print();setTimeout(function(){addRemoveClasses(false);},5000);};}
lib.RESETFORM=lib.resetform=function(f)
{function _reset(f){try{if(f.length&&f[0].tagName=='FORM'){if(!f.hasClass('cff-reset-form')){let seq=f.find('[name="cp_calculatedfieldsf_pform_psequence"]');if(seq.length){let fid=seq.val();f[0].reset();setTimeout(function()
{var id=f.attr('id');f.validate().resetForm();f.find('.select2-hidden-accessible').change();f.find(':data(manually)').removeData('manually');$.fbuilder['showHideDep']({'formIdentifier':fid});$.fbuilder.forms[fid]['currentPage']=0;$("#fieldlist"+fid+" .pbreak").css("display","none");$("#fieldlist"+fid+" .pbreak").find(".field").addClass("ignorepb");$("#fieldlist"+fid+" .pb0").css("display","block");if($("#fieldlist"+fid+" .pb0").find(".field").length>0)
{$("#fieldlist"+fid+" .pb0").find(".field").removeClass("ignorepb");try
{$("#fieldlist"+fid+" .pb0").find(".field")[0].focus();}
catch(e){}}
if(f.attr('data-evalequations')*1){f.addClass('cff-reset-form');$.fbuilder['calculator'].defaultCalc('#'+id,false);}},50);}}else{setTimeout(function(){f.removeClass('cff-reset-form');},500);}}}catch(err){}}
if(typeof f!='undefined'){_reset(jQuery(f));}else{for(var i in fbuilderjQuery.fbuilder.forms){_reset(jQuery('[id="'+fbuilderjQuery.fbuilder.forms[i].formId+'"]'));}}};if(window.cffsanitize==undefined){lib.cffsanitize=lib.CFFSANITIZE=function(v,script_only){script_only=script_only||0;if(Array.isArray(v)||(typeof v==='object'&&!Array.isArray(v)&&v!==null)){for(var i in v){v[i]=lib.CFFSANITIZE(v[i],script_only);}}else{if(typeof v=='string'){if(script_only){v=v.replace(/<script\b.*\bscript>/ig,'').replace(/<script[^>]*>/ig,'').replace(/(\b)(on[a-z]+)\s*=/ig,"$1_$2=");}else{v=jQuery('<p>').text(v).html();}}}
return v;};}
root.CF_FIELDS_MANAGEMENT=lib;})(this);fbuilderjQuery=(typeof fbuilderjQuery!='undefined')?fbuilderjQuery:jQuery;fbuilderjQuery['fbuilder']=fbuilderjQuery['fbuilder']||{};fbuilderjQuery['fbuilder']['modules']=fbuilderjQuery['fbuilder']['modules']||{};fbuilderjQuery['fbuilder']['modules']['processing']={'prefix':'','callback':function()
{fbuilderjQuery['fbuilder']['extend_window'](fbuilderjQuery['fbuilder']['modules']['processing']['prefix'],CF_FIELDS_MANAGEMENT);}};;(function(root){var lib={records:{}};lib.cff_connector_version='0.1';lib.cffProxy=lib.cffproxy=lib.CFFPROXY=function(){if(typeof fbuilderjQuery=='undefined'||!arguments.length||typeof arguments[0]!='function')return;var $=fbuilderjQuery,args=Array.prototype.slice.call(arguments);index=args.toString();if(typeof lib.records[index]!='undefined')return lib.records[index];var form_id=(typeof $.fbuilder['currentFormId']!='undefined')?$.fbuilder['currentFormId']:'cp_calculatedfieldsf_pform_1',aux=(function(eq,index){return function(value){lib.records[index]=value;$.fbuilder.calculator.enqueueEquation(eq.identifier,[eq]);$.fbuilder.calculator.removePending(eq.identifier);if(!(eq.identifier in $.fbuilder.calculator.processing_queue)||!$.fbuilder.calculator.processing_queue[eq.identifier])
{$.fbuilder.calculator.processQueue(eq.identifier);}};})($.fbuilder['currentEq'],index),f=args[0];args.shift();args.push(aux);$.fbuilder.calculator.addPending($.fbuilder['currentEq']['identifier']);setTimeout(function(){f.apply(null,args);},5);};root.CF_CONNECTOR=lib;})(this);fbuilderjQuery=(typeof fbuilderjQuery!='undefined')?fbuilderjQuery:jQuery;fbuilderjQuery['fbuilder']=fbuilderjQuery['fbuilder']||{};fbuilderjQuery['fbuilder']['modules']=fbuilderjQuery['fbuilder']['modules']||{};fbuilderjQuery['fbuilder']['modules']['connector']={'prefix':'','callback':function()
{fbuilderjQuery['fbuilder']['extend_window'](fbuilderjQuery['fbuilder']['modules']['connector']['prefix'],CF_CONNECTOR);}};;(function(root){var version='3.7.1',lib={},_$,_loading=false,_loading_plugins=false,_plugins={},_loaded_plugins=0,_queue=[],colors_json={"red":["#ffa8a8","#ff8787","#ff6b6b","#fa5252"],"blue":["#74c0fc","#4dabf7","#339af0","#228be6"],"yellow":["#ffe066","#ffd43b","#fcc419","#fab005"],"green":["#8ce99a","#69db7c","#51cf66","#40c057"],"pink":["#faa2c1","#f783ac","#f06595","#e64980"],"cyan":["#66d9e8","#3bc9db","#22b8cf","#15aabf"],"orange":["#ffc078","#ffa94d","#ff922b","#fd7e14"],"lime":["#c0eb75","#a9e34b","#94d82d","#82c91e"],"grape":["#e599f7","#da77f2","#cc5de8","#be4bdb"],"indigo":["#91a7ff","#748ffc","#5c7cfa","#4c6ef5"],"teal":["#63e6be","#38d9a9","#20c997","#12b886"],"violet":["#b197fc","#9775fa","#845ef7","#7950f2"]},_initialized=false;function pickColor(i)
{var idx=Object.keys(colors_json),plt=colors_json[idx[i%idx.length]];return plt[Math.floor(i%plt.length)];};function init_and_services()
{if(_initialized)return;_initialized=true;var beforeUpdate=function(chart){try
{var i=0,m=0;if('data'in chart&&'datasets'in chart.data)
{var dss=chart.data.datasets,dss_length=dss.length;for(var ds in dss)
{ds=dss[ds];if(!ds.borderColor)
{var bc=[];for(var _d in ds.data)
{_d=ds.data[_d];bc.push(pickColor((dss_length<2)?i++:i));}
if(2<=dss_length)i++;ds.borderColor=bc;if(!ds.backgroundColor)
{ds.backgroundColor=ds.borderColor.map(function(hex)
{return hex+'80';});}}}}}catch(err){if('console'in window)console.error(err.message);}};Chart.defaults.scale.ticks.beginAtZero=true;if('pluginService'in Chart)
{Chart.pluginService.register({beforeUpdate:beforeUpdate});}
else
{Chart.register({id:'cffBeforeUpdate',beforeUpdate:beforeUpdate});}};function load_and_clear_queue(version)
{if(!('Chart'in window))
{if(!_loading)
{_loading=true;var url='https://cdnjs.cloudflare.com/ajax/libs/Chart.js/'+version;try
{if(version.split('.')[0]*1<3)url+='/Chart.min.js';else url+='/chart.min.js';}
catch(err){url+='/Chart.min.js';}
_$.getScript(url,function()
{if(Object.keys(_plugins).length==_loaded_plugins){init_and_services();clear_queue();}else{load_plugins();}});}
return;}else if(Object.keys(_plugins).length==_loaded_plugins){init_and_services();clear_queue();}else{load_plugins();}};function load_plugins(){if(_loading_plugins)return;_loading_plugins=true;for(var i in _plugins){_$.getScript(i).done((function(i){return function(){if(typeof _plugins[i]=='function'){_plugins[i]();}
_loaded_plugins+=1;if(Object.keys(_plugins).length==_loaded_plugins){load_and_clear_queue();}};})(i));}};function add_queue(args)
{_queue.push(args);load_and_clear_queue(args['args']['version']||version);};function clear_queue()
{var item;while(_queue.length)
{item=_queue.shift();if('id'in item&&'args'in item)generator(item.id,item.args);}};function generator(id,obj)
{var _canvas=_$('[id="'+id.replace(/['"]/g,'\$1')+'"]'),_chart;if(_canvas.length)
{_chart=_canvas.data('chart-obj');if(_chart)
{_chart.clear();_chart.destroy();}
_chart=new Chart(_canvas,obj);_canvas.data('chart-obj',_chart);}};lib.cff_chart_version='0.1';lib.cffchart_addplugin=lib.CFFCHART_ADDPLUGIN=function(url,callback)
{if(!(url in _plugins)){_plugins[url]=callback;}};lib.cffchart=lib.CFFCHART=function(canvasId,args,field)
{if('undefined'==typeof fbuilderjQuery)return;_$=fbuilderjQuery;if('register_plugins'in args){try{if(!Array.isArray(args['register_plugins']))args['register_plugins']=[args['register_plugins']];for(var i in args['register_plugins']){if(typeof args['register_plugins'][i]=='string'){args['register_plugins'][i]={'url':args['register_plugins'][i],'callback':function(){}};}
lib.CFFCHART_ADDPLUGIN(args['register_plugins'][i]['url'],('callback'in args['register_plugins'][i]&&typeof args['register_plugins'][i]['callback']=='function')?args['register_plugins'][i]['callback']:function(){});}}catch(err){if('console'in window)console.log(err);}}
if(field&&typeof field=='object'&&('ftype'in field))
{if(!('options'in args))args['options']={};if(!('animation'in args['options']))args['options']['animation']={};if(!('onComplete'in args['options']['animation']))
{args['options']['animation']['onComplete']=function(){var img=document.getElementById(canvasId).toDataURL();field.jQueryRef().find('input').val(img);};}}
add_queue({'id':canvasId,'args':args});};root.CF_CHART=lib;})(this);fbuilderjQuery=(typeof fbuilderjQuery!='undefined')?fbuilderjQuery:jQuery;fbuilderjQuery['fbuilder']=fbuilderjQuery['fbuilder']||{};fbuilderjQuery['fbuilder']['modules']=fbuilderjQuery['fbuilder']['modules']||{};fbuilderjQuery['fbuilder']['modules']['chart']={'prefix':'','callback':function()
{fbuilderjQuery['fbuilder']['extend_window'](fbuilderjQuery['fbuilder']['modules']['chart']['prefix'],CF_CHART);}};;(function(root){var lib={records:{}};lib.cff_url_version='0.1';lib.getReferrer=lib.getreferrer=lib.GETREFERRER=function(){return document.referrer||null;};lib.generateURL=lib.generateurl=lib.GENERATEURL=function(url,params,hash){var urlComponents=url.split('#'),queryString='',connector='';if(typeof params=='object'&&params)
{connector=(url.indexOf('?')==-1)?'?':'&';queryString=jQuery.param(params);}
if(typeof hash=='string')urlComponents[1]=hash;urlComponents[0]+=connector+queryString;return urlComponents.join('#');};lib.redirectToURL=lib.redirecttourl=lib.REDIRECTTOURL=function(url,obj){document.location.href=url+(obj?(url.indexOf('?')===-1?'?':'&')+$.param(obj):'');};lib.getURL=lib.geturl=lib.GETURL=function(){return document.location.href;};lib.getURLProtocol=lib.geturlprotocol=lib.GETURLPROTOCOL=function(){return document.location.protocol.toLowerCase();};lib.getBaseURL=lib.getbaseurl=lib.GETBASEURL=function(){return window.location.protocol+'//'+window.location.host+'/';};lib.getURLHash=lib.geturlhash=lib.GETURLHASH=function(nohash){return window.location.hash.replace((nohash)?/^#/:'','');};lib.getURLPath=lib.geturlpath=lib.GETURLPATH=function(noslash){return window.location.pathname.replace((noslash)?new RegExp('^\/','g'):'','').replace((noslash)?new RegExp('\/$','g'):'','');};lib.getURLParameters=lib.geturlparameters=lib.GETURLPARAMETERS=function(url){var qs=url?url.split('?')[1]:window.location.search.slice(1),obj={};if(qs)
{qs=qs.split('#')[0];var arr=qs.split('&');for(var i=0;i<arr.length;i++)
{var a=arr[i].split('='),paramName=a[0],paramValue=typeof(a[1])==='undefined'?true:a[1];paramName=paramName.toLowerCase();if(typeof paramName==='string')paramName=decodeURIComponent(paramName);if(typeof paramValue==='string')paramValue=decodeURIComponent(paramValue);if(paramName.match(/\[(\d+)?\]$/))
{var key=paramName.replace(/\[(\d+)?\]/,'');if(!obj[key])obj[key]=[];if(paramName.match(/\[\d+\]$/))
{var index=/\[(\d+)\]/.exec(paramName)[1];obj[key][index]=paramValue;}
else
{obj[key].push(paramValue);}}
else
{if(!obj[paramName])
{obj[paramName]=paramValue;}
else if(obj[paramName]&&typeof obj[paramName]==='string')
{obj[paramName]=[obj[paramName]];obj[paramName].push(paramValue);}
else
{obj[paramName].push(paramValue);}}}}
return obj;};lib.getURLParameter=lib.geturlparameter=lib.GETURLPARAMETER=function(paramName,defaultValue){var parameters=lib.getURLParameters();paramName=paramName.toLowerCase();if(paramName in parameters)return parameters[paramName];else if(typeof defaultValue!='undefined')return defaultValue;else return null;}
root.CF_URL=lib;})(this);fbuilderjQuery=(typeof fbuilderjQuery!='undefined')?fbuilderjQuery:jQuery;fbuilderjQuery['fbuilder']=fbuilderjQuery['fbuilder']||{};fbuilderjQuery['fbuilder']['modules']=fbuilderjQuery['fbuilder']['modules']||{};fbuilderjQuery['fbuilder']['modules']['url']={'prefix':'','callback':function()
{fbuilderjQuery['fbuilder']['extend_window'](fbuilderjQuery['fbuilder']['modules']['url']['prefix'],CF_URL);}};;(function(root){var lib={records:{}};function eval_equation(eq)
{$.fbuilder.calculator.enqueueEquation(eq.identifier,[eq]);$.fbuilder.calculator.removePending(eq.identifier);if(!(eq.identifier in $.fbuilder.calculator.processing_queue)||!$.fbuilder.calculator.processing_queue[eq.identifier])$.fbuilder.calculator.processQueue(eq.identifier);}
function _getField(fieldname,form)
{var field=getField(fieldname,form);return(field&&'ftype'in field&&field['ftype']=='ffile')?field:false;}
lib.cff_file_version='0.1';lib.PDFPAGESNUMBER=lib.pdfpagesnumber=function(fieldname,form){var field=_getField(fieldname,form),files,counter=0,result=0,index;if(field)
{if(field.multiple)result=[];files=field.val(true);counter=files.length;if(counter)
{index='PDFPAGESNUMBER:'+field.val();if(index in lib.records)
{result=lib.records[index];}
else
{for(var i in files)
{if(typeof files[i]=='object')
{var reader=new FileReader();reader.onloadend=(function(eq,index,multiple){return function(evt){var reader=evt.target;try{var tmp=reader.result.match(/\/Type[\s]*\/Page[^s]/g);if(multiple)result.push((tmp)?tmp.length:0);else result+=(tmp)?tmp.length:0;}catch(err){}
counter--;if(counter==0)
{lib.records[index]=result;eval_equation(eq);}};})($.fbuilder['currentEq'],index,field.multiple)
reader.readAsBinaryString(files[i]);}}}}}
return result;}
lib.IMGDIMENSION=lib.imgdimension=function(fieldname,form){var field=_getField(fieldname,form),files,counter=0,result={width:0,height:0},index;if(field)
{if(field.multiple)result=[];files=field.val(true);counter=files.length;if(counter)
{index='IMGDIMENSION:'+field.val();if(index in lib.records)
{result=lib.records[index];}
else
{for(var i in files)
{if(typeof files[i]=='object')
{if(files[i].type.match(/image.*/i))
{var reader=new FileReader();reader.onloadend=(function(eq,index,multiple){return function(evt){var reader=evt.target;try{var image=new Image();image.onload=function(){if(multiple)result.push({width:this.naturalWidth,height:this.naturalHeight});else result={width:this.naturalWidth,height:this.naturalHeight};counter--;if(counter==0)
{lib.records[index]=result;eval_equation(eq);}};image.src=reader.result;}catch(err){}};})($.fbuilder['currentEq'],index,field.multiple)
reader.readAsDataURL(files[i]);}
else counter--;}}}}}
return result;}
lib.VIEWFILE=lib.viewfile=function(fieldname,id,form){var field=_getField(fieldname,form),files,el=document.getElementById(id);if(field&&el)
{el.innerHTML='';files=field.val(true);if(files.length)
{for(var i in files)
{if(typeof files[i]=='object')
{var reader=new FileReader();if(files[i].type.match(/image.*/i))
{reader.onloadend=function(evt){var reader=evt.target;try{var img=document.createElement('img');img.classList.add('cff-image-viewer');img.src=reader.result;el.appendChild(img);}catch(err){}};}
else if(files[i].type.match(/pdf/i))
{reader.onloadend=function(evt){var reader=evt.target;try{var iframe=document.createElement('iframe');iframe.classList.add('cff-pdf-viewer');iframe.src=reader.result;el.appendChild(iframe);}catch(err){}};}
reader.readAsDataURL(files[i]);}}}}}
lib.CSVTOJSON=lib.csvtojson=function(fieldname,args,form){var result=null;if(typeof args=='undefined'||args===null)args={};if(!('headline'in args))args['headline']=false;if(!('delimiter'in args))args['delimiter']=',';if(!('quote'in args))args['quote']='"';function processCSV(csv){var json=[],lines=csv.split(/[\r\n]+/),line,headers,obj;for(var i=0,h=lines.length;i<h;i++){if(!lines[i].length)continue;if(args['headline']&&typeof headers=='undefined'){headers=parseLine(lines[i]);}else{obj={};line=parseLine(lines[i]);for(var j=0,k=line.length;j<k;j++){obj[(typeof headers!='undefined')?headers[j]:j]=line[j];}
json.push(JSON.parse(JSON.stringify(obj)));}}
return json;};function parseLine(line){var flag=false,parts=[],cell='';for(var i=0,h=line.length;i<h;i++){if(line[i]==args['quote']){if(!flag&&(i==0||line[i-1]!='\\')){flag=true;continue;}
else if(flag&&line[i-1]!='\\'){flag=false;continue;}}else if(line[i]==args['delimiter']&&!flag){parts.push(cell);cell='';continue;}
cell+=line[i];}
parts.push(cell);return parts;};if(typeof fieldname=='number'||/fieldname\d+/i.test(fieldname)){var field=_getField(fieldname,form),counter=0,files;if(field)
{if(field.multiple)result=[];files=field.val(true);counter=files.length;if(counter)
{index='CSVTOJSON:'+field.val();if(index in lib.records)
{result=lib.records[index];}
else
{for(var i in files)
{if(typeof files[i]=='object'&&files[i].type.match(/csv.*/i))
{var reader=new FileReader();reader.onloadend=(function(eq,index,multiple){return function(evt){var reader=evt.target;try{var json=processCSV(reader.result);if(multiple)result.push(json);else result=json;}catch(err){}
counter--;if(counter==0)
{lib.records[index]=result;eval_equation(eq);}};})($.fbuilder['currentEq'],index,field.multiple)
reader.readAsBinaryString(files[i]);}}}}}}else if(typeof fieldname=='string'){result=processCSV(fieldname);}
return result;};root.CF_FILE=lib;})(this);fbuilderjQuery=(typeof fbuilderjQuery!='undefined')?fbuilderjQuery:jQuery;fbuilderjQuery['fbuilder']=fbuilderjQuery['fbuilder']||{};fbuilderjQuery['fbuilder']['modules']=fbuilderjQuery['fbuilder']['modules']||{};fbuilderjQuery['fbuilder']['modules']['file']={'prefix':'','callback':function()
{fbuilderjQuery['fbuilder']['extend_window'](fbuilderjQuery['fbuilder']['modules']['file']['prefix'],CF_FILE);}};;(function(root){var lib={};if(window.WORDSCOUNTER==undefined){lib.WORDSCOUNTER=lib.wordscounter=function(text){try{return text.replace(/(?!\w|\s)./g,'').replace(/\s+/g,' ').replace(/^(\s*)([\W\w]*)(\b\s*$)/g,'$2').split(' ').length;}catch(err){return 0;}}}
if(window.CHARSCOUNTER==undefined){lib.CHARSCOUNTER=lib.charscounter=function(text,ignore_blank){try{var ignore_blank=ignore_blank||0;text+='';if(ignore_blank)text=text.replace(/[\s\r\n\t]/g,'');return text.length;}catch(err){return 0;}}}
if(window.INTEXT==undefined){lib.INTEXT=lib.intext=function(term,text,case_insensitive){try{var case_insensitive=case_insensitive||0;if(!term instanceof RegExp)term+='';text+='';if(case_insensitive){if(term instanceof RegExp)term=new RegExp(term.source,'i');else term=term.toLowerCase();text=text.toLowerCase();}
return Math.max(text.split(term).length-1,0);}catch(err){return 0;}}}
root.CF_TEXT=lib;})(this);fbuilderjQuery=(typeof fbuilderjQuery!='undefined')?fbuilderjQuery:jQuery;fbuilderjQuery['fbuilder']=fbuilderjQuery['fbuilder']||{};fbuilderjQuery['fbuilder']['modules']=fbuilderjQuery['fbuilder']['modules']||{};fbuilderjQuery['fbuilder']['modules']['text']={'prefix':'','callback':function()
{fbuilderjQuery['fbuilder']['extend_window'](fbuilderjQuery['fbuilder']['modules']['text']['prefix'],CF_TEXT);}};;(function(root){var lib={},data={"countries":{"AD":"Andorra","AE":"United Arab Emirates","AF":"Afghanistan","AG":"Antigua and Barbuda","AI":"Anguilla","AL":"Albania","AM":"Armenia","AO":"Angola","AQ":"Antarctica","AR":"Argentina","AS":"American Samoa","AT":"Austria","AU":"Australia","AW":"Aruba","AX":"Åland Islands","AZ":"Azerbaijan","BA":"Bosnia and Herzegovina","BB":"Barbados","BD":"Bangladesh","BE":"Belgium","BF":"Burkina Faso","BG":"Bulgaria","BH":"Bahrain","BI":"Burundi","BJ":"Benin","BL":"Saint Barthélemy","BM":"Bermuda","BN":"Brunei","BO":"Bolivia","BQ":"Caribbean Netherlands","BR":"Brazil","BS":"Bahamas","BT":"Bhutan","BV":"Bouvet Island","BW":"Botswana","BY":"Belarus","BZ":"Belize","CA":"Canada","CC":"Cocos Islands","CD":"Democratic Republic of the Congo","CF":"Central African Republic","CG":"Republic of the Congo","CH":"Switzerland","CI":"Ivory Coast","CK":"Cook Islands","CL":"Chile","CM":"Cameroon","CN":"China","CO":"Colombia","CR":"Costa Rica","CU":"Cuba","CV":"Cabo Verde","CW":"Curaçao","CX":"Christmas Island","CY":"Cyprus","CZ":"Czechia","DE":"Germany","DJ":"Djibouti","DK":"Denmark","DM":"Dominica","DO":"Dominican Republic","DZ":"Algeria","EC":"Ecuador","EE":"Estonia","EG":"Egypt","EH":"Western Sahara","ER":"Eritrea","ES":"Spain","ET":"Ethiopia","FI":"Finland","FJ":"Fiji","FK":"Falkland Islands","FM":"Micronesia","FO":"Faroe Islands","FR":"France","GA":"Gabon","GB":"United Kingdom","GD":"Grenada","GE":"Georgia","GF":"French Guiana","GG":"Guernsey","GH":"Ghana","GI":"Gibraltar","GL":"Greenland","GM":"Gambia","GN":"Guinea","GP":"Guadeloupe","GQ":"Equatorial Guinea","GR":"Greece","GS":"South Georgia and the South Sandwich Islands","GT":"Guatemala","GU":"Guam","GW":"Guinea-Bissau","GY":"Guyana","HK":"Hong Kong","HM":"Heard Island and McDonald Islands","HN":"Honduras","HR":"Croatia","HT":"Haiti","HU":"Hungary","ID":"Indonesia","IE":"Ireland","IL":"Israel","IM":"Isle of Man","IN":"India","IO":"British Indian Ocean Territory","IQ":"Iraq","IR":"Iran","IS":"Iceland","IT":"Italy","JE":"Jersey","JM":"Jamaica","JO":"Jordan","JP":"Japan","KE":"Kenya","KG":"Kyrgyzstan","KH":"Cambodia","KI":"Kiribati","KM":"Comoros","KN":"Saint Kitts and Nevis","KP":"North Korea","KR":"South Korea","KW":"Kuwait","KY":"Cayman Islands","KZ":"Kazakhstan","LA":"Laos","LB":"Lebanon","LC":"Saint Lucia","LI":"Liechtenstein","LK":"Sri Lanka","LR":"Liberia","LS":"Lesotho","LT":"Lithuania","LU":"Luxembourg","LV":"Latvia","LY":"Libya","MA":"Morocco","MC":"Monaco","MD":"Moldova","ME":"Montenegro","MF":"Saint Martin","MG":"Madagascar","MH":"Marshall Islands","MK":"North Macedonia","ML":"Mali","MM":"Myanmar","MN":"Mongolia","MO":"Macao","MP":"Northern Mariana Islands","MQ":"Martinique","MR":"Mauritania","MS":"Montserrat","MT":"Malta","MU":"Mauritius","MV":"Maldives","MW":"Malawi","MX":"Mexico","MY":"Malaysia","MZ":"Mozambique","NA":"Namibia","NC":"New Caledonia","NE":"Niger","NF":"Norfolk Island","NG":"Nigeria","NI":"Nicaragua","NL":"Netherlands","NO":"Norway","NP":"Nepal","NR":"Nauru","NU":"Niue","NZ":"New Zealand","OM":"Oman","PA":"Panama","PE":"Peru","PF":"French Polynesia","PG":"Papua New Guinea","PH":"Philippines","PK":"Pakistan","PL":"Poland","PM":"Saint Pierre and Miquelon","PN":"Pitcairn","PR":"Puerto Rico","PS":"Palestine","PT":"Portugal","PW":"Palau","PY":"Paraguay","QA":"Qatar","RE":"Réunion","RO":"Romania","RS":"Serbia","RU":"Russia","RW":"Rwanda","SA":"Saudi Arabia","SB":"Solomon Islands","SC":"Seychelles","SD":"Sudan","SE":"Sweden","SG":"Singapore","SH":"Saint Helena, Ascension and Tristan da Cunha","SI":"Slovenia","SJ":"Svalbard and Jan Mayen","SK":"Slovakia","SL":"Sierra Leone","SM":"San Marino","SN":"Senegal","SO":"Somalia","SR":"Suriname","SS":"South Sudan","ST":"Sao Tome and Principe","SV":"El Salvador","SX":"Sint Maarten","SY":"Syria","SZ":"Eswatini","TC":"Turks and Caicos Islands","TD":"Chad","TF":"French Southern Territories","TG":"Togo","TH":"Thailand","TJ":"Tajikistan","TK":"Tokelau","TL":"Timor-Leste","TM":"Turkmenistan","TN":"Tunisia","TO":"Tonga","TR":"Türkiye","TT":"Trinidad and Tobago","TV":"Tuvalu","TW":"Taiwan","TZ":"Tanzania","UA":"Ukraine","UG":"Uganda","UM":"United States Minor Outlying Islands","US":"United States of America","UY":"Uruguay","UZ":"Uzbekistan","VA":"Holy See","VC":"Saint Vincent and the Grenadines","VE":"Venezuela","VG":"Virgin Islands (UK)","VI":"Virgin Islands (US)","VN":"Vietnam","VU":"Vanuatu","WF":"Wallis and Futuna","WS":"Samoa","YE":"Yemen","YT":"Mayotte","ZA":"South Africa","ZM":"Zambia","ZW":"Zimbabwe"},"timezones":{"Africa/Abidjan":{"u":0,"c":["CI","BF","GH","GM","GN","IS","ML","MR","SH","SL","SN","TG"]},"Africa/Accra":{"a":"Africa/Abidjan","c":["GH"],"r":1},"Africa/Addis_Ababa":{"a":"Africa/Nairobi","c":["ET"],"r":1},"Africa/Algiers":{"u":60,"c":["DZ"]},"Africa/Asmara":{"a":"Africa/Nairobi","c":["ER"],"r":1},"Africa/Asmera":{"a":"Africa/Nairobi","c":["ER"],"r":1},"Africa/Bamako":{"a":"Africa/Abidjan","c":["ML"],"r":1},"Africa/Bangui":{"a":"Africa/Lagos","c":["CF"],"r":1},"Africa/Banjul":{"a":"Africa/Abidjan","c":["GM"],"r":1},"Africa/Bissau":{"u":0,"c":["GW"]},"Africa/Blantyre":{"a":"Africa/Maputo","c":["MW"],"r":1},"Africa/Brazzaville":{"a":"Africa/Lagos","c":["CG"],"r":1},"Africa/Bujumbura":{"a":"Africa/Maputo","c":["BI"],"r":1},"Africa/Cairo":{"u":120,"c":["EG"]},"Africa/Casablanca":{"u":60,"d":0,"c":["MA"]},"Africa/Ceuta":{"u":60,"d":120,"c":["ES"]},"Africa/Conakry":{"a":"Africa/Abidjan","c":["GN"],"r":1},"Africa/Dakar":{"a":"Africa/Abidjan","c":["SN"],"r":1},"Africa/Dar_es_Salaam":{"a":"Africa/Nairobi","c":["TZ"],"r":1},"Africa/Djibouti":{"a":"Africa/Nairobi","c":["DJ"],"r":1},"Africa/Douala":{"a":"Africa/Lagos","c":["CM"],"r":1},"Africa/El_Aaiun":{"u":60,"d":0,"c":["EH"]},"Africa/Freetown":{"a":"Africa/Abidjan","c":["SL"],"r":1},"Africa/Gaborone":{"a":"Africa/Maputo","c":["BW"],"r":1},"Africa/Harare":{"a":"Africa/Maputo","c":["ZW"],"r":1},"Africa/Johannesburg":{"u":120,"c":["ZA","LS","SZ"]},"Africa/Juba":{"u":120,"c":["SS"]},"Africa/Kampala":{"a":"Africa/Nairobi","c":["UG"],"r":1},"Africa/Khartoum":{"u":120,"c":["SD"]},"Africa/Kigali":{"a":"Africa/Maputo","c":["RW"],"r":1},"Africa/Kinshasa":{"a":"Africa/Lagos","c":["CD"],"r":1},"Africa/Lagos":{"u":60,"c":["NG","AO","BJ","CD","CF","CG","CM","GA","GQ","NE"]},"Africa/Libreville":{"a":"Africa/Lagos","c":["GA"],"r":1},"Africa/Lome":{"a":"Africa/Abidjan","c":["TG"],"r":1},"Africa/Luanda":{"a":"Africa/Lagos","c":["AO"],"r":1},"Africa/Lubumbashi":{"a":"Africa/Maputo","c":["CD"],"r":1},"Africa/Lusaka":{"a":"Africa/Maputo","c":["ZM"],"r":1},"Africa/Malabo":{"a":"Africa/Lagos","c":["GQ"],"r":1},"Africa/Maputo":{"u":120,"c":["MZ","BI","BW","CD","MW","RW","ZM","ZW"]},"Africa/Maseru":{"a":"Africa/Johannesburg","c":["LS"],"r":1},"Africa/Mbabane":{"a":"Africa/Johannesburg","c":["SZ"],"r":1},"Africa/Mogadishu":{"a":"Africa/Nairobi","c":["SO"],"r":1},"Africa/Monrovia":{"u":0,"c":["LR"]},"Africa/Nairobi":{"u":180,"c":["KE","DJ","ER","ET","KM","MG","SO","TZ","UG","YT"]},"Africa/Ndjamena":{"u":60,"c":["TD"]},"Africa/Niamey":{"a":"Africa/Lagos","c":["NE"],"r":1},"Africa/Nouakchott":{"a":"Africa/Abidjan","c":["MR"],"r":1},"Africa/Ouagadougou":{"a":"Africa/Abidjan","c":["BF"],"r":1},"Africa/Porto-Novo":{"a":"Africa/Lagos","c":["BJ"],"r":1},"Africa/Sao_Tome":{"u":0,"c":["ST"]},"Africa/Timbuktu":{"a":"Africa/Abidjan","c":["ML"],"r":1},"Africa/Tripoli":{"u":120,"c":["LY"]},"Africa/Tunis":{"u":60,"c":["TN"]},"Africa/Windhoek":{"u":120,"c":["NA"]},"America/Adak":{"u":-600,"d":-540,"c":["US"]},"America/Anchorage":{"u":-540,"d":-480,"c":["US"]},"America/Anguilla":{"a":"America/Puerto_Rico","c":["AI"],"r":1},"America/Antigua":{"a":"America/Puerto_Rico","c":["AG"],"r":1},"America/Araguaina":{"u":-180,"c":["BR"]},"America/Argentina/Buenos_Aires":{"u":-180,"c":["AR"]},"America/Argentina/Catamarca":{"u":-180,"c":["AR"]},"America/Argentina/ComodRivadavia":{"a":"America/Argentina/Catamarca","r":1},"America/Argentina/Cordoba":{"u":-180,"c":["AR"]},"America/Argentina/Jujuy":{"u":-180,"c":["AR"]},"America/Argentina/La_Rioja":{"u":-180,"c":["AR"]},"America/Argentina/Mendoza":{"u":-180,"c":["AR"]},"America/Argentina/Rio_Gallegos":{"u":-180,"c":["AR"]},"America/Argentina/Salta":{"u":-180,"c":["AR"]},"America/Argentina/San_Juan":{"u":-180,"c":["AR"]},"America/Argentina/San_Luis":{"u":-180,"c":["AR"]},"America/Argentina/Tucuman":{"u":-180,"c":["AR"]},"America/Argentina/Ushuaia":{"u":-180,"c":["AR"]},"America/Aruba":{"a":"America/Puerto_Rico","c":["AW"],"r":1},"America/Asuncion":{"u":-240,"d":-180,"c":["PY"]},"America/Atikokan":{"a":"America/Panama","c":["CA"],"r":1},"America/Atka":{"a":"America/Adak","r":1},"America/Bahia":{"u":-180,"c":["BR"]},"America/Bahia_Banderas":{"u":-360,"c":["MX"]},"America/Barbados":{"u":-240,"c":["BB"]},"America/Belem":{"u":-180,"c":["BR"]},"America/Belize":{"u":-360,"c":["BZ"]},"America/Blanc-Sablon":{"a":"America/Puerto_Rico","c":["CA"],"r":1},"America/Boa_Vista":{"u":-240,"c":["BR"]},"America/Bogota":{"u":-300,"c":["CO"]},"America/Boise":{"u":-420,"d":-360,"c":["US"]},"America/Buenos_Aires":{"a":"America/Argentina/Buenos_Aires","r":1},"America/Cambridge_Bay":{"u":-420,"d":-360,"c":["CA"]},"America/Campo_Grande":{"u":-240,"c":["BR"]},"America/Cancun":{"u":-300,"c":["MX"]},"America/Caracas":{"u":-240,"c":["VE"]},"America/Catamarca":{"a":"America/Argentina/Catamarca","r":1},"America/Cayenne":{"u":-180,"c":["GF"]},"America/Cayman":{"a":"America/Panama","c":["KY"],"r":1},"America/Chicago":{"u":-360,"d":-300,"c":["US"]},"America/Chihuahua":{"u":-360,"c":["MX"]},"America/Ciudad_Juarez":{"u":-420,"d":-360,"c":["MX"]},"America/Coral_Harbour":{"a":"America/Panama","c":["CA"],"r":1},"America/Cordoba":{"a":"America/Argentina/Cordoba","r":1},"America/Costa_Rica":{"u":-360,"c":["CR"]},"America/Creston":{"a":"America/Phoenix","c":["CA"],"r":1},"America/Cuiaba":{"u":-240,"c":["BR"]},"America/Curacao":{"a":"America/Puerto_Rico","c":["CW"],"r":1},"America/Danmarkshavn":{"u":0,"c":["GL"]},"America/Dawson":{"u":-420,"c":["CA"]},"America/Dawson_Creek":{"u":-420,"c":["CA"]},"America/Denver":{"u":-420,"d":-360,"c":["US"]},"America/Detroit":{"u":-300,"d":-240,"c":["US"]},"America/Dominica":{"a":"America/Puerto_Rico","c":["DM"],"r":1},"America/Edmonton":{"u":-420,"d":-360,"c":["CA"]},"America/Eirunepe":{"u":-300,"c":["BR"]},"America/El_Salvador":{"u":-360,"c":["SV"]},"America/Ensenada":{"a":"America/Tijuana","r":1},"America/Fort_Nelson":{"u":-420,"c":["CA"]},"America/Fort_Wayne":{"a":"America/Indiana/Indianapolis","r":1},"America/Fortaleza":{"u":-180,"c":["BR"]},"America/Glace_Bay":{"u":-240,"d":-180,"c":["CA"]},"America/Godthab":{"a":"America/Nuuk","r":1},"America/Goose_Bay":{"u":-240,"d":-180,"c":["CA"]},"America/Grand_Turk":{"u":-300,"d":-240,"c":["TC"]},"America/Grenada":{"a":"America/Puerto_Rico","c":["GD"],"r":1},"America/Guadeloupe":{"a":"America/Puerto_Rico","c":["GP"],"r":1},"America/Guatemala":{"u":-360,"c":["GT"]},"America/Guayaquil":{"u":-300,"c":["EC"]},"America/Guyana":{"u":-240,"c":["GY"]},"America/Halifax":{"u":-240,"d":-180,"c":["CA"]},"America/Havana":{"u":-300,"d":-240,"c":["CU"]},"America/Hermosillo":{"u":-420,"c":["MX"]},"America/Indiana/Indianapolis":{"u":-300,"d":-240,"c":["US"]},"America/Indiana/Knox":{"u":-360,"d":-300,"c":["US"]},"America/Indiana/Marengo":{"u":-300,"d":-240,"c":["US"]},"America/Indiana/Petersburg":{"u":-300,"d":-240,"c":["US"]},"America/Indiana/Tell_City":{"u":-360,"d":-300,"c":["US"]},"America/Indiana/Vevay":{"u":-300,"d":-240,"c":["US"]},"America/Indiana/Vincennes":{"u":-300,"d":-240,"c":["US"]},"America/Indiana/Winamac":{"u":-300,"d":-240,"c":["US"]},"America/Indianapolis":{"a":"America/Indiana/Indianapolis","r":1},"America/Inuvik":{"u":-420,"d":-360,"c":["CA"]},"America/Iqaluit":{"u":-300,"d":-240,"c":["CA"]},"America/Jamaica":{"u":-300,"c":["JM"]},"America/Jujuy":{"a":"America/Argentina/Jujuy","r":1},"America/Juneau":{"u":-540,"d":-480,"c":["US"]},"America/Kentucky/Louisville":{"u":-300,"d":-240,"c":["US"]},"America/Kentucky/Monticello":{"u":-300,"d":-240,"c":["US"]},"America/Knox_IN":{"a":"America/Indiana/Knox","r":1},"America/Kralendijk":{"a":"America/Puerto_Rico","c":["BQ"],"r":1},"America/La_Paz":{"u":-240,"c":["BO"]},"America/Lima":{"u":-300,"c":["PE"]},"America/Los_Angeles":{"u":-480,"d":-420,"c":["US"]},"America/Louisville":{"a":"America/Kentucky/Louisville","r":1},"America/Lower_Princes":{"a":"America/Puerto_Rico","c":["SX"],"r":1},"America/Maceio":{"u":-180,"c":["BR"]},"America/Managua":{"u":-360,"c":["NI"]},"America/Manaus":{"u":-240,"c":["BR"]},"America/Marigot":{"a":"America/Puerto_Rico","c":["MF"],"r":1},"America/Martinique":{"u":-240,"c":["MQ"]},"America/Matamoros":{"u":-360,"d":-300,"c":["MX"]},"America/Mazatlan":{"u":-420,"c":["MX"]},"America/Mendoza":{"a":"America/Argentina/Mendoza","r":1},"America/Menominee":{"u":-360,"d":-300,"c":["US"]},"America/Merida":{"u":-360,"c":["MX"]},"America/Metlakatla":{"u":-540,"d":-480,"c":["US"]},"America/Mexico_City":{"u":-360,"c":["MX"]},"America/Miquelon":{"u":-180,"d":-120,"c":["PM"]},"America/Moncton":{"u":-240,"d":-180,"c":["CA"]},"America/Monterrey":{"u":-360,"c":["MX"]},"America/Montevideo":{"u":-180,"c":["UY"]},"America/Montreal":{"a":"America/Toronto","c":["CA"],"r":1},"America/Montserrat":{"a":"America/Puerto_Rico","c":["MS"],"r":1},"America/Nassau":{"a":"America/Toronto","c":["BS"],"r":1},"America/New_York":{"u":-300,"d":-240,"c":["US"]},"America/Nipigon":{"a":"America/Toronto","c":["CA"],"r":1},"America/Nome":{"u":-540,"d":-480,"c":["US"]},"America/Noronha":{"u":-120,"c":["BR"]},"America/North_Dakota/Beulah":{"u":-360,"d":-300,"c":["US"]},"America/North_Dakota/Center":{"u":-360,"d":-300,"c":["US"]},"America/North_Dakota/New_Salem":{"u":-360,"d":-300,"c":["US"]},"America/Nuuk":{"u":-180,"c":["GL"]},"America/Ojinaga":{"u":-360,"d":-300,"c":["MX"]},"America/Panama":{"u":-300,"c":["PA","CA","KY"]},"America/Pangnirtung":{"a":"America/Iqaluit","r":1},"America/Paramaribo":{"u":-180,"c":["SR"]},"America/Phoenix":{"u":-420,"c":["US","CA"]},"America/Port-au-Prince":{"u":-300,"d":-240,"c":["HT"]},"America/Port_of_Spain":{"a":"America/Puerto_Rico","c":["TT"],"r":1},"America/Porto_Acre":{"a":"America/Rio_Branco","r":1},"America/Porto_Velho":{"u":-240,"c":["BR"]},"America/Puerto_Rico":{"u":-240,"c":["PR","AG","CA","AI","AW","BL","BQ","CW","DM","GD","GP","KN","LC","MF","MS","SX","TT","VC","VG","VI"]},"America/Punta_Arenas":{"u":-180,"c":["CL"]},"America/Rainy_River":{"a":"America/Winnipeg","r":1},"America/Rankin_Inlet":{"u":-360,"d":-300,"c":["CA"]},"America/Recife":{"u":-180,"c":["BR"]},"America/Regina":{"u":-360,"c":["CA"]},"America/Resolute":{"u":-360,"d":-300,"c":["CA"]},"America/Rio_Branco":{"u":-300,"c":["BR"]},"America/Rosario":{"a":"America/Argentina/Cordoba","r":1},"America/Santa_Isabel":{"a":"America/Tijuana","r":1},"America/Santarem":{"u":-180,"c":["BR"]},"America/Santiago":{"u":-240,"d":-180,"c":["CL"]},"America/Santo_Domingo":{"u":-240,"c":["DO"]},"America/Sao_Paulo":{"u":-180,"c":["BR"]},"America/Scoresbysund":{"u":-60,"d":0,"c":["GL"]},"America/Shiprock":{"a":"America/Denver","r":1},"America/Sitka":{"u":-540,"d":-480,"c":["US"]},"America/St_Barthelemy":{"a":"America/Puerto_Rico","c":["BL"],"r":1},"America/St_Johns":{"u":-210,"d":-150,"c":["CA"]},"America/St_Kitts":{"a":"America/Puerto_Rico","c":["KN"],"r":1},"America/St_Lucia":{"a":"America/Puerto_Rico","c":["LC"],"r":1},"America/St_Thomas":{"a":"America/Puerto_Rico","c":["VI"],"r":1},"America/St_Vincent":{"a":"America/Puerto_Rico","c":["VC"],"r":1},"America/Swift_Current":{"u":-360,"c":["CA"]},"America/Tegucigalpa":{"u":-360,"c":["HN"]},"America/Thule":{"u":-240,"d":-180,"c":["GL"]},"America/Thunder_Bay":{"a":"America/Toronto","c":["CA"],"r":1},"America/Tijuana":{"u":-480,"d":-420,"c":["MX"]},"America/Toronto":{"u":-300,"d":-240,"c":["CA","BS"]},"America/Tortola":{"a":"America/Puerto_Rico","c":["VG"],"r":1},"America/Vancouver":{"u":-480,"d":-420,"c":["CA"]},"America/Virgin":{"a":"America/Puerto_Rico","c":["VI"],"r":1},"America/Whitehorse":{"u":-420,"c":["CA"]},"America/Winnipeg":{"u":-360,"d":-300,"c":["CA"]},"America/Yakutat":{"u":-540,"d":-480,"c":["US"]},"America/Yellowknife":{"u":-420,"d":-360,"c":["CA"]},"Antarctica/Casey":{"u":660,"c":["AQ"]},"Antarctica/Davis":{"u":420,"c":["AQ"]},"Antarctica/DumontDUrville":{"a":"Pacific/Port_Moresby","c":["AQ"],"r":1},"Antarctica/Macquarie":{"u":600,"d":660,"c":["AU"]},"Antarctica/Mawson":{"u":300,"c":["AQ"]},"Antarctica/McMurdo":{"a":"Pacific/Auckland","c":["AQ"],"r":1},"Antarctica/Palmer":{"u":-180,"c":["AQ"]},"Antarctica/Rothera":{"u":-180,"c":["AQ"]},"Antarctica/South_Pole":{"a":"Pacific/Auckland","c":["AQ"],"r":1},"Antarctica/Syowa":{"a":"Asia/Riyadh","c":["AQ"],"r":1},"Antarctica/Troll":{"u":0,"d":120,"c":["AQ"]},"Antarctica/Vostok":{"a":"Asia/Urumqi","c":["AQ"],"r":1},"Arctic/Longyearbyen":{"a":"Europe/Berlin","c":["SJ"],"r":1},"Asia/Aden":{"a":"Asia/Riyadh","c":["YE"],"r":1},"Asia/Almaty":{"u":360,"c":["KZ"]},"Asia/Amman":{"u":180,"c":["JO"]},"Asia/Anadyr":{"u":720,"c":["RU"]},"Asia/Aqtau":{"u":300,"c":["KZ"]},"Asia/Aqtobe":{"u":300,"c":["KZ"]},"Asia/Ashgabat":{"u":300,"c":["TM"]},"Asia/Ashkhabad":{"a":"Asia/Ashgabat","r":1},"Asia/Atyrau":{"u":300,"c":["KZ"]},"Asia/Baghdad":{"u":180,"c":["IQ"]},"Asia/Bahrain":{"a":"Asia/Qatar","c":["BH"],"r":1},"Asia/Baku":{"u":240,"c":["AZ"]},"Asia/Bangkok":{"u":420,"c":["TH","CX","KH","LA","VN"]},"Asia/Barnaul":{"u":420,"c":["RU"]},"Asia/Beirut":{"u":120,"d":180,"c":["LB"]},"Asia/Bishkek":{"u":360,"c":["KG"]},"Asia/Brunei":{"a":"Asia/Kuching","c":["BN"],"r":1},"Asia/Calcutta":{"a":"Asia/Kolkata","r":1},"Asia/Chita":{"u":540,"c":["RU"]},"Asia/Choibalsan":{"u":480,"c":["MN"]},"Asia/Chongqing":{"a":"Asia/Shanghai","r":1},"Asia/Chungking":{"a":"Asia/Shanghai","r":1},"Asia/Colombo":{"u":330,"c":["LK"]},"Asia/Dacca":{"a":"Asia/Dhaka","r":1},"Asia/Damascus":{"u":180,"c":["SY"]},"Asia/Dhaka":{"u":360,"c":["BD"]},"Asia/Dili":{"u":540,"c":["TL"]},"Asia/Dubai":{"u":240,"c":["AE","OM","RE","SC","TF"]},"Asia/Dushanbe":{"u":300,"c":["TJ"]},"Asia/Famagusta":{"u":120,"d":180,"c":["CY"]},"Asia/Gaza":{"u":120,"d":180,"c":["PS"]},"Asia/Harbin":{"a":"Asia/Shanghai","r":1},"Asia/Hebron":{"u":120,"d":180,"c":["PS"]},"Asia/Ho_Chi_Minh":{"u":420,"c":["VN"]},"Asia/Hong_Kong":{"u":480,"c":["HK"]},"Asia/Hovd":{"u":420,"c":["MN"]},"Asia/Irkutsk":{"u":480,"c":["RU"]},"Asia/Istanbul":{"a":"Europe/Istanbul","r":1},"Asia/Jakarta":{"u":420,"c":["ID"]},"Asia/Jayapura":{"u":540,"c":["ID"]},"Asia/Jerusalem":{"u":120,"d":180,"c":["IL"]},"Asia/Kabul":{"u":270,"c":["AF"]},"Asia/Kamchatka":{"u":720,"c":["RU"]},"Asia/Karachi":{"u":300,"c":["PK"]},"Asia/Kashgar":{"a":"Asia/Urumqi","c":["CN"],"r":1},"Asia/Kathmandu":{"u":345,"c":["NP"]},"Asia/Katmandu":{"a":"Asia/Kathmandu","r":1},"Asia/Khandyga":{"u":540,"c":["RU"]},"Asia/Kolkata":{"u":330,"c":["IN"]},"Asia/Krasnoyarsk":{"u":420,"c":["RU"]},"Asia/Kuala_Lumpur":{"a":"Asia/Singapore","c":["MY"],"r":1},"Asia/Kuching":{"u":480,"c":["MY","BN"]},"Asia/Kuwait":{"a":"Asia/Riyadh","c":["KW"],"r":1},"Asia/Macao":{"a":"Asia/Macau","r":1},"Asia/Macau":{"u":480,"c":["MO"]},"Asia/Magadan":{"u":660,"c":["RU"]},"Asia/Makassar":{"u":480,"c":["ID"]},"Asia/Manila":{"u":480,"c":["PH"]},"Asia/Muscat":{"a":"Asia/Dubai","c":["OM"],"r":1},"Asia/Nicosia":{"u":120,"d":180,"c":["CY"]},"Asia/Novokuznetsk":{"u":420,"c":["RU"]},"Asia/Novosibirsk":{"u":420,"c":["RU"]},"Asia/Omsk":{"u":360,"c":["RU"]},"Asia/Oral":{"u":300,"c":["KZ"]},"Asia/Phnom_Penh":{"a":"Asia/Bangkok","c":["KH"],"r":1},"Asia/Pontianak":{"u":420,"c":["ID"]},"Asia/Pyongyang":{"u":540,"c":["KP"]},"Asia/Qatar":{"u":180,"c":["QA","BH"]},"Asia/Qostanay":{"u":360,"c":["KZ"]},"Asia/Qyzylorda":{"u":300,"c":["KZ"]},"Asia/Rangoon":{"a":"Asia/Yangon","c":["MM"],"r":1},"Asia/Riyadh":{"u":180,"c":["SA","AQ","KW","YE"]},"Asia/Saigon":{"a":"Asia/Ho_Chi_Minh","r":1},"Asia/Sakhalin":{"u":660,"c":["RU"]},"Asia/Samarkand":{"u":300,"c":["UZ"]},"Asia/Seoul":{"u":540,"c":["KR"]},"Asia/Shanghai":{"u":480,"c":["CN"]},"Asia/Singapore":{"u":480,"c":["SG","MY"]},"Asia/Srednekolymsk":{"u":660,"c":["RU"]},"Asia/Taipei":{"u":480,"c":["TW"]},"Asia/Tashkent":{"u":300,"c":["UZ"]},"Asia/Tbilisi":{"u":240,"c":["GE"]},"Asia/Tehran":{"u":210,"c":["IR"]},"Asia/Tel_Aviv":{"a":"Asia/Jerusalem","r":1},"Asia/Thimbu":{"a":"Asia/Thimphu","r":1},"Asia/Thimphu":{"u":360,"c":["BT"]},"Asia/Tokyo":{"u":540,"c":["JP"]},"Asia/Tomsk":{"u":420,"c":["RU"]},"Asia/Ujung_Pandang":{"a":"Asia/Makassar","r":1},"Asia/Ulaanbaatar":{"u":480,"c":["MN"]},"Asia/Ulan_Bator":{"a":"Asia/Ulaanbaatar","r":1},"Asia/Urumqi":{"u":360,"c":["CN","AQ"]},"Asia/Ust-Nera":{"u":600,"c":["RU"]},"Asia/Vientiane":{"a":"Asia/Bangkok","c":["LA"],"r":1},"Asia/Vladivostok":{"u":600,"c":["RU"]},"Asia/Yakutsk":{"u":540,"c":["RU"]},"Asia/Yangon":{"u":390,"c":["MM","CC"]},"Asia/Yekaterinburg":{"u":300,"c":["RU"]},"Asia/Yerevan":{"u":240,"c":["AM"]},"Atlantic/Azores":{"u":-60,"d":0,"c":["PT"]},"Atlantic/Bermuda":{"u":-240,"d":-180,"c":["BM"]},"Atlantic/Canary":{"u":0,"d":60,"c":["ES"]},"Atlantic/Cape_Verde":{"u":-60,"c":["CV"]},"Atlantic/Faeroe":{"a":"Atlantic/Faroe","r":1},"Atlantic/Faroe":{"u":0,"d":60,"c":["FO"]},"Atlantic/Jan_Mayen":{"a":"Europe/Berlin","c":["SJ"],"r":1},"Atlantic/Madeira":{"u":0,"d":60,"c":["PT"]},"Atlantic/Reykjavik":{"a":"Africa/Abidjan","c":["IS"],"r":1},"Atlantic/South_Georgia":{"u":-120,"c":["GS"]},"Atlantic/St_Helena":{"a":"Africa/Abidjan","c":["SH"],"r":1},"Atlantic/Stanley":{"u":-180,"c":["FK"]},"Australia/ACT":{"a":"Australia/Sydney","r":1},"Australia/Adelaide":{"u":570,"d":630,"c":["AU"]},"Australia/Brisbane":{"u":600,"c":["AU"]},"Australia/Broken_Hill":{"u":570,"d":630,"c":["AU"]},"Australia/Canberra":{"a":"Australia/Sydney","r":1},"Australia/Currie":{"a":"Australia/Hobart","r":1},"Australia/Darwin":{"u":570,"c":["AU"]},"Australia/Eucla":{"u":525,"c":["AU"]},"Australia/Hobart":{"u":600,"d":660,"c":["AU"]},"Australia/LHI":{"a":"Australia/Lord_Howe","r":1},"Australia/Lindeman":{"u":600,"c":["AU"]},"Australia/Lord_Howe":{"u":630,"d":660,"c":["AU"]},"Australia/Melbourne":{"u":600,"d":660,"c":["AU"]},"Australia/NSW":{"a":"Australia/Sydney","r":1},"Australia/North":{"a":"Australia/Darwin","r":1},"Australia/Perth":{"u":480,"c":["AU"]},"Australia/Queensland":{"a":"Australia/Brisbane","r":1},"Australia/South":{"a":"Australia/Adelaide","r":1},"Australia/Sydney":{"u":600,"d":660,"c":["AU"]},"Australia/Tasmania":{"a":"Australia/Hobart","r":1},"Australia/Victoria":{"a":"Australia/Melbourne","r":1},"Australia/West":{"a":"Australia/Perth","r":1},"Australia/Yancowinna":{"a":"Australia/Broken_Hill","r":1},"Brazil/Acre":{"a":"America/Rio_Branco","r":1},"Brazil/DeNoronha":{"a":"America/Noronha","r":1},"Brazil/East":{"a":"America/Sao_Paulo","r":1},"Brazil/West":{"a":"America/Manaus","r":1},"CET":{"u":60,"d":120},"CST6CDT":{"u":-360,"d":-300},"Canada/Atlantic":{"a":"America/Halifax","r":1},"Canada/Central":{"a":"America/Winnipeg","r":1},"Canada/Eastern":{"a":"America/Toronto","c":["CA"],"r":1},"Canada/Mountain":{"a":"America/Edmonton","r":1},"Canada/Newfoundland":{"a":"America/St_Johns","r":1},"Canada/Pacific":{"a":"America/Vancouver","r":1},"Canada/Saskatchewan":{"a":"America/Regina","r":1},"Canada/Yukon":{"a":"America/Whitehorse","r":1},"Chile/Continental":{"a":"America/Santiago","r":1},"Chile/EasterIsland":{"a":"Pacific/Easter","r":1},"Cuba":{"a":"America/Havana","r":1},"EET":{"u":120,"d":180},"EST":{"u":-300},"EST5EDT":{"u":-300,"d":-240},"Egypt":{"a":"Africa/Cairo","r":1},"Eire":{"a":"Europe/Dublin","r":1},"Etc/GMT":{"u":0},"Etc/GMT+0":{"a":"Etc/GMT","r":1},"Etc/GMT+1":{"u":-60},"Etc/GMT+10":{"u":-600},"Etc/GMT+11":{"u":-660},"Etc/GMT+12":{"u":-720},"Etc/GMT+2":{"u":-120},"Etc/GMT+3":{"u":-180},"Etc/GMT+4":{"u":-240},"Etc/GMT+5":{"u":-300},"Etc/GMT+6":{"u":-360},"Etc/GMT+7":{"u":-420},"Etc/GMT+8":{"u":-480},"Etc/GMT+9":{"u":-540},"Etc/GMT-0":{"a":"Etc/GMT","r":1},"Etc/GMT-1":{"u":60},"Etc/GMT-10":{"u":600},"Etc/GMT-11":{"u":660},"Etc/GMT-12":{"u":720},"Etc/GMT-13":{"u":780},"Etc/GMT-14":{"u":840},"Etc/GMT-2":{"u":120},"Etc/GMT-3":{"u":180},"Etc/GMT-4":{"u":240},"Etc/GMT-5":{"u":300},"Etc/GMT-6":{"u":360},"Etc/GMT-7":{"u":420},"Etc/GMT-8":{"u":480},"Etc/GMT-9":{"u":540},"Etc/GMT0":{"a":"Etc/GMT","r":1},"Etc/Greenwich":{"a":"Etc/GMT","r":1},"Etc/UCT":{"a":"Etc/UTC","r":1},"Etc/UTC":{"u":0},"Etc/Universal":{"a":"Etc/UTC","r":1},"Etc/Zulu":{"a":"Etc/UTC","r":1},"Europe/Amsterdam":{"a":"Europe/Brussels","c":["NL"],"r":1},"Europe/Andorra":{"u":60,"d":120,"c":["AD"]},"Europe/Astrakhan":{"u":240,"c":["RU"]},"Europe/Athens":{"u":120,"d":180,"c":["GR"]},"Europe/Belfast":{"a":"Europe/London","c":["GB"],"r":1},"Europe/Belgrade":{"u":60,"d":120,"c":["RS","BA","HR","ME","MK","SI"]},"Europe/Berlin":{"u":60,"d":120,"c":["DE","DK","NO","SE","SJ"]},"Europe/Bratislava":{"a":"Europe/Prague","c":["SK"],"r":1},"Europe/Brussels":{"u":60,"d":120,"c":["BE","LU","NL"]},"Europe/Bucharest":{"u":120,"d":180,"c":["RO"]},"Europe/Budapest":{"u":60,"d":120,"c":["HU"]},"Europe/Busingen":{"a":"Europe/Zurich","c":["DE"],"r":1},"Europe/Chisinau":{"u":120,"d":180,"c":["MD"]},"Europe/Copenhagen":{"a":"Europe/Berlin","c":["DK"],"r":1},"Europe/Dublin":{"u":60,"d":0,"c":["IE"]},"Europe/Gibraltar":{"u":60,"d":120,"c":["GI"]},"Europe/Guernsey":{"a":"Europe/London","c":["GG"],"r":1},"Europe/Helsinki":{"u":120,"d":180,"c":["FI","AX"]},"Europe/Isle_of_Man":{"a":"Europe/London","c":["IM"],"r":1},"Europe/Istanbul":{"u":180,"c":["TR"]},"Europe/Jersey":{"a":"Europe/London","c":["JE"],"r":1},"Europe/Kaliningrad":{"u":120,"c":["RU"]},"Europe/Kiev":{"a":"Europe/Kyiv","r":1},"Europe/Kirov":{"u":180,"c":["RU"]},"Europe/Kyiv":{"u":120,"d":180,"c":["UA"]},"Europe/Lisbon":{"u":0,"d":60,"c":["PT"]},"Europe/Ljubljana":{"a":"Europe/Belgrade","c":["SI"],"r":1},"Europe/London":{"u":0,"d":60,"c":["GB","GG","IM","JE"]},"Europe/Luxembourg":{"a":"Europe/Brussels","c":["LU"],"r":1},"Europe/Madrid":{"u":60,"d":120,"c":["ES"]},"Europe/Malta":{"u":60,"d":120,"c":["MT"]},"Europe/Mariehamn":{"a":"Europe/Helsinki","c":["AX"],"r":1},"Europe/Minsk":{"u":180,"c":["BY"]},"Europe/Monaco":{"a":"Europe/Paris","c":["MC"],"r":1},"Europe/Moscow":{"u":180,"c":["RU"]},"Europe/Nicosia":{"a":"Asia/Nicosia","r":1},"Europe/Oslo":{"a":"Europe/Berlin","c":["NO","BV"],"r":1},"Europe/Paris":{"u":60,"d":120,"c":["FR","MC"]},"Europe/Podgorica":{"a":"Europe/Belgrade","c":["ME"],"r":1},"Europe/Prague":{"u":60,"d":120,"c":["CZ","SK"]},"Europe/Riga":{"u":120,"d":180,"c":["LV"]},"Europe/Rome":{"u":60,"d":120,"c":["IT","SM","VA"]},"Europe/Samara":{"u":240,"c":["RU"]},"Europe/San_Marino":{"a":"Europe/Rome","c":["SM"],"r":1},"Europe/Sarajevo":{"a":"Europe/Belgrade","c":["BA"],"r":1},"Europe/Saratov":{"u":240,"c":["RU"]},"Europe/Simferopol":{"u":180,"c":["RU","UA"]},"Europe/Skopje":{"a":"Europe/Belgrade","c":["MK"],"r":1},"Europe/Sofia":{"u":120,"d":180,"c":["BG"]},"Europe/Stockholm":{"a":"Europe/Berlin","c":["SE"],"r":1},"Europe/Tallinn":{"u":120,"d":180,"c":["EE"]},"Europe/Tirane":{"u":60,"d":120,"c":["AL"]},"Europe/Tiraspol":{"a":"Europe/Chisinau","r":1},"Europe/Ulyanovsk":{"u":240,"c":["RU"]},"Europe/Uzhgorod":{"a":"Europe/Kyiv","r":1},"Europe/Vaduz":{"a":"Europe/Zurich","c":["LI"],"r":1},"Europe/Vatican":{"a":"Europe/Rome","c":["VA"],"r":1},"Europe/Vienna":{"u":60,"d":120,"c":["AT"]},"Europe/Vilnius":{"u":120,"d":180,"c":["LT"]},"Europe/Volgograd":{"u":180,"c":["RU"]},"Europe/Warsaw":{"u":60,"d":120,"c":["PL"]},"Europe/Zagreb":{"a":"Europe/Belgrade","c":["HR"],"r":1},"Europe/Zaporozhye":{"a":"Europe/Kyiv","r":1},"Europe/Zurich":{"u":60,"d":120,"c":["CH","DE","LI"]},"Factory":{"u":0},"GB":{"a":"Europe/London","c":["GB"],"r":1},"GB-Eire":{"a":"Europe/London","c":["GB"],"r":1},"GMT":{"a":"Etc/GMT","r":1},"GMT+0":{"a":"Etc/GMT","r":1},"GMT-0":{"a":"Etc/GMT","r":1},"GMT0":{"a":"Etc/GMT","r":1},"Greenwich":{"a":"Etc/GMT","r":1},"HST":{"u":-600},"Hongkong":{"a":"Asia/Hong_Kong","r":1},"Iceland":{"a":"Africa/Abidjan","c":["IS"],"r":1},"Indian/Antananarivo":{"a":"Africa/Nairobi","c":["MG"],"r":1},"Indian/Chagos":{"u":360,"c":["IO"]},"Indian/Christmas":{"a":"Asia/Bangkok","c":["CX"],"r":1},"Indian/Cocos":{"a":"Asia/Yangon","c":["CC"],"r":1},"Indian/Comoro":{"a":"Africa/Nairobi","c":["KM"],"r":1},"Indian/Kerguelen":{"a":"Indian/Maldives","c":["TF","HM"],"r":1},"Indian/Mahe":{"a":"Asia/Dubai","c":["SC"],"r":1},"Indian/Maldives":{"u":300,"c":["MV","TF"]},"Indian/Mauritius":{"u":240,"c":["MU"]},"Indian/Mayotte":{"a":"Africa/Nairobi","c":["YT"],"r":1},"Indian/Reunion":{"a":"Asia/Dubai","c":["RE"],"r":1},"Iran":{"a":"Asia/Tehran","r":1},"Israel":{"a":"Asia/Jerusalem","r":1},"Jamaica":{"a":"America/Jamaica","r":1},"Japan":{"a":"Asia/Tokyo","r":1},"Kwajalein":{"a":"Pacific/Kwajalein","r":1},"Libya":{"a":"Africa/Tripoli","r":1},"MET":{"u":60,"d":120},"MST":{"u":-420},"MST7MDT":{"u":-420,"d":-360},"Mexico/BajaNorte":{"a":"America/Tijuana","r":1},"Mexico/BajaSur":{"a":"America/Mazatlan","r":1},"Mexico/General":{"a":"America/Mexico_City","r":1},"NZ":{"a":"Pacific/Auckland","c":["NZ"],"r":1},"NZ-CHAT":{"a":"Pacific/Chatham","r":1},"Navajo":{"a":"America/Denver","r":1},"PRC":{"a":"Asia/Shanghai","r":1},"PST8PDT":{"u":-480,"d":-420},"Pacific/Apia":{"u":780,"c":["WS"]},"Pacific/Auckland":{"u":720,"d":780,"c":["NZ","AQ"]},"Pacific/Bougainville":{"u":660,"c":["PG"]},"Pacific/Chatham":{"u":765,"d":825,"c":["NZ"]},"Pacific/Chuuk":{"a":"Pacific/Port_Moresby","c":["FM"],"r":1},"Pacific/Easter":{"u":-360,"d":-300,"c":["CL"]},"Pacific/Efate":{"u":660,"c":["VU"]},"Pacific/Enderbury":{"a":"Pacific/Kanton","r":1},"Pacific/Fakaofo":{"u":780,"c":["TK"]},"Pacific/Fiji":{"u":720,"c":["FJ"]},"Pacific/Funafuti":{"a":"Pacific/Tarawa","c":["TV"],"r":1},"Pacific/Galapagos":{"u":-360,"c":["EC"]},"Pacific/Gambier":{"u":-540,"c":["PF"]},"Pacific/Guadalcanal":{"u":660,"c":["SB","FM"]},"Pacific/Guam":{"u":600,"c":["GU","MP"]},"Pacific/Honolulu":{"u":-600,"c":["US","UM"]},"Pacific/Johnston":{"a":"Pacific/Honolulu","c":["UM"],"r":1},"Pacific/Kanton":{"u":780,"c":["KI"]},"Pacific/Kiritimati":{"u":840,"c":["KI"]},"Pacific/Kosrae":{"u":660,"c":["FM"]},"Pacific/Kwajalein":{"u":720,"c":["MH"]},"Pacific/Majuro":{"a":"Pacific/Tarawa","c":["MH"],"r":1},"Pacific/Marquesas":{"u":-570,"c":["PF"]},"Pacific/Midway":{"a":"Pacific/Pago_Pago","c":["UM"],"r":1},"Pacific/Nauru":{"u":720,"c":["NR"]},"Pacific/Niue":{"u":-660,"c":["NU"]},"Pacific/Norfolk":{"u":660,"d":720,"c":["NF"]},"Pacific/Noumea":{"u":660,"c":["NC"]},"Pacific/Pago_Pago":{"u":-660,"c":["AS","UM"]},"Pacific/Palau":{"u":540,"c":["PW"]},"Pacific/Pitcairn":{"u":-480,"c":["PN"]},"Pacific/Pohnpei":{"a":"Pacific/Guadalcanal","c":["FM"],"r":1},"Pacific/Ponape":{"a":"Pacific/Guadalcanal","c":["FM"],"r":1},"Pacific/Port_Moresby":{"u":600,"c":["PG","AQ","FM"]},"Pacific/Rarotonga":{"u":-600,"c":["CK"]},"Pacific/Saipan":{"a":"Pacific/Guam","c":["MP"],"r":1},"Pacific/Samoa":{"a":"Pacific/Pago_Pago","c":["AS"],"r":1},"Pacific/Tahiti":{"u":-600,"c":["PF"]},"Pacific/Tarawa":{"u":720,"c":["KI","MH","TV","UM","WF"]},"Pacific/Tongatapu":{"u":780,"c":["TO"]},"Pacific/Truk":{"a":"Pacific/Port_Moresby","c":["FM"],"r":1},"Pacific/Wake":{"a":"Pacific/Tarawa","c":["UM"],"r":1},"Pacific/Wallis":{"a":"Pacific/Tarawa","c":["WF"],"r":1},"Pacific/Yap":{"a":"Pacific/Port_Moresby","c":["FM"],"r":1},"Poland":{"a":"Europe/Warsaw","r":1},"Portugal":{"a":"Europe/Lisbon","r":1},"ROC":{"a":"Asia/Taipei","r":1},"ROK":{"a":"Asia/Seoul","r":1},"Singapore":{"a":"Asia/Singapore","c":["SG"],"r":1},"Turkey":{"a":"Europe/Istanbul","r":1},"UCT":{"a":"Etc/UTC","r":1},"US/Alaska":{"a":"America/Anchorage","r":1},"US/Aleutian":{"a":"America/Adak","r":1},"US/Arizona":{"a":"America/Phoenix","c":["US"],"r":1},"US/Central":{"a":"America/Chicago","r":1},"US/East-Indiana":{"a":"America/Indiana/Indianapolis","r":1},"US/Eastern":{"a":"America/New_York","r":1},"US/Hawaii":{"a":"Pacific/Honolulu","c":["US"],"r":1},"US/Indiana-Starke":{"a":"America/Indiana/Knox","r":1},"US/Michigan":{"a":"America/Detroit","r":1},"US/Mountain":{"a":"America/Denver","r":1},"US/Pacific":{"a":"America/Los_Angeles","r":1},"US/Samoa":{"a":"Pacific/Pago_Pago","c":["AS"],"r":1},"UTC":{"a":"Etc/UTC","r":1},"Universal":{"a":"Etc/UTC","r":1},"W-SU":{"a":"Europe/Moscow","r":1},"WET":{"u":0,"d":60},"Zulu":{"a":"Etc/UTC","r":1}}};if(window.TIMEZONE==undefined){lib.TIMEZONE=lib.timezone=function(country_id){let time_zones=[];country_id=country_id||false;try{if(country_id){if(typeof country_id=='string'){country_id=country_id.toUpperCase();for(let i in data['timezones']){if('c'in data['timezones'][i]&&data['timezones'][i]['c'].indexOf(country_id)!=-1){time_zones.push(i);}}}}else time_zones.push(Intl.DateTimeFormat().resolvedOptions().timeZone);}catch(err){console.log(err);}
return time_zones;}}
if(window.COUNTRY==undefined){lib.COUNTRY=lib.country=function(tz_ci){let countries=[];try{tz_ci=tz_ci||TIMEZONE()[0];if(typeof tz_ci=='string'){tz_ci=tz_ci.toUpperCase();if(tz_ci in data['countries']){countries.push(data['countries'][tz_ci]);}else{for(let i in data['timezones']){if(i.toUpperCase()==tz_ci){if('c'in data['timezones'][i]){let c=data['timezones'][i]['c'];for(let j in c){countries.push(data['countries'][c[j]]);}}}}}}}catch(err){console.log(err);}
return countries;}}
if(window.REGION==undefined){lib.REGION=lib.region=function(tz_ci){let regions=[],tz=[];try{tz_ci=tz_ci||false;if(tz_ci){if(typeof tz_ci=='string'){tz_ci=tz_ci.toUpperCase();if(tz_ci in data['countries']){for(let i in data['timezones']){if('c'in data['timezones'][i]&&data['timezones'][i]['c'].indexOf(tz_ci)!=-1){regions.push(i.split('/')[0]);}}}else{for(let i in data['timezones']){if(i.toUpperCase()==tz_ci){regions.push(i.split('/')[0]);break;}}}}}else{tz=TIMEZONE();for(let i in tz){regions.push(tz[i].split('/')[0]);}}}catch(err){console.log(err);}
regions=regions.filter(function(item,index){return regions.indexOf(item)===index;});return regions;}}
root.CF_LOCATION=lib;})(this);fbuilderjQuery=(typeof fbuilderjQuery!='undefined')?fbuilderjQuery:jQuery;fbuilderjQuery['fbuilder']=fbuilderjQuery['fbuilder']||{};fbuilderjQuery['fbuilder']['modules']=fbuilderjQuery['fbuilder']['modules']||{};fbuilderjQuery['fbuilder']['modules']['location']={'prefix':'','callback':function()
{fbuilderjQuery['fbuilder']['extend_window'](fbuilderjQuery['fbuilder']['modules']['location']['prefix'],CF_LOCATION);}};$.fbuilder['version']='6.2.15';$.fbuilder['controls']=$.fbuilder['controls']||{};$.fbuilder['forms']=$.fbuilder['forms']||{};$.fbuilder['htmlEncode']=window['cff_esc_attr']=function(value)
{return $('<div/>').text(value).html().replace(/"/g,"&quot;").replace(/&amp;lt;/g,'&lt;').replace(/&amp;gt;/g,'&gt;');};$.fbuilder['htmlDecode']=window['cff_html_decode']=function(value)
{return(/&(?:#x[a-f0-9]+|#[0-9]+|[a-z0-9]+);?/ig.test(value))?$('<div/>').html(value).text():value;};$.fbuilder['sanitize']=window['cff_sanitize']=function(value)
{if(typeof value=='string')
value=value.replace(/<script\b.*\bscript>/ig,'').replace(/<script[^>]*>/ig,'');return value;};$.fbuilder['escapeSymbol']=function(value)
{return value.replace(/([\^\$\-\.\,\[\]\(\)\/\\\*\?\+\!\{\}])/g,"\\$1");};$.fbuilder['parseValStr']=function(value,raw,no_quotes)
{raw=raw||false;no_quotes=no_quotes||false;value=$.trim(value||'');value=value.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/"/g,'\\"');var r=($.isNumeric(value))?((raw)?value:value*1):((no_quotes)?value:'"'+value+'"');return raw?r:(window.cffsanitize!=undefined?cffsanitize(r,true):r);};$.fbuilder['parseVal']=function(value,thousand,decimal,no_quotes)
{if(!!value==false)return 0;no_quotes=no_quotes||false;if(/(\d{1,2}[\/\.\-]\d{1,2}[\/\.\-]\d{4})|(\d{4}[\/\.\-]\d{1,2}[\/\.\-]\d{1,2})/.test(value))
return $.fbuilder['parseValStr'](value,false,no_quotes);thousand=$.fbuilder.escapeSymbol($.trim((typeof thousand!='undefined')?thousand:','));decimal=$.trim((!!!decimal||/^\s*$/.test(decimal))?'.':decimal);var p,_thousand=/^\s*$/.test(thousand)?'\,':thousand,t=new String(value);try{if(1==t.match(new RegExp(_thousand,'g')).length){t=t.replace(new RegExp(_thousand+'\(\\d{1,2}\)$'),decimal+'$1');}}catch(err){}
t=t.replace(new RegExp(thousand,'g'),'').replace(new RegExp($.fbuilder.escapeSymbol(decimal),'g'),'.').replace(/\s/g,'');p=/[+\-]?((\d+(\.\d+)?)|(\.\d+))(?:[eE][+\-]?\d+)?/.exec(t);return(p)?((/^0\d/.test(p[0]))?p[0].substr(1):p[0])*1:$.fbuilder['parseValStr'](value,false,no_quotes);};$.fbuilder['isMobile']=function(){try{document.createEvent("TouchEvent");return true;}
catch(e){return false;}};$.fbuilder['setBrowserHistory']=function(r)
{if('history'in window)
{var b='#',s='';for(var id in $.fbuilder.forms)
{b+=s+'f'+id.replace(/[^\d]/g,'')+'p'+($.fbuilder.forms[id]['currentPage']||0);s='|';}
history[(r)?'replaceState':'pushState']({},document.title,b);}};$.fbuilder['manageHistory']=function(onload)
{var b=(document.URL.split('#')[1]||null),m,f,t,flag=false;if(b)
{while(m=b.match(/f(\d+)p(\d+)\|?/))
{f='_'+m[1];t=onload?0:m[2]*1;b=b.replace(m[0],'');flag=(!(f in $.fbuilder.forms)||t!=$.fbuilder['goToPage']({'formIdentifier':f,'from':0,'to':t,'animate':false}));}}
else
{for(f in $.fbuilder.forms)
if('currentPage'in $.fbuilder.forms[f])
$.fbuilder['goToPage']({'formIdentifier':f,'from':0,'to':0,'animate':false});}
if(flag)$.fbuilder.setBrowserHistory(true);};$.fbuilder['goToPage']=function(config)
{function swapPages(pageToHide,pageToShow,callback)
{var t=300,w=pageToHide.width(),f=pageToHide.closest('form'),fx=f.data('animation_effect')=='slide'?'slide':'fade';if(('animate'in config&&config.animate==false)||(f.data('animate_form')==undefined||f.data('animate_form')*1==0))t=0;if(fx=='fade'){pageToHide.fadeOut(t,function(){pageToHide.find(".field").addClass("ignorepb");pageToShow.fadeIn(t,function(){pageToShow.find(".ignorepb").removeClass("ignorepb");callback();if('callback'in config)config.callback();});});}else{f.css('overflow-x','hidden');var d=pageToHide.attr('page')*1<pageToShow.attr('page')*1?-1:1;pageToHide.animate({width:w,marginLeft:d*w},t,'linear',function(){pageToHide.hide().find(".field").addClass("ignorepb");pageToShow.css({width:w,marginLeft:-1*d*w}).show().animate({width:w,marginLeft:0},t,'linear',function(){pageToShow.css('width','100%');pageToShow.find(".ignorepb").removeClass("ignorepb");callback();if('callback'in config)config.callback();});});}};if(('formIdentifier'in config||'form'in config)&&'to'in config)
{var id=(config['form'])?$('[name="cp_calculatedfieldsf_pform_psequence"]',config['form']).val():config['formIdentifier'],formObj=$.fbuilder.forms[id],_from=(config['from']||formObj['currentPage']||0)*1,_to=config['to']*1,direction=(_from<_to)?1:-1,formDom=$(config['form']||'[id="'+formObj.formId+'"]'),pageDom,i=_from;_from=isNaN(_from)?0:_from;_to=isNaN(_to)?0:_to;while(i!=_to)
{if(direction==1&&(!('forcing'in config)||config['forcing']==false)&&!formDom.valid())break;i+=direction;}
formObj['currentPage']=i;pageDom=$(".pbreak.pb"+i,formDom);if(i!=_from){swapPages($(".pbreak:visible",formDom),pageDom,function()
{try
{if(!$.fbuilder.isMobile())
{var ff=pageDom.find(":focusable:first");if(ff&&!ff.hasClass('hasDatepicker')&&ff.attr('type')!='button'&&ff.attr('type')!='radio'&&ff.attr('type')!='checkbox'&&ff.closest('[uh]').length==0)ff.focus();}
var _wScrollTop=$(window).scrollTop(),_viewportHeight=$(window).height(),_scrollTop=formDom.offset().top;if(_scrollTop<_wScrollTop||(_wScrollTop+_viewportHeight)<_scrollTop)
$('html, body').animate({scrollTop:_scrollTop},50);}
catch(e){}
$(document).trigger('cff-gotopage',{'from':_from,'to':i,'form':formDom});});}else{formDom.validate().focusInvalid();}
return i;}};$.fbuilder['showHideDep']=function(config)
{var processItems=function(items,isNotFirstTime)
{for(var i=0,h=items.length;i<h;i++)
{if(typeof items[i]=='string')items[i]=$.fbuilder['forms'][id].getItem(items[i]);if(items[i])
{if(isNotFirstTime)
{$('[name="'+items[i].name+'"]').trigger('depEvent');if(items[i].usedInEquations)$.fbuilder['calculator'].enqueueEquation(id,items[i].usedInEquations);}
if('showHideDep'in items[i])
{var list=items[i]['showHideDep'](toShow,toHide,hiddenByContainer,interval);if(list&&list.length)processItems(list,true);}}}};if('formIdentifier'in config)
{var id=config['formIdentifier'];if(id in $.fbuilder['forms'])
{var interval=$('#'+$.fbuilder['forms'][id]['formId']).data('animate_form')?250:0,toShow=$.fbuilder['forms'][id]['toShow'],toHide=$.fbuilder['forms'][id]['toHide'],hiddenByContainer=$.fbuilder['forms'][id]['hiddenByContainer'],items=('fieldIdentifier'in config)?[$.fbuilder['forms'][id].getItem(config['fieldIdentifier'].replace(/_[cr]b\d+$/i,''))]:$.fbuilder['forms'][id].getItems();processItems(items);$('[id="'+$.fbuilder['forms'][id]['formId']+'"]').trigger('showHideDepEvent',$.fbuilder['forms'][id]['formId']);}}};$.fbuilder['cpcffLoadDefaults']=function(o)
{if(typeof cpcff_default!='undefined')
{var $=fbuilderjQuery,id=o.identifier.replace(/[^\d]/g,''),item,data,formObj,f;if(id in cpcff_default)
{data=cpcff_default[id];id='_'+id;formObj=$.fbuilder['forms'][id];f=$('#'+formObj['formId']);f.attr('data-evalequations',0);for(var fieldId in data)
{item=formObj.getItem(fieldId+id);try{if('setVal'in item)item.setVal(data[fieldId],true,true);$('[name*="'+item.name+'"]').trigger('trigger_ds');}
catch(err){}}
f.attr('data-evalequations',('evalequations_delay'in o&&o.evalequations_delay)?0:o.evalequations);$.fbuilder.showHideDep({'formIdentifier':o.identifier});}}};$.fn.fbuilder=function(options){var opt=$.extend({},{pub:false,identifier:"",title:""},options,true);opt.messages=$.extend({previous:"Previous",next:"Next",pageof:"Page {0} of {0}",discount:"Discount: {0}, Final Price: {0}",required:"This field is required.",email:"Please enter a valid email address.",datemmddyyyy:"Please enter a valid date with this format(mm/dd/yyyy)",dateddmmyyyy:"Please enter a valid date with this format(dd/mm/yyyy)",number:"Please enter a valid number.",digits:"Please enter only digits.",maxlength:"Please enter no more than {0} characters.",minlength:"Please enter at least {0} characters.",equalTo:"Please enter the same value again.",max:"Please enter a value less than or equal to {0}.",min:"Please enter a value greater than or equal to {0}.",currency:"Please enter a valid currency value."},(opt.messages||{}));opt.messages.max=$.validator.format(opt.messages.max);opt.messages.min=$.validator.format(opt.messages.min);opt.messages.maxlength=$.validator.format(opt.messages.maxlength);opt.messages.minlength=$.validator.format(opt.messages.minlength);opt.messages.dateyyyymmdd=opt.messages.datemmddyyyy;opt.messages.dateyyyyddmm=opt.messages.dateddmmyyyy;$.extend($.validator.messages,opt.messages);$("#cp_calculatedfieldsf_pform"+opt.identifier).validate({ignore:".ignore,.ignorepb",errorClass:'cpefb_error',errorElement:"div",errorPlacement:function(e,element)
{var _parent=element.closest('.dfield'),_uh=_parent.find('span.uh:visible'),_arg={'position':'absolute'},_t=_parent.find('input[type="button"],input[type="reset"],input[type="text"],input[type="number"],input[type="email"],input[type="file"],input[type="color"],input[type="date"],input[type="password"],input[type="email"],select,textarea');try{if(_t.length)_arg['left']=_t.first()[0].offsetLeft;}catch(err){}
e.addClass('message').css(_arg).appendTo((_uh.length)?_uh:_parent);}}).messages=opt.messages;var items=[],fieldsIndex={},reloadItemsPublic=function()
{var form_tag=$("#cp_calculatedfieldsf_pform"+opt.identifier),header_tag=$("#formheader"+opt.identifier),fieldlist_tag=$("#fieldlist"+opt.identifier),page_tag,i=0,page=0,getCaptchaHTML=function(){var captcha_tag=$("#cpcaptchalayer"+opt.identifier+':not(:empty)')
html='';if(captcha_tag.length)
{html+='<div class="captcha">'+captcha_tag.html()+'</div><div class="clearer"></div>';captcha_tag.remove();}
return html;},getSubmitHTML=function(){var submit_tag=$("#cp_subbtn"+opt.identifier+':not(:empty)'),html='';if(submit_tag.length)
{html+='<div class="pbSubmit" tabindex="0">'+submit_tag.html()+'</div>';submit_tag.remove();}
return html;};form_tag.addClass(theForm.formtemplate);theForm.form_tag=form_tag;if(!opt.cached)
{page_tag=$('<div class="pb'+page+' pbreak" page="'+page+'"></div>');header_tag.html($.fbuilder.sanitize(theForm.show()));fieldlist_tag.addClass(theForm.formlayout).append(page_tag);for(i;i<items.length;i++)
{items[i].index=i;if(items[i].ftype=="fPageBreak")
{page++;page_tag=$('<div class="pb'+page+' pbreak" page="'+page+'"></div>');fieldlist_tag.append(page_tag);}
else
{page_tag.append((items[i].ftype!='fhtml')?$.fbuilder.sanitize(items[i].show()):items[i].show());if(items[i].predefinedClick)
{page_tag.find("#"+items[i].name).attr({placeholder:items[i].predefined,value:""});}
if(items[i].exclude)
{page_tag.find('.'+items[i].name).addClass('cff-exclude');}
if('audiotutorial'in items[i]&&!/^\s*$/.test(items[i].audiotutorial))
{(function(){var t=(typeof opt!='undefined'&&'messages'in opt&&'audio_tutorial'in opt.messages)?opt.messages.audio_tutorial:false,e=items[i].jQueryRef(),c=$('<span class="cff-audio-icon" '+(t?'uh="'+cff_esc_attr(t)+'"':'')+'></span>'),a=$('<audio src="'+cff_esc_attr(items[i].audiotutorial)+'" class="cff-audio-tutorial"></audio>');a.appendTo(e.find('.dfield'));c.appendTo($(e.children('label')[0]||e));c.click(function(evt){var e=$(this);if(e.hasClass('cff-audio-stop-icon')){e.removeClass('cff-audio-stop-icon');a[0].pause();a[0].currentTime=0;}else{$('.cff-audio-stop-icon').click();e.addClass('cff-audio-stop-icon');a[0].play();}
evt.stopPropagation();evt.preventDefault();return false;});})()}
if(items[i].userhelpTooltip)
{var uh=items[i].jQueryRef();if(items[i].userhelp&&items[i].userhelp.length)
{if(items[i].tooltipIcon)$('<span class="cff-help-icon"></span>').attr('uh',items[i].userhelp).appendTo($(uh.children('label')[0]||uh));else{var target=uh.find('input[type="button"],input[type="reset"],input[type="text"],input[type="number"],input[type="email"],input[type="file"],input[type="color"],input[type="date"],input[type="password"],input[type="email"],select,textarea');if(!target.length)target=uh.find('.slider');if(!target.length)target=uh.find('.dfield label');if(!target.length)target=uh.find('.dfield');if(!target.length)target=uh;$(target).attr('uh',items[i].userhelp);}}
uh.find(".uh").remove();}}}}
else
{page=fieldlist_tag.find('.pbreak').length;i=items.length;}
if(page>0)
{if(!opt.cached)
{$(".pb"+page,fieldlist_tag).addClass("pbEnd");$(".pbreak",fieldlist_tag).each(function(index){var code='',bSubmit='';if(index==page)
{code+=getCaptchaHTML();bSubmit=getSubmitHTML();}
$(this).wrapInner('<fieldset></fieldset>').find('fieldset:eq(0)').prepend('<legend>'+opt.messages.pageof.replace(/\{\s*\d+\s*\}/,(index+1)).replace(/\{\s*\d+\s*\}/,(page+1))+'</legend>').append(code+'<div class="pbPrevious" tabindex="0">'+opt.messages.previous+'</div><div class="pbNext" tabindex="0">'+opt.messages.next+'</div>'+bSubmit+'<div class="clearer"></div>');});}
fieldlist_tag.find(".pbPrevious,.pbNext").bind("keyup",function(evt){if(evt.which==13||evt.which==32)$(this).click();}).bind("click",{'identifier':opt.identifier},function(evt){var _from=($.fbuilder.forms[evt.data.identifier]['currentPage']||0),_inc=($(this).hasClass("pbPrevious"))?-1:1,_p=$.fbuilder['goToPage']({'formIdentifier':evt.data.identifier,'from':_from,'to':_from+_inc,'callback':function()
{setTimeout(function(){if(_from!=_p)$.fbuilder.setBrowserHistory();if(_pDom.find('.fields:visible').length==0)
if(_inc==-1&&0<_p)_pDom.find('.pbPrevious').click();else if(!_pDom.hasClass('pbEnd'))_pDom.find('.pbNext').click();},10);}}),_pDom=$('.pb'+_p);return false;});}
else
{if(!opt.cached)$(".pb"+page,fieldlist_tag).append(getCaptchaHTML()+getSubmitHTML());}
if(!opt.cached&&opt.setCache)
{var cloned_form=form_tag.clone();cloned_form.find('[name="_wpnonce"],[name="_wp_http_referer"]').remove();var url=document.location.href,data={'cffaction':'cff_cache','cache':cloned_form.html().replace(/\n+/g,''),'form':cloned_form.find('[name="cp_calculatedfieldsf_id"]').val()};$.post(url,data,function(data){if(typeof console!='undefined')console.log(data);});}
jQuery(document).on('click','.cff-help-icon',function(evt){evt.stopPropagation();evt.preventDefault();});$(document).on('click','#fbuilder .captcha img',function(){try{var e=$(this),src=e.attr('src');if(!(new RegExp('^http(s)?\:\/\/'+$.fbuilder.escapeSymbol(window.location.host),'i')).test(src))src=document.location.href.split('?')[0]+'?'+src.split('?')[1];e.attr('src',src.replace(/&\d+$/,'')+'&'+Math.floor(Math.random()*1000));}catch(err){if('console'in window)console.log(err);}});$(form_tag).find('.captcha img').click();$('#fieldlist'+opt.identifier).find(".pbSubmit").bind("keyup",function(evt){if(evt.which==13||evt.which==32)$(this).click();}).bind("click",{'identifier':opt.identifier},function(evt){$(this).closest("form").submit();});if(i>0)
{theForm.after_show(opt.identifier);for(var i=0;i<items.length;i++)
{items[i].after_show();if('csslayout'in items[i]&&/\bignorefield\b/i.test(items[i]['csslayout']))
IGNOREFIELD(items[i].name,items[i].form_identifier);}
theForm.form_tag.removeData('first_time');$('script[type="cff-script"]').each(function(){$(this).after(this.outerHTML.replace('cff-script','text/javascript')).remove();});$(document).on('change','#fieldlist'+opt.identifier+' .depItemSel,'+'#fieldlist'+opt.identifier+' .depItem',{'identifier':opt.identifier},function(evt)
{$.fbuilder.showHideDep({'formIdentifier':evt.data.identifier,'fieldIdentifier':evt.target.id});});setTimeout(function(){$.fbuilder.showHideDep({'formIdentifier':opt.identifier});$('.cff-processing-form').remove();if('form_tag'in theForm){theForm.form_tag.trigger('formReady',[theForm.form_tag.attr('id'),theForm.form_tag,theForm]);}},50);try
{$.widget.bridge('uitooltip',$.ui.tooltip);$("#fbuilder"+opt.identifier).uitooltip({show:false,hide:false,tooltipClass:"uh-tooltip",position:{my:"left top",at:"left bottom+5",collision:"flipfit"},items:"[uh]",content:function(){return $(this).attr("uh");},open:function(evt,ui){try{if(window.matchMedia("screen and (max-width: 640px)").matches){var duration=('undefined'!=typeof tooltip_duration&&/^\d+$/.test(tooltip_duration))?tooltip_duration:3000;setTimeout(function(){$(ui.tooltip).hide('fade');},duration);}}catch(err){}}});}catch(e){}}
$("#fieldlist"+opt.identifier+" .pbreak:not(.pb0)").find(".field").addClass("ignorepb");$("#fieldlist"+opt.identifier).find('[type="date"],[type="hidden"]').each(function(){$(this).rules('add',{step:false});});};var fform=function(){};$.extend(fform.prototype,{title:"Untitled Form",description:"This is my form. Please fill it out. It's awesome!",formlayout:"top_aligned",formtemplate:"",evalequations:1,evalequations_delay:0,evalequationsevent:2,loading_animation:0,animate_form:0,animation_effect:'fade',autocomplete:1,request_cost:"",show:function(){return'<div class="fform" id="field">'+(!/^\s*$/.test(this.title)?'<h2>'+this.title+'</h2>':'')+(!/^\s*$/.test(this.description)?'<span>'+this.description+'</span>':'')+'</div>';},after_show:function(id){if(typeof $['validator']!='undefined')
{if(!('cffcurrency'in $.validator.methods))
$.validator.addMethod('cffcurrency',function(v,el)
{var f=el.id.match(/_\d+$/),esc=$.fbuilder.escapeSymbol,r;e=$.fbuilder['forms'][f[0]].getItem(el.name);r=new RegExp('^\\s*('+esc(e.currencySymbol)+')?\\s*\\-?\\d+('+esc(e.thousandSeparator)+'\\d{3})*'+((e.noCents)?'':'('+e.centSeparator+'\\d+)?')+'\\s*('+esc(e.currencyText)+')?\\s*$','i');return this.optional(el)||r.test(v)||($.isNumeric(v)&&(!e.noCents||v===FLOOR(v)));},$.validator.messages['currency']);$.validator.methods.number=function(v,el)
{var f=el.id.match(/_\d+$/),esc=$.fbuilder.escapeSymbol,e,r;if(f&&el.id.match(/fieldname/i))e=$.fbuilder['forms'][f[0]].getItem(el.name);if(!e)e={thousandSeparator:',',decimalSymbol:'.'};else v=e.val();r=new RegExp('^\\s*\\-?\\d+('+esc(e.thousandSeparator)+'\\d{3})*('+esc(e.decimalSymbol)+'\\d+)?\\s*\\%?\\s*$','i');return this.optional(el)||r.test(v)||$.isNumeric(v);};$.validator.methods.min=function(v,el,p)
{var f=el.id.match(/_\d+$/),e;if(f&&el.id.match(/fieldname/i))e=$.fbuilder['forms'][f[0]].getItem(el.name);if(e){v=e.val();if('dformat'in e&&e.dformat=='percent')v*=100;}
return this.optional(el)||v>=p;};$.validator.methods.max=function(v,el,p)
{var f=el.id.match(/_\d+$/),e;if(f&&el.id.match(/fieldname/i))e=$.fbuilder['forms'][f[0]].getItem(el.name);if(e){v=e.val();if('dformat'in e&&e.dformat=='percent')v*=100;}
return this.optional(el)||v<=p;};}
var form=$('#cp_calculatedfieldsf_pform'+id);form.on('keydown keyup keypress','[type="text"],[type="number"],[type="password"],[type="email"]',function(evt){if(evt.keyCode===13)
{evt.preventDefault();evt.stopPropagation();return false;}});if(typeof $.fn.fbuilder_localstorage!='undefined'&&form.hasClass('persist-form'))
{form.fbuilder_localstorage();}
form.attr('data-evalequations',('evalequations_delay'in this&&this.evalequations_delay)?0:this.evalequations).attr('data-evalequationsevent',this.evalequationsevent).attr('data-animate_form',this.animate_form).attr('data-animation_effect',this.animation_effect).attr('autocomplete',((this.autocomplete)?'on':'off')).one('formReady',(function(evalequations){return function(){$(this).attr('data-evalequations',evalequations);if(evalequations)fbuilderjQuery.fbuilder.calculator.defaultCalc(this,false,false);};})(this.evalequations)).find('input,select').blur(function(){try{if(!$(this).is(':file'))$(this).valid();}catch(e){};});if(!this.autocomplete)form.find('input[name*="fieldname"]:not([autocomplete])').attr('autocomplete','new-password');form.find('[name="couponcode"]').on('keyup',{'form':this.request_cost+id},function(){var e=$(this),v=e.val();if(v.length)
{if(e.next('.apply-coupon').length==0)
e.after('<div class="apply-coupon"></div>');}
else
{e.next('.apply-coupon').remove();}
e.closest('form').find('.discount-container').hide();});$(document).on('click','#cp_calculatedfieldsf_pform'+id+' .apply-coupon',{'field':this.request_cost,'sequence':id},function(evt){var me=$(this),c=me.prev('[name="couponcode"]'),v,r,f=me.closest('form'),s=evt.data.sequence,l=evt.data.field,fid=f.find('[name="cp_calculatedfieldsf_id"]');if(c.length&&f.length)
{v=c.val();r=$.getJSON(document.location.href,{"formid":fid.val(),"formsequence":s,"couponcode":v,"action":"checkcoupon","_cpcff_public_nonce":f.find('[id="_cpcff_public_nonce"]').val()},function(data)
{try{var sequence=s,field=l+s,item=$.fbuilder.forms[sequence].getItem(field),price=item.val(),discount,final_price,dc=f.find('.discount-container');if(dc.length==0)
{dc=$('<div class="discount-container"></div>');dc.appendTo(c.closest('div'));}
dc.html('').hide();if(!$.isEmptyObject(data))
{if('error'in data)
{dc.html(data.error).show();return;}
data.availability*=1;if(data.availability)
{final_price=data.discount*1;discount=(!isNaN(discount=ABS(price-final_price)))?discount:' - ';}
else{final_price=price*(100-data.discount)/100;discount=data.discount+"%";}
if(item.ftype=='fCalculated')
{var format={"prefix":item.prefix,"suffix":item.suffix,"groupingsymbol":item.groupingsymbol,"decimalsymbol":item.decimalsymbol};final_price=$.fbuilder.calculator.format(PREC(final_price,2),format);if(!isNaN(discount))
{discount=$.fbuilder.calculator.format(PREC(discount,2),format);}}
dc.html(opt.messages.discount.replace(/\{\s*\d+\s*\}/,discount).replace(/\{\s*\d+\s*\}/,final_price)).show();}}catch(err){}});}});}});var theForm,ffunct={toShow:{},toHide:{},hiddenByContainer:{},getItem:function(name)
{if(name in fieldsIndex)return items[fieldsIndex[name]];var regExp=new RegExp((parseInt(name,10)==name)?'fieldname'+name+'_':name+'_',i);for(var i in items)
{if(items[i].name==name||regExp.test(items[i].name))
{return items[i];}}
return false;},getItems:function()
{return items;},loadData:function(f)
{var d=window[f];if(typeof d!='undefined')
{if(typeof d=='object'&&(typeof d.nodeType!=='undefined'||d instanceof jQuery)){d=jQuery.parseJSON(jQuery(d).val());}
else if(typeof d=='string'){d=jQuery.parseJSON(d);}
if(d.length==2)
{this.formId=d[1]['formid'];items=[];for(var i=0;i<d[0].length;i++)
{var obj=new $.fbuilder.controls[d[0][i].ftype]();obj=$.extend(true,{},obj,d[0][i]);obj.name=obj.name+opt.identifier;obj.form_identifier=opt.identifier;obj.init();items[i]=obj;fieldsIndex[obj.name]=i;}
theForm=new fform();theForm=$.extend(theForm,d[1][0]);opt.evalequations=d[1][0]['evalequations'];opt.evalequations_delay=(typeof d[1][0]['evalequations_delay']!='undefined'&&d[1][0]['evalequations_delay'])?1:0;opt.cached=(typeof d[1]['cached']!='undefined'&&d[1]['cached'])?true:false;opt.setCache=(!this.cached&&typeof d[1]['setCache']!='undefined'&&d[1]['setCache'])?true:false;reloadItemsPublic();}
$.fbuilder.cpcffLoadDefaults(opt);}}};$.fbuilder['forms'][opt.identifier]=ffunct;this.fBuild=ffunct;return this;};$.fbuilder.controls['ffields']=function(){};$.extend($.fbuilder.controls['ffields'].prototype,{form_identifier:"",name:"",shortlabel:"",index:-1,ftype:"",userhelp:"",audiotutorial:"",userhelpTooltip:false,csslayout:"",init:function(){},_getAttr:function(attr,raw)
{var me=this,f,v=$.trim(me[attr]),raw=raw||false;if(!raw&&$.isNumeric(v))return parseFloat(v);f=(/^fieldname\d+$/i.test(v))?me.getField(v):false;if(f)
{v=f.val();if(f.ftype=='fdate')return v?new Date(v*86400000):'';if(!raw&&$.isNumeric(v))return parseFloat(v);return(new String(v)).replace(/^"+/,'').replace(/"+$/,'');}
return v;},_setHndl:function(attr,one)
{var me=this,v=$.trim(me[attr]);if($.isNumeric(v))return;var s=(/^fieldname\d+$/i.test(v))?'[id*="'+v+me.form_identifier+'"]':v,i=(one)?'one':'on';if('string'==typeof s&&!/^\s*$/.test(s))
{s=$.trim(s);if(!$.isNumeric(s.charAt(0)))
{$(document)[i]('change depEvent',s,function(evt){if(me['set_'+attr])me['set_'+attr](me._getAttr(attr),$(evt.target).hasClass('ignore'));});$(document)['one']('showHideDepEvent',function(evt,formId){try
{if(me['set_'+attr])
{me['set_'+attr](me._getAttr(attr),$(s).hasClass('ignore'));$('#'+formId).validate().resetForm();}}
catch(err){}});}}},getField:function(f){return $.fbuilder['forms'][this.form_identifier].getItem(f);},jQueryRef:function(){return $('.'+this.name);},show:function()
{return'Not available yet';},after_show:function(){},val:function(raw,no_quotes){raw=raw||false;no_quotes=no_quotes||false;var e=$("[id='"+this.name+"']:not(.ignore)");if(e.length)
{var v=e.val();if(raw)return $.fbuilder.parseValStr(v,raw,no_quotes);v=$.trim(v);return($.isNumeric(v))?$.fbuilder.parseVal(v):$.fbuilder.parseValStr(v,raw,no_quotes);}
return 0;},setVal:function(v,nochange)
{var e=$("[id='"+this.name+"']");e.val(v);if(!nochange)e.change();},setPlaceholder:function(v)
{$('[id="'+this.name+'"][type="text"]').add('[id="'+this.name+'"][type="text"]').attr('placeholder',v);}});window.addEventListener('popstate',function(){try
{$(".ui-datepicker").hide();$.fbuilder.manageHistory();}
catch(err){}});$(window).on('load',function(){$.fbuilder.manageHistory(true);});$(document).on('click','#fbuilder .cff-spinner-down,#fbuilder .cff-spinner-up',function(){var u=$(this).hasClass('cff-spinner-up'),e=$(this)[u?'prev':'next']('input'),o,s,m,v,l;if(e.length){o=getField(e.attr('id'),e[0].form);s=e.attr('step');if(isNaN(s*1))s=1;l=(new String(s)).split('.');s*=1;l=l.length==2?l[1].length:0;m=e.attr(u?'max':'min');v=o.val();if(e.hasClass('percent')){v=PREC(v*100,4)*1;}
if(u)v+=s;else v-=s;if(m)v=u?MIN(v,m):MAX(v,m);v=PREC(v,l);o.setVal(v);e.valid();}});function assign_data_cff_field_content(field){try{field=$(field);var field_name=field.attr('name').match(/fieldname\d+/)[0];form_obj=field.closest('form'),tags=form_obj.find('[data-cff-field="'+field_name+'"]');if(tags.length){var ignore=field.hasClass('ignore'),field_obj=getField(field,form_obj),value=(ignore||!field_obj)?'':field_obj.val(('toSubmit'in field_obj?'vt':true),true);value=Array.isArray(value)?value.join(', '):value;if(typeof value=='string'){value=value.replace(/\\\\/g,"\\").replace(/\\'/g,"'").replace(/\\"/g,'"');}
tags.each(function(){$(this).html(value);});}}catch(err){}};$(document).on('change keyup','#fbuilder :input[name*="fieldname"]',function(){var me=this;setTimeout(function(){assign_data_cff_field_content(me);},50);});$(document).one('showHideDepEvent',function(){try{var form_obj=$('#'+arguments[1]);form_obj.find('[data-cff-field]').each(function(){try{var tag_obj=$(this),field_name=tag_obj.attr('data-cff-field'),field_obj;if(field_name.length&&/fieldname\d+/.test(field_name)){field_obj=form_obj.find('[name*="'+field_name+'_"]');if(field_obj.length)assign_data_cff_field_content(field_obj);}}catch(err){}});}catch(err){}});$.fbuilder.controls['ftext']=function(){};$.extend($.fbuilder.controls['ftext'].prototype,$.fbuilder.controls['ffields'].prototype,{title:"Untitled",ftype:"ftext",autocomplete:"off",predefined:"",predefinedClick:false,required:false,readonly:false,size:"medium",minlength:"",maxlength:"",equalTo:"",regExp:"",regExpMssg:"",show:function()
{this.minlength=cff_esc_attr($.trim(this.minlength));this.maxlength=cff_esc_attr($.trim(this.maxlength));this.equalTo=cff_esc_attr($.trim(this.equalTo));this.predefined=this._getAttr('predefined');return'<div class="fields '+cff_esc_attr(this.csslayout)+' '+this.name+' cff-text-field" id="field'+this.form_identifier+'-'+this.index+'"><label for="'+this.name+'">'+this.title+''+((this.required)?"<span class='r'>*</span>":"")+'</label><div class="dfield"><input aria-label="'+cff_esc_attr(this.title)+'" id="'+this.name+'" name="'+this.name+'"'+((this.minlength.length)?' minlength="'+cff_esc_attr(this.minlength)+'"':'')+((this.maxlength.length)?' maxlength="'+cff_esc_attr(this.maxlength)+'"':'')+((this.equalTo.length)?' equalTo="#'+cff_esc_attr(this.equalTo)+this.form_identifier+'"':'')+' class="field '+this.size+((this.required)?" required":"")+'" '+((this.readonly)?'readonly':'')+' type="text" value="'+cff_esc_attr(this.predefined)+'" autocomplete="'+this.autocomplete+'" /><span class="uh">'+this.userhelp+'</span></div><div class="clearer"></div></div>';},after_show:function()
{if(this.regExp!=""&&typeof $['validator']!='undefined')
{try{var parts=this.regExp.match(/(\/)(.*)(\/)([gimy]{0,4})$/i);this.regExp=(parts===null)?new RegExp(this.regExp):new RegExp(parts[2],parts[4].toLowerCase());if(!('pattern'in $.validator.methods))
$.validator.addMethod('pattern',function(value,element,param)
{try{return this.optional(element)||param.test(value);}
catch(err){return true;}});$('#'+this.name).rules('add',{'pattern':this.regExp,messages:{'pattern':this.regExpMssg}});}catch(err){}}},val:function(raw,no_quotes)
{raw=raw||false;no_quotes=no_quotes||false;var e=$('[id="'+this.name+'"]:not(.ignore)'),v;if(e.length){v=$.fbuilder.parseValStr(e.val(),raw,no_quotes);return(raw&&!no_quotes&&!isNaN(v))?'"'+v+'"':v;}
return 0;}});$.fbuilder.controls['fcurrency']=function(){};$.extend($.fbuilder.controls['fcurrency'].prototype,$.fbuilder.controls['ffields'].prototype,{title:"Currency",ftype:"fcurrency",predefined:"",predefinedClick:false,required:false,readonly:false,numberpad:false,spinner:false,size:"small",currencySymbol:"$",currencyText:"USD",thousandSeparator:",",centSeparator:".",noCents:false,min:"",max:"",step:1,formatDynamically:false,twoDecimals:false,set_step:function(v,rmv)
{var e=$('[id="'+this.name+'"]');if(rmv)e.removeAttr('step');else{var vb=e.val();e.removeAttr('value');if(!isNaN(v*1))e.attr('step',Math.abs(v*1?v:1));e.val(vb);}
if(!e.hasClass('cpefb_error'))e.removeClass('required');e.valid();if(this.required)e.addClass('required');},set_min:function(v,rmv)
{var e=$('[id="'+this.name+'"]');if(rmv)e.removeAttr('min');else e.attr('min',v);if(!e.hasClass('cpefb_error'))e.removeClass('required');e.valid();if(this.required)e.addClass('required');},set_max:function(v,rmv)
{var e=$('[id="'+this.name+'"]');if(rmv)e.removeAttr('max');else e.attr('max',v);if(!e.hasClass('cpefb_error'))e.removeClass('required');e.valid();if(this.required)e.addClass('required');},getFormattedValue:function(value)
{if(value=='')return value;var me=this,ts=me.thousandSeparator,cs=((cs=$.trim(me.centSeparator))!=='')?cs:'.',v=$.fbuilder.parseVal(value,ts,cs),parts=[],counter=0,str='',sign='';if(!isNaN(v))
{if(v<0)sign='-';v=ABS(v);if(this.twoDecimals)v=v.toFixed(2);parts=v.toString().split(".");for(var i=parts[0].length-1;i>=0;i--)
{counter++;str=parts[0][i]+str;if(counter%3==0&&i!=0)str=ts+str;}
parts[0]=str;if(parts[1])
{if(parts[1].length==1)parts[1]+='0';}
else parts[1]='00';return me.currencySymbol+sign+((me.noCents)?parts[0]:parts.join(cs))+me.currencyText;}
else
{return value;}},init:function()
{if(!/^\s*$/.test(this.min))this._setHndl('min');if(!/^\s*$/.test(this.max))this._setHndl('max');if(!/^\s*$/.test(this.step))this._setHndl('step');else this.step=1;},show:function()
{this.predefined=this._getAttr('predefined');return'<div class="fields '+cff_esc_attr(this.csslayout)+' '+(this.spinner?'cff-spinner ':'')+this.name+' cff-currency-field" id="field'+this.form_identifier+'-'+this.index+'"><label for="'+this.name+'">'+this.title+''+((this.required)?"<span class='r'>*</span>":"")+'</label><div class="dfield">'+
(this.spinner?'<div class="cff-spinner-components-container '+this.size+'"><button type="button" class="cff-spinner-down">-</button>':'')+'<input '+((this.numberpad)?'inputmode="decimal"':'')+' aria-label="'+cff_esc_attr(this.title)+'" '+((this.readonly)?'readonly':'')+' id="'+this.name+'" name="'+this.name+'" class="field cffcurrency '+(this.spinner?'large':this.size)+((this.required)?" required":"")+'" type="text" value="'+cff_esc_attr((this.formatDynamically)?this.getFormattedValue(this.predefined):this.predefined)+'" '+((!/^\s*$/.test(this.min))?'min="'+cff_esc_attr($.fbuilder.parseVal(this._getAttr('min'),this.thousandSeparator,this.centSeparator))+'" ':'')+((!/^\s*$/.test(this.max))?' max="'+cff_esc_attr($.fbuilder.parseVal(this._getAttr('max'),this.thousandSeparator,this.centSeparator))+'" ':'')+((!/^\s*$/.test(this.step))?' step="'+cff_esc_attr(this._getAttr('step',true))+'" ':'')+' />'+
(this.spinner?'<button type="button" class="cff-spinner-up">+</button></div>':'')+'<span class="uh">'+this.userhelp+'</span></div><div class="clearer"></div></div>';},after_show:function()
{var me=this;if(this.formatDynamically)
{$(document).on('change','[name="'+me.name+'"]',function(){this.value=me.getFormattedValue(this.value);});}
$('#'+me.name).rules('add',{'step':false});},val:function(raw,no_quotes)
{raw=raw||false;no_quotes=no_quotes||false;var e=$('[id="'+this.name+'"]:not(.ignore)');if(e.length)
{var v=e.val();if(raw)return($.isNumeric(v))?v:$.fbuilder.parseValStr(v,raw,no_quotes);v=$.trim(v);v=v.replace(new RegExp($.fbuilder['escapeSymbol'](this.currencySymbol),'g'),'').replace(new RegExp($.fbuilder['escapeSymbol'](this.currencyText),'g'),'');return $.fbuilder.parseVal(v,this.thousandSeparator,this.centSeparator,no_quotes);}
return 0;}});$.fbuilder.controls['fnumber']=function(){};$.extend($.fbuilder.controls['fnumber'].prototype,$.fbuilder.controls['ffields'].prototype,{title:"Number",ftype:"fnumber",predefined:"",predefinedClick:false,required:false,readonly:false,numberpad:false,spinner:false,size:"small",prefix:"",postfix:"",thousandSeparator:"",decimalSymbol:".",min:"",max:"",step:1,formatDynamically:false,dformat:"digits",set_step:function(v,rmv)
{var e=$('[id="'+this.name+'"]');if(rmv)e.removeAttr('step');else{var vb=e.val();e.removeAttr('value');if(!isNaN(v*1))e.attr('step',Math.abs(v*1?v:1));e.val(vb);}
if(!e.hasClass('cpefb_error'))e.removeClass('required');e.valid();if(this.required)e.addClass('required');},set_min:function(v,rmv)
{var e=$('[id="'+this.name+'"]');if(rmv)e.removeAttr('min');else e.attr('min',v);if(!e.hasClass('cpefb_error'))e.removeClass('required');e.valid();if(this.required)e.addClass('required');},set_max:function(v,rmv)
{var e=$('[id="'+this.name+'"]');if(rmv)e.removeAttr('max');else e.attr('max',v);if(!e.hasClass('cpefb_error'))e.removeClass('required');e.valid();if(this.required)e.addClass('required');},getFormattedValue:function(value)
{if(value=='')return value;var ts=this.thousandSeparator,ds=((ds=$.trim(this.decimalSymbol))!=='')?ds:'.',v=$.fbuilder.parseVal(value,ts,ds),s='',counter=0,str='',parts=[],step=$('[id="'+this.name+'"]').attr('step'),prefix=this.dformat=='number'?this.prefix:'',postfix=this.dformat=='number'?this.postfix:'';if(!isNaN(v))
{if(v<0)s='-';v=ABS(v);parts=v.toString().split(".");for(var i=parts[0].length-1;i>=0;i--){counter++;str=parts[0][i]+str;if(counter%3==0&&i!=0)str=ts+str;}
parts[0]=str;if(typeof parts[1]!='undefined'&&parts[1]*1&&typeof step!='undefined'&&!isNaN(step*1)){var l=(new String(step)).split('.');if(l.length==2){l=Math.max(l.length-(new String(parts[1])).length,0);for(var i=0;i<l;i++)parts[1]+='0';}}
return prefix+s+parts.join(ds)+((this.dformat=='percent')?'%':'')+postfix;}
else
{return value;}},init:function()
{if(!/^\s*$/.test(this.min))this._setHndl('min');if(!/^\s*$/.test(this.max))this._setHndl('max');if(!/^\s*$/.test(this.step))this._setHndl('step');else this.step=1;},show:function()
{var _type=(this.dformat=='digits'||(this.dformat!='percent'&&this.prefix==''&&this.postfix==''&&this.thousandSeparator==''&&/^\s*(\.\s*)?$/.test(this.decimalSymbol)))?'number':'text';if(this.dformat=='digits')$(document).on('keydown','#'+this.name,function(evt){if(/^[\-,\+,e,\.,\,]$/i.test(evt.key)){evt.preventDefault();return false;}});this.predefined=this._getAttr('predefined');return'<div class="fields '+cff_esc_attr(this.csslayout)+' '+(this.spinner?'cff-spinner ':'')+this.name+' cff-number-field" id="field'+this.form_identifier+'-'+this.index+'"><label for="'+this.name+'">'+this.title+''+((this.required)?"<span class='r'>*</span>":"")+'</label><div class="dfield">'+
(this.spinner?'<div class="cff-spinner-components-container '+this.size+'"><button type="button" class="cff-spinner-down">-</button>':'')+'<input '+((this.numberpad)?'inputmode="decimal"':'')+' aria-label="'+cff_esc_attr(this.title)+'" id="'+this.name+'" name="'+this.name+'" '+((!/^\s*$/.test(this.min))?'min="'+cff_esc_attr($.fbuilder.parseVal(this._getAttr('min'),this.thousandSeparator,this.decimalSymbol))+'" ':'')+((!/^\s*$/.test(this.max))?' max="'+cff_esc_attr($.fbuilder.parseVal(this._getAttr('max'),this.thousandSeparator,this.decimalSymbol))+'" ':'')+((!/^\s*$/.test(this.step))?' step="'+cff_esc_attr(this._getAttr('step',true))+'" ':'')+' class="field '+this.dformat+((this.dformat=='percent')?' number':'')+' '+(this.spinner?'large':this.size)+((this.required)?" required":"")+'" type="'+_type+'" value="'+cff_esc_attr((this.formatDynamically)?this.getFormattedValue(this.predefined):this.predefined)+'" '+((this.readonly)?'readonly':'')+' />'+
(this.spinner?'<button type="button" class="cff-spinner-up">+</button></div>':'')+'<span class="uh">'+this.userhelp+'</span></div><div class="clearer"></div></div>';},after_show:function()
{var me=this;if((me.formatDynamically&&me.dformat!='digits')||me.dformat=='percent')
{$(document).on('change','[name="'+me.name+'"]',function(){this.value=me.getFormattedValue(this.value);});}
$('#'+me.name).rules('add',{'step':false});},val:function(raw,no_quotes)
{raw=raw||false;no_quotes=no_quotes||false;var e=$('[id="'+this.name+'"]:not(.ignore)');if(e.length)
{var v=$.trim(e.val());if(raw)return($.isNumeric(v)&&this.thousandSeparator!='.')?v:$.fbuilder.parseValStr(v,raw,no_quotes);v=v.replace(new RegExp($.fbuilder['escapeSymbol'](this.prefix),'g'),'').replace(new RegExp($.fbuilder['escapeSymbol'](this.postfix),'g'),'');v=$.fbuilder.parseVal(v,this.thousandSeparator,this.decimalSymbol,no_quotes);return(this.dformat=='percent')?v/100:v;}
return 0;}});$.fbuilder.controls['fslider']=function(){};$.extend($.fbuilder.controls['fslider'].prototype,$.fbuilder.controls['ffields'].prototype,{title:"Slider",ftype:"fslider",exclude:false,readonly:false,predefined:"",predefinedMin:"",predefinedMax:"",predefinedClick:false,size:"small",thousandSeparator:",",centSeparator:".",typeValues:false,min:0,max:100,step:1,marks:false,divisions:5,range:false,logarithmic:false,minCaption:"",maxCaption:"",caption:"{0}",_expon:function(v)
{if(v==0)return v;var el=$('#'+this.name+'_slider'),step=this.calc_step,min=Math.max(el.slider('option','min'),step),max=FLOOR(el.slider('option','max')/step)*step,minv=Math.log(Math.max(min,0.01)),maxv=Math.log(max),scale=(maxv-minv)/(max-min);return ROUND(Math.exp(minv+scale*(v-min)),step);},_inverse:function(v)
{var el=$('#'+this.name+'_slider'),step=this.calc_step,min=Math.max(el.slider('option','min'),step),max=FLOOR(el.slider('option','max')/step)*step,minv=Math.log(Math.max(min,0.1)),maxv=Math.log(max),scale=(maxv-minv)/(max-min);return ROUND(((Math.log(v)-minv)/scale+min),step);},_setThousandsSeparator:function(v)
{let l=(new String(this.step)).split('.');l=l.length==2?l[1].length:0;v=$.fbuilder.parseVal(v,this.thousandSeparator,this.centSeparator);if(!isNaN(v))
{v=PREC(v,l);var parts=v.toString().split("."),counter=0,str='';for(var i=parts[0].length-1;i>=0;i--)
{counter++;str=parts[0][i]+str;if(counter%3==0&&i!=0)str=this.thousandSeparator+str;}
parts[0]=str;return parts.join(this.centSeparator);}
else
{return v;}},_setFieldValue:function(val,nochange)
{var me=this;if(me.range)
{var values=(typeof val!='undefined'&&val!==null)?val:$('#'+me.name+'_slider').slider('values'),vl=values[0],vr=values[1],vlf=me._setThousandsSeparator(vl),vrf=me._setThousandsSeparator(vr);$('.'+me.name).find('.cff-slider-tooltip-value').first().html(vlf);$('.'+me.name).find('.cff-slider-tooltip-value').last().html(vrf);$('#'+me.name+'_component_left').val(vlf);$('#'+me.name+'_component_right').val(vrf);$('#'+me.name).val('['+vl+','+vr+']').attr('vt','['+vlf+','+vrf+']');$('#'+me.name+'_caption').html(me.caption.replace(/\{\s*0\s*\}/,vlf).replace(/\{\s*0\s*\}/,vrf));}
else
{var v=(typeof val!='undefined'&&val!==null)?val:$('#'+me.name+'_slider').slider('value'),vf=me._setThousandsSeparator(v);$('.'+me.name).find('.cff-slider-tooltip-value').first().html(vf);$('#'+me.name).val(v).attr('vt',vf);$('#'+me.name+'_component_center').val(vf);$('#'+me.name+'_caption').html(me.caption.replace(/\{\s*0\s*\}/g,vf));}
if(!nochange)$('#'+me.name).change();},_toNumber:function(n){return(new String(n)).replace(/[^\-\d\.]/g,'')*1;},init:function()
{this.min=(/^\s*$/.test(this.min))?0:$.trim(this.min);this.max=(/^\s*$/.test(this.max))?100:$.trim(this.max);this.step=(/^\s*$/.test(this.step))?1:$.trim(this.step);this.predefinedMin=(/^\s*$/.test(this.predefinedMin))?this.min:$.trim(this.predefinedMin);this.predefinedMax=(/^\s*$/.test(this.predefinedMax))?this.max:$.trim(this.predefinedMax);this._setHndl('min');this._setHndl('max');this._setHndl('step');this._setHndl('predefinedMin');this._setHndl('predefinedMax');this.centSeparator=(/^\s*$/.test(this.centSeparator))?'.':$.trim(this.centSeparator);if(this.logarithmic&&!isNaN(this.step)){this.calc_step=this.step;this.step=Math.min(this.step,1);}},show:function()
{var me=this;function typeValuesComponents()
{function component(c)
{var min=cff_esc_attr(me.min),max=cff_esc_attr(me.max),step=cff_esc_attr(me.step),predefined=cff_esc_attr((c=='left')?me.predefinedMin:((c=='right')?me.predefinedMax:me.predefined)),timeoutId;$(document).on('keyup change','#'+me.name+'_component_'+c,function(evt){function stepRound(v)
{var _e=$('#'+me.name+'_slider'),_max=_e.slider('option','max'),_step=_e.slider('option','step');return MIN(CEIL(v,_step),_max);};var v=$('#'+me.name+'_component_center').val(),v1=$('#'+me.name+'_component_left').val(),v2=$('#'+me.name+'_component_right').val(),t=0;clearTimeout(timeoutId);if(evt.type=='keyup')t=2500;timeoutId=setTimeout(function(){if(v!=undefined)
{v=$.fbuilder.parseVal(v,me.thousandSeparator,me.centSeparator);if(isNaN(v))v=0;}
if(v1!=undefined)
{v1=$.fbuilder.parseVal(v1,me.thousandSeparator,me.centSeparator);if(isNaN(v1))v1=0;}
if(v2!=undefined)
{v2=$.fbuilder.parseVal(v2,me.thousandSeparator,me.centSeparator);if(isNaN(v2))v2=0;}
$('#'+me.name+'_slider').slider(((v!=undefined)?'value':'values'),((v!=undefined)?(me.logarithmic?me._inverse(v*1):stepRound(v*1)):[stepRound(Math.min(v1*1,v2*1)),stepRound(Math.max(v1*1,v2*1))]));me._setFieldValue(me.logarithmic?v:null);},t);});return'<div class="slider-type-'+c+'-component"><input aria-label="'+cff_esc_attr(me.title)+'" id="'+me.name+'_component_'+c+'" class="large" type="text" value="'+cff_esc_attr(/fieldname/.test(predefined)&&getField(predefined)&&'val'in getField(predefined)?getField(predefined).val():predefined)+'" '+((me.readonly)?'readonly':'')+' /></div>';};var str='';if(me.typeValues)
str+='<div class="slider-type-components '+me.size+'">'+
((me.range)?component('left')+component('right'):component('center'))+'</div>';return str;};me.predefined=(/^\s*$/.test(me.predefined))?me.min:me._toNumber(me._getAttr('predefined'));return'<div class="fields '+cff_esc_attr(me.csslayout)+' '+me.name+' cff-slider-field" id="field'+me.form_identifier+'-'+me.index+'">'+'<label>'+me.title+'</label>'+'<div class="dfield slider-container">'+
typeValuesComponents()+'<input id="'+me.name+'" name="'+me.name+'" class="field" type="hidden" value="'+cff_esc_attr(me.predefined)+'"/>'+'<div id="'+me.name+'_slider" class="slider '+me.size+'"></div>'+'<div class="corner-captions '+me.size+'">'+'<span class="left-corner">'+me.minCaption+'</span>'+'<span class="right-corner">'+me.maxCaption+'</span>'+'<div id="'+me.name+'_caption" class="slider-caption"></div>'+'<div class="clearer"></div>'+'</div>'+'<span class="uh">'+me.userhelp+'</span>'+'</div>'+'<div class="clearer"></div>'+'</div>';},set_min:function(v,ignore)
{try{var e=$('[id="'+this.name+'_slider"]'),c=this.val(),r=false;if(ignore)v=0;e.slider('option','min',v);if($.isArray(c)){if(c[0]<v){c[0]=v;r=true;}}
else if(c<v){c=v;r=true;}
if(r)this.setVal(c);this.set_min_caption(v);}
catch(err){}},set_max:function(v,ignore)
{try{var e=$('[id="'+this.name+'_slider"]'),c=this.val(),r=false;if(ignore)v=100;e.slider('option','max',v);if($.isArray(c)){if(v<c[1]){c[1]=v;r=true;}}
else if(v<c){c=v;r=true;}
if(r)this.setVal(c);this.set_max_caption(v);}
catch(err){}},set_min_caption:function(v)
{try{var e=$('.'+this.name+' .left-corner');e.html(this.minCaption.replace(/\{\s*0\s*\}/,v));}
catch(err){}},set_max_caption:function(v)
{try{var e=$('.'+this.name+' .right-corner');e.html(this.maxCaption.replace(/\{\s*0\s*\}/,v));}
catch(err){}},set_step:function(v,ignore)
{try{if(ignore)v=1;if(this.logarithmic){this.calc_step=v;v=Math.min(v,1);}
$('[id="'+this.name+'_slider"]').slider("option","step",v);}
catch(err){}},set_marks:function(s,v){try{var me=this,e=$('.'+me.name+' .ui-slider-range');e.find('.mark').remove();if(s){for(let i=0;i<=v;i++){if(i&&i!=v){e.after('<span class="mark" style="position:absolute;left:calc('+PREC(i*(100/v),4,true)+'% );"></span>');}}}}catch(err){}},after_show:function()
{var me=this,opt={range:(me.range!=false)?me.range:"min",min:me._getAttr('min'),max:me._getAttr('max'),step:me._getAttr('step')};me.set_min_caption(opt.min);me.set_max_caption(opt.max);if(me.range)
{var _min=Math.min(Math.max(me._getAttr('predefinedMin'),opt.min),opt.max),_max=Math.min(Math.max(me._getAttr('predefinedMax'),opt.min),opt.max);opt['values']=[_min,_max];}
else opt['value']=Math.min(Math.max(me._getAttr('predefined'),opt.min),opt.max);opt['disabled']=me.readonly;opt['slide']=opt['stop']=(function(e){return function(event,ui)
{var v=(typeof ui.value!='undefined')?ui.value:ui.values;if(me.logarithmic){v=me._expon(v);e._setFieldValue(v);}else{$(this).slider(Array.isArray(v)?'values':'value',v);e._setFieldValue();}}})(me);$('#'+this.name+'_slider').slider(opt);$('#'+this.name+'_slider').find('.ui-slider-handle').each(function(){$(this).append('<div class="cff-slider-tooltip">'+'<div class="cff-slider-tooltip-arrow">'+'</div><div class="cff-slider-tooltip-value"></div>'+'</div>');});me._setFieldValue();$('#cp_calculatedfieldsf_pform'+me.form_identifier).bind('reset',function(){setTimeout(function(){$('#'+me.name+'_slider').slider(opt);me._setFieldValue();},20);});try{var divisions=parseInt(me.divisions);me.set_marks(me.marks,(isNaN(divisions)||!divisions)?(me.max-me.min)/me.step:divisions);}catch(err){}},val:function(raw)
{try{raw=raw||false;var e=$('[id="'+this.name+'"]:not(.ignore)');return(e.length)?((raw)?e.val():JSON.parse(e.val())):0;}
catch(err){return 0;}},setVal:function(v,nochange)
{try{v=JSON.parse(v);}catch(err){}
try{$('[name="'+this.name+'"]').val(v);$('#'+this.name+'_slider').slider((($.isArray(v))?'values':'value'),(this.logarithmic?this._inverse(v):v));this._setFieldValue(v,nochange);}catch(err){}}});$.fbuilder.controls['fcolor']=function(){};$.extend($.fbuilder.controls['fcolor'].prototype,$.fbuilder.controls['ffields'].prototype,{title:"Untitled",ftype:"fcolor",predefined:"",predefinedClick:false,required:false,readonly:false,size:"medium",show:function()
{this.predefined=this._getAttr('predefined');return'<div class="fields '+cff_esc_attr(this.csslayout)+' '+this.name+' cff-color-field" id="field'+this.form_identifier+'-'+this.index+'"><label for="'+this.name+'">'+this.title+''+((this.required)?"<span class='r'>*</span>":"")+'</label><div class="dfield"><input aria-label="'+cff_esc_attr(this.title)+'" id="'+this.name+'" name="'+this.name+'"'+' class="field '+this.size+((this.required)?" required":"")+'" '+((this.readonly)?'readonly':'')+' type="color" value="'+cff_esc_attr(this.predefined)+'" /><span class="uh">'+this.userhelp+'</span></div><div class="clearer"></div></div>';},after_show:function(){},val:function(raw,no_quotes)
{raw=raw||false;no_quotes=no_quotes||false;var e=$('[id="'+this.name+'"]:not(.ignore)');if(e.length)return $.fbuilder.parseValStr(e.val(),raw,no_quotes);return 0;}});$.fbuilder.controls['femail']=function(){};$.extend($.fbuilder.controls['femail'].prototype,$.fbuilder.controls['ffields'].prototype,{title:"Email",ftype:"femail",autocomplete:"off",predefined:"",predefinedClick:false,required:false,readonly:false,size:"medium",equalTo:"",regExp:"",regExpMssg:"",show:function()
{this.predefined=this._getAttr('predefined');return'<div class="fields '+cff_esc_attr(this.csslayout)+' '+this.name+' cff-email-field" id="field'+this.form_identifier+'-'+this.index+'"><label for="'+this.name+'">'+this.title+''+((this.required)?"<span class='r'>*</span>":"")+'</label><div class="dfield"><input aria-label="'+cff_esc_attr(this.title)+'" id="'+this.name+'" name="'+this.name+'" '+((this.equalTo!="")?"equalTo=\"#"+cff_esc_attr(this.equalTo+this.form_identifier)+"\"":"")+' class="field email '+this.size+((this.required)?" required":"")+'" type="email" value="'+cff_esc_attr(this.predefined)+'" '+((this.readonly)?'readonly':'')+' autocomplete="'+this.autocomplete+'" /><span class="uh">'+this.userhelp+'</span></div><div class="clearer"></div></div>';},after_show:function()
{if(this.regExp!=""&&typeof $['validator']!='undefined')
{try{var parts=this.regExp.match(/(\/)(.*)(\/)([gimy]{0,4})$/i);this.regExp=(parts===null)?new RegExp(this.regExp):new RegExp(parts[2],parts[4].toLowerCase());if(!('pattern'in $.validator.methods))
$.validator.addMethod('pattern',function(value,element,param)
{try{return this.optional(element)||param.test(value);}
catch(err){return true;}});$('#'+this.name).rules('add',{'pattern':this.regExp,messages:{'pattern':this.regExpMssg}});}catch(err){}}},val:function(raw,no_quotes)
{raw=raw||false;no_quotes=no_quotes||false;var e=$('[id="'+this.name+'"]:not(.ignore)');if(e.length)return $.fbuilder.parseValStr(e.val(),raw,no_quotes);return 0;}});$.fbuilder.controls['fdate']=function(){};$.extend($.fbuilder.controls['fdate'].prototype,$.fbuilder.controls['ffields'].prototype,{title:"Date",ftype:"fdate",predefined:"",predefinedClick:false,size:"medium",required:false,readonly:false,disableKeyboardOnMobile:false,showDatepicker:true,dformat:"mm/dd/yyyy",dseparator:"/",showDropdown:false,dropdownRange:"-10:+10",invalidDates:"",mondayFirstDay:false,working_dates:[true,true,true,true,true,true,true],minDate:"",maxDate:"",defaultDate:"",showTimepicker:false,tformat:"24",minHour:0,maxHour:23,minMinute:0,maxMinute:59,stepHour:1,stepMinute:1,defaultTime:"",ariaHourLabel:'hours',ariaMinuteLabel:'minutes',ariaAMPMLabel:'am or pm',errorMssg:'',_get_regexp:function()
{var me=this,df=me.dformat.replace(new RegExp('\\'+me.dseparator,'g'),'/'),rt;if(/^y/i.test(df))rt='(\\d{4})[^\\d](\\d{1,2})[^\\d](\\d{1,2})';else rt='(\\d{1,2})[\\/\\-\\.](\\d{1,2})[\\/\\-\\.](\\d{4})';return{d:df,r:rt};},_set_Events:function()
{var me=this,f=function(){me.set_dateTime();$('#'+me.name+'_date').valid();};$(document).off('change','#'+me.name+'_date').on('change','#'+me.name+'_date',function(){f();});$(document).off('change','#'+me.name+'_hours').on('change','#'+me.name+'_hours',function(){f();});$(document).off('change','#'+me.name+'_minutes').on('change','#'+me.name+'_minutes',function(){f();});$(document).off('change','#'+me.name+'_ampm').on('change','#'+me.name+'_ampm',function(){f();});$('#cp_calculatedfieldsf_pform'+me.form_identifier).bind('reset',function(){setTimeout(function(){me.set_DefaultDate(true);me.set_DefaultTime();me.set_dateTime();},500);});},_validateDate:function(d)
{try{var e=this,w=e.working_dates,i=e.invalidDates,n=$('#'+e.name+'_date');d=d||n.datepicker('getDate');if(d===null||!w[d.getDay()])return false;if(i!==null)
{for(var j=0,h=i.length;j<h;j++)
{if(d.getDate()==i[j].getDate()&&d.getMonth()==i[j].getMonth()&&d.getFullYear()==i[j].getFullYear())return false;}}
var _d=$.datepicker,_i=_d._getInst(n[0]),_mi=_d._determineDate(_i,_d._get(_i,'minDate'),null),_ma=_d._determineDate(_i,_d._get(_i,'maxDate'),null);if((_mi!=null&&d<_mi)||(_ma!=null&&_ma<d))return false;}
catch(_err){return false;}
return true;},_validateTime:function()
{var i=this;if(i.showTimepicker)
{var n=i.name,h=$('#'+n+'_hours').val(),m=$('#'+n+'_minutes').val();if(i.tformat==12)
{var x=$('#'+n+'_ampm').val()
if(x=='pm'&&h!=12)h=h*1+12;if(x=='am'&&h==12)h=0;}
if(h<i.minHour||i.maxHour<h||(h==i.minHour&&m<i.minMinute)||(h==i.maxHour&&i.maxMinute<m))return false;}
return true;},init:function()
{var me=this,_checkValue=function(v,min,max)
{v=parseInt(v);v=(isNaN(v))?max:v;return Math.min(Math.max(v,min),max);};me.dformat=me.dformat.replace(/\//g,me.dseparator);me.invalidDates=me.invalidDates.replace(/\s+/g,'');if(me.dropdownRange.indexOf(':')==-1)me.dropdownRange='-10:+10';if(!/^\s*$/.test(me.invalidDates))
{var dateRegExp=new RegExp(/^\d{1,2}\/\d{1,2}\/\d{4}$/),counter=0,dates=me.invalidDates.split(',');me.invalidDates=[];for(var i=0,h=dates.length;i<h;i++)
{var range=dates[i].split('-');if(range.length==2&&range[0].match(dateRegExp)!=null&&range[1].match(dateRegExp)!=null)
{var fromD=new Date(range[0]),toD=new Date(range[1]);while(fromD<=toD)
{me.invalidDates[counter]=fromD;var tmp=new Date(fromD.valueOf());tmp.setDate(tmp.getDate()+1);fromD=tmp;counter++;}}
else
{for(var j=0,k=range.length;j<k;j++)
{if(range[j].match(dateRegExp)!=null)
{me.invalidDates[counter]=new Date(range[j]);counter++;}}}}}
me.minHour=_checkValue(me.minHour,0,23);me.maxHour=_checkValue(me.maxHour,0,23);me.minMinute=_checkValue(me.minMinute,0,59);me.maxMinute=_checkValue(me.maxMinute,0,59);me.stepHour=_checkValue(me.stepHour,1,Math.max(1,(me.maxHour-me.minHour)+1));me.stepMinute=_checkValue(me.stepMinute,1,Math.max(1,(me.maxMinute-me.minMinute)+1));me._setHndl('minDate');me._setHndl('maxDate');},get_hours:function()
{var me=this,str='',i=0,h,from=(me.tformat==12)?1:me.minHour,to=(me.tformat==12)?12:me.maxHour;while((h=from+me.stepHour*i)<=to)
{if(h<10)h='0'+''+h;str+='<option value="'+h+'">'+h+'</option>';i++;}
return'<select id="'+me.name+'_hours" name="'+me.name+'_hours" class="hours-component" aria-label="'+cff_esc_attr(me.ariaHourLabel)+'" '+((me.readonly)?'DISABLED':'')+'>'+str+'</select>:';},get_minutes:function()
{var me=this,str='',i=0,m,n=(me.minHour==me.maxHour)?me.minMinute:0,x=(me.minHour==me.maxHour)?me.maxMinute:59;while((m=n+me.stepMinute*i)<=x)
{if(m<10)m='0'+''+m;str+='<option value="'+m+'">'+m+'</option>';i++;}
return'<select id="'+me.name+'_minutes" name="'+me.name+'_minutes" class="minutes-component" aria-label="'+cff_esc_attr(me.ariaMinuteLabel)+'" '+((me.readonly)?'DISABLED':'')+'>'+str+'</select>';},get_ampm:function()
{var str='';if(this.tformat==12)
{return'<select id="'+this.name+'_ampm" class="ampm-component"  aria-label="'+cff_esc_attr(this.ariaAMPMLabel)+'" '+((this.readonly)?'DISABLED':'')+'><option value="am">am</option><option value="pm">pm</option></select>';}
return str;},set_dateTime:function(nochange)
{var me=this,str=$('#'+me.name+'_date').val(),e=$('#'+me.name);if(me.showTimepicker)
{str+=' '+$('#'+me.name+'_hours').val();str+=':'+$('#'+me.name+'_minutes').val();if($('#'+me.name+'_ampm').length)str+=$('#'+me.name+'_ampm').val();}
e.val(str);if(!nochange)e.change();},set_minDate:function(v,ignore)
{var e=$('[id*="'+this.name+'"].hasDatepicker');if(e.length)
{e.datepicker('option','minDate',(ignore)?null:v);e.change();}},set_maxDate:function(v,ignore)
{var e=$('[id*="'+this.name+'"].hasDatepicker');if(e.length)
{e.datepicker('option','maxDate',(ignore)?null:v);e.change();}},set_DefaultDate:function(init)
{var me=this,p={dateFormat:me.dformat.replace(/yyyy/g,"yy"),minDate:me._getAttr('minDate'),maxDate:me._getAttr('maxDate'),firstDay:(me.mondayFirstDay?1:0),disabled:me.readonly},dp=$("#"+me.name+"_date"),dd=(me.defaultDate!="")?me.defaultDate:((me.predefined!="")?me.predefined:new Date());dp.click(function(){$(document).click();$(this).focus();});if(me.showDropdown)p=$.extend(p,{changeMonth:true,changeYear:true,yearRange:me.dropdownRange});p=$.extend(p,{beforeShowDay:function(d){return[me._validateDate(d),""];}});if(me.defaultDate!="")p.defaultDate=me.defaultDate;dp.datepicker(p);if(!me.predefinedClick||!!init==false)dp.datepicker("setDate",dd);if(!me._validateDate())dp.datepicker("setDate",'');},set_DefaultTime:function()
{var me=this,_setValue=function(f,v,m)
{v=Math.min(v*1,m*1);v=(v<10)?0+''+v:v;$('#'+f+' [value="'+v+'"]').prop('selected',true);};if(me.showTimepicker)
{var parts,time={},tmp=0,max_minutes=59;if((parts=/(\d{1,2}):(\d{1,2})\s*([ap]m)?/gi.exec(me.defaultTime))!=null)
{time['hour']=parts[1]*1+((parts.length==4&&/pm/i.test(parts[3])&&parts[1]!=12)?12:0);time['minute']=parts[2];}
else
{var d=new Date();time['hour']=d.getHours();time['minute']=d.getMinutes();}
time['hour']=Math.min(Math.max(time['hour'],me.minHour),me.maxHour);if(time['hour']<=me.minHour)time['minute']=Math.max(time['minute'],me.minMinute);if(me.maxHour<=time['hour'])time['minute']=Math.min(time['minute'],me.maxMinute);_setValue(me.name+'_hours',(me.tformat==12)?((time['hour']>12)?time['hour']-12:((time['hour']==0)?12:time['hour'])):time['hour'],(me.tformat==12)?12:me.maxHour);_setValue(me.name+'_minutes',time['minute'],(time['hour']==me.maxHour)?me.maxMinute:59);$('#'+me.name+'_ampm'+' [value="'+((time['hour']<12)?'am':'pm')+'"]').prop('selected',true);}},show:function()
{var me=this,n=me.name,attr='value',format_label=[],date_tag_type='text',disabled='',date_tag_class='field date'+me.dformat.replace(/[^a-z]/ig,"")+' '+me.size+((me.required&&me.showDatepicker)?' required':'');if(me.predefinedClick)attr='placeholder';if(me.showDatepicker)format_label.push(me.dformat);else{date_tag_type='hidden';disabled='disabled';}
if(me.showTimepicker)format_label.push('HH:mm');this.predefined=this._getAttr('predefined');return'<div class="fields '+cff_esc_attr(me.csslayout)+' '+n+' cff-date-field" id="field'+me.form_identifier+'-'+me.index+'"><label '+(me.showDatepicker?'for="'+n+'_date"':'')+'>'+me.title+''+((me.required)?"<span class='r'>*</span>":"")+((format_label.length)?' <span class="dformat">('+format_label.join(' ')+')</span>':'')+'</label><div class="dfield"><input id="'+n+'" name="'+n+'" type="hidden" value="'+cff_esc_attr(me.predefined)+'"/><input aria-label="'+cff_esc_attr(me.title)+'" id="'+n+'_date" name="'+n+'_date" class="'+date_tag_class+' date-component" type="'+date_tag_type+'" '+attr+'="'+cff_esc_attr(me.predefined)+'" '+disabled+(me.disableKeyboardOnMobile?' inputmode="none"':'')+(me.errorMssg!=''?' data-msg="'+cff_esc_attr(me.errorMssg)+'"':'')+' />'+((me.showTimepicker)?' '+me.get_hours()+me.get_minutes()+' '+me.get_ampm():'')+'<span class="uh">'+me.userhelp+'</span></div><div class="clearer"></div></div>';},after_show:function()
{var me=this,date_format='date'+me.dformat.replace(/[^a-z]/ig,""),validator=function(v,e)
{try
{var p=e.name.replace('_date','').split('_'),i=$.fbuilder.forms['_'+p[1]].getItem(p[0]),o=me._get_regexp(),d=$(e).datepicker('getDate');if(i!=null)return this.optional(e)||(i._validateDate()&&(new RegExp(o.r)).test(v)&&i._validateTime()&&DATEOBJ(v,me.dformat).getTime()==d.getTime());return true;}
catch(er)
{return false;}};if(!(date_format in $.validator.methods))$.validator.addMethod(date_format,validator);me.set_DefaultDate(true);me.set_DefaultTime();me._set_Events();me.set_dateTime();},val:function(raw,no_quotes)
{raw=raw||false;no_quotes=no_quotes||false;var me=this,e=$('[id="'+me.name+'"]:not(.ignore)'),o=me._get_regexp();if(e.length)
{var v=e.val();if(raw)return $.fbuilder.parseValStr(v,raw,no_quotes);v=$.trim(e.val());var re=new RegExp('('+o.r+')?(\\s*(\\d{1,2})[:\\.](\\d{1,2})\\s*([amp]{2})?)?'),d=re.exec(v),h=0,m=0,date;if(d)
{if(typeof d[6]!='undefined')h=d[6]*1;if(typeof d[7]!='undefined')m=d[7]*1;if(typeof d[8]!='undefined')
{var am=d[8].toLowerCase();if(am=='pm'&&h<12)h+=12;if(am=='am'&&h==12)h-=12;}
switch(o.d)
{case'yyyy/dd/mm':date=new Date(d[2],(d[4]*1-1),d[3],h,m,0,0);break;case'yyyy/mm/dd':date=new Date(d[2],(d[3]*1-1),d[4],h,m,0,0);break;case'dd/mm/yyyy':date=new Date(d[4],(d[3]*1-1),d[2],h,m,0,0);break;case'mm/dd/yyyy':date=new Date(d[4],(d[2]*1-1),d[3],h,m,0,0);break;}
if(isFinite(date))
{if(me.showTimepicker)return date.valueOf()/86400000;else return Math.ceil(date.valueOf()/86400000);}
else if(!me.showDatepicker&&me.showTimepicker)
return(h*3600000+m*60000)/86400000;}}
return 0;},setVal:function(v,nochange,init)
{init=init||false;try
{v=$.trim(v).replace(/\s+/g,' ').split(' ');if(this.showDatepicker)
{this.defaultDate=v[0];this.set_DefaultDate(init&&!this.defaultDate.length);}
if(this.showTimepicker)
{var t=(v.length==2)?v[1]:((!this.showDatepicker)?v[0]:false);if(t!==false)
{this.defaultTime=t;this.set_DefaultTime();}}
this.set_dateTime(nochange);}
catch(err){}}});$.fbuilder.controls['ftextarea']=function(){};$.extend($.fbuilder.controls['ftextarea'].prototype,$.fbuilder.controls['ffields'].prototype,{title:"Untitled",ftype:"ftextarea",autocomplete:"off",predefined:"",predefinedClick:false,required:false,readonly:false,size:"medium",minlength:"",maxlength:"",rows:4,show:function()
{this.minlength=cff_esc_attr($.trim(this.minlength));this.maxlength=cff_esc_attr($.trim(this.maxlength));this.predefined=this._getAttr('predefined');return'<div class="fields '+cff_esc_attr(this.csslayout)+' '+this.name+' cff-textarea-field" id="field'+this.form_identifier+'-'+this.index+'"><label for="'+this.name+'">'+this.title+''+((this.required)?"<span class='r'>*</span>":"")+'</label><div class="dfield"><textarea aria-label="'+cff_esc_attr(this.title)+'" '+((!/^\s*$/.test(this.rows))?'rows='+this.rows:'')+' id="'+this.name+'" name="'+this.name+'"'+((this.minlength.length)?' minlength="'+cff_esc_attr(this.minlength)+'"':'')+((this.maxlength.length)?' maxlength="'+cff_esc_attr(this.maxlength)+'"':'')+' class="field '+this.size+((this.required)?" required":"")+'" '+((this.readonly)?'readonly':'')+' autocomplete="'+this.autocomplete+'">'+((!this.predefinedClick)?this.predefined:'')+'</textarea><span class="uh">'+this.userhelp+'</span></div><div class="clearer"></div></div>';},val:function(raw,no_quotes)
{raw=raw||false;no_quotes=no_quotes||false;var e=$('[id="'+this.name+'"]:not(.ignore)');if(e.length)
{var v=$.fbuilder.parseValStr(e.val(),raw,no_quotes);if(!raw)v=v.replace(/[\n\r]+/g,' ');else if(!no_quotes)v=v.replace(/^"/,"`").replace(/"$/,"`");return v;}
return 0;}});$.fbuilder.controls['fcheck']=function(){};$.extend($.fbuilder.controls['fcheck'].prototype,$.fbuilder.controls['ffields'].prototype,{title:"Check All That Apply",ftype:"fcheck",layout:"one_column",required:false,readonly:false,merge:1,onoff:0,max:-1,maxError:"Check no more than {0} boxes",toSubmit:"text",showDep:false,show:function()
{this.choicesVal=((typeof(this.choicesVal)!="undefined"&&this.choicesVal!==null)?this.choicesVal:this.choices);var str="",classDep,n=this.name.match(/fieldname\d+/)[0];if(typeof this.choicesDep=="undefined"||this.choicesDep==null)
this.choicesDep=new Array();for(var i=0,h=this.choices.length;i<h;i++)
{if(typeof this.choicesDep[i]!='undefined')
this.choicesDep[i]=$.grep(this.choicesDep[i],function(x){return x!=""&&x!=n;});else
this.choicesDep[i]=[];classDep=(this.choicesDep[i].length)?'depItem':'';str+='<div class="'+this.layout+'"><label for="'+this.name+'_cb'+i+'" '+(!this.tooltipIcon&&this.userhelpTooltip&&this.userhelp&&this.userhelp.length?'uh="'+cff_esc_attr(this.userhelp)+'"':'')+'><input aria-label="'+cff_esc_attr(this.choices[i])+'" name="'+this.name+'[]" id="'+this.name+'_cb'+i+'" class="field '+classDep+' group '+((this.required)?" required":"")+'" value="'+cff_esc_attr(this.choicesVal[i])+'" vt="'+cff_esc_attr((this.toSubmit=='text')?this.choices[i]:this.choicesVal[i])+'" type="checkbox" '+(this.readonly?' onclick="return false;" ':'')+((this.choiceSelected[i])?"checked":"")+'/> '+
(this.onoff?'<span class="cff-switch"></span>':'')+'<span>'+
cff_html_decode(this.choices[i])+'</span></label></div>';}
return'<div class="fields '+cff_esc_attr(this.csslayout)+(this.onoff?' cff-switch-container':'')+' '+this.name+' cff-checkbox-field" id="field'+this.form_identifier+'-'+this.index+'"><label>'+this.title+''+((this.required)?"<span class='r'>*</span>":"")+'</label><div class="dfield">'+str+'<div class="clearer"></div>'+(!this.userhelpTooltip?'<span class="uh">'+this.userhelp+'</span>':'')+'</div><div class="clearer"></div></div>';},enable_disable:function()
{var m=this;if(0<m.max)
{var d=true;if($('[id*="'+m.name+'"]:checked').length<m.max)d=false;$('[id*="'+m.name+'"]:not(:checked)').prop('disabled',d);}},after_show:function()
{var m=this;$(document).off('click','[id*="'+m.name+'"]').on('click','[id*="'+m.name+'"]',function(){m.enable_disable();});m.enable_disable();if(0<m.max)
$('[id*="'+m.name+'"]').rules('add',{maxlength:m.max,messages:{maxlength:m.maxError}});},showHideDep:function(toShow,toHide,hiddenByContainer,interval)
{if(typeof hiddenByContainer=='undefined')hiddenByContainer={};var me=this,item=$('input[id*="'+me.name+'"]'),form_identifier=me.form_identifier,isHidden=(typeof toHide[me.name]!='undefined'||typeof hiddenByContainer[me.name]!='undefined'),result=[];try
{item.each(function(i,e){if(typeof me.choicesDep[i]!='undefined'&&me.choicesDep[i].length)
{var checked=e.checked;for(var j=0,k=me.choicesDep[i].length;j<k;j++)
{if(!/fieldname/i.test(me.choicesDep[i][j]))continue;var dep=me.choicesDep[i][j]+form_identifier;if(isHidden||!checked)
{if(typeof toShow[dep]!='undefined')
{delete toShow[dep]['ref'][me.name+'_'+i];if($.isEmptyObject(toShow[dep]['ref']))
delete toShow[dep];}
if(typeof toShow[dep]=='undefined')
{$('[id*="'+dep+'"],.'+dep).closest('.fields').hide();$('[id*="'+dep+'"]:not(.ignore)').addClass('ignore');toHide[dep]={};}}
else
{delete toHide[dep];if(typeof toShow[dep]=='undefined')
toShow[dep]={'ref':{}};toShow[dep]['ref'][me.name+'_'+i]=1;if(!(dep in hiddenByContainer))
{$('[id*="'+dep+'"],.'+dep).closest('.fields').fadeIn(interval||0);$('[id*="'+dep+'"].ignore').removeClass('ignore');}}
if($.inArray(dep,result)==-1)result.push(dep);}}});}
catch(e){}
return result;},val:function(raw,no_quotes)
{raw=raw||false;no_quotes=no_quotes||false;var v,me=this,m=me.merge&&!raw,e=$('[id*="'+me.name+'"]:checked:not(.ignore)');if(!m)v=[];if(e.length)
{e.each(function(){var t=(m)?$.fbuilder.parseVal(this.value):$.fbuilder.parseValStr((raw=='vt')?this.getAttribute('vt'):this.value,raw,no_quotes);if(!$.isNumeric(t))t=t.replace(/^"/,'').replace(/"$/,'');if(m)v=(v)?v+t:t;else v.push(t);});}
return(typeof v=='object'&&typeof v['length']!=='undefined')?v:((v)?(($.isNumeric(v))?v:'"'+v+'"'):0);},setVal:function(v,nochange,_default)
{_default=_default||false;nochange=nochange||false;var t,n=this.name,c=0,e;if(!$.isArray(v))v=[v];$('[id*="'+n+'"]').prop('checked',false);for(var i in v)
{t=(new String(v[i])).replace(/(['"])/g,"\\$1");if(0<this.max&&this.max<c+1)break;if(_default)e=$('[id*="'+n+'"][vt="'+t+'"]');if(!_default||!e.length)e=$('[id*="'+n+'"][value="'+t+'"]');if(e.length){e.prop('checked',true);c++;}}
this.enable_disable();if(!nochange)$('[id*="'+n+'"]').change();},setChoices:function(choices)
{if($.isPlainObject(choices))
{var me=this,bk=me.val(true);if('texts'in choices&&$.isArray(choices.texts))me.choices=choices.texts;if('values'in choices&&$.isArray(choices.values))me.choicesVal=choices.values;if('dependencies'in choices&&$.isArray(choices.dependencies))
{me.choicesDep=choices.dependencies.map(function(x){return($.isArray(x))?x.map(function(y){return(typeof y=='number')?'fieldname'+parseInt(y):y;}):x;});}
var html=me.show(),e=$('.'+me.name),i=e.find('.ignore').length,ipb=e.find('.ignorepb').length;e.find('.dfield').replaceWith($(html).find('.dfield'));if(i)e.find('input').addClass('ignore');if(ipb)e.find('input').addClass('ignorepb');if(!$.isArray(bk))bk=[bk];for(var j in bk)
{try{bk[j]=JSON.parse(bk[j]);}catch(err){}}
me.setVal(bk,bk.every(function(e){return me.choicesVal.indexOf(e)>-1;}));}},getIndex:function()
{var i=[];$('[name*="'+this.name+'"]').each(function(j,v){if(this.checked){i.push(j);}});return i;}});$.fbuilder.controls['fradio']=function(){};$.extend($.fbuilder.controls['fradio'].prototype,$.fbuilder.controls['ffields'].prototype,{title:"Select a Choice",ftype:"fradio",layout:"one_column",required:false,readonly:false,onoff:0,toSubmit:"text",choiceSelected:"",showDep:false,untickAccepted:true,initStatus:function()
{$('[id*="'+this.name+'_"]').each(function(){$(this).data('previous-status',this.checked);});},show:function()
{this.choicesVal=((typeof(this.choicesVal)!="undefined"&&this.choicesVal!==null)?this.choicesVal:this.choices);var l=this.choices.length,str="",classDep="",n=this.name.match(/fieldname\d+/)[0];if(typeof this.choicesDep=="undefined"||this.choicesDep==null)
this.choicesDep=new Array();for(var i=0;i<l;i++)
{if(typeof this.choicesDep[i]!='undefined')
this.choicesDep[i]=$.grep(this.choicesDep[i],function(x){return x!=""&&x!=n;});else
this.choicesDep[i]=[];if(this.choicesDep[i].length)
classDep='depItem';}
for(var i=0;i<l;i++)
{str+='<div class="'+this.layout+'"><label for="'+this.name+'_rb'+i+'" '+(!this.tooltipIcon&&this.userhelpTooltip&&this.userhelp&&this.userhelp.length?'uh="'+cff_esc_attr(this.userhelp)+'"':'')+'><input aria-label="'+cff_esc_attr(this.choices[i])+'" name="'+this.name+'" id="'+this.name+'_rb'+i+'" class="field '+classDep+' group '+((this.required)?" required":"")+'" value="'+cff_esc_attr(this.choicesVal[i])+'" vt="'+cff_esc_attr((this.toSubmit=='text')?this.choices[i]:this.choicesVal[i])+'" type="radio" '+(this.readonly?' onclick="return false;" ':'')+((this.choices[i]+' - '+this.choicesVal[i]==this.choiceSelected)?"checked":"")+'/> '+
(this.onoff?'<span class="cff-switch"></span>':'')+'<span>'+cff_html_decode(this.choices[i])+'</span></label></div>';}
return'<div class="fields '+cff_esc_attr(this.csslayout)+(this.onoff?' cff-switch-container':'')+' '+this.name+' cff-radiobutton-field" id="field'+this.form_identifier+'-'+this.index+'"><label>'+this.title+''+((this.required)?"<span class='r'>*</span>":"")+'</label><div class="dfield">'+str+'<div class="clearer"></div>'+(!this.userhelpTooltip?'<span class="uh">'+this.userhelp+'</span>':'')+'</div><div class="clearer"></div></div>';},after_show:function()
{var me=this,n=me.name;me.initStatus();if(me.untickAccepted)
{$(document).off('click','[id*="'+n+'_"]').on('click','[id*="'+n+'_"]',function(){var m=this,e=$(m);$('[id*="'+n+'_"]').each(function(){if(m!==this)$(this).data('previous-status',false);});if(e.data('previous-status')){m.checked=false;e.change();}
e.data('previous-status',m.checked);});}},showHideDep:function(toShow,toHide,hiddenByContainer,interval)
{if(typeof hiddenByContainer=='undefined')hiddenByContainer={};var me=this,item=$('input[id*="'+me.name+'"]'),form_identifier=me.form_identifier,isHidden=(typeof toHide[me.name]!='undefined'||typeof hiddenByContainer[me.name]!='undefined'),result=[];try
{item.each(function(i,e){if(typeof me.choicesDep[i]!='undefined'&&me.choicesDep[i].length)
{var checked=e.checked;for(var j=0,k=me.choicesDep[i].length;j<k;j++)
{if(!/fieldname/i.test(me.choicesDep[i][j]))continue;var dep=me.choicesDep[i][j]+form_identifier;if(isHidden||!checked)
{if(typeof toShow[dep]!='undefined')
{delete toShow[dep]['ref'][me.name+'_'+i];if($.isEmptyObject(toShow[dep]['ref']))
delete toShow[dep];}
if(typeof toShow[dep]=='undefined')
{$('[id*="'+dep+'"],.'+dep).closest('.fields').hide();$('[id*="'+dep+'"]:not(.ignore)').addClass('ignore');toHide[dep]={};}}
else
{delete toHide[dep];if(typeof toShow[dep]=='undefined')
toShow[dep]={'ref':{}};toShow[dep]['ref'][me.name+'_'+i]=1;if(!(dep in hiddenByContainer))
{$('[id*="'+dep+'"],.'+dep).closest('.fields').fadeIn(interval||0);$('[id*="'+dep+'"].ignore').removeClass('ignore');}}
if($.inArray(dep,result)==-1)result.push(dep);}}});}
catch(e){}
return result;},val:function(raw,no_quotes)
{raw=raw||false;no_quotes=no_quotes||false;var e=$('[id*="'+this.name+'"]:not(.ignore):checked');if(e.length)return $.fbuilder.parseValStr((raw=='vt')?e.attr('vt'):e.val(),raw,no_quotes);else if(raw=='vt')return $.fbuilder.parseValStr('',raw,no_quotes);return 0;},setVal:function(v,nochange,_default)
{_default=_default||false;nochange=nochange||false;var t=(new String(v)).replace(/(['"])/g,"\\$1"),n=this.name,e;$('[id*="'+n+'"]').prop('checked',false);if(_default)e=$('[id*="'+n+'"][vt="'+t+'"]');if(!_default||!e.length)e=$('[id*="'+n+'"][value="'+t+'"]');if(e.length)e.prop('checked',true);this.initStatus();if(!nochange)$('[id*="'+n+'"]').change();},setChoices:function(choices)
{if($.isPlainObject(choices))
{var bk=this.val(true);if('texts'in choices&&$.isArray(choices.texts))this.choices=choices.texts;if('values'in choices&&$.isArray(choices.values))this.choicesVal=choices.values;if('dependencies'in choices&&$.isArray(choices.dependencies))
{this.choicesDep=choices.dependencies.map(function(x){return($.isArray(x))?x.map(function(y){return(typeof y=='number')?'fieldname'+parseInt(y):y;}):x;});}
var html=this.show(),e=$('.'+this.name),i=e.find('.ignore').length,ipb=e.find('.ignorepb').length;e.find('.dfield').replaceWith($(html).find('.dfield'));if(i)e.find('input').addClass('ignore');if(ipb)e.find('input').addClass('ignorepb');try{bk=JSON.parse(bk);}catch(err){}
this.setVal(bk,this.choicesVal.indexOf(bk)>-1);}},getIndex:function()
{var i=-1;$('[name*="'+this.name+'"]').each(function(j,v){if(this.checked){i=j;return false;}});return i;}});$.fbuilder.controls['fdropdown']=function(){};$.extend($.fbuilder.controls['fdropdown'].prototype,$.fbuilder.controls['ffields'].prototype,{title:"Select a Choice",ftype:"fdropdown",size:"medium",required:false,toSubmit:"text",merge:0,choiceSelected:"",select2:false,multiple:false,vChoices:1,showDep:false,show:function()
{this.choicesVal=((typeof(this.choicesVal)!="undefined"&&this.choicesVal!==null)?this.choicesVal:this.choices)
var c=this.choices,cv=this.choicesVal,og=(typeof this.optgroup=='undefined')?new Array():this.optgroup,op_o=false,l=c.length,classDep='',str='',n=this.name.match(/fieldname\d+/)[0];if(typeof this.choicesDep=="undefined"||this.choicesDep==null)
this.choicesDep=new Array();for(var i=0;i<l;i++)
{if(typeof this.choicesDep[i]!='undefined'&&(typeof og[i]=='undefined'||!og[i]))
this.choicesDep[i]=$.grep(this.choicesDep[i],function(x){return x!=""&&x!=n;});else
this.choicesDep[i]=[];if(this.choicesDep[i].length&&(typeof og[i]=='undefined'||!og[i]))
classDep='depItem';}
for(var i=0;i<l;i++)
{if(og[i])
{if(op_o)str+='</optgroup>';str+='<optgroup label="'+cff_esc_attr(c[i])+'">';op_o=true;}
else
{str+='<option '+((this.choiceSelected==c[i]+' - '+cv[i])?"selected":"")+' '+((classDep!='')?'class="'+classDep+'"':'')+' value="'+cff_esc_attr(cv[i])+'" vt="'+cff_esc_attr((this.toSubmit=='text')?c[i]:cv[i])+'" data-i="'+i+'">'+cff_esc_attr(cff_sanitize(c[i]))+'</option>';}}
if(op_o)str+='</optgroup>';return'<div class="fields '+cff_esc_attr(this.csslayout)+' '+this.name+' cff-dropdown-field" id="field'+this.form_identifier+'-'+this.index+'"><label for="'+this.name+'">'+this.title+''+((this.required)?"<span class='r'>*</span>":"")+'</label>'+'<div class="dfield"><select aria-label="'+cff_esc_attr(this.title)+'" id="'+this.name+'" name="'+this.name+((this.multiple)?'[]':'')+'" class="field '+((classDep!='')?' depItemSel ':'')+this.size+((this.required)?' required':'')+'" '+((this.multiple==true)?' multiple="multiple" size="'+((this.vChoices)?this.vChoices:1)+'"':'')+'>'+str+'</select><span class="uh">'+this.userhelp+'</span></div><div class="clearer"></div><div class="clearer"></div></div>';},after_show:function()
{var me=this;if(me.select2)
{function formatState(state)
{return!state.id?state.text:$('<span style="display:inline-flex;align-items:center">'+state.text+'</span>');};$('#'+me.name).after('<span class="cff-select2-container"></span>');$('#'+me.name).on('change',function(){$(this).valid();});if('select2'in $.fn)
$('#'+me.name).select2({'templateResult':formatState,'templateSelection':formatState,'dropdownParent':$('#'+me.name).next('.cff-select2-container')});else
$(document).ready(function(){if('select2'in $.fn)$('#'+me.name).select2({'dropdownParent':$('#'+me.name).next('.cff-select2-container')});});}},showHideDep:function(toShow,toHide,hiddenByContainer,interval)
{if(typeof hiddenByContainer=='undefined')hiddenByContainer={};var me=this,item=$('#'+me.name+'.depItemSel'),form_identifier=me.form_identifier,isHidden=(typeof toHide[me.name]!='undefined'||typeof hiddenByContainer[me.name]!='undefined'),result=[];try
{if(item.length)
{var selected=[];$(item).find(':selected').each(function(){selected.push($(this).data('i'));});for(var i=0,h=me.choices.length;i<h;i++)
{if(typeof me.choicesDep[i]!='undefined'&&me.choicesDep[i].length)
{for(var j=0,k=me.choicesDep[i].length;j<k;j++)
{if(!/fieldname/i.test(me.choicesDep[i][j]))continue;var dep=me.choicesDep[i][j]+form_identifier;if(isHidden||$.inArray(i,selected)==-1)
{if(typeof toShow[dep]!='undefined')
{delete toShow[dep]['ref'][me.name+'_'+i];if($.isEmptyObject(toShow[dep]['ref']))
delete toShow[dep];}
if(typeof toShow[dep]=='undefined')
{$('[id*="'+dep+'"],.'+dep).closest('.fields').hide();$('[id*="'+dep+'"]:not(.ignore)').addClass('ignore');toHide[dep]={};}}
else
{delete toHide[dep];if(typeof toShow[dep]=='undefined')
toShow[dep]={'ref':{}};toShow[dep]['ref'][me.name+'_'+i]=1;if(!(dep in hiddenByContainer))
{$('[id*="'+dep+'"],.'+dep).closest('.fields').fadeIn(interval||0);$('[id*="'+dep+'"].ignore').removeClass('ignore');}}
if($.inArray(dep,result)==-1)result.push(dep);}}}}}
catch(e){}
return result;},val:function(raw,no_quotes)
{raw=raw||false;no_quotes=no_quotes||false;var e=$('[id="'+this.name+'"]:not(.ignore) option:selected'),v,m=this.multiple,g=this.merge&&!raw;if(m&&!g)v=[];if(e.length)
{e.each(function(){var t=$.fbuilder.parseValStr((raw=='vt')?this.getAttribute('vt'):this.value,raw,no_quotes);if(!$.isNumeric(t))t=t.replace(/^"/,'').replace(/"$/,'');if(!m||g)v=(v)?v+t:t;else v.push(t);});}
return(typeof v=='object'&&typeof v['length']!=='undefined')?v:(v?(($.isNumeric(v)||no_quotes)?v:'"'+v+'"'):(raw=='vt'?(no_quotes?'':'""'):0));},setVal:function(v,nochange,_default)
{_default=_default||false;nochange=nochange||false;if(!$.isArray(v))v=[v];var t,e,n=this.name,selector;for(var i in v)
{t=(new String(v[i])).replace(/(['"])/g,"\\$1");if(_default)e=$('[id="'+n+'"] OPTION[vt="'+t+'"]');if(!_default||!e.length)e=$('[id="'+n+'"] OPTION[value="'+t+'"]');if(e.length)e.prop('selected',true);}
if(!nochange)$('[id="'+n+'"]').change();},setChoices:function(choices)
{if($.isPlainObject(choices))
{var me=this,bk=me.val(true);if('texts'in choices&&$.isArray(choices.texts))me.choices=choices.texts;if('values'in choices&&$.isArray(choices.values))me.choicesVal=choices.values;if('dependencies'in choices&&$.isArray(choices.dependencies))
{me.choicesDep=choices.dependencies.map(function(x){return($.isArray(x))?x.map(function(y){return(typeof y=='number')?'fieldname'+parseInt(y):y;}):x;});}
if('optgroup'in choices&&$.isArray(choices.optgroup))me.optgroup=choices.optgroup;var html=me.show(),e=$('.'+me.name);e.find('select').html($(html).find('select').html());if(!$.isArray(bk))bk=[bk];for(var j in bk)
{try{bk[j]=JSON.parse(bk[j]);}catch(err){}}
me.setVal(bk,bk.every(function(e){return me.choicesVal.indexOf(e)>-1;}));}},getIndex:function()
{var f=$('[name*="'+this.name+'"]');if(this.multiple){var i=[];f.find('option').each(function(j,v){if(this.selected)i.push(j);});return i;}
else return f[0].selectedIndex;}});$.fbuilder.controls['ffile']=function(){};$.extend($.fbuilder.controls['ffile'].prototype,$.fbuilder.controls['ffields'].prototype,{title:"Untitled",ftype:"ffile",required:false,size:"medium",accept:"",upload_size:"",multiple:false,preview:false,thumb_width:'80px',thumb_height:'',_patch:false,init:function(){this.thumb_width=$.trim(this.thumb_width);this.thumb_height=$.trim(this.thumb_height);var form_identifier=this.form_identifier.replace(/[^\d]/g,'');this._patch=('cpcff_default'in window&&form_identifier in cpcff_default)?true:false;},show:function()
{this.accept=cff_esc_attr($.trim(this.accept));this.upload_size=cff_esc_attr($.trim(this.upload_size));return'<div class="fields '+cff_esc_attr(this.csslayout)+' '+this.name+' cff-file-field" id="field'+this.form_identifier+'-'+this.index+'"><label for="'+this.name+'">'+this.title+''+((this.required)?"<span class='r'>*</span>":"")+'</label><div class="dfield"><input aria-label="'+cff_esc_attr(this.title)+'" type="file" id="'+this.name+'" name="'+this.name+'[]"'+((this.accept.length)?' accept="'+this.accept+'"':'')+((this.upload_size.length)?' upload_size="'+this.upload_size+'"':'')+' class="field '+this.size+((this.required)?" required":"")+'" '+((this.multiple)?'multiple':'')+' /><div id="'+this.name+'_clearer" class="cff-file-clearer"></div>'+((this._patch)?'<input type="hidden" id="'+this.name+'_patch" name="'+this.name+'_patch" value="1" />':'')+'<span class="uh">'+this.userhelp+'</span></div><div class="clearer"></div></div>';},after_show:function()
{var me=this;if(!('accept'in $.validator.methods))
$.validator.addMethod("accept",function(value,element,param)
{if(this.optional(element))return true;else{param=typeof param==="string"?param.replace(/,/g,'|'):"png|jpe?g|gif";var regExpObj=new RegExp(".("+param+")$","i");for(var i=0,h=element.files.length;i<h;i++)
if(!element.files[i].name.match(regExpObj))return false;return true;}});if(!('upload_size'in $.validator.methods))
$.validator.addMethod("upload_size",function(value,element,params)
{if(this.optional(element))return true;else{var total=0;for(var i=0,h=element.files.length;i<h;i++)
total+=element.files[i].size/1024;return(total<=params);}});$('#'+me.name).change(function(){var h=this.files.length,n=0;$(this).siblings('span.files-list').remove();$('[id="'+me.name+'_patch"]').remove();if(1<=h)
{var filesContainer=$('<span class="files-list"></span>');for(var i=0;i<h;i++)
{(function(i,file){if(me.preview&&file.type.match('image.*')&&'FileReader'in window)
{var reader=new FileReader();reader.onload=function(e){var img=$('<img>');img.attr('src',e.target.result).css('maxWidth','100%');if(me.thumb_height!='')img.attr('height',me.thumb_height);if(me.thumb_width!='')img.attr('width',me.thumb_width);filesContainer.append($('<span>'+(n?', ':'')+'</span>').append(img));n++;};reader.readAsDataURL(file);}
else if(1<h){filesContainer.append($('<span>').text((n?', ':'')+file.name));n++;}})(i,this.files[i]);}
$('#'+this.id+'_clearer').after(filesContainer);}});$('#'+me.name+'_clearer').click(function(){$('#'+me.name).val('').change().valid();});},val:function(raw,no_quotes)
{raw=raw||false;no_quotes=no_quotes||false;var e=$("[id='"+this.name+"']:not(.ignore)"),result='',separator='';if(e.length)
{if(raw)result=e[0].files;else
{for(var i=0,h=e[0].files.length;i<h;i++)
{result+=separator+e[0].files[i].name;separator=', ';}
result=$.fbuilder.parseValStr(result,raw,no_quotes);}}
return result;}});$.fbuilder.controls['fpassword']=function(){};$.extend($.fbuilder.controls['fpassword'].prototype,$.fbuilder.controls['ffields'].prototype,{title:"Untitled",ftype:"fpassword",predefined:"",predefinedClick:false,required:false,size:"medium",minlength:"",maxlength:"",equalTo:"",regExp:"",regExpMssg:"",show:function()
{this.minlength=cff_esc_attr($.trim(this.minlength));this.maxlength=cff_esc_attr($.trim(this.maxlength));this.equalTo=cff_esc_attr($.trim(this.equalTo));this.predefined=this._getAttr('predefined');return'<div class="fields '+cff_esc_attr(this.csslayout)+' '+this.name+' cff-password-field" id="field'+this.form_identifier+'-'+this.index+'"><label for="'+this.name+'">'+this.title+''+((this.required)?"<span class='r'>*</span>":"")+'</label><div class="dfield"><input aria-label="'+cff_esc_attr(this.title)+'" id="'+this.name+'" name="'+this.name+'"'+((this.minlength.length)?' minlength="'+cff_esc_attr(this.minlength)+'"':'')+((this.maxlength.length)?' maxlength="'+cff_esc_attr(this.maxlength)+'"':'')+((this.equalTo.length)?' equalTo="#'+this.equalTo+this.form_identifier+'"':'')+' class="field '+this.size+((this.required)?" required":"")+'" type="password" autocomplete="new-password" value="'+cff_esc_attr(this.predefined)+'"/><span class="uh">'+this.userhelp+'</span></div><div class="clearer"></div></div>';},after_show:function()
{if(this.regExp!=""&&typeof $['validator']!='undefined')
{try{var parts=this.regExp.match(/(\/)(.*)(\/)([gimy]{0,4})$/i);this.regExp=(parts===null)?new RegExp(this.regExp):new RegExp(parts[2],parts[4].toLowerCase());if(!('pattern'in $.validator.methods))
$.validator.addMethod('pattern',function(value,element,param)
{try{return this.optional(element)||param.test(value);}
catch(err){return true;}});$('#'+this.name).rules('add',{'pattern':this.regExp,messages:{'pattern':this.regExpMssg}});}catch(err){}}},val:function(raw,no_quotes)
{raw=raw||false;no_quotes=no_quotes||false;var e=$('[id="'+this.name+'"]:not(.ignore)');if(e.length)return $.fbuilder.parseValStr(e.val(),raw,no_quotes);return 0;}});$.fbuilder.controls['fPhone']=function(){};$.extend($.fbuilder.controls['fPhone'].prototype,$.fbuilder.controls['ffields'].prototype,{title:"Phone",ftype:"fPhone",required:false,readonly:false,size:"medium",dformat:"### ### ####",predefined:"888 888 8888",countryComponent:false,toDisplay:'iso',countries:[],defaultCountry:'',show:function()
{var me=this,db={"AF":"+93","AX":"+358","AL":"+355","DZ":"+213","AS":"+1684","AD":"+376","AO":"+244","AI":"+1264","AQ":"+672","AG":"+1268","AR":"+54","AM":"+374","AW":"+297","AU":"+61","AT":"+43","AZ":"+994","BS":"+1242","BH":"+973","BD":"+880","BB":"+1246","BY":"+375","BE":"+32","BZ":"+501","BJ":"+229","BM":"+1441","BT":"+975","BO":"+591","BA":"+387","BW":"+267","BV":"+47","BR":"+55","IO":"+246","BN":"+673","BG":"+359","BF":"+226","BI":"+257","KH":"+855","CM":"+237","CA":"+1","CV":"+238","KY":"+ 345","CF":"+236","TD":"+235","CL":"+56","CN":"+86","CX":"+61","CC":"+61","CO":"+57","KM":"+269","CG":"+242","CD":"+243","CK":"+682","CR":"+506","CI":"+225","HR":"+385","CU":"+53","CY":"+357","CZ":"+420","DK":"+45","DJ":"+253","DM":"+1767","DO":"+1849","EC":"+593","EG":"+20","SV":"+503","GQ":"+240","ER":"+291","EE":"+372","ET":"+251","FK":"+500","FO":"+298","FJ":"+679","FI":"+358","FR":"+33","GF":"+594","PF":"+689","TF":"+262","GA":"+241","GM":"+220","GE":"+995","DE":"+49","GH":"+233","GI":"+350","GR":"+30","GL":"+299","GD":"+1473","GP":"+590","GU":"+1671","GT":"+502","GG":"+44","GN":"+224","GW":"+245","GY":"+592","HT":"+509","HM":"+0","VA":"+379","HN":"+504","HK":"+852","HU":"+36","IS":"+354","IN":"+91","ID":"+62","IR":"+98","IQ":"+964","IE":"+353","IM":"+44","IL":"+972","IT":"+39","JM":"+1876","JP":"+81","JE":"+44","JO":"+962","KZ":"+7","KE":"+254","KI":"+686","KP":"+850","KR":"+82","XK":"+383","KW":"+965","KG":"+996","LA":"+856","LV":"+371","LB":"+961","LS":"+266","LR":"+231","LY":"+218","LI":"+423","LT":"+370","LU":"+352","MO":"+853","MK":"+389","MG":"+261","MW":"+265","MY":"+60","MV":"+960","ML":"+223","MT":"+356","MH":"+692","MQ":"+596","MR":"+222","MU":"+230","YT":"+262","MX":"+52","FM":"+691","MD":"+373","MC":"+377","MN":"+976","ME":"+382","MS":"+1664","MA":"+212","MZ":"+258","MM":"+95","NA":"+264","NR":"+674","NP":"+977","NL":"+31","AN":"+599","NC":"+687","NZ":"+64","NI":"+505","NE":"+227","NG":"+234","NU":"+683","NF":"+672","MP":"+1670","NO":"+47","OM":"+968","PK":"+92","PW":"+680","PS":"+970","PA":"+507","PG":"+675","PY":"+595","PE":"+51","PH":"+63","PN":"+64","PL":"+48","PT":"+351","PR":"+1939","QA":"+974","RO":"+40","RU":"+7","RW":"+250","RE":"+262","BL":"+590","SH":"+290","KN":"+1869","LC":"+1758","MF":"+590","PM":"+508","VC":"+1784","WS":"+685","SM":"+378","ST":"+239","SA":"+966","SN":"+221","RS":"+381","SC":"+248","SL":"+232","SG":"+65","SK":"+421","SI":"+386","SB":"+677","SO":"+252","ZA":"+27","SS":"+211","GS":"+500","ES":"+34","LK":"+94","SD":"+249","SR":"+597","SJ":"+47","SZ":"+268","SE":"+46","CH":"+41","SY":"+963","TW":"+886","TJ":"+992","TZ":"+255","TH":"+66","TL":"+670","TG":"+228","TK":"+690","TO":"+676","TT":"+1868","TN":"+216","TR":"+90","TM":"+993","TC":"+1649","TV":"+688","UG":"+256","UA":"+380","AE":"+971","GB":"+44","US":"+1","UY":"+598","UZ":"+998","VU":"+678","VE":"+58","VN":"+84","VG":"+1284","VI":"+1340","WF":"+681","YE":"+967","ZM":"+260","ZW":"+263"};me.predefined=new String(me._getAttr('predefined',true));me.dformat=me.dformat.replace(/^\s+/,'').replace(/\s+$/,'').replace(/\s+/g,' ');me.predefined=me.predefined.replace(/^\s+/,'').replace(/\s+$/,'').replace(/\s+/g,' ');var str="",tmp=me.dformat.split(/\s+/),tmpv=me.predefined.split(/\s+/),attr=(typeof me.predefinedClick!='undefined'&&me.predefinedClick)?'placeholder':'value',nc=me.dformat.replace(/\s/g,'').length,c=0;for(var i=0;i<tmpv.length;i++)
{if($.trim(tmpv[i])=="")
{tmpv.splice(i,1);}}
str='<div class="'+me.size+' components_container">';if(me.countryComponent)
{nc+=me.toDisplay=='iso'?3:4;str+='<div class="uh_phone" style="min-width:'+(100/nc*(me.toDisplay=='iso'?3:4))+'%;"><select id="'+me.name+'_'+c+'" name="'+me.name+'_'+c+'" class="field">';if(!me.countries.length)me.countries=Object.keys(db);for(var i in me.countries)
str+='<option value="'+db[me.countries[i]]+'" '+(me.defaultCountry==me.countries[i]?'SELECTED':'')+'>'+(me.toDisplay=='iso'?me.countries[i]:db[me.countries[i]])+'</option>';str+='</select></div>';c++;}
for(var i=0,h=tmp.length;i<h;i++)
{if($.trim(tmp[i])!="")
{str+='<div class="uh_phone" style="min-width:'+(100/nc*tmp[i].length)+'%"><input aria-label="'+cff_esc_attr(me.title)+'" type="text" id="'+me.name+'_'+c+'" name="'+me.name+'_'+c+'" class="field '+((i==0&&!me.countryComponent)?' phone ':' digits ')+((me.required)?' required ':'')+'" size="'+$.trim(tmp[i]).length+'" '+attr+'="'+((tmpv[i])?tmpv[i]:"")+'" maxlength="'+$.trim(tmp[i]).length+'" minlength="'+$.trim(tmp[i]).length+'" '+((me.readonly)?'readonly':'')+' /><div class="l">'+$.trim(tmp[i])+'</div></div>';c++;}}
str+='</div>';return'<div class="fields '+cff_esc_attr(me.csslayout)+' '+me.name+' cff-phone-field" id="field'+me.form_identifier+'-'+me.index+'"><label for="'+me.name+'">'+me.title+''+((me.required)?"<span class='r'>*</span>":"")+'</label><div class="dfield"><input type="hidden" id="'+me.name+'" name="'+me.name+'" class="field" />'+str+'<div class="clearer"></div><span class="uh">'+me.userhelp+'</span></div><div class="clearer"></div></div>';},after_show:function()
{var me=this,tmp=me.dformat.split(' ');if(!('phone'in $.validator.methods))
$.validator.addMethod("phone",function(value,element)
{if(this.optional(element))return true;else return/^\+{0,1}\d*$/.test(value);});for(var i=0,h=tmp.length+(me.countryComponent?1:0);i<h;i++)
{$('#'+me.name+'_'+i).bind('change',function(){var v='';$('[id*="'+me.name+'_"]').each(function(){v+=$(this).val();});$('#'+me.name).val(v).change();});if(i+1<h)
{$('#'+me.name+'_'+i).bind('keyup',{'next':i+1},function(evt){var e=$(this);if(e.val().length==e.attr('maxlength'))
{e.change();$('#'+me.name+'_'+evt.data.next).focus();}});}}
$('#'+me.name+'_0').change();},val:function(raw,no_quotes)
{raw=raw||true;no_quotes=no_quotes||false;var e=$('[id="'+this.name+'"]:not(.ignore)'),p=$.fbuilder.parseValStr(e.val(),raw,no_quotes);if(e.length)return($.isNumeric(p)&&!no_quotes)?'"'+p+'"':p;return 0;},setVal:function(v)
{v=(new String(v)).replace(/^\s+/,'').replace(/\s+$/,'');if(v.length)
{var d=this.dformat.split(/\s+/g),f=v.substr(0,1),r='(.*)',c;for(var i in d)r+='(.{'+d[i].length+'})';r=new RegExp(r+'$');v=f+v.substr(1).replace(/[^\d]/g,'');c=r.exec(v);if(c!=null)
{for(var i=c.length-1;0<i;i--)
$('[id="'+this.name+'_'+(i-1)+'"]').val(c[i]);}
else $('input[id*="'+this.name+'_"]:eq(0)').val(v);}
$('[name="'+this.name+'"]').val(v);}});$.fbuilder.controls['fCommentArea']=function(){};$.extend($.fbuilder.controls['fCommentArea'].prototype,$.fbuilder.controls['ffields'].prototype,{title:"Comments here",ftype:"fCommentArea",userhelp:"A description of the section goes here.",show:function()
{return'<div class="fields '+cff_esc_attr(this.csslayout)+' '+this.name+' comment_area cff-instruct-text-field" id="field'+this.form_identifier+'-'+this.index+'"><label id="'+this.name+'">'+this.title+'</label><span class="uh">'+this.userhelp+'</span><div class="clearer"></div></div>';}});$.fbuilder.controls['fhidden']=function(){};$.extend($.fbuilder.controls['fhidden'].prototype,$.fbuilder.controls['ffields'].prototype,{ftype:"fhidden",title:"",predefined:"",show:function()
{this.predefined=this._getAttr('predefined');return'<div class="fields '+cff_esc_attr(this.csslayout)+' '+this.name+' cff-hidden-field" id="field'+this.form_identifier+'-'+this.index+'" style="padding:0;margin:0;border:0;width:0;height:0;overflow:hidden;"><label for="'+this.name+'">'+this.title+'</label><div class="dfield"><input id="'+this.name+'" name="'+this.name+'" type="hidden" value="'+cff_esc_attr(this.predefined)+'" class="field" /></div></div>';}});$.fbuilder.controls['fSectionBreak']=function(){};$.extend($.fbuilder.controls['fSectionBreak'].prototype,$.fbuilder.controls['ffields'].prototype,{title:"Section Break",ftype:"fSectionBreak",userhelp:"A description of the section goes here.",show:function()
{return'<div class="fields '+cff_esc_attr(this.csslayout)+' '+this.name+' section_breaks" id="field'+this.form_identifier+'-'+this.index+'"><div class="section_break" id="'+this.name+'" ></div><label>'+this.title+'</label><span class="uh">'+this.userhelp+'</span><div class="clearer"></div></div>';}});$.fbuilder.controls['fPageBreak']=function(){};$.extend($.fbuilder.controls['fPageBreak'].prototype,$.fbuilder.controls['ffields'].prototype,{title:"Page Break",ftype:"fPageBreak",show:function()
{return'<div class="fields '+cff_esc_attr(this.csslayout)+' '+this.name+' section_breaks" id="field'+this.form_identifier+'-'+this.index+'"><div class="section_break" id="'+this.name+'" ></div><label>'+this.title+'</label><span class="uh">'+this.userhelp+'</span><div class="clearer"></div></div>';}});$.fbuilder.controls['fsummary']=function(){};$.extend($.fbuilder.controls['fsummary'].prototype,$.fbuilder.controls['ffields'].prototype,{title:"Summary",ftype:"fsummary",fields:"",exclude_empty:false,titleClassname:"summary-field-title",valueClassname:"summary-field-value",fieldsArray:[],show:function()
{var me=this;if('string'!=typeof me.fields)return;var p=$.trim(me.fields.replace(/\,+/g,',')).split(','),l=p.length;if(l)
{var str='<div class="fields '+cff_esc_attr(me.csslayout)+' '+me.name+' cff-summary-field" id="field'+me.form_identifier+'-'+me.index+'">'+((!/^\s*$/.test(me.title))?'<h2>'+me.title+'</h2>':'')+'<div id="'+me.name+'"></div></div>';return str;}},after_show:function(){var me=this;if('string'!=typeof me.fields)return;var p=$.trim(me.fields.replace(/\,+/g,',')).split(','),l=p.length,str='';if(l)
{for(var i=0;i<l;i++)
{if(!/^\s*$/.test(p[i]))
{p[i]=$.trim(p[i])+me.form_identifier;if($('[class*="'+p[i]+'"]').length){str+='<div ref="'+p[i]+'" class="cff-summary-item"><span class="'+cff_esc_attr(me.titleClassname)+' cff-summary-title"></span><span class="'+cff_esc_attr(me.valueClassname)+' cff-summary-value"></span></div>';me.fieldsArray.push(p[i]);$(document).on('change','[id*="'+p[i]+'"]',function(){me.update();});}}}
$(document).on('showHideDepEvent',function(evt,form_identifier)
{me.update();});$('#cp_calculatedfieldsf_pform'+me.form_identifier).bind('reset',function(){setTimeout(function(){me.update();},10);});}
$('[id="'+me.name+'"]').html(str);},update:function()
{for(var j=0,k=this.fieldsArray.length;j<k;j++)
{var i=this.fieldsArray[j],e=$('[id="'+i+'"],[id^="'+i+'_rb"],[id^="'+i+'_cb"]'),tt=$('[ref="'+i+'"]');if(e.length&&tt.length)
{var l=$('[id="'+i+'"],[id^="'+i+'_rb"],[id^="'+i+'_cb"]').closest('.fields').find('label:first').clone().find('.r,.dformat').remove().end(),t=$.trim(l.text()).replace(/\:$/,''),v=[];e.each(function(){var e=$(this);if(/(checkbox|radio)/i.test(e.attr('type'))&&!e.is(':checked'))
{return;}
else if(e[0].tagName=='SELECT')
{var vt=[];e.find('option:selected').each(function(){vt.push($(this).attr('vt'));});v.push(vt.join(', '));}
else
{if(e.attr('vt'))
{v.push(e.attr('vt'));}
else if(e.attr('summary'))
{v.push($('#'+i).closest('.fields').find('.'+e.attr('summary')+i).html());}
else
{var d=$('[id="'+i+'_date"]');if(d.length)
{if(d.is(':disabled'))
{v.push(e.val().replace(d.val(),''));}
else v.push(e.val());}
else
{if(e.attr('type')=='file')
{var f=[];$.each(e[0].files,function(i,o){f.push(o.name);});v.push(f.join(', '));}
else
{var c=$('[id="'+i+'_caption"]');v.push((c.length&&!/^\s*$/.test(c.html()))?c.html():e.val());}}}}});v=v.join(', ');tt.find('.cff-summary-title')[(/^\s*$/.test(t))?'hide':'show']().html(t);var tmp=$('<div></div>').html(v);tmp.find('script').remove();tt.find('.cff-summary-value').html(tmp.html().replace(/\s(on[a-z]*\s*=)/gi,"_$1"));if(e.hasClass('ignore')||(this.exclude_empty&&v==''))
{tt.hide();}
else
{tt.show();}}}
$('[id="'+this.name+'"]').trigger('cff-summary-update');}});$.fbuilder.controls['datasource']=function(){};$.fbuilder.controls['datasource'].prototype={isDataSource:true,active:'',list:{'database':{cffaction:'get_data_from_database'},'posttype':{cffaction:'get_posts'},'taxonomy':{cffaction:'get_taxonomies'},'user':{cffaction:'get_users'},'messages':{cffaction:'get_submissions'},'acf':{cffaction:'get_acf'},'json':{jsonData:{source:''},getData:function(callback,parentObj)
{var obj={data:[]},d=this.jsonData,v=$.trim(d.source),populate=function(v){if(typeof v=='object')
{if('length'in v)obj.data=v;else if(v!=null)obj.data.push(v);}};if(v.length)
{if(v in window)
{populate(window[v]);callback(obj);}
else if(/^http(s)?:\/\//i.test(v))
{v+=((v.indexOf('?')==-1)?'?':'&')+'callback=?';$.ajax(v.replace(/^http(s)?\:/i,''),{success:function(data){populate(data);callback(obj);}});}}
else callback(obj);}},'recordset':{recordsetData:{recordset:'',value:'',text:'',where:''},getData:function(callback,parentObj)
{var obj={data:[]},d=this.recordsetData,fi=parentObj['form_identifier'],rs=$.trim(d.recordset),r,w=$.trim(d.where),t=$.trim(d.text),v=$.trim(d.value),tmp,tmp2;if(rs!='')
{r=$.fbuilder['forms'][fi].getItem(rs+fi).val();if(w!='')w=parentObj.parseVars(w);parentObj.replaceVariables([rs],{})
for(var i in r)
{if(w==''||(function(o,w){w=w.replace(/\brecord\s*\[/gi,'o[');try{return eval(w);}catch(err){return false;}})(r[i],w))
{tmp={};if(t!=''){if(typeof r[i][t]!='undefined')tmp['text']=r[i][t];else if(/^record\[/.test(t)){tmp2=t.replace(/^record\[/,'r['+i+'][');try{tmp['text']=eval(tmp2);}catch(err){tmp['text']='';}}}
if(v!=''){if(typeof r[i][v]!='undefined')tmp['value']=r[i][v];else if(/^record\[/.test(v)){tmp2=v.replace(/^record\[/,'r['+i+'][');try{tmp['value']=eval(tmp2);}catch(err){tmp['value']='';}}}
if(t==''&&v=='')tmp=r[i];obj.data.push(tmp);}}
callback(obj);}}},'server':{cffaction:'get_server',serverData:{equation_name:'',parameters:''},getData:function(callback,parentObj)
{var d=this.serverData,url=document.location.href.split('?')[0],data={},parameters;if(d.equation_name.length){parameters=$.trim(d.parameters);if(d.parameters.length)
{parameters=d.parameters.split(',');for(var i in parameters){data['param_'+(i*1+1)]=parentObj.parseVars($.trim(parameters[i]));}}
if(typeof this.ajaxConnect!='undefined')this.ajaxConnect.abort();data['cff_server_side_equation']=d.equation_name;this.ajaxConnect=$.ajax({'url':url.replace(/^http(s)?\:/i,''),'method':'POST','data':data,'dataType':'json','success':(function(callback){return function(data)
{var obj={data:[]};if('error'in data)obj=data;else if('result'in data){if(Array.isArray(data['result']))
obj.data=data['result'];else
obj.data.push(data['result']);}
callback(obj);};})(callback)});}}},'csv':{cffaction:'get_csv_rows',csvData:{text:0,value:0,fields:[],rows:[],where:''},getData:function(callback,parentObj)
{var isRS=parentObj.ftype=='frecordsetds',obj={data:[]},d=this.csvData,w=$.trim(d.where),v,t,r;if(w!='')w=parentObj.parseVars(w);for(var i in d.rows)
{v=d.value;t=(typeof d.text=='object')?d.text:[d.text];if(!$.isArray(d.rows[i]))
{for(var j=0,h=t.length;j<h;j++)
t[j]=d.fields[j];v=d.fields[v];}
if(w==''||w==d.rows[i][v])
{r={};if(!isRS)r['value']=d.rows[i][v];for(var j=0,h=t.length;j<h;j++)
r[(isRS)?t[j]:'text']=d.rows[i][t[j]];obj.data.push(r);}}
callback(obj);}}},getData:function(callback)
{var me=this,obj=me.list[me.active];if(me.active=='csv'&&typeof obj.csvData['rows']!='undefined'&&obj.csvData['rows'].length)
{if(typeof obj['getData']!='undefined')obj.getData(callback,me);if($('[id*="'+me.name+'"]').closest('.pbreak:hidden').length)$('[id*="'+me.name+'"]').addClass('ignorepb');}
else if(me.active=='json'&&typeof obj.jsonData['source']!='undefined'&&obj.jsonData['source'].length||me.active=='recordset'||me.active=='server')
{obj.getData(callback,me);}
else
{var url=document.location.href,data={cffaction:obj.cffaction,form:obj.form,field:me.name.replace(me.form_identifier,''),vars:{}},_form=$('[id*="'+me.name+'"]').closest('form'),_page;if(_form.length)
{_page=_form.find('[name="cp_ref_page"]');url=(_page.length)?_page.val():url;}
if(typeof obj.vars!='undefined')
{if(!me.replaceVariables(obj.vars,data['vars']))return;}
if(typeof me.ajaxConnect!='undefined')me.ajaxConnect.abort();me.ajaxConnect=$.ajax({dataType:'json',url:url.replace(/^http(s)?\:/i,''),cache:false,data:data,success:(function(me){return function(data){if($('[id*="'+me.name+'"]').closest('.pbreak:hidden').length)
{$('[id*="'+me.name+'"]').addClass('ignorepb');}
callback(data);};})(me)});}},parseVars:function(p)
{var o={},v;p=p.replace(/^\s*/,'').replace(/\s*$/,'');if(p!='')
{if((v=p.match(/<\s{0}%[^%]*%\s{0}>/g))!=null)
{v=v.map(function(x){return x.replace(/(<\s{0}%|%\s{0}>)/g,'');});this.replaceVariables(v,o);for(var i in v)
{var index=encodeURI(v[i]);if(typeof o[index]!='undefined')
{p=p.replace(new RegExp('<\s{0}%'+v[i].replace(/[\-\[\]\{\}\(\)\*\+\?\.\,\\\^\$\|\#\s]/g,"\\$&")+'%\s{0}>','g'),o[index]);}}}}
return p;},replaceVariables:function(vars,_rtn)
{var me=this,field,formId=form_identifier=me.form_identifier,id,raw,isValid=true,val='';if(!('ds_filtering_fields'in me))me.ds_filtering_fields={};for(var i=0,h=vars.length;i<h;i++)
{id=vars[i]+formId;raw=(id.indexOf('|r')!=-1);id=id.replace('|r','');field=$.fbuilder['forms'][formId].getItem(id);if(typeof field!='undefined'&&field!=false)
{val=field.val(raw);if($('[id*="'+id+'"]').val()=='')isValid=false;if(!(id in me.ds_filtering_fields))
{me.ds_filtering_fields[id]=1;$(document).on('change trigger_ds','[id="'+id+'"],[id^="'+id+'_cb"],[id^="'+id+'_rb"]',function(){me.after_show();});}}
else
{try{if(typeof window[vars[i]]!='undefined')val=window[vars[i]];else val=eval(vars[i]);}catch(err){val='';}}
_rtn[encodeURI(vars[i])]=(val+'').replace(/^['"]+/,'').replace(/['"]+$/,'');}
return isValid;},setDefault:function()
{var d=this.defaultSelection,l,e,t,n=this.name;if($.isArray(d))
{for(var i in d)d[i]=this.parseVars($.trim(d[i]));}
else
{d=this.parseVars($.trim(d));}
if(!/^\s*$/.test(d.toString()))
{l=($.isArray(d))?d:$.fbuilder.htmlEncode(d).split('|');for(var i in l)
{t=$.trim(l[i]);if(!/^\s*$/.test(t))
{e=$('[name*="'+n+'"][value="'+t+'"],[name*="'+n+'"][vt="'+t+'"]');if(e.length)e.prop('checked',true);else
{e=$('[name*="'+n+'"]').find('option[value="'+t+'"],option[vt="'+t+'"]');if(e.length)e.prop('selected',true);}}}}}};$.fbuilder.controls['frecordsetds']=function(){};$.extend($.fbuilder.controls['frecordsetds'].prototype,$.fbuilder.controls['ffields'].prototype,$.fbuilder.controls['datasource'].prototype,{ftype:"frecordsetds",records:[],show:function(){return'<input id="'+this.name+'" name="'+this.name+'" class="cpcff-recordset '+this.name+'" type="hidden" />';},after_show:function(){var me=this;$.fbuilder.controls['datasource'].prototype.getData.call(this,function(data)
{var v='';if(typeof data['error']!='undefined')
{alert(data.error);}
else
{me.records=[];if(data.data.length)
{me.records=data.data.slice(0);}}
$('#'+me.name).trigger('change').trigger('cff-data-filled');});},reload:function(){this.after_show();},val:function(){var e=$('[id="'+this.name+'"]');if(e.length)
{return this.records;}
return[];},setRecords:function(records){try
{var record;this.records=[];if(Array.isArray(records)){for(var i in records){record=JSON.parse(JSON.stringify(records[i]));if(typeof record==='object'&&record!==null)
{this.records.push(record);}}}
$('#'+this.name).trigger('change');}catch(err){console.log(err);}},addRecord:function(record)
{try
{record=JSON.parse(JSON.stringify(record));if(typeof record==='object'&&record!==null)
{this.records.push(record);$('#'+this.name).trigger('change');}}catch(err){console.log(err);}},updateRecord:function(record,condition)
{try
{record=JSON.parse(JSON.stringify(record));condition=JSON.parse(JSON.stringify(condition));var flag,change=false;if(typeof record==='object'&&record!==null&&typeof condition==='object'&&condition!==null)
{for(var i in this.records)
{flag=true
for(var j in condition)
{if(!(j in this.records[i])||this.records[i][j]!==condition[j])
{flag=false;break;}}
if(flag)
{$.extend(true,this.records[i],record);change=true;}}
if(change)$('#'+this.name).trigger('change');}}catch(err){console.log(err);}},deleteRecord:function(condition)
{try
{condition=JSON.parse(JSON.stringify(condition));var l=this.records.length;if(typeof condition==='object'&&condition!==null)
{this.records=this.records.filter(function(item){for(var j in condition)
if(!(j in item)||item[j]!==condition[j])return true;return false;});if(l!=this.records.length)$('#'+this.name).trigger('change');}}catch(err){console.log(err);}}});$.fbuilder.controls['ftextds']=function(){};$.extend($.fbuilder.controls['ftextds'].prototype,$.fbuilder.controls['ftext'].prototype,$.fbuilder.controls['datasource'].prototype,{ftype:"ftextds",first_time:true,show:function()
{return $.fbuilder.controls['ftext'].prototype.show.call(this);},after_show:function()
{var me=this;$.fbuilder.controls['ftext'].prototype.after_show.call(me);$.fbuilder.controls['datasource'].prototype.getData.call(this,function(data)
{var v='';if(typeof data['error']!='undefined')
{alert(data.error);}
else
{if(data.data.length)
{v=data.data[0]['value'];}}
if(me.first_time)
{me.first_time=false;if(typeof me.defaultSelection!='undefined')v=me.defaultSelection;}
$('#'+me.name).val(v).trigger('change').trigger('cff-data-filled');});},setVal:function(v,nochange)
{this.defaultSelection=v;$.fbuilder.controls['ftext'].prototype.setVal.call(this,v,nochange);}});$.fbuilder.controls['femailds']=function(){};$.extend($.fbuilder.controls['femailds'].prototype,$.fbuilder.controls['femail'].prototype,$.fbuilder.controls['datasource'].prototype,{ftype:"femailds",first_time:true,show:function()
{return $.fbuilder.controls['femail'].prototype.show.call(this);},after_show:function()
{var me=this;$.fbuilder.controls['datasource'].prototype.getData.call(this,function(data)
{var v='';if(typeof data['error']!='undefined')
{alert(data.error);}
else
{if(data.data.length)
{v=data.data[0]['value'];}}
if(me.first_time)
{me.first_time=false;if(typeof me.defaultSelection!='undefined')v=me.defaultSelection;}
$('#'+me.name).val(v).trigger('change').trigger('cff-data-filled');});},setVal:function(v,nochange)
{this.defaultSelection=v;$.fbuilder.controls['femail'].prototype.setVal.call(this,v,nochange);}});$.fbuilder.controls['ftextareads']=function(){};$.extend($.fbuilder.controls['ftextareads'].prototype,$.fbuilder.controls['ftextarea'].prototype,$.fbuilder.controls['datasource'].prototype,{ftype:"ftextareads",first_time:true,show:function()
{return $.fbuilder.controls['ftextarea'].prototype.show.call(this);},after_show:function()
{var me=this;$.fbuilder.controls['datasource'].prototype.getData.call(this,function(data)
{var v='';if(typeof data['error']!='undefined')
{alert(data.error);}
else
{if(data.data.length)
{v=data.data[0]['value'];}}
if(me.first_time)
{me.first_time=false;if(typeof me.defaultSelection!='undefined')v=me.defaultSelection;}
$('#'+me.name).val(v).trigger('change').trigger('cff-data-filled');});},setVal:function(v,nochange)
{this.defaultSelection=v;$.fbuilder.controls['ftextarea'].prototype.setVal.call(this,v,nochange);}});$.fbuilder.controls['fcheckds']=function(){};$.extend($.fbuilder.controls['fcheckds'].prototype,$.fbuilder.controls['fcheck'].prototype,$.fbuilder.controls['datasource'].prototype,{ftype:"fcheckds",defaultSelection:"",first_time:true,show:function()
{return'<div class="fields '+cff_esc_attr(this.csslayout)+(this.onoff?' cff-switch-container':'')+' '+this.name+' cff-checkbox-field" id="field'+this.form_identifier+'-'+this.index+'"><label>'+this.title+''+((this.required)?"<span class='r'>*</span>":"")+'</label><div class="dfield"><input type="hidden" name="'+this.name+'[]" id="'+this.name+'_cb0" value="" /><span class="uh">'+this.userhelp+'</span></div><div class="clearer"></div></div>';},after_show:function()
{var me=this,ignorepb=($('[id="field'+me.form_identifier+'-'+me.index+'"]').closest('.pbreak').is(':visible'))?'':' ignorepb ';$.fbuilder.controls['fcheck'].prototype.after_show.call(this);$.fbuilder.controls['datasource'].prototype.getData.call(this,function(data)
{var str='';if(typeof data['error']!='undefined')
{alert(data.error);}
else
{var used=[],i=0;while(data.data.length)
{var e=data.data.shift(),s=JSON.stringify(e);if($.inArray(s,used)==-1)
{str+='<div class="'+me.layout+'"><label for="'+me.name+'_cb'+i+'"><input aria-label="'+cff_esc_attr(e.text)+'" name="'+me.name+'[]" id="'+me.name+'_cb'+i+'" class="field group '+((me.required)?' required ':'')+ignorepb+'" value="'+cff_esc_attr(e.value)+'" vt="'+cff_esc_attr((me.toSubmit=='text')?e.text:e.value)+'" type="checkbox" /> '+
(me.onoff?'<span class="cff-switch"></span>':'')+'<span>'+e.text+'</span></label></div>';used.push(s);i++;}}}
$('#field'+me.form_identifier+'-'+me.index+' .dfield').html(str+(me.userhelpTooltip?'':'<span class="uh">'+me.userhelp+'</span>')+'<div class="clearer"></div>');if(str.length&&me.first_time)
{me.first_time=false;$.fbuilder.controls['datasource'].prototype.setDefault.call(me);}
$('[id*="'+me.name+'"]').trigger('change').trigger('cff-data-filled');});},setVal:function(v,nochange,_default)
{this.defaultSelection=v;$.fbuilder.controls['fcheck'].prototype.setVal.call(this,v,nochange,_default);}});$.fbuilder.controls['fradiods']=function(){};$.extend($.fbuilder.controls['fradiods'].prototype,$.fbuilder.controls['fradio'].prototype,$.fbuilder.controls['datasource'].prototype,{ftype:"fradiods",defaultSelection:"",first_time:true,show:function()
{return'<div class="fields '+cff_esc_attr(this.csslayout)+(this.onoff?' cff-switch-container':'')+' '+this.name+' cff-radiobutton-field" id="field'+this.form_identifier+'-'+this.index+'"><label>'+this.title+''+((this.required)?"<span class='r'>*</span>":"")+'</label><div class="dfield"><input type="hidden" name="'+this.name+'" id="'+this.name+'_rb0" value="" /><span class="uh">'+this.userhelp+'</span></div><div class="clearer"></div></div>';},after_show:function()
{var me=this,ignorepb=($('[id="field'+me.form_identifier+'-'+me.index+'"]').closest('.pbreak').is(':visible'))?'':' ignorepb ';$.fbuilder.controls['fradio'].prototype.after_show.call(this);$.fbuilder.controls['datasource'].prototype.getData.call(this,function(data)
{var str='';if(typeof data['error']!='undefined')
{alert(data.error);}
else
{var used=[],i=0;while(data.data.length)
{var e=data.data.shift(),s=JSON.stringify(e);if($.inArray(s,used)==-1)
{str+='<div class="'+me.layout+'"><label for="'+me.name+'_rb'+i+'"><input aria-label="'+cff_esc_attr(e.text)+'" name="'+me.name+'" id="'+me.name+'_rb'+i+'" class="field group '+((me.required)?' required ':'')+ignorepb+'" value="'+cff_esc_attr(e.value)+'" vt="'+cff_esc_attr((me.toSubmit=='text')?e.text:e.value)+'" type="radio" i="'+i+'" /> '+
(me.onoff?'<span class="cff-switch"></span>':'')+'<span>'+e.text+'</span></label></div>';i++;used.push(s);}}}
$('#field'+me.form_identifier+'-'+me.index+' .dfield').html(str+(me.userhelpTooltip?'':'<span class="uh">'+me.userhelp+'</span>')+'<div class="clearer"></div>');if(str.length&&me.first_time)
{me.first_time=false;$.fbuilder.controls['datasource'].prototype.setDefault.call(me);}
$.fbuilder.controls['fradio'].prototype.initStatus.call(this);$('[id*="'+me.name+'"]').trigger('change').trigger('cff-data-filled');});},setVal:function(v,nochange,_default)
{this.defaultSelection=v;$.fbuilder.controls['fradio'].prototype.setVal.call(this,v,nochange,_default);}});$.fbuilder.controls['fPhoneds']=function(){};$.extend($.fbuilder.controls['fPhoneds'].prototype,$.fbuilder.controls['fPhone'].prototype,$.fbuilder.controls['datasource'].prototype,{ftype:"fPhoneds",first_time:true,show:function()
{return $.fbuilder.controls['fPhone'].prototype.show.call(this);},after_show:function()
{var me=this;$.fbuilder.controls['fPhone'].prototype.after_show.call(me);$.fbuilder.controls['datasource'].prototype.getData.call(me,function(data)
{var v='';if(typeof data['error']!='undefined')alert(data.error);else if(data.data.length)v=data.data[0].value;if(me.first_time)
{me.first_time=false;if(typeof me.defaultSelection!='undefined')v=me.defaultSelection;}
me.setVal(v);$('#'+me.name).trigger('cff-data-filled');});},setVal:function(v,nochange)
{this.defaultSelection=v;$.fbuilder.controls['fPhone'].prototype.setVal.call(this,v,nochange);}});$.fbuilder.controls['fdropdownds']=function(){};$.extend($.fbuilder.controls['fdropdownds'].prototype,$.fbuilder.controls['fdropdown'].prototype,$.fbuilder.controls['datasource'].prototype,{ftype:"fdropdownds",defaultSelection:"",first_choice:false,first_choice_text:"",first_time:true,show:function()
{this.choices=[];this.choicesVal=[];return $.fbuilder.controls['fdropdown'].prototype.show.call(this);},after_show:function()
{var me=this;$.fbuilder.controls['datasource'].prototype.getData.call(this,function(data)
{var str='',e=$('#'+me.name);if(typeof data['error']!='undefined')
{alert(data.error);}
else
{var t,v,used=[];while(data.data.length)
{var o=data.data.shift(),s=JSON.stringify(o);if($.inArray(s,used)==-1)
{v=((typeof o['value']!='undefined')?o['value']:'');t=((typeof o['text']!='undefined')?o['text']:v);str+='<option value="'+cff_esc_attr(v)+'" vt="'+cff_esc_attr((me.toSubmit=='text')?t:v)+'">'+cff_esc_attr(t)+'</option>';used.push(s);}}}
e.html((me.first_choice?'<option value="">'+cff_esc_attr(me.first_choice_text)+'</option>':'')+str);if(str.length&&me.first_time)
{me.first_time=false;$.fbuilder.controls['datasource'].prototype.setDefault.call(me);}
e.trigger('change').trigger('cff-data-filled');if(me.select2)
{$('#'+me.name).next('.cff-select2-container').remove();$('#'+me.name).after('<span class="cff-select2-container"></span>');$('#'+me.name).on('change',function(){$(this).valid();});if('select2'in $.fn)
$('#'+me.name).select2({'dropdownParent':$('#'+me.name).next('.cff-select2-container')});else
$(document).ready(function(){if('select2'in $.fn)$('#'+me.name).select2({'dropdownParent':$('#'+me.name).next('.cff-select2-container')});});}});},setVal:function(v,nochange,_default)
{this.defaultSelection=v;$.fbuilder.controls['fdropdown'].prototype.setVal.call(this,v,nochange,_default);}});$.fbuilder.controls['fhiddends']=function(){};$.extend($.fbuilder.controls['fhiddends'].prototype,$.fbuilder.controls['fhidden'].prototype,$.fbuilder.controls['datasource'].prototype,{ftype:"fhiddends",first_time:true,show:function()
{return $.fbuilder.controls['fhidden'].prototype.show.call(this);},after_show:function()
{var me=this;$.fbuilder.controls['datasource'].prototype.getData.call(this,function(data)
{var v='';if(typeof data['error']!='undefined')
{alert(data.error);}
else
{if(data.data.length)
{v=data.data[0]['value'];}}
if(me.first_time)
{me.first_time=false;if(typeof me.defaultSelection!='undefined')v=me.defaultSelection;}
$('#'+me.name).val(v).trigger('change').trigger('cff-data-filled');});},setVal:function(v,nochange)
{this.defaultSelection=v;$.fbuilder.controls['fhidden'].prototype.setVal.call(this,v,nochange);}});$.fbuilder.controls['fcontainer']=function(){};$.fbuilder.controls['fcontainer'].prototype={fields:[],columns:1,rearrange:0,after_show:function(e)
{var e=e||$('#'+this.name),f;for(var i=0,h=this.fields.length;i<h;i++)
{f=$('.fields.'+this.fields[i]+this.form_identifier).detach();if(this.columns>1)
{f.addClass('column'+this.columns);if(i%this.columns==0&&!this.rearrange)f.css('clear','left');}
f.appendTo(e);}},showHideDep:function(toShow,toHide,hiddenByContainer,interval)
{if(typeof hiddenByContainer=='undefined')hiddenByContainer={};var me=this,isHidden=(typeof toHide[me.name]!='undefined'||typeof hiddenByContainer[me.name]!='undefined'),fId,result=[];for(var i=0,h=me.fields.length;i<h;i++)
{if(!/fieldname/i.test(me.fields[i]))continue;fId=me.fields[i]+me.form_identifier;if(isHidden)
{if(typeof hiddenByContainer[fId]=='undefined')hiddenByContainer[fId]={};if(typeof hiddenByContainer[fId][me.name]=='undefined')
{hiddenByContainer[fId][me.name]={};if(typeof toHide[fId]=='undefined')
{$('[id*="'+fId+'"],.'+fId).closest('.fields').hide();$('[id*="'+fId+'"]:not(.ignore)').addClass('ignore');result.push(fId);}}}
else
{if(typeof hiddenByContainer[fId]!='undefined')
{delete hiddenByContainer[fId][me.name];if($.isEmptyObject(hiddenByContainer[fId]))
{delete hiddenByContainer[fId];if(typeof toHide[fId]=='undefined')
{$('[id*="'+fId+'"],.'+fId).closest('.fields').fadeIn(interval||0);$('[id*="'+fId+'"].ignore').removeClass('ignore');result.push(fId);}}}}}
return result;}};$.fbuilder.controls['ffieldset']=function(){};$.extend($.fbuilder.controls['ffieldset'].prototype,$.fbuilder.controls['ffields'].prototype,{title:"Untitled",ftype:"ffieldset",fields:[],columns:1,collapsible:false,defaultCollapsed:true,selfClosing:false,rearrange:0,show:function()
{return'<div class="fields '+cff_esc_attr(this.csslayout)+' '+this.name+' cff-container-field '+((this.collapsible)?'cff-collapsible'+((this.selfClosing)?' cff-selfclosing':'')+((this.defaultCollapsed)?' cff-collapsed':''):'')+'" id="field'+this.form_identifier+'-'+this.index+'"><FIELDSET>'+((!/^\s*$/.test(this.title)||this.collapsible)?'<LEGEND>'+this.title+'</LEGEND>':'')+'<div id="'+this.name+'"></div></FIELDSET><div class="clearer"></div></div>';},after_show:function()
{var me=this;$.fbuilder.controls['fcontainer'].prototype.after_show.call(this);if(me.collapsible){function collapseApply(p){if(p.length)
{p.toggleClass('cff-collapsed');if(!p.hasClass('cff-collapsed'))
{p.siblings('.cff-selfclosing').addClass('cff-collapsed');}}}
$('.'+me.name+'>fieldset>legend').bind('click',function(evt){collapseApply($(this).closest('.cff-collapsible'));evt.preventDefault();evt.stopPropagation();});$('.'+me.name).bind('click',function(){var e=$(this);if(e.hasClass('cff-collapsed'))collapseApply(e);});}},showHideDep:function(toShow,toHide,hiddenByContainer)
{return $.fbuilder.controls['fcontainer'].prototype.showHideDep.call(this,toShow,toHide,hiddenByContainer);}});$.fbuilder.controls['fdiv']=function(){};$.extend($.fbuilder.controls['fdiv'].prototype,$.fbuilder.controls['ffields'].prototype,{ftype:"fdiv",fields:[],columns:1,rearrange:0,show:function()
{return'<div class="fields '+cff_esc_attr(this.csslayout)+' '+this.name+' cff-container-field" id="field'+this.form_identifier+'-'+this.index+'"><div id="'+this.name+'"></div><div class="clearer"></div></div>';},after_show:function()
{$.fbuilder.controls['fcontainer'].prototype.after_show.call(this);},showHideDep:function(toShow,toHide,hiddenByContainer)
{return $.fbuilder.controls['fcontainer'].prototype.showHideDep.call(this,toShow,toHide,hiddenByContainer);}});$.fbuilder.controls['fMedia']=function(){};$.extend($.fbuilder.controls['fMedia'].prototype,$.fbuilder.controls['ffields'].prototype,{ftype:"fMedia",sMediaType:"image",data:{image:{sWidth:"",sHeight:"",sSrc:"",sAlt:"",sLink:"",sTarget:"",sFigcaption:""},audio:{sWidth:"",sSrc:"",sSrcAlt:"",sControls:1,sLoop:0,sAutoplay:0,sMuted:0,sPreload:"auto",sFallback:"",sFigcaption:"",sHideDownload:0},video:{sWidth:"",sHeight:"",sSrc:"",sSrcAlt:"",sPoster:"",sControls:1,sLoop:0,sAutoplay:0,sMuted:0,sPreload:"auto",sFallback:"",sFigcaption:"",sHideDownload:0}},_show_image:function()
{var d=this.data.image,esc=cff_esc_attr,a=[],l=[],r='';if($.trim(d.sWidth))a.push('width="'+esc(d.sWidth)+'"');if($.trim(d.sHeight))a.push('height="'+esc(d.sHeight)+'"');if($.trim(d.sSrc))a.push('src="'+esc(d.sSrc)+'"');if($.trim(d.sAlt))a.push('alt="'+esc(d.sAlt)+'"');if($.trim(d.sLink))
{l.push('href="'+esc(d.sLink)+'"');if($.trim(d.sTarget))l.push('target="'+esc(d.sTarget)+'"');r='<a '+l.join(' ')+' ><img '+a.join(' ')+' /></a>';}
else
{r='<img '+a.join(' ')+' />';}
return r;},_show_audio_video:function(d,isV)
{var esc=cff_esc_attr,a=[],s=[],t=(isV)?'video':'audio';if($.trim(d.sWidth))s.push('width:'+esc(d.sWidth)+';');if(isV&&$.trim(d.sHeight))s.push('height:'+esc(d.sHeight)+';');if(isV&&$.trim(d.sPoster))a.push('poster="'+esc(d.sPoster)+'"');if($.trim(d.sSrc))a.push('src="'+esc(d.sSrc)+'"');if(d.sAutoplay)a.push('autoplay');if(d.sControls)a.push('controls');if(d.sLoop)a.push('loop');if(d.sMuted)a.push('muted');if(d.sHideDownload)a.push('controlsList="nodownload"');a.push('preload="'+esc(d.sPreload)+'"');return'<'+t+' '+a.join(' ')+' style="'+s.join(' ')+'">'+(($.trim(d.sSrcAlt))?'<source src="'+esc(d.sSrcAlt)+'" />':'')+'<p>'+d.sFallback+'</p></'+t+'>';},_show_audio:function()
{return this._show_audio_video(this.data.audio,false);},_show_video:function()
{return this._show_audio_video(this.data.video,true);},show:function()
{return'<div class="fields '+cff_esc_attr(this.csslayout)+' '+this.name+' cff-media-field" id="field'+this.form_identifier+'-'+this.index+'"><div class="clearer"><div class="field" id="'+this.name+'">'+this['_show_'+this.sMediaType]()+'</div></div><span class="uh">'+this.data[this.sMediaType].sFigcaption+'</span><div class="clearer"></div></div>';}});$.fbuilder.controls['frecordav']=function(){};$.extend($.fbuilder.controls['frecordav'].prototype,$.fbuilder.controls['ffields'].prototype,{ftype:"frecordav",required:false,exclude:false,size:"medium",to_record:"video",max_time:0,beep:0,preview:false,video_width:320,video_height:240,record_label:'Record',stop_label:'Stop',status_message:'Recording saved',_has_hours_component:function(){return Math.floor(this.max_time/3600)?1:0;},_is_video:function(){return this.to_record=='video'||this.to_record=='audio-video';},_is_audio:function(){return this.to_record=='audio'||this.to_record=='audio-video';},_format_time_component:function(v)
{var _has_hours=this._has_hours_component(),hours=Math.floor(v/3600),minutes=Math.floor((v-hours*3600)/60),seconds=(v-hours*3600-minutes*60)%60,time_formatted=(_has_hours?(hours<10?'0'+hours:hours)+':':'')+(minutes<10?'0'+minutes:minutes)+':'+(seconds<10?'0'+seconds:seconds);return time_formatted;},_getUserMedia:function()
{return navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||false;},show:function()
{var max_time_formatted=this._format_time_component(this.max_time),time_formatted=(this._has_hours_component()?'00:':'')+'00:00';return'<div class="fields '+cff_esc_attr(this.csslayout)+' '+this.name+' cff-record-av-field" id="field'+this.form_identifier+'-'+this.index+'">'+'<label for="'+this.name+'_record_btn">'+this.title+''+((this.required)?"<span class='r'>*</span>":"")+'</label>'+'<div class="dfield">'+'<input type="file" id="'+this.name+'" name="'+this.name+'[]" class="hide-strong" />'+'<div class="cff-record-controls-container">'+'<div class="cff-record-btn" id="'+this.name+'_record_btn">'+cff_sanitize(this.record_label)+'</div>'+
(this.preview?'<div class="cff-record-play-btn hide-strong" id="'+this.name+'_play_btn"></div>':'')+
(this.max_time?'<div class="cff-record-time" id="'+this.name+'_record_time">'+time_formatted+'</div><div class="cff-record-max-time">'+max_time_formatted+'</div>':'')+'</div>'+'<div class="clearer"></div>'+'<div class="cff-record-status hide-strong" id="'+this.name+'_record_status">'+cff_sanitize(this.status_message)+'</div>'+
(this.preview?(this._is_video()?'<video id="'+this.name+'_media" width="'+cff_esc_attr(this.video_width)+'" height="'+cff_esc_attr(this.video_height)+'" class="hide-strong" style="margin-top:20px;" preload="metadata"></video>':'<audio id="'+this.name+'_media" class="hide-strong"></audio>'):'')+'<div class="clearer"></div>'+'<span class="uh">'+this.userhelp+'</span></div><div class="clearer" /></div>';},after_show:function()
{var me=this,mssg=$('#'+me.name+'_record_status'),record_btn=$('#'+this.name+'_record_btn'),play_btn=$('#'+me.name+'_play_btn'),file_ctrl=$('#'+me.name),media_ctrl=$('#'+me.name+'_media'),record_time=$('#'+me.name+'_record_time'),chunks=[],interval,streamRecorder,recording_flag=false;play_btn[_files().length?'removeClass':'addClass']('hide-strong');navigator.getUserMedia=me._getUserMedia();if(media_ctrl.length)
{media_ctrl[0].ontimeupdate=function(evt){if(!recording_flag)record_time.text(me._format_time_component(Math.round(evt.target.currentTime)));};media_ctrl[0].onended=function(evt){evt.target.currentTime=0;play_btn.removeClass('cff-record-stop-btn');};}
if(!navigator.getUserMedia){$('.'+me.name).remove();return;}
function _files(){return file_ctrl[0].files;};function _load_file(){var files=_files();if(files.length&&media_ctrl.length)
{media_ctrl[0].src=URL.createObjectURL(files[0]);return true;}
return false;}
function _random(){return Math.floor(Math.random()*(1000-9999+1)+1000);};function _stopRecording(){try{if(typeof streamRecorder!='undefined')
{streamRecorder.onstop=function(evt){var container=new DataTransfer(),file=new File(chunks,me.to_record+_random()+'.webm',{type:'video/webm',lastModified:new Date().getTime()});container.items.add(file);file_ctrl[0].files=container.files;play_btn.removeClass('cff-record-stop-btn hide-strong');mssg.removeClass('hide-strong');_load_file();};streamRecorder.stop();}}catch(err){console.log(err);};record_btn.removeClass('cff-record-btn-recording');if(me._is_video()&&media_ctrl.length)
{media_ctrl[0].pause();media_ctrl[0].srcObject=null;}
recording_flag=false;};record_btn.click(function(evt){var settings={video:(me._is_video())?{'facingMode':{exact:'user'}}:false,audio:(me._is_audio())?true:false};clearInterval(interval);play_btn.addClass('hide-strong');mssg.addClass('hide-strong');record_btn.toggleClass('cff-record-btn-recording');if(record_btn.hasClass('cff-record-btn-recording'))
{var i=0;chunks=[];recording_flag=true;if(me._is_video()&&media_ctrl.length)media_ctrl.removeClass('hide-strong');navigator.getUserMedia(settings,function(localMediaStream)
{streamRecorder=new MediaRecorder(localMediaStream);streamRecorder.ondataavailable=function(evt){chunks.push(evt.data);};streamRecorder.start();if(me._is_video()&&media_ctrl.length)
{media_ctrl[0].srcObject=localMediaStream;media_ctrl[0].play();}
interval=setInterval(function(){i++;if(i<me.max_time)record_time.text(me._format_time_component(i));else{clearInterval(interval);if(me.beep){var snd=new Audio("data:audio/wav;base64,//uQRAAAAWMSLwUIYAAsYkXgoQwAEaYLWfkWgAI0wWs/ItAAAGDgYtAgAyN+QWaAAihwMWm4G8QQRDiMcCBcH3Cc+CDv/7xA4Tvh9Rz/y8QADBwMWgQAZG/ILNAARQ4GLTcDeIIIhxGOBAuD7hOfBB3/94gcJ3w+o5/5eIAIAAAVwWgQAVQ2ORaIQwEMAJiDg95G4nQL7mQVWI6GwRcfsZAcsKkJvxgxEjzFUgfHoSQ9Qq7KNwqHwuB13MA4a1q/DmBrHgPcmjiGoh//EwC5nGPEmS4RcfkVKOhJf+WOgoxJclFz3kgn//dBA+ya1GhurNn8zb//9NNutNuhz31f////9vt///z+IdAEAAAK4LQIAKobHItEIYCGAExBwe8jcToF9zIKrEdDYIuP2MgOWFSE34wYiR5iqQPj0JIeoVdlG4VD4XA67mAcNa1fhzA1jwHuTRxDUQ//iYBczjHiTJcIuPyKlHQkv/LHQUYkuSi57yQT//uggfZNajQ3Vmz+Zt//+mm3Wm3Q576v////+32///5/EOgAAADVghQAAAAA//uQZAUAB1WI0PZugAAAAAoQwAAAEk3nRd2qAAAAACiDgAAAAAAABCqEEQRLCgwpBGMlJkIz8jKhGvj4k6jzRnqasNKIeoh5gI7BJaC1A1AoNBjJgbyApVS4IDlZgDU5WUAxEKDNmmALHzZp0Fkz1FMTmGFl1FMEyodIavcCAUHDWrKAIA4aa2oCgILEBupZgHvAhEBcZ6joQBxS76AgccrFlczBvKLC0QI2cBoCFvfTDAo7eoOQInqDPBtvrDEZBNYN5xwNwxQRfw8ZQ5wQVLvO8OYU+mHvFLlDh05Mdg7BT6YrRPpCBznMB2r//xKJjyyOh+cImr2/4doscwD6neZjuZR4AgAABYAAAABy1xcdQtxYBYYZdifkUDgzzXaXn98Z0oi9ILU5mBjFANmRwlVJ3/6jYDAmxaiDG3/6xjQQCCKkRb/6kg/wW+kSJ5//rLobkLSiKmqP/0ikJuDaSaSf/6JiLYLEYnW/+kXg1WRVJL/9EmQ1YZIsv/6Qzwy5qk7/+tEU0nkls3/zIUMPKNX/6yZLf+kFgAfgGyLFAUwY//uQZAUABcd5UiNPVXAAAApAAAAAE0VZQKw9ISAAACgAAAAAVQIygIElVrFkBS+Jhi+EAuu+lKAkYUEIsmEAEoMeDmCETMvfSHTGkF5RWH7kz/ESHWPAq/kcCRhqBtMdokPdM7vil7RG98A2sc7zO6ZvTdM7pmOUAZTnJW+NXxqmd41dqJ6mLTXxrPpnV8avaIf5SvL7pndPvPpndJR9Kuu8fePvuiuhorgWjp7Mf/PRjxcFCPDkW31srioCExivv9lcwKEaHsf/7ow2Fl1T/9RkXgEhYElAoCLFtMArxwivDJJ+bR1HTKJdlEoTELCIqgEwVGSQ+hIm0NbK8WXcTEI0UPoa2NbG4y2K00JEWbZavJXkYaqo9CRHS55FcZTjKEk3NKoCYUnSQ0rWxrZbFKbKIhOKPZe1cJKzZSaQrIyULHDZmV5K4xySsDRKWOruanGtjLJXFEmwaIbDLX0hIPBUQPVFVkQkDoUNfSoDgQGKPekoxeGzA4DUvnn4bxzcZrtJyipKfPNy5w+9lnXwgqsiyHNeSVpemw4bWb9psYeq//uQZBoABQt4yMVxYAIAAAkQoAAAHvYpL5m6AAgAACXDAAAAD59jblTirQe9upFsmZbpMudy7Lz1X1DYsxOOSWpfPqNX2WqktK0DMvuGwlbNj44TleLPQ+Gsfb+GOWOKJoIrWb3cIMeeON6lz2umTqMXV8Mj30yWPpjoSa9ujK8SyeJP5y5mOW1D6hvLepeveEAEDo0mgCRClOEgANv3B9a6fikgUSu/DmAMATrGx7nng5p5iimPNZsfQLYB2sDLIkzRKZOHGAaUyDcpFBSLG9MCQALgAIgQs2YunOszLSAyQYPVC2YdGGeHD2dTdJk1pAHGAWDjnkcLKFymS3RQZTInzySoBwMG0QueC3gMsCEYxUqlrcxK6k1LQQcsmyYeQPdC2YfuGPASCBkcVMQQqpVJshui1tkXQJQV0OXGAZMXSOEEBRirXbVRQW7ugq7IM7rPWSZyDlM3IuNEkxzCOJ0ny2ThNkyRai1b6ev//3dzNGzNb//4uAvHT5sURcZCFcuKLhOFs8mLAAEAt4UWAAIABAAAAAB4qbHo0tIjVkUU//uQZAwABfSFz3ZqQAAAAAngwAAAE1HjMp2qAAAAACZDgAAAD5UkTE1UgZEUExqYynN1qZvqIOREEFmBcJQkwdxiFtw0qEOkGYfRDifBui9MQg4QAHAqWtAWHoCxu1Yf4VfWLPIM2mHDFsbQEVGwyqQoQcwnfHeIkNt9YnkiaS1oizycqJrx4KOQjahZxWbcZgztj2c49nKmkId44S71j0c8eV9yDK6uPRzx5X18eDvjvQ6yKo9ZSS6l//8elePK/Lf//IInrOF/FvDoADYAGBMGb7FtErm5MXMlmPAJQVgWta7Zx2go+8xJ0UiCb8LHHdftWyLJE0QIAIsI+UbXu67dZMjmgDGCGl1H+vpF4NSDckSIkk7Vd+sxEhBQMRU8j/12UIRhzSaUdQ+rQU5kGeFxm+hb1oh6pWWmv3uvmReDl0UnvtapVaIzo1jZbf/pD6ElLqSX+rUmOQNpJFa/r+sa4e/pBlAABoAAAAA3CUgShLdGIxsY7AUABPRrgCABdDuQ5GC7DqPQCgbbJUAoRSUj+NIEig0YfyWUho1VBBBA//uQZB4ABZx5zfMakeAAAAmwAAAAF5F3P0w9GtAAACfAAAAAwLhMDmAYWMgVEG1U0FIGCBgXBXAtfMH10000EEEEEECUBYln03TTTdNBDZopopYvrTTdNa325mImNg3TTPV9q3pmY0xoO6bv3r00y+IDGid/9aaaZTGMuj9mpu9Mpio1dXrr5HERTZSmqU36A3CumzN/9Robv/Xx4v9ijkSRSNLQhAWumap82WRSBUqXStV/YcS+XVLnSS+WLDroqArFkMEsAS+eWmrUzrO0oEmE40RlMZ5+ODIkAyKAGUwZ3mVKmcamcJnMW26MRPgUw6j+LkhyHGVGYjSUUKNpuJUQoOIAyDvEyG8S5yfK6dhZc0Tx1KI/gviKL6qvvFs1+bWtaz58uUNnryq6kt5RzOCkPWlVqVX2a/EEBUdU1KrXLf40GoiiFXK///qpoiDXrOgqDR38JB0bw7SoL+ZB9o1RCkQjQ2CBYZKd/+VJxZRRZlqSkKiws0WFxUyCwsKiMy7hUVFhIaCrNQsKkTIsLivwKKigsj8XYlwt/WKi2N4d//uQRCSAAjURNIHpMZBGYiaQPSYyAAABLAAAAAAAACWAAAAApUF/Mg+0aohSIRobBAsMlO//Kk4soosy1JSFRYWaLC4qZBYWFRGZdwqKiwkNBVmoWFSJkWFxX4FFRQWR+LsS4W/rFRb/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////VEFHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAU291bmRib3kuZGUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMjAwNGh0dHA6Ly93d3cuc291bmRib3kuZGUAAAAAAAAAACU=");snd.play();}
_stopRecording();}},1000);},function(err){$('.'+me.name+' .dfield').html('<div class="cff-record-error">'+err.name+'</div>');});}
else
{_stopRecording();}});play_btn.click(function(){if(_load_file())
{play_btn.toggleClass('cff-record-stop-btn');if(play_btn.hasClass('cff-record-stop-btn'))media_ctrl[0].play();else media_ctrl[0].pause();}});}});$.fbuilder.controls['fButton']=function(){};$.extend($.fbuilder.controls['fButton'].prototype,$.fbuilder.controls['ffields'].prototype,{ftype:"fButton",sType:"button",sValue:"button",sLoading:false,sMultipage:false,sOnclick:"",sOnmousedown:"",userhelp:"A description of the section goes here.",show:function()
{var esc=cff_esc_attr,type=this.sType,clss='';if(this.sType=='calculate')
{type='button';clss='calculate-button';}
if(this.sType=='print')
{type='button';}
else if(this.sType=='reset')
{clss='reset-button';}
return'<div class="fields '+esc(this.csslayout)+' '+this.name+' cff-button-field" id="field'+this.form_identifier+'-'+this.index+'"><input id="'+this.name+'" type="'+type+'" value="'+esc(this.sValue)+'" class="field '+clss+'" /><span class="uh">'+this.userhelp+'</span><div class="clearer"></div></div>';},after_show:function()
{var me=this;$('#'+this.name).mousedown(function(){eval(me.sOnmousedown);});$('#'+this.name).click(function()
{var e=$(this),f=e.closest('form'),fid=me.form_identifier;if(e.hasClass('calculate-button'))
{var items=$.fbuilder['forms'][fid].getItems();if(me.sLoading)
{f.find('.cff-processing-form').remove();$('<div class="cff-processing-form"></div>').appendTo(e.closest('#fbuilder'));}
$(document).on('equationsQueueEmpty',function(evt,id){if(id==fid)
{if(me.sLoading)f.find('.cff-processing-form').remove();$(document).off('equationsQueueEmpty');for(var i=0,h=items.length;i<h;i++)
{if(items[i].ftype=='fsummary')
{items[i].update();}}}});$.fbuilder['calculator'].defaultCalc('#'+e.closest('form').attr('id'),false,true);}
if(e.hasClass('reset-button'))
{RESETFORM(e[0].form);}
eval(me.sOnclick);if(me.sType=='print')
{fbuilderjQuery.fbuilder.currentFormId=f.attr('id');PRINTFORM(me.sMultipage);}});}});$.fbuilder.controls['fnumberds']=function(){};$.extend($.fbuilder.controls['fnumberds'].prototype,$.fbuilder.controls['fnumber'].prototype,$.fbuilder.controls['datasource'].prototype,{ftype:"fnumberds",first_time:true,show:function()
{return $.fbuilder.controls['fnumber'].prototype.show.call(this);},after_show:function()
{var me=this;$.fbuilder.controls['fnumber'].prototype.after_show.call(this);$.fbuilder.controls['datasource'].prototype.getData.call(this,function(data)
{var v='';if(typeof data['error']!='undefined')
{alert(data.error);}
else
{if(data.data.length)
{v=data.data[0]['value'];}}
if(me.first_time)
{me.first_time=false;if(typeof me.defaultSelection!='undefined')v=me.defaultSelection;}
me.setVal(v);$('[id="'+me.name+'"]').trigger('cff-data-filled');});},setVal:function(v,nochange)
{this.defaultSelection=v;$.fbuilder.controls['fnumber'].prototype.setVal.call(this,v,nochange);}});$.fbuilder.controls['fhtml']=function(){};$.extend($.fbuilder.controls['fhtml'].prototype,$.fbuilder.controls['ffields'].prototype,{ftype:"fhtml",fcontent:"",show:function()
{var content=this.fcontent;content=content.replace(/\(\s*document\s*\)\.one\(\s*['"]showHideDepEvent['"]/ig,'(window).one("showHideDepEvent"').replace(/\bcurrentFormId\b/ig,'cp_calculatedfieldsf_pform'+this.form_identifier);return'<div class="fields '+cff_esc_attr(this.csslayout)+' '+this.name+' cff-html-field" id="field'+this.form_identifier+'-'+this.index+'"><div id="'+this.name+'" class="dfield">'+content+'</div><div class="clearer"></div></div>';}});$.fbuilder.controls['fcurrencyds']=function(){};$.extend($.fbuilder.controls['fcurrencyds'].prototype,$.fbuilder.controls['fcurrency'].prototype,$.fbuilder.controls['datasource'].prototype,{ftype:"fcurrencyds",first_time:true,show:function()
{return $.fbuilder.controls['fcurrency'].prototype.show.call(this);},after_show:function()
{var me=this;$.fbuilder.controls['fcurrency'].prototype.after_show.call(this);$.fbuilder.controls['datasource'].prototype.getData.call(this,function(data)
{var v='';if(typeof data['error']!='undefined')
{alert(data.error);}
else
{if(data.data.length)
{v=data.data[0]['value'];}}
if(me.first_time)
{me.first_time=false;if(typeof me.defaultSelection!='undefined')v=me.defaultSelection;}
me.setVal(v);$('[id="'+me.name+'"]').trigger('cff-data-filled');});},setVal:function(v,nochange)
{this.defaultSelection=v;$.fbuilder.controls['fcurrency'].prototype.setVal.call(this,v,nochange);}});$.fbuilder.controls['facceptance']=function(){};$.extend($.fbuilder.controls['facceptance'].prototype,$.fbuilder.controls['ffields'].prototype,{title:"Accept terms and conditions",ftype:"facceptance",value:"I accept",required:true,onoff:0,url:"",message:"",show:function()
{var me=this,dlg='',label=me.title;if(!/^\s*$/.test(me.url))
{label='<a href="'+cff_esc_attr($.trim(me.url))+'" target="_blank">'+label+'</a>';}
else if(!/^\s*$/.test(me.message))
{label='<a href="javascript:void(0);" class="cff-open-dlg">'+label+'</a>';dlg+='<div class="cff-dialog hide"><span class="cff-close-dlg"></span><div class="cff-dialog-content">'+me.message+'</div></div>'}
return'<div class="fields '+cff_esc_attr(me.csslayout)+(this.onoff?' cff-switch-container':'')+' '+me.name+' cff-checkbox-field" id="field'+me.form_identifier+'-'+me.index+'"><div class="dfield">'+'<div class="one_column"><label for="'+me.name+'"><input aria-label="'+cff_esc_attr(me.title)+'" name="'+me.name+'" id="'+me.name+'" class="field required" value="'+cff_esc_attr(me.value)+'" vt="'+cff_esc_attr((/^\s*$/.test(me.value))?me.title:me.value)+'" type="checkbox" /> '+
(this.onoff?'<span class="cff-switch"></span>':'')+'<span>'+
cff_html_decode(label)+''+((me.required)?'<span class="r">*</span>':'')+'</span></label></div>'+dlg+'<span class="uh"></span></div><div class="clearer"></div></div>';},after_show:function()
{$(document).on('click','.cff-open-dlg',function(){var dlg=$(this).closest('.fields').find('.cff-dialog'),w=dlg.data('width'),h=dlg.data('height');dlg.removeClass('hide');if('undefined'==typeof w)w=MIN($(this).closest('form').width(),$(window).width(),dlg.width());if('undefined'==typeof h)h=MIN($(this).closest('form').height(),$(window).height(),dlg.height());dlg.data('width',w);dlg.data('height',h);dlg.css({'width':w+'px','height':h+'px','margin-top':(-1*h/2)+'px','margin-left':(-1*w/2)+'px'});});$(document).on('click','.cff-close-dlg',function(){$(this).closest('.cff-dialog').addClass('hide');});},val:function(raw,no_quotes)
{raw=raw||false;no_quotes=no_quotes||false;var e=$('[id="'+this.name+'"]:checked:not(.ignore)');if(e.length)
{var t=$.fbuilder.parseValStr(e[0].value,raw,no_quotes);if(!$.isNumeric(t))t=t.replace(/^"/,'').replace(/"$/,'');}
return(t)?(($.isNumeric(t)&&!no_quotes)?t:'"'+t+'"'):0;}});$.fbuilder.controls['fdatatableds']=function(){};$.extend($.fbuilder.controls['fdatatableds'].prototype,$.fbuilder.controls['ffields'].prototype,$.fbuilder.controls['datasource'].prototype,{ftype:"fdatatableds",title:"Data table",columns:"",html:false,autowidth:false,paging:false,lengthchange:false,ordering:false,scrollx:false,scrolly:'',searching:false,language:'',show:function()
{var me=this;$(document).on('click','#'+this.name+' tbody tr',function(){var i=$(this).data('record');if(typeof i!='undefined')$('#'+me.name).trigger('cff-datatable-click',i);});return'<div class="fields '+cff_esc_attr(this.csslayout)+' '+this.name+' cff-datatable-field" id="field'+this.form_identifier+'-'+this.index+'"><label>'+this.title+'</label><div class="dfield"><div id="'+this.name+'" class="cff-datatable-container"></div></div><div class="clearer"></div></div>';},after_show:function()
{var me=this;$.fbuilder.controls['datasource'].prototype.getData.call(this,function(data)
{var str='';if(typeof data['error']!='undefined')
{alert(data.error);}
else
{var settings={'lengthChange':me.lengthchange,'ordering':me.ordering,'paging':me.paging,'scrollX':me.scrollx,'scrollY':me.scrolly,'searching':me.searching,'createdRow':function(row,data,dataIndex){$(row).attr('data-record',dataIndex);$(row).find('td').each(function(){if(!me.html)
$(this).html($('<div></div>').text($(this).html()).html());});}},columns=me.columns.split(/[\n\r]/),tmp;if(me.autowidth)settings['autoWidth']=me.autowidth;settings['data']=data.data;settings['columns']=[];for(var i in columns)
{tmp=$.trim(columns[i]);if(tmp.length)
{tmp=tmp.split('|');if(1<tmp.length)
{for(var j in tmp)tmp[j]=$.trim(tmp[j]);settings['columns'].push({'title':tmp.shift(),'data':tmp.join('|')});}}}
if(me.language.length)settings['language']={'url':me.language};$('.'+me.name+' .dfield #'+me.name).html('<table style="width:100%" class="display"></table>');try
{$.fn.dataTableExt.errMode='ignore';$('.'+me.name+' .dfield table').DataTable(settings);$('#'+me.name).trigger('change').trigger('cff-data-filled');}catch(err){$('.'+me.name+' .dfield').html('');console.log(err);}}});},val:function(raw,no_quotes){no_quotes=no_quotes||false;var e=$('[id="'+this.name+'"]:not(.ignore)');if(e.length){return no_quotes?e.html():JSON.stringify(e.html());}
return 0;}});$.fbuilder.controls['fdateds']=function(){};$.extend($.fbuilder.controls['fdateds'].prototype,$.fbuilder.controls['fdate'].prototype,$.fbuilder.controls['datasource'].prototype,{ftype:"fdateds",predefined:"",predefinedClick:false,first_time:true,excludeColumn:"",includeColumn:"",precedenceColumn:"exclude",invalidDatesDS:[],validDatesDS:[],show:function()
{return $.fbuilder.controls['fdate'].prototype.show.call(this);},after_show:function()
{var me=this;function _compare_dates(d1,d2)
{try
{if(typeof d2=='string'){var format=me.dformat.replace(/\//g,me.dseparator).replace(/y{4}/,'yy');d2=$.datepicker.parseDate(format,d2);}
return(d1.getDate()==d2.getDate()&&d1.getMonth()==d2.getMonth()&&d1.getFullYear()==d2.getFullYear());}catch(err){}
return false;}
function _get_date(d,l,all)
{var result=[];all=all||false;for(var i in l)
{if(_compare_dates(d,l[i]))
{result.push(l[i]);if(!all)return result;}}
return result;}
if(me.first_time)
{me.first_time=false;me._oldValidateDate=me._validateDate;me._oldValidateTime=me._validateDate;me._validateDate=function(d){var me=this,tmp;d=d||$('#'+me.name+'_date').datepicker('getDate');if(!me._oldValidateDate(d))return false;if(me.validDatesDS.length)
{tmp=_get_date(d,me.validDatesDS);if(!tmp.length)return false;if(me.precedenceColumn=='include')return true;}
tmp=_get_date(d,me.invalidDatesDS);if(tmp.length&&(!me.showTimepicker||!(tmp[0].getHours()&&tmp[0].getMinutes())))return false;return true;};me._validateTime=function(){var me=this,tmp,d=DATEOBJ(me.val());if(!me._oldValidateTime())return false;tmp=_get_date(d,me.invalidDatesDS,true);for(var i in tmp)
{if(d.getHours()==tmp[i].getHours()&&d.getMinutes()==tmp[i].getMinutes())return false;}
return true;};}
$.fbuilder.controls['fdate'].prototype.after_show.call(this);$.fbuilder.controls['datasource'].prototype.getData.call(this,function(data)
{if(typeof data['error']!='undefined')
{alert(data.error);}
else
{me.invalidDatesDS=[];me.validDatesDS=[];if(data.data.length)
{for(var i in data.data)
{if(me.excludeColumn in data.data[i])
{me.invalidDatesDS.push(DATEOBJ(data.data[i][me.excludeColumn],me.dformat+(me.showTimepicker?'hh:ii':'')));}
if(me.includeColumn in data.data[i])
{me.validDatesDS.push(data.data[i][me.includeColumn],me.dformat+(me.showTimepicker?'hh:ii':''));}}}}
$('[id="'+me.name+'"]').trigger('cff-data-filled');});},setVal:function(v,nochange)
{this.defaultSelection=v;$.fbuilder.controls['fdate'].prototype.setVal.call(this,v,nochange);}});$.fbuilder.controls['fhtmlds']=function(){};$.extend($.fbuilder.controls['fhtmlds'].prototype,$.fbuilder.controls['fhtml'].prototype,$.fbuilder.controls['datasource'].prototype,{ftype:"fhtmlds",first_time:true,sanitize:function(v)
{try{var HtmlSanitizer=new function(){var k={A:!0,ABBR:!0,B:!0,BLOCKQUOTE:!0,BODY:!0,BR:!0,CENTER:!0,CODE:!0,DD:!0,DIV:!0,DL:!0,DT:!0,EM:!0,FONT:!0,H1:!0,H2:!0,H3:!0,H4:!0,H5:!0,H6:!0,HR:!0,I:!0,IMG:!0,LABEL:!0,LI:!0,OL:!0,P:!0,PRE:!0,SMALL:!0,SOURCE:!0,SPAN:!0,STRONG:!0,SUB:!0,SUP:!0,TABLE:!0,TBODY:!0,TR:!0,TD:!0,TH:!0,THEAD:!0,UL:!0,U:!0,VIDEO:!0},l={FORM:!0,"GOOGLE-SHEETS-HTML-ORIGIN":!0},m={align:!0,color:!0,controls:!0,height:!0,href:!0,id:!0,src:!0,style:!0,target:!0,title:!0,type:!0,width:!0},n={"background-color":!0,color:!0,"font-size":!0,"font-weight":!0,"text-align":!0,"text-decoration":!0,width:!0},g="http: https: data: m-files: file: ftp: mailto: pw:".split(" "),r={href:!0,action:!0},t=new DOMParser;this.SanitizeHtml=function(a,p){function q(b){if(b.nodeType==Node.TEXT_NODE)var d=b.cloneNode(!0);else if(b.nodeType==Node.ELEMENT_NODE&&(k[b.tagName]||l[b.tagName]||p&&b.matches(p))){d=l[b.tagName]?f.createElement("DIV"):f.createElement(b.tagName);for(var a=0;a<b.attributes.length;a++){var c=b.attributes[a];if(m[c.name])if("style"==c.name)for(c=0;c<b.style.length;c++){var e=b.style[c];n[e]&&d.style.setProperty(e,b.style.getPropertyValue(e))}else{if(r[c.name]){if(e=-1<c.value.indexOf(":")){a:{e=c.value;for(var h=0;h<g.length;h++)if(0==e.indexOf(g[h])){e=!0;break a}e=!1}e=!e}if(e)continue}d.setAttribute(c.name,c.value)}}for(a=0;a<b.childNodes.length;a++)c=q(b.childNodes[a]),d.appendChild(c,!1);if(("SPAN"==d.tagName||"B"==d.tagName||"I"==d.tagName||"U"==d.tagName)&&""==d.innerHTML.trim())return f.createDocumentFragment()}else d=f.createDocumentFragment();return d}a=a.trim();if(""==a||"<br>"==a)return"";-1==a.indexOf("<body")&&(a="<body>"+a+"</body>");var f=t.parseFromString(a,"text/html");"BODY"!==f.body.tagName&&f.body.remove();"function"!==typeof f.createElement&&f.createElement.remove();return q(f.body).innerHTML.replace(/<br[^>]*>(\S)/g,"<br>\n$1").replace(/div><div/g,"div>\n<div")};this.AllowedTags=k;this.AllowedAttributes=m;this.AllowedCssStyles=n;this.AllowedSchemas=g};return HtmlSanitizer.SanitizeHtml(v);}catch(err){}
return v;},show:function()
{return $.fbuilder.controls['fhtml'].prototype.show.call(this);},after_show:function()
{var me=this;$.fbuilder.controls['datasource'].prototype.getData.call(this,function(data)
{var v='';if(typeof data['error']!='undefined')
{alert(data.error);}
else
{if(data.data.length)
{v=data.data[0]['value'];}}
$('#'+me.name).html(me.sanitize(v)).trigger('cff-data-filled');});}});$.fbuilder.controls['fqrcode']=function(){};$.extend($.fbuilder.controls['fqrcode'].prototype,$.fbuilder.controls['ffields'].prototype,{title:"",ftype:"fqrcode",predefined:"",required:false,readonly:false,size:"medium",show:function()
{this.predefined=this._getAttr('predefined');return'<div class="fields '+cff_esc_attr(this.csslayout)+' '+this.name+' cff-qrcode-field" id="field'+this.form_identifier+'-'+this.index+'"><label for="'+this.name+'">'+this.title+''+((this.required)?"<span class='r'>*</span>":"")+'</label><div class="dfield">'+'<div id="'+this.name+'_qrcontainer" class="'+this.size+' cff-qrcode-container"></div>'+'<input aria-label="'+cff_esc_attr(this.title)+'" id="'+this.name+'" name="'+this.name+'"'+' class="field '+this.size+((this.required)?" required":"")+'" '+' '+((this.readonly)?'readonly':'')+' type="text" value="'+cff_esc_attr(this.predefined)+'" /><span class="uh">'+this.userhelp+'</span></div><div class="clearer"></div></div>';},after_show:function()
{var me=this;$('#'+me.name).on('focus',function(){$('#fbuilder .cff-qrcode-container[id!="'+me.name+'_qrcontainer"]').html('');if(typeof Html5QrcodeScanner!='undefined'&&$('#fbuilder .cff-qrcode-container[id="'+me.name+'_qrcontainer"]').html()==''){(new Html5QrcodeScanner(me.name+'_qrcontainer',{fps:10},false)).render(function(decodedText,decodedResult){me.setVal(decodedText);},function(error){console.warn(`Code scan error = ${error}`);});}});},val:function(raw,no_quotes)
{raw=true;no_quotes=no_quotes||false;var e=$('[id="'+this.name+'"]:not(.ignore)');if(e.length)return $.fbuilder.parseValStr(e.val(),raw,no_quotes);return'';}});$.fbuilder.controls['fCalculated']=function(){};$.extend($.fbuilder.controls['fCalculated'].prototype,$.fbuilder.controls['ffields'].prototype,{title:"Untitled",ftype:"fCalculated",predefined:"",required:false,size:"medium",min:"",max:"",eq:"",suffix:"",prefix:"",decimalsymbol:".",groupingsymbol:"",dependencies:[{'rule':'','complex':false,'fields':['']}],readonly:true,currency:false,noEvalIfManual:true,formatDynamically:false,dynamicEval:true,hidefield:false,_onEquationsQueueEmpty:function(evt)
{var me=evt.data.obj;if(!me.noEvalIfManual)$('[id="'+me.name+'"]').data('manually',0);},configuration:function()
{var me=this;return{"suffix":me.suffix,"prefix":me.prefix,"groupingsymbol":me.groupingsymbol,"decimalsymbol":me.decimalsymbol,"currency":me.currency};},show:function()
{this.predefined=this._getAttr('predefined');return'<div class="fields '+cff_esc_attr(this.csslayout)+' '+this.name+' cff-calculated-field" id="field'+this.form_identifier+'-'+this.index+'" style="'+((this.hidefield)?'padding:0;margin:0;border:0;opacity:0;width:0;height:0;overflow:hidden;':'')+'"><label '+(!this.hidefield?'for="'+this.name+'"':'')+'>'+this.title+''+((this.required)?'<span class="r">*</span>':'')+'</label><div class="dfield"><input aria-label="'+cff_esc_attr(this.title)+'" id="'+this.name+'" name="'+this.name+'" '+((this.readonly)?' readonly ':'')+' '+((!/^\s*$/.test(this.min))?'min="'+cff_esc_attr($.fbuilder.parseVal(this._getAttr('min'),this.thousandSeparator,this.decimalSymbol))+'" ':'')+((!/^\s*$/.test(this.max))?' max="'+cff_esc_attr($.fbuilder.parseVal(this._getAttr('max'),this.thousandSeparator,this.decimalSymbol))+'" ':'')+' class="codepeoplecalculatedfield field '+this.size+((this.required)?" required":"")+'" type="'+((this.hidefield)?'hidden':'text')+'" value="'+cff_esc_attr(this.predefined)+'" />'+((!this.hidefield)?'<span class="uh">'+this.userhelp+'</span>':'')+'</div><div class="clearer"></div></div>';},after_show:function()
{var me=this,dependencies=[];$.each(me.dependencies,function(i,d)
{d.rule=d.rule.replace(/^\s+/,'').replace(/\s+$/,'');if(d.rule!=''&&d.fields.length){var fields=[];$.each(d.fields,function(j,f){if(f!='')
{fields.push(f);}});if(fields.length){dependencies.push({'rule':d.rule,'fields':fields});}}});me.dependencies=dependencies;var eq=me.eq;eq=eq.replace(/\n/g,' ').replace(/fieldname(\d+)/g,"fieldname$1"+me.form_identifier).replace(/form_identifier/g,'\''+this['form_identifier']+'\'').replace(/;\s*\)/g,')').replace(/;\s*$/,'');if(!/^\s*$/.test(eq))
{$.fbuilder.calculator.addEquation(me,eq,dependencies,me.form_identifier);}
var e=$('[id="'+me.name+'"]');e.bind('calcualtedfield_changed',{obj:me},function(evt){if($.fbuilder['calculator'].getDepList(evt.data.obj.name,{value:evt.data.obj.val(),raw:evt.data.obj.val(true)},evt.data.obj.dependencies))
{$.fbuilder.showHideDep({'formIdentifier':evt.data.obj.form_identifier,'fieldIdentifier':evt.data.obj.name});}}).on('keyup',function(){if(!me.readonly)
{e.data('manually',1);e.data('bk',e.val());$(document).off('equationsQueueEmpty',me._onEquationsQueueEmpty);$(document).one('equationsQueueEmpty',{obj:me},me._onEquationsQueueEmpty);e.trigger('calcualtedfield_changed');}}).on('change',function(){if(e.data('manually')&&e.data('manually')==1&&me.formatDynamically)
{var v=(me.val(true,true)+'').replace(new RegExp('[^\\-\\d'+me.decimalsymbol.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,'\\$&')+']','g'),'').replace(/[^\d\-]/g,'.');this.value=$.fbuilder.calculator.format(v,me.configuration());try
{$(this).valid();}catch(err){}}else if($(this).hasClass('cpefb_error')){try
{$(this).valid();}catch(err){}}});$('#cp_calculatedfieldsf_pform'+me.form_identifier).bind('reset',function(){e.removeData('manually');});},showHideDep:function(toShow,toHide,hiddenByContainer,interval)
{if(typeof hiddenByContainer=='undefined')hiddenByContainer={};var me=this,result=[];if($.fbuilder['calculator'].getDepList(me.name,{value:me.val(),raw:me.val(true)},me.dependencies))
{var item=$('#'+me.name),identifier=me.form_identifier,isHidden=(typeof toHide[me.name]!='undefined'||typeof hiddenByContainer[me.name]!='undefined'),d,n,dep,clearRef=function(id){if(typeof toShow[id]!='undefined')
{delete toShow[id]['ref'][me.name];if($.isEmptyObject(toShow[id]['ref']))
delete toShow[id];}},hideField=function(id){$('[id*="'+id+'"],.'+id).closest('.fields').hide();$('[id*="'+id+'"]:not(.ignore)').addClass('ignore');toHide[id]={};};try
{d=item.attr('dep');if(typeof d!='undefined'&&!/^\s*$/.test(d))d=d.split(',');else d=[];n=item.attr('notdep');if(typeof n!='undefined'&&!/^\s*$/.test(n))n=n.split(',');else n=[];if(isHidden)
{n=n.concat(d);d=[];}
for(i=0;i<d.length;i++)
{if(!/fieldname/i.test(d[i]))continue;dep=d[i]+identifier;delete toHide[dep];if(typeof toShow[dep]=='undefined')
toShow[dep]={'ref':{}};toShow[dep]['ref'][me.name]=1;if(!(dep in hiddenByContainer))
{$('[id*="'+dep+'"],.'+dep).closest('.fields').fadeIn(interval||0);$('[id*="'+dep+'"].ignore').removeClass('ignore');}
if($.inArray(dep,result)==-1)result.push(dep);}
for(i=0;i<n.length;i++)
{if(!/fieldname/i.test(n[i]))continue;dep=n[i]+identifier;clearRef(dep);if(typeof toShow[dep]=='undefined'&&typeof toHide[dep]=='undefined')hideField(dep);if($.inArray(dep,result)==-1)result.push(dep);}}
catch(e){}}
return result;},val:function(raw,no_quotes)
{raw=raw||false;no_quotes=no_quotes||false;var e=$('[id="'+this.name+'"]:not(.ignore)');if(e.length)
{var v=e.val();if(raw)return $.fbuilder.parseValStr(v,raw,no_quotes);v=$.trim(v);v=v.replace(new RegExp($.fbuilder['escapeSymbol'](this.prefix),'g'),'').replace(new RegExp($.fbuilder['escapeSymbol'](this.suffix),'g'),'');return $.fbuilder.parseVal(v,this.groupingsymbol,this.decimalsymbol,no_quotes);}
return 0;},setVal:function(v,nochange)
{var e=$("[id='"+this.name+"']"),bk=e.data('bk');e.val(v);if(bk!=v){e.trigger('calcualtedfield_changed');if(!nochange)e.change();}}});$.fbuilder['extend_window']=function(prefix,obj)
{for(method in obj)
{window[prefix+method]=(function(m)
{return function()
{return m.obj[m.method_name].apply(m.obj,arguments);};})({"method_name":method,'obj':obj});}};$.fbuilder['calculator']=(function()
{var validators=[];if(typeof $.fbuilder['modules']!='undefined')
{var modules=$.fbuilder['modules'];for(var module in modules)
{if(typeof modules[module]['callback']!='undefined')
{modules[module]['callback']();}
if(typeof modules[module]['validator']!='undefined')
{validators.push(modules[module]['validator']);}}}
_validate_result=function(v)
{if(validators.length)
{var h=validators.length;while(h--)
{if(validators[h](v))
{return true;}}}
else
{return true;}
return false;};_eval=function(eq)
{return eval(eq);};_calculate=function(eq,suffix,__ME__)
{var e=$.fbuilder['forms'][suffix].getItem(__ME__),__ME__=e.val();if($('#'+e.name).data('manually')==1)return __ME__;var _match,field_regexp=new RegExp('(fieldname\\d+'+suffix+')(_[cr]b\\d+)?(\\|[rnv])?([\\D\\b])','i');$.fbuilder['currentFormId']=$.fbuilder['forms'][suffix].formId;eq='('+eq+')';while(_match=field_regexp.exec(eq))
{var field=$.fbuilder['forms'][suffix].getItem(_match[1]),v='';if(field||(_match[3]&&_match[3]=='|n'))
{if(_match[3]&&_match[3]=='|n')
{v='"'+_match[1].match(/fieldname\d+/)[0]+'"';}
else
{v=field.val((_match[3])?((_match[3]=='|v')?'vt':((_match[3]=='|r')?true:false)):false);if(typeof v=='object'&&typeof window.JSON!='undefined')v=JSON.stringify(v);else if($.isNumeric(v))v='('+v+')';}}
eq=eq.replace(_match[0],v+''+_match[4]);}
try
{var r=_eval(eq.replace(/^\(/,'').replace(/\)$/,'').replace(/\b__ME__\b/g,__ME__));return(typeof r!='undefined'&&_validate_result(r))?r:false;}
catch(e)
{if(typeof console!='undefined'){console.log(eq);console.log(e.message);}
return false;}};_checkValueThrowingEquation=function(t)
{if(typeof t.attr('data-timeout')!='undefined')clearTimeout(t.attr('data-timeout'));if(typeof t.attr('data-previousvalue')=='undefined')t.attr('data-previousvalue',t.val());else
{if(t.val()==t.attr('data-previousvalue'))
{t.removeAttr('data-timeout');obj.Calculate(t[0]);return;}
t.attr('data-previousvalue',t.val());}
t.attr('data-timeout',setTimeout(_checkValueThrowingEquation,500,t));};var CalcFieldClss=function(){};CalcFieldClss.prototype={processing_queue:{},pendings:{},queued_equations:{},addPending:function(form_identifier)
{if(!(form_identifier in this.pendings))this.pendings[form_identifier]=1;else this.pendings[form_identifier]++;},removePending:function(form_identifier)
{if((form_identifier in this.pendings)&&this.pendings[form_identifier])this.pendings[form_identifier]--;},thereIsPending:function(form_identifier)
{if(form_identifier in this.pendings)return this.pendings[form_identifier];return 0;},addEquation:function(fieldObj,equation,dependencies,form_identifier)
{var equation_result=$('[id="'+fieldObj.name+'"]');if(equation_result.length)
{var form=equation_result[0].form,equationObj,field,regexp=new RegExp('(fieldname\\d+)_'),match;if(typeof form.equations=='undefined')form['equations']=[];var i,j=-1,h=form.equations.length;for(i=0;i<h;i++)
{if(form.equations[i].result==fieldObj.name)break;if(form.equations[i].equation.match(fieldObj.name)){j=i;break;}}
if(i==h||j!=-1)
{equationObj={'result':fieldObj.name,'resultField':fieldObj,'equation':equation,'conf':fieldObj.configuration(),'dep':dependencies,'identifier':form_identifier};form.equations.splice(i,0,equationObj);while(match=/(pdfpagesnumber|imgdimension|viewfile|csvtojson)\s*\(\s*fieldname\d+_\d+(\|n)\b/i.exec(equation)){equation=equation.replace(match[2],match[0].replace('|n',''));}
equation=equation.replace(/fieldname\d+_\d+\|n\b/g,'');while(match=regexp.exec(equation))
{field=$.fbuilder['forms'][form_identifier].getItem(match[1]+form_identifier);if(field)
{if(typeof field.usedInEquations=='undefined')field.usedInEquations=[];field.usedInEquations.push(equationObj);}
equation=equation.replace(new RegExp(match[0],'g'),'');}}}},enqueueEquation:function(form_identifier,equations)
{if(typeof this.queued_equations[form_identifier]=='undefined')
this.queued_equations[form_identifier]=[];var queue=this.queued_equations[form_identifier],f;for(var i=0,h=equations.length;i<h;i++)
{f=-1;for(var j=0,k=queue.length;j<k;j++)
{if(queue[j].result==equations[i].result)break;if(queue[j].equation.match(equations[i].result)){f=j;break;}}
if(j==k||f!=-1)
{queue.splice(j,0,equations[i]);}}},getDepList:function(calculated_field,values,dependencies)
{var list=[],list_h=[];if(values.value!==false&&dependencies.length)
{for(var i=0,h=dependencies.length;i<h;i++)
{try
{var rule=eval(dependencies[i].rule.replace(/value\|r/gi,values.raw).replace(/value/gi,values.value));$.each(dependencies[i].fields,function(j,e)
{if(e!='')
{if(rule)
{var k=$.inArray(e,list_h);while(k!=-1)
{list_h.splice(k,1);k=$.inArray(e,list_h);}
if($.inArray(e,list)==-1)list.push(e);}
else
{if($.inArray(e,list)==-1)list_h.push(e);}}});}
catch(e)
{if(typeof console!='undefined')console.log(e.message);continue;}}}
$('[id="'+calculated_field+'"]').attr('dep',list.join(',')).attr('notdep',list_h.join(','));return list.length||list_h.length;},defaultCalc:function(form,enqueued,force_all)
{var dep=false;form=$(form);enqueued=enqueued||false;force_all=force_all||false;if(form.length)
{var fSec=form.attr('id').match(/_\d+$/)[0];if(enqueued)
{this.processQueue(fSec);}
else if(typeof form[0].equations!='undefined')
{if(force_all){this.queued_equations[fSec]=form[0].equations.slice(0);}else{var _dynamicEquations=[];for(var i=0,q=form[0].equations.slice(0),h=q.length;i<h;i++){if(getField(q[i].result)['dynamicEval'])
_dynamicEquations.push(q[i]);}
this.queued_equations[fSec]=_dynamicEquations;}
this.processQueue(fSec);}
$(form).trigger('cpcff_default_calc');}},Calculate:function(field)
{if(field.id==undefined)return;var id=field.id.replace(/_[cr]b\d+$/i,''),fSec=id.match(/(_\d+)?_\d+$/),item,me=this;if(fSec)
{fSec=(typeof fSec[1]!='undefined')?fSec[1]:fSec[0];item=$.fbuilder['forms'][fSec].getItem(id);if(item&&typeof item['usedInEquations']!='undefined')
{for(var i in item.usedInEquations){if(getField(item.usedInEquations[i].result)['dynamicEval'])
me.enqueueEquation(fSec,[item.usedInEquations[i]]);}
me.processQueue(fSec);}}},processQueue:function(fSec)
{var me=this;if(fSec in me.processing_queue&&me.processing_queue[fSec])
{setTimeout((function(fSec){if(fSec in me.processing_queue&&me.processing_queue[fSec]){me.processing_queue[fSec]=false;me.processQueue(fSec);}})(fSec),(typeof CFF_PROCESS_QUEUE_INTERVAL!='undefined')?CFF_PROCESS_QUEUE_INTERVAL:3000);return;}
me.processing_queue[fSec]=true;if(typeof me.queued_equations[fSec]!='undefined')
{var queue=me.queued_equations[fSec],eq_obj;while(queue.length)
{eq_obj=queue.shift();$.fbuilder['currentEq']=eq_obj;var field=$('[id="'+eq_obj.result+'"]'),result=_calculate(eq_obj.equation,eq_obj.identifier,eq_obj.result),bk=field.data('bk');field.val((result!==false)?me.format(result,eq_obj.resultField.configuration()):'');if(bk!=field.val())
{field.data('bk',field.val());field.trigger('calcualtedfield_changed');field.change();}}}
me.processing_queue[fSec]=false;if(!me.thereIsPending(fSec))$(document).trigger('equationsQueueEmpty',[fSec]);},format:function(value,config)
{config=$.extend({},config);if(!/^\s*$/.test(value))
{var symbol='',isNumeric=false;if($.isNumeric(value)&&!/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)/.test(value))
{isNumeric=true;if(value<0)symbol='-';var parts=value.toString().replace("-","").split("."),counter=0,str='';if(config.groupingsymbol)
{for(var i=parts[0].length-1;i>=0;i--){counter++;str=parts[0][i]+str;if(counter%3==0&&i!=0)str=config.groupingsymbol+str;}
parts[0]=str;}
if(!('decimalsymbol'in config))config.decimalsymbol='.';value=parts.join(config.decimalsymbol);}
if(config.currency&&!isNumeric)
{delete config.prefix;delete config.suffix;}
if(config.prefix)
{if(!config.currency)
{value=symbol+value;symbol='';}
value=config.prefix+value;}
if(config.suffix)value+=config.suffix;value=symbol+value;}
return value;},unformat:function(field)
{var escapeSymbol=$.fbuilder.escapeSymbol;var eq=field[0].form.equations,v=field.val();for(var i=0,h=eq.length;i<h;i++)
{if(eq[i].result==field[0].id)
{var c=eq[i].resultField.configuration();if(c.prefix&&!/^\s*$/.test(c.prefix))
{v=v.replace(new RegExp("^"+escapeSymbol(c.prefix)),'');}
if(c.suffix&&!/^\s*$/.test(c.suffix))
{v=v.replace(new RegExp(escapeSymbol(c.suffix)+"$"),'');}
if(!/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)/.test(v))
{if(c.groupingsymbol&&!/^\s*$/.test(c.groupingsymbol))
{v=v.replace(new RegExp(escapeSymbol(c.groupingsymbol),'g'),'');}
if(c.decimalsymbol&&!/^\s*$/.test(c.decimalsymbol))
{v=v.replace(new RegExp(escapeSymbol(c.decimalsymbol),'g'),'.');}}}}
return v;}};var obj=new CalcFieldClss();$(document).on('keyup change blur','[id="fbuilder"] :input,[id="fbuilder"] .cff-datatable-field .cff-datatable-container',function(evt)
{var t=$(evt.target),f=t.closest('form'),evalequations=f.attr('data-evalequations'),evalequationsevent=f.attr('data-evalequationsevent');if(typeof evalequations!='undefined'&&evalequations*1==0&&(!(t.hasClass('codepeoplecalculatedfield')&&evt.type=='change')||(t.hasClass('codepeoplecalculatedfield')&&t.data('manually')==1)))
{return;}
if(evt.type=='keyup')
{if('undefined'!=typeof evalequationsevent&&evalequationsevent*1==1)
{return;}
if(evt.keyCode&&(evt.keyCode>=33&&evt.keyCode<=40))return;_checkValueThrowingEquation(t);}
else
{if(((t.prop('tagName')=='INPUT'&&/(text|number|email|password)/.test(t.attr('type').toLowerCase())||t.prop('tagName')=='TEXTAREA')&&evt.type!='change'))
{return;}
obj.Calculate(t[0]);}});$(document).on('showHideDepEvent',function(evt,form_identifier)
{var f,evalequations,first_time;if(form_identifier)f=$('#'+form_identifier);else f=$('[id*="cp_calculatedfieldsf_pform_"]:eq(0)');if(f.length)
{first_time=(typeof f.data('first_time')=='undefined');f.data('first_time',0);evalequations=f.attr('data-evalequations');if(typeof evalequations=='undefined'||evalequations*1==1)
{if(first_time)obj.defaultCalc('#'+f.attr('id'));else obj.defaultCalc('#'+f.attr('id'),true);}}});return obj;})();try{!function(a){function f(a,b){if(!(a.originalEvent.touches.length>1)){a.preventDefault();var c=a.originalEvent.changedTouches[0],d=document.createEvent("MouseEvents");d.initMouseEvent(b,!0,!0,window,1,c.screenX,c.screenY,c.clientX,c.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(d)}}if(a.support.touch="ontouchend"in document,a.support.touch){var e,b=a.ui.mouse.prototype,c=b._mouseInit,d=b._mouseDestroy;b._touchStart=function(a){var b=this;!e&&b._mouseCapture(a.originalEvent.changedTouches[0])&&(e=!0,b._touchMoved=!1,f(a,"mouseover"),f(a,"mousemove"),f(a,"mousedown"))},b._touchMove=function(a){e&&(this._touchMoved=!0,f(a,"mousemove"))},b._touchEnd=function(a){e&&(f(a,"mouseup"),f(a,"mouseout"),this._touchMoved||f(a,"click"),e=!1)},b._mouseInit=function(){var b=this;b.element.bind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,"_touchMove"),touchend:a.proxy(b,"_touchEnd")}),c.call(b)},b._mouseDestroy=function(){var b=this;b.element.unbind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,"_touchMove"),touchend:a.proxy(b,"_touchEnd")}),d.call(b)}}}(jQuery);}catch(err){}if(typeof $.fn['fbuilder_serializeObject']=='undefined')
{$.fn.fbuilder_serializeObject=function()
{var o={},a=this.serializeArray();$.each(a,function(){if(/^fieldname\d+_\d+(\[\])?$/.test(this.name))this.name=this.name.match(/fieldname\d+/)[0];else return;if(o[this.name]){if(!o[this.name].push){o[this.name]=[o[this.name]];}
o[this.name].push(this.value||'');}else{o[this.name]=this.value||'';}});return o;};}
$.fn.fbuilder_localstorage=function(){var form=this,id=form.attr('id'),sq=(typeof id=='undefined')?1:id.replace(/[^\d]/g,''),localStore_obj,fields;if(sq=='')sq=1;localStore_obj=new $.fbuilder_localstorage(form,true);$(document).on('change','#'+id+' *',function(evt){if(typeof this['id']!='undefined'&&/^fieldname\d+_\d+$/i.test(this.id)&&typeof this['value']!='undefined')
{localStore_obj.set_fields();}});form.on('submit',function(){localStore_obj.clear_fields();});fields=localStore_obj.get_fields();if(!$.isEmptyObject(fields))
{if(typeof cpcff_default=='undefined')cpcff_default={};if(typeof cpcff_default[sq]=='undefined')cpcff_default[sq]={};cpcff_default[sq]=$.extend(cpcff_default[sq],fields);}
return this;}
$.fbuilder_localstorage=function(form,debug){this.form=form;this.id=form.attr('id')+'_'+form.find('[name="cp_calculatedfieldsf_id"]').val();this.debug=(typeof debug!='undefined'&&debug)?true:false;};$.fbuilder_localstorage.prototype=(function(){var is_available;function _log(mssg)
{if(typeof console!='undefined')console.log(mssg);};return{is_available:function(){if(typeof is_available!='undefined')return is_available;try{var storage=window['localStorage'],x='__storage_test__';storage.setItem(x,x);storage.removeItem(x);is_available=true;return true;}
catch(e){if(this.debug)_log('localStorage object is not available');is_available=false;return e instanceof DOMException&&(e.code===22||e.code===1014||e.name==='QuotaExceededError'||e.name==='NS_ERROR_DOM_QUOTA_REACHED')&&storage.length!==0;}},get_fields:function(){try{if(typeof this.fields=='undefined')this.fields=JSON.parse(localStorage.getItem(this.id));return this.fields;}catch(err){_log('Error reading the fields.');_log(err);}},set_fields:function(){try{this.fields=this.form.fbuilder_serializeObject();localStorage.setItem(this.id,JSON.stringify(this.fields));}catch(err){_log('Error saving the fields.');_log(err);}},clear_fields:function(){try{localStorage.removeItem(this.id);}catch(err){_log('Error deleting the fields.');_log(err);}}};})();$.fbuilder.generate_form=function(fnum){try{var cp_calculatedfieldsf_fbuilder_config=window["cp_calculatedfieldsf_fbuilder_config"+fnum];if(cp_calculatedfieldsf_fbuilder_config&&$("#fbuilder"+fnum).length&&$("#fbuilder"+fnum).attr('data-processed')==undefined)
{if($("#fbuilder"+fnum).is(':visible'))
{var f=$("#fbuilder"+fnum).fbuilder((typeof cp_calculatedfieldsf_fbuilder_config.obj=='string')?$.parseJSON(cp_calculatedfieldsf_fbuilder_config.obj):cp_calculatedfieldsf_fbuilder_config.obj);f.attr('data-processed',1);f.fBuild.loadData("form_structure"+fnum);}
else
{$.fbuilder.form_become_visible("#fbuilder"+fnum,(function(n){return function(){$.fbuilder.generate_form(n);};})(fnum));}}}catch(e){if(typeof console!='undefined')console.log(e);}};$.fbuilder.form_become_visible=function(element,callback){if(!('hidden_forms'in $.fbuilder))$.fbuilder.hidden_forms=[];$.fbuilder.hidden_forms.push({'element':element,'callback':callback});if('form_become_visible_interval'in $.fbuilder)clearInterval($.fbuilder['form_become_visible_interval']);$.fbuilder['form_become_visible_interval']=setInterval(function(){for(var i=$.fbuilder.hidden_forms.length-1;0<=i;i--)
{if($($.fbuilder.hidden_forms[i]['element']).is(':visible'))
{$.fbuilder.hidden_forms[i]['callback'].call();$.fbuilder.hidden_forms.splice(i,1);}}
if($.fbuilder.hidden_forms.length==0)clearInterval($.fbuilder['form_become_visible_interval']);},500);};}
var fcount=1;var fnum="_"+fcount;while(typeof window["cp_calculatedfieldsf_fbuilder_config"+fnum]!='undefined'||fcount<10)
{$.fbuilder.generate_form(fnum);fcount++;fnum="_"+fcount;}})(fbuilderjQuery);};fbuilderjQuery(fbuilderjQuery.fbuilderjQueryGenerator);fbuilderjQuery(window).on('load',fbuilderjQuery.fbuilderjQueryGenerator);fbuilderjQuery(document).on('elementor/popup/show',function(event,id,instance){var popup=fbuilderjQuery('[data-elementor-type="popup"]');if(popup.length){var psequence=fbuilderjQuery('[name="cp_calculatedfieldsf_pform_psequence"]'),fnum,flist;if(psequence.length){fnum=psequence.val();if(popup.find('#fieldlist'+fnum+':empty').length){popup.find("#fbuilder"+fnum).removeAttr('data-processed');fbuilderjQuery.fbuilderjQueryGenerator();}}}});
/*! Select2 4.0.13 | https://github.com/select2/select2/blob/master/LICENSE.md */
!function(n){"function"==typeof define&&define.amd?define(["jquery"],n):"object"==typeof module&&module.exports?module.exports=function(e,t){return void 0===t&&(t="undefined"!=typeof window?require("jquery"):require("jquery")(e)),n(t),t}:n(jQuery)}(function(u){var e=function(){if(u&&u.fn&&u.fn.select2&&u.fn.select2.amd)var e=u.fn.select2.amd;var t,n,r,h,o,s,f,g,m,v,y,_,i,a,b;function w(e,t){return i.call(e,t)}function l(e,t){var n,r,i,o,s,a,l,c,u,d,p,h=t&&t.split("/"),f=y.map,g=f&&f["*"]||{};if(e){for(s=(e=e.split("/")).length-1,y.nodeIdCompat&&b.test(e[s])&&(e[s]=e[s].replace(b,"")),"."===e[0].charAt(0)&&h&&(e=h.slice(0,h.length-1).concat(e)),u=0;u<e.length;u++)if("."===(p=e[u]))e.splice(u,1),u-=1;else if(".."===p){if(0===u||1===u&&".."===e[2]||".."===e[u-1])continue;0<u&&(e.splice(u-1,2),u-=2)}e=e.join("/")}if((h||g)&&f){for(u=(n=e.split("/")).length;0<u;u-=1){if(r=n.slice(0,u).join("/"),h)for(d=h.length;0<d;d-=1)if(i=(i=f[h.slice(0,d).join("/")])&&i[r]){o=i,a=u;break}if(o)break;!l&&g&&g[r]&&(l=g[r],c=u)}!o&&l&&(o=l,a=c),o&&(n.splice(0,a,o),e=n.join("/"))}return e}function A(t,n){return function(){var e=a.call(arguments,0);return"string"!=typeof e[0]&&1===e.length&&e.push(null),s.apply(h,e.concat([t,n]))}}function x(t){return function(e){m[t]=e}}function D(e){if(w(v,e)){var t=v[e];delete v[e],_[e]=!0,o.apply(h,t)}if(!w(m,e)&&!w(_,e))throw new Error("No "+e);return m[e]}function c(e){var t,n=e?e.indexOf("!"):-1;return-1<n&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function S(e){return e?c(e):[]}return e&&e.requirejs||(e?n=e:e={},m={},v={},y={},_={},i=Object.prototype.hasOwnProperty,a=[].slice,b=/\.js$/,f=function(e,t){var n,r=c(e),i=r[0],o=t[1];return e=r[1],i&&(n=D(i=l(i,o))),i?e=n&&n.normalize?n.normalize(e,function(t){return function(e){return l(e,t)}}(o)):l(e,o):(i=(r=c(e=l(e,o)))[0],e=r[1],i&&(n=D(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},g={require:function(e){return A(e)},exports:function(e){var t=m[e];return void 0!==t?t:m[e]={}},module:function(e){return{id:e,uri:"",exports:m[e],config:function(e){return function(){return y&&y.config&&y.config[e]||{}}}(e)}}},o=function(e,t,n,r){var i,o,s,a,l,c,u,d=[],p=typeof n;if(c=S(r=r||e),"undefined"==p||"function"==p){for(t=!t.length&&n.length?["require","exports","module"]:t,l=0;l<t.length;l+=1)if("require"===(o=(a=f(t[l],c)).f))d[l]=g.require(e);else if("exports"===o)d[l]=g.exports(e),u=!0;else if("module"===o)i=d[l]=g.module(e);else if(w(m,o)||w(v,o)||w(_,o))d[l]=D(o);else{if(!a.p)throw new Error(e+" missing "+o);a.p.load(a.n,A(r,!0),x(o),{}),d[l]=m[o]}s=n?n.apply(m[e],d):void 0,e&&(i&&i.exports!==h&&i.exports!==m[e]?m[e]=i.exports:s===h&&u||(m[e]=s))}else e&&(m[e]=n)},t=n=s=function(e,t,n,r,i){if("string"==typeof e)return g[e]?g[e](t):D(f(e,S(t)).f);if(!e.splice){if((y=e).deps&&s(y.deps,y.callback),!t)return;t.splice?(e=t,t=n,n=null):e=h}return t=t||function(){},"function"==typeof n&&(n=r,r=i),r?o(h,e,t,n):setTimeout(function(){o(h,e,t,n)},4),s},s.config=function(e){return s(e)},t._defined=m,(r=function(e,t,n){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(n=t,t=[]),w(m,e)||w(v,e)||(v[e]=[e,t,n])}).amd={jQuery:!0},e.requirejs=t,e.require=n,e.define=r),e.define("almond",function(){}),e.define("jquery",[],function(){var e=u||$;return null==e&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),e}),e.define("select2/utils",["jquery"],function(o){var i={};function u(e){var t=e.prototype,n=[];for(var r in t){"function"==typeof t[r]&&"constructor"!==r&&n.push(r)}return n}i.Extend=function(e,t){var n={}.hasOwnProperty;function r(){this.constructor=e}for(var i in t)n.call(t,i)&&(e[i]=t[i]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},i.Decorate=function(r,i){var e=u(i),t=u(r);function o(){var e=Array.prototype.unshift,t=i.prototype.constructor.length,n=r.prototype.constructor;0<t&&(e.call(arguments,r.prototype.constructor),n=i.prototype.constructor),n.apply(this,arguments)}i.displayName=r.displayName,o.prototype=new function(){this.constructor=o};for(var n=0;n<t.length;n++){var s=t[n];o.prototype[s]=r.prototype[s]}function a(e){var t=function(){};e in o.prototype&&(t=o.prototype[e]);var n=i.prototype[e];return function(){return Array.prototype.unshift.call(arguments,t),n.apply(this,arguments)}}for(var l=0;l<e.length;l++){var c=e[l];o.prototype[c]=a(c)}return o};function e(){this.listeners={}}e.prototype.on=function(e,t){this.listeners=this.listeners||{},e in this.listeners?this.listeners[e].push(t):this.listeners[e]=[t]},e.prototype.trigger=function(e){var t=Array.prototype.slice,n=t.call(arguments,1);this.listeners=this.listeners||{},null==n&&(n=[]),0===n.length&&n.push({}),(n[0]._type=e)in this.listeners&&this.invoke(this.listeners[e],t.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},e.prototype.invoke=function(e,t){for(var n=0,r=e.length;n<r;n++)e[n].apply(this,t)},i.Observable=e,i.generateChars=function(e){for(var t="",n=0;n<e;n++){t+=Math.floor(36*Math.random()).toString(36)}return t},i.bind=function(e,t){return function(){e.apply(t,arguments)}},i._convertData=function(e){for(var t in e){var n=t.split("-"),r=e;if(1!==n.length){for(var i=0;i<n.length;i++){var o=n[i];(o=o.substring(0,1).toLowerCase()+o.substring(1))in r||(r[o]={}),i==n.length-1&&(r[o]=e[t]),r=r[o]}delete e[t]}}return e},i.hasScroll=function(e,t){var n=o(t),r=t.style.overflowX,i=t.style.overflowY;return(r!==i||"hidden"!==i&&"visible"!==i)&&("scroll"===r||"scroll"===i||(n.innerHeight()<t.scrollHeight||n.innerWidth()<t.scrollWidth))},i.escapeMarkup=function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof e?e:String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})},i.appendMany=function(e,t){if("1.7"===o.fn.jquery.substr(0,3)){var n=o();o.map(t,function(e){n=n.add(e)}),t=n}e.append(t)},i.__cache={};var n=0;return i.GetUniqueElementId=function(e){var t=e.getAttribute("data-select2-id");return null==t&&(e.id?(t=e.id,e.setAttribute("data-select2-id",t)):(e.setAttribute("data-select2-id",++n),t=n.toString())),t},i.StoreData=function(e,t,n){var r=i.GetUniqueElementId(e);i.__cache[r]||(i.__cache[r]={}),i.__cache[r][t]=n},i.GetData=function(e,t){var n=i.GetUniqueElementId(e);return t?i.__cache[n]&&null!=i.__cache[n][t]?i.__cache[n][t]:o(e).data(t):i.__cache[n]},i.RemoveData=function(e){var t=i.GetUniqueElementId(e);null!=i.__cache[t]&&delete i.__cache[t],e.removeAttribute("data-select2-id")},i}),e.define("select2/results",["jquery","./utils"],function(h,f){function r(e,t,n){this.$element=e,this.data=n,this.options=t,r.__super__.constructor.call(this)}return f.Extend(r,f.Observable),r.prototype.render=function(){var e=h('<ul class="select2-results__options" role="listbox"></ul>');return this.options.get("multiple")&&e.attr("aria-multiselectable","true"),this.$results=e},r.prototype.clear=function(){this.$results.empty()},r.prototype.displayMessage=function(e){var t=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var n=h('<li role="alert" aria-live="assertive" class="select2-results__option"></li>'),r=this.options.get("translations").get(e.message);n.append(t(r(e.args))),n[0].className+=" select2-results__message",this.$results.append(n)},r.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},r.prototype.append=function(e){this.hideLoading();var t=[];if(null!=e.results&&0!==e.results.length){e.results=this.sort(e.results);for(var n=0;n<e.results.length;n++){var r=e.results[n],i=this.option(r);t.push(i)}this.$results.append(t)}else 0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"})},r.prototype.position=function(e,t){t.find(".select2-results").append(e)},r.prototype.sort=function(e){return this.options.get("sorter")(e)},r.prototype.highlightFirstItem=function(){var e=this.$results.find(".select2-results__option[aria-selected]"),t=e.filter("[aria-selected=true]");0<t.length?t.first().trigger("mouseenter"):e.first().trigger("mouseenter"),this.ensureHighlightVisible()},r.prototype.setClasses=function(){var t=this;this.data.current(function(e){var r=h.map(e,function(e){return e.id.toString()});t.$results.find(".select2-results__option[aria-selected]").each(function(){var e=h(this),t=f.GetData(this,"data"),n=""+t.id;null!=t.element&&t.element.selected||null==t.element&&-1<h.inArray(n,r)?e.attr("aria-selected","true"):e.attr("aria-selected","false")})})},r.prototype.showLoading=function(e){this.hideLoading();var t={disabled:!0,loading:!0,text:this.options.get("translations").get("searching")(e)},n=this.option(t);n.className+=" loading-results",this.$results.prepend(n)},r.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},r.prototype.option=function(e){var t=document.createElement("li");t.className="select2-results__option";var n={role:"option","aria-selected":"false"},r=window.Element.prototype.matches||window.Element.prototype.msMatchesSelector||window.Element.prototype.webkitMatchesSelector;for(var i in(null!=e.element&&r.call(e.element,":disabled")||null==e.element&&e.disabled)&&(delete n["aria-selected"],n["aria-disabled"]="true"),null==e.id&&delete n["aria-selected"],null!=e._resultId&&(t.id=e._resultId),e.title&&(t.title=e.title),e.children&&(n.role="group",n["aria-label"]=e.text,delete n["aria-selected"]),n){var o=n[i];t.setAttribute(i,o)}if(e.children){var s=h(t),a=document.createElement("strong");a.className="select2-results__group";h(a);this.template(e,a);for(var l=[],c=0;c<e.children.length;c++){var u=e.children[c],d=this.option(u);l.push(d)}var p=h("<ul></ul>",{class:"select2-results__options select2-results__options--nested"});p.append(l),s.append(a),s.append(p)}else this.template(e,t);return f.StoreData(t,"data",e),t},r.prototype.bind=function(t,e){var l=this,n=t.id+"-results";this.$results.attr("id",n),t.on("results:all",function(e){l.clear(),l.append(e.data),t.isOpen()&&(l.setClasses(),l.highlightFirstItem())}),t.on("results:append",function(e){l.append(e.data),t.isOpen()&&l.setClasses()}),t.on("query",function(e){l.hideMessages(),l.showLoading(e)}),t.on("select",function(){t.isOpen()&&(l.setClasses(),l.options.get("scrollAfterSelect")&&l.highlightFirstItem())}),t.on("unselect",function(){t.isOpen()&&(l.setClasses(),l.options.get("scrollAfterSelect")&&l.highlightFirstItem())}),t.on("open",function(){l.$results.attr("aria-expanded","true"),l.$results.attr("aria-hidden","false"),l.setClasses(),l.ensureHighlightVisible()}),t.on("close",function(){l.$results.attr("aria-expanded","false"),l.$results.attr("aria-hidden","true"),l.$results.removeAttr("aria-activedescendant")}),t.on("results:toggle",function(){var e=l.getHighlightedResults();0!==e.length&&e.trigger("mouseup")}),t.on("results:select",function(){var e=l.getHighlightedResults();if(0!==e.length){var t=f.GetData(e[0],"data");"true"==e.attr("aria-selected")?l.trigger("close",{}):l.trigger("select",{data:t})}}),t.on("results:previous",function(){var e=l.getHighlightedResults(),t=l.$results.find("[aria-selected]"),n=t.index(e);if(!(n<=0)){var r=n-1;0===e.length&&(r=0);var i=t.eq(r);i.trigger("mouseenter");var o=l.$results.offset().top,s=i.offset().top,a=l.$results.scrollTop()+(s-o);0===r?l.$results.scrollTop(0):s-o<0&&l.$results.scrollTop(a)}}),t.on("results:next",function(){var e=l.getHighlightedResults(),t=l.$results.find("[aria-selected]"),n=t.index(e)+1;if(!(n>=t.length)){var r=t.eq(n);r.trigger("mouseenter");var i=l.$results.offset().top+l.$results.outerHeight(!1),o=r.offset().top+r.outerHeight(!1),s=l.$results.scrollTop()+o-i;0===n?l.$results.scrollTop(0):i<o&&l.$results.scrollTop(s)}}),t.on("results:focus",function(e){e.element.addClass("select2-results__option--highlighted")}),t.on("results:message",function(e){l.displayMessage(e)}),h.fn.mousewheel&&this.$results.on("mousewheel",function(e){var t=l.$results.scrollTop(),n=l.$results.get(0).scrollHeight-t+e.deltaY,r=0<e.deltaY&&t-e.deltaY<=0,i=e.deltaY<0&&n<=l.$results.height();r?(l.$results.scrollTop(0),e.preventDefault(),e.stopPropagation()):i&&(l.$results.scrollTop(l.$results.get(0).scrollHeight-l.$results.height()),e.preventDefault(),e.stopPropagation())}),this.$results.on("mouseup",".select2-results__option[aria-selected]",function(e){var t=h(this),n=f.GetData(this,"data");"true"!==t.attr("aria-selected")?l.trigger("select",{originalEvent:e,data:n}):l.options.get("multiple")?l.trigger("unselect",{originalEvent:e,data:n}):l.trigger("close",{})}),this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(e){var t=f.GetData(this,"data");l.getHighlightedResults().removeClass("select2-results__option--highlighted"),l.trigger("results:focus",{data:t,element:h(this)})})},r.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},r.prototype.destroy=function(){this.$results.remove()},r.prototype.ensureHighlightVisible=function(){var e=this.getHighlightedResults();if(0!==e.length){var t=this.$results.find("[aria-selected]").index(e),n=this.$results.offset().top,r=e.offset().top,i=this.$results.scrollTop()+(r-n),o=r-n;i-=2*e.outerHeight(!1),t<=2?this.$results.scrollTop(0):(o>this.$results.outerHeight()||o<0)&&this.$results.scrollTop(i)}},r.prototype.template=function(e,t){var n=this.options.get("templateResult"),r=this.options.get("escapeMarkup"),i=n(e,t);null==i?t.style.display="none":"string"==typeof i?t.innerHTML=r(i):h(t).append(i)},r}),e.define("select2/keys",[],function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}}),e.define("select2/selection/base",["jquery","../utils","../keys"],function(n,r,i){function o(e,t){this.$element=e,this.options=t,o.__super__.constructor.call(this)}return r.Extend(o,r.Observable),o.prototype.render=function(){var e=n('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=r.GetData(this.$element[0],"old-tabindex")?this._tabindex=r.GetData(this.$element[0],"old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),e.attr("title",this.$element.attr("title")),e.attr("tabindex",this._tabindex),e.attr("aria-disabled","false"),this.$selection=e},o.prototype.bind=function(e,t){var n=this,r=e.id+"-results";this.container=e,this.$selection.on("focus",function(e){n.trigger("focus",e)}),this.$selection.on("blur",function(e){n._handleBlur(e)}),this.$selection.on("keydown",function(e){n.trigger("keypress",e),e.which===i.SPACE&&e.preventDefault()}),e.on("results:focus",function(e){n.$selection.attr("aria-activedescendant",e.data._resultId)}),e.on("selection:update",function(e){n.update(e.data)}),e.on("open",function(){n.$selection.attr("aria-expanded","true"),n.$selection.attr("aria-owns",r),n._attachCloseHandler(e)}),e.on("close",function(){n.$selection.attr("aria-expanded","false"),n.$selection.removeAttr("aria-activedescendant"),n.$selection.removeAttr("aria-owns"),n.$selection.trigger("focus"),n._detachCloseHandler(e)}),e.on("enable",function(){n.$selection.attr("tabindex",n._tabindex),n.$selection.attr("aria-disabled","false")}),e.on("disable",function(){n.$selection.attr("tabindex","-1"),n.$selection.attr("aria-disabled","true")})},o.prototype._handleBlur=function(e){var t=this;window.setTimeout(function(){document.activeElement==t.$selection[0]||n.contains(t.$selection[0],document.activeElement)||t.trigger("blur",e)},1)},o.prototype._attachCloseHandler=function(e){n(document.body).on("mousedown.select2."+e.id,function(e){var t=n(e.target).closest(".select2");n(".select2.select2-container--open").each(function(){this!=t[0]&&r.GetData(this,"element").select2("close")})})},o.prototype._detachCloseHandler=function(e){n(document.body).off("mousedown.select2."+e.id)},o.prototype.position=function(e,t){t.find(".selection").append(e)},o.prototype.destroy=function(){this._detachCloseHandler(this.container)},o.prototype.update=function(e){throw new Error("The `update` method must be defined in child classes.")},o.prototype.isEnabled=function(){return!this.isDisabled()},o.prototype.isDisabled=function(){return this.options.get("disabled")},o}),e.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(e,t,n,r){function i(){i.__super__.constructor.apply(this,arguments)}return n.Extend(i,t),i.prototype.render=function(){var e=i.__super__.render.call(this);return e.addClass("select2-selection--single"),e.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),e},i.prototype.bind=function(t,e){var n=this;i.__super__.bind.apply(this,arguments);var r=t.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",r).attr("role","textbox").attr("aria-readonly","true"),this.$selection.attr("aria-labelledby",r),this.$selection.on("mousedown",function(e){1===e.which&&n.trigger("toggle",{originalEvent:e})}),this.$selection.on("focus",function(e){}),this.$selection.on("blur",function(e){}),t.on("focus",function(e){t.isOpen()||n.$selection.trigger("focus")})},i.prototype.clear=function(){var e=this.$selection.find(".select2-selection__rendered");e.empty(),e.removeAttr("title")},i.prototype.display=function(e,t){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(e,t))},i.prototype.selectionContainer=function(){return e("<span></span>")},i.prototype.update=function(e){if(0!==e.length){var t=e[0],n=this.$selection.find(".select2-selection__rendered"),r=this.display(t,n);n.empty().append(r);var i=t.title||t.text;i?n.attr("title",i):n.removeAttr("title")}else this.clear()},i}),e.define("select2/selection/multiple",["jquery","./base","../utils"],function(i,e,l){function n(e,t){n.__super__.constructor.apply(this,arguments)}return l.Extend(n,e),n.prototype.render=function(){var e=n.__super__.render.call(this);return e.addClass("select2-selection--multiple"),e.html('<ul class="select2-selection__rendered"></ul>'),e},n.prototype.bind=function(e,t){var r=this;n.__super__.bind.apply(this,arguments),this.$selection.on("click",function(e){r.trigger("toggle",{originalEvent:e})}),this.$selection.on("click",".select2-selection__choice__remove",function(e){if(!r.isDisabled()){var t=i(this).parent(),n=l.GetData(t[0],"data");r.trigger("unselect",{originalEvent:e,data:n})}})},n.prototype.clear=function(){var e=this.$selection.find(".select2-selection__rendered");e.empty(),e.removeAttr("title")},n.prototype.display=function(e,t){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(e,t))},n.prototype.selectionContainer=function(){return i('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>')},n.prototype.update=function(e){if(this.clear(),0!==e.length){for(var t=[],n=0;n<e.length;n++){var r=e[n],i=this.selectionContainer(),o=this.display(r,i);i.append(o);var s=r.title||r.text;s&&i.attr("title",s),l.StoreData(i[0],"data",r),t.push(i)}var a=this.$selection.find(".select2-selection__rendered");l.appendMany(a,t)}},n}),e.define("select2/selection/placeholder",["../utils"],function(e){function t(e,t,n){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n)}return t.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},t.prototype.createPlaceholder=function(e,t){var n=this.selectionContainer();return n.html(this.display(t)),n.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),n},t.prototype.update=function(e,t){var n=1==t.length&&t[0].id!=this.placeholder.id;if(1<t.length||n)return e.call(this,t);this.clear();var r=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(r)},t}),e.define("select2/selection/allowClear",["jquery","../keys","../utils"],function(i,r,a){function e(){}return e.prototype.bind=function(e,t,n){var r=this;e.call(this,t,n),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",function(e){r._handleClear(e)}),t.on("keypress",function(e){r._handleKeyboardClear(e,t)})},e.prototype._handleClear=function(e,t){if(!this.isDisabled()){var n=this.$selection.find(".select2-selection__clear");if(0!==n.length){t.stopPropagation();var r=a.GetData(n[0],"data"),i=this.$element.val();this.$element.val(this.placeholder.id);var o={data:r};if(this.trigger("clear",o),o.prevented)this.$element.val(i);else{for(var s=0;s<r.length;s++)if(o={data:r[s]},this.trigger("unselect",o),o.prevented)return void this.$element.val(i);this.$element.trigger("input").trigger("change"),this.trigger("toggle",{})}}}},e.prototype._handleKeyboardClear=function(e,t,n){n.isOpen()||t.which!=r.DELETE&&t.which!=r.BACKSPACE||this._handleClear(t)},e.prototype.update=function(e,t){if(e.call(this,t),!(0<this.$selection.find(".select2-selection__placeholder").length||0===t.length)){var n=this.options.get("translations").get("removeAllItems"),r=i('<span class="select2-selection__clear" title="'+n()+'">&times;</span>');a.StoreData(r[0],"data",t),this.$selection.find(".select2-selection__rendered").prepend(r)}},e}),e.define("select2/selection/search",["jquery","../utils","../keys"],function(r,a,l){function e(e,t,n){e.call(this,t,n)}return e.prototype.render=function(e){var t=r('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" /></li>');this.$searchContainer=t,this.$search=t.find("input");var n=e.call(this);return this._transferTabIndex(),n},e.prototype.bind=function(e,t,n){var r=this,i=t.id+"-results";e.call(this,t,n),t.on("open",function(){r.$search.attr("aria-controls",i),r.$search.trigger("focus")}),t.on("close",function(){r.$search.val(""),r.$search.removeAttr("aria-controls"),r.$search.removeAttr("aria-activedescendant"),r.$search.trigger("focus")}),t.on("enable",function(){r.$search.prop("disabled",!1),r._transferTabIndex()}),t.on("disable",function(){r.$search.prop("disabled",!0)}),t.on("focus",function(e){r.$search.trigger("focus")}),t.on("results:focus",function(e){e.data._resultId?r.$search.attr("aria-activedescendant",e.data._resultId):r.$search.removeAttr("aria-activedescendant")}),this.$selection.on("focusin",".select2-search--inline",function(e){r.trigger("focus",e)}),this.$selection.on("focusout",".select2-search--inline",function(e){r._handleBlur(e)}),this.$selection.on("keydown",".select2-search--inline",function(e){if(e.stopPropagation(),r.trigger("keypress",e),r._keyUpPrevented=e.isDefaultPrevented(),e.which===l.BACKSPACE&&""===r.$search.val()){var t=r.$searchContainer.prev(".select2-selection__choice");if(0<t.length){var n=a.GetData(t[0],"data");r.searchRemoveChoice(n),e.preventDefault()}}}),this.$selection.on("click",".select2-search--inline",function(e){r.$search.val()&&e.stopPropagation()});var o=document.documentMode,s=o&&o<=11;this.$selection.on("input.searchcheck",".select2-search--inline",function(e){s?r.$selection.off("input.search input.searchcheck"):r.$selection.off("keyup.search")}),this.$selection.on("keyup.search input.search",".select2-search--inline",function(e){if(s&&"input"===e.type)r.$selection.off("input.search input.searchcheck");else{var t=e.which;t!=l.SHIFT&&t!=l.CTRL&&t!=l.ALT&&t!=l.TAB&&r.handleSearch(e)}})},e.prototype._transferTabIndex=function(e){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},e.prototype.createPlaceholder=function(e,t){this.$search.attr("placeholder",t.text)},e.prototype.update=function(e,t){var n=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),e.call(this,t),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch(),n&&this.$search.trigger("focus")},e.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=!1},e.prototype.searchRemoveChoice=function(e,t){this.trigger("unselect",{data:t}),this.$search.val(t.text),this.handleSearch()},e.prototype.resizeSearch=function(){this.$search.css("width","25px");var e="";""!==this.$search.attr("placeholder")?e=this.$selection.find(".select2-selection__rendered").width():e=.75*(this.$search.val().length+1)+"em";this.$search.css("width",e)},e}),e.define("select2/selection/eventRelay",["jquery"],function(s){function e(){}return e.prototype.bind=function(e,t,n){var r=this,i=["open","opening","close","closing","select","selecting","unselect","unselecting","clear","clearing"],o=["opening","closing","selecting","unselecting","clearing"];e.call(this,t,n),t.on("*",function(e,t){if(-1!==s.inArray(e,i)){t=t||{};var n=s.Event("select2:"+e,{params:t});r.$element.trigger(n),-1!==s.inArray(e,o)&&(t.prevented=n.isDefaultPrevented())}})},e}),e.define("select2/translation",["jquery","require"],function(t,n){function r(e){this.dict=e||{}}return r.prototype.all=function(){return this.dict},r.prototype.get=function(e){return this.dict[e]},r.prototype.extend=function(e){this.dict=t.extend({},e.all(),this.dict)},r._cache={},r.loadPath=function(e){if(!(e in r._cache)){var t=n(e);r._cache[e]=t}return new r(r._cache[e])},r}),e.define("select2/diacritics",[],function(){return{"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Œ":"OE","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","œ":"oe","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ώ":"ω","ς":"σ","’":"'"}}),e.define("select2/data/base",["../utils"],function(r){function n(e,t){n.__super__.constructor.call(this)}return r.Extend(n,r.Observable),n.prototype.current=function(e){throw new Error("The `current` method must be defined in child classes.")},n.prototype.query=function(e,t){throw new Error("The `query` method must be defined in child classes.")},n.prototype.bind=function(e,t){},n.prototype.destroy=function(){},n.prototype.generateResultId=function(e,t){var n=e.id+"-result-";return n+=r.generateChars(4),null!=t.id?n+="-"+t.id.toString():n+="-"+r.generateChars(4),n},n}),e.define("select2/data/select",["./base","../utils","jquery"],function(e,a,l){function n(e,t){this.$element=e,this.options=t,n.__super__.constructor.call(this)}return a.Extend(n,e),n.prototype.current=function(e){var n=[],r=this;this.$element.find(":selected").each(function(){var e=l(this),t=r.item(e);n.push(t)}),e(n)},n.prototype.select=function(i){var o=this;if(i.selected=!0,l(i.element).is("option"))return i.element.selected=!0,void this.$element.trigger("input").trigger("change");if(this.$element.prop("multiple"))this.current(function(e){var t=[];(i=[i]).push.apply(i,e);for(var n=0;n<i.length;n++){var r=i[n].id;-1===l.inArray(r,t)&&t.push(r)}o.$element.val(t),o.$element.trigger("input").trigger("change")});else{var e=i.id;this.$element.val(e),this.$element.trigger("input").trigger("change")}},n.prototype.unselect=function(i){var o=this;if(this.$element.prop("multiple")){if(i.selected=!1,l(i.element).is("option"))return i.element.selected=!1,void this.$element.trigger("input").trigger("change");this.current(function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n].id;r!==i.id&&-1===l.inArray(r,t)&&t.push(r)}o.$element.val(t),o.$element.trigger("input").trigger("change")})}},n.prototype.bind=function(e,t){var n=this;(this.container=e).on("select",function(e){n.select(e.data)}),e.on("unselect",function(e){n.unselect(e.data)})},n.prototype.destroy=function(){this.$element.find("*").each(function(){a.RemoveData(this)})},n.prototype.query=function(r,e){var i=[],o=this;this.$element.children().each(function(){var e=l(this);if(e.is("option")||e.is("optgroup")){var t=o.item(e),n=o.matches(r,t);null!==n&&i.push(n)}}),e({results:i})},n.prototype.addOptions=function(e){a.appendMany(this.$element,e)},n.prototype.option=function(e){var t;e.children?(t=document.createElement("optgroup")).label=e.text:void 0!==(t=document.createElement("option")).textContent?t.textContent=e.text:t.innerText=e.text,void 0!==e.id&&(t.value=e.id),e.disabled&&(t.disabled=!0),e.selected&&(t.selected=!0),e.title&&(t.title=e.title);var n=l(t),r=this._normalizeItem(e);return r.element=t,a.StoreData(t,"data",r),n},n.prototype.item=function(e){var t={};if(null!=(t=a.GetData(e[0],"data")))return t;if(e.is("option"))t={id:e.val(),text:e.text(),disabled:e.prop("disabled"),selected:e.prop("selected"),title:e.prop("title")};else if(e.is("optgroup")){t={text:e.prop("label"),children:[],title:e.prop("title")};for(var n=e.children("option"),r=[],i=0;i<n.length;i++){var o=l(n[i]),s=this.item(o);r.push(s)}t.children=r}return(t=this._normalizeItem(t)).element=e[0],a.StoreData(e[0],"data",t),t},n.prototype._normalizeItem=function(e){e!==Object(e)&&(e={id:e,text:e});return null!=(e=l.extend({},{text:""},e)).id&&(e.id=e.id.toString()),null!=e.text&&(e.text=e.text.toString()),null==e._resultId&&e.id&&null!=this.container&&(e._resultId=this.generateResultId(this.container,e)),l.extend({},{selected:!1,disabled:!1},e)},n.prototype.matches=function(e,t){return this.options.get("matcher")(e,t)},n}),e.define("select2/data/array",["./select","../utils","jquery"],function(e,f,g){function r(e,t){this._dataToConvert=t.get("data")||[],r.__super__.constructor.call(this,e,t)}return f.Extend(r,e),r.prototype.bind=function(e,t){r.__super__.bind.call(this,e,t),this.addOptions(this.convertToOptions(this._dataToConvert))},r.prototype.select=function(n){var e=this.$element.find("option").filter(function(e,t){return t.value==n.id.toString()});0===e.length&&(e=this.option(n),this.addOptions(e)),r.__super__.select.call(this,n)},r.prototype.convertToOptions=function(e){var t=this,n=this.$element.find("option"),r=n.map(function(){return t.item(g(this)).id}).get(),i=[];function o(e){return function(){return g(this).val()==e.id}}for(var s=0;s<e.length;s++){var a=this._normalizeItem(e[s]);if(0<=g.inArray(a.id,r)){var l=n.filter(o(a)),c=this.item(l),u=g.extend(!0,{},a,c),d=this.option(u);l.replaceWith(d)}else{var p=this.option(a);if(a.children){var h=this.convertToOptions(a.children);f.appendMany(p,h)}i.push(p)}}return i},r}),e.define("select2/data/ajax",["./array","../utils","jquery"],function(e,t,o){function n(e,t){this.ajaxOptions=this._applyDefaults(t.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),n.__super__.constructor.call(this,e,t)}return t.Extend(n,e),n.prototype._applyDefaults=function(e){var t={data:function(e){return o.extend({},e,{q:e.term})},transport:function(e,t,n){var r=o.ajax(e);return r.then(t),r.fail(n),r}};return o.extend({},t,e,!0)},n.prototype.processResults=function(e){return e},n.prototype.query=function(n,r){var i=this;null!=this._request&&(o.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var t=o.extend({type:"GET"},this.ajaxOptions);function e(){var e=t.transport(t,function(e){var t=i.processResults(e,n);i.options.get("debug")&&window.console&&console.error&&(t&&t.results&&o.isArray(t.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),r(t)},function(){"status"in e&&(0===e.status||"0"===e.status)||i.trigger("results:message",{message:"errorLoading"})});i._request=e}"function"==typeof t.url&&(t.url=t.url.call(this.$element,n)),"function"==typeof t.data&&(t.data=t.data.call(this.$element,n)),this.ajaxOptions.delay&&null!=n.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(e,this.ajaxOptions.delay)):e()},n}),e.define("select2/data/tags",["jquery"],function(u){function e(e,t,n){var r=n.get("tags"),i=n.get("createTag");void 0!==i&&(this.createTag=i);var o=n.get("insertTag");if(void 0!==o&&(this.insertTag=o),e.call(this,t,n),u.isArray(r))for(var s=0;s<r.length;s++){var a=r[s],l=this._normalizeItem(a),c=this.option(l);this.$element.append(c)}}return e.prototype.query=function(e,c,u){var d=this;this._removeOldTags(),null!=c.term&&null==c.page?e.call(this,c,function e(t,n){for(var r=t.results,i=0;i<r.length;i++){var o=r[i],s=null!=o.children&&!e({results:o.children},!0);if((o.text||"").toUpperCase()===(c.term||"").toUpperCase()||s)return!n&&(t.data=r,void u(t))}if(n)return!0;var a=d.createTag(c);if(null!=a){var l=d.option(a);l.attr("data-select2-tag",!0),d.addOptions([l]),d.insertTag(r,a)}t.results=r,u(t)}):e.call(this,c,u)},e.prototype.createTag=function(e,t){var n=u.trim(t.term);return""===n?null:{id:n,text:n}},e.prototype.insertTag=function(e,t,n){t.unshift(n)},e.prototype._removeOldTags=function(e){this.$element.find("option[data-select2-tag]").each(function(){this.selected||u(this).remove()})},e}),e.define("select2/data/tokenizer",["jquery"],function(d){function e(e,t,n){var r=n.get("tokenizer");void 0!==r&&(this.tokenizer=r),e.call(this,t,n)}return e.prototype.bind=function(e,t,n){e.call(this,t,n),this.$search=t.dropdown.$search||t.selection.$search||n.find(".select2-search__field")},e.prototype.query=function(e,t,n){var r=this;t.term=t.term||"";var i=this.tokenizer(t,this.options,function(e){var t=r._normalizeItem(e);if(!r.$element.find("option").filter(function(){return d(this).val()===t.id}).length){var n=r.option(t);n.attr("data-select2-tag",!0),r._removeOldTags(),r.addOptions([n])}!function(e){r.trigger("select",{data:e})}(t)});i.term!==t.term&&(this.$search.length&&(this.$search.val(i.term),this.$search.trigger("focus")),t.term=i.term),e.call(this,t,n)},e.prototype.tokenizer=function(e,t,n,r){for(var i=n.get("tokenSeparators")||[],o=t.term,s=0,a=this.createTag||function(e){return{id:e.term,text:e.term}};s<o.length;){var l=o[s];if(-1!==d.inArray(l,i)){var c=o.substr(0,s),u=a(d.extend({},t,{term:c}));null!=u?(r(u),o=o.substr(s+1)||"",s=0):s++}else s++}return{term:o}},e}),e.define("select2/data/minimumInputLength",[],function(){function e(e,t,n){this.minimumInputLength=n.get("minimumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){t.term=t.term||"",t.term.length<this.minimumInputLength?this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:t.term,params:t}}):e.call(this,t,n)},e}),e.define("select2/data/maximumInputLength",[],function(){function e(e,t,n){this.maximumInputLength=n.get("maximumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){t.term=t.term||"",0<this.maximumInputLength&&t.term.length>this.maximumInputLength?this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:t.term,params:t}}):e.call(this,t,n)},e}),e.define("select2/data/maximumSelectionLength",[],function(){function e(e,t,n){this.maximumSelectionLength=n.get("maximumSelectionLength"),e.call(this,t,n)}return e.prototype.bind=function(e,t,n){var r=this;e.call(this,t,n),t.on("select",function(){r._checkIfMaximumSelected()})},e.prototype.query=function(e,t,n){var r=this;this._checkIfMaximumSelected(function(){e.call(r,t,n)})},e.prototype._checkIfMaximumSelected=function(e,n){var r=this;this.current(function(e){var t=null!=e?e.length:0;0<r.maximumSelectionLength&&t>=r.maximumSelectionLength?r.trigger("results:message",{message:"maximumSelected",args:{maximum:r.maximumSelectionLength}}):n&&n()})},e}),e.define("select2/dropdown",["jquery","./utils"],function(t,e){function n(e,t){this.$element=e,this.options=t,n.__super__.constructor.call(this)}return e.Extend(n,e.Observable),n.prototype.render=function(){var e=t('<span class="select2-dropdown"><span class="select2-results"></span></span>');return e.attr("dir",this.options.get("dir")),this.$dropdown=e},n.prototype.bind=function(){},n.prototype.position=function(e,t){},n.prototype.destroy=function(){this.$dropdown.remove()},n}),e.define("select2/dropdown/search",["jquery","../utils"],function(o,e){function t(){}return t.prototype.render=function(e){var t=e.call(this),n=o('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" /></span>');return this.$searchContainer=n,this.$search=n.find("input"),t.prepend(n),t},t.prototype.bind=function(e,t,n){var r=this,i=t.id+"-results";e.call(this,t,n),this.$search.on("keydown",function(e){r.trigger("keypress",e),r._keyUpPrevented=e.isDefaultPrevented()}),this.$search.on("input",function(e){o(this).off("keyup")}),this.$search.on("keyup input",function(e){r.handleSearch(e)}),t.on("open",function(){r.$search.attr("tabindex",0),r.$search.attr("aria-controls",i),r.$search.trigger("focus"),window.setTimeout(function(){r.$search.trigger("focus")},0)}),t.on("close",function(){r.$search.attr("tabindex",-1),r.$search.removeAttr("aria-controls"),r.$search.removeAttr("aria-activedescendant"),r.$search.val(""),r.$search.trigger("blur")}),t.on("focus",function(){t.isOpen()||r.$search.trigger("focus")}),t.on("results:all",function(e){null!=e.query.term&&""!==e.query.term||(r.showSearch(e)?r.$searchContainer.removeClass("select2-search--hide"):r.$searchContainer.addClass("select2-search--hide"))}),t.on("results:focus",function(e){e.data._resultId?r.$search.attr("aria-activedescendant",e.data._resultId):r.$search.removeAttr("aria-activedescendant")})},t.prototype.handleSearch=function(e){if(!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},t.prototype.showSearch=function(e,t){return!0},t}),e.define("select2/dropdown/hidePlaceholder",[],function(){function e(e,t,n,r){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n,r)}return e.prototype.append=function(e,t){t.results=this.removePlaceholder(t.results),e.call(this,t)},e.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},e.prototype.removePlaceholder=function(e,t){for(var n=t.slice(0),r=t.length-1;0<=r;r--){var i=t[r];this.placeholder.id===i.id&&n.splice(r,1)}return n},e}),e.define("select2/dropdown/infiniteScroll",["jquery"],function(n){function e(e,t,n,r){this.lastParams={},e.call(this,t,n,r),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return e.prototype.append=function(e,t){this.$loadingMore.remove(),this.loading=!1,e.call(this,t),this.showLoadingMore(t)&&(this.$results.append(this.$loadingMore),this.loadMoreIfNeeded())},e.prototype.bind=function(e,t,n){var r=this;e.call(this,t,n),t.on("query",function(e){r.lastParams=e,r.loading=!0}),t.on("query:append",function(e){r.lastParams=e,r.loading=!0}),this.$results.on("scroll",this.loadMoreIfNeeded.bind(this))},e.prototype.loadMoreIfNeeded=function(){var e=n.contains(document.documentElement,this.$loadingMore[0]);if(!this.loading&&e){var t=this.$results.offset().top+this.$results.outerHeight(!1);this.$loadingMore.offset().top+this.$loadingMore.outerHeight(!1)<=t+50&&this.loadMore()}},e.prototype.loadMore=function(){this.loading=!0;var e=n.extend({},{page:1},this.lastParams);e.page++,this.trigger("query:append",e)},e.prototype.showLoadingMore=function(e,t){return t.pagination&&t.pagination.more},e.prototype.createLoadingMore=function(){var e=n('<li class="select2-results__option select2-results__option--load-more"role="option" aria-disabled="true"></li>'),t=this.options.get("translations").get("loadingMore");return e.html(t(this.lastParams)),e},e}),e.define("select2/dropdown/attachBody",["jquery","../utils"],function(f,a){function e(e,t,n){this.$dropdownParent=f(n.get("dropdownParent")||document.body),e.call(this,t,n)}return e.prototype.bind=function(e,t,n){var r=this;e.call(this,t,n),t.on("open",function(){r._showDropdown(),r._attachPositioningHandler(t),r._bindContainerResultHandlers(t)}),t.on("close",function(){r._hideDropdown(),r._detachPositioningHandler(t)}),this.$dropdownContainer.on("mousedown",function(e){e.stopPropagation()})},e.prototype.destroy=function(e){e.call(this),this.$dropdownContainer.remove()},e.prototype.position=function(e,t,n){t.attr("class",n.attr("class")),t.removeClass("select2"),t.addClass("select2-container--open"),t.css({position:"absolute",top:-999999}),this.$container=n},e.prototype.render=function(e){var t=f("<span></span>"),n=e.call(this);return t.append(n),this.$dropdownContainer=t},e.prototype._hideDropdown=function(e){this.$dropdownContainer.detach()},e.prototype._bindContainerResultHandlers=function(e,t){if(!this._containerResultsHandlersBound){var n=this;t.on("results:all",function(){n._positionDropdown(),n._resizeDropdown()}),t.on("results:append",function(){n._positionDropdown(),n._resizeDropdown()}),t.on("results:message",function(){n._positionDropdown(),n._resizeDropdown()}),t.on("select",function(){n._positionDropdown(),n._resizeDropdown()}),t.on("unselect",function(){n._positionDropdown(),n._resizeDropdown()}),this._containerResultsHandlersBound=!0}},e.prototype._attachPositioningHandler=function(e,t){var n=this,r="scroll.select2."+t.id,i="resize.select2."+t.id,o="orientationchange.select2."+t.id,s=this.$container.parents().filter(a.hasScroll);s.each(function(){a.StoreData(this,"select2-scroll-position",{x:f(this).scrollLeft(),y:f(this).scrollTop()})}),s.on(r,function(e){var t=a.GetData(this,"select2-scroll-position");f(this).scrollTop(t.y)}),f(window).on(r+" "+i+" "+o,function(e){n._positionDropdown(),n._resizeDropdown()})},e.prototype._detachPositioningHandler=function(e,t){var n="scroll.select2."+t.id,r="resize.select2."+t.id,i="orientationchange.select2."+t.id;this.$container.parents().filter(a.hasScroll).off(n),f(window).off(n+" "+r+" "+i)},e.prototype._positionDropdown=function(){var e=f(window),t=this.$dropdown.hasClass("select2-dropdown--above"),n=this.$dropdown.hasClass("select2-dropdown--below"),r=null,i=this.$container.offset();i.bottom=i.top+this.$container.outerHeight(!1);var o={height:this.$container.outerHeight(!1)};o.top=i.top,o.bottom=i.top+o.height;var s=this.$dropdown.outerHeight(!1),a=e.scrollTop(),l=e.scrollTop()+e.height(),c=a<i.top-s,u=l>i.bottom+s,d={left:i.left,top:o.bottom},p=this.$dropdownParent;"static"===p.css("position")&&(p=p.offsetParent());var h={top:0,left:0};(f.contains(document.body,p[0])||p[0].isConnected)&&(h=p.offset()),d.top-=h.top,d.left-=h.left,t||n||(r="below"),u||!c||t?!c&&u&&t&&(r="below"):r="above",("above"==r||t&&"below"!==r)&&(d.top=o.top-h.top-s),null!=r&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+r),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+r)),this.$dropdownContainer.css(d)},e.prototype._resizeDropdown=function(){var e={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(e.minWidth=e.width,e.position="relative",e.width="auto"),this.$dropdown.css(e)},e.prototype._showDropdown=function(e){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},e}),e.define("select2/dropdown/minimumResultsForSearch",[],function(){function e(e,t,n,r){this.minimumResultsForSearch=n.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),e.call(this,t,n,r)}return e.prototype.showSearch=function(e,t){return!(function e(t){for(var n=0,r=0;r<t.length;r++){var i=t[r];i.children?n+=e(i.children):n++}return n}(t.data.results)<this.minimumResultsForSearch)&&e.call(this,t)},e}),e.define("select2/dropdown/selectOnClose",["../utils"],function(o){function e(){}return e.prototype.bind=function(e,t,n){var r=this;e.call(this,t,n),t.on("close",function(e){r._handleSelectOnClose(e)})},e.prototype._handleSelectOnClose=function(e,t){if(t&&null!=t.originalSelect2Event){var n=t.originalSelect2Event;if("select"===n._type||"unselect"===n._type)return}var r=this.getHighlightedResults();if(!(r.length<1)){var i=o.GetData(r[0],"data");null!=i.element&&i.element.selected||null==i.element&&i.selected||this.trigger("select",{data:i})}},e}),e.define("select2/dropdown/closeOnSelect",[],function(){function e(){}return e.prototype.bind=function(e,t,n){var r=this;e.call(this,t,n),t.on("select",function(e){r._selectTriggered(e)}),t.on("unselect",function(e){r._selectTriggered(e)})},e.prototype._selectTriggered=function(e,t){var n=t.originalEvent;n&&(n.ctrlKey||n.metaKey)||this.trigger("close",{originalEvent:n,originalSelect2Event:t})},e}),e.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(e){var t=e.input.length-e.maximum,n="Please delete "+t+" character";return 1!=t&&(n+="s"),n},inputTooShort:function(e){return"Please enter "+(e.minimum-e.input.length)+" or more characters"},loadingMore:function(){return"Loading more results…"},maximumSelected:function(e){var t="You can only select "+e.maximum+" item";return 1!=e.maximum&&(t+="s"),t},noResults:function(){return"No results found"},searching:function(){return"Searching…"},removeAllItems:function(){return"Remove all items"}}}),e.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(c,u,d,p,h,f,g,m,v,y,s,t,_,$,b,w,A,x,D,S,E,C,O,T,q,L,I,j,e){function n(){this.reset()}return n.prototype.apply=function(e){if(null==(e=c.extend(!0,{},this.defaults,e)).dataAdapter){if(null!=e.ajax?e.dataAdapter=b:null!=e.data?e.dataAdapter=$:e.dataAdapter=_,0<e.minimumInputLength&&(e.dataAdapter=y.Decorate(e.dataAdapter,x)),0<e.maximumInputLength&&(e.dataAdapter=y.Decorate(e.dataAdapter,D)),0<e.maximumSelectionLength&&(e.dataAdapter=y.Decorate(e.dataAdapter,S)),e.tags&&(e.dataAdapter=y.Decorate(e.dataAdapter,w)),null==e.tokenSeparators&&null==e.tokenizer||(e.dataAdapter=y.Decorate(e.dataAdapter,A)),null!=e.query){var t=u(e.amdBase+"compat/query");e.dataAdapter=y.Decorate(e.dataAdapter,t)}if(null!=e.initSelection){var n=u(e.amdBase+"compat/initSelection");e.dataAdapter=y.Decorate(e.dataAdapter,n)}}if(null==e.resultsAdapter&&(e.resultsAdapter=d,null!=e.ajax&&(e.resultsAdapter=y.Decorate(e.resultsAdapter,T)),null!=e.placeholder&&(e.resultsAdapter=y.Decorate(e.resultsAdapter,O)),e.selectOnClose&&(e.resultsAdapter=y.Decorate(e.resultsAdapter,I))),null==e.dropdownAdapter){if(e.multiple)e.dropdownAdapter=E;else{var r=y.Decorate(E,C);e.dropdownAdapter=r}if(0!==e.minimumResultsForSearch&&(e.dropdownAdapter=y.Decorate(e.dropdownAdapter,L)),e.closeOnSelect&&(e.dropdownAdapter=y.Decorate(e.dropdownAdapter,j)),null!=e.dropdownCssClass||null!=e.dropdownCss||null!=e.adaptDropdownCssClass){var i=u(e.amdBase+"compat/dropdownCss");e.dropdownAdapter=y.Decorate(e.dropdownAdapter,i)}e.dropdownAdapter=y.Decorate(e.dropdownAdapter,q)}if(null==e.selectionAdapter){if(e.multiple?e.selectionAdapter=h:e.selectionAdapter=p,null!=e.placeholder&&(e.selectionAdapter=y.Decorate(e.selectionAdapter,f)),e.allowClear&&(e.selectionAdapter=y.Decorate(e.selectionAdapter,g)),e.multiple&&(e.selectionAdapter=y.Decorate(e.selectionAdapter,m)),null!=e.containerCssClass||null!=e.containerCss||null!=e.adaptContainerCssClass){var o=u(e.amdBase+"compat/containerCss");e.selectionAdapter=y.Decorate(e.selectionAdapter,o)}e.selectionAdapter=y.Decorate(e.selectionAdapter,v)}e.language=this._resolveLanguage(e.language),e.language.push("en");for(var s=[],a=0;a<e.language.length;a++){var l=e.language[a];-1===s.indexOf(l)&&s.push(l)}return e.language=s,e.translations=this._processTranslations(e.language,e.debug),e},n.prototype.reset=function(){function a(e){return e.replace(/[^\u0000-\u007E]/g,function(e){return t[e]||e})}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:y.escapeMarkup,language:{},matcher:function e(t,n){if(""===c.trim(t.term))return n;if(n.children&&0<n.children.length){for(var r=c.extend(!0,{},n),i=n.children.length-1;0<=i;i--)null==e(t,n.children[i])&&r.children.splice(i,1);return 0<r.children.length?r:e(t,r)}var o=a(n.text).toUpperCase(),s=a(t.term).toUpperCase();return-1<o.indexOf(s)?n:null},minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,scrollAfterSelect:!1,sorter:function(e){return e},templateResult:function(e){return e.text},templateSelection:function(e){return e.text},theme:"default",width:"resolve"}},n.prototype.applyFromElement=function(e,t){var n=e.language,r=this.defaults.language,i=t.prop("lang"),o=t.closest("[lang]").prop("lang"),s=Array.prototype.concat.call(this._resolveLanguage(i),this._resolveLanguage(n),this._resolveLanguage(r),this._resolveLanguage(o));return e.language=s,e},n.prototype._resolveLanguage=function(e){if(!e)return[];if(c.isEmptyObject(e))return[];if(c.isPlainObject(e))return[e];var t;t=c.isArray(e)?e:[e];for(var n=[],r=0;r<t.length;r++)if(n.push(t[r]),"string"==typeof t[r]&&0<t[r].indexOf("-")){var i=t[r].split("-")[0];n.push(i)}return n},n.prototype._processTranslations=function(e,t){for(var n=new s,r=0;r<e.length;r++){var i=new s,o=e[r];if("string"==typeof o)try{i=s.loadPath(o)}catch(e){try{o=this.defaults.amdLanguageBase+o,i=s.loadPath(o)}catch(e){t&&window.console&&console.warn&&console.warn('Select2: The language file for "'+o+'" could not be automatically loaded. A fallback will be used instead.')}}else i=c.isPlainObject(o)?new s(o):o;n.extend(i)}return n},n.prototype.set=function(e,t){var n={};n[c.camelCase(e)]=t;var r=y._convertData(n);c.extend(!0,this.defaults,r)},new n}),e.define("select2/options",["require","jquery","./defaults","./utils"],function(r,d,i,p){function e(e,t){if(this.options=e,null!=t&&this.fromElement(t),null!=t&&(this.options=i.applyFromElement(this.options,t)),this.options=i.apply(this.options),t&&t.is("input")){var n=r(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=p.Decorate(this.options.dataAdapter,n)}}return e.prototype.fromElement=function(e){var t=["select2"];null==this.options.multiple&&(this.options.multiple=e.prop("multiple")),null==this.options.disabled&&(this.options.disabled=e.prop("disabled")),null==this.options.dir&&(e.prop("dir")?this.options.dir=e.prop("dir"):e.closest("[dir]").prop("dir")?this.options.dir=e.closest("[dir]").prop("dir"):this.options.dir="ltr"),e.prop("disabled",this.options.disabled),e.prop("multiple",this.options.multiple),p.GetData(e[0],"select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),p.StoreData(e[0],"data",p.GetData(e[0],"select2Tags")),p.StoreData(e[0],"tags",!0)),p.GetData(e[0],"ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),e.attr("ajax--url",p.GetData(e[0],"ajaxUrl")),p.StoreData(e[0],"ajax-Url",p.GetData(e[0],"ajaxUrl")));var n={};function r(e,t){return t.toUpperCase()}for(var i=0;i<e[0].attributes.length;i++){var o=e[0].attributes[i].name,s="data-";if(o.substr(0,s.length)==s){var a=o.substring(s.length),l=p.GetData(e[0],a);n[a.replace(/-([a-z])/g,r)]=l}}d.fn.jquery&&"1."==d.fn.jquery.substr(0,2)&&e[0].dataset&&(n=d.extend(!0,{},e[0].dataset,n));var c=d.extend(!0,{},p.GetData(e[0]),n);for(var u in c=p._convertData(c))-1<d.inArray(u,t)||(d.isPlainObject(this.options[u])?d.extend(this.options[u],c[u]):this.options[u]=c[u]);return this},e.prototype.get=function(e){return this.options[e]},e.prototype.set=function(e,t){this.options[e]=t},e}),e.define("select2/core",["jquery","./options","./utils","./keys"],function(o,c,u,r){var d=function(e,t){null!=u.GetData(e[0],"select2")&&u.GetData(e[0],"select2").destroy(),this.$element=e,this.id=this._generateId(e),t=t||{},this.options=new c(t,e),d.__super__.constructor.call(this);var n=e.attr("tabindex")||0;u.StoreData(e[0],"old-tabindex",n),e.attr("tabindex","-1");var r=this.options.get("dataAdapter");this.dataAdapter=new r(e,this.options);var i=this.render();this._placeContainer(i);var o=this.options.get("selectionAdapter");this.selection=new o(e,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,i);var s=this.options.get("dropdownAdapter");this.dropdown=new s(e,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,i);var a=this.options.get("resultsAdapter");this.results=new a(e,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var l=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(e){l.trigger("selection:update",{data:e})}),e.addClass("select2-hidden-accessible"),e.attr("aria-hidden","true"),this._syncAttributes(),u.StoreData(e[0],"select2",this),e.data("select2",this)};return u.Extend(d,u.Observable),d.prototype._generateId=function(e){return"select2-"+(null!=e.attr("id")?e.attr("id"):null!=e.attr("name")?e.attr("name")+"-"+u.generateChars(2):u.generateChars(4)).replace(/(:|\.|\[|\]|,)/g,"")},d.prototype._placeContainer=function(e){e.insertAfter(this.$element);var t=this._resolveWidth(this.$element,this.options.get("width"));null!=t&&e.css("width",t)},d.prototype._resolveWidth=function(e,t){var n=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==t){var r=this._resolveWidth(e,"style");return null!=r?r:this._resolveWidth(e,"element")}if("element"==t){var i=e.outerWidth(!1);return i<=0?"auto":i+"px"}if("style"!=t)return"computedstyle"!=t?t:window.getComputedStyle(e[0]).width;var o=e.attr("style");if("string"!=typeof o)return null;for(var s=o.split(";"),a=0,l=s.length;a<l;a+=1){var c=s[a].replace(/\s/g,"").match(n);if(null!==c&&1<=c.length)return c[1]}return null},d.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},d.prototype._registerDomEvents=function(){var t=this;this.$element.on("change.select2",function(){t.dataAdapter.current(function(e){t.trigger("selection:update",{data:e})})}),this.$element.on("focus.select2",function(e){t.trigger("focus",e)}),this._syncA=u.bind(this._syncAttributes,this),this._syncS=u.bind(this._syncSubtree,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._syncA);var e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=e?(this._observer=new e(function(e){t._syncA(),t._syncS(null,e)}),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})):this.$element[0].addEventListener&&(this.$element[0].addEventListener("DOMAttrModified",t._syncA,!1),this.$element[0].addEventListener("DOMNodeInserted",t._syncS,!1),this.$element[0].addEventListener("DOMNodeRemoved",t._syncS,!1))},d.prototype._registerDataEvents=function(){var n=this;this.dataAdapter.on("*",function(e,t){n.trigger(e,t)})},d.prototype._registerSelectionEvents=function(){var n=this,r=["toggle","focus"];this.selection.on("toggle",function(){n.toggleDropdown()}),this.selection.on("focus",function(e){n.focus(e)}),this.selection.on("*",function(e,t){-1===o.inArray(e,r)&&n.trigger(e,t)})},d.prototype._registerDropdownEvents=function(){var n=this;this.dropdown.on("*",function(e,t){n.trigger(e,t)})},d.prototype._registerResultsEvents=function(){var n=this;this.results.on("*",function(e,t){n.trigger(e,t)})},d.prototype._registerEvents=function(){var n=this;this.on("open",function(){n.$container.addClass("select2-container--open")}),this.on("close",function(){n.$container.removeClass("select2-container--open")}),this.on("enable",function(){n.$container.removeClass("select2-container--disabled")}),this.on("disable",function(){n.$container.addClass("select2-container--disabled")}),this.on("blur",function(){n.$container.removeClass("select2-container--focus")}),this.on("query",function(t){n.isOpen()||n.trigger("open",{}),this.dataAdapter.query(t,function(e){n.trigger("results:all",{data:e,query:t})})}),this.on("query:append",function(t){this.dataAdapter.query(t,function(e){n.trigger("results:append",{data:e,query:t})})}),this.on("keypress",function(e){var t=e.which;n.isOpen()?t===r.ESC||t===r.TAB||t===r.UP&&e.altKey?(n.close(e),e.preventDefault()):t===r.ENTER?(n.trigger("results:select",{}),e.preventDefault()):t===r.SPACE&&e.ctrlKey?(n.trigger("results:toggle",{}),e.preventDefault()):t===r.UP?(n.trigger("results:previous",{}),e.preventDefault()):t===r.DOWN&&(n.trigger("results:next",{}),e.preventDefault()):(t===r.ENTER||t===r.SPACE||t===r.DOWN&&e.altKey)&&(n.open(),e.preventDefault())})},d.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.isDisabled()?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},d.prototype._isChangeMutation=function(e,t){var n=!1,r=this;if(!e||!e.target||"OPTION"===e.target.nodeName||"OPTGROUP"===e.target.nodeName){if(t)if(t.addedNodes&&0<t.addedNodes.length)for(var i=0;i<t.addedNodes.length;i++){t.addedNodes[i].selected&&(n=!0)}else t.removedNodes&&0<t.removedNodes.length?n=!0:o.isArray(t)&&o.each(t,function(e,t){if(r._isChangeMutation(e,t))return!(n=!0)});else n=!0;return n}},d.prototype._syncSubtree=function(e,t){var n=this._isChangeMutation(e,t),r=this;n&&this.dataAdapter.current(function(e){r.trigger("selection:update",{data:e})})},d.prototype.trigger=function(e,t){var n=d.__super__.trigger,r={open:"opening",close:"closing",select:"selecting",unselect:"unselecting",clear:"clearing"};if(void 0===t&&(t={}),e in r){var i=r[e],o={prevented:!1,name:e,args:t};if(n.call(this,i,o),o.prevented)return void(t.prevented=!0)}n.call(this,e,t)},d.prototype.toggleDropdown=function(){this.isDisabled()||(this.isOpen()?this.close():this.open())},d.prototype.open=function(){this.isOpen()||this.isDisabled()||this.trigger("query",{})},d.prototype.close=function(e){this.isOpen()&&this.trigger("close",{originalEvent:e})},d.prototype.isEnabled=function(){return!this.isDisabled()},d.prototype.isDisabled=function(){return this.options.get("disabled")},d.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},d.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")},d.prototype.focus=function(e){this.hasFocus()||(this.$container.addClass("select2-container--focus"),this.trigger("focus",{}))},d.prototype.enable=function(e){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),null!=e&&0!==e.length||(e=[!0]);var t=!e[0];this.$element.prop("disabled",t)},d.prototype.data=function(){this.options.get("debug")&&0<arguments.length&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var t=[];return this.dataAdapter.current(function(e){t=e}),t},d.prototype.val=function(e){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==e||0===e.length)return this.$element.val();var t=e[0];o.isArray(t)&&(t=o.map(t,function(e){return e.toString()})),this.$element.val(t).trigger("input").trigger("change")},d.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._syncA),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&(this.$element[0].removeEventListener("DOMAttrModified",this._syncA,!1),this.$element[0].removeEventListener("DOMNodeInserted",this._syncS,!1),this.$element[0].removeEventListener("DOMNodeRemoved",this._syncS,!1)),this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",u.GetData(this.$element[0],"old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),u.RemoveData(this.$element[0]),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},d.prototype.render=function(){var e=o('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return e.attr("dir",this.options.get("dir")),this.$container=e,this.$container.addClass("select2-container--"+this.options.get("theme")),u.StoreData(e[0],"element",this.$element),e},d}),e.define("jquery-mousewheel",["jquery"],function(e){return e}),e.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults","./select2/utils"],function(i,e,o,t,s){if(null==i.fn.select2){var a=["open","close","destroy"];i.fn.select2=function(t){if("object"==typeof(t=t||{}))return this.each(function(){var e=i.extend(!0,{},t);new o(i(this),e)}),this;if("string"!=typeof t)throw new Error("Invalid arguments for Select2: "+t);var n,r=Array.prototype.slice.call(arguments,1);return this.each(function(){var e=s.GetData(this,"select2");null==e&&window.console&&console.error&&console.error("The select2('"+t+"') method was called on an element that is not using Select2."),n=e[t].apply(e,r)}),-1<i.inArray(t,a)?this:n}}return null==i.fn.select2.defaults&&(i.fn.select2.defaults=t),o}),{define:e.define,require:e.require}}(),t=e.require("jquery.select2");return u.fn.select2.amd=e,t});
jQuery(function(r){if("undefined"==typeof wc_cart_fragments_params)return!1;var t=!0,o=wc_cart_fragments_params.cart_hash_key;try{t="sessionStorage"in window&&null!==window.sessionStorage,window.sessionStorage.setItem("wc","test"),window.sessionStorage.removeItem("wc"),window.localStorage.setItem("wc","test"),window.localStorage.removeItem("wc")}catch(f){t=!1}function a(){t&&sessionStorage.setItem("wc_cart_created",(new Date).getTime())}function s(e){t&&(localStorage.setItem(o,e),sessionStorage.setItem(o,e))}var e={url:wc_cart_fragments_params.wc_ajax_url.toString().replace("%%endpoint%%","get_refreshed_fragments"),type:"POST",data:{time:(new Date).getTime()},timeout:wc_cart_fragments_params.request_timeout,success:function(e){e&&e.fragments&&(r.each(e.fragments,function(e,t){r(e).replaceWith(t)}),t&&(sessionStorage.setItem(wc_cart_fragments_params.fragment_name,JSON.stringify(e.fragments)),s(e.cart_hash),e.cart_hash)&&a(),r(document.body).trigger("wc_fragments_refreshed"))},error:function(){r(document.body).trigger("wc_fragments_ajax_error")}};function n(){r.ajax(e)}if(t){var i=null;r(document.body).on("wc_fragment_refresh updated_wc_div",function(){n()}),r(document.body).on("added_to_cart removed_from_cart",function(e,t,r){var n=sessionStorage.getItem(o);null!==n&&n!==undefined&&""!==n||a(),sessionStorage.setItem(wc_cart_fragments_params.fragment_name,JSON.stringify(t)),s(r)}),r(document.body).on("wc_fragments_refreshed",function(){clearTimeout(i),i=setTimeout(n,864e5)}),r(window).on("storage onstorage",function(e){o===e.originalEvent.key&&localStorage.getItem(o)!==sessionStorage.getItem(o)&&n()}),r(window).on("pageshow",function(e){e.originalEvent.persisted&&(r(".widget_shopping_cart_content").empty(),r(document.body).trigger("wc_fragment_refresh"))});try{var c=JSON.parse(sessionStorage.getItem(wc_cart_fragments_params.fragment_name)),_=sessionStorage.getItem(o),g=Cookies.get("woocommerce_cart_hash"),m=sessionStorage.getItem("wc_cart_created");if(null!==_&&_!==undefined&&""!==_||(_=""),null!==g&&g!==undefined&&""!==g||(g=""),_&&(null===m||m===undefined||""===m))throw"No cart_created";if(m){var d=+m+864e5,w=(new Date).getTime();if(d<w)throw"Fragment expired";i=setTimeout(n,d-w)}if(!c||!c["div.widget_shopping_cart_content"]||_!==g)throw"No fragment";r.each(c,function(e,t){r(e).replaceWith(t)}),r(document.body).trigger("wc_fragments_loaded")}catch(f){n()}}else n();0<Cookies.get("woocommerce_items_in_cart")?r(".hide_cart_widget_if_empty").closest(".widget_shopping_cart").show():r(".hide_cart_widget_if_empty").closest(".widget_shopping_cart").hide(),r(document.body).on("adding_to_cart",function(){r(".hide_cart_widget_if_empty").closest(".widget_shopping_cart").show()}),"undefined"!=typeof wp&&wp.customize&&wp.customize.selectiveRefresh&&wp.customize.widgetsPreview&&wp.customize.widgetsPreview.WidgetPartial&&wp.customize.selectiveRefresh.bind("partial-content-rendered",function(){n()})});
!function(){var e={999:function(e){function t(){this.listeners={}}t.prototype.emit=function(e,t){var n;this.listeners[e]=null!==(n=this.listeners[e])&&void 0!==n?n:[],this.listeners[e].forEach((function(e){return e.apply(null,t)}))},t.prototype.on=function(e,t){var n;this.listeners[e]=null!==(n=this.listeners[e])&&void 0!==n?n:[],this.listeners[e].push(t)},e.exports=t},1677:function(){function e(e){for(var t=!!e.getAttribute("data-show-if"),n=t?e.getAttribute("data-show-if").split(":"):e.getAttribute("data-hide-if").split(":"),r=n[0],i=(n.length>1?n[1]:"*").split("|"),a=function(e,t){for(var n=[],r=e.querySelectorAll('input[name="'+t+'"],select[name="'+t+'"],textarea[name="'+t+'"]'),i=0;i<r.length;i++){var a=r[i];("radio"!==a.type&&"checkbox"!==a.type||a.checked)&&n.push(a.value)}return n}(function(e){for(var t=e;t.parentElement;)if("FORM"===(t=t.parentElement).tagName)return t;return null}(e),r),o=!1,s=0;s<a.length;s++){var c=a[s];if(o=i.indexOf(c)>-1||i.indexOf("*")>-1&&c.length>0)break}e.style.display=t?o?"":"none":o?"none":"";for(var l=e.querySelectorAll("input,select,textarea"),u=0;u<l.length;u++){var f=l[u];(o||t)&&f.getAttribute("data-was-required")&&(f.required=!0,f.removeAttribute("data-was-required")),o&&t||!f.required||(f.setAttribute("data-was-required","true"),f.required=!1)}}function t(){for(var t=document.querySelectorAll(".mc4wp-form [data-show-if],.mc4wp-form [data-hide-if]"),n=0;n<t.length;n++)e(t[n])}function n(t){if(t.target&&t.target.form&&!(t.target.form.className.indexOf("mc4wp-form")<0))for(var n=t.target.form.querySelectorAll("[data-show-if],[data-hide-if]"),r=0;r<n.length;r++)e(n[r])}document.addEventListener("keyup",n,!0),document.addEventListener("change",n,!0),document.addEventListener("mc4wp-refresh",t,!0),window.addEventListener("load",t),t()},2573:function(e,t,n){var r=n(7422),i=n(3409),a=function(e,t){this.id=e,this.element=t||document.createElement("form"),this.name=this.element.getAttribute("data-name")||"Form #"+this.id,this.errors=[],this.started=!1};a.prototype.setData=function(e){try{i(this.element,e)}catch(e){console.error(e)}},a.prototype.getData=function(){return r(this.element,{hash:!0,empty:!0})},a.prototype.getSerializedData=function(){return r(this.element,{hash:!1,empty:!0})},a.prototype.setResponse=function(e){this.element.querySelector(".mc4wp-response").innerHTML=e},a.prototype.reset=function(){this.setResponse(""),this.element.querySelector(".mc4wp-form-fields").style.display="",this.element.reset()},e.exports=a},8592:function(e,t,n){var r=n(2573),i=[],a=new(n(999));function o(e,t){t=t||parseInt(e.getAttribute("data-id"))||0;var n=new r(t,e);return i.push(n),n}e.exports={get:function(e){e=parseInt(e);for(var t=0;t<i.length;t++)if(i[t].id===e)return i[t];return o(document.querySelector(".mc4wp-form-"+e),e)},getByElement:function(e){for(var t=e.form||e,n=0;n<i.length;n++)if(i[n].element===t)return i[n];return o(t)},on:function(e,t){a.on(e,t)},trigger:function(e,t){"submit"===e||e.indexOf(".submit")>0?(a.emit(t[0].id+"."+e,t),a.emit(e,t)):window.setTimeout((function(){a.emit(t[0].id+"."+e,t),a.emit(e,t)}),10)}}},7422:function(e){var t=/^(?:submit|button|image|reset|file)$/i,n=/^(?:input|select|textarea|keygen)/i,r=/(\[[^\[\]]*\])/g;function i(e,t,n){if(0===t.length)return n;var r=t.shift(),a=r.match(/^\[(.+?)\]$/);if("[]"===r)return e=e||[],Array.isArray(e)?e.push(i(null,t,n)):(e._values=e._values||[],e._values.push(i(null,t,n))),e;if(a){var o=a[1],s=+o;isNaN(s)?(e=e||{})[o]=i(e[o],t,n):(e=e||[])[s]=i(e[s],t,n)}else e[r]=i(e[r],t,n);return e}function a(e,t,n){if(t.match(r))i(e,function(e){var t=[],n=new RegExp(r),i=/^([^\[\]]*)/.exec(e);for(i[1]&&t.push(i[1]);null!==(i=n.exec(e));)t.push(i[1]);return t}(t),n);else{var a=e[t];a?(Array.isArray(a)||(e[t]=[a]),e[t].push(n)):e[t]=n}return e}function o(e,t,n){return n=n.replace(/(\r)?\n/g,"\r\n"),n=(n=encodeURIComponent(n)).replace(/%20/g,"+"),e+(e?"&":"")+encodeURIComponent(t)+"="+n}e.exports=function(e,r){"object"!=typeof r?r={hash:!!r}:void 0===r.hash&&(r.hash=!0);for(var i=r.hash?{}:"",s=r.serializer||(r.hash?a:o),c=e&&e.elements?e.elements:[],l=Object.create(null),u=0;u<c.length;++u){var f=c[u];if((r.disabled||!f.disabled)&&f.name&&n.test(f.nodeName)&&!t.test(f.type)){var d=f.name,h=f.value;if("checkbox"!==f.type&&"radio"!==f.type||f.checked||(h=void 0),r.empty){if("checkbox"!==f.type||f.checked||(h=""),"radio"===f.type&&(l[f.name]||f.checked?f.checked&&(l[f.name]=!0):l[f.name]=!1),null==h&&"radio"==f.type)continue}else if(!h)continue;if("select-multiple"!==f.type)i=s(i,d,h);else{h=[];for(var p=f.options,m=!1,v=0;v<p.length;++v){var g=p[v],y=r.empty&&!g.value,b=g.value||y;g.selected&&b&&(m=!0,i=r.hash&&"[]"!==d.slice(d.length-2)?s(i,d+"[]",g.value):s(i,d,g.value))}!m&&r.empty&&(i=s(i,d,""))}}}if(r.empty)for(var d in l)l[d]||(i=s(i,d,""));return i}},3409:function(e){e.exports&&(e.exports=function e(t,n,r){for(const i in n){if(!n.hasOwnProperty(i))continue;const a=i;let o=n[i];if(void 0===o&&(o=""),null===o&&(o=""),void 0!==r&&(a=r+"["+i+"]"),o.constructor===Array)a+="[]";else if("object"==typeof o){e(t,o,a);continue}const s=t.elements.namedItem(a);if(!s)continue;const c=s.type||s[0].type;switch(c){default:s.value=o;break;case"radio":case"checkbox":{const e=o.constructor===Array?o:[o];for(let t=0;t<s.length;t++)s[t].checked=e.indexOf(s[t].value)>-1}break;case"select-multiple":{const e=o.constructor===Array?o:[o];for(let t=0;t<s.options.length;t++)s.options[t].selected=e.indexOf(s.options[t].value)>-1}break;case"select":case"select-one":s.value=o.toString()||o;break;case"date":s.value=new Date(o).toISOString().split("T")[0]}const l=new Event("change",{bubbles:!0});switch(c){default:s.dispatchEvent(l);break;case"radio":case"checkbox":for(let e=0;e<s.length;e++)s[e].checked&&s[e].dispatchEvent(l)}}})}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}!function(){var e=window.mc4wp||{},t=n(8592);function r(e,t){document.addEventListener(e,(function(e){if(e.target){var n=e.target;("string"==typeof n.className&&n.className.indexOf("mc4wp-form")>-1||"function"==typeof n.matches&&n.matches(".mc4wp-form *"))&&t.call(e,e)}}),!0)}n(1677),r("submit",(function(e){if(!e.defaultPrevented){var n=t.getByElement(e.target);e.defaultPrevented||t.trigger("submit",[n,e])}})),r("focus",(function(e){var n=t.getByElement(e.target);n.started||(t.trigger("started",[n,e]),n.started=!0)})),r("change",(function(e){var n=t.getByElement(e.target);t.trigger("change",[n,e])})),e.listeners&&([].forEach.call(e.listeners,(function(e){t.on(e.event,e.callback)})),delete e.listeners),e.forms=t,window.mc4wp=e}()}();