function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var n;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,c=[],s=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return c}}function _arrayWithHoles(e){if(Array.isArray(e))return e}!function(){"use strict";var t=2;function n(e){e=new RegExp("(^| )".concat(e,"=([^;]+)")),e=document.cookie.match(e);if(e)return decodeURI(e[t])}function r(e,t,n){var t=encodeURI(t),r=window.location.hostname,a=new Date,n=(a.setTime(a.getTime()+n),a.toUTCString());document.cookie="".concat(e,"=").concat(t,"; expires=").concat(n,"; path=/; domain=").concat(r)}var a="VtexRCSessionIdv7",o="VtexRCMacIdv7",i="VtexWorkspace";function c(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}function s(){var e=n(a),t=null!=e?e:c();return r(a,t,18e5),{sessionID:t,isNewSessionID:!e}}function u(){var e=n(o),t=null!=e?e:c();return r(o,t,31536e6),{macID:t,isNewUser:!e}}function l(){return Object.assign(Object.assign(Object.assign({},s()),u()),{accountName:null!=(e=null==(e=window.__RUNTIME__)?void 0:e.account)?e:window.jsnomeLoja,url:d(),ref:window.document.referrer,workspace:null!=(e=null!=(e=function(){var e=n(i);return _slicedToArray(null!=(e=null==e?void 0:e.split(":"))?e:[],1)[0]}())?e:function(){var e=new RegExp(/[?&]workspace=([^&]+)(&|$)/).exec(window.location.search);return null==e?void 0:e[1]}())?e:function(){var e;return null==(e=null===window||void 0===window?void 0:window.__RUNTIME__)?void 0:e.workspace}()});var e}function d(){return window.location.href}var e="https://af-origin.vtex.com/api/activity-flow",w={pageView:"".concat(e,"/page-views"),performanceTiming:"".concat(e,"/performance-timing")};function p(e,t){var n,r;navigator.sendBeacon?navigator.sendBeacon(t,e):(n=t,r=e,new Promise(function(e){var t=new XMLHttpRequest;t.timeout=1e4,t.open("POST",n,!0),t.setRequestHeader("Content-Type","application/json"),t.send(r),t.onload=function(){if(200===t.status||202===t.status)return s(),e(r)}}))}function f(e){var t={SessionId:(t=l()).sessionID,MacId:t.macID,IsNewUser:t.isNewUser,Url:t.url,Ref:t.ref,accountName:t.accountName,clientdate:(new Date).getTime(),isFirstEvent:t.isNewSessionID,workspace:t.workspace},n=t.IsNewUser,r=t.isFirstEvent,t=function(e,t){var n={};for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n}(t,["IsNewUser","isFirstEvent"]),t=Object.assign(Object.assign(Object.assign({},e),{DataType:"Event"}),t),t="pageView"===e.eventType?Object.assign(Object.assign({},t),{IsNewUser:n,isFirstEvent:r}):t;return JSON.stringify(t)}function v(e){null!=e.eventType&&p(f(e),w[e.eventType])}var y="";function m(o){var i=window.history[o];return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=i.apply(this,t),a=new Event(o.toLowerCase());return g(),a.arguments=t,window.dispatchEvent(a),r}}function g(){var e=d();y!==e&&(y=e,v({eventType:"pageView"}))}function x(){var e;Math.random()<=.01&&(e=h,"complete"===document.readyState?e():window.attachEvent?window.attachEvent("onload",e):window.addEventListener("load",e,!1))}function h(){var e;e=function(){var e=function(){var e=performance.timing,t=performance.getEntriesByType("navigation")[0];t=t?{pageLoadTime:t.duration,timeToFirstByte:t.responseStart-t.startTime,collectedWithDeprecatedTimingAPI:!1}:{pageLoadTime:e.loadEventEnd-e.navigationStart,timeToFirstByte:e.responseStart-e.navigationStart,collectedWithDeprecatedTimingAPI:!0};return t}();v(Object.assign({eventType:"performanceTiming"},e))},"requestIdleCallback"in window?window.requestIdleCallback(e):setTimeout(e,1)}window.history?(window.history.pushState=m("pushState"),window.history.replaceState=m("replaceState"),window.addEventListener("popstate",g),window.addEventListener("hashchange",g)):setInterval(g,1e3),g(),x()}();
//# sourceMappingURL=af.js.map
