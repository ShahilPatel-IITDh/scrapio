"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2812],{82823:function(s,e,t){t.d(e,{P:function(){return B}});var r=t(44908),u=t.n(r),l=t(67294),o=t(11163),a=t(46879),n=t(80198),E=t(44350),_=t(24223),c=t(48914),d=t(68714),i=t(23100),S=t(7535),b=t(84520),A=t(39798),L=t(59905),N=t(78469),T=t(11772),f=t(65920);let O=({enabled:s}={})=>{let{preferredStoreZipCode:e,queryState:t}=(0,S.oJ)(),[r,u]=(0,L.Z)({limit:5,place:e},{enabled:s&&(t.status===c.o.Success||t.status===c.o.Error)}),o=r(N.Ys),a=!s||u.status===c.o.Success||u.status===c.o.Error;return(0,l.useMemo)(()=>s&&(t.status!==c.o.Success&&t.status!==c.o.Error||e)?{nearbyStoreIds:o,enabled:a}:{nearbyStoreIds:void 0,enabled:!0},[t.status,e,o,s,a])},B=()=>{var s;let e=(0,o.useRouter)(),{query:t}=e,r=(0,i.jI)(t,"storeIdList"),L=(0,f.l1)(e),N=null==L?void 0:L.some(s=>T.zU.includes(s)),{preferredStoreId:B,queryState:p}=(0,S.lo)(),{nearbyStoreIds:v,enabled:G}=O({enabled:!N}),M=null!==(s=(0,_.T)().GLOBAL_GUEST_ANONYMOUS_ESTIMATE_ENABLED)&&void 0!==s?s:(0,E.flags)("GLOBAL_GUEST_ANONYMOUS_ESTIMATE_ENABLED"),U=(0,a.Bz)(),k=(0,n.P)(),I=(0,a.xd)(),m=I&&(0,E.flags)("GLOBAL_GUEST_CONTEXTS_ENABLED")&&!N,[y,g]=(0,b._)({filter_signals:"store_trips,trend_seeker,brand"},{enabled:m}),h=y(A.Qv),C=[...null!=v?v:[],...null!=h?h:[]],D=u()(r?r.split(","):[B,...N?[]:C]).filter(d.y).join(","),Y=!m||g.status===c.o.Success||g.status===c.o.Error,j=(!!M&&!!U||!!k&&Y)&&G&&(p.status===c.o.Success||p.status===c.o.Error);return(0,l.useMemo)(()=>({store_ids:D,enabled:j}),[D,j])}}}]);