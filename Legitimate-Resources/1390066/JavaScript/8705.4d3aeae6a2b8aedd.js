"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8705],{78503:function(e,t,r){r.d(t,{H:function(){return l}});var n=r(67294),o=r(86235);let l=()=>{let{dispatch:e,circleOffersReducerState:t}=(0,n.useContext)(o.j);return[t,e]}},87588:function(e,t,r){r.d(t,{Z:function(){return n},v:function(){return o}});let n={cmsPageId:"/bulkoffers",cmsPageType:"/bulkoffers/",pageName:"bulk offers",pageType:"bulk offers"},o={cmsPageId:"/ATCofferssheet",cmsPageType:"/ATCofferssheet/",pageName:"ATC: offers sheet",pageType:"ATC offers sheet"}},91605:function(e,t,r){r.d(t,{E:function(){return u},b:function(){return d}});var n=r(59499),o=r(67294),l=r(43430),i=r(78503),a=r(60396);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let u=({isMagicWandShown:e,appState:t,circleOffers:r})=>{let{trackEvent:n}=(0,l.rS)(),[a]=(0,i.H)(),s=r.some(e=>{var t,r;return null==a?void 0:null===(t=a[null!==(r=e.id)&&void 0!==r?r:""])||void 0===t?void 0:t.added}),u=(0,o.useMemo)(()=>r.filter(e=>{var t,r;return null==a?void 0:null===(t=a[null!==(r=e.id)&&void 0!==r?r:""])||void 0===t?void 0:t.added}),[r,a]),d=(0,o.useRef)(!1),f=(0,o.useRef)(!1);(0,o.useEffect)(()=>(f.current=!1,d.current=!1,()=>{f.current=!0}),[]),(0,o.useEffect)(()=>{e&&n({appState:t,guest:{eventType:"pageload"}})},[e,n,t]);let m=(0,o.useCallback)((r="button")=>{if(!e||d.current)return;let o=null==u?void 0:u.map(e=>({offerId:e.id,offerSelected:!0,offerType:"cartwheel"}));n(c({appState:t,guest:{eventType:"click"},lnk:{contentClick:{componentType:"action",contentType:`bulk offers: offer: ${s?"added":`${r}: no action`}`}}},s?{offerInfo:{addOffer:!0,offers:o}}:{})),d.current=!0},[e,n,s,u,t]);return(0,o.useEffect)(()=>()=>{f.current&&m("dismiss")},[m]),m},d=e=>{let{trackEvent:t}=(0,l.rS)();return r=>{let n,o;let{offerId:l,action:i,offerAriaLabel:s}=null!=r?r:{};l&&(i===a.x.ADDED_OFFER?n=!0:i===a.x.ADD_OFFER_ERROR&&(n=!1),i===a.x.REMOVED_OFFER?o=!0:i===a.x.REMOVE_OFFER_ERROR&&(o=!1),t({appState:e,guest:{eventType:"click"},offerInfo:c(c(c({},n?{addOffer:n}:{}),o?{removeOffer:o}:{}),{},{offers:[{offerId:l,offerSelected:void 0!==n||void 0!==o,offerType:"cartwheel"}]}),promotionInfo:{promos:[{id:l,omtOfferId:l,added:n,removed:o,longTagSpecialOffer:s}]}}))}}},66031:function(e,t,r){r.d(t,{V:function(){return x}});var n=r(41609),o=r.n(n),l=r(85893),i=r(67294),a=r(43430),s=r(21803),c=r(55446),u=r(36176),d=r(85393),f=r(18617),m=r(42850),p=r(8668),v=r(69626),g=r(6410),y=r(56947),h=r(65416);let b=({recommendedProducts:e})=>{let{trackEvent:t}=(0,a.rS)();return(0,i.useEffect)(()=>{t({guest:{eventType:"recommendations"},recommendations:{categoryId:e.category_id,docType:e.doctype,placementId:e.placement_id,strategyDescription:e.strategy_description,strategyId:e.strategy_id,strategyName:e.strategy_name,type:"product"}})},[e,t]),(0,l.jsx)("div",{"data-test":"recommendations-tracking"})};b.displayName="RecommendationsTracking";var k=r(95114);let x=({tcins:e})=>{var t;let{trackEvent:r}=(0,a.rS)(),n=(0,a.rS)(),x="mweba2ch1",[O,j]=(0,u.T)({placement_id:x,tcins:e}),T=O(d.t_),w=(0,d.VB)(T),C=(0,d.Dm)(T),E=(0,d.YE)(T),I=null!==(t=(0,d.k2)(T))&&void 0!==t?t:"More to consider",R=(0,k._l)(w);(0,i.useEffect)(()=>{o()(R)||n.trackEvent({guest:{eventType:"adimp"},adImpressions:R})},[R,n]);let N=(0,i.useCallback)(e=>{var t,n,o,l,i,s;let c=null!==(t=null===(n=e.currentTarget)||void 0===n?void 0:n.getAttribute("data-position"))&&void 0!==t?t:-1,u=null!==(o=null===(l=e.currentTarget)||void 0===l?void 0:l.getAttribute("data-product-id"))&&void 0!==o?o:void 0,d=null!==(i=null==w?void 0:w[c])&&void 0!==i?i:{};if((0,f.$y)(d)){let{ad_source:e,click_id:t,click_token:n}=null!==(s=(0,f.TV)(d))&&void 0!==s?s:{};r({event:{name:"openNewPage",source:`product ad | ${x} | ${c}`,type:"click"},guest:{eventType:"click"},products:[{tcin:u}]}),r({customInteraction:{type:"click",value:`${t}|${n}`},guest:{eventType:"customInteraction"},products:[{tcin:u,sponsor:{name:e}}]})}else(0,a.OK)({recClick:{position:Number(c),productId:u,strategyId:C,strategyName:E,type:"product"}})},[w,C,E,r]),S=(0,v.s_)(j),_=(0,i.useMemo)(()=>{var e;return null==T?void 0:null===(e=T.products)||void 0===e?void 0:e.map((e,t)=>(0,l.jsx)(m.d,{debugName:"RecommendationsFilmstrip",queryResult:S,value:e,children:(0,l.jsx)(h.i,{handleRecommendationsClick:N,index:t,strategyId:C,strategyName:E})},(0,p.iC)(e)))},[null==T?void 0:T.products,C,E,N,S]);return T||j.isSuccess||j.isError?!(null!=T&&T.products)||T.products.length<=0?null:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(b,{recommendedProducts:T}),(0,l.jsxs)("div",{children:[(0,l.jsx)(c.w,{className:"h-margin-t-x2",size:3,children:I}),(0,l.jsx)(g.M,{buttonSize:"sm","data-test":"addToCartSuccessModalRecommendations",itemsPerClick:4,maxClickCount:1,tabTitle:I,tagName:"div",children:_})]})]}):(0,l.jsx)(s.G,{animationDuration:"500ms",height:"120px",isAnimated:!0,stroke:y.colors.palette.gray.light,width:"100%"})};x.displayName="Recommendations"},6410:function(e,t,r){r.d(t,{M:function(){return f}});var n=r(85893),o=r(67294),l=r(9196),i=r(36679),a=r(7337),s=r(43430),c=r(23921),u=r(19521);let d=(0,u.ZP)(c.B).withConfig({displayName:"styles__StyledIconNavigationArrowDownFill",componentId:"sc-qwvsl5-0"})(["width:24px;color:#333;vertical-align:bottom;transition:transform;transform:rotate(0deg) translateY(0);",";"],e=>e.isActive&&`transform-origin: center;
        transform: rotate(180deg);`),f=({tabTitle:e,itemsPerClick:t=6,maxClickCount:r=2,tagName:c="ul",hasFlexColumn:u,children:f,justifyContentCenter:m,shouldScrollIntoView:p,alternateButton:v,onClick:g,buttonSize:y,"data-test":h})=>{let{0:b,1:k}=(0,o.useState)(0),{trackEvent:x}=(0,s.rS)();(0,o.useEffect)(()=>{k(0)},[f]);let O=(0,o.useRef)(null),j=(0,o.useCallback)(()=>{var e;if(!O.current||0===b)return;let r=null===(e=O.current)||void 0===e?void 0:e.querySelector(`.item-${b*t}`);r&&r.focus()},[O,t,b]);(0,o.useEffect)(()=>{j()},[j]);let T=(0,o.useCallback)(t=>{null==g||g(t),x({customInteraction:{type:"click",value:`${e} load more button ${b} click`},guest:{eventType:"customInteraction"}}),k(b+1)},[k,x,b,e,g]),w=(0,o.useCallback)(t=>{if(null==g||g(t),x({customInteraction:{type:"click",value:`${e} show less button`},guest:{eventType:"customInteraction"}}),k(0),p&&window.scrollY>=215){var r;null===(r=O.current)||void 0===r||r.scrollIntoView()}},[e,x,p,g]),C=(0,o.useCallback)(()=>b===r?o.Children.toArray(f).length:t*(b+1),[b,r,f,t]),E=(0,o.useCallback)(()=>{if(b===r)return 0;let e=o.Children.toArray(f).length,n=C(),l=e-n;return b===r-1?l:Math.min(l,t)},[b,r,t,f,C]),I=(0,o.useCallback)(e=>{let t=E();if(t>0){T(e);return}w(e)},[T,E,w]),R=o.Children.toArray(f),N=C(),S="Show less";return E()>0&&(S=`Show ${E()} more`),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c,{className:`${u?"h-flex-direction-col h-flex-align-center":"h-flex-direction-row"} h-display-flex h-flex-wrap ${m?"h-flex-justify-center":""}`,"data-test":h,ref:O,children:R.slice(0,N)}),R.length>t&&(v?(0,n.jsx)(l.X,{children:(0,n.jsxs)(i.F,{"aria-label":`${S} ${e}`,className:"h-text-grayDarkest h-margin-t-tiny","data-test":"loadMoreRecommendations",onClick:I,underline:"invert",children:[S," ",(0,n.jsx)(d,{isActive:"Show less"===S})]})}):(0,n.jsx)(l.X,{className:"h-flex-justify-center",children:(0,n.jsx)(a.P,{"aria-label":`${S} ${e} items`,className:"h-margin-h-default h-align-center","data-test":"loadMoreRecommendations",onClick:I,size:y,children:S})}))]})};f.displayName="ShowMoreItemsWrapper"}}]);