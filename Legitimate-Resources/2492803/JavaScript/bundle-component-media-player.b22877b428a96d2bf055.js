"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[2726],{37844:function(e,t,n){n.d(t,{Z:function(){return W}});var r=n(64404),a=n(68442),i=n(10043),o=n(87062),l=n(27378),u=n(6284),d=n(44381),c={localhostError:"MediaPlayer is not available on localhost. Try localhost.bbc.com"},s={default:{NO_JS_REASON:"This video can not be played",NO_JS_MESSAGE:"To play this video you need to enable JavaScript in your browser."},cy:{NO_JS_REASON:"Methu chwarae'r fideo",NO_JS_MESSAGE:"I wylio'r fideo yma, mae'n rhaid galluogi JavaScript yn y porwr."},gd:{NO_JS_REASON:"Cha ghabh am bhideo seo cluiche",NO_JS_MESSAGE:"Feumar cead a thoirt do JavaScript sa bhrabhsair agad 'son am bhideo fhaicinn."}},p=n(44401),m=()=>p.Z&&window.location.hostname,v=n(86594),y=n(25040),f=n(33866),h=n(74868);function g(e,t,n,r,a,i,o){try{var l=e[i](o),u=l.value}catch(d){return void n(d)}l.done?t(u):Promise.resolve(u).then(r,a)}var b,w={playing:"started",pause:"paused",playlistEnded:"ended"},E=Object.keys(w),P=function(){var e,t=(e=function*(e){var{uasClient:t,smpEventName:n,currentTime:r,hostname:a,activityData:i}=e;if(E.includes(n)&&(e=>(null==e?void 0:e.resourceDomain)&&(null==e?void 0:e.resourceId)&&(null==e?void 0:e.resourceType)&&(null==e?void 0:e.actionContext)&&(null==e?void 0:e.url))(i)&&(0,f.Z)()&&(0,h.w$)()){var o=(0,v.Z)().withAction(w[n]).withResourceDomain(i.resourceDomain).withResourceId(i.resourceId).withResourceType(i.resourceType).withActionContext("".concat(i.actionContext,"#").concat(Math.floor(r))).withUrl("https://".concat(a).concat(i.url)).build();try{yield t.post(o)}catch(l){console.error(l)}}},function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){g(i,r,a,o,l,"next",e)}function l(e){g(i,r,a,o,l,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}(),O=n(46438);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e,t,n,r,a,i,o){try{var l=e[i](o),u=l.value}catch(d){return void n(d)}l.done?t(u):Promise.resolve(u).then(r,a)}function T(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){j(i,r,a,o,l,"next",e)}function l(e){j(i,r,a,o,l,"throw",e)}o(void 0)}))}}var x=["initialised","continuousPlay.play","continuousPlayCountdownStarted","playing","pause","ended","fullscreenEnter","fullscreenExit","playlistEnded","playlistStopped","mediaItemChanged","enterFakeFullscreen","exitFakeFullscreen"],D=(0,a.default)("div",{target:"e1h75hkw3",label:"MediaPlayerWrapper"})(""),C=(0,a.default)("div",{target:"e1h75hkw2",label:"Container"})("height:",(e=>{var{height:t}=e;return t}),";padding-bottom:",(e=>{var{height:t}=e;return t?"0":"".concat(56.25,"%;")}),";width:100%;color:",(e=>{var{theme:t}=e;return t.colourPalette.primary}),";background-color:",(e=>{var{theme:t}=e;return t.colourPalette.midground}),";html.no-js &{display:none;}",(e=>{var t,n,{isInFakeFullscreen:r}=e;return r&&(0,i.iv)(b||(t=["\n      position: relative;\n      z-index: 9999;\n    "],n||(n=t.slice(0)),b=Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(n)}}))))}),";"),k=(0,a.default)("div",{target:"e1h75hkw1",label:"Error"})({name:"19997jf",styles:"display:flex;justify-content:center;align-items:center;padding:32px"}),N=(0,a.default)("div",{target:"e1h75hkw0",label:"LogoIconWrapper"})("width:",30,"%;padding-top:",(e=>{var{height:t}=e;return"".concat(t?4.180743243243244:23.868243243243246,"%;")}),";margin:0 auto;color:",(e=>{var{theme:t}=e;return t.colourPalette.primary}),";opacity:0.2;"),L=function(){var e=T((function*(e){if(!e.isAdvertisingEnabled)return!1;var t=e=>e.items.some((e=>e.isAdvertisingAllowed)),n=t(e),r=e.continuousPlay&&e.continuousPlay.mediaList&&e.continuousPlay.mediaList.some(t);return!(!n&&!r)&&(window.dotcom&&!window.dotcom.ads&&(yield new Promise((e=>setTimeout(e,200)))),window.dotcom&&window.dotcom.ads&&(yield window.dotcom.ads.enabled()))}));return function(t){return e.apply(this,arguments)}}(),R=e=>{var{analytics:t}=e;return t&&t.page?t.page.name:void 0},F=e=>{var{idType:t}=e;return"serviceID"===t||void 0},J=e=>{var{items:t,analytics:n}=e;if(n){var{page:{destination:r,producer:a}}=n;return 0===t.length?{destination:r,producer:a}:{clipPID:t[0].id,destination:r,producer:a}}},I=e=>e?"allowed":void 0,M=(e,t)=>{var n=e.items[0];if(n){var{id:r,idType:a="vpid",live:i,holdingImageUrl:o,title:l,duration:u,durationFormatted:d,kind:c,guidance:s,isEmbeddingAllowed:p,isAdvertisingAllowed:m}=n,v=[{[a]:r,kind:c,live:i,duration:u}];return t&&m&&v.unshift({kind:"advert"}),{title:l,holdingImageURL:o,guidance:s,date:d,embedRights:I(p),items:v,simulcast:F(n)}}},U=e=>{var{media:t,onwardJourneyOptions:n,hasAds:r}=e;if(t.continuousPlay&&t.continuousPlay.mediaList&&t.continuousPlay.mediaList.length>1)return((e,t,n)=>({html:"name:onwardJourney.js",data:{name:"smp.plugin.continuousplay.playlistSetChanged",data:S({items:e.map((e=>({playlist:M(e,n),counterName:R(e),statsObject:J(e)})))},t)}}))(t.continuousPlay.mediaList,n,r)},K=e=>{var{hasAds:t,initialAdTag:n}=e;if(t)return{html:"name:dfpAds.js",data:{name:"AdsPluginParameters",data:{adTag:n}}}},Z=e=>{var{unmutePluginEnabled:t}=e;return t?{html:d}:void 0},G=(e,t,n,r)=>{x.forEach((n=>{e.bind(n,(e=>t({name:n,data:e})))}));var a=!1;if(e.bind("showCta",(()=>{a||(a=!0,window.performance.mark("media-player-ready-to-play"))})),e.bind("initialised",(()=>window.performance.mark("media-player-initialised"))),e.bind("enterFakeFullscreen",(()=>r(!0))),e.bind("exitFakeFullscreen",(()=>r(!1))),n){var i=function(){var t=T((function*(){var t=yield window.dotcom.ads.getAdTag();e.dispatchEvent("bbc.smp.plugins.ads.event.updateAdTag",{adTag:t})}));return function(){return t.apply(this,arguments)}}();e.bind("playlistLoaded",(()=>{i()}))}},z=e=>{var t=e.items.find((e=>e.adCampaignKeyword));return t?t.adCampaignKeyword:null},B=e=>{var t=(0,l.useRef)(e),n=(0,l.useRef)();return(0,l.useEffect)((()=>{if(t.current=e,e||(n.current=null),e&&!n.current){var r=(null==e?void 0:e.environment)||"live",a=null==e?void 0:e.apiKey;n.current=((e,t,n)=>e&&t&&n?(0,y.Z)({apiKey:n,environment:e,activityType:"plays",isDotCom:t.endsWith(".com"),tokenRefreshToggle:!0}):null)(r,m(),a)}}),[e]),[n,t]},W=e=>{var{media:t,uiOptions:n={},onwardJourneyOptions:a={},height:i=0,onStateChanged:d,onMediaChanged:p,shouldAutoplay:v,shouldDelayEmbed:y=!1,shouldPauseMedia:f=!1,forcePlaceholder:h=!1,activityData:g,experimentalShouldAutoPlayMuted:b=!1}=e,w=(0,l.useRef)(),E=(0,l.useRef)();E.current=d;var A=(0,r.V)("//emp.bbci.co.uk/emp/bump-4/bump-4"),_=(0,o.Qg)(),j=(0,l.useRef)(t.currentlyPlayingKey),x=(0,l.useRef)(t.isAdvertisingEnabled),[F,I]=B(g),[W,H]=(0,l.useState)(!1),Q=b,V=i<=0,$=s[_]||s.default,q="localhost"===m(),X=(0,l.useMemo)((()=>q?l.createElement(k,null,c.localhostError):null),[q]),Y=(0,l.useRef)();return v&&Y.current&&Y.current.captureIntent(),(0,l.useEffect)((()=>{if(A&&!X&&!h&&!Y.current){var e=e=>{var n,r,{name:a,data:i}=e;I.current&&P({uasClient:F.current,smpEventName:a,currentTime:null==Y||null===(n=Y.current)||void 0===n||null===(r=n.player)||void 0===r?void 0:r.currentTime(),hostname:m(),activityData:I.current});var o="continuousPlay.play"===a,l=i&&void 0!==i.index,u=t.continuousPlay&&t.continuousPlay.mediaList&&t.continuousPlay.mediaList.length>1;o&&l&&u&&(j.current=t.continuousPlay.mediaList[i.index].key,p&&p({index:i.index})),E.current&&E.current({name:a,data:i})},r=function(){var r=T((function*(){var r=yield L(t);if(r){var i=z(t);window.dotcom.setConfig("adCampaign",i)}var o=r?yield window.dotcom.ads.getAdTag():void 0,l=S(S({},n),{},{locale:S({lang:_},n.locale)});Y.current=A.player(w.current,((e,t,n,r,a,i,o,l)=>{var u,d;return{product:"generic",plugins:{toLoad:(d={media:e,onwardJourneyOptions:n,hasAds:r,initialAdTag:a,unmutePluginEnabled:i},[U(d),K(d),Z(d)].filter(Boolean))},superResponsive:o,enableToucan:e.isToucanEnabled||!1,playlistObject:M(e,r),ui:t,statsObject:J(e),counterName:R(e),externalEmbedCode:e.externalEmbedUrl?'<iframe width="400" height="500" frameborder="0" src="{url}"></iframe>':void 0,externalEmbedUrl:e.externalEmbedUrl,appName:e.smpAppName,appType:null!==(u=e.smpAppType)&&void 0!==u?u:"responsive",mediator:e.mediator,muted:i,delayEmbed:l,webcastData:e.webcastData,supportFakeFullscreen:!0}})(t,l,a,r,o,Q,V,y)),G(Y.current,e,r,H),Y.current.load()}));return function(){return r.apply(this,arguments)}}();r()}}),[t,n,A,X,a,p,_,h,I,F,Q,V,y]),(0,l.useEffect)((()=>{if(!X&&Y.current){var e=j.current!==t.currentlyPlayingKey,n=x.current!==t.isAdvertisingEnabled;if(e||n){var r=function(){var e=T((function*(){var e=yield L(t);Y.current.loadPlaylist(M(t,e),{autoplay:v,counterName:R(t),statsObject:J(t),externalEmbedUrl:t.externalEmbedUrl,webcastData:t.webcastData}),j.current=t.currentlyPlayingKey,x.current=t.isAdvertisingEnabled}));return function(){return e.apply(this,arguments)}}();r()}else((e,t)=>{var{externalEmbedUrl:n}=e.settings();t&&t!==n&&e.settings({externalEmbedUrl:t})})(Y.current,t.externalEmbedUrl);var a=function(){var e=T((function*(){if(yield L(t)){var e=z(t);window.dotcom.setConfig("adCampaign",e)}}));return function(){return e.apply(this,arguments)}}();a()}}),[X,t,v]),(0,l.useEffect)((()=>{!X&&Y.current&&f&&Y.current.pause()}),[X,f]),(0,l.useEffect)((()=>{var e=e=>e.preventDefault();return W&&window.addEventListener("touchmove",e,{passive:!1}),()=>{window.removeEventListener("touchmove",e,{passive:!1})}}),[W]),l.createElement(D,{"data-chromatic":"ignore"},l.createElement(C,{ref:w,height:i,isInFakeFullscreen:W,"data-testid":"media-player-container"},X,!X&&l.createElement(N,{"data-testid":"bbc-logo-wrapper",height:i},l.createElement(u.Z,{type:"logo:bbc"}))),l.createElement("noscript",null,l.createElement(O.Z,{reason:$.NO_JS_REASON,message:$.NO_JS_MESSAGE,headingLevel:"2",collapseAtMobile:!0})))}}}]);