<!DOCTYPE html>
<html>
 <head>
  <meta content="NO-CACHE" http-equiv="PRAGMA"/>
  <meta content="no-cache" http-equiv="Cache-Control"/>
  <meta content="0" http-equiv="expires"/>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
   <meta content="(c) Copyright  2004 DBS Bank" name="Copyright">
    <meta content="width=device-width, initial-scale=1,  user-scalable=no" name="viewport"/>
    <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
    <meta content="telephone=no" name="format-detection"/>
    <meta content="Login" name="bwpageid"/>
    <link href="dbs/images/dbs_logo_min1.png" rel="shortcut icon"/>
    <title>
     DBS iBanking
    </title>
    <link href="style/themes_login.css?version=368" rel="stylesheet"/>
    <link href="style/language_login.css?version=368" rel="stylesheet"/>
    <link href="dbs/stylesheets/css/login.css?version=368" rel="stylesheet"/>
    <!-- Jboss Migration : jquery version upgraded from 1.10.2 to 3.3.1 -->
    <script src="scripts/vendor/jquery-3.3.1.js?version=368">
    </script>
    <script src="scripts/vendor/jquery-migrate-3.0.1.js" type="text/javascript">
    </script>
    <script src="scripts/login.js?version=368">
    </script>
    <script language="javascript" src="dsss/js/EncryptionApplet.js?version=100">
    </script>
    <script defer="" src="https://somniture.dbs.com.sg/aa/sg/ib/prod/launch.js?version=368">
    </script>
    <script language="javascript">
     var digitalData=null;
var bannerImpressionXid_1="";
var bannerImpressionXid_2="";
var bannerImpressionXid_3="";
var bannerImpressionXid_4="";
var bannerImpressionXid_5="";
var bannerImpressionXid_6="";
var loadImpressionCodeExecuted=0;
function aaBannerImpression(banner_address, offerId, id)
{
	if (id == '0') {
		bannerImpressionXid_1 = banner_address+"-"+offerId;
		
		if (loadImpressionCodeExecuted == 1) {
			
			digitalData.oxsBanner.xid_1 =  bannerImpressionXid_1;
			if (typeof _satellite === "undefined") {
				  //_satellite is undefined
			} else {
			  //alert(JSON.stringify(digitalData));
			  _satellite.track("oxs-banner-tracking-impression-1");
			}
		}
	} else if (id == '1') {
		bannerImpressionXid_2 = banner_address+"-"+offerId;
		
		if (loadImpressionCodeExecuted == 1) {
			digitalData.oxsBanner.xid_2 =  bannerImpressionXid_2;
			if (typeof _satellite === "undefined") {
				  //_satellite is undefined
			} else {
			  //alert(JSON.stringify(digitalData));
			  _satellite.track("oxs-banner-tracking-impression-2");
			}
		}
	} else if (id == '2') {
		bannerImpressionXid_3 = banner_address+"-"+offerId;
		
		if (loadImpressionCodeExecuted == 1) {
			digitalData.oxsBanner.xid_3 =  bannerImpressionXid_3;
			if (typeof _satellite === "undefined") {
				  //_satellite is undefined
			} else {
			  //alert(JSON.stringify(digitalData));
			  _satellite.track("oxs-banner-tracking-impression-3");
			}
		}
	} else if (id == '3') {
		bannerImpressionXid_4 = banner_address+"-"+offerId;
		
		if (loadImpressionCodeExecuted == 1) {
			digitalData.oxsBanner.xid_4 =  bannerImpressionXid_4;
			if (typeof _satellite === "undefined") {
				  //_satellite is undefined
			} else {
			  //alert(JSON.stringify(digitalData));
			  _satellite.track("oxs-banner-tracking-impression-4");
			}
		}
	} else if (id == '4') {
		bannerImpressionXid_5 = banner_address+"-"+offerId;
		
		if (loadImpressionCodeExecuted == 1) {
			digitalData.oxsBanner.xid_5 =  bannerImpressionXid_5;
			if (typeof _satellite === "undefined") {
				  //_satellite is undefined
			} else {
			  //alert(JSON.stringify(digitalData));
			  _satellite.track("oxs-banner-tracking-impression-5");
			}
		}
	} 
}
function aaBannerClick(banner_address, offerId, id)
{
	if (id == '0') {
		if (typeof _satellite === "undefined") {
			  //_satellite is undefined
		} else {
		  //alert(JSON.stringify(digitalData));
		  _satellite.track("oxs-banner-tracking-click-1");
		}
		
	} else if (id == '1') {
		if (typeof _satellite === "undefined") {
			  //_satellite is undefined
		} else {
		  //alert(JSON.stringify(digitalData));
		  _satellite.track("oxs-banner-tracking-click-2");
		}

	} else if (id == '2') {
		if (typeof _satellite === "undefined") {
			  //_satellite is undefined
		} else {
		  //alert(JSON.stringify(digitalData));
		  _satellite.track("oxs-banner-tracking-click-3");
		}

	} else if (id == '3') {
		if (typeof _satellite === "undefined") {
			  //_satellite is undefined
		} else {
		  //alert(JSON.stringify(digitalData));
		  _satellite.track("oxs-banner-tracking-click-4");
		}

	} else if (id == '4') {
		if (typeof _satellite === "undefined") {
			  //_satellite is undefined
		} else {
		  //alert(JSON.stringify(digitalData));
		  _satellite.track("oxs-banner-tracking-click-5");
		}

	}


}
function aaLoginError()
{
	if (typeof _satellite === "undefined") {
			//_satellite is undefined
	} else {
		if (digitalData.form != null) {
			digitalData.form.error = aaErrorMessage;
			console
					.log("crl_aa_header.jsp -> digitalData.form.error = aaErrorMessage"
							+ aaErrorMessage);
		}
		//alert(JSON.stringify(digitalData));
		_satellite.track("user-log-in-error-message");
	}

}
	function aaCheckErr() {

		var errorMsg = 'false';
	if( errorMsg !=null && errorMsg == 'true') {
		alert("login error");
		aaLoginError();
	}
}
    </script>
    <script>
     $(document).ready(function(){
if($('.browser-error').is(":visible")){
                $('iframe').addClass('broswer-open');
            }
	init();
	 window.onorientationchange = detectIPadOrientation;
            setiFrameHeight();
	
	//if ($('#ermsg').height() != null) {
            
            var isIE = /*@cc_on!@*/false || !!document.documentMode;
            if (isIE) {
                $('body').addClass('ie');
	        }

			//Fix CDSS-1479 start - adding a random tail to the iframe's src 
			var tail='?r+'+Math.round(Math.random*10000);
			var url=iframe.src.split('?')[0];
			iframe.src=url[0]+tail;
			//Fix CDSS-1479 end
});
$(window).resize(function() {
                setiFrameHeight()
            });
            var window_Height;

            function setiFrameHeight() {
                var d = $(".login-form").height();
                var e;
                window_Height = $(window).height();
                if ((window_Height - d) < 200) {
                    if (window_Height > d) {
                        e = window_Height
                    } else {
                        e = d
                    }
                    $("#iframe1").height(e + 100)
                } else {
                    $("#iframe1").height(window_Height)
                }
            }

            function detectIPadOrientation() {
;
                if (orientation == 0 || orientation == 90 || orientation == -90 || orientation == 180) {
                    setiFrameHeight();


                }
            }
var resized=false;

function validateResize() {
            if($(window).height() < 768 && resize==false){
                var _currentFrame = $('iframe'),
                _currentHeight = _currentFrame.height(),
                _currentErrorheight =  $('.generic-error').height();   
                $('.generic-error').show();
                if($('.generic-error').is(":visible")){
                    _currentFrame.height(_currentHeight + _currentErrorheight + 30);
                    $('iframe').addClass('error-open');
                }else{
                    _currentFrame.height(_currentHeight + _currentErrorheight);
                }
                resize = true;
            }
            else{
                $('.generic-error').show();
                resize = true;
            }         
        }
    </script>
    <!--[if lt IE 9]>  
  <style>label{display:block;} </style><![endif]-->
    <script src="js/polyfill_min_js.js?version=368">
    </script>
    <script src="js/fingerprintjs_v3_iife_min_js.js?version=368">
    </script>
    <script>
     var fpPromise = FingerprintJS.load();
		fpPromise
		.then(function (fp) { return fp.get() })
		.then(function (result) {
	
	var visitorId = result.visitorId;
	console.log('NDD FINGER_PRINT_ID - '+visitorId+', navigator userAgent - '+navigator.userAgent);
	document.getElementById('FINGER_PRINT_ID').value = visitorId;
	
	})
    </script>
   </meta>
  </meta>
 </head>
 <body onload="aaCheckErr();init();">
  <input id="aaDigitalData" name="aaDigitalData" type="hidden" value='{page:{pageInfo:{pageName:"sg:en:ib_pre:SKIN_NAME:login",language:"en",hier:"sg|en|ib_pre|SKIN_NAME|login",referringURL:"",destinationURL:"LOGIN",country:"sg"},category:{pageType:"forms - service - non-financial",site:"ib_pre",primaryCategory:"SKIN_NAME",subCategory1:"login",subCategory2:""}},user:{segment:{customerId:"",customerStatus:"existing"}},oxsBanner:{xid_1:"",xid_2:"",xid_3:"",xid_4:"",xid_5:""}}'/>
  <input id="aaCommand" name="aaCommand" type="hidden" value=""/>
  <input id="aaPidPrefix" name="aaPidPrefix" type="hidden" value="sg-SKIN_NAME-ib_pre-login:-"/>
  <input id="aaErrorMsg" name="aaErrorMsg" type="hidden" value=""/>
  <input id="aaLoginErrorMsg" name="aaLoginErrorMsg" type="hidden" value=""/>
  <iframe class="content-holder" frameborder="0" id="iframe1" name="iframe1" scrolling="no" src="https://www.dbs.com.sg/ibanking/login-ib-rwd/dbs/iframe.html">
  </iframe>
  <form class="MainForm" method="post" name="MainForm">
   <input name="isCancelClicked" type="hidden" value="0"/>
   <input name="isSubmitClicked" type="hidden" value="0"/>
   <!--body Starts Here-->
   <div class="login-form">
    <div class="text-center logo">
     <img src="dbs/images/desktoplogo.png"/>
    </div>
    <div class="brower-detect-error" id="browsererrormsg" style="display:none;">
     For an optimal viewing experience and security, we recommend that you use the latest web browser. Click
     <a href="http://www.dbs.com.sg/personal/ibanking/additionalinfo/faq/technical/default.page" target="_blank">
      here
     </a>
     for a list of supported browsers.
    </div>
    <input id="bot_username" style="position:absolute;top:-9999px;" type="text" value="bot"/>
    <input id="bot_password" style="position:absolute;top:-9999px;" type="password" value="bot"/>
    <div class="form-row input-layout">
     <input autocomplete="off" class="left" id="UID" maxlength="20" name="UID" placeholder="" tabindex="1" type="text"/>
     <span class="highlight">
     </span>
     <span class="bar" id="uidBar">
     </span>
     <label>
      User ID
     </label>
    </div>
    <div class="error-msg" id="errormsg" style="display:none">
     <h4 id="InvalidUserId">
      Sorry, you have entered an invalid User ID.
     </h4>
    </div>
    <div class="form-row input-layout pin">
     <input autocomplete="off" class="left" id="PIN" maxlength="9" name="PIN" onkeydown="return onlyNumerics(event)" onkeyup="keyUp(event)" placeholder="" tabindex="2" type="password"/>
     <span class="highlight">
     </span>
     <span class="bar" id="pinBar">
     </span>
     <label>
      PIN
     </label>
    </div>
    <div class="error-msg" id="errormsg1" style="display:none">
     <h4 id="InvalidPIN">
      The PIN length should range from 6 to 9 digits.
     </h4>
    </div>
    <div class="mTop-38">
     <button class="btn btn-primary block mBot-12" onclick="javascript:setStartTimeInLocalStorage();javascript:aaLoginClick();javascript:CheckErr(document.forms['MainForm']);callNIClick('int_buttonclick', 'ib_loginbox', 'login');" tabindex="3" title="Login" type="button">
      Login
     </button>
     <button class="btn btn-secondary right mBot-16" onclick="javascript:aaLinkClick('login box-','get started');javascript:submitibAPLEventForm('newIB');callNIClick('int_linkclick', 'ib_loginbox', 'register');" tabindex="4" title="Get Started" type="button">
      Get Started
     </button>
    </div>
    <div class="links">
     <ul class="">
      <li>
       Forgot
       <a href="javascript:aaLinkClick('login box-','forgot user id');javascript:submitibAPLEventForm('PrintUID');" onclick="callNIClick('int_linkclick', 'ib_loginbox', 'forgotuserid');" tabindex="5" title="User ID">
        User ID
       </a>
       or
       <a href="javascript:aaLinkClick('login box-','pin');javascript:submitibAPLEventForm('ResetPIN');" onclick="callNIClick('int_linkclick', 'ib_loginbox', 'forgotpin');" tabindex="6" title="PIN">
        PIN
       </a>
      </li>
      <li>
       <a href="javascript:aaLinkClick('login box-','faq');javascript:GetTip('https://www.dbs.com.sg/ibanking/redirect/index.html?ref=pweb-dbs-ibanking-login-faq')" onclick="callNIClick('int_linkclick', 'ib_loginbox', 'faq');" tabindex="7" title="Frequently Asked Questions">
        Frequently Asked Questions
       </a>
      </li>
      <li>
       <a href="javascript:aaLinkClick('login box-','maintenance schedule');javascript:GetTip('https://www.dbs.com.sg/ibanking/redirect/index.html?ref=pweb-dbs-maintenance-schedule')" onclick="callNIClick('int_linkclick', 'ib_loginbox', 'maintenance');" tabindex="8" title="Maintenance Schedule">
        Maintenance Schedule
       </a>
      </li>
      <li>
       <a href="https://www.dbs.com.sg/ibanking/redirect/index.html?ref=pweb-dbs-security-and-you-phishing" onclick="aaLinkClick('login box-','security and you');callNIClick('int_linkclick', 'ib_loginbox', 'security');" tabindex="9" target="_blank" title="Security &amp; You">
        Security &amp; You
       </a>
      </li>
     </ul>
    </div>
   </div>
   <!--body Ends Here-->
   <script language="JavaScript">
    function setStartTimeInLocalStorage(){
               try{ 	
		if (typeof(Storage) !== "undefined") {
    		sessionStorage.setItem("iWealthStartTimeForAWSAnalytics", new Date().getTime());
			console.log("iWealth IB AWS Analytics: stored startTime From Login button");
		} 
              }catch(Err){

		} 
	}
   </script>
   <script language="JavaScript">
    sessionStorage.clear();
   </script>
   <!-- OXS_NI_TAGGING - Starts -->
   <!-- OXS_NI_TAGGING - Ends -->
  </form>
  <form action="/ibAPL/Welcome" method="post" name="SubmitibAPLForm" target="_blank">
   <input name="IB_SELECTION" type="hidden" value="">
   </input>
  </form>
  <form action="/IB/Welcome" method="post" name="LogonEventForm" target="_top">
   <input name="statemachineStateName" type="hidden" value="23e95b5b0a5b17ef00adb1d416bf0b08"/>
   <input name="statemachineEventName" type="hidden" value="LogonEvent"/>
   <input name="ENCRYPTED_PIN_BLOCK" type="hidden" value=""/>
   <input name="IAM_ENCRYPTED_PIN_BLOCK" type="hidden" value=""/>
   <input name="RAW_PIN_LENGTH" type="hidden" value=""/>
   <input name="RSA_KEY_INDEX" type="hidden" value="0004"/>
   <input name="RANDOM_NUMBER" type="hidden" value="0798676666942729997"/>
   <input name="RANDOM_NUMBER_AR" type="hidden" value="35B5F2A11B9BF886"/>
   <input name="CLIENT_RANDOM_NUMBER" type="hidden" value=""/>
   <input name="INDEX_KEY" type="hidden" value=""/>
   <input name="USER_LOGON_NAME" type="hidden" value=""/>
   <input name="FROM_IB" type="hidden" value="TRUE"/>
   <input name="USER_AGENT" type="hidden" value="Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36"/>
   <input id="behavio_hidden" name="BBDATA" type="hidden" value=""/>
   <!-- MR1501_OXS - Starts -->
   <input name="PWEB_META_DATA" type="hidden" value=""/>
   <!-- MR1501_OXS - Ends -->
   <input name="TRACK_TOKEN" type="hidden" value="168920230145435B5F2A11B9BF886"/>
   <input id="FINGER_PRINT_ID" name="FINGER_PRINT_ID" type="hidden" value=""/>
  </form>
  <script language="javascript" src="js/client_javascript.js?version=368">
  </script>
  <script language="javascript" src="js/client_validation.js?version=368">
  </script>
  <script language="javascript" src="scripts/notification.js?version=368">
  </script>
  <script language="javascript" src="scripts/collector.form.js?version=368">
  </script>
  <script language="javascript" src="dsss/js/DBSLogin.js">
  </script>
  <script>
   $(document).ready(function() {
        var maxLimit = 180;
    	var str = "";
    	var charcount = str.length;
        if(charcount > maxLimit){
          var temp = str.substring(0,maxLimit);
          $('#content').text(temp)
          $('#notice').show();
          $('#more').show();
        } else{
          $('#content').text(str)
          $('#more').hide();
          $('#notice').show();
        }

        $('#showmore').on('click', function(){
          $('#content').text(str)
          $('#notice').show();
          $('#less').show();
          $('#more').hide()
        })

        $('#showless').on('click', function(){
          $('#less').hide()
          $('#more').show();
          if(charcount > maxLimit){
          var temp = str.substring(0,maxLimit);
          $('#content').text(temp)
          $('#notice').show();
          $('#more').show();
        } else{
          $('#content').text(str)
          $('#more').hide();
          $('#notice').show();
        }
        })
    });
  </script>
  <script language="javascript" src="dsss/js/pinEncryption.js">
  </script>
  <script language="javascript" src="iam/js/IAMPinEncryption.js">
  </script>
  <script language="javascript" src="iam/js/util_obf.js">
  </script>
  <script language="javascript" src="iam/js/3des_obf.js">
  </script>
  <script language="javascript" src="iam/js/jsbn_obf.js">
  </script>
  <script language="javascript" src="iam/js/rsa_obf.js">
  </script>
  <!--[if IE]>
	<script src="scripts/html5shiv.js"></script>
	<![endif]-->
  <script language="JavaScript">
   var submitOnceErrorMsg="You may submit this request once.";

	 //added for enter key event
        $(document).keyup(function (event) {
            var keypressed = event.keyCode || event.which;
            if (keypressed == 13) {
              if(event.target.id=="UID" || event.target.id=="PIN"){
					CheckErr(document.forms['MainForm']);
				}
            }
        }); 
	
	function CheckErr(objForm)
	{
		$('.login-form').removeClass('headShake');
		if (document.MainForm.isCancelClicked.value == "0" && document.MainForm.isSubmitClicked.value == "0"){
		   var userId = document.MainForm.UID.value;
		   var bValid = true;
		   var minlength ="5";
		   var maxlength ="20";
		   if(isWithinLengthRange(userId,minlength,maxlength) && !isNumeric(userId) && isAlphaNumeric(userId))
		   {
				bValid = true;
				$('#UID').removeClass('red');
                $('.login-form').removeClass('headShake');
                
		   }
		   else
		   {
				// var errmsg="Sorry, you have entered an invalid User ID.";
				// document.getElementById("InvalidUserId").innerHTML = errmsg;
				document.getElementById("errormsg").style.display = 'none'; 
				document.getElementById("InvalidPIN").style.display = 'none';
				if (document.getElementById("ermsg") != null) {
					document.getElementById("ermsg").style.display = 'none';
					
					 $('#UID').removeClass('red');
                     $('.login-form').removeClass('headShake');
				}
				
				document.getElementById("InvalidUserId").style.display = 'block';
				
                    $('#UID').focus();
                    $('#UID').addClass('red');
                    $('.login-form').addClass('headShake');
               
				document.getElementById("errormsg").style.display = 'block'; 
				bValid = false;
				aaLoginError();
		   }
	/*		
		//to change iframe width
		  if(document.getElementById("errormsg").style.display == 'block' || 
					document.getElementById('browsererrormsg').style.display == 'block'){
					setiFrameHeight();
			}
	*/			
		   if (bValid)
		   {
			  document.LogonEventForm.elements["USER_LOGON_NAME"].value = userId;
			  handleLogin();
		   }
		   else{
			   document.MainForm.UID.focus();
			   validateResize()
			   return;
		   }
		}else{
			alert(submitOnceErrorMsg);
			return;
		}
	}
	
	function handleLogin() {
	
		
		var pinNumber = document.MainForm.PIN.value;
		var errmsg1;
		if (!isPinValid(pinNumber)) {
			// errmsg1="The PIN length should range from 6 to 9 digits.";
			// document.getElementById("InvalidPIN").innerHTML = errmsg1;
			document.getElementById("errormsg1").style.display = 'none';
			//document.getElementById("errormsg").style.display = 'none'; 
			document.getElementById("InvalidUserId").style.display = 'none';
			if (document.getElementById("ermsg") != null) {
				document.getElementById("ermsg").style.display = 'none';
				 $('#PIN').removeClass('red');
                 $('.login-form').removeClass('headShake');
				 
			}
			document.getElementById("InvalidPIN").style.display = 'block';
			
                $('#PIN').focus();
                $('#PIN').addClass('red');
                $('.login-form').addClass('headShake');
             
			document.getElementById("errormsg1").style.display = 'block'; 
			document.MainForm.PIN.value = "";
			document.MainForm.PIN.focus();
			validateResize();
			aaLoginError();
			return;
		}
		if(!bIsDigitOnly(pinNumber)){
			// errmsg1="The PIN length should range from 6 to 9 digits.";
			// document.getElementById("InvalidPIN").innerHTML = errmsg1;
			document.getElementById("InvalidUserId").style.display = 'none';
			if (document.getElementById("ermsg") != null) {
				document.getElementById("ermsg").style.display = 'none';
				 $('#PIN').removeClass('red');
                 $('.login-form').removeClass('headShake');
            }
                $('#PIN').focus();
                $('#PIN').addClass('red');
                $('#.login-form').addClass('headShake');
               
			document.getElementById("errormsg1").style.display = 'block'; 
			document.getElementById("InvalidPIN").style.display = 'block';
			document.MainForm.PIN.value = "";
			document.MainForm.PIN.focus();
			aaLoginError();
				return;
		}
		
			var Exp_String="010001";
			var publicKeyMod = 'cad9002636393e27c7dc1bbde9835ac45f0376a6b4ced03fad8816c8b6a7ba1b899735c26342c3d3239bf1d52c2daf7f39ce18ebc24e3441f30e2b6b6a4c1d78d53c5f927212aaa94f67f889a8687c86a0d89da85cc9826b3dad1e5e13e289c1061ca24d39324452b859b4e780a0a33b3ab3830fd59d1a0e6afbe24bded7912d460c94ac507cc51e32dcf8fb4be4e79a108776aafb35240b1e1bb7b45b28cbd5eeec92016ddece3049ae136375e6f925bb3a7c2a9541782f32f7e02121084a2931c6354b77a025834fce1a067f24e68f80bbb9a0c56b216878da4651edfa4e356c3e74a2c3b03386d38fbf9a256d6f3fca59e7dc02aaaabb7bfa520b430009b5'; 
			var keyIndex = '0004'; 
			var randomNumber = '35B5F2A11B9BF886';
			var iamPubKey ='aeb6833696e0e955cbbbab58319c14f7e16a58d9f16e57b7dc603d66bf6ffa0420d524c45b363cef9591bc906377ce6cf80f139079bd8bb3991807465db70af0d96ebeaba470b0169d30855189bfd1ba21e4e39da5f57493f47f7984b877b9aa56aaf5c6d213a0c7b2506c3e525a91803e2684c8efb56df7b6e64c584bbe8518eb7da413e939c26dad603c7690d3ddbba717060ee7d8f09c1649cbb265f04e65dae70a2f4dba78012eeb5fbceebe73667d4c59ff955a1414d5401b0beada953ea6b58b703c1a9ae443c254152efa8bfb66b56ffa49e91aff6273b803d45035ab90a9d19ddf180b1a1d6b728d5bda0499fe154beb6537a03b16f5ae5d150f36cb';
			var encResult,encyPass,encodPara;
		
			initialisePublicKeyData(publicKeyMod,Exp_String);
			encResult=OBM_EncryptPassword_Ex(pinNumber,randomNumber,"SHA2-512"); 
			if(encResult == "0" ){
				encyPass= OBM_GetEncryptedPassword();
				encodPara=OBM_GetEncodingParameter();
		 	}
	 	
			document.LogonEventForm.ENCRYPTED_PIN_BLOCK.value =encyPass;
			document.LogonEventForm.CLIENT_RANDOM_NUMBER.value =encodPara;
			
			var dbslogin = new DBSLogin();
			var iamencyPass;
			
				var iamEncryption = new RIBLogon();	

				iamEncryption.setKeyValue(iamPubKey); //pass in the public key 
				try{		
					iamencyPass = iamEncryption.encyptPwd(pinNumber,randomNumber); //for pin change
				}catch(e){throw e} 
			
			document.LogonEventForm.IAM_ENCRYPTED_PIN_BLOCK.value =iamencyPass;
			
			document.LogonEventForm.RAW_PIN_LENGTH.value = document.MainForm.PIN.value.length;
			document.MainForm.isSubmitClicked.value = "1";
			document.LogonEventForm.INDEX_KEY.value =keyIndex;
			//BB Behaviosec changes Start
			
			var timingData;
			timingData = document.getElementById("behavio_hidden");
			if (timingData && typeof bw !== "undefined") 
				timingData.value = bw.getData();
			document.LogonEventForm.BBDATA.value = timingData.value;
			
			//BB Behaviosec changes End	
			document.LogonEventForm.submit();
		 
	}
	function doClear()
	{
		document.MainForm.UID.value = "";
		document.MainForm.PIN.value  = "";
		window.focus();
		document.MainForm.UID.focus();
	}
	
	function main()
	{
		if (document.MainForm.isCancelClicked.value == "0" && document.MainForm.isSubmitClicked.value == "0"){
			   alert("We have cancelled this transaction at your request.");
			   document.MainForm.isCancelClicked.value = "1";
			   window.top.location.href="http://www.dbs.com/sg/personal/ebanking/";
		}
		else{
			alert(submitOnceErrorMsg);
			return;
		}
	}
  </script>
  <script language="JavaScript">
   function submitibAPLEventForm(sel){
	if ( sel == "ResetPIN"){
			document.SubmitibAPLForm.IB_SELECTION.value ="RESET_IB_PIN";
	}else if(sel == "PrintUID"){
			document.SubmitibAPLForm.IB_SELECTION.value ="PRINT_UID";
	}else if(sel == "newIB"){
			document.SubmitibAPLForm.IB_SELECTION.value ="CREATE_IB_PROFILE";
	}
		document.SubmitibAPLForm.submit();
}
  </script>
  <script language="javascript">
   if (document.getElementById("aaDigitalData")) {
		if(document.getElementById("aaDigitalData").value!=null && document.getElementById("aaDigitalData").value!="") {
			digitalData = eval('('+document.getElementById("aaDigitalData").value+')');
			
			if (digitalData.user.segment.customerId == '') {
				digitalData.user.segment.customerId='';
			}
			
			var aaPageName = "";
			var aaHier = "";
			var aaPrimaryCategory = "";
			var aaSkinName = 'dbs';
			if (digitalData.page.pageInfo.pageName != '') {
			  aaPageName = digitalData.page.pageInfo.pageName;
			  aaPageName = aaPageName.replace("SKIN_NAME", aaSkinName);
			  digitalData.page.pageInfo.pageName = aaPageName;
			}
			
			//brand is a new element added to pageInfo array
			digitalData.page.pageInfo.brand = aaSkinName;
			
			if (digitalData.page.pageInfo.hier != '') {
			  aaHier = digitalData.page.pageInfo.hier;
			  aaHier = aaHier.replace("SKIN_NAME", aaSkinName);
			  digitalData.page.pageInfo.hier = aaHier;
			}
			
			if (digitalData.page.category != '') {
				if (digitalData.page.category.primaryCategory != '') {
				  aaPrimaryCategory = digitalData.page.category.primaryCategory;
				  aaPrimaryCategory = aaPrimaryCategory.replace("SKIN_NAME", aaSkinName);
				  digitalData.page.category.primaryCategory = aaPrimaryCategory;
				}
			}
			if (digitalData.form != null) {
				if (digitalData.form.name != null) {
				  aaFormName = digitalData.form.name;
				  aaFormName = aaFormName.replace("~", "'");
				  digitalData.form.name = aaFormName;
				}
				if (digitalData.form.stepDetail != null) {
				  aaFormStepDetail = digitalData.form.stepDetail;
				  aaFormStepDetail = aaFormStepDetail.replace("~", "'");
				  digitalData.form.stepDetail = aaFormStepDetail;
				}

			}
			if (document.getElementById("aaErrorMsg")) {
				console.log("aaErrorMsg");
				if(document.getElementById("aaErrorMsg").value!=null && document.getElementById("aaErrorMsg").value!="") {
					var aaErrorMessage = document.getElementById("aaErrorMsg").value;
					if (digitalData.form != null) {
					  digitalData.form.error = aaErrorMessage;
					}
				}
			}
			if (document.getElementById("aaLoginErrorMsg")) {
				if(document.getElementById("aaLoginErrorMsg").value!=null
						&& document.getElementById("aaLoginErrorMsg").value!="") {
					var aaErrorMessage = document.getElementById("aaLoginErrorMsg").value;
					digitalData.form={error:""};
					digitalData.form.error = aaErrorMessage;
					if (typeof _satellite === "undefined") {
					  //_satellite is undefined
					} else {
                          digitalData.form.error = aaErrorMessage;
					  	  //alert(JSON.stringify(digitalData));
					 	  _satellite.track("user-log-in-error-message");
					}
				}
			}
			
			if (bannerImpressionXid_1 != null && bannerImpressionXid_1 !='') {
				digitalData.oxsBanner.xid_1 =  bannerImpressionXid_1;
				if (typeof _satellite === "undefined") {
					  //_satellite is undefined
				} else {
				  //alert(JSON.stringify(digitalData));
				  _satellite.track("oxs-banner-tracking-impression-1");
				}
			}
			if (bannerImpressionXid_2 != null && bannerImpressionXid_2 !='') {
				digitalData.oxsBanner.xid_2 =  bannerImpressionXid_2;
				if (typeof _satellite === "undefined") {
					  //_satellite is undefined
				} else {
				  //alert(JSON.stringify(digitalData));
				  _satellite.track("oxs-banner-tracking-impression-2");
				}
			}
			if (bannerImpressionXid_3 != null && bannerImpressionXid_3 !='') {
				digitalData.oxsBanner.xid_3 =  bannerImpressionXid_3;
				if (typeof _satellite === "undefined") {
					  //_satellite is undefined
				} else {
				  //alert(JSON.stringify(digitalData));
				  _satellite.track("oxs-banner-tracking-impression-3");
				}
			}
			if (bannerImpressionXid_4 != null && bannerImpressionXid_4 !='') {
				digitalData.oxsBanner.xid_4 =  bannerImpressionXid_4;
				if (typeof _satellite === "undefined") {
					  //_satellite is undefined
				} else {
				  //alert(JSON.stringify(digitalData));
				  _satellite.track("oxs-banner-tracking-impression-4");
				}
			}
			if (bannerImpressionXid_5 != null && bannerImpressionXid_5 !='') {
				digitalData.oxsBanner.xid_5 =  bannerImpressionXid_5;
				if (typeof _satellite === "undefined") {
					  //_satellite is undefined
				} else {
				  //alert(JSON.stringify(digitalData));
				  _satellite.track("oxs-banner-tracking-impression-5");
				}
			}
			loadImpressionCodeExecuted=1;
			
			//alert(JSON.stringify(digitalData));
		}
	}
	
	if (typeof _satellite === "undefined") {
	  //_satellite is undefined
	} else {
	  _satellite.pageBottom();
	}
	
addLoadEvent(formOnLoad);	

function formOnLoad() {
	if (document.getElementById("aaCommand")) {
		if(document.getElementById("aaCommand").value!=null && document.getElementById("aaCommand").value!="") {
			var aaDigitalDataCommand = document.getElementById("aaCommand").value;
			if (typeof _satellite === "undefined") {
			  //_satellite is undefined
			} else {
			  _satellite.track(aaDigitalDataCommand);
			}
					
		}
	} 
};

function addLoadEvent(func) {
  var oldonload = window.onload;
  if (typeof window.onload != 'function') {
    window.onload = func;
  } else {
    window.onload = function() {
      if (oldonload) {
        oldonload();
      }
      func();
    }
  }
}
  </script>
  <script language="javascript">
   function aaButtonClick(fldName,fldId)
{
	var fieldIdName = "";
	if (isNaN(fldName)) {
		fieldIdName = fldName;
	} else {
		fieldIdName = fldId;
	}
	if (fieldIdName == "") {
	} else {
		if (document.getElementById("aaCommand")) {
			if(document.getElementById("aaCommand").value!=null && document.getElementById("aaCommand").value!="") {
				var aaCommand = document.getElementById("aaCommand").value;
				var aaServiceProductType = "";
				if (aaCommand.indexOf("service") > -1) {
					aaServiceProductType = "service";
				} else if (aaCommand.indexOf("product") > -1) {
					aaServiceProductType = "product";
				}
				if (aaServiceProductType != "") {
					var aaDigitalDataCommand = aaServiceProductType + "-form-generic-button";
					digitalData.form.button = fieldIdName;
					if (typeof _satellite === "undefined") {
					  //_satellite is undefined
					} else {
					  //alert(JSON.stringify(digitalData));
					  _satellite.track(aaDigitalDataCommand);
					}
				}
			}
		} 
	}
}
function aaLostFocusField(fldName,fldId)
{
	var fieldIdName = "";
	if (isNaN(fldName)) {
		fieldIdName = fldName;
	} else {
		fieldIdName = fldId;
	}
	if (fieldIdName == "") {
	} else {
		if (document.getElementById("aaCommand")) {
			if(document.getElementById("aaCommand").value!=null && document.getElementById("aaCommand").value!="") {
				var aaCommand = document.getElementById("aaCommand").value;
				var aaServiceProductType = "";
				if (aaCommand.indexOf("service") > -1) {
					aaServiceProductType = "service";
				} else if (aaCommand.indexOf("product") > -1) {
					aaServiceProductType = "product";
				}
				if (aaServiceProductType != "") {
					var aaDigitalDataCommand = aaServiceProductType + "-form-lost-focus-field";
					digitalData.form.field = fieldIdName;
					if (typeof _satellite === "undefined") {
					  //_satellite is undefined
					} else {
					  //alert(JSON.stringify(digitalData));
					  _satellite.track(aaDigitalDataCommand);
					}
				}
			}
		} 

	}
}

function aaLinkClick(linkType, linkName)
{
	var aaSkinName = 'dbs';
	if (document.getElementById("aaPidPrefix")) {
		if(document.getElementById("aaPidPrefix").value!=null && document.getElementById("aaPidPrefix").value!="") {
			var aaPidPrefix = document.getElementById("aaPidPrefix").value;
			aaPidPrefix = aaPidPrefix.replace("SKIN_NAME", aaSkinName);
			var aaDigitalDataCommand = "links-clickthrough";
			digitalData.campaign = {};
			aaPidPrefix = aaPidPrefix.replace(" ","");
			linkType = linkType.replace(" ","");
			linkName = linkName.replace("~","'");
			linkName = linkName.replace("|","'");
			var aaPid = aaPidPrefix + linkType + linkName; 
			digitalData.campaign.pid = aaPid;
			if (typeof _satellite === "undefined") {
			  //_satellite is undefined
			} else {
			  //alert(JSON.stringify(digitalData));
			  _satellite.track(aaDigitalDataCommand);
			}
		}
	} 
}
function aaLoginClick()
{
	console.log("crl_iframe_init->aaLoginClick");
		if (typeof _satellite === "undefined") {
	  //_satellite is undefined
	} else {
	  //alert(JSON.stringify(digitalData));
	  _satellite.track("user-log-in-button-clickthrough");
	}

}
function aaLogoutClick()
{
		if (typeof _satellite === "undefined") {
	  //_satellite is undefined
	} else {
	  //alert(JSON.stringify(digitalData));
	  _satellite.track("user-log-out");
	}

}
function aa2FAelevationUsage()
{
		if (typeof _satellite === "undefined") {
	  //_satellite is undefined
	} else {
	  //alert(JSON.stringify(digitalData));
	  _satellite.track("2fa-elevation-usage");
	}

}
function aaClickThrough(linkType, linkName)
{                                   
    if (document.getElementById("aaPidPrefix")) {        
        if(document.getElementById("aaPidPrefix").value!=null && document.getElementById("aaPidPrefix").value!="") {    
            var aaPidPrefix = document.getElementById("aaPidPrefix").value;        
            aaPidPrefix = aaPidPrefix.replace("SKIN_NAME", "dbs");            
            var aaDigitalDataCommand = "IB-generic-links-clickthrough";    
            digitalData.link = {};        
            digitalData.link.name={};            
            aaPidPrefix = aaPidPrefix.replace(" ","");
            linkType = linkType.replace(" ","-");
            linkName = linkName.replace("~","'");
            linkName = linkName.replace("|","'");            
            var aaPid =linkType; 
            digitalData.link.name=aaPid ;
            if (typeof _satellite === "undefined") {
              //_satellite is undefined
            } else {
              //alert(JSON.stringify(digitalData));
              _satellite.track(aaDigitalDataCommand);
            }
        }
    } 
 
}
  </script>
  <!-- Include file pdb_iframe_init.jsp for AWS Performance Analytics-->
  <form action="null" id="awspost" name="awspost">
   <input id="trackEventToken" name="trackEventToken" type="hidden" value=""/>
   <input id="trackEventSourceId" name="trackEventSourceId" type="hidden" value=""/>
   <input id="eventCategoryId" name="eventCategoryId" type="hidden" value=""/>
   <input id="customerLocale" name="customerLocale" type="hidden" value=""/>
   <input id="pageTitle" name="pageTitle" type="hidden" value=""/>
   <input id="serviceId" name="serviceId" type="hidden" value=""/>
   <input id="serviceName" name="serviceName" type="hidden" value=""/>
   <input id="hashId" name="hashId" type="hidden" value=""/>
   <input id="userAgent" name="userAgent" type="hidden" value=""/>
   <input id="requestSize" name="requestSize" type="hidden" value=""/>
   <input id="responseSize" name="responseSize" type="hidden" value=""/>
   <input id="startTime" name="startTime" type="hidden" value=""/>
   <input id="endTime" name="endTime" type="hidden" value=""/>
   <input id="clientTimezone" name="clientTimezone" type="hidden" value=""/>
   <input id="navigationStart" name="navigationStart" type="hidden" value=""/>
   <input id="unloadEventStart" name="unloadEventStart" type="hidden" value=""/>
   <input id="unloadEventEnd" name="unloadEventEnd" type="hidden" value=""/>
   <input id="redirectStart" name="redirectStart" type="hidden" value=""/>
   <input id="redirectEnd" name="redirectEnd" type="hidden" value=""/>
   <input id="fetchStart" name="fetchStart" type="hidden" value=""/>
   <input id="domainLookupStart" name="domainLookupStart" type="hidden" value=""/>
   <input id="domainLookupEnd" name="domainLookupEnd" type="hidden" value=""/>
   <input id="connectStart" name="connectStart" type="hidden" value=""/>
   <input id="connectEnd" name="connectEnd" type="hidden" value=""/>
   <input id="secureConnectionStart" name="secureConnectionStart" type="hidden" value=""/>
   <input id="requestStart" name="requestStart" type="hidden" value=""/>
   <input id="responseStart" name="responseStart" type="hidden" value=""/>
   <input id="responseEnd" name="responseEnd" type="hidden" value=""/>
   <input id="domLoading" name="domLoading" type="hidden" value=""/>
   <input id="domInteractive" name="domInteractive" type="hidden" value=""/>
   <input id="domContentLoadedEventStart" name="domContentLoadedEventStart" type="hidden" value=""/>
   <input id="domContentLoadedEventEnd" name="domContentLoadedEventEnd" type="hidden" value=""/>
   <input id="domComplete" name="domComplete" type="hidden" value=""/>
   <input id="loadEventStart" name="loadEventStart" type="hidden" value=""/>
   <input id="loadEventEnd" name="loadEventEnd" type="hidden" value=""/>
  </form>
  <script language="javascript">
   function getTimeZone(){
			var offset = new Date().getTimezoneOffset(), o = Math.abs(offset);
			return (offset < 0 ? "+" : "-") + ("00" + Math.floor(o / 60)).slice(-2) + "" + ("00" + (o % 60)).slice(-2);
		}

		function setAwsPostData(){
			var trackToken="168920230145435B5F2A11B9BF886";

			var now = new Date().getTime();
			var page_load_time = now - performance.timing.navigationStart;
			var language = navigator.userLanguage || navigator.language;
	
			var sName = "";
			var subCategory1 = digitalData.page.category.subCategory1;
			var subCategory2 = digitalData.page.category.subCategory2;
		
			if(null != subCategory1 && subCategory1.length != 0){
				sName = sName + subCategory1;
			}
		
			if(null != subCategory2 && subCategory2.length != 0){
				sName = sName + "|" + subCategory2;
			}
			document.getElementById("trackEventToken").value = trackToken;
			document.getElementById("trackEventSourceId").value = "1";
			document.getElementById("eventCategoryId").value = "1";
			document.getElementById("customerLocale").value = language;
			document.getElementById("pageTitle").value = digitalData.page.pageInfo.pageName;
			document.getElementById("serviceId").value = digitalData.page.pageInfo.destinationURL;
			document.getElementById("serviceName").value = sName;
			// document.getElementById("hashId").value = digitalData.user.segment.customerId;
			document.getElementById("hashId").value = "";
			document.getElementById("userAgent").value = navigator.userAgent;
			document.getElementById("requestSize").value = "0";
			document.getElementById("responseSize").value = "0";
			document.getElementById("startTime").value = performance.timing.navigationStart;
			document.getElementById("endTime").value = now;
			document.getElementById("clientTimezone").value = getTimeZone();
			document.getElementById("navigationStart").value = performance.timing.navigationStart;
			document.getElementById("unloadEventStart").value = performance.timing.unloadEventStart;
			document.getElementById("unloadEventEnd").value = performance.timing.unloadEventEnd;
			document.getElementById("redirectStart").value = performance.timing.redirectStart;
			document.getElementById("redirectEnd").value = performance.timing.redirectEnd;
			document.getElementById("fetchStart").value = performance.timing.fetchStart;
			document.getElementById("domainLookupStart").value = performance.timing.domainLookupStart;
			document.getElementById("domainLookupEnd").value = performance.timing.domainLookupEnd;
			document.getElementById("connectStart").value = performance.timing.connectStart;
			document.getElementById("connectEnd").value = performance.timing.connectEnd;
			document.getElementById("secureConnectionStart").value = performance.timing.secureConnectionStart;
			document.getElementById("requestStart").value = performance.timing.requestStart;
			document.getElementById("responseStart").value = performance.timing.responseStart;
			document.getElementById("responseEnd").value = performance.timing.responseEnd;
			document.getElementById("domLoading").value = performance.timing.domLoading;
			document.getElementById("domInteractive").value = performance.timing.domInteractive;
			document.getElementById("domContentLoadedEventStart").value = performance.timing.domContentLoadedEventStart;
			document.getElementById("domContentLoadedEventEnd").value = performance.timing.domContentLoadedEventEnd;
			document.getElementById("domComplete").value = performance.timing.domComplete;
			document.getElementById("loadEventStart").value = performance.timing.loadEventStart;
			document.getElementById("loadEventEnd").value = performance.timing.loadEventEnd;
		}
		
		try{
			setAwsPostData();
		}catch(Error){

		}

		// async ajax call to submit form
		$.ajax({
		   type: 'POST',   
		   url: $('#awspost').attr("action"),   
		   data: $('#awspost').serialize(),
	 	   headers: {"Content-Type": "application/x-www-form-urlencoded"}
		}); 


		  var jbtrackToken1="168920230145435B5F2A11B9BF886";
		 
		    $(document).ready(function() {
		    var findForm = $(document).find('form');
		      for(var i=0; i<=findForm.length; i++){
		    	  var hasHidden = $(findForm[i]).find('input[type="hidden"]').length;
			         var hiddenFieldName = $(findForm[i]).find('input[type="hidden"]').attr('name');
			         if((!hasHidden) || (hiddenFieldName != "TRACK_TOKEN")){
		       $('<input>').attr({
		              type: 'hidden',
		              id: 'TRACK_TOKEN',
		              name: 'TRACK_TOKEN',
		              value : jbtrackToken1
		        }).appendTo(findForm[i]);
		      }
		      }
		    });
  </script>
  <script language="javascript">
   $('form').find("input[type=text], input[type=password], textarea").each(function (ev) {
            
            //$(this).addClass("inputEmpty");
            
            $('#UID').blur(function()
                {
                    if( !$(this).val() ) {
                          $(this).removeClass("notEmpty");
                    }else {
                          $(this).addClass("notEmpty");
                          $(this).removeClass("red");
                    }
                });
            $('#PIN').blur(function()
                {
                    if( !$(this).val() ) {
                          $(this).removeClass("notEmpty");
                    }else {
                          $(this).addClass("notEmpty");
                          $(this).removeClass("red");
                    }
                });
            
        });
        
        
        var route_name = 'IBROUTEID';
        document.cookie = route_name+"="+"; path=/IB";
        

		//Fix CDSS-1479 start - loading iframe
	    $( window ).load(function() {document.getElementById('iframe1').src += '';});
	    //Fix CDSS-1479 end
  </script>
  <script crossorigin="anonymous" data-cf-beacon='{"rayId":"7e5cda2c8d2669a1","version":"2023.4.0","b":1,"token":"da1ebdd11f164eac98a301c90071e184","si":100}' defer="" integrity="sha512-jGCTpDpBAYDGNYR5ztKt4BQPGef1P0giN6ZGVUi835kFF88FOmmn8jBQWNgrNd8g/Yu421NdgWhwQoaOPFflDw==" src="https://static.cloudflareinsights.com/beacon.min.js/v52afc6f149f6479b8c77fa569edb01181681764108816">
  </script>
 </body>
 <head>
  <meta content="NO-CACHE" http-equiv="PRAGMA"/>
 </head>
</html>
