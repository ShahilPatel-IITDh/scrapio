(()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}jQuery((function(t){var a=php_const.application_id,n=php_const.search_api_key,i=php_const.index_name_prefix+"searchable_posts",o=php_const.index_name_prefix+"searchable_terms",s=algoliasearch(a,n),c=t(".algolia-container"),l=t(".main-header"),r=t(".left-column, .right-column, .carousel-wrap");jQuery("#algolia-search-events-box").length>0&&(r=t(".event-main-story-list, .carousel-wrap"));var h=!0;var p="";if(jQuery("body").hasClass("dezeen-hotlist")&&(p="Dezeen Hot List"),jQuery("#algolia-search-events-box").length>0&&(p="Event"),jQuery("#algolia-search-box").length>0){var g,d=function(){window.scrollY?t("html,body").animate({scrollTop:t("#algolia-hits-wrap").offset().top-64},"slow"):t("html,body").animate({scrollTop:t("#algolia-hits-wrap").offset().top-148},"slow")};if("object"!==e(s)&&s.appId!==a)console.log("algolia is not defined :-0");else if(i){var u=instantsearch({indexName:i,searchClient:s,autofocus:!1,urlSync:{mapping:{q:"s"}},searchFunction:function(e){""!==e.state.query?(this.once("render",(function(){c.show(),r.hide(),l.addClass("algolia-search"),h=!1})),e.search()):h||(c.hide(),r.show(),l.removeClass("algolia-search"),t((function(){setTimeout((function(){t("button.ais-SearchBox-reset").click(),t("button.ais-ClearRefinements-button").click(),console.log("reset")}),100)})),h=!0)}}),m=instantsearch.widgets.configure({facetingAfterDistinct:!0,highlightPreTag:"__ais-highlight__",highlightPostTag:"__/ais-highlight__",facetsRefinements:{post_type_label:[p]},hitsPerPage:20}),f=instantsearch.widgets.clearRefinements({container:"#algolia-clear"}),y=instantsearch.widgets.searchBox({container:"#algolia-search-box",placeholder:"Search",autofocus:!1,wrapInput:!1});if(jQuery("#algolia-search-events-box").length>0)instantsearch.widgets.searchBox({container:"#algolia-search-events-box",placeholder:"Search",wrapInput:!1});var _=instantsearch.widgets.hits({container:"#algolia-hits",templates:{empty:'No results were found for "<strong>{{query}}</strong>".',item:function(e,t){var a="";void 0!==e.images.homepage_article_standard&&void 0!==e.images.homepage_carousel&&(a='\n                                    <figure>\n                                        <a href="'.concat(e.permalink,'"\n                                            ').concat(t("click",e,"Article Clicked"),'\n                                            title="').concat(e.post_title,'">\n                                            <img srcset="').concat(e.images.homepage_article_standard.url,'"\n                                                src="').concat(e.images.homepage_carousel.url,'" alt="').concat(e.post_title,'"\n                                                title="').concat(e.post_title,'"\n                                                itemprop="image"/>\n                                        </a>\n                                    </figure>'));var n="";void 0!==e.event_premium&&(n="event-premium");var i="",o="",s="";if(void 0!==e.event_header)i='\n                                    <div class="event-header">\n                                        <h3 itemprop="name headline comment-origin">\n                                            <a href="'.concat(e.permalink,'"\n                                                ').concat(t("click",e,"Article Clicked"),'\n                                                title="').concat(e.post_title,'"\n                                                itemprop="url">\n                                                ').concat(instantsearch.highlight({attribute:"post_title",hit:e}),'\n                                            </a>\n                                        </h3>\n                                        <div class="event-date-and-location dzheader">').concat(e.event_header,"</div>\n                                    </div>");else{var c="";void 0!==e.hotlist_year&&(c=" | Dezeen Hot List ".concat(e.hotlist_year)),o='\n                                    <h2 itemprop="name headline comment-origin">\n                                        <a href="'.concat(e.permalink,'"\n                                            ').concat(t("click",e,"Article Clicked"),'\n                                            title="').concat(e.post_title,'"\n                                            itemprop="url">\n                                            ').concat(instantsearch.highlight({attribute:"post_title",hit:e}),"\n                                            ").concat(c,"\n                                        </a>\n                                    </h2>");var l="";void 0!==e.comments_snippet&&(l=' | <span class="comments">'.concat(e.comments_snippet,"</span>")),s='\n                                    <div class="search-results-meta-information">\n                                        <span class="author"><a href="'.concat(e.author_post_url,'">').concat(e.post_author.display_name,'</a></span>\n                                        |\n                                        <span class="date">').concat(e.post_date_formatted,"</span>\n                                        ").concat(l,"\n                                    </div>")}var r="";return null!=e._snippetResult?void 0!==e._snippetResult.content&&(r='<span class="suggestion-post-content">'.concat(e._snippetResult.content.value,"</span>")):null!=e._highlightResult&&void 0!==e._highlightResult.content&&(r='<span class="suggestion-post-content">'.concat(e._highlightResult.content.value,"</span>")),'\n                                    <article class="ais-hits--homepage_article_standard comment-block '.concat(n,'" itemtype="http://schema.org/Article">\n                                        ').concat(i,"\n\n                                        ").concat(a,'\n\n                                        <div class="ais-hits--content right">\n                                            ').concat(o,'\n                                            <div class="comment">\n                                                <p>').concat(r,"</p>\n                                            </div>\n                                        </div>\n\n                                        ").concat(s,"\n\n                                    </article>\n                                ")}}}),v=(instantsearch.widgets.hierarchicalMenu({container:"#facet-categories",separator:" > ",sortBy:["count"],attributes:["taxonomies_hierarchical.category.lvl0","taxonomies_hierarchical.category.lvl1","taxonomies_hierarchical.category.lvl2"],templates:{header:'<h3 class="widgetcat">Categories:</h3>'}}),instantsearch.widgets.refinementList({container:"#facet-tags-list",attribute:"taxonomies.post_tag",operator:"and",limit:15,sortBy:["isRefined:desc","count:desc","name:asc"],templates:{item:'\n                            <label class="ais-refinement-list--label {{#isRefined}}active{{/isRefined}}">\n                                <input type="checkbox" class="ais-refinement-list--checkbox" value="{{label}}">\n                                {{label}}\n                                <span class="ais-refinement-list--count">{{count}}</span>\n                            </label>\n                            '}})),b=instantsearch.widgets.hits({container:document.querySelector("#algolia-tags-hits"),templates:{empty:"<div><p>No results </p></div>",item:function(e,t){return'\n                                    <a class="algolia-tag"  href="'.concat(e.permalink,'"\n                                        ').concat(t("click",e,"Taxonomy Clicked"),'\n                                        title="').concat(e.name,'"\n                                        itemprop="url">\n                                        ').concat(instantsearch.highlight({attribute:"name",hit:e}),"\n                                    </a>")}}}),w=instantsearch.widgets.configure({hitsPerPage:5}),x=instantsearch.connectors.connectHits((function(e,t){var a=e.hits,n=(e.widgetParams,document.querySelector("#algolia-hits-wrap")),i=document.querySelector("#algolia-tags-box");void 0===a||0==a.length?(i.style.display="none",n.style.borderTop="0"):(i.style.display="block",n.style.borderTop="3px solid #000")})),k=null;if(o?k=instantsearch.widgets.index({indexName:o}).addWidgets([b,w,x({container:document.querySelector("#algolia-tag-hits")})]):console.log("there are no tag indices :-0"),"undefined"!=typeof google_analytics_ID)instantsearch.widgets.analytics({pushFunction:function(e,t,a){window.ga("create",google_analytics_ID),window.ga("set","page","/?s="+t.query+"&"+e+"&numberOfHits="+a.nbHits),window.ga("send","pageView")}});if("undefined"!=typeof ALGOLIA_INSIGHTS_SRC){u.addWidgets([instantsearch.widgets.configure({clickAnalytics:!0})]);var S=window.aa("setUserToken",S),T=instantsearch.middlewares.createInsightsMiddleware({insightsClient:window.aa,onEvent:function(e,t){var a=e.insightsMethod,n=e.payload,i=e.widgetType,o=e.eventType;console.log("insightsMethod: "+a),console.log("payload: "),console.log(n),console.log("widgetType: "+i),console.log("eventType: "+o),"ais.hits"!==i||"view"!==o&&"click"!==o||t(a,n)}});u.use(T)}u.addWidgets([m,f,y,_,v,k]),jQuery("#algolia-search-events-box").length>0&&u.addWidgets([searchEventsBox]),"undefined"!=typeof google_analytics_ID&&u.addWidgets([analytics]),u.start(),jQuery("#algolia-search-box input").attr("type","search").select(),jQuery("#algolia-search-events-box input").attr("type","search").select(),t("#algolia-search-box .ais-SearchBox-input").attr("id","ais-SearchBox-input"),t("#algolia-search-box .ais-SearchBox-input").blur(),t('<label for="ais-SearchBox-input" class="visuallyhidden">Enter your site search term</label>').insertBefore("#algolia-search-box .ais-SearchBox-input")}else console.log("there are no searchable indices :-0");var B=t(".ais-SearchBox-input");B.on("keyup",(function(){clearTimeout(g),g=setTimeout(d,1e3)})),B.on("keydown",(function(){clearTimeout(g)}))}}))})();
//# sourceMappingURL=algolia-min.js.map