(()=>{var e=jQuery,t=PLATFORM_URL+"/api/newsletter";function n(t){var n=t.closest("form"),r=n.find(".newsletter-name-input");e(window).scrollTop(n.closest("#newsletter-form").offset().top-200),r.length?""!=r.val()?s(n):alert("Please enter a name"):s(n)}function s(t){var n=t.find(".newsletter-email-input").val();/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(n)?t.hasClass("awards-subscribe-form")?r(t):void 0!==t.data("step2")?(t.find(".button-spinner").show(),window.location.replace(t.data("step2")+"?user_email="+encodeURIComponent(n))):t.find("#newsletter-step-1").hide(0,(function(){!function(){if(0===e("#recaptcha_js").length){var t=document.createElement("script");t.setAttribute("id","recaptcha_js"),t.type="text/javascript",t.src="https://www.google.com/recaptcha/api.js",e("head").append(t)}e(".subscribe-box").prepend('<div class="g-recaptcha" data-sitekey="6LfL418UAAAAAAxM2ZALaN-2IV7FjwtMCcoTXzIW" style="transform:scale(0.77);-webkit-transform:scale(0.77);transform-origin:0 0;-webkit-transform-origin:0 0;"></div>'),e("#newsletter-step-2").show()}()})):alert("Oops! Looks like there was a mistake in your email address. Please try entering it again.")}function r(n){var s=n.serializeArray();e.post(t,s,(function(e){e.errors?function(e,t){e.find("#newsletter-error-message").html(t).show()}(n,e.messages[0]):function(e){e.find("#newsletter-error-message").hide(),e.find("#newsletter-step-1").hide(),e.find("#newsletter-step-2").hide(),e.find("#newsletter-step-3").show()}(n)}))}e(document).ready((function(){e(".newsletter-email-button").on("click",(function(t){t.preventDefault(),n(e(this))})),e(".newsletter-email-input").on("keypress",(function(t){(function(e){return 13==e.which})(t)&&(t.preventDefault(),n(e(this)))})),void 0!==e("#subscriber_email_dezeen_newsletter").data("autofilled")&&n(e("#subscriber_email_dezeen_newsletter")),e(".newsletter-confirm-button").click((function(t){var n,s,i;t.preventDefault(),n=e(this),s=n.closest("form"),i=function(e){return 0==e.find('input[name="newsletters[]"]:checked').length?{error:!0,message:"Please subscribe to one of the newsletters"}:e.find('input[name="consent[]"]:checked').length!=e.find('input[name="consent[]"]').length?{error:!0,message:"Please agree the sharing and processing policies."}:{error:!1}}(s),e(window).scrollTop(s.closest("#newsletter-form").offset().top-200),i.error?alert(i.message):r(s)})),e(".newsletter-cancel-button").click((function(t){t.preventDefault();var n=e(this).closest("form");n.find("#newsletter-step-1").show(),n.find(".newsletter-email-input").val(""),n.find("#newsletter-step-2").hide(),e(window).scrollTop(n.closest("#newsletter-form").offset().top-200)}))}))})();
//# sourceMappingURL=newsletter-min.js.map