"use strict";!function(e,a,t){var n=e();e.fn.dropdownHover=function(t){return"ontouchstart"in document?this:(n=n.add(this.parent()),this.each(function(){function o(e){l.parents(".navbar").find(".navbar-toggle").is(":visible")||(a.clearTimeout(i),a.clearTimeout(s),s=a.setTimeout(function(){n.find(":focus").blur(),!0===p.instantlyCloseOthers&&n.removeClass("open"),a.clearTimeout(s),l.attr("aria-expanded","true"),r.addClass("open"),l.trigger(u)},p.hoverDelay))}var i,s,l=e(this),r=l.parent(),c={delay:500,hoverDelay:0,instantlyCloseOthers:!0},d={delay:e(this).data("delay"),hoverDelay:e(this).data("hover-delay"),instantlyCloseOthers:e(this).data("close-others")},u="show.bs.dropdown",p=e.extend(!0,{},c,t,d);r.hover(function(e){if(!r.hasClass("open")&&!l.is(e.target))return!0;o(e)},function(){a.clearTimeout(s),i=a.setTimeout(function(){l.attr("aria-expanded","false"),r.removeClass("open"),l.trigger("hide.bs.dropdown")},p.delay)}),l.hover(function(e){if(!r.hasClass("open")&&!r.is(e.target))return!0;o(e)}),r.find(".dropdown-submenu").each(function(){var t,n=e(this);n.hover(function(){a.clearTimeout(t),n.children(".dropdown-menu").show(),n.siblings().children(".dropdown-menu").hide()},function(){var e=n.children(".dropdown-menu");t=a.setTimeout(function(){e.hide()},p.delay)})})}))},e(document).ready(function(){e('[data-hover="dropdown"]').dropdownHover()})}(jQuery,window);const TREE_VIEW_OPTION_MEGA_MENU={animated:300,collapsed:!0,unique:!0,persist:"location"},TREE_VIEW_OPTION_MOBILE_MENU={animated:300,collapsed:!0,unique:!0,hover:!1},DEVICE={ANDROID:/Android/i,BLACK_BERRY:/BlackBerry/i,IOS:/iPhone|iPad|iPod/i,OPERA:/Opera Mini/i,WINDOW:/IEMobile/i,ANY:/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i};!function(e){e.extend(e.fn,{swapClass:function(e,a){var t=this.filter("."+e);return this.filter("."+a).removeClass(a).addClass(e),t.removeClass(e).addClass(a),this},replaceClass:function(e,a){return this.filter("."+e).removeClass(e).addClass(a).end()},hoverClass:function(a){return a=a||"hover",this.on("hover",function(){e(this).addClass(a)},function(){e(this).removeClass(a)})},heightToggle:function(e,a){e?this.animate({height:"toggle"},e,a):this.each(function(){jQuery(this)[jQuery(this).is(":hidden")?"show":"hide"](),a&&a.apply(this,arguments)})},heightHide:function(e,a){e?this.animate({height:"hide"},e,a):(this.hide(),a&&this.each(a))},prepareBranches:function(e){return e.prerendered||(this.filter(":last-child:not(ul)").addClass(a.last),this.filter((e.collapsed?"":"."+a.closed)+":not(."+a.open+")").find(">ul").hide()),this.filter(":has(>ul),:has(>.dropdown-menu)")},applyClasses:function(t,n){this.filter(":has(>ul):not(:has(>a))").find(">span").on("click",function(a){n.apply(e(this).next())}).add(e("a",this)).hoverClass(),t.prerendered||(this.filter(":has(>ul:hidden),:has(>.dropdown-menu:hidden)").addClass(a.expandable).replaceClass(a.last,a.lastExpandable),this.not(":has(>ul:hidden),:has(>.dropdown-menu:hidden)").addClass(a.collapsable).replaceClass(a.last,a.lastCollapsable),this.prepend('<div class="'+a.hitarea+'"/>').find("div."+a.hitarea).each(function(){var a="";e.each(e(this).parent().attr("class").split(" "),function(){a+=this+"-hitarea "}),e(this).addClass(a)})),this.find("div."+a.hitarea).on("click",n)},treeview:function(t){function n(){e(this).parent().find(">.hitarea").swapClass(a.collapsableHitarea,a.expandableHitarea).swapClass(a.lastCollapsableHitarea,a.lastExpandableHitarea).end().swapClass(a.collapsable,a.expandable).swapClass(a.lastCollapsable,a.lastExpandable).find(">ul,>.dropdown-menu").heightToggle(t.animated,t.toggle),t.unique&&e(this).parent().siblings().find(">.hitarea").replaceClass(a.collapsableHitarea,a.expandableHitarea).replaceClass(a.lastCollapsableHitarea,a.lastExpandableHitarea).end().replaceClass(a.collapsable,a.expandable).replaceClass(a.lastCollapsable,a.lastExpandable).find(">ul,>.dropdown-menu").heightHide(t.animated,t.toggle)}function o(){var a=[];s.each(function(t,n){a[t]=e(n).is(":has(>ul:visible)")?1:0}),e.cookie(t.cookieId,a.join(""))}if((t=e.extend({cookieId:"treeview"},t)).add)return this.trigger("add",[t.add]);if(t.toggle){var i=t.toggle;t.toggle=function(){return i.apply(e(this).parent()[0],arguments)}}this.addClass("treeview");var s=this.find("li").prepareBranches(t);switch(t.persist){case"cookie":var l=t.toggle;t.toggle=function(){o(),l&&l.apply(this,arguments)},function(){var a=e.cookie(t.cookieId);if(a){var n=a.split("");s.each(function(a,t){e(t).find(">ul")[parseInt(n[a])?"show":"hide"]()})}}();break;case"location":var r=this.find("a").filter(function(){return this.href.toLowerCase()==location.href.toLowerCase()});r.length&&r.addClass("selected").parents("ul, li").add(r.next()).show()}return s.applyClasses(t,n),t.control&&(!function(t,o){function i(o){return function(){return n.apply(e("div."+a.hitarea,t).filter(function(){return!o||e(this).parent("."+o).length})),!1}}e("a:eq(0)",o).on("click",i(a.collapsable)),e("a:eq(1)",o).cli.on("click",i(a.expandable)),e("a:eq(2)",o).on("click",i())}(this,t.control),e(t.control).show()),this.on("add",function(o,i){e(i).prev().removeClass(a.last).removeClass(a.lastCollapsable).removeClass(a.lastExpandable).find(">.hitarea").removeClass(a.lastCollapsableHitarea).removeClass(a.lastExpandableHitarea),e(i).find("li").andSelf().prepareBranches(t).applyClasses(t,n)})}});var a=e.fn.treeview.classes={open:"open",closed:"closed",expandable:"expandable",expandableHitarea:"expandable-hitarea",lastExpandableHitarea:"lastExpandable-hitarea",collapsable:"collapsable",collapsableHitarea:"collapsable-hitarea",lastCollapsableHitarea:"lastCollapsable-hitarea",lastCollapsable:"lastCollapsable",lastExpandable:"lastExpandable",last:"last",hitarea:"hitarea"};e.fn.Treeview=e.fn.treeview}(jQuery);let isDevice=e=>{navigator.userAgent.match(e)};class Mobile{constructor(){this._topBarDevice(),this._fixVCAnimation(),this._initTreeviewMenu(),this._categoryMenu(),this._mobileMenu(),$(window).scroll(()=>{this._topBarDevice();this._fixVCAnimation()})}_topBarDevice(){var e=$(window).scrollTop(),a=$(".topbar-device-mobile").height(),t=$(window).scrollTop();$(".topbar-device-mobile").toggleClass("active",e<=a),$("#tbay-mobile-menu, #tbay-mobile-menu-navbar").toggleClass("offsetop",0==t),$("#wpadminbar").length>0&&$("body").toggleClass("active-admin-bar",0==t)}_fixVCAnimation(){if($(".wpb_animate_when_almost_visible").length>0&&!$(".wpb_animate_when_almost_visible").hasClass("wpb_start_animation")){let a=$(window).height(),t=$(".wpb_animate_when_almost_visible:not(.wpb_start_animation)");var e=t.offset().top-$(window).scrollTop();isDevice(DEVICE.ANY)?t.removeClass("wpb_animate_when_almost_visible"):e<a-50&&t.addClass("wpb_start_animation animated")}}_initTreeviewMenu(){$("#category-menu").addClass("treeview"),jQuery(".treeview-menu .menu, #category-menu").treeview(TREE_VIEW_OPTION_MEGA_MENU),jQuery("#main-mobile-menu, #main-mobile-menu-xlg").treeview(TREE_VIEW_OPTION_MOBILE_MENU)}_categoryMenu(){$(".category-inside .category-inside-title").on("click",function(e){$(e.target).parents(".category-inside").toggleClass("open"),$(e.target).next().slideToggle()})}_mobileMenu(){$('[data-toggle="offcanvas"], .btn-offcanvas').on("click",function(){$("#wrapper-container").toggleClass("active"),$("#tbay-mobile-menu").toggleClass("active")}),$("#main-mobile-menu .caret").on("click",function(e){$("#main-mobile-menu .dropdown").removeClass("open"),$(e.target).parent().addClass("open")})}}class AccountMenu{constructor(){this._slideToggleAccountMenu(".tbay-login"),this._slideToggleAccountMenu(".topbar-mobile"),this._pucaClickNotMyAccountMenu()}_pucaClickNotMyAccountMenu(){var e=$(window),a=$(".tbay-login .dropdown .account-menu,.topbar-mobile .dropdown .account-menu,.tbay-login .dropdown .account-button,.topbar-mobile .dropdown .account-button");e.on("click.Bst",function(e){0!=a.has(e.target).length||a.is(e.target)||($(".tbay-login .dropdown .account-menu").slideUp(500),$(".topbar-mobile .dropdown .account-menu").slideUp(500))})}_slideToggleAccountMenu(e){$(e).find(".dropdown .account-button").on("click",function(){$(e).find(".dropdown .account-menu").slideToggle(500)})}}class BackToTop{constructor(){this._init()}_init(){$(window).scroll(function(){var e=$(this).scrollTop()>400;$(".tbay-to-top").toggleClass("active",e),$(".tbay-category-fixed").toggleClass("active",e)}),$("#back-to-top-mobile, #back-to-top").on("click",this._onClickBackToTop)}_onClickBackToTop(){$("html, body").animate({scrollTop:"0px"},800)}}class CanvasMenu{constructor(){this._init()}_init(){$('[data-toggle="offcanvas"], .btn-offcanvas').on("click",function(){$(".row-offcanvas").toggleClass("active")}),$("#main-menu-offcanvas .caret").on("click",function(){return $("#main-menu-offcanvas .dropdown").removeClass("open"),$(this).parent().addClass("open"),!1}),$('[data-toggle="offcanvas-main"]').on("click",function(){$("#wrapper-container").toggleClass("active"),$("#tbay-offcanvas-main").toggleClass("active")})}}class FuncCommon{constructor(){this._progressAnimation(),this._createWrapStart(),$(".mod-heading .widget-title > span").wrapStart(),this._pucaResizeMegamenu(),$(window).on("resize",()=>{this._pucaResizeMegamenu();this._fixFull()}),this._fixFull()}_createWrapStart(){$.fn.wrapStart=function(){return this.each(function(){var e=$(this).contents().filter(function(){return 3==this.nodeType}).first(),a=e.text().trim(),t=a.split(" ",1).join(" ");e.length&&(e[0].nodeValue=a.slice(t.length),e.before("<b>"+t+"</b>"))})}}_progressAnimation(){$("[data-progress-animation]").each(function(){var e=$(this);e.appear(function(){var a=e.attr("data-appear-animation-delay")?e.attr("data-appear-animation-delay"):1;a>1&&e.css("animation-delay",a+"ms"),setTimeout(function(){e.animate({width:e.attr("data-progress-animation")},800)},a)},{accX:0,accY:-50})})}_pucaResizeMegamenu(){var e=$("body").innerWidth();$(".tbay_custom_menu").length>0&&$(".tbay_custom_menu").hasClass("tbay-vertical-menu")&&(e>767?this._resizeMegaMenuOnDesktop():this._initTreeViewForMegaMenuOnMobile()),$(".tbay-megamenu").length>0&&$(".tbay-megamenu,.tbay-offcanvas-main").hasClass("verticle-menu")&&e>767&&this._resizeMegaMenuVertical()}_resizeMegaMenuVertical(){var e=parseInt($("#main-container.container").innerWidth()),a=e-parseInt($(".verticle-menu").innerWidth());$(".verticle-menu").find(".aligned-fullwidth").children(".dropdown-menu").css({"max-width":a,width:e-30})}_resizeMegaMenuOnDesktop(){let e=$("#main-container.container").innerWidth()-$(".tbay-vertical-menu").innerWidth(),a=$("#main-container.container").innerWidth()-30;$(".tbay-vertical-menu").find(".active-mega-menu").children(".dropdown-menu").css({"max-width":e,width:a})}_initTreeViewForMegaMenuOnMobile(){$(".tbay-vertical-menu > .widget_nav_menu >.nav > ul").treeview(TREE_VIEW_OPTION_MEGA_MENU)}_fixFull(){var e=$("#tbay-main-content").width(),a=($("#tbay-main-content").width()-$("#tbay-main-content >.container").width())/2;$(".tb-full").css("width",e),$(".tb-full").css("max-width",e),$("body").hasClass("rtl")?$(".tb-full").css("margin-right",-a):$(".tb-full").css("margin-left",-a),$(".tb-full >.vc_fluid").css("padding",0)}}class NewsLetter{constructor(){this._init()}_init(){$("#popupNewsletterModal").on("hidden.bs.modal",function(){Cookies.set("hiddenmodal",1,{expires:.1,path:"/"})}),setTimeout(function(){void 0!==Cookies.get("hiddenmodal")&&""!=Cookies.get("hiddenmodal")||$("#popupNewsletterModal").modal("show")},3e3)}}class Search{constructor(){this._init()}_init(){this._pucaSearchMobile(),this._searchToTop(),$(".button-show-search").on("click",()=>$(".tbay-search-form").addClass("active")),$(".button-hidden-search").on("click",()=>$(".tbay-search-form").removeClass("active"))}_pucaSearchMobile(){$(".topbar-mobile .search-popup, .search-device-mobile").each(function(){$(this).find(".show-search").on("click",e=>{e.preventDefault();var a=$(e.currentTarget);a.parent().toggleClass("open");a.parent().find(".tbay-search").focus();$(document.body).trigger("search_device_mobile")})}),$(".search-mobile-close").each(function(e){let a=$(this).data("id");$(a).on("click",function(){$(this).parent().removeClass("open")})}),$(".topbar-mobile .dropdown-menu").on("click",function(e){e.stopPropagation()})}_searchToTop(){$(".search-totop-wrapper .btn-search-totop").on("click",function(){$(".search-totop-content").toggleClass("active"),$(this).toggleClass("active")});var e=$(".search-totop-wrapper .btn-search-totop, .search-totop-content");$(window).on("click.Bst",function(a){0!=e.has(a.target).length||e.is(a.target)||($(".search-totop-wrapper .btn-search-totop").removeClass("active"),$(".search-totop-content").removeClass("active"))})}}class Preload{constructor(){this._init()}_init(){if($.fn.jpreLoader){var e=$(".js-preloader");e.jpreLoader({},function(){e.addClass("preloader-done"),$("body").trigger("preloader-done"),$(window).trigger("resize")})}$(".tbay-page-loader").delay(100).fadeOut(400,function(){$("body").removeClass("tbay-body-loading"),$(this).remove()}),$(document.body).hasClass("tbay-body-loader")&&setTimeout(function(){$(document.body).removeClass("tbay-body-loader"),$(".tbay-page-loader").fadeOut(250)},300)}}class Tabs{constructor(){$("ul.nav-tabs li a").on("shown.bs.tab",e=>{$(document.body).trigger("puca_tabs_carousel")})}}class Accordion{constructor(){this._init()}_init(){0!==$(".single-product").length&&$("#accordion").on("shown.bs.collapse",function(e){var a=$(this).find(".collapse.in").prev(".tabs-title");a&&$("html,body").animate({scrollTop:$(a).offset().top-150},500)})}}class MenuDropdownsAJAX{constructor(){"undefined"!=typeof puca_settings&&this._initmenuDropdownsAJAX()}_initmenuDropdownsAJAX(){var e=this;$("body").on("mousemove",function(){$(".menu").has(".dropdown-load-ajax").each(function(){var a=$(this);a.hasClass("dropdowns-loading")||a.hasClass("dropdowns-loaded")||e.isNear(a,50,event)&&e.loadDropdowns(a)})})}loadDropdowns(e){var a=this;e.addClass("dropdowns-loading");var t="",n="",o="";"tbay-mobile-menu-navbar"===e.closest("nav").attr("id")?($("#main-mobile-menu-mmenu-wrapper").length>0&&(o+="_"+$("#main-mobile-menu-mmenu-wrapper").data("id")),$("#main-mobile-second-mmenu-wrapper").length>0&&(o+="_"+$("#main-mobile-second-mmenu-wrapper").data("id")),t=puca_settings.storage_key+"_megamenu_mobile"+o):t=puca_settings.storage_key+"_megamenu_"+e.closest("nav").find("ul").data("id"),n=localStorage.getItem(t);var i=!1,s=[];e.find(".dropdown-load-ajax").each(function(){s.push($(this).find(".dropdown-html-placeholder").data("id"))});try{i=JSON.parse(n)}catch(e){console.log("cant parse Json",e)}i?(a.renderResults(i,e),"tbay-mobile-menu-navbar"!==e.attr("id")&&e.removeClass("dropdowns-loading").addClass("dropdowns-loaded")):$.ajax({url:puca_settings.ajaxurl,data:{action:"puca_load_html_dropdowns",ids:s},dataType:"json",method:"POST",success:function(n){"success"===n.status?(a.renderResults(n.data,e),localStorage.setItem(t,JSON.stringify(n.data))):console.log("loading html dropdowns returns wrong data - ",n.message)},error:function(){console.log("loading html dropdowns ajax error")}})}renderResults(e,a){var t=this;Object.keys(e).forEach(function(n){t.removeDuplicatedStylesFromHTML(e[n],function(e){let t=e;const o='<li[^>]*><a[^>]*href=["]'+window.location.href+'["]>.*?</a></li>';let i=e.match(o);if(null!==i){let e=i[0],a=e.match(/(?:class)=(?:["']\W+\s*(?:\w+)\()?["']([^'"]+)['"]/g)[0].split('"')[1],n=a+" active",o=e.replace(a,n);t=t.replace(e,o)}a.find('[data-id="'+n+'"]').replaceWith(t),"tbay-mobile-menu-navbar"!==a.attr("id")&&(a.addClass("dropdowns-loaded"),setTimeout(function(){a.removeClass("dropdowns-loading")},1e3))})})}isNear(e,a,t){var n=e.offset().left-a,o=e.offset().top-a,i=n+e.width()+2*a,s=o+e.height()+2*a,l=t.pageX,r=t.pageY;return l>n&&l<i&&r>o&&r<s}removeDuplicatedStylesFromHTML(e,a){if(puca_settings.combined_css)return void a(e);{const t=/<style>.*?<\/style>/gm;let n=e.replace(t,"");return void a(n)}}}window.$=window.jQuery,jQuery(document).ready(()=>{new MenuDropdownsAJAX,new Tabs,new Accordion,new Mobile,new AccountMenu,new BackToTop,new CanvasMenu,new FuncCommon,new NewsLetter,new Preload,new Search});
