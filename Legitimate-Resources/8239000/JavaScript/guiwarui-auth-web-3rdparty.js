;(function(window,document,undefined){var classes=[];var tests=[];var ModernizrProto={_version:'3.6.0',_config:{'classPrefix':'','enableClasses':true,'enableJSClass':true,'usePrefixes':true},_q:[],on:function(test,cb){var self=this;setTimeout(function(){cb(self[test]);},0);},addTest:function(name,fn,options){tests.push({name:name,fn:fn,options:options});},addAsyncTest:function(fn){tests.push({name:null,fn:fn});}};var Modernizr=function(){};Modernizr.prototype=ModernizrProto;Modernizr=new Modernizr();Modernizr.addTest('svgfilters',function(){var result=false;try{result='SVGFEColorMatrixElement'in window&&SVGFEColorMatrixElement.SVG_FECOLORMATRIX_TYPE_SATURATE==2;}
catch(e){}
return result;});Modernizr.addTest('svg',!!document.createElementNS&&!!document.createElementNS('http://www.w3.org/2000/svg','svg').createSVGRect);var prefixes=(ModernizrProto._config.usePrefixes?' -webkit- -moz- -o- -ms- '.split(' '):['','']);ModernizrProto._prefixes=prefixes;var toStringFn=({}).toString;Modernizr.addTest('svgclippaths',function(){return!!document.createElementNS&&/SVGClipPath/.test(toStringFn.call(document.createElementNS('http://www.w3.org/2000/svg','clipPath')));});function is(obj,type){return typeof obj===type;};function testRunner(){var featureNames;var feature;var aliasIdx;var result;var nameIdx;var featureName;var featureNameSplit;for(var featureIdx in tests){if(tests.hasOwnProperty(featureIdx)){featureNames=[];feature=tests[featureIdx];if(feature.name){featureNames.push(feature.name.toLowerCase());if(feature.options&&feature.options.aliases&&feature.options.aliases.length){for(aliasIdx=0;aliasIdx<feature.options.aliases.length;aliasIdx++){featureNames.push(feature.options.aliases[aliasIdx].toLowerCase());}}}
result=is(feature.fn,'function')?feature.fn():feature.fn;for(nameIdx=0;nameIdx<featureNames.length;nameIdx++){featureName=featureNames[nameIdx];featureNameSplit=featureName.split('.');if(featureNameSplit.length===1){Modernizr[featureNameSplit[0]]=result;}else{if(Modernizr[featureNameSplit[0]]&&!(Modernizr[featureNameSplit[0]]instanceof Boolean)){Modernizr[featureNameSplit[0]]=new Boolean(Modernizr[featureNameSplit[0]]);}
Modernizr[featureNameSplit[0]][featureNameSplit[1]]=result;}
classes.push((result?'':'no-')+featureNameSplit.join('-'));}}}};var docElement=document.documentElement;var isSVG=docElement.nodeName.toLowerCase()==='svg';function setClasses(classes){var className=docElement.className;var classPrefix=Modernizr._config.classPrefix||'';if(isSVG){className=className.baseVal;}
if(Modernizr._config.enableJSClass){var reJS=new RegExp('(^|\\s)'+classPrefix+'no-js(\\s|$)');className=className.replace(reJS,'$1'+classPrefix+'js$2');}
if(Modernizr._config.enableClasses){className+=' '+classPrefix+classes.join(' '+classPrefix);if(isSVG){docElement.className.baseVal=className;}else{docElement.className=className;}}};var html5;if(!isSVG){;(function(window,document){var version='3.7.3';var options=window.html5||{};var reSkip=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i;var saveClones=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i;var supportsHtml5Styles;var expando='_html5shiv';var expanID=0;var expandoData={};var supportsUnknownElements;(function(){try{var a=document.createElement('a');a.innerHTML='<xyz></xyz>';supportsHtml5Styles=('hidden'in a);supportsUnknownElements=a.childNodes.length==1||(function(){(document.createElement)('a');var frag=document.createDocumentFragment();return(typeof frag.cloneNode=='undefined'||typeof frag.createDocumentFragment=='undefined'||typeof frag.createElement=='undefined');}());}catch(e){supportsHtml5Styles=true;supportsUnknownElements=true;}}());function addStyleSheet(ownerDocument,cssText){var p=ownerDocument.createElement('p'),parent=ownerDocument.getElementsByTagName('head')[0]||ownerDocument.documentElement;p.innerHTML='x<style>'+cssText+'</style>';return parent.insertBefore(p.lastChild,parent.firstChild);}
function getElements(){var elements=html5.elements;return typeof elements=='string'?elements.split(' '):elements;}
function addElements(newElements,ownerDocument){var elements=html5.elements;if(typeof elements!='string'){elements=elements.join(' ');}
if(typeof newElements!='string'){newElements=newElements.join(' ');}
html5.elements=elements+' '+newElements;shivDocument(ownerDocument);}
function getExpandoData(ownerDocument){var data=expandoData[ownerDocument[expando]];if(!data){data={};expanID++;ownerDocument[expando]=expanID;expandoData[expanID]=data;}
return data;}
function createElement(nodeName,ownerDocument,data){if(!ownerDocument){ownerDocument=document;}
if(supportsUnknownElements){return ownerDocument.createElement(nodeName);}
if(!data){data=getExpandoData(ownerDocument);}
var node;if(data.cache[nodeName]){node=data.cache[nodeName].cloneNode();}else if(saveClones.test(nodeName)){node=(data.cache[nodeName]=data.createElem(nodeName)).cloneNode();}else{node=data.createElem(nodeName);}
return node.canHaveChildren&&!reSkip.test(nodeName)&&!node.tagUrn?data.frag.appendChild(node):node;}
function createDocumentFragment(ownerDocument,data){if(!ownerDocument){ownerDocument=document;}
if(supportsUnknownElements){return ownerDocument.createDocumentFragment();}
data=data||getExpandoData(ownerDocument);var clone=data.frag.cloneNode(),i=0,elems=getElements(),l=elems.length;for(;i<l;i++){clone.createElement(elems[i]);}
return clone;}
function shivMethods(ownerDocument,data){if(!data.cache){data.cache={};data.createElem=ownerDocument.createElement;data.createFrag=ownerDocument.createDocumentFragment;data.frag=data.createFrag();}
ownerDocument.createElement=function(nodeName){if(!html5.shivMethods){return data.createElem(nodeName);}
return createElement(nodeName,ownerDocument,data);};ownerDocument.createDocumentFragment=Function('h,f','return function(){'+'var n=f.cloneNode(),c=n.createElement;'+'h.shivMethods&&('+
getElements().join().replace(/[\w\-:]+/g,function(nodeName){data.createElem(nodeName);data.frag.createElement(nodeName);return'c("'+nodeName+'")';})+');return n}')(html5,data.frag);}
function shivDocument(ownerDocument){if(!ownerDocument){ownerDocument=document;}
var data=getExpandoData(ownerDocument);if(html5.shivCSS&&!supportsHtml5Styles&&!data.hasCSS){data.hasCSS=!!addStyleSheet(ownerDocument,'article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}'+'mark{background:#FF0;color:#000}'+'template{display:none}');}
if(!supportsUnknownElements){shivMethods(ownerDocument,data);}
return ownerDocument;}
var html5={'elements':options.elements||'abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output picture progress section summary template time video','version':version,'shivCSS':(options.shivCSS!==false),'supportsUnknownElements':supportsUnknownElements,'shivMethods':(options.shivMethods!==false),'type':'default','shivDocument':shivDocument,createElement:createElement,createDocumentFragment:createDocumentFragment,addElements:addElements};window.html5=html5;shivDocument(document);if(typeof module=='object'&&module.exports){module.exports=html5;}}(typeof window!=='undefined'?window:this,document));};var omPrefixes='Moz O ms Webkit';var domPrefixes=(ModernizrProto._config.usePrefixes?omPrefixes.toLowerCase().split(' '):[]);ModernizrProto._domPrefixes=domPrefixes;function domToCSS(name){return name.replace(/([A-Z])/g,function(str,m1){return'-'+m1.toLowerCase();}).replace(/^ms-/,'-ms-');};function createElement(){if(typeof document.createElement!=='function'){return document.createElement(arguments[0]);}else if(isSVG){return document.createElementNS.call(document,'http://www.w3.org/2000/svg',arguments[0]);}else{return document.createElement.apply(document,arguments);}};var prefixedCSSValue=function(prop,value){var result=false;var elem=createElement('div');var style=elem.style;if(prop in style){var i=domPrefixes.length;style[prop]=value;result=style[prop];while(i--&&!result){style[prop]='-'+domPrefixes[i]+'-'+value;result=style[prop];}}
if(result===''){result=false;}
return result;};ModernizrProto.prefixedCSSValue=prefixedCSSValue;Modernizr.addTest('multiplebgs',function(){var style=createElement('a').style;style.cssText='background:url(https://),url(https://),red url(https://)';return(/(url\s*\(.*?){3}/).test(style.background);});Modernizr.addTest('opacity',function(){var style=createElement('a').style;style.cssText=prefixes.join('opacity:.55;');return(/^0.55$/).test(style.opacity);});Modernizr.addTest('csspositionsticky',function(){var prop='position:';var value='sticky';var el=createElement('a');var mStyle=el.style;mStyle.cssText=prop+prefixes.join(value+';'+prop).slice(0,-prop.length);return mStyle.position.indexOf(value)!==-1;});Modernizr.addTest('rgba',function(){var style=createElement('a').style;style.cssText='background-color:rgba(150,255,150,.5)';return(''+style.backgroundColor).indexOf('rgba')>-1;});Modernizr.addTest('inlinesvg',function(){var div=createElement('div');div.innerHTML='<svg/>';return(typeof SVGRect!='undefined'&&div.firstChild&&div.firstChild.namespaceURI)=='http://www.w3.org/2000/svg';});function cssToDOM(name){return name.replace(/([a-z])-([a-z])/g,function(str,m1,m2){return m1+m2.toUpperCase();}).replace(/^-/,'');};function getBody(){var body=document.body;if(!body){body=createElement(isSVG?'svg':'body');body.fake=true;}
return body;};function injectElementWithStyles(rule,callback,nodes,testnames){var mod='modernizr';var style;var ret;var node;var docOverflow;var div=createElement('div');var body=getBody();if(parseInt(nodes,10)){while(nodes--){node=createElement('div');node.id=testnames?testnames[nodes]:mod+(nodes+1);div.appendChild(node);}}
style=createElement('style');style.type='text/css';style.id='s'+mod;(!body.fake?div:body).appendChild(style);body.appendChild(div);if(style.styleSheet){style.styleSheet.cssText=rule;}else{style.appendChild(document.createTextNode(rule));}
div.id=mod;if(body.fake){body.style.background='';body.style.overflow='hidden';docOverflow=docElement.style.overflow;docElement.style.overflow='hidden';docElement.appendChild(body);}
ret=callback(div,rule);if(body.fake){body.parentNode.removeChild(body);docElement.style.overflow=docOverflow;docElement.offsetHeight;}else{div.parentNode.removeChild(div);}
return!!ret;};var testStyles=ModernizrProto.testStyles=injectElementWithStyles;var blacklist=(function(){var ua=navigator.userAgent;var webos=ua.match(/w(eb)?osbrowser/gi);var wppre8=ua.match(/windows phone/gi)&&ua.match(/iemobile\/([0-9])+/gi)&&parseFloat(RegExp.$1)>=9;return webos||wppre8;}());if(blacklist){Modernizr.addTest('fontface',false);}else{testStyles('@font-face {font-family:"font";src:url("https://")}',function(node,rule){var style=document.getElementById('smodernizr');var sheet=style.sheet||style.styleSheet;var cssText=sheet?(sheet.cssRules&&sheet.cssRules[0]?sheet.cssRules[0].cssText:sheet.cssText||''):'';var bool=/src/i.test(cssText)&&cssText.indexOf(rule.split(' ')[0])===0;Modernizr.addTest('fontface',bool);});};var cssomPrefixes=(ModernizrProto._config.usePrefixes?omPrefixes.split(' '):[]);ModernizrProto._cssomPrefixes=cssomPrefixes;var atRule=function(prop){var length=prefixes.length;var cssrule=window.CSSRule;var rule;if(typeof cssrule==='undefined'){return undefined;}
if(!prop){return false;}
prop=prop.replace(/^@/,'');rule=prop.replace(/-/g,'_').toUpperCase()+'_RULE';if(rule in cssrule){return'@'+prop;}
for(var i=0;i<length;i++){var prefix=prefixes[i];var thisRule=prefix.toUpperCase()+'_'+rule;if(thisRule in cssrule){return'@-'+prefix.toLowerCase()+'-'+prop;}}
return false;};ModernizrProto.atRule=atRule;function contains(str,substr){return!!~(''+str).indexOf(substr);};function fnBind(fn,that){return function(){return fn.apply(that,arguments);};};function testDOMProps(props,obj,elem){var item;for(var i in props){if(props[i]in obj){if(elem===false){return props[i];}
item=obj[props[i]];if(is(item,'function')){return fnBind(item,elem||obj);}
return item;}}
return false;};function computedStyle(elem,pseudo,prop){var result;if('getComputedStyle'in window){result=getComputedStyle.call(window,elem,pseudo);var console=window.console;if(result!==null){if(prop){result=result.getPropertyValue(prop);}}else{if(console){var method=console.error?'error':'log';console[method].call(console,'getComputedStyle returning null, its possible modernizr test results are inaccurate');}}}else{result=!pseudo&&elem.currentStyle&&elem.currentStyle[prop];}
return result;};function nativeTestProps(props,value){var i=props.length;if('CSS'in window&&'supports'in window.CSS){while(i--){if(window.CSS.supports(domToCSS(props[i]),value)){return true;}}
return false;}
else if('CSSSupportsRule'in window){var conditionText=[];while(i--){conditionText.push('('+domToCSS(props[i])+':'+value+')');}
conditionText=conditionText.join(' or ');return injectElementWithStyles('@supports ('+conditionText+') { #modernizr { position: absolute; } }',function(node){return computedStyle(node,null,'position')=='absolute';});}
return undefined;};var modElem={elem:createElement('modernizr')};Modernizr._q.push(function(){delete modElem.elem;});var mStyle={style:modElem.elem.style};Modernizr._q.unshift(function(){delete mStyle.style;});function testProps(props,prefixed,value,skipValueTest){skipValueTest=is(skipValueTest,'undefined')?false:skipValueTest;if(!is(value,'undefined')){var result=nativeTestProps(props,value);if(!is(result,'undefined')){return result;}}
var afterInit,i,propsLength,prop,before;var elems=['modernizr','tspan','samp'];while(!mStyle.style&&elems.length){afterInit=true;mStyle.modElem=createElement(elems.shift());mStyle.style=mStyle.modElem.style;}
function cleanElems(){if(afterInit){delete mStyle.style;delete mStyle.modElem;}}
propsLength=props.length;for(i=0;i<propsLength;i++){prop=props[i];before=mStyle.style[prop];if(contains(prop,'-')){prop=cssToDOM(prop);}
if(mStyle.style[prop]!==undefined){if(!skipValueTest&&!is(value,'undefined')){try{mStyle.style[prop]=value;}catch(e){}
if(mStyle.style[prop]!=before){cleanElems();return prefixed=='pfx'?prop:true;}}
else{cleanElems();return prefixed=='pfx'?prop:true;}}}
cleanElems();return false;};var testProp=ModernizrProto.testProp=function(prop,value,useValue){return testProps([prop],undefined,value,useValue);};function testPropsAll(prop,prefixed,elem,value,skipValueTest){var ucProp=prop.charAt(0).toUpperCase()+prop.slice(1),props=(prop+' '+cssomPrefixes.join(ucProp+' ')+ucProp).split(' ');if(is(prefixed,'string')||is(prefixed,'undefined')){return testProps(props,prefixed,value,skipValueTest);}else{props=(prop+' '+(domPrefixes).join(ucProp+' ')+ucProp).split(' ');return testDOMProps(props,prefixed,elem);}}
ModernizrProto.testAllProps=testPropsAll;function testAllProps(prop,value,skipValueTest){return testPropsAll(prop,undefined,undefined,value,skipValueTest);}
ModernizrProto.testAllProps=testAllProps;Modernizr.addTest('cssanimations',testAllProps('animationName','a',true));Modernizr.addTest('boxshadow',testAllProps('boxShadow','1px 1px',true));Modernizr.addTest('cssmask',testAllProps('maskRepeat','repeat-x',true));Modernizr.addTest('csstransitions',testAllProps('transition','all',true));var prefixed=ModernizrProto.prefixed=function(prop,obj,elem){if(prop.indexOf('@')===0){return atRule(prop);}
if(prop.indexOf('-')!=-1){prop=cssToDOM(prop);}
if(!obj){return testPropsAll(prop,'pfx');}else{return testPropsAll(prop,obj,elem);}};var prefixedCSS=ModernizrProto.prefixedCSS=function(prop){var prefixedProp=prefixed(prop);return prefixedProp&&domToCSS(prefixedProp);};testRunner();setClasses(classes);delete ModernizrProto.addTest;delete ModernizrProto.addAsyncTest;for(var i=0;i<Modernizr._q.length;i++){Modernizr._q[i]();}
window.Modernizr=Modernizr;;})(window,document);var mul_table=[1,57,41,21,203,34,97,73,227,91,149,62,105,45,39,137,241,107,3,173,39,71,65,238,219,101,187,87,81,151,141,133,249,117,221,209,197,187,177,169,5,153,73,139,133,127,243,233,223,107,103,99,191,23,177,171,165,159,77,149,9,139,135,131,253,245,119,231,224,109,211,103,25,195,189,23,45,175,171,83,81,79,155,151,147,9,141,137,67,131,129,251,123,30,235,115,113,221,217,53,13,51,50,49,193,189,185,91,179,175,43,169,83,163,5,79,155,19,75,147,145,143,35,69,17,67,33,65,255,251,247,243,239,59,29,229,113,111,219,27,213,105,207,51,201,199,49,193,191,47,93,183,181,179,11,87,43,85,167,165,163,161,159,157,155,77,19,75,37,73,145,143,141,35,138,137,135,67,33,131,129,255,63,250,247,61,121,239,237,117,29,229,227,225,111,55,109,216,213,211,209,207,205,203,201,199,197,195,193,48,190,47,93,185,183,181,179,178,176,175,173,171,85,21,167,165,41,163,161,5,79,157,78,154,153,19,75,149,74,147,73,144,143,71,141,140,139,137,17,135,134,133,66,131,65,129,1];var shg_table=[0,9,10,10,14,12,14,14,16,15,16,15,16,15,15,17,18,17,12,18,16,17,17,19,19,18,19,18,18,19,19,19,20,19,20,20,20,20,20,20,15,20,19,20,20,20,21,21,21,20,20,20,21,18,21,21,21,21,20,21,17,21,21,21,22,22,21,22,22,21,22,21,19,22,22,19,20,22,22,21,21,21,22,22,22,18,22,22,21,22,22,23,22,20,23,22,22,23,23,21,19,21,21,21,23,23,23,22,23,23,21,23,22,23,18,22,23,20,22,23,23,23,21,22,20,22,21,22,24,24,24,24,24,22,21,24,23,23,24,21,24,23,24,22,24,24,22,24,24,22,23,24,24,24,20,23,22,23,24,24,24,24,24,24,24,23,21,23,22,23,24,24,24,22,24,24,24,23,22,24,24,25,23,25,25,23,24,25,25,24,22,25,25,25,24,23,24,25,25,25,25,25,25,25,25,25,25,25,25,23,25,23,24,25,25,25,25,25,25,25,25,25,24,22,25,25,23,25,25,20,24,25,24,25,25,22,24,25,24,25,24,25,25,24,25,25,25,25,22,25,25,25,24,25,24,25,18];function boxBlurImage(imageID,canvasID,radius,blurAlphaChannel,iterations){var img=document.getElementById(imageID);var w=img.naturalWidth;var h=img.naturalHeight;var canvas=document.getElementById(canvasID);canvas.style.width=w+"px";canvas.style.height=h+"px";canvas.width=w;canvas.height=h;var context=canvas.getContext("2d");context.clearRect(0,0,w,h);context.drawImage(img,0,0);if(isNaN(radius)||radius<1)return;if(blurAlphaChannel)
{boxBlurCanvasRGBA(canvasID,0,0,w,h,radius,iterations);}else{boxBlurCanvasRGB(canvasID,0,0,w,h,radius,iterations);}}
function boxBlurCanvasRGBA(id,top_x,top_y,width,height,radius,iterations){if(isNaN(radius)||radius<1)return;radius|=0;if(isNaN(iterations))iterations=1;iterations|=0;if(iterations>3)iterations=3;if(iterations<1)iterations=1;var canvas=document.getElementById(id);var context=canvas.getContext("2d");var imageData;try{try{imageData=context.getImageData(top_x,top_y,width,height);}catch(e){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");imageData=context.getImageData(top_x,top_y,width,height);}catch(e){alert("Cannot access local image");throw new Error("unable to access local image data: "+e);return;}}}catch(e){alert("Cannot access image");throw new Error("unable to access image data: "+e);return;}
var pixels=imageData.data;var rsum,gsum,bsum,asum,x,y,i,p,p1,p2,yp,yi,yw,idx,pa;var wm=width-1;var hm=height-1;var wh=width*height;var rad1=radius+1;var mul_sum=mul_table[radius];var shg_sum=shg_table[radius];var r=[];var g=[];var b=[];var a=[];var vmin=[];var vmax=[];while(iterations-->0){yw=yi=0;for(y=0;y<height;y++){rsum=pixels[yw]*rad1;gsum=pixels[yw+1]*rad1;bsum=pixels[yw+2]*rad1;asum=pixels[yw+3]*rad1;for(i=1;i<=radius;i++){p=yw+(((i>wm?wm:i))<<2);rsum+=pixels[p++];gsum+=pixels[p++];bsum+=pixels[p++];asum+=pixels[p]}
for(x=0;x<width;x++){r[yi]=rsum;g[yi]=gsum;b[yi]=bsum;a[yi]=asum;if(y==0){vmin[x]=((p=x+rad1)<wm?p:wm)<<2;vmax[x]=((p=x-radius)>0?p<<2:0);}
p1=yw+vmin[x];p2=yw+vmax[x];rsum+=pixels[p1++]-pixels[p2++];gsum+=pixels[p1++]-pixels[p2++];bsum+=pixels[p1++]-pixels[p2++];asum+=pixels[p1]-pixels[p2];yi++;}
yw+=(width<<2);}
for(x=0;x<width;x++){yp=x;rsum=r[yp]*rad1;gsum=g[yp]*rad1;bsum=b[yp]*rad1;asum=a[yp]*rad1;for(i=1;i<=radius;i++){yp+=(i>hm?0:width);rsum+=r[yp];gsum+=g[yp];bsum+=b[yp];asum+=a[yp];}
yi=x<<2;for(y=0;y<height;y++){pixels[yi+3]=pa=(asum*mul_sum)>>>shg_sum;if(pa>0)
{pa=255/pa;pixels[yi]=((rsum*mul_sum)>>>shg_sum)*pa;pixels[yi+1]=((gsum*mul_sum)>>>shg_sum)*pa;pixels[yi+2]=((bsum*mul_sum)>>>shg_sum)*pa;}else{pixels[yi]=pixels[yi+1]=pixels[yi+2]=0;}
if(x==0){vmin[y]=((p=y+rad1)<hm?p:hm)*width;vmax[y]=((p=y-radius)>0?p*width:0);}
p1=x+vmin[y];p2=x+vmax[y];rsum+=r[p1]-r[p2];gsum+=g[p1]-g[p2];bsum+=b[p1]-b[p2];asum+=a[p1]-a[p2];yi+=width<<2;}}}
context.putImageData(imageData,top_x,top_y);}
function boxBlurCanvasRGB(id,top_x,top_y,width,height,radius,iterations){if(isNaN(radius)||radius<1)return;radius|=0;if(isNaN(iterations))iterations=1;iterations|=0;if(iterations>3)iterations=3;if(iterations<1)iterations=1;var canvas=document.getElementById(id);var context=canvas.getContext("2d");var imageData;try{try{imageData=context.getImageData(top_x,top_y,width,height);}catch(e){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");imageData=context.getImageData(top_x,top_y,width,height);}catch(e){alert("Cannot access local image");throw new Error("unable to access local image data: "+e);return;}}}catch(e){alert("Cannot access image");throw new Error("unable to access image data: "+e);return;}
var pixels=imageData.data;var rsum,gsum,bsum,asum,x,y,i,p,p1,p2,yp,yi,yw,idx;var wm=width-1;var hm=height-1;var wh=width*height;var rad1=radius+1;var r=[];var g=[];var b=[];var mul_sum=mul_table[radius];var shg_sum=shg_table[radius];var vmin=[];var vmax=[];while(iterations-->0){yw=yi=0;for(y=0;y<height;y++){rsum=pixels[yw]*rad1;gsum=pixels[yw+1]*rad1;bsum=pixels[yw+2]*rad1;for(i=1;i<=radius;i++){p=yw+(((i>wm?wm:i))<<2);rsum+=pixels[p++];gsum+=pixels[p++];bsum+=pixels[p++];}
for(x=0;x<width;x++){r[yi]=rsum;g[yi]=gsum;b[yi]=bsum;if(y==0){vmin[x]=((p=x+rad1)<wm?p:wm)<<2;vmax[x]=((p=x-radius)>0?p<<2:0);}
p1=yw+vmin[x];p2=yw+vmax[x];rsum+=pixels[p1++]-pixels[p2++];gsum+=pixels[p1++]-pixels[p2++];bsum+=pixels[p1++]-pixels[p2++];yi++;}
yw+=(width<<2);}
for(x=0;x<width;x++){yp=x;rsum=r[yp]*rad1;gsum=g[yp]*rad1;bsum=b[yp]*rad1;for(i=1;i<=radius;i++){yp+=(i>hm?0:width);rsum+=r[yp];gsum+=g[yp];bsum+=b[yp];}
yi=x<<2;for(y=0;y<height;y++){pixels[yi]=(rsum*mul_sum)>>>shg_sum;pixels[yi+1]=(gsum*mul_sum)>>>shg_sum;pixels[yi+2]=(bsum*mul_sum)>>>shg_sum;if(x==0){vmin[y]=((p=y+rad1)<hm?p:hm)*width;vmax[y]=((p=y-radius)>0?p*width:0);}
p1=x+vmin[y];p2=x+vmax[y];rsum+=r[p1]-r[p2];gsum+=g[p1]-g[p2];bsum+=b[p1]-b[p2];yi+=width<<2;}}}
context.putImageData(imageData,top_x,top_y);}
function bbBoxBlurCanvasRGB(cnv,top_x,top_y,width,height,radius,iterations){if(isNaN(radius)||radius<1)return;radius|=0;if(isNaN(iterations))iterations=1;iterations|=0;if(iterations>3)iterations=3;if(iterations<1)iterations=1;var canvas=cnv;var context=canvas.getContext("2d");var imageData;try{try{imageData=context.getImageData(top_x,top_y,width,height);}catch(e){console.log("error create getImageData: "+e);try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");imageData=context.getImageData(top_x,top_y,width,height);}catch(e){throw new Error("unable to access local image data: "+e);return;}}}catch(e){throw new Error("unable to access image data: "+e);return;}
var pixels=imageData.data;var rsum,gsum,bsum,asum,x,y,i,p,p1,p2,yp,yi,yw,idx;var wm=width-1;var hm=height-1;var wh=width*height;var rad1=radius+1;var r=[];var g=[];var b=[];var mul_sum=mul_table[radius];var shg_sum=shg_table[radius];var vmin=[];var vmax=[];while(iterations-->0){yw=yi=0;for(y=0;y<height;y++){rsum=pixels[yw]*rad1;gsum=pixels[yw+1]*rad1;bsum=pixels[yw+2]*rad1;for(i=1;i<=radius;i++){p=yw+(((i>wm?wm:i))<<2);rsum+=pixels[p++];gsum+=pixels[p++];bsum+=pixels[p++];}
for(x=0;x<width;x++){r[yi]=rsum;g[yi]=gsum;b[yi]=bsum;if(y==0){vmin[x]=((p=x+rad1)<wm?p:wm)<<2;vmax[x]=((p=x-radius)>0?p<<2:0);}
p1=yw+vmin[x];p2=yw+vmax[x];rsum+=pixels[p1++]-pixels[p2++];gsum+=pixels[p1++]-pixels[p2++];bsum+=pixels[p1++]-pixels[p2++];yi++;}
yw+=(width<<2);}
for(x=0;x<width;x++){yp=x;rsum=r[yp]*rad1;gsum=g[yp]*rad1;bsum=b[yp]*rad1;for(i=1;i<=radius;i++){yp+=(i>hm?0:width);rsum+=r[yp];gsum+=g[yp];bsum+=b[yp];}
yi=x<<2;for(y=0;y<height;y++){pixels[yi]=(rsum*mul_sum)>>>shg_sum;pixels[yi+1]=(gsum*mul_sum)>>>shg_sum;pixels[yi+2]=(bsum*mul_sum)>>>shg_sum;if(x==0){vmin[y]=((p=y+rad1)<hm?p:hm)*width;vmax[y]=((p=y-radius)>0?p*width:0);}
p1=x+vmin[y];p2=x+vmax[y];rsum+=r[p1]-r[p2];gsum+=g[p1]-g[p2];bsum+=b[p1]-b[p2];yi+=width<<2;}}}
context.putImageData(imageData,top_x,top_y);}