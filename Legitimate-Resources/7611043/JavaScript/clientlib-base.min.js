document.addEventListener("DOMContentLoaded", function() {
    var keyFound = false;
    var keyLast = 0;
    var keyCount = 0;
    
    // set placeholder to label animation
    $(document).delegate('.itau-form input, .itau-form textarea', 'focus', function(){
        placeholderToLabelAnimation($(this), 'open');
    });
    
    $(document).delegate('.itau-form input, .itau-form textarea', 'blur', function(){
        placeholderToLabelAnimation($(this), 'close');        
    });

    // trigger input animation for not null inputs
    openInputs();

    // count characters numbers on input for textarea
    $(document).delegate('.itau-form textarea','input', function() {
        $('.itau-form .input-textarea-count').text($(this).val().length + '/' + $(this).attr('maxlength'));
        
        if($(this).val().length == 1000) {
            $('.itau-form .input-textarea-count').addClass('maxlength');
        } else {
            $('.itau-form .input-textarea-count').removeClass('maxlength');
        }
    });
    
    // stop default scenaria on click in a input select
    $(document).delegate('.itau-form .select input', 'keypress', function(e) {
        e.preventDefault();
        return false;
    });

    // close select on click outside
    $(document).on('mousedown', function(e) {
        if(!$(e.target).is('ul') && !$(e.target).is('li')) {
            if ($(document).find('.itau-form .input-container.open').length > 0) {
                var el = $(document).find('.itau-form .input-container.open');
                el.removeClass('open');
                setTimeout(function() {
                    el.removeClass('open');
                    el.find('input').eq(0).attr('aria-expanded', false);
                    el.focus();
                    el.find('.customized-select').eq(0).hide();
                }, 100);
            }
        }
    });
    
    // open select handler
    $(document).delegate('.itau-form .select .dropdown-select', 'keydown', function(e) {
        var clickedKey = e.which;
        
        if(clickedKey == 13) {
            openSelect($(this), 1);
        }

        // arrow down or arrow up
        if(clickedKey == 38 || clickedKey == 40) {
            var select = $(this).parent().find('.customized-select');
            var inputValue = $(this).val();
            var order = clickedKey == 38 ? 0 : 1;
            searchValueInSelect(select, inputValue, order);
            return false;
        }
    });

    $(document).delegate('.itau-form .dropdown-select:not(:disabled), .itau-form .dropdown-select:not(:disabled) ~ .input-icon', 'click', function() {
		openSelect($(this), 1);
    });
    
    $(document).delegate('.itau-form .customized-select li', 'click', function() {
        openSelect($(this), 2);
    })
    
    $(document).delegate('.itau-form .customized-select li', 'keydown', function(e) {
        var clickedKey = e.which;

        // on enter, select a option
        if(clickedKey == 13) {
            openSelect($(this), 2);
        }
        
        // on up arrow select previous item (except if it's the first list item)
        if(clickedKey == 38 || (e.shiftKey && clickedKey == 9)) {
            e.preventDefault();
            if (!$(this).is(':first-child')) {
                $(this).prev().focus();
            } else {
                $(this).parent().find('li:last').focus();
            }
        }

        // on up arrow select next item (except if it's the last list item)
        if(clickedKey == 40 || (!e.shiftKey && clickedKey == 9)) {
            e.preventDefault();
            if(!$(this).is(':last-child')) {
                $(this).next().focus();
            } else {
                $(this).parent().find('li:first').focus();
            }
        }

        // on escape, close select
        if(clickedKey == 27) {
            e.preventDefault();
            openSelect($(this), 3);
        }

        // check if a character key was typed
        if(clickedKey >= 48 && clickedKey <= 105) {
            var selectUl = $(this).parent();
            var character = getCharacterDefaults(clickedKey);
            searchCharacterInSelect(selectUl, character)
        }
    });

    // on button submit click, open form error handler
    $(document).delegate('.itau-form .button-main', 'click', function() {
        itauFormError();
    })

    function placeholderToLabelAnimation(el, action) {
        if (action == 'open') {
            el.parents('.input-container').addClass('focused');
        } else if (action == 'close') {
            var inputValue = el.val();
            if ( inputValue == "" ) {
                el.removeClass('filled');
                el.parents('.input-container').removeClass('focused');  
            } else {
                el.addClass('filled');
            }
        }
    }
    /**
     * 
     * @param {element} el elemento que ouve a ação 
     * @param {number} flag abrir ou fechar modal. 1 = open, 2 = close, 3 = escape
     */
    function openSelect(el, flag) {
        if(flag == 1) {
            el.attr('aria-expanded', true);
            
            setTimeout(function() {
                
                el.parent().addClass('open');
                el.parent().find('.customized-select').eq(0).show();
                el.parent().find('.customized-select').eq(0).find('li').eq(0).focus();
                if( el.parent().find('.customized-select').eq(0).find('li').length >= 5) {
                    el.parent().find('.customized-select').eq(0).css('overflow-y', 'scroll');
                } else {
                    el.parent().find('.customized-select').eq(0).css('overflow-y', 'hidden');
                }

            }, 100);
    
        } else if(flag == 2) {
            setTimeout(function() {
                el.parent().parent().removeClass('open');
                if(typeof el.data('value') != "undefined" && el.data('value') != "") {
                    el.parent().parent().find('input').eq(0).attr('data-value', el.data('value'));
                    el.parent().parent().find('input').eq(0).data('value', el.data('value'));
                }
                el.parent().parent().find('input').eq(0).val(el.text());
                el.parent().parent().find('input').eq(0).trigger("change");
                el.parent().parent().find('input').eq(0).attr('aria-expanded', false);
                el.parent().parent().find('input').focus();
                el.parent().parent().addClass('focused');
                $('.customized-select').hide();
            }, 100);
        } else {
            el.parent().parent().removeClass('open');
            setTimeout(function() {
                el.parent().parent().removeClass('open');
                el.parent().parent().find('input').eq(0).attr('aria-expanded', false);
                el.parent().parent().focus();
                $('.customized-select').hide();
            }, 100);
        }
    }

        
    function getCharacterDefaults(character) {
        // reinitilize breaker for map
        keyFound = false;
        // correction when numpad typed 
        character >= 96 ? character -= 48 : character;
        // different key typed, reset count
        keyCount = character != keyLast ? keyCount = 0 : keyCount;
        // save temporary count
        return character;
    }

    function countOptionsStartingWithCharacter(select, character) {
        return select.find('li').filter(function(i, el) {
            return $(el).text().toUpperCase().trim().charCodeAt(0) == character;
        })
    }

    function searchCharacterInSelect(select, character) {
        var sameValueOptions = countOptionsStartingWithCharacter(select, character);
        // save temporary count
        var tempKeyCount = keyCount;
        select.find('li').map(function(i, el) {
            // a occurrence was found
            if($(el).text().toUpperCase().trim().charCodeAt(0) == character) {
                // if the key is already found, break loop
                if (keyFound) return false;
                // last key is the clicked key
                keyLast = character;

                // check if element is the next occurrency
                if (keyCount == 0 || tempKeyCount == 0) {
                    keyFound = true;  
                    character == keyLast ? keyCount += 1 : false;
                    $(el).focus();
                } else {
                    // when its not last ocurrency,
                    if ($(sameValueOptions).length == tempKeyCount) {
                        $(sameValueOptions).first().focus();
                        keyFound = true;
                        keyCount = 1;
                    } else {
                        tempKeyCount -= 1;
                    }
                }
            }
        });
    }

    /**
     * Search for a value in the select list and focus in the previous or next element
     * @param {Element} select the ul that represents the select tag
     * @param {String} value input value 
     * @param {Number} order select the next or prev list item to focus. 0 = prev, 1 = next
     */
    function searchValueInSelect(select, value, order) {
        var found = false;
        select.find('li').map(function(i, el) {
            if ($(el).text() == value) {
                var valueText = "";
                var dataValue = 0;
                var validNewValue = false;
                found = true;

                if (order == 0 && $(el).prev().length > 0) {
                    valueText = $(el).prev().text();
                    dataValue = typeof $(el).prev().data('value') != "undefined" ? $(el).prev().data('value') : 0;
                    validNewValue = true;
                
                } else if (order == 1 && $(el).next().length > 0) {
                    valueText = $(el).next().text();
                    dataValue = typeof $(el).next().data('value') != "undefined" ? $(el).next().data('value') : 0;
                    validNewValue = true;                    
                }

                if (validNewValue) {
                    select.parent().find('input').data('value', dataValue).val(valueText);
                    setTimeout(function () {
                        select.parent().find('input').trigger('change')
                    }, 100);
                }

                return false;
            }
        });

        if (!found) {
            var dataValue = typeof select.find('li').first().data('value') != "undefined" ? select.find('li').first().data('value') : select.find('li').first().text();
            var valueText = select.find('li').first().text();

            select.parent().find('input').data('value', dataValue).val(valueText);

            setTimeout(function () {
                select.parent().find('input').trigger('change')
            }, 100);
        }
    }
});

function openInputs() {
    setTimeout(function() {
        $('.itau-form input:not(:hidden)').each(function(index, el) {
            $(el).val() != "" ? $(el).parent().addClass('focused') :  $(el).parent().removeClass('focused');
        });
    }, 250);
}

function itauFormError() {
    $(document).find('.itau-form .has-error input, .itau-form .has-error textarea').on('input change', function() {
        $(this).parent().removeClass('has-error');
        $(this).removeAttr('title');
    });
}



$(document).ready(function(){
    login.init();
});
var logonHipercard = (function(cartao,parceiro){
    $('form[name="banklinecartaoNI"] input[name="portal"').val('003');
    $('form[name="banklinecartaoNI"]').submit();
});
var login = {
    IS_VALID: true,
    USUARIO_CARTAO: '',

    init: function(){
        
        login.setMask();

        $(".access-control #btnLoginSubmit").click(function(){
            login.validationType(login.getCurrentFieldset());
            $('.line-form > div input').val('');
        });
 
        if ($.cookie('ckTipoLogin')) {        
            if ($.cookie('ckTipoLogin') === 'cartao_credito') {
                $('#formWrapperCartaoCredito').show();
            } 
        }

        cookieLogin.setFieldsData(cookieLogin.parseObject());
    },
    setMask: function(){
        $('#cc').setMask({
            mask: '9999 9999 9999 9999',
            autoTab: false,
            onValid: function() {
                setTimeout(function(){
                    var fieldLength = $.trim($('#cc').val()).length;
                    if(fieldLength >= 16) {
                        login.setButtonState('enable');
                    }else {
                        login.setButtonState('disabled');
                    }
                }, 100);
            }
        });
 
    },
    validationType: function(fieldsetObj){
        if(fieldsetObj){
            if(fieldsetObj[0].id === 'formWrapperCartaoCredito'){ 
                login.creditCardValidate(fieldsetObj);
            }
        }
    },
    creditCardValidate: function(fsObj) {
        var ccRegex = /^\d{16}$/;
        login.USUARIO_CARTAO = fsObj.children('input')[0].value.replace(/\ /g,'');

        if (!ccRegex.test(login.USUARIO_CARTAO)) {
            login.USUARIO_CARTAO = '';
            alert('Por favor, informe um Número de Cartão válido.');
            login.IS_VALID = false;
        }else{
            login.IS_VALID = true;
        }

        if(!login.IS_VALID){
            login.IS_VALID = true;
            return false;
        }

        $(login.getCurrentForm()).find('input#usuariocartao').val(login.USUARIO_CARTAO);

        login.manageData('cartao_credito', login.getCurrentFieldset());

        var _binCartao = login.USUARIO_CARTAO.substring(0, 6);

        switch(_binCartao) {
            case "606282": //Wallmart Hipercard
                logonHipercard(login.USUARIO_CARTAO,  "05");
                return false;
                break;
            case "528860": //Cartões Hipercard SAMS
                logonHipercard(login.USUARIO_CARTAO, "03");
                return false;
                break;
            case "558645":
                logonHipercard(login.USUARIO_CARTAO, "04");
                return false;
                break;
            case "528392": //Cartões Hipercard WALLMART
                logonHipercard(login.USUARIO_CARTAO, "02");
                return false;
                break;
            default:
                login.submit(login.getCurrentForm());
        }
    },
    
    setButtonState: function(state){
        var sendButton = $('#btnLoginSubmit');
        if(state === 'enable') {
            sendButton.addClass('active').removeAttr('disabled');
            sendButton.removeClass('icon-itaufonts_seguranca').addClass('icon-itaufonts_seta_right');
        }else if(state === 'disabled') {
            sendButton.removeClass('active').attr(state, state);
            sendButton.removeClass('icon-itaufonts_seta_right').addClass('icon-itaufonts_seguranca');
        }
    },
    getCurrentFieldset: function(){
        return $('div[id^=formWrapper]:visible')[0] ? $('div[id^=formWrapper]:visible') : false;
    },
    getRelatedFormName: function(){
        return login.getCurrentFieldset() ? login.getCurrentFieldset().data('related-form') : false;
    },
    getCurrentForm: function(){
        return $('form[name='+login.getRelatedFormName()+']')[0] ? $('form[name='+login.getRelatedFormName()+']') : false;
    },
    manageData: function(type, formFieldset){
        if($('.access-control #rememberData').is(':checked')) {
            $.cookie('ckTipoLogin', type, { path: '/', expires: 9999 });
            cookieLogin.send(formFieldset);
        } else {
            cookieLogin.delete(formFieldset);
        }
    },
    submit: function(form){
        form.submit();
    }
}
var cookieLogin = {
    name: "RMBRLOGIN",
    send: function(targetForm) {
        cookieLogin.save(cookieLogin.name, cookieLogin.createObject(targetForm), 9999);
    },
    save: function(name, jsonObj, days) {
        var value = JSON.stringify(jsonObj);
        $.cookie(name, value, { expires: days, path: "/" });
    },
    delete: function(targetForm) {
        var cookieObject = cookieLogin.parseObject();

        if(cookieObject){

            $(targetForm).find('input').each(function(){
                var inputId = $(this).attr('id');
                var inputValue = $(this).val();
                $.each(cookieObject, function (key, val) {
                    if(inputId === key){
                        cookieObject[key] = '';
                    }
                });
            });
    
            var count = 0;
            for (propertie in cookieObject) {
                if (cookieObject[propertie])
                    count++;
            }
    
            if(count > 0) {
                cookieLogin.save(cookieLogin.name, cookieObject, 9999);
            }else {
                cookieLogin.save(cookieLogin.name, '', -1);
                $.cookie('ckTipoLogin', '', { path: '/', expires: -1 });
            }
    
        }

   },
   setFieldsData: function(cookieObject) {
        if (cookieLogin.isValidObject(cookieObject)) {
            $("#formWrapperAgenciaConta #agencia").val(cookieObject.agencia);
            $("#formWrapperAgenciaConta #conta").val(cookieObject.conta);
            $("#formWrapperCodigoOperador #codOp").val(cookieObject.codOp);
            $("#formWrapperCartaoCredito #cc").val(cookieObject.cc);
            $("#formWrapperCnpj #cnpj").val(cookieObject.cnpj);

            login.setButtonState('enable');

            $($(login.getCurrentFieldset()).find('input:first')).each(function(){
                var inputId = $(this).attr('id');
                var inputValue = $(this).val();
                $.each(cookieObject, function (key, val) {
                    if(inputId === key){
                        $('.access-control #rememberData').attr("checked", cookieObject[key]);
                    }
                });
            });
        }
    },
    createObject: function(targetForm) {
        var cookieObject = cookieLogin.parseObject();

        if (cookieObject === null) {
            cookieObject = {
              agencia: "", conta: "", codOp: "", cc: "", cnpj: ""
            }
        }

        $(targetForm).find('input').each(function(){
            var inputId = $(this).attr('id');
            var inputValue = $(this).val();
            $.each(cookieObject, function (key, val) {
                if(inputId === key){
                    cookieObject[key] = inputValue;
                }
            });
        });

        return cookieObject;  
    },
    parseObject: function() {
        var strValuesCookie = $.cookie(cookieLogin.name);
        var cookieObject = null;
        if (strValuesCookie !== null && typeof(strValuesCookie) !== "undefined") {
          cookieObject = JSON.parse(strValuesCookie);
        }
        return cookieObject;
    },
    isValidObject: function(cookieObject) {
        return cookieObject !== null && typeof(cookieObject) !== "undefined";
    }
}
$(document).ready(function () {

    var heigthHeader
    var mainHeader = {
        init: function () {
            $('.navbar-wrapper-mobile').on('shown.bs.collapse', function () {
                mainHeader.navMobileHeight();
            })    
        },
    
        bodyAnchor: function () {
            $('.responsivegrid').attr({
                id: 'body',
                role: 'main'
            });
        },
    
        // Set padding-top body site
        setPaddingBody: function () {
            heigthHeader = $('header').height();
            $('body').css('padding-top', heigthHeader);
        },
    
        // Update padding-top body site
        updatePaddingBody: function () {
            var interval = setInterval(mainHeader.setPaddingBody, 10);
    
            setTimeout(function () {
                clearInterval(interval);
            }, 3000);
        },
    
        // Set height nav mobile
        navMobileHeight: function () {
            heigthHeader = $('header').height();
            var sectionNavigationHeight = ($('.section-navigation-cta').length ? $('.section-navigation-cta').height() : 0);
            var heightWindow = $(window).height();
            var totalHeight = heigthHeader + sectionNavigationHeight;
    
            $('.navbar-wrapper-mobile').css('height', (heightWindow - totalHeight) + 'px');
        },


        animateScroll: function(){
            var menuItems = $('#menu li a, #collapseMenuMobile a').click(function(e){
                var target = $(this.getAttribute('href'))
                $('html,body').animate({
                    scrollTop: target.offset().top - $('header').height()
                },500)
            })
        }

    }
    
    mainHeader.init();
    mainHeader.bodyAnchor();
    mainHeader.setPaddingBody();


    $(window).resize(function () {
        mainHeader.setPaddingBody();
        mainHeader.navMobileHeight();
    });
});
/* $('.middle-footer .contact a').each(function () {
    var phone = $(this).attr('data-phone');
    $(this).attr('href', 'tel:' + phone);
}); */


$('.links-footer .common-links').each(function(index){
	var linksFooterMobile = '';
	var title = $(this).find('.column-title').text();
	var navLinks = $(this).find('ul').html();

    linksFooterMobile += '<div class="card">';
    linksFooterMobile += '<div class="card-header" id="headingFooter'+index+'">';
    linksFooterMobile += '<div class="container">';
    linksFooterMobile += '<span class="mb-0">';
    linksFooterMobile += '<button class="btn btn-link p-0 collapsed"  data-toggle="collapse" data-target="#collapseFooter'+index+'" aria-expanded="false" aria-controls="collapseFooter'+index+'">';
    linksFooterMobile +=  title;
    linksFooterMobile += '</button>';
    linksFooterMobile += '</span>';
    linksFooterMobile += '</div>'; // .container
    linksFooterMobile += '</div>'; // .card-header

    linksFooterMobile += '<div id="collapseFooter'+index+'" class="card-collapse collapse" aria-labelledby="headingFooter'+index+'" data-parent="#links-footer-mobile">';
    linksFooterMobile += '<div class="card-body">';
    linksFooterMobile += '<div class="container">';

    linksFooterMobile += '<div class="common-links">';
    linksFooterMobile += '<nav>';
    linksFooterMobile += '<ul>';
    linksFooterMobile +=  navLinks ;
    linksFooterMobile += '</ul>';             
    linksFooterMobile += '</nav>';
    linksFooterMobile += '</div>'; // .common-links

    linksFooterMobile += '</div>'; // .container
    linksFooterMobile += '</div>'; // .card-body
    linksFooterMobile += '</div>'; // .card-collapse

    linksFooterMobile += '</div>'; // .card

    $('#links-footer-mobile').append(linksFooterMobile);

});



$(document).ready(function(){
    if((isBreakPoint(576))){
        $('.partner-container .partner-container__inner').children().removeClass('container');
        $('.partner-container .partner-container__inner').children().addClass('container-fluid');
        $('.container-fluid .partner-container__title').addClass('partner-container__title--fluid');
    }
    var partners = $('.partner-container__list').find('.partner-item').length;
    if (partners >= 5 || (window.outerWidth <= 992 && partners >= 2)){
        $('.partner-container__list').lightSlider({
            onSliderLoad: function (el) {
                var maxHeight = 0,
                container = $(el),
                children = container.children();
                children.each(function () {
                    var childHeight = $(this).height();
                    if (childHeight > maxHeight) {
                        maxHeight = childHeight;
                    }
                });
                container.height(maxHeight);                
            },
            loop: false,
            slideMargin: 0,
            speed: 600,
            currentPagerPosition: 'middle',
            enableDrag: false,
            responsive: [
                {
                    breakpoint: 8000,
                    settings: {
                        item: 5,
                        slideMove: 4,
                    }
                },
                {
                    breakpoint: 992,
                    settings: {
                        item: 3,
                        slideMove: 3,
                        slideMargin: 30
                    }
                },
                {
                    breakpoint: 768,
                    settings: {
                        item: 1.6,
                        slideMove: 1,
                        slideMargin:0
                    }
                },
                {
                    breakpoint: 576,
                    settings: {
                        item: 1.1,
                        slideMove: 1,
                        controls: false
                    }
                }
                
            ],
            onSliderLoad: function (el) {
                //resize(el);
                // if(isBreakPoint(992)||isBreakPoint(1440)||isBreakPoint(8000)){
                // $('.partner-container__list').css('height',parseInt($('.partner-container__list').css('height'), 10) + 70 + 'px');
                // }
                buildDotsPercentage(el);
                $('.partner-container .lSPager').attr('aria-hidden','true');
                $('.partner-container .lSPager li a').attr('tabindex','-1');
            }
        });
        buildDotsPercentage:function buildDotsPercentage(el) {
            var dots = el.parent().parent().find('.lSPager li');
            var totalDots = dots.length;
            
            dots.each(function() {
                var index = $(this).find('a').data('index');
                var percentage = (100 * index) / totalDots;
                var element = $(this).find('.timeline-track').css('width', percentage + '%'); 
            });
            
        }
        if($('.lightSlider > div').hasClass('image-icon__list-item') && (isBreakPoint(576))||(isBreakPoint(320))){
            $('.lSSlideOuter').parent().removeClass('container');
            $('.lSSlideOuter').parent().addClass('container-fluid');
            $('.card-container__inner .container-fluid .card-container__title').addClass('card-container__title--fluid');
        };
    };
});

/* $(document).ready(function(){
    $('.slick-track').attr('role','list');
    if((isBreakPoint(320))){
        $('.partner-container .partner-container__inner').children().removeClass('container');
        $('.partner-container .partner-container__inner').children().addClass('container-fluid');
        $('.container-fluid .partner-container__title').addClass('partner-container__title--fluid');
    }
});
(function ($, $document) {
    'use strict';
    
    function init() {
        checkForCarousels();
        bindCaroulsels();
    }
    
    function checkForCarousels () {
        $('.partner-container__list').each(function() {
            var currentContainer = $(this);
            var isCarousel = currentContainer.find('.partner-item').length;
            
            if (isCarousel) currentContainer.addClass('partner-container__list--is-carousel');
        });
    }
    
    function bindCaroulsels () {
        $('.partner-container__list--is-carousel').each(function() {
            var currentCarousel = $(this);
            var isAuthorMode = currentCarousel.hasClass('authoring-mode');
            
            if (!isAuthorMode) bindEvents(currentCarousel);
        });
    }
    
    function bindEvents(carousel) {
        var partners = carousel.find('.partner-item').length;
        var initialized = carousel.hasClass('slick-initialized');
        
        if (!partners) return;
        if (partners >= 5 || (window.outerWidth <= 992 && partners >= 2)) {
            if (!initialized) initCarousel(carousel);
        } else {
            if (initialized) destroyCarousel(carousel);
        }
    }
    
    function destroyCarousel(carousel) {
        carousel.slick('unslick');
        carousel.find('.slick-dots').remove();
        carousel.removeClass('slick-initialized slick-slider slick-dotted');
    }
    
    function initCarousel(carousel) {
        buildDotsPercentage(carousel);
        accessibilityQuirks(carousel);
        
        carousel.slick({
            dots: true,
            infinite: false,
            slidesToShow: 5,
            speed: 500,
            accessibility: false,
            variableWidth: true,
            arrows: false,
            customPaging: function (slider, i) {
                return '<a href="javascript:;" role="button" data-index="' + (i + 1) + '" class="slick-count"  aria-label="Ir para página ' + (i + 1) + '"><div class="counter">' + (i + 1).toString().padStart(2, '0')  + '</div><div class="timeline"><span class="timeline-track"></span></div></a>';
            },
            responsive: [
                {
                    breakpoint: 8000,
                    settings: {
                        slidesToShow: 5,
                        arrows: true   
                    }
                },
                {
                    breakpoint: 992,
                    settings: {
                        slidesToShow: 4,
                        arrows: true   
                    }
                },
                {
                    breakpoint: 768,
                    settings: {
                        slidesToShow: 2,
                        arrows: true   
                    }
                },
                {
                    breakpoint: 576,
                    settings: {
                        arrows: false,
                        slidesToShow: 1,
                    }
                }
            ]
        });
    }
    
    function accessibilityQuirks(carousel) {
        carousel.on('init afterChange', function(event, slick, direction) {
            $('.partner-item').not('.slick-active').removeAttr('aria-hidden');
            var navigationArrows = $(this).find('.slick-arrow');
            
            navigationArrows.each(function() {
                var currentArrow = $(this);
                
                if (currentArrow.hasClass('slick-disabled')) {
                    currentArrow.attr({
                        'aria-hidden': 'true', 
                        'tabindex': '-1',
                    });
                } else {
                    currentArrow.attr({
                        'aria-hidden': 'false', 
                        'tabindex': '0',
                    });
                }
            });
        });
    }
    
    function buildDotsPercentage(carousel) {
        carousel.on('init breakpoint', function(event, slick, direction) {
            var dots = $(this).find('.slick-dots li');
            var totalDots = dots.length;
            
            dots.each(function() {
                var index = $(this).find('a').data('index');
                var percentage = (100 * index) / totalDots;
                var element = $(this).find('.timeline-track').css('width', percentage + '%'); 
            });
        });
    }
    
    $(window).resize(function () {
        init();
    });
    
    init();
    
})($, $(document)); */

function resizeFullImageBanner() {
  var imageFull = $('.image-full');
  if(imageFull.length) {
      var height =   $(window).height() - $('header').height();
      var heightC = (imageFull.find('.image-banner .container').outerHeight() + ( parseInt(imageFull.find('.image-banner .container').css('bottom').replace('px', '')) * 2));
      imageFull.height(
        heightC > height ? heightC : height
      );
  }
}

function mainBannerInit() {
  resizeFullImageBanner();
  $(window).resize(function() {
    setTimeout(resizeFullImageBanner, 100);
  });
}

$(document).ready(function() {
  mainBannerInit();
});
youtubeVideoParameters = "?enablejsapi=1&version=3&playerapiid=ytplayer&controls=0&autoplay=1&cc_load_policy=1.";

var regExpLocation = new RegExp('/content/dam/');

var linkDataVideo;

function verifyInternalSourceVideo(url) {
    if (url.match(regExpLocation) != null) {
        return true;
    } else {
        return false;
    }
}

function openVideoSource(url) {
    if (verifyInternalSourceVideo(url)) {
        openInternalVideo(url);
    } else {
        openExternalVideo(url);
    }
}

function openInternalVideo(url) {
    createVideoPlayerInternal();
    hideContentBelow();
    $('.video-player source').attr('src', url);
    $('body').css('overflow', 'hidden');
}

function openExternalVideo(url) {
    createVideoPlayerExternal();
    hideContentBelow();
    
    var videoUrl = 'https://www.youtube.com/embed/' + url +  youtubeVideoParameters;
    $('.video-player iframe').attr('src', videoUrl);
      setTimeout(function () {
        $('.video-player iframe')[0].contentWindow.postMessage('{"event":"command","func":"' + 'playVideo' + '","args":""}', '*');
     }, 500);
      $('body').css('overflow', 'hidden');
}

function closeVideo() {
    $('body').css('overflow', '');
    removeVideoPlayer();
    showContentBelow();
    focusInTheLastImg();
}

function createVideoPlayerExternal() {
    $('<div class="video-player">').appendTo('body');
    $('<button class="video-close" onclick="closeVideo()" aria-label="Fechar Vídeo"><i class="icon-itaufonts_fechar"></i></button>').appendTo('.video-player');
    $('<iframe id="" class="video-box" src="" frameborder="0" title="Apple Pay Vídeo"></iframe>').appendTo('.video-player');
}
function createVideoPlayerInternal() {
    $('<div class="video-player">').appendTo('body');
    $('<button class="video-close" onclick="closeVideo()" aria-label="Fechar Vídeo"><i class="icon-itaufonts_fechar"></i></button>').appendTo('.video-player');
    $('<video controls autoplay><source src=""type="video/mp4"/></video>').appendTo('.video-player');
}

function hideContentBelow() {
    $('section').attr('aria-hidden', true).attr('tabindex', '-1');
}

function showContentBelow() {
    $('section').attr('aria-hidden', false).attr('tabindex', '0');
}

function removeVideoPlayer() {
    $('.video-player').remove();
    $('.video-player iframe').remove();
    $('.video-player video').remove();
    $('.video-player .video-close').remove();
}

function focusInTheLastImg(){
    $(".video-player [data-video*='"+linkDataVideo+"']").focus();
}

$(document).ready(function () {

    $('a.card-video').click(function () {
        linkDataVideo = $(this).attr('data-video')
        openVideoSource(linkDataVideo);
        $('.video-close').focus();
    });

    if (isBreakPoint(768) || isBreakPoint(480) || isBreakPoint(320)) {
        $('.visible-xs').each(function () {
            $(this).attr('aria-hidden', false).attr('tabindex', '0');
        });
    } else {
        $('.visible-sm').each(function () {
            $(this).attr('aria-hidden', false).attr('tabindex', '0');
        });
    }
});


(function ($, $document) {
    'use strict';

    function updateImageWidth() {
        if (window.innerWidth <= 992) return;

        $('.image-icon').each(function() {  
            var currentElement = $(this);
            var currentImage = currentElement.find('.image-icon__image');
            var imageWidth = currentImage.width();
            var isFill = currentImage.hasClass('image-icon__image--fill');
            var containerOffset = currentElement.find('.container').offset().left;
            if(isFill){
                $('.image-icon__image img').css('height','100%');
            }
            if (!isFill) return;
            currentElement.find('.image-icon__image img').css('width', imageWidth + containerOffset);
        });
    }

    $(window).resize(function () {
        updateImageWidth();
    });

    updateImageWidth();

})($, $(document));


$(document).ready(function(){
    $('.common-links:not(.cmp-common__basic) ul li').click(function(){
        window.location.href = $($(this).find('a')).attr('href');
    });
});
$(document).ready(function() {
  
  function openLink(el) {
    var link = $(el).find('.card__footer--click');
    window.open(link.attr('href'));
  }
  
  function clickCard(el) {
    $(el).click(function() {
      openLink(el);
    });
  }
  
  $('.image-with-text-inside .card-box').each(function(i, el) {
    clickCard(el);
  });
});

$(document).ready(function () {

	var cardClass = ['one-card', 'two-cards', 'three-cards', 'four-cards', 'more-than-four-cards'];

	function changeClassCards(cardEl) {
		var cards = $(cardEl).find('.carousel-container-item').length;
		var cClass = cardClass[cards -1];
		if(cardClass[cards -1]) {
			$(cardEl).addClass(cClass);
		} else {
			$(cardEl).addClass(cardClass[cardClass.length -1]);
		}
	}

	function resizeChildren(el) {
		var max = 0;
		$(el).find('.carousel-container-item').each(function(i, ch) {
				if($(ch).height() > max) {
					max = $(ch).height();
				}
		});
		$(el).find('.carousel-container-item').height(max + 'px');
	}

	function startCarousel(cardEl) {
		var cards = $(cardEl).find('.carousel-container-item').length;
		var windowSize = $(window).width();
			if(windowSize >= 992 && cards > 4) {
				return true;
			} else if(windowSize >= 768 && windowSize < 992  && cards > 2) {
				return true;
			} else if(windowSize < 768 && cards > 1) {
				return true;
			}
			return false;
	}

	$('.carousel-container').each(function (i, cardEl) {
		var isAuthor = $(cardEl).find('.carousel-container-box').hasClass('edit-mode');
		changeClassCards(cardEl);
		if ( !isAuthor && startCarousel(cardEl)) {
			$($(cardEl).find('.carousel-container__list')).lightSlider({
				loop: false,
				speed: 600,
				currentPagerPosition: 'middle',
				enableDrag: false,
				autoWidth: false,
				adaptiveHeight: true, 
				slideMove: 4,
				slideMargin: 30, 
				responsive: [{
						breakpoint: 8000,
						settings: {
							item: 4,
							slideMove: 4,
						}
					},
					{
						breakpoint: 993,
						settings: {
							item: 4,
							slideMove: 4,
							controls: false
						}
					},
					{
						breakpoint: 769,
						settings: {
							item: 2,
							slideMove: 2,
							controls: true,
							slideMargin: 15, 
						}
					},
					{
						breakpoint: 577,
						settings: {
							item: 1.5,
							slideMove: 1,
							controls: false
						}
					},
					{
						breakpoint: 321,
						settings: {
							item: 1.3,
							slideMove: 1,
							controls: false
						}
					}
				],
				onSliderLoad: function (el) {
					buildDotsPercentage(el);
					$(el).removeClass('cS-hidden');
					resizeChildren(el);
				}
			});
			buildDotsPercentage: function buildDotsPercentage(el) {
				var dots = el.parent().parent().find('.lSPager li');
				var totalDots = dots.length;

				dots.each(function () {
					var index = $(this).find('a').data('index');
					var percentage = (100 * index) / totalDots;
					var element = $(this).find('.timeline-track').css('width', percentage + '%');
				});
			}
		} else {
				$(cardEl).find('.carousel-container__list').removeClass('cS-hidden');
		};
	});
});
$(document).ready(function ($) {
    setDynamicSectionId();
    if(getUrlVar('agencia')){
        scrollToElement('#localizador');
        $('.js-map-search').val(getUrlVar('agencia'));
        $('.find-agency__map-element').click();
           setTimeout(function(){ $('.button-search').click();},2000);
    }else{ 
        var hash = ['#AGINST','#AGPERSON','#AGPJ', '#CAIXAS', '#DISPENSADOR'];

        if(window.location.hash && hash.includes(window.location.hash)){
            scrollToElement('#localizador');
            setTimeout(function(){  $('.find-agency__map-element').click();},2000);
        }else{
            if(window.location.hash){
                scrollToElement(window.location.hash);
            }
        }
    }
});

function setDynamicSectionId() {
    $("section").each(function (index) {
        $(this).attr("id", "section" + (index + 1));
        if ($(this).parent('div').hasClass('find-agency')) {
            $(this).attr("id", "localizador");
        }
    });
}

function getUrlVars(){
	var vars = [], hash;
	var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
	for(var i = 0; i < hashes.length; i++)	{
	  hash = hashes[i].split('=');
	  vars.push(hash[0]);
	  vars[hash[0]] = hash[1];
	}
	return vars;
  }
function getUrlVar(name){
	return getUrlVars()[name];
  }

function scrollToElement(elementId) {
    var element = $(elementId);
    if (elementId && element && element.offset()) {
        var headerHeight = $('header').height();
        $('html,body').animate({scrollTop: element.offset().top - headerHeight});
    }
}
if (!String.prototype.padStart) {
    String.prototype.padStart = function padStart(targetLength, padString) {
        targetLength = targetLength >> 0; //truncate if number, or convert non-number to 0;
        padString = String(typeof padString !== 'undefined' ? padString : ' ');
        if (this.length >= targetLength) {
            return String(this);
        } else {
            targetLength = targetLength - this.length;
            if (targetLength > padString.length) {
                padString += padString.repeat(targetLength / padString.length); //append to original to ensure we are longer than needed
            }
            return padString.slice(0, targetLength) + String(this);
        }
    };
}
$(document).ready(function(){

    var jsonLD = '';

    $('.json-ld').each(function(){
        if(jsonLD !== '') {
            if(jsonLD.indexOf($(this).html()) === -1){
                jsonLD += $(this).html() !== undefined ? $(this).html() : '';
            }
        }else {
            jsonLD += $(this).html() !== undefined ? $(this).html() : '';
        }
    });

    $('.json-ld').remove();

    if(jsonLD) {
        $('head script[type="application/ld+json"]').append(jsonLD);
    }

});

// variaveis que definem a versão minima de cada navegador
var browserMinIe = 11;       
var browserMinFirefox = 36;
var browserMinChrome = 40;
var browserMinOpera = 28; 
var browserMinSafari = 7;

jQuery.browser = {};

var nAgt = navigator.userAgent;
jQuery.browser.ua = nAgt;

jQuery.browser.name  = navigator.appName;
jQuery.browser.fullVersion  = ''+parseFloat(navigator.appVersion);
jQuery.browser.majorVersion = parseInt(navigator.appVersion,10);
var nameOffset,verOffset,ix;

if ((verOffset=nAgt.indexOf("Opera"))!=-1) {
    jQuery.browser.name = "Opera";
    jQuery.browser.fullVersion = nAgt.substring(verOffset+6);
    if ((verOffset=nAgt.indexOf("Version"))!=-1)
        jQuery.browser.fullVersion = nAgt.substring(verOffset+8);// In Opera, the true version is after "Opera" or after "Version"
}else if ( (verOffset=nAgt.indexOf("MSIE"))!=-1) {
    jQuery.browser.name = "Microsoft Internet Explorer";
    jQuery.browser.fullVersion = nAgt.substring(verOffset+5);// In MSIE < 11, the true version is after "MSIE" in userAgent
}else if (nAgt.indexOf("Trident")!=-1 ) {
    jQuery.browser.name = "Microsoft Internet Explorer";
    var start = nAgt.indexOf("rv:")+3;
    var end = start+4;
    jQuery.browser.fullVersion = nAgt.substring(start,end);// In TRIDENT (IE11) => 11, the true version is after "rv:" in userAgent
}else if ((verOffset=nAgt.indexOf("Chrome"))!=-1) {
    jQuery.browser.name = "Chrome";
    jQuery.browser.fullVersion = nAgt.substring(verOffset+7);// In Chrome, the true version is after "Chrome"
}else if ((verOffset=nAgt.indexOf("Safari"))!=-1) {
    jQuery.browser.name = "Safari";
    jQuery.browser.fullVersion = nAgt.substring(verOffset+7);
    if ((verOffset=nAgt.indexOf("Version"))!=-1)
        jQuery.browser.fullVersion = nAgt.substring(verOffset+8);// In Safari, the true version is after "Safari" or after "Version"
}else if ((verOffset=nAgt.indexOf("AppleWebkit"))!=-1) {
    jQuery.browser.name = "Safari";
    jQuery.browser.fullVersion = nAgt.substring(verOffset+7);
    if ((verOffset=nAgt.indexOf("Version"))!=-1)
        jQuery.browser.fullVersion = nAgt.substring(verOffset+8);// In Safari, the true version is after "Safari" or after "Version"
}else if ((verOffset=nAgt.indexOf("Firefox"))!=-1) {
    jQuery.browser.name = "Firefox";
    jQuery.browser.fullVersion = nAgt.substring(verOffset+8);// In Firefox, the true version is after "Firefox"
}else if ( (nameOffset=nAgt.lastIndexOf(' ')+1) < (verOffset=nAgt.lastIndexOf('/')) ){
    jQuery.browser.name = nAgt.substring(nameOffset,verOffset);
    jQuery.browser.fullVersion = nAgt.substring(verOffset+1);
    if (jQuery.browser.name.toLowerCase()==jQuery.browser.name.toUpperCase()) {
        jQuery.browser.name = navigator.appName;
    }// In most other browsers, "name/version" is at the end of userAgent
}

// trim the fullVersion string at semicolon/space if present
if ((ix=jQuery.browser.fullVersion.indexOf(";"))!=-1){
    jQuery.browser.fullVersion=jQuery.browser.fullVersion.substring(0,ix);
}
if ((ix=jQuery.browser.fullVersion.indexOf(" "))!=-1){
    jQuery.browser.fullVersion=jQuery.browser.fullVersion.substring(0,ix);
}
jQuery.browser.majorVersion = parseInt(''+jQuery.browser.fullVersion,10);
if (isNaN(jQuery.browser.majorVersion)) {
    jQuery.browser.fullVersion  = ''+parseFloat(navigator.appVersion);
    jQuery.browser.majorVersion = parseInt(navigator.appVersion,10);
}
jQuery.browser.version = jQuery.browser.majorVersion;

var browserAntigoStatus = false;
if(jQuery.browser.name === "Microsoft Internet Explorer"){
    $(".mosaic-container .mosaic--big img").css({'background-image':"url("+$(".mosaic-container .mosaic--big img").attr('srcset')+")",'background-size':'cover'});
    $(".mosaic-container .mosaic--wide img").css({'background-image':"url("+$(".mosaic-container .mosaic--wide img").attr('srcset')+")",'background-size':'cover'});
    $(".mosaic-container .mosaic--small-1 img").css({'background-image':"url("+$(".mosaic-container .mosaic--small-1 img").attr('srcset')+")",'background-size':'cover'});
    $(".mosaic-container .mosaic--small-2 img").css({'background-image':"url("+$(".mosaic-container .mosaic--small-2 img").attr('srcset')+")",'background-size':'cover'});
    $(".mosaic-container .mosaic--big img").removeAttr('alt');
    $(".mosaic-container .mosaic--wide img").removeAttr('alt');
    $(".mosaic-container .mosaic--small-1 img").removeAttr('alt');
    $(".mosaic-container .mosaic--small-2 img").removeAttr('alt');
    }
    else{
        $('.card-container .card__caption + .card__footer').css({'position':'fixed','bottom': '24px'}); 
    }

    if ((jQuery.browser.name === "Microsoft Internet Explorer" && jQuery.browser.version <= browserMinIe) || (jQuery.browser.name === "Firefox" && jQuery.browser.version < browserMinFirefox) ||(jQuery.browser.name === "Chrome" && jQuery.browser.version < browserMinChrome) || (jQuery.browser.name === "Opera" && jQuery.browser.version < browserMinOpera) || (jQuery.browser.name === "Safari" && jQuery.browser.version < browserMinSafari)) {

        var htm2 = 	' <div id="certificados">' +
                ' <div id="div_main">' +
                ' <div id="div_text">' +
                ' <p><b>Atualize seu navegador para ter acesso a todos os recursos.</b><br>' +
                ' Selecione uma das opções ao lado.</p>' +
                ' </div>' +
                ' <div id="div_img">' +
                ' <ul>' +
                ' <li><a href="https://www.itau.com.br/computador/" target="_blank"><img src="https://jarvisfabrica.itau/summer-cdn/commons/img/browser-btn-app-itau.gif"></a></li>' +
                ' <li><a href="https://www.google.com/intl/pt-BR/chrome/browser/?hl=pt-br" target="_blank"><img src="https://jarvisfabrica.itau/summer-cdn/commons/img/browser-btn-chrome.gif"></a></li>' +
                ' <li><a href="http://www.mozilla.org/pt-BR/firefox/new/" target="_blank"><img src="https://jarvisfabrica.itau/summer-cdn/commons/img/browser-btn-firefox.gif"></a></li>' +					
                ' <li><a href="http://www.apple.com/br/safari/" target="_blank"><img src="https://jarvisfabrica.itau/summer-cdn/commons/img/browser-btn-safari.gif"></a></li>' +
                ' </ul>' +
                ' </div>' +
                ' </div>';

            $('body:first').prepend(htm2);
            $('#certificados #div_img ul li a img').css({'border': '0'});
            $('#certificados #div_img ul li').css({'display':'inline-block','padding':'0 1px','list-style':'none'});
            $('#certificados #div_img ul').css({'height':'40px','padding':'0','margin':'0'});
            $('#certificados #div_img').css({'display':'inline-block','padding':'10px 20px 10px 0','float':'right'});
            $('#certificados #div_text b').css({'font-family':"'ItauDisplay-Light', 'Myriad Pro', 'Arial';", 'font-size':'18px'});
            $('#certificados #div_text p').css({'line-height':'20px','font-family':"'ItauDisplay-Light', 'Myriad Pro', 'Arial';", 'color':'black', 'font-size':'15px'});
            $('#certificados #div_text').css({'font-size':'12px', 'float':'left', 'display':'inline-block', 'padding':'10px 120px'});
            $('#certificados').css('line-height','1');
            $('#certificados #div_main').css({'min-width':'980px','width':'100%', 'height':'60px', 'background-color':'#FFF'});
        }
youtubeVideoParameters = "?enablejsapi=1&version=3&playerapiid=ytplayer&controls=0&autoplay=1&cc_load_policy=1.";

var regExpLocation = new RegExp('/content/dam/');
var linkDataVideo;

function youtubePlayVideo(selector) {
    linkDataVideo = $(selector).attr('data-video')
    openVideoSource(linkDataVideo);
    $('.video-close').focus();
  

  if (isBreakPoint(768) || isBreakPoint(480) || isBreakPoint(320)) {
    $('.visible-xs').each(function () {
      $(this).attr('aria-hidden', false).attr('tabindex', '0');
    });
  } else {
    $('.visible-sm').each(function () {
      $(this).attr('aria-hidden', false).attr('tabindex', '0');
    });
  }
}

function verifyInternalSourceVideo(url) {
  if (url.match(regExpLocation) != null) {
   return true;
  } else {
   return false;
  }
}

function openVideoSource(url) {
  if (verifyInternalSourceVideo(url)) {
    openInternalVideo(url);
  } else {
    openExternalVideo(url);
  }
}

function openInternalVideo(url) {
  createVideoPlayerInternal();
  hideContentBelow();
  $('source').attr('src', url);
  $('body').css('overflow', 'hidden');
}

function openExternalVideo(url) {
  createVideoPlayerExternal();
  hideContentBelow();
    
  var videoUrl = 'https://www.youtube.com/embed/' + url +  youtubeVideoParameters;
  $('.video-player iframe').attr('src', videoUrl);
  setTimeout(function () {
    $('iframe')[0].contentWindow.postMessage('{"event":"command","func":"' + 'playVideo' + '","args":""}', '*');
  }, 500);
  $('body').css('overflow', 'hidden');
}

function closeVideo() {
  $('body').css('overflow', '');
  removeVideoPlayer();
  showContentBelow();
  focusInTheLastImg();
}

function createVideoPlayerExternal() {
  $('<div class="video-player">').appendTo('body');
  $('<button class="video-close" onclick="closeVideo()" aria-label="Fechar Vídeo">X</button>').appendTo('.video-player');
  $('<iframe id="" class="video-box" src="" frameborder="0" title="Apple Pay Vídeo"></iframe>').appendTo('.video-player');
}

function createVideoPlayerInternal() {
  $('<div class="video-player">').appendTo('body');
  $('<button class="video-close" onclick="closeVideo()" aria-label="Fechar Vídeo">X</button>').appendTo('.video-player');
  $('<video controls autoplay><source src=""type="video/mp4"/></video>').appendTo('.video-player');
}

function hideContentBelow() {
  $('section').attr('aria-hidden', true).attr('tabindex', '-1');
}

function showContentBelow() {
  $('section').attr('aria-hidden', false).attr('tabindex', '0');
}

function removeVideoPlayer() {
  $('.video-player').remove();
  $('iframe').remove();
  $('video').remove();
  $('.video-close').remove();
}

function focusInTheLastImg(){
  $("[data-video*='"+linkDataVideo+"']").focus();
}
