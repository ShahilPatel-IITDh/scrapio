(function($,enquire){function resizeTitle(){if($('.feature__title a').text().length>75){$('.feature__title').addClass('feature__title--resized');}}
function toggleMenu(e){var button=$('#menu-toggle');button.on('click',function(){$('#site-navigation').toggleClass('toggled');if(button.attr('aria-expanded')==='true'){button.attr('aria-expanded','false');}else{button.attr('aria-expanded','true');$('body').toggleClass('fixed');}});}
function toggleSearch(){var searchOpenLink=$('#open-search'),searchCloseLink=$('#close-search'),searchInput=$('.search-form .search-field'),searchFormEl=$('.search-form'),searchSubmit=$('.search-submit');searchPanel=$('#panel__search');searchSubmit.attr('tabindex',-1);searchInput.attr('tabindex',-1);searchOpenLink.on('click',function(){searchOpenLink.attr('aria-pressed','true');searchCloseLink.attr('aria-pressed','false');searchFormEl.toggleClass('toggled');searchPanel.attr('aria-expanded','true');$('body').addClass('fixed');if(searchFormEl.hasClass('toggled')){searchInput.focus();searchInput.value='';}});searchCloseLink.on('click',function(){searchCloseLink.attr('aria-pressed','true');searchOpenLink.attr('aria-pressed','false');searchFormEl.removeClass('toggled');searchPanel.attr('aria-expanded','false');$('body').removeClass('fixed');});}
function mobileMenu(){$('#site-navigation').append('<div id="mobile-menu-container" class="mobile-menu-container"></div>');$('#mobile-menu-container').append($('#primary-menu'));$('#mobile-menu-container').append($('.subscribe__btn'));}
function toggleSubMenu(){var hasChildren=$('.mobile-menu-container .primary-menu > .menu-item-has-children');var navArrow=$('<span class="nav-arrow" tabindex="0"></span>');hasChildren.prepend(navArrow);$('.nav-arrow').on('click keypress',function(){$('.sub-menu').removeClass('sub-menu--active');$(this).nextAll('.sub-menu').addClass('sub-menu--active');});$('.menu-item-has-children > a').on('click keypress',function(){$('.sub-menu').removeClass('sub-menu--active');$(this).nextAll('.sub-menu').addClass('sub-menu--active');});}
function parentMenuItem(){$('.nav-arrow').on('click keypress',function(){var menuParentText=$(this).next('a').html();var findMenuParent=$(this).siblings('.sub-menu').find('.menu-parent');if(findMenuParent.length<1){$('.mobile-menu-container .sub-menu--active').prepend('<span class="menu-parent">'+menuParentText+'</span>');}
var menuParent=$('.menu-parent');var findBackLink=$(this).siblings('.sub-menu').find('.back');if(findBackLink.length<1){menuParent.prepend('<span class="nav-arrow back" tabindex="0"></span>');}
var backLink=$('.menu-parent .back');var parentLI=backLink.parents('.sub-menu');backLink.on('click keypress',function(){parentLI.removeClass('sub-menu--active');});});$('.menu-item-has-children > a').on('click keypress',function(){var menuParentText=$(this).html();var findMenuParent=$(this).siblings('.sub-menu').find('.menu-parent');if(findMenuParent.length<1){$('.mobile-menu-container .sub-menu--active').prepend('<span class="menu-parent">'+menuParentText+'</span>');}
var menuParent=$('.menu-parent');var findBackLink=$(this).siblings('.sub-menu').find('.back');if(findBackLink.length<1){menuParent.prepend('<span class="nav-arrow back" tabindex="0"></span>');}
var backLink=$('.menu-parent .back');var parentLI=backLink.parents('.sub-menu');backLink.on('click keypress',function(){parentLI.removeClass('sub-menu--active');});});}
function desktopMenu(){$('#site-navigation').append($('#primary-menu'));$('.top-bar__container').append($('.subscribe__btn'));$('#mobile-menu-container').remove();$('.menu-parent').remove();$('.nav-arrow').remove();}
function mobileSearch(){$('.search-container').appendTo($('.site__bar-container'));$('.search-form').appendTo($('.panel__search-container'));}
function desktopSearch(){$('.top-bar__nav').after($('.search-container'));$('.search-form').appendTo($('.search-container'));}
$(document).ready(function(){$('#primary-menu > li').attr('tabindex',0);resizeTitle();toggleSearch();toggleMenu();});enquire.register("screen and (max-width:1024px)",{match:function(){mobileSearch();mobileMenu();toggleSubMenu();parentMenuItem();},unmatch:function(){desktopSearch();desktopMenu();}});})(jQuery,enquire);