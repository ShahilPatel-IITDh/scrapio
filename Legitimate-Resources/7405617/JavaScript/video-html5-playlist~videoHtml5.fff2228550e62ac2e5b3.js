(window.webpackJsonp=window.webpackJsonp||[]).push([["video-html5-playlist~videoHtml5"],{"076a":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPageWithAutoplayVideos=t.getVideoHtml5Containers=void 0;var s=i("XOHg"),o=i("rkpQ");let n=0;let a=!0;const r=e=>{const t=[...e.querySelectorAll(".video-html5")].map((e=>{e.matches(".autoplay:not(.muted)")&&((0,s.isMobileDevice)()||(0,o.isSafari)()||a&&!(0,s.isSameBlogRequest)())&&e.classList.remove("autoplay");const t=`video-player-${n+=1,n}`;return e.id||e.setAttribute("id",t),e})).filter(s.matchesBreakpoint);return a=!1,t};t.getVideoHtml5Containers=r;t.isPageWithAutoplayVideos=()=>{const e=r(document);return e.length>0?e.some((e=>e.classList.contains("autoplay"))):void 0}},"4XxE":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getVastTagOptions=void 0;const s=!1,o=!1;t.getVastTagOptions=()=>({adsEnabled:!s&&!o})},"80qU":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BLOCK_PREROLL_LATE=void 0;t.BLOCK_PREROLL_LATE=!0},FFgU:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prepareVideoBidders=t.default=void 0;var s=r(i("5Bk5")),o=r(i("jONu")),n=i("rkpQ"),a=r(i("pyhf"));function r(e){return e&&e.__esModule?e:{default:e}}const d=(e,t,i)=>Object.keys(t).reduce(((o,n)=>{const r=n,d=t[r][i];return e[r]?a.default.isOn(`prebid_bidder_${r}_disabled`)?o:o.concat({...e[r],params:(0,s.default)(d,e[r].params)}):("default"!==r.toString()&&console.error(`Video HB bidder '${r}' doesn't exist in 'videoBidderConfig'`),o)}),[]);t.prepareVideoBidders=d;var l=async(e,t)=>{const s=await(async e=>{const t=`${e.toString().toLowerCase()}.${(0,n.isMobile)()?"mobile":"desktop"}`;try{switch(t){case"avclub.mobile":return await i.e("video-avclub-mobile-config").then(i.t.bind(null,"RqGy",3));case"avclub.desktop":return await i.e("video-avclub-desktop-config").then(i.t.bind(null,"Zs/7",3));case"deadspin.mobile":return await i.e("video-deadspin-mobile-config").then(i.t.bind(null,"9Vvt",3));case"deadspin.desktop":return await i.e("video-deadspin-desktop-config").then(i.t.bind(null,"D0uz",3));case"gizmodo.mobile":return await i.e("video-gizmodo-mobile-config").then(i.t.bind(null,"tSpS",3));case"gizmodo.desktop":return await i.e("video-gizmodo-desktop-config").then(i.t.bind(null,"xnB8",3));case"jalopnik.mobile":return await i.e("video-jalopnik-mobile-config").then(i.t.bind(null,"gGr0",3));case"jalopnik.desktop":return await i.e("video-jalopnik-desktop-config").then(i.t.bind(null,"TXrO",3));case"jezebel.mobile":return await i.e("video-jezebel-mobile-config").then(i.t.bind(null,"9IJ/",3));case"jezebel.desktop":return await i.e("video-jezebel-desktop-config").then(i.t.bind(null,"n2Xq",3));case"kotaku.mobile":return await i.e("video-kotaku-mobile-config").then(i.t.bind(null,"GG7+",3));case"kotaku.desktop":return await i.e("video-kotaku-desktop-config").then(i.t.bind(null,"6BRZ",3));case"lifehacker.mobile":return await i.e("video-lifehacker-mobile-config").then(i.t.bind(null,"nApM",3));case"lifehacker.desktop":return await i.e("video-lifehacker-desktop-config").then(i.t.bind(null,"oYwl",3));case"theinventory.mobile":return await i.e("video-theinventory-mobile-config").then(i.t.bind(null,"FfPr",3));case"theinventory.desktop":return await i.e("video-theinventory-desktop-config").then(i.t.bind(null,"qtL/",3));case"theonion.mobile":return await i.e("video-theonion-mobile-config").then(i.t.bind(null,"LDDf",3));case"theonion.desktop":return await i.e("video-theonion-desktop-config").then(i.t.bind(null,"ruMG",3));case"theroot.mobile":return await i.e("video-theroot-mobile-config").then(i.t.bind(null,"Hzrv",3));case"theroot.desktop":return await i.e("video-theroot-desktop-config").then(i.t.bind(null,"K4OC",3));case"thetakeout.mobile":return await i.e("video-thetakeout-mobile-config").then(i.t.bind(null,"Jm3/",3));case"thetakeout.desktop":return await i.e("video-thetakeout-desktop-config").then(i.t.bind(null,"XZM0",3));case"quartz.mobile":return await i.e("video-quartz-mobile-config").then(i.t.bind(null,"j7VO",3));case"quartz.desktop":return await i.e("video-quartz-desktop-config").then(i.t.bind(null,"kjNr",3));default:console.error(`Video HB config key '${t}' doesn't have JSON file.`)}}catch(e){console.error(e)}return Promise.resolve({})})(t||"default");return d(o.default,s,e)};t.default=l},"P+mQ":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(i("Pdww"));var s=r(i("c+F0")),o=i("Hxbq"),n=i("Q4Ud"),a=i("XOHg");function r(e){return e&&e.__esModule?e:{default:e}}class d extends s.default{constructor(e){super(e.container),this.controller=e,this.eventPrefix=o.EVENT_VIDEOADS,(0,a.isImaLoaded)()&&google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),this.adcontainer=this.controller.container.querySelector(".advertisement"),this.adcontainer&&(0,a.isImaLoaded)()&&(this.adDisplayContainer=new google.ima.AdDisplayContainer(this.adcontainer,this.controller.player.video),this.createAdsLoader()),this.attachEventListeners()}isReady(){return Boolean(this.adsManager)}onUserAction(){this.adDisplayContainer.initialize(),this.controller.player.video.load()}requestAds(e){const t=new google.ima.AdsRequest,{video:i}=this.controller.player;t.linearAdSlotWidth=i.width,t.linearAdSlotHeight=i.height,t.nonLinearAdSlotWidth=i.width,t.nonLinearAdSlotHeight=i.height,t.adTagUrl=e,this.adsLoader.requestAds(t)}onAdsManagerLoaded(e){const t=new google.ima.AdsRenderingSettings;t.restoreCustomPlaybackStateOnAdBreakComplete=!0,this.adsManager=e.getAdsManager(this.controller.player.video,t),this.startAdsManager(this.adsManager)}startAdsManager(e){e.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested,!1,this),e.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested,!1,this),e.addEventListener(google.ima.AdEvent.Type.AD_CAN_PLAY,this.onAdCanPlay,!1,this);const t=(0,n.getImaEvents)();for(let i=0;i<t.length;i++)e.addEventListener(t[i],(e=>{this.dispatchEvent(e.type,{e:e})}));const{video:i}=this.controller.player;e.init(i.clientWidth,i.clientHeight,google.ima.ViewMode.NORMAL),e.start(),this.dispatchEvent(n.INTERNAL_EVENTS.PLAYPAUSE,{isPlaying:!0})}createAdsLoader(){this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer),this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded,!1,this),this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError,!1,this);const e=(0,n.getImaErrorEvents)();for(let t=0;t<e.length;t++)this.adsLoader.addEventListener(e[t],(e=>{this.dispatchEvent(e.type,{e:e})}))}onContentPauseRequested(){this.controller.pauseForAd(),this.controller.setVideoEndedCallbackEnabled(!1)}onContentResumeRequested(){this.controller.setVideoEndedCallbackEnabled(!0),this.controller.get(this.controller.CONTENTCOMPLETE)||this.controller.resumeAfterAd()}onAdCanPlay(){this.controller.unlockTimeout&&clearTimeout(this.controller.unlockTimeout),this.controller.set(this.controller.ADSREADY,!0),this.controller.set(this.controller.ADSLOADING,!1);const{analytics:e}=this.controller;-1!==e.sentActions.indexOf(o.GA_EVENT_VIDEO_STARTED)&&-1===e.sentActions.indexOf(o.GA_EVENT_ADS_PREROLL)&&this.adsManager.discardAdBreak()}restartAdsLoader(){this.controller.unlockTimeout&&clearTimeout(this.controller.unlockTimeout),this.controller.container.classList.remove("autoplay"),this.controller.set(this.controller.ADSLOADING,!1),this.controller.analytics.autoplay=!1,this.controller.preventNoPrerollPlayback=!1,this.adsLoader.destroy(),this.adsManager&&this.adsManager.destroy(),this.createAdsLoader(),this.controller.analytics.sentActions=[]}onAdError(){-1!==this.controller.analytics.sentActions.indexOf(o.GA_EVENT_ADS_PREROLL)&&(this.controller.preventNoPrerollPlayback=!1),this.controller.preventNoPrerollPlayback?this.restartAdsLoader():(this.controller.set(this.controller.ADSREADY,!0),this.controller.resumeAfterAd())}pause(){this.adsManager&&(this.adsManager.pause(),this.dispatchEvent(n.INTERNAL_EVENTS.PLAYPAUSE,{isPlaying:!1}))}resume(){this.adsManager&&(this.adsManager.resume(),this.dispatchEvent(n.INTERNAL_EVENTS.PLAYPAUSE,{isPlaying:!0}))}contentEnded(){this.controller.set(this.controller.CONTENTCOMPLETE,!0),this.adsLoader.contentComplete()}attachEventListeners(){this.handleControlsEvent(n.INTERNAL_EVENTS.MUTEUNMUTE,(e=>{const{isMuted:t}=e.detail;this.adsManager&&this.adsManager.setVolume(t?0:.8)}))}resize(e,t){this.adsManager&&this.adsManager.resize(e,t,google.ima.ViewMode.FULLSCREEN)}}t.default=d,e.exports=t.default},Pdww:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=f(i("Oyao")),o=f(i("T5cu")),n=i("Q4Ud"),a=i("XOHg"),r=i("m7XO"),d=f(i("xzxi")),l=f(i("sgyI")),c=i("4XxE"),u=i("Hxbq"),h=f(i("P+mQ")),p=f(i("cY8/")),v=f(i("mgDT")),E=f(i("kYog")),m=f(i("kUui")),g=i("rkpQ");function f(e){return e&&e.__esModule?e:{default:e}}function y(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}t.default=class{constructor(e,t){y(this,"unlockTimeout",void 0),y(this,"preventNoPrerollPlayback",!1),y(this,"ADSREADY","adsReady"),y(this,"ADSACTIVE","adsActive"),y(this,"ADSLOADING","adsLoading"),y(this,"ADSDONE","adsDone"),y(this,"PLAYING","playing"),y(this,"CONTENTCOMPLETE","contentComplete"),y(this,"VISIBILITYPLAYING","visibilityPlaying"),y(this,"FULLSCREEN","fullscreen"),y(this,"FULLSCREEN_W","fullscreenWidth"),y(this,"FULLSCREEN_H","fullscreenHeight"),y(this,"FULLSCREEN_WO","fullscreenWidthOriginal"),y(this,"FULLSCREEN_HO","fullscreenHeightOriginal"),y(this,"USERINTERACTION","userinteraction"),y(this,"USERACTIVE","useractive"),y(this,"state",{}),this.container=e,this.player=new E.default(this.container),this.ads=t?new h.default(this):null,t||(this.set(this.ADSLOADING,!1),this.set(this.ADSREADY,!0)),this.analytics=new p.default(e,this.player),this.player.useOptimalSource(),this.player.loadSources();e.querySelectorAll("video, .advertisement, .btn-play").forEach((e=>{e.addEventListener((0,n.getClickEvent)(),this.onClick.bind(this),{passive:!0})})),this.videoEndedCallback=this.onContentEnded.bind(this),this.setVideoEndedCallbackEnabled(!0),this.onAllAdsCompleted((()=>this.set(this.ADSDONE,!0)));const i=e.querySelector(".video-controls");if(i&&(this.controls=new v.default(i,this.container)),this.set("mobile",(0,a.isMobileDevice)()),this.controls){this.container.addEventListener(u.EVENT_CONTROLS+"."+n.INTERNAL_EVENTS.PLAYPAUSE,this.onClick.bind(this));const e=this.onFullscreenChange.bind(this);this.container.addEventListener(u.EVENT_CONTROLS+"."+n.INTERNAL_EVENTS.FULLSCREEN,this.onFullscreen.bind(this)),["fullscreenchange","mozfullscreenchange","webkitfullscreenchange"].forEach((t=>{document.addEventListener(t,e)}),!1);const t=this.onFullscreen.bind(this),i=this.player.video;i&&["webkitendfullscreen","mozcancelfullscreen","exitfullscreen"].forEach((e=>{i.addEventListener(e,t)})),this.onWindowOrientationChange=this.onFullscreenRotation.bind(this),this.onWindowFocus=()=>{this.get(this.VISIBILITYPLAYING)&&this.togglePlaying(!0)},this.onWindowBlur=()=>{this.set(this.VISIBILITYPLAYING,this.get(this.PLAYING)),this.togglePlaying(!1)},window.addEventListener("orientationchange",this.onWindowOrientationChange),this.container.addEventListener((0,a.isMobileDevice)()?"touchstart":"mousemove",(0,o.default)(this.watchActivity.bind(this),100))}if(e.classList.contains("autoplay")){if(window.addEventListener("focus",this.onWindowFocus),window.addEventListener("blur",this.onWindowBlur),this.ads||!t){const t=()=>{this.onClick(),this.set(this.USERINTERACTION,!1)};if((0,m.default)(e,10))t();else{const i=new IntersectionObserver((e=>{e.forEach((e=>{e.intersectionRatio>0&&(t(),i.unobserve(e.target))}))}),{threshold:0});i.observe(e)}}}else this.preventNoPrerollPlayback=!1}get(e){return this.state[e]}set(e,t){this.state[e]=t,this.container.classList.toggle("state-"+e.toLowerCase(),!0===t)}onClick(){const e=this;!1===this.get(this.USERINTERACTION)&&this.set(this.USERINTERACTION,!0);const t=document.querySelector(".video-not-started");t&&t.classList.remove("video-not-started");const i=this.get(this.PLAYING);Boolean(e.ads)&&e.get(this.ADSLOADING)&&!i||(void 0===i&&this.analytics.staticParams.playType===u.PLAY_TYPE_CLICK_TO_PLAY&&this.set(this.PLAYING,!0),!e.ads||e.get(this.ADSREADY)||e.get(this.ADSDONE)?this.togglePlaying(!i,!0):(e.set(this.ADSLOADING,!0),e.ads.onUserAction(),e.player.preloadContent(e.loadAds.bind(e)),e.unlockTimeout&&clearTimeout(e.unlockTimeout),e.unlockTimeout=setTimeout((()=>{e.preventNoPrerollPlayback?e.ads&&e.ads.restartAdsLoader():(this.togglePlaying(!0,!0),e.set(this.ADSLOADING,!1))}),(0,g.isSafari)()?15e3:1e4)))}watchActivity(){this.set(this.USERACTIVE,!0),this.inactivityTimeout&&clearTimeout(this.inactivityTimeout),this.inactivityTimeout=setTimeout((()=>{this.set(this.USERACTIVE,!1)}),2e3)}loadAds(){this.player.removePreloadListener();const e=this.container.getAttribute("data-video-id")||"",t=this.container.getAttribute("data-position")||"",i=this.container.getAttribute("data-video-blog-id")||"",o="true"===(this.container.getAttribute("data-monetizable")||"true"),n=(0,r.getScopeForVideo)({videoId:e,blogId:i});o?(0,d.default)({videoIds:{[e]:o},...(0,l.default)(t,n)},{...(0,c.getVastTagOptions)(),isAutoplay:this.container.classList.contains("autoplay"),scope:n},(t=>{const i=s.default.get("video_html5_vast")||t[e]||"";this.ads&&this.ads.requestAds(i)})):this.set(this.ADSLOADING,!1)}resumeAfterAd(){this.set(this.ADSACTIVE,!1),this.player.play(),this.togglePlayState(!0)}pauseForAd(){this.set(this.ADSACTIVE,!0),this.set(this.PLAYING,!0),this.player.video.pause(),this.togglePlayState(!0)}togglePlayState(e){this.container.classList.toggle("playing",e)}onAllAdsCompleted(e){this.ads&&this.container.addEventListener(u.EVENT_VIDEOADS+"."+google.ima.AdEvent.Type.ALL_ADS_COMPLETED,e)}onContentEnded(){!this.get(this.ADSDONE)&&this.ads&&this.ads.isReady()?(this.ads.contentEnded(),this.onAllAdsCompleted(this.requestNextVideo.bind(this))):this.requestNextVideo()}setVideoEndedCallbackEnabled(e){const t=this.videoEndedCallback;t&&(e?this.player.registerVideoEndedCallback(t):this.player.removeVideoEndedCallback(t))}requestNextVideo(){this.player.dispatchEvent("nextvideo"),this.selfDestruct()}onFullscreen(e){window.fullscreenVideo=this;const t=this.player.video;if(e.detail&&e.detail.fullscreen){this.set(this.FULLSCREEN_WO,this.player.video.clientWidth),this.set(this.FULLSCREEN_HO,this.player.video.clientHeight);const e=t.requestFullscreen||t.webkitRequestFullscreen||t.webkitEnterFullscreen||t.mozRequestFullscreen||t.requestFullScreen||t.webkitRequestFullScreen||t.mozRequestFullScreen;e&&(0,a.isMobileDevice)()?(this.set(this.FULLSCREEN_W,window.screen.width),this.set(this.FULLSCREEN_H,window.screen.height),e.call(t)):(this.set(this.FULLSCREEN_W,window.innerWidth),this.set(this.FULLSCREEN_H,window.innerHeight),this.onFullscreenChange())}else{const e=t.exitFullScreen||t.webkitCancelFullScreen||t.webkitExitFullscreen||t.mozCancelFullScreen;e&&(0,a.isMobileDevice)()?e.call(t):this.onFullscreenChange()}}onFullscreenChange(){if(!window.fullscreenVideo||window.fullscreenVideo!==this)return;const e=this.get(this.FULLSCREEN);if(e){const e=this.get(this.FULLSCREEN_WO),t=this.get(this.FULLSCREEN_HO);this.ads&&this.ads.resize(e,t),this.player.resize("relative","","",e,t)}else{const e=this.get(this.FULLSCREEN_W),t=this.get(this.FULLSCREEN_H);this.ads&&this.ads.resize(e,t),this.player.resize("fixed",0,0,e,t)}const t=!e;this.set(this.FULLSCREEN,t),document.body&&document.body.classList.toggle("noscroll",t),document.body&&document.body.classList.toggle("fullscreen",t),document.documentElement&&document.documentElement.classList.toggle("noscroll",t),t||(window.fullscreenVideo=void 0)}onFullscreenRotation(){if(window.fullscreenVideo&&!(0,a.isMobileDevice)()){const e=window.outerHeight,t=window.outerWidth;this.ads&&this.ads.resize(e,t),this.player.resize("fixed",0,0,e,t)}}togglePlaying(e,t){const i=this.get(this.PLAYING);this.get(this.ADSACTIVE)?this.ads&&(i&&!e&&this.ads.pause(),!i&&e&&this.ads.resume()):(i&&!e&&this.player.pause(),!i&&e&&this.player.play()),this.set(this.PLAYING,e),this.togglePlayState(e),t&&window.stopVideoHtml5&&window.stopVideoHtml5(this.container.id)}selfDestruct(){window.deleteVideoHtml5Controller(this.container.id),window.removeEventListener("orientationchange",this.onWindowOrientationChange),window.removeEventListener("focus",this.onWindowFocus),window.removeEventListener("blur",this.onWindowBlur)}},e.exports=t.default},Q4Ud:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hideShareOverlaysAndRemoveEvents=t.hideCcOverlaysAndRemoveEvents=t.getImaEvents=t.getImaErrorEvents=t.getClickEvent=t.VIDEO_EVENTS=t.INTERNAL_EVENTS=void 0;var s=i("XOHg");const o=()=>(0,s.isMobileDevice)()?"touchstart":"click";t.getClickEvent=o;t.INTERNAL_EVENTS={PROGRESS:"time",TRACKCHANGE:"track",MUTEUNMUTE:"muteunmute",VOLUMECHANGE:"volume",PLAYPAUSE:"playpause",FULLSCREEN:"fullscreen"};t.VIDEO_EVENTS=["audioprocessDeprecated","canplay","canplaythrough","complete","durationchange","emptied","ended","loadeddata","loadedmetadata","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"];t.getImaEvents=()=>(0,s.isImaLoaded)()?[...Object.values(google.ima.AdEvent.Type)]:[];t.getImaErrorEvents=()=>(0,s.isImaLoaded)()?[...Object.values(google.ima.AdError.Type),...Object.values(google.ima.AdErrorEvent.Type)]:[];const n=e=>{const t=document.querySelectorAll(".share-tools");if(t.length>0){const i=Array.from(t);i.some((t=>-1!==e.composedPath().indexOf(t)))||(i.forEach((e=>{e.classList.add("hide")})),document.removeEventListener(o(),n,{passive:!0}))}};t.hideShareOverlaysAndRemoveEvents=n;const a=e=>{const t=document.querySelectorAll(".closed-captions-box");if(t.length>0){const i=Array.from(t);i.some((t=>-1!==e.composedPath().indexOf(t)))||(i.forEach((e=>{e.classList.add("hide")})),document.removeEventListener(o(),a,{passive:!0}))}};t.hideCcOverlaysAndRemoveEvents=a},"X+1b":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setVisitedPostsIds=t.isInPlaylist=t.getVisitedPostsIds=void 0;var s,o=(s=i("Oyao"))&&s.__esModule?s:{default:s};const n="show-browser-data";t.setVisitedPostsIds=e=>{const t="."+location.host.split(".").slice(-2).join(".").split(":")[0],i=e.join(",");o.default.set(n,i,{domain:t})};const a=()=>(o.default.get(n)||"").split(",");t.getVisitedPostsIds=a;t.isInPlaylist=e=>{const t=a();return t.length>1&&t[t.length-1]===e}},b34w:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!s[e]){const t=new Promise(((t,i)=>{const s=Object.assign(document.createElement("script"),{type:"text/javascript",async:!0,onload:t,onerror:i,src:e});document.body&&document.body.appendChild(s)}));s[e]=t}return s[e]};const s={};e.exports=t.default},"c+F0":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,o=(s=i("+MQX"))&&s.__esModule?s:{default:s},n=i("Hxbq");function a(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}t.default=class{constructor(e){a(this,"eventPrefix","videoevent"),this.container=e}dispatchEvent(e,t){(0,o.default)(this.container,this.eventPrefix+"."+e,t||{})}handleEvent(e,t,i){this.container.addEventListener(e+"."+t,i)}handleAdsEvent(e,t){this.handleEvent(n.EVENT_VIDEOADS,e,t)}handleControlsEvent(e,t){this.handleEvent(n.EVENT_CONTROLS,e,t)}handlePlayerEvent(e,t){this.handleEvent(n.EVENT_PLAYER,e,t)}},e.exports=t.default},"cY8/":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=v(i("Oyao")),o=i("Q4Ud"),n=i("XOHg"),a=i("80qU"),r=i("m7XO"),d=i("Hxbq"),l=i("076a"),c=v(i("c+F0")),u=(v(i("kYog")),i("LEtV")),h=i("zgUT"),p=i("X+1b");function v(e){return e&&e.__esModule?e:{default:e}}function E(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class m extends c.default{constructor(e,t){super(e),E(this,"videoId",""),E(this,"trakerName",""),E(this,"sentActions",[]),E(this,"timeListeners",{}),this.player=t,this.videoId=this.container.getAttribute("data-video-id")||"";const i=this.container.getAttribute("data-video-title")||"",o=this.container.getAttribute("data-video-network")||"",n=parseInt(this.container.getAttribute("data-video-duration")||"")||0,a=this.container.getAttribute("data-video-blog-id")||"",d=(0,r.getScopeForVideo)({videoId:this.videoId,blogId:a}).kinja.meta,{blog:c,pageType:u,post:h}=d,v=(()=>{if(!u||"permalink"===u){if(h&&h.isVideo){return!(!h||!h.id)&&(0,p.isInPlaylist)(h.id)?"video-refresh":"video"}return h&&h.isFeatured?"featured":h&&h.sponsored?"sponsored-article":"article"}return"latest"===u?"latest":u})();this.staticParams={contentType:v,contentSource:"Kinja",position:"default",embedId:"none",embedLocation:`${window.location.hostname}${window.location.pathname}`,player:"html5",veritasId:s.default.get("vtas_f")||"",postPosition:"0",siteSection:c&&c.displayName||"",website:c&&c.name||"",type:"clip",pageWithAutoplayVideos:(0,l.isPageWithAutoplayVideos)(),errorMessage:"",timeWatched:"",playType:"",videoId:this.videoId,title:i,network:o,durationBucket:this.getDurationBucket(n)},this.container.classList.contains("autoplay")||(this.autoplay=!1),this.listenToEvents()}get debug(){const e="video_html5_debug",t=document.URL||window.location.href;if(Boolean(t.match("video_html5_debug"))){const t=location.host.indexOf("localhost")>-1,i=location.protocol.indexOf("s")>-1;return s.default.set(e,"1",{path:"/",expires:new Date((new Date).getTime()+864e5),secure:!t||i}),!0}return!!s.default.get(e)}getTrackerName(){return!this.trakerName&&this.videoId&&(this.trakerName=`kinjavideo${this.videoId}`,window.ga("create","UA-142218-33","auto",this.trakerName)),this.trakerName}sendEvent(e,t){this.sentActions.push(e);const i=this.getTrackerName();i&&this.videoId&&this.getDimensions(t).then((t=>{window.ga(`${i}.send`,"event","Video",e,`kinjavideo-${this.videoId}`,t),this.debug&&console.log("VIDEO HTML5 LOG",`GA EVENT "${e}"`,t)}))}isSentEvent(e){return-1!==this.sentActions.indexOf(e)}sendEventOnce(e,t){this.isSentEvent(e)||this.sendEvent(e,t)}async getDimensions(e){const{skipAutoplayCheck:t=!1,errorMessage:i=""}=e||{};this.staticParams.playType||(this.hasAutoplayValue()||t||(this.autoplay=this.container.classList.contains("autoplay")),this.hasAutoplayValue()&&(this.staticParams.playType=this.autoplay?d.PLAY_TYPE_AUTOPLAY:d.PLAY_TYPE_CLICK_TO_PLAY));const s={...this.staticParams};Object.keys(s).forEach((e=>{s[e]=this.getValueOrDefault(s[e])})),i&&(s.errorMessage=i),s.timeWatched=String(Math.floor(this.player.video.currentTime));const o={dimension16:s.contentType,dimension22:s.errorMessage,dimension41:s.type,dimension42:s.videoId,dimension44:s.durationBucket,dimension45:s.title,dimension50:s.player,dimension62:s.embedId,dimension63:s.embedLocation,dimension65:s.timeWatched,dimension83:s.contentType,dimension89:s.errorMessage,dimension101:s.website,dimension105:s.siteSection,dimension111:s.postPosition,dimension120:s.network,dimension121:s.position,dimension122:s.playType,dimension129:s.contentSource,dimension132:s.veritasId,dimension134:s.pageWithAutoplayVideos},n=e&&!0===e.nonInteraction;return(n||this.autoplay&&!n)&&(o.nonInteraction=!0),Promise.resolve(o)}getDurationBucket(e){if(e<=0)return"0";const t=Math.floor((e-1)/5);return`${5*t+1}-${5*(t+1)}`}getValueOrDefault(e){return null==e?"none":String(e)}hasAutoplayValue(){return"boolean"==typeof this.autoplay}listenToEvents(){if(this.debug){const e=(0,o.getImaEvents)();for(let t=0;t<e.length;t++)this.handleAdsEvent(e[t],(({detail:{e:e}})=>{console.log("VIDEO HTML5 LOG","ADS",e.type)}));const t=(0,o.getImaErrorEvents)();for(let e=0;e<t.length;e++)this.handleAdsEvent(t[e],(({detail:{e:e}})=>{console.log("VIDEO HTML5 LOG","ADS ERROR",e.type)}));o.VIDEO_EVENTS.forEach((e=>{this.handlePlayerEvent(e,(({detail:{e:e}})=>{console.log("VIDEO HTML5 LOG","PLAYER",e.type)}))}))}this.listenToTimeEvents(),this.handlePlayerEvent("loadedmetadata",(()=>{this.sendEventOnce(d.GA_EVENT_VIDEO_LOAD,{skipAutoplayCheck:!0,nonInteraction:!0})})),this.handlePlayerEvent("playing",(()=>{this.onActivePhase(),this.sendEventOnce(d.GA_EVENT_VIDEO_INIT,{skipAutoplayCheck:!0})})),(0,n.isImaLoaded)()&&(this.handleAdsEvent(google.ima.AdEvent.Type.STARTED,(()=>{this.onActivePhase(),this.sendEventOnce(d.GA_EVENT_VIDEO_INIT,{skipAutoplayCheck:!0})})),this.handleAdsEvent(google.ima.AdErrorEvent.Type.AD_ERROR,(()=>{this.sendEventOnce(d.GA_EVENT_VIDEO_INIT,{skipAutoplayCheck:!0})}))),this.handlePlayerEvent("playing",(()=>{this.sendEventOnce(d.GA_EVENT_VIDEO_STARTED);const{contentTitle:e,contentId:t,pageType:i,postMeta:s,blogGroup:o}=(0,u.getDefaultPageContext)();(0,h.sendGa4Event)({event:"video_start",video_current_time:this.player.video.currentTime||0,video_duration:this.player.video.duration||0,video_percent:0,video_provider:"selfhosted-html5",content_title:e,content_id:t,content_type:i,content_author:s?s.author.displayName:void 0,content_author_byline:s?s.byline:void 0,video_url:this.player.video.currentSrc||"",video_ads:this.container.classList.contains("state-adsready")&&!this.isSentEvent(d.GA_EVENT_ADS_ERROR),video_autoplay:this.autoplay||!1,video_sound:!this.player.video.muted,video_type:"clip",site_section:o,video_embed_id:"none",video_position:"default"})})),this.handlePlayerEvent("pause",(()=>{this.isSentEvent(d.GA_EVENT_VIDEO_COMPLETED)||this.sendEvent(d.GA_EVENT_VIDEO_PAUSED)})),this.handlePlayerEvent("error",(()=>{const{video:e}=this.player;this.sendEvent(d.GA_EVENT_VIDEO_ERROR,{errorMessage:e.error&&e.error.message||"",nonInteraction:!0})})),(0,n.isImaLoaded)()&&(this.handleAdsEvent(google.ima.AdEvent.Type.STARTED,(()=>{let e="";e=this.isSentEvent(d.GA_EVENT_ADS_PREROLL)&&this.isSentEvent(d.GA_EVENT_VIDEO_STARTED)?this.isSentEvent(d.GA_EVENT_VIDEO_COMPLETED)?d.GA_EVENT_ADS_POSTROLL:d.GA_EVENT_ADS_MIDROLL:d.GA_EVENT_ADS_PREROLL,a.BLOCK_PREROLL_LATE&&e===d.GA_EVENT_ADS_PREROLL&&this.isSentEvent(d.GA_EVENT_VIDEO_STARTED)&&(this.sentActions.push(e),e=d.GA_EVENT_ADS_LATE),this.sendEvent(e,{skipAutoplayCheck:!0,nonInteraction:!0})})),this.handleAdsEvent(google.ima.AdErrorEvent.Type.AD_ERROR,(e=>{const{e:t}=e.detail,i=t.getError();this.sendEvent(d.GA_EVENT_ADS_ERROR,{errorMessage:i.getType()+": "+i.getMessage(),nonInteraction:!0});const s=i.getVastErrorCode();this.sendEvent(d.GA_EVENT_ADS_ERROR+": VAST "+s,{errorMessage:i.getType()+": "+i.getMessage(),nonInteraction:!0})})))}onActivePhase(){this.hasAutoplayValue()||(this.autoplay=!this.container.classList.contains("state-userinteraction"))}listenToTimeEvents(){[3,30].forEach((e=>{const t=`${e}s`;this.timeListeners[t]=i=>{e<=i&&(this.sendEvent(`Video Content ${t}`),delete this.timeListeners[t])}})),[25,50,75,95,100].forEach((e=>{const t=`${e}%`;this.timeListeners[t]=(i,s)=>{if(e<=i/s*100){this.sendEvent(`Video Content ${t}`);const{contentTitle:i,contentId:s,pageType:o,postMeta:n,blogGroup:a}=(0,u.getDefaultPageContext)(),r={video_current_time:this.player.video.currentTime||0,video_duration:this.player.video.duration||0,video_percent:e,video_provider:"selfhosted-html5",content_title:i,content_id:s,content_type:o,content_author:n?n.author.displayName:void 0,content_author_byline:n?n.byline:void 0,video_url:this.player.video.currentSrc||"",video_ads:this.container.classList.contains("state-adsready")&&!this.isSentEvent(d.GA_EVENT_ADS_ERROR),video_autoplay:this.autoplay||!1,video_sound:!this.player.video.muted,video_type:"clip",site_section:a,video_embed_id:"none",video_position:"default"};this.isSentEvent(d.GA_EVENT_VIDEO_COMPLETED)?(0,h.sendGa4Event)({event:"video_complete",...r}):(0,h.sendGa4Event)({event:"video_progress",...r}),delete this.timeListeners[t]}}})),this.handlePlayerEvent(o.INTERNAL_EVENTS.PROGRESS,(e=>{const{time:t,duration:i}=e.detail;Object.keys(this.timeListeners).forEach((e=>this.timeListeners[e](t,i)))}))}}t.default=m,e.exports=t.default},jONu:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s={appnexus:{bidder:"appnexus",params:{placementId:0,video:{skippable:"true",playback_method:["auto_play_sound_off"]}}},ix:{bidder:"ix",params:{siteId:"",size:[640,480],video:{api:[2],maxduration:120,minduration:6,mimes:["video/mp4","application/javascript"],protocols:[2,3,5,6]}}},rubicon:{bidder:"rubicon",params:{accountId:"12156",siteId:"",zoneId:"",video:{language:"en"}}},trustx:{bidder:"trustx",params:{uid:0,video:{api:[1,2],mimes:["video/mpeg","video/mp4","application/javascript"],maxduration:120,minduration:5,playerHeight:480,playerWidth:640,skippable:"true",protocols:[2,3,5,6]}}},triplelift:{bidder:"triplelift",params:{inventoryCode:"",video:{mimes:["video/mp4","video/webm","video/ogg"],w:640,h:480}}},kargo:{bidder:"kargo",params:{}},freewheelssp:{bidder:"freewheelssp",params:{}},ttd:{bidder:"ttd",params:{supplySourceId:"gomedia",publisherId:"1"}},rise:{bidder:"rise",params:{org:"63c99b2b6656940001235862"}}};t.default=s,e.exports=t.default},kYog:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,o=i("Q4Ud"),n=i("XOHg"),a=i("Hxbq"),r=(s=i("c+F0"))&&s.__esModule?s:{default:s};class d extends r.default{constructor(e){super(e),this.video=e.querySelector("video"),this.eventPrefix=a.EVENT_PLAYER,this.attachEventListeners()}preloadContent(e){this.video.paused&&(0,n.isMobileDevice)()?(this.preloadListener=e,this.video.addEventListener("loadedmetadata",e,!1),this.video.load()):e()}removePreloadListener(){this.preloadListener&&(this.video.removeEventListener("loadedmetadata",this.preloadListener,!1),this.preloadListener=null)}play(){this.video.play(),this.dispatchEvent(o.INTERNAL_EVENTS.PLAYPAUSE,{isPlaying:!0})}pause(){this.video.pause(),this.dispatchEvent(o.INTERNAL_EVENTS.PLAYPAUSE,{isPlaying:!1})}registerVideoEndedCallback(e){this.video.addEventListener("ended",e,!1)}removeVideoEndedCallback(e){this.video.removeEventListener("ended",e,!1)}getSources(){return[...this.video.querySelectorAll("source")]}loadSources(){this.getSources().forEach((e=>{const t=e.getAttribute("data-src");t&&e.setAttribute("src",t)}))}useOptimalSource(){const e=this.getSources().map((e=>e.getAttribute("label")||"")),t=this.container.offsetWidth,i=(0,n.optimalRendition)(t,e);i&&this.useSource(i)}useSource(e){const t=this.container.querySelector(`video source[label="${e}"]`);t&&this.video.prepend(t)}attachEventListeners(){this.handleControlsEvent(o.INTERNAL_EVENTS.MUTEUNMUTE,(e=>{const{isMuted:t}=e.detail;this.video.muted=Boolean(t)})),this.handleControlsEvent(o.INTERNAL_EVENTS.VOLUMECHANGE,(e=>{const{volume:t}=e.detail;this.video.volume=t})),this.video.addEventListener("timeupdate",(()=>{this.dispatchEvent(o.INTERNAL_EVENTS.PROGRESS,{time:this.video.currentTime,duration:this.video.duration})})),this.handleControlsEvent(o.INTERNAL_EVENTS.PROGRESS,(e=>{const{time:t}=e.detail;this.container.classList.contains("state-adsactive")||(this.video.currentTime=t)})),this.handleControlsEvent(o.INTERNAL_EVENTS.TRACKCHANGE,(e=>{const{track:t}=e.detail;for(let e=0;e<this.video.textTracks.length;e++)this.video.textTracks[e].mode=this.video.textTracks[e].label===t?"showing":"hidden"})),o.VIDEO_EVENTS.forEach((e=>{this.video.addEventListener(e,(e=>{this.dispatchEvent(e.type,{e:e})}))}))}resize(e,t,i,s,o){this.container.style.position=e,this.container.style.top="number"==typeof t?t+"px":"",this.container.style.left="number"==typeof i?i+"px":"",this.container.style.width=s+"px",this.container.style.height=o+"px",this.video.style.position=e,this.video.style.width=s+"px",this.video.style.height=o+"px"}}t.default=d,e.exports=t.default},leRD:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.advertisingScheduleDefaults=t.PP_MOBILE=t.PP_DESKTOP=void 0;var s,o=(s=i("NWgQ"))&&s.__esModule?s:{default:s};t.PP_MOBILE="MobileBitRates";t.PP_DESKTOP="DesktopBitRates";const n={ad_rule:1,sz:"640x480|640x481",impl:"s",gdfp_req:1,env:"vp",unviewed_position_start:1,correlator:Date.now(),output:"xml_vast3"};t.advertisingScheduleDefaults=n;var a=e=>{const{cust_params:t,...i}=e,s={...n,...i,cust_params:o.default.stringify(t,{arrayFormat:"comma",encode:!1})};return`https://pubads.g.doubleclick.net/gampad/ads?${o.default.stringify(s)}`};t.default=a},m7XO:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getScopeForVideo=t.default=void 0;var s=i("4AjC"),o=l(i("8exm")),n=l(i("Mt8k")),a=l(i("u5xL")),r=i("eo07"),d=l(i("vTr3"));function l(e){return e&&e.__esModule?e:{default:e}}t.getScopeForVideo=({videoId:e,blogId:t})=>{const i=window.kinjaByVideo&&e&&window.kinjaByVideo[e];return i||(window.kinja&&window.kinja.meta&&window.kinja.meta.blog&&window.kinja.meta.blog.id===t?window:{dfpSiteSection:window.dfpSiteSection,kinja:{...window.kinja,meta:{...window.kinja.meta,blog:{...window.kinja.meta.blog,id:t,name:(0,s.getBlogName)(t)||"",displayName:(0,s.getBlogDisplayName)(t)||""}}}})};var c=(e,t)=>{const{meta:i,channelMeta:s,tagMeta:l}=e.kinja,{blog:c,pageType:u,post:h}=i||{},p=h&&h.tags&&h.tags.map((e=>e.canonical))||l&&l.tags&&l.tags.split(",")||[],{channel:v,section:E,subsection:m}=s||{},g=(0,d.default)({postId:h&&h.id||"",blogName:c&&c.name||"",channel:v,section:E,subsection:m,tags:p,pageType:u,pageDepth:n.default.getPageDepth(),utm_source:(0,o.default)("utm_source")||void 0,utm_medium:(0,o.default)("utm_medium")||void 0,utm_campaign:(0,o.default)("utm_campaign")||void 0,referrer:document.referrer||""},t);g.page=[(0,r.getAdUnitPostType)(e)];const f=window.veritas_version?(0,a.default)():{},y={page:g.page,pd:g.pd};return(window.crtg_content?window.crtg_content.split(";"):[]).forEach((function(e){const t=e.split("=");if(2===t.length){const e=t[0],i=t[1];y[e]?y[e].push(i):y[e]=[i]}})),{...g,...f,...y}};t.default=c},mgDT:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,o=(s=i("c+F0"))&&s.__esModule?s:{default:s},n=i("Hxbq"),a=i("Q4Ud"),r=i("pLYW");function d(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class l extends o.default{constructor(e,t){super(t),d(this,"DEFAULT_VOLUME",80),this.controls=e,this.eventPrefix=n.EVENT_CONTROLS,this.playPause=e.querySelector(".play-pause"),this.fastForward=e.querySelector(".fast-forward"),this.rewind=e.querySelector(".rewind"),this.muteUnmute=e.querySelector(".mute-unmute"),this.volume=e.querySelector(".mute-volume .volume progress"),this.progressWrapper=e.querySelector(".progress"),this.progress=e.querySelector(".progress progress"),this.duration=e.querySelector(".duration"),this.fullscreen=e.querySelector(".fullscreen"),this.mobileForward=t.querySelector(".video-secondary-controls .mobile-forward"),this.mobileRewind=t.querySelector(".video-secondary-controls .mobile-rewind"),this.closedCaptionsControl=e.querySelector(".closed-captions .cc"),this.closedCaptionsBox=e.querySelector(".closed-captions-box"),this.closedCaptions=e.querySelectorAll(".closed-captions-box li"),this.closedCaptionsClose=e.querySelector(".closed-captions-close"),this.shareControl=e.querySelector(".share"),this.shareTools=e.querySelector(".share-tools"),this.shareToolsClose=e.querySelector(".share-tools-close"),this.attachEventListeners()}attachEventListeners(){const{muteUnmute:e,volume:t,progressWrapper:i,progress:s,fullscreen:o,closedCaptionsControl:n,closedCaptions:d,closedCaptionsClose:l,shareTools:c,shareControl:u,shareToolsClose:h}=this;let p;this.playPause.addEventListener((0,a.getClickEvent)(),this.handlePlayPause.bind(this),{passive:!0}),this.fastForward.addEventListener((0,a.getClickEvent)(),this.handleFastForward.bind(this),{passive:!0}),this.rewind.addEventListener((0,a.getClickEvent)(),this.handleRewind.bind(this),{passive:!0}),this.mobileForward.addEventListener((0,a.getClickEvent)(),this.handleForward.bind(this),{passive:!0}),this.mobileRewind.addEventListener((0,a.getClickEvent)(),this.handleRewind.bind(this),{passive:!0}),this.handleAdsEvent(a.INTERNAL_EVENTS.PLAYPAUSE,(e=>{this.setPlaying(Boolean(e.detail.isPlaying))})),this.handlePlayerEvent(a.INTERNAL_EVENTS.PLAYPAUSE,(e=>{this.setPlaying(Boolean(e.detail.isPlaying))})),e.addEventListener((0,a.getClickEvent)(),this.handleMuteUnmute.bind(this),{passive:!0}),t.addEventListener("click",(e=>{const i=10*Math.round(e.offsetX/t.clientWidth*10);this.onVolume(i)})),s.addEventListener((0,a.getClickEvent)(),(e=>{let t=null;if(void 0!==e.offsetX&&(t=e.offsetX),e.touches&&e.touches.length>0){const i=e.touches[0];i&&(t=i.clientX-s.getBoundingClientRect().left)}if(null!==t){const e=parseInt(s.getAttribute("max"))||100,i=Math.round(e*(t/s.clientWidth));this.dispatchEvent(a.INTERNAL_EVENTS.PROGRESS,{time:i})}}),{passive:!0});const v=i.querySelector(".progress-circle");if(this.handlePlayerEvent(a.INTERNAL_EVENTS.PROGRESS,(e=>{const{time:t,duration:s}=e.detail;p||(this.progress.value=t,isNaN(s)||isNaN(t)||(v&&this.handleProgressCircle(v,i,s,t),this.duration.innerHTML=`${this.formatTime(t)} / ${this.formatTime(s)}`))})),this.fullscreen&&o.addEventListener((0,a.getClickEvent)(),this.handleFullscreen.bind(this),{passive:!0}),u&&h&&(u.addEventListener((0,a.getClickEvent)(),this.handleShareTools.bind(this),{passive:!0}),h.addEventListener((0,a.getClickEvent)(),this.handleShareTools.bind(this),{passive:!0})),c){const e=c.querySelector(".js_video_share-via-link");e&&(e.onclick=r.onCopyUrlClick)}n&&l&&(n.addEventListener((0,a.getClickEvent)(),this.handleClosedCaptions.bind(this),{passive:!0}),l.addEventListener((0,a.getClickEvent)(),this.handleClosedCaptions.bind(this),{passive:!0}));for(let e=0;e<d.length;e++)d[e].addEventListener((0,a.getClickEvent)(),(e=>{const t=e.target.getAttribute("data-label")||"";for(let e=0;e<d.length;e++)d[e].classList.toggle("selected",d[e].getAttribute("data-label")===t);this.dispatchEvent(a.INTERNAL_EVENTS.TRACKCHANGE,{track:t})}),{passive:!0});const E=e=>{p=!0;const t="touchstart"===e.type,o=t?e.touches[0].clientX:e.clientX,n=s.getBoundingClientRect().width,r=s.value/s.max,d=t?"touchmove":"mousemove",l=t?"touchend":"mouseup",c=e=>{e.preventDefault();const a=(t?e.touches[0].clientX:e.clientX)-o,d=Math.max(0,Math.min(1,r+a/n)),l=Math.round(d*s.max);s.value=l,v&&this.handleProgressCircle(v,i,s.max,l)},u=()=>{p=!1,this.dispatchEvent(a.INTERNAL_EVENTS.PROGRESS,{time:s.value}),document.removeEventListener(d,c),document.removeEventListener(l,u)};document.addEventListener(d,c),document.addEventListener(l,u)};v&&s&&(v.addEventListener("mousedown",E.bind(this),{passive:!0}),v.addEventListener("touchstart",E.bind(this),{passive:!0}))}handlePlayPause(){const e=this.playPause.classList.contains("playing");this.dispatchEvent(a.INTERNAL_EVENTS.PLAYPAUSE,{isPlaying:!e})}handleFastForward(){const e=this.progress.getAttribute("max");isNaN(e)||this.dispatchEvent(a.INTERNAL_EVENTS.PROGRESS,{time:e})}handleRewind(){const e=this.progress.getAttribute("value");if(e&&!isNaN(e)){const t=Number(e)-10;this.dispatchEvent(a.INTERNAL_EVENTS.PROGRESS,{time:t>0?t:0})}}handleForward(){const e=this.progress.getAttribute("value"),t=this.progress.getAttribute("max");if(!isNaN(e)&&t&&!isNaN(t)){const i=Number(e)+10;this.dispatchEvent(a.INTERNAL_EVENTS.PROGRESS,{time:i>Number(t)?Number(t):i})}}handleMuteUnmute(){this.setMuted(!this.getMuted())}setPlaying(e){this.playPause.classList.toggle("playing",e)}getMuted(){return this.muteUnmute.classList.contains("muted")}setMuted(e){this.muteUnmute.classList.toggle("muted",e);const t=e&&0===this.getVolume();this.dispatchEvent(a.INTERNAL_EVENTS.MUTEUNMUTE,{isMuted:e,volume:t?this.DEFAULT_VOLUME:this.getVolume()}),t&&this.setVolume(this.DEFAULT_VOLUME)}getVolume(){return parseFloat(this.volume.value)}setVolume(e){this.volume.value=e,this.dispatchEvent(a.INTERNAL_EVENTS.VOLUMECHANGE,{volume:e/100})}onVolume(e){const t=this.getMuted();e>0===t&&this.setMuted(!t),this.setVolume(e)}handleFullscreen(){this.fullscreen.classList.toggle("on"),this.dispatchEvent(a.INTERNAL_EVENTS.FULLSCREEN,{fullscreen:this.fullscreen.classList.contains("on")})}handleShareTools(e){this.shareTools&&(e.stopPropagation(),this.shareTools.classList.contains("hide")?(document.addEventListener((0,a.getClickEvent)(),a.hideShareOverlaysAndRemoveEvents,{passive:!0}),document.removeEventListener((0,a.getClickEvent)(),a.hideCcOverlaysAndRemoveEvents,{passive:!0})):document.removeEventListener((0,a.getClickEvent)(),a.hideShareOverlaysAndRemoveEvents,{passive:!0}),this.shareTools.classList.toggle("hide"),this.closedCaptionsBox&&this.closedCaptionsBox.classList.add("hide"))}handleClosedCaptions(e){this.closedCaptionsBox&&(e.stopPropagation(),this.closedCaptionsBox.classList.contains("hide")?(document.addEventListener((0,a.getClickEvent)(),a.hideCcOverlaysAndRemoveEvents,{passive:!0}),document.removeEventListener((0,a.getClickEvent)(),a.hideShareOverlaysAndRemoveEvents,{passive:!0})):document.removeEventListener((0,a.getClickEvent)(),a.hideCcOverlaysAndRemoveEvents,{passive:!0}),this.closedCaptionsBox.classList.toggle("hide"),this.shareTools&&this.shareTools.classList.add("hide"))}handleProgressCircle(e,t,i,s){const o=s/i*t.offsetWidth-e.offsetWidth/2;e.style.transform=`translateX(${o}px)`}formatTime(e){const t=Math.round(e),i=t%60;return`${(t-i)/60}:${i<10?"0":""}${i}`}}t.default=l,e.exports=t.default},sgyI:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=(e,t)=>{const{pageType:i,post:s}=t.kinja.meta;let o="preroll_embed";switch(e){case"sidebar":o="preroll_native_player",s&&s.isSlideshow&&(o="preroll_slideshow");break;case"kinjavideo":o=s&&s.isFeatured?"preroll_video_featured":"preroll_article";break;case"featured":o="preroll_video_featured";break;case"curated":o="preroll_curated_homepage";break;case"secondscroll":o="preroll_article";break;case"feedstream":o="preroll_embed"}return{adUnitCode:o,playerSize:[640,480],prebidVastTagParams:{}}};t.default=s,e.exports=t.default},vTr3:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const{postId:i,blogName:o,channel:n,section:a,subsection:r,tags:d,utm_source:l,utm_medium:c,utm_campaign:u,referrer:h,pageType:p,pageDepth:v}=e,{forcedAdZone:E,pos:m,videoId:g}=t||{};return{postId:i,blogName:o,channel:n,section:a,subsection:r,tags:d||[],utm_source:l,utm_medium:c,utm_campaign:u,socialReferrer:s(h),page:[p],pd:[v.toString()],forcedAdZone:E,pos:m,video_id:g}};const s=e=>{let t=(e||"").match(/\b(?:facebook|instagram|pinterest|reddit|twitter|tumblr|t\.co)\b/i);return t?(t=t[0].toLowerCase(),"t.co"===t&&(t="twitter"),t):""};e.exports=t.default},xzxi:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getVastTagsWithBids=t.default=void 0;var s=i("XOHg"),o=i("koi8"),n=i("sXqx"),a=h(i("FFgU")),r=h(i("MGeG")),d=i("eo07"),l=h(i("m7XO")),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=u(t);if(i&&i.has(e))return i.get(e);var s={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var a=o?Object.getOwnPropertyDescriptor(e,n):null;a&&(a.get||a.set)?Object.defineProperty(s,n,a):s[n]=e[n]}s.default=e,i&&i.set(e,s);return s}(i("leRD"));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(u=function(e){return e?i:t})(e)}function h(e){return e&&e.__esModule?e:{default:e}}const p=({videoId:e,adUnitCode:t,isAutoplay:i,scope:n})=>{const{blogSales:a}=(n||window).kinja.meta,{adSiteName:u=""}=a||{},h=(0,l.default)(n,{forcedAdZone:r.default.forcedAdZone()||"",pos:t,videoId:e});return{cust_params:h,iu:(0,d.getAdUnitCode)(o.DFP_ID,u||"",h.page&&h.page[0]||""),vpa:i?"auto":"click",vid:e,impl:"s",url:document.URL||window.location.href,description_url:document.URL||window.location.href,referrer:document.referrer,pp:(0,s.isMobileDevice)()?c.PP_MOBILE:c.PP_DESKTOP}},v=async(e,t,i)=>{const{adUnitCode:o,playerSize:r,prebidVastTagParams:d,videoIds:l}=e,{adsEnabled:u=!0,isAutoplay:h,scope:v}=t,E=void 0!==window.pbjs&&void 0!==window.pbjs.que,m=window.apstag,g={},f=Object.keys(l).filter((e=>l[e]));if(!(u&&f.length>0))return void i(g);f.forEach((e=>{g[e]=(0,c.default)({...p({videoId:e,adUnitCode:o,isAutoplay:h,scope:v}),...d})}));const y={reqSent:!1,amazon:!1,prebid:!1};function b(){y.reqSent||(y.reqSent=!0,i(g))}function A(){const{reqSent:e,amazon:t,prebid:i}=y;e||!t&&!i||b()}const _=n.PREBID_VIDEO_TIMEOUT;if(m&&window.apstag.fetchBids({slots:[{slotID:o,slotName:"slotVideo",mediaType:"video",sizes:r}],timeout:_},(function(e){e.length>0&&(console.info("Bids are: ",e),f.forEach((t=>{g[t]=(0,c.default)({...p({videoId:t,adUnitCode:o,isAutoplay:h,scope:v}),...d});const i=g[t];g[t]=function({bids:e,vastRequestUrl:t,targetingParameter:i,separator:s="&",operator:o="="}){const n=new URL(t),a=new URLSearchParams(n.search),r=e.filter((e=>"video"===e.mediaType)).map((e=>Object.keys(e.targeting).reduce(((t,i)=>`${t}${s}${i}${o}${e.targeting[i]}`),""))).join(""),d=a.get(i)||"";return a.set(i,d+r),n.search=a.toString(),n.toString()}({bids:e,vastRequestUrl:i,targetingParameter:"cust_params"})})),y.amazon=!0,A()),console.info("COUNTER FOR FETCHING BIDS: ",1)})),E){const{blog:e}=(v||window).kinja.meta,t=e&&e.blogGroup,i={code:o,mediaTypes:{video:{api:[2],context:"instream",linearity:1,maxduration:120,minduration:6,mimes:["video/mp4","application/javascript"],playerSize:r,protocols:[2,3,5,6],skip:1,skipafter:5,playbackmethod:[1],placement:1}},bids:await(0,a.default)(o,t)};window.pbjs.que.push((function(){window.pbjs.addAdUnits(i),window.pbjs.setConfig({cache:{url:"https://prebid.adnxs.com/pbc/v1/cache"},mediaTypePriceGranularity:{video:{buckets:[{min:.05,max:5,increment:.05},{min:5.1,max:10,increment:.1},{min:10.5,max:20,increment:.5},{min:21,max:50,increment:1}]}},schain:{validation:"strict",config:{ver:"1.0",complete:1,nodes:[{asi:"g-omedia.com",sid:"0001",hp:1}]}}}),window.pbjs.requestBids({timeout:_,adUnitCodes:[o],bidsBackHandler(e,t){const n=window.pbjs.getHighestCpmBids(o).pop();n&&(f.forEach((e=>{const{cust_params:t,...a}=p({videoId:e,adUnitCode:o,isAutoplay:h,scope:v});g[e]=window.pbjs.adServers.dfp.buildVideoUrl({adUnit:i,bid:n,params:{...c.advertisingScheduleDefaults,...a,cust_params:{...t,tags:t.tags.join(","),page:t.page.join(","),pd:t.pd.join(",")},...d,pp:(0,s.isMobileDevice)()?"MobileBitRates":"DesktopBitRates"}})})),window.pbjs.setTargetingForGPTAsync(),y.prebid=!0,A())}})}))}window.setTimeout((function(){b()}),n.PREBID_VIDEO_TIMEOUT+500)};t.getVastTagsWithBids=v;var E=v;t.default=E},zPH0:function(e,t,i){"use strict";var s=a(i("b34w")),o=a(i("Pdww")),n=i("076a");function a(e){return e&&e.__esModule?e:{default:e}}let r=!1;window.videoHtml5Controllers=window.videoHtml5Controllers||{};const d=e=>{(0,n.getVideoHtml5Containers)(e).map((e=>{const{monetizable:t="true"}=e.dataset;window.videoHtml5Controllers[e.id]=new o.default(e,r&&"true"===t)}))};window.stopVideoHtml5=e=>{document.querySelectorAll(".video-html5").forEach((t=>{t.id!==e&&window.videoHtml5Controllers[t.id]&&window.videoHtml5Controllers[t.id].togglePlaying(!1)}))},window.deleteVideoHtml5Controller=e=>{window.videoHtml5Controllers[e]&&delete window.videoHtml5Controllers[e]},(async()=>{r=!location.pathname.startsWith("/preview/")&&await(0,s.default)("//imasdk.googleapis.com/js/sdkloader/ima3.js").then((()=>!0)).catch((()=>!1)),window.initVideoHtml5=d,d(document)})()}}]);