(self.webpackChunk=self.webpackChunk||[]).push([["ally-core.faqs.v1.build"],{"./ally-core/components/content/faqs/v1/faqs/clientlibs/src/index.js":(e,t,n)=>{"use strict";var a=n("./ally-core/clientlibs/utils/js/component/index.js");n("./ally-core/components/content/faqs/v1/faqs/clientlibs/src/scss/component.scss");const s="Content",i="Faqs",r="v1",c=`ALLYSF ${s}/${i}:`,o="-active",l="allysf-faqs-v1",d=`${l}-panel`,u=150,f=`${l}-panel-wrapper`,m=`${l}-content-wrapper`,p=`${l}-feedback`,b=`${l}-feedback-question`,h=`js-${l}-feedback-question`,A=`${l}-feedback-heading`,w=`${l}-feedback-list`,C=`${l}-feedback-list-item`,E=`${l}-feedback-btn`,v=`${l}-divider`,L=`${l}-feedback-form`,$=`${l}-feedback-textarea`,k=`${l}-feedback-submit-msg`,g=`${l}-trigger`,y=`${l}-feedback-submit-btn`,x="no element present",q={process:"ALLYSF",script:i,version:r};var F=n("../../../../../node_modules/@allysf/logger/dist/logger.build.js");const T={};function S(e){T[arguments.length>1&&void 0!==arguments[1]?arguments[1]:""]=e}function B(e){return T[e]}function M(){const e=document.createElement("span");e.classList.add(`${l}-feedback-char-counter`),e.setAttribute("aria-hidden","true");const t=function(){const e=document.createElement("span");return e.innerHTML="0",S(e,"charCountElem"),e}(),n=function(){const e=document.createElement("span");return e.style.paddingRight="5px",e.innerHTML=u,e}();return e.appendChild(t),e.appendChild(n),e.insertBefore(t,n),e.insertAdjacentHTML("beforeend"," characters"),t.insertAdjacentHTML("afterend","/"),S(e,"charCounterContainer"),e}function N(e){const t=document.createElement("fieldset"),n=function(e){const t=document.createElement("textarea");return t.classList.add(`${$}`),t.setAttribute("aria-describedby",`${e}-char-count-status`),t.setAttribute("maxlength",u),t.setAttribute("placeholder","Let us know how we can help you."),t.setAttribute("rows","5"),t.setAttribute("id",`${e}-faq-feedback`),t.setAttribute("allytm-private","true"),t.setAttribute("data-private","true"),t.setAttribute("data-track-form-redacted","true"),S(t,"feedbackTextArea"),t}(e);return t.classList.add(`${l}-feedback-fieldset`),t.appendChild(function(e){const t=document.createElement("label");return t.classList.add(`${l}-feedback-label`),t.innerHTML="How could we improve this answer?",t.setAttribute("for",`${e}-faq-feedback`),t}(e)),t.appendChild(n),t}function j(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=function(){const e=document.createElement("form");return e.classList.add(`${L}`),e}();return t.appendChild(N(e)),t.appendChild(function(){const e=document.createElement("span");return e.classList.add("-visuallyhidden"),e.setAttribute("aria-live","polite"),e.setAttribute("aria-atomic","true"),e.setAttribute("aria-label","Characters remaining"),e.setAttribute("role","region"),S(e,"charCountPoliteElem"),e}()),t.appendChild(function(){const e=document.createElement("span");return e.classList.add("-visuallyhidden"),e.setAttribute("aria-live","assertive"),e.setAttribute("aria-atomic","true"),e.setAttribute("aria-label","Characters remaining"),e.setAttribute("role","region"),S(e,"charCountAssertiveElem"),e}()),t.appendChild(function(e){const t=document.createElement("span");return t.classList.add("-visuallyhidden"),t.setAttribute("id",`${e}-char-count-status`),S(t,"charCountA11YStatusElem"),t}(e)),t.appendChild(M()),t.appendChild(function(){const e=document.createElement("button");return e.classList.add(`${y}`),e.setAttribute("type","submit"),e.innerHTML="Submit",e}()),t}function O(e){let{buttonValue:t,text:n,describedByID:a,includeSeperator:s=!1}=e;const i=t||"",r=document.createElement("li");r.className=C;const c=document.createElement("button");if(c.className=E,c.setAttribute("role","button"),c.setAttribute("value",i||""),c.setAttribute("aria-describedby",a?`allysf-faqs-v1-feedback-question-${a}`:""),c.dataset.answer=i,c.textContent=n,S(c,`feedbackBtn_${t}`),r.appendChild(c),s){const e=document.createElement("span");e.className=v,e.setAttribute("aria-hidden","true"),e.textContent="|",r.appendChild(e)}return r}let H,Y,I,R,D;function z(e){window.requestAnimationFrame((()=>{const t=function(){const e=document.createElement("p");return e.className=k,e.setAttribute("role","alert"),e.setAttribute("aria-hidden","false"),e.setAttribute("tabindex","-1"),e.textContent="Thank you for your feedback.",e}();B(`feedbackWrapper-${e}`).appendChild(t),window.dispatchEvent(new Event("resize")),t.focus()}))}function _(e){e.preventDefault();const t=B("feedbackTextArea"),n=void 0!==t?t.innerHTML:0,a=`/services/confirmit?FAQID=${H}&FAQComment=${encodeURIComponent(n)}&FAQContext=${encodeURIComponent(window.location.pathname)}&CIF=0&TLTSID=0&AutoProfile=0`;window.requestAnimationFrame((()=>{Y.setAttribute("aria-hidden",!0),this.classList.add("-hide")})),z(t.id.replace("-faq-feedback","")),fetch(a).then((()=>(window.ALLYSF("publish","faqs.feedback",{element:Y,faqID:H,feedbackComment:n}),null))).catch((e=>{throw(0,F.LOGROCKET)(e,q),new Error(e)}))}function G(){window.requestAnimationFrame((()=>{const e=B("charCountPoliteElem"),t=B("charCountAssertiveElem"),n=B("feedbackTextArea").value.length;B("charCountElem").innerText=n;const a=`${u-n} of out ${u} characters remaining`;n!==I&&n!==R||(e.textContent=a),n<I&&(e.textContent=""),n!==D&&n!==u||(e.textContent="",t.textContent=a),n<D&&(t.textContent=""),B("charCountA11YStatusElem").textContent=a,B("charCountElem").textContent=n}))}function Q(e){if("object"!=typeof e){const e=new Error(`${c} FAQs panelArray ${a.nM}`);throw(0,F.LOGROCKET)(e,q),e}const t=e.target,n=t.closest(`.${d}`);H=n.dataset.panelRef,window.requestAnimationFrame((()=>{const[e]=n.getElementsByClassName(b);e.classList.add("-hide")})),"no"===t.value?function(e){Y=j(H);const t=B("feedbackTextArea");t.addEventListener("input",G),Y.addEventListener("submit",_),I=Math.floor(.8*u),R=Math.floor(.9*u),D=Math.floor(.95*u),window.requestAnimationFrame((()=>{const[n]=e.getElementsByClassName(p);n.appendChild(Y),window.dispatchEvent(new Event("resize")),t.focus()}))}(n):z(H),window.ALLYSF("publish","faqs.feedback",{element:t,name:t.innerText,feedbackHelpful:t.value,faqID:H}),window.ALLYSF("publish","faqs.adjustSize",{panel:n})}var K=n("./ally-core/clientlibs/utils/js/a11y/getfocusable.js");function P(e){const t=[].slice.call(e),n=t.length;for(let e=0;e<n;e++){const n=t[e],a=(0,K.GO)(n),s=a.length;if(a.length)for(let e=0;e<s;e++)a[e].setAttribute("tabindex","-1")}}const W={};function V(e){let{panel:t}=e;if("object"!=typeof t){const e=new Error(`${c} FAQs trigger event ${a.nM}`);throw(0,F.LOGROCKET)(e,q),e}const n=t;window.requestAnimationFrame((()=>{const[e]=n.getElementsByClassName(`${l}-panel-wrapper`),t=e.offsetHeight;n.style.maxHeight=`${t}px`,n.scrollTop=0}))}function X(e,t){let n,a;const s=t;if(e.setAttribute("aria-expanded",!0),s.setAttribute("aria-hidden",!1),"false"===s.dataset.feedbackBuilt){const[e]=s.getElementsByClassName(f);e.appendChild(function(e){const t=e.dataset.panelRef,n=document.createElement("div");n.className=p;const a=document.createElement("div");a.classList.add(b,h);const s=document.createElement("h4");s.className=A,s.id=`allysf-faqs-v1-feedback-question-${t}`,s.textContent="Was this helpful?";const i=document.createElement("ul");i.className=w;const r=O({buttonValue:"yes",text:"Yes",describedByID:t,includeSeperator:!0}),c=O({buttonValue:"no",text:"No",describedByID:t});return i.appendChild(r),i.appendChild(c),a.appendChild(s),a.appendChild(i),n.appendChild(a),S(n,`feedbackWrapper-${t}`),n}(t)),n=B("feedbackBtn_yes"),a=B("feedbackBtn_no"),n.addEventListener("click",Q),a.addEventListener("click",Q),s.dataset.feedbackBuilt="true"}window.requestAnimationFrame((()=>{!function(e){const t=(0,K.GO)(e),n=t.length;if(n)for(let e=0;e<n;e++)t[e].setAttribute("tabindex","0")}(s),e.classList.add(o),s.classList.add(o)})),function(e){const t=`${e.id}-element`,n=B(t);if(n instanceof Element)return void requestAnimationFrame((()=>{n.focus()}));if(n===x)return;const a=e.querySelector("h2, h3, p, h4, h5, h6");a?(requestAnimationFrame((()=>{a.setAttribute("tabindex","-1"),a.focus()})),S(a,t)):S(x,t)}(s),V({panel:s}),W[s.id]=function(){V({panel:s})},window.addEventListener("resize",W[s.id]),window.ALLYSF("publish","faqs.opened",{element:e,id:e.getAttribute("id"),name:e.innerText})}function U(e){if("object"!=typeof e){const e=new Error(`${c} FAQs trigger event ${a.nM}`);throw(0,F.LOGROCKET)(e,q),e}const t=e.target,{panelRef:n}=t.dataset;this.cache[n]||(this.cache[n]=document.getElementById(`faq-answer-${n}`));const s=this.cache[n];!function(e){return e.classList.contains(o)}(s)?X(t,s):function(e,t){const n=t;window.requestAnimationFrame((()=>{e.setAttribute("aria-expanded",!1),n.setAttribute("aria-hidden",!0),e.classList.remove(o),n.classList.remove(o),n.style.maxHeight=0,P([n])})),window.removeEventListener("resize",W[n.id]),W[n.id]=null,window.ALLYSF("publish","faqs.closed",{element:e,id:e.getAttribute("id"),name:e.innerText})}(t,s)}class J extends a.wA{constructor(e){super(e,i,r),this.cache={},this.panelsArray=this.el.getElementsByClassName(d),this.contentWrappers=this.el.getElementsByClassName(m),this.init()}setupEvents(){const e=this.el.getElementsByClassName(g),t=e.length;let n=0;for(;n<t;n++)e[n].addEventListener("click",U.bind(this));return window.ALLYSF("subscribe","faqs.adjustSize",{callback:V}),!0}init(){this.setupEvents(),P(this.contentWrappers),window.ALLYSF("publish","faqs.initialized",{element:this.el,id:this.id})}}(0,a.xp)({group:s,name:i,version:r,class:J})},"./ally-core/components/content/faqs/v1/faqs/clientlibs/src/scss/component.scss":e=>{e.exports={PHONE_MAX:"640",TABLET_MAX:"1024",DESKTOP_MAX:"1172"}}},e=>{e.O(0,["allysf.build"],(()=>{return t="./ally-core/components/content/faqs/v1/faqs/clientlibs/src/index.js",e(e.s=t);var t}));e.O()}]);