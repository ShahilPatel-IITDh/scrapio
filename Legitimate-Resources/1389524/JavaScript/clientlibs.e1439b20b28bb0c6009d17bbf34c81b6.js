(self.webpackChunk=self.webpackChunk||[]).push([["storefront.header.v1.build"],{"./storefront/components/navigation/header/v1/header/clientlibs/src/index.js":(e,t,n)=>{"use strict";var s=n("./ally-core/clientlibs/utils/js/component/index.js"),i=(n("./storefront/components/navigation/header/v1/header/clientlibs/src/scss/component.scss"),n("./storefront/components/navigation/header/v1/header/clientlibs/src/js/utils/constants.js")),o=n("../../../../../node_modules/@allysf/logger/dist/logger.build.js"),a=n("./ally-core/clientlibs/utils/js/boolean/parse.js"),r=n("./ally-core/clientlibs/utils/js/a11y/getfocusable.js"),l=(n("../../../../../node_modules/core-js/modules/es.array.includes.js"),n("./ally-core/clientlibs/ui/js/window/toggle-scroll-lock.js")),d=n("./ally-core/clientlibs/ui/js/window/aria-hidden.js"),c=n("./ally-core/clientlibs/utils/js/component/base.js");function u(e){if(!e||"object"!=typeof e){const e=new Error(`${i.g0} mobile trigger ${c.nM}`);throw(0,o.LOGROCKET)(e,i.YI),e}e.classList.toggle(i.GR)}const m="allysf-header-v1",h=`${m}-${i.yZ}`,p=`${m}-${i._y}`,b=`${m}-${i.Jq}`,g=`-${i.mQ.IN}`,y=`-${i.mQ.OUT}`,f=`-${i.mQ.SHOW}`,L=`-${i.mQ.HIDE}`,T="-back",v="-sub",E={openType:null,[i.yZ]:{openElem:null,button:null},[i._y]:{openElem:null,button:null},[i.Jq]:{navPath:[],openElem:null,button:null,root:null,rootTrigger:null}};let w,A=null,q="",I=null;function $(){const e=window.innerWidth;if(A||(A=document.createElement("style"),A.id="drawerAniRecalcs",document.body.appendChild(A)),e>1172){const t=440+(e-1172)/2;q=`.allysf-header-v1-vertical{width: ${t}px; right:-${t}px;}\n        .allysf-header-v1-vertical.-out{right: -${t}px;}\n        .allysf-header-v1-vertical.-hide{right: -${t}px;}\n        `}else q=e<440?`.allysf-header-v1-vertical{width: ${e}px; right:-${e}px;}\n        .allysf-header-v1-vertical.-out{right: -${e}px;}\n        .allysf-header-v1-vertical.-hide{right: -${e}px;}\n        `:" ";q.length&&requestAnimationFrame((()=>{A.innerHTML=q}))}function O(){const e=E[i.yZ].openElem||E[i._y].openElem||E[i.Jq].openElem;if(!e)return;let t;if(t=E[i.yZ].openElem?i.yZ:E[i._y].openElem?i._y:i.Jq,t===i.Jq){F(E[i.Jq].button),E.mobile[e].element.setAttribute("aria-hidden",!0);const t=E.mobile[e].button;t.setAttribute("aria-label","Open Mobile Menu"),t.setAttribute("aria-expanded",!1)}else{const n=E[E.openType][Z(E.openType)];x(e,t,i.mQ.OUT);const s=`Open ${n.button.textContent.trim()} menu`;n.button.setAttribute("aria-label",s),n.button.setAttribute("aria-expanded",!1),n.element.setAttribute("aria-hidden",!0),n.button.focus()}E[t].openElem=""}function _(e){const t=E[i.yZ].openElem||E[i._y].openElem||E[i.Jq].openElem;t&&e!==t&&!e.includes(E.openType)&&O()}function k(e){I.classList.remove(e===i.yZ?`${g}-${i._y}`:`${g}-${i.yZ}`),I.classList.add(e===i.yZ?`${g}-${i.yZ}`:`${g}-${i._y}`),(0,d.Qm)(e===i._y?d.zU.MAIN:d.zU.TOP)}function M(e){I||(I=document.createElement("div"),I.id="drawerLayer",I.addEventListener("click",O),document.body.appendChild(I)),requestAnimationFrame((()=>{k(e),document.body.classList.contains(l.zA)||e===i._y||(0,l.Cy)(),requestAnimationFrame((()=>{I.classList.add(g)}))}))}function J(e){E[i.yZ].openElem||E[i._y].openElem?requestAnimationFrame((()=>{k(e)})):I&&requestAnimationFrame((()=>{document.body.classList.contains(l.zA)&&(0,l.Cy)(),I.classList.remove(g),I.classList.remove(`${g}-${i._y}`),I.classList.remove(`${g}-${i.yZ}`),(0,d.qn)()}))}function H(e,t){t===i.yZ&&E.openType===i._y?G(E[i._y].openElem,i._y):t===i._y&&E.openType===i.yZ&&G(E[i.yZ].openElem,i.yZ)}function G(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];E[t].openElem=null,n||J(t),E.openType=null,t===i.Jq&&(E.openType=i.Jq),E[t][e]&&requestAnimationFrame((()=>{E[t][e].element.classList.remove(g,f,L),E[t][e].element.classList.add(y),E[t][e].button&&E[t][e].button.classList.remove(g),i.Z2.ITEM_TO_HIGHLIGHT&&t===i._y&&i.Z2.ITEM_TO_HIGHLIGHT.classList.add(i.EL),setTimeout((()=>{E[t][e].element.classList.remove(y,T);(0,a.g)(E[t][e].element.dataset.isMobileRoot)||E[t][e].element.classList.add(v)}),1e3)}))}function j(e,t){E[t].openElem=e,M(t),H(0,t),E.openType=t,requestAnimationFrame((()=>{E[t][e].element.classList.remove(g,y,L),E[t][e].element.classList.add(f),E[t][e].button&&E[t][e].button.classList.add(g)}))}function C(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];E[t].openElem=null,n||J(t),E.openType=null,t===i.Jq&&(E.openType=i.Jq),requestAnimationFrame((()=>{E[t][e].element.classList.remove(g,y,f,T),E[t][e].element.classList.add(L);(0,a.g)(E[t][e].element.dataset.isMobileRoot)||E[t][e].element.classList.add(v),E[t][e].button&&E[t][e].button.classList.remove(g)}))}function F(e){if(!e){const e=new Error(`${i.g0} mobileMenuTrigger argument not passed`);throw(0,o.LOGROCKET)(e,i.YI),e}requestAnimationFrame((()=>{E[i.Jq].root.classList.add(y)})),setTimeout((()=>{E[i.Jq].navPath.forEach((e=>{const t=E[i.Jq][e];requestAnimationFrame((()=>{t.element.classList.remove(g,y,f,L,T)}))})),requestAnimationFrame((()=>{E[i.Jq].root.classList.remove(g,y)})),E[i.Jq].navPath=[]}),600),setTimeout((()=>{J(i.Jq)}),300),u(e),e.focus()}function Z(e){if(!e||"string"!=typeof e){const e=new Error(`${i.g0} type ${c.el}`);throw(0,o.LOGROCKET)(e,i.YI),e}return E[e].openElem}function x(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.mQ.IN;if(!e||!t){const e=new Error(`${i.g0} One or more arguments not passed`);throw(0,o.LOGROCKET)(e,i.YI),e}switch(n){case i.mQ.IN:E[t].openElem&&t!==i.Jq?(C(E[t].openElem,t,!0),j(e,t)):(!function(e,t){E[t].openElem=e,M(t),H(0,t),E.openType=t,requestAnimationFrame((()=>{E[t][e].element.classList.remove(y,f,L),E[t][e].element.classList.add(g),i.Z2.ITEM_TO_HIGHLIGHT&&t===i._y&&i.Z2.ITEM_TO_HIGHLIGHT.classList.remove(i.EL),E[t][e].button&&E[t][e].button.classList.add(g)}))}(e,t),t===i.Jq&&E[t].navPath.push(e));break;case i.mQ.OUT:G(e,t,E[t].openElem===e&&t===i.Jq);break;case i.mQ.SHOW:E[t].openElem&&t!==i.Jq&&C(E[t].openElem,t,!0),j(e,t);break;case i.mQ.HIDE:default:C(e,t,E[t].openElem===e&&t!==i.Jq)}}function R(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"!=typeof e){const e=new Error(`${i.g0} drawer type ${c.el}`);throw(0,o.LOGROCKET)(e,i.YI),e}return t?E[e][t]:E[e]}window.addEventListener("resize",$),document.addEventListener("keyup",(e=>{window.clearTimeout(w),w=window.setTimeout((()=>{"Escape"===e.key&&O()}),500)})),window.addEventListener("scroll",(()=>{window.clearTimeout(w),w=window.setTimeout((()=>{E.openType===i._y&&O()}),250)})),$();const B="-back";let K=!1,Q=null;function Y(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;9!==(e.keyCode||e.which)||n&&!Z(n)||(e.preventDefault(),t.focus())}function N(e){let{element:t,id:n}=e;if(!t||!n)return(0,o.WARN)(`${i.g0} initDrawerFocus has no element or id set to focus`),!1;const s=t.parentElement.closest("[data-sf-component-name]");if(!s||Object.keys(s.dataset).length<1)return(0,o.WARN)(`${i.g0} drawerElement does not exist`),!1;const a=s.dataset.sfMenuType,l=R(a,s.id),[d]=(0,r.GO)(l.element,!0),c=(0,r.GO)(l.element),u=c[c.length-1];let m=null;return a===i._y?(m=l.button,l.button.addEventListener("keydown",(e=>{e.shiftKey?Y(e,u,a):Y(e,c[0],a)})),d.addEventListener("keydown",(e=>{e.shiftKey&&Y(e,m,a)})),c[0].addEventListener("keydown",(e=>{e.shiftKey&&Y(e,m,a)}))):a===i.yZ?(m=d,d.addEventListener("keydown",(e=>{e.shiftKey&&Y(e,u,a)})),c[0].addEventListener("keydown",(e=>{e.shiftKey&&Y(e,u,a)}))):a===i.Jq&&(m=R(a).rootTrigger),u&&u.addEventListener("keydown",(e=>{e.shiftKey||Y(e,m)})),!0}function S(e,t){let n=i.mQ.IN;if(t===i.Jq){const n=document.getElementById(Z(t));e.classList.contains(B)&&n.classList.add(B),window.ALLYSF("publish","header.drawer",{id:n.id,menuType:t,dir:i.mQ.OUT,trigger:e})}Z(t)===e.dataset.navRef&&(n=i.mQ.OUT),window.ALLYSF("publish","header.drawer",{id:e.dataset.navRef,menuType:t,dir:n,trigger:e}),K=!1}function z(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=document.body;const l=function(e,t,n){const s=`${e.dataset.navRef}`;if(R(t,s))return!1;const{search:o}=window.location,a=document.createElement("div");return a.setAttribute("data-sf-component-name",`${e.textContent.replace(/\s/g,"")}Menu`),a.setAttribute("data-sf-component-src",`${e.dataset.fragmentUrl}.content.html${o.indexOf("wcmmode=disabled")>-1?"?wcmmode=disabled":""}`),a.setAttribute("data-sf-menu-type",t),a.setAttribute("aria-hidden",!0),a.setAttribute("id",s),t===i.Jq&&(n?a.setAttribute("data-is-mobile-root",!0):a.classList.add("-sub")),a}(e,t,s);return t===i.Jq&&(r=i.Ts),l&&(!function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e||!t){const e=new Error(`${i.g0} menu or menu list not provided`);throw(0,o.LOGROCKET)(e,i.YI),e}switch(E[t][e.id]={element:e,button:n},t){case i.yZ:e.classList.add(h);break;case i._y:e.classList.add(p);break;case i.Jq:e.classList.add(b),E[i.Jq].root||(E[i.Jq].root=i.Ts),E[i.Jq].rootTrigger||(E[i.Jq].rootTrigger=i.Tn),E[i.Jq].button||(E[i.Jq].button=n)}}(l,t,e,s),requestAnimationFrame((()=>{r.appendChild(l),(0,a.g)(e.dataset.lazyLoad)&&!(0,a.g)(e.dataset.hasLoaded)&&n&&requestAnimationFrame((()=>{S(e,t)})),e.setAttribute("data-has-loaded",!0)}))),l}function U(e,t){if(!e||!t){const e=new Error(`${i.g0} One or more arguments not passed`);throw(0,o.LOGROCKET)(e,i.YI),e}const n=e.length;function s(e,n){e.addEventListener("click",(e=>{const{currentTarget:s}=e;_(s.dataset.navRef),n&&!(0,a.g)(s.dataset.hasLoaded)?z(s,t,!0):S(s,t)}))}for(let i=0;i<n;i++){const n=e[i];if(n.dataset.fragmentUrl&&void 0===n.dataset.editMode){const e=(0,a.g)(n.dataset.lazyLoad);e||z(n,t),s(n,e)}}}function P(e){const{id:t,menuType:n,dir:s,trigger:l}=e;return t&&n&&s?(requestAnimationFrame((()=>{n===i.Jq&&s===i.mQ.IN&&i.Ts.classList.add("-in"),requestAnimationFrame((()=>{x(t,n,s),setTimeout((()=>{!function(e,t,n,s){const o=R(t,e);if(o){const e=(0,r.GO)(o.element,!0);let t;n===i.mQ.IN&&([t]=e,s&&s.classList&&s.classList.contains(B)&&(t=Q)),n===i.mQ.OUT&&(s&&s.classList&&s.classList.contains(B)&&(Q=o.button),t=o.button),t&&t.focus()}}(t,n,s,l),function(e,t){const n=R(t,e);if(n){const e=`Open ${n.button.textContent.trim()} menu`,t=`Close ${n.button.textContent.trim()} menu`;(0,a.g)(n.button.getAttribute("aria-expanded"))?(n.button.setAttribute("aria-label",e),n.button.setAttribute("aria-expanded",!1),n.element.setAttribute("aria-hidden",!0)):(n.button.setAttribute("aria-label",t),n.button.setAttribute("aria-expanded",!0),n.element.setAttribute("aria-hidden",!1))}}(t,n)}),750)}))})),!0):((0,o.WARN)(`${i.g0} id, menuType, or dir are not pass with published event header.drawer`),!1)}var D=n("./ally-core/clientlibs/utils/js/component/get-ref.js");function W(e){let{mobileMenuButton:t,lrTags:n}=e;if(!t||"object"!=typeof t){const e=new Error(`${i.g0} mobile mobileMenuButton ${c.nM}`);throw(0,o.LOGROCKET)(e,n),e}const s=(0,a.g)(t.dataset.lazyLoad);let r;const d=function(e){const t=document.getElementsByTagName("meta");for(let n=0;n<t.length;n++)if(t[n].getAttribute("name")===e)return t[n].getAttribute("content");return""}("mobileRootOverride"),m=d.trim();if(m){z(t,i.Jq,!1,!0);const e=(h=d,`${(0,D.l)(h)}-mobile-nav`);t.setAttribute("data-fragment-url",d),t.setAttribute("data-nav-ref",e),t.setAttribute("aria-controls",e)}var h;s||(r=z(t,i.Jq,!1,!m)),t.addEventListener("click",(()=>{const e=i.Jq;let n="in";(0,l.Cy)(),t.classList.contains(i.GR)?(n="out",F(t)):(!s||(0,a.g)(t.dataset.hasLoaded)&&R(i.Jq,t.dataset.navRef)||(r=z(t,e,!1,!m)),_(t.dataset.navRef),u(t)),window.ALLYSF("publish","header.drawer",{id:r.id,menuType:e,dir:n,mobileMenuButton:t})}))}class X extends s.wA{constructor(e){if(super(e,i.lP,i.Ke),[this.loginButton]=e.getElementsByClassName("js-login-btn"),this.topMenuItems=e.getElementsByClassName("js-top-nav-item"),this.mainMenuItems=e.getElementsByClassName("js-main-nav-item"),this.mobileMenuButton=document.getElementById("mobile-hamburger"),this.skipToMain=document.getElementById(i.Ls),!this.skipToMain){const e=new Error(`${i.g0} skipToMain element not found`);throw(0,o.LOGROCKET)(e,this.lrTags),e}this.skipToLogin=document.getElementById(i.yT),this.buttonTimeout=null,this.init()}async initializeMenus(){this.loginButton&&await U([this.loginButton],i.yZ),await U(this.topMenuItems,i.yZ),await U(this.mainMenuItems,i._y),window.ALLYSF("parseFragments")}async initMenuButton(e){clearTimeout(this.buttonTimeout),await function(e){let{element:t}=e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.Jq;if(!t){const e=new Error(`${i.g0} element property not found on argument`);throw(0,o.LOGROCKET)(e,i.YI),e}const s=(0,a.g)(t.dataset.lazyLoad);t.classList.contains("-js-mobile-nav")&&(t.classList.contains(B)||s||z(t,n),t.addEventListener("click",(e=>{if(!K){K=!0;const{currentTarget:t}=e,i=(0,a.g)(t.dataset.hasLoaded),o=document.getElementById(t.dataset.navRef);!s||i||o?S(t,n):z(t,n,!0)}})))}(e),this.buttonTimeout=setTimeout((()=>{window.ALLYSF("parseFragments")}),1e3)}skipMain(e){if(this.main=document.getElementById(i.c_),!this.main){const e=new Error(`${i.g0} main element not found in document`);throw(0,o.LOGROCKET)(e,this.lrTags),e}const t=this.main.querySelector("h1[tabindex='-1']");t&&(e.preventDefault(),t.focus())}skipLogin(e){this.loginButton&&(e.preventDefault(),this.loginButton.focus())}getItemToHighlight(){let e;const t=document.querySelector('meta[name="megaMenuContext"]');if(t){const n=t.content;this.mainMenuItems&&n&&(e=Array.from(this.mainMenuItems).find((e=>e.dataset.highlightContext===n)))}return e}init(){i.Z2.ITEM_TO_HIGHLIGHT=this.getItemToHighlight(),i.Z2.ITEM_TO_HIGHLIGHT&&window.requestAnimationFrame((()=>{i.Z2.ITEM_TO_HIGHLIGHT.classList.add(i.EL)})),this.skipToMain.addEventListener("click",this.skipMain.bind(this)),this.skipToLogin&&this.skipToLogin.addEventListener("click",this.skipLogin.bind(this)),window.ALLYSF("subscribe","header.drawer",{callback:P}),window.ALLYSF("subscribe","navButton.initialized",{callback:this.initMenuButton}),window.ALLYSF("subscribe","drawer.initialized",{callback:N}),W(this),this.initializeMenus()}}(0,s.xp)({group:i.J9,name:i.lP,version:i.Ke,class:X})},"./storefront/components/navigation/header/v1/header/clientlibs/src/js/utils/constants.js":(e,t,n)=>{"use strict";n.d(t,{EL:()=>l,GR:()=>r,J9:()=>s,Jq:()=>d,Ke:()=>o,Ls:()=>p,Tn:()=>f,Ts:()=>y,YI:()=>L,Z2:()=>h,_y:()=>u,c_:()=>g,g0:()=>a,lP:()=>i,mQ:()=>m,yT:()=>b,yZ:()=>c});const s="Navigation",i="Header",o="v1",a=`ALLYSF ${s}/${i}:`,r="-is-active",l="-highlight",d="mobile",c="vertical",u="horizontal",m={IN:"in",OUT:"out",SHOW:"show",HIDE:"hide"},h={ITEM_TO_HIGHLIGHT:void 0},p="skip-to-main-content",b="skip-to-login",g="main",y=document.getElementById("mobile-menu-dump"),f=document.getElementById("mobile-hamburger"),L={script:i,version:o}},"./storefront/components/navigation/header/v1/header/clientlibs/src/scss/component.scss":e=>{e.exports={PHONE_MAX:"640",TABLET_MAX:"1024",DESKTOP_MAX:"1172"}}},e=>{e.O(0,["allysf.build","vendor.build"],(()=>{return t="./storefront/components/navigation/header/v1/header/clientlibs/src/index.js",e(e.s=t);var t}));e.O()}]);