"function"!=typeof String.prototype.replaceSpecialChars&&(String.prototype.replaceSpecialChars=function(){var a={"Ã§":"c","Ã¦":"ae","Å":"oe","Ã¡":"a","Ã©":"e","Ã­":"i","Ã³":"o","Ãº":"u","Ã ":"a","Ã¨":"e","Ã¬":"i","Ã²":"o","Ã¹":"u","Ã¤":"a","Ã«":"e","Ã¯":"i","Ã¶":"o","Ã¼":"u","Ã¿":"y","Ã¢":"a","Ãª":"e","Ã®":"i","Ã´":"o","Ã»":"u","Ã¥":"a","Ã£":"a","Ã¸":"o","Ãµ":"o",u:"u","Ã":"A","Ã":"E","Ã":"I","Ã":"O","Ã":"U","Ã":"E","Ã":"O","Ã":"U","Ã":"A","Ã":"O","Ã":"A","Ã":"C"};return this.replace(/[\u00e0-\u00fa]/g,function(b){return"undefined"!=typeof a[b]?a[b]:b})}),"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),jQuery.fn.vtexSmartResearch=function(a){$this=jQuery(this);var b=function(a,b){"object"==typeof console&&console.log("[Smart Research - "+(b||"Erro")+"] "+a)},c={pageLimit:null,loadContent:".prateleira[id^=ResultItems]",shelfClass:".prateleira",filtersMenu:".search-multiple-navigator",linksMenu:".search-single-navigator",menuDepartament:".navigation .menu-departamento",mergeMenu:!0,insertMenuAfter:".search-multiple-navigator h3:first",emptySearchElem:jQuery('<div class="vtexsr-emptySearch"></div>'),elemLoading:"",returnTopText:'<span class="text">voltar ao</span><span class="text2">TOPO</span>',emptySearchMsg:"<h3>Esta combinaÃ§Ã£o de filtros nÃ£o retornou nenhum resultado!</h3>",filterErrorMsg:"Houve um erro ao tentar filtrar a pÃ¡gina!",searchUrl:null,usePopup:!1,showLinks:!0,popupAutoCloseSeconds:3,filterScrollTop:function(a){return a.top-20},callback:function(){},getShelfHeight:function(a){return a.scrollTop()+a.height()},shelfCallback:function(){},ajaxCallback:function(){console.log("ajaxCallback")},emptySearchCallback:function(){console.log("emptySearchCallback")},authorizeScroll:function(){return console.log("authorizeScroll"),!0},authorizeUpdate:function(){return console.log("authorizeUpdate"),!0},labelCallback:function(a){console.log("labelCallback")}},d=jQuery.extend(c,a),e=("object"==typeof console,jQuery("")),f=jQuery(d.elemLoading),g=2,h=!0,i=jQuery(window),j=(jQuery(document),jQuery("html,body")),k=jQuery("body"),l="",m="",n="",o=!1,p=jQuery(d.loadContent),q=jQuery(d.filtersMenu),r={requests:0,filters:0,isEmpty:!1},s={},t={getUrl:function(a){var b=a||!1;return b?l.replace(/PageNumber=[0-9]*/,"PageNumber="+g):(n+m).replace(/PageNumber=[0-9]*/,"PageNumber="+y)},getSearchUrl:function(){var a,c,d;return jQuery("script:not([src])").each(function(){if(c=jQuery(this)[0].innerHTML,d=/\/buscapagina\?.+&PageNumber=/i,c.search(/\/buscapagina\?/i)>-1)return a=d.exec(c),!1}),"undefined"!=typeof a&&"undefined"!=typeof a[0]?a[0]:(b("NÃ£o foi possÃ­vel localizar a url de busca da pÃ¡gina.\n Tente adicionar o .js ao final da pÃ¡gina. \n[MÃ©todo: getSearchUrl]"),"")},scrollToTop:function(){var a=k.find("#returnToTop");a.length<1&&(a=jQuery('<div id="returnToTop"><a href="#">'+d.returnTopText+'<span class="arrowToTop"></span></a></div>'),k.append(a));var b=i.height();i.bind("resize",function(){b=i.height()}),i.bind("scroll",function(){i.scrollTop()>b?a.stop(!0).fadeTo(300,1,function(){a.show()}):a.stop(!0).fadeTo(300,0,function(){a.hide()})}),a.bind("click",function(){return j.animate({scrollTop:0},"slow"),!1})},infinitScroll:function(){var a,b,c,e;a=k.find(".pager:first").attr("id"),e=(a||"").split("_").pop(),b=null!==d.pageLimit?d.pageLimit:window["pagecount_"+e],c=!0,"undefined"==typeof b&&(b=99999999),b>1&&!$(".confira-todos-produtos").length&&p.append("<div class='btn-load-more confira-todos-produtos'><span>Mais produtos</span></div>"),p.live("click",".btn-load-more",function(){var a=jQuery(this);if(!o&&g<=b&&h&&d.authorizeScroll(r)){if(a.scrollTop()+a.height()>=d.getShelfHeight(p)&&c){var e=p.find(d.shelfClass).filter(":last");e.after(f),c=!1,A=jQuery.ajax({url:t.getUrl(!0),success:function(a){console.info("data",a),a.trim().length<1?(h=!1,console.log("NÃ£o existem mais resultados a partir da pÃ¡gina: "+(g-1),"Aviso"),p.find(".btn-load-more").fadeOut("fast")):($(".btn-load-more").length>0?(console.log("maior que 0"),g>b&&p.find(".btn-load-more").fadeOut("fast")):console.log("menor que 0"),console.info("currentItems",e),e.after(a)),$(".helperComplement").remove(),c=!0,f.remove(),r.requests++,d.ajaxCallback(r)}}),g++}}else p.find(".btn-load-more").fadeOut("fast")})}};if(l=n=null!==d.searchUrl?d.searchUrl:t.getSearchUrl(),$this.length<1)return b("Nenhuma opÃ§Ã£o de filtro encontrada","Aviso"),d.showLinks&&jQuery(d.linksMenu).css("visibility","visible").show(),t.infinitScroll(),t.scrollToTop(),$this;if(p.length<1)return b("Elemento para destino da requisiÃ§Ã£o nÃ£o foi encontrado \n ("+p.selector+")"),!1;q.length<1&&b("O menu de filtros nÃ£o foi encontrado \n ("+q.selector+")");var u=(document.location.href,jQuery(d.linksMenu)),v=jQuery('<div class="vtexSr-overlay"></div>'),w=jQuery(d.menuDepartament),x=p.offset(),y=1,z=null,A=null;d.emptySearchElem.append(d.emptySearchMsg),p.before(v);var B={exec:function(){B.setFilterMenu(),B.fieldsetFormat(),$this.each(function(){var a=jQuery(this),b=a.parent();a.is(":checked")&&(m+="&"+(a.attr("rel")||""),b.addClass("sr_selected")),B.adjustText(a),b.append('<span class="sr_box"></span><span class="sr_box2"></span>'),a.bind("change",function(){B.inputAction(),a.is(":checked")?B.addFilter(a):B.removeFilter(a),r.filters=$this.filter(":checked").length})}),""!==m&&B.addFilter(e)},mergeMenu:function(){if(!d.mergeMenu)return!1;var a=w;a.insertAfter(d.insertMenuAfter),B.departamentMenuFormat(a)},mergeMenuList:function(){var a=0;q.find("h3,h4").each(function(){var b=u.find("h3,h4").eq(a).next("ul");b.insertAfter(jQuery(this)),B.departamentMenuFormat(b),a++})},departamentMenuFormat:function(a){a.find("a").each(function(){var a=jQuery(this);a.text(B.removeCounter(a.text()))})},fieldsetFormat:function(){s.fieldsetCount=0,s.tmpCurrentLabel={},q.find("fieldset").each(function(){var a=jQuery(this),b=a.find("label"),c="filtro_"+(a.find("h5:first").text()||"").toLowerCase().replaceSpecialChars().replace(/\s/g,"-");return s[c]={},b.length<1?void a.hide():(a.addClass(c),b.each(function(b){var e=jQuery(this),f=e.find("input").val()||"",g="skuespec_"+f.charAt(0).toUpperCase()+f.slice(1).toLowerCase().replaceSpecialChars().replace(" ","");s.tmpCurrentLabel={fieldsetParent:[a,c],elem:e},s[c][b.toString()]={className:g,title:f},e.addClass(g).attr({title:f,index:b}),d.labelCallback(s)}),void s.fieldsetCount++)})},inputAction:function(){null!==A&&A.abort(),null!==z&&z.abort(),g=2,h=!0},addFilter:function(a){m+="&"+(a.attr("rel")||""),v.fadeTo(300,.6),l=t.getUrl(),z=jQuery.ajax({url:l,success:B.filterAjaxSuccess,error:B.filterAjaxError}),a.parent().addClass("sr_selected")},removeFilter:function(a){var b=a.attr("rel")||"";v.fadeTo(300,.6),""!==b&&(m=m.replace("&"+b,"")),l=t.getUrl(),z=jQuery.ajax({url:l,success:B.filterAjaxSuccess,error:B.filterAjaxError}),a.parent().removeClass("sr_selected")},filterAjaxSuccess:function(a){var b=jQuery(a);v.fadeTo(300,0,function(){jQuery(this).hide()}),B.updateContent(b),r.requests++,d.ajaxCallback(r),j.animate({scrollTop:d.filterScrollTop(x||{top:0,left:0})},600)},filterAjaxError:function(){v.fadeTo(300,0,function(){jQuery(this).hide()}),console.log(d.filterErrorMsg),b("Houve um erro ao tentar fazer a requisiÃ§Ã£o da pÃ¡gina com filtros.")},updateContent:function(a){if(o=!0,!d.authorizeUpdate(r))return!1;var b=a.filter(d.shelfClass),c=p.find(d.shelfClass);(c.length>0?c:d.emptySearchElem).slideUp(600,function(){jQuery(this).remove(),d.usePopup?k.find(".boxPopUp2").vtexPopUp2():d.emptySearchElem.remove(),b.length>0?(b.hide(),$(".btn-load-more").length>0?p.find(".btn-load-more").fadeIn("fast").before(b):(console.info("entra aqui",p),p.append(b)),d.shelfCallback(),b.slideDown(600,function(){o=!1}),r.isEmpty=!1):(r.isEmpty=!0,d.usePopup?d.emptySearchElem.addClass("freeContent autoClose ac_"+d.popupAutoCloseSeconds).vtexPopUp2().stop(!0).show():(p.append(d.emptySearchElem),console.log("mlezao - 492"),d.emptySearchElem.show().css("height","auto").fadeTo(300,.2,function(){d.emptySearchElem.fadeTo(300,1)})),d.emptySearchCallback(r))})},adjustText:function(a){var b=a.parent(),c=b.text();qtt="",c=B.removeCounter(c),b.text(c).prepend(a)},removeCounter:function(a){return a.replace(/\([0-9]+\)/gi,function(a){return qtt=a.replace(/\(|\)/,""),""})},setFilterMenu:function(){q.length>0&&(u.hide(),q.show())}};k.hasClass("departamento")?B.mergeMenu():(k.hasClass("categoria")||k.hasClass("resultado-busca"))&&B.mergeMenuList(),B.exec(),t.infinitScroll(),t.scrollToTop(),d.callback(),q.css("visibility","visible")};var smartResearch;