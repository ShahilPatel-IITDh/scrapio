var messageMaxLength=500,pageNumber=0;function validateFeedbackForm(){validateMessageInput($("#myModal textarea").val())&&($("#myModal input[type='checkbox']:checked").length>0?(enableSubmit(),enableNext()):(disableSubmit(),disableNext()))}function enableNext(){$("#myModal .btn-next button").prop("disabled",!1),$("#myModal .btn-next button").removeClass("btn disabled")}function disableNext(){$("#myModal .btn-next button").prop("disabled",!0),$("#myModal .btn-next button").removeClass("btn disabled"),$("#myModal .btn-next button").addClass("btn disabled")}function enableSubmit(){$("#myModal .btn-survey button").prop("disabled",!1),$("#myModal .btn-survey button").removeClass("btn disabled")}function disableSubmit(){$("#myModal .btn-survey button").prop("disabled",!0),$("#myModal .btn-survey button").removeClass("btn disabled"),$("#myModal .btn-survey button").addClass("btn disabled")}function changeRatingText(e){var t=getRatingText(e);$("#rateYoUX1Text").text(t),pageNumber=0,enableNext()}function setRatingText(e){var t=getRatingText(e),a=getRatingTextValue(e);$("#rateYoUX1Text").text(t),$(".rating_text").val(a),$("#feedback-tab-3").hide(),0===e?($("#feedback-tab-1").show(),$("#sp-question-1").show(),$(".sp-options").show(),$("#feedback-tab-2").hide(),$(".btn-next").hide(),$(".btn-survey").hide(),$(window).width()<417?($(".btn-next").show(),$(".modal-body").css({"border-bottom":"1px solid lightgray"})):$(".modal-body").css({"border-bottom":"none"})):e<4?($("#feedback-tab-1").hide(),$("#feedback-tab-2").show(),$(window).width()<417?($(".sp-message").hide(),$(".btn-survey").hide(),$(".btn-next").show(),$(".sp-spacer").show(),$(".sp-page-1").show(),$(".modal-body").css({"border-bottom":"1px solid lightgray"})):($(".sp-message").show(),$(".btn-survey").show(),$(".btn-next").hide(),$(".sp-spacer").hide(),$(".sp-page-1").hide(),$(".modal-body").css({"border-bottom":"1px solid lightgray"}))):e>3&&($("#feedback-tab-1").hide(),$("#sp-question-1").hide(),$(".sp-options").hide(),$("#feedback-tab-2").show(),$(".sp-message").show(),$(".btn-survey").show(),enableSubmit(),$(window).width(),$(".modal-body").css({"border-bottom":"1px solid lightgray"}),$(".btn-next").hide(),$(".sp-spacer").hide(),$(".sp-page-1").hide())}function getRatingText(e){var t="";switch(e+""){case"1":t=window.poor?window.poor:"POOR";break;case"2":t=window.fair?window.fair:"FAIR";break;case"3":t=window.good?window.good:"GOOD";break;case"4":t=window.verygood?window.verygood:"VERY GOOD";break;case"5":t=window.excellent?window.excellent:"EXCELLENT"}return t}function getRatingTextValue(e){var t="";switch(e+""){case"1":t="POOR";break;case"2":t="FAIR";break;case"3":t="GOOD";break;case"4":t="VERY GOOD";break;case"5":t="EXCELLENT"}return t}function showFeedback(e){if(e&&"SUCCESS"===e)return isFeedbackSubmitted&&window.isFeedbackSubmitted&&(console.log("isFeedbackSubmitted in dialog-modal js file",isFeedbackSubmitted),console.log("window.isFeedbackSubmitted",window.isFeedbackSubmitted),showSuccessDialog()),window.isFeedbackSubmitted=!1,void console.log("isFeedbackSubmitted in dialog-modal js file",isFeedbackSubmitted);$("#rateYoUX1").rateYo("rating",0),$("#myModal input[type='checkbox']").prop("checked",!1),pageNumber=0,setRatingText(0),validateFeedbackForm(),$("#myModal textarea").val(""),$("#max-length").text(messageMaxLength),$("#myModal input[type='checkbox']").each(function(e,t){$(t).parent().css({background:$(t).prop("checked")?"#DCDCDC":"#fff"})}),$(".rating_idleness").val("N"),showDialog()}function showDialog(){$("#feedback").removeClass("hide"),$("#myModal").modal("show"),$("#myModal .sp-bottom-message .sp-message-alert").text("")}function getSelectedRatingOptions(){var e=[];return $("#myModal input[type='checkbox']:checked").each(function(t,a){e.push($(a).val())}),e.length>0?e.join(", "):"Not Available"}function showSuccessDialog(){console.log("showSuccessDialog"),$("#feedback-tab-1").hide(),$("#feedback-tab-2").hide(),$("#feedback-tab-3").show(),$(".btn-survey").hide(),$("#myModal .modal-body").css({"border-bottom":"none"}),showDialog()}function onButtonNext(){1===pageNumber?(setRatingText($(".rating_value").val()),disableNext()):($("#sp-question-1").hide(),$(".sp-options").hide(),$(".sp-message").show(),$(".btn-next").hide(),$(".btn-survey").show());pageNumber++}function isIE(){var e=window.navigator.userAgent;return e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0}function validateMessageInput(e){var t=e;return!t||!t.trim()||/^[0-9a-zA-Z \u4E00-\u9FA5\,@!?$&\-()',.\n\r\/]+$/.test(t)}$(function(){$("#rateYoUX1").rateYo({fullStar:!0,spacing:"8px",onSet:function(e,t){e=Math.ceil(e),$(".rating_value").val(e),$(window).width()<417?(enableNext(),pageNumber++):setRatingText(e)}}).on("rateyo.change",function(e,t){changeRatingText(t.rating)})}),function(e){"use strict";e.fn.idle=function(t){var a,o,n=t.startAtIdle||!1,i=!t.startAtIdle||!0,d=e.extend({},{idle:6e4,events:"mousemove keydown mousedown touchstart",onIdle:function(){},onActive:function(){},onHide:function(){},onShow:function(){},keepTracking:!0,startAtIdle:!1,recurIdleCall:!1},t),s=null;return e(this).on("idle:stop",{},function(){e(this).off(d.events),d.keepTracking=!1,a(s,d)}),a=function(e,t){return n&&(t.onActive.call(),n=!1),clearTimeout(e),t.keepTracking?o(t):void 0},o=function(e){return(e.recurIdleCall?setInterval:setTimeout)(function(){n=!0,e.onIdle.call()},e.idle)},this.each(function(){s=o(d),e(this).on(d.events,function(){s=a(s,d)}),(d.onShow||d.onHide)&&e(document).on("visibilitychange webkitvisibilitychange mozvisibilitychange msvisibilitychange",function(){document.hidden||document.webkitHidden||document.mozHidden||document.msHidden?i&&(i=!1,d.onHide.call()):i||(i=!0,d.onShow.call())})})}}(jQuery),$(document).idle({onIdle:function(){var e=localStorage.getItem("isPopupClosed"),t=localStorage.getItem("feedbackformSubmitted"),a=localStorage.getItem("isPopupShown");console.log({isPopupClosed:e,feedbackformSubmitted:t,isPopupShown:a}),null===e&&null===t&&null===a&&(localStorage.setItem("isPopupShown","true"),showFeedback(),$(".rating_idleness").val("Y"))},idle:12e4}),$(window).on("resize",function(){if(window.screen.availWidth>416){var e=$(".rating_value").val();e&&""!==e&&"0"!==e&&setRatingText(e)}}),$(window).on("load",function(){$("#myModal .currentURL").val(window.location.href),$(".rating_idleness").val("N"),console.log("isFeedbackSubmitted111",isFeedbackSubmitted),console.log("window.isFeedbackSubmitted 2",window.isFeedbackSubmitted),console.log(isFeedbackSubmitted&&null!==isFeedbackSubmitted),isFeedbackSubmitted&&showFeedback("SUCCESS")}),$(document).ready(function(){window.performance&&window.performance.navigation.type==window.performance.navigation.TYPE_BACK_FORWARD&&(window.isFeedbackSubmitted=!1),$("#myModal .currentURL").val(window.location.href),$(".rating_idleness").val("N"),$(".btn-survey").hide(),$("#feedback #close-button").on("click",function(){$("#feedback").addClass("hide"),localStorage.setItem("isPopupClosed","true")}),$("#myModal").on("hidden.bs.modal",function(e){localStorage.setItem("isPopupClosed","true")}),$("#myModal input[type='checkbox']").change(function(e){validateFeedbackForm();var t=$(this).prop("checked");$(e.target).parent().css({background:t?"#DCDCDC":"#fff"})}),$("#myModal textarea").keyup(function(e){var t=Math.abs(messageMaxLength-$(this).val().length);$("#max-length").text(t),validateMessageInput($(this).val())?(enableSubmit(),$("#myModal .sp-bottom-message .sp-message-alert").text("")):(disableSubmit(),window.messageAlertText?$("#myModal .sp-bottom-message .sp-message-alert").text(window.messageAlertText):$("#myModal .sp-bottom-message .sp-message-alert").text("Enter only letters, numbers or @!$&-/()',."))}),$("#myModal textarea").on("paste",function(e){var t="",a=e.target.value.length;if(t=isIE()?window.clipboardData.getData("text"):e.originalEvent.clipboardData.getData("text/plain"),a!==messageMaxLength){var o=Math.abs(messageMaxLength-a-t.length);$("#max-length").text(o)}}),isIE()&&$("#myModal .modal-dialog").css("top","15%")});