(()=>{var e={926:e=>{function t(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}e.exports=function(e){return function(){var n=this,r=arguments;return new Promise((function(o,i){var a=e.apply(n,r);function s(e){t(a,o,i,s,c,"next",e)}function c(e){t(a,o,i,s,c,"throw",e)}s(void 0)}))}}},575:e=>{e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},100:(e,t,n)=>{var r=n(489),o=n(67);function i(t,n,a){return o()?e.exports=i=Reflect.construct:e.exports=i=function(e,t,n){var o=[null];o.push.apply(o,t);var i=new(Function.bind.apply(e,o));return n&&r(i,n.prototype),i},i.apply(null,arguments)}e.exports=i},913:e=>{function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}},713:e=>{e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},67:e=>{e.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}},489:e=>{function t(n,r){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(n,r)}e.exports=t},8:e=>{function t(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=t=function(e){return typeof e}:e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(n)}e.exports=t},757:(e,t,n)=>{e.exports=n(666)},453:(e,t,n)=>{"use strict";n.d(t,{k:()=>I});var r=n(713),o=n.n(r),i=n(575),a=n.n(i),s=n(913),c=n.n(s),u=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},l=n(70),d=!1,h=void 0,f=n(48);const p=function(){function e(){var t=this;a()(this,e),this.injectMap={},this.isReady=!1,(0,f._O)({onRequest:function(e,n){new Promise((function(n){h(e.url,t.isReady),t.isReady?n():setTimeout(n,500)})).then((function(){var r;try{r=new URL(e.url).pathname}catch(t){r=e.url}if(h(r,new Date),t.injectMap[r]){h("needInject:",r);var o=t.injectMap[r].pop();d||(d=/playback=/i.test(location.href)&&/isSkipInterval=1/i.test(location.href))?n.resolve({statusText:"OK",status:200,response:o.response}):setTimeout((function(){n.resolve({statusText:"OK",status:200,response:o.response})}),o.responseTime-o.startTime)}}))},onError:function(e,t){t.next(e)}})}return c()(e,[{key:"update",value:function(e){var t=this;h("response update",new Date),Object.keys(e).map((function(n){var r=n.replace(/\?\S*/,"");t.injectMap[r]=e[n].sort((function(e,t){t.responseTime,e.responseTime}))})),this.isReady=!0}}]),e}();var g=n(675),m=n(100),v=n.n(m);function y(){var e=(location.href.match(/fakeDate=([^&]+)/)||[])[1];if(e){var t={date:+e};window.__realDate=Date,this.dateInfo=t,this.initTime=function(){this.sTime=new window.__realDate},this.getTime=function(){return+new window.__realDate(this.dateInfo.date)+ +new window.__realDate-this.sTime-this.delayTime},this.initTime(),this.delayTime=0;var n=this;r.UTC=window.__realDate.UTC,r.now=function(){return(new r).valueOf()},r.parse=function(e){return window.__realDate.parse(e)},r.toString=function(){return window.__realDate.toString()},r.prototype=window.__realDate.prototype,window.Date=r}function r(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return arguments.length?v()(window.__realDate,t):new window.__realDate(n.getTime())}}n(776);var I=function(){function e(){var t,n=this;a()(this,e),new y,this.cbMap={},this.ajaxList=null,this.injector=new p,this.getAjaxList().then((function(e){n.injector.update(e.data)})),this.handlerMap=(t={},o()(t,g.Ze.INIT,this.initHandler.bind(this)),o()(t,g.Ze.SCROLL,this.scrollHandler.bind(this)),o()(t,g.Ze.GET_AJAX_LIST,this.getAjaxListHandler.bind(this)),o()(t,g.Ze.CLICK,this.clickHandler.bind(this)),o()(t,g.Ze.H5_PRESS,this.pressHandler.bind(this)),t),window.addEventListener("message",this.messageHandler.bind(this),!1),window.parent&&window.parent.postMessage(g.Zv,"*"),window.$handler=this}return c()(e,[{key:"messageHandler",value:function(e){this.handlerMap[e.data.eventType]&&this.handlerMap[e.data.eventType](e.data)}},{key:"on",value:function(e,t){this.cbMap[e]?this.cbMap[e].push(t):this.cbMap[e]=[t]}},{key:"getAjaxList",value:function(){var e=this;return new Promise((function(t){e.ajaxList?t(e.ajaxList):(e.on(g.Ze.GET_AJAX_LIST,t),window.parent.postMessage(g.yh,"*"))}))}},{key:"getAjaxListHandler",value:function(e){var t=this.cbMap[g.Ze.GET_AJAX_LIST];this.ajaxList=e,t&&t.map((function(t){t(e)})),this.cbMap[g.Ze.GET_AJAX_LIST]=[]}},{key:"initHandler",value:function(e){if(e){t=document.querySelector("html"),n=e,t.innerHTML=n,Array.from(t.querySelectorAll("script")).forEach((function(e){var t=document.createElement("script");Array.from(e.attributes).forEach((function(e){return t.setAttribute(e.name,e.value)})),t.appendChild(document.createTextNode(e.innerHTML));try{e.parentNode.replaceChild(t,e)}catch(e){}}))}var t,n}},{key:"pressHandler",value:function(e){var t=document.querySelector(e.eventParam);t&&(0,l.x$)(t,0,0,e.eventParam)}},{key:"clickHandler",value:function(e){var t=document.querySelector(e.eventParam);t&&(0,l.s9)(t)}},{key:"scrollHandler",value:function(e){var t,n,r,o,i,a,s,c,l,d=e.eventExtend||[],f=e.eventParam?document.querySelector(e.eventParam):document.documentElement;f&&d.length&&(h("scroll",f===document.documentElement?"body":e.eventParam,d[0].scrollTop),t=f,n=d[0].scrollTop,r=50,i=t.scrollTop,a=n-i,s=+new Date,c=!0,l=null,u((function e(){if(c){u(e);var d,h,f,p=+new Date,g=Math.floor((d=p-s,h=i,f=a,(d/=r/2)<1?f/2*d*d+h:-f/2*(--d*(d-2)-1)+h));l?l===t.scrollTop?(l=g,t.scrollTop=g):c=!1:(l=g,t.scrollTop=g),p>s+r&&(t.scrollTop=n,c=!1,o&&o())}})))}}]),e}()},776:()=>{!function(){function e(e){return"[object Array]"===Object.prototype.toString.call(e)?e:null==e?[]:[e]}var t={type:"touch",setType:function(e){if(!t.events[e])throw new Error(e+" is not a valid event type.");return this.type=e}};function n(e,t){for(var n in e=e||{},t=t||{})Object.prototype.hasOwnProperty.call(t,n)&&void 0===e[n]&&(e[n]=t[n]);return e}function r(t,n,r,o,i){var a,s,c,u=t[0],l=t[1],d=[];if(n=e(n),1===r)return n.length?[{x:u,y:l,target:n[0]}]:[{x:u,y:l}];for(o=o||100,i=i*Math.PI/180||0,a=2*Math.PI/r,s=0;s<r;s++)c=a*s+i,d.push({x:u+o*Math.cos(c),y:l+o*Math.sin(c),target:n[s%n.length]});return d}function o(e,t){e.forEach((function(e){var n=document.createElement("div");n.style.width="20px",n.style.height="20px",n.style.background="red",n.style.position="fixed",n.style.top=e.y+"px",n.style.left=e.x+"px",n.style.borderRadius="100%",n.style.border="solid 2px #000",n.style.zIndex=6e3,t.appendChild(n),setTimeout((function(){n&&n.parentNode&&n.parentNode.removeChild(n),n=null}),100)}))}function i(e,n,r){return t.events[t.type].trigger(e,n,r)}function a(o,a,s,c){var u=Math.ceil(s.duration/10),l=1;o=e(o),s=n(s,{pos:[10,10],duration:250,touches:1,deltaX:0,deltaY:0,radius:100,scale:1,rotation:0,easing:"swing"}),function e(){var n=s.radius;1!==s.scale&&(n=s.radius-s.radius*(1-s.scale)*(1/u*l));for(var d=t.easings[s.easing](1/u*l),h=s.pos[0]+s.deltaX/u*l*d,f=s.pos[1]+s.deltaY/u*l*d,p=s.rotation/u*l,g=r([h,f],o,a.length,n,p),m=1==l,v=l==u,y=g.length-1;y>=0;y--)if(m)i(g,g[y].target,"start");else if(v){if(i(g,g[y].target,"end"),g.pop(),0===g.length)return c()}else i(g,g[y].target,"move");setTimeout(e,10),l++}()}t.easings={swing:function(e){return.5-Math.cos(e*Math.PI)/2},cubic:function(e){return Math.pow(e,3)}},t.events={pointer:{fakeSupport:function(){"PointerEvent"in window||(navigator.maxTouchPoints=10,window.PointerEvent=function(){})},typeMap:{start:"pointerdown",move:"pointermove",end:"pointerup",cancel:"pointercancel"},trigger:function(e,t,n){e.forEach((function(e,r){var o=Math.round(e.x),i=Math.round(e.y),a=this.typeMap[n],s=window.MSPointerEvent&&a.replace(/pointer([a-z])/,(function(e,t){return"MSPointer"+t.toUpperCase()})),c=document.createEvent("Event");c.initEvent(s||a,!0,!0),c.getCurrentPoint=function(){return e},c.setPointerCapture=c.releasePointerCapture=function(){},c.pointerId=r,c.buttons=1,c.pageX=o,c.pageY=i,c.clientX=o,c.clientY=i,c.screenX=o,c.screenY=i,c.target=t,c.pointerType="touch",c.identifier=r,t.dispatchEvent(c)}),this),o(e,t)}},touch:{fakeSupport:function(){"ontouchstart"in window||(window.ontouchstart=function(){})},emptyTouchList:function(){var e=[];return e.identifiedTouch=e.item=function(e){return this[e]||{}},e},trigger:function(e,t,n){var r=this.emptyTouchList();e.forEach((function(e,t){var n=Math.round(e.x),o=Math.round(e.y);r.push({pageX:n,pageY:o,clientX:n,clientY:o,screenX:n,screenY:o,target:e.target,identifier:t})}));var i,a=document.createEvent("Event");a.initEvent("touch"+n,!0,!0),"end"!==n?(i=r.filter((function(e){return e.target===t})),a.changedTouches=i):(a.changedTouches=[r.pop()],i=r.filter((function(e){return e.target===t}))),a.touches=r,a.targetTouches=i,t.dispatchEvent(a),o(e,t)}}},t.gestures={press:function(e,t,o){var a=r((t=n(t,{pos:[10,10],duration:500,touches:1})).pos,e,1);i(a,e,"start"),setTimeout((function(){i(a,e,"end"),o&&setTimeout(o,25)}),t.duration)},tap:function(e,t,o){var a=r((t=n(t,{pos:[10,10],duration:100,touches:1})).pos,e,1);i(a,e,"start"),setTimeout((function(){i(a,e,"end"),o&&setTimeout(o,25)}),t.duration)},doubleTap:function(e,r,o){r=n(r,{pos:[10,10],pos2:[11,11],duration:100,interval:200,touches:1}),t.gestures.tap(e,r,(function(){setTimeout((function(){r.pos=r.pos2,t.gestures.tap(e,r,o)}),r.interval)}))},pan:function(e,t,o){a(e,r((t=n(t,{pos:[10,10],deltaX:300,deltaY:150,duration:250,touches:1})).pos,e,t.touches),t,(function(){o&&setTimeout(o,25)}))},swipe:function(e,t,o){a(e,r((t=n(t,{pos:[10,10],deltaX:300,deltaY:150,duration:250,touches:1,easing:"cubic"})).pos,e,t.touches),t,(function(){o&&setTimeout(o,25)}))},pinch:function(t,o,i){a(t=e(t),r((o=n(o,{pos:[300,300],scale:2,duration:250,radius:100,touches:2})).pos,t,o.touches),o,(function(){i&&setTimeout(i,25)}))},rotate:function(t,o,i){a(t=e(t),r((o=n(o,{pos:[300,300],rotation:180,duration:250,touches:2})).pos,t,o.touches),o,(function(){i&&setTimeout(i,25)}))},pinchRotate:function(t,o,i){a(t=e(t),r((o=n(o,{pos:[300,300],rotation:180,radius:100,scale:.5,duration:250,touches:2})).pos,t,o.touches),o,(function(){i&&setTimeout(i,25)}))}},window.PointerEvent||window.MSPointerEvent?t.setType("pointer"):(t.setType("touch"),t.events.touch.fakeSupport()),window.Simulator=t}()},675:(e,t,n)=>{"use strict";n.d(t,{Ze:()=>r,Zv:()=>o,yh:()=>i});var r={CLICK:"CLICK",PRESS:"PRESS",SCROLL:"SCROLL",RESIZE:"RESIZE",MOUSE_MOVE:"MOUSE_MOVE",CHANGE:"CHANGE",BLUR:"BLUR",FOCUS:"FOCUS",INPUT:"INPUT",INIT:"INIT",LEAVE:"LEAVE",FIRST_RENDER:"FIRST_RENDER",VISIBILITY_SHOW:"VISIBILITY_SHOW",VISIBILITY_HIDDEN:"VISIBILITY_HIDDEN",BEFORE_UNLOAD:"BEFORE_UNLOAD",AJAX:"AJAX",CSR_REQ:"CSR_REQ",SSR:"SSR",H5_PRESS:"H5_PRESS",GET_AJAX_LIST:"GET_AJAX_LIST",DOM:"DOM",COOKIE:"COOKIE"},o="**CONNECT_MESSAGE**",i="**GET_AJAX_LIST_MESSAGE**"},207:(e,t,n)=>{"use strict";n.d(t,{$E:()=>f,Ci:()=>E,ET:()=>A,H3:()=>u,JZ:()=>s,Kd:()=>T,RC:()=>c,TZ:()=>O,Vh:()=>S,Vw:()=>a,W7:()=>g,Z3:()=>i,Z7:()=>I,_D:()=>o,_Z:()=>p,bC:()=>v,dN:()=>l,gt:()=>d,hv:()=>b,kQ:()=>h,on:()=>m,q4:()=>r,tq:()=>w,yM:()=>k,zI:()=>y});var r="3.11.5",o=0,i="CACHE_ADD_ERR",a="CACHE_INIT_ERR",s="CACHE_REMOVE_ERR",c="CACHE_REMOVE_WARN",u={POST_ID:"COFFEEBEAN_POST_ID",CACHE_KEY:"COFFEEBEAN_STORAGE_V1_CACHE",CACHE_PRE_KEY:"COFFEEBEAN_STORAGE_CACHE",UN_HANDLED:"COFFEEBEAN_UN_HANDLED",CACHE_KEY_LIST:"CACHE_KEY_LIST"},l={DOM:"DOM",ACTION:"ACTION"},d={INIT:"ACTIONS_INIT"},h={VERSION:r,END:"end",CACHE:"cache",UN_HANDLED:"unhandled",START:"start",ORDER:"ORDER"},f={SUCCESS:"SUCCESS",FAILED:"FAILED",ERROR:"WORKER_ERROR",OVER_MAX_LENGTH:"OVER_MAX_LENGTH",DECODE_FAILURE:"DECODE_FAILURE",NO_NEED_SEND:"NO_NEED_SEND"},p="COFFEEBEAN_TAB_ID",g="o_flt_coffeebean_dev",m="o_flt_coffeebean_save_error",v="o_flt_coffeebean_window_size",y={SAVE_SUCCESS:1,SEND_CACHE:2,USE_NEW_ID:3,OVER_LENGTH:4,CACHE_LENGTH:5,SEND_EMPTY_LIST:6,CHECK_CLICK:7},I={EMPTY_LIST:2,INVALID:1},C="COFFEEBEAN_PRIVATE_MODEL",b=function(){try{return localStorage.setItem(C,"1"),localStorage.removeItem(C),!1}catch(e){return!0}}(),w=/ipad|mobile|android/.test(navigator.userAgent.toLowerCase()),S="16163/saveLogInfo?_fxpcqlniredt",E={PARSE_ERROR:8004,CLIENT_ERROR:8003,NET_WORK_ERROR:8002,TIME_OUT:8001},A={PARSE_ERROR:"解析服务返回异常",CLIENT_ERROR:"创建请求异常",NET_WORK_ERROR:"请求状态异常",TIME_OUT:"请求超时"},k={STOP:0,START:1},T={INIT_RECORD:"INIT_RECORD"},O=999999},48:(e,t,n)=>{"use strict";n.d(t,{_O:()=>_});var r=n(713),o=n.n(r),i=n(8),a=n.n(i),s="_rxhr";function c(e,t){var n={};for(var r in e)n[r]=e[r];return n.target=n.currentTarget=t,n}var u,l=["load","loadend","timeout","error","readystatechange","abort"],d=l[0],h=l[1],f=l[2],p=l[3],g=l[4],m=l[5],v="prototype";function y(){u=null,window[s]&&(XMLHttpRequest=window[s]),window[s]=void 0}function I(e){return e.watcher||(e.watcher=document.createElement("a"))}function C(e,t){var n=e.getProxy(),r="on"+t+"_",o=c({type:t},n);n[r]&&n[r](o);var i,a=I(e);try{i=new Event(t,{bubbles:!1})}catch(e){(i=document.createEvent("HTMLEvents")).initEvent(t,!1,!1)}a.dispatchEvent(i)}function b(e){this.xhr=e,this.xhrProxy=e.getProxy()}function w(e){function t(e){b.call(this,e)}return t[v]=Object.create(b[v]),t[v].next=e,t}b[v]=Object.create({resolve:function(e){var t=this.xhrProxy,n=this.xhr;t.readyState=4,n.resHeader=e.headers,t.response=t.responseText=e.response,t.statusText=e.statusText,t.status=e.status,C(n,g),C(n,d),C(n,h)},reject:function(e){this.xhrProxy.status=0,C(this.xhr,e.type),C(this.xhr,h)}});var S=w((function(e){var t=this.xhr;for(var n in e=e||t.config,t.withCredentials=e.withCredentials,t.open(e.method,e.url,!1!==e.async,e.user,e.password),e.headers)t.setRequestHeader(n,e.headers[n]);t.send(e.body)})),E=w((function(e){this.resolve(e)})),A=w((function(e){this.reject(e)}));function k(e){var t=e.onRequest,n=e.onResponse,r=e.onError;function o(e,t,n){var o=new A(e),i={config:e.config,error:n};r?r(i,o):o.next(i)}function i(){return!0}function u(e,t){return o(e,0,t),!0}function d(e,t){return 4===e.readyState&&0!==e.status?function(e,t){var r=new E(e),o={response:t.response,status:t.status,statusText:t.statusText,config:e.config,headers:e.resHeader||e.getAllResponseHeaders().split("\r\n").reduce((function(e,t){if(""===t)return e;var n=t.split(":");return e[n.shift()]=function(e){return e.replace(/^\s+|\s+$/g,"")}(n.join(":")),e}),{})};if(!n)return r.resolve(o);n(o,r)}(e,t):4!==e.readyState&&C(e,g),!0}return function(e){function t(t,n){return function(){try{var n=this.hasOwnProperty(t+"_")?this[t+"_"]:this.xhr[t],r=(e[t]||{}).getter;return r&&r(n,this)||n}catch(e){window.__bfi.push(["_devTrace","o_flt_coffeebean_save_error",JSON.stringify({type:"XHR_CALL_STACK_SIZE_EXCEEDED",attr:t,message:e.message,stack:e.stack})])}}.bind(n)}function n(t){return function(n){var r=this.xhr,o=this,i=e[t];if("on"===t.substring(0,2))o[t+"_"]=n,r[t]=function(i){i=c(i,o),e[t]&&e[t].call(o,r,i)||n.call(o,i)};else{var a=(i||{}).setter;n=a&&a(n,o)||n,this[t+"_"]=n;try{r[t]=n}catch(e){}}}}function r(t){return function(){var n=[].slice.call(arguments);if(e[t]){var r=e[t].call(this,n,this.xhr);if(r)return r}return this.xhr[t].apply(this.xhr,n)}}return window[s]=window[s]||XMLHttpRequest,XMLHttpRequest=function(){var e=new window[s];for(var o in e){var i="";try{i=a()(e[o])}catch(e){}"function"===i?this[o]=r(o):"xhr"!==o&&Object.defineProperty(this,o,{get:t(o,this),set:n(o),enumerable:!0})}var c=this;e.getProxy=function(){return c},this.xhr=e},Object.assign(XMLHttpRequest,{UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4}),window[s]}({onload:i,onloadend:i,onerror:u,ontimeout:u,onabort:u,onreadystatechange:function(e){return d(e,this)},open:function(e,n){var r=this,i=n.config={headers:{}};i.method=e[0],i.url=e[1],i.async=e[2],i.user=e[3],i.password=e[4],i.xhr=n;var a="on"+g;n[a]||(n[a]=function(){return d(n,r)});var s=function(e){o(n,0,c(e,r))};if([p,f,m].forEach((function(e){var t="on"+e;n[t]||(n[t]=s)})),t)return!0},send:function(e,n){var r=n.config;if(r.withCredentials=n.withCredentials,r.body=e[0],t){var o=function(){t(r,new S(n))};return!1===r.async?o():setTimeout(o),!0}},setRequestHeader:function(e,t){return t.config.headers[e[0].toLowerCase()]=e[1],!0},addEventListener:function(e,t){var n=this;if(-1!==l.indexOf(e[0])){var r=e[1];return I(t).addEventListener(e[0],(function(t){var o=c(t,n);o.type=e[0],o.isTrusted=!0,r.call(n,o)})),!0}},getAllResponseHeaders:function(e,t){var n=t.resHeader;if(n){var r="";for(var o in n)r+=o+": "+n[o]+"\r\n";return r}},getResponseHeader:function(e,t){var n=t.resHeader;if(n)return n[(e[0]||"").toLowerCase()]}})}function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R=window.fetch,x=function(e,t){var n;return"string"==typeof e?(n=O({},t)).url=e:n=O({},e),n.method?n.method=n.method.toLowerCase():n.method="get",n.xhr={},n},M=function(e){var t=e.resolve,n=e.reject,r=e.next,o=e.config;return{resolve:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{config:{method:"get",url:"",headers:{}},headers:{},response:null,status:0,statusText:""},n=e.config||o,r=e.headers||n.headers||{},i=r["content-type"]||"application/json";return t(new Response(new Blob([e.response],{type:i}),{status:"status"in e?e.status:200,statusText:"statusText"in e?e.statusText:"ok"}))},reject:function(e){return n(e)},next:r}},N=function(e){var t=e.resolve,n=e.reject,r=e.onResponse,o=e.config;return function(e){if(r){var i=e.clone();return new Promise((function(a,s){var c=function(c){var u={response:c,status:e.status,statusText:e.statusText,config:o,headers:o.headers||{}};return r(u,M({config:o,resolve:function(e){a(e),t(e)},reject:function(e){s(e),n(e)},next:function(){a(i),t(i)}})),c};e.text().then(c).catch(c)}))}return e}},D=function(e){var t=e.onError,n=e.resolve,r=e.reject,o=e.config;return function(e){return new Promise((function(i,a){if(!t)return a(e);t({config:o,error:e},M({config:o,resolve:n,reject:r,next:function(){a(e),r(e)}}))}))}},L=function(e){var t=e.onRequest,n=e.onResponse,r=e.onError;window.fetch=function(){for(var e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];var a=x.apply(void 0,o);return new Promise((function(e,i){t?t(a,M({config:a,resolve:e,reject:i,next:function(){e(R.apply(void 0,o).then(N({config:a,resolve:e,reject:i,onResponse:n})).catch(D({onError:r,resolve:e,reject:i,config:a})))}})):e(R.apply(void 0,o).then(N({config:a,resolve:e,reject:i,onResponse:n})).catch(D({onError:r,resolve:e,reject:i,config:a})))}))}},_=function(e){!function(e){if(u)throw"Proxy already exists";u=new k(e)}(e),window.fetch&&L(e)};window.$nethook={hookNetwork:_,fetchHook:L,unbindHook:function(){window.fetch=R,y()}}},3:(e,t,n)=>{"use strict";n.d(t,{j:()=>c,u:()=>s});var r=n(71),o=n.n(r),i=n(207),a=o()(1),s={baseRequest:function(e){var t=e.url,n=e.config,r=e.cb,o=e.err,a=e.async,s=void 0===a||a,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"POST";try{var u=XMLHttpRequest,l=new u;l.$coffeebeanStatus=0,l.onreadystatechange=function(){if(l.readyState===XMLHttpRequest.DONE)if(0===l.status)o&&o({rc:i.Ci.TIME_OUT,rcMsg:i.ET.TIME_OUT,err:{xhrStatus:l.status}});else if(l.status>=200&&l.status<300||304===l.status)try{var e=JSON.parse(l.responseText);r(e,l)}catch(e){o&&o({rc:i.Ci.PARSE_ERROR,rcMsg:i.ET.PARSE_ERROR,err:{resText:l.responseText,msg:e.message,stack:e.stack,xhrStatus:l.status}})}else o&&o({rc:i.Ci.NET_WORK_ERROR,rcMsg:i.ET.NET_WORK_ERROR,xhrStatus:l.status})},l.open(c,t,s),l.setRequestHeader("Content-type","application/json"),s&&(l.withCredentials=!0,l.timeout=15e3);var d=JSON.stringify(n);l.send(d)}catch(e){o({rc:i.Ci.CLIENT_ERROR,rcMsg:i.ET.CLIENT_ERROR,err:{msg:e.message,stack:e.stack}})}},postRequest:function(e){var t=e.url,n=e.config,r=e.async,o=void 0===r||r,i=e.count,c=void 0===i?0:i,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"POST",l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return a((function(){return new Promise((function(e,r){var i={url:t,config:n,async:o,cb:e,err:r,count:c+1};setTimeout((function(){s.baseRequest(i,u)}),l)}))})).catch((function(e){return c<2?new Promise((function(e,r){setTimeout((function(){s.postRequest({url:t,config:n,async:o,count:c+1},u,l,d).then(e,r)}),d)})):Promise.reject(e)}))}},c=s.postRequest},70:(e,t,n)=>{"use strict";n.d(t,{ES:()=>p,F$:()=>b,GR:()=>R,HG:()=>d,I1:()=>A,TM:()=>T,WA:()=>h,YN:()=>O,Yi:()=>C,ZS:()=>I,ej:()=>w,fM:()=>M,gp:()=>x,r5:()=>E,s:()=>N,s9:()=>g,sN:()=>S,v0:()=>k,x$:()=>y,zU:()=>D});var r=n(8),o=n.n(r),i=n(713),a=n.n(i),s=n(207),c=n(952);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=function(e){return h(f(e))},h=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"data-speed",n=[];e.parentNode;){var r=t&&e.attributes[t]&&e.attributes[t].value;if(e.id&&!r){n.unshift("#"+e.id);break}if(e===e.ownerDocument.documentElement||e===e.ownerDocument.body)n.unshift(e.tagName);else{for(var o=e,i=1;o.previousElementSibling;)o=o.previousElementSibling,i++;var a=t&&e.attributes[t]&&e.attributes[t].value;if(a){var s="[".concat(t,'="').concat(a,'"]'),c=document.querySelectorAll(s);if(c.length>1){for(var u=0;u<c.length&&e!==c[u];u++);n.unshift("".concat(s,":eq(").concat(u,")"))}else n.unshift("".concat(s));break}n.unshift([e.tagName,":nth-child("+i+")"].join(""))}e=e.parentNode}return n.join(" > ")},f=function(e){var t=e.target,n=e.path;if("i"!==t.nodeName.toLowerCase()||t.parentNode)return t;for(var r=0,o=n[r];!o.parentNode&&o!==o.ownerDocument.documentElement&&o!==o.ownerDocument.body;)o=n[++r];return o},p=function(e,t){if(!t)return"";var n=/\?([^#]*)(#|$)/.exec(t);return n&&(n=new RegExp("(^|&)".concat(e.replace(/([-.*+?^${}()|[\]/\\])/g,"\\$1"),"=([^&]*)(&|$)"),"i").exec(n[1]))?decodeURIComponent(n[2]):null},g=function(e){var t;(t=document.createEvent("MouseEvents")).initEvent("mousedown",!0,!0),e.dispatchEvent(t),(t=document.createEvent("MouseEvents")).initEvent("click",!0,!0),e.dispatchEvent(t),(t=document.createEvent("MouseEvents")).initEvent("mouseup",!0,!0),e.dispatchEvent(t)},m=function(e,t,n,r){var o=new Touch({identifier:Date.now(),target:n,clientX:e,clientY:t,screenX:e,screenY:t,radiusX:2.5,radiusY:2.5,rotationAngle:10,force:.5}),i=new TouchEvent(r,{cancelable:!1,bubbles:!0,currentTarget:n,touches:[o],targetTouches:[o],changedTouches:[o],shiftKey:!0,view:window,type:r});n.dispatchEvent(i)},v=/\/flightdelivery\/delivery\//.test(location.pathname),y=function(e,t,n){v?(m(t,n,e,"touchstart"),m(t,n,e,"touchend"),g(e)):g(e)},I=function(e){var t=e.changedTouches&&e.changedTouches[0];if(t)return{pageX:t.pageX,pageY:t.pageY}},C=function(e){return{x:e.clientX,y:e.clientY}},b=function(){var e=["eventPress"];function t(e){this.delta={},e.touches?(this.delta.x=e.touches[0].pageX,this.delta.y=e.touches[0].pageY):(this.delta.x=0,this.delta.y=0),this.delta.time=(new Date).getTime()}function n(e){var t=this.delta||{x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY};delete this.delta;var n=(new Date).getTime()-(t.time||0);t.x-=e.changedTouches[0].pageX,t.y-=e.changedTouches[0].pageY,Math.abs(t.x)<5&&Math.abs(t.y)<5&&n<1e3&&this.eventPress&&this.eventPress.map((function(t){t(e)}))}return{bindEvent:function(r,o,i){r&&(e.some((function(e){return r[e]}))||(r.addEventListener("touchstart",t,!0),r.addEventListener("touchend",n,!0)),r["event"+o]||(r["event"+o]=[]),r["event"+o].push(i))}}}(),w=function(e){if(!window.document)return"";var t=window.document.cookie,n="";if(t)for(var r,o,i=t.split("; "),a=0;a<i.length;a++)o=(r=i[a]).indexOf("="),r.substr(0,o)===e&&(n=r.substr(o+1));return n},S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.W7,n="string"==typeof e?{msg:e,VERSION:s.q4,IS_INS:s._D}:l(l({},e),{},{VERSION:s.q4,IS_INS:s._D});window.__bfi=window.__bfi||[],window.__bfi.push(["_devTrace",t,n])},E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e instanceof Error)S(l({name:e.name,VERSION:s.q4,message:e.message,stack:e.stack,url:location.href,type:"DEFAULT",isPrivate:s.hv},t),s.on);else{var n={VERSION:s.q4,url:location.href,type:"DEFAULT",isPrivate:s.hv};S(e&&"object"===o()(e)?l(l(l({},n),e),t):l(l({},n),{},{info:e},t),s.on)}},A=function(e,t){for(var n=!1;e&&!n;)n=e.tagName===t,e=e.parentNode;return n},k=function(){try{return JSON.parse(c.t.getItem("HEADSTORE")).value.auth}catch(e){return null}},T=function(e){var t=-1,n=-1,r=e.target.type;return"text"!==r&&"textarea"!==r||(t=e.target.selectionStart,n=e.target.selectionEnd),{selStart:t,selEnd:n}},O=function(e){return function(e,t){var n=e&&e.ResponseStatus&&e.ResponseStatus.Extension&&e.ResponseStatus.Extension.filter((function(e){return e.Id===t}))[0];return n&&n.Value}(e,"RootMessageId")},R=function(){var e,t;return void 0!==document.hidden?(e="hidden",t="visibilitychange"):void 0!==document.msHidden?(e="msHidden",t="msvisibilitychange"):void 0!==document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange"),{hidden:e,visibilityChange:t}};function x(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function M(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function N(e,t){var n=e?e[e.length-1]:void 0;return n||t}function D(){return new Promise((function(e){var t=setTimeout((function(){E({msg:"getAppUbtInfo timeout"}),e(null)}),1e3);window.CtripUBT?window.CtripUBT.getCurrentPageInfo((function(n){clearTimeout(t),e(n)})):(clearTimeout(t),e(null))})).catch((function(e){return null}))}},739:(e,t,n)=>{"use strict";n.d(t,{f:()=>Yn});var r=n(926),o=n.n(r),i=n(713),a=n.n(i),s=n(575),c=n.n(s),u=n(913),l=n.n(u),d=n(757),h=n.n(d),f=n(675),p=n(70),g=n(207),m=n(877),v=n.n(m),y=n(952),I=5e3,C=250,b=9e5,w=100,S=function(){if(sessionStorage.getItem(g._Z))return+sessionStorage.getItem(g._Z);var e=y.t.getItem(g._Z);return("string"!=typeof e||e>=9999)&&(e=1),y.t.setItem(g._Z,+e+1),sessionStorage.setItem(g._Z,e),+e},E=function(){var e=p.ES("oid",location.href)||"";/^\d+$/.test(e)||(e=0);var t="";window.$cbconfig&&window.$cbconfig.source&&(t=window.$cbconfig.source);var n=window.$cbconfig||{saveProd:!1,recordCanvas:!1,replayType:g.dN.DOM,saveRequest:!1,saveAction:!1,autoInterval:I,blockTimeout:C,useNewDelay:b,maxLength:w,saveNetwork:""},r=n.replayType,o=void 0===r?g.dN.DOM:r,i=n.saveAction,a=void 0!==i&&i,s=n.saveRequest,c=void 0!==s&&s,u=n.autoInterval,l=void 0===u?I:u,d=n.blockTimeout,h=void 0===d?C:d,f=n.useNewDelay,m=void 0===f?b:f,v=n.maxLength,y=void 0===v?w:v,E=n.recordCanvas,A=void 0!==E&&E,k=n.saveProd,T=void 0!==k&&k,O=n.saveNetwork,R=void 0===O?"":O,x=n.cookieKeyList,M=void 0===x?[]:x;return{replayType:o,oid:e=window.$cbconfig&&window.$cbconfig.oid||e,tsid:"",source:t,auth:"",cid:"",uid:window.btoa(window.$cbconfig&&window.$cbconfig.uid||""),ext:window.$cbconfig&&window.$cbconfig.ext||"",saveRequest:c,blockTimeout:h,autoInterval:l,saveAction:a,tabID:S(),useNewDelay:m,maxLength:y,recordCanvas:A,saveProd:T,saveNetwork:R,cookieKeyList:M}},A=n(477),k=n.n(A);function T(){return k()('(()=>{var e={713:e=>{e.exports=function(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}},71:e=>{function r(e){var r=0,t=[];function n(){var n;--r<e&&(n=t.shift(),a.queue=t.length,n&&o(n.fn).then(n.resolve).catch(n.reject))}function o(e){r++;try{return Promise.resolve(e()).then((function(e){return n(),e}),(function(e){throw n(),e}))}catch(e){return n(),Promise.reject(e)}}var a=function(n){return r>=e?function(e){return new Promise((function(r,n){t.push({fn:e,resolve:r,reject:n}),a.queue=t.length}))}(n):o(n)};return a}function t(e,r){var t=!1,n=this;return Promise.all(e.map((function(){var e=arguments;return n((function(){if(!t)return r.apply(void 0,e).catch((function(e){throw t=!0,e}))}))})))}function n(e){return e.queue=0,e.map=t,e}e.exports=function(e){return n(e?r(e):function(e){return e()})}}},r={};function t(n){var o=r[n];if(void 0!==o)return o.exports;var a=r[n]={exports:{}};return e[n](a,a.exports,t),a.exports}t.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return t.d(r,{a:r}),r},t.d=(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},t.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),(()=>{"use strict";var e=t(713),r=t.n(e),n=t(71),o=t.n(n),a="SUCCESS",c="FAILED",s="OVER_MAX_LENGTH",f="DECODE_FAILURE",i="NO_NEED_SEND",u="COFFEEBEAN_PRIVATE_MODEL",v=(function(){try{localStorage.setItem(u,"1"),localStorage.removeItem(u)}catch(e){return!0}}(),/ipad|mobile|android/.test(navigator.userAgent.toLowerCase()),8004),l=8003,h=8002,g=8001,m="解析服务返回异常",p="创建请求异常",d="请求状态异常",w="请求超时",y=o()(1),b={baseRequest:function(e){var r=e.url,t=e.config,n=e.cb,o=e.err,a=e.async,c=void 0===a||a,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"POST";try{var f=XMLHttpRequest,i=new f;i.$coffeebeanStatus=0,i.onreadystatechange=function(){if(i.readyState===XMLHttpRequest.DONE)if(0===i.status)o&&o({rc:g,rcMsg:w,err:{xhrStatus:i.status}});else if(i.status>=200&&i.status<300||304===i.status)try{var e=JSON.parse(i.responseText);n(e,i)}catch(e){o&&o({rc:v,rcMsg:m,err:{resText:i.responseText,msg:e.message,stack:e.stack,xhrStatus:i.status}})}else o&&o({rc:h,rcMsg:d,xhrStatus:i.status})},i.open(s,r,c),i.setRequestHeader("Content-type","application/json"),c&&(i.withCredentials=!0,i.timeout=15e3);var u=JSON.stringify(t);i.send(u)}catch(e){o({rc:l,rcMsg:p,err:{msg:e.message,stack:e.stack}})}},postRequest:function(e){var r=e.url,t=e.config,n=e.async,o=void 0===n||n,a=e.count,c=void 0===a?0:a,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"POST",f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return y((function(){return new Promise((function(e,n){var a={url:r,config:t,async:o,cb:e,err:n,count:c+1};setTimeout((function(){b.baseRequest(a,s)}),f)}))})).catch((function(e){return c<2?new Promise((function(e,n){setTimeout((function(){b.postRequest({url:r,config:t,async:o,count:c+1},s,f,i).then(e,n)}),i)})):Promise.reject(e)}))}},O=b.postRequest,E=Uint8Array,S=Uint16Array,D=Uint32Array,M=new E([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),P=new E([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),j=new E([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),x=function(e,r){for(var t=new S(31),n=0;n<31;++n)t[n]=r+=1<<e[n-1];var o=new D(t[30]);for(n=1;n<30;++n)for(var a=t[n];a<t[n+1];++a)o[a]=a-t[n]<<5|n;return[t,o]},C=x(M,2),I=C[0],T=C[1];I[28]=258,T[258]=28;for(var R=x(P,0),q=(R[0],R[1]),A=new S(32768),N=0;N<32768;++N){var _=(43690&N)>>>1|(21845&N)<<1;_=(61680&(_=(52428&_)>>>2|(13107&_)<<2))>>>4|(3855&_)<<4,A[N]=((65280&_)>>>8|(255&_)<<8)>>>1}var k=function(e,r,t){for(var n=e.length,o=0,a=new S(r);o<n;++o)++a[e[o]-1];var c,s=new S(r);for(o=0;o<r;++o)s[o]=s[o-1]+a[o-1]<<1;if(t){c=new S(1<<r);var f=15-r;for(o=0;o<n;++o)if(e[o])for(var i=o<<4|e[o],u=r-e[o],v=s[e[o]-1]++<<u,l=v|(1<<u)-1;v<=l;++v)c[A[v]>>>f]=i}else for(c=new S(n),o=0;o<n;++o)c[o]=A[s[e[o]-1]++]>>>15-e[o];return c},L=new E(288);for(N=0;N<144;++N)L[N]=8;for(N=144;N<256;++N)L[N]=9;for(N=256;N<280;++N)L[N]=7;for(N=280;N<288;++N)L[N]=8;var U=new E(32);for(N=0;N<32;++N)U[N]=5;var $=k(L,9,0),F=k(U,5,0),H=function(e){return(e/8>>0)+(7&e&&1)},J=function(e,r,t){(null==r||r<0)&&(r=0),(null==t||t>e.length)&&(t=e.length);var n=new(e instanceof S?S:e instanceof D?D:E)(t-r);return n.set(e.subarray(r,t)),n},X=function(e,r,t){t<<=7&r;var n=r/8>>0;e[n]|=t,e[n+1]|=t>>>8},V=function(e,r,t){t<<=7&r;var n=r/8>>0;e[n]|=t,e[n+1]|=t>>>8,e[n+2]|=t>>>16},B=function(e,r){for(var t=[],n=0;n<e.length;++n)e[n]&&t.push({s:n,f:e[n]});var o=t.length,a=t.slice();if(!o)return[new E(0),0];if(1==o){var c=new E(t[0].s+1);return c[t[0].s]=1,[c,1]}t.sort((function(e,r){return e.f-r.f})),t.push({s:-1,f:25001});var s=t[0],f=t[1],i=0,u=1,v=2;for(t[0]={s:-1,f:s.f+f.f,l:s,r:f};u!=o-1;)s=t[t[i].f<t[v].f?i++:v++],f=t[i!=u&&t[i].f<t[v].f?i++:v++],t[u++]={s:-1,f:s.f+f.f,l:s,r:f};var l=a[0].s;for(n=1;n<o;++n)a[n].s>l&&(l=a[n].s);var h=new S(l+1),g=G(t[u-1],h,0);if(g>r){n=0;var m=0,p=g-r,d=1<<p;for(a.sort((function(e,r){return h[r.s]-h[e.s]||e.f-r.f}));n<o;++n){var w=a[n].s;if(!(h[w]>r))break;m+=d-(1<<g-h[w]),h[w]=r}for(m>>>=p;m>0;){var y=a[n].s;h[y]<r?m-=1<<r-h[y]++-1:++n}for(;n>=0&&m;--n){var b=a[n].s;h[b]==r&&(--h[b],++m)}g=r}return[new E(h),g]},G=function(e,r,t){return-1==e.s?Math.max(G(e.l,r,t+1),G(e.r,r,t+1)):r[e.s]=t},z=function(e){for(var r=e.length;r&&!e[--r];);for(var t=new S(++r),n=0,o=e[0],a=1,c=function(e){t[n++]=e},s=1;s<=r;++s)if(e[s]==o&&s!=r)++a;else{if(!o&&a>2){for(;a>138;a-=138)c(32754);a>2&&(c(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(c(o),--a;a>6;a-=6)c(8304);a>2&&(c(a-3<<5|8208),a=0)}for(;a--;)c(o);a=1,o=e[s]}return[t.subarray(0,n),r]},K=function(e,r){for(var t=0,n=0;n<r.length;++n)t+=e[n]*r[n];return t},Q=function(e,r,t){var n=t.length,o=H(r+2);e[o]=255&n,e[o+1]=n>>>8,e[o+2]=255^e[o],e[o+3]=255^e[o+1];for(var a=0;a<n;++a)e[o+a+4]=t[a];return 8*(o+4+n)},W=function(e,r,t,n,o,a,c,s,f,i,u){X(r,u++,t),++o[256];for(var v=B(o,15),l=v[0],h=v[1],g=B(a,15),m=g[0],p=g[1],d=z(l),w=d[0],y=d[1],b=z(m),O=b[0],E=b[1],D=new S(19),x=0;x<w.length;++x)D[31&w[x]]++;for(x=0;x<O.length;++x)D[31&O[x]]++;for(var C=B(D,7),I=C[0],T=C[1],R=19;R>4&&!I[j[R-1]];--R);var q,A,N,_,H=i+5<<3,J=K(o,L)+K(a,U)+c,G=K(o,l)+K(a,m)+c+14+3*R+K(D,I)+(2*D[16]+3*D[17]+7*D[18]);if(H<=J&&H<=G)return Q(r,u,e.subarray(f,f+i));if(X(r,u,1+(G<J)),u+=2,G<J){q=k(l,h,0),A=l,N=k(m,p,0),_=m;var W=k(I,T,0);X(r,u,y-257),X(r,u+5,E-1),X(r,u+10,R-4),u+=14;for(x=0;x<R;++x)X(r,u+3*x,I[j[x]]);u+=3*R;for(var Y=[w,O],Z=0;Z<2;++Z){var ee=Y[Z];for(x=0;x<ee.length;++x){var re=31&ee[x];X(r,u,W[re]),u+=I[re],re>15&&(X(r,u,ee[x]>>>5&127),u+=ee[x]>>>12)}}}else q=$,A=L,N=F,_=U;for(x=0;x<s;++x)if(n[x]>255){re=n[x]>>>18&31;V(r,u,q[re+257]),u+=A[re+257],re>7&&(X(r,u,n[x]>>>23&31),u+=M[re]);var te=31&n[x];V(r,u,N[te]),u+=_[te],te>3&&(V(r,u,n[x]>>>5&8191),u+=P[te])}else V(r,u,q[n[x]]),u+=A[n[x]];return V(r,u,q[256]),u+A[256]},Y=new D([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Z=new E(0),ee=function(e,r,t,n,o){return function(e,r,t,n,o,a){var c=e.length,s=new E(n+c+5*(1+Math.floor(c/7e3))+o),f=s.subarray(n,s.length-o),i=0;if(!r||c<8)for(var u=0;u<=c;u+=65535){var v=u+65535;v<c?i=Q(f,i,e.subarray(u,v)):(f[u]=a,i=Q(f,i,e.subarray(u,c)))}else{for(var l=Y[r-1],h=l>>>13,g=8191&l,m=(1<<t)-1,p=new S(32768),d=new S(m+1),w=Math.ceil(t/3),y=2*w,b=function(r){return(e[r]^e[r+1]<<w^e[r+2]<<y)&m},O=new D(25e3),j=new S(288),x=new S(32),C=0,I=0,R=(u=0,0),A=0,N=0;u<c;++u){var _=b(u),k=32767&u,L=d[_];if(p[k]=L,d[_]=k,A<=u){var U=c-u;if((C>7e3||R>24576)&&U>423){i=W(e,f,0,O,j,x,I,R,N,u-N,i),R=C=I=0,N=u;for(var $=0;$<286;++$)j[$]=0;for($=0;$<30;++$)x[$]=0}var F=2,X=0,V=g,B=k-L&32767;if(U>2&&_==b(u-B))for(var G=Math.min(h,U)-1,z=Math.min(32767,u),K=Math.min(258,U);B<=z&&--V&&k!=L;){if(e[u+F]==e[u+F-B]){for(var ee=0;ee<K&&e[u+ee]==e[u+ee-B];++ee);if(ee>F){if(F=ee,X=B,ee>G)break;var re=Math.min(B,ee-2),te=0;for($=0;$<re;++$){var ne=u-B+$+32768&32767,oe=ne-p[ne]+32768&32767;oe>te&&(te=oe,L=ne)}}}B+=(k=L)-(L=p[k])+32768&32767}if(X){O[R++]=268435456|T[F]<<18|q[X];var ae=31&T[F],ce=31&q[X];I+=M[ae]+P[ce],++j[257+ae],++x[ce],A=u+F,++C}else O[R++]=e[u],++j[e[u]]}}i=W(e,f,a,O,j,x,I,R,N,u-N,i),a||(i=Q(f,i,Z))}return J(s,0,n+H(i)+o)}(e,null==r.level?6:r.level,null==r.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+r.mem,t,n,!o)};function re(e,r){void 0===r&&(r={});var t=function(){var e=1,r=0;return{p:function(t){for(var n=e,o=r,a=t.length,c=0;c!=a;){for(var s=Math.min(c+5552,a);c<s;++c)o+=n+=t[c];n%=65521,o%=65521}e=n,r=o},d:function(){return(e>>>8<<16|(255&r)<<8|r>>>8)+2*((255&e)<<23)}}}();t.p(e);var n=ee(e,r,2,4);return function(e,r){var t=r.level,n=0==t?0:t<6?1:9==t?3:2;e[0]=120,e[1]=n<<6|(n?32-2*n:1)}(n,r),function(e,r,t){for(;t;++r)e[r]=t,t>>>=8}(n,n.length-4,t.d()),n}const te=e=>{const r=Object.assign(Object.assign({},e),{v:"v1"});return function(e,r){var t="";if(!r&&"undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);for(var n=0;n<e.length;){var o=e[n++];o<128||r?t+=String.fromCharCode(o):o<224?t+=String.fromCharCode((31&o)<<6|63&e[n++]):o<240?t+=String.fromCharCode((15&o)<<12|(63&e[n++])<<6|63&e[n++]):(o=((15&o)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536,t+=String.fromCharCode(55296|o>>10,56320|1023&o))}return t}(re(function(e,r){var t=e.length;if(!r&&"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);for(var n=new E(e.length+(e.length>>>1)),o=0,a=function(e){n[o++]=e},c=0;c<t;++c){if(o+5>n.length){var s=new E(o+8+(t-c<<1));s.set(n),n=s}var f=e.charCodeAt(c);f<128||r?a(f):f<2048?(a(192|f>>>6),a(128|63&f)):f>55295&&f<57344?(a(240|(f=65536+(1047552&f)|1023&e.charCodeAt(++c))>>>18),a(128|f>>>12&63),a(128|f>>>6&63),a(128|63&f)):(a(224|f>>>12),a(128|f>>>6&63),a(128|63&f))}return J(n,0,o)}(JSON.stringify(r))),!0)};function ne(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var ae=function(e,r,t){var n=e.list,o=e.$msgID,u=e.cacheID,v=e.param,l=e.baseUrl,h=e.minEc,g=e.needSend,m=void 0===g||g,p="string"==typeof n?JSON.parse(n):n;if(t=t||te(p),m){var d=p[0]||{},w=p[p.length-1]||{},y=d.event?d.event.timestamp:d.ts?d.ts:"",b=w.event?w.event.timestamp:w.ts?w.ts:"",E=t.length>=5e6,S=function(e){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e5,t=[],n=Math.ceil(e.length/r),o=0;o<n;o++)t.push({content:e.slice(0,r),idx:o}),e=e.slice(r);return t}(t,8e4),D=u;Promise.all(S.map((function(e,r){return new Promise((function(t,n){var o="{spID=".concat(r,",gID=").concat(D,",len=").concat(S.length,"}"),a=oe(oe({},v),{},{logTime:y,logEndTime:b,content:o+e.content});O({url:"".concat(l).concat("16163/saveLogInfo?_fxpcqlniredt"),config:a,async:!0}).then((function(e){0===e.rc?t(e):!function(e){return e&&e.ResponseStatus&&e.ResponseStatus.Errors&&e.ResponseStatus.Errors.some((function(e){return"FXD302000"===e.ErrorCode}))}(e)?n(new Error("rc: ".concat(e.rc))):n({state:f})})).catch((function(e){return n(e)}))}))}))).then((function(e){r({resArr:e,state:a,$msgID:o,cacheID:u,minEc:h})})).catch((function(e){if(e.state===f)return r({state:f,$msgID:o,cacheID:u,minEc:h,content:t});r({state:E?s:c,$msgID:o,cacheID:u,minEc:h,err:{message:e.message,stack:e.stack}})}))}else r({state:i,$msgID:o,cacheID:u,minEc:h,content:t})};self.addEventListener("message",(function(e){ae(e.data,self.postMessage)}))})()})();',"Worker",void 0,void 0)}var O=Uint8Array,R=Uint16Array,x=Uint32Array,M=new O([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),N=new O([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),D=new O([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),L=function(e,t){for(var n=new R(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var o=new x(n[30]);for(r=1;r<30;++r)for(var i=n[r];i<n[r+1];++i)o[i]=i-n[r]<<5|r;return[n,o]},_=L(M,2),F=_[0],P=_[1];F[28]=258,P[258]=28;for(var j=L(N,0),U=j[0],Z=j[1],B=new R(32768),G=0;G<32768;++G){var V=(43690&G)>>>1|(21845&G)<<1;V=(61680&(V=(52428&V)>>>2|(13107&V)<<2))>>>4|(3855&V)<<4,B[G]=((65280&V)>>>8|(255&V)<<8)>>>1}var W=function(e,t,n){for(var r=e.length,o=0,i=new R(t);o<r;++o)++i[e[o]-1];var a,s=new R(t);for(o=0;o<t;++o)s[o]=s[o-1]+i[o-1]<<1;if(n){a=new R(1<<t);var c=15-t;for(o=0;o<r;++o)if(e[o])for(var u=o<<4|e[o],l=t-e[o],d=s[e[o]-1]++<<l,h=d|(1<<l)-1;d<=h;++d)a[B[d]>>>c]=u}else for(a=new R(r),o=0;o<r;++o)a[o]=B[s[e[o]-1]++]>>>15-e[o];return a},K=new O(288);for(G=0;G<144;++G)K[G]=8;for(G=144;G<256;++G)K[G]=9;for(G=256;G<280;++G)K[G]=7;for(G=280;G<288;++G)K[G]=8;var H=new O(32);for(G=0;G<32;++G)H[G]=5;var Y=W(K,9,0),q=W(K,9,1),X=W(H,5,0),J=W(H,5,1),z=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},Q=function(e,t,n){var r=t/8>>0;return(e[r]|e[r+1]<<8)>>>(7&t)&n},$=function(e,t){var n=t/8>>0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>>(7&t)},ee=function(e){return(e/8>>0)+(7&e&&1)},te=function(e,t,n){(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length);var r=new(e instanceof R?R:e instanceof x?x:O)(n-t);return r.set(e.subarray(t,n)),r},ne=function(e,t,n){n<<=7&t;var r=t/8>>0;e[r]|=n,e[r+1]|=n>>>8},re=function(e,t,n){n<<=7&t;var r=t/8>>0;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},oe=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var o=n.length,i=n.slice();if(!o)return[new O(0),0];if(1==o){var a=new O(n[0].s+1);return a[n[0].s]=1,[a,1]}n.sort((function(e,t){return e.f-t.f})),n.push({s:-1,f:25001});var s=n[0],c=n[1],u=0,l=1,d=2;for(n[0]={s:-1,f:s.f+c.f,l:s,r:c};l!=o-1;)s=n[n[u].f<n[d].f?u++:d++],c=n[u!=l&&n[u].f<n[d].f?u++:d++],n[l++]={s:-1,f:s.f+c.f,l:s,r:c};var h=i[0].s;for(r=1;r<o;++r)i[r].s>h&&(h=i[r].s);var f=new R(h+1),p=ie(n[l-1],f,0);if(p>t){r=0;var g=0,m=p-t,v=1<<m;for(i.sort((function(e,t){return f[t.s]-f[e.s]||e.f-t.f}));r<o;++r){var y=i[r].s;if(!(f[y]>t))break;g+=v-(1<<p-f[y]),f[y]=t}for(g>>>=m;g>0;){var I=i[r].s;f[I]<t?g-=1<<t-f[I]++-1:++r}for(;r>=0&&g;--r){var C=i[r].s;f[C]==t&&(--f[C],++g)}p=t}return[new O(f),p]},ie=function(e,t,n){return-1==e.s?Math.max(ie(e.l,t,n+1),ie(e.r,t,n+1)):t[e.s]=n},ae=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new R(++t),r=0,o=e[0],i=1,a=function(e){n[r++]=e},s=1;s<=t;++s)if(e[s]==o&&s!=t)++i;else{if(!o&&i>2){for(;i>138;i-=138)a(32754);i>2&&(a(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(a(o),--i;i>6;i-=6)a(8304);i>2&&(a(i-3<<5|8208),i=0)}for(;i--;)a(o);i=1,o=e[s]}return[n.subarray(0,r),t]},se=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},ce=function(e,t,n){var r=n.length,o=ee(t+2);e[o]=255&r,e[o+1]=r>>>8,e[o+2]=255^e[o],e[o+3]=255^e[o+1];for(var i=0;i<r;++i)e[o+i+4]=n[i];return 8*(o+4+r)},ue=function(e,t,n,r,o,i,a,s,c,u,l){ne(t,l++,n),++o[256];for(var d=oe(o,15),h=d[0],f=d[1],p=oe(i,15),g=p[0],m=p[1],v=ae(h),y=v[0],I=v[1],C=ae(g),b=C[0],w=C[1],S=new R(19),E=0;E<y.length;++E)S[31&y[E]]++;for(E=0;E<b.length;++E)S[31&b[E]]++;for(var A=oe(S,7),k=A[0],T=A[1],O=19;O>4&&!k[D[O-1]];--O);var x,L,_,F,P=u+5<<3,j=se(o,K)+se(i,H)+a,U=se(o,h)+se(i,g)+a+14+3*O+se(S,k)+(2*S[16]+3*S[17]+7*S[18]);if(P<=j&&P<=U)return ce(t,l,e.subarray(c,c+u));if(ne(t,l,1+(U<j)),l+=2,U<j){x=W(h,f,0),L=h,_=W(g,m,0),F=g;var Z=W(k,T,0);ne(t,l,I-257),ne(t,l+5,w-1),ne(t,l+10,O-4),l+=14;for(E=0;E<O;++E)ne(t,l+3*E,k[D[E]]);l+=3*O;for(var B=[y,b],G=0;G<2;++G){var V=B[G];for(E=0;E<V.length;++E){var q=31&V[E];ne(t,l,Z[q]),l+=k[q],q>15&&(ne(t,l,V[E]>>>5&127),l+=V[E]>>>12)}}}else x=Y,L=K,_=X,F=H;for(E=0;E<s;++E)if(r[E]>255){q=r[E]>>>18&31;re(t,l,x[q+257]),l+=L[q+257],q>7&&(ne(t,l,r[E]>>>23&31),l+=M[q]);var J=31&r[E];re(t,l,_[J]),l+=F[J],J>3&&(re(t,l,r[E]>>>5&8191),l+=N[J])}else re(t,l,x[r[E]]),l+=L[r[E]];return re(t,l,x[256]),l+L[256]},le=new x([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),de=new O(0),he=function(e,t,n,r,o){return function(e,t,n,r,o,i){var a=e.length,s=new O(r+a+5*(1+Math.floor(a/7e3))+o),c=s.subarray(r,s.length-o),u=0;if(!t||a<8)for(var l=0;l<=a;l+=65535){var d=l+65535;d<a?u=ce(c,u,e.subarray(l,d)):(c[l]=i,u=ce(c,u,e.subarray(l,a)))}else{for(var h=le[t-1],f=h>>>13,p=8191&h,g=(1<<n)-1,m=new R(32768),v=new R(g+1),y=Math.ceil(n/3),I=2*y,C=function(t){return(e[t]^e[t+1]<<y^e[t+2]<<I)&g},b=new x(25e3),w=new R(288),S=new R(32),E=0,A=0,k=(l=0,0),T=0,D=0;l<a;++l){var L=C(l),_=32767&l,F=v[L];if(m[_]=F,v[L]=_,T<=l){var j=a-l;if((E>7e3||k>24576)&&j>423){u=ue(e,c,0,b,w,S,A,k,D,l-D,u),k=E=A=0,D=l;for(var U=0;U<286;++U)w[U]=0;for(U=0;U<30;++U)S[U]=0}var B=2,G=0,V=p,W=_-F&32767;if(j>2&&L==C(l-W))for(var K=Math.min(f,j)-1,H=Math.min(32767,l),Y=Math.min(258,j);W<=H&&--V&&_!=F;){if(e[l+B]==e[l+B-W]){for(var q=0;q<Y&&e[l+q]==e[l+q-W];++q);if(q>B){if(B=q,G=W,q>K)break;var X=Math.min(W,q-2),J=0;for(U=0;U<X;++U){var z=l-W+U+32768&32767,Q=z-m[z]+32768&32767;Q>J&&(J=Q,F=z)}}}W+=(_=F)-(F=m[_])+32768&32767}if(G){b[k++]=268435456|P[B]<<18|Z[G];var $=31&P[B],ne=31&Z[G];A+=M[$]+N[ne],++w[257+$],++S[ne],T=l+B,++E}else b[k++]=e[l],++w[e[l]]}}u=ue(e,c,i,b,w,S,A,k,D,l-D,u),i||(u=ce(c,u,de))}return te(s,0,r+ee(u)+o)}(e,null==t.level?6:t.level,null==t.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+t.mem,n,r,!o)};function fe(e,t){void 0===t&&(t={});var n=function(){var e=1,t=0;return{p:function(n){for(var r=e,o=t,i=n.length,a=0;a!=i;){for(var s=Math.min(a+5552,i);a<s;++a)o+=r+=n[a];r%=65521,o%=65521}e=r,t=o},d:function(){return(e>>>8<<16|(255&t)<<8|t>>>8)+2*((255&e)<<23)}}}();n.p(e);var r=he(e,t,2,4);return function(e,t){var n=t.level,r=0==n?0:n<6?1:9==n?3:2;e[0]=120,e[1]=r<<6|(r?32-2*r:1)}(r,t),function(e,t,n){for(;n;++t)e[t]=n,n>>>=8}(r,r.length-4,n.d()),r}function pe(e,t){return function(e,t,n){var r=e.length,o=!t||n,i=!n||n.i;n||(n={}),t||(t=new O(3*r));var a=function(e){var n=t.length;if(e>n){var r=new O(Math.max(2*n,e));r.set(t),t=r}},s=n.f||0,c=n.p||0,u=n.b||0,l=n.l,d=n.d,h=n.m,f=n.n,p=8*r;do{if(!l){n.f=s=Q(e,c,1);var g=Q(e,c+1,3);if(c+=3,!g){var m=e[(T=ee(c)+4)-4]|e[T-3]<<8,v=T+m;if(v>r){if(i)throw"unexpected EOF";break}o&&a(u+m),t.set(e.subarray(T,v),u),n.b=u+=m,n.p=c=8*v;continue}if(1==g)l=q,d=J,h=9,f=5;else{if(2!=g)throw"invalid block type";var y=Q(e,c,31)+257,I=Q(e,c+10,15)+4,C=y+Q(e,c+5,31)+1;c+=14;for(var b=new O(C),w=new O(19),S=0;S<I;++S)w[D[S]]=Q(e,c+3*S,7);c+=3*I;var E=z(w),A=(1<<E)-1;if(!i&&c+C*(E+7)>p)break;var k=W(w,E,1);for(S=0;S<C;){var T,R=k[Q(e,c,A)];if(c+=15&R,(T=R>>>4)<16)b[S++]=T;else{var x=0,L=0;for(16==T?(L=3+Q(e,c,3),c+=2,x=b[S-1]):17==T?(L=3+Q(e,c,7),c+=3):18==T&&(L=11+Q(e,c,127),c+=7);L--;)b[S++]=x}}var _=b.subarray(0,y),P=b.subarray(y);h=z(_),f=z(P),l=W(_,h,1),d=W(P,f,1)}if(c>p)throw"unexpected EOF"}o&&a(u+131072);for(var j=(1<<h)-1,Z=(1<<f)-1,B=h+f+18;i||c+B<p;){var G=(x=l[$(e,c)&j])>>>4;if((c+=15&x)>p)throw"unexpected EOF";if(!x)throw"invalid length/literal";if(G<256)t[u++]=G;else{if(256==G){l=null;break}var V=G-254;if(G>264){var K=M[S=G-257];V=Q(e,c,(1<<K)-1)+F[S],c+=K}var H=d[$(e,c)&Z],Y=H>>>4;if(!H)throw"invalid distance";if(c+=15&H,P=U[Y],Y>3&&(K=N[Y],P+=$(e,c)&(1<<K)-1,c+=K),c>p)throw"unexpected EOF";o&&a(u+131072);for(var X=u+V;u<X;u+=4)t[u]=t[u-P],t[u+1]=t[u+1-P],t[u+2]=t[u+2-P],t[u+3]=t[u+3-P];u=X}}n.l=l,n.p=c,n.b=u,l&&(s=1,n.m=h,n.d=d,n.n=f)}while(!s);return u==t.length?t:te(t,0,u)}((function(e){if(8!=(15&e[0])||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(32&e[1])throw"invalid zlib data: preset dictionaries not supported"}(e),e.subarray(2,-4)),t)}function ge(e,t){var n=e.length;if(!t&&"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);for(var r=new O(e.length+(e.length>>>1)),o=0,i=function(e){r[o++]=e},a=0;a<n;++a){if(o+5>r.length){var s=new O(o+8+(n-a<<1));s.set(r),r=s}var c=e.charCodeAt(a);c<128||t?i(c):c<2048?(i(192|c>>>6),i(128|63&c)):c>55295&&c<57344?(i(240|(c=65536+(1047552&c)|1023&e.charCodeAt(++a))>>>18),i(128|c>>>12&63),i(128|c>>>6&63),i(128|63&c)):(i(224|c>>>12),i(128|c>>>6&63),i(128|63&c))}return te(r,0,o)}function me(e,t){var n="";if(!t&&"undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);for(var r=0;r<e.length;){var o=e[r++];o<128||t?n+=String.fromCharCode(o):o<224?n+=String.fromCharCode((31&o)<<6|63&e[r++]):o<240?n+=String.fromCharCode((15&o)<<12|(63&e[r++])<<6|63&e[r++]):(o=((15&o)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++])-65536,n+=String.fromCharCode(55296|o>>10,56320|1023&o))}return n}const ve="v1",ye=e=>{const t=Object.assign(Object.assign({},e),{v:ve});return me(fe(ge(JSON.stringify(t))),!0)},Ie=e=>{if("string"!=typeof e)return e;try{const t=JSON.parse(e);if(t.timestamp)return t}catch(e){}try{const t=JSON.parse(me(pe(ge(e,!0))));if(t.v===ve)return t;throw new Error(`These events were packed with packer ${t.v} which is incompatible with current packer ${ve}.`)}catch(e){throw new Error("Unknown data format.")}};function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var be,we={currentKey:"",dataMap:{},$currentCache:null,init:function(e){we.$currentCache=we.$create(),we.$getKeyList().slice(0,3).map((function(e){return we.dataMap[e]=new Se(e)})).map((function(t){var n=t.getList();n.length?e&&e(n,t.key):(we.remove(t.key,"",!0),delete we.dataMap[t.key])})),we.$updateKey(we.currentKey)},remove:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=we.dataMap[e];if(r){if(n||r.remove(t))try{y.t.setItem(g.H3.CACHE_KEY_LIST,we.$getKeyList().filter((function(t){return t!==e})).join(","))}catch(e){(0,p.r5)(e,{type:g.JZ})}}else{var o="移除的storage不存在";(0,p.r5)(new Error(o),{type:g.RC})}},addCache:function(e,t){return!!we.$currentCache&&(we.$currentCache.addCache(e,t),!0)},save:function(e){var t=e.onSuccess,n=e.onError;if(we.$currentCache)we.$currentCache.save({onSuccess:t,onError:n});else{n&&n({message:"未初始化 cacheHelper.$currentCache"})}},getCurrentKey:function(){return we.currentKey},$getKeyList:function(){return(y.t.getItem(g.H3.CACHE_KEY_LIST)||g.H3.CACHE_KEY).split(",")},$updateKey:function(e){var t=we.$getKeyList();t.push(e);try{return y.t.setItem(g.H3.CACHE_KEY_LIST,t.join(",")),!0}catch(e){return!1}},$create:function(){var e=[g.H3.CACHE_KEY,S(),(new Date).getTime()].join("_");we.currentKey=e;var t=new Se(e);return we.dataMap[e]=t,t},removeAll:function(){Object.values(we.dataMap).forEach((function(e){return e.removeAll()}));try{y.t.setItem(g.H3.CACHE_KEY_LIST,"")}catch(e){(0,p.r5)(e,{type:g.JZ,isAll:1})}return y.t.getItem(g.H3.CACHE_KEY_LIST)}},Se=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";c()(this,e),this.key=t,this.cacheMap={};try{var n=y.t.getItem(t);if(n){var r=Ie(n);delete r.v,this.cacheMap=r}}catch(e){(0,p.r5)(e,{type:g.Vw}),y.t.removeItem(t)}}return l()(e,[{key:"getList",value:function(){var e=this;return Object.keys(this.cacheMap).map((function(t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({cacheID:t},e.cacheMap[t])}))}},{key:"addCache",value:function(e,t){this.cacheMap[e]=t}},{key:"remove",value:function(e){return!(!this.cacheMap[e]||(delete this.cacheMap[e],Object.keys(this.cacheMap).length))&&(y.t.removeItem(this.key),!0)}},{key:"save",value:function(e){var t=e.onSuccess,n=e.onError,r=-1;try{var o=ye(this.cacheMap);r=o.length,y.t.setItem(this.key,o),t&&t()}catch(e){n&&n(e,{wLength:r,sLength:(y.t.getItem(this.key)||"").length}),y.t.removeItem(this.key)}}},{key:"removeAll",value:function(){this.cacheMap={},y.t.removeItem(this.key)}}]),e}(),Ee=n(48);function Ae(e){return e.nodeType===e.ELEMENT_NODE}function ke(e){var t=null==e?void 0:e.host;return Boolean((null==t?void 0:t.shadowRoot)===e)}function Te(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function Oe(e){try{var t=e.rules||e.cssRules;return t?((n=Array.from(t).map(Re).join("")).includes(" background-clip: text;")&&!n.includes(" -webkit-background-clip: text;")&&(n=n.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),n):null}catch(e){return null}var n}function Re(e){var t=e.cssText;if(function(e){return"styleSheet"in e}(e))try{t=Oe(e.styleSheet)||t}catch(e){}return t}!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(be||(be={}));var xe=function(){function e(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}return e.prototype.getId=function(e){var t;if(!e)return-1;var n=null===(t=this.getMeta(e))||void 0===t?void 0:t.id;return null!=n?n:-1},e.prototype.getNode=function(e){return this.idNodeMap.get(e)||null},e.prototype.getIds=function(){return Array.from(this.idNodeMap.keys())},e.prototype.getMeta=function(e){return this.nodeMetaMap.get(e)||null},e.prototype.removeNodeFromMap=function(e){var t=this,n=this.getId(e);this.idNodeMap.delete(n),e.childNodes&&e.childNodes.forEach((function(e){return t.removeNodeFromMap(e)}))},e.prototype.has=function(e){return this.idNodeMap.has(e)},e.prototype.hasNode=function(e){return this.nodeMetaMap.has(e)},e.prototype.add=function(e,t){var n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)},e.prototype.replace=function(e,t){var n=this.getNode(e);if(n){var r=this.nodeMetaMap.get(n);r&&this.nodeMetaMap.set(t,r)}this.idNodeMap.set(e,t)},e.prototype.reset=function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap},e}();function Me(e){var t=e.maskInputOptions,n=e.tagName,r=e.type,o=e.value,i=e.maskInputFn,a=o||"";return(t[n.toLowerCase()]||t[r])&&(a=i?i(a):"*".repeat(a.length)),a}var Ne="__rrweb_original__";var De,Le,_e=1,Fe=new RegExp("[^a-z0-9-_:]");function Pe(){return _e++}var je=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,Ue=/^(?!www\.|(?:http|ftp)s?:\/\/|[A-Za-z]:\\|\/\/|#).*/,Ze=/^(data:)([^,]*),(.*)/i;function Be(e,t){return(e||"").replace(je,(function(e,n,r,o,i,a){var s,c=r||i||a,u=n||o||"";if(!c)return e;if(!Ue.test(c))return"url(".concat(u).concat(c).concat(u,")");if(Ze.test(c))return"url(".concat(u).concat(c).concat(u,")");if("/"===c[0])return"url(".concat(u).concat((s=t,(s.indexOf("//")>-1?s.split("/").slice(0,3).join("/"):s.split("/")[0]).split("?")[0]+c)).concat(u,")");var l=t.split("/"),d=c.split("/");l.pop();for(var h=0,f=d;h<f.length;h++){var p=f[h];"."!==p&&(".."===p?l.pop():l.push(p))}return"url(".concat(u).concat(l.join("/")).concat(u,")")}))}var Ge=/^[^ \t\n\r\u000c]+/,Ve=/^[, \t\n\r\u000c]+/;function We(e,t){if(!t||""===t.trim())return t;var n=e.createElement("a");return n.href=t,n.href}function Ke(e){return Boolean("svg"===e.tagName||e.ownerSVGElement)}function He(){var e=document.createElement("a");return e.href="",e.href}function Ye(e,t,n,r){return"src"===n||"href"===n&&r&&("use"!==t||"#"!==r[0])||"xlink:href"===n&&r&&"#"!==r[0]?We(e,r):"background"!==n||!r||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===n&&r?function(e,t){if(""===t.trim())return t;var n=0;function r(e){var r,o=e.exec(t.substring(n));return o?(r=o[0],n+=r.length,r):""}for(var o=[];r(Ve),!(n>=t.length);){var i=r(Ge);if(","===i.slice(-1))i=We(e,i.substring(0,i.length-1)),o.push(i);else{var a="";i=We(e,i);for(var s=!1;;){var c=t.charAt(n);if(""===c){o.push((i+a).trim());break}if(s)")"===c&&(s=!1);else{if(","===c){n+=1,o.push((i+a).trim());break}"("===c&&(s=!0)}a+=c,n+=1}}}return o.join(", ")}(e,r):"style"===n&&r?Be(r,He()):"object"===t&&"data"===n&&r?We(e,r):r:We(e,r)}function qe(e,t,n){if(!e)return!1;if(e.nodeType!==e.ELEMENT_NODE)return!!n&&qe(e.parentNode,t,n);for(var r=e.classList.length;r--;){var o=e.classList[r];if(t.test(o))return!0}return!!n&&qe(e.parentNode,t,n)}function Xe(e,t,n){var r=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(null===r)return!1;if("string"==typeof t){if(r.classList.contains(t))return!0;if(r.closest(".".concat(t)))return!0}else if(qe(r,t,!0))return!0;if(n){if(r.matches(n))return!0;if(r.closest(n))return!0}return!1}function Je(e,t){var n=t.doc,r=t.mirror,o=t.blockClass,i=t.blockSelector,a=t.maskTextClass,s=t.maskTextSelector,c=t.inlineStylesheet,u=t.maskInputOptions,l=void 0===u?{}:u,d=t.maskTextFn,h=t.maskInputFn,f=t.dataURLOptions,p=void 0===f?{}:f,g=t.inlineImages,m=t.recordCanvas,v=t.keepIframeSrcFn,y=t.newlyAddedElement,I=void 0!==y&&y,C=function(e,t){if(!t.hasNode(e))return;var n=t.getId(e);return 1===n?void 0:n}(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:be.Document,childNodes:[],compatMode:e.compatMode}:{type:be.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:be.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:C};case e.ELEMENT_NODE:return function(e,t){for(var n=t.doc,r=t.blockClass,o=t.blockSelector,i=t.inlineStylesheet,a=t.maskInputOptions,s=void 0===a?{}:a,c=t.maskInputFn,u=t.dataURLOptions,l=void 0===u?{}:u,d=t.inlineImages,h=t.recordCanvas,f=t.keepIframeSrcFn,p=t.newlyAddedElement,g=void 0!==p&&p,m=t.rootId,v=function(e,t,n){if("string"==typeof t){if(e.classList.contains(t))return!0}else for(var r=e.classList.length;r--;){var o=e.classList[r];if(t.test(o))return!0}return!!n&&e.matches(n)}(e,r,o),y=function(e){if(e instanceof HTMLFormElement)return"form";var t=e.tagName.toLowerCase().trim();return Fe.test(t)?"div":t}(e),I={},C=e.attributes.length,b=0;b<C;b++){var w=e.attributes[b];I[w.name]=Ye(n,y,w.name,w.value)}if("link"===y&&i){var S=Array.from(n.styleSheets).find((function(t){return t.href===e.href})),E=null;S&&(E=Oe(S)),E&&(delete I.rel,delete I.href,I._cssText=Be(E,S.href))}if("style"===y&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){(E=Oe(e.sheet))&&(I._cssText=Be(E,He()))}if("input"===y||"textarea"===y||"select"===y){var A=e.value,k=e.checked;"radio"!==I.type&&"checkbox"!==I.type&&"submit"!==I.type&&"button"!==I.type&&A?I.value=Me({type:I.type,tagName:y,value:A,maskInputOptions:s,maskInputFn:c}):k&&(I.checked=k)}"option"===y&&(e.selected&&!s.select?I.selected=!0:delete I.selected);if("canvas"===y&&h)if("2d"===e.__context)(function(e){var t=e.getContext("2d");if(!t)return!0;for(var n=0;n<e.width;n+=50)for(var r=0;r<e.height;r+=50){var o=t.getImageData,i=Ne in o?o[Ne]:o;if(new Uint32Array(i.call(t,n,r,Math.min(50,e.width-n),Math.min(50,e.height-r)).data.buffer).some((function(e){return 0!==e})))return!1}return!0})(e)||(I.rr_dataURL=e.toDataURL(l.type,l.quality));else if(!("__context"in e)){var T=e.toDataURL(l.type,l.quality),O=document.createElement("canvas");O.width=e.width,O.height=e.height,T!==O.toDataURL(l.type,l.quality)&&(I.rr_dataURL=T)}if("img"===y&&d){De||(De=n.createElement("canvas"),Le=De.getContext("2d"));var R=e,x=R.crossOrigin;R.crossOrigin="anonymous";var M=function(){try{De.width=R.naturalWidth,De.height=R.naturalHeight,Le.drawImage(R,0,0),I.rr_dataURL=De.toDataURL(l.type,l.quality)}catch(e){}x?I.crossOrigin=x:R.removeAttribute("crossorigin")};R.complete&&0!==R.naturalWidth?M():R.onload=M}"audio"!==y&&"video"!==y||(I.rr_mediaState=e.paused?"paused":"played",I.rr_mediaCurrentTime=e.currentTime);g||(e.scrollLeft&&(I.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(I.rr_scrollTop=e.scrollTop));if(v){var N=e.getBoundingClientRect(),D=N.width,L=N.height;I={class:I.class,rr_width:"".concat(D,"px"),rr_height:"".concat(L,"px")}}"iframe"!==y||f(I.src)||(e.contentDocument||(I.rr_src=I.src),delete I.src);return{type:be.Element,tagName:y,attributes:I,childNodes:[],isSVG:Ke(e)||void 0,needBlock:v,rootId:m}}(e,{doc:n,blockClass:o,blockSelector:i,inlineStylesheet:c,maskInputOptions:l,maskInputFn:h,dataURLOptions:p,inlineImages:g,recordCanvas:m,keepIframeSrcFn:v,newlyAddedElement:I,rootId:C});case e.TEXT_NODE:return function(e,t){var n,r=t.maskTextClass,o=t.maskTextSelector,i=t.maskTextFn,a=t.rootId,s=e.parentNode&&e.parentNode.tagName,c=e.textContent,u="STYLE"===s||void 0,l="SCRIPT"===s||void 0;if(u&&c){try{e.nextSibling||e.previousSibling||(null===(n=e.parentNode.sheet)||void 0===n?void 0:n.cssRules)&&(c=(d=e.parentNode.sheet).cssRules?Array.from(d.cssRules).map((function(e){return e.cssText||""})).join(""):"")}catch(e){}c=Be(c,He())}var d;l&&(c="SCRIPT_PLACEHOLDER");!u&&!l&&c&&Xe(e,r,o)&&(c=i?i(c):c.replace(/[\S]/g,"*"));return{type:be.Text,textContent:c||"",isStyle:u,rootId:a}}(e,{maskTextClass:a,maskTextSelector:s,maskTextFn:d,rootId:C});case e.CDATA_SECTION_NODE:return{type:be.CDATA,textContent:"",rootId:C};case e.COMMENT_NODE:return{type:be.Comment,textContent:e.textContent||"",rootId:C};default:return!1}}function ze(e){return void 0===e?"":e.toLowerCase()}function Qe(e,t){var n,r=t.doc,o=t.mirror,i=t.blockClass,a=t.blockSelector,s=t.maskTextClass,c=t.maskTextSelector,u=t.skipChild,l=void 0!==u&&u,d=t.inlineStylesheet,h=void 0===d||d,f=t.maskInputOptions,p=void 0===f?{}:f,g=t.maskTextFn,m=t.maskInputFn,v=t.slimDOMOptions,y=t.dataURLOptions,I=void 0===y?{}:y,C=t.inlineImages,b=void 0!==C&&C,w=t.recordCanvas,S=void 0!==w&&w,E=t.onSerialize,A=t.onIframeLoad,k=t.iframeLoadTimeout,T=void 0===k?5e3:k,O=t.onStylesheetLoad,R=t.stylesheetLoadTimeout,x=void 0===R?5e3:R,M=t.keepIframeSrcFn,N=void 0===M?function(){return!1}:M,D=t.newlyAddedElement,L=void 0!==D&&D,_=t.preserveWhiteSpace,F=void 0===_||_,P=Je(e,{doc:r,mirror:o,blockClass:i,blockSelector:a,maskTextClass:s,maskTextSelector:c,inlineStylesheet:h,maskInputOptions:p,maskTextFn:g,maskInputFn:m,dataURLOptions:I,inlineImages:b,recordCanvas:S,keepIframeSrcFn:N,newlyAddedElement:L});if(!P)return null;n=o.hasNode(e)?o.getId(e):!function(e,t){if(t.comment&&e.type===be.Comment)return!0;if(e.type===be.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&"preload"===e.attributes.rel&&"script"===e.attributes.as||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&e.attributes.href.endsWith(".js")))return!0;if(t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(ze(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===ze(e.attributes.name)||"icon"===ze(e.attributes.rel)||"apple-touch-icon"===ze(e.attributes.rel)||"shortcut icon"===ze(e.attributes.rel))))return!0;if("meta"===e.tagName){if(t.headMetaDescKeywords&&ze(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(ze(e.attributes.property).match(/^(og|twitter|fb):/)||ze(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===ze(e.attributes.name)))return!0;if(t.headMetaRobots&&("robots"===ze(e.attributes.name)||"googlebot"===ze(e.attributes.name)||"bingbot"===ze(e.attributes.name)))return!0;if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(t.headMetaAuthorship&&("author"===ze(e.attributes.name)||"generator"===ze(e.attributes.name)||"framework"===ze(e.attributes.name)||"publisher"===ze(e.attributes.name)||"progid"===ze(e.attributes.name)||ze(e.attributes.property).match(/^article:/)||ze(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&("google-site-verification"===ze(e.attributes.name)||"yandex-verification"===ze(e.attributes.name)||"csrf-token"===ze(e.attributes.name)||"p:domain_verify"===ze(e.attributes.name)||"verify-v1"===ze(e.attributes.name)||"verification"===ze(e.attributes.name)||"shopify-checkout-api-token"===ze(e.attributes.name)))return!0}}return!1}(P,v)&&(F||P.type!==be.Text||P.isStyle||P.textContent.replace(/^\s+|\s+$/gm,"").length)?Pe():-2;var j=Object.assign(P,{id:n});if(o.add(e,j),-2===n)return null;E&&E(e);var U=!l;if(j.type===be.Element){U=U&&!j.needBlock,delete j.needBlock;var Z=e.shadowRoot;Z&&Te(Z)&&(j.isShadowHost=!0)}if((j.type===be.Document||j.type===be.Element)&&U){v.headWhitespace&&j.type===be.Element&&"head"===j.tagName&&(F=!1);for(var B={doc:r,mirror:o,blockClass:i,blockSelector:a,maskTextClass:s,maskTextSelector:c,skipChild:l,inlineStylesheet:h,maskInputOptions:p,maskTextFn:g,maskInputFn:m,slimDOMOptions:v,dataURLOptions:I,inlineImages:b,recordCanvas:S,preserveWhiteSpace:F,onSerialize:E,onIframeLoad:A,iframeLoadTimeout:T,onStylesheetLoad:O,stylesheetLoadTimeout:x,keepIframeSrcFn:N},G=0,V=Array.from(e.childNodes);G<V.length;G++){(H=Qe(V[G],B))&&j.childNodes.push(H)}if(Ae(e)&&e.shadowRoot)for(var W=0,K=Array.from(e.shadowRoot.childNodes);W<K.length;W++){var H;(H=Qe(K[W],B))&&(Te(e.shadowRoot)&&(H.isShadow=!0),j.childNodes.push(H))}}return e.parentNode&&ke(e.parentNode)&&Te(e.parentNode)&&(j.isShadow=!0),j.type===be.Element&&"iframe"===j.tagName&&function(e,t,n){var r=e.contentWindow;if(r){var o,i=!1;try{o=r.document.readyState}catch(e){return}if("complete"===o){var a="about:blank";if(r.location.href!==a||e.src===a||""===e.src)return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}else{var s=setTimeout((function(){i||(t(),i=!0)}),n);e.addEventListener("load",(function(){clearTimeout(s),i=!0,t()}))}}}(e,(function(){var t=e.contentDocument;if(t&&A){var n=Qe(t,{doc:t,mirror:o,blockClass:i,blockSelector:a,maskTextClass:s,maskTextSelector:c,skipChild:!1,inlineStylesheet:h,maskInputOptions:p,maskTextFn:g,maskInputFn:m,slimDOMOptions:v,dataURLOptions:I,inlineImages:b,recordCanvas:S,preserveWhiteSpace:F,onSerialize:E,onIframeLoad:A,iframeLoadTimeout:T,onStylesheetLoad:O,stylesheetLoadTimeout:x,keepIframeSrcFn:N});n&&A(e,n)}}),T),j.type===be.Element&&"link"===j.tagName&&"stylesheet"===j.attributes.rel&&function(e,t,n){var r,o=!1;try{r=e.sheet}catch(e){return}if(!r){var i=setTimeout((function(){o||(t(),o=!0)}),n);e.addEventListener("load",(function(){clearTimeout(i),o=!0,t()}))}}(e,(function(){if(O){var t=Qe(e,{doc:r,mirror:o,blockClass:i,blockSelector:a,maskTextClass:s,maskTextSelector:c,skipChild:!1,inlineStylesheet:h,maskInputOptions:p,maskTextFn:g,maskInputFn:m,slimDOMOptions:v,dataURLOptions:I,inlineImages:b,recordCanvas:S,preserveWhiteSpace:F,onSerialize:E,onIframeLoad:A,iframeLoadTimeout:T,onStylesheetLoad:O,stylesheetLoadTimeout:x,keepIframeSrcFn:N});t&&O(e,t)}}),x),j}var $e=/([^\\]):hover/;new RegExp($e.source,"g");function et(e,t,n=document){const r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}let tt={map:{},getId:()=>-1,getNode:()=>null,removeNodeFromMap(){},has:()=>!1,reset(){}};function nt(e,t,n={}){let r=null,o=0;return function(...i){const a=Date.now();o||!1!==n.leading||(o=a);const s=t-(a-o),c=this;s<=0||s>t?(r&&(clearTimeout(r),r=null),o=a,e.apply(c,i)):r||!1===n.trailing||(r=setTimeout((()=>{o=!1===n.leading?0:Date.now(),r=null,e.apply(c,i)}),s))}}function rt(e,t,n,r,o=window){const i=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(e){setTimeout((()=>{n.set.call(this,e)}),0),i&&i.set&&i.set.call(this,e)}}),()=>rt(e,t,i||{},!0)}function ot(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],o=n(r);return"function"==typeof o&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch(e){return()=>{}}}function it(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function at(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function st(e,t,n,r){if(!e)return!1;const o=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(!o)return!1;if("string"==typeof t){if(o.classList.contains(t))return!0;if(r&&null!==o.closest("."+t))return!0}else if(qe(o,t,r))return!0;if(n){if(e.matches(n))return!0;if(r&&null!==o.closest(n))return!0}return!1}function ct(e,t){return-2===t.getId(e)}function ut(e,t){if(ke(e))return!1;const n=t.getId(e);return!t.has(n)||(!e.parentNode||e.parentNode.nodeType!==e.DOCUMENT_NODE)&&(!e.parentNode||ut(e.parentNode,t))}function lt(e){return Boolean(e.changedTouches)}function dt(e,t){return Boolean("IFRAME"===e.nodeName&&t.getMeta(e))}function ht(e,t){return Boolean("LINK"===e.nodeName&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&"stylesheet"===e.getAttribute("rel")&&t.getMeta(e))}function ft(e){return Boolean(null==e?void 0:e.shadowRoot)}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(tt=new Proxy(tt,{get:(e,t,n)=>Reflect.get(e,t,n)}));class pt{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(e){var t;return null!==(t=this.styleIDMap.get(e))&&void 0!==t?t:-1}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let n;return n=void 0===t?this.id++:t,this.styleIDMap.set(e,n),this.idStyleMap.set(n,e),n}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}var gt=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(gt||{}),mt=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e))(mt||{}),vt=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(vt||{}),yt=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(yt||{});function It(e){return"__ln"in e}class Ct{constructor(){this.length=0,this.head=null}get(e){if(e>=this.length)throw new Error("Position outside of list range");let t=this.head;for(let n=0;n<e;n++)t=(null==t?void 0:t.next)||null;return t}addNode(e){const t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&It(e.previousSibling)){const n=e.previousSibling.__ln.next;t.next=n,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,n&&(n.previous=t)}else if(e.nextSibling&&It(e.nextSibling)&&e.nextSibling.__ln.previous){const n=e.nextSibling.__ln.previous;t.previous=n,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,n&&(n.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;this.length++}removeNode(e){const t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next&&(t.next.previous=t.previous)):(this.head=t.next,this.head&&(this.head.previous=null)),e.__ln&&delete e.__ln,this.length--)}}const bt=(e,t)=>`${e}@${t}`;class wt{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=e=>{e.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const e=[],t=new Ct,n=e=>{let t=e,n=-2;for(;-2===n;)t=t&&t.nextSibling,n=t&&this.mirror.getId(t);return n},r=r=>{var o,i,a,s;let c=null;(null===(i=null===(o=r.getRootNode)||void 0===o?void 0:o.call(r))||void 0===i?void 0:i.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&r.getRootNode().host&&(c=r.getRootNode().host);let u=c;for(;(null===(s=null===(a=null==u?void 0:u.getRootNode)||void 0===a?void 0:a.call(u))||void 0===s?void 0:s.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&u.getRootNode().host;)u=u.getRootNode().host;const l=!(this.doc.contains(r)||u&&this.doc.contains(u));if(!r.parentNode||l)return;const d=ke(r.parentNode)?this.mirror.getId(c):this.mirror.getId(r.parentNode),h=n(r);if(-1===d||-1===h)return t.addNode(r);const f=Qe(r,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:e=>{dt(e,this.mirror)&&this.iframeManager.addIframe(e),ht(e,this.mirror)&&this.stylesheetManager.trackLinkElement(e),ft(r)&&this.shadowDomManager.addShadowRoot(r.shadowRoot,this.doc)},onIframeLoad:(e,t)=>{this.iframeManager.attachIframe(e,t),this.shadowDomManager.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{this.stylesheetManager.attachLinkElement(e,t)}});f&&e.push({parentId:d,nextId:h,node:f})};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const e of Array.from(this.movedSet.values()))Et(this.removes,e,this.mirror)&&!this.movedSet.has(e.parentNode)||r(e);for(const e of Array.from(this.addedSet.values()))kt(this.droppedSet,e)||Et(this.removes,e,this.mirror)?kt(this.movedSet,e)?r(e):this.droppedSet.add(e):r(e);let o=null;for(;t.length;){let e=null;if(o){const t=this.mirror.getId(o.value.parentNode),r=n(o.value);-1!==t&&-1!==r&&(e=o)}if(!e)for(let r=t.length-1;r>=0;r--){const o=t.get(r);if(o){const t=this.mirror.getId(o.value.parentNode);if(-1===n(o.value))continue;if(-1!==t){e=o;break}{const t=o.value;if(t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const n=t.parentNode.host;if(-1!==this.mirror.getId(n)){e=o;break}}}}}if(!e){for(;t.head;)t.removeNode(t.head.value);break}o=e.previous,t.removeNode(e.value),r(e.value)}const i={texts:this.texts.map((e=>({id:this.mirror.getId(e.node),value:e.value}))).filter((e=>this.mirror.has(e.id))),attributes:this.attributes.map((e=>({id:this.mirror.getId(e.node),attributes:e.attributes}))).filter((e=>this.mirror.has(e.id))),removes:this.removes,adds:e};(i.texts.length||i.attributes.length||i.removes.length||i.adds.length)&&(this.texts=[],this.attributes=[],this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(i))},this.processMutation=e=>{if(!ct(e.target,this.mirror))switch(e.type){case"characterData":{const t=e.target.textContent;st(e.target,this.blockClass,this.blockSelector,!1)||t===e.oldValue||this.texts.push({value:Xe(e.target,this.maskTextClass,this.maskTextSelector)&&t?this.maskTextFn?this.maskTextFn(t):t.replace(/[\S]/g,"*"):t,node:e.target});break}case"attributes":{const t=e.target;let n=e.target.getAttribute(e.attributeName);if("value"===e.attributeName&&(n=Me({maskInputOptions:this.maskInputOptions,tagName:e.target.tagName,type:e.target.getAttribute("type"),value:n,maskInputFn:this.maskInputFn})),st(e.target,this.blockClass,this.blockSelector,!1)||n===e.oldValue)return;let r=this.attributes.find((t=>t.node===e.target));if("IFRAME"===t.tagName&&"src"===e.attributeName&&!this.keepIframeSrcFn(n)){if(t.contentDocument)return;e.attributeName="rr_src"}if(r||(r={node:e.target,attributes:{}},this.attributes.push(r)),"style"===e.attributeName){const n=this.doc.createElement("span");e.oldValue&&n.setAttribute("style",e.oldValue),void 0!==r.attributes.style&&null!==r.attributes.style||(r.attributes.style={});const o=r.attributes.style;for(const e of Array.from(t.style)){const r=t.style.getPropertyValue(e),i=t.style.getPropertyPriority(e);r===n.style.getPropertyValue(e)&&i===n.style.getPropertyPriority(e)||(o[e]=""===i?r:[r,i])}for(const e of Array.from(n.style))""===t.style.getPropertyValue(e)&&(o[e]=!1)}else r.attributes[e.attributeName]=Ye(this.doc,t.tagName,e.attributeName,n);break}case"childList":if(st(e.target,this.blockClass,this.blockSelector,!0))return;e.addedNodes.forEach((t=>this.genAdds(t,e.target))),e.removedNodes.forEach((t=>{const n=this.mirror.getId(t),r=ke(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);st(e.target,this.blockClass,this.blockSelector,!1)||ct(t,this.mirror)||!function(e,t){return-1!==t.getId(e)}(t,this.mirror)||(this.addedSet.has(t)?(St(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(e.target)&&-1===n||ut(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[bt(n,r)]?St(this.movedSet,t):this.removes.push({parentId:r,id:n,isShadow:!(!ke(e.target)||!Te(e.target))||void 0})),this.mapRemoves.push(t))}))}},this.genAdds=(e,t)=>{if(this.mirror.hasNode(e)){if(ct(e,this.mirror))return;this.movedSet.add(e);let n=null;t&&this.mirror.hasNode(t)&&(n=this.mirror.getId(t)),n&&-1!==n&&(this.movedMap[bt(this.mirror.getId(e),n)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);st(e,this.blockClass,this.blockSelector,!1)||e.childNodes.forEach((e=>this.genAdds(e)))}}init(e){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager"].forEach((t=>{this[t]=e[t]}))}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function St(e,t){e.delete(t),t.childNodes.forEach((t=>St(e,t)))}function Et(e,t,n){return 0!==e.length&&At(e,t,n)}function At(e,t,n){const{parentNode:r}=t;if(!r)return!1;const o=n.getId(r);return!!e.some((e=>e.id===o))||At(e,r,n)}function kt(e,t){return 0!==e.size&&Tt(e,t)}function Tt(e,t){const{parentNode:n}=t;return!!n&&(!!e.has(n)||Tt(e,n))}const Ot=[],Rt="undefined"!=typeof CSSGroupingRule,xt="undefined"!=typeof CSSMediaRule,Mt="undefined"!=typeof CSSSupportsRule,Nt="undefined"!=typeof CSSConditionRule;function Dt(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0];return e.target}catch(t){return e.target}}function Lt(e,t){var n,r;const o=new wt;Ot.push(o),o.init(e);let i=window.MutationObserver||window.__rrMutationObserver;const a=null===(r=null===(n=null===window||void 0===window?void 0:window.Zone)||void 0===n?void 0:n.__symbol__)||void 0===r?void 0:r.call(n,"MutationObserver");a&&window[a]&&(i=window[a]);const s=new i(o.processMutations.bind(o));return s.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),s}function _t({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,sampling:i}){if(!1===i.mouseInteraction)return()=>{};const a=!0===i.mouseInteraction||void 0===i.mouseInteraction?{}:i.mouseInteraction,s=[];return Object.keys(vt).filter((e=>Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==a[e])).forEach((i=>{const a=i.toLowerCase(),c=(t=>i=>{const a=Dt(i);if(st(a,r,o,!0))return;const s=lt(i)?i.changedTouches[0]:i;if(!s)return;const c=n.getId(a),{clientX:u,clientY:l}=s;e({type:vt[t],id:c,x:u,y:l})})(i);s.push(et(a,c,t))})),()=>{s.forEach((e=>e()))}}function Ft({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,sampling:i}){return et("scroll",nt((i=>{const a=Dt(i);if(!a||st(a,r,o,!0))return;const s=n.getId(a);if(a===t){const n=t.scrollingElement||t.documentElement;e({id:s,x:n.scrollLeft,y:n.scrollTop})}else e({id:s,x:a.scrollLeft,y:a.scrollTop})}),i.scroll||100),t)}function Pt(e,t){const n=Object.assign({},e);return t||delete n.userTriggered,n}const jt=["INPUT","TEXTAREA","SELECT"],Ut=new WeakMap;function Zt(e){return function(e,t){if(Rt&&e.parentRule instanceof CSSGroupingRule||xt&&e.parentRule instanceof CSSMediaRule||Mt&&e.parentRule instanceof CSSSupportsRule||Nt&&e.parentRule instanceof CSSConditionRule){const n=Array.from(e.parentRule.cssRules).indexOf(e);t.unshift(n)}else if(e.parentStyleSheet){const n=Array.from(e.parentStyleSheet.cssRules).indexOf(e);t.unshift(n)}return t}(e,[])}function Bt(e,t,n){let r,o;return e?(e.ownerNode?r=t.getId(e.ownerNode):o=n.getId(e),{styleId:o,id:r}):{}}function Gt({mirror:e,stylesheetManager:t},n){var r,o,i;let a=null;a="#document"===n.nodeName?e.getId(n):e.getId(n.host);const s="#document"===n.nodeName?null===(r=n.defaultView)||void 0===r?void 0:r.Document:null===(i=null===(o=n.ownerDocument)||void 0===o?void 0:o.defaultView)||void 0===i?void 0:i.ShadowRoot,c=Object.getOwnPropertyDescriptor(null==s?void 0:s.prototype,"adoptedStyleSheets");return null!==a&&-1!==a&&s&&c?(Object.defineProperty(n,"adoptedStyleSheets",{configurable:c.configurable,enumerable:c.enumerable,get(){var e;return null===(e=c.get)||void 0===e?void 0:e.call(this)},set(e){var n;const r=null===(n=c.set)||void 0===n?void 0:n.call(this,e);if(null!==a&&-1!==a)try{t.adoptStyleSheets(e,a)}catch(e){}return r}}),()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:c.configurable,enumerable:c.enumerable,get:c.get,set:c.set})}):()=>{}}function Vt(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};!function(e,t){const{mutationCb:n,mousemoveCb:r,mouseInteractionCb:o,scrollCb:i,viewportResizeCb:a,inputCb:s,mediaInteractionCb:c,styleSheetRuleCb:u,styleDeclarationCb:l,canvasMutationCb:d,fontCb:h,selectionCb:f}=e;e.mutationCb=(...e)=>{t.mutation&&t.mutation(...e),n(...e)},e.mousemoveCb=(...e)=>{t.mousemove&&t.mousemove(...e),r(...e)},e.mouseInteractionCb=(...e)=>{t.mouseInteraction&&t.mouseInteraction(...e),o(...e)},e.scrollCb=(...e)=>{t.scroll&&t.scroll(...e),i(...e)},e.viewportResizeCb=(...e)=>{t.viewportResize&&t.viewportResize(...e),a(...e)},e.inputCb=(...e)=>{t.input&&t.input(...e),s(...e)},e.mediaInteractionCb=(...e)=>{t.mediaInteaction&&t.mediaInteaction(...e),c(...e)},e.styleSheetRuleCb=(...e)=>{t.styleSheetRule&&t.styleSheetRule(...e),u(...e)},e.styleDeclarationCb=(...e)=>{t.styleDeclaration&&t.styleDeclaration(...e),l(...e)},e.canvasMutationCb=(...e)=>{t.canvasMutation&&t.canvasMutation(...e),d(...e)},e.fontCb=(...e)=>{t.font&&t.font(...e),h(...e)},e.selectionCb=(...e)=>{t.selection&&t.selection(...e),f(...e)}}(e,t);const r=Lt(e,e.doc),o=function({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(!1===t.mousemove)return()=>{};const o="number"==typeof t.mousemove?t.mousemove:50,i="number"==typeof t.mousemoveCallback?t.mousemoveCallback:500;let a,s=[];const c=nt((t=>{const n=Date.now()-a;e(s.map((e=>(e.timeOffset-=n,e))),t),s=[],a=null}),i),u=nt((e=>{const t=Dt(e),{clientX:n,clientY:o}=lt(e)?e.changedTouches[0]:e;a||(a=Date.now()),s.push({x:n,y:o,id:r.getId(t),timeOffset:Date.now()-a}),c("undefined"!=typeof DragEvent&&e instanceof DragEvent?mt.Drag:e instanceof MouseEvent?mt.MouseMove:mt.TouchMove)}),o,{trailing:!1}),l=[et("mousemove",u,n),et("touchmove",u,n),et("drag",u,n)];return()=>{l.forEach((e=>e()))}}(e),i=_t(e),a=Ft(e),s=function({viewportResizeCb:e}){let t=-1,n=-1;return et("resize",nt((()=>{const r=it(),o=at();t===r&&n===o||(e({width:Number(o),height:Number(r)}),t=r,n=o)}),200),window)}(e),c=function({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,ignoreClass:i,maskInputOptions:a,maskInputFn:s,sampling:c,userTriggeredOnInput:u}){function l(e){let n=Dt(e);const c=e.isTrusted;if(n&&"OPTION"===n.tagName&&(n=n.parentElement),!n||!n.tagName||jt.indexOf(n.tagName)<0||st(n,r,o,!0))return;const l=n.type;if(n.classList.contains(i))return;let h=n.value,f=!1;"radio"===l||"checkbox"===l?f=n.checked:(a[n.tagName.toLowerCase()]||a[l])&&(h=Me({maskInputOptions:a,tagName:n.tagName,type:l,value:h,maskInputFn:s})),d(n,Pt({text:h,isChecked:f,userTriggered:c},u));const p=n.name;"radio"===l&&p&&f&&t.querySelectorAll(`input[type="radio"][name="${p}"]`).forEach((e=>{e!==n&&d(e,Pt({text:e.value,isChecked:!f,userTriggered:!1},u))}))}function d(t,r){const o=Ut.get(t);if(!o||o.text!==r.text||o.isChecked!==r.isChecked){Ut.set(t,r);const o=n.getId(t);e(Object.assign(Object.assign({},r),{id:o}))}}const h=("last"===c.input?["change"]:["input","change"]).map((e=>et(e,l,t))),f=t.defaultView;if(!f)return()=>{h.forEach((e=>e()))};const p=f.Object.getOwnPropertyDescriptor(f.HTMLInputElement.prototype,"value"),g=[[f.HTMLInputElement.prototype,"value"],[f.HTMLInputElement.prototype,"checked"],[f.HTMLSelectElement.prototype,"value"],[f.HTMLTextAreaElement.prototype,"value"],[f.HTMLSelectElement.prototype,"selectedIndex"],[f.HTMLOptionElement.prototype,"selected"]];return p&&p.set&&h.push(...g.map((e=>rt(e[0],e[1],{set(){l({target:this})}},!1,f)))),()=>{h.forEach((e=>e()))}}(e),u=function({mediaInteractionCb:e,blockClass:t,blockSelector:n,mirror:r,sampling:o}){const i=i=>nt((o=>{const a=Dt(o);if(!a||st(a,t,n,!0))return;const{currentTime:s,volume:c,muted:u,playbackRate:l}=a;e({type:i,id:r.getId(a),currentTime:s,volume:c,muted:u,playbackRate:l})}),o.media||500),a=[et("play",i(0)),et("pause",i(1)),et("seeked",i(2)),et("volumechange",i(3)),et("ratechange",i(4))];return()=>{a.forEach((e=>e()))}}(e),l=function({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){const o=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=function(r,i){const{id:a,styleId:s}=Bt(this,t,n.styleMirror);return(a&&-1!==a||s&&-1!==s)&&e({id:a,styleId:s,adds:[{rule:r,index:i}]}),o.apply(this,[r,i])};const i=r.CSSStyleSheet.prototype.deleteRule;let a,s;r.CSSStyleSheet.prototype.deleteRule=function(r){const{id:o,styleId:a}=Bt(this,t,n.styleMirror);return(o&&-1!==o||a&&-1!==a)&&e({id:o,styleId:a,removes:[{index:r}]}),i.apply(this,[r])},r.CSSStyleSheet.prototype.replace&&(a=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=function(r){const{id:o,styleId:i}=Bt(this,t,n.styleMirror);return(o&&-1!==o||i&&-1!==i)&&e({id:o,styleId:i,replace:r}),a.apply(this,[r])}),r.CSSStyleSheet.prototype.replaceSync&&(s=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=function(r){const{id:o,styleId:i}=Bt(this,t,n.styleMirror);return(o&&-1!==o||i&&-1!==i)&&e({id:o,styleId:i,replaceSync:r}),s.apply(this,[r])});const c={};Rt?c.CSSGroupingRule=r.CSSGroupingRule:(xt&&(c.CSSMediaRule=r.CSSMediaRule),Nt&&(c.CSSConditionRule=r.CSSConditionRule),Mt&&(c.CSSSupportsRule=r.CSSSupportsRule));const u={};return Object.entries(c).forEach((([r,o])=>{u[r]={insertRule:o.prototype.insertRule,deleteRule:o.prototype.deleteRule},o.prototype.insertRule=function(o,i){const{id:a,styleId:s}=Bt(this.parentStyleSheet,t,n.styleMirror);return(a&&-1!==a||s&&-1!==s)&&e({id:a,styleId:s,adds:[{rule:o,index:[...Zt(this),i||0]}]}),u[r].insertRule.apply(this,[o,i])},o.prototype.deleteRule=function(o){const{id:i,styleId:a}=Bt(this.parentStyleSheet,t,n.styleMirror);return(i&&-1!==i||a&&-1!==a)&&e({id:i,styleId:a,removes:[{index:[...Zt(this),o]}]}),u[r].deleteRule.apply(this,[o])}})),()=>{r.CSSStyleSheet.prototype.insertRule=o,r.CSSStyleSheet.prototype.deleteRule=i,a&&(r.CSSStyleSheet.prototype.replace=a),s&&(r.CSSStyleSheet.prototype.replaceSync=s),Object.entries(c).forEach((([e,t])=>{t.prototype.insertRule=u[e].insertRule,t.prototype.deleteRule=u[e].deleteRule}))}}(e,{win:n}),d=Gt(e,e.doc),h=function({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:o}){const i=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=function(o,a,s){var c;if(n.has(o))return i.apply(this,[o,a,s]);const{id:u,styleId:l}=Bt(null===(c=this.parentRule)||void 0===c?void 0:c.parentStyleSheet,t,r.styleMirror);return(u&&-1!==u||l&&-1!==l)&&e({id:u,styleId:l,set:{property:o,value:a,priority:s},index:Zt(this.parentRule)}),i.apply(this,[o,a,s])};const a=o.CSSStyleDeclaration.prototype.removeProperty;return o.CSSStyleDeclaration.prototype.removeProperty=function(o){var i;if(n.has(o))return a.apply(this,[o]);const{id:s,styleId:c}=Bt(null===(i=this.parentRule)||void 0===i?void 0:i.parentStyleSheet,t,r.styleMirror);return(s&&-1!==s||c&&-1!==c)&&e({id:s,styleId:c,remove:{property:o},index:Zt(this.parentRule)}),a.apply(this,[o])},()=>{o.CSSStyleDeclaration.prototype.setProperty=i,o.CSSStyleDeclaration.prototype.removeProperty=a}}(e,{win:n}),f=e.collectFonts?function({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const r=[],o=new WeakMap,i=n.FontFace;n.FontFace=function(e,t,n){const r=new i(e,t,n);return o.set(r,{family:e,buffer:"string"!=typeof t,descriptors:n,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),r};const a=ot(t.fonts,"add",(function(t){return function(n){return setTimeout((()=>{const t=o.get(n);t&&(e(t),o.delete(n))}),0),t.apply(this,[n])}}));return r.push((()=>{n.FontFace=i})),r.push(a),()=>{r.forEach((e=>e()))}}(e):()=>{},p=function(e){const{doc:t,mirror:n,blockClass:r,blockSelector:o,selectionCb:i}=e;let a=!0;const s=()=>{const e=t.getSelection();if(!e||a&&(null==e?void 0:e.isCollapsed))return;a=e.isCollapsed||!1;const s=[],c=e.rangeCount||0;for(let t=0;t<c;t++){const i=e.getRangeAt(t),{startContainer:a,startOffset:c,endContainer:u,endOffset:l}=i;st(a,r,o,!0)||st(u,r,o,!0)||s.push({start:n.getId(a),startOffset:c,end:n.getId(u),endOffset:l})}i({ranges:s})};return s(),et("selectionchange",s)}(e),g=[];for(const t of e.plugins)g.push(t.observer(t.callback,n,t.options));return()=>{Ot.forEach((e=>e.reset())),r.disconnect(),o(),i(),a(),s(),c(),u(),l(),d(),h(),f(),p(),g.forEach((e=>e()))}}class Wt{constructor(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(e,t,n,r){const o=n||this.getIdToRemoteIdMap(e),i=r||this.getRemoteIdToIdMap(e);let a=o.get(t);return a||(a=this.generateIdFn(),o.set(t,a),i.set(a,t)),a}getIds(e,t){const n=this.getIdToRemoteIdMap(e),r=this.getRemoteIdToIdMap(e);return t.map((t=>this.getId(e,t,n,r)))}getRemoteId(e,t,n){const r=n||this.getRemoteIdToIdMap(e);if("number"!=typeof t)return t;const o=r.get(t);return o||-1}getRemoteIds(e,t){const n=this.getRemoteIdToIdMap(e);return t.map((t=>this.getRemoteId(e,t,n)))}reset(e){if(!e)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}}class Kt{constructor(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new Wt(Pe),this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new Wt(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){var n;this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),null===(n=this.loadListener)||void 0===n||n.call(this,e),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){if("rrweb"===e.data.type){if(!e.source)return;const t=this.crossOriginIframeMap.get(e.source);if(!t)return;const n=this.transformCrossOriginEvent(t,e.data.event);n&&this.wrappedEmit(n,e.data.isCheckout)}}transformCrossOriginEvent(e,t){var n;switch(t.type){case gt.FullSnapshot:return this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e),{timestamp:t.timestamp,type:gt.IncrementalSnapshot,data:{source:mt.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}};case gt.Meta:case gt.Load:case gt.DomContentLoaded:return!1;case gt.Plugin:return t;case gt.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case gt.IncrementalSnapshot:switch(t.data.source){case mt.Mutation:return t.data.adds.forEach((t=>{this.replaceIds(t,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(t.node,e)})),t.data.removes.forEach((t=>{this.replaceIds(t,e,["parentId","id"])})),t.data.attributes.forEach((t=>{this.replaceIds(t,e,["id"])})),t.data.texts.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case mt.Drag:case mt.TouchMove:case mt.MouseMove:return t.data.positions.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case mt.ViewportResize:return!1;case mt.MediaInteraction:case mt.MouseInteraction:case mt.Scroll:case mt.CanvasMutation:case mt.Input:return this.replaceIds(t.data,e,["id"]),t;case mt.StyleSheetRule:case mt.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case mt.Font:return t;case mt.Selection:return t.data.ranges.forEach((t=>{this.replaceIds(t,e,["start","end"])})),t;case mt.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),null===(n=t.data.styles)||void 0===n||n.forEach((t=>{this.replaceStyleIds(t,e,["styleId"])})),t}}}replace(e,t,n,r){for(const o of r)(Array.isArray(t[o])||"number"==typeof t[o])&&(Array.isArray(t[o])?t[o]=e.getIds(n,t[o]):t[o]=e.getId(n,t[o]));return t}replaceIds(e,t,n){return this.replace(this.crossOriginIframeMirror,e,t,n)}replaceStyleIds(e,t,n){return this.replace(this.crossOriginIframeStyleMirror,e,t,n)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id"]),"childNodes"in e&&e.childNodes.forEach((e=>{this.replaceIdOnNode(e,t)}))}}class Ht{constructor(e){this.shadowDoms=new WeakSet,this.restorePatches=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror;const t=this;this.restorePatches.push(ot(Element.prototype,"attachShadow",(function(e){return function(n){const r=e.call(this,n);return this.shadowRoot&&t.addShadowRoot(this.shadowRoot,this.ownerDocument),r}})))}addShadowRoot(e,t){Te(e)&&(this.shadowDoms.has(e)||(this.shadowDoms.add(e),Lt(Object.assign(Object.assign({},this.bypassOptions),{doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),e),Ft(Object.assign(Object.assign({},this.bypassOptions),{scrollCb:this.scrollCb,doc:e,mirror:this.mirror})),setTimeout((()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),Gt({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e)}),0)))}observeAttachShadow(e){if(e.contentWindow){const t=this;this.restorePatches.push(ot(e.contentWindow.HTMLElement.prototype,"attachShadow",(function(n){return function(r){const o=n.call(this,r);return this.shadowRoot&&t.addShadowRoot(this.shadowRoot,e.contentDocument),o}})))}}reset(){this.restorePatches.forEach((e=>e())),this.shadowDoms=new WeakSet}}function Yt(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}for(var qt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Xt="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Jt=0;Jt<qt.length;Jt++)Xt[qt.charCodeAt(Jt)]=Jt;const zt=new Map;const Qt=(e,t,n)=>{if(!e||!tn(e,t)&&"object"!=typeof e)return;const r=function(e,t){let n=zt.get(e);return n||(n=new Map,zt.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}(n,e.constructor.name);let o=r.indexOf(e);return-1===o&&(o=r.length,r.push(e)),o};function $t(e,t,n){if(e instanceof Array)return e.map((e=>$t(e,t,n)));if(null===e)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray){return{rr_type:e.constructor.name,args:[Object.values(e)]}}if(e instanceof ArrayBuffer){const t=e.constructor.name,n=function(e){var t,n=new Uint8Array(e),r=n.length,o="";for(t=0;t<r;t+=3)o+=qt[n[t]>>2],o+=qt[(3&n[t])<<4|n[t+1]>>4],o+=qt[(15&n[t+1])<<2|n[t+2]>>6],o+=qt[63&n[t+2]];return r%3==2?o=o.substring(0,o.length-1)+"=":r%3==1&&(o=o.substring(0,o.length-2)+"=="),o}(e);return{rr_type:t,base64:n}}if(e instanceof DataView){return{rr_type:e.constructor.name,args:[$t(e.buffer,t,n),e.byteOffset,e.byteLength]}}if(e instanceof HTMLImageElement){const t=e.constructor.name,{src:n}=e;return{rr_type:t,src:n}}if(e instanceof HTMLCanvasElement){return{rr_type:"HTMLImageElement",src:e.toDataURL()}}if(e instanceof ImageData){return{rr_type:e.constructor.name,args:[$t(e.data,t,n),e.width,e.height]}}if(tn(e,t)||"object"==typeof e){return{rr_type:e.constructor.name,index:Qt(e,t,n)}}return e}const en=(e,t,n)=>[...e].map((e=>$t(e,t,n))),tn=(e,t)=>{const n=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter((e=>"function"==typeof t[e]));return Boolean(n.find((n=>e instanceof t[n])))};function nn(e,t,n){const r=[];try{const o=ot(e.HTMLCanvasElement.prototype,"getContext",(function(e){return function(r,...o){return st(this,t,n,!0)||"__context"in this||(this.__context=r),e.apply(this,[r,...o])}}));r.push(o)}catch(e){}return()=>{r.forEach((e=>e()))}}function rn(e,t,n,r,o,i,a){const s=[],c=Object.getOwnPropertyNames(e);for(const i of c)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(i))try{if("function"!=typeof e[i])continue;const c=ot(e,i,(function(e){return function(...s){const c=e.apply(this,s);if(Qt(c,a,this),!st(this.canvas,r,o,!0)){const e=en([...s],a,this),r={type:t,property:i,args:e};n(this.canvas,r)}return c}}));s.push(c)}catch(r){const o=rt(e,i,{set(e){n(this.canvas,{type:t,property:i,args:[e],setter:!0})}});s.push(o)}return s}var on=null;try{var an="undefined"!=typeof module&&"function"==typeof module.require&&module.require("worker_threads")||"function"==typeof require&&require("worker_threads")||"function"==typeof require&&require("worker_threads");on=an.Worker}catch(e){}function sn(e,t,n){var r=void 0===t?null:t,o=function(e,t){return Buffer.from(e,"base64").toString(t?"utf16":"utf8")}(e,void 0!==n&&n),i=o.indexOf("\n",10)+1,a=o.substring(i)+(r?"//# sourceMappingURL="+r:"");return function(e){return new on(a,Object.assign({},e,{eval:!0}))}}function cn(e,t,n){var r=void 0===t?null:t,o=function(e,t){var n=atob(e);if(t){for(var r=new Uint8Array(n.length),o=0,i=n.length;o<i;++o)r[o]=n.charCodeAt(o);return String.fromCharCode.apply(null,new Uint16Array(r.buffer))}return n}(e,void 0!==n&&n),i=o.indexOf("\n",10)+1,a=o.substring(i)+(r?"//# sourceMappingURL="+r:""),s=new Blob([a],{type:"application/javascript"});return URL.createObjectURL(s)}var un="[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0);var ln,dn,hn,fn=(ln="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICAgJ3VzZSBzdHJpY3QnOwoKICAgIC8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KICAgIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLg0KDQogICAgUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55DQogICAgcHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLg0KDQogICAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEgNCiAgICBSRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkNCiAgICBBTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsDQogICAgSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NDQogICAgTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1INCiAgICBPVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SDQogICAgUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS4NCiAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqLw0KDQogICAgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikgew0KICAgICAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH0NCiAgICAgICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7DQogICAgICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvclsidGhyb3ciXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfQ0KICAgICAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpOw0KICAgICAgICB9KTsNCiAgICB9CgogICAgLyoKICAgICAqIGJhc2U2NC1hcnJheWJ1ZmZlciAxLjAuMSA8aHR0cHM6Ly9naXRodWIuY29tL25pa2xhc3ZoL2Jhc2U2NC1hcnJheWJ1ZmZlcj4KICAgICAqIENvcHlyaWdodCAoYykgMjAyMSBOaWtsYXMgdm9uIEhlcnR6ZW4gPGh0dHBzOi8vaGVydHplbi5jb20+CiAgICAgKiBSZWxlYXNlZCB1bmRlciBNSVQgTGljZW5zZQogICAgICovCiAgICB2YXIgY2hhcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyc7CiAgICAvLyBVc2UgYSBsb29rdXAgdGFibGUgdG8gZmluZCB0aGUgaW5kZXguCiAgICB2YXIgbG9va3VwID0gdHlwZW9mIFVpbnQ4QXJyYXkgPT09ICd1bmRlZmluZWQnID8gW10gOiBuZXcgVWludDhBcnJheSgyNTYpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGFycy5sZW5ndGg7IGkrKykgewogICAgICAgIGxvb2t1cFtjaGFycy5jaGFyQ29kZUF0KGkpXSA9IGk7CiAgICB9CiAgICB2YXIgZW5jb2RlID0gZnVuY3Rpb24gKGFycmF5YnVmZmVyKSB7CiAgICAgICAgdmFyIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlidWZmZXIpLCBpLCBsZW4gPSBieXRlcy5sZW5ndGgsIGJhc2U2NCA9ICcnOwogICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkgKz0gMykgewogICAgICAgICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaV0gPj4gMl07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1soKGJ5dGVzW2ldICYgMykgPDwgNCkgfCAoYnl0ZXNbaSArIDFdID4+IDQpXTsKICAgICAgICAgICAgYmFzZTY0ICs9IGNoYXJzWygoYnl0ZXNbaSArIDFdICYgMTUpIDw8IDIpIHwgKGJ5dGVzW2kgKyAyXSA+PiA2KV07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1tieXRlc1tpICsgMl0gJiA2M107CiAgICAgICAgfQogICAgICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgJz0nOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgJz09JzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGJhc2U2NDsKICAgIH07CgogICAgY29uc3QgbGFzdEJsb2JNYXAgPSBuZXcgTWFwKCk7DQogICAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gbmV3IE1hcCgpOw0KICAgIGZ1bmN0aW9uIGdldFRyYW5zcGFyZW50QmxvYkZvcih3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucykgew0KICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkgew0KICAgICAgICAgICAgY29uc3QgaWQgPSBgJHt3aWR0aH0tJHtoZWlnaHR9YDsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgaWYgKHRyYW5zcGFyZW50QmxvYk1hcC5oYXMoaWQpKQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNwYXJlbnRCbG9iTWFwLmdldChpZCk7DQogICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsNCiAgICAgICAgICAgICAgICBvZmZzY3JlZW4uZ2V0Q29udGV4dCgnMmQnKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0geWllbGQgYmxvYi5hcnJheUJ1ZmZlcigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7DQogICAgICAgICAgICAgICAgdHJhbnNwYXJlbnRCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICByZXR1cm4gYmFzZTY0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgcmV0dXJuICcnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9DQogICAgY29uc3Qgd29ya2VyID0gc2VsZjsNCiAgICB3b3JrZXIub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgY29uc3QgeyBpZCwgYml0bWFwLCB3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucyB9ID0gZS5kYXRhOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zKTsNCiAgICAgICAgICAgICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IG9mZnNjcmVlbi5nZXRDb250ZXh0KCcyZCcpOw0KICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoYml0bWFwLCAwLCAwKTsNCiAgICAgICAgICAgICAgICBiaXRtYXAuY2xvc2UoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBibG9iLnR5cGU7DQogICAgICAgICAgICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSB5aWVsZCBibG9iLmFycmF5QnVmZmVyKCk7DQogICAgICAgICAgICAgICAgY29uc3QgYmFzZTY0ID0gZW5jb2RlKGFycmF5QnVmZmVyKTsNCiAgICAgICAgICAgICAgICBpZiAoIWxhc3RCbG9iTWFwLmhhcyhpZCkgJiYgKHlpZWxkIHRyYW5zcGFyZW50QmFzZTY0KSA9PT0gYmFzZTY0KSB7DQogICAgICAgICAgICAgICAgICAgIGxhc3RCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdvcmtlci5wb3N0TWVzc2FnZSh7IGlkIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7DQogICAgICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHsNCiAgICAgICAgICAgICAgICAgICAgaWQsDQogICAgICAgICAgICAgICAgICAgIHR5cGUsDQogICAgICAgICAgICAgICAgICAgIGJhc2U2NCwNCiAgICAgICAgICAgICAgICAgICAgd2lkdGgsDQogICAgICAgICAgICAgICAgICAgIGhlaWdodCwNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfTsKCn0pKCk7Cgo=",dn=null,hn=!1,un?sn(ln,dn,hn):function(e,t,n){var r;return function(o){return r=r||cn(e,t,n),new Worker(r,o)}}(ln,dn,hn));class pn{constructor(e){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(e,t)=>{!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(e)||this.pendingCanvasMutations.set(e,[]),this.pendingCanvasMutations.get(e).push(t)};const{sampling:t="all",win:n,blockClass:r,blockSelector:o,recordCanvas:i,dataURLOptions:a}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,i&&"all"===t&&this.initCanvasMutationObserver(n,r,o),i&&"number"==typeof t&&this.initCanvasFPSObserver(t,n,r,o,{dataURLOptions:a})}reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}initCanvasFPSObserver(e,t,n,r,o){const i=nn(t,n,r),a=new Map,s=new fn;s.onmessage=e=>{const{id:t}=e.data;if(a.set(t,!1),!("base64"in e.data))return;const{base64:n,type:r,width:o,height:i}=e.data;this.mutationCb({id:t,type:yt["2D"],commands:[{property:"clearRect",args:[0,0,o,i]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:n}],type:r}]},0,0]}]})};const c=1e3/e;let u,l=0;const d=e=>{l&&e-l<c||(l=e,(()=>{const e=[];return t.document.querySelectorAll("canvas").forEach((t=>{st(t,n,r,!0)||e.push(t)})),e})().forEach((e=>Yt(this,void 0,void 0,(function*(){var t;const n=this.mirror.getId(e);if(a.get(n))return;if(a.set(n,!0),["webgl","webgl2"].includes(e.__context)){const n=e.getContext(e.__context);!1===(null===(t=null==n?void 0:n.getContextAttributes())||void 0===t?void 0:t.preserveDrawingBuffer)&&(null==n||n.clear(n.COLOR_BUFFER_BIT))}const r=yield createImageBitmap(e);s.postMessage({id:n,bitmap:r,width:e.width,height:e.height,dataURLOptions:o.dataURLOptions},[r])}))))),u=requestAnimationFrame(d)};u=requestAnimationFrame(d),this.resetObservers=()=>{i(),cancelAnimationFrame(u)}}initCanvasMutationObserver(e,t,n){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const r=nn(e,t,n),o=function(e,t,n,r){const o=[],i=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const a of i)try{if("function"!=typeof t.CanvasRenderingContext2D.prototype[a])continue;const i=ot(t.CanvasRenderingContext2D.prototype,a,(function(o){return function(...i){return st(this.canvas,n,r,!0)||setTimeout((()=>{const n=en([...i],t,this);e(this.canvas,{type:yt["2D"],property:a,args:n})}),0),o.apply(this,i)}}));o.push(i)}catch(n){const r=rt(t.CanvasRenderingContext2D.prototype,a,{set(t){e(this.canvas,{type:yt["2D"],property:a,args:[t],setter:!0})}});o.push(r)}return()=>{o.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n),i=function(e,t,n,r,o){const i=[];return i.push(...rn(t.WebGLRenderingContext.prototype,yt.WebGL,e,n,r,0,t)),void 0!==t.WebGL2RenderingContext&&i.push(...rn(t.WebGL2RenderingContext.prototype,yt.WebGL2,e,n,r,0,t)),()=>{i.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n,this.mirror);this.resetObservers=()=>{r(),o(),i()}}startPendingCanvasMutationFlusher(){requestAnimationFrame((()=>this.flushPendingCanvasMutations()))}startRAFTimestamping(){const e=t=>{this.rafStamps.latestId=t,requestAnimationFrame(e)};requestAnimationFrame(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach(((e,t)=>{const n=this.mirror.getId(t);this.flushPendingCanvasMutationFor(t,n)})),requestAnimationFrame((()=>this.flushPendingCanvasMutations()))}flushPendingCanvasMutationFor(e,t){if(this.frozen||this.locked)return;const n=this.pendingCanvasMutations.get(e);if(!n||-1===t)return;const r=n.map((e=>{const t=
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["type"]);return t})),{type:o}=n[0];this.mutationCb({id:t,type:o,commands:r}),this.pendingCanvasMutations.delete(e)}}class gn{constructor(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new pt,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(0===e.length)return;const n={id:t,styleIds:[]},r=[];for(const t of e){let e;if(this.styleMirror.has(t))e=this.styleMirror.getId(t);else{e=this.styleMirror.add(t);const n=Array.from(t.rules||CSSRule);r.push({styleId:e,rules:n.map(((e,t)=>({rule:Re(e),index:t})))})}n.styleIds.push(e)}r.length>0&&(n.styles=r),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}function mn(e){return Object.assign(Object.assign({},e),{timestamp:Date.now()})}let vn,yn,In,Cn=!1;const bn=new xe;function wn(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:o="rr-block",blockSelector:i=null,ignoreClass:a="rr-ignore",maskTextClass:s="rr-mask",maskTextSelector:c=null,inlineStylesheet:u=!0,maskAllInputs:l,maskInputOptions:d,slimDOMOptions:h,maskInputFn:f,maskTextFn:p,hooks:g,packFn:m,sampling:v={},dataURLOptions:y={},mousemoveWait:I,recordCanvas:C=!1,recordCrossOriginIframes:b=!1,userTriggeredOnInput:w=!1,collectFonts:S=!1,inlineImages:E=!1,plugins:A,keepIframeSrcFn:k=(()=>!1),ignoreCSSAttributes:T=new Set([])}=e,O=!b||window.parent===window;let R=!1;if(!O)try{window.parent.document,R=!1}catch(e){R=!0}if(O&&!t)throw new Error("emit function is required");void 0!==I&&void 0===v.mousemove&&(v.mousemove=I),bn.reset();const x=!0===l?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:void 0!==d?d:{password:!0},M=!0===h||"all"===h?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===h,headMetaDescKeywords:"all"===h}:h||{};let N;!function(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...e)=>{let t=e[0];if(!(0 in e))throw new TypeError("1 argument is required");do{if(this===t)return!0}while(t=t&&t.parentNode);return!1})}();let D=0;const L=e=>{for(const t of A||[])t.eventProcessor&&(e=t.eventProcessor(e));return m&&(e=m(e)),e};vn=(e,o)=>{var i;if(!(null===(i=Ot[0])||void 0===i?void 0:i.isFrozen())||e.type===gt.FullSnapshot||e.type===gt.IncrementalSnapshot&&e.data.source===mt.Mutation||Ot.forEach((e=>e.unfreeze())),O)null==t||t(L(e),o);else if(R){const t={type:"rrweb",event:L(e),isCheckout:o};window.parent.postMessage(t,"*")}if(e.type===gt.FullSnapshot)N=e,D=0;else if(e.type===gt.IncrementalSnapshot){if(e.data.source===mt.Mutation&&e.data.isAttachIframe)return;D++;const t=r&&D>=r,o=n&&e.timestamp-N.timestamp>n;(t||o)&&yn(!0)}};const _=e=>{vn(mn({type:gt.IncrementalSnapshot,data:Object.assign({source:mt.Mutation},e)}))},F=e=>vn(mn({type:gt.IncrementalSnapshot,data:Object.assign({source:mt.Scroll},e)})),P=e=>vn(mn({type:gt.IncrementalSnapshot,data:Object.assign({source:mt.CanvasMutation},e)})),j=new gn({mutationCb:_,adoptedStyleSheetCb:e=>vn(mn({type:gt.IncrementalSnapshot,data:Object.assign({source:mt.AdoptedStyleSheet},e)}))}),U=new Kt({mirror:bn,mutationCb:_,stylesheetManager:j,recordCrossOriginIframes:b,wrappedEmit:vn});for(const e of A||[])e.getMirror&&e.getMirror({nodeMirror:bn,crossOriginIframeMirror:U.crossOriginIframeMirror,crossOriginIframeStyleMirror:U.crossOriginIframeStyleMirror});In=new pn({recordCanvas:C,mutationCb:P,win:window,blockClass:o,blockSelector:i,mirror:bn,sampling:v.canvas,dataURLOptions:y});const Z=new Ht({mutationCb:_,scrollCb:F,bypassOptions:{blockClass:o,blockSelector:i,maskTextClass:s,maskTextSelector:c,inlineStylesheet:u,maskInputOptions:x,dataURLOptions:y,maskTextFn:p,maskInputFn:f,recordCanvas:C,inlineImages:E,sampling:v,slimDOMOptions:M,iframeManager:U,stylesheetManager:j,canvasManager:In,keepIframeSrcFn:k},mirror:bn});yn=(e=!1)=>{var t,n,r,a,l,d;vn(mn({type:gt.Meta,data:{href:window.location.href,width:at(),height:it()}}),e),j.reset(),Ot.forEach((e=>e.lock()));const h=function(e,t){var n=t||{},r=n.mirror,o=void 0===r?new xe:r,i=n.blockClass,a=void 0===i?"rr-block":i,s=n.blockSelector,c=void 0===s?null:s,u=n.maskTextClass,l=void 0===u?"rr-mask":u,d=n.maskTextSelector,h=void 0===d?null:d,f=n.inlineStylesheet,p=void 0===f||f,g=n.inlineImages,m=void 0!==g&&g,v=n.recordCanvas,y=void 0!==v&&v,I=n.maskAllInputs,C=void 0!==I&&I,b=n.maskTextFn,w=n.maskInputFn,S=n.slimDOM,E=void 0!==S&&S,A=n.dataURLOptions,k=n.preserveWhiteSpace,T=n.onSerialize,O=n.onIframeLoad,R=n.iframeLoadTimeout,x=n.onStylesheetLoad,M=n.stylesheetLoadTimeout,N=n.keepIframeSrcFn;return Qe(e,{doc:e,mirror:o,blockClass:a,blockSelector:c,maskTextClass:l,maskTextSelector:h,skipChild:!1,inlineStylesheet:p,maskInputOptions:!0===C?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:!1===C?{password:!0}:C,maskTextFn:b,maskInputFn:w,slimDOMOptions:!0===E||"all"===E?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===E,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===E?{}:E,dataURLOptions:A,inlineImages:m,recordCanvas:y,preserveWhiteSpace:k,onSerialize:T,onIframeLoad:O,iframeLoadTimeout:R,onStylesheetLoad:x,stylesheetLoadTimeout:M,keepIframeSrcFn:void 0===N?function(){return!1}:N,newlyAddedElement:!1})}(document,{mirror:bn,blockClass:o,blockSelector:i,maskTextClass:s,maskTextSelector:c,inlineStylesheet:u,maskAllInputs:x,maskTextFn:p,slimDOM:M,dataURLOptions:y,recordCanvas:C,inlineImages:E,onSerialize:e=>{dt(e,bn)&&U.addIframe(e),ht(e,bn)&&j.trackLinkElement(e),ft(e)&&Z.addShadowRoot(e.shadowRoot,document)},onIframeLoad:(e,t)=>{U.attachIframe(e,t),Z.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{j.attachLinkElement(e,t)},keepIframeSrcFn:k});h&&(vn(mn({type:gt.FullSnapshot,data:{node:h,initialOffset:{left:void 0!==window.pageXOffset?window.pageXOffset:(null===document||void 0===document?void 0:document.documentElement.scrollLeft)||(null===(n=null===(t=null===document||void 0===document?void 0:document.body)||void 0===t?void 0:t.parentElement)||void 0===n?void 0:n.scrollLeft)||(null===(r=null===document||void 0===document?void 0:document.body)||void 0===r?void 0:r.scrollLeft)||0,top:void 0!==window.pageYOffset?window.pageYOffset:(null===document||void 0===document?void 0:document.documentElement.scrollTop)||(null===(l=null===(a=null===document||void 0===document?void 0:document.body)||void 0===a?void 0:a.parentElement)||void 0===l?void 0:l.scrollTop)||(null===(d=null===document||void 0===document?void 0:document.body)||void 0===d?void 0:d.scrollTop)||0}}})),Ot.forEach((e=>e.unlock())),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&j.adoptStyleSheets(document.adoptedStyleSheets,bn.getId(document)))};try{const e=[];e.push(et("DOMContentLoaded",(()=>{vn(mn({type:gt.DomContentLoaded,data:{}}))})));const t=e=>{var t;return Vt({mutationCb:_,mousemoveCb:(e,t)=>vn(mn({type:gt.IncrementalSnapshot,data:{source:t,positions:e}})),mouseInteractionCb:e=>vn(mn({type:gt.IncrementalSnapshot,data:Object.assign({source:mt.MouseInteraction},e)})),scrollCb:F,viewportResizeCb:e=>vn(mn({type:gt.IncrementalSnapshot,data:Object.assign({source:mt.ViewportResize},e)})),inputCb:e=>vn(mn({type:gt.IncrementalSnapshot,data:Object.assign({source:mt.Input},e)})),mediaInteractionCb:e=>vn(mn({type:gt.IncrementalSnapshot,data:Object.assign({source:mt.MediaInteraction},e)})),styleSheetRuleCb:e=>vn(mn({type:gt.IncrementalSnapshot,data:Object.assign({source:mt.StyleSheetRule},e)})),styleDeclarationCb:e=>vn(mn({type:gt.IncrementalSnapshot,data:Object.assign({source:mt.StyleDeclaration},e)})),canvasMutationCb:P,fontCb:e=>vn(mn({type:gt.IncrementalSnapshot,data:Object.assign({source:mt.Font},e)})),selectionCb:e=>{vn(mn({type:gt.IncrementalSnapshot,data:Object.assign({source:mt.Selection},e)}))},blockClass:o,ignoreClass:a,maskTextClass:s,maskTextSelector:c,maskInputOptions:x,inlineStylesheet:u,sampling:v,recordCanvas:C,inlineImages:E,userTriggeredOnInput:w,collectFonts:S,doc:e,maskInputFn:f,maskTextFn:p,keepIframeSrcFn:k,blockSelector:i,slimDOMOptions:M,dataURLOptions:y,mirror:bn,iframeManager:U,stylesheetManager:j,shadowDomManager:Z,canvasManager:In,ignoreCSSAttributes:T,plugins:(null===(t=null==A?void 0:A.filter((e=>e.observer)))||void 0===t?void 0:t.map((e=>({observer:e.observer,options:e.options,callback:t=>vn(mn({type:gt.Plugin,data:{plugin:e.name,payload:t}}))}))))||[]},g)};U.addLoadListener((n=>{e.push(t(n.contentDocument))}));const n=()=>{yn(),e.push(t(document)),Cn=!0};return"interactive"===document.readyState||"complete"===document.readyState?n():e.push(et("load",(()=>{vn(mn({type:gt.Load,data:{}})),n()}),window)),()=>{e.forEach((e=>e())),Cn=!1}}catch(e){}}wn.addCustomEvent=(e,t)=>{if(!Cn)throw new Error("please add custom event after start recording");vn(mn({type:gt.Custom,data:{tag:e,payload:t}}))},wn.freezePage=()=>{Ot.forEach((e=>e.freeze()))},wn.takeFullSnapshot=e=>{if(!Cn)throw new Error("please take full snapshot after start recording");yn(e)},wn.mirror=bn;var Sn=n(493),En=n.n(Sn),An={autoRunMap:{},stop:function(){},autoRun:function(e,t){var n=+new Date;return An.autoRunMap[n]=setTimeout((function(){delete An.autoRunMap[n],e()||An.autoRun(e,t)}),t),An.stop=function(){clearTimeout(An.autoRunMap[n]),delete An.autoRunMap[n]},An.stop}};function kn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kn(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var On={setReportItem:function(e,t){return!!t&&(On.report[e]=(new Date).getTime()-t,!0)},report:{maxDuration:0,maxTimestamp:0,num:0,duration:0},init:function(){var e=this;try{if("undefined"!=typeof PerformanceObserver&&"undefined"!=typeof performance&&performance.now){var t=new PerformanceObserver((function(t){for(var n=t.getEntries(),r=0;r<n.length;r++){var o=n[r];o.duration>e.report.maxDuration&&(On.report.maxDuration=o.duration,On.report.maxTimestamp=(new Date).getTime()),On.report.num++,On.report.duration=Math.round(performance.now())}}));t.observe({entryTypes:["longtask"],buffered:!0});var n=(0,p.GR)();return n.visibilityChange&&window.addEventListener(n.visibilityChange,(function(){document[n.hidden]?t.disconnect():setTimeout((function(){t.observe({entryTypes:["longtask"],buffered:!0})}),1e3)})),t}return null}catch(e){(0,p.r5)({type:"LONG_TASK_REPORTER",msg:e.message,stack:e.stack})}},sendReport:function(e){var t=e.source,n=e.tsid,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,p.sN)(Tn(Tn({},this.report),{},{source:t,tsid:n})),r&&(On.report={maxDuration:0,num:0,duration:0,maxTimestamp:0})}},Rn=function(){function e(t){var n=t.lastTime,r=void 0===n?(new Date).getTime():n,o=t.clicks,i=void 0===o?0:o,a=t.text,s=void 0===a?"":a,u=t.path,l=void 0===u?"":u;c()(this,e),this.lastTime=r,this.clicks=i,this.text=s?s.slice(0,100):"",this.path=l,this.processed=!1}return l()(e,[{key:"addClick",value:function(e){var t=(new Date).getTime();return t-this.lastTime>3e3&&(this.clicks=0),this.lastTime=t,this.clicks++,!this.processed&&this.clicks>=10&&(this.processed=!0,e({text:this.text,path:this.path}),!0)}}]),e}(),xn=function(){function e(t){c()(this,e),this.clickMap=new Map,this.onOverClick=t}return l()(e,[{key:"onCheckRageClick",value:function(e){var t=e.target;if(!t||"CANVAS"!==t.tagName){var n=(0,p.WA)(t),r=(new Date).getTime(),o=this.clickMap.get(n);o?o.addClick(this.onOverClick):this.clickMap.set(n,new Rn({now:r,clicks:1,text:t.innerText}))}}}]),e}();function Mn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mn(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Dn,Ln=(0,p.GR)(),_n={stopFn:function(){},recordStatus:g.yM.STOP,stopRecord:function(){_n.stopFn(),_n.recordStatus=g.yM.STOP},record:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{recordCanvas:!1,tagList:[]},t=arguments.length>1?arguments[1]:void 0,n=[],r=!0;_n.stopFn=wn(Nn({emit:function(e){Dn.addEvent(e),r&&n.push(e),r&&(n.length>10||e.type===gt.Custom&&e.data.tag===g.Kd.INIT_RECORD)&&(r=!1,t&&t(n),Dn.send(!0))}},e)),_n.recordStatus=g.yM.START;var o=function(){wn.addCustomEvent(g.Kd.INIT_RECORD,e.tagList||0),e.tagList&&e.tagList.forEach(Dn.addTag)};"interactive"===document.readyState||"complete"===document.readyState?o(e.tagName):window.addEventListener("load",(function(){o(e.tagName)}))},beforeunload:function(){Dn.add({eventType:f.Ze.BEFORE_UNLOAD,eventParam:"",eventExtend:{},ts:+new Date}),Dn.tagList.add("end"),Dn.send(!0,!0,!0),On.sendReport({source:Dn.config.source,tsid:Dn.config.tsid})},visibilityChange:function(){document[Ln.hidden]?(clearTimeout(Dn.sendID),Dn.send(),Dn.add({eventType:f.Ze.VISIBILITY_HIDDEN,eventParam:"",eventExtend:{},ts:+new Date})):(clearTimeout(Dn.sendID),Dn.autoSend(Dn.config.autoInterval),Dn.add({eventType:f.Ze.VISIBILITY_SHOW,eventParam:"",eventExtend:{},ts:+new Date}))},scroll:function(e){var t=+new Date,n=e.target===window||e.target===document?{eventType:f.Ze.SCROLL,eventParam:"",eventExtend:[{scrollLeft:Dn.getDocumentScroll()[0],scrollTop:Dn.getDocumentScroll()[1],ts:t}],ts:t}:{eventType:f.Ze.SCROLL,eventParam:p.WA(e.target),eventExtend:[{scrollTop:e.target.scrollTop,scrollLeft:e.target.scrollLeft,ts:t}],ts:t};Dn.add(n)},press:function(e){var t={eventType:f.Ze.H5_PRESS,eventParam:(0,p.HG)(e),eventExtend:(0,p.ZS)(e),ts:+new Date};Dn.add(t)},click:function(e){var t={eventType:f.Ze.CLICK,eventParam:(0,p.HG)(e),eventExtend:(0,p.Yi)(e),ts:+new Date};Dn.add(t)},wrapLabelClick:function(e){var t=!1,n=0;return function(r){(0,p.I1)(r.target,"LABEL")?t&&"INPUT"===r.target.tagName?(t=!1,clearTimeout(n)):(e(r),t=!0,clearTimeout(n),n=setTimeout((function(){t=!1}),30)):e(r)}},change:function(e){var t=(0,p.TM)(e),n=t.selStart,r=t.selEnd,o=e.target.tagName.toLowerCase();if("select"===o){var i={eventType:f.Ze.CHANGE,eventParam:(0,p.WA)(e.target),eventExtend:{selStart:n,selEnd:r,value:e.target.value,tagName:o},ts:+new Date};Dn.add(i)}},input:function(e){var t=(0,p.TM)(e),n=t.selStart,r=t.selEnd,o=e.target.tagName.toLowerCase();if("select"!==o){var i=+new Date,a={eventType:f.Ze.INPUT,eventParam:(0,p.WA)(e.target),eventExtend:{selStart:n,selEnd:r,value:e.target.value,tagName:o},ts:i};Dn.add(a)}},onRequest:function(e,t){-1===e.url.indexOf(g.Vh)&&(e.xhr.$userAction={eventType:f.Ze.AJAX,eventParam:e.url,eventExtend:{url:e.url,startTime:+new Date,responseTime:"",rootID:""}},Dn.saveNetwork.onRequest(e.xhr.$userAction,e)),t.next(e)},onError:function(e,t){try{var n=e.config.xhr.$userAction;n&&(n.type=e.error.type,Dn.add(n))}catch(e){}t.next(e.error)},onResponse:function(e,t){try{var n=e.config.xhr.$userAction;if(n){if(Dn.saveNetwork.onResponse(n,e),e.response)try{var r=JSON.parse(e.response);n.eventExtend.responseTime=+new Date,n.eventExtend.rootID=(0,p.YN)(r)}catch(e){}else n.responseTime=+new Date,n.status=e.status;Dn.add(Nn({},n))}}catch(e){}t.next(e)},init:function(e){var t=new Date;if(Dn){var n=new Error("actions.init已调用过，无需再调用");(0,p.r5)(n,{type:g.gt.INIT})}Dn=e,window.addEventListener("beforeunload",_n.beforeunload),Ln.visibilityChange&&window.addEventListener(Ln.visibilityChange,_n.visibilityChange),(Dn.config.saveRequest||Dn.saveNetwork.needHookNetwork())&&(0,Ee._O)({onRequest:_n.onRequest,onError:_n.onError,onResponse:_n.onResponse}),Dn.isDomReply()&&(_n.record({recordCanvas:Dn.config.recordCanvas}),_n.autoTakeFullSnapshot());var r=new xn((function(e){var t=e.text,n=e.path;Dn.addTag("RAGE_CLICK"),(0,p.sN)({type:g.zI.CHECK_CLICK,text:t,path:n})}));g.tq?p.F$.bindEvent(window,"Press",r.onCheckRageClick.bind(r)):window.addEventListener("click",r.onCheckRageClick.bind(r),!0),Dn.config.saveAction&&(g.tq?p.F$.bindEvent(window,"Press",_n.press):window.addEventListener("click",_n.wrapLabelClick(_n.click),!0),window.addEventListener("scroll",En()(_n.scroll,100),!0),window.addEventListener("change",_n.change,!0),window.addEventListener("input",_n.input,!0)),On.setReportItem("actionInit",t)},autoTakeFullSnapshot:function(){An.stop(),An.autoRun((function(){Dn.useNewId(),_n.recordStatus===g.yM.START&&wn.takeFullSnapshot()}),Dn.config.useNewDelay)},takeFullSnapshot:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];An.stop(),_n.recordStatus===g.yM.START&&wn.takeFullSnapshot(),e&&this.autoTakeFullSnapshot()}},Fn=n(3),Pn=function(){function e(){c()(this,e),this.tagList=[],this.add(g.q4)}return l()(e,[{key:"add",value:function(e){return this.tagList.push({tagName:e,ts:(new Date).getTime()}),this.tagList.length}},{key:"stringifyAndClear",value:function(){var e=this.tagList.map((function(e){return"@".concat(e.ts,"-").concat(e.tagName)})).join(",");return this.tagList=[],e}}]),e}(),jn="ALL",Un="REQ",Zn="RES",Bn=function(){function e(t){switch(c()(this,e),t){case jn:this.saveRequest=!0,this.saveResponse=!0;break;case Un:this.saveRequest=!0,this.saveResponse=!1;break;case Zn:this.saveRequest=!1,this.saveResponse=!0;break;default:this.saveRequest=!1,this.saveResponse=!1}}return l()(e,[{key:"needHookNetwork",value:function(){return this.saveRequest||this.saveResponse}},{key:"onResponse",value:function(e,t){this.saveResponse&&(e.eventExtend.response=t.response)}},{key:"onRequest",value:function(e,t){this.saveRequest&&(e.eventExtend.body=t.body||"")}}]),e}();function Gn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gn(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Wn=function(e,t,n){var r=e.list,o=e.$msgID,i=e.cacheID,a=e.param,s=e.baseUrl,c=e.minEc,u=e.needSend,l=void 0===u||u,d="string"==typeof r?JSON.parse(r):r;if(n=n||ye(d),l){var h=d[0]||{},f=d[d.length-1]||{},p=h.event?h.event.timestamp:h.ts?h.ts:"",m=f.event?f.event.timestamp:f.ts?f.ts:"",v=n.length>=5e6,y=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e5,n=[],r=Math.ceil(e.length/t),o=0;o<r;o++)n.push({content:e.slice(0,t),idx:o}),e=e.slice(t);return n}(n,8e4),I=i;Promise.all(y.map((function(e,t){return new Promise((function(n,r){var o="{spID=".concat(t,",gID=").concat(I,",len=").concat(y.length,"}"),i=Vn(Vn({},a),{},{logTime:p,logEndTime:m,content:o+e.content});(0,Fn.j)({url:"".concat(s).concat(g.Vh),config:i,async:!0}).then((function(e){0===e.rc?n(e):!function(e){return e&&e.ResponseStatus&&e.ResponseStatus.Errors&&e.ResponseStatus.Errors.some((function(e){return"FXD302000"===e.ErrorCode}))}(e)?r(new Error("rc: ".concat(e.rc))):r({state:g.$E.DECODE_FAILURE})})).catch((function(e){return r(e)}))}))}))).then((function(e){t({resArr:e,state:g.$E.SUCCESS,$msgID:o,cacheID:i,minEc:c})})).catch((function(e){if(e.state===g.$E.DECODE_FAILURE)return t({state:g.$E.DECODE_FAILURE,$msgID:o,cacheID:i,minEc:c,content:n});t({state:v?g.$E.OVER_MAX_LENGTH:g.$E.FAILED,$msgID:o,cacheID:i,minEc:c,err:{message:e.message,stack:e.stack}})}))}else t({state:g.$E.NO_NEED_SEND,$msgID:o,cacheID:i,minEc:c,content:n})};function Kn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kn(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Yn=function(){function e(){var t=this;c()(this,e),On.init(),(0,p.zU)().then((function(e){t.ubtInfo=e})).then((function(){t.initWorker(),t.initState(),_n.init(t),t.addInit(),t.initCache(),t.initCookie(),t.autoSend(t.config.autoInterval),t.config.tsid||t.updateTsID(),t.tagList.add(g.kQ.START),(0,Fn.j)({url:"".concat(t.getBaseUrl()).concat(g.Vh),config:Hn(Hn({},t.getSendParam()),{},{content:g.kQ.START})}),(0,p.sN)({source:t.config.source,width:(0,p.fM)(),height:(0,p.gp)()},g.bC)}))}return l()(e,[{key:"initCookie",value:function(){this.config.cookieKeyList&&this.config.cookieKeyList.length>0&&this.addCookies(this.config.cookieKeyList)}},{key:"addCookies",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.map((function(e){return{key:e,value:(0,p.ej)(e)}}));this.add({eventType:f.Ze.COOKIE,eventParam:"",eventExtend:{cookies:t},ts:+new Date})}},{key:"updateOrderID",value:function(e){(0,Fn.j)({url:"".concat(this.getBaseUrl()).concat(g.Vh),config:Hn(Hn({},this.getSendParam()),{},{oid:e,content:g.kQ.ORDER})})}},{key:"initWorker",value:function(){var e=this;this.worker=new T,this.worker.$helper={cb:{},on:function(t,n){e.worker.$helper.cb[t]=n,e.worker.latest=t},trigger:function(t,n){e.worker.$helper.cb[t]&&(e.worker.$helper.cb[t](n),delete e.worker.$helper.cb[t])}},this.worker.onmessage=function(t){e.worker.$helper.trigger(t.data.$msgID,t.data)},this.worker.onerror=function(e){(0,p.r5)({message:e.message,colno:e.colno,lineno:e.lineno},{type:g.$E.ERROR})}}},{key:"initState",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&(this.config=E(),this.config.tsid||this.updateTsID()),this.sendByWorker=!0,this.eventsCount=1,this.tagList=this.initTagList(),this.actionList=[],this.events=[],this.sendLocker=!1,this.overLengthCount=0,this.saveNetwork=new Bn(this.config.saveNetwork)}},{key:"addEvent",value:function(e){this.events.push({type:f.Ze.DOM,event:e,ec:this.eventsCount}),this.eventsCount++}},{key:"addTag",value:function(e){return this.tagList.add(e)}},{key:"initTagList",value:function(){var e=new Pn;return this.config.ext&&e.add("ext=".concat(this.config.ext)),e}},{key:"initCache",value:function(){var e=this,t=(new Date).getTime();we.init((function(t,n){t.map((function(t){var r=t.cacheID,o=t.list,i=t.param;i&&i.transId?((0,p.sN)({type:g.zI.SEND_CACHE,cache:i.transId,tsid:e.config.tsid}),e.$send({isLast:!1,param:i,cacheID:r,list:o,minEc:0,updateLocker:!1,storageKey:n})):(we.remove(r),(0,p.r5)({type:"ERROR_STORAGE_DATA"}))}))})),On.setReportItem("initCache",t)}},{key:"postMessage",value:function(e){var t=this,n=v()();return this.worker.postMessage(Hn(Hn({},e),{},{$msgID:n})),{next:function(e){t.worker.$helper.on(n,e)}}}},{key:"autoSend",value:function(e){var t=this;return this.sendID=setTimeout((function(){t.send(),t.autoSend(e)}),e),this.sendID}},{key:"updateConfig",value:function(e){this.config=Hn(Hn({},this.config),e),e.source&&(this.updateTsID(),clearTimeout(this.sendID),this.autoSend(this.config.autoInterval))}},{key:"updateTsID",value:function(){try{var e=new Date,t=[/qa.nt.ctripcorp.com/.test(location.href)?"fat":"prd","".concat(e.getFullYear(),"_").concat(e.getMonth()+1,"_").concat(e.getDate(),"_").concat(this.config.tabID),v()(),this.config.source||"",g.q4,this.config.replayType,g.tq?"hybrid":"online"].join("-");this.config.tsid=t}catch(e){}}},{key:"isScrollEvent",value:function(e,t){return e.eventType===f.Ze.SCROLL&&t.eventType===f.Ze.SCROLL&&e.eventParam===t.eventParam}},{key:"add",value:function(e){if(e){var t=this.getList(),n=t[t.length-1]||{};this.isScrollEvent(e,n)?n.eventExtend=[e.eventExtend[0]]:(t.push(Hn(Hn({},e),{},{ec:this.eventsCount})),this.eventsCount++),t.length>=300&&this.send()}}},{key:"addAjax",value:function(e){var t=e.url,n=e.startTime,r=e.responseTime,o=e.rootID;return this.add({eventType:f.Ze.AJAX,eventParam:t,eventExtend:{url:t,startTime:n,responseTime:r,rootID:o}}),!0}},{key:"addCSRReq",value:function(e){var t=e.url,n=e.rootID,r=e.requestURL;return this.add({eventType:f.Ze.CSR_REQ,eventParam:t,eventExtend:{requestURL:r,rootID:n},ts:+new Date}),!0}},{key:"addSSR",value:function(e){return this.add({eventType:f.Ze.SSR,eventParam:e,eventExtend:{},ts:+new Date}),!0}},{key:"getDocumentScroll",value:function(){if(void 0!==window.pageYOffset)return[window.pageXOffset,window.pageYOffset];var e=document,t=e.documentElement,n=e.body;return[t.scrollLeft||n.scrollLeft||0,t.scrollTop||n.scrollTop||0]}},{key:"addInit",value:function(){var e=this;if("complete"===document.readyState){var t="";try{t=(new window.Intl.DateTimeFormat).resolvedOptions().timeZone}catch(e){}var n={eventType:f.Ze.INIT,eventParam:window.location.href,eventExtend:{w:window.innerWidth,h:window.innerHeight,tzo:(new Date).getTimezoneOffset(),pr:window.devicePixelRatio,platform:"hy",tz:t},ts:+new Date};this.add(n)}else document.addEventListener("readystatechange",(function(t){"complete"===t.target.readyState&&e.addInit()}))}},{key:"getBaseUrl",value:function(){var e,t=this.config,n=t.source;if(t.saveProd)e="//m.ctrip.com/restapi/soa2/";else if(n&&"ibu_payment_online,ibu_payment_h5,ibu_wallet_online,ibu_wallet_h5".indexOf(n)>-1)e="//www.trip.com/restapi/soa2/";else if(/\.qa\.nt\.(ctripcorp|tripqate)\.com/.test(location.host)||/\d+\.\d+\.\d+\.\d+/.test(location.host)||"localhost"===location.host)e="//gateway.m.fws.qa.nt.ctripcorp.com/restapi/soa2/";else if(location.host.indexOf(".trip.com")>-1){var r=window.location.hostname;e="//".concat(r,"/restapi/soa2/")}else e="//m.ctrip.com/restapi/soa2/";return"https:".concat(e)}},{key:"isDomReply",value:function(){return this.config.replayType===g.dN.DOM}},{key:"getList",value:function(){return this.isDomReply()?this.events:this.actionList}},{key:"isInValidSendList",value:function(){return!("wait"!==this.config.source&&this.config.tsid&&!this.sendLocker)||0===this.getList().length}},{key:"getSendParam",value:function(){var e=this.ubtInfo,t=e?[{name:"pvid",value:""+e.pvid},{name:"vid",value:""+e.vid},{name:"sid",value:""+e.sid}]:[];return{head:{auth:this.config.auth||(0,p.ej)("cticket")||(0,p.v0)(),cid:this.config.cid||(0,p.ej)("clientId")||y.t.getItem("GUID")||(0,p.ej)("GUID")||"",ctok:"",cver:"1.0",extension:t,lang:"01",sid:"",syscode:"09"},logTime:+new Date,oid:this.config.oid||"",transId:this.config.tsid,source:this.config.source,uid:this.config.uid||"",version:g.q4,extend:this.tagList.stringifyAndClear()}}},{key:"useNewId",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ext,n=this.config.tsid;this.send(!0,!0),On.sendReport({source:this.config.source,tsid:this.config.tsid},!0),t&&(this.config.ext=t),this.initState(!1),this.addInit(),this.updateTsID(),(0,p.sN)({type:g.zI.USE_NEW_ID,preID:n,currentID:this.config.tsid})}},{key:"useNewConfig",value:function(e){this.useNewId(e),_n.takeFullSnapshot()}},{key:"send",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===this.getList().length)return Promise.resolve(g.Z7.EMPTY_LIST);if(!e&&this.isInValidSendList())return Promise.resolve(g.Z7.INVALID);this.sendLocker=!0;var r=t?0:(0,p.s)(this.getList(),{ec:g.TZ}).ec,o=v()(),i=this.getSendParam();if(n){var a=(new Date).getTime();return we.addCache(o,{list:this.getList(),param:i}),void we.save({onSuccess:function(){On.setReportItem("saveCacheSuccess",a)},onError:function(e,t){On.setReportItem("saveCacheFailed",a),(0,p.r5)(e,Hn({type:g.Z3},t))}})}return this.$send({isLast:n,list:this.getList(),minEc:r,cacheID:o,param:i,storageKey:we.getCurrentKey()})}},{key:"$send",value:function(e){var t=this,n=e.param,r=void 0===n?{}:n,i=e.cacheID,a=void 0===i?""+new Date:i,s=e.list,c=void 0===s?[]:s,u=e.minEc,l=void 0===u?0:u,d=e.updateLocker,f=void 0===d||d,m=e.isLast,v=void 0!==m&&m,y=e.storageKey,I=c.filter((function(e){return"DOM"===e.type})),C=I[0]&&I[0].ec||-1;if(!this.clearDataProcess(c,r.transId)){c.length||(0,p.sN)({type:g.zI.SEND_EMPTY_LIST,list:c,minEc:l,cacheID:a});var b={baseUrl:this.getBaseUrl(),minEc:l,param:r,cacheID:a,list:c,needSend:this.sendByWorker};this.postMessage(b).next(function(){var e=o()(h().mark((function e(n){var o,i,a,s,c,u,l,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){[g.$E.DECODE_FAILURE,g.$E.NO_NEED_SEND].includes(n.state)?(Wn(Hn(Hn({},b),{},{needSend:!0}),e,n.content),t.sendByWorker=!1):e()}));case 2:o=e.sent,a=(i=o||n).resArr,s=i.cacheID,c=i.minEc,u=i.state,l=i.err,f&&(t.sendLocker=!1),u===g.$E.OVER_MAX_LENGTH?((0,p.r5)(l,{type:"OVER_MAX_LENGTH"}),c>0&&t.updateList(c),we.remove(y,s),f&&(t.overLengthCount=0)):u===g.$E.SUCCESS?(d=a&&a.map(p.YN),c>0&&t.updateList(c),we.remove(y,s),f&&(t.overLengthCount=0),1===C&&t.addTag("rootID="+JSON.stringify(d))):(0,p.r5)(l,{type:"REQUEST_ERR",isLast:v,tsid:r.transId});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}},{key:"updateList",value:function(e){var t=this.getList(),n=t.filter((function(t){return t.ec>e}));t.length=0,n.forEach((function(e){return t.push(e)}))}},{key:"needClear",value:function(){return this.overLengthCount>=5}},{key:"clear",value:function(e,t){return(0,p.sN)({type:g.zI.OVER_LENGTH,tsid:t}),we.removeAll(),this.initState(),!0}},{key:"updateOverLengthCount",value:function(e){e.length>=this.config.maxLength?this.overLengthCount++:this.overLengthCount=0}},{key:"clearDataProcess",value:function(e,t){return this.needClear()?this.clear(e,t):(this.updateOverLengthCount(e),!1)}},{key:"stopRecord",value:function(){_n.stopRecord()}},{key:"record",value:function(e,t){this.stopRecord(),_n.record(e,t)}},{key:"pack",value:function(e){return ye(e)}}]),e}()},952:(e,t,n)=>{"use strict";n.d(t,{t:()=>r});var r=n(207).hv?window.sessionStorage:window.localStorage},705:(e,t,n)=>{var r=n(639).Symbol;e.exports=r},239:(e,t,n)=>{var r=n(705),o=n(607),i=n(333),a=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?o(e):i(e)}},561:(e,t,n)=>{var r=n(990),o=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(o,""):e}},957:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},607:(e,t,n)=>{var r=n(705),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=i.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(e){}var o=a.call(e);return r&&(t?e[s]=n:delete e[s]),o}},333:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},639:(e,t,n)=>{var r=n(957),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();e.exports=i},990:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},279:(e,t,n)=>{var r=n(218),o=n(771),i=n(841),a=Math.max,s=Math.min;e.exports=function(e,t,n){var c,u,l,d,h,f,p=0,g=!1,m=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=c,r=u;return c=u=void 0,p=t,d=e.apply(r,n)}function I(e){return p=e,h=setTimeout(b,t),g?y(e):d}function C(e){var n=e-f;return void 0===f||n>=t||n<0||m&&e-p>=l}function b(){var e=o();if(C(e))return w(e);h=setTimeout(b,function(e){var n=t-(e-f);return m?s(n,l-(e-p)):n}(e))}function w(e){return h=void 0,v&&c?y(e):(c=u=void 0,d)}function S(){var e=o(),n=C(e);if(c=arguments,u=this,f=e,n){if(void 0===h)return I(f);if(m)return clearTimeout(h),h=setTimeout(b,t),y(f)}return void 0===h&&(h=setTimeout(b,t)),d}return t=i(t)||0,r(n)&&(g=!!n.leading,l=(m="maxWait"in n)?a(i(n.maxWait)||0,t):l,v="trailing"in n?!!n.trailing:v),S.cancel=function(){void 0!==h&&clearTimeout(h),p=0,c=f=u=h=void 0},S.flush=function(){return void 0===h?d:w(o())},S}},218:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},5:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},448:(e,t,n)=>{var r=n(239),o=n(5);e.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==r(e)}},771:(e,t,n)=>{var r=n(639);e.exports=function(){return r.Date.now()}},493:(e,t,n)=>{var r=n(279),o=n(218);e.exports=function(e,t,n){var i=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return o(n)&&(i="leading"in n?!!n.leading:i,a="trailing"in n?!!n.trailing:a),r(e,t,{leading:i,maxWait:t,trailing:a})}},841:(e,t,n)=>{var r=n(561),o=n(218),i=n(448),a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return NaN;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=s.test(e);return n||c.test(e)?u(e.slice(2),n?2:8):a.test(e)?NaN:+e}},71:e=>{function t(e){var t=0,n=[];function r(){var r;--t<e&&(r=n.shift(),i.queue=n.length,r&&o(r.fn).then(r.resolve).catch(r.reject))}function o(e){t++;try{return Promise.resolve(e()).then((function(e){return r(),e}),(function(e){throw r(),e}))}catch(e){return r(),Promise.reject(e)}}var i=function(r){return t>=e?function(e){return new Promise((function(t,r){n.push({fn:e,resolve:t,reject:r}),i.queue=n.length}))}(r):o(r)};return i}function n(e,t){var n=!1,r=this;return Promise.all(e.map((function(){var e=arguments;return r((function(){if(!n)return t.apply(void 0,e).catch((function(e){throw n=!0,e}))}))})))}function r(e){return e.queue=0,e.map=n,e}e.exports=function(e){return r(e?t(e):function(e){return e()})}},666:e=>{var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,i=Object.create(o.prototype),a=new T(r||[]);return i._invoke=function(e,t,n){var r=l;return function(o,i){if(r===h)throw new Error("Generator is already running");if(r===f){if("throw"===o)throw i;return R()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=E(a,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=f,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var c=u(e,t,n);if("normal"===c.type){if(r=n.done?f:d,c.arg===p)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=f,n.method="throw",n.arg=c.arg)}}}(e,n,a),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var l="suspendedStart",d="suspendedYield",h="executing",f="completed",p={};function g(){}function m(){}function v(){}var y={};y[i]=function(){return this};var I=Object.getPrototypeOf,C=I&&I(I(O([])));C&&C!==n&&r.call(C,i)&&(y=C);var b=v.prototype=g.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function S(e,t){function n(o,i,a,s){var c=u(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function E(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method))return p;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var o=u(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,p;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,p):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function O(e){if(e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:R}}function R(){return{value:t,done:!0}}return m.prototype=b.constructor=v,v.constructor=m,v[s]=m.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(S.prototype),S.prototype[a]=function(){return this},e.AsyncIterator=S,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new S(c(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),b[s]="Generator",b[i]=function(){return this},b.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=O,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;k(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:O(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),p}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}},877:(e,t,n)=>{var r=n(570),o=n(171),i=o;i.v1=r,i.v4=o,e.exports=i},327:e=>{for(var t=[],n=0;n<256;++n)t[n]=(n+256).toString(16).substr(1);e.exports=function(e,n){var r=n||0,o=t;return[o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]]].join("")}},217:e=>{var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},570:(e,t,n)=>{var r,o,i=n(217),a=n(327),s=0,c=0;e.exports=function(e,t,n){var u=t&&n||0,l=t||[],d=(e=e||{}).node||r,h=void 0!==e.clockseq?e.clockseq:o;if(null==d||null==h){var f=i();null==d&&(d=r=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==h&&(h=o=16383&(f[6]<<8|f[7]))}var p=void 0!==e.msecs?e.msecs:(new Date).getTime(),g=void 0!==e.nsecs?e.nsecs:c+1,m=p-s+(g-c)/1e4;if(m<0&&void 0===e.clockseq&&(h=h+1&16383),(m<0||p>s)&&void 0===e.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=p,c=g,o=h;var v=(1e4*(268435455&(p+=122192928e5))+g)%4294967296;l[u++]=v>>>24&255,l[u++]=v>>>16&255,l[u++]=v>>>8&255,l[u++]=255&v;var y=p/4294967296*1e4&268435455;l[u++]=y>>>8&255,l[u++]=255&y,l[u++]=y>>>24&15|16,l[u++]=y>>>16&255,l[u++]=h>>>8|128,l[u++]=255&h;for(var I=0;I<6;++I)l[u+I]=d[I];return t||a(l)}},171:(e,t,n)=>{var r=n(217),o=n(327);e.exports=function(e,t,n){var i=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[i+s]=a[s];return t||o(a)}},477:e=>{"use strict";e.exports=function(e,t,n,r){var o=self||window;try{try{var i;try{i=new o.Blob([e])}catch(t){(i=new(o.BlobBuilder||o.WebKitBlobBuilder||o.MozBlobBuilder||o.MSBlobBuilder)).append(e),i=i.getBlob()}var a=o.URL||o.webkitURL,s=a.createObjectURL(i),c=new o[t](s,n);return a.revokeObjectURL(s),c}catch(r){return new o[t]("data:application/javascript,".concat(encodeURIComponent(e)),n)}}catch(e){if(!r)throw Error("Inline worker is not supported");return new o[t](r,n)}}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=n(575),t=n.n(e),r=n(70),o=n(3);new function e(){t()(this,e);try{!window.MutationObserver||/mock_token=/.test(window.location)||window.sessionStorage&&window.sessionStorage.getItem("mock_token")?r.r5({type:"NOT_SUPPORT"}):r.ES("playback",location.href)?(this.Bridge=n(453).k,window.$bridge=new this.Bridge):window.$tracker||(this.Tracker=n(739).f,window.$tracker=new this.Tracker,window.$tracker.postRequestTestObj=o.u)}catch(e){r.r5({type:"CONSTRUCTOR",msg:e.message,stack:e.stack})}}})()})();