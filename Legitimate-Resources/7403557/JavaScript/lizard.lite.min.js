/*
* Ctrip Lizard JavaScript Framework
* Copyright(C) 2008 - 2020, All rights reserved,ctrip.com.
* Date:2020-09-21 11:17:31
* tag:w-202009211117
*/
!function(i,t){function e(t){var e="/restapi/soa2/",n=u.getDomain(),a=i.location.protocol.indexOf("https")>-1?"https":"http",t=[a,"://",n,e,t].join("");return t}function n(){if(_.instance)for(var i=null;i=_.__callbackQueue.ready.shift();)try{i()}catch(t){}if(_.hybridInstance)for(var e=null;e=_.__callbackQueue.hybridReady.shift();)try{e()}catch(t){}}function a(){var t,e,n,a,o={MASTER:["Ctrip_CtripWireless","Unicom_CtripWireless","Pro_CtripWireless"],YOUTH:["Youth_CtripWireless"],SML:["sml_wireless"],GS:["gs_wireless"],WE:["we_wireless"],TV:["AndroidTV_CtripWireless"],TY:["Tieyou_TieyouWireless"],DIS:["Discount_CtripWireless"]},r=function(i){i+="",i.indexOf(".")<0&&(i+=".0"),i=(i+"").split(".");for(var t=0;t<i.length;t++)i[t]="000".substr(i[t].length)+i[t];return i.join(".")},c=RegExp,l=i.navigator.userAgent;for(var d in o)for(var s=0;s<o[d].length;s++)if(new c(o[d][s]+"_([\\d.]+)").test(l)){t="CTRIP",e=d,n=c.$1;break}return t||/MicroMessenger\/([\d.]+)/.test(l)&&(t="TECENT",e="WEIXIN",n=c.$1),n&&(a=r(n)),{vendor:{toString:function(){return t},is:function(i){return(_.app.code.is("TV")||_.app.code.is("TY"))&&"CTRIP"==i?!1:i.toUpperCase()==t}},code:{toString:function(){return e},is:function(i){return i.toUpperCase()==e}},version:{toString:function(){return n},lt:function(i){return a<r(i)},lte:function(i){return a<=r(i)},eq:function(i){return a==r(i)},gte:function(i){return a>=r(i)},gt:function(i){return a>r(i)}}}}var o;try{o=!!i.localStorage}catch(r){o=!1,Object.defineProperty(i,"localStorage",{value:{}})}var c,l,d=i.navigator.userAgent.match(/MSIE\s([\d.]+)/)||i.navigator.userAgent.match(/Trident\/[\d](?=[^\?]+).*rv:([0-9.].)/)||!1;void 0===i.__bfi&&(i.__bfi=[]);var s=function(){if(Object.prototype.hasOwnProperty.call(i,"seedLocalStorageFlag")&&!i.seedLocalStorageFlag||!o)return!0;var t,e="TEST_PRIVATE_MODEL",n="1";try{c=i.localStorage,l=c.setItem.bind(c),c.setItem(e,n),t=c.getItem(e),c.removeItem(e)}catch(a){return"QuotaExceededError"!=a.name&&"NS_ERROR_DOM_QUOTA_REACHED"!=a.name||2!==JSON.stringify(i.localStorage).length?!1:!0}return t===n?!1:!0}();s||d||"undefined"==typeof c||"undefined"==typeof l||!o||(i.localStorage.setItem=function(){var t=function(){for(var i in c)i.toLowerCase().indexOf("_cache")>=0&&c.removeItem(i)},e=function(){for(var i in c)(i.indexOf("BMap_tile")>=0||i.indexOf("_AMap_main")>=0)&&c.removeItem(i)},n=function(){var i={PAYMENT2_:1,SALESOBJ:1,SALES_OBJECT:1,UNION:1,SALES:1,AUTHSTORE:1,HEADSTORE:1,PAUTH:1,C_CLEAR_OVERDUE:1,SOURCEID:1};for(var t in c)i.hasOwnProperty(t)||c.removeItem(t)},a=[t,e,n],o=function(t,e,n){var r=Array.prototype.slice.call(n?n:a),d="noneCachedKey";try{l(t,e),t.toLowerCase().indexOf("_cache")>=0&&(d="cachedKey")}catch(s){if("QuotaExceededError"==s.name||"NS_ERROR_DOM_QUOTA_REACHED"==s.name){if(0==r.length)return void i.__bfi.push(["_trackMatrix","101316",{message:"QuotaExceededError",key:t,tag:!0,type:d},1]);var u=encodeURIComponent(JSON.stringify(c)).length;i.__bfi.push(["_trackMatrix","101316",{message:"QuotaExceededError",key:t,type:d},u]);var p=r.shift();p(),o(t,e,r)}else i.__bfi.push(["_trackMatrix","101316",{message:s.message,key:t,type:d},1])}};return o}());var u=function(){function e(i){return null==i?String(i):b[x.call(i)]||"object"}function n(i){return"string"==typeof i}function a(i){return"function"==e(i)}function o(i){return null!=i&&i==i.window}function r(i){return"object"==e(i)}function c(i){return r(i)&&!o(i)&&Object.getPrototypeOf(i)==Object.prototype}function l(i){return"number"==typeof i.length}function d(i){return i._zid||(i._zid=_++)}function s(i,t,e){for(var n in t)e&&(c(t[n])||h(t[n]))?(c(t[n])&&!c(i[n])&&(i[n]={}),h(t[n])&&!h(i[n])&&(i[n]=[]),s(i[n],t[n],e)):void 0!==t[n]&&(i[n]=t[n])}for(var p,h=Array.isArray||function(i){return i instanceof Array},g=[],f=g.slice,b={},x=b.toString,_=1,v="Boolean Number String Function Array Date RegExp Object Error".split(" "),w=0;w<v.length;w++)p=v[w],b["[object "+p+"]"]=p.toLowerCase();var y={};return y._DAY1=["å‘¨æ—¥","å‘¨ä¸€","å‘¨äºŒ","å‘¨ä¸‰","å‘¨å››","å‘¨äº”","å‘¨å…­"],y._DAY2=["æ˜ŸæœŸå¤©","æ˜ŸæœŸä¸€","æ˜ŸæœŸäºŒ","æ˜ŸæœŸä¸‰","æ˜ŸæœŸå››","æ˜ŸæœŸäº”","æ˜ŸæœŸå…­"],y._MAPS={d:function(i,t,e){var n=t.getDate().toString();return n.length<2&&(n="0"+n),i.replace(new RegExp(e,"mg"),n)},j:function(i,t,e){return i.replace(new RegExp(e,"mg"),t.getDate())},N:function(i,t,e){var n=t.getDay();return 0===n&&(n=7),i.replace(new RegExp(e,"mg"),n)},w:function(i,t,e){var n=t.getDay(),a=y._DAY1[n];return i.replace(new RegExp(e,"mg"),a)},W:function(i,t,e){var n=t.getDay(),a=y._DAY2[n];return i.replace(new RegExp(e,"mg"),a)},m:function(i,t,e){var n=(t.getMonth()+1).toString();return n.length<2&&(n="0"+n),i.replace(new RegExp(e,"mg"),n)},n:function(i,t,e){return i.replace(e,t.getMonth()+1)},Y:function(i,t,e){return i.replace(new RegExp(e,"mg"),t.getFullYear())},y:function(i,t,e){return i.replace(new RegExp(e,"mg"),t.getYear())},g:function(i,t,e){var n=t.getHours();return n>=12&&(n-=12),i.replace(new RegExp(e,"mg"),n)},G:function(i,t,e){return i.replace(new RegExp(e,"mg"),t.getHours())},h:function(i,t,e){var n=t.getHours();return n>=12&&(n-=12),n+="",n.length<2&&(n="0"+n),i.replace(new RegExp(e,"mg"),n)},H:function(i,t,e){var n=t.getHours().toString();return n.length<2&&(n="0"+n),i.replace(new RegExp(e,"mg"),n)},i:function(i,t,e){var n=t.getMinutes().toString();return n.length<2&&(n="0"+n),i.replace(new RegExp(e,"mg"),n)},s:function(i,t,e){var n=t.getSeconds().toString();return n.length<2&&(n="0"+n),i.replace(new RegExp(e,"mg"),n)},I:function(i,t,e){var n=t.getMinutes().toString();return i.replace(new RegExp(e,"mg"),n)},S:function(i,t,e){var n=t.getSeconds().toString();return i.replace(new RegExp(e,"mg"),n)},D:function(i,t,e){var n=new Date;n.setHours(0,0,0,0),t=new Date(t.valueOf()),t.setHours(0,0,0,0);var a=864e5,o="",r=t-n;return r>=0&&(a>r?o="ä»Šå¤©":2*a>r?o="æ˜Žå¤©":3*a>r&&(o="åŽå¤©")),i.replace(new RegExp(e,"mg"),o)}},y.format=function(i,t){"string"!=typeof i&&(i=""),t=t||new Date;for(var e in y._MAPS)i=y._MAPS[e].call(this,i,t,e);return i},y.isObject=function(i){return i===Object(i)},y.getCookie=function(i){var e=t.cookie,n="";if(e)for(var a,o,r=e.split("; "),c=0;c<r.length;c++)a=r[c],o=a.indexOf("="),a.substr(0,o)==i&&(n=a.substr(o+1));return n},y.setCookie=function(i,e,n,a,o,r){try{e=y.isObject(e)?JSON.stringify(e):e,t.cookie=i+"="+escape(e)+(n?"; expires="+n.toGMTString():"")+(a?"; path="+a:"")+(o?"; domain="+o:"")+(r?"; secure":"")}catch(c){}},y.extend=function(i){var t,e=f.call(arguments,1);return"boolean"==typeof i&&(t=i,i=e.shift()),e.forEach(function(e){s(i,e,t)}),i},y.ObjSet=function(i,t,e){if(!t)return null;var n=t.split(".");i=i||{};for(var a=0,o=n.length,r=Math.max(o-1,0);o>a;a++)r>a?i=i[n[a]]=i[n[a]]||{}:i[n[a]]=e;return i},y.getObj=function(i,t){if(!i||!t)return null;var e=t.split(".");i=i||{};var n=0,a=e.length;for(Math.max(a-1,0);a>n;n++)if(i=i[e[n]],null===i||"undefined"==typeof i)return null;return i},y.isUrl=function(i){return/^http(s)?:\/\/[A-Za-z0-9\-]+\.[A-Za-z0-9]+[\/=\?%\-&_~`@[\]\:+!]*([^<>])*$/.test(i)},y.getUrlParam=function(i,t){var e=new RegExp("(\\?|&)"+t+"=([^&]+)(&|$)","i"),n=i.match(e);return n?n[2]:""},y.getUrlParams=function(i){for(var t,e,n,a,o=i.split("://"),r=/([^&=?]+)=([^&]+)/g,c={};t=r.exec(o[0]);)a=t[1],e=t[2],c[a]=e;if(o[1]){var l=0;n=y._.size(c),y._.each(c,function(i,t){++l==n&&(c[t]+="://"+o[1])})}return c},y.proxy=function(i,t){var e=2 in arguments&&f.call(arguments,2);if(a(i)){var o=function(){return i.apply(t,e?e.concat(f.call(arguments)):arguments)};return o._zid=d(i),o}if(n(t))return e?(e.unshift(i[t],i),y.proxy.apply(null,e)):y.proxy(i[t],i);throw new TypeError("expected function")},y.getGuid=function(){var t=u.getCookie("GUID"),e=i.localStorage;if(t)try{e.setItem("GUID",t)}catch(n){}else t=e.getItem("GUID")||"";return t},y.getDomain=function(t){var e=i.location.host,n="accounts"==t,a=n?"accounts.ctrip.com":"m.ctrip.com";return e.match(/^m\.ctrip\.com/i)?"https"==t&&(a="sec-m.ctrip.com"):e.match(/\.uat\.qa/i)?a=n?"accounts.uat.qa.nt.ctripcorp.com":"gateway.m.uat.qa.nt.ctripcorp.com":(e.match(/\.fat/i)||e.match(/\.lpt/i)||e.match(/\.fws/i)||e.match(/^(localhost|172\.16|127\.0)/i))&&(a=n?"accounts.fat466.qa.nt.ctripcorp.com":"gateway.m.fws.qa.nt.ctripcorp.com"),a},y.isString=n,y.$=function(){function t(i,t){if(t||!i.isDefaultPrevented){t||(t=i);for(var e in T){var n=T[e],a=t[e];i[e]=function(){return this[n]=k,a&&a.apply(t,arguments)},i[n]=A}(void 0!==t.defaultPrevented?t.defaultPrevented:"returnValue"in t?t.returnValue===!1:t.getPreventDefault&&t.getPreventDefault())&&(i.isDefaultPrevented=k)}return i}function o(i,t,e,n){var a,r=h(t),l=c(t);m.each(t,function(t,c){a=m.type(c),n&&(t=e?n:n+"["+(l||"object"==a||"array"==a?t:"")+"]"),!n&&r?i.add(c.name,c.value):"array"==a||!e&&"object"==a?o(i,c,e,t):i.add(t,c)})}function r(i){return i&&(i=i.split(";",2)[0]),i&&(i==S?"html":i==P?"json":F.test(i)?"script":I.test(i)&&"xml")||"text"}function d(i,t,e){var n=m.Event(t);return n._args=e,i.dispatchEvent(n),!n.isDefaultPrevented()}function s(i,t,e,n){return i.global?d(t||D,e,n):void 0}function u(i){i.global&&0===m.active++&&s(i,null,"ajaxStart")}function p(i){i.global&&!--m.active&&s(i,null,"ajaxStop")}function g(i,t){var e=t.context;return t.beforeSend.call(e,i,t)===!1||s(t,e,"ajaxBeforeSend",[i,t])===!1?!1:void s(t,e,"ajaxSend",[i,t])}function f(i,t,e,n){var a=e.context,o="success";e.success.call(a,i,o,t),n&&n.resolveWith(a,[i,o,t]),s(e,a,"ajaxSuccess",[t,e,i]),x(o,t,e)}function b(i,t,e,n,a){var o=n.context;n.error.call(o,e,t,i),a&&a.rejectWith(o,[e,t,i]),s(n,o,"ajaxError",[e,n,i||t]),x(t,e,n)}function x(i,t,e){var n=e.context;e.complete.call(n,t,i),s(e,n,"ajaxComplete",[t,e]),p(e)}function _(){}function v(i,t){return""==t?i:(i+"&"+t).replace(/[&?]{1,2}/,"?")}function w(i){i.processData&&i.data&&"string"!=m.type(i.data)&&(i.data=m.param(i.data,i.traditional)),!i.data||i.type&&"GET"!=i.type.toUpperCase()||(i.url=v(i.url,i.data),i.data=void 0)}var m={};m.each=function(i,t){var e,n;if(l(i)){for(e=0;e<i.length;e++)if(t.call(i[e],e,i[e])===!1)return i}else for(n in i)if(t.call(i[n],n,i[n])===!1)return i;return i};var k=function(){return!0},A=function(){return!1},T={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};m.Event=function(i,e){n(i)||(e=i,i=e.type);var a=D.createEvent("Events"),o=!0;if(e)for(var r in e)"bubbles"==r?o=!!e[r]:a[r]=e[r];return a.initEvent(i,o,!0),t(a)},m.param=function(i,t){var e=[];return e.add=function(i,t){this.push(escape(i)+"="+escape(t))},o(e,i,t),e.join("&").replace(/%20/g,"+")};var z,j,C=0,D=i.document,F=/^(?:text|application)\/javascript/i,I=/^(?:text|application)\/xml/i,P="application/json",S="text/html",U=/^\s*$/;return m.ajaxJSONP=function(t,e){function n(n,c){r&&clearTimeout(r);try{d.onload=d.onerror=null,d.parentNode&&d.parentNode.removeChild(d)}catch(n){}"error"!=n.type&&o?f(o[0],p,t,e):b(null,c||"error",p,t,e),i[l]=s,o&&a(s)&&s(o[0]),s=o=void 0,i[l]=function(){}}if(!("type"in t))return m.ajax(t);var o,r,c=t.jsonpCallback,l=(a(c)?c():c)||"jsonp"+ ++C,d=D.createElement("script"),s=i[l],u=function(i){i=i||"abort";var t=m.Event("error");return t._args=i,t.target=d,n(t,i),t.isImmediatePropagationStopped()?!1:void 0},p={abort:u};return e&&e.promise(p),d.onload=n,d.onerror=n,g(p,t)===!1?(u("abort"),p):(i[l]=function(){o=arguments},d.src=t.url.replace(/\?(.+)=\?/,"?$1="+l),D.head.appendChild(d),t.timeout>0&&(r=setTimeout(function(){u("timeout")},t.timeout)),p)},m.active=0,m.type=e,m.ajaxSettings={type:"GET",beforeSend:_,success:_,error:_,complete:_,context:null,global:!0,xhr:function(){return new i.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:P,xml:"application/xml, text/xml",html:S,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},m.ajax=function(t){var e=y.extend({},t||{}),n=m.Deferred&&m.Deferred();for(z in m.ajaxSettings)void 0===e[z]&&(e[z]=m.ajaxSettings[z]);u(e),e.crossDomain||(e.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(e.url)&&RegExp.$2!=i.location.host),e.url||(e.url=i.location.toString()),w(e);var a=e.dataType,o=/\?.+=\?/.test(e.url);if(o&&(a="jsonp"),e.cache!==!1&&(t&&t.cache===!0||"script"!=a&&"jsonp"!=a)||(e.url=v(e.url,"_="+Date.now())),"jsonp"==a)return o||(e.url=v(e.url,e.jsonp?e.jsonp+"=?":e.jsonp===!1?"":"callback=?")),m.ajaxJSONP(e,n);var c,l=e.accepts[a],d={},s=function(i,t){d[i.toLowerCase()]=[i,t]},p=/^([\w-]+:)\/\//.test(e.url)?RegExp.$1:i.location.protocol,h=e.xhr(),x=h.setRequestHeader;if(n&&n.promise(h),e.crossDomain||s("X-Requested-With","XMLHttpRequest"),s("Accept",l||"*/*"),(l=e.mimeType||l)&&(l.indexOf(",")>-1&&(l=l.split(",",2)[0]),h.overrideMimeType&&h.overrideMimeType(l)),(e.contentType||e.contentType!==!1&&e.data&&"GET"!=e.type.toUpperCase())&&s("Content-Type",e.contentType||"application/x-www-form-urlencoded"),e.headers)for(j in e.headers)s(j,e.headers[j]);if(h.setRequestHeader=s,h.onreadystatechange=function(){if(4==h.readyState){h.onreadystatechange=_,clearTimeout(c);var i,t=!1;if(h.status>=200&&h.status<300||304==h.status||0==h.status&&"file:"==p){a=a||r(e.mimeType||h.getResponseHeader("content-type")),i=h.responseText;try{"script"==a?(1,eval)(i):"xml"==a?i=h.responseXML:"json"==a&&(i=U.test(i)?null:JSON.parse(i))}catch(o){t=o}t?b(t,"parsererror",h,e,n):f(i,h,e,n)}else b(h.statusText||null,h.status?"error":"abort",h,e,n)}},g(h,e)===!1)return h.abort(),b(null,"abort",h,e,n),h;var k="async"in e?e.async:!0;if(h.open(e.type,e.url,k,e.username,e.password),e.xhrFields)for(j in e.xhrFields)h[j]=e.xhrFields[j];for(j in d)x.apply(h,d[j]);return e.timeout>0&&(c=setTimeout(function(){h.onreadystatechange=_,h.abort(),b(null,"timeout",h,e,n)},e.timeout)),h.send(e.data?e.data:null),h},m}(),y._=function(){var i={},t=t=Object.keys,e={},n=Array.prototype,a=Object.prototype,o=a.hasOwnProperty,r=n.forEach;i.keys=t||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var n in t)i.has(t,n)&&(e[e.length]=n);return e},i.has=function(i,t){return o.call(i,t)},i.size=function(t){return null==t?0:t.length===+t.length?t.length:i.keys(t).length};var c=i.each=function(t,n,a){if(null!=t)if(r&&t.forEach===r)t.forEach(n,a);else if(t.length===+t.length){for(var o=0,c=t.length;c>o;o++)if(n.call(a,t[o],o,t)===e)return}else for(var l in t)if(i.has(t,l)&&n.call(a,t[l],l,t)===e)return};return c(["Arguments","Function","String","Number","Date","RegExp"],function(t){i["is"+t]=function(i){return x.call(i)=="[object "+t+"]"}}),i}(),y}(),p=function(){function t(){this.performance={},this.isapp="0",this.defaults={AjaxReady:{name:"JS.Lizard.AjaxReady",tags:{url:"",info:"",status:""}},AjaxMessageSize:{name:"JS.Lizard.AjaxMessageSize",tags:{url:""}}},this.uuid=0}return i.__bfi||(i.__bfi=[]),t.prototype={send:function(t,e,n,a){var o=["_trackMatrix",t,e,n,a];("JS.Lizard.GeoRequest"!=t||"string"==typeof e.url&&e.url.match(/^(Native|Web) function (number|detail|error)$/))&&i.__bfi.push(o)},getTime:function(){return(new Date).getTime()},initOptions:function(i){i.version="2.1",i.isapp=this.isapp,i.network="unknown"},log:function(i,t){i.url&&u.isString(i.url)&&(i.url.indexOf("_fxpcqlniredt")>-1&&(i.url=i.url.substring(0,i.url.indexOf("_fxpcqlniredt")-1)),i.url=i.url.replace(new RegExp((+new Date+"").slice(0,8)+"\\d{5}"),"__TIME__"));var e=this.defaults[i.name],n={};this.initOptions(n);for(var a in e.tags)n[a]=(i[a]||e.tags[a])+"";"AjaxMessageSize"!=i.name&&(n.distribution=this.distribution(t)),this.send(e.name,n,t,this.getTime())},group:function(i,t){t.startTime=this.getTime(),this.performance[i]=t},groupTag:function(i,t,e){var n=this.performance[i];return n||(this.performance[i]=n={}),3==arguments.length&&(n[t]=e),n[t]},groupEnd:function(i){var t=this.performance[i]||{};this.log(t,this.getTime()-t.startTime)},getUuid:function(){return"Performance_"+ ++this.uuid},distribution:function(i){var t="";return i>=0&500>=i?t="[0,500]":i>=501&1e3>=i?t="[501,1000]":i>=1001&2e3>=i?t="[1001,2000]":i>=2001&3e3>=i?t="[2001,3000]":i>=3001&4e3>=i?t="[3001,4000]":i>=4001&&(t="[4001,--]"),t+"(ms)"}},new t}(),h=function(){function t(t){var e=p.getUuid();p.group(e,{name:"AjaxReady",url:t.url,data:t.data});var n=0,a={url:t.url,type:t.type,dataType:t.dataType,data:t.data,contentType:t.contentType,timeout:t.timeout||5e4,beforeSend:function(i){i.onprogress=function(i){n=i.loaded?i.loaded:i.position}},success:function(i,a,o){p.log({name:"AjaxMessageSize",url:t.url},n),p.performance[e].status="success",p.groupEnd(e),t.callback(i)},error:function(i){p.performance[e].status="fail",i&&u.isObject(i)&&i.status&&i.responseText&&(p.performance[e].info=["code:",i.status,"res:",encodeURIComponent(i.responseText)].join()),p.groupEnd(e),t.error&&t.error(i)}};-1===t.url.indexOf(i.location.host)&&(a.crossDomain=!!t.crossDomain),"jsonp"==t.dataType&&(a.jsonpCallback=t.jsonpCallback);try{var o=["m.ctrip.com","sec-m.ctrip.com","gateway.secure.ctrip.com","gateway.m.uat.qa.nt.ctripcorp.com","gateway.m.fws.qa.nt.ctripcorp.com","gateway.secure.fws.qa.nt.ctripcorp.com","gateway.secure.uat.qa.nt.ctripcorp.com","m.uat.ctripqa.com","m.fat.ctripqa.com"],r=i.location.origin;r||(r=i.location.protocol+"//"+i.location.host);for(var c=t.url.match(/^\s*(((([^:\/#\?]+:)?(?:(\/\/)((?:(([^:@\/#\?]+)(?:\:([^:@\/#\?]+))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?:\:([0-9]+))?))?)?)?((\/?(?:[^\/\?#]+\/+)*)([^\?#]*)))?(\?[^#]+)?)(#.*)?/)||[],l=!1,d=0;d<o.length;d++)c[10]==o[d]&&(l=!0);/^https?/.test(r)&&c[2]&&-1===c[2].indexOf(r)&&l&&"jsonp"!=t.dataType&&(a.beforeSend=function(i){try{i.setRequestHeader("cookieOrigin",r),i.onprogress=function(i){n=i.loaded?i.loaded:i.position}}catch(t){}},a.xhrFields={withCredentials:!0})}catch(s){}return u.$.ajax(a)}function e(i,t,e,n){return{url:i,data:t,callback:e,error:n}}var n={json:"application/json",jsonp:"application/json"},a=function(i){return i&&(i=n[i]?n[i]:i),i},o={};return o.cros=function(i,n,o,r,c,l){var d=o.contentType;"get"!==n.toLowerCase()&&(o=JSON.stringify(o));var s=e(i,o,r,c);return s.type=n,s.dataType="json",s.crossDomain=!0,s.data=o,s.contentType=a(d)||"application/json",s.timeout=l,t(s)},o.jsonp=function(i,n,a,o,r){var c=e(i,n,a,o);return c.type="GET",c.dataType="jsonp",c.crossDomain=!0,c.timeout=r,n.jsonpCallback&&(c.jsonpCallback=n.jsonpCallback),t(c)},o}(),g=function(){var t={url:null,validates:[],protocol:i.location.protocol.indexOf("https")>-1?"https":"http",contentType:"json",method:"POST",timeout:3e4,ajax:null,checkAuth:!0,needSOA:!0,param:{},extension:[],isAbort:!1,protocalExten:{name:"protocal",value:function(){return i.location.protocol.match(/(http|https|file):/g)[0].replace(":","")}()}};return t.execute=function(t,e,n,a){var o=u.getGuid(),r=_.HeadStore.getAttr("cid");o&&o!=r&&_.HeadStore.setAttr("cid",o||""),_.HeadStore.setAuth(_.UserStore.getAuth());var c=this.appendSuffix(this.buildurl()),l=this.getParam();l.head=_.HeadStore.get()||{};try{l.head.extension=u.extend(!0,[],this.extension),l.head.extension.push(this.protocalExten)}catch(d){}l.contentType=this.contentType;var s=function(i,t){var e=!!i.ResponseStatus,n=e?i.ResponseStatus:i.head,a=!1,o=!1;if(e&&n){var r=n.Ack;try{void 0===r&&(r=n.ack)}catch(c){}if("Failure"===r||1==r){var l=n.Errors;if(l instanceof Array&&l.length>0)for(var d,s=0;s<l.length;s++)if(d=l[s],d&&d.ErrorCode&&"MobileRequestFilterException"==d.ErrorCode){t.checkAuth&&(o=!0,_.HeadStore.setAuth(""),_.UserStore.removeUser());break}}a="Success"===r||"0"==r}else a=n&&0===n.errcode;return o?{success:a,overdue:o}:!!a},p=u.proxy(function(a){if(this.needSOA){var o=s(a,this);if("boolean"==typeof o){if(!o)return"function"==typeof e?e.call(n||this,a):!1}else if(o&&o.overdue){try{_.Member.memberLogin({param:"from="+encodeURIComponent(i.location.href)})}catch(r){}return}}var c="function"==typeof this.dataformat?this.dataformat(a):a;"function"==typeof t&&t.call(n||this,c,a)},this),g=u.proxy(function(i){return this.isAbort?(this.isAbort=!1,"function"==typeof a?a.call(n||this,i):!1):void("function"==typeof e&&e.call(n||this,i))},this);return"json"===this.contentType?this.ajax=h.cros(c,this.method,l,p,g,this.timeout):"jsonp"===this.contentType?this.ajax=h.jsonp(c,l,p,g,this.timeout):void 0},t.buildurl=function(){var i=this.url;if(!u.isUrl(this.url)){var t="m.ctrip.com";i=this.protocol+"://"+t+"/restapi"+this.url}return i},t.appendSuffix=function(i){var t=u.getGuid();if(t){var e=i.indexOf("?")>-1?"&":"?";i=i+e+"_fxpcqlniredt="+t}return i},t.getParam=function(){var i;return u.isObject(this.param)&&(i=u.extend(!0,{},this.param)),i||{}},t.setParam=function(i,t){"object"!=typeof i||t?this.param[i]=t:this.param=i},t.abort=function(){this.isAbort=!0,this.ajax&&this.ajax.abort&&this.ajax.abort()},t},f=function(){function t(t,e){if(t&&e&&!(new Date(e).getTime()<(new Date).getTime())){var n={},o=[],r=i.localStorage.getItem(a);n.key=t,n.timeout=e,r&&(o=JSON.parse(r));for(var c,l=!1,d=0;d<o.length;d++)c=o[d],c.key==t&&(o[d]=n,l=!0);l||o.push(n),i.localStorage.setItem(a,JSON.stringify(o))}}function e(t){t=t||5;var e=i.localStorage.getItem(a),n=[];if(e){n=JSON.parse(e),n.sort(function(i,t){var e=new Date(i.timeout).getTime(),n=new Date(t.timeout).getTime();return e-n});for(var o=n.splice(0,t)||[],r=0;r<o.length;r++)i.localStorage.removeItem(o[r].key);i.localStorage.removeItem(a),n.length>0&&i.localStorage.setItem(a,JSON.stringify(n))}}var n={},a="C_CLEAR_OVERDUE",o=!1;return n.lifeTime="30D",n.sProxy=i.localStorage,n.setAttr=function(i,t){if(!u.isObject(i)){var e=this.get()||{};return e?(u.ObjSet(e,i,t),this.set(e)):!1}for(var n in i)i.hasOwnProperty(n)&&this.setAttr(n,i[n],t)},n.getAttr=function(i,t){var e=this.get(t),n=null;return e&&(n=u.getObj(e,i)),n},n.set=function(i,n){var a=new Date,r=u.format("Y/m/d H:i:s",a),c=u.format("Y/m/d H:i:s",new Date(a.getTime()+this._getLifeTime())),l=this._buildStorageObj(i,c,n,r);t(this.key,c);try{this.sProxy.setItem(this.key,JSON.stringify(l))}catch(d){if(o)return d;"QuotaExceededError"==d.name&&(o=!0,e(),this.set(i,n))}},n.oldSet=function(i,t){var e=new Date,n=u.format("Y/m/d H:i:s",e),a=u.format("Y/m/d H:i:s",new Date(e.getTime()+this._getLifeTime())),o={data:i,timeout:a,tag:null,savedate:n};t=t||this.key;try{this.sProxy.setItem(t,JSON.stringify(o))}catch(r){console}},n.get=function(i){var t=null,e=!0;"[object Array]"===Object.prototype.toString.call(this.defaultData)?t=this.defaultData.slice(0):this.defaultData&&(t=u.extend({},this.defaultData));var n;try{var a=this.sProxy.getItem(this.key);a&&(a=JSON.parse(a),new Date(a.timeout)>=new Date&&(i?i===a.tag&&(n=a.oldvalue):n=a.value))}catch(o){console}var r=typeof n;if({string:!0,number:!0,"boolean":!0}[r])return n;if(n)if("[object Array]"==Object.prototype.toString.call(n)){t=[];for(var c=0,l=n.length;l>c;c++)t[c]=n[c]}else n&&!t&&(t={}),u.extend(t,n);for(var d in t){e=!1;break}return e?null:t},n.oldGet=function(i){var t=this.sProxy.getItem(i),e=t?JSON.parse(t):null;if(e&&e.timeout){var n=new Date,a=new Date(e.timeout);return a>=n?e:(localStorage.removeItem(i),null)}return e},n._getLifeTime=function(){var i=0,t=this.lifeTime+"",e=t.charAt(t.length-1),n=+t.substring(0,t.length-1);return e="number"==typeof e?"M":e.toUpperCase(),i="D"==e?24*n*60*60:"H"==e?60*n*60:"M"==e?60*n:"S"==e?n:60*n,1e3*i},n._buildStorageObj=function(i,t,e,n,a){var o={value:i,timeout:t,tag:e,savedate:n};return a&&(o.oldvalue=a),o},n.removeOverdueCathch=function(){var i=(new Date).getTime(),t=n.sProxy.getItem(a),e=[],o=[];if(t){e=JSON.parse(t);for(var r,c=0;c<e.length;c++)r=e[c],new Date(r.timeout).getTime()<=i?n.sProxy.removeItem(r.key):o.push(r);n.sProxy.setItem(a,JSON.stringify(o))}},n.removeOverdueCathch(),u.extend(!0,{},n)},b=function(){var t=i.location.host,e="accounts.ctrip.com";t.match(/^m\.ctrip\.com/i)?e="accounts.ctrip.com":t.match(/.uat\.qa/i)?e="accounts.uat.qa.nt.ctripcorp.com":t.match(/.fat/i)||t.match(/.fws/i)?e="accounts.fat466.qa.nt.ctripcorp.com":t.match(/^(localhost|172\.16|127\.0)/i)&&(e="accounts.fat466.qa.nt.ctripcorp.com"),this.LINKS={MEMBER_LOGIN:"https://"+e+"/H5Login/#login",REGISTER:"https://"+e+"/H5Register/"}},x=function(t,e){t=t||{},e=e||i.H5Login;var n=t.callback||function(){};try{var a={containerId:t.domID||"",clientID:u.getGuid(),retainLoginStatus:t.retainLoginStatus},o=new e;o.nonMemberLogin(a,n)}catch(r){n(r)}};b.prototype={memberLogin:function(i){if(i=i||{},_.app.vendor.is("CTRIP"))try{i.callback=i.callback||function(){},_._selfMemberLoginCB=function(t){i.callback(t),"function"==typeof _.loginHandler&&_.loginHandler(t)};var t=!!i.isShowNonMemberLogin;CtripUser.app_member_login(t)}catch(e){}else this._getLink(this.LINKS.MEMBER_LOGIN,i)},nonMemberLogin:function(i){if("function"==typeof require&&"function"==typeof define&&define.amd)require(["//webresource.c-ctrip.com/ares2/basebiz/cusersdk_h5login/~1.0.0/default/h5loginsdk.js?expires=1d"],function(t){x(i,t)});else try{var e=t.getElementsByTagName("script")[0],n=t.createElement("script");n.type="text/javascript",n.charset="utf-8",n.async=!0,n.onload=n.onerror=function(){x(i)},n.src="//webresource.c-ctrip.com/ares2/basebiz/cusersdk_h5login/~1.0.0/default/h5loginsdk.js?expires=1d",e.parentNode.insertBefore(n,e)}catch(a){i&&i.callback&&i.callback(a)}},getDuid:function(){return u.getCookie("DUID")},isNonUser:function(i){return _.UserStore.isNonUser(i)},isLogin:function(i){return _.UserStore.isLogin(i)},isLoginWithoutType:function(i){return _.UserStore.isLoginWithoutType(i)},_getLink:function(t,e){var n=t,a=location,o=e&&e.param&&"string"==typeof e.param?e.param:"";if(o){o=u.getUrlParams(e.param);var r=o&&o.backurl?decodeURIComponent(o.backurl):"",c=o&&o.from?decodeURIComponent(o.from):"",l=a.protocol+"//"+a.host;u.isUrl(r)?o.backurl=r:""!==r&&(o.backurl=l+r),u.isUrl(c)?o.from=c:""!==c&&(o.from=l+c);var d=u.$.param(o);d&&(n=n+"?"+d)}i.location.href=n}};var _={};_.version="0.0.1",_.Model=function(i){return!i||i&&!i.url?void 0:u.extend(!0,new g,i)},_.NotUserLoginModel=function(i,t,e,n){var a="https://"+u.getDomain("accounts")+"/H5Login/Account/NonUserLogin",o=_.UserStore.getUser();if(_.UserStore.isLoginWithoutType()&&o&&o.Auth)return void("function"==typeof i&&i.call(e,{Data:_.UserStore.getUser(),ServerCode:1}));var r=function(n){1==n.ServerCode&&n.Data?"function"==typeof i&&i.call(e||this,n):"function"==typeof t&&t.call(e||this)},c=function(){"function"==typeof t&&t.apply(e||this,arguments)},n={clinetId:u.getGuid()},l={type:"post",url:a,dataType:"json",data:JSON.stringify(n),crossDomain:!0,xhrFields:{withCredentials:!0},success:u.proxy(r,this),error:u.proxy(c,this),timeout:25e3};this.ajax=u.$.ajax(l)},_._getUrl=e,_.ClientIdModel=function(){var i=e("10290/createclientid"),t=_.Model({url:i,checkAuth:!1,method:"get",param:{systemcode:"09",createtype:3}});return t},_.ThirdPartModel=function(){var i=e("10448/GetThirdPartMembers.json"),t=_.Model({url:i,checkAuth:!1});return t},_.Store=function(i){if(i&&(!i||i.key)){var t=u.extend(!0,new f,i);if(i&&i.defaultData){var e=t.sProxy.getItem(t.key);e||t.set(i.defaultData)}return t}},_.HeadStore=function(){var i={key:"HEADSTORE",lifeTime:"15D",defaultData:{cid:u.getGuid(),ctok:"",cver:"1.0",lang:"01",sid:"8888",syscode:"09",auth:""},setAuth:function(i){this.setAttr("auth",i)}};return _.Store(i)}(),_.UserStore=function(){var i={key:"USER",lifeTime:"90D",getUser:function(){return this.get()},setUser:function(i){this.set(i),this.oldSet(i,"USERINFO")},isLogin:function(i){var t=this.getUser(),e=u.getCookie("DUID"),n=u.getCookie("IsNonUser"),a=!!e&&"T"!=n||t&&!!t.Auth&&!t.IsNonUser;return"function"!=typeof i?a:void i(a)},getUserName:function(){var i=this.getUser();return i&&i.UserName},getUserId:function(){var i=this.getUser()||{};return i.UserID||u.getGuid()},getAuth:function(){var i=this.getUser();return i&&i.Auth},isNonUser:function(i){var t=this.getUser(),e=u.getCookie("DUID"),n=u.getCookie("IsNonUser"),a=!!e&&"T"==n||t&&!!t.IsNonUser;return"function"!=typeof i?a:void i(a)},isLoginWithoutType:function(i){var t=this.getUser(),e=u.getCookie("DUID"),n=!!e||t&&!!t.Auth;return"function"!=typeof i?n:void i(n)},removeUser:function(){this.sProxy.removeItem("USER"),this.sProxy.removeItem("USERINFO")},setThirdParts:function(i){var t=this.isLogin(),e=this.getUser()||{};t&&i&&(e.thirdParts=i,this.setUser(e))},setThirdPartsNon:function(){var i=this.isLogin(),t=this.getUser()||{};i&&(t.thirdParts="",this.setUser(t))}};return _.Store(i)}(),_.Member=new b,_.Utils=u,_.__callbackQueue={ready:[],hybridReady:[]},_.UnionStore=function(){return{get:function(t){var e;try{var n=i.localStorage.getItem("UNION");e=JSON.parse(n)}catch(a){}return t&&"function"==typeof t&&(i.navigator.userAgent.toLowerCase().indexOf("ctripwireless")>=0?t(e&&e.data||e&&e.value||null):(i.__union_api||(i.__union_api=[]),i.__union_api.push({apiName:"getUnion",callback:function(i){t(i)}}))),e&&e.data||e&&e.value||null},set:function(t){var e=u.format("Y/m/d H:i:s",new Date((new Date).getTime()+6048e5)),n=u.format("Y/m/d H:i:s",new Date),a={value:t,timeout:e,tag:null,savedate:n};i.localStorage.setItem("UNION",JSON.stringify(a))}}}(),_.instance=!1,_.hybridInstance=!1,_.ready=function(i){return _.instance?void i():void _.__callbackQueue.ready.push(i)},_.HybridReady=function(t){var e=i.app&&i.app.callback||function(){};return i.app={},i.app.callback=function(i){e(i);var t={member_login:function(i){try{var t=i&&i.data;t&&_.UserStore.setUser(t),"function"==typeof _._selfMemberLoginCB&&_._selfMemberLoginCB(i)}catch(e){}},non_member_login:function(i){try{"function"==typeof _._selfNonMemberLoginCB&&_._selfNonMemberLoginCB(i)}catch(t){}}};i&&"function"==typeof t[i.tagname]&&t[i.tagname](i.param)},_.hybridInstance?void t():void _.__callbackQueue.hybridReady.push(t)},setTimeout(function(){_.instance&&_.hybridInstance||(_.instance=!0,_.hybridInstance=!0,n())},1e3),_.app=a(),(_.app.vendor.is("CTRIP")||_.app.code.is("TY"))&&"undefined"==typeof Lizard?!function(){function t(t){if(t.userInfo)try{t.userInfo.data.BMobile=t.userInfo.data.BindMobile,_.HeadStore.setAuth(t.userInfo.data.Auth),_.UserStore.setUser(t.userInfo.data)}catch(e){}else _.UserStore.removeUser(),_.HeadStore.setAuth("");if(t.device){var n={device:t.device};i.localStorage.setItem("DEVICEINFO",JSON.stringify(n))}if(t.appId){var a={version:t.version,appId:t.appId,serverVersion:t.serverVersion,platform:t.platform};i.localStorage.setItem("APPINFO",JSON.stringify(a))}if(t.timestamp){var o=new Date,r={server:t.timestamp,local:o.getTime()};i.localStorage.setItem("SERVERDATE",JSON.stringify(r))}t.sourceId&&(_.HeadStore.setAttr("sid",t.sourceId),i.localStorage.setItem("SOURCEID",t.sourceId)),0==t.isPreProduction||t.isPreProduction?i.localStorage.setItem("isPreProduction",t.isPreProduction):i.localStorage.setItem("isPreProduction",""),t.clientID&&(_.HeadStore.setAttr("cid",t.clientID),i.localStorage.setItem("GUID",t.clientID)),t.extSouceID&&_.HeadStore.setAttr("xsid",t.extSouceID),t.systemCode&&_.HeadStore.setAttr("syscode",t.systemCode);try{var c={};t.allianceId&&t.sId&&(c.AllianceID=t.allianceId,c.SID=t.sId,c.OUID=t.ouId?t.ouId:""),t.mkt_wakeup_data&&(c.AllianceID=t.mkt_wakeup_data.allianceid,c.SID=t.mkt_wakeup_data.sid,c.OUID=t.mkt_wakeup_data.ouid,c.SOURCEID=t.mkt_wakeup_data.sourceid,c.AWAKE_ALLIANCEID=t.mkt_wakeup_data.awake_allianceid,c.AWAKE_SID=t.mkt_wakeup_data.awake_sid,c.AWAKE_OUID=t.mkt_wakeup_data.awake_ouid,c.AWAKE_SOURCEID=t.mkt_wakeup_data.awake_sourceid,c.AWAKE_TIME=t.mkt_wakeup_data.awake_time,c.EXT_VALUE=t.mkt_wakeup_data.ext_value);for(var l in c){_.UnionStore.set(c);break}}catch(e){}t.version&&_.HeadStore.setAttr("cver",t.internalVersion||t.version),i.localStorage.setItem("CINFO",JSON.stringify(t))}i.localStorage.setItem("ISINAPP","1");var e=null;try{e=JSON.parse(i.name)}catch(a){}e&&e.versionCode&&e.version&&(t(e),_.instance=!0,i.name="",n());try{var o=i.app&&i.app.callback||function(){};i.app={},i.app.callback=function(e){try{o(e)}catch(a){}var r={web_view_finished_load:function(){if(i.localStorage){var t=e.param;t&&i.localStorage.setItem("APPINFO",JSON.stringify(t))}_.hybridInstance=!0,n(),CtripUtil.app_init_member_H5_info()},init_member_H5_info:function(i){t(i),_.instance||(_.instance=!0,
n())},init_member_H5_info_tieyou:function(i){t(i),_.instance||(_.instance=!0,n())},member_login:function(i){try{var t=i&&i.data;t&&_.UserStore.setUser(t),"function"==typeof _._selfMemberLoginCB&&_._selfMemberLoginCB(i)}catch(e){}}};e&&"function"==typeof r[e.tagname]&&r[e.tagname](e.param)}}catch(a){}}():!function(){function t(){var t=u.getCookie("GUID"),e=i.localStorage,n=e.getItem("GUID"),a=_.ClientIdModel();t||n&&!(n.indexOf("-")>-1)?t||u.setCookie("GUID",n,new Date((new Date).getTime()+93312e6),"/",".ctrip.com"):(n&&(e.setItem("BGUID",n),a.setParam("PreviousID",n)),a.execute(function(i){i&&i.ClientID&&(e.setItem("GUID",i.ClientID),_.HeadStore.setAttr("cid",i.ClientID),u.setCookie("GUID",i.ClientID,new Date((new Date).getTime()+93312e6),"/",".ctrip.com"))}))}function e(){var i=_.ThirdPartModel(),t=function(i){i.Members&&i.Members.length>0?_.UserStore.setThirdParts(i.Members):_.UserStore.setThirdPartsNon()},e=function(i){};i.execute(t,e)}var a=i.location.href,o=u.getUrlParam(a,"__ThirdPartMember__");_.instance=!0,n(),o&&e(),t()}(),_.isIPhoneX=function(){try{if(_.app.code.is("MASTER")&&-1!==i.navigator.userAgent.indexOf("iPhoneX"))return!0;var t=i.screen.height,e=i.screen.width;if(/iphone/gi.test(navigator.userAgent)&&812===t&&375===e)return!0}catch(n){}return!1}(),_.loadPlugin=function(i,e){var n=0;return i=i.filter(function(i){return["needWeiXin","needGeo"].indexOf(i)>=0?!0:!1}),0==i.length?void(e&&e()):void i.forEach(function(a){var o=t.createElement("script");o.type="text/javascript",o.async=!0;var r;a.indexOf("needWeiXin")>=0?r="https://webresource.c-ctrip.com/code/lizard/2.2/web/lite.weixin.js":a.indexOf("needGeo")>=0&&(r="https://webresource.c-ctrip.com/code/lizard/2.2/web/lite.geo.js"),o.src=r,o.onload=function(){++n,n==i.length&&e&&e()},t.head.appendChild(o)})},"undefined"!=typeof module&&module.exports?module.exports=_:i.LizardLite=_}(window,document);