"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[1466],{82955:(e,t,n)=>{n.d(t,{d:()=>p});var r=n(96598),a=n(61104),l=n(44850),i=n(84677),c=n(288),o=n(82465),s=n(99349),u=n(45395),m=n(55328),d=n(64018),_=n(91264);const p=r.forwardRef((({product:e,purchase:t,discountCode:n,selection:p,label:v,onClick:g},h)=>{var E;const{searchParams:y}=new URL((0,u.M)()),[f,w]=r.useState("");(0,m.e)((()=>w(document.referrer)));const{selectedOption:b,pppDiscounted:k}=(0,s.w0)(e,(null==n?void 0:n.valid)?n.discount:null,p),C=new URL(d.checkout_index_url()),N={a:"affiliate_id"};for(const[e,t]of y.entries())["product","option","recurrence","quantity","rent","price","code","referrer"].includes(e)||C.searchParams.set(null!=(E=N[e])?E:e,t);if(C.searchParams.set("product",e.permalink),p.optionId&&C.searchParams.set("option",p.optionId),p.recurrence&&C.searchParams.set("recurrence",p.recurrence),C.searchParams.set("quantity",p.quantity.toString()),p.rent&&C.searchParams.set("rent","true"),(e.pwyw||(null==b?void 0:b.is_pwyw))&&null!=p.price.value){let t=p.price.value;k&&e.ppp_details?t/=e.ppp_details.factor:(null==n?void 0:n.valid)&&(0,s.Ug)(n.discount,p.quantity)&&("percent"===n.discount.type?t/=(100-n.discount.percents)/100:t+=n.discount.cents),C.searchParams.set("price",Math.round(t).toString())}(null==n?void 0:n.valid)&&(0,s.Ug)(n.discount,p.quantity)&&!k&&C.searchParams.set("code",n.code);const P=y.get("referrer")||f||null;return P&&C.searchParams.set("referrer",P),(0,o._w)(e)?null:r.createElement(c.W,{ref:h,target:"_top",href:C.toString(),color:"primary",onClick:t=>{null==g||g(t),t.defaultPrevented||(e.seller&&(0,i.n4)(e.seller.id,{permalink:e.permalink,action:"iwantthis",product_name:e.name}),(0,a.H)({name:"i_want_this",permalink:e.permalink,fromOverlay:(0,o.Sq)(y),wasRecommended:(0,o.bR)(y)}).catch(l.wN))},style:{alignItems:"unset"}},null!=v?v:_.t(t?"js.purchase_again":e.recurrences?"subscribe_prompt":p.rent?"rent":e.custom_button_text_option?e.custom_button_text_option:"i_want_this_prompt"))}));p.displayName="CtaButton"},82465:(e,t,n)=>{n.d(t,{xs:()=>M,QK:()=>j,Sq:()=>U,_w:()=>I,bR:()=>L});var r=n(96598),a=n(88112),l=n(61104),i=n(68031),c=n(30911),o=n(48833),s=n(24051),u=n(44850),m=n(288),d=n(72033),_=n(43576),p=n(92841),v=n(33425),g=n(99349),h=n(84646),E=n(82955),y=n(15946),f=n(5460),w=n(15345),b=n(55328);const k=e=>(null!=e?e:0).toString().padStart(2,"0"),C=e=>{const{days:t,hours:n,minutes:r,seconds:a}=e;let l="";return t&&(l+=`${k(t)}:`),(t||n)&&(l+=`${k(n)}:`),l+=`${k(r)}:${k(a)}`,l},N=({onExpiration:e,expiresAt:t})=>{const[n,a]=r.useState((t.getTime()-(new Date).getTime())/1e3);return(0,b.e)((()=>{n<=0&&e(),new f.Z(n,a,e)})),n>604800?null:r.createElement("div",null,r.createElement(w.v,{string:"offer_code_expiration_countdown",reactParams:{duration:r.createElement("strong",{suppressHydrationWarning:!0},C((0,y.Z)({start:0,end:1e3*n})))}}))};var P=n(58460),S=n(39842),x=n(31080),q=n(97185),R=n(45395),T=n(91264);const L=e=>!!e.get("recommended_by"),U=e=>"true"===e.get("overlay"),I=e=>e.is_compliance_blocked?T.t("territory_blocked"):0===e.quantity_remaining?T.t("sold_out"):e.is_published?null:T.t("not_for_sale_notice"),M=({product:e,purchase:t,discountCode:n,ctaLabel:a,selection:l,setSelection:o,ctaButtonRef:s})=>{var u,m,d;const _=I(e),[p,h]=r.useState(n),{basePriceCents:y,priceCents:f,discountedPriceCents:b,pppDiscounted:k,isPWYW:C}=(0,g.w0)(e,(null==p?void 0:p.valid)?p.discount:null,l);return r.createElement("article",{className:"product"},r.createElement(D,{covers:e.covers,mainCoverId:e.main_cover_id}),null!==e.quantity_remaining?r.createElement("div",{className:"ribbon"},T.t("js.left_with_count",{count:e.quantity_remaining})):null,r.createElement("section",null,r.createElement("header",null,r.createElement("h1",{itemProp:"name"},e.name)),r.createElement("section",{className:"details"},e.recurrences||0!==e.options.length||(null==(u=e.rental)?void 0:u.rent_only)||0===y&&!e.pwyw?null:r.createElement(P.W,{currencyCode:e.currency_code,oldPrice:b<y?y:void 0,price:b,url:e.long_url,isPayWhatYouWant:!!e.pwyw,isSalesLimited:e.is_sales_limited}),e.seller?r.createElement(v.y,{name:e.seller.name,profileUrl:e.seller.profile_url,avatarUrl:e.seller.avatar_url}):null,null!=e.rating_counts?r.createElement(j,{ratingCounts:e.rating_counts}):null),null!==t?r.createElement($,{purchase:t,permalink:e.permalink,isPreorder:null!==e.preorder,isCustomDelivery:e.is_custom_delivery,customViewContentButtonText:e.custom_view_content_button_text}):null,r.createElement("section",null,null!==e.description_html?r.createElement("div",{className:"rich-text",dangerouslySetInnerHTML:{__html:e.description_html}}):null)),r.createElement("section",null,r.createElement("section",null,_?r.createElement("div",{role:"status",className:"warning"},_):null,p?p.valid?(b<f||p.discount.minimum_quantity)&&!k?r.createElement("div",{role:"status",className:"success"},r.createElement("div",{className:"paragraphs"},p.discount.minimum_quantity?T.t("discount_code_minimum_quantity_notice",{amount:"percent"===p.discount.type?`${p.discount.percents}%`:(0,i.Nq)(e.currency_code,p.discount.cents,{symbolFormat:"long"}),quantity:p.discount.minimum_quantity,name:p.code.toUpperCase()}):"percent"===p.discount.type?T.t("discount_code_percent_notice",{percent:p.discount.percents,name:p.code.toUpperCase()}):T.t("discount_code_absolute_notice",{amount:(0,i.Nq)(e.currency_code,p.discount.cents,{symbolFormat:"long"}),name:p.code.toUpperCase()}),p.discount.duration_in_billing_cycles&&e.is_tiered_membership?r.createElement("div",null,T.t("discount_code_duration_notice",{count:p.discount.duration_in_billing_cycles})):null,p.discount.minimum_amount_cents?r.createElement("div",null,T.t(1===(null!=(d=null==(m=p.discount.product_ids)?void 0:m.length)?d:0)?"discount_code_minimum_amount_single_product_notice":"discount_code_minimum_amount_notice",{product_type:!p.discount.product_ids&&e.seller?`${e.seller.name}'s`:T.t("selected"),amount:(0,i.Nq)(e.currency_code,p.discount.minimum_amount_cents,{symbolFormat:"short"})})):null,p.discount.expires_at?r.createElement(N,{expiresAt:new Date(p.discount.expires_at),onExpiration:()=>h({valid:!1,error_code:"inactive"})}):null)):null:r.createElement("div",{role:"status",className:"danger"},"sold_out"===p.error_code?T.t("offer_code_sold_out"):"invalid_offer"===p.error_code?T.t("offer_code_invalid"):T.t("offer_code_inactive")):null,r.createElement(g.et,{product:e,selection:l,setSelection:o,discount:(null==p?void 0:p.valid)?p.discount:null}),e.ppp_details&&k?r.createElement("div",{role:"status",className:"info"},r.createElement("div",null,r.createElement(w.v,{string:"ppp_notice",reactParams:{country:r.createElement("b",null,e.ppp_details.country),percent:r.createElement("b",null,(Math.round(100*(1-b/f))/100).toLocaleString(void 0,{style:"percent"})),price:r.createElement("b",null,(0,i.Nq)(e.currency_code,b,{symbolFormat:"long"}))}}),(null==p?void 0:p.valid)?` ${T.t("ppp_greater_than_offer_code_alert")}`:null)):null,e.free_trial?r.createElement("div",{role:"status",className:"info"},T.t("product_free_trial_notice",{freeTrialDurationUnit:T.t(`free_trial_duration_units_for_notice.${e.free_trial.duration.unit}`,{count:e.free_trial.duration.amount}),freeTrialDurationAmount:e.free_trial.duration.amount})):null,e.duration_in_months?r.createElement("div",{role:"status",className:"info"},T.t("fixed_length_membership_notice",{duration:T.t("duration.month",{count:e.duration_in_months})})):null,r.createElement(E.d,{ref:s,product:e,purchase:t,discountCode:null!=p?p:null,selection:l,label:a,onClick:e=>{C&&(null===l.price.value||l.price.value<b)&&(o({...l,price:{...l.price,error:!0}}),1)&&e.preventDefault()}}),null!==e.sales_count?r.createElement("div",{role:"status",className:"info"},r.createElement("span",{dangerouslySetInnerHTML:{__html:T.t(e.recurrences?"js.subscribers_unit":e.preorder?"js.preorders_unit":e.price_cents>0||e.options.length>0?"js.sales_unit":"js.downloads_unit",{count:e.sales_count,formatted_count:e.sales_count.toLocaleString(T.locale)})}})):null,e.preorder?r.createElement("div",{role:"status",className:"info"},T.t("release_date",{date:(0,c.p)(e.preorder.release_date)})):null,e.is_stream_only?r.createElement("div",{role:"status",className:"info"},T.t("no_download_warning")):null,e.refund_policy?r.createElement(H,{refundPolicy:e.refund_policy,permalink:e.permalink}):null,e.summary||e.attributes.length>0?r.createElement("div",{className:"stack"},e.summary?r.createElement("p",null,e.summary):null,e.attributes.map((({name:e,value:t},n)=>r.createElement("div",{key:n},r.createElement("h5",null,e),r.createElement("div",null,t))))):null),e.rating_counts?r.createElement(W,{ratingCounts:e.rating_counts}):null))},D=({covers:e,mainCoverId:t})=>{const[n,a]=r.useState(t);return(0,q.p)((()=>a(t)),[t]),r.createElement(h.J,{covers:e,activeCoverId:n,setActiveCoverId:a,style:{paddingBottom:n?void 0:"25%"}})},$=({permalink:e,isPreorder:t,isCustomDelivery:n,customViewContentButtonText:i,purchase:c})=>{var o;const _=(0,d.Z)(),{searchParams:p}=new URL((0,R.M)()),v=c.show_view_content_button_on_product_page?r.createElement(m.W,{color:"primary",href:null!=(o=n?c.custom_delivery_url:c.content_url)?o:"",target:"_blank",onClick:()=>{(0,l.H)({name:n?"product_information_click_custom_delivery_url":"product_information_view_product",permalink:e,fromOverlay:U(p),wasRecommended:L(p)}).catch(u.wN)}},null!=i?i:T.t("view_content")):null,[g,h]=r.useState(c.product_rating),E=(0,s.x)((async t=>{if(t!==g)try{await(0,a.d)({permalink:e,purchaseId:c.id,rating:t}),h(t),_(T.t("js.product_rated"),"success")}catch(e){(0,u.wN)(e),_(e.message,"error")}}));return c.should_show_receipt?r.createElement("section",null,r.createElement("div",{className:"stack"},c.membership?r.createElement(r.Fragment,null,r.createElement("div",null,r.createElement("h5",null,c.membership.tier_name),c.total_price_including_tax_and_shipping),r.createElement("div",null,r.createElement(m.W,{href:c.membership.manage_url,target:"_blank",onClick:()=>{(0,l.H)({name:"product_information_manage_membership",permalink:e,fromOverlay:U(p),wasRecommended:L(p)}).catch(u.wN)}},T.t(c.subscription_has_lapsed?"restart_membership":"manage_membership")),v)):r.createElement("li",null,r.createElement("h3",null,c.is_gift_receiver_purchase?T.t("already_bought_notice_received_gift"):T.t("already_bought_notice")),v),t?null:r.createElement("div",null,r.createElement("div",null,null!==g&&g>0?T.t("your_rating"):T.t("liked_it_give_it_a_rating")),r.createElement(S.w,{currentRating:g,onChangeCurrentRating:E})))):null},F=({rating:e,percentage:t})=>{const n=`${t}%`;return r.createElement(r.Fragment,null,r.createElement("div",null,T.t("stars",{count:e})),r.createElement("meter",{"aria-label":T.t("stars",{count:e}),value:t/100}),r.createElement("div",null,n))},W=({ratingCounts:e})=>{const t=e.reduce(((e,t)=>e+t));if(0===t)return null;const n=e.reduce(((e,t,n)=>e+t*(n+1)))/t,a=(e=>{const t=e.map(((e,t)=>[t,e%1])).sort(((e,t)=>t[1]-e[1]||t[0]-e[0])),n=Math.round(t.reduce(((e,t)=>e+t[1]),0)),r=t.slice(0,n).map((e=>e[0]));return e.map(((e,t)=>Math.floor(e)+Number(r.includes(t))))})(e.map((e=>e/t*100)));return r.createElement("section",null,r.createElement("header",null,r.createElement("h3",null,T.t("ratings")),r.createElement("div",{className:"rating"},r.createElement(_.J,{name:"solid-star"}),r.createElement("div",{className:"rating-average"},n.toFixed(1)),"(",T.t("js.ratings_count",{count:t,formatted_count:(0,o.p)(t,1)}),")")),r.createElement("div",{itemProp:"aggregateRating",itemType:"https://schema.org/AggregateRating",itemScope:!0,hidden:!0},r.createElement("div",{itemProp:"reviewCount"},t),r.createElement("div",{itemProp:"ratingValue"},n.toFixed(1))),r.createElement("section",{className:"histogram","aria-label":T.t("ratings_histogram")},[4,3,2,1,0].map((e=>r.createElement(F,{rating:e+1,percentage:a[e],key:e})))))},j=({ratingCounts:e})=>{const t=e.reduce(((e,t)=>e+t));return r.createElement("div",{className:"rating"},r.createElement(x.T,{rating:e.reduce(((e,t,n)=>e+t*(n+1)))/t}),r.createElement("span",{className:"rating-number"},T.t("ratings_count",{count:t})))},H=({refundPolicy:e,permalink:t})=>{const n="#refund-policy",[a,i]=r.useState(!1),{searchParams:c}=new URL((0,R.M)());(0,b.e)((()=>{i(window.location.hash===n)})),r.useEffect((()=>{a&&(0,l.H)({name:"product_refund_policy_fine_print_view",permalink:t,fromOverlay:U(c),wasRecommended:L(c),isModal:!0})}),[a]);const o=new Date(e.updated_at).toLocaleString(T.locale,{dateStyle:"medium"}),s=T.t("last_updated",{date:o});return r.createElement(r.Fragment,null,r.createElement("div",{style:{textAlign:"center"}},e.fine_print?r.createElement("a",{href:n,onClick:()=>i(!0)},e.title):e.title),e.fine_print?r.createElement(p.u,{open:a,onClose:()=>{i(!1),window.history.replaceState(window.history.state,"",window.location.href.split("#")[0])},title:e.title,footer:r.createElement("p",null,s)},r.createElement("div",{className:"paragraphs"},r.createElement("div",{dangerouslySetInnerHTML:{__html:`${e.fine_print}`},style:{display:"contents"}}))):null)}}}]);