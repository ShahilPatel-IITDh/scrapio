(window.webpackJsonp=window.webpackJsonp||[]).push([[1,43,49],{507:function(e,t,n){e.exports={}},508:function(e,t,n){e.exports={}},517:function(e,t,n){"use strict";n.r(t);n(11),n(22),n(25),n(28),n(18),n(29);var r=n(0),o=n(6),c=(n(10),n(4),n(16),n(17),n(321),n(153),n(198)),l=n(58),d=n(142),f=function(e){window.dataLayer=window.dataLayer||[],window.dataLayer.push(e)};function h(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}var m={components:{EModal:c.a},props:{show:{type:Boolean,required:!0},internationalRedirectUrl:{type:String}},data:function(){return{ButtonPrimary:{text:"Visit international",icon:"external_link",iconPosition:"right"},ButtonSecondary:{text:"Cancel"},internationalSiteName:"international website",hasInternationalSiteName:!1,loaded:!1}},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(l.d)({parcelIdentifiers:function(e){return e.parcelIdentifiers}})),methods:{handleCancel:function(){f({event:"ga_tracking",eventCategory:"Click tracking",eventAction:"/track-a-parcel",eventLabel:"btn-cancel international"}),window.location.assign(window.location.origin+"/track-a-parcel")},handleClose:function(){f({event:"ga_tracking",eventCategory:"Click tracking",eventAction:"/track-a-parcel",eventLabel:"btn-close international modal"}),window.location.assign(window.location.origin+"/track-a-parcel")},goToInternationalRedirect:function(){f({event:"ga_tracking",eventCategory:"Click tracking",eventAction:"/track-a-parcel",eventLabel:"btn-visit international"}),window.open(this.internationalRedirectUrl)}},created:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.internationalRedirectUrl){t.next=3;break}return e.loaded=!0,t.abrupt("return");case 3:if("international.evri.com"===new URL(e.internationalRedirectUrl).host){t.next=18;break}return t.prev=5,t.next=8,d.a.getByUID("track_variables","track_variables",{});case 8:n=t.sent,data=n.data,e.hasInternationalSiteName=!0,e.internationalSiteName=data.international_site_name,e.ButtonPrimary.text=data.international_site_button_text,t.next=18;break;case 15:t.prev=15,t.t0=t.catch(5),console.log(t.t0);case 18:e.loaded=!0;case 19:case"end":return t.stop()}}),t,null,[[5,15]])})))()}},v=m,_=(n(532),n(1)),component=Object(_.a)(v,(function(){var e=this,t=e._self._c;return t("e-modal",{staticClass:"international-redirect-modal",attrs:{"is-open":e.show&&e.loaded,avatar:"alert_2",heading:"Redirect notice","button-primary":e.ButtonPrimary,"button-secondary":e.ButtonSecondary},on:{close:e.handleClose,clickButtonPrimary:e.goToInternationalRedirect,clickButtonSecondary:e.handleCancel}},[t("div",{staticClass:"international-redirect-modal__body"},[e.hasInternationalSiteName?t("p",[e._v("\n      To track an international parcel, you'll need to visit our international\n      site\n      "),t("span",{staticClass:"international-redirect-modal__body--bold"},[e._v("\n        "+e._s(e.internationalSiteName)+".")])]):e._e(),e._v(" "),e.hasInternationalSiteName?e._e():t("p",[e._v("\n      To track an international parcel, you'll need to visit our\n      "),t("span",{staticClass:"international-redirect-modal__body--bold"},[e._v("\n        international site.")])]),e._v(" "),t("p",[e._v("\n      If you don't want to visit this website, you can cancel to stay on\n      evri.com, but you'll be unable to track this parcel.\n    ")])])])}),[],!1,null,"6a3401f5",null);t.default=component.exports},532:function(e,t,n){"use strict";n(507)},535:function(e,t){function n(e,t,n){var r,o,c,l,d;function f(){var h=Date.now()-l;h<t&&h>=0?r=setTimeout(f,t-h):(r=null,n||(d=e.apply(c,o),c=o=null))}null==t&&(t=100);var h=function(){c=this,o=arguments,l=Date.now();var h=n&&!r;return r||(r=setTimeout(f,t)),h&&(d=e.apply(c,o),c=o=null),d};return h.clear=function(){r&&(clearTimeout(r),r=null)},h.flush=function(){r&&(d=e.apply(c,o),c=o=null,clearTimeout(r),r=null)},h}n.debounce=n,e.exports=n},536:function(e,t,n){"use strict";n(508)},537:function(e,t,n){e.exports={}},540:function(e,t,n){e.exports={}},551:function(e,t,n){"use strict";n.r(t);n(11),n(22),n(25),n(4),n(28),n(18),n(29);var r=n(0),o=n(6),c=(n(10),n(96),n(155),n(23),n(48),n(56),n(37),n(38),n(201),n(58)),l=n(51),d=n(535),f=n(111),h=n(197),m=n(26),v=n(196),_=n(204);function k(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function y(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?k(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):k(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var R={name:"e-retailer-search",components:{EInput:h.a,EIcon:m.a,EAvatar:v.default,ValidationProvider:l.b},props:{value:{type:String,required:!0},rules:{type:String,required:!1,default:""}},data:function(){return{retailerLabel:"Enter your retailer's name",isDropdownOpen:!1,isLoading:!1,showHasNoResults:!1,DEFAULT_RETAILER_LOGO:_.a}},computed:y(y({},Object(c.d)({retailerList:function(e){return e.entry.filteredRetailerList},fetchRetailersLoading:function(e){return e.entry.fetchRetailersLoading}})),{},{searchTerm:{get:function(){return this.$store.state.entry.retailerSearchTerm},set:function(e){this.$store.commit("entry/SET_RETAILER_SEARCH_TERM",e)}},selectedRetailer:{get:function(){return this.$store.state.entry.selectedRetailer},set:function(e){this.$store.commit("entry/SET_SELECTED_RETAILER",e)}},isDropdownVisible:function(){var e;return this.searchTerm.trim().length>=_.b&&(null===(e=this.retailerList)||void 0===e?void 0:e.length)&&this.isDropdownOpen},hasNoResults:function(){var e;return this.searchTerm.trim().length>=_.b&&!this.fetchRetailersLoading&&!(null!==(e=this.retailerList)&&void 0!==e&&e.length)&&this.showHasNoResults}}),watch:{searchTerm:function(e,t){e.trim().length>=_.b&&(this.isLoading=!0,t.trim().length<_.b&&(this.showHasNoResults=!1)),this.debouncedGetRetailers()}},created:function(){var e=this;this.debouncedGetRetailers=Object(d.debounce)(Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getRetailers();case 2:e.isLoading=!1,e.showHasNoResults=!0;case 4:case"end":return t.stop()}}),t)}))),300)},mounted:function(){this.$refs.searchField.$el.setAttribute("data-gtm-track","input-blank-retailer's search field")},methods:y(y({},Object(c.b)({getRetailers:"entry/GET_RETAILERS"})),{},{resetSelectedRetailer:function(){this.searchTerm="",this.isDropdownOpen=!1,this.selectedRetailer="",this.$emit("input","")},closeDropdown:function(e){var t;null!=e&&null!==(t=e.currentTarget)&&void 0!==t&&t.contains(e.relatedTarget)||(this.isDropdownOpen=!1)},openDropdown:function(){this.isDropdownOpen=!0},handleInput:function(e){this.searchTerm=e,this.selectedRetailer="",this.$emit("input","")},handleInputClick:function(e){e.currentTarget.closest("button[aria-label=Reset]")||(this.isDropdownOpen=!0)},handleSelect:function(e){this.searchTerm=null==e?void 0:e.clientName,this.selectedRetailer=null==e?void 0:e.id,this.$emit("input",null==e?void 0:e.id),this.closeDropdown()},splitMarkedText:function(e,t){var n=Object(f.c)(t);if(!n)return[{value:e}];var r=new RegExp(n.split("").map((function(s){return Object(f.a)(s)})).join("\\s*"),"gi"),o="$%separator%$";return e.replace(r,(function(e){return o+e+o})).split(o).map((function(e){return{value:e,marked:Object(f.c)(e)===n}}))}})},w=(n(536),n(1)),component=Object(w.a)(R,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"e-retailer-search",attrs:{tabindex:"0"},on:{focusin:e.openDropdown,focusout:e.closeDropdown,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.closeDropdown.apply(null,arguments)}}},[t("div",{staticClass:"e-retailer-search__input-wrapper"},[t("EInput",{ref:"searchField",staticClass:"e-retailer-search__input",attrs:{value:e.searchTerm,label:e.retailerLabel,"is-loading":e.isLoading||e.fetchRetailersLoading,"is-required":"","is-reset":"",search:!0,autocomplete:"do-not-autofill"},on:{clear:e.resetSelectedRetailer,input:e.handleInput},nativeOn:{click:function(t){return e.handleInputClick.apply(null,arguments)}},scopedSlots:e._u([{key:"leftIcon",fn:function(){return[t("EIcon",{attrs:{icon:"search"}})]},proxy:!0}])}),e._v(" "),t("ValidationProvider",{ref:"retailer",attrs:{name:"retailer",rules:e.rules}},[t("EInput",{staticStyle:{display:"none"},attrs:{label:e.retailerLabel,"hide-label":""},model:{value:e.selectedRetailer,callback:function(t){e.selectedRetailer=t},expression:"selectedRetailer"}})],1)],1),e._v(" "),e.isDropdownVisible?t("ul",{staticClass:"e-retailer-search__dropdown"},e._l(e.retailerList,(function(n){return t("li",{key:n.id,class:["e-retailer-search__dropdown-item",{"e-retailer-search__dropdown-item--selected":n.id===e.selectedRetailer}],attrs:{"data-gtm-track":"li-".concat(n.clientName,"-search dropdown option")},on:{"!click":function(t){return e.handleSelect(n)}}},[t("EAvatar",{attrs:{"image-src":n.clientLogo||e.DEFAULT_RETAILER_LOGO}}),e._v(" "),t("span",[e._l(e.splitMarkedText(n.clientName,e.searchTerm),(function(text,n){return[text.marked?t("mark",{key:n},[e._v(e._s(text.value))]):t("span",{key:n},[e._v(e._s(text.value))])]}))],2),e._v(" "),n.id===e.selectedRetailer?t("EIcon",{staticClass:"e-retailer-search__dropdown-item-tick",attrs:{icon:"tick_circle",color:"brand-01"}}):e._e()],1)})),0):e._e(),e._v(" "),e.hasNoResults?t("p",{staticClass:"e-retailer-search__no-results"},[e._v("\n    No results found\n  ")]):e._e()])}),[],!1,null,"1bb56970",null);t.default=component.exports},564:function(e,t,n){"use strict";n(537)},566:function(e,t,n){"use strict";n(540)},589:function(e,t,n){e.exports={}},623:function(e,t,n){"use strict";n.r(t);var r=n(0),o=(n(10),n(116)),c=n(26),l=n(514),d=n(516),f=n(517),h=(n(19),n(9)),m=n(59),v=function(e){return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.get("".concat(h.a.API_BASE).concat(h.a.TRACKING_ENDPOINT,"parcels/reference/").concat(e),{headers:{apiKey:h.a.HERMES_API_KEY}});case 3:return n=t.sent,t.abrupt("return",n.data.parcelIdentifiers);case 7:return t.prev=7,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()},_={components:{TextField:d.default,EButton:o.a,EIcon:c.a,InternationalRedirectModal:f.default},extends:l.default,data:function(){return{trackingNumber:"",helper:null,isError:!1,isInternationalRedirect:!1,internationalRedirectUrl:null}},computed:{submitDisabled:function(){return 8!==this.trackingNumber.length&&16!==this.trackingNumber.length}},methods:{handleSubmit:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.validator.validate();case 2:if(t.sent){t.next=5;break}return t.abrupt("return");case 5:return e.helper=null,e.isError=!1,t.prev=7,t.next=10,v(e.trackingNumber);case 10:n=t.sent,t.next=17;break;case 13:t.prev=13,t.t0=t.catch(7),e.isError=!0,e.helper="We could not retrieve the details for this Evri tracking number. Please check and try again.";case 17:if(1!==n.length){t.next=21;break}return e.setLocalStorageParcelIdentifiers(n),n[0].redirectUrl?(e.internationalRedirectUrl=n[0].redirectUrl,e.isInternationalRedirect=!0):e.$store.dispatch("entry/TRACK_A_SINGLE_PARCEL",e.trackingNumber),t.abrupt("return");case 21:if(!(n.length>1)){t.next=25;break}return e.setLocalStorageParcelIdentifiers(n),e.$store.dispatch("entry/TRACK_A_PNUMBER",e.trackingNumber),t.abrupt("return");case 25:e.isError=!0,e.helper="We do not recognise this as a valid Evri tracking number. Please check and try again.";case 27:case"end":return t.stop()}}),t,null,[[7,13]])})))()},resetErrorState:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$refs.validator.reset(),e.isError=!1,e.helper=null;case 3:case"end":return t.stop()}}),t)})))()},setLocalStorageParcelIdentifiers:function(e){localStorage.removeItem("parcelIdentifiers");var t=[],n={};n[this.trackingNumber]=e,t.push(JSON.stringify(n)),localStorage.setItem("parcelIdentifiers",t)},handleInternationalRedirectClose:function(){this.isInternationalRedirect=!1}}},k=(n(566),n(1)),component=Object(k.a)(_,(function(){var e=this,t=e._self._c;return t("div",[t("ECard",{staticClass:"form-card",attrs:{"thinner-padding":""},scopedSlots:e._u([{key:"footer",fn:function(){return[t("EntryFormFooter",{attrs:{"quick-links":e.quickLinks,"footer-links":e.footerLinks}})]},proxy:!0}])},[t("div",{staticClass:"form-card__intro"},[t("h3",[e._v("\n        "+e._s(e.heading)+"\n        "),e.headingSupplement?t("span",[e._v(e._s(e.headingSupplement))]):e._e()]),e._v(" "),t("p",[e._v(e._s(e.subheading))])]),e._v(" "),t("ValidationObserver",{ref:"validator",staticClass:"form-card__form"},[t("div",{staticClass:"form-card__form-fields"},[t("TextField",{attrs:{label:"Tracking number",name:"Tracking number",type:"text",mode:"passive",value:e.trackingNumber,"character-limit":16,spellcheck:"false",autocomplete:"do-not-autofill",rules:"required|multiLength:8,16","is-character-limit":"","is-required":"",helper:e.helper,"force-error-state":e.isError},on:{valueChanged:function(t){return e.resetErrorState()}},model:{value:e.trackingNumber,callback:function(t){e.trackingNumber=t},expression:"trackingNumber"}})],1),e._v(" "),t("EButton",{attrs:{type:"primary","aria-label":"Track",disabled:e.submitDisabled,"data-gtm-track":"btn-Track"},on:{click:function(t){return e.handleSubmit()}},scopedSlots:e._u([{key:"icon",fn:function(){return[t("EIcon",{attrs:{icon:"chevron_right"}})]},proxy:!0}])},[e._v("\n        Track\n        ")])],1)],1),e._v(" "),e.isInternationalRedirect?t("div",[t("InternationalRedirectModal",{attrs:{show:e.isInternationalRedirect,internationalRedirectUrl:e.internationalRedirectUrl}})],1):e._e()],1)}),[],!1,null,"5080262c",null);t.default=component.exports;installComponents(component,{InternationalRedirectModal:n(517).default})},624:function(e,t,n){"use strict";n.r(t);var r=n(0),o=(n(10),n(116)),c=n(26),l=n(514),d={components:{RetailerSearchField:n(551).default,EButton:o.a,EIcon:c.a},extends:l.default,data:function(){return{selectedRetailer:""}},methods:{handleSubmit:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.validator.validate();case 2:if(t.sent){t.next=5;break}return t.abrupt("return");case 5:e.$store.dispatch("entry/RETURN_A_PARCEL",e.selectedRetailer);case 6:case"end":return t.stop()}}),t)})))()}}},f=(n(564),n(1)),component=Object(f.a)(d,(function(){var e=this,t=e._self._c;return t("ECard",{staticClass:"form-card",attrs:{"thinner-padding":""},scopedSlots:e._u([{key:"footer",fn:function(){return[t("EntryFormFooter",{attrs:{"quick-links":e.quickLinks,"footer-links":e.footerLinks}})]},proxy:!0}])},[t("div",{staticClass:"form-card__intro"},[t("h3",[e._v("\n      "+e._s(e.heading)+"\n      "),e.headingSupplement?t("span",[e._v(e._s(e.headingSupplement))]):e._e()]),e._v(" "),t("p",[e._v(e._s(e.subheading))])]),e._v(" "),t("ValidationObserver",{ref:"validator",staticClass:"form-card__form",scopedSlots:e._u([{key:"default",fn:function(n){var r=n.invalid;return[t("div",{staticClass:"form-card__form-fields"},[t("RetailerSearchField",{staticClass:"form-card__input",attrs:{label:"Enter your retailer's name",rules:"required","is-required":""},model:{value:e.selectedRetailer,callback:function(t){e.selectedRetailer=t},expression:"selectedRetailer"}})],1),e._v(" "),t("EButton",{attrs:{type:"primary","aria-label":"Return a parcel",disabled:r,"data-gtm-track":"btn-Return a parcel"},on:{click:function(t){return e.handleSubmit()}},scopedSlots:e._u([{key:"icon",fn:function(){return[t("EIcon",{attrs:{icon:"chevron_right"}})]},proxy:!0}],null,!0)},[e._v("\n      Return a parcel\n      ")])]}}])})],1)}),[],!1,null,"535c943f",null);t.default=component.exports},626:function(e,t,n){"use strict";n.r(t);n(36),n(4),n(16),n(17);var r=n(622),o=n(623),c=n(624),l={components:{EAvatar:function(){return Promise.resolve().then(n.bind(null,196))},SendEntry:r.default,TrackEntry:o.default,ReturnEntry:c.default},props:{content:{type:Object[Array],default:[],required:!0}},data:function(){return{activeTabIndex:0}},computed:{hasTabs:function(){return this.content.length>1}}},d=(n(642),n(1)),component=Object(d.a)(l,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"hero-card"},[e.hasTabs?t("div",{staticClass:"tabs-card"},[t("div",{staticClass:"tabs-card__tabs"},e._l(e.content,(function(n,r){return t("div",{key:"tab-".concat(n.id),class:["tabs-card__tab",{"tabs-card__tab--active":e.activeTabIndex===r}],attrs:{"data-gtm-track":n.data.tabDataGtmTrack||null},on:{click:function(t){e.activeTabIndex=r}}},[e._v("\n        "+e._s(n.data.tabName)+"\n      ")])})),0),e._v(" "),e._l(e.content,(function(n,r){return t("div",{key:n.id,staticClass:"tabs-card__tab-content"},[t(n.data.name,{directives:[{name:"show",rawName:"v-show",value:e.activeTabIndex===r,expression:"activeTabIndex === tabIndex"}],tag:"component",staticClass:"form-card",attrs:{heading:n.data.heading,"heading-international":n.data.headingInternational,"destination-countries":n.data.destination_countries.url,"heading-supplement":n.data.headingSupplement,"heading-supplement-international":n.data.headingSupplementInternational,subheading:n.data.subheading,"subheading-international":n.data.subheadingInternational,"promo-text":n.data.promoText,"promo-text-international":n.data.promoTextInternational,"quick-links":n.data.quickLinks,"footer-links":n.data.footerLinks,"footer-links-international":n.data.footerLinksInternational}})],1)}))],2):e.content[0]?t("div",[t(e.content[0].data.name,{tag:"component",staticClass:"form-card",attrs:{heading:e.content[0].data.heading,"heading-international":e.content[0].data.headingInternational,destinationCountries:e.content[0].data.destination_countries.url,"heading-supplement":e.content[0].data.headingSupplement,"heading-supplement-international":e.content[0].data.headingSupplementInternational,subheading:e.content[0].data.subheading,"subheading-international":e.content[0].data.subheadingInternational,"promo-text":e.content[0].data.promoText,"promo-text-international":e.content[0].data.promoTextInternational,"quick-links":e.content[0].data.quickLinks,"footer-links":e.content[0].data.footerLinks,"footer-links-international":e.content[0].data.footerLinksInternational}})],1):e._e()])}),[],!1,null,"6fc9cf6c",null);t.default=component.exports},642:function(e,t,n){"use strict";n(589)}}]);