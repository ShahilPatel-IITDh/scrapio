"use strict";(self.webpackChunkAemPortal=self.webpackChunkAemPortal||[]).push([[544],{7478:function(t,e,s){var i=s(8565),n=s(5823);const a="minified";class r extends n.Y{on(){this.bar=this.ctx.querySelector("ol"),this.notifier=function(t,e){if(window.ResizeObserver){const s=new ResizeObserver(e);return s.observe(t),{denotify:s.disconnect.bind(s)}}let s;function i(){window.clearTimeout(s),s=window.setTimeout(e,200)}return window.addEventListener("resize",i,{passive:!0}),{denotify(){window.removeEventListener("resize",i)}}}(this.bar,this.resized.bind(this))}after(){this.resized()}stop(){this.notifier.denotify()}resized(){this.ctx.classList.remove(a),this.bar.clientWidth<this.bar.scrollWidth&&this.ctx.classList.add(a)}}var o=s(2521),c=s(3360),d=s(6691);const l="closedCrisis_";class h extends n.Y{on(){var t;return this.facts=(0,c.TS)(this.ctx),this.scsHeader=null!==(t=document.querySelector("sdx-header"))&&void 0!==t?t:void 0,this.initCrisis()}async initCrisis(){var t,e;if(this.facts.know("crisisNotification","absent","header"),!this.ctx.dataset.crisisDataUrl)return void this.facts.know("crisis",null,"header");let s=document.createElement("div");this.ctx.appendChild(s);try{const i=await fetch(this.ctx.dataset.crisisDataUrl),n=await i.json();if(!n||!n.crisis)return void this.facts.know("crisis",null,"header");if(this.facts.know("crisis",n,"header"),"1"===sessionStorage.getItem(l+n.hash))return void this.facts.know("crisisNotification","closed","header");const a=()=>{var t;s=(0,o.r)(s,d.createElement("div",{className:""})),this.facts.know("crisisNotification","closed","header"),document.documentElement.classList.remove("has-crisis"),null===(t=this.scsHeader)||void 0===t||t.removeAttribute("crisis-on"),sessionStorage.setItem(l+n.hash,"1")};let r=[];r=n.textMobile&&n.text!==n.textMobile?[d.createElement(u,{additionalClasses:"hidden-phone-down",link:n.link,target:n.target},n.text),d.createElement(u,{additionalClasses:"hidden-tablet-up",link:n.link,target:n.target},n.textMobile)]:[d.createElement(u,{link:n.link,target:n.target},n.text)],document.documentElement.classList.add("has-crisis"),null===(t=this.scsHeader)||void 0===t||t.setAttribute("crisis-on","true"),s=(0,o.r)(s,d.createElement("div",{className:"crisis"},d.createElement("div",{className:`notification-header ${null!==(e=n.styling)&&void 0!==e?e:""} notification--open`},d.createElement("div",{className:"notification__content"},r,d.createElement("button",{className:"notification__close notification-cancel","aria-label":"Close","on-click":a},d.createElement("i",{className:"icon icon-022-close","aria-hidden":"true"})))))),this.facts.know("crisisNotification","present","header")}catch(t){this.log.error("Failed to fetch crisis data",t),this.facts.know("crisisNotification","failed","header")}}}function u({additionalClasses:t,link:e,target:s},i){return d.createElement("div",{className:`notification__body ${t||""}`},e?d.createElement("a",{href:e,"style-color":"white",target:s||"",innerHTML:i}):d.createElement("span",{innerHTML:i}))}class g extends n.Y{on(){this.dropdownIcon=this.ctx.querySelector(".modL2Navigation__icon"),this.dropdownList=this.ctx.querySelector(".modL2Navigation__dropdown"),document.documentElement.classList.add("has-l2-nav"),this.ctx.classList.add("hidden"),this.ctx.setAttribute("aria-hidden","true")}after(){window.addEventListener("scroll",(()=>{this.ctx.classList.remove("hidden"),this.ctx.setAttribute("aria-hidden","false"),window.pageYOffset+80<this.getOffsetTop()||this.ctx.classList.add("is-visible"),window.pageYOffset>this.getOffsetTop()||this.ctx.classList.contains("is-visible")&&(this.ctx.classList.remove("is-visible"),this.toggleDropdown(!1)),0===window.pageYOffset&&(this.ctx.classList.add("hidden"),this.ctx.setAttribute("aria-hidden","true"))}),{passive:!0}),this.dropdownIcon.addEventListener("click",this.toggleDropdown.bind(this))}toggleDropdown(t){this.dropdownIcon.getAttribute("icon-name").includes("down")&&t?(this.dropdownIcon.setAttribute("icon-name","icon-chevron-normal-up"),this.dropdownList.classList.add("is-visible")):(this.dropdownIcon.setAttribute("icon-name","icon-chevron-normal-down"),this.dropdownList.classList.remove("is-visible"))}getOffsetTop(){return this.ctx.offsetTop}}var f=s(4156);class m extends n.Y{after(){new w(this.ctx)}}class w extends f.Z{_isMobile(){return!1}}var v=s(1582),L=s(6301);class p extends n.Y{on(){var t;document.documentElement.classList.add("has-sdx-header");const e=[this.ctx.closest(".scs-pageheader"),null===(t=this.ctx.closest(".scs-pageheader"))||void 0===t?void 0:t.parentElement,this.ctx.closest(".ui-header"),this.ctx.closest(".ui-panel-wrapper")].filter(Boolean);for(const t of e)t.style.position="static";document.body.style.minHeight="100vh",this.headerCoordinator=this.ctx.querySelector("scs-header-coordinator"),this.facts=(0,c.TS)(this.ctx)}async after(){await customElements.whenDefined("sdx-header"),this.updateLanguageLinks(),L._z.push(this.updateLanguageLinks.bind(this)),await customElements.whenDefined("scs-header-coordinator"),await this.initHeaderAttributes()}updateLanguageLinks(){var t,e,s,i;const n="string"==typeof this.ctx.navigation?JSON.parse(this.ctx.navigation):this.ctx.navigation,a=null===(e=null===(t=n.tertiary)||void 0===t?void 0:t.children)||void 0===e?void 0:e.find((t=>{var e;return"language-selection"===(null===(e=t.dataset)||void 0===e?void 0:e.trackLabel)})),r=[a,...null!==(s=null==a?void 0:a.children)&&void 0!==s?s:[]].filter(Boolean);let o=!1;for(const t of r){const e=t.href;if(!e)continue;const s=new URL(e,window.location.href),n=s.toString();s.search=window.location.search,s.hash=window.location.hash;const a=s.toString();if(a===n)continue;o=!0,t.href=a;const r=document.head.querySelector(`link[rel=alternate][hreflang="${null===(i=t.label)||void 0===i?void 0:i.toLowerCase()}"]`);r&&(r.href=a)}o&&(this.ctx.navigation={...n})}async initHeaderAttributes(){const t=(await(0,v.Ai)()).getUser();t?(this.headerCoordinator&&(this.headerCoordinator.customer={name:t.getFullName(),scn:t.getId(),segment:t.getSegment()}),(0,c.ZG)((()=>{this.facts.know("user",t,"user"),this.facts.know("name",t.getFullName(),"user"),this.facts.know("firstName",t.getFirstName(),"user"),this.facts.know("lastName",t.getLastName(),"user"),this.facts.know("scn",t.getId(),"user"),this.facts.know("segment",t.getSegment(),"user"),this.facts.know("authLevel",t.getAuthLevel(),"user")}))):(this.headerCoordinator&&(this.headerCoordinator.customer="ANONYMOUS"),this.facts.know("user",null,"user"))}}class k extends n.Y{constructor(){super(...arguments),this.languageLinks={}}async on(){var t,e;return this.scsHeader=null!==(t=this.ctx.querySelector("scs-header"))&&void 0!==t?t:void 0,this.setLanguageLinks(JSON.parse(this.ctx.dataset.languageLinks||"{}")),this.facts=(0,c.TS)(this.ctx),L._z.push(this.updateLanguageLinks.bind(this)),null===(e=this.scsHeader)||void 0===e||e.addEventListener("languageChanged",(t=>{const e=t.detail,s=this.languageLinks[e];s?location.assign(s):this.log.error(`No URL to switch to for language ${e}`)})),function(){const t=document.documentElement.classList,e=t.add.bind(t,"has-sticky-header"),s=t.remove.bind(t,"has-sticky-header");window.addEventListener("scroll",(()=>{window.pageYOffset>0?e():s()}),{passive:!0})}(),this.initHeaderAttributes()}setLanguageLinks(t){this.languageLinks=t,this.updateLanguageLinks()}updateLanguageLinks(){for(const t in this.languageLinks){const e=new URL(this.languageLinks[t],window.location.href);e.search=window.location.search,e.hash=window.location.hash;const s=e.toString();this.languageLinks[t]=s;const i=document.head.querySelector(`link[rel=alternate][hreflang="${t}"]`);i&&(i.href=s)}}async initHeaderAttributes(){var t,e,s,i;const n=(await(0,v.Ai)()).getUser();n?(this.scsHeader&&(this.scsHeader.setAttribute("customer-segment",n.getSegment()),this.scsHeader.setAttribute("user-lastname",n.getLastName()),this.scsHeader.setAttribute("user-firstname",n.getFirstName()),this.scsHeader.setAttribute("scn",n.getId())),(0,c.ZG)((()=>{this.facts.know("user",n,"user"),this.facts.know("name",n.getFullName(),"user"),this.facts.know("firstName",n.getFirstName(),"user"),this.facts.know("lastName",n.getLastName(),"user"),this.facts.know("scn",n.getId(),"user"),this.facts.know("segment",n.getSegment(),"user"),this.facts.know("authLevel",n.getAuthLevel(),"user")}))):this.facts.know("user",null,"user"),null===(e=null===(t=this.scsHeader)||void 0===t?void 0:t.querySelector("scs-header-l1"))||void 0===e||e.setAttribute("show-login",this.ctx.dataset.showLogin||"false"),null===(i=null===(s=this.scsHeader)||void 0===s?void 0:s.querySelector("scs-header-l1"))||void 0===i||i.setAttribute("show-basket",this.ctx.dataset.showBasket||"false")}}i.t.register({Breadcrumb:r,CrisisHeader:h,L2Navigation:g,MDD:m,RenderSdxHeader:p,SharedHeader:k})},2521:function(t,e,s){s.d(e,{h:function(){return n.h},r:function(){return l}});var i=s(7121),n=s(5568),a=s(5814),r=s(8389),o=s(9660),c=s(5124),d=s(2873);const l=(0,i.S)([a.m,r.f,o.q,c.O,d.X]),h={h:n.h,patch:l};window.snabbdom=h},1582:function(t,e,s){s.d(e,{Ai:function(){return h},dP:function(){return i}});var i,n=s(3360),a=s(9582);!function(t){t.RES="res",t.SME="sme",t.CBU="cbu"}(i||(i={}));const r=(0,n.O6)("profile");class o{constructor(t){this.data=t}getId(){return this.data.cust_scn}getFirstName(){return decodeURIComponent(this.data.cust_fname||"")}getLastName(){return decodeURIComponent(this.data.cust_lname||"")}getAuthLevel(){return decodeURIComponent(this.data.session_authlevel||"")}getFullName(){return this.isSegmentSme()||this.isSegmentCbu()?this.getLastName():[this.getFirstName(),this.getLastName()].filter(Boolean).filter(a.d0).join(" ")}getSegment(){return this.data.cust_segment||i.RES}isSegmentSme(){return this.getSegment()===i.SME}isSegmentCbu(){return this.getSegment()===i.CBU}isSegmentRes(){return this.getSegment()===i.RES}}class c{constructor(t){this.user=t}getUser(){return this.user}}const d="scsHeader.profile.loginData";let l;function h(){return l||(l=async function(){try{const t=await fetch("/etc/profile.json",{credentials:"same-origin"}),e=await t.json();if(d in e)return new c(new o(e[d]))}catch(t){return r.error("Profile JSON data not in expected format",t),new c}return new c}()),l}}},function(t){t.O(0,[565,724,467,30,156,455],(function(){return t(t.s=7478)})),t.O()}]);
//# sourceMappingURL=header.2e60a2c19e26e1fdf121.js.map