(function(globalVars){if(!globalVars.hasOwnProperty("chat"))globalVars.chat={};globalVars.chat.notificationLayer=function(){var exports={};var toggle,layer,wrapper,urlChat,urlVideoChat,url,urlChatPraefix,urlVideoChatPraefix;var layerTopDistance=196;var fadeInTime=300,fadeOutTime=300;var minVisibleHeight=150;var marginS=10;var marginM=15;var marginL=20;var mediaSizeL=960;var mediaSizeS=480;var mediaSizeM=720;var processHideLayer=function(){};var processShowLayer=function(){};function switchToggleButtonTextTo(textAttribut){if(typeof toggle!==
"undefined")toggle.html(toggle.attr(textAttribut))}function hideLayer(){if(typeof layer!=="undefined"){switchToggleButtonTextTo("show");layer.attr("state","inactive");layer.fadeOut(fadeOutTime);processHideLayer()}}function showLayer(){if(typeof layer!=="undefined"){switchToggleButtonTextTo("hide");layer.attr("state","active");layer.fadeIn(fadeInTime);processShowLayer()}}function toggleLayer(){if(typeof layer!=="undefined"){var state=layer.attr("state");if(state==="inactive")showLayer();else hideLayer()}}
function openTextChat(){globalVars.chat.openTextPopup(urlChat);hideLayer()}function openVideoChat(){globalVars.chat.openVideoPopup(urlVideoChat);hideLayer()}function openUrl(){window.open(url,"_blank",globalVars.chat.popupOptions);hideLayer()}function getHeight(elementhClassName){var elementHeight=$(elementhClassName).height();if(elementHeight!=="NaN"&&elementHeight!=="undefined"&&elementHeight!==0)return elementHeight;else{if(elementHeight===0)return 1;return mediaSizeL}}exports.updateLayerTopPosition=
function(){if(typeof layer!=="undefined"){var windowHeight;if(window.innerHeight)windowHeight=window.innerHeight;else windowHeight=document.body.clientHeight;var contentHeight=getHeight(".chat-notification-layer-encrypt-note")+getHeight(".chat-notification-layer-header")+getHeight(".chat-notification-layer-content")+getHeight(".chat-notification-layer-buttonline");var responsiveHeight=marginM;if(windowHeight>mediaSizeL)responsiveHeight=marginL;if(windowHeight<=mediaSizeS){responsiveHeight=marginS;
contentHeight=3*responsiveHeight+contentHeight}else contentHeight=4*responsiveHeight+contentHeight;var layerHeight=windowHeight-layerTopDistance-responsiveHeight;if(layerHeight>contentHeight)layerHeight=contentHeight;if(layerHeight<minVisibleHeight)layer.css({"display":"none"});else layer.css({"top":$(window).scrollTop()+layerTopDistance+"px","height":layerHeight+"px"})}};exports.initLayerHidden=function(){layer=$(".if6_chat-notification-layer");hideLayer();var layerDetach=$(".if6_chat-notification-layer").detach();
$(".if6_main").append(layerDetach);exports.updateLayerTopPosition();$("[name\x3dchat-notification-layer-header]").click(hideLayer);$("[name\x3dchat-notification-layer-close-icon]").click(hideLayer);var buttonChat=$("[name\x3dchat-notification-layer-button-text-chat]");urlChat=buttonChat.attr("href");urlChatPraefix=buttonChat.attr("praefix");if(urlChat&&urlChat.indexOf("/")===0&&urlChatPraefix)urlChat=urlChatPraefix+urlChat;buttonChat.click(openTextChat);var buttonVideoChat=$("[name\x3dchat-notification-layer-button-video-chat]");
urlVideoChat=buttonVideoChat.attr("href");urlVideoChatPraefix=buttonVideoChat.attr("praefix");if(urlVideoChat&&urlVideoChat.indexOf("/")===0&&urlVideoChatPraefix)urlVideoChat=urlVideoChatPraefix+urlVideoChat;buttonVideoChat.click(openVideoChat);var buttonUrl=$("[name\x3dchat-notification-layer-button-url]");url=buttonUrl.attr("href");buttonUrl.click(openUrl)};exports.initLayerEditMode=function(){exports.initLayerHidden();toggle=$("[name\x3dchat-notification-layer-toggle]");toggle.click(toggleLayer);
showLayer();exports.updateLayerTopPosition()};exports.initLayerWithShowDelay=function(sessionStoreId,delay){exports.initLayerHidden();processHideLayer=function(){if(!sessionStorage.getItem(sessionStoreId))sessionStorage.setItem(sessionStoreId,true)};if(!sessionStorage.getItem(sessionStoreId)){window.setTimeout(showLayer,delay);window.setTimeout(exports.updateLayerTopPosition,delay)}};return exports}();$(window).scroll(globalVars.chat.notificationLayer.updateLayerTopPosition);$(window).resize(globalVars.chat.notificationLayer.updateLayerTopPosition)})(IF6);