// TOP OF /INCLUDES/JS/HRB-COMMON-DATA.JS 2021 Set
var HRB_COMMON =
(function(){
	return {
		util:{
			generateUUID:function() {
			  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
				var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);
				var uuid=v.toString(16);
				return uuid;
			  });
			}
		}
	}
})();

if(typeof sessionStorage["sessionId"]=="undefined"){
	sessionStorage["sessionId"]=HRB_COMMON.util.generateUUID();
}

/********************************************/
/* Method exposed for Target PID
/********************************************/

function targetPartnerId(value) {
  try {
    //console.log("20.1a) targetPartnerId to Session " + value);
    sessionStorage["adobePartnerId"] = value;
    return true;
  } catch (e) {
    //console.log("20.1a) targetPartnerId error" + e.message);
    return false;
  }
}

function getDTMCookie(cname) {
    var name = cname + "=";
    var decodedCookie = decodeURIComponent(document.cookie);
    var ca = decodedCookie.split(';');
    for(var i = 0; i <ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') {
            c = c.substring(1);
        }
        if (c.indexOf(name) == 0) {
            return c.substring(name.length, c.length);
        }
    }
    return "";
}

var HRBData = HRBData || {}

/* begin: common data related to analytics 
The Dynamic Tag Management data layer var is defined below.  This file
is included at the top of each page so the HRB.digital_data is available
for population and reference as early as possible. The Adobe DTM script will
access these variables.
*/
/*HRBData.digital_data={}
HRBData.digital_data.dtmEnabled=true;

HRBData.digital_data.adobedtmProvidesVisitorApiJs=true;
HRBData.digital_data.adobedtmProvidesMboxJs=true;

HRBData.digital_data.satellitePageBottomHasFired=false;

HRBData.digital_data.page_section		= "";
HRBData.digital_data.page_sub_section	= "";
HRBData.digital_data.page_title			= "";*/

/* end: common data related to analytics */

/*  begin: GDPR
    Make sure data element matches sat_track cookie. 
    It's set to true if user first visits hrblock.com 
    If there's a local cookie, it might be false. 
    The root level (hrblock.com) cookie will always be true.
*/
var satTrackVal = getDTMCookie('sat_track');

if(satTrackVal==='true'){
    //HRBData.digital_data.eu_compliance='true';
    //console.log('HRBData.digital_data.eu_compliance: ' + HRBData.digital_data.eu_compliance);
} else if(satTrackVal==='false'){ // will only occur for expat pages
    //HRBData.digital_data.eu_compliance='false';
    //console.log('HRBData.digital_data.eu_compliance: ' + HRBData.digital_data.eu_compliance);
} else { 
/*  If undefined, this is first page view. 
    Turn on tracking. Non-EU tracking must be on. EU users will have opportunity to turn it off. */
    document.cookie = "sat_track=true; expires=5*365; path=/";
    //HRBData.digital_data.eu_compliance='true';
    //console.log('HRBData.digital_data.eu_compliance: ' + HRBData.digital_data.eu_compliance);
}
/* end: GDPR */

/* begin: common data not related to analytics */
HRBData.config={};
HRBData.config.enableAdobePricing		= false;

HRBData.config.ffaPartners=["180","4639","4720","5353","5354","5355","5356","5357","5358","5359","5796","5797","5798","5799","5801","7818","8875","8876","8877","8878","8879","8880","8881","8882","8883","9127","9128","9257","9446","9475","9531"]
HRBData.config.newWindowForFFA			= false;

HRBData.config.softwareCartMaintenance	= false;		// For annual software cutover
HRBData.config.backEditionsSkipMaintPage= false;		
HRBData.config.sendBackEditionsToMaintPage= false;		
HRBData.config.sendBackEditionsToOldCart= false;		// true until pre-order goes live on 11/06/2020
HRBData.config.priceGroupKeyForBackEditions	= "6949AC3C";
HRBData.config.yearForSoftware			= 2022;		// Increment when Pre-Order content changes go live

HRBData.config.bAddCamryIdToZero		= false;			// Only true if PCC CamryId <> software pricing service CamryId. Can be left on if they DO match but achieves nothing.
HRBData.config.CamryIdForZero			= "63D2A479";	// Updated for 2022 63D2A479 Default CamryId for new year when Pre-Order goes live.

HRBData.config.bEnablePidCamryOverride	= false;
HRBData.config.pidCamryOverride 		= {};	// {"0":"63D2A479","2631":"63D2A479","9423":"E08482DD"};

//HRBData.config.guaMaintenance			= false;
//HRBData.config.guaMaintPage				= "/online-contact";

HRBData.config.dtmDelay					= 1000;
HRBData.config.appInsightsDelay			= 1500;

HRBData.config.aggregateOfficeRating	= "4.7";
HRBData.config.aggregateOfficeReviewCount	= "1,026,000";

HRBData.config.bSpclEmpSolEnabled		= true;

HRBData.config.bEnableTprPriceUpdate	= true;
 
HRBData.config.bEnableBasePriceChange	= true;
// 204-Deluxe (TCDFED), 32-Premium (PAID1040FED), 47-Self Emp (SEPFed), 52-OA Basic (OABFED), 54-OA Deluxe (OADFED), 56-OR Premium (OAPFED), 58-OA Self Emp (OASFED), 60-small biz FED (SMBFED)
HRBData.config.lsp = {"204":"55.00","32":"75.00","47":"115.00","52":"70.00","54":"115.00","56":"165.00","58":"195.00","60":"145.00"};
HRBData.config.lspPartners=["0","2054","2055","2056","2057","2058","2059","2481","8986","9007","9008","9009","9010","9011","9012","9013","9014","9015","9016","9017","9018","9019","9020","9021","9022","9023","9024","9025","9026","9027","9070","9071","9106","9125","9126","9171","9200","9201","9213","9229","9230","9251","9441","9573","9592","9612","9622","9623","9624","9625","9626","9643","9644","9645","9646","9647","9650","9712","9713","9714","9754","9755","9756","9758","9759","9760","9761","9762","9767","9772","9786","9788","9789","9790","9791","9792","9793","9794","9795","9853","9854","9855","9856","9857","9861","9862","9863","9864","9865","9866","9867","9868"];

HRBData.config.ttPrice	= {"az":{"base":"99.98","save":"99"},"dlx":{"base":"59.99","save":"28"},"prem":{"base":"74.99","save":"28"},"se":{"base":"119.99","save":"48"}};

HRBData.config.retailPrice = {"federal": "69", "state": "59"};

HRBData.config.tpgPrice = {"federal": "49", "state": "49"};

HRBData.config.estest={};
HRBData.config.estest.beneplace = false;
HRBData.config.estest.corestream= false;
HRBData.config.estest.perkspot  = false;
/*end: common data not related to analytics */
// BOTTOM OF /INCLUDES/JS/HRB-COMMON-DATA.JS