(()=>{const t=document.querySelector.bind(document),e=document.querySelectorAll.bind(document),n="compact-header",o=n+"--sticky",c=n+"--transition",i=t("."+n),s=t(".compact-header__placeholder");let l=!1;const d=t("body"),a=t(".Header"),r=t(".js-sidebar-sticky"),u=t(".js-compact-header__toggle"),m=t(".js-compact-header__close"),h=t(".js-compact-header__apply");let f=0,p=!1;const _=t("."+n),v=t(".compact-header__bottom");_.classList.contains("compact-header--lvl-1")&&!v&&(p=!0);let g=null;d.classList.contains("single")&&!d.classList.contains("about")&&(g=document.createElement("div"),g.classList.add("compact-header__scrollbar"));const L=t(".js-toc"),C=t(".Checklists__toc"),w=e(".js-toc .FilterMenu__item--h3").length>0?e(".Content h2[id], .Content h3[id]"):e(".Content h2[id]"),y=(e(".js-toc js-toc__item").length,e(".Content .qu-ChecklistItem__header--text")),E=t(".js-toc .js-toc__title"),b=e(".js-toc .js-toc__item"),j=window.matchMedia("(min-width: 1380px)");function x(t=null){if(a&&i){const e=a.offsetHeight+i.offsetHeight;return t?e+t:e}return!1}function q(){!p&&i&&s&&!i.classList.contains(o)&&(s.style.minHeight=i.offsetHeight+"px")}function T(t=null){if(!p&&i&&s&&x()){q();if(2*s.offsetHeight<=document.documentElement.scrollTop)return i.classList.add(o),l=!0,!1;if("up"===t)return i.classList.add(c),setTimeout((()=>{i.classList.remove(o),i.classList.remove(c),l=!1,q()}),300),!1;i.classList.remove(o),l=!1}}function H(){if(g){if(!g.hasChildNodes()){const t=document.createElement("div");g.appendChild(t)}g.firstChild.style.width=function(){const t=document.documentElement,e=document.body,n="scrollTop",o="scrollHeight";return(t[n]||e[n])/((t[o]||e[o])-t.clientHeight)*100+"%"}()}}function M(){g&&(window.innerWidth<=767?a.append(g):i.append(g))}function S(){b.forEach((t=>{t.classList.remove("active")}))}function k(){null!==L&&b.forEach(((t,e)=>{const n=t,o=n.querySelector(".js-toc__item-title");n.dataset.number=e,""===E.textContent&&0===e&&o&&(E.textContent=o.textContent),n.addEventListener("click",(t=>{t.preventDefault(),S(),n.classList.add("active");const e=function(t){const e=t.getBoundingClientRect(),n=document.body,o=document.documentElement,c=window.pageYOffset||o.scrollTop||n.scrollTop,i=o.clientTop||n.clientTop||0,s=e.top+c-i;return Math.round(s)}(document.querySelector(n.getAttribute("href")));window.scroll({top:e-(x()+24),behavior:"smooth"})}))})),window.addEventListener("scroll",(()=>{if(window.clearTimeout(undefined),null!==L&&x()){let e=w;C&&(e=y),e.forEach((e=>{if(e.getBoundingClientRect().top<=x()+96){const n=e.getAttribute("id"),o=t(`.js-toc a[href*=${n}`);o&&(S(),o.classList.add("active"),E.textContent=o.textContent)}}))}}),!1)}function F(){let t=36;r&&x()&&!0===l&&(t=t+x()+"px",r.style.top=t)}T(),u&&m&&h&&[u,m,h].forEach((t=>{t.addEventListener("click",(()=>{d.classList.toggle("compact-header--active")}))})),H(),M(),function(){const t=e(".FilterMenu");t&&t.forEach((t=>{const e=t.querySelector(".FilterMenu__title"),n=t.querySelector(".FilterMenu__items");t.querySelectorAll(".FilterMenu__item").forEach((t=>{const o=t.querySelector(".FilterMenu__item-title");if(e&&o){const c=o.textContent;t.addEventListener("click",(()=>{e.textContent=c,n.classList.contains("visible")&&(n.classList.remove("visible"),e.classList.contains("active")&&e.classList.remove("active"),setTimeout((()=>{n.classList.remove("active")}),200))}))}}))}))}(),F(),k(),window.addEventListener("scroll",(function(){let t="down";document.body.getBoundingClientRect().top>f&&(t="up"),f=document.body.getBoundingClientRect().top,T(t),H(),F()}),!0),window.addEventListener("resize",(function(){T(),M()}),!0),j.addEventListener("change",(t=>{t.matches&&k()}))})();