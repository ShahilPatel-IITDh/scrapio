ï»¿function mystrtr(tekst,tablica,zmienna2){if((typeof(tablica)=="object")&&(tablica.length)){for(i in tablica){tekst=tekst.replace(RegExp(tablica[i][0],"g"),tablica[i][1])}return tekst;}else{tablica2=new Array();for(i=0;i<tablica.length;i++)tablica2[i]=[tablica.substr(i,1),zmienna2.substr(i,1)];return mystrtr(tekst,tablica2);}}
function getFlashMovieObject(movieName){if(window.document[movieName]){return window.document[movieName];}if(navigator.appName.indexOf("Microsoft Internet")==-1){if(document.embeds&&document.embeds[movieName])return document.embeds[movieName];}else{return document.getElementById(movieName);}}
function __getCookie(cname){var name=cname+"=";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' ')c=c.substring(1);if(c.indexOf(name)!=-1)return c.substring(name.length,c.length);}return"";}
function __setCookie(c_name,value,exdays){var exdate=new Date();exdate.setDate(exdate.getDate()+exdays);var c_value=escape(value)+((exdays==null)?"":"; expires="+exdate.toUTCString());document.cookie=c_name+"="+c_value+";path=/";}
function __setCookieSeconds(name,value,seconds){var date=new Date();date.setTime(date.getTime()+(seconds*1000));var expires="; expires="+date.toGMTString();document.cookie=name+"="+value+expires+"; path=/";}
function searchKey(urlS){var word=$("[name='search']").val();if(word==''||word==' '||word.length<3){$("[name='search']").focus();}else{word=$.trim(word);word=word.toLowerCase();var words=mystrtr(word,'Ã±Ã£Ã¡Ã©Ã­Ã³ÃºÃ±Ã§ÃÃ Ã¨Ã¬Ã²Ã¹ÃÃÃÃÃÃÃÃÃÃÃ£ÃµÃÃ','naaeiouncCaeiouAEIOUAEIOUaoAO');var search=words.replace(/([\s]+)/g,'_');search=urlS.replace("{keysearch}",search);__setCookieSeconds("issearch",1,10);location.href=search;}return false;}
var __j_alr=false;function __j_ajax_query2(data){var req=null;if(window.XMLHttpRequest)req=new XMLHttpRequest();else if(window.ActiveXObject)req=new ActiveXObject('Microsoft.XMLHTTP');if(req){req.onreadystatechange=function(){if(req.readyState==4){if(req.status==200){var r=req.responseText;var err=["Se ha borrado el juego de la lista !","No se pudo quitar.\nVerifica que aun este en la lista."];switch(r){case"ok":swal(err[0]);break;case"no":swal(err[1]);break;default:swal("No se pudo completar. Error: "+r);break;}if(__j_func=='a'){var R_f_where=parent.opener.document.getElementById('div_favoritos');if(!R_f_where){R_f_where=parent.document.getElementById('div_favoritos');return;}}else{var R_f_where=document.getElementById('div_favoritos');if(!R_f_where)return;}var oo;if(window.XMLHttpRequest)oo=new XMLHttpRequest();else if(window.ActiveXObject)oo=new ActiveXObject('Microsoft.XMLHTTP');if(oo){oo.onreadystatechange=function(){if(oo.readyState==4){if(oo.status==200){var r=oo.responseText;if(r=="no")return;R_f_where.innerHTML=r;}else R_f_where.innerHTML=oo.responseText;}};oo.open('GET','/modulos/list-fav-new.php',true);oo.send("");}__j_alr=false;}else{swal('Ooops, error');__j_alr=false;}}};req.open('GET',data,true);req.send("");}}
function __j_ajax_query(data){var req=null;if(window.XMLHttpRequest)req=new XMLHttpRequest();else if(window.ActiveXObject)req=new ActiveXObject('Microsoft.XMLHTTP');if(req){req.onreadystatechange=function(){if(req.readyState==4){if(req.status==200){var r=req.responseText;switch(r){case"ok":swal("Se ha agregado el juego a tus favoritos !");break;case"no":swal("No se pudo agregar.\nVerifica que ya no este en tu lista.");break;default:swal("No se pudo completar. Error: "+r);break;};var R_f_where=document.getElementById('div_favoritos');if(!R_f_where)return;var oo;if(window.XMLHttpRequest)oo=new XMLHttpRequest();else if(window.ActiveXObject)oo=new ActiveXObject('Microsoft.XMLHTTP');if(oo){oo.onreadystatechange=function(){if(oo.readyState==4){if(oo.status==200){var r=oo.responseText;if(r=="no")return;R_f_where.innerHTML=r;}else R_f_where.innerHTML=oo.responseText;}};oo.open('GET','/modulos/list-fav-new.php',true);oo.send("");}}else swal('Ooops, error');__j_alr=false;}};req.open('GET',data,true);req.send("");}}
function __j_check_alr(){var o=__j_alr;if(__j_alr)swal("Ya se esta procesando tu pedido. Por favor espera un momento.\nSi luego de mucho rato aun no funciona, recarga la pagina e intenta de nuevo, o contacta al administrador.");else __j_alr=true;return o;}
function addFavorite(nm,ln){if(!__j_check_alr()){__j_ajax_query('/ajax/favorite?a&n='+escape(nm)+'&l='+escape(ln));saveFavs();}$('#icobg-gmfv2id').hide();$('#icobg-gmfvquit2id').show();}
function quitFavorite(nm){if(!__j_check_alr()){swal({title:"",text:"Quitar '"+nm+"' de tus juegos favoritos ?",type:"warning",showCancelButton:true,confirmButtonColor:"#DD6B55",confirmButtonText:"Si, borrar!",closeOnConfirm:false},function(){swal("","Borrado!","success");__j_func='d';__j_ajax_query2('/ajax/favorite?r&n='+escape(nm));$("#icobg-gmfvquit2id").hide();$("#icobg-gmfv2id").show();return;});}__j_alr=false;return;}
function quitListFavorite(nm,id){if(!__j_check_alr()){swal({title:"",text:"Quitar '"+nm+"' de tus juegos favoritos ?",type:"warning",showCancelButton:true,confirmButtonColor:"#DD6B55",confirmButtonText:"Si, borrar!",closeOnConfirm:false},function(){swal("","Borrado!","success");__j_func='d';__j_ajax_query2('/ajax/favorite?r&n='+escape(nm));$("#fav"+id).hide();return;});}__j_alr=false;return;}
function loadFavHeart(){var favs=__getCookie('fav2');if(favs==''){$("#icobg-gmfv2id").show();return false;}var gameId=favs.split("%2C");for(i=0;i<gameId.length;i++){if(gameId[i]==___gameId){$("#icobg-gmfvquit2id").show();return false;}}$("#icobg-gmfv2id").show();}
function vote(tipo){var voteData={"i":___gameId,"t":tipo};$.ajax({data:voteData,url:'/ajax/vote',type:'post',}).done(function(msg){var res=msg.split("|");if(typeof res[1]!=='undefined'){$(".icobgb-vot1 strong").text(res[0]+"%");$(".icobgb-vot0 strong").text(res[1]+"%");swal("Gracias por votar!");return false;}else{swal(msg);}});return false;}
function lastGamesPlayed(){var played=__getCookie('played');if(played!=''){$.ajax({data:{"games":played},url:'/ajax/lastPlayedGamesByUser',type:'post',}).done(function(msg){$("#lastPlayed").html(msg);$("#lastPlayed").show();});}}
inArray=function(value,arr){var l=arr.length;for(var i=0;i<l;i++){if(arr[i]==value)return i;}return-1;}
function savePlayed(id){saveGamesStats();if(__getCookie('played')=="yed=1")return;var played2=__getCookie('played')?decodeURI(__getCookie('played')).split("|"):[];if(inArray(id,played2)!=-1){return;}played2.unshift(id);played2=played2.splice(0,20);played2=played2.join("|");__setCookie('played',played2,730);}
function saveGamesStats(){$.ajax({data:{"gameId":___gameId},url:'/ajax/saveGamesStats',type:'post'});}
function closePrivacy(){__setCookie("__privacy", "1", 365);$(".bottombar").hide();}
function saveFavs(){$.ajax({data:{"gameId":___gameId},url:'/ajax/saveFavs',type:'post'});}
function listFav(msg){$("#jgsfav").html(msg);$("#ultjgslink").parent("li").removeClass("active");$("#masjgdlink").parent("li").removeClass("active");$("#ultjgs").removeClass("in active");$("#masjgd").removeClass("in active");$("#jgsfavlink").parent("li").addClass("active");$("#jgsfav").addClass("in active");}
$("#jgsfavlink").click(function(){$.ajax({url:'/ajax/favs',beforeSend:function(){$("#jgsfav").html("Cargando...");}}).done(function(msg){$(".navpag").hide();$("#jgsfav").html(msg);});});$(".icobgb-gmfv").click(function(){$.ajax({url:'/ajax/favs',beforeSend:function(){$("#jgsfav").html("Cargando...");}}).done(function(msg){$(".navpag").hide();listFav(msg);});});

$("#masjgdlink").click(function(){__setCookie("mostplayed",1,365);$.ajax({data:{type:___ps_type,s:___ps_s,p:1},url:'/ajax/mostPlayedGames',type:'post',beforeSend:function(){$("#masjgd").html("Cargando...");}}).done(function(msg){location.href = msg;/*$(".navpag").show();$("#masjgd").html(msg);*/});});
$("#ultjgslink").click(function(){__setCookie("mostplayed",0,0);$.ajax({data:{type:___ps_type,s:___ps_s,p:1},url:'/ajax/homes',type:'post',beforeSend:function(){$("#ultjgs").html("Cargando...");}}).done(function(msg){location.href = msg;/*$(".navpag").show();$("#ultjgs").html(msg);*/});});
$("#masvallink").click(function(){__setCookie("mostplayed",0,0);$.ajax({data:{type:___ps_type,s:___ps_s,p:1},url:'/ajax/topRatedGames',type:'post',beforeSend:function(){$("#masval").html("Cargando...");}}).done(function(msg){location.href = msg;/*$(".navpag").show();$("#masval").html(msg);*/});});

if(__getCookie("issearch")==""&&__getCookie("mostplayed")!=""&&window.location.href.indexOf("/mejores-juegos/")==-1&&window.location.href.indexOf("/juegos/")==-1&&window.location.href.indexOf("/mas-valorados/juegos-de")==-1){$("#masjgdlink").trigger("click");}
if(__getCookie("issearch")!=""&&window.location.href.indexOf("/buscador/")!=-1){$("#masvallink").trigger("click");}
if(__getCookie("__privacy")==""){$(".bottombar").show();}
$(".closebar").click(function(){closePrivacy();}); 

$("#masval #orderTime span").click(function(){$("#masval #orderTime .current").removeClass("current");$(this).addClass("current");var orderTime=$(this).attr('data-sort-id');$.ajax({data:{type:___ps_type,s:___ps_s,p:1,ot:orderTime},url:'/ajax/topRatedGames',type:'post',beforeSend:function(){$("#masval").html("Cargando...");}}).done(function(msg){location.href = msg;/*$(".navpag").show();$("#masval").html(msg);*/});});
$("#masjgd #orderTime span").click(function(){$("#masjgd #orderTime .current").removeClass("current");$(this).addClass("current");var orderTime=$(this).attr('data-sort-id');$.ajax({data:{type:___ps_type,s:___ps_s,p:1,ot:orderTime},url:'/ajax/mostPlayedGames',type:'post',beforeSend:function(){$("#masjgd").html("Cargando...");}}).done(function(msg){location.href = msg;/*$(".navpag").show();$("#masjgd").html(msg);*/});});
$("#masjgd #orderRatedPlayed span").click(function(){__setCookie("mostplayed",0,0);$("#masjgd #orderRatedPlayed .current").removeClass("current");$(this).addClass("current");var orderTime=$(this).attr('data-sort-id');$.ajax({data:{type:___ps_type,s:___ps_s,p:1,ot:orderTime},url:'/ajax/mostPlayedGames',type:'post',beforeSend:function(){$("#masjgd").html("Cargando...");}}).done(function(msg){location.href = msg;/*$(".navpag").show();$("#masjgd").html(msg);*/});});

//function closeSlot(){__setCookie("_slotAdv", "1", 1);$(".slotAdv").hide();}
//$(".closeSlot").click(function(){closeSlot();});
//if(__getCookie("_slotAdv")==""){$(".slotAdv").show();}