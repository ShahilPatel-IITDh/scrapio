function hex_md5(a){return binl2hex(core_md5(str2binl(a),a.length*chrsz))}function b64_md5(a){return binl2b64(core_md5(str2binl(a),a.length*chrsz))}function str_md5(a){return binl2str(core_md5(str2binl(a),a.length*chrsz))}function hex_hmac_md5(a,b){return binl2hex(core_hmac_md5(a,b))}function b64_hmac_md5(a,b){return binl2b64(core_hmac_md5(a,b))}function str_hmac_md5(a,b){return binl2str(core_hmac_md5(a,b))}function md5_vm_test(){return"900150983cd24fb0d6963f7d28e17f72"==hex_md5("abc")}function core_md5(a,b){a[b>>5]|=128<<b%32,a[(b+64>>>9<<4)+14]=b;for(var c=1732584193,d=-271733879,e=-1732584194,f=271733878,g=0;g<a.length;g+=16){var h=c,i=d,j=e,k=f;c=md5_ff(c,d,e,f,a[g+0],7,-680876936),f=md5_ff(f,c,d,e,a[g+1],12,-389564586),e=md5_ff(e,f,c,d,a[g+2],17,606105819),d=md5_ff(d,e,f,c,a[g+3],22,-1044525330),c=md5_ff(c,d,e,f,a[g+4],7,-176418897),f=md5_ff(f,c,d,e,a[g+5],12,1200080426),e=md5_ff(e,f,c,d,a[g+6],17,-1473231341),d=md5_ff(d,e,f,c,a[g+7],22,-45705983),c=md5_ff(c,d,e,f,a[g+8],7,1770035416),f=md5_ff(f,c,d,e,a[g+9],12,-1958414417),e=md5_ff(e,f,c,d,a[g+10],17,-42063),d=md5_ff(d,e,f,c,a[g+11],22,-1990404162),c=md5_ff(c,d,e,f,a[g+12],7,1804603682),f=md5_ff(f,c,d,e,a[g+13],12,-40341101),e=md5_ff(e,f,c,d,a[g+14],17,-1502002290),d=md5_ff(d,e,f,c,a[g+15],22,1236535329),c=md5_gg(c,d,e,f,a[g+1],5,-165796510),f=md5_gg(f,c,d,e,a[g+6],9,-1069501632),e=md5_gg(e,f,c,d,a[g+11],14,643717713),d=md5_gg(d,e,f,c,a[g+0],20,-373897302),c=md5_gg(c,d,e,f,a[g+5],5,-701558691),f=md5_gg(f,c,d,e,a[g+10],9,38016083),e=md5_gg(e,f,c,d,a[g+15],14,-660478335),d=md5_gg(d,e,f,c,a[g+4],20,-405537848),c=md5_gg(c,d,e,f,a[g+9],5,568446438),f=md5_gg(f,c,d,e,a[g+14],9,-1019803690),e=md5_gg(e,f,c,d,a[g+3],14,-187363961),d=md5_gg(d,e,f,c,a[g+8],20,1163531501),c=md5_gg(c,d,e,f,a[g+13],5,-1444681467),f=md5_gg(f,c,d,e,a[g+2],9,-51403784),e=md5_gg(e,f,c,d,a[g+7],14,1735328473),d=md5_gg(d,e,f,c,a[g+12],20,-1926607734),c=md5_hh(c,d,e,f,a[g+5],4,-378558),f=md5_hh(f,c,d,e,a[g+8],11,-2022574463),e=md5_hh(e,f,c,d,a[g+11],16,1839030562),d=md5_hh(d,e,f,c,a[g+14],23,-35309556),c=md5_hh(c,d,e,f,a[g+1],4,-1530992060),f=md5_hh(f,c,d,e,a[g+4],11,1272893353),e=md5_hh(e,f,c,d,a[g+7],16,-155497632),d=md5_hh(d,e,f,c,a[g+10],23,-1094730640),c=md5_hh(c,d,e,f,a[g+13],4,681279174),f=md5_hh(f,c,d,e,a[g+0],11,-358537222),e=md5_hh(e,f,c,d,a[g+3],16,-722521979),d=md5_hh(d,e,f,c,a[g+6],23,76029189),c=md5_hh(c,d,e,f,a[g+9],4,-640364487),f=md5_hh(f,c,d,e,a[g+12],11,-421815835),e=md5_hh(e,f,c,d,a[g+15],16,530742520),d=md5_hh(d,e,f,c,a[g+2],23,-995338651),c=md5_ii(c,d,e,f,a[g+0],6,-198630844),f=md5_ii(f,c,d,e,a[g+7],10,1126891415),e=md5_ii(e,f,c,d,a[g+14],15,-1416354905),d=md5_ii(d,e,f,c,a[g+5],21,-57434055),c=md5_ii(c,d,e,f,a[g+12],6,1700485571),f=md5_ii(f,c,d,e,a[g+3],10,-1894986606),e=md5_ii(e,f,c,d,a[g+10],15,-1051523),d=md5_ii(d,e,f,c,a[g+1],21,-2054922799),c=md5_ii(c,d,e,f,a[g+8],6,1873313359),f=md5_ii(f,c,d,e,a[g+15],10,-30611744),e=md5_ii(e,f,c,d,a[g+6],15,-1560198380),d=md5_ii(d,e,f,c,a[g+13],21,1309151649),c=md5_ii(c,d,e,f,a[g+4],6,-145523070),f=md5_ii(f,c,d,e,a[g+11],10,-1120210379),e=md5_ii(e,f,c,d,a[g+2],15,718787259),d=md5_ii(d,e,f,c,a[g+9],21,-343485551),c=safe_add(c,h),d=safe_add(d,i),e=safe_add(e,j),f=safe_add(f,k)}return Array(c,d,e,f)}function md5_cmn(a,b,c,d,e,f){return safe_add(bit_rol(safe_add(safe_add(b,a),safe_add(d,f)),e),c)}function md5_ff(a,b,c,d,e,f,g){return md5_cmn(b&c|~b&d,a,b,e,f,g)}function md5_gg(a,b,c,d,e,f,g){return md5_cmn(b&d|c&~d,a,b,e,f,g)}function md5_hh(a,b,c,d,e,f,g){return md5_cmn(b^c^d,a,b,e,f,g)}function md5_ii(a,b,c,d,e,f,g){return md5_cmn(c^(b|~d),a,b,e,f,g)}function core_hmac_md5(a,b){var c=str2binl(a);c.length>16&&(c=core_md5(c,a.length*chrsz));for(var d=Array(16),e=Array(16),f=0;16>f;f++)d[f]=909522486^c[f],e[f]=1549556828^c[f];var g=core_md5(d.concat(str2binl(b)),512+b.length*chrsz);return core_md5(e.concat(g),640)}function safe_add(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}function bit_rol(a,b){return a<<b|a>>>32-b}function str2binl(a){for(var b=Array(),c=(1<<chrsz)-1,d=0;d<a.length*chrsz;d+=chrsz)b[d>>5]|=(a.charCodeAt(d/chrsz)&c)<<d%32;return b}function binl2str(a){for(var b="",c=(1<<chrsz)-1,d=0;d<32*a.length;d+=chrsz)b+=String.fromCharCode(a[d>>5]>>>d%32&c);return b}function binl2hex(a){for(var b=hexcase?"0123456789ABCDEF":"0123456789abcdef",c="",d=0;d<4*a.length;d++)c+=b.charAt(a[d>>2]>>d%4*8+4&15)+b.charAt(a[d>>2]>>d%4*8&15);return c}function binl2b64(a){for(var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c="",d=0;d<4*a.length;d+=3)for(var e=(a[d>>2]>>8*(d%4)&255)<<16|(a[d+1>>2]>>8*((d+1)%4)&255)<<8|a[d+2>>2]>>8*((d+2)%4)&255,f=0;4>f;f++)c+=8*d+6*f>32*a.length?b64pad:b.charAt(e>>6*(3-f)&63);return c}function BookDownloadPanel(a){this.options=a,$.base64.utf8encode=!0;var b=$.base64.btoa("bookId="+this.options.bookId+"&isDownLoad=1"),c=$.base64.btoa("bookId="+this.options.bookId+"&isDownLoad=0");if(0==parseInt(fh5.uType)&&this.options.userid!=this.options.bookUserId)var c=$.base64.btoa("bookId="+this.options.bookId+"&isDownLoad=0&isScore=1");var d=b.split("").reverse().join("").replace(/=/g,""),e=c.split("").reverse().join("").replace(/=/g,"");if(this.lightBox=this.options.isReader?new FixedLightBox("Download","","4",{hasBtns:!1}):new FixedLightBox("Download Settings","","1",{hasBtns:!0}),this.options.isReader){var f=this;f.init(null,d,e),f.lightBox.launch()}else{var f=this;$.ajax({url:"/download/check-download-files-online.php",type:"POST",dataType:"json",data:{bookid:f.options.bookId},beforeSend:function(){f.lightBox.launchLoading()},success:function(a){switch(f.lightBox.cancelLoading(),a.status.toString()){case"1":f.init(a,d,e);break;case"0":case"-1":f.lightBox.launchError()}},error:function(){f.lightBox.launchError()}})}}function BookcaseEmbedPanel(a){var b={domainUrl:"",url:"",width:900,height:500,iframeAttr:" seamless='seamless' scrolling='no' frameborder='0' allowtransparency='true' allowfullscreen "};this.options=$.extend({},b,a),this.panel=$("<div class='cc-light-box-content-panel'></div>"),this.iframeContainer=$("<div class='cc-embed-iframe-container-middle cc-bookcase-embed-bookcase-background'></div>"),this.iframe=$("<iframe src='"+utils.pasreHttps(this.options.url)+"' class='cc-embed-iframe'"+this.options.iframeAttr+"></iframe>"),this.stylingOptions=$("<div class='cc-embed-title'>Options:</div>"),this.size=$("<div class='cc-input-group-l text-left'></div>"),this.sizeLabel=$("<label class='cc-embed-label'>Size:</label>"),this.smallLabel=$("<label class='cc-embed-square cc-embed-small' for='small'></label>"),this.smallRadio=$("<input class='cc-embed-radio' type='radio' name='size' id='small'></input>"),this.middleLabel=$("<label class='cc-embed-square cc-embed-middle' for='middle'></label>"),this.middleRadio=$("<input class='cc-embed-radio' type='radio' name='size' id='middle'></input>"),this.largeLabel=$("<label class='cc-embed-square cc-embed-large' for='large'></label>"),this.largeRadio=$("<input class='cc-embed-radio' type='radio' name='size' id='large' checked></input>"),this.customLabel=$("<label class='cc-embed-custom' for='custom'></label>"),this.customWidthInput=$("<input type='number' class='cc-input-text cc-embed-number-input'> X </input>"),this.customHeightInput=$("<input type='number' class='cc-input-text cc-embed-number-input'></input>"),this.customPx=$("<span class='cc-embed-custom-px'> px</span>"),this.customHelp=$("<span class='cc-embed-custom-help'><span class='cc-star'>*</span> Press \"Enter\" Button on the keyboard to apply your changes.</span>"),this.customRadio=$("<input class='cc-embed-radio' type='radio' name='size' id='custom'></input>"),this.optionsSkin=$("<div class='cc-input-group-l text-left'></div>"),this.optionsSkinLabel=$("<label class='cc-embed-label'>Skin:</label>"),this.optionsSkinRedLabel=$("<label class='cc-embed-square cc-bookcase-embed-skin cc-bookcase-embed-skin-red' for='red'></label>"),this.optionsSkinRedRadio=$("<input class='cc-embed-radio' type='radio' name='skin' id='red' checked></input>"),this.optionsSkinGoldLabel=$("<label class='cc-embed-square cc-bookcase-embed-skin cc-bookcase-embed-skin-gold' for='gold'></label>"),this.optionsSkinGoldRadio=$("<input class='cc-embed-radio' type='radio' name='skin' id='gold'></input>"),this.optionsSkinSilverLabel=$("<label class='cc-embed-square cc-bookcase-embed-skin cc-bookcase-embed-skin-silver' for='silver'></label>"),this.optionsSkinSilverRadio=$("<input class='cc-embed-radio' type='radio' name='skin' id='silver'></input>"),this.optionsSkinGreenLabel=$("<label class='cc-embed-square cc-bookcase-embed-skin cc-bookcase-embed-skin-green' for='green'></label>"),this.optionsSkinGreenRadio=$("<input class='cc-embed-radio' type='radio' name='skin' id='green'></input>"),this.optionsSkinYellowLabel=$("<label class='cc-embed-square cc-bookcase-embed-skin cc-bookcase-embed-skin-yellow' for='yellow'></label>"),this.optionsSkinYellowRadio=$("<input class='cc-embed-radio' type='radio' name='skin' id='yellow'></input>"),this.step=$("<div class='cc-embed-title steps'>Steps:</div>"),this.iframeStepContainer=$("<div></div>"),this.iframeStep1=$("<div class='cc-input-group-l cc-float-fix text-left'></div>"),this.iframeStepTitle1=$("<p class='cc-embed-step'>1. Copy the Embed Code below and paste it into your HTML file.</p>"),this.iframeStepCode1=$("<textarea class='cc-embed-code-textarea cc-textarea'></textarea>"),this.domainEmbedOriginal=$("<p class='cc-bookcase-embed-show-original text-left'> &gt; Embed the original bookcase hosted on Fliphtml5 Domain?</p>"),this.lightBox=new FixedLightBox("Embed this bookcase into your website","","1",{hasBtns:!0,hasPadding:!0}),this.lightBox.getSaveBtn().hide(),this.lightBox.getCancelBtn().text("close"),this.lightBox.getPanel().append(this.iframeContainer.append(this.iframe)).append(this.stylingOptions).append(this.size.append(this.sizeLabel).append(this.smallLabel.append(this.smallRadio)).append(this.middleLabel.append(this.middleRadio)).append(this.largeLabel.append(this.largeRadio)).append(this.customLabel.append(this.customWidthInput).append(this.customHeightInput).append(this.customRadio).append(this.customPx)).append(this.customHelp)).append(this.optionsSkin.append(this.optionsSkinLabel).append(this.optionsSkinRedLabel.append(this.optionsSkinRedRadio)).append(this.optionsSkinGoldLabel.append(this.optionsSkinGoldRadio)).append(this.optionsSkinSilverLabel.append(this.optionsSkinSilverRadio)).append(this.optionsSkinGreenLabel.append(this.optionsSkinGreenRadio)).append(this.optionsSkinYellowLabel.append(this.optionsSkinYellowRadio))).append(this.step).append(this.iframeStepContainer.append(this.iframeStep1.append(this.iframeStepTitle1).append(this.iframeStepCode1))),this.lightBox.launch();var c=this;c.resizeIframe(c.options.width,c.options.height),this.options.domainUrl&&(this.lightBox.getPanel().append(this.domainEmbedOriginal),this.domainEmbedOriginal.click(function(){c.lightBox.cancel(),new BookcaseEmbedPanel({url:c.options.url})})),$([this.iframeStepCode1]).each(function(){var a=$(this);a.on("click",utils.selectCode.bind(utils,a))}),$([this.smallLabel,this.smallRadio]).each(function(){$(this).on("click",c.resizeIframe.bind(c,400,250))}),$([this.middleLabel,this.middleRadio]).each(function(){$(this).on("click",c.resizeIframe.bind(c,700,400))}),$([this.largeLabel,this.largeRadio]).each(function(){$(this).on("click",c.resizeIframe.bind(c,900,500))}),$([this.customWidthInput,this.customHeightInput]).each(function(){var a=$(this);a.on("focus",function(){c.customRadio[0].checked=!0}),a.on("change",function(){c.customRadio[0].checked=!0,c.resizeIframe(c.customWidthInput.val(),c.customHeightInput.val())}),a.on("blur",function(){c.resizeIframe(c.customWidthInput.val(),c.customHeightInput.val())}),a.on("keypress",function(a){13===a.which&&c.resizeIframe(c.customWidthInput.val(),c.customHeightInput.val())})}),this.optionsSkin.find("input[name=skin]").on("change",function(){var a=(c.options.domainUrl?c.options.domainUrl:c.options.url)+"/"+this.id;c.iframe.attr("src",c.options.url+"/"+this.id),c.setCode(a)})}function BuyBackPanel(a){this.lightbox=new FixedLightBox("Paypal Payment Confirm","","0",{isEasyClose:!0,hasPadding:!0}),this.isFlipH5="fliphtml5.com"==document.domain||"online.fliphtml5.com"==document.domain||"test.fliphtml5.com"==document.domain,this.container=$("<div class='cc-buy-back-panel'></div>"),this.title=$("<p class='cc-buy-back-panel-title'>Please complete the payment in the opened Paypal page.</p>"),this.successGroup=$("<div></div>"),this.successText=$("<span class='cc-success-color cc-buy-back-panel-status'><i class='fa fa-check-circle'></i> Payment Succeeded</span>"),this.successCheckBtn=$(this.isFlipH5?"<a class='cc-underline' href='/center/library/#Order-List'>Check Order List</a>":"<a class='cc-underline' href='https://fliphtml5.com/center/library/#Order-List'>Check Order List</a>"),this.failGroup=$("<div></div>"),this.failText=$("<span class='cc-error-color cc-buy-back-panel-status'><i class='fa fa-times-circle'></i> Payment Failed</span>"),this.failRepayBtn=$("<a class='cc-underline'>Try Again</a>"),this.lightbox.getPanel().addClass("cc-border").append(this.container.append(this.title).append(this.successGroup.append(this.successText).append(this.successCheckBtn)).append(this.failGroup.append(this.failText).append(this.failRepayBtn)));var b=this;this.successCheckBtn.on("click",function(a){a.preventDefault();try{parent.fh5&&parent.fh5.hasOwnProperty("isLoggedIn")&&(parent.location.href=this.href)}catch(a){self==top?window.location.href=this.href:window.open(this.href)}}),this.failRepayBtn.on("click",function(){b.lightbox.cancel(),new BuyPanel(a.buyPanelOpts)}),this.lightbox.launch()}function BuyPanel(a){this.options=a,this.isFlipH5="fliphtml5.com"==document.domain||"online.fliphtml5.com"==document.domain||"test.fliphtml5.com"==document.domain,this.lightbox=new FixedLightBox("Access Full Version","","0",{hasBtns:!0,hasPadding:!0,isEasyClose:!0}),this.container=$("<div class='cc-buy-panel'></div>"),this.title=$("<p class='cc-buy-panel-title'>Order Information: </p>"),this.table=$("<table class='table table-bordered cc-buy-panel-table'></table>"),this.thead=$("<thead><tr><th>Item</th><th>Amount</th></tr></thead>"),this.tbody=$("<tbody><tr><td><img class='cc-buy-panel-book-shot' src='"+utils.parseBookShot(a.url,a.isNew)+"'/><div class='cc-ver cc-buy-panel-book-title'><div class='cc-ver-content'>"+a.title+"</div></div></td><td><span class='cc-buy-panel-book-price'>"+a.currency+" "+a.price+"</span></td></tr></tbody>"),this.lightbox.getPanel().append(this.container.append(this.title).append(this.table.append(this.thead).append(this.tbody))),this.lightbox.getSaveBtn().removeClass("button-pure-green").addClass("button-pure-blue").html("Purchase with Paypal").on("click",this.purchase.bind(this)),this.lightbox.launch()}function ContactBall(){this.ball=$("<div class='cc-contact-ball'></div>"),this.icon=$("<i class='cc-contact-ball-icon icon icon-comment'></i>"),this.textContainer=$("<div class='cc-contact-ball-text-container cc-hide'></div>"),this.text1=$("<div class='cc-contact-ball-text1'>Contact</div>"),this.text2=$("<div class='cc-contact-ball-text2'>Us</div>"),this.ball.append(this.icon).append(this.textContainer.append(this.text1).append(this.text2));var a=this;this.timeoutId=null,this.ball.hover(function(){a.ball.stop(!0,!0).animate({height:"+=30",width:"+=30",left:"-=15",top:"-=15"},300,function(){a.textContainer.stop(!0,!0).fadeIn(200)}),a.icon.stop(!0,!0).fadeOut(200)},function(){a.ball.stop(!0,!0).animate({height:"-=30",width:"-=30",left:"+=15",top:"+=15"},300),a.textContainer.stop(!0,!0).fadeOut(0),a.icon.stop(!0,!0).fadeIn(200)}),$(window).on("scroll",this.scrollBall.bind(this)),this.ball.on("click",function(){window.location.href="/contact-us"}),this.ball.appendTo($("body")),this.scrollBall()}function ContactSearch(a){var b={url:"https://online.fliphtml5.com/kntd/hsim/",emails:[],okCallback:null};this.options=$.extend({},b,a),this.contacts=[],this.hasSelect=[],this.lightbox=new FixedLightBox("Import Contacts","",""),this.$p=this.create(),this.lightbox.getPanel().empty().append(this.$p),this.lightbox.launch()}function CookiePanel(a,b,c,d){var e=this;this.cookieArr=this.getCookieToArray(a),this.cookieName=a,this.$cookiePanel=null,this.$input=b,this.$content=c||b,b.on("focus click",function(){e.createCookie()}).on("blur",function(){e.destroy()}).on("keydown",function(a){if(e.$ulPanle){13==a.which&&e.destroy();var b=e.$ulPanle.children("li"),c=b.first(),d=b.last();if(38==a.which){var f=e.$ulPanle.find(".hover-active");f.length>0?($currentPrev=f.prev("li"),$currentPrev.length>0?(b.removeClass("hover-active"),$currentPrev.addClass("hover-active"),e.$input.val($currentPrev.attr("data-value"))):(b.removeClass("hover-active"),d.addClass("hover-active"),e.$input.val(c.attr("data-value")))):(b.removeClass("hover-active"),d.addClass("hover-active"),e.$input.val(c.attr("data-value")))}else if(40==a.which){var f=e.$ulPanle.find(".hover-active");f.length>0?($currentNext=f.next("li"),$currentNext.length>0?(b.removeClass("hover-active"),$currentNext.addClass("hover-active"),e.$input.val($currentNext.attr("data-value"))):(b.removeClass("hover-active"),c.addClass("hover-active"),e.$input.val(c.attr("data-value")))):(b.removeClass("hover-active"),c.addClass("hover-active"),e.$input.val(c.attr("data-value")))}}}),this.callback=d}function DownloadPanel(a,b){a||(a=48e3);var c,d,e=a.toString().split(""),f=e.length;switch(this.panel=$("<div class='cc-new-download-bar' data-value='"+a+"'>"),b){case"mac":d="Try FlipHTML5 for Mac free and experience increased efficiency and productivity";break;case"windows":d="Try FlipHTML5 for Windows free and experience increased efficiency and productivity";break;default:d="Try FlipHTML5 free and experience increased efficiency and productivity"}for(this.title=$("<p>"+d+"</p>"),this.countContainer=$("<div class='cc-new-download-bar-count'>"),c=0;f>c;c++)this.countContainer.append($("<span>"+e[c]+"</span>")),(f-1-c)%3==0&&c!==f-1&&this.countContainer.append("<strong class='cc-new-download-bar-comma'>,<strong>");switch(this.windowsDownload=$("<div class='cc-inline-wrapper'><a href='https://fliphtml5.com/download/flip-html5.zip' rel='nofollow'><div class='cc-download-windows'>Download Now</div></a></div>"),this.macDownload=$("<div class='cc-inline-wrapper'><a href='https://fliphtml5.com/download/fliphtml5.zip' rel='nofollow'><div class='cc-download-apple'>Download Now</div></a></div>"),this.appDownload=$("<div class='cc-inline-wrapper'><a target='_blank' href='/app' rel='nofollow'><div class='cc-download-ios'>Download APP</div></a></div>"),this.macLink=$("<a class='cc-new-download-bar-link' href='/mac'>FlipHTML5 For Mac</a>"),this.windowsLink=$("<a class='cc-new-download-bar-link' href='/windows'>FlipHTML5 For Windows</a>"),this.appLink=$("<a class='cc-new-download-bar-link' href='/app' target='_blank'>FlipHTML5 IOS APP</a>"),this.panel.append(this.title).append(this.countContainer),b){case"mac":this.panel.append(this.macDownload);break;case"windows":this.panel.append(this.windowsDownload);break;default:this.panel.append(this.windowsDownload).append(this.macDownload).append(this.appDownload)}this.windowsDownload.on("click",this.download.bind(this)),this.macDownload.on("click",this.download.bind(this))}function DownloadPointPanel(a){var b={isNoPoints:!1};a=$.extend({},b,a);var c,d;a.isNoPoints?(c="Not Enough Download Points!",d="How to get Downlad Points?"):(c="How to get Downlad Points?",d=""),this.lightbox=new LightBox(c,d,580,"gray",3,!0),this.container=$("<div class='cc-download-point-panel-container'></div>"),this.uploadText=$("<p><span><i class='fa fa-chevron-circle-right'></i> Upload PDF:</span> Get 1 download point for each upload.</p>"),this.uploadBtn=$("<a href='"+utils.getUploadPage()+"'><div class='button-pure button-pure-orange'>Upload Now</div></a>"),this.upgradeText=$("<p><span><i class='fa fa-chevron-circle-right'></i> Upgrade to PRO:</span> Upgrade to PRO or above user to download pdf without any limit.</p>"),this.upgradeBtn=$("<a href='/fliphtml5-pricing.php'><div class='button-pure button-pure-green'>See plans and pricing</div></a>"),this.lightbox.getPanel().append(this.container.append(this.uploadText).append(this.uploadBtn).append(this.upgradeText).append(this.upgradeBtn)),this.lightbox.launch()}function EmailPanel(a){var b={bookId:"",onlineUrl:"https://online.fliphtml5.com/kntd/hsim/",url:"https://online.fliphtml5.com/kntd/hsim/",isAddFlag:!1};this.isHTTPS=!!window.location.protocol.match("https:"),this.options=$.extend({},b,a),this.addBookId="",this.customDomain="",this.remainingCount="",this.lightbox=new FixedLightBox("Send this flipbook to your friends","","2"),this.$panel=this.createEmailPanel(),this.lightbox.getPanel().append(this.$panel),this.lightbox.launch()}function EmbedPanel(a){this.isHTTPS=!0;var b={url:a.url,url_HTTPS:a.url,bUrl:"",width:700,height:400,startPage:1,iframeAttr:' seamless="seamless" scrolling="no" frameborder="0" allowtransparency="true" allowfullscreen="true" ',title:a.title,APIScriptCode:"//static.fliphtml5.com/web/js/plugin/LightBox/js/fliphtml5-light-box-api-min.js"};this.options=$.extend({},b,a),this.panel=$("<div class='cc-embed-panel'></div>"),this.embedContext=$("<div class='cc-embed-iframe-context'></div>"),this.iframeContainer=$("<div class='cc-embed-iframe-container cc-init-background'></div>"),this.iframe=$("<iframe class='cc-embed-iframe cc-transparent'"+this.options.iframeAttr+"></iframe>"),this.lightboxContainer=$("<div class='cc-embed-light-box-container'></div>"),this.lightboxImgWrapper=$("<div class='cc-embed-light-box-img-wrapper'></div>"),this.lightboxImg=$("<img data-rel='fh5-light-box-demo' src='"+(this.isHTTPS?this.options.url_HTTPS:this.options.url)+"files/shot.jpg'/>"),this.lightboxBarWrapper=$("<div class='cc-embed-light-box-bar-wrapper cc-hide'></div>"),this.lightboxBar=$("<img class='' src='/images/home-slider-book-bar.png'>"),this.lightboxTip=$("<div class='cc-embed-light-box-tip'>Click the book thumbnail below to open this book in a LightBox<i class='icon icon-hand-down'></i></div>"),this.wordpressContainer=$("<div class='cc-embed-wordpress-container'></div>"),this.wordpressWrap=$("<div class='cc-embed-wordpress-wrap'></div>"),this.wordpressInstalledIcon=$("<img class='cc-embed-wordpress-icon' src='/images/wordpress.png'><br>"),this.wordpressInstalledBtn=$("<a class='cc-embed-wordpress-installed button-pure button-pure-green' href='/download/wordpress_plugin/fliphtml5_shortcode.zip'>Download plugin</a><br>"),this.wordpressHelpBtn=$("<a class='cc-embed-wordpress-help' href='/help/how-to-embed-the-flipbook-in-a-wordpress-site.php' target='_blank'>How to use it</a>"),this.embedLink=$("<span class='embed-link'>Old Embed Window</span>"),utils.isMobile()||this.panel.append(this.embedLink),this.bindNewEmbedPanel(this.embedLink);var c=new TabBox({tabArr:[{title:"IFrame Embed"},{title:"Lightbox Embed"},{title:"Wordpress Embed"}],container:this.embedContext});c.getSection(0).append(this.iframeContainer.append(this.iframe)),c.getSection(1).append(this.lightboxContainer.append(this.lightboxBarWrapper.append(this.lightboxBar)).append(this.lightboxImgWrapper.append(this.lightboxImg).append(this.lightboxTip))).append(this.optionContext),c.getSection(2).append(this.wordpressContainer.append(this.wordpressWrap.append(this.wordpressInstalledIcon).append(this.wordpressInstalledBtn).append(this.wordpressHelpBtn)));var d=$("<div class='cc-embed-option-context'></div"),e=$("<div class='tb-section tb-section-active'></div>"),f=$("<div class='tb-section'></div>"),g=$("<div class='tb-section'></div>");c.bindTabClickFn([e,f,g]),this.iframePageSelect=$("<select class='cc-select cc-select-auto'></select>");for(var h=1;h<=a.pages;h++)this.iframePageSelect.append($("<option value='"+h+"'>"+h+"</option>"));this.iframeStepContainer=$("<div></div>"),this.iframeStep1=$("<div class='cc-input-group-l cc-float-fix'></div>"),this.iframeStepTitle1=$("<p class='cc-embed-step'>1. Copy the Embed Code below and paste it into your HTML file.</p>"),this.iframeStep1CodeContainer=$("<div></div>"),this.iframeStepHttpButton=$("<div class='button-pure'>HTTP</div>"),this.iframeStepHttpsButton=$("<div class='button-pure'>HTTPS</div>"),this.iframeStepCode1=$("<textarea class='cc-embed-code-textarea cc-textarea border-none'></textarea>"),this.iframeStepCode1_HTTPS=$("<textarea class='cc-embed-code-textarea cc-textarea border-none'></textarea>");var i=new TabBox({container:this.iframeStep1CodeContainer,tabArr:[{title:"HTTPS"}]});i.getSection(0).append(this.iframeStepCode1_HTTPS),e.append($("<div class='cc-input-group-l'></div>").append("<label class='cc-embed-label'>Start on page:</label>").append(this.iframePageSelect)).append("<div class='cc-embed-title'>Steps:</div>").append(this.iframeStepContainer.append(this.iframeStep1.append(this.iframeStepTitle1).append(this.iframeStep1CodeContainer))),this.lightboxPageSelect=$("<select class='cc-select cc-select-auto'></select>");for(var h=1;h<=a.pages;h++)this.lightboxPageSelect.append($("<option value='"+h+"'>"+h+"</option>"));this.optionsTitleInput=$("<input class='cc-input-text' value='"+a.title+"'></input>"),this.lightboxStepContainer=$("<div></div>"),this.lightboxStep1=$("<div class='cc-input-group-l cc-float-fix'></div>"),this.lightboxStepTitle1=$("<p class='cc-embed-step'>1. Load the LightBox Api between the head tag in your HTML file.</p>"),this.lightboxStepCode1=$('<textarea class="cc-embed-code-textarea cc-textarea cc-embed-code-textarea-single"><script src="'+this.options.APIScriptCode+'"></script></textarea>'),this.lightboxStep2=$("<div class='cc-input-group-l cc-float-fix'></div>"),this.lightboxStep2CodeContainer=$("<div></div>"),this.lightboxStepTitle2=$("<p class='cc-embed-step'>2. Add the following attritubes to the element which your want to trigger the LightBox when clicked.</p>"),this.lightboxStepCode2=$("<textarea class='cc-embed-code-textarea cc-textarea border-none'>class='cc-light-box-demo'</textarea>"),this.lightboxStepCode2_HTTPS=$("<textarea class='cc-embed-code-textarea cc-textarea border-none'>class='cc-light-box-demo'</textarea>");var j=new TabBox({container:this.lightboxStep2CodeContainer,tabArr:[{title:"HTTPS"}]});j.getSection(0).append(this.lightboxStepCode2_HTTPS),this.demo=$("<div class='cc-embed-title'>Demo:</div>"),this.demoContainer=$("<div></div>"),this.demoGroup=$("<div class='cc-input-group-l cc-float-fix'></div>"),this.demoTitle=$("<p class='cc-embed-step'>The following is a demo of your HTML file.</p>"),this.demoCodeContainer=$("<div></div>"),this.demoCode=$("<textarea class='cc-embed-code-textarea cc-textarea cc-embed-code-textarea-demo border-none'></textarea>"),this.demoCode_HTTPS=$("<textarea class='cc-embed-code-textarea cc-textarea cc-embed-code-textarea-demo border-none'></textarea>");var k=new TabBox({container:this.demoCodeContainer,tabArr:[{title:"HTTPS"}]});k.getSection(0).append(this.demoCode_HTTPS),f.append($("<div class='cc-input-group-l'></div>").append("<label class='cc-embed-label'>Start on page:</label>").append(this.lightboxPageSelect)).append($("<div class='cc-input-group-l'></div>").append("<label class='cc-embed-label'>Title:</label>").append(this.optionsTitleInput)).append("<div class='cc-embed-title'>Steps:</div>").append(this.lightboxStepContainer.append(this.lightboxStep1.append(this.lightboxStepTitle1).append(this.lightboxStepCode1)).append(this.lightboxStep2.append(this.lightboxStepTitle2).append(this.lightboxStep2CodeContainer))).append(this.demo).append(this.demoContainer.append(this.demoGroup.append(this.demoTitle).append(this.demoCodeContainer))),this.wordpressStepContainer=$("<div></div>"),this.wordpressStep1=$("<div class='cc-input-group-l cc-float-fix'></div>"),this.wordpressStepTitle1=$("<p class='cc-embed-step'>1. Download and install the plugin on your wordpress website.</p>"),this.wordpressStepTitle2=$("<p class='cc-embed-step'>2. Copy the embed code below and paste it into your wordpress post page.</p>"),this.wordpressStep1CodeContainer=$("<div></div>"),this.wordpressStepCode1=$("<textarea class='cc-embed-code-textarea cc-textarea border-none'></textarea>");var l=new TabBox({container:this.wordpressStep1CodeContainer,tabArr:[{title:"Embed Code"}]});l.getSection(0).append(this.wordpressStepCode1),g.append("<div class='cc-embed-title'>Steps:</div>").append(this.wordpressStepContainer.append(this.wordpressStep1.append(this.wordpressStepTitle1).append(this.wordpressStepTitle2).append(this.wordpressStep1CodeContainer))),this.stylingOptions=$("<div class='cc-embed-title'>Options:</div>"),this.size=$("<div class='cc-input-group-l cc-embed-size-group'></div>"),this.sizeLabel=$("<label class='cc-embed-label'>Size:</label>"),this.smallLabel=$("<label class='cc-embed-square cc-embed-small' for='small'></label>"),this.smallRadio=$("<input class='cc-embed-radio' type='radio' name='size' id='small'></input>"),this.middleLabel=$("<label class='cc-embed-square cc-embed-middle' for='middle'></label>"),this.middleRadio=$("<input class='cc-embed-radio' type='radio' name='size' id='middle' checked></input>"),this.largeLabel=$("<label class='cc-embed-square cc-embed-large' for='large'></label>"),this.largeRadio=$("<input class='cc-embed-radio' type='radio' name='size' id='large'></input>"),this.customLabel=$("<label class='cc-embed-custom' for='custom'></label>"),this.customWidthInput=$("<input type='number' class='cc-input-text cc-embed-number-input'> X </input>"),this.customHeightInput=$("<input type='number' class='cc-input-text cc-embed-number-input'></input>"),this.customPx=$("<span class='cc-embed-custom-px'> px</span>"),this.customHelp=$("<span class='cc-embed-custom-help'><span class='cc-star'>*</span> Press \"Enter\" Button on the keyboard to apply your changes.</span>"),this.customRadio=$("<input class='cc-embed-radio' type='radio' name='size' id='custom'></input>"),this.lightbox=new FixedLightBox("Embed this book into your website","",2,{hasBtns:!0,isEasyClose:!0,hasPadding:!0}),this.lightbox.getSaveBtn().hide(),this.lightbox.getPanel().append(this.panel.append(this.embedContext).append(this.stylingOptions).append(this.size.append(this.sizeLabel).append(this.smallLabel.append(this.smallRadio)).append(this.middleLabel.append(this.middleRadio)).append(this.largeLabel.append(this.largeRadio)).append(this.customLabel.append(this.customWidthInput).append(this.customHeightInput).append(this.customRadio)).append(this.customPx)).append(d.append(e).append(f).append(g)));var m=this;setTimeout(function(){m.isHTTPS?m.iframe.attr("src",m.options.url_HTTPS):m.iframe.attr("src",m.options.url),setTimeout(function(){m.iframe.removeClass("cc-transparent")},50)},200),m.resizeIframe(m.options.width,m.options.height),$([this.iframeStepCode1,this.lightboxStepCode1,this.lightboxStepCode2,this.demoCode,this.iframeStepCode1_HTTPS,this.lightboxStepCode2_HTTPS,this.demoCode_HTTPS,this.wordpressStepCode1]).each(function(){var a=$(this);a.on("click",utils.selectCode.bind(utils,a))}),$([this.smallLabel,this.smallRadio]).each(function(){$(this).on("click",m.resizeIframe.bind(m,400,250))}),$([this.middleLabel,this.middleRadio]).each(function(){$(this).on("click",m.resizeIframe.bind(m,700,400))}),$([this.largeLabel,this.largeRadio]).each(function(){$(this).on("click",m.resizeIframe.bind(m,900,500))}),$([this.customWidthInput,this.customHeightInput]).each(function(){var a=$(this);a.on("focus",function(){m.customRadio[0].checked=!0}),a.on("change",function(){m.customRadio[0].checked=!0,m.resizeIframe(m.customWidthInput.val(),m.customHeightInput.val())}),a.on("blur",function(){m.resizeIframe(m.customWidthInput.val(),m.customHeightInput.val())}),a.on("keypress",function(a){13===a.which&&m.resizeIframe(m.customWidthInput.val(),m.customHeightInput.val())})}),this.optionsTitleInput.on("blur",function(){m.options.title=$(this).val().trim(),m.setCode()}),this.iframePageSelect.on("change",this.changeStartPage.bind(this,this.iframePageSelect)),this.lightboxPageSelect.on("change",this.changeStartPage.bind(this,this.lightboxPageSelect)),setTimeout(function(){utils.loadFile(m.options.APIScriptCode)
},400),this.lightbox.launch()}function FixedLightBox(a,b,c,d){this.isMobile=utils.isMobile();var e={hasBtns:!1,isEasyClose:!1,isLoading:!1,isHasBg:!1,hasPadding:!1},f=this,g=$("<div class='hf-lightbox'></div>"),h=$("<div class='hf-lightbox-bg'></div>"),i=$("<div class='hf-lightbox-wrapper'></div>"),j=$("<div class='hf-lightbox-dialog sh5-table'></div>"),k=$("<div class='sh5-table-centered'></div>"),l=$("<div class='hf-lightbox-content modal-dialog'></div>").addClass("1"==c?"modal-lg":"2"==c?"modal-mlg modal-lg":"3"==c?"modal-xsedit":""),m=$("<div class='hf-lightbox-close'></div>"),n=$("<div class='hf-lightbox-header'></div>"),o=$("<div class='hf-lightbox-title'>"+a+"</div>").addClass(a?"":"cc-hide"),p=$("<div class='hf-lightbox-desc'>"+b+"</div>").addClass(b?"":"cc-hide"),q=$("<div class='hf-lightbox-panel'></div>"),r=$("<div class='hf-lightbox-btns'></div>"),s=$("<div class='button-pure'>Cancel</div>"),t=$("<div class='button-pure button-pure-green'>Save</div>"),u=$("<div class='hf-lightbox-loading sh5-table'><div class='sh5-table-centered'><i class='fa fa-spinner fa-spin'></i></div></div>"),v=$("<div class='hf-light-box-warning cc-hide'></div>"),w=$("<div></div>"),x=$("<i class='hf-light-box-warning-close-btn fa fa-times-circle'></i>"),f=this;x.on("click",function(){f.hideError()}),this.opt=$.extend({},e,d),h.addClass(this.opt.isHasBg?"disabled":""),q.addClass(this.opt.hasPadding?"padding-15":""),g.append(h).append(i.append(j.append(k.append(l.append(n.append(o).append(p)).append(q.append(v.append(w).append(x))).append(m))))),this.opt.hasBtns&&l.append(r.append(s).append(t)),this.$lightBox=g,this.$bg=h,this.$wrapper=i,this.$panel=q,this.$title=o,this.$btns=r,this.$cancelBtn=s,this.$saveBtn=t,this.$inDialog=k,this.$lightContent=l,this.$loading=u,this.$lightClose=m,this.$lightHeader=n,this.$warningBox=v,this.$warningBoxText=w,s.on("click",this.cancel.bind(this)),m.on("click",this.cancel.bind(this))}function IosAppPanel(){this.lightbox=new FixedLightBox("FlipHTML5 IOS APP","","1"),this.container=$("<div class='container-fluid'></div>"),this.row=$("<div class='row ios-row'></div>"),this.leftContainer=$("<div class='ios-left-container col-md-4'></div>"),this.codeContext=$("<p class='ios-code-context'>Scan the qrcode to <br>download FlipHTML5</p>"),this.codeImg=$("<div class='ios-code-img'></div>"),this.downloadImg=$("<a href='https://itunes.apple.com/app/id1071744833' target='_blank'><img class='ios-downolad-img' src='/images/home/ios/download.png'></a>"),this.rightContainer=$("<div class='ios-right-container col-md-8'></div>"),this.rightTitle=$("<h3 class='ios-right-title'>FlipHTML5 APP</h3>"),this.bookDesc=$("<ul class='ios-book-desc'></ul>"),this.subscribeBokk=$("<li><span class='ios-subscribe-book'></span>Subscribe books</li>"),this.readBook=$("<li><span class='ios-read-book'></span>Read books</li>"),this.manageBook=$("<li><span class='ios-manage-book'></span>Managebooks</li>"),this.appImg=$("<img class='ios-app-img' src='/images/home/ios/phone.png'>"),this.lightbox.getPanel().append(this.container.append(this.row.append(this.leftContainer.append(this.codeContext).append(this.codeImg).append(this.downloadImg)).append(this.rightContainer.append(this.rightTitle).append(this.bookDesc.append(this.subscribeBokk).append(this.readBook).append(this.manageBook)).append(this.appImg)))),this.lightbox.launch(),this.codeImg.empty().qrcode({width:200,height:200,text:"https://itunes.apple.com/app/id1071744833"})}function LightBox(a,b,c,d,e,f,g){switch(this.background=$("<div class='cc-light-box-background'></div>"),this.box=$("<div class='cc-light-box'></div>").width(c),this.boxBackground=$("<div class='cc-light-box-bg'></div>"),this.headContainer=$("<div class='cc-light-box-head-container'>"),this.title=$("<div class='cc-light-box-title cc-hide'>"+a+"</div>"),this.desc=$("<div class='cc-light-box-desc cc-hide'>"+b+"</div>"),this.arrow=$("<i class='fa fa-caret-down'></i>"),this.cancelButton=$("<div class='cc-light-box-cancel-button' title='Close'></div>"),this.cancelIcon=$("<i class='icon icon-remove'></i>"),this.cancelIcon2=$("<div class='cc-light-box-cancel-icon'></div>"),this.cancelIcon3=$("<div class='cc-light-box-cancel-icon'></div>"),this.panel=$("<div></div>"),this.buttonGroup=$("<div></div>"),this.saveButton=$("<div class='button-pure button-pure-green'>Save</div>"),this.closeButton=$("<div class='button-pure'>Close</div>"),this.warningBox=$("<div class='cc-light-box-warning cc-hide'></div>"),this.helpBox=$("<div class='cc-light-box-help cc-hide'></div>"),d){case"black":this.box.addClass("cc-light-box-black"),this.title.addClass("cc-light-box-title-black"),this.desc.addClass("cc-light-box-desc-black"),this.buttonGroup.addClass("cc-light-box-buttons"),this.panel.addClass("cc-light-box-content-panel-black");break;case"white":this.box.addClass("cc-light-box-white"),this.title.addClass("cc-light-box-title-white"),this.cancelButton.addClass("cc-light-box-cancel-button-small"),this.buttonGroup.addClass("cc-light-box-buttons"),this.panel.addClass("cc-light-box-content-panel");break;case"gray":this.box.addClass("cc-light-box-gray"),this.headContainer.addClass("cc-light-box-head-gray"),this.headContainer.append(this.arrow),this.title.addClass("cc-light-box-title-gray"),this.desc.addClass("cc-light-box-desc-gray"),this.cancelButton.addClass("cc-light-box-cancel-button-gray"),this.buttonGroup.addClass("cc-light-box-buttons-gray"),this.panel.addClass("cc-light-box-content-panel-gray");break;case"win10":this.box.addClass("win10");break;case"new":this.box.addClass("new");break;default:this.panel.addClass("cc-light-box-content-panel"),this.buttonGroup.addClass("cc-light-box-buttons")}switch(a&&this.title.removeClass("cc-hide"),b&&this.desc.removeClass("cc-hide"),4==e?this.box.append(this.boxBackground).append(this.cancelButton):this.box.append(this.headContainer.append(this.title).append(this.desc).append(this.warningBox)).append(this.cancelButton),this.cancelButton.append("win10"==d||"new"==d?this.cancelIcon2:this.cancelIcon),this.cancelCallback=null,e){case 2:this.box.append(this.panel).append(this.helpBox).append(this.buttonGroup.append(this.saveButton).append(this.closeButton));break;case 3:this.box.append(this.panel).append(this.helpBox)}this.isAdaptive=g,this.LightBoxWidth=c,this.document=$(document),$(window).on("resize",this.resize.bind(this,0)),this.cancelButton.on("click",this.cancel.bind(this)),this.closeButton.on("click",this.cancel.bind(this)),f&&(this.background.attr("title","Close").css({cursor:"pointer"}),this.background.on("click",this.cancel.bind(this)))}function LogPanel(){this.panel=$("<div class='cc-log-panel'></div>"),this.buttons=$("<div class='cc-log-buttons'></div>"),this.showButton=$("<div class='button button-highlight'><span class='icon icon-arrow-left'></span></div>"),this.hideButton=$("<div class='button button-highlight'><span class='icon icon-arrow-right'></span></div>"),this.clearButton=$("<div class='button button-caution'><span class='icon icon-trash'></span></div>"),this.messages=$("<div class='cc-log-messages'></div>"),this.messagePanel=$("<ul></ul>"),this.panel.append(this.buttons.append(this.showButton).append(this.hideButton).append(this.clearButton)).append(this.messages.append(this.messagePanel)),this.showButton.on("click",this.show.bind(this)),this.hideButton.on("click",this.hide.bind(this)),this.clearButton.on("click",this.clear.bind(this)),this.panel.appendTo($("body"))}function MessageBox(a,b,c,d){var e=this;d="undefined"==typeof d?3e3:d,this.$messageBox=$("<div class='cc-message-box'></div>"),this.$messageBox.addClass(a),this.$messageBox.text(b),this.$messageBox.appendTo($("body")).fadeIn(),setTimeout(function(){e.$messageBox.animate({top:-60,opacity:0},400,function(){e.$messageBox.hide()})},d)}function NoticePanel(a,b,c,d){this.options={title:a?a:"Notice",text:b?b:"Here is the notification content",width:c?c:420,imgSrc:d?d:"../../images/pricing/notice_bell.png"},this.panel=$("<div class='ss-notice-panel'></div>").width(this.options.width),this.headWrapper=$("<div class='ss-notice-panel-head-wrapper'></div>"),this.title=$("<div class='ss-notice-panel-title'></div>").text(this.options.title),this.contentWrapper=$("<div class='ss-notice-panel-content-wrapper'></div>"),this.bell=$("<div class='ss-notice-panel-bell'></div>"),this.bellImg=$("<img class='ss-notice-panel-bell-img' src=''/>"),this.bellImg.attr("src",this.options.imgSrc),this.text=$("<div class='ss-notice-panel-text'></div>").text(this.options.text),this.panel.append(this.headWrapper.append(this.title)).append(this.contentWrapper.append(this.bell.append(this.bellImg)).append(this.text)),this.lightBox=new LightBox(null,null,this.options.width,"new",4,!0,!1),this.lightBox.setCancelCallback(this.removeNeedShowLightBox),this.lightBox.box.append(this.panel),this.lightBox.launch()}function PDFDownloadingPanel(a){this.lightbox=new LightBox("File Downloading","",480,"gray",3,!0),this.leftContainer=$("<div class='cc-pdf-downloading-panel-left-container'></div>"),this.leftPoint=$("<p>My Remaining Download Points: <span class='cc-underline'>"+a.points+"</span></p>"),this.leftHelp1=$("<p>(Each download will cost 1 download point)</p>"),this.leftHelp2=$("<p class='cc-underline'>How to get download points?</p>"),this.rightContainer=$("<div class='cc-pdf-downloading-panel-right-container'></div>"),this.rightHelp=$("<p class='pdf-downloading-panel-text'>Want to publish your own digital publication? <br>Just upload your PDF file and we will convert it into a beautiful flipping book for <span class='pdf-downloading-panel-free'>Free</span> in minutes.</p>"),this.rightPublishBtn=$("<a href='/quick-upload/'><div class='pdf-downloading-panel-publish-btn button-pure button-pure-orange'>Publish Now</div></a>"),this.lightbox.getPanel().append(this.leftContainer.append(this.leftPoint).append(this.leftHelp1).append(this.leftHelp2)).append(this.rightContainer.append(this.rightHelp).append(this.rightPublishBtn)),this.leftPoint.find("span").add(this.leftHelp2).on("click",function(){new DownloadPointPanel}),this.lightbox.launch()}function QrcodePanel(a,b,c){this.lightbox=new LightBox(b,"Scan the QR Code below to "+c,580,"gray",3,!0),this.container=$("<div></div>"),this.url=$("<p class='cc-qrcode-panel-url'>"+a+"</p>"),this.container.qrcode({text:a,width:220,height:220}),this.lightbox.getPanel().append(this.container).append(this.url),this.lightbox.launch()}function SelectDownloadVersionPanel(){this.lightBox=new LightBox("Download FlipHTML5 Desktop Client","",680,"gray",3),this.downloadButtonContaienr=$("<div class='cc-select-version-button-container'></div>"),this.downloadWindowsButton=$("<div class='cc-inline-wrapper'><a href='https://fliphtml5.com/download/flip-html5.zip' onclick=\"ga('send', 'event', 'Download', this.href, document.location.pathname);\" rel='nofollow'><div class='button-pure button-pure-blue'><i class='fa fa-windows'></i> &nbsp;Download</div></a><div class='cc-desktop-version-download-text'>For Windows</div></div>"),this.downloadMacButton=$("<div class='cc-inline-wrapper'><a href='https://fliphtml5.com/download/fliphtml5.zip' onclick=\"ga('send', 'event', 'Download', this.href, document.location.pathname);\" rel='nofollow'><div class='button-pure button-pure-green'><i class='fa fa-apple'></i> &nbsp;Download</div></a><div class='cc-desktop-version-download-text'>For Mac</div></div>"),this.lightBox.getPanel().append(this.downloadButtonContaienr.append(this.downloadWindowsButton).append(this.downloadMacButton)),this.lightBox.getSaveButton().hide(),this.lightBox.launch()}function SelectUploadMethodPanel(){this.panel=$("<div class='cc-light-box-content-panel-gray'></div>"),this.simpleContainer=$("<div class='cc-select-upload-method-simple-container'></div>"),this.simpleGroup=$("<div class='cc-input-group'></div>"),this.simpleUploadImg=$("<img class='cc-select-upload-method-simple-upload-img' src='/images/books/upload.png'></img>"),this.simpleTitle=$("<p class='cc-select-upload-method-title'>Simple</p>"),this.simpleDesc=$("<p class='cc-select-upload-method-desc'>Upload PDF and convert it to online digital book.</p>"),this.uploadButtonContainer=$("<div class='cc-select-upload-method-button-container'></div>"),this.uploadButtonWrapper=$("<div class='cc-inline-wrapper'></div>"),this.uploadButton=$("<a href='"+utils.getUploadPage()+"'><div class='cc-select-upload-method-online-button button-pure button-pure-gray'>Upload Online</div></a>"),this.manageMyFilps=$("<div class='cc-select-upload-method-my-flips'><a class='cc-blue-link-2' href='/center/flips'> or manage my flips</a></div>"),this.advancedLine=$("<div class='cc-select-upload-method-advanced-line'></div>"),this.advancedContainer=$("<div class='cc-select-upload-method-advanced-container'></div>"),this.advancedGroup=$("<div class='cc-input-group'></div>"),this.advancedTitle=$("<p class='cc-select-upload-method-title advanced'>Advanced</p>"),this.advancedDesc=$("<p class='cc-select-upload-method-desc'>Add link, audio, video, animation and more multimedia to your flipbook. <br /> (Require to download <a target='_blank' href='/desktop-version/'>FlipHtml5 Desktop version</a>)</p>"),this.downloadButtonContaienr=$("<div class='cc-select-upload-method-button-container'></div>"),this.downloadWindowsButton=$("<a href='https://fliphtml5.com/download/flip-html5.zip' onclick=\"ga('send', 'event', 'Download', this.href, document.location.pathname);\" rel='nofollow'><div class='button-pure button-pure-blue'><i class='fa fa-windows'></i> &nbsp;Download for Windows</div></a>"),this.downloadMacButton=$("<a href='https://fliphtml5.com/download/fliphtml5.zip' onclick=\"ga('send', 'event', 'Download', this.href, document.location.pathname);\" rel='nofollow'><div class='button-pure button-pure-green'><i class='fa fa-apple'></i> &nbsp;Download for Mac</div></a>"),this.vir=$("<div class='cc-select-upload-method-vir-container'><img src='/images/books/vir.png' /> &nbsp;Safety certification through Virustotal. </div>"),this.panel.append(this.simpleContainer.append(this.simpleGroup.append(this.simpleUploadImg).append(this.simpleTitle).append(this.simpleDesc)).append(this.uploadButtonContainer.append(this.uploadButtonWrapper.append(this.uploadButton)))).append(this.advancedLine).append(this.advancedContainer.append(this.advancedGroup.append(this.advancedTitle).append(this.advancedDesc)).append(this.downloadButtonContaienr.append(this.downloadWindowsButton).append(this.downloadMacButton)).append(this.vir)),this.lightBox=new LightBox("Select a method to create flipbook","",698,"win10"),this.lightBox.box.append(this.panel),this.lightBox.launch()}function SendingEmailPanel(a){var b={url:"",emails:[],taskid:""};this.options=$.extend({},b,a),this.PTI=null,this.len=this.options.emails.length,this.sArr=[],this.lightbox=new FixedLightBox("Sending email in progress...","",""),this.$panel=this.create(),this.$sPanel=this.sendingAll(),this.$panel.append(this.$sPanel),this.lightbox.getPanel().empty().append(this.$panel),this.lightbox.getTopCancelBtn().off("click"),this.lightbox.launch(),this.createScrollBar(this.$tc,this.$t),this.timeSp=1e3,this.getSendingProgress()}function SharePanel(a){var b={isSelf:!0};a=$.extend({},b,a),this.isHTTPS=!!window.location.protocol.match("https:"),this.options=a,this.panel=$("<form class='cc-share-panel form-horizontal cc-share-transition'></form>"),this.QRURLGroup=$("<div class='form-group'></div>").append($("<span class='col-sm-2 control-label'>QR Code</span>")),this.codeGroup=$("<div class='col-sm-10'></div>"),this.codeContext=$("<div class='cc-share-qrurl-code cc-float-fix'></div>"),this.qrCodeContainer=$("<div class='cc-share-code-context'></div>"),this.codeUrlContext=$("<div  class='cc-share-code-right'></div>"),this.codeUrlInner=$("<div class='cc-share-code-inner'></div>"),this.codeUrlTitle=$("<div class='cc-share-code-url-title'><span>QR Code Image</span></div>"),this.codeUrl=$("<div class='cc-share-code-url-context'></div>"),this.codeUrlTextarea=$("<textarea class='form-control' rows='4'>"+this.options.bookUrl+"files/extfile/QRURL.png</textarea>"),this.socialGroup=$("<div class='form-group'></div>"),this.shareOn=$("<span class='col-sm-2 control-label'>Share On</span>"),this.shareGroup=$("<ul class='cc-share-group col-sm-10'></ul>"),this.facebook=$("<li><a title='Facebook' target='_blank'><span class='button-pure button-pure-blue'><i class='fa fa-facebook'></i> Facebook</span></a></li>"),this.twitter=$("<li><a title='Twitter' target='_blank'><span class='button-pure button-pure-teal' ><i class='fa fa-twitter'></i> Twitter</span></a></li>"),this.google=$("<li><a title='Google +' target='_blank'><span class='button-pure button-pure-red'><i class='fa fa-google-plus'></i> Google +</a></span></li>"),this.more=$("<li><a title='More' target='_blank'><span class='cc-share-more button-pure button-pure-orange'><i class='icon icon-plus'></i> More</a></span></li>");var c=$("<div class='form-group cc-share-panel-email-group cc-share-transition cc-hide'></div>");this.emailTo=$("<span class='col-sm-2 control-label'>Share To</span>");var d=$("<div class='cc-share-email-group col-sm-10 cc-share-transition'></div>"),e=$("<div class='cc-share-email-form'></div>"),f=$("<div><input class='form-control cc-share-toEmail-item' type='text' placeholder='To Email...'/></div>"),g=$("<div class='cc-share-hide-panel cc-float-fix cc-share-transition'></div>"),h=$("<div><input class='form-control cc-share-fromEmail-item' type='text' placeholder='From Email...' value='"+fh5.uEmail+"'/></div>"),i=$("<div><input class='form-control cc-share-name-item' type='text' placeholder='From Name...' value='"+fh5.uName+"'/></div>"),j=$("<div><textarea class='form-control' rows='4' placeholder='Message...'></textarea></div>"),k=$("<div class='cc-error cc-hide'></div>"),l=$("<div class='cc-share-email-button button-pure'>Send</div>"),m=$("<div class='cc-share-success-message'><span>Email sent successfully!</span></div>"),n=this;!function(a,b,c){var d,e=a.getElementsByTagName(b)[0];a.getElementById(c)||(d=a.createElement(b),d.id=c,d.src="//connect.facebook.net/en_US/sdk.js",e.parentNode.insertBefore(d,e))}(document,"script","facebook-jssdk"),window.fbAsyncInit=function(){FB.init({appId:"759223277462081",cookie:!0,xfbml:!1,version:"v2.1"})},this.facebook.on("click",function(){FB&&FB.ui({method:"share",href:n.options.bookUrl},function(){})}),this.options.isRecord&&this.facebook.add(this.google).add(this.twitter).on("click",function(){sta.bookShare(n.options.bookid)}),f.children("input").focus(function(){g.slideDown(),k.hide()}),f.children("input").add(h.children("input")).add(i.children("input")).on("input propertychange change",function(){$(this).removeClass("cc-validate-fail")}),l.on("click",function(){var a=f.children("input"),b=h.children("input"),d=a.val().trim(),l=b.val().trim(),o=i.children("input").val().trim(),p=j.children("textarea").val().trim();if(""==d)return a.addClass("cc-validate-fail"),a[0].focus(),void k.html("<i class='icon icon-exclamation-sign'></i> Please enter your friend's email.").show();var q=/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/;if(!q.test(d))return a.addClass("cc-validate-fail"),a[0].focus(),void k.html("<i class='icon icon-exclamation-sign'></i> Please enter your friend's the correct email.").show();if(""==l)return b.addClass("cc-validate-fail"),b[0].focus(),void k.html("<i class='icon icon-exclamation-sign'></i> Please enter your email.").show();var q=/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/;return q.test(l)?""==o?(i.children("input").addClass("cc-validate-fail"),i.children("input")[0].focus(),void k.html("<i class='icon icon-exclamation-sign'></i> Please enter your name.").show()):void(""!=d&&""!=l&&""!=o&&$.ajax({url:"/Email/sharebook.php",type:"post",dataType:"json",data:{fromFullName:o,fromEmail:l,fromMessage:p,toEmail:d,bookid:n.options.bookid,Code:hex_md5(encodeURIComponent(o+l+p+d+n.options.bookid+"fliphtml5"))},beforeSend:function(){utils.addSpin(c)},success:function(a){utils.removeSpin(c),"1"==a.status?(g.slideUp(),h.html("<input class='form-control cc-share-fromEmail-item' type='text' placeholder='From Email' value='"+fh5.uEmail+"'/>"),i.html("<input class='form-control cc-share-name-item' type='text' placeholder='From Name' value='"+fh5.uName+"'/>"),f.children("input").val(""),j.children("textarea").val(""),m.slideDown(),e.slideUp(),setTimeout(function(){g.hide(),m.slideUp(),e.slideDown()},1e3),n.options.isRecord&&sta.bookShare(n.options.bookid)):"0"==a.status?k.html(fh5.pageData.tips.ConnectionError).show():"2"==a.status?k.html(fh5.pageData.tips.ConnectionError).show():"3"==a.status?k.html(fh5.pageData.tips.ConnectionError).show():("-1"==a.status,k.html(fh5.pageData.tips.ConnectionError).show())},error:function(){k.html(fh5.pageData.tips.ConnectionError).show(),utils.removeSpin(c)}})):(b.addClass("cc-validate-fail"),b[0].focus(),void k.html("<i class='icon icon-exclamation-sign'></i> Please enter your the correct email.").show())}),this.linkGroup=$("<div class='form-group'></div>"),this.linkLabel=$("<span class='col-sm-2 control-label'>Book Link</span>"),this.linkInputWarpper=$("<div class='col-sm-10'></div>"),this.linkInput=$("<input type='text' class='form-control'></input>"),this.linkSwitchBtn=$("<div class='button-pure cc-share-link-switch-btn' title='Show Original'><i class='fa fa-exchange'></i></div>"),this.panel.append(this.QRURLGroup.append(this.codeGroup.append(this.codeContext.append(this.qrCodeContainer)))).append(this.linkGroup.append(this.linkLabel).append(this.linkInputWarpper.append(this.linkInput))).append(this.socialGroup.append(this.shareOn).append(this.shareGroup.append(this.facebook).append(this.twitter).append(this.more))).append(c.append(this.emailTo).append(d.append(e.append(f).append(g.append(h).append(i).append(j).append(k).append(l))).append(m)));var o;this.options.isSelf&&""!=fh5.customDomain?(this.domainLinkShowing=!0,o=(fh5.isDomainHttps?"https:":"http:")+"//"+fh5.customDomain+"/books/"+this.options.bLink):(this.domainLinkShowing=!1,o=this.options.url),this.setLink(o),this.linkInput.on("click",utils.selectCode.bind(utils,this.linkInput)),this.codeUrlTextarea.on("click",utils.selectCode.bind(utils,this.codeUrlTextarea)),this.lightBox=new FixedLightBox("Share This Book","",0,{isEasyClose:!0,hasPadding:!0}),this.lightBox.getPanel().append(this.panel),this.lightBox.launch()}function SignInPanel(a){this.options=a||{},this.isFlipH5=document.domain.includes("fliphtml5.com"),this.lightBoxWidth=900,this.isFlipH5||(this.lightBoxWidth=510),this.logInPanel=$("<div class='cc-log-in-panel sign-in-panel'></div>"),this.logInHead=$("<div class='cc-log-in-head'></div>"),this.logInTitle=$("<div class='cc-log-in-head-title'>Sign in</div>"),this.logInNav=$("<div class='cc-log-in-head-nav'></div>"),this.logInNavLeft=$("<div class='cc-log-in-nav-left'>New user? </div>"),this.logInNavRight=$("<a href='javascript:void(0)' class='cc-log-in-nav-right'>Create a free account</a>"),this.logInForm=$("<div class='cc-log-in-form-panel sign-up-panel'></div>"),this.logInEmail=$("<div class='cc-input-group'></div>"),this.logInEmailInput=$("<input class='cc-log-in-input-item' type='email' value='' placeholder='Email' maxlength='255'/>"),this.logInEmailHelp=$("<div class='cc-hide cc-error-font'></div>"),this.logInPassword=$("<div class='cc-input-group'></div>"),this.logInPasswordInput=$("<input class='cc-log-in-input-item pwd' type='password' value='' placeholder='Password (6+ characters)'  maxlength='255'/>"),this.logInPwdEyeBox=$("<div class='cc-eye-box'></div>"),this.logInPwdEyeIcon=$("<div class='cc-eye-icon'></div>"),this.logInPasswordHelp=$("<div class='cc-hide cc-error-font'></div>"),this.logInErrorLine="<div class='cc-error-line'></div>";var b="";b=this.isFlipH5||"undefined"==typeof fh5.sessionId?"<a href='/pass/forget-password' class='cc-text-right' target='_blank'>Forgot Password?</a>":"<a href='https://fliphtml5.com/pass/forget-password' target='_blank' class='cc-log-in-forget-password cc-text-right'>Forget your password?</a>",this.logInForgetPassword=$("<div class='cc-log-in-forgot cc-text-blue'>"+b+"</div>"),this.logInButtonContainer=$("<div class='cc-log-in-button-container2'></div>"),this.logInButton=$("<div class='cc-sign-up-button'>Sign in</div>"),this.logInPanelHelp=$("<div id='logInPanelHelp' class='cc-error-text cc-hide'></div>"),this.logInDividing=$("<div class='cc-log-in-diving'></div>"),this.logInDividingLine="<span class='cc-log-in-diving-line'></span>",this.logInDividingText=$("<span class='cc-log-in-diving-text'>Or</span>"),this.logInThirdParty=$("<div class='cc-log-in-third-party'></div>"),this.logInGoogle=$("<div id='login-google' class='cc-log-in-google'><i class='icon-google'></i><span class='cc-log-in-google-text'>Continue with Google</span></div>");var c="<div id='login-facebook' class='cc-log-in-facebook'><i class='icon-facebook'></i><span class='cc-log-in-google-text'>Continue with Facebook</span></div>";this.logInFacebook=$(c),"1"===utils.getIsMobile()?this.logInPanel.hasClass("m")||this.logInPanel.addClass("m"):this.logInPanel.hasClass("m")&&this.logInPanel.removeClass("m"),this.lightBox=new LightBox(null,null,480,"new",4,!1,!0),this.lightBox.box.append(this.logInPanel.append(this.logInHead.append(this.logInTitle).append(this.logInNav.append(this.logInNavLeft).append(this.logInNavRight))).append(this.logInForm.append(this.logInEmail.append(this.logInEmailInput).append(this.logInErrorLine).append(this.logInEmailHelp)).append(this.logInPassword.append(this.logInPasswordInput).append(this.logInErrorLine).append(this.logInPwdEyeBox.append(this.logInPwdEyeIcon)).append(this.logInPasswordHelp)).append(this.logInForgetPassword).append(this.logInButtonContainer.append(this.logInButton).append(this.logInPanelHelp)).append(this.logInDividing.append($(this.logInDividingLine)).append(this.logInDividingText).append($(this.logInDividingLine))).append(this.logInThirdParty.append(this.logInGoogle).append(this.logInFacebook))));var d=this;this.isFlipH5||this.logInForm.addClass("isFlipH5"),this.lightBox.launch(),this.loggingIn=!1;var d=this;this.logInNavRight.on("click",this.toSignUp.bind(this)),this.logInEmailInput.on("input",function(){d.logInEmailHelp.hasClass("cc-hide")||(d.logInEmail.removeClass("error"),d.logInEmailHelp.addClass("cc-hide"),d.logInEmailInput.removeClass("cc-validate-fail2"))}),this.logInPasswordInput.on("input",function(){d.logInPasswordHelp.hasClass("cc-hide")||(d.logInPassword.removeClass("error"),d.logInPasswordHelp.addClass("cc-hide"),d.logInPasswordInput.removeClass("cc-validate-fail2"))}),this.logInEmailInput.on("blur",function(){return""!=$(this).val().trim()?utils.validate2("email",d.logInEmailInput,d.logInEmailHelp,!1,null,"!",null,"cc-error-font")?d.logInEmailHelp.hasClass("cc-hide")?void 0:(d.logInEmail.removeClass("error"),d.logInEmailInput.removeClass("cc-validate-fail2"),void d.logInEmailHelp.addClass("cc-hide")):(d.logInEmail.addClass("error"),d.logInEmailInput.addClass("cc-validate-fail2"),void d.logInEmailHelp.removeClass("cc-hide")):void 0}),this.logInPwdEyeBox.on("click",function(){d.logInPwdEyeBox.toggleClass("open"),"password"===d.logInPasswordInput.attr("type")?d.logInPasswordInput.attr("type","text"):d.logInPasswordInput.attr("type","password")}),this.logInForm.find("input").on("keypress",function(a){13==a.which&&d.logIn()}),this.logInButton.on("click",this.logIn.bind(this)),this.cookiePanel=new CookiePanel("fliphtml5LoginInEmail",this.logInEmailInput,this.logInEmailInput),""!==this.logInEmailInput.val().trim()&&this.logInPasswordInput.focus(),utils.loadFile("https://apis.google.com/js/api:client.js",function(){gapi.load("auth2",function(){auth2=gapi.auth2.init({client_id:"134491469080-rnfrraakuo4fii80cd8ht798ceo0956j.apps.googleusercontent.com",cookiepolicy:"single_host_origin",scope:"https://www.googleapis.com/auth/plus.login https://www.googleapis.com/auth/userinfo.email"});var a=document.getElementById("login-google");auth2.attachClickHandler(a,{},function(a){utils.googleLogin({helpId:"logInPanelHelp",isFastUpload:d.options.isFastUpload,lightBox:d.lightBox,callback:d.options.callback,googleUser:a,showSuccessTips:d.options.showSuccessTips})},function(){})})}),$("#login-facebook").on("click",function(){"undefined"==typeof window.open?alert("Please disable your popup blocker and try again."):utils.loginByFB({helpId:"logInPanelHelp",isFastUpload:d.options.isFastUpload,lightBox:d.lightBox,callback:d.options.callback,showSuccessTips:d.options.showSuccessTips})})}function SignInPanel3(a){this.options=a||{},this.isFlipH5="fliphtml5.com"==document.domain||"online.fliphtml5.com"==document.domain||"test.fliphtml5.com"==document.domain||"dev.fliphtml5.com"==document.domain,this.lightBoxWidth=900,this.isFlipH5||(this.lightBoxWidth=510),this.logInPanel=$("<div class='cc-log-in-panel sign-in-panel'></div>"),this.logInHead=$("<div class='cc-log-in-head'></div>"),this.logInTitle=$("<div class='cc-log-in-head-title'>Sign in</div>"),this.logInNav=$("<div class='cc-log-in-head-nav'></div>"),this.logInNavLeft=$("<div class='cc-log-in-nav-left'>New user? </div>"),this.logInNavRight=$("<a href='javascript:void(0)' class='cc-log-in-nav-right'>Create a free account</a>"),this.logInForm=$("<div class='cc-log-in-form-panel sign-up-panel'></div>"),this.logInEmail=$("<div class='cc-input-group'></div>"),this.logInEmailInput=$("<input class='cc-log-in-input-item' type='email' value='' placeholder='Email' maxlength='255'/>"),this.logInEmailHelp=$("<div class='cc-hide cc-error-font'></div>"),this.logInPassword=$("<div class='cc-input-group'></div>"),this.logInPasswordInput=$("<input class='cc-log-in-input-item pwd' type='password' value='' placeholder='Password (6+ characters)'  maxlength='255'/>"),this.logInPwdEyeBox=$("<div class='cc-eye-box'></div>"),this.logInPwdEyeIcon=$("<div class='cc-eye-icon'></div>"),this.logInPasswordHelp=$("<div class='cc-hide cc-error-font'></div>"),this.logInErrorLine="<div class='cc-error-line'></div>";var b="";b=this.isFlipH5||"undefined"==typeof fh5.sessionId?"<a href='/pass/forget-password' class='cc-text-right' target='_blank'>Forgot Password?</a>":"<a href='https://fliphtml5.com/pass/forget-password' target='_blank' class='cc-log-in-forget-password cc-text-right'>Forget your password?</a>",this.logInForgetPassword=$("<div class='cc-log-in-forgot cc-text-blue'>"+b+"</div>"),this.logInButtonContainer=$("<div class='cc-log-in-button-container2'></div>"),this.logInButton=$("<div class='cc-sign-up-button'>Sign in</div>"),this.logInPanelHelp=$("<div id='logInPanelHelp' class='cc-error-text cc-hide'></div>"),this.logInDividing=$("<div class='cc-log-in-diving'></div>"),this.logInDividingLine="<span class='cc-log-in-diving-line'></span>",this.logInDividingText=$("<span class='cc-log-in-diving-text'>Or</span>"),this.logInThirdParty=$("<div class='cc-log-in-third-party'></div>"),this.logInGoogle=$("<div id='login-google' class='cc-log-in-google'><i class='icon-google'></i><span class='cc-log-in-google-text'>Continue with Google</span></div>");var c="<div id='login-facebook' class='cc-log-in-facebook'><i class='icon-facebook'></i><span class='cc-log-in-google-text'>Continue with Facebook</span></div>";this.logInFacebook=$(c),"1"===utils.getIsMobile()?this.logInPanel.hasClass("m")||this.logInPanel.addClass("m"):this.logInPanel.hasClass("m")&&this.logInPanel.removeClass("m"),this.lightBox=new LightBox(null,null,480,"new",4,!1,!0),this.lightBox.box.append(this.logInPanel.append(this.logInHead.append(this.logInTitle).append(this.logInNav.append(this.logInNavLeft).append(this.logInNavRight))).append(this.logInForm.append(this.logInEmail.append(this.logInEmailInput).append(this.logInErrorLine).append(this.logInEmailHelp)).append(this.logInPassword.append(this.logInPasswordInput).append(this.logInErrorLine).append(this.logInPwdEyeBox.append(this.logInPwdEyeIcon)).append(this.logInPasswordHelp)).append(this.logInForgetPassword).append(this.logInButtonContainer.append(this.logInButton).append(this.logInPanelHelp)).append(this.logInDividing.append($(this.logInDividingLine)).append(this.logInDividingText).append($(this.logInDividingLine))).append(this.logInThirdParty.append(this.logInGoogle).append(this.logInFacebook))));
var d=this;this.isFlipH5||this.logInForm.addClass("isFlipH5"),this.lightBox.launch(),this.loggingIn=!1;var d=this;this.logInNavRight.on("click",this.toSignUp.bind(this)),this.logInEmailInput.on("input",function(){d.logInEmailHelp.hasClass("cc-hide")||(d.logInEmail.removeClass("error"),d.logInEmailHelp.addClass("cc-hide"),d.logInEmailInput.removeClass("cc-validate-fail2"))}),this.logInPasswordInput.on("input",function(){d.logInPasswordHelp.hasClass("cc-hide")||(d.logInPassword.removeClass("error"),d.logInPasswordHelp.addClass("cc-hide"),d.logInPasswordInput.removeClass("cc-validate-fail2"))}),this.logInEmailInput.on("blur",function(){return""!=$(this).val().trim()?utils.validate2("email",d.logInEmailInput,d.logInEmailHelp,!1,null,"!",null,"cc-error-font")?d.logInEmailHelp.hasClass("cc-hide")?void 0:(d.logInEmail.removeClass("error"),d.logInEmailInput.removeClass("cc-validate-fail2"),void d.logInEmailHelp.addClass("cc-hide")):(d.logInEmail.addClass("error"),d.logInEmailInput.addClass("cc-validate-fail2"),void d.logInEmailHelp.removeClass("cc-hide")):void 0}),this.logInPwdEyeBox.on("click",function(){d.logInPwdEyeBox.toggleClass("open"),"password"===d.logInPasswordInput.attr("type")?d.logInPasswordInput.attr("type","text"):d.logInPasswordInput.attr("type","password")}),this.logInForm.find("input").on("keypress",function(a){13==a.which&&d.logIn()}),this.logInButton.on("click",this.logIn.bind(this)),this.cookiePanel=new CookiePanel("fliphtml5LoginInEmail",this.logInEmailInput,this.logInEmailInput),""!==this.logInEmailInput.val().trim()&&this.logInPasswordInput.focus(),utils.loadFile("https://apis.google.com/js/api:client.js",function(){gapi.load("auth2",function(){auth2=gapi.auth2.init({client_id:"134491469080-rnfrraakuo4fii80cd8ht798ceo0956j.apps.googleusercontent.com",cookiepolicy:"single_host_origin",scope:"https://www.googleapis.com/auth/plus.login https://www.googleapis.com/auth/userinfo.email"});var a=document.getElementById("login-google");auth2.attachClickHandler(a,{},function(a){utils.googleLogin({helpId:"logInPanelHelp",isFastUpload:d.options.isFastUpload,lightBox:d.lightBox,callback:d.options.callback,googleUser:a,showSuccessTips:d.options.showSuccessTips})},function(){})})}),$("#login-facebook").on("click",function(){"undefined"==typeof window.open?alert("Please disable your popup blocker and try again."):utils.loginByFB({helpId:"logInPanelHelp",isFastUpload:d.options.isFastUpload,lightBox:d.lightBox,callback:d.options.callback,showSuccessTips:d.options.showSuccessTips})})}function SignUpPanel(a){this.options=a||{},this.isFlipH5=document.domain.includes("fliphtml5.com"),this.signUpPanel=$("<div class='cc-log-in-panel sign-up-panel'></div>"),this.signUpHead=$("<div class='cc-log-in-head'></div>"),this.signUpTitle=$("<div class='cc-log-in-head-title'>Create a Free Account</div>"),this.signUpNav=$("<div class='cc-log-in-head-nav'></div>"),this.signUpNavLeft=$("<div class='cc-log-in-nav-left'>Already have an account? </div>"),this.signUpNavRight=$("<a href='javascript:void(0)' class='cc-log-in-nav-right'>Sign in</a>"),this.signUpThirdParty=$("<div class='cc-log-in-third-party'></div>"),this.signUpGoogle=$("<div id='signup-google' class='cc-log-in-google'><i class='icon-google'></i><span class='cc-log-in-google-text'>Google</span></div>");var b="<div id='signup-facebook' class='cc-log-in-facebook'><i class='icon-facebook'></i><span class='cc-log-in-google-text'>Facebook</span></div>";this.signUpFacebook=$(b),this.signUpGoogleTips=$("<div class='cc-log-in-tips'>Continue with Google</div>"),this.signUpFacebookTips=$("<div class='cc-log-in-tips'>Continue with Facebook</div>"),this.tipsTriangle="<span class='cc-triangle'></span>",this.signUpDividing=$("<div class='cc-log-in-diving'></div>"),this.signUpDividingLine="<span class='cc-log-in-diving-line'></span>",this.signUpDividingText=$("<span class='cc-log-in-diving-text'>Or sign up with email</span>"),this.signUpForm=$("<div class='cc-log-in-form-panel sign-up-panel'></div>"),this.signUpEmail=$("<div class='cc-input-group'></div>"),this.signUpEmailInput=$("<input class='cc-log-in-input-item' type='email' value='' placeholder='Email' autocomplete='off' readonly  maxlength='255'/>"),this.signUpEmailHelp=$("<div class='cc-hide cc-error-font'></div>"),this.signUpConfirmTips=$("<p class='confirm-email-tips cc-hide'><span class='email'></span>, want to use this mail? <span class='yes'>Yes</span> or <span class='no'>NO</span>?</p>"),this.signUpPassword=$("<div class='cc-input-group'></div>"),this.signUpPasswordInput=$("<input class='cc-log-in-input-item pwd' type='password' value='' placeholder='Password (6+ characters)' autocomplete='new-password' readonly maxlength='255'/>"),this.signUpPasswordHelp=$("<div class='cc-hide cc-error-font'></div>"),this.signUpReTypePassword=$("<div class='cc-input-group'></div>"),this.signUpReTypePasswordInput=$("<input class='cc-log-in-input-item pwd' type='password' value='' placeholder='Re-type password' autocomplete='new-password' readonly maxlength='255'/>"),this.signUpReTypePasswordHelp=$("<div class='cc-hide cc-error-font'></div>"),this.signUpPwdEyeBox=$("<div class='cc-eye-box'></div>"),this.signUpRePwdEyeBox=$("<div class='cc-eye-box'></div>"),this.signUpPwdEyeIcon=$("<div class='cc-eye-icon'></div>"),this.signUpRePwdEyeIcon=$("<div class='cc-eye-icon'></div>"),this.signUpErrorLine="<div class='cc-error-line'></div>",this.signUpCode=$("<div class='cc-input-group'></div>"),this.signUpCodeWrap=$("<div class='signup-code-wrap'></div>"),this.codeLoadingWrap=$("<div class='code-loading-wrap'></div>"),this.codeLoadSpin=$("<div class='cc-loading-spin'></div>"),this.codeLoadFaSpin=$("<i class='fa fa-spinner fa-spin'></i>"),this.codeLoadTips=$("<p>The verification code is loading.</p>"),this.googleCode=$('<div id="googleCodeContainer" class="googleCodeContainer cc-hide"></div>'),this.codeWrap=$('<div class="signup-panel-code cc-hide"></div>'),this.signUpCodeInput=$("<input class='cc-log-in-input-item cc-sign-up-code-input' type='text' value='' placeholder='Verification Code' value='' maxlength='4'/>"),this.signUpCodeImg=$(this.isFlipH5?"<img class='cc-sign-up-code' src='/userLoad/code.php' alt='code'>":"undefined"!=typeof fh5.sessionId?"<img class='cc-sign-up-code' src='/userLoad/code.php?id="+fh5.sessionId+"' alt='code'>":"<img class='cc-sign-up-code' src='/userLoad/code.php' alt='code'>"),this.googleHelp=$('<div id="google-help" class="cc-sign-up-google-help cc-error-font cc-hide"></div>'),this.signUpButtonContainer=$("<div class='cc-log-in-button-container'></div>");var c="Sign Up";this.options.isToDownload&&(c="Sign Up to Download"),this.signUpButton=$("<div class='cc-sign-up-button'>"+c+"</div>"),this.signUpPanelHelp=$("<div id='signUpPanelHelp' class='cc-error-text cc-hide'></div>"),this.signUpAgree=$("<div class='cc-sign-up-agree'></div>"),this.signUpAgreeText1="By clicking Sign Up, you agree to our",this.signUpAgreeService=$("<a class='cc-sign-up-agree-link' href='/terms-of-service.php' target='_blank'> Terms of Service </a>"),this.signUpAgreeText2="and",this.signUpAgreePolicy=$("<a class='cc-sign-up-agree-link' href='/privacy-policy.php' target='_blank'> Private Policy </a>");var d="Create a Free Account",e="Become FlipHTML5 member to have fun in HTML5 FlipBook.";this.options.isToDownload&&(d="On Step to Download",e="Become FlipHTML5 member to download this PDF file."),"1"===utils.getIsMobile()?this.signUpPanel.hasClass("m")||this.signUpPanel.addClass("m"):this.signUpPanel.hasClass("m")&&this.signUpPanel.removeClass("m"),this.lightBox=new LightBox(null,null,480,"new",4,!1,!0),this.lightBox.box.append(this.signUpPanel.append(this.signUpHead.append(this.signUpTitle).append(this.signUpNav.append(this.signUpNavLeft).append(this.signUpNavRight)).append(this.signUpThirdParty.append(this.signUpGoogle.append(this.signUpGoogleTips.append($(this.tipsTriangle)))).append(this.signUpFacebook.append(this.signUpFacebookTips.append($(this.tipsTriangle))))).append(this.signUpDividing.append($(this.signUpDividingLine)).append(this.signUpDividingText).append($(this.signUpDividingLine)))).append(this.signUpForm.append(this.signUpEmail.append(this.signUpEmailInput).append($(this.signUpErrorLine)).append(this.signUpEmailHelp).append(this.signUpConfirmTips)).append(this.signUpPassword.append(this.signUpPasswordInput).append($(this.signUpErrorLine)).append(this.signUpPasswordHelp).append(this.signUpPwdEyeBox.append($(this.signUpPwdEyeIcon)))).append(this.signUpReTypePassword.append(this.signUpReTypePasswordInput).append($(this.signUpErrorLine)).append(this.signUpReTypePasswordHelp).append(this.signUpRePwdEyeBox.append($(this.signUpRePwdEyeIcon)))).append(this.signUpCode.append(this.signUpCodeWrap.append(this.codeLoadingWrap.append(this.codeLoadSpin.append(this.codeLoadFaSpin)).append(this.codeLoadTips)).append(this.googleCode).append(this.codeWrap.append(this.signUpCodeInput).append(this.signUpCodeImg)).append($(this.signUpErrorLine))).append(this.googleHelp)).append(this.signUpButtonContainer.append(this.signUpButton).append(this.signUpPanelHelp)).append(this.signUpAgree.append(this.signUpAgreeText1).append(this.signUpAgreeService).append(this.signUpAgreeText2).append(this.signUpAgreePolicy)))),this.lightBox.launch();var f=this;setTimeout(function(){f.signUpEmailInput.removeAttr("readonly"),f.signUpPasswordInput.removeAttr("readonly"),f.signUpReTypePasswordInput.removeAttr("readonly")},200),document.ontouchstart=function(){return!1},this.signingUp=!1;if(this.signUpNavRight.on("click",this.toSignIn.bind(this)),utils.loadFile("https://apis.google.com/js/api:client.js",function(){gapi.load("auth2",function(){auth2=gapi.auth2.init({client_id:"134491469080-rnfrraakuo4fii80cd8ht798ceo0956j.apps.googleusercontent.com",cookiepolicy:"single_host_origin",scope:"https://www.googleapis.com/auth/plus.login https://www.googleapis.com/auth/userinfo.email"});var a=document.getElementById("signup-google");auth2.attachClickHandler(a,{},function(a){utils.googleLogin({helpId:"signUpPanelHelp",isFastUpload:f.options.isFastUpload,lightBox:f.lightBox,callback:f.options.callback,googleUser:a,showSuccessTips:f.options.showSuccessTips})},function(){})})}),$("#signup-facebook").on("click",function(){"undefined"==typeof window.open?alert("Please disable your popup blocker and try again."):utils.loginByFB({helpId:"signUpPanelHelp",isFastUpload:f.options.isFastUpload,lightBox:f.lightBox,callback:f.options.callback,showSuccessTips:f.options.showSuccessTips})}),this.signUpEmailInput.on("blur",function(){var a=$(this).val().trim();if(f.signUpEmailHelp.hasClass("cc-hide"))return utils.validate2("email",$(this),f.signUpEmailHelp,!1,null,"!",null,"cc-error-font")?f.signUpEmailHelp.hasClass("cc-hide")?void $.ajax({type:"post",url:"/api/user/check-email",dataType:"json",beforeSend:function(){f.codeWrap.removeClass("error-border")},data:{account:a},success:function(a){"OK"==a.code||(f.signUpEmail.addClass("error"),f.signUpEmailInput.addClass("cc-validate-fail2"),f.signUpEmailHelp.removeClass("cc-hide").html("User already exists."))}}):(f.signUpEmail.removeClass("error"),$(this).removeClass("cc-validate-fail2"),void f.signUpEmailHelp.addClass("cc-hide")):(f.signUpEmail.addClass("error"),f.signUpEmailInput.addClass("cc-validate-fail2"),void f.signUpEmailHelp.removeClass("cc-hide"))}),this.signUpEmailInput.on("input",function(){f.signUpEmailHelp.addClass("cc-hide"),f.signUpEmailInput.removeClass("cc-validate-fail2"),f.signUpEmail.removeClass("error"),f.signUpConfirmTips.addClass("cc-hide")}),this.signUpPasswordInput.on("input",function(){f.signUpPasswordHelp.hasClass("cc-hide")||(f.signUpPasswordHelp.addClass("cc-hide"),f.signUpPassword.removeClass("error"),f.signUpPasswordInput.removeClass("cc-validate-fail2"))}),this.signUpReTypePasswordInput.on("input",function(){f.signUpReTypePasswordHelp.hasClass("cc-hide")||(f.signUpReTypePasswordHelp.addClass("cc-hide"),f.signUpReTypePassword.removeClass("error"),f.signUpReTypePasswordInput.removeClass("cc-validate-fail2"))}),this.signUpPwdEyeBox.on("click",function(){f.signUpPwdEyeBox.toggleClass("open"),"password"===f.signUpPasswordInput.attr("type")?f.signUpPasswordInput.attr("type","text"):f.signUpPasswordInput.attr("type","password")}),this.signUpRePwdEyeBox.on("click",function(){f.signUpRePwdEyeBox.toggleClass("open"),"password"===f.signUpReTypePasswordInput.attr("type")?f.signUpReTypePasswordInput.attr("type","text"):f.signUpReTypePasswordInput.attr("type","password")}),this.signUpForm.find("input").on("keypress",function(a){13==a.which&&f.signUp()}),this.signUpButton.on("click",this.signUp.bind(this)),$(".confirm-email-tips .yes").on("click",this.confirmEmailYes.bind(this)),$(".confirm-email-tips .no").on("click",this.confirmEmailNo.bind(this)),window.onGoogleRecaptchaLoad=function(){grecaptcha.render("googleCodeContainer",{sitekey:"6LeqmFoUAAAAAL4iBOWbcdvgX1MMOppe00V8b2we",callback:function(a){console.log(a),f.googleHelp.addClass("cc-hide"),window._RecaptchaResponse=a},expiredCallback:function(){window._RecaptchaResponse=""},errorCallback:function(){window._RecaptchaResponse=""}})},f.isFlipH5)var g=$.ajax({method:"GET",url:"https://www.google.com/recaptcha/api.js?onload=onGoogleRecaptchaLoad&render=explicit",timeout:5e3,dataType:"script",success:function(){f.googleHelp.addClass("cc-hide"),f.codeLoadingWrap.addClass("cc-hide")},complete:function(a,b){"timeout"==b?(g.abort(),f.codeLoadingWrap.addClass("cc-hide"),f.googleCode.addClass("cc-hide"),f.googleHelp.addClass("cc-hide"),f.codeWrap.removeClass("cc-hide")):"success"==b&&(f.googleCode.removeClass("cc-hide"),f.googleHelp.addClass("cc-hide"))}});else f.codeLoadingWrap.addClass("cc-hide"),f.codeWrap.removeClass("cc-hide");this.signUpCodeImg.on("click touchstart",function(){f.isFlipH5?f.signUpCodeImg.attr("src","/userLoad/code.php"):"undefined"!=typeof fh5.sessionId?f.signUpCodeImg.attr("src","/userLoad/code.php?id="+fh5.sessionId+"&time="+(new Date).getTime()):f.signUpCodeImg.attr("src","/userLoad/code.php")})}function SignUpPanel3(a){this.options=a||{},this.isFlipH5="fliphtml5.com"==document.domain||"online.fliphtml5.com"==document.domain||"test.fliphtml5.com"==document.domain||"dev.fliphtml5.com"==document.domain,this.signUpPanel=$("<div class='cc-log-in-panel sign-up-panel'></div>"),this.signUpHead=$("<div class='cc-log-in-head'></div>"),this.signUpTitle=$("<div class='cc-log-in-head-title'>Create a Free Account</div>"),this.signUpNav=$("<div class='cc-log-in-head-nav'></div>"),this.signUpNavLeft=$("<div class='cc-log-in-nav-left'>Already have an account? </div>"),this.signUpNavRight=$("<a href='javascript:void(0)' class='cc-log-in-nav-right'>Sign in</a>"),this.signUpThirdParty=$("<div class='cc-log-in-third-party'></div>"),this.signUpGoogle=$("<div id='signup-google' class='cc-log-in-google'><i class='icon-google'></i><span class='cc-log-in-google-text'>Google</span></div>");var b="<div id='signup-facebook' class='cc-log-in-facebook'><i class='icon-facebook'></i><span class='cc-log-in-google-text'>Facebook</span></div>";this.signUpFacebook=$(b),this.signUpGoogleTips=$("<div class='cc-log-in-tips'>Continue with Google</div>"),this.signUpFacebookTips=$("<div class='cc-log-in-tips'>Continue with Facebook</div>"),this.tipsTriangle="<span class='cc-triangle'></span>",this.signUpDividing=$("<div class='cc-log-in-diving'></div>"),this.signUpDividingLine="<span class='cc-log-in-diving-line'></span>",this.signUpDividingText=$("<span class='cc-log-in-diving-text'>Or sign up with email</span>"),this.signUpForm=$("<div class='cc-log-in-form-panel sign-up-panel'></div>"),this.signUpEmail=$("<div class='cc-input-group'></div>"),this.signUpEmailInput=$("<input class='cc-log-in-input-item' type='email' value='' placeholder='Email' autocomplete='off' readonly  maxlength='255'/>"),this.signUpEmailHelp=$("<div class='cc-hide cc-error-font'></div>"),this.signUpConfirmTips=$("<p class='confirm-email-tips cc-hide'><span class='email'></span>, want to use this mail? <span class='yes'>Yes</span> or <span class='no'>NO</span>?</p>"),this.signUpPassword=$("<div class='cc-input-group'></div>"),this.signUpPasswordInput=$("<input class='cc-log-in-input-item pwd' type='password' value='' placeholder='Password (6+ characters)' autocomplete='new-password' readonly maxlength='255'/>"),this.signUpPasswordHelp=$("<div class='cc-hide cc-error-font'></div>"),this.signUpReTypePassword=$("<div class='cc-input-group'></div>"),this.signUpReTypePasswordInput=$("<input class='cc-log-in-input-item pwd' type='password' value='' placeholder='Re-type password' autocomplete='new-password' readonly maxlength='255'/>"),this.signUpReTypePasswordHelp=$("<div class='cc-hide cc-error-font'></div>"),this.signUpPwdEyeBox=$("<div class='cc-eye-box'></div>"),this.signUpRePwdEyeBox=$("<div class='cc-eye-box'></div>"),this.signUpPwdEyeIcon=$("<div class='cc-eye-icon'></div>"),this.signUpRePwdEyeIcon=$("<div class='cc-eye-icon'></div>"),this.signUpErrorLine="<div class='cc-error-line'></div>",this.signUpCode=$("<div class='cc-input-group'></div>"),this.signUpCodeWrap=$("<div class='signup-code-wrap'></div>"),this.codeLoadingWrap=$("<div class='code-loading-wrap'></div>"),this.codeLoadSpin=$("<div class='cc-loading-spin'></div>"),this.codeLoadFaSpin=$("<i class='fa fa-spinner fa-spin'></i>"),this.codeLoadTips=$("<p>The verification code is loading.</p>"),this.googleCode=$('<div id="googleCodeContainer" class="googleCodeContainer cc-hide"></div>'),this.codeWrap=$('<div class="signup-panel-code cc-hide"></div>'),this.signUpCodeInput=$("<input class='cc-log-in-input-item cc-sign-up-code-input' type='text' value='' placeholder='Verification Code' value='' maxlength='4'/>"),this.signUpCodeImg=$(this.isFlipH5?"<img class='cc-sign-up-code' src='/userLoad/code.php' alt='code'>":"undefined"!=typeof fh5.sessionId?"<img class='cc-sign-up-code' src='https://fliphtml5.com/userLoad/code.php?id="+fh5.sessionId+"' alt='code'>":"<img class='cc-sign-up-code' src='https://fliphtml5.com/userLoad/code.php' alt='code'>"),this.googleHelp=$('<div id="google-help" class="cc-sign-up-google-help cc-error-font cc-hide"></div>'),this.signUpButtonContainer=$("<div class='cc-log-in-button-container'></div>");var c="Sign Up";this.options.isToDownload&&(c="Sign Up to Download"),this.signUpButton=$("<div class='cc-sign-up-button'>"+c+"</div>"),this.signUpPanelHelp=$("<div id='signUpPanelHelp' class='cc-error-text cc-hide'></div>"),this.signUpAgree=$("<div class='cc-sign-up-agree'></div>"),this.signUpAgreeText1="By clicking Sign Up, you agree to our",this.signUpAgreeService=$("<a class='cc-sign-up-agree-link' href='/terms-of-service.php' target='_blank'> Terms of Service </a>"),this.signUpAgreeText2="and",this.signUpAgreePolicy=$("<a class='cc-sign-up-agree-link' href='/privacy-policy.php' target='_blank'> Private Policy </a>");var d="Create a Free Account",e="Become FlipHTML5 member to have fun in HTML5 FlipBook.";this.options.isToDownload&&(d="On Step to Download",e="Become FlipHTML5 member to download this PDF file."),"1"===utils.getIsMobile()?this.signUpPanel.hasClass("m")||this.signUpPanel.addClass("m"):this.signUpPanel.hasClass("m")&&this.signUpPanel.removeClass("m"),this.lightBox=new LightBox(null,null,480,"new",4,!1,!0),this.lightBox.box.append(this.signUpPanel.append(this.signUpHead.append(this.signUpTitle).append(this.signUpNav.append(this.signUpNavLeft).append(this.signUpNavRight)).append(this.signUpThirdParty.append(this.signUpGoogle.append(this.signUpGoogleTips.append($(this.tipsTriangle)))).append(this.signUpFacebook.append(this.signUpFacebookTips.append($(this.tipsTriangle))))).append(this.signUpDividing.append($(this.signUpDividingLine)).append(this.signUpDividingText).append($(this.signUpDividingLine)))).append(this.signUpForm.append(this.signUpEmail.append(this.signUpEmailInput).append($(this.signUpErrorLine)).append(this.signUpEmailHelp).append(this.signUpConfirmTips)).append(this.signUpPassword.append(this.signUpPasswordInput).append($(this.signUpErrorLine)).append(this.signUpPasswordHelp).append(this.signUpPwdEyeBox.append($(this.signUpPwdEyeIcon)))).append(this.signUpReTypePassword.append(this.signUpReTypePasswordInput).append($(this.signUpErrorLine)).append(this.signUpReTypePasswordHelp).append(this.signUpRePwdEyeBox.append($(this.signUpRePwdEyeIcon)))).append(this.signUpCode.append(this.signUpCodeWrap.append(this.codeLoadingWrap.append(this.codeLoadSpin.append(this.codeLoadFaSpin)).append(this.codeLoadTips)).append(this.googleCode).append(this.codeWrap.append(this.signUpCodeInput).append(this.signUpCodeImg)).append($(this.signUpErrorLine))).append(this.googleHelp)).append(this.signUpButtonContainer.append(this.signUpButton).append(this.signUpPanelHelp)).append(this.signUpAgree.append(this.signUpAgreeText1).append(this.signUpAgreeService).append(this.signUpAgreeText2).append(this.signUpAgreePolicy)))),this.lightBox.launch();var f=this;setTimeout(function(){f.signUpEmailInput.removeAttr("readonly"),f.signUpPasswordInput.removeAttr("readonly"),f.signUpReTypePasswordInput.removeAttr("readonly")},200),document.ontouchstart=function(){return!1},this.signingUp=!1;if(this.signUpNavRight.on("click",this.toSignIn.bind(this)),utils.loadFile("https://apis.google.com/js/api:client.js",function(){gapi.load("auth2",function(){auth2=gapi.auth2.init({client_id:"134491469080-rnfrraakuo4fii80cd8ht798ceo0956j.apps.googleusercontent.com",cookiepolicy:"single_host_origin",scope:"https://www.googleapis.com/auth/plus.login https://www.googleapis.com/auth/userinfo.email"});var a=document.getElementById("signup-google");auth2.attachClickHandler(a,{},function(a){utils.googleLogin({helpId:"signUpPanelHelp",isFastUpload:f.options.isFastUpload,lightBox:f.lightBox,callback:f.options.callback,googleUser:a,showSuccessTips:f.options.showSuccessTips})},function(){})})}),$("#signup-facebook").on("click",function(){"undefined"==typeof window.open?alert("Please disable your popup blocker and try again."):utils.loginByFB({helpId:"signUpPanelHelp",isFastUpload:f.options.isFastUpload,lightBox:f.lightBox,callback:f.options.callback,showSuccessTips:f.options.showSuccessTips})}),this.signUpEmailInput.on("blur",function(){var a=$(this).val().trim();if(f.signUpEmailHelp.hasClass("cc-hide"))return utils.validate2("email",$(this),f.signUpEmailHelp,!1,null,"!",null,"cc-error-font")?f.signUpEmailHelp.hasClass("cc-hide")?void $.ajax({type:"post",url:"/api/user/check-email",dataType:"json",beforeSend:function(){f.codeWrap.removeClass("error-border")},data:{account:a},success:function(a){"OK"==a.code||(f.signUpEmail.addClass("error"),f.signUpEmailInput.addClass("cc-validate-fail2"),f.signUpEmailHelp.removeClass("cc-hide").html("User already exists."))}}):(f.signUpEmail.removeClass("error"),$(this).removeClass("cc-validate-fail2"),void f.signUpEmailHelp.addClass("cc-hide")):(f.signUpEmail.addClass("error"),f.signUpEmailInput.addClass("cc-validate-fail2"),void f.signUpEmailHelp.removeClass("cc-hide"))}),this.signUpEmailInput.on("input",function(){f.signUpEmailHelp.addClass("cc-hide"),f.signUpEmailInput.removeClass("cc-validate-fail2"),f.signUpEmail.removeClass("error"),f.signUpConfirmTips.addClass("cc-hide")}),this.signUpPasswordInput.on("input",function(){f.signUpPasswordHelp.hasClass("cc-hide")||(f.signUpPasswordHelp.addClass("cc-hide"),f.signUpPassword.removeClass("error"),f.signUpPasswordInput.removeClass("cc-validate-fail2"))}),this.signUpReTypePasswordInput.on("input",function(){f.signUpReTypePasswordHelp.hasClass("cc-hide")||(f.signUpReTypePasswordHelp.addClass("cc-hide"),f.signUpReTypePassword.removeClass("error"),f.signUpReTypePasswordInput.removeClass("cc-validate-fail2"))}),this.signUpPwdEyeBox.on("click",function(){f.signUpPwdEyeBox.toggleClass("open"),"password"===f.signUpPasswordInput.attr("type")?f.signUpPasswordInput.attr("type","text"):f.signUpPasswordInput.attr("type","password")}),this.signUpRePwdEyeBox.on("click",function(){f.signUpRePwdEyeBox.toggleClass("open"),"password"===f.signUpReTypePasswordInput.attr("type")?f.signUpReTypePasswordInput.attr("type","text"):f.signUpReTypePasswordInput.attr("type","password")}),this.signUpForm.find("input").on("keypress",function(a){13==a.which&&f.signUp()}),this.signUpButton.on("click",this.signUp.bind(this)),$(".confirm-email-tips .yes").on("click",this.confirmEmailYes.bind(this)),$(".confirm-email-tips .no").on("click",this.confirmEmailNo.bind(this)),window.onGoogleRecaptchaLoad=function(){grecaptcha.render("googleCodeContainer",{sitekey:"6LeqmFoUAAAAAL4iBOWbcdvgX1MMOppe00V8b2we",callback:function(a){console.log(a),f.googleHelp.addClass("cc-hide"),window._RecaptchaResponse=a},expiredCallback:function(){window._RecaptchaResponse=""},errorCallback:function(){window._RecaptchaResponse=""}})},f.isFlipH5)var g=$.ajax({method:"GET",url:"https://www.google.com/recaptcha/api.js?onload=onGoogleRecaptchaLoad&render=explicit",timeout:5e3,dataType:"script",success:function(){f.googleHelp.addClass("cc-hide"),f.codeLoadingWrap.addClass("cc-hide")},complete:function(a,b){"timeout"==b?(g.abort(),f.codeLoadingWrap.addClass("cc-hide"),f.googleCode.addClass("cc-hide"),f.googleHelp.addClass("cc-hide"),f.codeWrap.removeClass("cc-hide")):"success"==b&&(f.googleCode.removeClass("cc-hide"),f.googleHelp.addClass("cc-hide"))}});else f.codeLoadingWrap.addClass("cc-hide"),f.codeWrap.removeClass("cc-hide");this.signUpCodeImg.on("click touchstart",function(){f.isFlipH5?f.signUpCodeImg.attr("src","/userLoad/code.php"):"undefined"!=typeof fh5.sessionId?f.signUpCodeImg.attr("src","https://fliphtml5.com/userLoad/code.php?id="+fh5.sessionId+"&time="+(new Date).getTime()):f.signUpCodeImg.attr("src","https://fliphtml5.com/userLoad/code.php")})}function SliderImg(a,b){var c=this,d=$("<div class='help-fancybox'></div>"),e=$("<div class='help-fancybox-wrap'></div>"),f=$("<div class='help-fancybox-skin'></div>"),g=$("<div class='help-fancybox-outer af-user-select-none'></div>"),h=$("<div class='help-fancybox-inner'></div>"),i=$("<a title='prev' class='help-fancybox-nav fancybox-prev' href='javascript:;'><span></span></a>"),j=$("<a title='next' class='help-fancybox-nav fancybox-next' href='javascript:;'><span></span></a>"),k=$("<img class='help-fancybox-image' />"),l=$("<div class='help-fancybox-title'>"+(b+1)+"/"+a.length+"</div>"),m=$("<div class='help-fancybox-control af-user-select-none'></div>"),n=$("<ul></ul>"),o=$("<li><a title='prev (←)' href='javascript:;'><i class='fa fa-chevron-left'></i></a></li>"),p=$("<li><a title='Auto Play (space)' href='javascript:;'><i class='fa fa-lg fa-play-circle'></i></a></li>"),q=$("<li><a class='right-border' title='next (→)' href='javascript:;'><i class='fa fa-chevron-right'></i></a></li>"),r=$("<li class='disabled'><a class='right-border' title='Full Size (F)' href='javascript:;'><i class='fa fa-lg fa-expand'></i></a></li>"),s=$("<li><a title='Close (Esc)' href='javascript:;'><i class='fa fa-lg fa-times'></i></a></li>");d.add(s).on("click",function(){c.cancel()}),f.add(n).on("click",function(a){return a.preventDefault(),!1}),i.add(o).on("click",function(){c.prev()}),j.add(q).on("click",function(){c.next()}),p.on("click",function(){c.autoPaly()}),r.on("click",function(){c.showFace()}),$(window).on("keydown.SliderImg",function(a){"39"==a.keyCode&&c.next(),"37"==a.keyCode&&c.prev(),"27"==a.keyCode&&c.cancel(),"70"==a.keyCode&&c.showFace(),"32"==a.keyCode&&c.autoPaly()}).on("resize.SliderImg",function(){t&&clearTimeout(t),t=setTimeout(function(){c.setPosition(c.originalSize.width,c.originalSize.height)},50)}),d.append(e.append(f.append(g.append(h.append(k)).append(i).append(j)).append(l))).append(m.append(n.append(o).append(p).append(q).append(r).append(s))),this.$panel=d,this.$img=k,this.$title=l,this.$warp=e,this.$inner=h,this.$face=r,this.$play=p,this.current=b,this.data=a,this.padding=15,this.otherLT=20,this.btnsH=30,this.slideTimeOut=!1,this.isAutoPlay=!1,this.launch(),this.skipTo(b);var t=null;window.aa=c}function SmartSelect(a){var b={container:null,data:[],changeCallback:function(){}};this.options=$.extend({},b,a),this.arrow=$("<i class='fa fa-caret-down cc-smart-select-arrow'></i>"),this.optionContainer=$("<ul class='cc-smart-select-option-ul cc-hide'></ul>"),this.valueContainer=$("<div class='cc-smart-select-value-container'></div>"),this.showing=!1;var c,d,e=this.options.data,f=e.length,g=this;for(c=0;f>c;c++){var h=$("<li>").attr({"data-value":e[c].value,"data-label":e[c].label}).html(e[c].label);h.appendTo(this.optionContainer),e[c].isDefault&&(h.addClass("active"),this.valueContainer.text(e[c].label).data("value",e[c].value))}this.optionContainer.css({width:this.options.container.outerWidth(),borderRadius:this.options.container.css("borderRadius")}),this.valueContainer.css({marginLeft:this.options.container.css("paddingLeft"),lineHeight:this.options.container.height()+parseInt(this.options.container.css("paddingTop"),10)+parseInt(this.options.container.css("paddingBottom"),10)+"px"}),this.options.container.append(this.arrow).append(this.valueContainer).append(this.optionContainer),d=this.optionContainer.find("li"),d.css({paddingLeft:this.options.container.css("paddingLeft")}),this.optionContainer.on("click",this.choose.bind(this)),this.options.container.on("click",this.toggleOption.bind(this)),$(document).on("click",function(a){$.contains(g.options.container[0],a.target)||g.options.container[0]==a.target||g.hideOptions()})}function TabBox(a){var b=a.num,c=a.tabArr,d=a.container;this.tabs=[],this.panes=[],this.tabContext=$("<div class='tb-tap-container cc-float-fix'></div>"),this.paneContext=$("<div class='tb-section-container'></div>"),b=c&&c.length>0?c.length:b;for(var e=0;b>e;e++){var f=$("<div class='tb-tab'></div>").html(c&&c.length>0?c[e].title:"undefined"),g=$("<div class='tb-section'></div>");this.tabs.push(f),this.panes.push(g),this.tabContext.append(f),this.paneContext.append(g)}b>=1&&(this.tabs[0].addClass("tb-tab-active"),this.panes[0].addClass("tb-section-active")),this.bindTabClickFn(this.panes),d.css({border:"1px solid #e9e9e9"}).append(this.tabContext).append(this.paneContext)}function TermsOfSellingPanel(a){this.options=a,this.lightbox=new FixedLightBox("Terms of Selling","","1",{hasBtns:!0,hasPadding:!0,isEasyClose:!0}),this.container=$("<div class='cc-terms-of-selling-panel'><p><span>1</span>The digital publication you are publishing may not infringe any third-party right, or contain any virus or illegal or unethical content. And by publishing your digital content, you agree to the <a href='/terms-of-service.php' class='cc-common-link cc-underline' target='_blank'>FlipHTML5 Terms of Service</a> and <a href='/privacy-policy.php' class='cc-common-link cc-underline' target='_blank'>Privacy Policy</a>.</p><p><span>2</span>Selling Process: You set the price for the book, and the buyer can click the PURCHASE button to login with his/her FlipHTML5 account. Then the buyer will be directed to the PayPal page to pay for the book and the amount will be paid directly to the seller’s PayPal account. FlipHTML5 will not charge you any transaction fee, but PayPal will charge you a certain amount. For specific charging policies, please refer to the official document of PayPal.</p><p><span>3</span>First, the seller must have a PayPal account which must be of Premier or Business type with IPN service. Only Premier or Business account will enable you to access IPN service. For more details about IPN: <a target='_blank' class='cc-common-link cc-underline' href='https://developer.paypal.com/webapps/developer/docs/classic/products/instant-payment-notification/'>Instant Payment Notification</a></p><p><span>4</span>Before selling your book on FlipHTML5 website, you must first set your PayPal account as the charging account and set currency. The currency you set will be applied to all the books you sell and each seller can and only can set one currency. If the PayPal account or the currency is not completed, you are not able to set price accordingly.</p><p><span>5</span>Except for the price, you are allowed to set the range of previewable pages as well as the option for allowing buyers to download your source PDF file.</p><p><span>6</span>We promise protection for your source PDF file, and make sure that only logged-in FlipHTML5 users who have purchased your book have the authority to download your PDF.</p><p><span>7</span>Once the book is priced, it will be turned into Public status by force. If the book had been set as Private with a set of passwords, then the passwords will expire.</p><p><span>8</span>FlipHTML5 website will record all of your transactions and each transaction record will exist as a unique order receipt in a default ENABLED status. Once you are aware of any malicious sharing or reselling by any of your buyer, you can DISABLE this order. And this buyer will no longer have access to your book.</p><p><span>9</span>To restrict access to the book, you cannot only disable the order, but also DISABLE the book. However, by disabling the book, you are restricting all buyers of this book to access it. So it is highly noted that you SHOULD NOT disable or delete a book on sale at a venture. Otherwise, it will result in ALL buyers’ failing access to the book. And the dispute(s) caused thereby shall be negotiated and solved on the seller’s and buyers’ own.</p><p><span>10</span>You are able to modify the book price, PayPal account or currency. But please note that the order(s) made before the modifications will proceed based on previous settings.</div>"),this.lightbox.getPanel().append(this.container),this.lightbox.getSaveBtn().hide(),this.lightbox.getCancelBtn().html("Close"),this.lightbox.launch()
}function ToTopPanel(a){this.panel=$("<ul class='cc-to-top-panel cc-hide'></ul>"),2==a&&this.panel.addClass("cc-to-top-panel-2"),this.toTopButton=$("<li class='cc-to-top' title='Back To Top'><span class='icon icon-arrow-up'></span></li>"),this.panel.append(this.toTopButton),this.panel.appendTo($("body")),this.toTopButton.on("click",this.toTop.bind(this)),$(window).on("scroll",this.handleScroll.bind(this))}function UpgradePanel(a,b){var c=fh5.pageData.upgrade[a.version];this.panel=$("<div class='text-left'></div>"),this.detailDesc=$("<div>"+a.desc+"</div>"),this.upgradeInfo=$("<div class='cc-upgrade-info cc-float-fix'></div>"),this.upgradeItemsContainer=$("<div class='cc-upgrade-items-container'></div>"),this.upgradeItemsTitle=$("<div class='cc-upgrade-items-title'>"+a.version+" version gets you:</div>"),this.upgrageItems=$("<ul class='cc-disc-ul'></ul>"),this.upgradeImg=a.imgSrc?$("<img class='cc-upgrade-img' src="+a.imgSrc+">"):"",this.bottom=$("<div class='cc-upgrade-bottom row'></div> "),this.contact=$("<div class='col-sm-6'><div><span class='cc-bold'>Questions?</span> We can help you learn more now.</div><div>Feel free to email us at <a class='cc-blue-link-2' href='mailto:support@fliphtml5.com' target='_blank'>support@fliphtml5.com</a>.</div></div>"),this.buttonContainer=$("<div class='cc-upgrade-bottom-buttons col-sm-6'></div>"),this.cancelButton=$("<div class='button-pure cc-margin-right-20'>Later</div>"),this.upgradeButton=$("<a href='/fliphtml5-pricing.php' target='_blank'><li class='button-pure button-pure-orange'>See plans and pricing</li></a>");for(var d=c.items,e=0,f=d.length;f>e;e++)this.upgrageItems.append($("<li>"+d[e]+"</li>"));b?(this.tableInfo=$("<table class='limit-table cc-table-info cc-float-fix'></table>"),this.upgradeVersion=$("<tr><th class='tr-separate'></th><th>Free</th><th>Pro</th><th>Gold</th><th>Platinum</th><th>Enterprise</th></tr>"),this.upgradeLimit=$("<tr ></tr>"),this.limitType=$("<td class='cc-table-limit-type'>"+b.rowName+"</td>"),this.FreeLimit=$("<td>"+b.rowItems[0]+"</td>"),this.ProLimit=$("<td>"+b.rowItems[1]+"</td>"),this.GoldLimit=$("<td>"+b.rowItems[2]+"</td>"),this.PlatinumLimit=$("<td>"+b.rowItems[3]+"</td>"),this.EnterpriseLimit=$("<td>"+b.rowItems[4]+"</td>"),this.panel.append(this.detailDesc.append(this.tableInfo.append(this.upgradeVersion).append(this.upgradeLimit.append(this.limitType).append(this.FreeLimit).append(this.ProLimit).append(this.GoldLimit).append(this.PlatinumLimit).append(this.EnterpriseLimit))))):this.panel.append(this.detailDesc).append(this.upgradeInfo.append(this.upgradeItemsContainer.append(this.upgradeItemsTitle).append(this.upgrageItems)).append(this.upgradeImg)),this.lightBox=new FixedLightBox("Upgrade to "+c.icon,a.title,1,{hasPadding:!0,isEasyClose:!0}),this.lightBox.getContent().css("border","5px solid #63696c"),this.lightBox.getPanel().append(this.panel).append(this.bottom.append(this.contact).append(this.buttonContainer.append(this.cancelButton).append(this.upgradeButton))),this.lightBox.launch(),this.cancelButton.on("click",this.lightBox.cancel.bind(this.lightBox))}function VideoPanel(a,b,c){c&&(b+="?autoplay=1&loop=0&rel=0"),this.panel=$("<div class='cc-light-box-content-panel-no-padding'></div>"),this.iframe=$("<iframe height='100%' width='100%' allowfullscreen webkitallowfullscreen mozallowfullscreen frameborder='0' src='"+b+"'></iframe>"),this.panel.height(651);var d=new LightBox(a+"<a class='cc-light-box-head-link' href='"+b+"' target='_blank'>Open in new window</a>","",1100,"white","1",!0);d.getBox().append(this.panel.append("<div class='cc-light-box-loading'><i class='fa fa-spinner fa-spin'></i></div>").append(this.iframe)),window.innerHeight<666?d.launch(!0):d.launch()}function WaterPanel(a){this.options=a,this.panel=$("<ul class='cc-water-panel'></ul>"),this.containerWidth=a.containerWidth||0,this.container=a.container,this.itemWidth=a.itemWidth,this.offsetX=a.offsetX,this.offsetY=a.offsetY,this.keyword=a.keyword||"",this.colHeights=[],this.isInCenter=a.isInCenter||!1,this.isInHome=a.isInHome||!1,this.isInDomainHome=a.isInDomainHome||!1,this.lastTime="",this.isInDomainHome||this.createHoverContent(),this.panel.appendTo(this.container),this.load(a.books);var b=this,c=null;$(window).on("resize",function(){clearTimeout(c),c=setTimeout(function(){b.setPosition()},50)})}function RedirectingBox(a){this.opt=a,this.redirectBox=$("<div class='cc-redirect-box'></div>"),this.$maskBox=$("<div class='cc-redirect-mask'></div>"),this.$loadingBox=$("<div class='cc-loading-box'></div>"),this.$loadingAnimation=$("<div class='cc-redirect-animation'></div>"),this.$loadingImg=$("<img class='cc-loading-img' src='/images/loadingImg.png' />"),this.$loadingText=$("<div class='cc-redirect-text'>Redirecting. Please wait...</div>"),this.opt&&this.opt.isPanel&&this.redirectBox.addClass("isPanel"),this.redirectBox.append(this.$maskBox).append(this.$loadingBox.append(this.$loadingAnimation.append(this.$loadingImg)).append(this.$loadingText))}fh5.database={category:[{id:1,name:"Animals & Pets",secondaryCategory:[{id:1,name:"Birds"},{id:2,name:"Dogs & Cats"},{id:3,name:"Farming"},{id:4,name:"Horses"},{id:5,name:"Wildlife"}]},{id:2,name:"Antiques & Collectibles",secondaryCategory:[{id:6,name:"Classic Vehicles"},{id:7,name:"Collectibles"}]},{id:3,name:"Art & Photography",secondaryCategory:[{id:9,name:"Art"},{id:10,name:"Art Instruction"},{id:11,name:"Graphic Arts"},{id:12,name:"Photography"},{id:13,name:"Photography Titles"},{id:14,name:"Skin Art"}]},{id:4,name:"Auto & Cycles",secondaryCategory:[{id:18,name:"Bikes"},{id:19,name:"Cars"},{id:20,name:"Motorsports"},{id:21,name:"Trains"},{id:128,name:"Transportation"}]},{id:5,name:"Books",secondaryCategory:[{id:22,name:"Educative"},{id:23,name:"Fiction"},{id:24,name:"Health-Related"},{id:25,name:"Non-Fiction"}]},{id:6,name:"Business & Finance",secondaryCategory:[{id:26,name:"Business"},{id:27,name:"Engineering"},{id:28,name:"Government"},{id:29,name:"Human Resources"},{id:30,name:"Investing"},{id:31,name:"Law"},{id:32,name:"Leadership"},{id:33,name:"Personal Finance"},{id:34,name:"Sales & Marketing"},{id:35,name:"Uncategorized"}]},{id:7,name:"Children",secondaryCategory:[{id:36,name:"Children"},{id:37,name:"Elementary"},{id:38,name:"Preschool"}]},{id:8,name:"Computers & Electronics",secondaryCategory:[{id:39,name:"Computers & Internet"},{id:40,name:"Electronics"}]},{id:9,name:"Cooking, Food & Beverage",secondaryCategory:[{id:41,name:"Beer, Wine, Spirits"},{id:42,name:"Cooking & Food"}]},{id:10,name:"Crafts",secondaryCategory:[{id:43,name:"Art & Decor"},{id:44,name:"Jewelry & Beadwork"},{id:45,name:"Scrapbooking & Cards"},{id:46,name:"Sewing & Needlework"}]},{id:11,name:"Enrichment",secondaryCategory:[{id:47,name:"Education"},{id:48,name:"History"},{id:49,name:"Literary"},{id:50,name:"Political & Social"},{id:51,name:"Self-Help"}]},{id:12,name:"Entertainment",secondaryCategory:[{id:52,name:"Celebrity"},{id:53,name:"Entertainment"},{id:54,name:"Gaming"},{id:55,name:"Music Entertainment"},{id:56,name:"TV & Movie"}]},{id:13,name:"Ethnic",secondaryCategory:[{id:57,name:"African-American"},{id:58,name:"Culture & Heritage"},{id:59,name:"Hispanic"},{id:60,name:"Spanish"}]},{id:14,name:"Fashion & Style",secondaryCategory:[{id:61,name:"Bridal"},{id:62,name:"Fashion"},{id:63,name:"Hairstyle"},{id:64,name:"Teen Style"}]},{id:15,name:"Health & Fitness",secondaryCategory:[{id:65,name:"Diet & Nutrition"},{id:66,name:"Fitness"},{id:67,name:"Health"},{id:68,name:"Health Conditions"},{id:69,name:"Healthy Living"}]},{id:16,name:"Hobbies",secondaryCategory:[{id:70,name:"Arts & Crafts"},{id:71,name:"Comics"},{id:72,name:"Sci-Fi & Mystery"}]},{id:17,name:"Home & Gardening",secondaryCategory:[{id:73,name:"Architecture"},{id:74,name:"Design"},{id:75,name:"Home"}]},{id:18,name:"Lifestyle",secondaryCategory:[{id:76,name:"Adventure"},{id:77,name:"Card Playing"},{id:78,name:"Holiday"},{id:79,name:"International"},{id:80,name:"Lifestyle & Leisure"},{id:81,name:"Real Estate & Home Building"},{id:82,name:"Recreation"},{id:83,name:"Travel"},{id:84,name:"Travel & Vacations"}]},{id:19,name:"Medical",secondaryCategory:[{id:85,name:"Medical Conditions"},{id:86,name:"Medical Journals"}]},{id:20,name:"Men's",secondaryCategory:[{id:87,name:"Auto"},{id:88,name:"Men's Interests"},{id:89,name:"Outdoor"},{id:90,name:"Sports & Athletics"},{id:91,name:"Weaponry"}]},{id:21,name:"Music",secondaryCategory:[{id:92,name:"Classical & Opera"},{id:93,name:"Country & Gospel"},{id:94,name:"Instruments & Performers"},{id:95,name:"Music News"},{id:96,name:"Urban"}]},{id:22,name:"News & Politics",secondaryCategory:[{id:97,name:"Ministry"},{id:98,name:"News"},{id:99,name:"Newspapers"},{id:100,name:"Political"},{id:129,name:"Technology"}]},{id:23,name:"Parenting",secondaryCategory:[{id:101,name:"Family"},{id:102,name:"Kids & Teens"},{id:103,name:"Special Needs"}]},{id:24,name:"Religion",secondaryCategory:[{id:104,name:"Religion"},{id:105,name:"Religious Lifestyle"},{id:106,name:"Religious News"}]},{id:25,name:"Science & Nature",secondaryCategory:[{id:107,name:"Environmental"},{id:108,name:"Nanotechnology"},{id:109,name:"Nature"},{id:110,name:"Robots"},{id:111,name:"Science"},{id:112,name:"Space"}]},{id:26,name:"Sports & Recreation",secondaryCategory:[{id:113,name:"Aviation"},{id:114,name:"Boating"},{id:115,name:"Football"},{id:116,name:"Hunting & Fishing"},{id:117,name:"Sports"}]},{id:27,name:"Teen",secondaryCategory:[{id:118,name:"Comic Books"},{id:119,name:"Dance, Cheer, & Gymnastics"},{id:120,name:"Gamers"},{id:121,name:"Teen"},{id:122,name:"Teen Life"}]},{id:28,name:"Women's",secondaryCategory:[{id:123,name:"Bridal & Weddings"},{id:124,name:"Fashion & Beauty"},{id:125,name:"Pregnancy & Family"},{id:126,name:"Women's Health"},{id:127,name:"Women's Interests"}]}],secondaryCategory:[{id:1,name:"Birds"},{id:2,name:"Dogs & Cats"},{id:3,name:"Farming"},{id:4,name:"Horses"},{id:5,name:"Wildlife"},{id:6,name:"Classic Vehicles"},{id:7,name:"Collectibles"},{id:8,name:"Adults"},{id:9,name:"Art"},{id:10,name:"Art Instruction"},{id:11,name:"Graphic Arts"},{id:12,name:"Photography"},{id:13,name:"Photography Titles"},{id:14,name:"Skin Art"},{id:15,name:"Art"},{id:16,name:"Art Instruction"},{id:17,name:"Graphic Arts"},{id:18,name:"Bikes"},{id:19,name:"Cars"},{id:20,name:"Motorsports"},{id:21,name:"Trains"},{id:22,name:"Educative"},{id:23,name:"Fiction"},{id:24,name:"Health-Related"},{id:25,name:"Non-Fiction"},{id:26,name:"Business"},{id:27,name:"Engineering"},{id:28,name:"Government"},{id:29,name:"Human Resources"},{id:30,name:"Investing"},{id:31,name:"Law"},{id:32,name:"Leadership"},{id:33,name:"Personal Finance"},{id:34,name:"Sales & Marketing"},{id:35,name:"Uncategorized"},{id:36,name:"Children"},{id:37,name:"Elementary"},{id:38,name:"Preschool"},{id:39,name:"Computers & Internet"},{id:40,name:"Electronics"},{id:41,name:"Beer, Wine, Spirits"},{id:42,name:"Cooking & Food"},{id:43,name:"Art & Decor"},{id:44,name:"Jewelry & Beadwork"},{id:45,name:"Scrapbooking & Cards"},{id:46,name:"Sewing & Needlework"},{id:47,name:"Education"},{id:48,name:"History"},{id:49,name:"Literary"},{id:50,name:"Political & Social"},{id:51,name:"Self-Help"},{id:52,name:"Celebrity"},{id:53,name:"Entertainment"},{id:54,name:"Gaming"},{id:55,name:"Music Entertainment"},{id:56,name:"TV & Movie"},{id:57,name:"African-American"},{id:58,name:"Culture & Heritage"},{id:59,name:"Hispanic"},{id:60,name:"Spanish"},{id:61,name:"Bridal"},{id:62,name:"Fashion"},{id:63,name:"Hairstyle"},{id:64,name:"Teen Style"},{id:65,name:"Diet & Nutrition"},{id:66,name:"Fitness"},{id:67,name:"Health"},{id:68,name:"Health Conditions"},{id:69,name:"Healthy Living"},{id:70,name:"Arts & Crafts"},{id:71,name:"Comics"},{id:72,name:"Sci-Fi & Mystery"},{id:73,name:"Architecture"},{id:74,name:"Design"},{id:75,name:"Home"},{id:76,name:"Adventure"},{id:77,name:"Card Playing"},{id:78,name:"Holiday"},{id:79,name:"International"},{id:80,name:"Lifestyle & Leisure"},{id:81,name:"Real Estate & Home Building"},{id:82,name:"Recreation"},{id:83,name:"Travel"},{id:84,name:"Travel & Vacations"},{id:85,name:"Medical Conditions"},{id:86,name:"Medical Journals"},{id:87,name:"Auto"},{id:88,name:"Men's Interests"},{id:89,name:"Outdoor"},{id:90,name:"Sports & Athletics"},{id:91,name:"Weaponry"},{id:92,name:"Classical & Opera"},{id:93,name:"Country & Gospel"},{id:94,name:"Instruments & Performers"},{id:95,name:"Music News"},{id:96,name:"Urban"},{id:97,name:"Ministry"},{id:98,name:"News"},{id:99,name:"Newspapers"},{id:100,name:"Political"},{id:101,name:"Family"},{id:102,name:"Kids & Teens"},{id:103,name:"Special Needs"},{id:104,name:"Religion"},{id:105,name:"Religious Lifestyle"},{id:106,name:"Religious News"},{id:107,name:"Environmental"},{id:108,name:"Nanotechnology"},{id:109,name:"Nature"},{id:110,name:"Robots"},{id:111,name:"Science"},{id:112,name:"Space"},{id:113,name:"Aviation"},{id:114,name:"Boating"},{id:115,name:"Football"},{id:116,name:"Hunting & Fishing"},{id:117,name:"Sports"},{id:118,name:"Comic Books"},{id:119,name:"Dance, Cheer, & Gymnastics"},{id:120,name:"Gamers"},{id:121,name:"Teen"},{id:122,name:"Teen Life"},{id:123,name:"Bridal & Weddings"},{id:124,name:"Fashion & Beauty"},{id:125,name:"Pregnancy & Family"},{id:126,name:"Women's Health"},{id:127,name:"Women's Interests"}],type:[{id:1,name:"Magazine"},{id:2,name:"Cataloge"},{id:3,name:"Photo Album"},{id:4,name:"E-Book"},{id:5,name:"E-Card"},{id:6,name:"Artcle"},{id:7,name:"Essay"},{id:8,name:"Journal"},{id:9,name:"Manual"},{id:10,name:"Newspaper"},{id:11,name:"Paper"},{id:12,name:"Portfolio"},{id:13,name:"Report"},{id:14,name:"Other"},{id:15,name:"Brochure"},{id:16,name:"Comics"}],language:[{id:1,name:"Arabic"},{id:2,name:"Armenian"},{id:3,name:"Basque"},{id:4,name:"Bosnian"},{id:5,name:"Bulgarian"},{id:6,name:"Chinese"},{id:7,name:"Croatian"},{id:8,name:"Czech"},{id:9,name:"Danish"},{id:10,name:"Dutch"},{id:11,name:"English"},{id:12,name:"Estonian"},{id:13,name:"Finnish"},{id:14,name:"French"},{id:15,name:"Georgian"},{id:16,name:"German"},{id:17,name:"Greek"},{id:18,name:"Hebrew"},{id:19,name:"Hindi"},{id:20,name:"Hungarian"},{id:21,name:"Icelandic"},{id:22,name:"Indonesian"},{id:23,name:"Irish"},{id:24,name:"Italian"},{id:25,name:"Japanese"},{id:26,name:"Korean"},{id:27,name:"Latvian"},{id:28,name:"Lithuanian"},{id:29,name:"Macedonian"},{id:30,name:"Malaysian"},{id:31,name:"Norwegian"},{id:32,name:"Polish"},{id:33,name:"Portuguese"},{id:34,name:"Romanian"},{id:35,name:"Russian"},{id:36,name:"Serbian"},{id:37,name:"Slovak"},{id:38,name:"Slovenian"},{id:39,name:"Somali"},{id:40,name:"Spanish"},{id:41,name:"Swedish"},{id:42,name:"Turkish"},{id:43,name:"Ukrainian"}],region:[{id:1,name:"Africa"},{id:2,name:"Aland Islands"},{id:3,name:"Albania"},{id:4,name:"Algeria"},{id:5,name:"American Samoa"},{id:6,name:"Andorra"},{id:7,name:"Angola"},{id:8,name:"Anguilla"},{id:9,name:"Antigua and Barbuda"},{id:10,name:"Argentina"},{id:11,name:"Armenia"},{id:12,name:"Aruba"},{id:13,name:"Asia"},{id:14,name:"Australia"},{id:15,name:"Australia & Oceania"},{id:16,name:"Austria"},{id:17,name:"Azerbaijan"},{id:18,name:"Bahamas"},{id:19,name:"Bahrain"},{id:20,name:"Bangladesh"},{id:21,name:"Barbados"},{id:22,name:"Belarus"},{id:23,name:"Belgium"},{id:24,name:"Belize"},{id:25,name:"Benin"},{id:26,name:"Bermuda"},{id:27,name:"Bhutan"},{id:28,name:"Bolivia"},{id:29,name:"Bosnia and Herzegovina"},{id:30,name:"Botswana"},{id:31,name:"Brazil"},{id:32,name:"British Indian Ocean Territory"},{id:33,name:"Brunei"},{id:34,name:"Bulgaria"},{id:35,name:"Burkina Faso"},{id:36,name:"Burma (Myanmar)"},{id:37,name:"Burundi"},{id:38,name:"Cambodia"},{id:39,name:"Cameroon"},{id:40,name:"Canada"},{id:41,name:"Cape Verde"},{id:42,name:"Cayman Islands"},{id:43,name:"Central African Republic"},{id:44,name:"Chad"},{id:45,name:"Chile"},{id:46,name:"China"},{id:47,name:"Christmas Island"},{id:48,name:"Colombia"},{id:49,name:"Comoros"},{id:50,name:"Cook Islands"},{id:51,name:"Costa Rica"},{id:52,name:"Cote d'Ivoire"},{id:53,name:"Croatia"},{id:54,name:"Cuba"},{id:55,name:"Cyprus"},{id:56,name:"Czech Republic"},{id:57,name:"Democratic Republic of the Congo"},{id:58,name:"Denmark"},{id:59,name:"Djibouti"},{id:60,name:"Dominica"},{id:61,name:"Dominican Republic"},{id:62,name:"Ecuador"},{id:63,name:"Egypt"},{id:64,name:"El Salvador"},{id:65,name:"Equatorial Guinea"},{id:66,name:"Eritrea"},{id:67,name:"Estonia"},{id:68,name:"Ethiopia"},{id:69,name:"Europe"},{id:70,name:"Falkland Islands"},{id:71,name:"Faroe Islands"},{id:72,name:"Fiji"},{id:73,name:"Finland"},{id:74,name:"France"},{id:75,name:"French Guiana"},{id:76,name:"French Polynesia"},{id:77,name:"Gabon"},{id:78,name:"Gambia"},{id:79,name:"Georgia"},{id:80,name:"Germany"},{id:81,name:"Ghana"},{id:82,name:"Gibraltar"},{id:83,name:"Global"},{id:84,name:"Greece"},{id:85,name:"Greenland"},{id:86,name:"Grenada"},{id:87,name:"Guadeloupe"},{id:88,name:"Guam"},{id:89,name:"Guatemala"},{id:90,name:"Guernsey"},{id:91,name:"Guinea"},{id:92,name:"Guinea-Bissau"},{id:93,name:"Guyana"},{id:94,name:"Haiti"},{id:95,name:"Honduras"},{id:96,name:"Hong Kong"},{id:97,name:"Hungary"},{id:98,name:"Iceland"},{id:99,name:"India"},{id:100,name:"Indonesia"},{id:101,name:"Iran"},{id:102,name:"Iraq"},{id:103,name:"Ireland"},{id:104,name:"Isle of Man"},{id:105,name:"Israel"},{id:106,name:"Italy"},{id:107,name:"Jamaica"},{id:108,name:"Japan"},{id:109,name:"Jersey"},{id:110,name:"Jordan"},{id:111,name:"Kazakhstan"},{id:112,name:"Kenya"},{id:113,name:"Kiribati"},{id:114,name:"Kuwait"},{id:115,name:"Kyrgyzstan"},{id:116,name:"Laos"},{id:117,name:"Latvia"},{id:118,name:"Lebanon"},{id:119,name:"Lesotho"},{id:120,name:"Liberia"},{id:121,name:"Libya"},{id:122,name:"Liechtenstein"},{id:123,name:"Lithuania"},{id:124,name:"Luxembourg"},{id:125,name:"Macau"},{id:126,name:"Macedonia"},{id:127,name:"Madagascar"},{id:128,name:"Malawi"},{id:129,name:"Malaysia"},{id:130,name:"Maldives"},{id:131,name:"Mali"},{id:132,name:"Malta"},{id:133,name:"Marshall Islands"},{id:134,name:"Martinique"},{id:135,name:"Mauritania"},{id:136,name:"Mauritius"},{id:137,name:"Mayotte"},{id:138,name:"Mexico"},{id:139,name:"Micronesia"},{id:140,name:"Moldova"},{id:141,name:"Monaco"},{id:142,name:"Mongolia"},{id:143,name:"Montenegro"},{id:144,name:"Montserrat"},{id:145,name:"Morocco"},{id:146,name:"Mozambique"},{id:147,name:"Namibia"},{id:148,name:"Nauru"},{id:149,name:"Nepal"},{id:150,name:"Netherlands"},{id:151,name:"Netherlands Antilles"},{id:152,name:"New Caledonia"},{id:153,name:"New Zealand"},{id:154,name:"Nicaragua"},{id:155,name:"Niger"},{id:156,name:"Nigeria"},{id:157,name:"Niue"},{id:158,name:"Norfolk Island"},{id:159,name:"North America"},{id:160,name:"North Korea"},{id:161,name:"Northern Mariana Islands"},{id:162,name:"Norway"},{id:163,name:"Oman"},{id:164,name:"Pakistan"},{id:165,name:"Palau"},{id:166,name:"Palestinian Territories"},{id:167,name:"Panama"},{id:168,name:"Papua New Guinea"},{id:169,name:"Paraguay"},{id:170,name:"Peru"},{id:171,name:"Philippines"},{id:172,name:"Pitcairn Islands"},{id:173,name:"Poland"},{id:174,name:"Portugal"},{id:175,name:"Puerto Rico"},{id:176,name:"Qatar"},{id:177,name:"Republic of the Congo"},{id:178,name:"Reunion"},{id:179,name:"Romania"},{id:180,name:"Russia"},{id:181,name:"Rwanda"},{id:182,name:"Saint Helena"},{id:183,name:"Saint Kitts and Nevis"},{id:184,name:"Saint Lucia"},{id:185,name:"Saint Pierre and Miquelon"},{id:186,name:"Saint Vincent and the Grenadines"},{id:187,name:"Samoa"},{id:188,name:"San Marino"},{id:189,name:"Sao Tome and Principe"},{id:190,name:"Saudi Arabia"},{id:191,name:"Senegal"},{id:192,name:"Serbia"},{id:193,name:"Seychelles"},{id:194,name:"Sierra Leone"},{id:195,name:"Singapore"},{id:196,name:"Slovakia"},{id:197,name:"Slovenia"},{id:198,name:"Solomon Islands"},{id:199,name:"Somalia"},{id:200,name:"South Africa"},{id:201,name:"South America"},{id:202,name:"South Korea"},{id:203,name:"Spain"},{id:204,name:"Sri Lanka"},{id:205,name:"Sudan"},{id:206,name:"Suriname"},{id:207,name:"Svalbard"},{id:208,name:"Swaziland"},{id:209,name:"Sweden"},{id:210,name:"Switzerland"},{id:211,name:"Syria"},{id:212,name:"Taiwan"},{id:213,name:"Tajikistan"},{id:214,name:"Tanzania"},{id:215,name:"Thailand"},{id:216,name:"Timor-Leste"},{id:217,name:"Togo"},{id:218,name:"Tokelau"},{id:219,name:"Tonga"},{id:220,name:"Trinidad and Tobago"},{id:221,name:"Tunisia"},{id:222,name:"Turkey"},{id:223,name:"Turkmenistan"},{id:224,name:"Turks and Caicos Islands"},{id:225,name:"Tuvalu"},{id:226,name:"Uganda"},{id:227,name:"Ukraine"},{id:228,name:"United Arab Emirates"},{id:229,name:"United Kingdom"},{id:230,name:"United States"},{id:231,name:"Uruguay"},{id:232,name:"Uzbekistan"},{id:233,name:"Vanuatu"},{id:234,name:"Vatican City"},{id:235,name:"Venezuela"},{id:236,name:"Vietnam"},{id:237,name:"Virgin Islands (British)"},{id:238,name:"Virgin Islands (US)"},{id:239,name:"Wallis and Futuna"},{id:240,name:"Western Sahara"},{id:241,name:"Yemen"},{id:242,name:"Zambia"},{id:243,name:"Zimbabwe"}]},fh5.pageData={currency:[{name:"U.S. Dollar",code:"USD"},{name:"Pound Sterling",code:"GBP",icon:"fa fa-gbp"},{name:"Euro",code:"EUR",icon:"fa fa-eur"},{name:"Australian Dollar",code:"AUD"},{name:"Brazilian Real",code:"BRL"},{name:"Canadian Dollar",code:"CAD"},{name:"Czech Koruna",code:"CZK"},{name:"Danish Krone",code:"DKK"},{name:"Hong Kong Dollar",code:"HKD"},{name:"Hungarian Forint",code:"HUF"},{name:"Israeli New Sheqel",code:"ILS"},{name:"Malaysian Ringgit",code:"MYR"},{name:"Mexican Peso",code:"MXN"},{name:"Norwegian Krone",code:"NOK"},{name:"New Zealand Dollar",code:"NZD"},{name:"Philippine Peso",code:"PHP"},{name:"Polish Zloty",code:"PLN"},{name:"Singapore Dollar",code:"SGD"},{name:"Swedish Krona",code:"SEK"},{name:"Swiss Franc",code:"CHF"},{name:"Thai Baht",code:"THB"}],category:[{id:1,name:"Animals & Pets",shortName:"Animals",secondaryCategory:[{id:1,name:"Birds"},{id:2,name:"Dogs & Cats"},{id:3,name:"Farming"},{id:4,name:"Horses"},{id:5,name:"Wildlife"}]},{id:3,name:"Art & Photography",shortName:"Art",secondaryCategory:[{id:9,name:"Art"},{id:10,name:"Art Instruction"},{id:11,name:"Graphic Arts"},{id:12,name:"Photography"},{id:13,name:"Photography Titles"},{id:14,name:"Skin Art"}]},{id:9,name:"Cooking, Food & Beverage",shortName:"Food",secondaryCategory:[{id:41,name:"Beer, Wine, Spirits"},{id:42,name:"Cooking & Food"}]},{id:12,name:"Entertainment",shortName:"Entertainment",secondaryCategory:[{id:52,name:"Celebrity"},{id:53,name:"Entertainment"},{id:54,name:"Gaming"},{id:55,name:"Music Entertainment"},{id:56,name:"TV & Movie"}]},{id:14,name:"Fashion & Style",shortName:"Fashion",secondaryCategory:[{id:61,name:"Bridal"},{id:62,name:"Fashion"},{id:63,name:"Hairstyle"},{id:64,name:"Teen Style"}]},{id:15,name:"Health & Fitness",shortName:"Health",secondaryCategory:[{id:65,name:"Diet & Nutrition"},{id:66,name:"Fitness"},{id:67,name:"Health"},{id:68,name:"Health Conditions"},{id:69,name:"Healthy Living"}]},{id:18,name:"Lifestyle",shortName:"Lifestyle",secondaryCategory:[{id:76,name:"Adventure"},{id:77,name:"Card Playing"},{id:78,name:"Holiday"},{id:79,name:"International"},{id:80,name:"Lifestyle & Leisure"},{id:81,name:"Real Estate & Home Building"},{id:82,name:"Recreation"},{id:83,name:"Travel"},{id:84,name:"Travel & Vacations"}]},{id:26,name:"Sports & Recreation",shortName:"Sports",secondaryCategory:[{id:113,name:"Aviation"},{id:114,name:"Boating"},{id:115,name:"Football"},{id:116,name:"Hunting & Fishing"},{id:117,name:"Sports"}]}],errorMap:{0:"Unexpected error.",1:"Unexpected error.",2:"Unexpected error.",3:"Invalid parameters.",4:"PDF file was corrupted.",5:"PDF file was encrypted.",6:"Failed to load the PDF.",7:"Failed to extract the table of contents of the PDF.",8:"Failed to extract links of the PDF.",9:"Failed to build search information of the PDF.",10:"Failed to import the PDF.",98:"Failed to clone the PDF.",99:"Server error",100:"Failed to convert"},templates:[{name:"Metro",version:"Free"},{name:"Handy",version:"Free"},{name:"Active",version:"Free"},{name:"Classical",version:"Free"},{name:"Clear",version:"Free"},{name:"Popular",version:"Free"},{name:"Facile",version:"Pro"},{name:"Float",version:"Pro"},{name:"Fresh",version:"Pro"},{name:"Gorgeous",version:"Pro"},{name:"Lively",version:"Pro"},{name:"Neat",version:"Pro"},{name:"Pure",version:"Pro"},{name:"Simple",version:"Pro"},{name:"Specific",version:"Pro"},{name:"Minimalist",version:"Pro"},{name:"Assort",version:"Pro"},{name:"Courts",version:"Pro"},{name:"Envato",version:"Pro"},{name:"Novelty",version:"Pro"},{name:"Primo",version:"Pro"},{name:"Shrink",version:"Pro"}],themes:["Default","BottleGreen","LimeGreen","SkyBlue","LightBlue","LightCoffee","LightGray","Beige","Wood","BrownPaper","PaleBrown","Purple","DarkBlue","Silvery","DarkClouds","Dazzle","Florid","Gray","Green","LandScape","Neat-Blue","Unreal","WaterDrop","Wall-line"],scenes:["None","PetalsDancing","FallenLeaves","Snow","SlowBubble","FastBubble","LightRain","HeavyRain","Firefly","SpaceShip","SpaceTravel","Twinkle","Meteor","Sunshine","Cloud","SunCloud","Balloon","Moon"],scenesLabel:["None","Petals Dancing","Fallen Leaves","Snow","Bubble","Rising Bubble","Light Rain","Heavy Rain","Firefly","Space Ship","Space Travel","Twinkling stars","Meteor","Sunshine","Cloud","SunCloud","Air Balloon","Moon"],types:["pdf"],tips:{ImageFormats:"Supported formats: JPG, PNG",ImageFormatsError:"* Only jpg or png files are allowed.",UnexpectedError:"* Unexpected error, please retry.",UnexpectedError2:"Unexpected error, please retry.",VerificationCodeError:"Verificate failed, please retry.",ChineseError:"* File Name Error. Try using English name instead.",AudioFormatsError:"* Only mp3 file is allowed.",ConnectionError:"<i class='icon icon-exclamation-sign'></i> Connection error, please retry.",ConnectionError2:"Connection error, please retry.",UploadFormatError:"File is not an allowed file type! Only support PDF file.",UploadSizeError:"Too large! File size exceeds 300 MB.",Error:"Oops! Some errors might occur! <br />Please try to empty your web browser cache and refresh the page."},languages:["Arabic","Basque","Chinese","Czech","Dutch","English","French","German","Greek","Hebrew","Italian","Japanese","Korean","Portuguese","Russian","Spanish"],upgrade:{PRO:{items:["Selling Publications","Custom Logo/Branding","Password Protection","Output HTML or Zip publications to local PC","Upload files from cloud and file storage services","Search Engine Optimization (Text Version)","No related magazines in the viewer, just yours"],icon:"<a href='/fliphtml5-pricing.php' target='_blank'><span class='button button-pill button-flat-action'>PRO</span></a>"},GOLD:{items:["Image Conversion","Access Statistics","5+ Online Templates","100G Storage","Tracking with Google Analytics"],icon:"<a href='/fliphtml5-pricing.php' target='_blank'><span class='button button-pill button-flat-highlight'>GOLD</span></a>"},PLATINUM:{items:["Animation Editor","Page Editor","Custom Domain","Batch Conversion","Office Conversion","Embed link, images, video, audio etc"],icon:"<a href='/fliphtml5-pricing.php' target='_blank'><span class='button button-pill button-flat'>PLATINUM</span></a>"},ENTERPRISE:{items:["Make Native Android App","Animation Editor","Page Editor","Batch Convert","Office Conversion","Embed link, images, video, audio etc"],icon:"<a href='/fliphtml5-pricing.php' target='_blank'><span class='button button-pill button-flat-royal'>ENTERPRISE</span></a>"},KeepPrivate:{version:"PRO",title:"Keep private on FlipHTML5 Cloud",subTitle:"Embed & share your flipbook only with your own members",desc:"Your publications could not be accessed by the public on FlipHTML5 Cloud, but still be functional on your website by using the embed code.",imgSrc:"/images/upgrade/pro.jpg",guidelines:["Unaccessible to the public on FlipHTML5 Cloud, but still can be embedded into your own web and viewed by your readers.","This functioin is only available to Premium users."]},Interactive:{version:"PLATINUM",title:"Interactive rich multimedia elements",subTitle:"Create online digital publications with interactive multimedia",desc:"Add link, audio, video, animation and more multimedia to your flipbook. <a class='cc-blue-link-2' target='_blank' href='/desktop-version/'>Details</a>",imgSrc:"/images/upgrade/gold.jpg",guidelines:["Unaccessible to the public on FlipHTML5 Cloud, but still can be embedded into your own web and viewed by your readers.","This functioin is only available to Premium users."]},StorageTable:{rowName:"Storage",rowItems:["20G","50G","100G","Unlimited","Unlimited"]},BookcaseTable:{rowName:"Amounts",rowItems:["1","10","30","Unlimited","Unlimited"]},DateRangeTable:{rowName:"Access Statistics",rowItems:["X","3 Months","6 Months","1 Year","2 Years"]},UploadsTable:{rowName:"Uploads / Day",rowItems:["5","Unlimited","Unlimited","Unlimited","Unlimited"]},KeepPrivateOnTheInternet:{version:"PRO",title:"Private",subTitle:"Only authorized users can read your book",desc:"Your publications can only be accessed by authorized users, simply by entering the Authorization ID .",imgSrc:"/images/upgrade/KeepPrivateOnTheInternet.png"},Logo:{version:"PRO",title:"Custom logo",subTitle:"Set your own flipbook logo or not show any logo",desc:"upload your own logo to replace the default logo, which will be displayed on the left of the flipbook toolbar.",imgSrc:"/images/upgrade/pro.jpg"},Template:{version:"PRO",title:"Upgrade to Pro to use this template",subTitle:"",desc:"This template is only available to Pro or above users. With this upgrade, you can use all the templates provided by FlipHTML5.",imgSrc:"/images/upgrade/pro.jpg"},Download:{version:"PRO",title:"Download PDF file",subTitle:"The authority to download PDF file",desc:"Only PRO and above users have sufficient authority to download the original pdf file or set permission for readers to download it.",imgSrc:"/images/download.png"},DownloadZip:{version:"PRO",title:"Download ZIP, EXE & MAC APP files",subTitle:"The authority to download ZIP, EXE & MAC APP file",desc:"Only Pro and above users have sufficient authority to download the book as ZIP, EXE & MAC APP formats.",imgSrc:"/images/download.png"},Label:{version:"PRO",title:"Book Label",subTitle:"Pick a particular label for your publications",desc:'Only premium users have sufficient authority to label your publications with "New", "Hot", or "Featured".',imgSrc:"/images/upgrade/label.png"},LoadingLogo:{version:"PRO",title:"Loading logo",subTitle:"",desc:"Upload your company logo to the loading page to brand your book.",imgSrc:"/images/upgrade/pro.jpg"},AboutLogo:{version:"PRO",title:"Custom about logo",subTitle:"Set your own company logo",desc:"The logo to show when the About Button is clicked.",imgSrc:"/images/upgrade/pro.jpg"},BookcasePassword:{version:"PRO",title:"Bookcase Password",subTitle:"Protect your bookcase with a password",desc:"Readers are required to enter a password to access your bookcase.",imgSrc:"/images/upgrade/bookcase-password.png"},BookcaseInvisible:{version:"PRO",title:"Bookcase Invisible",subTitle:"Disable your bookcase",desc:"If you want to stop your bookcase without deleting it, just set it to Invisible, and then it won't be accessed by anybody.",imgSrc:"/images/upgrade/bookcase-invisible.png"},CloudUpload:{version:"PRO",title:"Cloud Upload",subTitle:"Upload files from cloud and file storage services",desc:"Only PRO and above users have sufficient authority to add files from Google Drive, Dropbox or input the link of a PDF file to publish the book.",imgSrc:"/images/upgrade/cloud-upload.png"},SEO:{version:"PRO",title:"SEO Setting",subTitle:"Edit the text version of your publications",desc:"Only PRO and above users have sufficient authority to control how Search Engines index your digital publications.",imgSrc:"/images/upgrade/seo.png"},BookcaseLogo:{version:"PRO",title:"Custom Bookcase Logo",subTitle:"Set your own bookcase logo or not show any logo",desc:"upload your own logo to replace the default logo, which will be displayed on the left of the bookcase bottom bar.",imgSrc:"/images/upgrade/bookcase-logo.png"},CustomDomain:{version:"PLATINUM",title:"Custom Domain",subTitle:"Change the domain of your publication from fliphtml5.com to yourdomain.com",desc:"Serve your publications at a custom domain that you own (yourdomain.com) or at specific subdomains of that domain (books.yourdomain.com). <br />For example, you can change the book link from <span class='cc-underline'>https://fliphtml5.com/suwl/abhd</span> to <span class='cc-underline'>http://yourdomain.com/books/abhd</span>.",imgSrc:"/images/upgrade/custom-domain.jpg"},Selling:{version:"PRO",title:"Selling Publications",subTitle:"Benefit from your digital publications",desc:"Start to sell your digital publications online and get benefit. Profit will be transferred directly into your Paypal account and we will not charge any fee.",imgSrc:"/images/upgrade/selling.png"},ToBeVip:{version:"PLATINUM",title:"Batch Conversion",subTitle:"Create online digital publications in batches at a time",desc:"Only PLATINUM and above users have sufficient authority to upload PDF files in batches and convert them to digital publications automatically.",imgSrc:"/images/upgrade/batchUploadVip.png",guidelines:["Unaccessible to the public on FlipHTML5 Cloud, but still can be embedded into your own web and viewed by your readers.","This functioin is only available to Premium users."]},ReUpload:{version:"PRO",title:"Reupload new PDF file online",subTitle:"",desc:"Update the book with new pdf file without changing the previous book url",imgSrc:"/images/upgrade/pro.jpg"},FreeBookcaseLimit:{version:"PRO",title:"Create new bookcase",subTitle:"Create new bookcases to display your books ",desc:"Our system limits the amount of bookcases you can create. Different plans have different bookcases limits."},ProBookcaseLimit:{version:"PLATINUM",title:"Create new bookcase",subTitle:"Create new bookcases to display your books ",desc:"Our system limits the amount of bookcases you can create. Different plans have different bookcases limits."},GoldBookcaseLimit:{version:"PLATINUM",title:"Create new bookcase",subTitle:"Create new bookcases to display your books ",desc:"Our system limits the amount of bookcases you can create. Different plans have different bookcases limits."},StatisticsLimit:{version:"PRO",title:"Access Statistics",subTitle:"",desc:"Track the book statistics and see all-time performances.",imgSrc:"/images/upgrade/statistics.png"},FreeDateRangeLimit:{version:"PRO",title:"Access Statistics",subTitle:"Track the book statistics and see all-time performances.",desc:"Different plans allow users to access the book statistics at diferent times. "},ProDateRangeLimit:{version:"PLATINUM",title:"Access Statistics",subTitle:"Track the book statistics and see all-time performances.",desc:"Different plans allow users to access the book statistics at diferent times. "},GoldDateRangeLimit:{version:"PLATINUM",title:"Access Statistics",subTitle:"Track the book statistics and see all-time performances.",desc:"Different plans allow users to access the book statistics at diferent times. "},PlatinumDateRangeLimit:{version:"ENTERPRISE",title:"Access Statistics",subTitle:"Track the book statistics and see all-time performances.",desc:"Different plans allow users to access the book statistics at diferent times. "},GoogleID:{version:"PRO",title:"Google Analytics ID",subTitle:"",desc:"Track your books statistics with Google Analytics ID",imgSrc:"/images/upgrade/pro.jpg"},DownloadBtn:{version:"PRO",title:"Download Button",subTitle:"",desc:"Make it possible for users to download your PDF file or Book file.",imgSrc:"/images/upgrade/pro.jpg"},AnnotationBtn:{version:"PRO",title:"Annotation button",subTitle:"",desc:"With annotations you can layer text, highlight, note and images over your book. They help you enrich the book experience by adding information, interactivity and engagement.",imgSrc:"/images/upgrade/pro.jpg"},ShowAboutBtn:{version:"PRO",title:"About Button",subTitle:"",desc:"Adding additional information about your company or yourself.",imgSrc:"/images/upgrade/pro.jpg"},FreeAddNewBook:{version:"PRO",title:"FlipHTML5 Cloud Storage",subTitle:"",desc:"Our system limits the amount of storage you can use to upload books. Different plans have different storage limits."},ProAddNewBook:{version:"PLATINUM",title:"FlipHTML5 Cloud Storage",subTitle:"",desc:"Our system limits the amount of storage you can use to upload books. Different plans have different storage limits."},GoldAddNewBook:{version:"PLATINUM",title:"FlipHTML5 Cloud Storage",subTitle:"",desc:"Our system limits the amount of storage you can use to upload books. Different plans have different storage limits."},UploadLimit:{version:"PRO",title:"FlipHTML5 Uploads Limit",subTitle:"",desc:"Different plans allow you to upload different amounts of books each day."},PdfCheckTips:{version:"PRO",title:"Free users can not uncheck the PDF option.",subTitle:"",desc:"If you do not want to readers to download your PDF file, please upgrade to PRO.",imgSrc:"/images/upgrade/pro.jpg"},BounceCheckTips:{version:"PLATINUM",title:"Activate Download Link for readers",subTitle:"",desc:"Only Platinum and Enterprise users are allowed to activate Download Link for readers to download the book.",imgSrc:"/images/upgrade/pro.jpg"},AllowSearchIndex:{version:"PLATINUM",title:"Not indexed by Google Search Engine",subTitle:"",desc:"Only Platinum and above users are allowed to control whether Google Search Engine index your book or not.",imgSrc:"/images/upgrade/allowSearchIndex.png"},BookcaseAllowSearchIndex:{version:"PLATINUM",title:"Not indexed by Google Search Engine",subTitle:"",desc:"Only Platinum and above users are allowed to control whether Google Search Engine index your bookcase or not.",imgSrc:"/images/upgrade/allowSearchIndex.png"},PageEditorLimit:{version:"PLATINUM",title:"Online Page Editor",subTitle:"Create online digital publications with interactive multimedia",desc:"Add link, image, video, audio and more multimedia to your flipbook. <a class='cc-blue-link-2' target='_blank' href='/desktop-version/'>Details</a>",imgSrc:"/images/upgrade/gold.jpg",guidelines:["Unaccessible to the public on FlipHTML5 Cloud, but still can be embedded into your own web and viewed by your readers.","This functioin is only available to Premium users."]},ExportCSVLimit:{version:"PRO",title:"Export Book Data.",subTitle:"",desc:"Export the list of all book urls in a CSV file without having to copy them one by one at a time.",imgSrc:"/images/upgrade/export-book-url.png"},SaveThemeLimit:{version:"PRO",title:"Save the theme settings to apply to other books.",subTitle:"",desc:"Users can save the theme settings under Design section and then apply it to other books. ",imgSrc:"/images/upgrade/pro.jpg"}},bookConfig:{FlipSound:"No",QRCode:"Hide",appLogoIcon:"/booklogo.png",appLogoLinkURL:"fliphtml5.com",HomeURL:"",appLogoOpenWindow:"Blank",bookTitle:"FLIPBOOK",bookDescription:"",toolbarColor:"#181818",iconColor:"#EEEEEE",loadingPicture:"",loadingCaptionColor:"#eeeeee",loadingBackground:"#323232",logoHeight:42,logoTop:0,logoPadding:0,HomeButtonVisible:"Hide",ShareButtonVisible:"Show",ThumbnailsButtonVisible:"Show",thumbnailAlpha:70,ZoomButtonVisible:"Show",FullscreenButtonVisible:"Show",TableOfContentButtonVisible:"Show",SearchButtonVisible:"Show",leastSearchChar:2,PrintButtonVisible:"Show",printWatermarkFile:"",BookMarkButtonVisible:"Hide",BackgroundSoundButtonVisible:"Hide",BackgroundSoundURL:"",BackgroundSoundLoop:-1,HelpButtonVisible:"Hide",helpContentFileURL:"",helpWidth:400,helpHeight:450,showHelpContentAtFirst:"No",aboutButtonVisible:"Show",aboutContactInfoTxt:"",AutoPlayButtonVisible:"Show",autoPlayAutoStart:"No",SlideshowAutoPlay:!1,autoPlayDuration:3,SlideshowPlayInterval:5,autoPlayLoopCount:1,minZoomWidth:403,minZoomHeight:518,mouseWheelFlip:"yes",DownloadButtonVisible:"Hide",DownloadURL:"",UserInforSetting:"",bgBeginColor:"#323232",bgEndColor:"#323232",bgMRotation:90,backGroundImgURL:"",LeftShadowWidth:100,LeftShadowAlpha:1,RightShadowWidth:40,RightShadowAlpha:1,pageBackgroundColor:"#FFFFFF",flipshortcutbutton:"Show",OriginPageIndex:1,RightToLeft:"No",flippingTime:.6,retainBookCenter:"Yes",FlipStyle:"Flip",totalPagesCaption:"",pageNumberCaption:"",topMargin:10,bottomMargin:10,leftMargin:10,rightMargin:10,LinkDownColor:"#0000FF",LinkAlpha:.4,OpenWindow:"Blank",googleAnalyticsID:"",UIBaseURL:"true"==fh5.debug?"//t-public.flipbuilder.com/book/template/Metro/":"//static.fliphtml5.com/book/template/Metro/",language:"English",AboutAddress:"",AboutAuthor:"FlipHTML5",AboutEmail:"support@fliphtml5.com",AboutMobile:"",AboutWebsite:"https://fliphtml5.com",AboutDescription:"FLIP HTML5 is a Interactive html5 digital publishing platform that makes it easy to create interactive digital publications, including magazines, catalogs, newspapers, books, and more online. Create HTML5 flipbook from PDF to view on iPhone, iPad and Android devices.",totalPageCount:6,largePageWidth:566.929,largePageHeight:595.28,normalPath:"files/large/",largePath:"files/large/",thumbPath:"files/thumb/",VideoButtonVisible:"Hide",SlideshowButtonVisible:"Hide",addPaperCoil:"No",AnnotationButtonVisible:"Hide",CompanyLogoFile:"/aboutlogo.png",addPaperCoil:"No",bleedAreaLeft:"0%",bleedAreaRight:"0%",bleedAreaTop:"0%",bleedAreaBottom:"0%",HardPageEnable:"No",HardInnerPageEnable:"No",borderColor:"#562e0b",BindingType:"side",hardCoverBorderWidth:"8",outerCoverBorder:"Yes",cornerRound:"8",coverTexture:"none",iconFontColor:"#eeeeee",formBackgroundColor:"#181818",formFontColor:"#eeeeee",backgroundOpacity:100,autoDoublePage:"Yes",searchKeywordFontColor:"#FFB000",backgroundPosition:"Stretch",CurlingPageCorner:"Yes",updatePageURL:"True",isTheBookOpen:"No",FlipDirection:0,InstructionsButtonVisible:"Hide",showInstructionOnStart:"No",showThicknessOnMobile:"No",highDefinitionConversion:"No",pageNumberCaption:"",pageNumColor:"#111111",backgroundScene:"None",ShowTopLeftShadow:"Yes",maxWidthToSmallMode:400,maxHeightToSmallMode:300,hideMiniFullscreen:"No",isStopMouseMenu:"Yes",haveAdSense:"No",adSenseWidth:200,adSenseHeight:200,adSenseLeft:50,adSenseTop:50,adSenseClientId:"",SelectTextButtonVisible:"Hide",leftRightPnlShowOption:"none",ToolBarAlpha:1,enablePageBack:"Hide",updateURLForPage:"true"}};
var userAgent=navigator.userAgent.toLowerCase();jQuery.browser={version:(userAgent.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[])[1],safari:/webkit/.test(userAgent),opera:/opera/.test(userAgent),msie:/msie/.test(userAgent)&&!/opera/.test(userAgent),mozilla:/mozilla/.test(userAgent)&&!/(compatible|webkit)/.test(userAgent)};var isInDebugMode=!1,utils={};$(document).ready(function(){isInDebugMode&&(window.logPanel=new LogPanel)}),"function"!=typeof Array.prototype.remove&&(Array.prototype.remove=function(a){return isNaN(a)||a>this.length?!1:this.splice(a,1)[0]}),utils={supportTouch:"ontouchstart"in window,log:function(a){isInDebugMode&&window.logPanel.log(a)},addMask:function(a,b){var c={hasLoading:!0,hasAnimate:!1,text:"",fontSize:"16px",left:0,top:0,cursor:"wait",backgroundColor:"rgba(255, 255, 255, 0.5)",text:"Loading...",fontWeight:"normal",color:"inherit"},d=$.extend({},c,b),e=$("<div class='cc-mask cc-user-select-none'></div>").css({cursor:d.cursor,backgroundColor:d.backgroundColor}),f=$("<div class='cc-mask-text cc-user-select-none'>"+d.text+"</div>"),g=$("<div class='cc-mask-content'></div>").appendTo(e);if(d.hasLoading&&g.append($("<div class='cc-loading cc-user-select-none'></div>")),f.css({fontSize:d.fontSize,fontWeight:d.fontWeight,color:d.color}),g.append(f),d.hasAnimate){var h=f.text().replace("...",""),i=".",j=null;j=setInterval(function(){return 0===a.find(f).length?void clearInterval(j):(f.text(h+i),i+=".",void(4===i.length&&(i=".")))},1e3)}e.appendTo(a),g.css({display:"none",left:(a.outerWidth()-g.outerWidth())/2,top:(a.outerHeight()-g.outerHeight())/2}).fadeIn(),a.ccMask=e},removeMask:function(a,b,c){var d=a.ccMask;"undefined"==typeof c&&(c=400),d&&d.length>0&&d.fadeOut(c,function(){setTimeout(function(){d.remove(),b&&b()},50)})},errorMask:function(a,b){var c=this,d=a.ccMask.empty().css({cursor:"default"}),e=$("<div class='cc-server-error alert alert-error'>"+fh5.pageData.tips.Error+"</div>").appendTo(d),f=$("<div class='cc-remove-mask-button'><span class='icon icon-remove'></span></div>").appendTo(e);e.css({top:(a.height()-e.outerHeight())/2,left:(a.width()-e.outerWidth())/2}),f.on("click",function(){c.removeMask(a)}),b&&c.log("server error: "+b)},hasMask:function(a){return a.ccMask&&a.ccMask.length>0},addSpin:function(a,b,c){var d=a.css("position"),b=b||"0",e=$("<div class='cc-spin-mask'></div>"),f=$("<div class='sh5-table'></div>"),g=$("<div class='sh5-table-centered'></div>"),h=$("<i class='fa fa-spinner fa-spin-2x'></i>");if(e.append(f.append(g.append(h))),"absolute"!==d&&"relative"!==d&&a.css("position","relative"),e.addClass("model-"+b),e.appendTo(a),a.ccSpin=e,c){var i=$("<p class='cc-spin-mask-msg-container'></p>"),j=$("<span class='cc-spin-mask-msg'>"+c+"</span>");i.append(h).append(j).appendTo(g)}},errorSpin:function(a,b){var c=a.css("position"),b=b||"0",d=$("<div class='cc-spin-mask'></div>"),e=$("<div class='sh5-table'></div>"),f=$("<div class='sh5-table-centered'></div>"),g=$("<i class='fa fa-spinner fa-spin-2x'></i>");if(d.append(e.append(f.append(g))),"absolute"!==c&&"relative"!==c&&a.css("position","relative"),d.addClass("model-"+b),d.appendTo(a),a.ccSpin=d,msg){var h=$("<p class='cc-spin-mask-msg-container'></p>"),i=$("<span class='cc-spin-mask-msg'>"+msg+"</span>");h.append(g).append(i).appendTo(f)}},removeSpin:function(a){var b=a.ccSpin;b&&b.length>0&&b.remove()},showMe:function(a,b,c){"undefined"==typeof c&&(c=80),"undefined"==typeof b&&(b=200),$("html,body").stop().animate({scrollTop:a.offset().top-c},b)},fixedWidth:function(a,b,c,d){var e=this,f=new Image;a.addClass("cc-img-loading"),f.onload=function(){var g=f.width/f.height,h=c/g;h>d?e.autoFit(a,b):(b.css({width:c,height:h,marginLeft:(a.width()-c)/2,marginTop:(a.height()-h)/2}),setTimeout(function(){b.fadeIn()},50),a.removeClass("cc-img-loading"))},f.onerror=function(){setTimeout(function(){b.fadeIn()},50),a.removeClass("cc-img-loading")},f.src=b.attr("src")},loadImg:function(a,b){var c=0,d=new Image,e=$("<i class='fa fa-spinner cc-spin-loading-40 fa-spin'></i>").appendTo(a);d.onload=function(){e.remove(),b.fadeIn()},d.onerror=function(){if(0==c){var d=b.attr("src");switch(shotType=d.substr(d.lastIndexOf(".")).toLowerCase()){case".png":d=d.substr(0,d.lastIndexOf("."))+".jpg";break;case".jpg":d=d.substr(0,d.lastIndexOf("."))+".png"}b.attr("src",d);var f=new Image;f.onload=function(){e.remove(),b.fadeIn()},f.onerror=function(){e.remove(),a.css("background","#eee")},f.src=d,c++}},d.src=b.attr("src")},loadImage:function(a,b){var c=new Image;c.onload=function(){b()},c.onerror=function(){},c.src=a},autoFit:function(a,b,c,d){var e=new Image;a.addClass("cc-img-loading"),e.onload=function(){var f=a.height(),g=a.width(),h=e.width/e.height,i=f,j=f*h;j>a.width()&&(j=g,i=g/h);var k=(a.width()-j)/2,l=(a.height()-i)/2;d&&1==d.length?(d.css({width:j,height:i,marginLeft:k,marginTop:l}),b.css({width:"100%",height:"100%"})):b.css({width:j,height:i,marginLeft:k,marginTop:l}),setTimeout(function(){b.fadeIn(),a.removeClass("cc-img-loading"),c&&c(k)},50)},e.onerror=function(){var e=$("<div></div>"),f=a.height(),g=a.width(),h=.75,i=f,j=f*h;j>a.width()&&(j=g,i=g/h);var k=(a.width()-j)/2,l=(a.height()-i)/2;e.css({boxShadow:b.css("box-shadow"),cursor:"pointer",background:"#eee"}),d&&1==d.length?(d.css({width:j,height:i,marginLeft:k,marginTop:l}),e.css({width:"100%",height:"100%"})):e.css({width:j,height:i,marginLeft:k,marginTop:l}),b.after(e),a.removeClass("cc-img-loading"),c&&c(k)},e.src=b.attr("src")},fullFill:function(a,b,c){var d=new Image;a.addClass("cc-img-loading"),d.onload=function(){var e=a.height()+1,f=a.width()+1,g=f/e,h=d.width/d.height,i=f,j=f/h;h>g?(j=e,i=e*h):g>h&&(i=f,j=f/h),b.css({position:"absolute",width:i,height:j,left:(a.width()-i)/2,top:(a.height()-j)/2}),setTimeout(function(){b.fadeIn(),a.removeClass("cc-img-loading"),c&&c()},50)},d.onerror=function(){setTimeout(function(){b.fadeIn()},50),a.removeClass("cc-img-loading"),c&&c()},d.src=b.attr("src")},autoFitBottom:function(a,b,c){var d=new Image;a.addClass("cc-img-loading"),d.onload=function(){var e=a.height(),f=a.width(),g=d.width/d.height,h=e,i=e*g;i>a.width()&&(i=f,h=f/g),b.css({position:"absolute",display:"block",width:i,height:h,left:(a.width()-i)/2,top:"auto",bottom:0}),setTimeout(function(){b.fadeIn(),a.removeClass("cc-img-loading"),c&&c()},50)},d.onerror=function(){setTimeout(function(){b.fadeIn()},50),a.removeClass("cc-img-loading"),c&&c()},d.src=b.attr("src")},autoFitPosition:function(a,b,c,d,e,f){var g=new Image,h=$("<i class='fa fa-spinner cc-spin-loading-40 fa-spin'></i>");a.append(h),g.onload=function(){var e=a.height(),i=a.width(),j=g.width/g.height,k=e,l=e*j;l>a.width()&&(l=i,k=i/j),(c||d)&&a.css({width:l,height:k,left:"left"==c?0:"right"==c?"auto":(a.width()-l)/2,right:"right"==c?0:"auto",top:"top"==d?0:"bottom"==d?"auto":(a.height()-k)/2,bottom:"bottom"==d?0:"auto"}),b.css({position:"absolute",width:l,height:k,left:"left"==c?0:"right"==c?"auto":(a.width()-l)/2,right:"right"==c?0:"auto",top:"top"==d?0:"bottom"==d?"auto":(a.height()-k)/2,bottom:"bottom"==d?0:"auto"}),setTimeout(function(){b.fadeIn(),h.remove(),f&&f()},50)},g.onerror=function(){b.hide().remove(),h.remove(),a.css({backgroundColor:e?e:"#fff"}),f&&f()},g.src=b.attr("src")},fixedWidthAutoHeight:function(a,b){var c=new Image;a.addClass("cc-img-loading"),c.onload=function(){var d=a.width(),e=c.width/c.height,f=d/e;b.css({width:d,height:f}),setTimeout(function(){b.fadeIn()},50),a.removeClass("cc-img-loading")},c.onerror=function(){setTimeout(function(){b.fadeIn()},50),a.removeClass("cc-img-loading")},c.src=b.attr("src")},confirmAjax:function(a){var b={title:"",desc:"",yesCallback:null,noCallback:null,btnYesText:"",btnNoText:"",content:""};a=$.extend({},b,a);var c=new FixedLightBox(a.title,a.desc,"0",{hasBtns:!0,hasPadding:!0});if(a.btnYesText&&c.getSaveBtn().text(a.btnYesText),a.btnNoText&&c.getCancelBtn().text(a.btnNoText),a.content){var d=$("<div style='text-align:left; padding: 20px;'>"+a.content+"</div>");c.getPanel().append(d)}c.launch(),c.getSaveBtn().on("click",function(){a.yesCallback&&a.yesCallback(c)}),c.getCancelBtn().on("click",function(){a.noCallback&&a.noCallback()})},confirm:function(a,b,c,d,e){var f=$("<ul class='cc-light-box-buttons'></ul> "),g=$("<li class='button-pure button-pure-green'>Yes</li>"),h=$("<li class='button-pure'>  No</li>"),i=new LightBox(a,b,480);e&&(g.removeClass("button-pure-green"),h.addClass("button-pure-green")),i.box.append(f.append(g).append(h)),i.launch(),g.on("click",function(){c(),i.cancel()}),h.on("click",function(){d&&d(),i.cancel()})},saveConfirm:function(a,b,c,d,e){var f=$("<ul class='cc-light-box-buttons'></ul> "),g=$("<li class='button-pure button-pure-green'>Yes</li>"),h=$("<li class='button-pure'>  No</li>"),i=$("<div class='button-pure'>Cancel</div>"),j=new LightBox(a,b,480);j.box.append(f.append(g).append(h).append(i)),j.launch(),g.on("click",function(){c&&c(),j.cancel()}),h.on("click",function(){d&&d(),j.cancel()}),i.on("click",function(){e&&e(),j.cancel()})},fixedConfirm:function(a,b,c,d,e){var f=new FixedLightBox(a,"","",{hasBtns:!0}),g=f.getSaveBtn().html("Yes"),h=f.getCancelBtn().html("No"),i=f.getTopCancelBtn();return f.getPanel().append("<div class='hf-lightbox-confirm-desc'>"+b+"</div>"),e&&(g.removeClass("button-pure-green"),h.addClass("button-pure-green")),f.launch(),g.on("click",function(){c(),f.cancel()}),h.add(i).on("click",function(){d&&d(),f.cancel()}),f},launchNote:function(a){new FixedLightBox("","","0").launchNote(a).launch()},launchError:function(a){new FixedLightBox("","","0").launchError(a).launch()},popUp:function(a,b,c,d){var e=$("<ul class='cc-light-box-buttons'></ul> "),f=$("<li class='button-pure'>Close</li>"),g=new LightBox(a,b,c);g.box.append(d).append(e.append(f)),g.launch(),f.on("click",function(){g.cancel()})},alert:function(a,b){new FixedLightBox(a,"","0").launchNote(b).launch()},max2:function(a){return Math.max.apply({},a)},min2:function(a){return Math.min.apply({},a)},remove:function(a,b,c){"undefined"==typeof b&&(b=400),$("html, body").animate({scrollTop:"-="+a.height()},b),a.slideUp(b,function(){a.remove(),c&&c()})},validateEmail:function(a){var b="",a=a.trim();return""===a?b="* Please enter your email address.":a.match(/^\w+([-\.\']\w+)*@\w+([\.-]\w+)*\.\w{2,20}$/)?null!==a.match(/[‘’"”“ 　]/)&&(b="* Email contains invalid characters."):b="* Invalid email address.",b},validatePassword:function(a){var b="",a=a.trim();return""===a?b="* Please enter your password.":a.length<6||a.length>20?b="* Password must be 6-20 characters.":null!==a.match(/['‘’"”“ 　]/)&&(b="* Password contains invalid characters."),b},validateCode:function(a){var b="",a=a.trim();return""===a?b="* Please enter the code.":a.match(/^[A-Za-z0-9]+$/)||(b="* Incorrect verification code."),b},validate:function(a,b,c,d,e,f,g){var h,i,j=b.val();switch(f){case"!":i="<i class='icon icon-exclamation-sign'></i> ";break;default:i="* "}switch(a){case"email":j=j.trim();var k=/\./g,l=/_/g,m=j.slice(0,j.lastIndexOf("@")),n=m.match(k)?m.match(k).length:0,o=m.match(l)?m.match(l).length:0;""===j?h="Please enter your email address.":j.match(/^\w+([-\.\']\w+)*@\w+([\.-]\w+)*\.\w{2,10}$/)?null!==j.match(/[‘’"”“ 　]/)?h="Email contains invalid characters.":(n>3||o>3)&&(h="Error."):h="Invalid email address.";break;case"password":""===j?h="Please enter your password.":j.length<6||j.length>20?h="Password must be 6-20 characters.":null!==j.match(/['‘’"”“ 　]/)&&(h="Password contains invalid characters.");break;case"repassword":j!==e&&(h="Inconsistent password.");break;case"signUpTermsOfService":b.is(":checked")||(h="Please accept our terms of service.");break;case"verificationCode":j=j.trim(),""==j&&(h="Please enter the verification code."),""==j||j.match(/^[A-Za-z0-9]+$/)||(h="Incorrect verification code.");break;case"text":j=j.trim(),""===j&&(h="Required");break;case"name":j=j.trim(),""===j&&(h="Please enter your name.");break;case"number":j=j.trim(),""===j?h="Required":isNaN(j)&&(h="Please enter a number.");break;case"positiveNumber":j=j.trim(),""===j?h="Required":isNaN(j)?h="Please enter a number.":parseFloat(j)<0&&(h="Please enter a positive number.")}return h?(g&&(h=g),i+=h,h=i,b.addClass("cc-validate-fail"),c&&c.addClass("cc-error").removeClass("cc-success").html(h),d&&b.focus(),!1):(b.removeClass("cc-validate-fail"),c&&c.html(""),!0)},validate2:function(a,b,c,d,e,f,g,h){var i,j,k;switch(i=b[0].value,f){case"!":k="";break;default:k=""}switch(a){case"email":i=i.trim();var l=/\./g,m=/_/g,n=i.slice(0,i.lastIndexOf("@")),o=n.match(l)?n.match(l).length:0,p=n.match(m)?n.match(m).length:0;""===i?j="Please enter your email address.":i.match(/^\w+([-\.\']\w+)*@\w+([\.-]\w+)*\.\w{2,10}$/)?null!==i.match(/[‘’"”“ 　]/)?j="Email contains invalid characters.":(o>3||p>3)&&(j="Error."):j="Invalid email address.";break;case"password":""===i?j="Please enter your password.":i.length<6||i.length>20?j="Password must be 6-20 characters.":null!==i.match(/['‘’"”“ 　]/)&&(j="Password contains invalid characters.");break;case"repassword":i!==e&&(console.log("Inconsistent password."),j="Inconsistent password.");break;case"signUpTermsOfService":b.is(":checked")||(j="Please accept our terms of service.");break;case"verificationCode":i=i.trim(),""==i&&(j="Please enter the verification code."),""==i||i.match(/^[A-Za-z0-9]+$/)||(j="Incorrect verification code.");break;case"text":i=i.trim(),""===i&&(j="Required");break;case"name":i=i.trim(),""===i&&(j="Please enter your name.");break;case"number":i=i.trim(),""===i?j="Required":isNaN(i)&&(j="Please enter a number.");break;case"positiveNumber":i=i.trim(),""===i?j="Required":isNaN(i)?j="Please enter a number.":parseFloat(i)<0&&(j="Please enter a positive number.")}return j?(g&&(j=g),c&&(c.addClass(h).removeClass("cc-hide").removeClass("cc-success").html(j),c.html(j)),d&&b.focus(),!1):(b.removeClass(h),c&&c.html(""),!0)},validateNumRange:function(a,b,c,d){var e=a.val(),f=e.replace(/\D/g,"");parseInt(f)>parseInt(d)?a.val(d):b&&("0"===f?a.val(c).removeClass("cc-validate-fail"):a.val(f))},encodeHTML:function(a){return"undefined"!=typeof a&&a?(a="number"==typeof a?a.toString():a,a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\\/g,"&#92;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/\n/g,"<br>")):""},decodeHTML:function(a){return"undefined"!=typeof a&&a?(a+="",a.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#92;/g,"\\").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/<br>/g,"\n")):""},nl2br:function(a){return"undefined"!=typeof a&&a?(a+="",a.replace(/\n/g,"<br>")):""},br2nl:function(a){return"undefined"!=typeof a&&a?(a+="",a.replace(/<.?br.?>/g,"\n")):""},getUser:function(){return new Promise(function(a,b){$.ajax({type:"GET",dataType:"json",url:"/api/user/get-user",success:function(b){"OK"===b.code.toUpperCase()&&(fh5.userInfo=b.data,a(b.data))},error:function(a){console.log(a,"get user error"),b()}})})},getUserMeta:function(){return new Promise(function(a,b){$.ajax({type:"GET",dataType:"json",url:"/api/user/get-user-meta",success:function(b){if("OK"===b.code.toUpperCase()){var c=b.data.autoTriggerNewDashboard?Number(b.data.autoTriggerNewDashboard):0;fh5.userInfo.autoTriggerNewDashboard=c,a(c)}},error:function(a){console.log(a,"get user meta error"),b()}})})},changeLoginState:function(){return new Promise(function(a){var b="/center/flips",c=utils.isMobile(),d=$(".cc-top-right_log-in-wrap.pull-right"),e=$("#navbar"),f=["en","de","fr"],g=[{$lang_common_top_explore:"Explore",$lang_common_top_features:"Features",$lang_common_top_solutions:"Solutions",$lang_common_top_support:"Support",$lang_common_top_go_premium:"Pricing"},{$lang_common_top_explore:"Durchsuchen",$lang_common_top_features:"Funktionen",$lang_common_top_solutions:"Solutions",$lang_common_top_support:"Unterstützung",$lang_common_top_go_premium:"Premium gehen"},{$lang_common_top_explore:"Explorer",$lang_common_top_features:"Caractéristiques",$lang_common_top_solutions:"Solutions",$lang_common_top_support:"Support",$lang_common_top_go_premium:"Passer à Premium"}];utils.getUser().then(function(){utils.getUserMeta().then(function(){if(fh5.userInfo){fh5.userInfo.linkName&&1==fh5.userInfo.autoTriggerNewDashboard&&(b="/dashboard/publications");var h='<li class="cc-top-user-dashboard"><a class="cc-top-user-link">Go to dashboard</a></li><li id="top-user-menu" class="cc-has-sub-menu cc-top-item"><a class="cc-parent-link" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><div class="top-user-logo"><img src=""></div><span class="cc-top-bar-user-name">&nbsp;</span><span class="cc-top-arrow"></span></a><ul class="cc-sub-menu cc-login-over-bar"><li class="hidden-right-xlg"><a href="/exploring"><div class="cc-sub-menu-item">&nbsp;&nbsp;Explore</div></a></li><li class="hidden-right-xxlg"><a href="/templates"><div class="cc-sub-menu-item">&nbsp;&nbsp;Templates</div></a></li><li class="hidden-right-xlg"><a href="/features"><div class="cc-sub-menu-item">&nbsp;&nbsp;Features</div></a></li><li class="hidden-right-xxlg"><a href="/learning-center/solution-business/"><div class="cc-sub-menu-item">&nbsp;&nbsp;Solutions</div></a></li><li class="hidden-right-xxlg"><a href="//help.fliphtml5.com"><div class="cc-sub-menu-item">&nbsp;&nbsp;Support</div></a></li><li class="cc-top-hide-pricing hidden-right-xlg"><a href="/fliphtml5-pricing.php"><div class="cc-sub-menu-item">&nbsp;&nbsp;'+g[f.indexOf(fh5.lang)].$lang_common_top_go_premium+'</div></a></li><li class="cc-sub-menu-colspan-2"><a class="cc-log-out-link" href="/logout.php"><div class="cc-sub-menu-item">&nbsp;&nbsp;Log out</div></a></li></ul></li>',i=$(h);i.find(".cc-top-user-link").attr("href",b),i.find(".cc-parent-link").attr("href",c?"javascript:void(0);":1==fh5.userInfo.autoTriggerNewDashboard?"/dashboard/publications":"/center"),i.find(".cc-parent-link").addClass(c?"collapsed":""),fh5.userInfo.userImg.includes(fh5.userInfo.linkName)||(fh5.userInfo.userImg=fh5.userInfo.userImg.replace(".png",".jpg")),i.find(".top-user-logo img").attr("src",fh5.userInfo.userImg),i.find(".cc-top-bar-user-name").addClass(c?"cc-hide":"");var j=i.find(".cc-top-bar-user-name").text();i.find(".cc-top-bar-user-name").text(j+fh5.userInfo.uName),i.find(".cc-sub-menu.cc-login-over-bar").addClass(c?"cc-hide":""),d.empty().append(i);var k='<div id="navbar" class="cc-login-over-bar navbar-collapse-list hidden-lg collapse" aria-expanded="false" style="height: 4px;"><ul><li class="explore-dropdown dropdown hidden-lg hidden-md"><a href="/exploring" class="cc-container first-item">&nbsp;&nbsp;'+g[f.indexOf(fh5.lang)].$lang_common_top_explore+'</a></li><li class="explore-dropdown dropdown hidden-lg hidden-md"><a href="/templates" class="cc-container first-item">&nbsp;&nbsp;Templates</a></li><li class="cc-hide-top-bar-item hidden-lg"><a href="/features/"><div class="cc-container first-item">&nbsp;&nbsp;'+g[f.indexOf(fh5.lang)].$lang_common_top_features+'</div></a></li><li class="cc-hide-top-bar-item hidden-lg"><a href="/learning-center/solution-business"><div class="cc-container first-item">&nbsp;&nbsp;'+g[f.indexOf(fh5.lang)].$lang_common_top_solutions+'</div></a></li><li class="cc-hide-top-bar-item hidden-lg"><a href="//help.fliphtml5.com"><div class="cc-container first-item">&nbsp;&nbsp;'+g[f.indexOf(fh5.lang)].$lang_common_top_support+'</div></a></li><li class="cc-hide-top-bar-item cc-hide-top-bar-item hidden-lg  hidden-md"><a class="cc-pricing-link" href=""><div class="cc-container first-item">&nbsp;&nbsp;'+g[f.indexOf(fh5.lang)].$lang_common_top_go_premium+'</div></a></li><li class="cc-hide-top-bar-item"><a class="cc-log-out-link" href="/logout.php"><div class="cc-container first-item">&nbsp;&nbsp;Log out</div></a></li></ul></div>';if(fh5.userInfo&&c){var l=$(k),m=utils.lang_parse_link("/fliphtml5-pricing.php");l.find(".cc-pricing-link").attr("href",m),e.replaceWith(l),console.log("changed nav bar")}console.log("changed login state"),a()}})})})},changeTopBar:function(a,b){var c=$(".cc-top-bar"),d=(c.find(".cc-top-bar-explore"),$(".cc-top-change-menu"));$.ajax({url:"/top-after-log-in.php",type:"POST",data:{uName:a,uLink:b},success:function(a){d.empty().append(a),utils.setTopSubMenuPosition()}})},setTopSubMenuPosition:function(){},scrollTo:function(a,b){"undefined"==typeof b&&(b=400),$("html,body").animate({scrollTop:a},b)},addLeaveMask:function(a,b){$("<div class='cc-fullscreen-mask cc-hide'><div class='cc-fullscreen-text'>"+a+"</div></div>").appendTo($("body")).fadeIn(function(){b&&b()})},tap:function(a,b){this.supportTouch?a.hammer().on("tap",b):a.on("click",b)},isPhone:function(){var a=navigator.userAgent.toLowerCase();return!(a.indexOf("phone")>0||a.indexOf("mobile")>0||a.indexOf("ipod")>0||a.indexOf("msie")>0&&a.indexOf("pc")<=0)||a.indexOf("pad")>0||a.indexOf("pc")>0?!1:!0},isMobile:function(){var a=navigator.userAgent.toLowerCase();return a.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)?!0:!1},getIsMobile:function(){return this.isMobile()?"1":"0"},isMac:function(){return navigator.userAgent.toLowerCase().indexOf("mac")>0},getTemplateId:function(a){var b,c=fh5.pageData.templates,d=c.length;for(b=0;d>b;b++)if(c[b].name===a)return b},getThemeId:function(a){return fh5.pageData.themes.indexOf(a)},parseDate:function(a,b,c){var d=a.split(" "),e=d[0].split("-"),f=d[1].split(":"),g=new Date(e[0],e[1]-1,e[2],f[0],f[1],f[2]);return b&&(g=new Date(g.getTime()-60*g.getTimezoneOffset()*1e3+144e5)),c&&(g=g.toLocaleString()),g},getLabelFilePath:function(a){var b="";switch(a+=""){case"1":b="//fliphtml5.com/images/label-new.png";break;case"2":b="//fliphtml5.com/images/label-hot.png";break;case"3":b="//fliphtml5.com/images/label-featured.png";break;case"4":b="//fliphtml5.com/images/label-sold.png"}return b},selectCode:function(a){a.select()},bindAutoSelect:function(a){a.on("click",function(){a.select()})},loadFile:function(a,b){var c,d=a.split("?")[0],e=d.substr(d.length-2).toLowerCase();"js"==e?(c=document.createElement("script"),c.setAttribute("src",a),c.onload=function(){b&&b()}):(c=document.createElement("link"),c.setAttribute("rel","stylesheet"),c.setAttribute("type","text/css"),c.setAttribute("href",a)),document.head.appendChild(c)},isEmptyObj:function(a){for(var b in a)return!1;return!0},escapeSpeciialChar:function(a){return a.replace(/'/g,"\\'")},googleLogin:function(a){var b=this,c=$("#"+a.helpId);c.addClass("cc-hide").html("");var d=a.googleUser.getBasicProfile(),e=d.getEmail(),f=d.getId(),g=d.getName(),h=a.googleUser.getAuthResponse().access_token,i=new RedirectingBox;$.ajax({type:"POST",url:"/userLoad/handle-google-log-in.php",dataType:"json",data:{code:h,userid:f,name:g,bookid:a.bookId,isMobile:b.getIsMobile()},beforeSend:function(){a.lightBox?a.lightBox.showRedirectBox():i.show($("body"))},success:function(b){console.log(b);var d=!1;if("1"==b.status){"1"==b.isNewUser&&"undefined"!=typeof mt&&mt("send","pageview",{email:base64.decode(b.email),regsource:"mtgoogle"}),"1"==b.isNewUser&&"function"==typeof ga&&ga("send","event","register","register.gg",document.location.pathname);{""!==b.uName?b.uName:e.substr(0,e.indexOf("@"))}fh5.isLoggedIn=!0,fh5.uId=b.uId,fh5.uType=b.uType,fh5.uLink=b.uLink,a.showSuccessTips&&new MessageBox("success","Log in successfully!"),a.callback?(a.lightBox.cancel(),utils.changeLoginState().then(function(){a.lightBox.cancel(),a.callback()})):"undefined"!=typeof dataLayerFun&&dataLayerFun.login&&dataLayerFun.login(function(){var a=b.hasOwnProperty("autoTriggerNewDashboard")?b.autoTriggerNewDashboard:0;if("1"==b.isNewUser)window.location.href=1==a?utils.getLoginLink(a,1)+"?reg=2":"/center/flips/book.php?cid="+b.cId+"&register#upload";else{var c=utils.getParamValue("backurl");if(""!==c)window.location.href=c;else{var d=utils.getParamValue("back");window.location.href="1"===d?document.referrer:utils.getLoginLink(a)}}})}else(b.status="9")?(d=!0,c.html("Your registration is not allowed due to the spam detected.")):(d=!0,c.html("Failed to log in with Google, please retry!"));d&&(a.lightBox?a.lightBox.hideRedirectBox():i.cancel(),c.removeClass("cc-hide"))},error:function(){a.lightBox?a.lightBox.hideRedirectBox():i.cancel(),c.removeClass("cc-hide").html("Failed to log in with Google, please retry!")}})},facebookLogin:function(a){var b=this,c=$("#"+a.helpId);c.html("");var d=!1,e=new RedirectingBox;this.loadFile("//connect.facebook.net/en_US/sdk.js",function(){FB.init({appId:"759223277462081",cookie:!0,xfbml:!1,version:"v2.4"}),FB.login(function(f){"connected"===f.status?FB.api("/me?fields=id,email",function(f){var g=f.email;f.error?d=!0:$.ajax({type:"POST",url:"/userLoad/handle-facebook-log-in.php",dataType:"json",data:{userid:f.id,bookid:a.bookId,email:g,isMobile:b.getIsMobile()},beforeSend:function(){a.lightBox?a.lightBox.showRedirectBox():e.show($("body"))},success:function(b){if(console.log(b),"1"==b.status){"1"==b.isNewUser&&"undefined"!=typeof mt&&mt("send","pageview",{email:base64.decode(b.email),regsource:"mtfacebook"}),"1"==b.isNewUser&&"function"==typeof ga&&ga("send","event","register","register.fb",document.location.pathname);{""!==b.uName?b.uName:g.substr(0,g.indexOf("@"))}fh5.isLoggedIn=!0,fh5.uId=b.uId,fh5.uType=b.uType,fh5.uLink=b.uLink;var e=b.hasOwnProperty("autoTriggerNewDashboard")?b.autoTriggerNewDashboard:0;if(a.showSuccessTips&&new MessageBox("success","Log in successfully!"),a.callback)utils.changeLoginState().then(function(){a.lightBox.cancel(),a.callback()});else if("1"==b.isNewUser)window.location.href=1==e?utils.getLoginLink(e,1)+"?reg=1":"/center/flips/book.php?cid="+b.cId+"&register#upload";else{var f=utils.getParamValue("backurl");if(""!==f)window.location.href=f;else{var h=utils.getParamValue("back");window.location.href="1"===h?document.referrer:utils.getLoginLink(e)}}}else(b.status="9")?(d=!0,c.html("Your registration is not allowed due to the spam detected.")):d=!0},error:function(a,b){console.log(a),console.log(b),d=!0}})}):"not_authorized"===f.status?d=!0:"unknown"===f.status?(d=!0,console.log("用户关闭了授权登录窗口")):d=!0,d&&(a.lightBox?a.lightBox.hideRedirectBox():e.cancel(),""===c.html()&&c.html("Failed to log in with Facebook, please retry!"),c.removeClass("cc-hide"))},{scope:"public_profile,email"})})},loginByFB:function(a){console.log("loginByFB");var b,c=$("#"+a.helpId);c.html("");var d=!1,e=new RedirectingBox,f="facebook",g=500,h=570,i=(window.screen.height-30-h)/2,j=(window.screen.width-10-g)/2;opener=window.open("/userLoad/Facebook/index.php",f,"height="+h+",innerHeight="+h+",width="+g+",innerWidth="+g+",top="+i+",left="+j+",toolbar=no,menubar=no,scrollbars=auto,resizable=no,location=no,status=no"),window.addEventListener("message",function(f){if(b=f.data,"facebook_login"===b.type)if("OK"===b.code){"1"==b.isNewUser&&"undefined"!=typeof mt&&mt("send","pageview",{email:base64.decode(b.email),regsource:"mtfacebook"}),"1"==b.isNewUser&&"function"==typeof ga&&ga("send","event","register","register.fb",document.location.pathname);{""!==b.uName?b.uName:email.substr(0,email.indexOf("@"))}fh5.isLoggedIn=!0,fh5.uId=b.userId,fh5.uType=b.uType,fh5.uLink=b.uLink;var g=b.hasOwnProperty("autoTriggerNewDashboard")?b.autoTriggerNewDashboard:0;if(a.lightBox?a.lightBox.showRedirectBox():e.show($("body")),a.showSuccessTips&&new MessageBox("success","Log in successfully!"),a.callback)utils.changeLoginState().then(function(){a.lightBox.cancel(),a.callback()});else if("1"==b.isNewUser)window.location.href=1==g?utils.getLoginLink(g,1)+"?reg=1":"/center/flips/book.php?cid="+b.cId+"&register#upload";else{var h=utils.getParamValue("backurl");if(""!==h)window.location.href=h;else{var i=utils.getParamValue("back");window.location.href="1"===i?document.referrer:utils.getLoginLink(g)}}}else d=!0,c.html("Your registration is not allowed due to the spam detected.")}),d&&(a.lightBox?a.lightBox.hideRedirectBox():e.cancel(),""===c.html()&&c.html("Failed to log in with Facebook, please retry!"),c.removeClass("cc-hide"))},fromatInt:function(a){if(isNaN(a))return a;var b=a.toString().length;return 4>b?a:b>=4&&7>b?Math.floor(a/1e3)+"K":b>=7&&10>b?Math.floor(a/1e6)+"M":Math.floor(a/1e9)+"B"},formatIntToStr:function(a){var b=Math.floor(parseInt(a)/1e3),c=a.toString().substr(-3);return b>0?this.formatIntToStr(b)+","+c:c+""},formatTime:function(a){var b,c=parseInt(a),d=0,e=0;return c>=60&&(d=parseInt(c/60),c=parseInt(c%60),d>=60&&(e=parseInt(d/60),d=parseInt(d%60))),b=1===c.toString().length?"0"+c:c,d>=0&&(d=1===d.toString().length?"0"+d:d,b=d+":"+b),e>=0&&(b=e+":"+b),b},getDocumentRoot:function(){return window.location.protocol+"//"+document.domain+"/"},getPropNum:function(a){var b=0;for(var c in a)a.hasOwnProperty(c)&&b++;return b},pasreHttps:function(a){return a.replace("http://","https://")},parseBookShot:function(a,b){var c="0"==b?"png":"jpg";return a.replace("http://","https://")+"files/shot."+c},parseHttpsBookShot:function(a,b){var c="0"==b?"png":"jpg";return a.replace("http://","https://")+"files/shot."+c},getUserAccountlogo:function(a,b){return"http://"+fh5.AS3BucketName+"/"+(""==a?"accountlogo.jpg":b+"/"+a)},getUserName:function(a,b){return("undefined"==typeof a||null===a)&&(a=""),("undefined"==typeof b||null===b)&&(b=""),""!==a?a:b.substr(0,b.lastIndexOf("@"))},preloadImg:function(a){var b=0,c=a.length;for(b=0;c>b;b++){var d=new Image;d.src=a[b]}},addHighlight:function(a,b){if(""==b)return a;for(var c=a,d=new RegExp("<.*?>","i"),e=new Array,f=0;!0;f++){var g=d.exec(c);if(!g)break;e[f]=g,c=c.replace(g,"{[("+f+")]}")}for(var h=unescape(b.replace(/\+/g," ")).split(/\s+/),i=0;i<h.length;i++){var j=new RegExp("("+h[i].replace(/[(){}.+*?^$|\\\[\]]/g,"\\$&")+")","ig");c=c.replace(j,"<span class='cc-highlight'>$1</span>")}for(var f=0;f<e.length;f++)c=c.replace("{[("+f+")]}",e[f]);return c},getUploadPage:function(){var a;return a=fh5.sessionDefaultCId?"/center/flips/book.php?cid="+fh5.sessionDefaultCId+"#upload":"/quick-upload/"},goUpload:function(a){var b;b=fh5.sessionDefaultCId?"/center/flips/book.php?cid="+fh5.sessionDefaultCId+"#upload":"/quick-upload/",a?window.open(b):window.location.href=b},turnOffOpenEmail:function(){location.hash=location.hash.replace("email",""),fh5.bookGlobal_isOpenEmail=!1,$.ajax({url:"/userLoad/turn-off-open-email.php"})},getCurrencyCode:function(a){var b="";switch(a){case"USD":b="<i class='fa fa-usd'></i>";break;case"GBP":b="<i class='fa fa-gbp'></i>";break;case"EUR":b="<i class='fa fa-eur'></i>";break;default:b=a}return b},lang_parse_link:function(a){return"en"===fh5.lang?a:"/"+fh5.lang+a},getFileExt:function(a){return a.substring(a.lastIndexOf(".")+1).toLowerCase()},round:function(a,b){return Math.round(a*b*10)/(10*b)},getLocalStorage:function(a){try{if(window.localStorage)return window.localStorage.getItem(a);for(var b=document.cookie.split("; "),c=0;c<b.length;c++){var d=b[c].split("=");if(d[0]==a)return unescape(d[1])}return""}catch(e){return""}},addLocalStorage:function(a,b){try{if(window.localStorage)window.localStorage.setItem(a,b);else{var c=a+"="+escape(b),d=new Date,e=864e8;d.setTime(d.getTime()+e),c+="; expires="+d.toGMTString(),document.cookie=c}}catch(f){}},getLoginLink:function(a,b){var c="undefined"==typeof a?0:a,d="undefined"==typeof b?0:b;return 1==c?0==d?"/dashboard/publications":"/edit-book/upload":"/center/flips/"},getParamValue:function(a){var b=window.location.search,c="";if(b){b=b.substring(1);var d=b.split("&");d.forEach(function(b){if(b.includes(a)){var d=b.indexOf("=");c=b.substring(d+1)}})}return c},checkUseLoginStatus:function(){$.ajax({type:"GET",dataType:"json",url:"/api/user/get-user",success:function(a){console.log(a,"用户信息"),"OK"===a.code.toUpperCase()&&this.changeTopBar()},error:function(a){console.log(a,"错误")}})}},dataLayerFun={login:function(a){var b=this;$.ajax({url:"/ga/user.php",type:"get",success:function(c){var d=JSON.parse(c);if("OK"==d.code){var e=d.data,f={event:"login",Usertype:e.userType,RegSource:e.regSource,LoginAmount:e.loginAmount,BookAmount:e.bookAmount,SellBook:e.sellBook};
b.addCookie("dataLayer",JSON.stringify(f)),window.dataLayer=window.dataLayer||[],window.dataLayer.push(f)}"function"==typeof a&&a()},error:function(b){console.log(b),"function"==typeof a&&a()}})},updateLoginDataLayer:function(){window.dataLayer=window.dataLayer||[];var a=this.getCookie("dataLayer"),b=""==a?{}:JSON.parse(a);window.dataLayer.push(b)},uploadBook:function(a){window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"upload_book",usertype:a})},buynow:function(a){window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"checkout",usertype:a})},uploadBookSucces:function(a){window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"upload_book_success",Usertype:a})},cancelSucces:function(a){window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"cancel_subscr_success",Usertype:a})},cancelClick:function(a){$.ajax({url:"/ga/unsubscr.php",type:"post",success:function(b){var c=JSON.parse(b);if(console.log(c),"OK"==c.code){var d=c.data,e="Year",f="Month",g=d.period;g.endsWith("Y")?(window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"click_cancel_subscr",Usertype:a,paymentperiod:e})):g.endsWith("M")&&(window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"click_cancel_subscr",Usertype:a,paymentperiod:f}))}},error:function(a){console.log(a)}})},purchase:function(a,b,c){var d=this;"undefined"!=typeof c&&c&&"undefined"!=typeof b&&b&&(console.log("sId:"+b),console.log("oId:"+c),$.ajax({url:"/ga/subscr.php",type:"post",data:{o_id:c,s_id:b},success:function(b){var c=JSON.parse(b);if(console.log(c),"OK"==c.code){var e=c.data,f={payCounts:e.pay_counts,uType:a,oId:e.o_id,amount:e.amount,sku:e.sku,name:e.sku,type:"Year"},g="Month",h=e.period;h.endsWith("M")&&(f.type=g),d.purchasePush(f)}},error:function(a){console.log(a)}}))},purchasePush:function(a){window.dataLayer=window.dataLayer||[],window.dataLayer.push({paycounts:a.payCounts,Usertype:a.uType,event:"purchase",transactionId:a.oId,transactionTotal:a.amount,transactionProducts:[{sku:a.sku,name:a.name,category:a.type}]})},getCookie:function(a){try{for(var b=document.cookie.split("; "),c=0;c<b.length;c++){var d=b[c].split("=");if(d[0]==a)return unescape(d[1])}return""}catch(e){return""}},addCookie:function(a,b){try{var c=a+"="+escape(b),d=new Date,e=864e8;d.setTime(d.getTime()+e),c+="; expires="+d.toGMTString(),document.cookie=c}catch(f){}},readyUpload:function(){window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"upload_page"})},completeUpload:function(){window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"config_page"})},closeUpload:function(){window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"default_folder"})}},intercomFun={pushInterCom:function(){var a=this,b="",c="";if("undefined"!=typeof fh5&&fh5&&(b=fh5.userHash,c=fh5.uId),$.trim(b)&&$.trim(c)&&a.verifyHash()){var d={uId:c,key:b};a.addIntercom(d)}},addIntercom:function(a){window.intercomSettings={app_id:"mtp3fwip",user_id:a.uId,user_hash:a.key}},addUserHash:function(a){"undefined"!=typeof fh5&&fh5&&(fh5.userHash=a)},verifyHash:function(){var a=this;return a.initInterComCookie(),a.getValue("isHash")},initInterComCookie:function(){var a=this;window.interCom=[];var b=dataLayerFun.getCookie("interCom");"undefined"!=typeof b&&b?window.interCom.push(JSON.parse(b)):a.addInterComCookie()},setInterComCookie:function(a,b){var c=this;window.interCom=window.interCom||[];var d=dataLayerFun.getCookie("interCom");if("undefined"!=typeof d&&d){var e=JSON.parse(d);e[a]=b,window.interCom=[],c.addInterComCookie(e)}else{var f={isHash:!0,cancelTime:"",buyTime:"",scrollTime:""};f[a]=b,window.interCom=[],c.addInterComCookie(f)}},addInterComCookie:function(a){return("undefined"==typeof a||"{}"===a)&&(a={isHash:!0,cancelTime:"",buyTime:"",scrollTime:""}),dataLayerFun.addCookie("interCom",JSON.stringify(a)),window.interCom.push(a),a},getValue:function(a){var b=this,c=window.interCom;if("undefined"!=typeof c&&c.length<1)return c[0][a];var d=dataLayerFun.getCookie("interCom");if("undefined"!=typeof d&&d){var e=JSON.parse(d);return e[a]}window.interCom=[];var f=b.addInterComCookie();return f[a]},verifyTime:function(a){var b=this;b.initInterComCookie();var c=b.getValue(a);if(!$.trim(c))return!0;var d=b.getDaysBetween(c,b.getNowFormatDate());return d>0?!0:!1},getDaysBetween:function(a,b){var c=Date.parse(a),d=Date.parse(b);if(c>d)return 0;if(c==d)return 0;var e=(d-c)/864e5;return e},getNowFormatDate:function(){var a=new Date,b="-",c=a.getMonth()+1,d=a.getDate();c>=1&&9>=c&&(c="0"+c),d>=0&&9>=d&&(d="0"+d);var e=a.getFullYear()+b+c+b+d;return e},test:function(){window.addEventListener("onload",function(){dataLayer.push("undefined"!=userHash&&""!=userHash?{event:"isEmptyUserHash",isEmptyUserHashData:1}:{event:"isEmptyUserHash",isEmptyUserHashData:0})})}}+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one("bsTransitionEnd",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){return a(b.target).is(this)?b.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.collapse"),f=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b);!e&&f.toggle&&"show"==b&&(f.toggle=!1),e||d.data("bs.collapse",e=new c(this,f)),"string"==typeof b&&e[b]()})}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.transitioning=null,this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};c.VERSION="3.2.0",c.TRANSITION_DURATION=350,c.DEFAULTS={toggle:!0},c.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},c.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var d=a.Event("show.bs.collapse");if(this.$element.trigger(d),!d.isDefaultPrevented()){var e=this.$parent&&this.$parent.find("> .panel > .in");if(e&&e.length){var f=e.data("bs.collapse");if(f&&f.transitioning)return;b.call(e,"hide"),f||e.data("bs.collapse",null)}var g=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[g](0),this.transitioning=1;var h=function(){this.$element.removeClass("collapsing").addClass("collapse in")[g](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return h.call(this);var i=a.camelCase(["scroll",g].join("-"));this.$element.one("bsTransitionEnd",a.proxy(h,this)).emulateTransitionEnd(c.TRANSITION_DURATION)[g](this.$element[0][i])}}},c.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var d=this.dimension();this.$element[d](this.$element[d]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in"),this.transitioning=1;var e=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return a.support.transition?void this.$element[d](0).one("bsTransitionEnd",a.proxy(e,this)).emulateTransitionEnd(c.TRANSITION_DURATION):e.call(this)}}},c.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var d=a.fn.collapse;a.fn.collapse=b,a.fn.collapse.Constructor=c,a.fn.collapse.noConflict=function(){return a.fn.collapse=d,this},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(c){var d,e=a(this),f=e.attr("data-target")||c.preventDefault()||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""),g=a(f),h=g.data("bs.collapse"),i=h?"toggle":e.data(),j=e.attr("data-parent"),k=j&&a(j);h&&h.transitioning||(k&&k.find('[data-toggle="collapse"][data-parent="'+j+'"]').not(e).addClass("collapsed"),e.toggleClass("collapsed",g.hasClass("in"))),b.call(g,i)})}(jQuery),+function(a){"use strict";function b(b){b&&3===b.which||(a(e).remove(),a(f).each(function(){var d=a(this),e=c(d),f={relatedTarget:this};e.hasClass("open")&&(e.trigger(b=a.Event("hide.bs.dropdown",f)),b.isDefaultPrevented()||(d.attr("aria-expanded","false"),e.removeClass("open").trigger("hidden.bs.dropdown",f)))}))}function c(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c)})}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.2.0",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=c(e),g=f.hasClass("open");if(b(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",b);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),f.toggleClass("open").trigger("shown.bs.dropdown",h)}return!1}},g.prototype.keydown=function(b){if(/(38|40|27)/.test(b.keyCode)){var d=a(this);if(b.preventDefault(),b.stopPropagation(),!d.is(".disabled, :disabled")){var e=c(d),g=e.hasClass("open");if(!g||g&&27==b.keyCode)return 27==b.which&&e.find(f).trigger("focus"),d.trigger("click");var h=" li:not(.divider):visible a",i=e.find('[role="menu"]'+h+', [role="listbox"]'+h);if(i.length){var j=i.index(i.filter(":focus"));38==b.keyCode&&j>0&&j--,40==b.keyCode&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",b).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f+', [role="menu"], [role="listbox"]',g.prototype.keydown)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new c(this)),"string"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)};c.VERSION="3.3.2",c.TRANSITION_DURATION=150,c.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a"),f=a.Event("hide.bs.tab",{relatedTarget:b[0]}),g=a.Event("show.bs.tab",{relatedTarget:e[0]});if(e.trigger(f),b.trigger(g),!g.isDefaultPrevented()&&!f.isDefaultPrevented()){var h=a(d);this.activate(b.closest("li"),c),this.activate(h,h.parent(),function(){e.trigger({type:"hidden.bs.tab",relatedTarget:b[0]}),b.trigger({type:"shown.bs.tab",relatedTarget:e[0]})})}}},c.prototype.activate=function(b,d,e){function f(){g.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),b.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),h?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),e&&e()}var g=d.find("> .active"),h=e&&a.support.transition&&(g.length&&g.hasClass("fade")||!!d.find("> .fade").length);g.length&&h?g.one("bsTransitionEnd",f).emulateTransitionEnd(c.TRANSITION_DURATION):f(),g.removeClass("in")};var d=a.fn.tab;a.fn.tab=b,a.fn.tab.Constructor=c,a.fn.tab.noConflict=function(){return a.fn.tab=d,this};var e=function(c){c.preventDefault(),b.call(a(this),"show")};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',e).on("click.bs.tab.data-api",'[data-toggle="pill"]',e)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new c(this)),"string"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)};c.VERSION="3.3.2",c.TRANSITION_DURATION=150,c.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a"),f=a.Event("hide.bs.tab",{relatedTarget:b[0]}),g=a.Event("show.bs.tab",{relatedTarget:e[0]});if(e.trigger(f),b.trigger(g),!g.isDefaultPrevented()&&!f.isDefaultPrevented()){var h=a(d);this.activate(b.closest("li"),c),this.activate(h,h.parent(),function(){e.trigger({type:"hidden.bs.tab",relatedTarget:b[0]}),b.trigger({type:"shown.bs.tab",relatedTarget:e[0]})})}}},c.prototype.activate=function(b,d,e){function f(){g.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),b.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),h?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),e&&e()}var g=d.find("> .active"),h=e&&a.support.transition&&(g.length&&g.hasClass("fade")||!!d.find("> .fade").length);g.length&&h?g.one("bsTransitionEnd",f).emulateTransitionEnd(c.TRANSITION_DURATION):f(),g.removeClass("in")};var d=a.fn.tab;a.fn.tab=b,a.fn.tab.Constructor=c,a.fn.tab.noConflict=function(){return a.fn.tab=d,this};var e=function(c){c.preventDefault(),b.call(a(this),"show")};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',e).on("click.bs.tab.data-api",'[data-toggle="pill"]',e)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof b&&b,g=f&&f.selector;(e||"destroy"!=b)&&(g?(e||d.data("bs.tooltip",e={}),e[g]||(e[g]=new c(this,f))):e||d.data("bs.tooltip",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",a,b)};c.VERSION="3.3.0",c.TRANSITION_DURATION=150,c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},c.prototype.init=function(b,c,d){this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(this.options.viewport.selector||this.options.viewport);for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.$element.on("touchstart."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on("touchend."+this.type,this.options.selector,a.proxy(this.leave,this)),this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c&&c.$tip&&c.$tip.is(":visible")?void(c.hoverState="in"):(c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show())},c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()},c.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var d=a.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!d)return;var e=this,f=this.tip(),g=this.getUID(this.type);this.setContent(),f.attr("id",g),this.$element.attr("aria-describedby",g),this.options.animation&&f.addClass("fade");var h="function"==typeof this.options.placement?this.options.placement.call(this,f[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,j=i.test(h);j&&(h=h.replace(i,"")||"top"),f.detach().css({top:0,left:0,display:"block"}).addClass(h).data("bs."+this.type,this),this.options.container?f.appendTo(this.options.container):f.insertAfter(this.$element);var k=this.getPosition(),l=f[0].offsetWidth,m=f[0].offsetHeight;if(j){var n=h,o=this.options.container?a(this.options.container):this.$element.parent(),p=this.getPosition(o);h="bottom"==h&&k.bottom+m>p.bottom?"top":"top"==h&&k.top-m<p.top?"bottom":"right"==h&&k.right+l>p.width?"left":"left"==h&&k.left-l<p.left?"right":h,f.removeClass(n).addClass(h)}var q=this.getCalculatedOffset(h,k,l,m);this.applyPlacement(q,h);var r=function(){var a=e.hoverState;e.$element.trigger("shown.bs."+e.type),e.hoverState=null,"out"==a&&e.leave(e)};a.support.transition&&this.$tip.hasClass("fade")?f.one("bsTransitionEnd",r).emulateTransitionEnd(c.TRANSITION_DURATION):r()}},c.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top=b.top+g,b.left=b.left+h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=/top|bottom/.test(c),m=l?2*k.left-e+i:2*k.top-f+j,n=l?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(m,d[0][n],l)},c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c?"left":"top",50*(1-a/b)+"%").css(c?"top":"left","")},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},c.prototype.hide=function(b){function d(){"in"!=e.hoverState&&f.detach(),e.$element.removeAttr("aria-describedby").trigger("hidden.bs."+e.type),b&&b()}var e=this,f=this.tip(),g=a.Event("hide.bs."+this.type);return this.$element.trigger(g),g.isDefaultPrevented()?void 0:(f.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?f.one("bsTransitionEnd",d).emulateTransitionEnd(c.TRANSITION_DURATION):d(),this.hoverState=null,this)},c.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},c.prototype.hasContent=function(){return this.getTitle()},c.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName,e=c.getBoundingClientRect();null==e.width&&(e=a.extend({},e,{width:e.right-e.left,height:e.bottom-e.top}));var f=d?{top:0,left:0}:b.offset(),g={scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop()},h=d?{width:a(window).width(),height:a(window).height()}:null;return a.extend({},e,g,h,f)},c.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},c.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.width&&(e.left=g.left+g.width-k)}return e},c.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},c.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},c.prototype.tip=function(){return this.$tip=this.$tip||a(this.options.template)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},c.prototype.enable=function(){this.enabled=!0},c.prototype.disable=function(){this.enabled=!1},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled},c.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),c.tip().hasClass("in")?c.leave(c):c.enter(c)},c.prototype.destroy=function(){var a=this;clearTimeout(this.timeout),this.hide(function(){a.$element.off("."+a.type).removeData("bs."+a.type)})};var d=a.fn.tooltip;a.fn.tooltip=b,a.fn.tooltip.Constructor=c,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof b&&b,g=f&&f.selector;(e||"destroy"!=b)&&(g?(e||d.data("bs.popover",e={}),e[g]||(e[g]=new c(this,f))):e||d.data("bs.popover",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");c.VERSION="3.3.0",c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},c.prototype.hasContent=function(){return this.getTitle()||this.getContent()},c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},c.prototype.tip=function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip};var d=a.fn.popover;a.fn.popover=b,a.fn.popover.Constructor=c,a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery),function(a){a.fn.hints=function(b){var c={className:"",addClass:"",content:null,position:"topRight",offsetX:5,offsetY:-5,overCallback:null},d=a.extend({},c,b);return this.each(function(){var b=a(this),c=a("<div></div>").css({position:"absolute",display:"none",zIndex:"999999999"}).appendTo(a("body")),e=null;d.content&&("object"==typeof d.content&&a(d.content).css("display","block"),c.append(d.content)),d.className?c.addClass(d.className):c.css({border:"1px solid #f9d52f",background:"#ffffce",color:"#222222",borderRadius:"2px",boxShadow:"rgb(112, 112, 112) 0px 1px 1px",padding:"8px 12px",fontSize:"13px",maxWidth:"450px"}),d.addClass&&c.addClass(d.addClass),b.hover(function(f){clearTimeout(e),d.overCallback&&d.overCallback();var g,h,i=b.offset().left,j=b.offset().top,k=b.outerHeight(),l=b.outerWidth(),m=c.outerHeight(),n=c.outerWidth();switch(d.position){case"topRight":h=i+l,g=j-m;break;case"top":h=i+(l-n)/2,g=j-m;break;case"bottom":h=i+(l-n)/2,g=j+m;break;case"left":h=i-n,g=j+(k-m)/2;break;case"right":h=i+l,g=j+(k-m)/2;break;case"mouse":h=f.pageX,g=f.pageY}c.css({left:h+d.offsetX,top:g+d.offsetY}).fadeIn(200),"mouse"===d.position&&a(document).on("mousemove",b,function(a){c.css({left:a.pageX+d.offsetX,top:a.pageY+d.offsetY})})},function(){e=setTimeout(function(){c.stop().fadeOut(200)},200)}),c.hover(function(){clearTimeout(e),c.fadeIn(0)},function(){c.stop().fadeOut(200)})})}}(window.jQuery);var hexcase=0,b64pad="",chrsz=8;!function(a){a.fn.qrcode=function(b){function c(a){this.mode=h,this.data=a}function d(a,b){this.typeNumber=a,this.errorCorrectLevel=b,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function e(a,b){if(void 0==a.length)throw Error(a.length+"/"+b);for(var c=0;c<a.length&&0==a[c];)c++;this.num=Array(a.length-c+b);for(var d=0;d<a.length-c;d++)this.num[d]=a[d+c]}function f(a,b){this.totalCount=a,this.dataCount=b}function g(){this.buffer=[],this.length=0}var h;c.prototype={getLength:function(){return this.data.length},write:function(a){for(var b=0;b<this.data.length;b++)a.put(this.data.charCodeAt(b),8)}},d.prototype={addData:function(a){this.dataList.push(new c(a)),this.dataCache=null},isDark:function(a,b){if(0>a||this.moduleCount<=a||0>b||this.moduleCount<=b)throw Error(a+","+b);return this.modules[a][b]},getModuleCount:function(){return this.moduleCount},make:function(){if(1>this.typeNumber){for(var a=1,a=1;40>a;a++){for(var b=f.getRSBlocks(a,this.errorCorrectLevel),c=new g,d=0,e=0;e<b.length;e++)d+=b[e].dataCount;for(e=0;e<this.dataList.length;e++)b=this.dataList[e],c.put(b.mode,4),c.put(b.getLength(),i.getLengthInBits(b.mode,a)),b.write(c);if(c.getLengthInBits()<=8*d)break}this.typeNumber=a}this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(a,b){this.moduleCount=4*this.typeNumber+17,this.modules=Array(this.moduleCount);for(var c=0;c<this.moduleCount;c++){this.modules[c]=Array(this.moduleCount);for(var e=0;e<this.moduleCount;e++)this.modules[c][e]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(a,b),7<=this.typeNumber&&this.setupTypeNumber(a),null==this.dataCache&&(this.dataCache=d.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,b)},setupPositionProbePattern:function(a,b){for(var c=-1;7>=c;c++)if(!(-1>=a+c||this.moduleCount<=a+c))for(var d=-1;7>=d;d++)-1>=b+d||this.moduleCount<=b+d||(this.modules[a+c][b+d]=c>=0&&6>=c&&(0==d||6==d)||d>=0&&6>=d&&(0==c||6==c)||c>=2&&4>=c&&d>=2&&4>=d?!0:!1)},getBestMaskPattern:function(){for(var a=0,b=0,c=0;8>c;c++){this.makeImpl(!0,c);var d=i.getLostPoint(this);(0==c||a>d)&&(a=d,b=c)}return b},createMovieClip:function(a,b,c){for(a=a.createEmptyMovieClip(b,c),this.make(),b=0;b<this.modules.length;b++)for(var c=1*b,d=0;d<this.modules[b].length;d++){var e=1*d;this.modules[b][d]&&(a.beginFill(0,100),a.moveTo(e,c),a.lineTo(e+1,c),a.lineTo(e+1,c+1),a.lineTo(e,c+1),a.endFill())}return a},setupTimingPattern:function(){for(var a=8;a<this.moduleCount-8;a++)null==this.modules[a][6]&&(this.modules[a][6]=0==a%2);for(a=8;a<this.moduleCount-8;a++)null==this.modules[6][a]&&(this.modules[6][a]=0==a%2)},setupPositionAdjustPattern:function(){for(var a=i.getPatternPosition(this.typeNumber),b=0;b<a.length;b++)for(var c=0;c<a.length;c++){var d=a[b],e=a[c];if(null==this.modules[d][e])for(var f=-2;2>=f;f++)for(var g=-2;2>=g;g++)this.modules[d+f][e+g]=-2==f||2==f||-2==g||2==g||0==f&&0==g?!0:!1}},setupTypeNumber:function(a){for(var b=i.getBCHTypeNumber(this.typeNumber),c=0;18>c;c++){var d=!a&&1==(b>>c&1);this.modules[Math.floor(c/3)][c%3+this.moduleCount-8-3]=d}for(c=0;18>c;c++)d=!a&&1==(b>>c&1),this.modules[c%3+this.moduleCount-8-3][Math.floor(c/3)]=d},setupTypeInfo:function(a,b){for(var c=i.getBCHTypeInfo(this.errorCorrectLevel<<3|b),d=0;15>d;d++){var e=!a&&1==(c>>d&1);6>d?this.modules[d][8]=e:8>d?this.modules[d+1][8]=e:this.modules[this.moduleCount-15+d][8]=e}for(d=0;15>d;d++)e=!a&&1==(c>>d&1),8>d?this.modules[8][this.moduleCount-d-1]=e:9>d?this.modules[8][15-d-1+1]=e:this.modules[8][15-d-1]=e;this.modules[this.moduleCount-8][8]=!a},mapData:function(a,b){for(var c=-1,d=this.moduleCount-1,e=7,f=0,g=this.moduleCount-1;g>0;g-=2)for(6==g&&g--;;){for(var h=0;2>h;h++)if(null==this.modules[d][g-h]){var j=!1;f<a.length&&(j=1==(a[f]>>>e&1)),i.getMask(b,d,g-h)&&(j=!j),this.modules[d][g-h]=j,e--,-1==e&&(f++,e=7)}if(d+=c,0>d||this.moduleCount<=d){d-=c,c=-c;break}}}},d.PAD0=236,d.PAD1=17,d.createData=function(a,b,c){for(var b=f.getRSBlocks(a,b),e=new g,h=0;h<c.length;h++){var j=c[h];e.put(j.mode,4),e.put(j.getLength(),i.getLengthInBits(j.mode,a)),j.write(e)}for(h=a=0;h<b.length;h++)a+=b[h].dataCount;if(e.getLengthInBits()>8*a)throw Error("code length overflow. ("+e.getLengthInBits()+">"+8*a+")");for(e.getLengthInBits()+4<=8*a&&e.put(0,4);0!=e.getLengthInBits()%8;)e.putBit(!1);for(;!(e.getLengthInBits()>=8*a)&&(e.put(d.PAD0,8),!(e.getLengthInBits()>=8*a));)e.put(d.PAD1,8);return d.createBytes(e,b)},d.createBytes=function(a,b){for(var c=0,d=0,f=0,g=Array(b.length),h=Array(b.length),j=0;j<b.length;j++){var k=b[j].dataCount,l=b[j].totalCount-k,d=Math.max(d,k),f=Math.max(f,l);g[j]=Array(k);for(var m=0;m<g[j].length;m++)g[j][m]=255&a.buffer[m+c];for(c+=k,m=i.getErrorCorrectPolynomial(l),k=new e(g[j],m.getLength()-1).mod(m),h[j]=Array(m.getLength()-1),m=0;m<h[j].length;m++)l=m+k.getLength()-h[j].length,h[j][m]=l>=0?k.get(l):0}for(m=j=0;m<b.length;m++)j+=b[m].totalCount;for(c=Array(j),m=k=0;d>m;m++)for(j=0;j<b.length;j++)m<g[j].length&&(c[k++]=g[j][m]);for(m=0;f>m;m++)for(j=0;j<b.length;j++)m<h[j].length&&(c[k++]=h[j][m]);return c},h=4;for(var i={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(a){for(var b=a<<10;0<=i.getBCHDigit(b)-i.getBCHDigit(i.G15);)b^=i.G15<<i.getBCHDigit(b)-i.getBCHDigit(i.G15);return(a<<10|b)^i.G15_MASK},getBCHTypeNumber:function(a){for(var b=a<<12;0<=i.getBCHDigit(b)-i.getBCHDigit(i.G18);)b^=i.G18<<i.getBCHDigit(b)-i.getBCHDigit(i.G18);return a<<12|b},getBCHDigit:function(a){for(var b=0;0!=a;)b++,a>>>=1;return b},getPatternPosition:function(a){return i.PATTERN_POSITION_TABLE[a-1]},getMask:function(a,b,c){switch(a){case 0:return 0==(b+c)%2;case 1:return 0==b%2;
case 2:return 0==c%3;case 3:return 0==(b+c)%3;case 4:return 0==(Math.floor(b/2)+Math.floor(c/3))%2;case 5:return 0==b*c%2+b*c%3;case 6:return 0==(b*c%2+b*c%3)%2;case 7:return 0==(b*c%3+(b+c)%2)%2;default:throw Error("bad maskPattern:"+a)}},getErrorCorrectPolynomial:function(a){for(var b=new e([1],0),c=0;a>c;c++)b=b.multiply(new e([1,j.gexp(c)],0));return b},getLengthInBits:function(a,b){if(b>=1&&10>b)switch(a){case 1:return 10;case 2:return 9;case h:return 8;case 8:return 8;default:throw Error("mode:"+a)}else if(27>b)switch(a){case 1:return 12;case 2:return 11;case h:return 16;case 8:return 10;default:throw Error("mode:"+a)}else{if(!(41>b))throw Error("type:"+b);switch(a){case 1:return 14;case 2:return 13;case h:return 16;case 8:return 12;default:throw Error("mode:"+a)}}},getLostPoint:function(a){for(var b=a.getModuleCount(),c=0,d=0;b>d;d++)for(var e=0;b>e;e++){for(var f=0,g=a.isDark(d,e),h=-1;1>=h;h++)if(!(0>d+h||d+h>=b))for(var i=-1;1>=i;i++)0>e+i||e+i>=b||0==h&&0==i||g==a.isDark(d+h,e+i)&&f++;f>5&&(c+=3+f-5)}for(d=0;b-1>d;d++)for(e=0;b-1>e;e++)f=0,a.isDark(d,e)&&f++,a.isDark(d+1,e)&&f++,a.isDark(d,e+1)&&f++,a.isDark(d+1,e+1)&&f++,(0==f||4==f)&&(c+=3);for(d=0;b>d;d++)for(e=0;b-6>e;e++)a.isDark(d,e)&&!a.isDark(d,e+1)&&a.isDark(d,e+2)&&a.isDark(d,e+3)&&a.isDark(d,e+4)&&!a.isDark(d,e+5)&&a.isDark(d,e+6)&&(c+=40);for(e=0;b>e;e++)for(d=0;b-6>d;d++)a.isDark(d,e)&&!a.isDark(d+1,e)&&a.isDark(d+2,e)&&a.isDark(d+3,e)&&a.isDark(d+4,e)&&!a.isDark(d+5,e)&&a.isDark(d+6,e)&&(c+=40);for(e=f=0;b>e;e++)for(d=0;b>d;d++)a.isDark(d,e)&&f++;return a=Math.abs(100*f/b/b-50)/5,c+10*a}},j={glog:function(a){if(1>a)throw Error("glog("+a+")");return j.LOG_TABLE[a]},gexp:function(a){for(;0>a;)a+=255;for(;a>=256;)a-=255;return j.EXP_TABLE[a]},EXP_TABLE:Array(256),LOG_TABLE:Array(256)},k=0;8>k;k++)j.EXP_TABLE[k]=1<<k;for(k=8;256>k;k++)j.EXP_TABLE[k]=j.EXP_TABLE[k-4]^j.EXP_TABLE[k-5]^j.EXP_TABLE[k-6]^j.EXP_TABLE[k-8];for(k=0;255>k;k++)j.LOG_TABLE[j.EXP_TABLE[k]]=k;return e.prototype={get:function(a){return this.num[a]},getLength:function(){return this.num.length},multiply:function(a){for(var b=Array(this.getLength()+a.getLength()-1),c=0;c<this.getLength();c++)for(var d=0;d<a.getLength();d++)b[c+d]^=j.gexp(j.glog(this.get(c))+j.glog(a.get(d)));return new e(b,0)},mod:function(a){if(0>this.getLength()-a.getLength())return this;for(var b=j.glog(this.get(0))-j.glog(a.get(0)),c=Array(this.getLength()),d=0;d<this.getLength();d++)c[d]=this.get(d);for(d=0;d<a.getLength();d++)c[d]^=j.gexp(j.glog(a.get(d))+b);return new e(c,0).mod(a)}},f.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],f.getRSBlocks=function(a,b){var c=f.getRsBlockTable(a,b);if(void 0==c)throw Error("bad rs block @ typeNumber:"+a+"/errorCorrectLevel:"+b);for(var d=c.length/3,e=[],g=0;d>g;g++)for(var h=c[3*g+0],i=c[3*g+1],j=c[3*g+2],k=0;h>k;k++)e.push(new f(i,j));return e},f.getRsBlockTable=function(a,b){switch(b){case 1:return f.RS_BLOCK_TABLE[4*(a-1)+0];case 0:return f.RS_BLOCK_TABLE[4*(a-1)+1];case 3:return f.RS_BLOCK_TABLE[4*(a-1)+2];case 2:return f.RS_BLOCK_TABLE[4*(a-1)+3]}},g.prototype={get:function(a){return 1==(this.buffer[Math.floor(a/8)]>>>7-a%8&1)},put:function(a,b){for(var c=0;b>c;c++)this.putBit(1==(a>>>b-c-1&1))},getLengthInBits:function(){return this.length},putBit:function(a){var b=Math.floor(this.length/8);this.buffer.length<=b&&this.buffer.push(0),a&&(this.buffer[b]|=128>>>this.length%8),this.length++}},"string"==typeof b&&(b={text:b}),b=a.extend({},{render:"canvas",width:256,height:256,typeNumber:-1,correctLevel:2,background:"#ffffff",foreground:"#000000"},b),this.each(function(){var c;if("canvas"==b.render){c=new d(b.typeNumber,b.correctLevel),c.addData(b.text),c.make();var e=document.createElement("canvas");e.width=b.width,e.height=b.height;for(var f=e.getContext("2d"),g=b.width/c.getModuleCount(),h=b.height/c.getModuleCount(),i=0;i<c.getModuleCount();i++)for(var j=0;j<c.getModuleCount();j++){f.fillStyle=c.isDark(i,j)?b.foreground:b.background;var k=Math.ceil((j+1)*g)-Math.floor(j*g),l=Math.ceil((i+1)*g)-Math.floor(i*g);f.fillRect(Math.round(j*g),Math.round(i*h),k,l)}}else for(c=new d(b.typeNumber,b.correctLevel),c.addData(b.text),c.make(),e=a("<table></table>").css("width",b.width+"px").css("height",b.height+"px").css("border","0px").css("border-collapse","collapse").css("background-color",b.background),f=b.width/c.getModuleCount(),g=b.height/c.getModuleCount(),h=0;h<c.getModuleCount();h++)for(i=a("<tr></tr>").css("height",g+"px").appendTo(e),j=0;j<c.getModuleCount();j++)a("<td></td>").css("width",f+"px").css("background-color",c.isDark(h,j)?b.foreground:b.background).appendTo(i);c=e,jQuery(c).appendTo(this)})}}(jQuery),+function(a){"use strict";var b=function(b,c){var d={className:"",placement:"top",title:"",leaveTime:0,removeTime:0,isRemove:!0,container:"body"};c=a.extend({},d,c),this.init(b,c)};b.VERSION="1.9.0",b.prototype={constructor:b,init:function(b){var c=this;a(b).on("click",function(d){d.preventDefault(),c.show({title:a(b).data("title"),url:a(b).data("url")})})},show:function(b){var c=b.title.toLowerCase(),d="mp4"==c?"Video":c;d="video"==d.toLowerCase()||"demo"==d.toLowerCase()?d+" Appreciation":d;var e=(window.innerHeight||a(window).height())-40;e=Math.min(e,900);var f=(e-57)*(16/9)+16;if(f+16+40>window.innerWidth&&(f=window.innerWidth-16-40,e=9/16*f+57),"mp4"!=c)var g="max-width: "+f+"px;height: 100%;max-height: "+e+"px;";else var g="width: "+f+"px;height: "+e+"px;";var h=new ModalBox({title:"Video",desc:"Video",widthModel:"0",widthStyle:g,className:"white",isEasyClose:!0});h.getcCentered().height("100%");var i=a("<div class='bomb-show-title'>"+d+"</div>"),j=a("<div class='bomb-show-box'></div>"),k=1,l=a('<video class="bomb-show-iframe fs-transparent" src="'+b.url+'" controls="controls" autoplay="autoplay" error="ddd"></video>'),m=a("<div class='fs-loading-bg'><div class='fs-loading-mid'><i class='fa fa-spinner fa-spin'></i></div></div>");l.on("error",function(){1==k?(console.log("========2"),l[0].load(),k++):console.log("0----------1")}),l[0].addEventListener("canplay",function(a){console.log("=========21");var b=this.videoWidth,c=this.videoHeight,d=b/c,e=j.width(),f=j.height(),g=e/f,h=e,i=f/d;d>g?(i=f,h=f*d):g>d&&(h=e,i=e/d),l.css({width:h,height:i}),m.remove(),l.removeClass("fs-transparent"),console.log(a),l[0].play()}),j.append(m).append(l),h.getHeader().empty().append(i),h.getPanel().addClass("bomb-show-panel").append(j),h.launch()}},a.fn.bombShow=function(a){var c=new b(this,a);return c},a.fn.bombShow.Constructor=b;var c=a.fn.bombShow;a.fn.bombShow.noConflict=function(){return a.fn.bombShow=c,this},a(window).on("load.hf.bombshow",function(){a.each(a(document).find("[data-toggle=bombshow][data-title!='']"),function(b,c){var d=a(c),e=d.attr("data-container")||"",f=a("body");if(e){var g=d.parents("."+e);g.length>0&&(f=g)}d.bombShow({title:d.attr("data-title"),placement:d.attr("data-placement")||"top",container:f})})})}(jQuery),BookDownloadPanel.prototype={constructor:BookDownloadPanel,init:function(a,b,c){var d="/download/download-pdf-file.php?str="+b,e="/download/download-book-zip-online.php?str="+b,f="/download/download-book-exe-zip-online.php?str="+b,g="/download/download-exe-online.php?str="+b,h="/download/download-macapp-zip-online.php?str="+b;this.panel=$("<div class='cc-light-download-panel'></div>"),this.panelTitle=$("<p class='cc-panel-title text-left'>Check box to activate the download link for the public.</p>"),this.downloadContainer=$("<div class='cc-light-box-container'></div>"),this.pdfDownload=$("<div class='cc-pdf-download'></div>"),this.pdfInput=$("<div class='checked-wrap cc-left'></div>"),this.pdfInputCheck=$("<div class='check-icon'></div>"),this.pdfTips=$("<span class='cc-download-tips'></span>"),this.pdfTitle=$("<h4 class='cc-pdf-title text-left'><span class='cc-pdf-icon'></span>PDF</h4>"),this.pdfBtn=$("<div class='cc-pdf-btn button-pure' data-exclude='exclude'>Download</div>"),this.pdfDownloadLink=$("<input class='cc-input-text cc-download-link cc-hide' value='https://"+location.host+d+"' data-exclude='exclude'>"),this.bottomContainer=$("<div class='cc-light-bottom-container'></div>"),this.bouncesContent=$("<p class='cc-bounces-num text-left'>The remaining bounces: </p>"),this.countText=$("<span>"+(parseInt(fh5.config_output_limit)-parseInt(fh5.session_output))+"/"+parseInt(fh5.config_output_limit)+"</span>"),this.zipDownload=$("<div class='cc-zip-download'></div>"),this.zipInput=$("<div class='checked-wrap cc-left'></div>"),this.zipInputCheck=$("<div class='check-icon'></div>"),this.zipTitle=$("<h4 class='cc-zip-title text-left'><span class='cc-zip-icon'></span>HTML </h4>"),this.zipTips=$("<span class='cc-download-tips'></span>"),this.zipCheckBtn=$("<div class='cc-zip-check-btn button-pure' data-exclude='exclude'></div>"),this.zipBtn=$("<div class='cc-zip-btn button-pure' data-exclude='exclude'>Download</div>"),this.zipDownloadLink=$("<input class='cc-input-text cc-download-link cc-hide' value='https://"+location.host+e+"' data-exclude='exclude'>"),this.zipExeDownload=$("<div class='cc-zipExe-download'></div>"),this.zipExeInput=$("<div class='checked-wrap cc-left'></div>"),this.zipExeInputCheck=$("<div class='check-icon'></div>"),this.zipExeTitle=$("<h4 class='cc-zipExe-title text-left'><span class='cc-zipExe-icon'></span>EXE <span class='cc-title-span'>(The antivirus software will NOT misunderstand it as a virus.)</span></h4>"),this.zipExeTips=$("<span class='cc-download-tips'></span>"),this.zipExeCheckBtn=$("<div class='cc-zipExe-check-btn button-pure' data-exclude='exclude'></div>"),this.zipExeBtn=$("<div class='cc-zipExe-btn button-pure' data-exclude='exclude'>Download</div>"),this.zipExeDownloadLink=$("<input class='cc-input-text cc-download-link cc-hide' value='https://"+location.host+f+"' data-exclude='exclude'>"),this.exeDownload=$("<div class='cc-exe-download'></div>"),this.exeInput=$("<div class='checked-wrap cc-left'></div>"),this.exeInputCheck=$("<div class='check-icon'></div>"),this.exeTitle=$("<h4 class='cc-exe-title text-left'><span class='cc-exe-icon'></span>EXE <span class='cc-title-span'> (Some antivirus software may misunderstand it as a virus.)</span></h4>"),this.exeTips=$("<span class='cc-download-tips'></span>"),this.exeCheckBtn=$("<div class='cc-exe-check-btn button-pure' data-exclude='exclude'></div>"),this.exeBtn=$("<div class='cc-exe-btn button-pure' data-exclude='exclude'>Download</div>"),this.exeDownloadLink=$("<input class='cc-input-text cc-download-link cc-hide' value='https://"+location.host+g+"' data-exclude='exclude'>"),this.macAppDownload=$("<div class='cc-macApp-download cc-pdf-border-bottom'></div>"),this.macAppInput=$("<div class='checked-wrap cc-left'></div>"),this.macAppInputCheck=$("<div class='check-icon'></div>"),this.macAppTitle=$("<h4 class='cc-macApp-title text-left'><span class='cc-macApp-icon'></span>MAC App</h4>"),this.macAppTips=$("<span class='cc-download-tips'></span>"),this.macAppCheckBtn=$("<div class='cc-macApp-check-btn button-pure' data-exclude='exclude'></div>"),this.macAppBtn=$("<div class='cc-macApp-btn button-pure' data-exclude='exclude'>Download</div>"),this.macAppDownloadLink=$("<input class='cc-input-text cc-download-link cc-hide' value='https://"+location.host+h+"' data-exclude='exclude'>"),this.hasNoPoionts=$("<div class='cc-no-points'></div>"),this.tipsContainer=$("<div class='cc-tips-container'></div>"),this.tipsTitle=$("<h4 class='text-left cc-tips-title'>Tips:</h5>"),this.tipsContent=$("<div class='cc-tips-desc text-left'></div>"),this.tips1=$("<span>1.It requires to package the book file when you first download the book, each package will consume one bounce/credit.</span>"),this.tips2=$("<span>2.If you download the book which has been packaged, it does not consume the bounce. But once the book has been modified and saved, it requires to package the book again, and it consumes one bounce.</span>"),this.tips3=$("<span>3.Only Platinum and Enterprise users are allowed to activate Download Link for readers to download the book.</span>"),this.tips4=$("<span>4.Please package the book file before activating the download link for readers to download the book.</span>"),this.panel.append(this.panelTitle).append(this.downloadContainer.append(this.pdfDownload.append(this.pdfInput.append(this.pdfInputCheck)).append(this.pdfTitle.append(this.pdfTips)).append(this.pdfBtn).append(this.pdfDownloadLink)).append(this.zipDownload.append(this.zipInput.append(this.zipInputCheck)).append(this.zipTitle.append(this.zipTips)).append(this.zipCheckBtn).append(this.zipBtn).append(this.zipDownloadLink)).append(this.zipExeDownload.append(this.zipExeInput.append(this.zipExeInputCheck)).append(this.zipExeTitle.append(this.zipExeTips)).append(this.zipExeCheckBtn).append(this.zipExeBtn).append(this.zipExeDownloadLink)).append(this.exeDownload.append(this.exeInput.append(this.exeInputCheck)).append(this.exeTitle.append(this.exeTips)).append(this.exeCheckBtn).append(this.exeBtn).append(this.exeDownloadLink)).append(this.macAppDownload.append(this.macAppInput.append(this.macAppInputCheck)).append(this.macAppTitle.append(this.macAppTips)).append(this.macAppCheckBtn).append(this.macAppBtn).append(this.macAppDownloadLink))).append(this.bottomContainer).append(this.tipsContainer.append(this.tipsTitle).append(this.tipsContent.append(this.tips1).append(this.tips2).append(this.tips3).append(this.tips4))),this.options.isReader?(this.downloadContainer.remove(),this.panel.addClass("cc-light-download-border cc-light-download-panel-cursor"),this.options.isDownload&&(this.options.isDownload.match("1")&&this.panel.append(this.pdfDownload),this.options.isDownload.match("2")&&this.panel.append(this.zipDownload),this.options.isDownload.match("3")&&this.panel.append(this.zipExeDownload),this.options.isDownload.match("4")&&this.panel.append(this.exeDownload),this.options.isDownload.match("5")&&this.panel.append(this.macAppDownload)),this.panelTitle.add(this.pdfDownloadLink).add(this.bottomContainer).add(this.pdfInput).add(this.zipInput).add(this.zipExeInput).add(this.exeInput).add(this.macAppInput).add(this.pdfImport).add(this.zipCheckBtn).add(this.zipExeCheckBtn).add(this.exeCheckBtn).add(this.macAppCheckBtn).add(this.tipsContainer).remove()):(this.checkFile(a),2==parseInt(fh5.uType)||3==parseInt(fh5.uType)?(this.pdfDownload.addClass("cc-pdf-border-bottom"),this.bottomContainer.append(this.zipDownload).append(this.zipExeDownload).append(this.exeDownload).append(this.macAppDownload),this.zipDownload.before(this.bouncesContent.append(this.countText))):(0==parseInt(fh5.uType)||4==parseInt(fh5.uType)||5==parseInt(fh5.uType))&&(this.bottomContainer.hide(),this.pdfDownload.removeClass("cc-pdf-border-bottom")),parseInt(fh5.uType)<4?(this.zipCheckBtn.hide(),this.zipExeCheckBtn.hide(),this.exeCheckBtn.hide(),this.macAppCheckBtn.hide()):this.downloadContainer.addClass("platinum-enterprise")),"1"==this.options.type?this.pdfBtn.on("click",this.downloadPdf.bind(this,c)):(this.pdfInput.removeClass("checked"),this.pdfInputCheck.addClass("disabled"),this.pdfDownloadLink.addClass("cc-hide"),this.pdfInputCheck.hints({content:"PDF file can be downloaded only if the flipbook is uploaded from the cloud platform."}),this.pdfBtn.addClass("disabled"),this.pdfBtn.hints({content:"PDF file can be downloaded only if the flipbook is uploaded from the cloud platform."})),"1"==this.options.type||"2"==this.options.type?(this.zipBtn.on("click",this.downloadZip.bind(this,a,c)),this.zipExeBtn.on("click",this.downloadZipExe.bind(this,a,c)),this.exeBtn.on("click",this.downloadExe.bind(this,a,c)),this.macAppBtn.on("click",this.downloadMacApp.bind(this,a,c))):(this.zipBtn.addClass("disabled"),this.zipExeBtn.addClass("disabled"),this.exeBtn.addClass("disabled"),this.macAppBtn.addClass("disabled"),this.zipBtn.attr("title","FlipBook Version is not available for this book because it was uploaded from an old version of FlipHTML5 Desktop Client. Please go to home page to download the latest version."),this.zipExeBtn.attr("title","FlipBook Version is not available for this book because it was uploaded from an old version of FlipHTML5 Desktop Client. Please go to home page to download the latest version."),this.exeBtn.attr("title","FlipBook Version is not available for this book because it was uploaded from an old version of FlipHTML5 Desktop Client. Please go to home page to download the latest version."),this.macAppBtn.attr("title","FlipBook Version is not available for this book because it was uploaded from an old version of FlipHTML5 Desktop Client. Please go to home page to download the latest version.")),this.options.isReader||("1"==this.options.type&&this.pdfInput.on("click",this.toggleContent.bind(this,this.pdfInput,this.pdfDownloadLink,!0)),this.zipInput.on("click",this.toggleContent.bind(this,this.zipInput,this.zipDownloadLink,!1)),this.zipExeInput.on("click",this.toggleContent.bind(this,this.zipExeInput,this.zipExeDownloadLink,!1)),this.exeInput.on("click",this.toggleContent.bind(this,this.exeInput,this.exeDownloadLink,!1)),this.macAppInput.on("click",this.toggleContent.bind(this,this.macAppInput,this.macAppDownloadLink,!1))),this.pdfDownloadLink.add(this.zipDownloadLink).add(this.zipExeDownloadLink).add(this.exeDownloadLink).add(this.macAppDownloadLink).on("focus",function(){$(this).select()}),this.lightBox.getPanel().append(this.panel).append(this.hasNoPoionts),this.lightBox.launch();var i=this.lightBox.getSaveBtn();i.on("click",this.saveConfig.bind(this))},downloadPdf:function(a){var b=this,c=window;b.pdfBtn.hasClass("disabled")||$.ajax({url:"/download/download-pdf-file.php",type:"GET",dataType:"json",data:{str:a},beforeSend:function(){b.pdfTips.html(""),b.hasNoPoionts.html(""),b.pdfBtn.addClass("disabled")},success:function(a){switch(b.pdfBtn.removeClass("disabled"),a.status.toString()){case"1":b.options.isReader&&sta&&sta.bookDownload(b.options.bookId),location.href.match("localhost")||(c.location.href=a.url,ga&&ga("send","event","pdf-download",c.location.href,document.location.pathname)),0==parseInt(fh5.uType)&&b.options.userid!=b.options.bookUserId&&new PDFDownloadingPanel({points:a.points});break;default:b.options.isReader&&b.hasNoPoionts.html("*"+a.message),b.pdfTips.addClass("cc-tips-red")}},error:function(){}})},downloadZip:function(a,b){function c(){$.ajax({url:"/download/download-book-zip-online.php",type:"GET",dataType:"json",data:{str:b},beforeSend:function(b){d.zipBtn.addClass("disabled"),d.zipTips.removeClass("cc-tips-red"),d.hasNoPoionts.html(""),f||d.zipCheckBtn.addClass("disabled"),d.options.isReader||d.zipTips.html(1==b.zip||1==a.zip||f?"":"(Packaging...)")},success:function(b){switch(d.zipBtn.removeClass("disabled"),d.zipTips.html(""),f||d.zipCheckBtn.removeClass("disabled"),b.status.toString()){case"1":d.options.isReader&&sta&&sta.bookDownload(d.options.bookId),fh5.session_output=b.outputs,d.countText.html(parseInt(fh5.config_output_limit)-parseInt(fh5.session_output)+"/"+parseInt(fh5.config_output_limit)),d.zipCheckBtn.html("<span class='cc-file-created'>File packaged</span>"),d.zipCheckBtn.addClass("button-pure-green"),d.zipCheckBtn.removeClass("button-pure-red"),e.location.href=b.url,0==parseInt(fh5.uType)&&d.options.userid!=d.options.bookUserId&&new PDFDownloadingPanel({points:b.points}),d.options.isReader||(a.zip=1);break;default:d.zipTips.addClass("cc-tips-red"),d.options.isReader&&d.hasNoPoionts.html("*"+b.message),d.options.isReader||(2==parseInt(fh5.uType)||3==parseInt(fh5.uType))&&0==a.zip&&(5==fh5.session_output||30==parseInt(fh5.session_output))&&d.zipTips.html("(Your bounce reaches a limit.)")}},error:function(){f||d.zipCheckBtn.removeClass("disabled"),d.zipBtn.removeClass("disabled"),d.zipTips.html("(Package failed, please retry.)"),d.zipTips.addClass("cc-tips-red")}})}var d=this,e=window,f=d.zipCheckBtn.hasClass("button-pure-green");d.zipBtn.hasClass("disabled")||(parseInt(fh5.uType)<1&&!d.options.isReader?new UpgradePanel(fh5.pageData.upgrade.DownloadZip):2==parseInt(fh5.uType)||3==parseInt(fh5.uType)?d.options.isReader?c():0==a.zip?utils.fixedConfirm("Confirm to download file","This download will consume one bounce/credit, do you want to continue?",function(){c()}):c():c())},downloadZipExe:function(a,b){function c(){$.ajax({url:"/download/download-book-exe-zip-online.php",type:"GET",dataType:"json",data:{str:b},beforeSend:function(b){d.zipExeBtn.addClass("disabled"),d.zipExeTips.removeClass("cc-tips-red"),d.hasNoPoionts.html(""),f||d.zipExeCheckBtn.addClass("disabled"),d.options.isReader||d.zipExeTips.html(1==b.exezip||1==a.exezip||f?"":"(Packaging...)")},success:function(b){switch(d.zipExeBtn.removeClass("disabled"),d.zipExeTips.html(""),f||d.zipExeCheckBtn.removeClass("disabled"),b.status.toString()){case"1":d.options.isReader&&sta&&sta.bookDownload(d.options.bookId),fh5.session_output=b.outputs,d.countText.html(parseInt(fh5.config_output_limit)-parseInt(fh5.session_output)+"/"+parseInt(fh5.config_output_limit)),d.zipExeCheckBtn.html("<span class='cc-file-created'>File packaged</span>"),d.zipExeCheckBtn.addClass("button-pure-green"),d.zipExeCheckBtn.removeClass("button-pure-red"),e.location.href=b.url,0==parseInt(fh5.uType)&&d.options.userid!=d.options.bookUserId&&new PDFDownloadingPanel({points:b.points}),d.options.isReader||(a.exezip=1);break;default:d.zipExeTips.addClass("cc-tips-red"),d.options.isReader&&d.hasNoPoionts.html("*"+b.message),d.options.isReader||(2==parseInt(fh5.uType)||3==parseInt(fh5.uType))&&0==a.exezip&&(5==fh5.session_output||30==parseInt(fh5.session_output))&&(d.zipExeTips.html("(Your bounce reaches a limit.)"),d.zipExeTips.addClass("cc-tips-red"))}},error:function(){f||d.zipExeCheckBtn.removeClass("disabled"),d.zipExeBtn.removeClass("disabled"),d.zipExeTips.html("(Package failed, please retry.)"),d.zipExeTips.addClass("cc-tips-red")}})}var d=this,e=window,f=d.zipExeCheckBtn.hasClass("button-pure-green");d.zipExeBtn.hasClass("disabled")||(parseInt(fh5.uType)<1&&!d.options.isReader?new UpgradePanel(fh5.pageData.upgrade.DownloadZip):2==parseInt(fh5.uType)||3==parseInt(fh5.uType)?d.options.isReader?c():0==a.exezip?utils.fixedConfirm("Confirm to download file","This download will consume one bounce/credit,are your sure to download?",function(){c()}):c():c())},downloadExe:function(a,b){function c(){$.ajax({url:"/download/download-exe-online.php",type:"GET",dataType:"json",data:{str:b},beforeSend:function(b){d.exeBtn.addClass("disabled"),d.exeTips.removeClass("cc-tips-red"),d.hasNoPoionts.html(""),f||d.exeCheckBtn.addClass("disabled"),d.options.isReader||d.exeTips.html(1==b.exe||1==a.exe||f?"":"(Packaging...)")},success:function(b){switch(d.exeBtn.removeClass("disabled"),d.exeTips.html(""),f||d.exeCheckBtn.removeClass("disabled"),b.status.toString()){case"1":d.options.isReader&&sta&&sta.bookDownload(d.options.bookId),fh5.session_output=b.outputs,d.countText.html(parseInt(fh5.config_output_limit)-parseInt(fh5.session_output)+"/"+parseInt(fh5.config_output_limit)),d.exeCheckBtn.html("<span class='cc-file-created'>File packaged</span>"),d.exeCheckBtn.addClass("button-pure-green"),d.exeCheckBtn.removeClass("button-pure-red"),e.location.href=b.url,0==parseInt(fh5.uType)&&d.options.userid!=d.options.bookUserId&&new PDFDownloadingPanel({points:b.points}),d.options.isReader||(a.exe=1);break;default:d.options.isReader&&d.hasNoPoionts.html("*"+b.message),d.exeTips.addClass("cc-tips-red"),d.options.isReader||(2==parseInt(fh5.uType)||3==parseInt(fh5.uType))&&0==a.exe&&(5==fh5.session_output||30==parseInt(fh5.session_output))&&(d.exeTips.html("(Your bounce reaches a limit.)"),d.exeTips.addClass("cc-tips-red"))}},error:function(){f||d.exeCheckBtn.removeClass("disabled"),d.exeBtn.removeClass("disabled"),d.exeTips.html("(Package failed, please retry.)"),d.exeTips.addClass("cc-tips-red")}})}var d=this,e=window,f=d.exeCheckBtn.hasClass("button-pure-green");d.exeBtn.hasClass("disabled")||(parseInt(fh5.uType)<1&&!d.options.isReader?new UpgradePanel(fh5.pageData.upgrade.DownloadZip):2==parseInt(fh5.uType)||3==parseInt(fh5.uType)?d.options.isReader?c():0==a.exe?utils.fixedConfirm("Confirm to download file","This download will consume one bounce/credit, do you want to continue?",function(){c()}):c():c())},downloadMacApp:function(a,b){function c(){$.ajax({url:"/download/download-macapp-zip-online.php",type:"GET",dataType:"json",data:{str:b},beforeSend:function(b){d.macAppBtn.addClass("disabled"),d.macAppTips.removeClass("cc-tips-red"),d.hasNoPoionts.html(""),f||d.macAppCheckBtn.addClass("disabled"),d.options.isReader||d.macAppTips.html(1==b.macapp||1==a.macapp||f?"":"(Packaging...)")},success:function(b){switch(d.macAppBtn.removeClass("disabled"),d.macAppTips.html(""),f||d.macAppCheckBtn.removeClass("disabled"),b.status.toString()){case"1":d.options.isReader&&sta&&sta.bookDownload(d.options.bookId),fh5.session_output=b.outputs,d.countText.html(parseInt(fh5.config_output_limit)-parseInt(fh5.session_output)+"/"+parseInt(fh5.config_output_limit)),d.macAppCheckBtn.html("<span class='cc-file-created'>File packaged</span>"),d.macAppCheckBtn.addClass("button-pure-green"),d.macAppCheckBtn.removeClass("button-pure-red"),e.location.href=b.url,0==parseInt(fh5.uType)&&d.options.userid!=d.options.bookUserId&&new PDFDownloadingPanel({points:b.points}),d.options.isReader||(a.macapp=1);break;default:d.options.isReader&&d.hasNoPoionts.html("*"+b.message),d.macAppTips.addClass("cc-tips-red"),d.options.isReader||(2==parseInt(fh5.uType)||3==parseInt(fh5.uType))&&0==a.macapp&&(5==fh5.session_output||30==parseInt(fh5.session_output))&&(d.macAppTips.addClass("cc-tips-red"),d.macAppTips.html("(Your bounce reaches a limit.)"))}},error:function(){f||d.macAppCheckBtn.removeClass("disabled"),d.macAppBtn.removeClass("disabled"),d.macAppTips.html("(Package failed, please retry.)"),d.macAppTips.addClass("cc-tips-red")}})}var d=this,e=window,f=d.macAppCheckBtn.hasClass("button-pure-green");d.macAppBtn.hasClass("disabled")||(parseInt(fh5.uType)<1&&!d.options.isReader?new UpgradePanel(fh5.pageData.upgrade.DownloadZip):2==parseInt(fh5.uType)||3==parseInt(fh5.uType)?d.options.isReader?c():0==a.macapp?utils.fixedConfirm("Confirm to download file","This download will consume one bounce/credit, do you want to continue?",function(){c()}):c():c())},packageZip:function(){var a=this;$.base64.utf8encode=!0;var b=$.base64.btoa("bookId="+a.options.bookId+"&isDownLoad=0"),c=b.split("").reverse().join("").replace(/=/g,""),d=a.zipCheckBtn.hasClass("button-pure-green");d||a.zipCheckBtn.hasClass("disabled")||$.ajax({url:"/download/download-book-zip-online.php",type:"GET",dataType:"json",data:{str:c},beforeSend:function(){a.zipTips.html(""),a.zipCheckBtn.html("<i class='fa fa-spinner fa-spin' data-exclude='exclude'></i> Packaging"),a.zipCheckBtn.removeClass("button-pure-green"),a.zipCheckBtn.removeClass("button-pure-red"),a.zipCheckBtn.addClass("disabled"),a.zipBtn.addClass("disabled")},success:function(b){switch(a.zipCheckBtn.removeClass("disabled"),a.zipBtn.removeClass("disabled"),b.status.toString()){case"1":a.zipCheckBtn.html("<span class='cc-file-created'>File packaged</span>"),a.zipCheckBtn.addClass("button-pure-green"),a.zipTips.html(""),fh5.session_output=b.outputs,a.countText.html(parseInt(fh5.config_output_limit)-parseInt(fh5.session_output)+"/"+parseInt(fh5.config_output_limit));break;default:a.zipCheckBtn.html("Package book file"),a.zipCheckBtn.addClass("button-pure-red")}},error:function(){}})},packageZipExe:function(){var a=this;$.base64.utf8encode=!0;var b=$.base64.btoa("bookId="+a.options.bookId+"&isDownLoad=0"),c=b.split("").reverse().join("").replace(/=/g,""),d=a.zipExeCheckBtn.hasClass("button-pure-green");d||a.zipExeCheckBtn.hasClass("disabled")||$.ajax({url:"/download/download-book-exe-zip-online.php",type:"GET",dataType:"json",data:{str:c},beforeSend:function(){a.zipExeTips.html(""),a.zipExeCheckBtn.html("<i class='fa fa-spinner fa-spin' data-exclude='exclude'></i> Packaging"),a.zipExeCheckBtn.removeClass("button-pure-green"),a.zipExeCheckBtn.removeClass("button-pure-red"),a.zipExeCheckBtn.addClass("disabled"),a.zipExeBtn.addClass("disabled")},success:function(b){switch(a.zipExeCheckBtn.removeClass("disabled"),a.zipExeBtn.removeClass("disabled"),b.status.toString()){case"1":a.zipExeCheckBtn.html("<span class='cc-file-created'>File packaged</span>"),a.zipExeCheckBtn.addClass("button-pure-green"),a.zipExeTips.html(""),fh5.session_output=b.outputs,a.countText.html(parseInt(fh5.config_output_limit)-parseInt(fh5.session_output)+"/"+parseInt(fh5.config_output_limit));break;default:a.zipExeCheckBtn.html("Package book file"),a.zipExeCheckBtn.addClass("button-pure-red")}},error:function(){}})},packageExe:function(){var a=this;$.base64.utf8encode=!0;var b=$.base64.btoa("bookId="+a.options.bookId+"&isDownLoad=0"),c=b.split("").reverse().join("").replace(/=/g,""),d=a.exeCheckBtn.hasClass("button-pure-green");d||a.exeCheckBtn.hasClass("disabled")||$.ajax({url:"/download/download-exe-online.php",type:"GET",dataType:"json",data:{str:c},beforeSend:function(){a.exeTips.html(""),a.exeCheckBtn.html("<i class='fa fa-spinner fa-spin' data-exclude='exclude'></i> Packaging"),a.exeCheckBtn.removeClass("button-pure-green"),a.exeCheckBtn.removeClass("button-pure-red"),a.exeCheckBtn.addClass("disabled"),a.exeBtn.addClass("disabled")
},success:function(b){switch(a.exeCheckBtn.removeClass("disabled"),a.exeBtn.removeClass("disabled"),b.status.toString()){case"1":a.exeCheckBtn.html("<span class='cc-file-created'>File packaged</span>"),a.exeCheckBtn.addClass("button-pure-green"),a.exeTips.html(""),fh5.session_output=b.outputs,a.countText.html(parseInt(fh5.config_output_limit)-parseInt(fh5.session_output)+"/"+parseInt(fh5.config_output_limit));break;default:a.exeCheckBtn.html("Package book file"),a.exeCheckBtn.addClass("button-pure-red")}},error:function(){}})},packageMacApp:function(){var a=this;$.base64.utf8encode=!0;var b=$.base64.btoa("bookId="+a.options.bookId+"&isDownLoad=0"),c=b.split("").reverse().join("").replace(/=/g,""),d=a.macAppCheckBtn.hasClass("button-pure-green");d||a.macAppCheckBtn.hasClass("disabled")||$.ajax({url:"/download/download-macapp-zip-online.php",type:"GET",dataType:"json",data:{str:c},beforeSend:function(){a.macAppTips.html(""),a.macAppCheckBtn.html("<i class='fa fa-spinner fa-spin' data-exclude='exclude'></i> Packaging"),a.macAppCheckBtn.removeClass("button-pure-green"),a.macAppCheckBtn.removeClass("button-pure-red"),a.macAppCheckBtn.addClass("disabled"),a.macAppBtn.addClass("disabled")},success:function(b){switch(a.macAppCheckBtn.removeClass("disabled"),a.macAppBtn.removeClass("disabled"),b.status.toString()){case"1":a.macAppCheckBtn.html("<span class='cc-file-created'>File packaged</span>"),a.macAppCheckBtn.addClass("button-pure-green"),a.macAppTips.html(""),fh5.session_output=b.outputs,a.countText.html(parseInt(fh5.config_output_limit)-parseInt(fh5.session_output)+"/"+parseInt(fh5.config_output_limit));break;default:a.macAppCheckBtn.html("Package book file"),a.macAppCheckBtn.addClass("button-pure-red")}},error:function(){}})},checkFile:function(a){var b=this;a&&("1"==a.zip?(b.zipCheckBtn.html("<span class='cc-file-created'>File packaged</span>"),b.zipCheckBtn.addClass("button-pure-green")):(b.zipCheckBtn.html("Package book file"),b.zipCheckBtn.addClass("button-pure-red"),b.zipCheckBtn.on("click",function(){b.packageZip()})),"1"==a.exezip?(b.zipExeCheckBtn.html("<span class='cc-file-created'>File packaged</span>"),b.zipExeCheckBtn.addClass("button-pure-green cc-file-exsit")):(b.zipExeCheckBtn.html("Package book file"),b.zipExeCheckBtn.addClass("button-pure-red"),b.zipExeCheckBtn.on("click",function(){b.packageZipExe()})),"1"==a.exe?(b.exeCheckBtn.html("<span class='cc-file-created'>File packaged</span>"),b.exeCheckBtn.addClass("button-pure-green")):(b.exeCheckBtn.html("Package book file"),b.exeCheckBtn.addClass("button-pure-red"),b.exeCheckBtn.on("click",function(){b.packageExe()})),"1"==a.macapp?(b.macAppCheckBtn.html("<span class='cc-file-created'>File packaged</span>"),b.macAppCheckBtn.addClass("button-pure-green")):(b.macAppCheckBtn.html("Package book file"),b.macAppCheckBtn.addClass("button-pure-red"),b.macAppCheckBtn.on("click",function(){b.packageMacApp()}))),a.isDownload&&("0"==a.isDownload&&(b.pdfInput.removeClass("checked"),b.pdfDownloadLink.addClass("cc-hide")),a.isDownload.match("1")?(b.pdfInput.addClass("checked"),b.pdfDownloadLink.removeClass("cc-hide")):(b.pdfInput.removeClass("checked"),b.pdfDownloadLink.addClass("cc-hide")),a.isDownload.match("2")&&(b.zipInput.addClass("checked"),b.zipDownloadLink.removeClass("cc-hide")),a.isDownload.match("3")&&(b.zipExeInput.addClass("checked"),b.zipExeDownloadLink.removeClass("cc-hide")),a.isDownload.match("4")&&(b.exeInput.addClass("checked"),b.exeDownloadLink.removeClass("cc-hide")),a.isDownload.match("5")&&(b.macAppInput.addClass("checked"),b.macAppDownloadLink.removeClass("cc-hide")))},toggleContent:function(a,b,c){function d(){e?f?(a.addClass("checked"),b.slideDown()):(a.removeClass("checked"),b.slideUp()):f?(b.slideDown(),a.addClass("checked")):(b.slideUp(),a.removeClass("checked"))}var e=a.has(":checked"),f=b.is(":hidden"),g=$(event.target),h=$("[data-exclude='exclude']");g.is(h)||(0!=parseInt(fh5.uType)?2==parseInt(fh5.uType)||3==parseInt(fh5.uType)?c?d():new UpgradePanel(fh5.pageData.upgrade.BounceCheckTips):d():new UpgradePanel(c?fh5.pageData.upgrade.PdfCheckTips:fh5.pageData.upgrade.BounceCheckTips))},saveConfig:function(){var a=this,b=a.pdfInput.hasClass("checked")?"1":"",c=a.zipInput.hasClass("checked")?"2":"",d=a.zipExeInput.hasClass("checked")?"3":"",e=a.exeInput.hasClass("checked")?"4":"",f=a.macAppInput.hasClass("checked")?"5":"",g=(b+c+d+e+f).replace(/\d(?=(\d{1})+$)/g,"$&,");""==b&&""==c&&""==d&&""==e&&""==f&&(g="0"),$.ajax({url:"/download/save-download-setting-online.php",type:"post",dataType:"json",data:{bookId:a.options.bookId,isDownload:g},beforeSend:function(){},success:function(){a.lightBox.cancel(),a.options.saveCallback&&a.options.saveCallback(g)},error:function(){}})}},BookcaseEmbedPanel.prototype={resizeIframe:function(a,b){this.iframeContainer.stop().animate({maxWidth:a,height:b,marginLeft:(900-a)/2},200),this.customWidthInput.val(a),this.customHeightInput.val(b),this.options.width=a,this.options.height=b,this.setCode()},setCode:function(a){var a=a||(this.options.domainUrl?this.options.domainUrl:this.options.url),b="";b="<iframe style='width:"+this.options.width+"px;height:"+this.options.height+"px' src='"+a+"' "+this.options.iframeAttr+"></iframe>",this.iframeStepCode1.text(b)}},BuyBackPanel.prototype={},BuyPanel.prototype={purchase:function(){var a=this.isFlipH5?"/bookorder/add-bookorder-online.php?id=":"https://fliphtml5.com/bookorder/add-bookorder-online.php?id=";window.open(a+this.options.bookId),this.lightbox.cancel(),new BuyBackPanel({buyPanelOpts:this.options})}},ContactBall.prototype={constructor:ContactBall,scrollBall:function(){var a=this;clearTimeout(a.timeoutId),a.timeoutId=setTimeout(function(){a.ball.stop().animate({top:$(document).scrollTop()+70,opacity:1},400)},400)}},Array.prototype.ff_removevalue=function(a){var b=this.indexOf(a);b>-1&&this.splice(b,1)},Array.prototype.ff_add=function(a){$.inArray(a,this)<0&&this.push(a)},ContactSearch.prototype={constructor:ContactSearch,create:function(){var a=this,b=$("<div class='contact-select-panel'></div>"),c=$("<div class='contact-select-search'></div>"),d=$("<input class='cc-input-text' type='text' placeholder='Search' />"),e=$("<div class='search-btn'></div>"),f=$("<div class='contact-select-content'></div>"),g=$("<div class='contact-select-th'></div>"),h=$("<div class='contact-select-all hf-checkbox'><div class='check-icon'></div><span class='check-text'>Select All</span></div>"),i=$("<div class='contact-select-asc hf-radio checked'><div class='check-icon'></div><span class='check-text'>A-Z</span></div>"),j=$("<div class='contact-select-desc hf-radio'><div class='check-icon'></div><span class='check-text'>Z-A</span></div>"),k=$("<div class='contact-select-count'>Selected: <span class='select-count'>-</span> / <span class='total-count'>-</span></div>"),l=$("<div class='contact-select-table'></div>"),m=$("<ul class='contact-select-table-content'><div class='hf-loading-spin'><i class='fa fa-spinner fa-spin'></i></div></ul>"),n=$("<div class='contact-select-okbtn button-pure button-pure-blue'><i></i>OK</div>"),o=$("<a href='/center/marketing/#My-Contacts' class='contact-linkToMarket'>Manage Contacts</a>");return h.on("click",function(){var b=$(this),c=m.children(".contact-select-row");b.hasClass("checked")?(b.removeClass("checked"),c.removeClass("checked"),a.removeSelectArr(c)):(b.addClass("checked"),c.addClass("checked"),a.addSelectArr(c))}),i.on("click",function(){var b=$(this),c=d.val().trim(),e=h.hasClass("checked");b.hasClass("checked")||(b.addClass("checked"),a.createContacts(a.contacts,m,c,"asc",e)),j.removeClass("checked")}),j.on("click",function(){var b=$(this),c=d.val().trim(),e=h.hasClass("checked");b.hasClass("checked")||(b.addClass("checked"),a.createContacts(a.contacts,m,c,"desc",e)),i.removeClass("checked")}),d.keyup(function(){var b=$(this),c=b.val().trim(),d=i.hasClass("checked")?"asc":"desc",e=h.hasClass("checked");a.createContacts(a.contacts,m,c,d,e)}),n.on("click",function(){a.options.okCallback(a.getSelectEmails()),a.lightbox.cancel()}),this.loadContacts(m),b.append(c.append(d).append(e)).append(o).append(f.append(g.append(h).append(i).append(j).append(k)).append(l.append(m))).append(n),this.$all=h,this.$asc=i,this.$t=l,this.$tc=m,this.$sIn=d,this.$sNum=k.children(".select-count"),this.$tNum=k.children(".total-count"),b},loadContacts:function(a){var b=this;$.ajax({url:"/center/db/get-contact-online.php",type:"post",dataType:"json",data:{userid:fh5.uId,isEmail:"1"},beforeSend:function(){a.empty().append("<div class='hf-loading-spin'><i class='fa fa-spinner fa-spin'></i></div>")},success:function(c){if(a.empty(),"1"==c.status){var d=b.$asc.hasClass("checked")?"asc":"desc",e=b.$all.hasClass("checked");b.contacts=c.contacts,b.$sNum.html(b.hasSelect.length),b.$tNum.html(b.contacts.length),b.createContacts(c.contacts,a,b.$sIn.val().trim(),d,e)}},error:function(){a.empty()}})},createContacts:function(a,b,c,d){var e=this;b.empty(),a.sort(e.getSortFun(d,"email")),e.contacts=a;for(var f=0;f<a.length;f++)!function(d){var f=a[d],g=$("<li data-email='"+f.email+"' class='hf-checkbox contact-select-row'><div class='check-icon'></div><div class='check-text'>"+utils.encodeHTML(f.email)+"</div></li>").addClass(e.emailIsSelect(f.email)?"checked":"");(!c||f.email.toLowerCase().indexOf(c.toLowerCase())>=0)&&(g.on("click",function(){var a=$(this);a.hasClass("checked")?(a.removeClass("checked"),e.removeSelectArr(a)):(a.addClass("checked"),e.addSelectArr(a)),e.judgeCheckAll()}),g.data("email",f.email),g.appendTo(b))}(f);e.judgeCheckAll(),b.find(".contact-select-row").length<=0&&(b.html("<div class='contact-select-none'>No result.</div>"),(null==c||""==c)&&b.append("<div class='contact-select-link'><a class='cc-blue-link-under-line' href='/center/contacts'>Manage Contacts.</a></div>"))},judgeCheckAll:function(){var a=this.$tc.children(".contact-select-row").length,b=this.$tc.children(".contact-select-row.checked").length;a==b&&0!=a?this.$all.addClass("checked"):this.$all.removeClass("checked")},getSortFun:function(a,b){var c="asc"==a?">":"<",d=new Function("a","b","return a."+b+c+"b."+b+"?1:-1");return d},getSelectEmails:function(){return this.hasSelect},createScrollBar:function(a,b){var c=$("<div class='sending-email-scrollTools'></div>"),d=$("<div class='sending-email-dragContainer'></div>"),e=$("<div class='sending-email-dragRail'></div>"),f=$("<div class='sending-email-dragOutBar'></div>"),g=$("<div class='sending-email-dragBar'></div>");c.append(d.append(f.append(g)).append(e)).appendTo(a);var h=a.height(),i=b.outerHeight();h>=i&&c.hide(),f.css({height:h*h/i}),f.on("mousedown",function(c){var d=c||event,e=d.clientY-f.position().top,g=c.which;c.stopPropagation(),1==g&&($(document).on("mousemove.scrollBar touchmove.scrollBar",function(c){c.preventDefault(),c.stopPropagation(),d=c||event;var g=d.clientY-e;0>=g?g=0:g>=a.outerHeight()-f.outerHeight()&&(g=a.outerHeight()-f.outerHeight()),f.css({top:g}),b.css({top:-g/(a.outerHeight()-f.outerHeight())*(b.outerHeight()-a.outerHeight())})}),$(document).on("mouseup.scrollBar touchend.scrollBar",function(a){var b=a||event;b.preventDefault(),b.stopPropagation(),$(document).off("mousemove.scrollBar touchmove.scrollBar"),$(document).off("mouseup.scrollBar touchend.scrollBar")}))}),mouseWheel=$.browser.mozilla?"DOMMouseScroll":"mousewheel",a.bind(mouseWheel,function(c){if(!(a.outerHeight()>=b.outerHeight())){var d,e=c.originalEvent,g=e.wheelDelta||-e.detail,h=b.position().top;return b.stop(!1,!1),g>0?d=h+a.outerHeight()/11<0?h+a.outerHeight()/11:0:0>g&&(d=b.outerHeight()-a.outerHeight()>-(h-a.outerHeight()/11)?h-a.outerHeight()/11:-(b.outerHeight()-a.outerHeight())),b.css({top:d}),f.css({top:-d/(b.outerHeight()-a.outerHeight())*(a.outerHeight()-f.outerHeight())}),c.stopPropagation(),c.preventDefault(),!1}})},addSelectArr:function(a){var b=this;a.each(function(a,c){b.hasSelect.ff_add($(c).attr("data-email"))}),b.$sNum.html(b.hasSelect.length)},removeSelectArr:function(a){var b=this;a.each(function(a,c){b.hasSelect.ff_removevalue($(c).attr("data-email"))}),b.$sNum.html(b.hasSelect.length)},emailIsSelect:function(a){var b=this;return $.inArray(a,b.hasSelect)>=0?!0:!1}},CookiePanel.prototype={getLocalStorage:function(a){try{if(window.localStorage)return window.localStorage.getItem(a);for(var b=document.cookie.split("; "),c=0;c<b.length;c++){var d=b[c].split("=");if(d[0]==a)return unescape(d[1])}return""}catch(e){}},addLocalStorage:function(a,b){try{if(window.localStorage)window.localStorage.setItem(a,b);else{var c=a+"="+escape(b),d=new Date,e=864e8;d.setTime(d.getTime()+e),c+="; expires="+d.toGMTString(),document.cookie=c}}catch(f){}},getCookieToArray:function(cookieName){var self=this;try{var cookie=self.getLocalStorage(cookieName),arr=eval(cookie);return arr||[]}catch(e){return[]}},parseJSONArrToStr:function(jsonArray){if(0!=jsonArray.length){jsonArray.length>8&&(jsonArray=jsonArray.slice(0,8),this.cookieArr=eval(jsonArray));for(var str="[",i=0;i<jsonArray.length;i++)str+="{key:"+jsonArray[i].key+",value:'"+jsonArray[i].value+"'},";return str=str.substring(0,str.length-1),str+="]"}},isInJSONArrByKeyAndValue:function(a,b,c){if(0==a.length)return!1;for(var d in a)if(a[d][b]==c)return!0;return!1},delArrayOrderKey:function(a,b){if(a)for(var c=0;c<a.length;c++)a[c].key&&a[c].key==b&&a.remove(c)},createCookie:function(){this.$cookiePanel||(this.$cookiePanel=this.createCookiePanel(this.cookieArr,this.$content))},destroy:function(){this.$cookiePanel&&(this.$cookiePanel.remove(),this.$cookiePanel=null)},addCookie:function(a){if(a&&!this.isInJSONArrByKeyAndValue(this.cookieArr,"value",a)){var b={key:(new Date).getTime(),value:a};this.cookieArr.unshift(b),this.addLocalStorage(this.cookieName,this.parseJSONArrToStr(this.cookieArr))}},createCookiePanel:function(a,b){if(0!=a.length){var c=this,d=1,e=b.offset().left,f=b.offset().top+b.outerHeight()-d,g=b.outerWidth(),h=$("<div class='keywords-cookie-panel'></div>"),i=$("<ul></ul>");this.$ulPanle=i,h.css({left:e,top:f,width:g});for(var j=0;j<a.length;j++)!function(b){var d=a[b],e=$("<li data-key='"+d.key+"' data-value='"+d.value+"'>"+d.value+"</li>"),f=$("<i class='icon icon-remove'></i>");e.on("mousedown",function(){c.$input.val(d.value),c.callback&&c.callback()}),e.hover(function(){i.children("li").removeClass("hover-active"),$(this).addClass("hover-active")},function(){$(this).removeClass("hover-active")}),f.on("mousedown",function(a){return a.preventDefault(),a.stopPropagation(),$(this).parent().remove(),i.children("li").length<1&&h.remove(),c.delArrayOrderKey(c.cookieArr,d.key),c.addLocalStorage(c.cookieName,c.parseJSONArrToStr(c.cookieArr)),!1}),i.append(e.append(f))}(j);return h.append(i).appendTo($("body")),h}}},DownloadPanel.prototype={constructor:DownloadPanel,download:function(){ga("send","event","Download",this.href,document.location.pathname)},getPanel:function(){return this.panel}},Array.prototype.hf_delRepeat=function(){for(var a,b=[],c={},d=0;null!=(a=this[d]);d++)a=a.toString().toLowerCase(),c[a]||(b.push(a),c[a]=!0);return b},EmailPanel.prototype={constructor:EmailPanel,createEmailPanel:function(){var a=this,b=$("<div class='email-panel row'></div>"),c=a.options.isAddFlag?a.createLeftPanel_two():a.createLeftPanel_one(),d=$("<div class='email-tips col-sm-12 text-left'>Tips: Please ensure that the email addresses you add are valid, if not, you will be prohibited to use this email marketing feature.</div>"),e=$("<div class='email-panel-bottom col-sm-12'><i class='fa fa-envelope-o'></i> Remaining Emails Today: <span class='email-panel-remaining-num'>-</span> / <span class='email-panel-total-num'>-</span></div>"),f=$("<span class='email-panel-bottom-more'>Want to get more email bounces? Please <a class='cc-underline' target='_blank' href='/fliphtml5-pricing.php'>upgrade</a> your account.</span>");"5"!=fh5.uType&&e.append(f),b.append(c).append(a.createRightPanel()).append(d).append(e);var g=e.find(".email-panel-remaining-num"),h=e.find(".email-panel-total-num");return $.ajax({url:"/center/db/get-email-send-info-online.php",type:"post",dataType:"json",data:{},beforeSend:function(){},success:function(b){if(1==b.status){var c=b.total-b.count;g.text(c),h.text(b.total),a.remainingCount=c,a.customDomain=b.domain}},error:function(){}}),b},createLeftPanel_one:function(){var a=this,b=$("<div class='email-left-panel col-sm-6'></div>"),c=$("<div class='email-book-content'></div>"),d=$("<iframe allowfullscreen></iframe>"),e=$("<div class='email-iframe-loading'><span class='fa fa-spinner fa-spin'></span></div>"),f=$("<div class='email-book-link'><a href='"+(a.isHTTPS?utils.pasreHttps(a.options.url):a.options.url)+"' target='_blank'>"+(a.isHTTPS?utils.pasreHttps(a.options.url):a.options.url)+"</a></div>");return setTimeout(function(){d.attr("src",a.isHTTPS?utils.pasreHttps(a.options.onlineUrl):a.options.onlineUrl),e.fadeOut(100)},300),b.append(c.append(d).append(e)).append(f),b},createLeftPanel_two:function(){var a=this;return $leftPanel=$("<div class='email-left-panel col-sm-6'></div>"),$addBookBtn=$("<div class='email-add-book-btn button-pure button-pure-blue'><span class='email-add-icon'></span> Add Book</div>"),$preContent=$("<div class='email-book-content'></div>"),$preIframe=$("<iframe allowfullscreen class='cc-hide'></iframe>"),$preLoading=$("<div class='email-iframe-loading cc-hide'><span class='fa fa-spinner fa-spin'></span></div>"),$linkContent=$("<div></div>"),$addBookBtn.on("click",function(){new SelectBookPanel({userId:fh5.uId,okBackFn:a.okCallbackFn.bind(a)})}),$leftPanel.append($("<div class='email-add-btn-content'></div>").append($addBookBtn)).append($preContent.append($preLoading).append($preIframe)).append($linkContent),this.$preAddLink=$linkContent,this.$preAddIframe=$preIframe,this.$preAddLoading=$preLoading,$leftPanel},createRightPanel:function(){var a=this,b=!1;return re=/(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/g,$rightPanel=$("<div class='email-right-panel col-sm-6'></div>"),$rightInner=$("<div class='email-right-inner'></div>"),$emailGroup=$("<div class='email-right-group line-height-0'></div>"),$emailContent=$("<div class='email-send-email-content'></div>"),$email=$("<textarea rows='5' class='cc-textarea email-send-email' placeholder='Input Email addresses separated by semicolon (or line break), e.g. John@yahoo.com; Henry@gmail.com; ...'></textarea>"),$emailControl=$("<div class='email-control-email'></div>"),$leadEmail=$("<div class='email-lead-btn btn-icon button-pure' title='Import Contacts'></div>"),$themeGroup=$("<div class='email-right-group line-height-0'></div>"),$theme=$("<input class='cc-input-text email-send-theme' type='text' placeholder='' value='"+fh5.uName+" sent you a digital flipbook'/>"),$contentGroup=$("<div class='email-right-group line-height-0'></div>"),$content=$("<textarea class='cc-textarea email-send-body' rows='4' placeholder=''>I created a digital flipbook and shared with you!</textarea>"),$checkGroup=$("<div class='email-right-group line-height-0'></div>"),$checkBtn=$("<div class='email-relate-contact cc-user-select-none'><input type='checkbox' class='' checked id='email-relate-contact'/><label for='email-relate-contact'>Add the Email addresses to My Contact list</label></div>"),$sendBtn=$("<div class='email-send-btn button-pure button-pure-blue'><i></i>send email</div>"),$error=$("<div class='email-error-warn cc-error'></div>"),$transform=$("<div class='email-transform-btn'><i class='icon icon-arrow-left'></i></div>"),$previewContent=$("<div class='email-preview-sending'></div>"),$email.on("input",function(){$error.html("")}),$sendBtn.on("click",function(){if(!b){var c=$theme.val().trim(),d=$content.val().trim(),e=$email.val().trim(),f=e.match(re),g=[];if(!a.getBookId())return void $error.html("* Please select a flipbook first.");if(""==e)return void $error.html("* Please enter email address.");if(null==f)return void $error.html("* Please enter valid email address.");if(""!==a.remainingCount&&f.length>a.remainingCount)return void $error.html("* Email amount limit reached.");if(f&&f.length>=1)g=f;else{if(!e.match(/^\w+([-\.]\w+)*@\w+([\.-]\w+)*\.\w{2,10}$/))return void $error.html("* Invalid email address.");g.push(e)}if(""==c)return void $error.html("* Please enter email subject.");g=g.hf_delRepeat(),$.ajax({url:"/center/db/add-share-book-email-task-online.php",type:"post",dataType:"json",data:{userid:fh5.uId,bookid:a.getBookId(),emails:JSON.stringify(g),subject:c,message:d,relate:$checkBtn.find("#email-relate-contact")[0].checked?"1":"0"},beforeSend:function(){b=!0,$error.html(""),$sendBtn.html("<i></i>sending")},success:function(c){b=!1,$sendBtn.html("<i></i>send email"),"1"==c.status?(a.lightbox.cancel(),new SendingEmailPanel({taskid:c.taskid,url:a.options.url,emails:g})):"-4"==c.status?$error.html("* Email amount limit reached."):"2"==c.status?utils.alert("Note","<p class='text-left'>Our anti-spam system has detected that you have used our email marketing feature to spam, now you are prohibited to use this feature forever.</p> <br> <p class='text-left'>This may result from that most email address you add are invalid and they are failed to delivery or some recipients have reported that you are a spammer. </p>"):$error.html("* Connection error, please retry.")},error:function(){$error.html("* Connection error, please retry."),b=!1,$sendBtn.html("<i></i>send email")}})}}),$leadEmail.on("click",function(){new ContactSearch({okCallback:a.addEmails.bind(a)})}),$transform.on("click",function(){$previewContent.hasClass("show")}),$rightPanel.append($rightInner.append($emailGroup.append("<label>To</label>").append($emailContent.append($email)).append($emailControl.append($leadEmail)).append($checkBtn)).append($themeGroup.append("<label>Subject</label>").append($theme)).append($contentGroup.append("<label>Message</label>").append($content)).append($sendBtn)).append($error),this.$es=$email,$rightPanel},addEmails:function(a){for(var b="",c=0;c<a.length;c++)b+=a[c]+";";this.$es.val(this.$es.val().trim()+b)},setBookId:function(a){this.addBookId=a},okCallbackFn:function(a,b){var c=this,d=b[a[0]],e=c.customDomain?"http://"+c.customDomain+"/books/"+d.bLink:fh5.website+fh5.uLink+"/"+d.bLink;e=c.isHTTPS?utils.pasreHttps(e):e,this.setBookId(d.id),this.$preAddIframe.hide(),this.$preAddLoading.show(),this.$preAddIframe.show().attr("src",c.isHTTPS?utils.pasreHttps(d.url):d.url),this.$preAddLink.empty().append($("<div class='email-book-link'><a href='"+e+"' target='_blank'>"+e+"</a></div>"))},getBookId:function(){return this.options.isAddFlag?this.addBookId:this.options.bookId}},EmbedPanel.prototype={constructor:EmbedPanel,bindNewEmbedPanel:function(a){var b=this;a.on("click",function(){b.lightbox.cancel()}),a.injectEmbConfigLightbox({defaultOptions:{max:this.options.pages,title:this.options.title,thumb:this.options.thumb,domainLink:fh5.customDomain?"http://"+fh5.customDomain+"/books/"+this.options.bLink:"",http:this.options.url,https:utils.pasreHttps(this.options.url)}})},changeStartPage:function(a){var b=this,c=a.val();b.iframe.attr("src",b.isHTTPS?utils.pasreHttps(b.options.url):b.options.url+"?"+c+"#p="+c),this.iframePageSelect.val(c),this.lightboxPageSelect.val(c),this.options.startPage=c,this.setCode()},resizeIframe:function(a,b){this.iframeContainer.stop().animate({maxWidth:a,height:b},200),this.customWidthInput.val(a),this.customHeightInput.val(b),this.options.width=a,this.options.height=b,this.setCode()},setCode:function(){var a=this.options.url,b=this.options.url_HTTPS,c=utils.encodeHTML(this.options.title);"1"!=this.options.startPage&&(a+="#p="+this.options.startPage,b+="#p="+this.options.startPage),this.iframeStepCode1.text('<iframe style="width:'+this.options.width+"px;height:"+this.options.height+'px" src="'+a+'" '+this.options.iframeAttr+"></iframe>"),this.iframeStepCode1_HTTPS.text('<iframe style="width:'+this.options.width+"px;height:"+this.options.height+'px" src="'+b+'" '+this.options.iframeAttr+"></iframe>"),this.lightboxStepCode2.text('data-rel="fh5-light-box-demo" data-href="'+a+'" data-width="'+this.options.width+'" data-height="'+this.options.height+'" data-title="'+c+'"'),this.lightboxStepCode2_HTTPS.text('data-rel="fh5-light-box-demo" data-href="'+b+'" data-width="'+this.options.width+'" data-height="'+this.options.height+'" data-title="'+c+'"'),this.lightboxImg.attr("data-width",this.options.width),this.lightboxImg.attr("data-height",this.options.height),this.lightboxImg.attr("data-title",c),this.lightboxImg.attr("data-href",this.isHTTPS?b:a),this.demoCode.text('<!DOCTYPE HTML>\n<html>\n<head>\n        <title>FlipHTML5 LightBox Embed Demo</title>\n        <script src="'+this.options.APIScriptCode+'"></script>\n</head>\n<body>\n        <img src="'+this.lightboxImg.attr("src")+'" data-rel="fh5-light-box-demo" data-href="'+a+'" data-width="'+this.options.width+'" data-height="'+this.options.height+'" data-title="'+c+'">\n</body>\n</html>'),this.demoCode_HTTPS.text('<!DOCTYPE HTML>\n<html>\n<head>\n        <title>FlipHTML5 LightBox Embed Demo</title>\n        <script src="'+this.options.APIScriptCode+'"></script>\n</head>\n<body>\n        <img src="'+this.lightboxImg.attr("src")+'" data-rel="fh5-light-box-demo" data-href="'+b+'" data-width="'+this.options.width+'" data-height="'+this.options.height+'" data-title="'+c+'">\n</body>\n</html>'),this.wordpressStepCode1.text('[fliph5 id="'+this.options.uLink+"-"+this.options.bLink+'" width="'+this.options.width+'px" height="'+this.options.height+'px"]')}},FixedLightBox.prototype={constructor:FixedLightBox,showError:function(a){a||(a=fh5.pageData.tips.Error),this.$warningBoxText.html(a),this.$warningBox.show().animate({left:"+=1%"},100).animate({left:"-=2%"},150).animate({left:"+=2%"},180).animate({left:"-=1%"},150)},hideError:function(){this.$warningBox.hide()},getContent:function(){return this.$lightContent},getPanel:function(){return this.$panel},launchNote:function(a){return this.$panel.empty().append("<div class='hf-lightbox-alert-desc'>"+a+"</div>"),""==this.$title.text()&&this.setTitle("Note"),this.$lightHeader.addClass("launch-note"),this.setBtnsShowHide(!1),this.setLightBoxSize(""),this.easyClose(),this.launchPanel(),this},launchError:function(a){return"undefined"==typeof a&&(a=fh5.pageData.tips.Error),this.$panel.css("padding","0px").append("<div class='hf-lightbox-launch-error'>"+a+"</div>"),this.setTitle("Error Occurs"),this.$lightHeader.addClass("launch-error"),this.setBtnsShowHide(!1),this.setLightBoxSize(""),this.easyClose(),this.launchPanel(),this},launchLoading:function(){var a=this,b=$("body");document.getElementsByClassName("hf-lightbox").length>0&&this.$bg.addClass("disabled"),this.$lightBox.append(this.$loading),b.addClass("hf-overflow-hidden"),a.isMobile&&b.addClass("isMobile"),this.$lightBox.appendTo(b),setTimeout(function(){a.$lightBox.addClass("hf-fade")},2)},launchPanel:function(){var a=this;this.opt.isEasyClose&&this.easyClose(),this.cancelLoading(),setTimeout(function(){a.$lightBox.addClass("fade-in")},5)},launch:function(){var a=this,b=$("body");b.addClass("hf-overflow-hidden"),a.isMobile&&b.addClass("isMobile"),this.$lightBox.appendTo(b),this.opt.isEasyClose&&this.easyClose(),setTimeout(function(){a.$lightBox.addClass("fade-in")},5)},cancel:function(){var a=this;setTimeout(function(){a.$lightBox.removeClass("fade-in hf-fade"),document.getElementsByClassName("hf-lightbox").length<=1&&$("body").removeClass("hf-overflow-hidden"),a.$lightBox.remove()},350)},easyClose:function(){var a=this;this.$wrapper.on("click",function(){a.cancel()}),this.$lightContent.on("click",function(a){a.stopPropagation()}),$(window).on("keyup.fixedloghtbox",function(b){27==b.which&&a.cancel()})},offEscKeyup:function(){$(window).off("keyup.fixedloghtbox")},cancelLoading:function(){this.$loading&&this.$loading.remove()},addMask:function(){utils.addSpin(this.getContent(),"1")},removeMask:function(){utils.removeSpin(this.getContent(),"1")},setLightBoxSize:function(a){var b=this;switch(a.toString()){case"1":b.$lightContent.removeClass("modal-mlg modal-xsedit").addClass("modal-lg modal-dialog");break;case"2":b.$lightContent.removeClass("modal-xsedit").addClass("modal-dialog modal-lg modal-mlg");break;case"3":b.$lightContent.removeClass("modal-lg modal-mlg").addClass("modal-xsedit");break;default:b.$lightContent.removeClass("modal-lg modal-mlg modal-xsedit").addClass("modal-dialog")}},setBtnsShowHide:function(a){a?this.$btns.show():this.$btns.hide()},setTitle:function(a){this.$title.show().html(a)},getBtnContent:function(){return this.$btns},getSaveBtn:function(){return this.$saveBtn},getCancelBtn:function(){return this.$cancelBtn},getTopCancelBtn:function(){return this.$lightClose}},LightBox.prototype={constructor:LightBox,getBottomContainer:function(){return this.buttonGroup},getWarningBox:function(){return this.warningBox},getHelpBox:function(){return this.helpBox},getCloseButton:function(){return this.closeButton},getSaveButton:function(){return this.saveButton},getPanel:function(){return this.panel},getBox:function(){return this.box},getTitle:function(){return this.title},banTouchmove:function(a){a.preventDefault()},launch:function(){var a=navigator.userAgent.toLowerCase();/ipad|iphone|midp|rv:1.2.3.4|ucweb|android|windows ce|windows mobile/.test(a)&&document.addEventListener("touchmove",this.banTouchmove,{passive:!1});var b=$("body"),c=this;this.background.appendTo(b).fadeIn(),this.box.appendTo(b).fadeIn(0),this.resize(0),c.box.height()>(window.innerHeight||$(window).height())?-1===c.box[0].className.indexOf("new")?this.box.animate({opacity:1,top:this.document.scrollTop()+30},200):this.box.animate({opacity:1},200):-1===c.box[0].className.indexOf("new")?this.box.css("top",this.document.scrollTop()).animate({opacity:1,top:((window.innerHeight||$(window).height())-this.box.height())/2+this.document.scrollTop()},200):this.box.animate({opacity:1},200)},setCancelCallback:function(a){this.cancelCallback=a},cancel:function(){var a=navigator.userAgent.toLowerCase();/ipad|iphone|midp|rv:1.2.3.4|ucweb|android|windows ce|windows mobile/.test(a)&&document.removeEventListener("touchmove",this.banTouchmove,{passive:!1});var b=this;b.background.fadeOut(function(){b.background.remove()}),-1===b.box[0].className.indexOf("new")?b.box.animate({opacity:0,top:this.document.scrollTop()},200,function(){b.box.remove(),b.cancelCallback&&b.cancelCallback()}):b.box.animate({opacity:0},200,function(){b.box.remove(),b.cancelCallback&&b.cancelCallback()})},resizeH:function(){this.box.css({left:((window.innerWidth||$(window).width())-this.box.width())/2})},resize:function(a){this.isAdaptive&&(this.box.width("96%"),this.box.width()>this.LightBoxWidth&&this.box.width(this.LightBoxWidth)),"undefined"==typeof a&&(a=400);var b,c=($(window).width()-this.box.width())/2;b=this.box.height()>(window.innerHeight||$(window).height())?this.document.scrollTop():((window.innerHeight||$(window).height())-this.box.height())/2+this.document.scrollTop(),-1===this.box[0].className.indexOf("new")&&this.box.animate({left:c,top:b},a),this.box.width()<425?this.arrow.addClass("cc-hide"):this.arrow.removeClass("cc-hide")},clear:function(){return this.box.children(":not(.cc-light-box-cancel-button)").remove(),this},showRedirectBox:function(){var a=new RedirectingBox({isPanel:!0});a.show(this.box)},hideRedirectBox:function(){var a=new RedirectingBox;a.cancel()}},LogPanel.prototype={constructor:LogPanel,log:function(a){this.messagePanel.prepend($("<li> "+a+"</li>"))},show:function(){this.messages.width(this.messages.width()+100)},hide:function(){this.messages.width(this.messages.width()-100)},clear:function(){this.messagePanel.empty()}},NoticePanel.prototype={constructor:NoticePanel,removeNeedShowLightBox:function(){localStorage.getItem("needShowLightBox")&&(console.log("removeNeedShowLightBox"),localStorage.removeItem("needShowLightBox")),window.location.reload()}},SelectUploadMethodPanel.prototype={constructor:SelectUploadMethodPanel},SendingEmailPanel.prototype={constructor:SendingEmailPanel,create:function(){var a=this,b=$("<div class='sending-email-panel'></div>"),c=$("<div class='sending-email-progress-content'></div>"),d=$("<div class='sending-email-warn'><span>0</span> of "+a.len+" tasks have completed</div>"),e=$("<div class='sending-email-progress'></div>"),f=$("<div class='sending-email-progress-bar'>0%</div>"),g=$("<div class='sending-email-content'></div>"),h=$("<div class='sending-email-inner'></div>"),i=$("<div class='sending-email-th each-row'></div>"),j=$("<div class='first-col'>Email</div>"),k=$("<div class='second-col'>Status</div>"),l=$("<div class='sending-email-table-content'></div>"),m=$("<ul class='sending-email-table'></ul>"),n=$("<div class='sending-email-back-btn button-pure button-pure-blue'>Sending in Background</div>");
return this.createEmails(this.options.emails,m),n.add(a.lightbox.getTopCancelBtn()).on("click",function(){a.lightbox.cancel(),a.PTI&&clearTimeout(a.PTI)}),b.append(c.append(d).append(e.append(f))).append(g.append(h.append(i.append(j).append(k)).append(l.append(m)))).append(n),this.$tc=l,this.$t=m,this.$comNum=d.children("span"),this.$bar=f,this.$bt=n,b},createEmails:function(a,b){for(var c=0;c<a.length;c++){var d=$("<li class='each-row waitting' data-email='"+a[c].toString().toLowerCase()+"'></li>"),e=$("<div class='first-col'><i></i>"+a[c]+"</div>"),f=$("<div class='second-col'>Waitting</div>");d.append(e).append(f).appendTo(b)}},createScrollBar:function(a,b){var c=$("<div class='sending-email-scrollTools'></div>"),d=$("<div class='sending-email-dragContainer'></div>"),e=$("<div class='sending-email-dragRail'></div>"),f=$("<div class='sending-email-dragOutBar'></div>"),g=$("<div class='sending-email-dragBar'></div>");c.append(d.append(f.append(g)).append(e)).appendTo(a);var h=a.height(),i=b.outerHeight();h>=i&&c.hide(),f.css({height:h*h/i}),f.on("mousedown",function(c){var d=c||event,e=d.clientY-f.position().top,g=c.which;c.stopPropagation(),1==g&&($(document).on("mousemove.scrollBar touchmove.scrollBar",function(c){c.preventDefault(),c.stopPropagation(),d=c||event;var g=d.clientY-e;0>=g?g=0:g>=a.outerHeight()-f.outerHeight()&&(g=a.outerHeight()-f.outerHeight()),f.css({top:g}),b.css({top:-g/(a.outerHeight()-f.outerHeight())*(b.outerHeight()-a.outerHeight())})}),$(document).on("mouseup.scrollBar touchend.scrollBar",function(a){var b=a||event;b.preventDefault(),b.stopPropagation(),$(document).off("mousemove.scrollBar touchmove.scrollBar"),$(document).off("mouseup.scrollBar touchend.scrollBar")}))}),mouseWheel=$.browser.mozilla?"DOMMouseScroll":"mousewheel",a.bind(mouseWheel,function(c){if(!(a.outerHeight()>=b.outerHeight())){var d,e=c.originalEvent,g=e.wheelDelta||-e.detail,h=b.position().top;return b.stop(!1,!1),g>0?d=h+a.outerHeight()/11<0?h+a.outerHeight()/11:0:0>g&&(d=b.outerHeight()-a.outerHeight()>-(h-a.outerHeight()/11)?h-a.outerHeight()/11:-(b.outerHeight()-a.outerHeight())),b.css({top:d}),f.css({top:-d/(b.outerHeight()-a.outerHeight())*(a.outerHeight()-f.outerHeight())}),c.stopPropagation(),c.preventDefault(),!1}})},sendingAll:function(){var a=this,b=$("<div class='send-success-panel'></div>"),c=($("<div class='send-success-icon'></div>"),$("<div class='send-success-title'>Congratulations</div>"),$("<div class='send-success-text'>Thanks! Your flipbook has been emailed completed!</div>")),d=($("<div class='send-success-link'><a target='_blank' href='"+this.options.url+"'>"+this.options.url+"</a></div>"),$("<div class='send-success-btns'></div>")),e=$("<div class='button-pure send-success-close-btn'>Close</div>"),f=$("<a href='/center/marketing/#Email-History'><div class='button-pure button-pure-blue send-success-history-btn'>View History</div></a>");return this.lightbox.setTitle("Sending completed"),f.on("click",function(a){a.preventDefault(),location.href=this.href,location.reload()}),e.on("click",function(){a.lightbox.cancel()}),b.append(c).append(d.append(e).append(f)),this.$st=c,b},sendingComplete:function(){var a=this.$t.find(".each-row.success").length,b=this.len-a,c=b>1?"tasks":"task",d="Thanks! Your flipbook has been emailed completed!";a==this.len?d="Congratulations! Your flipbook has been emailed successfully!":(this.$st.addClass("error"),d="Oops! <span>"+b+"</span> "+c+" failed! Please double-check the email address and resend later."),this.$st.html(d)},getSendingProgress:function(){var a=this;$.ajax({url:"/center/db/get-share-book-email-task-progress-online.php",type:"post",dataType:"json",data:{taskid:a.options.taskid},beforeSend:function(){},success:function(b){"1"==b.status?(a.updateEmailStatus(b.emails),a.isHasWaitting()?a.PTI=setTimeout(function(){a.getSendingProgress()},a.timeSp):(a.$bt.hide(),a.sendingComplete(),a.$sPanel.slideDown())):a.PTI=setTimeout(function(){a.getSendingProgress()},a.timeSp)},error:function(){a.PTI=setTimeout(function(){a.getSendingProgress()},a.timeSp)}})},updateEmailStatus:function(a){for(var b=this,c=0,d="0%",e=0;e<a.length;e++){var f=a[e],g=f.email,h=f.status,i=b.$t.find(".each-row[data-email='"+g.toString().toLowerCase()+"']"),j="1"==h?"successful":"0"==h?"error":"waiting",k="1"==h?"success":"0"==h?"error":"waitting";i.removeClass("waitting").addClass(k),i.find(".second-col").html(j)}c=this.len-this.$t.find(".each-row.waitting").length,this.$comNum.html(c),d=Math.round(c/b.len*1e3)/1e3*100+"%",this.$bar.width(d).html(d)},isHasWaitting:function(){return this.$t.find(".each-row.waitting").length>0?!0:!1}},SharePanel.prototype={bookLinkSwitch:function(){var a;this.domainLinkShowing?(a=this.options.url,this.domainLinkShowing=!1,this.linkSwitchBtn.attr("title","Show Custom")):(a=location.protocol+"//"+fh5.customDomain+"/books/"+this.options.bLink,this.domainLinkShowing=!0,this.linkSwitchBtn.attr("title","Show Original")),this.setLink(a)},setLink:function(a){a=fh5.isDomainHttps?utils.pasreHttps(a):a,this.qrCodeContainer.empty().qrcode({width:87,height:87,text:a}),this.linkInput.val(a),this.twitter.find("a").attr("href","https://www.twitter.com/share?url="+encodeURIComponent(a)),this.google.find("a").attr("href","https://plus.google.com/share?url="+encodeURIComponent(a)),this.more.find("a").attr("href","http://www.addthis.com/bookmark.php?v=15&winname=addthis&s=more&url="+encodeURIComponent(a))}},SignInPanel.prototype={constructor:SignInPanel,toSignUp:function(){return this.isFlipH5||"undefined"==typeof fh5.sessionId?(this.lightBox.cancel(),void new SignUpPanel(this.options)):void window.open("https://fliphtml5.com/login.php?register","_blank")},logIn:function(){var a=this;if(!a.loggingIn){if(!utils.validate2("email",a.logInEmailInput,a.logInEmailHelp,!0,null,"!",null,"cc-error-font"))return a.logInEmail.addClass("error"),a.logInEmailInput.addClass("cc-validate-fail2"),void a.logInEmailHelp.removeClass("cc-hide");if(a.logInEmailHelp.hasClass("cc-hide")&&(a.logInEmail.removeClass("error"),a.logInEmailHelp.addClass("cc-hide")),!utils.validate2("password",a.logInPasswordInput,a.logInPasswordHelp,!0,null,"!",null,"cc-error-font"))return a.logInPassword.addClass("error"),a.logInPasswordInput.addClass("cc-validate-fail2"),void a.logInPasswordHelp.removeClass("cc-hide");a.logInPasswordHelp.hasClass("cc-hide")&&(a.logInPassword.removeClass("error"),a.logInPasswordHelp.addClass("cc-hide")),$.ajax({url:"/api/user/handle-user-login",type:"post",dataType:"json",data:{account:a.logInEmailInput.val().trim(),upass:a.logInPasswordInput.val().trim()},beforeSend:function(){a.loggingIn=!0,a.logInEmail.removeClass("error"),a.logInPassword.removeClass("error"),a.logInEmailInput.removeClass("cc-validate-fail2"),a.logInPasswordInput.removeClass("cc-validate-fail2"),a.logInEmailHelp.addClass("cc-hide"),a.logInPasswordHelp.addClass("cc-hide"),a.logInButton.html("Signing In...")},success:function(b){var c=!1;switch(b.code){case"OK":var d=a.logInEmailInput.val().trim(),e=(""!==b.data.uName?b.data.uName:d.substr(0,d.indexOf("@")),{});try{e=parent&&parent.fh5&&parent.fh5.hasOwnProperty("isLoggedIn")?parent:window}catch(f){e=window}if(fh5.isLoggedIn=!0,fh5.uId=b.data.userId,fh5.uType=b.data.uType,console.log(b.data.uType),fh5.uLink=b.data.uLink,fh5.sessionDefaultCId=b.data.cId,fh5.PrimaryAccountId=b.data.PrimaryAccountId,e.fh5.isLoggedIn=!0,e.fh5.uId=b.data.userId,e.fh5.uType=b.data.uType,e.fh5.uLink=b.data.uLink,e.fh5.sessionDefaultCId=b.data.cId,a.options.showSuccessTips&&new MessageBox("success","Log in successfully!"),window.location.href.indexOf("fliphtml5.com/purchase/")>0)return void window.location.reload();if(a.options.callback)a.lightBox.cancel(),e.utils.changeLoginState(),setTimeout(function(){a.options.callback()},500);else{var g=utils.getParamValue("backurl");if(""!==g)window.location.href=g;else{var h=utils.getParamValue("back");if("1"===h)window.location.href=document.referrer;else{var i=b.data.hasOwnProperty("autoTriggerNewDashboard")?b.data.autoTriggerNewDashboard:0;window.location.href=utils.getLoginLink(i)}}}a.cookiePanel.addCookie(d);break;case"PASSWORD_ERROR":if(!b.data){a.logInPassword.addClass("error"),a.logInPasswordInput.addClass("cc-validate-fail2").focus(),a.logInPasswordHelp.removeClass("cc-hide").html("Incorrect Password."),c=!0;break}if("facebook"===b.data.account_type){a.logInPassword.addClass("error"),a.logInPasswordInput.addClass("cc-validate-fail2").focus(),a.logInPasswordHelp.html("This is a Facebook account, try click SIGN IN WITH FACEBOOK or Forget your password to set a  new password."),c=!0;break}if("google"===b.data.account_type){a.logInPassword.addClass("error"),a.logInPasswordInput.addClass("cc-validate-fail2").focus(),a.logInPasswordHelp.html("This is a Google account, try click SIGN IN WITH GOOGLE or Forget your password to set a  new password."),c=!0;break}case"ACCOUNT_NOT_EXISTS":a.logInEmailInput.addClass("cc-validate-fail2").focus(),a.logInEmailHelp.removeClass("cc-hide").html("User not exist."),c=!0;break;default:a.logInPanelHelp.removeClass("cc-hide").html("Upexpected error, please retry."),c=!0}c&&a.logInButton.html("Sign In"),a.loggingIn=!1},error:function(){a.logInPanelHelp.removeClass("cc-hide").html("Upexpected error, please retry."),a.loggingIn=!1,a.logInButton.html("Sign In")}})}}},SignInPanel3.prototype={constructor:SignInPanel3,toSignUp:function(){return this.isFlipH5||"undefined"==typeof fh5.sessionId?(this.lightBox.cancel(),void new SignUpPanel3(this.options)):void window.open("https://fliphtml5.com/login.php?register","_blank")},logIn:function(){var a=this;if(!a.loggingIn){if(!utils.validate2("email",a.logInEmailInput,a.logInEmailHelp,!0,null,"!",null,"cc-error-font"))return a.logInEmail.addClass("error"),a.logInEmailInput.addClass("cc-validate-fail2"),void a.logInEmailHelp.removeClass("cc-hide");if(a.logInEmailHelp.hasClass("cc-hide")&&(a.logInEmail.removeClass("error"),a.logInEmailHelp.addClass("cc-hide")),!utils.validate2("password",a.logInPasswordInput,a.logInPasswordHelp,!0,null,"!",null,"cc-error-font"))return a.logInPassword.addClass("error"),a.logInPasswordInput.addClass("cc-validate-fail2"),void a.logInPasswordHelp.removeClass("cc-hide");a.logInPasswordHelp.hasClass("cc-hide")&&(a.logInPassword.removeClass("error"),a.logInPasswordHelp.addClass("cc-hide")),$.ajax({url:"/api/user/handle-user-login",type:"post",dataType:"json",data:{account:a.logInEmailInput.val().trim(),upass:a.logInPasswordInput.val().trim()},beforeSend:function(){a.loggingIn=!0,a.logInEmail.removeClass("error"),a.logInPassword.removeClass("error"),a.logInEmailInput.removeClass("cc-validate-fail2"),a.logInPasswordInput.removeClass("cc-validate-fail2"),a.logInEmailHelp.addClass("cc-hide"),a.logInPasswordHelp.addClass("cc-hide"),a.logInButton.html("Signing In...")},success:function(b){var c=!1;switch(b.code){case"OK":var d=a.logInEmailInput.val().trim(),e=(""!==b.data.uName?b.data.uName:d.substr(0,d.indexOf("@")),{});try{e=parent&&parent.fh5&&parent.fh5.hasOwnProperty("isLoggedIn")?parent:window}catch(f){e=window}if(fh5.isLoggedIn=!0,fh5.uId=b.data.uId,fh5.uType=b.data.uType,console.log(b.data.uType),fh5.uLink=b.data.uLink,fh5.sessionDefaultCId=b.data.cId,fh5.PrimaryAccountId=b.data.PrimaryAccountId,e.fh5.isLoggedIn=!0,e.fh5.uId=b.data.uId,e.fh5.uType=b.data.uType,e.fh5.uLink=b.data.uLink,e.fh5.sessionDefaultCId=b.data.cId,a.options.showSuccessTips&&new MessageBox("success","Log in successfully!"),a.options.callback)a.lightBox.cancel(),e.utils.changeLoginState(),setTimeout(function(){a.options.callback()},500);else{var g=utils.getParamValue("backurl");if(""!==g)window.location.href=g;else{var h=utils.getParamValue("back");if("1"===h)window.location.href=document.referrer;else{var i=b.data.hasOwnProperty("autoTriggerNewDashboard")?b.data.autoTriggerNewDashboard:0;window.location.href=utils.getLoginLink(i)}}}a.cookiePanel.addCookie(d);break;case"PASSWORD_ERROR":if(!b.data){a.logInPassword.addClass("error"),a.logInPasswordInput.addClass("cc-validate-fail2").focus(),a.logInPasswordHelp.removeClass("cc-hide").html("Incorrect Password."),c=!0;break}if("facebook"===b.data.account_type){a.logInPassword.addClass("error"),a.logInPasswordInput.addClass("cc-validate-fail2").focus(),a.logInPasswordHelp.html("This is a Facebook account, try click SIGN IN WITH FACEBOOK or Forget your password to set a  new password."),c=!0;break}if("google"===b.data.account_type){a.logInPassword.addClass("error"),a.logInPasswordInput.addClass("cc-validate-fail2").focus(),a.logInPasswordHelp.html("This is a Google account, try click SIGN IN WITH GOOGLE or Forget your password to set a  new password."),c=!0;break}case"ACCOUNT_NOT_EXISTS":a.logInEmailInput.addClass("cc-validate-fail2").focus(),a.logInEmailHelp.removeClass("cc-hide").html("User not exist."),c=!0;break;default:a.logInPanelHelp.removeClass("cc-hide").html("Upexpected error, please retry."),c=!0}c&&a.logInButton.html("Sign In"),a.loggingIn=!1},error:function(){a.logInPanelHelp.removeClass("cc-hide").html("Upexpected error, please retry."),a.loggingIn=!1,a.logInButton.html("Sign In")}})}}},SignUpPanel.prototype={constructor:SignUpPanel,toSignIn:function(){this.lightBox.cancel(),new SignInPanel(this.options)},signUp:function(){var a=this,b=a.codeWrap.hasClass("cc-hide");if(!a.signingUp){if(!utils.validate2("email",a.signUpEmailInput,a.signUpEmailHelp,!0,null,"!",null,"cc-error-font"))return a.signUpEmail.addClass("error"),a.signUpEmailInput.addClass("cc-validate-fail2"),void a.signUpEmailHelp.removeClass("cc-hide");if(!utils.validate2("password",a.signUpPasswordInput,a.signUpPasswordHelp,!0,null,"!",null,"cc-error-font"))return a.signUpPassword.addClass("error"),a.signUpPasswordInput.addClass("cc-validate-fail2"),void a.signUpPasswordHelp.removeClass("cc-hide");if(a.signUpPasswordHelp.hasClass("cc-hide")||(a.signUpPassword.removeClass("error"),a.signUpPasswordHelp.addClass("cc-hide")),!utils.validate2("repassword",a.signUpReTypePasswordInput,a.signUpReTypePasswordHelp,!0,a.signUpPasswordInput.val(),"!",null,"cc-error-font"))return a.signUpReTypePassword.addClass("error"),a.signUpReTypePasswordInput.addClass("cc-validate-fail2"),void a.signUpReTypePasswordHelp.removeClass("cc-hide");if(a.signUpReTypePasswordHelp.hasClass("cc-hide")||(a.signUpReTypePassword.removeClass("error"),a.signUpReTypePasswordHelp.addClass("cc-hide")),b&&!window._RecaptchaResponse)return void a.googleHelp.addClass("error-text").removeClass("cc-hide cc-error-font").html("Please check the above box to let us know you're human.");if(!b&&!utils.validate2("verificationCode",a.signUpCodeInput,a.googleHelp,!1,null,null,null,null))return a.signUpCode.addClass("error"),void a.codeWrap.addClass("error-border");var c={account:a.signUpEmailInput.val().trim(),upass:a.signUpPasswordInput.val().trim(),code:b?window._RecaptchaResponse:a.signUpCodeInput.val().trim(),codeType:b?2:1};"undefined"==typeof fh5.sessionId||b||(c.id=fh5.sessionId),a.isConfirmUseEmail&&a.needToAddConfirm&&(c.isConfirm=1),$.ajax({url:"/api/user/handle-user-signup",type:"post",dataType:"json",data:c,beforeSend:function(){a.signUpEmail.removeClass("error"),a.signUpPassword.removeClass("error"),a.signUpReTypePassword.removeClass("error"),a.signUpEmailInput.removeClass("cc-validate-fail2"),a.signUpPasswordInput.removeClass("cc-validate-fail2"),a.signUpReTypePasswordInput.removeClass("cc-validate-fail2"),a.signUpEmailHelp.addClass("cc-hide"),a.signUpPasswordHelp.addClass("cc-hide"),a.signUpReTypePasswordHelp.addClass("cc-hide"),a.signUpCode.removeClass("error"),a.codeWrap.removeClass("error-border"),a.signUpConfirmTips.addClass("cc-hide"),a.signingUp=!0,a.signUpButton.html("Signing Up..."),a.googleHelp.addClass("cc-hide")},success:function(c){var d=!1;switch(c.data&&(a.signUpSuggestEmail=c.data.did_you_mean),c.code){case"OK":"function"==typeof ga&&ga("send","event","register","register.signup",document.location.pathname);var e={};try{e=parent&&parent.fh5&&parent.fh5.hasOwnProperty("isLoggedIn")?parent:window}catch(f){e=window}fh5.isLoggedIn=!0,fh5.uId=c.userId,fh5.uLink=c.uLink,fh5.uType="0",fh5.sessionDefaultCId=c.cId,e.fh5.isLoggedIn=fh5.isLoggedIn,e.fh5.uId=fh5.userId,e.fh5.uLink=fh5.uLink,e.fh5.uType=fh5.uType,e.fh5.sessionDefaultCId=fh5.sessionDefaultCId;{var g=a.signUpEmailInput.val().trim();g.substr(0,g.indexOf("@"))}utils.changeLoginState().then(function(){window.location.href=a.isFlipH5?"/activate-account/index.php":"https://fliphtml5.com/activate-account/index.php"});break;case"ACCOUNT_ALREADY_EXISTS":a.signUpEmail.addClass("error"),a.signUpEmailInput.addClass("cc-validate-fail2").focus(),a.signUpEmailHelp.removeClass("cc-hide").html("User already exists."),d=!0;break;case"SYSTEM_BLACK_LIST":a.signUpEmail.addClass("error"),a.signUpEmailInput.addClass("cc-validate-fail2").focus(),a.signUpEmailHelp.removeClass("cc-hide").html("The email can not be registered because your IP has been blacklisted."),d=!0;break;case"4":a.signUpEmail.addClass("error"),a.signUpEmailInput.addClass("cc-validate-fail2").focus(),a.signUpSuggestEmail?(a.signUpConfirmTips.removeClass("cc-hide"),$(".confirm-email-tips .email").html(a.signUpSuggestEmail)):a.signUpEmailHelp.removeClass("cc-hide").html("This email address is suspected, it can not be registered."),window.grecaptcha&&window.grecaptcha.reset(),d=!0;break;case"5":a.signUpEmail.addClass("error"),a.signUpEmailInput.addClass("cc-validate-fail2").focus(),a.signUpConfirmTips.removeClass("cc-hide"),$(".confirm-email-tips .email").html(a.signUpSuggestEmail),a.needToAddConfirm=!0,window.grecaptcha&&window.grecaptcha.reset(),d=!0;break;case"VERIFY_CODE_ERROR":a.signUpCode.addClass("error"),a.codeWrap.addClass("error-border"),a.googleHelp.removeClass("cc-hide").html(fh5.pageData.tips.VerificationCodeError),d=!0;break;default:a.signUpPanelHelp.removeClass("cc-hide").html(fh5.pageData.tips.UnexpectedError2),d=!0}d&&(a.refreshCode(b),a.signUpButton.html("Sign Up")),a.signingUp=!1},error:function(){a.refreshCode(b),a.signUpPanelHelp.removeClass("cc-hide").html(fh5.pageData.tips.UnexpectedError2),a.signingUp=!1,a.signUpButton.html("Sign Up")}})}},refreshCode:function(a){var b=this;if(a)window.grecaptcha.reset();else{var c=b.signUpCodeImg.attr("src"),d=c.match(/\?\d+/g)?c.replace(/\?\d+/g,"?"+(new Date).getTime()):c+"?"+(new Date).getTime();b.signUpCodeImg.attr("src",d)}},confirmEmailYes:function(){var a=this;a.signUpEmail.removeClass("error"),a.signUpConfirmTips.addClass("cc-hide"),a.signUpEmailInput.val(a.signUpSuggestEmail).removeClass("cc-validate-fail2"),console.log("yes")},confirmEmailNo:function(){var a=this;a.signUpEmail.removeClass("error"),a.signUpConfirmTips.addClass("cc-hide"),a.signUpEmailInput.removeClass("cc-validate-fail2"),a.isConfirmUseEmail=!0,console.log("no")}},SignUpPanel3.prototype={constructor:SignUpPanel3,toSignIn:function(){this.lightBox.cancel(),new SignInPanel3(this.options)},signUp:function(){var a=this,b=a.codeWrap.hasClass("cc-hide");if(!a.signingUp){if(!utils.validate2("email",a.signUpEmailInput,a.signUpEmailHelp,!0,null,"!",null,"cc-error-font"))return a.signUpEmail.addClass("error"),a.signUpEmailInput.addClass("cc-validate-fail2"),void a.signUpEmailHelp.removeClass("cc-hide");if(!utils.validate2("password",a.signUpPasswordInput,a.signUpPasswordHelp,!0,null,"!",null,"cc-error-font"))return a.signUpPassword.addClass("error"),a.signUpPasswordInput.addClass("cc-validate-fail2"),void a.signUpPasswordHelp.removeClass("cc-hide");if(a.signUpPasswordHelp.hasClass("cc-hide")||(a.signUpPassword.removeClass("error"),a.signUpPasswordHelp.addClass("cc-hide")),!utils.validate2("repassword",a.signUpReTypePasswordInput,a.signUpReTypePasswordHelp,!0,a.signUpPasswordInput.val(),"!",null,"cc-error-font"))return a.signUpReTypePassword.addClass("error"),a.signUpReTypePasswordInput.addClass("cc-validate-fail2"),void a.signUpReTypePasswordHelp.removeClass("cc-hide");if(a.signUpReTypePasswordHelp.hasClass("cc-hide")||(a.signUpReTypePassword.removeClass("error"),a.signUpReTypePasswordHelp.addClass("cc-hide")),b&&!window._RecaptchaResponse)return void a.googleHelp.addClass("error-text").removeClass("cc-hide cc-error-font").html("Please check the above box to let us know you're human.");if(!b&&!utils.validate2("verificationCode",a.signUpCodeInput,a.googleHelp,!1,null,null,null,null))return a.signUpCode.addClass("error"),void a.codeWrap.addClass("error-border");var c={account:a.signUpEmailInput.val().trim(),upass:a.signUpPasswordInput.val().trim(),code:b?window._RecaptchaResponse:a.signUpCodeInput.val().trim(),codeType:b?2:1};"undefined"==typeof fh5.sessionId||b||(c.id=fh5.sessionId),a.isConfirmUseEmail&&a.needToAddConfirm&&(c.isConfirm=1),$.ajax({url:"/api/user/handle-user-signup",type:"post",dataType:"json",data:c,beforeSend:function(){a.signUpEmail.removeClass("error"),a.signUpPassword.removeClass("error"),a.signUpReTypePassword.removeClass("error"),a.signUpEmailInput.removeClass("cc-validate-fail2"),a.signUpPasswordInput.removeClass("cc-validate-fail2"),a.signUpReTypePasswordInput.removeClass("cc-validate-fail2"),a.signUpEmailHelp.addClass("cc-hide"),a.signUpPasswordHelp.addClass("cc-hide"),a.signUpReTypePasswordHelp.addClass("cc-hide"),a.signUpCode.removeClass("error"),a.codeWrap.removeClass("error-border"),a.signUpConfirmTips.addClass("cc-hide"),a.signingUp=!0,a.signUpButton.html("Signing Up..."),a.googleHelp.addClass("cc-hide")},success:function(c){var d=!1;switch(c.data&&(a.signUpSuggestEmail=c.data.did_you_mean),c.code){case"OK":"function"==typeof ga&&ga("send","event","register","register.signup",document.location.pathname);var e={};try{e=parent&&parent.fh5&&parent.fh5.hasOwnProperty("isLoggedIn")?parent:window}catch(f){e=window}fh5.isLoggedIn=!0,fh5.uId=c.uId,fh5.uLink=c.uLink,fh5.uType="0",fh5.sessionDefaultCId=c.cId,e.fh5.isLoggedIn=fh5.isLoggedIn,e.fh5.uId=fh5.uId,e.fh5.uLink=fh5.uLink,e.fh5.uType=fh5.uType,e.fh5.sessionDefaultCId=fh5.sessionDefaultCId;{var g=a.signUpEmailInput.val().trim();g.substr(0,g.indexOf("@"))}utils4.changeLoginState().then(function(){window.location.href=a.isFlipH5?"/activate-account/index.php":"https://fliphtml5.com/activate-account/index.php"});break;case"ACCOUNT_ALREADY_EXISTS":a.signUpEmail.addClass("error"),a.signUpEmailInput.addClass("cc-validate-fail2").focus(),a.signUpEmailHelp.removeClass("cc-hide").html("User already exists."),d=!0;break;case"SYSTEM_BLACK_LIST":a.signUpEmail.addClass("error"),a.signUpEmailInput.addClass("cc-validate-fail2").focus(),a.signUpEmailHelp.removeClass("cc-hide").html("The email can not be registered because your IP has been blacklisted."),d=!0;break;case"4":a.signUpEmail.addClass("error"),a.signUpEmailInput.addClass("cc-validate-fail2").focus(),a.signUpSuggestEmail?(a.signUpConfirmTips.removeClass("cc-hide"),$(".confirm-email-tips .email").html(a.signUpSuggestEmail)):a.signUpEmailHelp.removeClass("cc-hide").html("This email address is suspected, it can not be registered."),window.grecaptcha&&window.grecaptcha.reset(),d=!0;break;case"5":a.signUpEmail.addClass("error"),a.signUpEmailInput.addClass("cc-validate-fail2").focus(),a.signUpConfirmTips.removeClass("cc-hide"),$(".confirm-email-tips .email").html(a.signUpSuggestEmail),a.needToAddConfirm=!0,window.grecaptcha&&window.grecaptcha.reset(),d=!0;break;case"VERIFY_CODE_ERROR":a.signUpCode.addClass("error"),a.codeWrap.addClass("error-border"),a.googleHelp.removeClass("cc-hide").html(fh5.pageData.tips.VerificationCodeError),d=!0;break;default:a.signUpPanelHelp.removeClass("cc-hide").html(fh5.pageData.tips.UnexpectedError2),d=!0}d&&(a.refreshCode(b),a.signUpButton.html("Sign Up")),a.signingUp=!1},error:function(){a.refreshCode(b),a.signUpPanelHelp.removeClass("cc-hide").html(fh5.pageData.tips.UnexpectedError2),a.signingUp=!1,a.signUpButton.html("Sign Up")}})}},refreshCode:function(a){var b=this;if(a)window.grecaptcha.reset();else{var c=b.signUpCodeImg.attr("src"),d=c.match(/\?\d+/g)?c.replace(/\?\d+/g,"?"+(new Date).getTime()):c+"?"+(new Date).getTime();b.signUpCodeImg.attr("src",d)}},confirmEmailYes:function(){var a=this;a.signUpEmail.removeClass("error"),a.signUpConfirmTips.addClass("cc-hide"),a.signUpEmailInput.val(a.signUpSuggestEmail).removeClass("cc-validate-fail2"),console.log("yes")},confirmEmailNo:function(){var a=this;a.signUpEmail.removeClass("error"),a.signUpConfirmTips.addClass("cc-hide"),a.signUpEmailInput.removeClass("cc-validate-fail2"),a.isConfirmUseEmail=!0,console.log("no")}},SliderImg.prototype={constructor:SliderImg,next:function(a){this.skipTo(this.current+(a?a:1))},prev:function(a){this.skipTo(this.current-(a?a:1))},play:function(){var a=this;clearTimeout(this.slideTimeOut),a.slideTimeOut=setTimeout(function(){a.next(),a.play()},4e3)},autoPaly:function(){this.isAutoPlay?(this.$play.removeClass("auto-play"),this.$play.find("i").addClass("fa-play-circle fa-lg").removeClass("fa-pause"),this.$play.find("a").attr("title","Auto Play (space)"),this.isAutoPlay=!1,this.stopPlay()):(this.$play.addClass("auto-play"),this.$play.find("i").removeClass("fa-play-circle fa-lg").addClass("fa-pause"),this.$play.find("a").attr("title","Pause (space)"),this.isAutoPlay=!0,this.play())},stopPlay:function(){this.slideTimeOut&&clearTimeout(this.slideTimeOut)},skipTo:function(a){var b=this,a=this.formatIndex(a);this.$face.removeClass("show-face"),this.setImg(a),this.current=a,b.isAutoPlay&&this.play()},formatIndex:function(a){var b=this.data.length;return 0>a?a=(a+b)%b:a>=b&&(a%=b),a},setImg:function(a){var b=this.data,c=b[a].src;this.$img.attr("src",c),this.$title.html(a+1+"/"+b.length),this.loadImg(c)},launch:function(){var a=$("body");a.addClass("help-body-hidden"),this.$panel.appendTo(a).fadeIn()},cancel:function(){var a=this;this.$panel.fadeOut(function(){a.$panel.remove(),$("body").removeClass("help-body-hidden")}),$(window).off("resize.SliderImg"),$(window).off("keydown.SliderImg"),this.stopPlay()},loadImg:function(a){var b=this,c=new Image;c.onload=function(){c.onload=c.onerror=null;var a=this.width,d=this.height;b.originalSize={width:a,height:d},b.setPosition(a,d)},c.onerror=function(){c.onload=c.onerror=null;var a=18,d=20;b.originalSize={width:a,height:d},b.setPosition(a,d)},c.src=a},selectWidthHeight:function(a,b){var c={},d=a,e=b,f=a/b,g=window.innerWidth||this.$panel.width(),h=window.innerHeight||this.$panel.height(),i=2*this.padding+2*this.otherLT,j=2*this.padding+this.btnsH+2*this.otherLT+(this.$title.outerHeight()||24);return g-=i,h-=j,g>=a&&b>h?(d=f*h,e=h):a>g&&h>=b?(d=g,e=g/f):a>g&&b>h?h>=g/f?(d=g,e=g/f):g>=f*h&&(d=f*h,e=h):(d=a,e=b),100>=d?(d=100,e=d/f):100>=e&&(e=100,d=f*e),c.width=d,c.height=e,c},setPosition:function(a,b){var c=this,d=c.selectWidthHeight(a,b),e=d.width,f=d.height,g=2*c.padding+e,h=this.isToFace(this.originalSize,d);c.result=d,(!c.$face.hasClass("show-face")||c.$face.hasClass("show-face")&&!h)&&(c.$inner.css({width:e,height:f}),c.$warp.css({width:g}),c.$warp.fadeIn().css({left:Math.max(c.otherLT/2,(c.$panel.width()-g-17)/2),top:Math.max(c.otherLT+c.btnsH,(c.$panel.height()-c.$warp.height()+c.btnsH)/2)}))},showFace:function(){var a=this.originalSize.width,b=this.originalSize.height,c=2*this.padding+a;this.$face.hasClass("show-face")?(this.$face.removeClass("show-face"),this.setPosition(a,b)):(this.$face.addClass("show-face"),this.$inner.css({width:a,height:b}),this.$warp.css({width:c}),this.$warp.fadeIn().css({left:Math.max(this.otherLT/2,(this.$panel.width()-c-17)/2),top:Math.max(this.otherLT+this.btnsH,(this.$panel.height()-this.$warp.height()+this.btnsH)/2)}))},isToFace:function(a,b){return a.width>b.width&&a.height>b.height?(this.$face.removeClass("disabled"),!0):(this.$face.addClass("disabled"),!1)}},SmartSelect.prototype={constructor:SmartSelect,getVal:function(){return this.valueContainer.data("value")},choose:function(a){$target=$(a.target),$target.is("li")&&($target.addClass("active").siblings(".active").removeClass("active"),this.valueContainer.text($target.data("label")).data("value",$target.data("value")),this.options.changeCallback&&this.options.changeCallback($target.data("value")))},toggleOption:function(){this.showing?this.hideOptions():this.showOptions()},showOptions:function(){var a=this;a.options.container.addClass("cc-as-input-focus-important"),a.optionContainer.stop().removeClass("cc-hide").animate({marginTop:0,opacity:1},200,function(){a.showing=!0})},hideOptions:function(){var a=this;a.options.container.removeClass("cc-as-input-focus-important"),a.optionContainer.stop().animate({marginTop:-3,opacity:0},100,function(){a.showing=!1,a.optionContainer.addClass("cc-hide")})}},TabBox.prototype={choose:function(a){this.tabContext.find(".tb-tab").removeClass("tb-tab-active"),this.tabContext.find(".tb-tab").eq(a).addClass("tb-tab-active"),this.paneContext.find(".tb-section").removeClass("tb-section-active"),this.paneContext.find(".tb-section").eq(a).addClass("tb-section-active")},removeClass:function(a,b){a.forEach(function(a){a.removeClass(b)})},bindTabClickFn:function(a){var b=this;this.tabContext.on("click",".tb-tab",function(c){var d=$(c.target),e=d.index();b.removeClass(b.tabs,"tb-tab-active"),b.removeClass(a,"tb-section-active"),b.tabs[e].addClass("tb-tab-active"),a[e].addClass("tb-section-active")})},getTabContainer:function(){return this.tabContext},getTabs:function(){return this.tabs},getTab:function(a){return this.tabs[a]},getSectionContaier:function(){return this.paneContext},getSections:function(){return this.panes},getSection:function(a){return this.panes[a]}},TermsOfSellingPanel.prototype={},ToTopPanel.prototype={constructor:ToTopPanel,handleScroll:function(){var a=this;$(window).scrollTop()>50?a.panel.show():a.panel.hide()},toTop:function(){utils.scrollTo(0)}},UpgradePanel.prototype={constructor:UpgradePanel},WaterPanel.prototype={constructor:WaterPanel,load:function(a,b){var c,d,e,f,g,h,i,j,k=this,l=!0,m="",n="";for(c=0,d=a.length;d>c;c++)!function(c){var d,l,o,p,q,r,s,t,u,v,w,x,y;m="/homepage/"+a[c].uLink,n="https://"+fh5.AS3BucketName+"/"+(""==a[c].accountlogo||null==a[c].accountlogo?"accountlogo.jpg":a[c].uLink+"/"+a[c].accountlogo),i=utils.encodeHTML(a[c].title),j=utils.encodeHTML(a[c].description),d=$("<li class='cc-water-item' id='"+a[c].bookid+"'></li>"),b?d.prependTo(k.panel):d.appendTo(k.panel);var z=a[c].uEmail,A=""==z||null==z?!0:!1;g=A?"Guest":utils.encodeHTML(""==a[c].uName||null==a[c].uName?z.match(/(.*)@/)?z.match(/(.*)@/)[1]:z:a[c].uName),k.isInDomainHome?h="/books/"+a[c].bLink+"/":(h=location.protocol+"//"+document.domain+"/"+a[c].uLink+"/"+a[c].bLink+"/",h=a[c].hasOwnProperty("basicLink")?a[c].basicLink:h),l=$("<a target='_blank' class='cc-water-show-book-link cc-transparent-link' target='_blank' href='"+h+"'></a>"),o=$(A?"<span class='guest' title='Guest Data'>"+g+"</span>":"<a class='cc-blue-link-4' target='_blank' title='"+g+"' href='/homepage/"+a[c].uLink+"'>"+g+"</a>"),k.isInDomainHome&&o.hide(),p=$("<div class='cc-water-img-container ff-mask-effect-three'></div>"),$imgInnerContainer=$("<div class='cc-water-img-inner-container'></div>");var B="0"==a[c].isNew?"png":"jpg";if(q=$("<img class='cc-water-img cc-hide' src='"+utils.pasreHttps(a[c].url)+"files/shot."+B+"'/>"),r=$("<div class='mask'></div>"),s=$("<span class='mask-icon'></span>"),t=$("<div class='cc-water-info-container'></div>"),u=$("<div class='cc-water-title' title='"+i+"'>"+k.searchHighlight(i,k.keyword)+"</div>"),y=$("<div class='cc-water-author'></div>"),v=$("<div class='cc-water-desc' title='"+utils.br2nl(j)+"'>"+k.searchHighlight(j,k.keyword)+"</div>"),w=$("<div class='cc-water-views'>Views: "+a[c].totalViews+"</div>"),x=$("<div class='cc-water-time'>"+a[c].timeStr+"</div>"),d.append(l.append(p.append($imgInnerContainer.append(q)).append(r.append(s)))).append(t.append(u)),0!=a[c].price&&p.append("<div class='cc-price-label large' title='"+a[c].currency+" "+a[c].price+"'>"+utils.getCurrencyCode(a[c].currency)+" "+a[c].price+"</span></div>"),!k.isInDomainHome){var C=$("<div class='cc-water-bottom-container'></div>"),D=$("<div class='icon-wrap'></div>"),E=$("<div class='profile-wrap'></div>"),F=$("<a class='profile-link' href='"+m+"'><img class='profile-img' src='"+n+"'></a>"),G=$("<div class='flow-container'></div>"),H=$("<i class='icon icon-download-alt' title='Download PDF file of this flipbook'></i>"),I=$("<i class='fa fa-spinner fa-spin cc-hide'></i>"),J=$("<i class='icon icon-share' title='Share this flipbook to your friends'></i>");
if("1"==a[c].isDownload&&"1"==a[c].isNew){$.base64.utf8encode=!0;var K=$.base64.btoa("bookId="+a[c].bookid+"&isDownLoad=0");if(0==parseInt(fh5.uType)&&fh5.uId!=a[c].userId)var K=$.base64.btoa("bookId="+a[c].bookid+"&isDownLoad=0&isScore=1");if(k.options.isMyPurchases)var K=$.base64.btoa("bookId="+a[c].bookid+"&isDownLoad=0&isScore=0");var L=K.split("").reverse().join("").replace(/=/g,""),M=!1,N=function(){var b="<div class='cc-download-failed'>Failed to download as Download Point is insufficient.</div>",d="<div class='cc-get-download-points cc-underline'>How to get download points?</div>";return fh5.isLoggedIn&&void 0!==fh5.downloadPoints&&fh5.downloadPoints<=0?(utils.launchNote(b+d),void $(".cc-get-download-points").on("click",function(){new DownloadPointPanel})):"1"==fh5.isUnActivate?void(window.location.href="/activate-account/index.php"):void $.ajax({url:"/download/download-pdf-file.php",type:"get",dataType:"json",data:{str:L},beforeSend:function(){I.show(),H.hide(),M=!0},success:function(b){switch(H.show(),I.hide(),M=!1,fh5.downloadPoints=b.points>=0?b.points:0,b.status.toString()){case"1":sta&&sta.bookDownload(a[c].bookid),location.href.match("localhost")||(window.location.href=b.url,"function"==typeof ga&&ga("send","event","pdf-download",window.location.href,document.location.pathname)),0!=parseInt(fh5.uType)||fh5.uId==a[c].userId||k.options.isMyPurchases||new PDFDownloadingPanel({points:b.points>=0?b.points:0});break;default:utils.launchNote(b.message)}},error:function(){H.show(),I.hide(),M=!1}})};H.on("click",function(){fh5.isLoggedIn?N(L):new SignUpPanel({isToDownload:!0,callback:N})})}else H.hide();J.on("click",function(){O()});var O=function(){new SharePanel({url:a[c].url,bookid:a[c].bookid,bookUrl:a[c].url,isRecord:!0,bLink:a[c].bLink,title:a[c].title,desc:a[c].description})};if("1"==k.options.isExploreAdmin){var P=$("<i class='fa fa-spin fa-spinner cc-hide'></i>"),Q=$("<i class='fa fa-spin fa-spinner cc-hide'></i>"),R=$("<i class='icon icon-star' title='Mark this book'></i>"),S=$("<i class='icon icon-ban-circle' title='Ban this book'></i>");C.append(E.append(F).append(G.append(o))).append(D.append(R).append(P).append(Q));var T=!1;R.on("click",function(){$.ajax(T?{url:"/center/db/opearte-explore-book-online.php",type:"post",dataType:"json",data:{opearateId:3,bookId:a[c].bookid},beforeSend:function(){R.addClass("cc-hide"),P.removeClass("cc-hide")},success:function(a){console.log(a),R.removeClass("cc-hide").removeClass("cc-water-liked").attr("title","Mark this book"),P.addClass("cc-hide"),T=!1},error:function(){}}:{url:"/center/db/opearte-explore-book-online.php",type:"post",dataType:"json",data:{opearateId:1,bookId:a[c].bookid},beforeSend:function(){R.addClass("cc-hide"),P.removeClass("cc-hide")},success:function(a){console.log(a),R.removeClass("cc-hide").addClass("cc-water-liked").attr("title","Cancel Mark"),P.addClass("cc-hide"),T=!0},error:function(){}})});var U=!1;S.on("click",function(){$.ajax(U?{url:"/center/db/opearte-explore-book-online.php",type:"post",dataType:"json",data:{opearateId:3,bookId:a[c].bookid},beforeSend:function(){S.addClass("cc-hide"),Q.removeClass("cc-hide")},success:function(a){console.log(a),S.removeClass("cc-hide").removeClass("cc-water-liked").attr("title","Ban this book"),Q.addClass("cc-hide"),U=!1},error:function(){}}:{url:"/center/db/opearte-explore-book-online.php",type:"post",dataType:"json",data:{opearateId:2,bookId:a[c].bookid},beforeSend:function(){S.addClass("cc-hide"),Q.removeClass("cc-hide")},success:function(a){console.log(a),S.removeClass("cc-hide").addClass("cc-water-liked").attr("title","Cancel Ban"),Q.addClass("cc-hide"),U=!0},error:function(){}})})}d.append(C.append(E.append(F).append(G.append(o))).append(D.append(H).append(I).append(J)))}utils.loadImg($imgInnerContainer,q),"0"!==a[c].label&&p.append("<img class='cc-water-label-img' src='"+utils.getLabelFilePath(a[c].label)+"'>"),e=a[c].pageWidth/a[c].pageHeight,f=k.itemWidth/(isNaN(parseInt(e))?.75:e),d.width(k.itemWidth),p.width(k.itemWidth),p.height(f),l.data("title",a[c].title),l.data("url",h),k.lastTime=a[c].newTime;p.hover(function(){A||k.isInDomainHome},function(){A||k.isInDomainHome})}(c);!k.isInDomainHome,$(window).on("keydown",function(a){17==a.which&&(l=!1)}),$(window).on("keyup",function(a){17==a.which&&(l=!0)}),this.setPosition()},setPosition:function(){var a,b,c=this;for(c.cols=parseInt(((c.container[0].clientWidth||c.containerWidth)-c.offsetX)/(c.itemWidth+c.offsetX)),a=0;a<c.cols;a++)c.colHeights[a]=c.offsetY;c.panel.children().each(function(a,b){var d=$(b),e=Math.min.apply(null,c.colHeights),f=c.colHeights.indexOf(e);d.css({left:f*c.itemWidth+(f+1)*c.offsetX,top:c.colHeights[f]}),c.colHeights[f]+=d.height()+c.offsetY}),b=(c.cols+1)*c.offsetX+c.cols*c.itemWidth,c.panel.css({width:b,height:utils.max2(c.colHeights),left:((c.container[0].clientWidth||c.containerWidth)-b)/2})},searchHighlight:function(a,b){if(""==b)return a;for(var c=a,d=new RegExp("<.*?>","i"),e=new Array,f=0;!0;f++){var g=d.exec(c);if(!g)break;e[f]=g,c=c.replace(g,"{[("+f+")]}")}for(var h=unescape(b.replace(/\+/g," ")).split(/\s+/),i=0;i<h.length;i++){var j=new RegExp("("+h[i].replace(/[(){}.+*?^$|\\\[\]]/g,"\\$&")+")","ig");c=c.replace(j,"<@$>$1<$@>")}c=c.replaceAll("<@$>","<span style='background-color: yellow;'>"),c=c.replaceAll("<$@>","</span>");for(var f=0;f<e.length;f++)c=c.replace("{[("+f+")]}",e[f]);return c},createHoverContent:function(){var a=this,b=$("<div class='explore-water-hover-banner-context'></div>"),c=$("<img class='cc-hide'/>"),d=$("<div class='explore-water-hover-context'></div>"),e=$("<a class='explore-water-hover-imgLink'></a>"),f=$("<div class='explore-water-hover-imgContext'></div>"),g=$("<img class='explore-water-hover-user-img cc-hide'/>"),h=$("<div class='explore-water-hover-mid'></div>"),i=$("<div class='explore-water-hover-name'></div>"),j=$("<a class='explore-water-hover-name-link'></a>"),k=$("<span class='explore-water-hover-book-count'>Publications: -</span>");hoverBtn=$("<div class='explore-water-hover-btn'></div>"),btnContent=$("<span class='explore-water-hover-button-content button-pure'></span>"),subscribe=$("<span class='explore-water-hover-subscribe-label'><span class='fa fa-rss'></span><span class='explore-botton-text'>&nbsp;Follow</span></span>").show(),subscribed=$("<span class='explore-water-hover-subscribed-label'><span class='fa fa-check'></span><span class='explore-botton-text'>Following</span></span>").hide(),unsubscribe=$("<span class='explore-water-hover-unsubscribe-label'><span class='fa fa-times'></span><span class='explore-botton-text'>Unfollow</span></span>").hide(),subCount=$("<span class='center-homepage-subscribe-count' style='top: 1px;margin-left:10px;'>-</span>"),hoverBottom=$("<div class='explore-water-hover-bottom'></div>"),innerBottom=$("<div class='explore-water-hover-inner-bottom'></div>"),hoverAbout=$("<div class='explore-water-hover-about'></div>"),d.append(b.append(c)).append(e.append(f.append(g))).append(h.append(i.append(j).append(k)).append(hoverBtn.append(btnContent.append(subscribe).append(subscribed).append(unsubscribe)).append(subCount))).append(hoverBottom.append(innerBottom.append(hoverAbout))).appendTo($("body")),a.timeOut=null,d.hover(function(){clearTimeout(a.timeOut),d.fadeIn(0)},function(){d.stop().fadeOut(200)}),btnContent.hover(function(){a.isSubscribed?(subscribe.hide(),subscribed.hide(),unsubscribe.show()):(subscribe.show(),subscribed.hide(),unsubscribe.hide())},function(){a.isSubscribed?(subscribe.hide(),subscribed.show(),unsubscribe.hide()):(subscribe.show(),subscribed.hide(),unsubscribe.hide())}),a.isSubscribed=!1,a.hoverContext=d,a.btnContent=btnContent,a.subscribe=subscribe,a.subscribed=subscribed,a.unsubscribe=unsubscribe,a.hoverNameLink=j,a.hoverBookCount=k,a.hoverImgLink=e,a.hoverImgContext=f,a.hoverImg=g,a.subCount=subCount,a.hoverAbout=hoverAbout,a.bannerContext=b,a.bannerImg=c}},function(a){var b="object"==typeof exports&&exports,c="object"==typeof module&&module&&module.exports==b&&module,d="object"==typeof global&&global;(d.global===d||d.window===d)&&(a=d);var e=function(a){this.message=a};e.prototype=new Error,e.prototype.name="InvalidCharacterError";var f=function(a){throw new e(a)},g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=/<%= spaceCharacters %>/g,i=function(a){a=String(a).replace(h,"");var b=a.length;b%4==0&&(a=a.replace(/==?$/,""),b=a.length),(b%4==1||/[^+a-zA-Z0-9/]/.test(a))&&f("Invalid character: the string to be decoded is not correctly encoded.");for(var c,d,e=0,i="",j=-1;++j<b;)d=g.indexOf(a.charAt(j)),c=e%4?64*c+d:d,e++%4&&(i+=String.fromCharCode(255&c>>(-2*e&6)));return i},j=function(a){a=String(a),/[^\0-\xFF]/.test(a)&&f("The string to be encoded contains characters outside of the Latin1 range.");for(var b,c,d,e,h=a.length%3,i="",j=-1,k=a.length-h;++j<k;)b=a.charCodeAt(j)<<16,c=a.charCodeAt(++j)<<8,d=a.charCodeAt(++j),e=b+c+d,i+=g.charAt(e>>18&63)+g.charAt(e>>12&63)+g.charAt(e>>6&63)+g.charAt(63&e);return 2==h?(b=a.charCodeAt(j)<<8,c=a.charCodeAt(++j),e=b+c,i+=g.charAt(e>>10)+g.charAt(e>>4&63)+g.charAt(e<<2&63)+"="):1==h&&(e=a.charCodeAt(j),i+=g.charAt(e>>2)+g.charAt(e<<4&63)+"=="),i},k={encode:j,decode:i,version:"<%= version %>"};if("function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return k});else if(b&&!b.nodeType)if(c)c.exports=k;else for(var l in k)k.hasOwnProperty(l)&&(b[l]=k[l]);else a.base64=k}(this),function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){b.exports=$||jQuery},{}],2:[function(a,b){function c(a){this.options=a,this.$el=d(d.parseHTML(g)[0]),this._initStartpage(),this._initTitle()}var d=a("./$"),e=a("./observable"),f=a("./prop-change-emmiter"),g="<div class='emb-widget-component emb-widget-base'><h4>Basic</h4><div><div class='emb-widget-option emb-widget-base-startpage'><label for='emb-base-startpage'>Start Page</label><select name='emb-base-startpage' id='emb-base-startpage'></select></div><div class='emb-widget-option emb-widget-base-title'><label for='emb-base-title'>Title</label><input id='emb-base-title' type='text'  maxlength='64' placeholder='Please Input Title'></div></div></div>";c.prototype=d.extend({},f,{constructor:c,_initStartpage:function(){var a=this.$el.find(".emb-widget-base-startpage>select"),b=this.startpage=e(0),c=this.max=e(0),f=[];c.$watch(function(c,e){if(c>e){for(var g="",h=0,i=c-e;++h<=i;)g+="<option value="+(e+h)+">"+(e+h)+"</option>";a.append(g)}else e>c&&(d.each(Array.prototype.slice.call(f,c),function(a,b){d(b).remove()}),b()>c&&b(c));f=a.find("option"),!b()&&c&&b(1)}),a.append(f.join("")),f=a.find("option");var g=this;b.$watch(function(a){f[a-1].selected=!0,g.notify("startpage")}),a.change(function(){var a=+f.filter(":selected").val();b(a)}),this.options.max&&c(this.options.max)},_initTitle:function(){if(this.options.noTitle)return void this.$el.find(".emb-widget-base-title").remove();var a=this.$el.find(".emb-widget-base-title>input"),b=this.title=e(""),c=this;b.$watch(function(b){a.val(b),c.notify("title")}),a.on("input",function(){return b(this.value),!1}),this.options.title&&b(this.options.title)},destroy:function(){this.$el.remove(),d(this).off()}}),b.exports=c},{"./$":1,"./observable":18,"./prop-change-emmiter":20}],3:[function(a,b){function c(a){this.options=a||{}}var d=a("./base"),e=a("./size"),f=(a("./parse-param-value"),a("./code-tabs")),g=a("./$"),h=a("./light-box"),i="<div class='emb-widget emb-basic-widget'><div class='emb-right-panel'><h3>Preview<a href='javascript:void(0);' class='emb-zoom-icon'><i class='icon icon-resize-full'></i></a></h3><div id='emb-preview'><div class='emb-iframe-wrapper'><div class='cc-light-box-loading'><i class='fa fa-spinner fa-spin'></i></div><iframe frameborder=\"0\" allowfullscreen allowtransparency></iframe></div></div><h3>How To Embed</h3><div class='emb-steps'><div class='emb-step emb-code-tabs-wrapper'><div class='emb-step-title'>Copy the embed code below and paste it into your HTML file.</div></div></div></div><div class='emb-left-panel'><h3>Options</h3><div class='emb-panel-content'></div></div></div>";c.prototype={constructor:c,init:function(){this.$el=g(g.parseHTML(i)[0]);var a=this.$preview=this.$el.find("#emb-preview iframe"),b=(a.parent(),this.base=new d({max:this.options.max,noTitle:!0}));b.onchange(function(){return this.refresh(),!1}.bind(this));var c=this.size=new e({enableAutoResize:!1});c.onchange(function(){return this.refreshSizeAndSteps(),!1}.bind(this)),this.$el.find(".emb-panel-content").append([b.$el,c.$el]),this._initZoom(),this._initSteps(),this.refresh()},refreshURL:function(){this.$preview[0].src=this.getURL(this.options.domainLink?0:1,!0),this.$preview[0].width=this.size.width(),this.$preview[0].height=this.size.height()},refreshSteps:function(){this.codeTabs.setCodes(this.getURL(0),this.getURL(1),this.getURL(2),{width:this.size.width(),height:this.size.height()})},refreshSizeAndSteps:function(){this.$preview[0].width=this.size.width(),this.$preview[0].height=this.size.height(),this.refreshSteps()},refresh:function(){this.refreshURL(),this.refreshSteps()},getURL:function(a,b){var c;return c=this.options.https,c+(b?"?t="+Date.now():"")+"#p="+this.base.startpage()},_initSteps:function(){var a=this.codeTabs=new f({domainLink:this.options.domainLink});a.$el.appendTo(this.$el.find(".emb-steps .emb-code-tabs-wrapper"))},_initZoom:function(){function a(a,b,c){var e=a.getBoundingClientRect();d[c?"show":"hide"]({width:e.width,height:e.height,left:e.left,top:e.top,pointerX:b.clientX,pointerY:b.clientY})}var b=this.$preview.parent()[0];this.$el.find(".emb-zoom-icon").click(function(c){a(b,c,!0)});var c=g('<iframe frameborder="0" allowfullscreen allowtransparency />')[0],d=this._lightbox=new h({closeWhenClickBackground:!0,content:[c],onClose:function(c){a(b,c,!1)}}),e=this,f=this.size;g(d).on("beforeShow",function(){c.width=f.width()+"px",c.height=f.height()+"px"}).on("afterShow",function(){c.src=e.getURL(e.options.domainLink?0:1,!0)}).on("afterHide",function(){c.removeAttribute("src")})},destroy:function(){this.base.destroy(),this.size.destroy(),this.codeTabs.destroy(),this._lightbox.destroy(),this.$el.remove()}},b.exports=c},{"./$":1,"./base":2,"./code-tabs":6,"./light-box":14,"./parse-param-value":19,"./size":22}],4:[function(a,b){function c(a){this.options=a||{},this.$el=d(d.parseHTML(j)[0]),this._initBgColor(),this._initColor(),this._initFont()}var d=a("./$"),e=a("./observable"),f=a("./prop-change-emmiter"),g=a("./create-color-picker"),h=a("./update-color-picker"),i=a("./destroy-color-picker"),j="<div class='emb-widget-component emb-widget-button-style'><h4>Styling</h4><div><div class='emb-widget-option emb-widget-button-style-bg-color'><label for='emb-button-style-bg-color'>Background Color</label><input id='emb-button-style-bg-color'></div><div class='emb-widget-option emb-widget-button-style-color'><label for='emb-button-style-color'>Font Color</label><input id='emb-button-style-color'></div><div class='emb-widget-option emb-widget-button-style-font'><label for='emb-button-style-fsize'>Font Size</label><input type='number' min='1' max='64' step='1' id='emb-button-style-fsize'><div class='emb-inline-group'><div class='emb-button-style-font-bold' id='emb-button-style-fbold'><input name='emb-button-style-fbold' type='checkbox'><div class='emb-button-content'>B</div></div><div class='emb-button-style-font-italic' id='emb-button-style-fitalic'><input name='emb-button-style-fitalic' type='checkbox'><div class='emb-button-content'>I</div></div></div></div></div></div>";c.prototype=d.extend({},f,{constructor:c,_initBgColor:function(){var a=this.backgroundColor=e(this.options.backgroundColor||"#03a9f4"),b=!1,c=g(this.$el.find("#emb-button-style-bg-color"),a(),function(c){b=!0,a(c.toHexString())}),d=this;a.$watch(function(a){b||h(c,a),d.notify("backgroundColor")})},_initColor:function(){var a=this.color=e(this.options.color||"#fff"),b=!1,c=g(this.$el.find("#emb-button-style-color"),a(),function(c){b=!0,a(c.toHexString())}),d=this;a.$watch(function(a){b||h(c,a),d.notify("color")})},_initFont:function(){var a=this.$el.find(".emb-widget-button-style-font"),b=a.find("#emb-button-style-fsize"),c=this.fontSize=e(0),d=this;c.$watch(function(a){b.val(a),d.notify("fontSize")}),b.on("input",function(){return c(+this.value),!1});var f=a.find("#emb-button-style-fbold>input"),g=a.find("#emb-button-style-fitalic>input"),h=this.fontBold=e(!1),i=this.fontItalic=e(!1);f.change(function(){return h(this.checked),!1}),g.change(function(){return i(this.checked),!1}),h.$watch(function(a){f[0].checked=a,d.notify("fontBold")}),i.$watch(function(a){g[0].checked=a,d.notify("fontItalic")}),c(15)},destroy:function(){i(this.$el.find("#emb-button-style-color,#emb-button-style-bg-color")),this.$el.remove(),d(this).off()}}),b.exports=c},{"./$":1,"./create-color-picker":9,"./destroy-color-picker":10,"./observable":18,"./prop-change-emmiter":20,"./update-color-picker":28}],5:[function(a,b){function c(a){this.options=a||{},this._uid=k()}var d=a("./base"),e=a("./size"),f=a("./button-style"),g=a("./parse-param-value"),h=a("./code-tabs"),i=a("./simpleEncodeURIComponent"),j=a("./$"),k=a("./uid"),l="<div class='emb-widget emb-button-widget'><div class='emb-right-panel'><h3>Preview</h3><div id='emb-preview'><iframe frameborder=\"0\" allowfullscreen allowtransparency></iframe></div><h3>How To Embed</h3><div class='emb-steps'><div class='emb-step emb-code-tabs-wrapper'><div class='emb-step-title'>Copy the embed code below and paste it into your HTML file.</div></div></div></div><div class='emb-left-panel'><h3>Options</h3><div class='emb-panel-content'></div></div></div>";c.prototype={constructor:c,init:function(){this.$el=j(j.parseHTML(l)[0]);var a=(this.$preview=this.$el.find("#emb-preview>iframe"),function(){return this.refresh(),!1}.bind(this)),b=function(){g.isAutoResize&&this._autoUpdateSizeValues()}.bind(this),c=this.base=new d({max:this.options.max,title:this.options.title});c.onchange(function(){b(),a()}.bind(this));var g=this.size=new e({autoResize:b});g.onchange(a);var h=this.style=new f;h.onchange(function(){b(),a()}),this.$el.find(".emb-panel-content").append([c.$el,h.$el]),j(window).on("message."+this._uid,function(a){var b=a.originalEvent.data;g.isAutoResize&&b&&"size"==b.type&&"embed-fliphtml5"==b.key&&(g.width(b.width),g.height(b.height))}),this._initSteps(),this.refresh()},refreshURL:function(){this.$preview[0].src=this.getURL(this.options.domainLink?0:1,!0),this.$preview[0].width=this.size.width(),this.$preview[0].height=this.size.height()},refreshSteps:function(){this.codeTabs.setCodes(this.getURL(0,!0),this.getURL(1,!0),this.getURL(2,!0),{width:this.size.width(),height:this.size.height()})},refresh:function(){this.refreshURL(),this.refreshSteps()},getURL:function(a,b){var c;return c=this.options.https,this.options.frame+"#!/?"+this.getParams(c,b)},getParams:function(a,b){var c={g:this.style.backgroundColor(),c:this.style.color(),s:this.style.fontSize(),b:this.style.fontBold(),i:this.style.fontItalic(),t:this.base.title(),p:this.base.startpage(),l:a},d=[];for(var e in c)var f=d.push(e+"="+g(c[e]));return b?i(d.join("&")):encodeURIComponent(d.join("&"))},_initSteps:function(){var a=this.codeTabs=new h({domainLink:this.options.domainLink});a.$el.appendTo(this.$el.find(".emb-steps .emb-code-tabs-wrapper"))},_autoUpdateSizeValues:function(){this.$preview[0].contentWindow.postMessage({type:"getSize",key:"embed-fliphtml5"},"*")},destroy:function(){this.base.destroy(),this.size.destroy(),this.style.destroy(),this.codeTabs.destroy(),j(window).off("message."+this._uid),this.$el.remove()}},b.exports=c},{"./$":1,"./base":2,"./button-style":4,"./code-tabs":6,"./parse-param-value":19,"./simpleEncodeURIComponent":21,"./size":22,"./uid":27}],6:[function(a,b){function c(a){this.options=f.extend({template:h},a),this.$el=f(f.parseHTML(g)[0]),this.options.domainLink&&(this.$el.find(".emb-tab-contents").prepend("<li id='embed-domain-code'><textarea readOnly></textarea></li>"),this.$domainCode=this.$el.find("#embed-domain-code>textarea")),this.$httpCode=this.$el.find("#embed-http-code>textarea"),this.$httpsCode=this.$el.find("#embed-https-code>textarea"),this.init()}var d=a("./tabbar"),e=a("./format"),f=a("./$"),g="<div class='emb-code-tabs'><ul class='emb-tab-contents'><li id='embed-http-code'><textarea readOnly></textarea></li><li id='embed-https-code' class='embed-selected'><textarea readOnly></textarea></li></ul></div>",h='<iframe width="#{width}px" height="#{height}px" src="#{src}" frameborder="0" allowfullscreen allowtransparency></iframe>';c.prototype={init:function(){var a=[];a=["<span>HTTPS</span>"];var b=this.tabbar=new d({items:a});b.$el.prependTo(this.$el);this.$el.find(".emb-tab-contents>li");this.$httpCode.click(function(){this.select()}),this.$httpsCode.click(function(){this.select()}),this.options.domainLink&&this.$domainCode.click(function(){this.select()}),b.select(0)},setCodes:function(a,b,c,d){this.$httpsCode.text(e(this.options.template,f.extend({src:c},d)))},destroy:function(){this.tabbar.destroy(),this.$el.remove(),f(this).off()}},b.exports=c},{"./$":1,"./format":13,"./tabbar":23}],7:[function(a,b){function c(a){this.options=a||{},this.$el=i(i.parseHTML(j)[0]),this._initBorder()}var d=a("./observable"),e=a("./prop-change-emmiter"),f=a("./create-color-picker"),g=a("./update-color-picker"),h=a("./destroy-color-picker"),i=a("./$"),j="<div class='emb-widget-component emb-widget-cover-style'><h4>Styling</h4><div><div class='emb-widget-option emb-widget-cover-style-border-color'><label for='emb-cover-style-border-color'>Border Color</label><input id='emb-cover-style-border-color'></div><div class='emb-widget-option emb-widget-cover-style-border-width'><label for='emb-cover-style-border-width'>Border Width</label><input id='emb-cover-style-border-width' min='0' max='16' step='1' type='number'></div></div></div>";c.prototype=i.extend({},e,{constructor:c,_initBorder:function(){var a=this.borderColor=d("#000"),b=!1,c=f(this.$el.find("#emb-cover-style-border-color"),a(),function(c){b=!0,a(c.toHexString())}),e=this;a.$watch(function(a){b||g(c,a),e.notify("borderColor")});var h=this.borderWidth=d(1);$width=this.$el.find("#emb-cover-style-border-width").on("input",function(){return h(+this.value),!1}),h.$watch(function(a){$width.val(a),e.notify("borderWidth")}),h(0)},destroy:function(){h(this.$el.find("#emb-cover-style-border-color")),this.$el.remove(),i(this).off()}}),b.exports=c},{"./$":1,"./create-color-picker":9,"./destroy-color-picker":10,"./observable":18,"./prop-change-emmiter":20,"./update-color-picker":28}],8:[function(a,b){function c(a){this.options=a||{},this._uid=k()}var d=a("./base"),e=a("./size"),f=a("./cover-style"),g=a("./parse-param-value"),h=a("./code-tabs"),i=a("./simpleEncodeURIComponent"),j=a("./$"),k=a("./uid"),l="<div class='emb-widget emb-cover-widget'><div class='emb-right-panel'><h3>Preview</h3><div id='emb-preview'><iframe frameborder=\"0\" allowfullscreen allowtransparency></iframe></div><h3>How To Embed</h3><div class='emb-steps'><div class='emb-step emb-code-tabs-wrapper'><div class='emb-step-title'>Copy the embed code below and paste it into your HTML file.</div></div></div></div><div class='emb-left-panel'><h3>Options</h3><div class='emb-panel-content'></div></div></div>";c.prototype={constructor:c,init:function(){this.$el=j(j.parseHTML(l)[0]);var a=(this.$preview=this.$el.find("#emb-preview>iframe"),function(){return this.refresh(),!1}.bind(this)),b=function(){g.isAutoResize&&this._autoUpdateSizeValues()}.bind(this),c=this.base=new d({max:this.options.max,noTitle:!0});c.onchange(function(){b(),a()}.bind(this));var g=this.size=new e({autoResize:b});g.onchange(a);var h=this.style=new f;h.onchange(function(){b(),a()}),this.$el.find(".emb-panel-content").append([c.$el,h.$el,g.$el]),j(window).on("message."+this._uid,function(a){var b=a.originalEvent.data;g.isAutoResize&&b&&"size"==b.type&&"embed-fliphtml5"==b.key&&(g.width(b.width),g.height(b.height))}),this._initSteps(),this.refresh()},refreshURL:function(){this.$preview[0].src=this.getURL(this.options.domainLink?0:1,!0),this.$preview[0].width=this.size.width(),this.$preview[0].height=this.size.height()},refreshSteps:function(){this.codeTabs.setCodes(this.getURL(0,!0),this.getURL(1,!0),this.getURL(2,!0),{width:this.size.width(),height:this.size.height()})},refresh:function(){this.refreshURL(),this.refreshSteps()},getURL:function(a,b){var c;return c=this.options.https,this.options.frame+"#!/?"+this.getParams(c,b)},getParams:function(a,b){var c={w:this.style.borderWidth(),bc:this.style.borderColor(),p:this.base.startpage(),l:a,t:this.options.thumb},d=[];for(var e in c)var f=d.push(e+"="+g(c[e]));return b?i(d.join("&")):encodeURIComponent(d.join("&"))},_initSteps:function(){var a=this.codeTabs=new h({domainLink:this.options.domainLink});a.$el.appendTo(this.$el.find(".emb-steps .emb-code-tabs-wrapper"))},_autoUpdateSizeValues:function(){this.$preview[0].contentWindow.postMessage({type:"getSize",key:"embed-fliphtml5"},"*")},destroy:function(){this.base.destroy(),this.size.destroy(),this.style.destroy(),this.codeTabs.destroy(),j(window).off("message."+this._uid),this.$el.remove()}},b.exports=c},{"./$":1,"./base":2,"./code-tabs":6,"./cover-style":7,"./parse-param-value":19,"./simpleEncodeURIComponent":21,"./size":22,"./uid":27}],9:[function(a,b){var c=a("./$");b.exports=function(a,b,d){return c(a).spectrum({localStorageKey:"fliphtml5.embed",change:d,move:d,color:b,showInput:!0,showAlpha:!1,showPalette:!0,palette:[["#000000","#272727","#4F4F4F","#7B7B7B","#ADADAD","E0E0E0","#FFFFFF"],["#2F0000","#600000","#930000","#CE0000","#FF0000","#FF5151","#FF9797"],["#600030","#9F0050","#D9006C","#FF0080","#FF60AF","#FF95CA","#FFC1E0"],["#460046","#750075","#AE00AE","#E800E8","#FF44FF","#FF8EFF","#FFBFFF"],["#000079","#0000C6","#0000E3","#4A4AFF","#7D7DFF","#AAAAFF","#CECEFF"],["#003D79","#005AB5","#0072E3","#2894FF","#66B3FF","#97CBFF","#C4E1FF"],["#003E3E","#007979","#00AEAE","#00E3E3","#4DFFFF","#A6FFFF","#CAFFFF"],["#006000","#007500","#009100","#00BB00","#00EC00","#53FF53","#93FF93"],["#467500","#64A600","#82D900","#9AFF02","#B7FF4A","#CCFF80","#DEFFAC"],["#424200","#737300","#A6A600","#E1E100","#FFFF37","#FFFF93","#FFFFB9"],["#844200","#BB5E00","#EA7500","#FF9224","#FFAF60","#FFC78E","#FFDCB9"]],showSelectionPalette:!0,clickoutFiresChange:!0,showInitial:!0,chooseText:"Choose",cancelText:"Cancel"}),a}},{"./$":1}],10:[function(a,b){var c=a("./$");b.exports=function(a){c(a).spectrum("destroy")}},{"./$":1}],11:[function(a,b){b.exports=function(a){return a.replace(/["']/g,function(a){return"\\"+a})}},{}],12:[function(a){function b(a){this.options=a||{},this._widgets=[],this._currentWidget=void 0,this._canShowIFrame=!1,this.init()}function c(a,c){var f=c.items,h=new e({draggable:!1,autoCenter:!0,items:f.map(function(a){return g("<img width=#{width} height=#{height} src='#{thumb}' />",a)})}),j=new b({defaultOptions:c.defaultOptions,widgets:f.map(function(a){return{name:a.name,options:a.options}})}),k=!!c.persistent,l=new d({closeWhenClickBackground:!0,content:[h.$el,j.$el],onClose:function(b){var c=a.getBoundingClientRect();l.hide({width:c.width,height:c.height,left:c.left,top:c.top,pointerX:b.clientX,pointerY:b.clientY})}});return i(h).on("itemChange",function(a,b){j.selectedIndex(b)}),i(l).one("beforeShow",function(){h.select(0)}).one("show",function(){h.scrollBy(0),i(j).on("widgetShow",function(){l.autoResize(!0)})}).on("afterShow",function(){j.showIFrameInWidget()}).on("afterHide",function(){j.hideIFrameInWidget(),k||(h.destroy(),j.destroy(),l.destroy(),h=j=l=void 0)}.bind(this)),l.$el.addClass("emb-config-lightbox"),l}var d=a("./light-box"),e=a("./navbar"),f=a("./observable"),g=a("./format"),h=a("./widget-factory"),i=a("./$");b.prototype={constructor:b,init:function(){this.$el=i("<div />").addClass("emb-contents");var a=(this.$contents=i("<div />").appendTo(this.$el),location.href),b=this.options.defaultOptions,c=(this.widgets=this.options.widgets.map(function(c){return h.get(c.name,i.extend({frame:a},b,c.options))}),this.selectedIndex=f(-1));c.$watch(function(a,b){b>=0&&this._hideWidget(this.widgets[b]),this._showWidget(this.widgets[a]),i(this).trigger("itemChange",[a,b])}.bind(this))},_showWidget:function(a){a._initialized||(a._initialized=!0,a.init()),this._currentWidget=a;var b=a.$el,c=b.find(".emb-left-panel,.emb-right-panel").addClass("emb-auto-height");!this._canShowIFrame&&a.$preview&&a.$preview[0].removeAttribute("src"),b.appendTo(this.$contents);var d=b.innerWidth(),e=b.innerHeight();this.$el.width(d).height(e),c.removeClass("emb-auto-height"),i(this).trigger("widgetShow")},showIFrameInWidget:function(){this._currentWidget&&this._currentWidget.refresh(),this._canShowIFrame=!0},hideIFrameInWidget:function(){this._currentWidget&&this._currentWidget.$preview&&this._currentWidget.$preview[0].removeAttribute("src"),this._canShowIFrame=!1},_hideWidget:function(a){a.$el.detach()},destroy:function(){this.widgets&&(this.widgets.forEach(function(a){a._initialized&&a.destroy()}),this.widgets=void 0),i(this).off()}};var j={defaultOptions:{domainLink:""},items:[{width:160,height:100,thumb:"/embed/dist/img/1.jpg",name:"basic"},{width:160,height:100,thumb:"/embed/dist/img/2.jpg",name:"button",options:{frame:"https://fliphtml5.com/embed/dist/html/embed-button.html"}},{width:160,height:100,thumb:"/embed/dist/img/3.jpg",name:"text",options:{frame:"https://fliphtml5.com/embed/dist/html/embed-text.html"}},{width:160,height:100,thumb:"/embed/dist/img/4.jpg",name:"cover",options:{frame:"https://fliphtml5.com/embed/dist/html/embed-cover.html"}},{width:160,height:100,thumb:"/embed/dist/img/5.jpg",name:"lightbox"}]};i.fn.injectEmbConfigLightbox=function(a){return a=i.extend(!0,{},j,a),this.each(function(){var b=void 0;i(this).on("click",function(d){var e=this.getBoundingClientRect();b||(b=c(this,a)),b.show({width:e.width,height:e.height,left:e.left,top:e.top,pointerX:d.clientX,pointerY:d.clientY}),a.persistent||(b=void 0)})})}},{"./$":1,"./format":13,"./light-box":14,"./navbar":17,"./observable":18,"./widget-factory":29}],13:[function(a,b){var c=function(){function a(a,b){var c=f[a];return c?c(b):(c=f[a]=new Function(e,"return "+a.replace(d,function(a,b,c){return(b||"")+e+"."+c})+";"))(b)}function b(b,d){return b.replace(c,function(b,c){return a(c,d)})}var c=/#\{([^\}]+)\}/g,d=/(?:^|([^a-zA-Z$_.\['"]))([a-zA-Z$_][\w$_]*)/g,e="_"+Math.random().toString(36).substring(2,5),f={};return b._cached=f,b}();b.exports=c},{}],14:[function(a,b){function c(a,b,c,d){return Math.sqrt(Math.max(a*a+b*b,(a-c)*(a-c)+b*b,a*a+(b-d)*(b-d),(a-c)*(a-c)+(b-d)*(b-d)))}function d(a,b){var c=a[0];return j?void a.one("webkitTransitionEnd transitionend",b):void(c._transitionTimeoutId=setTimeout(function(){c._transitionTimeoutId=void 0,c=void 0,b()},0))}function e(a){var b=a[0];return j?void a.off("webkitTransitionEnd transitionend"):void(null!=b._transitionTimeoutId&&(clearTimeout(b._transitionTimeoutId),b._transitionTimeoutId=void 0,b=void 0))}function f(a){this.props=a||{},this._showed=!1,this._shouldResizeWhenShow=!0,this._hideHandler=void 0,this._uid=g(),this.init()}var g=a("./uid"),h=a("./$"),i={},j=!1;!function(){var a=document.createElement("div").style;("WebkitTransition"in a||"transition"in a)&&(j=!0),a=null}();var k="<div class='emb-lightbox'><div class='emb-lightbox-bg'><div class='emb-lightbox-ripple'></div></div><div class='emb-lightbox-panel-wrapper'><div class='emb-lightbox-panel'><!-- make content overflow hidden --><div class='emb-lightbox-content-wrapper'><div class='emb-lightbox-content'></div></div><button class='emb-lightbox-close'>x</button></div></div></div>";
f.prototype={constructor:f,init:function(){var a=function(a){this.props.onClose?this.props.onClose(a):this.hide({pointerX:a.clientX,pointerY:a.clientY})}.bind(this);this.$el=h(h.parseHTML(k)[0]),this.$panel=this.$el.find(".emb-lightbox-panel"),this.$content=this.$panel.find(".emb-lightbox-content"),this.$content.append(this.props.content),this.$bg=this.$el.find(".emb-lightbox-bg"),this.$ripple=this.$bg.children(".emb-lightbox-ripple"),this.$close=this.$el.find(".emb-lightbox-close").on("click",a),this.props.closeWhenClickBackground!==!1&&this.$el.find(".emb-lightbox-panel-wrapper").on("click",function(b){h.contains(this.$panel[0],b.target)||a(b)}.bind(this)),this._listenResize()},show:function(a){if(!this._showed){i[this._uid]=!0,h("body").addClass("embed-overflow-hidden"),this._showed=!0,this._hideHandler&&this._hideHandler(),h.contains(document,this.$el[0])||this.$el.appendTo(document.body),h(this).trigger("beforeShow"),this._shouldResizeWhenShow&&(this._shouldResizeWhenShow=!1,this.autoResize());var b=this.$bg[0].getBoundingClientRect();a||(a={}),this._listenTransition(function(){h(this).trigger("afterShow")}.bind(this)),a.width=a.width||0,a.height=a.height||0,a.left=null==a.left?b.width/2:a.left,a.top=null==a.top?b.height/2:a.top,a.pointerX=null==a.pointerX?a.left:a.pointerX,a.pointerY=null==a.pointerY?a.top:a.pointerY;var d=a.pointerX-b.left,e=a.pointerY-b.top,f=b.width/2,g=b.height/2,j=c(d,e,Math.max(2*f,this.$content[0].offsetWidth),Math.max(2*g,this.$content[0].offsetHeight)),k=2*j,l=this.$content[0].offsetWidth,m=this.$content[0].offsetHeight;this.$ripple.css({transition:"none",width:k,height:k,opacity:0,borderRadius:"50%",WebkitTransform:"translate("+(d-j)+"px,"+(e-j)+"px) scale(0)",transform:"translate3d("+(d-j)+"px,"+(e-j)+"px,0) scale(0)"})[0].offsetHeight,this.$ripple.css({transition:"",opacity:"",WebkitTransform:"translate("+(f-j)+"px,"+(g-j)+"px) scale(1)",transform:"translate3d("+(f-j)+"px,"+(g-j)+"px,0) scale(1)"});var n=h.css(this.$panel[0],"marginLeft",!0),o=h.css(this.$panel[0],"marginTop",!0);this.$content.css({WebkitTransform:"scale("+(a.width/l||0)+","+(a.height/m||0)+")",transform:"translateZ(0) scale("+(a.width/l||0)+","+(a.height/m||0)+")"}),this.$panel.css({transition:"none",width:a.width,height:a.height,left:n?2*(a.left-b.left)-2*f+a.width:a.left-b.left,top:o?2*(a.top-b.top)-2*g+a.height:a.top-b.top,opacity:0,boxShadow:"none"})[0].offsetHeight,this.$panel.css({transition:"",opacity:"",boxShadow:"",width:l,height:m,left:"",top:""}),this.$content.css({WebkitTransform:"scale(1)",transform:"translateZ(0) scale(1)"}),this.$close.addClass("emb-visible"),h(this).trigger("show")}},hide:function(a){if(this._showed){this._listenTransition(function(){this.$el.detach(),h(this).trigger("afterHide"),this._checkBodyoverflow()}.bind(this)),this.$ripple.css("opacity","0"),this._showed=!1;var b=this.$bg[0].getBoundingClientRect();a||(a={}),a.width=a.width||0,a.height=a.height||0,a.left=null==a.left?b.width/2:a.left,a.top=null==a.top?b.height/2:a.top;var c=h.css(this.$panel[0],"marginLeft",!0),d=h.css(this.$panel[0],"marginTop",!0),e="scale("+(a.width/this.$content[0].offsetWidth||0)+","+(a.height/this.$content[0].offsetHeight||0);this.$content.css({WebkitTransform:e,transform:"translateZ(0) "+e}),this.$panel.css({width:a.width,height:a.height,left:c?2*(a.left-b.left)-b.width+a.width:a.left-b.left,top:d?2*(a.top-b.top)-b.height+a.height:a.top-b.top,boxShadow:"none",opacity:"0"}),this.$close.removeClass("emb-visible"),h(this).trigger("hide")}},setOnClose:function(a){this.props.onClose=a},autoResize:function(a){var b=this.$content[0].offsetWidth,c=this.$content[0].offsetHeight,d=this.$panel.width(b).height(c);if(!a){{d[0].style.display}d[0].style.display="none",d[0].offsetHeight,d[0].style.display=""}var e=this.$bg[0].getBoundingClientRect(),f=d[0].getBoundingClientRect();e.width<f.width?d.addClass("emb-lightbox-mlr-0"):d.removeClass("emb-lightbox-mlr-0"),e.height<f.height?d.addClass("emb-lightbox-mtb-0"):d.removeClass("emb-lightbox-mtb-0"),h(this).trigger("resize")},_checkBodyoverflow:function(){if(i[this._uid]){delete i[this._uid];var a=!0;for(var b in i){a=!1;break}a&&h("body").removeClass("embed-overflow-hidden")}},_listenTransition:function(a){this._cancelTransition();var b=0,c=function(c){b+=c,3==b&&(this._cancelTransition(),a())}.bind(this);this._transitionCanceler=function(){e(this.$ripple),e(this.$panel),this._transitionCanceler=void 0,c=void 0},d(this.$ripple,function(a){e(this.$ripple),a.stopPropagation(),c(1)}.bind(this)),d(this.$panel,function(){e(this.$panel),c(2)}.bind(this))},_cancelTransition:function(){this._transitionCanceler&&(this._transitionCanceler(),this._transitionCanceler=void 0)},_listenResize:function(){var a,b=this;h(window).on("resize."+this._uid,function(){a&&(clearTimeout(a),a=void 0),a=setTimeout(function(){return a=void 0,b._showed||b._hideHandler?(b.autoResize(),void b.$ripple.css({width:"100%",height:"100%",WebkitTransform:"translate(0,0) scale(1)",transform:"translate3d(0,0,0) scale(1)",borderRadius:0})):void(b._shouldResizeWhenShow=!0)},48)})},destroy:function(){this._cancelTransition(),this._checkBodyoverflow(),this.$el.remove(),h(window).off("resize."+this._uid),h(this).off()}},b.exports=f},{"./$":1,"./uid":27}],15:[function(a,b){function c(a){this.options=j.extend({api:l,demoCode:m},a)}var d=a("./base"),e=a("./size"),f=a("./code-tabs"),g=a("./format"),h=a("./escape"),i=a("./loadApi"),j=a("./$"),k="<div class='emb-widget emb-lightbox-widget'><div class='emb-right-panel'><h3>Demo</h3><div id='emb-demo'><div class='emb-demo-wrapper'><div class='emb-demo-hint'><div class='emb-dialog'>Click the thumbnail below to open in a lightbox</div></div><div class='emb-demo-thumb'><div data-rel='fh5-light-box-demo' /></div><div class='emb-demo-code'><textarea readOnly></textarea></div></div></div><h3>How To Embed</h3><div class='emb-steps'><div class='emb-step emb-lightbox-api'><div class='emb-step-title'>Load the lightbox API between the head tag in your HTML file.</div><textarea readOnly></textarea></div><div class='emb-step emb-code-tabs-wrapper'><div class='emb-step-title'>Add the following attritubes to the element which your want to trigger the lightbox when clicked.</div></div></div></div><div class='emb-left-panel'><h3>Options</h3><div class='emb-panel-content'></div></div></div>",l="//static.fliphtml5.com/web/js/plugin/LightBox/js/fliphtml5-light-box-api-min.js",m="<!DOCTYPE html>\n<html>\n<head>\n	<title>FlipHTML5 LightBox Embed Demo</title>\n	<script src='//static.fliphtml5.com/web/js/plugin/LightBox/js/fliphtml5-light-box-api-min.js'></script>\n</head>\n<body>\n	<img src='#{thumb}' data-rel='fh5-light-box-demo' data-href='#{href}' data-width='#{width}' data-height='#{height}' data-title='#{title}'>\n</body>\n</html>";c.prototype={constructor:c,init:function(){this.$el=j(j.parseHTML(k)[0]);var a=function(){return this.refresh(),!1}.bind(this),b=this.base=new d({max:this.options.max,title:this.options.title});b.onchange(a);var c=this.size=new e({enableAutoResize:!1});c.onchange(a),this.$el.find(".emb-panel-content").append([b.$el,c.$el]),this._initDemo(),this._initSteps(),this.refresh()},refreshDemo:function(){this.$thumb.attr({"data-width":this.size.width(),"data-height":this.size.height(),"data-title":h(this.base.title()),"data-href":this.getURL(this.options.domainLink?0:1,!0)}),this.$demoCode.text(g(this.options.demoCode,{width:this.size.width(),height:this.size.height(),title:h(this.base.title()),href:this.getURL(this.options.domainLink?0:1,!0),thumb:this.options.thumb}))},refreshSteps:function(){this.codeTabs.setCodes(this.getURL(0,!0),this.getURL(1,!0),this.getURL(2,!0),{width:this.size.width(),height:this.size.height(),title:h(this.base.title())})},refresh:function(){this.refreshDemo(),this.refreshSteps()},getURL:function(){var a;return a=this.options.https,a+"#p="+this.base.startpage()},_initDemo:function(){var a=this.$el.find("#emb-demo");this.$thumb=a.find("[data-rel='fh5-light-box-demo']").css({backgroundImage:"url("+this.options.thumb+")"}),this.$demoCode=a.find(".emb-demo-code>textarea").click(function(){this.select()})},_initSteps:function(){var a=this.codeTabs=new f({domainLink:this.options.domainLink,template:"data-rel='fh5-light-box-demo' data-href='#{src}' data-width='#{width}' data-height='#{height}' data-title='#{title}'"});a.$el.appendTo(this.$el.find(".emb-steps .emb-code-tabs-wrapper")),this.$el.find(".emb-steps .emb-lightbox-api>textarea").text(this.options.api).click(function(){this.select()}),setTimeout(function(){i(this.options.api)}.bind(this),0)},destroy:function(){this.base.destroy(),this.size.destroy(),this.codeTabs.destroy(),this.$el.remove()}},b.exports=c},{"./$":1,"./base":2,"./code-tabs":6,"./escape":11,"./format":13,"./loadApi":16,"./size":22}],16:[function(a,b){var c={};b.exports=function(a){if(!c[a]){var b=document.createElement("script");b.src=a,$("body").prepend(b)}}},{}],17:[function(a,b){function c(a){this.props=a||{},this._selectedIndex=-1,this._cellWidths=[],this._tabsLeft=0,this._uid=d(),this.init()}var d=a("./uid"),e=a("./$"),f="<nav class='emb-navbar'><button disabled class='emb-nav-prev'><div>&lt;</div></button><button disabled class='emb-nav-next'><div>&gt;</div></button><div class='emb-nav-tabs-wrapper'><ul></ul><div class='emb-nav-drag'></div></div></nav>";c.prototype={constructor:c,init:function(){this.props.initialStep=this.props.initialStep||48,this.props.maxStep=this.props.maxStep||2*this.props.initialStep,this.props.speed=this.props.speed||2,this.props.cacheTabWidth=this.props.cacheTabWidth!==!1,this.props.autoCenter=!!this.props.autoCenter,this.$el=e(e.parseHTML(f)[0]),this.$prev=this.$el.find(".emb-nav-prev"),this.$next=this.$el.find(".emb-nav-next"),this.$wrapper=this.$el.find(".emb-nav-tabs-wrapper"),this.$items=e(e.map(this.props.items||[],function(a){return e("<li/>").append(e(a))[0]})),this.$tabs=this.$wrapper.children("ul").append(this.$items),this._bindEvents(),this._listenResize()},getSelectedIndex:function(){return this._selectedIndex},select:function(a){if(!(0>a||a>=this.$items.length)&&a!==this._selectedIndex){var b=this._selectedIndex;b>=0&&this.$items.eq(b).removeClass("emb-selected"),this._selectedIndex=a,this.$items.eq(a).addClass("emb-selected"),this.ensureSelectedInView(),0>b&&this._scrollBy(0),e(this).trigger("itemChange",[a,b])}},ensureSelectedInView:function(){var a=this._tabsLeft+this._getLeftOf(this._selectedIndex),b=this.$items.eq(this._selectedIndex).outerWidth(!0),c=this.$wrapper.width();0>a?this._scrollBy(-a,c):a+b>c?this._scrollBy(c-a-b,c):this._scrollBy(0)},scrollBy:function(a,b){this._scrollBy(a,0,b)},_getLeftOf:function(a){for(var b=this.$items,c=0,d=this.props.cacheTabWidth,e=-1;++e<a;)c+=d?this._cellWidths[e]||(this._cellWidths[e]=b.eq(e).outerWidth(!0)):b.eq(e).outerWidth(!0);return c},_scrollBy:function(a,b,c){var d=this._tabsLeft;this._tabsLeft+=a,b||(b=this.$wrapper.width());var e=this.$tabs.width();return this._tabsLeft>0?this._tabsLeft=0:e>b&&this._tabsLeft<b-e&&(this._tabsLeft=b-e),b>e&&this.props.autoCenter&&(this._tabsLeft=(b-e)/2),c?this.$tabs.removeClass("emb-animated"):this.$tabs.addClass("emb-animated"),this.$prev.attr("disabled",this._tabsLeft>=0),this.$next.attr("disabled",!(e>b&&this._tabsLeft>b-e)),this.$tabs.css("left",this._tabsLeft),d!==this._tabsLeft},_bindEvents:function(){function a(){e(document).off("mouseup",a),null!=d&&(clearInterval(d),d=void 0)}function b(a,b,c,d){return f._scrollBy(a)?setInterval(function(){var e=a;a+=b,c&&Math.abs(a)>=Math.abs(c)?a=c:0>=e*a&&(a=0),a&&f._scrollBy(a)||d()},32):void 0}function c(a){for(var b=f.$items,c=-1,d=b.length;++c<d;)if(a==b[c]||e.contains(b[c],a))return c;return-1}var d,f=this;e.each([this.$prev,this.$next],function(c,g){var h=c?-1:1;g.on("mousedown",function(){return a(),e(document).one("mouseup",a),d=b(h*f.props.initialStep,h*f.props.speed,h*f.props.maxStep,a),!1})});var g=!0,h=this.$el.find(".emb-nav-drag"),i=this._uid,j="mousedown."+i,k="mousemove."+i,l="mouseup."+i+" mouseleave."+i,m=5;this.$wrapper.on(j,function(a){var i=a.clientX,j=i,n=0,o=a.timeStamp,p=c(a.target);g=!0,f.$tabs.hasClass("emb-animated")&&(f._tabsLeft=e.css(f.$tabs[0],"left",!0),f.$tabs.removeClass("emb-animated"),f.$tabs.css("left",f._tabsLeft)),null!=d&&clearInterval(d),e(document).off(l+" "+k).on(k,function(a){(g&&Math.abs(a.clientX-i)>=m||c(a.target)!==p)&&(g=!1,f.props.draggable&&h.show()),f.props.draggable&&(n=(a.clientX-j)/(a.timeStamp-o),f._scrollBy(a.clientX-j,0,!0),j=a.clientX,o=a.timeStamp)}).one(l,function(a){e(this).off(l+" "+k),h.hide(),g&&!a.button&&p>=0?f.select(p):f.props.draggable&&(d=b(n*=32,-1*n/10,0,function(){clearInterval(d),d=void 0}))})})},_listenResize:function(){var a,b=this;e(window).on("resize."+this._uid,function(){null!=a&&(clearTimeout(a),a=void 0),b._selectedIndex<0||(a=setTimeout(function(){a=void 0,e.contains(document,b.$el[0])&&(b.ensureSelectedInView(),e(b).trigger("resize"))},48))})},destroy:function(){this.$el.remove(),e(window).off("resize."+this._uid),e(document).off("mouseup."+this._uid+" mousemove."+this._uid),e(this).off()}},b.exports=c},{"./$":1,"./uid":27}],18:[function(a,b,c){function d(a){function b(a){if(!arguments.length)return c;if(c!==a){var b=c;c=a;for(var e=d.concat(),f=-1,g=e.length;++f<g;)e[f](c,b)}}var c=a,d=[];return b.$watch=function(a){d.indexOf(a)<0&&d.push(a)},b.$unwatch=function(a){var b=d.indexOf(a);b>=0&&d.splice(b,1)},b}c=b.exports=d,c.$watch=function(a,b){return a.$watch||(a=d(a)),a.$watch(b),a},c.$unwatch=function(a,b){a.$unwatch&&a.$unwatch(b)},c.$bind=function(a,b){return b.$watch?(a.$watch||(a=b(a)),b.$watch(function(b){a(b)}),a):void 0},c.$set=function(a,b){return a.$watch||(a=d(a)),a(b),a}},{}],19:[function(a,b){b.exports=function(a){return"boolean"==typeof a?a=a?1:0:"string"==typeof a&&(a=a.replace(/&/g,function(){return"&&"})),a}},{}],20:[function(a,b){var c=a("./$"),d=Math.random().toString(36).substr(3,5),e=1;b.exports={onchange:function(a){c(this).on("propChange",a)},notify:function(a){this.__uid||(this.__uid=d+e++),c(this).trigger("propChange",a)}}},{"./$":1}],21:[function(a,b){var c={'"':"%22","%":"%25"},d=new RegExp(Object.keys(c).reduce(function(a,b){return a+b+"|"},"").slice(0,-1),"g");b.exports=function(a){return a.replace(d,function(a){return c[a]})}},{}],22:[function(a,b){function c(a){this.options=a||{},this.$el=g(g.parseHTML(h)[0]),this.init()}var d=a("./observable"),e=a("./prop-change-emmiter"),f=a("./transform-radio"),g=a("./$"),h="<div class='emb-widget-component emb-widget-size'><h4>Size</h4><div><div class='emb-widget-option emb-widget-size-option emb-widget-size-auto'><input type='radio' id='emb-size-auto' value='0,0' name='emb-widget-size'><label for='emb-size-auto'>Auto</label></div><div class='emb-widget-option emb-widget-size-option emb-widget-size-large'><input type='radio' id='emb-size-large' value='700,425' name='emb-widget-size'><label for='emb-size-large'>700 x 425</label></div><div class='emb-widget-option emb-widget-size-option emb-widget-size-medium'><input type='radio' id='emb-size-medium' value='550,350' name='emb-widget-size'><label for='emb-size-medium'>550 x 350</label></div><div class='emb-widget-option emb-widget-size-option emb-widget-size-small'><input type='radio' id='emb-size-small' value='400,250' name='emb-widget-size'><label for='emb-size-small'>400 x 250</label></div><div class='emb-widget-option emb-widget-size-option emb-widget-size-custom'><input type='radio' id='emb-size-custom' value='0,0' name='emb-widget-size'><div class='emb-custom-size-input-group'><input type='number' min='10' max='4096' id='emb-widget-custom-width'><span class='emb-symbol-x'> x </span><input type='number' min='10' max='4096' id='emb-widget-custom-height'></div></div></div></div>";c.prototype=g.extend({},e,{constructor:c,init:function(){function a(){var a=c.filter(":checked"),d=a.val().split(",");i=!0,j.isAutoResize=!1,b&&a.is("#emb-size-auto")?(j.isAutoResize=!0,j.options.autoResize&&j.options.autoResize()):(e(+d[0]),h(+d[1])),i=!1}var b=this.options.enableAutoResize!==!1;b||this.$el.find(".emb-widget-size-auto").remove();var c=this.$el.find("[name=emb-widget-size]").each(function(){f(g(this))}),e=this.width=d(0),h=this.height=d(0),i=!1;this.isAutoResize=!1;var j=this;c.change(a)[0].checked=!0;var k=this.$el.find(".emb-widget-size-custom"),l=c.filter("#emb-size-custom"),m=k.find("#emb-widget-custom-width"),n=k.find("#emb-widget-custom-height"),o=this.$el.find("#emb-size-auto");m.focus(function(){l[0].checked=!0}).on("input",function(){return e(+this.value),!1}),n.focus(function(){l[0].checked=!0}).on("input",function(){return h(+this.value),!1}),e.$watch(function(a){m.val(a);var b=l.val().split(",");b=a+","+b[1],l.val(b),j.isAutoResize&&o.val(b),i||j.isAutoResize||(l[0].checked=!0),j.notify("width")}),h.$watch(function(a){n.val(a);var b=l.val().split(",");b=b[0]+","+a,l.val(b),j.isAutoResize&&o.val(b),i||j.isAutoResize||(l[0].checked=!0),j.notify("height")}),b&&(o[0].checked=!0),setTimeout(function(){a()},0)},destroy:function(){this.$el.remove(),g(this).off()}}),b.exports=c},{"./$":1,"./observable":18,"./prop-change-emmiter":20,"./transform-radio":26}],23:[function(a,b){function c(a){this.props=a||{},this._selectedIndex=-1,this.init()}var d="<nav class='emb-tabbar'><ul></ul></nav>";c.prototype={constructor:c,init:function(){this.$el=$($.parseHTML(d)[0]),this.$items=$($.map(this.props.items||[],function(a){return $("<li/>").append($(a))[0]})),this.$tabs=this.$el.children("ul").append(this.$items),this._bindEvents()},getSelectedIndex:function(){return this._selectedIndex},select:function(a){if(!(0>a||a>=this.$items.length)&&a!==this._selectedIndex){var b=this._selectedIndex;b>=0&&this.$items.eq(b).removeClass("emb-selected"),this._selectedIndex=a,this.$items.eq(a).addClass("emb-selected"),$(this).trigger("itemChange",[a,b])}},_bindEvents:function(){function a(a){for(var c=b.$items,d=-1,e=c.length;++d<e;)if(a==c[d]||$.contains(c[d],a))return d;return-1}var b=this;this.$el.on("click",function(b){var c=a(b.target);-1!==c&&this.select(c)}.bind(this))},destroy:function(){this.$el.remove(),$(this).off()}},b.exports=c},{}],24:[function(a,b){function c(a){h.call(this,a),this._initBorder()}var d=a("./observable"),e=a("./create-color-picker"),f=a("./update-color-picker"),g=a("./destroy-color-picker"),h=a("./button-style"),i=a("./$"),j="<div class='emb-widget-option emb-widget-text-style-border-width'><label for='emb-text-style-border-width'>Border Width</label><input id='emb-text-style-border-width' min='0' max='16' step='1' type='number'></div>",k="<div class='emb-widget-option emb-widget-text-style-border-color'><label for='emb-text-style-border-color'>Border Color</label><input id='emb-text-style-border-color'></div>",l=function(){function a(){}return a.prototype=h.prototype,new a}();c.prototype=i.extend(l,{constructor:c,_initBorder:function(){this.$el.children("div").find(".emb-widget-button-style-font").before([k,j]);var a=this.borderColor=d("#000"),b=!1,c=e(this.$el.find("#emb-text-style-border-color"),a(),function(c){b=!0,a(c.toHexString())}),g=this;a.$watch(function(a){b||f(c,a),g.notify("borderColor")});var h=this.borderWidth=d(1);$width=this.$el.find("#emb-text-style-border-width").on("input",function(){return h(+this.value),!1}),h.$watch(function(a){$width.val(a),g.notify("borderWidth")}),h(0)},destroy:function(){g(this.$el.find("#emb-text-style-border-color")),h.prototype.destroy.call(this),this.$el.remove(),i(this).off()}}),b.exports=c},{"./$":1,"./button-style":4,"./create-color-picker":9,"./destroy-color-picker":10,"./observable":18,"./update-color-picker":28}],25:[function(a,b){function c(a){this.options=a||{},this._uid=k()}var d=a("./base"),e=a("./size"),f=a("./text-style"),g=a("./parse-param-value"),h=a("./code-tabs"),i=a("./simpleEncodeURIComponent"),j=a("./$"),k=a("./uid"),l="<div class='emb-widget emb-text-widget'><div class='emb-right-panel'><h3>Preview</h3><div id='emb-preview'><iframe frameborder=\"0\" allowfullscreen allowtransparency></iframe></div><h3>How To Embed</h3><div class='emb-steps'><div class='emb-step emb-code-tabs-wrapper'><div class='emb-step-title'>Copy the embed code below and paste it into your HTML file.</div></div></div></div><div class='emb-left-panel'><h3>Options</h3><div class='emb-panel-content'></div></div></div>";c.prototype={constructor:c,init:function(){this.$el=j(j.parseHTML(l)[0]);var a=(this.$preview=this.$el.find("#emb-preview>iframe"),function(){return this.refresh(),!1}.bind(this)),b=function(){g.isAutoResize&&this._autoUpdateSizeValues()}.bind(this),c=this.base=new d({max:this.options.max,title:this.options.title});c.onchange(function(){b(),a()}.bind(this));var g=this.size=new e({autoResize:b});g.onchange(a);var h=this.style=new f({backgroundColor:"#fff",color:"#03a9f4"});h.onchange(function(){b(),a()}),this.$el.find(".emb-panel-content").append([c.$el,h.$el]),j(window).on("message."+this._uid,function(a){var b=a.originalEvent.data;g.isAutoResize&&b&&"size"==b.type&&"embed-fliphtml5"==b.key&&(g.width(b.width),g.height(b.height))}),this._initSteps(),this.refresh()},refreshURL:function(){this.$preview[0].src=this.getURL(this.options.domainLink?0:1,!0),this.$preview[0].width=this.size.width(),this.$preview[0].height=this.size.height()},refreshSteps:function(){this.codeTabs.setCodes(this.getURL(0,!0),this.getURL(1,!0),this.getURL(2,!0),{width:this.size.width(),height:this.size.height()})},refresh:function(){this.refreshURL(),this.refreshSteps()},getURL:function(a,b){var c;return c=this.options.https,this.options.frame+"#!/?"+this.getParams(c,b)},getParams:function(a,b){var c={g:this.style.backgroundColor(),c:this.style.color(),s:this.style.fontSize(),b:this.style.fontBold(),w:this.style.borderWidth(),bc:this.style.borderColor(),i:this.style.fontItalic(),t:this.base.title(),p:this.base.startpage(),l:a},d=[];for(var e in c)var f=d.push(e+"="+g(c[e]));return b?i(d.join("&")):encodeURIComponent(d.join("&"))},_initSteps:function(){var a=this.codeTabs=new h({domainLink:this.options.domainLink});a.$el.appendTo(this.$el.find(".emb-steps .emb-code-tabs-wrapper"))},_autoUpdateSizeValues:function(){this.$preview[0].contentWindow.postMessage({type:"getSize",key:"embed-fliphtml5"},"*")},destroy:function(){this.base.destroy(),this.size.destroy(),this.style.destroy(),this.codeTabs.destroy(),j(window).off("message."+this._uid),this.$el.remove()}},b.exports=c},{"./$":1,"./base":2,"./code-tabs":6,"./parse-param-value":19,"./simpleEncodeURIComponent":21,"./size":22,"./text-style":24,"./uid":27}],26:[function(a,b){b.exports=function(a){var b=a.parent()[0],c=$("<div class='emb-radio'><div class='emb-radio-container'><div class='emb-radio-fill'></div></div></div>")[0];return b&&b.replaceChild(c,a[0]),$(c).find(".emb-radio-container").prepend(a).end()}},{}],27:[function(a,b){var c=1;b.exports=function(){return"embed_"+Math.random().toString(36).substr(2,5)+"_"+c++}},{}],28:[function(a,b){var c=a("./$");b.exports=function(a,b){c(a).spectrum("set",b)}},{"./$":1}],29:[function(a,b){var c={basic:a("./basic-widget"),button:a("./button-widget"),text:a("./text-widget"),lightbox:a("./lightbox-widget"),cover:a("./cover-widget")};b.exports={get:function(a,b){return new c[a](b)}}},{"./basic-widget":3,"./button-widget":5,"./cover-widget":8,"./lightbox-widget":15,"./text-widget":25}]},{},[12]),RedirectingBox.prototype={constructor:RedirectingBox,show:function(a){console.log(a),this.redirectBox.appendTo(a)},cancel:function(){var a=this;a.redirectBox.remove()}},$(function(){function a(a){var b="";""!=a&&(b="?q="+a),location.href=utils.lang_parse_link("1"==d?"/exploring"+b+"#latest":"/exploring"+b)}var b=$(".cc-top-search-input"),c=$(".cc-top-search-icon"),d=1==location.hash.indexOf("latest")?"1":"0";b.on("keypress",function(c){13===c.which&&a(b.val().trim())}),$("#icon-search").on("click",function(){a(b.val().trim())}),c.length>0&&c.on("click",function(){a(b.val().trim())}),$("#cc-top-logout-hide-search>input").length>0&&$("#cc-top-logout-hide-search>input").on("keypress",function(b){13===b.which&&a($("#cc-top-logout-hide-search>input").val().trim())});var e=$("#logout-hide-search-input"),f=$("#hide-icon-search");if(e.length>0&&(e.on("keypress",function(b){13===b.which&&a(e.val().trim())}),f.on("click",function(){a(e.val().trim())})),$(".cc-navbar-toggle.hidden-lg").length>0){{var g=$("#navbar")[0],h=($(".cc-log-in-link")[0],$(".cc-sign-up-link")[0]),i=$(".cc-navbar-toggle.hidden-lg")[0];$(".case-studies-btn")[0]}i.onclick=function(){var a=($(".home-contactBox-container")[0],g.currentStyle?g.currentStyle:window.getComputedStyle(g,null));"none"==a.display?(g.style.display="block",g.style.visibility="visible",g.style.height="auto"):g.style.display="none"};var j=document.getElementById("cc-top-hide-sign-in"),h=document.getElementById("cc-top-hide-sign-up");j.onclick=function(){location.href="/login.php"},h.onclick=function(){location.href="/login.php?register"}}});