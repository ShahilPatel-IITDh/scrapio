import{a as sn}from"https://app.gitbook.com/public/app/chunks/chunk-AQASHS7M.min.js";import{a as ck,b as fk,c as gk,d as yp,e as Uk,f as Jk,g as ex,h as Qa,i as Lx,j as Wx}from"https://app.gitbook.com/public/app/chunks/chunk-OMSIWHUH.min.js";import{a as Jc,c as Mx}from"https://app.gitbook.com/public/app/chunks/chunk-GYR2ZN5L.min.js";import{a as v6}from"https://app.gitbook.com/public/app/chunks/chunk-MA33C64F.min.js";import{a as _k}from"https://app.gitbook.com/public/app/chunks/chunk-OYLCHF7J.min.js";import{a as pr,b as dl}from"https://app.gitbook.com/public/app/chunks/chunk-U6CHLYR6.min.js";import{a as Rp}from"https://app.gitbook.com/public/app/chunks/chunk-6HAN6XTN.min.js";import{a as fx,b as Ex}from"https://app.gitbook.com/public/app/chunks/chunk-REXMJKTD.min.js";import{a as Ix,b as Rx,c as Px,d as Tx}from"https://app.gitbook.com/public/app/chunks/chunk-RBNWLUKE.min.js";import{a as wp}from"https://app.gitbook.com/public/app/chunks/chunk-SARUS22D.min.js";import{B as Ey,C as Zk,D as My,E as al,a as fe,b as ut,c as dp,d as Fu,e as Ik,f as Rk,g as mp,h as nl,i as pp,j as Pk,k as Tk,l as Ek,m as Mk,n as hp,o as Nk,p as Dk,q as Ak,r as $a,s as rl,t as Bk,u as zk,v as Tn,w as Wk,x as Ua,y as Br,z as Fk}from"https://app.gitbook.com/public/app/chunks/chunk-4MLVO57H.min.js";import{a as Sa}from"https://app.gitbook.com/public/app/chunks/chunk-24MKWJO4.min.js";import{a as xx,b as Ox,c as Nx}from"https://app.gitbook.com/public/app/chunks/chunk-QUBFK3OE.min.js";import{a as Gk,b as jk}from"https://app.gitbook.com/public/app/chunks/chunk-L6OMHB4V.min.js";import{a as sl}from"https://app.gitbook.com/public/app/chunks/chunk-HLZUAOMZ.min.js";import{a as Sp}from"https://app.gitbook.com/public/app/chunks/chunk-TOM2GAY3.min.js";import{a as ml,b as Dx,c as Ax}from"https://app.gitbook.com/public/app/chunks/chunk-WYLLZWEI.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-EK3O3MDC.min.js";import{a as Sm,b as Iw,c as sk,d as Wu,e as Qs,f as Fi,g as Gu,h as _p,i as Qk,k as _x,l as hi,n as Bx,o as zx}from"https://app.gitbook.com/public/app/chunks/chunk-IY4POOKF.min.js";import{a as Xe,b as fr,c as Lp}from"https://app.gitbook.com/public/app/chunks/chunk-DY5MRO3V.min.js";import{a as Cp,b as Ly,c as ux}from"https://app.gitbook.com/public/app/chunks/chunk-LZN2HTYN.min.js";import{a as $k}from"https://app.gitbook.com/public/app/chunks/chunk-JWQPNJJZ.min.js";import{a as Np}from"https://app.gitbook.com/public/app/chunks/chunk-GDJYODSL.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-BJ5GMCZJ.min.js";import{a as JC,b as hx}from"https://app.gitbook.com/public/app/chunks/chunk-CQCJ4Y6Y.min.js";import{a as ap,b as fp,c as gp,d as Lk}from"https://app.gitbook.com/public/app/chunks/chunk-OGX5HV6Y.min.js";import{a as ja}from"https://app.gitbook.com/public/app/chunks/chunk-WID3NEWT.min.js";import{a as ht,b as pi,c as Ip,d as qi,e as ec}from"https://app.gitbook.com/public/app/chunks/chunk-3GQZECJX.min.js";import{a as fi}from"https://app.gitbook.com/public/app/chunks/chunk-VJOUYQC4.min.js";import{a as lx}from"https://app.gitbook.com/public/app/chunks/chunk-SUWWRIYU.min.js";import{a as Op,b as Ca,c as Vi,d as Za,f as bx,g as Sx,i as Ny}from"https://app.gitbook.com/public/app/chunks/chunk-CJPUG6SG.min.js";import{a as co,b as Wi,c as wa}from"https://app.gitbook.com/public/app/chunks/chunk-TRW6ONUO.min.js";import{a as Yk,b as ax,c as sx,d as cx}from"https://app.gitbook.com/public/app/chunks/chunk-KRKAXF7L.min.js";import{a as ul,b as wx,d as Cx,e as kx}from"https://app.gitbook.com/public/app/chunks/chunk-T7T7D7AQ.min.js";import{a as Fo,b as Hu,c as Ye,d as Pp}from"https://app.gitbook.com/public/app/chunks/chunk-KL6DHZIZ.min.js";import{a as FC,b as qu,c as _o}from"https://app.gitbook.com/public/app/chunks/chunk-VRC7VTX5.min.js";import{a as Vt,b as kp}from"https://app.gitbook.com/public/app/chunks/chunk-CLABVSOO.min.js";import{a as il,b as vp,c as jt,d as bp,e as Vk,f as qk,g as Hk,h as ne,i as Xk,j as Kk,k as Ya,l as Vu,m as de,n as xp}from"https://app.gitbook.com/public/app/chunks/chunk-QYA2KXSR.min.js";import{a as mr}from"https://app.gitbook.com/public/app/chunks/chunk-4OH5QYQ2.min.js";import{a as an,b as $,c as lo,d as kk,e as xk,f as uo,g as lp,h as up,i as Zs,k as Ok}from"https://app.gitbook.com/public/app/chunks/chunk-BO3INAEQ.min.js";import{a as ka}from"https://app.gitbook.com/public/app/chunks/chunk-JGDWBAB7.min.js";import{a as Ck}from"https://app.gitbook.com/public/app/chunks/chunk-3VV52JHP.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-ABHM3MGT.min.js";import{a as Kn}from"https://app.gitbook.com/public/app/chunks/chunk-GXSXP2JJ.min.js";import{a as gi}from"https://app.gitbook.com/public/app/chunks/chunk-ITMOF6KB.min.js";import{$ as Ty,Aa as vx,H as _w,M as Zm,N as KC,O as Ot,P as Qm,Q as $C,S as UC,U as jC,V as YC,W as te,_ as Jm,aa as ek,ca as Ja,da as tx,ea as ox,fa as nx,ga as rx,ha as ix,la as Js,ma as cl,oa as Tp,pa as Ep,qa as zr,ra as Mp,sa as dx,ta as mx,ua as px,va as gx,wa as ll,xa as yx,za as tc}from"https://app.gitbook.com/public/app/chunks/chunk-4M6BXGCX.min.js";import{d as ve}from"https://app.gitbook.com/public/app/chunks/chunk-DSWZAKO6.min.js";import{$a as Rw,$c as bC,Ab as py,Ac as eC,Ae as Qc,Be as NC,Cc as Lu,Ce as Ga,Db as Lw,Eb as fy,Ec as tC,Ee as DC,Fb as gy,Fc as xt,Fd as EC,Fe as Km,Ff as XC,Gc as Om,Ge as AC,Gf as Ym,Hd as MC,Hf as el,Id as Iy,Jd as Hm,Je as BC,Ke as $m,Mb as wm,Nd as Xm,Oc as ua,Qa as bm,Qc as da,Sb as ri,Tb as Nw,Ub as Pu,Va as Ei,Vb as Dw,Wa as ni,Wb as Aw,We as zu,Ye as Py,Zb as Tu,Zc as vC,_c as Vm,a as Ws,ab as Pw,ad as qm,af as zC,b as Ko,bb as Tw,bd as _y,bf as WC,c as Fs,cc as qs,cd as SC,d as kw,dc as Cm,dd as wC,e as xw,ed as CC,fc as Vw,fd as kC,g as Wa,gc as qw,gd as xC,hd as OC,i as vm,j as Ow,jb as Ew,jd as Gm,jf as Us,kc as Gw,kd as ui,lc as Hw,ld as Zc,lf as Um,mc as Xw,md as _C,mf as VC,nc as Kw,nd as IC,nf as qC,ob as Vs,oc as xm,od as RC,of as GC,pb as la,pc as $w,pd as PC,pf as HC,qb as Iu,qc as Uw,qd as Bu,rc as vy,rd as TC,sc as jw,sf as jm,tc as Yw,uc as Fa,vb as Mw,vc as Eu,wc as Zw,we as LC,xc as Qw,xe as Ry,yb as Ru,yc as Jw,ye as qa,zc as Mu}from"https://app.gitbook.com/public/app/chunks/chunk-ILM42DXU.min.js";import{A as Z,B as Ce,C as Oo,D as Gn,E as sp,G as Ha,H as zi,I as Xa,J as hk,K as cp,M as yk,N as mi,O as Ka,P as vk,U as Sk,V as ol,W as Ar,X as wk,Z as Xn,aa as B,b as qn,e as QC,i as F,j as Ai,k as ip,l as ak,n as Dr,o as tl,p as lk,r as uk,s as Wo,t as dk,u as Ut,v as pt,w as mk,x as Bi,y as S,z as pk}from"https://app.gitbook.com/public/app/chunks/chunk-A3FWIW6H.min.js";import{a as y6,b as gt,c as Ys,e as bk,f as Hn}from"https://app.gitbook.com/public/app/chunks/chunk-6G7P3HNV.min.js";import{c as Gc,f as h6}from"https://app.gitbook.com/public/app/chunks/chunk-256TWNIT.min.js";import{$ as Ae,$a as xy,A as rC,Aa as dr,Ab as li,B as p6,Ba as ao,Ca as Nu,Cb as yC,Db as Oy,Ea as zo,F as by,Fa as Xs,G as Xc,Ga as Du,Ha as Va,Ia as Pm,Ja as Ni,Ka as $c,La as Tm,Ma as Em,N as Rm,Na as Mm,O as iC,Oa as lC,P as Sy,Pa as ya,Ra as Au,S as On,Sa as si,T as Mi,Ta as Lm,U as aC,Ua as Nm,V as rn,Va as ky,W as ma,Wa as Re,X as pa,Xa as va,Y as _n,Ya as uC,Z as ai,Za as ft,_ as sC,_a as Uc,aa as Fe,ab as Dm,b as Bw,ba as Qe,bb as $t,c as hy,ca as Ao,da as ro,db as Ks,e as zw,ea as At,eb as dC,f as yy,fa as io,fb as mC,g as km,ga as Bo,gb as pC,ha as pe,hb as Am,i as Hc,ia as fa,ib as Bm,j as Er,ja as Ft,jb as ba,k as Ww,ka as ko,kb as zm,l as Fw,la as wy,lb as jc,ma as cC,mb as fC,na as Cy,nb as Wm,o as oC,oa as Gs,ob as Fm,pa as Kc,pb as gC,qa as In,qb as xo,r as _m,ra as ur,rb as Yc,s as Wt,sa as Li,sb as ci,t as xn,ta as ga,tb as it,ua as Hs,ub as $s,va as Vn,vb as hC,w as ye,wa as ha,wb as xe,xa as Mr,xb as f6,y as nC,ya as Rn,yb as g6,z as Co,za as Pn,zb as Q}from"https://app.gitbook.com/public/app/chunks/chunk-XNRRDAWG.min.js";import{a as lt}from"https://app.gitbook.com/public/app/chunks/chunk-GNRHQE6Q.min.js";import{$ as op,A as my,C as hm,D as We,E as Tr,F as no,G as bw,H as ym,I as W,J as ti,K as Sw,L as ct,N as ww,O as qc,P as Xo,Q as Do,R as oi,S as Cw,U as K,V as E,W as g,X as v,Y as ZC,Z as ep,_ as tp,ba as He,ca as np,da as so,ea as $e,fa as N,ga as Lr,ia as di,ja as tk,k as X,ka as ok,la as nk,m as O,ma as js,na as rk,oa as ik,pa as rp,qa as Di,ra as R,s as b,ta as Nr,u as Ti,ua as D,v as fm,va as z,w as vw,x as gm,y as A,z as Kt}from"https://app.gitbook.com/public/app/chunks/chunk-RZAI23PD.min.js";import{a as m6}from"https://app.gitbook.com/public/app/chunks/chunk-PBQPEN4Y.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-PX7C75DT.min.js";import{b as De,c as ii,d as me,f as Im}from"https://app.gitbook.com/public/app/chunks/chunk-ICP6WLCA.min.js";import{c as ze,d as yw,e as C,f as pm,l as c}from"https://app.gitbook.com/public/app/chunks/chunk-OAKVUAEN.min.js";var g1=ze(Fy=>{c();Object.defineProperty(Fy,"__esModule",{value:!0});var G6=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},H6="src/index.js",X6=function(){function e(t,o){for(var n=0;n<o.length;n++){var r=o[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),p1=O(),K6=U6(p1),$6=(W(),pm(ym));function U6(e){return e&&e.__esModule?e:{default:e}}function j6(e,t){var o={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(o[n]=e[n]);return o}function Y6(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m1(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Z6(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f1=function(e){Z6(t,e);function t(){var o,n,r,i;Y6(this,t);for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];return i=(n=(r=m1(this,(o=t.__proto__||Object.getPrototypeOf(t)).call.apply(o,[this].concat(s))),r),r.state={width:1,height:1},r.measure=function(u){r.setState({width:u.nativeEvent.layout.width,height:u.nativeEvent.layout.height}),r.props.onLayout&&r.props.onLayout(u)},r.getAngle=function(){if(r.props.useAngle)return r.props.angle+"deg";var u=Math.atan2(r.state.width*(r.props.end.y-r.props.start.y),r.state.height*(r.props.end.x-r.props.start.x))+Math.PI/2;return u+"rad"},r.getColors=function(){return r.props.colors.map(function(u,d){var m=r.props.locations[d],p="";return m&&(p=" "+m*100+"%"),u+p}).join(",")},n),m1(r,i)}return X6(t,[{key:"render",value:function(){var n=this.props,r=n.start,i=n.end,a=n.colors,s=n.locations,l=n.useAngle,u=n.angleCenter,d=n.angle,m=n.style,p=n.children,f=j6(n,["start","end","colors","locations","useAngle","angleCenter","angle","style","children"]);return K6.default.createElement($6.View,G6({},f,{style:[m,{backgroundImage:"linear-gradient("+this.getAngle()+","+this.getColors()+")"}],onLayout:this.measure,__source:{fileName:H6,lineNumber:76}}),p)}}]),t}(p1.PureComponent);f1.defaultProps={start:{x:.5,y:0},end:{x:.5,y:1},locations:[],colors:[],useAngle:!1,angle:0};Fy.default=f1});var sv=ze((JX,cf)=>{c();var fO=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",n={};function r(a,s){if(!n[a]){n[a]={};for(var l=0;l<a.length;l++)n[a][a.charAt(l)]=l}return n[a][s]}var i={compressToBase64:function(a){if(a==null)return"";var s=i._compress(a,6,function(l){return t.charAt(l)});switch(s.length%4){default:case 0:return s;case 1:return s+"===";case 2:return s+"==";case 3:return s+"="}},decompressFromBase64:function(a){return a==null?"":a==""?null:i._decompress(a.length,32,function(s){return r(t,a.charAt(s))})},compressToUTF16:function(a){return a==null?"":i._compress(a,15,function(s){return e(s+32)})+" "},decompressFromUTF16:function(a){return a==null?"":a==""?null:i._decompress(a.length,16384,function(s){return a.charCodeAt(s)-32})},compressToUint8Array:function(a){for(var s=i.compress(a),l=new Uint8Array(s.length*2),u=0,d=s.length;u<d;u++){var m=s.charCodeAt(u);l[u*2]=m>>>8,l[u*2+1]=m%256}return l},decompressFromUint8Array:function(a){if(a==null)return i.decompress(a);for(var s=new Array(a.length/2),l=0,u=s.length;l<u;l++)s[l]=a[l*2]*256+a[l*2+1];var d=[];return s.forEach(function(m){d.push(e(m))}),i.decompress(d.join(""))},compressToEncodedURIComponent:function(a){return a==null?"":i._compress(a,6,function(s){return o.charAt(s)})},decompressFromEncodedURIComponent:function(a){return a==null?"":a==""?null:(a=a.replace(/ /g,"+"),i._decompress(a.length,32,function(s){return r(o,a.charAt(s))}))},compress:function(a){return i._compress(a,16,function(s){return e(s)})},_compress:function(a,s,l){if(a==null)return"";var u,d,m={},p={},f="",h="",y="",w=2,k=3,x=2,P=[],I=0,_=0,M;for(M=0;M<a.length;M+=1)if(f=a.charAt(M),Object.prototype.hasOwnProperty.call(m,f)||(m[f]=k++,p[f]=!0),h=y+f,Object.prototype.hasOwnProperty.call(m,h))y=h;else{if(Object.prototype.hasOwnProperty.call(p,y)){if(y.charCodeAt(0)<256){for(u=0;u<x;u++)I=I<<1,_==s-1?(_=0,P.push(l(I)),I=0):_++;for(d=y.charCodeAt(0),u=0;u<8;u++)I=I<<1|d&1,_==s-1?(_=0,P.push(l(I)),I=0):_++,d=d>>1}else{for(d=1,u=0;u<x;u++)I=I<<1|d,_==s-1?(_=0,P.push(l(I)),I=0):_++,d=0;for(d=y.charCodeAt(0),u=0;u<16;u++)I=I<<1|d&1,_==s-1?(_=0,P.push(l(I)),I=0):_++,d=d>>1}w--,w==0&&(w=Math.pow(2,x),x++),delete p[y]}else for(d=m[y],u=0;u<x;u++)I=I<<1|d&1,_==s-1?(_=0,P.push(l(I)),I=0):_++,d=d>>1;w--,w==0&&(w=Math.pow(2,x),x++),m[h]=k++,y=String(f)}if(y!==""){if(Object.prototype.hasOwnProperty.call(p,y)){if(y.charCodeAt(0)<256){for(u=0;u<x;u++)I=I<<1,_==s-1?(_=0,P.push(l(I)),I=0):_++;for(d=y.charCodeAt(0),u=0;u<8;u++)I=I<<1|d&1,_==s-1?(_=0,P.push(l(I)),I=0):_++,d=d>>1}else{for(d=1,u=0;u<x;u++)I=I<<1|d,_==s-1?(_=0,P.push(l(I)),I=0):_++,d=0;for(d=y.charCodeAt(0),u=0;u<16;u++)I=I<<1|d&1,_==s-1?(_=0,P.push(l(I)),I=0):_++,d=d>>1}w--,w==0&&(w=Math.pow(2,x),x++),delete p[y]}else for(d=m[y],u=0;u<x;u++)I=I<<1|d&1,_==s-1?(_=0,P.push(l(I)),I=0):_++,d=d>>1;w--,w==0&&(w=Math.pow(2,x),x++)}for(d=2,u=0;u<x;u++)I=I<<1|d&1,_==s-1?(_=0,P.push(l(I)),I=0):_++,d=d>>1;for(;;)if(I=I<<1,_==s-1){P.push(l(I));break}else _++;return P.join("")},decompress:function(a){return a==null?"":a==""?null:i._decompress(a.length,32768,function(s){return a.charCodeAt(s)})},_decompress:function(a,s,l){var u=[],d,m=4,p=4,f=3,h="",y=[],w,k,x,P,I,_,M,T={val:l(0),position:s,index:1};for(w=0;w<3;w+=1)u[w]=w;for(x=0,I=Math.pow(2,2),_=1;_!=I;)P=T.val&T.position,T.position>>=1,T.position==0&&(T.position=s,T.val=l(T.index++)),x|=(P>0?1:0)*_,_<<=1;switch(d=x){case 0:for(x=0,I=Math.pow(2,8),_=1;_!=I;)P=T.val&T.position,T.position>>=1,T.position==0&&(T.position=s,T.val=l(T.index++)),x|=(P>0?1:0)*_,_<<=1;M=e(x);break;case 1:for(x=0,I=Math.pow(2,16),_=1;_!=I;)P=T.val&T.position,T.position>>=1,T.position==0&&(T.position=s,T.val=l(T.index++)),x|=(P>0?1:0)*_,_<<=1;M=e(x);break;case 2:return""}for(u[3]=M,k=M,y.push(M);;){if(T.index>a)return"";for(x=0,I=Math.pow(2,f),_=1;_!=I;)P=T.val&T.position,T.position>>=1,T.position==0&&(T.position=s,T.val=l(T.index++)),x|=(P>0?1:0)*_,_<<=1;switch(M=x){case 0:for(x=0,I=Math.pow(2,8),_=1;_!=I;)P=T.val&T.position,T.position>>=1,T.position==0&&(T.position=s,T.val=l(T.index++)),x|=(P>0?1:0)*_,_<<=1;u[p++]=e(x),M=p-1,m--;break;case 1:for(x=0,I=Math.pow(2,16),_=1;_!=I;)P=T.val&T.position,T.position>>=1,T.position==0&&(T.position=s,T.val=l(T.index++)),x|=(P>0?1:0)*_,_<<=1;u[p++]=e(x),M=p-1,m--;break;case 2:return y.join("")}if(m==0&&(m=Math.pow(2,f),f++),u[M])h=u[M];else if(M===p)h=k+k.charAt(0);else return null;y.push(h),u[p++]=k+h.charAt(0),m--,k=h,m==0&&(m=Math.pow(2,f),f++)}}};return i}();typeof define=="function"&&define.amd?define(function(){return fO}):typeof cf<"u"&&cf!=null&&(cf.exports=fO)});var kI=ze((bte,a2)=>{a2.exports="https://app.gitbook.com/public/app/assets/youtube.raw-KIFNDQS6.svg"});var xI=ze((Ste,s2)=>{s2.exports="https://app.gitbook.com/public/app/assets/soundcloud.raw-2NJLH377.svg"});var OI=ze((wte,c2)=>{c2.exports="https://app.gitbook.com/public/app/assets/loom.raw-3KUBFJOQ.svg"});var _I=ze((Cte,l2)=>{l2.exports="https://app.gitbook.com/public/app/assets/github.raw-G362N2HA.svg"});var II=ze((kte,u2)=>{u2.exports="https://app.gitbook.com/public/app/assets/github.dark.raw-A2MHFBQG.svg"});var RI=ze((xte,d2)=>{d2.exports="https://app.gitbook.com/public/app/assets/framer.raw-BZOKEAUJ.svg"});var PI=ze((Ote,m2)=>{m2.exports="https://app.gitbook.com/public/app/assets/framer.dark.raw-HVTXI7EB.svg"});var TI=ze((_te,p2)=>{p2.exports="https://app.gitbook.com/public/app/assets/codepen.raw-PGSLYKJU.svg"});var EI=ze((Ite,f2)=>{f2.exports="https://app.gitbook.com/public/app/assets/codepen.dark.raw-HNDMNQX3.svg"});var MI=ze((Rte,g2)=>{g2.exports="https://app.gitbook.com/public/app/assets/dribbble.raw-KBB5DOUQ.svg"});var LI=ze((Pte,h2)=>{h2.exports="https://app.gitbook.com/public/app/assets/trello.raw-5HIIOOAI.svg"});var NI=ze((Tte,y2)=>{y2.exports="https://app.gitbook.com/public/app/assets/typeform.raw-74VPCTO6.svg"});var DI=ze((Ete,v2)=>{v2.exports="https://app.gitbook.com/public/app/assets/typeform.dark.raw-47MGSH5W.svg"});var AI=ze((Mte,b2)=>{b2.exports="https://app.gitbook.com/public/app/assets/google-docs.raw-I6UHVZFS.svg"});var BI=ze((Lte,S2)=>{S2.exports="https://app.gitbook.com/public/app/assets/google-sheets.raw-IGZ6R7IJ.svg"});var zI=ze((Nte,w2)=>{w2.exports="https://app.gitbook.com/public/app/assets/google-slides.raw-WGHORNC6.svg"});var WI=ze((Dte,C2)=>{C2.exports="https://app.gitbook.com/public/app/assets/google-forms.raw-7C25TP6G.svg"});var oR=ze((Yre,F2)=>{F2.exports={"100":"Continue","101":"Switching Protocols","102":"Processing","103":"Early Hints","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","208":"Already Reported","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I'm a Teapot","421":"Misdirected Request","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","425":"Too Early","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Timeout","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","508":"Loop Detected","509":"Bandwidth Limit Exceeded","510":"Not Extended","511":"Network Authentication Required"}});var iR=ze((Zre,rR)=>{"use strict";c();var jv=oR();rR.exports=vi;vi.message=jv;vi.code=V2(jv);vi.codes=q2(jv);vi.redirect={300:!0,301:!0,302:!0,303:!0,305:!0,307:!0,308:!0};vi.empty={204:!0,205:!0,304:!0};vi.retry={502:!0,503:!0,504:!0};function V2(e){var t={};return Object.keys(e).forEach(function(n){var r=e[n],i=Number(n);t[r.toLowerCase()]=i}),t}function q2(e){return Object.keys(e).map(function(o){return Number(o)})}function G2(e){var t=e.toLowerCase();if(!Object.prototype.hasOwnProperty.call(vi.code,t))throw new Error('invalid status message: "'+e+'"');return vi.code[t]}function nR(e){if(!Object.prototype.hasOwnProperty.call(vi.message,e))throw new Error("invalid status code: "+e);return vi.message[e]}function vi(e){if(typeof e=="number")return nR(e);if(typeof e!="string")throw new TypeError("code must be a number or string");var t=parseInt(e,10);return isNaN(t)?G2(e):nR(t)}});var lP=ze((Lg,cP)=>{c();(function(e,t){typeof define=="function"&&define.amd?define(t):typeof Lg=="object"&&typeof Lg.nodeName!="string"?cP.exports=t():e.RangeFix=t()})(Lg,function(){var e,t={};t.isBroken=function(){var r,i,a,s,l,u,d,m;return e===void 0&&(i=document.createElement("p"),a=document.createElement("span"),s=document.createTextNode("aa"),l=document.createTextNode("aa"),u=document.createElement("img"),u.setAttribute("src","data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="),d=document.createRange(),e={},i.appendChild(s),i.appendChild(a),a.appendChild(u),a.appendChild(l),document.body.appendChild(i),d.setStart(s,1),d.setEnd(a,0),e.getClientRects=e.getBoundingClientRect=d.getClientRects().length>1,e.getClientRects||(d.setEnd(l,1),e.getClientRects=e.getBoundingClientRect=d.getClientRects().length===2),e.getBoundingClientRect||(d.setEnd(d.startContainer,d.startOffset),r=d.getBoundingClientRect(),e.getBoundingClientRect=r.top===0&&r.left===0),document.body.removeChild(i),m=window.ActiveXObject&&new Function("/*@cc_on return @_jscript_version; @*/")(),e.ieZoom=!!m&&m<=10),e};function o(r){var i;return!r||screen.deviceXDPI===screen.logicalXDPI?r:"length"in r?Array.prototype.map.call(r,o):(i=screen.deviceXDPI/screen.logicalXDPI,{top:r.top/i,bottom:r.bottom/i,left:r.left/i,right:r.right/i,width:r.width/i,height:r.height/i})}function n(r,i){var a,s=0,l=1024;if(l>=i.length)return Array.prototype.push.apply(r,i);for(;s<i.length;)a=Array.prototype.push.apply(r,Array.prototype.slice.call(i,s,s+l)),s+=l;return a}return t.getClientRects=function(r){var i,a,s,l,u,d=this.isBroken();if(d.ieZoom)return o(r.getClientRects());if(!d.getClientRects)return r.getClientRects();i=[],s=[],a=r.endContainer,l=r.endOffset,u=document.createRange();function m(p){for(var f=0;p=p.previousSibling;)f++;return f}for(;a!==r.commonAncestorContainer;)u.setStart(a,0),u.setEnd(a,l),n(s,u.getClientRects()),l=m(a),a=a.parentNode;return u=r.cloneRange(),u.setEnd(a,l),n(i,u.getClientRects()),n(i,s),i},t.getBoundingClientRect=function(r){var i,a,s,l,u,d,m=this.getClientRects(r);if(m.length===0)return null;if(u=r.getBoundingClientRect(),d=this.isBroken(),d.ieZoom)return o(u);if(!d.getBoundingClientRect)return u;if(u.width===0&&u.height===0)return m[0];for(i=0,a=m.length;i<a;i++)l=m[i],s?(s.left=Math.min(s.left,l.left),s.top=Math.min(s.top,l.top),s.right=Math.max(s.right,l.right),s.bottom=Math.max(s.bottom,l.bottom)):s={left:l.left,top:l.top,right:l.right,bottom:l.bottom};return s&&(s.width=s.right-s.left,s.height=s.bottom-s.top),s},t})});var uE=ze((fCe,W3)=>{W3.exports="https://app.gitbook.com/public/app/assets/default-page-cover-K4LPTE6Y.png"});var jM=ze((X0e,UM)=>{"use strict";c();var T5="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";UM.exports=T5});var JM=ze(($0e,QM)=>{"use strict";c();var E5=jM();function YM(){}function ZM(){}ZM.resetWarningCache=YM;QM.exports=function(){function e(n,r,i,a,s,l){if(l!==E5){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var o={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:ZM,resetWarningCache:YM};return o.PropTypes=o,o}});var t0=ze((Z0e,e0)=>{c();e0.exports=JM()();var j0e,Y0e});var c0=ze(Ub=>{"use strict";c();Object.defineProperty(Ub,"__esModule",{value:!0});var Kb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},M5=function(){function e(t,o){for(var n=0;n<o.length;n++){var r=o[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),i0=O(),Hd=a0(i0),L5=t0(),Lo=a0(L5);function a0(e){return e&&e.__esModule?e:{default:e}}function N5(e,t){var o={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(o[n]=e[n]);return o}function D5(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A5(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function B5(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o0={position:"absolute",top:0,left:0,visibility:"hidden",height:0,overflow:"scroll",whiteSpace:"pre"},z5=["extraWidth","injectStyles","inputClassName","inputRef","inputStyle","minWidth","onAutosize","placeholderIsMinWidth"],W5=function(t){return z5.forEach(function(o){return delete t[o]}),t},n0=function(t,o){o.style.fontSize=t.fontSize,o.style.fontFamily=t.fontFamily,o.style.fontWeight=t.fontWeight,o.style.fontStyle=t.fontStyle,o.style.letterSpacing=t.letterSpacing,o.style.textTransform=t.textTransform},s0=typeof window<"u"&&window.navigator?/MSIE |Trident\/|Edge\//.test(window.navigator.userAgent):!1,r0=function(){return s0?"_"+Math.random().toString(36).substr(2,12):void 0},$b=function(e){B5(t,e);function t(o){D5(this,t);var n=A5(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,o));return n.inputRef=function(r){n.input=r,typeof n.props.inputRef=="function"&&n.props.inputRef(r)},n.placeHolderSizerRef=function(r){n.placeHolderSizer=r},n.sizerRef=function(r){n.sizer=r},n.state={inputWidth:o.minWidth,inputId:o.id||r0()},n}return M5(t,[{key:"componentDidMount",value:function(){this.mounted=!0,this.copyInputStyles(),this.updateInputWidth()}},{key:"UNSAFE_componentWillReceiveProps",value:function(n){var r=n.id;r!==this.props.id&&this.setState({inputId:r||r0()})}},{key:"componentDidUpdate",value:function(n,r){r.inputWidth!==this.state.inputWidth&&typeof this.props.onAutosize=="function"&&this.props.onAutosize(this.state.inputWidth),this.updateInputWidth()}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"copyInputStyles",value:function(){if(!(!this.mounted||!window.getComputedStyle)){var n=this.input&&window.getComputedStyle(this.input);n&&(n0(n,this.sizer),this.placeHolderSizer&&n0(n,this.placeHolderSizer))}}},{key:"updateInputWidth",value:function(){if(!(!this.mounted||!this.sizer||typeof this.sizer.scrollWidth>"u")){var n=void 0;this.props.placeholder&&(!this.props.value||this.props.value&&this.props.placeholderIsMinWidth)?n=Math.max(this.sizer.scrollWidth,this.placeHolderSizer.scrollWidth)+2:n=this.sizer.scrollWidth+2;var r=this.props.type==="number"&&this.props.extraWidth===void 0?16:parseInt(this.props.extraWidth)||0;n+=r,n<this.props.minWidth&&(n=this.props.minWidth),n!==this.state.inputWidth&&this.setState({inputWidth:n})}}},{key:"getInput",value:function(){return this.input}},{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"select",value:function(){this.input.select()}},{key:"renderStyles",value:function(){var n=this.props.injectStyles;return s0&&n?Hd.default.createElement("style",{dangerouslySetInnerHTML:{__html:"input#"+this.state.inputId+"::-ms-clear {display: none;}"}}):null}},{key:"render",value:function(){var n=[this.props.defaultValue,this.props.value,""].reduce(function(s,l){return s!=null?s:l}),r=Kb({},this.props.style);r.display||(r.display="inline-block");var i=Kb({boxSizing:"content-box",width:this.state.inputWidth+"px"},this.props.inputStyle),a=N5(this.props,[]);return W5(a),a.className=this.props.inputClassName,a.id=this.state.inputId,a.style=i,Hd.default.createElement("div",{className:this.props.className,style:r},this.renderStyles(),Hd.default.createElement("input",Kb({},a,{ref:this.inputRef})),Hd.default.createElement("div",{ref:this.sizerRef,style:o0},n),this.props.placeholder?Hd.default.createElement("div",{ref:this.placeHolderSizerRef,style:o0},this.props.placeholder):null)}}]),t}(i0.Component);$b.propTypes={className:Lo.default.string,defaultValue:Lo.default.any,extraWidth:Lo.default.oneOfType([Lo.default.number,Lo.default.string]),id:Lo.default.string,injectStyles:Lo.default.bool,inputClassName:Lo.default.string,inputRef:Lo.default.func,inputStyle:Lo.default.object,minWidth:Lo.default.oneOfType([Lo.default.number,Lo.default.string]),onAutosize:Lo.default.func,onChange:Lo.default.func,placeholder:Lo.default.string,placeholderIsMinWidth:Lo.default.bool,style:Lo.default.object,value:Lo.default.any};$b.defaultProps={minWidth:1,injectStyles:!0};Ub.default=$b});var kL=ze(LS=>{"use strict";c();Object.defineProperty(LS,"__esModule",{value:!0});var e4={justifyContent:"center",alignItems:"center",overflow:"hidden",backgroundColor:"transparent"};LS.default={container:e4}});var NS=ze(hu=>{"use strict";c();Object.defineProperty(hu,"__esModule",{value:!0});hu.ImageZoomState=hu.ImageZoomProps=void 0;var t4=function(){function e(){this.cropWidth=100,this.cropHeight=100,this.imageWidth=100,this.imageHeight=100,this.panToMove=!0,this.pinchToZoom=!0,this.enableDoubleClickZoom=!0,this.clickDistance=10,this.maxOverflow=100,this.longPressTime=800,this.doubleClickInterval=175,this.style={},this.swipeDownThreshold=230,this.enableSwipeDown=!1,this.enableCenterFocus=!0,this.useHardwareTextureAndroid=!0,this.minScale=.6,this.maxScale=10,this.useNativeDriver=!1,this.onClick=function(){},this.onDoubleClick=function(){},this.onLongPress=function(){},this.horizontalOuterRangeOffset=function(){},this.onDragLeft=function(){},this.responderRelease=function(){},this.onMove=function(){},this.layoutChange=function(){},this.onSwipeDown=function(){},this.onStartShouldSetPanResponder=function(){return!0},this.onPanResponderTerminationRequest=function(){return!1}}return e}();hu.ImageZoomProps=t4;var o4=function(){function e(){this.centerX=.5,this.centerY=.5}return e}();hu.ImageZoomState=o4});var OL=ze(Nc=>{"use strict";c();var n4=Nc&&Nc.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},e(t,o)};return function(t,o){e(t,o);function n(){this.constructor=t}t.prototype=o===null?Object.create(o):(n.prototype=o.prototype,new n)}}(),nm=Nc&&Nc.__assign||function(){return nm=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++){t=arguments[o];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},nm.apply(this,arguments)};Object.defineProperty(Nc,"__esModule",{value:!0});var Fh=O(),zt=(W(),pm(ym)),r4=kL(),xL=NS(),i4=function(e){n4(t,e);function t(){var o=e!==null&&e.apply(this,arguments)||this;return o.state=new xL.ImageZoomState,o.lastPositionX=null,o.positionX=0,o.animatedPositionX=new zt.Animated.Value(0),o.lastPositionY=null,o.positionY=0,o.animatedPositionY=new zt.Animated.Value(0),o.scale=1,o.animatedScale=new zt.Animated.Value(1),o.zoomLastDistance=null,o.zoomCurrentDistance=0,o.lastTouchStartTime=0,o.horizontalWholeOuterCounter=0,o.swipeDownOffset=0,o.horizontalWholeCounter=0,o.verticalWholeCounter=0,o.centerDiffX=0,o.centerDiffY=0,o.lastClickTime=0,o.doubleClickX=0,o.doubleClickY=0,o.isDoubleClick=!1,o.isLongPress=!1,o.isHorizontalWrap=!1,o.imagePanResponder=zt.PanResponder.create({onStartShouldSetPanResponder:o.props.onStartShouldSetPanResponder,onPanResponderTerminationRequest:o.props.onPanResponderTerminationRequest,onMoveShouldSetPanResponder:o.props.onMoveShouldSetPanResponder,onPanResponderGrant:function(n){if(o.lastPositionX=null,o.lastPositionY=null,o.zoomLastDistance=null,o.horizontalWholeCounter=0,o.verticalWholeCounter=0,o.lastTouchStartTime=new Date().getTime(),o.isDoubleClick=!1,o.isLongPress=!1,o.isHorizontalWrap=!1,o.singleClickTimeout&&clearTimeout(o.singleClickTimeout),n.nativeEvent.changedTouches.length>1){var r=(n.nativeEvent.changedTouches[0].pageX+n.nativeEvent.changedTouches[1].pageX)/2;o.centerDiffX=r-o.props.cropWidth/2;var i=(n.nativeEvent.changedTouches[0].pageY+n.nativeEvent.changedTouches[1].pageY)/2;o.centerDiffY=i-o.props.cropHeight/2}o.longPressTimeout&&clearTimeout(o.longPressTimeout);var a=n.nativeEvent,s=a.locationX,l=a.locationY,u=a.pageX,d=a.pageY;if(o.longPressTimeout=setTimeout(function(){o.isLongPress=!0,o.props.onLongPress&&o.props.onLongPress({locationX:s,locationY:l,pageX:u,pageY:d})},o.props.longPressTime),n.nativeEvent.changedTouches.length<=1)if(new Date().getTime()-o.lastClickTime<(o.props.doubleClickInterval||0)){if(o.lastClickTime=0,o.doubleClickX=n.nativeEvent.changedTouches[0].pageX,o.doubleClickY=n.nativeEvent.changedTouches[0].pageY,o.props.onDoubleClick&&o.props.onDoubleClick({locationX:n.nativeEvent.changedTouches[0].locationX,locationY:n.nativeEvent.changedTouches[0].locationY,pageX:o.doubleClickX,pageY:o.doubleClickY}),clearTimeout(o.longPressTimeout),o.isDoubleClick=!0,o.props.enableDoubleClickZoom){if(o.scale>1||o.scale<1)o.scale=1,o.positionX=0,o.positionY=0;else{var m=o.scale;o.scale=2;var p=o.scale-m;o.positionX=(o.props.cropWidth/2-o.doubleClickX)*p/o.scale,o.positionY=(o.props.cropHeight/2-o.doubleClickY)*p/o.scale}o.imageDidMove("centerOn"),zt.Animated.parallel([zt.Animated.timing(o.animatedScale,{toValue:o.scale,duration:100,useNativeDriver:!!o.props.useNativeDriver}),zt.Animated.timing(o.animatedPositionX,{toValue:o.positionX,duration:100,useNativeDriver:!!o.props.useNativeDriver}),zt.Animated.timing(o.animatedPositionY,{toValue:o.positionY,duration:100,useNativeDriver:!!o.props.useNativeDriver})]).start()}}else o.lastClickTime=new Date().getTime()},onPanResponderMove:function(n,r){if(!o.isDoubleClick){if(n.nativeEvent.changedTouches.length<=1){var i=r.dx-(o.lastPositionX||0);o.lastPositionX===null&&(i=0);var a=r.dy-(o.lastPositionY||0);if(o.lastPositionY===null&&(a=0),o.lastPositionX=r.dx,o.lastPositionY=r.dy,o.horizontalWholeCounter+=i,o.verticalWholeCounter+=a,(Math.abs(o.horizontalWholeCounter)>5||Math.abs(o.verticalWholeCounter)>5)&&clearTimeout(o.longPressTimeout),o.props.panToMove){if(o.swipeDownOffset===0){if(Math.abs(i)>Math.abs(a)&&(o.isHorizontalWrap=!0),o.props.imageWidth*o.scale>o.props.cropWidth){o.horizontalWholeOuterCounter>0?i<0?o.horizontalWholeOuterCounter>Math.abs(i)?(o.horizontalWholeOuterCounter+=i,i=0):(i+=o.horizontalWholeOuterCounter,o.horizontalWholeOuterCounter=0,o.props.horizontalOuterRangeOffset&&o.props.horizontalOuterRangeOffset(0)):o.horizontalWholeOuterCounter+=i:o.horizontalWholeOuterCounter<0&&(i>0?Math.abs(o.horizontalWholeOuterCounter)>i?(o.horizontalWholeOuterCounter+=i,i=0):(i+=o.horizontalWholeOuterCounter,o.horizontalWholeOuterCounter=0,o.props.horizontalOuterRangeOffset&&o.props.horizontalOuterRangeOffset(0)):o.horizontalWholeOuterCounter+=i),o.positionX+=i/o.scale;var s=(o.props.imageWidth*o.scale-o.props.cropWidth)/2/o.scale;o.positionX<-s?(o.positionX=-s,o.horizontalWholeOuterCounter+=-1/1e10):o.positionX>s&&(o.positionX=s,o.horizontalWholeOuterCounter+=1/1e10),o.animatedPositionX.setValue(o.positionX)}else o.horizontalWholeOuterCounter+=i;o.horizontalWholeOuterCounter>(o.props.maxOverflow||0)?o.horizontalWholeOuterCounter=o.props.maxOverflow||0:o.horizontalWholeOuterCounter<-(o.props.maxOverflow||0)&&(o.horizontalWholeOuterCounter=-(o.props.maxOverflow||0)),o.horizontalWholeOuterCounter!==0&&o.props.horizontalOuterRangeOffset&&o.props.horizontalOuterRangeOffset(o.horizontalWholeOuterCounter)}o.props.imageHeight*o.scale>o.props.cropHeight?(o.positionY+=a/o.scale,o.animatedPositionY.setValue(o.positionY)):o.props.enableSwipeDown&&!o.isHorizontalWrap&&(o.swipeDownOffset+=a,o.swipeDownOffset>0&&(o.positionY+=a/o.scale,o.animatedPositionY.setValue(o.positionY),o.scale=o.scale-a/1e3,o.animatedScale.setValue(o.scale)))}}else if(o.longPressTimeout&&clearTimeout(o.longPressTimeout),o.props.pinchToZoom){var l=void 0,u=void 0;n.nativeEvent.changedTouches[0].locationX>n.nativeEvent.changedTouches[1].locationX?(l=n.nativeEvent.changedTouches[1].pageX,u=n.nativeEvent.changedTouches[0].pageX):(l=n.nativeEvent.changedTouches[0].pageX,u=n.nativeEvent.changedTouches[1].pageX);var d=void 0,m=void 0;n.nativeEvent.changedTouches[0].locationY>n.nativeEvent.changedTouches[1].locationY?(d=n.nativeEvent.changedTouches[1].pageY,m=n.nativeEvent.changedTouches[0].pageY):(d=n.nativeEvent.changedTouches[0].pageY,m=n.nativeEvent.changedTouches[1].pageY);var p=u-l,f=m-d,h=Math.sqrt(p*p+f*f);if(o.zoomCurrentDistance=Number(h.toFixed(1)),o.zoomLastDistance!==null){var y=(o.zoomCurrentDistance-o.zoomLastDistance)/200,w=o.scale+y;w<(o.props.minScale||0)&&(w=o.props.minScale||0),w>(o.props.maxScale||0)&&(w=o.props.maxScale||0);var k=o.scale;o.scale=w,o.animatedScale.setValue(o.scale);var x=o.scale-k;o.positionX-=o.centerDiffX*x/o.scale,o.positionY-=o.centerDiffY*x/o.scale,o.animatedPositionX.setValue(o.positionX),o.animatedPositionY.setValue(o.positionY)}o.zoomLastDistance=o.zoomCurrentDistance}o.imageDidMove("onPanResponderMove")}},onPanResponderRelease:function(n,r){if(o.longPressTimeout&&clearTimeout(o.longPressTimeout),!o.isDoubleClick&&!o.isLongPress){var i=Math.sqrt(r.dx*r.dx+r.dy*r.dy),a=n.nativeEvent,s=a.locationX,l=a.locationY,u=a.pageX,d=a.pageY;n.nativeEvent.changedTouches.length===1&&i<(o.props.clickDistance||0)?o.singleClickTimeout=setTimeout(function(){o.props.onClick&&o.props.onClick({locationX:s,locationY:l,pageX:u,pageY:d})},o.props.doubleClickInterval):(o.props.responderRelease&&o.props.responderRelease(r.vx,o.scale),o.panResponderReleaseResolve())}},onPanResponderTerminate:function(){}}),o.resetScale=function(){o.positionX=0,o.positionY=0,o.scale=1,o.animatedScale.setValue(1)},o.panResponderReleaseResolve=function(){if(o.props.enableSwipeDown&&o.props.swipeDownThreshold&&o.swipeDownOffset>o.props.swipeDownThreshold){o.props.onSwipeDown&&o.props.onSwipeDown();return}if(o.props.enableCenterFocus&&o.scale<1&&(o.scale=1,zt.Animated.timing(o.animatedScale,{toValue:o.scale,duration:100,useNativeDriver:!!o.props.useNativeDriver}).start()),o.props.imageWidth*o.scale<=o.props.cropWidth&&(o.positionX=0,zt.Animated.timing(o.animatedPositionX,{toValue:o.positionX,duration:100,useNativeDriver:!!o.props.useNativeDriver}).start()),o.props.imageHeight*o.scale<=o.props.cropHeight&&(o.positionY=0,zt.Animated.timing(o.animatedPositionY,{toValue:o.positionY,duration:100,useNativeDriver:!!o.props.useNativeDriver}).start()),o.props.imageHeight*o.scale>o.props.cropHeight){var n=(o.props.imageHeight*o.scale-o.props.cropHeight)/2/o.scale;o.positionY<-n?o.positionY=-n:o.positionY>n&&(o.positionY=n),zt.Animated.timing(o.animatedPositionY,{toValue:o.positionY,duration:100,useNativeDriver:!!o.props.useNativeDriver}).start()}if(o.props.imageWidth*o.scale>o.props.cropWidth){var r=(o.props.imageWidth*o.scale-o.props.cropWidth)/2/o.scale;o.positionX<-r?o.positionX=-r:o.positionX>r&&(o.positionX=r),zt.Animated.timing(o.animatedPositionX,{toValue:o.positionX,duration:100,useNativeDriver:!!o.props.useNativeDriver}).start()}o.props.enableCenterFocus&&o.scale===1&&(o.positionX=0,o.positionY=0,zt.Animated.timing(o.animatedPositionX,{toValue:o.positionX,duration:100,useNativeDriver:!!o.props.useNativeDriver}).start(),zt.Animated.timing(o.animatedPositionY,{toValue:o.positionY,duration:100,useNativeDriver:!!o.props.useNativeDriver}).start()),o.horizontalWholeOuterCounter=0,o.swipeDownOffset=0,o.imageDidMove("onPanResponderRelease")},o}return t.prototype.componentDidMount=function(){this.props.centerOn&&this.centerOn(this.props.centerOn)},t.prototype.componentDidUpdate=function(o){(this.props.centerOn&&!o.centerOn||this.props.centerOn&&o.centerOn&&this.didCenterOnChange(o.centerOn,this.props.centerOn))&&this.centerOn(this.props.centerOn)},t.prototype.imageDidMove=function(o){this.props.onMove&&this.props.onMove({type:o,positionX:this.positionX,positionY:this.positionY,scale:this.scale,zoomCurrentDistance:this.zoomCurrentDistance})},t.prototype.didCenterOnChange=function(o,n){return o.x!==n.x||o.y!==n.y||o.scale!==n.scale},t.prototype.centerOn=function(o){var n=this;this.positionX=o.x,this.positionY=o.y,this.scale=o.scale;var r=o.duration||300;zt.Animated.parallel([zt.Animated.timing(this.animatedScale,{toValue:this.scale,duration:r,useNativeDriver:!!this.props.useNativeDriver}),zt.Animated.timing(this.animatedPositionX,{toValue:this.positionX,duration:r,useNativeDriver:!!this.props.useNativeDriver}),zt.Animated.timing(this.animatedPositionY,{toValue:this.positionY,duration:r,useNativeDriver:!!this.props.useNativeDriver})]).start(function(){n.imageDidMove("centerOn")})},t.prototype.handleLayout=function(o){this.props.layoutChange&&this.props.layoutChange(o)},t.prototype.reset=function(){this.scale=1,this.animatedScale.setValue(this.scale),this.positionX=0,this.animatedPositionX.setValue(this.positionX),this.positionY=0,this.animatedPositionY.setValue(this.positionY)},t.prototype.render=function(){var o={transform:[{scale:this.animatedScale},{translateX:this.animatedPositionX},{translateY:this.animatedPositionY}]},n=zt.StyleSheet.flatten(this.props.style);return Fh.createElement(zt.View,{style:nm(nm(nm({},r4.default.container),n),{width:this.props.cropWidth,height:this.props.cropHeight}),...this.imagePanResponder.panHandlers},Fh.createElement(zt.Animated.View,{style:o,renderToHardwareTextureAndroid:this.props.useHardwareTextureAndroid},Fh.createElement(zt.View,{onLayout:this.handleLayout.bind(this),style:{width:this.props.imageWidth,height:this.props.imageHeight}},this.props.children)))},t.defaultProps=new xL.ImageZoomProps,t}(Fh.Component);Nc.default=i4});var _L=ze(Ms=>{"use strict";c();var a4=Ms&&Ms.__createBinding||(Object.create?function(e,t,o,n){n===void 0&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){n===void 0&&(n=o),e[n]=t[o]}),s4=Ms&&Ms.__exportStar||function(e,t){for(var o in e)o!=="default"&&!t.hasOwnProperty(o)&&a4(t,e,o)};Object.defineProperty(Ms,"__esModule",{value:!0});var c4=OL();Ms.default=c4.default;s4(NS(),Ms)});var DS=ze(Vh=>{"use strict";c();Object.defineProperty(Vh,"__esModule",{value:!0});Vh.default=function(e,t,o){return{modalContainer:{backgroundColor:o,justifyContent:"center",alignItems:"center",overflow:"hidden"},watchOrigin:{position:"absolute",width:e,bottom:20,justifyContent:"center",alignItems:"center"},watchOriginTouchable:{paddingLeft:10,paddingRight:10,paddingTop:5,paddingBottom:5,borderRadius:30,borderColor:"white",borderWidth:.5,backgroundColor:"rgba(0, 0, 0, 0.1)"},watchOriginText:{color:"white",backgroundColor:"transparent"},imageStyle:{},container:{backgroundColor:o},moveBox:{flexDirection:"row",alignItems:"center"},menuContainer:{position:"absolute",width:e,height:t,left:0,bottom:0,zIndex:12},menuShadow:{position:"absolute",width:e,height:t,backgroundColor:"black",left:0,bottom:0,opacity:.2,zIndex:10},menuContent:{position:"absolute",width:e,left:0,bottom:0,zIndex:11},operateContainer:{justifyContent:"center",alignItems:"center",backgroundColor:"white",height:40,borderBottomColor:"#ccc",borderBottomWidth:1},operateText:{color:"#333"},loadingTouchable:{width:e,height:t},loadingContainer:{flex:1,justifyContent:"center",alignItems:"center"},arrowLeftContainer:{position:"absolute",top:0,bottom:0,left:0,justifyContent:"center",zIndex:13},arrowRightContainer:{position:"absolute",top:0,bottom:0,right:0,justifyContent:"center",zIndex:13}}};Vh.simpleStyle={count:{position:"absolute",left:0,right:0,top:38,zIndex:13,justifyContent:"center",alignItems:"center",backgroundColor:"transparent"},countText:{color:"white",fontSize:16,backgroundColor:"transparent",textShadowColor:"rgba(0, 0, 0, 0.3)",textShadowOffset:{width:0,height:.5},textShadowRadius:0}}});var zS=ze(qh=>{"use strict";c();Object.defineProperty(qh,"__esModule",{value:!0});var AS=O(),BS=(W(),pm(ym)),IL=DS(),l4=function(){function e(){this.show=!1,this.imageUrls=[],this.flipThreshold=80,this.maxOverflow=300,this.index=0,this.failImageSource=void 0,this.backgroundColor="black",this.footerContainerStyle={},this.menuContext={saveToLocal:"save to the album",cancel:"cancel"},this.saveToLocalByLongPress=!0,this.enableImageZoom=!0,this.style={},this.enableSwipeDown=!1,this.enablePreload=!1,this.pageAnimateTime=100,this.useNativeDriver=!1,this.onLongPress=function(){},this.onClick=function(){},this.onDoubleClick=function(){},this.onSave=function(){},this.onMove=function(){},this.renderHeader=function(){return null},this.renderFooter=function(){return null},this.renderIndicator=function(t,o){return AS.createElement(BS.View,{style:IL.simpleStyle.count},AS.createElement(BS.Text,{style:IL.simpleStyle.countText},t+"/"+o))},this.renderImage=function(t){return AS.createElement(BS.Image,t)},this.renderArrowLeft=function(){return null},this.renderArrowRight=function(){return null},this.onShowModal=function(){},this.onCancel=function(){},this.onSwipeDown=function(){},this.loadingRender=function(){return null},this.onSaveToCamera=function(){},this.onChange=function(){}}return e}();qh.Props=l4;var u4=function(){function e(){this.show=!1,this.currentShowIndex=0,this.prevIndexProp=0,this.imageLoaded=!1,this.imageSizes=[],this.isShowMenu=!1}return e}();qh.State=u4});var TL=ze(Da=>{"use strict";c();var d4=Da&&Da.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var n in o)o.hasOwnProperty(n)&&(t[n]=o[n])};return function(t,o){e(t,o);function n(){this.constructor=t}t.prototype=o===null?Object.create(o):(n.prototype=o.prototype,new n)}}(),Dc=Da&&Da.__assign||Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++){t=arguments[o];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},m4=Da&&Da.__rest||function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&(o[n[r]]=e[n[r]]);return o};Object.defineProperty(Da,"__esModule",{value:!0});var tt=O(),Se=(W(),pm(ym)),RL=_L(),PL=DS(),WS=zS(),p4=function(e){d4(t,e);function t(){var o=e!==null&&e.apply(this,arguments)||this;return o.state=new WS.State,o.fadeAnim=new Se.Animated.Value(0),o.standardPositionX=0,o.positionXNumber=0,o.positionX=new Se.Animated.Value(0),o.width=0,o.height=0,o.styles=PL.default(0,0,"transparent"),o.hasLayout=!1,o.loadedIndex=new Map,o.handleLongPressWithIndex=new Map,o.imageRefs=[],o.resetImageByIndex=function(n){o.imageRefs[n]&&o.imageRefs[n].reset()},o.preloadImage=function(n){n<o.state.imageSizes.length&&o.loadImage(n+1)},o.handleHorizontalOuterRangeOffset=function(n){n===void 0&&(n=0),o.positionXNumber=o.standardPositionX+n,o.positionX.setValue(o.positionXNumber);var r=Se.I18nManager.isRTL?-n:n;r<0?(o.state.currentShowIndex||0<o.props.imageUrls.length-1)&&o.loadImage((o.state.currentShowIndex||0)+1):r>0&&(o.state.currentShowIndex||0>0)&&o.loadImage((o.state.currentShowIndex||0)-1)},o.handleResponderRelease=function(n){n===void 0&&(n=0);var r=Se.I18nManager.isRTL?-n:n,i=Se.I18nManager.isRTL?o.positionXNumber-o.standardPositionX<-(o.props.flipThreshold||0):o.positionXNumber-o.standardPositionX>(o.props.flipThreshold||0),a=Se.I18nManager.isRTL?o.positionXNumber-o.standardPositionX>(o.props.flipThreshold||0):o.positionXNumber-o.standardPositionX<-(o.props.flipThreshold||0);if(r>.7){o.goBack.call(o),(o.state.currentShowIndex||0>0)&&o.loadImage((o.state.currentShowIndex||0)-1);return}else if(r<-.7){o.goNext.call(o),(o.state.currentShowIndex||0<o.props.imageUrls.length-1)&&o.loadImage((o.state.currentShowIndex||0)+1);return}if(i)o.goBack.call(o);else if(a){o.goNext.call(o);return}else{o.resetPosition.call(o);return}},o.goBack=function(){if(o.state.currentShowIndex===0){o.resetPosition.call(o);return}o.positionXNumber=Se.I18nManager.isRTL?o.standardPositionX-o.width:o.standardPositionX+o.width,o.standardPositionX=o.positionXNumber,Se.Animated.timing(o.positionX,{toValue:o.positionXNumber,duration:o.props.pageAnimateTime,useNativeDriver:!!o.props.useNativeDriver}).start();var n=(o.state.currentShowIndex||0)-1;o.setState({currentShowIndex:n},function(){o.props.onChange&&o.props.onChange(o.state.currentShowIndex)})},o.goNext=function(){if(o.state.currentShowIndex===o.props.imageUrls.length-1){o.resetPosition.call(o);return}o.positionXNumber=Se.I18nManager.isRTL?o.standardPositionX+o.width:o.standardPositionX-o.width,o.standardPositionX=o.positionXNumber,Se.Animated.timing(o.positionX,{toValue:o.positionXNumber,duration:o.props.pageAnimateTime,useNativeDriver:!!o.props.useNativeDriver}).start();var n=(o.state.currentShowIndex||0)+1;o.setState({currentShowIndex:n},function(){o.props.onChange&&o.props.onChange(o.state.currentShowIndex)})},o.handleLongPress=function(n){o.props.saveToLocalByLongPress&&o.setState({isShowMenu:!0}),o.props.onLongPress&&o.props.onLongPress(n)},o.handleClick=function(){o.props.onClick&&o.props.onClick(o.handleCancel,o.state.currentShowIndex)},o.handleDoubleClick=function(){o.props.onDoubleClick&&o.props.onDoubleClick(o.handleCancel)},o.handleCancel=function(){o.hasLayout=!1,o.props.onCancel&&o.props.onCancel()},o.handleLayout=function(n){n.nativeEvent.layout.width!==o.width&&(o.hasLayout=!0,o.width=n.nativeEvent.layout.width,o.height=n.nativeEvent.layout.height,o.styles=PL.default(o.width,o.height,o.props.backgroundColor||"transparent"),o.forceUpdate(),o.jumpToCurrentImage())},o.saveToLocal=function(){o.props.onSave?o.props.onSave(o.props.imageUrls[o.state.currentShowIndex||0].url):(Se.CameraRoll.saveToCameraRoll(o.props.imageUrls[o.state.currentShowIndex||0].url),o.props.onSaveToCamera(o.state.currentShowIndex)),o.setState({isShowMenu:!1})},o.handleLeaveMenu=function(){o.setState({isShowMenu:!1})},o.handleSwipeDown=function(){o.props.onSwipeDown&&o.props.onSwipeDown(),o.handleCancel()},o}return t.prototype.componentDidMount=function(){this.init(this.props)},t.getDerivedStateFromProps=function(o,n){return o.index!==n.prevIndexProp?{currentShowIndex:o.index,prevIndexProp:o.index}:null},t.prototype.componentDidUpdate=function(o,n){o.index!==this.props.index&&(this.loadImage(this.props.index||0),this.jumpToCurrentImage(),Se.Animated.timing(this.fadeAnim,{toValue:1,duration:200,useNativeDriver:!!this.props.useNativeDriver}).start())},t.prototype.init=function(o){var n=this;if(o.imageUrls.length===0)return this.fadeAnim.setValue(0),this.setState(new WS.State);var r=[];o.imageUrls.forEach(function(i){r.push({width:i.width||0,height:i.height||0,status:"loading"})}),this.setState({currentShowIndex:o.index,prevIndexProp:o.index||0,imageSizes:r},function(){n.loadImage(o.index||0),n.jumpToCurrentImage(),Se.Animated.timing(n.fadeAnim,{toValue:1,duration:200,useNativeDriver:!!o.useNativeDriver}).start()})},t.prototype.jumpToCurrentImage=function(){this.positionXNumber=this.width*(this.state.currentShowIndex||0)*(Se.I18nManager.isRTL?1:-1),this.standardPositionX=this.positionXNumber,this.positionX.setValue(this.positionXNumber)},t.prototype.loadImage=function(o){var n=this;if(this.state.imageSizes[o]&&!this.loadedIndex.has(o)){this.loadedIndex.set(o,!0);var r=this.props.imageUrls[o],i=Dc({},this.state.imageSizes[o]),a=function(){if(!(n.state.imageSizes[o]&&n.state.imageSizes[o].status!=="loading")){var u=n.state.imageSizes.slice();u[o]=i,n.setState({imageSizes:u})}};if(this.state.imageSizes[o].status!=="success"){if(this.state.imageSizes[o].width>0&&this.state.imageSizes[o].height>0){i.status="success",a();return}var s=!1,l=!1;if((!r.url||r.url.startsWith("file:"))&&(l=!0),r.width&&r.height){this.props.enablePreload&&l===!1&&Se.Image.prefetch(r.url),i.width=r.width,i.height=r.height,i.status="success",a();return}Se.Image.getSize(r.url,function(u,d){i.width=u,i.height=d,i.status="success",a()},function(){try{var u=Se.Image.resolveAssetSource(r.props.source);i.width=u.width,i.height=u.height,i.status="success",a()}catch(d){i.status="fail",a()}})}}},t.prototype.resetPosition=function(){this.positionXNumber=this.standardPositionX,Se.Animated.timing(this.positionX,{toValue:this.standardPositionX,duration:150,useNativeDriver:!!this.props.useNativeDriver}).start()},t.prototype.getContent=function(){var o=this,n=this.width,r=this.height,i=this.props.imageUrls.map(function(a,s){if((o.state.currentShowIndex||0)>s+1||(o.state.currentShowIndex||0)<s-1)return tt.createElement(Se.View,{key:s,style:{width:n,height:r}});o.handleLongPressWithIndex.has(s)||o.handleLongPressWithIndex.set(s,o.handleLongPress.bind(o,a));var l=o.state.imageSizes[s]&&o.state.imageSizes[s].width,u=o.state.imageSizes[s]&&o.state.imageSizes[s].height,d=o.state.imageSizes[s];if(!d||!d.status)return tt.createElement(Se.View,{key:s,style:{width:n,height:r}});if(l>n){var m=n/l;l*=m,u*=m}if(u>r){var p=r/u;l*=p,u*=p}var f=function(h){var y=h.children,w=m4(h,["children"]);return tt.createElement(RL.default,{cropWidth:o.width,cropHeight:o.height,maxOverflow:o.props.maxOverflow,horizontalOuterRangeOffset:o.handleHorizontalOuterRangeOffset,responderRelease:o.handleResponderRelease,onMove:o.props.onMove,onLongPress:o.handleLongPressWithIndex.get(s),onClick:o.handleClick,onDoubleClick:o.handleDoubleClick,enableSwipeDown:o.props.enableSwipeDown,swipeDownThreshold:o.props.swipeDownThreshold,onSwipeDown:o.handleSwipeDown,pinchToZoom:o.props.enableImageZoom,enableDoubleClickZoom:o.props.enableImageZoom,doubleClickInterval:o.props.doubleClickInterval,...w},y)};switch(d.status){case"loading":return tt.createElement(f,{key:s,style:Dc({},o.styles.modalContainer,o.styles.loadingContainer),imageWidth:n,imageHeight:r},tt.createElement(Se.View,{style:o.styles.loadingContainer},o.props.loadingRender()));case"success":return a.props||(a.props={}),a.props.style||(a.props.style={}),a.props.style=Dc({},o.styles.imageStyle,a.props.style,{width:l,height:u}),typeof a.props.source=="number"||(a.props.source||(a.props.source={}),a.props.source=Dc({uri:a.url},a.props.source)),o.props.enablePreload&&o.preloadImage(o.state.currentShowIndex||0),tt.createElement(RL.default,{key:s,ref:function(h){return o.imageRefs[s]=h},cropWidth:o.width,cropHeight:o.height,maxOverflow:o.props.maxOverflow,horizontalOuterRangeOffset:o.handleHorizontalOuterRangeOffset,responderRelease:o.handleResponderRelease,onMove:o.props.onMove,onLongPress:o.handleLongPressWithIndex.get(s),onClick:o.handleClick,onDoubleClick:o.handleDoubleClick,imageWidth:l,imageHeight:u,enableSwipeDown:o.props.enableSwipeDown,swipeDownThreshold:o.props.swipeDownThreshold,onSwipeDown:o.handleSwipeDown,panToMove:!o.state.isShowMenu,pinchToZoom:o.props.enableImageZoom&&!o.state.isShowMenu,enableDoubleClickZoom:o.props.enableImageZoom&&!o.state.isShowMenu,doubleClickInterval:o.props.doubleClickInterval,minScale:o.props.minScale,maxScale:o.props.maxScale},o.props.renderImage(a.props));case"fail":return tt.createElement(f,{key:s,style:o.styles.modalContainer,imageWidth:o.props.failImageSource?o.props.failImageSource.width:n,imageHeight:o.props.failImageSource?o.props.failImageSource.height:r},o.props.failImageSource&&o.props.renderImage({source:{uri:o.props.failImageSource.url},style:{width:o.props.failImageSource.width,height:o.props.failImageSource.height}}))}});return tt.createElement(Se.Animated.View,{style:{zIndex:9}},tt.createElement(Se.Animated.View,{style:Dc({},this.styles.container,{opacity:this.fadeAnim})},this.props.renderHeader(this.state.currentShowIndex),tt.createElement(Se.View,{style:this.styles.arrowLeftContainer},tt.createElement(Se.TouchableWithoutFeedback,{onPress:this.goBack},tt.createElement(Se.View,null,this.props.renderArrowLeft()))),tt.createElement(Se.View,{style:this.styles.arrowRightContainer},tt.createElement(Se.TouchableWithoutFeedback,{onPress:this.goNext},tt.createElement(Se.View,null,this.props.renderArrowRight()))),tt.createElement(Se.Animated.View,{style:Dc({},this.styles.moveBox,{transform:[{translateX:this.positionX}],width:this.width*this.props.imageUrls.length})},i),this.props.renderIndicator((this.state.currentShowIndex||0)+1,this.props.imageUrls.length),this.props.imageUrls[this.state.currentShowIndex||0]&&this.props.imageUrls[this.state.currentShowIndex||0].originSizeKb&&this.props.imageUrls[this.state.currentShowIndex||0].originUrl&&tt.createElement(Se.View,{style:this.styles.watchOrigin},tt.createElement(Se.TouchableOpacity,{style:this.styles.watchOriginTouchable},tt.createElement(Se.Text,{style:this.styles.watchOriginText},"\u67E5\u770B\u539F\u56FE(2M)"))),tt.createElement(Se.View,{style:[{bottom:0,position:"absolute",zIndex:9},this.props.footerContainerStyle]},this.props.renderFooter(this.state.currentShowIndex||0))))},t.prototype.getMenu=function(){return this.state.isShowMenu?this.props.menus?tt.createElement(Se.View,{style:this.styles.menuContainer},this.props.menus({cancel:this.handleLeaveMenu,saveToLocal:this.saveToLocal})):tt.createElement(Se.View,{style:this.styles.menuContainer},tt.createElement(Se.View,{style:this.styles.menuShadow}),tt.createElement(Se.View,{style:this.styles.menuContent},tt.createElement(Se.TouchableHighlight,{underlayColor:"#F2F2F2",onPress:this.saveToLocal,style:this.styles.operateContainer},tt.createElement(Se.Text,{style:this.styles.operateText},this.props.menuContext.saveToLocal)),tt.createElement(Se.TouchableHighlight,{underlayColor:"#F2F2F2",onPress:this.handleLeaveMenu,style:this.styles.operateContainer},tt.createElement(Se.Text,{style:this.styles.operateText},this.props.menuContext.cancel)))):null},t.prototype.render=function(){var o=null;return o=tt.createElement(Se.View,null,this.getContent(),this.getMenu()),tt.createElement(Se.View,{onLayout:this.handleLayout,style:Dc({flex:1,overflow:"hidden"},this.props.style)},o)},t.defaultProps=new WS.Props,t}(tt.Component);Da.default=p4});var ML=ze(rm=>{"use strict";c();Object.defineProperty(rm,"__esModule",{value:!0});var EL=TL();rm.ImageViewer=EL.default;var f4=zS();rm.ImageViewerPropsDefine=f4.Props;rm.default=EL.default});c();c();(function(){"use strict";var e="ListFormat"in Intl;function t(V,J){if(!(V instanceof J))throw new TypeError("Cannot call a class as a function")}function o(V,J){for(var j=0;j<J.length;j++){var ee=J[j];ee.enumerable=ee.enumerable||!1,ee.configurable=!0,"value"in ee&&(ee.writable=!0),Object.defineProperty(V,ee.key,ee)}}function n(V,J,j){return J&&o(V.prototype,J),j&&o(V,j),V}var r=["conjunction","disjunction","unit"],i=["long","short","narrow"],a=["lookup","best fit"];function s(V){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?s=function(j){return typeof j}:s=function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},s(V)}function l(V){return typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?l=function(j){return s(j)}:l=function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":s(j)},l(V)}function u(V){if(V==null)throw new TypeError("Argument ".concat(V," cannot be converted to an Object"));return typeof V=="boolean"?new Boolean(V):typeof V=="number"?new Number(V):typeof V=="string"?new String(V):l(V)==="symbol"?new Object(V):V}var d;function m(V){d=V}function p(){return d}function f(){if(d==null)throw new ReferenceError("Could not determine locale: No default locale has been configured");return d}var h=new WeakMap,y={relevantExtensionKeys:[],localeData:{},availableLocales:[]};function w(V,J,j){var ee=h.get(V);ee==null&&(ee=Object.create(null),h.set(V,ee)),ee[J]=j}function k(V,J){var j=h.get(V);if(j==null)throw new ReferenceError("No internal slots has been allocated for the given instance of ListFormat");return j[J]}function x(V,J){var j=h.get(V);return j!=null&&J in j}var P=/-u(?:-[0-9a-z]{2,8})+/gi;function I(V){return V.replace(P,"")}function _(V,J){for(var j=J;;){if(V.includes(j))return j;var ee=j.lastIndexOf("-");if(ee===-1)return;ee>=2&&j.charAt(ee-2)==="-"&&(ee-=2),j=j.slice(0,ee)}}function M(V,J){var j=[],ee=!0,we=!1,ue=void 0;try{for(var Me=J[Symbol.iterator](),Be;!(ee=(Be=Me.next()).done);ee=!0){var rt=Be.value,vt=I(rt),Xt=_(V,vt);Xt!==void 0&&j.push(rt)}}catch(kn){we=!0,ue=kn}finally{try{!ee&&Me.return!=null&&Me.return()}finally{if(we)throw ue}}return j}function T(V,J){return M(V,J)}function L(V){return typeof V=="string"||l(V)==="symbol"}function q(V,J){if(l(V)!=="object")throw new TypeError("Given argument ".concat(V," must be of type Object"));if(!L(J))throw new TypeError("Given argument ".concat(J," must be a PropertyKey"));return V[J]}function G(V){return!!V}function U(V){return V+""}function H(V,J,j,ee,we){var ue=q(V,J);if(ue!==void 0){if(j!=="boolean"&&j!=="string")throw new TypeError("Expected type ".concat(j," to be 'boolean' or 'string"));if(j==="boolean"&&(ue=G(ue)),j==="string"&&(ue=U(ue)),ee!==void 0&&!ee.includes(ue))throw new RangeError("Value ".concat(ue," out of range for options property ").concat(J));return ue}else return we}function Y(V,J,j){var ee;return j!==void 0?(j=u(j),ee=H(j,"localeMatcher","string",a,"best fit")):ee="best fit",ee==="best fit"?T(V,J):M(V,J)}function oe(V){var J=V.availableLocales,j=V.requestedLocales,ee=Object.create(null),we=!0,ue=!1,Me=void 0;try{for(var Be=j[Symbol.iterator](),rt;!(we=(rt=Be.next()).done);we=!0){var vt=rt.value,Xt=I(vt),kn=_(J,Xt);if(kn!==void 0){if(ee.locale=kn,vt!==Xt){var cr=vt.match(P);ee.extension=cr==null?"":cr[0]}return ee}}}catch(ca){ue=!0,Me=ca}finally{try{!we&&Be.return!=null&&Be.return()}finally{if(ue)throw Me}}var Pr=f();return ee.locale=Pr,ee}function ce(V){return oe(V)}function Ee(V,J,j,ee,we){var ue=j.localeMatcher,Me=ue==="lookup"?oe({availableLocales:V,requestedLocales:J}):ce({availableLocales:V,requestedLocales:J}),Be=Me.locale,rt=Object.create(null);rt.dataLocale=Be;var vt="-u";if(vt.length>2){var Xt=String.prototype.indexOf.call(Be,"-x-");if(Xt===-1)Be="".concat(Be).concat(vt);else{var kn=Be.slice(0,Xt),cr=Be.slice(Xt);Be="".concat(kn).concat(vt).concat(cr)}Be=Intl.getCanonicalLocales(Be)[0]}return rt.locale=Be,rt}function Ne(V){if(Array.isArray(V)){for(var J=0,j=new Array(V.length);J<V.length;J++)j[J]=V[J];return j}}function kt(V){if(Symbol.iterator in Object(V)||Object.prototype.toString.call(V)==="[object Arguments]")return Array.from(V)}function Go(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function Jr(V){return Ne(V)||kt(V)||Go()}function ei(V){if(V===void 0)return[];var J=Jr(V);if(J.some(function(j){return typeof j!="string"}))throw new TypeError("All List items must be strings");return J}function st(V){return Object.prototype.toString.call(V)==="[object Object]"}function nn(V){return Array.isArray(V)||st(V)}function Ht(V,J){for(var j=[],ee=String.prototype.indexOf.call(V,"{",0),we=0,ue=V.length;V[ee]!==void 0;){var Me=String.prototype.indexOf.call(V,"}",ee);if(Me<=ee)throw new TypeError("Expected endIndex: ".concat(Me," to be greater than beginIndex: ").concat(ee));if(ee>we){var Be=V.slice(we,ee);j.push({type:"literal",value:Be})}var rt=V.slice(ee+1,Me);if(J[Number(rt)]==null)throw new TypeError("Expected placeables to have a part for PropertyKey: ".concat(rt));var vt=J[Number(rt)];if(nn(vt.value)){var Xt=!0,kn=!1,cr=void 0;try{for(var Pr=vt.value[Symbol.iterator](),ca;!(Xt=(ca=Pr.next()).done);Xt=!0){var ly=ca.value;j.push(ly)}}catch(uy){kn=!0,cr=uy}finally{try{!Xt&&Pr.return!=null&&Pr.return()}finally{if(kn)throw cr}}}else j.push(vt);we=Me+1,ee=String.prototype.indexOf.call(V,"{",we)}if(we<ue){var _u=V.slice(we,ue);j.push({type:"literal",value:_u})}return j}function Dt(V,J){var j,ee=J.length;if(ee===0)return[];if(ee===2){j=k(V,"templatePair");var we={type:"element",value:J[0]},ue={type:"element",value:J[1]},Me={0:we,1:ue};return Ht(j,Me)}for(var Be={type:"element",value:J[ee-1]},rt=[Be],vt=ee-2;vt>=0;){vt===0?j=k(V,"templateStart"):vt<ee-2?j=k(V,"templateMiddle"):j=k(V,"templateEnd");var Xt={type:"element",value:J[vt]},kn={type:"element",value:rt},cr={0:Xt,1:kn};rt=Ht(j,cr),vt--}return rt}function Bs(V,J){var j=Dt(V,J),ee="",we=!0,ue=!1,Me=void 0;try{for(var Be=j[Symbol.iterator](),rt;!(we=(rt=Be.next()).done);we=!0){var vt=rt.value;ee+=vt.value}}catch(Xt){ue=!0,Me=Xt}finally{try{!we&&Be.return!=null&&Be.return()}finally{if(ue)throw Me}}return ee}function zs(V,J){return Dt(V,J)}var Fn=function(){function V(){t(this,V);var J=arguments[0],j=arguments[1];if((this instanceof V?this.constructor:void 0)===void 0)throw new TypeError("Constructor Intl.ListFormat requires 'new'");var ee=Intl.getCanonicalLocales(J);j=j===void 0?Object.create(null):u(j);var we=Object.create(null),ue=H(j,"localeMatcher","string",a,"best fit");we.localeMatcher=ue;var Me=H(j,"type","string",r,"conjunction");w(this,"type",Me);var Be=H(j,"style","string",i,"long");w(this,"style",Be);var rt=y.localeData,vt=Ee(y.availableLocales,ee,we),Xt=vt.dataLocale,kn=rt[Xt],cr=kn.formats[Me],Pr=cr[Be];w(this,"templatePair",Pr.Pair),w(this,"templateStart",Pr.Start),w(this,"templateMiddle",Pr.Middle),w(this,"templateEnd",Pr.End),w(this,"locale",vt.locale),w(this,"initializedListFormat",this)}return n(V,[{key:"format",value:function(j){var ee=this;if(!(ee instanceof Object))throw new TypeError("Method Intl.ListFormat.prototype.format called on incompatible receiver ".concat(this.toString()));if(!x(ee,"initializedListFormat"))throw new TypeError("Method Intl.ListFormat.prototype.format called on incompatible receiver ".concat(this.toString()));var we=ei(j);return Bs(ee,we)}},{key:"formatToParts",value:function(j){var ee=this;if(!(ee instanceof Object))throw new TypeError("Method Intl.ListFormat.prototype.formatToParts called on incompatible receiver ".concat(this.toString()));if(!x(ee,"initializedListFormat"))throw new TypeError("Method Intl.ListFormat.prototype.formatToParts called on incompatible receiver ".concat(this.toString()));var we=ei(j);return zs(ee,we)}},{key:"resolvedOptions",value:function(){var j=this;if(!(j instanceof Object))throw new TypeError("Method Intl.ListFormat.prototype.resolvedOptions called on incompatible receiver ".concat(this.toString()));if(!x(j,"initializedListFormat"))throw new TypeError("Method Intl.ListFormat.prototype.resolvedOptions called on incompatible receiver ".concat(this.toString()));var ee=k(this,"locale"),we=k(this,"type"),ue=k(this,"style");return{locale:ee,type:we,style:ue}}}],[{key:"supportedLocalesOf",value:function(j){var ee=arguments[1],we=y.availableLocales,ue=Intl.getCanonicalLocales(j);return Y(we,ue,ee)}},{key:"__addLocaleData",value:function(j){var ee=j.data,we=j.locale,ue=p();ue==null&&m(we),y.localeData[we]=ee,y.availableLocales.includes(we)||y.availableLocales.push(we)}}]),V}();Object.defineProperty(Fn.prototype,Symbol.toStringTag,{writable:!1,enumerable:!1,value:"Intl.ListFormat",configurable:!0});function Rr(){if(typeof Intl>"u")throw new TypeError("Could not define Intl.ListFormat: Expected 'Intl' to exist. Remember to include polyfill for Intl.getCanonicalLocales before applying this polyfill");Intl.ListFormat=Fn}e||Rr()})();c();"__addLocaleData"in Intl.ListFormat&&Intl.ListFormat.__addLocaleData({locale:"en",data:{formats:{conjunction:{long:{Pair:"{0} and {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, and {1}"},short:{Pair:"{0} & {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, & {1}"},narrow:{Pair:"{0}, {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, {1}"}},disjunction:{long:{Pair:"{0} or {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, or {1}"},short:{Pair:"{0} or {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, or {1}"},narrow:{Pair:"{0} or {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, or {1}"}},unit:{long:{Pair:"{0}, {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, {1}"},short:{Pair:"{0}, {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, {1}"},narrow:{Pair:"{0} {1}",Start:"{0} {1}",Middle:"{0} {1}",End:"{0} {1}"}}}}});W();c();c();var b6=new Jc(Um,{shouldSort:!0,threshold:.4,distance:100,keys:[{name:"name",weight:.7},{name:"keywords",weight:.3}]});function Dp(e){return b6.search(e).map(t=>t.item)}c();function Fx(e){let{r:t,g:o,b:n}=ok(e);return Math.sqrt(.299*(t*t)+.587*(o*o)+.114*(n*n))}function Gi(e){return Fx(e)>150?"light":"dark"}function Ap(e){let t=Fx(e);return t>240?"lightest":t>215?"light":t>190?"semiLight":t>165?"medium":t>140?"semiDark":t>115?"dark":"darkest"}c();var pl=C(O()),Bp=C(y6());function Vx(e=2e3){let[t,o]=pl.useState(!1),n=pl.useRef(null);return pl.useEffect(()=>(!t&&typeof window<"u"&&(n.current=setTimeout(()=>(0,Bp.unstable_runWithPriority)(Bp.unstable_IdlePriority,()=>o(!0)),e)),()=>{n.current&&clearTimeout(n.current)}),[]),t}c();var qx=C(O());function Gx(){let e=qx.useRef();return tl(()=>{e.current=window},[]),e}c();var fl=C(O());function Hx(){let e=fl.useRef(new WeakMap);return fl.useCallback(t=>(e.current.has(t)||e.current.set(t,fl.createRef()),e.current.get(t)),[])}c();var Xx=C(O());function zp(e,t){let o=gt(e);Xx.default.useEffect(()=>{let n=()=>o.current(),r=window.setTimeout(n,t);return()=>window.clearTimeout(r)},[t])}c();var Xu=C(O());c();var Kx=C(O());function Wp(e,t=500){let o=Kx.useRef(0);return n=>o.current&&Date.now()-o.current<t?(e(n),o.current=0,!0):(o.current=Date.now(),!1)}c();var $x=C(O());function Ux(e,t){let{scope:o=document,exact:n=!1}=t||{},r=gt(e);$x.useEffect(()=>{if(!e)return;let i=a=>{var l;(n?a.target===o:o.contains(a.target))&&a.key==="Tab"&&(a.defaultPrevented||a.preventDefault(),(l=r.current)==null||l.call(r,a.shiftKey))};return document.addEventListener("keydown",i),()=>{document.removeEventListener("keydown",i)}},[r,!!e,o,n])}function jx(e){let{anchor:t,children:o,wrapper:n,onClose:r,...i}=e,a=Xu.useRef(null);return Ha({...i,onClose:r},a),Xu.createElement(zi,{ref:a,opened:i.opened,anchor:t,wrapper:n},Xu.createElement(sp.Provider,{value:r},o))}c();var Hi=C(O());W();function Fp(e,t={}){let o=Hi.createContext(null);function n(i){let{children:a,...s}=i,l=typeof e=="object"?e:e(i),[u,d]=Hi.useState(l),[m,p]=Hi.useState(!1),f=h=>{let{layout:y}=h.nativeEvent;(!u||t.width!==!1&&y.width!==u.width||t.height!==!1&&y.height!==u.height)&&(d(y),p(!0))};return Hi.createElement(o.Provider,{value:{ready:m,dimensions:u}},Hi.createElement(b,{...s,onLayout:f},a))}function r(){let i=Hi.useContext(o);if(!i||!i.dimensions)throw new Error("Dimensions not available");return[i.dimensions,i.ready]}return{View:n,useDimensions:r}}c();var oc=C(O());W();c();var Vp=C(O());W();var S6=$.createResponsiveComponent(We);function Yx(e){let[,t]=R(k6),{close:o}=uo(),n=ol()==="mobile",r=e.closeable||n,i=()=>{e.onClose&&e.onClose(),o(e.id)},a=Ka({mount:w6,unmount:C6});return Vp.createElement(b,{ref:a},Vp.createElement(S6,{mobileStyle:t.toastMobile,desktopStyle:t.toastDesktop,onPress:()=>{e.onOpen&&e.onOpen(),r&&i()}},Vp.createElement(Kn,{...e,onClose:r?i:void 0,style:t.alert,mainBackground:!0})))}var w6={duration:mi.TRANSITION_DURATION_SHORT,frames:{0:{opacity:0,transform:[{translateY:100}]},1:{opacity:1,transform:[{translateY:0}]}}},C6={duration:mi.TRANSITION_DURATION_SHORT,frames:{0:{opacity:1,transform:[{translateY:0}]},1:{opacity:0,transform:[{translateY:100}]}}},k6=z.create({toastDesktop:{width:"auto",minWidth:420,maxWidth:720,marginBottom:g.small},toastMobile:{width:"100%",minWidth:0},alert:e=>({...e.shadows.pop,borderColor:e.colors.border.main})});function Qx(e){let t=Xo(xk),o=Xo(kk),n=oc.useRef(null),r=O6[t];return oc.createElement(Gn,{ref:n},oc.createElement($.View,{style:[x6.toaster],mobileStyle:r.mobile,desktopStyle:r.desktop},oc.createElement(vk,null,o.map(i=>oc.createElement(Yx,{...i,key:i.id})))))}var x6=X.create({toaster:{position:"fixed",zIndex:200}}),O6={"bottom-right":X.create({desktop:{bottom:g.medium,right:g.medium},mobile:{bottom:g.medium,right:g.medium,left:g.medium}}),"bottom-right-with-bar":X.create({desktop:{bottom:g.xxlarge,right:g.medium},mobile:{bottom:g.xxlarge+g.xlarge+g.medium,right:g.medium,left:g.medium}})};c();var gr=C(O());W();var _6=F.createInteractiveComponent(mr);function Xi(e){let{icon:t,title:o,subtitle:n,details:r,style:i,buttons:a=[],...s}=e,[,l]=R(D);return gr.createElement(Sa,{style:[v.alignCenter,g.Padding.medium,i],...s},t?gr.createElement(I6,{icon:t}):null,gr.createElement(b,{style:[v.flex1]},gr.createElement(b,{style:[v.directionRow,v.alignCenter]},gr.createElement(_6.Child,{style:[l.Body,l.Medium,l.text],activeStyle:l.primary,descendantOf:Sa.interactiveHandle},o),n?gr.createElement(mr,{style:[l.Label,l.textMuted,g.Margin.mediumLeft]},n):null),r?gr.createElement(b,null,gr.createElement(A,{style:[l.Label,l.textMid]},r)):null),a.length>0?gr.createElement(b,{style:[v.directionRow,v.alignCenter,g.Margin.mediumLeft]},a.map((u,d)=>u?gr.createElement(b,{style:[g.Margin.smallLeft],key:d},u):null)):null)}function I6(e){let{icon:t}=e,[,o]=R(D),n=F.useInteractiveComponent(t);return gr.createElement(b,{style:[g.Margin.mediumRight]},gr.createElement(n.Child,{size:E.S,style:[o.textMuted],hoverStyle:o.primary}))}c();async function Jx(e){let t=()=>{let n=e;for(;n&&(n=n.parentElement,!(n===document.querySelector("body")||n!=null&&n.hasAttribute("data-virtualparent"))););return n},o;return new Promise(n=>{let r=t();if(!r||!r.firstChild)return;let i=()=>{o.disconnect(),n()},a=!1;o=new IntersectionObserver(l=>{let[u]=l;u.isIntersecting&&requestAnimationFrame(()=>{i(),a=!0})},{rootMargin:"-50% 0% -50% 0%"});let s=()=>{yp(r,{scrollMode:"if-needed",block:"center",inline:"center",behavior:"smooth"}),setTimeout(()=>{a||s()},500)};s(),o.observe(r)})}c();var Wy=C(O());c();var qt=C(O());W();c();var Je=C(O());W();c();var Oe=C(O());W();var e1=Oe.forwardRef(function(t,o){let{command:n,query:r,active:i,executeCommand:a,onHoverIn:s}=t,[l,u]=R(D),[,d]=R(R6),[m,p]=an(!1),f=u.text,h=u.textMid,y=u.primary,w=l.colors.background.main;i&&(f=u.textStandout,h=u.textMid,w=l.colors.background.muted);let k=[u.Bold],x=Oe.useCallback(()=>{let _=a(n);_ instanceof Promise&&p(()=>_)},[n,a]),P=Oe.useCallback(()=>s(n),[n,s]),I=F.useInteractiveState({onHoverIn:P});return Oe.createElement(qn,{ref:o,component:We,...I.events,onMouseDown:_=>{_.preventDefault()},onPress:x,backgroundColor:w,style:[v.directionRow,v.alignCenter,d.commandItem,g.Margin.smallHorizontal,g.Padding.xsmallVertical,g.Padding.smallHorizontal,{height:Dy(n)}],testID:n.testID},m?Oe.createElement(b,{style:[g.Padding.mediumRight]},Oe.createElement(Ce,{size:"medium"})):n.icon?Oe.createElement(b,{style:[g.Padding.mediumRight]},Oe.createElement(Oe.Suspense,{fallback:Oe.createElement(b,{style:{width:E.ICON_M,height:E.ICON_M}})},Oe.createElement(n.icon,{size:E.ICON_M,style:y}))):null,Oe.createElement(b,{style:v.flex1},Oe.createElement(b,{style:v.directionRow},Oe.createElement(b,{style:v.flex1},n.title?Oe.createElement(b,null,Oe.createElement(A,{style:[u.Label,f,n.subtitle?u.Bold:u.Medium],numberOfLines:1},Oe.createElement(Cp,{query:r,text:n.title,highlight:k}))):null,n.subtitle?Oe.createElement(b,null,Oe.createElement(A,{style:[u.Caption,h],numberOfLines:1},Oe.createElement(Cp,{query:r,text:n.subtitle,highlight:k}))):null)),n.body?Oe.createElement(b,{style:[d.commandBody,g.Padding.smallLeft,g.Margin.smallTop]},n.body.map((_,M)=>Oe.createElement(b,{key:M},Oe.createElement(A,{style:[u.Caption,u.textMid],numberOfLines:1},Oe.createElement(Cp,{query:r,text:_,highlight:k}))))):null),n.label?Oe.createElement(b,null,Oe.createElement(Ck,{size:"medium",kind:n.label.kind,icon:n.label.icon},n.label.title)):Oe.createElement(Oe.Fragment,null,n.descendant?Oe.createElement(b,{style:[g.Padding.mediumLeft]},Oe.createElement(S.ChevronRight,{size:E.ICON_S,style:[u.textMuted]})):null,n.type===1?Oe.createElement(b,{style:[g.Padding.mediumLeft]},Oe.createElement(ja,{value:n.selected,onValueChange:x,size:E.ICON_S})):null,n.type===0?Oe.createElement(b,{style:[g.Padding.mediumLeft]},Oe.createElement(wp,{value:n.selected,onValueChange:x,size:E.ICON_S})):null,n.type===2?Oe.createElement(b,{style:[g.Padding.mediumLeft]},Oe.createElement(Sp,{value:n.enabled,onValueChange:()=>{}})):null))});function Dy(e){let t=0;return t+=2*g.small,t+=Math.max(e.title&&He.Label.lineHeight||0,e.icon?E.ICON_M:0,typeof e.selected=="boolean"||typeof e.enabled=="boolean"?E.ICON_S:0),e.subtitle&&(t+=He.Caption.lineHeight||0),e.body&&(t+=g.small,t+=e.body.length*(He.Caption.lineHeight||0)),t}var R6=z.create({commandItem:e=>({borderRadius:e.radiuses.medium}),commandBody:e=>({borderLeftWidth:1,borderLeftColor:e.colors.border.mid})});c();function qp({getItemHeight:e,getItemSeparatorHeight:t=()=>0,getSectionSeparatorHeight:o=()=>0,getSectionHeaderHeight:n=()=>0,getSectionFooterHeight:r=()=>0,listHeaderHeight:i=0,stickySectionHeadersEnabled:a}){return(s,l)=>{let u=0,d=typeof i=="function"?i():i,m=0,p=s.length;for(let f=0;f<p&&(m<l||f===0);f++){let h=s[f],y=s[f].data,w=y.length,k=s[f-1],x=s[f+1],P={section:h,index:f},I=o({section:h,index:f,leadingItem:void 0,trailingItem:y[0],leadingSection:k,trailingSection:x});d+=u+I+(a&&f===1?n({section:s[0],index:0}):0),u=a&&f===0?0:n(P),f!==0&&m++;for(let _=0;_<w&&(m<l||f===0&&_===0);_++){d+=u;let M=y[_],T=_>0&&_<w-1?t({item:M,section:h,index:_,leadingItem:y[_-1],trailingItem:y[_+1],leadingSection:k,trailingSection:x}):0;u=e({item:M,section:h,index:_})+T,m++}if(m<l&&(d+=o({section:h,index:f,leadingItem:y[y.length-1],trailingItem:void 0,leadingSection:k,trailingSection:x})),m<l){let _=o({section:h,index:f,leadingItem:y[y.length-1],trailingItem:void 0,leadingSection:k,trailingSection:x});d+=u+_,u=r(P),m++}}return{index:l,length:u,offset:d}}}function t1(e){var q;let{computed:{listId:t,items:o,sections:n,areMoreLoading:r},withKeyboardInteractions:i,palette:a,setPalette:s,setTopPalette:l}=e,u=ol(),d=Je.useRef(null),m=Hx(),p=Je.useCallback(async G=>{let U=await Xk(a,G);U?s(U):l(null)},[s,l]),f=Je.useCallback(G=>{s(U=>{if(!U)return null;let H=m(G),Y=Kk(U,G,H);return Y||(U.descendant?{...U,descendant:void 0}:U)})},[s,m]),h=Je.useCallback(()=>{s(G=>G!=null&&G.parent?null:G)},[s]),y=Je.useCallback(G=>{let U=-1;return{sectionIndex:n.findIndex(Y=>(U=Y.data.findIndex(oe=>oe.key===G),U>=0)),itemIndex:U,viewPosition:.5}},[n]),w=Je.useCallback(G=>{var U;return(U=d.current)==null?void 0:U.scrollToLocation(y(G.key))},[y]),k=Uk({active:i,items:o,onSelect:p,onOpen:f,onClose:h,scrollTo:w}),x=n.length>1,P=Je.useCallback(G=>{k.hoverItem(G),f(G)},[k.hoverItem,f]),I=Je.useMemo(()=>qp({getItemHeight:({item:G})=>Dy(G),getSectionSeparatorHeight:({section:G,leadingItem:U,leadingSection:H,trailingItem:Y,trailingSection:oe})=>H&&!U&&!G.group.title?2*(g.small-1)+1:oe&&!Y?E.S/4:0,getSectionHeaderHeight:({section:G})=>x&&G.group.title?E.S:0}),[x]),_=Je.useMemo(()=>x?({section:G})=>G.group.title?Je.createElement(T6,{group:G.group}):null:void 0,[x]),M=Je.useCallback(G=>Je.createElement(E6,{...G}),[]),T=Je.useCallback(({item:G})=>{var U;return Je.createElement(e1,{ref:m(G),active:u==="desktop"&&G.key===((U=k.cursor.current)==null?void 0:U.key),command:G,query:a.query.text,executeCommand:p,onHoverIn:P})},[p,m,(q=k.cursor.current)==null?void 0:q.key,P,u,a.query.text]),L=r;if(!L&&o.length===0){let G=a.placeholder||(Vu(a)?null:"No items found");return G?Je.createElement(P6,{placeholder:G}):null}return Je.createElement(b,{style:[v.flex1]},Je.createElement(gm,{key:t,ref:d,sections:n,extraData:k.cursor,getItemLayout:I,renderItem:T,SectionSeparatorComponent:M,renderSectionHeader:_,contentContainerStyle:[g.Padding.smallVertical],ListFooterComponent:L?Je.createElement(b,{style:[v.directionRow,v.justifyContentCenter,g.Padding.medium]},Je.createElement(Ce,{size:"large"})):null}))}function P6(e){let{placeholder:t}=e,[,o]=R(D);return Je.createElement(b,{style:[g.Padding.smallHorizontal,g.Padding.mediumVertical]},Je.createElement(b,{style:[g.Padding.mediumHorizontal]},Je.createElement(A,{style:[o.Caption,o.textMuted]},t)))}function T6(e){let{group:t}=e,[,o]=R(D);return Je.createElement(b,{style:[M6.paletteGroupHeader,v.directionRow,v.alignCenter,g.Padding.smallHorizontal]},Je.createElement(b,{style:[g.Padding.smallHorizontal]},Je.createElement(A,{style:[o.GroupTitle,o.textMuted]},t.title)))}function E6(e){let{leadingSection:t,section:o,leadingItem:n,trailingSection:r,trailingItem:i}=e,[,a]=R(L6);return t&&!n&&!o.group.title?Je.createElement(b,{style:a.paletteDividerUntitled}):(r&&!i&&(b,a.paletteDividerFooter),null)}var M6=X.create({paletteGroupHeader:{height:E.S}}),L6=z.create({paletteDividerUntitled:(e,t)=>({marginTop:g.small-1,marginBottom:g.small-1,borderTopColor:t.color==="light"?e.colors.border.mid:e.colors.sidebar.itemBorder,borderTopWidth:1}),paletteDividerFooter:{height:E.S/4}});c();var gl=C(O());W();function o1(e){let{error:t}=e,[,o]=R(D);return console.error(t),gl.createElement(b,{style:[v.directionRow,v.alignCenter,g.Padding.smallVertical,g.Padding.mediumHorizontal]},gl.createElement(b,{style:[g.Padding.mediumRight,g.Padding.xsmallTop]},gl.createElement(S.Warning,{size:E.ICON_S,style:o.danger})),gl.createElement(b,{style:[v.flex1,v.directionRow,v.alignCenter]},gl.createElement(A,{style:[o.danger,o.Label]},Ei(t))))}c();var $n=C(O());W();var n1=$n.forwardRef(function(t,o){let{palette:n,setPalette:r,withItems:i,placement:a}=t,[,s]=R(N6),[l,u]=R(D),[d,m]=Ai(n.query.text,[n]),p=h=>{m(h),r(y=>!n||!y?n:Ya({...y,descendant:void 0},h))},f=h=>{(h.nativeEvent.key==="Escape"||h.nativeEvent.key==="Backspace"&&n.query.text.length===0)&&r(null)};return $n.createElement(b,{style:i&&s.paletteInputWrapperWithBottomBorder},$n.createElement(b,{style:[v.directionRow,v.alignCenter]},n.parent&&a==="right"?$n.createElement(b,{style:[g.Padding.smallLeft]},$n.createElement(S.ChevronLeft,{size:E.ICON_M,style:u.textMuted})):null,$n.createElement(b,{style:[v.flex1,v.directionRow,v.alignCenter,s.paletteInput,g.Margin.small]},$n.createElement(b,{style:[v.flex1]},$n.createElement(Tr,{ref:o,value:d,placeholder:n.search,placeholderTextColor:l.colors.text.muted,onChangeText:p,onKeyPress:f,style:[u.Caption,u.text,g.Padding.mediumHorizontal,g.Padding.smallVertical]})),$n.createElement($.View,{mobileStyle:"visible",desktopStyle:"hidden",style:[g.Margin.smallHorizontal]},$n.createElement(B,{icon:S.X,size:"large",onPress:()=>r(null)}))),n.parent&&a==="left"?$n.createElement(b,{style:[g.Padding.smallRight]},$n.createElement(S.ChevronRight,{size:E.ICON_M,style:u.textMuted})):null))}),N6=z.create({paletteInputWrapperWithBottomBorder:(e,t)=>({borderBottomColor:t.color==="light"?e.colors.border.mid:e.colors.sidebar.itemBorder,borderBottomWidth:1}),paletteInput:e=>({backgroundColor:e.colors.background.muted,borderRadius:e.radiuses.large})});c();var hl=C(O());function r1(e){let[t,o]=hl.useState(!1),n=Ys(()=>new WeakMap),r=hl.useRef(null);return hl.useMemo(()=>{let i=[],a=[],s;e.groups.forEach(d=>{let m;try{m=D6(e,d)}catch(p){s=p;return}if(m instanceof Promise){let p=n.current.get(d);p&&i.push(p),a.push(m)}else m&&(n.current.set(d,m),i.push(m))});let l=i.filter(d=>d.data.length>0).sort((d,m)=>d.priority>m.priority?-1:d.priority<m.priority?1:0),u=l.reduce((d,m)=>(d.push(...m.data),d),[]);if(a.length>0){o(!0);let d=r.current=Promise.all(a);d.then(()=>{d===r.current&&(o(!1),r.current=null)}).catch(m=>bm(new Error(m)))}return{listId:Date.now(),items:u,sections:l,areMoreLoading:t,error:s}},[e.groups,e.query,t,n])}function D6(e,t){try{let o=typeof t.commands=="function"?t.commands(e):t.commands,n=typeof t.commands!="function"||t.commands.length===0,r=t.priority||5;if(n){let i=A6(e.query.text,o);r=i.reduce((a,s)=>typeof s.score<"u"?Math.max((1-s.score)*10,a):a,r),o=i.map(a=>a.item)}return{group:t,priority:r,data:o}}catch(o){if(o instanceof Promise)return o;throw o}}function A6(e,t){return e?new Jc(t,{threshold:.3,location:0,distance:100,shouldSort:!0,includeScore:!0,minMatchCharLength:1,isCaseSensitive:!1,keys:["title","keywords"]}).search(e):t.map(n=>({item:n,score:void 0}))}c();var zy=C(Im()),Kp=C(O());var Ay=204,Gp=246,By=384,B6=630,Hp=180,Xp=355;function i1(e,t,o){let n=Kp.useMemo(()=>W6(t,o),[t.position,!!t.parent,o]),r=Kp.useCallback(l=>z6(l,t.position),[t.position]),[i,a,s]=uk(e,r,n);return[i,a,s]}function z6(e,t){let o,n=(t==null?void 0:t.width)||"medium";switch(n){case"small":o={width:Ay,maxWidth:Ay,minWidth:Ay,minHeight:0,height:Hp,maxHeight:Xp};break;case"medium":o={width:Gp,maxWidth:Gp,minWidth:Gp,minHeight:0,height:Hp,maxHeight:Xp};break;case"large":o={width:By,maxWidth:By,minWidth:By,minHeight:0,height:Hp,maxHeight:Xp};break;case"anchor":let r=Math.max(Gp,e.width),i=(0,zy.default)(e.width,r,B6);o={width:(0,zy.default)(e.width,r,i),maxWidth:i,minWidth:r,minHeight:0,height:Hp,maxHeight:Xp};break;default:De(n)}return o}function W6(e,t){var n,r;let o={cover:(n=e.position)==null?void 0:n.cover,spacingWithAnchor:g.small};return e.parent?(o.offset={top:-g.small},o.spacingWithAnchor=g.medium,o.allowedPlacements=t==="left"?["left","right"]:["right","left"]):((r=e.position)==null?void 0:r.width)==="anchor"&&(o.allowedPlacements=["bottom","top"]),o}var F6=$.createResponsiveComponent(qn);function a1(e){let{paletteState:{palette:t},setPaletteState:o}=e,n=qt.useRef(null),[,r]=R(c1),i=()=>o(null),a=Ka(mi.fade),s=lk("OUTSIDE_CLICK");return Ha({opened:!0,closeOnEsc:!Vu(t),closeOnClick:!1,closeOnOutsideClick:!1,closeOnScroll:!1,onClose:i},n),ck(),qt.createElement(Gn,{ref:n},qt.createElement(no,{onPressIn:()=>{s&&i()}},qt.createElement(b,{ref:a,style:[r.paletteBackdrop]},qt.createElement(s1,{...e,setTopPaletteState:o}))))}function s1(e){let{paletteState:{palette:t,anchorRef:o},setPaletteState:n,setTopPaletteState:r,parentPlacement:i}=e,[a,s]=i1(o,t,i),l=Ka(mi.slideToL[s]);return qt.createElement(qt.Fragment,null,qt.createElement(V6,{ref:l,palette:t,setPalette:m=>{n(p=>{if(!p)return null;let f=typeof m=="function"?m(p.palette):m;return f?{...p,palette:f}:null})},setTopPalette:m=>{r(p=>{if(!p)return null;let f=typeof m=="function"?m(p.palette):m;return f?{...p,palette:f}:null})},positionStyle:a,placement:s}),t.descendant?qt.createElement(s1,{paletteState:t.descendant,setTopPaletteState:r,setPaletteState:m=>{n(p=>p?{...p,palette:{...p.palette,descendant:(typeof m=="function"?m(p.palette.descendant||null):m)||void 0}}:null)},parentPlacement:s}):null)}var V6=qt.forwardRef(function(t,o){let{palette:n,setPalette:r,setTopPalette:i,positionStyle:a,placement:s}=t,l=qt.useRef(null),[u,d]=R(c1),m=r1(n),p=!n.descendant;return qt.useEffect(()=>{if(n.descendant)return;let f=l.current;f&&(document.activeElement===f||(f.select(),f.focus()))},[n]),qt.createElement(no,{onPress:f=>f.preventDefault()},qt.createElement(F6,{ref:o,backgroundColor:u.colors.background.main,style:[d.palette],mobileStyle:d.paletteMobile,desktopStyle:[d.paletteInline,a],onStartShouldSetResponder:()=>!0},Vu(n)?qt.createElement(n1,{ref:l,palette:n,setPalette:r,withItems:m.items.length>0,placement:s}):null,m.error?qt.createElement(o1,{error:m.error}):qt.createElement(t1,{computed:m,palette:n,withKeyboardInteractions:p,setPalette:r,setTopPalette:i})))}),c1=z.create({paletteBackdrop:e=>({flexDirection:"row",alignItems:"flex-start",justifyContent:"center",position:"fixed",top:0,left:0,right:0,bottom:0,width:"100%",height:"100%",zIndex:100,backgroundColor:"transparent"}),palette:e=>({borderRadius:e.radiuses.xlarge,borderColor:e.colors.border.main,borderWidth:1,overflow:"hidden",...e.shadows.pop}),paletteMobile:{position:"absolute",marginTop:0,top:g.small,left:g.small,right:g.small,maxHeight:440,width:"auto",maxWidth:"100%",minWidth:"auto"},paletteInline:{position:"absolute"}});function l1(e){let[t,o]=Do(Hk);return Wy.createElement(cp,null,t?Wy.createElement(a1,{paletteState:t,setPaletteState:o}):null)}c();var u1=C(O());var q6=[Us["1f44d"],Us["1f389"],Us["1f604"],Us["1f602"],Us["1f44f"],Us["1f44e"]];function yl(e,t={}){let{withSearch:o=!0,max:n=5}=t;return ne({search:o?"Select an emoji\u2026":void 0,groups:[{key:"emojis",commands:r=>(r.query.text?Dp(r.query.text):q6).slice(0,n).map(a=>({key:a.code,title:a.shortname,icon:s=>u1.createElement(_o,{...s,code:a.code}),trigger:()=>e(a.code)}))}]})}c();var es=C(O());W();var xa=es.forwardRef(function(t,o){let{displayMode:n="inline",value:r,style:i,placeholder:a,readOnly:s,onChangeText:l,...u}=t,[d]=R(),m=!s&&l,p=es.useMemo(()=>m&&n==="inline"?bp(r||a||"",X.flatten([i])):0,[n,r,a,i,m]);if(!m){let f=es.createElement(A,{style:[i],selectable:!0},r);return n==="inline"?f:es.createElement(b,{style:d1.inputModeBlock},f)}return es.createElement(Tr,{ref:o,placeholderTextColor:d.colors.text.muted,...u,value:r,onChangeText:l,placeholder:a,style:[i,n==="inline"?{width:p}:d1.inputModeBlock]})}),d1=X.create({inputModeBlock:{width:"100%"}});c();var $p=[{key:"blue",color:K.primary.base,title:"Blue"},{key:"purple",color:K.violet.base,title:"Purple"},{key:"orange",color:K.orange.base,title:"Orange"},{key:"red",color:K.scarlet.base,title:"Red"},{key:"yellow",color:K.YELLOW,title:"Yellow"},{key:"green",color:K.green.base,title:"Green"}],Up=[{key:"blue",color:K.primary.xlight,title:"Blue"},{key:"purple",color:K.violet.xlight,title:"Purple"},{key:"orange",color:K.orange.xlight,title:"Orange"},{key:"red",color:K.scarlet.xlight,title:"Red"},{key:"yellow",color:K.YELLOW_XXLIGHT,title:"Yellow"},{key:"green",color:K.green.xlight,title:"Green"}],_q=[K.primary.light,K.violet.light,K.fuchsia.light,K.scarlet.light,K.orange.light,K.green.light];c();var Ve=C(O());W();c();var h1=9,Vy=Um.reduce((e,t)=>{let o=e.find(r=>r.key===t.category);if(!o)return console.warn("Unknown emoji category","emoji"),e;(!o.data.length||o.data[o.data.length-1].emojis.length===h1)&&o.data.push({key:"",emojis:[]});let n=o.data[o.data.length-1];return n.key+=t.code,n.emojis.push(t),e},[{key:"people",title:"People",Icon:S.EmojiReaction,data:[]},{key:"nature",title:"Nature",Icon:S.RoleEditor,data:[]},{key:"food",title:"Food",Icon:S.Food,data:[]},{key:"activity",title:"Activity",Icon:S.Music,data:[]},{key:"travel",title:"Travel",Icon:S.EmojiBike,data:[]},{key:"objects",title:"Objects",Icon:S.EmojiWatch,data:[]},{key:"symbols",title:"Symbols",Icon:S.HeartOutlined,data:[]},{key:"flags",title:"Flags",Icon:S.EmojiFlag,data:[]}]);function y1(e){let t=Dp(e);return{key:"search",title:"Results",data:Q6(t,h1),Icon:S.Search}}function Q6(e,t){let o=e.length;if(o===0)return[];let n=Math.ceil(o/t);return Array.from({length:n},(r,i)=>{let a=i*t,s=e.slice(a,a+t);return{key:s.map(l=>l.code).join("-"),emojis:s}})}function Yp(e){let{onPick:t,onRemove:o}=e,[n,r]=Ve.useState(""),[i,a]=Ve.useState(""),s=Ve.useRef(null);Ve.useEffect(()=>{let u=requestAnimationFrame(()=>{s.current&&s.current.focus()});return()=>{cancelAnimationFrame(u)}},[s]);let l=u=>{r(u),a(u)};return Ve.createElement(b,{style:Ku.emojiPicker},Ve.createElement(b,{style:[Ku.emojiPickerSearch,v.directionRow]},Ve.createElement(jt,{kind:"search",size:"medium",ref:s,icon:S.Search,placeholder:"Search",value:n,onChangeText:l,cleareable:!0,style:v.flex1}),o?Ve.createElement(B,{icon:S.Trashcan,onPress:o,title:"Remove Emoji",size:"medium",kind:"secondary",style:g.Margin.smallLeft}):null),Ve.createElement(tN,{query:i,onPick:t}))}var J6=qp({getItemHeight:()=>jp,getSectionHeaderHeight:()=>v1,stickySectionHeadersEnabled:!0}),eN=({section:e})=>Ve.createElement(oN,{category:e}),tN=Ve.memo(function(t){let{query:o,onPick:n}=t,r=Ve.useRef(null),i=o?[y1(o)]:Vy,a=l=>{r.current&&r.current.scrollToLocation({sectionIndex:l,itemIndex:0})},s=Ve.useCallback(({item:l})=>Ve.createElement(nN,{row:l,onPick:n}),[n]);return Ve.createElement(Ve.Fragment,null,!o&&Ve.createElement(b,{style:Ku.emojiPickerCategories},Vy.map((l,u)=>Ve.createElement(B,{key:l.key,icon:l.Icon,onPress:()=>{a(u)}}))),Ve.createElement(gm,{ref:r,sections:i,stickySectionHeadersEnabled:!0,renderItem:s,renderSectionHeader:eN,getItemLayout:J6}))}),oN=Ve.memo(function(t){let{category:o}=t,[,n]=R(b1),[,r]=R(D);return Ve.createElement(b,{style:[n.emojiCategoryHeader]},Ve.createElement(A,{style:[r.GroupTitle,r.text]},o.title))},(e,t)=>e.category.title===t.category.title),nN=Ve.memo(function(t){let{row:o,onPick:n}=t;return Ve.createElement(b,{style:Ku.emojiRow},o.emojis.map(r=>Ve.createElement(rN,{key:r.code,code:r.code,onPick:n})))},(e,t)=>e.row.key===t.row.key&&e.onPick===t.onPick),rN=Ve.memo(function(t){let{code:o,onPick:n}=t,[,r]=R(b1);return Ve.createElement(F.TouchableOpacity,{onPress:()=>n(o),style:[Ku.emojiItem],activeStyle:r.emojiItemHovered},Ve.createElement(_o,{code:o,size:24}))}),jp=40,v1=26,b1=z.create({emojiCategoryHeader:e=>({height:v1,backgroundColor:e.colors.background.main,paddingLeft:g.medium,paddingRight:g.medium,paddingTop:g.small,paddingBottom:g.small}),emojiItemHovered:e=>({backgroundColor:e.colors.itemHover})}),Ku=X.create({emojiPicker:{display:"flex",width:376,height:314},emojiPickerSearch:{padding:g.small},emojiPickerCategories:{display:"flex",flexDirection:"row",justifyContent:"space-between",padding:g.small,paddingBottom:0,paddingTop:0},emojiRow:{display:"flex",flexDirection:"row",paddingLeft:g.small,paddingRight:g.small},emojiItem:{width:jp,height:jp,borderRadius:jp,display:"flex",alignItems:"center",justifyContent:"center",outlineStyle:"none"}});c();var $u=C(O());c();var Oa=JSON.parse('{"container":"container_UPXwU","darkestParentBackground":"darkestParentBackground_8TVPV","darkParentBackground":"darkParentBackground_ziFwB","semiDarkParentBackground":"semiDarkParentBackground_wgu6B","mediumParentBackground":"mediumParentBackground_BIBSL","semiLightParentBackground":"semiLightParentBackground_Yx9Vw","lightParentBackground":"lightParentBackground_INb4a","lightestParentBackground":"lightestParentBackground_FL4je","toggle":"toggle_siihR","toggleLightMode":"toggleLightMode_-FLG4","toggleDarkMode":"toggleDarkMode_uS4t3","toggleSwitch":"toggleSwitch_NtUzX","toggleButton":"toggleButton_ePBfn","toggleIcon":"toggleIcon_-vIfn"}');function S1(e){let{onValueChange:t,value:o=!1,backgroundColor:n,mode:r="switch",accesibilityLabel:i="Switch to dark mode"}=e,a=()=>{t()},s=r==="switch"?o?S.ThemeDark.CSS:S.ThemeLight.CSS:o?S.ThemeLight.CSS:S.ThemeDark.CSS,l=Ap(n);return r==="switch"?$u.default.createElement(Z,{as:"button",type:"button",role:"switch","aria-label":i,"aria-checked":o,onClick:a,style:[Oa.container,Oa[`${l}ParentBackground`]]},$u.default.createElement(Z,{style:[Oa.toggle,Oa.toggleSwitch,N.backgroundColor.main,N.margin.xsmall,o?Oa.toggleDarkMode:Oa.toggleLightMode]},$u.default.createElement(s,{style:[Oa.toggleIcon,N.padding.xsmall]}))):$u.default.createElement(lo,{label:i,role:"switch",iconOnly:!0,leadingIcon:s,rounded:!0,style:Oa.toggleButton,kind:"muted",onClick:a,"aria-checked":o,"aria-label":i,preventFocusOnPress:!0})}c();c();c();function Uu(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var yt=C(O(),1);c();var bl=C(O(),1);var _a=typeof window<"u"?bl.default.useLayoutEffect:()=>{};function Qp(e){if(aN())e.focus({preventScroll:!0});else{let t=sN(e);e.focus(),cN(t)}}var Zp=null;function aN(){if(Zp==null){Zp=!1;try{var e=document.createElement("div");e.focus({get preventScroll(){return Zp=!0,!0}})}catch(t){}}return Zp}function sN(e){for(var t=e.parentNode,o=[],n=document.scrollingElement||document.documentElement;t instanceof HTMLElement&&t!==n;)(t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth)&&o.push({element:t,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}),t=t.parentNode;return n instanceof HTMLElement&&o.push({element:n,scrollTop:n.scrollTop,scrollLeft:n.scrollLeft}),o}function cN(e){for(let{element:t,scrollTop:o,scrollLeft:n}of e)t.scrollTop=o,t.scrollLeft=n}var vl=new Map,qy=new Set;function w1(){if(typeof window>"u")return;let e=o=>{let n=vl.get(o.target);n||(n=new Set,vl.set(o.target,n),o.target.addEventListener("transitioncancel",t)),n.add(o.propertyName)},t=o=>{let n=vl.get(o.target);if(n&&(n.delete(o.propertyName),n.size===0&&(o.target.removeEventListener("transitioncancel",t),vl.delete(o.target)),vl.size===0)){for(let r of qy)r();qy.clear()}};document.body.addEventListener("transitionrun",e),document.body.addEventListener("transitionend",t)}typeof document<"u"&&(document.readyState!=="loading"?w1():document.addEventListener("DOMContentLoaded",w1));function Gy(e){requestAnimationFrame(()=>{vl.size===0?e():qy.add(e)})}var lG=typeof window<"u"&&window.visualViewport;function lN(e){var t;return typeof window>"u"||window.navigator==null?!1:((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.brands.some(o=>e.test(o.brand)))||e.test(window.navigator.userAgent)}function uN(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function C1(){return uN(/^Mac/i)}function dN(){return lN(/Android/i)}function k1(e){return e.mozInputSource===0&&e.isTrusted?!0:dN()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}c();var ts=C(O(),1);var fN=ts.default.createContext(null);fN.displayName="PressResponderContext";var ju=null,gN=new Set,x1=!1,nc=!1,Hy=!1;function Xy(e,t){for(let o of gN)o(e,t)}function hN(e){return!(e.metaKey||!C1()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function O1(e){nc=!0,hN(e)&&(ju="keyboard",Xy("keyboard",e))}function Sl(e){ju="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(nc=!0,Xy("pointer",e))}function yN(e){k1(e)&&(nc=!0,ju="virtual")}function vN(e){e.target===window||e.target===document||(!nc&&!Hy&&(ju="virtual",Xy("virtual",e)),nc=!1,Hy=!1)}function bN(){nc=!1,Hy=!0}function _1(){if(typeof window>"u"||x1)return;let e=HTMLElement.prototype.focus;HTMLElement.prototype.focus=function(){nc=!0,e.apply(this,arguments)},document.addEventListener("keydown",O1,!0),document.addEventListener("keyup",O1,!0),document.addEventListener("click",yN,!0),window.addEventListener("focus",vN,!0),window.addEventListener("blur",bN,!1),typeof PointerEvent<"u"?(document.addEventListener("pointerdown",Sl,!0),document.addEventListener("pointermove",Sl,!0),document.addEventListener("pointerup",Sl,!0)):(document.addEventListener("mousedown",Sl,!0),document.addEventListener("mousemove",Sl,!0),document.addEventListener("mouseup",Sl,!0)),x1=!0}typeof document<"u"&&(document.readyState!=="loading"?_1():document.addEventListener("DOMContentLoaded",_1));function I1(){return ju}function SN(e){if(I1()==="virtual"){let t=document.activeElement;Gy(()=>{document.activeElement===t&&document.contains(e)&&Qp(e)})}else Qp(e)}function wN(e){if(!(e instanceof HTMLElement)&&!(e instanceof SVGElement))return!1;let{display:t,visibility:o}=e.style,n=t!=="none"&&o!=="hidden"&&o!=="collapse";if(n){let{getComputedStyle:r}=e.ownerDocument.defaultView,{display:i,visibility:a}=r(e);n=i!=="none"&&a!=="hidden"&&a!=="collapse"}return n}function CN(e,t){return!e.hasAttribute("hidden")&&(e.nodeName==="DETAILS"&&t&&t.nodeName!=="SUMMARY"?e.hasAttribute("open"):!0)}function R1(e,t){return e.nodeName!=="#comment"&&wN(e)&&CN(e,t)&&(!e.parentElement||R1(e.parentElement,e))}var Ky=yt.default.createContext(null),_t=null;function P1(e){let{children:t,contain:o,restoreFocus:n,autoFocus:r}=e,i=(0,yt.useRef)(),a=(0,yt.useRef)(),s=(0,yt.useRef)([]),{parentNode:l}=(0,yt.useContext)(Ky)||{},u=(0,yt.useMemo)(()=>new Zu({scopeRef:s}),[s]);_a(()=>{let p=l||Yt.root;if(Yt.getTreeNode(p.scopeRef)&&_t&&!ef(_t,p.scopeRef)){let f=Yt.getTreeNode(_t);f&&(p=f)}p.addChild(u),Yt.addNode(u)},[u,l]),_a(()=>{let p=Yt.getTreeNode(s);p.contain=o},[o]),_a(()=>{let p=i.current.nextSibling,f=[];for(;p&&p!==a.current;)f.push(p),p=p.nextSibling;s.current=f},[t]),RN(s,n,o),_N(s,o),TN(s,n,o),IN(s,r),(0,yt.useEffect)(()=>{if(s){let p=document.activeElement,f=null;if(cn(p,s.current)){for(let h of Yt.traverse())cn(p,h.scopeRef.current)&&(f=h);f===Yt.getTreeNode(s)&&(_t=f.scopeRef)}return()=>{let h=Yt.getTreeNode(s).parent.scopeRef;(s===_t||ef(s,_t))&&(!h||Yt.getTreeNode(h))&&(_t=h),Yt.removeTreeNode(s)}}},[s]);let d=(0,yt.useMemo)(()=>kN(s),[]),m=(0,yt.useMemo)(()=>({focusManager:d,parentNode:u}),[u,d]);return yt.default.createElement(Ky.Provider,{value:m},yt.default.createElement("span",{"data-focus-scope-start":!0,hidden:!0,ref:i}),t,yt.default.createElement("span",{"data-focus-scope-end":!0,hidden:!0,ref:a}))}function T1(){var e;return(e=(0,yt.useContext)(Ky))===null||e===void 0?void 0:e.focusManager}function kN(e){return{focusNext(t={}){let o=e.current,{from:n,tabbable:r,wrap:i,accept:a}=t,s=n||document.activeElement,l=o[0].previousElementSibling,u=os(rc(o),{tabbable:r,accept:a},o);u.currentNode=cn(s,o)?s:l;let d=u.nextNode();return!d&&i&&(u.currentNode=l,d=u.nextNode()),d&&Ia(d,!0),d},focusPrevious(t={}){let o=e.current,{from:n,tabbable:r,wrap:i,accept:a}=t,s=n||document.activeElement,l=o[o.length-1].nextElementSibling,u=os(rc(o),{tabbable:r,accept:a},o);u.currentNode=cn(s,o)?s:l;let d=u.previousNode();return!d&&i&&(u.currentNode=l,d=u.previousNode()),d&&Ia(d,!0),d},focusFirst(t={}){let o=e.current,{tabbable:n,accept:r}=t,i=os(rc(o),{tabbable:n,accept:r},o);i.currentNode=o[0].previousElementSibling;let a=i.nextNode();return a&&Ia(a,!0),a},focusLast(t={}){let o=e.current,{tabbable:n,accept:r}=t,i=os(rc(o),{tabbable:n,accept:r},o);i.currentNode=o[o.length-1].nextElementSibling;let a=i.previousNode();return a&&Ia(a,!0),a}}}var Uy=["input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[contenteditable]"],xN=Uy.join(":not([hidden]),")+",[tabindex]:not([disabled]):not([hidden])";Uy.push('[tabindex]:not([tabindex="-1"]):not([disabled])');var ON=Uy.join(':not([hidden]):not([tabindex="-1"]),');function rc(e){return e[0].parentElement}function Jp(e){let t=Yt.getTreeNode(_t);for(;t&&t.scopeRef!==e;){if(t.contain)return!1;t=t.parent}return!0}function _N(e,t){let o=(0,yt.useRef)(),n=(0,yt.useRef)(null);_a(()=>{let r=e.current;if(!t){n.current&&(cancelAnimationFrame(n.current),n.current=null);return}let i=l=>{if(l.key!=="Tab"||l.altKey||l.ctrlKey||l.metaKey||!Jp(e))return;let u=document.activeElement,d=e.current;if(!cn(u,d))return;let m=os(rc(d),{tabbable:!0},d);m.currentNode=u;let p=l.shiftKey?m.previousNode():m.nextNode();p||(m.currentNode=l.shiftKey?d[d.length-1].nextElementSibling:d[0].previousElementSibling,p=l.shiftKey?m.previousNode():m.nextNode()),l.preventDefault(),p&&Ia(p,!0)},a=l=>{(!_t||ef(_t,e))&&cn(l.target,e.current)?(_t=e,o.current=l.target):Jp(e)&&!$y(l.target,e)?o.current?o.current.focus():_t&&tf(_t.current):Jp(e)&&(o.current=l.target)},s=l=>{n.current&&cancelAnimationFrame(n.current),n.current=requestAnimationFrame(()=>{Jp(e)&&!$y(document.activeElement,e)&&(_t=e,document.body.contains(l.target)?(o.current=l.target,o.current.focus()):_t&&tf(_t.current))})};return document.addEventListener("keydown",i,!1),document.addEventListener("focusin",a,!1),r.forEach(l=>l.addEventListener("focusin",a,!1)),r.forEach(l=>l.addEventListener("focusout",s,!1)),()=>{document.removeEventListener("keydown",i,!1),document.removeEventListener("focusin",a,!1),r.forEach(l=>l.removeEventListener("focusin",a,!1)),r.forEach(l=>l.removeEventListener("focusout",s,!1))}},[e,t]),(0,yt.useEffect)(()=>()=>{n.current&&cancelAnimationFrame(n.current)},[n])}function E1(e){return $y(e)}function cn(e,t){return t.some(o=>o.contains(e))}function $y(e,t=null){if(e instanceof Element&&e.closest("[data-react-aria-top-layer]"))return!0;for(let{scopeRef:o}of Yt.traverse(Yt.getTreeNode(t)))if(cn(e,o.current))return!0;return!1}function ef(e,t){var o;let n=(o=Yt.getTreeNode(t))===null||o===void 0?void 0:o.parent;for(;n;){if(n.scopeRef===e)return!0;n=n.parent}return!1}function Ia(e,t=!1){if(e!=null&&!t)try{SN(e)}catch(o){}else if(e!=null)try{e.focus()}catch(o){}}function tf(e,t=!0){let o=e[0].previousElementSibling,n=os(rc(e),{tabbable:t},e);n.currentNode=o;let r=n.nextNode();t&&!r&&(n=os(rc(e),{tabbable:!1},e),n.currentNode=o,r=n.nextNode()),Ia(r)}function IN(e,t){let o=yt.default.useRef(t);(0,yt.useEffect)(()=>{o.current&&(_t=e,cn(document.activeElement,_t.current)||tf(e.current)),o.current=!1},[e])}function RN(e,t,o){_a(()=>{if(t||o)return;let n=e.current,r=i=>{let a=i.target;cn(a,e.current)?_t=e:E1(a)||(_t=null)};return document.addEventListener("focusin",r,!1),n.forEach(i=>i.addEventListener("focusin",r,!1)),()=>{document.removeEventListener("focusin",r,!1),n.forEach(i=>i.removeEventListener("focusin",r,!1))}},[e,t,o])}function PN(e){let t=Yt.getTreeNode(_t);for(;t&&t.scopeRef!==e;){if(t.nodeToRestore)return!1;t=t.parent}return(t==null?void 0:t.scopeRef)===e}function TN(e,t,o){let n=(0,yt.useRef)(typeof document<"u"?document.activeElement:null);_a(()=>{let r=e.current;if(!t||o)return;let i=()=>{(!_t||ef(_t,e))&&cn(document.activeElement,e.current)&&(_t=e)};return document.addEventListener("focusin",i,!1),r.forEach(a=>a.addEventListener("focusin",i,!1)),()=>{document.removeEventListener("focusin",i,!1),r.forEach(a=>a.removeEventListener("focusin",i,!1))}},[e,o]),_a(()=>{if(!t)return;Yt.getTreeNode(e).nodeToRestore=n.current;let r=i=>{if(i.key!=="Tab"||i.altKey||i.ctrlKey||i.metaKey)return;let a=document.activeElement;if(!cn(a,e.current))return;let s=Yt.getTreeNode(e).nodeToRestore,l=os(document.body,{tabbable:!0});l.currentNode=a;let u=i.shiftKey?l.previousNode():l.nextNode();if((!document.body.contains(s)||s===document.body)&&(s=null,Yt.getTreeNode(e).nodeToRestore=null),(!u||!cn(u,e.current))&&s){l.currentNode=s;do u=i.shiftKey?l.previousNode():l.nextNode();while(cn(u,e.current));i.preventDefault(),i.stopPropagation(),u?Ia(u,!0):E1(s)?Ia(s,!0):a.blur()}};return o||document.addEventListener("keydown",r,!0),()=>{o||document.removeEventListener("keydown",r,!0);let i=Yt.getTreeNode(e).nodeToRestore;if(t&&i&&(cn(document.activeElement,e.current)||document.activeElement===document.body&&PN(e))){let a=Yt.clone();requestAnimationFrame(()=>{if(document.activeElement===document.body){let s=a.getTreeNode(e);for(;s;){if(s.nodeToRestore&&document.body.contains(s.nodeToRestore)){Ia(s.nodeToRestore);return}s=s.parent}for(s=a.getTreeNode(e);s;){if(s.scopeRef&&Yt.getTreeNode(s.scopeRef)){tf(s.scopeRef.current,!0);return}s=s.parent}}})}}},[e,t,o])}function os(e,t,o){let n=t!=null&&t.tabbable?ON:xN,r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode(i){var a;return!(t==null||(a=t.from)===null||a===void 0)&&a.contains(i)?NodeFilter.FILTER_REJECT:i.matches(n)&&R1(i)&&(!o||cn(i,o))&&(!(t!=null&&t.accept)||t.accept(i))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});return t!=null&&t.from&&(r.currentNode=t.from),r}var Yu=class{get size(){return this.fastMap.size}getTreeNode(t){return this.fastMap.get(t)}addTreeNode(t,o,n){let r=this.fastMap.get(o!=null?o:null),i=new Zu({scopeRef:t});r.addChild(i),i.parent=r,this.fastMap.set(t,i),n&&(i.nodeToRestore=n)}addNode(t){this.fastMap.set(t.scopeRef,t)}removeTreeNode(t){if(t===null)return;let o=this.fastMap.get(t),n=o.parent;for(let i of this.traverse())i!==o&&o.nodeToRestore&&i.nodeToRestore&&o.scopeRef.current&&cn(i.nodeToRestore,o.scopeRef.current)&&(i.nodeToRestore=o.nodeToRestore);let r=o.children;n.removeChild(o),r.size>0&&r.forEach(i=>n.addChild(i)),this.fastMap.delete(o.scopeRef)}*traverse(t=this.root){if(t.scopeRef!=null&&(yield t),t.children.size>0)for(let o of t.children)yield*this.traverse(o)}clone(){let t=new Yu;for(let o of this.traverse())t.addTreeNode(o.scopeRef,o.parent.scopeRef,o.nodeToRestore);return t}constructor(){Uu(this,"fastMap",new Map),this.root=new Zu({scopeRef:null}),this.fastMap.set(null,this.root)}},Zu=class{addChild(t){this.children.add(t),t.parent=this}removeChild(t){this.children.delete(t),t.parent=void 0}constructor(t){Uu(this,"children",new Set),Uu(this,"contain",!1),this.scopeRef=t.scopeRef}},Yt=new Yu;var Wr=C(O());c();var jy=JSON.parse('{"toolbar":"toolbar_hJES6","toolbarGroup":"toolbarGroup_mD69e"}');var M1=Wr.default.forwardRef(function(t,o){let{disabled:n=!1,orientation:r="horizontal",children:i,onTabToExit:a}=t;return Wr.default.createElement(Z,{role:"toolbar",style:jy.toolbar,ref:o,"aria-orientation":r},Wr.default.createElement(P1,{restoreFocus:!0},Wr.default.createElement(EN,{disabled:n,orientation:r,onTabToExit:a},i)))});function EN(e){let{children:t,disabled:o,orientation:n,onTabToExit:r}=e,i=T1();return Wr.default.createElement(Wr.default.Fragment,null,Wr.default.Children.map(t,a=>{var s,l,u;return a?typeof a=="object"?Wr.default.cloneElement(a,{onKeyDown(d){var p;let m={ArrowLeft:()=>{n==="horizontal"&&(i.focusPrevious(),d.preventDefault())},ArrowRight:()=>{n==="horizontal"&&(i.focusNext(),d.preventDefault())},ArrowUp:()=>{n==="vertical"&&(i.focusPrevious(),d.preventDefault())},ArrowDown:()=>{n==="vertical"&&(i.focusNext(),d.preventDefault())},Home:()=>{i.focusFirst(),d.preventDefault()},End:()=>{i.focusLast(),d.preventDefault()},Tab:()=>{r==null||r(d.shiftKey),d.preventDefault()}};(p=m[d.key])==null||p.call(m)},kind:(l=(s=a.props)==null?void 0:s.kind)!=null?l:"menuitem",disabled:((u=a.props)==null?void 0:u.disabled)||o}):a:null}))}function Qu(e){let{onKeyDown:t,label:o,disabled:n=!1,children:r}=e;return Wr.default.createElement(Z,{role:"group",as:"span",style:jy.toolbarGroup,"aria-label":o},Wr.default.Children.map(r,i=>{var a;return i?Wr.default.cloneElement(i,{onKeyDown:t,kind:(a=i.props.kind)!=null?a:"menuitem",disabled:i.props.disabled||n}):null}))}c();var wl=C(O());function L1(e){let{children:t,...o}=e;return wl.createElement(rk,null,wl.createElement(Sk,null,wl.createElement(fk,null,wl.createElement(l1,{...o}),wl.createElement(Qx,null),t)))}c();var Cl=C(O());c();var ns=JSON.parse('{"buttonTabs":"buttonTabs_ihLP4","buttonTabsItem":"buttonTabsItem_9vRT7","buttonTabsItemActive":"buttonTabsItemActive_PnjM4","buttonTabsItemIcon":"buttonTabsItemIcon_wUvLo","buttonTabsItemText":"buttonTabsItemText_Oa-uN","buttonTabsSizeMedium":"buttonTabsSizeMedium_Cra41","buttonTabsItemDisabled":"buttonTabsItemDisabled_XW4rD"}');function N1(e){let{tabs:t,activeTab:o,onPress:n,size:r="medium"}=e;return Cl.createElement(Z,{style:[ns.buttonTabs,r==="medium"&&ns.buttonTabsSizeMedium]},t.map(i=>{let a=o===i.key,s=i.icon;return Cl.createElement(Xn,{key:i.key,tooltip:i.tooltip},(l,u)=>Cl.createElement(ex,{ref:u,onPress:()=>{i.disabled||n(i.key)},style:[ns.buttonTabsItem,{[ns.buttonTabsItemActive]:a,[ns.buttonTabsItemDisabled]:i.disabled}],...l.domEvents},s?Cl.createElement(s,{style:ns.buttonTabsItemIcon}):null,i.label?Cl.createElement(Hn,{style:[ns.buttonTabsItemText]},i.label):null))}))}c();var Ju=C(O());c();var Yy=JSON.parse('{"grabber":"grabber_p72PX","grabberIcon":"grabberIcon_ebrbU"}');var D1=Ju.forwardRef(function(t,o){let{style:n,size:r="small"}=t;return Ju.createElement(Z,{ref:o,style:[n,Yy.grabber]},Ju.createElement(S.GrabberVertical.CSS,{style:[Yy.grabberIcon,N.icons[r]]}))});c();var of=C(O());var A1=lt("auth"),Zy=JC(e=>{let{customToken:t,waitUserReady:o=!0}=e;if(typeof window>"u")throw new Error("initializeAuth should not be called during SSR");return!t&&!o?{customToken:t}:new ni("auth.initialize").wrap(async()=>{if(t)try{A1.info("authenticating with custom token before subscribing to auth"),await Ws.auth().signInWithCustomToken(t)}catch(r){A1.critical("Error during auth with custom token",r)}return o!==!1&&await new Promise((r,i)=>{let a=Ws.auth().onAuthStateChanged(()=>{a(),r()},i)}),{customToken:t}})});function B1(e){return Zy.readAsync(e)}function nf(e){let{children:t}=e;if(typeof window<"u"){if(Zy.state==="unstarted")throw new Error("initializeAuth should have been called before useWaitFirebaseAuth");Zy.read({})}return of.createElement(of.Fragment,null,t)}c();c();c();function kl(){return kl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},kl.apply(this,arguments)}var xl;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(xl||(xl={}));var z1=function(e){return e};var W1="beforeunload";var MN="popstate";function q1(e){e===void 0&&(e={});var t=e,o=t.window,n=o===void 0?document.defaultView:o,r=n.history;function i(){var T=n.location,L=T.pathname,q=T.search,G=T.hash,U=r.state||{};return[U.idx,z1({pathname:L,search:q,hash:G,state:U.usr||null,key:U.key||"default"})]}var a=null;function s(){if(a)f.call(a),a=null;else{var T=xl.Pop,L=i(),q=L[0],G=L[1];if(f.length){if(q!=null){var U=d-q;U&&(a={action:T,location:G,retry:function(){_(U*-1)}},_(U))}}else x(T)}}n.addEventListener(MN,s);var l=xl.Pop,u=i(),d=u[0],m=u[1],p=V1(),f=V1();d==null&&(d=0,r.replaceState(kl({},r.state,{idx:d}),""));function h(T){return typeof T=="string"?T:Qy(T)}function y(T,L){return L===void 0&&(L=null),z1(kl({pathname:m.pathname,hash:"",search:""},typeof T=="string"?Jy(T):T,{state:L,key:LN()}))}function w(T,L){return[{usr:T.state,key:T.key,idx:L},h(T)]}function k(T,L,q){return!f.length||(f.call({action:T,location:L,retry:q}),!1)}function x(T){l=T;var L=i();d=L[0],m=L[1],p.call({action:l,location:m})}function P(T,L){var q=xl.Push,G=y(T,L);function U(){P(T,L)}if(k(q,G,U)){var H=w(G,d+1),Y=H[0],oe=H[1];try{r.pushState(Y,"",oe)}catch(ce){n.location.assign(oe)}x(q)}}function I(T,L){var q=xl.Replace,G=y(T,L);function U(){I(T,L)}if(k(q,G,U)){var H=w(G,d),Y=H[0],oe=H[1];r.replaceState(Y,"",oe),x(q)}}function _(T){r.go(T)}var M={get action(){return l},get location(){return m},createHref:h,push:P,replace:I,go:_,back:function(){_(-1)},forward:function(){_(1)},listen:function(L){return p.push(L)},block:function(L){var q=f.push(L);return f.length===1&&n.addEventListener(W1,F1),function(){q(),f.length||n.removeEventListener(W1,F1)}}};return M}function F1(e){e.preventDefault(),e.returnValue=""}function V1(){var e=[];return{get length(){return e.length},push:function(o){return e.push(o),function(){e=e.filter(function(n){return n!==o})}},call:function(o){e.forEach(function(n){return n&&n(o)})}}}function LN(){return Math.random().toString(36).substr(2,8)}function Qy(e){var t=e.pathname,o=t===void 0?"/":t,n=e.search,r=n===void 0?"":n,i=e.hash,a=i===void 0?"":i;return r&&r!=="?"&&(o+=r.charAt(0)==="?"?r:"?"+r),a&&a!=="#"&&(o+=a.charAt(0)==="#"?a:"#"+a),o}function Jy(e){var t={};if(e){var o=e.indexOf("#");o>=0&&(t.hash=e.substr(o),e=e.substr(0,o));var n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}var ev=lt("history");function G1(){let e=q1(),t=[],o=!1,n=()=>{let i=t.shift();return i?(i(),!1):!0},r=i=>{o?t.push(i):i()};return{get location(){return e.location},listen:i=>e.listen(a=>{i({location:a.location,action:a.action})}),push:i=>{let{state:a,...s}=i;r(()=>{ev.info("push",s,a),e.push(s,a)})},replace:i=>{let{state:a,...s}=i;r(()=>{ev.info("replace",s,a),e.replace(s,a)})},go:i=>{r(()=>{ev.info("go",i),e.go(i)})},transaction:i=>{if(o)i();else{let a=e.listen(()=>{n()&&a()});o=!0,i(),o=!1,n()&&a()}}}}c();function X1(e){let{basename:t="",location:o="/",context:n}=e,r=(a,s)=>{n.action=s,n.location=NN(t,H1(a)),n.url=Qy(n.location)};return{staticContext:n,location:DN(t,H1(Jy(o))),push:a=>{r(a,"PUSH")},replace:a=>{r(a,"REPLACE")},go:()=>{},listen:()=>()=>{},transaction:a=>{a()}}}function K1(e){return e.charAt(0)==="/"?e:`/${e}`}function NN(e,t){return e?{...t,pathname:K1(e)+t.pathname}:t}function DN(e,t){if(!e||!t.pathname)return t;let o=K1(e);return t.pathname.indexOf(o)!==0?t:{...t,pathname:t.pathname.substr(o.length)}}function H1(e){let t={hash:"",search:"",pathname:"",...e,key:"",state:void 0};return t.search&&t.search.charAt(0)!=="?"&&(t.search=`?${t.search}`),t.hash&&t.hash.charAt(0)!=="#"&&(t.hash=`#${t.hash}`),t}c();var ic=C(O()),$1=C(bk());function tv(e){let{history:t,children:o}=e,n=ic.useMemo(()=>t||G1(),[t]),r=ic.useMemo(()=>({getCurrentValue:()=>n.location,subscribe:a=>n.listen(a)}),[n]),i=(0,$1.useSubscription)(r);return ic.createElement(ax.Provider,{value:n},ic.createElement(sx.Provider,{value:i},o))}function U1(e){let{children:t,...o}=e,n=X1(o);return ic.createElement(tv,{history:n},t)}c();var ov=C(O());function j1(e,t){var l,u;let{navigate:o}=ve(),n=qi(),r=EC(e),i=(0,ov.useCallback)(d=>o({screen:{sideSheet:{type:e,tab:d}}},{replace:!0}),[o,e]),a=(0,ov.useCallback)(()=>o({screen:{sideSheet:void 0}}),[o]),s=(l="sideSheet"in n.screen&&n.screen.sideSheet&&"tab"in n.screen.sideSheet&&n.screen.sideSheet.tab?n.screen.sideSheet.tab:t)!=null?l:r[0];return{opened:"sideSheet"in n.screen&&((u=n.screen.sideSheet)==null?void 0:u.type)===e,selectedTab:s,changeSelectedTab:i,close:a}}c();var AN=ct({key:"firestoreReacheable",default:!0,effects:[e=>{typeof window>"u"||fetch("https://firestore.googleapis.com/$discovery/rest").catch(()=>{e.setSelf(!1)})}]});function Y1(){return Xo(AN)}c();function BN(e){var t;return e.themePreset?K.PRIMARY:(t=e.primaryColor)!=null?t:K.PRIMARY}function zN(e,t,o){let n=K.WHITE,r=K.darkModeGreyScale.dark;switch(e){case"default":return t==="dark"?r:n;case"bold":return o;case"contrast":return t==="dark"?n:r;case"custom":return K.fuchsia.light;default:De(e)}}function WN(e,t,o){switch(e){case"default":case"contrast":return t;case"bold":case"custom":return Gi(o)==="light"?K.lightModeText.base:K.darkModeText.base;default:De(e)}}function Z1(e){return Nw(e.headerTheme,e.themeMode)==="none"}function FN(e,t){var f;let{primaryColor:o,headerBackgroundColor:n,headerLinksColor:r}=((f=e.themeCustomizations)==null?void 0:f[t])||{},a=Z1(e)?"default":ri(e),s=BN(e),l=o!=null?o:s,u=zN(a,t,l),d=n!=null?n:u,m=WN(a,l,d),p=r!=null?r:m;return{primaryColor:l,headerBackgroundColor:d,headerLinksColor:p}}function VN(e,t){var i,a,s;let o=(i=t!=null?t:e.themeMode)!=null?i:Pu,{headerLogoURL:n,footerLogoURL:r}=((a=e.themeCustomizations)==null?void 0:a[o])||{};return{headerLogoURL:n!=null?n:e.logoURL,footerLogoURL:r!=null?r:(s=e.footer)==null?void 0:s.logoURL}}function rf(e,t){var n;let o=(n=t!=null?t:e.themeMode)!=null?n:Pu;return{...FN(e,o),...VN(e,o),headerDisabled:Z1(e)}}c();var Q1=C(O());var qN=lt("app:events"),GN=e=>(e[0]==='"'&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent));function HN(){let e=document.cookie?document.cookie.split("; "):[],t={};for(let o=0;o<e.length;o++){let n=e[o].split("="),r=n.slice(1).join("=");try{let i=decodeURIComponent(n[0]);t[i]=GN(r)}catch(i){qN.warning(`Couldn't parse cookie ${e[o]}. Error: `,i)}}return t}function J1(e,t){return Q1.useEffect(()=>{XN(e,t)},[e.key,t]),null}async function XN(e,t){if(!e.integrations||!t)return;let o=await YC(),n=HN(),r=window.location.href,i=document.referrer,a=window.navigator.userAgent;(await Ja()).analytics.trackViewInSpaceById(e.key,{pageId:t,visitor:{anonymousId:o,cookies:n,userAgent:a},url:r,referrer:i})}c();function eO(e,t){let o=t.type==="space"&&typeof t.changeRequest=="string"?t.changeRequest:void 0;return xx(e,o)}c();var tO=C(O());function nv(e){let t=rv(e);return nO(e),t}function oO(e,t){let o=tO.useRef(new Map),[n,r]=rO([e,o.current.get(t)||null]);if(nO([e]),!n)return null;switch(n.state){case"live":case"cached":return o.current.set(t,e),n.result;case"failed":throw n.error;case"pending":if(r&&r.state==="live")return r.result;throw n.pending;default:De(n)}}function nO(e){let t=Ep(e.map(o=>o?qm(o.spaceKey,o.sheetKey):null));px(e.map((o,n)=>{if(!o)return[];let r=t[n],i=r==null?void 0:r.result,a=(i==null?void 0:i.chunks)||[];return[qm(o.spaceKey,o.sheetKey),...a.map(s=>_y(o.spaceKey,o.sheetKey,s))]}).flat())}function rO(e){return e.map(t=>{if(!t)return null;let[o]=Ep([qm(t.spaceKey,t.sheetKey)]);if(o.state==="failed"||o.state==="pending"||!o.result||!o.result.chunks)return o;let n=Ep(o.result.chunks.map(s=>_y(t.spaceKey,t.sheetKey,s))),r=[],i=[];if(n.forEach(s=>{if(s.state==="pending")r.push(s.pending);else{if(s.state==="failed")throw s.error;if(s.result)i.push(s.result);else throw new Error("Chunk not found")}}),r.length>0)return{state:"pending",pending:Promise.all(r).then(()=>null)};let a=CC({sheet:o.result,chunks:i});return{state:o.state,result:a}})}function KN(e){return rO(e).map(o=>{if(!o)return null;if(o.state==="pending")throw o==null?void 0:o.pending;return o})}function rv(e){return KN(e).map(o=>{if((o==null?void 0:o.state)==="failed")throw o.error;return o?o.result:null})}c();var iO=C(O());function af(e){let t=BC(e),[o]=zr([t]);return iO.useEffect(()=>{!o&&e&&Ew(t,{url:e})},[o,e]),[o||{url:e}]}c();var aO=C(O());function sO(e){let t=e?new URL(e).hostname:null,[o]=dx([t?HC(t):null]);return aO.useMemo(()=>{if(!o||!e)return;let n=el(Ym(o),e);if(!n)return;let r=o.find(i=>i.name===n.integrationKey);if(r)return{integration:r,block:n.block}},[o,e])}c();var cO=C(O());var iv=ct({key:"hoveredCommentNodeAtom",default:null}),AX=ww({key:"newCommentValueAtom",default:()=>yC("","comment")});function lO(){let e=oi(iv);return cO.useMemo(()=>({highlight:(t,o={highlighting:!0,postButton:!0})=>{let n=t?ci.getOriginalKey(t):null;e(r=>n?(r&&r.node===n&&r.postButton&&(o.postButton=r.postButton),{node:n,...o}):null)}}),[e])}c();var dO=C(O());var uO=ct({key:"filesManagerAtom",default:null});function It(){let e=oi(uO),t=Cw();return dO.useMemo(()=>({prompt:o=>new Promise(n=>{e({options:o,onComplete:n})}),isOpen:()=>{let{isModified:o}=t(uO);return o}}),[e])}c();var mO=C(O());var av=ct({key:"mediaGalleryState",default:{medias:[],currentIndex:0}});function Ol(){let e=oi(av);return mO.useMemo(()=>({open:(t,o=0)=>{e({medias:t,currentIndex:o})}}),[e])}c();var ed=ct({key:"mobileToCOpenedAtom",default:!1});c();var sf=C(O());function pO(e){var r,i;let t=sf.useContext(Fo),o=t.preview||t.mode!=="public-content"||!((r=e==null?void 0:e.intercom)!=null&&r.enabled)||(i=e==null?void 0:e.intercom)==null?void 0:i.appID,n=Vx();return di(a=>{n&&o&&a.writeAsync({type:"script",src:`https://widget.intercom.io/widget/${o}`,onLoad:async()=>{window.Intercom&&window.Intercom("boot",{app_id:o})}})}),sf.useEffect(()=>()=>{window.Intercom&&(window.Intercom("shutdown"),window.Intercom=void 0)},[]),null}c();var yO=C(sv()),vO=C(O());c();var gO=lt("contentkit:remote");function lf(e){return Lr({getValue:async t=>{gO.info("fetch",t);let o=await e(t);return gO.info("got response",o),o}})}c();var cv=C(m6()),Rt=C(O());var uf=lt("contentkit:lifecycle"),lv=Rt.forwardRef(function(t,o){let{mode:n,remote:r,input:i,security:a,onPropsChange:s,onAction:l}=t,[u,d]=Rt.useState(i),[m,p]=Rt.useState(null),{result:f,error:h}=UN(r,n,u),[y,w]=Ai((f==null?void 0:f.state)||{},[f]),k=async I=>{let _={...u,...f?{props:s?f.props:u.props,state:f.state}:{},...I,state:{...u.state,...f==null?void 0:f.state,...y,...I.state}};uf.debug("transition to",_),await r.readAsync(_),d(_)},x=async(I,_=!0)=>{let M=Rx(y,I);switch(uf.debug("dispatch action",M),_&&await(l==null?void 0:l(M)),M.action){case"@ui.modal.open":let T={integrationId:i.integrationId,componentId:M.componentId,props:M.props,context:i.context,action:M};await r.readAsync(T),p({mode:"modal",input:T});break;case"@ui.modal.close":break;case"@ui.url.open":Op(M.url);break;case"@editor.node.updateProps":uf.info("update props",M.props),s==null||s(M.props);break;default:await k({action:M});break}};Rt.useImperativeHandle(o,()=>({dispatchAction:x})),Rt.useEffect(()=>{f&&(0,cv.default)(f.props)!==(0,cv.default)(u.props)&&(uf.debug("props have changed",f.props),s==null||s(f.props))},[u,f]);let P=async I=>{switch(I.action){case"@ui.modal.close":k({action:I}),p(null);break}};if(h)switch(n){case"block":return Rt.createElement(Kn,{kind:"danger",details:"Oops! unexpected error while rendering this block"});case"modal":return null;default:De(n)}return Rt.createElement(Rt.Fragment,null,Rt.createElement($N,{element:f.element,dispatchAction:x},Rt.createElement(Tx,{element:f.element,localState:y,setLocalState:w,dispatchAction:x,security:a})),Rt.createElement(Rt.Suspense,{fallback:null},Rt.createElement(cp,null,m?Rt.createElement(lv,{remote:r,mode:m.mode,input:m.input,onAction:P,security:a}):null)))});function $N(e){let{element:t,dispatchAction:o,children:n}=e;switch(t.type){case"block":return Rt.createElement(Rt.Fragment,null,n);case"modal":return Rt.createElement(Vt,{onClose:()=>{o({action:"@ui.modal.close",returnValue:t.returnValue||{}})},...Px(t.size)},n);default:De(t)}}function UN(e,t,o){let{result:n,error:r}=e.readSafe(o);return n?n.element.type!==t?{error:new Error(`Unexpected mode, expected ${t}, got ${n.element.type}`)}:{result:n}:{error:r||new Error("Unknown error")}}var jN=2e3,hO=Lr({getValue:async e=>{let t=await Ja(),o={spaceId:e.spaceId,componentId:e.componentId,action:e.action,props:e.props,state:e.state,context:e.context},n=JSON.stringify(o),r=yO.default.compressToEncodedURIComponent(n);return(await(r.length<jN?t.integrations.renderIntegrationUiWithGet(e.integrationId,{request:r}):t.integrations.renderIntegrationUiWithPost(e.integrationId,o))).data}});function bO(e){let{spaceId:t}=e;return vO.useMemo(()=>lf(o=>{let n=hO.readCacheState({...o,spaceId:t});return n.result?n.result:hO.readAsync({...o,spaceId:t})}),[t])}c();var td=C(O());var uv=td.default.createContext(()=>({getCurrentValue:()=>[],subscribe:()=>()=>{}})),ac=new Map;function SO(e){let{withComments:t,spaceKey:o,pageKey:n,changeRequestKey:r,children:i}=e,a={space:o,page:n,changeRequest:r||null},[s]=zr([t?Rw(bC(a),Pw("resolved","==",null),Tw("postedAt","asc")):null]);td.default.useEffect(()=>{let u=(s||[]).reduce((d,m)=>{var p;return m.node?{...d,[m.node]:[...(p=d[m.node])!=null?p:[],m]}:d},{});Object.entries(u).forEach(([d,m])=>{let p=m||[],f=ac.get(d),[h,y]=f||[[],[]];YN(p,h)||(ac.set(d,[p,y]),y.forEach(w=>w()))})},[s]);let l=td.default.useCallback(u=>({getCurrentValue:()=>{let d=ac.get(u);return d?d[0]:[]},subscribe:d=>{let m=ac.get(u),[p,f]=m||[[],[]];return ac.set(u,[p,[...f,d]]),()=>{let h=ac.get(u),[y,w]=h||[[],[]],k=w.filter(x=>x!==d);ac.set(u,[y,k])}}}),[]);return td.default.createElement(uv.Provider,{value:l},i)}function YN(e,t){return e.length!==t.length?!1:e.every(o=>{let n=t.find(r=>o.key===r.key);return n?ZN(o,n):!1})}function ZN(e,t){return!(e.key!==t.key||e.resolved!==t.resolved||py(e.replies)!==py(t.replies))}c();var dv=1024,wO=dv*1024;function od(e){return e>wO?`${(e/wO).toFixed(0)}MB`:e>dv?`${(e/dv).toFixed(0)}KB`:`${e}B`}function CO(e){return qa(e)?"Image":Qc(e)?"Code":e.contentType==="application/pdf"?"PDF":e.contentType.startsWith("text/")?"Text":"Binary"}c();var df=C(O());function xO(e){var n,r,i;let t=(0,df.useContext)(Fo);QN(t,e),Ys(()=>OO(t,e));let o=Ys(()=>kO(t,e));(0,df.useEffect)(()=>(o.current=kO(t,e),()=>{o.current&&window.gtag("config",o.current,{update:!0,groups:"not_tracking_views"})}),[(n=e==null?void 0:e.googleAnalytics)==null?void 0:n.enabled,(r=e==null?void 0:e.googleAnalytics)==null?void 0:r.trackingPrivateViews,(i=e==null?void 0:e.googleAnalytics)==null?void 0:i.trackingID,t])}function mv(e){var t;return!!((t=e.googleAnalytics)!=null&&t.enabled&&typeof e.googleAnalytics.trackingID=="string")}function QN(e,t){di(o=>{var n;pv(e,t)||o.writeSafe({type:"script",src:`https://www.googletagmanager.com/gtag/js?l=dataLayer&id=${(n=t==null?void 0:t.googleAnalytics)==null?void 0:n.trackingID}`})})}function OO(e,t){pv(e,t)||typeof window>"u"||window!=null&&window.gtag||(window.dataLayer=window.dataLayer||[],window.gtag=function(...o){window.dataLayer.push(arguments)},window.gtag("js",new Date),window.gtag("config",t.googleAnalytics.trackingID))}function kO(e,t){var n;if(pv(e,t)||typeof window>"u")return;window!=null&&window.gtag||OO(e,t),window.gtag("config",t.googleAnalytics.trackingID,{send_page_view:!1,anonymize_ip:!0,groups:"tracking_views"});let o=Jm()==="rejected";return window.gtag("consent","default",{ad_storage:o?"denied":"granted",analytics_storage:o?"denied":"granted"}),(n=t==null?void 0:t.googleAnalytics)==null?void 0:n.trackingID}function pv(e,t){var o;return!t||!t.googleAnalytics||!mv(t)||e.preview||e.mode!=="public-content"&&!((o=t==null?void 0:t.googleAnalytics)!=null&&o.trackingPrivateViews)}c();c();var Ze=C(O());W();c();var Jn=C(O());c();var _l=C(O());W();function _O(e){let{node:t,editor:o}=e,{readOnly:n}=o,[,r]=R(JN),i=()=>{o.change(a=>{a.unwrapInlineByKey(t.key)})};return _l.createElement(sn,{preferredAlignment:"start",kind:"large"},_l.createElement(b,{style:[r.annotationPopover,g.Padding.mediumHorizontal,g.Padding.mediumVertical]},_l.createElement(Tn,{fragment:Ni}),n?null:_l.createElement(b,{style:[r.toolbar]},_l.createElement(B,{size:"small",kind:"secondary",icon:S.Trashcan,title:"Remove annotation",onPress:i}))))}var JN=z.create({annotationPopover:{maxHeight:300},toolbar:{position:"absolute",top:g.medium,right:g.medium}});c();var sc=C(O());c();function ot(e,t,o=[]){return ne({groups:[...o,{key:"block",commands:[{key:"delete",title:"Delete",icon:S.Trashcan,trigger:()=>{e.change(n=>{if(xn(n.value.selection))return n.deleteBlockRangeForward();n.removeNodeByKey(t).focus()})}}]}]})}var IO=sc.memo(function(t){let{editor:o,nodeKey:n,visible:r,style:i,size:a="small",shortcutsActive:s,palette:l,dragHandleRef:u,icon:d=S.GrabberVertical.CSS,isDragging:m}=t,p=gk(),f=sc.useRef(!1),h=sc.useRef(null),y=Dr(h,u),w=de(h,{onClose:()=>{o.change(P=>{P.focus()})}}),k=()=>{f.current=!!p.current,w.open((typeof l=="function"?l():l)||ot(o,n)),o.change(P=>{let I=P.value.document.getNode(n);I&&Wt(P.value.selection)&&!P.value.selection.hasEdgeIn(I)&&P.collapseToStartOf(I),P.blur()})};fr(s?{[Xe.EDITOR_PALETTE]:k}:{},"editor-selection-collapsed",[s,w,l,o,n]);let x=r||w.opened;return sc.createElement(lo,{contentEditable:!1,ref:y,kind:"muted",size:a,iconOnly:!0,label:"Block controls",leadingIcon:d,tooltipTitle:`Click for options.
Drag to move.`,preventFocusOnPress:!0,tooltipDisabled:m,onPress:()=>k(),style:[{[N.opacity.hidden]:!x},Rk,i]})});c();var et=C(O());c();var RO=C(O(),1),mf=(0,RO.createContext)({dragDropManager:void 0});c();var h_=C(v6(),1);c();c();c();c();c();c();function rs(e){return rs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rs(e)}c();function fv(e,t){if(rs(e)!=="object"||e===null)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var n=o.call(e,t||"default");if(rs(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gv(e){var t=fv(e,"string");return rs(t)==="symbol"?t:String(t)}function pf(e,t,o){return t=gv(t),t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function Fr(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var PO=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),hv=function(){return Math.random().toString(36).substring(7).split("").join(".")},TO={INIT:"@@redux/INIT"+hv(),REPLACE:"@@redux/REPLACE"+hv(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+hv()}};function e9(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function yv(e,t,o){var n;if(typeof t=="function"&&typeof o=="function"||typeof o=="function"&&typeof arguments[3]=="function")throw new Error(Fr(0));if(typeof t=="function"&&typeof o>"u"&&(o=t,t=void 0),typeof o<"u"){if(typeof o!="function")throw new Error(Fr(1));return o(yv)(e,t)}if(typeof e!="function")throw new Error(Fr(2));var r=e,i=t,a=[],s=a,l=!1;function u(){s===a&&(s=a.slice())}function d(){if(l)throw new Error(Fr(3));return i}function m(y){if(typeof y!="function")throw new Error(Fr(4));if(l)throw new Error(Fr(5));var w=!0;return u(),s.push(y),function(){if(w){if(l)throw new Error(Fr(6));w=!1,u();var x=s.indexOf(y);s.splice(x,1),a=null}}}function p(y){if(!e9(y))throw new Error(Fr(7));if(typeof y.type>"u")throw new Error(Fr(8));if(l)throw new Error(Fr(9));try{l=!0,i=r(i,y)}finally{l=!1}for(var w=a=s,k=0;k<w.length;k++){var x=w[k];x()}return y}function f(y){if(typeof y!="function")throw new Error(Fr(10));r=y,p({type:TO.REPLACE})}function h(){var y,w=m;return y={subscribe:function(x){if(typeof x!="object"||x===null)throw new Error(Fr(11));function P(){x.next&&x.next(d())}P();var I=w(P);return{unsubscribe:I}}},y[PO]=function(){return this},y}return p({type:TO.INIT}),n={dispatch:p,subscribe:m,getState:d,replaceReducer:f},n[PO]=h,n}c();c();c();c();function ie(e,t,...o){if(t9()&&t===void 0)throw new Error("invariant requires an error message argument");if(!e){let n;if(t===void 0)n=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let r=0;n=new Error(t.replace(/%s/g,function(){return o[r++]})),n.name="Invariant Violation"}throw n.framesToPop=1,n}}function t9(){return typeof process<"u"&&!0}c();function EO(e,t,o){return t.split(".").reduce((n,r)=>n&&n[r]?n[r]:o||null,e)}function MO(e,t){return e.filter(o=>o!==t)}function ff(e){return typeof e=="object"}function LO(e,t){let o=new Map,n=i=>{o.set(i,o.has(i)?o.get(i)+1:1)};e.forEach(n),t.forEach(n);let r=[];return o.forEach((i,a)=>{i===1&&r.push(a)}),r}function NO(e,t){return e.filter(o=>t.indexOf(o)>-1)}c();c();var Il="dnd-core/INIT_COORDS",is="dnd-core/BEGIN_DRAG",Rl="dnd-core/PUBLISH_DRAG_SOURCE",as="dnd-core/HOVER",ss="dnd-core/DROP",cs="dnd-core/END_DRAG";function vv(e,t){return{type:Il,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}var o9={type:Il,payload:{clientOffset:null,sourceClientOffset:null}};function DO(e){return function(o=[],n={publishSource:!0}){let{publishSource:r=!0,clientOffset:i,getSourceClientOffset:a}=n,s=e.getMonitor(),l=e.getRegistry();e.dispatch(vv(i)),n9(o,s,l);let u=a9(o,s);if(u==null){e.dispatch(o9);return}let d=null;if(i){if(!a)throw new Error("getSourceClientOffset must be defined");r9(a),d=a(u)}e.dispatch(vv(i,d));let p=l.getSource(u).beginDrag(s,u);if(p==null)return;i9(p),l.pinSource(u);let f=l.getSourceType(u);return{type:is,payload:{itemType:f,item:p,sourceId:u,clientOffset:i||null,sourceClientOffset:d||null,isSourcePublic:!!r}}}}function n9(e,t,o){ie(!t.isDragging(),"Cannot call beginDrag while dragging."),e.forEach(function(n){ie(o.getSource(n),"Expected sourceIds to be registered.")})}function r9(e){ie(typeof e=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function i9(e){ie(ff(e),"Item must be an object.")}function a9(e,t){let o=null;for(let n=e.length-1;n>=0;n--)if(t.canDragSource(e[n])){o=e[n];break}return o}c();function s9(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function c9(e){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?arguments[t]:{},n=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(r){return Object.getOwnPropertyDescriptor(o,r).enumerable}))),n.forEach(function(r){s9(e,r,o[r])})}return e}function AO(e){return function(o={}){let n=e.getMonitor(),r=e.getRegistry();l9(n),m9(n).forEach((a,s)=>{let l=u9(a,s,r,n),u={type:ss,payload:{dropResult:c9({},o,l)}};e.dispatch(u)})}}function l9(e){ie(e.isDragging(),"Cannot call drop while not dragging."),ie(!e.didDrop(),"Cannot call drop twice during one drag operation.")}function u9(e,t,o,n){let r=o.getTarget(e),i=r?r.drop(n,e):void 0;return d9(i),typeof i>"u"&&(i=t===0?{}:n.getDropResult()),i}function d9(e){ie(typeof e>"u"||ff(e),"Drop result must either be an object or undefined.")}function m9(e){let t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t}c();function BO(e){return function(){let o=e.getMonitor(),n=e.getRegistry();p9(o);let r=o.getSourceId();return r!=null&&(n.getSource(r,!0).endDrag(o,r),n.unpinSource()),{type:cs}}}function p9(e){ie(e.isDragging(),"Cannot call endDrag while not dragging.")}c();c();function nd(e,t){return t===null?e===null:Array.isArray(e)?e.some(o=>o===t):e===t}function zO(e){return function(o,{clientOffset:n}={}){f9(o);let r=o.slice(0),i=e.getMonitor(),a=e.getRegistry(),s=i.getItemType();return h9(r,a,s),g9(r,i,a),y9(r,i,a),{type:as,payload:{targetIds:r,clientOffset:n||null}}}}function f9(e){ie(Array.isArray(e),"Expected targetIds to be an array.")}function g9(e,t,o){ie(t.isDragging(),"Cannot call hover while not dragging."),ie(!t.didDrop(),"Cannot call hover after drop.");for(let n=0;n<e.length;n++){let r=e[n];ie(e.lastIndexOf(r)===n,"Expected targetIds to be unique in the passed array.");let i=o.getTarget(r);ie(i,"Expected targetIds to be registered.")}}function h9(e,t,o){for(let n=e.length-1;n>=0;n--){let r=e[n],i=t.getTargetType(r);nd(i,o)||e.splice(n,1)}}function y9(e,t,o){e.forEach(function(n){o.getTarget(n).hover(t,n)})}c();function WO(e){return function(){if(e.getMonitor().isDragging())return{type:Rl}}}function FO(e){return{beginDrag:DO(e),publishDragSource:WO(e),hover:zO(e),drop:AO(e),endDrag:BO(e)}}var gf=class{receiveBackend(t){this.backend=t}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){let t=this,{dispatch:o}=this.store;function n(i){return(...a)=>{let s=i.apply(t,a);typeof s<"u"&&o(s)}}let r=FO(this);return Object.keys(r).reduce((i,a)=>{let s=r[a];return i[a]=n(s),i},{})}dispatch(t){this.store.dispatch(t)}constructor(t,o){this.isSetUp=!1,this.handleRefCountChange=()=>{let n=this.store.getState().refCount>0;this.backend&&(n&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!n&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=t,this.monitor=o,t.subscribe(this.handleRefCountChange)}};c();c();function v9(e,t){return{x:e.x+t.x,y:e.y+t.y}}function VO(e,t){return{x:e.x-t.x,y:e.y-t.y}}function qO(e){let{clientOffset:t,initialClientOffset:o,initialSourceClientOffset:n}=e;return!t||!o||!n?null:VO(v9(t,n),o)}function GO(e){let{clientOffset:t,initialClientOffset:o}=e;return!t||!o?null:VO(t,o)}c();var Pl=[],hf=[];Pl.__IS_NONE__=!0;hf.__IS_ALL__=!0;function HO(e,t){return e===Pl?!1:e===hf||typeof t>"u"?!0:NO(t,e).length>0}var yf=class{subscribeToStateChange(t,o={}){let{handlerIds:n}=o;ie(typeof t=="function","listener must be a function."),ie(typeof n>"u"||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");let r=this.store.getState().stateId,i=()=>{let a=this.store.getState(),s=a.stateId;try{s===r||s===r+1&&!HO(a.dirtyHandlerIds,n)||t()}finally{r=s}};return this.store.subscribe(i)}subscribeToOffsetChange(t){ie(typeof t=="function","listener must be a function.");let o=this.store.getState().dragOffset,n=()=>{let r=this.store.getState().dragOffset;r!==o&&(o=r,t())};return this.store.subscribe(n)}canDragSource(t){if(!t)return!1;let o=this.registry.getSource(t);return ie(o,`Expected to find a valid source. sourceId=${t}`),this.isDragging()?!1:o.canDrag(this,t)}canDropOnTarget(t){if(!t)return!1;let o=this.registry.getTarget(t);if(ie(o,`Expected to find a valid target. targetId=${t}`),!this.isDragging()||this.didDrop())return!1;let n=this.registry.getTargetType(t),r=this.getItemType();return nd(n,r)&&o.canDrop(this,t)}isDragging(){return!!this.getItemType()}isDraggingSource(t){if(!t)return!1;let o=this.registry.getSource(t,!0);if(ie(o,`Expected to find a valid source. sourceId=${t}`),!this.isDragging()||!this.isSourcePublic())return!1;let n=this.registry.getSourceType(t),r=this.getItemType();return n!==r?!1:o.isDragging(this,t)}isOverTarget(t,o={shallow:!1}){if(!t)return!1;let{shallow:n}=o;if(!this.isDragging())return!1;let r=this.registry.getTargetType(t),i=this.getItemType();if(i&&!nd(r,i))return!1;let a=this.getTargetIds();if(!a.length)return!1;let s=a.indexOf(t);return n?s===a.length-1:s>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return qO(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return GO(this.store.getState().dragOffset)}constructor(t,o){this.store=t,this.registry=o}};c();c();c();c();c();var XO=typeof window<"u"?window:self,KO=XO.MutationObserver||XO.WebKitMutationObserver;function bv(e){return function(){let o=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(o),clearInterval(n),e()}}}function b9(e){let t=1,o=new KO(e),n=document.createTextNode("");return o.observe(n,{characterData:!0}),function(){t=-t,n.data=t}}var $O=typeof KO=="function"?b9:bv;var vf=class{enqueueTask(t){let{queue:o,requestFlush:n}=this;o.length||(n(),this.flushing=!0),o[o.length]=t}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{let{queue:t}=this;for(;this.index<t.length;){let o=this.index;if(this.index++,t[o].call(),this.index>this.capacity){for(let n=0,r=t.length-this.index;n<r;n++)t[n]=t[n+this.index];t.length-=this.index,this.index=0}}t.length=0,this.index=0,this.flushing=!1},this.registerPendingError=t=>{this.pendingErrors.push(t),this.requestErrorThrow()},this.requestFlush=$O(this.flush),this.requestErrorThrow=bv(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}};c();c();var bf=class{call(){try{this.task&&this.task()}catch(t){this.onError(t)}finally{this.task=null,this.release(this)}}constructor(t,o){this.onError=t,this.release=o,this.task=null}};var Sf=class{create(t){let o=this.freeTasks,n=o.length?o.pop():new bf(this.onError,r=>o[o.length]=r);return n.task=t,n}constructor(t){this.onError=t,this.freeTasks=[]}};var UO=new vf,S9=new Sf(UO.registerPendingError);function jO(e){UO.enqueueTask(S9.create(e))}c();c();var rd="dnd-core/ADD_SOURCE",id="dnd-core/ADD_TARGET",ad="dnd-core/REMOVE_SOURCE",cc="dnd-core/REMOVE_TARGET";function YO(e){return{type:rd,payload:{sourceId:e}}}function ZO(e){return{type:id,payload:{targetId:e}}}function QO(e){return{type:ad,payload:{sourceId:e}}}function JO(e){return{type:cc,payload:{targetId:e}}}c();function e_(e){ie(typeof e.canDrag=="function","Expected canDrag to be a function."),ie(typeof e.beginDrag=="function","Expected beginDrag to be a function."),ie(typeof e.endDrag=="function","Expected endDrag to be a function.")}function t_(e){ie(typeof e.canDrop=="function","Expected canDrop to be a function."),ie(typeof e.hover=="function","Expected hover to be a function."),ie(typeof e.drop=="function","Expected beginDrag to be a function.")}function wf(e,t){if(t&&Array.isArray(e)){e.forEach(o=>wf(o,!1));return}ie(typeof e=="string"||typeof e=="symbol",t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}c();var hr;(function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"})(hr||(hr={}));c();var w9=0;function o_(){return w9++}function C9(e){let t=o_().toString();switch(e){case hr.SOURCE:return`S${t}`;case hr.TARGET:return`T${t}`;default:throw new Error(`Unknown Handler Role: ${e}`)}}function n_(e){switch(e[0]){case"S":return hr.SOURCE;case"T":return hr.TARGET;default:throw new Error(`Cannot parse handler ID: ${e}`)}}function r_(e,t){let o=e.entries(),n=!1;do{let{done:r,value:[,i]}=o.next();if(i===t)return!0;n=!!r}while(!n);return!1}var Cf=class{addSource(t,o){wf(t),e_(o);let n=this.addHandler(hr.SOURCE,t,o);return this.store.dispatch(YO(n)),n}addTarget(t,o){wf(t,!0),t_(o);let n=this.addHandler(hr.TARGET,t,o);return this.store.dispatch(ZO(n)),n}containsHandler(t){return r_(this.dragSources,t)||r_(this.dropTargets,t)}getSource(t,o=!1){return ie(this.isSourceId(t),"Expected a valid source ID."),o&&t===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(t)}getTarget(t){return ie(this.isTargetId(t),"Expected a valid target ID."),this.dropTargets.get(t)}getSourceType(t){return ie(this.isSourceId(t),"Expected a valid source ID."),this.types.get(t)}getTargetType(t){return ie(this.isTargetId(t),"Expected a valid target ID."),this.types.get(t)}isSourceId(t){return n_(t)===hr.SOURCE}isTargetId(t){return n_(t)===hr.TARGET}removeSource(t){ie(this.getSource(t),"Expected an existing source."),this.store.dispatch(QO(t)),jO(()=>{this.dragSources.delete(t),this.types.delete(t)})}removeTarget(t){ie(this.getTarget(t),"Expected an existing target."),this.store.dispatch(JO(t)),this.dropTargets.delete(t),this.types.delete(t)}pinSource(t){let o=this.getSource(t);ie(o,"Expected an existing source."),this.pinnedSourceId=t,this.pinnedSource=o}unpinSource(){ie(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(t,o,n){let r=C9(t);return this.types.set(r,o),t===hr.SOURCE?this.dragSources.set(r,n):t===hr.TARGET&&this.dropTargets.set(r,n),r}constructor(t){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=t}};c();c();c();var k9=(e,t)=>e===t;function i_(e,t){return!e&&!t?!0:!e||!t?!1:e.x===t.x&&e.y===t.y}function a_(e,t,o=k9){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!o(e[n],t[n]))return!1;return!0}function s_(e=Pl,t){switch(t.type){case as:break;case rd:case id:case cc:case ad:return Pl;case is:case Rl:case cs:case ss:default:return hf}let{targetIds:o=[],prevTargetIds:n=[]}=t.payload,r=LO(o,n);if(!(r.length>0||!a_(o,n)))return Pl;let a=n[n.length-1],s=o[o.length-1];return a!==s&&(a&&r.push(a),s&&r.push(s)),r}c();function x9(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function O9(e){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?arguments[t]:{},n=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(r){return Object.getOwnPropertyDescriptor(o,r).enumerable}))),n.forEach(function(r){x9(e,r,o[r])})}return e}var c_={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function l_(e=c_,t){let{payload:o}=t;switch(t.type){case Il:case is:return{initialSourceClientOffset:o.sourceClientOffset,initialClientOffset:o.clientOffset,clientOffset:o.clientOffset};case as:return i_(e.clientOffset,o.clientOffset)?e:O9({},e,{clientOffset:o.clientOffset});case cs:case ss:return c_;default:return e}}c();function _9(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function Tl(e){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?arguments[t]:{},n=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(r){return Object.getOwnPropertyDescriptor(o,r).enumerable}))),n.forEach(function(r){_9(e,r,o[r])})}return e}var I9={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function u_(e=I9,t){let{payload:o}=t;switch(t.type){case is:return Tl({},e,{itemType:o.itemType,item:o.item,sourceId:o.sourceId,isSourcePublic:o.isSourcePublic,dropResult:null,didDrop:!1});case Rl:return Tl({},e,{isSourcePublic:!0});case as:return Tl({},e,{targetIds:o.targetIds});case cc:return e.targetIds.indexOf(o.targetId)===-1?e:Tl({},e,{targetIds:MO(e.targetIds,o.targetId)});case ss:return Tl({},e,{dropResult:o.dropResult,didDrop:!0,targetIds:[]});case cs:return Tl({},e,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}}c();function d_(e=0,t){switch(t.type){case rd:case id:return e+1;case ad:case cc:return e-1;default:return e}}c();function m_(e=0){return e+1}function R9(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function P9(e){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?arguments[t]:{},n=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(r){return Object.getOwnPropertyDescriptor(o,r).enumerable}))),n.forEach(function(r){R9(e,r,o[r])})}return e}function p_(e={},t){return{dirtyHandlerIds:s_(e.dirtyHandlerIds,{type:t.type,payload:P9({},t.payload,{prevTargetIds:EO(e,"dragOperation.targetIds",[])})}),dragOffset:l_(e.dragOffset,t),refCount:d_(e.refCount,t),dragOperation:u_(e.dragOperation,t),stateId:m_(e.stateId)}}function f_(e,t=void 0,o={},n=!1){let r=T9(n),i=new yf(r,new Cf(r)),a=new gf(r,i),s=e(a,t,o);return a.receiveBackend(s),a}function T9(e){let t=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return yv(p_,e&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}var xf=C(O(),1);function E9(e,t){if(e==null)return{};var o=M9(e,t),n,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function M9(e,t){if(e==null)return{};var o={},n=Object.keys(e),r,i;for(i=0;i<n.length;i++)r=n[i],!(t.indexOf(r)>=0)&&(o[r]=e[r]);return o}var g_=0,kf=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__"),y_=(0,xf.memo)(function(t){var{children:o}=t,n=E9(t,["children"]);let[r,i]=L9(n);return(0,xf.useEffect)(()=>{if(i){let a=v_();return++g_,()=>{--g_===0&&(a[kf]=null)}}},[]),(0,h_.jsx)(mf.Provider,{value:r,children:o})});function L9(e){if("manager"in e)return[{dragDropManager:e.manager},!1];let t=N9(e.backend,e.context,e.options,e.debugMode),o=!e.context;return[t,o]}function N9(e,t=v_(),o,n){let r=t;return r[kf]||(r[kf]={dragDropManager:f_(e,t,o,n)}),r[kf]}function v_(){return window}c();c();c();c();var b_=C(h6(),1),_f=C(O(),1);c();var Of=C(O(),1),yr=typeof window<"u"?Of.useLayoutEffect:Of.useEffect;function S_(e,t,o){let[n,r]=(0,_f.useState)(()=>t(e)),i=(0,_f.useCallback)(()=>{let a=t(e);(0,b_.default)(n,a)||(r(a),o&&o())},[n,e,o]);return yr(i),[n,i]}function w_(e,t,o){let[n,r]=S_(e,t,o);return yr(function(){let a=e.getHandlerId();if(a!=null)return e.subscribeToStateChange(r,{handlerIds:[a]})},[e,r]),n}function If(e,t,o){return w_(t,e||(()=>({})),()=>o.reconnect())}c();var C_=C(O(),1);function Rf(e,t){let o=[...t||[]];return t==null&&typeof e!="function"&&o.push(e),(0,C_.useMemo)(()=>typeof e=="function"?e():e,o)}c();var Sv=C(O(),1);function k_(e){return(0,Sv.useMemo)(()=>e.hooks.dragSource(),[e])}function x_(e){return(0,Sv.useMemo)(()=>e.hooks.dragPreview(),[e])}c();var P_=C(O(),1);c();var wv=!1,Cv=!1,Pf=class{receiveHandlerId(t){this.sourceId=t}getHandlerId(){return this.sourceId}canDrag(){ie(!wv,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return wv=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{wv=!1}}isDragging(){if(!this.sourceId)return!1;ie(!Cv,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Cv=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{Cv=!1}}subscribeToStateChange(t,o){return this.internalMonitor.subscribeToStateChange(t,o)}isDraggingSource(t){return this.internalMonitor.isDraggingSource(t)}isOverTarget(t,o){return this.internalMonitor.isOverTarget(t,o)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(t){return this.internalMonitor.subscribeToOffsetChange(t)}canDragSource(t){return this.internalMonitor.canDragSource(t)}canDropOnTarget(t){return this.internalMonitor.canDropOnTarget(t)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(t){this.sourceId=null,this.internalMonitor=t.getMonitor()}};c();var kv=!1,Tf=class{receiveHandlerId(t){this.targetId=t}getHandlerId(){return this.targetId}subscribeToStateChange(t,o){return this.internalMonitor.subscribeToStateChange(t,o)}canDrop(){if(!this.targetId)return!1;ie(!kv,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return kv=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{kv=!1}}isOver(t){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,t):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(t){this.targetId=null,this.internalMonitor=t.getMonitor()}};c();function O_(e,t,o){let n=o.getRegistry(),r=n.addTarget(e,t);return[r,()=>n.removeTarget(r)]}function __(e,t,o){let n=o.getRegistry(),r=n.addSource(e,t);return[r,()=>n.removeSource(r)]}c();c();function sd(e,t,o,n){let r=o?o.call(n,e,t):void 0;if(r!==void 0)return!!r;if(e===t)return!0;if(typeof e!="object"||!e||typeof t!="object"||!t)return!1;let i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;let s=Object.prototype.hasOwnProperty.bind(t);for(let l=0;l<i.length;l++){let u=i[l];if(!s(u))return!1;let d=e[u],m=t[u];if(r=o?o.call(n,d,m,u):void 0,r===!1||r===void 0&&d!==m)return!1}return!0}c();function cd(e){return e!==null&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}c();var ld=C(O(),1);function D9(e){if(typeof e.type=="string")return;let t=e.type.displayName||e.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${t} into a <div>, or turn it into a drag source or a drop target itself.`)}function A9(e){return(t=null,o=null)=>{if(!(0,ld.isValidElement)(t)){let i=t;return e(i,o),i}let n=t;return D9(n),B9(n,o?i=>e(i,o):e)}}function Ef(e){let t={};return Object.keys(e).forEach(o=>{let n=e[o];if(o.endsWith("Ref"))t[o]=e[o];else{let r=A9(n);t[o]=()=>r}}),t}function I_(e,t){typeof e=="function"?e(t):e.current=t}function B9(e,t){let o=e.ref;return ie(typeof o!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),o?(0,ld.cloneElement)(e,{ref:n=>{I_(o,n),I_(t,n)}}):(0,ld.cloneElement)(e,{ref:t})}var Mf=class{receiveHandlerId(t){this.handlerId!==t&&(this.handlerId=t,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(t){this.dragSourceOptionsInternal=t}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(t){this.dragPreviewOptionsInternal=t}reconnect(){let t=this.reconnectDragSource();this.reconnectDragPreview(t)}reconnectDragSource(){let t=this.dragSource,o=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return o&&this.disconnectDragSource(),this.handlerId?t?(o&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=t,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,t,this.dragSourceOptions)),o):(this.lastConnectedDragSource=t,o):o}reconnectDragPreview(t=!1){let o=this.dragPreview,n=t||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(n&&this.disconnectDragPreview(),!!this.handlerId){if(!o){this.lastConnectedDragPreview=o;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=o,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,o,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!sd(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!sd(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(t){this.hooks=Ef({dragSource:(o,n)=>{this.clearDragSource(),this.dragSourceOptions=n||null,cd(o)?this.dragSourceRef=o:this.dragSourceNode=o,this.reconnectDragSource()},dragPreview:(o,n)=>{this.clearDragPreview(),this.dragPreviewOptions=n||null,cd(o)?this.dragPreviewRef=o:this.dragPreviewNode=o,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=t}};c();var Lf=class{get connectTarget(){return this.dropTarget}reconnect(){let t=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();t&&this.disconnectDropTarget();let o=this.dropTarget;if(this.handlerId){if(!o){this.lastConnectedDropTarget=o;return}t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=o,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,o,this.dropTargetOptions))}}receiveHandlerId(t){t!==this.handlerId&&(this.handlerId=t,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(t){this.dropTargetOptionsInternal=t}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!sd(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(t){this.hooks=Ef({dropTarget:(o,n)=>{this.clearDropTarget(),this.dropTargetOptions=n,cd(o)?this.dropTargetRef=o:this.dropTargetNode=o,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=t}};c();var R_=C(O(),1);function Vr(){let{dragDropManager:e}=(0,R_.useContext)(mf);return ie(e!=null,"Expected drag drop context"),e}function T_(e,t){let o=Vr(),n=(0,P_.useMemo)(()=>new Mf(o.getBackend()),[o]);return yr(()=>(n.dragSourceOptions=e||null,n.reconnect(),()=>n.disconnectDragSource()),[n,e]),yr(()=>(n.dragPreviewOptions=t||null,n.reconnect(),()=>n.disconnectDragPreview()),[n,t]),n}c();var E_=C(O(),1);function M_(){let e=Vr();return(0,E_.useMemo)(()=>new Pf(e),[e])}c();c();var Df=C(O(),1);c();var Nf=class{beginDrag(){let t=this.spec,o=this.monitor,n=null;return typeof t.item=="object"?n=t.item:typeof t.item=="function"?n=t.item(o):n={},n!=null?n:null}canDrag(){let t=this.spec,o=this.monitor;return typeof t.canDrag=="boolean"?t.canDrag:typeof t.canDrag=="function"?t.canDrag(o):!0}isDragging(t,o){let n=this.spec,r=this.monitor,{isDragging:i}=n;return i?i(r):o===t.getSourceId()}endDrag(){let t=this.spec,o=this.monitor,n=this.connector,{end:r}=t;r&&r(o.getItem(),o),n.reconnect()}constructor(t,o,n){this.spec=t,this.monitor=o,this.connector=n}};function L_(e,t,o){let n=(0,Df.useMemo)(()=>new Nf(e,t,o),[t,o]);return(0,Df.useEffect)(()=>{n.spec=e},[e]),n}c();var N_=C(O(),1);function D_(e){return(0,N_.useMemo)(()=>{let t=e.type;return ie(t!=null,"spec.type must be defined"),t},[e])}function A_(e,t,o){let n=Vr(),r=L_(e,t,o),i=D_(e);yr(function(){if(i!=null){let[s,l]=__(i,r,n);return t.receiveHandlerId(s),o.receiveHandlerId(s),l}},[n,t,o,r,i])}function ls(e,t){let o=Rf(e,t);ie(!o.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");let n=M_(),r=T_(o.options,o.previewOptions);return A_(o,n,r),[If(o.collect,n,r),k_(r),x_(r)]}c();c();var B_=C(O(),1);function z_(e){return(0,B_.useMemo)(()=>e.hooks.dropTarget(),[e])}c();var W_=C(O(),1);function F_(e){let t=Vr(),o=(0,W_.useMemo)(()=>new Lf(t.getBackend()),[t]);return yr(()=>(o.dropTargetOptions=e||null,o.reconnect(),()=>o.disconnectDropTarget()),[e]),o}c();var V_=C(O(),1);function q_(){let e=Vr();return(0,V_.useMemo)(()=>new Tf(e),[e])}c();c();var G_=C(O(),1);function H_(e){let{accept:t}=e;return(0,G_.useMemo)(()=>(ie(e.accept!=null,"accept must be defined"),Array.isArray(t)?t:[t]),[t])}c();var Bf=C(O(),1);c();var Af=class{canDrop(){let t=this.spec,o=this.monitor;return t.canDrop?t.canDrop(o.getItem(),o):!0}hover(){let t=this.spec,o=this.monitor;t.hover&&t.hover(o.getItem(),o)}drop(){let t=this.spec,o=this.monitor;if(t.drop)return t.drop(o.getItem(),o)}constructor(t,o){this.spec=t,this.monitor=o}};function X_(e,t){let o=(0,Bf.useMemo)(()=>new Af(e,t),[t]);return(0,Bf.useEffect)(()=>{o.spec=e},[e]),o}function K_(e,t,o){let n=Vr(),r=X_(e,t),i=H_(e);yr(function(){let[s,l]=O_(i,r,n);return t.receiveHandlerId(s),o.receiveHandlerId(s),l},[n,t,r,o,i.map(a=>a.toString()).join("|")])}function En(e,t){let o=Rf(e,t),n=q_(),r=F_(o.options);return K_(o,n,r),[If(o.collect,n,r),z_(r)]}W();c();var El=C(O());W();c();W();var lc={added:K.green.base,deleted:K.scarlet.base,modified:K.primary.base},zf=X.create({added:{color:lc.added},deleted:{color:lc.deleted},modified:{color:lc.modified}});function Wf(e){let{diff:t,style:o,size:n,highlighted:r}=e,[,i]=R(z9),a=F.useInteractiveState(),s=t.type==="added"?S.DiffAdded:t.type==="deleted"?S.DiffRemoved:S.DiffModified;return El.createElement(fe,{editable:!1,style:[o,ud.avoidCalculatingBounds],...a.events,"data-hide-on-drag":!0},El.createElement(Xn,{tooltip:`This block has been ${t.type} in this change request`,preferredPlacement:"top"},(l,u)=>El.createElement(F.TouchableOpacity,{ref:u,style:[ud.diffContainer,r||a.hovered?ud.diffContainerHighlighted:null],...l.events},El.createElement(s,{style:[ud.diffIcon,zf[t.type]],size:n}),El.createElement(fe,{style:[ud.diffLine,i.bodyColor]}))))}var ud=X.create({diffContainer:{display:"flex",flexDirection:"column",alignItems:"center",height:"100%",opacity:.5,userSelect:"none"},diffContainerHighlighted:{opacity:1},diffIcon:{flexShrink:0},diffLine:{width:1,flexGrow:1,flexShrink:1,marginTop:g.xsmall},avoidCalculatingBounds:{width:0,overflow:"visible"}}),z9=z.create({bodyColor:(e,t)=>({backgroundColor:t.color==="dark"?K.darkModeText.xdark:K.lightModeText.xlight})});c();var $_=C(O());c();var Ff=JSON.parse('{"halo":"halo_oiCij","ready":"ready_81z1f","show":"show_byjur"}');function xv(e){let{isSelected:t=!1,isBlockSelection:o=!1}=e;return $_.default.createElement(Z,{style:[Ff.halo,{[Ff.ready]:o,[Ff.show]:t}],as:"span",contentEditable:!1})}xv.displayName="BlockSelectionHalo";c();var Ov=4,_v=g.medium,Iv=4,Rv=g.xlarge+g.small,Pv=g.large,uc=-g.large,dd={[Ft]:-(_v+Ov/2),[Ao]:-(Rv+Iv/2),[ur]:-Pv},Tv={[Ft]:dd[Ft],[Ao]:dd[Ao],[ur]:dd[ur]},Ev=E.ICON_XS,md=uc-E.BUTTON_S-g.small,U_=g.large+4,j_=g.large+8,Y_=g.large+8,Z_=28,Q_=32,J_=34,dc=g.small;c();var nI=C(O());W();c();c();var Ml=g.medium;function W9(e,t){return t.nodes.find(o=>o.type===$c&&o.nodes.some(n=>n.key===e.key))||e}function qr(e,t,o){let n=t.getChildIndex(o?W9(e,t).key:e.key),r=n===0,i=n===t.nodes.size-1,a=(()=>{switch(t.type){case Ao:return{paddingTop:r?g.medium:g.xsmall,paddingBottom:i?g.medium:g.xsmall};case Ft:return{paddingTop:g.xsmall,paddingBottom:g.xsmall};case Bo:{if(!ya.includes(e==null?void 0:e.type))return{paddingTop:0,paddingBottom:0};let l={paddingTop:g.small,paddingBottom:g.small};return r&&(l.paddingTop=0),i&&(l.paddingBottom=0),l}case ga:return{paddingTop:g.medium,paddingBottom:g.medium}}return{}})();return{...(()=>{switch(e.type){case Ae:return{paddingTop:g.large,paddingBottom:g.small};case Fe:return{paddingTop:g.large,paddingBottom:g.small};case Qe:return{paddingTop:g.large,paddingBottom:g.small};case pe:return{paddingTop:g.small,paddingBottom:g.small};case At:case ro:case io:return{paddingTop:g.medium,paddingBottom:g.medium};case Ao:return{paddingTop:g.medium,paddingBottom:g.medium};case On:return{paddingTop:g.medium,paddingBottom:g.medium};case Bo:return{paddingTop:r?0:g.xsmall,paddingBottom:i?0:g.xsmall};default:return{paddingTop:Ml,paddingBottom:Ml}}})(),...a}}c();var eI=C(Im());W();var us=100,Vf=40,pd=800;function qf(e,t,o=!1){if(!e.useNewSizing)return F9(e,t,o);let n=new Map,r=0;e.columns.forEach(d=>{var m;r+=((m=e.columnWidths)==null?void 0:m[d])||0});let i=Math.max(t-r,0),a=e.columns.length-Object.keys(e.columnWidths||{}).length,s=a===0?0:Math.floor(i/a),l=a===0?0:i-s*a,u=0;return e.columns.forEach(d=>{var y,w;let m=typeof((y=e.columnWidths)==null?void 0:y[d])>"u",p=((w=e.columnWidths)==null?void 0:w[d])||0,f=m?s:p;d===e.columns[e.columns.length-1]&&(f+=l),f=(0,eI.default)(f,m?us:Vf,pd),u+=f;let h=new Kt.Value(0);h.setOffset(f),n.set(d,{controller:h,animated:Kt.diffClamp(h,o?0:m?us:Vf,pd),width:f})}),{widths:n,totalWidth:u}}function F9(e,t,o=!1){let i=new Map,a=0;e.columns.forEach(l=>{var d;let u=((d=e.columnWidths)==null?void 0:d[l])||200;a+=u,i.set(l,u)});let s=1;return(a<t||o)&&(s=t/a,a=t),i.forEach((l,u)=>{let d=new Kt.Value(0);d.setOffset(l*s),i.set(u,{controller:d,animated:Kt.diffClamp(d,o?0:150,pd),width:l*s})}),{widths:i,totalWidth:a}}function mc(e,t,o){let{blockSpacing:n={paddingTop:0,paddingBottom:0},contentSize:r=750}=o||{};if((e==null?void 0:e.object)!=="block")throw new Error(`invalid node passed to "getBlockEstimatedHeight" ${e.object}#${e.type} with parent ${e.object}#${t?t.type:"no-parent"}`);switch(e.type){case Vn:return n.paddingTop+n.paddingBottom+q9(e,r);case In:return n.paddingTop+n.paddingBottom+mc(e.nodes.first(),e);case pe:case Fe:case Qe:case Ae:{let a=n.paddingTop+n.paddingBottom+fd(e.text,{lineHeight:Mn(e),fontSize:Gf(e),contentWidth:r});return e.type===Ae&&t.object==="document"&&t.getChildIndex(e.key)!==0?a+g.medium+g.large+1:a}case Mi:return fd(e.text,{lineHeight:Mn(e),fontSize:Gf(e),contentWidth:r});case _n:case rn:case ai:case ko:case ma:case Mr:return n.paddingTop+n.paddingBottom+200;case Gs:case pa:case ha:return n.paddingTop+n.paddingBottom+100;case Li:return n.paddingTop+n.paddingBottom+Mn(e);case fa:return n.paddingTop+n.paddingBottom+1;default:let i=V9(e,r);return n.paddingTop+n.paddingBottom+e.nodes.reduce((a,s)=>{let l=qr(s,e),u=s.object==="block"?mc(s,e,{contentSize:i}):fd(s.text,{contentWidth:i});return a+u+l.paddingTop+l.paddingBottom},0)}}function V9(e,t){switch(e.type){case Ft:return t-_v-Ov;case Ao:return t-Rv-Iv;default:return t}}function Mn(e){if(!e)return He.Body.lineHeight;switch(e.type){case Bo:return Mn(e.nodes.first());case Ae:return He.Heading1.lineHeight;case Fe:return He.Heading2.lineHeight;case Qe:return He.Heading3.lineHeight;case On:return He.Code.lineHeight+2*g.small;case Mi:return He.Code.lineHeight;case In:return He.Label.lineHeight+2*g.small;case Vn:return He.Label.lineHeight+2*g.small;case Li:return g.medium*2+He.Heading3.lineHeight;case fa:return 1;case pe:default:return He.Body.lineHeight}}function Gf(e){if(!e)return He.Body.fontSize;switch(e.type){case Bo:return Mn(e.nodes.first());case Ae:return He.Heading1.fontSize;case Fe:return He.Heading2.fontSize;case Qe:return He.Heading3.fontSize;case Mi:return He.Code.fontSize;case pe:default:return He.Body.fontSize}}function q9(e,t){let o=Q.getTableData(e);switch(o.view.type){case"grid":{let{widths:n}=qf(o.view,t,!1),r=H9(o,n),i=Object.keys(o.records).reduce((a,s,l)=>{let u=Mv(e,s,n);return a+u},0);return r+i}case"cards":{let n=Object.keys(o.records).length,r=o.view.cardSize==="large"?2:3,i=(750-r*g.medium)/r,a=G9(e,o,i),s=Math.ceil(n/r);return s*a+(s-1)*g.medium}default:De(o.view)}}function Mv(e,t,o){if(!e)return 0;let n=Q.getTableData(e),r=n.records[t];return n.view.columns.reduce((i,a)=>{let s=r.values[a],l=n.definition[a],u=oI(s,l,tI(l.id,o),e);return u>i?u:i},g.medium)}function G9(e,t,o){let n=Object.values(t.records)[0];if(!n)return 0;let r=t.view.type==="cards"&&t.view.coverDefinition?135:0;return t.view.columns.reduce((i,a)=>{let s=n.values[a],l=t.definition[a],u=oI(s,l,o,e);return i+u},2*g.small+r)}function H9(e,t){return e.view.type!=="grid"||e.view.hideHeader?0:Object.keys(e.definition).reduce((o,n)=>{let r=tI(n,t),i=e.definition[n].title,a=fd(i,{contentWidth:r});return a>o?a:o},g.medium)}function tI(e,t){var n;return(((n=t.get(e))==null?void 0:n.width)||us)-g.medium*2}function oI(e,t,o,n){return(()=>{switch(t.type){case"text":let i=n.fragments.get(String(e));return i?i.nodes.reduce((u,d)=>u+mc(d,n,{contentSize:o}),0):0;case"number":return fd(String(e),{contentWidth:o});case"files":case"users":let a=Array.isArray(e)?e.length:1,s=t.type==="files"?K9:X9;return(a<=1?1:Math.max(1,Math.ceil(s*a/o)))*He.Body.lineHeight;case"checkbox":case"rating":case"select":default:return He.Body.lineHeight}})()+g.small*2+1}function fd(e,t){let{lineHeight:o=He.Body.lineHeight,contentWidth:n=750}=t||{},r=Lv(e,t),i=Math.max(1,Math.ceil(r/n));return o*i}function Lv(e="",t){let{fontSize:o=He.Body.fontSize}=t||{};return o*.5*e.length}var X9=Lv("Steven Smithson")+g.large+g.small*2,K9=Lv("this_is_a_file_of_mine.json")+g.large+g.small*2;function Ll(e){let{ancestors:t,node:o,diff:n,isBlockSelection:r=!1}=e,i=t.last(),a=i.type,s=i.getChildIndex(o.key),l=s===0,u=s===i.nodes.size-1,d=o.data.get("fullWidth"),p=typeof d=="boolean"&&d===!0;return nI.default.useMemo(()=>{let f=i.object==="document",h=i.object==="document"&&ci.isConflictKey(o.key),y=Mn(o),w=qr(o,i,typeof n=="boolean");h&&(w.paddingTop+=g.medium);let k=$9(o,t,r),x=U9(o,t),P=k?j9(o,t)-k.width/2:0;return{blockStyle:Z9(w.paddingTop,w.paddingBottom),diffLine:n?{style:{position:"absolute",left:Y9(o,t),top:(typeof n!="boolean"?w.paddingTop:0)+(y-Ev)/2,bottom:w.paddingBottom+g.small},size:Ev}:void 0,diffBefore:typeof n!="boolean"&&(n!=null&&n.deletedBlocksBefore)?{style:Nv.diffDeletedBeforeLine,size:E.ICON_XS}:void 0,diffAfter:typeof n!="boolean"&&(n!=null&&n.deletedBlocksAfter)?{style:Nv.diffDeletedAfterLine,size:E.ICON_XS}:void 0,controlsButton:k?{style:{top:(y-k.height)/2},hitArea:{width:Math.abs(P),height:"100%",paddingTop:w.paddingTop,paddingBottom:w.paddingBottom,left:P,top:0,gap:f?g.small:void 0},size:k.buttonSize}:void 0,rightGutterComponent:x?{size:x.buttonSize,style:[Nv.rightGutterComponent,{top:w.paddingTop+(y-x.height)/2}]}:void 0,renderMode:f?p?"full-width":"centered":"unstyled"}},[o.type,i.object,a,l,u,n,r,p])}var rI={shouldNodeComponentUpdate(e,t){if(e.node.object==="inline"||t.node.object==="inline")return null;let o=qr(e.node,e.parent),n=qr(t.node,t.parent);return o.paddingTop!==n.paddingTop||o.paddingBottom!==n.paddingBottom?!0:null}};function $9(e,t,o){let n=t.last();return ur===e.type||!o&&ya.includes(e.type)||Co.isBlock(n)&&n.type===Bo&&e.type!==_n?null:t.size===1||t.size===2&&Co.isBlock(n)&&it.isList(n)?{buttonSize:"small",width:E.BUTTON_S,height:E.BUTTON_S}:{buttonSize:"xsmall",width:E.BUTTON_XS,height:E.BUTTON_XS}}function U9(e,t){return ur===e.type||ya.includes(e.type)?null:{buttonSize:"small",width:E.BUTTON_S,height:E.BUTTON_S}}function j9(e,t){let o=t.last(),n=t.get(t.size-2);if(e.type===Bo){if(!n||(n==null?void 0:n.object)==="document")return uc;if(Co.isBlock(n)&&n.type===Bo)switch(o.type){case ro:return-(g.small+6);case At:return-(g.small+8);case io:return-(g.small+E.ICON_M/2);default:return uc}o=n,n=t.get(t.size-3)}return n&&Co.isBlock(n)&&Tv[n.type]?Tv[n.type]:(Co.isBlock(o)?dd[o.type]:0)||uc}function Y9(e,t){let o=t.last(),n=t.get(t.size-2),r=t.some(l=>l.type===In)?-g.large:0,i=t.some(l=>l.type===Ao)?md+10:0,a=t.some(l=>l.type===Ft)?-20:0,s=t.filter(l=>ya.includes((l==null?void 0:l.type)||"")).size;if(s>0){let l=(r?r-2:0)+i+a+md,u=s-1,d;switch(ya.includes((n==null?void 0:n.type)||"")?d=n==null?void 0:n.type:(d=o.type,u--),d){case ro:return l-U_-Z_*u;case At:return l-j_-Q_*u;case io:return l-Y_-J_*u;default:return md}}return a+i+r+md}var Nv=X.create({block:{paddingVertical:Ml},defaultTopPadding:{paddingTop:Ml},defaultBottomPadding:{paddingBottom:Ml},insertionLine:{height:dc,left:0,right:0},diffDeletedBeforeLine:{top:-dc,left:uc-E.BUTTON_S-g.small},diffDeletedAfterLine:{bottom:-dc,left:uc-E.BUTTON_S-g.small},rightGutterComponent:{position:"absolute",right:-g.xlarge,minWidth:g.xlarge}});function Z9(e,t){let o={0:"none",[g.xsmall]:"xsmall",[g.small]:"small",[g.medium]:"medium",[g.large]:"large",[g.xlarge]:"xlarge",[g.xxlarge]:"xxlarge"},n=[N.padding.mediumVertical],r={},i=o[e],a=o[t];return i&&n.push(N.padding[`${i}Top`]),a&&n.push(N.padding[`${a}Bottom`]),!i&&e!==0&&(r.paddingTop=e),!a&&t!==0&&(r.paddingBottom=t),{inlineStyle:r,style:n}}c();var mI=C(O());c();c();c();c();function Dv(e){let t=null;return()=>(t==null&&(t=e()),t)}function iI(e,t){return e.filter(o=>o!==t)}function aI(e,t){let o=new Set,n=i=>o.add(i);e.forEach(n),t.forEach(n);let r=[];return o.forEach(i=>r.push(i)),r}var Hf=class{enter(t){let o=this.entered.length,n=r=>this.isNodeInDocument(r)&&(!r.contains||r.contains(t));return this.entered=aI(this.entered.filter(n),[t]),o===0&&this.entered.length>0}leave(t){let o=this.entered.length;return this.entered=iI(this.entered.filter(this.isNodeInDocument),t),o>0&&this.entered.length===0}reset(){this.entered=[]}constructor(t){this.entered=[],this.isNodeInDocument=t}};c();c();var Xf=class{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(t=>{Object.defineProperty(this.item,t,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${t}" until the drop event.`),null}})})}loadDataTransfer(t){if(t){let o={};Object.keys(this.config.exposeProperties).forEach(n=>{let r=this.config.exposeProperties[n];r!=null&&(o[n]={value:r(t,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,o)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(t,o){return o===t.getSourceId()}endDrag(){}constructor(t){this.config=t,this.item={},this.initializeExposedProperties()}};c();var gd={};yw(gd,{FILE:()=>Av,HTML:()=>Wv,TEXT:()=>zv,URL:()=>Bv});c();var Av="__NATIVE_FILE__",Bv="__NATIVE_URL__",zv="__NATIVE_TEXT__",Wv="__NATIVE_HTML__";c();function Kf(e,t,o){let n=t.reduce((r,i)=>r||e.getData(i),"");return n!=null?n:o}var $f={[Av]:{exposeProperties:{files:e=>Array.prototype.slice.call(e.files),items:e=>e.items,dataTransfer:e=>e},matchesTypes:["Files"]},[Wv]:{exposeProperties:{html:(e,t)=>Kf(e,t,""),dataTransfer:e=>e},matchesTypes:["Html","text/html"]},[Bv]:{exposeProperties:{urls:(e,t)=>Kf(e,t,"").split(`
`),dataTransfer:e=>e},matchesTypes:["Url","text/uri-list"]},[zv]:{exposeProperties:{text:(e,t)=>Kf(e,t,""),dataTransfer:e=>e},matchesTypes:["Text","text/plain"]}};function sI(e,t){let o=$f[e];if(!o)throw new Error(`native type ${e} has no configuration`);let n=new Xf(o);return n.loadDataTransfer(t),n}function Uf(e){if(!e)return null;let t=Array.prototype.slice.call(e.types||[]);return Object.keys($f).filter(o=>{let n=$f[o];return n!=null&&n.matchesTypes?n.matchesTypes.some(r=>t.indexOf(r)>-1):!1})[0]||null}c();c();var cI=Dv(()=>/firefox/i.test(navigator.userAgent)),Fv=Dv(()=>!!window.safari);c();var hd=class{interpolate(t){let{xs:o,ys:n,c1s:r,c2s:i,c3s:a}=this,s=o.length-1;if(t===o[s])return n[s];let l=0,u=a.length-1,d;for(;l<=u;){d=Math.floor(.5*(l+u));let f=o[d];if(f<t)l=d+1;else if(f>t)u=d-1;else return n[d]}s=Math.max(0,u);let m=t-o[s],p=m*m;return n[s]+r[s]*m+i[s]*p+a[s]*m*p}constructor(t,o){let{length:n}=t,r=[];for(let h=0;h<n;h++)r.push(h);r.sort((h,y)=>t[h]<t[y]?-1:1);let i=[],a=[],s=[],l,u;for(let h=0;h<n-1;h++)l=t[h+1]-t[h],u=o[h+1]-o[h],a.push(l),i.push(u),s.push(u/l);let d=[s[0]];for(let h=0;h<a.length-1;h++){let y=s[h],w=s[h+1];if(y*w<=0)d.push(0);else{l=a[h];let k=a[h+1],x=l+k;d.push(3*x/((x+k)/y+(x+l)/w))}}d.push(s[s.length-1]);let m=[],p=[],f;for(let h=0;h<d.length-1;h++){f=s[h];let y=d[h],w=1/a[h],k=y+d[h+1]-f-f;m.push((f-y-k)*w),p.push(k*w*w)}this.xs=t,this.ys=o,this.c1s=d,this.c2s=m,this.c3s=p}};var Q9=1;function Vv(e){let t=e.nodeType===Q9?e:e.parentElement;if(!t)return null;let{top:o,left:n}=t.getBoundingClientRect();return{x:n,y:o}}function yd(e){return{x:e.clientX,y:e.clientY}}function J9(e){var t;return e.nodeName==="IMG"&&(cI()||!(!((t=document.documentElement)===null||t===void 0)&&t.contains(e)))}function e2(e,t,o,n){let r=e?t.width:o,i=e?t.height:n;return Fv()&&e&&(i/=window.devicePixelRatio,r/=window.devicePixelRatio),{dragPreviewWidth:r,dragPreviewHeight:i}}function lI(e,t,o,n,r){let i=J9(t),s=Vv(i?e:t),l={x:o.x-s.x,y:o.y-s.y},{offsetWidth:u,offsetHeight:d}=e,{anchorX:m,anchorY:p}=n,{dragPreviewWidth:f,dragPreviewHeight:h}=e2(i,t,u,d),y=()=>{let M=new hd([0,.5,1],[l.y,l.y/d*h,l.y+h-d]).interpolate(p);return Fv()&&i&&(M+=(window.devicePixelRatio-1)*h),M},w=()=>new hd([0,.5,1],[l.x,l.x/u*f,l.x+f-u]).interpolate(m),{offsetX:k,offsetY:x}=r,P=k===0||k,I=x===0||x;return{x:P?k:w(),y:I?x:y()}}c();var jf=class{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var t;return!((t=this.globalContext)===null||t===void 0)&&t.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var t;return((t=this.optionsArgs)===null||t===void 0?void 0:t.rootElement)||this.window}constructor(t,o){this.ownerDocument=null,this.globalContext=t,this.optionsArgs=o}};function t2(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function uI(e){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?arguments[t]:{},n=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(r){return Object.getOwnPropertyDescriptor(o,r).enumerable}))),n.forEach(function(r){t2(e,r,o[r])})}return e}var Yf=class{profile(){var t,o;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((t=this.dragStartSourceIds)===null||t===void 0?void 0:t.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((o=this.dragOverTargetIds)===null||o===void 0?void 0:o.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){let t=this.rootElement;if(t!==void 0){if(t.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");t.__isReactDndBackendSetUp=!0,this.addEventListeners(t)}}teardown(){let t=this.rootElement;if(t!==void 0&&(t.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var o;(o=this.window)===null||o===void 0||o.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(t,o,n){return this.sourcePreviewNodeOptions.set(t,n),this.sourcePreviewNodes.set(t,o),()=>{this.sourcePreviewNodes.delete(t),this.sourcePreviewNodeOptions.delete(t)}}connectDragSource(t,o,n){this.sourceNodes.set(t,o),this.sourceNodeOptions.set(t,n);let r=a=>this.handleDragStart(a,t),i=a=>this.handleSelectStart(a);return o.setAttribute("draggable","true"),o.addEventListener("dragstart",r),o.addEventListener("selectstart",i),()=>{this.sourceNodes.delete(t),this.sourceNodeOptions.delete(t),o.removeEventListener("dragstart",r),o.removeEventListener("selectstart",i),o.setAttribute("draggable","false")}}connectDropTarget(t,o){let n=a=>this.handleDragEnter(a,t),r=a=>this.handleDragOver(a,t),i=a=>this.handleDrop(a,t);return o.addEventListener("dragenter",n),o.addEventListener("dragover",r),o.addEventListener("drop",i),()=>{o.removeEventListener("dragenter",n),o.removeEventListener("dragover",r),o.removeEventListener("drop",i)}}addEventListeners(t){t.addEventListener&&(t.addEventListener("dragstart",this.handleTopDragStart),t.addEventListener("dragstart",this.handleTopDragStartCapture,!0),t.addEventListener("dragend",this.handleTopDragEndCapture,!0),t.addEventListener("dragenter",this.handleTopDragEnter),t.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),t.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),t.addEventListener("dragover",this.handleTopDragOver),t.addEventListener("dragover",this.handleTopDragOverCapture,!0),t.addEventListener("drop",this.handleTopDrop),t.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(t){t.removeEventListener&&(t.removeEventListener("dragstart",this.handleTopDragStart),t.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),t.removeEventListener("dragend",this.handleTopDragEndCapture,!0),t.removeEventListener("dragenter",this.handleTopDragEnter),t.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),t.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),t.removeEventListener("dragover",this.handleTopDragOver),t.removeEventListener("dragover",this.handleTopDragOverCapture,!0),t.removeEventListener("drop",this.handleTopDrop),t.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){let t=this.monitor.getSourceId(),o=this.sourceNodeOptions.get(t);return uI({dropEffect:this.altKeyPressed?"copy":"move"},o||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){let t=this.monitor.getSourceId(),o=this.sourcePreviewNodeOptions.get(t);return uI({anchorX:.5,anchorY:.5,captureDraggingState:!1},o||{})}isDraggingNativeItem(){let t=this.monitor.getItemType();return Object.keys(gd).some(o=>gd[o]===t)}beginDragNativeItem(t,o){this.clearCurrentDragSourceNode(),this.currentNativeSource=sI(t,o),this.currentNativeHandle=this.registry.addSource(t,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(t){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=t;let o=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var n;return(n=this.rootElement)===null||n===void 0?void 0:n.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},o)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var t;(t=this.window)===null||t===void 0||t.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(t,o){t.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(o))}handleDragEnter(t,o){this.dragEnterTargetIds.unshift(o)}handleDragOver(t,o){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(o)}handleDrop(t,o){this.dropTargetIds.unshift(o)}constructor(t,o,n){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=r=>{let i=this.sourceNodes.get(r);return i&&Vv(i)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=r=>!!(r&&this.document&&this.document.body&&this.document.body.contains(r)),this.endDragIfSourceWasRemovedFromDOM=()=>{let r=this.currentDragSourceNode;r==null||this.isNodeInDocument(r)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=r=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(r||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=r=>{if(r.defaultPrevented)return;let{dragStartSourceIds:i}=this;this.dragStartSourceIds=null;let a=yd(r);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(i||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:a});let{dataTransfer:s}=r,l=Uf(s);if(this.monitor.isDragging()){if(s&&typeof s.setDragImage=="function"){let d=this.monitor.getSourceId(),m=this.sourceNodes.get(d),p=this.sourcePreviewNodes.get(d)||m;if(p){let{anchorX:f,anchorY:h,offsetX:y,offsetY:w}=this.getCurrentSourcePreviewNodeOptions(),P=lI(m,p,a,{anchorX:f,anchorY:h},{offsetX:y,offsetY:w});s.setDragImage(p,P.x,P.y)}}try{s==null||s.setData("application/json",{})}catch(d){}this.setCurrentDragSourceNode(r.target);let{captureDraggingState:u}=this.getCurrentSourcePreviewNodeOptions();u?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(l)this.beginDragNativeItem(l);else{if(s&&!s.types&&(r.target&&!r.target.hasAttribute||!r.target.hasAttribute("draggable")))return;r.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=r=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(r.dataTransfer)}if(!this.enterLeaveCounter.enter(r.target)||this.monitor.isDragging())return;let{dataTransfer:s}=r,l=Uf(s);l&&this.beginDragNativeItem(l,s)},this.handleTopDragEnter=r=>{let{dragEnterTargetIds:i}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=r.altKey,i.length>0&&this.actions.hover(i,{clientOffset:yd(r)}),i.some(s=>this.monitor.canDropOnTarget(s))&&(r.preventDefault(),r.dataTransfer&&(r.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=r=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(r.dataTransfer)}},this.handleTopDragOver=r=>{let{dragOverTargetIds:i}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){r.preventDefault(),r.dataTransfer&&(r.dataTransfer.dropEffect="none");return}this.altKeyPressed=r.altKey,this.lastClientOffset=yd(r),this.scheduleHover(i),(i||[]).some(s=>this.monitor.canDropOnTarget(s))?(r.preventDefault(),r.dataTransfer&&(r.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?r.preventDefault():(r.preventDefault(),r.dataTransfer&&(r.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=r=>{this.isDraggingNativeItem()&&r.preventDefault(),this.enterLeaveCounter.leave(r.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=r=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var i;r.preventDefault(),(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(r.dataTransfer)}else Uf(r.dataTransfer)&&r.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=r=>{let{dropTargetIds:i}=this;this.dropTargetIds=[],this.actions.hover(i,{clientOffset:yd(r)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=r=>{let i=r.target;typeof i.dragDrop=="function"&&(i.tagName==="INPUT"||i.tagName==="SELECT"||i.tagName==="TEXTAREA"||i.isContentEditable||(r.preventDefault(),i.dragDrop()))},this.options=new jf(o,n),this.actions=t.getActions(),this.monitor=t.getMonitor(),this.registry=t.getRegistry(),this.enterLeaveCounter=new Hf(this.isNodeInDocument)}};c();var Zf;function qv(){return Zf||(Zf=new Image,Zf.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),Zf}var dI=function(t,o,n){return new Yf(t,o,n)};function pI(e){return mI.createElement(y_,{backend:dI},e.children)}c();function fI(e){switch(e.type){case"space":return{kind:"space",space:e.id};case"collection":return{kind:"collection",collection:e.id};case"page":return{kind:"page",space:e.space,page:e.id};case"block":case"tab":case"swagger-response":case"swagger-parameter":throw new Error(`Invalid DND item "${e.type}"`);default:De(e)}}c();var gI=C(O());function Ki(e,t){let[o,n,r]=ls(e,t);return(0,gI.useEffect)(()=>{r(qv(),{captureDraggingState:!0})},[r]),[o,n,r]}c();var pc=JSON.parse('{"block":"block_UxARL","hitArea":"hitArea_Rr7uN","hideTransition":"hideTransition_7DB9z"}');c();var Nl=C(O());var hI=Nl.default.createContext({current:new Map});function yI(e){let{original:t,modified:o,children:n}=e,r=Nl.default.useRef(new Map),i=Nl.default.useMemo(()=>t===void 0?new Map:mC(t||Xc.create(),o),[t,o]);return r.current=i,Nl.default.createElement(hI.Provider,{value:r},n)}function vI(e){let t=Nl.default.useContext(hI);return t.current instanceof Map?t.current.get(e.key):t.current}c();var Ra=C(O());var Pa=Fp(e=>e.isPDF?{width:793.92,height:1123.2}:{width:750,height:500},{height:!1}),Gv={contentReferenceContext:{},uploadFiles:()=>{throw new Error("uploadFiles is not implemented, it should be passed as a prop to the ContentEditor component")},updateFile:()=>{throw new Error("updateFile is not implemented, it should be passed as a prop to the ContentEditor component")},logAnalyticsEvent:()=>{},blockLayoutComponent:({children:e})=>Ra.createElement(Ra.Fragment,null,e),integrationBlocksRemote:lf(()=>{throw new Error("not implemented")}),getIntegrationsBlocks:()=>({})},ae=Ra.createContext(Gv),Gr=Ra.createContext({sections:jc(),active:null,selected:null,setActive:()=>{}}),ds=Ra.createContext("left"),Un=Ra.createContext("root");c();var mo=C(O());c();var Hr=JSON.parse('{"conflicts":"conflicts_NH0YT","toolbarConnector":"toolbarConnector_rKw9X","conflictBase":"conflictBase_F-gkn","conflictHead":"conflictHead_qDgkT","verticalConnector":"verticalConnector_6gQQw","conflictBadge":"conflictBadge_rJISv","highlightContainer":"highlightContainer_T2jbl","highlight":"highlight_r-5El","main":"main_K0HuP","current":"current_-GeKS"}');function SI(e){let{node:t,editor:o,children:n}=e,{blockLayoutComponent:r}=mo.useContext(ae),i=ci.hasBlockConflictFrom(t,"base"),a=ci.hasBlockConflictFrom(t,"head");return!a&&!i?mo.createElement(mo.Fragment,null,n):mo.createElement(Z,{style:[Hr.conflicts,N.flex.column]},i?mo.createElement(r,{renderMode:"centered"},mo.createElement(bI,{node:t,editor:o,style:[Hr.conflictBase,N.margin.smallBottom,N.margin.mediumTop]})):null,mo.createElement(Z,{style:Hr.highlightContainer},mo.createElement(Z,{style:[Hr.highlight,{[Hr.main]:i,[Hr.current]:a}]}),i?mo.createElement(Z,{style:[Hr.verticalConnector]}):null,n,a?mo.createElement(Z,{style:[Hr.verticalConnector]},mo.createElement(Z,{style:[Hr.conflictBadge]},mo.createElement(co,{kind:"secondary",icon:S.Conflict}))):null),a?mo.createElement(r,{renderMode:"centered"},mo.createElement(bI,{node:t,editor:o,style:[Hr.conflictHead,N.margin.smallTop,N.margin.mediumBottom]})):null)}function bI(e){let{node:t,editor:o,style:n}=e,[,r]=R(D),i=()=>{o.change(a=>{ci.pickConflict(a,t.key)})};return mo.createElement(Z,{contentEditable:!1,style:[Hr.toolbarConnector,N.flex.row,n]},ci.isConflictKeyFrom(t.key,"base")?mo.createElement(B,{icon:pt(S.Check,{style:[r.merge]}),rounded:!0,size:"small",kind:"secondary",style:[g.Margin.mediumRight],title:"Pick recent edits made on the main content",tooltipPreferredPlacement:"top",onPress:i},"Keep primary"):mo.createElement(B,{icon:pt(S.Check,{style:[r.primary]}),rounded:!0,size:"small",kind:"secondary",title:"Pick edits made on this change request",tooltipPreferredPlacement:"bottom",onPress:i},"Keep changed"))}var CI=ct({key:"hoveredBlocks",default:[]}),o2=qc({key:"isSelectedHoveredBlock",get:e=>({get:t})=>{let o=t(CI),n=o.length?o[o.length-1]:void 0;return!!n&&n===e}});function ge(e){let{tag:t,contentProps:o={},commandIcon:n,commandIconAnimatedAngle:r,palette:i,...a}=e,{node:s,parent:l,ancestors:u,editor:d,attributes:m,isFocused:p,children:f,isSelectedBlock:h,isBlockSelection:y}=a,{readOnly:w}=d,k=vI(s),x=Ye(),P=oi(CI),I=Xo(o2(s.key)),{blockLayoutComponent:_,rightGutterComponent:M,logAnalyticsEvent:T,onBlockHover:L}=et.useContext(ae),q=Ll({node:s,ancestors:u,diff:k,isBlockSelection:y}),G=F.useInteractiveState({onHoverIn:()=>{ya.includes(s.type)||P(Y=>[...Y,s.key]),L==null||L(s.key)},onHoverOut:()=>{P(Y=>Y.filter(oe=>oe!==s.key)),L==null||L(null)}}),U=G.hovered&&I,H=et.createElement(fe,{"data-block-content":s.key,...o,style:[v.flex1,o.style]},w?null:et.createElement(xv,{isBlockSelection:y,isSelected:h}),f);return w?et.createElement(_,{node:s==null?void 0:s.key,renderMode:q.renderMode,interactive:G},et.createElement(Pa.View,{isPDF:x},et.createElement(Z,{as:t,...m,...G.domEvents,style:[pc.block,(l.object!=="block"||l.type!==$c)&&q.blockStyle.style],inlineStyle:q.blockStyle.inlineStyle},H,M&&q.rightGutterComponent?et.createElement(M,{nodeKey:s.key,visible:U,shortcutsActive:p,buttonSize:q.rightGutterComponent.size,style:q.rightGutterComponent.style,readOnly:w}):null))):et.createElement(r2,{key:s.key,interactive:G,layout:q,isPDF:x,isHovered:U,BlockLayoutComponent:_,RightGutterComponent:M,logAnalyticsEvent:T,diff:k,...e},H)}function n2(e,t){if(!(t!=null&&t.current))return;let o=t.current.getBoundingClientRect(),n=.5*(o.bottom-o.top),r=e.getClientOffset();return r?r.y-o.top<n?"before":"after":void 0}function r2(e){var ei;let{tag:t,commandIcon:o,commandIconAnimatedAngle:n,palette:r,interactive:i,layout:a,isPDF:s,isHovered:l,BlockLayoutComponent:u,RightGutterComponent:d,logAnalyticsEvent:m,diff:p,...f}=e,{node:h,parent:y,editor:w,attributes:k,isFocused:x,children:P,isSelectedBlock:I,isBlockSelection:_}=f,{readOnly:M}=w,T=_&&w.value.selection.isExpanded,L=et.useMemo(()=>T?{type:"block-range",item:{type:"block-range",id:h.key,previewLabel:"Move blocks"}}:{type:"block",item:{type:"block",id:h.key,blockType:h.type,previewLabel:"Move block"}},[T,h.key,h.type]),[{dragging:q},G]=Ki({...L,canDrag:()=>!M,collect:st=>({dragging:st.isDragging()||I&&st.getItemType()==="block-range"})}),[U,H]=et.useState(),Y=et.useRef(null),oe=y.nodes.last()===h,[ce,Ee]=En({accept:["block","block-range","page","space","collection"],drop:(st,nn)=>{nn.didDrop()||w.change(Ht=>{if(st.type==="block-range")Ht.moveBlockRangeSelectionTo(h.key,U==="after"?1:0),m({type:"edit_page_document_move_block_range",method:"dnd",rangeSize:Ht.value.blocks.size});else if(st.type==="block"){U==="before"?Ht.moveBeforeNodeByKey(st.id,h.key):Ht.moveAfterNodeByKey(st.id,h.key);let Dt=w.value.document.getParent(st.id);m({type:"edit_page_document_move_block",blockType:st.blockType,method:"dnd",toParent:y.object==="block"?y.type:y.object,fromParent:(Dt==null?void 0:Dt.object)==="block"?Dt==null?void 0:Dt.type:Dt==null?void 0:Dt.object})}else{let Dt=Ks.createContentRefBlock(fI(st));U==="before"?Ht.insertNodeBeforeByKey(h.key,Dt):Ht.insertNodeAfterByKey(h.key,Dt)}})},canDrop:st=>!(!Re(y,st.type==="block"?st.blockType:ha)||st.type==="block"&&st.id===h.key||st.type==="block-range"&&w.value.blocks.find(nn=>nn.key===h.key)),hover:(st,nn)=>{if(!nn.canDrop())return;let Ht=n2(nn,Y);U!==Ht&&H(Ht)},collect:st=>({highlighted:st.isOver({shallow:!0})&&st.canDrop()})}),{rightGutter:Ne,controls:kt,diff:Go}=i2({isBlockSelection:_,isDragging:q,isSelectedBlock:I,readOnly:M,value:w.value}),Jr=Ee(Y);return et.createElement(SI,{node:h,editor:w},et.createElement(u,{node:h==null?void 0:h.key,renderMode:a.renderMode,interactive:i},et.createElement(Pa.View,{isPDF:s},et.createElement(Z,{as:t,...k,style:[pc.block,N.flex.row,q&&N.opacity.translucent,a.blockStyle.style,pp,{[mp]:ce.highlighted&&(!oe||oe&&U==="before"),[nl]:ce.highlighted&&oe&&U==="after"}],inlineStyle:a.blockStyle.inlineStyle,ref:Jr},Go&&p&&a.diffLine&&p.type!=="unmodified"?et.createElement(Wf,{diff:p,highlighted:l,...a.diffLine,style:[(ei=a.diffLine)==null?void 0:ei.style,Dl.noSelect]}):null,kt&&a.controlsButton?et.createElement(Z,{contentEditable:!1,style:[pc.hitArea],inlineStyle:a.controlsButton.hitArea},et.createElement(IO,{editor:w,nodeKey:h.key,visible:l,shortcutsActive:x,palette:T?void 0:r,size:a.controlsButton.size,dragHandleRef:G,style:[a.controlsButton.style,pc.hideTransition],isDragging:q})):null,P,Ne&&d&&a.rightGutterComponent?et.createElement(d,{nodeKey:h.key,visible:l,shortcutsActive:x,buttonSize:a.rightGutterComponent.size,style:[a.rightGutterComponent.style,Dl.hideTransition],readOnly:M}):null,a.diffBefore?et.createElement(wI,{style:a.diffBefore.style,size:a.diffBefore.size}):null,a.diffAfter?et.createElement(wI,{style:a.diffAfter.style,size:a.diffAfter.size}):null))))}function wI(e){let{style:t,size:o}=e;return et.createElement(fe,{editable:!1,style:[t,Dl.avoidCalculatingBounds,Dl.diffRemoved,Dl.noSelect],"data-hide-on-drag":!0},et.createElement(Xn,{tooltip:"A block has been removed in this change request",preferredPlacement:"top"},(n,r)=>et.createElement(F.TouchableOpacity,{ref:r,style:Dl.diffContainer,...n.events},et.createElement(S.DiffRemoved,{size:o,style:[zf.deleted]}))))}function i2(e){let{isDragging:t,isBlockSelection:o,isSelectedBlock:n,readOnly:r,value:i}=e,{selection:a}=i;return et.useMemo(()=>r?{controls:!1,diff:!1,rightGutter:!0}:o?{controls:n,diff:!0,rightGutter:!1}:{controls:!a.isExpanded,diff:!0,rightGutter:!a.isExpanded},[a.isExpanded,t,o,n,r])}var Dl=X.create({diffContainer:{display:"flex",flexDirection:"column",alignItems:"center",height:"100%",opacity:.5},diffRemoved:{paddingTop:(dc*2-E.ICON_XS)/2,height:dc*2,position:"absolute"},hideTransition:{transition:"opacity 0.2s ease-in-out"},hitArea:{position:"absolute",backgroundColor:"transparent"},avoidCalculatingBounds:{width:0,overflow:"visible"},noSelect:{userSelect:"none"}});c();var nt=C(O());c();var Qf=JSON.parse('{"placeholder":"placeholder_HCCie","instructions":"instructions_YvYKU","shortcuts":"shortcuts_v-WHU"}');c();var un=C(O());c();var FI=[{key:"youtube",title:"Youtube",icon:kI()},{key:"soundcloud",title:"Soundcloud",icon:xI()},{key:"loom",title:"Loom",icon:OI()},{key:"github",title:"GitHub Gist",icon:_I(),iconDark:II()},{key:"framer",title:"Framer",icon:RI(),iconDark:PI()},{key:"codepen",title:"Codepen",icon:TI(),iconDark:EI()},{key:"dribbble",title:"Dribbble",icon:MI()},{key:"trello",title:"Trello",icon:LI()},{key:"typeform",title:"Typeform",icon:NI(),iconDark:DI()},{key:"google-docs",title:"Google Docs",icon:AI()},{key:"google-sheets",title:"Google Sheets",icon:BI()},{key:"google-slides",title:"Google Slides",icon:zI()},{key:"google-form",title:"Google Forms",icon:WI()}];c();var $i=C(O());W();function VI(e){let{onInsert:t,onClose:o}=e,{logAnalyticsEvent:n}=$i.useContext(ae),[r,i]=$i.useState(""),a=Er(r),s=()=>{if(!a)return;let l=km(r);t(Am.createEmbedBlock(l)),n({type:"edit_page_document_insert_block",from:"embed",blockType:rn,embedHostname:new URL(l).hostname})};return $i.createElement(Vt,{title:"Embed a URL",subtitle:"Insert a URL to embed a live preview. Works with YouTube, Google Drive, Vimeo, and more.",onClose:o,footer:$i.createElement(b,{style:[v.directionRow,v.justifyContentEnd]},$i.createElement(B,{kind:"secondary",onPress:o,style:g.Margin.smallRight},"Cancel"),$i.createElement(B,{kind:"primary",disabled:!a,onPress:s},"Insert"))},$i.createElement(jt,{autoFocus:!0,label:"URL",value:r,onChangeText:i,onSubmit:s,placeholder:"Paste a URL or type it",feedback:a||!r?{type:"none"}:{type:"danger"}}))}c();var dt=C(O());W();c();var Xv=C(O());c();var yi=Lr({getValue:async([e,t,o])=>{let n=[];return!e||!AC(e,t)?[null,n,!1]:await Iu(async()=>[await DC(e,t,{getDocument:i=>(n.some(a=>la(a)===la(i))||n.push(i),Js.readAsync(i)),getCollection:i=>(n.some(a=>la(i)===la(a))||n.push(i),Js.readAsync(i))}),n,!1],[null,n,!0])},toJS(e){return[e[0],e[1].map(fy),e[2]]},fromJS(e){return[e[0],e[1].map(gy),e[2]]}}),Jf=Lr({getValue:async([e,t])=>{let o=[];return await Iu(async()=>[await Km(e,t,{getDocument:r=>(o.some(i=>la(i)===la(r))||o.push(r),Js.readAsync(r)),getCollection:r=>(o.some(i=>la(r)===la(i))||o.push(r),Js.readAsync(r))}),o,!1],[null,o,!0])},toJS(e){return[e[0],e[1].map(fy),e[2]]},fromJS(e){return[e[0],e[1].map(gy),e[2]]}});c();var Ui=C(O());c();var qI=gp("0dc87861cc2f97f4b8aa90517de6c6f7d7add292c36eff9ffb4a127ad3126faa",()=>import("https://app.gitbook.com/public/app/chunks/ShareModalBody.lazycomponent-WQNDEYY6.min.js"));function GI(e){let{content:t}=e,{selectedTab:o,changeSelectedTab:n,opened:r,close:i}=j1("share");return Ui.createElement(ht,null,r?Ui.createElement(Vt,{size:"xlarge",onClose:i},Ui.createElement(Ui.Suspense,{fallback:Ui.createElement(jk,{sidebar:Ui.createElement(Oo,{size:"large"})},Ui.createElement(Oo,{size:"large"}))},Ui.createElement(qI,{tab:o||Nx(t),onChangeTab:n,...e}))):null)}c();var eg=C(O());function ms(){let{navigate:e,getNavigationURL:t,getNavigationLinkProps:o}=ve();return eg.useMemo(()=>{let r=(l,u)=>{let d=xt(l,u);if(d!==null)return t({current:Hv(d)})},i=(l,u)=>{let d=xt(l,u);if(d!==null)return o({current:Hv(d)})},a=(l,u={})=>{let{replace:d=!1}=u;e({current:Hv(l,u)},{replace:d})};return{getNavigationHref:r,getNavigationProps:i,navigateToPagePath:a,navigateToPage:(l,u,d)=>{let m=xt(l,u);m!==null&&a(m,d)}}},[e])}function Hv(e,t={}){let{preserveSideSheet:o=!1,preserveComments:n=!0,sideSheet:r}=t;return i=>{var a;return{page:e,...!o&&!r?{sideSheet:void 0}:{},...r?{sideSheet:r}:{},comments:n&&i.type==="space"&&((a=i.sideSheet)==null?void 0:a.type)==="comments"?{...i.sideSheet,node:void 0}:void 0}}}function HI(e){let{to:t}=e;return eg.createElement(Rp,{to:{screen:{page:t,sideSheet:void 0}}})}function ln(e,t,o={}){let{document:n,...r}=t,{space:i,revision:a}=t,{withSearch:s=!0,accept:l=["url","user","anchor","page","space","collection","file"],position:u}=o,d=[];return l.includes("url")&&d.push({key:"url",commands:m=>{let{text:p}=m.query;if(!p||!Hc(p))return[];let f=Xm(p);if(f){let[h]=Jf.read([f,r]),[y]=yi.read([h,r]);if(h&&y)return[{key:p,title:y.text,icon:S.ArrowUpRight,trigger:()=>{e(h)}}]}return[{key:p,title:`Link to "${p}"`,icon:S.Link,trigger:()=>{e({kind:"url",url:p})}}]}}),l.includes("anchor")&&n&&d.push({key:"anchors",commands:()=>KI(n,{},e)}),l.includes("page")&&i&&a&&d.push(XI(i,a,e,{accept:l,withSearch:s,targetCurrentSpace:!0})),l.includes("space")&&d.push({key:"spaces",commands:m=>tc.read({query:m.query.text,types:["spaces"]}).map(f=>{if(f.index!=="spaces")return null;let h=f.object.objectID,[y]=cl([da(h)]);return y?{key:h,icon:({size:w})=>Xv.createElement(Np,{space:f.object,size:w}),title:f.object.title,trigger:()=>{e({kind:"space",space:h})},descendant:l.includes("page")?()=>ne({search:s?"Select page\u2026":void 0,groups:[XI(h,y.revision,e,{accept:l,withSearch:s,targetCurrentSpace:h===i})]}):void 0}:null}).filter(me)}),l.includes("collection")&&d.push({key:"collections",commands:m=>tc.read({query:m.query.text,types:["collections"]}).map(f=>f.index!=="collections"?null:{key:f.object.objectID,title:f.object.title,trigger:()=>{e({kind:"collection",collection:f.object.objectID})}}).filter(me)}),l.includes("user")&&d.push({key:"users",commands:m=>tc.read({query:m.query.text,hitsPerPage:8,types:["users"]}).map(f=>f.index!=="users"?null:{key:f.object.objectID,icon:({size:h})=>Xv.createElement(ka,{user:f.object,size:h}),title:f.object.displayName,subtitle:f.object.email,trigger:()=>{e({kind:"user",user:f.object.objectID})}}).filter(me)}),ne({search:s?"Type url or reference\u2026":void 0,groups:d,position:u})}function k2(e,t,o,n){return ne({search:"Select page or heading\u2026",groups:[{key:"page",commands:[{key:"pick",title:`Link to "${t.title}"`,icon:S.Page,trigger:()=>{o({kind:"page",page:t.key,space:n.targetCurrentSpace?void 0:e})}}]},{key:"anchors",commands:()=>x2(e,t,{page:t.key,space:n.targetCurrentSpace?void 0:e},o)}]})}function XI(e,t,o,n){let{accept:r,withSearch:i,targetCurrentSpace:a}=n;return{key:"space",commands:()=>{let s=kx({space:e,revision:t});return s?Object.values(s.pages).filter(l=>l.kind!=="link").map(l=>({key:l.key,title:l.title,subtitle:xt(s,l.key),icon:l.kind==="group"?S.AddPageGroup:S.Page,trigger:()=>{o({kind:"page",page:l.key,space:n.targetCurrentSpace?void 0:e})},descendant:r&&r.includes("anchor")&&l.kind==="sheet"?()=>({...k2(e,l,o,{targetCurrentSpace:a}),...i?{}:{search:void 0}}):void 0})):[]}}}function x2(e,t,o,n){if(!t.sheet)return[];let[r]=rv([{spaceKey:e,sheetKey:t.sheet}]);if(!r)return[];let{document:i}=Vm(r.body);return KI(i,o,n)}function KI(e,t,o){return Fm(e).filter(r=>!!r.anchor).map(r=>{let i=(()=>{switch(r.type){case Ae:return S.Heading1;case Fe:return S.Heading2;case Qe:return S.Heading3;case ko:return S.Swagger;case Li:return S.BlockExpandable;case ur:case In:return S.Tabs;case null:return S.Hash;default:De(r.type)}})();return{key:r.key,icon:i,title:r.title,trigger:()=>{o({kind:"anchor",anchor:r.anchor,...t})}}})}c();var Bl=C(O());c();var fc=C(O());W();function Al(e){let{file:t,size:o=E.ICON_M}=e,[,n]=R(_2);return fc.createElement(b,{style:[n.fileTileIcon,{width:o,height:o}]},t&&qa(t)?fc.createElement(Wo,{style:n.fileTilePreview,source:{uri:gi(t.downloadURL,{width:o})},accessibilityLabel:t.name}):fc.createElement(O2,{file:t,size:o*.65}))}function O2(e){let{file:t,...o}=e;return t?Qc(t)?fc.createElement(S.Swagger,{...o}):fc.createElement(S.Paperclip,{...o}):fc.createElement(S.Trashcan,{...o})}var _2=z.create({fileTileIcon:e=>({backgroundColor:e.colors.background.muted,color:e.colors.text.muted,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:E.RADIUS_M}),fileTilePreview:{width:"100%",height:"100%",resizeMode:"cover",borderRadius:E.RADIUS_M,objectFit:"contain"}});function Kv(e,t={}){let{navigate:o,getNavigationURL:n}=ve(),[r,i]=Bl.useState(""),a=e.map(d=>[d,t,r]),s=yi.readMultiple(a),l=yi.readCacheUpdatesKey(a),u=mx(s.map(d=>d[1]).flat());return Bl.useEffect(()=>{i(u)},[u]),Bl.useMemo(()=>s.map(([d,m,p],f)=>{let h=e[f];return d?{title:d.text,icon:I2(h,d),secondaryIcon:R2(h,d),secondaryIconDescription:P2(h,d),href:typeof d.target=="string"?d.target:n({screen:d.target}),open:()=>{typeof d.target=="string"?Op(d.target):o({screen:d.target})},resolution:d}:{title:p?"Access denied":"Broken link",icon:void 0,href:"",open:()=>{}}}),[l,n,o])}function jn(e,t={}){return Kv(e?[e]:[],t)[0]||{title:"Broken link",icon:null,href:"",open:()=>{}}}function I2(e,t){var o,n,r,i;if(e.kind==="url")return S.ExternalLink;if((o=t.extra)!=null&&o.user)return pt(ka,{user:t.extra.user});if((n=t.extra)!=null&&n.file)return pt(Al,{file:t.extra.file});if((r=t.extra)!=null&&r.space)return pt(Np,{space:t.extra.space});if((i=t.extra)!=null&&i.page&&t.extra.page.emoji)return pt(_o,{code:t.extra.page.emoji})}function R2(e,t){switch(e.kind){case"user":return S.AtSign;case"anchor":return S.Hash;case"page":return S.Page;case"space":return S.Space;case"collection":return S.Collection;case"url":return S.ExternalLink}}function P2(e,t){switch(e.kind){case"user":return"User mention";case"anchor":return"Link to a page's anchor";case"page":return"Link to a page";case"space":return"Link to a space";case"collection":return"Link to a acollection";case"url":return"External URL"}}function og(e){let{label:t,labelDescription:o,value:n,onChangeValue:r,placeholder:i,context:a={},accept:s,size:l="large",disabled:u=!1}=e,[d,m]=dt.useState(!1),[p,f]=dt.useState(!1),[h,y]=dt.useState(""),w=dt.useRef(null),k=dt.useRef(null),[,x]=R(E2),P=de(w);dt.useEffect(()=>{if(!h||!d||d&&!p){P.close();return}P.opened?P.typeQuery(h):P.open(Ya(ln(M=>{r(M),f(!1),k.current&&k.current.blur()},a,{withSearch:!1,position:{width:"anchor"},accept:s}),h))},[h,d]),dt.useEffect(()=>{d&&k.current&&k.current.focus()},[d]);let I=M=>{y(M),f(!0)},_=()=>{h||(f(!1),r()),Hc(h)&&(r({kind:"url",url:h}),f(!1)),m(!1)};return dt.createElement(b,null,t?dt.createElement(b,{style:g.Margin.smallBottom},dt.createElement(il,null,t),o?dt.createElement(b,{style:g.Margin.xsmallTop},dt.createElement(vp,null,o)):null):null,d||!n?dt.createElement(jt,{testID:"contentRef.input",ref:k,wrapperRef:w,size:l,value:h,onChangeText:I,onBlur:_,onFocus:()=>m(!0),placeholder:i,disabled:u}):dt.createElement(We,{testID:"contentRef.fakeInput",onPress:()=>m(!0),style:[x.input,qk[l],v.directionRow,v.alignCenter]},dt.createElement(dt.Suspense,{fallback:dt.createElement(Ce,{size:"small"})},dt.createElement(T2,{value:n,context:a,size:l}))))}function T2(e){let{value:t,context:o,size:n}=e,[,r]=R(D),i=jn(t,o);return dt.createElement(b,{style:[v.flex1,v.directionRow,v.alignCenter]},i.icon?dt.createElement(b,{style:[g.Margin.smallRight]},dt.createElement(i.icon,{size:E.ICON_S,style:r.textMuted})):null,dt.createElement(b,{style:[v.flex1]},dt.createElement(mr,{style:[Vk[n],r.text],testID:"contentRef.resolvedTitle"},i.title)))}var E2=z.create({input:e=>({backgroundColor:e.colors.background.main,borderWidth:1,borderColor:e.colors.border.main})});c();var ng=C(O());var vd=ng.forwardRef(function(t,o){let{contentRef:n,space:r,revision:i,style:a,kind:s="default",...l}=t,u=jn(n,{space:i.space,revision:i.key});return ng.createElement(Vi,{ref:o,url:u.href,onPress:d=>{d.nativeEvent.metaKey||d.nativeEvent.ctrlKey||(d.preventDefault(),u.open())},kind:s,sameWebTab:!1,style:[so.Body,so.SemiBold,a],numberOfLines:2,ellipsizeMode:"tail",accessibilityLabel:t.title,...l},t.title)});c();async function $I(e,t={}){let[o]=await yi.readAsync([e,t]);return{uri:o==null?void 0:o.target}}function rg(e,t={}){var r,i,a,s;let o=jn(e,t);if(!o.href)return null;let n=(i=(r=o.resolution)==null?void 0:r.extra)==null?void 0:i.file;return{uri:o.href,width:(a=n==null?void 0:n.dimensions)==null?void 0:a.width,height:(s=n==null?void 0:n.dimensions)==null?void 0:s.height}}c();function ps(e,t){return{href:e.href,onPress:o=>{if(t&&t(o),o){if(o.isDefaultPrevented()||o.nativeEvent.metaKey||o.nativeEvent.ctrlKey)return;o.preventDefault()}e.open()}}}c();var $v=C(O());function UI(e){let{block:t,style:o,size:n=E.ICON_M}=e;return t.icon?$v.createElement(Wo,{source:{uri:gi(t.icon,{width:n})},style:[{width:n,height:n,borderRadius:n/8}]}):$v.createElement(S.Integrations,{size:n,style:o})}c();c();var Zn=C(O());c();var zl=C(O());c();var po=C(O());W();c();var ig=C(O());W();function jI(e){let{description:t,readOnly:o,blockProps:n}=e,{node:r}=n;return!t||o&&"fragment"in t&&si(r.fragments.get(t.fragment))?null:ig.createElement(b,{style:g.Margin.mediumTop},"text"in t?ig.createElement(al,{markdown:t.text}):ig.createElement(Tn,{fragment:t.fragment}))}c();var bd=C(O());W();c();var gc={get:K.primary.base,post:K.green.base,put:K.orange.base,options:K.violet.base,head:K.orange.base,delete:K.scarlet.base,patch:K.orange.base,connect:K.orange.base,trace:K.orange.base};var M2=$.createResponsiveComponent(qn);function ag(e){let{readOnly:t,method:o,setMethod:n}=e,[,r]=R(D),[,i]=R(L2),a=bd.default.useRef(null),s=de(a),l=ne({groups:[{key:"methods",commands:ml.map(m=>({key:m,title:m.toUpperCase(),trigger:()=>{n&&n(m)}}))}]}),u=()=>{s.open(l)},d=bd.default.createElement(M2,{style:i.badge,backgroundColor:gc[o]||K.orange.base,mobileStyle:[i.mobileMethodBadge],desktopStyle:[i.httpMethodBadge]},bd.default.createElement($.Text,{desktopStyle:[r.GroupTitle,r.Bold],mobileStyle:[r.MobileCaption,r.Bold],style:[r.textInsideColor,r.Bold,r.Uppercase]},o));return t?d:bd.default.createElement(We,{ref:a,onPress:u},d)}var L2=z.create({badge:{width:"fit-content"},httpMethodBadge:{borderRadius:E.XS,height:E.XS,paddingHorizontal:g.small,justifyContent:"center"},mobileMethodBadge:{borderRadius:E.XXS,height:E.XXS,paddingHorizontal:g.small,justifyContent:"center"}});var YI=$.createResponsiveComponent(F.View),N2=$.createResponsiveComponent(F.View.Child);function ZI(e){let{readOnly:t,blockProps:o,baseUrl:n,summary:r,path:i,method:a,description:s,opened:l,setOpened:u}=e,{node:d,editor:m}=o,[,p]=R(D),f=po.default.useRef(),h=po.default.useRef(),y=po.default.useRef();function w(){u(!l)}let k=F.useInteractiveComponent(l?S.ChevronDown:S.ChevronRight);return po.default.createElement(b,{style:[v.directionColumn,v.flex1,g.Padding.smallBottom]},po.default.createElement($.View,{style:[v.alignCenter,g.Padding.medium,v.wrap],mobileStyle:v.flex1,desktopStyle:v.directionRow},po.default.createElement(F.TouchableOpacity,{style:g.Padding.mediumRight,onPress:w},po.default.createElement(k.Child,{size:E.ICON_M,style:p.textMuted,activeStyle:p.primary})),po.default.createElement(b,{style:[g.Margin.mediumRight]},po.default.createElement(ag,{readOnly:t,method:a,setMethod:x=>{m.change(P=>{xe.setMethod(P,d.key,x)})}})),po.default.createElement(YI,{style:[v.wrap],mobileStyle:[v.flex1]},po.default.createElement(pr,{ref:f,component:xa,value:n,placeholder:"https://api.gitbook.com/v1",onChangeText:x=>{m.change(P=>{xe.setBaseUrl(P,d.key,x)})},style:[p.Label,p.textMuted,sg.breakWord],selectTextOnFocus:!0,readOnly:t,onSubmitEditing:()=>{h.current&&h.current.focus()}})),po.default.createElement(YI,{style:[v.directionRow],mobileStyle:[sg.mobileEndpoint,g.Padding.xsmallTop]},po.default.createElement(pr,{ref:h,component:xa,value:i,placeholder:"/users",onChangeText:x=>{m.change(P=>{xe.setPath(P,d.key,x)})},style:[p.Label,p.text,p.Bold,sg.breakWord],selectTextOnFocus:!0,readOnly:e.readOnly,onSubmitEditing:()=>{y.current&&y.current.focus()}}),po.default.createElement(N2,{style:[g.Margin.xsmallLeft,$e.hidden],hoverStyle:[$e.visible],mobileStyle:{display:"none"}},po.default.createElement(up,{size:"xsmall",content:`${n}${i}`})))),po.default.createElement(b,{style:sg.headerBody},po.default.createElement(b,null,po.default.createElement(pr,{ref:y,component:xa,value:r,placeholder:"Operation summary",onChangeText:x=>{m.change(P=>{xe.setSummary(P,d.key,x)})},style:[p.Heading3,p.text],readOnly:t,displayMode:"block",onSubmitEditing:()=>{m.change(x=>{if(l&&s&&"fragment"in s){let P=d.fragments.get(s.fragment);P&&x.collapseToStartOf(P)}else ft(x,d);x.focus()})}})),l?po.default.createElement(jI,{readOnly:t,description:s,blockProps:o}):null))}var sg=X.create({breakWord:{wordWrap:"anywhere"},mobileEndpoint:{paddingLeft:g.medium+E.ICON_M,flexBasis:"100%",flexGrow:1},headerBody:{paddingLeft:g.medium+E.ICON_M+g.medium}});c();var Cd=C(O());W();c();var Sd=C(O());W();function QI(e){let{blockProps:t}=e,{editor:o,node:n}=t,r=Sd.useRef(null),i=de(r),a=ne({groups:[{key:"parameters",commands:Uv.map(({location:l,title:u,description:d})=>({key:l,title:u,subtitle:d,trigger:()=>{o.change(m=>{xe.addParameter(m,n.key,l)})}}))}]}),s=()=>{i.open(a)};return Sd.createElement(b,null,Sd.createElement(B,{ref:r,title:"Add Parameter",icon:i.opened?S.X:S.Plus,kind:i.opened?"primary":"secondary",size:"small",rounded:!0,onPress:()=>s()}))}var Uv=[{location:"path",title:"Path",description:"Params in the URL path"},{location:"query",title:"Query",description:"Params in the query string"},{location:"header",title:"Header",description:"Params sent in headers"},{location:"cookie",title:"Cookie",description:"Params set via cookie"},{location:"body",title:"Body",description:"Params passed in body"}];c();var wd=C(O());W();c();var fo=C(O());W();c();var Uo=C(O());W();var JI=F.createInteractiveHandle("swagger-row");function cg(e){var G,U;let{dragItem:t,columns:o,isLast:n,children:r,palette:i,onDropBefore:a,onDropAfter:s,onInsertBefore:l,onInsertAfter:u,readOnly:d,opened:m,setOpened:p,node:f,ancestors:h}=e,[,y]=R(D2),w=Ll({node:f,ancestors:h}),[{dragging:k},x]=Ki({type:t.type,item:t,canDrag:()=>!e.readOnly,collect:H=>({dragging:H.isDragging()})}),[P,I]=En({accept:t.type,drop:(H,Y)=>{Y.didDrop()||a(H)},canDrop:H=>t.id!==H.id&&t.blockKey===H.blockKey,collect:H=>({highlighted:H.isOver()&&H.canDrop()})}),[_,M]=En({accept:t.type,drop:(H,Y)=>{Y.didDrop()||s(H)},canDrop:H=>t.id!==H.id&&t.blockKey===H.blockKey,collect:H=>({highlighted:H.isOver()&&H.canDrop()})}),T=Uo.useRef(null),L=Dr(T,x),q=de(T);return Uo.createElement(b,null,Uo.createElement(b,null,Uo.createElement(F.View,{handle:JI,style:[v.directionRow,v.alignCenter,g.Padding.largeRight,k?$e.translucent:$e.visible]},d?null:Uo.createElement($.View,{style:[v.justifyContentCenter,(G=w.controlsButton)==null?void 0:G.style],mobileStyle:"hidden"},Uo.createElement(F.View.Child,{descendantOf:JI,activeStyle:$e.visible,inactiveStyle:q.opened?{}:$e.hidden},Uo.createElement(B,{ref:L,icon:S.GrabberVertical,size:(U=w.controlsButton)==null?void 0:U.size,rounded:!0,kind:"secondary",title:`Click for options.
Drag to move.`,onPress:()=>{q.open(i())}}))),Uo.createElement($.View,{style:[v.flex1,v.directionRow],mobileStyle:[v.wrap,v.alignStart,g.Padding.smallVertical],desktopStyle:[v.alignStart,g.Padding.mediumVertical]},o.map((H,Y)=>Uo.createElement($.View,{key:Y,style:[g.Padding.smallRight],desktopStyle:[H.desktopSize],mobileStyle:[y.columnResetWidth,H.mobileSize]},H.content))),r&&p?Uo.createElement(b,{style:[g.Margin.mediumLeft]},Uo.createElement(B,{icon:m?S.ChevronDown:S.ChevronRight,onPress:()=>p(!m)})):null),m?Uo.createElement(b,null,r):null,n?null:Uo.createElement(b,{style:y.borderLine})),d?null:Uo.createElement(Fu,{ref:I,position:"top",dropHovered:P.highlighted,button:{kind:"secondary",icon:S.Plus,onPress:l}}),n&&!d?Uo.createElement(Fu,{ref:M,position:"bottom",dropHovered:_.highlighted,button:{kind:"secondary",icon:S.Plus,onPress:u}}):null)}var D2=z.create({borderLine:e=>({height:1,backgroundColor:e.colors.border.muted}),controlButtonWrapper:{position:"absolute",top:0,bottom:0,left:-E.BUTTON_S/2,width:E.BUTTON_S},columnResetWidth:{width:"auto"}});c();var hc=C(O());W();function lg(e){let{title:t,button:o,children:n}=e,[,r]=R(D);return hc.createElement(b,{style:g.Margin.largeTop},hc.createElement(b,{style:[v.directionRow,v.alignCenter,g.Padding.mediumBottom]},hc.createElement(b,{style:v.flex1},hc.createElement(A,{style:[r.Heading3,r.text]},t)),o?hc.createElement(b,{style:g.Padding.smallHorizontal},o):null),hc.createElement(b,null,n))}function ug(e){let{readOnly:t,blockProps:o,parameter:n,isLast:r,beforeOrderIndex:i,afterOrderIndex:a}=e,{node:s,editor:l}=o,[,u]=R(D),d=fo.useRef(),m={id:n.key,type:"swagger-parameter",blockKey:s.key,previewLabel:"Move parameter"},{name:p="",type:f="",required:h,description:y,properties:w={},items:k}=n.value,[,x]=R(z2),[P,I]=fo.useState(!1),_=Object.keys(w).length,M=_>0||!!k,T=s.fragments.get(n.key),L=Y=>{l.change(oe=>{xe.setParameterName(oe,s.key,n.key,Y)})},q=Y=>{l.change(oe=>{xe.setParameterType(oe,s.key,n.key,Y)})},G=Y=>{l.change(oe=>{xe.setParameterRequired(oe,s.key,n.key,Y)})},U=()=>{l.change(Y=>{xe.removeParameter(Y,s.key,n.key)})},H=f==="object"&&_>0?Object.entries(w).map(([Y,oe],ce)=>fo.createElement(ug,{key:Y,...e,isLast:ce===_-1,parameter:{key:Y,value:oe}})):f==="array"&&k?fo.createElement(ug,{...e,isLast:!0,parameter:{key:"items",value:k}}):null;return fo.createElement(cg,{...M?{opened:P,setOpened:I}:{},...o,readOnly:e.readOnly,dragItem:m,isLast:r,palette:()=>ne({groups:[{key:"edit-parameter",commands:[{key:"delete-parameter",title:"Delete",icon:S.Trashcan,trigger:U}]}]}),columns:[{content:t?fo.createElement(A,{selectable:!0,style:[u.Code,u.textMid]},p,h?fo.createElement(A,{style:[u.danger]},"*"):null):fo.createElement(xa,{placeholder:"id",onChangeText:L,value:p,style:[u.Code,u.textMid],selectTextOnFocus:!0,displayMode:"block",onSubmitEditing:()=>{d.current&&d.current.focus()}}),desktopSize:x.parameterColumnNameDesktop,mobileSize:x.parameterColumnNameMobile},{content:fo.createElement(xa,{ref:d,placeholder:"String",onChangeText:q,value:f,style:[u.Label,u.textMid],readOnly:t,selectTextOnFocus:!0,displayMode:"block",onSubmitEditing:()=>{l.change(Y=>{T&&Y.collapseToStartOf(T).focus()})}}),desktopSize:x.parameterColumnTypeDesktop,mobileSize:x.parameterColumnTypeMobile},{content:fo.createElement(fo.Fragment,null,y?fo.createElement(A,{style:[u.Label,u.textMid]},y):T?fo.createElement(Un.Provider,{value:"swaggerParameter"},fo.createElement(Tn,{fragment:n.key})):null),desktopSize:v.flex1,mobileSize:!y&&(!T||T.isEmpty)?x.parameterDescriptionEmptyColumnMobile:null},t?null:{content:fo.createElement(Yk,{value:h?"required":"optional",items:[{label:"Required",value:"required"},{label:"Optional",value:"optional"}],onValueChange:Y=>G(Y==="required")})}].filter(me),onInsertBefore:()=>{l.change(Y=>{xe.addParameter(Y,s.key,n.value.in,{before:i,after:n.value.orderIndex})})},onDropBefore:Y=>{l.change(oe=>{xe.moveParameter(oe,s.key,Y.id,n.value.in,{before:i,after:n.value.orderIndex})})},onInsertAfter:()=>{l.change(Y=>{xe.addParameter(Y,s.key,n.value.in,{before:n.value.orderIndex,after:a})})},onDropAfter:Y=>{l.change(oe=>{xe.moveParameter(oe,s.key,Y.id,n.value.in,{after:a,before:n.value.orderIndex})})}},H&&fo.createElement(b,{style:[x.borderTop]},H))}var z2=z.create({parameterColumnNameDesktop:{width:200},parameterColumnNameMobile:{flexGrow:1,flexShrink:1,flexBasis:"50%",marginBottom:g.small},parameterColumnTypeDesktop:{width:90},parameterColumnTypeMobile:{flexGrow:1,flexShrink:1,flexBasis:"50%"},parameterDescriptionEmptyColumnMobile:{display:"none"},borderTop:e=>({borderTopWidth:1,borderTopColor:e.colors.border.muted})});function eR(e){let{parametersGroup:t,location:o,isLast:n,...r}=e,[,i]=R(D),a=Uv.find(({location:s})=>s===o);return wd.createElement(b,{style:g.Margin.smallTop},wd.createElement(b,null,wd.createElement(A,{style:[i.Label,i.Bold,i.text]},a.title)),t.map((s,l)=>{let u=t[l-1],d=t[l+1],m=l===t.length-1;return wd.createElement(ug,{key:s.key,...r,parameter:s,isLast:m,beforeOrderIndex:u==null?void 0:u.value.orderIndex,afterOrderIndex:d==null?void 0:d.value.orderIndex})}))}function tR(e){let{parameters:t,readOnly:o,blockProps:n}=e,r=W2(t),i=Object.keys(r).length,a=xe.SORTED_PARAMETERS_LOCATIONS.filter(s=>!!r[s]);return Cd.createElement(lg,{title:"Parameters",button:e.readOnly?null:Cd.createElement(QI,{blockProps:n})},a.length>0?a.map((s,l)=>{let u=r[s];return Cd.createElement(eR,{key:s,readOnly:o,blockProps:n,location:s,parametersGroup:u,isLast:l===i-1})}):Cd.createElement(A,null,"No parameters"))}function W2(e){return e.reduce((t,o)=>{let n=t[o.value.in]||[];return t[o.value.in]=[...n,o],t},{})}c();var kd=C(O());W();c();var dg=C(iR());var H2={2:K.green.base,3:K.primary.base,4:K.orange.base,5:K.scarlet.base},X2=Object.entries(dg.message).map(([e,t])=>({code:e,message:t})),K2=new Jc(X2,{shouldSort:!0,threshold:.4,distance:100,keys:[{name:"code",weight:.6},{name:"message",weight:.4}]});function Yv(e){return H2[Math.floor(e/100)]||K.lightModeGreyScale.dark}function $2(e){return K2.search(e).map(t=>t.item)}function Zv({code:e,message:t}){let o=t||dg.message[e];return o?`${e}: ${o}`:`${e}`}function sR(e){let[t,o]=e.split(": ");return{code:Number(t),message:o}}var aR=[200,201,204,400,401,403,404,500].map(e=>{let t=String(e),o=dg.message[t];return{code:t,message:o}});function mg(e,t){let o={key:"responses",commands:r=>(r.query.text?$2(r.query.text):aR).slice(0,aR.length).map(a=>{let s=Zv(a);return{key:a.code,title:s,icon:pt(S.Dot,{style:{color:Yv(parseInt(a.code,10))}}),trigger:()=>{e(s)}}})},n=t?[{key:"edit-response",commands:[{key:"delete-response",title:"Delete response",icon:S.Trashcan,trigger:()=>{t()}}]},o]:[o];return ne({search:"Type status code\u2026",groups:n})}function cR(e){let{blockProps:t}=e,{node:o,editor:n}=t,r=kd.useRef(null),i=de(r),a=mg(l=>{n.change(u=>{xe.addResponse(u,o.key,l)})}),s=()=>{i.open(a)};return kd.createElement(b,null,kd.createElement(B,{ref:r,title:"Add Response",icon:i.opened?S.X:S.Plus,kind:i.opened?"primary":"secondary",size:"small",rounded:!0,onPress:()=>s()}))}c();var jo=C(O());W();c();var Ta=C(O());W();c();var yc=C(O());function lR(e){let{examples:t}=e,o=Object.keys(t),n=yc.useRef(null),r=de(n),[i,a]=yc.useState(o[0]);return i?yc.createElement(Ak,{code:t[i],syntax:U2(i),showToolbar:r.opened,toolbar:o.length>1?yc.createElement(B,{kind:"secondary",size:"small",ref:n,rightIcon:S.ChevronDown,onPress:()=>{r.open(ne({groups:[{key:"media-types",commands:o.map(s=>({key:s,title:s,trigger:()=>{a(s)}}))}]}))}},i):null}):null}function U2(e){return e.includes("json")?"js":e.includes("xml")?"xml":"js"}c();var _e=C(O());W();function uR(e){let[,t]=R(fR);return _e.createElement(Ti,{style:[t.container],horizontal:!0},_e.createElement(Qv,{...e,isRoot:!0}))}function Qv(e){let{schema:t}=e;if(t.type){let o=t.description||t.title;switch(t.type){case"object":return _e.createElement(dR,{name:"",properties:t.properties,requiredProperties:t.required,description:o,...e});case"array":return _e.createElement(mR,{name:"",items:t.items,description:o,...e});default:return _e.createElement(pR,{name:"",type:t.type,description:o,...e})}}else return t.anyOf?_e.createElement(pg,{type:"anyOf",options:t.anyOf}):t.oneOf?_e.createElement(pg,{type:"oneOf",options:t.oneOf}):t.allOf?_e.createElement(pg,{type:"allOf",options:t.allOf}):null}function dR(e){let{name:t,isRequired:o=!1,isRoot:n=!1,properties:r={},requiredProperties:i=[],description:a=""}=e,[s,l]=_e.useState(!1);return _e.createElement(gg,{name:t,type:"object",expandable:{expanded:s,setExpanded:l},required:o,isRoot:n,description:a},s?Object.entries(r).map(([u,d])=>{switch(d.type){case"object":let m=d.anyOf||d.oneOf||d.allOf;return m?_e.createElement(pg,{key:u,name:u,description:d.description||d.title,type:d.anyOf?"anyOf":d.oneOff?"oneOf":"allOf",options:m}):_e.createElement(dR,{key:u,name:u,properties:d.properties,requiredProperties:d.required,isRequired:i.includes(u),description:d.description});case"array":return _e.createElement(mR,{key:u,name:u,items:d.items,isRequired:i.includes(u),description:d.description});default:return _e.createElement(pR,{key:u,name:u,type:d.type,isRequired:i.includes(u),description:d.description})}}):null)}function mR(e){let{name:t,isRequired:o=!1,isRoot:n=!1,items:r={},description:i=""}=e,[a,s]=_e.useState(!1);return _e.createElement(gg,{name:t,type:`array[${r.type||""}]`,expandable:{expanded:a,setExpanded:s},description:i,required:o,isRoot:n},a?_e.createElement(Qv,{schema:r}):null)}var fg=E.ICON_S;function pg(e){let{name:t,type:o,options:n=[],isRoot:r=!1,description:i="",isRequired:a=!1}=e,[s,l]=_e.useState(!1);return _e.createElement(gg,{type:t?o:"",name:t||o,expandable:{expanded:s,setExpanded:l},description:i,isRoot:r,required:a,specialKeyword:!0},s?n.map((u,d)=>_e.createElement(Qv,{key:d,schema:u})):null)}function pR(e){let{name:t,type:o,isRequired:n=!1,isRoot:r=!1,description:i=""}=e;return _e.createElement(gg,{name:t,type:o,isRoot:r,required:n,description:i})}function gg(e){let{name:t,type:o,description:n,required:r,isRoot:i,expandable:a,specialKeyword:s,children:l}=e,[,u]=R(D),[,d]=R(fR),m=[u.Body,u.Bold,u.text],p=[g.Margin.xsmallLeft];return _e.createElement(b,{style:[v.directionColumn,i?null:g.Margin.mediumTop]},_e.createElement(b,{style:[v.directionRow,v.alignCenter]},_e.createElement(We,{onPress:a?()=>a.setExpanded(f=>!f):void 0},a?a.expanded?_e.createElement(S.ChevronDown,{size:fg,style:[u.textMuted]}):_e.createElement(S.ChevronRight,{size:fg,style:[u.textMuted]}):_e.createElement(b,{style:[d.placeholderIconWidth,d.placeHolderIconHeight]})),_e.createElement(b,{style:[v.directionRow,p]},t?_e.createElement(b,{style:[g.Margin.mediumRight]},s?_e.createElement(A,{style:m},t):_e.createElement(A,{selectable:!0,style:m},t,r?_e.createElement(A,{style:[u.danger,d.textFontCode]},"*"):null)):null,o?_e.createElement(A,{style:[u.Body,u.primary,d.textFontCode]},o):null)),_e.createElement(b,{style:[v.directionRow]},_e.createElement(b,{style:d.placeholderIconWidth},a!=null&&a.expanded?_e.createElement(b,{style:d.verticalLine}):null),_e.createElement(b,{style:[v.directionColumn,p,g.Padding.mediumRight,d.descriptionWidth]},n?_e.createElement(b,{style:[g.Margin.xsmallTop]},_e.createElement(al,{markdown:n,kind:"secondary"})):null,l)))}var fR=z.create({container:e=>({backgroundColor:e.colors.background.muted,padding:g.medium,borderRadius:e.radiuses.medium}),textFontCode:{fontFamily:ep},placeholderIconWidth:{width:fg},placeHolderIconHeight:{height:fg},verticalLine:e=>({width:1,height:"100%",backgroundColor:e.colors.border.main,marginHorizontal:"auto"}),descriptionWidth:{maxWidth:600}});function hg(e){let{examples:t,schema:o}=e,[n,r]=Ta.useState("example");return Ta.createElement(b,null,Ta.createElement(Za,null,Ta.createElement(Za.Tab,{active:n==="example",onPress:()=>r("example")},"Example"),o?Ta.createElement(Za.Tab,{active:n==="schema",onPress:()=>r("schema")},"Schema"):null),n==="example"?Ta.createElement(lR,{examples:t||{}}):null,n==="schema"&&o?Ta.createElement(uR,{schema:o}):null)}function hR(e){let{response:t,isLast:o,beforeOrderIndex:n,afterOrderIndex:r,blockProps:i}=e,{node:a,editor:s}=i,[,l]=R(D),[u,d]=jo.useState(!1),m={id:t.key,type:"swagger-response",blockKey:a.key,previewLabel:"Move response"},{status:p,description:f}=t.value,h="Response description",{code:y}=sR(p),w=a.fragments.get(t.key),k=w?si(w):!1,x=t.value.examples||{},P=t.value.schema,I=!e.readOnly||w&&!k||Object.keys(x).length>0||typeof P<"u",_=M=>{s.change(T=>{xe.setResponseDescription(T,a.key,t.key,M)})};return jo.createElement(cg,{...i,readOnly:e.readOnly,dragItem:m,isLast:o,opened:u,setOpened:d,palette:()=>mg(M=>{s.change(T=>{xe.setResponseStatus(T,a.key,t.key,M)})},()=>{s.change(M=>{xe.removeResponse(M,a.key,t.key)})}),columns:[{content:jo.createElement(b,{style:[v.directionRow,v.alignCenter]},jo.createElement(b,{style:[g.Margin.smallRight]},jo.createElement(S.Dot,{style:{color:Yv(y)},size:E.ICON_M})),jo.createElement(b,{style:v.flex1},jo.createElement(A,{style:[l.Label,l.Bold,l.text]},p))),desktopSize:gR.responseColumnStatusDesktop,mobileSize:gR.responseColumnStatusMobile},{content:jo.createElement(pr,{component:xa,placeholder:e.readOnly?void 0:h,onChangeText:_,value:f,style:[l.Label,l.textMid],readOnly:e.readOnly,displayMode:"block",onSubmitEditing:()=>{s.change(M=>{u&&w?M.collapseToStartOf(w):ft(M,a),M.focus()})}}),desktopSize:v.flex1}],onDropAfter:M=>{s.change(T=>{xe.moveResponse(T,a.key,M.id,{before:t.value.orderIndex,after:r})})},onDropBefore:M=>{s.change(T=>{xe.moveResponse(T,a.key,M.id,{before:n,after:t.value.orderIndex})})},onInsertBefore:()=>{s.change(M=>{xe.addResponse(M,a.key,parseInt(t.value.status,10)-1,{before:n,after:t.value.orderIndex})})},onInsertAfter:()=>{s.change(M=>{xe.addResponse(M,a.key,parseInt(t.value.status,10)+1,{before:t.value.orderIndex,after:r})})}},I?jo.createElement(b,{style:[v.flex1,g.Margin.mediumVertical]},w?jo.createElement(jo.Fragment,null,jo.createElement(Un.Provider,{value:"swaggerResponse"},jo.createElement(Tn,{fragment:t.key}))):jo.createElement(hg,{examples:x,schema:P})):null)}var gR=X.create({responseColumnStatusDesktop:{width:290},responseColumnStatusMobile:{flexBasis:"100%",flexGrow:1,flexShrink:0}});c();var xd=C(O());W();function yR(e){let{readOnly:t,responses:o,blockProps:n}=e;return xd.createElement(lg,{title:"Responses",button:t?null:xd.createElement(cR,{blockProps:n})},xd.createElement(b,{style:o.length>0&&g.Padding.mediumBottom},o.map((r,i)=>{let a=o[i-1],s=o[i+1];return xd.createElement(hR,{key:r.key,...e,response:r,isLast:i===o.length-1,beforeOrderIndex:a==null?void 0:a.value.orderIndex,afterOrderIndex:s==null?void 0:s.value.orderIndex})})))}c();var go=C(O());W();c();c();c();var vR=fp("429837f8b383ed2c4f85d02026ce73e42335b6233c1dc303af2b0f50fedfe256",()=>import("https://app.gitbook.com/public/app/chunks/parseSwaggerFile.lazy-3WWT6EVZ.min.js"));var bR=vR;var vc=Lr({getValue:async e=>{let t=(await bR.load()).default;return await t(e)},toJS:e=>Y2(e),fromJS:e=>Z2(e)});function Od(e,t){if(!e)return null;t||(t={path:Object.keys(e.paths)[0],method:"get"},t.method=Object.keys(e.paths[t.path])[0]);let o=e.paths[t.path],n=o==null?void 0:o[t.method];if(!n)return null;let r=Object.keys(e.paths).indexOf(t.path),i=ml.indexOf(t.method);return i=i>-1?i:ml.length,{operation:n,path:t.path,httpMethod:t.method,index:r*ml.length+i}}function Y2(e){return JSON.parse(JSON.stringify(e,Dx()))}function Z2(e){return JSON.parse(JSON.stringify(e),Ax())}function _d(e){let{onClose:t,data:o,multi:n,buttonText:r,onSelect:i,onRequestChangeSource:a}=e;if(!("ref"in o))throw new Error("SwaggerConfigurationOperation used with a manual API block, only OpenAPI is supported");let{contentReferenceContext:s}=go.default.useContext(ae),[l]=yi.read([o.ref,s]);if(typeof(l==null?void 0:l.target)!="string")throw new Error("SwaggerConfigurationOperation only handles refs with target as string");if(!ul(s.space&&s.revision?{space:s.space,revision:s.revision}:null))throw new Error("No revision present for OpenAPI configuration modal");let{result:d}=vc.readSafe(l.target),m=(d==null?void 0:d.paths)||{},p=Object.keys(m).reduce((x,P)=>{let I=m[P];return x.concat(Object.keys(I).map(_=>({path:P,method:_})))},[]),f=Od(d,o.method&&o.path?{method:o.method,path:o.path}:void 0),[h,y]=go.default.useState(f?{[f.index]:{path:f.path,method:f.httpMethod}}:{}),w=()=>{let x=Object.keys(h).map(Number).sort((P,I)=>P-I);i(x.map(P=>h[P])),t()},k=(x,P,I)=>{if(!n){y({[P]:x});return}if(I&&y({...h,[P]:x}),!I){let _={...h};delete _[P],y(_)}};return go.default.createElement(Vt,{onClose:t,title:"Choose API operation",footer:go.default.createElement(b,{style:[v.directionRow,v.justifySpaceBetween]},go.default.createElement(b,{style:[v.directionRow,v.justifyContentStart]},go.default.createElement(B,{size:"large",kind:"secondary",onPress:()=>{a()}},"Change API source")),go.default.createElement(b,{style:[v.directionRow,v.flex1,v.justifyContentEnd]},go.default.createElement(B,{size:"large",kind:"primary",onPress:()=>{w()}},typeof r=="string"?r:r(Object.keys(h).length))))},go.default.createElement(fm,{data:p,renderItem:({item:x})=>{let P=Od(d,x);if(!P)return null;let I=!!h[P.index];return go.default.createElement(Q2,{key:P.index,index:P.index,item:x,operation:P.operation,multi:n,selected:I,onSelect:k})}}))}function Q2(e){let{item:t,selected:o,onSelect:n,operation:r,index:i,multi:a}=e,[,s]=R(D);return go.default.createElement(wa,{style:g.Padding.smallHorizontal,onPress:()=>n(t,i,a?!o:!0),layout:"wide",title:go.default.createElement(b,{style:[v.directionRow,v.flex1,v.alignCenter]},go.default.createElement(b,{style:[{minWidth:E.L},g.Margin.smallRight]},go.default.createElement(ag,{readOnly:!0,method:t.method})),go.default.createElement(b,{style:[v.flex1]},go.default.createElement(A,{style:[s.Code,s.text,J2.apiPath]},t.path),go.default.createElement(A,{style:[s.Caption,s.textMuted]},r==null?void 0:r.summary))),buttons:[a?go.default.createElement(ja,{value:o,onValueChange:l=>n(t,i,l)}):go.default.createElement(wp,{value:o,onValueChange:()=>n(t,i,!0)})]})}var J2=X.create({apiPath:{fontSize:tp.xsmall,wordWrap:"anywhere"}});function SR(e,t){let o=Ua(),[n,r]=zl.useState(null),i=It(),[a,s]=zl.useState(t),l=Xr(o,e),u=m=>{let f=o.value.document.assertBlock(m).data.toFrozenObject();return[{key:"swagger",commands:[{key:"pickSource",title:"Choose OpenAPI source\u2026",icon:S.Paperclip,trigger:()=>{i.prompt({title:"Choose OpenAPI source",accept:"swagger",acceptURL:!0}).then(([h])=>{h&&(s({ref:h}),r("swagger"))})}},a&&"ref"in a?{key:"pickMethod",title:"Choose API operation",icon:S.Swagger,trigger:()=>{r("swagger")}}:null,{key:"defaultExpanded",icon:S.ChevronsVertical,type:2,enabled:!!f.expanded,title:"Expanded",trigger:()=>(o.change(h=>{f.expanded?h.setDataByKey(m,["expanded"],!1):h.setDataByKey(m,["expanded"],!0)}),ot(o,m,u(m)))}].filter(me)},...l?[l]:[]]};return[ot(o,e,u(e)),zl.createElement(ht,null,n==="swagger"?zl.createElement(_d,{data:a,buttonText:"Update Block",onRequestChangeSource:()=>{r(null),i.prompt({title:"Choose OpenAPI source",accept:"swagger",acceptURL:!0}).then(([m])=>{m&&s({ref:m}),r("swagger")})},onSelect:([m])=>{o.change(p=>{p.setNodeByKey(e,{data:{...a,method:m==null?void 0:m.method,path:m==null?void 0:m.path}})})},onClose:()=>r(null)}):null)]}c();var vg=C(O());c();var vr=C(O());W();function yg(e){let{opened:t,setOpened:o,readOnly:n,parameters:r,header:i,requestBody:a,responses:s,blockProps:l,description:u}=e,[,d]=R(D);return vr.default.createElement(vr.default.Fragment,null,vr.default.createElement(ZI,{blockProps:l,readOnly:n,opened:t,setOpened:o,description:u.description,...i}),vr.default.createElement(b,{style:eD.operationBody},t?vr.default.createElement(vr.default.Fragment,null,vr.default.createElement(tR,{blockProps:l,readOnly:n,...r}),a?vr.default.createElement(b,{style:g.Margin.largeTop},vr.default.createElement(b,null,vr.default.createElement(A,{style:[d.Label,d.Bold,d.text]},"Body")),vr.default.createElement(hg,{examples:a.examples,schema:a.schema})):null,vr.default.createElement(yR,{blockProps:l,readOnly:n,...s})):null))}var eD=X.create({operationBody:{padding:g.medium,paddingLeft:g.medium+E.ICON_M+g.medium,paddingTop:0}});function wR(e){let{blockProps:t,data:o,opened:n,setOpened:r}=e,{editor:i}=t;if("ref"in o)throw new Error("trying to render a swagger block that is refering to a swagger file");let{readOnly:a}=i,{baseUrl:s,method:l,path:u,summary:d}=o,{parameters:m={},responses:p={}}=o,f=vg.default.useMemo(()=>xe.defaultParameterSortedKeys(m).map(w=>({key:w,value:m[w]})),[m]),h=vg.default.useMemo(()=>xe.defaultResponseSortedKeys(p).map(w=>({key:w,value:p[w]})),[p]);return vg.default.createElement(yg,{blockProps:t,readOnly:a,opened:n,setOpened:r,header:{baseUrl:s,method:l,summary:d,path:u},parameters:{parameters:f},description:{description:{fragment:"description"}},responses:{responses:h}})}c();var fs=C(O());function CR(e){var w;let{blockProps:t,data:o,opened:n,setOpened:r,readOnly:i}=e;if(!("ref"in o))throw new Error("trying to render a swagger block that is not refering to a swagger file");let s=ho(o.ref).href,{result:l,error:u}=vc.readSafe(s),d=Od(l,o.path&&o.method?{path:o.path,method:o.method}:void 0),{operation:m,path:p,httpMethod:f}=d||{operation:{parameters:[],responses:[],summary:"",description:""},httpMethod:"",path:""},h=fs.default.useMemo(()=>m.parameters.sort(({in:k},{in:x})=>xe.SORTED_PARAMETERS_LOCATIONS.indexOf(k)<xe.SORTED_PARAMETERS_LOCATIONS.indexOf(x)?-1:1).reduce((k,x,P)=>{let I=k[P-1],_=hy(I?{before:I.value.orderIndex}:{});return k.push({key:Vs(),value:{...x,orderIndex:_}}),k},[]),[m.parameters]),y=fs.default.useMemo(()=>m.responses.sort(({status:k},{status:x})=>k<x?-1:1).reduce((k,x,P)=>{let I=k[P-1],_=hy(I?{before:I.value.orderIndex}:{});return k.push({key:Vs(),value:{...x,status:Zv({code:x.status}),orderIndex:_}}),k},[]),[m.responses]);if(u)return i?fs.default.createElement(Id,null):fs.default.createElement(Kn,{kind:"danger",title:"Error while parsing the OpenAPI file.",details:Ei(u)});if(!d){if(i)return fs.default.createElement(Id,null);let k=o.method&&o.path?`${(w=o.method)==null?void 0:w.toUpperCase()} "${o.path}"`:"";return fs.default.createElement(Kn,{kind:"danger",title:"Error while parsing the OpenAPI file.",details:`Could not find the operation ${k} in the OpenAPI file.`})}return fs.default.createElement(yg,{blockProps:t,readOnly:!0,opened:n,setOpened:r,header:{baseUrl:(l==null?void 0:l.baseUrl)||"",method:f,summary:m.summary||"",path:p},parameters:{parameters:h},requestBody:m.requestBody,responses:{responses:y},description:{description:m.description?{text:m.description}:void 0}})}function kR(e){let{node:t,isFocused:o,editor:n}=e,r=t.data.toFrozenObject(),[i,a]=SR(t.key,r),[s,l]=R(tD),{sections:u}=Zn.default.useContext(Gr),{current:d}=ap(),m=u.get(t.key),p=Ye(),[f,h]=Zn.default.useState(p||o||!!r.expanded);Zn.default.useEffect(()=>{d&&r.expanded&&h(!0)},[r.expanded]);let y=Zn.default.createElement(qn,{style:[l.blockSwagger,f&&l.blockSwaggerOpened],backgroundColor:s.colors.background.main,nativeID:m},Zn.default.createElement(Zn.default.Suspense,{fallback:Zn.default.createElement(Oo,{size:"small"})},"ref"in r?Zn.default.createElement(CR,{readOnly:n==null?void 0:n.readOnly,blockProps:e,data:r,opened:f,setOpened:h}):Zn.default.createElement(wR,{blockProps:e,data:r,opened:f,setOpened:h})));return Zn.default.createElement(Zn.default.Fragment,null,a,Zn.default.createElement(ge,{palette:i,...e},!("ref"in r)&&f?y:Zn.default.createElement(Pt,{...e},y)))}var tD=z.create({blockSwagger:e=>({borderRadius:e.radiuses.large,borderColor:e.colors.border.mid,borderWidth:1}),blockSwaggerOpened:e=>({...e.shadows.spread})});c();var xR=C(O());var oD=ct({key:"lastSwaggerReference",default:{}});function OR(e,t){let[o,n]=Do(oD),r=ul(t.space&&t.revision?{space:t.space,revision:t.revision}:null),i=r?o[r.space]:null,a=xR.default.useCallback(u=>{r&&n({...o,[r.space]:u})},[r==null?void 0:r.space,n]);if((i==null?void 0:i.kind)==="url")return[i,a];if((i==null?void 0:i.kind)==="file"&&r!=null&&r.files[i.file])return[i,a];let s=xe.getProbableRef(e.value.document);if(s)return[s,a];let l=Object.values((r==null?void 0:r.files)||{}).filter(u=>Qc(u)).sort((u,d)=>{var f,h;let m=(f=Ru(u.edits))==null?void 0:f.updatedAt.toMillis();return(((h=Ru(d.edits))==null?void 0:h.updatedAt.toMillis())||0)-(m||0)});return[l.length?{kind:"file",file:l[0].key}:null,a]}function _R(e,t,o,n="replace"){let[r,i]=un.useState(null),a=It(),s=ll(),{contentReferenceContext:l,getIntegrationsBlocks:u,logAnalyticsEvent:d}=un.useContext(ae),m=gt(l),p=Di(),[f,h]=OR(e,l),y=un.useCallback(()=>{i(null)},[]),w=un.useCallback((I,_="end")=>{y(),Wl(e,o.key,I,n,_)},[y,e,o.key,n]),k=un.useCallback((I,_="end")=>{y();let M;I.forEach((T,L)=>{Wl(e,M||o.key,T,L===0?n:"after",_),M=T.key})},[y,e,t.key,o.key,n]),x=un.useCallback(I=>{let{blockType:_,...M}=I;d({type:"edit_page_document_insert_block",from:"palette",blockType:_,...M})},[d]),P=un.useMemo(()=>{let I=(_,M=()=>!0)=>Object.entries(_).map(([T,L])=>M(T)?L.map(q=>({key:`${T}.${q.id}`,title:q.title,icon:pt(UI,{block:q}),trigger:()=>{q.urlUnfurl&&q.urlUnfurl.length>0?i("embed"):(w(Yc.createIntegrationBlock(T,q.id)),x({blockType:Mr,integration:T,integrationBlock:q.id}))}})):[]).flat();return ne({search:"Insert block\u2026",groups:[{key:"texts",commands:[Re(t,pe)?{key:"paragraph",title:"Paragraph",icon:S.Paragraph,trigger:()=>{w(Co.create({type:pe})),x({blockType:pe})}}:null].filter(me)},{key:"headings",commands:[Re(t,Ae)?{key:"heading_1",title:"Heading 1",icon:S.Heading1,keywords:["h1","Title 1","Header 1"],trigger:()=>{w(Co.create({type:Ae})),x({blockType:Ae})}}:null,Re(t,Fe)?{key:"heading_2",title:"Heading 2",icon:S.Heading2,keywords:["h2","Title 2","Header 2"],trigger:()=>{w(Co.create({type:Fe})),x({blockType:Fe})}}:null,Re(t,Qe)?{key:"heading_3",title:"Heading 3",keywords:["h3","Title 3","Header 3"],icon:S.Heading3,trigger:()=>{w(Co.create({type:Qe})),x({blockType:Qe})}}:null].filter(me)},{key:"lists",commands:[Re(t,ro)?{key:"list_ul",title:"Unordered list",keywords:["ul","Bullet list","Dot list"],icon:S.ListUnordered,trigger:()=>{w(it.createList(ro)),x({blockType:ro})}}:null,Re(t,At)?{key:"list_ol",title:"Ordered list",keywords:["ol","Numbered List"],icon:S.ListOrdered,trigger:()=>{w(it.createList(At)),x({blockType:At})}}:null,Re(t,io)?{key:"list_tasks",title:"Task list",keywords:["Checkbox","Checklist","Tick","Todo list"],icon:S.ListTasks,trigger:()=>{w(it.createList(io)),x({blockType:io})}}:null].filter(me)},{key:"dividers",commands:[Re(t,fa)?{key:"divider",title:"Divider",keywords:["Horizontal rule","Separator","Thematic break","hr"],icon:S.Divider,trigger:()=>{w(Co.create({type:fa})),x({blockType:fa})}}:null].filter(me)},{key:"panels",commands:[Re(t,Ao)?{key:"hint",title:"Hint",keywords:["Info","Alert","Callout"],icon:S.InfoCircle,trigger:()=>{w(gC.create()),x({blockType:Ao})}}:null,Re(t,Ft)?{key:"quote",title:"Quote",keywords:["Blockquote","Citation"],icon:S.Quote,trigger:()=>{w(hC.create()),x({blockType:Ft})}}:null,Re(t,On)?{key:"code",title:"Code Block",keywords:["Syntax","Snippet"],icon:S.Code,trigger:()=>{w($t.createCodeBlock("// Some code")),x({blockType:On})}}:null].filter(me)},{key:"others",commands:[Re(t,pa)?{key:"files",title:"Insert files\u2026",keywords:["Assets","Upload"],icon:S.Files,trigger:()=>{a.prompt({title:"Select files"}).then(_=>{let M=_.map(T=>T.kind==="file"?zm.createFileBlock(T):null).filter(me);k(M,"end"),x({blockType:pa,files:M.length})})}}:null,Re(t,_n)?{key:"images",title:"Insert images\u2026",keywords:["Photo","Picture","JPEG","jpg","png","GIF"],icon:S.Image,trigger:()=>{a.prompt({title:"Select images",accept:"images",acceptURL:!0}).then(_=>{w(Co.create({type:_n,isVoid:!0,nodes:_.map(M=>xo.createImageBlock(M))})),x({blockType:_n,images:_.length})})}}:null,Re(t,rn)?{key:"embed",title:"Embed a url\u2026",keywords:["music","video","audio","design","iframe"],icon:S.ExternalLink,trigger:()=>{i("embed")}}:null,Re(t,Vn)?{key:"table",title:"Table",keywords:["Spreadsheet"],icon:S.Table,trigger:()=>{w(Q.createTable()),x({blockType:Vn,tableView:"grid"})}}:null,Re(t,Vn)?{key:"table-cards",title:"Cards",keywords:["Grid"],icon:S.Cards,trigger:()=>{w(Q.createTable({view:"cards"})),x({blockType:Vn,tableView:"cards"})}}:null,Re(t,In)?{key:"tabs",title:"Tabs",icon:S.Tabs,trigger:()=>{w(li.createTabs(),"start"),x({blockType:In})}}:null,Re(t,Li)?{key:"expandable",title:"Expandable",keywords:["collapsible","toggle"],icon:S.BlockExpandable,trigger:()=>{w(ba.createExpandableBlock(),(_,M)=>{_.collapseToStartOf(ba.getTitleFragment(M)).focus()}),x({blockType:Li})}}:null,Re(t,ma)?{key:"drawing",title:"Drawing",keywords:["sketch","draw","excalidraw"],icon:S.EditDrawing,trigger:()=>{w(pC.createDrawingBlock()),x({blockType:ma})}}:null,Re(t,Gs)?{key:"math",title:"Math & TeX",keywords:["Formula"],icon:S.MathTeX,trigger:()=>{w($s.createMathBlock()),x({blockType:Gs})}}:null,Re(t,ko)?{key:"api-method",title:"API Method",icon:S.Swagger,keywords:["api"],trigger:()=>{w(xe.createBlock()),x({blockType:ko})}}:null,Re(t,ko)?{key:"swagger",title:"OpenAPI",icon:S.Swagger,keywords:["api","swagger"],trigger:()=>{f?i({ref:f}):a.prompt({title:"Choose OpenAPI source",accept:"swagger",acceptURL:!0}).then(([_])=>{_&&(h(_),i({ref:_}))})}}:null,Re(t,ha)?{key:"content-ref",title:"Page Link",icon:S.PageLink,keywords:["references"],trigger:()=>ln(_=>{w(Ks.createContentRefBlock(_)),x({blockType:ha,contentRefKind:_.kind})},m.current,{accept:["page","space","collection"]})}:null].filter(me)},Re(t,Mr)?{key:"integrations",commands:()=>{let _=u();return I(_)}}:null,Re(t,Mr)?{key:"integrations",commands:()=>{let _=u(),[M]=cl([GC()]),T=Ym(M);return I(T,L=>!_[L])}}:null,Re(t,rn)?{key:"embeds",commands:FI.map(_=>({key:_.key,title:_.title,icon:({size:M})=>un.createElement(Wo,{source:{uri:(p.color==="dark"?_.iconDark:null)||_.icon},style:{width:M,height:M}}),trigger:()=>{i("embed")}}))}:null].filter(me)})},[w,s.uid,m,e,p.color,u]);return[un.createElement(ht,null,r==="embed"?un.createElement(VI,{onInsert:w,onClose:y}):r&&"ref"in r?un.createElement(_d,{onClose:y,data:r,multi:!0,buttonText:I=>`Insert ${I} blocks`,onRequestChangeSource:()=>{i(null),a.prompt({title:"Choose OpenAPI source",accept:"swagger",acceptURL:!0}).then(([I])=>{I&&i({ref:I})})},onSelect:I=>{x({blockType:ko,swaggerOperations:I.map.length,swaggerSource:r.ref.kind}),k(I.map(_=>xe.createBlockWithRef(r.ref,_.path,_.method))),y()}}):null),P]}function Wl(e,t,o,n,r){e.change(i=>{let a=e.value.document.getParent(t);if(!a)return;let s=a.getChildIndex(t);if(s<0)return;if(n==="replace")o.object==="block"?i.replaceNodeByKey(t,o):i.replaceWithDocumentByKey(t,o);else{let u=n==="after"?s+1:s;o.object==="block"?i.insertNodeByKey(a.key,u,o):i.insertDocumentByKey(a.key,u,o)}let l=i.value.document.getNode(o.object==="block"?o.key:o.nodes.first().key);l&&(Wt(i.value.selection)?r==="start"?i.collapseToStartOf(l).focus():r==="end"?i.collapseToEndOf(l).focus():r(i,l):i.selectBlock(rC.create({anchorBlock:l.key,focusBlock:l.key})))})}var bc={instructions:{message:(e,t,o)=>nt.createElement(nt.Fragment,null,"Type ",e," for commands, ",t," for inline commands",o,"."),embed:" or paste a link to embed content"},imagePrompt:{title:"Select images"},image:{label:"Insert image"},code:{label:"Insert code block",placeholder:"// Some code"},list:{label:"Insert unordered list"}};function IR(e){let{node:t,parent:o,editor:n,children:r,placeholder:i}=e,{selection:a}=n.value,s=ye.isTextRange(a)&&a.hasOnlyNodeFocused(t),l=It(),{logAnalyticsEvent:u}=nt.useContext(ae),d=Re(o,rn),[m,p]=_R(n,o,t),f=nt.useMemo(()=>[{key:"image",label:bc.image.label,icon:S.BlockImage.CSS,trigger(){l.prompt({title:bc.imagePrompt.title,accept:"images",acceptURL:!0}).then(h=>{h.length!==0&&(Wl(n,t.key,Co.create({type:_n,isVoid:!0,nodes:h.map(y=>xo.createImageBlock(y))}),"replace","end"),u({type:"edit_page_document_insert_block",from:"quick-insert",blockType:_n,images:h.length}))})}},{key:"code",label:bc.code.label,icon:S.Code.CSS,trigger(){Wl(n,t.key,$t.createCodeBlock(bc.code.placeholder),"replace","end"),u({type:"edit_page_document_insert_block",from:"quick-insert",blockType:On})}},{key:"list-unordered",label:bc.list.label,icon:S.ListUnordered.CSS,trigger(){Wl(n,t.key,it.createList(ro),"replace","end"),u({type:"edit_page_document_insert_block",from:"quick-insert",blockType:ro})}}],[n,t.key]);return nt.createElement(nt.Fragment,null,m,nt.createElement(ge,{...e,palette:p,commandIcon:S.Plus,commandIconAnimatedAngle:45},nt.createElement(Z,{as:"p",contentEditable:!1,style:[Qf.placeholder,N.text.base,N.text.body,N.textColor.muted,N.flex.row,N.flex.alignCenter,N.flex.justifySpaceBetween,s||i?N.opacity.visible:N.opacity.hidden]},s?nt.createElement(nt.Fragment,null,nt.createElement(Hn,{style:[Qf.instructions]},bc.instructions.message(nt.createElement(Fi,{style:[N.flex.inline],size:"medium",shortcut:Xe.EDITOR_PALETTE}),nt.createElement(Fi,{style:[N.flex.inline],size:"medium",shortcut:Xe.EDITOR_INLINE_PALETTE}),d?bc.instructions.embed:"")),(f==null?void 0:f.length)>0?nt.createElement(nD,{blocks:f,editor:n,node:t}):null):nt.createElement(nt.Fragment,null,Nm(o)?i:null)),r))}function nD(e){var l;let{blocks:t,editor:o,node:n}=e,[r,i]=nt.useState(0),a=nt.useRef(r),s=nt.useRef(null);return Ux(u=>{var d;!s.current||u||(d=s.current)==null||d.focus()},{scope:(l=o.elementRef)==null?void 0:l.current,exact:!0}),nt.useEffect(()=>{var u;(a==null?void 0:a.current)!==r&&((u=s.current)==null||u.focus(),a.current=r)},[r]),nt.useEffect(()=>()=>{var u;(u=s==null?void 0:s.current)==null||u.blur()},[]),nt.createElement(Z,{as:"span",role:"toolbar","aria-orientation":"horizontal",style:[Qf.shortcuts,N.flex.row,N.flex.alignEnd]},t.map(({trigger:u,label:d,icon:m},p)=>nt.createElement(lo,{ref:p===r?s:void 0,label:d,tooltipTitle:d,iconOnly:!0,leadingIcon:m,kind:"muted",size:"small",onPress:()=>u==null?void 0:u(),preventFocusOnPress:!0,tabIndex:p===r?0:-1,key:`${n.key}_${p}`,onKeyDown:f=>{var h,y;(f.key==="Tab"||f.key==="Escape")&&((y=(h=o.elementRef)==null?void 0:h.current)==null||y.focus(),f.preventDefault()),f.key==="ArrowLeft"&&(i(w=>Math.max(0,w-1)),f.preventDefault()),f.key==="ArrowRight"&&(i(w=>Math.min(t.length-1,w+1)),f.preventDefault())}})))}c();var RR=C(O());var rD=[On,rn,Mr,_n,ko,Vn];function Xr(e,t){let{logAnalyticsEvent:o}=RR.useContext(ae);if(!hx("FULL_WIDTH_BLOCKS"))return null;let r=e.value.document.assertBlock(t);if(!rD.includes(r.type))return null;let i=r.data.get("fullWidth");return{key:"layout-width",commands:[typeof i=="boolean"&&i===!0?{key:"default",title:"Default width",icon:S.DefaultWidth,trigger:()=>{e.change(l=>{l.setDataByKey(t,["fullWidth"],!1)}),o({type:"edit_page_document_edit_block_property",blockType:r.type,blockProperty:"layout",fromValue:"full",toValue:"default"})}}:{key:"full",title:"Full width",icon:S.FullWidth,trigger:()=>{e.change(l=>{l.setDataByKey(t,["fullWidth"],!0)}),o({type:"edit_page_document_edit_block_property",blockType:r.type,blockProperty:"layout",fromValue:"default",toValue:"full"})}}]}}c();var PR=C(O());function Sg(e,t){return PR.useMemo(()=>iD(e.value.document,t),[e,t])}function iD(e,t){let o=e.getPath(t);return o?o[0]<aD(e):!1}var bg=new WeakMap;function aD(e){if(bg.has(e))return bg.get(e);let t=800,o=0;for(let n=0;n<e.nodes.size;n++){let r=e.nodes.get(n);if(!r)break;if(o+=mc(r,e,{blockSpacing:{paddingTop:g.medium,paddingBottom:g.medium}}),o>t)return bg.set(e,n),n}return bg.set(e,e.nodes.size),e.nodes.size}c();var Fl=C(O());W();var Vl=Fl.forwardRef(function(t,o){let{node:n,children:r,editor:i,isFocused:a,isSelected:s,attributes:l,onPress:u,style:d}=t,{readOnly:m}=i,p=F.useInteractiveState(),[,f]=R(sD);return m?u?Fl.createElement(We,{style:[f.frameInlineVoid],onPress:u},r):Fl.createElement(b,{style:[f.frameInlineVoid]},r):Fl.createElement(We,{ref:o,...l,...p.events,style:[f.frameInlineVoid,p.hovered&&f.frameEditableHovered,s&&f.frameSelected,a&&f.frameFocused,d],onPress:h=>{i.change(y=>{Wt(y.value.selection)?y.collapseToStartOf(n).focus():y.selectText(ye.fromBlockRange(y.value.selection,y.value.document)).collapseToStartOf(n).focus()}),u&&u(h)}},r)}),sD=z.create({frameInlineVoid:e=>({borderWidth:2,borderColor:"transparent",borderRadius:e.radiuses.medium,textAlignVertical:"middle"}),frameEditableHovered:e=>({borderColor:e.colors.primary.muted}),frameSelected:e=>({borderColor:e.colors.primary.muted}),frameFocused:e=>({borderColor:e.colors.primary.main})});c();var Tt=C(O());W();var Pt=Tt.forwardRef(function(t,o){let{onPress:n,onSelect:r=()=>{s.change(m=>{Wt(m.value.selection)&&m.collapseToStartOf(i).focus()})},node:i,children:a,editor:s,isFocused:l,selectable:u=!0}=t,{readOnly:d}=s;return Tt.createElement(Jv,{ref:o,onPress:n,readOnly:d,selected:l,selectable:u,onSelect:r},a)}),Jv=Tt.forwardRef(function(t,o){let{onPress:n,selected:r,readOnly:i=!1,selectable:a=!0,style:s,children:l,onSelect:u}=t,d=F.useInteractiveState({hoverDelayIn:50}),[,m]=R(cD);if(i)return Tt.createElement(Tt.Fragment,null,l);let p=h=>{h.stopPropagation(),u()},f=Tt.createElement(b,{ref:o,style:s},l,Tt.createElement(b,{style:[m.frameBorder,m.frameBorderRight,d.hovered&&m.frameBorderHovered,r&&m.frameBorderRightSelected],pointerEvents:"none"}),Tt.createElement(b,{style:[m.frameBorder,m.frameBorderLeft,d.hovered&&m.frameBorderHovered,r&&m.frameBorderLeftSelected],pointerEvents:"none"}),Tt.createElement(b,{style:[m.frameBorder,m.frameBorderTop,d.hovered&&m.frameBorderHovered,r&&m.frameBorderTopSelected],pointerEvents:"none"}),Tt.createElement(b,{style:[m.frameBorder,m.frameBorderBottom,d.hovered&&m.frameBorderHovered,r&&m.frameBorderBottomSelected],pointerEvents:"none"}),a?Tt.createElement(Tt.Fragment,null,Tt.createElement(no,{onPress:p},Tt.createElement(b,{...d.events,style:[m.hoverableFrameBorder,m.hoverableFrameBorderRight]})),Tt.createElement(no,{onPress:p},Tt.createElement(b,{...d.events,style:[m.hoverableFrameBorder,m.hoverableFrameBorderLeft]})),Tt.createElement(no,{onPress:p},Tt.createElement(b,{...d.events,style:[m.hoverableFrameBorder,m.hoverableFrameBorderTop]})),Tt.createElement(no,{onPress:p},Tt.createElement(b,{...d.events,style:[m.hoverableFrameBorder,m.hoverableFrameBorderBottom]}))):null);return n?Tt.createElement(We,{onPress:n},f):f}),wg=18,mt=8,gs=4,Cg=2,cD=z.create({frameBorder:{position:"absolute"},hoverableFrameBorder:{position:"absolute",cursor:"pointer"},frameBorderHovered:e=>({backgroundColor:e.colors.primary.muted}),hoverableFrameBorderTop:{top:-mt/2,left:-mt/2,right:-mt/2,height:wg},frameBorderTop:{top:-mt/2,left:-mt/2,right:-mt/2,height:mt,borderTopLeftRadius:gs,borderTopRightRadius:gs},frameBorderTopSelected:e=>({backgroundColor:"transparent",borderTopColor:e.colors.primary.main,borderTopWidth:Cg}),hoverableFrameBorderBottom:{bottom:-mt/2,left:-mt/2,right:-mt/2,height:wg},frameBorderBottom:{bottom:-mt/2,left:-mt/2,right:-mt/2,height:mt,borderBottomLeftRadius:gs,borderBottomRightRadius:gs},frameBorderBottomSelected:e=>({backgroundColor:"transparent",borderBottomColor:e.colors.primary.main,borderBottomWidth:Cg}),hoverableFrameBorderLeft:{top:-mt/2,bottom:-mt/2,left:-mt/2,width:wg},frameBorderLeft:{top:-mt/2,bottom:-mt/2,left:-mt/2,width:mt,borderBottomLeftRadius:gs,borderTopLeftRadius:gs},frameBorderLeftSelected:e=>({backgroundColor:"transparent",borderLeftColor:e.colors.primary.main,borderLeftWidth:Cg}),hoverableFrameBorderRight:{top:-mt/2,bottom:-mt/2,right:-mt/2,width:wg},frameBorderRight:{top:-mt/2,bottom:-mt/2,right:-mt/2,width:mt,borderTopRightRadius:gs,borderBottomRightRadius:gs},frameBorderRightSelected:e=>({backgroundColor:"transparent",borderRightColor:e.colors.primary.main,borderRightWidth:Cg})});c();var kg=C(O());function xg(e,t){let[,o]=R(D),[,n]=R(lD),{navigateToHash:r}=ve(),{sections:i,active:a,setActive:s}=kg.default.useContext(Gr),l=F.useInteractiveState(),u=i.get(e.key),d=()=>{u&&s(a!==u?u:null)},m=()=>{u&&(r(u,{scroll:!0}),d())},p={accessibilityRole:"presentation"};return{anchorElement:kg.default.createElement(F.Text,{href:`#${u}`,onPress:m,style:[n.anchorLink,g.Margin.smallLeft,a===u||l.focused||l.hovered?$e.visible:$e.hidden],inactiveStyle:o.textMuted,activeStyle:o.primary,accessibilityLabel:t.accessibilityLabel},kg.default.createElement(S.Hash,{size:t.anchorIconSize||E.ICON_S,...p})),anchoredBlockId:u,anchoredBlockInteractiveState:l,onAnchoredBlockPress:()=>{t.onBlockPress&&t.onBlockPress(),d()}}}var lD=z.create({anchorLink:{display:"inline-flex",alignItems:"center"}});c();var ER=C(O());function MR(e){let{notify:t,notifyProgress:o,notifyOrUpdate:n,close:r}=uo(),{logAnalyticsEvent:i}=e;return ER.useMemo(()=>{function a(u){bm(u),t({kind:"danger",title:"Error while pasting content",icon:S.Alert,details:Ei(u,"Please try again or contact support if the problem persists.")})}function s(u){n({id:"upload-files",title:`Uploading ${u} file${u!==1?"s":""}\u2026`,details:"This might take a moment.",kind:"default",timeout:0,closeable:!1,icon:Ce})}function l(u,d,m){let p=rl(u),f=0,h=async(y,w)=>{var k;if(Hc(y))return{kind:"url",url:y};if(Fw(y)){let x=await(await fetch(y)).blob(),P=(k=y.split(";")[0])==null?void 0:k.split("/")[1],I=(w==null?void 0:w.fileName)||`unknown.${P}`,_=new File([x],I);return f+=1,s(f),(await e.uploadFiles([_]))[0]}return null};if(p.type==="html"&&p.html!==null)return Zk(p.html,{...Ey,resolveFile:h}).then(({document:y})=>uC(y)&&p.text?My(p.text).then(({document:w})=>({document:w,type:"text"})):{document:y,type:"html"}).then(({document:y,type:w})=>{m.change(x=>{x.insertDocument(y)}),r("upload-files");let k=TR(w==="html"?p.html:p.text,w);i(Rd(u,w,{document:y,sourceIncludes:k}))}).catch(y=>{a(y)}),!0;if(p.type==="text"&&p.text!==null)return My(p.text,{...Ey,resolveFile:h}).then(({document:y})=>{m.change(k=>{k.insertDocument(y)}),r("upload-files");let w=TR(p.text,"text");i(Rd(u,"text",{document:y,sourceIncludes:w}))}).catch(y=>{a(y)}),!0;if(p.type==="files"&&typeof p.files<"u"){if(!p.files||p.files.length===0)return;o(e.uploadFiles(p.files),{title:`Uploading ${p.files.length} files\u2026`,details:"This might take a moment.",kind:"default"}).then(y=>{if(!p.files)return;if(y.length===0){t({kind:"danger",title:"Some files failed to upload, please try again",icon:S.Alert});return}let w=p.files.every(k=>qa(k));m.change(k=>{if(w){let x=xo.createImagesBlock(y),{startBlock:P}=k.value;if(Re(P,x.type)){ky(k,xo.createImagesBlock(y));return}if(!lC.includes(P.type)){t({kind:"info",title:"Cannot insert an image here",icon:S.InfoCircle});return}y.reduce((_,M)=>_.insertInline(xo.createImageInline(M)),k);return}y.forEach(x=>{if(x.kind!=="file")return;let P=zm.createFileBlock(x);if(Re(k.value.document.getParent(k.value.startBlock.key),P.type)){ky(k,P);return}t({kind:"info",title:"Cannot insert a file here",icon:S.InfoCircle})})}),i(Rd(u,"files",{uploadedFiles:y==null?void 0:y.length,sourceIncludes:["file"]}))}).catch(y=>{a(y)})}}return{onPaste:l,onDrop:l}},[t,o])}function TR(e,t){let o=[];switch(t){case"text":e.includes("![")&&o.push("image"),e.match(/\|\s*\:?---/)&&o.push("table");break;case"html":e.includes("<img")&&o.push("image"),e.includes("<table")&&o.push("table");break}return o}function Rd(e,t,{document:o=void 0,uploadedFiles:n=0,sourceIncludes:r=[]}={}){let i=e.clipboardData,a=new Set,s=0;return o&&o.forEachDescendant(l=>{s+=1,l.type&&a.add(l.type)}),{type:"edit_paste_content",paste:e.type,sourceTypes:[...(i==null?void 0:i.types)||[]],sourceIncludes:[...new Set(r)],transformType:t,transformSize:s,uploadedFiles:n,transformNodes:[...a]}}c();var eb=C(Br());var LR={onKeyDown:uD};function uD(e,t){if((0,eb.default)("enter",e)||(0,eb.default)("shift+enter",e)){let{value:o}=t,{startBlock:n,startInline:r,startText:i}=o;if(r&&r.isVoid&&i){let a=o.document.getNextText(i.key);return a?(t.collapseToStartOf(a),t):void 0}if(n&&n.isVoid)return ft(t),t}}c();var tb=C(O()),Og="selectionHighlighting",NR={renderMark:dD};function dD(e){let{mark:t}=e;switch(t.type){case Og:return tb.createElement(mD,{...e})}}function mD(e){let{attributes:t,children:o}=e;return tb.createElement("span",{...t,style:{backgroundColor:"Highlight",color:"HighlightText"}},o)}c();function DR(e){e.value.decorations.forEach(t=>{var o;(o=t.marks)!=null&&o.some(n=>n.type===Og)&&e.removeValueDecoration(t)})}function _g(e,t=e.value.selection){ye.isTextRange(t)&&e.setValueDecoration(ye.create({anchorKey:t.anchorKey,anchorOffset:t.anchorOffset,focusKey:t.focusKey,focusOffset:t.focusOffset,marks:[{type:Og,data:{}}],isAtomic:!0}))}c();var AR=C(O());function ho(e){let{contentReferenceContext:t}=AR.useContext(ae);return jn(e,t)}c();var BR={shouldNodeComponentUpdate:pD};function pD(e,t){let o=e.parent.nodes.size-1,n=e.parent.getChildIndex(e.node.key),r=t.parent.getChildIndex(e.node.key);return(n===o||r===o)&&r!==n?!0:null}c();var ql=C(O());W();function Qn(e){let[,t]=R(fD),[,o]=R(D);return ql.createElement(b,{style:[t.blockLoading,g.Padding.largeHorizontal,g.Padding.mediumVertical,v.directionRow,v.alignCenter]},ql.createElement(b,null,ql.createElement(Ce,{size:"medium"})),ql.createElement(b,{style:[g.Margin.mediumLeft]},ql.createElement(A,{style:[o.Caption,o.textMid]},"Loading...")))}var fD=z.create({blockLoading:e=>({backgroundColor:e.colors.background.muted,borderRadius:e.radiuses.large})});c();var WR=C(O());c();var Kr=C(O());var zR={en:{something_wrong:"Something went wrong.",reload:"Reload",let_us_know:"Let us know what happened",we_have_been_notified:"Our team has been notified. If you'd like to help, you can describe what happened below.",search:"Search",search_ask:"Ask",search_placeholder:"Search content\u2026",search_placeholder_ask:"Ask a question\u2026",search_blankslate:"Type something to search",search_blankslate_ai:"We'll answer the question with an AI model trained on the content.",search_blankslate_recent_searches:"Recent searches",search_blankslate_recent_questions:"Recently asked",search_blankslate_recommended_questions:"You might be interested in",search_blankslate_query:'No results for "${1}"',search_answer_sources:"Answer based on ${1} sources",search_answer_copy:"Copy answer",search_answer_feedback_upvote:"Mark as useful",search_answer_feedback_downvote:"Mark as not relevant",search_answer_feedback_title:"Thanks for your feedback!",search_answer_feedback_details:"This will help us improve the answering engine.",search_answer_loading:"Analysing the content to answer your question\u2026",search_answer_loading_wait:"It might take a few more seconds.",search_answer_none_title:"No answer found for your question.",search_answer_none_details:"It can indicate that no content is relevant to your question or answer cannot be evaluated with enough confidence.",search_answer_error_title:"Unexpected error",search_answer_error_details:"Something went wrong. Please try again later.",search_goto_section:"Go to section",search_goto_page:"Go to page",page_not_found:"Page not found",back_to_home:"Back to front page",page_not_found_long:"Sorry, but the page you were looking for could not be found.",outline:"On this page",last_modified:"Last modified ${1}",was_it_helpful:"Was this page helpful?",poor_content:"Poor content",ok_content:"OK content",excellent_content:"Excellent content",powered_by:"Powered By ${1}",previous:"Previous",next:"Next",export_pdf:"Export as PDF",copy_link:"Copy link",switch_to_dark_theme:"Switch to dark theme",switch_to_light_theme:"Switch to light theme",edit_on_github:"Edit on ${1}",page_articles_section:"Here are the articles in this section:",main:"Main",cookie_policy:"cookie policy",cookie_prompt:"This site uses cookies to deliver its service and to analyse traffic. By browsing this site, you accept the ${1}.",cookies:"Cookies",reject_all:"Reject all",theme_change_appearance:"Change appearance",new_page:"New page",untitled_page:"Untitled page",page_description:"Page description (optional)",connection_lost:"Connection lost",network_troubleshooting:"Network troubleshooting",device_offline:"Your device might be offline, or GitBook might be experiencing issues.",missing_content_title:"Oops, something is missing.",missing_content_description:"We could not find the original source to display this content.",table_of_contents:"Table of contents",page_outline:"Page outline"},fr:{something_wrong:"Il y a eu un probl\xE8me.",reload:"Actualiser",let_us_know:"Dites-nous ce qui s'est pass\xE9",we_have_been_notified:"Notre \xE9quipe a \xE9t\xE9 inform\xE9e. Si vous souhaitez nous aider, vous pouvez d\xE9crire ce qui s'est pass\xE9 ci-dessous.",search:"Rechercher",search_ask:"Poser une question",search_placeholder:"Rechercher dans le contenu\u2026",search_placeholder_ask:"Poser une question\u2026",search_blankslate:"Tapez quelque chose pour rechercher",search_blankslate_ai:"Nous r\xE9pondrons \xE0 la question avec un mod\xE8le d'IA entra\xEEn\xE9 sur le contenu.",search_blankslate_recent_searches:"Recherches r\xE9centes",search_blankslate_recent_questions:"Questions r\xE9centes",search_blankslate_recommended_questions:"Vous pourriez \xEAtre int\xE9ress\xE9 par",search_blankslate_query:'Aucun r\xE9sultat pour "${1}"',search_answer_sources:"R\xE9ponse bas\xE9e sur ${1} sources",search_answer_copy:"Copier la r\xE9ponse",search_answer_feedback_upvote:"Marquer comme utile",search_answer_feedback_downvote:"Marquer comme non pertinent",search_answer_feedback_title:"Merci pour votre retour !",search_answer_feedback_details:"Cela nous aidera \xE0 am\xE9liorer le moteur de r\xE9ponse.",search_answer_loading:"Analyse du contenu pour r\xE9pondre \xE0 votre question\u2026",search_answer_loading_wait:"Cela peut prendre quelques secondes suppl\xE9mentaires.",search_answer_none_title:"Aucune r\xE9ponse trouv\xE9e pour votre question.",search_answer_none_details:"Cela peut indiquer qu'aucun contenu n'est pertinent pour votre question ou que la r\xE9ponse ne peut pas \xEAtre \xE9valu\xE9e avec suffisamment de confiance.",search_answer_error_title:"Erreur inattendue",search_answer_error_details:"Une erreur s'est produite. Veuillez r\xE9essayer plus tard.",search_goto_section:"Aller \xE0 la section",search_goto_page:"Aller \xE0 la page",page_not_found:"Page non trouv\xE9e",back_to_home:"Retour \xE0 la page d'accueil",page_not_found_long:"D\xE9sol\xE9, mais la page que vous cherchiez n'a pas pu \xEAtre trouv\xE9e.",outline:"Sommaire",last_modified:"Derni\xE8re mise \xE0 jour ${1}",was_it_helpful:"Cette page vous a t-elle aid\xE9e ?",poor_content:"Contenu m\xE9diocre",ok_content:"Contenu OK",excellent_content:"Contenu excellent",powered_by:"Propuls\xE9 par ${1}",previous:"Pr\xE9c\xE9dent",next:"Suivant",export_pdf:"Exporter en PDF",copy_link:"Copier le lien",switch_to_dark_theme:"Switch to dark theme",switch_to_light_theme:"Switch to light theme",edit_on_github:"\xC9diter sur ${1}",page_articles_section:"Voici les articles de cette section :",main:"Principale",cookie_policy:"politique en mati\xE8re de cookies",cookie_prompt:"Ce site utilise des cookies pour fournir son service et analyser le trafic. En naviguant sur ce site, vous acceptez le ${1}.",cookies:"Cookies",reject_all:"Rejeter tout",theme_change_appearance:"Changer l\u2019apparence",connection_lost:"Hors connexion",network_troubleshooting:"D\xE9pannage r\xE9seau",device_offline:"Votre appareil est hors-ligne, ou GitBook rencontre des probl\xE8mes.",missing_content_title:"Oups, il manque quelque chose.",missing_content_description:"Nous n'avons pas pu trouver la source d'origine pour afficher ce contenu.",table_of_contents:"Table des mati\xE8res",page_outline:"Sommaire de la page"},es:{something_wrong:"Algo sali\xF3 mal.",reload:"Recarga",let_us_know:"Cu\xE9ntanos lo que ha sucedido",we_have_been_notified:"Nuestro equipo ha sido notificado. Si quieres ayudar, puedes describir lo sucedido a continuaci\xF3n.",search:"Buscar",search_ask:"Hacer una pregunta",search_placeholder:"Buscar en el contenido\u2026",search_placeholder_ask:"Hacer una pregunta\u2026",search_blankslate:"Escribe algo para buscar",search_blankslate_ai:"Responderemos a la pregunta con un modelo de IA entrenado en el contenido.",search_blankslate_recent_searches:"B\xFAsquedas recientes",search_blankslate_recent_questions:"Preguntas recientes",search_blankslate_recommended_questions:"Quiz\xE1s te interese",search_blankslate_query:'No se encontraron resultados para "${1}"',search_answer_sources:"Respuesta basada en ${1} fuentes",search_answer_copy:"Copiar respuesta",search_answer_feedback_upvote:"Marcar como \xFAtil",search_answer_feedback_downvote:"Marcar como no relevante",search_answer_feedback_title:"\xA1Gracias por tu retroalimentaci\xF3n!",search_answer_feedback_details:"Esto nos ayudar\xE1 a mejorar el motor de respuesta.",search_answer_loading:"Analizando el contenido para responder tu pregunta\u2026",search_answer_loading_wait:"Esto puede tomar unos segundos m\xE1s.",search_answer_none_title:"No se encontr\xF3 respuesta para tu pregunta.",search_answer_none_details:"Esto puede indicar que no hay contenido relevante para tu pregunta o que la respuesta no se puede evaluar con suficiente confianza.",search_answer_error_title:"Error inesperado",search_answer_error_details:"Ha ocurrido un error. Por favor, int\xE9ntalo de nuevo m\xE1s tarde.",search_goto_section:"Ir a la secci\xF3n",search_goto_page:"Ir a la p\xE1gina",page_not_found:"P\xE1gina no encontrada",back_to_home:"Volver a la primera p\xE1gina",page_not_found_long:"Lo sentimos, pero no se ha podido encontrar la p\xE1gina que buscaba.",outline:"Esquema",last_modified:"\xDAltima actualizaci\xF3n ${1}",was_it_helpful:"\xBFTe ha sido \xFAtil esta p\xE1gina?",poor_content:"Contenido mediocre",ok_content:"Contenido OK",excellent_content:"Contenido excelente",powered_by:"Accionado por ${1}",previous:"Anterior",next:"Pr\xF3ximo",export_pdf:"Exportar como PDF",copy_link:"Copiar enlace",switch_to_dark_theme:"Switch to dark theme",switch_to_light_theme:"Switch to light theme",edit_on_github:"Editar en ${1}",page_articles_section:"Aqu\xED est\xE1n los art\xEDculos de esta secci\xF3n:",main:"Principal",cookie_policy:"pol\xEDtica de cookies",cookie_prompt:"Este sitio utiliza cookies para prestar su servicio y analizar el tr\xE1fico. Al navegar por este sitio, usted acepta la ${1}.",cookies:"Cookies",reject_all:"Rechazar todo",theme_change_appearance:"Cambiar apariencia",connection_lost:"Desconectado",network_troubleshooting:"Resoluci\xF3n de problemas de red",device_offline:"Su dispositivo puede estar desconectado, o GitBook esta experimentando problemas.",missing_content_title:"Ups, algo falta.",missing_content_description:"No pudimos encontrar la fuente original para mostrar este contenido.",table_of_contents:"Tabla de contenido",page_outline:"\xCDndice de p\xE1gina"},zh:{something_wrong:"\u51FA\u4E86\u70B9\u95EE\u9898\u3002",reload:"\u91CD\u88C5",let_us_know:"\u8BA9\u6211\u4EEC\u77E5\u9053\u53D1\u751F\u4E86\u4EC0\u4E48\u4E8B",we_have_been_notified:"\u6211\u4EEC\u7684\u56E2\u961F\u5DF2\u7ECF\u63A5\u5230\u901A\u77E5\u3002\u5982\u679C\u4F60\u60F3\u5E2E\u5FD9\uFF0C\u4F60\u53EF\u4EE5\u5728\u4E0B\u9762\u63CF\u8FF0\u53D1\u751F\u4E86\u4EC0\u4E48\u3002",search:"\u641C\u7D22",search_ask:"\u63D0\u95EE",search_placeholder:"\u641C\u7D22\u5185\u5BB9\u2026",search_placeholder_ask:"\u63D0\u95EE\u2026",search_blankslate:"\u8F93\u5165\u5173\u952E\u8BCD\u641C\u7D22",search_blankslate_ai:"\u6211\u4EEC\u5C06\u7528\u8BAD\u7EC3\u8FC7\u7684 AI \u6A21\u578B\u6765\u56DE\u7B54\u4F60\u7684\u95EE\u9898\u3002",search_blankslate_recent_searches:"\u6700\u8FD1\u641C\u7D22",search_blankslate_recent_questions:"\u6700\u8FD1\u63D0\u95EE",search_blankslate_recommended_questions:"\u4F60\u53EF\u80FD\u611F\u5174\u8DA3\u7684\u95EE\u9898",search_blankslate_query:'\u6CA1\u6709\u627E\u5230\u4E0E "${1}" \u76F8\u5173\u7684\u5185\u5BB9',search_answer_sources:"\u56DE\u7B54\u57FA\u4E8E ${1} \u6765\u6E90",search_answer_copy:"\u590D\u5236\u56DE\u7B54",search_answer_feedback_upvote:"\u6807\u8BB0\u4E3A\u6709\u7528",search_answer_feedback_downvote:"\u6807\u8BB0\u4E3A\u65E0\u7528",search_answer_feedback_title:"\u611F\u8C22\u60A8\u7684\u53CD\u9988\uFF01",search_answer_feedback_details:"\u8FD9\u5C06\u5E2E\u52A9\u6211\u4EEC\u6539\u8FDB\u56DE\u7B54\u5F15\u64CE\u3002",search_answer_loading:"\u6B63\u5728\u5206\u6790\u5185\u5BB9\u4EE5\u56DE\u7B54\u60A8\u7684\u95EE\u9898\u2026",search_answer_loading_wait:"\u8FD9\u53EF\u80FD\u9700\u8981\u51E0\u79D2\u949F\u3002",search_answer_none_title:"\u6CA1\u6709\u627E\u5230\u4E0E\u60A8\u7684\u95EE\u9898\u76F8\u5173\u7684\u56DE\u7B54\u3002",search_answer_none_details:"\u8FD9\u53EF\u80FD\u662F\u7531\u4E8E\u6CA1\u6709\u4E0E\u60A8\u7684\u95EE\u9898\u76F8\u5173\u7684\u5185\u5BB9\uFF0C\u6216\u8005\u56DE\u7B54\u4E0D\u80FD\u88AB\u5145\u5206\u4FE1\u4EFB\u3002",search_answer_error_title:"\u610F\u5916\u9519\u8BEF",search_answer_error_details:"\u53D1\u751F\u4E86\u4E00\u4E2A\u9519\u8BEF\u3002\u8BF7\u7A0D\u540E\u518D\u8BD5\u3002",search_goto_section:"\u8DF3\u8F6C\u5230\u7AE0\u8282",search_goto_page:"\u8DF3\u8F6C\u5230\u9875\u9762",page_not_found:"\u672A\u627E\u5230\u7F51\u9875",back_to_home:"\u8FD4\u56DE\u9996\u9875",page_not_found_long:"\u62B1\u6B49\uFF0C\u60A8\u8981\u627E\u7684\u9875\u9762\u65E0\u6CD5\u627E\u5230\u3002",outline:"\u5927\u7EB2",last_modified:"\u6700\u8FD1\u66F4\u65B0 ${1}",was_it_helpful:"\u6B64\u9875\u9762\u662F\u5426\u6709\u5E2E\u52A9\uFF1F",poor_content:"\u5185\u5BB9\u5DEE",ok_content:"\u597D\u7684\u5185\u5BB9",excellent_content:"\u4F18\u79C0\u7684\u5185\u5BB9",powered_by:"\u7531 ${1} \u63D0\u4F9B\u652F\u6301",previous:"\u4EE5\u524D",next:"\u4E0B\u4E00\u4E2A",export_pdf:"\u5BFC\u51FA\u4E3APDF",copy_link:"\u590D\u5236\u94FE\u63A5",switch_to_dark_theme:"Switch to dark theme",switch_to_light_theme:"Switch to light theme",edit_on_github:"\u5728 ${1} \u4E0A\u7F16\u8F91",page_articles_section:"\u4EE5\u4E0B\u662F\u672C\u8282\u4E2D\u7684\u6587\u7AE0\uFF1A",main:"\u4E3B\u8981",cookie_policy:"cookie\u653F\u7B56",cookie_prompt:"\u672C\u7F51\u7AD9\u4F7F\u7528cookies\u6765\u63D0\u4F9B\u670D\u52A1\u548C\u5206\u6790\u6D41\u91CF\u3002\u901A\u8FC7\u6D4F\u89C8\u672C\u7F51\u7AD9\uFF0C\u60A8\u63A5\u53D7\u6211\u4EEC\u7684${1}\u3002",cookies:"Cookies",reject_all:"\u62D2\u7EDD\u6240\u6709",theme_change_appearance:"\u6539\u53D8\u5916\u89C2",connection_lost:"\u8FDE\u63A5\u4E22\u5931",network_troubleshooting:"\u7F51\u7EDC\u6545\u969C\u6392\u9664",device_offline:"\u60A8\u7684\u8BBE\u5907\u53EF\u80FD\u5904\u4E8E\u79BB\u7EBF\u72B6\u6001\uFF0C\u6216\u8005 GitBook \u53EF\u80FD\u9047\u5230\u95EE\u9898\u3002",missing_content_title:"\u54CE\u5440\uFF0C\u6709\u4E9B\u4E1C\u897F\u4E22\u5931\u4E86\u3002",missing_content_description:"\u6211\u4EEC\u65E0\u6CD5\u627E\u5230\u539F\u59CB\u6765\u6E90\u4EE5\u663E\u793A\u6B64\u5185\u5BB9\u3002",table_of_contents:"\u76EE\u5F55",page_outline:"\u9875\u9762\u5927\u7EB2"},ja:{something_wrong:"\u4F55\u304B\u554F\u984C\u304C\u767A\u751F\u3057\u307E\u3057\u305F\u3002",reload:"\u30EA\u30ED\u30FC\u30C9",let_us_know:"\u4F55\u304C\u8D77\u3053\u3063\u305F\u306E\u304B\u3092\u6559\u3048\u3066\u304F\u3060\u3055\u3044",we_have_been_notified:"\u79C1\u305F\u3061\u306E\u30C1\u30FC\u30E0\u306F\u901A\u77E5\u3092\u53D7\u3051\u307E\u3057\u305F\u3002\u3054\u5354\u529B\u3044\u305F\u3060\u3051\u308B\u5834\u5408\u306F\u3001\u4F55\u304C\u8D77\u3053\u3063\u305F\u304B\u3092\u4EE5\u4E0B\u306B\u3054\u8A18\u5165\u304F\u3060\u3055\u3044\u3002",search:"\u691C\u7D22",search_ask:"\u8CEA\u554F\u3059\u308B",search_placeholder:"\u691C\u7D22\u2026",search_placeholder_ask:"\u8CEA\u554F\u2026",search_blankslate:"\u30AD\u30FC\u30EF\u30FC\u30C9\u3092\u5165\u529B\u3057\u3066\u691C\u7D22",search_blankslate_ai:"\u8CEA\u554F\u306B\u5BFE\u3059\u308B\u56DE\u7B54\u306F\u3001AI\u30E2\u30C7\u30EB\u306B\u3088\u3063\u3066\u884C\u308F\u308C\u307E\u3059\u3002",search_blankslate_recent_searches:"\u6700\u8FD1\u306E\u691C\u7D22",search_blankslate_recent_questions:"\u6700\u8FD1\u306E\u8CEA\u554F",search_blankslate_recommended_questions:"\u304A\u3059\u3059\u3081\u306E\u8CEA\u554F",search_blankslate_query:'"${1}" \u306B\u95A2\u3059\u308B\u30B3\u30F3\u30C6\u30F3\u30C4\u306F\u898B\u3064\u304B\u308A\u307E\u305B\u3093\u3067\u3057\u305F',search_answer_sources:"\u56DE\u7B54\u306F ${1} \u304B\u3089\u306E\u60C5\u5831\u3092\u5143\u306B\u3057\u3066\u3044\u307E\u3059",search_answer_copy:"\u56DE\u7B54\u3092\u30B3\u30D4\u30FC",search_answer_feedback_upvote:"\u5F79\u306B\u7ACB\u3063\u305F\u3068\u30DE\u30FC\u30AF",search_answer_feedback_downvote:"\u5F79\u306B\u7ACB\u305F\u306A\u304B\u3063\u305F\u3068\u30DE\u30FC\u30AF",search_answer_feedback_title:"\u30D5\u30A3\u30FC\u30C9\u30D0\u30C3\u30AF\u3042\u308A\u304C\u3068\u3046\u3054\u3056\u3044\u307E\u3059\uFF01",search_answer_feedback_details:"\u3053\u308C\u306B\u3088\u308A\u3001\u56DE\u7B54\u30A8\u30F3\u30B8\u30F3\u3092\u6539\u5584\u3067\u304D\u307E\u3059\u3002",search_answer_loading:"\u8CEA\u554F\u306B\u56DE\u7B54\u3059\u308B\u305F\u3081\u306B\u30B3\u30F3\u30C6\u30F3\u30C4\u3092\u5206\u6790\u3057\u3066\u3044\u307E\u3059\u2026",search_answer_loading_wait:"\u3053\u308C\u306B\u306F\u6570\u79D2\u304B\u304B\u308B\u5834\u5408\u304C\u3042\u308A\u307E\u3059\u3002",search_answer_none_title:"\u8CEA\u554F\u306B\u5BFE\u3059\u308B\u56DE\u7B54\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093\u3067\u3057\u305F\u3002",search_answer_none_details:"\u3053\u308C\u306F\u3001\u8CEA\u554F\u306B\u95A2\u9023\u3059\u308B\u30B3\u30F3\u30C6\u30F3\u30C4\u304C\u306A\u3044\u304B\u3001\u56DE\u7B54\u304C\u4FE1\u983C\u3067\u304D\u306A\u3044\u305F\u3081\u304B\u3082\u3057\u308C\u307E\u305B\u3093\u3002",search_answer_error_title:"\u30A8\u30E9\u30FC",search_answer_error_details:"\u30A8\u30E9\u30FC\u304C\u767A\u751F\u3057\u307E\u3057\u305F\u3002\u5F8C\u3067\u3082\u3046\u4E00\u5EA6\u304A\u8A66\u3057\u304F\u3060\u3055\u3044\u3002",search_goto_section:"Go to section",search_goto_page:"Go to page",page_not_found:"\u30DA\u30FC\u30B8\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093",back_to_home:"\u30D5\u30ED\u30F3\u30C8\u30DA\u30FC\u30B8\u306B\u623B\u308B",page_not_found_long:"\u7533\u3057\u8A33\u3042\u308A\u307E\u305B\u3093\u304C\u3001\u304A\u63A2\u3057\u306E\u30DA\u30FC\u30B8\u306F\u898B\u3064\u304B\u308A\u307E\u305B\u3093\u3067\u3057\u305F\u3002",outline:"\u6982\u8981",last_modified:"\u6700\u7D42\u66F4\u65B0 ${1}",was_it_helpful:"\u3053\u306E\u30DA\u30FC\u30B8\u306F\u5F79\u306B\u7ACB\u3061\u307E\u3057\u305F\u304B\uFF1F",poor_content:"\u60AA\u3044\u5185\u5BB9",ok_content:"OK\u30B3\u30F3\u30C6\u30F3\u30C4",excellent_content:"\u512A\u308C\u305F\u5185\u5BB9",powered_by:"${1} \u4E0A\u3067\u52D5\u4F5C\u3057\u3066\u3044\u307E\u3059",previous:"\u524D",next:"\u6B21",export_pdf:"PDF\u306B\u51FA\u529B",copy_link:"\u30EA\u30F3\u30AF\u306E\u30B3\u30D4\u30FC",switch_to_dark_theme:"Switch to dark theme",switch_to_light_theme:"Switch to light theme",edit_on_github:"${1}\u3067\u7DE8\u96C6",page_articles_section:"\u3053\u306E\u30BB\u30AF\u30B7\u30E7\u30F3\u306E\u8A18\u4E8B\u306F\u6B21\u306E\u3068\u304A\u308A\u3067\u3059:",main:"\u4E00\u6B21",cookie_policy:"\u30AF\u30C3\u30AD\u30FC\u30DD\u30EA\u30B7\u30FC",cookie_prompt:"\u3053\u306E\u30B5\u30A4\u30C8\u3067\u306F\u3001\u30B5\u30FC\u30D3\u30B9\u306E\u63D0\u4F9B\u3084\u30C8\u30E9\u30D5\u30A3\u30C3\u30AF\u306E\u5206\u6790\u306E\u305F\u3081\u306B\u30AF\u30C3\u30AD\u30FC\u3092\u4F7F\u7528\u3057\u3066\u3044\u307E\u3059\u3002\u3053\u306E\u30B5\u30A4\u30C8\u3092\u95B2\u89A7\u3059\u308B\u3053\u3068\u3067\u3001\u304A\u5BA2\u69D8\u306F\u5F53\u793E\u306E${1}\u306B\u540C\u610F\u3057\u305F\u3053\u3068\u306B\u306A\u308A\u307E\u3059\u3002",cookies:"\u30AF\u30C3\u30AD\u30FC",reject_all:"\u5168\u3066\u3092\u62D2\u5426\u3059\u308B",theme_change_appearance:"\u5916\u89B3\u3092\u5909\u66F4\u3059\u308B",connection_lost:"\u63A5\u7D9A\u5207\u65AD",network_troubleshooting:"\u30CD\u30C3\u30C8\u30EF\u30FC\u30AF\u306E\u30C8\u30E9\u30D6\u30EB\u30B7\u30E5\u30FC\u30C6\u30A3\u30F3\u30B0",device_offline:"\u30C7\u30D0\u30A4\u30B9\u304C\u30AA\u30D5\u30E9\u30A4\u30F3\u3067\u3042\u308B\u304B\u3001GitBook\u3067\u554F\u984C\u304C\u767A\u751F\u3057\u3066\u3044\u308B\u53EF\u80FD\u6027\u304C\u3042\u308A\u307E\u3059\u3002",missing_content_title:"\u304A\u3063\u3068\u3001\u4F55\u304B\u304C\u5931\u308F\u308C\u3066\u3044\u307E\u3059\u3002",missing_content_description:"\u3053\u306E\u30B3\u30F3\u30C6\u30F3\u30C4\u3092\u8868\u793A\u3059\u308B\u305F\u3081\u306E\u5143\u306E\u30BD\u30FC\u30B9\u3092\u898B\u3064\u3051\u308B\u3053\u3068\u304C\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F\u3002",table_of_contents:"\u76EE\u6B21",page_outline:"\u30DA\u30FC\u30B8\u6982\u8981"}};function se(){let{locale:e}=Kr.useContext(Fo),t=zR[e];return Kr.useCallback((o,...n)=>{let r=t[o]||zR.en[o],i=[],a=r;return n.forEach((s,l)=>{if(typeof s=="string")a=a.replace(`\${${l+1}}`,s);else{let[u,d]=a.split(`\${${l+1}}`);i.push(Kr.createElement(Kr.Fragment,{key:`string-${l}`},u)),i.push(Kr.createElement(Kr.Fragment,{key:`arg-${l}`},s)),a=d}}),i.length?Kr.createElement(Kr.Fragment,null,i,a):a},[e])}function Id(){let e=se();return WR.createElement(Kn,{kind:"default",title:e("missing_content_title"),details:e("missing_content_description")})}c();var Ig=C(O());var gD=F.createInteractiveComponent(ut),FR=Ig.forwardRef(function(t,o){let{active:n=!1,children:r,onPress:i,style:a,...s}=t,[,l]=R(hD);return Ig.createElement(gD,{ref:o,...s,style:[a,n&&l.active],activeStyle:l.active,onMouseDown:u=>{u.preventDefault(),i()}},r)}),hD=z.create({active:e=>({borderRadius:e.radiuses.medium,paddingHorizontal:g.xsmall,backgroundColor:"rgba(35, 131, 226, 0.14)",marginHorizontal:-g.xsmall,zIndex:-1,cursor:"pointer"})});function VR(e){let{editor:t,node:o,children:n,attributes:r,isFocused:i}=e,[,a]=R(yD),{readOnly:s}=t,l=o.getFragmentByKey(Ni),{selection:u}=t.value,d=Wt(u)&&!!u.hasAnchorIn(l),m=i&&d,[p,f]=Jn.useState(!1),h=Wt(u)&&(p||m),y=Jn.useCallback(()=>{s||t.change(P=>{let I=o.getFragmentByKey(Ni);I&&(Wt(P.value.selection)?P.collapseToEndOf(I).focus():P.selectText(ye.fromBlockRange(P.value.selection,P.value.document)).collapseToEndOf(I).focus())})},[s,t,o.key]),w=Jn.useCallback(()=>{s||t.change(P=>{let I=P.value.document.getDescendant(o.key);if(I&&I.isInline()){let _=I.getFragmentByKey(Ni);_&&Wt(P.value.selection)&&P.value.selection.hasEdgeIn(_)&&P.collapseToEndOf(I)}})},[s,t,o.key]);Jn.useEffect(()=>{s||(h?y():w())},[h,s,y,w]),Jn.useEffect(()=>{s||!d&&p&&f(!1)},[d,p,s]);let k=()=>{y(),f(!0)},x=Jn.useCallback(()=>{f(!1)},[]);return Jn.createElement(sp.Provider,{value:x},Jn.createElement(zi,{closeOnClick:!1,closeOnEsc:!0,closeOnScroll:!1,closeOnClickInNestedPortals:!1,closeOnOutsideClick:!0,opened:h,anchor:({ref:P})=>Jn.createElement(FR,{ref:P,style:a.annotationText,...r,onPress:k,active:h},n)},Jn.createElement(_O,{node:o,editor:t})))}var yD=z.create({annotationText:e=>({textDecorationLine:"underline",textDecorationStyle:"dotted",textDecorationThickness:2,textDecorationColor:e.colors.text.muted})});c();var ob=C(Br());var qR={onKeyDown:(e,t,o)=>{if(!xn(t.value.selection)&&((0,ob.default)("mod+enter",e)||(0,ob.default)("esc",e))){let{value:n}=t,{startBlock:r,document:i}=n;if(!r)return;let a=i.getFragmentParent(r.key);if((a==null?void 0:a.object)!=="fragment"||a.type!==Ni)return;let s=i.getParent(a.key);return s?(t.collapseToEndOf(s),t):void 0}}};c();var yo=C(O());W();function GR(e){let{editor:t,node:o,children:n}=e,{readOnly:r}=t,i=o.data.toFrozenObject(),a=Ye(),s=hp(i.syntax||"text"),l=typeof i.title=="string",u=yo.useRef(null),d=de(u),m=yo.useRef(null),p=de(m),f=(w,k)=>{t.change(x=>{x.insertDataByKey(o.key,["title"],w)})},h=()=>$t.getCodeText(o),y=bD(o.key);return yo.createElement(ge,{...e,palette:y},yo.createElement(Mk,{overflow:i.overflow||aC,lineNumbers:!!i.lineNumbers,header:l?yo.createElement(vD,{title:i.title,isEditable:!r,onTitleChange:f}):null,showToolbar:d.opened||p.opened,translate:!1,toolbar:a?null:yo.createElement(yo.Fragment,null,r?null:yo.createElement(B,{ref:u,active:d.opened,kind:"secondary",size:"small",style:g.Margin.xsmallRight,rightIcon:S.ChevronDown,onPress:()=>{d.open(HR(t,o.key))}},s.title),yo.createElement(up,{kind:"secondary",size:"small",content:h}),r?null:yo.createElement(B,{ref:m,icon:S.MoreVertical,kind:"secondary",size:"small",style:g.Margin.xsmallLeft,title:"More options",onPress:()=>{p.open(y)}}))},n))}function vD(e){let{title:t,isEditable:o,onTitleChange:n}=e,[r,i]=yo.useState(t),[a,s]=R(D);yo.useEffect(()=>{i(t)},[t]);let l=d=>{n(r||"",d)},u=[s.Body,s.textMuted];return yo.createElement(dp,{style:[v.directionRow,v.alignCenter,g.Padding.mediumLeft]},o?yo.createElement(Tr,{value:r,placeholder:"Enter a filename",placeholderTextColor:a.colors.text.muted,onChangeText:d=>i(d),style:u,onBlur:l}):yo.createElement(A,{style:u},t))}function bD(e){let t=Ua(),o=Xr(t,e),n=r=>{let i=t.value.document.assertBlock(r),a=i.data.toFrozenObject(),s=typeof a.title=="string";return[{key:"code",commands:[{key:"syntax",title:"Set syntax\u2026",icon:S.Code,descendant:()=>HR(t,i.key)}]},{key:"code-options",commands:[{key:"with-line-numbers",icon:S.CodeLineNumbers,type:2,enabled:!!a.lineNumbers,title:"With line numbers",trigger:()=>(t.change(l=>{a.lineNumbers?l.removeDataPathByKey(i.key,["lineNumbers"]):l.setDataByKey(i.key,["lineNumbers"],!0)}),ot(t,i.key,n(i.key)))},{key:"with-title",icon:S.CodeCaption,type:2,enabled:s,title:"With caption",trigger:()=>(t.change(l=>{s?l.removeDataPathByKey(i.key,["title"]):l.insertDataByKey(i.key,["title"],"")}),ot(t,i.key,n(i.key)))},{key:"with-wrap",icon:S.CodeWrap,type:2,enabled:a.overflow==="wrap",title:"Wrap code",trigger:()=>(t.change(l=>{a.overflow==="wrap"?l.removeDataPathByKey(i.key,["overflow"]):l.setDataByKey(i.key,["overflow"],"wrap")}),ot(t,i.key,n(i.key)))}]},...o?[o]:[]]};return ot(t,e,n(e))}function HR(e,t){let o=e.value.document.assertBlock(t),n=o.data.get("syntax");return ne({search:"Select a syntax\u2026",groups:[{key:"syntaxes",commands:Nk().map(r=>({type:1,key:r.key,selected:n===r.key,title:r.title,trigger:()=>{e.change(i=>{i.setDataByKey(o.key,["syntax"],r.key)})}}))}]})}c();var XR=C(O());function KR(e){let{node:t,parent:o,children:n,editor:r}=e,{diff:i,highlighted:a}=t.data.toFrozenObject(),s=()=>{r.change(l=>{l.setDataByKey(t.key,["highlighted"],!a)})};return XR.createElement(Tk,{number:o.getChildIndex(t.key)+1,highlighting:i==="added"||i==="deleted"||i==="modified"?i:a?"highlighted":void 0,onPressGutter:r.readOnly?void 0:s},n)}c();var Sc=C(Br());var SD=(0,Sc.isKeyHotkey)("mod+a"),wD=(0,Sc.isKeyHotkey)("shift+tab"),CD=(0,Sc.isKeyHotkey)("tab"),kD=(0,Sc.isKeyHotkey)("mod+enter"),xD=(0,Sc.isKeyHotkey)("enter"),OD=(0,Sc.isKeyHotkey)("backspace"),$R={onKeyDown:_D,onPaste:ID};function _D(e,t,o){let{value:n}=t;if(xn(n.selection))return;let r=$t.getCurrentCode(n);if(r){if(SD(e))return RD(r,e,t,o);if(wD(e))return TD(r,e,t,o);if(CD(e))return PD(r,e,t,o);if(kD(e))return MD(r,e,t,o);if(xD(e))return ED(r,e,t,o);if(OD(e))return LD(r,e,t,o)}}function ID(e,t,o){let{value:n}=t;if(xn(n.selection))return;let r=$t.getCurrentCode(t.value),{endBlock:i}=n;if(!r||!i||!r.hasDescendant(i.key))return;let a=rl(e),s;a.type==="fragment"&&a.fragment?s=a.fragment.getTexts().map(d=>d.text).join(`
`):s=a.text||"";let l=$t.createCodeBlock(s).blockNodes,u=Xc.create({nodes:l});return t.insertDocument(u)}function RD(e,t,o,n){t.preventDefault();let r=e.getFirstText(),i=e.getLastText();if(!(!r||!i))return o.collapseToStartOf(r).extendToEndOf(i)}function PD(e,t,o,n){let{value:r}=o;t.preventDefault(),t.stopPropagation();let{isCollapsed:i}=r,a=$t.getIndent($t.getCodeText(e));return i?o.insertText(a).focus():$t.indentLines(o,a)}function TD(e,t,o,n){t.preventDefault(),t.stopPropagation();let r=$t.getIndent($t.getCodeText(e));return $t.dedentLines(o,r)}function ED(e,t,o,n){let{value:r}=o;if(!r.isCollapsed)return;t.preventDefault();let{startBlock:i}=r;if(!i)return;let a=i.text,s=$t.getIndent(a,"");return o.splitBlock().insertText(s).focus()}function MD(e,t,o,n){let{value:r}=o;if(r.isCollapsed)return t.preventDefault(),ft(o,e),o}function LD(e,t,o,n){let{value:r}=o;if(r.isExpanded)return;let{startOffset:i,startText:a}=r,s=r.startBlock;if(!s)return;let l=$t.getIndent($t.getCodeText(e));if(s.text.slice(0,i).endsWith(l))return t.preventDefault(),o.deleteBackward(l.length).focus();let d=i===0&&e.getFirstText()===a,m=e.nodes.size===1&&s.text.length===0;if(d&&m)return t.preventDefault(),o.setBlocks(pe,{normalize:!1}).unwrapNodeByKey(s.key)}c();var ji=C(O());W();function Rg(e){let{url:t,readOnly:o}=e,[n]=af(t),{data:r}=n,i=sO(o?null:t),a=i?ji.createElement(ND,{...i}):null;if(!r)return ji.createElement(Qn,null);if(r.type==="rich"&&r.html){let s=ji.createElement("div",{dangerouslySetInnerHTML:{__html:r.html}});return a?ji.createElement(b,null,s,ji.createElement(b,{style:DD.overlayInstallButton},a)):s}return ji.createElement(Xi,{href:t,title:r.title,details:r.site,icon:r.icon?pt(Bi,{source:{uri:r.icon}}):void 0,onPress:s=>{s.preventDefault(),Ca(t)},buttons:a?[a]:[]})}function ND(e){let{integration:t}=e,{navigate:o}=ve(),{logAnalyticsEvent:n}=ji.useContext(ae),r=i=>{i.stopPropagation(),i.preventDefault(),n({type:"edit_open_integration",integration:t.name,reason:"embed"}),o({overlay:{type:"integrations",integration:t.name}})};return ji.createElement(B,{kind:"secondary",size:"medium",icon:pt(dl,{integration:t}),title:`Install the ${t.title} integration to supercharge this block`,tooltipPreferredPlacement:"left",onPress:r},"Install ",t.title)}var DD=X.create({overlayInstallButton:{position:"absolute",bottom:g.medium,right:g.medium}});c();var Io=C(O());c();var hs=C(O());W();function ys(e){let{node:t,editor:o,isSelected:n}=e,{readOnly:r}=o,[,i]=R(D),a=F.useInteractiveState(),s=t.fragments.get(sC),l=s==null?void 0:s.isEmpty;return s?(n||a.hovered)&&!r||!l?hs.createElement(b,{style:[UR.editableCaption,g.Padding.smallTop],...a.events},l?hs.createElement(b,{style:[X.absoluteFill,v.alignCenter,v.justifyContentCenter,g.Padding.smallTop]},hs.createElement(A,{style:[i.Italic,i.Body,i.textMuted]},"Write a caption")):null,hs.createElement(Un.Provider,{value:"caption"},hs.createElement(ds.Provider,{value:"center"},hs.createElement(Tn,{fragment:"caption"})))):r?null:hs.createElement(b,{style:[g.Padding.smallTop,UR.blankPlaceHolder],...a.events}):null}var UR=X.create({editableCaption:{position:"relative",textAlign:"center"},blankPlaceHolder:{height:g.small+op.xsmall}});c();var Vo=C(O());c();var vs=C(O());function Pg(e){let{children:t}=e,[o,n]=vs.useState(!1);return vs.useEffect(()=>{n(!0)},[]),o?vs.createElement(vs.Fragment,null,t):null}c();var Tg=C(O());function jR(e){let{children:t,statusCode:o}=e,n=cx();return n.staticContext&&(n.staticContext.statusCode=o),Tg.createElement(Tg.Fragment,null,t)}var Eg=Vo.forwardRef(function(t,o){let{data:n,readOnly:r,onDataChange:i}=t,{integrationBlocksRemote:a}=Vo.useContext(ae),s=Vo.useRef(null),{color:l}=Di(),u={integrationId:n.integration,componentId:n.block,props:n.props,action:n.action,context:{type:"document",editable:!r,theme:l}},[d,m]=Ix(async p=>{var f;return(f=s.current)==null?void 0:f.dispatchAction(p)});return Vo.useImperativeHandle(o,()=>({getPaletteGroups:()=>{let{result:p}=a.readCacheState(u);return p&&p.element.type==="block"?d(p.element):[]}})),Vo.createElement(Vo.Fragment,null,m,Vo.createElement(Vo.Suspense,{fallback:Vo.createElement(Qn,null)},Vo.createElement(Pg,null,Vo.createElement(lv,{ref:s,mode:"block",remote:a,input:u,security:{firstPartyDomains:[Wa.integrations.domain]},onPropsChange:p=>{r||i({...n,action:void 0,props:p})}}))))});function YR(e){let{node:t,editor:o}=e,{readOnly:n}=o,r=t.data.toFrozenObject(),{getIntegrationsBlocks:i}=Io.useContext(ae),a=i(),s=Io.useMemo(()=>{let d=el(a,r.url);return d?Yc.createIntegrationBlockDataForLinkUnfurl(d.integrationKey,d.block.id,r.url):null},[a,r.url]),l=Xr(o,t.key),u=()=>ot(o,t.key,l?[l]:[]);return s?Io.createElement(ge,{palette:u,...e},Io.createElement(Pt,{...e},Io.createElement(Io.Suspense,{fallback:Io.createElement(Qn,null)},Io.createElement(Eg,{data:s,readOnly:n,onDataChange:d=>{o.change(m=>{m.setNodeByKey(t.key,{type:Mr,data:d})})}})))):Io.createElement(ge,{palette:u,...e},Io.createElement(Pt,{...e},Io.createElement(Io.Suspense,{fallback:Io.createElement(Qn,null)},Io.createElement(Rg,{url:r.url,readOnly:n}))),Io.createElement(ys,{...e}))}c();var Gt=C(O());c();var Gl=C(O());function ZR(e){let{integrationName:t}=e,[{result:o}]=Mp([jm(t)]);return o?Gl.createElement(AD,{integration:o}):Gl.createElement(Kn,{kind:"default",title:`Integration ${t} no longer exist or has been unpublished.`})}function AD(e){let{integration:t}=e,o=Ut(dl,{integration:t},[t]),{navigate:n}=ve(),{logAnalyticsEvent:r}=Gl.useContext(ae);return Gl.createElement(Kn,{kind:"default",icon:o,title:`Integration ${t.title} is not configured. Install it to get started.`,actions:[{label:"Install",onPress:()=>{r({type:"edit_open_integration",integration:t.name,reason:"empty"}),n({overlay:{type:"integrations",integration:t.name}})}}]})}function QR(e){let{node:t,editor:o}=e,{readOnly:n}=o,r=Gt.useRef(null),{getIntegrationsBlocks:i}=Gt.useContext(ae),{navigate:a}=ve(),s=i(),l=t.data.toFrozenObject(),u=Xr(o,t.key),d=()=>{var p;return ot(o,t.key,[...((p=r==null?void 0:r.current)==null?void 0:p.getPaletteGroups())||[],{key:"integration",commands:()=>{let[{result:f}]=Tp([jm(l.integration)]);return f?[{key:"integration.settings",icon:pt(dl,{integration:f}),title:`Configure ${f.title}`,trigger:()=>{a({overlay:{type:"integrations",integration:f.name}})}}]:[]}},...u?[u]:[]])};return Gt.useMemo(()=>XC(s,l.integration,l.block),[s,l.integration,l.block])?Gt.createElement(ge,{...e,palette:d},Gt.createElement(Pt,{...e},Gt.createElement(Gt.Suspense,{fallback:Gt.createElement(Qn,null)},Gt.createElement(Eg,{ref:r,data:l,readOnly:n,onDataChange:p=>{o.change(f=>{f.setNodeByKey(t.key,{data:p})})}})))):Gt.createElement(ge,{...e,palette:d},Gt.createElement(Pt,{...e},Gt.createElement(Gt.Suspense,{fallback:Gt.createElement(Qn,null)},l.url?Gt.createElement(Rg,{url:l.url,readOnly:n}):n?Gt.createElement(Id,null):Gt.createElement(ZR,{integrationName:l.integration}))))}c();var Mg=C(Br()),JR=C(O());function eP(e){return JR.useMemo(()=>({onKeyDown:(t,o)=>{let{value:n}=o;if(!n.isCollapsed||!(0,Mg.default)("enter",t))return;let{startBlock:r,selection:i}=n;if(!ye.isTextRange(i)||!r||r.type!==pe||!i.isAtEndOf(r))return;let{text:a}=r;if(!Er(a))return;let s=n.document.getParent(r.key);if(!s||!Re(s,rn))return;let l=km(a,{sortQueryParameters:!1}),u=BD(l,e);o.replaceNodeByKey(r.key,u).collapseToStartOf(u)}}),[e])}var tP={onKeyDown:(e,t,o)=>{if((0,Mg.default)("enter",e)||(0,Mg.default)("shift+enter",e)){let{value:n}=t,{startBlock:r,document:i}=n;if(!r||r.type!==pe)return;let a=i.getFragmentParent(r.key);if((a==null?void 0:a.object)!=="fragment")return;let s=i.getParent(a.key);if(!s||!s.isBlock()||![rn,ai,pa,ma].includes(s.type))return;let l=s.type===ai?i.getParent(s.key):s;return ft(t,l),t}}};function BD(e,t){let o=t(),n=el(o,e);return n?Yc.createIntegrationBlockForLinkUnfurl(n.integrationKey,n.block.id,e):Am.createEmbedBlock(e)}c();var nb=C(O());c();var Hl=C(O());function oP(e){let{mark:t,node:o,offset:n,attributes:r,children:i,editor:a}=e,{value:s}=t.data.toObject(),l=Hl.useRef(null),u=gt(s),d=de(l);return Hl.useEffect(()=>{if(!d.opened&&a.value.isFocused){let m=p=>{a.change(f=>{let h=ye.create({anchorKey:o.key,anchorOffset:n,focusKey:o.key,focusOffset:n+u.current.length+1});f.insertInlineAtRange(h,Bm.createEmoji(p)).focus()})};d.open(Ya(yl(m,{withSearch:!1}),s))}else d.typeQuery(s);return()=>{d.close()}},[d,s]),Hl.createElement(ut,{ref:l,...r},i)}c();var Pd=C(O());function nP(e){let{editor:t,node:o,parent:n}=e,r=Pd.useRef(null),i=de(r),a=Gf(n.object==="block"?n:null),s=Wp(()=>{i.open(yl(l=>{t.change(u=>{u.setNodeByKey(o.key,{data:{code:l}})})}))});return Pd.createElement(Vl,{ref:r,...e,onPress:t.readOnly?void 0:s},Pd.createElement(_o,{code:o.data.get("code"),size:a}))}var rP="emojiContext",zD=/(^|\s):(\w*)$/,iP={renderMark:FD,renderNode:VD,decorateValue:WD};function WD(e){let{selection:t}=e,o=qD(e),n=[];return ye.isTextRange(t)&&o!==null&&n.push(ye.create({anchorKey:t.startKey,anchorOffset:t.startOffset-o.length-1,focusKey:t.startKey,focusOffset:t.startOffset,marks:[{type:rP,data:{value:o}}],isAtomic:!0})),n}function FD(e){let{mark:t}=e;switch(t.type){case rP:return nb.createElement(oP,{...e})}}function VD(e){let{node:t}=e;switch(t.type){case Xs:return nb.createElement(nP,{...e})}}function qD(e){if(!e.isCollapsed)return null;let{document:t,startText:o,startBlock:n,selection:r}=e;if(!ye.isTextRange(r)||!o||!n||!va({document:t,block:n},Xs))return null;let{startOffset:i}=r,a=o.text.slice(0,i),s=zD.exec(a);return s==null?null:s[2]}c();var bt=C(O());W();function GD(e,t,o){for(let[n,r]of e.entries())if(r===o){let i=t.getNode(n);return i?{key:n,id:r,node:i}:null}}function aP(e){let t=F.useInteractiveState(),{node:o,isFocused:n,editor:r}=e,[,i]=R(HD),[,a]=R(D),{sections:s,selected:l}=bt.useContext(Gr),u=Ye(),d=bt.useRef(""),[m,p]=bt.useState("unset");bt.useEffect(()=>{d.current="",p("unset")},[l]);let f=l&&s.get(o.key)===l,h=bt.useMemo(()=>!f&&!!GD(s,o,l),[f,s,o,l]);f&&(d.current=l);let{selection:y}=r.value,w=ye.isTextRange(y)&&y.hasEdgeIn(ba.getBodyFragment(o)),k=n&&ye.isTextRange(y)&&!y.hasFocusInFragmentOf(o),x=u||(m==="unset"?f||h||l===d.current:m==="expanded"),P=x?S.ChevronDown:S.ChevronRight,I=()=>{x&&w&&r.change(Ee=>{Ee.collapseToStartOf(ba.getTitleFragment(o))}),p(x?"collapsed":"expanded")},{anchoredBlockId:_,onAnchoredBlockPress:M,anchorElement:T,anchoredBlockInteractiveState:L}=xg(o,{accessibilityLabel:"Direct link to expandable block",onBlockPress:I}),q=bt.useId(),G={id:q,controls:{accessibilityRole:"button",accessibilityExpanded:x,accessibilityControls:`expandable-body-${q}`,accessibilityLabelledBy:`expandable-title-${q}`},chevron:{accessibilityRole:"presentation"},body:{accessibilityRole:"region",accessibilityLabelledBy:`expandable-title-${q}`}},U=o.fragments.get(ga),H=U==null?void 0:U.nodes.first(),Y=qr(H,U||o),oe=E.ICON_M,ce=Y.paddingTop+(Mn(H)-oe)/2;return bt.createElement(ge,{...e},bt.createElement(Pt,{...e,isFocused:k},bt.createElement(b,{...t.events,style:[i.expandable,t.active&&i.expandableActive],nativeID:_},bt.createElement(b,{style:[v.directionRow,g.Padding.mediumRight],...L.events},bt.createElement(F.TouchableOpacity,{onPress:M,style:[g.Padding.mediumHorizontal,v.directionRow,v.justifyContentCenter,{paddingTop:ce}],...G.controls},bt.createElement(P,{size:oe,style:[t.active?a.primary:a.textMuted],...G.chevron})),bt.createElement(b,{style:[v.flex1,{paddingTop:Y.paddingTop,paddingBottom:x?g.small:Y.paddingBottom}],nativeID:`expandable-title-${q}`},bt.createElement(Un.Provider,{value:"expandableTitle"},bt.createElement(Tn,{fragment:ga}))),bt.createElement(b,{style:{paddingTop:ce}},T)),bt.createElement(b,{style:[i.expandableBody,!x&&i.hidden],nativeID:`expandable-body-${q}`,...G.body},bt.createElement(Tn,{fragment:Hs})))))}var HD=z.create({hidden:{visibility:"hidden",height:0,padding:0,overflow:"hidden"},expandable:e=>({breakInside:"avoid",borderWidth:1,borderColor:e.colors.border.main,borderRadius:e.radiuses.large}),expandableActive:e=>({borderColor:e.colors.primary.main}),expandableBody:{padding:g.medium,paddingLeft:g.medium+E.ICON_M+g.medium,paddingTop:0}});c();var rb=C(Br());var sP={onKeyDown:XD};function XD(e,t){if(!xn(t.value.selection)){if((0,rb.default)("mod+enter",e))return $D(e,t);if((0,rb.default)("enter",e))return KD(e,t)}}function KD(e,t){var n;let o=ba.getCurrentExpandable(t.value);if(o&&((n=o.fragment)==null?void 0:n.type)===ga)return t.collapseToStartOf(o.expandable.getFragmentByKey(Hs)).focus()}function $D(e,t){let{value:o}=t,n=ba.getCurrentExpandable(t.value);if(!(!n||!o.isCollapsed))return e.preventDefault(),ft(t,n.expandable),t}c();c();var gP=C(lP()),Zt=C(O());W();c();var dn=C(O());c();var Td=C(O());W();function mP(e){return ne({search:"Pick a color\u2026",groups:[{key:"text",title:"Color",commands:$p.map(t=>uP(e,t,!1))},{key:"background",title:"Background",commands:Up.map(t=>uP(e,t,!0))}]})}function uP(e,t,o){let n=e.value.activeMarks.find(a=>a.type===Nu),r=o?"background":"text",i=n&&n.data.get(r)===t.key;return{key:`${o?"background_":"foreground_"}${t.key}`,title:t.title,type:1,selected:!!i,icon:({size:a})=>o?Td.createElement(dP,{size:a,backgroundColor:t.color,color:K.BLACK}):Td.createElement(dP,{size:a,backgroundColor:K.WHITE,color:t.color}),trigger:()=>{e.change(a=>{n&&a.removeMark(n),i||a.addMark({type:Nu,data:{background:"default",text:"default",...n?n.data.toObject():{},[r]:t.key}})})}}}function dP(e){let{size:t=E.ICON_S,color:o,backgroundColor:n}=e;return Td.createElement(b,{style:[v.directionRow,v.alignCenter,v.justifyContentCenter,{width:t+2,height:t+2,borderRadius:E.RADIUS_M,backgroundColor:n}]},Td.createElement(S.Type,{style:{color:o,fontSize:t*.9}}))}c();var er=({type:e,editor:t})=>()=>{t.change(o=>{o.toggleMark(e),o.focus()})},wc=({palette:e,editor:t,contentReferenceContext:o,isInLink:n,insertAtRange:r})=>()=>{if(n){t.change(a=>{a.unwrapInline({type:zo}).focus()});return}t.change(a=>{_g(a)});let i=ln(a=>{t.change(s=>{r?Ks.insertContentReferenceAtRange(s,a,r):Ks.insertContentReference(s,a)})},{...o,document:t.value.document});return e.open(i),i},Ng=({editor:e})=>()=>{e.change(t=>{Dm.wrapWithAnnotation(t),t.focus()})};function pP(e){let{value:t,editor:o,palette:n}=e,{contentReferenceContext:r}=dn.useContext(ae),i=t.activeMarks.map(f=>f.type),{startBlock:a,document:s}=t;ii(a);let l=t.hasInline(zo),d=!(a.type===Mi),m=()=>{o.change(f=>{_g(f)}),n.open(mP(o))},p=()=>{o.change(f=>{f.removeAllMarks().focus()})};return dn.createElement(M1,{onTabToExit:()=>{o.change(f=>{f.focus()})}},d?dn.createElement(Qu,null,Lm(a)?null:dn.createElement(lo,{leadingIcon:S.Bold.CSS,active:i.has(Rn),onPress:er({type:Rn,editor:o}),tooltipTitle:"*Bold*",tooltipBadge:Qs(Xe.EDITOR_BOLD),label:"Bold",iconOnly:!0,preventFocusOnPress:!0}),dn.createElement(lo,{leadingIcon:S.Italic.CSS,active:i.has(Pn),onPress:er({type:Pn,editor:o}),tooltipTitle:"_Italic_",tooltipBadge:Qs(Xe.EDITOR_ITALIC),label:"Italic",iconOnly:!0,preventFocusOnPress:!0}),dn.createElement(lo,{leadingIcon:S.Strikethrough.CSS,active:i.has(dr),onPress:er({type:dr,editor:o}),tooltipTitle:"~~Strikethrough~~",tooltipBadge:Qs(Xe.EDITOR_STRIKETHROUGH),label:"Strikethrough",iconOnly:!0,preventFocusOnPress:!0}),dn.createElement(lo,{leadingIcon:S.Code.CSS,active:i.has(ao),onPress:er({type:ao,editor:o}),tooltipTitle:"`Code`",tooltipBadge:Qs(Xe.EDITOR_CODE),label:"Code",iconOnly:!0,preventFocusOnPress:!0})):null,dn.createElement(Qu,null,va({document:s,block:a},zo)?dn.createElement(lo,{leadingIcon:S.Link.CSS,onPress:wc({palette:n,editor:o,contentReferenceContext:r,isInLink:l}),active:l,tooltipTitle:"Link",tooltipBadge:Qs(Xe.EDITOR_LINK),label:"Link",iconOnly:!0,preventFocusOnPress:!0}):null,va({document:s,block:a},Pm)&&Dm.isSelectionAnnotable(t)?dn.createElement(lo,{leadingIcon:S.Annotation.CSS,onPress:Ng({editor:o}),active:l,tooltipTitle:"Annotate",tooltipBadge:Qs(Xe.EDITOR_ANNOTATION),label:"Annotate",iconOnly:!0,preventFocusOnPress:!0}):null),d?dn.createElement(Qu,null,dn.createElement(lo,{tooltipTitle:"Color",leadingIcon:S.Highlight.CSS,onPress:m,label:"Color",iconOnly:!0,preventFocusOnPress:!0})):null,dn.createElement(Qu,{disabled:i.isEmpty()},dn.createElement(lo,{leadingIcon:S.PublishStatusUnpublished.CSS,onPress:p,tooltipTitle:"Clear formatting",label:"Clear formatting",iconOnly:!0,preventFocusOnPress:!0})))}function hP(e){let{value:t,selection:o}=e,n=Ua(),{contentReferenceContext:r}=Zt.useContext(ae),[i,a]=Zt.useState(null),[s,l]=Zt.useState(!1),u=Zt.useRef(null),d=gt(i),m=Zt.useRef(null),p=Zt.useRef(null),f=de(u,{onClose:()=>{n.change(L=>{DR(L),L.focus()})}}),{width:h,height:y}=bw(),w=F.useInteractiveState(),k=!t.isInVoid,x=t.hasInline(zo),P=!Lm(t.startBlock),I=!!k,_=I&&i,M=s&&o.isFocused&&o.isExpanded;fr(k?{...P?{[Xe.EDITOR_BOLD]:er({type:Rn,editor:n})}:{},[Xe.EDITOR_ITALIC]:er({type:Pn,editor:n}),[Xe.EDITOR_CODE]:er({type:ao,editor:n}),[Xe.EDITOR_STRIKETHROUGH]:er({type:dr,editor:n}),[Xe.EDITOR_LINK]:wc({palette:f,editor:n,contentReferenceContext:r,isInLink:x}),[Xe.EDITOR_ANNOTATION]:Ng({editor:n})}:{},"editor-selection-expanded",[o,r,P,n,x,k,f]),fr(k?{...P?{[Xe.EDITOR_BOLD]:er({type:Rn,editor:n})}:{},[Xe.EDITOR_ITALIC]:er({type:Pn,editor:n}),[Xe.EDITOR_CODE]:er({type:ao,editor:n}),[Xe.EDITOR_STRIKETHROUGH]:er({type:dr,editor:n})}:{},"editor-selection-collapsed",[o,P,n,k]),Zt.useEffect(()=>{!I||f.opened||(m.current=o,a(fP(n)))},[o]);let T=ak(200);return Zt.useEffect(()=>{if(!I)return;let L=()=>{f.opened||(d.current&&a(null),T(()=>{a(fP(n))}))};return window.addEventListener("scroll",L,!0),()=>{window.removeEventListener("scroll",L,!0)}},[f,I,d,T]),Zt.useLayoutEffect(()=>{var L;(L=p.current)==null||L.updatePosition()},[h,y]),Zt.useLayoutEffect(()=>{let L=setTimeout(()=>{l(o.isExpanded)},200);return()=>{l(!1),clearTimeout(L)}},[o.isExpanded]),_?Zt.createElement(Gn,null,Zt.createElement(b,{ref:u,pointerEvents:"none",style:[UD.formattingMenuWrapper,i],dataSet:{"hide-on-drag":!0}},M?Zt.createElement(sn,{ref:p,kind:"menu",preferredPlacement:"top",chromeless:!0},Zt.createElement(b,{style:[v.directionRow,g.Padding.xsmall],...w.events},Zt.createElement(pP,{value:t,editor:n,palette:f}))):null)):null}function fP(e){let t=window.getSelection();if(!t||t.rangeCount<1)return null;let o=t.getRangeAt(0),n=gP.default.getBoundingClientRect(o);if(!n)return null;let r=t.anchorNode;if(!r||!Bk(e,r))return null;let i=r?yP(r):null,a=15,s={top:n.top+window.pageYOffset,left:n.left+window.scrollX,width:n.width,height:n.height};if(s.width<a&&(s.left-=(a-s.width)/2,s.width=a),i){let l=i.getBoundingClientRect();if(s.top<l.top||s.top+s.height>l.bottom)return null}return s}function yP(e){if(e instanceof HTMLElement){let t=getComputedStyle(e,null);if(t.getPropertyValue("overflow")==="auto"||t.getPropertyValue("overflow")==="scroll"||t.getPropertyValue("overflow-y")==="auto"||t.getPropertyValue("overflow-y")==="scroll")return e}return e.parentNode?yP(e.parentNode):null}var UD=X.create({formattingMenuWrapper:{position:"absolute",zIndex:100,animationDelay:"250ms"}});c();var bP=C(Br()),SP=C(O());c();var Xl=C(O());function vP(e){let{mark:t,node:o,offset:n,attributes:r,children:i,editor:a}=e,{value:s}=t.data.toObject(),l=Xl.useRef(null),u=It(),d=de(l,{onClose:()=>{d.close(),!u.isOpen()&&a.change(p=>p.focus())}}),{contentReferenceContext:m}=Xl.useContext(ae);return zp(()=>{if(!d.opened&&a.value.isFocused){let p=ye.create({anchorKey:o.key,anchorOffset:n,focusKey:o.key,focusOffset:n+1});d.open(ne({groups:[{key:"inline-controls",commands:s.map(f=>{switch(f){case Va:return{key:"image",title:"Image",icon:S.Image,trigger:()=>{a.change(h=>h.blur()),u.prompt({title:"Select image",accept:"images",acceptURL:!0}).then(h=>{a.change(y=>{h.forEach(w=>{y.insertInlineAtRange(p,xo.createImageInline(w))}),y.focus()})})}};case Xs:return{key:"emoji",title:"Emoji",icon:S.EmojiReaction,trigger:()=>yl(h=>{a.change(y=>{y.insertInlineAtRange(p,Bm.createEmoji(h)).focus()})})};case zo:return{key:"link",title:"Link",icon:S.Link,trigger:wc({palette:d,editor:a,contentReferenceContext:m,isInLink:!1,insertAtRange:p})};case Kc:return{key:"math",title:"Math & TeX",icon:S.MathTeX,trigger:()=>{a.change(h=>{h.insertInlineAtRange(p,$s.createMathInline()).focus()})}}}})}]}))}},150),Xl.createElement(ut,{ref:l,...r},i)}var wP="inlineControlsContext",jD=/(^|\s)\/$/,CP={renderMark:ZD,decorateValue:YD,onKeyDown:(e,t,o)=>{if(kP(o.value)&&(0,bP.default)("esc",e))return t}};function YD(e){let{selection:t}=e,o=kP(e),n=[];return Wt(t)&&o!==null&&n.push(ye.create({anchorKey:t.startKey,anchorOffset:t.startOffset-1,focusKey:t.startKey,focusOffset:t.startOffset,marks:[{type:wP,data:{value:o}}],isAtomic:!0})),n}function ZD(e){let{mark:t}=e;switch(t.type){case wP:return SP.createElement(vP,{...e})}}function kP(e){if(!e.isCollapsed)return null;let{startText:t,startBlock:o,selection:n}=e;if(!Wt(n)||!t||!o)return null;let{startOffset:r}=n,i=t.text.slice(0,r);if(jD.exec(i)==null)return null;let s=[Va,Xs,zo,Kc].filter(l=>va({document:e.document,block:o},l));return s.length===0?null:s}c();var Yi=C(O());W();c();var Ro=C(O());W();function xP(e){let{resolved:t,node:o,editor:n,children:r}=e,{contentReferenceContext:i}=Ro.useContext(ae),a=Ro.useRef(null),s=Ro.useRef(null),[l,u]=Ro.useState(!1),[d,m]=Ro.useState(!1),[,p]=R(OP),f=l||d,h=F.useInteractiveState({hoverDelay:500,onHoverIn:()=>{u(!0)},onHoverOut:()=>{u(!1)}}),y=F.useInteractiveState({onHoverIn:()=>{m(!0)},onHoverOut:()=>{m(!1)}});Ha({opened:f,closeOnClick:!1,closeOnScroll:!0,onClose:()=>{u(!1),m(!1)}},s);let w=de(a),k=()=>{n.change(P=>{P.unwrapInlineByKey(o.key)})},x=()=>{w.open(ln(P=>{n.change(I=>{I.setDataByKey(o.key,["ref"],P)})},{...i,document:n.value.document}))};return Ro.createElement(zi,{ref:s,anchorRef:a,wrapper:Ar,opened:f,updateOnScroll:!1,anchor:({ref:P})=>r(P,{...h.events,style:w.opened?p.linkBeingEdited:null})},Ro.createElement(b,{style:[X.absoluteFill],...y.events},Ro.createElement(hk,{kind:"tooltip",preferredAlignment:"start"},Ro.createElement(b,null,Ro.createElement(QD,{resolved:t,onPressEdit:x,onPressRemove:k})))))}function QD(e){let{resolved:t,onPressEdit:o,onPressRemove:n}=e,r=t.icon||t.secondaryIcon,[,i]=R(OP);return Ro.createElement(b,{style:[v.directionRow,v.alignCenter,g.Padding.xsmall]},Ro.createElement(b,{style:[i.buttonWrapper,v.directionRow]},Ro.createElement(B,{title:"Edit link",icon:r,size:"small",kind:"default_inverted",onPress:o,style:v.flex1},t.title)),Ro.createElement(b,null,Ro.createElement(B,{title:"Remove link",kind:"default_inverted",icon:S.Trashcan,size:"small",onPress:n})))}var OP=z.create({buttonWrapper:{maxWidth:200},linkBeingEdited:e=>({backgroundColor:e.colors.background.standout})});var JD=F.createInteractiveComponent(ut);function IP(e){return Yi.createElement(Yi.Suspense,{fallback:Yi.createElement(RP,{...e,resolved:null})},Yi.createElement(e8,{...e}))}function e8(e){let{node:t}=e,{ref:o}=t.data.toFrozenObject(),n=ho(o);return Yi.createElement(RP,{...e,resolved:n})}var _P=F.createInteractiveHandle("link");function RP(e){let{node:t,attributes:o,children:n,resolved:r,editor:i}=e,{readOnly:a}=i,[,s]=R(D),l=(u,d={})=>Yi.createElement(F.TouchableOpacity,{ref:u,handle:_P,...r?ps(r):{},...d,style:[t8.wrapper,d.style]},Yi.createElement(JD.Child,{...o,descendantOf:_P,hoverStyle:[s.primaryStandout,s.Underline],inactiveStyle:s.primary},n));return a||!r?l():Yi.createElement(xP,{resolved:r,editor:i,node:t},l)}var t8=X.create({wrapper:{display:"inline"}});c();var PP=C(O());function TP(e){let t=gt(e.contentReferenceContext),{logAnalyticsEvent:o}=e;return PP.useMemo(()=>({onPaste:(n,r,i)=>{let a=rl(n);if(!((a.type==="text"||a.type==="html")&&typeof a.text=="string"&&(Er(a.text)||Ww(a.text))))return;let s=a.text,{value:l}=r;l.isCollapsed&&r.insertText(s).extend(-s.length);let u={kind:"url",url:s};r.wrapInline({type:zo,data:{ref:u}});let d=r.value.inlines.filter(p=>p.type===zo&&p.data.has("ref")&&xm(p.data.get("ref"),u)===!1);r.collapseToEnd();let m=Xm(s);return m&&Iu(()=>Km(m,t.current)).then(p=>{p&&i.change(f=>{d.forEach(h=>{let y=f.value.document.getByKey(h.key);y&&f.setDataByKey(y.key,["ref"],p)})})}),o(Rd(n,"link")),r}}),[t])}c();var Ag=C(O());c();var EP=C(O());var Dg=EP.createContext(At);function MP(e){let{node:t,children:o,attributes:n}=e;return Ag.createElement(ge,{...e},Ag.createElement(fe,{tag:t.type===At?"ol":"ul",...n},Ag.createElement(Dg.Provider,{value:t.type},o)))}c();var $r=C(O());W();function LP(e){let{node:t,parent:o,children:n,editor:r}=e,{readOnly:i}=r,[,a]=R(D),s=$r.useContext(Dg),l=t.data.toFrozenObject(),u=s===ro,d=s===At,m=s===io,p=$r.useMemo(()=>ot(r,t.key,[{key:"list",commands:[{key:"ul",type:1,title:"Unordered List",icon:S.ListUnordered,selected:o.type===ro,trigger:()=>{r.change(w=>{w.setNodeByKey(o.key,{type:ro})})}},{key:"ol",type:1,title:"Ordered List",icon:S.ListOrdered,selected:o.type===At,trigger:()=>{r.change(w=>{w.setNodeByKey(o.key,{type:At})})}},{key:"tasks",type:1,title:"Tasks List",icon:S.ListTasks,selected:o.type===io,trigger:()=>{r.change(w=>{w.setNodeByKey(o.key,{type:io})})}}]}]),[r,t.key,o.type]),f=w=>{r.change(k=>{it.checkTaskItem(k,t.key,w)})},h=Mn(t.nodes.first()),y=w=>w<10?g.medium:w<100?g.large:"auto";return $r.createElement(ge,{tag:"li",palette:p,contentProps:{style:Ed.blockListItem},...e},m&&$r.createElement(fe,{editable:!1,style:[Ed.blockListItemPrefix,{height:h}]},$r.createElement(ja,{value:!!l.checked,onValueChange:f,readOnly:i,size:E.ICON_M})),u&&$r.createElement(fe,{editable:!1,style:[Ed.blockListItemPrefix,{height:h}]},$r.createElement(S.Dot,{size:12,style:a.text})),d&&$r.createElement(ut,{editable:!1,style:[Ed.blockListItemPrefix,{height:h,width:y(o.getChildIndex(t.key)+1)},a.Body,a.text]},o8(o,t)),$r.createElement(b,{style:Ed.blockListItemContent},n))}function o8(e,t){let o=e.data.toFrozenObject(),n=e.getChildIndex(t.key);return`${(o.start||1)+n}.`}var Ed=X.create({blockListItem:{position:"relative",display:"flex",flexDirection:"row"},blockListItemPrefix:{display:"flex",flexDirection:"row",alignItems:"center",marginLeft:g.small,marginRight:g.small},blockListItemContent:{flex:1}});c();var Md=C(Br());var n8=(0,Md.isKeyHotkey)("tab"),r8=(0,Md.isKeyHotkey)("shift+tab"),i8=(0,Md.isKeyHotkey)("enter"),a8=(0,Md.isKeyHotkey)("backspace"),NP={onKeyDown:c8,shouldNodeComponentUpdate:s8};function s8(e,t){if(e.node.type===Bo){let{parent:o,node:n}=e,{parent:r,node:i}=t;if(o.object!=="block"||r.object!=="block")throw new Error("Parent of list-item must be a block");if(o.type===At&&o.getChildIndex(n.key)!==r.getChildIndex(i.key))return!0}return null}function c8(e,t,o){if(i8(e))return l8(e,t,o);if(n8(e)||r8(e))return d8(e,t,o);if(a8(e))return u8(e,t,o)}function l8(e,t,o){if(e.shiftKey)return;let{value:n}=t,r=it.getCurrentItem(n);if(!r)return;if(e.preventDefault(),n.isExpanded&&t.delete(),r.isEmpty)return it.getItemDepth(n)>1?it.decreaseItemsDepth(t):it.unwrapList(t);it.splitListItem(t);let i=it.getListForItem(t.value,r);if(i&&i.type===io){let a=t.value.document.getNextSibling(r.key);return a?it.checkTaskItem(t,a.key,!1):t}return t}function u8(e,t,o){let{value:n}=t,{startOffset:r,selection:i}=n;if(!ye.isTextRange(i)||i.isExpanded||r>0)return;let a=it.getCurrentItem(n);if(a&&i.isAtStartOf(a))return e.preventDefault(),it.unwrapList(t)}function d8(e,t,o){return e.shiftKey?(e.preventDefault(),it.decreaseItemsDepth(t)):(e.preventDefault(),it.increaseItemsDepth(t))}c();c();var AP=C(Br());function m8(e){let{transform:t}=e,o=e.onHotkey?(0,AP.isKeyHotkey)(e.onHotkey):()=>!1,n=e.onInput?p8(e.onInput):()=>!1,r=e.ignoreIn?DP(e.ignoreIn):null,i=e.onlyIn?DP(e.onlyIn):null;function a(m,p,f){if(!o(m))return;let h=u(p.value);if(h)return l(h,m,p,f),!0}function s(m,p,f){if(m.inputType!=="insertText"||!n(m))return;let h=u(p.value);if(h)return l(h,m,p,f),!0}function l(m,p,f,h){let{value:y}=f,{startOffset:w}=y,k=0;return d(m,w).forEach(P=>{f.moveOffsetsTo(P.start,P.end).delete(),k+=P.total}),w-=k,f.moveOffsetsTo(w,w),f.call(t,p,m,h),p.preventDefault(),!0}function u(m){if(m.isExpanded)return null;let{startBlock:p}=m;if(!p)return null;let{type:f}=p;if(i&&!i(f)||r&&r(f))return null;let{startText:h,startOffset:y}=m;ii(h);let{text:w}=h,k=null,x=null;return e.after&&(k=w.slice(y).match(e.after)),e.before&&(x=w.slice(0,y).match(e.before)),e.before&&e.after&&!x&&(k=null),e.before&&e.after&&!k&&(x=null),!x&&!k?null:(k&&(k[0]=k[0].replace(/\s+$/,"")),x&&(x[0]=x[0].replace(/^\s+/,"")),{before:x,after:k})}function d(m,p){let{before:f,after:h}=m,y=[],w=0;if(f){let k=f[0],x=0,P=0;f.slice(1,f.length).forEach(I=>{I!==void 0&&(P=k.indexOf(I,P),x=p-w+P-k.length,y.push({start:x,end:x+I.length,total:I.length}),w+=I.length,P+=I.length)})}if(h){let k=h[0],x=0,P=0;h.slice(1,h.length).forEach(I=>{I!==void 0&&(P=k.indexOf(I,P),x=p-w+P,y.push({start:x,end:x+I.length,total:0}),w+=I.length,P+=I.length)})}return y}return{onKeyDown:a,onBeforeInput:s}}function p8(e){if(typeof e=="string")return t=>!!(t.data&&t.data===e);if(typeof e=="function")return e;if(e instanceof RegExp)return t=>!!(t.data&&t.data.match(e));throw new Error("Invalid onInput option")}function DP(e){if(Array.isArray(e))return t=>e.includes(t);if(typeof e=="string")return t=>t===e;if(typeof e=="function")return e;throw new Error("Invalid matcher type")}var br=m8;var f8=br({onlyIn:[pe],onInput:"*",before:/\*\*[^*]+?\*$/,transform:(e,t,o)=>{if(Kl(e.value,[Rn,ao])||Bg(e.value))return e.insertText("*");let n=o.before[0].slice(2).slice(0,-1);return Ld(e.value,n,[ao,Pn])?e.insertText("*"):e.deleteBackward(n.length+3).addMark(Rn).insertText(n).removeMark(Rn)}}),g8=br({onlyIn:[pe],onInput:"_",before:/\b_[^_]+?$/,transform:(e,t,o)=>{if(Kl(e.value,[Pn,ao])||Bg(e.value))return e.insertText("_");let n=o.before[0].slice(1);return Ld(e.value,n,[Rn,ao])?e.insertText("_"):e.deleteBackward(n.length+1).addMark(Pn).insertText(n).removeMark(Pn)}}),h8=br({onlyIn:[pe],onInput:"~",before:/\~\~[^*]+?\~$/,transform:(e,t,o)=>{if(Kl(e.value,[dr,ao])||Bg(e.value))return e.insertText("~");let n=o.before[0].slice(2).slice(0,-1);return Ld(e.value,n,[dr,ao])?e.insertText("~"):e.deleteBackward(n.length+3).addMark(dr).insertText(n).removeMark(dr)}}),y8=br({onlyIn:[pe],onInput:/`/,before:/`[^`]+?$/,transform:(e,t,o)=>{if(Kl(e.value,ao))return e.insertText("`");let n=o.before[0].slice(1);return Ld(e.value,n,[Rn,Pn])?e.insertText("`"):e.deleteBackward(n.length+1).addMark(ao).insertText(n).removeMark(ao)}}),v8=br({onlyIn:[pe],onInput:"$",before:/\$\$[^*]+?\$$/,transform:(e,t,o)=>{if(Kl(e.value,ao)||Bg(e.value))return e.insertText("$");let n=o.before[0].slice(2).slice(0,-1);if(Ld(e.value,n,[Rn,ao,Pn]))return e.insertText("$");e.deleteBackward(n.length+3);let r=$s.createMathInline(n);return e.insertInline(r),e}}),b8=br({onlyIn:[pe],onHotkey:"enter",before:/^\$\$$/,transform:(e,t,o)=>{let n=$s.createMathBlock();return zP(e,n)}}),S8=br({onlyIn:[pe],onInput:" ",before:/^(-|\*)$/,transform:e=>BP(e.value)?e:it.wrapInList(e,ro)}),w8=br({onlyIn:pe,onInput:" ",before:/^(([1-9]{1}\d*)\.)$/,transform:(e,t,o)=>{if(BP(e.value))return e;let n=parseInt(o.before[1],10);return it.wrapInList(e,At,n&&n!==1?{start:n}:{})}}),C8=br({onlyIn:pe,onInput:"]",before:/^(\[[ xX])$/,transform:(e,t,o)=>{let n=it.getCurrentList(e.value);if(n)e.setNodeByKey(n.key,{type:io});else{if(!e.value.isEmpty)return e.insertText(`${o.before[0]}]`);e=it.wrapInList(e,io)}let r=it.getCurrentItem(e.value),i=o.before[0][1]!==" ";return r?it.checkTaskItem(e,r.key,i):e}}),k8=br({onlyIn:pe,onHotkey:"enter",before:/^(```\S*\s*)$/,transform:(e,t,o)=>{let[n]=o.before,r=n.replace(/^```/,"").trim(),i=hp(r),a=$t.createCodeBlock("",{syntax:i.key});return zP(e,a)}}),x8=br({onlyIn:pe,onInput:" ",before:/^(>)$/,transform:(e,t,o)=>e.wrapBlock(Ft)});function BP(e){let{startBlock:t,document:o}=e;if(!t)return!1;let n=o.getParent(t.key);return(n==null?void 0:n.type)===Bo}var O8=[Ae,Fe,Qe],_8=br({onlyIn:pe,onInput:" ",before:/^(#{1,3})$/,transform:(e,t,o)=>{let[n]=o.before,r=n.length,i=O8[r-1];return e.setBlocks({type:i})}});function Kl(e,t){let o=typeof t=="string"?[t]:t;return e.marks.some(n=>o.includes(n.type))}function Ld(e,t,o){let{startText:n,startOffset:r}=e;if(!n)return!1;let i=r-t.length,{leaf:a}=n.searchLeafAtOffset(i);return a?Kl(a,o):!1}function Bg(e){let{startText:t,startOffset:o}=e;if(!t)return!1;let n=t.text.slice(0,o);return!(!n||n.match(/^[^`]+$/))}function zP(e,t){let{startBlock:o}=e.value;if(o)return e.insertBlock(t).collapseToStartOf(t).removeNodeByKey(o.key)}var WP=[f8,g8,h8,y8,S8,w8,C8,_8,v8,b8,k8,x8];c();var ib=C(O());c();var Ur=C(O());W();var zg={[pe]:E.ICON_S,[Ae]:E.ICON_XL,[Fe]:E.ICON_L,[Qe]:E.ICON_S};function FP(e){let{node:t,attributes:o,isSelected:n,parent:r}=e,i=t.data.toFrozenObject();return Ur.createElement(Ur.Suspense,{fallback:Ur.createElement(I8,{selected:n,attributes:o,parentType:r.type})},Ur.createElement(R8,{reference:i.ref,selected:n,attributes:o,parentType:r.type}))}function I8(e){let{selected:t,attributes:o,parentType:n}=e,[,r]=R(VP),i=t?N.textColor.primaryStandout:N.text.base,a=zg[n||pe]||zg[pe];return Ur.createElement(b,{style:[r.mention,t&&r.mentionSelected],...o},Ur.createElement(Ce,{size:a,style:i}))}function R8(e){let{reference:t,selected:o,attributes:n,parentType:r}=e,[,i]=R(VP),[,a]=R(D),s=F.useInteractiveState(),l=ho(t),u=zg[r||pe]||zg[pe],d=o?a.primaryStandout:a.text;return Ur.createElement(We,{...s.events,...ps(l)},Ur.createElement(fe,{tag:"span",style:[i.mention,s.hovered&&i.mentionHovered,o&&i.mentionSelected,v.directionRow,v.alignCenter],...n},l.secondaryIcon?Ur.createElement(l.secondaryIcon,{size:u,style:[d,i.mentionIcon]}):null,Ur.createElement(A,{style:[d,a.Bold]},l.title)))}var VP=z.create({mention:e=>({borderRadius:e.radiuses.medium,paddingHorizontal:g.xsmall/2}),mentionHovered:e=>({backgroundColor:e.colors.background.muted}),mentionSelected:e=>({backgroundColor:e.colors.primary.muted}),mentionIcon:{marginRight:g.xsmall/2}});c();var bs=C(O());function qP(e){let{mark:t,node:o,offset:n,attributes:r,children:i,editor:a}=e,{value:s,symbol:l}=t.data.toObject(),u=bs.useRef(null),d=gt(s),{contentReferenceContext:m,logAnalyticsEvent:p}=bs.useContext(ae),f=de(u);return zp(()=>{if(!f.opened&&a.value.isFocused){let h=y=>{a.change(w=>{let k=ye.create({anchorKey:o.key,anchorOffset:n,focusKey:o.key,focusOffset:n+d.current.length+1});w.insertInlineAtRange(k,{type:Du,data:{ref:y},isVoid:!0}).focus()}),p({type:"edit_page_document_insert_mention",kind:y.kind})};f.open(Ya(ln(h,{...m,document:a.value.document},{withSearch:!1,accept:l==="@"?["user"]:["url","anchor","page","space","collection","file"]}),s))}},150),bs.useEffect(()=>{f.opened&&f.typeQuery(s)},[f,s]),bs.createElement(ut,{ref:u,...r},i)}var GP="mentionContext",P8=/(^|\s)(@|#)(\w*)$/,HP={renderMark:M8,renderNode:E8,decorateValue:T8};function T8(e){let{selection:t}=e,o=L8(e),n=[];return ye.isTextRange(t)&&o!==null&&n.push(ye.create({anchorKey:t.startKey,anchorOffset:t.startOffset-o.value.length-1,focusKey:t.startKey,focusOffset:t.startOffset,marks:[{type:GP,data:{value:o.value,symbol:o.symbol}}],isAtomic:!0})),n}function E8(e){let{node:t}=e;switch(t.type){case Du:return ib.createElement(FP,{...e})}}function M8(e){let{mark:t}=e;switch(t.type){case GP:return ib.createElement(qP,{...e})}}function L8(e){if(!e.isCollapsed)return null;let{document:t,startText:o,startBlock:n,selection:r}=e;if(!ye.isTextRange(r)||!o||!n||!va({document:t,block:n},Du))return null;let{startOffset:i}=r,a=o.text.slice(0,i),s=P8.exec(a);return s?{symbol:s[2],value:s[3]}:null}c();var jr=C(O());W();c();function Wg(e,t,o=[]){return ot(e,t,[{key:"types",commands:()=>{let n=e.value.document.assertBlock(t),r=e.value.document.getParent(t);if(!r)return[];let i=a=>{e.change(s=>{s.setNodeByKey(n.key,{type:a}).focus()})};return[{key:pe,title:"Paragraph",type:1,selected:n.type===pe,icon:S.Paragraph,trigger:()=>{i(pe)}},Re(r,Ae)?{key:Ae,title:"Heading 1",type:1,selected:n.type===Ae,icon:S.Heading1,trigger:()=>{i(Ae)}}:null,Re(r,Fe)?{key:Fe,title:"Heading 2",type:1,selected:n.type===Fe,icon:S.Heading2,trigger:()=>{i(Fe)}}:null,Re(r,Qe)?{key:Qe,title:"Heading 3",type:1,selected:n.type===Qe,icon:S.Heading3,trigger:()=>{i(Qe)}}:null].filter(me)}},...o])}function XP(e){let{editor:t,node:o,parent:n,children:r,attributes:i}=e,[,a]=R(D),[,s]=R(A8),l=jr.useContext(ds),u=jr.useContext(Un),d=D8(n),m=[a.Body,a.text,s[l],s[u]],p=jr.createElement(A,{selectable:!0,style:m},r),f=jr.useMemo(()=>Wg(t,o.key),[t,o.key]),h=Au(o);return N8(n)?!t.readOnly&&h?jr.createElement(IR,{...e,placeholder:d},p):jr.createElement(ge,{...e,palette:f},p):jr.createElement(fe,{...i},!t.readOnly&&d&&h&&Nm(n)?jr.createElement(fe,{editable:!1,pointerEvents:"none",style:[X.absoluteFill]},jr.createElement(A,{selectable:!0,style:[m,a.textMuted]},d)):null,p)}function N8(e){return e.type===Cy||e.type===wy||e.type===Hs?!0:!(e.object==="fragment"||e.type===Bo)}function D8(e){return e.type===cC?"Parameter description (optional)":e.type===Cy?"Response description (optional)":e.type===wy?"Operation description (optional)":e.type===ga?"Title":e.type===Hs?"Expandable content":e.type===Ni?"Annotate this text":e.type===ur?"Tab content":""}var A8=z.create({left:{textAlign:"left"},center:{textAlign:"center"},right:{textAlign:"right"},root:{},quote:e=>({color:e.colors.text.mid}),swaggerParameter:e=>({color:e.colors.text.mid,...He.Label}),swaggerResponse:e=>({color:e.colors.text.mid}),caption:e=>({...He.Caption,color:e.colors.text.muted}),expandableTitle:e=>({...He.Heading3,color:e.colors.text.main})});c();var Nd=C(Br());var KP={onKeyDown:B8};function B8(e,t){if((0,Nd.default)("enter",e)||(0,Nd.default)("shift+enter",e))return z8(e,t);if((0,Nd.default)("backspace",e))return $P(e,t)}function z8(e,t){let{value:o}=t;if(o.isExpanded)return;let{startBlock:n,startOffset:r,endOffset:i}=o;if(n&&!n.isVoid)if(n.type===pe){if((0,Nd.default)("shift+enter",e))return t.insertText(`
`)}else{let a=n.text.length;if(r===0&&a===0)return $P(e,t);if(i===a)return e.preventDefault(),t.splitBlock().setBlocks({type:pe,data:{}})}}function $P(e,t){let{value:o}=t;if(o.isExpanded||o.startOffset>0)return;let{startBlock:n,startText:r}=o;if(!(!n||!(n.getFirstText()===r))){if(n.type===pe){let a=o.document.getParent(n.key);return a&&xe.isSwaggerFragment(a)&&a.getChildIndex(n.key)===0?t:void 0}if(!(n.type===Vn||n.type===Mi))return e.preventDefault(),n.isVoid?t.removeNodeByKey(n.key):t.setNodeByKey(n.key,{type:pe,isVoid:!1})}}c();var Fg=C(O());W();c();var Ss=JSON.parse('{"quote":"quote_5I59h","hint":"hint_rnF2j","iconWrapper":"iconWrapper_NJPs7","icon":"icon_abDxV","info":"info_-xeCE","warning":"warning_5BM-F","danger":"danger_UUfHb","success":"success_3o6RV"}');function UP(e){let{children:t}=e;return Fg.default.createElement(ge,{tag:"blockquote",...e,contentProps:{style:W8.blockQuote}},Fg.default.createElement(Z,{style:[N.flex.column,Ss.quote]},Fg.default.createElement(Un.Provider,{value:"quote"},t)))}var W8=X.create({blockQuote:{position:"relative",width:"100%"}});c();var Zi=C(O());W();c();var Dd={info:{title:"Info",cssIcon:S.InfoCircle.CSS,icon:S.InfoCircle},warning:{title:"Warning",cssIcon:S.Warning.CSS,icon:S.Warning},success:{title:"Success",cssIcon:S.CheckCircle.CSS,icon:S.CheckCircle},danger:{title:"Danger",cssIcon:S.Alert.CSS,icon:S.Alert}};c();function jP(e,t){let o=["info","warning","danger","success"];return ot(e,t,[{key:"levels",commands:()=>{let n=e.value.document.assertBlock(t),r=n.data.get("style");return o.map(i=>({key:i,type:1,selected:r===i,title:Dd[i].title,icon:Dd[i].icon,trigger:()=>{e.change(a=>{a.setNodeByKey(n.key,{data:{style:i}})})}}))}}])}function YP(e){let{node:t,children:o,editor:n}=e,{readOnly:r}=n,i=t.data.toFrozenObject(),a=Dd[i.style],s=()=>{let h=["info","warning","danger","success"],y=i.style===h[h.length-1]?h[0]:h[h.indexOf(i.style)+1];n.change(w=>w.setNodeByKey(t.key,{data:{style:y}}))},l=Zi.useMemo(()=>jP(n,t.key),[n,t.key]),u=t.nodes.first(),d=qr(u,t),m=E.ICON_L,p=d.paddingTop+(Mn(u)-m)/2,f=a.cssIcon;return Zi.createElement(ge,{...e,palette:l,contentProps:{style:[F8.blockHint]}},Zi.createElement(Z,{style:[Ss.hint,N.flex.row,Ss[i.style]]},Zi.createElement(Z,{style:[Ss.iconWrapper,N.flex.row,N.flex.justifyContentCenter],inlineStyle:{paddingTop:p,"--icon-size":`${m}px`}},r?Zi.createElement(f,{style:Ss.icon}):Zi.createElement(We,{onPress:s},Zi.createElement(f,{style:Ss.icon}))),Zi.createElement(Z,{style:[N.flex.column,N.flex.flex1]},o)))}var F8=X.create({blockHint:{position:"relative",width:"100%"}});c();var Vg=C(Br());var QP={onKeyDown:H8},V8=(0,Vg.isKeyHotkey)("backspace"),q8=(0,Vg.isKeyHotkey)("enter"),G8=(0,Vg.isKeyHotkey)("mod+enter");function H8(e,t,o){let{value:n}=t;if(!xn(n.selection)){if(V8(e)&&n.isCollapsed)return X8(e,t);if(q8(e))return K8(e,t);if(G8(e))return $8(e,t);if(e.key===">")return U8(e,t)}}function X8(e,t){let{value:o}=t,{startOffset:n,selection:r}=o;if(!ye.isTextRange(r)||n>0)return;let i=ab(o);if(!i)return;let a=r.anchorKey?i.getClosestBlock(r.anchorKey):null;if(!(!a||!r.isAtStartOf(a))&&i.nodes.size===1)return e.preventDefault(),t.unwrapBlock(i.type)}function K8(e,t){let{value:o}=t,{startBlock:n,selection:r}=o;if(!ye.isTextRange(r))return;let i=ab(o);if(i&&!(n&&n.text.length!==0))return e.preventDefault(),t.unwrapBlock(i.type)}function $8(e,t){let{value:o}=t,n=ab(o);if(n)return e.preventDefault(),ft(t,n),t}function U8(e,t){let{value:o}=t,{selection:n}=o;if(ye.isTextRange(n)&&!(n.startOffset!==0||n.isCollapsed))return e.preventDefault(),t.wrapBlock(Ft),t}function ab(e,t=null){let{document:o,selection:n}=e;if(!ye.isTextRange(n)||(t!=null||(t=e.startBlock),!t))return null;let r=o.getAncestors(t.key);if(!r)return null;let i=r.reverse().find(ZP);return i&&ZP(i)?i:null}function ZP(e){return"type"in e&&(e.type===Ft||e.type===Ao)}c();function JP(e,t,o){if(!e.selection)return[];let{anchorOffset:n,focusOffset:r,isAtomic:i,isBackward:a,isFocused:s}=e.selection;return[ye.create({anchorKey:t,anchorOffset:n,focusKey:o,focusOffset:r,isAtomic:i,isBackward:a,isFocused:s,data:{userId:e.userId,userName:e.name,userColor:e.color}})]}c();var sb=C(O());c();var Ln=C(O());W();var $l=2,j8=250;function eT(e){let{selection:t}=e,o=t.data.get("userName"),n=t.data.get("userColor"),[r,i]=Ln.useState(!1),a=Ys(()=>new Kt.Value(r?1:0)),s={"data-cursor":!0},l={backgroundColor:n};return Ln.useEffect(()=>{Kt.timing(a.current,{toValue:r?1:0,delay:mi.TRANSITION_DURATION_SHORT,useNativeDriver:!1}).start()},[r]),Ln.createElement(fe,{tag:"span",...s,style:[Ad.cursor]},Ln.createElement(Xa,{wrapper:Ar,onOpen:()=>i(!0),onClose:()=>i(!1),anchor:({ref:u,open:d,close:m})=>Ln.createElement(F.WithInteractiveState,{onHoverIn:d,onHoverOut:m},({events:p})=>Ln.createElement(b,{ref:u,...p,style:[Ad.carret,l]},Ln.createElement(b,{style:[Ad.carretTop,l]})))},Ln.createElement(Kt.View,{style:[Ad.bubble,{opacity:a.current.interpolate({inputRange:[0,1],outputRange:[0,1]})}]},Ln.createElement(b,{style:[Ad.bubbleContent,l,g.Padding.smallHorizontal]},Ln.createElement(Nr,{theme:{color:Gi(n)}},Ln.createElement(Y8,{userName:o}))))))}function Y8({userName:e}){let[,t]=R(D);return Ln.createElement(A,{numberOfLines:1,style:[t.Body,t.text]},e)}var Ad=X.create({cursor:{position:"absolute"},carret:{userSelect:"none",width:$l,top:3,height:"1.2em"},carretTop:{position:"absolute",top:-$l*3,left:-$l,borderRadius:100,width:$l*3,height:$l*3},bubble:{position:"absolute",left:-$l,top:"-1.2em",width:j8},bubbleContent:{position:"absolute",borderRadius:E.RADIUS_M}});c();var tT=C(Im()),oT=C(O());function nT(e){let{children:t,selection:o}=e,n=o.data.get("userColor");return oT.createElement(ut,{...{"data-cursor":!0},style:[{backgroundColor:Z8(n,.2)}]},t)}function Z8(e,t){let o=Math.round((0,tT.default)(t||1,0,1)*255);return e+o.toString(16).toUpperCase()}c();var rT="focus",iT="range";var aT={renderSelection:Q8};function Q8(e){let{type:t}=e;switch(t){case rT:return sb.createElement(eT,{...e});case iT:return sb.createElement(nT,{...e})}}c();var Ge=C(O());c();var Sr=C(O());function sT(e){let{editor:t,node:o}=e,{contentReferenceContext:n}=Sr.useContext(ae),r=gt(n),i=Sr.useMemo(()=>ot(t,o.key,[{key:"edit",commands:[{key:"edit_ref",title:"Edit link target",icon:S.PageLink,trigger:()=>ln(a=>{t.change(s=>{s.setDataByKey(o.key,["ref"],a)})},r.current,{accept:["page","space","collection"]})}]}]),[t,o.key,r]);return Sr.createElement(ge,{...e,palette:i},Sr.createElement(Pt,{...e},Sr.createElement(Sr.Suspense,{fallback:Sr.createElement(Xi,{icon:Ce,title:""})},Sr.createElement(J8,{contentRef:o.data.get("ref")}))))}function J8(e){let{contentRef:t}=e,o=ho(t);return Sr.createElement(Xi,{title:o.title,icon:o.icon||o.secondaryIcon,...ps(o)})}c();var ws=C(O());W();function cT(e){let{ancestors:t,node:o,children:n,attributes:r}=e,i=o.data.toFrozenObject(),{blockLayoutComponent:a}=ws.useContext(ae),s=Ye(),l=Ll({ancestors:t,node:o.blockNodes.first(),diff:!0});return ws.createElement(a,{renderMode:l.renderMode},ws.createElement(Pa.View,{isPDF:s},ws.createElement(Z,{style:[pc.block,l.blockStyle.style],inlineStyle:l.blockStyle.inlineStyle},ws.createElement(b,{...r},l.diffLine?ws.createElement(Wf,{diff:i,...l.diffLine}):null,n))))}c();var lT=C(O());W();function uT(e){let{mark:t,attributes:o,children:n}=e;return lT.createElement(ut,{style:e3[t.type],...o},n)}var e3=X.create({[Tm]:{color:lc.added},[Em]:{color:lc.deleted,textDecorationLine:"line-through"},[Mm]:{color:lc.modified}});c();var qg=C(O());c();var dT=JSON.parse('{"divider":"divider_osV0o"}');function mT(e){let{attributes:t}=e;return qg.createElement(ge,{...e},qg.createElement(Pt,{...e},qg.createElement(Z,{as:"hr",style:dT.divider,...t})))}c();var qe=C(O());c();var Yo=C(O());W();c();var Po=C(O());function pT(e){let{onClose:t}=e,[o,n]=an(),r=Po.useRef(null),[i,a]=Po.useState(!1),s=gt(i),l=gt(t),u=gt(o),d=Po.useCallback(()=>{u.current||n(()=>l.current())},[l,u]);return Po.useEffect(()=>Lp("editor-block-modal"),[]),fr({[Xe.EDITOR_SAVE]:m=>{d()}},"editor-block-modal",[]),Po.useEffect(()=>{let m=null,p=f=>{f.key==="Escape"&&(s.current?(m&&clearTimeout(m),d()):(a(!0),m=setTimeout(()=>{a(!1)},2e3)))};return document.addEventListener("keydown",p),()=>{document.removeEventListener("keydown",p),m&&clearTimeout(m)}},[s,d]),Po.useEffect(()=>{var m,p;i?(m=r.current)==null||m.open():(p=r.current)==null||p.close()},[i,r]),Po.createElement(B,{tooltipRef:r,icon:S.X,disabled:o,onPress:d,title:i?Po.createElement(Po.Fragment,null,"Press ",Po.createElement(Fi,{shortcut:"ESC"})," again to save & close"):Po.createElement(Po.Fragment,null,"Save & Close ",Po.createElement(Fi,{shortcut:Xe.EDITOR_SAVE})),tooltipPreferredPlacement:"left"})}c();c();c();var fT=fp("05ab87fa95f4c5a09220a4e1067733011498ba1a47c8b145f5ec78dcb9ffe75d",()=>import("https://app.gitbook.com/public/app/chunks/excalidraw.lazy-Q2KSG665.min.js"));var Cc=fT;async function gT(e){let{default:{exportToSvg:t}}=await Cc.load(),o=await t({appState:{exportEmbedScene:!0},elements:e.elements,files:e.files});return new XMLSerializer().serializeToString(o)}c();var cb=Lr({getValue:async e=>{if(!e)return{elements:[],files:{}};let{default:{loadFromBlob:t}}=await Cc.load(),n=await(await fetch(e)).blob(),r=await t(n,null,null);return{elements:r.elements,files:r.files}}}),hT=Lr({getValue:async({downloadURL:e,theme:t})=>{let{default:{exportToSvg:o}}=await Cc.load(),n=await cb.readAsync(e),r=await o({appState:{viewBackgroundColor:"transparent",exportWithDarkMode:t==="dark"},elements:n.elements,files:n.files});return r.style.maxWidth="100%",r.removeAttribute("width"),r.removeAttribute("height"),r}});function yT(e){let{blockData:t,onClose:o}=e,[,n]=R(n3),r=Yo.useRef(),i=Ka(mi.fade),a=Ka(mi.pop,{onEnd:()=>{var s;(s=r.current)==null||s.refresh()}});return Yo.createElement(Gn,null,Yo.createElement(b,{ref:i,style:[z.absoluteFill,n.modalBackdrop]},Yo.createElement(b,{ref:a,style:n.modalBody},Yo.createElement(Yo.Suspense,{fallback:Yo.createElement(Oo,{size:"large"})},Yo.createElement(t3,{blockData:t,onClose:o,excalidrawRef:r})))))}function t3(e){var f,h;let{excalidrawRef:t,blockData:o,onClose:n}=e,r=rp(),i=uo(),{Excalidraw:a,useExcalidrawStyle:s}=Cc.loadSuspense().default;s();let u=(h=(f=ho(o.ref).resolution)==null?void 0:f.extra)==null?void 0:h.file,{result:d,error:m}=cb.readSafe((u==null?void 0:u.downloadURL)||null),p=async()=>{let y=t.current;if(!y){n(void 0);return}let w=y.getSceneElements(),k=y.getFiles();if(d&&d.elements&&!o3(d.elements,w)){n(void 0);return}let x=await gT({elements:w,files:k});n(new File([new Blob([x])],(u==null?void 0:u.name)||"file.excalidraw.svg",{type:"image/svg+xml"}))};return Yo.useEffect(()=>{m&&i.notify({kind:"danger",icon:S.Warning,title:"Error loading drawing",details:m.expose?m.message:"An unexpected error occurred while loading the drawing"})},[m]),Yo.createElement(b,{style:[z.absoluteFill]},Yo.createElement(a,{ref:t,initialData:{...d,scrollToContent:!0},theme:r.color,UIOptions:{canvasActions:{export:!1,loadScene:!1,saveToActiveFile:!1,toggleTheme:!1,saveAsImage:!1,changeViewBackgroundColor:!1,clearCanvas:!1}},renderTopRightUI:(y,w)=>Yo.createElement(b,null,Yo.createElement(pT,{onClose:p}))}))}function o3(e,t){return e.length!==t.length?!0:e.some((o,n)=>{let r=t[n];return o.version!==r.version})}var n3=z.create({modalBackdrop:e=>({backgroundColor:e.colors.backdrop.background}),modalBody:e=>({position:"absolute",top:g.large,bottom:g.large,right:g.xlarge,left:g.xlarge,borderRadius:E.RADIUS_L,backgroundColor:e.colors.background.main,overflow:"hidden"})});c();var Qt=C(O());W();var bT=Qt.forwardRef(function(t,o){let{readOnly:n,contentRef:r}=t,i=Qt.useRef(null),a=rp(),s=Ol(),[,l]=R(ST),[u,d]=Qt.useState(null),p=ho(r).href,f=u;return r&&!p&&(f=new Gc.NotFound("Drawing file not found, the file may have been deleted")),Qt.useImperativeHandle(o,()=>({openInGallery:()=>{s.open([{url:p}])}})),Qt.useEffect(()=>{let h=!0;return hT.readAsync({downloadURL:p,theme:a.color}).then(y=>{let w=i.current;w&&y&&h&&(w.innerHTML="",w.appendChild(y.cloneNode(!0)))},y=>{h&&d(y)}),()=>{h=!1}},[p,a.color]),f?Qt.createElement(vT,{kind:"danger",icon:S.Warning,message:f.expose?f.message:"An error occurred while rendering this drawing file."}):Qt.createElement(b,{style:l.wrapper},p?Qt.createElement("div",{ref:i},Qt.createElement("img",{src:p,style:{width:"100%"}})):Qt.createElement(vT,{icon:S.EditDrawing,message:n?"Drawing file not found":"Double click to start sketching out your thoughts."}))});function vT(e){let{icon:t,message:o,kind:n="default"}=e,[,r]=R(ST),[,i]=R(D);return Qt.createElement(b,{style:[r.fallback,g.Padding.large,v.alignCenter,v.justifyContentCenter]},Qt.createElement(b,null,Qt.createElement(t,{size:E.ICON_XL,style:n==="danger"?i.danger:i.textMuted})),Qt.createElement(b,{style:g.Margin.mediumTop},Qt.createElement(A,{style:[n==="danger"?i.danger:i.textMuted,i.Body]},o)))}var ST=z.create({wrapper:{},fallback:e=>({height:200,borderWidth:1,backgroundColor:e.colors.background.main,borderColor:e.colors.border.mid,borderRadius:E.RADIUS_M,borderStyle:"dashed"})});var wT=F.createInteractiveHandle("drawing-block");function CT(e){let{node:t,editor:o,isSelected:n}=e,{readOnly:r}=o,i=It(),{uploadFiles:a,updateFile:s}=qe.useContext(ae),[l,u]=qe.useState(null),[d,m]=an(),p=qe.useRef(),f=qe.useRef(null),h=t.data.toFrozenObject(),y=()=>{var T;(T=w.current)==null||T.close(),u("edit")},w=qe.useRef(null),k=qe.useRef(null);qe.useEffect(()=>()=>{k.current&&clearTimeout(k.current)},[]);let x=Wp(y),P=T=>{var L,q,G;r?(L=f.current)==null||L.openInGallery():(k.current&&clearTimeout(k.current),x(T)?(q=w.current)==null||q.close():((G=w.current)==null||G.open(),k.current=setTimeout(()=>{var U;(U=w.current)==null||U.close()},1e3)))},I=T=>{p.current=T?URL.createObjectURL(T):void 0,T&&m(async()=>{let L=h.ref;h.ref&&L?await s(L,T):L=(await a([T]))[0],xm(L,h.ref)&&o.change(q=>{q.setDataByKey(t.key,["ref"],L)})}),u(null)},_=async()=>{let[T]=await i.prompt({title:"Replace drawing file",acceptURL:!1,accept:"drawings"});(T==null?void 0:T.kind)==="file"&&o.change(L=>{L.insertDataByKey(t.key,["ref"],T)})},M=ot(o,t.key,[{key:"types",commands:[{key:"edit",title:"Edit drawing",icon:S.EditDrawing,trigger:()=>{y()}},{key:"files",title:"Replace file\u2026",icon:S.Replace,trigger:()=>{_()}}]}]);return qe.createElement(qe.Fragment,null,qe.createElement(ge,{...e,palette:M},qe.createElement(Pt,{...e},qe.createElement(F.TouchableOpacity,{onPress:P},qe.createElement(F.View,{handle:wT},qe.createElement(qe.Suspense,{fallback:qe.createElement(Qn,null)},qe.createElement(bT,{ref:f,readOnly:r,contentRef:p.current&&d?{kind:"url",url:p.current}:h.ref})),r?null:qe.createElement(Nr,{theme:{color:"dark"}},qe.createElement(Xn,{ref:w,preferredPlacement:"left",tooltip:"Double click to edit!"},(T,L)=>qe.createElement(r3,{ref:L,saving:d,isSelected:n,palette:M})))))),qe.createElement(ys,{...e})),qe.createElement(ht,null,l==="edit"?qe.createElement(yT,{blockData:h,onClose:I}):null))}var r3=qe.forwardRef(function(t,o){let{isSelected:n,saving:r,palette:i}=t,[,a]=R(i3);return qe.createElement(F.View.Child,{ref:o,descendantOf:wT,style:[a.blockToolbar,v.directionRow],inactiveStyle:n||r?$e.visible:$e.hidden,activeStyle:$e.visible},r?qe.createElement(B,{size:"small",icon:Ce},"Saving"):i.groups.map(s=>Array.isArray(s.commands)?s.commands:[]).flat().map((s,l,u)=>qe.createElement(B,{key:s.key,title:s.title,size:"small",icon:s.icon,style:[l<u.length-1?g.Margin.smallRight:null],onPress:()=>{var d;(d=s.trigger)==null||d.call(s,i)}})))}),i3=z.create({blockToolbar:e=>({position:"absolute",top:g.small,right:g.small,padding:g.small,borderRadius:E.RADIUS_M,backgroundColor:e.colors.background.mid,...e.shadows.base})});c();var Qi=C(O());function kT(e){let{node:t,editor:o}=e,n=It(),r=async()=>{let[a]=await n.prompt({title:"Replace file"});(a==null?void 0:a.kind)==="file"&&o.change(s=>{s.insertDataByKey(t.key,["ref"],a)})},i=ot(o,t.key,[{key:"types",commands:()=>[{key:"files",title:"Replace file\u2026",icon:S.Paperclip,trigger:()=>{r()}}]}]);return Qi.createElement(ge,{...e,palette:i},Qi.createElement(Pt,{...e},Qi.createElement(Qi.Suspense,{fallback:Qi.createElement(Xi,{icon:Ce,title:""})},Qi.createElement(a3,{...e,onReplace:r}))),Qi.createElement(ys,{...e}))}function a3(e){var u,d;let{node:t,editor:o,onReplace:n}=e,{ref:r}=t.data.toFrozenObject(),a=(d=(u=ho(r).resolution)==null?void 0:u.extra)==null?void 0:d.file,s=()=>{a?Ca(Ga(a.downloadURL)):o.readOnly||n()},l=Ut(Al,{file:a},[a]);return Qi.createElement(Xi,{onPress:s,icon:l,title:a?a.name:"File has been deleted",subtitle:a?od(a.size):void 0,details:a?CO(a):void 0})}c();var mn=C(O());c();var Cs=C(O());W();function xT(e){let{node:t,editor:o,onClose:n}=e,r=Wm(t.text),[i,a]=Cs.useState(()=>t.data.get("id")||""),s=u=>{let d=Wm(u);d.length===u.length?a(d):a(u)},l=()=>{o.change(u=>{i?u.setDataByKey(t.key,["id"],Wm(i)):u.removeDataByKey(t.key,["id"])}),n()};return Cs.createElement(Vt,{size:"small",title:"Edit heading anchor",footer:Cs.createElement(b,{style:[v.directionRow,v.justifyContentEnd]},Cs.createElement(B,{kind:"secondary",onPress:n,style:g.Margin.smallRight},"Close"),Cs.createElement(B,{kind:"primary",onPress:l},"Save")),onClose:n},Cs.createElement(jt,{autoFocus:!0,size:"large",icon:S.Hash,label:"Anchor",labelDescription:"Edit this anchor to customize a nice looking url for this heading.",value:i,onChangeText:s,onSubmit:l,placeholder:r}))}var s3=$.createResponsiveComponent(fe);function OT(e){let{editor:t,node:o,parent:n,children:r}=e,[,i]=R(D),[,a]=R(l3),[s,l]=mn.useState(null),u=mn.useContext(ds),d=mn.useContext(Un),m=mn.useMemo(()=>Wg(t,o.key,[{key:"edit",commands:[{key:"edit",title:"Edit anchor",icon:S.Link,trigger:()=>{l("edit")}}]}]),[t,o.key]),{anchorElement:p,anchoredBlockId:f,anchoredBlockInteractiveState:h,onAnchoredBlockPress:y}=xg(o,{accessibilityLabel:"Direct link to heading",anchorIconSize:m3[o.type]}),w=n.type===Ft;return mn.createElement(mn.Fragment,null,mn.createElement(ge,{...e,palette:m},mn.createElement(s3,{tag:c3(o.type),nativeID:f,onClick:w?()=>{}:()=>y(),...h.events,style:[v.directionRow,v.alignEnd]},mn.createElement($.Text,{selectable:!0,mobileStyle:[d3[o.type]],desktopStyle:[u3[o.type]],nativeID:`text-${f}`,style:[i.text,a[u],a[d]]},r,w?null:p))),mn.createElement(ht,null,s==="edit"?mn.createElement(xT,{node:o,editor:t,onClose:()=>l(null)}):null))}function c3(e){switch(e){case Ae:return"h2";case Fe:return"h3";case Qe:return"h4";default:throw new Error(`invalid node type (${e}) for heading`)}}var l3=z.create({left:{textAlign:"left"},center:{textAlign:"center"},right:{textAlign:"right"},root:{},caption:{},quote:{},swaggerParameter:{}}),u3={[Ae]:so.Heading1,[Fe]:so.Heading2,[Qe]:so.Heading3},d3={[Ae]:so.Heading2,[Fe]:so.Heading3,[Qe]:so.Body},m3={[Ae]:E.ICON_L,[Fe]:E.ICON_S,[Qe]:E.ICON_XXS};c();var Gg=C(O());function _T(e){let{node:t,children:o,style:n,attributes:r}=e,{sections:i}=Gg.useContext(Gr),a=i.get(t.key);return Gg.createElement("div",{id:a,...r,style:n},o)}c();var lb=C(O());W();function IT(e){let{node:t,editor:o,children:n}=e,{align:r="center"}=t.data.toFrozenObject(),i=It(),a=Xr(o,t.key),s=u=>{o.change(d=>{d.insertDataByKey(t.key,["align"],u)})},l=ot(o,t.key,[{key:"types",commands:()=>[{key:"files",title:"Add images\u2026",icon:S.Image,trigger:()=>{i.prompt({accept:"images",title:"Select image",acceptURL:!0}).then(u=>{o.change(d=>{u.forEach(m=>{d.appendNodeByKey(t.key,xo.createImageBlock(m))})})})}}]},{key:"align",commands:[{key:"left",type:1,title:"Left align",selected:r==="left",icon:S.AlignTextLeft,trigger:()=>s("left")},{key:"center",type:1,title:"Center",selected:r==="center",icon:S.AlignTextCenter,trigger:()=>s("center")},{key:"right",type:1,title:"Right align",selected:r==="right",icon:S.AlignTextRight,trigger:()=>s("right")}]},...a?[a]:[]]);return lb.createElement(ge,{palette:l,...e},lb.createElement($.View,{style:[v.directionRow,r==="center"&&v.justifyContentCenter,r==="left"&&v.justifyContentStart,r==="right"&&v.justifyContentEnd,p3.imagesWrapper],mobileStyle:[v.wrap,v.justifyContentCenter]},n))}var p3=X.create({imagesWrapper:{columnGap:g.medium,rowGap:g.medium}});c();var be=C(O());W();c();var bi=C(O());W();function Hg(e){let{node:t,editor:o,onClose:n}=e,[r,i]=bi.useState(()=>xo.getImageAltText(t)||""),a=()=>{o.change(s=>{s.insertDataByKey(t.key,["alt"],r)}),n()};return bi.createElement(Vt,{title:"Set image alt text",onClose:n,footer:bi.createElement(b,{style:[v.directionRow,v.justifyContentEnd]},bi.createElement(B,{kind:"secondary",onPress:n,style:g.Margin.smallRight},"Cancel"),bi.createElement(B,{kind:"primary",onPress:a},"Save"))},bi.createElement(b,{style:[g.Margin.largeBottom]},bi.createElement(b,{style:[g.Margin.mediumBottom]},bi.createElement(vp,null,"This will be read out by screen readers when the image is encountered. Describe the image in detail \u2013 it's how visually impaired readers know what's in front of them.")),bi.createElement(jt,{autoFocus:!0,size:"large",value:r,placeholder:"Edit alt text",onChangeText:i,onSubmit:a})))}c();c();c();var tr=C(O());c();var ub=C(O()),RT=ub.createContext(()=>{}),f3=ub.createContext([]);c();var g3=Vs();function PT(){let e=ll();return db(e.uid)}function db(e){return`${e}-${g3}`}c();var TT=C(O());function ET(){return TT.useContext(RT)}c();var ks=C(O());var h3=ks.createContext({updateRevision:()=>{throw new Error("useUpdateRevision was called outside the UpdateRevisionProvider")},notifyEditing:()=>{throw new Error("useNotifyEditing was called outside the UpdateRevisionProvider")}});function vo(){let e=ks.useContext(h3);if(!e)throw new Error("useUpdateRevision was called outside the UpdateRevisionProvider");return e.updateRevision}var Wve=ct({key:"UNSAFE_revisionFns",default:{updateRevision:void 0,notifyEditing:void 0},effects:[]});c();var hb=C(O());c();c();var y3=lt("edits"),MT=({onSet:e})=>{e(t=>{y3.debug("state",t)})};c();c();function Ul(e,t,o,n,r){var l,u,d,m,p,f;let i=(u=(l=e[t])==null?void 0:l[o])==null?void 0:u.pages[n],a=typeof r=="function"?r(i):r;function s(h){var y;return{...e,[t]:{...e[t],[o]:{...(y=e[t])==null?void 0:y[o],pages:h}}}}if(a===void 0){let h={...(m=(d=e[t])==null?void 0:d[o])==null?void 0:m.pages};return delete h[n],s(h)}return s({...(f=(p=e[t])==null?void 0:p[o])==null?void 0:f.pages,[n]:a})}function jl(e,t,o=()=>!0,n=()=>!0){for(let r in e)if(o(r)){for(let i in e[r])if(n(r,i)){for(let a in e[r][i].pages)if(t(r,i,a,e[r][i].pages[a])===!1)return}}}function Bd(e,t,o,n){var r,i;return(i=(r=e[t])==null?void 0:r[o])==null?void 0:i.pages[n]}function Yr(e){return!e.initialSheet||!e.value?!1:!e.initialSheet.value.document.equals(e.value.document)}function NT(e,t,o,n){let r=e?Yr(e):!1,a={initialSheet:e!=null&&e.initialSheet&&r&&e.initialSheet.beforeSaveKey===n?e.initialSheet:{key:n,value:o},value:t,save:e==null?void 0:e.save,restored:r||e==null?void 0:e.restored,modifiedOnce:(e==null?void 0:e.modifiedOnce)||!1};return a.modifiedOnce=a.modifiedOnce||Yr(a),a}function mb(e,t){return!!(e.restored&&e.restored.initialSheetKey===t)}function DT(e,t,o){return e.restored?{initialSheet:{key:o,value:t},value:e.restored.value,restored:void 0,modifiedOnce:!0}:e}function AT(e){if(!e.restored)return e}function BT(e,t){if(!e.value)throw new Error("Cannot mark a page as saved without a value");return{initialSheet:t,value:e.value,save:"saved",modifiedOnce:e.modifiedOnce}}var LT=new WeakMap;function zd(e,t=void 0){if(!t){let r=LT.get(e);if(r)return r}let o=new Set;jl(e,(r,i,a,s)=>{if(s.save==="failed")return o.add("crashed"),!1;s.save==="saving"?o.add("saving"):Yr(s)?o.add("modified"):s.save==="saved"&&o.add("saved")},r=>!t||t.spaceKey===r,(r,i)=>!t||t.spaceKey===r&&(t.changeRequestKey||"root")===i);let n="untouched";return o.has("crashed")?n="crashed":o.has("modified")?n="modified":o.has("saving")?n="saving":o.has("saved")&&(n="saved"),t||LT.set(e,n),n}var Yl=lt("edits:backup"),pb=new ek("edits-backup");pb.version(1).stores({pages:"++id"});var Xg=pb.table("pages"),zT=ip(2e3,{maxWait:1*60*1e3,concurrent:!1}),WT=({setSelf:e,onSet:t})=>{t((o,n)=>{let r=zd(n instanceof ti?{}:n),i=zd(o);r!==i&&Yl.debug("status is going from",r,"to",i);let a=()=>b3(o);i==="saved"&&r!=="saved"?(zT.cancel(),a()):zT(a)}),e(v3())};async function v3(){let e={},t=[];try{t=await Xg.limit(200).toArray()}catch(n){Yl.warning("Error while accessing entries from edits backup database:",n)}if(t.length===0)return Yl.info("No backups stored"),e;Yl.info(`Loading ${t.length} backup pages: ${t.map(n=>n.pageKey).join(",")}`);let o=new ni("edits:load-backup",{sampleRate:1});return o.label("Entries",t.length),o.wrapSync(()=>(t.forEach(n=>{let r;try{let i=iC(JSON.parse(n.value));if(Rm.isValue(i))r=i;else throw new Error("invalid JSON in local database, not an editor value")}catch(i){Yl.warning("Error while reading entry from edits backup database:",i);return}e=Ul(e,n.spaceKey,n.changeRequestKey,n.pageKey,{modifiedOnce:!1,restored:{value:r,initialSheetKey:n.initialSheetKey}})}),e))}async function b3(e){let t=new ni("edits:flush-backup");await t.wrap(async()=>{let o=[];jl(e,(n,r,i,a)=>{if(Yr(a)&&a.value){let s=vC(a.value);o.push({spaceKey:n,changeRequestKey:r,pageKey:i,value:JSON.stringify(Sy(s)),initialSheetKey:a.initialSheet.key})}else a.restored&&o.push({spaceKey:n,changeRequestKey:r,pageKey:i,value:JSON.stringify(Sy(a.restored.value)),initialSheetKey:a.restored.initialSheetKey})}),t.label("Entries",o.length),await pb.transaction("rw",Xg,async n=>{await Xg.clear(),o.length>0&&await Xg.bulkPut(o)}),Yl.info(`Backup ${o.length} pages: (${o.map(n=>n.pageKey).join(", ")})`)})}c();c();var Kg=60*1e3;function FT(e,t,o){let n=_x($m(e,t||"root",o)),r=sk(Kg),i=PT();return n&&n.participantId!==i&&n.lockedAt>r-Kg?n:null}var VT=lt("edits:lock"),qT=({onSet:e})=>{let t=new Map,o=new Map,n=(r,i,a,s)=>{let l=$m(r,i,a),{currentUser:u}=Ws.auth();if(!u)return;let d=u.uid,m=db(d);if(s){let p=0,f=()=>{p+=1;let y={userId:d,participantId:m,lockedAt:Date.now()};VT.info(`Locking page ${r}/${i}/${a} for ${m} (${p})`,y),l.set(y)};if(f(),!t.has(l.toString())){let y=l.onDisconnect();y.remove(),t.set(l.toString(),y)}let h=setInterval(()=>{f()},Kg/2);o.set(l.toString(),h)}else{VT.info(`Removing lock for page ${r}/${i}/${a} for ${m}`),l.transaction(h=>h&&h.participantId!==m?h:null);let p=t.get(l.toString());p&&(p.cancel(),t.delete(l.toString()));let f=o.get(l.toString());f&&(clearInterval(f),o.delete(l.toString()))}};e((r,i)=>{jl(r,(a,s,l,u)=>{let d=Bd(i instanceof ti?{}:i,a,s,l),m=Yr(u),p=d?Yr(d):!1;m!==p&&n(a,s,l,m)}),jl(i instanceof ti?{}:i,(a,s,l)=>{Bd(r,a,s,l)||n(a,s,l,!1)})})};c();var Zl=lt("edits:save"),S3=ip(5e3,{maxWait:3*60*1e3,concurrent:!1}),GT=({onSet:e,setSelf:t})=>{e(o=>{S3(()=>w3(o,t))})};async function w3(e,t){let o=Object.entries(e).flatMap(([n,r])=>Object.entries(r).flatMap(([i,a])=>{let s=[],l=Object.entries(a.pages).filter(([d,m])=>Yr(m));if(l.length===0)return;l.forEach(([d])=>{s.push([n,i,d])}),t(d=>fb(e,d instanceof ti?{}:d,s,"saving"));let u=i==="root"?void 0:i;return C3(n,u,l).then(d=>(t(m=>fb(e,m instanceof ti?{}:m,s,"saved",d.sheets)),[n,u,d.revision]),()=>(t(d=>fb(e,d instanceof ti?{}:d,s,"failed")),[n,u,null]))})).filter(me);return o.length===0?[]:await Promise.all(o)}function fb(e,t,o,n,r=new Map){let i={...t};return o.forEach(([a,s,l])=>{i=Ul(i,a,s,l,u=>{if(!u)return;let d=Bd(e,a,s,l);if(!d||!d.value||!u.value)return;let m=r.get(l);if(n==="saved"){if(!m){Zl.warning(`Could not find sheet for page ${a}/${s}/${l}. Page was probably deleted, removing it from state.`);return}return BT(u,m)}return d.value.document!==u.value.document?u:{...u,save:n}})}),i}async function C3(e,t,o){let{currentUser:n}=Ws.auth(),r=new ni("edits:saveSpace",{sampleRate:1});r.label("Space",e),r.label("Change Request",t),r.label("Pages",o.length);let i=new Map;try{if(!n)throw new Error(`Attempted to save locally changed space ${e} ${t?`with change request ${t} `:""}but user is not logged in`);let a=await r.wrap(async()=>(Zl.info(`starting save of ${o.length} pages in space ${e} ${t?`(change request: ${t}) `:""}`),Ex(e,t,(s,l)=>{o.forEach(([u,d])=>{ui(s,u,m=>{if(m.kind!=="sheet"||!d.value)return m;let p=SC({document:d.value.document,users:[n.uid],revision:s.key,page:u});return p.previous=m.sheet,wC(l,e,p),Zl.debug("Updating page",u,"with sheet",p.key),d.initialSheet.key!==m.sheet&&Zl.warning(`sheet in page "${u}" has been modified since the edits started, expected sheet "${d.initialSheet.key}" but got "${m.sheet}". Potential changes will be replaced.`),i.set(u,{key:p.key,beforeSaveKey:m.sheet,value:d.value}),{...m,sheet:p.key}})})})));return Zl.info(`Saved ${o.length} page(s) (${o.map(s=>s[0]).join(", ")}) to new revision ${a.key} in ${t?`change request ${t} in `:""}space ${e}`),{sheets:i,revision:a}}catch(a){throw Zl.error(`Couldn't save ${o.length} locally stored pages (${o.map(s=>s[0]).join(", ")}) in ${t?`change request ${t} in `:""}space ${e}`,a.stack),a}}var $g=ct({key:"globalPageEditsAtom",default:{},effects:[GT,WT,qT,MT]}),HT=qc({key:"pageEditsSelector",get:([e,t,o])=>({get:n})=>{var i,a;return(a=(i=n($g)[e])==null?void 0:i[t])==null?void 0:a.pages[o]},set:([e,t,o])=>({set:n},r)=>{r instanceof ti||n($g,i=>Ul(i,e,t,o,r))}});c();var k3=qc({key:"editsStatusSelector",get:e=>({get:t})=>{let o=t($g);return zd(o,e)}});function XT(e){return Xo(k3(e))}c();var Fd=C(O());c();var Ug=C(O());var Wd=Ug.createContext({baseRevision:null,pages:[],diffs:new Map,diffMode:null});c();var kc=C(O());var KT=kc.createContext({pages:[],setContentDiffPage:e=>{}});function jg(e,t,o=!1){let{diffs:n,diffMode:r}=Fd.useContext(Wd),i=r==="full"?n.get(t.key):null,a=(i==null?void 0:i.type)==="modified"&&i.before.page.kind==="sheet"?i.before.page.sheet:null,s=oO(t.sheet?{spaceKey:e,sheetKey:t.sheet}:null,`${e}-${t.key}`);if(t.sheet&&!s)throw new Error(`Sheet "${t.sheet}" not found`);let[l]=nv([a?{spaceKey:e,sheetKey:a}:null]);if(a&&!l)throw new Error(`Original sheet "${a}" not found`);return[Fd.useMemo(()=>{let d=o&&!i?"conflicts":"document",m=s?gb(s,d):Oy(t.key);if(i){let p=l?gb(l,d):Oy(t.key);return Rm.create({document:dC(p.document,m.document)})}return m},[s,t.key,i,l,o]),s]}function UT(e,t){let{baseRevision:o,diffMode:n}=Fd.useContext(Wd),r=n==="quick"?o==null?void 0:o.pages[t.key]:null,i=r&&r.kind==="sheet"?r.sheet:null,[a]=nv([i?{spaceKey:e,sheetKey:i}:null]);if(i&&!a)throw new Error(`Original sheet "${i}" not found`);if(n!==null)return a?gb(a,"document"):null}var $T=new WeakMap;function gb(e,t){let o=t!=="conflicts",n=$T.get(e),r=o&&n?n:Vm(e.body,t);if(o&&$T.set(e,r),si(r.document)){let i=r.change();return i.focus(),i.value}return r}var Vd=lt("edits:page");function jT({revision:e,changeRequest:t,page:o,analyticsContext:n}){let r=uo(),[i,a]=jg(e.space,o,e.conflicts&&o.key in e.conflicts.pages),s=XT({spaceKey:e.space,changeRequestKey:(t==null?void 0:t.key)||null}),[l,u]=Do(HT([e.space,(t==null?void 0:t.key)||"root",o.key]));hb.useEffect(()=>{var h,y;if(!(l!=null&&l.restored))return;let p=()=>{u(w=>w&&DT(w,i,a==null?void 0:a.key))},f=()=>{u(w=>w&&AT(w))};if(mb(l,a==null?void 0:a.key))Vd.info(`performing a fast-forward restore on sheet ${(y=l==null?void 0:l.restored)==null?void 0:y.initialSheetKey}`),p(),r.close("restore-page-edits"),r.notify({id:"restore-page-edits",kind:"info",title:"Previous session restored",details:"We\u2019ve automatically restored the latest unsaved changes you've made.",timeout:3500});else{Vd.info(`user has changes made against sheet ${(h=l==null?void 0:l.restored)==null?void 0:h.initialSheetKey} that cannot be fast-forwarded as current sheet is ${a==null?void 0:a.key}. prompting user for their desired action`);let w=r.notifyOrUpdate({id:"restore-page-edits",kind:"info",title:"Unsaved changes found",details:"We have found unsaved changes you've previously made on this page. Restoring these changes will overwrite the current content. Would you like to restore them?",timeout:0,actions:[{label:"Restore",onPress:()=>{Vd.info("user restored changes from the non-fast-forward backup"),p(),w()}},{label:"Discard",onPress:()=>{Vd.info("user discarded changes from the non-fast-forward backup"),f(),w()}}]});return w}},[l,i,a,u,r]);let[d,m]=x3(l,i,a==null?void 0:a.key);return hb.useEffect(()=>{Vd.info(`resolved page value with resolution ${m}`)},[m]),{value:d,onChange:p=>{u(f=>{let h=NT(f,p.value,i,a==null?void 0:a.key);return h.modifiedOnce&&!(f!=null&&f.modifiedOnce)&&te({...n,page:o.key,type:"edit_page_document_start",collaborators:0}),h})},crashed:s==="crashed"}}function x3(e,t,o){var n;if(!e)return[t,"no-local-edits-or-backup"];if(Yr(e)){if(!e.value)throw new Error("Should never be modified and value being null");return[e.value,"local-edits"]}return!e.value&&e.restored?mb(e,o)?[e.restored.value,"backup-fast-forward"]:[t,"backup-no-ff"]:e.value&&((n=e.initialSheet)==null?void 0:n.beforeSaveKey)===o?[e.value,"local-no-edits-post-save"]:e.value?[t.merge({history:e.value.history,decorations:e.value.decorations,selection:e.value.selection.normalize(t.document)}),"local-no-edits-selection-only"]:[t,"local-no-edits"]}var O3=F.createInteractiveComponent(S.EmojiReaction);function YT(e){let{analyticsContext:t,page:o,size:n,readOnly:r=!0}=e,i=tr.useRef(null),[,a]=R(D),s=vo(),[l,u]=an(),d=async m=>{var p;(p=i.current)==null||p.close(),m!==o.emoji&&(await u(()=>s(f=>{ui(f,o.key,{emoji:m})})),te({...t,...m?{type:"edit_pick_page_emoji",pageKind:o.kind,emoji:m}:{type:"edit_remove_page_emoji",pageKind:o.kind}}))};return r?o.emoji?tr.createElement(_o,{code:o.emoji,size:n}):null:tr.createElement(Xa,{ref:i,wrapper:Ar,anchor:({ref:m,opened:p,toggle:f})=>tr.createElement(F.TouchableOpacity,{ref:m,onPress:f},l?tr.createElement(Ce,{size:n}):tr.createElement(tr.Fragment,null,o.emoji?tr.createElement(_o,{code:o.emoji,size:n}):tr.createElement(O3.Child,{size:n,style:p?a.textMid:a.textMuted,activeStyle:a.textMid})))},tr.createElement(sn,{kind:"wide",preferredAlignment:"middle"},tr.createElement(Yp,{onPick:d,onRemove:o.emoji?()=>d(void 0):void 0})))}c();var re=C(O());W();c();var ZT=JSON.parse('{"pageCoverBleedFull":"pageCoverBleedFull_eqtqd"}');var To={};yw(To,{COMMENTS_COLUMN_EXPANDED_WIDTH:()=>Zg,MAX_PAGE_OUTLINE_WIDTH:()=>xs,PAGE_BODY_DESKTOP_H_PADDING:()=>Et,PAGE_BODY_DESKTOP_WIDTH:()=>Yg,PAGE_BODY_MAX_WIDTH:()=>or,PAGE_BODY_MOBILE_H_PADDING:()=>qo,PAGE_OUTLINE_WIDTH:()=>bb,PUBLIC_DESKTOP_HEADER_HEIGHT:()=>_3,PUBLIC_MOBILE_HEADER_HEIGHT:()=>I3,SPACE_HEADER_HEIGHT:()=>yb,TOC_DESKTOP_WIDTH:()=>vb,columnsWidthThreadhold:()=>qd,getPageOutlineWrapperWidth:()=>Sb,getToCWrapperDesktopWidth:()=>QT,pageSwitchThreadhold:()=>Os});c();var yb=E.L,or=750,Et=110,qo=g.medium,Yg=or+2*Et,vb=300,Zg=300,bb=220,xs=300,_3=E.XL,I3=E.L;function qd(e,t=0){let o=t+vb+Yg+bb;return e===2||(o+=Zg-qo),o}function Os(e=0){return e+Yg}function QT(e){let t=`(100vw - ${Yg}px) / 2 - ${e||0}px`;return`max(${vb}px, calc(${t}))`}function Sb(e,t){let o=`100vw - ${QT(e)} - ${or}px - ${Et}px - ${typeof t>"u"?Et:t||0}px - ${e||0}px`;return`max(${bb}px, calc(${o}))`}c();var pn=C(O());W();c();var eE=C(O());c();var JT=JSON.parse('{"commentHalo":"commentHalo_0AauK"}');function wb(e){var l;let{node:t}=e,{screen:o}=qi(),n=Xo(iv);if(!t)return null;let r=o.type==="space"&&((l=o.sideSheet)==null?void 0:l.type)==="comments"?o.sideSheet.node:null;return(n&&n.highlighting&&n.node!==r?n.node:null)===t||r===t?eE.default.createElement(Z,{style:[JT.commentHalo],as:"span",contentEditable:!1}):null}wb.displayName="BlockCommentHalo";c();var Ji=C(O());W();var tE=C(bk());var oE=e=>{let{nodeKey:t,visible:o,buttonSize:n,style:r,shortcutsActive:i}=e,a=Ji.useContext(uv),{navigate:s}=ve(),l=Ji.useMemo(()=>a(t),[t]),u=(0,tE.useSubscription)(l),d=Ji.useMemo(()=>(u!=null?u:[]).reduce((w,k)=>{let x=Object.values(k.replies).reduce((P,I)=>P+I.count,0);return 1+w+x},0),[u]),m=d>0,p=u==null?void 0:u[0],f=()=>{var w;p&&s({screen:{type:"space",space:p.space,sideSheet:{type:"comments",node:(w=p.node)!=null?w:void 0,comment:p.key}}})},h=()=>{s({screen:{sideSheet:{type:"comments",node:t,context:"post",comment:void 0}}})},y=()=>m&&p?f():h();return fr(i?{[Xe.EDITOR_COMMENT]:y}:{},["editor-selection-collapsed","editor-selection-expanded"],[i,p]),Ji.createElement(fe,{editable:!1,style:[o||m?$e.visible:$e.hidden,r,m?R3.commentsButtonWithComments:null],"data-hide-on-drag":!0},Ji.createElement(Ok,{kind:"secondary",size:"small",style:N.flex.justifyContentEnd},Ji.createElement(lo,{leadingIcon:S.Comment.CSS,tooltipTitle:m?`${d} Comment${d>1?"s":""}`:"Comment",onPress:y,size:n,iconOnly:!m,label:m?`${d}`:"Comment"}),m?Ji.createElement(lo,{leadingIcon:S.Plus.CSS,size:n,tooltipTitle:"Leave another comment",label:"Leave another comment",iconOnly:!0,onPress:h}):null))},R3=X.create({commentsButtonWithComments:{right:-48-g.xlarge}});c();var kb=C(O());c();var Cb=JSON.parse('{"blockWrapper":"blockWrapper_y0Ubs","pageWrapper":"pageWrapper_ca2kA"}');function nE(e){let{children:t,style:o}=e;return kb.createElement(Z,{style:[Cb.pageWrapper,N.margin.noneVertical,N.margin.autoHorizontal,o]},t)}function Ql(e){let{children:t,style:o}=e;return kb.createElement(Z,{style:[Cb.blockWrapper,N.margin.noneVertical,N.margin.autoHorizontal,o]},t)}function P3(e){let{children:t,renderMode:o,isDiffViewEnabled:n,isFullPage:r,isPDF:i,node:a,interactive:s}=e,{desktopSidebarWidth:l}=pn.useContext(hi),{customBreakpointsPageBodyStyles:u}=pn.useMemo(()=>({customBreakpointsPageBodyStyles:{[qd(2,l)]:v.justifyContentCenter}}),[l]);if(o==="unstyled")return pn.createElement(b,{...s==null?void 0:s.events},t);let d=o==="full-width"?pn.Fragment:Ql;return pn.createElement(b,{style:[v.flex1,i?rE.pdfContainer:null]},pn.createElement(d,null,pn.createElement($.View,{style:[v.flex1,v.directionRow,r?v.justifyContentCenter:v.justifyContentEnd],mobileStyle:[v.justifyContentCenter],customBreakpointsStyles:u,...s==null?void 0:s.events},pn.createElement(b,{style:[v.flex1]},pn.createElement(wb,{node:a}),pn.createElement($.View,{mobileStyle:[n?rE.pageBodyMobileWithDiff:null]},t)))))}function iE(e){let{isCommentMarginVisible:t,isDiffViewEnabled:o,isFullPage:n}=e,r=Ye();return pn.useMemo(()=>[i=>pn.createElement(P3,{...i,isPDF:r,isDiffViewEnabled:o,isCommentMarginVisible:t,isFullPage:n}),r||!t?void 0:oE],[o,n,t,r])}var rE=X.create({pdfContainer:{breakInside:"avoid",breakBefore:"auto"},pageBody:{maxWidth:or+2*Et},pageBodyWithComments:{maxWidth:or+Et,paddingRight:0},pageBodyMobileWithDiff:{marginLeft:qo*2},pageBodyDesktopLeftMargin:{marginLeft:Et},pageBodyDesktopRightPadding:{paddingRight:Et},pageBodyMobileLeftMargin:{marginLeft:qo},pageBodyMobileRightPadding:{paddingRight:qo},pageBodyPDFLeftMargin:{marginLeft:qo},pageBodyPDFRightPadding:{paddingRight:qo}});c();var he=C(O());W();c();var xb=C(p6()),at=C(O());W();function aE(e){let{analyticsContext:t,parentPages:o,childPages:n,onClose:r,revision:i,page:a}=e,[,s]=R(M3),[l,u]=an(),d=vo(),m=async(p=!0)=>{await u(async()=>{await d(f=>{if(p){[a,...o,...n].forEach(h=>{Bu(f,h.key)});return}Bu(f,a.key)}),await te({...t,type:"edit_conflicts_keep_page",pageKind:a.kind})}),r()};return at.createElement(Vt,{title:"Keep page",onClose:r,footer:at.createElement(b,{style:[v.directionRow,v.justifyContentEnd]},at.createElement(B,{kind:"secondary",onPress:()=>{},style:g.Margin.smallRight,disabled:l},"Cancel"),at.createElement(Zs,{kind:"secondary",onPress:()=>m(!1),style:g.Margin.smallRight},"Keep only this page"),at.createElement(Zs,{kind:"merge",onPress:()=>m()},"Keep"))},(0,xb.default)(o)?null:at.createElement(b,{style:[(0,xb.default)(n)?null:s.parentPages]},at.createElement(T3,{revision:i,pages:o,onClose:r})),at.createElement(E3,{revision:i,pages:n,onClose:r}))}function T3(e){let{pages:t,revision:o}=e,{conflicts:n}=o,[,r]=R(D),i=t.length;return t.length?at.createElement(b,{style:[g.Margin.mediumTop]},at.createElement(b,{style:[v.directionRow,g.Margin.smallBottom]},at.createElement(co,{kind:"warning",icon:S.Warning}),at.createElement(A,{style:[g.Margin.mediumLeft,r.Label,r.text,r.Bold]},"There ",i>1?"are":"is"," ",t.length," conflicted parent"," ",at.createElement(fi,{count:i,singular:"page",plural:"pages"}),". Keeping the current page, you would keep"," ",at.createElement(fi,{count:i,singular:"it",plural:"all of them"}))),at.createElement(b,null,t.map(a=>{let s=n==null?void 0:n.pages[a.key];return at.createElement(wa,{key:a.key,layout:"wide",icon:()=>s==="deleted-in-head-subtree-modified-in-base"||s==="deleted-in-base-subtree-modified-in-head"?at.createElement(co,{kind:"warning",icon:S.Conflict}):at.createElement(co,{kind:"danger",icon:S.Trashcan}),title:a.title})}))):null}function E3(e){let{pages:t,revision:o}=e,{conflicts:n}=o,[,r]=R(D),i=t.length;return t.length?at.createElement(b,{style:[g.Margin.mediumTop]},at.createElement(b,{style:[v.directionRow,g.Margin.smallBottom]},at.createElement(co,{kind:"warning",icon:S.Warning}),at.createElement(A,{style:[g.Margin.mediumLeft,r.Label,r.text,r.Bold]},"There ",t.length>1?"are":"is"," ",t.length," nested"," ",at.createElement(fi,{count:i,singular:"page",plural:"pages"}),". Keeping the current page, you would keep"," ",at.createElement(fi,{count:i,singular:"it",plural:"all of them"}))),at.createElement(b,null,t.map(a=>{let s=n==null?void 0:n.pages[a.key];return at.createElement(wa,{key:a.key,layout:"wide",icon:()=>s==="deleted-in-head-subtree-modified-in-base"||s==="deleted-in-base-subtree-modified-in-head"?at.createElement(co,{kind:"warning",icon:S.Conflict}):at.createElement(co,{kind:"danger",icon:S.Trashcan}),title:a.title})}))):null}var M3=z.create({parentPages:e=>({borderBottomColor:e.colors.border.mid,borderBottomWidth:1,marginBottom:g.large,paddingBottom:g.large})});c();var St=C(O());W();c();var nr=C(O());W();var sE=4;function cE(e){let{space:t,page:o,readOnly:n,...r}=e,[i,a]=nr.useState(!1),s=_b(t,o),l=Ob();if(s.length===0)return null;let u=i?s:s.slice(0,sE),d=s.length-sE,m=!i&&d>0;return nr.createElement(b,{...r,style:[v.directionRow,v.wrap]},u.map(p=>nr.createElement(b,{key:p.key,style:[g.Margin.mediumRight,g.Margin.mediumTop]},nr.createElement(B,{kind:"default",size:"small",icon:S.ArrowDownLeft,onPress:()=>l(p)},p.page.title))),m?nr.createElement(b,{style:[g.Margin.mediumTop]},nr.createElement(B,{kind:"grey",size:"small",onPress:()=>a(!0),title:nr.createElement(nr.Fragment,null,"Show ",d," more"," ",nr.createElement(fi,{count:d,singular:"backlink",plural:"backlinks"}))},`+${d} more`)):null)}function Ob(){let{navigate:e}=ve();return nr.useCallback(t=>{let{page:o,revision:n}=t;if(o.kind==="link")return;let r=xt(n,o.key);e({screen:i=>i.type==="space"&&n.space===i.space?{page:r}:{type:"space",space:n.space,page:r,changeRequest:void 0,revision:void 0}})},[])}function _b(e,t){return L3([{kind:"page",page:t.key},{kind:"page",page:t.key,space:e.key}]).filter(n=>n.page.key!==t.key||n.revision.space!==e.key)}function L3(e){let t=e.map(r=>$w(r)),[o]=zr([Uw(t)]),n=wx(o.map(r=>({space:r.space,revision:r.revision})));return o.map((r,i)=>{var l;let a=(l=n[i])==null?void 0:l.result;return a?Object.keys(r.pages).filter(u=>Object.keys(r.pages[u].references).some(d=>t.includes(d))).map(u=>({key:`${a.space}-${u}`,revision:a,page:a.pages[u]})):null}).filter(me).flat().sort((r,i)=>r.page.key<i.page.key?-1:r.page.key>i.page.key?1:0)}function Qg(e){let{space:t,analyticsContext:o,page:n,onClose:r,revision:i}=e,[,a]=R(D),s=vo(),l=async u=>{u&&(await s(d=>{IC(d,n.key,{deleteEmptyGroupParent:!0})}),te({...o,type:"edit_remove_page",pageKind:n.kind})),r()};return St.createElement(qu,{title:n.kind==="group"?"Delete group":"Delete page",kind:"danger",confirmButtonText:"Delete",onComplete:l},St.createElement(b,null,St.createElement(A,{style:[a.Body,a.text]},"Confirming will delete all the content; however, it will still be available in the version history.")),St.createElement(St.Suspense,{fallback:null},St.createElement(N3,{space:t,page:n,onClose:r})),n.kind!=="link"&&St.createElement(D3,{revision:i,page:n,onClose:r}))}function N3(e){let{space:t,page:o,onClose:n}=e,[,r]=R(D),i=Ob(),a=_b(t,o);return a.length===0?null:St.createElement(b,{style:[g.Margin.mediumTop]},St.createElement(b,null,St.createElement(A,{style:[r.Label,r.textMuted]},"Deleting this page will break links in the following ",a.length," pages:")),St.createElement(b,{style:[v.directionRow,v.wrap]},a.map(s=>St.createElement(b,{key:s.key,style:[g.Margin.smallRight,g.Margin.smallTop]},St.createElement(B,{kind:"secondary",size:"small",icon:S.ArrowDownLeft,onPress:()=>{n(),i(s)}},s.page.title)))))}function D3(e){let{page:t,revision:o,onClose:n}=e,[,r]=R(D),{navigateToPage:i}=ms(),s=Lu(o,t.key).map(u=>{var d;return((d=o.conflicts)==null?void 0:d.pages[u.key])==="deleted-in-base"?u:null}).filter(Boolean),l=s.length;return l?St.createElement(b,{style:[g.Margin.mediumTop]},St.createElement(b,{style:[v.directionRow,g.Margin.mediumBottom]},St.createElement(co,{kind:"warning",icon:S.Warning}),St.createElement(A,{style:[g.Margin.mediumLeft,r.Label,r.text,r.Bold]},"There ",l>1?"are":"is"," ",s.length," nested"," ",St.createElement(fi,{count:Object.keys(s.length).length,singular:"page",plural:"pages"})," ","deleted in the primary content but modified in your change request.",St.createElement("br",null),"Deleting the current page, you would delete ",l>1?"all of them":"it",".")),St.createElement(b,null,s.map(u=>St.createElement(wa,{key:u.key,layout:"wide",icon:()=>St.createElement(co,{kind:"danger",icon:S.Trashcan}),title:u.title,buttons:[St.createElement(B,{size:"medium",kind:"secondary",onPress:()=>{n(),i(o,u.key)}},"Open")]})))):null}function lE(e){let{page:t,document:o,conflictType:n,pageWithComments:r,pageIsDiff:i}=e,[,a]=R(z3),s=vo(),[l,u]=an(),d=uo(),m=ci.getDocumentConflicts(o),p=m.isEmpty(),f=()=>{p&&u(async()=>{let y=await s(w=>{Bu(w,t.key)});y&&!Qw(y)&&d.notify({kind:"success",icon:S.CheckCircle,title:"All conflicts have been resolved",details:"You can now merge this change request."})})},h=()=>{switch(n){case"deleted-in-head":case"deleted-in-base":case"deleted-in-base-subtree-modified-in-head":case"deleted-in-head-subtree-modified-in-base":return he.createElement(B3,{conflictType:n,onPressMarkAsResolved:f,loading:l,...e});default:return typeof n=="boolean"?he.createElement(A3,{conflictNodes:m,canBeResolved:p,loading:l,onPressMarkAsResolved:f,...e}):null}};return he.createElement(b,{style:[v.directionRow,v.justifyContentCenter,g.Margin.mediumBottom,a.alert]},he.createElement(b,{style:[v.flex1,r||i?a.alertWithComments:a.alertFullWidth]},he.createElement(b,{style:[v.directionRow,v.alignCenter,g.Padding.mediumVertical,g.Padding.mediumHorizontal,a.alertInner]},h())))}var A3=e=>{let{hasBeenResolved:t,canBeResolved:o,loading:n,conflictNodes:r,onPressMarkAsResolved:i}=e,[,a]=R(D),s=he.useRef(),l=p=>{let f=$a(p);f&&Jx(f)},u=p=>{var w;let h=(s.current?r.findIndex(k=>k.key===s.current):-1)+p;h<0?h=r.size-1:h>=r.size&&(h=0);let y=(w=r.get(h))==null?void 0:w.key;y&&(s.current=y,l(y))},d=()=>{u(1)},m=()=>{u(-1)};return he.createElement(b,{style:[v.flex1,v.directionColumn]},he.createElement(b,{style:[v.directionRow]},he.createElement(b,{style:g.Margin.mediumRight,testID:"conflictBanner.badge"},t?he.createElement(co,{kind:"success",size:"large",icon:S.Check}):he.createElement(co,{kind:"merge",size:"large",icon:S.Conflict})),he.createElement(b,{style:[v.flex1,v.directionColumn]},he.createElement(A,{style:[a.Label,a.textMid],testID:"conflictBanner.message"},t?"All conflicts with the primary content have been resolved for this page.":he.createElement(he.Fragment,null,"This page has ",o?"no":r.size," ","unresolved"," ",he.createElement(fi,{count:r.size,singular:"conflict",plural:"conflicts"})," ","with the primary content."," ",o?"Confirm by marking this page as resolved.":"Resolve them by editing this document.")),t?null:he.createElement(b,{style:[v.directionRow,v.wrap]},o?null:he.createElement(b,{style:[v.directionRow,v.wrap,g.Margin.smallBottom]},he.createElement(B,{style:[g.Padding.noneLeft],size:"medium",rightIcon:S.ChevronUp,onPress:m,testID:"conflictBanner.prevButton"},"Prev"),he.createElement(B,{size:"medium",rightIcon:S.ChevronDown,onPress:d,style:g.Margin.smallRight,testID:"conflictBanner.nextButton"},"Next")),he.createElement(b,{style:[{marginLeft:"auto"}]},he.createElement(B,{size:"medium",kind:"secondary",title:o?"Confirm resolution of all conflicts in this page":"You need to first resolve conflicts in the document",disabled:n||!o,icon:n?Ce:S.Check,onPress:i,testID:"conflictBanner.resolveButton"},"Mark as resolved"))))))},B3=e=>{let{hasBeenResolved:t,loading:o,onPressMarkAsResolved:n,page:r,space:i,analyticsContext:a,revision:s,conflictType:l}=e,[u,d]=he.useState(!1),[m,p]=he.useState(!1),[,f]=R(D),h=Lu(s,r.key).filter(_=>{var M,T;return((M=s==null?void 0:s.conflicts)==null?void 0:M.pages[_.key])==="deleted-in-head"||((T=s==null?void 0:s.conflicts)==null?void 0:T.pages[_.key])==="deleted-in-base"}),y=()=>{let _="Do you want to keep the modified page or delete it?",M=h.length>1?"pages":"page";switch(l){case"deleted-in-base":return`This page has been deleted in the primary content, but has been modified in this change request. ${_}`;case"deleted-in-head":return`This page has been deleted in this change request, but has been modified in the primary content ${_}`;case"deleted-in-base-subtree-modified-in-head":return`This page has been deleted in the primary content but has ${h.length} conflicted child ${M}. Do you want to keep or delete it?`;case"deleted-in-head-subtree-modified-in-base":return`This page has been deleted in your change request but has ${h.length} conflicted child ${M}. Do you want to keep or delete it?`}},k=(_=>{let M=[];function T(L){var G;let q=Object.values(s.pages).find(U=>{var H;return(H=U==null?void 0:U.pages)==null?void 0:H.includes(L.key)});q&&((G=s.conflicts)!=null&&G.pages[q.key])&&(M.push(q),T(q))}return T(_),M})(r),x=Lu(s,r.key),P=()=>p(!0),I=()=>{if(k.length||x.length){d(!0);return}n()};return he.createElement(he.Fragment,null,he.createElement(he.Fragment,null,he.createElement(b,{style:g.Margin.mediumRight,testID:"conflictBanner.badge"},t?he.createElement(co,{kind:"success",size:"large",icon:S.Check}):l==="deleted-in-base-subtree-modified-in-head"||l==="deleted-in-head-subtree-modified-in-base"?he.createElement(co,{kind:"warning",size:"large",icon:S.Conflict}):he.createElement(co,{kind:"danger",size:"large",icon:S.Trashcan})),he.createElement(b,{style:[v.flex1]},he.createElement(A,{style:[f.Label,f.textMid],testID:"conflictBanner.message"},t?"All conflicts with the primary content have been resolved for this page.":y())),t?null:he.createElement(b,{style:[g.Margin.mediumLeft,v.directionRow]},he.createElement(b,{style:[g.Margin.mediumLeft,v.directionRow]},he.createElement(B,{size:"medium",icon:o?Ce:S.Copy,onPress:I,testID:"conflictBanner.keepButton"},"Keep"),he.createElement(B,{size:"medium",icon:o?Ce:S.Trashcan,onPress:P,testID:"conflictBanner.deleteButton"},"Delete")))),he.createElement(ht,null,u?he.createElement(aE,{page:r,revision:s,analyticsContext:a,onClose:()=>d(!1),parentPages:k,childPages:x}):null),he.createElement(ht,null,m?he.createElement(Qg,{space:i,page:s.pages[r.key],revision:s,analyticsContext:a,onClose:()=>p(!1)}):null))},z3=z.create({alert:e=>({position:"sticky",top:-E.RADIUS_L,right:0,left:0,zIndex:1}),alertInner:e=>({borderRadius:E.RADIUS_L,borderWidth:1,borderColor:e.colors.border.mid,backgroundColor:e.colors.background.main,...e.shadows.tight}),alertFullWidth:{maxWidth:or+2*Et},alertWithComments:{maxWidth:or+Et}});c();var Ie=C(O());W();var dE=Fp({width:1448,height:240}),F3=F.createInteractiveComponent(dE.View);function Ib(e){let{page:t}=e;return Fa(t)?Ie.createElement(Ie.Suspense,{fallback:Ie.createElement(V3,null)},Ie.createElement(q3,{...e})):null}function V3(e){return Ie.createElement(b,{style:[Ea.pageCover]},Ie.createElement(mE,null))}function q3(e){let{page:t,revision:o,readOnly:n,rounded:r,analyticsContext:i}=e,[a,s]=Ie.useState(!1),l=It(),u=vo(),d=Ye(),[m,p]=an(),f=uE(),h=null;if(t.cover){let L=t.cover.kind==="file"?o.files[t.cover.file]:null;f=(t.cover.kind==="file"?L?Ga(L==null?void 0:L.downloadURL):null:t.cover.url)||f,L!=null&&L.dimensions&&(h=L.dimensions)}let y=t.coverY||0,w=Ie.useMemo(()=>new Kt.Value(y),[t.key,t.coverY]),k=Ie.useRef(y);Ie.useEffect(()=>{let L=w.addListener(({value:q})=>{k.current=q});return()=>{w.removeListener(L)}},[w]);let x=async()=>{s(!1),await u(L=>{ui(L,t.key,{coverY:k.current})}),te({...i,type:"edit_reposition_cover"})},P=()=>{s(!1),w.flattenOffset(),w.setValue(y)},I=Ie.useRef(null),_=de(I),M=Ie.useCallback(async()=>{let[L]=await l.prompt({title:"Select cover image",accept:"images",acceptURL:!0});L&&(await p(()=>u(q=>{Zc(q,t.key,L)})),te({...i,type:"edit_upload_cover"}))},[i,u,t.key]),T=Ie.useMemo(()=>{if(!n)return ne({groups:[{key:"pageCover",commands:[{key:"pageCover.select",icon:S.Image,title:"Select image",trigger:()=>{M()}},{key:"pageCover.reposition",icon:S.ArrowsMove,title:"Reposition",trigger:()=>{s(!0)}},{key:"pageCover.remove",icon:S.Trashcan,title:"Remove",trigger:async()=>{await u(L=>{_C(L,t.key)}),te({...i,type:"edit_remove_cover"})}}]}]})},[i,t.key,u,n,M]);return Ie.createElement(F3,{style:[Ea.pageCover],isPDF:d},Ie.createElement(G3,{coverUrl:f,animatedY:w,repositioning:a,rounded:r,isPDF:d,coverFileDimensions:h}),m?Ie.createElement(mE,null):null,n||d?null:Ie.createElement(F.View.Child,{style:[Ea.pageCoverButton,v.directionRow],activeStyle:"visible",inactiveStyle:a||_.opened?"visible":"hidden"},a?Ie.createElement(Ie.Fragment,null,Ie.createElement(B,{kind:"secondary",size:"medium",style:[g.Margin.smallRight],onPress:P},"Cancel"),Ie.createElement(B,{kind:"primary",size:"medium",onPress:x},"Save")):Ie.createElement(Ie.Fragment,null,t.cover?null:Ie.createElement(B,{icon:S.Image,kind:"secondary",size:"medium",style:[g.Margin.smallRight],onPress:()=>{M()}},"Change cover"),Ie.createElement(B,{ref:I,icon:S.MoreVertical,rounded:!0,size:"medium",kind:"secondary",active:_.opened,onPress:()=>{T&&_.open(T)}}))))}function G3(e){let{coverUrl:t,animatedY:o,repositioning:n,isPDF:r,rounded:i,coverFileDimensions:a}=e,s=Di(),l=Ie.useRef(null),[u,d]=Ie.useState(a),[m,p]=dE.useDimensions(),f=u?H3(m,u):0,[,{pageCoverRounded:h}]=R(K3),y=Ie.useMemo(()=>hm.create({onStartShouldSetPanResponder:(I,_)=>!1,onStartShouldSetPanResponderCapture:(I,_)=>!1,onMoveShouldSetPanResponder:(I,{dx:_})=>n,onMoveShouldSetPanResponderCapture:(I,_)=>!1,onPanResponderGrant:(I,{dx:_})=>{o.extractOffset()},onPanResponderMove:(I,{dy:_})=>{o.setValue(_/f)},onPanResponderTerminationRequest:(I,_)=>!0,onPanResponderRelease:(I,{dy:_})=>{o.flattenOffset()}}),[f,n]),w=u?u.width*f:0,k=u?u.height*f:0,x=(m.height-k)/2,P=!!u&&p;return Ie.createElement(b,{...y.panHandlers,style:[X.absoluteFill,Ea.pageCoverInner,n&&X3.pageCoverRepositioning,i&&h],...P?{testID:"page.cover"}:{}},!r&&Ie.createElement(b,{style:[Ea.pageCoverOverlay,s.color==="dark"&&Ea.pageCoverOverlayDark,P&&Ea.pageCoverOverlayReady]}),Ie.createElement(dk,{ref:l,source:{uri:t},loading:"priority",style:[Ea.pageCoverImage,w&&k?{top:r?0:Kt.diffClamp(Kt.add(x,Kt.multiply(o,f)),-(k-m.height),0),left:(m.width-w)/2,width:w,height:k}:{width:"100%",top:o}],onLoad:()=>{var I,_,M,T;d({width:(_=(I=l.current)==null?void 0:I.width)!=null?_:0,height:(T=(M=l.current)==null?void 0:M.height)!=null?T:0})}}))}function mE(){return Ie.createElement(b,{style:Ea.pageCoverLoadingOverlay},Ie.createElement(Ce,{size:"large"}))}function H3(e,t){let o=e.width/t.width,n=e.height/t.height;return t.height*o<e.height?n:o}var X3=X.create({pageCoverRepositioning:{cursor:"grab"}}),K3=z.create({pageCoverRounded:e=>({borderRadius:e.radiuses.xlarge})}),Ea=X.create({pageCoverOverlay:{position:"absolute",inset:0,opacity:1,zIndex:1,transitionDelay:"200ms",transition:"opacity 500ms ease-in, z-index 1000ms ease-in",backgroundColor:"rgba(255,255,255,.2)",backdropFilter:"blur(10px)"},pageCoverOverlayDark:{backgroundColor:"rgba(0,0,0,.2)"},pageCoverOverlayReady:{zIndex:-1,opacity:0},pageCover:{position:"relative",width:"100%",height:240},pageCoverInner:{overflow:"hidden"},pageCoverImage:{position:"absolute",left:0,right:0,objectFit:"cover",pointerEvents:"none"},pageCoverButton:{position:"absolute",bottom:g.medium,right:g.medium},pageCoverLoadingOverlay:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:K.GREY_BLUE_LIGHT,justifyContent:"center",alignItems:"center"}});c();var ke=C(O());W();c();var xc=JSON.parse('{"pageHeaderContainer":"pageHeaderContainer_f8iPF","pageControls":"pageControls_65PGe","hiddenIcon":"hiddenIcon_MYEiw","revealOnHover":"revealOnHover_QTUA-"}');c();var $3=ct({key:"pageOptionsAtom",default:null});function Zr(e){let t=Xo($3);return t===null?Zw(e):t.layoutOptions}c();var _s=C(O());W();function pE(e){let{lock:t}=e,[o]=zr([wm(t.userId)]),[,n]=R(D),r=Ut(ka,{user:o},[o]);return _s.createElement(Xn,{icon:o?r:void 0,tooltip:_s.createElement(_s.Fragment,null,_s.createElement(A,{style:n.Bold},(o==null?void 0:o.displayName)||"Someone")," is editing this page.")},(i,a)=>_s.createElement(b,{ref:a,...i.events},_s.createElement(S.Lock,{size:E.ICON_M,style:n.textMid})))}var Jl={mobile:"MobileMainTitle",desktop:"MainTitle"},Y3=$.createResponsiveComponent(pr),gke=$.createResponsiveComponent(cE),Z3=$.createResponsiveComponent(ut),gE=ke.memo(function(t){let{space:o,revision:n,page:r,changeRequest:i,readOnly:a,onSubmitDescription:s,analyticsContext:l,lock:u,withDiff:d,toolbar:m}=t,[p,f]=R(D),[,h]=R(Q3),y=Ye(),w=se(),{navigate:k}=ve(),[x,P]=an(),I=ke.useRef(null),_=[f.Description,f.textMuted],M=vo(),T=Zr(r),L=async Ne=>{await M(kt=>{ui(kt,r.key,{title:Xw(Ne)})}),te({...l,type:"edit_page_title",pageKind:r.kind})},q=async Ne=>{await M(kt=>{ui(kt,r.key,{description:Kw(Ne)})}),te({...l,type:"edit_page_description",pageKind:r.kind})},G=Ne=>{Ne.nativeEvent.key==="Enter"&&(Ne.preventDefault(),I.current&&I.current.focus())},U=Ne=>{Ne.nativeEvent.key==="Enter"&&(Ne.preventDefault(),s&&s())},H=()=>{P(async()=>{await M(Ne=>{Zc(Ne,r.key)}),te({...l,type:"edit_add_cover"})})},Y=!T.title,oe=!T.description,ce=Y&&oe||!Y,Ee=Y&&!oe;return ke.createElement(Z,{style:[N.position.relative,N.flex.column,a?N.padding.xlargeTop:xc.pageHeaderContainer,Y&&oe?null:N.margin.largeBottom]},a?null:ke.createElement(Z,{style:[xc.pageControls,xc.revealOnHover,N.margin.smallTop,N.flex.row,N.gap.xsmallColumnGap]},ke.createElement(B,{kind:"default",size:"xsmall",style:[g.Padding.noneLeft],icon:S.Options,onPress:()=>k({screen:{sideSheet:{type:"page"}}})},"Page options"),Fa(r)?null:ke.createElement(B,{kind:"default",size:"xsmall",icon:x?Ce:S.Image,disabled:x,onPress:H},"Page cover")),!a&&(Y||oe)?ke.createElement(Z,{style:[xc.revealOnHover,N.margin.smallTop,N.gap.smallColumnGap]},Y?ke.createElement(Z,{style:[N.flex.alignCenter,N.gap.xsmallColumnGap]},ke.createElement(S.EyeOff.CSS,{style:[xc.hiddenIcon]}),ke.createElement(Hn,{style:[N.text.label,N.textColor.muted]},"Page title hidden")):null,oe?ke.createElement(Z,{style:[N.flex.alignCenter,N.gap.xsmallColumnGap]},ke.createElement(S.EyeOff.CSS,{style:[xc.hiddenIcon]}),ke.createElement(Hn,{style:[N.text.label,N.textColor.muted]},"Page description hidden")):null):null,ke.createElement(Z,{style:[N.flex.row,N.flex.justifySpaceBetween,N.flex.alignCenter,Y&&oe?N.margin.autoLeft:null]},Y?null:ke.createElement(b,{style:[v.directionRow,v.flex1]},ke.createElement($.View,{style:[v.directionRow,v.justifyContentEnd,v.alignCenter],mobileStyle:h.emojiWrapperMobile,desktopStyle:h.emojiWrapperDesktop},r.emoji||!a?ke.createElement($.View,{mobileStyle:[Rb.pageEmojiRelative,g.Padding.noneLeft,g.Padding.mediumRight],desktopStyle:[Rb.pageEmojiAbsolute,g.Padding.mediumLeft,g.Padding.mediumRight]},ke.createElement(YT,{analyticsContext:l,page:r,readOnly:a,size:E.ICON_XL})):null),a?ke.createElement(b,{style:[v.flex1]},ke.createElement(Z3,{testID:"page.title",tag:"h1",style:[f.text],selectable:!0,mobileStyle:f[Jl.mobile],desktopStyle:f[Jl.desktop]},r.title)):ke.createElement(Y3,{key:r.key,testID:"page.title",component:fE,value:r.title,maxLength:100,style:[f.text,v.flex1,f.Body],onChangeText:L,onKeyPress:G,placeholder:w("untitled_page"),placeholderTextColor:p.colors.text.muted,mobileStyle:f[Jl.mobile],desktopStyle:f[Jl.desktop]}),u?ke.createElement(ke.Suspense,{fallback:null},ke.createElement(b,{style:[v.directionRow,v.alignCenter,g.Margin.mediumRight]},ke.createElement(pE,{lock:u}))):null),y||!m?null:ce&&ke.createElement(m,{space:o,changeRequest:i,revision:n,page:r,analyticsContext:l,readOnly:a})),ke.createElement(Z,{style:[N.flex.row,N.flex.justifySpaceBetween,N.flex.alignCenter,Y&&oe?N.margin.autoLeft:null]},oe?null:ke.createElement($.View,{style:[Y?null:g.Margin.mediumTop,v.flex1]},a?r.description?ke.createElement(b,null,ke.createElement(A,{style:_,selectable:!0},r.description)):d?ke.createElement($.View,{style:Rb.pageDescriptionDiffPlaceholder,mobileStyle:"hidden"}):null:ke.createElement(pr,{key:r.key,ref:I,component:fE,value:r.description,style:_,maxLength:200,onChangeText:q,onSubmitEditing:s,onKeyPress:U,placeholder:w("page_description"),placeholderTextColor:p.colors.text.muted})),y||!m?null:Ee&&ke.createElement(m,{space:o,changeRequest:i,revision:n,page:r,analyticsContext:l,readOnly:a})),null)}),fE=ke.forwardRef(function(t,o){let{style:n,...r}=t,[i,a]=ke.useState(void 0);return ke.createElement(Tr,{ref:o,...r,multiline:!0,style:[n,typeof i<"u"?{height:i}:void 0],onContentSizeChange:l=>{l.nativeEvent.contentSize.height!==i&&a(l.nativeEvent.contentSize.height)}})}),Rb=X.create({pageEmojiRelative:{position:"relative"},pageEmojiAbsolute:{position:"absolute"},pageDescriptionDiffPlaceholder:{height:op.mediumLarge}}),Q3=z.create({emojiWrapperMobile:{width:"auto",height:He[Jl.mobile].lineHeight},emojiWrapperDesktop:{height:He[Jl.desktop].lineHeight},pageBodyDesktopLeftMargin:{marginLeft:Et},pageBodyMobileLeftMargin:{marginLeft:qo}});c();var Bt=C(O());W();var hE=$.createResponsiveComponent(Sa),yE=F.createInteractiveComponent(mr),vE=Bt.memo(function(t){let{revision:o,page:n,style:r}=t,{getNavigationLinkProps:i}=ve(),[,a]=R(D),s=se(),l=Ye(),u=F.useInteractiveComponent(S.ArrowLeft),d=F.useInteractiveComponent(S.ArrowRight),{desktopSidebarWidth:m}=Bt.useContext(hi),{nextPage:p,previousPage:f}=Bt.useMemo(()=>{let x=J3(o),P=x.findIndex(I=>I.key===n.key);return P===-1?{nextPage:null,previousPage:null}:{nextPage:Pb(x,P,1),previousPage:Pb(x,P,-1)}},[o,n.key]),{previousLinkProps:h,previousGroup:y,nextLinkProps:w,nextGroup:k}=Bt.useMemo(()=>({previousLinkProps:f?i({screen:{page:xt(o,f.key)}}):void 0,previousGroup:f?Mu(o,f.key):null,nextLinkProps:p?i({screen:{page:xt(o,p.key)}}):void 0,nextGroup:p?Mu(o,p.key):null}),[p,f]);return!p&&!f||l?null:Bt.createElement($.View,{style:r,desktopStyle:v.directionRow,customBreakpointsStyles:{[Os(m)]:v.directionColumn}},f?Bt.createElement(hE,{...h,style:[v.alignCenter,g.Padding.medium,v.flex1],desktopStyle:p?g.Margin.smallRight:null,customBreakpointsStyles:p?{[Os(m)]:[g.Margin.noneRight,g.Margin.smallBottom]}:void 0},Bt.createElement(b,{style:[g.Margin.mediumRight]},Bt.createElement(u.Child,{size:E.XS,style:[a.textMuted],hoverStyle:a.primary})),Bt.createElement(b,{style:[v.flex1,v.alignEnd]},Bt.createElement(b,null,Bt.createElement(A,{style:[a.Caption,a.textMuted]},y&&y.kind==="group"?`${y.title} - `:"",s("previous"))),Bt.createElement(yE.Child,{style:[a.Body,a.Medium,a.text],activeStyle:a.primary},f.title))):null,p?Bt.createElement(hE,{...w,style:[v.alignCenter,g.Padding.medium,v.flex1],desktopStyle:f?g.Margin.smallLeft:null,customBreakpointsStyles:f?{[Os(m)]:[g.Margin.noneLeft,g.Margin.smallTop]}:void 0},Bt.createElement(b,{style:[v.flex1]},Bt.createElement(b,null,Bt.createElement(A,{style:[a.Caption,a.textMuted]},s("next"),k&&k.kind==="group"?` - ${k.title}`:"")),Bt.createElement(yE.Child,{style:[a.Body,a.Medium,a.text],activeStyle:a.primary},p.title)),Bt.createElement(b,{style:[g.Margin.mediumLeft]},Bt.createElement(d.Child,{size:E.XS,style:[a.textMuted],hoverStyle:a.primary}))):null)});function J3(e){let t=[];function o(n){var i;let r=e.pages[n];t.push(r),(i=r.pages)!=null&&i.length&&r.pages.forEach(o)}return e.rootPages.forEach(o),t}function Pb(e,t,o){let n=e[t+o];if(n)return n.kind!=="sheet"?Pb(e,t+o,o):n}c();var Eo=C(O());W();var eA=$.createResponsiveComponent(Sa),tA=F.createInteractiveComponent(mr);function bE(e){let{subPages:t,revision:o}=e,{desktopSidebarWidth:n}=Eo.useContext(hi),r=se(),[,i]=R(D);return Ye()?null:Eo.createElement(b,null,Eo.createElement(A,{style:[i.Body,i.text]},r("page_articles_section")),Eo.createElement($.View,{style:[g.Padding.largeTop,v.wrap],desktopStyle:v.directionRow,customBreakpointsStyles:{[Os(n)]:v.directionColumn}},t.map((s,l)=>Eo.createElement(Eo.Suspense,{fallback:Eo.createElement(SE,{page:s,revision:o,index:l,totalPageNumber:t.length}),key:s.key},Eo.createElement(oA,{page:s,revision:o,index:l,totalPageNumber:t.length})))))}function oA(e){let{page:t,revision:o}=e,n=jn(t.kind==="link"?t.ref:void 0,{space:o.space,revision:o.key});return Eo.createElement(SE,{...e,contentRef:n})}function SE(e){let{page:t,revision:o,index:n,totalPageNumber:r,contentRef:i}=e,{desktopSidebarWidth:a}=Eo.useContext(hi),{getNavigationLinkProps:s}=ve(),[,l]=R(D),u=t.emoji?F.createInteractiveComponent(pt(_o,{code:t.emoji})):null,d=F.createInteractiveComponent((i==null?void 0:i.secondaryIcon)||Ce),m=r%2===0;return Eo.createElement(eA,{...t.kind==="link"?i?ps(i):{}:s({screen:{page:xt(o,t.key)}}),style:[v.alignCenter,g.Padding.medium,v.flex1,{minWidth:`calc(50% - ${g.small}px)`}],desktopStyle:[n%2===0?m?g.Margin.smallRight:null:g.Margin.smallLeft,n<r-(m?2:1)?g.Margin.smallBottom:null],customBreakpointsStyles:{[Os(a)]:[g.Margin.noneHorizontal,n<r-1?g.Margin.smallBottom:null]}},u?Eo.createElement(b,{style:[g.Margin.mediumRight]},Eo.createElement(u.Child,{size:E.XS,style:[l.textMuted],hoverStyle:l.primary})):null,Eo.createElement(tA.Child,{style:[l.Body,l.Medium,l.text],activeStyle:l.primary},t.title),t.kind==="link"&&(!i||i.secondaryIcon)?Eo.createElement(b,{style:[g.Margin.mediumLeft]},Eo.createElement(d.Child,{size:E.XS,style:[l.textMuted],hoverStyle:l.primary})):null)}c();var wr=C(O());W();c();var Tb=C(O());function eu(e){let{space:t,changeRequest:o,analyticsContext:n,page:r,onClose:i}=e;return sl({screen:"space_import",...n},[t.key,o==null?void 0:o.key]),Tb.createElement(Gn,null,Tb.createElement(wE,{target:{page:r,space:t,changeRequest:o==null?void 0:o.key},onClose:i}))}function CE(e){let{space:t,changeRequest:o,analyticsContext:n}=e,{navigate:r}=ve(),[i,a]=R(nA),s=Ye(),[l,u]=wr.useState(null);return s?null:wr.createElement(wr.Fragment,null,wr.createElement(ht,null,l==="import"?wr.createElement(eu,{space:t,changeRequest:o,analyticsContext:n,onClose:()=>{u(null)}}):null),wr.createElement(b,{style:[g.Padding.smallHorizontal,g.Padding.smallVertical,g.Margin.mediumTop,a.blankslateBox,v.directionRow,v.wrap]},wr.createElement(B,{icon:S.Download,size:"medium",style:g.Margin.xsmallRight,iconTint:i.colors.primary.main,onPress:()=>{u("import"),te({...n,type:"space_blank_slate_initiate",kind:"import"})}},"Import content"),qs(t)?wr.createElement(B,{icon:S.Page,size:"medium",style:g.Margin.xsmallRight,iconTint:i.colors.primary.main,onPress:()=>{r({overlay:{type:"template",space:t.key,organization:t.organization}}),te({...n,type:"space_blank_slate_initiate",kind:"template"})}},"Use a template"):null,wr.createElement(B,{icon:S.GitHub,size:"medium",style:g.Margin.xsmallRight,iconTint:i.colors.primary.main,onPress:()=>{r({screen:{sideSheet:{type:"gitsync"}}}),te({...n,type:"space_blank_slate_initiate",kind:"gitsync"})}},"Sync with GitHub / GitLab"),qs(t)?wr.createElement(B,{icon:S.User,size:"medium",style:g.Margin.xsmallRight,iconTint:i.colors.primary.main,onPress:()=>{r({screen:{sideSheet:{type:"share",tab:"invite"}}}),te({...n,type:"space_blank_slate_initiate",kind:"invite-members"})}},"Add members"):null))}var nA=z.create({blankslateBox:e=>({borderRadius:E.RADIUS_L,borderWidth:1,borderColor:e.colors.border.mid})});c();var Is=C(O());c();var Si=C(O());W();var iA=F.createInteractiveComponent(mr),aA={[Ae]:null,[Fe]:g.Margin.smallLeft,[ko]:null},hxe=Si.memo(function(t){let{sections:o,activeSection:n}=t,[,r]=R(D),[,i]=R(kE),a=se();return Si.createElement(b,{style:[i.pageOutline]},Si.createElement(b,{style:[v.directionRow,v.alignCenter,g.Padding.largeHorizontal,g.Margin.smallBottom]},Si.createElement(A,{style:[r.GroupTitle,r.textMuted,r.Bold]},a("outline"))),o.map(s=>Si.createElement(sA,{key:s.key,section:s,active:n===s.key})))});function sA(e){let{section:t,active:o}=e,[,n]=R(D),[,r]=R(kE),{navigateToHash:i}=ve();return Si.createElement(F.TouchableOpacity,{style:[v.directionRow,g.Padding.largeHorizontal,r.sectionItem,o&&r.sectionItemActive],onPress:()=>{i(t.anchor)}},t.tag?Si.createElement(qn,{backgroundColor:gc[t.tag]||K.orange.base,style:[r.sectionTag,g.Margin.xsmallRight,v.alignSelfCenter]},Si.createElement(A,{style:[n.textInsideColor,n.MobileCaption,n.Bold,n.Uppercase]},t.tag)):null,Si.createElement(iA.Child,{style:[n.Label,n.textMid,t.type&&aA[t.type],o&&n.primary],hoverStyle:n.primary},t.title))}var kE=z.create({pageOutline:e=>({borderLeftWidth:1,borderLeftColor:e.colors.border.main,maxWidth:xs}),sectionItem:{paddingTop:g.xsmall,paddingBottom:g.xsmall,marginLeft:-1,borderLeftWidth:2,borderLeftColor:"transparent",width:"fit-content",maxWidth:"100%"},sectionItemActive:e=>({borderLeftColor:e.colors.primary.main}),sectionTag:{borderRadius:E.XXS,height:E.XXS,paddingHorizontal:g.small,justifyContent:"center"}});function xE(e,t){let o=g.large,n=e.length,r=Math.floor(Math.log2(n)+1),i=0,a=n-1,s=Math.ceil((i+a)/2),l=-1,u=null;for(let d=0;d<r;d++){let m=e[s];if(!m)return null;let p=$a(m.key),f=p?p.getBoundingClientRect().top-t:null;if(f===null||f>o)a=s,s=Math.floor((i+a)/2);else{if(f>=-o&&f<=o)return e[s].key;f<o&&((u===null||f>u)&&(u=f,l=s),i=s,s=Math.ceil((i+a)/2))}}return l!==-1?e[l].key:null}var OE=.9;function _E(e,t){let[o,n]=Is.useState(null),r=Pp(),i=Is.useRef(0),a=Is.useRef(null),s=Is.useRef(new Map),l=e.length>1,u=cA(()=>{typeof i.current!="number"&&(i.current=t.current.getBoundingClientRect().top);let m=xE(e,i.current);m!==o&&n(m)},500),d=m=>{m.forEach(f=>{let h=f.target.getAttribute("data-key");h&&s.current.set(h,f.isIntersecting&&f.intersectionRatio>=OE)});let p=Array.from(s.current.entries()).find(([,f])=>f);p&&n(p[0])};return Is.useEffect(()=>{var m;if(!(!(t!=null&&t.current)||!l)){if(!r)(m=t.current)==null||m.addEventListener("scroll",u);else{let p=e.map(f=>$a(f.key)).filter(me);a.current=new IntersectionObserver(d,{rootMargin:`-${To.PUBLIC_DESKTOP_HEADER_HEIGHT}px 0px -40% 0px`,threshold:OE}),p.forEach(f=>{var h;(h=a.current)==null||h.observe(f)})}return()=>{var p,f;(p=t.current)==null||p.removeEventListener("scroll",u),(f=a.current)==null||f.disconnect()}}},[t==null?void 0:t.current,l]),o}function cA(e,t){let o=!1;return(...n)=>{o||(e.apply(this,n),o=!0,setTimeout(()=>o=!1,t))}}var lA=lt("sheet"),uA=$.createResponsiveComponent(fe);function Jg(e){return e.readOnly?re.createElement(dA,{...e}):re.createElement(mA,{...e})}function dA(e){let[t]=jg(e.space.key,e.page);return re.createElement(IE,{...e,value:t,onChange:()=>{}})}function mA(e){var a;let{onChange:t,value:o,crashed:n}=jT(e),r=FT(e.space.key,(a=e.changeRequest)==null?void 0:a.key,e.page.key);return re.createElement(IE,{...e,value:o,onChange:t,documentReadOnly:n||!!r,lock:r})}function IE(e){var fw,gw;let{space:t,revision:o,page:n,changeRequest:r,readOnly:i=!0,withComments:a,value:s,onChange:l,lock:u,analyticsContext:d,withToC:m,outline:p,toolbar:f,footer:h,withDiff:y,scrollRef:w,sideColumnStickyTop:k}=e,x=i||!!e.documentReadOnly,P=re.useRef(null),I=ET(),{mode:_}=re.useContext(Fo),{pages:M,setContentDiffPage:T}=re.useContext(KT),L=qi(),q=vo(),G=bO({spaceId:t.key}),U=se(),H=Ye(),Y=re.useRef(),{sections:oe,sectionIDs:ce}=re.useMemo(()=>{let Ke=fC(s.document,Y.current),Ho=Fm(s.document,Ke).filter(lr=>lr.parentType==="document"&&lr.type!==null&&[Ae,Fe,ko].includes(lr.type));return{sectionIDs:Ke,sections:Ho}},[s.document,Y]);Y.current=ce;let Ee=L.screen.type==="space"&&((fw=L.screen.sideSheet)==null?void 0:fw.type)==="comments"?{commentKey:L.screen.sideSheet.comment,nodeKey:L.screen.sideSheet.node}:void 0;re.useEffect(()=>{var Ke;Ee!=null&&Ee.commentKey&&(Ee!=null&&Ee.nodeKey)&&((Ke=$a(Ee.nodeKey))==null||Ke.scrollIntoView())},[Ee==null?void 0:Ee.commentKey]);let Ne=Ke=>{I({pageKey:n.key,focus:"page",activity:Ke.typing?"typing":"viewing"})},kt=re.useRef(null),Go=re.useCallback(()=>{let Ke=kt.current;if(!Ke)return;let Ho=Ke.value.change();si(Ho.value.document)||Ho.collapseToStartOf(Ke.value.document),Ho.focus(),l(Ho)},[kt]),Jr=re.useMemo(()=>M.find(Ke=>Ke.page.key===n.key&&Ke.diff),[M,n.key]),ei=Ke=>{l(Ke),!Jr&&r&&!s.document.equals(Ke.value.document)&&T({diff:"modified",page:n})},st=Go,nn=oe.length>1,Ht=!p||H,Dt=_E(oe,w),Bs=gx(),zs=re.useMemo(()=>({space:t.key,revision:o.key,page:n.key}),[t.key,o.key,n.key]),Fn=re.useCallback(Ke=>{te({...d,...Ke})},[d]),Rr=async Ke=>{let Ho=[],lr=await q((dm,mm,u6)=>{Ho=[],u6.forEach(d6=>{let hw=kC(d6,Bs.uid);Ho.push({kind:"file",file:hw.key}),PC(dm,hw)})},()=>Ry({kind:"space_file",space:t.key},Ke));return lr&&Ho.forEach((dm,mm)=>{lA.info(`file ${dm.file} uploaded to revision ${lr.key} (${mm+1} / ${Ho.length})`)}),Ho},V=async(Ke,Ho)=>{await q((lr,dm,mm)=>{RC(lr,Ke.file,mm)},async()=>{let[lr]=await Ry({kind:"space_file",space:t.key},[Ho]);return lr})},{desktopSidebarWidth:J}=re.useContext(hi),{customBreakpointsOutlineStyles:j,customBreakpointsPageBodyStyles:ee}=re.useMemo(()=>{let Ke=_==="public-content"?1280:qd(2,J);return{customBreakpointsOutlineStyles:{[Ke]:"hidden"},customBreakpointsPageBodyStyles:{[Ke]:v.justifyContentCenter}}},[_,J]),we=Sb(J,Zg),ue=o.conflicts&&n.key in o.conflicts.pages,Me=(gw=o.conflicts)==null?void 0:gw.pages[n.key],Be=ue&&o.conflicts&&o.conflicts.pages[n.key],rt=si(s.document),Xt=rt&&Object.keys(o.pages).length===1&&!x,{diffs:kn}=re.useContext(Wd),cr=kn.has(n.key),Pr=UT(t.key,n),[ca,ly]=iE({isDiffViewEnabled:y,isCommentMarginVisible:a,isFullPage:m||Ht}),_u=lO(),uy=re.useCallback(Ke=>{Ke?_u.highlight(Ke,{highlighting:!1,postButton:!0}):_u.highlight(null)},[_u]),dw=!L.overlay&&rt&&!x;re.useEffect(()=>{dw&&Go()},[n.key,dw,Go]);let dy=Zr(n),mw=Fa(n)&&!!dy.cover,pw=dy.coverSize,c6=!dy.pagination||t.showPagination===!1,l6=re.useCallback(()=>{let{data:Ke}=ox({operationId:"listSpaceIntegrationsBlocks",params:{spaceId:t.key},query:{}}),Ho={};return Ke.forEach(lr=>{Ho[lr.name]=lr.blocks}),Ho},[t.key]);return re.createElement(re.Fragment,null,mw&&pw==="full"?re.createElement(Z,{style:_==="public-content"&&!m?ZT.pageCoverBleedFull:null},re.createElement(Ib,{revision:o,page:n,readOnly:i,analyticsContext:d})):null,re.createElement(b,{ref:P,style:[v.flex1,v.directionRow]},re.createElement(nE,{style:[N.flex.flex1,N.flex.column]},mw&&pw==="hero"?re.createElement(Ql,null,re.createElement(Z,{style:[N.flex.flex1,N.margin.mediumTop]},re.createElement(Ib,{revision:o,page:n,readOnly:i,analyticsContext:d,rounded:!0}))):null,re.createElement(fe,{tag:"main",style:[v.flex1,v.directionColumn]},re.createElement(Ql,null,re.createElement($.View,{style:[v.flex1,v.directionRow],customBreakpointsStyles:ee},re.createElement(b,{style:[v.flex1]},re.createElement(gE,{space:t,revision:o,page:n,changeRequest:r,readOnly:i,onSubmitDescription:st,analyticsContext:d,lock:u,withDiff:y,toolbar:f})))),re.createElement($.View,{desktopStyle:H?void 0:g.Padding.xlargeBottom},ue?re.createElement(ca,{renderMode:"marginless-centered"},re.createElement(lE,{space:t,page:n,revision:o,document:s.document,hasBeenResolved:!Be,pageIsDiff:y,conflictType:Me,analyticsContext:d})):null,x&&rt&&n.pages.length?re.createElement(ca,{renderMode:"centered"},re.createElement(bE,{subPages:n.pages.map(Ke=>o.pages[Ke]),revision:o})):re.createElement(SO,{withComments:a,spaceKey:t.key,pageKey:n.key,changeRequestKey:r==null?void 0:r.key},re.createElement(RE,{ref:kt,value:s,baseValue:Pr,onActivity:Ne,onChange:ei,readOnly:x,isDiff:cr,logAnalyticsEvent:Fn,contentReferenceContext:zs,uploadFiles:Rr,updateFile:V,placeholder:"Enter your content here\u2026",sectionIDs:ce,selectedSection:L.screen.hash||null,blockLayoutComponent:ca,rightGutterComponent:ly,getIntegrationsBlocks:l6,integrationBlocksRemote:G,onBlockHover:uy}),Xt?re.createElement(ca,{renderMode:"centered"},re.createElement(CE,{space:t,revision:o,analyticsContext:d,changeRequest:r})):null),Xt?null:re.createElement(Ql,{style:N.margin.largeTop},re.createElement($.View,{style:[v.flex1,v.directionRow],customBreakpointsStyles:ee},re.createElement(b,{style:[v.flex1]},re.createElement($.View,null,c6?null:re.createElement(vE,{analyticsContext:d,space:t,revision:o,page:n,style:g.Margin.largeBottom}),h||null))))))),Ht?null:re.createElement(uA,{tag:"aside",accessibilityLabel:U("page_outline"),testID:"page.outline",style:[Eb.pageSideColumn,g.Margin.largeVertical,{top:k!==void 0?k:g.large,maxHeight:k!==void 0?`calc(100vh - ${k}px)`:`calc(100vh - ${yb+g.large}px)`},_==="app"?Eb.pageSideMaxWidth:Eb.pageSidePublicMaxWidth],mobileStyle:"hidden",desktopStyle:{width:we},customBreakpointsStyles:j},nn?re.createElement(p,{sections:oe,activeSection:Dt}):null)))}var Eb=X.create({pageSideMaxWidth:{maxWidth:xs},pageSidePublicMaxWidth:{maxWidth:xs},pageSideColumn:{position:"sticky",overflowY:"auto",alignSelf:"flex-start"},pageBody:{maxWidth:or+2*Et},pageBodyWithComments:{maxWidth:or+Et,marginRight:0},pageBodyDesktopRightPadding:{paddingRight:Et},pageBodyMobileRightPadding:{paddingRight:qo},pageBodyPDFRightPadding:{paddingRight:qo},pageBodyDesktopLeftMargin:{marginLeft:Et},pageBodyMobileLeftMargin:{marginLeft:qo},pageBodyPDFLeftMargin:{marginLeft:qo}});c();var Mb=C(O());W();function th(e){let{withPageOutline:t=!0}=e;return Mb.createElement($.View,{style:[v.directionRow,v.justifyContentCenter],desktopStyle:[g.Padding.xxlargeTop,eh.pageSheetLoadingDesktop,t&&eh.pageSheetLoadingDesktopWithOutline],mobileStyle:[g.Padding.mediumTop,eh.pageSheetLoadingMobile]},Mb.createElement(Oo,{size:"xlarge",style:eh.pageBody}))}var eh=X.create({pageSheetLoadingDesktop:{paddingRight:Et,paddingLeft:Et},pageSheetLoadingDesktopWithOutline:{paddingRight:xs+Et},pageSheetLoadingMobile:{paddingLeft:qo,paddingRight:qo},pageBody:{maxWidth:or+2*Et}});c();var fn=C(O());c();var Ue=C(O());W();function PE(e){let{revision:t,analyticsContext:o,page:n,onClose:r}=e,i=Ue.useRef(null),[,a]=R(D),[s,l]=Ue.useState(n.title),[u,d]=Ue.useState(n.emoji),[m,p]=Ue.useState("path"in n&&n.path?n.path:""),[f,h]=Ue.useState("ref"in n?n.ref:void 0),y=vo(),w=Mu(t,n.key),k=w?xt(t,w.key):"",x=n.kind!=="link"?tC(t,n.key,s):"",P=async()=>{await y(M=>{let T=n.kind!=="link"?{title:s,emoji:u,path:m?yy(m):void 0}:{title:s,emoji:u,ref:f};ui(M,n.key,T)}),n.title!==s&&te({...o,type:"edit_page_title",pageKind:n.kind}),m&&n.path!==m&&te({...o,type:"edit_page_path",pageKind:n.kind}),n.emoji!==u&&te({...o,...u?{type:"edit_pick_page_emoji",pageKind:n.kind,emoji:u}:{type:"edit_remove_page_emoji",pageKind:n.kind}}),r()},I=M=>{var T;(T=i.current)==null||T.close(),d(M)},_=Ue.useMemo(()=>u?pt(_o,{code:u}):null,[u]);return Ue.createElement(Vt,{title:"Edit page",onClose:r,footer:Ue.createElement(b,{style:[v.directionRow,v.justifyContentEnd]},Ue.createElement(B,{kind:"secondary",onPress:r,style:g.Margin.smallRight},"Cancel"),Ue.createElement(Zs,{kind:"primary",onPress:P},"Save"))},Ue.createElement(b,{style:[g.Margin.largeBottom]},Ue.createElement(b,{style:[g.Margin.smallBottom]},Ue.createElement(il,null,"Title")),Ue.createElement(b,{style:[v.directionRow,v.alignEnd]},Ue.createElement(b,{style:[g.Margin.mediumRight]},Ue.createElement(Xa,{ref:i,wrapper:Ar,anchor:({ref:M,opened:T,toggle:L})=>Ue.createElement(B,{ref:M,active:T,onPress:L,kind:"secondary",size:"large",icon:_||S.EmojiReaction})},Ue.createElement(sn,{kind:"wide"},Ue.createElement(Yp,{onPick:I,onRemove:u?()=>I(void 0):void 0})))),Ue.createElement(b,{style:[v.flex1]},Ue.createElement(jt,{size:"large",value:s,onChangeText:l,onSubmit:P})))),n.kind==="link"?Ue.createElement(b,null,Ue.createElement(og,{label:"Reference",size:"large",value:f,context:{space:t.space,revision:t.key},onChangeValue:h})):Ue.createElement(b,null,Ue.createElement(jt,{label:"Slug",size:"large",prefix:`${k}/`,value:m,placeholder:x,onChangeText:p,onSubmit:P,feedback:m&&!zw(m)?{type:"warning",message:Ue.createElement(Ue.Fragment,null,"The page slug contains unsupported characters for an URL. Saving will replace it by"," ",Ue.createElement(A,{style:[a.Bold]},yy(m)),".")}:void 0})))}c();var Nn=C(O());c();var wi=C(O());W();function TE(e){let{revision:t,onClose:o,onSubmit:n}=e,[r,i]=wi.useState(""),[a,s]=wi.useState(),l=async()=>{a?await n(jw(a,r)):o()};return wi.createElement(Vt,{title:"Insert link",onClose:o,subtitle:"Insert a link to external content in your content navigation, this link will open in a new tab.",footer:wi.createElement(b,{style:[v.directionRow,v.justifyContentEnd]},wi.createElement(B,{kind:"secondary",onPress:o,style:g.Margin.smallRight},"Cancel"),wi.createElement(Zs,{kind:"primary",onPress:l,disabled:!a},"Insert"))},wi.createElement(b,{style:[g.Margin.largeBottom]},wi.createElement(jt,{autoFocus:!0,label:"Title",size:"large",placeholder:"Enter title to display",value:r,onChangeText:i})),wi.createElement(og,{label:"To",size:"large",placeholder:"Paste in or type a url",value:a,onChangeValue:s,context:{space:t.space,revision:t.key}}))}function EE(e){let{space:t,revision:o,changeRequest:n,analyticsContext:r,parent:i}=e,{navigateToPagePath:a}=ms(),[s,l]=Nn.useState(null),u=vo(),d=Nn.useCallback(async y=>{let w=await u(k=>{Gm(k,i,y)});w&&(te({...r,type:"edit_create_page",pageKind:y.kind}),y.kind!=="link"&&a(xt(w,y.key)))},[u]),m=Nn.useCallback(async()=>{let y=Yw({title:Om(o,"Group")}),w=vy({title:Om(o,"Page")}),k=await u(x=>{Gm(x,i,y),Gm(x,y.key,w)});k&&(te({...r,type:"edit_create_page",pageKind:y.kind}),a(xt(k,w.key)))},[o,u]),p=Nn.useMemo(()=>ne({groups:[{key:"insertPage",commands:[{key:"insertPage.sheet",icon:S.Page,title:"New document page",trigger:async()=>{await d(vy({title:Om(o)}))}},i?null:{key:"insertPage.group",icon:S.AddPageGroup,title:"New group",trigger:async()=>{await m()}},{key:"insertPage.link",icon:S.Link,title:"New link",trigger:()=>{l("link")}}].filter(me)},{key:"insertExisting",commands:[{key:"insertExisting.import",icon:S.Download,title:"Import new pages",trigger:()=>{l("import")}}].filter(me)}]}),[o,i,m,d]),f=()=>{l(null)};return[Nn.createElement(Nn.Fragment,null,Nn.createElement(ht,null,s==="link"?Nn.createElement(TE,{revision:o,onClose:f,onSubmit:async y=>{await d(y),l(null)}}):null),Nn.createElement(ht,null,s==="import"?Nn.createElement(eu,{space:t,changeRequest:n,page:i,analyticsContext:r,onClose:f}):null)),p]}function oh(e,t=[]){let{space:o,revision:n,changeRequest:r,page:i,analyticsContext:a,readOnly:s}=e,[l,u]=fn.useState(null),d=vo(),{getNavigationHref:m,navigateToPage:p}=ms(),{navigate:f}=ve(),h=fn.useContext(Fo),y=se(),w=lp(),[k,x]=EE({space:o,revision:n,changeRequest:r,parent:i.key,analyticsContext:a}),P=Object.keys(n.pages).length>1,I=fn.useMemo(()=>{var M,T,L,q,G;return ne({groups:[s?null:{key:"pageEdit",commands:[i.kind!=="link"?{key:"pageEdit.insert",icon:S.AddPageGroup,title:"Insert subpage",descendant:()=>x}:null,i.kind!=="link"?{key:"pageEdit.import",icon:S.Download,title:"Import subpages",trigger:()=>{u("import")}}:null,i.kind==="sheet"&&!Fa(i)?{key:"pageEdit.addCover",icon:S.Image,title:"Add cover",trigger:async()=>{await d(U=>{Zc(U,i.key)}),te({...a,type:"edit_add_cover"})}}:null,{key:"pageEdit.edit",icon:S.Type,title:i.kind==="link"?"Edit":"Rename",trigger:()=>{u("edit")}},{key:"pageEdit.duplicate",icon:S.PageDuplicate,title:"Duplicate",trigger:async()=>{let U=Vs(),H=await d(Y=>TC(Y,{newKey:U,originalPageKey:i.key}));H&&(te(Qm(o,i,{...a,type:"edit_duplicate_page",pageKind:i.kind})),i.kind!=="link"&&p(H,U))}},i.kind==="sheet"?{key:"pageEdit.options",icon:S.Options,title:"Options",trigger:()=>{f({screen:{sideSheet:{type:"page"}}})}}:null,P?{key:"pageEdit.delete",icon:S.Trashcan,title:"Delete",trigger:()=>{u("delete")}}:null].filter(me)},{key:"pageRead",commands:[i.kind==="sheet"&&(o.hasPDFExport||h.mode!=="public-content")?{key:"pageRead.export",icon:S.PDF,title:y("export_pdf"),testID:"page.exportButton",trigger:()=>{p(n,i.key,{sideSheet:{type:"share",tab:"pdf"}})}}:null,i.kind!=="link"?{key:"pageRead.copyURL",icon:S.Link,title:y("copy_link"),trigger:()=>{let U=m(n,i.key),H=`${window.location.origin}${U}`;w.writeTextAndNotify(H,{title:"Page URL copied to clipboard"})}}:null,i.kind!=="link"&&o.showEditOnGitProvider&&((M=o.git)!=null&&M.url)&&((T=o.git)!=null&&T.installationProvider)&&((L=i.git)!=null&&L.filePath)&&h.mode==="public-content"?{key:"pageRead.editOnGitHub",icon:Bx[(q=o.git)==null?void 0:q.installationProvider],title:y("edit_on_github",zx[(G=o.git)==null?void 0:G.installationProvider]),trigger:()=>{var U,H;window.location.assign(`${(U=o.git)==null?void 0:U.url}/${(H=i.git)==null?void 0:H.filePath}`)}}:null,...t].filter(me)}].filter(me)})},[s,o,n,i,P,h.mode,r,t]),_=()=>{u(null)};return[fn.createElement(fn.Fragment,null,k,fn.createElement(ht,null,l==="edit"?fn.createElement(PE,{revision:n,page:i,analyticsContext:a,onClose:_}):null),fn.createElement(ht,null,l==="delete"?fn.createElement(Qg,{space:o,page:i,revision:n,analyticsContext:a,onClose:_}):null),fn.createElement(ht,null,l==="import"?fn.createElement(eu,{space:o,changeRequest:r,page:i.key,analyticsContext:a,onClose:_}):null)),I]}c();var Lb=C(O());function nh(e,t,o){let n=Ye(),r=ap();Lb.useEffect(()=>{var i;!t.hash&&!n&&r.current&&((i=e==null?void 0:e.current)==null||i.scrollTo(0,0))},[o,!!t.hash,n]),Lb.useEffect(()=>{if(t.hash&&!n){let i=window.document.getElementById(t.hash);i&&i.scrollIntoView({behavior:"auto",block:"start",inline:"nearest"})}},[t.hash,n])}var pA=[{size:25,label:"Small"},{size:50,label:"Medium"},{size:75,label:"Large"},{size:100,label:"Fit"}];function ME(e,t){let o=typeof e=="number"?e:e==null?void 0:e.value,n=typeof e=="number"?"px":e==null?void 0:e.unit;return`${o||100}${n||t}`}function LE(e,t){return typeof e=="number"?`${e}px`:(e==null?void 0:e.unit)==="px"?`${e.value}${e.unit}`:t}async function fA(e,t){let o=e.nodes.toArray().map(i=>{let{ref:a}=i.data.toFrozenObject();return a}),n={url:"",broken:!0},r=o.map(i=>$I(i,t).then(({uri:a})=>typeof a!="string"||a===""?n:{url:a,broken:!1}).catch(()=>n));return Promise.all(r)}function NE(e){let{node:t,parent:o,isSelected:n,attributes:r,editor:i}=e,{readOnly:a}=i,{ref:s,height:l,width:u}=t.data.toFrozenObject(),d=Sg(i,t.key),{contentReferenceContext:m,logAnalyticsEvent:p}=be.useContext(ae),f=rg(s,m),[,h]=R(Nb),y=Ol(),w=F.useInteractiveState(),k=o.nodes.size>1,[{dragging:x},P]=Ki({type:"block",item:{id:t.key,type:"block",blockType:t.type,previewLabel:"Move image"},canDrag:()=>!a,collect:Ee=>({dragging:Ee.isDragging()})}),I=F.useInteractiveState(),[_,M]=be.useState(null),T=xo.getImageAltText(t),L=ME(u,"%"),q=ME(l,"%"),G=LE(l,"auto"),U=LE(u,"100%"),H=()=>{M("alt")},Y=()=>{M(null)},oe=async()=>{if(!f||!f.uri)return;let Ee=await fA(o,m),Ne=o.getChildIndex(t.key);y.open(Ee,Ne)},ce=Ee=>{if(!f)return;p({type:"edit_page_document_edit_block_property",blockType:ai,blockProperty:"size",fromValue:void 0,toValue:Ee.label});let Ne=vA(f,Ee.size);i.change(kt=>{l&&kt.removeDataPathByKey(t.key,["height"]),Ne?kt.insertDataByKey(t.key,["width"],Ne):kt.removeDataPathByKey(t.key,["width"])})};return be.createElement(be.Fragment,null,be.createElement(ht,null,_==="alt"?be.createElement(Hg,{...e,onClose:Y}):null),be.createElement(b,{style:[v.alignCenter,v.flex1]},be.createElement(b,{style:[h.imageWrapper,{maxWidth:L,maxHeight:q}],...w.events,...r},be.createElement(Pt,{...e},f?be.createElement(F.TouchableOpacity,{onPress:oe,style:v.alignCenter},be.createElement(Wo,{width:U,height:G,source:f,accessibilityLabel:T,loading:d?"priority":"lazy",style:[h.image,x&&$e.translucent]})):be.createElement(gA,{accessibilityLabel:T})),a?null:be.createElement(be.Fragment,null,(n||w.hovered)&&!x?be.createElement(hA,{...e,openAltTextModal:H,setSize:ce}):null,be.createElement(Nr,{theme:{color:"dark"}},k?be.createElement(b,{ref:P,style:[h.imageDragHandle,{display:(w.hovered||I.hovered)&&!x?"flex":"none"}],...I.events},be.createElement(S.GrabberVertical,{size:E.ICON_S,style:[h.imageDragHandleIcon]})):null)))),be.createElement(ys,{...e,isSelected:e.isSelected||w.hovered}))}function gA(e){let{style:t,...o}=e,[,n]=R(D),[,r]=R(Nb);return be.createElement(b,{style:[v.alignCenter,v.justifyContentCenter,r.brokenImage,g.Padding.large,t],...o},be.createElement(b,null,be.createElement(S.CloudOff,{size:E.ICON_L,style:[n.textMuted]})),be.createElement(b,{style:[g.Margin.mediumTop]},be.createElement(A,{style:[n.Caption,n.textMuted]},"Could not load image")))}function hA(e){let{editor:t,node:o,openAltTextModal:n,setSize:r}=e,[,i]=R(Nb),a=It(),[s,l]=be.useState(!1),u=async()=>{let[m]=await a.prompt({title:"Replace image",accept:"images",acceptURL:!0});m&&t.change(p=>{p.insertDataByKey(o.key,["ref"],m),p.removeDataPathByKey(o.key,["height"]),p.removeDataPathByKey(o.key,["width"])})},d=()=>{t.change(m=>{o&&ye.isTextRange(m.value.selection)&&!m.value.selection.hasEdgeIn(o)&&m.collapseToStartOf(o),m.focus()}),l(!0)};return be.createElement(be.Fragment,null,be.createElement(b,{style:[i.imageToolbar,v.directionRow,s?i.imageToolbarOpen:null]},s?be.createElement(be.Fragment,null,be.createElement(yA,{onPress:r,...e}),be.createElement(B,{title:"ALT text",size:"small",icon:S.AltText,style:[g.Margin.smallRight],onPress:n}),be.createElement(B,{title:"Replace",size:"small",icon:S.Replace,style:[g.Margin.smallRight],onPress:()=>u()}),be.createElement(B,{size:"small",icon:S.X,onPress:()=>l(!1)})):be.createElement(B,{size:"small",icon:S.MoreVertical,onPress:d})))}function yA(e){let{editor:t,node:o,onPress:n}=e,r=be.useRef(null),i=pA.map(({size:l,label:u})=>({key:`${l}`,title:u,trigger:()=>{n({size:l,label:u})}})),a=de(r),s=()=>{a.open(ne({position:{width:"anchor"},groups:[{key:"image.resize",commands:i}].filter(me)})),t.change(l=>{o&&ye.isTextRange(l.value.selection)&&!l.value.selection.hasEdgeIn(o)&&l.collapseToStartOf(o),l.focus()})};return be.createElement(be.Fragment,null,be.createElement(B,{ref:r,active:a.opened,size:"small",rightIcon:S.ChevronDown,onPress:s},"Size"))}function vA(e,t){let o=e.width||To.PAGE_BODY_MAX_WIDTH;if(t===100)return;let n=Math.min(o,To.PAGE_BODY_MAX_WIDTH);return Math.round(n*(t/100))}var Nb=z.create({imageWrapper:{position:"relative",borderRadius:E.RADIUS_M},imageCaption:{position:"relative",textAlign:"center"},image:{borderRadius:E.RADIUS_M,maxWidth:"100%"},imageToolbar:e=>({position:"absolute",top:g.small,right:g.small,padding:g.small,borderRadius:E.RADIUS_M,borderColor:e.colors.border.mid,borderWidth:1,borderStyle:"solid",backgroundColor:e.colors.background.mid,width:42,overflow:"hidden",transition:"width 50ms ease-in-out"}),imageToolbarOpen:{width:172},imageDragHandle:{position:"absolute",top:g.small,left:g.small,cursor:"grab"},imageDragHandleIcon:{textShadowColor:K.BLACK,textShadowRadius:3,color:K.WHITE},brokenImage:e=>({borderRadius:E.RADIUS_M,backgroundColor:e.colors.background.muted})});c();var Pe=C(O());c();var Db=JSON.parse('{"tooltip":"tooltip_8qsEs","brokenImage":"brokenImage_F5FWc"}');function DE(e){let{editor:t,node:o,parent:n,ancestors:r}=e,i=Sg(t,o.key),a=Pe.useRef(null),s=Mn(n.object==="block"?n:null),l=o.data.get("size","original"),[,u]=R(CA),d=r.some(p=>p.object==="inline"&&p.type===zo),m=p=>Pe.createElement(Vl,{...p,...e,style:[u.inlineFrame,l==="line"?v.alignCenter:null]},Pe.createElement(Pe.Suspense,{fallback:Pe.createElement(Ce,{size:"small"})},Pe.createElement(bA,{node:o,parentLineHeight:s,size:l,ref:a,withPriorityLoading:i})));return t.readOnly?m(d?{}:{onPress:()=>{var p;(p=a.current)==null||p.openInGallery()}}):Pe.createElement(wA,{...e,anchor:m})}var bA=Pe.forwardRef(function(t,o){let{node:n,parentLineHeight:r,size:i,withPriorityLoading:a}=t,s=n.data.get("ref"),l=xo.getImageAltText(n),{contentReferenceContext:u}=Pe.useContext(ae),d=rg(s,u),m=Ol();Pe.useImperativeHandle(o,()=>({openInGallery:()=>{d!=null&&d.uri&&m.open([{url:d.uri}])}}),[d==null?void 0:d.uri]);let p={};i==="original"?p={maxWidth:300}:p={maxHeight:r,height:r,width:"auto"};let f=Pe.createElement(SA,{accessibilityLabel:l});return d?Pe.createElement(Wo,{accessibilityLabel:l,source:d,style:p,errorFallback:f,loading:a?"priority":"lazy"}):f});function SA(e){let{accessibilityLabel:t}=e,[,o]=R(D);return Pe.createElement(Z,{style:Db.brokenImage,"aria-label":t},Pe.createElement(S.CloudOff,{size:E.ICON_M,style:o.textMuted}))}function wA(e){let{node:t,anchor:o,isFocused:n,editor:r}=e,{logAnalyticsEvent:i}=Pe.useContext(ae),a=Pe.useRef(null),s=It(),[l,u]=Pe.useState(null),d=n&&r.value.selection.isCollapsed,[m,p]=Pe.useState(!1);Pe.useEffect(()=>{if(d){p(!0);return}let k=setTimeout(()=>{p(!1)},300);return()=>{clearTimeout(k)}},[d]);let f=()=>{r.change(k=>{k.collapseToStartOf(t).focus()})},h=k=>{r.change(x=>{x.insertDataByKey(t.key,["size"],k),x.collapseToStartOf(t).focus()})},y=()=>{i({type:"edit_page_document_edit_block_type",fromType:Va,toType:ai}),r.change(k=>{xo.replaceInlineImageWithBlock(k,t)})},w=async()=>{let[k]=await s.prompt({title:"Replace image",accept:"images",acceptURL:!0});k&&r.change(x=>{x.insertDataByKey(t.key,["ref"],k)})};return tl(()=>{var k;(k=a.current)==null||k.updatePosition()},[t.data]),Pe.createElement(Pe.Fragment,null,Pe.createElement(ht,null,l==="alt"?Pe.createElement(Hg,{...e,onClose:()=>u(null)}):null),Pe.createElement(zi,{ref:a,opened:d||m,anchor:({ref:k})=>o({ref:k,onPress:f})},Pe.createElement(sn,{kind:"tooltip"},Pe.createElement(Z,{style:Db.tooltip},Pe.createElement(B,{size:"small",title:"Inline size",onPress:()=>h("line"),icon:S.ImageSizeSmall}),Pe.createElement(B,{size:"small",title:"Original size",onPress:()=>h("original"),icon:S.ImageSizeLarge}),Pe.createElement(B,{size:"small",title:"Convert to block",onPress:y,icon:S.ImageSizeBlock}),Pe.createElement(B,{size:"small",title:"Replace",onPress:w,icon:S.Replace}),Pe.createElement(B,{size:"small",title:"ALT text",onPress:()=>u("alt"),icon:S.AltText})))))}var CA=z.create({inlineFrame:{maxWidth:"100%"}});c();var AE=C(O());function BE(e){let{children:t,attributes:o}=e;return AE.createElement(ut,{tag:"strong",style:so.Bold,...o},t)}c();var zE=C(O());function WE(e){let{children:t,attributes:o}=e;return zE.createElement(ut,{tag:"em",style:so.Italic,...o},t)}c();var FE=C(O());function VE(e){let{children:t,attributes:o}=e;return FE.createElement(ut,{tag:"span",style:so.Strikethrough,...o},t)}c();var qE=C(O());function GE(e){let{children:t,attributes:o}=e,[,n]=R(kA);return Ek(),qE.createElement(ut,{tag:"code",style:[n.markCode],...o},t)}var kA=z.create({markCode:e=>({backgroundColor:e.colors.background.muted,borderRadius:e.radiuses.medium,paddingLeft:g.xsmall,paddingRight:g.xsmall,fontFamily:ep})});c();var HE=C(O());function XE(e){let{children:t,mark:o,attributes:n}=e,r=o.data.toObject(),i=Di(),a=r.background&&r.background!=="default",s=r.text&&r.text!=="default",l=a&&i.color==="dark"?{color:K.lightModeText.base}:null;s&&(l=$p.find(d=>d.key===r.text)||null);let u=a?Up.find(d=>d.key===r.background):null;return HE.createElement(ut,{tag:"mark",style:[{color:l?l.color:"inherit",backgroundColor:u?u.color:"inherit"}],...n},t)}c();var ea=C(O());W();c();var Mo=C(O());W();c();var KE=JSON.parse('{"exitHint":"exitHint_xASL-","show":"show_HIlHf"}');function rh(e){let{node:t,anchor:o,isSelected:n,isOnlyNodeSelected:r,isFocused:i,editor:a}=e,{formula:s}=t.data.toFrozenObject(),l=Mo.useRef(null),[u,d]=Mo.useState(!1),[m,p]=Mo.useState(!1),[f,h]=Ai(s,[s]),[,y]=R(D),w=()=>{d(!1),p(!1)},k=()=>{u||(a.change(_=>{Wt(_.value.selection)&&_.collapseToStartOf(t).focus()}),d(!0))};Mo.useEffect(()=>{var _;u&&((_=l.current)==null||_.focus())},[u]),Mo.useEffect(()=>{r&&k()},[r]);let x=_=>{h(_),p(!1)},P=()=>{w(),a.change(_=>{_.blur(),_.insertDataByKey(t.key,["formula"],t.object==="inline"?f.replace(/\n/g," "):f)})},I=()=>{w(),a.change(_=>{var M;if(_.blur(),_.insertDataByKey(t.key,["formula"],t.object==="inline"?f.replace(/\n/g," "):f),t.object==="block")ft(_);else{let T=(M=t.getFirstText())==null?void 0:M.key;if(T){let L=_.value.document.getNextText(T);L&&_.collapseToStartOf(L)}}_.focus()})};return a.readOnly?o({formula:s}):Mo.createElement(jx,{opened:u,onClose:P,wrapper:wk,anchor:({ref:_})=>o({ref:_,isFocused:n&&i||u,onPress:k,formula:f,onError:()=>{p(!0)}})},Mo.createElement(sn,{kind:"tooltip"},Mo.createElement(b,null,Mo.createElement(jt,{ref:l,multiline:!0,numberOfLines:3,autoFocus:!0,selectTextOnFocus:!0,value:f,onChangeText:x,placeholder:"Enter your TeX formula",onSubmit:I,kind:"inverted",textStyle:m?[y.danger]:void 0}),Mo.createElement(xA,null),m?Mo.createElement(Xn,{tooltip:"There is an error in your math formula",preferredPlacement:"bottom"},(_,M)=>Mo.createElement(b,{ref:M,style:OA.blockErrorBadge,..._.events},Mo.createElement(co,{icon:S.ExclamationCircle,kind:"danger"}))):null)))}function xA(){return Mo.createElement(Hn,{style:[KE.exitHint,N.text.label,N.textColor.muted,N.text.notSelectable],contentEditable:!1},"Exit with"," ",Mo.createElement(Fi,{kind:"muted",style:[N.flex.inline],shortcut:Xe.EDITOR_EXIT_BLOCK}))}var OA=X.create({blockErrorBadge:{position:"absolute",bottom:g.small,left:g.small}});c();var ih=gp("f1a718ae5a0b5d0a680254c13fabc0ed4b38f7b4037704dda83756645a7f1027",()=>import("https://app.gitbook.com/public/app/chunks/MathTeXView.lazycomponent-BMFB63U5.min.js"));function $E(e){return ea.createElement(rh,{anchor:({formula:t,onError:o,...n})=>ea.createElement(ge,{...e},ea.createElement(Pt,{...e,...n},ea.createElement(ea.Suspense,{fallback:ea.createElement(Qn,null)},ea.createElement(Ti,{horizontal:!0,showsVerticalScrollIndicator:!1,contentContainerStyle:_A.container},ea.createElement(ih,{formula:t,inline:!1,onError:o}))))),...e})}var _A=X.create({container:{marginLeft:"auto",marginRight:"auto"}});c();var Rs=C(O());function UE(e){return Rs.createElement(rh,{anchor:({formula:t,onError:o,...n})=>Rs.createElement(Vl,{...e,...n},Rs.createElement(Rs.Suspense,{fallback:Rs.createElement(Ce,{size:"small"})},Rs.createElement(ih,{formula:t,inline:!0,onError:o}))),...e})}c();var eo=C(O());c();var jE=C(O()),ah=jE.createContext(new Map);c();c();var zb=C(O());c();c();var Ab=C(O());W();var YE={title:"Checkbox",description:"A single checkbox that can be checked or unchecked.",IconComponent:S.ColumnTypeCheckbox,ValueComponent:IA,onKeyDown:(e,t,o)=>{switch(e){case"backspace":t&&o(!1);break;case"enter":o(!t);break}}};function IA(e){let{value:t,readOnly:o,onValueChange:n,style:r}=e;return Ab.default.createElement(b,{style:[r,v.flex1,v.directionRow,v.alignCenter]},Ab.default.createElement(ja,{value:t,onValueChange:n,readOnly:o}))}c();var Dn=C(O());W();var ZE={title:"Link",description:"Reference another page, file, space or collection.",IconComponent:S.PageLink,ValueComponent:RA};function RA(e){let{value:t,selected:o,readOnly:n,displayMode:r,style:i,onValueChange:a}=e,s=Dn.default.useRef(null),l=de(s),{contentReferenceContext:u}=Dn.default.useContext(ae),d=()=>{l.open(ln(a,u,{accept:["page","file","space","collection","anchor","url"]}))};return Dn.default.createElement(b,{ref:s,style:[v.directionRow,v.wrap,v.flex1,v.alignCenter,i]},Dn.default.createElement(Dn.default.Suspense,{fallback:Dn.default.createElement(Ce,null)},t?Dn.default.createElement(b,{style:[v.flex1,v.directionRow]},Dn.default.createElement(PA,{contentRef:t})):null,(r==="block"||o)&&!n?Dn.default.createElement(B,{icon:S.MoreVertical,title:r!=="block"?"Select target":null,kind:"secondary",size:"small",onPress:d},r==="block"?"Select target":null):null))}function PA(e){let{contentRef:t}=e,{contentReferenceContext:o}=Dn.default.useContext(ae),[n]=Kv([t],o),[,r]=R(D);return n?Dn.default.createElement(b,{style:[v.directionRow,v.alignCenter]},n.icon?Dn.default.createElement(b,{style:[g.Margin.smallRight]},Dn.default.createElement(n.icon,{size:E.ICON_M,style:[r.textMuted]})):null,Dn.default.createElement(Vi,{url:n.href,onPress:i=>{i.preventDefault(),n.open()},style:[r.Body]},n.title)):null}c();var rr=C(O());W();var QE={title:"Files",description:"Attachments allow you to add images, documents, or other files which can then be viewed or downloaded.",IconComponent:S.ColumnTypeFile,ValueComponent:TA};function TA(e){let{value:t,selected:o,readOnly:n,displayMode:r,onValueChange:i,style:a}=e,s=It(),l=async()=>{let d=await s.prompt({title:"Select file"});i([...t,...d.filter(m=>m.kind==="file").map(m=>m.file)])},u=d=>{let m=[...t];m.splice(d,1),i(m)};return rr.default.createElement(b,{style:[v.directionRow,v.wrap,v.flex1,t.length>0?MA.filesList:null,a]},rr.default.createElement(rr.default.Suspense,{fallback:rr.default.createElement(Ce,null)},t.map((d,m)=>rr.default.createElement(EA,{key:d,fileId:d,readOnly:n,onRemove:()=>u(m)}))),(r==="block"||o)&&!n?rr.default.createElement(B,{icon:S.Plus,title:"Add attachment",kind:"secondary",size:"small",onPress:l},r==="block"?"Add file":null):null)}function EA(e){var m,p;let{fileId:t,readOnly:o,onRemove:n}=e,[,r]=R(D),i=F.useInteractiveState(),a=rr.default.useRef(null),s=de(a),l=ho({kind:"file",file:t}),u=(p=(m=l.resolution)==null?void 0:m.extra)==null?void 0:p.file;return rr.default.createElement(We,{onPress:()=>{o?l.href&&Ca(l.href):s.open(ne({groups:[{key:"file",commands:[{key:"remove",title:"Remove",icon:S.Trashcan,trigger:()=>{n()}},u?{key:"download",title:"Download",icon:S.Download,trigger:()=>{Ca(l.href)}}:null].filter(me)}]}))},...i.events},rr.default.createElement(b,{ref:a,style:[v.directionRow,v.alignCenter,g.Margin.smallRight]},rr.default.createElement(b,{style:[g.Margin.smallRight]},rr.default.createElement(Al,{file:u,size:E.BUTTON_S})),rr.default.createElement(b,null,rr.default.createElement(A,{style:[r.Body,i.active||s.opened?r.primary:r.text]},(u==null?void 0:u.name)||"Deleted"))))}var MA=X.create({filesList:{gap:g.small}});c();var Bb=C(O());W();var JE={title:"Number",description:"",IconComponent:S.Numbers,ValueComponent:LA,onKeyDown:(e,t,o)=>{switch(e){case"backspace":o(null);break;case"enter":typeof t!="number"&&o(0);break}}};function LA(e){let{readOnly:t,value:o,onValueChange:n,onSelectionChange:r,style:i}=e,[,a]=R(D),s=[a.Body,NA.numberInput,a.textMid,i],l=()=>{r(!0)};return t?Bb.default.createElement(A,{style:s},typeof o=="number"?String(o):""):Bb.default.createElement(Tr,{style:s,value:typeof o=="number"?String(o):"",onChangeText:u=>n(Number(u)),onFocus:l})}var NA=X.create({numberInput:{height:"auto",padding:0,width:"100%",borderWidth:0}});c();var Oc=C(O());W();var DA=8,AA={info:K.primary.light,merge:K.violet.light,upgrade:K.fuchsia.light,danger:K.scarlet.light},eM={title:"Rating",description:"",IconComponent:S.ColumnTypeRating,ValueComponent:zA,commands:BA,onKeyDown:(e,t,o)=>{switch(e){case"backspace":o(0);break;case"enter":break}}};function BA(e){let{definition:t,setDefinition:o}=e;return[{key:"rating",commands:[{key:"rating.max_value",title:"Max",icon:S.MaximumValue,descendant:()=>ne({search:"Select max rating\u2026",groups:[{key:"max_values",commands:[...Array(5).keys()].map(n=>({key:`${n+1}`,title:`${n+1}`,type:1,selected:t.max===n+1,trigger:()=>{o({...t,max:n+1})}}))}]})}]}]}function zA(e){let{value:t,definition:o,definitionColorKind:n,onValueChange:r,readOnly:i,style:a}=e,[s,l]=R(FA),[u,d]=Oc.default.useState(0),m=[...Array(o.max+1).keys()].slice(1),p=w=>{r(w===t?null:w)},f=w=>{i||d(w)},h=l.circleBase,y=n?{backgroundColor:AA[n]}:l.circleActiveDefault;return Oc.default.createElement(b,{style:[v.directionRow,v.flex1,v.alignCenter,a]},m.map(w=>Oc.default.createElement(F.WithInteractiveState,{key:String(w),onHoverIn:()=>f(w),onHoverOut:()=>f(0)},({events:k})=>Oc.default.createElement(We,{...k,onPress:()=>p(w)},Oc.default.createElement(WA,{size:DA+2*(w-1),style:[u===0&&t&&t>=w||u>=w?y:h,{marginRight:g.xsmall}]})))))}function WA({size:e,style:t}){return Oc.default.createElement(b,{style:[{width:e,height:e,borderRadius:e/2},t]})}var FA=z.create({circleBase:e=>({backgroundColor:e.colors.background.standout}),circleActiveDefault:()=>({backgroundColor:K.primary.light})});c();var tM=C(g6()),gn=C(O());W();var oM={title:"Select",description:"Select allows you to select an option from predefined options in a dropdown.",IconComponent:S.ColumnTypeSelect,ValueComponent:GA,commands:VA,onKeyDown:(e,t,o)=>{switch(e){case"backspace":t.length>0&&o([]);break}}};function VA(e){let{definition:t,setDefinition:o}=e;return[{key:"select",commands:[{key:"select.allow_multiple",title:"Allow multiple",icon:S.OptionAdd,type:2,enabled:t.multiple,trigger:()=>{let[n]=o({...t,multiple:!t.multiple});return n}},{key:"select.options",title:"Manage options",icon:S.OptionManage,descendant:()=>nM(e)}]}]}function nM(e){let{definition:t,setDefinition:o,openModal:n}=e,{options:r}=t,i=r.map((a,s)=>{let l=u=>{let d=[...r];d[s]={...a,label:u},o({...t,options:d})};return{key:a.value,title:a.label,descendant:()=>ne({groups:[{key:"select.options.manageOption",commands:[{key:"editOption",title:"Edit option",icon:S.Edit,trigger:()=>{n(u=>gn.default.createElement(qA,{...u,option:a,onSave:l}))}},{key:"deleteOption",title:"Delete option",icon:S.Trashcan,trigger:()=>{let u=[...r];u.splice(s,1),o({...t,options:u})}}]}]})}});return ne({search:"Search options or type to add",groups:[{key:"select.options.manage",commands:a=>{let s=a.query.text.trim();return a.query.text&&!i.find(l=>l.title===s)?[{key:"add_new_option",title:s,icon:S.Plus,trigger:()=>{let u={value:_m(),label:s,color:"blue"},[,d]=o({...t,options:[...r,u]});return nM(d)}},...i]:i}}]})}function qA(e){let{option:t,definition:o,onSave:n,onClose:r}=e,{options:i}=o,a=[...i].filter(f=>f.label!==t.label),[s,l]=gn.default.useState(t),u=f=>f.length===0?"The label can not be empty":a.filter(y=>y.label===f).length>0?"Another option already exists with this label":null,d=()=>{n(s.label),r()},m=f=>{l({...s,label:f})},p=u(s.label);return gn.default.createElement(Vt,{title:"Edit option",footer:gn.default.createElement(b,{style:[v.directionRow,v.justifyContentEnd]},gn.default.createElement(B,{kind:"secondary",onPress:r,style:g.Margin.smallRight},"Cancel"),gn.default.createElement(B,{kind:"primary",onPress:d,disabled:!!p},"Save")),onClose:r},gn.default.createElement(b,null,gn.default.createElement(jt,{autoFocus:!0,value:s.label,label:"Label",onChangeText:m,feedback:p?{type:"danger",message:p}:void 0})))}function GA(e){let{value:t,selected:o,definition:n,onValueChange:r,definitionColorKind:i,readOnly:a,displayMode:s,style:l}=e,u=gn.default.useRef(null),d=de(u),[,m]=R(D),p=()=>{d.open(HA(n,t,r))},f=gn.default.createElement(b,{style:[v.directionRow,v.wrap,v.flex1,t.length>0?XA.optionsList:null]},t.map(h=>{let y=n.options.find(w=>w.value===h);return y?gn.default.createElement(Gk,{key:y.value,deletable:!a&&n.multiple,kind:i!=null?i:"info",onPress:()=>n.multiple?r(t.filter(w=>w!==y.value)):null,size:"small"},y.label):null}));return a||s==="inline"&&!o?f:gn.default.createElement(We,{ref:u,onPress:p,style:[l]},gn.default.createElement(b,{style:[v.directionRow,v.flex1,v.alignCenter]},f,s==="inline"?gn.default.createElement(b,{style:[g.Margin.smallLeft]},gn.default.createElement(S.ChevronDown,{size:E.ICON_XS,style:m.textMuted})):null))}function HA(e,t,o){return ne({search:"Find an option\u2026",position:{width:"small"},groups:[{key:"options",commands:e.options.map(n=>{let r=t.includes(n.value);return{key:n.value,title:n.label,...e.multiple?{type:1,selected:r}:{selected:void 0},trigger:()=>{o(r?t.filter(i=>i!==n.value):(0,tM.default)(e.multiple?[...t,n.value]:[n.value]))}}})}]})}var XA=X.create({optionsList:{gap:g.small}});c();var sh=C(O());W();var rM={title:"Text",description:"",IconComponent:S.ColumnTypeText,ValueComponent:$A,commands:KA};function KA(e){return[{key:"text.alignment",commands:[{key:"text.alignment",title:"Alignment",descendant:()=>iM(e)}]}]}function iM(e){let{definition:t,setDefinition:o}=e;return ne({groups:[{key:"text.alignment.select",commands:[{label:"Left",value:"left",icon:S.AlignTextLeft},{label:"Center",value:"center",icon:S.AlignTextCenter},{label:"Right",value:"right",icon:S.AlignTextRight}].map(n=>({key:`text.alignment.${n.value}`,title:n.label,type:1,selected:t.textAlignment===n.value,icon:n.icon,trigger:()=>{let[,r]=o({...t,textAlignment:n.value});return iM(r)}}))}]})}function $A(e){let{value:t,definition:o,style:n,readOnly:r}=e;return t==null?null:sh.default.createElement(b,{style:[v.flex1,!r&&UA.editableFragment,n]},sh.default.createElement(ds.Provider,{value:o.textAlignment},sh.default.createElement(Tn,{fragment:t})))}var UA=X.create({editableFragment:{cursor:"text"}});c();var hn=C(O());W();var aM={title:"Users",description:"A user field lets you add collaborators to your records.",IconComponent:S.Users,ValueComponent:YA,commands:jA};function jA(e){let{definition:t,setDefinition:o}=e;return[{key:"users",commands:[{key:"users.allow_multiple",title:"Allow multiple",icon:S.Team,type:2,enabled:t.multiple,trigger:()=>{let[n]=o({...t,multiple:!t.multiple});return n}}]}]}function YA(e){let{value:t,selected:o,readOnly:n,displayMode:r,definition:i,onValueChange:a,style:s}=e,l=hn.default.useRef(null),u=de(l),d=f=>{let h=[...t];h.splice(f,1),a(h)},m=()=>{u.open(ne({search:"Search users\u2026",position:{width:"small"},groups:[{key:"users",commands:f=>tc.read({query:f.query.text,types:["users"]}).map(y=>y.index!=="users"?null:{key:y.object.objectID,title:y.object.displayName,icon:({size:w})=>hn.default.createElement(ka,{user:y.object,size:w}),trigger:()=>{a([...t,y.object.objectID])}}).filter(me)}]}))},p=i.multiple?"Add users":"Replace";return hn.default.createElement(b,{style:[v.flex1,v.directionRow,s]},hn.default.createElement(b,{style:[v.directionRow,v.wrap,v.flex1,t.length>0?QA.filesList:null]},hn.default.createElement(hn.default.Suspense,{fallback:null},t.map((f,h)=>hn.default.createElement(ZA,{key:f,userId:f,readOnly:n,onRemove:()=>d(h)})))),(r==="block"||o)&&!n?hn.default.createElement(B,{ref:l,icon:i.multiple?S.Plus:S.ChevronDown,title:r==="block"?void 0:p,kind:"secondary",size:"small",onPress:m,active:u.opened},r==="block"?p:null):null)}function ZA(e){let{userId:t,readOnly:o,onRemove:n}=e,[,r]=R(D),i=F.useInteractiveState(),a=hn.default.useRef(null),s=de(a),[l]=zr([wm(t)]);return hn.default.createElement(We,{onPress:()=>{s.open(ne({position:{width:"small"},groups:[{key:"user",commands:[o?null:{key:"remove",title:"Remove",icon:S.Trashcan,trigger:()=>{n()}}].filter(me)}]}))},...i.events},hn.default.createElement(b,{ref:a,style:[v.directionRow,v.alignCenter,g.Margin.smallRight]},l?hn.default.createElement(b,{style:[g.Margin.smallRight]},hn.default.createElement(ka,{user:l,size:E.BUTTON_S})):null,hn.default.createElement(b,null,hn.default.createElement(A,{style:[r.Body,i.active||s.opened?r.primary:r.text]},(l==null?void 0:l.displayName)||"Deleted"))))}var QA=X.create({filesList:{gap:g.small}});var Cr={checkbox:YE,number:JE,text:rM,files:QE,select:oM,users:aM,rating:eM,"content-ref":ZE},sM=["text","number","checkbox","select","users","files","content-ref","rating"];function ta(e){return e.title||Cr[e.type].title}function tu(e){let{record:t,definition:o,readOnly:n,displayMode:r="inline",editor:i,nodeKey:a,selected:s,definitionColorKind:l,style:u}=e,{ValueComponent:d}=Cr[e.definition.type],m=h=>{i.change(y=>{Q.setRecordValue(y,a,t.key,o.id,h)})},p=h=>{h&&i.change(y=>{Q.moveTableSelection(y,a,{recordId:t.key,definitionId:o.id})})},f=zb.createElement(d,{editor:i,nodeKey:a,readOnly:n,displayMode:r,selected:s,value:t.value.values[o.id],definitionColorKind:l,definition:o,onValueChange:m,onSelectionChange:p,style:u});return o.type==="text"?f:zb.createElement(fe,{style:v.flex1,onClick:h=>{h.stopPropagation(),p(!0)}},f)}c();function Ma(e,t={}){return ne({search:"Select column type",groups:[{key:"types",commands:sM.map(o=>{let n=Cr[o];return{key:o,icon:n.IconComponent,title:n.title,...t.selectedType?{type:1,selected:t.selectedType===o}:{selected:void 0},trigger:()=>{e(o)}}})}]})}c();var Ps=C(O());W();function cM(e){return e.readOnly?Ps.createElement(JA,{...e}):Ps.createElement(e5,{...e})}function JA(e){let{definition:t,style:o}=e,[,n]=R(D);return Ps.createElement(A,{style:[v.directionRow,t.type==="text"?ch[t.textAlignment]:null,n.Body,n.textMid,n.Medium,ch.columnHeader,o],selectable:!0},ta(t))}function e5(e){let{editor:t,nodeKey:o,definition:n,style:r}=e,[i,a]=R(D),s=p=>{t.change(f=>{Q.renameColumn(f,o,n.id,p)})},l=n.title||"",u=ta(n),d=Ps.useMemo(()=>X.flatten([r,a.Body,a.textMid,a.Medium,ch.columnHeader,n.type==="text"?ch[n.textAlignment]:null]),[r,n]),m=Ps.useMemo(()=>bp(l||u||"",d),[l,u,d]);return Ps.createElement(pr,{component:Tr,value:l,placeholder:u,placeholderTextColor:i.colors.text.muted,onChangeText:s,style:[d,m===void 0?{}:{width:m,maxWidth:"100%"}]})}var ch=X.create({columnHeader:{wordWrap:"anywhere"},left:{textAlign:"left"},center:{textAlign:"center"},right:{textAlign:"right"}});c();var uM=C(O()),lM=["info","merge","upgrade","danger"];function t5(e,t){let{definitionColorsKindsMap:o}=t.reduce((n,r)=>{let i=e[r];if(i.type==="rating"||i.type==="select"){let a=lM[n.colorIndexToBeClaimed];n.definitionColorsKindsMap[r]=a,n.colorIndexToBeClaimed=(n.colorIndexToBeClaimed+1)%lM.length}return n},{colorIndexToBeClaimed:0,definitionColorsKindsMap:{}});return o}function dM(e,t){return uM.default.useMemo(()=>t5(e,t),[e])}c();var xr=C(O());c();c();c();var Wb=C(O());function mM(e){return Wb.default.createElement(Wb.default.Fragment,null)}c();c();function ou(e,t,o={}){let{selected:n=[],search:r="Select columns\u2026",multiple:i=!1,filterDefinition:a=()=>!0}=o;return ne({search:r,groups:[{key:"columns",commands:Object.entries(e).filter(([s,l])=>a(l)).map(([s,l])=>{let u=Cr[l.type],d=n.includes(s);return{key:s,title:ta(l),icon:u.IconComponent,type:1,selected:d,trigger:()=>t(i?d?n.filter(m=>m!==s):[...n,s]:d?[]:[s])}})}]})}c();function Zo(e,t,o,n){let{focus:r="end",definition:i,record:a}=n;if(!o.selection.definitionId)return!1;let s=o.records.findIndex(m=>m.key===o.selection.recordId),l=o.view.columns.indexOf(o.selection.definitionId),u=o.records["relative"in a?s+a.relative:a.absolute],d=o.view.columns["relative"in i?l+i.relative:i.absolute];return!d||!u?!1:(Q.moveTableSelection(e,t,{recordId:u.key,definitionId:d},r),!0)}function _c(e,t,o,n){let r=o.records.findIndex(a=>a.key===o.selection.recordId),i=o.records["relative"in n?r+n.relative:n.absolute];return i?(Q.moveTableSelection(e,t,{recordId:i.key,definitionId:void 0}),!0):!1}var pM=(e,t,o,n)=>{if(!o.selection.definitionId&&o.selection.recordId)return n5(e,t,o,n);if(o.selection.definitionId&&o.selection.recordId)return o5(e,t,o,n)},o5=(e,t,o,n)=>{let r=o.view.cardSize==="medium"?3:2;switch(e){case"move-up":case"move-down":{Zo(n,t,o,{definition:{relative:e==="move-up"?-1:1},record:{relative:0},focus:e==="move-up"?"end":"start"})||Zo(n,t,o,{definition:{absolute:e==="move-up"?o.view.columns.length-1:0},record:{relative:e==="move-up"?-r:r},focus:e==="move-up"?"end":"start"})||(e==="move-up"?Uc(n,t):ft(n,t));break}case"move-left":case"move-right":{Zo(n,t,o,{definition:{absolute:0},record:{relative:e==="move-left"?-1:1},focus:e==="move-left"?"end":"start"});break}case"tab":case"enter":{if(!Zo(n,t,o,{definition:{relative:1},record:{relative:0},focus:"end"})&&!Zo(n,t,o,{definition:{absolute:0},record:{relative:1},focus:"end"})){let i=Q.insertEmptyRecord(n,t.key);Q.moveTableSelection(n,t,{recordId:i,definitionId:o.view.columns[0]},"start")}break}case"backspace":{Zo(n,t,o,{definition:{relative:-1},record:{relative:0},focus:"end"})||Q.moveTableSelection(n,t,{recordId:o.selection.recordId,definitionId:void 0});break}}},n5=(e,t,o,n)=>{let r=o.view.cardSize==="medium"?3:2;switch(e){case"tab":{_c(n,t,o,{relative:1});break}case"shift+tab":{_c(n,t,o,{relative:-1});break}case"move-left":case"move-right":{_c(n,t,o,{relative:e==="move-left"?-1:1})||(e==="move-left"?Uc(n,t):ft(n,t));break}case"move-up":case"move-down":{_c(n,t,o,{relative:e==="move-up"?-r:r})||(e==="move-up"?Uc(n,t):ft(n,t));break}case"backspace":{_c(n,t,o,{relative:-1})||_c(n,t,o,{relative:1}),Q.removeRecord(n,t.key,o.selection.recordId);break}case"enter":{Zo(n,t,o,{definition:{absolute:0},record:{relative:0},focus:"start"});break}}};c();var La=C(O());c();var lh=C(O());function fM(e){let{editor:t,nodeKey:o,defaultTextDefinitionId:n}=e,[,r]=R(r5),[,i]=R(D),a=()=>{t.change(s=>{let l=Q.insertEmptyRecord(s,o);Q.moveTableSelection(s,o,{recordId:l,definitionId:n})})};return lh.createElement(F.TouchableOpacity,{style:[v.flex1,r.cardPlaceholder,v.directionRow,v.alignCenter,v.justifyContentCenter,g.Padding.medium],activeStyle:r.cardPlaceholderActive,onPress:a},lh.createElement(F.Text.Child,{style:[i.Body,i.textMuted],activeStyle:i.primary},lh.createElement(S.Plus,{size:E.ICON_M,style:[g.Margin.smallRight]}),"New card"))}var r5=z.create({cardPlaceholder:e=>({borderRadius:e.radiuses.large,borderColor:e.colors.border.mid,borderWidth:1,borderStyle:"dashed"}),cardPlaceholderActive:e=>({borderColor:e.colors.primary.main})});c();var yn=C(O());W();c();var uh=JSON.parse('{"targetCard":"targetCard_YoeqR","controlButtons":"controlButtons_l18tz","grab":"grab_y1-pK","grabbing":"grabbing_fDPig"}');c();var oa=C(O());W();function gM(e){var P;let{nodeKey:t,editor:o,record:n,view:r,visible:i,onExpand:a,dragHandleRef:s,isDragging:l}=e,u=oa.useRef(null),d=Dr(u,s),m=de(u),p=It(),{contentReferenceContext:f}=oa.useContext(ae),h=r.coverDefinition?((P=n.value.values[r.coverDefinition])==null?void 0:P.length)>0:!1,y=r.targetDefinition?!!n.value.values[r.targetDefinition]:!1,w=async()=>{let[I]=await p.prompt({title:"Select file",accept:"images",acceptURL:!1});!I||I.kind!=="file"||o.change(_=>{Q.cards.setCardCoverForRecord(_,t,n.key,I)})},k=()=>ln(I=>{o.change(_=>{Q.cards.setCardTargetForRecord(_,t,n.key,I)})},f,{accept:["page","file","space","collection","anchor","url"]}),x=I=>{I.preventDefault(),I.stopPropagation(),m.open(ne({groups:[{key:"actions",commands:[{key:"actions.target",icon:S.PageLink,...y?{title:"Target link",descendant:()=>ne({groups:[{key:"target",commands:[{key:"target.set",title:"Replace target",icon:S.Replace,trigger:()=>k()},{key:"target.remove",title:"Remove target",icon:S.Trashcan,trigger:()=>{o.change(_=>{Q.cards.removeCardTargetForRecord(_,t,n.key)})}}]}]})}:{title:"Add target link",trigger:()=>k()}},{key:"actions.cover",icon:S.Image,...h?{title:"Cover",descendant:()=>ne({groups:[{key:"cover",commands:[{key:"cover.set",title:"Replace cover",icon:S.Replace,trigger:()=>{w()}},{key:"cover.remove",title:"Remove cover",icon:S.Trashcan,trigger:()=>{o.change(_=>{Q.cards.removeCardCoverForRecord(_,t,n.key)})}}]}]})}:{title:"Add cover",trigger:()=>{w()}}},{key:"actions.delete",title:"Delete",icon:S.Trashcan,trigger:()=>{o.change(_=>{Q.removeRecord(_,t,n.key)})}}]}]}))};return oa.createElement(no,{onPressIn:I=>{I.preventDefault(),I.stopPropagation()}},oa.createElement(Z,{style:[N.flex.row,N.flex.alignCenter,uh.controlButtons,l&&N.opacity.translucent],inlineStyle:m.opened||i?{opacity:1}:void 0},oa.createElement(lo,{ref:d,kind:"secondary",size:"small",leadingIcon:S.GrabberVertical.CSS,iconOnly:!0,rounded:!0,label:"Drag card",tooltipTitle:l?void 0:`Click for options.
Drag to move.`,onClick:x,preventFocusOnPress:!0,style:{cursor:l?"grabbing":"grab"}}),oa.createElement(Z,{style:[N.gap.smallColumnGap,N.margin.autoLeft]},oa.createElement(B,{kind:"secondary",size:"small",rounded:!0,icon:S.Maximize,onPress:a,title:"Open card",tooltipDelay:300}))))}c();var Fb=C(O());W();function hM(e){var a,s;let{coverRef:t}=e,[,o]=R(i5),n=ho(t),r=(s=(a=n.resolution)==null?void 0:a.extra)==null?void 0:s.file,i=n&&r&&qa(r)?gi(r.downloadURL,{width:371}):null;return i?Fb.createElement(b,{style:o.cardCover},Fb.createElement(vw,{source:{uri:i},style:o.cardImage})):null}var i5=z.create({cardCover:e=>({backgroundColor:e.colors.background.muted}),cardImage:{width:"100%",aspectRatio:16/9}});function yM(e){var Y,oe;let{nodeKey:t,definition:o,editor:n,readOnly:r,record:i,view:a,selected:s,isLastInRow:l,beforeOrderIndex:u,afterOrderIndex:d,onExpand:m}=e,[,p]=R(s5),[,f]=R(D),[h,y]=yn.useState(),w=gt(h),k=yn.useRef(null),x={type:"table-record",id:i.key,blockKey:t,previewLabel:"Move card"},[{dragging:P},I]=ls({type:x.type,item:x,canDrag:()=>!r,collect:ce=>({dragging:ce.isDragging()})}),[_,M]=En({accept:[x.type],drop:(ce,Ee)=>{Ee.didDrop()||n.change(Ne=>{Q.moveRecord(Ne,t,ce.id,w.current==="before"?{before:u,after:i.value.orderIndex}:{before:i.value.orderIndex,after:d})})},hover:(ce,Ee)=>{if(!Ee.canDrop())return;let Ne=a5(Ee,k);h!==Ne&&y(Ne)},canDrop:ce=>i.key!==ce.id&&t===ce.blockKey,collect:ce=>({higlighted:ce.isOver()&&ce.canDrop()})}),T=M(k),L=a.targetDefinition?i.value.values[a.targetDefinition]:void 0,q=ho(L),G=()=>{n.change(ce=>{Q.moveTableSelection(ce,t,{recordId:i.key}),ce.focus()})},U=a.coverDefinition&&((Y=i.value.values[a.coverDefinition])!=null&&Y[0])?(oe=i.value.values[a.coverDefinition])==null?void 0:oe[0]:null,H=yn.createElement(b,{style:[v.flex1,g.Padding.medium,!U&&!r&&g.Margin.mediumVertical,!r&&p.editableArea]},a.columns.map((ce,Ee)=>{let Ne=o[ce],kt=yn.createElement(tu,{record:i,selected:!1,definition:Ne,nodeKey:t,editor:n,readOnly:r});return yn.createElement(b,{key:ce,style:[Ee<a.columns.length-1?g.Margin.smallBottom:null]},a.hideColumnTitle?null:yn.createElement(b,null,yn.createElement(A,{style:[f.Label,f.textMid]},Ne.title)),kt)}));return yn.createElement(Jv,{style:[v.flex1],readOnly:r,selected:s,onSelect:G},yn.createElement(Z,{style:[uh.targetCard,N.flex.flex1,P&&N.opacity.translucent,Pk,{[mp]:_.higlighted&&(!l||l&&h==="before"),[nl]:_.higlighted&&l&&h==="after"}],ref:T},yn.createElement(Sa,{style:[v.flex1,v.directionColumn],...L?{component:F.TouchableOpacity,href:r?q.href:void 0,onPress:ce=>{ce.preventDefault(),q==null||q.open()}}:{component:F.View}},U?yn.createElement(hM,{coverRef:{kind:"file",file:U}}):null,r?H:yn.createElement(no,{onPressIn:ce=>{ce.preventDefault(),ce.stopPropagation()}},H),r?null:yn.createElement(gM,{nodeKey:t,editor:n,record:i,view:a,visible:s,onExpand:m,dragHandleRef:I,isDragging:P}))))}function a5(e,t){if(!(t!=null&&t.current))return;let o=t.current.getBoundingClientRect(),n=.5*(o.right-o.left),r=e.getClientOffset();return r?r.x-o.left<n?"before":"after":void 0}var s5=z.create({editableArea:{cursor:"text"}});function vM(e){let{nodeKey:t,editor:o,readOnly:n,definition:r,records:i,view:a,selection:s,openRecord:l}=e,u=ol(),d=La.useMemo(()=>a.columns.find(f=>r[f].type==="text")||void 0,[a.columns,r]),m=La.useMemo(()=>{switch(a.cardSize){case"medium":return{mobile:1,tablet:2,desktop:3};case"large":return{mobile:1,tablet:1,desktop:2};default:De(a.cardSize)}},[a.cardSize]),p=La.useCallback(({item:f,index:h})=>f.key==="new"?La.createElement(fM,{editor:o,nodeKey:t,defaultTextDefinitionId:d}):La.createElement(yM,{nodeKey:t,editor:o,readOnly:n,definition:r,record:f,view:a,isLastInRow:m[u]===1||(h+1)%m[u]===0,beforeOrderIndex:h>0?i[h-1].value.orderIndex:void 0,afterOrderIndex:h<i.length-1?i[h+1].value.orderIndex:void 0,selected:!s.definitionId&&s.recordId===f.key,onExpand:()=>l(f.key)}),[t,o,n,r,a,s.recordId,!!s.definitionId,d,l]);return La.createElement(_k,{data:n?i:[...i,{key:"new"}],renderItem:p,numColumnsPerScreen:m,columnSpacing:g.medium,rowSpacing:g.medium})}var bM={IconComponent:S.Cards3Columns,title:"Cards",recordName:"card",definitionName:"field",selectableView:!1,ViewComponent:vM,DefinitionSettingsComponent:mM,commands:c5,onKeyDown:pM};function c5(e){let{view:t,setView:o}=e;return[{key:"cards.definitions",commands:[{key:"cards.selectCover",title:"Cover image",icon:S.Image,descendant:()=>l5(e)},{key:"cards.selectTarget",title:"Target link",icon:S.PageLink,descendant:()=>u5(e)}]},{key:"cards.size",commands:[{key:"cards.size.medium",title:"Medium",icon:S.Cards3Columns,type:1,selected:t.cardSize==="medium",trigger:()=>{let[n]=o({...t,cardSize:"medium"});return n}},{key:"cards.size.large",title:"Large",icon:S.Cards2Columns,type:1,selected:t.cardSize==="large",trigger:()=>{let[n]=o({...t,cardSize:"large"});return n}}]},{key:"cards.options",commands:[{key:"cards.hideColumnTitle",title:"Show labels",icon:S.EyeOff,type:2,enabled:!t.hideColumnTitle,trigger:()=>{let[n]=o({...t,hideColumnTitle:!t.hideColumnTitle});return n}},{key:"cards.definitions",title:"Fields",icon:S.EyeOff,descendant:()=>SM(e)}]}]}function l5(e){let{view:t,definition:o,setView:n}=e;return ou(o,r=>{n({...t,coverDefinition:r[0]})},{multiple:!1,search:"Select column for cover\u2026",selected:t.coverDefinition?[t.coverDefinition]:[],filterDefinition:r=>r.type==="files"})}function u5(e){let{view:t,definition:o,setView:n}=e;return ou(o,r=>{n({...t,targetDefinition:r[0]})},{multiple:!1,search:"Select column for target\u2026",selected:t.targetDefinition?[t.targetDefinition]:[],filterDefinition:r=>r.type==="content-ref"})}function SM(e){let{view:t,definition:o,setView:n}=e;return ou(o,r=>{let[,i]=n({...t,columns:r});return SM(i)},{multiple:!0,search:"Select visible columns\u2026",selected:t.columns})}c();c();var Gd=C(O());c();var CM=C(Im()),Mt=C(O());W();var Na=Mt.createContext(new Map),kM=Mt.forwardRef((e,t)=>{let{nodeKey:o,editor:n,view:r,children:i}=e,{readOnly:a}=n,[,s]=R(xM),[l]=Pa.useDimensions(),u=Ye(),d=u?l.width:l.width-2,{widths:m,totalWidth:p}=Mt.useMemo(()=>qf(r,d,u),[d,r.columns,r.columnWidths]),[f,h]=Mt.useState({left:!1,right:!1});Mt.useEffect(()=>{h(P=>({left:p>d?P.left:!1,right:p>d?P.right:!1}))},[p,d]);let y=gt(f),w=Mt.useCallback(P=>{let{contentOffset:I,contentSize:_,layoutMeasurement:M}=P.nativeEvent,T=I.x>0,L=I.x<_.width-M.width;y.current.left===T&&y.current.right===L||h({left:T,right:L})},[]),k=Mt.useCallback((P,I)=>{let _=m.get(P);ii(_),n.change(M=>{M.setDataByKey(o,["view","columnWidths",P],(0,CM.default)(_.width+I,Vf,pd),{normalize:!1}),M.setDataByKey(o,["view","useNewSizing"],!0,{normalize:!1})})},[m]),x=(P,I)=>{n.change(_=>{Q.moveColumn(_,o,I.id,P)})};return Mt.createElement(b,{ref:t},Mt.createElement(Na.Provider,{value:m},Mt.createElement(Ti,{horizontal:!0,style:s.tableScrollWrapper,onScroll:w,scrollEventThrottle:100,contentContainerStyle:s.tableWrapper},i,a?null:[...r.columns].reverse().reduce((P,I,_,M)=>{let T=m.get(I);return ii(T),Mt.createElement(d5,{key:I,columnId:I,columnAfterId:M[_-1],tableKey:o,controller:T.controller,width:T.animated,onResizeComplete:k,onDropBefore:L=>x(I,L)},P)},null))),!u&&f.left?Mt.createElement(b,{style:s.tableScrollIndicatorLeft,pointerEvents:"none"}):null,!u&&f.right?Mt.createElement(b,{style:s.tableScrollIndicatorRight,pointerEvents:"none"}):null)});function d5(e){let{tableKey:t,columnId:o,columnAfterId:n,controller:r,width:i,children:a,onDropBefore:s,onResizeComplete:l}=e,[u,d]=R(xM),m=Mt.useMemo(()=>hm.create({onStartShouldSetPanResponder:(y,w)=>!1,onStartShouldSetPanResponderCapture:(y,w)=>!1,onMoveShouldSetPanResponder:(y,{dx:w})=>!0,onMoveShouldSetPanResponderCapture:(y,w)=>!1,onPanResponderGrant:(y,{dx:w})=>{},onPanResponderMove:(y,{dx:w})=>{r.setValue(w)},onPanResponderTerminationRequest:(y,w)=>!1,onPanResponderRelease:(y,{dx:w})=>{l(o,w)},onPanResponderTerminate:(y,w)=>{}}),[o,r,l]),p=F.useInteractiveState(m.panHandlers),[f,h]=En({accept:"table-definition",drop:(y,w)=>{w.didDrop()||s(y)},canDrop:y=>o!==y.id&&n!==y.id&&t===y.blockKey,collect:y=>({highlighted:y.isOver({shallow:!0})&&y.canDrop()})},[o,n,t]);return Mt.createElement(Kt.View,{ref:h,style:[d.columnLine,{left:i}]},Mt.createElement(b,{style:d.blockGrabber,...p.events},Mt.createElement(b,{style:[d.blockGrabberBar,(p.hovered||p.dragging||f.highlighted)&&{backgroundColor:u.colors.primary.main}]})),a)}var dh=10,wM=3,xM=z.create({tableScrollWrapper:{borderWidth:0},tableScrollIndicatorLeft:e=>({position:"absolute",left:-1,top:0,bottom:0,width:1,shadowColor:K.BLACK,shadowOffset:{width:5,height:0},shadowOpacity:.6,shadowRadius:7,elevation:4}),tableScrollIndicatorRight:e=>({position:"absolute",right:-1,top:0,bottom:0,width:1,shadowColor:K.BLACK,shadowOffset:{width:-5,height:0},shadowOpacity:.6,shadowRadius:7,elevation:4}),tableWrapper:{position:"relative",overflow:"hidden",flexDirection:"column"},columnLine:{position:"absolute",top:0,bottom:0},blockGrabber:{position:"absolute",top:0,right:-(dh/2),bottom:0,width:dh,cursor:"ew-resize"},blockGrabberBar:{position:"absolute",top:0,right:dh/2-wM/2,bottom:0,width:wM,borderRadius:E.RADIUS_M},blockGrabberPlus:{position:"absolute",top:g.small,left:-(E.BUTTON_XS/2)+dh/2}});function OM(e){var a;let{view:t,columnId:o,setView:n}=e,r=Gd.default.useContext(Na);function i(s){var l;if(s){let{[o]:u,...d}=t.columnWidths||{};n({...t,useNewSizing:!0,columnWidths:d})}else n({...t,useNewSizing:!0,columnWidths:{...t.columnWidths,[o]:((l=r.get(o))==null?void 0:l.width)||us}})}return Gd.default.createElement(Gd.default.Fragment,null,Gd.default.createElement(Sp,{value:typeof((a=t.columnWidths)==null?void 0:a[o])>"u",onValueChange:i,label:"Fill available space",labelDescription:"Expand this column to fill the available horizontal space"}))}c();var _M=(e,t,o,n)=>{let r=(i=o.selection.definitionId)=>{if(!i)return;let a=o.records.findIndex(d=>d.key===o.selection.recordId),s=o.records[a],l=o.records[a+1],u=Q.insertEmptyRecord(n,t.key,{before:s.value.orderIndex,after:l==null?void 0:l.value.orderIndex});Q.moveTableSelection(n,t,{recordId:u,definitionId:i},"start")};switch(e){case"move-up":case"move-down":{Zo(n,t,o,{definition:{relative:0},record:{relative:e==="move-up"?-1:1},focus:e==="move-up"?"end":"start"})||(e==="move-up"?Uc(n,t):ft(n,t));break}case"tab":case"move-right":{let i=e==="tab"?"select":"start";Zo(n,t,o,{definition:{relative:1},record:{relative:0},focus:i})||!Zo(n,t,o,{definition:{absolute:0},record:{relative:1},focus:i})&&e==="tab"&&r(o.view.columns[0]);break}case"shift+tab":case"move-left":{let i=e==="shift+tab"?"select":"end";Zo(n,t,o,{definition:{relative:-1},record:{relative:0},focus:i})||Zo(n,t,o,{definition:{absolute:o.view.columns.length-1},record:{relative:-1},focus:i});break}case"enter":{r();break}case"backspace":{if(Zo(n,t,o,{definition:{relative:-1},record:{relative:0},focus:"end"}))break;o.selection.recordId&&Q.isRowEmpty(t,o.selection.recordId)?(Zo(n,t,o,{definition:{absolute:o.view.columns.length-1},record:{relative:-1},focus:"end"}),Q.removeRecord(n,t.key,o.selection.recordId)):Zo(n,t,o,{definition:{absolute:o.view.columns.length-1},record:{relative:-1},focus:"end"});break}}};c();var bn=C(O());W();c();var Qr=C(O());c();var mh=g.Padding.mediumLeft;c();var An=C(O());W();var ph=An.default.forwardRef(function(t,o){let{recordKey:n,columnId:r,selected:i,width:a,children:s,header:l=!1,isFirstColumn:u=!1,isFirstRow:d=!1,isLastColumn:m=!1,isLastRow:p=!1,onPress:f,readOnly:h,...y}=t,w=An.default.useRef(null),k=Dr(w,o),[,x]=R(m5);An.default.useEffect(()=>{i&&w.current&&yp(w.current,{behavior:"smooth",scrollMode:"if-needed"})},[i]);let P=An.default.createElement(Kt.View,{ref:k,style:[x.cell,v.directionRow,v.alignCenter,u?x.farLeftCell:{},d?x.topCell:{},p?x.bottomCell:{},d&&u?x.topLeftCell:{},d&&m?x.topRightCell:{},p&&u?x.bottomLeftCell:{},p&&m?x.bottomRightCell:{},l?x.columnHeader:{},d?so.Bold:{},{width:a}]},s,i?An.default.createElement(An.default.Fragment,null,An.default.createElement(b,{style:[x.cellSelectionBorderTop,x.cellSelectedBorder]}),An.default.createElement(b,{style:[x.cellSelectionBorderBottom,x.cellSelectedBorder]}),An.default.createElement(b,{style:[x.cellSelectionBorderRight,x.cellSelectedBorder]}),An.default.createElement(b,{style:[x.cellSelectionBorderLeft,x.cellSelectedBorder]})):null);return An.default.createElement(fe,{style:[x.unsetDefaultTH,v.directionRow,v.justifyContentCenter],tag:l?"th":"td"},h?An.default.createElement(An.default.Fragment,null,P):An.default.createElement(no,{...y},P))}),vn=1,m5=z.create({unsetDefaultTH:{textAlign:"left"},cell:e=>({position:"relative",paddingVertical:g.small,paddingHorizontal:g.medium,borderLeftWidth:1,borderTopWidth:1,borderColor:e.colors.border.mid}),cellSelectionBorderTop:{position:"absolute",top:-Math.floor(vn/2),left:-Math.floor(vn/2),right:-Math.floor(vn/2),height:vn},cellSelectionBorderBottom:{position:"absolute",bottom:-Math.floor(vn/2),left:-Math.floor(vn/2),right:-Math.floor(vn/2),height:vn},cellSelectionBorderRight:{position:"absolute",bottom:-Math.floor(vn/2),top:-Math.floor(vn/2),right:-Math.floor(vn/2),width:vn},cellSelectionBorderLeft:{position:"absolute",bottom:-Math.floor(vn/2),top:-Math.floor(vn/2),left:-Math.floor(vn/2),width:vn},cellSelectedBorder:e=>({backgroundColor:e.colors.primary.main}),topCell:{borderTopWidth:0},farLeftCell:{borderLeftWidth:0},topLeftCell:{},bottomLeftCell:{},topRightCell:{},bottomRightCell:{},bottomCell:{borderBottomWidth:1},columnHeader:e=>({backgroundColor:"transparent"})});var RM=Qr.memo(function(t){let{editor:o,nodeKey:n,readOnly:r,definition:i,view:a}=t,s=Qr.useContext(Na),[,l]=R(g5);return Qr.createElement(fe,{tag:"thead"},Qr.createElement(fe,{style:[v.directionRow,l.background],tag:"tr"},a.columns.map((u,d)=>{let m=i[u],p=s.get(u);return ii(p),Qr.createElement(f5,{key:u,columnId:u,editor:o,nodeKey:n,columnDef:m,view:a,readOnly:r,width:p.animated,isFirstColumn:d===0,isLastColumn:d===a.columns.length-1,isFirstRow:!0,header:!0})})))}),IM=F.createInteractiveHandle("table-column"),p5=F.createInteractiveComponent(fe);function f5(e){let{columnDef:t,readOnly:o,editor:n,nodeKey:r,view:i,...a}=e;return Qr.createElement(p5,{handle:IM},Qr.createElement(ph,{focusable:!1,readOnly:o,...a},Qr.createElement(cM,{editor:n,nodeKey:r,definition:t,readOnly:o,style:[v.flex1,a.isFirstColumn&&!o?mh:null]}),o?null:Qr.createElement(fh,{editor:n,nodeKey:r,view:i,definition:t,descendantOf:IM,icon:S.GrabberVertical,rounded:!0})))}var g5=z.create({background:e=>({backgroundColor:e.colors.background.mid,borderBottomColor:e.colors.border.mid,borderBottomWidth:2})});c();var Lt=C(O());W();var PM=F.createInteractiveHandle("table-row"),h5=F.createInteractiveComponent(fe),MM=Lt.memo(Lt.forwardRef(function(t,o){let{nodeKey:n,editor:r,readOnly:i,record:a,definition:s,view:l,isFirstRow:u,isLastRow:d,beforeOrderIndex:m,afterOrderIndex:p,selectedColumnId:f,definitionColorKinds:h,openRecord:y,style:w}=t,k=Lt.useContext(Na),x=kr[l.type],P={id:a.key,type:"table-record",blockKey:n,previewLabel:"Move record",previewIcon:"TableRecord"},[{dragging:I},_]=Ki({type:P.type,item:P,canDrag:()=>!i,collect:H=>({dragging:H.isDragging()})}),M=(H,Y)=>{r.change(oe=>{Q.moveRecord(oe,n,H.id,Y)})},T=Lt.useRef(null),L=de(T),q=()=>{L.open(ne({search:"Select action\u2026",groups:[{key:"table.row",commands:[{key:"table.row.open",title:`Open ${x.recordName}`,icon:S.Maximize,trigger:()=>{y(a.key)}},{key:"table.row.insertAbove",title:"Insert above",icon:S.TableInsertRowAbove,trigger:()=>{r.change(H=>{Q.insertEmptyRecord(H,n,{after:a.value.orderIndex,before:m})})}},{key:"table.row.insertBelow",title:"Insert below",icon:S.TableInsertRow,trigger:()=>{r.change(H=>{Q.insertEmptyRecord(H,n,d?{before:a.value.orderIndex}:{after:a.value.orderIndex,before:p})})}},{key:"table.row.addColumn",icon:S.TableInsertColumn,title:`Add ${x.definitionName}`,trigger:()=>{r.change(H=>{Q.insertColumn(H,n,Q.createColumnFromType("text"))})},descendant:()=>Ma(H=>{r.change(Y=>{Q.insertColumn(Y,n,Q.createColumnFromType(H))})})},{key:"table.row.remove",title:`Delete ${x.recordName}`,icon:S.Trashcan,trigger:()=>{r.change(H=>{Q.removeRecord(H,n,a.key)})}}]}]}))},[,G]=R(LM),U=Lt.createElement(h5,{ref:o,handle:PM,style:[v.directionRow,I&&$e.translucent,w],tag:"tr"},l.columns.map((H,Y)=>{let oe=s[H],ce=f===H,Ee=h[H],Ne=Lt.createElement(tu,{definitionColorKind:Ee,record:a,selected:ce,definition:oe,nodeKey:n,editor:r,readOnly:i}),kt=k.get(H);return ii(kt),Lt.createElement(ph,{key:H,recordKey:a.key,columnId:H,width:kt.animated,selected:ce,isFirstColumn:Y===0,isLastColumn:Y===l.columns.length-1,isFirstRow:u,isLastRow:d,onPressIn:Go=>{Go.type!=="keydown"&&(Go.preventDefault(),r.change(Jr=>{Q.moveTableSelection(Jr,n,{recordId:a.key,definitionId:H})}))},readOnly:i},Y>0||i?Ne:Lt.createElement(Lt.Fragment,null,Lt.createElement(F.View.Child,{descendantOf:PM,ref:_,style:[v.justifyContentCenter,G.rowGrabber],inactiveStyle:L.opened?{}:$e.hidden,activeStyle:$e.visible},Lt.createElement(B,{ref:T,size:"xsmall",rounded:!0,kind:"grey",active:L.opened,title:`Click for options.
Drag to move.`,icon:S.GrabberVertical,onPress:q})),Lt.createElement(b,{style:[v.flex1,v.justifyContentCenter,mh]},Ne)))}));return i?U:Lt.createElement(b,null,U,Lt.createElement(TM,{currentItem:P,position:"before",onDrop:H=>M(H,{before:m,after:a.value.orderIndex})}),d?Lt.createElement(TM,{currentItem:P,position:"after",onDrop:H=>M(H,{before:a.value.orderIndex,after:p})}):null)}));function TM(e){let{currentItem:t,position:o,onDrop:n}=e,r=F.useInteractiveState(),[,i]=R(LM),{logAnalyticsEvent:a}=Lt.useContext(ae),[s,l]=En({accept:"table-record",drop:(u,d)=>{d.didDrop()||(a({type:"edit_page_document_move_block",method:"dnd",blockType:"table-row",toParent:"table",fromParent:"table"}),n(u))},canDrop:u=>t.id!==u.id&&t.blockKey===u.blockKey,collect:u=>({highlighted:u.isOver()&&u.canDrop()})});return Lt.createElement(b,{ref:l,style:[i.insertionLineWrapper,o==="after"?i.insertionLineAfter:i.insertionLineBefore],...r.events},Lt.createElement(b,{style:[i.insertionLineBar,(r.hovered&&r.dragging||s.highlighted)&&i.insertionLineBarHovered]}))}var gh=10,EM=3,LM=z.create({insertionLineWrapper:{position:"absolute",left:0,right:0,height:gh},insertionLineBefore:{top:-(gh/2)},insertionLineAfter:{bottom:-(gh/2)},insertionLineBar:{position:"absolute",left:0,right:0,top:gh/2-EM/2,height:EM,borderRadius:E.RADIUS_M},insertionLineBarHovered:e=>({backgroundColor:e.colors.primary.main}),rowGrabber:{position:"absolute",left:g.xsmall,bottom:"auto",zIndex:10}});var y5=20;function NM(e){let{view:t,editor:o,nodeKey:n}=e,[r,i]=bn.useState(),a=bn.useCallback(s=>{s!==null&&i(s)},[]);return bn.createElement(kM,{editor:o,nodeKey:n,view:t,ref:a},bn.createElement(v5,{...e,parentRef:r}))}function v5(e){let{selection:t,records:o,definition:n,view:r,readOnly:i,editor:a,nodeKey:s,parentRef:l,openRecord:u}=e,{mode:d}=bn.useContext(Fo),m=a.value.document.getNode(s),p=bn.useContext(Na),f=Wk({enabled:d==="app"&&o.length>y5,parentRef:l?{current:l}:void 0,getEstimatedItemHeight:k=>Mv(m,String(k.key),p),list:o.map(k=>({key:k.key}))}),h=dM(n,r.columns),w=!(r.hideHeader||i&&Q.isHeaderEmpty({definition:n,view:r,records:{}}))||!!t.recordId;return bn.createElement(fe,{tag:"table"},w?bn.createElement(RM,{definition:n,view:r,editor:a,nodeKey:s,readOnly:i}):null,bn.createElement(fe,{tag:"tbody"},f.map(([k,x,P],I)=>{let _=o[I],M=I>0?o[I-1]:void 0,T=o[I+1];return x?bn.createElement(MM,{key:_.key,ref:k.nodeRef,selectedColumnId:t.recordId===_.key?t.definitionId:void 0,record:_,definition:n,view:r,readOnly:i,editor:a,nodeKey:s,isFirstRow:!w&&I===0,isLastRow:I===o.length-1,beforeOrderIndex:M==null?void 0:M.value.orderIndex,afterOrderIndex:T==null?void 0:T.value.orderIndex,definitionColorKinds:h,openRecord:u,...k.nodeProps}):bn.createElement(b,{key:_.key,style:{height:P},ref:k.nodeRef},bn.createElement(A,null,Q.getTableRowPlainText(m,_.value)))})))}var DM={IconComponent:S.Table,title:"Table",recordName:"row",definitionName:"column",selectableView:!0,ViewComponent:NM,DefinitionSettingsComponent:OM,commands:S5,definitionCommands:b5,onKeyDown:_M};function b5(e){var i;let{view:t,definition:o,setView:n}=e,r=typeof((i=t.columnWidths)==null?void 0:i[o.id])>"u";return[{key:"grid",commands:[{key:"grid.autoSize",title:"Auto size",icon:S.AutoSize,type:2,enabled:r,trigger:()=>{if(r)n({...t,useNewSizing:!0,columnWidths:{...t.columnWidths,[o.id]:us}});else{let{[o.id]:a,...s}=t.columnWidths||{};n({...t,useNewSizing:!0,columnWidths:s})}}}]}]}function S5(e){let{view:t,setView:o}=e;return[{key:"grid",commands:[{key:"grid.toggleHeader",title:"Show header",type:2,enabled:!t.hideHeader,trigger:()=>{let[n]=o({...t,hideHeader:!t.hideHeader});return n}},{key:"grid.resetSizing",title:"Reset column sizing",trigger:()=>{let{columnWidths:n,...r}=t;o({...r,useNewSizing:!0})}},{key:"grid.columns",title:"Hide Columns",icon:S.EyeOff,descendant:()=>AM(e)}]}]}function AM(e){let{view:t,definition:o,setView:n}=e;return ou(o,r=>{let[,i]=n({...t,columns:r});return AM(i)},{multiple:!0,search:"Select visible columns",selected:t.columns})}var kr={grid:DM,cards:bM};function fh(e){let{nodeKey:t,editor:o,view:n,definition:r,descendantOf:i,icon:a,rightIcon:s,rounded:l}=e,u={id:r.id,type:"table-definition",blockKey:t,previewLabel:ta(r)},[,d]=R(w5),m=xr.useRef(null),p=de(m),f=F.useInteractiveState(),[,h]=ls({type:u.type,item:u,canDrag:()=>!0}),[y,w]=xr.useState(null),k=L=>{o.change(q=>{Q.setColumnDefinition(q,t,r.id,L)})},x=()=>{let q=o.value.document.assertBlock(t).data.toFrozenObject(),G=q.definition[r.id];return[I(q.view,G),P(q.view,G)]},P=(L,q)=>({definition:q,view:L,setView:G=>(o.change(U=>{Q.setView(U,t,G)}),x()),setDefinition:G=>(k(G),x()),openModal:G=>{w({type:"command",modal:xr.createElement(G,{definition:q,onClose:()=>w(null)})})}}),I=(L,q)=>{let G=Cr[q.type],U=kr[L.type],H=P(L,q);return ne({search:"Select action\u2026",groups:[{key:"definition.type",commands:[{key:"definition.type.change",title:G.title,icon:G.IconComponent,descendant:()=>Ma(Y=>{w({type:"change_type",columnType:Y})},{selectedType:q.type})}]},...G.commands?G.commands(H):[],...U.definitionCommands?U.definitionCommands(H):[],{key:"definition.danger",commands:[{key:"definition.add",title:`Add ${U.definitionName}`,icon:S.TableInsertColumn,trigger:()=>{o.change(Y=>{let oe=[...L.columns].findIndex(ce=>q.id===ce);Q.insertColumn(Y,t,Q.createColumnFromType("text"),oe+1)})},descendant:()=>Ma(Y=>{let oe=[...L.columns].findIndex(ce=>q.id===ce);o.change(ce=>{Q.insertColumn(ce,t,Q.createColumnFromType(Y),oe+1)})})},{key:"definition.hide",title:`Hide ${U.definitionName}`,icon:S.EyeOff,trigger:()=>{o.change(Y=>{Q.hideColumn(Y,t,q.id)})}},{key:"definition.delete",title:`Delete ${U.definitionName}`,icon:S.Trashcan,trigger:()=>{w({type:"delete"})}}]}]})},_=()=>{p.open(I(n,r))},M=L=>{w(null),L&&o.change(q=>{Q.removeColumn(q,t,r.id)})},T=L=>{w(null),L&&(y==null?void 0:y.type)==="change_type"&&k(Q.changeColumnType(r,y.columnType))};return xr.createElement(xr.Fragment,null,(y==null?void 0:y.type)==="delete"?xr.createElement(qu,{kind:"danger",title:"Delete column",confirmButtonText:"Delete",onComplete:M},"Do you really want to delete this column and all of its data?"):null,(y==null?void 0:y.type)==="change_type"?xr.createElement(qu,{title:"Change column type",confirmButtonText:"Change",onComplete:T},"You are about to change this column type from ",r.type," to"," ",y.columnType,". We will try to convert any value automatically, but you may lose data if we cannot convert them."):null,(y==null?void 0:y.type)==="command"?y.modal:null,xr.createElement(F.View.Child,{...f.events,descendantOf:i,ref:h,style:[v.justifyContentCenter,d.columnGrabber],inactiveStyle:p.opened||f.focused?{}:$e.hidden,activeStyle:$e.visible,focusStyle:$e.translucent},xr.createElement(B,{kind:"grey",size:"small",ref:m,title:`Click for options.
Drag to move.`,active:p.opened,icon:a,rightIcon:s,rounded:l,onPress:_})))}var w5=z.create({columnGrabber:{position:"absolute",right:g.xsmall,bottom:"auto"}});function hh(e,t,o){let n=t.data.toFrozenObject(),r=kr[n.view.type],i=r.commands?r.commands(BM(e,n,t.key,o)):[];return{...ot(e,t.key,[{key:"views",commands:Object.entries(kr).map(([a,s])=>({key:a,title:s.title,icon:s.IconComponent,type:1,selected:a===n.view.type,trigger:()=>{e.change(u=>{Q.setView(u,t.key,{type:a})});let l=e.value.document.assertBlock(t.key);return hh(e,l,o)}}))},{key:"table",commands:[{key:"addColumn",icon:S.ArrowRight,title:`Add ${r.definitionName}`,trigger:()=>{e.change(a=>{Q.insertColumn(a,t.key,Q.createColumnFromType("text"))})},descendant:()=>Ma(a=>{e.change(s=>{Q.insertColumn(s,t.key,Q.createColumnFromType(a))})})},{key:"insertRow",icon:S.ArrowDown,title:`Insert ${r.recordName}`,trigger:()=>{e.change(a=>{Q.insertEmptyRecord(a,t.key)})}}]},...i,...o]),search:"Select action\u2026"}}function BM(e,t,o,n){return{view:t.view,definition:t.definition,setView:r=>{e.change(a=>{Q.setView(a,o,r)});let i=e.value.document.assertBlock(o);return[hh(e,i,n),BM(e,i.data.toFrozenObject(),o,n)]}}}c();var WM=C(f6()),Jt=C(O());W();c();var na=C(O());W();c();var Vb=JSON.parse('{"definitionWrapper":"definitionWrapper_0vx5U","grabberWrapper":"grabberWrapper_WLh-V"}');var zM=F.createInteractiveHandle("record-column-value-line");function qb(e){let{nodeKey:t,editor:o,readOnly:n,record:r,view:i,definition:a,style:s}=e,[,l]=R(C5),u={id:a.id,type:"table-definition",blockKey:t,previewLabel:ta(a)},[{dragging:d},m]=ls({type:u.type,item:u,canDrag:()=>!n,collect:h=>({dragging:h.isDragging()})}),[p,f]=En({accept:[u.type],drop:(h,y)=>{y.didDrop()||o.change(w=>{Q.moveColumn(w,t,h.id,a.id)})},canDrop:h=>a.id!==h.id&&t===h.blockKey,collect:h=>({higlighted:h.isOver()&&h.canDrop()})});return na.createElement(Z,{ref:f,style:[N.flex.column,N.flex.flex1,Vb.definitionWrapper,d&&N.opacity.translucent,pp,{[nl]:p.higlighted}]},na.createElement(F.View,{handle:zM,style:s},na.createElement(b,{style:[v.directionRow,v.alignCenter,g.Margin.xsmallBottom]},na.createElement(Z,{style:[N.position.relative,N.flex.alignCenter]},na.createElement(D1,{style:[N.padding.smallRight,Vb.grabberWrapper],ref:m,size:"medium"}),na.createElement(b,{style:[v.flex1]},na.createElement(il,null,ta(a)))),n?null:na.createElement(fh,{nodeKey:t,editor:o,view:i,definition:a,descendantOf:zM,icon:Cr[a.type].IconComponent,rightIcon:S.ChevronDown})),na.createElement(tu,{nodeKey:t,editor:o,readOnly:n,record:r,definition:a,selected:!1,displayMode:"block",style:[l.recordValueBox,g.Padding.smallVertical,g.Padding.mediumHorizontal]})))}var C5=z.create({recordValueBox:e=>({borderWidth:1,borderColor:e.colors.border.mid,backgroundColor:e.colors.background.main,borderRadius:e.radiuses.large,minHeight:E.BUTTON_L})});function FM(e){let{nodeKey:t,editor:o,readOnly:n,record:r,records:i,view:a,definition:s,openRecord:l,onClose:u}=e,[,d]=R(D),[,m]=R(k5),[p,f]=Jt.useState(!1),h=kr[a.type],y=a.columns,w=Jt.useMemo(()=>(0,WM.default)(Object.keys(s),y),[y,a,s]),k=Jt.useMemo(()=>i.findIndex(I=>I.key===r.key),[i,r.key]),x=i[k-1],P=i[k+1];return Jt.createElement(Vt,{title:`Edit ${h.recordName}`,size:"large",footer:Jt.createElement(b,{style:[v.directionRow,v.alignCenter,v.justifySpaceBetween]},n?null:Jt.createElement(B,{icon:S.Trashcan,kind:"secondary",size:"medium",onPress:()=>{o.change(I=>{Q.removeRecord(I,t,r.key)}),u()}},`Delete ${h.recordName}`),Jt.createElement(b,{style:[v.directionRow,v.alignCenter]},Jt.createElement(B,{icon:S.ChevronLeft,kind:"secondary",size:"medium",title:`Previous ${h.recordName}`,disabled:!x,onPress:()=>{x&&l(x.key)}}),Jt.createElement(b,{style:[g.Padding.mediumHorizontal]},Jt.createElement(A,{style:[d.Body,d.textMuted]},`${k+1} of ${i.length}`)),Jt.createElement(B,{icon:S.ChevronRight,kind:"secondary",size:"medium",title:`Next ${h.recordName}`,disabled:!P,onPress:()=>{P&&l(P.key)}}))),onClose:u},Jt.createElement(b,null,y.map((I,_)=>Jt.createElement(qb,{key:I,nodeKey:t,editor:o,readOnly:n,view:a,record:r,definition:s[I],style:[g.Margin.mediumBottom,_===0?null:g.Margin.xsmallTop]}))),w.length>0||!n?Jt.createElement(b,{style:[v.directionRow,v.justifySpaceBetween]},w.length>0?Jt.createElement(B,{icon:p?S.ChevronUp:S.ChevronDown,kind:"grey",size:"medium",onPress:()=>{f(I=>!I)}},p?"Hide":`Show hidden ${h.definitionName}s`):null,n?null:Jt.createElement(xp,{icon:S.Plus,kind:"grey",size:"medium",palette:()=>Ma(I=>{o.change(_=>{Q.insertColumn(_,t,Q.createColumnFromType(I))})})},"Add ",h.definitionName)):null,p?Jt.createElement(b,{style:[m.hiddenColumnsGroup,g.Margin.mediumTop,g.Padding.mediumTop]},w.map((I,_)=>Jt.createElement(qb,{key:I,nodeKey:t,editor:o,readOnly:n,view:a,record:r,definition:s[I],style:[g.Margin.mediumBottom,_===0?null:g.Margin.xsmallTop]}))):null)}var k5=z.create({hiddenColumnsGroup:e=>({borderTopWidth:1,borderTopColor:e.colors.border.mid,borderTopStyle:"dashed"})});c();function VM(e){return Q.defaultRecordSortedKeys(e).map(o=>({key:o,value:e.records[o]}))}function qM(e){let{node:t,editor:o,isFocused:n}=e,r=t.data.toFrozenObject(),i=eo.useMemo(()=>VM(r),[r]),[a,s]=eo.useState(null),l=eo.useMemo(()=>a===null?null:i.find(y=>y.key===a),[i,a]),u=eo.useCallback(y=>{s(y)},[s]),d=eo.useMemo(()=>o.readOnly?{}:Q.getTableSelection(o.value,t),[i,t,o.readOnly,o.value.selection]),m={view:r.view,definition:r.definition,records:i,selection:d},p=eo.useContext(ah);p.set(t.key,m),eo.useEffect(()=>()=>{p.delete(t.key)},[p,t.key]);let f=kr[m.view.type],h=Xr(o,t.key);return eo.createElement(eo.Fragment,null,eo.createElement(ge,{...e,palette:hh(o,t,h?[h]:[])},eo.createElement(Pt,{...e,selectable:f.selectableView,isFocused:n&&!d.definitionId&&!d.recordId,onSelect:()=>{o.change(y=>{Q.moveTableSelection(y,t,{}),y.focus()})}},eo.createElement(zk,{readOnly:!!l},eo.createElement(f.ViewComponent,{editor:e.editor,nodeKey:t.key,readOnly:o.readOnly,openRecord:u,...m})))),l?eo.createElement(FM,{editor:e.editor,nodeKey:t.key,readOnly:o.readOnly,view:m.view,records:m.records,definition:m.definition,record:l,openRecord:u,onClose:()=>{s(null)}}):null)}c();var Ic=C(Br()),vh=C(O());var GM=(0,Ic.isKeyHotkey)("enter"),x5=(0,Ic.isKeyHotkey)("shift+enter"),HM=(0,Ic.isKeyHotkey)("mod+enter"),Gb=(0,Ic.isKeyHotkey)("tab"),yh=(0,Ic.isKeyHotkey)("shift+tab"),XM=(0,Ic.isKeyHotkey)("backspace");function KM(){let e=vh.useContext(ah);return[vh.useMemo(()=>({onKeyDown:(...o)=>O5(e,...o)}),[e])]}function O5(e,t,o,n){if(t.key!=="ArrowUp"&&t.key!=="ArrowDown"&&t.key!=="ArrowRight"&&t.key!=="ArrowLeft"&&!(GM(t)&&!x5(t))&&!HM(t)&&!XM(t)&&!Gb(t)&&!yh(t))return;let{selection:r}=o.value;if(!Wt(r)||!r.isCollapsed&&!Gb(t)&&!yh(t))return;let i=Q.getCurrentTable(o.value);if(!i)return;let{table:a,fragment:s}=i;if(i.ancestorBlocks&&i.ancestorBlocks.size>0)return;if(HM(t))return t.preventDefault(),ft(o,a),o;let l=e.get(a.key);if(!l||!l.selection.recordId&&!l.selection.definitionId)return;let u=a.data.toFrozenObject(),d=l.selection.recordId?u.records[l.selection.recordId]:null,m=l.selection.definitionId?u.definition[l.selection.definitionId]:null,p=kr[l.view.type],f=m?Cr[m.type]:null,h=w=>{if(!f||!f.onKeyDown||!d||!m)return!1;let k=!1;return f.onKeyDown(w,d.values[m.id],x=>{k=!0,Q.setRecordValue(o,a.key,l.selection.recordId,l.selection.definitionId,x)}),k},y=w=>{p.onKeyDown&&p.onKeyDown(w,a,l,o)};if(GM(t)){if(s&&!r.hasAnchorAtEndOf(s))return;t.preventDefault(),h("enter")||y("enter")}else if(XM(t)){if(s&&!r.hasAnchorAtStartOf(s))return;t.preventDefault(),h("backspace")||y("backspace")}else if(Gb(t)||yh(t))t.preventDefault(),y(yh(t)?"shift+tab":"tab");else if(t.key==="ArrowDown"){if(s&&!I5(s,r))return;t.preventDefault(),y("move-down")}else if(t.key==="ArrowUp"){if(s&&!_5(s,r))return;t.preventDefault(),y("move-up")}else if(t.key==="ArrowRight"){if(s&&!r.hasAnchorAtEndOf(s))return;t.preventDefault(),y("move-right")}else if(t.key==="ArrowLeft"){if(s&&!r.hasAnchorAtStartOf(s))return;t.preventDefault(),y("move-left")}return o}function _5(e,t){let o=e.nodes.first();return o?t.hasAnchorIn(o):!1}function I5(e,t){let o=e.nodes.last();return o?t.hasAnchorIn(o):!1}c();var to=C(O());W();c();var $M=C(O());W();function Hb(e){let{children:t}=e,[,o]=R(R5);return $M.default.createElement(b,{style:[o.blockTabsBody]},t)}var R5=z.create({blockTabsBody:e=>({border:`1px solid ${e.colors.border.main}`,backgroundColor:e.colors.background.main,paddingHorizontal:Pv,borderRadius:e.radiuses.medium,borderTopLeftRadius:0,"@media print":{padding:0,border:0}})});c();var bh=C(O());W();function Xb(e){let{children:t}=e,[,o]=R(P5);return bh.default.createElement(b,{style:o.blockTabsHeader},bh.default.createElement(dp,{style:o.blockTabsHeaderContainer},bh.default.createElement(b,{style:o.blockTabsHeaderContent},t)))}var P5=z.create({blockTabsHeader:{position:"relative",display:"flex",flexDirection:"row",width:"100%",alignItems:"center",whiteSpace:"nowrap",marginBottom:-1,"@media print":{display:"none"},zIndex:1},blockTabsHeaderContainer:{maxWidth:"100%",display:"flex"},blockTabsHeaderContent:e=>({maxWidth:"100%",display:"flex",flexDirection:"row",borderTopRightRadius:e.radiuses.medium,borderTopLeftRadius:e.radiuses.medium,pointerEvents:"auto"})});c();var bo=C(O()),m0=C(c0());W();c();var nu=C(O());W();var d0=nu.default.forwardRef(function(t,o){let{active:n,editor:r,tab:i,isLast:a,onDropBefore:s,onDropAfter:l,onInsertLeft:u,onInsertRight:d,onDelete:m,children:p,...f}=t;return nu.default.createElement(b,{style:[u0.tabItemControls,n&&u0.tabItemControlsActive],...f,ref:o},nu.default.createElement(l0,{position:"before",onDrop:s,onInsert:u}),p,a?nu.default.createElement(l0,{position:"after",onDrop:l,onInsert:d}):null)});function l0(e){let{position:t,onDrop:o,onInsert:n}=e,[r,i]=En({accept:["tab"],drop:(a,s)=>{s.didDrop()||a.type==="tab"&&o(a.id)},canDrop:a=>a.type==="tab",collect:a=>({hovered:a.isOver({shallow:!0})&&a.canDrop()})});return nu.default.createElement(Fu,{ref:i,dropHovered:r.hovered,position:t==="before"?"left":"right",button:{kind:"default",size:"xsmall",icon:S.Plus,onPress:n}})}var u0=X.create({tabItemControls:{position:"relative",flexShrink:1},tabItemControlsActive:{flexShrink:0},tabItemInsertionLine:{flex:1,opacity:0,display:"flex",alignItems:"center",justifyContent:"center"},tabItemInsertionLineHovered:{opacity:1}});function Yb(e){let{editor:t,tab:o,index:n,active:r,isFirst:i,isLast:a,onSelect:s}=e,{readOnly:l}=t,u=o.data?o.data.get("title"):"Untitled",[{isDragging:d},m]=Ki({type:"tab",item:{type:"tab",id:o.key,previewLabel:"Move tab"},canDrag:()=>!l,collect:w=>({isDragging:w.isDragging()})}),p=w=>{t.change(k=>{let x=k.value.document.getParent(o.key);if(!x)return;let P=li.createTabsItem("Untitled");k.insertNodeByKey(x.key,n+w,P);let I=k.value.document.getDescendant(P.key);I&&k.collapseToStartOf(I).focus(),s(P)})},f=w=>{t.change(k=>{k.setNodeByKey(o.key,{data:o.data.merge({title:w})})})},h=(w,k)=>{t.change(x=>{k==="before"?x.moveBeforeNodeByKey(w,o.key):x.moveAfterNodeByKey(w,o.key);let P=x.value.document.getDescendant(w);P&&x.collapseToStartOf(P).focus()})},y=()=>{t.change(w=>{w.removeNodeByKey(o.key)})};return l?bo.default.createElement(no,{onPress:()=>s(o)},bo.default.createElement(jb,{title:u,active:r,isFirst:i,isLast:a,isEditable:!1,withOptions:!1,editor:t,tab:o})):bo.default.createElement(no,{onPress:()=>s(o)},bo.default.createElement(d0,{onInsertLeft:()=>p(0),onInsertRight:()=>p(1),onDropBefore:w=>h(w,"before"),onDropAfter:w=>h(w,"after"),onDelete:y,...e},bo.default.createElement(jb,{title:u,active:r,isFirst:i,isLast:a,isEditable:r,onTitleChange:f,editor:t,tab:o,withOptions:!0,isDragging:d,dragHandleRef:m})))}var jb=bo.default.forwardRef((e,t)=>{let{title:o,titlePlaceholder:n="Untitled",active:r=!1,isFirst:i=!1,isLast:a=!1,isDragging:s=!1,isEditable:l,withOptions:u,onTitleChange:d,editor:m,tab:p,dragHandleRef:f,...h}=e,[y,w]=bo.default.useState(o),[k,x]=R(F5),P=d?()=>{d(y||"")}:void 0;bo.default.useEffect(()=>{w(o)},[o]);let I=bo.default.useRef(null),_=Dr(I,f),M=de(I),T=()=>{M.open(ne({position:{width:"small"},groups:[{key:"tab",commands:[{key:"delete",title:"Delete",icon:S.Trashcan,trigger:()=>{m.change(L=>{li.removeTab(L,p.key)})}}]}]}))};return bo.default.createElement(F.View,{ref:t,style:[x.blockTabsBodyItem,g.Padding.xsmallVertical,r&&x.blockTabsBodyItemActive,i&&x.blockTabsBodyItemFirst,a&&x.blockTabsBodyItemLast],...h},bo.default.createElement(b,{style:x.flexPadding}),bo.default.createElement(b,{style:[x.blockTabsBodyItemTitleContainer,s&&$e.translucent,g.Padding.xsmallVertical]},l?bo.default.createElement(bo.default.Fragment,null,bo.default.createElement(m0.default,{value:y,inputStyle:{...He.Label,color:k.colors.text.main,backgroundColor:"transparent",border:"none",...np.Bold,padding:0,margin:0,lineHeight:"22px"},title:y,placeholder:n,onChange:L=>w(L.target.value),onBlur:P})):bo.default.createElement(A,{style:[so.Label,x.blockTabsBodyItemReadonlyTitle,r&&x.blockTabsBodyItemTitleReadonlyActive]},y||n)),u?bo.default.createElement(F.View.Child,{style:[x.tabItemOptions],inactiveStyle:M.opened||l?$e.visible:$e.hidden,activeStyle:$e.visible},bo.default.createElement(B,{ref:_,kind:"grey",size:"small",rounded:!0,active:M.opened,onPress:T,icon:S.GrabberVertical,title:`Click for options.
Drag to move.`})):null,bo.default.createElement(b,{style:x.flexPadding}))});jb.displayName="TabItem";var F5=z.create({blockTabsBodyItem:e=>({flexGrow:0,flexShrink:1,flexBasis:"auto",textOverflow:"ellipsis",maxWidth:"100%",minWidth:0,borderWidth:1,borderColor:e.colors.border.main,borderLeftColor:"transparent",backgroundColor:e.colors.background.muted,flexDirection:"row",cursor:"pointer"}),blockTabsBodyItemFirst:e=>({borderLeftColor:e.colors.border.main,borderTopLeftRadius:e.radiuses.medium}),blockTabsBodyItemLast:e=>({borderTopRightRadius:e.radiuses.medium}),blockTabsBodyItemActive:e=>({flexGrow:0,flexShrink:0,flexBasis:"auto",cursor:"auto",backgroundColor:e.colors.background.main,borderBottomColor:e.colors.background.main}),flexPadding:{minWidth:8,width:16,flexGrow:1,flexShrink:1,flexBasis:"16px"},blockTabsBodyItemTitleContainer:{flexGrow:0,flexShrink:1,flexBasis:"auto",maxWidth:"100%",minWidth:0,display:"flex",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",flexDirection:"row"},blockTabsBodyItemReadonlyTitle:e=>({color:e.colors.text.muted,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}),blockTabsBodyItemTitleReadonlyActive:e=>({color:e.colors.text.main}),tabItemOptions:{marginLeft:g.medium,display:"flex",alignItems:"center",justifyContent:"center"}});c();var f0=C(O());W();function Zb(e){let{active:t,children:o,...n}=e;return f0.default.createElement(b,{style:[p0.blockTabsItem,t&&p0.blockTabsItemActive],...n},o)}var p0=X.create({blockTabsItem:{display:"none",pageBreakInside:"avoid"},blockTabsItemActive:{display:"flex"}});c();var Xd=C(O());var V5=5,g0={activeKeys:{},activeTitles:[]},q5=ct({key:"tabsAtom",default:g0,effects:[pi.recoilEffect("@recoil/tabsAtom",g0)]});function h0(e){let{sections:t,selected:o}=Xd.useContext(Gr),n=Xd.useMemo(()=>{let u=new Map;return e.blockNodes.forEach(d=>{let m=jc();[...t.entries()].filter(([p])=>d.getNode(p)).forEach(([p,f])=>{m.set(p,f)}),u.set(d.key,m)}),u},[t,e]),[r,i]=Do(q5),[a,s]=Ai(!1,[o]),l=Ua();return Xd.useMemo(()=>{let{value:u,readOnly:d}=l;return[(d?null:H5(u,e))||G5(r,e,a,n,o)||(d?X5(r,e):null)||e.blockNodes.first(),p=>{let f=p.data.get("title");s(!0),i(h=>({activeKeys:{...h.activeKeys,[e.key]:p.key},activeTitles:f?h.activeTitles.filter(y=>y!==f).concat([f]).slice(-V5):h.activeTitles}))}]},[l,r,i,a,n,o])}function G5(e,t,o,n,r){let i=e.activeKeys[t.key];return o&&i?t.blockNodes.find(a=>a.key===i):t.blockNodes.find(a=>{var s;return[...((s=n.get(a.key))==null?void 0:s.values())||[]].includes(r||"")})}function H5(e,t){if(e.selection.isFocused)return t.blockNodes.find(o=>ye.isTextRange(e.selection)&&(e.selection.hasAnchorIn(o)||e.selection.hasFocusIn(o)))}function X5(e,t){return t.blockNodes.map(o=>{let n=o.data.get("title");return{node:o,score:e.activeTitles.indexOf(n)}}).filter(({score:o})=>o>=0).sortBy(({score:o})=>-o).map(({node:o})=>o).first()||void 0}function y0(e){let{node:t,children:o,editor:n}=e,[r,i]=h0(t),a=t.getChildIndex(r.key),s=Ye(),l=to.default.useRef(null),u=to.default.useRef(null),d=to.default.useCallback(f=>{let h=l.current;h&&h.measureInWindow((y,w)=>{u.current=w}),n.readOnly||n.change(y=>{y.blur()}),i(f)},[n,i]);to.default.useEffect(()=>{let{current:f}=u;f&&(u.current=null,window.requestAnimationFrame(()=>{let h=l.current;h&&h.measureInWindow((y,w)=>{window.scrollBy(0,w-f)})}))},[r]);let m=t.blockNodes.map((f,h)=>to.default.createElement(Yb,{key:f.key,editor:n,tab:f,index:h,active:h===a,isFirst:h===0,isLast:h===t.nodes.size-1,onSelect:y=>d(y)})),p=to.default.Children.map(o,(f,h)=>to.default.createElement(Zb,{key:f&&typeof f=="object"&&"key"in f?f.key:h,active:h===a},f));return s?to.default.createElement(ge,{...e},to.default.createElement(b,{ref:l},to.default.Children.map(o,(f,h)=>{let y=t.nodes.toArray()[h];return to.default.createElement(ge,{key:y.key,...e},to.default.createElement(b,{ref:l},to.default.createElement(Xb,null,to.default.createElement(Yb,{editor:n,key:y.key,tab:y,index:h,active:!0,isFirst:!0,isLast:!1,onSelect:()=>{}})),to.default.createElement(Hb,null,to.default.createElement(Zb,{active:!0},f))))}))):to.default.createElement(ge,{...e},to.default.createElement(b,{ref:l},to.default.createElement(Xb,null,m),to.default.createElement(Hb,null,p)))}c();var Qb=C(O());W();function v0(e){let{attributes:t,children:o}=e;return Qb.default.createElement(ge,{...e},Qb.default.createElement(b,{...t},o))}c();var Kd=C(Br());var b0={onKeyDown:K5};function K5(e,t){let{value:o}=t;return xn(o.selection)?null:(0,Kd.default)("backspace",e)&&o.isCollapsed?$5(e,t):(0,Kd.default)("enter",e)?U5(e,t):(0,Kd.default)("mod+enter",e)?j5(e,t):(0,Kd.default)("mod+a",e)?Y5(e,t):null}function $5(e,t){let{value:o}=t,n=li.getCurrentTab(o);return!n||!Au(n)?null:(e.preventDefault(),li.removeTab(t,n.key))}function U5(e,t){let{value:o}=t,n=li.getCurrentTab(o);if(!n||n.nodes.size<=1||!Au(n.blockNodes.last()))return null;let r=o.document.getClosest(o.startKey,u=>"type"in u&&u.type===In);if(!r)throw new Error("Could not find parent of type BLOCK_TABS while exiting tab when enter is pressed twice");let i=o.document.getParent(r.key);if(!i)throw new Error("Could not find parent of tab while exiting tab when enter is pressed twice");let a=i.getChildIndex(r.key);if(a<0)throw new Error("Could not find child of parent while exiting tab when enter is pressed twice");e.preventDefault();let s=n.blockNodes.last();s&&t.removeNodeByKey(s.key);let l=Co.create({type:pe,nodes:[nC.create("")]});return t.insertNodeByKey(i.key,a+1,l).collapseToStartOf(l)}function j5(e,t){let{value:o}=t;if(!li.getCurrentTab(o))return null;let r=o.document.getClosest(o.startKey,s=>"type"in s&&s.type===In);if(!r)throw new Error("Could not find parent of type BLOCK_TABS while exiting tab when enter are pressed twice");let i=o.document.getParent(r.key);if(!i)throw new Error("Could not find parent of tab while exiting tab on mod+enter");if(i.getChildIndex(r.key)<0)throw new Error("Could not find child of parent while exiting tab on mod+enter");return e.preventDefault(),ft(t,r),t}function Y5(e,t){let{value:o}=t,n=li.getCurrentTab(o);return n?(e.preventDefault(),t.collapseToStartOf(n).extendToEndOf(n)):null}var S0={renderNode:Z5,renderVirtualNode:Q5,renderMark:J5,estimateNodeSize:(e,t)=>{let o=qr(e,t);return{height:mc(e,t,{blockSpacing:o})}}};function Z5(e){if(Co.isBlock(e.node)&&!by.isInline(e.parent)){let t=e;switch(e.node.type){case pe:return Ge.createElement(XP,{...t,node:e.node,parent:e.parent});case ro:case At:case io:return Ge.createElement(MP,{...t,node:e.node,parent:e.parent});case Bo:return Ge.createElement(LP,{...t,node:e.node,parent:e.parent});case Ae:case Fe:case Qe:return Ge.createElement(OT,{...t,node:e.node,parent:e.parent});case Vn:return Ge.createElement(qM,{...t,node:e.node,parent:e.parent});case On:return Ge.createElement(GR,{...t,node:e.node,parent:e.parent});case Mi:return Ge.createElement(KR,{...t,node:e.node,parent:e.parent});case _n:return Ge.createElement(IT,{...t,node:e.node,parent:e.parent});case ai:return Ge.createElement(NE,{...t,node:e.node,parent:e.parent});case pa:return Ge.createElement(kT,{...t,node:e.node,parent:e.parent});case rn:return Ge.createElement(YR,{...t,node:e.node,parent:e.parent});case ko:return Ge.createElement(kR,{...t,node:e.node,parent:e.parent});case Ao:return Ge.createElement(YP,{...t,node:e.node,parent:e.parent});case Ft:return Ge.createElement(UP,{...t,node:e.node,parent:e.parent});case In:return Ge.createElement(y0,{...t,node:e.node,parent:e.parent});case ur:return Ge.createElement(v0,{...t,node:e.node,parent:e.parent});case Gs:return Ge.createElement($E,{...t,node:e.node,parent:e.parent});case $c:return Ge.createElement(cT,{...t,node:e.node,parent:e.parent});case ha:return Ge.createElement(sT,{...t,node:e.node,parent:e.parent});case Li:return Ge.createElement(aP,{...t,node:e.node,parent:e.parent});case ma:return Ge.createElement(CT,{...t,node:e.node,parent:e.parent});case Mr:return Ge.createElement(QR,{...t,node:e.node,parent:e.parent});case fa:return Ge.createElement(mT,{...t,node:e.node,parent:e.parent})}}if(by.isInline(e.node)&&!Xc.isDocument(e.parent))switch(e.node.type){case zo:return Ge.createElement(IP,{...e,node:e.node,parent:e.parent});case Va:return Ge.createElement(DE,{...e,node:e.node,parent:e.parent});case Kc:return Ge.createElement(UE,{...e,node:e.node,parent:e.parent});case Pm:return Ge.createElement(VR,{...e,node:e.node,parent:e.parent})}return null}function Q5(e){switch(e.node.type){case Ae:case Fe:case Qe:return Ge.createElement(_T,{...e,key:e.node.key})}}function J5(e){switch(e.mark.type){case Rn:return Ge.createElement(BE,{...e});case Pn:return Ge.createElement(WE,{...e});case dr:return Ge.createElement(VE,{...e});case ao:return Ge.createElement(GE,{...e});case Nu:return Ge.createElement(XE,{...e});case Tm:case Mm:case Em:return Ge.createElement(uT,{...e})}return null}var RE=Ze.forwardRef(function(t,o){var Rr,V,J,j,ee,we;let{value:n,baseValue:r,participants:i=[],onChange:a,onActivity:s,placeholder:l,contentReferenceContext:u,uploadFiles:d,updateFile:m,logAnalyticsEvent:p,readOnly:f=!1,style:h,sectionIDs:y,selectedSection:w,isDiff:k,blockLayoutComponent:x,rightGutterComponent:P,integrationBlocksRemote:I,getIntegrationsBlocks:_,onBlockHover:M}=t,{mode:T}=Ze.useContext(Fo),L=Ze.useRef(null),q=Dr(L,o),G=Ze.useMemo(()=>({...Gv,...x?{blockLayoutComponent:x}:{},...P?{rightGutterComponent:P}:{},onBlockHover:M,getIntegrationsBlocks:_}),[u==null?void 0:u.space,u==null?void 0:u.revision,u==null?void 0:u.page,M,_]);u&&(G.contentReferenceContext=u),d&&(G.uploadFiles=d),m&&(G.updateFile=m),p&&(G.logAnalyticsEvent=p),G.integrationBlocksRemote=I;let[,U]=R(D),H=MR(G),[Y]=KM(),oe=eP(_),ce=TP(G),Ee=Dk(n.document,On),Ne=Ze.useMemo(()=>[S0,Y,LR,$R,QP,b0,KP,NP,ce,...WP,HP,iP,CP,oe,tP,sP,qR,Ee,aT,H,BR,rI,NR],[H,ce,Ee]),kt=Ye(),Go=Ze.useRef(null),Jr=ue=>{let Me=ue.value,Be=n.document!==Me.document;s&&Be&&(Go.current?clearTimeout(Go.current):s({typing:!0}),Go.current=setTimeout(()=>{Go.current=null,s({typing:!1})},2e3)),a(ue)},ei=si(n.document),st=Ze.useMemo(()=>{let ue=i.map(Me=>{if(!Me.selection||!Me.selection.anchorPath||!Me.selection.focusPath)return;let Be=n.document.getNodeAtPath(Me.selection.anchorPath),rt=n.document.getNodeAtPath(Me.selection.focusPath);if(!(!Be||!rt))return JP(Me,Be.key,rt.key)}).filter(me).flat();return oC.create(ue)},[i,n.document]);Ze.useEffect(()=>{var ue,Me;if((ue=L.current)!=null&&ue.value.isFocused)return Lp((Me=L.current)!=null&&Me.value.selection.isCollapsed?"editor-selection-collapsed":"editor-selection-expanded")},[(Rr=L.current)==null?void 0:Rr.value.isFocused,(V=L.current)==null?void 0:V.value.selection.isCollapsed]);let nn=Ze.useRef(null),Ht=(j=(J=L.current)==null?void 0:J.value)!=null&&j.selection?xn((we=(ee=L.current)==null?void 0:ee.value)==null?void 0:we.selection):!1;Ze.useEffect(()=>{let ue=Ht?"block":"text";nn.current&&ue!==nn.current&&(p==null||p({type:"edit_switch_selection_mode",selectionMode:ue})),nn.current=Ht?"block":"text"},[Ht]);let[Dt,Bs]=Ze.useState(null),zs=Ze.useMemo(()=>({sections:y||jc(),active:Dt,selected:w,setActive:Bs}),[y,Dt]),Fn=r===null?null:r===void 0?void 0:r.document;return Ze.createElement(yI,{original:Fn,modified:n.document},Ze.createElement(Gr.Provider,{value:zs},Ze.createElement(ae.Provider,{value:G},Ze.createElement(Pa.View,{style:[ru.editor,h],isPDF:kt},f?null:Ze.createElement(no,{onPress:()=>{var ue;(ue=L.current)==null||ue.change(Me=>xy(Me,"DOCUMENT_START"))}},Ze.createElement(b,{style:[ru.editorFocusArea,ru.editorFocusAreaTop]})),ei&&l&&!n.isFocused&&!f?Ze.createElement(G.blockLayoutComponent,{renderMode:"centered"},Ze.createElement(b,{style:[ru.placeholder]},Ze.createElement(A,{style:[U.Body,U.textMuted]},l))):null,Ze.createElement(Fk,{ref:q,testID:"page.contentEditor",value:n,onChange:Jr,readOnly:f,selections:st,plugins:Ne,virtualize:T==="app",enableBlockContainment:f&&!k},!f&&Wt(n.selection)?Ze.createElement(hP,{value:n,selection:n.selection}):null),f?null:Ze.createElement(no,{onPress:()=>{var ue;(ue=L.current)==null||ue.change(Me=>xy(Me,"DOCUMENT_END"))}},Ze.createElement(b,{style:[ru.editorFocusArea,ru.editorFocusAreaBottom]}))))))}),ru=X.create({editor:{position:"relative"},editorFocusArea:{position:"absolute",cursor:"text",right:0,left:0},editorFocusAreaTop:{height:g.large,top:-g.large},editorFocusAreaBottom:{height:g.large,bottom:-g.large},placeholder:{position:"absolute",top:g.small}});c();var Bn=C(O());c();c();var om=C(O());c();var ra=C(O());c();var Sn=C(O());c();var Rc="right-scroll-bar-position",Pc="width-before-scroll-bar",Jb="with-scroll-bars-hidden",eS="--removed-body-scroll-bar-size";c();c();function w0(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}c();var C0=C(O());function k0(e,t){var o=(0,C0.useState)(function(){return{value:e,callback:t,facade:{get current(){return o.value},set current(n){var r=o.value;r!==n&&(o.value=n,o.callback(n,r))}}}})[0];return o.callback=t,o.facade}c();function $d(e,t){return k0(t||null,function(o){return e.forEach(function(n){return w0(n,o)})})}c();c();c();function x0(e){return e}function O0(e,t){t===void 0&&(t=x0);var o=[],n=!1,r={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return o.length?o[o.length-1]:e},useMedium:function(i){var a=t(i,n);return o.push(a),function(){o=o.filter(function(s){return s!==a})}},assignSyncMedium:function(i){for(n=!0;o.length;){var a=o;o=[],a.forEach(i)}o={push:function(s){return i(s)},filter:function(){return o}}},assignMedium:function(i){n=!0;var a=[];if(o.length){var s=o;o=[],s.forEach(i),a=o}var l=function(){var d=a;a=[],d.forEach(i)},u=function(){return Promise.resolve().then(l)};u(),o={push:function(d){a.push(d),u()},filter:function(d){return a=a.filter(d),o}}}};return r}function Ud(e,t){return t===void 0&&(t=x0),O0(e,t)}function Tc(e){e===void 0&&(e={});var t=O0(null);return t.options=Ko({async:!0,ssr:!1},e),t}c();var _0=C(O()),I0=function(e){var t=e.sideCar,o=Fs(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return _0.createElement(n,Ko({},o))};I0.isSideCarExport=!0;function Ec(e,t){return e.useMedium(t),I0}var Sh=Tc();var tS=function(){},wh=Sn.forwardRef(function(e,t){var o=Sn.useRef(null),n=Sn.useState({onScrollCapture:tS,onWheelCapture:tS,onTouchMoveCapture:tS}),r=n[0],i=n[1],a=e.forwardProps,s=e.children,l=e.className,u=e.removeScrollBar,d=e.enabled,m=e.shards,p=e.sideCar,f=e.noIsolation,h=e.inert,y=e.allowPinchZoom,w=e.as,k=w===void 0?"div":w,x=Fs(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),P=p,I=$d([o,t]),_=Ko(Ko({},x),r);return Sn.createElement(Sn.Fragment,null,d&&Sn.createElement(P,{sideCar:Sh,removeScrollBar:u,shards:m,noIsolation:f,inert:h,setCallbacks:i,allowPinchZoom:!!y,lockRef:o}),a?Sn.cloneElement(Sn.Children.only(s),Ko(Ko({},_),{ref:I})):Sn.createElement(k,Ko({},_,{className:l,ref:I}),s))});wh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};wh.classNames={fullWidth:Pc,zeroRight:Rc};c();c();c();function iu(){return iu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},iu.apply(this,arguments)}var wt=C(O());c();var jd="data-focus-lock",Ch="data-focus-lock-disabled",R0="data-no-focus-lock",P0="data-autofocus-inside",T0="data-no-autofocus";var L0=C(O());c();var au=C(O());var su={width:"1px",height:"0px",padding:0,overflow:"hidden",position:"fixed",top:"1px",left:"1px"},E0=function(t){var o=t.children;return au.createElement(au.Fragment,null,au.createElement("div",{key:"guard-first","data-focus-guard":!0,"data-focus-auto-guard":!0,style:su}),o,o&&au.createElement("div",{key:"guard-last","data-focus-guard":!0,"data-focus-auto-guard":!0,style:su}))};E0.propTypes={};E0.defaultProps={children:null};c();var kh=Ud({},function(e){var t=e.target,o=e.currentTarget;return{target:t,currentTarget:o}}),xh=Ud(),M0=Ud(),Oh=Tc({async:!0});var tB=[],oS=wt.forwardRef(function(t,o){var n,r=wt.useState(),i=r[0],a=r[1],s=wt.useRef(),l=wt.useRef(!1),u=wt.useRef(null),d=t.children,m=t.disabled,p=t.noFocusGuards,f=t.persistentFocus,h=t.crossFrame,y=t.autoFocus,w=t.allowTextSelection,k=t.group,x=t.className,P=t.whiteList,I=t.hasPositiveIndices,_=t.shards,M=_===void 0?tB:_,T=t.as,L=T===void 0?"div":T,q=t.lockProps,G=q===void 0?{}:q,U=t.sideCar,H=t.returnFocus,Y=t.focusOptions,oe=t.onActivation,ce=t.onDeactivation,Ee=wt.useState({}),Ne=Ee[0],kt=wt.useCallback(function(){u.current=u.current||document&&document.activeElement,s.current&&oe&&oe(s.current),l.current=!0},[oe]),Go=wt.useCallback(function(){l.current=!1,ce&&ce(s.current)},[ce]);(0,L0.useEffect)(function(){m||(u.current=null)},[]);var Jr=wt.useCallback(function(Fn){var Rr=u.current;if(Rr&&Rr.focus){var V=typeof H=="function"?H(Rr):H;if(V){var J=typeof V=="object"?V:void 0;u.current=null,Fn?Promise.resolve().then(function(){return Rr.focus(J)}):Rr.focus(J)}}},[H]),ei=wt.useCallback(function(Fn){l.current&&kh.useMedium(Fn)},[]),st=xh.useMedium,nn=wt.useCallback(function(Fn){s.current!==Fn&&(s.current=Fn,a(Fn))},[]),Ht=iu((n={},n[Ch]=m&&"disabled",n[jd]=k,n),G),Dt=p!==!0,Bs=Dt&&p!=="tail",zs=$d([o,nn]);return wt.createElement(wt.Fragment,null,Dt&&[wt.createElement("div",{key:"guard-first","data-focus-guard":!0,tabIndex:m?-1:0,style:su}),I?wt.createElement("div",{key:"guard-nearest","data-focus-guard":!0,tabIndex:m?-1:1,style:su}):null],!m&&wt.createElement(U,{id:Ne,sideCar:Oh,observed:i,disabled:m,persistentFocus:f,crossFrame:h,autoFocus:y,whiteList:P,shards:M,onActivation:kt,onDeactivation:Go,returnFocus:Jr,focusOptions:Y}),wt.createElement(L,iu({ref:zs},Ht,{className:x,onBlur:st,onFocus:ei}),d),Bs&&wt.createElement("div",{"data-focus-guard":!0,tabIndex:m?-1:0,style:su}))});oS.propTypes={};oS.defaultProps={children:void 0,disabled:!1,returnFocus:!1,focusOptions:void 0,noFocusGuards:!1,autoFocus:!0,persistentFocus:!1,crossFrame:!0,hasPositiveIndices:void 0,allowTextSelection:void 0,group:void 0,className:void 0,whiteList:void 0,shards:void 0,as:"div",lockProps:{},onActivation:void 0,onDeactivation:void 0};var N0=oS;c();function nS(e){var t=window,o=t.setImmediate;typeof o<"u"?o(e):setTimeout(e,1)}var D0=N0;c();var _h=Tc(),Ih="data-focus-on-hidden";var A0=ra.forwardRef(function(e,t){var o=ra.useState(!1),n=o[0],r=o[1],i=e.children,a=e.autoFocus,s=e.shards,l=e.enabled,u=l===void 0?!0:l,d=e.scrollLock,m=d===void 0?!0:d,p=e.focusLock,f=p===void 0?!0:p,h=e.returnFocus,y=h===void 0?!0:h,w=e.inert,k=e.allowPinchZoom,x=e.sideCar,P=e.className,I=e.shouldIgnore,_=e.style,M=e.as,T=Fs(e,["children","autoFocus","shards","enabled","scrollLock","focusLock","returnFocus","inert","allowPinchZoom","sideCar","className","shouldIgnore","style","as"]),L=x,q=n.onActivation,G=n.onDeactivation,U=Fs(n,["onActivation","onDeactivation"]),H=Ko(Ko({},U),{sideCar:x,shards:s,allowPinchZoom:k,as:M,inert:w,style:_,enabled:u&&m});return ra.createElement(ra.Fragment,null,ra.createElement(D0,{ref:t,sideCar:x,disabled:!(n&&u&&f),returnFocus:y,autoFocus:a,shards:s,onActivation:q,onDeactivation:G,className:P,whiteList:I,lockProps:H,as:wh},i),u&&ra.createElement(L,Ko({},T,{sideCar:_h,setLockProps:r,shards:s})))});c();c();c();var oL=C(O());c();c();c();function Yd(e,t){return Yd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Yd(e,t)}function rS(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Yd(e,t)}var Rh=C(O());function oB(e,t){function o(n){return n.displayName||n.name||"Component"}return function(r){var i=[],a;function s(){a=e(i.map(function(u){return u.props})),t(a)}var l=function(u){rS(d,u);function d(){return u.apply(this,arguments)||this}d.peek=function(){return a};var m=d.prototype;return m.componentDidMount=function(){i.push(this),s()},m.componentDidUpdate=function(){s()},m.componentWillUnmount=function(){var f=i.indexOf(this);i.splice(f,1),s()},m.render=function(){return Rh.default.createElement(r,this.props)},d}(Rh.PureComponent);return pf(l,"displayName","SideEffect("+o(r)+")"),l}}var B0=oB;c();c();c();c();var wn=function(e){for(var t=Array(e.length),o=0;o<e.length;++o)t[o]=e[o];return t},Zd=function(e){return Array.isArray(e)?e:[e]};c();var nB=function(e){if(e.nodeType!==Node.ELEMENT_NODE)return!1;var t=window.getComputedStyle(e,null);return!t||!t.getPropertyValue?!1:t.getPropertyValue("display")==="none"||t.getPropertyValue("visibility")==="hidden"},z0=function(e){return e.parentNode&&e.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE?e.parentNode.host:e.parentNode},W0=function(e){return e===document||e&&e.nodeType===Node.DOCUMENT_NODE},rB=function(e,t){return!e||W0(e)||!nB(e)&&t(z0(e))},iS=function(e,t){var o=e.get(t);if(o!==void 0)return o;var n=rB(t,iS.bind(void 0,e));return e.set(t,n),n},iB=function(e,t){return e&&!W0(e)?sB(e)?t(z0(e)):!1:!0},aS=function(e,t){var o=e.get(t);if(o!==void 0)return o;var n=iB(t,aS.bind(void 0,e));return e.set(t,n),n},sS=function(e){return e.dataset},aB=function(e){return e.tagName==="BUTTON"},F0=function(e){return e.tagName==="INPUT"},cS=function(e){return F0(e)&&e.type==="radio"},V0=function(e){return!((F0(e)||aB(e))&&(e.type==="hidden"||e.disabled))},sB=function(e){var t=e.getAttribute(T0);return![!0,"true",""].includes(t)},Qd=function(e){var t;return!!(e&&(!((t=sS(e))===null||t===void 0)&&t.focusGuard))},cu=function(e){return!Qd(e)},q0=function(e){return!!e};c();var cB=function(e,t){var o=e.tabIndex-t.tabIndex,n=e.index-t.index;if(o){if(!e.tabIndex)return 1;if(!t.tabIndex)return-1}return o||n},lS=function(e,t,o){return wn(e).map(function(n,r){return{node:n,index:r,tabIndex:o&&n.tabIndex===-1?(n.dataset||{}).focusGuard?0:-1:n.tabIndex}}).filter(function(n){return!t||n.tabIndex>=0}).sort(cB)};c();c();var G0=["button:enabled","select:enabled","textarea:enabled","input:enabled","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[tabindex]","[contenteditable]","[autofocus]"];var uS=G0.join(","),lB="".concat(uS,", [data-focus-guard]"),H0=function(e,t){var o;return wn(((o=e.shadowRoot)===null||o===void 0?void 0:o.children)||e.children).reduce(function(n,r){return n.concat(r.matches(t?lB:uS)?[r]:[],H0(r))},[])},Ph=function(e,t){return e.reduce(function(o,n){return o.concat(H0(n,t),n.parentNode?wn(n.parentNode.querySelectorAll(uS)).filter(function(r){return r===n}):[])},[])},X0=function(e){var t=e.querySelectorAll("[".concat(P0,"]"));return wn(t).map(function(o){return Ph([o])}).reduce(function(o,n){return o.concat(n)},[])};var dS=function(e,t){return wn(e).filter(function(o){return iS(t,o)}).filter(function(o){return V0(o)})},mS=function(e,t){return t===void 0&&(t=new Map),wn(e).filter(function(o){return aS(t,o)})},Jd=function(e,t,o){return lS(dS(Ph(e,o),t),!0,o)},pS=function(e,t){return lS(dS(Ph(e),t),!1)},K0=function(e,t){return dS(X0(e),t)},Ts=function(e,t){return e.shadowRoot?Ts(e.shadowRoot,t):Object.getPrototypeOf(e).contains!==void 0&&Object.getPrototypeOf(e).contains.call(e,t)?!0:wn(e.children).some(function(o){return Ts(o,t)})};c();var uB=function(e){for(var t=new Set,o=e.length,n=0;n<o;n+=1)for(var r=n+1;r<o;r+=1){var i=e[n].compareDocumentPosition(e[r]);(i&Node.DOCUMENT_POSITION_CONTAINED_BY)>0&&t.add(r),(i&Node.DOCUMENT_POSITION_CONTAINS)>0&&t.add(n)}return e.filter(function(a,s){return!t.has(s)})},$0=function(e){return e.parentNode?$0(e.parentNode):e},lu=function(e){var t=Zd(e);return t.filter(Boolean).reduce(function(o,n){var r=n.getAttribute(jd);return o.push.apply(o,r?uB(wn($0(n).querySelectorAll("[".concat(jd,'="').concat(r,'"]:not([').concat(Ch,'="disabled"])')))):[n]),o},[])};c();var U0=function(e){return e.activeElement?e.activeElement.shadowRoot?U0(e.activeElement.shadowRoot):e.activeElement:void 0},uu=function(){return document.activeElement?document.activeElement.shadowRoot?U0(document.activeElement.shadowRoot):document.activeElement:void 0};var dB=function(e){return e===document.activeElement},mB=function(e){return!!wn(e.querySelectorAll("iframe")).some(function(t){return dB(t)})},Th=function(e){var t=document&&uu();return!t||t.dataset&&t.dataset.focusGuard?!1:lu(e).some(function(o){return Ts(o,t)||mB(o)})};c();var fS=function(){var e=document&&uu();return e?wn(document.querySelectorAll("[".concat(R0,"]"))).some(function(t){return Ts(t,e)}):!1};c();c();c();var pB=function(e,t){return t.filter(cS).filter(function(o){return o.name===e.name}).filter(function(o){return o.checked})[0]||e},Eh=function(e,t){return cS(e)&&e.name?pB(e,t):e},j0=function(e){var t=new Set;return e.forEach(function(o){return t.add(Eh(o,e))}),e.filter(function(o){return t.has(o)})};c();var gS=function(e){return e[0]&&e.length>1?Eh(e[0],e):e[0]},hS=function(e,t){return e.length>1?e.indexOf(Eh(e[t],e)):t};var yS="NEW_FOCUS",Y0=function(e,t,o,n){var r=e.length,i=e[0],a=e[r-1],s=Qd(o);if(!(o&&e.indexOf(o)>=0)){var l=o!==void 0?t.indexOf(o):-1,u=n?t.indexOf(n):l,d=n?e.indexOf(n):-1,m=l-u,p=t.indexOf(i),f=t.indexOf(a),h=j0(t),y=o!==void 0?h.indexOf(o):-1,w=y-(n?h.indexOf(n):l),k=hS(e,0),x=hS(e,r-1);if(l===-1||d===-1)return yS;if(!m&&d>=0)return d;if(l<=p&&s&&Math.abs(m)>1)return x;if(l>=f&&s&&Math.abs(m)>1)return k;if(m&&Math.abs(w)>1)return d;if(l<=p)return x;if(l>f)return k;if(m)return Math.abs(m)>1?d:(r+d+m)%r}};c();var fB=function(e){return function(t){var o,n=(o=sS(t))===null||o===void 0?void 0:o.autofocus;return t.autofocus||n!==void 0&&n!=="false"||e.indexOf(t)>=0}},Z0=function(e,t,o){var n=e.map(function(i){var a=i.node;return a}),r=mS(n.filter(fB(o)));return r&&r.length?gS(r):gS(mS(t))};c();var bS=function(e,t){return t===void 0&&(t=[]),t.push(e),e.parentNode&&bS(e.parentNode.host||e.parentNode,t),t},vS=function(e,t){for(var o=bS(e),n=bS(t),r=0;r<o.length;r+=1){var i=o[r];if(n.indexOf(i)>=0)return i}return!1},Mh=function(e,t,o){var n=Zd(e),r=Zd(t),i=n[0],a=!1;return r.filter(Boolean).forEach(function(s){a=vS(a||s,s)||a,o.filter(Boolean).forEach(function(l){var u=vS(i,l);u&&(!a||Ts(u,a)?a=u:a=vS(u,a))})}),a},Q0=function(e,t){return e.reduce(function(o,n){return o.concat(K0(n,t))},[])};var gB=function(e,t){var o=new Map;return t.forEach(function(n){return o.set(n.node,n)}),e.map(function(n){return o.get(n)}).filter(q0)},J0=function(e,t){var o=document&&uu(),n=lu(e).filter(cu),r=Mh(o||e,e,n),i=new Map,a=pS(n,i),s=Jd(n,i).filter(function(p){var f=p.node;return cu(f)});if(!(!s[0]&&(s=a,!s[0]))){var l=pS([r],i).map(function(p){var f=p.node;return f}),u=gB(l,s),d=u.map(function(p){var f=p.node;return f}),m=Y0(d,l,o,t);return m===yS?{node:Z0(a,d,Q0(n,i))}:m===void 0?m:u[m]}};c();var SS=function(e){var t=lu(e).filter(cu),o=Mh(e,e,t),n=new Map,r=Jd([o],n,!0),i=Jd(t,n).filter(function(a){var s=a.node;return cu(s)}).map(function(a){var s=a.node;return s});return r.map(function(a){var s=a.node,l=a.index;return{node:s,index:l,lockItem:i.indexOf(s)>=0,guard:Qd(s)}})};c();var hB=function(e,t){"focus"in e&&e.focus(t),"contentWindow"in e&&e.contentWindow&&e.contentWindow.focus()},wS=0,CS=!1,eL=function(e,t,o){o===void 0&&(o={});var n=J0(e,t);if(!CS&&n){if(wS>2){console.error("FocusLock: focus-fighting detected. Only one focus management system could be active. See https://github.com/theKashey/focus-lock/#focus-fighting"),CS=!0,setTimeout(function(){CS=!1},1);return}wS++,hB(n.node,o.focusOptions),wS--}};var kS=eL;var yB=function(){return document&&document.activeElement===document.body},vB=function(){return yB()||fS()},mu=null,du=null,pu=null,em=!1,bB=function(){return!0},SB=function(t){return(mu.whiteList||bB)(t)},wB=function(t,o){pu={observerNode:t,portaledElement:o}},CB=function(t){return pu&&pu.portaledElement===t};function tL(e,t,o,n){var r=null,i=e;do{var a=n[i];if(a.guard)a.node.dataset.focusAutoGuard&&(r=a);else if(a.lockItem){if(i!==e)return;r=null}else break}while((i+=o)!==t);r&&(r.node.tabIndex=0)}var kB=function(t){return t&&"current"in t?t.current:t},xB=function(t){return t?!!em:em==="meanwhile"},OB=function e(t,o,n){return o&&(o.host===t&&(!o.activeElement||n.contains(o.activeElement))||o.parentNode&&e(t,o.parentNode,n))},_B=function(t,o){return o.some(function(n){return OB(t,n,n)})},Lh=function(){var t=!1;if(mu){var o=mu,n=o.observed,r=o.persistentFocus,i=o.autoFocus,a=o.shards,s=o.crossFrame,l=o.focusOptions,u=n||pu&&pu.portaledElement,d=document&&document.activeElement;if(u){var m=[u].concat(a.map(kB).filter(Boolean));if((!d||SB(d))&&(r||xB(s)||!vB()||!du&&i)&&(u&&!(Th(m)||d&&_B(d,m)||CB(d,u))&&(document&&!du&&d&&!i?(d.blur&&d.blur(),document.body.focus()):(t=kS(m,du,{focusOptions:l}),pu={})),em=!1,du=document&&document.activeElement),document){var p=document&&document.activeElement,f=SS(m),h=f.map(function(y){var w=y.node;return w}).indexOf(p);h>-1&&(f.filter(function(y){var w=y.guard,k=y.node;return w&&k.dataset.focusAutoGuard}).forEach(function(y){var w=y.node;return w.removeAttribute("tabIndex")}),tL(h,f.length,1,f),tL(h,-1,-1,f))}}}return t},nL=function(t){Lh()&&t&&(t.stopPropagation(),t.preventDefault())},Nh=function(){return nS(Lh)},rL=function(t){var o=t.target,n=t.currentTarget;n.contains(o)||wB(n,o)},IB=function(){return null},RB=function(t){var o=t.children;return oL.createElement("div",{onBlur:Nh,onFocus:rL},o)};RB.propTypes={};var iL=function(){em="just",setTimeout(function(){em="meanwhile"},0)},PB=function(){document.addEventListener("focusin",nL),document.addEventListener("focusout",Nh),window.addEventListener("blur",iL)},TB=function(){document.removeEventListener("focusin",nL),document.removeEventListener("focusout",Nh),window.removeEventListener("blur",iL)};function EB(e){return e.filter(function(t){var o=t.disabled;return!o})}function MB(e){var t=e.slice(-1)[0];t&&!mu&&PB();var o=mu,n=o&&t&&t.id===o.id;mu=t,o&&!n&&(o.onDeactivation(),e.filter(function(r){var i=r.id;return i===o.id}).length||o.returnFocus(!t)),t?(du=null,(!n||o.observed!==t.observed)&&t.onActivation(),Lh(!0),nS(Lh)):(TB(),du=null)}kh.assignSyncMedium(rL);xh.assignMedium(Nh);M0.assignMedium(function(e){return e({moveFocusInside:kS,focusInside:Th})});var aL=B0(EB,MB)(IB);var h2e=Ec(Oh,aL);c();c();var Ct=C(O());c();c();var Dh=C(O());c();c();c();var lL=C(O());c();c();var sL;var cL=function(){if(sL)return sL;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function LB(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=cL();return t&&e.setAttribute("nonce",t),e}function NB(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function DB(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var xS=function(){var e=0,t=null;return{add:function(o){e==0&&(t=LB())&&(NB(t,o),DB(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}};var OS=function(){var e=xS();return function(t,o){lL.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&o])}};var Mc=function(){var e=OS(),t=function(o){var n=o.styles,r=o.dynamic;return e(n,r),null};return t};c();var AB={left:0,top:0,right:0,gap:0},_S=function(e){return parseInt(e||"",10)||0},BB=function(e){var t=window.getComputedStyle(document.body),o=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],r=t[e==="padding"?"paddingRight":"marginRight"];return[_S(o),_S(n),_S(r)]},IS=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return AB;var t=BB(e),o=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-o+t[2]-t[0])}};var zB=Mc(),WB=function(e,t,o,n){var r=e.left,i=e.top,a=e.right,s=e.gap;return o===void 0&&(o="margin"),`
  .`.concat(Jb,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(s,"px ").concat(n,`;
  }
  body {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),o==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(s,"px ").concat(n,`;
    `),o==="padding"&&"padding-right: ".concat(s,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Rc,` {
    right: `).concat(s,"px ").concat(n,`;
  }
  
  .`).concat(Pc,` {
    margin-right: `).concat(s,"px ").concat(n,`;
  }
  
  .`).concat(Rc," .").concat(Rc,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Pc," .").concat(Pc,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body {
    `).concat(eS,": ").concat(s,`px;
  }
`)},RS=function(e){var t=e.noRelative,o=e.noImportant,n=e.gapMode,r=n===void 0?"margin":n,i=Dh.useMemo(function(){return IS(r)},[r]);return Dh.createElement(zB,{styles:WB(i,!t,r,o?"":"!important")})};c();var PS=!1;if(typeof window<"u")try{tm=Object.defineProperty({},"passive",{get:function(){return PS=!0,!0}}),window.addEventListener("test",tm,tm),window.removeEventListener("test",tm,tm)}catch(e){PS=!1}var tm,Lc=PS?{passive:!1}:!1;c();var FB=function(e){return e.tagName==="TEXTAREA"},uL=function(e,t){var o=window.getComputedStyle(e);return o[t]!=="hidden"&&!(o.overflowY===o.overflowX&&!FB(e)&&o[t]==="visible")},VB=function(e){return uL(e,"overflowY")},qB=function(e){return uL(e,"overflowX")},TS=function(e,t){var o=t;do{typeof ShadowRoot<"u"&&o instanceof ShadowRoot&&(o=o.host);var n=dL(e,o);if(n){var r=mL(e,o),i=r[1],a=r[2];if(i>a)return!0}o=o.parentNode}while(o&&o!==document.body);return!1},GB=function(e){var t=e.scrollTop,o=e.scrollHeight,n=e.clientHeight;return[t,o,n]},HB=function(e){var t=e.scrollLeft,o=e.scrollWidth,n=e.clientWidth;return[t,o,n]},dL=function(e,t){return e==="v"?VB(t):qB(t)},mL=function(e,t){return e==="v"?GB(t):HB(t)},XB=function(e,t){return e==="h"&&t==="rtl"?-1:1},pL=function(e,t,o,n,r){var i=XB(e,window.getComputedStyle(t).direction),a=i*n,s=o.target,l=t.contains(s),u=!1,d=a>0,m=0,p=0;do{var f=mL(e,s),h=f[0],y=f[1],w=f[2],k=y-w-i*h;(h||k)&&dL(e,s)&&(m+=k,p+=h),s=s.parentNode}while(!l&&s!==document.body||l&&(t.contains(s)||t===s));return(d&&(r&&m===0||!r&&a>m)||!d&&(r&&p===0||!r&&-a>p))&&(u=!0),u};var Ah=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},fL=function(e){return[e.deltaX,e.deltaY]},gL=function(e){return e&&"current"in e?e.current:e},KB=function(e,t){return e[0]===t[0]&&e[1]===t[1]},$B=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},UB=0,fu=[];function hL(e){var t=Ct.useRef([]),o=Ct.useRef([0,0]),n=Ct.useRef(),r=Ct.useState(UB++)[0],i=Ct.useState(function(){return Mc()})[0],a=Ct.useRef(e);Ct.useEffect(function(){a.current=e},[e]),Ct.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(r));var y=xw([e.lockRef.current],(e.shards||[]).map(gL),!0).filter(Boolean);return y.forEach(function(w){return w.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),y.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(r))})}}},[e.inert,e.lockRef.current,e.shards]);var s=Ct.useCallback(function(y,w){if("touches"in y&&y.touches.length===2)return!a.current.allowPinchZoom;var k=Ah(y),x=o.current,P="deltaX"in y?y.deltaX:x[0]-k[0],I="deltaY"in y?y.deltaY:x[1]-k[1],_,M=y.target,T=Math.abs(P)>Math.abs(I)?"h":"v";if("touches"in y&&T==="h"&&M.type==="range")return!1;var L=TS(T,M);if(!L)return!0;if(L?_=T:(_=T==="v"?"h":"v",L=TS(T,M)),!L)return!1;if(!n.current&&"changedTouches"in y&&(P||I)&&(n.current=_),!_)return!0;var q=n.current||_;return pL(q,w,y,q==="h"?P:I,!0)},[]),l=Ct.useCallback(function(y){var w=y;if(!(!fu.length||fu[fu.length-1]!==i)){var k="deltaY"in w?fL(w):Ah(w),x=t.current.filter(function(_){return _.name===w.type&&_.target===w.target&&KB(_.delta,k)})[0];if(x&&x.should){w.cancelable&&w.preventDefault();return}if(!x){var P=(a.current.shards||[]).map(gL).filter(Boolean).filter(function(_){return _.contains(w.target)}),I=P.length>0?s(w,P[0]):!a.current.noIsolation;I&&w.cancelable&&w.preventDefault()}}},[]),u=Ct.useCallback(function(y,w,k,x){var P={name:y,delta:w,target:k,should:x};t.current.push(P),setTimeout(function(){t.current=t.current.filter(function(I){return I!==P})},1)},[]),d=Ct.useCallback(function(y){o.current=Ah(y),n.current=void 0},[]),m=Ct.useCallback(function(y){u(y.type,fL(y),y.target,s(y,e.lockRef.current))},[]),p=Ct.useCallback(function(y){u(y.type,Ah(y),y.target,s(y,e.lockRef.current))},[]);Ct.useEffect(function(){return fu.push(i),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:p}),document.addEventListener("wheel",l,Lc),document.addEventListener("touchmove",l,Lc),document.addEventListener("touchstart",d,Lc),function(){fu=fu.filter(function(y){return y!==i}),document.removeEventListener("wheel",l,Lc),document.removeEventListener("touchmove",l,Lc),document.removeEventListener("touchstart",d,Lc)}},[]);var f=e.removeScrollBar,h=e.inert;return Ct.createElement(Ct.Fragment,null,h?Ct.createElement(i,{styles:$B(r)}):null,f?Ct.createElement(RS,{gapMode:"margin"}):null)}var sDe=Ec(Sh,hL);c();var Wh=C(O());c();var jB=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},gu=new WeakMap,Bh=new WeakMap,zh={},ES=0,YB=function(e,t,o,n){var r=Array.isArray(e)?e:[e];zh[o]||(zh[o]=new WeakMap);var i=zh[o],a=[],s=new Set,l=new Set(r),u=function(m){!m||s.has(m)||(s.add(m),u(m.parentNode))};r.forEach(u);var d=function(m){!m||l.has(m)||Array.prototype.forEach.call(m.children,function(p){if(s.has(p))d(p);else{var f=p.getAttribute(n),h=f!==null&&f!=="false",y=(gu.get(p)||0)+1,w=(i.get(p)||0)+1;gu.set(p,y),i.set(p,w),a.push(p),y===1&&h&&Bh.set(p,!0),w===1&&p.setAttribute(o,"true"),h||p.setAttribute(n,"true")}})};return d(t),s.clear(),ES++,function(){a.forEach(function(m){var p=gu.get(m)-1,f=i.get(m)-1;gu.set(m,p),i.set(m,f),p||(Bh.has(m)||m.removeAttribute(n),Bh.delete(m)),f||m.removeAttribute(o)}),ES--,ES||(gu=new WeakMap,gu=new WeakMap,Bh=new WeakMap,zh={})}},yL=function(e,t,o){o===void 0&&(o="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),r=t||jB(e);return r?(n.push.apply(n,Array.from(r.querySelectorAll("[aria-live]"))),YB(n,r,o,"aria-hidden")):function(){return null}};c();var vL=C(O());var ZB=Mc(),QB=`
 [`+Ih+`] {
   pointer-events: none !important;
 }
`,bL=function(){return vL.createElement(ZB,{styles:QB})};var Es=C(O()),SL=function(e){return"current"in e?e.current:e};function wL(e){var t=e.setLockProps,o=e.onEscapeKey,n=e.onClickOutside,r=e.shards,i=e.onActivation,a=e.onDeactivation,s=e.noIsolation,l=(0,Es.useState)(void 0),u=l[0],d=l[1],m=(0,Es.useRef)(null),p=(0,Es.useRef)(0);return Wh.useEffect(function(){var f=function(k){k.defaultPrevented||(k.code==="Escape"||k.key==="Escape"||k.keyCode===27)&&o&&o(k)},h=function(k){k.defaultPrevented||k.target===m.current||k instanceof MouseEvent&&k.button!==0||r&&r.map(SL).some(function(x){return x&&x.contains(k.target)||x===k.target})||n&&n(k)},y=function(k){h(k),p.current=k.touches.length},w=function(k){p.current=k.touches.length};if(u)return document.addEventListener("keydown",f),document.addEventListener("mousedown",h),document.addEventListener("touchstart",y),document.addEventListener("touchend",w),function(){document.removeEventListener("keydown",f),document.removeEventListener("mousedown",h),document.removeEventListener("touchstart",y),document.removeEventListener("touchend",w)}},[u,n,o]),(0,Es.useEffect)(function(){if(u)return i&&i(u),function(){a&&a()}},[!!u]),(0,Es.useEffect)(function(){var f=function(){return null},h=!1,y=function(k){s||(f=yL(kw([k],(r||[]).map(SL)),document.body,Ih)),d(function(){return k})},w=function(){f(),h||d(null)};return t({onMouseDown:function(k){m.current=k.target},onTouchStart:function(k){m.current=k.target},onActivation:y,onDeactivation:w}),function(){h=!0,t(!1)}},[]),Wh.createElement(bL,null)}var CL=Ec(_h,wL);var JB=function(e){return om.createElement(CL,Ko({},e))},MS=om.forwardRef(function(e,t){return om.createElement(A0,Ko({},e,{ref:t,sideCar:JB}))});W();var LL=C(ML());function NL(e){let t=Bn.useRef(null),[o,n]=Do(av),{medias:r,currentIndex:i}=o,a=()=>{n({medias:[],currentIndex:0})},s=()=>{n(d=>({...d,currentIndex:Math.max(d.currentIndex-1,0)}))},l=()=>{n(d=>({...d,currentIndex:Math.min(d.currentIndex+1,d.medias.length-1)}))},u=d=>{n(m=>({...m,currentIndex:d}))};return Ha({opened:r.length>0,closeOnClick:!1,closeOnOutsideClick:!1,closeOnScroll:!1,closeOnEsc:!0,onClose:a},t),fr(r.length?{Left:()=>s(),Right:()=>l()}:{},"all",[n,!r.length]),r.length?Bn.createElement(Gn,{ref:t},Bn.createElement(MS,null,Bn.createElement(b,{style:yu.imagesZoonPortal},Bn.createElement(LL.default,{imageUrls:r.map(d=>({url:d.url})),index:i,renderIndicator:d=>Bn.createElement(b,{style:yu.indactor},Bn.createElement(b,{style:yu.indicatorElement}),Bn.createElement(b,{style:[yu.indicatorElement,v.alignCenter,v.justifyContentCenter]},Bn.createElement(A,{style:yu.indicatorText},`${d}/${r.length}`)),Bn.createElement(b,{style:[yu.indicatorElement,v.alignEnd,v.justifyContentCenter]},Bn.createElement(B,{icon:S.X,defaultTextStyle:{color:K.WHITE},onPress:()=>a()}))),renderArrowLeft:()=>Bn.createElement(B,{icon:S.ChevronLeft,defaultTextStyle:{color:K.WHITE},onPress:()=>s()}),renderArrowRight:()=>Bn.createElement(B,{icon:S.ChevronRight,defaultTextStyle:{color:K.WHITE},onPress:()=>l()}),onChange:d=>u(d||0),onCancel:()=>a(),enableSwipeDown:!0})))):null}var yu=X.create({imagesZoonPortal:{position:"fixed",top:0,left:0,right:0,bottom:0},indactor:{height:48,position:"absolute",left:0,top:0,right:0,display:"flex",flexDirection:"row",zIndex:20},indicatorElement:{flex:1},indicatorText:{color:K.WHITE}});c();var DL=C(O());function AL(e){let t=ll(),{navigate:o}=ve(),n=uo(),r=vx(),i=Sx(e),a=bx(e),s=gt(i),l=Py(a,"create-space"),u=Py(a,"create-collection")&&g4(e,r);return DL.default.useMemo(()=>qs(e)?{createSpace:l?async(d=!0)=>{let m=await Ja(),p;try{p=(await m.spaces.createSpace(e.organization,{parent:e.collection})).data}catch(f){throw n.notify({title:"Error while creating space",details:Ei(f),kind:"danger"}),f}return te(Ot(p,{type:"space_create"})),d&&o({screen:{type:"space",space:p.id,organization:e.organization,page:""}}),p}:void 0,createCollection:u?async(d=!0)=>{let m=new ni("startCollection");m.label("User",t.uid),m.label("Owner type",Cm(e)?"user":"organization"),m.label("Owner",Cm(e)?e.user:e.organization),e.collection&&m.label("Collection",e.collection),m.label("Perm",a);let[p,f]=fx(h=>Gw(h,{title:"New Collection",owner:e,at:Bw(s.current.collections),createdBy:t.uid,perm:a}));return m.wrapPromise(f),te($C(p,{type:"collection_create",collection:p.key,restricted:!1})),d&&o({screen:{type:"collection",collection:p.key,...Tu(p)}}),p}:void 0}:{createSpace:void 0,createCollection:void 0},[Cm(e)?e.user:e.organization,e.collection,t.uid,s,o,l,u])}function g4(e,t){let o=0,n=e.collection;for(;n;){let r=t.collections.find(i=>i.key===n);n=r?r.collection:void 0,o++}return o<qw}c();var FS=C(O());c();var vu=JSON.parse('{"iconWrapper":"iconWrapper_x37cD","icon":"icon_TnMUQ","active":"active_CllGx","ok":"ok_V1sO-","interactive":"interactive_B2TwX","good":"good_nqe9w","bad":"bad_pz0f3"}');function BL(e){let{active:t=!0,interactive:o=!1,size:n,rating:r}=e,i=h4[r];return FS.createElement(Z,{style:[vu.iconWrapper,vu[r],t&&vu.active,o&&vu.interactive],inlineStyle:{"--rating-size":`${n}px`}},FS.createElement(i,{style:[vu.icon]}))}var h4={["ok"]:S.FeedbackOk.CSS,["good"]:S.FeedbackGood.CSS,["bad"]:S.FeedbackBad.CSS};c();var am=C(O());c();var ir=C(O());W();function zL(e){let{sources:t,pickSource:o,withGitSyncAction:n,onClose:r}=e,[,i]=R(WL),{navigate:a}=ve(),s=()=>{r(),a({screen:l=>l.type!=="space"?l:{sideSheet:{type:"gitsync"}}})};return ir.createElement(kp,{size:"large",onClose:r,title:"Import your content",subtitle:"Choose a file type or platform below to get started importing your data.",footer:ir.createElement(Kn,{icon:S.GitHub,kind:"default",title:"Need to stay in sync?",details:n?"Set up GitHub or GitLab Sync and link a repo for two-way syncing.":"Start a new space, set up GitHub or GitLab Sync, and link a repo for two-way syncing.",actions:n?[{label:"Set up now",onPress:s}]:void 0})},ir.createElement(b,{style:[i.cardsWrapper]},t.map(({title:l,name:u,source:d,icon:m})=>ir.createElement(y4,{key:l,title:u,onPress:()=>o(d),icon:m}))))}function y4(e){let{title:t,description:o,icon:n,onPress:r,style:i}=e,[,a]=R(D),[,s]=R(WL);return ir.createElement(F.TouchableOpacity,{style:[v.directionRow,v.alignCenter,g.Padding.smallVertical,g.Padding.smallRight,s.importCard,i],onPress:r},ir.createElement(b,{style:g.Margin.smallLeft},typeof n=="function"?ir.createElement(n,{size:E.ICON_L}):ir.createElement(Wo,{source:n,style:s.importCardImage})),ir.createElement(b,{style:g.Margin.smallLeft},ir.createElement(b,null,ir.createElement(F.Text.Child,{style:[a.Label,a.text],activeStyle:a.primary},t)),ir.createElement(b,null,ir.createElement(F.Text.Child,{style:[a.Body,a.textMuted],activeStyle:a.primary},o))))}var WL=z.create({importCard:e=>({borderWidth:1,borderColor:e.colors.border.main,borderRadius:4,flexShrink:0,flexGrow:0,flexBasis:"32%",padding:g.small,marginRight:g.small,marginBottom:g.small}),importCardImage:{width:E.ICON_L,height:E.ICON_L},cardsWrapper:{flexWrap:"wrap",flexDirection:"row",marginRight:-g.small}});c();function Ac(e){return"organization"in e}c();var Xh=C(O());c();var ia=C(O());c();var ki=C(O());W();c();var Ci=C(O());W();c();var Ls=C(O());W();function FL(e){let{fileIcon:t,files:o,setFiles:n}=e,[,r]=R(D),i=Ut(t,{style:r.primary},[t]),a=Ls.useCallback(({item:s})=>{let l=()=>{n(u=>u.filter(d=>d.key!==s.key))};return Ls.createElement(wa,{layout:"wide",icon:i,title:s.file.name,buttons:[s.uploaded||s.failed?null:Ls.createElement(Ce,{size:"medium"}),s.failed?Ls.createElement(B,{tint:K.scarlet.base,icon:S.Alert,title:"Failed to upload. Please try again.",onPress:l}):null,Ls.createElement(B,{icon:S.X,title:"Remove",onPress:l})]})},[t,n]);return Ls.createElement(fm,{data:o,renderItem:a})}function Gh(e){let{getSpace:t,files:o,setFiles:n,fileIcon:r,fileExtension:i,limitWarning:a=!1,fileUploadsLimit:s=1/0}=e,[,l]=R(D),u=uo(),d=(h,y)=>{n(w=>w.map(k=>k.key===h?{...k,...y}:k))},m=async h=>{let y=await t();try{let w=await LC({kind:"space_import",space:y.id},h.file);d(h.key,{uploaded:w})}catch(w){throw u.notify({kind:"danger",title:"Error while uploading files",details:"Please try again or contact support if the problem persists.",icon:S.Alert}),d(h.key,{failed:!0}),w}},p=h=>{let y=[];for(let w of h){if(o.length>=s){u.notify({kind:"danger",title:"Cannot upload file",details:`You can only upload ${s} file for this operation`,timeout:5e3});break}if(w.size>209715200){u.notify({kind:"danger",title:`Your file must be less than ${od(209715200)}`,details:`Please try a different file that's below ${od(209715200)}`,timeout:5e3});continue}let k={key:_m(),file:w};y.push(k)}n(w=>w.concat(y)),y.forEach(w=>m(w))};return Ci.createElement(Ci.Fragment,null,Ci.createElement(b,null,Ci.createElement(Ik,{icon:r,onDropFiles:p,onPress:async()=>{let h=await Mx();p(h)},hint:`Drop your ${i} file here or choose a file`})),a?Ci.createElement(b,{style:g.Margin.smallTop},Ci.createElement(A,{style:[l.Caption,l.textMuted]},"GitBook has limits for imported content,"," ",Ci.createElement(Vi,{url:"https://docs.gitbook.com/features/import#limits"},"read more here."))):null,o.length>0?Ci.createElement(b,{style:[g.Margin.mediumTop]},Ci.createElement(FL,{fileIcon:r,files:o,setFiles:n})):null)}c();var im=C(O());W();function bu(e){let{title:t,subtitle:o,onClose:n,onSubmit:r,children:i}=e;return im.default.createElement(kp,{title:t,subtitle:o,footer:im.default.createElement(b,{style:[v.directionRow,v.justifyContentEnd]},im.default.createElement(B,{kind:"secondary",onPress:n,style:g.Margin.smallRight},"Back"),im.default.createElement(B,{kind:"primary",onPress:r},"Start import")),onClose:n},i)}function qL(e){let{getSpace:t,fileIcon:o,fileExtension:n,steps:r=[],startImport:i,limitWarning:a=!1,fileUploadsLimit:s}=e,[,l]=R(D),[u,d]=ki.useState([]),p=u.some(h=>!h.uploaded)||u.length===0;return ki.createElement(bu,{...e,onSubmit:async()=>{if(!p){let h=await t();i(u.map(y=>{var w;return(w=y.uploaded)==null?void 0:w.downloadURL}).filter(me),h)}}},r.length>0?ki.createElement(b,{style:[g.Margin.mediumBottom]},r.map((h,y)=>ki.createElement(b,{key:y,style:[v.directionRow]},ki.createElement(b,{style:[g.Margin.smallRight]},ki.createElement(A,{style:[l.Body,l.textMid]},`${y+1}.`)),ki.createElement(b,{style:v.flex1},ki.createElement(A,{style:[l.Body,l.textMid]},h))))):null,ki.createElement(Gh,{getSpace:t,files:u,setFiles:d,fileIcon:o,fileExtension:n,limitWarning:a,fileUploadsLimit:s}))}c();var Hh=C(O());function GL(e){let t=Hh.useRef(),{createSpace:o}=AL({organization:e.organization});return Hh.useMemo(()=>async()=>{if(t.current)return t.current;if(!o)throw new Error("Cannot import into shared space due to incorrect hook usage");return t.current=await o(!1),t.current},[o,t])}c();var No=C(O());W();c();var xi=C(O());W();function HL(e){let{url:t,setURL:o,placeholder:n="e.g: https://mysite.com/a_file",supportedFormats:r=[],validate:i=Er}=e,[,a]=R(D),s=i(t);return xi.createElement(xi.Fragment,null,xi.createElement(b,null,xi.createElement(jt,{size:"large",placeholder:n,value:t,cleareable:!0,onChangeText:o,feedback:t&&!s?{type:"danger",message:"URL is invalid. It must be a valid absolute URL starting with https:// or http://"}:{type:"none"}})),r.length>1?xi.createElement(b,{style:[g.Margin.smallTop,v.directionRow,v.alignCenter]},xi.createElement(b,null,xi.createElement(S.InfoCircle,{size:E.ICON_S,style:a.info})),xi.createElement(b,{style:[g.Margin.smallLeft,v.flex1]},xi.createElement(A,{style:[a.Caption,a.info]},`Supported formats: ${r.join(", ")}`))):null)}function XL(e){let{getSpace:t,fileIcon:o,fileExtension:n,steps:r=[],startImport:i,limitWarning:a=!1,fileUploadsLimit:s}=e,[,l]=R(D),[u,d]=No.useState([]),[m,p]=No.useState(""),[f,h]=No.useState("files"),y=u.some(P=>!P.uploaded),w=P=>Er(P),k=(y||u.length===0)&&(!m||!w(m));return No.createElement(bu,{...e,onSubmit:async()=>{if(!k){let P=await t();i(f==="files"?u.map(I=>{var _;return(_=I.uploaded)==null?void 0:_.downloadURL}).filter(me):[m],P)}}},r.length>0?No.createElement(b,{style:[g.Margin.mediumBottom]},r.map((P,I)=>No.createElement(b,{key:I,style:[v.directionRow]},No.createElement(b,{style:[g.Margin.smallRight]},No.createElement(A,{style:[l.Body,l.textMid]},`${I+1}.`)),No.createElement(b,{style:v.flex1},No.createElement(A,{style:[l.Body,l.textMid]},P))))):null,No.createElement(b,{style:[v.flex1,v.directionRow,v.alignCenter]},No.createElement(Za,null,No.createElement(Za.Tab,{active:f==="files",onPress:()=>h("files")},"Files"),No.createElement(Za.Tab,{active:f==="url",onPress:()=>h("url")},"URL"))),No.createElement(b,{style:[v.directionColumn,g.Margin.smallTop]},f==="files"?No.createElement(Gh,{getSpace:t,files:u,setFiles:d,fileIcon:o,fileExtension:n,limitWarning:a,fileUploadsLimit:s}):null,f==="url"?No.createElement(HL,{url:m,validate:w,setURL:p,placeholder:"https://myapi.io/swagger.yaml",supportedFormats:["JSON","YAML"]}):null))}c();var zn=C(O());W();function KL(e){let{title:t="Import a Website",subtitle:o="Enter a link to a web page below to import it into your space.",getSpace:n,startImport:r}=e,[i,a]=zn.useState(""),[,s]=R(D),l=i?Er(i):!1,u=async()=>{if(l){let d=await n();r([i],d)}};return zn.createElement(bu,{...e,title:t,subtitle:o,onSubmit:u},zn.createElement(b,{style:[g.Margin.smallBottom]},zn.createElement(pr,{label:"URL",labelDescription:"We\u2019ll crawl your site and pull in as much of your content as possible.",placeholder:"https://docs.mycompany.com",value:i,onChangeText:a,onSubmit:u,feedback:i?{type:l?"success":"danger",message:l?"":"URL is not valid"}:void 0})),zn.createElement(b,{style:g.Margin.mediumBottom},zn.createElement(A,{style:[s.Caption,s.textMuted]},"GitBook has limits for imported content,"," ",zn.createElement(Vi,{url:"https://docs.gitbook.com/features/import#limits"},"read more here."))),i&&l?zn.createElement(zn.Suspense,{fallback:null},zn.createElement(v4,{url:i})):null)}function v4(e){let{url:t}=e,[o]=af(t);return o.data?zn.createElement(b,{style:[g.Margin.mediumBottom]},zn.createElement(Xi,{title:o.data.title,details:o.data.site,icon:pt(Bi,{source:{uri:o.data.icon||void 0}}),onPress:()=>{Ca(t)}})):null}function $L(e){return Ac(e.target)?ia.createElement(S4,{...e,target:e.target}):ia.createElement(b4,{...e,target:e.target})}function b4(e){let t=ia.useCallback(async()=>{if("id"in e.target.space)return e.target.space;let{data:o}=await nx({operationId:"getSpaceById",params:{spaceId:e.target.space.key}});return o},[e.target.space]);return ia.createElement(UL,{...e,getSpace:t})}function S4(e){let t=GL(e.target);return t?ia.createElement(UL,{...e,getSpace:t}):null}function UL(e){let{sourceInfo:t,startImport:o,target:n,setSource:r,getSpace:i,onBack:a}=e,{source:s}=t!=null?t:{};if(t===void 0||s===void 0)return null;switch(s){case"website":case"github-wiki":return ia.createElement(KL,{target:n,title:t.title,subtitle:t.subtitle,getSpace:i,startImport:o,onClose:()=>{r(null)}});case"docx":case"markdown":case"html":case"zip":case"dropbox-paper":case"google-docs":case"confluence":case"quip":case"notion":{let l=s==="zip"||s==="confluence"||s==="notion";return ia.createElement(qL,{target:n,getSpace:i,title:t.title,subtitle:t.subtitle,steps:t.steps,fileIcon:t.fileIcon,fileExtension:t.fileExtension,onClose:a,startImport:o,limitWarning:l})}case"open-api":return ia.createElement(XL,{target:n,getSpace:i,title:t.title,subtitle:t.subtitle,steps:t.steps,fileIcon:t.fileIcon,fileExtension:t.fileExtension,onClose:a,startImport:o,fileUploadsLimit:1,limitWarning:!0});default:De(s)}}c();var Le=C(O());W();c();var VS="https://app.gitbook.com/public/app/assets/confluence-XZRVQN7T.png";var qS="https://app.gitbook.com/public/app/assets/dropbox-paper-F627BIKK.png";var GS="https://app.gitbook.com/public/app/assets/google-docs-T6C75XLR.png";var HS="https://app.gitbook.com/public/app/assets/openapi-H4Y5H3P5.png";var XS="https://app.gitbook.com/public/app/assets/quip-SHLUXOMG.png";function jL(){let[e]=R(),[,t]=R(D),o=Ut(S.FileCode,{style:t.primary}),n=Ut(S.FileText,{style:{color:K.scarlet.light}}),r=Ut(S.FileWord,{style:{color:K.primary.light}}),i=Ut(S.FileCode,{style:{color:K.violet.light}}),a=Ut(S.FileZIP,{style:{color:K.orange.light}}),s=Ut(S.GitHub,{style:{color:e.colors.text.main}}),l=Ut(S.Notion,{style:{color:e.colors.text.main}}),u=Ut(Bi,{source:{uri:VS}}),d=Ut(Bi,{source:{uri:XS}}),m=Ut(Bi,{source:{uri:qS}}),p=Ut(Bi,{source:{uri:GS}}),f=Ut(Bi,{source:{uri:HS}});return[{name:"Website",title:"Import a Website",subtitle:"Enter a link to a web page below to import it into your space.",source:"website",icon:o,type:"application"},{name:"Markdown",title:"Import a Markdown file",source:"markdown",icon:n,subtitle:"Drag and drop your .md file below to start the import.",fileIcon:S.FileText,fileExtension:".md",type:"file"},{name:"MS Word",title:"Import a Word document",source:"docx",icon:r,subtitle:"Drag and drop your .docx file below to start the import.",fileIcon:S.FileWord,fileExtension:".docx",type:"application"},{name:"HTML",title:"Import a HTML file",source:"html",subtitle:"Drag and drop your .html file below to start the import.",icon:i,fileIcon:S.FileCode,fileExtension:".html",type:"file"},{name:"ZIP",title:"Import a ZIP file",source:"zip",subtitle:"Drag and drop your .zip file below to start the import.",icon:a,fileIcon:S.FileZIP,fileExtension:".zip",type:"file"},{name:"Confluence",title:"Import from Confluence",icon:u,source:"confluence",type:"application",subtitle:"Export your space as ZIP to bring your content from Confluence.",fileExtension:".zip",fileIcon:S.FileZIP,steps:[Le.createElement(Le.Fragment,null,"Go to ",Le.createElement(A,{style:[t.Bold,t.text]},"Space Settings")," for the space you're looking to export and select the"," ",Le.createElement(A,{style:[t.Bold,t.text]},"Content tools")," section."),Le.createElement(Le.Fragment,null,"Click on the ",Le.createElement(A,{style:[t.Bold,t.text]},"Export")," tab, and select"," ",Le.createElement(A,{style:[t.Bold,t.text]},"HTML"),", then hit"," ",Le.createElement(A,{style:[t.Bold,t.text]},"Next, and Export"),"."),Le.createElement(Le.Fragment,null,"Choose ",Le.createElement(A,{style:[t.Bold,t.text]},"Normal Export")," unless you want to choose specific pages to export.")]},{name:"Notion",title:"Import from Notion",icon:l,source:"notion",type:"application",subtitle:"Export your workspace as Markdown to bring your content from Notion.",steps:[Le.createElement(Le.Fragment,null,"Go to the Workspace you're looking to export and select the"," ",Le.createElement(A,{style:[t.Bold,t.text]},"\u2026")," button in the top right."),Le.createElement(Le.Fragment,null,"Choose ",Le.createElement(A,{style:[t.Bold,t.text]},"Export All as Markdown"))],fileIcon:S.FileText,fileExtension:".md"},{name:"GitHub Wiki",title:"Import from GitHub Wiki",subtitle:"Enter a link to a GitHub Wiki below to import it into your space.",icon:s,source:"github-wiki",type:"application"},{name:"Quip",title:"Import from Quip",icon:d,source:"quip",fileIcon:S.FileText,fileExtension:".md",type:"application"},{name:"Dropbox Paper",title:"Import from Dropbox Paper",icon:m,source:"dropbox-paper",steps:[Le.createElement(Le.Fragment,null,`Click "\u2026" (ellipsis) in the Paper doc you're viewing.`),Le.createElement(Le.Fragment,null,"Click ",Le.createElement(A,{style:[t.Bold,t.text]},"Export"),"."),Le.createElement(Le.Fragment,null,"Select ",Le.createElement(A,{style:[t.Bold,t.text]},".docx")," and click"," ",Le.createElement(A,{style:[t.Bold,t.text]},"Download"),"."),Le.createElement(Le.Fragment,null,"Drag your downloaded files to the box below to import.")],fileIcon:S.FileWord,fileExtension:".docx",type:"application"},{name:"Google docs",title:"Import from Google Docs",icon:p,source:"google-docs",type:"application",subtitle:"Export your documents as .docx or webpage to bring your content from Google Docs.",steps:[Le.createElement(Le.Fragment,null,"Click on ",Le.createElement(A,{style:[t.Bold,t.text]},"File ",">"," Download"),"."),Le.createElement(Le.Fragment,null,"Choose between ",Le.createElement(A,{style:[t.Bold,t.text]},"Microsoft Word")," or"," ",Le.createElement(A,{style:[t.Bold,t.text]},"Web Page"),".")],fileIcon:S.FileWord,fileExtension:".docx"},{name:"OpenAPI",title:"Import from OpenAPI",icon:f,source:"open-api",type:"application",subtitle:"Provide an OpenAPI specification file or URL to import your API.",fileIcon:S.FileText,fileExtension:".yaml or .json",fileUploadsLimit:1}]}function YL({target:e,onStartImport:t,onComplete:o,onBack:n}){let[r,i]=Xh.useState(null),a=jL(),s=uo(),l=p=>{p&&(Ac(e)?te(Zm(e.organization,{type:"templates_pick_import",source:p})):te(Ot(e.space,{type:"edit_pick_import",source:p}))),i(p)},u=async(p,f)=>{if(!r)return;let h=await Ja(),y={url:p,source:r};if(Ac(e)||!e.page&&!e.changeRequest)return h.spaces.importContent(f.id,y);if(e.page&&e.changeRequest)return h.spaces.importContentInChangeRequestPageById(f.id,e.changeRequest,e.page,y);if(e.page)return h.spaces.importContentInPageById(f.id,e.page,y);if(e.changeRequest)return h.spaces.importContentInChangeRequest(f.id,e.changeRequest,y)},d=async(p,f)=>{if(r){te(UC(f,void 0,{type:"edit_import",source:r})),t?t(f):n();try{(await s.notifyProgress(Promise.all(p.map(async w=>{let k=await u(w,f);return k?k.data:void 0})),{title:"Importing docs",details:"We are importing your docs, this might take a while."})).some(w=>w&&w.totalResources!==w.importedResources)?s.notify({kind:"warning",title:"Incomplete import",timeout:0,icon:S.Alert,details:"Some of your docs were not imported due to file limits, try splitting them into several imports."}):(s.notify({icon:S.CheckCircle,kind:"success",title:"Imported docs",details:"Docs have been successfully imported. Enjoy!"}),o&&o(f))}catch(h){throw s.notify({kind:"danger",title:"Error while importing docs",details:Ei(h,"Please try again or contact support if the problem persists."),icon:S.Alert}),h}}},m=a.find(({source:p})=>p===r);return{modals:Xh.createElement($L,{sourceInfo:m,startImport:d,target:e,setSource:i,onBack:n}),source:r,sources:a,onSelectSource:l}}function wE(e){let{target:t,onStartImport:o,onComplete:n,onClose:r}=e,{modals:i,source:a,sources:s,onSelectSource:l}=YL({onStartImport:u=>{o?o(u):r()},onComplete:n,onBack:()=>l(null),target:t});return am.createElement(am.Fragment,null,a?i:am.createElement(zL,{withGitSyncAction:!Ac(t),sources:s,pickSource:l,onClose:r}))}c();var ZL=C(O());var _4=5,QL=ct({key:"recentSearches",default:[],effects:[pi.recoilEffect("@recoil/recentSearches",[])]});function JL(){return Xo(QL)}function e7(e){let t=oi(QL);ZL.useEffect(()=>{if(!e)return;let o=setTimeout(()=>{t(n=>n.includes(e)?n:[e,...n.slice(0,_4-1)])},3e3);return()=>clearTimeout(o)},[e])}c();var t7=C(O());function o7(e,t){let{space:o,organization:n}=t,r=Pp();t7.useEffect(()=>{if(!e)return;let i=setTimeout(()=>{let a={type:r?"public_content_search_type":"search_type",query:e};o?te(Ot(o,a)):n?te(Zm(n,a)):te(a)},700);return()=>{clearTimeout(i)}},[e])}c();var je=C(O());c();var KS=JSON.parse('{"loadingDelayedText":"loadingDelayedText_WVBF7","loadingDelayedTextVisible":"loadingDelayedTextVisible_y5onq"}');c();var Or=C(O());c();var n7=JSON.parse('{"aiAnswerFooter":"aiAnswerFooter_UeG4c"}');c();var Bc=C(O());function r7(e){let{answer:t,singleSpace:o}=e,{navigate:n}=ve(),r=Bc.useMemo(()=>I4(t,o),[t,o]),i=Bc.useCallback(s=>{switch(te({type:"ai_search_open_source"}),s.type){case"space":n({screen:{type:"space",space:s.space.key,...Tu(s.space),page:"",query:void 0}});break;case"page":n({screen:{type:"space",space:s.space.key,...Tu(s.space),page:s.path,query:void 0}});break;default:De(s)}},[n]),a=Bc.useCallback(s=>{switch(s.type){case"space":return{icon:mk(pt(_o,{code:VC(s.space)})),title:s.space.title||ua,action:"Go to space"};case"page":return{icon:S.Page.CSS,title:s.page.title,subtitle:s.ancestors.filter(l=>l.key!==s.page.key).map(l=>l.title).join(" \u203A "),nested:!o,action:"Go to page"};default:De(s)}},[o]);return Bc.createElement(Qa,{data:r,getKey:R4,renderItem:a,onOpen:i})}function I4(e,t){let o=new Map;return Lx(e.pages,n=>{var u,d;let r=(u=Tp([da(n.space)])[0])==null?void 0:u.result;if(!r)return null;let i=(d=Cx([{space:r.key,revision:r.revision}])[0])==null?void 0:d.result;if(!i)return null;let a=i.pages[n.page];if(!a||a.kind!=="sheet")return null;let s=Jw(i,a.key),l=o.get(r.key)||[];l.length===0&&!t&&l.push({type:"space",space:r}),l.push({type:"page",space:r,page:a,ancestors:s,path:xt(i,a.key)}),o.set(r.key,l)}),Array.from(o.values()).flat()}function R4(e){switch(e.type){case"space":return`space:${e.space.key}`;case"page":return`page:${e.space.key}/${e.page.key}`;default:De(e)}}function i7(e){let{answer:t,singleSpace:o}=e,[n,r]=Or.useState(!1),i=se();return Or.createElement(Z,{style:[N.flex.column,N.padding.mediumHorizontal,N.padding.mediumVertical,n7.aiAnswerFooter]},Or.createElement(Z,{style:[N.flex.row]},Or.createElement(Z,{style:[N.flex.flex1]},Or.createElement(B,{size:"small",rightIcon:n?S.ChevronDown:S.ChevronRight,onPress:()=>{r(!n)}},i("search_answer_sources",`${t.pages.length}`)))),n?Or.createElement(Z,{style:N.margin.mediumTop},Or.createElement(Or.Suspense,{fallback:Or.createElement(Oo,{size:"medium"})},Or.createElement(r7,{answer:t,singleSpace:o}))):null)}c();var aa=C(O());function a7(e){let{query:t,answer:o}=e,[n,r]=aa.useState(!1),i=uo(),a=lp(),s=se(),l=()=>{a.writeTextAndNotify(o.text)},u=()=>{te({type:"ai_search_upvote_answer",query:t,answer:o.text}),r(!0),i.notify({icon:S.ThumbsUp,title:s("search_answer_feedback_title"),details:s("search_answer_feedback_details")})},d=()=>{te({type:"ai_search_downvote_answer",query:t,answer:o.text}),r(!0),i.notify({icon:S.ThumbsUp,title:s("search_answer_feedback_title"),details:s("search_answer_feedback_details")})};return aa.createElement(Z,{style:[N.flex.row]},aa.createElement(B,{size:"small",title:s("search_answer_copy"),icon:S.Copy,onPress:l}),n?null:aa.createElement(aa.Fragment,null,aa.createElement(B,{size:"small",icon:S.ThumbsUp,title:s("search_answer_feedback_upvote"),onPress:u,style:g.Margin.xsmallLeft}),aa.createElement(B,{size:"small",icon:S.ThumbsDown,title:s("search_answer_feedback_downvote"),onPress:d,style:g.Margin.xsmallLeft})))}c();var US=C(O());c();var $S=JSON.parse('{"aiSearchSpinner":"aiSearchSpinner_cTH2Q","aiSearchSpinnerAnim":"aiSearchSpinnerAnim_75OX-","aiSearchSpinnerIcon":"aiSearchSpinnerIcon_MOqIL"}');function s7(e){let{size:t=E.ICON_L}=e;return US.createElement(Z,{style:$S.aiSearchSpinner,inlineStyle:{width:t,height:t}},US.createElement(S.AILens.CSS,{style:$S.aiSearchSpinnerIcon}))}function c7(e){let{query:t,target:o}=e,n=je.useCallback((r,i,a)=>{te(o.space?Ot(o.space,{type:"ai_search_crash",query:t.query}):{type:"ai_search_crash",query:t.query})},[t]);return je.createElement(Sm,{fallback:()=>je.createElement(M4,null),onError:n},je.createElement(je.Suspense,{fallback:je.createElement(T4,null)},je.createElement(P4,{...e})))}function P4(e){let{target:t,query:o,onAnswerLoaded:n,onSubmitQuery:r}=e,i=rx(t.space?{operationId:"askQueryInSpace",params:{spaceId:t.space.key},query:{},body:o}:{operationId:"askQuery",params:{},query:{},body:o}),{answer:a}=i.data;if(je.useEffect(()=>{te(t.space?Ot(t.space,{type:"ai_search_view_answer",query:o.query,queriesInMemory:o.previousQueries.length,hasAnswer:!!a,hasFollowupQuestions:!!a&&a.followupQuestions.length>0}):{type:"ai_search_view_answer",query:o.query,queriesInMemory:o.previousQueries.length,hasAnswer:!!a,hasFollowupQuestions:!!a&&a.followupQuestions.length>0})},[o,a,t.space]),je.useEffect(()=>{a&&(n==null||n())},[a,n]),!a)return je.createElement(E4,null);let s=l=>{te(t.space?Ot(t.space,{type:"ai_search_pick_followup",query:o.query,followup:l,previousQueriesCount:o.previousQueries.length}):{type:"ai_search_pick_followup",query:o.query,followup:l,previousQueriesCount:o.previousQueries.length}),r(l)};return je.createElement(Z,{style:[N.flex.column]},je.createElement(Z,{style:[N.flex.column,N.padding.large]},je.createElement(Z,{style:[N.flex.row,N.margin.mediumBottom]},je.createElement(Z,{style:[N.margin.mediumRight,N.flex.flex1]},je.createElement(Hn,{style:[N.text.heading2,N.textColor.main]},o.query)),je.createElement(Z,{style:N.margin.smallRight},je.createElement(a7,{query:o.query,answer:a}))),je.createElement(al,{markdown:a.text}),a.followupQuestions.length>0?je.createElement(Z,{style:[N.flex.row,N.flex.wrap,N.margin.smallTop]},a.followupQuestions.map(l=>je.createElement(Z,{style:[N.margin.smallTop,N.margin.smallRight]},je.createElement(B,{icon:S.AILens,kind:"pill",size:"medium",key:l,onPress:()=>{s(l)}},l)))):null),je.createElement(i7,{answer:a,singleSpace:!!t.space}))}function T4(e){let[t,o]=je.useState(!1),n=se();return je.useEffect(()=>{let r=setTimeout(()=>{o(!0)},3e3);return()=>{clearTimeout(r)}},[]),je.createElement(Wi,{size:"small",icon:s7,title:n("search_answer_loading")},je.createElement(Hn,{style:[KS.loadingDelayedText,t&&KS.loadingDelayedTextVisible]},n("search_answer_loading_wait")))}function E4(e){let t=se();return je.createElement(Wi,{size:"small",title:t("search_answer_none_title")},t("search_answer_none_details"))}function M4(e){let t=se();return je.createElement(Wi,{size:"small",icon:S.Alert,title:t("search_answer_error_title")},t("search_answer_error_details"))}c();var l7=C(O());function Kh(e){var o;let t=ix(e===null||((o=e.documents)==null?void 0:o.length)===0?null:e.space?{operationId:"getRecommendedQuestionsInSpace",params:{spaceId:e.space.key},query:{}}:{operationId:"getRecommendedQuestions",params:{},query:{},body:{documents:e.documents}});return l7.useMemo(()=>t?t.data.questions.map(n=>({type:"recommended-question",question:n})):[],[t])}c();var L4=C(O());var N4=ct({key:"recentAISearches",default:[],effects:[pi.recoilEffect("@recoil/recentAISearches",[])]});function $h(){return Xo(N4)}c();var Aa=C(O());function u7(e){let{allowEnterToOpen:t,target:o,onSubmitAIQuery:n}=e,r=se(),i=$h(),a=Kh(o),s=Aa.useCallback(m=>{switch(m.type){case"recent-search":return{icon:S.Search.CSS,title:m.query,action:r("search_ask")};case"recommended-question":return{icon:S.AILens.CSS,title:m.question,action:r("search_ask")};default:De(m)}},[r]),l=Aa.useCallback(m=>{switch(m){case"recent-search":return{title:r("search_blankslate_recent_questions")};case"recommended-question":return{title:r("search_blankslate_recommended_questions")};default:return}},[r]),u=(m,p)=>{switch(m.type){case"recent-search":{n(m.query),te({type:"ai_search_pick_suggestion_recent_search",suggestionIndex:p});break}case"recommended-question":te({type:"ai_search_pick_suggestion_question"}),n(m.question);break;default:De(m)}},d=Aa.useMemo(()=>[...i.map(p=>({type:"recent-search",query:p})),...a],[i,a]);return d.length===0?Aa.createElement(Wi,null,r("search_blankslate_ai")):Aa.createElement(Z,{style:[N.flex.flex1,N.flex.column]},Aa.createElement(Qa,{data:d,getKey:D4,renderItem:s,renderGroup:l,groupItem:A4,getGroupKey:B4,onOpen:u,style:[N.padding.mediumHorizontal,N.padding.mediumVertical],allowEnterToOpen:t}))}function D4(e){switch(e.type){case"recent-search":return`recent-search:${e.query}`;case"recommended-question":return`recommended-question:${e.question}`;default:De(e)}}function A4(e){return e.type}function B4(e){return e}c();var d7=C(O());var z4=10,W4=ct({key:"aiSearchQuery",default:{query:"",previousQueries:[]},effects:[pi.recoilEffect("@recoil/aiSearchQuery",{query:"",previousQueries:[]})]});function m7(){let[e,t]=Do(W4),o=d7.useCallback(n=>{t(r=>r?{query:n,previousQueries:[...r.previousQueries.filter(i=>i!==n&&i!==r.query),...r.query?[r.query]:[]].slice(-z4)}:{query:n,previousQueries:[]})},[t]);return[e,o]}c();var oo=C(O());W();var F4=lt("app:crash");function sm(e){let{children:t}=e,o=oo.useCallback((n,r,i)=>{F4.emergency(`An error occured during rendering:

`,n,`

The error is located at:
`,r),te({type:"crash",crashType:jS(n),sentryEvent:i})},[]);return oo.createElement(Sm,{fallback:n=>oo.createElement(V4,{...n}),onError:o,beforeCapture:H4},t)}function V4(e){let{eventId:t,error:o}=e,[,n]=R(X4),r=()=>{Iw({eventId:t||void 0})},i=()=>{window.location.reload()};oo.useEffect(()=>{let s=document.querySelector(".gitbook-splashscreen");s==null||s.remove()},[]);let a=()=>{switch(jS(o)){case"network-crash":return oo.createElement(G4,{onReload:i,...e});case"crash":default:return oo.createElement(q4,{onShareFeedback:r,onReload:i,...e})}};return oo.createElement(b,{style:[n.background]},a())}function q4(e){let t=se(),{onReload:o,onShareFeedback:n}=e;return oo.createElement(Wu,{title:t("something_wrong"),action:oo.createElement(oo.Fragment,null,oo.createElement(B,{kind:"primary",size:"medium",onPress:o,style:g.Margin.smallRight},t("reload")),oo.createElement(B,{kind:"secondary",size:"medium",onPress:n},t("let_us_know")))},t("we_have_been_notified"))}function G4(e){let{onReload:t}=e,o=se(),n=()=>{window.open("https://docs.gitbook.com/resources/firewall-safelist","_blank")};return oo.createElement(Wu,{title:o("connection_lost"),icon:S.CloudOff,action:oo.createElement(oo.Fragment,null,oo.createElement(B,{kind:"primary",size:"medium",onPress:t,style:g.Margin.smallRight},o("reload")),oo.createElement(B,{size:"medium",icon:S.Link,onPress:n},o("network_troubleshooting")))},o("device_offline"))}function H4(e,t){switch(jS(t)){case"network-crash":e.setTag("error_category","network-crash");break;case"crash":default:e.setTag("error_category","react-crash")}}function jS(e){return e.name==="FirebaseError"&&e.code==="unavailable"?"network-crash":"crash"}var X4=z.create({background:e=>({backgroundColor:e.colors.background.main,minHeight:"100vh"})});c();var Ir=C(O());c();var YS=C(O());function Uh(e){let{children:t,ssrRequestPath:o,ssrRouterContext:n}=e;return n?YS.createElement(U1,{location:o,context:n},t):YS.createElement(tv,null,t)}c();var jh=C(O());function p7(e="https://policies.gitbook.com/privacy/cookies",t=!1){let o=uo(),n=se();jh.useEffect(()=>{if(!t)return;let r=!1;if(Jm()!==null)return;let i=o.notify({title:n("cookies"),details:n("cookie_prompt",jh.createElement(Vi,{url:e},n("cookie_policy"))),timeout:0,icon:S.Cookies,actions:[{label:n("reject_all"),onPress:()=>{r=!0,Ty(!1),i()}}],onClose:()=>{r||Ty(!0)}})},[])}c();var le=C(O());W();c();var f7=JSON.parse('{"withStickyHeader":"withStickyHeader_HQiM-"}');c();var Wn=C(O());W();var{TOC_DESKTOP_WIDTH:K4}=To,$4=$.createResponsiveComponent(We),U4=F.createInteractiveComponent($4),ZS=K4-g.large-g.large;function Yh(e){let{space:t,collection:o,headerBackgroundColor:n,headerLogoURL:r,mobileStyle:i,desktopStyle:a}=e,[,s]=R(D),{getNavigationLinkProps:l}=ve(),d={color:Gi(n)==="light"?K.lightModeText.base:K.darkModeText.base},m=(o?(o==null?void 0:o.publishedTitle)||(o==null?void 0:o.title):t.publishedTitle||t.title)||ua,p=m.length>14,f=p?2:1,h=ri(t);return Wn.createElement(U4,{style:[v.directionRow,v.alignCenter],mobileStyle:i,desktopStyle:a,...l({screen:{space:t.key,page:""}}),testID:"public.headerHomeLink",accessibilityLabel:m},r?Wn.createElement($.View,{style:[v.flex1,v.directionRow,v.alignCenter,cm.headerDesktop],mobileStyle:cm.logoMobile,desktopStyle:cm.logoDesktop},Wn.createElement($.View,{desktopStyle:"visible",mobileStyle:"hidden"},Wn.createElement(Wo,{source:{uri:gi(r,{height:40,fit:"contain"})},loading:"priority",style:{maxHeight:40,maxWidth:ZS,width:"auto",height:"auto"}})),Wn.createElement($.View,{desktopStyle:"hidden",mobileStyle:"visible"},Wn.createElement(Wo,{source:{uri:gi(r,{height:30,fit:"contain"})},style:{maxHeight:30,maxWidth:ZS,width:"auto",height:"auto"}}))):Wn.createElement(b,{style:[cm.headerDesktop,v.flex1,v.directionRow,v.justifyContentStart,v.alignCenter]},Wn.createElement(b,null,Wn.createElement($.View,{mobileStyle:"hidden",desktopStyle:"visible"},Wn.createElement(Ny,{content:o||t,renderFor:"public-content",size:E.BUTTON_L,style:[g.Margin.mediumRight]})),Wn.createElement($.View,{mobileStyle:"visible",desktopStyle:"hidden"},Wn.createElement(Ny,{content:o||t,renderFor:"public-content",size:E.ICON_XL,style:[g.Margin.mediumRight]}))),Wn.createElement($.Text,{style:cm.textOverflow,mobileStyle:[s.Heading3],desktopStyle:[p?s.Heading3:s.Heading2]},Wn.createElement(F.Text.Child,{style:[d],numberOfLines:f,ellipsizeMode:"tail",inactiveStyle:s.text,activeStyle:h==="bold"?s.textStandout:s.primary},m))))}var cm=X.create({textOverflow:{overflow:"hidden"},logoMobile:{height:30},logoDesktop:{height:40},headerDesktop:{maxWidth:ZS}});c();var Wc=C(O());W();c();c();var _r=C(O());W();var j4=$.createResponsiveComponent(F.TouchableOpacity),Y4=F.createInteractiveComponent($.View);function Zh(e){return`hsla(${nk(e.colors.text.primary).h}, 60%, 70%, 0.1)`}var g7=_r.forwardRef(function(t,o){let{isLast:n,leftIcon:r,icon:i,rightIcon:a,kind:s="primary",children:l,expanded:u=!1,onChevronPress:d,active:m=!1,onPress:p,textStyle:f,href:h}=t,y=F.useInteractiveState(),[w,k]=R(Z4),[,x]=R(D),P=s==="primary"?x.textMid:x.textMuted,I=m?x.primary:P,_=p?j4:Y4,M=u?S.ChevronDown:S.ChevronRight;return _r.createElement(_,{ref:o,...y.events,style:[k.tocMenuItem,g.Padding.smallHorizontal,g.Margin.smallRight,n?null:g.Margin.xsmallBottom,m?{backgroundColor:Zh(w)}:null],hoverStyle:p&&!m?k.tocMenuItemHovered:null,mobileStyle:k.tocMenuItemMobile,desktopStyle:k.tocMenuItemDesktop,onPress:p,href:h&&p?h:void 0},r?_r.createElement(b,{style:[g.Margin.mediumRight]},_r.createElement(r,{size:E.ICON_M,style:[I,f]})):null,i?_r.createElement(b,{style:[g.Margin.mediumRight]},_r.createElement(i,{size:E.ICON_M,style:[I,f]})):null,_r.createElement(A,{style:[v.flex1,g.Padding.xsmallVertical,s==="group"?x.GroupTitle:x.Label,I,f,m?x.Bold:null]},l),d?_r.createElement(We,{style:[v.directionRow,v.alignCenter],onPress:d},_r.createElement(M,{size:E.ICON_S,style:I})):null,a?_r.createElement(b,{style:k.tocMenuItemRightIcon},_r.createElement(a,{size:E.ICON_M,style:x.textMuted})):null)}),Z4=z.create({tocMenuItem:e=>({flexDirection:"row",alignItems:"center",borderColor:"transparent",borderWidth:1,borderRadius:e.radiuses.medium,minHeight:E.XS}),tocMenuItemMobile:{borderRightWidth:1},tocMenuItemDesktop:{borderRightWidth:0},tocMenuItemHovered:e=>({backgroundColor:e.colors.background.standout}),tocMenuItemRightIcon:{marginLeft:g.small,marginRight:(E.S-E.ICON_M)/2}});c();var Cu=C(O());c();var Ii=C(O());W();c();var Q4=750,J4=g.xxlarge,ez=Q4+2*J4,QS=300,tz=220;function h7(e=0){return e+QS+ez+tz}c();var lm=C(O());W();c();var Qo=C(O());W();function JS(e){return Qo.createElement(Qo.Suspense,{fallback:Qo.createElement(y7,{...e})},Qo.createElement(oz,{...e}))}function oz(e){let{revision:t,treePage:o}=e,{page:n}=o,r=jn(n.kind==="link"?n.ref:void 0,{space:t.space,revision:t.key});return Qo.createElement(y7,{...e,contentRef:r})}function y7(e){let{revision:t,treePage:o,parent:n,currentPage:r,contentRef:i,isLastPage:a}=e,{page:s}=o,{getNavigationHref:l,navigateToPage:u}=ms(),d=r?r.key:null,m=d===s.key,p=!!d&&eC(t,s.key,d),[f,h]=Qo.useState(p),[,y]=R(nz),w=k=>{k.isDefaultPrevented()||k.nativeEvent.metaKey||k.nativeEvent.ctrlKey||(k.preventDefault(),s.kind==="sheet"?u(t,s.key):s.kind==="link"&&(i==null||i.open()))};return Qo.useEffect(()=>{p&&h(!0)},[p]),Qo.createElement(b,{style:[s.kind==="group"&&g.Margin.mediumVertical]},Qo.createElement(g7,{isLast:a,kind:s.kind==="group"?"group":!n||n.kind==="group"?"primary":"secondary",icon:s.emoji?pt(_o,{code:s.emoji}):void 0,rightIcon:s.kind==="link"?i?i.secondaryIcon:Ce:void 0,active:m,expanded:f,onPress:s.kind==="group"?void 0:w,href:(()=>s.kind==="link"?i==null?void 0:i.href:l(t,s.key))(),onChevronPress:o.pages.length>0&&s.kind==="sheet"?k=>{k.preventDefault(),h(x=>!x)}:void 0},s.title),(f||s.kind==="group")&&o.pages.length>0?Qo.createElement(b,{style:[y.tocItemChildren,...s.kind==="group"?[g.Margin.noneLeft]:[g.Margin.smallLeft,g.Margin.xsmallTop,g.Margin.smallBottom]]},o.pages.map((k,x)=>Qo.createElement(b,{style:s.kind==="group"?null:g.Margin.smallLeft,key:k.renderKey},Qo.createElement(JS,{...e,treePage:k,isLastPage:x===o.pages.length-1,parent:s}))),s.kind==="group"?null:Qo.createElement(b,{style:y.tocItemChildrenLine})):null)}var nz=z.create({tocItemChildren:{position:"relative"},tocItemChildrenLine:e=>({position:"absolute",top:0,bottom:0,left:0,width:1,backgroundColor:e.colors.border.main})});c();var Oi=C(O());W();var v7=C(g1());var ew=40,rz=F.createInteractiveComponent(pk);function Su(e){return Oi.createElement(js,null,Oi.createElement(iz,{...e}))}function iz(e){let{space:t,floating:o}=e,[n,r]=R(az),[,i]=R(D),a=se(),s=new URLSearchParams({utm_source:"content",utm_medium:"trademark",utm_campaign:t.key}),l=`https://${Wa.homepage.domain}/?${s.toString()}`,u=()=>{te(Ot(t,{type:"public_content_click_trademark"}))};return Oi.createElement(b,{style:o&&r.floatingWrapper},o?Oi.createElement(v7.default,{colors:[`${n.colors.background.main}00`,n.colors.background.main],style:r.floatingTopGradient}):null,Oi.createElement(b,{style:o&&[g.Padding.mediumHorizontal,g.Padding.mediumBottom,r.floatingBackground]},Oi.createElement(F.TouchableOpacity,{style:[v.directionRow,v.alignCenter,...o?[r.trademarkFloating,g.Padding.smallVertical,g.Padding.mediumHorizontal]:[r.tradeMarkDefault]],activeStyle:i.primary,onPress:u,href:l,target:"_blank"},Oi.createElement(rz,{size:ew,style:i.textMuted,activeStyle:i.primary}),Oi.createElement(b,{style:[v.flex1,g.Padding.mediumLeft]},Oi.createElement(F.Text.Child,{style:[i.Label,i.textMuted],activeStyle:i.primary},a("powered_by",Oi.createElement(A,{style:i.Bold},"GitBook")))))))}var az=z.create({floatingWrapper:{position:"absolute",bottom:0,zIndex:1,width:"100%"},floatingTopGradient:{height:g.medium},floatingBackground:e=>({backgroundColor:e.colors.background.main}),tradeMarkDefault:e=>({backgroundColor:"transparent"}),trademarkFloating:e=>({backgroundColor:e.colors.background.standout,borderRadius:e.radiuses.xlarge})});function Qh(e){let{showingTrademark:t,revision:o}=e,n=lm.useMemo(()=>OC(o.pages,o.rootPages),[o]);return lm.createElement(Ti,{style:v.flex1,contentContainerStyle:[g.Padding.mediumVertical,t?sz.scrollviewWithTrademark:null]},n.map((r,i)=>lm.createElement(JS,{key:r.renderKey,...e,treePage:r,isLastPage:i===n.length-1})))}var sz=X.create({scrollviewWithTrademark:{paddingBottom:g.medium+ew+2*g.medium}});c();var Cn=C(O());W();c();var Jh=C(O());c();var Ns=C(O());var cz={color:Pu,radius:Dw},_i=Ns.createContext([cz,()=>{}]),b7="@gitbook/themeMode";function lz(e,t){let[o,n]=Ns.useState(()=>{if(typeof window>"u"||!e.themeModeTogglable)return t;let i=pi.get(b7);return i!==null?i:t});return{themeMode:o,toggleThemeMode:()=>{n(i=>{let a=i==="light"?"dark":"light";return pi.set(b7,a),te(KC(e,{type:"public_content_toggle_theme_mode",themeMode:a})),a})}}}function S7(e){let{content:t,isPreview:o,children:n}=e,{color:r,radius:i}=Aw(t),{themeMode:a,toggleThemeMode:s}=lz(t,r);Ns.useEffect(()=>{window==null||window.document.body.classList.remove("theme-overlay")},[]);let l=o?r:a!=null?a:r;return di(u=>{u.setTheme([`${l?`theme-color-${l}`:""}`,`${i?`theme-radius-${i}`:""}`].join(" "))}),Ns.createElement(_i.Provider,{value:[{color:l,radius:i},s]},n)}function Jo(e){let[{color:t}]=Jh.useContext(_i);return Jh.useMemo(()=>rf(e,t),[t,e])}c();var ey=C(O());function zc(e){let{content:t,mode:o="switch"}=e,[{color:n},r]=ey.useContext(_i),{headerBackgroundColor:i}=Jo(t);return ey.createElement(S1,{onValueChange:r,value:n==="dark",mode:o,backgroundColor:i})}c();var Ds=C(O());W();c();function tw(e){switch(Ap(e)){case"lightest":return{backgroundColor:"rgba(59, 69, 78, 0.1)",textColor:K.lightModeText.base};case"light":return{backgroundColor:"rgba(255, 255, 255, 0.6)",textColor:K.lightModeText.base};case"semiLight":return{backgroundColor:"rgba(255, 255, 255, 0.55)",textColor:K.lightModeText.base};case"medium":return{backgroundColor:"rgba(59, 69, 78, 0.25)",textColor:K.darkModeText.base};case"semiDark":return{backgroundColor:"rgba(59, 69, 78, 0.3)",textColor:K.darkModeText.base};case"dark":return{backgroundColor:"rgba(59, 69, 78, 0.5)",textColor:K.darkModeText.base};case"darkest":default:return{backgroundColor:"rgba(255, 255, 255, 0.2)",textColor:K.darkModeText.base}}}function w7(e){let{contentTheme:t,headerBackgroundColor:o}=e,[,{open:n}]=Ly(),r=se(),{textColor:i}=tw(o);return Ds.createElement(B,{icon:S.SearchPublic,size:"medium",kind:t==="bold"?"default_bold":"default",alignItems:"start",onPress:n,style:[g.Padding.noneHorizontal],defaultTextStyle:[{color:i}],accessibilityLabel:r("search")})}function ty(e){let{headerBackgroundColor:t=K.WHITE}=e,[,{open:o}]=Ly(),n=se(),[,r]=R(D),[,i]=R(uz),{backgroundColor:a,textColor:s}=tw(t);return Ds.createElement(F.TouchableOpacity,{style:[{backgroundColor:a},i.searchBarButton,v.directionRow,v.justifySpaceBetween,v.alignCenter,g.Padding.mediumLeft,g.Padding.smallRight],activeStyle:i.searchBarButtonActive,accessibilityLabel:n("search"),onPress:o},Ds.createElement(b,{style:[v.directionRow,v.alignCenter]},Ds.createElement(S.SearchPublic,{size:E.ICON_XS,style:[{color:s},g.Margin.smallRight]}),Ds.createElement(F.Text.Child,{style:[r.Label,{color:s}],activeStyle:r.text},n("search"))),Ds.createElement(b,null,Ds.createElement(Fi,{kind:"main",shortcut:Xe.SEARCH_OPEN})))}var uz=z.create({searchBarButton:e=>({width:"100%",height:E.BUTTON_L,borderRadius:e.radiuses.large,borderWidth:1,borderColor:"transparent"}),searchBarButtonActive:e=>({borderColor:e.colors.border.mid})});function oy(e){let{space:t,collection:o,collectionSpaces:n,currentPage:r,revision:i}=e,[,a]=R(C7),{headerBackgroundColor:s,headerLogoURL:l,headerDisabled:u}=Jo(t),d=n&&(o==null?void 0:o.publishingType)==="variants"?Cn.createElement(wu,{key:"variants-picker",currentVariant:t,collection:o,variants:n,revision:i,currentPage:r}):null;return Cn.createElement(Cn.Fragment,null,u?Cn.createElement(Cn.Fragment,null,Cn.createElement(dz,{key:"space-header",space:t,collection:o,headerBackgroundColor:s,headerLogoURL:l,variantsSwitcher:d}),Cn.createElement($.View,{mobileStyle:"hidden",desktopStyle:"visible",style:[a.searchBarSection,v.directionRow,v.justifySpaceBetween,v.alignCenter,g.Margin.mediumRight]},Cn.createElement(b,{style:[v.flex1,v.directionRow,g.Margin.mediumVertical]},Cn.createElement(ty,{key:"search-bar",headerBackgroundColor:s})),t.themeModeTogglable?Cn.createElement(b,{style:[g.Margin.mediumLeft]},Cn.createElement(zc,{content:t,mode:"button"})):null)):null)}function dz(e){let{space:t,collection:o,headerBackgroundColor:n,headerLogoURL:r,variantsSwitcher:i}=e,[,a]=R(C7);return Cn.createElement($.View,{style:[a.spaceTitleWrapper,v.directionRow,v.justifyContentCenter,v.alignCenter],mobileStyle:"hidden",desktopStyle:"visible"},Cn.createElement(Yh,{space:t,collection:o,headerBackgroundColor:n,headerLogoURL:r,desktopStyle:v.flex1}),Cn.createElement(b,{style:[v.alignSelfCenter,g.Margin.smallHorizontal]},i))}var C7=z.create({searchBarSection:e=>({borderColor:e.colors.border.mid,borderBottomWidth:1}),selectedTab:e=>({borderLeftColor:e.colors.primary.main,borderLeftWidth:2}),hoverTab:e=>({backgroundColor:e.colors.background.standout}),tab:{width:"100%",flexDirection:"row",justifyContent:"center",alignItems:"center",outlineStyle:"none",borderWidth:0,borderColor:"transparent",borderLeftWidth:2,height:E.BUTTON_M,lineHeight:E.BUTTON_M,borderRadius:0,paddingHorizontal:g.medium},mainBadge:{fontFamily:ZC,fontSize:tp.xxsmall,lineHeight:E.BUTTON_M,...np.Bold,textTransform:"uppercase",letterSpacing:1},spaceTitleWrapper:e=>({height:E.L}),variantScrollView:{flexGrow:0,flexShrink:1,height:"fit-content"}});var{PUBLIC_DESKTOP_HEADER_HEIGHT:mz}=To;function k7(e){let{space:t}=e,o=se(),{headerDisabled:n}=Jo(t),[,r]=R(pz[n?"none":"default"]),{desktopSidebarWidth:i}=Ii.useContext(hi),a=Ii.useMemo(()=>({[h7(i)]:"visible"}),[i]),s=!t.hideTrademark;return Ii.createElement($.View,{testID:"page.desktopTableOfContents",mobileStyle:"hidden",desktopStyle:"visible",customBreakpointsStyles:a,style:[r.tocDesktopWrapper,v.directionRow,v.justifyContentEnd]},Ii.createElement(fe,{tag:"nav",accessibilityLabel:o("table_of_contents"),style:[fz.tocDesktop,v.directionColumn]},Ii.createElement(b,{style:[v.flex1,g.Padding.largeLeft]},Ii.createElement(oy,{...e}),Ii.createElement(Qh,{...e,showingTrademark:s})),s?Ii.createElement(Su,{floating:!0,space:t}):null))}var pz={none:z.create({tocDesktopWrapper:e=>({position:"sticky",top:0,height:"100vh",overflowY:"auto",alignSelf:"flex-start",backgroundColor:e.colors.background.main,borderRightColor:e.colors.border.mid,borderRightWidth:1})}),default:z.create({tocDesktopWrapper:e=>({position:"sticky",top:g.xxlarge,height:`calc(100vh - ${mz}px)`,overflowY:"auto",alignSelf:"flex-start",backgroundColor:e.colors.background.main,borderRightColor:e.colors.border.mid,borderRightWidth:1})})},fz=X.create({tocDesktop:{width:QS}});c();var Nt=C(O());W();var gz=$.createResponsiveComponent(Kt.View),hz=$.createResponsiveComponent(Kt.createAnimatedComponent(We));function O7(e){let{currentPage:t,space:o,collection:n,collectionSpaces:r,revision:i}=e,a=se(),s=Gu(Do(ed),Nt.useState(!1)),[,l]=R(D),{sidebarMobileLeft:u,showOverlay:d}=Qk(s),[m,p]=R(_7);Nt.useEffect(()=>{s.close()},[t==null?void 0:t.key]);let f=!o.hideTrademark,h=r&&(n==null?void 0:n.publishingType)==="variants"?Nt.createElement(wu,{key:"variants-picker",currentVariant:o,collection:n,variants:r,revision:i,currentPage:t}):null,y=!!o.themeModeTogglable,w=y?Nt.createElement(b,{style:[g.Margin.mediumRight]},Nt.createElement(zc,{content:o,mode:"button"})):null;return Nt.createElement(Gn,null,Nt.createElement(gz,{style:[p.sidebar,{left:u}],mobileStyle:"visible",desktopStyle:"hidden"},Nt.createElement(fe,{tag:"nav",accessibilityLabel:a("table_of_contents"),style:[v.directionColumn,v.flex1]},Nt.createElement(b,{style:v.flex1},Nt.createElement(yz,{key:"mobile-closing-bar",switcher:h!=null?h:w}),y&&h?Nt.createElement(b,{style:[v.directionRow,v.justifySpaceBetween,v.alignCenter,g.Padding.smallVertical,g.Padding.mediumHorizontal,p.mobileChangeAppearance]},Nt.createElement(A,{style:[l.Label,l.text]},a("theme_change_appearance")),Nt.createElement(zc,{content:o})):null,Nt.createElement(oy,{...e}),Nt.createElement(b,{style:[g.Padding.mediumLeft,v.flex1,p.sidebarWrapper]},Nt.createElement(Qh,{...e,showingTrademark:f}))),f?Nt.createElement(Su,{floating:!0,space:o}):null)),Nt.createElement(hz,{style:[p.screenOverlay,{backgroundColor:u.interpolate({inputRange:[-_p.MOBILE_WIDTH,0],outputRange:[m.colors.backdrop.transparent,m.colors.backdrop.background]})}],mobileStyle:d?"visible":"hidden",desktopStyle:"hidden",onPress:s.closeMobile}))}function yz(e){let[,t]=R(_7),o=Gu(Do(ed),Nt.useState(!1));return Nt.createElement($.View,{style:[t.mobileClosingBar,g.Padding.smallHorizontal,v.justifySpaceBetween,v.alignCenter,v.directionRow],mobileStyle:"visible",desktopStyle:"hidden"},Nt.createElement(B,{icon:S.X,size:"large",kind:"default",onPress:()=>o.closeMobile(),style:[v.alignSelfCenter,g.Padding.smallHorizontal],accessibilityLabel:"Close"}),e.switcher)}var x7=10,_7=z.create({sidebar:e=>({backgroundColor:e.colors.background.main,width:_p.MOBILE_WIDTH,maxWidth:"100%",height:"100%",flexDirection:"row",position:"fixed",top:0,bottom:0,zIndex:x7}),sidebarWrapper:e=>({borderRightWidth:1,borderRightColor:e.colors.border.mid}),sidebarCloseButton:{position:"absolute",width:E.BUTTON_M,height:E.BUTTON_M,top:(E.M-E.BUTTON_M)/2,left:_p.MOBILE_WIDTH+E.BUTTON_M/2},screenOverlay:{position:"absolute",top:0,bottom:0,left:0,right:0,zIndex:x7-1},mobileClosingBar:e=>({height:E.L,borderBottomWidth:1,borderBottomColor:e.colors.border.mid,backgroundColor:e.colors.background.main}),mobileChangeAppearance:e=>({borderBottomWidth:1,borderColor:e.colors.border.mid})});function I7(e){return Cu.createElement(Cu.Fragment,null,Cu.createElement(k7,{...e}),Cu.createElement(O7,{...e}))}var ow=150,vz=200,bz=150;function ny(e){let[,t]=R(R7);return Wc.createElement($.View,{style:t.wrapper,mobileStyle:[t.wrapperMobile,g.Margin.smallVertical,g.Margin.smallHorizontal],desktopStyle:[t.wrapperDesktop,g.Margin.smallVertical,g.Margin.xsmallHorizontal]},Wc.createElement(Ti,null,e.children))}function ry(e){let{title:t,kind:o="default",active:n=!1,onPress:r,isLast:i}=e,[a,s]=R(R7),[,l]=R(D);return Wc.createElement(F.TouchableOpacity,{hoverStyle:s.menuItemHovered,style:[s.menuItem,g.Padding.xsmallVertical,g.Padding.smallHorizontal,i?null:g.Margin.xsmallBottom,n?{backgroundColor:Zh(a)}:null],onPress:r},Wc.createElement(b,{style:[v.directionRow,v.alignCenter,v.justifySpaceBetween]},Wc.createElement(F.Text.Child,{hoverStyle:n?null:l.textStandout,style:[l.Label,o==="link"?l.SemiBold:null,...n?[l.primary,l.Bold]:[l.text]],numberOfLines:2,ellipsizeMode:"tail"},t),Wc.createElement(b,{style:[g.Margin.mediumLeft]},e.rightElement)))}var R7=z.create({wrapper:e=>({backgroundColor:e.colors.background.main}),wrapperDesktop:{minWidth:ow,maxWidth:vz,maxHeight:bz},wrapperMobile:{width:"auto",maxWidth:"100%",maxHeight:"100%"},menuItem:e=>({borderRadius:e.radiuses.large}),menuItemHovered:e=>({backgroundColor:e.colors.background.muted})});c();var en=C(O());W();function wu(e){let{backgroundColor:t,currentPage:o,collection:n,variants:r,currentVariant:i,revision:a}=e,{getNavigationLinkProps:s}=ve(),l=se(),u=en.useRef(null),[,d]=R(D),m=en.useMemo(()=>o?xt(a,o.key):"",[o]);return en.createElement(Xa,{ref:u,wrapper:Ar,closeOnClick:!0,closeOnOutsideClick:!0,anchor:({ref:p,toggle:f,opened:h})=>{let y=h?S.ChevronUp:S.ChevronDown;return en.createElement(B,{ref:p,size:"medium",rightIcon:y,kind:Gi(t||K.WHITE)?"default_bold":"default",alignItems:"start",onPress:f,style:[g.Padding.noneHorizontal]},en.createElement(b,{style:[P7.variantsPicker]},en.createElement(A,{numberOfLines:1,ellipsizeMode:"tail"},i.publishedTitle||i.title||ua)))}},en.createElement(sn,{kind:"menu",preferredAlignment:"start"},en.createElement(en.Suspense,{fallback:en.createElement(Oo,{size:"small"})},en.createElement(ny,null,r.map((p,f,h)=>en.createElement(ry,{key:p.key,title:p.title,active:p.key===i.key,isLast:f===h.length-1,rightElement:p.key===n.primarySpace?en.createElement(A,{style:[d.textMuted,d.Uppercase,P7.mainLabel]},l("main")):null,...s({screen:{space:p.key,page:m}},()=>{var y;(y=u.current)==null||y.close()})}))))))}var P7=X.create({mainLabel:{letterSpacing:1.2},variantsPicker:{maxWidth:ow}});c();var E7=C(O());c();var T7=JSON.parse('{"publicContainer":"publicContainer_11UZS"}');function iy(e){let{children:t,style:o}=e;return E7.createElement(Z,{style:[T7.publicContainer,o]},t)}var{PAGE_BODY_DESKTOP_H_PADDING:Sz,TOC_DESKTOP_WIDTH:wz,PUBLIC_DESKTOP_HEADER_HEIGHT:Cz,PUBLIC_MOBILE_HEADER_HEIGHT:kz}=To,xz=$.createResponsiveComponent(B),Oz=$.createResponsiveComponent(fe);function L7(e){let{space:t}=e,o=Di(),{headerBackgroundColor:n,headerDisabled:r,headerLinksColor:i,headerLogoURL:a}=Jo(t),s=le.useMemo(()=>({...o,color:Gi(n)}),[n,o]);return le.createElement(Nr,{theme:s},r?le.createElement($.View,{desktopStyle:"hidden",mobileStyle:"visible"},le.createElement(M7,{...e,headerDisabled:r,headerBackgroundColor:n,headerLinksColor:i,headerLogoURL:a})):le.createElement(M7,{...e,headerDisabled:r,headerBackgroundColor:n,headerLinksColor:i,headerLogoURL:a}))}function M7(e){let{space:t,headerDisabled:o,headerBackgroundColor:n,headerLogoURL:r,headerLinksColor:i,revision:a,collection:s,collectionSpaces:l,currentPage:u}=e,[,d]=R(Tz[o?"none":ri(t)==="default"?"defaultWithBorder":"default"]),m=Gu(Do(ed),le.useState(!1)),f=Zr(u).tableOfContents,h=[As.searchWrapper,g.Padding.largeLeft,g.Padding.smallRight],[y]=le.useContext(_i);return le.createElement(le.Fragment,null,le.createElement(Oz,{tag:"header",desktopStyle:As.desktopHeight,mobileStyle:As.mobileHeight,style:[d.spaceHeader,v.directionRow,v.alignCenter,o?null:{backgroundColor:n}]},le.createElement(iy,{style:[N.padding.smallHorizontal,N.flex.alignCenter,f7.withStickyHeader]},f?le.createElement(xz,{desktopStyle:"hidden",mobileStyle:"visible",icon:S.Menu,style:g.Margin.smallRight,kind:"grey",rounded:!0,title:m.opened?"Hide Table of Content":"Show Table of Content",onPress:m.toggle}):null,le.createElement(Yh,{space:t,collection:s,headerBackgroundColor:n,headerLogoURL:r,mobileStyle:[As.autoWidth,g.Padding.noneLeft,g.Padding.mediumRight,v.flexShrink1,v.justifyContentStart,f?null:g.Margin.smallLeft],desktopStyle:[As.autoWidth,g.Padding.mediumLeft,g.Padding.largeRight,v.justifyContentStart]}),l&&(s==null?void 0:s.publishingType)==="variants"?le.createElement($.View,{mobileStyle:"hidden",desktopStyle:"visible"},le.createElement(wu,{key:"variants-picker",backgroundColor:n,currentPage:u,collection:s,revision:a,variants:l,currentVariant:t})):null,le.createElement(_z,{space:t,revision:a,linkColor:i}),t.themeModeTogglable?le.createElement($.View,{mobileStyle:"hidden",desktopStyle:"visible"},le.createElement(zc,{content:t})):null,le.createElement(Nr,{theme:y},le.createElement($.View,{mobileStyle:"hidden",desktopStyle:"visible",style:[h,As.searchBarContainer,v.flex1]},le.createElement(ty,{contentTheme:ri(t),headerBackgroundColor:n})),le.createElement($.View,{mobileStyle:"visible",desktopStyle:"hidden",style:[h]},le.createElement(w7,{contentTheme:ri(t),headerBackgroundColor:n}))))),le.createElement($.View,{mobileStyle:"visible",desktopStyle:"hidden"},le.createElement(Nr,{theme:y},le.createElement(Pz,{space:t,revision:a}))))}function _z(e){let{space:t,revision:o,linkColor:n}=e;return le.createElement($.View,{style:[v.directionRow,v.justifyContentEnd,v.alignCenter,v.flex1,g.Padding.mediumLeft],mobileStyle:"hidden"},(t.headerLinks||[]).map((r,i,a)=>r.title?le.createElement(Iz,{key:r.title,space:t,revision:o,headerLink:r,linkColor:n}):null))}function Iz(e){let{headerLink:t,space:o,revision:n,linkColor:r}=e,i=F.useInteractiveState({hoverDelay:250}),a=F.useInteractiveState(),s=l=>le.createElement(vd,{ref:l.ref,style:[g.Padding.mediumHorizontal,r?{color:r}:null],title:t.title,contentRef:t.to,space:o,revision:n,...l.events});return t.links&&t.links.length>0?le.createElement(zi,{opened:i.hovered||a.hovered,wrapper:Ar,anchor:({ref:l})=>s({ref:l,events:i.events})},le.createElement(sn,{kind:"menu",preferredAlignment:"start"},le.createElement(b,{...a.events},le.createElement(ny,null,t.links.map((l,u,d)=>le.createElement(Rz,{key:u,link:l,revision:n,isLast:u===d.length-1})))))):s({})}function Rz(e){let{link:t,revision:o,isLast:n}=e,r=jn(t.to,{space:o.space,revision:o.key});return le.createElement(ry,{kind:"link",title:t.title,isLast:n,onPress:i=>{i.nativeEvent.metaKey||i.nativeEvent.ctrlKey||(i.preventDefault(),r.open())}})}function Pz(e){let{space:t,revision:o}=e,[n,r]=le.useState(!1),[,{headerLinksMobile:i}]=R(Ez),a=n?S.ChevronDown:S.ChevronRight;return!t.headerLinks||t.headerLinks.length===0?null:le.createElement(b,{style:[As.headerLinksMobile,i,v.justifyContentCenter,g.Padding.medium]},le.createElement(b,{style:[As.headerLinksMobileButton]},le.createElement(B,{size:"large",rightIcon:a,alignItems:"start",onPress:()=>r(s=>!s),style:[g.Padding.noneHorizontal]},"Links")),n?le.createElement(b,null,t.headerLinks.map((s,l,u)=>s.title?le.createElement(N7,{space:t,revision:o,link:s,isLast:l===u.length-1}):null)):null)}function N7(e){let{link:t,space:o,revision:n,isLast:r}=e,[i,a]=le.useState(!1),s="links"in t?t.links||[]:[],l=i?S.ChevronDown:S.ChevronRight,u=ri(o);return le.createElement(b,{style:[v.directionColumn]},le.createElement(b,{style:[v.directionRow,v.alignCenter]},le.createElement(vd,{style:[g.Padding.smallTop,r?null:g.Padding.smallBottom],kind:u==="bold"?"bold":"default",title:t.title,contentRef:t.to,space:o,revision:n}),s.length>0?le.createElement(B,{size:"large",kind:"link",rightIcon:l,alignItems:"start",onPress:()=>a(d=>!d),style:[g.Padding.noneHorizontal]}):null),i?le.createElement(b,{style:[g.Margin.smallLeft,g.Margin.smallBottom]},s.map((d,m,p)=>le.createElement(N7,{key:m,space:o,revision:n,link:d,isLast:m===p.length-1}))):null)}var Tz={none:z.create({spaceHeader:e=>({borderBottomWidth:1,borderBottomColor:e.colors.border.mid,zIndex:1})}),default:z.create({spaceHeader:{zIndex:1,position:"sticky",top:0}}),defaultWithBorder:z.create({spaceHeader:e=>({borderBottomWidth:1,borderBottomColor:e.colors.border.mid,zIndex:1,position:"sticky",top:0})})},Ez=z.create({headerLinksMobile:e=>({backgroundColor:e.colors.background.main,borderBottomWidth:1,borderBottomColor:e.colors.border.main})}),As=X.create({searchWrapper:{marginLeft:"auto"},searchBarContainer:{maxWidth:225},autoWidth:{width:"auto"},tocDesktop:{width:wz},headerLinks:{paddingHorizontal:Sz-g.medium},headerLinksMobile:{minHeight:E.M},headerLinksMobileButton:{marginRight:"auto"},mobileHeight:{height:kz},desktopHeight:{height:Cz}});c();var So=C(O());c();var ar=C(O());W();c();var Ri=C(O());W();function D7(e){let{space:t,revision:o,page:n,analyticsContext:r}=e,i=jC(),[,a]=R(D),s=se(),[{result:l,error:u}]=Mp([zC(t.key,n.key,i)]);if(u)return null;let d=m=>{m!==(l==null?void 0:l.rating)&&(te({...r,type:"public_content_page_feedback_post",rating:m}),Mw(p=>{WC(p,{space:t.key,page:n.key,revision:o.key,visitorId:i,rating:m,previousRating:l==null?void 0:l.rating})}))};return Ri.createElement(b,{style:[v.directionRow,v.alignCenter]},Ri.createElement(b,null,Ri.createElement(A,{style:[a.GroupTitle,a.textMuted]},s("was_it_helpful"))),Ri.createElement(b,{style:[v.directionRow,v.alignCenter]},Ri.createElement(nw,{tooltip:s("poor_content"),active:(l==null?void 0:l.rating)==="bad",rating:"bad",onPress:d}),Ri.createElement(nw,{tooltip:s("ok_content"),active:(l==null?void 0:l.rating)==="ok",rating:"ok",onPress:d}),Ri.createElement(nw,{tooltip:s("excellent_content"),active:(l==null?void 0:l.rating)==="good",rating:"good",onPress:d})))}function nw(e){let{active:t,tooltip:o,rating:n,onPress:r}=e;return Ri.createElement(Xn,{tooltip:o},(i,a)=>Ri.createElement(We,{ref:a,onPress:()=>r(n),style:[g.Margin.smallLeft],accessibilityLabel:o,...i.events},Ri.createElement(BL,{active:t,interactive:!0,rating:n,size:E.BUTTON_S})))}function A7(e){let{space:t,revision:o,page:n,analyticsContext:r}=e,[,i]=R(D),[,a]=R(Mz),s=se(),l=Ru(n.edits),u=Eu(n),d=!!l,m=t.hasPublicFeedback,p=!t.hideTrademark&&(u==="editorial"||u==="landing");if(!d&&!m)return null;let f=ar.createElement(Pg,null,ar.createElement(ar.Suspense,{fallback:null},ar.createElement(D7,{space:t,revision:o,page:n,analyticsContext:r})));return ar.createElement(b,{style:[g.Padding.largeTop,a.footer]},ar.createElement($.View,{tabletStyle:v.directionColumn,desktopStyle:v.directionRow,style:[v.alignCenter,v.justifySpaceBetween]},d?ar.createElement($.View,{tabletStyle:g.Margin.mediumBottom,style:p?[]:[v.flex1]},ar.createElement(A,{style:[i.textMuted,i.Label]},s("last_modified",ar.createElement($k,{value:l.updatedAt.toDate(),onlyDate:!1})))):null,p?ar.createElement(Su,{space:t,floating:!1}):null,m?ar.createElement($.View,{tabletStyle:p?"hidden":"visible",desktopStyle:"visible"},f):null),p&&m?ar.createElement($.View,{tabletStyle:"visible",desktopStyle:"hidden",style:[v.directionRow,v.flex1,v.justifyContentCenter,g.Margin.largeTop]},f):null)}var Mz=z.create({footer:e=>({borderTopColor:e.colors.border.mid,borderTopWidth:1})});c();var Pi=C(O());W();var Lz=F.createInteractiveComponent(mr),Nz={[Ae]:null,[Fe]:g.Margin.smallLeft,[ko]:null},B7=Pi.memo(function(t){let{sections:o,activeSection:n}=t,[,r]=R(D),[,i]=R(z7),a=se();return Pi.createElement(b,{style:[i.pageOutline]},Pi.createElement(b,{style:[v.directionRow,v.alignCenter,g.Padding.largeHorizontal,g.Margin.smallBottom]},Pi.createElement(A,{style:[r.GroupTitle,r.textMuted,r.Bold]},a("outline"))),o.map(s=>s.type===null||s.type===Qe?null:Pi.createElement(Dz,{key:s.key,section:s,active:n===s.key})))});function Dz(e){let{section:t,active:o}=e,[,n]=R(D),[,r]=R(z7),{navigateToHash:i}=ve();return Pi.createElement(F.TouchableOpacity,{style:[v.directionRow,g.Padding.largeHorizontal,r.sectionItem,o&&r.sectionItemActive],onPress:()=>{i(t.anchor)}},t.tag?Pi.createElement(qn,{backgroundColor:gc[t.tag]||K.orange.base,style:[r.sectionTag,g.Margin.xsmallRight,v.alignSelfCenter]},Pi.createElement(A,{style:[n.textInsideColor,n.MobileCaption,n.Bold,n.Uppercase]},t.tag)):null,Pi.createElement(Lz.Child,{style:[n.Label,n.textMid,t.type&&Nz[t.type],...o?[n.primary,n.Medium]:[]],hoverStyle:n.primary},t.title))}var z7=z.create({pageOutline:e=>({maxWidth:To.MAX_PAGE_OUTLINE_WIDTH}),sectionItem:{marginTop:g.xsmall,marginBottom:g.xsmall,marginLeft:-1,borderLeftWidth:3,borderLeftColor:"transparent",width:"fit-content",maxWidth:"100%"},sectionItemActive:e=>({borderLeftColor:e.colors.primary.main}),sectionTag:{borderRadius:E.XXS,height:E.XXS,paddingHorizontal:g.small,justifyContent:"center"}});c();var Fc=C(O());function W7(e){let{space:t,page:o}=e,[{color:n},r]=Fc.useContext(_i),i=se(),{headerDisabled:a}=Jo(t),{tableOfContents:s}=Zr(o),u=[!s&&a?{key:"pageRead.switchTheme",icon:n==="light"?S.ThemeDark:S.ThemeLight,title:i(n==="light"?"switch_to_light_theme":"switch_to_dark_theme"),trigger:r}:null].filter(me),[d,m]=oh(e,u);return Fc.createElement(Fc.Fragment,null,d,Fc.createElement(xp,{palette:m,icon:S.MoreVertical,kind:"grey",size:"large",title:"Page actions",rounded:!0,testID:"pageToolbar.paletteButton"}))}var{PUBLIC_DESKTOP_HEADER_HEIGHT:Az}=To;function F7(e){var w;let{space:t,revision:o,screen:n,analyticsContext:r,collection:i,collectionSpaces:a,assetHostname:s,currentPage:l}=e,u=se(),[d,m]=R(zz);xO(t);let{headerDisabled:p}=Jo(t),f=Zr(l);if(di(k=>{k.writeAsync([{type:"meta",name:"description",content:l&&"description"in l?l.description:""},{type:"meta",name:"og:description",content:l&&"description"in l?l.description:""},{type:"meta",name:"og:image",content:t.socialPreviewURL?gi(t.socialPreviewURL,{height:640,width:1280,fit:"contain"}):Fz(t,o,l)},{type:"meta",name:"twitter:card",content:"summary_large_image"}]),t.visibility==="in-collection"?(k.setTitle(l?l.title:u("page_not_found"),(i==null?void 0:i.publishedTitle)||(i==null?void 0:i.title)||ua),k.writeAsync([{type:"meta",name:"robots",content:(i==null?void 0:i.visibility)!=="public"?"noindex, nofollow":"index"}])):(k.setTitle(l?l.title:u("page_not_found"),t.publishedTitle||t.title||ua),k.writeAsync([{type:"meta",name:"robots",content:t.visibility!=="public"?"noindex, nofollow":"index"}]))}),sl(l?Qm(t,l,{screen:"space",visibility:t.visibility,pageLayout:Eu(l),diffMode:!1}):Ot(t,{screen:"space_page_notfound",visibility:t.visibility}),[t.key,l==null?void 0:l.key]),J1(t,(w=l==null?void 0:l.key)!=null?w:null),!l&&n.page){let[k]=cl([xC(t.key,n.page)]);if(k&&o.pages[k.page])return So.default.createElement(HI,{to:xt(o,k.page)})}let h=!!f.tableOfContents,y=!!f.outline;return So.default.createElement(So.default.Fragment,null,So.default.createElement(Vz,{space:i||t,assetHostname:s}),So.default.createElement($.View,{style:[v.flex1,m.spacePageContainerBg],mobileStyle:v.directionColumn,desktopStyle:v.directionRow},So.default.createElement(iy,null,h?So.default.createElement(I7,{space:t,revision:o,currentPage:(l==null?void 0:l.kind)==="sheet"?l:null,analyticsContext:r,collection:i,collectionSpaces:a}):null,So.default.createElement(qn,{style:[m.spacePageBody],backgroundColor:d.colors.background.main},So.default.createElement(So.default.Suspense,{fallback:So.default.createElement(th,{withPageOutline:(l==null?void 0:l.layout)!=="landing"})},l&&l.kind==="sheet"?So.default.createElement(Bz,{screen:n,key:Wz(n,o,l),space:t,revision:o,changeRequest:void 0,page:l,readOnly:!0,withComments:!1,withToC:h,analyticsContext:r,outline:y?B7:void 0,toolbar:W7,footer:So.default.createElement(A7,{space:t,revision:o,page:l,analyticsContext:r}),sideColumnStickyTop:g.large+(p?0:Az)}):So.default.createElement(jR,{statusCode:404},So.default.createElement(Wu,{title:u("page_not_found"),action:So.default.createElement(lx,{kind:"secondary",size:"medium",to:{screen:{type:"space",space:t.key,page:""}}},u("back_to_home"))},u("page_not_found_long"))))))))}function Bz(e){let{page:t,screen:o}=e,n=Gx();return nh(n,o,t.key),So.default.createElement(Jg,{...e,scrollRef:n})}var zz=z.create({spacePageContainerBg:e=>({backgroundColor:e.colors.background.main}),spacePageBody:{flex:1}});function Wz(e,t,o){let n=e.space;return n+=`/${e.changeRequest||"main"}`,n+=`/${t.conflicts?"conflicts":"normal"}`,n+=`/${o.key}`,e.diff&&(n+="/diff"),e.revision&&(n+="/revision"),n}function Fz(e,t,o){let n=o&&t.rootPages[0]!==o.key?`/page/${o.key}`:"",{primaryColor:r,headerLogoURL:i}=rf(e),a=ri(e),s=`color=${encodeURIComponent(r||"")}&logo=${encodeURIComponent(Ga(i||e.iconURL||""))}&theme=${encodeURIComponent(a||"")}`;return`${vm()}/share/space/thumbnail/${e.key}${n}.png?${s}`}function Vz(e){let{space:t,assetHostname:o}=e,n=qC(t,"public-content"),[r]=R(),[i,a]=So.default.useState(n.iconURL||(n.emoji?`${o}${FC(n.emoji)}`:null));return So.default.useEffect(()=>{if(i)return;let s=192,l=document.createElement("canvas"),u=l.getContext("2d");if(!u)return;l.width=s,l.height=s,u.fillStyle=r.colors.background.main,u.fillRect(0,0,s,s);let d=.7;u.fillStyle=r.colors.text.main,u.font=`400 ${s*d}px gitbook-content-font`,u.textAlign="center",u.textBaseline="middle",u.fillText(t.title.slice(0,1),s/2,s/2),a(l.toDataURL("image/png"))},[t.title,a]),di(s=>{s.writeAsync([{type:"link",rel:"icon",href:i?Ga(i):`${o}/public/images/icon-512.png`},{type:"link",rel:"apple-touch-icon",href:i?Ga(i):`${o}/public/images/icon-512.png`}])}),null}c();var Te=C(O());W();var qz=$.createResponsiveComponent(fe),V7=200,Gz=4*(V7+g.small);function q7(e){let{space:t,collection:o,revision:n}=e,[,r]=R(D),[,i]=R(Kz),a=Te.useMemo(()=>(t==null?void 0:t.footer)||(o==null?void 0:o.footer),[t,o]);return Te.createElement(Te.Fragment,null,a?Te.createElement(qz,{tag:"footer",style:[v.alignCenter,i.footer]},Te.createElement($.View,{desktopStyle:[sa.desktopContainer]},Te.createElement($.View,{desktopStyle:v.directionRow,mobileStyle:v.directionColumn},a!=null&&a.logoURL?Te.createElement($.View,{style:[v.directionRow,v.alignStart,g.Padding.xlargeTop,a!=null&&a.copyright?null:g.Padding.xlargeBottom],desktopStyle:g.Margin.xxlargeHorizontal,mobileStyle:g.Margin.largeHorizontal},Te.createElement($.View,{desktopStyle:"visible",mobileStyle:"hidden"},Te.createElement(Wo,{source:{uri:a==null?void 0:a.logoURL},style:sa.footerImageDesktop,loading:"lazy"})),Te.createElement($.View,{desktopStyle:"hidden",mobileStyle:"visible"},Te.createElement(b,{style:g.Margin.largeLeft},Te.createElement(Wo,{source:{uri:a==null?void 0:a.logoURL},style:sa.footerImageMobile,loading:"lazy"})))):null,a!=null&&a.linkGroups?Te.createElement($.View,{style:[g.Padding.xlargeTop,a.logoURL?v.alignStart:v.alignCenter,v.flex1,a!=null&&a.copyright?null:g.Padding.xlargeBottom],mobileStyle:v.alignStart,tabletStyle:g.Padding.largeLeft},Te.createElement($.View,{mobileStyle:"hidden",tabletStyle:"hidden",desktopStyle:a.linkGroups.length<3&&!a.logoURL?"visible":"hidden"},Te.createElement(Hz,{linkGroups:a.linkGroups,revision:n})),Te.createElement($.View,{mobileStyle:"visible",tabletStyle:"visible",desktopStyle:a.linkGroups.length>=3||a.logoURL?"visible":"hidden"},Te.createElement(Xz,{linkGroups:a.linkGroups,revision:n}))):null),a!=null&&a.copyright?Te.createElement($.View,{style:[v.flex1,g.Padding.xlargeVertical]},Te.createElement(A,{style:[sa.copyright,r.textMuted]},a==null?void 0:a.copyright)):null)):null)}function Hz(e){let{linkGroups:t,revision:o}=e,[,n]=R(D),r=[],i=t==null?void 0:t.map(({title:a})=>a);return t==null||t.forEach(a=>{var s;(s=a==null?void 0:a.links)==null||s.forEach((l,u)=>{if(r[u]===void 0)return r[u]=[l];r[u].push(l)})}),Te.createElement(b,{style:[v.flex1,v.justifyContentStart,v.directionRow]},Te.createElement(b,{style:sa.linkGroupColumnDesktop},Te.createElement(b,{style:[v.flex1]},i==null?void 0:i.map((a,s)=>Te.createElement(b,{key:a,style:[v.alignStart,s>0?g.Margin.smallTop:null]},Te.createElement(A,{style:[n.text,n.Heading3]},a))))),r.map((a,s)=>Te.createElement(b,{key:s,style:sa.linkGroupColumnDesktop},Te.createElement(G7,{links:a,revision:o,renderMode:"horizontal"}))))}function Xz(e){let{linkGroups:t,revision:o}=e,[,n]=R(D);return Te.createElement($.View,{style:[v.flex1,v.justifyContentStart,v.directionRow],desktopStyle:[sa.linkGroupColumnsDesktop,v.directionRow,v.wrap,v.flexShrink1],mobileStyle:v.directionColumn},t.map((r,i)=>Te.createElement($.View,{key:i,desktopStyle:[sa.linkGroupColumnDesktop,g.Margin.xlargeTop],mobileStyle:[sa.linkGroupColumnMobile,g.Margin.xlargeTop,g.Margin.largeLeft]},Te.createElement(b,{style:v.alignStart},Te.createElement(A,{style:[n.text,n.Heading3]},r.title)),Te.createElement(G7,{links:r.links,revision:o,renderMode:"vertical"}))))}function G7(e){let{links:t,renderMode:o}=e,[,n]=R(D);return Te.createElement($.View,{style:[v.alignStart,v.flex1,v.directionColumn],desktopStyle:o==="vertical"?g.Margin.largeTop:null,mobileStyle:g.Margin.smallTop},(t||[]).map((r,i)=>{let a=i===t.length-1;return r.title?Te.createElement(Te.Suspense,{fallback:null,key:r.title},Te.createElement(b,{style:[sa.referenceLink,o==="horizontal"&&i>0?g.Margin.smallTop:null]},Te.createElement(vd,{title:r.title,contentRef:r.to,style:[n.textMuted,n.Medium,o==="horizontal"?null:[g.Padding.smallTop,a?null:g.Padding.smallBottom]],...e}))):null}))}var Kz=z.create({footer:e=>({backgroundColor:e.colors.background.mid})}),sa=X.create({linkGroupColumnsDesktop:{maxWidth:Gz,marginTop:-g.xlarge},linkGroupColumnDesktop:{width:V7,marginLeft:g.small,paddingRight:g.xlarge},linkGroupColumnMobile:{width:"auto"},desktopContainer:{maxWidth:1280,width:"100%"},copyright:{textAlign:"center"},mobileHeight:{height:"auto"},referenceLink:{maxWidth:"100%"},footerImageDesktop:{maxHeight:150,maxWidth:150,objectFit:"contain"},footerImageMobile:{maxHeight:30,maxWidth:30,objectFit:"contain"}});c();var tn=C(O());c();var wo=C(O());c();var um=C(O());function H7(e){let{query:t,space:o,onUpdateQuery:n,onSubmitAIQuery:r,allowEnterToOpen:i}=e,a=um.useCallback(()=>{n("")},[n]);return t.query?um.createElement(c7,{target:{space:o},query:t,onAnswerLoaded:a,onSubmitQuery:r}):um.createElement(u7,{target:{space:o},onSubmitAIQuery:r,allowEnterToOpen:i})}c();var rw=C(O());c();var Ba=C(O());function X7(e){let{space:t,onUpdateQuery:o,onSubmitAIQuery:n}=e,r=se(),i=JL(),a=$h(),s=Kh(t.hasAISearch?{space:t}:null),l=Ba.useCallback(p=>{switch(p.type){case"recent-search":return{icon:S.Search.CSS,title:p.query,action:r("search")};case"recent-question":return{icon:S.AILens.CSS,title:p.question,action:r("search_ask")};case"recommended-question":return{icon:S.AILens.CSS,title:p.question,action:r("search_ask")};default:De(p)}},[r]),u=Ba.useCallback(p=>{switch(p){case"recent-search":return{title:r("search_blankslate_recent_searches")};case"recent-question":return{title:r("search_blankslate_recent_questions")};case"recommended-question":return{title:r("search_blankslate_recommended_questions")};default:return}},[r]),d=(p,f)=>{switch(p.type){case"recent-search":{o(p.query),te(Ot(t,{type:"search_pick_suggestion_recent_search",suggestionIndex:f}));break}case"recent-question":{n(p.question),te(Ot(t,{type:"ai_search_pick_suggestion_recent_search",suggestionIndex:f}));break}case"recommended-question":te(Ot(t,{type:"search_pick_suggestion_question"})),n(p.question);break;default:De(p)}},m=Ba.useMemo(()=>{let p=t.hasAISearch?a.map(h=>({type:"recent-question",question:h})):[],f=i.filter(h=>!a.includes(h)).map(h=>({type:"recent-search",query:h}));return[...p,...f,...s]},[i,a,s,t.hasAISearch]);return m.length===0?Ba.createElement(Wi,null,r("search_blankslate")):Ba.createElement(Z,{style:[N.flex.flex1,N.flex.column]},Ba.createElement(Qa,{data:m,getKey:$z,renderItem:l,renderGroup:u,groupItem:Uz,getGroupKey:jz,onOpen:d,style:[N.padding.mediumHorizontal,N.padding.mediumVertical]}))}function $z(e){switch(e.type){case"recent-search":return`recent-search:${e.query}`;case"recent-question":return`recent-question:${e.question}`;case"recommended-question":return`recommended-question:${e.question}`;default:De(e)}}function Uz(e){return e.type}function jz(e){return e}c();var za=C(O());function K7(e){let{space:t}=e,o=za.useDeferredValue(e.query),n=se(),{navigate:r}=ve(),i=Wx({query:o,types:["pages","sections"],hitsPerPage:30,analyticsTags:[{type:"space",space:t.key}]}),a=za.useCallback(u=>{switch(u.type){case"page":return{title:u.title,icon:S.Page.CSS,subtitle:u.ancestors.filter(d=>d.kind!=="group"&&d.key!==u.page.key).map(d=>d.title).join(" \u203A "),action:n("search_goto_page")};case"section":return{title:u.title,body:u.body,icon:S.Hash.CSS,nested:!0,action:n("search_goto_section")};default:throw new Error("Unexpected item type")}},[n]),s=za.useCallback(u=>{if(u)return{title:u.page.title}},[]),l=za.useCallback((u,d)=>{if(!(u.type!=="page"&&u.type!=="section"))switch(te(Ot(t,{type:"public_content_search_open_result",resultType:u.type,resultIndex:d})),u.type){case"page":r({screen:{type:"space",space:u.space.key,page:u.path,hash:void 0,query:void 0}});break;case"section":r({screen:{type:"space",space:u.space.key,page:u.path,hash:u.anchor,query:void 0}});break;default:De(u)}},[]);return i.length===0?za.createElement(Wi,null,n("search_blankslate_query",o)):za.createElement(Qa,{data:i,getKey:Yz,renderItem:a,renderGroup:s,groupItem:Qz,getGroupKey:Zz,onOpen:l,style:[N.padding.mediumHorizontal,N.padding.mediumVertical]})}function Yz(e){return e.key}function Zz(e){return e?e.page.key:""}function Qz(e){return e.groups.find(t=>t.type==="page")}function $7(e){let{space:t,query:o,onUpdateQuery:n,onSubmitAIQuery:r}=e;return e7(o),o7(o,{space:t}),o?rw.createElement(K7,{space:t,query:o}):rw.createElement(X7,{space:t,onUpdateQuery:n,onSubmitAIQuery:r})}function U7(e){let{space:t}=e,[o,{open:n,close:r,setQuery:i}]=ux();return fr({[Xe.SEARCH_OPEN]:()=>{n()},"/":()=>{n()}},["all"],[]),wo.createElement(yk,null,typeof o=="string"?wo.createElement(Jz,{space:t,query:o,setQuery:i,close:r}):null)}function Jz(e){let{space:t,query:o,setQuery:n,close:r}=e,i=se(),a=wo.useRef(null),[s,l]=m7(),[u,d]=Ai("search",[!!t.hasAISearch]);sl({screen:"search",screenTab:u},[u]);let m=wo.useCallback(h=>{var y;n(h),(y=a.current)==null||y.focus()},[n,a]),p=wo.useCallback(h=>{var y;t.hasAISearch&&(d("lens"),n(h),l(h),(y=a.current)==null||y.focus(),te(Ot(t,{type:"ai_search_submit",query:h})))},[!t.hasAISearch,d,n,l,a]),f=wo.useCallback(h=>{d(h),l(h==="search"?"":o)},[d,l]);return wo.useEffect(()=>{var h;(h=a.current)==null||h.focus()},[u]),wo.createElement(Jk,{ref:a,inputIcon:u==="search"?S.Search.CSS:S.AILens.CSS,rightButton:t.hasAISearch?wo.createElement(Z,{style:[N.flex.row,N.flex.alignCenter]},u==="lens"&&o&&o!==s.query?wo.createElement(Z,{style:[N.margin.mediumRight,N.flex.row,N.flex.alignCenter]},wo.createElement(Z,{style:N.margin.xsmallRight},wo.createElement(Hn,{style:[N.text.caption,N.textColor.muted]},"Enter")),wo.createElement(S.ArrowEnter.CSS,{style:[N.icons.xsmall,N.textColor.muted]})):null,wo.createElement(N1,{activeTab:u,tabs:[{key:"search",label:i("search")},{key:"lens",label:"Lens"}],onPress:f})):null,query:o,onQueryChange:n,onSubmitQuery:p,onClose:r,queryPlaceholder:i(u==="search"?"search_placeholder":"search_placeholder_ask")},u==="search"||!t.hasAISearch?wo.createElement($7,{query:o,space:t,onUpdateQuery:m,onSubmitAIQuery:p}):wo.createElement(H7,{query:s,space:t,onUpdateQuery:m,onSubmitAIQuery:p,allowEnterToOpen:o.length===0}))}c();var ay=C(O());var ku=new Map;typeof window<"u"&&(window.GitBook=window.GitBook||{addEventListener:(e,t)=>{ku.has(e)||ku.set(e,[]),ku.get(e).push(t)},removeEventListener:(e,t)=>{if(!ku.has(e))return;let o=ku.get(e),n=o.indexOf(t);n!==-1&&o.splice(n,1)}});function j7(e,...t){let o=ku.get(e);o&&o.forEach(n=>{n(...t)})}function Y7(e){if(ay.useContext(Fo).mode!=="public-content")throw new Error("useInjectIntegrationsScripts can only be used in public-content mode");ay.useEffect(()=>(j7("load"),()=>{j7("unload")}),[e.key])}function sy(e){let{space:t,assetHostname:o,collection:n,collectionSpaces:r,usesCookies:i}=e,{locale:a}=tn.useContext(Fo),{screen:s}=qi(),l=eO(t.key,s),u=s.type==="space"&&typeof s.changeRequest=="string";if(u&&!l)throw new Gc.NotFound("Change request not found");let d=s.type==="space"&&s.revision,m=u&&l?l.revisionCurrent:d&&s.revision||t.revision,p=ul({space:t.key,revision:m});if(!p)throw u?new Gc.NotFound("Change request not found"):s.type==="space"&&s.revision?new Gc.NotFound("Revision not found"):new Error("Expected revision");pO(t),Y7(t);let f=qs(t)?t.organization:void 0,h=tn.useMemo(()=>Ot(t,{}),[t.key,f,t.collection]);if(s.type!=="space"||s.space!==t.key)throw new Error("screen should be the space we render");tn.useEffect(()=>{if(t.searchKey)return yx(t.searchKey)},[t.searchKey]),di(k=>{k.write({type:"font",font:t.font||"Inter",fontFamilyName:"gitbook-content-font"}),(s.revision||s.changeRequest||s.sideSheet)&&k.write({type:"meta",name:"robots",content:"noindex"}),k.setLang(a)}),p7(t.privacyPolicyURL,mv(t)||i);let[y,w]=Ox(p,s);return tn.createElement(tn.Fragment,null,y?tn.createElement(Rp,{to:{screen:y}}):null,tn.createElement(L7,{space:t,revision:p,collection:n,currentPage:w,collectionSpaces:r}),tn.createElement(F7,{space:t,revision:p,screen:s,analyticsContext:h,collection:n,collectionSpaces:r,assetHostname:o,currentPage:w}),tn.createElement(q7,{space:t,revision:p,collection:n}),tn.createElement(U7,{space:t,revision:p}),tn.createElement(NL,null),tn.createElement(GI,{organization:f,content:t,contentRef:da(t.key)}))}c();var iw=C(O());c();function xu(e){return e?e.endsWith("/")?e:`${e}/`:""}function Z7(e,t){return o=>{let n=`/${xu(e.basePath)}`;switch(o.type){case"back_office":case"account":case"error_notfound":case"org_invite":case"org_join":case"org_settings":case"root":case"join":case"account_verification":case"integrations":case"import":case"template":case"welcome":case"contentkit_builder":throw new Error(`Cannot navigate to ${o.type} on public content`);case"home":{if(o.organization){let i=ec.read({type:"organization",organization:o.organization});n=zu(i);break}throw new Error("Cannot navigate to home without an org on public content")}case"user":{let i=ec.read({type:"user",user:o.user});n=zu(i);break}case"collection":{let i=ec.read({type:"collection",collection:o.collection});n=zu(i);break}case"space":{let i=ec.read({type:"space",space:o.space});i.hostname===e.hostname&&(!e.basePath||i.pathname.startsWith(e.basePath))||t?(e.shareLink&&(n+=xu(e.shareLink)),i.pathname!==e.basePath&&(e.basePath?n+=xu(Vw(i.pathname,xu(e.basePath))):n+=xu(i.pathname))):n=zu(i),n+=eW(o);break}case"legacy_space":case"legacy_account":throw new Error("Cannot navigate to legacy urls");default:De(o)}let r;if(typeof o.query=="string"){let i=new URLSearchParams;i.set("q",o.query),r=`?${i.toString()}`}return{pathname:n,hash:o.hash,search:r}}}function eW(e){let t="";return e.revision&&(t+=`~/revisions/${e.revision}/`),e.changeRequest&&(t+=`~/changes/${e.changeRequest}/`),t+=`${e.page[0]==="/"?e.page.slice(1):e.page}`,e.sideSheet&&(t=`${xu(t)}~/${e.sideSheet.type}${"tab"in e.sideSheet?`/${e.sideSheet.tab}`:""}`),t}c();function Q7(e,t,o,n=[]){return r=>{let{spaceKey:i,pathname:a}=Hw({currentSpaceKey:t,collectionSpaces:n,collection:o,pathname:r.pathname,paths:e}),s={type:"space",space:i,page:""};tW(s,MC(a)),r.hash&&(s.hash=r.hash.replace(/^#/,""));let u=new URLSearchParams(r.search).get("q");return typeof u=="string"&&(s.query=u),s}}function tW(e,t){Iy(t,[{path:`/~/revisions/:revision/:page${Hm}`,onMatch:o=>{Object.assign(e,{page:o.params.page,revision:o.params.revision}),Ou(e,o,t)}},{path:"/~/revisions/:revision",onMatch:o=>{Object.assign(e,{revision:o.params.revision,page:""}),Ou(e,o,t)}},{path:`/~/changes/:changeRequest/:page${Hm}`,onMatch:o=>{Object.assign(e,{changeRequest:o.params.changeRequest,revision:void 0,page:o.params.page}),Ou(e,o,t)}},{path:"/~/changes/:changeRequest",onMatch:o=>{Object.assign(e,{changeRequest:o.params.changeRequest,revision:void 0,page:""}),Ou(e,o,t)}},{path:`/:page${Hm}`,onMatch:o=>{Object.assign(e,{page:o.params.page,diff:!1}),Ou(e,o,t)}},{path:"/",onMatch:o=>{Object.assign(e,{diff:!1,page:""}),Ou(e,o,t)}}])}function Ou(e,t,o){Iy(o,[{path:"/~/share/pdf",onMatch:n=>{Object.assign(e,{sideSheet:{type:"share",tab:"pdf"}})}}],{prefix:t.path})}function cy(e,t,o,n,r){let i=Y1(),a=(0,iw.useMemo)(()=>Q7(e,o,n,r),[e.hostname,e.basePath,e.shareLink,o,n,r]),s={hostname:e.hostname,pathname:e.basePath},l=(0,iw.useMemo)(()=>Z7({hostname:s.hostname,basePath:s.pathname,shareLink:e.shareLink},t),[e.hostname,e.basePath,e.shareLink]);return{forceHardNavigation:!i,getNavigationScreenFromLocation:a,getLocationForNavigationScreen:l}}function J7(e){let{space:t,ssrRequestPath:o,ssrRouterContext:n,basePath:r,hostname:i,customToken:a,shareLink:s,assetHostname:l,preview:u=!1,usesCookies:d=!1}=e,m=cy({hostname:i,basePath:r,shareLink:s},u,t.key),{primaryColor:p}=Jo(t);return Ir.createElement(Hu,{mode:"public-content",preview:u,locale:t.language},Ir.createElement(Ir.Suspense,{fallback:Ir.createElement(Oo,{size:"large"})},Ir.createElement(js,{primaryColor:p},Ir.createElement(sm,null,Ir.createElement(Uh,{ssrRequestPath:o,ssrRouterContext:n},Ir.createElement(Ip,{persist:!1,...m},Ir.createElement(nf,null,a&&typeof window>"u"?Ir.createElement(Oo,{size:"large"}):Ir.createElement(sy,{space:t,assetHostname:l,usesCookies:d}))))))))}c();var on=C(O());function e6(e){let{collection:t,basePath:o,hostname:n,customToken:r,collectionSpaces:i,ssrRequestPath:a,ssrRouterContext:s,shareLink:l,assetHostname:u,preview:d=!1,usesCookies:m=!1}=e,p=cy({hostname:n,basePath:o,shareLink:l},d,void 0,t,i),{primaryColor:f}=Jo(t);if(!d&&t.publishingType!=="variants")throw new Error("we do not know how to render anything else than variants for now");return on.createElement(Hu,{mode:"public-content",preview:d,locale:t.language},on.createElement(js,{primaryColor:f},on.createElement(sm,null,on.createElement(Uh,{ssrRequestPath:a,ssrRouterContext:s},on.createElement(Ip,{persist:!1,...p},on.createElement(on.Suspense,{fallback:on.createElement(Oo,{size:"large"})},on.createElement(nf,null,r&&typeof window>"u"?on.createElement(Oo,{size:"large"}):on.createElement(oW,{collection:t,collectionSpaces:i,assetHostname:u,usesCookies:m}))))))))}function oW(e){let{screen:t}=qi();if(t.type!=="space")throw new Error("screen should be a space");let[o]=zr([da(t.space)]);if(!o)throw new Error("the space should exist");let{primaryColor:n}=Jo(o);return on.createElement(Hu,{locale:o.language},on.createElement(js,{primaryColor:n},on.createElement(sm,null,on.createElement(sy,{...e,space:o}))))}c();var sr=C(O());W();c();var Vc=C(O());var aw=lt("preview:child");function t6(e,t){let[o,n]=Vc.useState(e),[r,i]=Vc.useState(void 0);return nW(o.footer),Vc.useEffect(()=>{t&&(window.addEventListener("message",a=>{if(a.data.source!=="gitbook-preview-parent"||(aw.info("receive message",a.origin,a.data),a.origin!==vm()&&a.origin!=="http://localhost:5001"))return;let s=Lw(a.data.payload),l=a.data.previewID;aw.debug("update content with",s),n(s),i(l),window.parent.postMessage({source:"gitbook-preview-child"},"*")}),aw.info("notify parent that we are ready"),window.parent.postMessage({source:"gitbook-preview-child"},"*"))},[t]),[o,r]}function nW(e){let t=Vc.useRef(e);tl(()=>{e&&e!==t.current&&window.scrollTo({left:0,top:document.body.scrollHeight,behavior:"smooth"}),t.current=e},[e])}c();var o6=C(O());function sw(){o6.useEffect(()=>{typeof window>"u"},[])}function cw(e){let t="collection"in e?e.collection:e.space,[o,n]=t6(t,!!e.preview);return sw(),sr.createElement(Sw,null,sr.createElement(S7,{content:o,isPreview:!!e.preview},sr.createElement(rW,{...e,content:o,previewID:n})))}function rW(e){let{content:t,previewID:o}=e;sw();let[n]=sr.useContext(_i);return sr.createElement(Nr,{theme:n},sr.createElement(ik,{theme:n},sr.createElement(pI,null,sr.createElement(L1,null,sr.createElement(QC,{enabled:!0},"collection"in e?sr.createElement(e6,{...e,collection:t}):sr.createElement(J7,{...e,space:t})),o?sr.createElement(b,{testID:o}):null))))}c();function lw(e){let t=new URLSearchParams(window.location.search),o=window.location.hash;if(t.has("jwt_token")){t.delete("jwt_token");let i=t.toString();window.history.replaceState({},"",`${window.location.pathname}${i?`?${i}`:""}${o||""}`)}let{dsn:n,tracesSampling:r}={...Wa.sentry,...Wa.sentry.publicContent};_w({dsn:n,release:Ow,projectId:Wa.firebase.projectId,tracesSampling:r}),window.location.hostname!=="localhost"&&NC(e.hostname),B1({customToken:e.customToken,waitUserReady:!1})}c();function n6(e){e!=null&&e.firestore&&Js.fromJS(e.firestore),e!=null&&e.head&&tk.cache.fromJS(e.head),e!=null&&e.contentURLs&&ec.fromJS(e.contentURLs),e!=null&&e.contentRefs&&yi.fromJS(e.contentRefs),e!=null&&e.screenToContentRefs&&Jf.fromJS(e.screenToContentRefs),e!=null&&e.swaggers&&vc.fromJS(e.swaggers),e!=null&&e.api&&tx.fromJS(e.api)}c();var r6=lt("browser-compatibility");function i6(){let e=["webcache.googleusercontent.com","translate.googleusercontent.com","translate.google.com"];return!window.location.hostname||e.includes(window.location.hostname)?(r6.warning("The application is served over an unsupported hostname and has been made static."),!1):iW()?!0:(r6.warning("Your browser is missing required features, the application has been made static."),!1)}function iW(){try{if("\u212B".normalize("NFKD")!=="A\u030A")return!1}catch(e){return!1}return!(!window.Intl||![].flat)}c();function a6(e){document.readyState==="interactive"||document.readyState==="complete"?e():document.addEventListener("DOMContentLoaded",()=>{e()})}c();var s6=C(sv());function uw(e){return new ni("ssr.deserializeFromHTML").wrapSync(()=>{let o=s6.default.decompress(e);return o?JSON.parse(o):null})}i6()&&a6(()=>{aW()});async function aW(){let e=window.__GITBOOK_INITIAL_PROPS__,t=uw(e);lw(t),window.__GITBOOK_LAZY_MODULES__&&await Lk(window.__GITBOOK_LAZY_MODULES__);let o=window.__GITBOOK_INITIAL_STATE__,n=uw(o);n?(n6(n),my.registerComponent("PublicContentApplication",()=>cw),my.runApplication("PublicContentApplication",{hydrate:!0,rootTag:document.querySelector(".gitbook-root"),initialProps:t})):console.error("Invalid state received from server, content won't be interactive")}
/*! Bundled license information:

statuses/index.js:
  (*!
   * statuses
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2016 Douglas Christopher Wilson
   * MIT Licensed
   *)

rangefix/rangefix.js:
  (*!
   * RangeFix v0.2.9
   * https://github.com/edg2s/rangefix
   *
   * Copyright 2014-17 Ed Sanders.
   * Released under the MIT license
   *)
*/
//# sourceMappingURL=https://app.gitbook.com/public/app/public-54VZQLYH.min.js.map
