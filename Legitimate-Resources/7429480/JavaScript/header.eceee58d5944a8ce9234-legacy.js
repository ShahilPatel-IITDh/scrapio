"use strict";(self.webpackChunkAemPortal=self.webpackChunkAemPortal||[]).push([[544],{609:function(t,e,n){var i=n(5611),s=n(8433),r=n(5661),o="minified",a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.ZT)(e,t),e.prototype.on=function(){this.bar=this.ctx.querySelector("ol"),this.notifier=function(t,e){if(window.ResizeObserver){var n=new ResizeObserver(e);return n.observe(t),{denotify:n.disconnect.bind(n)}}var i;function s(){window.clearTimeout(i),i=window.setTimeout(e,200)}return window.addEventListener("resize",s,{passive:!0}),{denotify:function(){window.removeEventListener("resize",s)}}}(this.bar,this.resized.bind(this))},e.prototype.after=function(){this.resized()},e.prototype.stop=function(){this.notifier.denotify()},e.prototype.resized=function(){this.ctx.classList.remove(o),this.bar.clientWidth<this.bar.scrollWidth&&this.ctx.classList.add(o)},e}(r.Y),c=a,u=n(257),d=n(5480),l=n(5390),h="closedCrisis_",f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.ZT)(e,t),e.prototype.on=function(){var t;return this.facts=(0,d.TS)(this.ctx),this.scsHeader=null!==(t=document.querySelector("sdx-header"))&&void 0!==t?t:void 0,this.initCrisis()},e.prototype.initCrisis=function(){var t,e;return(0,s.mG)(this,void 0,Promise,(function(){var n,i,r,o,a,c=this;return(0,s.Jh)(this,(function(s){switch(s.label){case 0:if(this.facts.know("crisisNotification","absent","header"),!this.ctx.dataset.crisisDataUrl)return this.facts.know("crisis",null,"header"),[2];n=document.createElement("div"),this.ctx.appendChild(n),s.label=1;case 1:return s.trys.push([1,4,,5]),[4,fetch(this.ctx.dataset.crisisDataUrl)];case 2:return[4,s.sent().json()];case 3:return(i=s.sent())&&i.crisis?(this.facts.know("crisis",i,"header"),"1"===sessionStorage.getItem(h+i.hash)?(this.facts.know("crisisNotification","closed","header"),[2]):(r=function(){var t;n=(0,u.r)(n,l.createElement("div",{className:""})),c.facts.know("crisisNotification","closed","header"),document.documentElement.classList.remove("has-crisis"),null===(t=c.scsHeader)||void 0===t||t.removeAttribute("crisis-on"),sessionStorage.setItem(h+i.hash,"1")},o=i.textMobile&&i.text!==i.textMobile?[l.createElement(p,{additionalClasses:"hidden-phone-down",link:i.link,target:i.target},i.text),l.createElement(p,{additionalClasses:"hidden-tablet-up",link:i.link,target:i.target},i.textMobile)]:[l.createElement(p,{link:i.link,target:i.target},i.text)],document.documentElement.classList.add("has-crisis"),null===(t=this.scsHeader)||void 0===t||t.setAttribute("crisis-on","true"),n=(0,u.r)(n,l.createElement("div",{className:"crisis"},l.createElement("div",{className:"notification-header ".concat(null!==(e=i.styling)&&void 0!==e?e:""," notification--open")},l.createElement("div",{className:"notification__content"},o,l.createElement("button",{className:"notification__close notification-cancel","aria-label":"Close","on-click":r},l.createElement("i",{className:"icon icon-022-close","aria-hidden":"true"})))))),this.facts.know("crisisNotification","present","header"),[3,5])):(this.facts.know("crisis",null,"header"),[2]);case 4:return a=s.sent(),this.log.error("Failed to fetch crisis data",a),this.facts.know("crisisNotification","failed","header"),[3,5];case 5:return[2]}}))}))},e}(r.Y),g=f;function p(t,e){var n=t.additionalClasses,i=t.link,s=t.target;return l.createElement("div",{className:"notification__body ".concat(n||"")},i?l.createElement("a",{href:i,"style-color":"white",target:s||"",innerHTML:e}):l.createElement("span",{innerHTML:e}))}var m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.ZT)(e,t),e.prototype.on=function(){this.dropdownIcon=this.ctx.querySelector(".modL2Navigation__icon"),this.dropdownList=this.ctx.querySelector(".modL2Navigation__dropdown"),document.documentElement.classList.add("has-l2-nav"),this.ctx.classList.add("hidden"),this.ctx.setAttribute("aria-hidden","true")},e.prototype.after=function(){var t=this;window.addEventListener("scroll",(function(){t.ctx.classList.remove("hidden"),t.ctx.setAttribute("aria-hidden","false"),window.pageYOffset+80<t.getOffsetTop()||t.ctx.classList.add("is-visible"),window.pageYOffset>t.getOffsetTop()||t.ctx.classList.contains("is-visible")&&(t.ctx.classList.remove("is-visible"),t.toggleDropdown(!1)),0===window.pageYOffset&&(t.ctx.classList.add("hidden"),t.ctx.setAttribute("aria-hidden","true"))}),{passive:!0}),this.dropdownIcon.addEventListener("click",this.toggleDropdown.bind(this))},e.prototype.toggleDropdown=function(t){this.dropdownIcon.getAttribute("icon-name").includes("down")&&t?(this.dropdownIcon.setAttribute("icon-name","icon-chevron-normal-up"),this.dropdownList.classList.add("is-visible")):(this.dropdownIcon.setAttribute("icon-name","icon-chevron-normal-down"),this.dropdownList.classList.remove("is-visible"))},e.prototype.getOffsetTop=function(){return this.ctx.offsetTop},e}(r.Y),v=m,w=n(7108),y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.ZT)(e,t),e.prototype.after=function(){new b(this.ctx)},e}(r.Y),L=y,b=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.ZT)(e,t),e.prototype._isMobile=function(){return!1},e}(w.Z),k=n(9902),x=n(9748),S=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.ZT)(e,t),e.prototype.on=function(){var t,e,n;document.documentElement.classList.add("has-sdx-header");var i=[this.ctx.closest(".scs-pageheader"),null===(n=this.ctx.closest(".scs-pageheader"))||void 0===n?void 0:n.parentElement,this.ctx.closest(".ui-header"),this.ctx.closest(".ui-panel-wrapper")].filter(Boolean);try{for(var r=(0,s.XA)(i),o=r.next();!o.done;o=r.next())o.value.style.position="static"}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}document.body.style.minHeight="100vh",this.headerCoordinator=this.ctx.querySelector("scs-header-coordinator"),this.facts=(0,d.TS)(this.ctx)},e.prototype.after=function(){return(0,s.mG)(this,void 0,void 0,(function(){return(0,s.Jh)(this,(function(t){switch(t.label){case 0:return[4,customElements.whenDefined("sdx-header")];case 1:return t.sent(),this.updateLanguageLinks(),x._z.push(this.updateLanguageLinks.bind(this)),[4,customElements.whenDefined("scs-header-coordinator")];case 2:return t.sent(),[4,this.initHeaderAttributes()];case 3:return t.sent(),[2]}}))}))},e.prototype.updateLanguageLinks=function(){var t,e,n,i,r,o,a="string"==typeof this.ctx.navigation?JSON.parse(this.ctx.navigation):this.ctx.navigation,c=null===(i=null===(n=a.tertiary)||void 0===n?void 0:n.children)||void 0===i?void 0:i.find((function(t){var e;return"language-selection"===(null===(e=t.dataset)||void 0===e?void 0:e.trackLabel)})),u=(0,s.ev)([c],(0,s.CR)(null!==(r=null==c?void 0:c.children)&&void 0!==r?r:[]),!1).filter(Boolean),d=!1;try{for(var l=(0,s.XA)(u),h=l.next();!h.done;h=l.next()){var f=h.value,g=f.href;if(g){var p=new URL(g,window.location.href),m=p.toString();p.search=window.location.search,p.hash=window.location.hash;var v=p.toString();if(v!==m){d=!0,f.href=v;var w=document.head.querySelector('link[rel=alternate][hreflang="'.concat(null===(o=f.label)||void 0===o?void 0:o.toLowerCase(),'"]'));w&&(w.href=v)}}}}catch(e){t={error:e}}finally{try{h&&!h.done&&(e=l.return)&&e.call(l)}finally{if(t)throw t.error}}d&&(this.ctx.navigation=(0,s.pi)({},a))},e.prototype.initHeaderAttributes=function(){return(0,s.mG)(this,void 0,void 0,(function(){var t,e,n=this;return(0,s.Jh)(this,(function(i){switch(i.label){case 0:return[4,(0,k.Ai)()];case 1:return t=i.sent(),(e=t.getUser())?(this.headerCoordinator&&(this.headerCoordinator.customer={name:e.getFullName(),scn:e.getId(),segment:e.getSegment()}),(0,d.ZG)((function(){n.facts.know("user",e,"user"),n.facts.know("name",e.getFullName(),"user"),n.facts.know("firstName",e.getFirstName(),"user"),n.facts.know("lastName",e.getLastName(),"user"),n.facts.know("scn",e.getId(),"user"),n.facts.know("segment",e.getSegment(),"user"),n.facts.know("authLevel",e.getAuthLevel(),"user")}))):(this.headerCoordinator&&(this.headerCoordinator.customer="ANONYMOUS"),this.facts.know("user",null,"user")),[2]}}))}))},e}(r.Y),N=S,E=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.languageLinks={},e}return(0,s.ZT)(e,t),e.prototype.on=function(){var t,e;return(0,s.mG)(this,void 0,void 0,(function(){var n=this;return(0,s.Jh)(this,(function(){var i,s,r;return this.scsHeader=null!==(t=this.ctx.querySelector("scs-header"))&&void 0!==t?t:void 0,this.setLanguageLinks(JSON.parse(this.ctx.dataset.languageLinks||"{}")),this.facts=(0,d.TS)(this.ctx),x._z.push(this.updateLanguageLinks.bind(this)),null===(e=this.scsHeader)||void 0===e||e.addEventListener("languageChanged",(function(t){var e=t.detail,i=n.languageLinks[e];i?location.assign(i):n.log.error("No URL to switch to for language ".concat(e))})),i=document.documentElement.classList,s=i.add.bind(i,"has-sticky-header"),r=i.remove.bind(i,"has-sticky-header"),window.addEventListener("scroll",(function(){window.pageYOffset>0?s():r()}),{passive:!0}),[2,this.initHeaderAttributes()]}))}))},e.prototype.setLanguageLinks=function(t){this.languageLinks=t,this.updateLanguageLinks()},e.prototype.updateLanguageLinks=function(){for(var t in this.languageLinks){var e=new URL(this.languageLinks[t],window.location.href);e.search=window.location.search,e.hash=window.location.hash;var n=e.toString();this.languageLinks[t]=n;var i=document.head.querySelector('link[rel=alternate][hreflang="'.concat(t,'"]'));i&&(i.href=n)}},e.prototype.initHeaderAttributes=function(){var t,e,n,i;return(0,s.mG)(this,void 0,void 0,(function(){var r,o,a=this;return(0,s.Jh)(this,(function(s){switch(s.label){case 0:return[4,(0,k.Ai)()];case 1:return r=s.sent(),(o=r.getUser())?(this.scsHeader&&(this.scsHeader.setAttribute("customer-segment",o.getSegment()),this.scsHeader.setAttribute("user-lastname",o.getLastName()),this.scsHeader.setAttribute("user-firstname",o.getFirstName()),this.scsHeader.setAttribute("scn",o.getId())),(0,d.ZG)((function(){a.facts.know("user",o,"user"),a.facts.know("name",o.getFullName(),"user"),a.facts.know("firstName",o.getFirstName(),"user"),a.facts.know("lastName",o.getLastName(),"user"),a.facts.know("scn",o.getId(),"user"),a.facts.know("segment",o.getSegment(),"user"),a.facts.know("authLevel",o.getAuthLevel(),"user")}))):this.facts.know("user",null,"user"),null===(e=null===(t=this.scsHeader)||void 0===t?void 0:t.querySelector("scs-header-l1"))||void 0===e||e.setAttribute("show-login",this.ctx.dataset.showLogin||"false"),null===(i=null===(n=this.scsHeader)||void 0===n?void 0:n.querySelector("scs-header-l1"))||void 0===i||i.setAttribute("show-basket",this.ctx.dataset.showBasket||"false"),[2]}}))}))},e}(r.Y),A=E;i.t.register({Breadcrumb:c,CrisisHeader:g,L2Navigation:v,MDD:L,RenderSdxHeader:N,SharedHeader:A})},257:function(t,e,n){n.d(e,{h:function(){return s.h},r:function(){return d}});var i=n(626),s=n(1922),r=n(8755),o=n(9191),a=n(7285),c=n(7685),u=n(6909),d=(0,i.S)([r.m,o.f,a.q,c.O,u.X]),l={h:s.h,patch:d};window.snabbdom=l},9902:function(t,e,n){n.d(e,{Ai:function(){return h},dP:function(){return i}});var i,s=n(8433),r=n(5480),o=n(5941);!function(t){t.RES="res",t.SME="sme",t.CBU="cbu"}(i||(i={}));var a,c=(0,r.O6)("profile"),u=function(){function t(t){this.data=t}return t.prototype.getId=function(){return this.data.cust_scn},t.prototype.getFirstName=function(){return decodeURIComponent(this.data.cust_fname||"")},t.prototype.getLastName=function(){return decodeURIComponent(this.data.cust_lname||"")},t.prototype.getAuthLevel=function(){return decodeURIComponent(this.data.session_authlevel||"")},t.prototype.getFullName=function(){return this.isSegmentSme()||this.isSegmentCbu()?this.getLastName():[this.getFirstName(),this.getLastName()].filter(Boolean).filter(o.d0).join(" ")},t.prototype.getSegment=function(){return this.data.cust_segment||i.RES},t.prototype.isSegmentSme=function(){return this.getSegment()===i.SME},t.prototype.isSegmentCbu=function(){return this.getSegment()===i.CBU},t.prototype.isSegmentRes=function(){return this.getSegment()===i.RES},t}(),d=function(){function t(t){this.user=t}return t.prototype.getUser=function(){return this.user},t}(),l="scsHeader.profile.loginData";function h(){return a||(a=function(){return(0,s.mG)(this,void 0,void 0,(function(){var t,e;return(0,s.Jh)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,fetch("/etc/profile.json",{credentials:"same-origin"})];case 1:return[4,n.sent().json()];case 2:return t=n.sent(),l in t?[2,new d(new u(t[l]))]:[3,4];case 3:return e=n.sent(),c.error("Profile JSON data not in expected format",e),[2,new d];case 4:return[2,new d]}}))}))}()),a}}},function(t){t.O(0,[611,421,626,720,108,319],(function(){return t(t.s=609)})),t.O()}]);
//# sourceMappingURL=header.eceee58d5944a8ce9234-legacy.js.map