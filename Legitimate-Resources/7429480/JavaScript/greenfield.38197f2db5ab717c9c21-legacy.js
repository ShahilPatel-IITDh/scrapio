"use strict";(self.webpackChunkAemPortal=self.webpackChunkAemPortal||[]).push([[363],{3898:function(t,e,n){var i=n(1625),r=function(){function t(t){this.element="string"==typeof t?document.createElement(t):t}return t.prototype.addClass=function(t){return i.cn(this.element,t),this},t.prototype.removeClass=function(t){return i.IV(this.element,t),this},t.prototype.hasClass=function(t){return i.pv(this.element,t)},t.prototype.toggleClass=function(t){return i.og(this.element,t),this},Object.defineProperty(t.prototype,"classes",{get:function(){return this.element.classList},enumerable:!1,configurable:!0}),t.prototype.setId=function(t){return this.element.setAttribute("id",t),this},Object.defineProperty(t.prototype,"innerText",{get:function(){return i.fL(this.element)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"innerHtml",{get:function(){return this.element.innerHTML},enumerable:!1,configurable:!0}),t.prototype.setHtml=function(t,e){if(void 0===e&&(e=!1),"string"!=typeof t)throw new Error("Expected HTML string");if(e){var n=(i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&grave;","/":"&#x2F;"},t.replace(/[&<>"'`\/]/gi,(function(t){return i[t]})));n=(n=n.replace("&lt;strong&gt;","<strong>")).replace("&lt;&#x2F;strong&gt;","</strong>"),this.element.innerHTML=n}else this.element.textContent=t;var i;return this},t.prototype.getAttribute=function(t){return this.element.getAttribute(t)},t.prototype.setAttribute=function(t,e){return this.element.setAttribute(t,e),this},t.prototype.addEventListener=function(t,e){this.element.addEventListener(t,e)},t.prototype.removeEventListener=function(t,e){this.element.removeEventListener(t,e)},t.prototype.appendChild=function(e){if(!(e instanceof t))throw new Error("Only other DomElements can be added as children");return this.element.appendChild(e.element),this},t.prototype.prependChild=function(e){if(!(e instanceof t))throw new Error("Only other DomElements can be added as children");return this.element.insertBefore(e.element,this.element.firstChild),this},t.prototype.insertBefore=function(e){if(!(e instanceof t))throw new Error("Only other DomElements can be added as children");if(!this.element.parentNode)throw new Error("Element is not attached");return this.element.parentNode.insertBefore(e.element,this.element),this},t.prototype.insertAfter=function(e){if(!(e instanceof t))throw new Error("Only other DomElements can be added as children");if(!this.element.parentNode)throw new Error("Element is not attached");return this.element.parentNode.insertBefore(e.element,this.element.nextSibling),this},t.prototype.removeChild=function(e){if(!(e instanceof t))throw new Error("Only a DomElements child can be removed");this.element.removeChild(e.element)},t.prototype.find=function(e){var n=this.element.querySelector(e);if(n)return new t(n)},t.prototype.wrapWithElement=function(t){if(!this.element.parentNode)throw new Error("Element is not attached");return this.element.parentNode.replaceChild(t.element,this.element),t.element.appendChild(this.element),this},t.prototype.dispatchEvent=function(t){var e,n=this.element;document.createEvent?(e=document.createEvent("HTMLEvents")).initEvent(t,!0,!0):document.createEventObject&&((e=document.createEventObject()).eventType=t),e.eventName=t,n.dispatchEvent?n.dispatchEvent(e):n.fireEvent&&(void 0)["on".concat(t)]?n.fireEvent("on".concat(e.eventType),e):n[t]?n[t]():n["on".concat(t)]&&n["on".concat(t)]()},t.prototype.css=function(t){return i.iv(this.element,t)},t.prototype.empty=function(){i.cS(this.element)},t}();e.Z=r},1625:function(t,e,n){function i(t,e){if("string"!=typeof e)throw new Error("Expected string class name");t.classList.add(e)}function r(t,e){if("string"!=typeof e)throw new Error("Expected string class name");t.classList.remove(e)}function o(t,e){if("string"!=typeof e)throw new Error("Expected string class name");return t.classList.contains(e)}function a(t,e){if("string"!=typeof e)throw new Error("Expected string class name");t.classList.toggle(e)}function s(t,e){var n;if(void 0===e&&(e=!1),!1===e)return"none"===window.getComputedStyle(t).display||0>t.offsetLeft;for(;!1===(n=s(t,!1))&&t.parentElement;)t=t.parentElement;return n}function c(t){return t.textContent||t.innerText}function l(t,e){for(var n=t;!o(n,e)&&n.parentElement;)n=n.parentElement;if(o(n,e))return n}function u(t,e){var n=document.createElement("canvas").getContext("2d");n.font=e;var i=n.measureText(t);return Math.round(i.width)}function h(t,e){return window.getComputedStyle(t).getPropertyValue(e)}function d(t,e){var n=t.getAttribute(e);if(n&&""!==n)return document.querySelector(n)}function p(t){for(;t.firstChild;)t.removeChild(t.firstChild)}n.d(e,{$H:function(){return u},IV:function(){return r},LE:function(){return l},cS:function(){return p},cn:function(){return i},fL:function(){return c},iv:function(){return h},og:function(){return a},pv:function(){return o},ts:function(){return d},xj:function(){return s}})},7514:function(t,e,n){var i=n(8433),r=n(5611),o=n(5661),a=n(9748),s=n(3676),c=n(7073),l=n(4955),u=null,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.loop=!1,e.player=null,e.currentVideo=null,e.isFirst=!0,e}return(0,i.ZT)(e,t),e.prototype.on=function(){this.log("init"),this.dummyVideoTag=this.ctx.querySelector(".dummyVideoTag")},e.prototype.after=function(){var t=this;this.setupAPI(),this.loop="true"===this.ctx.dataset.loop,this.wrapper=this.ctx.querySelector(".video-player-wrapper"),this.apiCache={pause:!1,play:!1},this.debug&&(window.modBrightcoveVideo=this),this.loadBrightcove().catch((function(e){return t.log.error("loadBrightcove error: ",e.message)})),this.initVideoPlaybutton()},e.prototype.onVisibilityChange=function(t){t||this.pause()},e.prototype.setupAPI=function(){var t=this;this.ctx.ownerDocument.body.addEventListener("onPause",(function(e){e.target.contains(t.ctx)&&(t.pause(),t.log("on pause API called"))})),this.ctx.ownerDocument.body.addEventListener("onPlay",(function(e){e.target.contains(t.ctx)&&(t.play(),t.log("on play API called"))}))},e.prototype.preparePlayer=function(){this.initPlayer()},e.prototype.initPlayer=function(){var t=this;this.player&&this.log("Player reloaded because of a technical problem"),this.createVideo();try{window.bc(this.videoTag)}catch(t){}var e=window.videojs(this.videoTag);e.ready((function(){t.setupPlayer(e)}))},e.prototype.createVideo=function(){this.id=(0,l.DO)();var t={class:this.dummyVideoTag.dataset.class||"",id:this.id,poster:this.dummyVideoTag.dataset.poster||""};for(var e in this.dummyVideoTag.dataset)t[e="data-".concat(e.replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase())]=this.dummyVideoTag.getAttribute(e);for(var n in this.videoTag=document.createElement("video"),t.preload="metadata",t)this.videoTag.setAttribute(n,t[n]);this.wrapper.innerHTML="",this.wrapper.append(this.videoTag)},e.prototype.loadBrightcove=function(){return(0,i.mG)(this,void 0,void 0,(function(){var t;return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return u||(t=this.ctx.dataset.playerScript,this.debug&&(t=t.replace(/\.min\.js$/,".js")),this.log("loading window.bc from ",t),u=(0,c.ve)(t,{})),[4,u];case 1:return e.sent(),this.preparePlayer(),[2]}}))}))},e.prototype.cleanup=function(){this.player&&(this.player.dispose(),this.player=null)},e.prototype.setupPlayer=function(t){this.cleanup(),this.player=t,this.log("setupPlayer bc video");var e=this.wrapper.querySelector(".video-js").style;e.left="0px",e.width="100%",e.height="100%",this.player.loop(this.loop),this.log("setting loop: ",this.loop),this.player.controls("true"===this.ctx.dataset.showControls),"true"===this.ctx.dataset.autoplay?(this.player.volume(0),this.player.autoplay(!0)):this.player.volume(.5),this.setupPlayerEvents(),this.videoOnHold&&(this.onBrightcovePlayVideo(this.videoOnHold),delete this.videoOnHold),this.apiCache.play&&this.player.play(),this.apiCache.pause&&this.player.pause(),this.ctx.classList.add("scs-setup-and-ready")},e.prototype.onBrightcovePlayVideo=function(t){var e=this;if(this.isPlaying()&&this.pause(),!this.player)return this.log("Player not initialized, storing id: ",t.currentVideoId),void(this.videoOnHold=t);this.player.catalog.getVideo(t.currentVideoId,(function(n,i){var r,o;if(n)e.log("Loading video mediainfo failed for ",t.currentVideoId);else try{null===(r=e.player)||void 0===r||r.catalog.load(i)}catch(n){e.log("Loading video failed for id_",t.currentVideoId),null===(o=e.player)||void 0===o||o.catalog.load(i)}}))},e.prototype.setupPlayerEvents=function(){var t=this;this.player&&(this.player.on("loadstart",(function(){return t.triggerLoadStart()})),this.player.on("ended",(function(){t.log("got ended event")})),this.player.on("bc-catalog-error",(function(){t.log("got bc-catalog-error event"),window.setTimeout((function(){t.initPlayer()}),2e3)})),this.player.on("pause",(function(){t.log("got pause event"),t.ctx.classList.add("is-paused"),t.ctx.classList.remove("is-playing")})),this.player.on("play",(function(){t.log("got play event"),t.ctx.classList.remove("is-paused"),t.ctx.classList.add("is-playing")})),this.player.on("firstplay",(function(){t.log("got firstplay event"),t.ctx.classList.add("has-started"),t.ctx.classList.remove("is-idle")})),this.player.mediainfo&&this.triggerLoadStart())},e.prototype.triggerLoadStart=function(){if(this.log("got loadstart event"),this.player){var t=this.player.mediainfo;this.videoChanged(t),this.isFirst&&(this.isFirst=!1)}},e.prototype.videoChanged=function(t){var e=this;if(this.updateAspectRatio(t),this.log("videoChanged",this.dummyVideoTag.getAttribute("data-video-id"),t.id),this.dummyVideoTag.setAttribute("data-video-id",t.id),!this.isFirst&&this.currentVideo&&t.id!==this.currentVideo.id){var n={currentVideoId:t.id,name:t.name,description:t.description};window.setTimeout((function(){e.updateToNewVideo(n)}),10),this.log("brightcoveChangedVideo > currentVideoId = ",t.id)}this.currentVideo=t},e.prototype.updateAspectRatio=function(t){var e=t.sources.filter((function(t){return t.width&&t.height})).sort((function(t,e){return e.width-t.width}))[0];e&&(this.wrapper.style.aspectRatio=String(e.width/e.height))},e.prototype.pause=function(){this.player?this.player.pause():this.apiCache.pause=!0},e.prototype.play=function(){this.player?this.player.play():this.apiCache.play=!0},e.prototype.isPlaying=function(){return!!this.player&&!this.player.paused()},e.prototype.updateToNewVideo=function(t){var e=t.currentVideoId,n=t.name,i=t.description,r=this.createUrl(e,n);this.log("onBrightcoveChangedVideo > currentVideo = ",t),window.history&&window.history.pushState&&window.history.pushState(null,n,r),document.title=n,this.ctx.querySelector(".modBrightcoveVideo h1.title").innerText=n,this.ctx.querySelector(".lead p").innerText=i||""},e.prototype.createUrl=function(t,e){var n=this.ctx.dataset.videoPageUrl||document.location.href;0!==n.indexOf("http")&&(n=(0,a.Cr)(n));var i=n.split("."),r=i.pop();if("html"!==r)return this.log("Not an ordinary page => do nothing",n),n;for(var o=0;o<i.length;o+=1)if(0===i[o].indexOf("id-")){i=i.slice(0,o);break}i.push("id-".concat(t)),i.push(!e||2>e.length?"notitle":(0,s.Uu)(e).toLowerCase()),i.push(r);var c=i.join(".")+(document.location.search||"");return this.log("new url",c),c},e.prototype.initVideoPlaybutton=function(){var t=this;this.ctx.querySelector(".video-playbutton-container").addEventListener("click",(function(){t.play()})),navigator.userAgent.toLowerCase().indexOf("android")>-1&&this.ctx.classList.add("is-android")},e}(o.Y),d=h,p=n(257),m=n(9554),f=n(5355),v=n(5390);function g(t){var e=t.label,n=t.asLink,i=void 0!==n&&n,r=t.disable,o=void 0!==r&&r,a=t.style,s=t.onClick;return i?v.createElement("button",{type:"button",className:"link margin-v-1 link--standalone","on-click":s},e):v.createElement("button",{type:"button",className:"button ".concat(a," button--responsive margin-v-2 ").concat(o?"disabled":""),"on-click":s},v.createElement("i",{className:"icon icon-105-call-centre"}),e)}function y(t){var e=t.linkPath,n=t.btnPosition,i=t.target,r=t.label,o=t.linkStyle,a=t.icon;return v.createElement("div",{className:"button--full"!==n?n:""},v.createElement("a",{href:e,className:"button ".concat(o," button--responsive font ").concat("button--full"===n?n:""," margin-v-2"),target:i},a&&v.createElement("i",{className:"icon ".concat(a),"aria-hidden":"true"}),r))}function b(t){var e=t.title,n=t.introductionText,i=t.additionalText,r=t.buttonConf,o=t.onClick;return v.createElement("div",{className:"cfn-open"},e&&v.createElement("h4",{className:"sc-navy margin-bottom-3"},e),n&&v.createElement("div",{className:"introduction-text","props-innerHTML":n}),v.createElement(g,{label:r.label,asLink:r.asLink,disable:r.disable,style:r.style,onClick:o}),i&&v.createElement("div",{className:"additional-text","props-innerHTML":i}))}function x(t){var e=t.contactNumber,n=t.remark;return v.createElement("div",{className:"hotline-info margin-v-2 row no-gutters"},v.createElement("div",{className:"margin-right-1 margin-top-1"},v.createElement(m._,{size:2,iconName:"icon-call-centre"})),v.createElement("div",{className:"text-holder row no-gutters"},v.createElement("div",{className:"hotline-number font--semi-bold col-xs-12"},e),v.createElement("div",{className:"hotline-number font--semi-bold col-xs-12"},n)))}function E(t){var e=t.title,n=t.introductionText,i=t.additionalText,r=t.contactNumber,o=t.remark,a=t.hideHotlineInfo,s=t.buttonConf,c=t.callout;return v.createElement("div",{className:"hotline"},e&&v.createElement("h4",{className:"sc-navy margin-bottom-3"},e),n&&v.createElement("div",{className:"introduction-text","props-innerHTML":n}),s&&v.createElement(g,{label:s.label,disable:!0,style:s.style}),!a&&v.createElement(x,{contactNumber:r,remark:o}),c&&v.createElement("div",{className:"opening-time-info margin-v-3"},v.createElement("p",null,v.createElement("span",null,c.label)," ",v.createElement(f.i,null,v.createElement("div",{"props-innerHTML":c.content})))),i&&v.createElement("div",{className:"additional-text","props-innerHTML":i}))}function w(t){var e=t.closed;return v.createElement("p",null," ",e.map((function(t){return[v.createElement("span",null,t),v.createElement("br",null)]})))}function C(t){var e=t.title,n=t.introductionText,i=t.additionalText,r=t.buttonConf,o=t.callout,a=t.closed;return v.createElement("div",{className:"closed"},e&&v.createElement("h4",{className:"sc-navy margin-bottom-3"},e),n&&v.createElement("div",{className:"introduction-text","props-innerHTML":n}),o&&v.createElement("div",{className:"opening-time-info margin-v-3"},v.createElement("p",null,v.createElement("span",null,o.label)," ",v.createElement(f.i,null,v.createElement(w,{closed:o.content})))),a&&v.createElement(w,{closed:a}),r&&v.createElement(g,{label:r.label,disable:!0,style:r.style}),i&&v.createElement("div",{className:"additional-text","props-innerHTML":i}))}function T(t){var e=t.target,n=t.title,i=t.introductionText,r=t.additionalText,o=t.contactNumber,a=t.remark,s=t.hideHotlineInfo,c=t.buttonConf,l=t.callout;return(0,p.r)(e,v.createElement(E,{title:n,introductionText:i,additionalText:r,contactNumber:o,remark:a,buttonConf:c,callout:l,hideHotlineInfo:s}))}function k(t){return(0,p.r)(t,v.createElement("div",{className:"loader-holder margin-v-2"},v.createElement("sdx-loading-spinner",{size:"large","sr-hint":""})))}function S(t){var e={exceptionallyClosed:[],exceptionallyOpen:[],openhours:[]};return t.split(";").forEach((function(t){t=t.trim(),(0,l.hj)(t.charAt(0))?0>t.indexOf("closed")?e.exceptionallyOpen.push(t):e.exceptionallyClosed.push(t):e.openhours.push(t)})),e}function L(t,e){if(void 0===e&&(e=new Date),function(t,e){var n=O(t);return e.some((function(t){return t.split(" ")[0]===n}))}(e,t.exceptionallyClosed))return!1;var n=function(t,e){var n=O(t),i="",r=!1,o=!1;return e.some((function(t){var e=t.split(" ");return e[0]===n&&(i=e[1],!0)})),i&&(r=A(t,i),o=!0),{open:r,hasException:o}}(e,t.exceptionallyOpen);return n.hasException?n.open:function(t,e){return!e.length||e.some((function(e){var n=e.split(" ")[0],i=e.split(" ")[1];return!!function(t,e){return function(t){for(var e=t.split("-"),n=N.indexOf(e[0]),i=N.indexOf(e[1]),r=[],o=n;-1!==n||-1!==i;)o===n&&(n=-1),o===i&&(i=-1),r.push(o),o=(o+1)%7;return r}(e).includes(t)}(t.getDay(),n)&&A(t,i)}))}(e,t.openhours)}var N=["Su","Mo","Tu","We","Th","Fr","Sa"],D=/^(\d{2}):(\d{2})-(\d{2}):(\d{2})$/;function A(t,e){var n=D.exec(e).map((function(t){return parseInt(t,10)})),i=new Date(t),r=new Date(t);return i.setHours(n[1]),i.setMinutes(n[2]),r.setHours(n[3]),r.setMinutes(n[4]),t.getTime()>=i.getTime()&&t.getTime()<r.getTime()}function O(t){return"".concat(q(t.getDate()),".").concat(q(t.getMonth()+1),".").concat(t.getFullYear())}function q(t,e){return void 0===e&&(e=2),e-=Math.round(Number(t)).toString().length,"".concat(new Array(e>0?e+1:0).join("0")).concat(t)}function P(t){var e=t.split(".").map((function(t,e){return parseInt(t,10)-e%2})).reverse();return new(Date.bind.apply(Date,(0,i.ev)([void 0],(0,i.CR)(e),!1)))}var H={Fr:["Fr","Ve","Ve","Fr"],Mo:["Mo","Lu","Lu","Mo"],Sa:["Sa","Sa","Sa","Sa"],Su:["So","Di","Do","Su"],Th:["Do","Je","Gi","Th"],Tu:["Di","Ma","Ma","Tu"],We:["Mi","Me","Me","We"]},I=["de","fr","it","en"];function M(t){return/^\+41(?!800|840|842|844|848|860|868|869|878|900|901|906|97|98|99)\d{9}$/.test(t)}function F(t){return t?(0!==(t=t.replace(/[\s*\-?\\?/?(?)?]/g,"")).indexOf("+")&&(0===t.indexOf("00")&&(t=t.slice(2)),0===t.indexOf("0")&&(t="41".concat(t.slice(1))),t="+".concat(t)),t):""}function R(t){var e=F(t);if(M(e))return e}var j,V=n(7960),U=1e4;function z(t){return L(S(t))}function J(t){t.querySelector(".cancel-btn").addEventListener("click",(function(){t.close()}))}!function(t){t.hotline="hotline",t.none="none",t.button="button"}(j||(j={}));var G=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),e.prototype.on=function(){var t,e,n=this;this.configuration=JSON.parse(this.ctx.dataset.configuration||"[]"),this.displayCFNCloseOption=this.ctx.dataset.displayOptions,this.ajaxUrlPrefix=this.ctx.dataset.ajaxUrl,this.container=this.ctx.querySelector(".content-holder"),this.configDialog=this.ctx.querySelector(".config-dialog"),this.successDialog=this.ctx.querySelector(".success-dialog"),this.errorDialog=this.ctx.querySelector(".error-dialog"),this.topicSelectorDialog=null!==(t=this.ctx.querySelector(".topic-selector-dialog"))&&void 0!==t?t:void 0,J(this.configDialog),J(this.successDialog),this.configDialog.querySelector(".submit-btn").addEventListener("click",(function(){n.submitForm()})),this.errorDialog.querySelector("sdx-button").addEventListener("click",(function(){n.errorDialog.close(),n.topicSelectorDialog?n.topicSelectorDialog.open():n.openConfigDialog(!1)})),this.topicSelectorDialog&&(this.topicSelectorDialog.querySelector("sdx-input-group").changeCallback=function(t){n.onTopicSelected(t)},this.topicSelectorContainer=null!==(e=this.topicSelectorDialog.querySelector(".cfn-content-holder"))&&void 0!==e?e:void 0),this.configForm=this.configDialog.querySelector("form"),this.configuration.length?(this.isSwissVisitor=this.ctx.hasAttribute("data-dont-consider-abroad")||(0,l.p7)(),"true"===this.ctx.dataset.autoInit&&(this.init(),this.initialized=!0)):this.log.warn("Do not initialize component if configuration is missing")},e.prototype.onVisibilityChange=function(t){t&&!this.initialized&&(this.init(),this.initialized=!0)},e.prototype.init=function(){var t,e,n,i,r,o,a,s=this;this.isSwissVisitor?(this.trackAction=null!==(t=this.ctx.dataset.trackAction)&&void 0!==t?t:"",this.trackLabel=null!==(e=this.ctx.dataset.trackLabel)&&void 0!==e?e:"",this.trackLocation=null!==(n=this.ctx.dataset.trackLocation)&&void 0!==n?n:"",this.trackCategory=null!==(i=this.ctx.dataset.trackCategory)&&void 0!==i?i:"",this.conversionCategory=null!==(r=this.ctx.dataset.conversionCategory)&&void 0!==r?r:"",this.conversionDetail=null!==(o=this.ctx.dataset.conversionDetail)&&void 0!==o?o:"",this.conversionClass=null!==(a=this.ctx.dataset.conversionClass)&&void 0!==a?a:"",this.topicSelectorDialog?this.container=function(t){var e=t.target,n=t.label,i=t.asLink,r=t.disable,o=t.style,a=t.onClick;return(0,p.r)(e,v.createElement(g,{label:n,asLink:i,disable:r,style:o,onClick:a}))}({asLink:this.ctx.dataset.cfnAsLink?"true"===this.ctx.dataset.cfnAsLink:void 0,label:this.ctx.dataset.cfnLabel,onClick:function(){s.topicSelectorDialog.open()},style:this.ctx.dataset.cfnBtnStyle,target:this.container}):(this.activeConfig=this.configuration[0],this.render())):this.renderCFNClosedState()},e.prototype.openConfigDialog=function(t){var e;void 0===t&&(t=!0),t&&this.trackOpen(),null===(e=this.topicSelectorDialog)||void 0===e||e.close(),this.configDialog.open()},e.prototype.checkAvailability=function(){return(0,i.mG)(this,void 0,Promise,(function(){var t,e,n;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:(t=new URLSearchParams).append("segment",this.activeConfig.segment),this.activeConfig.routingTarget?t.append("routingTarget",this.activeConfig.routingTarget):(t.append("subtopic",this.activeConfig.subtopicKey),t.append("topic",this.activeConfig.topicKey)),i.label=1;case 1:return i.trys.push([1,4,,5]),[4,Promise.race([fetch("".concat(this.ajaxUrlPrefix,".contactavailable").concat(this.activeConfig.routingTarget?".v2":"",".json"),{body:t,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},method:"POST"}),new Promise((function(t,e){return setTimeout((function(){return e(new Error("Response timout expired. No response for ".concat(U,"ms")))}),U)}))])];case 2:return[4,i.sent().json()];case 3:return e=i.sent(),this.openConfig=e,[3,5];case 4:throw n=i.sent(),this.log.error("Request failed: ".concat(n.message)),new Error(n.message);case 5:return[2]}}))}))},e.prototype.renderCFNClosedState=function(t){void 0===t&&(t=this.container),this.displayCFNCloseOption!==j.none||this.topicSelectorDialog?this.displayCFNCloseOption!==j.button||this.topicSelectorDialog?this.isSwissVisitor||this.topicSelectorDialog?this.renderHotline():this.renderAbroad():this.container=function(t){var e=t.target,n=t.linkPath,i=t.btnPosition,r=t.openTarget,o=t.label,a=t.linkStyle,s=t.icon;return(0,p.r)(e,v.createElement(y,{linkPath:n,btnPosition:i,target:r,label:o,linkStyle:a,icon:s}))}({btnPosition:this.ctx.dataset.btnPosition,icon:this.ctx.dataset.linkIcon,label:this.ctx.dataset.linkLabel,linkPath:this.ctx.dataset.linkPath,linkStyle:this.ctx.dataset.linkStyle,openTarget:this.ctx.dataset.linkTarget,target:t}):this.container=function(t){return(0,p.r)(t,v.createElement("div",{className:"content-holder"}))}(this.container)},e.prototype.renderHotline=function(){z(this.openConfig.transferhours)?this.renderHotlineOpen():this.renderHotlineClosed()},e.prototype.renderCFNOpen=function(t){void 0===t&&(t=this.container),function(t){var e=t.target,n=t.title,i=t.introductionText,r=t.additionalText,o=t.buttonConf,a=t.onClick;(0,p.r)(e,v.createElement(b,{title:n,introductionText:i,additionalText:r,buttonConf:o,onClick:a}))}({additionalText:this.ctx.dataset.cfnAdditionalText,buttonConf:{asLink:this.ctx.dataset.cfnAsLink?"true"===this.ctx.dataset.cfnAsLink:void 0,label:this.ctx.dataset.cfnLabel,style:this.ctx.dataset.cfnBtnStyle},introductionText:this.ctx.dataset.cfnIntroText,onClick:this.openConfigDialog.bind(this),target:t,title:this.ctx.dataset.cfnTitle})},e.prototype.renderHotlineOpen=function(){var t;"true"===this.ctx.dataset.displayDisabledCfn&&(t={label:this.ctx.dataset.cfnLabel,style:this.ctx.dataset.cfnBtnStyle});var e=T({additionalText:this.ctx.dataset.hotlineOpenAdditionText,buttonConf:t,contactNumber:this.openConfig.publicnumber.replace(/^(\+410?)([\d]{3})([\d]{3})([\d]{3})$/,"0$2 $3 $4"),hideHotlineInfo:"true"===this.ctx.dataset.hideHotline,introductionText:this.ctx.dataset.hotlineOpenIntroText,remark:this.ctx.dataset.hotlineRemark,target:this.topicSelectorDialog?this.topicSelectorContainer:this.container,title:this.ctx.dataset.hotlineOpenTitle});this.topicSelectorDialog?this.topicSelectorContainer=e:this.container=e},e.prototype.renderHotlineClosed=function(){var t,e,n,i;if("true"===this.ctx.dataset.displayOh){var r=null!==(t=document.documentElement.lang)&&void 0!==t?t:"de",o=function(t,e,n){var i=S(t),r=I.indexOf(n);i.openhours=i.openhours.map((function(t){return t.replace(/(Mo|Tu|We|Th|Fr|Sa|Su)/g,(function(t){return H[t][r]}))})),i.exceptionallyClosed.map((function(t){return t.replace("closed",e)}));var o=new Date,a=new Date;a.setDate(o.getDate()+10);var s=i.exceptionallyClosed.concat(i.exceptionallyOpen).filter((function(t){var e=P(t);return e.getTime()>=o.getTime()&&e.getTime()<=a.getTime()})).sort((function(t,e){return P(t).getTime()-P(e).getTime()}));return i.openhours.concat(s)}(this.openConfig.openhours,this.ctx.dataset.closedLabel,r);"true"===this.ctx.dataset.displayOhAsTooltip?n={content:o,label:this.ctx.dataset.openHoursLabel}:e=o}"true"===this.ctx.dataset.displayDisabledCfn&&(i={label:this.ctx.dataset.cfnLabel,style:this.ctx.dataset.cfnBtnStyle});var a=function(t){var e=t.target,n=t.title,i=t.introductionText,r=t.additionalText,o=t.buttonConf,a=t.callout,s=t.closed;return(0,p.r)(e,v.createElement(C,{title:n,introductionText:i,additionalText:r,buttonConf:o,callout:a,closed:s}))}({additionalText:this.ctx.dataset.hotlineClosedAdditionlText,buttonConf:i,callout:n,closed:e,introductionText:this.ctx.dataset.hotlineClosedIntroText,target:this.topicSelectorDialog?this.topicSelectorContainer:this.container,title:this.ctx.dataset.hotlineClosedTitle});this.topicSelectorDialog?this.topicSelectorContainer=a:this.container=a},e.prototype.renderAbroad=function(){this.container=T({additionalText:this.ctx.dataset.abroadAdditionalText,contactNumber:this.ctx.dataset.internationalContactNumber,hideHotlineInfo:!1,introductionText:this.ctx.dataset.abroadIntroText,remark:this.ctx.dataset.abroadRemark,target:this.container,title:this.ctx.dataset.abroadTitle})},e.prototype.renderError=function(t){return void 0===t&&(t=this.container),T({callout:{content:this.ctx.dataset.calloutOpeningTimeMsg,label:this.ctx.dataset.openHoursLabel},contactNumber:this.ctx.dataset.errorContactNumber,hideHotlineInfo:"true"===this.ctx.dataset.hideHotline,introductionText:this.ctx.dataset.errorIntroText,remark:this.ctx.dataset.hotlineRemark,target:t,title:this.ctx.dataset.errorTitle})},e.prototype.render=function(){return(0,i.mG)(this,void 0,Promise,(function(){return(0,i.Jh)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),this.container=k(this.container),[4,this.checkAvailability()];case 1:return t.sent(),z(this.openConfig.openhours)?this.renderCFNOpen():this.renderCFNClosedState(),[3,3];case 2:return t.sent(),this.container=this.renderError(),[3,3];case 3:return[2]}}))}))},e.prototype.onTopicSelected=function(t){return(0,i.mG)(this,void 0,Promise,(function(){return(0,i.Jh)(this,(function(e){switch(e.label){case 0:this.activeConfig=this.configuration[t[0]],this.trackSubtopics(),e.label=1;case 1:return e.trys.push([1,3,,4]),this.topicSelectorContainer=k(this.topicSelectorContainer),[4,this.checkAvailability()];case 2:return e.sent(),z(this.openConfig.openhours)?this.renderCFNOpen(this.topicSelectorContainer):this.renderCFNClosedState(this.topicSelectorContainer),[3,4];case 3:return e.sent(),this.topicSelectorContainer=this.renderError(this.topicSelectorContainer),[3,4];case 4:return[2]}}))}))},e.prototype.submitForm=function(){return(0,i.mG)(this,void 0,Promise,(function(){var t,e,n;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:if(!this.validateForm())return[3,8];t=this.getSubmitData(),this.log(t),i.label=1;case 1:return i.trys.push([1,5,,8]),this.track(),[4,Promise.race([fetch("".concat(this.ajaxUrlPrefix,".contactrequest").concat(this.activeConfig.routingTarget?".v2":"",".json"),{body:t,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},method:"POST"}),new Promise((function(t,e){return setTimeout((function(){return e(new Error("Response timout expired. No response for ".concat(U,"ms")))}),U)}))])];case 2:return i.sent(),e=this.configForm.querySelector('sdx-input[name="numberToCall"]').value.replace(/\s+/g,""),[4,this.configDialog.close()];case 3:return i.sent(),this.successDialog.querySelector("p").textContent=this.ctx.dataset.successMessage.replace("${numberToCall}",e),[4,this.successDialog.open()];case 4:return i.sent(),[3,8];case 5:return n=i.sent(),this.log.error("Request failed: ".concat(n.message)),[4,this.configDialog.close()];case 6:return i.sent(),[4,this.errorDialog.open()];case 7:return i.sent(),[3,8];case 8:return[2]}}))}))},e.prototype.validateForm=function(){var t=this,e=!0;return this.configForm.querySelectorAll("sdx-input").forEach((function(n){n.required&&!n.value||n.value&&!M(F(n.value))?(e=!1,n.valid=!1,n.validationMessage=t.ctx.dataset.dialogFieldError):(n.valid=void 0,n.validationMessage="")})),e},e.prototype.getSubmitData=function(){var t=R(this.configForm.querySelector('sdx-input[name="numberToCall"]').value)||"",e=this.configForm.querySelector('sdx-input[name="customerLine"]'),n=R(null!==e?e.value:"")||"",i=new URLSearchParams;return i.append("conversionclass",this.ctx.dataset.conversionClass),i.append("eventcategory",this.ctx.dataset.trackCategory),i.append("numbertocall",t),i.append("phonenumber",n),i.append("segment",this.activeConfig.segment),i.append("source",window.location.href.slice(0,255)),this.activeConfig.routingTarget?i.append("routingTarget",this.activeConfig.routingTarget):(i.append("subtopic",this.activeConfig.subtopicKey),i.append("topic",this.activeConfig.topicKey)),i},e.prototype.track=function(){var t=this.trackLocation;this.topicSelectorDialog&&(t+="_".concat(this.activeConfig.subtopicName||"")),(0,V.trackEventAndConversion)(this.trackAction,this.trackLabel,t,this.trackCategory,this.conversionCategory,this.conversionDetail,this.conversionClass)},e.prototype.trackOpen=function(){(0,V.trackEvent)("".concat(this.trackAction,"_open"),this.trackLabel,this.trackLocation,this.trackCategory)},e.prototype.trackSubtopics=function(){(0,V.trackEvent)(this.trackAction,this.trackLabel,"".concat(this.trackLocation,"}_").concat(this.activeConfig.subtopicName||""),this.trackCategory)},e}(o.Y),B=G,_=n(5390);function Y(t){var e=t.inputs,n=t.valid,i=t.validationMsg,r=t.name,o=t.fullwidth,a=t.label,s=t.checked,c=t.onchange;return _.createElement("fieldset",{className:"margin-0"},_.createElement("legend",{className:"sr-only"},a),_.createElement("div",{class:{"bg--dark":!0,fullwidth:o,selector:!0,"container-fluid":!o,"margin-0":!0}},e.filter((function(t){return!!t.inputs.length})).map((function(t){return _.createElement("div",{class:{row:!o}},t.title&&_.createElement("h3",{className:"sc-navy text-h5 col-xs-12 margin-bottom-2"},t.title),t.inputs.map((function(t){var e="call-me-back-selector-".concat(r,"-").concat(t.value);return _.createElement("div",{className:"radio",class:{"col-sm-4":!o,"col-xs-6":!o,"margin-bottom-2":!0,radio:!0}},_.createElement("input",{"attrs-id":e,"attrs-type":"radio","attrs-name":r,"attrs-value":t.value,"attrs-aria-label":t.ariaLabel,"props-checked":s===t.value,"on-change":function(){return c(t.value)}}),_.createElement("label",{className:"button font font--light","attrs-for":e},t.label))})))})),!n&&_.createElement("div",{className:"sc-red text-small margin-top-1 error"},_.createElement("sdx-icon",{iconName:"icon-exclamation-mark",size:"2"}),_.createElement("span",null,i))))}var Z=n(5390),$=!1,X=!1;function K(t){9===t.keyCode&&($=!0,document.removeEventListener("keydown",K),document.addEventListener("mousedown",W,{passive:!0}))}function W(){$=!1,document.addEventListener("keydown",K,{passive:!0}),document.removeEventListener("mousedown",W)}function Q(t){var e=new Date(t.localTime),n=new Date(t.localTime);n.setHours(8,0,0,0);var i=new Date(t.localTime);return i.setHours(19,30,0,0),n.getTime()<=e.getTime()&&e.getTime()<=i.getTime()}var tt,et=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isAvailable=!1,e.showCustomerLineNumber=!1,e.slots=new Map,e}return(0,i.ZT)(e,t),e.prototype.on=function(){var t;this.dialog=this.ctx.querySelector(".call-me-back-dialog"),this.dialog.displayChangeCallback=this.onDialogToggle.bind(this),this.container=this.ctx.querySelector(".content-holder"),this.ajaxUrlPrefix=this.ctx.dataset.ajaxUrl,this.showCustomerLineNumber="true"===this.ctx.dataset.showQuestionToAnotherNumber,this.locale=document.documentElement.lang||"de",this.texts=JSON.parse(null!==(t=this.ctx.dataset.texts)&&void 0!==t?t:"{}"),this.modalTitle=this.dialog.label,this.trackLocation=this.ctx.dataset.trackLocation,this.trackCategory=this.ctx.dataset.trackCategory,X||(X=!0,document.addEventListener("keydown",K,{passive:!0}))},e.prototype.onDialogToggle=function(t){if("opening"===t)return this.modalTitle||(this.modalTitle=this.dialog.label),this.renderLoader(),this.track("open"),void this.checkAvailability();"closed"!==t||this.reset()},e.prototype.checkAvailability=function(){return(0,i.mG)(this,void 0,Promise,(function(){var t,e,n,r;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:(t=new URLSearchParams).append("segment",this.ctx.dataset.segment),t.append("routingTarget",this.ctx.dataset.routingTarget),i.label=1;case 1:return i.trys.push([1,6,,7]),[4,fetch("".concat(this.ajaxUrlPrefix,".contactavailable.v2.json"),{body:t,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},method:"POST"})];case 2:return(e=i.sent()).ok?[4,e.json()]:[3,4];case 3:return n=i.sent(),this.isAvailable=L(S(n.openhours)),this.renderSelector(!1),[3,5];case 4:throw new Error(e.statusText);case 5:return[3,7];case 6:throw r=i.sent(),this.log.error("Request failed: ".concat(r.message)),this.renderError(),r;case 7:return[2]}}))}))},e.prototype.reset=function(){this.isAvailable=!1,this.numberToCall=void 0,this.customerLine=void 0,this.selectedDate=void 0,this.selectedTime=void 0,this.dialog.notificationType=void 0,this.dialog.iconName=void 0,this.dialog.label=this.modalTitle,this.slots.clear(),this.domReset()},e.prototype.domReset=function(){this.container=(0,p.r)(this.container,Z.createElement("div",{className:"content-holder"}))},e.prototype.renderLoader=function(){this.container=(0,p.r)(this.container,Z.createElement("div",{className:"call-me-back-wizard loader"},Z.createElement("sdx-loading-spinner",{size:"large"})))},e.prototype.renderSelector=function(t){var e=this;void 0===t&&(t=!0),this.container=(0,p.r)(this.container,Z.createElement("div",{className:"call-me-back-wizard option-selector"},Z.createElement("h2",{"hook-insert":function(e){t&&$&&e.elm.focus()},"hook-update":function(e){t&&$&&e.elm.focus()},tabindex:"0",className:"sc-navy"},this.texts["selector-title"]),Z.createElement("sdx-button-group",{layout:"fullwidth"},Z.createElement("sdx-button",{label:this.texts["call-me-now"],disabled:!this.isAvailable,"on-click":function(){return e.handleNowRequest()}}),Z.createElement("sdx-button",{theme:"secondary",label:this.texts["call-me-later"],"on-click":function(){return e.handleLaterRequest()}}))))},e.prototype.handleNowRequest=function(){var t=this;this.track("button","now"),this.renderCallMeNow(),$&&setTimeout((function(){var e;null===(e=t.container.elm.querySelector("sdx-input"))||void 0===e||e.doFocus()}),50)},e.prototype.handleLaterRequest=function(){this.track("button","later"),this.renderCallMeLater()},e.prototype.renderCallMeNow=function(){var t=this;this.container=(0,p.r)(this.container,Z.createElement("div",{className:"call-me-back-wizard call-me-now"},Z.createElement("h2",null,this.texts["call-me-now-intro-title"]),Z.createElement("p",null,this.texts["call-me-now-intro"]),Z.createElement("p",null,Z.createElement("sdx-input",{label:this.texts["call-me-now-number-label"],name:"numberToCall",required:"true",placeholder:this.texts["number-placeholder"],value:this.numberToCall,hitEnterCallback:function(){t.requestCall()},"on-input":function(e){t.validateInput(e.target),t.numberToCall=e.target.value}})),this.showCustomerLineNumber&&Z.createElement("p",null,Z.createElement("sdx-input",{name:"customerLine",label:this.texts["additional-number-label"],placeholder:this.texts["number-placeholder"],value:this.customerLine,hitEnterCallback:function(){t.requestCall()},"on-input":function(e){t.validateInput(e.target),t.customerLine=e.target.value}})),Z.createElement("p",{className:"text-small"},"* ",this.texts["mandatory-field"]),Z.createElement("sdx-button-group",{layout:"fullwidth"},Z.createElement("sdx-button",{label:this.texts["call-me-back-label"],disabled:"false","on-click":function(){t.requestCall()}}),Z.createElement("sdx-button",{theme:"secondary",label:this.texts["back-label"],"on-click":function(){return t.renderSelector()}}))))},e.prototype.renderCallMeLater=function(){var t=this;this.container=(0,p.r)(this.container,Z.createElement("div",{className:"call-me-back-wizard call-me-later"},Z.createElement("h2",{tabindex:"0","hook-insert":function(t){$&&t.elm.focus()},"hook-update":function(t){$&&t.elm.focus()},className:"sc-navy"},this.texts["call-me-now-intro-title"]),Z.createElement("p",null,this.texts["call-me-now-intro"]),Z.createElement("p",null,Z.createElement("sdx-input",{label:this.texts["call-me-now-number-label"],placeholder:this.texts["number-placeholder"],required:"true",value:this.numberToCall,name:"numberToCall",hitEnterCallback:function(){t.proceedToDateSelector()},"on-input":function(e){t.validateInput(e.target),t.numberToCall=e.target.value}})),this.showCustomerLineNumber&&Z.createElement("p",null,Z.createElement("sdx-input",{name:"customerLine",label:this.texts["additional-number-label"],placeholder:this.texts["number-placeholder"],value:this.customerLine,hitEnterCallback:function(){t.proceedToDateSelector()},"on-input":function(e){t.validateInput(e.target),t.customerLine=e.target.value}})),Z.createElement("sdx-button-group",{layout:"fullwidth"},Z.createElement("sdx-button",{label:this.texts["next-label"],disabled:"false","on-click":function(){return t.proceedToDateSelector()}}),Z.createElement("sdx-button",{theme:"secondary",label:this.texts["back-label"],"on-click":function(){return t.renderSelector()}}))))},e.prototype.requestCall=function(){var t,e,n;return(0,i.mG)(this,void 0,void 0,(function(){var r,o,a,s,c;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:if(!this.validateNumbers())return $&&(null===(t=this.container.elm.querySelector("sdx-input"))||void 0===t||t.doFocus()),[2];this.track("button","call",!0),r=R(null!==(e=this.numberToCall)&&void 0!==e?e:"")||"",o=R(null!==(n=this.customerLine)&&void 0!==n?n:"")||"",(a=new URLSearchParams).append("numbertocall",r),a.append("phonenumber",o),a.append("segment",this.ctx.dataset.segment),a.append("source",window.location.href.slice(0,255)),a.append("routingTarget",this.ctx.dataset.routingTarget),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,fetch("".concat(this.ajaxUrlPrefix,".contactrequest.v2.json"),{body:a,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},method:"POST"})];case 2:if(!(s=i.sent()).ok)throw new Error(s.statusText);return this.renderSuccessRequest(),[3,4];case 3:throw c=i.sent(),this.log.error("Request failed: ".concat(c.message)),this.renderError(),c;case 4:return[2]}}))}))},e.prototype.renderSuccessRequest=function(){var t=this.texts["call-request-success"].replace("${numberToCall}",this.numberToCall);this.container=(0,p.r)(this.container,Z.createElement("div",{className:"call-me-back-wizard call-request-successfully"},Z.createElement("h2",null,this.texts["call-request-success-title"]),Z.createElement("p",null,t),Z.createElement("p",{className:"text-align-center"},Z.createElement("img",{"attrs-src":"/etc/designs/swisscom/success_request.png","attrs-width":"142","attrs-height":"142","attrs-role":"presentation","attrs-aria-hidden":"true"}))))},e.prototype.proceedToDateSelector=function(){var t;return(0,i.mG)(this,void 0,Promise,(function(){var e;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return this.validateNumbers()?[4,this.getAvailableSlots()]:($&&(null===(t=this.container.elm.querySelector("sdx-input"))||void 0===t||t.doFocus()),[2]);case 1:return e=n.sent(),this.createSlotSpaces(e),this.renderDateSelector(),[2]}}))}))},e.prototype.createSlotSpaces=function(t){var e=this,n=(new Date).toISOString().split("T")[0],r=Date.now();t.slots.filter((function(t){return/(00|15|30|45):0{2}.0{3}$/.test(t.localTime)})).filter((function(t){return!t.localTime.startsWith(n)||new Date(t.localTime).getTime()>r})).filter((function(t){return t.capacity>0})).filter(Q).forEach((function(t){var n=(0,i.CR)(t.localTime.split("T"),2),r=n[0],o=n[1];e.slots.has(r)||e.slots.set(r,[]),e.slots.get(r).push({label:o.substring(0,5),value:t.localTime})}))},e.prototype.getAvailableSlots=function(){return(0,i.mG)(this,void 0,Promise,(function(){var t,e,n;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),(t=new URLSearchParams).append("segment",this.ctx.dataset.segment),t.append("routingTarget",this.ctx.dataset.routingTarget),[4,fetch("".concat(this.ajaxUrlPrefix,".capacity.v2.json"),{body:t,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},method:"POST"})];case 1:return(e=i.sent()).ok?[4,e.json()]:[3,3];case 2:return[2,i.sent()];case 3:throw new Error(e.statusText);case 4:throw n=i.sent(),this.log.error("Request failed: ".concat(n.message)),this.renderError(),n;case 5:return[2]}}))}))},e.prototype.renderDateSelector=function(t){var e,n=this;void 0===t&&(t=!0);var i=Array.from(this.slots.keys()).filter((function(t){return n.slots.get(t).length})).map((function(t){return{ariaLabel:new Date(t).toLocaleDateString("de",{day:"2-digit",year:"numeric",month:"long"}),label:new Date(t).toLocaleDateString(n.locale),value:t}}));this.domReset(),this.container=(0,p.r)(this.container,Z.createElement("div",{className:"call-me-back-wizard call-request-date-selector"},Z.createElement("h2",{tabindex:"0","hook-insert":function(t){$&&t.elm.focus()},"hook-update":function(t){$&&t.elm.focus()},className:"sc-navy"},this.texts["date-title"]),Z.createElement("p",{"on-keydown":function(t){"Enter"===t.key&&n.proceedToTimeSelector()}},Z.createElement(Y,{name:"date",inputs:[{inputs:i}],valid:t,fullwidth:!0,label:this.texts["date-title"],onchange:function(t){return n.selectedDate=t},validationMsg:this.texts["date-error"],checked:null!==(e=this.selectedDate)&&void 0!==e?e:""})),Z.createElement("sdx-button-group",{layout:"fullwidth"},Z.createElement("sdx-button",{label:this.texts["next-label"],disabled:"false","on-click":function(){return n.proceedToTimeSelector()}}),Z.createElement("sdx-button",{theme:"secondary",label:this.texts["back-label"],"on-click":function(){return n.renderCallMeLater()}}))))},e.prototype.proceedToTimeSelector=function(){this.selectedDate?this.renderTimeSelector():this.renderDateSelector(!1)},e.prototype.renderTimeSelector=function(t){var e,n,r=this;void 0===t&&(t=!0);var o=this.slots.get(this.selectedDate)||[],a={inputs:[],title:this.texts["morning-time-title"]},s={inputs:[],title:this.texts["afternoon-time-title"]};try{for(var c=(0,i.XA)(o),l=c.next();!l.done;l=c.next()){var u=l.value;12>parseInt(u.label.split(":")[0],10)?a.inputs.push(u):s.inputs.push(u)}}catch(t){e={error:t}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}this.domReset(),this.container=(0,p.r)(this.container,Z.createElement("div",{className:"call-me-back-wizard call-request-time-selector"},Z.createElement("h2",{tabindex:"0","hook-insert":function(t){$&&t.elm.focus()},"hook-update":function(t){$&&t.elm.focus()},className:"sc-navy"},this.texts["time-title"]),Z.createElement("p",{"on-keydown":function(t){"Enter"===t.key&&r.renderSummary()}},Z.createElement(Y,{name:"time",inputs:[a,s],valid:t,fullwidth:!1,label:this.texts["time-title"],onchange:function(t){return r.selectedTime=t},validationMsg:this.texts["time-error"],checked:this.selectedTime})),Z.createElement("sdx-button-group",{layout:"fullwidth"},Z.createElement("sdx-button",{label:this.texts["next-label"],disabled:"false","on-click":function(){return r.renderSummary()}}),Z.createElement("sdx-button",{theme:"secondary",label:this.texts["back-label"],"on-click":function(){return r.renderDateSelector()}}))))},e.prototype.renderSummary=function(){var t=this;this.selectedTime?this.container=(0,p.r)(this.container,Z.createElement("div",{className:"call-me-back-wizard call-request-time-summary"},Z.createElement("h2",{tabindex:"0","hook-insert":function(t){$&&t.elm.focus()},"hook-update":function(t){$&&t.elm.focus()},className:"sc-navy"},this.texts["summary-title"]),Z.createElement("div",{className:"card-holder"},Z.createElement("sdx-card",{className:"margin-bottom-2"},Z.createElement("h4",{className:""},this.texts["summary-subtitle"]),Z.createElement("div",{className:"summary-report"},Z.createElement("p",{className:"margin-bottom-2"},Z.createElement("span",null,this.texts["summary-date"]),Z.createElement("span",{className:"font--semi-bold"},new Date(this.selectedDate).toLocaleDateString(this.locale))),Z.createElement("p",{className:"margin-bottom-2"},Z.createElement("span",null,this.texts["summary-time"]),Z.createElement("span",{className:"font--semi-bold"},this.selectedTime.split("T")[1].substring(0,5))),Z.createElement("p",{className:"margin-bottom-2"},Z.createElement("span",null,this.texts["summary-number"]),Z.createElement("span",{className:"font--semi-bold"},this.numberToCall))))),Z.createElement("sdx-button-group",{layout:"fullwidth"},Z.createElement("sdx-button",{label:this.texts["summary-confirm"],disabled:"false","on-click":function(){t.scheduleCall()}}),Z.createElement("sdx-button",{theme:"secondary",label:this.texts["back-label"],"on-click":function(){return t.renderTimeSelector()}})))):this.renderTimeSelector(!1)},e.prototype.scheduleCall=function(){return(0,i.mG)(this,void 0,void 0,(function(){var t,e,n,r,o;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:this.track("button","schedule",!0),t=R(this.numberToCall)||"",e=R(this.customerLine)||"",(n=new URLSearchParams).append("segment",this.ctx.dataset.segment),n.append("routingTarget",this.ctx.dataset.routingTarget),n.append("callbackTime",this.selectedTime),n.append("numbertocall",t),n.append("phonenumber",e),n.append("source",window.location.href.slice(0,255)),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,fetch("".concat(this.ajaxUrlPrefix,".schedule.v2.json"),{body:n,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},method:"POST"})];case 2:if(!(r=i.sent()).ok)throw new Error(r.statusText);return this.renderConfirmation(),[3,4];case 3:throw o=i.sent(),this.log.error("Request failed: ".concat(o.message)),this.renderError(),o;case 4:return[2]}}))}))},e.prototype.renderConfirmation=function(){var t=this;this.container=(0,p.r)(this.container,Z.createElement("div",{className:"call-me-back-wizard call-request-time-summary-confirmed"},Z.createElement("h2",{tabindex:"0","hook-insert":function(t){$&&t.elm.focus()},"hook-update":function(t){$&&t.elm.focus()},className:"sc-navy margin-bottom-1"},this.texts["summary-title-confirmed"]),Z.createElement("p",null,this.texts["summary-confirmed-text"]),Z.createElement("p",{className:"text-align-center"},Z.createElement("img",{"attrs-src":"/etc/designs/swisscom/success_request.png","attrs-width":"142","attrs-height":"142","attrs-role":"presentation","attrs-aria-hidden":"true"})),Z.createElement("div",{className:"card-holder"},Z.createElement("sdx-card",{className:"margin-bottom-2"},Z.createElement("h4",{className:""},this.texts["summary-subtitle"]),Z.createElement("div",{className:"summary-report"},Z.createElement("p",{className:"margin-bottom-2"},Z.createElement("span",null,this.texts["summary-date"]),Z.createElement("span",{className:"font--semi-bold"},new Date(this.selectedDate).toLocaleDateString(this.locale))),Z.createElement("p",{className:"margin-bottom-2"},Z.createElement("span",null,this.texts["summary-time"]),Z.createElement("span",{className:"font--semi-bold"},this.selectedTime.split("T")[1].substring(0,5))),Z.createElement("p",{className:"margin-bottom-2"},Z.createElement("span",null,this.texts["summary-number"]),Z.createElement("span",{className:"font--semi-bold"},this.numberToCall))))),Z.createElement("sdx-button-group",{layout:"fullwidth"},Z.createElement("sdx-button",{label:this.texts["summary-end"],disabled:"false","on-click":function(){t.dialog.close()}}))))},e.prototype.validateNumbers=function(){var t=this;return Array.from(this.container.elm.querySelectorAll("sdx-input")).map((function(e){return t.validateInput(e)})).every(Boolean)},e.prototype.renderError=function(){var t=this;this.dialog.notificationType="warning",this.dialog.iconName="icon-exclamation-mark-circle",this.dialog.label=this.texts["error-title"],this.container=(0,p.r)(this.container,Z.createElement("div",{className:"call-me-back-wizard error"},Z.createElement("p",{className:"text-align-center"},this.texts["error-msg"]),Z.createElement("sdx-button-group",{layout:"fullwidth"},Z.createElement("sdx-button",{label:this.texts.close,theme:"primary","on-click":function(){t.dialog.close()}}))))},e.prototype.track=function(t,e,n){void 0===e&&(e=""),void 0===n&&(n=!1);var i="call_me_back_".concat(this.ctx.dataset.routingTarget);e&&(i+="_".concat(e)),n?(0,V.trackEventAndConversion)(t,i,this.trackLocation,this.trackCategory,"lead","callback",""):(0,V.trackEvent)(t,i,this.trackLocation,this.trackCategory)},e.prototype.validateInput=function(t){return t.required&&!t.value||t.value&&!M(F(t.value))?(t.valid=!1,t.validationMessage=this.texts["incorrect-phone"]):(t.valid=!0,t.validationMessage=""),!!t.valid},e}(o.Y),nt=et,it=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.trackingLocation="",e.trackingCategory="",e}return(0,i.ZT)(e,t),e.prototype.on=function(){this.trackingLocation=this.ctx.dataset.trackingLocation,this.trackingCategory=this.ctx.dataset.trackingCategory,this.trackingLocation&&this.trackingCategory&&this.addListeners()},e.prototype.addListeners=function(){var t=this;this.ctx.querySelectorAll(".pagination-bullet").forEach((function(e){e.addEventListener("click",t.bulletClick.bind(t))})),this.ctx.querySelectorAll(".cmp-carousel__action").forEach((function(e){e.addEventListener("click",t.arrowClick.bind(t))}))},e.prototype.bulletClick=function(t){var e=(0,s.vs)(t.currentTarget.dataset.trackingLabel||"");this.track(e)},e.prototype.arrowClick=function(){var t=this;setTimeout((function(){var e=t.ctx.querySelector(".cmp-carousel__item--active"),n=(0,s.vs)(e.dataset.trackingLabel||"");t.track(n)}),200)},e.prototype.track=function(t){t&&(0,V.trackEvent)("view",t,this.trackingLocation,this.trackingCategory)},e}(o.Y),rt=it,ot=n(7877),at=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isOpen=!1,e}return(0,i.ZT)(e,t),e.prototype.on=function(){this.el=this.ctx,this.isOpen=this.el.open},e.prototype.after=function(){this.ctx.addEventListener("click",this.track.bind(this))},e.prototype.track=function(){this.el.open!==this.isOpen&&(this.isOpen=this.el.open,(0,V.trackEvent)(this.isOpen?"open":"close",this.ctx.dataset.trackingLabel,this.ctx.dataset.trackingLocation,this.ctx.dataset.trackingCategory))},e}(o.Y),st=at,ct="portal-contact",lt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),e.prototype.on=function(){return(0,i.mG)(this,void 0,void 0,(function(){var t,e;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:this.topic=this.ctx.dataset.topic,this.subTopic=this.ctx.dataset.subTopic,this.lazy=this.ctx.hasAttribute("data-lazy"),n.label=1;case 1:return n.trys.push([1,3,,4]),t=this,[4,(i=2500,r=window.SCS,r&&r.webchat?Promise.resolve(r.webchat):new Promise((function(t,e){var n=setInterval((function(){(r=window.SCS)&&r.webchat?(clearInterval(n),t(r.webchat)):i>0||(clearInterval(n),e(new Error("window.SCS.webchat is not available after 2.5s"))),i-=50}),50)})))];case 2:return t.webChat=n.sent(),this.lazy||this.setTopicAndSubtopic(),[3,4];case 3:return e=n.sent(),this.log.error(e.message),[3,4];case 4:return[2]}var i,r}))}))},e.prototype.onVisibilityChange=function(t){t&&this.lazy&&this.webChat&&this.setTopicAndSubtopic()},e.prototype.setTopicAndSubtopic=function(){this.topic?this.webChat.set("".concat(ct,":topic"),this.topic):this.webChat.unset("".concat(ct,":topic")),this.subTopic?this.webChat.set("".concat(ct,":subtopic"),this.subTopic):this.webChat.unset("".concat(ct,":subtopic"))},e}(o.Y),ut=lt;!function(t){t.normal="normal",t.hover="hover"}(tt||(tt={}));var ht,dt="show",pt="dont-show",mt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.visible=tt.normal,e}return(0,i.ZT)(e,t),e.prototype.on=function(){var t=this;this.normalContainer=this.ctx.querySelector(".normalDisplay"),this.hoverContainer=this.ctx.querySelector(".hoverDisplay");var e=this.ctx.querySelectorAll("img");Promise.all([].slice.call(e).map(c.g9)).then((function(){t.initHeight(),t.ctx.classList.remove("initializing"),t.ctx.classList.contains("touch")&&matchMedia("(pointer: coarse)").matches&&t.attachListeners()})).catch((function(e){return t.log.error(e.message)}))},e.prototype.initHeight=function(){var t=this.normalContainer.clientHeight,e=this.hoverContainer.clientHeight,n=Math.max(t,e);this.ctx.style.minHeight="".concat(n,"px")},e.prototype.attachListeners=function(){var t=this;this.ctx.addEventListener("click",(function(){return t.toggleState()}))},e.prototype.toggleState=function(){this.visible===tt.normal?(this.normalContainer.classList.add(pt),this.normalContainer.classList.remove(dt),this.hoverContainer.classList.remove(pt),this.hoverContainer.classList.add(dt),this.visible=tt.hover):(this.normalContainer.classList.remove(pt),this.normalContainer.classList.add(dt),this.hoverContainer.classList.add(pt),this.hoverContainer.classList.remove(dt),this.visible=tt.normal)},e}(o.Y),ft=mt,vt=function(t){function e(e){var n=t.call(this,e)||this;return n._initialize(),n}return(0,i.ZT)(e,t),e.prototype._initialize=function(){this.progressElement=this.find(".indicator")||this,this.fileNameElement=this.find(".detail > .name"),this.progressLabelElement=this.find(".progress"),this.totalProgressElement=this.find(".progress > .file-size")},Object.defineProperty(e.prototype,"progress",{get:function(){return this.value},set:function(t){var e=(100*t).toFixed(0);this.value=t,this.element.value=String(t),this.progressElement.setAttribute("style","width: ".concat(100*t,"%")),this.progressLabelElement&&(this.progressLabelElement.element.textContent="".concat(e,"%"))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"filename",{get:function(){if(this.fileNameElement)return this.fileNameElement.element.textContent||void 0},set:function(t){if(!this.fileNameElement)throw new Error("Cannot set the filename, missing detail element");this.fileNameElement.setHtml(t||"")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fileSize",{set:function(t){if(!this.totalProgressElement)throw new Error("Cannot set the fileSize, missing detail element");this.totalProgressElement.setHtml(t)},enumerable:!1,configurable:!0}),e}(n(3898).Z),gt=n(2817),yt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),e.prototype.on=function(){var t=new vt(this.ctx);t.progress=0;var e=parseInt(this.ctx.getAttribute("loader-duration")||"1",10),n=this.ctx.loadingAnimation=(0,gt.ih)({animator:function(e,n,i){t.progress=i},duration:e,endValue:1,startValue:0,callback:function(e){e||(t.progress=0)}});this.ctx.hasAttribute("data-autostart")&&n.start()},e}(o.Y),bt=yt,xt=null,Et=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),e.prototype.on=function(){var t=this;this.animationHolder=this.ctx.querySelector(".animation-holder"),null===xt&&(xt=function(){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(){return[2,new Promise((function(t){var e=document.createElement("script");e.onload=t,e.src="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.7.3/lottie_svg.min.js",e.crossOrigin="anonymous",e.integrity="sha512-E1gYB1OGBGeO9U77qWL/DEeFa0tm3jGFh9KbVBzDqL6oroMzDKS1xPhDffnU9AP88ndosrm0QXXHl7R+beNeRA==",document.head.appendChild(e)}))]}))}))}()),xt.then(this.startLottieAnimation.bind(this)).catch((function(e){return t.log(e)}))},e.prototype.startLottieAnimation=function(){var t=this;if(window.lottie){this.animation=window.lottie.loadAnimation({autoplay:!1,container:this.animationHolder,loop:!1,path:this.ctx.dataset.jsonPath,renderer:"svg"});var e=this.ctx.closest(".mod.modHoverContainer");if(e){var n=e.querySelector(".hoverDisplay"),i=e.querySelector(".normalDisplay");n.contains(this.ctx)?(n.addEventListener("mouseenter",(function(){return t.animation.play()})),n.addEventListener("mouseleave",(function(){return t.animation.stop()}))):i.contains(this.ctx)&&(i.addEventListener("mouseenter",(function(){return t.animation.play()})),i.addEventListener("mouseleave",(function(){return t.animation.stop()})))}else this.animationHolder.addEventListener("mouseenter",(function(){return t.animation.play()})),this.animationHolder.addEventListener("mouseleave",(function(){return t.animation.stop()}))}},e}(o.Y),wt=Et,Ct=n(5390);function Tt(t){var e,n,r={};try{for(var o=(0,i.XA)(Object.entries(null!=t?t:{})),a=o.next();!a.done;a=o.next()){var s=(0,i.CR)(a.value,2),c=s[0],l=s[1];r["attrs-".concat(c)]=l}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}function kt(t){var e=t.topic,n=t.subtopic,r=t.lazy,o=t.attrs,a=e||n?"mod modGenesysChat":"";return Ct.createElement("div",(0,i.pi)({className:a,id:"mach3ChatLink","attrs-data-topic":e,"attrs-data-sub-topic":n,"attrs-data-lazy":r.toString()},Tt(o.tracking)))}function St(t){var e=t.url,n=t.label,r=t.attrs;return Ct.createElement("div",{className:"contact-channel"},Ct.createElement("a",(0,i.pi)({"attrs-href":e,className:"icon-chevron-normal-right margin-xs-bottom-1 margin-md-bottom-0","attrs-data-sdx-lightbox-title":r.title,"attrs-data-sdx-lightbox-width":r.width,"attrs-data-sdx-lightbox-height":r.height,"attrs-target":r.lightbox?"sdxlightbox":void 0},Tt(r.tracking)),n))}function Lt(t){var e=t.title,n=t.introductionText,i=t.additionalText,r=t.channels;return Ct.createElement("div",{className:"contact-holder"},e&&Ct.createElement("h4",{className:"sc-navy margin-bottom-3"},e),n&&Ct.createElement("div",{className:"introduction-text margin-bottom-1",innerHTML:n}),Ct.createElement("div",{className:"paragraph show-grid margin-0"},r.map((function(t){var e,n;return t.type===ht.chat?Ct.createElement(kt,{topic:null!==(e=t.attrs.topic)&&void 0!==e?e:"",subtopic:null!==(n=t.attrs.subtopic)&&void 0!==n?n:"",lazy:"true"===t.attrs.lazy,attrs:t.attrs}):Ct.createElement(St,{url:t.url,label:t.label,attrs:t.attrs})}))),i&&Ct.createElement("div",{className:"additional-text margin-top-1",innerHTML:i}))}function Nt(t){return/^\d{2}\.\d{2}\.\d{4}$/.test(t)}function Dt(t){var e,n,r=[],o=(new Date).getFullYear(),a=function(t){var e=t.split(" "),n=e.pop();e.forEach((function(t){return r.push("".concat(t).concat(Nt(t)?"":o," ").concat(n))}))};try{for(var s=(0,i.XA)(t),c=s.next();!c.done;c=s.next())a(c.value)}catch(t){e={error:t}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return r}function At(t){var e,n,r=[],o=(new Date).getFullYear();try{for(var a=(0,i.XA)(t),s=a.next();!s.done;s=a.next())s.value.split(" ").forEach((function(t){return r.push("".concat(t).concat(Nt(t)?"":o," closed"))}))}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return r}!function(t){t.sms="sms",t.abc="abc",t.chat="chat",t.whatsapp="wa"}(ht||(ht={}));var Ot=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isOnlyChat=!1,e}return(0,i.ZT)(e,t),e.prototype.on=function(){var t,e,n,i,r,o,a,s,c;this.channels=JSON.parse(null!==(t=this.ctx.dataset.channels)&&void 0!==t?t:"[]");var l=function(){var t,e,n=window.navigator&&window.navigator.userAgent||"",i=/\((Macintosh|iPhone|iPad|(?:iPod(?:\x20touch)?));.*\x20((?:\d[_.]{0,1})+)[^)]*\)\x20/i.exec(n);if(!i)return!1;var r="MACINTOSH"===(null===(t=i[1])||void 0===t?void 0:t.toUpperCase())?[10,13,4]:[11,3],o=null===(e=i[2])||void 0===e?void 0:e.split("_").map((function(t){return parseInt(t,10)}));if(!r||!o)return!1;for(var a=0;r.length>a;a+=1){var s=o[a]||0;if(s!==r[a])return s>r[a]}return!0}()&&this.channels.some((function(t){return t.type===ht.abc}));if(this.channels=l?this.channels.filter((function(t){return"true"!==t.attrs.hideIfAbc})):this.channels.filter((function(t){return t.type!==ht.abc})),this.isOnlyChat=!!this.channels.length&&this.channels.every((function(t){return t.type===ht.chat})),this.isOnlyChat)this.title=null!==(e=this.ctx.dataset.chatTitle)&&void 0!==e?e:"",this.intro=null!==(n=this.ctx.dataset.chatIntro)&&void 0!==n?n:"";else{var u=L({exceptionallyClosed:At(JSON.parse(null!==(i=this.ctx.dataset.closed)&&void 0!==i?i:"[]")),exceptionallyOpen:Dt(JSON.parse(null!==(r=this.ctx.dataset.exceptions)&&void 0!==r?r:"[]")),openhours:JSON.parse(null!==(o=this.ctx.dataset.open)&&void 0!==o?o:"[]")});this.channels=this.channels.filter((function(t){var e,n,i;return L({exceptionallyClosed:At(null!==(e=t.attrs.closed)&&void 0!==e?e:[]),exceptionallyOpen:Dt(null!==(n=t.attrs.exceptions)&&void 0!==n?n:[]),openhours:null!==(i=t.attrs.open)&&void 0!==i?i:[]})})),this.title=null!==(a=this.ctx.dataset.title)&&void 0!==a?a:"",this.intro=null!==(s=u?this.ctx.dataset.openIntro:this.ctx.dataset.closeIntro)&&void 0!==s?s:"",this.additionalText=null!==(c=u?this.ctx.dataset.openAdditional:this.ctx.dataset.closeAdditional)&&void 0!==c?c:""}this.channels.length&&this.render()},e.prototype.after=function(){if(this.isOnlyChat){var t=this.ctx.querySelector(".contact-holder");r.t.lazyBootstrap(t)}},e.prototype.render=function(){var t,e,n,i,r;t=this.ctx.querySelector(".contact-holder"),e=this.title,n=this.intro,i=this.additionalText,r=this.channels,(0,p.r)(t,Ct.createElement(Lt,{title:e,introductionText:n,additionalText:i,channels:r}))},e}(o.Y),qt=Ot,Pt=n(1256);function Ht(){return"scrollY"in window?window.scrollY:window.pageYOffset}var It=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),e.prototype.on=function(){var t=this,e=screen.height-250;this.ctx.addEventListener("click",(function(){(0,Pt.G)(Ht()+e)})),window.addEventListener("scroll",(function(){t.timeout&&window.clearTimeout(t.timeout),t.timeout=window.setTimeout((function(){window.innerHeight+Ht()+400>document.body.clientHeight?t.ctx.classList.add("hidden"):t.ctx.classList.remove("hidden")}),100)}))},e}(o.Y),Mt=It,Ft=n(9902),Rt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),e.prototype.on=function(){return(0,i.mG)(this,void 0,void 0,(function(){var t,e;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return[4,(0,Ft.Ai)()];case 1:return t=n.sent().getUser(),e=this.ctx.getElementsByTagName("scs-search-input")[0],t&&t.getSegment()&&(null==e||e.setAttribute("customer-segment",t.getSegment())),null==e||e.setAttribute("is-user-logged-in","".concat(!!t)),[2]}}))}))},e}(o.Y),jt=Rt,Vt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),e.prototype.on=function(){var t,e,n=Array.from(this.ctx.querySelectorAll(".skip-link-search"));try{for(var r=(0,i.XA)(n),o=r.next();!o.done;o=r.next())o.value.style.display="none"}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}var a=0;!function t(){var e=document.querySelector("scs-header-l1.hydrated");e?function(t){var e,r,o,a,s,c=null===(o=null==t?void 0:t.shadowRoot)||void 0===o?void 0:o.querySelector("scs-secondary-navigation"),l=null===(a=null==c?void 0:c.shadowRoot)||void 0===a?void 0:a.querySelector("scs-search-input"),u=null===(s=null==l?void 0:l.shadowRoot)||void 0===s?void 0:s.querySelector("input[type=search]");try{for(var h=(0,i.XA)(n),d=h.next();!d.done;d=h.next()){var p=d.value;u&&(p.style.display="block",p.addEventListener("click",(function(){u.focus()})))}}catch(t){e={error:t}}finally{try{d&&!d.done&&(r=h.return)&&r.call(h)}finally{if(e)throw e.error}}}(e):100>a++&&setTimeout(t,60)}()},e}(o.Y),Ut=Vt,zt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),e.prototype.on=function(){var t=this;this.ctx.querySelectorAll("ul li a").forEach((function(e){return e.addEventListener("click",t.handleClick.bind(t))}))},e.prototype.handleClick=function(t){var e=t.currentTarget,n=e.dataset.trackLabel;this.log("Service clicked",n),"copy-link"===n?(navigator.clipboard.writeText(e.dataset.url),e.innerHTML=e.dataset.copied):"print"===n&&window.print()},e}(o.Y),Jt=zt,Gt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),e.prototype.on=function(){var t=this;this.ctx.addEventListener("click",(function(){var e=new CustomEvent("placeholderClicked",{detail:{element:t.ctx,name:t.ctx.id}});document.dispatchEvent(e)})),c.Cd.then((function(){var e=new CustomEvent("placeholderReady",{detail:{element:t.ctx,name:t.ctx.id}});document.dispatchEvent(e)})).catch((function(){return t.log("Error")}))},e}(o.Y),Bt=Gt,_t=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.shouldEnhanceObject=!1,e}return(0,i.ZT)(e,t),e.prototype.on=function(){var t,e;this.params=JSON.parse(null!==(t=this.ctx.dataset.params)&&void 0!==t?t:"{}"),this.extraHeaders=JSON.parse(null!==(e=this.ctx.dataset.headers)&&void 0!==e?e:"{}"),this.shouldEnhanceObject="true"===this.ctx.dataset.enhanceJson},e.prototype.after=function(){var t=this;this.ctx.querySelectorAll("[href]").forEach((function(e){var n=e.getAttribute("href");t.params[n]&&e.addEventListener("click",t.convertExchangeId.bind(t))}))},e.prototype.convertExchangeId=function(t){var e;return(0,i.mG)(this,void 0,void 0,(function(){var n,r,o,a,s,c,u,h,d,p;return(0,i.Jh)(this,(function(m){switch(m.label){case 0:if(t.preventDefault(),!(n=t.currentTarget.getAttribute("href")))return[2];r=this.params[n],m.label=1;case 1:return m.trys.push([1,8,,9]),o=null!==(e=r.exchangeUrl)&&void 0!==e?e:"/oce-api/soe/ubc/common/v1/input",a=r.requireLogin,s=r.targetUrl,this.shouldEnhanceObject&&(r=function(t){return t.businessTxId=(0,l.DO)(),t.correlationId=t.businessTxId,t.sessionId=(0,l.DO)(),t.returnUrl||(t.returnUrl=window.location.href),t.cancelUrl||(t.returnUrl=window.location.href),t}(r)),[4,fetch(o,{body:Zt(r),headers:(f=this.extraHeaders,v=(0,i.pi)({"Content-Type":"application/json","X-OCE-CLIENT":"aem-portal","oce-calling-system":"NG_PORTAL"},f),g=(0,l.ej)("OCE-XSRF-TOKEN"),g&&(v["X-OCE-XSRF-TOKEN"]=g),new Headers(v)),method:"post"})];case 2:return(c=m.sent()).ok?[4,c.json()]:[3,6];case 3:return u=m.sent(),h=$t(u.exchangeId,s),(d=a)?[4,(0,Ft.Ai)()]:[3,5];case 4:d=!m.sent().getUser(),m.label=5;case 5:return d&&(h="/scel/online/portal"+h),document.location.href=h,[3,7];case 6:throw new Error("Request to ".concat(o," returned NOK ").concat(c.status," ").concat(c.statusText));case 7:return[3,9];case 8:return p=m.sent(),this.log.error("Failed to get exchange ID for",r,p),[3,9];case 9:return[2]}var f,v,g}))}))},e}(o.Y),Yt=_t;function Zt(t){return delete t.exchangeUrl,delete t.targetUrl,delete t.requireLogin,JSON.stringify(t)}function $t(t,e){if(void 0===e)return"?exchangeId=".concat(encodeURIComponent(t));var n=(0,i.CR)((0,a.C$)(e),3),r=n[0],o=n[1],s=n[2];return void 0===o&&(o=new URLSearchParams),o.append("exchangeId",t),(0,a.pv)(r,o,s)}var Xt=n(5480),Kt=Object.create(null);function Wt(t){t.preventDefault()}var Qt={subscribe:function(t){t(void 0,this)},unsubscribe:function(){}},te=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stoppers=[],e}return(0,i.ZT)(e,t),e.prototype.on=function(){var t;this.facts=(0,Xt.q_)(this.ctx),this.config=new Map;var e=JSON.parse(null!==(t=this.ctx.dataset.config)&&void 0!==t?t:"{}");for(var n in e)this.config.set(n,this.facts.query(e[n]))},e.prototype.after=function(){var t=this;this.ctx.querySelectorAll("[href]").forEach((function(e){var n=e.getAttribute("href"),r=(0,i.CR)((0,a.C$)(n),3),o=r[0],s=r[1],c=r[2];(s||c||t.config.has(n))&&(e.addEventListener("click",Wt),t.config.has(n)?t.stoppers.push((0,Xt.tq)(t.config.get(n),(function(t){e.href=t,e.removeEventListener("click",Wt)}))):t.stoppers.push((0,Xt.tq)((0,Xt.$e)(t.register(s),t.register(c)),(function(){e.href=(0,a.pv)(o,s,c),e.removeEventListener("click",Wt)}))))}));var e=this.ctx.querySelector(":scope > .authorInfo > .debug");if(e){var n=Array.from(this.config.keys()),r=Xt.$e.apply(void 0,(0,i.ev)([],(0,i.CR)(n.map((function(e){return(0,Xt.Wc)(t.config.get(e),Kt)}))),!1));this.stoppers.push((0,Xt.tq)(r,(function(t){e.innerHTML=t.map((function(t,e){return"<dt>".concat(n[e],"</dt><dd>").concat(t===Kt?"<i>Not yet known</i>":String(t),"</dd>")})).join("")})))}},e.prototype.stop=function(){var t,e;try{for(var n=(0,i.XA)(this.stoppers),r=n.next();!r.done;r=n.next())(0,r.value)()}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},e.prototype.register=function(t){var e=this,n={};null==t||t.forEach((function(t,i){e.config.has(t)&&(n[i]=e.config.get(t))}));var r=Object.keys(n);return r.length?(0,Xt.UI)(Xt.$e.apply(void 0,(0,i.ev)([],(0,i.CR)(r.map((function(t){return n[t]}))),!1)),(function(e){for(var n=0;n<r.length;n++)t.set(r[n],String(e[n]))})):Qt},e}(o.Y),ee=te;r.t.register({Barcode:function(){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){switch(t.label){case 0:return[4,Promise.all([n.e(287),n.e(499)]).then(n.bind(n,2129))];case 1:return[2,t.sent().default]}}))}))},BrightcoveVideo:d,CallFromNet:B,CallMeBack:nt,Carousel:rt,CascadingTabs:function(){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){switch(t.label){case 0:return[4,n.e(667).then(n.bind(n,1981))];case 1:return[2,t.sent().default]}}))}))},Countdown:ot.Z,ExpandAndCollapse:st,GenesysChat:ut,HeroCarousel:function(){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){switch(t.label){case 0:return[4,n.e(202).then(n.bind(n,3009))];case 1:return[2,t.sent().default]}}))}))},HoverContainer:ft,LoadingBar:bt,LottieAnimatedSVG:wt,MessagingChannels:qt,NewsletterTrigger:function(){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){switch(t.label){case 0:return[4,n.e(181).then(n.bind(n,9426))];case 1:return[2,t.sent().default]}}))}))},PinContainer:function(){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){switch(t.label){case 0:return[4,n.e(569).then(n.bind(n,1401))];case 1:return[2,t.sent().default]}}))}))},ScrollingArrow:Mt,SearchInput:jt,SkipLinks:Ut,SocialTools:Jt,Teaser:Bt,UbcExchangeGenerator:Yt,UrlPlaceholders:ee})},7877:function(t,e,n){var i=n(8433),r=n(5661),o={s:function(t){return t.seconds},m:function(t){return t.minutes},h:function(t){return t.hours},d:function(t){return t.days}};function a(t){return function(e){var n=String(o[t](e));return 2>n.length?"0".concat(n):n}}for(var s in o)o["".concat(s).concat(s)]=a(s);var c=[];function l(){var t,e,n=Date.now();try{for(var r=(0,i.XA)(c),o=r.next();!o.done;o=r.next())o.value.update(n)}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}requestAnimationFrame(l)}var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ended=!1,e.formatters=[],e}return(0,i.ZT)(e,t),e.prototype.on=function(){var t,e;this.end=parseInt(this.ctx.dataset.end||"0",10);var n=function(t){if(t.children.length)return"continue";var e=t.dataset.labelFor,n=e||t.textContent||"",a=o[n];if(!a)return"continue";var s=e?function(t){var e,n=(0,i.CR)((null!==(e=t.textContent)&&void 0!==e?e:"").split(/\|/),2),r=n[0],o=n[1];if(o&&r!==o)return function(e){t.textContent=1===e?o:r}}(t):function(t){return function(e){t.textContent=String(e)}}(t);if(!s)return"continue";var c=n;r.formatters.push((function(t){var e=a(t);e!==c&&(s(e),c=e)}))},r=this;try{for(var a=(0,i.XA)(this.ctx.querySelectorAll("*")),s=a.next();!s.done;s=a.next())n(s.value)}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}},e.prototype.after=function(){c.push(this),1===c.length&&l()},e.prototype.stop=function(){c.splice(c.indexOf(this),1)},e.prototype.update=function(t){var e,n;if(!this.ended){var r=this.end-t;0>r&&(this.ended=!0,r=0);var o,a,s=(o=r,(a={days:0,hours:0,minutes:0,seconds:0}).seconds=Math.ceil(o/1e3),a.minutes=Math.floor(a.seconds/60),a.seconds%=60,a.hours=Math.floor(a.minutes/60),a.minutes%=60,a.days=Math.floor(a.hours/24),a.hours%=24,a);try{for(var c=(0,i.XA)(this.formatters),l=c.next();!l.done;l=c.next())(0,l.value)(s)}catch(t){e={error:t}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}}},e}(r.Y);e.Z=u},3676:function(t,e,n){n.d(e,{$G:function(){return o},Uu:function(){return s},WU:function(){return r},vO:function(){return a},vs:function(){return c}});var i=n(8433);function r(t){for(var e=[],n=1;arguments.length>n;n++)e[n-1]=arguments[n];return(t||"").replace(/\{(\d+)\}/g,(function(t,n){var i=e[parseInt(n,10)];return String(null!=i?i:"")}))}function o(t,e,n,i){return void 0===n&&(n="…"),void 0===i&&(i=3),t&&t.length>e+i&&(t=t.substr(0,e).replace(/\s+[^\s.]+$/,"").replace(/\s*[(:;,_-]?\s*$/,""),/\.$/.test(t)||(t+=n||"")),t}function a(t){var e=document.createElement("div");return e.innerHTML=t,e.textContent}function s(t){var e,n;if(!t)return"-";try{for(var r=(0,i.XA)([[/ß/gi,"ss"],[/à/gi,"a"],[/â/gi,"a"],[/ä/gi,"ae"],[/ç/gi,"c"],[/è/gi,"e"],[/é/gi,"e"],[/ê/gi,"e"],[/ë/gi,"e"],[/ì/gi,"i"],[/í/gi,"i"],[/î/gi,"i"],[/ï/gi,"i"],[/ò/gi,"o"],[/ó/gi,"o"],[/ô/gi,"o"],[/ö/gi,"oe"],[/ù/gi,"u"],[/ú/gi,"u"],[/û/gi,"u"],[/ü/gi,"ue"],[/[^a-z0-9_\\-]/gi,"-"]]),o=r.next();!o.done;o=r.next()){var a=(0,i.CR)(o.value,2),s=a[0],c=a[1];t=t.replace(s,c)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return t}function c(t){return t.normalize("NFD").replace(/\p{Diacritic}|\t|\n/gu,"").replace(/\s/gu,"-").toLowerCase()}},5355:function(t,e,n){n.d(e,{i:function(){return o}});var i=n(9554),r=n(5390);function o(t,e){var n=t.icon,o=void 0===n?"information-circle":n,a=t.direction,s=void 0===a?"top-left":a,c=t.width,l=void 0===c?"300px":c,u=t.iconSize,h=void 0===u?2:u;if(e&&e.filter(Boolean).length){var d="string"==typeof l?l:"".concat(l,"px");return r.createElement("sdx-menu-flyout",{"attrs-direction":s},r.createElement("sdx-menu-flyout-toggle",null,r.createElement(i._,{iconName:o,size:h})),r.createElement("sdx-menu-flyout-content",{"style-width":d},r.createElement("p",null,e)))}}},9554:function(t,e,n){n.d(e,{_:function(){return o}});var i=n(8433),r=n(5390);function o(t){var e=t.render,n=t.iconName,o=t.srHint,a=t.size,s=(0,i._T)(t,["render","iconName","srHint","size"]);if(!1!==e)return/^icon-/.test(n)||(n="icon-".concat(n)),r.createElement("sdx-icon",(0,i.pi)({"attrs-icon-name":n,"attrs-size":a,"attrs-sr-hint":o||"","attrs-title":o},s))}}},function(t){t.O(0,[611,421,626,319,960,763],(function(){return t(t.s=7514)})),t.O()}]);
//# sourceMappingURL=greenfield.38197f2db5ab717c9c21-legacy.js.map