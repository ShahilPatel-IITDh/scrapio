var static_newsletter_popup_already_shown=!1;function static_newsletter_popup_show(forced=!1){if(!forced){if(!0===static_newsletter_popup_already_shown)return;if("1"===static_newsletter_popup_get_cookie("static_newsletter_popup_cookie"))return}$("body").hasClass("modal-open")||($("#static_newsletter_popup_modal").modal("show"),static_newsletter_popup_already_shown=!0,static_newsletter_popup_set_sookie("static_newsletter_popup_cookie","1",7))}function static_newsletter_popup_set_sookie(name,value,days){var date,expires="";days&&((date=new Date).setTime(date.getTime()+24*days*60*60*1e3),expires="; expires="+date.toUTCString()),document.cookie=name+"="+(value||"")+expires+"; path=/"}function static_newsletter_popup_get_cookie(name){for(var nameEQ=name+"=",ca=document.cookie.split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "===c.charAt(0);)c=c.substring(1,c.length);if(0===c.indexOf(nameEQ))return c.substring(nameEQ.length,c.length)}return null}window.addEventListener("hashchange",event=>{"#newsletter"===location.hash&&static_newsletter_popup_show(!0)}),"#newsletter"===location.hash&&static_newsletter_popup_show(!0),setTimeout(()=>{document.addEventListener("mouseout",evt=>{evt=(evt=evt||window.event).relatedTarget||evt.toElement;evt&&"HTML"!==evt.nodeName||(static_newsletter_popup_show(),document.removeEventListener("mouseout",()=>{}))})},2e3),window.onscroll=function(e){!0===(/iPad|iPhone|iPod|Android|android/.test(navigator.userAgent)&&!window.MSStream)&&(this.oldScroll>this.scrollY&&static_newsletter_popup_show(),this.oldScroll=this.scrollY)},$(document).ready(function(){var staticNewsletterModal=$(document).find("#static_newsletter_popup_modal"),formstaticNewsletterModal=$(document).find("#js--subscribe-newsletter-popup");formstaticNewsletterModal.on("submit",function(e){var termsCheckbox1,payload;e.preventDefault(),!0!==formstaticNewsletterModal.data("request-pending")&&(e=!0,(termsCheckbox1=$(this).find('input[name="newsletter_widget[accept_terms_1]"]')).is(":checked")?termsCheckbox1.parent().removeClass("text-danger font-weight-bold"):(termsCheckbox1.parent().addClass("text-danger font-weight-bold"),e=!1),(termsCheckbox1=$(this).find('input[name="newsletter_widget[accept_terms_2]"]')).is(":checked")?termsCheckbox1.parent().removeClass("text-danger font-weight-bold"):(termsCheckbox1.parent().addClass("text-danger font-weight-bold"),e=!1),e&&(payload={},$.each(formstaticNewsletterModal.serializeArray(),function(i,field){payload[field.name]=field.value||""}),!0===e&&(payload["newsletter_widget[accept_terms]"]="1"),formstaticNewsletterModal.find('button[type="submit"]').prop("disabled",!0),formstaticNewsletterModal.data("request-pending",!0),$.post(formstaticNewsletterModal.attr("action")+"?ajax=true",payload,function(response){if(response.html.length&&($(document).find("#newsletter_modal").remove(),$(document).find("div.page_wrapper").append(response.html),$(document).find("#newsletter_modal").modal("show"),response.success?formstaticNewsletterModal[0].reset():$(document).find("#newsletter_modal").one("hidden.bs.modal",function(){staticNewsletterModal.modal("show")}),staticNewsletterModal.modal("hide")),window.grecaptcha){let recaptchaInstances=document.querySelectorAll(".g-recaptcha");0<recaptchaInstances.length&&recaptchaInstances.forEach(function(instance,key){grecaptcha.reset(key)})}}).always(function(){formstaticNewsletterModal.find('button[type="submit"]').prop("disabled",!1),formstaticNewsletterModal.data("request-pending",!1)})))}),formstaticNewsletterModal.on("focus",'input[type="email"]',function(){formstaticNewsletterModal.find(".show-on-focus").attr("style","")}),staticNewsletterModal.on("hidden.bs.modal",function(){history.replaceState("",document.title,window.location.pathname+window.location.search)})});