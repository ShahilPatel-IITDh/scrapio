var bg_build = "Thu Jun 22 2023 16:54:23 GMT-0300 (GMT-03:00)";var debug,verbose,offline,cache,bg,tail,protocol,base_url,api_faq,config_url,api_endpoint,key,botid,silence_mode,my_coords,sessionTime,xCode,bg_style,bg_env,ipAddress,$,load_preview_config,BotToggleStatus,BotAnimating,enable_test_images,speakingTime,delayed_response_timer,loadFactor,response_shown,audio_activate_timer,html5_audio_enabled,enter_delay,buffer_timer,pseudo_lf,lf_RegExp,getBotResponseTimer,load;function bg_start_up(){var e="starting botgenes.min.js";"undefined"!=typeof bg_build&&(e+=" "+bg_build),showMessageInConsole(),loadVariables(),void 0!==config_url&&""!=config_url||(config_url=base_url),"undefined"==typeof jQuery?((e=document.createElement("script")).onload=function(){showMessageInConsole("loaded jQuery "+jQuery.fn.jquery),loadBlueBird()},e.src=offline?base_url+"/libraries/jquery-3.2.1.min.js?_="+tail:"https://code.jquery.com/jquery-3.2.1.min.js?_="+tail,document.getElementsByTagName("head")[0].appendChild(e)):(showMessageInConsole("using existing jQuery "+jQuery.fn.jquery),loadBlueBird())}function loadBlueBird(){if("undefined"!=typeof Promise)load_bot_config();else try{showMessageInConsole("loading bluebird"),script_url=offline?base_url+"/libraries/bluebird.min.js?_="+tail:"https://cdn.jsdelivr.net/bluebird/3.5.0/bluebird.min.js"+tail,$.getScript(script_url).done(function(e,t){load_bot_config()}).fail(function(e,t,n){showMessageInConsole("failure loading BlueBird!")})}catch(e){load_bot_config()}}function showMessageInConsole(e){debug&&console&&console.log("BG: "+e)}function load_bot_config(){$=jQuery.noConflict(),styled_path=config_url+"/"+botid,""!=bg_style&&(styled_path+="-"+bg_style),config_path=load_preview_config?styled_path+"/config_var_new.js?v="+Date.now():styled_path+"/config_var.js?v="+Date.now(),config_path_m=styled_path+"/config_var_m.js?v="+Date.now(),css_path=styled_path+"/"+botid+".css",Promise.all([load_config_var_files(),load.css(css_path)]).then(function(){load_libraries()}).catch(function(e){console.log("failure loading configuration for "+botid+"! "+e),showMessageInConsole("failure loading configuration for "+botid+"! "+e)})}function load_config_var_files(){new Promise(function(e,t){var n=document.createElement("script");n.charset="UTF-8",n.src=config_path,n.addEventListener("load",function(){e()}),n.addEventListener("error",function(e){t(e)}),document.head.appendChild(n)}).then(function(){new Promise(function(e,t){var n=document.createElement("script");n.charset="UTF-8",n.src=config_path_m,n.addEventListener("load",function(){e()}),n.addEventListener("error",function(e){t(e)}),document.head.appendChild(n)}).catch(function(e){console.log("failure loading manual configuration for "+botid+"! "+e),showMessageInConsole("failure loading manual configuration for "+botid+"! "+e)})}).catch(function(e){console.log("failure loading configuration for "+botid+"! "+e),showMessageInConsole("failure loading configuration for "+botid+"! "+e)})}function load_libraries(){var e="bg-jquery-ui.min.js";($.fn.tabs||"undefined"!=typeof skipJQUI&&skipJQUI)&&(e="bg-ui.min.js"),libraries=[load.js(base_url+"/libraries/"+e),load.js(base_url+"/libraries/sjcl.min.js"),load.js(base_url+"/libraries/chat_connection.min.js")],"undefined"!=typeof geo_enabled&&geo_enabled&&libraries.push(load.js(base_url+"/libraries/bg_geo.min.js")),"undefined"!=typeof hasSpeaker&&hasSpeaker&&libraries.push(load.js(base_url+"/libraries/MSHTML5.min.js")),"undefined"!=typeof use_zendesk&&use_zendesk&&libraries.push(load.js(base_url+"/libraries/bg-zendesk.min.js")),"boolean"==typeof bgCheckinactivity&&bgCheckinactivity&&libraries.push(load.js(base_url+"/libraries/bg_inactivity.js")),Promise.all(libraries).then(function(){buildTemplate(),showMessageInConsole("everything has been loaded!")}).catch(function(e){showMessageInConsole("failure loading scripts! "+e)})}function buildTemplate(){Promise.all([load.css(base_url+"/templates/"+templateBG+"/template.css"),load.js(base_url+"/templates/"+templateBG+"/build_template.min.js")]).then(function(){"boolean"==typeof have_events&&have_events&&load_event_handler_and_triggers(),use_asr()&&setTimeout("load_asr()",4e3),"undefined"!=typeof MTsite_id&&load_analytics(),showMessageInConsole("everything has been loaded template!")}).catch(function(e){showMessageInConsole("failure loading scriptstemplate! "+e)})}function fileExists(o){return new Promise(function(e,t){const n=new XMLHttpRequest;n.open("HEAD",o,!0),n.onreadystatechange=function(){4===n.readyState&&(200===n.status?e(!0):e(!1))},n.send()})}function load_asr(){try{load.js(base_url+"/libraries/bg-asr.min.js"),showMessageInConsole("asr loaded. ")}catch(e){showMessageInConsole("error at load_asr. "+e)}}function load_analytics(){try{load.js(base_url+"/libraries/bg-web-analytics.min.js"),showMessageInConsole("Web Analytics loaded. ")}catch(e){showMessageInConsole("error at Web Analytics . "+e)}}function load_event_handler_and_triggers(){try{var e="?"+(new Date).getTime();load.js(base_url+"/"+botid+"/bg_triggers_vars.js"+e),load.js(base_url+"/libraries/bg_smart_event_handler.js"+e),showMessageInConsole("event_handler_and_triggers loaded. ")}catch(e){showMessageInConsole("error at load_event_handler_and_triggers. "+e)}}function no_tags(e){return e.replace(/<|>/g,"")}function httpGetAsync(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){4==n.readyState&&200==n.status&&t(n.responseText)},n.open("GET",e,!0),n.send(null)}function loadVariables(){var e=document.getElementById("BotGenes");botid=no_tags(e.getAttribute("bot_id").toUpperCase()),script_src=e.getAttribute("src"),showMessageInConsole("script_src: "+script_src),base_match=script_src.match(/(.*\.*botgenes\.org)\//i),base_url=null!=base_match?base_match[1]:protocol+"//"+location.hostname,"BG0035"==botid&&"localhost"!=location.hostname&&(base_url="https://efx.botgenes.org");var t="script base: "+base_url;"localhost"==location.hostname&&(t="Warning! you are using localhost"),showMessageInConsole(t),api_endpoint=base_url+"/secure/api/";/https*\:\/\/(efx\.|efx\-eu\.|)botgenes\.org/i.test(base_url)?(api_faq=base_url+"/kbase",base_url="https://cdn.botgenes.org/widget"):(api_faq=base_url+"/kbase",base_url+="/widget"),showMessageInConsole("base_url: "+base_url),fileUrl=config_url=base_url,key="AF56BCB90ED3BF2223BC117FB0B0AF56",valid_attributes=["api_endpoint","env","config_url","xCode","bg_style"],void 0!==e.getAttribute("api_endpoint")&&null!=e.getAttribute("api_endpoint")&&""!=e.getAttribute("api_endpoint")&&(api_endpoint=no_tags(e.getAttribute("api_endpoint"))),showMessageInConsole("api_endpoint: "+api_endpoint),void 0!==e.getAttribute("env")&&null!=e.getAttribute("env")&&""!=e.getAttribute("env")&&(bg_env=no_tags(e.getAttribute("env"))),"preview"==bg_env&&(bg_env="test",load_preview_config=enable_test_images=!0),showMessageInConsole("environment: "+bg_env),void 0!==e.getAttribute("config_url")&&null!=e.getAttribute("config_url")&&""!=e.getAttribute("config_url")&&(config_url=no_tags(e.getAttribute("config_url"))),void 0!==e.getAttribute("xCode")&&null!=e.getAttribute("xCode")&&""!=e.getAttribute("xCode")&&(xCode=no_tags(e.getAttribute("xCode"))),void 0!==e.getAttribute("bg_style")&&null!=e.getAttribute("bg_style")&&""!=e.getAttribute("bg_style")&&(bg_style=no_tags(e.getAttribute("bg_style"))),showMessageInConsole(config_url!=base_url?"warning! using customs config from "+config_url:"using std configuration"),silence_mode=!0}function isMobile(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))}function use_asr(){return"boolean"==typeof enforce_asr?enforce_asr:(is_mobile=isMobile(),!(is_mobile||"undefined"==typeof hasMicDesktop||!hasMicDesktop)||!(!is_mobile||"undefined"==typeof hasMicMobile||!hasMicMobile))}"boolean"!=typeof bg&&(bg=!(cache=offline=verbose=debug=!1),tail=cache?"":"?_="+(new Date).getTime(),protocol=location.protocol,my_coords={lat:-34603700,lon:-58381600},sessionTime=45,ipAddress=bg_style=xCode="",enable_test_images=BotAnimating=BotToggleStatus=load_preview_config=!(bg_env="prod"),speakingTime=0,response_shown=!(loadFactor=1.4),html5_audio_enabled=!isMobile(),enter_delay=0,pseudo_lf=" ",lf_RegExp=new RegExp("[\n\r\t]+","g"),getBotResponseTimer=0,load=function(){function e(r){return function(i,a){return"undefined"==a&&(a=!1),new Promise(function(e,t){var n=document.createElement(r),o="body",s="src";switch(n.onload=function(){e(i)},n.onerror=function(){t(i)},r){case"script":n.async=a;break;case"link":n.type="text/css",n.rel="stylesheet",s="href",o="head"}n.className="bg-script",n[s]=i+tail,document[o].appendChild(n)})}}return{css:e("link"),js:e("script"),img:e("img")}}(),bg_start_up());