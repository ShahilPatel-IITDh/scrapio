'use strict';var cssVarPoly={init:function init(){if(window.CSS&&window.CSS.supports&&window.CSS.supports('(--foo: red)'))return void console.log('your browser supports CSS variables, aborting and letting the native support handle things.');console.log('no support for you! polyfill all (some of) the things!!'),document.querySelector('body').classList.add('cssvars-polyfilled');cssVarPoly.ratifiedVars={},cssVarPoly.varsByBlock={},cssVarPoly.oldCSS={},cssVarPoly.findCSS(),cssVarPoly.updateCSS()},findCSS:function findCSS(){var a=document.querySelectorAll('style:not(.inserted),link[type="text/css"]'),b=1;[].forEach.call(a,function(c){var d;'STYLE'===c.nodeName?(d=c.innerHTML,cssVarPoly.findSetters(d,b)):'LINK'===c.nodeName&&(cssVarPoly.getLink(c.getAttribute('href'),b,function(e,f){cssVarPoly.findSetters(f.responseText,e),cssVarPoly.oldCSS[e]=f.responseText,cssVarPoly.updateCSS()}),d=''),cssVarPoly.oldCSS[b]=d,b++})},findSetters:function findSetters(a,b){cssVarPoly.varsByBlock[b]=a.match(/(--.+:.+;)/g)},updateCSS:function updateCSS(){for(var b in cssVarPoly.ratifySetters(cssVarPoly.varsByBlock),cssVarPoly.oldCSS){var c=cssVarPoly.replaceGetters(cssVarPoly.oldCSS[b],cssVarPoly.ratifiedVars);if(document.querySelector('#inserted'+b))document.querySelector('#inserted'+b).innerHTML=c;else{var a=document.createElement('style');a.type='text/css',a.innerHTML=c,a.classList.add('inserted'),a.id='inserted'+b,document.getElementsByTagName('head')[0].appendChild(a)}}},replaceGetters:function replaceGetters(a,b){for(var c in b){var d=new RegExp('var\\(\\s*'+c+'\\s*\\)','g');a=a.replace(d,b[c]);var e=/var\(\s*.+\s*,\s*(.+)\)/g,f=a.match(e);f&&f.forEach(function(g){a=a.replace(g,g.match(/var\(.+,\s*(.+)\)/)[1])})}return a},ratifySetters:function ratifySetters(a){for(var b in a){var c=a[b];c.forEach(function(d){var e=d.split(/:\s*/);cssVarPoly.ratifiedVars[e[0]]=e[1].replace(/;/,'')})}},getLink:function getLink(a,b,c){var d=new XMLHttpRequest;d.open('GET',a,!0),d.overrideMimeType('text/css;'),d.onload=function(){200<=d.status&&400>d.status?'function'==typeof c&&c(b,d):console.warn('an error was returned from:',a)},d.onerror=function(){console.warn('we could not get anything from:',a)},d.send()}};cssVarPoly.init()