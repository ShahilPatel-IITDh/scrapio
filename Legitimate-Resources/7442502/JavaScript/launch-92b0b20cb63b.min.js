// For license information, see `https://lightning.cartoonnetwork.co.uk/launch/7be62238e4c3/b95cb8f58679/launch-92b0b20cb63b.js`.
window._satellite=window._satellite||{},window._satellite.container={buildInfo:{minified:!0,buildDate:"2023-05-09T13:38:29Z",turbineBuildDate:"2023-02-22T20:37:26Z",turbineVersion:"27.5.0"},environment:{id:"EN17f0137539cc447980a655456b1e9075",stage:"production"},dataElements:{"1.1 trackingServer":{modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){var e="",t=window.location.host;switch(!0){case/^((www|apps).|)(cartoonnetworkhq.com)/.test(t):case/^((www).|)(cn4za.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4za.preprod.qa.dmti.cloud)/.test(t):e="analytics.cartoonnetworkhq.com";break;case/^((www|apps).|)(cartoonnetwork.bg)/.test(t):case/^((www).|)(cn4bg.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4bg.preprod.qa.dmti.cloud)/.test(t):e="analytics.cartoonnetwork.bg";break;case/^((www|apps).|)(cartoonnetwork.dk)/.test(t):case/^((www).|)(cn4dk.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4dk.preprod.qa.dmti.cloud)/.test(t):e="analytics.cartoonnetwork.dk";break;case/^((www|apps).|)(cartoonnetwork.com.tr)/.test(t):case/^((www).|)(cn4tr.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4tr.preprod.qa.dmti.cloud)/.test(t):e="analytics.cartoonnetwork.com.tr";break;case/^((www|apps).|)(cartoonnetwork.cz)/.test(t):case/^((www).|)(cn4cz.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4cz.preprod.qa.dmti.cloud)/.test(t):e="analytics.cartoonnetwork.cz";break;case/^((www|apps).|)(cartoonnetwork.de)/.test(t):case/^((www).|)(cn4de.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4de.preprod.qa.dmti.cloud)/.test(t):e="analytics.cartoonnetwork.de";break;case/^((www|apps).|)(cartoonnetwork.es)/.test(t):case/^((www).|)(cn4es.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4es.preprod.qa.dmti.cloud)/.test(t):e="analytics.cartoonnetwork.es";break;case/^((www|apps).|)(cartoonnetwork.fr)/.test(t):case/^((www).|)(cn4fr.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4fr.preprod.qa.dmti.cloud)/.test(t):e="analytics.cartoonnetwork.fr";break;case/^((www|apps).|)(cartoonnetwork.hu)/.test(t):case/^((www).|)(cn4hu.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4hu.preprod.qa.dmti.cloud)/.test(t):e="analytics.cartoonnetwork.hu";break;case/^((www|apps).|)(cartoonnetwork.it)/.test(t):case/^((www).|)(cn4it.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4it.preprod.qa.dmti.cloud)/.test(t):e="analytics.cartoonnetwork.it";break;case/^((www|apps).|)(cartoonnetwork.nl)/.test(t):case/^((www).|)(cn4nl.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4nl.preprod.qa.dmti.cloud)/.test(t):e="analytics.cartoonnetwork.nl";break;case/^((www|apps).|)(cartoonnetwork.co.uk)/.test(t):case/^((www).|)(cn4uk.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4uk.preprod.qa.dmti.cloud)/.test(t):e="analytics.cartoonnetwork.co.uk";break;case/^((www|apps).|)(cartoonnetwork.pl)/.test(t):case/^((www).|)(cn4pl.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4pl.preprod.qa.dmti.cloud)/.test(t):e="analytics.cartoonnetwork.pl";break;case/^((www|apps).|)(cartoonnetwork.pt)/.test(t):case/^((www).|)(cn4pt.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4pt.preprod.qa.dmti.cloud)/.test(t):e="analytics.cartoonnetwork.pt";break;case/^((www|apps).|)(cartoonnetwork.ro)/.test(t):case/^((www).|)(cn4ro.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4ro.preprod.qa.dmti.cloud)/.test(t):e="analytics.cartoonnetwork.ro";break;case/^((www|apps).|)(cartoonnetwork.ru)/.test(t):case/^((www).|)(cn4ru.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4ru.preprod.qa.dmti.cloud)/.test(t):e="turnerinternational.sc.omtrdc.net";break;case/^((www|apps).|)(cartoonnetworkme.com)/.test(t):case/^((www).|)(cn4ae.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4ae.preprod.qa.dmti.cloud)/.test(t):e="analytics.cartoonnetworkme.com";break;case/^((www|apps).|)(cartoonnetwork.no)/.test(t):case/^((www).|)(cn4no.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4no.preprod.qa.dmti.cloud)/.test(t):e="analytics.cartoonnetwork.no";break;case/^((www|apps).|)(cartoonnetworkarabic.com)/.test(t):case/^((www).|)(cn4ab.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4ab.preprod.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4arabic.qa.dmti.cloud)/.test(t):e="analytics.cartoonnetworkarabic.com";break;case/^((www|apps).|)(cartoonnetwork.se)/.test(t):case/^((www).|)(cn4se.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4se.preprod.qa.dmti.cloud)/.test(t):e="analytics.cartoonnetwork.se";break;case/^((www).|)(cartoonnetwork.be)/.test(t):e="analytics.cartoonnetwork.be";break;case/^((www).|)(concorsicartoonnetwork.it)/.test(t):e="analytics.concorsicartoonnetwork.it";break;case/^((www).|)(cartoonnetworkmena.com)/.test(t):e="analytics.cartoonnetworkmena.com";break;default:e="turnerinternational.sc.omtrdc.net"}return e}}},"1.2 trackingServerSecure":{modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){var e="",t=window.location.host;switch(!0){case/^((www|apps).|)(cartoonnetworkhq.com)/.test(t):case/^((www).|)(cn4za.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4za.preprod.qa.dmti.cloud)/.test(t):e="sanalytics.cartoonnetworkhq.com";break;case/^((www|apps).|)(cartoonnetwork.bg)/.test(t):case/^((www).|)(cn4bg.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4bg.preprod.qa.dmti.cloud)/.test(t):e="sanalytics.cartoonnetwork.bg";break;case/^((www|apps).|)(cartoonnetwork.dk)/.test(t):case/^((www).|)(cn4dk.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4dk.preprod.qa.dmti.cloud)/.test(t):e="sanalytics.cartoonnetwork.dk";break;case/^((www|apps).|)(cartoonnetwork.com.tr)/.test(t):case/^((www).|)(cn4tr.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4tr.preprod.qa.dmti.cloud)/.test(t):e="sanalytics.cartoonnetwork.com.tr";break;case/^((www|apps).|)(cartoonnetwork.cz)/.test(t):case/^((www).|)(cn4cz.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4cz.preprod.qa.dmti.cloud)/.test(t):e="sanalytics.cartoonnetwork.cz";break;case/^((www|apps).|)(cartoonnetwork.de)/.test(t):case/^((www).|)(cn4de.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4de.preprod.qa.dmti.cloud)/.test(t):e="sanalytics.cartoonnetwork.de";break;case/^((www|apps).|)(cartoonnetwork.es)/.test(t):case/^((www).|)(cn4es.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4es.preprod.qa.dmti.cloud)/.test(t):e="sanalytics.cartoonnetwork.es";break;case/^((www|apps).|)(cartoonnetwork.fr)/.test(t):case/^((www).|)(cn4fr.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4fr.preprod.qa.dmti.cloud)/.test(t):e="sanalytics.cartoonnetwork.fr";break;case/^((www|apps).|)(cartoonnetwork.hu)/.test(t):case/^((www).|)(cn4hu.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4hu.preprod.qa.dmti.cloud)/.test(t):e="sanalytics.cartoonnetwork.hu";break;case/^((www|apps).|)(cartoonnetwork.it)/.test(t):case/^((www).|)(cn4it.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4it.preprod.qa.dmti.cloud)/.test(t):e="sanalytics.cartoonnetwork.it";break;case/^((www|apps).|)(cartoonnetwork.nl)/.test(t):case/^((www).|)(cn4nl.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4nl.preprod.qa.dmti.cloud)/.test(t):e="sanalytics.cartoonnetwork.nl";break;case/^((www|apps).|)(cartoonnetwork.co.uk)/.test(t):case/^((www).|)(cn4uk.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4uk.preprod.qa.dmti.cloud)/.test(t):e="sanalytics.cartoonnetwork.co.uk";break;case/^((www|apps).|)(cartoonnetwork.pl)/.test(t):case/^((www).|)(cn4pl.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4pl.preprod.qa.dmti.cloud)/.test(t):e="sanalytics.cartoonnetwork.pl";break;case/^((www|apps).|)(cartoonnetwork.pt)/.test(t):case/^((www).|)(cn4pt.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4pt.preprod.qa.dmti.cloud)/.test(t):e="sanalytics.cartoonnetwork.pt";break;case/^((www|apps).|)(cartoonnetwork.ro)/.test(t):case/^((www).|)(cn4ro.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4ro.preprod.qa.dmti.cloud)/.test(t):e="sanalytics.cartoonnetwork.ro";break;case/^((www|apps).|)(cartoonnetwork.ru)/.test(t):case/^((www).|)(cn4ru.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4ru.preprod.qa.dmti.cloud)/.test(t):e="turnerinternational.sc.omtrdc.net";break;case/^((www|apps).|)(cartoonnetworkme.com)/.test(t):case/^((www).|)(cn4ae.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4ae.preprod.qa.dmti.cloud)/.test(t):e="sanalytics.cartoonnetworkme.com";break;case/^((www|apps).|)(cartoonnetwork.no)/.test(t):case/^((www).|)(cn4no.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4no.preprod.qa.dmti.cloud)/.test(t):e="sanalytics.cartoonnetwork.no";break;case/^((www|apps).|)(cartoonnetworkarabic.com)/.test(t):case/^((www).|)(cn4ab.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4ab.preprod.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4arabic.qa.dmti.cloud)/.test(t):e="sanalytics.cartoonnetworkarabic.com";break;case/^((www|apps).|)(cartoonnetwork.se)/.test(t):case/^((www).|)(cn4se.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4se.preprod.qa.dmti.cloud)/.test(t):e="sanalytics.cartoonnetwork.se";break;case/^((www).|)(cartoonnetwork.be)/.test(t):e="sanalytics.cartoonnetwork.be";break;case/^((www).|)(concorsicartoonnetwork.it)/.test(t):e="sanalytics.concorsicartoonnetwork.it";break;case/^((www).|)(cartoonnetworkmena.com)/.test(t):e="sanalytics.cartoonnetworkmena.com";break;default:e="turnerinternational.sc.omtrdc.net"}return e}}},"1.0 Configuration":{modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){var e;window.tdi=window.tdi||{},window.tdi.globalTemplateVersion="gt2.0.2",window.tdi.propertyName="cn-emea",window.tdi.configuration={oneTrust:{useUserConsent:!1},adobeAnalytics:{adobeObj:"tdi_s",rsidPROD:"turnerintcartoon,turnerintglobal",rsidDEV:"turnerintcartoondev,turnerintglobaldev",trackingServer:"turnerinternational.sc.omtrdc.net",trackingServerSecure:"turnerinternational.sc.omtrdc.net",visitorNamespace:"turnerinternational",cookieDomainPeriods:/\w+\.(com|co|tv)\.\w+$/.test(location.hostname)?"3":"2",trackDownloadLinks:!0,trackExternalLinks:!0,trackInlineStats:!0,linkDownloadFileTypes:"exe,zip,wav,mp3,mov,mpg,avi,wmv,pdf,doc,docx,xls,xlsx,ppt,pptx",linkInternalFilters:"javascript:,.dmti.cloud,threei.com.pl,cartoonnetwork.,cartoonnetworkhq,cartoonnetworkarabic,cartoonnetworkme,concorsicartoonnetwork.",expCldID:"7FF852E2556756057F000101@AdobeOrg",whitelistParentDomain:"",whitelistIframeDomains:"",charSet:"UTF-8",trackTransactionId:!1,isProd:(e=window._satellite,"object"==typeof e&&"object"==typeof e.buildInfo&&"object"==typeof e.environment&&"string"==typeof e.environment.stage&&e.environment.stage.toLowerCase().indexOf("prod")>-1),pageViewBlockList:["feedcode","pageName"],interactionBlockList:["feedcode","pageName"]},media:{trackingServer:"turnerinternational.hb.omtrdc.net",debugLogging:!1,ssl:!0,playerName:"cn40",channel:"cn web",appVersion:"cn40",ovp:"cn",videoBlockList:["feedcode","pageName"]},comscore:{publisherId:"6035748",alwaysOn:!1,isComscoreEnabled:!0},launch:{spaceLastPublished:function(e){if("object"==typeof e&&"object"==typeof e.buildInfo&&"object"==typeof e.environment&&"string"==typeof e.environment.stage&&"string"==typeof e.buildInfo.buildDate){var t={development:"dev",staging:"qa",production:"prod"},a=e.environment.stage.replace(/development|staging|production/gi,(function(e){return t[e]}));return window.tdi.globalTemplateVersion+".launch."+window.tdi.propertyName+"."+a+"."+e.buildInfo.buildDate.split("T")[0].replace(/-/g,"")}}(window._satellite)}};var t=window.location.host,a=window.location.href;switch(!0){case/^((www|apps).|)(cartoonnetworkhq.com)/.test(t):case/^((www).|)(cn4za.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4za.preprod.qa.dmti.cloud)/.test(t):case/^((www|apps).|)(cartoonnetwork.bg)/.test(t):case/^((www).|)(cn4bg.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4bg.preprod.qa.dmti.cloud)/.test(t):case/^((www|apps).|)(cartoonnetwork.dk)/.test(t):case/^((www).|)(cn4dk.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4dk.preprod.qa.dmti.cloud)/.test(t):case/^((www|apps).|)(cartoonnetwork.com.tr)/.test(t):case/^((www).|)(cn4tr.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4tr.preprod.qa.dmti.cloud)/.test(t):case/^((www|apps).|)(cartoonnetwork.cz)/.test(t):case/^((www).|)(cn4cz.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4cz.preprod.qa.dmti.cloud)/.test(t):case/^((www|apps).|)(cartoonnetwork.de)/.test(t):case/^((www).|)(cn4de.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4de.preprod.qa.dmti.cloud)/.test(t):case/^((www|apps).|)(cartoonnetwork.es)/.test(t):case/^((www).|)(cn4es.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4es.preprod.qa.dmti.cloud)/.test(t):case/^((www|apps).|)(cartoonnetwork.fr)/.test(t):case/^((www).|)(cn4fr.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4fr.preprod.qa.dmti.cloud)/.test(t):case/^((www|apps).|)(cartoonnetwork.hu)/.test(t):case/^((www).|)(cn4hu.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4hu.preprod.qa.dmti.cloud)/.test(t):case/^((www|apps).|)(cartoonnetwork.it)/.test(t):case/^((www).|)(cn4it.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4it.preprod.qa.dmti.cloud)/.test(t):case/^((www|apps).|)(cartoonnetwork.nl)/.test(t):case/^((www).|)(cn4nl.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4nl.preprod.qa.dmti.cloud)/.test(t):case/^((www|apps).|)(cartoonnetwork.co.uk)/.test(t):case/^((www).|)(cn4uk.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4uk.preprod.qa.dmti.cloud)/.test(t):case/^((www|apps).|)(cartoonnetwork.pl)/.test(t):case/^((www).|)(cn4pl.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4pl.preprod.qa.dmti.cloud)/.test(t):case/^((www|apps).|)(cartoonnetwork.pt)/.test(t):case/^((www).|)(cn4pt.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4pt.preprod.qa.dmti.cloud)/.test(t):case/^((www|apps).|)(cartoonnetwork.ro)/.test(t):case/^((www).|)(cn4ro.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4ro.preprod.qa.dmti.cloud)/.test(t):case/^((www|apps).|)(cartoonnetwork.ru)/.test(t):case/^((www).|)(cn4ru.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4ru.preprod.qa.dmti.cloud)/.test(t):case/^((www|apps).|)(cartoonnetworkme.com)/.test(t):case/^((www).|)(cn4ae.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4ae.preprod.qa.dmti.cloud)/.test(t):case/^((www|apps).|)(cartoonnetwork.no)/.test(t):case/^((www).|)(cn4no.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4no.preprod.qa.dmti.cloud)/.test(t):case/^((www|apps).|)(cartoonnetworkarabic.com)/.test(t):case/^((www).|)(cn4ab.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4ab.preprod.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4arabic.qa.dmti.cloud)/.test(t):case/^((www|apps).|)(cartoonnetwork.se)/.test(t):case/^((www).|)(cn4se.qa.dmti.cloud)/.test(t):case/^((www).|)(cn4se.preprod.qa.dmti.cloud)/.test(t):window.tdi.configuration.oneTrust.useUserConsent=!0;break;case/^((www).|)((pl|ro|ru).threei.com.pl\/cn-products)/.test(a):window.tdi.configuration.oneTrust.useUserConsent=!1}return/cartoonnetwork.+\/.+\/ivandoe-/.test(window.location.href)&&(window.tdi.configuration.adobeAnalytics.rsidPROD="turnerintgameivandoequestsprod,turnerintgameappsglobal",window.tdi.configuration.adobeAnalytics.rsidDEV="turnerintgameivandoequestsdev,turnerintgameappsglobaldev"),window.OnetrustActiveGroups&&",,"!=window.OnetrustActiveGroups&&(window.tdi.configuration.oneTrust.useUserConsent=!0),window.location.host.indexOf("cn4cz.qa.dmti.cloud")>-1||window.location.host.indexOf("cartoonnetwork.cz")>-1||(window.transactionID=""),!0}}},"1.3 transactionID":{modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){if(filterOT=function(e){if("req"===e||"pf"===e||"bb"===e||"ad"===e||"sm"===e)return e;var t=e+"";return 1==t.length?t:void 0},window.OnetrustActiveGroups){var e=window.OnetrustActiveGroups.split(",").filter(filterOT);if(e.indexOf("2")>-1&&e.indexOf("4")>-1||e.indexOf("pf")>-1&&e.indexOf("ad")>-1){var t=Math.round((new Date).getTime()/1e3)+""+Math.floor(9007199254740992*Math.random());return window.turner_metadata=window.turner_metadata||{},t=window.turner_metadata.transactionid||t,window.turner_metadata.transactionid=t,t}return""}return""}}},"2. Utility Functions":{modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return window.tdi=window.tdi||{},window.tdi.util=window.tdi.util||{},window.tdi.util.getOrientation=function(){try{var e=window,t=!1;if(e.screen&&(t="object"==typeof e.screen.orientation&&"string"==typeof e.screen.orientation.type?e.screen.orientation.type:t,t="string"==typeof e.screen.msOrientation?e.screen.msOrientation:t,t="string"==typeof e.screen.mozOrientation?e.screen.mozOrientation:t),t&&-1!==t.indexOf("landscape"))return"landscape";if(t&&-1!==t.indexOf("portrait"))return"portrait";if("function"==typeof e.matchMedia&&e.matchMedia("(orientation: portrait)").matches)return"portrait";if("function"==typeof e.matchMedia&&e.matchMedia("(orientation: landscape)").matches)return"landscape"}catch(e){}return"unknown"},window.tdi.util.isValidVideoTime=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e&&e>=0},window.tdi.util.filterOT=function(e){if("req"===e||"pf"===e||"bb"===e||"ad"===e||"sm"===e)return e;var t=e+"";return 1==t.length?t:void 0},window.Bootstrapper=window.Bootstrapper||{},window.turner_metadata=window.turner_metadata||{},window.Bootstrapper.bindPageSpecificCompletion=window.Bootstrapper.bindPageSpecificCompletion||function(e){var t=e.toString();window.turner_metadata.eventTracker=window.turner_metadata.eventTracker||[],window.turner_metadata.eventTracker.push(t)},window.tdi.bindPageSpecificCompletion=window.Bootstrapper.bindPageSpecificCompletion,window.Bootstrapper.ensEvent=window.Bootstrapper.ensEvent||{},window.Bootstrapper.ensEvent.trigger=window.Bootstrapper.ensEvent.trigger||function(e){var t='function(){window.tdi.ensEvent.trigger("'+e+'")}';window.turner_metadata.eventTracker=window.turner_metadata.eventTracker||[],window.turner_metadata.eventTracker.push(t)},window.tdi.ensEvent=window.Bootstrapper.ensEvent,window.ensBootstraps=window.ensBootstraps||{tdi:{ensEvent:{}}},window.ensBootstraps.tdi.ensEvent=window.Bootstrapper.ensEvent,!0}}}},extensions:{"adobe-mcid":{displayName:"Experience Cloud ID Service",hostedLibFilesBaseUrl:"https://lightning.cartoonnetwork.co.uk/launch/7be62238e4c3/b95cb8f58679/a452bc00f42f/hostedLibFiles/EPf0412a5c65e5429ab0e5ed8ba2256510/",settings:{orgId:"7FF852E2556756057F000101@AdobeOrg",timeUnit:"Years",variables:[{name:"trackingServer",value:"%1.1 trackingServer%"},{name:"trackingServerSecure",value:"%1.2 trackingServerSecure%"}],isIabContext:!1,doesOptInApply:!0,optInStorageExpiry:99,isOptInStorageEnabled:!0},modules:{"adobe-mcid/src/lib/sharedModules/mcidInstance.js":{script:function(e,t,a,n){"use strict";var r=a("@adobe/reactor-document"),i=a("../codeLibrary/VisitorAPI"),s=a("../../view/utils/timeUnits"),o=function(e){return e.reduce((function(e,t){var a=/^(true|false)$/i.test(t.value)?JSON.parse(t.value):t.value;return e[t.name]=a,e}),{})},d=function(e){var t=n.getExtensionSettings();if("string"!=typeof t.orgId)throw new TypeError("Org ID is not a string.");var a=o(t.variables||[]),r=t.doesOptInApply;r&&("boolean"==typeof r?a.doesOptInApply=r:t.optInCallback&&(a.doesOptInApply=t.optInCallback));var i=t.isOptInStorageEnabled;i&&(a.isOptInStorageEnabled=i);var d=t.optInCookieDomain;d&&(a.optInCookieDomain=d);var c=t.optInStorageExpiry;if(c){var l=t.timeUnit;if(l&&s[l]){var u=c*s[l];a.optInStorageExpiry=u}}else!0===i&&(a.optInStorageExpiry=33696e3);var g=t.previousPermissions;g&&(a.previousPermissions=g);var p=t.preOptInApprovals;if(p)a.preOptInApprovals=p;else{var m=t.preOptInApprovalInput;m&&(a.preOptInApprovals=m)}var h=t.isIabContext;h&&(a.isIabContext=h);var f=e.getInstance(t.orgId,a);return n.logger.info('Created instance using orgId: "'+t.orgId+'"'),n.logger.info("Set variables: "+JSON.stringify(a)),f.getMarketingCloudVisitorID((function(e){n.logger.info("Obtained Marketing Cloud Visitor Id: "+e)}),!0),f},c=function(e){return(n.getExtensionSettings().pathExclusions||[]).some((function(t){return t.valueIsRegex?new RegExp(t.value,"i").test(e):t.value===e}))},l=null;_satellite.getVisitorId=function(){return l},c(r.location.pathname)?n.logger.warn("MCID library not loaded. One of the path exclusions matches the current path."):l=d(i),e.exports=l},name:"mcid-instance",shared:!0},"adobe-mcid/src/lib/codeLibrary/VisitorAPI.js":{script:function(e){e.exports=(function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function a(){return{callbacks:{},add:function(e,t){this.callbacks[e]=this.callbacks[e]||[];var a=this.callbacks[e].push(t)-1,n=this;return function(){n.callbacks[e].splice(a,1)}},execute:function(e,t){if(this.callbacks[e]){t=(t=void 0===t?[]:t)instanceof Array?t:[t];try{for(;this.callbacks[e].length;){var a=this.callbacks[e].shift();"function"==typeof a?a.apply(null,t):a instanceof Array&&a[1].apply(a[0],t)}delete this.callbacks[e]}catch(e){}}},executeAll:function(e,t){(t||e&&!M.isObjectEmpty(e))&&Object.keys(this.callbacks).forEach((function(t){var a=void 0!==e[t]?e[t]:"";this.execute(t,a)}),this)},hasCallbacks:function(){return Boolean(Object.keys(this.callbacks).length)}}}function n(e,t,a){var n=null==e?void 0:e[t];return void 0===n?a:n}function r(e){for(var t=/^\d+$/,a=0,n=e.length;a<n;a++)if(!t.test(e[a]))return!1;return!0}function i(e,t){for(;e.length<t.length;)e.push("0");for(;t.length<e.length;)t.push("0")}function s(e,t){for(var a=0;a<e.length;a++){var n=parseInt(e[a],10),r=parseInt(t[a],10);if(n>r)return 1;if(r>n)return-1}return 0}function o(e,t){if(e===t)return 0;var a=e.toString().split("."),n=t.toString().split(".");return r(a.concat(n))?(i(a,n),s(a,n)):NaN}function d(e){return e===Object(e)&&0===Object.keys(e).length}function c(e){return"function"==typeof e||e instanceof Array&&e.length}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};this.log=le("log",e,t),this.warn=le("warn",e,t),this.error=le("error",e,t)}function u(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).cookieName,t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).cookies;if(!e||!t)return{get:Se,set:Se,remove:Se};var a={remove:function(){t.remove(e)},get:function(){var a=t.get(e),n={};try{n=JSON.parse(a)}catch(a){n={}}return n},set:function(n,r){r=r||{};var i=a.get(),s=Object.assign(i,n);t.set(e,JSON.stringify(s),{domain:r.optInCookieDomain||"",cookieLifetime:r.optInStorageExpiry||3419e4,expires:!0})}};return a}function g(e){this.name=this.constructor.name,this.message=e,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error(e).stack}function p(){function e(e,t){var a=he(e);return a.length?a.every((function(e){return!!t[e]})):fe(t)}function t(){T(I),S(te.COMPLETE),f(h.status,h.permissions),o&&m.set(h.permissions,{optInCookieDomain:d,optInStorageExpiry:c}),_.execute(Pe)}function a(e){return function(a,n){if(!_e(a))throw new Error("[OptIn] Invalid category(-ies). Please use the `OptIn.Categories` enum.");return S(te.CHANGED),Object.assign(I,be(he(a),e)),n||t(),h}}var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.doesOptInApply,i=n.previousPermissions,s=n.preOptInApprovals,o=n.isOptInStorageEnabled,d=n.optInCookieDomain,c=n.optInStorageExpiry,l=n.isIabContext,g=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).cookies,p=Te(i);Ce(p,"Invalid `previousPermissions`!"),Ce(s,"Invalid `preOptInApprovals`!");var m=u({cookieName:"adobeujs-optin"},{cookies:g}),h=this,f=ee(h),_=oe(),b=we(p),v=we(s),y=o?m.get():{},w={},k=function(e,t){return ke(e)||t&&ke(t)?te.COMPLETE:te.PENDING}(b,y),A=function(e,t,a){var n=be(se,!r);return r?Object.assign({},n,e,t,a):n}(v,b,y),I=ve(A),S=function(e){return k=e},T=function(e){return A=e};h.deny=a(!1),h.approve=a(!0),h.denyAll=h.deny.bind(h,se),h.approveAll=h.approve.bind(h,se),h.isApproved=function(t){return e(t,h.permissions)},h.isPreApproved=function(t){return e(t,v)},h.fetchPermissions=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=t?h.on(te.COMPLETE,e):Se;return!r||r&&h.isComplete||s?e(h.permissions):t||_.add(Pe,(function(){return e(h.permissions)})),a},h.complete=function(){h.status===te.CHANGED&&t()},h.registerPlugin=function(e){if(!e||!e.name||"function"!=typeof e.onRegister)throw new Error(Oe);w[e.name]||(w[e.name]=e,e.onRegister.call(e,h))},h.execute=Me(w),h.memoizeContent=function(e){Ie(e)&&m.set(e,{optInCookieDomain:d,optInStorageExpiry:c})},h.getMemoizedContent=function(e){var t=m.get();if(t)return t[e]},Object.defineProperties(h,{permissions:{get:function(){return A}},status:{get:function(){return k}},Categories:{get:function(){return ae}},doesOptInApply:{get:function(){return!!r}},isPending:{get:function(){return h.status===te.PENDING}},isComplete:{get:function(){return h.status===te.COMPLETE}},__plugins:{get:function(){return Object.keys(w)}},isIabContext:{get:function(){return l}}})}function m(e,t){function a(){r=null,e.call(e,new g("The call took longer than you wanted!"))}function n(){r&&(clearTimeout(r),e.apply(e,arguments))}if(void 0===t)return e;var r=setTimeout(a,t);return n}function h(){if(window.__tcfapi)return window.__tcfapi;var e=window;if(e!==window.top){for(var t;!t;){e=e.parent;try{e.frames.__tcfapiLocator&&(t=e)}catch(e){}if(e===window.top)break}if(t){var a={};return window.__tcfapi=function(e,n,r,i){var s=Math.random()+"",o={__tcfapiCall:{command:e,parameter:i,version:n,callId:s}};a[s]=r,t.postMessage(o,"*")},window.addEventListener("message",(function(e){var t=e.data;if("string"==typeof t)try{t=JSON.parse(e.data)}catch(e){}if(t.__tcfapiReturn){var n=t.__tcfapiReturn;"function"==typeof a[n.callId]&&(a[n.callId](n.returnValue,n.success),delete a[n.callId])}}),!1),window.__tcfapi}pe.error("__tcfapi not found")}else pe.error("__tcfapi not found")}function f(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=!0===e.vendor.consents[t],r=a.every((function(t){return!0===e.purpose.consents[t]}));return n&&r}function _(){var e=this;e.name="iabPlugin",e.version="0.0.2";var t,a=oe(),n={transparencyAndConsentData:null},r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n[e]=t};e.fetchConsentData=function(e){var t=m(e.callback,e.timeout);i({callback:t})},e.isApproved=function(e){var t=e.callback,a=e.category,r=e.timeout;if(n.transparencyAndConsentData)return t(null,f(n.transparencyAndConsentData,ne[a],re[a]));var s=m((function(e,n){t(e,f(n,ne[a],re[a]))}),r);i({category:a,callback:s})},e.onRegister=function(a){t=a;var n=Object.keys(ne),r=function(e,t){!e&&t&&(n.forEach((function(e){var n=f(t,ne[e],re[e]);a[n?"approve":"deny"](e,!0)})),a.complete())};e.fetchConsentData({callback:r})};var i=function(e){var i=e.callback;if(n.transparencyAndConsentData)return i(null,n.transparencyAndConsentData);a.add("FETCH_CONSENT_DATA",i),s((function(e,i){if(i){var s=ve(e),o=t.getMemoizedContent("iabConsentHash"),d=ge(s.tcString).toString(32);s.consentString=e.tcString,s.hasConsentChangedSinceLastCmpPull=o!==d,r("transparencyAndConsentData",s),t.memoizeContent({iabConsentHash:d})}a.execute("FETCH_CONSENT_DATA",[null,n.transparencyAndConsentData])}))},s=function(e){var t=De(ne),a=h();"function"==typeof a&&a("getTCData",2,e,t)}}var b="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};Object.assign=Object.assign||function(e){for(var t,a,n=1;n<arguments.length;++n)for(t in a=arguments[n])Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t]);return e};var v,y,w={MESSAGES:{HANDSHAKE:"HANDSHAKE",GETSTATE:"GETSTATE",PARENTSTATE:"PARENTSTATE"},STATE_KEYS_MAP:{MCMID:"MCMID",MCAID:"MCAID",MCAAMB:"MCAAMB",MCAAMLH:"MCAAMLH",MCOPTOUT:"MCOPTOUT",CUSTOMERIDS:"CUSTOMERIDS"},ASYNC_API_MAP:{MCMID:"getMarketingCloudVisitorID",MCAID:"getAnalyticsVisitorID",MCAAMB:"getAudienceManagerBlob",MCAAMLH:"getAudienceManagerLocationHint",MCOPTOUT:"isOptedOut",ALLFIELDS:"getVisitorValues"},SYNC_API_MAP:{CUSTOMERIDS:"getCustomerIDs"},ALL_APIS:{MCMID:"getMarketingCloudVisitorID",MCAAMB:"getAudienceManagerBlob",MCAAMLH:"getAudienceManagerLocationHint",MCOPTOUT:"isOptedOut",MCAID:"getAnalyticsVisitorID",CUSTOMERIDS:"getCustomerIDs",ALLFIELDS:"getVisitorValues"},FIELDGROUP_TO_FIELD:{MC:"MCMID",A:"MCAID",AAM:"MCAAMB"},FIELDS:{MCMID:"MCMID",MCOPTOUT:"MCOPTOUT",MCAID:"MCAID",MCAAMLH:"MCAAMLH",MCAAMB:"MCAAMB"},AUTH_STATE:{UNKNOWN:0,AUTHENTICATED:1,LOGGED_OUT:2},OPT_OUT:{GLOBAL:"global"},SAME_SITE_VALUES:{LAX:"Lax",STRICT:"Strict",NONE:"None"}},k=w.STATE_KEYS_MAP,A=function(e){function t(){}function a(t,a){var n=this;return function(){var r=e(0,t),i={};return i[t]=r,n.setStateAndPublish(i),a(r),r}}this.getMarketingCloudVisitorID=function(e){e=e||t;var n=this.findField(k.MCMID,e),r=a.call(this,k.MCMID,e);return void 0!==n?n:r()},this.getVisitorValues=function(e){this.getMarketingCloudVisitorID((function(t){e({MCMID:t})}))}},I=w.MESSAGES,S=w.ASYNC_API_MAP,T=w.SYNC_API_MAP,C=function(){function e(){}function t(e,t){var a=this;return function(){return a.callbackRegistry.add(e,t),a.messageParent(I.GETSTATE),""}}function a(a){this[S[a]]=function(n){n=n||e;var r=this.findField(a,n),i=t.call(this,a,n);return void 0!==r?r:i()}}function n(t){this[T[t]]=function(){return this.findField(t,e)||{}}}Object.keys(S).forEach(a,this),Object.keys(T).forEach(n,this)},E=w.ASYNC_API_MAP,D=function(){Object.keys(E).forEach((function(e){this[E[e]]=function(t){this.callbackRegistry.add(e,t)}}),this)},M=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(t,a){a.isObjectEmpty=function(e){return e===Object(e)&&0===Object.keys(e).length},a.isValueEmpty=function(e){return""===e||a.isObjectEmpty(e)};var n=function(){var e=navigator.appName,t=navigator.userAgent;return"Microsoft Internet Explorer"===e||t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0&&t.indexOf("Windows NT 6")>=0};a.getIeVersion=function(){return document.documentMode?document.documentMode:n()?7:null},a.encodeAndBuildRequest=function(e,t){return e.map(encodeURIComponent).join(t)},a.isObject=function(t){return null!==t&&"object"===e(t)&&!1===Array.isArray(t)},a.defineGlobalNamespace=function(){return window.adobe=a.isObject(window.adobe)?window.adobe:{},window.adobe},a.pluck=function(e,t){return t.reduce((function(t,a){return e[a]&&(t[a]=e[a]),t}),Object.create(null))},a.parseOptOut=function(e,t,a){t||(t=a,e.d_optout&&e.d_optout instanceof Array&&(t=e.d_optout.join(",")));var n=parseInt(e.d_ottl,10);return isNaN(n)&&(n=7200),{optOut:t,d_ottl:n}},a.normalizeBoolean=function(e){var t=e;return"true"===e?t=!0:"false"===e&&(t=!1),t}})),P=(M.isObjectEmpty,M.isValueEmpty,M.getIeVersion,M.encodeAndBuildRequest,M.isObject,M.defineGlobalNamespace,M.pluck,M.parseOptOut,M.normalizeBoolean,a),O=w.MESSAGES,N={0:"prefix",1:"orgID",2:"state"},R=function(e,t){this.parse=function(e){try{var t={};return e.data.split("|").forEach((function(e,a){void 0!==e&&(t[N[a]]=2!==a?e:JSON.parse(e))})),t}catch(e){}},this.isInvalid=function(a){var n=this.parse(a);if(!n||Object.keys(n).length<2)return!0;var r=e!==n.orgID,i=!t||a.origin!==t,s=-1===Object.keys(O).indexOf(n.prefix);return r||i||s},this.send=function(a,n,r){var i=n+"|"+e;r&&r===Object(r)&&(i+="|"+JSON.stringify(r));try{a.postMessage(i,t)}catch(e){}}},L=w.MESSAGES,x=function(e,t,a,n){function r(e){Object.assign(p,e)}function i(e){Object.assign(p.state,e),Object.assign(p.state.ALLFIELDS,e),p.callbackRegistry.executeAll(p.state)}function s(e){if(!f.isInvalid(e)){h=!1;var t=f.parse(e);p.setStateAndPublish(t.state)}}function o(e){!h&&m&&(h=!0,f.send(n,e))}function d(){r(new A(a._generateID)),p.getMarketingCloudVisitorID(),p.callbackRegistry.executeAll(p.state,!0),b.removeEventListener("message",c)}function c(e){if(!f.isInvalid(e)){var t=f.parse(e);h=!1,b.clearTimeout(p._handshakeTimeout),b.removeEventListener("message",c),r(new C(p)),b.addEventListener("message",s),p.setStateAndPublish(t.state),p.callbackRegistry.hasCallbacks()&&o(L.GETSTATE)}}function l(){m&&postMessage?(b.addEventListener("message",c),o(L.HANDSHAKE),p._handshakeTimeout=setTimeout(d,250)):d()}function u(){b.s_c_in||(b.s_c_il=[],b.s_c_in=0),p._c="Visitor",p._il=b.s_c_il,p._in=b.s_c_in,p._il[p._in]=p,b.s_c_in++}function g(){function e(e){0!==e.indexOf("_")&&"function"==typeof a[e]&&(p[e]=function(){})}Object.keys(a).forEach(e),p.getSupplementalDataID=a.getSupplementalDataID,p.isAllowed=function(){return!0}}var p=this,m=t.whitelistParentDomain;p.state={ALLFIELDS:{}},p.version=a.version,p.marketingCloudOrgID=e,p.cookieDomain=a.cookieDomain||"",p._instanceType="child";var h=!1,f=new R(e,m);p.callbackRegistry=P(),p.init=function(){u(),g(),r(new D(p)),l()},p.findField=function(e,t){if(void 0!==p.state[e])return t(p.state[e]),p.state[e]},p.messageParent=o,p.setStateAndPublish=i},B=w.MESSAGES,V=w.ALL_APIS,j=w.ASYNC_API_MAP,F=w.FIELDGROUP_TO_FIELD,H=function(e,t){function a(){var t={};return Object.keys(V).forEach((function(a){var n=V[a],r=e[n]()
;M.isValueEmpty(r)||(t[a]=r)})),t}function n(){var t=[];return e._loading&&Object.keys(e._loading).forEach((function(a){if(e._loading[a]){var n=F[a];t.push(n)}})),t.length?t:null}function r(t){return function a(){var r=n();if(r){var i=j[r[0]];e[i](a,!0)}else t()}}function i(e,n){var r=a();t.send(e,n,r)}function s(e){d(e),i(e,B.HANDSHAKE)}function o(e){r((function(){i(e,B.PARENTSTATE)}))()}function d(a){function n(n){r.call(e,n),t.send(a,B.PARENTSTATE,{CUSTOMERIDS:e.getCustomerIDs()})}var r=e.setCustomerIDs;e.setCustomerIDs=n}return function(e){t.isInvalid(e)||(t.parse(e).prefix===B.HANDSHAKE?s:o)(e.source)}},q=function(e,t){function a(e){return function(a){n[e]=a,++r===i&&t(n)}}var n={},r=0,i=Object.keys(e).length;Object.keys(e).forEach((function(t){var n=e[t];if(n.fn){var r=n.args||[];r.unshift(a(t)),n.fn.apply(n.context||null,r)}}))},K={get:function(e){e=encodeURIComponent(e);var t=(";"+document.cookie).split(" ").join(";"),a=t.indexOf(";"+e+"="),n=a<0?a:t.indexOf(";",a+1);return a<0?"":decodeURIComponent(t.substring(a+2+e.length,n<0?t.length:n))},set:function(e,t,a){var r=n(a,"cookieLifetime"),i=n(a,"expires"),s=n(a,"domain"),o=n(a,"secure"),d=n(a,"sameSite"),c=o?"Secure":"",l=d?"SameSite="+d+";":"";if(i&&"SESSION"!==r&&"NONE"!==r){var u=""!==t?parseInt(r||0,10):-60;if(u)(i=new Date).setTime(i.getTime()+1e3*u);else if(1===i){var g=(i=new Date).getYear();i.setYear(g+2+(g<1900?1900:0))}}else i=0;return e&&"NONE"!==r?(document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+"; path=/;"+(i?" expires="+i.toGMTString()+";":"")+(s?" domain="+s+";":"")+l+c,this.get(e)===t):0},remove:function(e,t){var a=n(t,"domain");a=a?" domain="+a+";":"";var r=n(t,"secure"),i=n(t,"sameSite"),s=r?"Secure":"",o=i?"SameSite="+i+";":"";document.cookie=encodeURIComponent(e)+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"+a+o+s}},U=function(e,t){!e&&b.location&&(e=b.location.hostname);var a,n=e.split("."),r=t||{};for(a=n.length-2;a>=0;a--)if(r.domain=n.slice(a).join("."),K.set("test","cookie",r))return K.remove("test",r),r.domain;return""},Y={compare:o,isLessThan:function(e,t){return o(e,t)<0},areVersionsDifferent:function(e,t){return 0!==o(e,t)},isGreaterThan:function(e,t){return o(e,t)>0},isEqual:function(e,t){return 0===o(e,t)}},z=!!b.postMessage,W={postMessage:function(e,t,a){var n=1;t&&(z?a.postMessage(e,t.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):t&&(a.location=t.replace(/#.*$/,"")+"#"+ +new Date+n+++"&"+e))},receiveMessage:function(e,t){var a;try{z&&(e&&(a=function(a){if("string"==typeof t&&a.origin!==t||"[object Function]"===Object.prototype.toString.call(t)&&!1===t(a.origin))return!1;e(a)}),b.addEventListener?b[e?"addEventListener":"removeEventListener"]("message",a):b[e?"attachEvent":"detachEvent"]("onmessage",a))}catch(e){}}},G=function(e){var t,a,n="0123456789",r="",i="",s=8,o=10,d=10;if(1==e){for(n+="ABCDEF",t=0;16>t;t++)a=Math.floor(Math.random()*s),r+=n.substring(a,a+1),a=Math.floor(Math.random()*s),i+=n.substring(a,a+1),s=16;return r+"-"+i}for(t=0;19>t;t++)a=Math.floor(Math.random()*o),r+=n.substring(a,a+1),0===t&&9==a?o=3:((1==t||2==t)&&10!=o&&2>a||2<t)&&(o=10),a=Math.floor(Math.random()*d),i+=n.substring(a,a+1),0===t&&9==a?d=3:((1==t||2==t)&&10!=d&&2>a||2<t)&&(d=10);return r+i},Q=function(e){return{corsMetadata:function(){var e="none",t=!0;return"undefined"!=typeof XMLHttpRequest&&XMLHttpRequest===Object(XMLHttpRequest)&&("withCredentials"in new XMLHttpRequest?e="XMLHttpRequest":"undefined"!=typeof XDomainRequest&&XDomainRequest===Object(XDomainRequest)&&(t=!1),Object.prototype.toString.call(b.HTMLElement).indexOf("Constructor")>0&&(t=!1)),{corsType:e,corsCookiesEnabled:t}}(),getCORSInstance:function(){return"none"===this.corsMetadata.corsType?null:new b[this.corsMetadata.corsType]},fireCORS:function(t,a){function n(e){var a;try{if((a=JSON.parse(e))!==Object(a))return void r.handleCORSError(t,null,"Response is not JSON")}catch(e){return void r.handleCORSError(t,e,"Error parsing response as JSON")}try{for(var n=t.callback,i=b,s=0;s<n.length;s++)i=i[n[s]];i(a)}catch(e){r.handleCORSError(t,e,"Error forming callback function")}}var r=this;a&&(t.loadErrorHandler=a);try{var i=this.getCORSInstance();i.open("get",t.corsUrl+"&ts="+(new Date).getTime(),!0),"XMLHttpRequest"===this.corsMetadata.corsType&&(i.withCredentials=!0,i.timeout=e.loadTimeout,i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.onreadystatechange=function(){4===this.readyState&&200===this.status&&n(this.responseText)}),i.onerror=function(e){r.handleCORSError(t,e,"onerror")},i.ontimeout=function(e){r.handleCORSError(t,e,"ontimeout")},i.send(),e._log.requests.push(t.corsUrl)}catch(e){this.handleCORSError(t,e,"try-catch")}},handleCORSError:function(t,a,n){e.CORSErrors.push({corsData:t,error:a,description:n}),t.loadErrorHandler&&("ontimeout"===n?t.loadErrorHandler(!0):t.loadErrorHandler(!1))}}},J={POST_MESSAGE_ENABLED:!!b.postMessage,DAYS_BETWEEN_SYNC_ID_CALLS:1,MILLIS_PER_DAY:864e5,ADOBE_MC:"adobe_mc",ADOBE_MC_SDID:"adobe_mc_sdid",VALID_VISITOR_ID_REGEX:/^[0-9a-fA-F\-]+$/,ADOBE_MC_TTL_IN_MIN:5,VERSION_REGEX:/vVersion\|((\d+\.)?(\d+\.)?(\*|\d+))(?=$|\|)/,FIRST_PARTY_SERVER_COOKIE:"s_ecid"},$=function(e,t){var a=b.document;return{THROTTLE_START:3e4,MAX_SYNCS_LENGTH:649,throttleTimerSet:!1,id:null,onPagePixels:[],iframeHost:null,getIframeHost:function(e){if("string"==typeof e){var t=e.split("/");return t[0]+"//"+t[2]}},subdomain:null,url:null,getUrl:function(){var t,n="http://fast.",r="?d_nsid="+e.idSyncContainerID+"#"+encodeURIComponent(a.location.origin);return this.subdomain||(this.subdomain="nosubdomainreturned"),e.loadSSL&&(n=e.idSyncSSLUseAkamai?"https://fast.":"https://"),t=n+this.subdomain+".demdex.net/dest5.html"+r,this.iframeHost=this.getIframeHost(t),this.id="destination_publishing_iframe_"+this.subdomain+"_"+e.idSyncContainerID,t},checkDPIframeSrc:function(){var t="?d_nsid="+e.idSyncContainerID+"#"+encodeURIComponent(a.location.href);"string"==typeof e.dpIframeSrc&&e.dpIframeSrc.length&&(this.id="destination_publishing_iframe_"+(e._subdomain||this.subdomain||(new Date).getTime())+"_"+e.idSyncContainerID,this.iframeHost=this.getIframeHost(e.dpIframeSrc),this.url=e.dpIframeSrc+t)},idCallNotProcesssed:null,doAttachIframe:!1,startedAttachingIframe:!1,iframeHasLoaded:null,iframeIdChanged:null,newIframeCreated:null,originalIframeHasLoadedAlready:null,iframeLoadedCallbacks:[],regionChanged:!1,timesRegionChanged:0,sendingMessages:!1,messages:[],messagesPosted:[],messagesReceived:[],messageSendingInterval:J.POST_MESSAGE_ENABLED?null:100,onPageDestinationsFired:[],jsonForComparison:[],jsonDuplicates:[],jsonWaiting:[],jsonProcessed:[],canSetThirdPartyCookies:!0,receivedThirdPartyCookiesNotification:!1,readyToAttachIframePreliminary:function(){return!(e.idSyncDisableSyncs||e.disableIdSyncs||e.idSyncDisable3rdPartySyncing||e.disableThirdPartyCookies||e.disableThirdPartyCalls)},readyToAttachIframe:function(){return this.readyToAttachIframePreliminary()&&(this.doAttachIframe||e._doAttachIframe)&&(this.subdomain&&"nosubdomainreturned"!==this.subdomain||e._subdomain)&&this.url&&!this.startedAttachingIframe},attachIframe:function(){function e(){(r=a.createElement("iframe")).sandbox="allow-scripts allow-same-origin",r.title="Adobe ID Syncing iFrame",r.id=n.id,r.name=n.id+"_name",r.style.cssText="display: none; width: 0; height: 0;",r.src=n.url,n.newIframeCreated=!0,t(),a.body.appendChild(r)}function t(e){r.addEventListener("load",(function(){r.className="aamIframeLoaded",n.iframeHasLoaded=!0,n.fireIframeLoadedCallbacks(e),n.requestToProcess()}))}this.startedAttachingIframe=!0;var n=this,r=a.getElementById(this.id);r?"IFRAME"!==r.nodeName?(this.id+="_2",this.iframeIdChanged=!0,e()):(this.newIframeCreated=!1,"aamIframeLoaded"!==r.className?(this.originalIframeHasLoadedAlready=!1,t("The destination publishing iframe already exists from a different library, but hadn't loaded yet.")):(this.originalIframeHasLoadedAlready=!0,this.iframeHasLoaded=!0,this.iframe=r,this.fireIframeLoadedCallbacks("The destination publishing iframe already exists from a different library, and had loaded alresady."),this.requestToProcess())):e(),this.iframe=r},fireIframeLoadedCallbacks:function(e){this.iframeLoadedCallbacks.forEach((function(t){"function"==typeof t&&t({message:e||"The destination publishing iframe was attached and loaded successfully."})})),this.iframeLoadedCallbacks=[]},requestToProcess:function(t){function a(){r.jsonForComparison.push(t),r.jsonWaiting.push(t),r.processSyncOnPage(t)}var n,r=this;if(t===Object(t)&&t.ibs)if(n=JSON.stringify(t.ibs||[]),this.jsonForComparison.length){var i,s,o,d=!1;for(i=0,s=this.jsonForComparison.length;i<s;i++)if(o=this.jsonForComparison[i],n===JSON.stringify(o.ibs||[])){d=!0;break}d?this.jsonDuplicates.push(t):a()}else a();if((this.receivedThirdPartyCookiesNotification||!J.POST_MESSAGE_ENABLED||this.iframeHasLoaded)&&this.jsonWaiting.length){var c=this.jsonWaiting.shift();this.process(c),this.requestToProcess()}e.idSyncDisableSyncs||e.disableIdSyncs||!this.iframeHasLoaded||!this.messages.length||this.sendingMessages||(this.throttleTimerSet||(this.throttleTimerSet=!0,setTimeout((function(){r.messageSendingInterval=J.POST_MESSAGE_ENABLED?null:150}),this.THROTTLE_START)),this.sendingMessages=!0,this.sendMessages())},getRegionAndCheckIfChanged:function(t,a){var n=e._getField("MCAAMLH"),r=t.d_region||t.dcs_region;return n?r&&(e._setFieldExpire("MCAAMLH",a),e._setField("MCAAMLH",r),parseInt(n,10)!==r&&(this.regionChanged=!0,this.timesRegionChanged++,e._setField("MCSYNCSOP",""),e._setField("MCSYNCS",""),n=r)):(n=r)&&(e._setFieldExpire("MCAAMLH",a),e._setField("MCAAMLH",n)),n||(n=""),n},processSyncOnPage:function(e){var t,a,n,r;if((t=e.ibs)&&t instanceof Array&&(a=t.length))for(n=0;n<a;n++)(r=t[n]).syncOnPage&&this.checkFirstPartyCookie(r,"","syncOnPage")},process:function(e){var t,a,n,r,i,s=encodeURIComponent,o=!1;if((t=e.ibs)&&t instanceof Array&&(a=t.length))for(o=!0,n=0;n<a;n++)r=t[n],i=[s("ibs"),s(r.id||""),s(r.tag||""),M.encodeAndBuildRequest(r.url||[],","),s(r.ttl||""),"","",r.fireURLSync?"true":"false"],r.syncOnPage||(this.canSetThirdPartyCookies?this.addMessage(i.join("|")):r.fireURLSync&&this.checkFirstPartyCookie(r,i.join("|")));o&&this.jsonProcessed.push(e)},checkFirstPartyCookie:function(t,a,n){var r="syncOnPage"===n,i=r?"MCSYNCSOP":"MCSYNCS";e._readVisitor();var s,o,d=e._getField(i),c=!1,l=!1,u=Math.ceil((new Date).getTime()/J.MILLIS_PER_DAY);d?(s=d.split("*"),c=(o=this.pruneSyncData(s,t.id,u)).dataPresent,l=o.dataValid,c&&l||this.fireSync(r,t,a,s,i,u)):(s=[],this.fireSync(r,t,a,s,i,u))},pruneSyncData:function(e,t,a){var n,r,i,s=!1,o=!1;for(r=0;r<e.length;r++)n=e[r],i=parseInt(n.split("-")[1],10),n.match("^"+t+"-")?(s=!0,a<i?o=!0:(e.splice(r,1),r--)):a>=i&&(e.splice(r,1),r--);return{dataPresent:s,dataValid:o}},manageSyncsSize:function(e){if(e.join("*").length>this.MAX_SYNCS_LENGTH)for(e.sort((function(e,t){return parseInt(e.split("-")[1],10)-parseInt(t.split("-")[1],10)}));e.join("*").length>this.MAX_SYNCS_LENGTH;)e.shift()},fireSync:function(t,a,n,r,i,s){var o=this;if(t){if("img"===a.tag){var d,c,l,u,g=a.url,p=e.loadSSL?"https:":"http:";for(d=0,c=g.length;d<c;d++){l=g[d],u=/^\/\//.test(l);var m=new Image;m.addEventListener("load",function(t,a,n,r){return function(){o.onPagePixels[t]=null,e._readVisitor();var s,d,c,l,u=e._getField(i),g=[];if(u)for(d=0,c=(s=u.split("*")).length;d<c;d++)(l=s[d]).match("^"+a.id+"-")||g.push(l);o.setSyncTrackingData(g,a,n,r)}}(this.onPagePixels.length,a,i,s)),m.src=(u?p:"")+l,this.onPagePixels.push(m)}}}else this.addMessage(n),this.setSyncTrackingData(r,a,i,s)},addMessage:function(t){var a=encodeURIComponent(e._enableErrorReporting?"---destpub-debug---":"---destpub---");this.messages.push((J.POST_MESSAGE_ENABLED?"":a)+t)},setSyncTrackingData:function(t,a,n,r){t.push(a.id+"-"+(r+Math.ceil(a.ttl/60/24))),this.manageSyncsSize(t),e._setField(n,t.join("*"))},sendMessages:function(){var e,t=this,a="",n=encodeURIComponent;this.regionChanged&&(a=n("---destpub-clear-dextp---"),this.regionChanged=!1),this.messages.length?J.POST_MESSAGE_ENABLED?(e=a+n("---destpub-combined---")+this.messages.join("%01"),this.postMessage(e),this.messages=[],this.sendingMessages=!1):(e=this.messages.shift(),this.postMessage(a+e),setTimeout((function(){t.sendMessages()}),this.messageSendingInterval)):this.sendingMessages=!1},postMessage:function(e){W.postMessage(e,this.url,this.iframe.contentWindow),this.messagesPosted.push(e)},receiveMessage:function(e){var t,a=/^---destpub-to-parent---/;"string"==typeof e&&a.test(e)&&("canSetThirdPartyCookies"===(t=e.replace(a,"").split("|"))[0]&&(this.canSetThirdPartyCookies="true"===t[1],this.receivedThirdPartyCookiesNotification=!0,this.requestToProcess()),this.messagesReceived.push(e))},processIDCallData:function(n){(null==this.url||n.subdomain&&"nosubdomainreturned"===this.subdomain)&&("string"==typeof e._subdomain&&e._subdomain.length?this.subdomain=e._subdomain:this.subdomain=n.subdomain||"",this.url=this.getUrl()),n.ibs instanceof Array&&n.ibs.length&&(this.doAttachIframe=!0),this.readyToAttachIframe()&&(e.idSyncAttachIframeOnWindowLoad?(t.windowLoaded||"complete"===a.readyState||"loaded"===a.readyState)&&this.attachIframe():this.attachIframeASAP()),"function"==typeof e.idSyncIDCallResult?e.idSyncIDCallResult(n):this.requestToProcess(n),"function"==typeof e.idSyncAfterIDCallResult&&e.idSyncAfterIDCallResult(n)},canMakeSyncIDCall:function(t,a){return e._forceSyncIDCall||!t||a-t>J.DAYS_BETWEEN_SYNC_ID_CALLS},attachIframeASAP:function(){function e(){t.startedAttachingIframe||(a.body?t.attachIframe():setTimeout(e,30))}var t=this;e()}}},X={audienceManagerServer:{},audienceManagerServerSecure:{},cookieDomain:{},cookieLifetime:{},cookieName:{},doesOptInApply:{type:"boolean"},disableThirdPartyCalls:{type:"boolean"},discardTrackingServerECID:{type:"boolean"},idSyncAfterIDCallResult:{},idSyncAttachIframeOnWindowLoad:{type:"boolean"},idSyncContainerID:{},idSyncDisable3rdPartySyncing:{type:"boolean"},disableThirdPartyCookies:{type:"boolean"},idSyncDisableSyncs:{type:"boolean"},disableIdSyncs:{type:"boolean"},idSyncIDCallResult:{},idSyncSSLUseAkamai:{type:"boolean"},isCoopSafe:{type:"boolean"},isIabContext:{type:"boolean"},isOptInStorageEnabled:{type:"boolean"},loadSSL:{type:"boolean"},loadTimeout:{},marketingCloudServer:{},marketingCloudServerSecure:{},optInCookieDomain:{},optInStorageExpiry:{},overwriteCrossDomainMCIDAndAID:{type:"boolean"},preOptInApprovals:{},previousPermissions:{},resetBeforeVersion:{},sdidParamExpiry:{},serverState:{},sessionCookieName:{},secureCookie:{type:"boolean"},sameSiteCookie:{},takeTimeoutMetrics:{},trackingServer:{},trackingServerSecure:{},useLocalStorage:{type:"boolean"},whitelistIframeDomains:{},whitelistParentDomain:{}},Z={getConfigNames:function(){return Object.keys(X)},getConfigs:function(){return X},normalizeConfig:function(e,t){return X[e]&&"boolean"===X[e].type?"function"!=typeof t?t:t():t}},ee=function(e){var t={};return e.on=function(e,a,n){if(!a||"function"!=typeof a)throw new Error("[ON] Callback should be a function.");t.hasOwnProperty(e)||(t[e]=[]);var r=t[e].push({callback:a,context:n})-1;return function(){t[e].splice(r,1),t[e].length||delete t[e]}},e.off=function(e,a){t.hasOwnProperty(e)&&(t[e]=t[e].filter((function(e){if(e.callback!==a)return e})))},e.publish=function(e){if(t.hasOwnProperty(e)){var a=[].slice.call(arguments,1);t[e].slice(0).forEach((function(e){e.callback.apply(e.context,a)}))}},e.publish},te={PENDING:"pending",CHANGED:"changed",COMPLETE:"complete"},ae={AAM:"aam",ADCLOUD:"adcloud",ANALYTICS:"aa",CAMPAIGN:"campaign",ECID:"ecid",LIVEFYRE:"livefyre",TARGET:"target",MEDIA_ANALYTICS:"mediaaa"},ne=(t(v={},ae.AAM,565),t(v,ae.ECID,565),v),re=(t(y={},ae.AAM,[1,10]),t(y,ae.ECID,[1,10]),y),ie=["videoaa","iabConsentHash"],se=function(e){return Object.keys(e).map((function(t){return e[t]}))}(ae),oe=function(){var e={};return e.callbacks=Object.create(null),e.add=function(t,a){if(!c(a))throw new Error("[callbackRegistryFactory] Make sure callback is a function or an array of functions.");e.callbacks[t]=e.callbacks[t]||[];var n=e.callbacks[t].push(a)-1;return function(){e.callbacks[t].splice(n,1)}},e.execute=function(t,a){if(e.callbacks[t]){a=(a=void 0===a?[]:a)instanceof Array?a:[a];try{for(;e.callbacks[t].length;){var n=e.callbacks[t].shift();"function"==typeof n?n.apply(null,a):n instanceof Array&&n[1].apply(n[0],a)}delete e.callbacks[t]}catch(e){}}},e.executeAll=function(t,a){(a||t&&!d(t))&&Object.keys(e.callbacks).forEach((function(a){var n=void 0!==t[a]?t[a]:"";e.execute(a,n)}),e)},e.hasCallbacks=function(){return Boolean(Object.keys(e.callbacks).length)},e},de=function(){},ce=function(e){var t=window.console;return!!t&&"function"==typeof t[e]},le=function(e,t,a){return a()?function(){if(ce(e)){for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];console[e].apply(console,[t].concat(n))}}:de},ue=l,ge=function(){for(var e=[],t=0;t<256;t++){for(var a=t,n=0;n<8;n++)a=1&a?3988292384^a>>>1:a>>>1;e.push(a)}return function(t,a){t=unescape(encodeURIComponent(t)),a||(a=0),a^=-1;for(var n=0;n<t.length;n++){var r=255&(a^t.charCodeAt(n));a=a>>>8^e[r]}return(a^=-1)>>>0}}(),pe=new ue("[ADOBE OPT-IN]"),me=function(t,a){return e(t)===a},he=function(e,t){return e instanceof Array?e:me(e,"string")?[e]:t||[]},fe=function(e){var t=Object.keys(e);return!!t.length&&t.every((function(t){return!0===e[t]}))},_e=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!(!e||ye(e))&&he(e).every((function(e){return se.indexOf(e)>-1||t&&ie.indexOf(e)>-1}))},be=function(e,t){return e.reduce((function(e,a){return e[a]=t,e}),{})},ve=function(e){return JSON.parse(JSON.stringify(e))},ye=function(e){return"[object Array]"===Object.prototype.toString.call(e)&&!e.length},we=function(e){if(Ie(e))return e;try{return JSON.parse(e)}catch(e){return{}}},ke=function(e){return void 0===e||(Ie(e)?_e(Object.keys(e),!0):Ae(e))},Ae=function(e){try{var t=JSON.parse(e);return!!e&&me(e,"string")&&_e(Object.keys(t),!0)}catch(e){return!1}},Ie=function(e){return null!==e&&me(e,"object")&&!1===Array.isArray(e)},Se=function(){},Te=function(e){return me(e,"function")?e():e},Ce=function(e,t){ke(e)||pe.error("".concat(t))},Ee=function(e){return Object.keys(e).map((function(t){return e[t]}))},De=function(e){return Ee(e).filter((function(e,t,a){return a.indexOf(e)===t}))},Me=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.command,n=t.params,r=void 0===n?{}:n,i=t.callback,s=void 0===i?Se:i;if(!a||-1===a.indexOf("."))throw new Error("[OptIn.execute] Please provide a valid command.");try{var o=a.split("."),d=e[o[0]],c=o[1];if(!d||"function"!=typeof d[c])throw new Error("Make sure the plugin and API name exist.");var l=Object.assign(r,{callback:s});d[c].call(d,l)}catch(e){pe.error("[execute] Something went wrong: "+e.message)}}};g.prototype=Object.create(Error.prototype),g.prototype.constructor=g;var Pe="fetchPermissions",Oe="[OptIn#registerPlugin] Plugin is invalid.";p.Categories=ae,p.TimeoutError=g;var Ne=Object.freeze({OptIn:p,IabPlugin:_}),Re=function(e,t){e.publishDestinations=function(a){var n=arguments[1],r=arguments[2];try{r="function"==typeof r?r:a.callback}catch(e){r=function(){}}var i=t;if(i.readyToAttachIframePreliminary()){if("string"==typeof a){if(!a.length)return void r({error:"subdomain is not a populated string."});if(!(n instanceof Array&&n.length))return void r({error:"messages is not a populated array."});var s=!1;if(n.forEach((function(e){"string"==typeof e&&e.length&&(i.addMessage(e),s=!0)})),!s)return void r({error:"None of the messages are populated strings."})}else{if(!M.isObject(a))return void r({error:"Invalid parameters passed."});var o=a;if("string"!=typeof(a=o.subdomain)||!a.length)return void r({error:"config.subdomain is not a populated string."});var d=o.urlDestinations;if(!(d instanceof Array&&d.length))return void r({error:"config.urlDestinations is not a populated array."});var c=[];d.forEach((function(e){M.isObject(e)&&(e.hideReferrer?e.message&&i.addMessage(e.message):c.push(e))})),function e(){c.length&&setTimeout((function(){var t=new Image,a=c.shift();t.src=a.url,i.onPageDestinationsFired.push(a),e()}),100)}()}i.iframe?(r({message:"The destination publishing iframe is already attached and loaded."}),i.requestToProcess()):!e.subdomain&&e._getField("MCMID")?(i.subdomain=a,i.doAttachIframe=!0,i.url=i.getUrl(),i.readyToAttachIframe()?(i.iframeLoadedCallbacks.push((function(e){r({message:"Attempted to attach and load the destination publishing iframe through this API call. Result: "+(e.message||"no result")})})),i.attachIframe()):r({error:"Encountered a problem in attempting to attach and load the destination publishing iframe through this API call."})):i.iframeLoadedCallbacks.push((function(e){r({message:"Attempted to attach and load the destination publishing iframe through normal Visitor API processing. Result: "+(e.message||"no result")})}))}else r({error:"The destination publishing iframe is disabled in the Visitor library."})}},Le=function e(t){function a(e,t){return e>>>t|e<<32-t}for(var n,r,i=Math.pow,s=i(2,32),o="",d=[],c=8*t.length,l=e.h=e.h||[],u=e.k=e.k||[],g=u.length,p={},m=2;g<64;m++)if(!p[m]){for(n=0;n<313;n+=m)p[n]=m;l[g]=i(m,.5)*s|0,u[g++]=i(m,1/3)*s|0}for(t+="\x80";t.length%64-56;)t+="\0";for(n=0;n<t.length;n++){if((r=t.charCodeAt(n))>>8)return;d[n>>2]|=r<<(3-n)%4*8}for(d[d.length]=c/s|0,d[d.length]=c,r=0;r<d.length;){var h=d.slice(r,r+=16),f=l;for(l=l.slice(0,8),n=0;n<64;n++){var _=h[n-15],b=h[n-2],v=l[0],y=l[4],w=l[7]+(a(y,6)^a(y,11)^a(y,25))+(y&l[5]^~y&l[6])+u[n]+(h[n]=n<16?h[n]:h[n-16]+(a(_,7)^a(_,18)^_>>>3)+h[n-7]+(a(b,17)^a(b,19)^b>>>10)|0);(l=[w+((a(v,2)^a(v,13)^a(v,22))+(v&l[1]^v&l[2]^l[1]&l[2]))|0].concat(l))[4]=l[4]+w|0}for(n=0;n<8;n++)l[n]=l[n]+f[n]|0}for(n=0;n<8;n++)for(r=3;r+1;r--){var k=l[n]>>8*r&255;o+=(k<16?0:"")+k.toString(16)}return o},xe=function(e,t){return"SHA-256"!==t&&"SHA256"!==t&&"sha256"!==t&&"sha-256"!==t||(e=Le(e)),e},Be=function(e){return String(e).trim().toLowerCase()},Ve=Ne.OptIn;M.defineGlobalNamespace(),window.adobe.OptInCategories=Ve.Categories;var je=function(t,a,n){function r(){v._customerIDsHashChanged=!1}function i(e){var t=e;return function(e){var a=e||T.location.href;try{var n=v._extractParamFromUri(a,t);if(n)return te.parsePipeDelimetedKeyValues(n)}catch(e){}}}function s(e){function t(e,t,a){e&&e.match(J.VALID_VISITOR_ID_REGEX)&&(a===O&&(S=!0),t(e))}t(e[O],v.setMarketingCloudVisitorID,O),v._setFieldExpire(V,-1),t(e[x],v.setAnalyticsVisitorID)}function o(e){e=e||{},v._supplementalDataIDCurrent=e.supplementalDataIDCurrent||"",v._supplementalDataIDCurrentConsumed=e.supplementalDataIDCurrentConsumed||{},v._supplementalDataIDLast=e.supplementalDataIDLast||"",v._supplementalDataIDLastConsumed=e.supplementalDataIDLastConsumed||{}}function d(e){function t(e,t,a){return(a=a?a+="|":a)+(e+"=")+encodeURIComponent(t)}function a(e,a){var n=a[0],r=a[1];return null!=r&&r!==j&&(e=t(n,r,e)),e}return function(e){return(e=e?e+="|":e)+"TS="+te.getTimestampInSeconds()}(e.reduce(a,""))}function c(e){var t=e.minutesToLive,a="";return(v.idSyncDisableSyncs||v.disableIdSyncs)&&(a=a||"Error: id syncs have been disabled"),"string"==typeof e.dpid&&e.dpid.length||(a=a||"Error: config.dpid is empty"),"string"==typeof e.url&&e.url.length||(a=a||"Error: config.url is empty"),void 0===t?t=20160:(t=parseInt(t,10),(isNaN(t)||t<=0)&&(a=a||"Error: config.minutesToLive needs to be a positive number")),{error:a,ttl:t}}function l(){return!(!v.configs.doesOptInApply||y.optIn.isComplete&&u())}function u(){return v.configs.doesOptInApply&&v.configs.isIabContext?y.optIn.isApproved(y.optIn.Categories.ECID)&&I:y.optIn.isApproved(y.optIn.Categories.ECID)}function g(){[["getMarketingCloudVisitorID"],["setCustomerIDs",void 0],["syncIdentity",void 0],["getAnalyticsVisitorID"],["getAudienceManagerLocationHint"],["getLocationHint"],["getAudienceManagerBlob"]].forEach((function(e){var t=e[0],a=2===e.length?e[1]:"",n=v[t];v[t]=function(e){return u()&&v.isAllowed()?n.apply(v,arguments):("function"==typeof e&&v._callCallback(e,[a]),a)}}))}function p(){var e=v._getAudienceManagerURLData(),t=e.url;return v._loadData(P,t,null,e)}function m(e,t){if(I=!0,e)throw new Error("[IAB plugin] : "+e);t&&t.gdprApplies&&(k=t.consentString,A=t.hasConsentChangedSinceLastCmpPull?1:0),p(),_()}function h(e,t){if(I=!0,e)throw new Error("[IAB plugin] : "+e);t.gdprApplies&&(k=t.consentString,A=t.hasConsentChangedSinceLastCmpPull?1:0),v.init(),_()}function f(){y.optIn.isComplete&&(y.optIn.isApproved(y.optIn.Categories.ECID)?v.configs.isIabContext?y.optIn.execute({command:"iabPlugin.fetchConsentData",callback:h}):(v.init(),_()):v.configs.isIabContext?y.optIn.execute({command:"iabPlugin.fetchConsentData",callback:m}):(g(),_()))}function _(){y.optIn.off("complete",f)}if(!n||n.split("").reverse().join("")!==t)throw new Error("Please use `Visitor.getInstance` to instantiate Visitor.");var v=this,y=window.adobe,k="",A=0,I=!1,S=!1;v.version="5.2.0";var T=b,C=T.Visitor;C.version=v.version,C.AuthState=w.AUTH_STATE,C.OptOut=w.OPT_OUT,T.s_c_in||(T.s_c_il=[],T.s_c_in=0),v._c="Visitor",v._il=T.s_c_il,v._in=T.s_c_in,v._il[v._in]=v,T.s_c_in++,v._instanceType="regular",v._log={requests:[]},v.marketingCloudOrgID=t,v.cookieName="AMCV_"+t,v.sessionCookieName="AMCVS_"+t;var E={};a&&a.secureCookie&&a.sameSiteCookie&&(E={sameSite:a.sameSiteCookie,secure:a.secureCookie}),v.cookieDomain=v.useLocalStorage?"":U(null,E),v.loadSSL=!0,v.loadTimeout=3e4,v.CORSErrors=[],v.marketingCloudServer=v.audienceManagerServer="dpm.demdex.net",v.sdidParamExpiry=30;var D=null,P="MC",O="MCMID",N="MCIDTS",L="A",x="MCAID",B="AAM",V="MCAAMB",j="NONE",F=function(e){return!Object.prototype[e]},z=Q(v);v.FIELDS=w.FIELDS,v.cookieRead=function(e){return v.useLocalStorage?e===v.sessionCookieName?sessionStorage.getItem(e):localStorage.getItem(e):K.get(e)},v.cookieWrite=function(e,t,a){var n=""+t;if(v.useLocalStorage)return e===v.sessionCookieName?sessionStorage.setItem(e,n):localStorage.setItem(e,n);var r=v.cookieLifetime?(""+v.cookieLifetime).toUpperCase():"",i={expires:a,domain:v.cookieDomain,cookieLifetime:r};return v.configs&&v.configs.secureCookie&&"https:"===location.protocol&&(i.secure=!0),v.configs&&v.configs.sameSiteCookie&&"https:"===location.protocol&&(i.sameSite=w.SAME_SITE_VALUES[v.configs.sameSiteCookie.toUpperCase()]||"Lax"),K.set(e,n,i)},v.removeCookie=function(e){if(v.useLocalStorage)return e===v.sessionCookieName?sessionStorage.removeItem(e):localStorage.removeItem(e);var t={domain:v.cookieDomain};return v.configs&&v.configs.secureCookie&&"https:"===location.protocol&&(t.secure=!0),v.configs&&v.configs.sameSiteCookie&&"https:"===location.protocol&&(t.sameSite=w.SAME_SITE_VALUES[v.configs.sameSiteCookie.toUpperCase()]||"Lax"),K.remove(e,t)},v.resetState=function(e){e?v._mergeServerState(e):o()},v._isAllowedDone=!1,v._isAllowedFlag=!1,v.isAllowed=function(){return v._isAllowedDone||(v._isAllowedDone=!0,(v.cookieRead(v.cookieName)||v.cookieWrite(v.cookieName,"T",1))&&(v._isAllowedFlag=!0)),"T"===v.cookieRead(v.cookieName)&&v.removeCookie(v.cookieName),v._isAllowedFlag},v.setMarketingCloudVisitorID=function(e){v._setMarketingCloudFields(e)},v._use1stPartyMarketingCloudServer=!1,v.getMarketingCloudVisitorID=function(e,t){v.marketingCloudServer&&v.marketingCloudServer.indexOf(".demdex.net")<0&&(v._use1stPartyMarketingCloudServer=!0);var a=v._getAudienceManagerURLData("_setMarketingCloudFields"),n=a.url;return v._getRemoteField(O,n,e,t,a)};var X=function(e,t){var a={};v.getMarketingCloudVisitorID((function(){t.forEach((function(e){a[e]=v._getField(e,!0)})),-1!==t.indexOf("MCOPTOUT")?v.isOptedOut((function(t){a.MCOPTOUT=t,e(a)}),null,!0):e(a)}),!0)};v.getVisitorValues=function(e,t){var a={MCMID:{fn:v.getMarketingCloudVisitorID,args:[!0],context:v},MCOPTOUT:{fn:v.isOptedOut,args:[void 0,!0],context:v},MCAID:{fn:v.getAnalyticsVisitorID,args:[!0],context:v},MCAAMLH:{fn:v.getAudienceManagerLocationHint,args:[!0],context:v},MCAAMB:{fn:v.getAudienceManagerBlob,args:[!0],context:v}},n=t&&t.length?M.pluck(a,t):a;t&&-1===t.indexOf("MCAID")?X(e,t):q(n,e)},v._currentCustomerIDs={},v._customerIDsHashChanged=!1,v._newCustomerIDsHash="",v.setCustomerIDs=function(t,a){if(!v.isOptedOut()&&t){if(!M.isObject(t)||M.isObjectEmpty(t))return!1;var n,i,s,o;for(n in v._readVisitor(),t)if(F(n)&&(v._currentCustomerIDs.dataSources=v._currentCustomerIDs.dataSources||{},a=(i=t[n]).hasOwnProperty("hashType")?i.hashType:a,i))if("object"===e(i)){var d={};if(i.id){if(a){if(!(o=xe(Be(i.id),a)))return;i.id=o,d.hashType=a}d.id=i.id}null!=i.authState&&(d.authState=i.authState),v._currentCustomerIDs.dataSources[n]=d}else if(a){if(!(o=xe(Be(i),a)))return;v._currentCustomerIDs.dataSources[n]={id:o,hashType:a}}else v._currentCustomerIDs.dataSources[n]={id:i};var c=v.getCustomerIDs(!0),l=v._getField("MCCIDH"),u="";for(s in l||(l=0),c){var g=c[s];if(!M.isObjectEmpty(g))for(n in g)F(n)&&(u+=(u?"|":"")+n+"|"+((i=g[n]).id?i.id:"")+(i.authState?i.authState:""))}v._newCustomerIDsHash=String(v._hash(u)),v._newCustomerIDsHash!==l&&(v._customerIDsHashChanged=!0,v._mapCustomerIDs(r))}},v.syncIdentity=function(t,a){if(!v.isOptedOut()&&t){if(!M.isObject(t)||M.isObjectEmpty(t))return!1;var n,i,s,o,d;for(n in v._readVisitor(),t)if(F(n)&&(v._currentCustomerIDs.nameSpaces=v._currentCustomerIDs.nameSpaces||{},a=(i=t[n]).hasOwnProperty("hashType")?i.hashType:a,i&&"object"===e(i))){var c={};if(i.id){if(a){if(!(s=xe(Be(i.id),a)))return;i.id=s,c.hashType=a}c.id=i.id}null!=i.authState&&(c.authState=i.authState),i.dataSource&&(v._currentCustomerIDs.dataSources=v._currentCustomerIDs.dataSources||{},o=i.dataSource,v._currentCustomerIDs.dataSources[o]=c),v._currentCustomerIDs.nameSpaces[n]=c}var l=v.getCustomerIDs(!0),u=v._getField("MCCIDH"),g="";for(d in u||(u="0"),l){var p=l[d];if(!M.isObjectEmpty(p))for(n in p)F(n)&&(g+=(g?"|":"")+n+"|"+((i=p[n]).id?i.id:"")+(i.authState?i.authState:""))}v._newCustomerIDsHash=String(v._hash(g)),v._newCustomerIDsHash!==u&&(v._customerIDsHashChanged=!0,v._mapCustomerIDs(r))}},v.getCustomerIDs=function(e){v._readVisitor();var t,a,n={dataSources:{},nameSpaces:{}},r=v._currentCustomerIDs.dataSources;for(t in r)F(t)&&(a=r[t]).id&&(n.dataSources[t]||(n.dataSources[t]={}),n.dataSources[t].id=a.id,null!=a.authState?n.dataSources[t].authState=a.authState:n.dataSources[t].authState=C.AuthState.UNKNOWN,a.hashType&&(n.dataSources[t].hashType=a.hashType));var i=v._currentCustomerIDs.nameSpaces;for(t in i)F(t)&&(a=i[t]).id&&(n.nameSpaces[t]||(n.nameSpaces[t]={}),n.nameSpaces[t].id=a.id,null!=a.authState?n.nameSpaces[t].authState=a.authState:n.nameSpaces[t].authState=C.AuthState.UNKNOWN,a.hashType&&(n.nameSpaces[t].hashType=a.hashType));return e?n:n.dataSources},v.setAnalyticsVisitorID=function(e){v._setAnalyticsFields(e)},v.getAnalyticsVisitorID=function(e,t,a){if(!te.isTrackingServerPopulated()&&!a)return v._callCallback(e,[""]),"";var n="";if(a||(n=v.getMarketingCloudVisitorID((function(){v.getAnalyticsVisitorID(e,!0)}))),n||a){var r=a?v.marketingCloudServer:v.trackingServer,i="";v.loadSSL&&(a?v.marketingCloudServerSecure&&(r=v.marketingCloudServerSecure):v.trackingServerSecure&&(r=v.trackingServerSecure));var s={};if(r){var o="http"+(v.loadSSL?"s":"")+"://"+r+"/id",d="d_visid_ver="+v.version+"&mcorgid="+encodeURIComponent(v.marketingCloudOrgID)+(n?"&mid="+encodeURIComponent(n):"")+(v.idSyncDisable3rdPartySyncing||v.disableThirdPartyCookies?"&d_coppa=true":""),c=["s_c_il",v._in,"_set"+(a?"MarketingCloud":"Analytics")+"Fields"];i=o+"?"+d+"&callback=s_c_il%5B"+v._in+"%5D._set"+(a?"MarketingCloud":"Analytics")+"Fields",s.corsUrl=o+"?"+d,s.callback=c}return s.url=i,v._getRemoteField(a?O:x,i,e,t,s)}return""},v.getAudienceManagerLocationHint=function(e,t){if(v.getMarketingCloudVisitorID((function(){v.getAudienceManagerLocationHint(e,!0)}))){var a=v._getField(x);if(!a&&te.isTrackingServerPopulated()&&(a=v.getAnalyticsVisitorID((function(){v.getAudienceManagerLocationHint(e,!0)}))),a||!te.isTrackingServerPopulated()){var n=v._getAudienceManagerURLData(),r=n.url;return v._getRemoteField("MCAAMLH",r,e,t,n)}}return""},v.getLocationHint=v.getAudienceManagerLocationHint,v.getAudienceManagerBlob=function(e,t){if(v.getMarketingCloudVisitorID((function(){v.getAudienceManagerBlob(e,!0)}))){var a=v._getField(x);if(!a&&te.isTrackingServerPopulated()&&(a=v.getAnalyticsVisitorID((function(){v.getAudienceManagerBlob(e,!0)}))),a||!te.isTrackingServerPopulated()){var n=v._getAudienceManagerURLData(),r=n.url;return v._customerIDsHashChanged&&v._setFieldExpire(V,-1),v._getRemoteField(V,r,e,t,n)}}return""},v._supplementalDataIDCurrent="",v._supplementalDataIDCurrentConsumed={},v._supplementalDataIDLast="",
v._supplementalDataIDLastConsumed={},v.getSupplementalDataID=function(e,t){v._supplementalDataIDCurrent||t||(v._supplementalDataIDCurrent=v._generateID(1));var a=v._supplementalDataIDCurrent;return v._supplementalDataIDLast&&!v._supplementalDataIDLastConsumed[e]?(a=v._supplementalDataIDLast,v._supplementalDataIDLastConsumed[e]=!0):a&&(v._supplementalDataIDCurrentConsumed[e]&&(v._supplementalDataIDLast=v._supplementalDataIDCurrent,v._supplementalDataIDLastConsumed=v._supplementalDataIDCurrentConsumed,v._supplementalDataIDCurrent=a=t?"":v._generateID(1),v._supplementalDataIDCurrentConsumed={}),a&&(v._supplementalDataIDCurrentConsumed[e]=!0)),a};var Z=!1;v._liberatedOptOut=null,v.getOptOut=function(e,t){var a=v._getAudienceManagerURLData("_setMarketingCloudFields"),n=a.url;if(u())return v._getRemoteField("MCOPTOUT",n,e,t,a);if(v._registerCallback("liberatedOptOut",e),null!==v._liberatedOptOut)return v._callAllCallbacks("liberatedOptOut",[v._liberatedOptOut]),Z=!1,v._liberatedOptOut;if(Z)return null;Z=!0;var r="liberatedGetOptOut";return a.corsUrl=a.corsUrl.replace(/\.demdex\.net\/id\?/,".demdex.net/optOutStatus?"),a.callback=[r],b[r]=function(e){if(e===Object(e)){var t,a,n=M.parseOptOut(e,t,j);t=n.optOut,a=1e3*n.d_ottl,v._liberatedOptOut=t,setTimeout((function(){v._liberatedOptOut=null}),a)}v._callAllCallbacks("liberatedOptOut",[t]),Z=!1},z.fireCORS(a),null},v.isOptedOut=function(e,t,a){t||(t=C.OptOut.GLOBAL);var n=v.getOptOut((function(a){var n=a===C.OptOut.GLOBAL||a.indexOf(t)>=0;v._callCallback(e,[n])}),a);return n?n===C.OptOut.GLOBAL||n.indexOf(t)>=0:null};var ee={subscribed:!1,callbacks:[]};v.onReceiveEcid=function(e){if(u())return v.getMarketingCloudVisitorID(e,!0);ee.subscribed=!0,e&&"function"==typeof e&&ee.callbacks.push(e)},v._fields=null,v._fieldsExpired=null,v._hash=function(e){var t,a=0;if(e)for(t=0;t<e.length;t++)a=(a<<5)-a+e.charCodeAt(t),a&=a;return a},v._generateID=G,v._generateLocalMID=function(){var e=v._generateID(0);return re.isClientSideMarketingCloudVisitorID=!0,e},v._callbackList=null,v._callCallback=function(e,t){try{"function"==typeof e?e.apply(T,t):e[1].apply(e[0],t)}catch(e){}},v._registerCallback=function(e,t){t&&(null==v._callbackList&&(v._callbackList={}),null==v._callbackList[e]&&(v._callbackList[e]=[]),v._callbackList[e].push(t))},v._callAllCallbacks=function(e,t){if(null!=v._callbackList){var a=v._callbackList[e];if(a)for(;a.length>0;)v._callCallback(a.shift(),t)}},v._addQuerystringParam=function(e,t,a,n){var r=encodeURIComponent(t)+"="+encodeURIComponent(a),i=te.parseHash(e),s=te.hashlessUrl(e);if(-1===s.indexOf("?"))return s+"?"+r+i;var o=s.split("?"),d=o[0]+"?",c=o[1];return d+te.addQueryParamAtLocation(c,r,n)+i},v._extractParamFromUri=function(e,t){var a=new RegExp("[\\?&#]"+t+"=([^&#]*)").exec(e);if(a&&a.length)return decodeURIComponent(a[1])},v._parseAdobeMcFromUrl=i(J.ADOBE_MC),v._parseAdobeMcSdidFromUrl=i(J.ADOBE_MC_SDID),v._attemptToPopulateSdidFromUrl=function(e){var a=v._parseAdobeMcSdidFromUrl(e),n=1e9;a&&a.TS&&(n=te.getTimestampInSeconds()-a.TS),a&&a.SDID&&a.MCORGID===t&&n<v.sdidParamExpiry&&(v._supplementalDataIDCurrent=a.SDID,v._supplementalDataIDCurrentConsumed.SDID_URL_PARAM=!0)},v._attemptToPopulateIdsFromUrl=function(){var e=v._parseAdobeMcFromUrl();if(e&&e.TS){var a=te.getTimestampInSeconds()-e.TS;if(Math.floor(a/60)>J.ADOBE_MC_TTL_IN_MIN||e.MCORGID!==t)return;s(e)}},v._mergeServerState=function(e){if(e)try{if((e=function(e){return te.isObject(e)?e:JSON.parse(e)}(e))[v.marketingCloudOrgID]){var t=e[v.marketingCloudOrgID];!function(e){te.isObject(e)&&v.setCustomerIDs(e)}(t.customerIDs),o(t.sdid)}}catch(e){throw new Error("`serverState` has an invalid format.")}},v._timeout=null,v._loadData=function(e,t,a,n){t=v._addQuerystringParam(t,"d_fieldgroup",e,1),n.url=v._addQuerystringParam(n.url,"d_fieldgroup",e,1),n.corsUrl=v._addQuerystringParam(n.corsUrl,"d_fieldgroup",e,1),re.fieldGroupObj[e]=!0,n===Object(n)&&n.corsUrl&&"XMLHttpRequest"===z.corsMetadata.corsType&&z.fireCORS(n,a,e)},v._clearTimeout=function(e){null!=v._timeout&&v._timeout[e]&&(clearTimeout(v._timeout[e]),v._timeout[e]=0)},v._settingsDigest=0,v._getSettingsDigest=function(){if(!v._settingsDigest){var e=v.version;v.audienceManagerServer&&(e+="|"+v.audienceManagerServer),v.audienceManagerServerSecure&&(e+="|"+v.audienceManagerServerSecure),v._settingsDigest=v._hash(e)}return v._settingsDigest},v._readVisitorDone=!1,v._readVisitor=function(){if(!v._readVisitorDone){v._readVisitorDone=!0;var e,t,a,n,r,i,s=v._getSettingsDigest(),o=!1,d=v.cookieRead(v.cookieName),c=new Date;if(d||S||v.discardTrackingServerECID||(d=v.cookieRead(J.FIRST_PARTY_SERVER_COOKIE)),null==v._fields&&(v._fields={}),d&&"T"!==d)for((d=d.split("|"))[0].match(/^[\-0-9]+$/)&&(parseInt(d[0],10)!==s&&(o=!0),d.shift()),d.length%2==1&&d.pop(),e=0;e<d.length;e+=2)a=(t=d[e].split("-"))[0],n=d[e+1],t.length>1?(r=parseInt(t[1],10),i=t[1].indexOf("s")>0):(r=0,i=!1),o&&("MCCIDH"===a&&(n=""),r>0&&(r=c.getTime()/1e3-60)),a&&n&&(v._setField(a,n,1),r>0&&(v._fields["expire"+a]=r+(i?"s":""),(c.getTime()>=1e3*r||i&&!v.cookieRead(v.sessionCookieName))&&(v._fieldsExpired||(v._fieldsExpired={}),v._fieldsExpired[a]=!0)));!v._getField(x)&&te.isTrackingServerPopulated()&&(d=v.cookieRead("s_vi"))&&(d=d.split("|")).length>1&&d[0].indexOf("v1")>=0&&((e=(n=d[1]).indexOf("["))>=0&&(n=n.substring(0,e)),n&&n.match(J.VALID_VISITOR_ID_REGEX)&&v._setField(x,n))}},v._appendVersionTo=function(e){var t="vVersion|"+v.version,a=e?v._getCookieVersion(e):null;return a?Y.areVersionsDifferent(a,v.version)&&(e=e.replace(J.VERSION_REGEX,t)):e+=(e?"|":"")+t,e},v._writeVisitor=function(){var e,t,a=v._getSettingsDigest();for(e in v._fields)F(e)&&v._fields[e]&&"expire"!==e.substring(0,6)&&(t=v._fields[e],a+=(a?"|":"")+e+(v._fields["expire"+e]?"-"+v._fields["expire"+e]:"")+"|"+t);a=v._appendVersionTo(a),v.cookieWrite(v.cookieName,a,1)},v._getField=function(e,t){return null==v._fields||!t&&v._fieldsExpired&&v._fieldsExpired[e]?null:v._fields[e]},v._setField=function(e,t,a){null==v._fields&&(v._fields={}),v._fields[e]=t,a||v._writeVisitor()},v._getFieldList=function(e,t){var a=v._getField(e,t);return a?a.split("*"):null},v._setFieldList=function(e,t,a){v._setField(e,t?t.join("*"):"",a)},v._getFieldMap=function(e,t){var a=v._getFieldList(e,t);if(a){var n,r={};for(n=0;n<a.length;n+=2)r[a[n]]=a[n+1];return r}return null},v._setFieldMap=function(e,t,a){var n,r=null;if(t)for(n in r=[],t)F(n)&&(r.push(n),r.push(t[n]));v._setFieldList(e,r,a)},v._setFieldExpire=function(e,t,a){var n=new Date;n.setTime(n.getTime()+1e3*t),null==v._fields&&(v._fields={}),v._fields["expire"+e]=Math.floor(n.getTime()/1e3)+(a?"s":""),t<0?(v._fieldsExpired||(v._fieldsExpired={}),v._fieldsExpired[e]=!0):v._fieldsExpired&&(v._fieldsExpired[e]=!1),a&&(v.cookieRead(v.sessionCookieName)||v.cookieWrite(v.sessionCookieName,"1"))},v._findVisitorID=function(t){return t&&("object"===e(t)&&(t=t.d_mid?t.d_mid:t.visitorID?t.visitorID:t.id?t.id:t.uuid?t.uuid:""+t),t&&"NOTARGET"===(t=t.toUpperCase())&&(t=j),t&&(t===j||t.match(J.VALID_VISITOR_ID_REGEX))||(t="")),t},v._setFields=function(t,a){if(v._clearTimeout(t),null!=v._loading&&(v._loading[t]=!1),re.fieldGroupObj[t]&&re.setState(t,!1),t===P){!0!==re.isClientSideMarketingCloudVisitorID&&(re.isClientSideMarketingCloudVisitorID=!1);var n=v._getField(O);if(!n||v.overwriteCrossDomainMCIDAndAID){if(!(n="object"===e(a)&&a.mid?a.mid:v._findVisitorID(a))){if(v._use1stPartyMarketingCloudServer&&!v.tried1stPartyMarketingCloudServer)return v.tried1stPartyMarketingCloudServer=!0,void v.getAnalyticsVisitorID(null,!1,!0);n=v._generateLocalMID()}v._setField(O,n)}n&&n!==j||(n=""),"object"===e(a)&&((a.d_region||a.dcs_region||a.d_blob||a.blob)&&v._setFields(B,a),v._use1stPartyMarketingCloudServer&&a.mid&&v._setFields(L,{id:a.id})),v._callAllCallbacks(O,[n])}if(t===B&&"object"===e(a)){var r=604800;null!=a.id_sync_ttl&&a.id_sync_ttl&&(r=parseInt(a.id_sync_ttl,10));var i=ae.getRegionAndCheckIfChanged(a,r);v._callAllCallbacks("MCAAMLH",[i]);var s=v._getField(V);(a.d_blob||a.blob)&&((s=a.d_blob)||(s=a.blob),v._setFieldExpire(V,r),v._setField(V,s)),s||(s=""),v._callAllCallbacks(V,[s]),!a.error_msg&&v._newCustomerIDsHash&&v._setField("MCCIDH",v._newCustomerIDsHash)}if(t===L){var o=v._getField(x);o&&!v.overwriteCrossDomainMCIDAndAID||((o=v._findVisitorID(a))?o!==j&&v._setFieldExpire(V,-1):o=j,v._setField(x,o)),o&&o!==j||(o=""),v._callAllCallbacks(x,[o])}if(v.idSyncDisableSyncs||v.disableIdSyncs)ae.idCallNotProcesssed=!0;else{ae.idCallNotProcesssed=!1;var d={};d.ibs=a.ibs,d.subdomain=a.subdomain,ae.processIDCallData(d)}if(a===Object(a)){var c,l;u()&&v.isAllowed()&&(c=v._getField("MCOPTOUT"));var g=M.parseOptOut(a,c,j);c=g.optOut,l=g.d_ottl,v._setFieldExpire("MCOPTOUT",l,!0),v._setField("MCOPTOUT",c),v._callAllCallbacks("MCOPTOUT",[c])}},v._loading=null,v._getRemoteField=function(e,t,a,n,r){var i,s="",o=te.isFirstPartyAnalyticsVisitorIDCall(e),d={MCAAMLH:!0,MCAAMB:!0};if(u()&&v.isAllowed())if(v._readVisitor(),!(!(s=v._getField(e,!0===d[e]))||v._fieldsExpired&&v._fieldsExpired[e])||v.disableThirdPartyCalls&&!o)s||(e===O?(v._registerCallback(e,a),s=v._generateLocalMID(),v.setMarketingCloudVisitorID(s)):e===x?(v._registerCallback(e,a),s="",v.setAnalyticsVisitorID(s)):(s="",n=!0));else if(e===O||"MCOPTOUT"===e?i=P:"MCAAMLH"===e||e===V?i=B:e===x&&(i=L),i)return!t||null!=v._loading&&v._loading[i]||(null==v._loading&&(v._loading={}),v._loading[i]=!0,i===B&&(A=0),v._loadData(i,t,(function(t){if(!v._getField(e)){t&&re.setState(i,!0);var a="";e===O?a=v._generateLocalMID():i===B&&(a={error_msg:"timeout"}),v._setFields(i,a)}}),r)),v._registerCallback(e,a),s||(t||v._setFields(i,{id:j}),"");return e!==O&&e!==x||s!==j||(s="",n=!0),a&&n&&v._callCallback(a,[s]),e===O&&ee.subscribed&&(ee.callbacks&&ee.callbacks.length&&ee.callbacks.forEach((function(e){v._callCallback(e,[s])})),ee.subscribed=!1,ee.callbacks.length=0),s},v._setMarketingCloudFields=function(e){v._readVisitor(),v._setFields(P,e)},v._mapCustomerIDs=function(e){v.getAudienceManagerBlob(e,!0)},v._setAnalyticsFields=function(e){v._readVisitor(),v._setFields(L,e)},v._setAudienceManagerFields=function(e){v._readVisitor(),v._setFields(B,e)},v._getAudienceManagerURLData=function(e){var t=v.audienceManagerServer,a="",n=v._getField(O),r=v._getField(V,!0),i=v._getField(x),s=i&&i!==j?"&d_cid_ic=AVID%01"+encodeURIComponent(i):"";if(v.loadSSL&&v.audienceManagerServerSecure&&(t=v.audienceManagerServerSecure),t){var o,d,c,l=v.getCustomerIDs(!0);if(l)for(d in l){var u=l[d];if(!M.isObjectEmpty(u)){var g="nameSpaces"===d?"&d_cid_ns=":"&d_cid_ic=";for(o in u)F(o)&&(c=u[o],s+=g+encodeURIComponent(o)+"%01"+encodeURIComponent(c.id?c.id:"")+(c.authState?"%01"+c.authState:""))}}e||(e="_setAudienceManagerFields");var p="http"+(v.loadSSL?"s":"")+"://"+t+"/id",m="d_visid_ver="+v.version+(k&&-1!==p.indexOf("demdex.net")?"&gdpr=1&gdpr_consent="+k:"")+(A&&-1!==p.indexOf("demdex.net")?"&d_cf="+A:"")+"&d_rtbd=json&d_ver=2"+(!n&&v._use1stPartyMarketingCloudServer?"&d_verify=1":"")+"&d_orgid="+encodeURIComponent(v.marketingCloudOrgID)+"&d_nsid="+(v.idSyncContainerID||0)+(n?"&d_mid="+encodeURIComponent(n):"")+(v.idSyncDisable3rdPartySyncing||v.disableThirdPartyCookies?"&d_coppa=true":"")+(!0===D?"&d_coop_safe=1":!1===D?"&d_coop_unsafe=1":"")+(r?"&d_blob="+encodeURIComponent(r):"")+s,h=["s_c_il",v._in,e];return{url:a=p+"?"+m+"&d_cb=s_c_il%5B"+v._in+"%5D."+e,corsUrl:p+"?"+m,callback:h}}return{url:a}},v.appendVisitorIDsTo=function(e){try{var t=[[O,v._getField(O)],[x,v._getField(x)],["MCORGID",v.marketingCloudOrgID]];return v._addQuerystringParam(e,J.ADOBE_MC,d(t))}catch(t){return e}},v.appendSupplementalDataIDTo=function(e,t){if(!(t=t||v.getSupplementalDataID(te.generateRandomString(),!0)))return e;try{var a=d([["SDID",t],["MCORGID",v.marketingCloudOrgID]]);return v._addQuerystringParam(e,J.ADOBE_MC_SDID,a)}catch(t){return e}};var te={parseHash:function(e){var t=e.indexOf("#");return t>0?e.substr(t):""},hashlessUrl:function(e){var t=e.indexOf("#");return t>0?e.substr(0,t):e},addQueryParamAtLocation:function(e,t,a){var n=e.split("&");return a=null!=a?a:n.length,n.splice(a,0,t),n.join("&")},isFirstPartyAnalyticsVisitorIDCall:function(e,t,a){return e===x&&(t||(t=v.trackingServer),a||(a=v.trackingServerSecure),!("string"!=typeof(n=v.loadSSL?a:t)||!n.length)&&n.indexOf("2o7.net")<0&&n.indexOf("omtrdc.net")<0);var n},isObject:function(e){return Boolean(e&&e===Object(e))},removeCookie:function(e){K.remove(e,{domain:v.cookieDomain})},isTrackingServerPopulated:function(){return!!v.trackingServer||!!v.trackingServerSecure},getTimestampInSeconds:function(){return Math.round((new Date).getTime()/1e3)},parsePipeDelimetedKeyValues:function(e){return e.split("|").reduce((function(e,t){var a=t.split("=");return e[a[0]]=decodeURIComponent(a[1]),e}),{})},generateRandomString:function(e){e=e||5;for(var t="",a="abcdefghijklmnopqrstuvwxyz0123456789";e--;)t+=a[Math.floor(Math.random()*a.length)];return t},normalizeBoolean:function(e){return"true"===e||"false"!==e&&e},parseBoolean:function(e){return"true"===e||"false"!==e&&null},replaceMethodsWithFunction:function(e,t){for(var a in e)e.hasOwnProperty(a)&&"function"==typeof e[a]&&(e[a]=t);return e}};v._helpers=te;var ae=$(v,C);v._destinationPublishing=ae,v.timeoutMetricsLog=[];var ne,re={isClientSideMarketingCloudVisitorID:null,MCIDCallTimedOut:null,AnalyticsIDCallTimedOut:null,AAMIDCallTimedOut:null,fieldGroupObj:{},setState:function(e,t){switch(e){case P:!1===t?!0!==this.MCIDCallTimedOut&&(this.MCIDCallTimedOut=!1):this.MCIDCallTimedOut=t;break;case L:!1===t?!0!==this.AnalyticsIDCallTimedOut&&(this.AnalyticsIDCallTimedOut=!1):this.AnalyticsIDCallTimedOut=t;break;case B:!1===t?!0!==this.AAMIDCallTimedOut&&(this.AAMIDCallTimedOut=!1):this.AAMIDCallTimedOut=t}}};v.isClientSideMarketingCloudVisitorID=function(){return re.isClientSideMarketingCloudVisitorID},v.MCIDCallTimedOut=function(){return re.MCIDCallTimedOut},v.AnalyticsIDCallTimedOut=function(){return re.AnalyticsIDCallTimedOut},v.AAMIDCallTimedOut=function(){return re.AAMIDCallTimedOut},v.idSyncGetOnPageSyncInfo=function(){return v._readVisitor(),v._getField("MCSYNCSOP")},v.idSyncByURL=function(e){if(!v.isOptedOut()){var t=c(e||{});if(t.error)return t.error;var a,n,r=e.url,i=encodeURIComponent,s=ae;return r=r.replace(/^https:/,"").replace(/^http:/,""),a=M.encodeAndBuildRequest(["",e.dpid,e.dpuuid||""],","),n=["ibs",i(e.dpid),"img",i(r),t.ttl,"",a],s.addMessage(n.join("|")),s.requestToProcess(),"Successfully queued"}},v.idSyncByDataSource=function(e){if(!v.isOptedOut())return e===Object(e)&&"string"==typeof e.dpuuid&&e.dpuuid.length?(e.url="//dpm.demdex.net/ibs:dpid="+e.dpid+"&dpuuid="+e.dpuuid,v.idSyncByURL(e)):"Error: config or config.dpuuid is empty"},Re(v,ae),v._getCookieVersion=function(e){e=e||v.cookieRead(v.cookieName);var t=J.VERSION_REGEX.exec(e);return t&&t.length>1?t[1]:null},v._resetAmcvCookie=function(e){var t=v._getCookieVersion();t&&!Y.isLessThan(t,e)||v.removeCookie(v.cookieName)},v.setAsCoopSafe=function(){D=!0},v.setAsCoopUnsafe=function(){D=!1},function(){if(v.configs=Object.create(null),te.isObject(a))for(var e in a)F(e)&&(v[e]=a[e],v.configs[e]=a[e])}(),g(),v.init=function(){l()&&(y.optIn.fetchPermissions(f,!0),!y.optIn.isApproved(y.optIn.Categories.ECID))||ne||(ne=!0,function(){if(te.isObject(a)){v.idSyncContainerID=v.idSyncContainerID||0,D="boolean"==typeof v.isCoopSafe?v.isCoopSafe:te.parseBoolean(v.isCoopSafe),v.resetBeforeVersion&&v._resetAmcvCookie(v.resetBeforeVersion),v._attemptToPopulateIdsFromUrl(),v._attemptToPopulateSdidFromUrl(),v._readVisitor();var e=v._getField(N),t=Math.ceil((new Date).getTime()/J.MILLIS_PER_DAY);v.idSyncDisableSyncs||v.disableIdSyncs||!ae.canMakeSyncIDCall(e,t)||(v._setFieldExpire(V,-1),v._setField(N,t)),v.getMarketingCloudVisitorID(),v.getAudienceManagerLocationHint(),v.getAudienceManagerBlob(),v._mergeServerState(v.serverState)}else v._attemptToPopulateIdsFromUrl(),v._attemptToPopulateSdidFromUrl()}(),function(){if(!v.idSyncDisableSyncs&&!v.disableIdSyncs){ae.checkDPIframeSrc();var e=function(){var e=ae;e.readyToAttachIframe()&&e.attachIframe()};T.addEventListener("load",(function(){C.windowLoaded=!0,e()}));try{W.receiveMessage((function(e){ae.receiveMessage(e.data)}),ae.iframeHost)}catch(e){}}}(),v.whitelistIframeDomains&&J.POST_MESSAGE_ENABLED&&(v.whitelistIframeDomains=v.whitelistIframeDomains instanceof Array?v.whitelistIframeDomains:[v.whitelistIframeDomains],v.whitelistIframeDomains.forEach((function(e){var a=new R(t,e),n=H(v,a);W.receiveMessage(n,e)}))))}};je.config=Z,b.Visitor=je;var Fe=je,He=function(e){if(M.isObject(e))return Object.keys(e).filter((function(t){return""!==e[t]&&Z.getConfigs()[t]})).reduce((function(t,a){var n=Z.normalizeConfig(a,e[a]),r=M.normalizeBoolean(n);return t[a]=r,t}),Object.create(null))},qe=Ne.OptIn,Ke=Ne.IabPlugin;Fe.getInstance=function(e,t){if(!e)throw new Error("Visitor requires Adobe Marketing Cloud Org ID.");e.indexOf("@")<0&&(e+="@AdobeOrg");var a=function(){var t=b.s_c_il;if(t)for(var a=0;a<t.length;a++){var n=t[a];if(n&&"Visitor"===n._c&&n.marketingCloudOrgID===e)return n}}();if(a)return a;var n=He(t)||{};!function(e){b.adobe.optIn=b.adobe.optIn||function(){var t=M.pluck(e,["doesOptInApply","previousPermissions","preOptInApprovals","isOptInStorageEnabled","optInStorageExpiry","isIabContext"]),a=e.optInCookieDomain||e.cookieDomain;a=(a=a||U())===window.location.hostname?"":a,t.optInCookieDomain=a;var n=new qe(t,{cookies:K});if(t.isIabContext&&t.doesOptInApply){var r=new Ke;n.registerPlugin(r)}return n}()}(n||{});var r=e.split("").reverse().join(""),i=new Fe(e,null,r);n.cookieDomain&&(i.cookieDomain=n.cookieDomain),n.sameSiteCookie&&n.secureCookie&&(i.configs={sameSiteCookie:n.sameSiteCookie,secureCookie:n.secureCookie}),b.s_c_il.splice(--b.s_c_in,1);var s=M.getIeVersion();if("number"==typeof s&&s<10)return i._helpers.replaceMethodsWithFunction(i,(function(){}));var o=function(){try{return b.self!==b.parent}catch(e){return!0}}()&&!function(e){return e.cookieWrite("TEST_AMCV_COOKIE","T",1),"T"===e.cookieRead("TEST_AMCV_COOKIE")&&(e.removeCookie("TEST_AMCV_COOKIE"),!0)}(i)&&b.parent?new x(e,n,i,b.parent):new Fe(e,n,r);return i=null,o.init(),o},function(){function e(){Fe.windowLoaded=!0}b.addEventListener?b.addEventListener("load",e):b.attachEvent&&b.attachEvent("onload",e),Fe.codeLoadEnd=(new Date).getTime()}()}(),Visitor)}},"adobe-mcid/src/view/utils/timeUnits.js":{script:function(e){var t={Hours:3600,Days:86400,Weeks:604800,Months:2592e3,Years:31536e3};e.exports=t}}}},core:{displayName:"Core",hostedLibFilesBaseUrl:"https://lightning.cartoonnetwork.co.uk/launch/7be62238e4c3/b95cb8f58679/a452bc00f42f/hostedLibFiles/EPcfb4767bc0bd40d0af2245ed4e7d1cd4/",modules:{"core/src/lib/dataElements/customCode.js":{name:"custom-code",displayName:"Custom Code",script:function(e){"use strict";e.exports=function(e,t){return e.source(t)}}},"core/src/lib/events/pageBottom.js":{name:"page-bottom",displayName:"Page Bottom",script:function(e,t,a){"use strict";var n=a("./helpers/pageLifecycleEvents");e.exports=function(e,t){n.registerPageBottomTrigger(t)}}},"core/src/lib/actions/customCode.js":{name:"custom-code",displayName:"Custom Code",script:function(e,t,a,n){"use strict";var r,i,s,o,d=a("@adobe/reactor-document"),c=a("@adobe/reactor-promise"),l=a("./helpers/decorateCode"),u=a("./helpers/loadCodeSequentially"),g=a("../../../node_modules/postscribe/dist/postscribe"),p=a("./helpers/unescapeHtmlCode"),m=a("../helpers/findPageScript").getTurbine,h=(i=function(e){g(d.body,e,{beforeWriteToken:function(e){var t=e.tagName&&e.tagName.toLowerCase();return r&&"script"===t&&(e.attrs.nonce=r),"script"!==t&&"style"!==t||(Object.keys(e.attrs||{}).forEach((function(t){e.attrs[t]=p(e.attrs[t])})),e.src&&(e.src=p(e.src))),e},error:function(e){n.logger.error(e.msg)}})},s=[],o=function(){if(d.body)for(;s.length;)i(s.shift());else setTimeout(o,20)},function(e){s.push(e),o()}),f=function(){if(d.currentScript)return d.currentScript.async;var e=m();return!e||e.async}();e.exports=function(e,t){var a;r=n.getExtensionSettings().cspNonce;var i={settings:e,event:t},s=i.settings.source;if(s)return i.settings.isExternal?u(s).then((function(e){return e?(a=l(i,e),h(a.code),a.promise):c.resolve()})):(a=l(i,s),f||"loading"!==d.readyState?h(a.code):d.write&&!1===n.propertySettings.ruleComponentSequencingEnabled?d.write(a.code):h(a.code),a.promise)}}},"core/src/lib/events/domReady.js":{name:"dom-ready",displayName:"DOM Ready",script:function(e,t,a){"use strict";var n=a("./helpers/pageLifecycleEvents");e.exports=function(e,t){n.registerDomReadyTrigger(t)}}},"core/src/lib/events/helpers/pageLifecycleEvents.js":{script:function(e,t,a){"use strict";var n=a("@adobe/reactor-window"),r=a("@adobe/reactor-document"),i=-1!==n.navigator.appVersion.indexOf("MSIE 10"),s="WINDOW_LOADED",o="DOM_READY",d="PAGE_BOTTOM",c=[d,o,s],l=function(e,t){return{element:e,target:e,nativeEvent:t}},u={};c.forEach((function(e){u[e]=[]}));var g=function(e,t){c.slice(0,m(e)+1).forEach((function(e){h(t,e)}))},p=function(){return"complete"===r.readyState?s:"interactive"===r.readyState?i?null:o:void 0},m=function(e){return c.indexOf(e)},h=function(e,t){u[t].forEach((function(t){f(e,t)})),u[t]=[]},f=function(e,t){var a=t.trigger,n=t.syntheticEventFn;a(n?n(e):null)};n._satellite=n._satellite||{},n._satellite.pageBottom=g.bind(null,d),r.addEventListener("DOMContentLoaded",g.bind(null,o),!0),n.addEventListener("load",g.bind(null,s),!0),n.setTimeout((function(){var e=p();e&&g(e)}),0),e.exports={registerLibraryLoadedTrigger:function(e){e()},registerPageBottomTrigger:function(e){u[d].push({trigger:e})},registerDomReadyTrigger:function(e){u[o].push({trigger:e,syntheticEventFn:l.bind(null,r)})},registerWindowLoadedTrigger:function(e){u[s].push({trigger:e,syntheticEventFn:l.bind(null,n)})}}}},"core/src/lib/actions/helpers/decorateCode.js":{script:function(e,t,a){"use strict";var n=a("./decorators/decorateGlobalJavaScriptCode"),r=a("./decorators/decorateNonGlobalJavaScriptCode"),i={javascript:function(e,t){return e.settings.global?n(e,t):r(e,t)},html:a("./decorators/decorateHtmlCode")};e.exports=function(e,t){return i[e.settings.language](e,t)}}},"core/src/lib/actions/helpers/loadCodeSequentially.js":{script:function(e,t,a){"use strict";var n=a("@adobe/reactor-promise"),r=a("./getSourceByUrl"),i=n.resolve();e.exports=function(e){var t=new n((function(t){var a=r(e);n.all([a,i]).then((function(e){var a=e[0];t(a)}))}));return i=t,t}}},"core/node_modules/postscribe/dist/postscribe.js":{script:function(e,t){var a,n;a=this,n=function(){return function(e){function t(n){if(a[n])return a[n].exports;var r=a[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var r=n(a(1));e.exports=r.default},function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function i(){}function s(){var e=m.shift();if(e){var t=u.last(e);t.afterDequeue(),e.stream=o.apply(void 0,e),t.afterStreamStart()}}function o(e,t,a){function n(e){e=a.beforeWrite(e),h.write(e),a.afterWrite(e)}(h=new l.default(e,a)).id=p++,h.name=a.name||h.id,d.streams[h.name]=h;var r=e.ownerDocument,o={close:r.close,open:r.open,write:r.write,writeln:r.writeln};c(r,{close:i,open:i,write:function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return n(t.join(""))},writeln:function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return n(t.join("")+"\n")}});var u=h.win.onerror||i;return h.win.onerror=function(e,t,n){a.error({msg:e+" - "+t+": "+n}),u.apply(h.win,[e,t,n])},h.write(t,(function(){c(r,o),h.win.onerror=u,a.done(),h=null,s()})),h}function d(e,t,a){if(u.isFunction(a))a={done:a};else if("clear"===a)return m=[],h=null,void(p=0);a=u.defaults(a,g);var n=[e=/^#/.test(e)?window.document.getElementById(e.substr(1)):e.jquery?e[0]:e,t,a];return e.postscribe={cancel:function(){n.stream?n.stream.abort():n[1]=i}},a.beforeEnqueue(n),m.push(n),h||s(),e.postscribe}t.__esModule=!0;var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=d;var l=r(a(2)),u=n(a(4)),g={afterAsync:i,afterDequeue:i,afterStreamStart:i,afterWrite:i,autoFix:!0,beforeEnqueue:i,beforeWriteToken:function(e){return e},beforeWrite:function(e){return e},done:i,error:function(e){throw new Error(e.msg)},releaseAsync:!1},p=0,m=[],h=null;c(d,{streams:{},queue:m,WriteStream:l.default})},function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){var a=g+t,n=e.getAttribute(a);return l.existy(n)?String(n):n}function o(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=g+t;l.existy(a)&&""!==a?e.setAttribute(n,a):e.removeAttribute(n)}t.__esModule=!0;var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},c=r(a(3)),l=n(a(4)),u=!1,g="data-ps-",p="ps-style",m="ps-script",h=function(){function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,e),this.root=t,this.options=a,this.doc=t.ownerDocument,this.win=this.doc.defaultView||this.doc.parentWindow,this.parser=new c.default("",{autoFix:a.autoFix}),this.actuals=[t],this.proxyHistory="",this.proxyRoot=this.doc.createElement(t.nodeName),this.scriptStack=[],this.writeQueue=[],o(this.proxyRoot,"proxyof",0)}return e.prototype.write=function(){var e;for((e=this.writeQueue).push.apply(e,arguments);!this.deferredRemote&&this.writeQueue.length;){var t=this.writeQueue.shift();l.isFunction(t)?this._callFunction(t):this._writeImpl(t)}},e.prototype._callFunction=function(e){var t={type:"function",value:e.name||e.toString()};this._onScriptStart(t),e.call(this.win,this.doc),this._onScriptDone(t)},e.prototype._writeImpl=function(e){this.parser.append(e);for(var t=void 0,a=void 0,n=void 0,r=[];(t=this.parser.readToken())&&!(a=l.isScript(t))&&!(n=l.isStyle(t));)(t=this.options.beforeWriteToken(t))&&r.push(t);r.length>0&&this._writeStaticTokens(r),a&&this._handleScriptToken(t),n&&this._handleStyleToken(t)},e.prototype._writeStaticTokens=function(e){var t=this._buildChunk(e);return t.actual?(t.html=this.proxyHistory+t.actual,this.proxyHistory+=t.proxy,this.proxyRoot.innerHTML=t.html,u&&(t.proxyInnerHTML=this.proxyRoot.innerHTML),this._walkChunk(),u&&(t.actualInnerHTML=this.root.innerHTML),t):null},e.prototype._buildChunk=function(e){for(var t=this.actuals.length,a=[],n=[],r=[],i=e.length,s=0;s<i;s++){var o=e[s],d=o.toString();if(a.push(d),o.attrs){if(!/^noscript$/i.test(o.tagName)){var c=t++;n.push(d.replace(/(\/?>)/," "+g+"id="+c+" $1")),o.attrs.id!==m&&o.attrs.id!==p&&r.push("atomicTag"===o.type?"":"<"+o.tagName+" "+g+"proxyof="+c+(o.unary?" />":">"))}}else n.push(d),r.push("endTag"===o.type?d:"")}return{tokens:e,raw:a.join(""),actual:n.join(""),proxy:r.join("")}},e.prototype._walkChunk=function(){for(var e=void 0,t=[this.proxyRoot];l.existy(e=t.shift());){var a=1===e.nodeType;if(!a||!s(e,"proxyof")){a&&(this.actuals[s(e,"id")]=e,o(e,"id"));var n=e.parentNode&&s(e.parentNode,"proxyof");n&&this.actuals[n].appendChild(e)}t.unshift.apply(t,l.toArray(e.childNodes))}},e.prototype._handleScriptToken=function(e){var t=this,a=this.parser.clear();a&&this.writeQueue.unshift(a),e.src=e.attrs.src||e.attrs.SRC,(e=this.options.beforeWriteToken(e))&&(e.src&&this.scriptStack.length?this.deferredRemote=e:this._onScriptStart(e),this._writeScriptToken(e,(function(){t._onScriptDone(e)})))},e.prototype._handleStyleToken=function(e){var t=this.parser.clear();t&&this.writeQueue.unshift(t),e.type=e.attrs.type||e.attrs.TYPE||"text/css",(e=this.options.beforeWriteToken(e))&&this._writeStyleToken(e),t&&this.write()},e.prototype._writeStyleToken=function(e){var t=this._buildStyle(e);this._insertCursor(t,p),e.content&&(t.styleSheet&&!t.sheet?t.styleSheet.cssText=e.content:t.appendChild(this.doc.createTextNode(e.content)))},e.prototype._buildStyle=function(e){var t=this.doc.createElement(e.tagName);return t.setAttribute("type",e.type),l.eachKey(e.attrs,(function(e,a){t.setAttribute(e,a)})),t},e.prototype._insertCursor=function(e,t){this._writeImpl('<span id="'+t+'"/>');var a=this.doc.getElementById(t);a&&a.parentNode.replaceChild(e,a)},e.prototype._onScriptStart=function(e){e.outerWrites=this.writeQueue,this.writeQueue=[],this.scriptStack.unshift(e)},e.prototype._onScriptDone=function(e){e===this.scriptStack[0]?(this.scriptStack.shift(),this.write.apply(this,e.outerWrites),!this.scriptStack.length&&this.deferredRemote&&(this._onScriptStart(this.deferredRemote),this.deferredRemote=null)):this.options.error({msg:"Bad script nesting or script finished twice"})},e.prototype._writeScriptToken=function(e,t){var a=this._buildScript(e),n=this._shouldRelease(a),r=this.options.afterAsync;e.src&&(a.src=e.src,this._scriptLoadHandler(a,n?r:function(){t(),r()}));try{this._insertCursor(a,m),a.src&&!n||t()}catch(e){this.options.error(e),t()}},e.prototype._buildScript=function(e){var t=this.doc.createElement(e.tagName);return l.eachKey(e.attrs,(function(e,a){t.setAttribute(e,a)})),e.content&&(t.text=e.content),t},e.prototype._scriptLoadHandler=function(e,t){function a(){e=e.onload=e.onreadystatechange=e.onerror=null}function n(){a(),null!=t&&t(),t=null}function r(e){a(),s(e),null!=t&&t(),t=null}function i(e,t){var a=e["on"+t];null!=a&&(e["_on"+t]=a)}var s=this.options.error;i(e,"load"),i(e,"error"),d(e,{onload:function(){if(e._onload)try{e._onload.apply(this,Array.prototype.slice.call(arguments,0))}catch(t){r({msg:"onload handler failed "+t+" @ "+e.src})}n()},onerror:function(){if(e._onerror)try{e._onerror.apply(this,Array.prototype.slice.call(arguments,0))}catch(t){return void r({msg:"onerror handler failed "+t+" @ "+e.src})}r({msg:"remote script failed "+e.src})},onreadystatechange:function(){/^(loaded|complete)$/.test(e.readyState)&&n()}})},e.prototype._shouldRelease=function(e){return!/^script$/i.test(e.nodeName)||!!(this.options.releaseAsync&&e.src&&e.hasAttribute("async"))},e}();t.default=h},function(e){var t;t=function(){return function(e){function t(n){if(a[n])return a[n].exports;var r=a[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var r=n(a(1));e.exports=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var s=r(a(2)),o=r(a(3)),d=n(a(6)),c=a(5),l={comment:/^<!--/,endTag:/^<\//,atomicTag:/^<\s*(script|style|noscript|iframe|textarea)[\s\/>]/i,startTag:/^</,chars:/^[^<]/},u=function(){function e(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,e),this.stream=a;var r=!1,o={};for(var c in s)s.hasOwnProperty(c)&&(n.autoFix&&(o[c+"Fix"]=!0),r=r||o[c+"Fix"]);r?(this._readToken=(0,d.default)(this,o,(function(){return t._readTokenImpl()})),this._peekToken=(0,d.default)(this,o,(function(){return t._peekTokenImpl()}))):(this._readToken=this._readTokenImpl,this._peekToken=this._peekTokenImpl)}return e.prototype.append=function(e){this.stream+=e},e.prototype.prepend=function(e){this.stream=e+this.stream},e.prototype._readTokenImpl=function(){var e=this._peekTokenImpl();if(e)return this.stream=this.stream.slice(e.length),e},e.prototype._peekTokenImpl=function(){for(var e in l)if(l.hasOwnProperty(e)&&l[e].test(this.stream)){var t=o[e](this.stream);if(t)return"startTag"===t.type&&/script|style/i.test(t.tagName)?null:(t.text=this.stream.substr(0,t.length),t)}},e.prototype.peekToken=function(){return this._peekToken()},e.prototype.readToken=function(){return this._readToken()},e.prototype.readTokens=function(e){for(var t=void 0;t=this.readToken();)if(e[t.type]&&!1===e[t.type](t))return},e.prototype.clear=function(){var e=this.stream;return this.stream="",e},e.prototype.rest=function(){return this.stream
},e}();for(var g in t.default=u,u.tokenToString=function(e){return e.toString()},u.escapeAttributes=function(e){var t={};for(var a in e)e.hasOwnProperty(a)&&(t[a]=(0,c.escapeQuotes)(e[a],null));return t},u.supports=s,s)s.hasOwnProperty(g)&&(u.browserHasFlaw=u.browserHasFlaw||!s[g]&&g)},function(e,t){"use strict";t.__esModule=!0;var a=!1,n=!1,r=window.document.createElement("div");try{var i="<P><I></P></I>";r.innerHTML=i,t.tagSoup=a=r.innerHTML!==i}catch(e){t.tagSoup=a=!1}try{r.innerHTML="<P><i><P></P></i></P>",t.selfClose=n=2===r.childNodes.length}catch(e){t.selfClose=n=!1}r=null,t.tagSoup=a,t.selfClose=n},function(e,t,a){"use strict";function n(e){var t=e.indexOf("-->");if(t>=0)return new c.CommentToken(e.substr(4,t-1),t+3)}function r(e){var t=e.indexOf("<");return new c.CharsToken(t>=0?t:e.length)}function i(e){var t,a,n;if(-1!==e.indexOf(">")){var r=e.match(l.startTag);if(r){var i=(t={},a={},n=r[2],r[2].replace(l.attr,(function(e,r){arguments[2]||arguments[3]||arguments[4]||arguments[5]?arguments[5]?(t[arguments[5]]="",a[arguments[5]]=!0):t[r]=arguments[2]||arguments[3]||arguments[4]||l.fillAttr.test(r)&&r||"":t[r]="",n=n.replace(e,"")})),{v:new c.StartTagToken(r[1],r[0].length,t,a,!!r[3],n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))});if("object"===(void 0===i?"undefined":d(i)))return i.v}}}function s(e){var t=i(e);if(t){var a=e.slice(t.length);if(a.match(new RegExp("</\\s*"+t.tagName+"\\s*>","i"))){var n=a.match(new RegExp("([\\s\\S]*?)</\\s*"+t.tagName+"\\s*>","i"));if(n)return new c.AtomicTagToken(t.tagName,n[0].length+t.length,t.attrs,t.booleanAttrs,n[1])}}}function o(e){var t=e.match(l.endTag);if(t)return new c.EndTagToken(t[1],t[0].length)}t.__esModule=!0;var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.comment=n,t.chars=r,t.startTag=i,t.atomicTag=s,t.endTag=o;var c=a(4),l={startTag:/^<([\-A-Za-z0-9_]+)((?:\s+[\w\-]+(?:\s*=?\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,endTag:/^<\/([\-A-Za-z0-9_]+)[^>]*>/,attr:/(?:([\-A-Za-z0-9_]+)\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))|(?:([\-A-Za-z0-9_]+)(\s|$)+)/g,fillAttr:/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noresize|noshade|nowrap|readonly|selected)$/i}},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0,t.EndTagToken=t.AtomicTagToken=t.StartTagToken=t.TagToken=t.CharsToken=t.CommentToken=t.Token=void 0;var r=a(5),i=(t.Token=function e(t,a){n(this,e),this.type=t,this.length=a,this.text=""},t.CommentToken=function(){function e(t,a){n(this,e),this.type="comment",this.length=a||(t?t.length:0),this.text="",this.content=t}return e.prototype.toString=function(){return"<!--"+this.content},e}(),t.CharsToken=function(){function e(t){n(this,e),this.type="chars",this.length=t,this.text=""}return e.prototype.toString=function(){return this.text},e}(),t.TagToken=function(){function e(t,a,r,i,s){n(this,e),this.type=t,this.length=r,this.text="",this.tagName=a,this.attrs=i,this.booleanAttrs=s,this.unary=!1,this.html5Unary=!1}return e.formatTag=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a="<"+e.tagName;for(var n in e.attrs)if(e.attrs.hasOwnProperty(n)){a+=" "+n;var i=e.attrs[n];void 0!==e.booleanAttrs&&void 0!==e.booleanAttrs[n]||(a+='="'+(0,r.escapeQuotes)(i)+'"')}return e.rest&&(a+=" "+e.rest),e.unary&&!e.html5Unary?a+="/>":a+=">",null!=t&&(a+=t+"</"+e.tagName+">"),a},e}());t.StartTagToken=function(){function e(t,a,r,i,s,o){n(this,e),this.type="startTag",this.length=a,this.text="",this.tagName=t,this.attrs=r,this.booleanAttrs=i,this.html5Unary=!1,this.unary=s,this.rest=o}return e.prototype.toString=function(){return i.formatTag(this)},e}(),t.AtomicTagToken=function(){function e(t,a,r,i,s){n(this,e),this.type="atomicTag",this.length=a,this.text="",this.tagName=t,this.attrs=r,this.booleanAttrs=i,this.unary=!1,this.html5Unary=!1,this.content=s}return e.prototype.toString=function(){return i.formatTag(this,this.content)},e}(),t.EndTagToken=function(){function e(t,a){n(this,e),this.type="endTag",this.length=a,this.text="",this.tagName=t}return e.prototype.toString=function(){return"</"+this.tagName+">"},e}()},function(e,t){"use strict";function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e?e.replace(/([^"]*)"/g,(function(e,t){return/\\/.test(t)?t+'"':t+'\\"'})):t}t.__esModule=!0,t.escapeQuotes=a},function(e,t){"use strict";function a(e){return e&&"startTag"===e.type&&(e.unary=o.test(e.tagName)||e.unary,e.html5Unary=!/\/>$/.test(e.text)),e}function n(e,t){var n=e.stream,r=a(t());return e.stream=n,r}function r(e,t){var a=t.pop();e.prepend("</"+a.tagName+">")}function i(){var e=[];return e.last=function(){return this[this.length-1]},e.lastTagNameEq=function(e){var t=this.last();return t&&t.tagName&&t.tagName.toUpperCase()===e.toUpperCase()},e.containsTagName=function(e){for(var t,a=0;t=this[a];a++)if(t.tagName===e)return!0;return!1},e}function s(e,t,s){function o(){var t=n(e,s);t&&l[t.type]&&l[t.type](t)}var c=i(),l={startTag:function(a){var n=a.tagName;"TR"===n.toUpperCase()&&c.lastTagNameEq("TABLE")?(e.prepend("<TBODY>"),o()):t.selfCloseFix&&d.test(n)&&c.containsTagName(n)?c.lastTagNameEq(n)?r(e,c):(e.prepend("</"+a.tagName+">"),o()):a.unary||c.push(a)},endTag:function(a){c.last()?t.tagSoupFix&&!c.lastTagNameEq(a.tagName)?r(e,c):c.pop():t.tagSoupFix&&(s(),o())}};return function(){return o(),a(s())}}t.__esModule=!0,t.default=s;var o=/^(AREA|BASE|BASEFONT|BR|COL|FRAME|HR|IMG|INPUT|ISINDEX|LINK|META|PARAM|EMBED)$/i,d=/^(COLGROUP|DD|DT|LI|OPTIONS|P|TD|TFOOT|TH|THEAD|TR)$/i}])},e.exports=t()},function(e,t){"use strict";function a(e){return null!=e}function n(e){return"function"==typeof e}function r(e,t,a){var n=void 0,r=e&&e.length||0;for(n=0;n<r;n++)t.call(a,e[n],n)}function i(e,t,a){for(var n in e)e.hasOwnProperty(n)&&t.call(a,n,e[n])}function s(e,t){return e=e||{},i(t,(function(t,n){a(e[t])||(e[t]=n)})),e}function o(e){try{return Array.prototype.slice.call(e)}catch(n){var t=(a=[],r(e,(function(e){a.push(e)})),{v:a});if("object"===(void 0===t?"undefined":g(t)))return t.v}var a}function d(e){return e[e.length-1]}function c(e,t){return!(!e||"startTag"!==e.type&&"atomicTag"!==e.type||!("tagName"in e)||!~e.tagName.toLowerCase().indexOf(t))}function l(e){return c(e,"script")}function u(e){return c(e,"style")}t.__esModule=!0;var g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.existy=a,t.isFunction=n,t.each=r,t.eachKey=i,t.defaults=s,t.toArray=o,t.last=d,t.isTag=c,t.isScript=l,t.isStyle=u}])},"object"==typeof t&&"object"==typeof e?e.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof t?t.postscribe=n():a.postscribe=n()}},"core/src/lib/actions/helpers/unescapeHtmlCode.js":{script:function(e,t,a){"use strict";var n=a("@adobe/reactor-document").createElement("div");e.exports=function(e){return n.innerHTML=e,n.textContent||n.innerText||e}}},"core/src/lib/helpers/findPageScript.js":{script:function(e,t,a){"use strict";var n=a("@adobe/reactor-document"),r=function(e){for(var t=n.querySelectorAll("script"),a=0;a<t.length;a++){var r=t[a];if(e.test(r.src))return r}},i=function(){return r(new RegExp(/(launch|satelliteLib)-[^\/]+.js(\?.*)?$/))};e.exports={getTurbine:i,byRegexPattern:r}}},"core/src/lib/actions/helpers/decorators/decorateGlobalJavaScriptCode.js":{script:function(e,t,a){"use strict";var n=a("@adobe/reactor-promise");e.exports=function(e,t){return{code:"<script>\n"+t+"\n</script>",promise:n.resolve()}}}},"core/src/lib/actions/helpers/decorators/decorateNonGlobalJavaScriptCode.js":{script:function(e,t,a){"use strict";var n=a("@adobe/reactor-promise"),r=0;e.exports=function(e,t){var a="_runScript"+ ++r,i=new n((function(t,r){_satellite[a]=function(i){delete _satellite[a],new n((function(t){t(i.call(e.event.element,e.event,e.event.target,n))})).then(t,r)}}));return{code:'<script>_satellite["'+a+'"](function(event, target, Promise) {\n'+t+"\n});</script>",promise:i}}}},"core/src/lib/actions/helpers/decorators/decorateHtmlCode.js":{script:function(e,t,a,n){"use strict";var r=a("@adobe/reactor-promise"),i=0,s={};window._satellite=window._satellite||{},window._satellite._onCustomCodeSuccess=function(e){var t=s[e];t&&(delete s[e],t.resolve())},window._satellite._onCustomCodeFailure=function(e){var t=s[e];t&&(delete s[e],t.reject())};var o=function(e){return-1!==e.indexOf("${reactorCallbackId}")},d=function(e,t){return e.replace(/\${reactorCallbackId}/g,t)},c=function(e){return e.settings.isExternal};e.exports=function(e,t){var a;return c(e)&&(t=n.replaceTokens(t,e.event)),o(t)?(a=new r((function(e,t){s[String(i)]={resolve:e,reject:t}})),t=d(t,i),i+=1):a=r.resolve(),{code:t,promise:a}}}},"core/src/lib/actions/helpers/getSourceByUrl.js":{script:function(e,t,a){"use strict";var n=a("@adobe/reactor-load-script"),r=a("@adobe/reactor-promise"),i=a("../../helpers/findPageScript").byRegexPattern,s={},o={},d=function(e){return o[e]||(o[e]=n(e)),o[e]};_satellite.__registerScript=function(e,t){var a;if(document.currentScript)a=document.currentScript.getAttribute("src");else{var n=new RegExp(".*"+e+".*");a=i(n).getAttribute("src")}s[a]=t},e.exports=function(e){return s[e]?r.resolve(s[e]):new r((function(t){d(e).then((function(){t(s[e])}),(function(){t()}))}))}}}}},"adobe-analytics":{displayName:"Adobe Analytics",hostedLibFilesBaseUrl:"https://lightning.cartoonnetwork.co.uk/launch/7be62238e4c3/b95cb8f58679/a452bc00f42f/hostedLibFiles/EP40e3bec801244c59a61bf06eb622a63c/",settings:{orgId:"7FF852E2556756057F000101@AdobeOrg",libraryCode:{type:"custom",source:"https://lightning.cartoonnetwork.co.uk/launch/7be62238e4c3/b95cb8f58679/a452bc00f42f/EX09210f76810d44d5868123a0fe1e61da-libraryCode_source.min.js",trackerVariableName:"s"},trackerProperties:{trackInlineStats:!0,trackDownloadLinks:!0,trackExternalLinks:!0,linkDownloadFileTypes:["doc","docx","eps","jpg","png","svg","xls","ppt","pptx","pdf","xlsx","tab","csv","zip","txt","vsd","vxd","xml","js","css","rar","exe","wma","mov","avi","wmv","mp3","wav","m4v"]}},modules:{"adobe-analytics/src/lib/sharedModules/getTracker.js":{script:function(e,t,a,n){"use strict";var r,i=a("@adobe/reactor-cookie"),s=a("@adobe/reactor-promise"),o=a("@adobe/reactor-window"),d=a("../helpers/settingsHelper"),c=a("../helpers/augmenters"),l=a("../helpers/applyTrackerVariables"),u=a("../helpers/loadLibrary"),g=a("../helpers/generateVersion")(n.buildInfo.turbineBuildDate),p="beforeSettings",m=n.getSharedModule("adobe-mcid","mcid-instance"),h=function(e){return!e||"true"===i.get(e)},f=function(e){return s.all(c.map((function(t){var a;try{a=t(e)}catch(e){setTimeout((function(){throw e}))}return s.resolve(a)}))).then((function(){return e}))},_=function(e){return m&&(n.logger.info("Setting MCID instance on the tracker."),e.visitor=m),e},b=function(e){return n.logger.info('Setting version on tracker: "'+g+'".'),void 0!==e.tagContainerMarker?e.tagContainerMarker=g:"string"==typeof e.version&&e.version.substring(e.version.length-5)!=="-"+g&&(e.version+="-"+g),e},v=function(e,t,a){return t.loadPhase===p&&t.source&&(n.logger.info("Calling custom script before settings."),t.source.call(o,a)),l(a,e||{}),t.loadPhase!==p&&t.source&&(n.logger.info("Calling custom script after settings."),t.source.call(o,a)),a},y=function(e,t){return d.isAudienceManagementEnabled(e)&&(t.loadModule("AudienceManagement"),n.logger.info("Initializing AudienceManagement module"),t.AudienceManagement.setup(e.moduleProperties.audienceManager.config)),t},w=(r=n.getExtensionSettings(),h(r.trackingCookieName)?u(r).then(f).then(_).then(b).then(v.bind(null,r.trackerProperties,r.customSetup||{})).then(y.bind(null,r)):s.reject("EU compliance was not acknowledged by the user."));e.exports=function(){return w}},name:"get-tracker",shared:!0},"adobe-analytics/src/lib/sharedModules/augmentTracker.js":{name:"augment-tracker",shared:!0,script:function(e,t,a){"use strict";var n=a("../helpers/augmenters");e.exports=function(e){n.push(e)}}},"adobe-analytics/src/lib/helpers/settingsHelper.js":{script:function(e,t,a,n){"use strict";var r=a("@adobe/reactor-window"),i={LIB_TYPES:{MANAGED:"managed",PREINSTALLED:"preinstalled",REMOTE:"remote",CUSTOM:"custom"},MANAGED_LIB_PATHS:{APP_MEASUREMENT:"AppMeasurement.js",ACTIVITY_MAP:"AppMeasurement_Module_ActivityMap.js",AUDIENCE_MANAGEMENT:"AppMeasurement_Module_AudienceManagement.js"},getReportSuites:function(e){var t=e.production;return e[n.buildInfo.environment]&&(t=e[n.buildInfo.environment]),t.join(",")},isActivityMapEnabled:function(e){return!(e.libraryCode&&!e.libraryCode.useActivityMap&&!1===e.libraryCode.useActivityMap)},isAudienceManagementEnabled:function(e){var t=!1;return e&&e.moduleProperties&&e.moduleProperties.audienceManager&&e.moduleProperties.audienceManager.config&&r&&r._satellite&&r._satellite.company&&r._satellite.company.orgId&&(t=!0),t}};e.exports=i}},"adobe-analytics/src/lib/helpers/augmenters.js":{script:function(e){"use strict";e.exports=[]}},"adobe-analytics/src/lib/helpers/applyTrackerVariables.js":{script:function(e,t,a,n){"use strict";var r=a("@adobe/reactor-query-string"),i=a("@adobe/reactor-window"),s=/eVar([0-9]+)/,o=/prop([0-9]+)/,d=new RegExp("^(eVar[0-9]+)|(prop[0-9]+)|(hier[0-9]+)|campaign|purchaseID|channel|server|state|zip|pageType$"),c=function(e,t,a){return a.indexOf(e)===t},l=function(e,t,a){var n=Object.keys(t).filter(d.test.bind(d));return a&&n.push("events"),(n=n.concat((e.linkTrackVars||"").split(","))).filter((function(e,t){return"None"!==e&&e&&c(e,t,n)})).join(",")},u=function(e,t){var a=t.map((function(e){return e.name}));return(a=a.concat((e.linkTrackEvents||"").split(","))).filter((function(e,t){return"None"!==e&&c(e,t,a)})).join(",")},g=function(e,t,a){e[t]=a[t].join(",")},p=function(e,t,a){var n=a.dynamicVariablePrefix||"D=";a[t].forEach((function(t){var a;if("value"===t.type)a=t.value;else{var r=s.exec(t.value);if(r)a=n+"v"+r[1];else{var i=o.exec(t.value);i&&(a=n+"c"+i[1])}}e[t.name]=a}))},m={linkDownloadFileTypes:g,linkExternalFilters:g,linkInternalFilters:g,hierarchies:function(e,t,a){a[t].forEach((function(t){e[t.name]=t.sections.join(t.delimiter)}))},props:p,eVars:p,campaign:function(e,t,a){if("queryParam"===a[t].type){var n=r.parse(i.location.search);e[t]=n[a[t].value]}else e[t]=a[t].value},events:function(e,t,a){var n=a[t].map((function(e){var t=e.name;return e.id&&(t=[t,e.id].join(":")),e.value&&(t=[t,e.value].join("=")),t}));e[t]=n.join(",")}};e.exports=function(e,t){var a={};t=t||{},Object.keys(t).forEach((function(e){var n=m[e],r=t[e];n?n(a,e,t):a[e]=r})),a.events&&e.events&&e.events.length>0&&(a.events=e.events+","+a.events);var r=t&&t.events&&t.events.length>0,i=l(e,a,r);i&&(a.linkTrackVars=i);var s=u(e,t.events||[]);s&&(a.linkTrackEvents=s),n.logger.info('Applying the following properties on tracker: "'+JSON.stringify(a)+'".'),Object.keys(a).forEach((function(t){e[t]=a[t]}))}}},"adobe-analytics/src/lib/helpers/loadLibrary.js":{script:function(e,t,a,n){"use strict";var r=a("@adobe/reactor-load-script"),i=a("@adobe/reactor-window"),s=a("@adobe/reactor-promise"),o=a("./settingsHelper"),d=a("./pollHelper"),c=function(e,t){if(!i.s_gi)throw new Error("Unable to create AppMeasurement tracker, `s_gi` function not found."+i.AppMeasurement);n.logger.info('Creating AppMeasurement tracker with these report suites: "'+t+'"');var a=i.s_gi(t);return e.libraryCode.scopeTrackerGlobally&&(n.logger.info("Setting the tracker as window.s"),i.s=a),a},l=function(e){var t=[];switch(e.libraryCode.type){case o.LIB_TYPES.MANAGED:t.push(n.getHostedLibFileUrl(o.MANAGED_LIB_PATHS.APP_MEASUREMENT)),o.isActivityMapEnabled(e)&&t.push(n.getHostedLibFileUrl(o.MANAGED_LIB_PATHS.ACTIVITY_MAP));break;case o.LIB_TYPES.CUSTOM:t.push(e.libraryCode.source);break;case o.LIB_TYPES.REMOTE:t.push("https:"===i.location.protocol?e.libraryCode.httpsUrl:e.libraryCode.httpUrl)}if(o.isAudienceManagementEnabled(e)){var a={namespace:i._satellite.company.orgId};e.moduleProperties.audienceManager.config.visitorService=a,t.push(n.getHostedLibFileUrl(o.MANAGED_LIB_PATHS.AUDIENCE_MANAGEMENT))}return t},u=function(e){return s.all(l(e).map((function(e){return n.logger.info("Loading script: "+e),r(e)})))},g=function(e,t){if(e.libraryCode.accounts)if(t.sa){var a=o.getReportSuites(e.libraryCode.accounts);n.logger.info('Setting the following report suites on the tracker: "'+a+'"'),t.sa(a)}else n.logger.warn("Cannot set report suites on tracker. `sa` method not available.");return t},p=function(e){if(i[e])return n.logger.info('Found tracker located at: "'+e+'".'),i[e];throw new Error('Cannot find the global variable name: "'+e+'".')};e.exports=function(e){var t=u(e);switch(e.libraryCode.type){case o.LIB_TYPES.MANAGED:var a=o.getReportSuites(e.libraryCode.accounts);return t.then(c.bind(null,e,a));case o.LIB_TYPES.PREINSTALLED:return t.then(d.poll.bind(null,i,e.libraryCode.trackerVariableName)).then(g.bind(null,e));case o.LIB_TYPES.CUSTOM:case o.LIB_TYPES.REMOTE:return t.then(p.bind(null,e.libraryCode.trackerVariableName)).then(g.bind(null,e));default:throw new Error("Cannot load library. Type not supported.")}}}},"adobe-analytics/src/lib/helpers/generateVersion.js":{script:function(e){"use strict";var t=8,a=function(e){return e.getUTCDate().toString(36)},n=function(e){return e.substr(e.length-1)},r=function(e){return Math.floor(e.getUTCHours()/t)},i=function(e){var t=(e.getUTCMonth()+1+12*r(e)).toString(36);return n(t)},s=function(e){return(e.getUTCFullYear()-2010).toString(36)};e.exports=function(e){var t=new Date(e);if(isNaN(t))throw new Error("Invalid date provided");return("L"+s(t)+i(t)+a(t)).toUpperCase()}}},"adobe-analytics/src/lib/helpers/pollHelper.js":{script:function(e,t,a,n){"use strict";var r=a("@adobe/reactor-promise"),i=40,s=250,o=function(e,t,a){n.logger.info('Found property located at: "'+t+'"].'),e(a)},d=function(e,t){return new r((function(a,n){if(e[t])return o(a,t,e[t]);var r=1,d=setInterval((function(){e[t]&&(o(a,t,e[t]),clearInterval(d)),r>=i&&(clearInterval(d),n(new Error('Bailing out. Cannot find the variable name: "'+t+'"].'))),r++}),s)}))};e.exports={poll:function(e,t){return n.logger.info('Waiting for the property to become accessible at: "'+t+'"].'),d(e,t)}}}}}}},company:{orgId:"7FF852E2556756057F000101@AdobeOrg",dynamicCdnEnabled:!1},property:{name:"Intl CN EMEA Web",settings:{domains:["cartoonnetworkhq.com","cartoonnetwork.bg","cartoonnetwork.dk","cartoonnetwork.com.tr","cartoonnetwork.cz","cartoonnetwork.de","cartoonnetwork.es","cartoonnetwork.fr","cartoonnetwork.hu","cartoonnetwork.it","cartoonnetwork.co.uk","cartoonnetwork.pl","cartoonnetwork.ro","cartoonnetwork.ru","cartoonnetworkme.com","cartoonnetwork.no","cartoonnetworkarabic.com","cartoonnetwork.se","cartoonnetwork.be","cartoonnetwork.pt","cartoonnetwork.nl","cartoonnetworkmena.com"],undefinedVarsReturnEmpty:!1,ruleComponentSequencingEnabled:!0},id:"PR51394e532f054c328b1f39ca9a7d91e9"},rules:[{id:"RL5366f88a0df1446e9fcdb620560b49c0",name:"3.1. Adobe Page Events (Page Bottom)",events:[{modulePath:"core/src/lib/events/pageBottom.js",settings:{},ruleOrder:1}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{global:!0,
source:'/* trackMetrics PubSub Publisher */\n!function(){"use strict";function a(a){if("[object String]"!==Object.prototype.toString.call(a))throw new TypeError("Event is not a string.")}function b(a){if("function"!=typeof a)throw new TypeError("Handler is not a function")}var c={},d={};d.publish=d.pub=function(b){if(a(b),c[b])for(var d={event:b,args:Array.prototype.slice.call(arguments,1)},e=0,f=c[b].length;f>e;e++)c[b][e].apply(d,d.args)},d.subscribe=d.sub=function(d,e){a(d),b(e),(c[d]=c[d]||[]).push(e)},d.unsubscribe=d.unsub=function(){var d,e,f,g,h=Array.prototype.slice.call(arguments);if(h.length>=2){if(d=h[0],e=h[1],a(d),b(e),!c[d])return;for(f=0,g=c[d].length;g>f;f++)c[d][f]===e&&c[d].splice(f,1)}else{e=h[0],b(e);for(d in c)for(f=0,g=c[d].length;g>f;f++)c[d][f]===e&&c[d].splice(f,1)}},"function"==typeof define&&define.amd?define(function(){return d}):"object"==typeof module&&module.exports?module.exports=d:window.PubSub=d}();\n\nwindow.trackMetrics = function(idata) {\n    window.PubSub.publish(idata.type, idata.data);\n};\nwindow.trackVideoMetrics = function(vdata) {\n    window.PubSub.publish(vdata.type, vdata.data);\n};\n\n/* page view tracking after page load */\nwindow.PubSub.subscribe("pageview", function(pdata) {\n    /* re-check user consent */\n    try {\n        var tOTObj = (((window.tdi || {}).configuration || {}).oneTrust || {}) || {};\n        var tOT = tOTObj.hasOwnProperty(\'useUserConsent\') ? tOTObj.useUserConsent : false;\n        if (tOT) {\n            if (!window.adobe.optIn.isApproved(adobe.OptInCategories.ANALYTICS)) {\n                //approve Adobe Analytics\n                if (window.OnetrustActiveGroups) {\n                    var groupCookieList = window.OnetrustActiveGroups.split(\',\').filter(window.tdi.util.filterOT);\n                    if (groupCookieList.indexOf("2") > -1 || groupCookieList.indexOf("pf") > -1) {\n                        window.adobe.optIn.approveAll();\n                    }\n                }\n            }\n        }\n    } catch(e) {}\n\n    var tAAC = ((window.tdi || {}).configuration || {}).adobeAnalytics || {},\n        s = window[tAAC.adobeObj] || window.tdi_s || window.s || {},\n        tm = window.turner_metadata || {},\n        tU = (window.tdi || {}).util || {},\n        hstNme = "",\n        spcLstPub = (((window.tdi || {}).configuration || {}).launch || {}).spaceLastPublished || "";\n\n    /* iterate through data object sent through trackAction push and force to be strings and lower case */\n    for (var x in pdata) {\n        try {\n            pdata[x] = pdata[x].toString();\n            pdata[x] = pdata[x].toLowerCase();\n        } catch (e) {\n            console.log("[WARNING] -- The value of the *" + x.toUpperCase() + "* param has a wrong format or is null/undefined. This is the related error: " + e.message);\n        }\n    }\n\n    function domainFix(a) {\n        if (!/^web\\|/.test(a)) {\n            a = "web|" + a;\n        }\n        return a;\n    }\n    hstNme = !!pdata.domain ? domainFix(pdata.domain) : "web|" + window.location.hostname.replace("www.", "");\n\n    s.pageType = pdata.siteerrors === "pagenotfound" ? "errorPage" : ""; /* indicates 404 page */\n    /* set pageName to empty string if pageType is a 404 page */\n    s.pageName = s.pageType === "errorPage" ? "" : pdata.pageName || tm.pageName || (document.location.hostname.replace(/^www\\w+\\./, \'\') + document.location.pathname);\n    s.channel = pdata.section ? String(pdata.section).toLocaleLowerCase() : "";\n    s.products = pdata.products || "";\n    s.events = pdata.productsevent || "";\n    s.campaign = s.Util.getQueryParam("cid");\n    s.server = hstNme;\n    var transactionID = "";\n    try { transactionID = _satellite.getVar("1.3 transactionID"); } catch(e) {}\n\n    s.contextData = {\n        "domain": hstNme,\n        "ensighten": spcLstPub,\n        "version": spcLstPub,\n        "url": window.location.hostname + window.location.pathname,\n        "platform": "web",\n        "internalcampaign": s.Util.getQueryParam("iid"),\n        "screenorientation": tU.getOrientation ? tU.getOrientation() : "",\n        "transactionid": tAAC.trackTransactionId ? (transactionID ? transactionID : "") : "",\n        "pageviewevent": 1\n    };\n\n    /* filter out data in pageview event according to Configuration file */\n    function pageDataFilterOut(pageKey, tAAC) {\n        if (tAAC.pageViewBlockList && Object.prototype.toString.call(tAAC.pageViewBlockList) === "[object Array]" && tAAC.pageViewBlockList.length > 0) {\n            var pageData = tAAC.pageViewBlockList;\n            for (var x = 0; x < pageData.length; x++) {\n                if (pageData[x] === pageKey) {\n                    return false;\n                }\n            }\n        } else if (typeof tAAC.pageViewBlockList === \'undefined\') {\n            return true;\n        }\n        return true;\n    }\n\n    for (var pKey in pdata) {\n        if (pdata.hasOwnProperty(pKey) && (typeof pdata[pKey] === \'string\' || typeof pdata[pKey] === \'number\' || typeof pdata[pKey] === \'boolean\') && pageDataFilterOut(pKey, tAAC)) {\n            s.contextData[pKey] = typeof pdata[pKey] === \'string\' ? pdata[pKey].toLowerCase() : pdata[pKey];\n        }\n    }\n\n    if (pdata.searchterm && pdata.searchterm != "") {\n        s.contextData.internalsearchevent = 1;\n    }\n\n    s.t();\n\n    s.contextData = {};\n\n    /* Game Tracking Timer Failsafe */\n    /* Assumes Zero Page Views within a Game */\n    /* Stops Game Progress Timer on Page View */\n    if (window.gameprogress) {\n        clearTimeout(window.gameprogress);\n        window.gameprogress = null;\n    }\n});\n\n/* interaction tracking */\nwindow.PubSub.subscribe("interaction", function(idata) {\n    var tAAC = ((window.tdi || {}).configuration || {}).adobeAnalytics || {},\n        s = window[tAAC.adobeObj] || window.tdi_s || window.s || {},\n        tm = window.turner_metadata || {},\n        tU = (window.tdi || {}).util || {},\n        hstNme = "",\n        spcLstPub = (((window.tdi || {}).configuration || {}).launch || {}).spaceLastPublished || "",\n        tempTrackData = {},\n        linkTrackVarArr = [];\n\n    /* iterate through data object sent through trackAction push and force to be strings and lower case */\n    for (var x in idata) {\n        try {\n            idata[x] = idata[x].toString();\n            idata[x] = idata[x].toLowerCase();\n        } catch (e) {\n            console.log("[WARNING] -- The value of the *" + x.toUpperCase() + "* param has a wrong format or is null/undefined. This is the related error: " + e.message);\n        }\n    }\n\n    function domainFix(a) {\n        if (!/^web\\|/.test(a)) {\n            a = "web|" + a;\n        }\n        return a;\n    }\n    hstNme = !!idata.domain ? domainFix(idata.domain) : "web|" + window.location.hostname.replace("www.", "");\n\n    /* used to hold temporary tracking variables */\n    tempTrackData = {\n        /* set pageName to empty string if pageType is a 404 page */\n        /* To prevent issues where logic depends on pageName */\n        "pageName": s.pageType === "errorPage" ? "" : idata.pageName || tm.pageName || (document.location.hostname.replace(/^www\\w+\\./, \'\') + document.location.pathname),\n        "channel": idata.section || "",\n        "products": idata.products || "",\n        "events": idata.productsevent || "",\n        "campaign": s.Util.getQueryParam("cid"),\n        "server": hstNme,\n        "contextData": {\n            "ensighten": spcLstPub,\n            "version": spcLstPub,\n            "url": window.location.hostname + window.location.pathname,\n            "interactionevent": 1,\n            "featuredcontentevent": idata.featuredcontentevent ? 1 : "",\n            "featuredcontent": idata.featuredcontentevent && idata.featuredcontent ? idata.featuredcontent : "",\n            "internalcampaign": idata.featuredcontentevent && idata.internalcampaign ? idata.internalcampaign : "",\n            "gamestart": idata.gamestart ? 1 : "",\n            "gamereplay": idata.gamereplay ? 1 : "",\n            "gameexit": idata.gameexit ? 1 : "",\n            "gamecomplete": idata.gamecomplete ? 1 : "",\n            "registrationevent": idata.registrationevent ? 1 : "",\n            "loginevent": idata.loginevent ? 1 : "",\n            "internalsearchevent": idata.internalsearchevent ? 1 : "",\n            "domain": idata.domain || tm.domain || ("web|" + window.location.hostname.replace("www.", "")),\n            "screenorientation": tU.getOrientation ? tU.getOrientation() : ""\n        },\n        "linkTrackVars": "",\n        "linkTrackEvents": ""\n    };\n\n    /* filter out data in interaction event according to Configuration file */\n    function interactionDataFilterOut(interactionKey, tAAC) {\n        if (tAAC.interactionBlockList && Object.prototype.toString.call(tAAC.interactionBlockList) === "[object Array]" && tAAC.interactionBlockList.length > 0) {\n            var interactionData = tAAC.interactionBlockList;\n            for (var x = 0; x < interactionData.length; x++) {\n                if (interactionData[x] === interactionKey) {\n                    return false;\n                }\n            }\n        } else if (typeof tAAC.interactionBlockList === \'undefined\') {\n            return true;\n        }\n        return true;\n    }\n\n    /* Check if the variable already exist in context Data */\n    function checkContextData(interactionKey) {\n        for (var i in tempTrackData.contextData) {\n            if (i === interactionKey) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    /* iterate through data object sent through trackAction push */\n    /* add each variable to the temporary contextData object */\n    for (var iKey in idata) {\n        if (idata.hasOwnProperty(iKey) && (typeof idata[iKey] === \'string\' || typeof idata[iKey] === \'number\' || typeof idata[iKey] === \'boolean\') && interactionDataFilterOut(iKey, tAAC)) {\n            tempTrackData.contextData[iKey] = idata[iKey];\n        }\n    }\n\n    /* iterate through turner metadata object */\n    for (var inKey in tm) {\n        if (tm.hasOwnProperty(inKey) && (typeof tm[inKey] === "string" || typeof tm[inKey] === "number" || typeof tm[inKey] === "boolean") && !checkContextData(inKey) && interactionDataFilterOut(inKey, tAAC)) {\n            // Add check to handle any TM object exclusions\n            // removes *event=1 entries from being saved onto the tempTrackData.contextData object\n            if (!(/.*event$/g.test(inKey))) { \n              tempTrackData.contextData[inKey] = typeof tm[inKey] === "string" ? tm[inKey].toLowerCase() : tm[inKey];\n            }\n        }\n    }\n\n    /* add non-contextData entries to an array */\n    for (var tKey in tempTrackData) {\n        if (tempTrackData.hasOwnProperty(tKey) && !!tempTrackData[tKey] && tKey !== "contextData" && tKey !== " linkTrackVars" && tKey !== "linkTrackEvents") {\n            linkTrackVarArr.push(cKey);\n        }\n    }\n\n    /* add all entries in the temporary contextData object to an array */\n    for (var cKey in tempTrackData.contextData) {\n        if (tempTrackData.contextData.hasOwnProperty(cKey) && !!tempTrackData.contextData[cKey]) {\n            linkTrackVarArr.push("contextData." + cKey);\n        }\n    }\n\n    /* turn array into temporary linkTrackVars */\n    tempTrackData.linkTrackVars = tempTrackData.linkTrackVars + linkTrackVarArr.toString();\n\n    /* set temporary linkTrackEvents per standard interaction method */\n    /* also set events */\n    tempTrackData.linkTrackEvents = tempTrackData.events = idata.productsevent || "";\n    if (tempTrackData.linkTrackEvents) {\n        tempTrackData.linkTrackEvents = tempTrackData.linkTrackEvents;\n        tempTrackData.linkTrackVars = \'events\' + tempTrackData.linkTrackVars;\n    } else if (!tempTrackData.linkTrackEvents) {\n        tempTrackData.linkTrackEvents = \'None\';\n    }\n\n    s.tl(this, "o", "interaction-" + (idata.interaction || ""), tempTrackData);\n});\n\n/* global game variables for progress tracking */\nwindow.gamelevel = "";\nwindow.gamecharacter = "";\nwindow.gamemode = "";\n\n/* Progress event function */\n/* Tracks every sixty seconds */\nwindow.sendGameProgress = function(gdata) {\n    //fix for introductions level with value zero.\n    if (gdata.gamelevel === 0) {\n      gdata.gamelevel = "0";\n    }\n    /* update global game variables for progress tracking */\n    if (window.gamelevel) gdata.gamelevel = window.gamelevel;\n    if (window.gamecharacter) gdata.gamecharacter = window.gamecharacter;\n    if (window.gamemode) gdata.gamemode = window.gamemode;\n\n    gdata.interactionevent = "";\n    gdata.gamestart = "";\n    gdata.interaction = "game time spent event";\n    gdata.gametimespent = 60;\n    trackMetrics({\n        type: "game",\n        data: gdata\n    });\n    /* Fires function again in another sixty seconds */\n    window.gameprogress = window.setTimeout(sendGameProgress, 60000, gdata);\n};\n\nwindow.PubSub.subscribe("game", function(gdata) {\n    var tAAC = ((window.tdi || {}).configuration || {}).adobeAnalytics || {},\n        s = window[tAAC.adobeObj] || window.tdi_s || window.s || {},\n        tm = window.turner_metadata || {},\n        /* shortcut to turner_metadata object */\n        spcLstPub = (((window.tdi || {}).configuration || {}).launch || {}).spaceLastPublished || "",\n        primaryRSID = s.account,\n        /* temporary storage for Global Standards RSID */\n        gameRSID = gdata.gamersid,\n        /* temporary storage for Game RSID */\n        tempTrackData = {},\n        linkTrackVarArr = []; /* defined for later use */\n\n    /* Holds temporary tracking variables */\n    /* Only variables not passed in the trackAction push call are required in the contextData object */\n    tempTrackData = {\n        "contextData": {\n            "pageName": tm.pageName || "",\n            "domain": tm.domain || "",\n            "section": tm.section || "",\n            "subsection": tm.subsection || "",\n            "country": tm.country || "",\n            "brand": tm.brand || "",\n            "franchise": tm.franchise || "",\n            "ensighten": spcLstPub,\n            "version": spcLstPub,\n            "url": tm.url || "",\n            "region": tm.region || "",\n            "presentationtemplate": tm.presentationtemplate || ""\n        },\n        "linkTrackVars": "",\n        /* defined for later use */\n        "linkTrackEvents": "" /* defined for later use */\n    };\n\n    //fix for introductions level with value zero.\n    if (gdata.gamelevel === 0) {\n        gdata.gamelevel = "0";\n    }\n\n    /* update global game variables for progress tracking */\n    if (gdata.gamelevel) window.gamelevel = gdata.gamelevel;\n    if (gdata.gamecharacter) window.gamecharacter = gdata.gamecharacter;\n    if (gdata.gamemode) window.gamemode = gdata.gamemode;\n\n    /* remove timer on gamecomplete or exit */\n    if (window.gameprogress && (gdata.gamecomplete || gdata.gameexit)) {\n        clearTimeout(window.gameprogress);\n    }\n\n    /* add timer on gamestart */\n    /* fires progress event every sixty seconds */\n    if (gdata.gamestart) {\n        window.gameprogress = window.setTimeout(sendGameProgress, 60000, gdata);\n    }\n\n    /* iterate through data object sent through trackAction push with type game */\n    /* add each variable to the temporary contextData object */\n    for (var gKey in gdata) {\n        if (gdata.hasOwnProperty(gKey) && !!gdata[gKey]) {\n            tempTrackData.contextData[gKey] = String(gdata[gKey]).toLowerCase();\n        }\n    }\n\n    /* add all entries in the temporary contextData object to an array */\n    for (var cKey in tempTrackData.contextData) {\n        if (tempTrackData.contextData.hasOwnProperty(cKey) && !!tempTrackData.contextData[cKey]) {\n            linkTrackVarArr.push("contextData." + cKey);\n        }\n    }\n    /* turn array into temporary linkTrackVars */\n    tempTrackData.linkTrackVars += linkTrackVarArr.toString();\n\n    /* set temporary linkTrackEvents per standard interaction method */\n    /* also set events */\n    tempTrackData.linkTrackEvents = tempTrackData.events = gdata.productsevent || "";\n\n    if (gameRSID) {\n        /* Switch to game specific RSID if one exists */\n        s.sa(gameRSID);\n    }\n\n    s.tl(this, "o", "interaction-" + (gdata.interaction || ""), tempTrackData);\n\n    if (gameRSID) {\n        /* \n         * switch back to global standards report suite \n         * if there was a gameRSID to switch to before the tracking call \n         */\n        s.sa(primaryRSID);\n    }\n});',language:"javascript"},timeout:2e3,delayNext:!0}]},{id:"RLd6858e782e7c4afabb91998893e495a6",name:"4. Action Tracker (DOM Ready)",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{global:!0,source:"https://lightning.cartoonnetwork.co.uk/launch/7be62238e4c3/b95cb8f58679/a452bc00f42f/RC509b71028e30467788f2a8188f949508-source.min.js",language:"javascript",isExternal:!0},timeout:2e3,delayNext:!0}]},{id:"RLb1c9808f25ea45a4b2e77b8210c14b23",name:"3.3 Comscore (Page Bottom)",events:[{modulePath:"core/src/lib/events/pageBottom.js",settings:{},ruleOrder:3}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{global:!0,source:'window.PubSub.subscribe("pageview", function(pdata) {\n    var tCS = (((window.tdi || {}).configuration || {}).comscore || {}) || {};\n    var tCE = (tCS.hasOwnProperty(\'isComscoreEnabled\')) ? tCS.isComscoreEnabled : true;\n    if (tCE) {\n        var c_id = (((window.tdi || {}).configuration || {}).comscore || {}).publisherId || "6035748";\n        var cs_ucfr = "";\n        var tOTObj = (((window.tdi || {}).configuration || {}).oneTrust || {}) || {};\n        var tOT = tOTObj.hasOwnProperty(\'useUserConsent\') ? tOTObj.useUserConsent : false;\n        var tAO = (tCS.hasOwnProperty(\'alwaysOn\')) ? tCS.alwaysOn : false;\n        if (pdata.contentplatform && pdata.contentplatform === "amp") {\n            // Google AMP\n            var sendImagePixel = function(src) {\n                var image = new Image();\n                image.src = src;\n                image.style.display = "none";\n                image.width = 1;\n                image.height = 1;\n            };\n            var comscorePageBeacon = function() {\n                var c7 = pdata.pageName || "";\n                var c8 = "";\n                var c9 = document.referrer;\n                var comscorekw = "amp";\n                var str = "c1=2&c2=" + c_id + "&cv=2.0&cj=1&c7=" + c7 + "&c8=" + c8 + "&c9=" + c9 + "&cs_ucfr=" + cs_ucfr + "&comscorekw=" + comscorekw;\n                var protocol = document.location.protocol == "https:" ? "https://sb" : "http://b";\n                sendImagePixel(protocol + ".scorecardresearch.com/p?" + str);\n            };\n            comscorePageBeacon();\n        } else {\n            var comScoreRequest = function() {\n                if (self.COMSCORE) {\n                    self.COMSCORE && COMSCORE.beacon({\n                        c1: "2",\n                        c2: c_id,\n                        cs_ucfr: cs_ucfr\n                    });\n                } else {\n                    var _comscore = window._comscore = _comscore || [];\n                    _comscore.push({\n                        c1: "2",\n                        c2: c_id,\n                        cs_ucfr: cs_ucfr\n                    });\n                    (function() {\n                        var s = document.createElement("script"), el = document.getElementsByTagName("script")[0]; s.async = true;\n                        s.src = "https://sb.scorecardresearch.com/beacon.js";\n                        el.parentNode.insertBefore(s, el);\n                    })();\n                }\n            }\n            if (tOT) {\n                // OneTrust is enabled on the page\n                if (window.OnetrustActiveGroups) {\n                    var groupCookieList = window.OnetrustActiveGroups.split(\',\').filter(window.tdi.util.filterOT);\n                    if (groupCookieList.indexOf("2") > -1 || groupCookieList.indexOf("pf") > -1) {\n                        // fire Comscore if the user accepts the consent\n                        cs_ucfr = \'1\';\n                        comScoreRequest();\n                    } else if (tAO) {\n                        // if always-on flag is true, fire Comscore without the user consent\n                        try {\n                            if (window.OneTrust.IsAlertBoxClosed()) {\n                                cs_ucfr = \'0\';\n                            }\n                        } catch (e) {}\n                        comScoreRequest();\n                    }\n                }\n            } else {\n                // OneTrust is not enabled\n                comScoreRequest();\n            }\n        }\n    }\n});',language:"javascript"},timeout:2e3,delayNext:!0}]},{id:"RLf54b805592d8413e99f4fda6a832390a",name:"3.2 Adobe Video Events (Page Bottom)",events:[{modulePath:"core/src/lib/events/pageBottom.js",settings:{},ruleOrder:2}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{global:!0,
source:'/*************************************************************************\n * ADOBE CONFIDENTIAL\n * ___________________\n *\n * Copyright 2020 Adobe\n * All Rights Reserved.\n *\n * NOTICE: All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n **************************************************************************/\n/*\n * MediaSDK - 2.2.2 - 2020-06-24\n * Copyright (c) 2020 Adobe. All Rights Reserved.\n *\n * Copyright for external libraries used in Media SDK\n * JavaScript MD5 1.0.1\n * https://github.com/blueimp/JavaScript-MD5\n *\n * Copyright 2011, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * http://www.opensource.org/licenses/MIT\n *\n * Based on\n * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message\n * Digest Algorithm, as defined in RFC 1321.\n * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n * See http://pajhome.org.uk/crypt/md5 for more info.\n *\n *\n * umdjs (commonjsStrict.js)\n * Copyright (c) the UMD contributors\n * Licensed under the MIT license:\n * https://github.com/umdjs/umd/blob/master/LICENSE.md\n */\n(function (root, factory) {\n    if (typeof define === \'function\' && define.amd) {\n      define([\'exports\'], factory);\n    } else if (typeof exports === \'object\' && typeof exports.nodeName !== \'string\') {\n      factory(exports);\n    } else {\n      factory(root.ADB = {});\n    }\n  }(typeof self !== \'undefined\' ? self : this, function (exports) {\n    var lib = {};\n    (function () {\n      \n  \n  // Heartbeat core\n  !function(a){if(void 0===b)var b={};if(void 0===c)var c={};if(void 0===d)var d={};if(d.radio||(d.radio={}),d.plugin||(d.plugin={}),void 0===e)var e={};e.clock||(e.clock={}),function(a){"use strict";function b(a,b){var c=(65535&a)+(65535&b);return(a>>16)+(b>>16)+(c>>16)<<16|65535&c}function c(a,b){return a<<b|a>>>32-b}function d(a,d,e,f,g,h){return b(c(b(b(d,a),b(f,h)),g),e)}function e(a,b,c,e,f,g,h){return d(b&c|~b&e,a,b,f,g,h)}function f(a,b,c,e,f,g,h){return d(b&e|c&~e,a,b,f,g,h)}function g(a,b,c,e,f,g,h){return d(b^c^e,a,b,f,g,h)}function h(a,b,c,e,f,g,h){return d(c^(b|~e),a,b,f,g,h)}function i(a,c){a[c>>5]|=128<<c%32,a[14+(c+64>>>9<<4)]=c;var d,i,j,k,l,m=1732584193,n=-271733879,o=-1732584194,p=271733878;for(d=0;d<a.length;d+=16)i=m,j=n,k=o,l=p,m=e(m,n,o,p,a[d],7,-680876936),p=e(p,m,n,o,a[d+1],12,-389564586),o=e(o,p,m,n,a[d+2],17,606105819),n=e(n,o,p,m,a[d+3],22,-1044525330),m=e(m,n,o,p,a[d+4],7,-176418897),p=e(p,m,n,o,a[d+5],12,1200080426),o=e(o,p,m,n,a[d+6],17,-1473231341),n=e(n,o,p,m,a[d+7],22,-45705983),m=e(m,n,o,p,a[d+8],7,1770035416),p=e(p,m,n,o,a[d+9],12,-1958414417),o=e(o,p,m,n,a[d+10],17,-42063),n=e(n,o,p,m,a[d+11],22,-1990404162),m=e(m,n,o,p,a[d+12],7,1804603682),p=e(p,m,n,o,a[d+13],12,-40341101),o=e(o,p,m,n,a[d+14],17,-1502002290),n=e(n,o,p,m,a[d+15],22,1236535329),m=f(m,n,o,p,a[d+1],5,-165796510),p=f(p,m,n,o,a[d+6],9,-1069501632),o=f(o,p,m,n,a[d+11],14,643717713),n=f(n,o,p,m,a[d],20,-373897302),m=f(m,n,o,p,a[d+5],5,-701558691),p=f(p,m,n,o,a[d+10],9,38016083),o=f(o,p,m,n,a[d+15],14,-660478335),n=f(n,o,p,m,a[d+4],20,-405537848),m=f(m,n,o,p,a[d+9],5,568446438),p=f(p,m,n,o,a[d+14],9,-1019803690),o=f(o,p,m,n,a[d+3],14,-187363961),n=f(n,o,p,m,a[d+8],20,1163531501),m=f(m,n,o,p,a[d+13],5,-1444681467),p=f(p,m,n,o,a[d+2],9,-51403784),o=f(o,p,m,n,a[d+7],14,1735328473),n=f(n,o,p,m,a[d+12],20,-1926607734),m=g(m,n,o,p,a[d+5],4,-378558),p=g(p,m,n,o,a[d+8],11,-2022574463),o=g(o,p,m,n,a[d+11],16,1839030562),n=g(n,o,p,m,a[d+14],23,-35309556),m=g(m,n,o,p,a[d+1],4,-1530992060),p=g(p,m,n,o,a[d+4],11,1272893353),o=g(o,p,m,n,a[d+7],16,-155497632),n=g(n,o,p,m,a[d+10],23,-1094730640),m=g(m,n,o,p,a[d+13],4,681279174),p=g(p,m,n,o,a[d],11,-358537222),o=g(o,p,m,n,a[d+3],16,-722521979),n=g(n,o,p,m,a[d+6],23,76029189),m=g(m,n,o,p,a[d+9],4,-640364487),p=g(p,m,n,o,a[d+12],11,-421815835),o=g(o,p,m,n,a[d+15],16,530742520),n=g(n,o,p,m,a[d+2],23,-995338651),m=h(m,n,o,p,a[d],6,-198630844),p=h(p,m,n,o,a[d+7],10,1126891415),o=h(o,p,m,n,a[d+14],15,-1416354905),n=h(n,o,p,m,a[d+5],21,-57434055),m=h(m,n,o,p,a[d+12],6,1700485571),p=h(p,m,n,o,a[d+3],10,-1894986606),o=h(o,p,m,n,a[d+10],15,-1051523),n=h(n,o,p,m,a[d+1],21,-2054922799),m=h(m,n,o,p,a[d+8],6,1873313359),p=h(p,m,n,o,a[d+15],10,-30611744),o=h(o,p,m,n,a[d+6],15,-1560198380),n=h(n,o,p,m,a[d+13],21,1309151649),m=h(m,n,o,p,a[d+4],6,-145523070),p=h(p,m,n,o,a[d+11],10,-1120210379),o=h(o,p,m,n,a[d+2],15,718787259),n=h(n,o,p,m,a[d+9],21,-343485551),m=b(m,i),n=b(n,j),o=b(o,k),p=b(p,l);return[m,n,o,p]}function j(a){var b,c="";for(b=0;b<32*a.length;b+=8)c+=String.fromCharCode(a[b>>5]>>>b%32&255);return c}function k(a){var b,c=[];for(c[(a.length>>2)-1]=void 0,b=0;b<c.length;b+=1)c[b]=0;for(b=0;b<8*a.length;b+=8)c[b>>5]|=(255&a.charCodeAt(b/8))<<b%32;return c}function l(a){return j(i(k(a),8*a.length))}function m(a,b){var c,d,e=k(a),f=[],g=[];for(f[15]=g[15]=void 0,e.length>16&&(e=i(e,8*a.length)),c=0;c<16;c+=1)f[c]=909522486^e[c],g[c]=1549556828^e[c];return d=i(f.concat(k(b)),512+8*b.length),j(i(g.concat(d),640))}function n(a){var b,c,d="0123456789abcdef",e="";for(c=0;c<a.length;c+=1)b=a.charCodeAt(c),e+=d.charAt(b>>>4&15)+d.charAt(15&b);return e}function o(a){return unescape(encodeURIComponent(a))}function p(a){return l(o(a))}function q(a){return n(p(a))}function r(a,b){return m(o(a),o(b))}function s(a,b){return n(r(a,b))}function t(a,b,c){return b?c?r(b,a):s(b,a):c?p(a):q(a)}a.md5=t}(b),function(a){"use strict";var b={};b.startsWith=function(a,b){return 0==a.indexOf(b)},a.StringUtils=b}(b),function(a){"use strict";var b={};b.clone=function(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b},b.merge=function(a,c){var d=b.clone(a);for(var e in c)c.hasOwnProperty(e)&&(d[e]=c[e]);return d},b.append=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])},a.ObjectUtils=b}(b),function(a){"use strict";function b(a){if(null==a)return!0;for(var b=0;b<a.length;++b)if(isNaN(a[b]))return!1;return!0}function c(a,c){if("string"!=typeof a||"string"!=typeof c)return NaN;var d=a.split("."),e=c.split(".");if(!b(d)||!b(e))return NaN;for(var f=Math.max(d.length,e.length),g=0;g<f;++g){var h=void 0!=d[g]?d[g]:"0",i=void 0!=e[g]?e[g]:"0";if(h=Number(h),i=Number(i),h>i)return 1;if(h<i)return-1}return 0}var d={};d.isGreaterThan=function(a,b){return c(a,b)>0},d.isGreaterThanEqual=function(a,b){return c(a,b)>=0},d.isLessThan=function(a,b){return c(a,b)<0},d.isLessThanEqual=function(a,b){return c(a,b)<=0},d.isSame=function(a,b){return 0===c(a,b)},d.isDifferent=function(a,b){return 0!==c(a,b)},a.VersionUtils=d}(b),function(a){"use strict";function b(a,b,c){this.fn=a,this.ctx=b,this.params=c}b.prototype.run=function(){this.params?this.fn.apply(this.ctx,this.params):this.fn.apply(this.ctx)},a.radio.Command=b}(d),function(a){"use strict";function b(a,b){this._queue=[],this._lastTs=0,this._isSuspended=void 0!==a&&a,this._delay=void 0!==b?b:0}b.prototype.addCommand=function(a){this._queue.push(a),this._drain()},b.prototype.cancelAllCommands=function(){this._queue=[]},b.prototype.isEmpty=function(){return 0===this._queue.length},b.prototype.suspend=function(){this._isSuspended=!0},b.prototype.resume=function(){this._isSuspended=!1,this._drain()},b.prototype.flush=function(){this._isSuspended=!1;for(var a=0;a<this._queue.length;a++){this._queue[a].run()}this._queue=[]},b.prototype._drain=function(){if(!this._isSuspended&&!this._drainInProgress){this._drainInProgress=!0;var a=this;!function b(){var c=a._queue.shift();c?a._runCommand(c,function(){a._isSuspended||b()}):a._drainInProgress=!1}()}},b.prototype._runCommand=function(a,b){function c(){a.run(),null!=b&&b.call(d)}var d=this;if(0==this._lastTs)c();else{var e=(new Date).getTime(),f=e-this._lastTs;this._lastTs=e,f<this._delay?setTimeout(c,this._delay-f):c()}},a.radio.CommandQueue=b}(d),function(a){"use strict";function b(a,b){if(this._name=a,!b)throw new Error("Reference to the logger object cannot be NULL");this._logger=b,this._listeners={},this._requests={},this._commands={},this._isShutDown=!1}function c(a,c){if(a===c)return!0;for(var d=(a||"").split(b.SEPARATOR),e=(c||"").split(b.SEPARATOR),f=!0,g=0;g<d.length;g++)f=f&&(d[g]===b.WILDCARD||d[g]===e[g]);return f}b.WILDCARD="*",b.SEPARATOR=":",b.prototype.toString=function(){return"<channel: "+this._name+">"},b.prototype.shutdown=function(){this._isShutDown||(this._logger.debug(d,"#shutdown > Shutting down"),this.off(),this._requests={},this._commands={},this._isShutDown=!0)},b.prototype.on=function(a,b,c){this._isShutDown||(this._listeners[a]||(this._listeners[a]=[]),this._listeners[a].push({fn:b,ctx:c}))},b.prototype.off=function(a,b,c){if(!this._isShutDown){if(b="function"==typeof b?b:null,!a&&null==b&&!c)return void(this._listeners={});if(a)this._removeListener(a,b,c);else for(a in this._listeners)this._listeners.hasOwnProperty(a)&&this._removeListener(a,b,c)}},b.prototype.trigger=function(a){if(!this._isShutDown)for(var b in this._listeners)if(this._listeners.hasOwnProperty(b)&&c(b,a.name))for(var d=this._listeners[b].slice(0),e=0;e<d.length;e++){var f=d[e];f.fn.call(f.ctx,a)}},b.prototype.comply=function(a,b,c){this._isShutDown||(this._commands[a]={cmd:b,ctx:c})},b.prototype.command=function(a,b){if(!this._isShutDown){var c=this._commands[a];if(!c)return void this._logger.warn(d,"#command > No command handler for: "+a);c.cmd.call(c.ctx,b)}},b.prototype.reply=function(a,b,c){this._isShutDown||(this._requests[a]={fn:b,ctx:c})},b.prototype.request=function(a){if(!this._isShutDown){var b=this._requests[a];return b?b.fn.call(b.ctx):(this._logger.warn(d,"#request > No request handler for: "+a),null)}},b.prototype._removeListener=function(a,b,c){b="function"==typeof b?b:null;var d=this._listeners[a];if(d){if(!d.length||null==b&&!c)return void delete this._listeners[a];for(var e=0;e<d.length;e++){var f=d[e];null!==b&&b!==f.fn||c&&c!==f.ctx||this._listeners[a].splice(e,1)}}};var d="radio::Channel";a.radio.Channel=b}(d),function(a){"use strict";function b(a){if(!a)throw new Error("Reference to the logger object cannot be NULL");this._logger=a,this._channels={}}var c=a.radio.Channel;b.prototype.channel=function(a){return this._channels[a]||(this._channels[a]=new c(a,this._logger)),this._channels[a]},b.prototype.shutdown=function(){for(var a in this._channels)this._channels.hasOwnProperty(a)&&this._channels[a].shutdown()},a.radio.Radio=b}(d),function(a){"use strict";function b(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a}a.extend=b}(d),function(a){"use strict";function b(){}b.prototype.write=function(a){throw new Error("Implementation error: Method must be overridden.")},a.ILogWriter=b}(d),function(a){"use strict";function b(){}b.prototype.write=function(a){window.console&&window.console.log&&window.console.log(a)},a.LogWriter=b}(d),function(a){"use strict";function b(){}b.prototype.setLogWriter=function(a){throw new Error("Implementation error: Method must be overridden.")},b.prototype.getLogWriter=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.getEnabled=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.enable=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.disable=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.debug=function(a,b){throw new Error("Implementation error: Method must be overridden.")},b.prototype.info=function(a,b){throw new Error("Implementation error: Method must be overridden.")},b.prototype.warn=function(a,b){throw new Error("Implementation error: Method must be overridden.")},b.prototype.error=function(a,b){throw new Error("Implementation error: Method must be overridden.")},a.ILogger=b}(d),function(a){"use strict";function b(){this._logWriter=new d}function c(a){return a<10?"00"+a:a<100?"0"+a:""+a}var d=a.LogWriter;b.prototype.setLogWriter=function(a){if(!a)throw new Error("Reference to the ILogWriter object cannot be NULL");this._logWriter=a,this._enabled=!1},b.prototype.getLogWriter=function(){return this._logWriter},b.prototype.getEnabled=function(){return this._enabled},b.prototype.enable=function(){this._enabled=!0},b.prototype.disable=function(){this._enabled=!1},b.prototype.debug=function(a,b){this._log(a,f,b)},b.prototype.info=function(a,b){this._log(a,e,b)},b.prototype.warn=function(a,b){this._log(a,g,b)},b.prototype.error=function(a,b){this._log(a,h,b)},b.prototype._log=function(a,b,d){if(b==h||this._enabled){var e="",f=new Date;e+="["+f.toTimeString()+"."+c(f.getMilliseconds())+"] ["+b+"] ",e+="["+a+"] "+d,this._logWriter.write(e)}};var e="INFO",f="DEBUG",g="WARN",h="ERROR";a.Logger=b}(d),function(a){"use strict";function b(a,b){this._pluginName=a,this._eventName=b}var c=a.radio.Channel;b.prototype.getPluginName=function(){return this._pluginName},b.prototype.getEventName=function(){return this._eventName},b.prototype.getName=function(){return this._pluginName+c.SEPARATOR+this._eventName},a.Trigger=b}(d),function(a){"use strict";function b(a,b){this.name=a,this.data=b}b.SUCCESS="success",b.ERROR="error",b.createFromTrigger=function(a){return new b(a.getName())},a.Event=b}(d),function(a){"use strict";function b(){this._events={}}b.prototype.addEventListener=function(a,b,c){a&&b&&(c=c||window,this._events[a]=this._events[a]||[],this._events[a].push({cb:b,ctx:c}))},b.prototype.removeEventListener=function(a,b,c){if(a&&b){c=c||window;var d,e,f=!1;for(e in this._events)if(a===e){f=!0;break}if(f){for(d=this._events[e].length-1;d>=0;d--){var g=this._events[e][d];b===g.cb&&c===g.ctx&&this._events[e].splice(d,1)}this._events[e].length||delete this._events[e]}}},b.prototype.dispatchEvent=function(a){if(a.name){var b,c;for(b in this._events)if(this._events.hasOwnProperty(b)&&a.name===b){var d=this._events[b],e=d.slice(0),f=e.length;for(c=0;c<f;c++)e[c].cb.call(e[c].ctx,a);break}}},b.prototype.removeAllListeners=function(a){if(a){var b,c;for(c in this._events)if(this._events.hasOwnProperty(c)){for(b=this._events[c].length-1;b>=0;b--){var d=this._events[c][b];d.ctx===a&&this._events[c].splice(b,1)}this._events[c].length||delete this._events[c]}}else this._events={}},a.EventDispatcher=b}(d),function(a){"use strict";function b(){}function c(a,b){this.url=a||null,this.method=b,this._xmlhttp=null}function d(){d.__super__.constructor.call(this),this._connection=null}var e=a.Event,f=a.EventDispatcher;b.GET="GET",d.RESPONSE="response",d.INSTANCE="instance",a.extend(d,f),d.prototype.close=function(){this.removeAllListeners(null)},d.prototype.load=function(a){a&&a.method&&a.url&&(a._xmlhttp=this._createCORSRequest(a),a._xmlhttp?a._xmlhttp.send():this._loadImage(a))},d.prototype._createCORSRequest=function(a){var b=null;if(void 0!==window.XMLHttpRequest){var c=new window.XMLHttpRequest;"withCredentials"in c&&(b=c,b.open(a.method,a.url,!0))}if(null==b&&void 0!==window.XDomainRequest&&(b=new window.XDomainRequest,b.open(a.method,a.url)),b){var f={};f[d.INSTANCE]=this;var g=this;b.onload=function(){if(b.status&&parseInt(b.status,10)>=400)return this.onerror();f[d.RESPONSE]=b.responseText,g.dispatchEvent(new e(e.SUCCESS,f))},b.onerror=function(){g.dispatchEvent(new e(e.ERROR,f))}}return b},d.prototype._loadImage=function(a){this._connection||(this._connection=new Image,this._connection.alt=""),this._connection.src=a.url;var b={};b[d.RESPONSE]="",b[d.INSTANCE]=this,this.dispatchEvent(new e(e.SUCCESS,b))},a.URLRequestMethod=b,a.URLRequest=c,a.URLLoader=d}(d),function(a){"use strict";var b="2.2.2.230",c="96e624",d={};d.getVersion=function(){return"js-"+b+"-"+c},d.getMajor=function(){return d.getNumberAtPosition(0)},d.getMinor=function(){return d.getNumberAtPosition(1)},d.getMicro=function(){return d.getNumberAtPosition(2)},d.getPatch=function(){return d.getNumberAtPosition(3)},d.getBuild=function(){return c},d.getApiLevel=function(){return 4},d.getNumberAtPosition=function(a){return b.split(".")[a]},a.Version=d}(c),function(a){"use strict";function b(a,b){this._message=a,this._details=b}b.prototype.getMessage=function(){return this._message},b.prototype.getDetails=function(){return this._details},a.ErrorInfo=b}(c),function(a){"use strict";function b(){this.debugLogging=!1}a.HeartbeatConfig=b}(c),function(a){"use strict";function b(){}b.prototype.onError=function(a){},a.HeartbeatDelegate=b}(c),function(a){"use strict";function b(){}b.prototype.configure=function(a){throw new Error("Implementation error: Method must be overridden.")},b.prototype.bootstrap=function(a){throw new Error("Implementation error: Method must be overridden.")},b.prototype.setup=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.destroy=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.enable=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.disable=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.getName=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.isInitialized=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.resolveData=function(a){throw new Error("Implementation error: Method must be overridden.")},a.plugin.IPlugin=b}(d),function(a){"use strict";function b(a,b,c,d){this.trigger=a,this.action=c,this.plugin=b,this._paramMappings={},this.mergeParams(d)}var c=a.plugin.ParamMapping;b.prototype.mergeParams=function(a){if(a)for(var b=0;b<a.length;b++){var c=a[b];this._paramMappings[c.getKeyName()]=c}},b.prototype.getParams=function(){var a=[];for(var b in this._paramMappings)this._paramMappings.hasOwnProperty(b)&&a.push(this._paramMappings[b]);return a},b.prototype.addParam=function(a){this._paramMappings[a.getKeyName()]=a},b.prototype.removeParam=function(a,b){var d=new c(a,b);this._paramMappings.hasOwnProperty(d.getKeyName())&&delete this._paramMappings[d.getKeyName()]},a.plugin.Behaviour=b}(d),function(a){"use strict";function b(a,b,d){this._pluginName=a,this._key=b,this._paramName=d||a+c.SEPARATOR+b}var c=a.radio.Channel;b.prototype.getPluginName=function(){return this._pluginName},b.prototype.getKey=function(){return this._key},b.prototype.getKeyName=function(){return this._pluginName+c.SEPARATOR+this._key},b.prototype.getParamName=function(){return this._paramName},a.plugin.ParamMapping=b}(d),function(a){"use strict";function b(a){if(!a)throw new Error("Reference to the logger object cannot be NULL");this._logger=a,this._plugins={},this._behaviours={},this._radio=new d(this._logger),this._dataChannel=this._radio.channel(g),this._ctrlChannel=this._radio.channel(h)}var c=a.Event,d=a.radio.Radio,e=a.radio.Channel,f=a.plugin.Behaviour;b.ERROR="error",b.prototype.addPlugin=function(a){var b=a.getName();this._plugins[b]&&this._logger.warn(i,"#addPlugin > Replacing plugin: "+b),this._plugins[b]=a,a.bootstrap(this)},b.prototype.setupPlugins=function(){for(var a in this._plugins)this._plugins.hasOwnProperty(a)&&this._plugins[a].setup()},b.prototype.pluginExists=function(a){return!!this._plugins[a]},b.prototype.isPluginInitialized=function(a){return this._plugins[a]&&this._plugins[a].isInitialized()},b.prototype.on=function(a,b,c,d){this._dataChannel.on(a+e.SEPARATOR+b,c,d)},b.prototype.off=function(a,b,c,d){var f=a&&b?a+e.SEPARATOR+b:null;this._dataChannel.off(f,c,d)},b.prototype.trigger=function(a){var b=a.name,c=this._behaviours[b];if(c){var d,e,f,g,h,i={},j={};for(d=0;d<c.length;d++)if(f=c[d],g=f.getParams())for(e=0;e<g.length;e++)h=g[e],i[h.getPluginName()]=i[h.getPluginName()]||[],h.key in i[h.getPluginName()]||i[h.getPluginName()].push(h.getKey());for(var k in i)i.hasOwnProperty(k)&&(j[k]=this.request(k,i[k]));for(d=0;d<c.length;d++){f=c[d];var l={_behaviour:f,_eventData:a.data||{}};if(g=f.getParams()){for(e=0;e<g.length;e++)h=g[e],l[h.getParamName()]=j[h.getPluginName()]?j[h.getPluginName()][h.getKey()]:null;this.command(f.plugin.getName(),f.action,l)}}}this._dataChannel.trigger(a)},b.prototype.request=function(a,b){var c=this._plugins[a];return c&&b&&0!=b.length?c.resolveData(b):null},b.prototype.raise=function(a){this._errorInfo=a;var d=new c(b.ERROR,a);this._ctrlChannel.trigger(d)},b.prototype.getErrorInfo=function(){return this._errorInfo},b.prototype.destroy=function(){this._radio.shutdown();for(var a in this._plugins)this._plugins.hasOwnProperty(a)&&this._plugins[a].destroy()},b.prototype.comply=function(a,b,c){this._dataChannel.comply(a.getName()+e.SEPARATOR+b,c,a)},b.prototype.command=function(a,b,c){this._dataChannel.command(a+e.SEPARATOR+b,c)},b.prototype.registerBehaviour=function(a,b,c,d){var e=a.getName(),g=new f(a,b,c,d);this._behaviours[e]=this._behaviours[e]||[],this._behaviours[e].push(g)};var g="data_channel",h="ctrl_channel",i="plugin::PluginManager";a.plugin.PluginManager=b}(d),function(a,b){"use strict";function c(a){this._name=a,this._isInitialized=!1,this._isDestroyed=!1,this._isEnabled=!0,this._dataResolver={},this._logTag="plugin::"+this.getName(),this._logger=new d}var d=a.Logger,e=a.Trigger,f=a.Event,g=b.ErrorInfo;c.INITIALIZED="initialized",c.prototype.configure=function(a){},c.prototype.bootstrap=function(a){this._pluginManager=a,this._isDestroyed&&this._pluginManager.raise(new g("Invalid state.","Plugin already destroyed."))},c.prototype.setup=function(){this._trigger(c.INITIALIZED),this._isInitialized=!0},c.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._teardown())},c.prototype.enable=function(){this._isEnabled=!0,this._enabled()},c.prototype.disable=function(){this._isEnabled=!1,this._disabled()},c.prototype.getName=function(){return this._name},c.prototype.getLogger=function(){return this._logger},c.prototype.isInitialized=function(){return this._isInitialized},c.prototype.resolveData=function(a){if(!this._isEnabled||!this._isInitialized)return this._logger.warn(this._logTag,"Unable to retrieve plugin data. Plugin: "+this._name+". Enabled: "+this._isEnabled+". Initialized: "+this._isInitialized+"."),null;if("function"==typeof this._dataResolver)return this._dataResolver.call(this,a);var b=null;if(a)for(var c=0;c<a.length;c++){var d=a[c];this._dataResolver.hasOwnProperty(d)&&(b=b||{},"function"==typeof this._dataResolver[d]?b[d]=this._dataResolver[d].call(this):b[d]=this._dataResolver[d])}return b},c.prototype.toString=function(){return"<plugin: "+this._name+">"},c.prototype._enabled=function(){},c.prototype._disabled=function(){},c.prototype._teardown=function(){},c.prototype._canProcess=function(){return this._isEnabled?!this._isDestroyed||(this._logger.error(this._logTag,"Plugin destroyed."),!1):(this._logger.error(this._logTag,"Plugin disabled."),!1)},c.prototype._trigger=function(a,b){var c=f.createFromTrigger(new e(this.getName(),a));c.data=b,this._pluginManager.trigger(c)},a.plugin.BasePlugin=c}(d,c),function(a){"use strict";function b(a,b,c){this.name=a,this.interval=b,this.isActive=!1,this.repeatCount=void 0!==c?c:e,this._nextTickTimestamp=0,this.reset()}function c(a,b){if(!a)throw new Error("Reference to the ClockService object cannot be NULL");if(this._service=a,!b)throw new Error("Reference to the logger object cannot be NULL");this._logger=b,this._isDestroyed=!1,this._timers={};var c=this;this._clock=window.setInterval(function(){c._onTick()},1e3*f)}b.prototype.reset=function(){this.tick=0,this._createdTimestamp=(new Date).getTime(),this._updateNextTickTimestamp()},b.prototype.shouldTick=function(){return(new Date).getTime()>this._nextTickTimestamp-g/2&&(this.tick++,this._updateNextTickTimestamp(),!0)},b.prototype._updateNextTickTimestamp=function(){var a=(new Date).getTime();this._nextTickTimestamp=a+1e3*this.interval-1},c.prototype.createTimer=function(a,c,d){this._timers[a]=new b(a,c,d)},c.prototype.destroyTimer=function(a){delete this._timers[a]},c.prototype.resumeTimer=function(a,b){b=void 0!==b&&b,this._logger.debug(d,"#resumeTimer(name="+a+", reset="+b+")");var c=this._timers[a];c&&(c.isActive=!0,b&&c.reset())},c.prototype.pauseTimer=function(a,b){b=void 0!==b&&b,this._logger.debug(d,"#pauseTimer(name="+a+", reset="+b+")");var c=this._timers[a];c&&(c.isActive=!1,b&&c.reset())},c.prototype.isTimerPaused=function(a){var b=this._timers[a];return!!b&&!b.isActive},c.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._timers={},window.clearInterval(this._clock))},c.prototype._onTick=function(){for(var a in this._timers)if(this._timers.hasOwnProperty(a)){var b=this._timers[a];b.isActive&&b.shouldTick()&&(b.interval>1&&this._logger.debug(d,"#_onTick() > "+b.name+"("+b.tick+" | "+b.repeatCount+")"),0!=b.repeatCount?(this._service.onTick(b.name,b.interval,b.tick),b.repeatCount!=e&&b.repeatCount--):this.destroyTimer(b.name))}};var d="service.clock::TimerManager",e=-1,f=.25,g=1e3*f;a.clock.TimerDescriptor=b,a.clock.TimerManager=c}(e),function(a,b,c){"use strict";function d(a){if(d.__super__.constructor.call(this,h),!a)throw new Error("Reference to the logger object cannot be NULL");this._logger=a,this._timerManager=new e(this,this._logger),this._setupDataResolver()}var e=c.clock.TimerManager,f=b.StringUtils,g=a.plugin.BasePlugin;a.extend(d,g),d.prototype.bootstrap=function(a){d.__super__.bootstrap.call(this,a),this._pluginManager.comply(this,i,this._cmdCreate),this._pluginManager.comply(this,k,this._cmdResume),this._pluginManager.comply(this,j,this._cmdPause),this._pluginManager.comply(this,l,this._cmdDestroy)},d.prototype._teardown=function(){this._timerManager.destroy()},d.prototype._cmdCreate=function(a){var b=a[o]||s;this._timerManager.createTimer(a[m],a[n],b)},d.prototype._cmdPause=function(a){this._timerManager.pauseTimer(a[m],!!a[q])},d.prototype._cmdResume=function(a){this._timerManager.resumeTimer(a[m],!!a[q])},d.prototype._cmdDestroy=function(a){this._timerManager.destroyTimer(a[m])},d.prototype.onTick=function(a,b,c){a+=".tick";var d={};d[m]=a,d[n]=b,d[p]=c,this._trigger(a,d)},d.prototype._setupDataResolver=function(){var a={},b=this._timerManager;a[r]=function(a){return b.isTimerPaused(a)},this._dataResolver=function(b){if(!b||0==b.length)return null;for(var c=null,d=0;d<b.length;d++){var e=b[d];if(c=c||{},f.startsWith(e,r)){var g=e.split(r+".");g.length>0&&(c[e]=a[r].call(this,g[1]))}}return c}};var h="service.clock",i="create",j="pause",k="resume",l="destroy",m="name",n="interval",o="repeat_count",p="tick",q="reset",r="is_paused",s=-1;c.clock.ClockService=d}(d,b,e),function(a,b,c){"use strict";function d(a,b){if(this._logger=new e,this._pluginManager=new f(this._logger),this._pluginManager.addPlugin(new g(this._logger)),b)for(var c=0;c<b.length;c++)this._pluginManager.addPlugin(b[c]);this._pluginManager.setupPlugins(),this._isDestroyed=!1}var e=a.Logger,f=a.plugin.PluginManager,g=b.clock.ClockService;d.prototype.configure=function(a){if(!a)throw new Error("Configuration object cannot be NULL.");a.debugLogging?this._logger.enable():this._logger.disable(),this._isDestroyed&&this._logger.error(h,"Instance is destroyed.")},d.prototype.destroy=function(){this._isDestroyed||(this._pluginManager.destroy(),this._isDestroyed=!0)};var h="Heartbeat";c.Heartbeat=d}(d,e,c),a.ADB||(a.ADB={}),a.ADB.core||(a.ADB.core=d),a.ADB.va||(a.ADB.va=c),a.ADB.va.utils||(a.ADB.va.utils=b),a.ADB.va.plugins||(a.ADB.va.plugins={})}(this);\n  \n  // VideoPlayerPlugin\n  !function(a){if(void 0===b)var b={};!function(a){"use strict";var b={};b.ASSET_TYPE_VOD="vod",b.ASSET_TYPE_LIVE="live",b.ASSET_TYPE_LINEAR="linear",a.AssetType=b}(b),function(a){"use strict";function b(){this.playerName=null,this.name=null,this.position=null,this.startTime=null}b.prototype.toString=function(){return"playerName="+this.playerName+", name="+this.name+", position="+this.position+", startTime="+this.startTime},a.AdBreakInfo=b}(b),function(a){"use strict";function b(){this.id=null,this.name=null,this.length=null,this.position=null,this.granularTracking=!0}b.prototype.toString=function(){return"id="+this.id+", name="+this.name+", length="+this.length+", position="+this.position+", granularTracking="+this.granularTracking},a.AdInfo=b}(b),function(a){"use strict";function b(){this.name=null,this.length=null,this.position=null,this.startTime=null}b.prototype.toString=function(){return"name="+this.name+", length="+this.length+", position="+this.position+", startTime="+this.startTime},a.ChapterInfo=b}(b),function(a){"use strict";function b(){this.bitrate=null,this.fps=null,this.droppedFrames=null,this.startupTime=null}b.prototype.toString=function(){return"bitrate="+this.bitrate+", fps="+this.fps+", droppedFrames="+this.droppedFrames+", startupTime="+this.startupTime},a.QoSInfo=b}(b),function(a){"use strict";function b(){this.playerName=null,this.id=null,this.name=null,this.length=null,this.playhead=null,this.mediaType=null,this.streamType=null,this.resumed=!1}b.prototype.toString=function(){return"playerName="+this.playerName+", id="+this.id+", name="+this.name+", length="+this.length+", playhead="+this.playhead+", mediaType="+this.mediaType+", streamType="+this.streamType+", resumed="+this.resumed},a.VideoInfo=b}(b),function(a){"use strict";function b(){this.debugLogging=!1}a.VideoPlayerPluginConfig=b}(b),function(a){"use strict";function b(){}b.prototype.getVideoInfo=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.getAdBreakInfo=function(){return null},b.prototype.getAdInfo=function(){return null},b.prototype.getChapterInfo=function(){return null},b.prototype.getQoSInfo=function(){return null},a.VideoPlayerPluginDelegate=b}(b),function(a,b){"use strict";function c(a){if(c.__super__.constructor.call(this,h),!a)throw new Error("PlayerPlugin delegate cannot be NULL.");this._delegate=a,this._isTrackingSessionActive=!1,this._isTrackingSessionStarted=!1,this._setupDataResolver()}var d=a.plugin.ParamMapping,e=a.Trigger,f=a.plugin.BasePlugin,g=b.VideoPlayerPluginConfig;a.extend(c,f),c.prototype.configure=function(a){if(!a)throw new Error("Reference to the configuration data cannot be NULL.");if(!(a instanceof g))throw new Error("Expected config data to be instance of VideoPlayerPluginConfig.");a.debugLogging?this._logger.enable():this._logger.disable(),this._logger.debug(this._logTag,"#configure(debugLogging="+a.debugLogging+")")},c.prototype.bootstrap=function(a){c.__super__.bootstrap.call(this,a),this._registerCommands(),this._registerBehaviours()},c.prototype._cmdVideoIdleStart=function(a){this._logger.info(this._logTag,"#_cmdVideoIdleStart()"),this._videoIdle=!0},c.prototype._cmdVideoIdleResume=function(a){this._logger.info(this._logTag,"#_cmdVideoIdleResume()"),this._videoIdle&&(this._trigger(p),this._trigger(q),a.isInAd&&(this._trigger(x),this._isTrackingAdBreak=!0),a.isInAd&&(this._trigger(z),this._isTrackingAd=!0),a.isInChapter&&this._trigger(G),this._trigger(u)),this._videoIdle=!1},c.prototype.trackSessionStart=function(){if(this._logger.info(this._logTag,"#trackSessionStart()"),this._canProcess()){if(!this._isTrackingSessionActive)return void this._logger.warn(this._logTag,"#trackSessionStart() > No active tracking session.");if(this._isTrackingSessionStarted)return void this._logger.info(this._logTag,"#trackSessionStart() > Tracking session already started.");this._trigger(p),this._isTrackingSessionStarted=!0;var a=this._dataResolver(["video.resumed"]);a.hasOwnProperty("video.resumed")&&a["video.resumed"]&&this._trigger(q)}},c.prototype.trackVideoLoad=function(){this._logger.info(this._logTag,"#trackVideoLoad()"),this._canProcess()&&(this._isTrackingAdBreak=!1,this._isTrackingAd=!1,this._contentStarted=!1,this._isPaused=!0,this._isBuffering=!1,this._isSeeking=!1,this._playheadTimer=null,this._previousPlayhead=-1,this._stalledPlayheadCount=0,this._playheadStalled=!1,this._videoIdle=!1,this._trigger(m),this._isTrackingSessionActive=!0,this._isTrackingSessionStarted=!1)},c.prototype.trackVideoUnload=function(){if(this._logger.info(this._logTag,"#trackVideoUnload()"),this._canProcess()){if(!this._isTrackingSessionActive)return void this._logger.warn(this._logTag,"#trackVideoUnload() > No active tracking session.");this._stopPlayheadTimer(),this._trigger(n),this._isTrackingSessionActive=!1,this._isTrackingSessionStarted=!1,this._contentStarted=!1}},c.prototype.beginReporting=function(){this._logger.info(this._logTag,"#beginReporting()"),this._canProcess()&&this._startSessionIfNeeded("beginReporting")&&this._trigger(N)},c.prototype.trackPlay=function(){this._logger.info(this._logTag,"#trackPlay()"),this._canProcess()&&this._startSessionIfNeeded("trackPlay")&&this._allowPlayerStateChange()&&(this._isPaused=!1,this._trigger(u),this._startPlayheadTimer())},c.prototype.trackPause=function(){if(this._logger.info(this._logTag,"#trackPause()"),this._canProcess()&&this._startSessionIfNeeded("trackPause")&&this._allowPlayerStateChange()){this._stopPlayheadTimer();var a={};a[P]=!1,this._isPaused=!0,this._trigger(v,a)}},c.prototype.trackBufferStart=function(){this._logger.info(this._logTag,"#trackBufferStart()"),this._canProcess()&&this._startSessionIfNeeded("trackBufferStart")&&this._allowPlayerStateChange()&&(this._stopPlayheadTimer(),this._isBuffering=!0,this._trigger(C))},c.prototype.trackBufferComplete=function(){this._logger.info(this._logTag,"#trackBufferComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackBufferComplete")&&this._allowPlayerStateChange()&&(this._isBuffering=!1,this._trigger(D),this._startPlayheadTimer())},c.prototype.trackSeekStart=function(){this._logger.info(this._logTag,"#trackSeekStart()"),this._canProcess()&&this._startSessionIfNeeded("trackSeekStart")&&this._allowPlayerStateChange()&&(this._stopPlayheadTimer(),this._isSeeking=!0,this._trigger(E))},c.prototype.trackSeekComplete=function(){this._logger.info(this._logTag,"#trackSeekComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackSeekComplete")&&this._allowPlayerStateChange()&&(this._isSeeking=!1,this._trigger(F),this._startPlayheadTimer())},c.prototype.trackComplete=function(a,b){if(this._logger.info(this._logTag,"#trackComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackComplete")){if(this._stopPlayheadTimer(),this._videoIdle)return this._logger.info(this._logTag,"#trackComplete() > Video session is already in Idle State."),void(a&&a());var c={};c[O]=a,b=void 0===b||!!b,b?this._trigger(r,c):(this._trigger(s),this._trigger(o,c))}},c.prototype.trackTimedMetadata=function(a){this._logger.info(this._logTag,"#trackComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackTimedMetadata")&&this._trigger(t,a)},c.prototype.trackChapterStart=function(){this._logger.info(this._logTag,"#trackChapterStart()"),this._canProcess()&&this._startSessionIfNeeded("#trackChapterStart")&&this._trigger(G)},c.prototype.trackChapterComplete=function(){this._logger.info(this._logTag,"#trackChapterComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackChapterComplete")&&this._trigger(H)},c.prototype.trackChapterSkip=function(){this._logger.info(this._logTag,"#trackChapterSkip()"),this._canProcess()&&this._startSessionIfNeeded("trackChapterSkip")&&this._trigger(I)},c.prototype.trackAdBreakStart=function(){this._logger.info(this._logTag,"#trackAdBreakStart()"),this._canProcess()&&this._startSessionIfNeeded("trackAdBreakStart")&&(this._trigger(x),this._isTrackingAdBreak=!0)},c.prototype.trackAdBreakComplete=function(){this._logger.info(this._logTag,"#trackAdBreakComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackAdBreakComplete")&&(this._trigger(y),this._isTrackingAdBreak=!1)},c.prototype.trackAdStart=function(){this._logger.info(this._logTag,"#trackAdStart()"),this._canProcess()&&this._startSessionIfNeeded("trackAdStart")&&(this._trigger(z),this._isTrackingAd=!0)},c.prototype.trackAdComplete=function(){this._logger.info(this._logTag,"#trackAdComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackAdComplete")&&(this._trigger(A),this._isTrackingAd=!1)},c.prototype.trackAdSkip=function(){this._logger.info(this._logTag,"#trackAdSkip()"),this._canProcess()&&this._startSessionIfNeeded("trackAdSkip")&&(this._trigger(B),this._isTrackingAd=!1)},c.prototype.trackBitrateChange=function(){this._logger.info(this._logTag,"#trackBitrateChange()"),this._canProcess()&&this._startSessionIfNeeded("trackBitrateChange")&&this._trigger(J)},c.prototype.trackVideoPlayerError=function(a){if(this._logger.info(this._logTag,"#trackVideoPlayerError(errorId="+a+")"),this._startSessionIfNeeded("trackVideoPlayerError")){var b={};b[Q]=l,b[R]=a,this._trigger(K,b)}},c.prototype.trackApplicationError=function(a){if(this._logger.info(this._logTag,"#trackApplicationError(errorId="+a+")"),this._startSessionIfNeeded("trackApplicationError")){var b={};b[Q]=k,b[R]=a,this._trigger(K,b)}},c.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleVideoIdleStart",this._cmdVideoIdleStart),this._pluginManager.comply(this,"handleVideoIdleResume",this._cmdVideoIdleResume)},c.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new e(j,L),this,"handleVideoIdleStart"),this._pluginManager.registerBehaviour(new e(j,M),this,"handleVideoIdleResume",[new d(i,"ad.isInAdBreak","isInAdBreak"),new d(i,"ad.isInAd","isInAd"),new d(i,"chapter.isInChapter","isInChapter")])},c.prototype._setupDataResolver=function(){function a(){return g.video?g.video:(g.video=h._delegate.getVideoInfo(),h._logger.info(h._logTag,"Data from delegate > VideoInfo: "+g.video),g.video)}function b(){return g.ad?g.ad:(g.ad=h._delegate.getAdInfo(),h._logger.info(h._logTag,"Data from delegate > AdInfo: "+g.ad),g.ad)}function c(){return g.pod?g.pod:(g.pod=h._delegate.getAdBreakInfo(),h._logger.info(h._logTag,"Data from delegate > AdBreakInfo: "+g.pod),g.pod)}function d(){return g.chapter?g.chapter:(g.chapter=h._delegate.getChapterInfo(),h._logger.info(h._logTag,"Data from delegate > ChapterInfo: "+g.chapter),g.chapter)}function e(){return g.qos?g.qos:(g.qos=h._delegate.getQoSInfo(),h._logger.info(h._logTag,"Data from delegate > QoSInfo: "+g.qos),g.qos)}var f={},g={},h=this;f["video.id"]=function(){var b=a(),c=b?b.id:null;return h._logger.debug(h._logTag,"Resolving video.id: "+c),c},f["video.name"]=function(){var b=a(),c=b?b.name:null;return h._logger.debug(h._logTag,"Resolving video.name: "+c),c},f["video.length"]=function(){var b=a(),c=b?b.length:NaN;return h._logger.debug(h._logTag,"Resolving video.length: "+c),c},f["video.playerName"]=function(){var b=a(),c=b?b.playerName:null;return h._logger.debug(h._logTag,"Resolving video.playerName: "+c),c},f["video.mediaType"]=function(){var b=a(),c=b?b.mediaType:null;return h._logger.debug(h._logTag,"Resolving video.mediaType: "+c),c},f["video.streamType"]=function(){var b=a(),c=b?b.streamType:null;return h._logger.debug(h._logTag,"Resolving video.streamType: "+c),c},f["video.playhead"]=function(){var b=a(),c=b?b.playhead:NaN;return h._logger.debug(h._logTag,"Resolving video.playhead: "+c),c},f["video.resumed"]=function(){var b=a(),c=!!b&&b.resumed;return h._logger.debug(h._logTag,"Resolving video.resumed: "+c),c},f["video.playheadStalled"]=function(){return this._playheadStalled},f["pod.name"]=function(){var a=c(),b=a?a.name:null;return h._logger.debug(h._logTag,"Resolving pod.name: "+b),b},f["pod.playerName"]=function(){var a=c(),b=a?a.playerName:null;return h._logger.debug(h._logTag,"Resolving pod.playerName: "+b),b},f["pod.position"]=function(){var a=c(),b=a?a.position:NaN;return h._logger.debug(h._logTag,"Resolving pod.position: "+b),b},f["pod.startTime"]=function(){var a=c(),b=a?a.startTime:NaN;return h._logger.debug(h._logTag,"Resolving pod.startTime: "+b),b},f["ad.isInAd"]=function(){var a=b(),c=null!=a;return h._logger.debug(h._logTag,"Resolving ad.isInAd: "+c),c},f["ad.isInAdBreak"]=function(){var a=c(),b=null!=a;return h._logger.debug(h._logTag,"Resolving ad.isInAdBreak: "+b),b},f["ad.id"]=function(){var a=b(),c=a?a.id:null;return h._logger.debug(h._logTag,"Resolving ad.id: "+c),c},f["ad.name"]=function(){var a=b(),c=a?a.name:null;return h._logger.debug(h._logTag,"Resolving ad.name: "+c),c},f["ad.length"]=function(){var a=b(),c=a?a.length:NaN;return h._logger.debug(h._logTag,"Resolving ad.length: "+c),c},f["ad.position"]=function(){var a=b(),c=a?a.position:NaN;return h._logger.debug(h._logTag,"Resolving ad.position: "+c),c},f["ad.granularTracking"]=function(){var a=b(),c=!!a&&a.granularTracking;return h._logger.debug(h._logTag,"Resolving ad.granularTracking: "+c),c},f["ad.trackingInterval"]=function(){var a=T;return h._logger.debug(h._logTag,"Resolving ad.trackingInterval: "+a),a},f["chapter.isInChapter"]=function(){var a=d(),b=null!=a;return h._logger.debug(h._logTag,"Resolving chapter.isInChapter: "+b),b},f["chapter.name"]=function(){var a=d(),b=a?a.name:null;return h._logger.debug(h._logTag,"Resolving chapter.name: "+b),b},f["chapter.length"]=function(){var a=d(),b=a?a.length:NaN;return h._logger.debug(h._logTag,"Resolving chapter.length: "+b),b},f["chapter.position"]=function(){var a=d(),b=a?a.position:NaN;return h._logger.debug(h._logTag,"Resolving chapter.position: "+b),b},f["chapter.startTime"]=function(){var a=d(),b=a?a.startTime:NaN;return h._logger.debug(h._logTag,"Resolving chapter.startTime: "+b),b},f["qos.bitrate"]=function(){var a=e(),b=a?a.bitrate:NaN;return h._logger.debug(h._logTag,"Resolving qos.bitrate: "+b),b},f["qos.fps"]=function(){var a=e(),b=a?a.fps:NaN;return h._logger.debug(h._logTag,"Resolving qos.fps: "+b),b},f["qos.droppedFrames"]=function(){var a=e(),b=a?a.droppedFrames:NaN;return h._logger.debug(h._logTag,"Resolving qos.droppedFrames: "+b),b},f["qos.startupTime"]=function(){var a=e(),b=a?1e3*a.startupTime:NaN;return h._logger.debug(h._logTag,"Resolving qos.startupTime: "+b),b},this._dataResolver=function(a){if(!a||0==a.length)return null;g={};for(var b=null,c=0;c<a.length;c++){var d=a[c];b=b||{},b[d]=f.hasOwnProperty(d)?f[d].call(this):null}return b}},c.prototype._trackPlayheadStall=function(){this._canProcess()&&(this._playheadStalled||(this._logger.info(this._logTag,"#_trackPlayheadStall()"),this._stalledPlayheadCount=0,this._playheadStalled=!0,this._trigger(v)))},c.prototype._trackExitStall=function(){this._canProcess()&&(this._stalledPlayheadCount=0,!this._playheadStalled||this._isPaused||this._isSeeking||this._isBuffering||(this._logger.info(this._logTag,"#_trackExitStall()"),this._playheadStalled=!1,this._trigger(u)))},c.prototype._startPlayheadTimer=function(){var a=this;this._playheadTimer||this._isPaused||this._isSeeking||this._isBuffering||(this._playheadTimer=setInterval(function(){if(a._canProcess()){var b=a._dataResolver(["ad.isInAd","video.playhead"]);if(a._isTrackingAdBreak)a._playheadStalled&&a._trackExitStall();else{var c=b["video.playhead"];c!=a._previousPlayhead?a._trackExitStall():a._previousPlayhead>=0&&c==a._previousPlayhead&&++a._stalledPlayheadCount==U&&a._trackPlayheadStall(),c!=a._previousPlayhead&&c>0&&!a._contentStarted&&(a._isPaused||a._isBuffering||a._isSeeking||(a._logger.info(a._logTag,"#_playheadTimer playhead progress to: "+c),a._trigger(w),a._contentStarted=!0)),a._previousPlayhead=c}}},S))},c.prototype._stopPlayheadTimer=function(){this._playheadTimer&&(clearInterval(this._playheadTimer),this._playheadTimer=null),this._trackExitStall()},c.prototype._startSessionIfNeeded=function(a){return this._isTrackingSessionActive?(this._isTrackingSessionStarted||(this._logger.info(this._logTag,"#"+a+"() > Tracking session auto-start."),this.trackSessionStart()),!0):(this._logger.warn(this._logTag,"#"+a+"() > No active tracking session."),!1)},c.prototype._allowPlayerStateChange=function(){return!(this._isTrackingAdBreak&&!this._isTrackingAd)||(this._logger.info(this._logTag,"_allowPlayerStateChange Player plugin does not allow player state changes when in Adbreak and not in Ad."),!1)};var h="player",i=h,j="adobe-heartbeat",k="sourceErrorExternal",l="sourceErrorSDK",m="video_load",n="video_unload",o="video_session_end",p="video_start",q="video_resume",r="video_complete",s="video_skip",t="timed_metadata",u="play",v="pause",w="content_start",x="adbreak_start",y="adbreak_complete",z="ad_start",A="ad_complete",B="ad_skip",C="buffer_start",D="buffer_complete",E="seek_start",F="seek_complete",G="chapter_start",H="chapter_complete",I="chapter_skip",J="bitrate_change",K="track_error",L="video_idle_start",M="video_idle_resume",N="video_begin_reporting",O="callback",P="filter_report",Q="source",R="error_id",S=1001,T=1,U=2;b.VideoPlayerPlugin=c}(a.ADB.core,b),a.ADB.va.plugins.videoplayer||(a.ADB.va.plugins.videoplayer=b)}(this);\n  \n  // AdobeHeartbeatPlugin\n  !function(a){if(void 0===b)var b={};b.clock||(b.clock={}),b.context||(b.context={}),b.filter||(b.filter={}),b.model||(b.model={}),b.network||(b.network={}),function(a,b){"use strict";function c(a,b,c,d,e){if(!b)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=b,!a)throw new Error("Reference to the pluginManager object cannot be NULL");if(this._pluginManager=a,!e)throw new Error("Reference to the logger object cannot be NULL");this._logTag="ah::Timer."+c,this._logger=e,this._isDestroyed=!1,this._createTimer(c,d),this._installHandlers()}var d=a.Event;c.KEY_NAME="name",c.KEY_INTERVAL="interval",c.KEY_RESET="reset",c.prototype.resume=function(a){this._logger.debug(this._logTag,"Starting timer: "+this._name);var b={};b[c.KEY_NAME]=e+"."+this._name,b[c.KEY_RESET]=a,this._pluginManager.command(f,i,b)},c.prototype.pause=function(a){this._logger.debug(this._logTag,"Stopping timer: "+this._name);var b={};b[c.KEY_NAME]=e+"."+this._name,b[c.KEY_RESET]=a,this._pluginManager.command(f,h,b)},c.prototype.destroy=function(){if(!this._isDestroyed){this._isDestroyed=!0,this._uninstallHandlers();var a={};a[c.KEY_NAME]=e+"."+this._name,this._pluginManager.command(f,j,a)}},c.prototype.setInterval=function(a){var b=k+"."+e+"."+this._name,c=this._pluginManager.request(f,[b])[b];this.pause(!0),this._createTimer(this._name,a),c||this.resume(!0)},c.prototype._cmdResume=function(a){var b=!1;null!=a&&a.hasOwnProperty(c.KEY_RESET)&&(b=a[c.KEY_RESET]),this.resume(b)},c.prototype._cmdPause=function(a){var b=!1;null!=a&&a.hasOwnProperty(c.KEY_RESET)&&(b=a[c.KEY_RESET]),this.pause(b)},c.prototype._onTick=function(a,b){this._channel.trigger(new d("clock:"+this._name+".tick",b))},c.prototype._installHandlers=function(){this._channel.comply("clock:"+this._name+".resume",this._cmdResume,this),this._channel.comply("clock:"+this._name+".pause",this._cmdPause,this),this._pluginManager.on(f,e+"."+this._name+".tick",this._onTick,this)},c.prototype._uninstallHandlers=function(){this._channel.off(null,null,this),this._pluginManager.off(null,null,null,this)},c.prototype._createTimer=function(a,b){this._name=a,this._interval=b;var d={};d[c.KEY_NAME]=e+"."+this._name,d[c.KEY_INTERVAL]=this._interval,this._pluginManager.command(f,g,d)};var e="heartbeat",f="service.clock",g="create",h="pause",i="resume",j="destroy",k="is_paused";b.clock.Timer=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b,d){c.__super__.constructor.call(this,a,b,f,h,d)}var d=a.Event,e=b.clock.Timer;a.extend(c,e),c.prototype._onCheckStatusComplete=function(a){var b=a.data[l];if(this._logger.debug(this._logTag,"#_onCheckStatusComplete(interval="+b+")"),b){if(b==this._interval)return void this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval value not changed.");b>g?(this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Interval value too large: "+b),this.setInterval(g)):(this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval changed to: "+b),this.setInterval(b))}else this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Invalid interval value."),this.setInterval(h)},c.prototype._getSettings=function(a){this._logger.debug(this._logTag,"#_getSettings()"),this._channel.trigger(new d(i))},c.prototype._installHandlers=function(){c.__super__._installHandlers.call(this),this._channel.on(j,this._getSettings,this),this._channel.on(k,this._onCheckStatusComplete,this),this._channel.reply(l,function(){return this._interval},this)};var f="check_status",g=600,h=180,i="clock:check_status.tick",j="clock:check_status.get_settings",k="net:check_status_complete",l="check_status_interval";b.clock.CheckStatusTimer=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b,d){c.__super__.constructor.call(this,a,b,e,f,d),this._doNotOverrideInterval=!1}var d=b.clock.Timer;a.extend(c,d),c.prototype._onCheckStatusComplete=function(a){var b=a.data[g];if(this._logger.debug(this._logTag,"#_onCheckStatusComplete(interval="+b+")"),this._doNotOverrideInterval)this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval value not changed. (doNotOverrideInterval = true)");else if(b){if(b==this._interval)return void this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval value not changed.");this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval changed to: "+b),this.setInterval(b)}else this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Invalid interval value."),this.setInterval(f)},c.prototype._onUpdateReportingInterval=function(a){var b=a.data[g];if(this._doNotOverrideInterval=!!a.data[h],this._logger.debug(this._logTag,"#_onUpdateReportingInterval(interval="+b+", doNotOverrideInterval="+this._doNotOverrideInterval+")"),b){if(b==this._interval)return void this._logger.debug(this._logTag,"#_onUpdateReportingInterval() > Interval value not changed.");this._logger.debug(this._logTag,"#_onUpdateReportingInterval() > Interval changed to: "+b),this.setInterval(b)}else this._logger.warn(this._logTag,"#_onUpdateReportingInterval() > Invalid interval value."),this.setInterval(f)},c.prototype._installHandlers=function(){c.__super__._installHandlers.call(this),this._channel.on(j,this._onCheckStatusComplete,this),this._channel.on(i,this._onUpdateReportingInterval,this),this._channel.reply(g,function(){return this._interval},this)};var e="reporting",f=10,g="reporting_interval",h="do_not_override_interval",i="reporting:update_interval",j="net:check_status_complete";b.clock.ReportingTimer=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b,d){c.__super__.constructor.call(this,a,b,e,f,d)}var d=b.clock.Timer;a.extend(c,d);var e="idle",f=1800;b.clock.IdleTimer=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b,d){c.__super__.constructor.call(this,a,b,e,f,d)}var d=b.clock.Timer;a.extend(c,d);var e="flush_filter",f=.25;b.clock.FlushFilterTimer=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b,c){if(!a)throw new Error("Reference to the pluginManager object cannot be NULL");if(!b)throw new Error("Reference to the channel object cannot be NULL");if(!c)throw new Error("Reference to the logger object cannot be NULL");this._isDestroyed=!1,this._reportingTimer=new f(a,b,c),this._checkStatusTimer=new d(a,b,c),this._flushFilterTimer=new e(a,b,c),this._idleTimer=new g(a,b,c)}var d=b.clock.CheckStatusTimer,e=b.clock.FlushFilterTimer,f=b.clock.ReportingTimer,g=b.clock.IdleTimer;c.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._reportingTimer.destroy(),this._checkStatusTimer.destroy(),this._flushFilterTimer.destroy(),this._idleTimer.destroy())},b.clock.Clock=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b){this.value=a,this.hint=b}function d(a){this.realm=a,this.data={}}c.HINT_SHORT="short",d.prototype.setField=function(a,b,d){this.data[a]=new c(b,d)},d.prototype._createAccessor=function(a,b,c){var d=this;return function(){return arguments.length&&(d[a]=arguments[0],d.setField(b,arguments[0],c)),d[a]}},b.model.Dao=d,b.model.DaoField=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"asset"),this.adId=this._createAccessor("_adId","ad_id",null),this.sid=this._createAccessor("_sid","ad_sid",null),this.resolver=this._createAccessor("_resolver","resolver",null),this.podId=this._createAccessor("_podId","pod_id",null),this.podPosition=this._createAccessor("_podPosition","pod_position",null),this.podOffset=this._createAccessor("_podOffset","pod_offset",null),this.podName=this._createAccessor("_podName","pod_name",null),this.adLength=this._createAccessor("_adLength","ad_length",null),this.adName=this._createAccessor("_adName","ad_name",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.adId(a.adId()),this.sid(a.sid()),this.resolver(a.resolver()),this.podId(a.podId()),this.podPosition(a.podPosition()),this.podOffset(a.podOffset()),this.podName(a.podName()),this.adLength(a.adLength()),this.adName(a.adName())}else this.adId(""),this.sid(""),this.resolver(""),this.podId(""),this.podPosition(""),this.podOffset(0),this.podName(""),this.adLength(0),this.adName("")}var d=b.model.Dao;a.extend(c,d),b.model.AdDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"sc"),this.reportSuiteId=this._createAccessor("_reportSuiteId","rsid",null),this.trackingServer=this._createAccessor("_trackingServer","tracking_server",null),this.ssl=this._createAccessor("_ssl","ssl",e.HINT_SHORT),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.reportSuiteId(a.reportSuiteId()),this.trackingServer(a.trackingServer()),this.ssl(a.ssl())}else this.reportSuiteId(""),this.trackingServer(""),this.ssl(0)}var d=b.model.Dao,e=b.model.DaoField;a.extend(c,d),b.model.AdobeAnalyticsDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"stream"),this.id=this._createAccessor("_id","chapter_id",null),this.sid=this._createAccessor("_sid","chapter_sid",null),this.name=this._createAccessor("_name","chapter_name",null),this.position=this._createAccessor("_position","chapter_pos",null),this.length=this._createAccessor("_length","chapter_length",null),this.offset=this._createAccessor("_offset","chapter_offset",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.id(a.id()),this.sid(a.sid()),this.name(a.name()),this.position(a.position()),this.length(a.length()),this.offset(a.offset())}else this.id(""),this.sid(""),this.name(""),this.position(0),this.length(0),this.offset(0)}var d=b.model.Dao;a.extend(c,d),b.model.ChapterDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"asset"),this.type=this._createAccessor("_type","type",null),this.videoId=this._createAccessor("_videoId","video_id",null),this.publisher=this._createAccessor("_publisher","publisher",null),this.adData=this._createAccessor("_adData","ad_data",null),this.chapterData=this._createAccessor("_chapterData","chapter_data",null),this.length=this._createAccessor("_length","length",null),this.name=this._createAccessor("_name","name",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.type(a.type()),this.name(a.name()),this.videoId(a.videoId()),this.publisher(a.publisher()),this.length(a.length());var b=a.adData()?new e(a.adData()):null;this.adData(b);var d=a.chapterData()?new f(a.chapterData()):null;this.chapterData(d)}else this.type(""),this.name(""),this.videoId(""),this.publisher(""),this.length(0),this.adData(null),this.chapterData(null)}var d=b.model.Dao,e=b.model.AdDao,f=b.model.ChapterDao;a.extend(c,d),c.TYPE_AD="ad",c.TYPE_MAIN_CONTENT="main",b.model.AssetDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"event"),this.type=this._createAccessor("_type","type",null),this.duration=this._createAccessor("_duration","duration",null),this.playhead=this._createAccessor("_playhead","playhead",null),this.id=this._createAccessor("_id","id",null),this.source=this._createAccessor("_source","source",null),this.ts=this._createAccessor("_ts","ts",null),this.prevTs=this._createAccessor("_prevTs","prev_ts",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.type(a.type()),this.duration(a.duration()),this.playhead(a.playhead()),this.id(a.id()),this.source(a.source()),this.ts(a.ts()),this.prevTs(a.prevTs())}else this.type(""),this.duration(0),this.playhead(0),this.id(""),this.source(""),this.ts(0),this.prevTs(-1)}var d=b.model.Dao;a.extend(c,d),c.EVENT_TYPE_AA_START="aa_start",c.EVENT_TYPE_AA_AD_START="aa_ad_start",c.EVENT_TYPE_START="start",c.EVENT_TYPE_RESUME="resume",c.EVENT_TYPE_CHAPTER_START="chapter_start",c.EVENT_TYPE_CHAPTER_COMPLETE="chapter_complete",c.EVENT_TYPE_CHAPTER_SKIP="chapter_skip",c.EVENT_TYPE_PLAY="play",c.EVENT_TYPE_PAUSE="pause",c.EVENT_TYPE_STALL="stall",c.EVENT_TYPE_BUFFER="buffer",c.EVENT_TYPE_BITRATE_CHANGE="bitrate_change",c.EVENT_TYPE_ERROR="error",c.EVENT_TYPE_COMPLETE="complete",c.EVENT_TYPE_SKIP="skip",c.EVENT_TYPE_END="end",b.model.EventDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"stream"),this.bitrate=this._createAccessor("_bitrate","bitrate",null),this.fps=this._createAccessor("_fps","fps",null),this.droppedFrames=this._createAccessor("_droppedFrames","dropped_frames",null),this.startupTime=this._createAccessor("_startup_time","startup_time",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.bitrate(a.bitrate()),this.fps(a.fps()),this.droppedFrames(a.droppedFrames()),this.startupTime(a.startupTime()),this.isStartupTimeOverridden=a.isStartupTimeOverridden}else this.bitrate(0),this.fps(0),this.droppedFrames(0),this.startupTime(0),this.isStartupTimeOverridden=!1}var d=b.model.Dao;a.extend(c,d),b.model.QoSDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"sp"),this.ovp=this._createAccessor("_ovp","ovp",null),this.sdk=this._createAccessor("_sdk","sdk",null),this.channel=this._createAccessor("_channel","channel",null),this.playerName=this._createAccessor("_playerName","player_name",null),this.libVersion=this._createAccessor("_libVersion","hb_version",null),this.apiLevel=this._createAccessor("_apiLevel","hb_api_lvl",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.ovp(a.ovp()),this.sdk(a.sdk()),this.channel(a.channel()),this.playerName(a.playerName()),this.libVersion(a.libVersion()),this.apiLevel(a.apiLevel())}else this.ovp(e),this.sdk(e),this.channel(e),this.playerName(""),this.libVersion(""),this.apiLevel(0)}var d=b.model.Dao;a.extend(c,d);var e="unknown";b.model.ServiceProviderDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"event"),this.sessionId=this._createAccessor("_sessionId","sid",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.sessionId(a.sessionId())}else this.sessionId(null)}var d=b.model.Dao;a.extend(c,d),b.model.SessionDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"stream"),this.type=this._createAccessor("_type","type",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.type(a.type())}else this.type(null)}var d=b.model.Dao;a.extend(c,d),b.model.StreamDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"user"),this.analyticsVisitorId=this._createAccessor("_analyticsVisitorId","aid",null),this.marketingCloudVisitorId=this._createAccessor("_marketingCloudVisitorId","mid",null),this.visitorId=this._createAccessor("_visitorId","id",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.analyticsVisitorId(a.analyticsVisitorId()),this.marketingCloudVisitorId(a.marketingCloudVisitorId()),this.visitorId(a.visitorId())}else this.analyticsVisitorId(null),this.marketingCloudVisitorId(null),this.visitorId(null)}var d=b.model.Dao;a.extend(c,d),b.model.UserDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"aam"),this.audienceManagerBlob=this._createAccessor("_audienceManagerBlob","blob",null),this.audienceManagerLocationHint=this._createAccessor("_audienceManagerLocationHint","loc_hint",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.audienceManagerBlob(a.audienceManagerBlob()),this.audienceManagerLocationHint(a.audienceManagerLocationHint())}else this.audienceManagerBlob(null),this.audienceManagerLocationHint(null)}var d=b.model.Dao;a.extend(c,d),b.model.AudienceManagerDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b,c,i,j){this.eventData=new e,this.eventData.type(b),this.eventData.duration(0),this.eventData.ts((new Date).getTime()),this.eventData.playhead(c),this.assetData=new f(a._assetData),this.streamData=new g(a._streamData),this.qosData=new h(a._qosData),this.cuserData=d.clone(a._cuserData),this.meta=i,this.callback=j,this.filterReport=!0}var d=a.ObjectUtils,e=b.model.EventDao,f=b.model.AssetDao,g=b.model.StreamDao,h=b.model.QoSDao;b.model.TrackItem=c}(a.ADB.va.utils,b),function(a,b){"use strict";function c(a,b,c,i,j,k){this.adobeAnalyticsData=a,this.userData=b,this.aamData=c,this.serviceProviderData=i,this.sessionData=j,this.eventData=new e(k.eventData),this.assetData=new f(k.assetData),this.streamData=new g(k.streamData),this.qosData=new h(k.qosData),this.cuserData=d.clone(k.cuserData),this.meta=d.clone(k.meta),this.callback=k.callback,this.filterReport=k.filterReport}var d=a.ObjectUtils,e=b.model.EventDao,f=b.model.AssetDao,g=b.model.StreamDao,h=b.model.QoSDao;b.model.CUserDao;b.model.Report=c}(a.ADB.va.utils,b),function(a){"use strict";function b(){}b.prototype.serializeReport=function(a){},b.prototype.serializeDao=function(a){},b.prototype.serializeMap=function(a){},b.prototype.serializeNumber=function(a,b,c,d){},b.prototype.serializeString=function(a,b,c,d){},a.model.ISerializer=b}(b),function(a,b){"use strict";function c(a){if(!a)throw new Error("Reference to the logger object cannot be NULL");this._logger=a}var d=b.model.Dao,e=b.model.DaoField,f=b.model.ISerializer;a.extend(c,f),c.prototype.serializeReport=function(a){var b=[];return b.push(this.serializeDao(a.adobeAnalyticsData)),b.push(this.serializeDao(a.userData)),b.push(this.serializeDao(a.aamData)),b.push(this.serializeMap(a.cuserData,"cuser")),b.push(this.serializeDao(a.serviceProviderData)),b.push(this.serializeDao(a.sessionData)),b.push(this.serializeDao(a.eventData)),b.push(this.serializeDao(a.assetData)),b.push(this.serializeDao(a.streamData)),b.push(this.serializeDao(a.qosData)),b.push(this.serializeMap(a.meta,"meta")),{serializedOutput:b.filter(function(a){return!!a}).join("&"),callback:a.callback}},c.prototype.serializeDao=function(a){return this._processDao(a).filter(function(a){return!!a}).join("&")},c.prototype.serializeMap=function(a,b){var c=[],d=b||"meta";for(var e in a)a.hasOwnProperty(e)&&a[e]&&c.push("s:"+d+":"+e+"="+window.encodeURIComponent(a[e]));return c.join("&")},c.prototype.serializeNumber=function(a,b,c,d){var f=h;return null==b||isNaN(b)?null:(d===e.HINT_SHORT&&(f=i),f+":"+c+":"+a+"="+Math.floor(b))},c.prototype.serializeString=function(a,b,c,d){return b?j+":"+c+":"+a+"="+window.encodeURIComponent(b):null},c.prototype._processDao=function(a){var b=[];for(var c in a.data)if(a.data.hasOwnProperty(c)){var e=a.data[c],f=e.value,h=e.hint,i=null,j=a.realm;if(null==f)continue;"number"==typeof f?i=this.serializeNumber(c,f,j,h):"string"==typeof f?i=this.serializeString(c,f,j,h):f instanceof d?i=this.serializeDao(f):this._logger.warn(g,"#_processDao() > Unable to serialize DAO. Field: "+c+". Value: "+f+"."),i&&b.push(i)}return b};var g="ah::QuerystringSerializer",h="l",i="h",j="s";b.model.QuerystringSerializer=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b){if(!a)throw new Error("Reference to the data object cannot be NULL");if(this._data=a,!b)throw new Error("Reference to the logger object cannot be NULL");this._logger=b}c.prototype.parse=function(){var a,b,c,j,k,l;if(window.DOMParser){l=(new window.DOMParser).parseFromString(this._data,"text/xml")}else l=new window.ActiveXObject("Microsoft.XMLDOM"),l.async=!1,l.loadXML(this._data);var m;m=parseInt(l.getElementsByTagName("trackingInterval")[0].childNodes[0].nodeValue,10),m&&(a=m),m=parseInt(l.getElementsByTagName("setupCheckInterval")[0].childNodes[0].nodeValue,10),m&&(b=m),m=parseInt(l.getElementsByTagName("trackExternalErrors")[0].childNodes[0].nodeValue,10),m&&(c=1==m),l.getElementsByTagName("trackingDisabled")[0]&&(m=parseInt(l.getElementsByTagName("trackingDisabled")[0].childNodes[0].nodeValue,10),j=1==m),l.getElementsByTagName("nielsenEnabled")[0]?(m=parseInt(l.getElementsByTagName("nielsenEnabled")[0].childNodes[0].nodeValue,10),k=1==m):k=!0;var n={};return n[e]=a,n[f]=b,n[g]=c,n[i]=j,n[h]=k,this._logger.debug(d,"#parse() > Obtained configuration settings."),n};var d="ah::SettingsParser",e="reporting_interval",f="check_status_interval",g="track_external_errors",h="nielsen_enabled",i="tracking_disabled";b.network.SettingsParser=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b){if(this._trackingServer=null,this._checkStatusServer=null,this._publisher=null,this._isConfigured=!1,this._isDestroyed=!1,this._beginReporting=!1,this._sendingRequest=!1,this._requestsQueue=[],this._quietMode=!1,this._prevReportSent=null,!a)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=a,!b)throw new Error("Reference to the logger object cannot be NULL");this._logger=b,this._serializer=new i(b),this._installEventListeners()}var d=a.Event,e=a.URLRequestMethod,f=a.URLRequest,g=a.URLLoader,h=b.network.SettingsParser,i=b.model.QuerystringSerializer;c.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(j,"#destroy()"),this._uninstallEventListeners())},c.prototype._onApiConfig=function(a){var b=a.data;this._logger.debug(j,"#_onApiConfig(sb_server="+b[k]+", check_status_server="+b[l]+", publisher="+b[m]+", quiet_mode="+b[n]+", ssl="+b[o]+")"),this._trackingServer=this._updateRequestProtocol(b[k],b[o]),this._checkStatusServer=this._updateRequestProtocol(b[l],b[o]),this._publisher=b[m],this._quietMode=b[n],this._isConfigured=!0},c.prototype._onBeginReporting=function(a){this._logger.debug(j,"#_onBeginReporting()"),this._beginReporting=!0,this._sendNextRequest(),this._onClockCheckStatusTick()},c.prototype._onFilterReportAvailable=function(a){var b=a.data;if(!this._isConfigured)return void this._logger.warn(j,"#_onFilterReportAvailable() > Unable to send request: not configured.");var c=b[p];if(this._prevReportSent&&this._prevReportSent.eventData&&c.eventData&&this._prevReportSent.eventData.playhead==c.eventData.playhead&&this._prevReportSent.eventData.ts==c.eventData.ts&&this._prevReportSent.eventData.prevTs==c.eventData.prevTs&&this._prevReportSent.eventData.type==c.eventData.type)return void this._logger.debug(j,"#_onFilterReportAvailable() > Duplicate heartbeat report not sent for URL:\\n"+e);this._prevReportSent=c;var d=this._serializer.serializeReport(c),e=this._trackingServer+"/?"+d.serializedOutput;this._processRequest(e,d.callback)},c.prototype._processRequest=function(a,b){this._requestsQueue.push({url:a,callback:b}),this._sendNextRequest()},c.prototype._sendNextRequest=function(){if(!this._beginReporting)return void this._logger.debug(j,"#_sendNextRequest() > Exiting as we have not started reporting.");if(this._sendingRequest)return void this._logger.debug(j,"#_sendNextRequest() > Exiting as we are currently sending a request.");var a=this._requestsQueue.shift();if(!a)return void this._logger.debug(j,"#_sendNextRequest() > Exiting as we have no requests to send.");this._sendingRequest=!0,this._logger.debug(j,"#_sendNextRequest() > "+a.url);var b=this,c=new g,h=function(){c.close(),a.callback&&a.callback.call(null),b._sendingRequest=!1,b._sendNextRequest()},i=function(a){h()},k=function(a){b._logger.warn(j,"#_onFilterReportAvailable() > Failed to send heartbeat report."),h()};if(!this._quietMode){c.addEventListener(d.SUCCESS,i,this),c.addEventListener(d.ERROR,k,this);var l=new f(a.url,e.GET);c.load(l)}},c.prototype._onClockCheckStatusTick=function(a){function b(a){if(a.data)try{var b=new h(a.data.response,i._logger),c=b.parse();c?i._channel.trigger(new d(u,c)):i._logger.warn(j,"#_onClockCheckStatusTick() > Failed to parse the config. settings.")}catch(a){i._logger.warn(j,"#_onClockCheckStatusTick() > Failed to parse the config. settings.")}n.close()}function c(a){i._logger.warn(j,"#_onClockCheckStatusTick() > Failed to obtain the config. settings."),n.close()}if(!this._isConfigured)return void this._logger.warn(j,"#_onClockCheckStatusTick() > Unable to send request: not configured.");if(!this._publisher)return void this._logger.warn(j,"#_onClockCheckStatusTick() > Publisher is NULL.");if(!this._beginReporting)return void this._logger.debug(j,"#_onClockCheckStatusTick() > Exiting as we have not started reporting.");var i=this,k=this._publisher.replace(/[^a-zA-Z0-9]+/,"-").toLocaleLowerCase(),l=this._checkStatusServer+k+".xml?r="+(new Date).getTime(),m=new f(l,e.GET),n=new g;n.addEventListener(d.SUCCESS,b,this),n.addEventListener(d.ERROR,c,this),this._logger.debug(j,"#_onClockCheckStatusTick() > Get new settings from: "+l),n.load(m)},c.prototype._updateRequestProtocol=function(a,b){var c=a;return 0===c.indexOf("http://")?c=c.slice(7):0===c.indexOf("https://")&&(c=c.slice(8)),b?"https://"+c:"http://"+c},c.prototype._installEventListeners=function(){this._channel.on(q,this._onApiConfig,this),this._channel.on(r,this._onBeginReporting,this),this._channel.on(s,this._onFilterReportAvailable,this),this._channel.on(t,this._onClockCheckStatusTick,this)},c.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)};var j="ah::Network",k="tracking_server",l="check_status_server",m="publisher",n="quiet_mode",o="ssl",p="report",q="api:config",r="api:video_begin_reporting",s="filter:data_available",t="clock:check_status.tick",u="net:check_status_complete";b.network.Network=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b){if(!a)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=a,!b)throw new Error("Reference to the logger object cannot be NULL");this._logger=b,this._isDestroyed=!1,this._isBufferingInProgress=!1,this._reportBuffer={},this._tsHistory={},this._workQueue=new i,this._installEventListeners()}function d(a){var b=[];return a&&a.forEach(function(a){a.eventData.type()==k.EVENT_TYPE_PAUSE||a.eventData.type()==k.EVENT_TYPE_STALL||a.eventData.type()==k.EVENT_TYPE_BUFFER?(!a.filterReport||a.eventData.duration()>u)&&b.push(a):b.push(a)}),b}function e(a){var b=-1,c=-1,d=[];return a.forEach(function(a){a.eventData.type()==k.EVENT_TYPE_START?a.assetData.type()==l.TYPE_MAIN_CONTENT?-1==b?b=d.push(a)-1:(a.eventData.prevTs(-1),d[b]=a):-1==c?c=d.push(a)-1:(a.eventData.prevTs(-1),d[c]=a):d.push(a)}),d}function f(a){var b=[];return a.forEach(function(c){if(c.eventData.type()==k.EVENT_TYPE_PLAY){if(c.eventData.duration()>t)b.push(c);else if(0==c.eventData.duration()&&c.assetData.type()==l.TYPE_MAIN_CONTENT){var d=g(a);d.indexOf(c)==d.length-1&&b.push(c)}}else b.push(c)}),b}function g(a){var b=[];return a.forEach(function(a){a.eventData.type()!=k.EVENT_TYPE_PLAY&&a.eventData.type()!=k.EVENT_TYPE_BUFFER&&a.eventData.type()!=k.EVENT_TYPE_START||b.push(a)}),b}var h=a.radio.Command,i=a.radio.CommandQueue,j=a.Event,k=b.model.EventDao,l=b.model.AssetDao;c.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(w,"#destroy()"),this._uninstallEventListeners(),this.clear())},c.prototype.clear=function(){this._logger.debug(w,"#clear()"),this._workQueue.cancelAllCommands(),this._reportBuffer={},this._tsHistory={},this._isBufferingInProgress=!1},c.prototype.flush=function(){this._workQueue.addCommand(new h(this._flushBufferReport,this))},c.prototype._bufferReport=function(a){if(!this._isDestroyed){var b=a[q];if(b){var c=b.sessionData.sessionId();this._reportBuffer[c]=this._reportBuffer[c]||[],this._reportBuffer[c].push(b)}if(!this._isBufferingInProgress){this._isBufferingInProgress=!0;var d={};d[p]=!0,d[r]=1,this._channel.command(s,d)}}},c.prototype._flushBufferReport=function(){function a(a){if(a)for(var c=0;c<a.length;c++){var d=a[c],e=d.sessionData.sessionId();b._tsHistory[e]=b._tsHistory[e]||{};var f=d.eventData.type()+"."+(d.assetData.type()==l.TYPE_AD?d.assetData.adData().adId():d.assetData.videoId());b._tsHistory[e].hasOwnProperty(f)&&d.eventData.prevTs(b._tsHistory[e][f]),b._tsHistory[e][f]=d.eventData.ts()}}if(!this._isDestroyed){var b=this;for(var c in this._reportBuffer)if(this._reportBuffer.hasOwnProperty(c)){var g=f(e(d(this._reportBuffer[c])));a(g);for(var h=0;h<g.length;h++){var i=g[h],k={};k[q]=i,this._channel.trigger(new j(n,k))}}this._reportBuffer={};var m=this._channel.request(v),o=this._tsHistory[m]||{};this._tsHistory={},this._tsHistory[m]=o,this._isBufferingInProgress=!1}},c.prototype._onContextReportAvailable=function(a){var b=a.data;this._workQueue.addCommand(new h(this._bufferReport,this,[b]))},c.prototype._onClockFlushFilterTick=function(a){this.flush()},c.prototype._installEventListeners=function(){this._channel.on(m,this._onContextReportAvailable,this),this._channel.on(o,this._onClockFlushFilterTick,this)},c.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)};var m="context:report_available",n="filter:data_available",o="clock:flush_filter.tick",p="reset",q="report",r="repeat_count",s="clock:flush_filter.resume",t=250,u=250,v="session_id",w="ah::ReportFilter";b.filter.ReportFilter=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b){this._onFail={fn:a,ctx:b}}var d=a.ErrorInfo;c.prototype.validateFields=function(a,b){if(!a)return this._fail("Data cannot be null");if(b)for(var c=0;c<b.length;c++){var d=b[c];switch(d){case"videoId":if(!a.hasOwnProperty("videoId"))return this._fail("The ID for the main video must be specified.");if("string"!=typeof a.videoId)return this._fail("The ID for the main video must be a String.");if(""===a.videoId)return this._fail("The ID for the main video cannot be an empty string.");break;case"streamType":if(!a.hasOwnProperty("streamType"))return this._fail("The stream type for the main video must be specified.");if("string"!=typeof a.streamType)return this._fail("The stream type for the main video must be a String.");if(""===a.streamType)return this._fail("The stream type for the main video cannot be an empty string.");break;case"videoLength":if(!a.hasOwnProperty("videoLength"))return this._fail("The length of the main video must be specified.");if("number"!=typeof a.videoLength)return this._fail("The length of the main video must be a Number.");if(isNaN(a.videoLength))return this._fail("The length of the main video cannot be NaN.");break;case"playhead":if(!a.hasOwnProperty("playhead"))return this._fail("The playhead for the main video must be specified.");if("number"!=typeof a.playhead)return this._fail("The playhead for the main video must be a Number.");if(isNaN(a.playhead))return this._fail("The playhead for the main video cannot be NaN.");break;case"playerName":if(!a.hasOwnProperty("playerName"))return this._fail("The player name for the main video must be specified.");if("string"!=typeof a.playerName)return this._fail("The player name for the main video must be a String.");if(""===a.playerName)return this._fail("The player name for the main video cannot be an empty string.");break;case"rsid":if(!a.hasOwnProperty("rsid"))return this._fail("account (rsid) is required and has to be set in the AppMeasurement instance.");if("string"!=typeof a.rsid)return this._fail("account (rsid) of the AppMeasurement instance must be a String.");if(""===a.rsid)return this._fail("account (rsid) of the AppMeasurement instance  cannot be an empty string.");break;case"trackingServer":if(!a.hasOwnProperty("trackingServer"))return this._fail("trackingServer is required and has to be set in the AppMeasurement instance.");if("string"!=typeof a.trackingServer)return this._fail("trackingServer of the AppMeasurement instance must be a String.");if(""===a.trackingServer)return this._fail("trackingServer of the AppMeasurement instance cannot be an empty string.");break;case"podPlayerName":if(!a.hasOwnProperty("podPlayerName"))return this._fail("The player name for the ad-break must be specified.");if("string"!=typeof a.podPlayerName)return this._fail("The player name for the ad-break must be a String.");if(""===a.podPlayerName)return this._fail("The player name for the ad-break cannot be an empty string.");break;case"podPosition":if(!a.hasOwnProperty("podPosition"))return this._fail("Position (index) of the ad-break must be specified.");if("number"!=typeof a.podPosition)return this._fail("Position (index) of the ad-break must be a Number.");if(isNaN(a.podPosition))return this._fail("Position (index) of the ad-break cannot be NaN.");break;case"adId":if(!a.hasOwnProperty("adId"))return this._fail("The ad ID must be specified.");if("string"!=typeof a.adId)return this._fail("The ad ID must be a String.");if(""===a.adId)return this._fail("The ad ID cannot be an empty string.");break;case"adPosition":if(!a.hasOwnProperty("adPosition"))return this._fail("Position (index) of the ad must be specified.");if("number"!=typeof a.adPosition)return this._fail("Position (index) of the ad must be a Number.");if(isNaN(a.adPosition))return this._fail("Position (index) of the ad cannot be NaN.");break;case"chapterPosition":if(!a.hasOwnProperty("chapterPosition"))return this._fail("Position (index) of the chapter must be specified.");if("number"!=typeof a.chapterPosition)return this._fail("Position (index) of the chapter must be a Number.");if(isNaN(a.chapterPosition))return this._fail("Position (index) of the chapter cannot be NaN.");break;case"chapterOffset":if(!a.hasOwnProperty("chapterOffset"))return this._fail("Chapter start-time (offset) must be specified.");if("number"!=typeof a.chapterOffset)return this._fail("Chapter start-time (offset) must be a Number.");if(isNaN(a.chapterOffset))return this._fail("Chapter start-time (offset) cannot be NaN.");break;case"chapterLength":if(!a.hasOwnProperty("chapterLength"))return this._fail("The length of the chapter must be specified.");if("number"!=typeof a.chapterLength)return this._fail("The length of the chapter must be a Number.");if(isNaN(a.chapterLength))return this._fail("The length of the chapter cannot be NaN.");break;default:return this._fail("Unable to validate unknown parameter: "+d)}}return!0},c.prototype._fail=function(a){var b=new d("Invalid input data",a);return this._onFail.fn&&this._onFail.fn.call(this._onFail.ctx,b),!1},b.context.InputDataValidator=c}(a.ADB.va,b),function(a,b){"use strict";function c(a,b){if(!b)throw new Error("Reference to the logger object cannot be NULL");if(this._logger=b,!a)throw new Error("Reference to the context object cannot be NULL");this._context=a}var d=b.model.Report;c.prototype.createReportForItem=function(a){return this._logger.debug(e,"Creating report for item: "+a.eventData.type()),new d(this._context._adobeAnalyticsData,this._context._userData,this._context._aamData,this._context._serviceProviderData,this._context._sessionData,a)};var e="ah::ReportFactory";b.context.ReportFactory=c}(a.ADB.core,b),function(a,b,c,d){"use strict";function e(a,b){if(!a)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=a,!b)throw new Error("Reference to the logger object cannot be NULL");this._logger=b,this._lastInBandItem=null,this._stashedLastInBandItem=null,this._stashedMainMetadata=null,this._autoComputedStartupTime=0,this._reportingInterval=ma,this._assetData=null,this._streamData=null,this._qosData=null,this._sessionData=null,this._cuserData=null,this._adobeAnalyticsData=new j,this._serviceProviderData=new k,this._userData=new l,this._aamData=new m,this._isTrackingSessionActive=!1,this._isVideoComplete=!1,this._isDestroyed=!1,this._doNotOverrideEventDuration=!1,this._reportFactory=new u(this,this._logger),this._inputDataValidator=new v(function(a){this._logger.error(w,a.getMessage()+" | "+a.getDetails()),this._channel.trigger(new h(y,a))},this),this._trackExternalErrors=!0,this._installEventListeners()}var f=c.md5,g=c.ObjectUtils,h=a.Event,i=d.model.SessionDao,j=d.model.AdobeAnalyticsDao,k=d.model.ServiceProviderDao,l=d.model.UserDao,m=d.model.AudienceManagerDao,n=d.model.EventDao,o=d.model.AssetDao,p=d.model.StreamDao,q=d.model.QoSDao,r=d.model.AdDao,s=d.model.ChapterDao,t=d.model.TrackItem,u=d.context.ReportFactory,v=d.context.InputDataValidator;e.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(w,"#destroy()"),this._uninstallEventListeners())},e.prototype._onApiAnalyticsStart=function(a){this._logger.debug(w,"#_onApiAnalyticsStart()");var b=a.data;if(this._checkCall("_onApiAnalyticsStart")&&this._inputDataValidator.validateFields(b,["playhead"])){this._userData.visitorId(b.vid),this._userData.analyticsVisitorId(b.aid),this._userData.marketingCloudVisitorId(b.mid),this._aamData.audienceManagerBlob(b.blob),this._aamData.audienceManagerLocationHint(b.loc_hint),b.customerIDs&&(this._cuserData=b.customerIDs),this._updateQoSInfo(b);var c=new t(this,n.EVENT_TYPE_AA_START,b.playhead,null,b._eventData[E]);c.assetData.adData(null),c.assetData.type(o.TYPE_MAIN_CONTENT),this._cuserData=null,this._sendHit(c)}},e.prototype._onApiAnalyticsAdStart=function(a){this._logger.debug(w,"#_onApiAnalyticsAdStart()");var b=a.data;if(this._checkCall("_onApiAnalyticsAdStart")&&this._inputDataValidator.validateFields(b,["playhead"])){this._updateQoSInfo(b);var c=new t(this,n.EVENT_TYPE_AA_AD_START,b.playhead,null,b._eventData[E]);this._sendHit(c)}},e.prototype._onApiVideoLoad=function(a){var b=a.data;this._logger.debug(w,"#_onApiVideoLoad(rsid="+b.rsid+", aa_trackingServer="+b.trackingServer+")"),this._resetInternalState(),this._inputDataValidator.validateFields(b,["rsid","trackingServer"])&&(this._sessionData.sessionId(this._generateSessionId()),this._isTrackingSessionActive=!0)},e.prototype._onApiVideoUnload=function(a){if(this._logger.debug(w,"#_onApiVideoUnload()"),!this._isTrackingSessionActive)return void this._logger.debug(w,"#_onApiVideoUnload() > No active tracking session.");this._isTrackingSessionActive=!1},e.prototype._onApiVideoStart=function(a){var b=a.data;if(this._logger.debug(w,"#_onApiVideoStart(id="+b.videoId+", name="+b.videoName+", length="+b.videoLength+", type="+b.streamType+", playerName="+b.playerName+")"),this._checkCall("_onApiVideoStart")&&this._inputDataValidator.validateFields(b,["videoId","streamType","videoLength","playhead","playerName"])){this._lastInBandItem=null,this._stashedLastInBandItem=null,this._adobeAnalyticsData.reportSuiteId(b.rsid),this._adobeAnalyticsData.trackingServer(b.trackingServer),this._adobeAnalyticsData.ssl(Number(b.useSsl)),this._serviceProviderData.ovp(b.ovp),this._serviceProviderData.sdk(b.sdk),this._serviceProviderData.channel(b.channel),this._serviceProviderData.libVersion(b.version),this._serviceProviderData.apiLevel(b.apiLvl),this._serviceProviderData.playerName(b.playerName),this._assetData.adData(null),this._assetData.chapterData(null),this._assetData.videoId(b.videoId),this._assetData.length(b.videoLength),this._assetData.type(o.TYPE_MAIN_CONTENT),this._assetData.publisher(b.publisher),this._assetData.name(b.videoName),this._streamData.type(b.streamType),this._updateQoSInfo(b);var c=b.metaNielsen?g.merge(b.metaVideo,b.metaNielsen):b.metaVideo,d=new t(this,n.EVENT_TYPE_START,b.playhead,c,b._eventData[E]);this._sendHit(d)}},e.prototype._onApiVideoResume=function(a){var b=a.data;if(this._logger.debug(w,"#_onApiVideoResume(id="+b.videoId+", name="+b.videoName+", length="+b.videoLength+", type="+b.streamType+", playerName="+b.playerName+")"),this._checkCall("_onApiVideoResume")&&this._inputDataValidator.validateFields(b,["videoId","streamType","videoLength","playhead","playerName"])){this._assetData.videoId(b.videoId),this._assetData.length(b.videoLength),this._assetData.type(o.TYPE_MAIN_CONTENT),this._assetData.name(b.videoName),this._streamData.type(b.streamType);var c=new t(this,n.EVENT_TYPE_RESUME,b.playhead,null,b._eventData[E]);this._sendHit(c)}},e.prototype._onApiVideoSessionEnd=function(a){this._logger.debug(w,"#_onApiVideoSessionEnd()");var b=a.data;if(this._checkCall("_onApiVideoSessionEnd")&&this._inputDataValidator.validateFields(b,["playhead"])){var c=new t(this,n.EVENT_TYPE_END,b.playhead,null,b._eventData[E]);c.assetData.adData(null),c.assetData.type(o.TYPE_MAIN_CONTENT),this._sendHit(c)}},e.prototype._onApiVideoComplete=function(a){this._logger.debug(w,"#_onApiVideoComplete()");var b=a.data;if(this._checkCall("_onApiVideoComplete")){var c=new t(this,n.EVENT_TYPE_COMPLETE,this._assetData.length(),null,b._eventData[E]);this._sendHit(c),this._isVideoComplete=!0}},e.prototype._onApiVideoSkip=function(a){this._logger.debug(w,"#_onApiVideoSkip()");var b=a.data;if(this._checkCall("_onApiVideoSkip")){var c=new t(this,n.EVENT_TYPE_SKIP,b.playhead,null,b._eventData[E]);this._sendHit(c),this._isVideoComplete=!0}},e.prototype._onApiPlay=function(a){this._logger.debug(w,"#_onApiPlay()");var b=a.data;if(this._checkCall("_onApiPlay")&&this._inputDataValidator.validateFields(b,["playhead"])){this._updateQoSInfo(b);var c=new t(this,n.EVENT_TYPE_PLAY,b.playhead,null,b._eventData[E]);this._sendHit(c)}},e.prototype._onApiPause=function(a){this._logger.debug(w,"#_onApiPause()");var b=a.data;if(this._checkCall("_onApiPause")&&this._inputDataValidator.validateFields(b,["playhead"])){this._updateQoSInfo(b);var c=b.playheadStalled?n.EVENT_TYPE_STALL:n.EVENT_TYPE_PAUSE,d=new t(this,c,b.playhead,null,b._eventData[E]);b._eventData.hasOwnProperty(F)&&(d.filterReport=b._eventData[F]),this._sendHit(d)}},e.prototype._onApiBufferStart=function(a){this._logger.debug(w,"#_onApiBufferStart()");var b=a.data;if(this._checkCall("_onApiBufferStart")&&this._inputDataValidator.validateFields(b,["playhead"])){this._updateQoSInfo(b);var c=new t(this,n.EVENT_TYPE_BUFFER,b.playhead,null,b._eventData[E]);this._sendHit(c)}},e.prototype._onApiAdBreakStart=function(a){this._logger.debug(w,"#_onApiAdBreakStart()");var b=a.data;this._checkCall("_onApiAdBreakStart")&&this._inputDataValidator.validateFields(b,["playhead"])&&(this._flushLastInbandItem(b),this._updateLastInbandItemToBuffering())},e.prototype._onApiAdBreakComplete=function(a){this._logger.debug(w,"#_onApiAdBreakComplete()");var b=a.data;this._checkCall("_onApiAdBreakComplete")&&this._inputDataValidator.validateFields(b,["playhead"])&&(this._flushLastInbandItem(b),this._restoreLastInbandItem())},e.prototype._onApiAdStart=function(a){var b=a.data;if(this._logger.debug(w,"#_onApiAdStart(id="+b.adId+", player_name="+b.podPlayerName+", parent_name="+this._assetData.videoId()+", pod_pos="+b.adPosition+")"),this._checkCall("_onApiAdStart")&&this._inputDataValidator.validateFields(b,["playhead","podPosition","podPlayerName","adId","adPosition"])){var c=new r;c.adId(b.adId),c.adName(b.adName),c.adLength(b.adLength),c.resolver(b.podPlayerName),c.podId(f(this._assetData.videoId())+"_"+b.podPosition),c.podPosition(b.adPosition+""),c.podName(b.podName),c.podOffset(b.podSecond),c.sid(this._generateSessionId()),this._assetData.adData(c),this._assetData.type(o.TYPE_AD),this._updateQoSInfo(b);var d=g.merge(b.metaVideo,b.metaAd);d=b.metaNielsen?g.merge(d,b.metaNielsen):d,d=b.metaAdNielsen?g.merge(d,b.metaAdNielsen):d;var e=new t(this,n.EVENT_TYPE_START,b.playhead,d,b._eventData[E]);this._sendHit(e),this._restoreLastInbandItem();if(!!b.adGranularTracking){var h=b.adTrackingInterval?b.adTrackingInterval:this._reportingInterval;this._updateReportingInterval(h,!0)}}},e.prototype._onApiAdComplete=function(a){this._logger.debug(w,"#_onApiAdComplete()");var b=a.data;if(this._checkCall("_onApiAdComplete")&&this._inputDataValidator.validateFields(b,["playhead"])){if(this._assetData.type()!=o.TYPE_AD)return void this._logger.warn(w,"#_onApiAdComplete() > Ignoring the ad complete event, because we are no longer in an ad.");this._updateQoSInfo(b);var c=new t(this,n.EVENT_TYPE_COMPLETE,b.playhead,null,b._eventData[E]);this._sendHit(c),this._updateLastInbandItemToBuffering(),this._assetData.adData(null),this._assetData.type(o.TYPE_MAIN_CONTENT),this._updateReportingInterval(this._reportingInterval,!1)}},e.prototype._onApiAdSkip=function(a){this._logger.debug(w,"#_onApiAdSkip()");var b=a.data;if(this._checkCall("_onApiAdSkip")&&this._inputDataValidator.validateFields(b,["playhead"])){if(this._assetData.type()!=o.TYPE_AD)return void this._logger.warn(w,"#_onApiAdSkip() > Ignoring the ad skip event, because we are no longer in an ad.");this._updateQoSInfo(b);var c=new t(this,n.EVENT_TYPE_SKIP,b.playhead,null,b._eventData[E]);this._sendHit(c),this._updateLastInbandItemToBuffering(),this._assetData.adData(null),this._assetData.type(o.TYPE_MAIN_CONTENT),this._updateReportingInterval(this._reportingInterval,!1)}},e.prototype._onApiChapterStart=function(a){var b=a.data;if(this._logger.debug(w,"#_onApiChapterStart(name="+b.chapterName+", length="+b.chapterLength+", position="+b.chapterPosition+", chapter_offset="+b.chapterOffset+")"),this._checkCall("_onApiChapterStart")&&this._inputDataValidator.validateFields(b,["playhead","chapterPosition","chapterOffset","chapterLength"])){var c=new s;c.id(f(this._assetData.videoId())+"_"+b.chapterPosition),c.name(b.chapterName),c.length(b.chapterLength),c.position(b.chapterPosition),c.offset(b.chapterOffset),c.sid(this._generateSessionId()),this._assetData.chapterData(c),this._updateQoSInfo(b);var d=g.merge(b.metaVideo,b.metaChapter),e=new t(this,n.EVENT_TYPE_CHAPTER_START,b.playhead,d,b._eventData[E]);e.assetData.adData(null),e.assetData.type(o.TYPE_MAIN_CONTENT),this._sendHit(e)}},e.prototype._onApiChapterComplete=function(a){this._logger.debug(w,"#_onApiChapterComplete()");var b=a.data;if(this._checkCall("_onApiChapterComplete")&&this._inputDataValidator.validateFields(b,["playhead"])){if(!this._assetData.chapterData())return void this._logger.warn(w,"#_onApiChapterComplete() > Ignoring the chapter complete event, because we are no longer in a chapter.");this._updateQoSInfo(b);var c=new t(this,n.EVENT_TYPE_CHAPTER_COMPLETE,b.playhead,null,b._eventData[E]);c.assetData.adData(null),c.assetData.type(o.TYPE_MAIN_CONTENT),this._sendHit(c),this._assetData.chapterData(null)}},e.prototype._onApiChapterSkip=function(a){this._logger.debug(w,"#_onApiChapterSkip()");var b=a.data;if(this._checkCall("_onApiChapterSkip")&&this._inputDataValidator.validateFields(b,["playhead"])){if(!this._assetData.chapterData())return void this._logger.warn(w,"#_onApiChapterSkip() > Ignoring the chapter skip event, because we are no longer in a chapter.");this._updateQoSInfo(b);var c=new t(this,n.EVENT_TYPE_CHAPTER_SKIP,b.playhead,null,b._eventData[E]);c.assetData.adData(null),c.assetData.type(o.TYPE_MAIN_CONTENT),this._sendHit(c),this._assetData.chapterData(null)}},e.prototype._onApiBitrateChange=function(a){this._logger.debug(w,"#_onApiBitrateChange()");var b=a.data;if(this._checkCall("_onApiBitrateChange")&&this._inputDataValidator.validateFields(b,["playhead"])){this._updateQoSInfo(b);var c=new t(this,n.EVENT_TYPE_BITRATE_CHANGE,b.playhead,null,b._eventData[E]);this._sendHit(c)}},e.prototype._onApiTrackError=function(a){var b=a.data;if(this._logger.debug(w,"#_onApiTrackError(source="+b._eventData.source+", err_id="+b._eventData.error_id+")"),!this._isTrackingSessionActive)return void this._logger.warn(w,"#_onApiTrackError() > No active tracking session.");if(this._trackExternalErrors||b._eventData.source===x){this._updateQoSInfo(b);var c=new t(this,n.EVENT_TYPE_ERROR,0,null,b._eventData[E]);c.eventData.id(b._eventData.error_id),c.eventData.source(b._eventData.source),this._sendHit(c)}},e.prototype._onApiTrackInternalError=function(a){var b=a.data;this._logger.debug(w,"#_onApiTrackInternalError(source="+b.source+", err_id="+b.error_id+")"),this._updateQoSInfo(b);var c=new t(this,n.EVENT_TYPE_ERROR,0);c.eventData.id(b.error_id),c.eventData.source(b.source),this._sendHit(c)},e.prototype._onApiQuantumEnd=function(a){this._logger.debug(w,"#_onApiQuantumEnd(interval="+this._channel.request(B)+")");var b=a.data;if(this._checkCall("_onApiQuantumEnd")&&this._inputDataValidator.validateFields(b,["playhead"])){var c=this._lastInBandItem;if(c){this._updateQoSInfo(b);var d=new t(this,c.eventData.type(),b.playhead,c.meta,c.callback);d.filterReport=c.filterReport,this._sendHit(d,!0)}}},e.prototype._onNetworkCheckStatusComplete=function(a){var b=a.data;this._trackExternalErrors=b[I],this._reportingInterval=b[J],this._reportingInterval||(this._reportingInterval=ma),this._logger.debug(w,"#_onNetworkCheckStatusComplete(track_ext_err="+this._trackExternalErrors+")")},e.prototype._onResetSessionId=function(a){var b=this._generateSessionId();this._sessionData=new i,this._sessionData.sessionId(b),this._logger.debug(w,"#_resetSessionId(new sessionId="+b+")")},e.prototype._installEventListeners=function(){this._channel.on(L,this._onApiAnalyticsStart,this),this._channel.on(M,this._onApiAnalyticsAdStart,this),this._channel.on(N,this._onApiVideoLoad,this),this._channel.on(O,this._onApiVideoUnload,this),this._channel.on(P,this._onApiVideoStart,this),this._channel.on(Q,this._onApiVideoComplete,this),this._channel.on(R,this._onApiVideoSkip,this),this._channel.on(S,this._onApiVideoResume,this),this._channel.on(T,this._onApiVideoSessionEnd,this),this._channel.on(U,this._onApiAdBreakStart,this),this._channel.on(V,this._onApiAdBreakComplete,this),this._channel.on(W,this._onApiAdStart,this),this._channel.on(X,this._onApiAdComplete,this),this._channel.on(Y,this._onApiAdSkip,this),this._channel.on(Z,this._onApiPlay,this),this._channel.on($,this._onApiPause,this),this._channel.on(_,this._onApiBufferStart,this),this._channel.on(aa,this._onApiChapterStart,this),this._channel.on(ba,this._onApiChapterComplete,this),this._channel.on(ca,this._onApiChapterSkip,this),this._channel.on(fa,this._onApiBitrateChange,this),this._channel.on(da,this._onApiTrackError,this),this._channel.on(ea,this._onApiTrackInternalError,this),this._channel.on(ga,this._onApiQuantumEnd,this),this._channel.on(ia,this._onNetworkCheckStatusComplete,this),this._channel.on(D,this._onResetSessionId,this),this._channel.reply(C,function(){return this._sessionData&&this._sessionData.sessionId()?this._sessionData.sessionId():null},this)},e.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)},e.prototype._resetInternalState=function(){this._logger.debug(w,"#_resetInternalState()"),this._isTrackingSessionActive=!1,this._isVideoComplete=!1,this._autoComputedStartupTime=0,this._lastInBandItem=null,this._stashedLastInBandItem=null,this._streamData=new p,this._qosData=new q,this._sessionData=new i,this._assetData=new o,this._cuserData=null},e.prototype._generateSessionId=function(){return""+(new Date).getTime()+Math.floor(1e9*Math.random())},e.prototype._updateQoSInfo=function(a){this._qosData.bitrate(a.bitrate||0),this._qosData.fps(a.fps||0),this._qosData.droppedFrames(a.droppedFrames||0),null==a.startupTime||isNaN(a.startupTime)?(this._qosData.startupTime(this._autoComputedStartupTime),this._qosData.isStartupTimeOverridden=!1):(this._qosData.startupTime(a.startupTime),this._qosData.isStartupTimeOverridden=!0)},e.prototype._checkCall=function(a){return this._isTrackingSessionActive?!this._isVideoComplete||"_onApiVideoSessionEnd"===a||(this._logger.warn(w,"#"+a+"() > The video content already completed."),!1):(this._logger.warn(w,"#"+a+"() > No active tracking session."),!1)},e.prototype._updateReportingInterval=function(a,b){var c={};c[K]=!!b,c[J]=a,this._channel.trigger(new h(ja,c))},e.prototype._updateLastInBandItem=function(a){var b=this._lastInBandItem,c=(new Date).getTime(),d=b.assetData.type()===o.TYPE_AD||a.assetData.type()===o.TYPE_AD,e=1e3*Math.abs(a.eventData.playhead()-b.eventData.playhead()),f=Math.abs(c-b.eventData.ts()),g=Math.abs(e-f),h=f;h>ka?(this._logger.warn(w," Resetting duration in lastInBandItem["+b.assetData.type()+":"+b.eventData.type()+"] call to 0 as calculated duration ("+h+")exceeds 10mins"),h=0):b.eventData.type()==n.EVENT_TYPE_PLAY&&!d&&!this._doNotOverrideEventDuration&&g>la&&(h=Math.min(e,f),this._logger.warn(w," Resetting duration in lastInBandItem["+b.assetData.type()+":"+b.eventData.type()+"] call to "+h+" as calculated error delta ("+g+")exceeds 2sec")),this._doNotOverrideEventDuration=!1,b.eventData.duration(h),b.eventData.ts(c),b.eventData.playhead(a.eventData.playhead()),b.qosData.startupTime(a.qosData.startupTime()),b.qosData.isStartupTimeOverridden=a.qosData.isStartupTimeOverridden},e.prototype._updateLastInbandItemToBuffering=function(){this._stashedLastInBandItem=this._lastInBandItem;var a=0;null!=this._lastInBandItem&&(this._lastInBandItem.assetData.type()==o.TYPE_MAIN_CONTENT&&this._lastInBandItem.eventData.type()==n.EVENT_TYPE_START&&(this._stashedMainMetadata=this._lastInBandItem.meta),a=this._lastInBandItem.eventData.playhead());var b=new t(this,n.EVENT_TYPE_BUFFER,a,null,null);b.assetData.adData(null),b.assetData.type(o.TYPE_MAIN_CONTENT),this._lastInBandItem=b},e.prototype._restoreLastInbandItem=function(){if(null!=this._stashedLastInBandItem){var a=null;this._stashedLastInBandItem.eventData.type()==n.EVENT_TYPE_START&&(this._lastInBandItem.assetData.type()==o.TYPE_AD?a=this._lastInBandItem.meta:(a=this._stashedMainMetadata,this._stashedMainMetadata=null));var b=new t(this,this._stashedLastInBandItem.eventData.type(),this._stashedLastInBandItem.eventData.playhead(),a,this._stashedLastInBandItem.callback);b.filterReport=this._stashedLastInBandItem.filterReport,this._lastInBandItem=b,this._stashedLastInBandItem=null}},e.prototype._flushLastInbandItem=function(a){if(this._lastInBandItem){this._updateQoSInfo(a);var b=new t(this,this._lastInBandItem.eventData.type(),a.playhead,this._lastInBandItem.meta,this._lastInBandItem.callback);this._sendHit(b,!0)}},e.prototype._createAndSendReport=function(a){var b=this._reportFactory.createReportForItem(a);b.qosData.isStartupTimeOverridden||b.qosData.startupTime(this._autoComputedStartupTime);var c={};if(c[G]=b,this._channel.trigger(new h(ha,c)),b.eventData.type()==n.EVENT_TYPE_START||b.eventData.type()==n.EVENT_TYPE_PLAY||b.eventData.type()==n.EVENT_TYPE_PAUSE||b.eventData.type()==n.EVENT_TYPE_STALL||b.eventData.type()==n.EVENT_TYPE_BUFFER){var d={};d[H]=!0,this._channel.command(z,d)}},e.prototype._sendHit=function(a,b){switch(a.eventData.type()){case n.EVENT_TYPE_START:case n.EVENT_TYPE_PLAY:case n.EVENT_TYPE_PAUSE:case n.EVENT_TYPE_STALL:case n.EVENT_TYPE_BUFFER:this._lastInBandItem?(this._updateLastInBandItem(a),this._lastInBandItem.eventData.type()==n.EVENT_TYPE_START&&this._lastInBandItem.assetData.type()==o.TYPE_MAIN_CONTENT&&(this._autoComputedStartupTime+=this._lastInBandItem.eventData.duration()),this._createAndSendReport(this._lastInBandItem),b&&this._lastInBandItem.eventData.type()==a.eventData.type()||this._createAndSendReport(a)):this._createAndSendReport(a),this._lastInBandItem=a;break;case n.EVENT_TYPE_COMPLETE:case n.EVENT_TYPE_SKIP:if(this._lastInBandItem&&(this._updateLastInBandItem(a),this._createAndSendReport(this._lastInBandItem)),a.eventData.type()!==n.EVENT_TYPE_SKIP&&this._createAndSendReport(a),a.assetData.type()==o.TYPE_MAIN_CONTENT){this._lastInBandItem=null,this._stashedLastInBandItem=null;var c={};c[H]=!0,this._channel.command(A,c)}else a.assetData.type()==o.TYPE_AD&&(this._lastInBandItem.assetData.adData(null),this._lastInBandItem.assetData.type(o.TYPE_MAIN_CONTENT),this._doNotOverrideEventDuration=!0);break;case n.EVENT_TYPE_CHAPTER_START:case n.EVENT_TYPE_CHAPTER_COMPLETE:case n.EVENT_TYPE_CHAPTER_SKIP:this._lastInBandItem&&(this._updateLastInBandItem(a),this._createAndSendReport(this._lastInBandItem)),a.eventData.type()!==n.EVENT_TYPE_CHAPTER_SKIP&&this._createAndSendReport(a),this._lastInBandItem&&(this._lastInBandItem.assetData.chapterData(a.eventData.type()==n.EVENT_TYPE_CHAPTER_START?new s(a.assetData.chapterData()):null),this._lastInBandItem.eventData.duration(0),this._createAndSendReport(this._lastInBandItem));break;default:this._createAndSendReport(a)}};var w="ah::Context",x="sourceErrorSDK",y="error",z="clock:reporting.resume",A="clock:reporting.pause",B="reporting_interval",C="session_id",D="reset_session_id",E="callback",F="filter_report",G="report",H="reset",I="track_external_errors",J="reporting_interval",K="do_not_override_interval",L="api:aa_start",M="api:aa_ad_start",N="api:video_load",O="api:video_unload",P="api:video_start",Q="api:video_complete",R="api:video_skip",S="api:video_resume",T="api:video_session_end",U="api:adbreak_start",V="api:adbreak_complete",W="api:ad_start",X="api:ad_complete",Y="api:ad_skip",Z="api:play",$="api:pause",_="api:buffer_start",aa="api:chapter_start",ba="api:chapter_complete",ca="api:chapter_skip",da="api:track_error",ea="api:track_internal_error",fa="api:bitrate_change",ga="api:quantum_end",ha="context:report_available",ia="net:check_status_complete",ja="reporting:update_interval",ka=6e5,la=2e3,ma=10;d.context.Context=e}(a.ADB.core,a.ADB.va,a.ADB.va.utils,b),function(a){"use strict";function b(a,b){this.trackingServer=a,this.publisher=b,this.ssl=!1,this.ovp=c,this.sdk=c,this.quietMode=!1,this.debugLogging=!1,this.__isPrimetime=!1,this.__psdkVersion=null}var c="unknown";a.AdobeHeartbeatPluginConfig=b}(b),function(a){"use strict";function b(){}b.prototype.onError=function(a){},b.prototype.onTrackingDisabled=function(){},a.AdobeHeartbeatPluginDelegate=b}(b),function(a,b,c){"use strict";function d(a){d.__super__.constructor.call(this,q),this._radio=new i(this._logger),this._channel=this._radio.channel(y),this._delegate=a,this._context=new l(this._channel,this._logger),this._filter=new m(this._channel,this._logger),this._network=new n(this._channel,this._logger),this._setupDataResolver()}var e=a.Event,f=a.Trigger,g=a.plugin.BasePlugin,h=a.plugin.ParamMapping,i=a.radio.Radio,j=b.ErrorInfo,k=b.Version,l=c.context.Context,m=c.filter.ReportFilter,n=c.network.Network,o=c.clock.Clock,p=c.AdobeHeartbeatPluginConfig;a.extend(d,g),d.prototype.configure=function(a){if(!a)throw new Error("Reference to the configuration data cannot be NULL.");if(!(a instanceof p))throw new Error("Expected config data to be instance of AdobeHeartbeatPluginConfig.");this._config=a,this._config.debugLogging?this._logger.enable():this._logger.disable(),this._logger.debug(this._logTag,"#configure({trackingServer="+this._config.trackingServer+", publisher="+this._config.publisher+", quietMode="+this._config.quietMode+", ssl="+this._config.ssl+"})");var b=this._config.trackingServer+"/settings/",c={};c[ja]=this._config.trackingServer,c[ka]=b,c[la]=this._config.publisher,c[ma]=this._config.quietMode,c[na]=this._config.ssl,this._channel.trigger(new e(sa,c)),this._isConfigured=!0},d.prototype.bootstrap=function(a){d.__super__.bootstrap.call(this,a),this._channel.on(z,this._onError,this),this._clock=new o(this._pluginManager,this._channel,this._logger),this._channel.command(Ra),this._channel.trigger(new e(Ya)),this._channel.on(pa,this._onCheckStatusComplete,this),this._registerCommands(),this._registerBehaviours()},d.prototype._teardown=function(){this._logger.debug(this._logTag,"#_teardown()"),this._radio.shutdown(),this._context.destroy(),this._clock.destroy(),this._filter.destroy(),this._network.destroy()},d.prototype._canProcess=function(){return this._isConfigured?this._errorInfo?(this._logger.error(this._logTag,"_canProcess() > Plugin in ERROR state."),!1):d.__super__._canProcess.call(this):(this._logger.error(this._logTag,"_canProcess() > Plugin not configured."),!1)},d.prototype._cmdAnalyticsError=function(a){this._errorInfo||(this._errorInfo=new j("Internal error","AdobeAnalyticsPlugin is in ERROR state."),this._trigger(z,this._errorInfo),this._delegate&&this._delegate.onError(this._errorInfo))},d.prototype._cmdAnalyticsStart=function(a){this._canProcess()&&this._channel.trigger(new e(qa,a))},d.prototype._cmdAnalyticsAdStart=function(a){this._canProcess()&&this._channel.trigger(new e(ra,a))},d.prototype._cmdVideoLoad=function(a){this._errorInfo=null,this._canProcess()&&(this._isTrackingSessionActive&&this._channel.trigger(new e(ua,a)),this._isTrackingSessionActive=!1,this._isPaused=!0,this._isSeeking=!1,this._isBuffering=!1,this._isVideoIdle=!1,this._filter.clear(),this._channel.trigger(new e(ta,a)),this._isTrackingSessionActive=!0)},d.prototype._cmdVideoUnload=function(a){this._errorInfo=null,this._canProcess()&&(this._channel.trigger(new e(ua,a)),this._filter.flush(),this._runReportingTimer(!1),this._runFlushFilterTimer(!1),this._runIdleTimer(!1),this._isTrackingSessionActive=!1)},d.prototype._cmdBeginReporting=function(a){this._canProcess()&&this._channel.trigger(new e(Pa,{}))},d.prototype._cmdVideoSessionEnd=function(a){this._canProcess()&&this._channel.trigger(new e(za,a))},d.prototype._cmdVideoStart=function(a){this._canProcess()&&(this._channel.trigger(new e(va,a)),this._filter.flush())},d.prototype._cmdVideoComplete=function(a){this._canProcess()&&this._channel.trigger(new e(wa,a))},d.prototype._cmdVideoSkip=function(a){this._canProcess()&&this._channel.trigger(new e(xa,a))},d.prototype._cmdVideoResume=function(a){this._canProcess()&&this._channel.trigger(new e(ya,a))},d.prototype._cmdPlay=function(a){this._canProcess()&&(this._isPaused=!1,this._resumePlaybackIfPossible(a))},d.prototype._cmdPause=function(a){this._canProcess()&&(this._channel.trigger(new e(Ga,a)),this._isPaused=!0,this._runIdleTimer(!0))},d.prototype._cmdAdBreakStart=function(a){this._canProcess()&&this._channel.trigger(new e(Aa,a))},d.prototype._cmdAdBreakComplete=function(a){this._canProcess()&&(this._channel.trigger(new e(Ba,a)),this._resumePlaybackIfPossible(a))},d.prototype._cmdAdStart=function(a){this._canProcess()&&(this._channel.trigger(new e(Ca,a)),this._resumePlaybackIfPossible(a))},d.prototype._cmdAdComplete=function(a){this._canProcess()&&this._channel.trigger(new e(Da,a))},d.prototype._cmdAdSkip=function(a){this._canProcess()&&this._channel.trigger(new e(Ea,a))},d.prototype._cmdBufferStart=function(a){this._canProcess()&&(this._channel.trigger(new e(Ha,a)),this._isBuffering=!0,this._runIdleTimer(!0))},d.prototype._cmdBufferComplete=function(a){this._canProcess()&&(this._isBuffering=!1,this._isPaused?this._channel.trigger(new e(Ga,a)):this._resumePlaybackIfPossible(a))},d.prototype._cmdSeekStart=function(a){this._canProcess()&&(this._channel.trigger(new e(Ga,a)),this._isSeeking=!0,this._runIdleTimer(!0))},d.prototype._cmdSeekComplete=function(a){this._canProcess()&&(this._isSeeking=!1,this._resumePlaybackIfPossible(a))},d.prototype._cmdChapterStart=function(a){this._canProcess()&&this._channel.trigger(new e(Ia,a))},d.prototype._cmdChapterComplete=function(a){this._canProcess()&&this._channel.trigger(new e(Ja,a))},d.prototype._cmdChapterSkip=function(a){this._canProcess()&&this._channel.trigger(new e(Ka,a))},d.prototype._cmdBitrateChange=function(a){this._canProcess()&&this._channel.trigger(new e(Na,a))},d.prototype._cmdTrackError=function(a){this._canProcess()&&this._channel.trigger(new e(La,a))},d.prototype._cmdClockReportingTick=function(a){this._canProcess()&&this._channel.trigger(new e(Oa,a))},d.prototype._onCheckStatusComplete=function(a){if(this._canProcess()){var b=!1;a&&a.data&&a.data[oa]&&(b=a.data[oa]),this._logger.debug(this._logTag,"#_onCheckStatusComplete(trackingDisabled="+b+")"),b&&this._delegate&&this._delegate.onTrackingDisabled()}},d.prototype._cmdIdleTick=function(a){this._canProcess()&&(this._isVideoIdle=!0,this._trigger(aa),this._channel.trigger(new e(za,a)),this._filter.flush(),this._runReportingTimer(!1),this._runFlushFilterTimer(!1),this._runIdleTimer(!1),this._trigger($))},d.prototype._onError=function(a){this._errorInfo=a.data;var b={};b[ha]=Qa,b[ia]=this._errorInfo.getMessage()+"|"+this._errorInfo.getDetails(),this._channel.trigger(new e(Ma,b)),this._runReportingTimer(!1),this._trigger(z,this._errorInfo),this._delegate&&this._delegate.onError(this._errorInfo)},d.prototype._runIdleTimer=function(a){var b={};b[ga]=!0,a?this._channel.command(Wa,b):this._channel.command(Xa,b)},d.prototype._runFlushFilterTimer=function(a){var b={};b[ga]=!0,a?this._channel.command(Ua,b):this._channel.command(Va,b)},d.prototype._runReportingTimer=function(a){var b={};b[ga]=!0,a?this._channel.command(Sa,b):this._channel.command(Ta,b)},d.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleAnalyticsError",this._cmdAnalyticsError),this._pluginManager.comply(this,"handleAnalyticsStart",this._cmdAnalyticsStart),this._pluginManager.comply(this,"handleAnalyticsAdStart",this._cmdAnalyticsAdStart),this._pluginManager.comply(this,"handleVideoLoad",this._cmdVideoLoad),this._pluginManager.comply(this,"handleVideoUnload",this._cmdVideoUnload),this._pluginManager.comply(this,"handleBeginReporting",this._cmdBeginReporting),this._pluginManager.comply(this,"handleVideoSessionEnd",this._cmdVideoSessionEnd),this._pluginManager.comply(this,"handleVideoStart",this._cmdVideoStart),this._pluginManager.comply(this,"handleVideoComplete",this._cmdVideoComplete),this._pluginManager.comply(this,"handleVideoSkip",this._cmdVideoSkip),this._pluginManager.comply(this,"handleVideoResume",this._cmdVideoResume),this._pluginManager.comply(this,"handlePlay",this._cmdPlay),this._pluginManager.comply(this,"handlePause",this._cmdPause),this._pluginManager.comply(this,"handleAdBreakStart",this._cmdAdBreakStart),this._pluginManager.comply(this,"handleAdBreakComplete",this._cmdAdBreakComplete),this._pluginManager.comply(this,"handleAdStart",this._cmdAdStart),this._pluginManager.comply(this,"handleAdComplete",this._cmdAdComplete),this._pluginManager.comply(this,"handleAdSkip",this._cmdAdSkip),this._pluginManager.comply(this,"handleBufferStart",this._cmdBufferStart),this._pluginManager.comply(this,"handleBufferComplete",this._cmdBufferComplete),this._pluginManager.comply(this,"handleSeekStart",this._cmdSeekStart),this._pluginManager.comply(this,"handleSeekComplete",this._cmdSeekComplete),this._pluginManager.comply(this,"handleChapterStart",this._cmdChapterStart),this._pluginManager.comply(this,"handleChapterComplete",this._cmdChapterComplete),this._pluginManager.comply(this,"handleChapterSkip",this._cmdChapterSkip),this._pluginManager.comply(this,"handleBitrateChange",this._cmdBitrateChange),this._pluginManager.comply(this,"handleTrackError",this._cmdTrackError),this._pluginManager.comply(this,"handleClockReportingTick",this._cmdClockReportingTick),this._pluginManager.comply(this,"handleIdleTick",this._cmdIdleTick)},d.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new f(t,C),this,"handleVideoLoad",[new h(s,"rsid","rsid"),new h(s,"tracking_server","trackingServer")]),this._pluginManager.registerBehaviour(new f(t,D),this,"handleVideoUnload"),this._pluginManager.registerBehaviour(new f(t,ba),this,"handleBeginReporting"),this._pluginManager.registerBehaviour(new f(t,E),this,"handleVideoSessionEnd",[new h(t,"video.playhead","playhead")]),this._pluginManager.registerBehaviour(new f(t,F),this,"handleVideoStart",[new h(t,"video.id","videoId"),new h(t,"video.name","videoName"),new h(t,"video.length","videoLength"),new h(t,"video.playhead","playhead"),new h(t,"video.playerName","playerName"),new h(t,"video.streamType","streamType"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime"),new h(s,"rsid","rsid"),new h(s,"tracking_server","trackingServer"),new h(s,"channel","channel"),new h(s,"meta.video.*","metaVideo"),new h(s,"ssl","useSsl"),new h(u,"meta","metaNielsen"),new h(r,"publisher","publisher"),new h(r,"sdk","sdk"),new h(r,"ovp","ovp"),new h(r,"version","version"),new h(r,"api_level","apiLvl")]),this._pluginManager.registerBehaviour(new f(t,H),this,"handleVideoComplete",[new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(t,I),this,"handleVideoSkip",[new h(t,"video.playhead","playhead"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(t,G),this,"handleVideoResume",[new h(t,"video.id","videoId"),new h(t,"video.name","videoName"),new h(t,"video.length","videoLength"),new h(t,"video.playhead","playhead"),new h(t,"video.playerName","playerName"),new h(t,"video.streamType","streamType")]),this._pluginManager.registerBehaviour(new f(t,J),this,"handlePlay",[new h(t,"video.playhead","playhead"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(t,K),this,"handlePause",[new h(t,"video.playhead","playhead"),new h(t,"video.playheadStalled","playheadStalled"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(t,M),this,"handleAdBreakStart",[new h(t,"ad.isInAdBreak","isInAdBreak"),new h(t,"video.playhead","playhead"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(t,N),this,"handleAdBreakComplete",[new h(t,"ad.isInAdBreak","isInAdBreak"),new h(t,"video.playhead","playhead"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(t,O),this,"handleAdStart",[new h(t,"video.playhead","playhead"),new h(t,"ad.id","adId"),new h(t,"ad.name","adName"),new h(t,"ad.length","adLength"),new h(t,"ad.position","adPosition"),new h(t,"ad.granularTracking","adGranularTracking"),new h(t,"ad.trackingInterval","adTrackingInterval"),new h(t,"pod.name","podName"),new h(t,"pod.playerName","podPlayerName"),new h(t,"pod.position","podPosition"),new h(t,"pod.startTime","podSecond"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime"),new h(s,"meta.video.*","metaVideo"),new h(s,"meta.ad.*","metaAd"),new h(u,"meta","metaNielsen"),new h(u,"metaAd","metaAdNielsen")]),this._pluginManager.registerBehaviour(new f(t,P),this,"handleAdComplete",[new h(t,"video.playhead","playhead"),new h(t,"ad.isInAdBreak","isInAdBreak"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(t,Q),this,"handleAdSkip",[new h(t,"video.playhead","playhead"),new h(t,"ad.isInAdBreak","isInAdBreak"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(t,R),this,"handleBufferStart",[new h(t,"video.playhead","playhead"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(t,S),this,"handleBufferComplete",[new h(t,"video.playhead","playhead"),new h(t,"video.playheadStalled","playheadStalled"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(t,T),this,"handleSeekStart",[new h(t,"video.playhead","playhead")]),this._pluginManager.registerBehaviour(new f(t,U),this,"handleSeekComplete",[new h(t,"video.playhead","playhead"),new h(t,"ad.isInAd","isInAd"),new h(t,"ad.id","adId"),new h(t,"ad.position","adPosition"),new h(t,"pod.playerName","podPlayerName"),new h(t,"pod.position","podPosition"),new h(t,"chapter.isInChapter","isInChapter"),new h(t,"chapter.position","chapterPosition"),new h(t,"chapter.name","chapterName"),new h(t,"chapter.length","chapterLength"),new h(t,"chapter.startTime","chapterOffset"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(t,V),this,"handleChapterStart",[new h(t,"video.playhead","playhead"),new h(t,"chapter.position","chapterPosition"),new h(t,"chapter.name","chapterName"),new h(t,"chapter.length","chapterLength"),new h(t,"chapter.startTime","chapterOffset"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime"),new h(s,"meta.video.*","metaVideo"),new h(s,"meta.chapter.*","metaChapter"),new h(u,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new f(t,W),this,"handleChapterComplete",[new h(t,"video.playhead","playhead"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(t,X),this,"handleChapterSkip",[new h(t,"video.playhead","playhead"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(t,Y),this,"handleBitrateChange",[new h(t,"video.playhead","playhead"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(t,Z),this,"handleTrackError"),this._pluginManager.registerBehaviour(new f(v,da),this,"handleClockReportingTick",[new h(t,"video.playhead","playhead"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(t,L),this,"handleClockReportingTick",[new h(t,"video.playhead","playhead"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(v,fa),this,"handleIdleTick",[new h(t,"video.playhead","playhead")]),this._pluginManager.registerBehaviour(new f(r,aa),this,"handleClockReportingTick",[new h(t,"video.playhead","playhead"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(s,z),this,"handleAnalyticsError"),this._pluginManager.registerBehaviour(new f(s,A),this,"handleAnalyticsStart",[new h(s,"vid","vid"),new h(s,"aid","aid"),new h(s,"mid","mid"),new h(s,"customerIDs","customerIDs"),new h(s,"blob","blob"),new h(s,"loc_hint","loc_hint"),new h(t,"video.playhead","playhead"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(s,B),this,"handleAnalyticsAdStart",[new h(t,"video.playhead","playhead"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")])},d.prototype._setupDataResolver=function(){var a={},b=this;a.version=function(){return k.getVersion()},a.api_level=function(){return k.getApiLevel()},a.tracking_server=function(){return b._config?b._config.trackingServer:null},a.publisher=function(){return b._config?b._config.publisher:null},a.quiet_mode=function(){return!!b._config&&b._config.quietMode},a.ovp=function(){return b._config?b._config.ovp:null},a.sdk=function(){return b._config?b._config.sdk:null},a.is_primetime=function(){return!!b._config&&b._config.__isPrimetime},a.psdk_version=function(){return b._config?b._config.__psdkVersion:null},a.session_id=function(){return b._channel.request(w)},this._dataResolver=function(b){if(!b||0==b.length)return null;for(var c=null,d=0;d<b.length;d++){var e=b[d];c=c||{},c[e]=a.hasOwnProperty(e)?a[e].call(this):null}return c}},d.prototype._resumePlaybackIfPossible=function(a){this._errorInfo||this._isPaused||this._isSeeking||this._isBuffering||(this._isVideoIdle?(this._isVideoIdle=!1,this._resumePlaybackFromIdle()):this._channel.trigger(new e(Fa,a)),this._runIdleTimer(!1))},d.prototype._resumePlaybackFromIdle=function(){this._trigger(aa),this._filter.clear(),this._channel.trigger(new e(x)),this._trigger(_),this._runReportingTimer(!0),this._runFlushFilterTimer(!0)};var q="adobe-heartbeat",r=q,s="adobe-analytics",t="player",u="nielsen",v="service.clock",w="session_id",x="reset_session_id",y="heartbeat-channel",z="error",A="aa_start",B="sc_ad_start",C="video_load",D="video_unload",E="video_session_end",F="video_start",G="video_resume",H="video_complete",I="video_skip",J="play",K="pause",L="content_start",M="adbreak_start",N="adbreak_complete",O="ad_start",P="ad_complete",Q="ad_skip",R="buffer_start",S="buffer_complete",T="seek_start",U="seek_complete",V="chapter_start",W="chapter_complete",X="chapter_skip",Y="bitrate_change",Z="track_error",$="video_idle_start",_="video_idle_resume",aa="quantum_close",ba="video_begin_reporting",ca="heartbeat.reporting",da=ca+".tick",ea="heartbeat.idle",fa=ea+".tick",ga="reset",ha="source",ia="error_id",ja="tracking_server",ka="check_status_server",la="publisher",ma="quiet_mode",na="ssl",oa="tracking_disabled",pa="net:check_status_complete",qa="api:aa_start",ra="api:aa_ad_start",sa="api:config",ta="api:video_load",ua="api:video_unload",va="api:video_start",wa="api:video_complete",xa="api:video_skip",ya="api:video_resume",za="api:video_session_end",Aa="api:adbreak_start",Ba="api:adbreak_complete",Ca="api:ad_start",Da="api:ad_complete",Ea="api:ad_skip",Fa="api:play",Ga="api:pause",Ha="api:buffer_start",Ia="api:chapter_start",Ja="api:chapter_complete",Ka="api:chapter_skip",La="api:track_error",Ma="api:track_internal_error",Na="api:bitrate_change",Oa="api:quantum_end",Pa="api:video_begin_reporting",Qa="sourceErrorHeartbeat",Ra="clock:check_status.resume",Sa="clock:reporting.resume",Ta="clock:reporting.pause",Ua="clock:flush_filter.resume",Va="clock:flush_filter.pause",Wa="clock:idle.resume",Xa="clock:idle.pause",Ya="clock:check_status.get_settings";c.AdobeHeartbeatPlugin=d}(a.ADB.core,a.ADB.va,b),a.ADB.va.plugins.ah||(a.ADB.va.plugins.ah=b)}(this);\n  \n  // AdobeAnalyticsPlugin\n  !function(a){if(void 0===b)var b={};!function(a,b){"use strict";function c(a,b){this._onFail={fn:a,ctx:b}}var d=a.ErrorInfo;c.prototype.validateFields=function(a,b){if(!a)return this._fail("Data cannot be null");if(b)for(var c=0;c<b.length;c++){var d=b[c];switch(d){case"videoId":if(!a.hasOwnProperty("videoId"))return this._fail("The ID for the main video must be specified.");if("string"!=typeof a.videoId)return this._fail("The ID for the main video must be a String.");if(""===a.videoId)return this._fail("The ID for the main video cannot be an empty string.");break;case"mediaType":if(!a.hasOwnProperty("mediaType"))return this._fail("The media type for the main video must be specified.");if("string"!=typeof a.mediaType)return this._fail("The media type for the main video must be a String.");if(""===a.mediaType)return this._fail("The stream type for the main video cannot be an empty string.");break;case"streamType":if(!a.hasOwnProperty("streamType"))return this._fail("The stream type for the main video must be specified.");if("string"!=typeof a.streamType)return this._fail("The stream type for the main video must be a String.");if(""===a.streamType)return this._fail("The stream type for the main video cannot be an empty string.");break;case"playerName":if(!a.hasOwnProperty("playerName"))return this._fail("The player name for the main video must be specified.");if("string"!=typeof a.playerName)return this._fail("The player name for the main video must be a String.");if(""===a.playerName)return this._fail("The player name for the main video cannot be an empty string.");break;case"videoLength":if(!a.hasOwnProperty("videoLength"))return this._fail("The length of the main video must be specified.");if("number"!=typeof a.videoLength)return this._fail("The length of the main video must be a Number.");if(isNaN(a.videoLength))return this._fail("The length of the main video cannot be NaN.");break;case"podPlayerName":if(!a.hasOwnProperty("podPlayerName"))return this._fail("The player name for the ad-break must be specified.");if("string"!=typeof a.podPlayerName)return this._fail("The player name for the ad-break must be a String.");if(""===a.podPlayerName)return this._fail("The player name for the ad-break cannot be an empty string.");break;case"podPosition":if(!a.hasOwnProperty("podPosition"))return this._fail("Position (index) of the ad-break must be specified.");if("number"!=typeof a.podPosition)return this._fail("Position (index) of the ad-break must be a Number.");if(isNaN(a.podPosition))return this._fail("Position (index) of the ad-break cannot be NaN.");break;case"adId":if(!a.hasOwnProperty("adId"))return this._fail("The ad ID must be specified.");if("string"!=typeof a.adId)return this._fail("The ad ID must be a String.");if(""===a.adId)return this._fail("The ad ID cannot be an empty string.");break;case"adPosition":if(!a.hasOwnProperty("adPosition"))return this._fail("Position (index) of the ad must be specified.");if("number"!=typeof a.adPosition)return this._fail("Position (index) of the ad must be a Number.");if(isNaN(a.adPosition))return this._fail("Position (index) of the ad cannot be NaN.");break;case"adLength":if(!a.hasOwnProperty("adLength"))return this._fail("The length of the ad must be specified.");if("number"!=typeof a.adLength)return this._fail("The length of the ad must be a Number.");if(isNaN(a.adLength))return this._fail("The length of the ad cannot be NaN.");break;default:return this._fail("Unable to validate unknown parameter: "+d)}}return!0},c.prototype._fail=function(a){var b=new d("Invalid input data",a);return this._onFail.fn&&this._onFail.fn.call(this._onFail.ctx,b),!1},b.InputDataValidator=c}(a.ADB.va,b),function(a){"use strict";function b(){this.channel=c,this.debugLogging=!1}var c="";a.AdobeAnalyticsPluginConfig=b}(b),function(a){"use strict";function b(){}b.prototype.onError=function(a){},a.AdobeAnalyticsPluginDelegate=b}(b),function(a,b,c,d){"use strict";function e(a){this._aaPlugin=a}function f(a,b){if(f.__super__.constructor.call(this,s),!a)throw new Error("The reference to the AppMeasurement object cannot be NULL.");if(a.unsupportedBrowser)throw new Error("AppMeasurement is not supported in current browser.");this._appMeasurement=a,this._appMeasurementBridge=new e(this),this._delegate=b,this._videoMetadata={},this._adMetadata={},this._chapterMetadata={},this._errorInfo=null,this._appMeasurementReady=!1,this._beginReporting=!1,this._workQueue=new l(!0,x),this._inputDataValidator=new r(function(a){this._errorInfo=a,this._logger.error(this._logTag,a.getMessage()+" | "+a.getDetails());var b=this;setTimeout(function(){b._trigger(y,a),b._delegate&&b._delegate.onError(b._errorInfo)},0)},this),this._appMeasurement.isReadyToTrack(),this._setupDataResolver()}var g=a.Trigger,h=a.plugin.BasePlugin,i=a.plugin.ParamMapping,j=a.radio.Channel,k=a.radio.Command,l=a.radio.CommandQueue,m=b.ErrorInfo,n=c.md5,o=c.StringUtils,p=c.ObjectUtils,q=d.AdobeAnalyticsPluginConfig,r=d.InputDataValidator;e.prototype.onAppMeasurementReady=function(){this._aaPlugin&&this._aaPlugin._onAppMeasurementReady()},e.prototype.release=function(){this._aaPlugin=null},a.extend(f,h),f.prototype.configure=function(a){if(!a)throw new Error("Reference to the configuration data cannot be NULL.");if(!(a instanceof q))throw new Error("Expected config data to be instance of AdobeAnalyticsPluginConfig.");this._config=a,this._config.debugLogging?this._logger.enable():this._logger.disable(),this._logger.debug(this._logTag,"#configure({trackingServer="+this._config.debugLogging+", channel="+this._config.channel+", ssl="+this._appMeasurement.ssl+"})")},f.prototype.bootstrap=function(a){f.__super__.bootstrap.call(this,a),this._registerCommands(),this._registerBehaviours()},f.prototype.setup=function(){this._appMeasurement.isReadyToTrack()?this._onAppMeasurementReady():this._appMeasurement.callbackWhenReadyToTrack(this._appMeasurementBridge,this._appMeasurementBridge.onAppMeasurementReady,[]),f.__super__.setup.call(this)},f.prototype.setVideoMetadata=function(a){this._videoMetadata=p.clone(a)},f.prototype.setAdMetadata=function(a){this._adMetadata=p.clone(a)},f.prototype.setChapterMetadata=function(a){this._chapterMetadata=p.clone(a)},f.prototype._teardown=function(){this._logger.debug(this._logTag,"#_teardown()"),this._appMeasurementBridge.release()},f.prototype._canProcess=function(){return this._errorInfo?(this._logger.error(this._logTag,"#_canProcess() > In ERROR state."),!1):f.__super__._canProcess.call(this)},f.prototype._cmdVideoLoad=function(a){this._errorInfo=null},f.prototype._cmdBeginReporting=function(a){this._logger.debug(this._logTag,"#_cmdBeginReporting()"),this._beginReporting=!0,this._resumeWorkQueue()},f.prototype._cmdVideoStart=function(a){this._logger.debug(this._logTag,"#_cmdVideoStart()"),this._canProcess()&&this._workQueue.addCommand(new k(this._executeOpen,this,[a]))},f.prototype._cmdAdStart=function(a){this._logger.debug(this._logTag,"#_cmdAdStart()"),this._canProcess()&&this._workQueue.addCommand(new k(this._executeOpenAd,this,[a]))},f.prototype._cmdHeartbeatPluginError=function(a){this._errorInfo||(this._errorInfo=new m("Internal error","HeartbeatPlugin is in ERROR state."),this._trigger(y,this._errorInfo),this._delegate&&this._delegate.onError(this._errorInfo))},f.prototype._track=function(a){try{var b=this._appMeasurement.linkTrackVars;this._appMeasurement.linkTrackVars="",this._appMeasurement.track(a),this._appMeasurement.linkTrackVars=b}catch(a){this._logger.warn(this._logTag,"appMeasurement.track() call threw an exception.")}},f.prototype._executeOpen=function(a){if(this._logger.debug(this._logTag,"#_executeOpen(id="+a.videoId+", videoName="+a.videoName+", mediaType="+a.mediaType+", streamType="+a.streamType+", length="+a.videoLength+", playerName="+a.playerName+", channel="+a.channel+", isPrimetime="+a.isPrimetime+", sessionId="+a.sessionId+")"),this._canProcess()&&this._inputDataValidator.validateFields(a,["videoId","mediaType","streamType","videoLength","playerName"])){var b={};for(var c in a.metaVideo)a.metaVideo.hasOwnProperty(c)&&(b[c]=a.metaVideo[c]);if(a.metaNielsen)for(var c in a.metaNielsen)a.metaNielsen.hasOwnProperty(c)&&(b[c]=a.metaNielsen[c]);b["a.contentType"]=a.streamType,b["a.media.name"]=a.videoId,b["a.media.friendlyName"]=a.videoName||"",b["a.media.length"]=Math.floor(a.videoLength)||"0.0",b["a.media.playerName"]=a.playerName,b["a.media.channel"]=a.channel||"",b["a.media.view"]=!0,b["a.media.vsid"]=a.sessionId;var d={};d.contextData=b,"audio"===a.mediaType?(d.pev3=B,d.ms_a="1"):d.pev3=z,d.pe=a.isPrimetime?E:D,this._track(d);var e=this;setTimeout(function(){e._trigger(H,a)},0)}},f.prototype._executeOpenAd=function(a){var b=n(a.videoId)+"_"+a.podPosition;if(this._logger.debug(this._logTag,"#_executeOpenAd(id="+a.adId+", mediaType="+a.mediaType+", streamType="+a.streamType+", length="+a.adLength+", podPlayerName="+a.podPlayerName+", parentId="+a.videoId+", podId="+b+", parentPodPosition="+a.adPosition+", podSecond="+a.podSecond+")"),this._canProcess()&&this._inputDataValidator.validateFields(a,["videoId","mediaType","streamType","playerName","adId","adLength","podPlayerName","adPosition"])){a.podSecond=null==a.podSecond||isNaN(a.podSecond)?a.playhead:a.podSecond;var c,d={};for(c in a.metaVideo)a.metaVideo.hasOwnProperty(c)&&(d[c]=a.metaVideo[c]);for(c in a.metaAd)a.metaAd.hasOwnProperty(c)&&(d[c]=a.metaAd[c]);if(a.metaNielsen)for(var c in a.metaNielsen)a.metaNielsen.hasOwnProperty(c)&&(d[c]=a.metaNielsen[c]);d["a.contentType"]=a.streamType,d["a.media.name"]=a.videoId,d["a.media.playerName"]=a.playerName,d["a.media.channel"]=a.channel||"",d["a.media.vsid"]=a.sessionId,d["a.media.friendlyName"]=a.videoName||"",d["a.media.length"]=Math.floor(a.videoLength)||"0.0",d["a.media.ad.name"]=a.adId,d["a.media.ad.friendlyName"]=a.adName||"",d["a.media.ad.podFriendlyName"]=a.podName||"",d["a.media.ad.length"]=Math.floor(a.adLength)||"0.0",d["a.media.ad.playerName"]=a.podPlayerName,d["a.media.ad.pod"]=b,d["a.media.ad.podPosition"]=Math.floor(a.adPosition)||"0.0",d["a.media.ad.podSecond"]=Math.floor(a.podSecond)||"0.0",d["a.media.ad.view"]=!0;var e={};e.contextData=d,"audio"===a.mediaType?(e.pev3=C,e.ms_a="1"):e.pev3=A,e.pe=a.isPrimetime?G:F,this._track(e);var f=this;setTimeout(function(){f._trigger(I,a)},0)}},f.prototype._setupDataResolver=function(){var a={},b=this;a.rsid=function(){return b._appMeasurement.account},a.tracking_server=function(){return b._appMeasurement.ssl&&b._appMeasurement.trackingServerSecure?b._appMeasurement.trackingServerSecure:b._appMeasurement.trackingServer},a.ssl=function(){return b._appMeasurement.ssl},a.vid=function(){return b._appMeasurement.visitorID},a.aid=function(){return b._appMeasurement.analyticsVisitorID},a.mid=function(){return b._appMeasurement.marketingCloudVisitorID},a.blob=function(){return b._appMeasurement.audienceManagerBlob},a.loc_hint=function(){return b._appMeasurement.audienceManagerLocationHint?parseInt(b._appMeasurement.audienceManagerLocationHint):""},a.customerIDs=function(){var a={},c=b._appMeasurement.visitor.getCustomerIDs();for(var d in c)if(c.hasOwnProperty(d)){var e=c[d];if("object"==typeof e){for(var f in e)e.hasOwnProperty(f)&&("authState"==f?a[d+".as"]=e[f]:a[d+"."+f]=e[f]);a[d+".as"]||(a[d+".as"]="0")}}return a},a.channel=function(){return b._config?b._config.channel:null},a.meta=function(a){var c=a.split(".");if(c.length<2)return null;var d=c.shift();switch(a=c.join("."),d){case"video":return a==j.WILDCARD?b._videoMetadata:b._videoMetadata[a];case"ad":return a==j.WILDCARD?b._adMetadata:b._adMetadata[a];case"chapter":return a==j.WILDCARD?b._chapterMetadata:b._chapterMetadata[a];default:return null}},this._dataResolver=function(b){if(!b||0==b.length)return null;for(var c=null,d=0;d<b.length;d++){var e=b[d];c=c||{},o.startsWith(e,"meta.")?c[e]=a.meta(e.split("meta.")[1]):c[e]=a.hasOwnProperty(e)?a[e].call(this):null}return c}},f.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleVideoLoad",this._cmdVideoLoad),this._pluginManager.comply(this,"handleBeginReporting",this._cmdBeginReporting),this._pluginManager.comply(this,"handleVideoStart",this._cmdVideoStart),this._pluginManager.comply(this,"handleAdStart",this._cmdAdStart),this._pluginManager.comply(this,"handleHeartbeatPluginError",this._cmdHeartbeatPluginError)},f.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new g(v,J),this,"handleVideoLoad"),this._pluginManager.registerBehaviour(new g(v,M),this,"handleBeginReporting"),this._pluginManager.registerBehaviour(new g(v,K),this,"handleVideoStart",[new i(v,"video.id","videoId"),new i(v,"video.mediaType","mediaType"),new i(v,"video.streamType","streamType"),new i(v,"video.name","videoName"),new i(v,"video.length","videoLength"),new i(v,"video.playerName","playerName"),new i(v,"video.streamType","streamType"),new i(w,"is_primetime","isPrimetime"),new i(w,"session_id","sessionId"),new i(t,"channel","channel"),new i(t,"meta.video.*","metaVideo"),new i(u,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new g(v,L),this,"handleAdStart",[new i(v,"video.id","videoId"),new i(v,"video.mediaType","mediaType"),new i(v,"video.streamType","streamType"),new i(v,"video.playhead","playhead"),new i(v,"video.playerName","playerName"),new i(v,"video.name","videoName"),new i(v,"video.length","videoLength"),new i(v,"ad.id","adId"),new i(v,"ad.length","adLength"),new i(v,"ad.position","adPosition"),new i(v,"ad.name","adName"),new i(v,"pod.name","podName"),new i(v,"pod.position","podPosition"),new i(v,"pod.playerName","podPlayerName"),new i(v,"pod.startTime","podSecond"),new i(w,"is_primetime","isPrimetime"),new i(w,"session_id","sessionId"),new i(t,"channel","channel"),new i(t,"meta.video.*","metaVideo"),new i(t,"meta.ad.*","metaAd"),new i(u,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new g(w,y),this,"handleHeartbeatPluginError")},f.prototype._onAppMeasurementReady=function(){this._logger.debug(this._logTag,"#_onAppMeasurementReady"),this._appMeasurementReady=!0,this._resumeWorkQueue()},f.prototype._resumeWorkQueue=function(){this._appMeasurementReady&&this._beginReporting&&(this._logger.debug(this._logTag,"#_resumeWorkQueue"),this._workQueue.resume())};var s="adobe-analytics",t=s,u="nielsen",v="player",w="adobe-heartbeat",x=2e3,y="error",z="video",A="videoAd",B="audio",C="audioAd",D="ms_s",E="msp_s",F="msa_s",G="mspa_s",H="aa_start",I="sc_ad_start",J="video_load",K="video_start",L="ad_start",M="video_begin_reporting";d.AdobeAnalyticsPlugin=f}(a.ADB.core,a.ADB.va,a.ADB.va.utils,b),function(a){"use strict";var b={SHOW:"a.media.show",SEASON:"a.media.season",EPISODE:"a.media.episode",ASSET_ID:"a.media.asset",GENRE:"a.media.genre",FIRST_AIR_DATE:"a.media.airDate",FIRST_DIGITAL_DATE:"a.media.digitalDate",RATING:"a.media.rating",ORIGINATOR:"a.media.originator",NETWORK:"a.media.network",SHOW_TYPE:"a.media.type",AD_LOAD:"a.media.adLoad",MVPD:"a.media.pass.mvpd",AUTHORIZED:"a.media.pass.auth",DAY_PART:"a.media.dayPart",FEED:"a.media.feed",STREAM_FORMAT:"a.media.format"},c={ARTIST:"a.media.artist",ALBUM:"a.media.album",LABEL:"a.media.label",AUTHOR:"a.media.author",STATION:"a.media.station",PUBLISHER:"a.media.publisher"},d={ADVERTISER:"a.media.ad.advertiser",CAMPAIGN_ID:"a.media.ad.campaign",CREATIVE_ID:"a.media.ad.creative",PLACEMENT_ID:"a.media.ad.placement",SITE_ID:"a.media.ad.site",CREATIVE_URL:"a.media.ad.creativeURL"};a.VideoMetadataKeys=b,a.AudioMetadataKeys=c,a.AdMetadataKeys=d}(b),a.ADB.va.plugins.aa||(a.ADB.va.plugins.aa=b)}(this);\n  \n  // MediaHeartbeat\n  !function(a){!function(a,b){"use strict";function c(){this._processAction=!0,this._store={}}function d(a){if(!a)throw new Error("Reference to the logger object cannot be NULL");this._logger=a,this._rules=[]}c.prototype.setRuleName=function(a){this._ruleName=a},c.prototype.getRuleName=function(a,b){return this._ruleName},c.prototype.setData=function(a,b){this._store[a]=b},c.prototype.getData=function(a){return this._store[a]},c.prototype.shouldProcessAction=function(){return this._processAction},c.prototype.stopProcessingAction=function(){this._processAction=!1},c.prototype.startProcessingAction=function(){this._processAction=!0},d.createContext=function(){return new c},d.createPredicate=function(a,b,c){return{fn:a,expectedValue:b,msg:c}},d.prototype.registerRule=function(a,b,c,d,e){this._rules.push({name:a,desc:b,preconditions:c,actions:d,scope:e})},d.prototype.registerEnterExitAction=function(a,b){this._enterAction=a,this._exitAction=b},d.prototype._handleFailure=function(a,b){this._logger.error(e,a.desc+" -  "+b.msg)},d.prototype._getRule=function(a){for(var b=0;b<this._rules.length;++b)if(this._rules[b].name===a)return this._rules[b];return null},d.prototype.processRule=function(a,b){var c=!0,f=this._getRule(a);if(f){var g=f.scope;b||(b=d.createContext()),b.setRuleName(a);for(var h=!1,i=0;i<f.preconditions.length;++i){var j=f.preconditions[i];if(h=!!j.fn.call(g,b)!==j.expectedValue){this._handleFailure(f,j);break}}if(h)c=!1;else{b.startProcessingAction(),this._enterAction&&this._enterAction.call(g,b);for(var i=0;i<f.actions.length;++i){var k=f.actions[i];if(!b.shouldProcessAction()){this._logger.info(e,"Stopping actions for "+f.desc);break}k.call(g,b)}this._exitAction&&b.shouldProcessAction()&&this._exitAction.call(g,b)}}else this._logger.warn(e,"No registered event found for ruleName "+a),c=!1;return c};var e="RuleEngine";b._RuleEngine=d}(a.ADB.core,a.ADB.va),function(a,b){"use strict";function c(a,b,c){this.taskFn=a,this.scope=b,this.interval=c,this.remainingInterval=c}function d(a){if(!a)throw new Error("Reference to the logger object cannot be NULL");this._logger=a,this._tasks=[],this._pausedTasks=[]}c.prototype.elapsedTime=function(a){this.remainingInterval-=a},c.prototype.shouldExecute=function(){return this.remainingInterval<=0},c.prototype.execute=function(){this.taskFn.call(this.scope)},d.prototype._getCurrentTimeInMS=function(){return(new Date).getTime()},d.prototype._runTasksForTime=function(a){var b=[],c=a-this._lastTickTime;this._lastTickTime=a;for(var d=0;d<this._tasks.length;){var e=this._tasks[d];e.elapsedTime(c),e.shouldExecute()?(b.push(e),this._tasks.splice(d,1)):++d}this._checkStopTimer();for(var d=0;d<b.length;++d)b[d].execute()},d.prototype._onTick=function(){var a=this._getCurrentTimeInMS();this._runTasksForTime(a)},d.prototype._startTimer=function(){var a=this;this._timer||(this._logger.info(e,"#startTimer()"),a._lastTickTime=this._getCurrentTimeInMS(),this._timer=window.setInterval(function(){a._onTick()},f))},d.prototype._stopTimer=function(){this._timer&&(this._logger.info(e,"#stopTimer()"),window.clearInterval(this._timer),this._timer=null)},d.prototype._checkStartTimer=function(){this._tasks.length>0&&this._startTimer()},d.prototype._checkStopTimer=function(){0===this._tasks.length&&this._stopTimer()},d.prototype._removeTask=function(a,b){for(var c=0;c<a.length;++c)if(a[c]===b)return a.splice(c,1),!0;return!1},d.prototype.scheduleTask=function(a,b,d){if(this._logger.info(e,"#scheduleTask()"),!a)throw new Error("Reference to the taskFn cannot be NULL");var f=new c(a,b,d);return this._tasks.push(f),this._checkStartTimer(),f},d.prototype.cancelTask=function(a){this._logger.info(e,"#cancelTask()"),this._removeTask(this._tasks,a),this._checkStopTimer()},d.prototype.pauseTask=function(a){this._logger.info(e,"#pauseTask()"),this._removeTask(this._tasks,a)&&this._pausedTasks.push(a),this._checkStopTimer()},d.prototype.resumeTask=function(a){this._logger.info(e,"#resumeTask()"),this._removeTask(this._pausedTasks,a)&&this._tasks.push(a),this._checkStartTimer()},d.prototype.clearTasks=function(){this._stopTimer(),this._tasks=[],this._pausedTasks=[]};var e="TaskScheduler",f=250;b._TaskScheduler=d}(a.ADB.core,a.ADB.va),function(a){"use strict";function b(){this.trackingServer=void 0,this.channel=void 0,this.ovp=void 0,this.appVersion=void 0,this.playerName=void 0,this.ssl=!1,this.debugLogging=!1}a.MediaHeartbeatConfig=b,a.MediaHeartbeatConfig.sharedInstance=new b}(a.ADB.va),function(a){"use strict";function b(){this.data={}}var c=a.plugins.videoplayer.VideoInfo,d=a.plugins.videoplayer.AdBreakInfo,e=a.plugins.videoplayer.AdInfo,f=a.plugins.videoplayer.ChapterInfo,g=a.plugins.videoplayer.QoSInfo;b.MEDIAINFO_KEY_NAME="a.name",b.MEDIAINFO_KEY_VIDEOID="a.videoId",b.MEDIAINFO_KEY_ADID="a.adId",b.MEDIAINFO_KEY_LENGTH="a.length",b.MEDIAINFO_KEY_PLAYHEAD="a.playhead",b.MEDIAINFO_KEY_MEDIATYPE="a.mediaType",b.MEDIAINFO_KEY_STREAMTYPE="a.streamType",b.MEDIAINFO_KEY_POSITION="a.position",b.MEDIAINFO_KEY_STARTTIME="a.startTime",b.MEDIAINFO_KEY_BITRATE="a.bitrate",b.MEDIAINFO_KEY_FPS="a.fps",b.MEDIAINFO_KEY_DROPPEDFRAMES="a.droppedFrames",b.MEDIAINFO_KEY_STARTUPTIME="a.startupTime",b.MEDIAINFO_KEY_TIMEDMETADATA="a.timedMetadata",b.prototype.setValue=function(a,b){this.data[a]=b},b.prototype.getValue=function(a){return this.data.hasOwnProperty(a)?this.data[a]:null},b.prototype.createVideoInfo=function(){var a=new c;return a.id=null!=this.getValue(b.MEDIAINFO_KEY_VIDEOID)?this.getValue(b.MEDIAINFO_KEY_VIDEOID):"",a.name=null!=this.getValue(b.MEDIAINFO_KEY_NAME)?this.getValue(b.MEDIAINFO_KEY_NAME):"",a.length=null!=this.getValue(b.MEDIAINFO_KEY_LENGTH)?this.getValue(b.MEDIAINFO_KEY_LENGTH):0,a.playhead=null!=this.getValue(b.MEDIAINFO_KEY_PLAYHEAD)?this.getValue(b.MEDIAINFO_KEY_PLAYHEAD):0,a.mediaType=null!=this.getValue(b.MEDIAINFO_KEY_MEDIATYPE)?this.getValue(b.MEDIAINFO_KEY_MEDIATYPE):"",a.streamType=null!=this.getValue(b.MEDIAINFO_KEY_STREAMTYPE)?this.getValue(b.MEDIAINFO_KEY_STREAMTYPE):"",a},b.prototype.createAdBreakInfo=function(){var a=new d;return a.name=null!=this.getValue(b.MEDIAINFO_KEY_NAME)?this.getValue(b.MEDIAINFO_KEY_NAME):"",a.position=null!=this.getValue(b.MEDIAINFO_KEY_POSITION)?this.getValue(b.MEDIAINFO_KEY_POSITION):0,a.startTime=null!=this.getValue(b.MEDIAINFO_KEY_STARTTIME)?this.getValue(b.MEDIAINFO_KEY_STARTTIME):0,a},b.prototype.createAdInfo=function(){var a=new e;return a.id=null!=this.getValue(b.MEDIAINFO_KEY_ADID)?this.getValue(b.MEDIAINFO_KEY_ADID):"",a.name=null!=this.getValue(b.MEDIAINFO_KEY_NAME)?this.getValue(b.MEDIAINFO_KEY_NAME):"",a.length=null!=this.getValue(b.MEDIAINFO_KEY_LENGTH)?this.getValue(b.MEDIAINFO_KEY_LENGTH):0,a.position=null!=this.getValue(b.MEDIAINFO_KEY_POSITION)?this.getValue(b.MEDIAINFO_KEY_POSITION):0,a},b.prototype.createChapterInfo=function(){var a=new f;return a.name=null!=this.getValue(b.MEDIAINFO_KEY_NAME)?this.getValue(b.MEDIAINFO_KEY_NAME):"",a.length=null!=this.getValue(b.MEDIAINFO_KEY_LENGTH)?this.getValue(b.MEDIAINFO_KEY_LENGTH):0,a.startTime=null!=this.getValue(b.MEDIAINFO_KEY_STARTTIME)?this.getValue(b.MEDIAINFO_KEY_STARTTIME):0,a.position=null!=this.getValue(b.MEDIAINFO_KEY_POSITION)?this.getValue(b.MEDIAINFO_KEY_POSITION):0,a},b.prototype.createQoSInfo=function(){var a=new g;return a.bitrate=null!=this.getValue(b.MEDIAINFO_KEY_BITRATE)?this.getValue(b.MEDIAINFO_KEY_BITRATE):0,a.fps=null!=this.getValue(b.MEDIAINFO_KEY_FPS)?this.getValue(b.MEDIAINFO_KEY_FPS):0,a.droppedFrames=null!=this.getValue(b.MEDIAINFO_KEY_DROPPEDFRAMES)?this.getValue(b.MEDIAINFO_KEY_DROPPEDFRAMES):0,a.startupTime=null!=this.getValue(b.MEDIAINFO_KEY_STARTUPTIME)?this.getValue(b.MEDIAINFO_KEY_STARTUPTIME):0,a},b.prototype.isEqual=function(a){if(this===a)return!0;if(!a||"object"!=typeof a||"function"!=typeof a.getValue)return!1;for(var c=[b.MEDIAINFO_KEY_NAME,b.MEDIAINFO_KEY_VIDEOID,b.MEDIAINFO_KEY_ADID,b.MEDIAINFO_KEY_LENGTH,b.MEDIAINFO_KEY_PLAYHEAD,b.MEDIAINFO_KEY_STREAMTYPE,b.MEDIAINFO_KEY_MEDIATYPE,b.MEDIAINFO_KEY_POSITION,b.MEDIAINFO_KEY_STARTTIME,b.MEDIAINFO_KEY_BITRATE,b.MEDIAINFO_KEY_FPS,b.MEDIAINFO_KEY_DROPPEDFRAMES,b.MEDIAINFO_KEY_STARTUPTIME,b.MEDIAINFO_KEY_TIMEDMETADATA],d=0;d<c.length;++d){var e=c[d];if(this.getValue(e)!==a.getValue(e))return!1}return!0},a.MediaObject=b}(a.ADB.va),function(a){"use strict";function b(a,c){if(!c)throw new Error("Visitor instance cannot be NULL");this._visitor=c,this._logger=a,this._status=b.OPT_UNKNOWN,this._optInFetchPermissionsCallback=this._optInFetchPermissionsCallback.bind(this)}var c="PrivacyManager";b.prototype.getStatus=function(){return this._status},b.prototype.configure=function(a){this.reset(),this._callback=a,this._optIn=window.adobe&&window.adobe.optIn?window.adobe.optIn:void 0,this._optIn&&this._optIn.doesOptInApply?(this._logger.info(c,"OptIn service enabled"),this._waitingForOptInCallback=!0,this._optInMediaApproved=!1):this._logger.info(c,"OptIn service does not apply"),this._waitingForVisitorCallback=!0,this._visitorOptOut=!1,this._fetchVisitorOptOut(),this._fetchOptIn(),this._updateStatus()},b.prototype.reset=function(){this._unsubscribeOptIn(),this._status=b.OPT_UNKNOWN,this._callback=null},b.prototype._fetchVisitorOptOut=function(){this._logger.info(c,"Fetching Visitor.isOptedOut");try{var a=this;this._visitor.isOptedOut(function(b){a._logger.info(c,"Visitor.isOptedOut : "+b),a._waitingForVisitorCallback=!1,a._visitorOptOut=b,a._updateStatus()},void 0,!0)}catch(a){this._logger.warn(c,"Error fetching Visitor.isOptedOut"),this._waitingForVisitorCallback=!1}},b.prototype._fetchOptIn=function(){try{if(!this._optIn||!this._optIn.doesOptInApply)return;this._logger.info(c,"Fetching permissions from OptIn service"),this._optInListenerRegistered||(this._optIn.fetchPermissions(this._optInFetchPermissionsCallback,!0),this._optInListenerRegistered=!0)}catch(a){this._logger.warn(c,"Error fetching permissions from OptIn service"),this._waitingForOptInCallback=!1}},b.prototype._unsubscribeOptIn=function(){try{this._optIn&&this._optInListenerRegistered&&(this._optIn.off("complete",this._optInFetchPermissionsCallback),this._optInListenerRegistered=!1)}catch(a){this._logger.error(c,"Error unsubscribing from OptIn service")}},b.prototype._optInFetchPermissionsCallback=function(){this._waitingForOptInCallback=!1;var a=this._optIn.isApproved(this._optIn.Categories.ECID),b=this._optIn.isApproved(this._optIn.Categories.ANALYTICS),d=void 0===this._optIn.Categories.MEDIA_ANALYTICS||this._optIn.isApproved(this._optIn.Categories.MEDIA_ANALYTICS);this._optInMediaApproved=a&&b&&d,this._logger.info(c,"OptIn fetchPermissions ECID : "+a+" Analytics : "+b+" Media : "+d),this._updateStatus()},b.prototype._updateStatus=function(){if(!(this._waitingForVisitorCallback||this._optIn&&this._optIn.doesOptInApply&&this._waitingForOptInCallback)){var a=this._visitorOptOut||this._optIn&&this._optIn.doesOptInApply&&!this._optInMediaApproved,d=a?b.OPT_OUT:b.OPT_IN;if(this._status!==d){this._logger.info(c,"Privacy changed from "+this._status+" to "+d),this._status=d;var e=this;setTimeout(function(){try{e._callback&&e._callback(d)}catch(a){}},0)}}},b.OPT_OUT="optout",b.OPT_IN="optin",b.OPT_UNKNOWN="optunknown",a._PrivacyManager=b}(a.ADB.va),function(a,b){"use strict";function c(a){c.__super__.constructor.call(this),this._heartbeat=a}function d(a){d.__super__.constructor.call(this),this._heartbeat=a}function e(a){e.__super__.constructor.call(this),this._heartbeat=a}function f(a){f.__super__.constructor.call(this),this._heartbeat=a}a.extend(c,b.plugins.aa.AdobeAnalyticsPluginDelegate),c.prototype.onError=function(a){this._heartbeat&&this._heartbeat._onDelegateError(a)},a.extend(d,b.plugins.ah.AdobeHeartbeatPluginDelegate),d.prototype.onError=function(a){this._heartbeat&&this._heartbeat._onDelegateError(a)},d.prototype.onTrackingDisabled=function(){this._heartbeat&&this._heartbeat._onDelegateTrackingDisabled()},a.extend(e,b.HeartbeatDelegate),e.prototype.onError=function(a){this._heartbeat&&this._heartbeat._onDelegateError(a)},a.extend(f,b.plugins.videoplayer.VideoPlayerPluginDelegate),f.prototype.getVideoInfo=function(){return this._heartbeat&&this._heartbeat._videoInfo?(this._heartbeat._delegate&&(this._heartbeat._videoInfo.playhead=this._heartbeat._delegate.getCurrentPlaybackTime()),this._heartbeat._videoInfo):null},f.prototype.getAdBreakInfo=function(){return this._heartbeat&&this._heartbeat._adBreakInfo?this._heartbeat._adBreakInfo:null},f.prototype.getAdInfo=function(){return this._heartbeat&&this._heartbeat._adInfo?this._heartbeat._adInfo:null},f.prototype.getChapterInfo=function(){return this._heartbeat&&this._heartbeat._chapterInfo?this._heartbeat._chapterInfo:null},f.prototype.getQoSInfo=function(){if(this._heartbeat&&this._heartbeat._delegate&&this._heartbeat._delegate.getQoSObject()){var a=this._heartbeat._delegate.getQoSObject();if(a&&"object"==typeof a&&a.setValue)return a.createQoSInfo()}return null},b._MediaAnalyticsPluginDelegate=c,b._MediaHeartbeatPluginDelegate=d,b._ADBMediaHeartbeatDelegate=e,b._MediaHeartbeatVideoPlayerPluginDelegate=f}(a.ADB.core,a.ADB.va),function(a,b){"use strict";function c(a,d){c.__super__.constructor.call(this),this._heartbeat=a,this._logger=d,this._validator=new b.plugins.nielsen.MetadataValidator(d)}var d="MediaHeartbeatNielsenPluginDelegate",e={NielsenContentMetadata:"media_nielsen_content_metadata",NielsenChannelMetadata:"media_nielsen_channel_metadata",NielsenAdMetadata:"media_nielsen_ad_metadata"};b.plugins.nielsen&&a.extend(c,b.plugins.nielsen.NielsenPluginDelegate),c.prototype.getMetadataInfo=function(){if(this._heartbeat&&this._heartbeat._currentMediaObject){var a=this._heartbeat._currentMediaObject.getValue(e.NielsenContentMetadata);if(a&&"object"==typeof a)return this._validator.validateContentMetadata(a,"MediaHeartbeat.NielsenContentMetadataKeys"),a;this._logger.warn(d,"We expect a valid object for MediaHeartbeat.MediaObjectKey.NielsenContentMetadata in MediaObject")}return null},c.prototype.getAdMetadataInfo=function(){if(this._heartbeat&&this._heartbeat._currentAdObject){var a=this._heartbeat._currentAdObject.getValue(e.NielsenAdMetadata);if(a&&"object"==typeof a)return this._validator.validateAdMetadata(a,"MediaHeartbeat.NielsenAdMetadataKeys"),a;this._logger.warn(d,"We expect a valid object for MediaHeartbeat.MediaObjectKey.NielsenAdMetadata in MediaObject")}return null},c.prototype.getChannelInfo=function(){if(this._heartbeat&&this._heartbeat._currentMediaObject){var a=this._heartbeat._currentMediaObject.getValue(e.NielsenChannelMetadata);if(a&&"object"==typeof a)return this._validator.validateChannelMetadata(a,"MediaHeartbeat.NielsenChannelMetadataKeys"),a;this._logger.warn(d,"We expect a valid object for MediaHeartbeat.MediaObjectKey.NielsenChannelMetadata in MediaObject")}return null},c.prototype.onError=function(a){this._heartbeat&&this._heartbeat._onDelegateError(a)},b.plugins.nielsen&&(b._NielsenObjectKey=e,b._NielsenPluginDelegate=c)}(a.ADB.core,a.ADB.va),function(b,c){"use strict";function d(){}function e(b,d,e){if(this._appMeasurement=e||a.s,!this._appMeasurement)throw new Error("MediaHeartbeat needs a valid AppMeasurement instance.");if(!this._appMeasurement.visitor||!this._appMeasurement.visitor.marketingCloudOrgID)throw new Error("MediaHeartbeat needs a valid visitor instance with marketingCloudOrgId set.");if(!b)throw new Error("MediaHeartbeat needs a valid delegate object.");if(!d||"object"!=typeof d||!d.trackingServer)throw new Error("MediaHeartbeat needs a valid config object with trackingServer set.");this._config=d,this._delegate=b,this._debugLogging=c.MediaHeartbeat._debugLogging||this._config.debugLogging,this._logger=new f,this._debugLogging?this._logger.enable():this._logger.disable(),this._ruleEngine=new t(this._logger),this._taskScheduler=new u(this._logger),this._privacyManager=new v(this._logger,this._appMeasurement.visitor),this._resetState(),this._setupRules()}var f=b.Logger,g=c.MediaObject,h=c.Heartbeat,i=c.HeartbeatConfig,j=c._ADBMediaHeartbeatDelegate,k=c.plugins.videoplayer.VideoPlayerPlugin,l=c.plugins.videoplayer.VideoPlayerPluginConfig,m=c._MediaHeartbeatVideoPlayerPluginDelegate,n=c.plugins.aa.AdobeAnalyticsPlugin,o=c.plugins.aa.AdobeAnalyticsPluginConfig,p=c._MediaAnalyticsPluginDelegate,q=c.plugins.ah.AdobeHeartbeatPlugin,r=c.plugins.ah.AdobeHeartbeatPluginConfig,s=c._MediaHeartbeatPluginDelegate,t=c._RuleEngine,u=c._TaskScheduler,v=c._PrivacyManager,w=c.utils.ObjectUtils,x=c.utils.VersionUtils;if(d.prototype.getCurrentPlaybackTime=function(){return null},d.prototype.getQoSObject=function(){return null},e.MediaType={Video:"video",Audio:"audio"},e.Event={AdBreakStart:"adBreakStart",AdBreakComplete:"adBreakComplete",AdStart:"adStart",AdComplete:"adComplete",AdSkip:"adSkip",ChapterStart:"chapterStart",ChapterComplete:"chapterComplete",ChapterSkip:"chapterSkip",SeekStart:"seekStart",SeekComplete:"seekComplete",BufferStart:"bufferStart",BufferComplete:"bufferComplete",BitrateChange:"bitrateChange",TimedMetadataUpdate:"timedMetadataUpdate"},e.StreamType={VOD:"vod",LIVE:"live",LINEAR:"linear",PODCAST:"podcast",AUDIOBOOK:"audiobook",AOD:"aod"},e.MediaObjectKey={StandardVideoMetadata:"media_standard_content_metadata",StandardMediaMetadata:"media_standard_content_metadata",StandardAdMetadata:"media_standard_ad_metadata",VideoResumed:"resumed",MediaResumed:"resumed",PrerollTrackingWaitingTime:"preroll_tracking_waiting_time"},e.VideoMetadataKeys=c.plugins.aa.VideoMetadataKeys,e.AudioMetadataKeys=c.plugins.aa.AudioMetadataKeys,e.AdMetadataKeys=c.plugins.aa.AdMetadataKeys,e.createMediaObject=function(a,b,c,d,f){var h=new g;h.setValue(g.MEDIAINFO_KEY_VIDEOID,b),h.setValue(g.MEDIAINFO_KEY_NAME,a),h.setValue(g.MEDIAINFO_KEY_LENGTH,c),h.setValue(g.MEDIAINFO_KEY_PLAYHEAD,0);var i=d||e.StreamType.VOD;return h.setValue(g.MEDIAINFO_KEY_STREAMTYPE,i),("string"!=typeof f||f!=e.MediaType.Video&&f!=e.MediaType.Audio)&&(f=e.MediaType.Video),h.setValue(g.MEDIAINFO_KEY_MEDIATYPE,f),h},e.createAdBreakObject=function(a,b,c){var d=new g;return d.setValue(g.MEDIAINFO_KEY_NAME,a),d.setValue(g.MEDIAINFO_KEY_POSITION,b),d.setValue(g.MEDIAINFO_KEY_STARTTIME,c),d},e.createAdObject=function(a,b,c,d){var e=new g;return e.setValue(g.MEDIAINFO_KEY_NAME,a),e.setValue(g.MEDIAINFO_KEY_ADID,b),e.setValue(g.MEDIAINFO_KEY_POSITION,c),e.setValue(g.MEDIAINFO_KEY_LENGTH,d),e},e.createChapterObject=function(a,b,c,d){var e=new g;return e.setValue(g.MEDIAINFO_KEY_NAME,a),e.setValue(g.MEDIAINFO_KEY_POSITION,b),e.setValue(g.MEDIAINFO_KEY_LENGTH,c),e.setValue(g.MEDIAINFO_KEY_STARTTIME,d),e},e.createQoSObject=function(a,b,c,d){var e=new g;return e.setValue(g.MEDIAINFO_KEY_BITRATE,a),e.setValue(g.MEDIAINFO_KEY_FPS,c),e.setValue(g.MEDIAINFO_KEY_DROPPEDFRAMES,d),e.setValue(g.MEDIAINFO_KEY_STARTUPTIME,b),e},e.createTimedMetadataObject=function(a){var b=new g;return b.setValue(g.MEDIAINFO_KEY_TIMEDMETADATA,a),b},e.version=function(){return c.Version.getVersion()},e.prototype.trackSessionStart=function(a,b){this._logger.info(D,"#::trackSessionStart()");var c=t.createContext();c.setData(E,a),c.setData(J,this._cleanContextData(b)),this._processRule(B.SessionStart,c)},e.prototype.trackPlay=function(){this._logger.info(D,"#::trackPlay()"),this._processRule(B.Play)},e.prototype.trackPause=function(){this._logger.info(D,"#::trackPause()"),this._processRule(B.Pause)},e.prototype.trackComplete=function(){this._logger.info(D,"#::trackComplete()"),this._processRule(B.VideoComplete)},e.prototype.trackSessionEnd=function(){this._logger.info(D,"#::trackSessionEnd()"),this._processRule(B.SessionEnd)},e.prototype.trackError=function(a){this._logger.info(D,"#::trackError()");var b=t.createContext();b.setData(K,a),this._processRule(B.Error,b)},e.prototype.trackEvent=function(a,b,c){this._logger.info(D,"#::trackEvent() - "+a);var d,f=t.createContext();switch(a){case e.Event.AdBreakStart:f.setData(F,b),f.setData(J,this._cleanContextData(c)),d=B.AdBreakStart;break;case e.Event.AdBreakComplete:d=B.AdBreakComplete;break;case e.Event.AdStart:f.setData(G,b),f.setData(J,this._cleanContextData(c)),d=B.AdStart;break;case e.Event.AdComplete:d=B.AdComplete;break;case e.Event.AdSkip:d=B.AdSkip;break;case e.Event.SeekStart:d=B.SeekStart;break;case e.Event.SeekComplete:d=B.SeekComplete;break;case e.Event.ChapterStart:f.setData(H,b),f.setData(J,this._cleanContextData(c)),d=B.ChapterStart;break;case e.Event.ChapterComplete:d=B.ChapterComplete;break;case e.Event.ChapterSkip:d=B.ChapterSkip;break;case e.Event.BufferStart:d=B.BufferStart;break;case e.Event.BufferComplete:d=B.BufferComplete;break;case e.Event.BitrateChange:d=B.BitrateChange;break;case e.Event.TimedMetadataUpdate:d=B.TimedMetadataUpdate,f.setData(I,b);break;default:return void this._logger.error(D,"Incorrect event name.")}this._processRule(d,f)},c.plugins.nielsen){var y=c.MediaHeartbeatConfig;y.prototype.nielsenConfigKey=void 0,y.prototype.nielsenAppInfo=void 0;var z=c._NielsenObjectKey;e.MediaObjectKey.NielsenContentMetadata=z.NielsenContentMetadata,e.MediaObjectKey.NielsenAdMetadata=z.NielsenAdMetadata,e.MediaObjectKey.NielsenChannelMetadata=z.NielsenChannelMetadata,e.NielsenContentMetadataKeys=c.plugins.nielsen.ContentMetadataKeys,e.NielsenChannelMetadataKeys=c.plugins.nielsen.ChannelMetadataKeys,e.NielsenAdMetadataKeys=c.plugins.nielsen.AdMetadataKeys,e.prototype.nielsenLoadMetadata=function(a){this._nielsenPlugin&&this._nielsenPlugin.loadMetadata(a)}}e.prototype._setState=function(a,b){this._mediaState[a]=b},e.prototype._isInState=function(a){return this._mediaState[a]},e.prototype._isTrackingDisabled=function(a){return this._mediaHeartbeatDisabled},e.prototype._isInSession=function(a){return this._isInState(A.Session)},e.prototype._isInMedia=function(a){return this._isInState(A.Media)},e.prototype._isInAd=function(a){return this._isInState(A.Ad)},e.prototype._isInAdBreak=function(a){return this._isInState(A.AdBreak)},e.prototype._isInChapter=function(a){return this._isInState(A.Chapter)},e.prototype._isInPlay=function(a){return this._isInState(A.PlayPause)},e.prototype._isInPause=function(a){return!this._isInState(A.PlayPause)},e.prototype._isInBuffer=function(a){return this._isInState(A.Buffer)},e.prototype._isInSeek=function(a){return this._isInState(A.Seek)},e.prototype._isPlatformTrackingSupported=function(a){return!this._appMeasurement.unsupportedBrowser},e.prototype._isAudioTrackingSupported=function(a){return a.getData(E).getValue(g.MEDIAINFO_KEY_MEDIATYPE)!==e.MediaType.Audio||x.isGreaterThanEqual(this._appMeasurement.version,"2.11.0")},e.prototype._isValidMediaObject=function(a){var b=a.getData(E);if(b&&b instanceof g){var c=b.getValue(e.MediaObjectKey.MediaResumed);null!=c&&"boolean"!=typeof c&&this._logger.warn(D,"Ignoring value set for MediaHeartbeat.MediaObjectKey.MediaResumed in MediaObject as we expect a boolean value");var d=b.getValue(e.MediaObjectKey.PrerollTrackingWaitingTime);if(null!=d){("string"==typeof d||"number"==typeof d)&&!isNaN(d)||this._logger.warn(D,"Ignoring value set for MediaHeartbeat.MediaObjectKey.PrerollTrackingWaitingTime in MediaObject as we expect a valid duration as number in milliseconds.")}var f=b.getValue(e.MediaObjectKey.StandardMediaMetadata);return null!=f&&"object"!=typeof f&&this._logger.warn(D,"Ignoring value set for MediaHeartbeat.MediaObjectKey.StandardMediaMetadata in MediaObject as we expect a valid object with kv pairs."),!0}return!1},e.prototype._isValidAdBreakObject=function(a){var b=a.getData(F);return b&&b instanceof g},e.prototype._isDifferentAdBreakObject=function(a){var b=a.getData(F);return!(this._currentAdBreakObject&&this._currentAdBreakObject.isEqual(b))},e.prototype._isValidAdObject=function(a){var b=a.getData(G);if(b&&b instanceof g){var c=b.getValue(N);null!=c&&"boolean"!=typeof c&&this._logger.warn(D,"Ignoring value set for MediaHeartbeat.MediaObjectKey.GranularAdTracking in AdObject as we expect a boolean value.");var d=b.getValue(e.MediaObjectKey.StandardAdMetadata);return null!=d&&"object"!=typeof d&&this._logger.warn(D,"Ignoring value set for MediaHeartbeat.MediaObjectKey.StandardAdMetadata in AdObject as we expect a valid object with kv pairs."),!0}return!1},e.prototype._isDifferentAdObject=function(a){var b=a.getData(G);return!(this._currentAdObject&&this._currentAdObject.isEqual(b))},e.prototype._isValidChapterObject=function(a){var b=a.getData(H);return b&&b instanceof g},e.prototype._isDifferentChapterObject=function(a){var b=a.getData(H);return!(this._currentChapterObject&&this._currentChapterObject.isEqual(b))},e.prototype._isValidTimedMetadataObject=function(a){var b=a.getData(I);if(b&&b instanceof g){var c=b.getValue(g.MEDIAINFO_KEY_TIMEDMETADATA);return c&&"string"==typeof c}return!1},e.prototype._shouldAllowPlayerStateChange=function(a){return!(this._isInState(A.AdBreak)&&!this._isInState(A.Ad))},e.prototype._didBeginReporting=function(a){return this._isInState(A.Reporting)},e.prototype._deferredTrackPlay=function(){this._prerollWaitEnabled&&(this._logger.info(D,"Executing deferred API:trackPlay."),this._prerollWaitEnabled=!1,this._playTaskHandle=null,this._processRule(B.Play))},e.prototype._cmdEnterAction=function(a){var b=a.getRuleName();if(this._prerollWaitEnabled)if(this._playReceived)switch(b){case B.SeekStart:case B.BufferStart:this._logger.info(D,"Cancelling scheduled API:trackPlay because of SeekStart/BufferStart event"),this._taskScheduler.cancelTask(this._playTaskHandle),this._playTaskHandle=null;break;case B.SeekComplete:case B.BufferComplete:this._logger.info(D,"Rescheduled API:trackPlay after SeekComplete/BufferComplete event"),this._playTaskHandle=this._taskScheduler.scheduleTask(this._deferredTrackPlay,this,this._prerollWaitTime);break;case B.Play:this._logger.info(D,"Dropping API:trackPlay as we already have a API:trackPlay scheduled."),a.stopProcessingAction();break;case B.Pause:this._logger.info(D,"Cancelling scheduled API:trackPlay because of API:trackPause call."),this._taskScheduler.cancelTask(this._playTaskHandle),this._playTaskHandle=null,this._prerollWaitEnabled=!1;break;case B.AdBreakStart:this._logger.info(D,"Received API:trackEvent(AdBreakStart) within "+this._prerollWaitTime+" ms after API:trackPlay. We will track this as preroll AdBreak."),this._taskScheduler.cancelTask(this._playTaskHandle),this._playTaskHandle=null,this._prerollWaitEnabled=!1,this._playAfterAdStart=!0}else switch(b){case B.Play:this._logger.info(D,"Deferring API:trackPlay for "+this._prerollWaitTime+" ms."),this._playReceived=!0,this._playUnhandledFromPrerollWaitTime=!0,this._playTaskHandle=this._taskScheduler.scheduleTask(this._deferredTrackPlay,this,this._prerollWaitTime),a.stopProcessingAction();break;case B.Pause:this._logger.info(D,"Received trackPause before first trackPlay."),this._prerollWaitEnabled=!1;break;case B.AdBreakStart:this._logger.info(D,"Received trackEvent(AdBreakStart) before first trackPlay."),this._prerollWaitEnabled=!1}},e.prototype._cmdExitAction=function(a){var b=a.getRuleName();this._playAfterAdStart&&(b===B.AdStart?(this._cmdPlay(a),this._playAfterAdStart=!1):b===B.AdBreakComplete&&(this._playAfterAdStart=!1)),b!==B.AdStart||this._isInState(A.FPlayPause)||this._cmdPlay(a),this._prerollWaitEnabled||!this._playUnhandledFromPrerollWaitTime||b!==B.BufferComplete&&b!==B.SeekComplete&&b!==B.AdBreakComplete||this._isInState(A.FPlayPause)||this._isInState(A.Buffer)||this._isInState(A.Seek)||(this._logger.info(D,"Executing pending API:trackPlay. This case most likely happens tracking Preroll AdBreak without any Ads."),this._cmdPlay(a))},e.prototype._cmdConfigure=function(a){this._configureAdobeAnalyticsPlugin(),this._configureAdobeHearbeatPlugin(),this._configureVideoPlayerPlugin(),this._configureOtherPlugins(),this._configureHeartbeat(),this._privacyManager.configure(this._onPrivacyChange.bind(this))},e.prototype._cmdBeginReporting=function(a){this._playerPlugin&&this._playerPlugin.beginReporting(),this._setState(A.Reporting,!0)},e.prototype._cmdSessionStart=function(a){var b=a.getData(E),c=a.getData(J);this._currentMediaObject=b,this._videoInfo=b.createVideoInfo(),this._videoInfo.playerName=this._config.playerName?this._config.playerName:"";var d=b.getValue(e.MediaObjectKey.StandardMediaMetadata);d&&"object"==typeof d||(d=null);var f=b.getValue(e.MediaObjectKey.MediaResumed);"boolean"==typeof f&&(this._videoInfo.resumed=f);var g=b.getValue(e.MediaObjectKey.PrerollTrackingWaitingTime);"string"!=typeof g&&"number"!=typeof g||isNaN(g)||(this._prerollWaitTime=Number(g),this._prerollWaitTime<=0&&(this._prerollWaitEnabled=!1));var h=this._prepareMetadata(d,c);h[L]=this._videoInfo.mediaType,this._aaPlugin.setVideoMetadata(h),this._playerPlugin.trackVideoLoad(),this._playerPlugin.trackSessionStart(),this._setState(A.Session,!0),this._setState(A.Media,!0)},e.prototype._destroyHeartbeat=function(a,b){a&&a.trackVideoUnload(),b&&b.destroy()},e.prototype._cmdVideoEnd=function(a){var b=a.getRuleName()===B.VideoComplete;if(this._isInState(A.Reporting)){var c=this,d=this._heartbeat,e=this._playerPlugin;this._playerPlugin.trackComplete(function(){c._destroyHeartbeat(e,d)},b)}else this._destroyHeartbeat(this._playerPlugin,this._heartbeat);this._setState(A.Media,!1)},e.prototype._cmdHandleMediaComplete=function(a){this._isInMedia(a)||(this._logger.info(D,"API:trackComplete has already cleaned up Heartbeat instance."),this._cmdSessionEnd(a),a.stopProcessingAction())},e.prototype._cmdSessionEnd=function(a){this._setState(A.Session,!1),this._resetState()},e.prototype._cmdDisableTracking=function(a){this._logger.info(D,"#_cmdDisableTracking: ADBMediaHeartbeat Tracking Disabled Remotely."),this._mediaHeartbeatDisabled=!0},e.prototype._cmdBufferStart=function(a){this._playerPlugin.trackBufferStart(),this._setState(A.Buffer,!0)},e.prototype._cmdBufferComplete=function(a){this._isInState(A.Buffer)&&this._playerPlugin.trackBufferComplete(),this._setState(A.Buffer,!1)},e.prototype._cmdSeekStart=function(a){this._playerPlugin.trackSeekStart(),this._setState(A.Seek,!0)},e.prototype._cmdSeekComplete=function(a){this._isInState(A.Seek)&&this._playerPlugin.trackSeekComplete(),this._setState(A.Seek,!1)},e.prototype._cmdPlay=function(a){this._playerPlugin.trackPlay(),this._setState(A.PlayPause,!0),this._setState(A.FPlayPause,!0),this._playUnhandledFromPrerollWaitTime=!1},e.prototype._cmdPause=function(a){this._playerPlugin.trackPause(),this._setState(A.PlayPause,!1),this._setState(A.FPlayPause,!0)},e.prototype._cmdAdBreakStart=function(a){var b=a.getData(F);this._currentAdBreakObject=b,this._adBreakInfo=b.createAdBreakInfo(),this._adBreakInfo.playerName=this._config.playerName?this._config.playerName:"",this._playerPlugin.trackAdBreakStart(),this._setState(A.AdBreak,!0)},e.prototype._cmdAdBreakComplete=function(a){this._currentAdBreakObject=null,this._adBreakInfo=null,this._isInState(A.AdBreak)&&this._playerPlugin.trackAdBreakComplete(),this._setState(A.AdBreak,!1)},e.prototype._cmdAdStart=function(a){var b=a.getData(G),c=a.getData(J);this._currentAdObject=b,this._adInfo=b.createAdInfo();var d=b.getValue(N);"boolean"==typeof d&&(this._adInfo.granularTracking=d);var f=b.getValue(e.MediaObjectKey.StandardAdMetadata);f&&"object"==typeof f||(f=null);var g=this._prepareMetadata(f,c);this._aaPlugin.setAdMetadata(g),this._playerPlugin.trackAdStart(),this._setState(A.Ad,!0)},e.prototype._cmdAdComplete=function(a){this._currentAdObject=null,this._adInfo=null,this._isInState(A.Ad)&&this._playerPlugin.trackAdComplete(),this._setState(A.Ad,!1)},e.prototype._cmdAdSkip=function(a){this._currentAdObject=null,this._adInfo=null,this._isInState(A.Ad)&&this._playerPlugin.trackAdSkip(),this._setState(A.Ad,!1)},e.prototype._cmdChapterStart=function(a){var b=a.getData(H),c=a.getData(J);this._currentChapterObject=b,this._chapterInfo=b.createChapterInfo();var d=this._prepareMetadata(null,c);this._aaPlugin.setChapterMetadata(d),this._playerPlugin.trackChapterStart(),this._setState(A.Chapter,!0)},e.prototype._cmdChapterComplete=function(a){this._currentChapterObject=null,this._chapterInfo=null,this._isInState(A.Chapter)&&this._playerPlugin.trackChapterComplete(),this._setState(A.Chapter,!1)},e.prototype._cmdChapterSkip=function(a){this._currentChapterObject=null,this._chapterInfo=null,this._isInState(A.Chapter)&&this._playerPlugin.trackChapterSkip(),this._setState(A.Chapter,!1)},e.prototype._cmdError=function(a){var b=a.getData(K);b||(b="unknown_error_id"),this._playerPlugin.trackVideoPlayerError(b)},e.prototype._cmdBitrate=function(a){this._playerPlugin.trackBitrateChange()},e.prototype._cmdTimedMetadataUpdate=function(a){var b=a.getData(I),c=b.getValue(g.MEDIAINFO_KEY_TIMEDMETADATA);this._playerPlugin.trackTimedMetadata(c)},e.prototype._processRule=function(a,b){return this._ruleEngine.processRule(a,b)},e.prototype._setupRules=function(){this._ruleEngine.registerEnterExitAction(this._cmdEnterAction,this._cmdExitAction),this._ruleEngine.registerRule(B.SessionStart,"API:trackSessionStart",[t.createPredicate(this._isPlatformTrackingSupported,!0,C.ErrUnSupportedPlatform),t.createPredicate(this._isTrackingDisabled,!1,C.ErrTrackingDisabled),t.createPredicate(this._isInSession,!1,C.ErrInSession),t.createPredicate(this._isValidMediaObject,!0,C.ErrInvalidMediaObject),t.createPredicate(this._isAudioTrackingSupported,!0,C.ErrAudioTrackingNotSupported)],[this._cmdConfigure,this._cmdSessionStart],this),this._ruleEngine.registerRule(B.SessionEnd,"API:trackSessionEnd",[t.createPredicate(this._isInSession,!0,C.ErrNotInSession)],[this._cmdHandleMediaComplete,this._cmdAdSkip,this._cmdAdBreakComplete,this._cmdChapterSkip,this._cmdVideoEnd,this._cmdSessionEnd],this),this._ruleEngine.registerRule(B.VideoComplete,"API:trackComplete",[t.createPredicate(this._isInSession,!0,C.ErrNotInSession),t.createPredicate(this._isInMedia,!0,C.ErrNotInMedia)],[this._cmdAdSkip,this._cmdAdBreakComplete,this._cmdChapterSkip,this._cmdVideoEnd],this),this._ruleEngine.registerRule(B.Error,"API:trackError",[t.createPredicate(this._isInSession,!0,C.ErrNotInSession),t.createPredicate(this._isInMedia,!0,C.ErrNotInMedia)],[this._cmdError],this),this._ruleEngine.registerRule(B.Play,"API:trackPlay",[t.createPredicate(this._isInSession,!0,C.ErrNotInSession),t.createPredicate(this._isInMedia,!0,C.ErrNotInMedia),t.createPredicate(this._shouldAllowPlayerStateChange,!0,C.ErrInvalidPlayerState)],[this._cmdSeekComplete,this._cmdBufferComplete,this._cmdPlay],this),this._ruleEngine.registerRule(B.Pause,"API:trackPause",[t.createPredicate(this._isInSession,!0,C.ErrNotInSession),t.createPredicate(this._isInMedia,!0,C.ErrNotInMedia),t.createPredicate(this._shouldAllowPlayerStateChange,!0,C.ErrInvalidPlayerState),t.createPredicate(this._isInBuffer,!1,C.ErrInBuffer),t.createPredicate(this._isInSeek,!1,C.ErrInSeek)],[this._cmdPause],this),this._ruleEngine.registerRule(B.BufferStart,"API:trackEvent(BufferStart)",[t.createPredicate(this._isInSession,!0,C.ErrNotInSession),t.createPredicate(this._isInMedia,!0,C.ErrNotInMedia),t.createPredicate(this._shouldAllowPlayerStateChange,!0,C.ErrInvalidPlayerState),t.createPredicate(this._isInBuffer,!1,C.ErrInBuffer),t.createPredicate(this._isInSeek,!1,C.ErrInSeek)],[this._cmdBufferStart],this),this._ruleEngine.registerRule(B.BufferComplete,"API:trackEvent(BufferComplete)",[t.createPredicate(this._isInSession,!0,C.ErrNotInSession),t.createPredicate(this._isInMedia,!0,C.ErrNotInMedia),t.createPredicate(this._shouldAllowPlayerStateChange,!0,C.ErrInvalidPlayerState),t.createPredicate(this._isInBuffer,!0,C.ErrNotInBuffer)],[this._cmdBufferComplete],this),this._ruleEngine.registerRule(B.SeekStart,"API:trackEvent(SeekStart)",[t.createPredicate(this._isInSession,!0,C.ErrNotInSession),t.createPredicate(this._isInMedia,!0,C.ErrNotInMedia),t.createPredicate(this._shouldAllowPlayerStateChange,!0,C.ErrInvalidPlayerState),t.createPredicate(this._isInSeek,!1,C.ErrInSeek),t.createPredicate(this._isInBuffer,!1,C.ErrInBuffer)],[this._cmdSeekStart],this),this._ruleEngine.registerRule(B.SeekComplete,"API:trackEvent(SeekComplete)",[t.createPredicate(this._isInSession,!0,C.ErrNotInSession),t.createPredicate(this._isInMedia,!0,C.ErrNotInMedia),t.createPredicate(this._shouldAllowPlayerStateChange,!0,C.ErrInvalidPlayerState),t.createPredicate(this._isInSeek,!0,C.ErrNotInSeek)],[this._cmdSeekComplete],this),this._ruleEngine.registerRule(B.AdBreakStart,"API:trackEvent(AdBreakStart)",[t.createPredicate(this._isInSession,!0,C.ErrNotInSession),t.createPredicate(this._isInMedia,!0,C.ErrNotInMedia),t.createPredicate(this._isValidAdBreakObject,!0,C.ErrInvalidAdBreakObject),t.createPredicate(this._isDifferentAdBreakObject,!0,C.ErrDuplicateAdBreakObject)],[this._cmdAdSkip,this._cmdAdBreakComplete,this._cmdAdBreakStart],this),this._ruleEngine.registerRule(B.AdBreakComplete,"API:trackEvent(AdBreakComplete)",[t.createPredicate(this._isInSession,!0,C.ErrNotInSession),t.createPredicate(this._isInMedia,!0,C.ErrNotInMedia),t.createPredicate(this._isInAdBreak,!0,C.ErrNotInAdBreak)],[this._cmdAdSkip,this._cmdAdBreakComplete],this),this._ruleEngine.registerRule(B.AdStart,"API:trackEvent(AdStart)",[t.createPredicate(this._isInSession,!0,C.ErrNotInSession),t.createPredicate(this._isInMedia,!0,C.ErrNotInMedia),t.createPredicate(this._isInAdBreak,!0,C.ErrNotInAdBreak),t.createPredicate(this._isValidAdObject,!0,C.ErrInvalidAdObject),t.createPredicate(this._isDifferentAdObject,!0,C.ErrDuplicateAdObject)],[this._cmdAdSkip,this._cmdAdStart],this),this._ruleEngine.registerRule(B.AdComplete,"API:trackEvent(AdComplete)",[t.createPredicate(this._isInSession,!0,C.ErrNotInSession),t.createPredicate(this._isInMedia,!0,C.ErrNotInMedia),t.createPredicate(this._isInAdBreak,!0,C.ErrNotInAdBreak),t.createPredicate(this._isInAd,!0,C.ErrNotInAd)],[this._cmdAdComplete],this),this._ruleEngine.registerRule(B.AdSkip,"API:trackEvent(AdSkip)",[t.createPredicate(this._isInSession,!0,C.ErrNotInSession),t.createPredicate(this._isInMedia,!0,C.ErrNotInMedia),t.createPredicate(this._isInAdBreak,!0,C.ErrNotInAdBreak),t.createPredicate(this._isInAd,!0,C.ErrNotInAd)],[this._cmdAdSkip],this),this._ruleEngine.registerRule(B.ChapterStart,"API:trackEvent(ChapterStart)",[t.createPredicate(this._isInSession,!0,C.ErrNotInSession),t.createPredicate(this._isInMedia,!0,C.ErrNotInMedia),t.createPredicate(this._isValidChapterObject,!0,C.ErrInvalidChapterObject),t.createPredicate(this._isDifferentChapterObject,!0,C.ErrDuplicateChapterObject)],[this._cmdChapterSkip,this._cmdChapterStart],this),this._ruleEngine.registerRule(B.ChapterComplete,"API:trackEvent(ChapterComplete)",[t.createPredicate(this._isInSession,!0,C.ErrNotInSession),t.createPredicate(this._isInMedia,!0,C.ErrNotInMedia),t.createPredicate(this._isInChapter,!0,C.ErrNotInChapter)],[this._cmdChapterComplete],this),this._ruleEngine.registerRule(B.ChapterSkip,"API:trackEvent(ChapterSkip)",[t.createPredicate(this._isInSession,!0,C.ErrNotInSession),t.createPredicate(this._isInMedia,!0,C.ErrNotInMedia),t.createPredicate(this._isInChapter,!0,C.ErrNotInChapter)],[this._cmdChapterSkip],this),this._ruleEngine.registerRule(B.BitrateChange,"API:trackEvent(BitrateChange)",[t.createPredicate(this._isInSession,!0,C.ErrNotInSession),t.createPredicate(this._isInMedia,!0,C.ErrNotInMedia)],[this._cmdBitrate],this),this._ruleEngine.registerRule(B.TimedMetadataUpdate,"API:trackEvent(TimedMetadataUpdate)",[t.createPredicate(this._isInSession,!0,C.ErrNotInSession),t.createPredicate(this._isInMedia,!0,C.ErrNotInMedia),t.createPredicate(this._isValidTimedMetadataObject,!0,C.ErrInvalidTimedMetadataObject)],[this._cmdTimedMetadataUpdate],this),this._ruleEngine.registerRule(B.DisableTracking,"Internal::DisableTracking",[t.createPredicate(this._isTrackingDisabled,!1,C.ErrTrackingDisabled)],[this._cmdDisableTracking],this),this._ruleEngine.registerRule(B.BeginReporting,"Internal::BeginReporting",[t.createPredicate(this._isInSession,!0,C.ErrNotInSession),t.createPredicate(this._isInMedia,!0,C.ErrNotInMedia),t.createPredicate(this._didBeginReporting,!1,C.ErrBeginReporting)],[this._cmdBeginReporting],this)},e.prototype._configureAdobeAnalyticsPlugin=function(){this._aaPlugin=new n(this._appMeasurement,new p(this));var a=new o;a.channel=this._config.channel?this._config.channel:"",a.debugLogging=c.MediaHeartbeat._debugLogging||this._config.debugLogging,this._aaPlugin.configure(a),this._plugins.push(this._aaPlugin)},e.prototype._configureAdobeHearbeatPlugin=function(){var a=this._appMeasurement.visitor?this._appMeasurement.visitor.marketingCloudOrgID:"";this._ahPlugin=new q(new s(this));var b=new r(this._config.trackingServer,a);b.debugLogging=c.MediaHeartbeat._debugLogging||this._config.debugLogging,b.ovp=this._config.ovp?this._config.ovp:"",b.ssl=this._config.ssl,b.sdk=this._config.appVersion?this._config.appVersion:"";var d=this._primetimeTVSDKVersion();d&&d.length>0&&(b.__primetime=!0,b.__psdkVersion=d),this._ahPlugin.configure(b),this._plugins.push(this._ahPlugin)},e.prototype._configureVideoPlayerPlugin=function(){this._playerPlugin=new k(new m(this));var a=new l;a.debugLogging=c.MediaHeartbeat._debugLogging||this._config.debugLogging,this._playerPlugin.configure(a),this._plugins.push(this._playerPlugin)},e.prototype._configureOtherPlugins=function(){if(c.plugins.nielsen&&this._config.nielsenConfigKey&&this._config.nielsenAppInfo){this._nielsenPlugin=new c.plugins.nielsen.NielsenPlugin(new c._NielsenPluginDelegate(this,this._logger));var a=new c.plugins.nielsen.NielsenPluginConfig;a.debugLogging=c.MediaHeartbeat._debugLogging||this._config.debugLogging,a.appInfo=this._config.nielsenAppInfo,a.configKey=this._config.nielsenConfigKey,this._nielsenPlugin.configure(a),this._plugins.push(this._nielsenPlugin)}},e.prototype._configureHeartbeat=function(){var a=new i;a.debugLogging=c.MediaHeartbeat._debugLogging||this._config.debugLogging,this._heartbeat=new h(new j(this),this._plugins),this._heartbeat.configure(a)},e.prototype._resetState=function(){this._taskScheduler.clearTasks(),this._privacyManager.reset(),this._mediaState={},this._plugins=[],this._playerPlugin=null,this._aaPlugin=null,this._ahPlugin=null,this._nielsenPlugin=null,this._heartbeat=null,this._currentMediaObject=null,this._currentAdBreakObject=null,this._currentAdObject=null,this._currentChapterObject=null,this._videoInfo=null,this._adBreakInfo=null,this._adInfo=null,this._chapterInfo=null,this._prerollWaitEnabled=!0,this._prerollWaitTime=O,this._playReceived=!1,this._playUnhandledFromPrerollWaitTime=!1,this._playTaskHandle=null,this._playAfterAdStart=!1},e.prototype._primetimeTVSDKVersion=function(){return this._currentMediaObject?this._currentMediaObject.getValue(M):null},e.prototype._cleanContextData=function(a){if(null==a||"object"!=typeof a)return null;var b={};for(var c in a)if(a.hasOwnProperty(c)){var d=a[c];"number"!=typeof d&&"string"!=typeof d&&"boolean"!=typeof d||(b[c]=d)}return b},e.prototype._prepareMetadata=function(a,b){var c={};if(b&&w.append(c,b),a){var d=this._cleanContextData(a);w.append(c,d)}return delete c[L],c},e.prototype._onDelegateError=function(a){this._logger.error(D,a.getMessage()+" | "+a.getDetails())},e.prototype._onDelegateTrackingDisabled=function(){this._processRule(B.SessionEnd),this._processRule(B.DisableTracking)},e.prototype._onPrivacyChange=function(a){this._logger.info(D,"#_onPrivacyChange: Privacy Status: "+a),a===v.OPT_IN?this._processRule(B.BeginReporting):a===v.OPT_OUT&&this._processRule(B.SessionEnd)};var A={Session:0,Media:1,AdBreak:2,Ad:3,Chapter:4,PlayPause:5,Buffer:6,Seek:7,FPlayPause:8,Reporting:9},B={SessionStart:0,SessionEnd:1,VideoComplete:2,Play:3,Pause:4,Error:5,AdBreakStart:6,AdBreakComplete:7,AdStart:8,AdComplete:9,AdSkip:10,ChapterStart:11,ChapterComplete:12,ChapterSkip:13,SeekStart:14,SeekComplete:15,BufferStart:16,BufferComplete:17,BitrateChange:18,TimedMetadataUpdate:19,DisableTracking:20,BeginReporting:21},C={ErrUnSupportedPlatform:"MediaHeartbeat does not support tracking due to AppMeasurement or VisitorAPI not supporting the browser.",ErrNotInSession:\'MediaHeartbeat is not in active tracking session, call "API:trackSessionStart" to begin a new tracking session.\',ErrInSession:\'MediaHeartbeat is in active tracking session, call "API:trackSessionEnd" to end current tracking session.\',ErrNotInMedia:\'MediaHeartbeat has completed tracking session, call "API:trackSessionEnd" first to end current session and then begin a new tracking session.\',ErrInBuffer:\'MediaHeartbeat is tracking buffer events, call "API:trackEvent(BufferComplete)" first to stop tracking buffer events.\',ErrNotInBuffer:\'MediaHeartbeat is not tracking buffer events, call "API:trackEvent(BufferStart)" before "API:trackEvent(BufferComplete)".\',ErrInSeek:\'MediaHeartbeat is tracking seek events, call "API:trackEvent(SeekComplete)" first to stop tracking seek events.\',ErrNotInSeek:\'MediaHeartbeat is not tracking seek events, call "API:trackEvent(SeekStart)" before "API:trackEvent(SeekComplete)".\',ErrNotInAdBreak:\'MediaHeartbeat is not tracking any AdBreak, call "API:trackEvent(AdBreakStart)" to begin tracking AdBreak\',ErrNotInAd:\'MediaHeartbeat is not tracking any Ad, call "API:trackEvent(AdStart)" to begin tracking Ad\',ErrNotInChapter:\'MediaHeartbeat is not tracking any Chapter, call "API:trackEvent(ChapterStart)" to begin tracking Chapter\',ErrInvalidMediaObject:\'MediaInfo passed into "API:trackSessionStart" is invalid.\',ErrInvalidAdBreakObject:\'AdBreakInfo passed into "API:trackEvent(AdBreakStart)" is invalid.\',ErrDuplicateAdBreakObject:\'MediaHeartbeat is currently tracking the AdBreak passed into "API:trackEvent(AdBreakStart)".\',ErrInvalidAdObject:\'AdInfo passed into "API:trackEvent(AdStart)" is invalid.\',ErrDuplicateAdObject:\'MediaHeartbeat is currently tracking the Ad passed into "API:trackEvent(AdStart)".\',ErrInvalidChapterObject:\'ChapterInfo passed into "API:trackEvent(ChapterStart)" is invalid.\',ErrDuplicateChapterObject:\'MediaHeartbeat is currently tracking the Chapter passed into "API:trackEvent(ChapterStart)".\',ErrInvalidTimedMetadataObject:\'TimedMetadata passed into "API:trackEvent(TimedMetadataUpdate)" is invalid.\',ErrInvalidPlayerState:"MediaHeartbeat is tracking an AdBreak but not tracking any Ad and will drop any calls to track player state (Play, Pause, Buffer or Seek) in this state.",ErrAudioTrackingNotSupported:"Upgrade your AppMeasurement library to version >= \'2.11.0\' to support tracking audio content.",ErrTrackingDisabled:"MediaHeartbeat tracking is disabled for this publisher. Please contact Adobe Representative to enable tracking.",ErrBeginReporting:"MediaHeartbeat has already started reporting."},D="MediaHeartbeat",E="key_media_object",F="key_adbreak_object",G="key_ad_object",H="key_chapter_object",I="key_timed_metadata_object",J="key_custom_metadata",K="key_error_id",L="a.media.streamType",M="a.__pttvsdkVersion",N="granular_ad_tracking",O=250;c._MediaHeartbeatRule=B,c._MediaHeartbeatErrorMessage=C,c.MediaHeartbeatDelegate=d,c.MediaHeartbeat=e,c.MediaHeartbeat._debugLogging=!1}(a.ADB.core,a.ADB.va),a.ADB||(a.ADB={}),a.ADB.core||(a.ADB.core=core),a.ADB.va||(a.ADB.va=va),a.ADB.va.plugins||(a.ADB.va.plugins={})}(this);\n  \n    }).call(lib);\n    exports.va = lib.ADB.va;\n    exports.core = lib.ADB.core;\n  }));\n  \n  window.PubSub.subscribe("Player_Ready", function(data) {\n      var w = window,\n          s = w.tdi_s || w.s || {},\n          visitor = Visitor.getInstance("7FF852E2556756057F000101@AdobeOrg"),\n          tdi = w.tdi = w.tdi || {},\n          tC = w.tdi.configuration = w.tdi.configuration || {},\n          tCA = w.tdi.configuration.adobeAnalytics = w.tdi.configuration.adobeAnalytics || {},\n          tCM = w.tdi.configuration.media = w.tdi.configuration.media || {},\n          rsid = data.rsid || data.gamersid || (tCA.isProd ? tCA.rsidPROD : tCA.rsidDEV) || s.account,\n          spcLstPub = (((window.tdi || {}).configuration || {}).launch || {}).spaceLastPublished || "";\n  \n      tCM.logger = function(msg) {\n          try {\n              if (typeof window.console !== "undefined" && typeof console.info === \'function\' && window.localStorage && localStorage.debugMediaFlag === "true") {\n                  console.info(\'MediaTrack: \' + msg);\n              }\n          } catch(e) {}\n      };\n      tCM.logger(\'Logger Ready\');\n  \n      tCM.resetOpData = function() {\n          var o = tdi.configuration.media.opData || {};\n          if (!o.interval_id) {\n              tdi.configuration.media.opData = {\n                  \'totalPlayTime\': 0,\n                  \'interval_id\': 0,\n                  \'ready\': false\n              };\n          }\n      };\n      tCM.logger(\'Start | Force Data to Lower\');\n  \n      for (var i in data) {\n          if (data.hasOwnProperty(i) && (typeof data[i] === \'string\' || typeof data[i] === \'number\' || typeof data[i] === \'boolean\')) {\n              data[i] = typeof data[i] === \'string\' ? data[i].toLowerCase() : data[i];\n          }\n      }\n      tCM.logger(\'End | Force Data to Lower\');\n  \n      tCM.resetOpData();\n      tCM.logger(\'OpData Setup\');\n  \n      tCM.setTime = function() {\n          var tCM = tdi.configuration.media;\n          tCM.opData.totalPlayTime = tCM.opData.totalPlayTime + 1;\n      };\n  \n      tCM.startTimer = function() {\n          var tCM = tdi.configuration.media;\n          clearInterval(tdi.configuration.media.opData.interval_id);\n          tCM.opData.totalPlayTime = 0;\n          tCM.opData.interval_id = setInterval(tdi.configuration.media.setTime, 1000);\n          tCM.logger(\'Start Timer\');\n      };\n  \n      tCM.resumeTimer = function() {\n          var tCM = tdi.configuration.media;\n          clearInterval(tdi.configuration.media.opData.interval_id);\n          tCM.opData.interval_id = setInterval(tdi.configuration.media.setTime, 1000);\n          tCM.logger(\'Resume Timer\');\n      };\n  \n      tCM.pauseTimer = function() {\n          var tCM = tdi.configuration.media;\n          clearInterval(tCM.opData.interval_id);\n          tCM.logger(\'Pause Timer\');\n      };\n  \n      tCM.logger(\'tCM Methods Defined\')\n  \n      tCM.appMeasurement = new AppMeasurement(rsid);\n      tCM.appMeasurement.visitor = visitor;\n      tCM.appMeasurement.trackingServer = _satellite.getVar("1.1 trackingServer") || "turnerinternational.sc.omtrdc.net";\n      tCM.appMeasurement.trackingServerSecure = _satellite.getVar("1.2 trackingServerSecure") || "turnerinternational.sc.omtrdc.net";\n      tCM.appMeasurement.account = rsid;\n      tCM.appMeasurement.pageName = data.pageName || (document.location.hostname.replace(/^www\\w+\\./, \'\') + document.location.pathname);\n      tCM.appMeasurement.charSet = tCA.charSet || "UTF-8";\n      tCM.logger(\'tCM appMeasurement Configured\')\n  \n      window.MediaHeartbeat = ADB.va.MediaHeartbeat;\n      window.MediaHeartbeatConfig = ADB.va.MediaHeartbeatConfig;\n      window.MediaHeartbeatDelegate = ADB.va.MediaHeartbeatDelegate;\n      tCM.logger(\'Mediaheartbeat Variables Defined\')\n  \n      var mediaConfig = new MediaHeartbeatConfig();\n      mediaConfig.trackingServer = data.trackingServer || tCM.trackingServer || "turnerinternational.hb.omtrdc.net";\n      mediaConfig.playerName = data.playerName || tCM.playerName || "";\n      mediaConfig.channel = data.channel || tCM.channel || "";\n      mediaConfig.debugLogging = data.debugLogging || tCM.debugLogging || false;\n      mediaConfig.appVersion = data.appVersion || tCM.appVersion || "";\n      mediaConfig.ovp = data.ovp || tCM.ovp || "";\n      mediaConfig.ssl = data.ssl || tCM.ssl || true;\n      tCM.logger(\'MediaHeartbeatConfig Setup Complete\');\n  \n      var mediaDelegate = new MediaHeartbeatDelegate();\n      mediaDelegate.getCurrentPlaybackTime = function() {\n          var w = window,\n              /* Default Value for currentTime is zero */\n              cT = 0,\n              /* Reference to JS interval used to track video progression */\n              tcmTPT = ((((w.tdi || {}).configuration || {}).media || {}).opData || {}).totalPlayTime || false,\n              /* External refernce to current video time when avaliable */\n              vmCT = (w.turner_metadata || {}).currentTime || false,\n              /* Method to validate time passed to VHL is a non-negative integer | deployed in Configuration */\n              isValidTime = w.tdi && w.tdi.util && typeof w.tdi.util.isValidVideoTime === "function" ? w.tdi.util.isValidVideoTime : function() {\n                  return false;\n              };\n  \n          /* Overwrite for legacy implementation using video_metadata */\n          var temp_vmCT = vmCT;\n          vmCT = (w.video_metadata || {}).currentTime || temp_vmCT;\n          /* Validate value returned by Interval | Use if proper format */\n          cT = isValidTime(tcmTPT) ? tcmTPT : cT;\n          /* Validate value passed to video_metadata.currentTime by video player | if applicable | preferred source */\n          cT = isValidTime(vmCT) ? vmCT : cT;\n  \n          return cT;\n      };\n      tCM.logger(\'MediaHeartbeatDelegate Setup Complete\');\n  \n      tCM.mediaHeartbeat = new MediaHeartbeat(mediaDelegate, mediaConfig, tdi.configuration.media.appMeasurement);\n      tCM.logger(\'New Instance of MediaHeartbeat\');\n  \n      var videoMetadata = {\n          id: data.content_id || "0",\n          length: data.content_duration || 0,\n          type: data.content_type == "live" ? MediaHeartbeat.StreamType.LIVE : MediaHeartbeat.StreamType.VOD,\n          title: data.content_name || ""\n      };\n      tCM.logger(\'Defined Video Metadata\');\n  \n      var mediaObject = MediaHeartbeat.createMediaObject(videoMetadata.title, videoMetadata.id, videoMetadata.length, videoMetadata.type);\n      tCM.logger(\'Created Media Object\');\n  \n      var standardVideoMetadata = {};\n      standardVideoMetadata[MediaHeartbeat.VideoMetadataKeys.SHOW] = data.content_showName || "";\n      standardVideoMetadata[MediaHeartbeat.VideoMetadataKeys.STREAM_FORMAT] = data.content_type == "live" ? "live" : "vod";\n      standardVideoMetadata[MediaHeartbeat.VideoMetadataKeys.SEASON] = data.content_seasonNumber || "";\n      standardVideoMetadata[MediaHeartbeat.VideoMetadataKeys.EPISODE] = data.content_episodeNumber || "";\n      standardVideoMetadata[MediaHeartbeat.VideoMetadataKeys.ASSET_ID] = data.content_id || "";\n      standardVideoMetadata[MediaHeartbeat.VideoMetadataKeys.GENRE] = data.content_genre || "";\n      standardVideoMetadata[MediaHeartbeat.VideoMetadataKeys.FIRST_AIR_DATE] = data.content_dataAired || data.content_dateAired || "";\n      standardVideoMetadata[MediaHeartbeat.VideoMetadataKeys.FIRST_DIGITAL_DATE] = data.content_dataAired || data.content_dateAired || "";\n      standardVideoMetadata[MediaHeartbeat.VideoMetadataKeys.RATING] = data.content_rating || "";\n      standardVideoMetadata[MediaHeartbeat.VideoMetadataKeys.ORIGINATOR] = data.content_originator || "";\n      standardVideoMetadata[MediaHeartbeat.VideoMetadataKeys.NETWORK] = data.content_network || "";\n      standardVideoMetadata[MediaHeartbeat.VideoMetadataKeys.SHOW_TYPE] = data.content_type || "";\n      standardVideoMetadata[MediaHeartbeat.VideoMetadataKeys.MVPD] = data.content_mvpd || "";\n      standardVideoMetadata[MediaHeartbeat.VideoMetadataKeys.AUTHORIZED] = data.content_authorized || "";\n      standardVideoMetadata[MediaHeartbeat.VideoMetadataKeys.DAY_PART] = data.day_part || "";\n      standardVideoMetadata[MediaHeartbeat.VideoMetadataKeys.FEED] = data.content_feed || "";\n      standardVideoMetadata[MediaHeartbeat.VideoMetadataKeys.AD_LOAD] = data.ad_load || "";\n      tCM.logger(\'Defined Standard Video Metadata\');\n  \n      mediaObject.setValue(MediaHeartbeat.MediaObjectKey.StandardVideoMetadata, standardVideoMetadata);\n      tCM.logger(\'Set Media Object Values\');\n  \n      var customVideoMetadata = {\n          show: data.content_showName || "",\n          domain: "web|" + window.location.hostname.replace("www.", ""),\n          pageName: data.pageName || (document.location.hostname.replace(/^www\\w+\\./, \'\') + document.location.pathname),\n          version: data.version ||\xa0spcLstPub,\n          ensighten: spcLstPub,\n          platform: "web"\n      };\n  \n      function vidDataFilterOut(vidKey, tCM) {\n          if (tCM.videoBlockList && Object.prototype.toString.call(tCM.videoBlockList) === "[object Array]" && tCM.videoBlockList.length > 0) {\n              var videoData = tCM.videoBlockList;\n              for (var x = 0; x < videoData.length; x++) {\n                  if (videoData[x] === vidKey) {\n                      return false;\n                  }\n              }\n          } else if (typeof tCM.videoBlockList === \'undefined\') {\n              return true;\n          }\n          return true;\n      }\n  \n      for (var i in data) {\n          if (data.hasOwnProperty(i) && (typeof data[i] === \'string\' || typeof data[i] === \'number\' || typeof data[i] === \'boolean\') && vidDataFilterOut(i, tCM)) {\n              customVideoMetadata[i] = typeof data[i] === \'string\' ? data[i].toLowerCase() : data[i];\n          }\n      }\n      tCM.logger(\'Defined Custom Video Metadata\');\n  \n      tCM.mediaHeartbeat.trackSessionStart(mediaObject, customVideoMetadata)\n      tCM.logger(\'Called trackSessionStart\');\n  });\n  window.PubSub.subscribe("Ad_Started", function(data) {\n      var tCM = tdi.configuration.media,\n          adMetadata = {},\n          adCustomMetadata = {},\n          standardAdMetadata = {},\n          spcLstPub = (((window.tdi || {}).configuration || {}).launch || {}).spaceLastPublished || "";\n  \n      function adDataFilter(adDataKey, tCM) {\n          if (tCM.adCustomData && Object.prototype.toString.call(tCM.adCustomData) === "[object Array]" && tCM.adCustomData.length > 0) {\n  \n              var adData = tCM.adCustomData;\n              for (var x = 0; x < adData.length; x++) {\n                  if (adData[x] === adDataKey) {\n                      return true;\n                  }\n              }\n          } else if (typeof tCM.adCustomData === \'undefined\') {\n              return true;\n          }\n  \n          return false;\n      }\n  \n      adCustomMetadata.version = data.version ||\xa0spcLstPub;\n  \n      for (var i in data) {\n          if (data.hasOwnProperty(i) && (typeof data[i] === \'string\' || typeof data[i] === \'number\' || typeof data[i] === \'boolean\') && adDataFilter(i, tCM)) {\n              data[i] = adCustomMetadata[i] = typeof data[i] === \'string\' ? data[i].toLowerCase() : data[i];\n          }\n      }\n  \n      adMetadata = {\n          id: data.ad_id || "",\n          position: data.ad_position || 0,\n          length: data.ad_duration || 0,\n          title: data.ad_title || ""\n      };\n  \n      var adBreakObject = MediaHeartbeat.createAdBreakObject(adMetadata.title, adMetadata.position, tCM.opData.totalPlayTime),\n          adObject = MediaHeartbeat.createAdObject(adMetadata.title, adMetadata.id, adMetadata.position, adMetadata.length);\n  \n      standardAdMetadata[MediaHeartbeat.AdMetadataKeys.ADVERTISER] = data.ad_advertiser || "";\n      standardAdMetadata[MediaHeartbeat.AdMetadataKeys.CAMPAIGN_ID] = data.ad_campaign_id || "";\n      standardAdMetadata[MediaHeartbeat.AdMetadataKeys.CREATIVE_ID] = data.ad_creative_id || "";\n      standardAdMetadata[MediaHeartbeat.AdMetadataKeys.SITE_ID] = data.ad_site || "";\n      standardAdMetadata[MediaHeartbeat.AdMetadataKeys.CREATIVE_URL] = data.ad_creative_url || "";\n      standardAdMetadata[MediaHeartbeat.AdMetadataKeys.PLACEMENT_ID] = data.ad_placement_id || "";\n      adObject.setValue(MediaHeartbeat.MediaObjectKey.StandardAdMetadata, standardAdMetadata);\n  \n      tCM.mediaHeartbeat.trackEvent(MediaHeartbeat.Event.AdBreakStart, adBreakObject);\n      tCM.mediaHeartbeat.trackEvent(MediaHeartbeat.Event.AdStart, adObject, adCustomMetadata);\n      tCM.startTimer();\n      tCM.logger(\'Ad Started\');\n  });\n  window.PubSub.subscribe("Ad_Skipped", function(data) {\n      var tCM = tdi.configuration.media;\n      tCM.mediaHeartbeat.trackEvent(MediaHeartbeat.Event.AdSkip);\n      tCM.mediaHeartbeat.trackEvent(MediaHeartbeat.Event.AdBreakComplete);\n      tCM.pauseTimer();\n      tCM.logger(\'Ad Skipped\');\n  });\n  window.PubSub.subscribe("Ad_Finished", function(data) {\n      var tCM = tdi.configuration.media;\n      tCM.mediaHeartbeat.trackEvent(MediaHeartbeat.Event.AdComplete);\n      tCM.mediaHeartbeat.trackEvent(MediaHeartbeat.Event.AdBreakComplete);\n      tCM.pauseTimer();\n      tCM.logger(\'Ad Finished\');\n  });\n  window.PubSub.subscribe("Media_Started", function(data) {\n      var tCM = tdi.configuration.media;\n      tCM.mediaHeartbeat.trackPlay();\n      tCM.startTimer();\n      tCM.logger(\'Media Started\');\n  });\n  window.PubSub.subscribe("Media_Paused", function(data) {\n      var tCM = tdi.configuration.media;\n      tCM.mediaHeartbeat.trackPause();\n      tCM.pauseTimer();\n      tCM.logger(\'Media Paused\');\n  });\n  window.PubSub.subscribe("Media_Resumed", function(data) {\n      var tCM = tdi.configuration.media;\n      tCM.mediaHeartbeat.trackPlay();\n      tCM.resumeTimer();\n      tCM.logger(\'Media Resumed\');\n  });\n  window.PubSub.subscribe("Media_Buffering_Started", function(data) {\n      var tCM = tdi.configuration.media;\n      tCM.mediaHeartbeat.trackEvent(MediaHeartbeat.Event.BufferStart);\n      tCM.pauseTimer()\n      tCM.logger(\'Media Buffering Started\');\n  });\n  window.PubSub.subscribe("Media_Buffering_Finished", function(data) {\n      var tCM = tdi.configuration.media;\n      tCM.mediaHeartbeat.trackEvent(MediaHeartbeat.Event.BufferComplete);\n      tCM.resumeTimer();\n      tCM.logger(\'Media Buffering Finished\');\n  });\n  window.PubSub.subscribe("Media_Chapter_Started", function(data) {\n      var tCM = tdi.configuration.media,\n          chapterMetadata = {},\n          chapterCustomMetadata = {},\n          spcLstPub = (((window.tdi || {}).configuration || {}).launch || {}).spaceLastPublished || "";\n  \n      function chapterDataFilter(chapterKey, tCM) {\n          if (tCM.chapterCustomData && Object.prototype.toString.call(tCM.chapterCustomData) === "[object Array]" && tCM.chapterCustomData.length > 0) {\n              var chapterData = tCM.chapterCustomData;\n              for (var x = 0; x < chapterData.length; x++) {\n                  if (chapterData[x] === chapterKey) {\n                      return true;\n                  }\n              }\n          } else if (typeof tCM.chapterCustomData === \'undefined\') {\n              return true;\n          }\n          return false;\n      }\n  \n      chapterCustomMetadata.version = data.version ||\xa0spcLstPub;\n  \n      for (var i in data) {\n          if (data.hasOwnProperty(i) && (typeof data[i] === \'string\' || typeof data[i] === \'number\' || typeof data[i] === \'boolean\') && chapterDataFilter(i, tCM)) {\n              data[i] = chapterCustomMetadata[i] = typeof data[i] === \'string\' ? data[i].toLowerCase() : data[i];\n          }\n      }\n  \n      chapterMetadata = {\n          cname: data.chapter_name || "",\n          position: data.chapter_position || 0,\n          length: data.chapter_duration || 0\n      };\n  \n      var chapterObject = MediaHeartbeat.createChapterObject(chapterMetadata.cname, chapterMetadata.position, chapterMetadata.length, tCM.opData.totalPlayTime);\n  \n      tCM.mediaHeartbeat.trackEvent(MediaHeartbeat.Event.ChapterStart, chapterObject, chapterCustomMetadata);\n      tCM.logger(\'Media Chapter Started\');\n  });\n  window.PubSub.subscribe("Media_Chapter_Finished", function(data) {\n      var tCM = tdi.configuration.media;\n      tCM.mediaHeartbeat.trackEvent(MediaHeartbeat.Event.ChapterComplete)\n      tCM.logger(\'Media Chapter Started\');\n  });\n  window.PubSub.subscribe("Media_Finished", function(data) {\n      var tCM = tdi.configuration.media;\n      tCM.mediaHeartbeat.trackComplete();\n      tCM.pauseTimer();\n  });\n  window.PubSub.subscribe("Media_Seeking_Started", function(data) {\n      var tCM = tdi.configuration.media;\n      tCM.mediaHeartbeat.trackEvent(MediaHeartbeat.Event.SeekStart);\n  });\n  window.PubSub.subscribe("Media_Seeking_Finished", function(data) {\n      var tCM = tdi.configuration.media;\n      tCM.mediaHeartbeat.trackEvent(MediaHeartbeat.Event.SeekComplete);\n  });\n  window.PubSub.subscribe("Content_Completed", function(data) {\n      var tCM = tdi.configuration.media;\n      tCM.mediaHeartbeat.trackSessionEnd();\n      tCM.pauseTimer();\n  });\n  window.PubSub.subscribe("game-preroll", function(data) {\n      if (data.ad_event === \'start\') {\n          trackVideoMetrics({\n              "type": "Player_Ready",\n              "data": {\n                  "gamersid": data.gamersid || false,\n                  "content_duration": 0,\n                  "content_name": data.gamename || "game preroll",\n                  "content_id": "game preroll",\n                  "playerName": data.playerName || "game player",\n                  "channel": data.channel || "game channel",\n                  "appVersion": data.appVersion || "game version",\n                  "ovp": data.ovp || "game ovp",\n                  "debugLogging": data.debugLogging || false\n              }\n          });\n          trackVideoMetrics({\n              "type": "Ad_Started",\n              "data": {\n                  "gamersid": data.gamersid || false,\n                  "ad_duration": data.ad_duration || 0,\n                  "ad_id": data.ad_id || "game preroll",\n                  "ad_type": "preroll"\n              }\n          });\n      } else if (data.ad_event === "skip" || "complete") {\n          trackVideoMetrics({\n              "type": "Ad_Finished",\n              "data": {}\n          });\n          trackVideoMetrics({\n              "type": "Content_Completed",\n              \'data\': {}\n          });\n      }\n  });',
language:"javascript"},timeout:2e3,delayNext:!0}]},{id:"RL546c4bbb19bd4f2fac0343af1a4c7911",name:"DFP/GAM CN EMEA (Page Bottom)",events:[{modulePath:"core/src/lib/events/pageBottom.js",settings:{},ruleOrder:50}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"\nconsole.log('DFP CNEMEA ADOBELAUNCH 25.06.21 16:00');\n//15.06.21 fix category page tagging\n//16.06.21 fix incorrect adunits on page change issue\n//20.06.21 fix page change issue on game category pages\n//22.06.21 add viewability fix for 1x1s\n//25.06.21 extend timeout time to 30 minues\n//27.06.21 reverse timeout back to 15 minutes: incewasing to 30 minutes made no difference to discrepancy. average time spent on a game is 13 minutes.\n\n\n\n\nvar dfpLazyAdCheck;\nvar dfpEventCheck;\nvar dfpAdAcceptedStatus; var dfpBBAcceptedStatus; var dfpPFAcceptedStatus;\n\n\n\n  function callDFPAds(){\n    \nvar dfpEnv;\nif(window.location.hostname.includes('qa.')){dfpEnv = 'qa-site';}else{dfpEnv = 'prod-site';}\n\n\n\n\nif(!window.top.document.cookie.includes('OptanonConsent')){\ndfpAdAcceptedStatus = 'noOT';\ndfpBBAcceptedStatus = 'noOT';\ndfpPFAcceptedStatus = 'noOT';\n\n}\nelse if(!window.top.document.cookie.includes('OptanonAlertBoxClosed')){\ndfpAdAcceptedStatus = 'pending';\ndfpBBAcceptedStatus = 'pending';\ndfpPFAcceptedStatus = 'pending';\n\n}\nelse if(typeof(window.OnetrustActiveGroups)!='undefined'){\nvar dfpOneTrustActiveGroups = window.OnetrustActiveGroups.split(',');\n\nif(dfpOneTrustActiveGroups.includes('4') || dfpOneTrustActiveGroups.includes('ad')){dfpAdAcceptedStatus='yes';}else{dfpAdAcceptedStatus='no';}\nif(dfpOneTrustActiveGroups.includes('3') || dfpOneTrustActiveGroups.includes('bb')){dfpBBAcceptedStatus='yes';}else{dfpBBAcceptedStatus='no';}\nif(dfpOneTrustActiveGroups.includes('2') || dfpOneTrustActiveGroups.includes('pf')){dfpPFAcceptedStatus='yes';}else{dfpPFAcceptedStatus='no';}\n}\n\nelse{\n  dfpAdAcceptedStatus = 'failed';\n  dfpBBAcceptedStatus = 'failed';\n  dfpPFAcceptedStatus = 'failed';\n}\n//console.log('dfpAdAcceptedStatus', dfpAdAcceptedStatus);\n//console.log('dfpBBAcceptedStatus', dfpBBAcceptedStatus);\n//console.log('dfpPFAcceptedStatus', dfpPFAcceptedStatus);\n\n\n\n//if (!window.transactionID) {window.transactionID = Math.round((new Date()).getTime() / 1000) + '' + Math.floor(Math.random() * 9007199254740992);}\n\nif (dfpAdAcceptedStatus=='yes') {\n\n        var dfpScreenWidth = screen.width;\n        var dfpScreenHeight = screen.height;\n        var dfpResolution = 'W'+dfpScreenWidth+'xH'+dfpScreenHeight;\n\n\n        popresolutionsArray = ['W1024xH600','W600xH1024','W1024xH768','W768xH1024','W1280xH1024','W1024xH1280','W1280xH600','W600xH1280','W1280xH720','W720xH1280','W1280xH768','W768xH1280','W1280xH800','W800xH1280','W1280xH950','W950xH1280','W1280xH960','W960xH1280','W1334xH750','W750xH1334','W1360xH768','W768xH1360','W1366xH1024','W1024xH1366','W1366xH768','W768xH1366','W1400xH1050','W1050xH1400','W1440xH900','W900xH1440','W1536xH864','W864xH1536','W1600xH900','W900xH1600','W1680xH1050','W1050xH1680','W1920xH1080','W1080xH1920','W1920xH1200','W1200xH1920','W2048xH1536','W1536xH2048','W2560xH1440','W1440xH2560','W320xH240','W240xH320','W480xH320','W320xH480','W533xH320','W320xH533','W568xH320','W320xH568','W640xH360','W360xH640','W640xH384','W384xH640','W731xH411','W411xH731','W732xH412','W412xH732','W736xH414','W414xH736','W800xH600','W600xH800','W812xH375','W375xH812','W854xH480','W480xH854','W960xH600','W600xH960','W1112xH834','W834xH1112'];\n        if(popresolutionsArray.includes(dfpResolution)==false){\n            dfpResolution = 'other';\n        }\n\n        //console.log('show dfp ads');\n\n        (function() {\n            var dfpLoad = document.createElement(\"script\"), dfpEL = document.getElementsByTagName(\"script\")[0]; dfpLoad.async = true;\n            dfpLoad.src = \"https://securepubads.g.doubleclick.net/tag/js/gpt.js\";\n            dfpEL.parentNode.insertBefore(dfpLoad, dfpEL);\n        })();\n        \n        var dfpDataLayer = turner_metadata;\n        var dfpPath = window.location.pathname.replace('/','').split('/');\n        //console.log('dfpPath', dfpPath);\n        var dfpCountryCode = dfpDataLayer.feedcode;\n        var dfpSite = 'cn_' + dfpCountryCode;\n        var dfpNetworkId = '99911224';\n        var dfpHL = dfpDataLayer.language;\n\t\tvar dfpSect='other';\n\t\tif(typeof(dfpDataLayer.section)!='undefined'){dfpSect = dfpDataLayer.section;}\n\t\tvar dfpSub='other';\n\t\tif(typeof(dfpDataLayer.subsection)!='undefined'){dfpSub = dfpDataLayer.subsection.replace(/ /g, '-').split('|')[1];}\n\t\tif(dfpSub.includes('detail')){dfpSub='detail';}\n\t\tvar dfpCat='none';\n\t\tif(typeof(dfpDataLayer.pagetype)!='undefined' && dfpDataLayer.pagetype== 'category'){dfpCat=dfpSub;}\n\t\telse if(typeof(dfpDataLayer.pagetype)!='undefined'&& dfpDataLayer.pagetype =='game' && typeof(dfpDataLayer.gamecategory)!='undefined')\n\t\t{dfpCat = dfpDataLayer.gamecategory;}\n\t\telse{dfpCat = 'none';}\n\t\tvar dfpContentId='none';\n\t\tif(typeof(dfpDataLayer.contentid)!='undefined'&&dfpDataLayer.contentid.toString().length>0){dfpContentId=dfpDataLayer.contentid.toString();}\n\t\tvar dfpContentTitle='none';\n\t\tif(typeof(dfpDataLayer.contenttitle)!='undefined'){dfpContentTitle=dfpDataLayer.contenttitle;}\n\t\tvar dfpShow;\n\t\tif(typeof(dfpDataLayer.franchise)!='undefined' && dfpDataLayer.franchise.length>1){\n\t\tdfpShow = dfpDataLayer.franchise.replace(/ /g,'-').replace(/&/g,'and').replace(/[\xae.,'?:-;@~#{}()*^%$\xa3\"|!]/g,'').replace(/\u017c/g,'z').replace(/[\xeb\xe8\xe9\xea\u0119]/g,'e').replace(/[\u015b\u015f\u0219\u015e]/g,'s').replace(/[\xfc\xdc\xfa]/g,'u').replace(/[\xe2\xe3\u0103\xe1\xe4\xe5]/g,'a').replace(/[\xf3\xf8\xf6o\u0302\u0151\xd3]/g,'o').replace(/[\u0130\u0131\xed]/g,'i').replace(/[\xc7\xe7]/g,'c').replace(/\u011f/g,'g').replace(/---/g,'-').replace(/--/g,'-').substring(0,39);\n\t\t}\n\t\telse{dfpShow='none';}\n\t\t//console.log('dfp KVs: ', dfpDataLayer.section, dfpSect, dfpDataLayer.subsection, dfpSub, dfpType, dfpCat, dfpContentId, dfpContentTitle, dfpShow);\n\t\t\n        var dfpAdunit;\n\t\tif(dfpSect=='home'){\n\t\tdfpType='main';\n\t\tdfpAdunit = '/'+dfpNetworkId+'/'+dfpSite+'/'+dfpSect;\n\t\t}\n\t\telse if(dfpSect=='games'||dfpSect=='videos'||dfpSect=='quiz'||dfpSect=='quizzes'){\n          if(dfpDataLayer.pagetype=='category' && dfpSub!='main'){\n\t\tdfpAdunit = '/'+dfpNetworkId+'/'+dfpSite+'/'+dfpSect+'/category/'+dfpSub;\n          }\n          else{\n\t\tdfpAdunit = '/'+dfpNetworkId+'/'+dfpSite+'/'+dfpSect+'/'+dfpSub;\n          }\n\t\t}\n\t\telse if(dfpSect=='shows'){\n\t\tvar dfpShowURL = dfpPath[1];\n\t\tdfpAdunit = '/'+dfpNetworkId+'/'+dfpSite+'/'+dfpSect+'/'+dfpShowURL+'/'+dfpSub;\n\t\t}\n\t\telse{\n\t\tdfpSect='other';\n\t\tif(typeof(dfpDataLayer.pagetype)!='undefined' && dfpDataLayer.pagetype=='404 error'){dfpSub='404_error';}\n\t\telse if(window.location.hostname.split('.')[0]=='apps'||window.location.hostname.split('.')[0]=='app'){dfpSub='apps';}\n\t\telse{dfpSub=dfpPath[0];}\n\t\tdfpType='main';\n\t\tdfpAdunit = '/'+dfpNetworkId+'/'+dfpSite+'/'+dfpSect+'/'+dfpSub;\n\t\t}\n  \n  \t\tvar dfpType='other';\n\t\tif(dfpSub=='main'||dfpSub=='category'){dfpType=dfpSub;}else{dfpType='detail';}\n        console.log('dfpAdunit: ',dfpAdunit);\n\t\t\n\t\t\n\t\t\n\t\t\n\n        \n        var dfpPage = dfpSite + ',' + dfpPath;\n        var dfpAdTest = 'none';  \n        //define adtest KV\n        if (window.location.href.split('?adtest=').length > 1) {\n            dfpAdTest = window.location.href.split('?adtest=')[1];\n        }\n\n//find ad divs\nvar dfpAdDivArrayInitial = [];\nvar adDivsInitial = document.querySelectorAll('div[id^=ad_]:not(div[id=ad_inner])');\nfor (dfpI=0; dfpI<adDivsInitial.length; dfpI++){\n  var divI = adDivsInitial[dfpI].id;\n  dfpAdDivArrayInitial.push(divI);\n  }\n//console.log('dfpAdDivArrayInitial: ', dfpAdDivArrayInitial);\n   \n\n\n//define mappings\n\nwindow.googletag = window.googletag || {};\nwindow.googletag.cmd = window.googletag.cmd || [];\n\nwindow.googletag.cmd.push(function() {\n  googletag.destroySlots();\n});\n\nwindow.googletag = window.googletag || {};\nwindow.googletag.cmd = window.googletag.cmd || [];\n\nwindow.slots = [];\n\nwindow.googletag = window.googletag || {cmd: []};\n  \ngoogletag.cmd.push(function() {\n  \nif (dfpSect == 'other') {\n                bnr_atf_mapping = googletag.sizeMapping().\n                addSize([728, 0], [728, 90]).\n                addSize([300, 0], [320, 50]).\n                build();\n\n                bnr_btf_mapping = googletag.sizeMapping().\n                addSize([728, 0], [728, 90]).\n                addSize([300, 0], [320, 50]).\n                build();\n            } else {\n                bnr_atf_mapping = googletag.sizeMapping().\n                addSize([980, 0], [[970, 250],[970, 90],[728, 90]]).\n                addSize([730, 0], [728, 90]).\n                addSize([300, 0], [320, 50]).\n                build();\n\n                bnr_btf_mapping = googletag.sizeMapping().\n                addSize([980, 0], [[970, 250],[970, 90],[728, 90]]).\n                addSize([730, 0], [728, 90]).\n                addSize([300, 0], [300, 250]).\n                build();\n\n            }\n  \n  oop_float_mapping= googletag.sizeMapping().\n  addSize([1, 0], [1, 1]).\n  build();\n  \n  reskin_skin_mapping= googletag.sizeMapping().\n  addSize([1, 0], [2, 2]).\n  build();\n  \n  rect_atf_mapping = googletag.sizeMapping().\n  addSize([300, 0], [300, 250]).\n  build();\n\n  rect_btf_mapping = googletag.sizeMapping().\n  addSize([300, 0], [300, 250]).\n  build();\n  \n  nat_atf_mapping = googletag.sizeMapping().\n  addSize([300, 0], ['fluid']).\n  build();\n  \n\n  //define ads short code\n\n  reskin_skin_sizelist = [2,2];\n  oop_float_sizelist = [1,1];\n  bnr_atf_sizelist = [[970,90],[728,90],[320,50]];\n  bnr_btf_sizelist = [[970,90],[728,90],[320,50]];\n  rect_atf_sizelist = [300,250];\n  rect_btf_sizelist = [300,250];\n  nat_atf_sizelist = ['fluid'];\n  \n  for (dfpN=0; dfpN<dfpAdDivArrayInitial.length; dfpN++){\n  var divN = dfpAdDivArrayInitial[dfpN].replace('ad_','');\n  var divNsizeMapping = divN.replace(divN.split('_')[divN.split('_').length-1],'mapping');\n  var divNsizeList = divN.replace(divN.split('_')[divN.split('_').length-1],'sizelist');\n    //console.log('dfp divN', divN);\n    googletag.defineSlot(dfpAdunit,eval(divNsizeList),'ad_'+divN).setTargeting('pos',divN).setTargeting('loadtype','normal').defineSizeMapping(eval(divNsizeMapping)).addService(googletag.pubads());\n  }\n  \n  //below fixes viewability issues on 1x1, makes viewable in desktop only for skins\n  if (dfpAdDivArrayInitial.includes('ad_oop_float_01') && dfpScreenWidth>1025){\n    //console.log('dfp fix 1x1 for viewability');\n        window.top.document.getElementById('ad_oop_float_01').style.display = 'block';\n        window.top.document.getElementById('ad_oop_float_01').style.height = '1px';\n        window.top.document.getElementById('ad_oop_float_01').setAttribute('data-advertising-message','');\n        window.top.document.getElementById('ad_oop_float_01').setAttribute('class','ad-placement');\n   }\n        \n\n        \ngoogletag.pubads().setTargeting('adtest', dfpAdTest);\n  googletag.pubads().setTargeting('amp', 'false');\n  googletag.pubads().setTargeting('app', 'false');\n  googletag.pubads().setTargeting('appname', 'none');\n  googletag.pubads().setTargeting('cat', dfpCat);\n\tgoogletag.pubads().setTargeting('cms', 'adobelaunch');\n\tgoogletag.pubads().setTargeting('contentid', dfpContentId);\n\tgoogletag.pubads().setTargeting('contenttitle', dfpContentTitle);\n\tgoogletag.pubads().setTargeting('hl', dfpHL);\n\tgoogletag.pubads().setTargeting('page', dfpPage);\n\tgoogletag.pubads().setTargeting('screensize',dfpResolution);\n\tgoogletag.pubads().setTargeting('sect', dfpSect);\n\tgoogletag.pubads().setTargeting('show', dfpShow);\n\tgoogletag.pubads().setTargeting('site', dfpSite);\n\tgoogletag.pubads().setTargeting('sub', dfpSub);  \n\tgoogletag.pubads().setTargeting('test', dfpEnv);\n\tgoogletag.pubads().setTargeting('theme', 'kids');\n\tgoogletag.pubads().setTargeting('type', dfpType);\n\t//googletag.pubads().setTargeting('transactionid',window.transactionID);\n\tgoogletag.pubads().setTargeting('transactionIDStatus', 'false');\n\n    googletag.pubads().setTargeting('advertisingcookie', dfpAdAcceptedStatus);\n    googletag.pubads().setTargeting('functionalcookie', dfpBBAcceptedStatus);\n    googletag.pubads().setTargeting('performancecookie', dfpPFAcceptedStatus);\n    googletag.pubads().setTagForChildDirectedTreatment(1); // 1 for kids, 0 for non-kids\n    googletag.pubads().setRequestNonPersonalizedAds(1); // 1 for kids, 0 for non-kids\n\t\n  googletag.pubads().enableSingleRequest();//comment out for testing\n\n    googletag.pubads().enableLazyLoad({\n                fetchMarginPercent: 0, // Fetch slots within 1 viewports.\n                renderMarginPercent: 0, // Render slots within 1 viewports.\n                mobileScaling: 1.0 // the above values on mobile.\n            });\n\n\n            googletag.enableServices();\n        });\n\n //load ads short code\n\ngoogletag.cmd.push(function() {\nfor(dfpK=0;dfpK<dfpAdDivArrayInitial.length;dfpK++)\n{\n //console.log('dfp dfpK', dfpAdDivArrayInitial[dfpK]);\n    googletag.display(dfpAdDivArrayInitial[dfpK]);\n\t}\n});\n    //}\n  \n  //lazy loading newest code\n  \nvar dfpLazyAds = Number(0);\nvar dfpMaxLazyAds = Number(6);\nvar dfpIterations = Number(0);\nvar dfpMaxIterations = Number(50);\n  \nfunction checkForNewAds(){\n  \n  //console.log(dfpMaxLazyAds,dfpLazyAds, dfpMaxIterations, dfpIterations);\n  if(dfpMaxLazyAds>dfpLazyAds && dfpMaxIterations>dfpIterations){\nvar dfpAdDivArrayCurrent = []; var divM; var divMsizeMapping; var divMsizeList;\nvar adDivsCurrent = document.querySelectorAll('div[id^=ad_]:not(div[id=ad_inner])');\nfor (dfpC=0; dfpC<adDivsCurrent.length; dfpC++){\n  var divC = adDivsCurrent[dfpC].id;\n  if(!dfpAdDivArrayInitial.includes(divC)){\n  dfpAdDivArrayCurrent.push(divC);\n  }\n    //console.log('dfpAdDivArrayCurrent: ', dfpAdDivArrayCurrent)\n  }\n  if(dfpAdDivArrayCurrent.length>0){\n  divM = dfpAdDivArrayCurrent[0];\n  console.log('new dfp addiv found', divM);\n  dfpLazyAds = Number(dfpLazyAds+1);  \n  dfpAdDivArrayInitial.push(divM);\n  divM = divM.replace('ad_','');\n  divMsizeMapping = divM.replace(divM.split('_')[divM.split('_').length-1],'mapping');\n  divMsizeList = divM.replace(divM.split('_')[divM.split('_').length-1],'sizelist');\n  console.log('dfp divM', divM);  \n  googletag.cmd.push(function() {\n\tgoogletag.defineSlot(dfpAdunit, eval(divMsizeList),'ad_'+divM).setTargeting('pos',divM).setTargeting('loadtype','lazy').defineSizeMapping(eval(divMsizeMapping)).addService(googletag.pubads());\n\t\n    });\n    googletag.cmd.push(function() { googletag.display('ad_'+divM); });\n\n\t}\n\t}\n\telse{\n    clearInterval(dfpLazyAdCheck);\n    console.log('clearInterval(dfpLazyAdCheck)');    \n\t}\n  dfpIterations = Number(dfpIterations+1);\n\t}//function ends\n\ndfpLazyAdCheck = setInterval(checkForNewAds,1500);\n \n\n}//end dfpaccepted==yes\nelse {\n    console.log('dont call dfp ads');\n}\n}//end callDFPAds\n\nvar dfpEventStart = Number(0);  \nvar dfpEventCurrent;\nvar dfpIt = Number(0);  \nvar dfpFind = Number(100);\nvar dfpMaxIt = Number(15*60000/dfpFind); //15 minutes inactivity\nvar dfpPath0 = turner_metadata.pageName + ':' +turner_metadata.subsection;\n  \nfunction pageChangeStatus(){ \n  if(dfpAdAcceptedStatus=='yes'){\n    var dfpPath1 = turner_metadata.pageName + ':' +turner_metadata.subsection;\n    if(dfpPath1!=dfpPath0){\n    //console.log('dfp events', dfpPath0, dfpPath1);\n    console.log('dfp page change detected');\n    dfpPath0 = dfpPath1;  \n    clearInterval(dfpLazyAdCheck);\n    callDFPAds();\n    }\n    dfpIt = Number(dfpIt+1);  \n    if(dfpIt >= dfpMaxIt){clearInterval(dfpEventCheck);console.log('dfp page change iterations end to due inactivity');}\n  }\n}//function ends   \n\ndfpEventCheck = setInterval(pageChangeStatus,dfpFind);\ncallDFPAds(); \n\n\t\n\t",language:"javascript"},timeout:2e3,delayNext:!0}]},{id:"RL0ad96eeb1b754be0a44d9c6935c2bff4",name:"3.4 CPTrack (Page Bottom)",events:[{modulePath:"core/src/lib/events/pageBottom.js",settings:{},ruleOrder:4}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{
source:'/**\n * @namespace CPTrack\n */\n\n(function(w, undefined) {\n  \'use strict\';\n\n  var rsids = [\n    {gid: \'ben-10-omnicode\', rsid: \'|turnerintgameben10omni|\', t_rsid: \'|turnerintgameben10omnidev|\'},\n    {gid: \'trtruck\', rsid: \'|turnerintgametrtrunksdr|\', t_rsid: \'|turnerintgametrtrunksdrdev|\'},\n    {gid: \'gamemaker\', rsid: \'|turnerintgamegmmaker|\', t_rsid: \'|turnerintgamegmmakerdev|\'}\n  ];\n\n  /**\n   * Initializes the module.\n   * @access private\n   */\n\n  function _CPTrack() {\n\n    this.version = "1.5";\n\n    // Forces a new instance\n    if (!(this instanceof _CPTrack)) {\n      return new _CPTrack();\n    }\n\n    if (typeof w.turner_metadata !== \'object\') {\n      throw new Error(\'CPTrack - "turner_metadata" is not an object\');\n    }\n    // Chain\n    return this;\n  }\n\n  /**\n   * Sends a "request" type of message.\n   * @access public\n   * @param {Object} method - The SDR event calling\n   * @param {Object} data\n   * GAME MILESTONES\n   * @param {String} data.milestone - The milestone name\n   * @param {String} data.gamelevel - The track level of game reached\n   * @param {String} data.gamecharacter - The game character active at time milestone starts\n   * @param {String} data.gamefeature - The game attribute that prompts user interaction and engagement\n   * @param {String} data.gamemode - The active game mode\n   */\n  _CPTrack.prototype.track = function(gameid, method, data) {\n    var results = \'FAILED\';\n\n    var myrsid = _getrsid(gameid);\n\n    if (gameid === \'trtruck\') {\n\n      if (!_validate(gameid, method, data))\n        return results;\n\n      switch (method) {\n        case \'trackMilestones\':\n\n          results = \'OK\';\n          break;\n        case \'gamelaunch\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "game launch event",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamelaunchevent : 1\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'gameprerolladstart\':\n          window.turner_metadata.trackAction.push({\n            type: \'game-preroll\',\n            data: {\n              ad_id : data.ad_id || myrsid[1], /* string */\n              ad_duration : data.ad_duration || 0, /* integer | ad duration in seconds */\n              ad_event : "start",\n              gamename : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamersid : data.gamersid || "nvs", /* string */\n              playerName : data.playerName || "nvs", /* string | identifies player of pre-roll advertisement */\n              channel : data.channel || "nvs", /* string | identifies pre-roll advertisement delivery channel */\n              appVersion : data.appVersion || "nvs", /* string | SDK version of video player */\n              ovp : data.ovp || "nvs" /* string | online video platform identifier */\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'gameprerolladskip\':\n          window.turner_metadata.trackAction.push({\n            type: \'game-preroll\',\n            data: {\n              ad_event : "skip",\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'gameprerolladcomplete\':\n          window.turner_metadata.trackAction.push({\n            type: \'game-preroll\',\n            data: {\n              ad_event : "complete ",\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'gameloadduration\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "game load duration",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              gamemode : data.gamemode || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gameloadduration : data.gameloadduration || 0\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'gamestart\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "game start event",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              gamemode : data.gamemode || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamestart : 1\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'gamecomplete\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "game complete event",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              gamemode : data.gamemode || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamecomplete : 1\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'gamereplay\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "game replay event",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              gamemode : data.gamemode || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamereplay : 1\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'gameexit\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "game exit event",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              gamemode : data.gamemode || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gameexit : 1\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'gameadclick\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "game ad click",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              gamemode : data.gamemode || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gameadclicked : 1\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'gamewins\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "game wins",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              gamemode : data.gamemode || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamewins : 1\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'gamelosses\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "game losses",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              gamemode : data.gamemode || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gameloss : 1\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'gamedeath\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "game death",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              gamemode : data.gamemode || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamedeath : 1\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'gameadvancement\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "game advancement",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              gamemode : data.gamemode || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gameadvancement : 1\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'gamefeatureactivated\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "game feature activated",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              gamemode : data.gamemode || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamefeatureevent : 1\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'gamephasesmilestones\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "game phases milestones",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              gamemode : data.gamemode || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamemilestones : 1\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'gameadimpression\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "game ad impression",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              gamemode : data.gamemode || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gameadimpression : 1\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'gamebufferingcomplete\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "game buffering complete",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              gamemode : data.gamemode || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamebufferduration : data.gamebufferduration || 0\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'gameerror\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "game error event",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              gamemode : data.gamemode || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gameerror : data.gameerror || "000"\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'revive\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "revive",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              gamemode : data.gamemode || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              revive : 1\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'dissolvemix\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "dissolve mix",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              gamemode : data.gamemode || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              dissolvemix : 1\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'recipeunlocked\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "recipe unlocked",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              gamemode : data.gamemode || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gameinteraction : 1,\n              recipeunlocked : 1\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'itemcrafted\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "item: " + data.itemname || "nvs",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              gamemode : data.gamemode || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gameinteraction : 1,\n              itemcrafted : 1\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'itemused\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "item: " + data.itemname || "nvs",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              gamemode : data.gamemode || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gameinteraction : 1,\n              itemused : 1\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'gamelevel1\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "game level 1",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              gamemode : data.gamemode || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamelevel1 : 1\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'gamelevel2\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "game level 2",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              gamemode : data.gamemode || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamelevel2 : 1\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'gamelevel3\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "game level 3",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              gamemode : data.gamemode || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamelevel3 : 1\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'gamelevel4\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "game level 4",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              gamemode : data.gamemode || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamelevel4 : 1\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'gametimespent\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "game time spent",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              gamemode : data.gamemode || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gametimespent : data.gametimespent || "nvs", /* string */\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'clearbackpack\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "clear back pack",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              gamemode : data.gamemode || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gameinteraction : 1,\n              clearbackpack : 1, /* string */\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'gamebufferend\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "game buffer end",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              gamemode : data.gamemode || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamebufferend : 1\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'gamebufferstart\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "game buffer start",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              gamemode : data.gamemode || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamebufferstart : 1\n            },\n          });\n          results = \'OK\';\n          break;\n        default:\n          break;\n      }\n    } else if (gameid === \'gamemaker\') {\n\n      if (!_validate(gameid, method, data))\n        return results;\n\n      switch (method) {\n        case \'splashstart\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "splash start",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamemode : data.gamemode || "nvs", /* string */\n              potiontype : data.potiontype || "nvs", /* string */\n              difficulty : data.difficulty || "nvs", /* string */\n              browselevel : data.browselevel || "nvs", /* string */\n              userstate : data.userstate || "nvs", /* string */\n              usertype : data.usertype || "nvs", /* string */\n              username : data.username || "nvs", /* string */\n              browsesort : data.browsesort || "nvs", /* string */\n              splashstart : 1\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'mainmenu\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "main menu",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamemode : data.gamemode || "nvs", /* string */\n              potiontype : data.potiontype || "nvs", /* string */\n              difficulty : data.difficulty || "nvs", /* string */\n              browselevel : data.browselevel || "nvs", /* string */\n              userstate : data.userstate || "nvs", /* string */\n              usertype : data.usertype || "nvs", /* string */\n              username : data.username || "nvs", /* string */\n              browsesort : data.browsesort || "nvs", /* string */\n              mainmenu : 1\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'newuser\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "new user",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamemode : data.gamemode || "nvs", /* string */\n              potiontype : data.potiontype || "nvs", /* string */\n              difficulty : data.difficulty || "nvs", /* string */\n              browselevel : data.browselevel || "nvs", /* string */\n              userstate : data.userstate || "nvs", /* string */\n              usertype : data.usertype || "nvs", /* string */\n              username : data.username || "nvs", /* string */\n              browsesort : data.browsesort || "nvs", /* string */\n              newuser : 1\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'usernamesel\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "username select",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamemode : data.gamemode || "nvs", /* string */\n              potiontype : data.potiontype || "nvs", /* string */\n              difficulty : data.difficulty || "nvs", /* string */\n              browselevel : data.browselevel || "nvs", /* string */\n              userstate : data.userstate || "nvs", /* string */\n              usertype : data.usertype || "nvs", /* string */\n              username : data.username || "nvs", /* string */\n              browsesort : data.browsesort || "nvs", /* string */\n              usernamesel : 1\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'createpassword\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "create password",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamemode : data.gamemode || "nvs", /* string */\n              potiontype : data.potiontype || "nvs", /* string */\n              difficulty : data.difficulty || "nvs", /* string */\n              browselevel : data.browselevel || "nvs", /* string */\n              userstate : data.userstate || "nvs", /* string */\n              usertype : data.usertype || "nvs", /* string */\n              username : data.username || "nvs", /* string */\n              browsesort : data.browsesort || "nvs", /* string */\n              createpassword : 1\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'acctcreated\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "account created",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamemode : data.gamemode || "nvs", /* string */\n              potiontype : data.potiontype || "nvs", /* string */\n              difficulty : data.difficulty || "nvs", /* string */\n              browselevel : data.browselevel || "nvs", /* string */\n              userstate : data.userstate || "nvs", /* string */\n              usertype : data.usertype || "nvs", /* string */\n              username : data.username || "nvs", /* string */\n              browsesort : data.browsesort || "nvs", /* string */\n              acctcreated : 1\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'downloadcard\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "download card",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamemode : data.gamemode || "nvs", /* string */\n              potiontype : data.potiontype || "nvs", /* string */\n              difficulty : data.difficulty || "nvs", /* string */\n              browselevel : data.browselevel || "nvs", /* string */\n              userstate : data.userstate || "nvs", /* string */\n              usertype : data.usertype || "nvs", /* string */\n              username : data.username || "nvs", /* string */\n              browsesort : data.browsesort || "nvs", /* string */\n              downloadcard : 1\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'prologuestart\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "prologue start",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamemode : data.gamemode || "nvs", /* string */\n              potiontype : data.potiontype || "nvs", /* string */\n              difficulty : data.difficulty || "nvs", /* string */\n              browselevel : data.browselevel || "nvs", /* string */\n              userstate : data.userstate || "nvs", /* string */\n              usertype : data.usertype || "nvs", /* string */\n              username : data.username || "nvs", /* string */\n              browsesort : data.browsesort || "nvs", /* string */\n              prologuestart : 1\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'prologuecomplete\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "prologue complete",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamemode : data.gamemode || "nvs", /* string */\n              potiontype : data.potiontype || "nvs", /* string */\n              difficulty : data.difficulty || "nvs", /* string */\n              browselevel : data.browselevel || "nvs", /* string */\n              userstate : data.userstate || "nvs", /* string */\n              usertype : data.usertype || "nvs", /* string */\n              username : data.username || "nvs", /* string */\n              browsesort : data.browsesort || "nvs", /* string */\n              prologuecomplete : 1\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'tutoriallevel1start\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "tutorial level1 start",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamemode : data.gamemode || "nvs", /* string */\n              potiontype : data.potiontype || "nvs", /* string */\n              difficulty : data.difficulty===undefined ? "nvs":data.difficulty, /* string */\n              browselevel : data.browselevel || "nvs", /* string */\n              userstate : data.userstate || "nvs", /* string */\n              usertype : data.usertype || "nvs", /* string */\n              username : data.username || "nvs", /* string */\n              browsesort : data.browsesort || "nvs", /* string */\n              tutoriallevel1start : 1\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'tutoriallevel2start\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "tutorial level2 start",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamemode : data.gamemode || "nvs", /* string */\n              potiontype : data.potiontype || "nvs", /* string */\n              difficulty : data.difficulty===undefined ? "nvs":data.difficulty, /* string */\n              browselevel : data.browselevel || "nvs", /* string */\n              userstate : data.userstate || "nvs", /* string */\n              usertype : data.usertype || "nvs", /* string */\n              username : data.username || "nvs", /* string */\n              browsesort : data.browsesort || "nvs", /* string */\n              tutoriallevel2start : 1\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'tutoriallevel3start\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "tutorial level3 start",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamemode : data.gamemode || "nvs", /* string */\n              potiontype : data.potiontype || "nvs", /* string */\n              difficulty : data.difficulty===undefined ? "nvs":data.difficulty, /* string */\n              browselevel : data.browselevel || "nvs", /* string */\n              userstate : data.userstate || "nvs", /* string */\n              usertype : data.usertype || "nvs", /* string */\n              username : data.username || "nvs", /* string */\n              browsesort : data.browsesort || "nvs", /* string */\n              tutoriallevel3start : 1\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'potionsel\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "potion select",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamemode : data.gamemode || "nvs", /* string */\n              potiontype : data.potiontype || "nvs", /* string */\n              difficulty : data.difficulty===undefined ? "nvs":data.difficulty, /* string */\n              browselevel : data.browselevel || "nvs", /* string */\n              userstate : data.userstate || "nvs", /* string */\n              usertype : data.usertype || "nvs", /* string */\n              username : data.username || "nvs", /* string */\n              browsesort : data.browsesort || "nvs", /* string */\n              potionsel : 1\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'tutoriallevel4start\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "tutorial level4 start",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamemode : data.gamemode || "nvs", /* string */\n              potiontype : data.potiontype || "nvs", /* string */\n              difficulty : data.difficulty===undefined ? "nvs":data.difficulty, /* string */\n              browselevel : data.browselevel || "nvs", /* string */\n              userstate : data.userstate || "nvs", /* string */\n              usertype : data.usertype || "nvs", /* string */\n              username : data.username || "nvs", /* string */\n              browsesort : data.browsesort || "nvs", /* string */\n              tutoriallevel4start : 1\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'tutoriallevel5start\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "tutorial level5 start",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamemode : data.gamemode || "nvs", /* string */\n              potiontype : data.potiontype || "nvs", /* string */\n              difficulty : data.difficulty===undefined ? "nvs":data.difficulty, /* string */\n              browselevel : data.browselevel || "nvs", /* string */\n              userstate : data.userstate || "nvs", /* string */\n              usertype : data.usertype || "nvs", /* string */\n              username : data.username || "nvs", /* string */\n              browsesort : data.browsesort || "nvs", /* string */\n              tutoriallevel5start : 1\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'treasurebox\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "treasure box open",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamemode : data.gamemode || "nvs", /* string */\n              potiontype : data.potiontype || "nvs", /* string */\n              difficulty : data.difficulty || "nvs", /* string */\n              browselevel : data.browselevel || "nvs", /* string */\n              userstate : data.userstate || "nvs", /* string */\n              usertype : data.usertype || "nvs", /* string */\n              username : data.username || "nvs", /* string */\n              browsesort : data.browsesort || "nvs", /* string */\n              treasurebox : 1\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'newlevel\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "new level",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamemode : data.gamemode || "nvs", /* string */\n              potiontype : data.potiontype || "nvs", /* string */\n              difficulty : data.difficulty || "nvs", /* string */\n              browselevel : data.browselevel || "nvs", /* string */\n              userstate : data.userstate || "nvs", /* string */\n              usertype : data.usertype || "nvs", /* string */\n              username : data.username || "nvs", /* string */\n              browsesort : data.browsesort || "nvs", /* string */\n              newlevel : 1\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'gamestart\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "game start event",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamemode : data.gamemode || "nvs", /* string */\n              potiontype : data.potiontype || "nvs", /* string */\n              difficulty : data.difficulty || "nvs", /* string */\n              browselevel : data.browselevel || "nvs", /* string */\n              userstate : data.userstate || "nvs", /* string */\n              usertype : data.usertype || "nvs", /* string */\n              username : data.username || "nvs", /* string */\n              gamestart : 1\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'gamecomplete\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "game start event",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamemode : data.gamemode || "nvs", /* string */\n              potiontype : data.potiontype || "nvs", /* string */\n              difficulty : data.difficulty || "nvs", /* string */\n              browselevel : data.browselevel || "nvs", /* string */\n              userstate : data.userstate || "nvs", /* string */\n              usertype : data.usertype || "nvs", /* string */\n              gamecomplete : 1\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'gamereplay\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "game start event",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamemode : data.gamemode || "nvs", /* string */\n              potiontype : data.potiontype || "nvs", /* string */\n              difficulty : data.difficulty || "nvs", /* string */\n              browselevel : data.browselevel || "nvs", /* string */\n              userstate : data.userstate || "nvs", /* string */\n              usertype : data.usertype || "nvs", /* string */\n              gamereplay : 1\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'gametimespent\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "game time spent",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamemode : data.gamemode || "nvs", /* string */\n              potiontype : data.potiontype || "nvs", /* string */\n              difficulty : data.difficulty || "nvs", /* string */\n              browselevel : data.browselevel || "nvs", /* string */\n              userstate : data.userstate || "nvs", /* string */\n              usertype : data.usertype || "nvs", /* string */\n              gametimespent : data.gametimespent || "nvs", /* string */\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'accttimespent\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "account time spent",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamemode : data.gamemode || "nvs", /* string */\n              potiontype : data.potiontype || "nvs", /* string */\n              difficulty : data.difficulty || "nvs", /* string */\n              browselevel : data.browselevel || "nvs", /* string */\n              userstate : data.userstate || "nvs", /* string */\n              usertype : data.usertype || "nvs", /* string */\n              username : data.username || "nvs", /* string */\n              accttimespent : data.accttimespent || "nvs", /* string */\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'levelwins\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "game wins",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamemode : data.gamemode || "nvs", /* string */\n              potiontype : data.potiontype || "nvs", /* string */\n              difficulty : data.difficulty || "nvs", /* string */\n              browselevel : data.browselevel || "nvs", /* string */\n              userstate : data.userstate || "nvs", /* string */\n              usertype : data.usertype || "nvs", /* string */\n              username : data.username || "nvs", /* string */\n              level_like : data.level_like || "nvs", /* string */\n              levelwins: 1,\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'levelloss\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "game loss",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamemode : data.gamemode || "nvs", /* string */\n              potiontype : data.potiontype || "nvs", /* string */\n              difficulty : data.difficulty || "nvs", /* string */\n              browselevel : data.browselevel || "nvs", /* string */\n              userstate : data.userstate || "nvs", /* string */\n              usertype : data.usertype || "nvs", /* string */\n              username : data.username || "nvs", /* string */\n              level_like : data.level_like || "nvs", /* string */\n              levelloss: 1,\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'levelstart\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "level start",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamemode : data.gamemode || "nvs", /* string */\n              potiontype : data.potiontype || "nvs", /* string */\n              difficulty : data.difficulty || "nvs", /* string */\n              browselevel : data.browselevel || "nvs", /* string */\n              userstate : data.userstate || "nvs", /* string */\n              usertype : data.usertype || "nvs", /* string */\n              username : data.username || "nvs", /* string */\n              level_like : data.level_like || "nvs", /* string */\n              levelstart: 1,\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'levelrestart\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "level restart",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamemode : data.gamemode || "nvs", /* string */\n              potiontype : data.potiontype || "nvs", /* string */\n              difficulty : data.difficulty || "nvs", /* string */\n              browselevel : data.browselevel || "nvs", /* string */\n              userstate : data.userstate || "nvs", /* string */\n              usertype : data.usertype || "nvs", /* string */\n              username : data.username || "nvs", /* string */\n              level_like : data.level_like || "nvs", /* string */\n              levelrestart: 1,\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'highscore\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "highscore",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamemode : data.gamemode || "nvs", /* string */\n              potiontype : data.potiontype || "nvs", /* string */\n              difficulty : data.difficulty || "nvs", /* string */\n              browselevel : data.browselevel || "nvs", /* string */\n              userstate : data.userstate || "nvs", /* string */\n              usertype : data.usertype || "nvs", /* string */\n              username : data.username || "nvs", /* string */\n              level_like : data.level_like || "nvs", /* string */\n              highscore: data.highscore || "nvs", /* string */\n              highscoreevent: 1,\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'levelpub\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "level publish",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamemode : data.gamemode || "nvs", /* string */\n              potiontype : data.potiontype || "nvs", /* string */\n              difficulty : data.difficulty || "nvs", /* string */\n              browselevel : data.browselevel || "nvs", /* string */\n              userstate : data.userstate || "nvs", /* string */\n              usertype : data.usertype || "nvs", /* string */\n              username : data.username || "nvs", /* string */\n              browsesort : data.browsesort || "nvs", /* string */\n              template : data.template || "nvs", /* string */\n              size : data.size || "nvs", /* string */\n              gameinteraction: 1,\n              levelpub: 1,\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'levellike\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "level user likes",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamemode : data.gamemode || "nvs", /* string */\n              potiontype : data.potiontype || "nvs", /* string */\n              difficulty : data.difficulty || "nvs", /* string */\n              browselevel : data.browselevel || "nvs", /* string */\n              userstate : data.userstate || "nvs", /* string */\n              usertype : data.usertype || "nvs", /* string */\n              template : data.template || "nvs", /* string */\n              size : data.size || "nvs", /* string */\n              gameinteraction: 1,\n              levellike: 1,\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'levelitems\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : data.interaction || "nvs", /* string */\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamemode : data.gamemode || "nvs", /* string */\n              potiontype : data.potiontype || "nvs", /* string */\n              difficulty : data.difficulty || "nvs", /* string */\n              browselevel : data.browselevel || "nvs", /* string */\n              browsesort : data.browsesort || "nvs", /* string */\n              userstate : data.userstate || "nvs", /* string */\n              usertype : data.usertype || "nvs", /* string */\n              username : data.username || "nvs", /* string */\n              template : data.template || "nvs", /* string */\n              size : data.size || "nvs", /* string */\n              gameinteraction: 1,\n              levelitems: data.levelitems || "nvs", /* string */\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'dailyrunstart\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : data.interaction || "daily run start",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamemode : data.gamemode || "nvs", /* string */\n              potiontype : data.potiontype || "nvs", /* string */\n              difficulty : data.difficulty || "nvs", /* string */\n              browselevel : data.browselevel || "nvs", /* string */\n              userstate : data.userstate || "nvs", /* string */\n              usertype : data.usertype || "nvs", /* string */\n              username : data.username || "nvs", /* string */\n              gameinteraction: 1,\n              dailyrunstart: 1, /* string */\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'dailyruncomplete\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : data.interaction || "daily run complete",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamemode : data.gamemode || "nvs", /* string */\n              potiontype : data.potiontype || "nvs", /* string */\n              difficulty : data.difficulty || "nvs", /* string */\n              browselevel : data.browselevel || "nvs", /* string */\n              userstate : data.userstate || "nvs", /* string */\n              usertype : data.usertype || "nvs", /* string */\n              username : data.username || "nvs", /* string */\n              gameinteraction: 1,\n              dailyruncomplete: 1, /* string */\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'dailylvlreward\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "daily level reward",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamemode : data.gamemode || "nvs", /* string */\n              potiontype : data.potiontype || "nvs", /* string */\n              difficulty : data.difficulty || "nvs", /* string */\n              browselevel : data.browselevel || "nvs", /* string */\n              userstate : data.userstate || "nvs", /* string */\n              usertype : data.usertype || "nvs", /* string */\n              gameinteraction: 1,\n              dailylvlreward: 1, /* string */\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'unlock\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : data.interaction || "unlock",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamemode : data.gamemode || "nvs", /* string */\n              potiontype : data.potiontype || "nvs", /* string */\n              difficulty : data.difficulty || "nvs", /* string */\n              browselevel : data.browselevel || "nvs", /* string */\n              userstate : data.userstate || "nvs", /* string */\n              usertype : data.usertype || "nvs", /* string */\n              username : data.username || "nvs", /* string */\n              gameinteraction: 1,\n              unlock: 1, /* string */\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'featureimp\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "feature impression",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamemode : data.gamemode || "nvs", /* string */\n              potiontype : data.potiontype || "nvs", /* string */\n              difficulty : data.difficulty || "nvs", /* string */\n              browselevel : data.browselevel || "nvs", /* string */\n              userstate : data.userstate || "nvs", /* string */\n              usertype : data.usertype || "nvs", /* string */\n              gameinteraction: 1,\n              featureimpression: 1, /* string */\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'characterimp\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "character impression",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamemode : data.gamemode || "nvs", /* string */\n              potiontype : data.potiontype || "nvs", /* string */\n              difficulty : data.difficulty || "nvs", /* string */\n              browselevel : data.browselevel || "nvs", /* string */\n              userstate : data.userstate || "nvs", /* string */\n              usertype : data.usertype || "nvs", /* string */\n              gameinteraction: 1,\n              characterimpression: 1, /* string */\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'extradailyreward\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamemode : data.gamemode || "nvs", /* string */\n              userstate : data.userstate || "nvs", /* string */\n              usertype : data.usertype || "nvs", /* string */\n              username : data.username || "nvs", /* string */\n              extradailyreward: 1, /* string */\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'rerollmenu\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamemode : data.gamemode || "nvs", /* string */\n              userstate : data.userstate || "nvs", /* string */\n              usertype : data.usertype || "nvs", /* string */\n              username : data.username || "nvs", /* string */\n              rerollmenu: 1, /* string */\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'rerollresult\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamemode : data.gamemode || "nvs", /* string */\n              userstate : data.userstate || "nvs", /* string */\n              usertype : data.usertype || "nvs", /* string */\n              username : data.username || "nvs", /* string */\n              rerollresult: 1, /* string */\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'rerollresultcol\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamemode : data.gamemode || "nvs", /* string */\n              userstate : data.userstate || "nvs", /* string */\n              usertype : data.usertype || "nvs", /* string */\n              username : data.username || "nvs", /* string */\n              rerollresultcol: 1, /* string */\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'random_potion\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamemode : data.gamemode || "nvs", /* string */\n              userstate : data.userstate || "nvs", /* string */\n              usertype : data.usertype || "nvs", /* string */\n              username : data.username || "nvs", /* string */\n              random_potion: 1, /* string */\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'randompotioncol\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamemode : data.gamemode || "nvs", /* string */\n              userstate : data.userstate || "nvs", /* string */\n              usertype : data.usertype || "nvs", /* string */\n              username : data.username || "nvs", /* string */\n              randompotioncol: 1, /* string */\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'extradailyrewardcol\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamemode : data.gamemode || "nvs", /* string */\n              userstate : data.userstate || "nvs", /* string */\n              usertype : data.usertype || "nvs", /* string */\n              username : data.username || "nvs", /* string */\n              extradailyrewardcol: 1, /* string */\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'rerollmenucol\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamemode : data.gamemode || "nvs", /* string */\n              userstate : data.userstate || "nvs", /* string */\n              usertype : data.usertype || "nvs", /* string */\n              username : data.username || "nvs", /* string */\n              rerollmenucol: 1, /* string */\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'gamebufferingduration\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "game buffering duration",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamemode : data.gamemode || "nvs", /* string */\n              gamebufferduration: data.gamebufferduration || "nvs", /* string */\n              userstate : data.userstate || "nvs", /* string */\n              username : data.username || "nvs", /* string */\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'gameloadduration\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "game load duration",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamemode : data.gamemode || "nvs", /* string */\n              gameloadduration: data.gameloadduration || "nvs", /* string */\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'gameerror\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "game error",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamemode : data.gamemode || "nvs", /* string */\n              username : data.username || "nvs", /* string */\n              userstate : data.userstate || "nvs", /* string */\n              errordetail: data.gameerror || "nvs", /* string */\n              gameerror: 1 || "nvs", /* string */\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'login\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "user login",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              gamecharacter : data.gamecharacter || "nvs", /* string */\n              gamefeature : data.gamefeature || "nvs", /* string */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamemode : data.gamemode || "nvs", /* string */\n              userstate : data.userstate || "nvs", /* string */\n              username : data.username || "nvs", /* string */\n              login: 1\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'gameadimpression\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "in-game ad impression",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamemode : data.gamemode || "nvs", /* string */\n              userstate : data.userstate || "nvs", /* string */\n              username : data.username || "nvs", /* string */\n              gameadimpression: 1\n            },\n          });\n          results = \'OK\';\n          break;\n        case \'gameadclicked\':\n          window.turner_metadata.trackAction.push({\n            type: \'game\',\n            data: {\n              gamersid : data.gamersid || myrsid[1], /* string */\n              interaction : "in-game ad clicked",\n              gametitle : data.gametitle || window.turner_metadata.gametitle, /* string */\n              gamelevel : data.gamelevel || "nvs", /* string */\n              gamecategory : data.gamecategory || window.turner_metadata.gamecategory, /* string | pipe delimited */\n              englishname : data.englishname || window.turner_metadata.englishname,\n              gamemode : data.gamemode || "nvs", /* string */\n              userstate : data.userstate || "nvs", /* string */\n              username : data.username || "nvs", /* string */\n              gameadclicked: 1\n            },\n          });\n          results = \'OK\';\n          break;\n        default:\n          break;\n      }\n    } else {\n      // all other games\n      data.gamersid = data.gamersid || myrsid[1];\n      data.interaction = _interactionLookup(method);\n\n      window.turner_metadata.trackAction.push({\n        type: \'game\',\n        data: data\n      });\n    }\n\n    return results;\n  };\n\n  /***********/\n  /* Helpers */\n  /***********/\n\n  function _interactionLookup(event) {\n    var ename = {\n      gamelaunchevent: "game launch event",\n      gameloadduration: "game load duration",\n      gamestart: "game start event",\n      gamecomplete: "game complete event",\n      gamereplay: "game replay event",\n      gameexit: "game exit event",\n      gameadclicked: "game ad clicked",\n      gamewins: "game wins",\n      gameloss: "game losses",\n      gamedeath: "game death",\n      gameadvancement: "game advancement",\n      gamefeatureevent: "game feature activated",\n      gamemilestones: "game phases milestones",\n      gameadimpression: "game ad impression",\n      gamebufferduration: "game ad impression",\n      gameerror: "game error event"\n    } [event];\n    return ename || event;\n  }\n\n  function _validate(gameid, ename, context) {\n    var event = [];\n    event[\'trtruck\'] = [];\n    event[\'trtruck\'][\'gameLaunch\'] = {gametitle: \'.*\', gamecategory: \'.*\'};\n    event[\'trtruck\'][\'gameLoadComplete\'] = {gametitle: \'.*\', gamecategory: \'.*\', gameloadduration: \'^\\d+$\'};\n    event[\'trtruck\'][\'gameStart\'] = {gametitle: \'.*\', gamecategory: \'.*\', gamelevel: \'.*\', gamecharacter:\'.*\', gamefeature:\'.*\', gamemode:\'.*\'};\n    event[\'trtruck\'][\'gameComplete\'] = {gametitle: \'.*\', gamecategory: \'.*\', gamecharacter:\'.*\', gamefeature:\'.*\', gamemode:\'.*\'};\n    event[\'trtruck\'][\'gameReplay\'] = {gametitle: \'.*\', gamecategory: \'.*\', gamelevel: \'.*\', gamecharacter:\'.*\', gamefeature:\'.*\', gamemode:\'.*\'};\n    event[\'trtruck\'][\'gameExit\'] = {gametitle: \'.*\', gamecategory: \'.*\', gamecharacter:\'.*\', gamefeature:\'.*\', gamemode:\'.*\'};\n    event[\'trtruck\'][\'gameAdClick\'] = {gametitle: \'.*\', gamecategory: \'.*\', gamecharacter:\'.*\', gamefeature:\'.*\', gamemode:\'.*\'};\n    event[\'trtruck\'][\'gameWins\'] = {gametitle: \'.*\', gamecategory: \'.*\', gamelevel: \'.*\', gamecharacter:\'.*\', gamefeature:\'.*\', gamemode:\'.*\'};\n    event[\'trtruck\'][\'gameLosses\'] = {gametitle: \'.*\', gamecategory: \'.*\', gamelevel: \'.*\', gamecharacter:\'.*\', gamefeature:\'.*\', gamemode:\'.*\'};\n    event[\'trtruck\'][\'gameDeath\'] = {gametitle: \'.*\', gamecategory: \'.*\', gamecharacter:\'.*\', gamefeature:\'.*\', gamemode:\'.*\'};\n    event[\'trtruck\'][\'gameAdvancement\'] = {gametitle: \'.*\', gamecategory: \'.*\', gamelevel: \'.*\', gamecharacter:\'.*\', gamefeature:\'.*\', gamemode:\'.*\'};\n    event[\'trtruck\'][\'gameFeatureActivated\'] = {gametitle: \'.*\', gamecategory: \'.*\', gamelevel: \'.*\', gamecharacter:\'.*\', gamefeature:\'.*\', gamemode:\'.*\'};\n    event[\'trtruck\'][\'gamePhasesMilestones\'] = {gametitle: \'.*\', gamecategory: \'.*\', gamecharacter:\'.*\', gamefeature:\'.*\', gamemode:\'.*\'};\n    event[\'trtruck\'][\'gameAdImpression\'] = {gametitle: \'.*\', gamecategory: \'.*\', gamecharacter:\'.*\', gamefeature:\'.*\', gamemode:\'.*\'};\n    event[\'trtruck\'][\'gameBufferingComplete\'] = {gametitle: \'.*\', gamecategory: \'.*\', gamecharacter:\'.*\', gamefeature:\'.*\', gamemode:\'.*\', gamebufferduration:\'^\\d+$\'};\n    event[\'trtruck\'][\'gameError\'] = {gametitle: \'.*\', gamecategory: \'.*\', gamecharacter:\'.*\', gamefeature:\'.*\', gamemode:\'.*\', gameerror:\'.*\'};\n    event[\'trtruck\'][\'revive\'] = {gametitle: \'.*\', gamecategory: \'.*\', gamelevel: \'.*\', gamecharacter:\'.*\', gamefeature:\'.*\', gamemode:\'.*\'};\n    event[\'trtruck\'][\'dissolveMix\'] = {gametitle: \'.*\', gamecategory: \'.*\', gamelevel: \'.*\', gamecharacter:\'.*\', gamefeature:\'.*\', gamemode:\'.*\'};\n    event[\'trtruck\'][\'recipeUnlocked\'] = {gametitle: \'.*\', gamecategory: \'.*\', gamelevel: \'.*\', gamecharacter:\'.*\', gamefeature:\'.*\', gamemode:\'.*\'};\n    event[\'trtruck\'][\'itemCrafted\'] = {gametitle: \'.*\', gamecategory: \'.*\', gamelevel: \'.*\', gamecharacter:\'.*\', gamefeature:\'.*\', gamemode:\'.*\'};\n    event[\'trtruck\'][\'itemUsed\'] = {gametimespent: \'.*\', gamecategory: \'.*\', gamelevel: \'.*\', gamecharacter:\'.*\', gamefeature:\'.*\', gamemode:\'.*\'};\n\n    event[\'gamemaker\'] = [];\n    event[\'gamemaker\'][\'levelwins\'] = {username: \'.*\', level_like: \'.*\'};\n    event[\'gamemaker\'][\'levelloss\'] = {username: \'.*\', level_like: \'.*\'};\n    event[\'gamemaker\'][\'levelstart\'] = {username: \'.*\', level_like: \'.*\'};\n    event[\'gamemaker\'][\'levelrestart\'] = {username: \'.*\', level_like: \'.*\'};\n    event[\'gamemaker\'][\'highscore\'] = {username: \'.*\', level_like: \'.*\'};\n    event[\'gamemaker\'][\'levelpub\'] = {template: \'.*\', size: \'.*\', username: \'.*\', browsesort: \'.*\'};\n    event[\'gamemaker\'][\'levellike\'] = {template: \'.*\', size: \'.*\'};\n    event[\'gamemaker\'][\'levelitems\'] = {template: \'.*\', size: \'.*\'};\n    event[\'gamemaker\'][\'login\'] = {username: \'.*\', userstate: \'.*\'};\n    event[\'gamemaker\'][\'splashstart\'] = {username: \'.*\', browsesort: \'.*\'};\n    event[\'gamemaker\'][\'mainmenu\'] = {username: \'.*\', browsesort: \'.*\'};\n    event[\'gamemaker\'][\'newuser\'] = {username: \'.*\', browsesort: \'.*\'};\n    event[\'gamemaker\'][\'usernamesel\'] = {username: \'.*\', browsesort: \'.*\'};\n    event[\'gamemaker\'][\'createpassword\'] = {username: \'.*\', browsesort: \'.*\'};\n    event[\'gamemaker\'][\'acctcreated\'] = {username: \'.*\', browsesort: \'.*\'};\n    event[\'gamemaker\'][\'downloadcard\'] = {username: \'.*\', browsesort: \'.*\'};\n    event[\'gamemaker\'][\'prologuestart\'] = {username: \'.*\', browsesort: \'.*\'};\n    event[\'gamemaker\'][\'prologuecomplete\'] = {username: \'.*\', browsesort: \'.*\'};\n    event[\'gamemaker\'][\'tutoriallevel1start\'] = {username: \'.*\', browsesort: \'.*\'};\n    event[\'gamemaker\'][\'tutoriallevel2start\'] = {username: \'.*\', browsesort: \'.*\'};\n    event[\'gamemaker\'][\'tutoriallevel3start\'] = {username: \'.*\', browsesort: \'.*\'};\n    event[\'gamemaker\'][\'potionsel\'] = {username: \'.*\', browsesort: \'.*\'};\n    event[\'gamemaker\'][\'tutoriallevel4start\'] = {username: \'.*\', browsesort: \'.*\'};\n    event[\'gamemaker\'][\'tutoriallevel5start\'] = {username: \'.*\', browsesort: \'.*\'};\n    event[\'gamemaker\'][\'treasurebox\'] = {username: \'.*\', browsesort: \'.*\'};\n    event[\'gamemaker\'][\'newlevel\'] = {username: \'.*\', browsesort: \'.*\'};\n    event[\'gamemaker\'][\'dailyrunstart\'] = {username: \'.*\', interaction: \'.*\'};\n    event[\'gamemaker\'][\'dailyruncomplete\'] = {username: \'.*\', interaction: \'.*\'};\n    event[\'gamemaker\'][\'unlock\'] = {username: \'.*\', interaction: \'.*\'};\n    event[\'gamemaker\'][\'extradailyreward\'] = {username: \'.*\'};\n    event[\'gamemaker\'][\'rerollmenu\'] = {username: \'.*\'};\n    event[\'gamemaker\'][\'rerollresult\'] = {username: \'.*\'};\n    event[\'gamemaker\'][\'rerollresultcol\'] = {username: \'.*\'};\n    event[\'gamemaker\'][\'random_potion\'] = {username: \'.*\'};\n    event[\'gamemaker\'][\'randompotioncol\'] = {username: \'.*\'};\n    event[\'gamemaker\'][\'extradailyrewardcol\'] = {username: \'.*\'};\n    event[\'gamemaker\'][\'rerollmenucol\'] = {username: \'.*\'};\n\n\n    for (var key in event[gameid][ename]) {\n      if (event[gameid][ename].hasOwnProperty(key)) {\n        var re = new RegExp(event[gameid][ename][key]);\n        if (!re.test(context[key])) {\n          console.log(\'CPTrack - Game tracking error: [\' + ename + \'] \' + key + \' is not in right format.\');\n          return false;\n        }\n      }\n    }\n    return true;\n  }\n\n  function _getrsid(gameid) {\n    var arrayLength = rsids.length;\n    for (var i = 0; i < arrayLength; i++) {\n      if (rsids[i].gid === gameid) {\n        if (window.turner_metadata && window.turner_metadata.test === 1) {\n          return rsids[i].t_rsid.split("|");\n        } else {\n          return rsids[i].rsid.split("|");\n        }\n      }\n    }\n  }\n\n  w.CPTrack = {\n    init: _CPTrack,\n  };\n\n})(window);\n',
language:"javascript"},timeout:2e3,delayNext:!0}]},{id:"RL54d9de170daf4721bb2e1215538f24e4",name:"3.6 CNCommServer (Page Bottom)",events:[{modulePath:"core/src/lib/events/pageBottom.js",settings:{},ruleOrder:6}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"/**\n * @namespace CNCommServer\n */\n\n(function (w, d, CNComm, CPTrack) {\n  'use strict';\n\n  var hasLoaded = false;\n\n  /**\n   * Initializes the module.\n   * @access private\n   * @params {String} selector - A jQuery style selector which gets the iframe content\n   */\n\n  function _CNCommServer(selector, feed_code, language, platform, cbFunc) {\n    var regex = /^https?:\\/\\/[a-z0-9-_.]+/;\n\n    // Forces a new instance\n    if (!(this instanceof _CNCommServer)) {\n      return new _CNCommServer(selector, feed_code, language, platform);\n    }\n\n    this.initialized = false;\n    this._feed_code = feed_code.toLowerCase();\n    this._language = language.split('-')[0].toLowerCase();\n    this._platform = (function (platform) {\n      var results = 'DESKTOP';\n\n      if (platform.isTablet || platform.isMobile) {\n        results = 'MOBILE';\n      }\n\n      return results;\n    }(platform));\n    this.iframe = document.querySelector(selector);\n\n    if (this.iframe !== null) {\n      // Extracts protocol + domain name for each iframe\n      this.origin = this.iframe.src.match(regex)[0];\n\n      this._proxy = CNComm.init({\n        target: this.iframe.contentWindow,\n        origin: [this.origin],\n        onMessage: this._onMessage.bind(this),\n      });\n\n      this._cptrack = CPTrack.init();\n\n      if (typeof this.cbFunc === 'function') {\n      \tthis.cbFunc();\n      }\n     \n      this.initialized = true;\n    }\n  }\n\n  _CNCommServer.prototype.uninit = function () {\n    this._proxy.uninit();\n    this.iframe = null;\n    this.initialized = false;\n  };\n\n  /**\n   * Sends a \"response\" message\n   * @access private\n   * @param {Object} data\n   * @param {String} data.type - The type of message (request or response)\n   * @param {String} data.namespace - The namespace of the required method\n   * @param {String} data.method - The method name\n   * @param {String} data.callback_id - The callback ID sent by the requester\n   * @param {String|Array} [data.args] - The arguments to be passed to the method\n   * @param {Object|String} results The result of the requested operation\n   */\n\n  _CNCommServer.prototype._post = function (data, results) {\n    var response = {\n      namespace: data.namespace,\n      method: data.method,\n      callback_id: data.callback_id,\n      isPermanent: data.isPermanent,\n      results: results,\n    };\n\n    this._proxy.response(response);\n  };\n\n  _CNCommServer.prototype._animateScrollTop = function (distance, duration) {\n    var initial_position = w.pageYOffset,\n      diff = parseInt(distance, 10) - initial_position,\n      start;\n\n    duration = duration || 400;\n\n    function ease(percent) {\n      return 0.5 - Math.cos(percent * Math.PI) / 2;\n    }\n\n    function step(timestamp) {\n      var elapsedTime, percent, easing;\n\n      if (!start) {\n        start = timestamp;\n      }\n\n      elapsedTime = timestamp - start;\n      percent = Math.min(elapsedTime / duration, 1);\n      easing = ease(percent);\n\n      w.scrollTo(0, initial_position + diff * easing);\n\n      if (elapsedTime < duration) {\n        w.requestAnimationFrame(step);\n      }\n    }\n\n    w.requestAnimationFrame(step);\n  };\n\n  /**\n   * Handles any CN namespaced request\n   * @access private\n   * @param {String} data.type - The type of message (request or response)\n   * @param {String} data.namespace - The namespace of the required method\n   * @param {String} data.method - The method name\n   * @param {String} data.callback_id - The callback ID sent by the requester\n   * @param {Array} [data.args] - The arguments to be passed to the method\n   * @return {String}\n   */\n\n  _CNCommServer.prototype._handleCN = function (data) {\n    var results = 'FAILED';\n\n    switch (data.method) {\n      case 'getFeed':\n        results = this._feed_code;\n        break;\n      case 'getLanguage':\n        results = this._language;\n        break;\n      case 'getClientType':\n        results = this._platform;\n        break;\n      case 'getURL':\n        results = w.location.href;\n        break;\n      case 'getBrowserWidth':\n        results = d.documentElement.clientWidth;\n        break;\n      case 'getBrowserHeight':\n        results = d.documentElement.clientHeight;\n        break;\n      case 'getScrollTop':\n        results = w.pageYOffset;\n        break;\n      case 'getOffsetTop':\n        results =\n          this.iframe.getBoundingClientRect().top +\n          w.pageYOffset -\n          (d.documentElement.clientTop || 0);\n        break;\n      case 'setHeight':\n        this.iframe.style.height = data.args[0];\n\n        results = 'OK';\n        break;\n      case 'setScrollTop':\n        // Prevents an undesired jump\n        if (!hasLoaded) {\n          w.setTimeout(\n            (function (that, data) {\n              return function () {\n                that._handleCN(data);\n              };\n            })(this, data),\n            1000\n          );\n        } else {\n          this._animateScrollTop(data.args[0], data.args[1]);\n        }\n\n        results = 'OK';\n        break;\n      case 'setDocumentLocation':\n        w.location = data.args[0];\n        results = 'OK';\n        break;\n      case 'closeTakeover':\n        if (typeof TakeOverController !== 'undefined') {\n          TakeOverController.close();\n          results = 'OK';\n        }\n        break;\n      case 'onScroll':\n        // The callback should be kept,\n        // so we modify the 'request' data\n        // adding a new 'isPermanent' property\n        data.isPermanent = true;\n\n        w.addEventListener(\n          'scroll',\n          (function (that, w, data) {\n            var scrollTimeout;\n\n            return function () {\n              clearTimeout(scrollTimeout);\n\n              scrollTimeout = w.setTimeout(function () {\n                var results = w.pageYOffset;\n\n                that._post(data, results);\n              }, 10);\n            };\n          })(this, w, data)\n        );\n\n        results = 'OK';\n        break;\n      case 'showAd':\n        if (typeof w.showAd === 'function') {\n          w.showAd();\n          results = 'OK';\n        }\n        break;\n      default:\n        break;\n    }\n\n    return results;\n  };\n\n  /**\n   * Handles any Omniture namespaced request\n   * @access private\n   * @param {String} data.type - The type of message (request or response)\n   * @param {String} data.namespace - The namespace of the required method\n   * @param {String} data.method - The method name\n   * @param {String} data.callback_id - The callback ID sent by the requester\n   * @param {Array} [data.args] - The arguments to be passed to the method\n   * @return {String}\n   */\n\n  _CNCommServer.prototype._handleOmniture = function (data) {\n    var results = 'FAILED';\n\n    switch (data.method) {\n      case 'trackPageView':\n        trackPageView();\n        results = 'OK';\n        break;\n      case 'trackLinkClick':\n        trackLinkClick(data.args[0], data.args[1]);\n        results = 'OK';\n        break;\n      case 'trackSiteMilestones':\n        window.turner_metadata.trackAction.push({\n          type: 'interaction',\n          data: {\n            promomilestoneevent: 1,\n            interaction: 'promo milestone',\n            promomilestone: data.args[0] ? data.args[0].context + \":\" + data.args[0].name + \":\" + data.args[0].ID : \"\",\n            version: \"web|\".concat(window.buildVersion),\n          },\n        });\n        results = 'OK';\n        break;\n      case 'trackGameSDR':\n        this._cptrack.track(data.args[0].gameid, data.args[0].name, data.args[0].context);\n        results = 'OK';\n        break;\n      default:\n        break;\n    }\n\n    return results;\n  };\n\n  /**\n   * Handles the CNComm's message event\n   * @access private\n   * @param {Object} data\n   * @param {String} data.type - The type of message (request or response)\n   * @param {String} data.namespace - The namespace of the required method\n   * @param {String} data.method - The method name\n   * @param {String} data.callback_id - The callback ID sent by the requester\n   * @param {Array} [data.args] - The arguments to be passed to the method\n   */\n\n  _CNCommServer.prototype._onMessage = function (data) {\n    var results = 'FAILED';\n\n    switch (data.namespace) {\n      case 'CN':\n        results = this._handleCN(data);\n        break;\n      case 'Omniture':\n        results = this._handleOmniture(data);\n        break;\n      default:\n        break;\n    }\n\n    this._post(data, results);\n  };\n\n  /**\n   * @lends CNCommServer\n   */\n\n  w.CNCommServer = {\n    /**\n     * Initializes the module.\n     * @access public\n     * @method\n     * @params {String} selector - A jQuery style selector which gets the iframe content\n     */\n\n    init: _CNCommServer,\n  };\n\n  // init\n  w.addEventListener(\n    'load',\n    function () {\n      hasLoaded = true;\n    },\n    { once: true }\n  );\n})(window, document, CNComm, CPTrack);\n",language:"javascript"},timeout:2e3,delayNext:!0}]},{id:"RL633e6e2a8e6b4ebdb725212603723ea5",name:"3.5 CNComm (Page Bottom)",events:[{modulePath:"core/src/lib/events/pageBottom.js",settings:{},ruleOrder:5}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"/**\n * @namespace CNComm\n */\n\n(function(w, undefined) {\n  'use strict';\n\n  var _isIframe = _checkIframe(),\n    _intervals = {};\n\n  /**\n   * Initializes the module.\n   * @access private\n   * @param {Object} options\n   * @param {Object} options.target - A reference to the target's \"window\" object\n   * @param {String[]} options.origin - Specifies what the origin must be for the event to be dispatched\n   * @param {CNProxy~onMessageHandler} [options.onMessage] - A callback function that handles the \"message\" event response\n   */\n\n  function _CNComm(options) {\n    var target = options.target,\n      origin = options.origin;\n\n    // Forces a new instance\n    if (!(this instanceof _CNComm)) {\n      return new _CNComm(options);\n    }\n\n    if (typeof target === 'undefined' || !('postMessage' in target)) {\n      throw new Error(\n        'CNComm - The provided target \"window\" reference doesn\\'t exists or \"postMessage\" is not supported.'\n      );\n    }\n\n    if (!_isArray(origin)) {\n      throw new Error('CNComm - The provided origin value is not an Array.');\n    }\n\n    // Set the values for the instance\n    this._callbacks = [];\n    this._target = target;\n    this._origin = origin;\n    this._origin_length = this._origin.length;\n\n    if (typeof options.onMessage === 'function') {\n      this._onMessageHandler = options.onMessage;\n    }\n\n    _addEventListener(w, 'message', this._onMessage.bind(this));\n\n    // Chain\n    return this;\n  }\n\n  /**\n   * De-initializes the module.\n   * @access public\n   * @param {Object} fn - A function to execute after the API is ready\n   */\n\n  _CNComm.prototype.uninit = !_isIframe\n    ? function() {\n        _removeEventListener(w, 'message', this._onMessage.bind(this));\n\n        // Chain\n        return this;\n      }\n    : undefined;\n\n  /**\n   * Specifies a function to execute when the API is fully loaded.\n   * @access public\n   * @param {Object} fn - A function to execute after the API is ready\n   */\n\n  _CNComm.prototype.ready = _isIframe\n    ? function(fn) {\n        this._ping(fn);\n\n        // Chain\n        return this;\n      }\n    : undefined;\n\n  /**\n   * Sends a \"request\" type of message.\n   * @access public\n   * @param {Object} options\n   * @param {String} options.namespace - The namespace of the required method\n   * @param {String} options.method - The method name\n   * @param {Array} [options.args] - The arguments to be passed to the method\n   * @param {Object} callback - A function to be called on response\n   */\n\n  _CNComm.prototype.request = _isIframe\n    ? function(options, callback) {\n        options.type = 'request';\n        options.callback_id = this._registerCallback(callback);\n\n        if (typeof options.args !== 'undefined' && !_isArray(options.args)) {\n          throw new Error('CNComm - Property \"args\" is not an Array');\n        }\n\n        this._post(options);\n      }\n    : undefined;\n\n  /**\n   * Sends a \"response\" type of message.\n   * @access public\n   * @param {Object} options\n   * @param {String} options.namespace - The namespace of the required method sent by the requester\n   * @param {String} options.method - The method name sent by the requester\n   * @param {String} options.callback_id - The callback ID sent by the requester\n   * @param {String} options.results - The response body\n   */\n\n  _CNComm.prototype.response = !_isIframe\n    ? function(options) {\n        options.type = 'response';\n\n        this._post(options);\n      }\n    : undefined;\n\n  /**\n   * Sends a message through postMessage.\n   * @access private\n   * @param {Object} message - The message to be sent\n   */\n\n  _CNComm.prototype._post = function(message) {\n    var i = 0;\n\n    for (; i < this._origin_length; i++) {\n      this._target.postMessage(JSON.stringify(message), this._origin[i]);\n    }\n  };\n\n  /**\n   * Sends a \"ping\" type of message.\n   * @access private\n   * @param {Object} callback - A function to be called on response\n   */\n\n  _CNComm.prototype._ping = function(callback) {\n    var options = {\n        type: 'ping',\n        callback_id: this._registerCallback(callback),\n      },\n      times = 0,\n      timeout = 10;\n\n    // Anonymous function for additional params\n    _intervals[options.callback_id] = w.setInterval(\n      (function(that) {\n        return function() {\n          if (times === timeout) {\n            w.clearInterval(_intervals[options.callback_id]);\n\n            throw new Error('CNComm - Timed out.');\n          } else {\n            times++;\n            that._post(options);\n          }\n        };\n      })(this),\n      1000\n    );\n  };\n\n  /**\n   * Sends a \"pong\" type of message.\n   * @access private\n   * @param {Object} data\n   * @param {String} data.callback_id - The callback ID sent by the requester\n   */\n\n  _CNComm.prototype._pong = function(data) {\n    var options = {\n      type: 'pong',\n      callback_id: data.callback_id,\n    };\n\n    this._post(options);\n  };\n\n  /**\n   * Saves a callback for later use on response.\n   * @access private\n   * @param {Object} callback\n   */\n\n  _CNComm.prototype._registerCallback = function(callback) {\n    var UID;\n\n    if (typeof callback !== 'function') {\n      throw new Error('CNComm - No callback function provided.');\n    }\n\n    UID = _getUID();\n    this._callbacks[UID] = callback;\n\n    return UID;\n  };\n\n  /**\n   * Handles the message event.\n   * @access private\n   * @param {Object} event\n   * @param {Object} event.data - The object passed from the other window\n   * @param {Object} event.origin - The origin of the window that sent the message at the time postMessage was called\n   * @param {Object} event.source - A reference to the window object that sent the message\n   */\n\n  _CNComm.prototype._onMessage = function(event) {\n    var origin = event.origin || event.originalEvent.origin, // For Chrome, the origin property is in the event.originalEvent object.\n      data;\n\n    if (_inArray(origin, this._origin) === -1) {\n      return;\n    }\n\n    try {\n      data = JSON.parse(event.data);\n\n      switch (data.type) {\n        case 'ping':\n          this._onPing(data);\n          break;\n        case 'pong':\n          this._onPong(origin, data);\n          break;\n        case 'request':\n          this._onRequest(data);\n          break;\n        case 'response':\n          this._onResponse(data);\n          break;\n        default:\n          break;\n      }\n    } catch (e) {\n      throw new Error('CNComm - Failed parse message data.');\n    }\n  };\n\n  /**\n   * Handles the \"request\" type of data.\n   * @access private\n   * @param {Object} data\n   * @param {String} data.namespace - The namespace of the required method\n   * @param {String} data.method - The method name\n   * @param {Array} [data.args] - The arguments to be passed to the method\n   */\n\n  _CNComm.prototype._onRequest = function(data) {\n    this._onMessageHandler(data);\n  };\n\n  /**\n   * Handles the \"response\" type of data.\n   * @access private\n   * @param {Object} data\n   * @param {String} data.namespace - The namespace of the required method\n   * @param {String} data.method - The method name\n   * @param {String} data.callback_id - The callback ID\n   * @param {String} data.results - The response body\n   */\n\n  _CNComm.prototype._onResponse = function(data) {\n    if (typeof this._callbacks[data.callback_id] === 'function') {\n      this._callbacks[data.callback_id](data.results);\n\n      // Remove the callback if not permanent\n      if (!data.isPermanent) {\n        delete this._callbacks[data.callback_id];\n      }\n    }\n  };\n\n  /**\n   * Handles the \"ping\" type of data.\n   * @access private\n   * @param {Object} data\n   * @param {String} data.callback_id - The callback ID\n   */\n\n  _CNComm.prototype._onPing = function(data) {\n    this._pong(data);\n  };\n\n  /**\n   * Handles the \"pong\" type of data.\n   * @access private\n   * @param {String} origin - The origin of the window that sent the message at the time postMessage was called\n   * @param {Object} data\n   * @param {String} data.callback_id - The callback ID\n   */\n\n  _CNComm.prototype._onPong = function(origin, data) {\n    // Now we know what origin has connected, remove the rest\n    this._origin = [origin];\n    this._origin_length = this._origin.length;\n\n    w.clearInterval(_intervals[data.callback_id]);\n    this._onResponse(data);\n  };\n\n  /***********/\n  /* Helpers */\n  /***********/\n\n  /**\n   * Generates a randoms UID.\n   * @access private\n   */\n\n  function _getUID() {\n    return ('0000' + ((Math.random() * Math.pow(36, 4)) << 0).toString(36)).slice(-4);\n  }\n\n  /**\n   * Checks if module is running in an iframe.\n   * @access private\n   */\n\n  function _checkIframe() {\n    try {\n      return window.self !== window.top;\n    } catch (e) {\n      return true;\n    }\n  }\n\n  /**\n   * Cross-browser addEventListener.\n   * @access private\n   * @param {Object} el - The element where the listener should be attached\n   * @param {String} type - The type of event\n   * @param {CNProxy~addEventListenerHandler} fn - The callback that will handle the event\n   */\n\n  function _addEventListener(el, type, fn) {\n    if (el.addEventListener) {\n      el.addEventListener(type, fn, false);\n    } else if (el.attachEvent) {\n      el.attachEvent('on' + type, fn);\n    } else {\n      el['on' + type] = fn;\n    }\n  }\n\n  /**\n   * Cross-browser removeEventListener.\n   * @access private\n   * @param {Object} el - The element where the listener should be attached\n   * @param {String} type - The type of event\n   * @param {CNProxy~removeEventListenerHandler} fn - The callback that will handle the event\n   */\n\n  function _removeEventListener(el, type, fn) {\n    if (el.removeEventListener) {\n      el.removeEventListener(type, fn, false);\n    } else if (el.attachEvent) {\n      el.detachEvent('on' + type, fn);\n    } else {\n      el['on' + type] = null;\n    }\n  }\n\n  /**\n   * Checks if is an Array.\n   * @access private\n   * @param {*} obj - The object to check\n   * return {Boolean}\n   */\n  function _isArray(obj) {\n    return Object.prototype.toString.call(obj) === '[object Array]';\n  }\n\n  /**\n   * Checks if an element exist in an array.\n   * @access private\n   * @param {String} searchElement - El elemento a buscar en el array\n   * @param {Array} array - El array donde se buscar\xe1 el elemento\n   * @return {Number} La \xedndice del elemento dentro el array o -1 en caso de no encontrarlo\n   */\n\n  function _inArray(searchElement, array) {\n    var i, max;\n\n    if (!Array.prototype.indexOf) {\n      i = 0;\n      max = array.length;\n\n      for (; i < max; i++) {\n        if (searchElement === array[i]) {\n          return i;\n        }\n      }\n\n      return -1;\n    } else {\n      return array.indexOf(searchElement);\n    }\n  }\n\n  /**\n   * @lends CNComm\n   */\n\n  w.CNComm = {\n    /**\n     * Initializes the module.\n     * @access public\n     * @method\n     * @param {Object} options\n     * @param {Object} options.target - A reference to the target's \"window\" object\n     * @param {String[]} options.origin - Specifies what the origin must be for the event to be dispatched\n     * @param {CNProxy~onMessageHandler} options.onMessage - A callback function that handles the \"message\" event response\n     */\n\n    init: _CNComm,\n  };\n\n  /**\n   * A callback function that handles the attached event to an element.\n   * @callback CNProxy~addEventListenerHandler\n   * @param {Object} event - The \"event\" object\n   */\n\n  /**\n   * A callback function that handles the removed event to an element.\n   * @callback CNProxy~removeEventListenerHandler\n   * @param {Object} event - The \"event\" object\n   */\n\n  /**\n   * A callback function that handles the message event response.\n   * @callback CNProxy~onMessageHandler\n   * @param {Object} data - The object passed from the other window\n   */\n})(window);\n",language:"javascript"},timeout:2e3,delayNext:!0}]}]};var _satellite=function(){"use strict";function e(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function t(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},a=0;a<10;a++)t["_"+String.fromCharCode(a)]=a;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}function a(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(a){var n=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(t,a,n.get?n:{enumerable:!0,get:function(){return e[a]}})})),t}function n(e){var t={exports:{}};return e(t,t.exports),t.exports}function r(e){var t=this.constructor;return this.then((function(a){return t.resolve(e()).then((function(){return a}))}),(function(a){return t.resolve(e()).then((function(){return t.reject(a)}))}))}function i(e){return Boolean(e&&void 0!==e.length)}function s(){}function o(e,t){return function(){e.apply(t,arguments)}}function d(e){if(!(this instanceof d))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],m(e,this)}function c(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,d._immediateFn((function(){var a=1===e._state?t.onFulfilled:t.onRejected;if(null!==a){var n;try{n=a(e._value)}catch(e){return void u(t.promise,e)}l(t.promise,n)}else(1===e._state?l:u)(t.promise,e._value)}))):e._deferreds.push(t)}function l(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var a=t.then;if(t instanceof d)return e._state=3,e._value=t,void g(e);if("function"==typeof a)return void m(o(a,t),e)}e._state=1,e._value=t,g(e)}catch(t){u(e,t)}}function u(e,t){e._state=2,e._value=t,g(e)}function g(e){2===e._state&&0===e._deferreds.length&&d._immediateFn((function(){e._handled||d._unhandledRejectionFn(e._value)}));for(var t=0,a=e._deferreds.length;t<a;t++)c(e,e._deferreds[t]);e._deferreds=null}function p(e,t,a){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=a}function m(e,t){var a=!1;try{e((function(e){a||(a=!0,l(t,e))}),(function(e){a||(a=!0,u(t,e))}))}catch(e){if(a)return;a=!0,u(t,e)}}function h(e){return!0===Fe(e)&&"[object Object]"===Object.prototype.toString.call(e)}function f(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function _(e){return"string"==typeof e&&-1!==e.indexOf("[")&&-1!==e.indexOf("]")}function b(e){return e.substr(0,e.indexOf("["))}function v(e,t,a){if(e.length&&He(t)){var n=e[0];if(1!==e.length){var r=e.slice(1);if(!_(n))return v(r,t[n],a);var i=t[n=b(n)];Array.isArray(i)&&i.forEach((function(e){return v(r,e,a)}))}else t.hasOwnProperty(n)&&"string"==typeof t[n]&&(t[n]=a(t[n]))}}if(window.atob){var y=document,w=Object.getOwnPropertySymbols,k=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable,I=t()?Object.assign:function(t){for(var a,n,r=e(t),i=1;i<arguments.length;i++){for(var s in a=Object(arguments[i]))k.call(a,s)&&(r[s]=a[s]);if(w){n=w(a);for(var o=0;o<n.length;o++)A.call(a,n[o])&&(r[n[o]]=a[n[o]])}}return r},S=I,T=window,C=function(e,t,a,n){var r,i=Boolean(t&&Array.isArray(a)),s=Boolean(i&&e),o=document.createElement("a");if(i){var d=function(){var e=new Error("Unable to find the Library Embed Code for Dynamic Host Resolution.");throw e.code="dynamic_host_resolver_constructor_error",e};if(e&&(/^((https?:)?\/\/).+/.test(e)||d(),/^\/\/.+/.test(e)?o.href=T.location.protocol+e:o.href=e),o.hostname||d(),-1===a.indexOf(o.hostname)){var c=new Error("This library is not authorized for this domain. Please contact your CSM for more information.");throw c.code="dynamic_host_not_allowed",c}}var l=function(){if(null!=r)return r;if(s){var e=o.host;/:80$/.test(e)?e=e.replace(":80",""):/:80\/$/.test(e)?e=e.replace(":80/",""):/:443$/.test(e)?e=e.replace(":443",""):/:443\/$/.test(e)&&(e=e.replace(":443/","")),r=o.protocol+"//"+e}else r="";return r},u=function(e){return s&&"string"==typeof e?[l(),"/"===e.charAt(0)?e.slice(1):e].join("/"):e},g={getTurbineHost:l,decorateWithDynamicHost:u,get isDynamicEnforced(){return i}};return T&&n.onDebugChanged((function(e){e?T.dynamicHostResolver=g:delete T.dynamicHostResolver})),g},E=function(e){var t=[];return e.forEach((function(e){e.events&&e.events.forEach((function(a){t.push({rule:e,event:a})}))})),t.sort((function(e,t){return e.event.ruleOrder-t.event.ruleOrder}))},D="debug",M=function(e,t){var a=function(){return"true"===e.getItem(D)},n=function(t){e.setItem(D,t)},r=[],i=function(e){r.push(e)};return t.outputEnabled=a(),{onDebugChanged:i,getDebugEnabled:a,setDebugEnabled:function(e){a()!==e&&(n(e),t.outputEnabled=e,r.forEach((function(t){t(e)})))}}},P="Module did not export a function.",O=function(e,t,a){return function(n,r,i){i=i||[];var s=e.getModuleExports(n.modulePath);if("function"!=typeof s)throw new Error(P);var o=e.getModuleDefinition(n.modulePath),d=n.settings||{};!n.hasTransformedFilePaths&&o.filePaths&&(a(d,o.filePaths,n.modulePath),n.hasTransformedFilePaths=!0);var c=t(d,r);return s.bind(null,c).apply(null,i)}},N=function(e){return"string"==typeof e?e.replace(/\s+/g," ").trim():e},R={LOG:"log",INFO:"info",DEBUG:"debug",WARN:"warn",ERROR:"error"},L="\ud83d\ude80",x=10===parseInt((/msie (\d+)/.exec(navigator.userAgent.toLowerCase())||[])[1])?"[Launch]":L,B=!1,V=function(e){if(B&&window.console){var t=Array.prototype.slice.call(arguments,1);t.unshift(x),e!==R.DEBUG||window.console[e]||(e=R.INFO),window.console[e].apply(window.console,t)}},j=V.bind(null,R.LOG),F=V.bind(null,R.INFO),H=V.bind(null,R.DEBUG),q=V.bind(null,R.WARN),K=V.bind(null,R.ERROR),U=function(){var e=B;B=!0,V.apply(null,Array.prototype.concat(R.WARN,Array.prototype.slice.call(arguments))),e||(B=!1)},Y={log:j,info:F,debug:H,warn:q,error:K,deprecation:U,get outputEnabled(){return B},set outputEnabled(e){B=e},createPrefixedLogger:function(e){var t="["+e+"]";return{log:j.bind(null,t),info:F.bind(null,t),debug:H.bind(null,t),warn:q.bind(null,t),error:K.bind(null,t)}}},z="com.adobe.reactor.",W=function(e,t){var a=z+(t||"");return{getItem:function(t){try{return T[e].getItem(a+t)}catch(e){return null}},setItem:function(t,n){try{return T[e].setItem(a+t,n),!0}catch(e){return!1}}}},G="dataElements.",Q=W("sessionStorage",G),J=W("localStorage",G),$={PAGEVIEW:"pageview",SESSION:"session",VISITOR:"visitor"},X={},Z=function(e){var t;try{t=JSON.stringify(e)}catch(e){}return t},ee={setValue:function(e,t,a){var n;switch(t){case $.PAGEVIEW:return void(X[e]=a);case $.SESSION:return void((n=Z(a))&&Q.setItem(e,n));case $.VISITOR:return void((n=Z(a))&&J.setItem(e,n))}},getValue:function(e,t){var a;switch(t){case $.PAGEVIEW:return X.hasOwnProperty(e)?X[e]:null;case $.SESSION:return null===(a=Q.getItem(e))?a:JSON.parse(a);case $.VISITOR:return null===(a=J.getItem(e))?a:JSON.parse(a)}}},te=function(e,t,a,n){return"Failed to execute data element module "+e.modulePath+" for data element "+t+". "+a+(n?"\n"+n:"")},ae=function(e,t,a,n,r){return function(i,s){var o=t(i);if(!o)return n?"":void 0;var d,c,l=o.storageDuration;try{d=e.getModuleExports(o.modulePath),c=e.getModuleDefinition(o.modulePath)}catch(e){return void Y.error(te(o,i,e.message,e.stack))}if("function"==typeof d){var u,g=o.settings||{};!o.hasTransformedFilePaths&&c.filePaths&&(r(g,c.filePaths,o.modulePath),o.hasTransformedFilePaths=!0);try{u=d(a(g,s),s)}catch(e){return void Y.error(te(o,i,e.message,e.stack))}return l&&(null!=u?ee.setValue(i,l,u):u=ee.getValue(i,l)),null==u&&null!=o.defaultValue&&(u=o.defaultValue),"string"==typeof u&&(o.cleanText&&(u=N(u)),o.forceLowerCase&&(u=u.toLowerCase())),u}Y.error(te(o,i,"Module did not export a function."))}},ne={text:function(e){return e.textContent},cleanText:function(e){return N(e.textContent)}},re=function(e,t,a){for(var n,r=e,i=0,s=t.length;i<s;i++){if(null==r)return;var o=t[i];if(a&&"@"===o.charAt(0)){var d=o.slice(1);r=ne[d](r)}else if(r.getAttribute&&(n=o.match(/^getAttribute\((.+)\)$/))){var c=n[1];r=r.getAttribute(c)}else r=r[o]}return r},ie=function(e,t,a){return function(n,r){var i;if(t(n))i=a(n,r);else{var s=n.split("."),o=s.shift();"this"===o?r&&(i=re(r.element,s,!0)):"event"===o?r&&(i=re(r,s)):"target"===o?r&&(i=re(r.target,s)):i=re(e[o],s)}return i}},se=function(e,t){return function(a){var n=a.split(".")[0];return Boolean(t(a)||"this"===n||"event"===n||"target"===n||e.hasOwnProperty(n))}},oe=function(e,t,a){var n={exports:{}};return e.call(n.exports,n,n.exports,t,a),n.exports},de=function(){var e={},t=function(t){var a=e[t];if(!a)throw new Error("Module "+t+" not found.");return a},a=function(){Object.keys(e).forEach((function(e){try{n(e)}catch(a){var t="Error initializing module "+e+". "+a.message+(a.stack?"\n"+a.stack:"");Y.error(t)}}))},n=function(e){var a=t(e);return a.hasOwnProperty("exports")||(a.exports=oe(a.definition.script,a.require,a.turbine)),a.exports};return{registerModule:function(t,a,n,r,i){var s={definition:a,extensionName:n,require:r,turbine:i};s.require=r,e[t]=s},hydrateCache:a,getModuleExports:n,getModuleDefinition:function(e){return t(e).definition},getModuleExtensionName:function(e){return t(e).extensionName}}},ce=!1,le=function(e){return function(t,a){var n=e._monitors;n&&(ce||(Y.warn("The _satellite._monitors API may change at any time and should only be used for debugging."),ce=!0),n.forEach((function(e){e[t]&&e[t](a)})))}},ue=function(e,t,a){var n,r,i,s,o=[],d=function(n,r,i){if(!e(r))return n;o.push(r);var s=t(r,i);return o.pop(),null==s&&a?"":s};return n=function(e,t){var a=/^%([^%]+)%$/.exec(e);return a?d(e,a[1],t):e.replace(/%(.+?)%/g,(function(e,a){return d(e,a,t)}))},r=function(e,t){for(var a={},n=Object.keys(e),r=0;r<n.length;r++){var i=n[r],o=e[i];a[i]=s(o,t)}return a},i=function(e,t){for(var a=[],n=0,r=e.length;n<r;n++)a.push(s(e[n],t));return a},s=function(e,t){return"string"==typeof e?n(e,t):Array.isArray(e)?i(e,t):"object"==typeof e&&null!==e?r(e,t):e},function(e,t){return o.length>10?(Y.error("Data element circular reference detected: "+o.join(" -> ")),e):s(e,t)}},ge=function(e){return function(){if("string"==typeof arguments[0])e[arguments[0]]=arguments[1];else if(arguments[0]){var t=arguments[0];for(var a in t)e[a]=t[a]}}},pe="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},me=setTimeout;d.prototype.catch=function(e){return this.then(null,e)},d.prototype.then=function(e,t){var a=new this.constructor(s)
;return c(this,new p(e,t,a)),a},d.prototype.finally=r,d.all=function(e){return new d((function(t,a){function n(e,i){try{if(i&&("object"==typeof i||"function"==typeof i)){var o=i.then;if("function"==typeof o)return void o.call(i,(function(t){n(e,t)}),a)}r[e]=i,0==--s&&t(r)}catch(e){a(e)}}if(!i(e))return a(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);for(var s=r.length,o=0;o<r.length;o++)n(o,r[o])}))},d.resolve=function(e){return e&&"object"==typeof e&&e.constructor===d?e:new d((function(t){t(e)}))},d.reject=function(e){return new d((function(t,a){a(e)}))},d.race=function(e){return new d((function(t,a){if(!i(e))return a(new TypeError("Promise.race accepts an array"));for(var n=0,r=e.length;n<r;n++)d.resolve(e[n]).then(t,a)}))},d._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){me(e,0)},d._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var he=a(Object.freeze({__proto__:null,default:d})),fe="undefined"!=typeof window&&window.Promise||void 0!==pe&&pe.Promise||he.default||he,_e=function(e,t,a){return function(n,r,i,s){return s.then((function(){var s,o=n.delayNext;return new fe((function(t,a){var r=e(n,i,[i]);if(!o)return t();var d=n.timeout,c=new fe((function(e,t){s=setTimeout((function(){t(new Error("A timeout occurred because the action took longer than "+d/1e3+" seconds to complete. "))}),d)}));fe.race([r,c]).then(t,a)})).catch((function(e){return clearTimeout(s),e=t(e),a(n,r,e),fe.reject(e)})).then((function(){clearTimeout(s)}))}))}},be=function(e,t,a,n,r){return function(i,s,o,d){return d.then((function(){var d;return new fe((function(t,a){var n=e(i,o,[o]),r=i.timeout,s=new fe((function(e,t){d=setTimeout((function(){t(new Error("A timeout occurred because the condition took longer than "+r/1e3+" seconds to complete. "))}),r)}));fe.race([n,s]).then(t,a)})).catch((function(e){return clearTimeout(d),e=t(e),n(i,s,e),fe.reject(e)})).then((function(e){if(clearTimeout(d),!a(i,e))return r(i,s),fe.reject()}))}))}},ve=fe.resolve(),ye=function(e,t,a){return function(n,r){return n.conditions&&n.conditions.forEach((function(t){ve=e(t,n,r,ve)})),n.actions&&n.actions.forEach((function(e){ve=t(e,n,r,ve)})),ve=(ve=ve.then((function(){a(n)}))).catch((function(){}))}},we=function(e){return Boolean(e&&"object"==typeof e&&"function"==typeof e.then)},ke=function(e,t,a,n){return function(r,i){var s;if(r.conditions)for(var o=0;o<r.conditions.length;o++){s=r.conditions[o];try{var d=e(s,i,[i]);if(we(d))throw new Error("Rule component sequencing must be enabled on the property for this condition to function properly.");if(!t(s,d))return a(s,r),!1}catch(e){return n(s,r,e),!1}}return!0}},Ae=function(e,t){return function(a,n){e(a,n)&&t(a,n)}},Ie=function(e){return function(t){var a=e.getModuleDefinition(t.modulePath);return a&&a.displayName||t.modulePath}},Se=function(e){return function(t){var a=t.rule,n=t.event,r=e.getModuleDefinition(n.modulePath).name;return{$type:e.getModuleExtensionName(n.modulePath)+"."+r,$rule:{id:a.id,name:a.name}}}},Te=function(e,t,a,n,r,i){return function(s,o){var d=o.rule,c=o.event;c.settings=c.settings||{};try{var l=r(o);t(c,null,[function(t){var n=a(l,t);s((function(){e(n,d)}))}])}catch(e){i.error(n(c,d,e))}}},Ce=function(e,t,a,n){return function(r,i,s){var o=t(r);a.error(e(o,i.name,s)),n("ruleActionFailed",{rule:i,action:r})}},Ee=function(e,t,a,n){return function(r,i,s){var o=t(r);a.error(e(o,i.name,s)),n("ruleConditionFailed",{rule:i,condition:r})}},De=function(e,t,a){return function(n,r){var i=e(n);t.log('Condition "'+i+'" for rule "'+r.name+'" was not met.'),a("ruleConditionFailed",{rule:r,condition:n})}},Me=function(e,t){return function(a){e.log('Rule "'+a.name+'" fired.'),t("ruleCompleted",{rule:a})}},Pe=function(e,t,a){return function(n,r){var i;if(n.actions)for(var s=0;s<n.actions.length;s++){i=n.actions[s];try{e(i,r,[r])}catch(e){return void t(i,n,e)}}a(n)}},Oe=function(e,t,a,n){return function(r,i){n("ruleTriggered",{rule:i}),e?a(i,r):t(i,r)}},Ne=function(e,t,a){return'Failed to execute "'+e+'" for "'+t+'" rule. '+a.message+(a.stack?"\n"+a.stack:"")},Re=function(e,t){return t&&!e.negate||!t&&e.negate},Le=[],xe=!1,Be=function(e){xe?e():Le.push(e)},Ve=function(e,t,a){e(t).forEach((function(e){a(Be,e)})),xe=!0,Le.forEach((function(e){e()})),Le=[]},je=function(e){if(e||(e=new Error("The extension triggered an error, but no error information was provided.")),!(e instanceof Error)){var t="object"==typeof e?JSON.stringify(e):String(e);e=new Error(t)}return e},Fe=function(e){return null!=e&&"object"==typeof e&&!1===Array.isArray(e)},He=function(e){var t,a;return!1!==h(e)&&("function"==typeof(t=e.constructor)&&(!1!==h(a=t.prototype)&&!1!==a.hasOwnProperty("isPrototypeOf")))},qe=function(e,t){return He(t=t||{})?t=S({},t,e):S(t,e),t.hasOwnProperty("type")||Object.defineProperty(t,"type",{get:function(){return Y.deprecation("Accessing event.type in Adobe Launch has been deprecated and will be removed soon. Please use event.$type instead."),t.$type}}),t},Ke=function(e,t){return function(a,n){var r=e[a];if(r){var i=r.modules;if(i)for(var s=Object.keys(i),o=0;o<s.length;o++){var d=s[o],c=i[d];if(c.shared&&c.name===n)return t.getModuleExports(d)}}}},Ue=function(e,t){return function(){return t?e(t):{}}},Ye=function(e,t,a){return function(n){if(a){var r=n.split(".");r.splice(r.length-1||1,0,"min"),n=r.join(".")}return e(t)+n}},ze=".js",We=function(e){return e.substr(0,e.lastIndexOf("/"))},Ge=function(e,t){return-1!==e.indexOf(t,e.length-t.length)},Qe=function(e,t){Ge(t,ze)||(t+=ze);var a=t.split("/"),n=We(e).split("/");return a.forEach((function(e){e&&"."!==e&&(".."===e?n.length&&n.pop():n.push(e))})),n.join("/")},Je=n((function(e){!function(t){if(e.exports=t(),!!0){var a=window.Cookies,n=window.Cookies=t();n.noConflict=function(){return window.Cookies=a,n}}}((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var a=arguments[e];for(var n in a)t[n]=a[n]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}function a(n){function r(){}function i(t,a,i){if("undefined"!=typeof document){"number"==typeof(i=e({path:"/"},r.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var s=JSON.stringify(a);/^[\{\[]/.test(s)&&(a=s)}catch(e){}a=n.write?n.write(a,t):encodeURIComponent(String(a)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var o="";for(var d in i)i[d]&&(o+="; "+d,!0!==i[d]&&(o+="="+i[d].split(";")[0]));return document.cookie=t+"="+a+o}}function s(e,a){if("undefined"!=typeof document){for(var r={},i=document.cookie?document.cookie.split("; "):[],s=0;s<i.length;s++){var o=i[s].split("="),d=o.slice(1).join("=");a||'"'!==d.charAt(0)||(d=d.slice(1,-1));try{var c=t(o[0]);if(d=(n.read||n)(d,c)||t(d),a)try{d=JSON.parse(d)}catch(e){}if(r[c]=d,e===c)break}catch(e){}}return e?r[e]:r}}return r.set=i,r.get=function(e){return s(e,!1)},r.getJSON=function(e){return s(e,!0)},r.remove=function(t,a){i(t,"",e(a,{expires:-1}))},r.defaults={},r.withConverter=a,r}return a((function(){}))}))})),$e={get:Je.get,set:Je.set,remove:Je.remove},Xe=function(e,t){return new fe((function(a,n){t.onload=function(){a(t)},t.onerror=function(){n(new Error("Failed to load script "+e))}}))},Ze=function(e){var t=document.createElement("script");t.src=e,t.async=!0;var a=Xe(e,t);return document.getElementsByTagName("head")[0].appendChild(t),a},et=function(e,t,a,n){t=t||"&",a=a||"=";var r={};if("string"!=typeof e||0===e.length)return r;var i=/\+/g;e=e.split(t);var s=1e3;n&&"number"==typeof n.maxKeys&&(s=n.maxKeys);var o=e.length;s>0&&o>s&&(o=s);for(var d=0;d<o;++d){var c,l,u,g,p=e[d].replace(i,"%20"),m=p.indexOf(a);m>=0?(c=p.substr(0,m),l=p.substr(m+1)):(c=p,l=""),u=decodeURIComponent(c),g=decodeURIComponent(l),f(r,u)?Array.isArray(r[u])?r[u].push(g):r[u]=[r[u],g]:r[u]=g}return r},tt=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},at=function(e,t,a,n){return t=t||"&",a=a||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map((function(n){var r=encodeURIComponent(tt(n))+a;return Array.isArray(e[n])?e[n].map((function(e){return r+encodeURIComponent(tt(e))})).join(t):r+encodeURIComponent(tt(e[n]))})).join(t):n?encodeURIComponent(tt(n))+a+encodeURIComponent(tt(e)):""},nt=n((function(e,t){t.decode=t.parse=et,t.encode=t.stringify=at})),rt="@adobe/reactor-",it={cookie:$e,document:y,"load-script":Ze,"object-assign":S,promise:fe,"query-string":{parse:function(e){return"string"==typeof e&&(e=e.trim().replace(/^[?#&]/,"")),nt.parse(e)},stringify:function(e){return nt.stringify(e)}},window:T},st=function(e){return function(t){if(0===t.indexOf(rt)){var a=t.substr(rt.length),n=it[a];if(n)return n}if(0===t.indexOf("./")||0===t.indexOf("../"))return e(t);throw new Error('Cannot resolve module "'+t+'".')}},ot=function(e,t,a,n,r,i,s){var o=e.extensions,d=e.buildInfo,c=e.environment,l=e.property.settings;if(o){var u=Ke(o,t);Object.keys(o).forEach((function(g){var p=o[g],m=p.settings;Array.isArray(p.filePaths)&&(m=i(m,p.filePaths));var h=Ue(n,m);if(p.modules){var f=Y.createPrefixedLogger(p.displayName),_=Ye(s,p.hostedLibFilesBaseUrl,d.minified),b={buildInfo:d,environment:c,property:{name:e.property.name,id:e.property.id},getDataElementValue:r,getExtensionSettings:h,getHostedLibFileUrl:_,getSharedModule:u,logger:f,propertySettings:l,replaceTokens:n,onDebugChanged:a.onDebugChanged,get debugEnabled(){return a.getDebugEnabled()}};Object.keys(p.modules).forEach((function(e){var a=p.modules[e],n=st((function(a){var n=Qe(e,a);return t.getModuleExports(n)}));t.registerModule(e,a,g,n,b)}))}})),t.hydrateCache()}return t},dt=function(e,t,a,n,r){var i=Y.createPrefixedLogger("Custom Script");e.track=function(e){Y.log('"'+e+'" does not match any direct call identifiers.')},e.getVisitorId=function(){return null},e.property={name:t.property.name,id:t.property.id},e.company=t.company,e.buildInfo=t.buildInfo,e.environment=t.environment,e.logger=i,e.notify=function(e,t){switch(Y.deprecation("_satellite.notify is deprecated. Please use the `_satellite.logger` API."),t){case 3:i.info(e);break;case 4:i.warn(e);break;case 5:i.error(e);break;default:i.log(e)}},e.getVar=n,e.setVar=r,e.setCookie=function(e,t,a){var n="",r={};a&&(n=", { expires: "+a+" }",r.expires=a);var i='_satellite.setCookie is deprecated. Please use _satellite.cookie.set("'+e+'", "'+t+'"'+n+").";Y.deprecation(i),$e.set(e,t,r)},e.readCookie=function(e){return Y.deprecation('_satellite.readCookie is deprecated. Please use _satellite.cookie.get("'+e+'").'),$e.get(e)},e.removeCookie=function(e){Y.deprecation('_satellite.removeCookie is deprecated. Please use _satellite.cookie.remove("'+e+'").'),$e.remove(e)},e.cookie=$e,e.pageBottom=function(){},e.setDebug=a;var s=!1;Object.defineProperty(e,"_container",{get:function(){return s||(Y.warn("_satellite._container may change at any time and should only be used for debugging."),s=!0),t}})},ct=function(e,t){return function(a,n,r){return e&&He(a)&&Object.keys(a).length&&Array.isArray(n)&&n.length?(n.forEach((function(e){Boolean(null!=r&&/^core\/.*actions.*\/customCode\.js$/.test(r))&&"source"===e&&!a.isExternal||v(e.split("."),a,t)})),a):a}},lt=window._satellite;if(lt&&!window.__satelliteLoaded){window.__satelliteLoaded=!0;var ut=lt.container;delete lt.container;var gt=S({},ut.buildInfo);Object.defineProperty(gt,"environment",{get:function(){return Y.deprecation("container.buildInfo.environment is deprecated.Please use `container.environment.stage` instead"),ut.environment.stage}}),ut.buildInfo=gt;var pt,mt=M(W("localStorage"),Y),ht="";y.currentScript&&y.currentScript.getAttribute("src")&&(ht=y.currentScript.getAttribute("src"));try{pt=C(ht,Boolean(ut.company.dynamicCdnEnabled),ut.company.cdnAllowList,mt)}catch(e){throw Y.warn("Please review the following error:"),e}var ft,_t=ct(pt.isDynamicEnforced,pt.decorateWithDynamicHost),bt=de(),vt=ut.property.settings.undefinedVarsReturnEmpty,yt=ut.property.settings.ruleComponentSequencingEnabled,wt=ut.dataElements||{},kt=function(e){return wt[e]},At=function(){return ft.apply(null,arguments)},It=ae(bt,kt,At,vt,_t),St={},Tt=ge(St),Ct=se(St,kt),Et=ie(St,kt,It);ft=ue(Ct,Et,vt),dt(lt,ut,mt.setDebugEnabled,Et,Tt),ot(ut,bt,mt,ft,It,_t,pt.decorateWithDynamicHost);var Dt=le(lt),Mt=O(bt,ft,_t),Pt=Ie(bt),Ot=De(Pt,Y,Dt),Nt=Ee(Ne,Pt,Y,Dt),Rt=Ce(Ne,Pt,Y,Dt),Lt=Me(Y,Dt),xt=Te(Oe(yt,Ae(ke(Mt,Re,Ot,Nt),Pe(Mt,Rt,Lt)),ye(be(Mt,je,Re,Nt,Ot),_e(Mt,je,Rt),Lt),Dt),Mt,qe,Ne,Se(bt),Y);Ve(E,ut.rules||[],xt)}return lt}console.warn("Adobe Launch is unsupported in IE 9 and below.")}();