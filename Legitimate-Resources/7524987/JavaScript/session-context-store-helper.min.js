var SessionContextStoreHelper;(()=>{var e={910:(e,t)=>{var n;void 0===(n=function(){let e=!0;function t(){return e&&globalThis.Prototype}return{init:function(t){e=t.shouldRemoveArraysPrototypeToJson},robustStringify:function(e){let n;t()&&(n=Array.prototype.toJSON,delete Array.prototype.toJSON);let _=JSON.stringify(e);return t()&&(Array.prototype.toJSON=n),_}}}.apply(t,[]))||(e.exports=n)},445:(e,t,n)=>{var _,o;_=[n(457),n(674),n(910)],void 0===(o=function(e,t,n){var _,o={},i=null,r=0,s=void 0;function E(e,t,n,o){var i={type:n,sessionId:_,param:o};e.postMessage(i,t)}function a(e){var t=e.data;_&&t.sessionId===_&&o[t.type]&&(o[t.type](t.param,e),e.stopImmediatePropagation())}function c(e,t){o[e]=t}return{registerMessageHandler:c,postMessageToFrame:E,postFnToFrame:function(_,o,s,a){return null===i&&(i={},c(t.PROXY_PRESENCE_FN_RESPONSE_MESSAGE,(function(e){var t=JSON.parse(e);i[t.cb]&&(i[t.cb](t.result),delete i[t.cb])}))),new e((function(e){var t="cb"+(r+=1);i[t]=function(t){e(t)},E(_,o,s,n.robustStringify({cb:t,p:a}))}))},registerFnHandler:function(e,_){o[e]=function(e,o){var i=JSON.parse(e),r={result:_(i.p),cb:i.cb};E(o.source,"*",t.PROXY_PRESENCE_FN_RESPONSE_MESSAGE,n.robustStringify(r))}},init:function(e,t){_=e,t&&(s=t),s&&(s.removeEventListener("message",a),s.addEventListener("message",a,!0))}}}.apply(t,_))||(e.exports=o)},369:(e,t,n)=>{var _,o;_=[n(674),n(445)],void 0===(o=function(e,t){"use strict";function n(_,o){if(document.body){var i=window.document.createElement("iframe");i.style.display="none",i.src=_,function(n,_,o){o&&(t.init(e.SESSION_CONTEXT_STORE_SESSION_ID_FOR_MESSAGE,window),t.registerFnHandler(e.SESSION_CONTEXT_ADDED_EVENT_LISTENERS,(function(){return o})))}(0,0,o),"undefined"!=typeof __caac__?__caac__.window_global.document.body.appendChild(i):window.document.body.appendChild(i)}else setTimeout(n,100,_)}return{storeContextBeforeAction:function(t,_,o,i){t?(o&&(t=function(t){return t+"&"+e.SESSION_CONTEXT_STORE_FRAGMENT_QUERY_NAME+"="+encodeURIComponent("undefined"!=typeof __caac__?__caac__.window_global.location.hash:window.location.hash)}(t)),function(t,n){var _=function _(o){o.origin===t.slice(0,o.origin.length)&&o.data===e.SESSION_CONTEXT_STORE_COMPLETE&&(window.removeEventListener("message",_),n(o.data))};window.addEventListener("message",_),setTimeout((function(){window.removeEventListener("message",_),n()}),5e3)}(t,_),n(t,i)):_()}}}.apply(t,_))||(e.exports=o)},674:(e,t)=>{var n;void 0===(n=function(){return{SESSION_CONTEXT_STORE_COMPLETE:"mcas_session_context_store_complete",SESSION_CONTEXT_ADDED_EVENT_LISTENERS:"mcas_session_context_added_event_listeners",SESSION_CONTEXT_STORE_SESSION_ID_FOR_MESSAGE:"mcas_session_context_store_session_id_for_message_helper",MCAS_UNMAPPED_DOMAINS_TO_PROXY_PRESENCE_TYPE:"mcas_unmapped_domains_to_proxy_presence",PROXY_PRESENCE_VIEW_MODE_CHANGE_MESSAGE:"mcas_proxy_presence_view_change_request",PROXY_PRESENCE_REDIRECT_TO_MESSAGE:"mcas_redirect_to_message",PROXY_PRESENCE_FN_RESPONSE_MESSAGE:"mcas_message_response_recieved",PROXY_PRESENCE_REQ_RELOAD_MESSAGE:"mcas_message_request_reload",PROXY_PRESENCE_FN_GET_TOP_URI:"mcas_proxy_presence_get_top_uri",PROXY_PRESENCE_FN_GET_CONFIG:"mcas_proxy_presence_get_config",PROXY_PRESENCE_HARDENING_NOTIFICATION_MESSAGE:"mcas_set_hardening_notification_message",PROXY_PRESENCE_VIEW_MODE:{HIDDEN:1,TOOLBAR:2,FULLSCREEN:3,MINIFIED:4},PROXY_PRESENCE_HARDENING_NOTIFICATION_CATEGORY:{CUSTOM_ACTIVITIES:{name:"Custom activities",template:"PROXY_ACTIVITY_CATEGORY_CUSTOM_ACTIVITIES"},UPLOAD:{name:"Upload file",template:"PROXY_ACTIVITY_CATEGORY_UPLOAD"},DOWNLOAD:{name:"Download file",template:"PROXY_ACTIVITY_CATEGORY_DOWNLOAD"},OPEN_IN_NATIVE_APP:{name:"Open in native app",template:"PROXY_ACTIVITY_CATEGORY_OPEN_IN_NATIVE_APP"}},SESSION_LIFECYCLE_FN_GET_EXPIRY_TIME:"mcas_session_lifecycle_get_expiry_time",USER_INTERACTIVITY_FN_GET_LAST_ACTION_TIME:"mcas_user_interactivity_get_last_action_time",PROXY_PRESENCE_FN_GET_NON_SUFFIXED_TOP_URI:"mcas_proxy_presence_get_non_suffixed_top_uri",SESSION_CONTEXT_STORE_FRAGMENT_QUERY_NAME:"fragment"}}.apply(t,[]))||(e.exports=n)},457:function(e,t){var n,_;void 0===(_="function"==typeof(n=function(){function e(e){this.promiseChain=[];var t,n=!1;this.handleError=function(){},this.then=function(e){return this.promiseChain.push(e),n&&(t=e(t)),this},this.catch=function(e){return this.handleError=e,this},this.onResolve=function(e){t=e,n=!0;try{this.promiseChain.forEach((function(e){t=e(t)}))}catch(e){this.promiseChain=[],this.onReject(e)}},this.onReject=function(e){this.handleError(e)},this.onResolve=this.onResolve.bind(this),this.onReject=this.onReject.bind(this),e(this.onResolve,this.onReject)}return e.all=function(t){return new e((function(e,n){var _=[],o=!1;void 0!==t&&0!==t.length||e([]),t.forEach((function(i,r){i.then((function(n){_[r]=n,_.length!==t.length||o||(o=!0,e(_))})).catch((function(e){o=!0,n(e)}))}))}))},e.resolvedPromise=function(t){return new e((function(e,n){e(t)}))},e})?n.apply(t,[]):n)||(e.exports=_)}},t={},n=function n(_){var o=t[_];if(void 0!==o)return o.exports;var i=t[_]={exports:{}};return e[_].call(i.exports,i,i.exports,n),i.exports}(369);SessionContextStoreHelper=n})();