function updateCartCounts(countItems)
{$('.order_result').find('.cartsymbol').each(function(){$(this).html('<i class="fa fa-shopping-bag" aria-hidden="true" style="padding: 0 5px!important"></i>'
+'<span>'+countItems+'</span>');});}
function send_ajax(url,data,callback,async_flag){if(async_flag===undefined)
{async_flag=true;}
jQuery.ajax({url:url,type:"POST",data:data,dataType:"json",async:async_flag,success:callback,error:function(xhr,status,errorThrown){console.log("Error: "+errorThrown);console.log("Status: "+status);}});}
function send_ajax_html(url,data,callback){jQuery.ajax({url:url,type:"POST",data:data,dataType:"html",success:callback,error:function(xhr,status,errorThrown){console.log("Error: "+errorThrown);console.log("Status: "+status);}});}
function update_cart_symbol(cart_total)
{jQuery(".fa-shopping-bag").parent().find("span").html(cart_total);}
function remove_product_from_basket2(itemid,callback)
{var data={request_type:"remove_product_from_basket2",itemid:itemid,};send_ajax(get_ajax_url(),data,callback);}
$(document).ready(function()
{var tmpHtml=new Array();var old_text="";jQuery(document).on("click",".add-product-to-cart-btn",function(event)
{event.preventDefault();var old_text=jQuery(event.target).html();if(jQuery(event.target).hasClass("loading"))
{old_text=tmpHtml[event.target];}
else
{tmpHtml[event.target]=old_text;}
jQuery(event.target).addClass("loading");var spinner='<i class="fa fa-circle-o-notch fa-spin fa-3x fa-fw"></i>';jQuery(event.target).html(spinner);var element=event.target;var product_class=jQuery(element).attr("data-product-class");var product_type=jQuery(element).attr("data-product-type");var product_name=jQuery(element).attr("data-product-name");var product_data_tld=jQuery(element).attr("data-product-data-tld");var product_data_runtime=jQuery(element).attr("data-product-data-runtime");var product_data_class=jQuery(element).attr("data-product-data-class");var item={"product_class":product_class,"product_type":product_type,"product_name":product_name,"data":{"tld":product_data_tld,"runtime":product_data_runtime,"class":product_data_class,}};if(product_type==="bundlereg")
{item["data"]["bundle"]=jQuery(element).attr("data-product-data-bundle");}
var items=[item];var data={request_type:"add_items",items:items,};var callback=function(json){if(json.type==='success')
{var parent=$(event.target).parent();$(event.target).remove();var div=$('<div />').addClass('order_result').append($('<a />').addClass('cartsymbol').attr('href',basketURL).append($('<i />').addClass('fa').addClass('fa-shopping-bag').attr('aria-hidden',true).attr('style','padding: 0 5px!important;')).append($('<span />').html(json.number_of_basket_items)));parent.append(div);updateCartCounts(json.number_of_basket_items);update_cart_symbol(json.number_of_basket_items);}
else{jQuery(event.target).removeClass("loading");jQuery(event.target).html(old_text);update_cart_symbol(json.number_of_basket_items);}
if(jQuery(event.target).attr("data-reload-cart")=="1")
{location.reload();}};send_ajax(get_ajax_url(),data,callback);return;});jQuery(document).on("click",".remove_product_from_cart2",function(event){event.preventDefault();var itemid=jQuery(event.target).attr("data-cartid");var tr=jQuery(event.target).closest("tr");tr_old=tr[0].outerHTML;var td=jQuery(tr).find("td.product");var loading_tr=jQuery(tr).replaceWith('<tr class="remove_loading">'+td[0].outerHTML+'<td colspan="2" style="text-align: right;"><img src="/assets/img/spinner.gif"></td></tr>');var callback=function(json){jQuery("#cart_total_netto").html(json["price-total"]);jQuery("#cart_total_vat").html(json["vat"]);jQuery("#cart_total").html(json["price-incl-vat"]);if(typeof json["products"]!=='undefined'&&json["products"].length>0){var cart_total=json["products"].length;update_cart_symbol(cart_total);jQuery(".remove_loading").remove();}
else
{cart_total=0;update_cart_symbol(cart_total);jQuery("div.cart").hide();jQuery(".empty_cart").show();}
json["products"].forEach(function(product){if('newruntime'in product)
{$re=/^[0-9]+( [\w]+\s*)$/;newruntime=jQuery('[data-cartid="'+product["id"]+'"]').parent().parent().find(".period").html();newruntime=newruntime.replace($re,product["newruntime"][1]*12+"$1");jQuery('[data-cartid="'+product["id"]+'"]').parent().parent().find(".period").html(newruntime);jQuery('[data-cartid="'+product["id"]+'"]').parent().parent().find(".price span").html(product["html"][0]["text"]);}});};remove_product_from_basket2(itemid,callback);});var fromTop=$(window).scrollTop();$(window).on("scroll",function(){fromTop=$(window).scrollTop();$("body").toggleClass("sticky",(fromTop>80));});if(fromTop>80)$("body").addClass("sticky");$('header nav div.burger').click(function(){$(this).toggleClass('is_active');$('body nav div.toggle ').stop().toggleClass('active');return false;});$('li.active').find('span').addClass('open');$('li.active').find('ul').css('display','block');$('header nav span.more').click(function(e){$(e.target).parents('li').siblings('li.active').removeClass('active');$(e.target).parents('li').addClass('active');$(this).toggleClass('open').next().stop().slideToggle();return false;});$(window).scroll(function(){if($(this).scrollTop()>400){$('div.contexthelp').addClass('show');}else{$('div.contexthelp').removeClass('show');}});$('.scrollup').click(function(){$("html, body").animate({scrollTop:0},600);return false;});$('header form.domainsearch').submit(function(){$('header form.domainsearch button i').removeClass('fa-search');$('header form.domainsearch button i').addClass('fa-spinner fa-pulse').attr('disabled',true).parents('form').submit();return false;});$('ul.events li div.event div.default div.name span.onlocation a').click(function(){$(this).toggleClass('active').closest('div.event').siblings('div.additional').stop().slideToggle(300);return false;});function animateBox(){$('aside .box.branches > a div.animator').removeClass('start').addClass('end');}
setTimeout(animateBox,1000);function animateCTA(){$('a.cta#animator div.animator').removeClass('start').addClass('end');}
setTimeout(animateCTA,2000);x=1;for(i=0;i<$('#animator li').length;i++){setTimeout(function(){$('#animator li:nth-child('+x+') a > div > div').removeClass('start').addClass('end');x++;},200*(i+1));};$('div.productcards span.more').click(function(){$('span.more').toggleClass('down');$('div.more').slideToggle(300);return false;});$('div.productcards div.price>span').click(function(){$('span.more').toggleClass('down');$('div.more').slideToggle(300);return false;});$('div.productcards div.icon').click(function(){$('span.more').toggleClass('down');$('div.more').slideToggle(300);return false;});$('div.upsell span.more').click(function(){$(this).toggleClass('down').parent().parent().siblings('div.row').find('div.more').stop().slideToggle(300);return false;});$('body').on("click",".add-product-to-cart-btn",function(e){$('.flytocart').remove();var target=$(e.target);var flytarget=$('.basket-toggle i');if(target.attr('data-flytarget'))flytarget=$(target.attr('data-flytarget'));var top=($(window).scrollTop()-target.offset().top)*-1;var left=target.offset().left;var width=target.outerWidth();var height=target.outerHeight();var pointerevent=target.css('pointer-events');var newbutton=target.clone().appendTo('body');target.css({opacity:0,pointerEvents:'none'});newbutton.id=Math.floor((Math.random()*100)+1);newbutton.addClass('temp flytocart');newbutton.css({position:'fixed',top:top,zIndex:1110,left:left,width:width,height:height,display:'block',opacity:'1'});newbutton.removeClass('add-product-to-cart-btn');newbutton.text('');newbutton.animate({borderRadius:height/2,width:height,left:left+(height/2)},200,function(){var top=flytarget.position().top;var left=flytarget.offset().left;newbutton.animate({top:top,left:left},function(){newbutton.animate({height:0,width:0});newbutton.remove();$('.basket-toggle i').removeClass('animated wiggle');setTimeout(function(){$('.basket-toggle i').addClass('animated wiggle');},50);target.animate({opacity:1});target.css('pointer-events',pointerevent);$("body").trigger("add-product-to-cart-btn");});});});function extractTLD(domain)
{var parts=domain.split(".");var l=parts.length;var tld="";for(var i=1;i<l;i++)
{if(i==1)
{tld+=parts[i];}
else
{tld+="."+parts[i];}}
return tld;}
jQuery("form.search-form-main").submit(function(e)
{var searchTerm=jQuery("input.search-input-main").val();var tld=extractTLD(searchTerm);jQuery("#tld-track-main").val(tld);});jQuery("form.search-form-sticky").submit(function(e)
{var searchTerm=jQuery("input.search-input-sticky").val();var tld=extractTLD(searchTerm);jQuery("#tld-track-sticky").val(tld);});$('body').on('click','.KSCookieConsentBtn',function(event){jQuery.ajax({url:get_control_url(),type:"POST",data:{type:"cookie",method:"set",key:"seen-cookie-message",value:"yes"},dataType:"json",success:function(data){if(data.success&&typeof vgo==='function'){vgo('process','allowTracking');}else{}},error:function(xhr,status,errorThrown){console.log("Error: "+errorThrown);console.log("Status: "+status);}});});});